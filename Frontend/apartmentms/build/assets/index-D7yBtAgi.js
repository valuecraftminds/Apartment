function nb(n,c){for(var o=0;o<c.length;o++){const x=c[o];if(typeof x!="string"&&!Array.isArray(x)){for(const f in x)if(f!=="default"&&!(f in n)){const g=Object.getOwnPropertyDescriptor(x,f);g&&Object.defineProperty(n,f,g.get?g:{enumerable:!0,get:()=>x[f]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))x(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const y of g.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&x(y)}).observe(document,{childList:!0,subtree:!0});function o(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function x(f){if(f.ep)return;f.ep=!0;const g=o(f);fetch(f.href,g)}})();var hd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Dd(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Pu={exports:{}},Oo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $f;function lb(){if($f)return Oo;$f=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function o(x,f,g){var y=null;if(g!==void 0&&(y=""+g),f.key!==void 0&&(y=""+f.key),"key"in f){g={};for(var j in f)j!=="key"&&(g[j]=f[j])}else g=f;return f=g.ref,{$$typeof:n,type:x,key:y,ref:f!==void 0?f:null,props:g}}return Oo.Fragment=c,Oo.jsx=o,Oo.jsxs=o,Oo}var Qf;function ib(){return Qf||(Qf=1,Pu.exports=lb()),Pu.exports}var e=ib(),Uu={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zf;function ob(){if(Zf)return At;Zf=1;var n=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.consumer"),y=Symbol.for("react.context"),j=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.iterator;function _(ee){return ee===null||typeof ee!="object"?null:(ee=E&&ee[E]||ee["@@iterator"],typeof ee=="function"?ee:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},O=Object.assign,M={};function z(ee,H,me){this.props=ee,this.context=H,this.refs=M,this.updater=me||T}z.prototype.isReactComponent={},z.prototype.setState=function(ee,H){if(typeof ee!="object"&&typeof ee!="function"&&ee!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ee,H,"setState")},z.prototype.forceUpdate=function(ee){this.updater.enqueueForceUpdate(this,ee,"forceUpdate")};function I(){}I.prototype=z.prototype;function L(ee,H,me){this.props=ee,this.context=H,this.refs=M,this.updater=me||T}var D=L.prototype=new I;D.constructor=L,O(D,z.prototype),D.isPureReactComponent=!0;var B=Array.isArray,Y={H:null,A:null,T:null,S:null,V:null},X=Object.prototype.hasOwnProperty;function U(ee,H,me,ae,be,ze){return me=ze.ref,{$$typeof:n,type:ee,key:H,ref:me!==void 0?me:null,props:ze}}function G(ee,H){return U(ee.type,H,void 0,void 0,void 0,ee.props)}function Q(ee){return typeof ee=="object"&&ee!==null&&ee.$$typeof===n}function le(ee){var H={"=":"=0",":":"=2"};return"$"+ee.replace(/[=:]/g,function(me){return H[me]})}var ce=/\/+/g;function te(ee,H){return typeof ee=="object"&&ee!==null&&ee.key!=null?le(""+ee.key):H.toString(36)}function re(){}function W(ee){switch(ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason;default:switch(typeof ee.status=="string"?ee.then(re,re):(ee.status="pending",ee.then(function(H){ee.status==="pending"&&(ee.status="fulfilled",ee.value=H)},function(H){ee.status==="pending"&&(ee.status="rejected",ee.reason=H)})),ee.status){case"fulfilled":return ee.value;case"rejected":throw ee.reason}}throw ee}function P(ee,H,me,ae,be){var ze=typeof ee;(ze==="undefined"||ze==="boolean")&&(ee=null);var xe=!1;if(ee===null)xe=!0;else switch(ze){case"bigint":case"string":case"number":xe=!0;break;case"object":switch(ee.$$typeof){case n:case c:xe=!0;break;case S:return xe=ee._init,P(xe(ee._payload),H,me,ae,be)}}if(xe)return be=be(ee),xe=ae===""?"."+te(ee,0):ae,B(be)?(me="",xe!=null&&(me=xe.replace(ce,"$&/")+"/"),P(be,H,me,"",function(Je){return Je})):be!=null&&(Q(be)&&(be=G(be,me+(be.key==null||ee&&ee.key===be.key?"":(""+be.key).replace(ce,"$&/")+"/")+xe)),H.push(be)),1;xe=0;var Ze=ae===""?".":ae+":";if(B(ee))for(var je=0;je<ee.length;je++)ae=ee[je],ze=Ze+te(ae,je),xe+=P(ae,H,me,ze,be);else if(je=_(ee),typeof je=="function")for(ee=je.call(ee),je=0;!(ae=ee.next()).done;)ae=ae.value,ze=Ze+te(ae,je++),xe+=P(ae,H,me,ze,be);else if(ze==="object"){if(typeof ee.then=="function")return P(W(ee),H,me,ae,be);throw H=String(ee),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(ee).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return xe}function $(ee,H,me){if(ee==null)return ee;var ae=[],be=0;return P(ee,ae,"","",function(ze){return H.call(me,ze,be++)}),ae}function ne(ee){if(ee._status===-1){var H=ee._result;H=H(),H.then(function(me){(ee._status===0||ee._status===-1)&&(ee._status=1,ee._result=me)},function(me){(ee._status===0||ee._status===-1)&&(ee._status=2,ee._result=me)}),ee._status===-1&&(ee._status=0,ee._result=H)}if(ee._status===1)return ee._result.default;throw ee._result}var de=typeof reportError=="function"?reportError:function(ee){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ee=="object"&&ee!==null&&typeof ee.message=="string"?String(ee.message):String(ee),error:ee});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ee);return}console.error(ee)};function Ce(){}return At.Children={map:$,forEach:function(ee,H,me){$(ee,function(){H.apply(this,arguments)},me)},count:function(ee){var H=0;return $(ee,function(){H++}),H},toArray:function(ee){return $(ee,function(H){return H})||[]},only:function(ee){if(!Q(ee))throw Error("React.Children.only expected to receive a single React element child.");return ee}},At.Component=z,At.Fragment=o,At.Profiler=f,At.PureComponent=L,At.StrictMode=x,At.Suspense=k,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Y,At.__COMPILER_RUNTIME={__proto__:null,c:function(ee){return Y.H.useMemoCache(ee)}},At.cache=function(ee){return function(){return ee.apply(null,arguments)}},At.cloneElement=function(ee,H,me){if(ee==null)throw Error("The argument must be a React element, but you passed "+ee+".");var ae=O({},ee.props),be=ee.key,ze=void 0;if(H!=null)for(xe in H.ref!==void 0&&(ze=void 0),H.key!==void 0&&(be=""+H.key),H)!X.call(H,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&H.ref===void 0||(ae[xe]=H[xe]);var xe=arguments.length-2;if(xe===1)ae.children=me;else if(1<xe){for(var Ze=Array(xe),je=0;je<xe;je++)Ze[je]=arguments[je+2];ae.children=Ze}return U(ee.type,be,void 0,void 0,ze,ae)},At.createContext=function(ee){return ee={$$typeof:y,_currentValue:ee,_currentValue2:ee,_threadCount:0,Provider:null,Consumer:null},ee.Provider=ee,ee.Consumer={$$typeof:g,_context:ee},ee},At.createElement=function(ee,H,me){var ae,be={},ze=null;if(H!=null)for(ae in H.key!==void 0&&(ze=""+H.key),H)X.call(H,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(be[ae]=H[ae]);var xe=arguments.length-2;if(xe===1)be.children=me;else if(1<xe){for(var Ze=Array(xe),je=0;je<xe;je++)Ze[je]=arguments[je+2];be.children=Ze}if(ee&&ee.defaultProps)for(ae in xe=ee.defaultProps,xe)be[ae]===void 0&&(be[ae]=xe[ae]);return U(ee,ze,void 0,void 0,null,be)},At.createRef=function(){return{current:null}},At.forwardRef=function(ee){return{$$typeof:j,render:ee}},At.isValidElement=Q,At.lazy=function(ee){return{$$typeof:S,_payload:{_status:-1,_result:ee},_init:ne}},At.memo=function(ee,H){return{$$typeof:b,type:ee,compare:H===void 0?null:H}},At.startTransition=function(ee){var H=Y.T,me={};Y.T=me;try{var ae=ee(),be=Y.S;be!==null&&be(me,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Ce,de)}catch(ze){de(ze)}finally{Y.T=H}},At.unstable_useCacheRefresh=function(){return Y.H.useCacheRefresh()},At.use=function(ee){return Y.H.use(ee)},At.useActionState=function(ee,H,me){return Y.H.useActionState(ee,H,me)},At.useCallback=function(ee,H){return Y.H.useCallback(ee,H)},At.useContext=function(ee){return Y.H.useContext(ee)},At.useDebugValue=function(){},At.useDeferredValue=function(ee,H){return Y.H.useDeferredValue(ee,H)},At.useEffect=function(ee,H,me){var ae=Y.H;if(typeof me=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(ee,H)},At.useId=function(){return Y.H.useId()},At.useImperativeHandle=function(ee,H,me){return Y.H.useImperativeHandle(ee,H,me)},At.useInsertionEffect=function(ee,H){return Y.H.useInsertionEffect(ee,H)},At.useLayoutEffect=function(ee,H){return Y.H.useLayoutEffect(ee,H)},At.useMemo=function(ee,H){return Y.H.useMemo(ee,H)},At.useOptimistic=function(ee,H){return Y.H.useOptimistic(ee,H)},At.useReducer=function(ee,H,me){return Y.H.useReducer(ee,H,me)},At.useRef=function(ee){return Y.H.useRef(ee)},At.useState=function(ee){return Y.H.useState(ee)},At.useSyncExternalStore=function(ee,H,me){return Y.H.useSyncExternalStore(ee,H,me)},At.useTransition=function(){return Y.H.useTransition()},At.version="19.1.1",At}var Wf;function Px(){return Wf||(Wf=1,Uu.exports=ob()),Uu.exports}var N=Px();const la=Dd(N);var Hu={exports:{}},Bo={},Vu={exports:{}},qu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kf;function cb(){return Kf||(Kf=1,function(n){function c($,ne){var de=$.length;$.push(ne);e:for(;0<de;){var Ce=de-1>>>1,ee=$[Ce];if(0<f(ee,ne))$[Ce]=ne,$[de]=ee,de=Ce;else break e}}function o($){return $.length===0?null:$[0]}function x($){if($.length===0)return null;var ne=$[0],de=$.pop();if(de!==ne){$[0]=de;e:for(var Ce=0,ee=$.length,H=ee>>>1;Ce<H;){var me=2*(Ce+1)-1,ae=$[me],be=me+1,ze=$[be];if(0>f(ae,de))be<ee&&0>f(ze,ae)?($[Ce]=ze,$[be]=de,Ce=be):($[Ce]=ae,$[me]=de,Ce=me);else if(be<ee&&0>f(ze,de))$[Ce]=ze,$[be]=de,Ce=be;else break e}}return ne}function f($,ne){var de=$.sortIndex-ne.sortIndex;return de!==0?de:$.id-ne.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var g=performance;n.unstable_now=function(){return g.now()}}else{var y=Date,j=y.now();n.unstable_now=function(){return y.now()-j}}var k=[],b=[],S=1,E=null,_=3,T=!1,O=!1,M=!1,z=!1,I=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B($){for(var ne=o(b);ne!==null;){if(ne.callback===null)x(b);else if(ne.startTime<=$)x(b),ne.sortIndex=ne.expirationTime,c(k,ne);else break;ne=o(b)}}function Y($){if(M=!1,B($),!O)if(o(k)!==null)O=!0,X||(X=!0,te());else{var ne=o(b);ne!==null&&P(Y,ne.startTime-$)}}var X=!1,U=-1,G=5,Q=-1;function le(){return z?!0:!(n.unstable_now()-Q<G)}function ce(){if(z=!1,X){var $=n.unstable_now();Q=$;var ne=!0;try{e:{O=!1,M&&(M=!1,L(U),U=-1),T=!0;var de=_;try{t:{for(B($),E=o(k);E!==null&&!(E.expirationTime>$&&le());){var Ce=E.callback;if(typeof Ce=="function"){E.callback=null,_=E.priorityLevel;var ee=Ce(E.expirationTime<=$);if($=n.unstable_now(),typeof ee=="function"){E.callback=ee,B($),ne=!0;break t}E===o(k)&&x(k),B($)}else x(k);E=o(k)}if(E!==null)ne=!0;else{var H=o(b);H!==null&&P(Y,H.startTime-$),ne=!1}}break e}finally{E=null,_=de,T=!1}ne=void 0}}finally{ne?te():X=!1}}}var te;if(typeof D=="function")te=function(){D(ce)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,W=re.port2;re.port1.onmessage=ce,te=function(){W.postMessage(null)}}else te=function(){I(ce,0)};function P($,ne){U=I(function(){$(n.unstable_now())},ne)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):G=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return _},n.unstable_next=function($){switch(_){case 1:case 2:case 3:var ne=3;break;default:ne=_}var de=_;_=ne;try{return $()}finally{_=de}},n.unstable_requestPaint=function(){z=!0},n.unstable_runWithPriority=function($,ne){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var de=_;_=$;try{return ne()}finally{_=de}},n.unstable_scheduleCallback=function($,ne,de){var Ce=n.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ce+de:Ce):de=Ce,$){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=de+ee,$={id:S++,callback:ne,priorityLevel:$,startTime:de,expirationTime:ee,sortIndex:-1},de>Ce?($.sortIndex=de,c(b,$),o(k)===null&&$===o(b)&&(M?(L(U),U=-1):M=!0,P(Y,de-Ce))):($.sortIndex=ee,c(k,$),O||T||(O=!0,X||(X=!0,te()))),$},n.unstable_shouldYield=le,n.unstable_wrapCallback=function($){var ne=_;return function(){var de=_;_=ne;try{return $.apply(this,arguments)}finally{_=de}}}}(qu)),qu}var Jf;function db(){return Jf||(Jf=1,Vu.exports=cb()),Vu.exports}var Gu={exports:{}},br={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eg;function ub(){if(eg)return br;eg=1;var n=Px();function c(k){var b="https://react.dev/errors/"+k;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+k+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var x={d:{f:o,r:function(){throw Error(c(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},f=Symbol.for("react.portal");function g(k,b,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:E==null?null:""+E,children:k,containerInfo:b,implementation:S}}var y=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function j(k,b){if(k==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return br.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,br.createPortal=function(k,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(c(299));return g(k,b,null,S)},br.flushSync=function(k){var b=y.T,S=x.p;try{if(y.T=null,x.p=2,k)return k()}finally{y.T=b,x.p=S,x.d.f()}},br.preconnect=function(k,b){typeof k=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,x.d.C(k,b))},br.prefetchDNS=function(k){typeof k=="string"&&x.d.D(k)},br.preinit=function(k,b){if(typeof k=="string"&&b&&typeof b.as=="string"){var S=b.as,E=j(S,b.crossOrigin),_=typeof b.integrity=="string"?b.integrity:void 0,T=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?x.d.S(k,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:_,fetchPriority:T}):S==="script"&&x.d.X(k,{crossOrigin:E,integrity:_,fetchPriority:T,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},br.preinitModule=function(k,b){if(typeof k=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=j(b.as,b.crossOrigin);x.d.M(k,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&x.d.M(k)},br.preload=function(k,b){if(typeof k=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,E=j(S,b.crossOrigin);x.d.L(k,S,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},br.preloadModule=function(k,b){if(typeof k=="string")if(b){var S=j(b.as,b.crossOrigin);x.d.m(k,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else x.d.m(k)},br.requestFormReset=function(k){x.d.r(k)},br.unstable_batchedUpdates=function(k,b){return k(b)},br.useFormState=function(k,b,S){return y.H.useFormState(k,b,S)},br.useFormStatus=function(){return y.H.useHostTransitionStatus()},br.version="19.1.1",br}var tg;function xb(){if(tg)return Gu.exports;tg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),Gu.exports=ub(),Gu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ag;function hb(){if(ag)return Bo;ag=1;var n=db(),c=Px(),o=xb();function x(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function g(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function y(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function j(t){if(g(t)!==t)throw Error(x(188))}function k(t){var r=t.alternate;if(!r){if(r=g(t),r===null)throw Error(x(188));return r!==t?null:t}for(var i=t,h=r;;){var w=i.return;if(w===null)break;var C=w.alternate;if(C===null){if(h=w.return,h!==null){i=h;continue}break}if(w.child===C.child){for(C=w.child;C;){if(C===i)return j(w),t;if(C===h)return j(w),r;C=C.sibling}throw Error(x(188))}if(i.return!==h.return)i=w,h=C;else{for(var F=!1,K=w.child;K;){if(K===i){F=!0,i=w,h=C;break}if(K===h){F=!0,h=w,i=C;break}K=K.sibling}if(!F){for(K=C.child;K;){if(K===i){F=!0,i=C,h=w;break}if(K===h){F=!0,h=C,i=w;break}K=K.sibling}if(!F)throw Error(x(189))}}if(i.alternate!==h)throw Error(x(190))}if(i.tag!==3)throw Error(x(188));return i.stateNode.current===i?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),z=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),L=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),Y=Symbol.for("react.suspense"),X=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),Q=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),ce=Symbol.iterator;function te(t){return t===null||typeof t!="object"?null:(t=ce&&t[ce]||t["@@iterator"],typeof t=="function"?t:null)}var re=Symbol.for("react.client.reference");function W(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===re?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case O:return"Fragment";case z:return"Profiler";case M:return"StrictMode";case Y:return"Suspense";case X:return"SuspenseList";case Q:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case T:return"Portal";case D:return(t.displayName||"Context")+".Provider";case L:return(t._context.displayName||"Context")+".Consumer";case B:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case U:return r=t.displayName||null,r!==null?r:W(t.type)||"Memo";case G:r=t._payload,t=t._init;try{return W(t(r))}catch{}}return null}var P=Array.isArray,$=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de={pending:!1,data:null,method:null,action:null},Ce=[],ee=-1;function H(t){return{current:t}}function me(t){0>ee||(t.current=Ce[ee],Ce[ee]=null,ee--)}function ae(t,r){ee++,Ce[ee]=t.current,t.current=r}var be=H(null),ze=H(null),xe=H(null),Ze=H(null);function je(t,r){switch(ae(xe,r),ae(ze,t),ae(be,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?vf(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=vf(r),t=jf(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}me(be),ae(be,t)}function Je(){me(be),me(ze),me(xe)}function Ke(t){t.memoizedState!==null&&ae(Ze,t);var r=be.current,i=jf(r,t.type);r!==i&&(ae(ze,t),ae(be,i))}function at(t){ze.current===t&&(me(be),me(ze)),Ze.current===t&&(me(Ze),To._currentValue=de)}var Ue=Object.prototype.hasOwnProperty,ve=n.unstable_scheduleCallback,he=n.unstable_cancelCallback,He=n.unstable_shouldYield,et=n.unstable_requestPaint,Ne=n.unstable_now,Te=n.unstable_getCurrentPriorityLevel,oe=n.unstable_ImmediatePriority,pe=n.unstable_UserBlockingPriority,Me=n.unstable_NormalPriority,jt=n.unstable_LowPriority,Ct=n.unstable_IdlePriority,ft=n.log,Ft=n.unstable_setDisableYieldValue,Le=null,lt=null;function Bt(t){if(typeof ft=="function"&&Ft(t),lt&&typeof lt.setStrictMode=="function")try{lt.setStrictMode(Le,t)}catch{}}var gt=Math.clz32?Math.clz32:xr,Wt=Math.log,Tt=Math.LN2;function xr(t){return t>>>=0,t===0?32:31-(Wt(t)/Tt|0)|0}var Lt=256,Qe=4194304;function Yt(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ot(t,r,i){var h=t.pendingLanes;if(h===0)return 0;var w=0,C=t.suspendedLanes,F=t.pingedLanes;t=t.warmLanes;var K=h&134217727;return K!==0?(h=K&~C,h!==0?w=Yt(h):(F&=K,F!==0?w=Yt(F):i||(i=K&~t,i!==0&&(w=Yt(i))))):(K=h&~C,K!==0?w=Yt(K):F!==0?w=Yt(F):i||(i=h&~t,i!==0&&(w=Yt(i)))),w===0?0:r!==0&&r!==w&&(r&C)===0&&(C=w&-w,i=r&-r,C>=i||C===32&&(i&4194048)!==0)?r:w}function Ve(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function st(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jn(){var t=Lt;return Lt<<=1,(Lt&4194048)===0&&(Lt=256),t}function Pi(){var t=Qe;return Qe<<=1,(Qe&62914560)===0&&(Qe=4194304),t}function Pt(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Lr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function rc(t,r,i,h,w,C){var F=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var K=t.entanglements,ue=t.expirationTimes,_e=t.hiddenUpdates;for(i=F&~i;0<i;){var Fe=31-gt(i),qe=1<<Fe;K[Fe]=0,ue[Fe]=-1;var De=_e[Fe];if(De!==null)for(_e[Fe]=null,Fe=0;Fe<De.length;Fe++){var Ie=De[Fe];Ie!==null&&(Ie.lane&=-536870913)}i&=~qe}h!==0&&Ui(t,h,0),C!==0&&w===0&&t.tag!==0&&(t.suspendedLanes|=C&~(F&~r))}function Ui(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var h=31-gt(r);t.entangledLanes|=r,t.entanglements[h]=t.entanglements[h]|1073741824|i&4194090}function Er(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var h=31-gt(i),w=1<<h;w&r|t[h]&r&&(t[h]|=r),i&=~w}}function il(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Ua(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Qs(){var t=ne.p;return t!==0?t:(t=window.event,t===void 0?32:Hf(t.type))}function ql(t,r){var i=ne.p;try{return ne.p=t,r()}finally{ne.p=i}}var Ya=Math.random().toString(36).slice(2),ar="__reactFiber$"+Ya,Sa="__reactProps$"+Ya,Cs="__reactContainer$"+Ya,rr="__reactEvents$"+Ya,Zs="__reactListeners$"+Ya,_r="__reactHandles$"+Ya,tt="__reactResources$"+Ya,Jr="__reactMarker$"+Ya;function ol(t){delete t[ar],delete t[Sa],delete t[rr],delete t[Zs],delete t[_r]}function Ra(t){var r=t[ar];if(r)return r;for(var i=t.parentNode;i;){if(r=i[Cs]||i[ar]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=Af(t);t!==null;){if(i=t[ar])return i;t=Af(t)}return r}t=i,i=t.parentNode}return null}function zr(t){if(t=t[ar]||t[Cs]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function Ss(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(x(33))}function cs(t){var r=t[tt];return r||(r=t[tt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function ea(t){t[Jr]=!0}var sc=new Set,nc={};function sr(t,r){Aa(t,r),Aa(t+"Capture",r)}function Aa(t,r){for(nc[t]=r,t=0;t<r.length;t++)sc.add(r[t])}var ma=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Hi={},ds={};function Vi(t){return Ue.call(ds,t)?!0:Ue.call(Hi,t)?!1:ma.test(t)?ds[t]=!0:(Hi[t]=!0,!1)}function Ge(t,r,i){if(Vi(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Gl(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function Xt(t,r,i,h){if(h===null)t.removeAttribute(i);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+h)}}var As,lc;function Rt(t){if(As===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);As=r&&r[1]||"",lc=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+As+t+lc}var Ut=!1;function Et(t,r){if(!t||Ut)return"";Ut=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var qe=function(){throw Error()};if(Object.defineProperty(qe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(qe,[])}catch(Ie){var De=Ie}Reflect.construct(t,[],qe)}else{try{qe.call()}catch(Ie){De=Ie}t.call(qe.prototype)}}else{try{throw Error()}catch(Ie){De=Ie}(qe=t())&&typeof qe.catch=="function"&&qe.catch(function(){})}}catch(Ie){if(Ie&&De&&typeof Ie.stack=="string")return[Ie.stack,De.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var w=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");w&&w.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=h.DetermineComponentFrameRoot(),F=C[0],K=C[1];if(F&&K){var ue=F.split(`
`),_e=K.split(`
`);for(w=h=0;h<ue.length&&!ue[h].includes("DetermineComponentFrameRoot");)h++;for(;w<_e.length&&!_e[w].includes("DetermineComponentFrameRoot");)w++;if(h===ue.length||w===_e.length)for(h=ue.length-1,w=_e.length-1;1<=h&&0<=w&&ue[h]!==_e[w];)w--;for(;1<=h&&0<=w;h--,w--)if(ue[h]!==_e[w]){if(h!==1||w!==1)do if(h--,w--,0>w||ue[h]!==_e[w]){var Fe=`
`+ue[h].replace(" at new "," at ");return t.displayName&&Fe.includes("<anonymous>")&&(Fe=Fe.replace("<anonymous>",t.displayName)),Fe}while(1<=h&&0<=w);break}}}finally{Ut=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Rt(i):""}function qi(t){switch(t.tag){case 26:case 27:case 5:return Rt(t.type);case 16:return Rt("Lazy");case 13:return Rt("Suspense");case 19:return Rt("SuspenseList");case 0:case 15:return Et(t.type,!1);case 11:return Et(t.type.render,!1);case 1:return Et(t.type,!0);case 31:return Rt("Activity");default:return""}}function Yl(t){try{var r="";do r+=qi(t),t=t.return;while(t);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function hr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ea(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function Es(t){var r=Ea(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),h=""+t[r];if(!t.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var w=i.get,C=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return w.call(this)},set:function(F){h=""+F,C.call(this,F)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return h},setValue:function(F){h=""+F},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Xl(t){t._valueTracker||(t._valueTracker=Es(t))}function wa(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),h="";return t&&(h=Ea(t)?t.checked?"true":"false":t.value),t=h,t!==i?(r.setValue(t),!0):!1}function Fr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Yd=/[\n"\\]/g;function Xa(t){return t.replace(Yd,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Kt(t,r,i,h,w,C,F,K){t.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?t.type=F:t.removeAttribute("type"),r!=null?F==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+hr(r)):t.value!==""+hr(r)&&(t.value=""+hr(r)):F!=="submit"&&F!=="reset"||t.removeAttribute("value"),r!=null?Ae(t,F,hr(r)):i!=null?Ae(t,F,hr(i)):h!=null&&t.removeAttribute("value"),w==null&&C!=null&&(t.defaultChecked=!!C),w!=null&&(t.checked=w&&typeof w!="function"&&typeof w!="symbol"),K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?t.name=""+hr(K):t.removeAttribute("name")}function $a(t,r,i,h,w,C,F,K){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(t.type=C),r!=null||i!=null){if(!(C!=="submit"&&C!=="reset"||r!=null))return;i=i!=null?""+hr(i):"",r=r!=null?""+hr(r):i,K||r===t.value||(t.value=r),t.defaultValue=r}h=h??w,h=typeof h!="function"&&typeof h!="symbol"&&!!h,t.checked=K?t.checked:!!h,t.defaultChecked=!!h,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(t.name=F)}function Ae(t,r,i){r==="number"&&Fr(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function se(t,r,i,h){if(t=t.options,r){r={};for(var w=0;w<i.length;w++)r["$"+i[w]]=!0;for(i=0;i<t.length;i++)w=r.hasOwnProperty("$"+t[i].value),t[i].selected!==w&&(t[i].selected=w),w&&h&&(t[i].defaultSelected=!0)}else{for(i=""+hr(i),r=null,w=0;w<t.length;w++){if(t[w].value===i){t[w].selected=!0,h&&(t[w].defaultSelected=!0);return}r!==null||t[w].disabled||(r=t[w])}r!==null&&(r.selected=!0)}}function it(t,r,i){if(r!=null&&(r=""+hr(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+hr(i):""}function Ia(t,r,i,h){if(r==null){if(h!=null){if(i!=null)throw Error(x(92));if(P(h)){if(1<h.length)throw Error(x(93));h=h[0]}i=h}i==null&&(i=""),r=i}i=hr(r),t.defaultValue=i,h=t.textContent,h===i&&h!==""&&h!==null&&(t.value=h)}function Qa(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var Xd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function $l(t,r,i){var h=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?h?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":h?t.setProperty(r,i):typeof i!="number"||i===0||Xd.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function jr(t,r,i){if(r!=null&&typeof r!="object")throw Error(x(62));if(t=t.style,i!=null){for(var h in i)!i.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?t.setProperty(h,""):h==="float"?t.cssFloat="":t[h]="");for(var w in r)h=r[w],r.hasOwnProperty(w)&&i[w]!==h&&$l(t,w,h)}else for(var C in r)r.hasOwnProperty(C)&&$l(t,C,r[C])}function ct(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ic=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ql(t){return ic.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var cl=null;function kn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _s=null,Cn=null;function Oa(t){var r=zr(t);if(r&&(t=r.stateNode)){var i=t[Sa]||null;e:switch(t=r.stateNode,r.type){case"input":if(Kt(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Xa(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var h=i[r];if(h!==t&&h.form===t.form){var w=h[Sa]||null;if(!w)throw Error(x(90));Kt(h,w.value,w.defaultValue,w.defaultValue,w.checked,w.defaultChecked,w.type,w.name)}}for(r=0;r<i.length;r++)h=i[r],h.form===t.form&&wa(h)}break e;case"textarea":it(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&se(t,!!i.multiple,r,!1)}}}var Ws=!1;function us(t,r,i){if(Ws)return t(r,i);Ws=!0;try{var h=t(r);return h}finally{if(Ws=!1,(_s!==null||Cn!==null)&&(Yc(),_s&&(r=_s,t=Cn,Cn=_s=null,Oa(r),t)))for(r=0;r<t.length;r++)Oa(t[r])}}function ut(t,r){var i=t.stateNode;if(i===null)return null;var h=i[Sa]||null;if(h===null)return null;i=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(t=t.type,h=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!h;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(x(231,r,typeof i));return i}var xs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nt=!1;if(xs)try{var ja={};Object.defineProperty(ja,"passive",{get:function(){Nt=!0}}),window.addEventListener("test",ja,ja),window.removeEventListener("test",ja,ja)}catch{Nt=!1}var Ts=null,dl=null,ul=null;function Ms(){if(ul)return ul;var t,r=dl,i=r.length,h,w="value"in Ts?Ts.value:Ts.textContent,C=w.length;for(t=0;t<i&&r[t]===w[t];t++);var F=i-t;for(h=1;h<=F&&r[i-h]===w[C-h];h++);return ul=w.slice(t,1<h?1-h:void 0)}function Zl(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Ds(){return!0}function Sn(){return!1}function Ha(t){function r(i,h,w,C,F){this._reactName=i,this._targetInst=w,this.type=h,this.nativeEvent=C,this.target=F,this.currentTarget=null;for(var K in t)t.hasOwnProperty(K)&&(i=t[K],this[K]=i?i(C):C[K]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Ds:Sn,this.isPropagationStopped=Sn,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Ds)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Ds)},persist:function(){},isPersistent:Ds}),r}var Rs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Is=Ha(Rs),hs=S({},Rs,{view:0,detail:0}),mr=Ha(hs),Wl,Kl,An,Jl=S({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==An&&(An&&t.type==="mousemove"?(Wl=t.screenX-An.screenX,Kl=t.screenY-An.screenY):Kl=Wl=0,An=t),Wl)},movementY:function(t){return"movementY"in t?t.movementY:Kl}}),oc=Ha(Jl),$d=S({},Jl,{dataTransfer:0}),Jt=Ha($d),cc=S({},hs,{relatedTarget:0}),En=Ha(cc),Os=S({},Rs,{animationName:0,elapsedTime:0,pseudoElement:0}),Qd=Ha(Os),Oe=S({},Rs,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),St=Ha(Oe),Za=S({},Rs,{data:0}),xl=Ha(Za),dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kd(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Wd[t])?!!r[t]:!1}function hl(){return Kd}var Ba=S({},hs,{key:function(t){if(t.key){var r=dc[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Zd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hl,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gi=Ha(Ba),Na=S({},Jl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ml=Ha(Na),Ks=S({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hl}),ta=Ha(Ks),xt=S({},Rs,{propertyName:0,elapsedTime:0,pseudoElement:0}),Jd=Ha(xt),xa=S({},Jl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Js=Ha(xa),_n=S({},Rs,{newState:0,oldState:0}),e0=Ha(_n),es=[9,13,27,32],fl=xs&&"CompositionEvent"in window,Tn=null;xs&&"documentMode"in document&&(Tn=document.documentMode);var Yi=xs&&"TextEvent"in window&&!Tn,Xi=xs&&(!fl||Tn&&8<Tn&&11>=Tn),$i=" ",uc=!1;function en(t,r){switch(t){case"keyup":return es.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ei(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Mn=!1;function gl(t,r){switch(t){case"compositionend":return ei(r);case"keypress":return r.which!==32?null:(uc=!0,$i);case"textInput":return t=r.data,t===$i&&uc?null:t;default:return null}}function t0(t,r){if(Mn)return t==="compositionend"||!fl&&en(t,r)?(t=Ms(),ul=dl=Ts=null,Mn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Xi&&r.locale!=="ko"?null:r.data;default:return null}}var Bs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Bs[t.type]:r==="textarea"}function kr(t,r,i,h){_s?Cn?Cn.push(h):Cn=[h]:_s=h,r=Kc(r,"onChange"),0<r.length&&(i=new Is("onChange","change",null,i,h),t.push({event:i,listeners:r}))}var Dn=null,fr=null;function a0(t){pf(t,0)}function Rn(t){var r=Ss(t);if(wa(r))return t}function xc(t,r){if(t==="change")return r}var Qi=!1;if(xs){var Tr;if(xs){var Zi="oninput"in document;if(!Zi){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Zi=typeof ti.oninput=="function"}Tr=Zi}else Tr=!1;Qi=Tr&&(!document.documentMode||9<document.documentMode)}function In(){Dn&&(Dn.detachEvent("onpropertychange",zt),fr=Dn=null)}function zt(t){if(t.propertyName==="value"&&Rn(fr)){var r=[];kr(r,fr,t,kn(t)),us(a0,r)}}function ai(t,r,i){t==="focusin"?(In(),Dn=r,fr=i,Dn.attachEvent("onpropertychange",zt)):t==="focusout"&&In()}function V(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Rn(fr)}function a(t,r){if(t==="click")return Rn(r)}function s(t,r){if(t==="input"||t==="change")return Rn(r)}function l(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var d=typeof Object.is=="function"?Object.is:l;function u(t,r){if(d(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),h=Object.keys(r);if(i.length!==h.length)return!1;for(h=0;h<i.length;h++){var w=i[h];if(!Ue.call(r,w)||!d(t[w],r[w]))return!1}return!0}function m(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p(t,r){var i=m(t);t=0;for(var h;i;){if(i.nodeType===3){if(h=t+i.textContent.length,t<=r&&h>=r)return{node:i,offset:r-t};t=h}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=m(i)}}function v(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?v(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function A(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Fr(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=Fr(t.document)}return r}function R(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var q=xs&&"documentMode"in document&&11>=document.documentMode,Z=null,ie=null,ge=null,ye=!1;function Se(t,r,i){var h=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ye||Z==null||Z!==Fr(h)||(h=Z,"selectionStart"in h&&R(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ge&&u(ge,h)||(ge=h,h=Kc(ie,"onSelect"),0<h.length&&(r=new Is("onSelect","select",null,r,i),t.push({event:r,listeners:h}),r.target=Z)))}function Re(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var Xe={animationend:Re("Animation","AnimationEnd"),animationiteration:Re("Animation","AnimationIteration"),animationstart:Re("Animation","AnimationStart"),transitionrun:Re("Transition","TransitionRun"),transitionstart:Re("Transition","TransitionStart"),transitioncancel:Re("Transition","TransitionCancel"),transitionend:Re("Transition","TransitionEnd")},$e={},Ye={};xs&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete Xe.animationend.animation,delete Xe.animationiteration.animation,delete Xe.animationstart.animation),"TransitionEvent"in window||delete Xe.transitionend.transition);function vt(t){if($e[t])return $e[t];if(!Xe[t])return t;var r=Xe[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in Ye)return $e[t]=r[i];return t}var bt=vt("animationend"),or=vt("animationiteration"),Mr=vt("animationstart"),gr=vt("transitionrun"),aa=vt("transitionstart"),Wa=vt("transitioncancel"),pr=vt("transitionend"),tn=new Map,Ls="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ls.push("scrollEnd");function Pr(t,r){tn.set(t,r),sr(r,[t])}var hc=new WeakMap;function ts(t,r){if(typeof t=="object"&&t!==null){var i=hc.get(t);return i!==void 0?i:(r={value:t,source:r,stack:Yl(r)},hc.set(t,r),r)}return{value:t,source:r,stack:Yl(r)}}var as=[],ri=0,r0=0;function mc(){for(var t=ri,r=r0=ri=0;r<t;){var i=as[r];as[r++]=null;var h=as[r];as[r++]=null;var w=as[r];as[r++]=null;var C=as[r];if(as[r++]=null,h!==null&&w!==null){var F=h.pending;F===null?w.next=w:(w.next=F.next,F.next=w),h.pending=w}C!==0&&eh(i,w,C)}}function fc(t,r,i,h){as[ri++]=t,as[ri++]=r,as[ri++]=i,as[ri++]=h,r0|=h,t.lanes|=h,t=t.alternate,t!==null&&(t.lanes|=h)}function s0(t,r,i,h){return fc(t,r,i,h),gc(t)}function si(t,r){return fc(t,null,null,r),gc(t)}function eh(t,r,i){t.lanes|=i;var h=t.alternate;h!==null&&(h.lanes|=i);for(var w=!1,C=t.return;C!==null;)C.childLanes|=i,h=C.alternate,h!==null&&(h.childLanes|=i),C.tag===22&&(t=C.stateNode,t===null||t._visibility&1||(w=!0)),t=C,C=C.return;return t.tag===3?(C=t.stateNode,w&&r!==null&&(w=31-gt(i),t=C.hiddenUpdates,h=t[w],h===null?t[w]=[r]:h.push(r),r.lane=i|536870912),C):null}function gc(t){if(50<vo)throw vo=0,du=null,Error(x(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var ni={};function q1(t,r,i,h){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(t,r,i,h){return new q1(t,r,i,h)}function n0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function an(t,r){var i=t.alternate;return i===null?(i=Ur(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function th(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function pc(t,r,i,h,w,C){var F=0;if(h=t,typeof t=="function")n0(t)&&(F=1);else if(typeof t=="string")F=Yy(t,i,be.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Q:return t=Ur(31,i,r,w),t.elementType=Q,t.lanes=C,t;case O:return yl(i.children,w,C,r);case M:F=8,w|=24;break;case z:return t=Ur(12,i,r,w|2),t.elementType=z,t.lanes=C,t;case Y:return t=Ur(13,i,r,w),t.elementType=Y,t.lanes=C,t;case X:return t=Ur(19,i,r,w),t.elementType=X,t.lanes=C,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case I:case D:F=10;break e;case L:F=9;break e;case B:F=11;break e;case U:F=14;break e;case G:F=16,h=null;break e}F=29,i=Error(x(130,t===null?"null":typeof t,"")),h=null}return r=Ur(F,i,r,w),r.elementType=t,r.type=h,r.lanes=C,r}function yl(t,r,i,h){return t=Ur(7,t,h,r),t.lanes=i,t}function l0(t,r,i){return t=Ur(6,t,null,r),t.lanes=i,t}function i0(t,r,i){return r=Ur(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var li=[],ii=0,yc=null,bc=0,rs=[],ss=0,bl=null,rn=1,sn="";function wl(t,r){li[ii++]=bc,li[ii++]=yc,yc=t,bc=r}function ah(t,r,i){rs[ss++]=rn,rs[ss++]=sn,rs[ss++]=bl,bl=t;var h=rn;t=sn;var w=32-gt(h)-1;h&=~(1<<w),i+=1;var C=32-gt(r)+w;if(30<C){var F=w-w%5;C=(h&(1<<F)-1).toString(32),h>>=F,w-=F,rn=1<<32-gt(r)+w|i<<w|h,sn=C+t}else rn=1<<C|i<<w|h,sn=t}function o0(t){t.return!==null&&(wl(t,1),ah(t,1,0))}function c0(t){for(;t===yc;)yc=li[--ii],li[ii]=null,bc=li[--ii],li[ii]=null;for(;t===bl;)bl=rs[--ss],rs[ss]=null,sn=rs[--ss],rs[ss]=null,rn=rs[--ss],rs[ss]=null}var Cr=null,_a=null,Qt=!1,Nl=null,zs=!1,d0=Error(x(519));function vl(t){var r=Error(x(418,""));throw Ji(ts(r,t)),d0}function rh(t){var r=t.stateNode,i=t.type,h=t.memoizedProps;switch(r[ar]=t,r[Sa]=h,i){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(i=0;i<ko.length;i++)Ot(ko[i],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":Ot("invalid",r),$a(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Xl(r);break;case"select":Ot("invalid",r);break;case"textarea":Ot("invalid",r),Ia(r,h.value,h.defaultValue,h.children),Xl(r)}i=h.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||h.suppressHydrationWarning===!0||Nf(r.textContent,i)?(h.popover!=null&&(Ot("beforetoggle",r),Ot("toggle",r)),h.onScroll!=null&&Ot("scroll",r),h.onScrollEnd!=null&&Ot("scrollend",r),h.onClick!=null&&(r.onclick=Jc),r=!0):r=!1,r||vl(t)}function sh(t){for(Cr=t.return;Cr;)switch(Cr.tag){case 5:case 13:zs=!1;return;case 27:case 3:zs=!0;return;default:Cr=Cr.return}}function Wi(t){if(t!==Cr)return!1;if(!Qt)return sh(t),Qt=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Su(t.type,t.memoizedProps)),i=!i),i&&_a&&vl(t),sh(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(x(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(r===0){_a=fs(t.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;t=t.nextSibling}_a=null}}else r===27?(r=_a,Zn(t.type)?(t=Tu,Tu=null,_a=t):_a=r):_a=Cr?fs(t.stateNode.nextSibling):null;return!0}function Ki(){_a=Cr=null,Qt=!1}function nh(){var t=Nl;return t!==null&&(Ir===null?Ir=t:Ir.push.apply(Ir,t),Nl=null),t}function Ji(t){Nl===null?Nl=[t]:Nl.push(t)}var u0=H(null),jl=null,nn=null;function On(t,r,i){ae(u0,r._currentValue),r._currentValue=i}function ln(t){t._currentValue=u0.current,me(u0)}function x0(t,r,i){for(;t!==null;){var h=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),t===i)break;t=t.return}}function h0(t,r,i,h){var w=t.child;for(w!==null&&(w.return=t);w!==null;){var C=w.dependencies;if(C!==null){var F=w.child;C=C.firstContext;e:for(;C!==null;){var K=C;C=w;for(var ue=0;ue<r.length;ue++)if(K.context===r[ue]){C.lanes|=i,K=C.alternate,K!==null&&(K.lanes|=i),x0(C.return,i,t),h||(F=null);break e}C=K.next}}else if(w.tag===18){if(F=w.return,F===null)throw Error(x(341));F.lanes|=i,C=F.alternate,C!==null&&(C.lanes|=i),x0(F,i,t),F=null}else F=w.child;if(F!==null)F.return=w;else for(F=w;F!==null;){if(F===t){F=null;break}if(w=F.sibling,w!==null){w.return=F.return,F=w;break}F=F.return}w=F}}function eo(t,r,i,h){t=null;for(var w=r,C=!1;w!==null;){if(!C){if((w.flags&524288)!==0)C=!0;else if((w.flags&262144)!==0)break}if(w.tag===10){var F=w.alternate;if(F===null)throw Error(x(387));if(F=F.memoizedProps,F!==null){var K=w.type;d(w.pendingProps.value,F.value)||(t!==null?t.push(K):t=[K])}}else if(w===Ze.current){if(F=w.alternate,F===null)throw Error(x(387));F.memoizedState.memoizedState!==w.memoizedState.memoizedState&&(t!==null?t.push(To):t=[To])}w=w.return}t!==null&&h0(r,t,i,h),r.flags|=262144}function wc(t){for(t=t.firstContext;t!==null;){if(!d(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function kl(t){jl=t,nn=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function yr(t){return lh(jl,t)}function Nc(t,r){return jl===null&&kl(t),lh(t,r)}function lh(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},nn===null){if(t===null)throw Error(x(308));nn=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else nn=nn.next=r;return i}var G1=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,h){t.push(h)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},Y1=n.unstable_scheduleCallback,X1=n.unstable_NormalPriority,Ka={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function m0(){return{controller:new G1,data:new Map,refCount:0}}function to(t){t.refCount--,t.refCount===0&&Y1(X1,function(){t.controller.abort()})}var ao=null,f0=0,oi=0,ci=null;function $1(t,r){if(ao===null){var i=ao=[];f0=0,oi=pu(),ci={status:"pending",value:void 0,then:function(h){i.push(h)}}}return f0++,r.then(ih,ih),r}function ih(){if(--f0===0&&ao!==null){ci!==null&&(ci.status="fulfilled");var t=ao;ao=null,oi=0,ci=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Q1(t,r){var i=[],h={status:"pending",value:null,reason:null,then:function(w){i.push(w)}};return t.then(function(){h.status="fulfilled",h.value=r;for(var w=0;w<i.length;w++)(0,i[w])(r)},function(w){for(h.status="rejected",h.reason=w,w=0;w<i.length;w++)(0,i[w])(void 0)}),h}var oh=$.S;$.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&$1(t,r),oh!==null&&oh(t,r)};var Cl=H(null);function g0(){var t=Cl.current;return t!==null?t:fa.pooledCache}function vc(t,r){r===null?ae(Cl,Cl.current):ae(Cl,r.pool)}function ch(){var t=g0();return t===null?null:{parent:Ka._currentValue,pool:t}}var ro=Error(x(460)),dh=Error(x(474)),jc=Error(x(542)),p0={then:function(){}};function uh(t){return t=t.status,t==="fulfilled"||t==="rejected"}function kc(){}function xh(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(kc,kc),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,mh(t),t;default:if(typeof r.status=="string")r.then(kc,kc);else{if(t=fa,t!==null&&100<t.shellSuspendCounter)throw Error(x(482));t=r,t.status="pending",t.then(function(h){if(r.status==="pending"){var w=r;w.status="fulfilled",w.value=h}},function(h){if(r.status==="pending"){var w=r;w.status="rejected",w.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,mh(t),t}throw so=r,ro}}var so=null;function hh(){if(so===null)throw Error(x(459));var t=so;return so=null,t}function mh(t){if(t===ro||t===jc)throw Error(x(483))}var Bn=!1;function y0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function b0(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Ln(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function zn(t,r,i){var h=t.updateQueue;if(h===null)return null;if(h=h.shared,(ra&2)!==0){var w=h.pending;return w===null?r.next=r:(r.next=w.next,w.next=r),h.pending=r,r=gc(t),eh(t,null,i),r}return fc(t,h,r,i),gc(t)}function no(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var h=r.lanes;h&=t.pendingLanes,i|=h,r.lanes=i,Er(t,i)}}function w0(t,r){var i=t.updateQueue,h=t.alternate;if(h!==null&&(h=h.updateQueue,i===h)){var w=null,C=null;if(i=i.firstBaseUpdate,i!==null){do{var F={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};C===null?w=C=F:C=C.next=F,i=i.next}while(i!==null);C===null?w=C=r:C=C.next=r}else w=C=r;i={baseState:h.baseState,firstBaseUpdate:w,lastBaseUpdate:C,shared:h.shared,callbacks:h.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var N0=!1;function lo(){if(N0){var t=ci;if(t!==null)throw t}}function io(t,r,i,h){N0=!1;var w=t.updateQueue;Bn=!1;var C=w.firstBaseUpdate,F=w.lastBaseUpdate,K=w.shared.pending;if(K!==null){w.shared.pending=null;var ue=K,_e=ue.next;ue.next=null,F===null?C=_e:F.next=_e,F=ue;var Fe=t.alternate;Fe!==null&&(Fe=Fe.updateQueue,K=Fe.lastBaseUpdate,K!==F&&(K===null?Fe.firstBaseUpdate=_e:K.next=_e,Fe.lastBaseUpdate=ue))}if(C!==null){var qe=w.baseState;F=0,Fe=_e=ue=null,K=C;do{var De=K.lane&-536870913,Ie=De!==K.lane;if(Ie?(qt&De)===De:(h&De)===De){De!==0&&De===oi&&(N0=!0),Fe!==null&&(Fe=Fe.next={lane:0,tag:K.tag,payload:K.payload,callback:null,next:null});e:{var pt=t,ht=K;De=r;var ca=i;switch(ht.tag){case 1:if(pt=ht.payload,typeof pt=="function"){qe=pt.call(ca,qe,De);break e}qe=pt;break e;case 3:pt.flags=pt.flags&-65537|128;case 0:if(pt=ht.payload,De=typeof pt=="function"?pt.call(ca,qe,De):pt,De==null)break e;qe=S({},qe,De);break e;case 2:Bn=!0}}De=K.callback,De!==null&&(t.flags|=64,Ie&&(t.flags|=8192),Ie=w.callbacks,Ie===null?w.callbacks=[De]:Ie.push(De))}else Ie={lane:De,tag:K.tag,payload:K.payload,callback:K.callback,next:null},Fe===null?(_e=Fe=Ie,ue=qe):Fe=Fe.next=Ie,F|=De;if(K=K.next,K===null){if(K=w.shared.pending,K===null)break;Ie=K,K=Ie.next,Ie.next=null,w.lastBaseUpdate=Ie,w.shared.pending=null}}while(!0);Fe===null&&(ue=qe),w.baseState=ue,w.firstBaseUpdate=_e,w.lastBaseUpdate=Fe,C===null&&(w.shared.lanes=0),Yn|=F,t.lanes=F,t.memoizedState=qe}}function fh(t,r){if(typeof t!="function")throw Error(x(191,t));t.call(r)}function gh(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)fh(i[t],r)}var di=H(null),Cc=H(0);function ph(t,r){t=mn,ae(Cc,t),ae(di,r),mn=t|r.baseLanes}function v0(){ae(Cc,mn),ae(di,di.current)}function j0(){mn=Cc.current,me(di),me(Cc)}var Fn=0,_t=null,ia=null,Va=null,Sc=!1,ui=!1,Sl=!1,Ac=0,oo=0,xi=null,Z1=0;function La(){throw Error(x(321))}function k0(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!d(t[i],r[i]))return!1;return!0}function C0(t,r,i,h,w,C){return Fn=C,_t=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,$.H=t===null||t.memoizedState===null?em:tm,Sl=!1,C=i(h,w),Sl=!1,ui&&(C=bh(r,i,h,w)),yh(t),C}function yh(t){$.H=Rc;var r=ia!==null&&ia.next!==null;if(Fn=0,Va=ia=_t=null,Sc=!1,oo=0,xi=null,r)throw Error(x(300));t===null||nr||(t=t.dependencies,t!==null&&wc(t)&&(nr=!0))}function bh(t,r,i,h){_t=t;var w=0;do{if(ui&&(xi=null),oo=0,ui=!1,25<=w)throw Error(x(301));if(w+=1,Va=ia=null,t.updateQueue!=null){var C=t.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}$.H=ry,C=r(i,h)}while(ui);return C}function W1(){var t=$.H,r=t.useState()[0];return r=typeof r.then=="function"?co(r):r,t=t.useState()[0],(ia!==null?ia.memoizedState:null)!==t&&(_t.flags|=1024),r}function S0(){var t=Ac!==0;return Ac=0,t}function A0(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function E0(t){if(Sc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Sc=!1}Fn=0,Va=ia=_t=null,ui=!1,oo=Ac=0,xi=null}function Dr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Va===null?_t.memoizedState=Va=t:Va=Va.next=t,Va}function qa(){if(ia===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=ia.next;var r=Va===null?_t.memoizedState:Va.next;if(r!==null)Va=r,ia=t;else{if(t===null)throw _t.alternate===null?Error(x(467)):Error(x(310));ia=t,t={memoizedState:ia.memoizedState,baseState:ia.baseState,baseQueue:ia.baseQueue,queue:ia.queue,next:null},Va===null?_t.memoizedState=Va=t:Va=Va.next=t}return Va}function _0(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function co(t){var r=oo;return oo+=1,xi===null&&(xi=[]),t=xh(xi,t,r),r=_t,(Va===null?r.memoizedState:Va.next)===null&&(r=r.alternate,$.H=r===null||r.memoizedState===null?em:tm),t}function Ec(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return co(t);if(t.$$typeof===D)return yr(t)}throw Error(x(438,String(t)))}function T0(t){var r=null,i=_t.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var h=_t.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(w){return w.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=_0(),_t.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),h=0;h<t;h++)i[h]=le;return r.index++,i}function on(t,r){return typeof r=="function"?r(t):r}function _c(t){var r=qa();return M0(r,ia,t)}function M0(t,r,i){var h=t.queue;if(h===null)throw Error(x(311));h.lastRenderedReducer=i;var w=t.baseQueue,C=h.pending;if(C!==null){if(w!==null){var F=w.next;w.next=C.next,C.next=F}r.baseQueue=w=C,h.pending=null}if(C=t.baseState,w===null)t.memoizedState=C;else{r=w.next;var K=F=null,ue=null,_e=r,Fe=!1;do{var qe=_e.lane&-536870913;if(qe!==_e.lane?(qt&qe)===qe:(Fn&qe)===qe){var De=_e.revertLane;if(De===0)ue!==null&&(ue=ue.next={lane:0,revertLane:0,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null}),qe===oi&&(Fe=!0);else if((Fn&De)===De){_e=_e.next,De===oi&&(Fe=!0);continue}else qe={lane:0,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ue===null?(K=ue=qe,F=C):ue=ue.next=qe,_t.lanes|=De,Yn|=De;qe=_e.action,Sl&&i(C,qe),C=_e.hasEagerState?_e.eagerState:i(C,qe)}else De={lane:qe,revertLane:_e.revertLane,action:_e.action,hasEagerState:_e.hasEagerState,eagerState:_e.eagerState,next:null},ue===null?(K=ue=De,F=C):ue=ue.next=De,_t.lanes|=qe,Yn|=qe;_e=_e.next}while(_e!==null&&_e!==r);if(ue===null?F=C:ue.next=K,!d(C,t.memoizedState)&&(nr=!0,Fe&&(i=ci,i!==null)))throw i;t.memoizedState=C,t.baseState=F,t.baseQueue=ue,h.lastRenderedState=C}return w===null&&(h.lanes=0),[t.memoizedState,h.dispatch]}function D0(t){var r=qa(),i=r.queue;if(i===null)throw Error(x(311));i.lastRenderedReducer=t;var h=i.dispatch,w=i.pending,C=r.memoizedState;if(w!==null){i.pending=null;var F=w=w.next;do C=t(C,F.action),F=F.next;while(F!==w);d(C,r.memoizedState)||(nr=!0),r.memoizedState=C,r.baseQueue===null&&(r.baseState=C),i.lastRenderedState=C}return[C,h]}function wh(t,r,i){var h=_t,w=qa(),C=Qt;if(C){if(i===void 0)throw Error(x(407));i=i()}else i=r();var F=!d((ia||w).memoizedState,i);F&&(w.memoizedState=i,nr=!0),w=w.queue;var K=jh.bind(null,h,w,t);if(uo(2048,8,K,[t]),w.getSnapshot!==r||F||Va!==null&&Va.memoizedState.tag&1){if(h.flags|=2048,hi(9,Tc(),vh.bind(null,h,w,i,r),null),fa===null)throw Error(x(349));C||(Fn&124)!==0||Nh(h,r,i)}return i}function Nh(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=_t.updateQueue,r===null?(r=_0(),_t.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function vh(t,r,i,h){r.value=i,r.getSnapshot=h,kh(r)&&Ch(t)}function jh(t,r,i){return i(function(){kh(r)&&Ch(t)})}function kh(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!d(t,i)}catch{return!0}}function Ch(t){var r=si(t,2);r!==null&&Yr(r,t,2)}function R0(t){var r=Dr();if(typeof t=="function"){var i=t;if(t=i(),Sl){Bt(!0);try{i()}finally{Bt(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:on,lastRenderedState:t},r}function Sh(t,r,i,h){return t.baseState=i,M0(t,ia,typeof h=="function"?h:on)}function K1(t,r,i,h,w){if(Dc(t))throw Error(x(485));if(t=r.action,t!==null){var C={payload:w,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){C.listeners.push(F)}};$.T!==null?i(!0):C.isTransition=!1,h(C),i=r.pending,i===null?(C.next=r.pending=C,Ah(r,C)):(C.next=i.next,r.pending=i.next=C)}}function Ah(t,r){var i=r.action,h=r.payload,w=t.state;if(r.isTransition){var C=$.T,F={};$.T=F;try{var K=i(w,h),ue=$.S;ue!==null&&ue(F,K),Eh(t,r,K)}catch(_e){I0(t,r,_e)}finally{$.T=C}}else try{C=i(w,h),Eh(t,r,C)}catch(_e){I0(t,r,_e)}}function Eh(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(h){_h(t,r,h)},function(h){return I0(t,r,h)}):_h(t,r,i)}function _h(t,r,i){r.status="fulfilled",r.value=i,Th(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,Ah(t,i)))}function I0(t,r,i){var h=t.pending;if(t.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=i,Th(r),r=r.next;while(r!==h)}t.action=null}function Th(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Mh(t,r){return r}function Dh(t,r){if(Qt){var i=fa.formState;if(i!==null){e:{var h=_t;if(Qt){if(_a){t:{for(var w=_a,C=zs;w.nodeType!==8;){if(!C){w=null;break t}if(w=fs(w.nextSibling),w===null){w=null;break t}}C=w.data,w=C==="F!"||C==="F"?w:null}if(w){_a=fs(w.nextSibling),h=w.data==="F!";break e}}vl(h)}h=!1}h&&(r=i[0])}}return i=Dr(),i.memoizedState=i.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mh,lastRenderedState:r},i.queue=h,i=Wh.bind(null,_t,h),h.dispatch=i,h=R0(!1),C=F0.bind(null,_t,!1,h.queue),h=Dr(),w={state:r,dispatch:null,action:t,pending:null},h.queue=w,i=K1.bind(null,_t,w,C,i),w.dispatch=i,h.memoizedState=t,[r,i,!1]}function Rh(t){var r=qa();return Ih(r,ia,t)}function Ih(t,r,i){if(r=M0(t,r,Mh)[0],t=_c(on)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=co(r)}catch(F){throw F===ro?jc:F}else h=r;r=qa();var w=r.queue,C=w.dispatch;return i!==r.memoizedState&&(_t.flags|=2048,hi(9,Tc(),J1.bind(null,w,i),null)),[h,C,t]}function J1(t,r){t.action=r}function Oh(t){var r=qa(),i=ia;if(i!==null)return Ih(r,i,t);qa(),r=r.memoizedState,i=qa();var h=i.queue.dispatch;return i.memoizedState=t,[r,h,!1]}function hi(t,r,i,h){return t={tag:t,create:i,deps:h,inst:r,next:null},r=_t.updateQueue,r===null&&(r=_0(),_t.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(h=i.next,i.next=t,t.next=h,r.lastEffect=t),t}function Tc(){return{destroy:void 0,resource:void 0}}function Bh(){return qa().memoizedState}function Mc(t,r,i,h){var w=Dr();h=h===void 0?null:h,_t.flags|=t,w.memoizedState=hi(1|r,Tc(),i,h)}function uo(t,r,i,h){var w=qa();h=h===void 0?null:h;var C=w.memoizedState.inst;ia!==null&&h!==null&&k0(h,ia.memoizedState.deps)?w.memoizedState=hi(r,C,i,h):(_t.flags|=t,w.memoizedState=hi(1|r,C,i,h))}function Lh(t,r){Mc(8390656,8,t,r)}function zh(t,r){uo(2048,8,t,r)}function Fh(t,r){return uo(4,2,t,r)}function Ph(t,r){return uo(4,4,t,r)}function Uh(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Hh(t,r,i){i=i!=null?i.concat([t]):null,uo(4,4,Uh.bind(null,r,t),i)}function O0(){}function Vh(t,r){var i=qa();r=r===void 0?null:r;var h=i.memoizedState;return r!==null&&k0(r,h[1])?h[0]:(i.memoizedState=[t,r],t)}function qh(t,r){var i=qa();r=r===void 0?null:r;var h=i.memoizedState;if(r!==null&&k0(r,h[1]))return h[0];if(h=t(),Sl){Bt(!0);try{t()}finally{Bt(!1)}}return i.memoizedState=[h,r],h}function B0(t,r,i){return i===void 0||(Fn&1073741824)!==0?t.memoizedState=r:(t.memoizedState=i,t=Xm(),_t.lanes|=t,Yn|=t,i)}function Gh(t,r,i,h){return d(i,r)?i:di.current!==null?(t=B0(t,i,h),d(t,r)||(nr=!0),t):(Fn&42)===0?(nr=!0,t.memoizedState=i):(t=Xm(),_t.lanes|=t,Yn|=t,r)}function Yh(t,r,i,h,w){var C=ne.p;ne.p=C!==0&&8>C?C:8;var F=$.T,K={};$.T=K,F0(t,!1,r,i);try{var ue=w(),_e=$.S;if(_e!==null&&_e(K,ue),ue!==null&&typeof ue=="object"&&typeof ue.then=="function"){var Fe=Q1(ue,h);xo(t,r,Fe,Gr(t))}else xo(t,r,h,Gr(t))}catch(qe){xo(t,r,{then:function(){},status:"rejected",reason:qe},Gr())}finally{ne.p=C,$.T=F}}function ey(){}function L0(t,r,i,h){if(t.tag!==5)throw Error(x(476));var w=Xh(t).queue;Yh(t,w,r,de,i===null?ey:function(){return $h(t),i(h)})}function Xh(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:de,baseState:de,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:on,lastRenderedState:de},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:on,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function $h(t){var r=Xh(t).next.queue;xo(t,r,{},Gr())}function z0(){return yr(To)}function Qh(){return qa().memoizedState}function Zh(){return qa().memoizedState}function ty(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=Gr();t=Ln(i);var h=zn(r,t,i);h!==null&&(Yr(h,r,i),no(h,r,i)),r={cache:m0()},t.payload=r;return}r=r.return}}function ay(t,r,i){var h=Gr();i={lane:h,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},Dc(t)?Kh(r,i):(i=s0(t,r,i,h),i!==null&&(Yr(i,t,h),Jh(i,r,h)))}function Wh(t,r,i){var h=Gr();xo(t,r,i,h)}function xo(t,r,i,h){var w={lane:h,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(Dc(t))Kh(r,w);else{var C=t.alternate;if(t.lanes===0&&(C===null||C.lanes===0)&&(C=r.lastRenderedReducer,C!==null))try{var F=r.lastRenderedState,K=C(F,i);if(w.hasEagerState=!0,w.eagerState=K,d(K,F))return fc(t,r,w,0),fa===null&&mc(),!1}catch{}finally{}if(i=s0(t,r,w,h),i!==null)return Yr(i,t,h),Jh(i,r,h),!0}return!1}function F0(t,r,i,h){if(h={lane:2,revertLane:pu(),action:h,hasEagerState:!1,eagerState:null,next:null},Dc(t)){if(r)throw Error(x(479))}else r=s0(t,i,h,2),r!==null&&Yr(r,t,2)}function Dc(t){var r=t.alternate;return t===_t||r!==null&&r===_t}function Kh(t,r){ui=Sc=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function Jh(t,r,i){if((i&4194048)!==0){var h=r.lanes;h&=t.pendingLanes,i|=h,r.lanes=i,Er(t,i)}}var Rc={readContext:yr,use:Ec,useCallback:La,useContext:La,useEffect:La,useImperativeHandle:La,useLayoutEffect:La,useInsertionEffect:La,useMemo:La,useReducer:La,useRef:La,useState:La,useDebugValue:La,useDeferredValue:La,useTransition:La,useSyncExternalStore:La,useId:La,useHostTransitionStatus:La,useFormState:La,useActionState:La,useOptimistic:La,useMemoCache:La,useCacheRefresh:La},em={readContext:yr,use:Ec,useCallback:function(t,r){return Dr().memoizedState=[t,r===void 0?null:r],t},useContext:yr,useEffect:Lh,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,Mc(4194308,4,Uh.bind(null,r,t),i)},useLayoutEffect:function(t,r){return Mc(4194308,4,t,r)},useInsertionEffect:function(t,r){Mc(4,2,t,r)},useMemo:function(t,r){var i=Dr();r=r===void 0?null:r;var h=t();if(Sl){Bt(!0);try{t()}finally{Bt(!1)}}return i.memoizedState=[h,r],h},useReducer:function(t,r,i){var h=Dr();if(i!==void 0){var w=i(r);if(Sl){Bt(!0);try{i(r)}finally{Bt(!1)}}}else w=r;return h.memoizedState=h.baseState=w,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:w},h.queue=t,t=t.dispatch=ay.bind(null,_t,t),[h.memoizedState,t]},useRef:function(t){var r=Dr();return t={current:t},r.memoizedState=t},useState:function(t){t=R0(t);var r=t.queue,i=Wh.bind(null,_t,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:O0,useDeferredValue:function(t,r){var i=Dr();return B0(i,t,r)},useTransition:function(){var t=R0(!1);return t=Yh.bind(null,_t,t.queue,!0,!1),Dr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var h=_t,w=Dr();if(Qt){if(i===void 0)throw Error(x(407));i=i()}else{if(i=r(),fa===null)throw Error(x(349));(qt&124)!==0||Nh(h,r,i)}w.memoizedState=i;var C={value:i,getSnapshot:r};return w.queue=C,Lh(jh.bind(null,h,C,t),[t]),h.flags|=2048,hi(9,Tc(),vh.bind(null,h,C,i,r),null),i},useId:function(){var t=Dr(),r=fa.identifierPrefix;if(Qt){var i=sn,h=rn;i=(h&~(1<<32-gt(h)-1)).toString(32)+i,r=""+r+"R"+i,i=Ac++,0<i&&(r+="H"+i.toString(32)),r+=""}else i=Z1++,r=""+r+"r"+i.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:z0,useFormState:Dh,useActionState:Dh,useOptimistic:function(t){var r=Dr();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=F0.bind(null,_t,!0,i),i.dispatch=r,[t,r]},useMemoCache:T0,useCacheRefresh:function(){return Dr().memoizedState=ty.bind(null,_t)}},tm={readContext:yr,use:Ec,useCallback:Vh,useContext:yr,useEffect:zh,useImperativeHandle:Hh,useInsertionEffect:Fh,useLayoutEffect:Ph,useMemo:qh,useReducer:_c,useRef:Bh,useState:function(){return _c(on)},useDebugValue:O0,useDeferredValue:function(t,r){var i=qa();return Gh(i,ia.memoizedState,t,r)},useTransition:function(){var t=_c(on)[0],r=qa().memoizedState;return[typeof t=="boolean"?t:co(t),r]},useSyncExternalStore:wh,useId:Qh,useHostTransitionStatus:z0,useFormState:Rh,useActionState:Rh,useOptimistic:function(t,r){var i=qa();return Sh(i,ia,t,r)},useMemoCache:T0,useCacheRefresh:Zh},ry={readContext:yr,use:Ec,useCallback:Vh,useContext:yr,useEffect:zh,useImperativeHandle:Hh,useInsertionEffect:Fh,useLayoutEffect:Ph,useMemo:qh,useReducer:D0,useRef:Bh,useState:function(){return D0(on)},useDebugValue:O0,useDeferredValue:function(t,r){var i=qa();return ia===null?B0(i,t,r):Gh(i,ia.memoizedState,t,r)},useTransition:function(){var t=D0(on)[0],r=qa().memoizedState;return[typeof t=="boolean"?t:co(t),r]},useSyncExternalStore:wh,useId:Qh,useHostTransitionStatus:z0,useFormState:Oh,useActionState:Oh,useOptimistic:function(t,r){var i=qa();return ia!==null?Sh(i,ia,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:T0,useCacheRefresh:Zh},mi=null,ho=0;function Ic(t){var r=ho;return ho+=1,mi===null&&(mi=[]),xh(mi,t,r)}function mo(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function Oc(t,r){throw r.$$typeof===E?Error(x(525)):(t=Object.prototype.toString.call(r),Error(x(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function am(t){var r=t._init;return r(t._payload)}function rm(t){function r(ke,we){if(t){var Ee=ke.deletions;Ee===null?(ke.deletions=[we],ke.flags|=16):Ee.push(we)}}function i(ke,we){if(!t)return null;for(;we!==null;)r(ke,we),we=we.sibling;return null}function h(ke){for(var we=new Map;ke!==null;)ke.key!==null?we.set(ke.key,ke):we.set(ke.index,ke),ke=ke.sibling;return we}function w(ke,we){return ke=an(ke,we),ke.index=0,ke.sibling=null,ke}function C(ke,we,Ee){return ke.index=Ee,t?(Ee=ke.alternate,Ee!==null?(Ee=Ee.index,Ee<we?(ke.flags|=67108866,we):Ee):(ke.flags|=67108866,we)):(ke.flags|=1048576,we)}function F(ke){return t&&ke.alternate===null&&(ke.flags|=67108866),ke}function K(ke,we,Ee,Pe){return we===null||we.tag!==6?(we=l0(Ee,ke.mode,Pe),we.return=ke,we):(we=w(we,Ee),we.return=ke,we)}function ue(ke,we,Ee,Pe){var nt=Ee.type;return nt===O?Fe(ke,we,Ee.props.children,Pe,Ee.key):we!==null&&(we.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===G&&am(nt)===we.type)?(we=w(we,Ee.props),mo(we,Ee),we.return=ke,we):(we=pc(Ee.type,Ee.key,Ee.props,null,ke.mode,Pe),mo(we,Ee),we.return=ke,we)}function _e(ke,we,Ee,Pe){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ee.containerInfo||we.stateNode.implementation!==Ee.implementation?(we=i0(Ee,ke.mode,Pe),we.return=ke,we):(we=w(we,Ee.children||[]),we.return=ke,we)}function Fe(ke,we,Ee,Pe,nt){return we===null||we.tag!==7?(we=yl(Ee,ke.mode,Pe,nt),we.return=ke,we):(we=w(we,Ee),we.return=ke,we)}function qe(ke,we,Ee){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=l0(""+we,ke.mode,Ee),we.return=ke,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case _:return Ee=pc(we.type,we.key,we.props,null,ke.mode,Ee),mo(Ee,we),Ee.return=ke,Ee;case T:return we=i0(we,ke.mode,Ee),we.return=ke,we;case G:var Pe=we._init;return we=Pe(we._payload),qe(ke,we,Ee)}if(P(we)||te(we))return we=yl(we,ke.mode,Ee,null),we.return=ke,we;if(typeof we.then=="function")return qe(ke,Ic(we),Ee);if(we.$$typeof===D)return qe(ke,Nc(ke,we),Ee);Oc(ke,we)}return null}function De(ke,we,Ee,Pe){var nt=we!==null?we.key:null;if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return nt!==null?null:K(ke,we,""+Ee,Pe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case _:return Ee.key===nt?ue(ke,we,Ee,Pe):null;case T:return Ee.key===nt?_e(ke,we,Ee,Pe):null;case G:return nt=Ee._init,Ee=nt(Ee._payload),De(ke,we,Ee,Pe)}if(P(Ee)||te(Ee))return nt!==null?null:Fe(ke,we,Ee,Pe,null);if(typeof Ee.then=="function")return De(ke,we,Ic(Ee),Pe);if(Ee.$$typeof===D)return De(ke,we,Nc(ke,Ee),Pe);Oc(ke,Ee)}return null}function Ie(ke,we,Ee,Pe,nt){if(typeof Pe=="string"&&Pe!==""||typeof Pe=="number"||typeof Pe=="bigint")return ke=ke.get(Ee)||null,K(we,ke,""+Pe,nt);if(typeof Pe=="object"&&Pe!==null){switch(Pe.$$typeof){case _:return ke=ke.get(Pe.key===null?Ee:Pe.key)||null,ue(we,ke,Pe,nt);case T:return ke=ke.get(Pe.key===null?Ee:Pe.key)||null,_e(we,ke,Pe,nt);case G:var Mt=Pe._init;return Pe=Mt(Pe._payload),Ie(ke,we,Ee,Pe,nt)}if(P(Pe)||te(Pe))return ke=ke.get(Ee)||null,Fe(we,ke,Pe,nt,null);if(typeof Pe.then=="function")return Ie(ke,we,Ee,Ic(Pe),nt);if(Pe.$$typeof===D)return Ie(ke,we,Ee,Nc(we,Pe),nt);Oc(we,Pe)}return null}function pt(ke,we,Ee,Pe){for(var nt=null,Mt=null,dt=we,mt=we=0,ir=null;dt!==null&&mt<Ee.length;mt++){dt.index>mt?(ir=dt,dt=null):ir=dt.sibling;var $t=De(ke,dt,Ee[mt],Pe);if($t===null){dt===null&&(dt=ir);break}t&&dt&&$t.alternate===null&&r(ke,dt),we=C($t,we,mt),Mt===null?nt=$t:Mt.sibling=$t,Mt=$t,dt=ir}if(mt===Ee.length)return i(ke,dt),Qt&&wl(ke,mt),nt;if(dt===null){for(;mt<Ee.length;mt++)dt=qe(ke,Ee[mt],Pe),dt!==null&&(we=C(dt,we,mt),Mt===null?nt=dt:Mt.sibling=dt,Mt=dt);return Qt&&wl(ke,mt),nt}for(dt=h(dt);mt<Ee.length;mt++)ir=Ie(dt,ke,mt,Ee[mt],Pe),ir!==null&&(t&&ir.alternate!==null&&dt.delete(ir.key===null?mt:ir.key),we=C(ir,we,mt),Mt===null?nt=ir:Mt.sibling=ir,Mt=ir);return t&&dt.forEach(function(tl){return r(ke,tl)}),Qt&&wl(ke,mt),nt}function ht(ke,we,Ee,Pe){if(Ee==null)throw Error(x(151));for(var nt=null,Mt=null,dt=we,mt=we=0,ir=null,$t=Ee.next();dt!==null&&!$t.done;mt++,$t=Ee.next()){dt.index>mt?(ir=dt,dt=null):ir=dt.sibling;var tl=De(ke,dt,$t.value,Pe);if(tl===null){dt===null&&(dt=ir);break}t&&dt&&tl.alternate===null&&r(ke,dt),we=C(tl,we,mt),Mt===null?nt=tl:Mt.sibling=tl,Mt=tl,dt=ir}if($t.done)return i(ke,dt),Qt&&wl(ke,mt),nt;if(dt===null){for(;!$t.done;mt++,$t=Ee.next())$t=qe(ke,$t.value,Pe),$t!==null&&(we=C($t,we,mt),Mt===null?nt=$t:Mt.sibling=$t,Mt=$t);return Qt&&wl(ke,mt),nt}for(dt=h(dt);!$t.done;mt++,$t=Ee.next())$t=Ie(dt,ke,mt,$t.value,Pe),$t!==null&&(t&&$t.alternate!==null&&dt.delete($t.key===null?mt:$t.key),we=C($t,we,mt),Mt===null?nt=$t:Mt.sibling=$t,Mt=$t);return t&&dt.forEach(function(sb){return r(ke,sb)}),Qt&&wl(ke,mt),nt}function ca(ke,we,Ee,Pe){if(typeof Ee=="object"&&Ee!==null&&Ee.type===O&&Ee.key===null&&(Ee=Ee.props.children),typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case _:e:{for(var nt=Ee.key;we!==null;){if(we.key===nt){if(nt=Ee.type,nt===O){if(we.tag===7){i(ke,we.sibling),Pe=w(we,Ee.props.children),Pe.return=ke,ke=Pe;break e}}else if(we.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===G&&am(nt)===we.type){i(ke,we.sibling),Pe=w(we,Ee.props),mo(Pe,Ee),Pe.return=ke,ke=Pe;break e}i(ke,we);break}else r(ke,we);we=we.sibling}Ee.type===O?(Pe=yl(Ee.props.children,ke.mode,Pe,Ee.key),Pe.return=ke,ke=Pe):(Pe=pc(Ee.type,Ee.key,Ee.props,null,ke.mode,Pe),mo(Pe,Ee),Pe.return=ke,ke=Pe)}return F(ke);case T:e:{for(nt=Ee.key;we!==null;){if(we.key===nt)if(we.tag===4&&we.stateNode.containerInfo===Ee.containerInfo&&we.stateNode.implementation===Ee.implementation){i(ke,we.sibling),Pe=w(we,Ee.children||[]),Pe.return=ke,ke=Pe;break e}else{i(ke,we);break}else r(ke,we);we=we.sibling}Pe=i0(Ee,ke.mode,Pe),Pe.return=ke,ke=Pe}return F(ke);case G:return nt=Ee._init,Ee=nt(Ee._payload),ca(ke,we,Ee,Pe)}if(P(Ee))return pt(ke,we,Ee,Pe);if(te(Ee)){if(nt=te(Ee),typeof nt!="function")throw Error(x(150));return Ee=nt.call(Ee),ht(ke,we,Ee,Pe)}if(typeof Ee.then=="function")return ca(ke,we,Ic(Ee),Pe);if(Ee.$$typeof===D)return ca(ke,we,Nc(ke,Ee),Pe);Oc(ke,Ee)}return typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint"?(Ee=""+Ee,we!==null&&we.tag===6?(i(ke,we.sibling),Pe=w(we,Ee),Pe.return=ke,ke=Pe):(i(ke,we),Pe=l0(Ee,ke.mode,Pe),Pe.return=ke,ke=Pe),F(ke)):i(ke,we)}return function(ke,we,Ee,Pe){try{ho=0;var nt=ca(ke,we,Ee,Pe);return mi=null,nt}catch(dt){if(dt===ro||dt===jc)throw dt;var Mt=Ur(29,dt,null,ke.mode);return Mt.lanes=Pe,Mt.return=ke,Mt}finally{}}}var fi=rm(!0),sm=rm(!1),ns=H(null),Fs=null;function Pn(t){var r=t.alternate;ae(Ja,Ja.current&1),ae(ns,t),Fs===null&&(r===null||di.current!==null||r.memoizedState!==null)&&(Fs=t)}function nm(t){if(t.tag===22){if(ae(Ja,Ja.current),ae(ns,t),Fs===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Fs=t)}}else Un()}function Un(){ae(Ja,Ja.current),ae(ns,ns.current)}function cn(t){me(ns),Fs===t&&(Fs=null),me(Ja)}var Ja=H(0);function Bc(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||_u(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function P0(t,r,i,h){r=t.memoizedState,i=i(h,r),i=i==null?r:S({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var U0={enqueueSetState:function(t,r,i){t=t._reactInternals;var h=Gr(),w=Ln(h);w.payload=r,i!=null&&(w.callback=i),r=zn(t,w,h),r!==null&&(Yr(r,t,h),no(r,t,h))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var h=Gr(),w=Ln(h);w.tag=1,w.payload=r,i!=null&&(w.callback=i),r=zn(t,w,h),r!==null&&(Yr(r,t,h),no(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Gr(),h=Ln(i);h.tag=2,r!=null&&(h.callback=r),r=zn(t,h,i),r!==null&&(Yr(r,t,i),no(r,t,i))}};function lm(t,r,i,h,w,C,F){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(h,C,F):r.prototype&&r.prototype.isPureReactComponent?!u(i,h)||!u(w,C):!0}function im(t,r,i,h){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,h),r.state!==t&&U0.enqueueReplaceState(r,r.state,null)}function Al(t,r){var i=r;if("ref"in r){i={};for(var h in r)h!=="ref"&&(i[h]=r[h])}if(t=t.defaultProps){i===r&&(i=S({},i));for(var w in t)i[w]===void 0&&(i[w]=t[w])}return i}var Lc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function om(t){Lc(t)}function cm(t){console.error(t)}function dm(t){Lc(t)}function zc(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function um(t,r,i){try{var h=t.onCaughtError;h(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(w){setTimeout(function(){throw w})}}function H0(t,r,i){return i=Ln(i),i.tag=3,i.payload={element:null},i.callback=function(){zc(t,r)},i}function xm(t){return t=Ln(t),t.tag=3,t}function hm(t,r,i,h){var w=i.type.getDerivedStateFromError;if(typeof w=="function"){var C=h.value;t.payload=function(){return w(C)},t.callback=function(){um(r,i,h)}}var F=i.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(t.callback=function(){um(r,i,h),typeof w!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var K=h.stack;this.componentDidCatch(h.value,{componentStack:K!==null?K:""})})}function sy(t,r,i,h,w){if(i.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=i.alternate,r!==null&&eo(r,i,w,!0),i=ns.current,i!==null){switch(i.tag){case 13:return Fs===null?xu():i.alternate===null&&Ta===0&&(Ta=3),i.flags&=-257,i.flags|=65536,i.lanes=w,h===p0?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([h]):r.add(h),mu(t,h,w)),!1;case 22:return i.flags|=65536,h===p0?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([h]):i.add(h)),mu(t,h,w)),!1}throw Error(x(435,i.tag))}return mu(t,h,w),xu(),!1}if(Qt)return r=ns.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=w,h!==d0&&(t=Error(x(422),{cause:h}),Ji(ts(t,i)))):(h!==d0&&(r=Error(x(423),{cause:h}),Ji(ts(r,i))),t=t.current.alternate,t.flags|=65536,w&=-w,t.lanes|=w,h=ts(h,i),w=H0(t.stateNode,h,w),w0(t,w),Ta!==4&&(Ta=2)),!1;var C=Error(x(520),{cause:h});if(C=ts(C,i),No===null?No=[C]:No.push(C),Ta!==4&&(Ta=2),r===null)return!0;h=ts(h,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=w&-w,i.lanes|=t,t=H0(i.stateNode,h,t),w0(i,t),!1;case 1:if(r=i.type,C=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Xn===null||!Xn.has(C))))return i.flags|=65536,w&=-w,i.lanes|=w,w=xm(w),hm(w,t,i,h),w0(i,w),!1}i=i.return}while(i!==null);return!1}var mm=Error(x(461)),nr=!1;function cr(t,r,i,h){r.child=t===null?sm(r,null,i,h):fi(r,t.child,i,h)}function fm(t,r,i,h,w){i=i.render;var C=r.ref;if("ref"in h){var F={};for(var K in h)K!=="ref"&&(F[K]=h[K])}else F=h;return kl(r),h=C0(t,r,i,F,C,w),K=S0(),t!==null&&!nr?(A0(t,r,w),dn(t,r,w)):(Qt&&K&&o0(r),r.flags|=1,cr(t,r,h,w),r.child)}function gm(t,r,i,h,w){if(t===null){var C=i.type;return typeof C=="function"&&!n0(C)&&C.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=C,pm(t,r,C,h,w)):(t=pc(i.type,null,h,r,r.mode,w),t.ref=r.ref,t.return=r,r.child=t)}if(C=t.child,!Z0(t,w)){var F=C.memoizedProps;if(i=i.compare,i=i!==null?i:u,i(F,h)&&t.ref===r.ref)return dn(t,r,w)}return r.flags|=1,t=an(C,h),t.ref=r.ref,t.return=r,r.child=t}function pm(t,r,i,h,w){if(t!==null){var C=t.memoizedProps;if(u(C,h)&&t.ref===r.ref)if(nr=!1,r.pendingProps=h=C,Z0(t,w))(t.flags&131072)!==0&&(nr=!0);else return r.lanes=t.lanes,dn(t,r,w)}return V0(t,r,i,h,w)}function ym(t,r,i){var h=r.pendingProps,w=h.children,C=t!==null?t.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=C!==null?C.baseLanes|i:i,t!==null){for(w=r.child=t.child,C=0;w!==null;)C=C|w.lanes|w.childLanes,w=w.sibling;r.childLanes=C&~h}else r.childLanes=0,r.child=null;return bm(t,r,h,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&vc(r,C!==null?C.cachePool:null),C!==null?ph(r,C):v0(),nm(r);else return r.lanes=r.childLanes=536870912,bm(t,r,C!==null?C.baseLanes|i:i,i)}else C!==null?(vc(r,C.cachePool),ph(r,C),Un(),r.memoizedState=null):(t!==null&&vc(r,null),v0(),Un());return cr(t,r,w,i),r.child}function bm(t,r,i,h){var w=g0();return w=w===null?null:{parent:Ka._currentValue,pool:w},r.memoizedState={baseLanes:i,cachePool:w},t!==null&&vc(r,null),v0(),nm(r),t!==null&&eo(t,r,h,!0),null}function Fc(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(x(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function V0(t,r,i,h,w){return kl(r),i=C0(t,r,i,h,void 0,w),h=S0(),t!==null&&!nr?(A0(t,r,w),dn(t,r,w)):(Qt&&h&&o0(r),r.flags|=1,cr(t,r,i,w),r.child)}function wm(t,r,i,h,w,C){return kl(r),r.updateQueue=null,i=bh(r,h,i,w),yh(t),h=S0(),t!==null&&!nr?(A0(t,r,C),dn(t,r,C)):(Qt&&h&&o0(r),r.flags|=1,cr(t,r,i,C),r.child)}function Nm(t,r,i,h,w){if(kl(r),r.stateNode===null){var C=ni,F=i.contextType;typeof F=="object"&&F!==null&&(C=yr(F)),C=new i(h,C),r.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=U0,r.stateNode=C,C._reactInternals=r,C=r.stateNode,C.props=h,C.state=r.memoizedState,C.refs={},y0(r),F=i.contextType,C.context=typeof F=="object"&&F!==null?yr(F):ni,C.state=r.memoizedState,F=i.getDerivedStateFromProps,typeof F=="function"&&(P0(r,i,F,h),C.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(F=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),F!==C.state&&U0.enqueueReplaceState(C,C.state,null),io(r,h,C,w),lo(),C.state=r.memoizedState),typeof C.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(t===null){C=r.stateNode;var K=r.memoizedProps,ue=Al(i,K);C.props=ue;var _e=C.context,Fe=i.contextType;F=ni,typeof Fe=="object"&&Fe!==null&&(F=yr(Fe));var qe=i.getDerivedStateFromProps;Fe=typeof qe=="function"||typeof C.getSnapshotBeforeUpdate=="function",K=r.pendingProps!==K,Fe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(K||_e!==F)&&im(r,C,h,F),Bn=!1;var De=r.memoizedState;C.state=De,io(r,h,C,w),lo(),_e=r.memoizedState,K||De!==_e||Bn?(typeof qe=="function"&&(P0(r,i,qe,h),_e=r.memoizedState),(ue=Bn||lm(r,i,ue,h,De,_e,F))?(Fe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(r.flags|=4194308)):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=_e),C.props=h,C.state=_e,C.context=F,h=ue):(typeof C.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{C=r.stateNode,b0(t,r),F=r.memoizedProps,Fe=Al(i,F),C.props=Fe,qe=r.pendingProps,De=C.context,_e=i.contextType,ue=ni,typeof _e=="object"&&_e!==null&&(ue=yr(_e)),K=i.getDerivedStateFromProps,(_e=typeof K=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(F!==qe||De!==ue)&&im(r,C,h,ue),Bn=!1,De=r.memoizedState,C.state=De,io(r,h,C,w),lo();var Ie=r.memoizedState;F!==qe||De!==Ie||Bn||t!==null&&t.dependencies!==null&&wc(t.dependencies)?(typeof K=="function"&&(P0(r,i,K,h),Ie=r.memoizedState),(Fe=Bn||lm(r,i,Fe,h,De,Ie,ue)||t!==null&&t.dependencies!==null&&wc(t.dependencies))?(_e||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(h,Ie,ue),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(h,Ie,ue)),typeof C.componentDidUpdate=="function"&&(r.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof C.componentDidUpdate!="function"||F===t.memoizedProps&&De===t.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===t.memoizedProps&&De===t.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=Ie),C.props=h,C.state=Ie,C.context=ue,h=Fe):(typeof C.componentDidUpdate!="function"||F===t.memoizedProps&&De===t.memoizedState||(r.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||F===t.memoizedProps&&De===t.memoizedState||(r.flags|=1024),h=!1)}return C=h,Fc(t,r),h=(r.flags&128)!==0,C||h?(C=r.stateNode,i=h&&typeof i.getDerivedStateFromError!="function"?null:C.render(),r.flags|=1,t!==null&&h?(r.child=fi(r,t.child,null,w),r.child=fi(r,null,i,w)):cr(t,r,i,w),r.memoizedState=C.state,t=r.child):t=dn(t,r,w),t}function vm(t,r,i,h){return Ki(),r.flags|=256,cr(t,r,i,h),r.child}var q0={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function G0(t){return{baseLanes:t,cachePool:ch()}}function Y0(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=ls),t}function jm(t,r,i){var h=r.pendingProps,w=!1,C=(r.flags&128)!==0,F;if((F=C)||(F=t!==null&&t.memoizedState===null?!1:(Ja.current&2)!==0),F&&(w=!0,r.flags&=-129),F=(r.flags&32)!==0,r.flags&=-33,t===null){if(Qt){if(w?Pn(r):Un(),Qt){var K=_a,ue;if(ue=K){e:{for(ue=K,K=zs;ue.nodeType!==8;){if(!K){K=null;break e}if(ue=fs(ue.nextSibling),ue===null){K=null;break e}}K=ue}K!==null?(r.memoizedState={dehydrated:K,treeContext:bl!==null?{id:rn,overflow:sn}:null,retryLane:536870912,hydrationErrors:null},ue=Ur(18,null,null,0),ue.stateNode=K,ue.return=r,r.child=ue,Cr=r,_a=null,ue=!0):ue=!1}ue||vl(r)}if(K=r.memoizedState,K!==null&&(K=K.dehydrated,K!==null))return _u(K)?r.lanes=32:r.lanes=536870912,null;cn(r)}return K=h.children,h=h.fallback,w?(Un(),w=r.mode,K=Pc({mode:"hidden",children:K},w),h=yl(h,w,i,null),K.return=r,h.return=r,K.sibling=h,r.child=K,w=r.child,w.memoizedState=G0(i),w.childLanes=Y0(t,F,i),r.memoizedState=q0,h):(Pn(r),X0(r,K))}if(ue=t.memoizedState,ue!==null&&(K=ue.dehydrated,K!==null)){if(C)r.flags&256?(Pn(r),r.flags&=-257,r=$0(t,r,i)):r.memoizedState!==null?(Un(),r.child=t.child,r.flags|=128,r=null):(Un(),w=h.fallback,K=r.mode,h=Pc({mode:"visible",children:h.children},K),w=yl(w,K,i,null),w.flags|=2,h.return=r,w.return=r,h.sibling=w,r.child=h,fi(r,t.child,null,i),h=r.child,h.memoizedState=G0(i),h.childLanes=Y0(t,F,i),r.memoizedState=q0,r=w);else if(Pn(r),_u(K)){if(F=K.nextSibling&&K.nextSibling.dataset,F)var _e=F.dgst;F=_e,h=Error(x(419)),h.stack="",h.digest=F,Ji({value:h,source:null,stack:null}),r=$0(t,r,i)}else if(nr||eo(t,r,i,!1),F=(i&t.childLanes)!==0,nr||F){if(F=fa,F!==null&&(h=i&-i,h=(h&42)!==0?1:il(h),h=(h&(F.suspendedLanes|i))!==0?0:h,h!==0&&h!==ue.retryLane))throw ue.retryLane=h,si(t,h),Yr(F,t,h),mm;K.data==="$?"||xu(),r=$0(t,r,i)}else K.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=ue.treeContext,_a=fs(K.nextSibling),Cr=r,Qt=!0,Nl=null,zs=!1,t!==null&&(rs[ss++]=rn,rs[ss++]=sn,rs[ss++]=bl,rn=t.id,sn=t.overflow,bl=r),r=X0(r,h.children),r.flags|=4096);return r}return w?(Un(),w=h.fallback,K=r.mode,ue=t.child,_e=ue.sibling,h=an(ue,{mode:"hidden",children:h.children}),h.subtreeFlags=ue.subtreeFlags&65011712,_e!==null?w=an(_e,w):(w=yl(w,K,i,null),w.flags|=2),w.return=r,h.return=r,h.sibling=w,r.child=h,h=w,w=r.child,K=t.child.memoizedState,K===null?K=G0(i):(ue=K.cachePool,ue!==null?(_e=Ka._currentValue,ue=ue.parent!==_e?{parent:_e,pool:_e}:ue):ue=ch(),K={baseLanes:K.baseLanes|i,cachePool:ue}),w.memoizedState=K,w.childLanes=Y0(t,F,i),r.memoizedState=q0,h):(Pn(r),i=t.child,t=i.sibling,i=an(i,{mode:"visible",children:h.children}),i.return=r,i.sibling=null,t!==null&&(F=r.deletions,F===null?(r.deletions=[t],r.flags|=16):F.push(t)),r.child=i,r.memoizedState=null,i)}function X0(t,r){return r=Pc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Pc(t,r){return t=Ur(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function $0(t,r,i){return fi(r,t.child,null,i),t=X0(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function km(t,r,i){t.lanes|=r;var h=t.alternate;h!==null&&(h.lanes|=r),x0(t.return,r,i)}function Q0(t,r,i,h,w){var C=t.memoizedState;C===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:i,tailMode:w}:(C.isBackwards=r,C.rendering=null,C.renderingStartTime=0,C.last=h,C.tail=i,C.tailMode=w)}function Cm(t,r,i){var h=r.pendingProps,w=h.revealOrder,C=h.tail;if(cr(t,r,h.children,i),h=Ja.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&km(t,i,r);else if(t.tag===19)km(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}h&=1}switch(ae(Ja,h),w){case"forwards":for(i=r.child,w=null;i!==null;)t=i.alternate,t!==null&&Bc(t)===null&&(w=i),i=i.sibling;i=w,i===null?(w=r.child,r.child=null):(w=i.sibling,i.sibling=null),Q0(r,!1,w,i,C);break;case"backwards":for(i=null,w=r.child,r.child=null;w!==null;){if(t=w.alternate,t!==null&&Bc(t)===null){r.child=w;break}t=w.sibling,w.sibling=i,i=w,w=t}Q0(r,!0,i,null,C);break;case"together":Q0(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function dn(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Yn|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(eo(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(x(153));if(r.child!==null){for(t=r.child,i=an(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=an(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Z0(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&wc(t)))}function ny(t,r,i){switch(r.tag){case 3:je(r,r.stateNode.containerInfo),On(r,Ka,t.memoizedState.cache),Ki();break;case 27:case 5:Ke(r);break;case 4:je(r,r.stateNode.containerInfo);break;case 10:On(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Pn(r),r.flags|=128,null):(i&r.child.childLanes)!==0?jm(t,r,i):(Pn(r),t=dn(t,r,i),t!==null?t.sibling:null);Pn(r);break;case 19:var w=(t.flags&128)!==0;if(h=(i&r.childLanes)!==0,h||(eo(t,r,i,!1),h=(i&r.childLanes)!==0),w){if(h)return Cm(t,r,i);r.flags|=128}if(w=r.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),ae(Ja,Ja.current),h)break;return null;case 22:case 23:return r.lanes=0,ym(t,r,i);case 24:On(r,Ka,t.memoizedState.cache)}return dn(t,r,i)}function Sm(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)nr=!0;else{if(!Z0(t,i)&&(r.flags&128)===0)return nr=!1,ny(t,r,i);nr=(t.flags&131072)!==0}else nr=!1,Qt&&(r.flags&1048576)!==0&&ah(r,bc,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var h=r.elementType,w=h._init;if(h=w(h._payload),r.type=h,typeof h=="function")n0(h)?(t=Al(h,t),r.tag=1,r=Nm(null,r,h,t,i)):(r.tag=0,r=V0(null,r,h,t,i));else{if(h!=null){if(w=h.$$typeof,w===B){r.tag=11,r=fm(null,r,h,t,i);break e}else if(w===U){r.tag=14,r=gm(null,r,h,t,i);break e}}throw r=W(h)||h,Error(x(306,r,""))}}return r;case 0:return V0(t,r,r.type,r.pendingProps,i);case 1:return h=r.type,w=Al(h,r.pendingProps),Nm(t,r,h,w,i);case 3:e:{if(je(r,r.stateNode.containerInfo),t===null)throw Error(x(387));h=r.pendingProps;var C=r.memoizedState;w=C.element,b0(t,r),io(r,h,null,i);var F=r.memoizedState;if(h=F.cache,On(r,Ka,h),h!==C.cache&&h0(r,[Ka],i,!0),lo(),h=F.element,C.isDehydrated)if(C={element:h,isDehydrated:!1,cache:F.cache},r.updateQueue.baseState=C,r.memoizedState=C,r.flags&256){r=vm(t,r,h,i);break e}else if(h!==w){w=ts(Error(x(424)),r),Ji(w),r=vm(t,r,h,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_a=fs(t.firstChild),Cr=r,Qt=!0,Nl=null,zs=!0,i=sm(r,null,h,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ki(),h===w){r=dn(t,r,i);break e}cr(t,r,h,i)}r=r.child}return r;case 26:return Fc(t,r),t===null?(i=Mf(r.type,null,r.pendingProps,null))?r.memoizedState=i:Qt||(i=r.type,t=r.pendingProps,h=ed(xe.current).createElement(i),h[ar]=r,h[Sa]=t,ur(h,i,t),ea(h),r.stateNode=h):r.memoizedState=Mf(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Ke(r),t===null&&Qt&&(h=r.stateNode=Ef(r.type,r.pendingProps,xe.current),Cr=r,zs=!0,w=_a,Zn(r.type)?(Tu=w,_a=fs(h.firstChild)):_a=w),cr(t,r,r.pendingProps.children,i),Fc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Qt&&((w=h=_a)&&(h=Ry(h,r.type,r.pendingProps,zs),h!==null?(r.stateNode=h,Cr=r,_a=fs(h.firstChild),zs=!1,w=!0):w=!1),w||vl(r)),Ke(r),w=r.type,C=r.pendingProps,F=t!==null?t.memoizedProps:null,h=C.children,Su(w,C)?h=null:F!==null&&Su(w,F)&&(r.flags|=32),r.memoizedState!==null&&(w=C0(t,r,W1,null,null,i),To._currentValue=w),Fc(t,r),cr(t,r,h,i),r.child;case 6:return t===null&&Qt&&((t=i=_a)&&(i=Iy(i,r.pendingProps,zs),i!==null?(r.stateNode=i,Cr=r,_a=null,t=!0):t=!1),t||vl(r)),null;case 13:return jm(t,r,i);case 4:return je(r,r.stateNode.containerInfo),h=r.pendingProps,t===null?r.child=fi(r,null,h,i):cr(t,r,h,i),r.child;case 11:return fm(t,r,r.type,r.pendingProps,i);case 7:return cr(t,r,r.pendingProps,i),r.child;case 8:return cr(t,r,r.pendingProps.children,i),r.child;case 12:return cr(t,r,r.pendingProps.children,i),r.child;case 10:return h=r.pendingProps,On(r,r.type,h.value),cr(t,r,h.children,i),r.child;case 9:return w=r.type._context,h=r.pendingProps.children,kl(r),w=yr(w),h=h(w),r.flags|=1,cr(t,r,h,i),r.child;case 14:return gm(t,r,r.type,r.pendingProps,i);case 15:return pm(t,r,r.type,r.pendingProps,i);case 19:return Cm(t,r,i);case 31:return h=r.pendingProps,i=r.mode,h={mode:h.mode,children:h.children},t===null?(i=Pc(h,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=an(t.child,h),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return ym(t,r,i);case 24:return kl(r),h=yr(Ka),t===null?(w=g0(),w===null&&(w=fa,C=m0(),w.pooledCache=C,C.refCount++,C!==null&&(w.pooledCacheLanes|=i),w=C),r.memoizedState={parent:h,cache:w},y0(r),On(r,Ka,w)):((t.lanes&i)!==0&&(b0(t,r),io(r,null,null,i),lo()),w=t.memoizedState,C=r.memoizedState,w.parent!==h?(w={parent:h,cache:h},r.memoizedState=w,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=w),On(r,Ka,h)):(h=C.cache,On(r,Ka,h),h!==w.cache&&h0(r,[Ka],i,!0))),cr(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(x(156,r.tag))}function un(t){t.flags|=4}function Am(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Bf(r)){if(r=ns.current,r!==null&&((qt&4194048)===qt?Fs!==null:(qt&62914560)!==qt&&(qt&536870912)===0||r!==Fs))throw so=p0,dh;t.flags|=8192}}function Uc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Pi():536870912,t.lanes|=r,bi|=r)}function fo(t,r){if(!Qt)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var h=null;i!==null;)i.alternate!==null&&(h=i),i=i.sibling;h===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:h.sibling=null}}function ka(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,h=0;if(r)for(var w=t.child;w!==null;)i|=w.lanes|w.childLanes,h|=w.subtreeFlags&65011712,h|=w.flags&65011712,w.return=t,w=w.sibling;else for(w=t.child;w!==null;)i|=w.lanes|w.childLanes,h|=w.subtreeFlags,h|=w.flags,w.return=t,w=w.sibling;return t.subtreeFlags|=h,t.childLanes=i,r}function ly(t,r,i){var h=r.pendingProps;switch(c0(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ka(r),null;case 1:return ka(r),null;case 3:return i=r.stateNode,h=null,t!==null&&(h=t.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),ln(Ka),Je(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Wi(r)?un(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,nh())),ka(r),null;case 26:return i=r.memoizedState,t===null?(un(r),i!==null?(ka(r),Am(r,i)):(ka(r),r.flags&=-16777217)):i?i!==t.memoizedState?(un(r),ka(r),Am(r,i)):(ka(r),r.flags&=-16777217):(t.memoizedProps!==h&&un(r),ka(r),r.flags&=-16777217),null;case 27:at(r),i=xe.current;var w=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==h&&un(r);else{if(!h){if(r.stateNode===null)throw Error(x(166));return ka(r),null}t=be.current,Wi(r)?rh(r):(t=Ef(w,h,i),r.stateNode=t,un(r))}return ka(r),null;case 5:if(at(r),i=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==h&&un(r);else{if(!h){if(r.stateNode===null)throw Error(x(166));return ka(r),null}if(t=be.current,Wi(r))rh(r);else{switch(w=ed(xe.current),t){case 1:t=w.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=w.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=w.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=w.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=w.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof h.is=="string"?w.createElement("select",{is:h.is}):w.createElement("select"),h.multiple?t.multiple=!0:h.size&&(t.size=h.size);break;default:t=typeof h.is=="string"?w.createElement(i,{is:h.is}):w.createElement(i)}}t[ar]=r,t[Sa]=h;e:for(w=r.child;w!==null;){if(w.tag===5||w.tag===6)t.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===r)break e;for(;w.sibling===null;){if(w.return===null||w.return===r)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}r.stateNode=t;e:switch(ur(t,i,h),i){case"button":case"input":case"select":case"textarea":t=!!h.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&un(r)}}return ka(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==h&&un(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(x(166));if(t=xe.current,Wi(r)){if(t=r.stateNode,i=r.memoizedProps,h=null,w=Cr,w!==null)switch(w.tag){case 27:case 5:h=w.memoizedProps}t[ar]=r,t=!!(t.nodeValue===i||h!==null&&h.suppressHydrationWarning===!0||Nf(t.nodeValue,i)),t||vl(r)}else t=ed(t).createTextNode(h),t[ar]=r,r.stateNode=t}return ka(r),null;case 13:if(h=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(w=Wi(r),h!==null&&h.dehydrated!==null){if(t===null){if(!w)throw Error(x(318));if(w=r.memoizedState,w=w!==null?w.dehydrated:null,!w)throw Error(x(317));w[ar]=r}else Ki(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ka(r),w=!1}else w=nh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=w),w=!0;if(!w)return r.flags&256?(cn(r),r):(cn(r),null)}if(cn(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=h!==null,t=t!==null&&t.memoizedState!==null,i){h=r.child,w=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(w=h.alternate.memoizedState.cachePool.pool);var C=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(C=h.memoizedState.cachePool.pool),C!==w&&(h.flags|=2048)}return i!==t&&i&&(r.child.flags|=8192),Uc(r,r.updateQueue),ka(r),null;case 4:return Je(),t===null&&Nu(r.stateNode.containerInfo),ka(r),null;case 10:return ln(r.type),ka(r),null;case 19:if(me(Ja),w=r.memoizedState,w===null)return ka(r),null;if(h=(r.flags&128)!==0,C=w.rendering,C===null)if(h)fo(w,!1);else{if(Ta!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(C=Bc(t),C!==null){for(r.flags|=128,fo(w,!1),t=C.updateQueue,r.updateQueue=t,Uc(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)th(i,t),i=i.sibling;return ae(Ja,Ja.current&1|2),r.child}t=t.sibling}w.tail!==null&&Ne()>qc&&(r.flags|=128,h=!0,fo(w,!1),r.lanes=4194304)}else{if(!h)if(t=Bc(C),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Uc(r,t),fo(w,!0),w.tail===null&&w.tailMode==="hidden"&&!C.alternate&&!Qt)return ka(r),null}else 2*Ne()-w.renderingStartTime>qc&&i!==536870912&&(r.flags|=128,h=!0,fo(w,!1),r.lanes=4194304);w.isBackwards?(C.sibling=r.child,r.child=C):(t=w.last,t!==null?t.sibling=C:r.child=C,w.last=C)}return w.tail!==null?(r=w.tail,w.rendering=r,w.tail=r.sibling,w.renderingStartTime=Ne(),r.sibling=null,t=Ja.current,ae(Ja,h?t&1|2:t&1),r):(ka(r),null);case 22:case 23:return cn(r),j0(),h=r.memoizedState!==null,t!==null?t.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(i&536870912)!==0&&(r.flags&128)===0&&(ka(r),r.subtreeFlags&6&&(r.flags|=8192)):ka(r),i=r.updateQueue,i!==null&&Uc(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==i&&(r.flags|=2048),t!==null&&me(Cl),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),ln(Ka),ka(r),null;case 25:return null;case 30:return null}throw Error(x(156,r.tag))}function iy(t,r){switch(c0(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ln(Ka),Je(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return at(r),null;case 13:if(cn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(x(340));Ki()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return me(Ja),null;case 4:return Je(),null;case 10:return ln(r.type),null;case 22:case 23:return cn(r),j0(),t!==null&&me(Cl),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ln(Ka),null;case 25:return null;default:return null}}function Em(t,r){switch(c0(r),r.tag){case 3:ln(Ka),Je();break;case 26:case 27:case 5:at(r);break;case 4:Je();break;case 13:cn(r);break;case 19:me(Ja);break;case 10:ln(r.type);break;case 22:case 23:cn(r),j0(),t!==null&&me(Cl);break;case 24:ln(Ka)}}function go(t,r){try{var i=r.updateQueue,h=i!==null?i.lastEffect:null;if(h!==null){var w=h.next;i=w;do{if((i.tag&t)===t){h=void 0;var C=i.create,F=i.inst;h=C(),F.destroy=h}i=i.next}while(i!==w)}}catch(K){ha(r,r.return,K)}}function Hn(t,r,i){try{var h=r.updateQueue,w=h!==null?h.lastEffect:null;if(w!==null){var C=w.next;h=C;do{if((h.tag&t)===t){var F=h.inst,K=F.destroy;if(K!==void 0){F.destroy=void 0,w=r;var ue=i,_e=K;try{_e()}catch(Fe){ha(w,ue,Fe)}}}h=h.next}while(h!==C)}}catch(Fe){ha(r,r.return,Fe)}}function _m(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{gh(r,i)}catch(h){ha(t,t.return,h)}}}function Tm(t,r,i){i.props=Al(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(h){ha(t,r,h)}}function po(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var h=t.stateNode;break;case 30:h=t.stateNode;break;default:h=t.stateNode}typeof i=="function"?t.refCleanup=i(h):i.current=h}}catch(w){ha(t,r,w)}}function Ps(t,r){var i=t.ref,h=t.refCleanup;if(i!==null)if(typeof h=="function")try{h()}catch(w){ha(t,r,w)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(w){ha(t,r,w)}else i.current=null}function Mm(t){var r=t.type,i=t.memoizedProps,h=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&h.focus();break e;case"img":i.src?h.src=i.src:i.srcSet&&(h.srcset=i.srcSet)}}catch(w){ha(t,t.return,w)}}function W0(t,r,i){try{var h=t.stateNode;Ey(h,t.type,i,r),h[Sa]=r}catch(w){ha(t,t.return,w)}}function Dm(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Zn(t.type)||t.tag===4}function K0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Dm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Zn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function J0(t,r,i){var h=t.tag;if(h===5||h===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Jc));else if(h!==4&&(h===27&&Zn(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(J0(t,r,i),t=t.sibling;t!==null;)J0(t,r,i),t=t.sibling}function Hc(t,r,i){var h=t.tag;if(h===5||h===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(h!==4&&(h===27&&Zn(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(Hc(t,r,i),t=t.sibling;t!==null;)Hc(t,r,i),t=t.sibling}function Rm(t){var r=t.stateNode,i=t.memoizedProps;try{for(var h=t.type,w=r.attributes;w.length;)r.removeAttributeNode(w[0]);ur(r,h,i),r[ar]=t,r[Sa]=i}catch(C){ha(t,t.return,C)}}var xn=!1,za=!1,eu=!1,Im=typeof WeakSet=="function"?WeakSet:Set,lr=null;function oy(t,r){if(t=t.containerInfo,ku=ld,t=A(t),R(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var h=i.getSelection&&i.getSelection();if(h&&h.rangeCount!==0){i=h.anchorNode;var w=h.anchorOffset,C=h.focusNode;h=h.focusOffset;try{i.nodeType,C.nodeType}catch{i=null;break e}var F=0,K=-1,ue=-1,_e=0,Fe=0,qe=t,De=null;t:for(;;){for(var Ie;qe!==i||w!==0&&qe.nodeType!==3||(K=F+w),qe!==C||h!==0&&qe.nodeType!==3||(ue=F+h),qe.nodeType===3&&(F+=qe.nodeValue.length),(Ie=qe.firstChild)!==null;)De=qe,qe=Ie;for(;;){if(qe===t)break t;if(De===i&&++_e===w&&(K=F),De===C&&++Fe===h&&(ue=F),(Ie=qe.nextSibling)!==null)break;qe=De,De=qe.parentNode}qe=Ie}i=K===-1||ue===-1?null:{start:K,end:ue}}else i=null}i=i||{start:0,end:0}}else i=null;for(Cu={focusedElem:t,selectionRange:i},ld=!1,lr=r;lr!==null;)if(r=lr,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,lr=t;else for(;lr!==null;){switch(r=lr,C=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&C!==null){t=void 0,i=r,w=C.memoizedProps,C=C.memoizedState,h=i.stateNode;try{var pt=Al(i.type,w,i.elementType===i.type);t=h.getSnapshotBeforeUpdate(pt,C),h.__reactInternalSnapshotBeforeUpdate=t}catch(ht){ha(i,i.return,ht)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)Eu(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Eu(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(x(163))}if(t=r.sibling,t!==null){t.return=r.return,lr=t;break}lr=r.return}}function Om(t,r,i){var h=i.flags;switch(i.tag){case 0:case 11:case 15:Vn(t,i),h&4&&go(5,i);break;case 1:if(Vn(t,i),h&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(F){ha(i,i.return,F)}else{var w=Al(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(w,r,t.__reactInternalSnapshotBeforeUpdate)}catch(F){ha(i,i.return,F)}}h&64&&_m(i),h&512&&po(i,i.return);break;case 3:if(Vn(t,i),h&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{gh(t,r)}catch(F){ha(i,i.return,F)}}break;case 27:r===null&&h&4&&Rm(i);case 26:case 5:Vn(t,i),r===null&&h&4&&Mm(i),h&512&&po(i,i.return);break;case 12:Vn(t,i);break;case 13:Vn(t,i),h&4&&zm(t,i),h&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=py.bind(null,i),Oy(t,i))));break;case 22:if(h=i.memoizedState!==null||xn,!h){r=r!==null&&r.memoizedState!==null||za,w=xn;var C=za;xn=h,(za=r)&&!C?qn(t,i,(i.subtreeFlags&8772)!==0):Vn(t,i),xn=w,za=C}break;case 30:break;default:Vn(t,i)}}function Bm(t){var r=t.alternate;r!==null&&(t.alternate=null,Bm(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&ol(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var va=null,Rr=!1;function hn(t,r,i){for(i=i.child;i!==null;)Lm(t,r,i),i=i.sibling}function Lm(t,r,i){if(lt&&typeof lt.onCommitFiberUnmount=="function")try{lt.onCommitFiberUnmount(Le,i)}catch{}switch(i.tag){case 26:za||Ps(i,r),hn(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:za||Ps(i,r);var h=va,w=Rr;Zn(i.type)&&(va=i.stateNode,Rr=!1),hn(t,r,i),So(i.stateNode),va=h,Rr=w;break;case 5:za||Ps(i,r);case 6:if(h=va,w=Rr,va=null,hn(t,r,i),va=h,Rr=w,va!==null)if(Rr)try{(va.nodeType===9?va.body:va.nodeName==="HTML"?va.ownerDocument.body:va).removeChild(i.stateNode)}catch(C){ha(i,r,C)}else try{va.removeChild(i.stateNode)}catch(C){ha(i,r,C)}break;case 18:va!==null&&(Rr?(t=va,Sf(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),Io(t)):Sf(va,i.stateNode));break;case 4:h=va,w=Rr,va=i.stateNode.containerInfo,Rr=!0,hn(t,r,i),va=h,Rr=w;break;case 0:case 11:case 14:case 15:za||Hn(2,i,r),za||Hn(4,i,r),hn(t,r,i);break;case 1:za||(Ps(i,r),h=i.stateNode,typeof h.componentWillUnmount=="function"&&Tm(i,r,h)),hn(t,r,i);break;case 21:hn(t,r,i);break;case 22:za=(h=za)||i.memoizedState!==null,hn(t,r,i),za=h;break;default:hn(t,r,i)}}function zm(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Io(t)}catch(i){ha(r,r.return,i)}}function cy(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Im),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Im),r;default:throw Error(x(435,t.tag))}}function tu(t,r){var i=cy(t);r.forEach(function(h){var w=yy.bind(null,t,h);i.has(h)||(i.add(h),h.then(w,w))})}function Hr(t,r){var i=r.deletions;if(i!==null)for(var h=0;h<i.length;h++){var w=i[h],C=t,F=r,K=F;e:for(;K!==null;){switch(K.tag){case 27:if(Zn(K.type)){va=K.stateNode,Rr=!1;break e}break;case 5:va=K.stateNode,Rr=!1;break e;case 3:case 4:va=K.stateNode.containerInfo,Rr=!0;break e}K=K.return}if(va===null)throw Error(x(160));Lm(C,F,w),va=null,Rr=!1,C=w.alternate,C!==null&&(C.return=null),w.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Fm(r,t),r=r.sibling}var ms=null;function Fm(t,r){var i=t.alternate,h=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Hr(r,t),Vr(t),h&4&&(Hn(3,t,t.return),go(3,t),Hn(5,t,t.return));break;case 1:Hr(r,t),Vr(t),h&512&&(za||i===null||Ps(i,i.return)),h&64&&xn&&(t=t.updateQueue,t!==null&&(h=t.callbacks,h!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?h:i.concat(h))));break;case 26:var w=ms;if(Hr(r,t),Vr(t),h&512&&(za||i===null||Ps(i,i.return)),h&4){var C=i!==null?i.memoizedState:null;if(h=t.memoizedState,i===null)if(h===null)if(t.stateNode===null){e:{h=t.type,i=t.memoizedProps,w=w.ownerDocument||w;t:switch(h){case"title":C=w.getElementsByTagName("title")[0],(!C||C[Jr]||C[ar]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=w.createElement(h),w.head.insertBefore(C,w.querySelector("head > title"))),ur(C,h,i),C[ar]=t,ea(C),h=C;break e;case"link":var F=If("link","href",w).get(h+(i.href||""));if(F){for(var K=0;K<F.length;K++)if(C=F[K],C.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&C.getAttribute("rel")===(i.rel==null?null:i.rel)&&C.getAttribute("title")===(i.title==null?null:i.title)&&C.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){F.splice(K,1);break t}}C=w.createElement(h),ur(C,h,i),w.head.appendChild(C);break;case"meta":if(F=If("meta","content",w).get(h+(i.content||""))){for(K=0;K<F.length;K++)if(C=F[K],C.getAttribute("content")===(i.content==null?null:""+i.content)&&C.getAttribute("name")===(i.name==null?null:i.name)&&C.getAttribute("property")===(i.property==null?null:i.property)&&C.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&C.getAttribute("charset")===(i.charSet==null?null:i.charSet)){F.splice(K,1);break t}}C=w.createElement(h),ur(C,h,i),w.head.appendChild(C);break;default:throw Error(x(468,h))}C[ar]=t,ea(C),h=C}t.stateNode=h}else Of(w,t.type,t.stateNode);else t.stateNode=Rf(w,h,t.memoizedProps);else C!==h?(C===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):C.count--,h===null?Of(w,t.type,t.stateNode):Rf(w,h,t.memoizedProps)):h===null&&t.stateNode!==null&&W0(t,t.memoizedProps,i.memoizedProps)}break;case 27:Hr(r,t),Vr(t),h&512&&(za||i===null||Ps(i,i.return)),i!==null&&h&4&&W0(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Hr(r,t),Vr(t),h&512&&(za||i===null||Ps(i,i.return)),t.flags&32){w=t.stateNode;try{Qa(w,"")}catch(Ie){ha(t,t.return,Ie)}}h&4&&t.stateNode!=null&&(w=t.memoizedProps,W0(t,w,i!==null?i.memoizedProps:w)),h&1024&&(eu=!0);break;case 6:if(Hr(r,t),Vr(t),h&4){if(t.stateNode===null)throw Error(x(162));h=t.memoizedProps,i=t.stateNode;try{i.nodeValue=h}catch(Ie){ha(t,t.return,Ie)}}break;case 3:if(rd=null,w=ms,ms=td(r.containerInfo),Hr(r,t),ms=w,Vr(t),h&4&&i!==null&&i.memoizedState.isDehydrated)try{Io(r.containerInfo)}catch(Ie){ha(t,t.return,Ie)}eu&&(eu=!1,Pm(t));break;case 4:h=ms,ms=td(t.stateNode.containerInfo),Hr(r,t),Vr(t),ms=h;break;case 12:Hr(r,t),Vr(t);break;case 13:Hr(r,t),Vr(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(iu=Ne()),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,tu(t,h)));break;case 22:w=t.memoizedState!==null;var ue=i!==null&&i.memoizedState!==null,_e=xn,Fe=za;if(xn=_e||w,za=Fe||ue,Hr(r,t),za=Fe,xn=_e,Vr(t),h&8192)e:for(r=t.stateNode,r._visibility=w?r._visibility&-2:r._visibility|1,w&&(i===null||ue||xn||za||El(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){ue=i=r;try{if(C=ue.stateNode,w)F=C.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{K=ue.stateNode;var qe=ue.memoizedProps.style,De=qe!=null&&qe.hasOwnProperty("display")?qe.display:null;K.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Ie){ha(ue,ue.return,Ie)}}}else if(r.tag===6){if(i===null){ue=r;try{ue.stateNode.nodeValue=w?"":ue.memoizedProps}catch(Ie){ha(ue,ue.return,Ie)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=t.updateQueue,h!==null&&(i=h.retryQueue,i!==null&&(h.retryQueue=null,tu(t,i))));break;case 19:Hr(r,t),Vr(t),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,tu(t,h)));break;case 30:break;case 21:break;default:Hr(r,t),Vr(t)}}function Vr(t){var r=t.flags;if(r&2){try{for(var i,h=t.return;h!==null;){if(Dm(h)){i=h;break}h=h.return}if(i==null)throw Error(x(160));switch(i.tag){case 27:var w=i.stateNode,C=K0(t);Hc(t,C,w);break;case 5:var F=i.stateNode;i.flags&32&&(Qa(F,""),i.flags&=-33);var K=K0(t);Hc(t,K,F);break;case 3:case 4:var ue=i.stateNode.containerInfo,_e=K0(t);J0(t,_e,ue);break;default:throw Error(x(161))}}catch(Fe){ha(t,t.return,Fe)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Pm(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Pm(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Vn(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Om(t,r.alternate,r),r=r.sibling}function El(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Hn(4,r,r.return),El(r);break;case 1:Ps(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&Tm(r,r.return,i),El(r);break;case 27:So(r.stateNode);case 26:case 5:Ps(r,r.return),El(r);break;case 22:r.memoizedState===null&&El(r);break;case 30:El(r);break;default:El(r)}t=t.sibling}}function qn(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,w=t,C=r,F=C.flags;switch(C.tag){case 0:case 11:case 15:qn(w,C,i),go(4,C);break;case 1:if(qn(w,C,i),h=C,w=h.stateNode,typeof w.componentDidMount=="function")try{w.componentDidMount()}catch(_e){ha(h,h.return,_e)}if(h=C,w=h.updateQueue,w!==null){var K=h.stateNode;try{var ue=w.shared.hiddenCallbacks;if(ue!==null)for(w.shared.hiddenCallbacks=null,w=0;w<ue.length;w++)fh(ue[w],K)}catch(_e){ha(h,h.return,_e)}}i&&F&64&&_m(C),po(C,C.return);break;case 27:Rm(C);case 26:case 5:qn(w,C,i),i&&h===null&&F&4&&Mm(C),po(C,C.return);break;case 12:qn(w,C,i);break;case 13:qn(w,C,i),i&&F&4&&zm(w,C);break;case 22:C.memoizedState===null&&qn(w,C,i),po(C,C.return);break;case 30:break;default:qn(w,C,i)}r=r.sibling}}function au(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&to(i))}function ru(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&to(t))}function Us(t,r,i,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Um(t,r,i,h),r=r.sibling}function Um(t,r,i,h){var w=r.flags;switch(r.tag){case 0:case 11:case 15:Us(t,r,i,h),w&2048&&go(9,r);break;case 1:Us(t,r,i,h);break;case 3:Us(t,r,i,h),w&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&to(t)));break;case 12:if(w&2048){Us(t,r,i,h),t=r.stateNode;try{var C=r.memoizedProps,F=C.id,K=C.onPostCommit;typeof K=="function"&&K(F,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ue){ha(r,r.return,ue)}}else Us(t,r,i,h);break;case 13:Us(t,r,i,h);break;case 23:break;case 22:C=r.stateNode,F=r.alternate,r.memoizedState!==null?C._visibility&2?Us(t,r,i,h):yo(t,r):C._visibility&2?Us(t,r,i,h):(C._visibility|=2,gi(t,r,i,h,(r.subtreeFlags&10256)!==0)),w&2048&&au(F,r);break;case 24:Us(t,r,i,h),w&2048&&ru(r.alternate,r);break;default:Us(t,r,i,h)}}function gi(t,r,i,h,w){for(w=w&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var C=t,F=r,K=i,ue=h,_e=F.flags;switch(F.tag){case 0:case 11:case 15:gi(C,F,K,ue,w),go(8,F);break;case 23:break;case 22:var Fe=F.stateNode;F.memoizedState!==null?Fe._visibility&2?gi(C,F,K,ue,w):yo(C,F):(Fe._visibility|=2,gi(C,F,K,ue,w)),w&&_e&2048&&au(F.alternate,F);break;case 24:gi(C,F,K,ue,w),w&&_e&2048&&ru(F.alternate,F);break;default:gi(C,F,K,ue,w)}r=r.sibling}}function yo(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,h=r,w=h.flags;switch(h.tag){case 22:yo(i,h),w&2048&&au(h.alternate,h);break;case 24:yo(i,h),w&2048&&ru(h.alternate,h);break;default:yo(i,h)}r=r.sibling}}var bo=8192;function pi(t){if(t.subtreeFlags&bo)for(t=t.child;t!==null;)Hm(t),t=t.sibling}function Hm(t){switch(t.tag){case 26:pi(t),t.flags&bo&&t.memoizedState!==null&&$y(ms,t.memoizedState,t.memoizedProps);break;case 5:pi(t);break;case 3:case 4:var r=ms;ms=td(t.stateNode.containerInfo),pi(t),ms=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=bo,bo=16777216,pi(t),bo=r):pi(t));break;default:pi(t)}}function Vm(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function wo(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var h=r[i];lr=h,Gm(h,t)}Vm(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)qm(t),t=t.sibling}function qm(t){switch(t.tag){case 0:case 11:case 15:wo(t),t.flags&2048&&Hn(9,t,t.return);break;case 3:wo(t);break;case 12:wo(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Vc(t)):wo(t);break;default:wo(t)}}function Vc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var h=r[i];lr=h,Gm(h,t)}Vm(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Hn(8,r,r.return),Vc(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Vc(r));break;default:Vc(r)}t=t.sibling}}function Gm(t,r){for(;lr!==null;){var i=lr;switch(i.tag){case 0:case 11:case 15:Hn(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var h=i.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:to(i.memoizedState.cache)}if(h=i.child,h!==null)h.return=i,lr=h;else e:for(i=t;lr!==null;){h=lr;var w=h.sibling,C=h.return;if(Bm(h),h===i){lr=null;break e}if(w!==null){w.return=C,lr=w;break e}lr=C}}}var dy={getCacheForType:function(t){var r=yr(Ka),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i}},uy=typeof WeakMap=="function"?WeakMap:Map,ra=0,fa=null,It=null,qt=0,sa=0,qr=null,Gn=!1,yi=!1,su=!1,mn=0,Ta=0,Yn=0,_l=0,nu=0,ls=0,bi=0,No=null,Ir=null,lu=!1,iu=0,qc=1/0,Gc=null,Xn=null,dr=0,$n=null,wi=null,Ni=0,ou=0,cu=null,Ym=null,vo=0,du=null;function Gr(){if((ra&2)!==0&&qt!==0)return qt&-qt;if($.T!==null){var t=oi;return t!==0?t:pu()}return Qs()}function Xm(){ls===0&&(ls=(qt&536870912)===0||Qt?jn():536870912);var t=ns.current;return t!==null&&(t.flags|=32),ls}function Yr(t,r,i){(t===fa&&(sa===2||sa===9)||t.cancelPendingCommit!==null)&&(vi(t,0),Qn(t,qt,ls,!1)),Lr(t,i),((ra&2)===0||t!==fa)&&(t===fa&&((ra&2)===0&&(_l|=i),Ta===4&&Qn(t,qt,ls,!1)),Hs(t))}function $m(t,r,i){if((ra&6)!==0)throw Error(x(327));var h=!i&&(r&124)===0&&(r&t.expiredLanes)===0||Ve(t,r),w=h?my(t,r):hu(t,r,!0),C=h;do{if(w===0){yi&&!h&&Qn(t,r,0,!1);break}else{if(i=t.current.alternate,C&&!xy(i)){w=hu(t,r,!1),C=!1;continue}if(w===2){if(C=r,t.errorRecoveryDisabledLanes&C)var F=0;else F=t.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){r=F;e:{var K=t;w=No;var ue=K.current.memoizedState.isDehydrated;if(ue&&(vi(K,F).flags|=256),F=hu(K,F,!1),F!==2){if(su&&!ue){K.errorRecoveryDisabledLanes|=C,_l|=C,w=4;break e}C=Ir,Ir=w,C!==null&&(Ir===null?Ir=C:Ir.push.apply(Ir,C))}w=F}if(C=!1,w!==2)continue}}if(w===1){vi(t,0),Qn(t,r,0,!0);break}e:{switch(h=t,C=w,C){case 0:case 1:throw Error(x(345));case 4:if((r&4194048)!==r)break;case 6:Qn(h,r,ls,!Gn);break e;case 2:Ir=null;break;case 3:case 5:break;default:throw Error(x(329))}if((r&62914560)===r&&(w=iu+300-Ne(),10<w)){if(Qn(h,r,ls,!Gn),ot(h,0,!0)!==0)break e;h.timeoutHandle=kf(Qm.bind(null,h,i,Ir,Gc,lu,r,ls,_l,bi,Gn,C,2,-0,0),w);break e}Qm(h,i,Ir,Gc,lu,r,ls,_l,bi,Gn,C,0,-0,0)}}break}while(!0);Hs(t)}function Qm(t,r,i,h,w,C,F,K,ue,_e,Fe,qe,De,Ie){if(t.timeoutHandle=-1,qe=r.subtreeFlags,(qe&8192||(qe&16785408)===16785408)&&(_o={stylesheets:null,count:0,unsuspend:Xy},Hm(r),qe=Qy(),qe!==null)){t.cancelPendingCommit=qe(af.bind(null,t,r,C,i,h,w,F,K,ue,Fe,1,De,Ie)),Qn(t,C,F,!_e);return}af(t,r,C,i,h,w,F,K,ue)}function xy(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var h=0;h<i.length;h++){var w=i[h],C=w.getSnapshot;w=w.value;try{if(!d(C(),w))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Qn(t,r,i,h){r&=~nu,r&=~_l,t.suspendedLanes|=r,t.pingedLanes&=~r,h&&(t.warmLanes|=r),h=t.expirationTimes;for(var w=r;0<w;){var C=31-gt(w),F=1<<C;h[C]=-1,w&=~F}i!==0&&Ui(t,i,r)}function Yc(){return(ra&6)===0?(jo(0),!1):!0}function uu(){if(It!==null){if(sa===0)var t=It.return;else t=It,nn=jl=null,E0(t),mi=null,ho=0,t=It;for(;t!==null;)Em(t.alternate,t),t=t.return;It=null}}function vi(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,Ty(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),uu(),fa=t,It=i=an(t.current,null),qt=r,sa=0,qr=null,Gn=!1,yi=Ve(t,r),su=!1,bi=ls=nu=_l=Yn=Ta=0,Ir=No=null,lu=!1,(r&8)!==0&&(r|=r&32);var h=t.entangledLanes;if(h!==0)for(t=t.entanglements,h&=r;0<h;){var w=31-gt(h),C=1<<w;r|=t[w],h&=~C}return mn=r,mc(),i}function Zm(t,r){_t=null,$.H=Rc,r===ro||r===jc?(r=hh(),sa=3):r===dh?(r=hh(),sa=4):sa=r===mm?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,qr=r,It===null&&(Ta=1,zc(t,ts(r,t.current)))}function Wm(){var t=$.H;return $.H=Rc,t===null?Rc:t}function Km(){var t=$.A;return $.A=dy,t}function xu(){Ta=4,Gn||(qt&4194048)!==qt&&ns.current!==null||(yi=!0),(Yn&134217727)===0&&(_l&134217727)===0||fa===null||Qn(fa,qt,ls,!1)}function hu(t,r,i){var h=ra;ra|=2;var w=Wm(),C=Km();(fa!==t||qt!==r)&&(Gc=null,vi(t,r)),r=!1;var F=Ta;e:do try{if(sa!==0&&It!==null){var K=It,ue=qr;switch(sa){case 8:uu(),F=6;break e;case 3:case 2:case 9:case 6:ns.current===null&&(r=!0);var _e=sa;if(sa=0,qr=null,ji(t,K,ue,_e),i&&yi){F=0;break e}break;default:_e=sa,sa=0,qr=null,ji(t,K,ue,_e)}}hy(),F=Ta;break}catch(Fe){Zm(t,Fe)}while(!0);return r&&t.shellSuspendCounter++,nn=jl=null,ra=h,$.H=w,$.A=C,It===null&&(fa=null,qt=0,mc()),F}function hy(){for(;It!==null;)Jm(It)}function my(t,r){var i=ra;ra|=2;var h=Wm(),w=Km();fa!==t||qt!==r?(Gc=null,qc=Ne()+500,vi(t,r)):yi=Ve(t,r);e:do try{if(sa!==0&&It!==null){r=It;var C=qr;t:switch(sa){case 1:sa=0,qr=null,ji(t,r,C,1);break;case 2:case 9:if(uh(C)){sa=0,qr=null,ef(r);break}r=function(){sa!==2&&sa!==9||fa!==t||(sa=7),Hs(t)},C.then(r,r);break e;case 3:sa=7;break e;case 4:sa=5;break e;case 7:uh(C)?(sa=0,qr=null,ef(r)):(sa=0,qr=null,ji(t,r,C,7));break;case 5:var F=null;switch(It.tag){case 26:F=It.memoizedState;case 5:case 27:var K=It;if(!F||Bf(F)){sa=0,qr=null;var ue=K.sibling;if(ue!==null)It=ue;else{var _e=K.return;_e!==null?(It=_e,Xc(_e)):It=null}break t}}sa=0,qr=null,ji(t,r,C,5);break;case 6:sa=0,qr=null,ji(t,r,C,6);break;case 8:uu(),Ta=6;break e;default:throw Error(x(462))}}fy();break}catch(Fe){Zm(t,Fe)}while(!0);return nn=jl=null,$.H=h,$.A=w,ra=i,It!==null?0:(fa=null,qt=0,mc(),Ta)}function fy(){for(;It!==null&&!He();)Jm(It)}function Jm(t){var r=Sm(t.alternate,t,mn);t.memoizedProps=t.pendingProps,r===null?Xc(t):It=r}function ef(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=wm(i,r,r.pendingProps,r.type,void 0,qt);break;case 11:r=wm(i,r,r.pendingProps,r.type.render,r.ref,qt);break;case 5:E0(r);default:Em(i,r),r=It=th(r,mn),r=Sm(i,r,mn)}t.memoizedProps=t.pendingProps,r===null?Xc(t):It=r}function ji(t,r,i,h){nn=jl=null,E0(r),mi=null,ho=0;var w=r.return;try{if(sy(t,w,r,i,qt)){Ta=1,zc(t,ts(i,t.current)),It=null;return}}catch(C){if(w!==null)throw It=w,C;Ta=1,zc(t,ts(i,t.current)),It=null;return}r.flags&32768?(Qt||h===1?t=!0:yi||(qt&536870912)!==0?t=!1:(Gn=t=!0,(h===2||h===9||h===3||h===6)&&(h=ns.current,h!==null&&h.tag===13&&(h.flags|=16384))),tf(r,t)):Xc(r)}function Xc(t){var r=t;do{if((r.flags&32768)!==0){tf(r,Gn);return}t=r.return;var i=ly(r.alternate,r,mn);if(i!==null){It=i;return}if(r=r.sibling,r!==null){It=r;return}It=r=t}while(r!==null);Ta===0&&(Ta=5)}function tf(t,r){do{var i=iy(t.alternate,t);if(i!==null){i.flags&=32767,It=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){It=t;return}It=t=i}while(t!==null);Ta=6,It=null}function af(t,r,i,h,w,C,F,K,ue){t.cancelPendingCommit=null;do $c();while(dr!==0);if((ra&6)!==0)throw Error(x(327));if(r!==null){if(r===t.current)throw Error(x(177));if(C=r.lanes|r.childLanes,C|=r0,rc(t,i,C,F,K,ue),t===fa&&(It=fa=null,qt=0),wi=r,$n=t,Ni=i,ou=C,cu=w,Ym=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,by(Me,function(){return of(),null})):(t.callbackNode=null,t.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=$.T,$.T=null,w=ne.p,ne.p=2,F=ra,ra|=4;try{oy(t,r,i)}finally{ra=F,ne.p=w,$.T=h}}dr=1,rf(),sf(),nf()}}function rf(){if(dr===1){dr=0;var t=$n,r=wi,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=$.T,$.T=null;var h=ne.p;ne.p=2;var w=ra;ra|=4;try{Fm(r,t);var C=Cu,F=A(t.containerInfo),K=C.focusedElem,ue=C.selectionRange;if(F!==K&&K&&K.ownerDocument&&v(K.ownerDocument.documentElement,K)){if(ue!==null&&R(K)){var _e=ue.start,Fe=ue.end;if(Fe===void 0&&(Fe=_e),"selectionStart"in K)K.selectionStart=_e,K.selectionEnd=Math.min(Fe,K.value.length);else{var qe=K.ownerDocument||document,De=qe&&qe.defaultView||window;if(De.getSelection){var Ie=De.getSelection(),pt=K.textContent.length,ht=Math.min(ue.start,pt),ca=ue.end===void 0?ht:Math.min(ue.end,pt);!Ie.extend&&ht>ca&&(F=ca,ca=ht,ht=F);var ke=p(K,ht),we=p(K,ca);if(ke&&we&&(Ie.rangeCount!==1||Ie.anchorNode!==ke.node||Ie.anchorOffset!==ke.offset||Ie.focusNode!==we.node||Ie.focusOffset!==we.offset)){var Ee=qe.createRange();Ee.setStart(ke.node,ke.offset),Ie.removeAllRanges(),ht>ca?(Ie.addRange(Ee),Ie.extend(we.node,we.offset)):(Ee.setEnd(we.node,we.offset),Ie.addRange(Ee))}}}}for(qe=[],Ie=K;Ie=Ie.parentNode;)Ie.nodeType===1&&qe.push({element:Ie,left:Ie.scrollLeft,top:Ie.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<qe.length;K++){var Pe=qe[K];Pe.element.scrollLeft=Pe.left,Pe.element.scrollTop=Pe.top}}ld=!!ku,Cu=ku=null}finally{ra=w,ne.p=h,$.T=i}}t.current=r,dr=2}}function sf(){if(dr===2){dr=0;var t=$n,r=wi,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=$.T,$.T=null;var h=ne.p;ne.p=2;var w=ra;ra|=4;try{Om(t,r.alternate,r)}finally{ra=w,ne.p=h,$.T=i}}dr=3}}function nf(){if(dr===4||dr===3){dr=0,et();var t=$n,r=wi,i=Ni,h=Ym;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?dr=5:(dr=0,wi=$n=null,lf(t,t.pendingLanes));var w=t.pendingLanes;if(w===0&&(Xn=null),Ua(i),r=r.stateNode,lt&&typeof lt.onCommitFiberRoot=="function")try{lt.onCommitFiberRoot(Le,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=$.T,w=ne.p,ne.p=2,$.T=null;try{for(var C=t.onRecoverableError,F=0;F<h.length;F++){var K=h[F];C(K.value,{componentStack:K.stack})}}finally{$.T=r,ne.p=w}}(Ni&3)!==0&&$c(),Hs(t),w=t.pendingLanes,(i&4194090)!==0&&(w&42)!==0?t===du?vo++:(vo=0,du=t):vo=0,jo(0)}}function lf(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,to(r)))}function $c(t){return rf(),sf(),nf(),of()}function of(){if(dr!==5)return!1;var t=$n,r=ou;ou=0;var i=Ua(Ni),h=$.T,w=ne.p;try{ne.p=32>i?32:i,$.T=null,i=cu,cu=null;var C=$n,F=Ni;if(dr=0,wi=$n=null,Ni=0,(ra&6)!==0)throw Error(x(331));var K=ra;if(ra|=4,qm(C.current),Um(C,C.current,F,i),ra=K,jo(0,!1),lt&&typeof lt.onPostCommitFiberRoot=="function")try{lt.onPostCommitFiberRoot(Le,C)}catch{}return!0}finally{ne.p=w,$.T=h,lf(t,r)}}function cf(t,r,i){r=ts(i,r),r=H0(t.stateNode,r,2),t=zn(t,r,2),t!==null&&(Lr(t,2),Hs(t))}function ha(t,r,i){if(t.tag===3)cf(t,t,i);else for(;r!==null;){if(r.tag===3){cf(r,t,i);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Xn===null||!Xn.has(h))){t=ts(i,t),i=xm(2),h=zn(r,i,2),h!==null&&(hm(i,h,r,t),Lr(h,2),Hs(h));break}}r=r.return}}function mu(t,r,i){var h=t.pingCache;if(h===null){h=t.pingCache=new uy;var w=new Set;h.set(r,w)}else w=h.get(r),w===void 0&&(w=new Set,h.set(r,w));w.has(i)||(su=!0,w.add(i),t=gy.bind(null,t,r,i),r.then(t,t))}function gy(t,r,i){var h=t.pingCache;h!==null&&h.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,fa===t&&(qt&i)===i&&(Ta===4||Ta===3&&(qt&62914560)===qt&&300>Ne()-iu?(ra&2)===0&&vi(t,0):nu|=i,bi===qt&&(bi=0)),Hs(t)}function df(t,r){r===0&&(r=Pi()),t=si(t,r),t!==null&&(Lr(t,r),Hs(t))}function py(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),df(t,i)}function yy(t,r){var i=0;switch(t.tag){case 13:var h=t.stateNode,w=t.memoizedState;w!==null&&(i=w.retryLane);break;case 19:h=t.stateNode;break;case 22:h=t.stateNode._retryCache;break;default:throw Error(x(314))}h!==null&&h.delete(r),df(t,i)}function by(t,r){return ve(t,r)}var Qc=null,ki=null,fu=!1,Zc=!1,gu=!1,Tl=0;function Hs(t){t!==ki&&t.next===null&&(ki===null?Qc=ki=t:ki=ki.next=t),Zc=!0,fu||(fu=!0,Ny())}function jo(t,r){if(!gu&&Zc){gu=!0;do for(var i=!1,h=Qc;h!==null;){if(t!==0){var w=h.pendingLanes;if(w===0)var C=0;else{var F=h.suspendedLanes,K=h.pingedLanes;C=(1<<31-gt(42|t)+1)-1,C&=w&~(F&~K),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(i=!0,mf(h,C))}else C=qt,C=ot(h,h===fa?C:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(C&3)===0||Ve(h,C)||(i=!0,mf(h,C));h=h.next}while(i);gu=!1}}function wy(){uf()}function uf(){Zc=fu=!1;var t=0;Tl!==0&&(_y()&&(t=Tl),Tl=0);for(var r=Ne(),i=null,h=Qc;h!==null;){var w=h.next,C=xf(h,r);C===0?(h.next=null,i===null?Qc=w:i.next=w,w===null&&(ki=i)):(i=h,(t!==0||(C&3)!==0)&&(Zc=!0)),h=w}jo(t)}function xf(t,r){for(var i=t.suspendedLanes,h=t.pingedLanes,w=t.expirationTimes,C=t.pendingLanes&-62914561;0<C;){var F=31-gt(C),K=1<<F,ue=w[F];ue===-1?((K&i)===0||(K&h)!==0)&&(w[F]=st(K,r)):ue<=r&&(t.expiredLanes|=K),C&=~K}if(r=fa,i=qt,i=ot(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),h=t.callbackNode,i===0||t===r&&(sa===2||sa===9)||t.cancelPendingCommit!==null)return h!==null&&h!==null&&he(h),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Ve(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(h!==null&&he(h),Ua(i)){case 2:case 8:i=pe;break;case 32:i=Me;break;case 268435456:i=Ct;break;default:i=Me}return h=hf.bind(null,t),i=ve(i,h),t.callbackPriority=r,t.callbackNode=i,r}return h!==null&&h!==null&&he(h),t.callbackPriority=2,t.callbackNode=null,2}function hf(t,r){if(dr!==0&&dr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if($c()&&t.callbackNode!==i)return null;var h=qt;return h=ot(t,t===fa?h:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),h===0?null:($m(t,h,r),xf(t,Ne()),t.callbackNode!=null&&t.callbackNode===i?hf.bind(null,t):null)}function mf(t,r){if($c())return null;$m(t,r,!0)}function Ny(){My(function(){(ra&6)!==0?ve(oe,wy):uf()})}function pu(){return Tl===0&&(Tl=jn()),Tl}function ff(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ql(""+t)}function gf(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function vy(t,r,i,h,w){if(r==="submit"&&i&&i.stateNode===w){var C=ff((w[Sa]||null).action),F=h.submitter;F&&(r=(r=F[Sa]||null)?ff(r.formAction):F.getAttribute("formAction"),r!==null&&(C=r,F=null));var K=new Is("action","action",null,h,w);t.push({event:K,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Tl!==0){var ue=F?gf(w,F):new FormData(w);L0(i,{pending:!0,data:ue,method:w.method,action:C},null,ue)}}else typeof C=="function"&&(K.preventDefault(),ue=F?gf(w,F):new FormData(w),L0(i,{pending:!0,data:ue,method:w.method,action:C},C,ue))},currentTarget:w}]})}}for(var yu=0;yu<Ls.length;yu++){var bu=Ls[yu],jy=bu.toLowerCase(),ky=bu[0].toUpperCase()+bu.slice(1);Pr(jy,"on"+ky)}Pr(bt,"onAnimationEnd"),Pr(or,"onAnimationIteration"),Pr(Mr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(gr,"onTransitionRun"),Pr(aa,"onTransitionStart"),Pr(Wa,"onTransitionCancel"),Pr(pr,"onTransitionEnd"),Aa("onMouseEnter",["mouseout","mouseover"]),Aa("onMouseLeave",["mouseout","mouseover"]),Aa("onPointerEnter",["pointerout","pointerover"]),Aa("onPointerLeave",["pointerout","pointerover"]),sr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),sr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),sr("onBeforeInput",["compositionend","keypress","textInput","paste"]),sr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),sr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ko));function pf(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var h=t[i],w=h.event;h=h.listeners;e:{var C=void 0;if(r)for(var F=h.length-1;0<=F;F--){var K=h[F],ue=K.instance,_e=K.currentTarget;if(K=K.listener,ue!==C&&w.isPropagationStopped())break e;C=K,w.currentTarget=_e;try{C(w)}catch(Fe){Lc(Fe)}w.currentTarget=null,C=ue}else for(F=0;F<h.length;F++){if(K=h[F],ue=K.instance,_e=K.currentTarget,K=K.listener,ue!==C&&w.isPropagationStopped())break e;C=K,w.currentTarget=_e;try{C(w)}catch(Fe){Lc(Fe)}w.currentTarget=null,C=ue}}}}function Ot(t,r){var i=r[rr];i===void 0&&(i=r[rr]=new Set);var h=t+"__bubble";i.has(h)||(yf(r,t,2,!1),i.add(h))}function wu(t,r,i){var h=0;r&&(h|=4),yf(i,t,h,r)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function Nu(t){if(!t[Wc]){t[Wc]=!0,sc.forEach(function(i){i!=="selectionchange"&&(Cy.has(i)||wu(i,!1,t),wu(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Wc]||(r[Wc]=!0,wu("selectionchange",!1,r))}}function yf(t,r,i,h){switch(Hf(r)){case 2:var w=Ky;break;case 8:w=Jy;break;default:w=Ou}i=w.bind(null,r,i,t),w=void 0,!Nt||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(w=!0),h?w!==void 0?t.addEventListener(r,i,{capture:!0,passive:w}):t.addEventListener(r,i,!0):w!==void 0?t.addEventListener(r,i,{passive:w}):t.addEventListener(r,i,!1)}function vu(t,r,i,h,w){var C=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var F=h.tag;if(F===3||F===4){var K=h.stateNode.containerInfo;if(K===w)break;if(F===4)for(F=h.return;F!==null;){var ue=F.tag;if((ue===3||ue===4)&&F.stateNode.containerInfo===w)return;F=F.return}for(;K!==null;){if(F=Ra(K),F===null)return;if(ue=F.tag,ue===5||ue===6||ue===26||ue===27){h=C=F;continue e}K=K.parentNode}}h=h.return}us(function(){var _e=C,Fe=kn(i),qe=[];e:{var De=tn.get(t);if(De!==void 0){var Ie=Is,pt=t;switch(t){case"keypress":if(Zl(i)===0)break e;case"keydown":case"keyup":Ie=Gi;break;case"focusin":pt="focus",Ie=En;break;case"focusout":pt="blur",Ie=En;break;case"beforeblur":case"afterblur":Ie=En;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ie=oc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ie=Jt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ie=ta;break;case bt:case or:case Mr:Ie=Qd;break;case pr:Ie=Jd;break;case"scroll":case"scrollend":Ie=mr;break;case"wheel":Ie=Js;break;case"copy":case"cut":case"paste":Ie=St;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ie=ml;break;case"toggle":case"beforetoggle":Ie=e0}var ht=(r&4)!==0,ca=!ht&&(t==="scroll"||t==="scrollend"),ke=ht?De!==null?De+"Capture":null:De;ht=[];for(var we=_e,Ee;we!==null;){var Pe=we;if(Ee=Pe.stateNode,Pe=Pe.tag,Pe!==5&&Pe!==26&&Pe!==27||Ee===null||ke===null||(Pe=ut(we,ke),Pe!=null&&ht.push(Co(we,Pe,Ee))),ca)break;we=we.return}0<ht.length&&(De=new Ie(De,pt,null,i,Fe),qe.push({event:De,listeners:ht}))}}if((r&7)===0){e:{if(De=t==="mouseover"||t==="pointerover",Ie=t==="mouseout"||t==="pointerout",De&&i!==cl&&(pt=i.relatedTarget||i.fromElement)&&(Ra(pt)||pt[Cs]))break e;if((Ie||De)&&(De=Fe.window===Fe?Fe:(De=Fe.ownerDocument)?De.defaultView||De.parentWindow:window,Ie?(pt=i.relatedTarget||i.toElement,Ie=_e,pt=pt?Ra(pt):null,pt!==null&&(ca=g(pt),ht=pt.tag,pt!==ca||ht!==5&&ht!==27&&ht!==6)&&(pt=null)):(Ie=null,pt=_e),Ie!==pt)){if(ht=oc,Pe="onMouseLeave",ke="onMouseEnter",we="mouse",(t==="pointerout"||t==="pointerover")&&(ht=ml,Pe="onPointerLeave",ke="onPointerEnter",we="pointer"),ca=Ie==null?De:Ss(Ie),Ee=pt==null?De:Ss(pt),De=new ht(Pe,we+"leave",Ie,i,Fe),De.target=ca,De.relatedTarget=Ee,Pe=null,Ra(Fe)===_e&&(ht=new ht(ke,we+"enter",pt,i,Fe),ht.target=Ee,ht.relatedTarget=ca,Pe=ht),ca=Pe,Ie&&pt)t:{for(ht=Ie,ke=pt,we=0,Ee=ht;Ee;Ee=Ci(Ee))we++;for(Ee=0,Pe=ke;Pe;Pe=Ci(Pe))Ee++;for(;0<we-Ee;)ht=Ci(ht),we--;for(;0<Ee-we;)ke=Ci(ke),Ee--;for(;we--;){if(ht===ke||ke!==null&&ht===ke.alternate)break t;ht=Ci(ht),ke=Ci(ke)}ht=null}else ht=null;Ie!==null&&bf(qe,De,Ie,ht,!1),pt!==null&&ca!==null&&bf(qe,ca,pt,ht,!0)}}e:{if(De=_e?Ss(_e):window,Ie=De.nodeName&&De.nodeName.toLowerCase(),Ie==="select"||Ie==="input"&&De.type==="file")var nt=xc;else if(pl(De))if(Qi)nt=s;else{nt=V;var Mt=ai}else Ie=De.nodeName,!Ie||Ie.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?_e&&ct(_e.elementType)&&(nt=xc):nt=a;if(nt&&(nt=nt(t,_e))){kr(qe,nt,i,Fe);break e}Mt&&Mt(t,De,_e),t==="focusout"&&_e&&De.type==="number"&&_e.memoizedProps.value!=null&&Ae(De,"number",De.value)}switch(Mt=_e?Ss(_e):window,t){case"focusin":(pl(Mt)||Mt.contentEditable==="true")&&(Z=Mt,ie=_e,ge=null);break;case"focusout":ge=ie=Z=null;break;case"mousedown":ye=!0;break;case"contextmenu":case"mouseup":case"dragend":ye=!1,Se(qe,i,Fe);break;case"selectionchange":if(q)break;case"keydown":case"keyup":Se(qe,i,Fe)}var dt;if(fl)e:{switch(t){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Mn?en(t,i)&&(mt="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(mt="onCompositionStart");mt&&(Xi&&i.locale!=="ko"&&(Mn||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Mn&&(dt=Ms()):(Ts=Fe,dl="value"in Ts?Ts.value:Ts.textContent,Mn=!0)),Mt=Kc(_e,mt),0<Mt.length&&(mt=new xl(mt,t,null,i,Fe),qe.push({event:mt,listeners:Mt}),dt?mt.data=dt:(dt=ei(i),dt!==null&&(mt.data=dt)))),(dt=Yi?gl(t,i):t0(t,i))&&(mt=Kc(_e,"onBeforeInput"),0<mt.length&&(Mt=new xl("onBeforeInput","beforeinput",null,i,Fe),qe.push({event:Mt,listeners:mt}),Mt.data=dt)),vy(qe,t,_e,i,Fe)}pf(qe,r)})}function Co(t,r,i){return{instance:t,listener:r,currentTarget:i}}function Kc(t,r){for(var i=r+"Capture",h=[];t!==null;){var w=t,C=w.stateNode;if(w=w.tag,w!==5&&w!==26&&w!==27||C===null||(w=ut(t,i),w!=null&&h.unshift(Co(t,w,C)),w=ut(t,r),w!=null&&h.push(Co(t,w,C))),t.tag===3)return h;t=t.return}return[]}function Ci(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function bf(t,r,i,h,w){for(var C=r._reactName,F=[];i!==null&&i!==h;){var K=i,ue=K.alternate,_e=K.stateNode;if(K=K.tag,ue!==null&&ue===h)break;K!==5&&K!==26&&K!==27||_e===null||(ue=_e,w?(_e=ut(i,C),_e!=null&&F.unshift(Co(i,_e,ue))):w||(_e=ut(i,C),_e!=null&&F.push(Co(i,_e,ue)))),i=i.return}F.length!==0&&t.push({event:r,listeners:F})}var Sy=/\r\n?/g,Ay=/\u0000|\uFFFD/g;function wf(t){return(typeof t=="string"?t:""+t).replace(Sy,`
`).replace(Ay,"")}function Nf(t,r){return r=wf(r),wf(t)===r}function Jc(){}function oa(t,r,i,h,w,C){switch(i){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Qa(t,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Qa(t,""+h);break;case"className":Gl(t,"class",h);break;case"tabIndex":Gl(t,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Gl(t,i,h);break;case"style":jr(t,h,C);break;case"data":if(r!=="object"){Gl(t,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){t.removeAttribute(i);break}h=Ql(""+h),t.setAttribute(i,h);break;case"action":case"formAction":if(typeof h=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(i==="formAction"?(r!=="input"&&oa(t,r,"name",w.name,w,null),oa(t,r,"formEncType",w.formEncType,w,null),oa(t,r,"formMethod",w.formMethod,w,null),oa(t,r,"formTarget",w.formTarget,w,null)):(oa(t,r,"encType",w.encType,w,null),oa(t,r,"method",w.method,w,null),oa(t,r,"target",w.target,w,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){t.removeAttribute(i);break}h=Ql(""+h),t.setAttribute(i,h);break;case"onClick":h!=null&&(t.onclick=Jc);break;case"onScroll":h!=null&&Ot("scroll",t);break;case"onScrollEnd":h!=null&&Ot("scrollend",t);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(x(61));if(i=h.__html,i!=null){if(w.children!=null)throw Error(x(60));t.innerHTML=i}}break;case"multiple":t.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":t.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){t.removeAttribute("xlink:href");break}i=Ql(""+h),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(i,""+h):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":h===!0?t.setAttribute(i,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(i,h):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?t.setAttribute(i,h):t.removeAttribute(i);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?t.removeAttribute(i):t.setAttribute(i,h);break;case"popover":Ot("beforetoggle",t),Ot("toggle",t),Ge(t,"popover",h);break;case"xlinkActuate":Xt(t,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Xt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Xt(t,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Xt(t,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Xt(t,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Xt(t,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Xt(t,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":Ge(t,"is",h);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=pa.get(i)||i,Ge(t,i,h))}}function ju(t,r,i,h,w,C){switch(i){case"style":jr(t,h,C);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(x(61));if(i=h.__html,i!=null){if(w.children!=null)throw Error(x(60));t.innerHTML=i}}break;case"children":typeof h=="string"?Qa(t,h):(typeof h=="number"||typeof h=="bigint")&&Qa(t,""+h);break;case"onScroll":h!=null&&Ot("scroll",t);break;case"onScrollEnd":h!=null&&Ot("scrollend",t);break;case"onClick":h!=null&&(t.onclick=Jc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!nc.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(w=i.endsWith("Capture"),r=i.slice(2,w?i.length-7:void 0),C=t[Sa]||null,C=C!=null?C[i]:null,typeof C=="function"&&t.removeEventListener(r,C,w),typeof h=="function")){typeof C!="function"&&C!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,h,w);break e}i in t?t[i]=h:h===!0?t.setAttribute(i,""):Ge(t,i,h)}}}function ur(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ot("error",t),Ot("load",t);var h=!1,w=!1,C;for(C in i)if(i.hasOwnProperty(C)){var F=i[C];if(F!=null)switch(C){case"src":h=!0;break;case"srcSet":w=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(x(137,r));default:oa(t,r,C,F,i,null)}}w&&oa(t,r,"srcSet",i.srcSet,i,null),h&&oa(t,r,"src",i.src,i,null);return;case"input":Ot("invalid",t);var K=C=F=w=null,ue=null,_e=null;for(h in i)if(i.hasOwnProperty(h)){var Fe=i[h];if(Fe!=null)switch(h){case"name":w=Fe;break;case"type":F=Fe;break;case"checked":ue=Fe;break;case"defaultChecked":_e=Fe;break;case"value":C=Fe;break;case"defaultValue":K=Fe;break;case"children":case"dangerouslySetInnerHTML":if(Fe!=null)throw Error(x(137,r));break;default:oa(t,r,h,Fe,i,null)}}$a(t,C,K,ue,_e,F,w,!1),Xl(t);return;case"select":Ot("invalid",t),h=F=C=null;for(w in i)if(i.hasOwnProperty(w)&&(K=i[w],K!=null))switch(w){case"value":C=K;break;case"defaultValue":F=K;break;case"multiple":h=K;default:oa(t,r,w,K,i,null)}r=C,i=F,t.multiple=!!h,r!=null?se(t,!!h,r,!1):i!=null&&se(t,!!h,i,!0);return;case"textarea":Ot("invalid",t),C=w=h=null;for(F in i)if(i.hasOwnProperty(F)&&(K=i[F],K!=null))switch(F){case"value":h=K;break;case"defaultValue":w=K;break;case"children":C=K;break;case"dangerouslySetInnerHTML":if(K!=null)throw Error(x(91));break;default:oa(t,r,F,K,i,null)}Ia(t,h,w,C),Xl(t);return;case"option":for(ue in i)if(i.hasOwnProperty(ue)&&(h=i[ue],h!=null))switch(ue){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:oa(t,r,ue,h,i,null)}return;case"dialog":Ot("beforetoggle",t),Ot("toggle",t),Ot("cancel",t),Ot("close",t);break;case"iframe":case"object":Ot("load",t);break;case"video":case"audio":for(h=0;h<ko.length;h++)Ot(ko[h],t);break;case"image":Ot("error",t),Ot("load",t);break;case"details":Ot("toggle",t);break;case"embed":case"source":case"link":Ot("error",t),Ot("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(_e in i)if(i.hasOwnProperty(_e)&&(h=i[_e],h!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":throw Error(x(137,r));default:oa(t,r,_e,h,i,null)}return;default:if(ct(r)){for(Fe in i)i.hasOwnProperty(Fe)&&(h=i[Fe],h!==void 0&&ju(t,r,Fe,h,i,void 0));return}}for(K in i)i.hasOwnProperty(K)&&(h=i[K],h!=null&&oa(t,r,K,h,i,null))}function Ey(t,r,i,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var w=null,C=null,F=null,K=null,ue=null,_e=null,Fe=null;for(Ie in i){var qe=i[Ie];if(i.hasOwnProperty(Ie)&&qe!=null)switch(Ie){case"checked":break;case"value":break;case"defaultValue":ue=qe;default:h.hasOwnProperty(Ie)||oa(t,r,Ie,null,h,qe)}}for(var De in h){var Ie=h[De];if(qe=i[De],h.hasOwnProperty(De)&&(Ie!=null||qe!=null))switch(De){case"type":C=Ie;break;case"name":w=Ie;break;case"checked":_e=Ie;break;case"defaultChecked":Fe=Ie;break;case"value":F=Ie;break;case"defaultValue":K=Ie;break;case"children":case"dangerouslySetInnerHTML":if(Ie!=null)throw Error(x(137,r));break;default:Ie!==qe&&oa(t,r,De,Ie,h,qe)}}Kt(t,F,K,ue,_e,Fe,C,w);return;case"select":Ie=F=K=De=null;for(C in i)if(ue=i[C],i.hasOwnProperty(C)&&ue!=null)switch(C){case"value":break;case"multiple":Ie=ue;default:h.hasOwnProperty(C)||oa(t,r,C,null,h,ue)}for(w in h)if(C=h[w],ue=i[w],h.hasOwnProperty(w)&&(C!=null||ue!=null))switch(w){case"value":De=C;break;case"defaultValue":K=C;break;case"multiple":F=C;default:C!==ue&&oa(t,r,w,C,h,ue)}r=K,i=F,h=Ie,De!=null?se(t,!!i,De,!1):!!h!=!!i&&(r!=null?se(t,!!i,r,!0):se(t,!!i,i?[]:"",!1));return;case"textarea":Ie=De=null;for(K in i)if(w=i[K],i.hasOwnProperty(K)&&w!=null&&!h.hasOwnProperty(K))switch(K){case"value":break;case"children":break;default:oa(t,r,K,null,h,w)}for(F in h)if(w=h[F],C=i[F],h.hasOwnProperty(F)&&(w!=null||C!=null))switch(F){case"value":De=w;break;case"defaultValue":Ie=w;break;case"children":break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(x(91));break;default:w!==C&&oa(t,r,F,w,h,C)}it(t,De,Ie);return;case"option":for(var pt in i)if(De=i[pt],i.hasOwnProperty(pt)&&De!=null&&!h.hasOwnProperty(pt))switch(pt){case"selected":t.selected=!1;break;default:oa(t,r,pt,null,h,De)}for(ue in h)if(De=h[ue],Ie=i[ue],h.hasOwnProperty(ue)&&De!==Ie&&(De!=null||Ie!=null))switch(ue){case"selected":t.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:oa(t,r,ue,De,h,Ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ht in i)De=i[ht],i.hasOwnProperty(ht)&&De!=null&&!h.hasOwnProperty(ht)&&oa(t,r,ht,null,h,De);for(_e in h)if(De=h[_e],Ie=i[_e],h.hasOwnProperty(_e)&&De!==Ie&&(De!=null||Ie!=null))switch(_e){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(x(137,r));break;default:oa(t,r,_e,De,h,Ie)}return;default:if(ct(r)){for(var ca in i)De=i[ca],i.hasOwnProperty(ca)&&De!==void 0&&!h.hasOwnProperty(ca)&&ju(t,r,ca,void 0,h,De);for(Fe in h)De=h[Fe],Ie=i[Fe],!h.hasOwnProperty(Fe)||De===Ie||De===void 0&&Ie===void 0||ju(t,r,Fe,De,h,Ie);return}}for(var ke in i)De=i[ke],i.hasOwnProperty(ke)&&De!=null&&!h.hasOwnProperty(ke)&&oa(t,r,ke,null,h,De);for(qe in h)De=h[qe],Ie=i[qe],!h.hasOwnProperty(qe)||De===Ie||De==null&&Ie==null||oa(t,r,qe,De,h,Ie)}var ku=null,Cu=null;function ed(t){return t.nodeType===9?t:t.ownerDocument}function vf(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jf(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Su(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Au=null;function _y(){var t=window.event;return t&&t.type==="popstate"?t===Au?!1:(Au=t,!0):(Au=null,!1)}var kf=typeof setTimeout=="function"?setTimeout:void 0,Ty=typeof clearTimeout=="function"?clearTimeout:void 0,Cf=typeof Promise=="function"?Promise:void 0,My=typeof queueMicrotask=="function"?queueMicrotask:typeof Cf<"u"?function(t){return Cf.resolve(null).then(t).catch(Dy)}:kf;function Dy(t){setTimeout(function(){throw t})}function Zn(t){return t==="head"}function Sf(t,r){var i=r,h=0,w=0;do{var C=i.nextSibling;if(t.removeChild(i),C&&C.nodeType===8)if(i=C.data,i==="/$"){if(0<h&&8>h){i=h;var F=t.ownerDocument;if(i&1&&So(F.documentElement),i&2&&So(F.body),i&4)for(i=F.head,So(i),F=i.firstChild;F;){var K=F.nextSibling,ue=F.nodeName;F[Jr]||ue==="SCRIPT"||ue==="STYLE"||ue==="LINK"&&F.rel.toLowerCase()==="stylesheet"||i.removeChild(F),F=K}}if(w===0){t.removeChild(C),Io(r);return}w--}else i==="$"||i==="$?"||i==="$!"?w++:h=i.charCodeAt(0)-48;else h=0;i=C}while(i);Io(r)}function Eu(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Eu(i),ol(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function Ry(t,r,i,h){for(;t.nodeType===1;){var w=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(h){if(!t[Jr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(C=t.getAttribute("rel"),C==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(C!==w.rel||t.getAttribute("href")!==(w.href==null||w.href===""?null:w.href)||t.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin)||t.getAttribute("title")!==(w.title==null?null:w.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(C=t.getAttribute("src"),(C!==(w.src==null?null:w.src)||t.getAttribute("type")!==(w.type==null?null:w.type)||t.getAttribute("crossorigin")!==(w.crossOrigin==null?null:w.crossOrigin))&&C&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var C=w.name==null?null:""+w.name;if(w.type==="hidden"&&t.getAttribute("name")===C)return t}else return t;if(t=fs(t.nextSibling),t===null)break}return null}function Iy(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=fs(t.nextSibling),t===null))return null;return t}function _u(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function Oy(t,r){var i=t.ownerDocument;if(t.data!=="$?"||i.readyState==="complete")r();else{var h=function(){r(),i.removeEventListener("DOMContentLoaded",h)};i.addEventListener("DOMContentLoaded",h),t._reactRetry=h}}function fs(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var Tu=null;function Af(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return t;r--}else i==="/$"&&r++}t=t.previousSibling}return null}function Ef(t,r,i){switch(r=ed(i),t){case"html":if(t=r.documentElement,!t)throw Error(x(452));return t;case"head":if(t=r.head,!t)throw Error(x(453));return t;case"body":if(t=r.body,!t)throw Error(x(454));return t;default:throw Error(x(451))}}function So(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);ol(t)}var is=new Map,_f=new Set;function td(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var fn=ne.d;ne.d={f:By,r:Ly,D:zy,C:Fy,L:Py,m:Uy,X:Vy,S:Hy,M:qy};function By(){var t=fn.f(),r=Yc();return t||r}function Ly(t){var r=zr(t);r!==null&&r.tag===5&&r.type==="form"?$h(r):fn.r(t)}var Si=typeof document>"u"?null:document;function Tf(t,r,i){var h=Si;if(h&&typeof r=="string"&&r){var w=Xa(r);w='link[rel="'+t+'"][href="'+w+'"]',typeof i=="string"&&(w+='[crossorigin="'+i+'"]'),_f.has(w)||(_f.add(w),t={rel:t,crossOrigin:i,href:r},h.querySelector(w)===null&&(r=h.createElement("link"),ur(r,"link",t),ea(r),h.head.appendChild(r)))}}function zy(t){fn.D(t),Tf("dns-prefetch",t,null)}function Fy(t,r){fn.C(t,r),Tf("preconnect",t,r)}function Py(t,r,i){fn.L(t,r,i);var h=Si;if(h&&t&&r){var w='link[rel="preload"][as="'+Xa(r)+'"]';r==="image"&&i&&i.imageSrcSet?(w+='[imagesrcset="'+Xa(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(w+='[imagesizes="'+Xa(i.imageSizes)+'"]')):w+='[href="'+Xa(t)+'"]';var C=w;switch(r){case"style":C=Ai(t);break;case"script":C=Ei(t)}is.has(C)||(t=S({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),is.set(C,t),h.querySelector(w)!==null||r==="style"&&h.querySelector(Ao(C))||r==="script"&&h.querySelector(Eo(C))||(r=h.createElement("link"),ur(r,"link",t),ea(r),h.head.appendChild(r)))}}function Uy(t,r){fn.m(t,r);var i=Si;if(i&&t){var h=r&&typeof r.as=="string"?r.as:"script",w='link[rel="modulepreload"][as="'+Xa(h)+'"][href="'+Xa(t)+'"]',C=w;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Ei(t)}if(!is.has(C)&&(t=S({rel:"modulepreload",href:t},r),is.set(C,t),i.querySelector(w)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Eo(C)))return}h=i.createElement("link"),ur(h,"link",t),ea(h),i.head.appendChild(h)}}}function Hy(t,r,i){fn.S(t,r,i);var h=Si;if(h&&t){var w=cs(h).hoistableStyles,C=Ai(t);r=r||"default";var F=w.get(C);if(!F){var K={loading:0,preload:null};if(F=h.querySelector(Ao(C)))K.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":r},i),(i=is.get(C))&&Mu(t,i);var ue=F=h.createElement("link");ea(ue),ur(ue,"link",t),ue._p=new Promise(function(_e,Fe){ue.onload=_e,ue.onerror=Fe}),ue.addEventListener("load",function(){K.loading|=1}),ue.addEventListener("error",function(){K.loading|=2}),K.loading|=4,ad(F,r,h)}F={type:"stylesheet",instance:F,count:1,state:K},w.set(C,F)}}}function Vy(t,r){fn.X(t,r);var i=Si;if(i&&t){var h=cs(i).hoistableScripts,w=Ei(t),C=h.get(w);C||(C=i.querySelector(Eo(w)),C||(t=S({src:t,async:!0},r),(r=is.get(w))&&Du(t,r),C=i.createElement("script"),ea(C),ur(C,"link",t),i.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},h.set(w,C))}}function qy(t,r){fn.M(t,r);var i=Si;if(i&&t){var h=cs(i).hoistableScripts,w=Ei(t),C=h.get(w);C||(C=i.querySelector(Eo(w)),C||(t=S({src:t,async:!0,type:"module"},r),(r=is.get(w))&&Du(t,r),C=i.createElement("script"),ea(C),ur(C,"link",t),i.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},h.set(w,C))}}function Mf(t,r,i,h){var w=(w=xe.current)?td(w):null;if(!w)throw Error(x(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=Ai(i.href),i=cs(w).hoistableStyles,h=i.get(r),h||(h={type:"style",instance:null,count:0,state:null},i.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=Ai(i.href);var C=cs(w).hoistableStyles,F=C.get(t);if(F||(w=w.ownerDocument||w,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(t,F),(C=w.querySelector(Ao(t)))&&!C._p&&(F.instance=C,F.state.loading=5),is.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},is.set(t,i),C||Gy(w,t,i,F.state))),r&&h===null)throw Error(x(528,""));return F}if(r&&h!==null)throw Error(x(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ei(i),i=cs(w).hoistableScripts,h=i.get(r),h||(h={type:"script",instance:null,count:0,state:null},i.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(x(444,t))}}function Ai(t){return'href="'+Xa(t)+'"'}function Ao(t){return'link[rel="stylesheet"]['+t+"]"}function Df(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Gy(t,r,i,h){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=t.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),ur(r,"link",i),ea(r),t.head.appendChild(r))}function Ei(t){return'[src="'+Xa(t)+'"]'}function Eo(t){return"script[async]"+t}function Rf(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var h=t.querySelector('style[data-href~="'+Xa(i.href)+'"]');if(h)return r.instance=h,ea(h),h;var w=S({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return h=(t.ownerDocument||t).createElement("style"),ea(h),ur(h,"style",w),ad(h,i.precedence,t),r.instance=h;case"stylesheet":w=Ai(i.href);var C=t.querySelector(Ao(w));if(C)return r.state.loading|=4,r.instance=C,ea(C),C;h=Df(i),(w=is.get(w))&&Mu(h,w),C=(t.ownerDocument||t).createElement("link"),ea(C);var F=C;return F._p=new Promise(function(K,ue){F.onload=K,F.onerror=ue}),ur(C,"link",h),r.state.loading|=4,ad(C,i.precedence,t),r.instance=C;case"script":return C=Ei(i.src),(w=t.querySelector(Eo(C)))?(r.instance=w,ea(w),w):(h=i,(w=is.get(C))&&(h=S({},i),Du(h,w)),t=t.ownerDocument||t,w=t.createElement("script"),ea(w),ur(w,"link",h),t.head.appendChild(w),r.instance=w);case"void":return null;default:throw Error(x(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,ad(h,i.precedence,t));return r.instance}function ad(t,r,i){for(var h=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),w=h.length?h[h.length-1]:null,C=w,F=0;F<h.length;F++){var K=h[F];if(K.dataset.precedence===r)C=K;else if(C!==w)break}C?C.parentNode.insertBefore(t,C.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function Mu(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Du(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var rd=null;function If(t,r,i){if(rd===null){var h=new Map,w=rd=new Map;w.set(i,h)}else w=rd,h=w.get(i),h||(h=new Map,w.set(i,h));if(h.has(t))return h;for(h.set(t,null),i=i.getElementsByTagName(t),w=0;w<i.length;w++){var C=i[w];if(!(C[Jr]||C[ar]||t==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var F=C.getAttribute(r)||"";F=t+F;var K=h.get(F);K?K.push(C):h.set(F,[C])}}return h}function Of(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function Yy(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Bf(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var _o=null;function Xy(){}function $y(t,r,i){if(_o===null)throw Error(x(475));var h=_o;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var w=Ai(i.href),C=t.querySelector(Ao(w));if(C){t=C._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(h.count++,h=sd.bind(h),t.then(h,h)),r.state.loading|=4,r.instance=C,ea(C);return}C=t.ownerDocument||t,i=Df(i),(w=is.get(w))&&Mu(i,w),C=C.createElement("link"),ea(C);var F=C;F._p=new Promise(function(K,ue){F.onload=K,F.onerror=ue}),ur(C,"link",i),r.instance=C}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=sd.bind(h),t.addEventListener("load",r),t.addEventListener("error",r))}}function Qy(){if(_o===null)throw Error(x(475));var t=_o;return t.stylesheets&&t.count===0&&Ru(t,t.stylesheets),0<t.count?function(r){var i=setTimeout(function(){if(t.stylesheets&&Ru(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(i)}}:null}function sd(){if(this.count--,this.count===0){if(this.stylesheets)Ru(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var nd=null;function Ru(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,nd=new Map,r.forEach(Zy,t),nd=null,sd.call(t))}function Zy(t,r){if(!(r.state.loading&4)){var i=nd.get(t);if(i)var h=i.get(null);else{i=new Map,nd.set(t,i);for(var w=t.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<w.length;C++){var F=w[C];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(i.set(F.dataset.precedence,F),h=F)}h&&i.set(null,h)}w=r.instance,F=w.getAttribute("data-precedence"),C=i.get(F)||h,C===h&&i.set(null,w),i.set(F,w),this.count++,h=sd.bind(this),w.addEventListener("load",h),w.addEventListener("error",h),C?C.parentNode.insertBefore(w,C.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(w,t.firstChild)),r.state.loading|=4}}var To={$$typeof:D,Provider:null,Consumer:null,_currentValue:de,_currentValue2:de,_threadCount:0};function Wy(t,r,i,h,w,C,F,K){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Pt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pt(0),this.hiddenUpdates=Pt(null),this.identifierPrefix=h,this.onUncaughtError=w,this.onCaughtError=C,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function Lf(t,r,i,h,w,C,F,K,ue,_e,Fe,qe){return t=new Wy(t,r,i,F,K,ue,_e,qe),r=1,C===!0&&(r|=24),C=Ur(3,null,null,r),t.current=C,C.stateNode=t,r=m0(),r.refCount++,t.pooledCache=r,r.refCount++,C.memoizedState={element:h,isDehydrated:i,cache:r},y0(C),t}function zf(t){return t?(t=ni,t):ni}function Ff(t,r,i,h,w,C){w=zf(w),h.context===null?h.context=w:h.pendingContext=w,h=Ln(r),h.payload={element:i},C=C===void 0?null:C,C!==null&&(h.callback=C),i=zn(t,h,r),i!==null&&(Yr(i,t,r),no(i,t,r))}function Pf(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Iu(t,r){Pf(t,r),(t=t.alternate)&&Pf(t,r)}function Uf(t){if(t.tag===13){var r=si(t,67108864);r!==null&&Yr(r,t,67108864),Iu(t,67108864)}}var ld=!0;function Ky(t,r,i,h){var w=$.T;$.T=null;var C=ne.p;try{ne.p=2,Ou(t,r,i,h)}finally{ne.p=C,$.T=w}}function Jy(t,r,i,h){var w=$.T;$.T=null;var C=ne.p;try{ne.p=8,Ou(t,r,i,h)}finally{ne.p=C,$.T=w}}function Ou(t,r,i,h){if(ld){var w=Bu(h);if(w===null)vu(t,r,h,id,i),Vf(t,h);else if(tb(w,t,r,i,h))h.stopPropagation();else if(Vf(t,h),r&4&&-1<eb.indexOf(t)){for(;w!==null;){var C=zr(w);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var F=Yt(C.pendingLanes);if(F!==0){var K=C;for(K.pendingLanes|=2,K.entangledLanes|=2;F;){var ue=1<<31-gt(F);K.entanglements[1]|=ue,F&=~ue}Hs(C),(ra&6)===0&&(qc=Ne()+500,jo(0))}}break;case 13:K=si(C,2),K!==null&&Yr(K,C,2),Yc(),Iu(C,2)}if(C=Bu(h),C===null&&vu(t,r,h,id,i),C===w)break;w=C}w!==null&&h.stopPropagation()}else vu(t,r,h,null,i)}}function Bu(t){return t=kn(t),Lu(t)}var id=null;function Lu(t){if(id=null,t=Ra(t),t!==null){var r=g(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=y(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return id=t,null}function Hf(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Te()){case oe:return 2;case pe:return 8;case Me:case jt:return 32;case Ct:return 268435456;default:return 32}default:return 32}}var zu=!1,Wn=null,Kn=null,Jn=null,Mo=new Map,Do=new Map,el=[],eb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vf(t,r){switch(t){case"focusin":case"focusout":Wn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Jn=null;break;case"pointerover":case"pointerout":Mo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Do.delete(r.pointerId)}}function Ro(t,r,i,h,w,C){return t===null||t.nativeEvent!==C?(t={blockedOn:r,domEventName:i,eventSystemFlags:h,nativeEvent:C,targetContainers:[w]},r!==null&&(r=zr(r),r!==null&&Uf(r)),t):(t.eventSystemFlags|=h,r=t.targetContainers,w!==null&&r.indexOf(w)===-1&&r.push(w),t)}function tb(t,r,i,h,w){switch(r){case"focusin":return Wn=Ro(Wn,t,r,i,h,w),!0;case"dragenter":return Kn=Ro(Kn,t,r,i,h,w),!0;case"mouseover":return Jn=Ro(Jn,t,r,i,h,w),!0;case"pointerover":var C=w.pointerId;return Mo.set(C,Ro(Mo.get(C)||null,t,r,i,h,w)),!0;case"gotpointercapture":return C=w.pointerId,Do.set(C,Ro(Do.get(C)||null,t,r,i,h,w)),!0}return!1}function qf(t){var r=Ra(t.target);if(r!==null){var i=g(r);if(i!==null){if(r=i.tag,r===13){if(r=y(i),r!==null){t.blockedOn=r,ql(t.priority,function(){if(i.tag===13){var h=Gr();h=il(h);var w=si(i,h);w!==null&&Yr(w,i,h),Iu(i,h)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function od(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=Bu(t.nativeEvent);if(i===null){i=t.nativeEvent;var h=new i.constructor(i.type,i);cl=h,i.target.dispatchEvent(h),cl=null}else return r=zr(i),r!==null&&Uf(r),t.blockedOn=i,!1;r.shift()}return!0}function Gf(t,r,i){od(t)&&i.delete(r)}function ab(){zu=!1,Wn!==null&&od(Wn)&&(Wn=null),Kn!==null&&od(Kn)&&(Kn=null),Jn!==null&&od(Jn)&&(Jn=null),Mo.forEach(Gf),Do.forEach(Gf)}function cd(t,r){t.blockedOn===r&&(t.blockedOn=null,zu||(zu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,ab)))}var dd=null;function Yf(t){dd!==t&&(dd=t,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){dd===t&&(dd=null);for(var r=0;r<t.length;r+=3){var i=t[r],h=t[r+1],w=t[r+2];if(typeof h!="function"){if(Lu(h||i)===null)continue;break}var C=zr(i);C!==null&&(t.splice(r,3),r-=3,L0(C,{pending:!0,data:w,method:i.method,action:h},h,w))}}))}function Io(t){function r(ue){return cd(ue,t)}Wn!==null&&cd(Wn,t),Kn!==null&&cd(Kn,t),Jn!==null&&cd(Jn,t),Mo.forEach(r),Do.forEach(r);for(var i=0;i<el.length;i++){var h=el[i];h.blockedOn===t&&(h.blockedOn=null)}for(;0<el.length&&(i=el[0],i.blockedOn===null);)qf(i),i.blockedOn===null&&el.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(h=0;h<i.length;h+=3){var w=i[h],C=i[h+1],F=w[Sa]||null;if(typeof C=="function")F||Yf(i);else if(F){var K=null;if(C&&C.hasAttribute("formAction")){if(w=C,F=C[Sa]||null)K=F.formAction;else if(Lu(w)!==null)continue}else K=F.action;typeof K=="function"?i[h+1]=K:(i.splice(h,3),h-=3),Yf(i)}}}function Fu(t){this._internalRoot=t}ud.prototype.render=Fu.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(x(409));var i=r.current,h=Gr();Ff(i,h,t,r,null,null)},ud.prototype.unmount=Fu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ff(t.current,2,null,t,null,null),Yc(),r[Cs]=null}};function ud(t){this._internalRoot=t}ud.prototype.unstable_scheduleHydration=function(t){if(t){var r=Qs();t={blockedOn:null,target:t,priority:r};for(var i=0;i<el.length&&r!==0&&r<el[i].priority;i++);el.splice(i,0,t),i===0&&qf(t)}};var Xf=c.version;if(Xf!=="19.1.1")throw Error(x(527,Xf,"19.1.1"));ne.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(x(188)):(t=Object.keys(t).join(","),Error(x(268,t)));return t=k(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var rb={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xd.isDisabled&&xd.supportsFiber)try{Le=xd.inject(rb),lt=xd}catch{}}return Bo.createRoot=function(t,r){if(!f(t))throw Error(x(299));var i=!1,h="",w=om,C=cm,F=dm,K=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(w=r.onUncaughtError),r.onCaughtError!==void 0&&(C=r.onCaughtError),r.onRecoverableError!==void 0&&(F=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(K=r.unstable_transitionCallbacks)),r=Lf(t,1,!1,null,null,i,h,w,C,F,K,null),t[Cs]=r.current,Nu(t),new Fu(r)},Bo.hydrateRoot=function(t,r,i){if(!f(t))throw Error(x(299));var h=!1,w="",C=om,F=cm,K=dm,ue=null,_e=null;return i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(w=i.identifierPrefix),i.onUncaughtError!==void 0&&(C=i.onUncaughtError),i.onCaughtError!==void 0&&(F=i.onCaughtError),i.onRecoverableError!==void 0&&(K=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(ue=i.unstable_transitionCallbacks),i.formState!==void 0&&(_e=i.formState)),r=Lf(t,1,!0,r,i??null,h,w,C,F,K,ue,_e),r.context=zf(null),i=r.current,h=Gr(),h=il(h),w=Ln(h),w.callback=null,zn(i,w,h),i=h,r.current.lanes=i,Lr(r,i),Hs(r),t[Cs]=r.current,Nu(t),new ud(r)},Bo.version="19.1.1",Bo}var rg;function mb(){if(rg)return Hu.exports;rg=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(c){console.error(c)}}return n(),Hu.exports=hb(),Hu.exports}var fb=mb();const gb=Dd(fb);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var sg="popstate";function pb(n={}){function c(x,f){let{pathname:g,search:y,hash:j}=x.location;return Nx("",{pathname:g,search:y,hash:j},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function o(x,f){return typeof f=="string"?f:Uo(f)}return bb(c,o,null,n)}function Ca(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function ps(n,c){if(!n){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function yb(){return Math.random().toString(36).substring(2,10)}function ng(n,c){return{usr:n.state,key:n.key,idx:c}}function Nx(n,c,o=null,x){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof c=="string"?Oi(c):c,state:o,key:c&&c.key||x||yb()}}function Uo({pathname:n="/",search:c="",hash:o=""}){return c&&c!=="?"&&(n+=c.charAt(0)==="?"?c:"?"+c),o&&o!=="#"&&(n+=o.charAt(0)==="#"?o:"#"+o),n}function Oi(n){let c={};if(n){let o=n.indexOf("#");o>=0&&(c.hash=n.substring(o),n=n.substring(0,o));let x=n.indexOf("?");x>=0&&(c.search=n.substring(x),n=n.substring(0,x)),n&&(c.pathname=n)}return c}function bb(n,c,o,x={}){let{window:f=document.defaultView,v5Compat:g=!1}=x,y=f.history,j="POP",k=null,b=S();b==null&&(b=0,y.replaceState({...y.state,idx:b},""));function S(){return(y.state||{idx:null}).idx}function E(){j="POP";let z=S(),I=z==null?null:z-b;b=z,k&&k({action:j,location:M.location,delta:I})}function _(z,I){j="PUSH";let L=Nx(M.location,z,I);b=S()+1;let D=ng(L,b),B=M.createHref(L);try{y.pushState(D,"",B)}catch(Y){if(Y instanceof DOMException&&Y.name==="DataCloneError")throw Y;f.location.assign(B)}g&&k&&k({action:j,location:M.location,delta:1})}function T(z,I){j="REPLACE";let L=Nx(M.location,z,I);b=S();let D=ng(L,b),B=M.createHref(L);y.replaceState(D,"",B),g&&k&&k({action:j,location:M.location,delta:0})}function O(z){return wb(z)}let M={get action(){return j},get location(){return n(f,y)},listen(z){if(k)throw new Error("A history only accepts one active listener");return f.addEventListener(sg,E),k=z,()=>{f.removeEventListener(sg,E),k=null}},createHref(z){return c(f,z)},createURL:O,encodeLocation(z){let I=O(z);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:_,replace:T,go(z){return y.go(z)}};return M}function wb(n,c=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Ca(o,"No window.location.(origin|href) available to create URL");let x=typeof n=="string"?n:Uo(n);return x=x.replace(/ $/,"%20"),!c&&x.startsWith("//")&&(x=o+x),new URL(x,o)}function wp(n,c,o="/"){return Nb(n,c,o,!1)}function Nb(n,c,o,x){let f=typeof c=="string"?Oi(c):c,g=yn(f.pathname||"/",o);if(g==null)return null;let y=Np(n);vb(y);let j=null;for(let k=0;j==null&&k<y.length;++k){let b=Rb(g);j=Mb(y[k],b,x)}return j}function Np(n,c=[],o=[],x=""){let f=(g,y,j)=>{let k={relativePath:j===void 0?g.path||"":j,caseSensitive:g.caseSensitive===!0,childrenIndex:y,route:g};k.relativePath.startsWith("/")&&(Ca(k.relativePath.startsWith(x),`Absolute route path "${k.relativePath}" nested under path "${x}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),k.relativePath=k.relativePath.slice(x.length));let b=pn([x,k.relativePath]),S=o.concat(k);g.children&&g.children.length>0&&(Ca(g.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),Np(g.children,c,S,b)),!(g.path==null&&!g.index)&&c.push({path:b,score:_b(b,g.index),routesMeta:S})};return n.forEach((g,y)=>{if(g.path===""||!g.path?.includes("?"))f(g,y);else for(let j of vp(g.path))f(g,y,j)}),c}function vp(n){let c=n.split("/");if(c.length===0)return[];let[o,...x]=c,f=o.endsWith("?"),g=o.replace(/\?$/,"");if(x.length===0)return f?[g,""]:[g];let y=vp(x.join("/")),j=[];return j.push(...y.map(k=>k===""?g:[g,k].join("/"))),f&&j.push(...y),j.map(k=>n.startsWith("/")&&k===""?"/":k)}function vb(n){n.sort((c,o)=>c.score!==o.score?o.score-c.score:Tb(c.routesMeta.map(x=>x.childrenIndex),o.routesMeta.map(x=>x.childrenIndex)))}var jb=/^:[\w-]+$/,kb=3,Cb=2,Sb=1,Ab=10,Eb=-2,lg=n=>n==="*";function _b(n,c){let o=n.split("/"),x=o.length;return o.some(lg)&&(x+=Eb),c&&(x+=Cb),o.filter(f=>!lg(f)).reduce((f,g)=>f+(jb.test(g)?kb:g===""?Sb:Ab),x)}function Tb(n,c){return n.length===c.length&&n.slice(0,-1).every((x,f)=>x===c[f])?n[n.length-1]-c[c.length-1]:0}function Mb(n,c,o=!1){let{routesMeta:x}=n,f={},g="/",y=[];for(let j=0;j<x.length;++j){let k=x[j],b=j===x.length-1,S=g==="/"?c:c.slice(g.length)||"/",E=vd({path:k.relativePath,caseSensitive:k.caseSensitive,end:b},S),_=k.route;if(!E&&b&&o&&!x[x.length-1].route.index&&(E=vd({path:k.relativePath,caseSensitive:k.caseSensitive,end:!1},S)),!E)return null;Object.assign(f,E.params),y.push({params:f,pathname:pn([g,E.pathname]),pathnameBase:Lb(pn([g,E.pathnameBase])),route:_}),E.pathnameBase!=="/"&&(g=pn([g,E.pathnameBase]))}return y}function vd(n,c){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[o,x]=Db(n.path,n.caseSensitive,n.end),f=c.match(o);if(!f)return null;let g=f[0],y=g.replace(/(.)\/+$/,"$1"),j=f.slice(1);return{params:x.reduce((b,{paramName:S,isOptional:E},_)=>{if(S==="*"){let O=j[_]||"";y=g.slice(0,g.length-O.length).replace(/(.)\/+$/,"$1")}const T=j[_];return E&&!T?b[S]=void 0:b[S]=(T||"").replace(/%2F/g,"/"),b},{}),pathname:g,pathnameBase:y,pattern:n}}function Db(n,c=!1,o=!0){ps(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let x=[],f="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,j,k)=>(x.push({paramName:j,isOptional:k!=null}),k?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(x.push({paramName:"*"}),f+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?f+="\\/*$":n!==""&&n!=="/"&&(f+="(?:(?=\\/|$))"),[new RegExp(f,c?void 0:"i"),x]}function Rb(n){try{return n.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return ps(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),n}}function yn(n,c){if(c==="/")return n;if(!n.toLowerCase().startsWith(c.toLowerCase()))return null;let o=c.endsWith("/")?c.length-1:c.length,x=n.charAt(o);return x&&x!=="/"?null:n.slice(o)||"/"}function Ib(n,c="/"){let{pathname:o,search:x="",hash:f=""}=typeof n=="string"?Oi(n):n;return{pathname:o?o.startsWith("/")?o:Ob(o,c):c,search:zb(x),hash:Fb(f)}}function Ob(n,c){let o=c.replace(/\/+$/,"").split("/");return n.split("/").forEach(f=>{f===".."?o.length>1&&o.pop():f!=="."&&o.push(f)}),o.length>1?o.join("/"):"/"}function Yu(n,c,o,x){return`Cannot include a '${n}' character in a manually specified \`to.${c}\` field [${JSON.stringify(x)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Bb(n){return n.filter((c,o)=>o===0||c.route.path&&c.route.path.length>0)}function jp(n){let c=Bb(n);return c.map((o,x)=>x===c.length-1?o.pathname:o.pathnameBase)}function kp(n,c,o,x=!1){let f;typeof n=="string"?f=Oi(n):(f={...n},Ca(!f.pathname||!f.pathname.includes("?"),Yu("?","pathname","search",f)),Ca(!f.pathname||!f.pathname.includes("#"),Yu("#","pathname","hash",f)),Ca(!f.search||!f.search.includes("#"),Yu("#","search","hash",f)));let g=n===""||f.pathname==="",y=g?"/":f.pathname,j;if(y==null)j=o;else{let E=c.length-1;if(!x&&y.startsWith("..")){let _=y.split("/");for(;_[0]==="..";)_.shift(),E-=1;f.pathname=_.join("/")}j=E>=0?c[E]:"/"}let k=Ib(f,j),b=y&&y!=="/"&&y.endsWith("/"),S=(g||y===".")&&o.endsWith("/");return!k.pathname.endsWith("/")&&(b||S)&&(k.pathname+="/"),k}var pn=n=>n.join("/").replace(/\/\/+/g,"/"),Lb=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),zb=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Fb=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Pb(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var Cp=["POST","PUT","PATCH","DELETE"];new Set(Cp);var Ub=["GET",...Cp];new Set(Ub);var Bi=N.createContext(null);Bi.displayName="DataRouter";var Rd=N.createContext(null);Rd.displayName="DataRouterState";N.createContext(!1);var Sp=N.createContext({isTransitioning:!1});Sp.displayName="ViewTransition";var Hb=N.createContext(new Map);Hb.displayName="Fetchers";var Vb=N.createContext(null);Vb.displayName="Await";var Xs=N.createContext(null);Xs.displayName="Navigation";var Yo=N.createContext(null);Yo.displayName="Location";var $s=N.createContext({outlet:null,matches:[],isDataRoute:!1});$s.displayName="Route";var Ux=N.createContext(null);Ux.displayName="RouteError";function qb(n,{relative:c}={}){Ca(Xo(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:x}=N.useContext(Xs),{hash:f,pathname:g,search:y}=$o(n,{relative:c}),j=g;return o!=="/"&&(j=g==="/"?o:pn([o,g])),x.createHref({pathname:j,search:y,hash:f})}function Xo(){return N.useContext(Yo)!=null}function js(){return Ca(Xo(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Yo).location}var Ap="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ep(n){N.useContext(Xs).static||N.useLayoutEffect(n)}function Vt(){let{isDataRoute:n}=N.useContext($s);return n?r2():Gb()}function Gb(){Ca(Xo(),"useNavigate() may be used only in the context of a <Router> component.");let n=N.useContext(Bi),{basename:c,navigator:o}=N.useContext(Xs),{matches:x}=N.useContext($s),{pathname:f}=js(),g=JSON.stringify(jp(x)),y=N.useRef(!1);return Ep(()=>{y.current=!0}),N.useCallback((k,b={})=>{if(ps(y.current,Ap),!y.current)return;if(typeof k=="number"){o.go(k);return}let S=kp(k,JSON.parse(g),f,b.relative==="path");n==null&&c!=="/"&&(S.pathname=S.pathname==="/"?c:pn([c,S.pathname])),(b.replace?o.replace:o.push)(S,b.state,b)},[c,o,g,f,n])}N.createContext(null);function os(){let{matches:n}=N.useContext($s),c=n[n.length-1];return c?c.params:{}}function $o(n,{relative:c}={}){let{matches:o}=N.useContext($s),{pathname:x}=js(),f=JSON.stringify(jp(o));return N.useMemo(()=>kp(n,JSON.parse(f),x,c==="path"),[n,f,x,c])}function Yb(n,c){return _p(n,c)}function _p(n,c,o,x){Ca(Xo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=N.useContext(Xs),{matches:g}=N.useContext($s),y=g[g.length-1],j=y?y.params:{},k=y?y.pathname:"/",b=y?y.pathnameBase:"/",S=y&&y.route;{let I=S&&S.path||"";Tp(k,!S||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${k}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let E=js(),_;if(c){let I=typeof c=="string"?Oi(c):c;Ca(b==="/"||I.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${I.pathname}" was given in the \`location\` prop.`),_=I}else _=E;let T=_.pathname||"/",O=T;if(b!=="/"){let I=b.replace(/^\//,"").split("/");O="/"+T.replace(/^\//,"").split("/").slice(I.length).join("/")}let M=wp(n,{pathname:O});ps(S||M!=null,`No routes matched location "${_.pathname}${_.search}${_.hash}" `),ps(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${_.pathname}${_.search}${_.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let z=Wb(M&&M.map(I=>Object.assign({},I,{params:Object.assign({},j,I.params),pathname:pn([b,f.encodeLocation?f.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?b:pn([b,f.encodeLocation?f.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),g,o,x);return c&&z?N.createElement(Yo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",..._},navigationType:"POP"}},z):z}function Xb(){let n=a2(),c=Pb(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),o=n instanceof Error?n.stack:null,x="rgba(200,200,200, 0.5)",f={padding:"0.5rem",backgroundColor:x},g={padding:"2px 4px",backgroundColor:x},y=null;return console.error("Error handled by React Router default ErrorBoundary:",n),y=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:g},"ErrorBoundary")," or"," ",N.createElement("code",{style:g},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},c),o?N.createElement("pre",{style:f},o):null,y)}var $b=N.createElement(Xb,null),Qb=class extends N.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,c){return c.location!==n.location||c.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:c.error,location:c.location,revalidation:n.revalidation||c.revalidation}}componentDidCatch(n,c){console.error("React Router caught the following error during render",n,c)}render(){return this.state.error!==void 0?N.createElement($s.Provider,{value:this.props.routeContext},N.createElement(Ux.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Zb({routeContext:n,match:c,children:o}){let x=N.useContext(Bi);return x&&x.static&&x.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(x.staticContext._deepestRenderedBoundaryId=c.route.id),N.createElement($s.Provider,{value:n},o)}function Wb(n,c=[],o=null,x=null){if(n==null){if(!o)return null;if(o.errors)n=o.matches;else if(c.length===0&&!o.initialized&&o.matches.length>0)n=o.matches;else return null}let f=n,g=o?.errors;if(g!=null){let k=f.findIndex(b=>b.route.id&&g?.[b.route.id]!==void 0);Ca(k>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(g).join(",")}`),f=f.slice(0,Math.min(f.length,k+1))}let y=!1,j=-1;if(o)for(let k=0;k<f.length;k++){let b=f[k];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(j=k),b.route.id){let{loaderData:S,errors:E}=o,_=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||_){y=!0,j>=0?f=f.slice(0,j+1):f=[f[0]];break}}}return f.reduceRight((k,b,S)=>{let E,_=!1,T=null,O=null;o&&(E=g&&b.route.id?g[b.route.id]:void 0,T=b.route.errorElement||$b,y&&(j<0&&S===0?(Tp("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),_=!0,O=null):j===S&&(_=!0,O=b.route.hydrateFallbackElement||null)));let M=c.concat(f.slice(0,S+1)),z=()=>{let I;return E?I=T:_?I=O:b.route.Component?I=N.createElement(b.route.Component,null):b.route.element?I=b.route.element:I=k,N.createElement(Zb,{match:b,routeContext:{outlet:k,matches:M,isDataRoute:o!=null},children:I})};return o&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?N.createElement(Qb,{location:o.location,revalidation:o.revalidation,component:T,error:E,children:z(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):z()},null)}function Hx(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kb(n){let c=N.useContext(Bi);return Ca(c,Hx(n)),c}function Jb(n){let c=N.useContext(Rd);return Ca(c,Hx(n)),c}function e2(n){let c=N.useContext($s);return Ca(c,Hx(n)),c}function Vx(n){let c=e2(n),o=c.matches[c.matches.length-1];return Ca(o.route.id,`${n} can only be used on routes that contain a unique "id"`),o.route.id}function t2(){return Vx("useRouteId")}function a2(){let n=N.useContext(Ux),c=Jb("useRouteError"),o=Vx("useRouteError");return n!==void 0?n:c.errors?.[o]}function r2(){let{router:n}=Kb("useNavigate"),c=Vx("useNavigate"),o=N.useRef(!1);return Ep(()=>{o.current=!0}),N.useCallback(async(f,g={})=>{ps(o.current,Ap),o.current&&(typeof f=="number"?n.navigate(f):await n.navigate(f,{fromRouteId:c,...g}))},[n,c])}var ig={};function Tp(n,c,o){!c&&!ig[n]&&(ig[n]=!0,ps(!1,o))}N.memo(s2);function s2({routes:n,future:c,state:o}){return _p(n,void 0,o,c)}function wt(n){Ca(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function n2({basename:n="/",children:c=null,location:o,navigationType:x="POP",navigator:f,static:g=!1}){Ca(!Xo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let y=n.replace(/^\/*/,"/"),j=N.useMemo(()=>({basename:y,navigator:f,static:g,future:{}}),[y,f,g]);typeof o=="string"&&(o=Oi(o));let{pathname:k="/",search:b="",hash:S="",state:E=null,key:_="default"}=o,T=N.useMemo(()=>{let O=yn(k,y);return O==null?null:{location:{pathname:O,search:b,hash:S,state:E,key:_},navigationType:x}},[y,k,b,S,E,_,x]);return ps(T!=null,`<Router basename="${y}"> is not able to match the URL "${k}${b}${S}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:N.createElement(Xs.Provider,{value:j},N.createElement(Yo.Provider,{children:c,value:T}))}function l2({children:n,location:c}){return Yb(vx(n),c)}function vx(n,c=[]){let o=[];return N.Children.forEach(n,(x,f)=>{if(!N.isValidElement(x))return;let g=[...c,f];if(x.type===N.Fragment){o.push.apply(o,vx(x.props.children,g));return}Ca(x.type===wt,`[${typeof x.type=="string"?x.type:x.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ca(!x.props.index||!x.props.children,"An index route cannot have child routes.");let y={id:x.props.id||g.join("-"),caseSensitive:x.props.caseSensitive,element:x.props.element,Component:x.props.Component,index:x.props.index,path:x.props.path,loader:x.props.loader,action:x.props.action,hydrateFallbackElement:x.props.hydrateFallbackElement,HydrateFallback:x.props.HydrateFallback,errorElement:x.props.errorElement,ErrorBoundary:x.props.ErrorBoundary,hasErrorBoundary:x.props.hasErrorBoundary===!0||x.props.ErrorBoundary!=null||x.props.errorElement!=null,shouldRevalidate:x.props.shouldRevalidate,handle:x.props.handle,lazy:x.props.lazy};x.props.children&&(y.children=vx(x.props.children,g)),o.push(y)}),o}var gd="get",pd="application/x-www-form-urlencoded";function Id(n){return n!=null&&typeof n.tagName=="string"}function i2(n){return Id(n)&&n.tagName.toLowerCase()==="button"}function o2(n){return Id(n)&&n.tagName.toLowerCase()==="form"}function c2(n){return Id(n)&&n.tagName.toLowerCase()==="input"}function d2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function u2(n,c){return n.button===0&&(!c||c==="_self")&&!d2(n)}function jx(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((c,o)=>{let x=n[o];return c.concat(Array.isArray(x)?x.map(f=>[o,f]):[[o,x]])},[]))}function x2(n,c){let o=jx(n);return c&&c.forEach((x,f)=>{o.has(f)||c.getAll(f).forEach(g=>{o.append(f,g)})}),o}var md=null;function h2(){if(md===null)try{new FormData(document.createElement("form"),0),md=!1}catch{md=!0}return md}var m2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xu(n){return n!=null&&!m2.has(n)?(ps(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${pd}"`),null):n}function f2(n,c){let o,x,f,g,y;if(o2(n)){let j=n.getAttribute("action");x=j?yn(j,c):null,o=n.getAttribute("method")||gd,f=Xu(n.getAttribute("enctype"))||pd,g=new FormData(n)}else if(i2(n)||c2(n)&&(n.type==="submit"||n.type==="image")){let j=n.form;if(j==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let k=n.getAttribute("formaction")||j.getAttribute("action");if(x=k?yn(k,c):null,o=n.getAttribute("formmethod")||j.getAttribute("method")||gd,f=Xu(n.getAttribute("formenctype"))||Xu(j.getAttribute("enctype"))||pd,g=new FormData(j,n),!h2()){let{name:b,type:S,value:E}=n;if(S==="image"){let _=b?`${b}.`:"";g.append(`${_}x`,"0"),g.append(`${_}y`,"0")}else b&&g.append(b,E)}}else{if(Id(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=gd,x=null,f=pd,y=n}return g&&f==="text/plain"&&(y=g,g=void 0),{action:x,method:o.toLowerCase(),encType:f,formData:g,body:y}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qx(n,c){if(n===!1||n===null||typeof n>"u")throw new Error(c)}function g2(n,c,o){let x=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return x.pathname==="/"?x.pathname=`_root.${o}`:c&&yn(x.pathname,c)==="/"?x.pathname=`${c.replace(/\/$/,"")}/_root.${o}`:x.pathname=`${x.pathname.replace(/\/$/,"")}.${o}`,x}async function p2(n,c){if(n.id in c)return c[n.id];try{let o=await import(n.module);return c[n.id]=o,o}catch(o){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function y2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function b2(n,c,o){let x=await Promise.all(n.map(async f=>{let g=c.routes[f.route.id];if(g){let y=await p2(g,o);return y.links?y.links():[]}return[]}));return j2(x.flat(1).filter(y2).filter(f=>f.rel==="stylesheet"||f.rel==="preload").map(f=>f.rel==="stylesheet"?{...f,rel:"prefetch",as:"style"}:{...f,rel:"prefetch"}))}function og(n,c,o,x,f,g){let y=(k,b)=>o[b]?k.route.id!==o[b].route.id:!0,j=(k,b)=>o[b].pathname!==k.pathname||o[b].route.path?.endsWith("*")&&o[b].params["*"]!==k.params["*"];return g==="assets"?c.filter((k,b)=>y(k,b)||j(k,b)):g==="data"?c.filter((k,b)=>{let S=x.routes[k.route.id];if(!S||!S.hasLoader)return!1;if(y(k,b)||j(k,b))return!0;if(k.route.shouldRevalidate){let E=k.route.shouldRevalidate({currentUrl:new URL(f.pathname+f.search+f.hash,window.origin),currentParams:o[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:k.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function w2(n,c,{includeHydrateFallback:o}={}){return N2(n.map(x=>{let f=c.routes[x.route.id];if(!f)return[];let g=[f.module];return f.clientActionModule&&(g=g.concat(f.clientActionModule)),f.clientLoaderModule&&(g=g.concat(f.clientLoaderModule)),o&&f.hydrateFallbackModule&&(g=g.concat(f.hydrateFallbackModule)),f.imports&&(g=g.concat(f.imports)),g}).flat(1))}function N2(n){return[...new Set(n)]}function v2(n){let c={},o=Object.keys(n).sort();for(let x of o)c[x]=n[x];return c}function j2(n,c){let o=new Set;return new Set(c),n.reduce((x,f)=>{let g=JSON.stringify(v2(f));return o.has(g)||(o.add(g),x.push({key:g,link:f})),x},[])}function Mp(){let n=N.useContext(Bi);return qx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function k2(){let n=N.useContext(Rd);return qx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Gx=N.createContext(void 0);Gx.displayName="FrameworkContext";function Dp(){let n=N.useContext(Gx);return qx(n,"You must render this element inside a <HydratedRouter> element"),n}function C2(n,c){let o=N.useContext(Gx),[x,f]=N.useState(!1),[g,y]=N.useState(!1),{onFocus:j,onBlur:k,onMouseEnter:b,onMouseLeave:S,onTouchStart:E}=c,_=N.useRef(null);N.useEffect(()=>{if(n==="render"&&y(!0),n==="viewport"){let M=I=>{I.forEach(L=>{y(L.isIntersecting)})},z=new IntersectionObserver(M,{threshold:.5});return _.current&&z.observe(_.current),()=>{z.disconnect()}}},[n]),N.useEffect(()=>{if(x){let M=setTimeout(()=>{y(!0)},100);return()=>{clearTimeout(M)}}},[x]);let T=()=>{f(!0)},O=()=>{f(!1),y(!1)};return o?n!=="intent"?[g,_,{}]:[g,_,{onFocus:Lo(j,T),onBlur:Lo(k,O),onMouseEnter:Lo(b,T),onMouseLeave:Lo(S,O),onTouchStart:Lo(E,T)}]:[!1,_,{}]}function Lo(n,c){return o=>{n&&n(o),o.defaultPrevented||c(o)}}function S2({page:n,...c}){let{router:o}=Mp(),x=N.useMemo(()=>wp(o.routes,n,o.basename),[o.routes,n,o.basename]);return x?N.createElement(E2,{page:n,matches:x,...c}):null}function A2(n){let{manifest:c,routeModules:o}=Dp(),[x,f]=N.useState([]);return N.useEffect(()=>{let g=!1;return b2(n,c,o).then(y=>{g||f(y)}),()=>{g=!0}},[n,c,o]),x}function E2({page:n,matches:c,...o}){let x=js(),{manifest:f,routeModules:g}=Dp(),{basename:y}=Mp(),{loaderData:j,matches:k}=k2(),b=N.useMemo(()=>og(n,c,k,f,x,"data"),[n,c,k,f,x]),S=N.useMemo(()=>og(n,c,k,f,x,"assets"),[n,c,k,f,x]),E=N.useMemo(()=>{if(n===x.pathname+x.search+x.hash)return[];let O=new Set,M=!1;if(c.forEach(I=>{let L=f.routes[I.route.id];!L||!L.hasLoader||(!b.some(D=>D.route.id===I.route.id)&&I.route.id in j&&g[I.route.id]?.shouldRevalidate||L.hasClientLoader?M=!0:O.add(I.route.id))}),O.size===0)return[];let z=g2(n,y,"data");return M&&O.size>0&&z.searchParams.set("_routes",c.filter(I=>O.has(I.route.id)).map(I=>I.route.id).join(",")),[z.pathname+z.search]},[y,j,x,f,b,c,n,g]),_=N.useMemo(()=>w2(S,f),[S,f]),T=A2(S);return N.createElement(N.Fragment,null,E.map(O=>N.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...o})),_.map(O=>N.createElement("link",{key:O,rel:"modulepreload",href:O,...o})),T.map(({key:O,link:M})=>N.createElement("link",{key:O,nonce:o.nonce,...M})))}function _2(...n){return c=>{n.forEach(o=>{typeof o=="function"?o(c):o!=null&&(o.current=c)})}}var Rp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Rp&&(window.__reactRouterVersion="7.8.0")}catch{}function T2({basename:n,children:c,window:o}){let x=N.useRef();x.current==null&&(x.current=pb({window:o,v5Compat:!0}));let f=x.current,[g,y]=N.useState({action:f.action,location:f.location}),j=N.useCallback(k=>{N.startTransition(()=>y(k))},[y]);return N.useLayoutEffect(()=>f.listen(j),[f,j]),N.createElement(n2,{basename:n,children:c,location:g.location,navigationType:g.action,navigator:f})}var Ip=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ml=N.forwardRef(function({onClick:c,discover:o="render",prefetch:x="none",relative:f,reloadDocument:g,replace:y,state:j,target:k,to:b,preventScrollReset:S,viewTransition:E,..._},T){let{basename:O}=N.useContext(Xs),M=typeof b=="string"&&Ip.test(b),z,I=!1;if(typeof b=="string"&&M&&(z=b,Rp))try{let Q=new URL(window.location.href),le=b.startsWith("//")?new URL(Q.protocol+b):new URL(b),ce=yn(le.pathname,O);le.origin===Q.origin&&ce!=null?b=ce+le.search+le.hash:I=!0}catch{ps(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let L=qb(b,{relative:f}),[D,B,Y]=C2(x,_),X=R2(b,{replace:y,state:j,target:k,preventScrollReset:S,relative:f,viewTransition:E});function U(Q){c&&c(Q),Q.defaultPrevented||X(Q)}let G=N.createElement("a",{..._,...Y,href:z||L,onClick:I||g?c:U,ref:_2(T,B),target:k,"data-discover":!M&&o==="render"?"true":void 0});return D&&!M?N.createElement(N.Fragment,null,G,N.createElement(S2,{page:L})):G});Ml.displayName="Link";var kx=N.forwardRef(function({"aria-current":c="page",caseSensitive:o=!1,className:x="",end:f=!1,style:g,to:y,viewTransition:j,children:k,...b},S){let E=$o(y,{relative:b.relative}),_=js(),T=N.useContext(Rd),{navigator:O,basename:M}=N.useContext(Xs),z=T!=null&&z2(E)&&j===!0,I=O.encodeLocation?O.encodeLocation(E).pathname:E.pathname,L=_.pathname,D=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;o||(L=L.toLowerCase(),D=D?D.toLowerCase():null,I=I.toLowerCase()),D&&M&&(D=yn(D,M)||D);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let Y=L===I||!f&&L.startsWith(I)&&L.charAt(B)==="/",X=D!=null&&(D===I||!f&&D.startsWith(I)&&D.charAt(I.length)==="/"),U={isActive:Y,isPending:X,isTransitioning:z},G=Y?c:void 0,Q;typeof x=="function"?Q=x(U):Q=[x,Y?"active":null,X?"pending":null,z?"transitioning":null].filter(Boolean).join(" ");let le=typeof g=="function"?g(U):g;return N.createElement(Ml,{...b,"aria-current":G,className:Q,ref:S,style:le,to:y,viewTransition:j},typeof k=="function"?k(U):k)});kx.displayName="NavLink";var M2=N.forwardRef(({discover:n="render",fetcherKey:c,navigate:o,reloadDocument:x,replace:f,state:g,method:y=gd,action:j,onSubmit:k,relative:b,preventScrollReset:S,viewTransition:E,..._},T)=>{let O=B2(),M=L2(j,{relative:b}),z=y.toLowerCase()==="get"?"get":"post",I=typeof j=="string"&&Ip.test(j),L=D=>{if(k&&k(D),D.defaultPrevented)return;D.preventDefault();let B=D.nativeEvent.submitter,Y=B?.getAttribute("formmethod")||y;O(B||D.currentTarget,{fetcherKey:c,method:Y,navigate:o,replace:f,state:g,relative:b,preventScrollReset:S,viewTransition:E})};return N.createElement("form",{ref:T,method:z,action:M,onSubmit:x?k:L,..._,"data-discover":!I&&n==="render"?"true":void 0})});M2.displayName="Form";function D2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Op(n){let c=N.useContext(Bi);return Ca(c,D2(n)),c}function R2(n,{target:c,replace:o,state:x,preventScrollReset:f,relative:g,viewTransition:y}={}){let j=Vt(),k=js(),b=$o(n,{relative:g});return N.useCallback(S=>{if(u2(S,c)){S.preventDefault();let E=o!==void 0?o:Uo(k)===Uo(b);j(n,{replace:E,state:x,preventScrollReset:f,relative:g,viewTransition:y})}},[k,j,b,o,x,c,n,f,g,y])}function Qo(n){ps(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let c=N.useRef(jx(n)),o=N.useRef(!1),x=js(),f=N.useMemo(()=>x2(x.search,o.current?null:c.current),[x.search]),g=Vt(),y=N.useCallback((j,k)=>{const b=jx(typeof j=="function"?j(new URLSearchParams(f)):j);o.current=!0,g("?"+b,k)},[g,f]);return[f,y]}var I2=0,O2=()=>`__${String(++I2)}__`;function B2(){let{router:n}=Op("useSubmit"),{basename:c}=N.useContext(Xs),o=t2();return N.useCallback(async(x,f={})=>{let{action:g,method:y,encType:j,formData:k,body:b}=f2(x,c);if(f.navigate===!1){let S=f.fetcherKey||O2();await n.fetch(S,o,f.action||g,{preventScrollReset:f.preventScrollReset,formData:k,body:b,formMethod:f.method||y,formEncType:f.encType||j,flushSync:f.flushSync})}else await n.navigate(f.action||g,{preventScrollReset:f.preventScrollReset,formData:k,body:b,formMethod:f.method||y,formEncType:f.encType||j,replace:f.replace,state:f.state,fromRouteId:o,flushSync:f.flushSync,viewTransition:f.viewTransition})},[n,c,o])}function L2(n,{relative:c}={}){let{basename:o}=N.useContext(Xs),x=N.useContext($s);Ca(x,"useFormAction must be used inside a RouteContext");let[f]=x.matches.slice(-1),g={...$o(n||".",{relative:c})},y=js();if(n==null){g.search=y.search;let j=new URLSearchParams(g.search),k=j.getAll("index");if(k.some(S=>S==="")){j.delete("index"),k.filter(E=>E).forEach(E=>j.append("index",E));let S=j.toString();g.search=S?`?${S}`:""}}return(!n||n===".")&&f.route.index&&(g.search=g.search?g.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(g.pathname=g.pathname==="/"?o:pn([o,g.pathname])),Uo(g)}function z2(n,{relative:c}={}){let o=N.useContext(Sp);Ca(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:x}=Op("useViewTransitionState"),f=$o(n,{relative:c});if(!o.isTransitioning)return!1;let g=yn(o.currentLocation.pathname,x)||o.currentLocation.pathname,y=yn(o.nextLocation.pathname,x)||o.nextLocation.pathname;return vd(f.pathname,y)!=null||vd(f.pathname,g)!=null}function F2(){const n=Vt(),c=()=>{n("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsxs("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 md:top-6 md:right-6 flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 z-10",children:[e.jsx("button",{onClick:()=>n("/login"),className:"signInSignUp text-xs sm:text-sm md:text-base px-3 py-2 sm:px-4 sm:py-2 md:px-6 md:py-3 whitespace-nowrap",children:"Sign In"}),e.jsx("button",{onClick:()=>n("/register"),className:"signInSignUp text-xs sm:text-sm md:text-base px-3 py-2 sm:px-4 sm:py-2 md:px-6 md:py-3 whitespace-nowrap",children:"Sign Up"})]}),e.jsxs("div",{className:"welcomeCard mx-3 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-20 h-20 sm:w-28 sm:h-28 md:w-36 md:h-36 lg:w-44 lg:h-44 mx-auto mb-4 sm:mb-5 md:mb-6"}),e.jsxs("h1",{className:"welcomeTitle text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl mb-3 sm:mb-4 md:mb-5",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300 block sm:inline",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-7 md:mb-8 px-2 sm:px-4 md:px-0",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8 md:mb-10",children:[e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Resident Records"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Role Management"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Maintenance Requests"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Announcements"})]})]}),e.jsx("button",{className:"welcomeButton text-sm sm:text-base md:text-lg font-bold py-3 px-6 sm:py-3 sm:px-8 md:py-4 md:px-10 rounded-lg shadow-lg hover:scale-105 transition-transform duration-300",onClick:c,children:" Get Started"}),e.jsx("div",{className:"mt-4 sm:mt-6 text-xs sm:text-sm text-white/70 text-center block sm:hidden",children:" Tap buttons above to sign in or create account"})]}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/20 pointer-events-none"})]})}function Bp(n,c){return function(){return n.apply(c,arguments)}}const{toString:P2}=Object.prototype,{getPrototypeOf:Yx}=Object,{iterator:Od,toStringTag:Lp}=Symbol,Bd=(n=>c=>{const o=P2.call(c);return n[o]||(n[o]=o.slice(8,-1).toLowerCase())})(Object.create(null)),ks=n=>(n=n.toLowerCase(),c=>Bd(c)===n),Ld=n=>c=>typeof c===n,{isArray:Li}=Array,Ho=Ld("undefined");function Zo(n){return n!==null&&!Ho(n)&&n.constructor!==null&&!Ho(n.constructor)&&Or(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const zp=ks("ArrayBuffer");function U2(n){let c;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?c=ArrayBuffer.isView(n):c=n&&n.buffer&&zp(n.buffer),c}const H2=Ld("string"),Or=Ld("function"),Fp=Ld("number"),Wo=n=>n!==null&&typeof n=="object",V2=n=>n===!0||n===!1,yd=n=>{if(Bd(n)!=="object")return!1;const c=Yx(n);return(c===null||c===Object.prototype||Object.getPrototypeOf(c)===null)&&!(Lp in n)&&!(Od in n)},q2=n=>{if(!Wo(n)||Zo(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},G2=ks("Date"),Y2=ks("File"),X2=ks("Blob"),$2=ks("FileList"),Q2=n=>Wo(n)&&Or(n.pipe),Z2=n=>{let c;return n&&(typeof FormData=="function"&&n instanceof FormData||Or(n.append)&&((c=Bd(n))==="formdata"||c==="object"&&Or(n.toString)&&n.toString()==="[object FormData]"))},W2=ks("URLSearchParams"),[K2,J2,ew,tw]=["ReadableStream","Request","Response","Headers"].map(ks),aw=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ko(n,c,{allOwnKeys:o=!1}={}){if(n===null||typeof n>"u")return;let x,f;if(typeof n!="object"&&(n=[n]),Li(n))for(x=0,f=n.length;x<f;x++)c.call(null,n[x],x,n);else{if(Zo(n))return;const g=o?Object.getOwnPropertyNames(n):Object.keys(n),y=g.length;let j;for(x=0;x<y;x++)j=g[x],c.call(null,n[j],j,n)}}function Pp(n,c){if(Zo(n))return null;c=c.toLowerCase();const o=Object.keys(n);let x=o.length,f;for(;x-- >0;)if(f=o[x],c===f.toLowerCase())return f;return null}const Dl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Up=n=>!Ho(n)&&n!==Dl;function Cx(){const{caseless:n}=Up(this)&&this||{},c={},o=(x,f)=>{const g=n&&Pp(c,f)||f;yd(c[g])&&yd(x)?c[g]=Cx(c[g],x):yd(x)?c[g]=Cx({},x):Li(x)?c[g]=x.slice():c[g]=x};for(let x=0,f=arguments.length;x<f;x++)arguments[x]&&Ko(arguments[x],o);return c}const rw=(n,c,o,{allOwnKeys:x}={})=>(Ko(c,(f,g)=>{o&&Or(f)?n[g]=Bp(f,o):n[g]=f},{allOwnKeys:x}),n),sw=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),nw=(n,c,o,x)=>{n.prototype=Object.create(c.prototype,x),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:c.prototype}),o&&Object.assign(n.prototype,o)},lw=(n,c,o,x)=>{let f,g,y;const j={};if(c=c||{},n==null)return c;do{for(f=Object.getOwnPropertyNames(n),g=f.length;g-- >0;)y=f[g],(!x||x(y,n,c))&&!j[y]&&(c[y]=n[y],j[y]=!0);n=o!==!1&&Yx(n)}while(n&&(!o||o(n,c))&&n!==Object.prototype);return c},iw=(n,c,o)=>{n=String(n),(o===void 0||o>n.length)&&(o=n.length),o-=c.length;const x=n.indexOf(c,o);return x!==-1&&x===o},ow=n=>{if(!n)return null;if(Li(n))return n;let c=n.length;if(!Fp(c))return null;const o=new Array(c);for(;c-- >0;)o[c]=n[c];return o},cw=(n=>c=>n&&c instanceof n)(typeof Uint8Array<"u"&&Yx(Uint8Array)),dw=(n,c)=>{const x=(n&&n[Od]).call(n);let f;for(;(f=x.next())&&!f.done;){const g=f.value;c.call(n,g[0],g[1])}},uw=(n,c)=>{let o;const x=[];for(;(o=n.exec(c))!==null;)x.push(o);return x},xw=ks("HTMLFormElement"),hw=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(o,x,f){return x.toUpperCase()+f}),cg=(({hasOwnProperty:n})=>(c,o)=>n.call(c,o))(Object.prototype),mw=ks("RegExp"),Hp=(n,c)=>{const o=Object.getOwnPropertyDescriptors(n),x={};Ko(o,(f,g)=>{let y;(y=c(f,g,n))!==!1&&(x[g]=y||f)}),Object.defineProperties(n,x)},fw=n=>{Hp(n,(c,o)=>{if(Or(n)&&["arguments","caller","callee"].indexOf(o)!==-1)return!1;const x=n[o];if(Or(x)){if(c.enumerable=!1,"writable"in c){c.writable=!1;return}c.set||(c.set=()=>{throw Error("Can not rewrite read-only method '"+o+"'")})}})},gw=(n,c)=>{const o={},x=f=>{f.forEach(g=>{o[g]=!0})};return Li(n)?x(n):x(String(n).split(c)),o},pw=()=>{},yw=(n,c)=>n!=null&&Number.isFinite(n=+n)?n:c;function bw(n){return!!(n&&Or(n.append)&&n[Lp]==="FormData"&&n[Od])}const ww=n=>{const c=new Array(10),o=(x,f)=>{if(Wo(x)){if(c.indexOf(x)>=0)return;if(Zo(x))return x;if(!("toJSON"in x)){c[f]=x;const g=Li(x)?[]:{};return Ko(x,(y,j)=>{const k=o(y,f+1);!Ho(k)&&(g[j]=k)}),c[f]=void 0,g}}return x};return o(n,0)},Nw=ks("AsyncFunction"),vw=n=>n&&(Wo(n)||Or(n))&&Or(n.then)&&Or(n.catch),Vp=((n,c)=>n?setImmediate:c?((o,x)=>(Dl.addEventListener("message",({source:f,data:g})=>{f===Dl&&g===o&&x.length&&x.shift()()},!1),f=>{x.push(f),Dl.postMessage(o,"*")}))(`axios@${Math.random()}`,[]):o=>setTimeout(o))(typeof setImmediate=="function",Or(Dl.postMessage)),jw=typeof queueMicrotask<"u"?queueMicrotask.bind(Dl):typeof process<"u"&&process.nextTick||Vp,kw=n=>n!=null&&Or(n[Od]),Be={isArray:Li,isArrayBuffer:zp,isBuffer:Zo,isFormData:Z2,isArrayBufferView:U2,isString:H2,isNumber:Fp,isBoolean:V2,isObject:Wo,isPlainObject:yd,isEmptyObject:q2,isReadableStream:K2,isRequest:J2,isResponse:ew,isHeaders:tw,isUndefined:Ho,isDate:G2,isFile:Y2,isBlob:X2,isRegExp:mw,isFunction:Or,isStream:Q2,isURLSearchParams:W2,isTypedArray:cw,isFileList:$2,forEach:Ko,merge:Cx,extend:rw,trim:aw,stripBOM:sw,inherits:nw,toFlatObject:lw,kindOf:Bd,kindOfTest:ks,endsWith:iw,toArray:ow,forEachEntry:dw,matchAll:uw,isHTMLForm:xw,hasOwnProperty:cg,hasOwnProp:cg,reduceDescriptors:Hp,freezeMethods:fw,toObjectSet:gw,toCamelCase:hw,noop:pw,toFiniteNumber:yw,findKey:Pp,global:Dl,isContextDefined:Up,isSpecCompliantForm:bw,toJSONObject:ww,isAsyncFn:Nw,isThenable:vw,setImmediate:Vp,asap:jw,isIterable:kw};function kt(n,c,o,x,f){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",c&&(this.code=c),o&&(this.config=o),x&&(this.request=x),f&&(this.response=f,this.status=f.status?f.status:null)}Be.inherits(kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const qp=kt.prototype,Gp={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{Gp[n]={value:n}});Object.defineProperties(kt,Gp);Object.defineProperty(qp,"isAxiosError",{value:!0});kt.from=(n,c,o,x,f,g)=>{const y=Object.create(qp);return Be.toFlatObject(n,y,function(k){return k!==Error.prototype},j=>j!=="isAxiosError"),kt.call(y,n.message,c,o,x,f),y.cause=n,y.name=n.name,g&&Object.assign(y,g),y};const Cw=null;function Sx(n){return Be.isPlainObject(n)||Be.isArray(n)}function Yp(n){return Be.endsWith(n,"[]")?n.slice(0,-2):n}function dg(n,c,o){return n?n.concat(c).map(function(f,g){return f=Yp(f),!o&&g?"["+f+"]":f}).join(o?".":""):c}function Sw(n){return Be.isArray(n)&&!n.some(Sx)}const Aw=Be.toFlatObject(Be,{},null,function(c){return/^is[A-Z]/.test(c)});function zd(n,c,o){if(!Be.isObject(n))throw new TypeError("target must be an object");c=c||new FormData,o=Be.toFlatObject(o,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,z){return!Be.isUndefined(z[M])});const x=o.metaTokens,f=o.visitor||S,g=o.dots,y=o.indexes,k=(o.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(c);if(!Be.isFunction(f))throw new TypeError("visitor must be a function");function b(O){if(O===null)return"";if(Be.isDate(O))return O.toISOString();if(Be.isBoolean(O))return O.toString();if(!k&&Be.isBlob(O))throw new kt("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(O)||Be.isTypedArray(O)?k&&typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function S(O,M,z){let I=O;if(O&&!z&&typeof O=="object"){if(Be.endsWith(M,"{}"))M=x?M:M.slice(0,-2),O=JSON.stringify(O);else if(Be.isArray(O)&&Sw(O)||(Be.isFileList(O)||Be.endsWith(M,"[]"))&&(I=Be.toArray(O)))return M=Yp(M),I.forEach(function(D,B){!(Be.isUndefined(D)||D===null)&&c.append(y===!0?dg([M],B,g):y===null?M:M+"[]",b(D))}),!1}return Sx(O)?!0:(c.append(dg(z,M,g),b(O)),!1)}const E=[],_=Object.assign(Aw,{defaultVisitor:S,convertValue:b,isVisitable:Sx});function T(O,M){if(!Be.isUndefined(O)){if(E.indexOf(O)!==-1)throw Error("Circular reference detected in "+M.join("."));E.push(O),Be.forEach(O,function(I,L){(!(Be.isUndefined(I)||I===null)&&f.call(c,I,Be.isString(L)?L.trim():L,M,_))===!0&&T(I,M?M.concat(L):[L])}),E.pop()}}if(!Be.isObject(n))throw new TypeError("data must be an object");return T(n),c}function ug(n){const c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(x){return c[x]})}function Xx(n,c){this._pairs=[],n&&zd(n,this,c)}const Xp=Xx.prototype;Xp.append=function(c,o){this._pairs.push([c,o])};Xp.toString=function(c){const o=c?function(x){return c.call(this,x,ug)}:ug;return this._pairs.map(function(f){return o(f[0])+"="+o(f[1])},"").join("&")};function Ew(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $p(n,c,o){if(!c)return n;const x=o&&o.encode||Ew;Be.isFunction(o)&&(o={serialize:o});const f=o&&o.serialize;let g;if(f?g=f(c,o):g=Be.isURLSearchParams(c)?c.toString():new Xx(c,o).toString(x),g){const y=n.indexOf("#");y!==-1&&(n=n.slice(0,y)),n+=(n.indexOf("?")===-1?"?":"&")+g}return n}class xg{constructor(){this.handlers=[]}use(c,o,x){return this.handlers.push({fulfilled:c,rejected:o,synchronous:x?x.synchronous:!1,runWhen:x?x.runWhen:null}),this.handlers.length-1}eject(c){this.handlers[c]&&(this.handlers[c]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(c){Be.forEach(this.handlers,function(x){x!==null&&c(x)})}}const Qp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},_w=typeof URLSearchParams<"u"?URLSearchParams:Xx,Tw=typeof FormData<"u"?FormData:null,Mw=typeof Blob<"u"?Blob:null,Dw={isBrowser:!0,classes:{URLSearchParams:_w,FormData:Tw,Blob:Mw},protocols:["http","https","file","blob","url","data"]},$x=typeof window<"u"&&typeof document<"u",Ax=typeof navigator=="object"&&navigator||void 0,Rw=$x&&(!Ax||["ReactNative","NativeScript","NS"].indexOf(Ax.product)<0),Iw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ow=$x&&window.location.href||"http://localhost",Bw=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$x,hasStandardBrowserEnv:Rw,hasStandardBrowserWebWorkerEnv:Iw,navigator:Ax,origin:Ow},Symbol.toStringTag,{value:"Module"})),wr={...Bw,...Dw};function Lw(n,c){return zd(n,new wr.classes.URLSearchParams,{visitor:function(o,x,f,g){return wr.isNode&&Be.isBuffer(o)?(this.append(x,o.toString("base64")),!1):g.defaultVisitor.apply(this,arguments)},...c})}function zw(n){return Be.matchAll(/\w+|\[(\w*)]/g,n).map(c=>c[0]==="[]"?"":c[1]||c[0])}function Fw(n){const c={},o=Object.keys(n);let x;const f=o.length;let g;for(x=0;x<f;x++)g=o[x],c[g]=n[g];return c}function Zp(n){function c(o,x,f,g){let y=o[g++];if(y==="__proto__")return!0;const j=Number.isFinite(+y),k=g>=o.length;return y=!y&&Be.isArray(f)?f.length:y,k?(Be.hasOwnProp(f,y)?f[y]=[f[y],x]:f[y]=x,!j):((!f[y]||!Be.isObject(f[y]))&&(f[y]=[]),c(o,x,f[y],g)&&Be.isArray(f[y])&&(f[y]=Fw(f[y])),!j)}if(Be.isFormData(n)&&Be.isFunction(n.entries)){const o={};return Be.forEachEntry(n,(x,f)=>{c(zw(x),f,o,0)}),o}return null}function Pw(n,c,o){if(Be.isString(n))try{return(c||JSON.parse)(n),Be.trim(n)}catch(x){if(x.name!=="SyntaxError")throw x}return(o||JSON.stringify)(n)}const Jo={transitional:Qp,adapter:["xhr","http","fetch"],transformRequest:[function(c,o){const x=o.getContentType()||"",f=x.indexOf("application/json")>-1,g=Be.isObject(c);if(g&&Be.isHTMLForm(c)&&(c=new FormData(c)),Be.isFormData(c))return f?JSON.stringify(Zp(c)):c;if(Be.isArrayBuffer(c)||Be.isBuffer(c)||Be.isStream(c)||Be.isFile(c)||Be.isBlob(c)||Be.isReadableStream(c))return c;if(Be.isArrayBufferView(c))return c.buffer;if(Be.isURLSearchParams(c))return o.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),c.toString();let j;if(g){if(x.indexOf("application/x-www-form-urlencoded")>-1)return Lw(c,this.formSerializer).toString();if((j=Be.isFileList(c))||x.indexOf("multipart/form-data")>-1){const k=this.env&&this.env.FormData;return zd(j?{"files[]":c}:c,k&&new k,this.formSerializer)}}return g||f?(o.setContentType("application/json",!1),Pw(c)):c}],transformResponse:[function(c){const o=this.transitional||Jo.transitional,x=o&&o.forcedJSONParsing,f=this.responseType==="json";if(Be.isResponse(c)||Be.isReadableStream(c))return c;if(c&&Be.isString(c)&&(x&&!this.responseType||f)){const y=!(o&&o.silentJSONParsing)&&f;try{return JSON.parse(c)}catch(j){if(y)throw j.name==="SyntaxError"?kt.from(j,kt.ERR_BAD_RESPONSE,this,null,this.response):j}}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wr.classes.FormData,Blob:wr.classes.Blob},validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],n=>{Jo.headers[n]={}});const Uw=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hw=n=>{const c={};let o,x,f;return n&&n.split(`
`).forEach(function(y){f=y.indexOf(":"),o=y.substring(0,f).trim().toLowerCase(),x=y.substring(f+1).trim(),!(!o||c[o]&&Uw[o])&&(o==="set-cookie"?c[o]?c[o].push(x):c[o]=[x]:c[o]=c[o]?c[o]+", "+x:x)}),c},hg=Symbol("internals");function zo(n){return n&&String(n).trim().toLowerCase()}function bd(n){return n===!1||n==null?n:Be.isArray(n)?n.map(bd):String(n)}function Vw(n){const c=Object.create(null),o=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let x;for(;x=o.exec(n);)c[x[1]]=x[2];return c}const qw=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function $u(n,c,o,x,f){if(Be.isFunction(x))return x.call(this,c,o);if(f&&(c=o),!!Be.isString(c)){if(Be.isString(x))return c.indexOf(x)!==-1;if(Be.isRegExp(x))return x.test(c)}}function Gw(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(c,o,x)=>o.toUpperCase()+x)}function Yw(n,c){const o=Be.toCamelCase(" "+c);["get","set","has"].forEach(x=>{Object.defineProperty(n,x+o,{value:function(f,g,y){return this[x].call(this,c,f,g,y)},configurable:!0})})}let Br=class{constructor(c){c&&this.set(c)}set(c,o,x){const f=this;function g(j,k,b){const S=zo(k);if(!S)throw new Error("header name must be a non-empty string");const E=Be.findKey(f,S);(!E||f[E]===void 0||b===!0||b===void 0&&f[E]!==!1)&&(f[E||k]=bd(j))}const y=(j,k)=>Be.forEach(j,(b,S)=>g(b,S,k));if(Be.isPlainObject(c)||c instanceof this.constructor)y(c,o);else if(Be.isString(c)&&(c=c.trim())&&!qw(c))y(Hw(c),o);else if(Be.isObject(c)&&Be.isIterable(c)){let j={},k,b;for(const S of c){if(!Be.isArray(S))throw TypeError("Object iterator must return a key-value pair");j[b=S[0]]=(k=j[b])?Be.isArray(k)?[...k,S[1]]:[k,S[1]]:S[1]}y(j,o)}else c!=null&&g(o,c,x);return this}get(c,o){if(c=zo(c),c){const x=Be.findKey(this,c);if(x){const f=this[x];if(!o)return f;if(o===!0)return Vw(f);if(Be.isFunction(o))return o.call(this,f,x);if(Be.isRegExp(o))return o.exec(f);throw new TypeError("parser must be boolean|regexp|function")}}}has(c,o){if(c=zo(c),c){const x=Be.findKey(this,c);return!!(x&&this[x]!==void 0&&(!o||$u(this,this[x],x,o)))}return!1}delete(c,o){const x=this;let f=!1;function g(y){if(y=zo(y),y){const j=Be.findKey(x,y);j&&(!o||$u(x,x[j],j,o))&&(delete x[j],f=!0)}}return Be.isArray(c)?c.forEach(g):g(c),f}clear(c){const o=Object.keys(this);let x=o.length,f=!1;for(;x--;){const g=o[x];(!c||$u(this,this[g],g,c,!0))&&(delete this[g],f=!0)}return f}normalize(c){const o=this,x={};return Be.forEach(this,(f,g)=>{const y=Be.findKey(x,g);if(y){o[y]=bd(f),delete o[g];return}const j=c?Gw(g):String(g).trim();j!==g&&delete o[g],o[j]=bd(f),x[j]=!0}),this}concat(...c){return this.constructor.concat(this,...c)}toJSON(c){const o=Object.create(null);return Be.forEach(this,(x,f)=>{x!=null&&x!==!1&&(o[f]=c&&Be.isArray(x)?x.join(", "):x)}),o}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([c,o])=>c+": "+o).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(c){return c instanceof this?c:new this(c)}static concat(c,...o){const x=new this(c);return o.forEach(f=>x.set(f)),x}static accessor(c){const x=(this[hg]=this[hg]={accessors:{}}).accessors,f=this.prototype;function g(y){const j=zo(y);x[j]||(Yw(f,y),x[j]=!0)}return Be.isArray(c)?c.forEach(g):g(c),this}};Br.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(Br.prototype,({value:n},c)=>{let o=c[0].toUpperCase()+c.slice(1);return{get:()=>n,set(x){this[o]=x}}});Be.freezeMethods(Br);function Qu(n,c){const o=this||Jo,x=c||o,f=Br.from(x.headers);let g=x.data;return Be.forEach(n,function(j){g=j.call(o,g,f.normalize(),c?c.status:void 0)}),f.normalize(),g}function Wp(n){return!!(n&&n.__CANCEL__)}function zi(n,c,o){kt.call(this,n??"canceled",kt.ERR_CANCELED,c,o),this.name="CanceledError"}Be.inherits(zi,kt,{__CANCEL__:!0});function Kp(n,c,o){const x=o.config.validateStatus;!o.status||!x||x(o.status)?n(o):c(new kt("Request failed with status code "+o.status,[kt.ERR_BAD_REQUEST,kt.ERR_BAD_RESPONSE][Math.floor(o.status/100)-4],o.config,o.request,o))}function Xw(n){const c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return c&&c[1]||""}function $w(n,c){n=n||10;const o=new Array(n),x=new Array(n);let f=0,g=0,y;return c=c!==void 0?c:1e3,function(k){const b=Date.now(),S=x[g];y||(y=b),o[f]=k,x[f]=b;let E=g,_=0;for(;E!==f;)_+=o[E++],E=E%n;if(f=(f+1)%n,f===g&&(g=(g+1)%n),b-y<c)return;const T=S&&b-S;return T?Math.round(_*1e3/T):void 0}}function Qw(n,c){let o=0,x=1e3/c,f,g;const y=(b,S=Date.now())=>{o=S,f=null,g&&(clearTimeout(g),g=null),n(...b)};return[(...b)=>{const S=Date.now(),E=S-o;E>=x?y(b,S):(f=b,g||(g=setTimeout(()=>{g=null,y(f)},x-E)))},()=>f&&y(f)]}const jd=(n,c,o=3)=>{let x=0;const f=$w(50,250);return Qw(g=>{const y=g.loaded,j=g.lengthComputable?g.total:void 0,k=y-x,b=f(k),S=y<=j;x=y;const E={loaded:y,total:j,progress:j?y/j:void 0,bytes:k,rate:b||void 0,estimated:b&&j&&S?(j-y)/b:void 0,event:g,lengthComputable:j!=null,[c?"download":"upload"]:!0};n(E)},o)},mg=(n,c)=>{const o=n!=null;return[x=>c[0]({lengthComputable:o,total:n,loaded:x}),c[1]]},fg=n=>(...c)=>Be.asap(()=>n(...c)),Zw=wr.hasStandardBrowserEnv?((n,c)=>o=>(o=new URL(o,wr.origin),n.protocol===o.protocol&&n.host===o.host&&(c||n.port===o.port)))(new URL(wr.origin),wr.navigator&&/(msie|trident)/i.test(wr.navigator.userAgent)):()=>!0,Ww=wr.hasStandardBrowserEnv?{write(n,c,o,x,f,g){const y=[n+"="+encodeURIComponent(c)];Be.isNumber(o)&&y.push("expires="+new Date(o).toGMTString()),Be.isString(x)&&y.push("path="+x),Be.isString(f)&&y.push("domain="+f),g===!0&&y.push("secure"),document.cookie=y.join("; ")},read(n){const c=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Kw(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function Jw(n,c){return c?n.replace(/\/?\/$/,"")+"/"+c.replace(/^\/+/,""):n}function Jp(n,c,o){let x=!Kw(c);return n&&(x||o==!1)?Jw(n,c):c}const gg=n=>n instanceof Br?{...n}:n;function Ol(n,c){c=c||{};const o={};function x(b,S,E,_){return Be.isPlainObject(b)&&Be.isPlainObject(S)?Be.merge.call({caseless:_},b,S):Be.isPlainObject(S)?Be.merge({},S):Be.isArray(S)?S.slice():S}function f(b,S,E,_){if(Be.isUndefined(S)){if(!Be.isUndefined(b))return x(void 0,b,E,_)}else return x(b,S,E,_)}function g(b,S){if(!Be.isUndefined(S))return x(void 0,S)}function y(b,S){if(Be.isUndefined(S)){if(!Be.isUndefined(b))return x(void 0,b)}else return x(void 0,S)}function j(b,S,E){if(E in c)return x(b,S);if(E in n)return x(void 0,b)}const k={url:g,method:g,data:g,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:j,headers:(b,S,E)=>f(gg(b),gg(S),E,!0)};return Be.forEach(Object.keys({...n,...c}),function(S){const E=k[S]||f,_=E(n[S],c[S],S);Be.isUndefined(_)&&E!==j||(o[S]=_)}),o}const e1=n=>{const c=Ol({},n);let{data:o,withXSRFToken:x,xsrfHeaderName:f,xsrfCookieName:g,headers:y,auth:j}=c;c.headers=y=Br.from(y),c.url=$p(Jp(c.baseURL,c.url,c.allowAbsoluteUrls),n.params,n.paramsSerializer),j&&y.set("Authorization","Basic "+btoa((j.username||"")+":"+(j.password?unescape(encodeURIComponent(j.password)):"")));let k;if(Be.isFormData(o)){if(wr.hasStandardBrowserEnv||wr.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((k=y.getContentType())!==!1){const[b,...S]=k?k.split(";").map(E=>E.trim()).filter(Boolean):[];y.setContentType([b||"multipart/form-data",...S].join("; "))}}if(wr.hasStandardBrowserEnv&&(x&&Be.isFunction(x)&&(x=x(c)),x||x!==!1&&Zw(c.url))){const b=f&&g&&Ww.read(g);b&&y.set(f,b)}return c},eN=typeof XMLHttpRequest<"u",tN=eN&&function(n){return new Promise(function(o,x){const f=e1(n);let g=f.data;const y=Br.from(f.headers).normalize();let{responseType:j,onUploadProgress:k,onDownloadProgress:b}=f,S,E,_,T,O;function M(){T&&T(),O&&O(),f.cancelToken&&f.cancelToken.unsubscribe(S),f.signal&&f.signal.removeEventListener("abort",S)}let z=new XMLHttpRequest;z.open(f.method.toUpperCase(),f.url,!0),z.timeout=f.timeout;function I(){if(!z)return;const D=Br.from("getAllResponseHeaders"in z&&z.getAllResponseHeaders()),Y={data:!j||j==="text"||j==="json"?z.responseText:z.response,status:z.status,statusText:z.statusText,headers:D,config:n,request:z};Kp(function(U){o(U),M()},function(U){x(U),M()},Y),z=null}"onloadend"in z?z.onloadend=I:z.onreadystatechange=function(){!z||z.readyState!==4||z.status===0&&!(z.responseURL&&z.responseURL.indexOf("file:")===0)||setTimeout(I)},z.onabort=function(){z&&(x(new kt("Request aborted",kt.ECONNABORTED,n,z)),z=null)},z.onerror=function(){x(new kt("Network Error",kt.ERR_NETWORK,n,z)),z=null},z.ontimeout=function(){let B=f.timeout?"timeout of "+f.timeout+"ms exceeded":"timeout exceeded";const Y=f.transitional||Qp;f.timeoutErrorMessage&&(B=f.timeoutErrorMessage),x(new kt(B,Y.clarifyTimeoutError?kt.ETIMEDOUT:kt.ECONNABORTED,n,z)),z=null},g===void 0&&y.setContentType(null),"setRequestHeader"in z&&Be.forEach(y.toJSON(),function(B,Y){z.setRequestHeader(Y,B)}),Be.isUndefined(f.withCredentials)||(z.withCredentials=!!f.withCredentials),j&&j!=="json"&&(z.responseType=f.responseType),b&&([_,O]=jd(b,!0),z.addEventListener("progress",_)),k&&z.upload&&([E,T]=jd(k),z.upload.addEventListener("progress",E),z.upload.addEventListener("loadend",T)),(f.cancelToken||f.signal)&&(S=D=>{z&&(x(!D||D.type?new zi(null,n,z):D),z.abort(),z=null)},f.cancelToken&&f.cancelToken.subscribe(S),f.signal&&(f.signal.aborted?S():f.signal.addEventListener("abort",S)));const L=Xw(f.url);if(L&&wr.protocols.indexOf(L)===-1){x(new kt("Unsupported protocol "+L+":",kt.ERR_BAD_REQUEST,n));return}z.send(g||null)})},aN=(n,c)=>{const{length:o}=n=n?n.filter(Boolean):[];if(c||o){let x=new AbortController,f;const g=function(b){if(!f){f=!0,j();const S=b instanceof Error?b:this.reason;x.abort(S instanceof kt?S:new zi(S instanceof Error?S.message:S))}};let y=c&&setTimeout(()=>{y=null,g(new kt(`timeout ${c} of ms exceeded`,kt.ETIMEDOUT))},c);const j=()=>{n&&(y&&clearTimeout(y),y=null,n.forEach(b=>{b.unsubscribe?b.unsubscribe(g):b.removeEventListener("abort",g)}),n=null)};n.forEach(b=>b.addEventListener("abort",g));const{signal:k}=x;return k.unsubscribe=()=>Be.asap(j),k}},rN=function*(n,c){let o=n.byteLength;if(o<c){yield n;return}let x=0,f;for(;x<o;)f=x+c,yield n.slice(x,f),x=f},sN=async function*(n,c){for await(const o of nN(n))yield*rN(o,c)},nN=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const c=n.getReader();try{for(;;){const{done:o,value:x}=await c.read();if(o)break;yield x}}finally{await c.cancel()}},pg=(n,c,o,x)=>{const f=sN(n,c);let g=0,y,j=k=>{y||(y=!0,x&&x(k))};return new ReadableStream({async pull(k){try{const{done:b,value:S}=await f.next();if(b){j(),k.close();return}let E=S.byteLength;if(o){let _=g+=E;o(_)}k.enqueue(new Uint8Array(S))}catch(b){throw j(b),b}},cancel(k){return j(k),f.return()}},{highWaterMark:2})},Fd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",t1=Fd&&typeof ReadableStream=="function",lN=Fd&&(typeof TextEncoder=="function"?(n=>c=>n.encode(c))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),a1=(n,...c)=>{try{return!!n(...c)}catch{return!1}},iN=t1&&a1(()=>{let n=!1;const c=new Request(wr.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!c}),yg=64*1024,Ex=t1&&a1(()=>Be.isReadableStream(new Response("").body)),kd={stream:Ex&&(n=>n.body)};Fd&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(c=>{!kd[c]&&(kd[c]=Be.isFunction(n[c])?o=>o[c]():(o,x)=>{throw new kt(`Response type '${c}' is not supported`,kt.ERR_NOT_SUPPORT,x)})})})(new Response);const oN=async n=>{if(n==null)return 0;if(Be.isBlob(n))return n.size;if(Be.isSpecCompliantForm(n))return(await new Request(wr.origin,{method:"POST",body:n}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(n)||Be.isArrayBuffer(n))return n.byteLength;if(Be.isURLSearchParams(n)&&(n=n+""),Be.isString(n))return(await lN(n)).byteLength},cN=async(n,c)=>{const o=Be.toFiniteNumber(n.getContentLength());return o??oN(c)},dN=Fd&&(async n=>{let{url:c,method:o,data:x,signal:f,cancelToken:g,timeout:y,onDownloadProgress:j,onUploadProgress:k,responseType:b,headers:S,withCredentials:E="same-origin",fetchOptions:_}=e1(n);b=b?(b+"").toLowerCase():"text";let T=aN([f,g&&g.toAbortSignal()],y),O;const M=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let z;try{if(k&&iN&&o!=="get"&&o!=="head"&&(z=await cN(S,x))!==0){let Y=new Request(c,{method:"POST",body:x,duplex:"half"}),X;if(Be.isFormData(x)&&(X=Y.headers.get("content-type"))&&S.setContentType(X),Y.body){const[U,G]=mg(z,jd(fg(k)));x=pg(Y.body,yg,U,G)}}Be.isString(E)||(E=E?"include":"omit");const I="credentials"in Request.prototype;O=new Request(c,{..._,signal:T,method:o.toUpperCase(),headers:S.normalize().toJSON(),body:x,duplex:"half",credentials:I?E:void 0});let L=await fetch(O,_);const D=Ex&&(b==="stream"||b==="response");if(Ex&&(j||D&&M)){const Y={};["status","statusText","headers"].forEach(Q=>{Y[Q]=L[Q]});const X=Be.toFiniteNumber(L.headers.get("content-length")),[U,G]=j&&mg(X,jd(fg(j),!0))||[];L=new Response(pg(L.body,yg,U,()=>{G&&G(),M&&M()}),Y)}b=b||"text";let B=await kd[Be.findKey(kd,b)||"text"](L,n);return!D&&M&&M(),await new Promise((Y,X)=>{Kp(Y,X,{data:B,headers:Br.from(L.headers),status:L.status,statusText:L.statusText,config:n,request:O})})}catch(I){throw M&&M(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new kt("Network Error",kt.ERR_NETWORK,n,O),{cause:I.cause||I}):kt.from(I,I&&I.code,n,O)}}),_x={http:Cw,xhr:tN,fetch:dN};Be.forEach(_x,(n,c)=>{if(n){try{Object.defineProperty(n,"name",{value:c})}catch{}Object.defineProperty(n,"adapterName",{value:c})}});const bg=n=>`- ${n}`,uN=n=>Be.isFunction(n)||n===null||n===!1,r1={getAdapter:n=>{n=Be.isArray(n)?n:[n];const{length:c}=n;let o,x;const f={};for(let g=0;g<c;g++){o=n[g];let y;if(x=o,!uN(o)&&(x=_x[(y=String(o)).toLowerCase()],x===void 0))throw new kt(`Unknown adapter '${y}'`);if(x)break;f[y||"#"+g]=x}if(!x){const g=Object.entries(f).map(([j,k])=>`adapter ${j} `+(k===!1?"is not supported by the environment":"is not available in the build"));let y=c?g.length>1?`since :
`+g.map(bg).join(`
`):" "+bg(g[0]):"as no adapter specified";throw new kt("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return x},adapters:_x};function Zu(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new zi(null,n)}function wg(n){return Zu(n),n.headers=Br.from(n.headers),n.data=Qu.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),r1.getAdapter(n.adapter||Jo.adapter)(n).then(function(x){return Zu(n),x.data=Qu.call(n,n.transformResponse,x),x.headers=Br.from(x.headers),x},function(x){return Wp(x)||(Zu(n),x&&x.response&&(x.response.data=Qu.call(n,n.transformResponse,x.response),x.response.headers=Br.from(x.response.headers))),Promise.reject(x)})}const s1="1.11.0",Pd={};["object","boolean","number","function","string","symbol"].forEach((n,c)=>{Pd[n]=function(x){return typeof x===n||"a"+(c<1?"n ":" ")+n}});const Ng={};Pd.transitional=function(c,o,x){function f(g,y){return"[Axios v"+s1+"] Transitional option '"+g+"'"+y+(x?". "+x:"")}return(g,y,j)=>{if(c===!1)throw new kt(f(y," has been removed"+(o?" in "+o:"")),kt.ERR_DEPRECATED);return o&&!Ng[y]&&(Ng[y]=!0,console.warn(f(y," has been deprecated since v"+o+" and will be removed in the near future"))),c?c(g,y,j):!0}};Pd.spelling=function(c){return(o,x)=>(console.warn(`${x} is likely a misspelling of ${c}`),!0)};function xN(n,c,o){if(typeof n!="object")throw new kt("options must be an object",kt.ERR_BAD_OPTION_VALUE);const x=Object.keys(n);let f=x.length;for(;f-- >0;){const g=x[f],y=c[g];if(y){const j=n[g],k=j===void 0||y(j,g,n);if(k!==!0)throw new kt("option "+g+" must be "+k,kt.ERR_BAD_OPTION_VALUE);continue}if(o!==!0)throw new kt("Unknown option "+g,kt.ERR_BAD_OPTION)}}const wd={assertOptions:xN,validators:Pd},Vs=wd.validators;let Rl=class{constructor(c){this.defaults=c||{},this.interceptors={request:new xg,response:new xg}}async request(c,o){try{return await this._request(c,o)}catch(x){if(x instanceof Error){let f={};Error.captureStackTrace?Error.captureStackTrace(f):f=new Error;const g=f.stack?f.stack.replace(/^.+\n/,""):"";try{x.stack?g&&!String(x.stack).endsWith(g.replace(/^.+\n.+\n/,""))&&(x.stack+=`
`+g):x.stack=g}catch{}}throw x}}_request(c,o){typeof c=="string"?(o=o||{},o.url=c):o=c||{},o=Ol(this.defaults,o);const{transitional:x,paramsSerializer:f,headers:g}=o;x!==void 0&&wd.assertOptions(x,{silentJSONParsing:Vs.transitional(Vs.boolean),forcedJSONParsing:Vs.transitional(Vs.boolean),clarifyTimeoutError:Vs.transitional(Vs.boolean)},!1),f!=null&&(Be.isFunction(f)?o.paramsSerializer={serialize:f}:wd.assertOptions(f,{encode:Vs.function,serialize:Vs.function},!0)),o.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?o.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:o.allowAbsoluteUrls=!0),wd.assertOptions(o,{baseUrl:Vs.spelling("baseURL"),withXsrfToken:Vs.spelling("withXSRFToken")},!0),o.method=(o.method||this.defaults.method||"get").toLowerCase();let y=g&&Be.merge(g.common,g[o.method]);g&&Be.forEach(["delete","get","head","post","put","patch","common"],O=>{delete g[O]}),o.headers=Br.concat(y,g);const j=[];let k=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(o)===!1||(k=k&&M.synchronous,j.unshift(M.fulfilled,M.rejected))});const b=[];this.interceptors.response.forEach(function(M){b.push(M.fulfilled,M.rejected)});let S,E=0,_;if(!k){const O=[wg.bind(this),void 0];for(O.unshift(...j),O.push(...b),_=O.length,S=Promise.resolve(o);E<_;)S=S.then(O[E++],O[E++]);return S}_=j.length;let T=o;for(E=0;E<_;){const O=j[E++],M=j[E++];try{T=O(T)}catch(z){M.call(this,z);break}}try{S=wg.call(this,T)}catch(O){return Promise.reject(O)}for(E=0,_=b.length;E<_;)S=S.then(b[E++],b[E++]);return S}getUri(c){c=Ol(this.defaults,c);const o=Jp(c.baseURL,c.url,c.allowAbsoluteUrls);return $p(o,c.params,c.paramsSerializer)}};Be.forEach(["delete","get","head","options"],function(c){Rl.prototype[c]=function(o,x){return this.request(Ol(x||{},{method:c,url:o,data:(x||{}).data}))}});Be.forEach(["post","put","patch"],function(c){function o(x){return function(g,y,j){return this.request(Ol(j||{},{method:c,headers:x?{"Content-Type":"multipart/form-data"}:{},url:g,data:y}))}}Rl.prototype[c]=o(),Rl.prototype[c+"Form"]=o(!0)});let hN=class n1{constructor(c){if(typeof c!="function")throw new TypeError("executor must be a function.");let o;this.promise=new Promise(function(g){o=g});const x=this;this.promise.then(f=>{if(!x._listeners)return;let g=x._listeners.length;for(;g-- >0;)x._listeners[g](f);x._listeners=null}),this.promise.then=f=>{let g;const y=new Promise(j=>{x.subscribe(j),g=j}).then(f);return y.cancel=function(){x.unsubscribe(g)},y},c(function(g,y,j){x.reason||(x.reason=new zi(g,y,j),o(x.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(c){if(this.reason){c(this.reason);return}this._listeners?this._listeners.push(c):this._listeners=[c]}unsubscribe(c){if(!this._listeners)return;const o=this._listeners.indexOf(c);o!==-1&&this._listeners.splice(o,1)}toAbortSignal(){const c=new AbortController,o=x=>{c.abort(x)};return this.subscribe(o),c.signal.unsubscribe=()=>this.unsubscribe(o),c.signal}static source(){let c;return{token:new n1(function(f){c=f}),cancel:c}}};function mN(n){return function(o){return n.apply(null,o)}}function fN(n){return Be.isObject(n)&&n.isAxiosError===!0}const Tx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Tx).forEach(([n,c])=>{Tx[c]=n});function l1(n){const c=new Rl(n),o=Bp(Rl.prototype.request,c);return Be.extend(o,Rl.prototype,c,{allOwnKeys:!0}),Be.extend(o,c,null,{allOwnKeys:!0}),o.create=function(f){return l1(Ol(n,f))},o}const Fa=l1(Jo);Fa.Axios=Rl;Fa.CanceledError=zi;Fa.CancelToken=hN;Fa.isCancel=Wp;Fa.VERSION=s1;Fa.toFormData=zd;Fa.AxiosError=kt;Fa.Cancel=Fa.CanceledError;Fa.all=function(c){return Promise.all(c)};Fa.spread=mN;Fa.isAxiosError=fN;Fa.mergeConfig=Ol;Fa.AxiosHeaders=Br;Fa.formToJSON=n=>Zp(Be.isHTMLForm(n)?new FormData(n):n);Fa.getAdapter=r1.getAdapter;Fa.HttpStatusCode=Tx;Fa.default=Fa;const{Axios:Uk,AxiosError:Hk,CanceledError:Vk,isCancel:qk,CancelToken:Gk,VERSION:Yk,all:Xk,Cancel:$k,isAxiosError:Qk,spread:Zk,toFormData:Wk,AxiosHeaders:Kk,HttpStatusCode:Jk,formToJSON:e6,getAdapter:t6,mergeConfig:a6}=Fa,da=N.createContext(null);function gN({children:n}){const[c,o]=N.useState(()=>{const _=localStorage.getItem("houseOwnerToken"),T=localStorage.getItem("houseOwnerData"),O=localStorage.getItem("userType");if(_&&T&&O==="houseowner")return{accessToken:_,user:JSON.parse(T),userType:"houseowner"};const M=localStorage.getItem("auth");return M?{...JSON.parse(M),userType:localStorage.getItem("userType")||"admin"}:{accessToken:null,user:null,userType:null}}),x=Vt(),f=N.useRef(null),g=600*1e3,y=N.useCallback(()=>{o({accessToken:null,user:null,userType:null}),localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("houseOwnerToken"),localStorage.removeItem("houseOwnerData"),localStorage.removeItem("lastActivity"),f.current&&clearTimeout(f.current),x("/login")},[x]),j=N.useCallback(()=>{f.current&&clearTimeout(f.current),localStorage.setItem("lastActivity",Date.now().toString()),f.current=setTimeout(()=>{y()},g)},[y,g]),k=N.useCallback(()=>{const _=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],T=()=>{j()};_.forEach(M=>{window.addEventListener(M,T,{passive:!0})});const O=()=>{document.hidden||j()};return document.addEventListener("visibilitychange",O),()=>{_.forEach(M=>{window.removeEventListener(M,T)}),document.removeEventListener("visibilitychange",O),f.current&&clearTimeout(f.current)}},[j]);N.useEffect(()=>{if(c&&c.accessToken){const _=localStorage.getItem("lastActivity");if(_){const O=parseInt(_,10),M=Date.now()-O;if(M>g){y();return}const z=g-M;f.current=setTimeout(y,z)}else j();return k()}else f.current&&clearTimeout(f.current)},[c,j,k,y,g]);const b=N.useCallback(_=>{const T=_.user?.isHouseOwner?"houseowner":"admin",O={..._,userType:T};o(O),_&&_.accessToken?(T==="houseowner"?(localStorage.setItem("houseOwnerToken",_.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(_.user))):(localStorage.setItem("auth",JSON.stringify(_)),localStorage.setItem("accessToken",_.accessToken),localStorage.setItem("user",JSON.stringify(_.user))),localStorage.setItem("userType",T),j()):y()},[j,y]),S=N.useCallback(async()=>{try{c.userType==="houseowner"?await fe.post("/houseowner-auth/logout",{},{credentials:"include"}):await fe.post("/auth/logout",{},{credentials:"include"})}catch(_){console.error("Logout error:",_)}finally{y()}},[y,c.userType]),E={auth:c,setAuth:b,logout:S,resetActivityTimer:j};return e.jsx(da.Provider,{value:E,children:n})}const fe=Fa.create({baseURL:"http://localhost:2500/api",withCredentials:!0});fe.interceptors.request.use(n=>{try{const c=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");c&&(n.headers=n.headers||{},n.headers.Authorization=`Bearer ${c}`)}catch{}return n},n=>Promise.reject(n));fe.interceptors.response.use(n=>n,async n=>{const c=n.config;if(n.response&&n.response.status===401&&!c?._retry){c._retry=!0;try{const x=(await fe.post("/auth/refresh")).data?.accessToken;if(x){try{localStorage.setItem("accessToken",x)}catch{}fe.defaults.headers.common.Authorization=`Bearer ${x}`,c.headers=c.headers||{},c.headers.Authorization=`Bearer ${x}`}return fe(c)}catch(o){try{window.location.href="/login"}catch{}return Promise.reject(o)}}return Promise.reject(n)});/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yN=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,o,x)=>x?x.toUpperCase():o.toLowerCase()),vg=n=>{const c=yN(n);return c.charAt(0).toUpperCase()+c.slice(1)},i1=(...n)=>n.filter((c,o,x)=>!!c&&c.trim()!==""&&x.indexOf(c)===o).join(" ").trim(),bN=n=>{for(const c in n)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=N.forwardRef(({color:n="currentColor",size:c=24,strokeWidth:o=2,absoluteStrokeWidth:x,className:f="",children:g,iconNode:y,...j},k)=>N.createElement("svg",{ref:k,...wN,width:c,height:c,stroke:n,strokeWidth:x?Number(o)*24/Number(c):o,className:i1("lucide",f),...!g&&!bN(j)&&{"aria-hidden":"true"},...j},[...y.map(([b,S])=>N.createElement(b,S)),...Array.isArray(g)?g:[g]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=(n,c)=>{const o=N.forwardRef(({className:x,...f},g)=>N.createElement(NN,{ref:g,iconNode:c,className:i1(`lucide-${pN(vg(n))}`,`lucide-${n}`,x),...f}));return o.displayName=vg(n),o};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],jN=We("activity",vN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],jg=We("arrow-big-right",kN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],SN=We("arrow-down-right",CN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Mi=We("arrow-left",AN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_N=We("arrow-right",EN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],sl=We("arrow-up-right",TN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],DN=We("award",MN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],IN=We("banknote-arrow-down",RN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],BN=We("bath",ON);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],zN=We("bed",LN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Wu=We("bell",FN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Cd=We("briefcase",PN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],er=We("building-2",UN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HN=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Di=We("building",HN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],qN=We("calendar-clock",VN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],nl=We("calendar",GN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],o1=We("camera",YN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XN=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Nd=We("chart-no-axes-column-increasing",XN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $N=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],ys=We("check",$N);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QN=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ri=We("chevron-down",QN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],bs=We("chevron-left",ZN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],KN=We("chevron-right",WN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ii=We("chevron-up",JN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Da=We("circle-alert",ev);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nr=We("circle-check-big",tv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const av=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],rv=We("circle-play",av);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],nv=We("circle-stop",sv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Mx=We("circle-x",lv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],kg=We("clipboard-list",iv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Wr=We("clock",ov);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Qx=We("credit-card",cv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Qr=We("dollar-sign",dv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ec=We("download",uv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],bn=We("eye-off",xv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ws=We("eye",hv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ht=We("file-text",mv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Ud=We("funnel",fv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],c1=We("globe",gv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],yv=We("hash",pv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],ga=We("house",bv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],d1=We("id-card",wv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Kr=We("image",Nv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],u1=We("key",vv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z",key:"15q6uc"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845",key:"byia6g"}]],kv=We("layers-2",jv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Zx=We("layers",Cv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Av=We("layout-dashboard",Sv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],yt=We("loader",Ev);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Dx=We("log-out",_v);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ll=We("mail",Tv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Bl=We("map-pin",Mv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Ul=We("menu",Dv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Rx=We("moon",Rv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Ov=We("palette",Iv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],Lv=We("panel-left",Bv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],Fv=We("pause",zv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Uv=We("phone-call",Pv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Fi=We("phone",Hv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],x1=We("play",Vv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tr=We("plus",qv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Vo=We("qr-code",Gv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ga=We("receipt",Yv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Sd=We("refresh-cw",Xv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],h1=We("rotate-cw",$v);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Hd=We("save",Qv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ar=We("search",Zv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],m1=We("send",Wv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ad=We("settings",Kv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Cg=We("shield-check",Jv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ej=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ll=We("shield",ej);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],aj=We("square-check-big",tj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Pa=We("square-pen",rj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ed=We("square",sj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nj=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],lj=We("star",nj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Ix=We("sun",ij);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],f1=We("tag",oj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],g1=We("timer",cj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dj=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],zl=We("toggle-left",dj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uj=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Fl=We("toggle-right",uj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],ua=We("trash-2",xj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],mj=We("triangle-alert",hj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fj=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ns=We("upload",fj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pj=We("user-check",gj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],qo=We("user-plus",yj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],wj=We("user-x",bj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nj=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vr=We("user",Nj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vs=We("users",vj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jj=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Sg=We("workflow",jj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kj=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],_d=We("wrench",kj);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cj=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gt=We("x",Cj);function p1(n){var c,o,x="";if(typeof n=="string"||typeof n=="number")x+=n;else if(typeof n=="object")if(Array.isArray(n)){var f=n.length;for(c=0;c<f;c++)n[c]&&(o=p1(n[c]))&&(x&&(x+=" "),x+=o)}else for(o in n)n[o]&&(x&&(x+=" "),x+=o);return x}function Il(){for(var n,c,o=0,x="",f=arguments.length;o<f;o++)(n=arguments[o])&&(c=p1(n))&&(x&&(x+=" "),x+=c);return x}function Sj(n){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css",c.firstChild?c.insertBefore(o,c.firstChild):c.appendChild(o),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(document.createTextNode(n))}Sj(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var tc=n=>typeof n=="number"&&!isNaN(n),Pl=n=>typeof n=="string",wn=n=>typeof n=="function",Aj=n=>Pl(n)||tc(n),Ox=n=>Pl(n)||wn(n)?n:null,Ej=(n,c)=>n===!1||tc(n)&&n>0?n:c,Bx=n=>N.isValidElement(n)||Pl(n)||wn(n)||tc(n);function _j(n,c,o=300){let{scrollHeight:x,style:f}=n;requestAnimationFrame(()=>{f.minHeight="initial",f.height=x+"px",f.transition=`all ${o}ms`,requestAnimationFrame(()=>{f.height="0",f.padding="0",f.margin="0",setTimeout(c,o)})})}function Tj({enter:n,exit:c,appendPosition:o=!1,collapse:x=!0,collapseDuration:f=300}){return function({children:g,position:y,preventExitTransition:j,done:k,nodeRef:b,isIn:S,playToast:E}){let _=o?`${n}--${y}`:n,T=o?`${c}--${y}`:c,O=N.useRef(0);return N.useLayoutEffect(()=>{let M=b.current,z=_.split(" "),I=L=>{L.target===b.current&&(E(),M.removeEventListener("animationend",I),M.removeEventListener("animationcancel",I),O.current===0&&L.type!=="animationcancel"&&M.classList.remove(...z))};M.classList.add(...z),M.addEventListener("animationend",I),M.addEventListener("animationcancel",I)},[]),N.useEffect(()=>{let M=b.current,z=()=>{M.removeEventListener("animationend",z),x?_j(M,k,f):k()};S||(j?z():(O.current=1,M.className+=` ${T}`,M.addEventListener("animationend",z)))},[S]),la.createElement(la.Fragment,null,g)}}function Ag(n,c){return{content:y1(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:c}}function y1(n,c,o=!1){return N.isValidElement(n)&&!Pl(n.type)?N.cloneElement(n,{closeToast:c.closeToast,toastProps:c,data:c.data,isPaused:o}):wn(n)?n({closeToast:c.closeToast,toastProps:c,data:c.data,isPaused:o}):n}function Mj({closeToast:n,theme:c,ariaLabel:o="close"}){return la.createElement("button",{className:`Toastify__close-button Toastify__close-button--${c}`,type:"button",onClick:x=>{x.stopPropagation(),n(!0)},"aria-label":o},la.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},la.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Dj({delay:n,isRunning:c,closeToast:o,type:x="default",hide:f,className:g,controlledProgress:y,progress:j,rtl:k,isIn:b,theme:S}){let E=f||y&&j===0,_={animationDuration:`${n}ms`,animationPlayState:c?"running":"paused"};y&&(_.transform=`scaleX(${j})`);let T=Il("Toastify__progress-bar",y?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${S}`,`Toastify__progress-bar--${x}`,{"Toastify__progress-bar--rtl":k}),O=wn(g)?g({rtl:k,type:x,defaultClassName:T}):Il(T,g),M={[y&&j>=1?"onTransitionEnd":"onAnimationEnd"]:y&&j<1?null:()=>{b&&o()}};return la.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},la.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${S} Toastify__progress-bar--${x}`}),la.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:O,style:_,...M}))}var Rj=1,b1=()=>`${Rj++}`;function Ij(n,c,o){let x=1,f=0,g=[],y=[],j=c,k=new Map,b=new Set,S=L=>(b.add(L),()=>b.delete(L)),E=()=>{y=Array.from(k.values()),b.forEach(L=>L())},_=({containerId:L,toastId:D,updateId:B})=>{let Y=L?L!==n:n!==1,X=k.has(D)&&B==null;return Y||X},T=(L,D)=>{k.forEach(B=>{var Y;(D==null||D===B.props.toastId)&&((Y=B.toggle)==null||Y.call(B,L))})},O=L=>{var D,B;(B=(D=L.props)==null?void 0:D.onClose)==null||B.call(D,L.removalReason),L.isActive=!1},M=L=>{if(L==null)k.forEach(O);else{let D=k.get(L);D&&O(D)}E()},z=()=>{f-=g.length,g=[]},I=L=>{var D,B;let{toastId:Y,updateId:X}=L.props,U=X==null;L.staleId&&k.delete(L.staleId),L.isActive=!0,k.set(Y,L),E(),o(Ag(L,U?"added":"updated")),U&&((B=(D=L.props).onOpen)==null||B.call(D))};return{id:n,props:j,observe:S,toggle:T,removeToast:M,toasts:k,clearQueue:z,buildToast:(L,D)=>{if(_(D))return;let{toastId:B,updateId:Y,data:X,staleId:U,delay:G}=D,Q=Y==null;Q&&f++;let le={...j,style:j.toastStyle,key:x++,...Object.fromEntries(Object.entries(D).filter(([te,re])=>re!=null)),toastId:B,updateId:Y,data:X,isIn:!1,className:Ox(D.className||j.toastClassName),progressClassName:Ox(D.progressClassName||j.progressClassName),autoClose:D.isLoading?!1:Ej(D.autoClose,j.autoClose),closeToast(te){k.get(B).removalReason=te,M(B)},deleteToast(){let te=k.get(B);if(te!=null){if(o(Ag(te,"removed")),k.delete(B),f--,f<0&&(f=0),g.length>0){I(g.shift());return}E()}}};le.closeButton=j.closeButton,D.closeButton===!1||Bx(D.closeButton)?le.closeButton=D.closeButton:D.closeButton===!0&&(le.closeButton=Bx(j.closeButton)?j.closeButton:!0);let ce={content:L,props:le,staleId:U};j.limit&&j.limit>0&&f>j.limit&&Q?g.push(ce):tc(G)?setTimeout(()=>{I(ce)},G):I(ce)},setProps(L){j=L},setToggle:(L,D)=>{let B=k.get(L);B&&(B.toggle=D)},isToastActive:L=>{var D;return(D=k.get(L))==null?void 0:D.isActive},getSnapshot:()=>y}}var Sr=new Map,Go=[],Lx=new Set,Oj=n=>Lx.forEach(c=>c(n)),w1=()=>Sr.size>0;function Bj(){Go.forEach(n=>v1(n.content,n.options)),Go=[]}var Lj=(n,{containerId:c})=>{var o;return(o=Sr.get(c||1))==null?void 0:o.toasts.get(n)};function N1(n,c){var o;if(c)return!!((o=Sr.get(c))!=null&&o.isToastActive(n));let x=!1;return Sr.forEach(f=>{f.isToastActive(n)&&(x=!0)}),x}function zj(n){if(!w1()){Go=Go.filter(c=>n!=null&&c.options.toastId!==n);return}if(n==null||Aj(n))Sr.forEach(c=>{c.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let c=Sr.get(n.containerId);c?c.removeToast(n.id):Sr.forEach(o=>{o.removeToast(n.id)})}}var Fj=(n={})=>{Sr.forEach(c=>{c.props.limit&&(!n.containerId||c.id===n.containerId)&&c.clearQueue()})};function v1(n,c){Bx(n)&&(w1()||Go.push({content:n,options:c}),Sr.forEach(o=>{o.buildToast(n,c)}))}function Pj(n){var c;(c=Sr.get(n.containerId||1))==null||c.setToggle(n.id,n.fn)}function j1(n,c){Sr.forEach(o=>{(c==null||!(c!=null&&c.containerId)||c?.containerId===o.id)&&o.toggle(n,c?.id)})}function Uj(n){let c=n.containerId||1;return{subscribe(o){let x=Ij(c,n,Oj);Sr.set(c,x);let f=x.observe(o);return Bj(),()=>{f(),Sr.delete(c)}},setProps(o){var x;(x=Sr.get(c))==null||x.setProps(o)},getSnapshot(){var o;return(o=Sr.get(c))==null?void 0:o.getSnapshot()}}}function Hj(n){return Lx.add(n),()=>{Lx.delete(n)}}function Vj(n){return n&&(Pl(n.toastId)||tc(n.toastId))?n.toastId:b1()}function ac(n,c){return v1(n,c),c.toastId}function Vd(n,c){return{...c,type:c&&c.type||n,toastId:Vj(c)}}function qd(n){return(c,o)=>ac(c,Vd(n,o))}function J(n,c){return ac(n,Vd("default",c))}J.loading=(n,c)=>ac(n,Vd("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...c}));function qj(n,{pending:c,error:o,success:x},f){let g;c&&(g=Pl(c)?J.loading(c,f):J.loading(c.render,{...f,...c}));let y={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},j=(b,S,E)=>{if(S==null){J.dismiss(g);return}let _={type:b,...y,...f,data:E},T=Pl(S)?{render:S}:S;return g?J.update(g,{..._,...T}):J(T.render,{..._,...T}),E},k=wn(n)?n():n;return k.then(b=>j("success",x,b)).catch(b=>j("error",o,b)),k}J.promise=qj;J.success=qd("success");J.info=qd("info");J.error=qd("error");J.warning=qd("warning");J.warn=J.warning;J.dark=(n,c)=>ac(n,Vd("default",{theme:"dark",...c}));function Gj(n){zj(n)}J.dismiss=Gj;J.clearWaitingQueue=Fj;J.isActive=N1;J.update=(n,c={})=>{let o=Lj(n,c);if(o){let{props:x,content:f}=o,g={delay:100,...x,...c,toastId:c.toastId||n,updateId:b1()};g.toastId!==n&&(g.staleId=n);let y=g.render||f;delete g.render,ac(y,g)}};J.done=n=>{J.update(n,{progress:1})};J.onChange=Hj;J.play=n=>j1(!0,n);J.pause=n=>j1(!1,n);function Yj(n){var c;let{subscribe:o,getSnapshot:x,setProps:f}=N.useRef(Uj(n)).current;f(n);let g=(c=N.useSyncExternalStore(o,x,x))==null?void 0:c.slice();function y(j){if(!g)return[];let k=new Map;return n.newestOnTop&&g.reverse(),g.forEach(b=>{let{position:S}=b.props;k.has(S)||k.set(S,[]),k.get(S).push(b)}),Array.from(k,b=>j(b[0],b[1]))}return{getToastToRender:y,isToastActive:N1,count:g?.length}}function Xj(n){let[c,o]=N.useState(!1),[x,f]=N.useState(!1),g=N.useRef(null),y=N.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:j,pauseOnHover:k,closeToast:b,onClick:S,closeOnClick:E}=n;Pj({id:n.toastId,containerId:n.containerId,fn:o}),N.useEffect(()=>{if(n.pauseOnFocusLoss)return _(),()=>{T()}},[n.pauseOnFocusLoss]);function _(){document.hasFocus()||I(),window.addEventListener("focus",z),window.addEventListener("blur",I)}function T(){window.removeEventListener("focus",z),window.removeEventListener("blur",I)}function O(U){if(n.draggable===!0||n.draggable===U.pointerType){L();let G=g.current;y.canCloseOnClick=!0,y.canDrag=!0,G.style.transition="none",n.draggableDirection==="x"?(y.start=U.clientX,y.removalDistance=G.offsetWidth*(n.draggablePercent/100)):(y.start=U.clientY,y.removalDistance=G.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function M(U){let{top:G,bottom:Q,left:le,right:ce}=g.current.getBoundingClientRect();U.nativeEvent.type!=="touchend"&&n.pauseOnHover&&U.clientX>=le&&U.clientX<=ce&&U.clientY>=G&&U.clientY<=Q?I():z()}function z(){o(!0)}function I(){o(!1)}function L(){y.didMove=!1,document.addEventListener("pointermove",B),document.addEventListener("pointerup",Y)}function D(){document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",Y)}function B(U){let G=g.current;if(y.canDrag&&G){y.didMove=!0,c&&I(),n.draggableDirection==="x"?y.delta=U.clientX-y.start:y.delta=U.clientY-y.start,y.start!==U.clientX&&(y.canCloseOnClick=!1);let Q=n.draggableDirection==="x"?`${y.delta}px, var(--y)`:`0, calc(${y.delta}px + var(--y))`;G.style.transform=`translate3d(${Q},0)`,G.style.opacity=`${1-Math.abs(y.delta/y.removalDistance)}`}}function Y(){D();let U=g.current;if(y.canDrag&&y.didMove&&U){if(y.canDrag=!1,Math.abs(y.delta)>y.removalDistance){f(!0),n.closeToast(!0),n.collapseAll();return}U.style.transition="transform 0.2s, opacity 0.2s",U.style.removeProperty("transform"),U.style.removeProperty("opacity")}}let X={onPointerDown:O,onPointerUp:M};return j&&k&&(X.onMouseEnter=I,n.stacked||(X.onMouseLeave=z)),E&&(X.onClick=U=>{S&&S(U),y.canCloseOnClick&&b(!0)}),{playToast:z,pauseToast:I,isRunning:c,preventExitTransition:x,toastRef:g,eventHandlers:X}}var $j=typeof window<"u"?N.useLayoutEffect:N.useEffect,Gd=({theme:n,type:c,isLoading:o,...x})=>la.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${c})`,...x});function Qj(n){return la.createElement(Gd,{...n},la.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Zj(n){return la.createElement(Gd,{...n},la.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Wj(n){return la.createElement(Gd,{...n},la.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Kj(n){return la.createElement(Gd,{...n},la.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Jj(){return la.createElement("div",{className:"Toastify__spinner"})}var zx={info:Zj,warning:Qj,success:Wj,error:Kj,spinner:Jj},e4=n=>n in zx;function t4({theme:n,type:c,isLoading:o,icon:x}){let f=null,g={theme:n,type:c};return x===!1||(wn(x)?f=x({...g,isLoading:o}):N.isValidElement(x)?f=N.cloneElement(x,g):o?f=zx.spinner():e4(c)&&(f=zx[c](g))),f}var a4=n=>{let{isRunning:c,preventExitTransition:o,toastRef:x,eventHandlers:f,playToast:g}=Xj(n),{closeButton:y,children:j,autoClose:k,onClick:b,type:S,hideProgressBar:E,closeToast:_,transition:T,position:O,className:M,style:z,progressClassName:I,updateId:L,role:D,progress:B,rtl:Y,toastId:X,deleteToast:U,isIn:G,isLoading:Q,closeOnClick:le,theme:ce,ariaLabel:te}=n,re=Il("Toastify__toast",`Toastify__toast-theme--${ce}`,`Toastify__toast--${S}`,{"Toastify__toast--rtl":Y},{"Toastify__toast--close-on-click":le}),W=wn(M)?M({rtl:Y,position:O,type:S,defaultClassName:re}):Il(re,M),P=t4(n),$=!!B||!k,ne={closeToast:_,type:S,theme:ce},de=null;return y===!1||(wn(y)?de=y(ne):N.isValidElement(y)?de=N.cloneElement(y,ne):de=Mj(ne)),la.createElement(T,{isIn:G,done:U,position:O,preventExitTransition:o,nodeRef:x,playToast:g},la.createElement("div",{id:X,tabIndex:0,onClick:b,"data-in":G,className:W,...f,style:z,ref:x,...G&&{role:D,"aria-label":te}},P!=null&&la.createElement("div",{className:Il("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Q})},P),y1(j,n,!c),de,!n.customProgressBar&&la.createElement(Dj,{...L&&!$?{key:`p-${L}`}:{},rtl:Y,theme:ce,delay:k,isRunning:c,isIn:G,closeToast:_,hide:E,type:S,className:I,controlledProgress:$,progress:B||0})))},r4=(n,c=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:c}),s4=Tj(r4("bounce",!0)),n4={position:"top-right",transition:s4,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function Dt(n){let c={...n4,...n},o=n.stacked,[x,f]=N.useState(!0),g=N.useRef(null),{getToastToRender:y,isToastActive:j,count:k}=Yj(c),{className:b,style:S,rtl:E,containerId:_,hotKeys:T}=c;function O(z){let I=Il("Toastify__toast-container",`Toastify__toast-container--${z}`,{"Toastify__toast-container--rtl":E});return wn(b)?b({position:z,rtl:E,defaultClassName:I}):Il(I,Ox(b))}function M(){o&&(f(!0),J.play())}return $j(()=>{var z;if(o){let I=g.current.querySelectorAll('[data-in="true"]'),L=12,D=(z=c.position)==null?void 0:z.includes("top"),B=0,Y=0;Array.from(I).reverse().forEach((X,U)=>{let G=X;G.classList.add("Toastify__toast--stacked"),U>0&&(G.dataset.collapsed=`${x}`),G.dataset.pos||(G.dataset.pos=D?"top":"bot");let Q=B*(x?.2:1)+(x?0:L*U);G.style.setProperty("--y",`${D?Q:Q*-1}px`),G.style.setProperty("--g",`${L}`),G.style.setProperty("--s",`${1-(x?Y:0)}`),B+=G.offsetHeight,Y+=.025})}},[x,k,o]),N.useEffect(()=>{function z(I){var L;let D=g.current;T(I)&&((L=D.querySelector('[tabIndex="0"]'))==null||L.focus(),f(!1),J.pause()),I.key==="Escape"&&(document.activeElement===D||D!=null&&D.contains(document.activeElement))&&(f(!0),J.play())}return document.addEventListener("keydown",z),()=>{document.removeEventListener("keydown",z)}},[T]),la.createElement("section",{ref:g,className:"Toastify",id:_,onMouseEnter:()=>{o&&(f(!1),J.pause())},onMouseLeave:M,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":c["aria-label"]},y((z,I)=>{let L=I.length?{...S}:{...S,pointerEvents:"none"};return la.createElement("div",{tabIndex:-1,className:O(z),"data-stacked":o,style:L,key:`c-${z}`},I.map(({content:D,props:B})=>la.createElement(a4,{...B,stacked:o,collapseAll:M,isIn:j(B.toastId,B.containerId),key:`t-${B.key}`},D)))}))}function l4(){const{setAuth:n}=N.useContext(da),[c,o]=N.useState(""),[x,f]=N.useState(""),[g,y]=N.useState(!1),[j,k]=N.useState(null),[b,S]=N.useState(!1),[E,_]=N.useState(!1),[T,O]=N.useState(!1),[M,z]=N.useState(0),[I,L]=N.useState("admin"),D=Vt();let[B,Y]=Qo();N.useEffect(()=>{const $=B.get("token"),ne=B.get("id"),de=B.get("type");$&&ne&&(de==="houseowner"?U($,ne):X($,ne))},[B]);const X=async($,ne)=>{S(!0),k(null);try{await fe.post("/auth/verify",{token:$,id:ne}),J.success("Email verified successfully! You can now log in."),Y({})}catch(de){J.error(de.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{S(!1)}},U=async($,ne)=>{S(!0),k(null);try{const de=await fe.post("/houseowner-auth/verify",{token:$,id:ne});de.data.success&&(de.data.requires_password?(J.success("Email verified! Please set your password."),D(`/houseowner/set-password?token=${$}&id=${ne}`)):(J.success("Email verified successfully! You can now log in."),Y({})))}catch(de){J.error(de.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{S(!1)}};async function G($){if($.preventDefault(),!(b||T)){k(null),S(!0);try{const ne=await fe.post("/auth/login-unified",{email:c,password:x});if(ne.data.accessToken){n({accessToken:ne.data.accessToken,user:ne.data.user}),J.success("Login Successful!");try{localStorage.setItem("accessToken",ne.data.accessToken),localStorage.setItem("user",JSON.stringify(ne.data.user)),localStorage.setItem("userType",ne.data.user.user_type)}catch(de){console.warn("Could not save to localStorage:",de)}Q(ne.data.user);return}}catch(ne){le(ne)}finally{S(!1)}}}const Q=$=>{$.user_type==="houseowner"?D("/houseowner/dashboard"):$.role==="Admin"?D("/admindashboard"):D("/employee-dashboard")},le=$=>{if($.response?.status===429)ce($);else{const de=$.response?.data?.message||"Login failed";k(de),J.error(de),(de.includes("verify")||de.includes("verified"))&&te()}},ce=$=>{const ne=$.response?.headers?.["retry-after"],de=ne?Math.max(1,Number(ne)):60;J.error(`Too many requests. Please wait ${de}s before trying again.`),O(!0),z(de);try{localStorage.setItem("rateLimitedUntil",Date.now()+de*1e3)}catch(H){console.warn("Could not save rate limit info:",H)}let Ce=de;const ee=setInterval(()=>{if(Ce-=1,z(Ce),Ce<=0){clearInterval(ee),O(!1),z(0);try{localStorage.removeItem("rateLimitedUntil")}catch(H){console.warn("Could not clear rate limit info:",H)}}},1e3)},te=()=>{J.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:re,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:E,children:E?"Sending...":"Resend Verification"})]}),{autoClose:5e3})},re=async $=>{if($.preventDefault(),!c){J.error("Please enter your email first");return}_(!0);try{I==="houseowner"?await fe.post("/houseowner-auth/resend-verification",{email:c}):await fe.post("/auth/resend",{email:c}),J.success("Verification email sent! Please check your inbox.")}catch(ne){J.error(ne.response?.data?.message||"Failed to resend verification email")}finally{_(!1)}},W=()=>{D("/forgot-password")},P=()=>{D("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),b&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:G,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:c,onChange:$=>o($.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:x,onChange:$=>f($.target.value),placeholder:"Password",type:g?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>y(!g),className:"passwordToggle","aria-label":g?"Hide password":"Show password",children:g?e.jsx(bn,{size:20}):e.jsx(ws,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:b||T,children:T?`Try again in ${M}s`:b?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:P,disabled:b,children:"Cancel"})]})]}),j&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:j}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:W,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),I==="admin"&&e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email?"," ",e.jsx("button",{type:"button",onClick:re,disabled:E,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:E?"Sending...":"Resend"})]}),I==="houseowner"&&e.jsx("p",{className:"mt-4 text-sm text-center text-gray-600",children:"Need help? Contact your apartment administrator."})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function i4(){const[n,c]=N.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[o,x]=N.useState({regNo:"",name:"",address:""}),[f,g]=N.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[y,j]=N.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[k,b]=N.useState(1),[S,E]=N.useState(!1),[_,T]=N.useState(!1),[O,M]=N.useState([]);N.useEffect(()=>{(async()=>{try{const P=await fe.get("/countries");M(P.data.data)}catch(P){console.error("Error fetching countries:",P)}})()},[]);const z=W=>{const P=W.target.value,$=O.find(ne=>ne.id.toString()===P);$&&c(ne=>({...ne,country:$.country_name,mobile:$.phone_code}))},I=Vt(),L=3,D=(W,P)=>{let $="";switch(W){case"firstname":P.trim()?P.length<3?$="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(P)?P.length>20&&($="First name cannot exceed 20 characters"):$="First name can only contain letters, and numbers":$="First name is required";break;case"lastname":P.trim()?P.length<3?$="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(P)?P.length>20&&($="Last name cannot exceed 20 characters"):$="Last name can only contain letters, and numbers":$="Last name is required";break;case"country":P.trim()||($="Country is required");break;case"mobile":P.trim()?/^\+\d{2} \d{9}$/.test(P)?P.length>15&&($="Mobile cannot exceed 15 digits"):$="Mobile must be in format +XX XXXXXXXXX":$="Mobile Number is required";break;case"email":P.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(P)||($="Please enter a valid email address"):$="Email is required";break;case"password":P?P.length<8?$="Password must be at least 8 characters":/(?=.*[a-z])/.test(P)?/(?=.*[A-Z])/.test(P)?/(?=.*\d)/.test(P)?/(?=.*[@$!%*?&])/.test(P)||($="Password must contain at least one special character (@$!%*?&)"):$="Password must contain at least one number":$="Password must contain at least one uppercase letter":$="Password must contain at least one lowercase letter":$="Password is required";break;case"confirmPassword":P?P!==n.password&&($="Passwords do not match"):$="Please confirm your password";break;case"regNo":P.trim()?P.length<2&&($="Business REgistration No must be at least 2 characters"):$="Business Registration No is required";break;case"name":P.trim()?P.length<2&&($="Company name must be at least 2 characters"):$="Company name is required";break;case"address":P.trim()?P.length<3&&($="Company address must be at least 3 characters"):$="Company address is required";break}return $},B=(W,P=!1)=>{const{name:$,value:ne}=W.target;if(P?x(de=>({...de,[$]:ne})):c(de=>({...de,[$]:ne})),y[$]){const de=D($,ne);g(Ce=>({...Ce,[$]:de}))}},Y=(W,P=!1)=>{const{name:$}=W.target;j(Ce=>({...Ce,[$]:!0}));const ne=P?o[$]:n[$],de=D($,ne);g(Ce=>({...Ce,[$]:de}))},X=W=>{if(c(P=>({...P,confirmPassword:W})),y.confirmPassword){const P=D("confirmPassword",W);g($=>({...$,confirmPassword:P}))}},U=W=>{const P={},$={};let ne=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[W].forEach(Ce=>{$[Ce]=!0;const ee=Ce in o?o[Ce]:n[Ce],H=D(Ce,ee);P[Ce]=H,H&&(ne=!1)}),j(Ce=>({...Ce,...$})),g(Ce=>({...Ce,...P})),ne},G=()=>{U(k)?b(k+1):J.error("Please fix the validation errors before proceeding")},Q=()=>{b(k-1)};async function le(W){W.preventDefault();let P=!0;for(let $=1;$<=L;$++)if(!U($)){P=!1,$!==k&&b($);break}if(!P){J.error("Please fix all validation errors before submitting");return}try{const $={regNo:o.regNo,name:o.name,address:o.address};console.log("Sending company data to /tenants:",$);const ne=await fe.post("/tenants",$);console.log("Company registration successful:",ne.data);const de=ne.data.data.id,Ce=await fe.post("/auth/register",{firstname:n.firstname,lastname:n.lastname,country:n.country,mobile:n.mobile,email:n.email,password:n.password,company_id:de});console.log("User registration successful:",Ce.data),J.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>I("/login"),3e3)}catch($){console.error("Registration error:",$),$.response?.status===403?J.error("Access denied. Please try registering again."):$.response?.data?.message?J.error($.response.data.message):J.error("Registration failed. Please try again.")}}const te=(()=>{if(!n.password)return{strength:0,label:""};let W=0;return n.password.length>=8&&W++,/(?=.*[a-z])/.test(n.password)&&W++,/(?=.*[A-Z])/.test(n.password)&&W++,/(?=.*\d)/.test(n.password)&&W++,/(?=.*[@$!%*?&])/.test(n.password)&&W++,{strength:W,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][W]}})(),re=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:re.map(W=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${k>=W.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:W.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:W.title})]},W.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(k-1)/(L-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:le,className:"loginForm",children:[k===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:o.regNo,onChange:W=>B(W,!0),onBlur:W=>Y(W,!0),placeholder:"Company Registration No *",className:`loginInput ${f.regNo?"border-red-500":y.regNo&&"border-green-500"}`}),y.regNo&&f.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:o.name,onChange:W=>B(W,!0),onBlur:W=>Y(W,!0),placeholder:"Company Name *",className:`loginInput ${f.name?"border-red-500":y.name&&"border-green-500"}`}),y.name&&f.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:o.address,onChange:W=>B(W,!0),onBlur:W=>Y(W,!0),placeholder:"Company Address *",className:`loginInput ${f.address?"border-red-500":y.address&&"border-green-500"}`}),y.businessInfo&&f.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.businessInfo]})]})]}),k===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:n.firstname,onChange:W=>B(W,!1),onBlur:W=>Y(W,!1),placeholder:"First Name *",className:`loginInput ${f.firstname?"border-red-500":y.firstname&&"border-green-500"}`}),y.firstname&&f.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:n.lastname,onChange:W=>B(W,!1),onBlur:W=>Y(W,!1),placeholder:"Last Name *",className:`loginInput ${f.lastname?"border-red-500":y.lastname&&"border-green-500"}`}),y.lastname&&f.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.lastname]})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"country",value:O.find(W=>W.country_name===n.country)?.id||"",onChange:z,onBlur:W=>Y(W,!1),className:`loginInput ${f.country?"border-red-500":y.country&&"border-green-500"}`,children:[e.jsx("option",{value:"",children:"Select country *"}),O.map(W=>e.jsx("option",{value:W.id,children:W.country_name},W.id))]}),y.country&&f.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:n.mobile,onChange:W=>B(W,!1),onBlur:W=>Y(W,!1),placeholder:"Mobile *",className:`loginInput ${f.mobile?"border-red-500":y.mobile&&"border-green-500"}`}),y.mobile&&f.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:n.email,onChange:W=>B(W,!1),onBlur:W=>Y(W,!1),placeholder:"Email *",className:`loginInput ${f.email?"border-red-500":y.email&&"border-green-500"}`}),y.email&&f.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.email]})]})]}),k===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:n.password,onChange:W=>B(W,!1),onBlur:W=>Y(W,!1),placeholder:"Password *",type:S?"text":"password",className:`loginInput ${f.password?"border-red-500":y.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>E(!S),className:"passwordToggle","aria-label":S?"Hide password":"Show password",children:S?e.jsx(bn,{size:20}):e.jsx(ws,{size:20})})]}),y.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",te.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${te.strength<2?"bg-red-500":te.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${te.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),y.password&&f.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:n.confirmPassword,onChange:W=>X(W.target.value),onBlur:()=>j(W=>({...W,confirmPassword:!0})),placeholder:"Confirm Password *",type:_?"text":"password",className:`loginInput ${f.confirmPassword?"border-red-500":y.confirmPassword&&n.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>T(!_),className:"passwordToggle","aria-label":_?"Hide password":"Show password",children:_?e.jsx(bn,{size:20}):e.jsx(ws,{size:20})})]}),y.confirmPassword&&f.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Gt,{size:14,className:"mr-1"})," ",f.confirmPassword]}),y.confirmPassword&&!f.confirmPassword&&n.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(ys,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[k>1&&e.jsxs("button",{type:"button",onClick:Q,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(bs,{size:18,className:"mr-1"}),"Back"]}),k<L?e.jsxs("button",{type:"button",onClick:G,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(KN,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>I("/"),children:"Cancel"})]})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function o4(){const[n]=Qo(),c=Vt(),[o,x]=N.useState(!1),[f,g]=N.useState("");N.useEffect(()=>{const j=n.get("token"),k=n.get("id");j&&k&&y(j,k)},[n]);const y=async(j,k)=>{try{x(!0);const b=await fe.post("/auth/verify",{token:j,id:k});g(b.data.message),J.success("Email verified successfully!"),setTimeout(()=>{c("/login")},3e3)}catch(b){console.error("Verification error:",b),g(b.response?.data?.message||"Verification failed"),J.error("Email verification failed")}finally{x(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),o?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):f?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:f}),e.jsx("button",{onClick:()=>c("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function ba(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),{auth:f,setAuth:g}=N.useContext(da),{logout:y,resetActivityTimer:j}=N.useContext(da),k=Vt(),[b,S]=N.useState(!1);N.useEffect(()=>{const M=localStorage.getItem("theme"),z=window.matchMedia("(prefers-color-scheme: dark)").matches;M==="dark"||!M&&z?(x(!0),document.documentElement.classList.add("dark")):(x(!1),document.documentElement.classList.remove("dark"))},[]),N.useEffect(()=>{if(!f.accessToken)return;const M=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],z=()=>j();M.forEach(L=>window.addEventListener(L,z,{passive:!0}));const I=()=>{document.hidden||j()};return document.addEventListener("visibilitychange",I),()=>{M.forEach(L=>window.removeEventListener(L,z)),document.removeEventListener("visibilitychange",I)}},[f.accessToken,j]);const E=async()=>{try{await fe.post("/auth/logout"),y(),J.success("Logged out successfully"),k("/")}catch(M){console.error("Logout error:",M),y(),J.success("Logged out successfully"),k("/")}},_=()=>{S(!0)},T=()=>{S(!1)},O=()=>{const M=!o;x(M),M?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("button",{onClick:()=>c(!n),className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:n?e.jsx(Gt,{size:24}):e.jsx(Ul,{size:24})})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:O,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:o?"Switch to light mode":"Switch to dark mode",children:o?e.jsx(Ix,{size:20}):e.jsx(Rx,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:f?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:f?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:f?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:_,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Dx,{size:20})})})]})]})}),n&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ar,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:O,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[o?e.jsx(Ix,{size:18,className:"mr-2"}):e.jsx(Rx,{size:18,className:"mr-2"}),o?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:_,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(Dx,{size:18,className:"mr-2"}),"Logout"]})})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function Zt(){const{auth:n}=N.useContext(da),c=js(),[o,x]=N.useState(!1),[f,g]=N.useState(null),[y,j]=N.useState([]),[k,b]=N.useState(!0),[S,E]=N.useState(Date.now()),[_,T]=N.useState(!1),[O,M]=N.useState(!1),z=n?.user?.role||"Admin",I=n?.user?.id;N.useEffect(()=>{const P=()=>{M(window.innerWidth<1024)};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),N.useEffect(()=>{T(!1)},[c.pathname]);const L=["employee_dashboard","profile"],D={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:ga,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:Ad,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:ga,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:Ad,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:vs,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:er,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:IN,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},complaint_management:{id:"complaint_management",name:"Complaints",icon:kg,isConstant:!1,children:[{name:"Complaint Categories",path:"/complaint-categories"},{name:"All Complaints",path:"/view-complaints"}]},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:vs,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:er,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:Qx,isConstant:!1},my_complaints:{id:"my_complaints",name:"My Complaints",path:"/my-complaints",icon:kg,isConstant:!1}},B=()=>["admin_dashboard","users_management","apartments_management","expenses_management","complaint_management","admin_profile"],Y=async()=>{try{if(b(!0),z==="Admin"){j(B()),b(!1);return}try{const P=await fe.get("/role-components/user/components");if(P.data.success){const ne=(P.data.data||[]).filter(Ce=>!L.includes(Ce)),de=[...L,...ne];j(de)}else console.error("API returned error:",P.data.message),j([...L])}catch(P){console.error("Error fetching user components",P),j([...L])}}catch(P){console.error("Error in fetchUserComponents",P),j(z==="Admin"?B():[...L])}finally{b(!1)}};N.useEffect(()=>{Y()},[z,I,S]);const X=()=>{E(Date.now())},G=y.map($=>D[$]).filter(Boolean),Q=P=>c.pathname===P,le=P=>g(f===P?null:P),ce=()=>T(!_),te=()=>e.jsx("button",{onClick:ce,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:_?e.jsx(Gt,{size:24}):e.jsx(Ul,{size:24})}),re=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${o?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!o&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:X,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(Sd,{size:16})})]}),o&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:k?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!o&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):G.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):G.map(P=>{if(!P)return null;const $=P.icon;if(P.children){const ne=P.children.some(de=>de.path&&Q(de.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>le(P.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${f===P.name||ne?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{size:20,className:o?"mx-auto":"mr-3"}),!o&&e.jsx("span",{children:P.name})]}),!o&&P.children&&P.children.length>0&&(f===P.name?e.jsx(Ii,{size:16}):e.jsx(Ri,{size:16}))]}),f===P.name&&!o&&P.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:P.children.map(de=>e.jsx(Ml,{to:de.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${Q(de.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:de.name},de.name))})]},P.id)}return e.jsxs(Ml,{to:P.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${Q(P.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx($,{size:20,className:o?"mx-auto":"mr-3"}),!o&&e.jsx("span",{children:P.name})]},P.id)})})]}),W=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:_?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:X,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(Sd,{size:16})}),e.jsx("button",{onClick:ce,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx(Gt,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:k?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):G.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):G.map(P=>{if(!P)return null;const $=P.icon;if(P.children){const ne=P.children.some(de=>de.path&&Q(de.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>le(P.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${f===P.name||ne?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($,{size:20,className:"mr-3"}),e.jsx("span",{children:P.name})]}),P.children&&P.children.length>0&&(f===P.name?e.jsx(Ii,{size:16}):e.jsx(Ri,{size:16}))]}),f===P.name&&P.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:P.children.map(de=>e.jsx(Ml,{to:de.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${Q(de.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:de.name},de.name))})]},P.id)}return e.jsxs(Ml,{to:P.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${Q(P.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx($,{size:20,className:"mr-3"}),e.jsx("span",{children:P.name})]},P.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(te,{}),_&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:ce}),e.jsx(W,{}),e.jsx(re,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function c4(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),f=Vt(),[g,y]=N.useState([]),[j,k]=N.useState([]),[b,S]=N.useState([]),[E,_]=N.useState([]),[T,O]=N.useState(!0),[M,z]=N.useState(null),[I,L]=N.useState(!1);N.useEffect(()=>{const H=()=>{x(window.innerWidth<768)};return H(),window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const D={USER_REGISTERED:{icon:qo,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_UPDATED:{icon:Pa,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},USER_DELETED:{icon:ua,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},USER_VERIFIED:{icon:pj,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_DEACTIVATED:{icon:wj,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},APARTMENT_CREATED:{icon:er,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",trend:"up"},APARTMENT_UPDATED:{icon:er,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},APARTMENT_DELETED:{icon:er,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},PASSWORD_RESET:{icon:u1,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30",trend:"up"},EMAIL_SENT:{icon:ll,color:"text-indigo-600",bgColor:"bg-indigo-100 dark:bg-indigo-900/30",trend:"up"}},B=(H,me)=>({USER_REGISTERED:`New user: ${me.email||"Unknown"}`,USER_UPDATED:`User updated: ${me.email||"Unknown"}`,USER_DELETED:`User deleted: ${me.email||"Unknown"}`,USER_VERIFIED:`User verified: ${me.email||"Unknown"}`,USER_DEACTIVATED:`User deactivated: ${me.email||"Unknown"}`,APARTMENT_CREATED:`New apartment: ${me.name||"Unknown"}`,APARTMENT_UPDATED:`Apartment updated: ${me.name||"Unknown"}`,APARTMENT_DELETED:`Apartment deleted: ${me.name||"Unknown"}`,PASSWORD_RESET:`Password reset: ${me.email||"Unknown"}`,EMAIL_SENT:`Email sent: ${me.email||"Unknown"}`})[H]||"Activity recorded",Y=(H,me)=>{const ae={id:Date.now(),type:H,action:B(H,me),time:"Just now",timestamp:new Date,...D[H]};_(be=>[ae,...be.slice(0,7)])},X=(H,me=!1)=>{const be=Math.floor((new Date-new Date(H))/1e3);return me?be<60?"Now":be<3600?`${Math.floor(be/60)}m`:be<86400?`${Math.floor(be/3600)}h`:`${Math.floor(be/86400)}d`:be<60?"Just now":be<3600?`${Math.floor(be/60)} minutes ago`:be<86400?`${Math.floor(be/3600)} hours ago`:`${Math.floor(be/86400)} days ago`};N.useEffect(()=>{const H=setInterval(()=>{_(me=>me.map(ae=>({...ae,time:X(ae.timestamp,o)})))},6e4);return()=>clearInterval(H)},[o]);const U=async()=>{try{const H=await fe.get("/apartments");H.data.success&&Array.isArray(H.data.data)?(y(H.data.data),H.data.data.length>0&&Y("APARTMENT_CREATED",{name:`${H.data.data.length} apartments`})):Array.isArray(H.data)?y(H.data):y([])}catch(H){console.error("Error loading apartments:",H),H.response?.status===401?(z("Unauthorized. Please login."),f("/login")):H.response?.status===400?z("Company info missing."):z("Failed to load apartments.")}},G=async()=>{try{const H=await fe.get("/auth/users");if(H.data.success&&Array.isArray(H.data.data)){const me=H.data.data;k(me),me.length>0&&Y("USER_REGISTERED",{email:`${me.length} users`})}else k([])}catch(H){console.error("Error in fetching users:",H),z("Failed to load users.")}},Q=async()=>{try{const H=await fe.get("/roles");H.data.success&&Array.isArray(H.data.data)?S(H.data.data):S([])}catch(H){console.error("Error loading roles:",H)}},le=()=>{try{const H=localStorage.getItem("recentActivities");if(H){const ae=JSON.parse(H).map(be=>({...be,time:X(be.timestamp,o),...D[be.type]}));_(ae.slice(0,8))}}catch(H){console.error("Error loading recent activities:",H)}};N.useEffect(()=>{E.length>0&&localStorage.setItem("recentActivities",JSON.stringify(E.slice(0,20)))},[E]);const ce=async(H=!1)=>{try{L(!0),z(null),le(),await Promise.all([U(),G(),Q()]),H&&J.success("Dashboard refreshed successfully")}catch(me){console.error("Error loading dashboard data:",me),z("Failed to load dashboard data"),J.error("Failed to refresh dashboard")}finally{O(!1),L(!1)}};N.useEffect(()=>{T||[{type:"USER_REGISTERED",data:{email:"demo@example.com"}},{type:"APARTMENT_CREATED",data:{name:"Demo Apartment"}},{type:"EMAIL_SENT",data:{email:"user@example.com"}}].forEach((me,ae)=>{setTimeout(()=>{Y(me.type,me.data)},(ae+1)*5e3)})},[T]),N.useEffect(()=>{ce()},[]);const te=j.length,re=g.length,W=b.length,P=j.filter(H=>H.is_active).length,$=j.filter(H=>H.is_verified).length,ne=g.filter(H=>H.is_active).length,de=H=>H.toLocaleString("en-US"),Ce=()=>{_([]),localStorage.removeItem("recentActivities"),J.success("Activities cleared")},ee=()=>{ce(!0)};return T?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Loading Dashboard..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:o?"Please wait":"Fetching latest data"})]})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ga,{size:o?28:32,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:ee,disabled:I,className:"flex items-center gap-1 md:gap-2 px-3 py-1.5 md:py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-xs md:text-sm disabled:opacity-50",children:[e.jsx(Sd,{size:o?14:16,className:I?"animate-spin":""}),e.jsx("span",{className:"hidden sm:inline",children:I?"Refreshing...":"Refresh"})]}),o&&e.jsx("div",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})}),M&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Da,{size:o?18:20,className:"text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300",children:M}),e.jsx("button",{onClick:ee,className:"mt-2 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs md:text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 lg:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300",children:"Total Users"}),e.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:de(te)}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1",children:[P," active  ",$," verified"]})]}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(vs,{size:o?20:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(sl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs md:text-sm text-green-500",children:te>0?"Active system":"No users yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300",children:"Total Apartments"}),e.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:de(re)}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1",children:[ne," active"]})]}),e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(er,{size:o?20:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(sl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs md:text-sm text-green-500",children:re>0?"Properties managed":"No apartments yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300",children:"User Roles"}),e.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:de(W)}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Role types in system"})]}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Ll,{size:o?20:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(sl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs md:text-sm text-green-500",children:W>0?"Role system active":"No roles defined"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ce,className:"text-xs md:text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 px-2 py-1",children:"Clear All"}),e.jsx("button",{className:"text-xs md:text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 px-2 py-1",children:"View all"})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:E.length===0?e.jsxs("div",{className:"text-center py-6 md:py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(jN,{size:o?32:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm md:text-base",children:"No recent activities"}),e.jsx("p",{className:"text-xs md:text-sm mt-1",children:"Activities will appear here as they happen"})]}):E.map(H=>{const me=H.icon,ae=H.trend==="up"?sl:SN,be=H.trend==="up"?"text-green-500":"text-red-500";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:`p-2 ${H.bgColor} rounded-full mr-3 flex-shrink-0`,children:e.jsx(me,{size:o?16:18,className:H.color})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200 truncate",children:o?H.action.substring(0,40)+(H.action.length>40?"...":""):H.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:H.time})]})]}),e.jsx(ae,{size:o?14:16,className:`${be} flex-shrink-0 ml-2`})]},H.id)})})]}),e.jsxs("div",{className:"mt-6 md:mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"Users Summary"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:[{label:"Total Users",value:te,color:"text-purple-600 dark:text-purple-400"},{label:"Active Users",value:P,color:"text-green-600 dark:text-green-400"},{label:"Verified Users",value:$,color:"text-blue-600 dark:text-blue-400"},{label:"Pending Verification",value:j.filter(H=>!H.is_verified).length,color:"text-yellow-600 dark:text-yellow-400"}].map((H,me)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[e.jsx("span",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:o&&H.label.length>15?H.label.substring(0,12)+"...":H.label}),e.jsx("span",{className:`font-semibold ${H.color} text-sm md:text-base`,children:de(H.value)})]},me))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"Apartments Summary"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:[{label:"Total Apartments",value:re,color:"text-purple-600 dark:text-purple-400"},{label:"Active Apartments",value:ne,color:"text-green-600 dark:text-green-400"},{label:"Inactive Apartments",value:g.filter(H=>!H.is_active).length,color:"text-red-600 dark:text-red-400"}].map((H,me)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[e.jsx("span",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:o&&H.label.length>15?H.label.substring(0,12)+"...":H.label}),e.jsx("span",{className:`font-semibold ${H.color} text-sm md:text-base`,children:de(H.value)})]},me))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"Roles Summary"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:[{label:"Total Roles",value:W,color:"text-purple-600 dark:text-purple-400"},{label:"Active Roles",value:b.filter(H=>H.is_active).length,color:"text-green-600 dark:text-green-400"},{label:"Inactive Roles",value:b.filter(H=>!H.is_active).length,color:"text-red-600 dark:text-red-400"}].map((H,me)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[e.jsx("span",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:o&&H.label.length>15?H.label.substring(0,12)+"...":H.label}),e.jsx("span",{className:`font-semibold ${H.color} text-sm md:text-base`,children:de(H.value)})]},me))})]})]}),o&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:te}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:re}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Apartments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:P}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:j.filter(H=>!H.is_verified).length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pending"})]})]})]}),o&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Swipe or scroll to see more content"})})]})})]})]})}function d4({onClose:n,onCreated:c}){const[o,x]=N.useState({apartment_id:"",name:"",address:"",city:"",image:null}),[f,g]=N.useState(!1),[y,j]=N.useState(""),k=E=>{const{name:_,value:T,files:O}=E.target;x(M=>({...M,[_]:O?O[0]:T}))},b=async()=>{try{const T=(await fe.get("/apartments")).data.data[0],O=T?parseInt(T.apartment_id.slice(3)):0,M=`A${String(O+1).padStart(3,"0")}`;x(z=>({...z,apartment_id:M}))}catch(E){console.error("Error fetching last apartment id:",E)}};N.useEffect(()=>{b()},[]);const S=async E=>{E.preventDefault(),j(""),g(!0);try{const _=new FormData;_.append("apartment_id",o.apartment_id),_.append("name",o.name),_.append("address",o.address),_.append("city",o.city),o.image&&_.append("picture",o.image);const T=await fe.post("/apartments",_,{headers:{"Content-Type":"multipart/form-data"}});g(!1),c&&c(),n&&n()}catch(_){J.error("Failed to create apartment"),console.error(_),g(!1)}};return e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[y&&e.jsx("p",{className:"text-red-500",children:y}),e.jsx("input",{type:"text",name:"apartment_id",value:o.apartment_id,onChange:k,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:o.name,onChange:k,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:o.address,onChange:k,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:o.city,onChange:k,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:k,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:f?"Saving...":"Save"})]})]})}function u4({onClose:n,onEdited:c,apartment:o}){const[x,f]=N.useState({name:"",address:"",city:"",image:null}),[g,y]=N.useState(!1),[j,k]=N.useState("");N.useEffect(()=>{o&&f({name:o.name||"",address:o.address||"",city:o.city||"",image:null})},[o]);const b=E=>{const{name:_,value:T,files:O}=E.target;f(M=>({...M,[_]:O?O[0]:T}))},S=async E=>{E.preventDefault(),k(""),y(!0);try{const _=new FormData;_.append("name",x.name),_.append("address",x.address),_.append("city",x.city),x.image&&_.append("picture",x.image);const T=await fe.put(`/apartments/${o.id}`,_,{headers:{"Content-Type":"multipart/form-data"}});y(!1),c&&c(),n&&n()}catch(_){console.error("Update error:",_),J.error(_.response?.data?.message||"Failed to update apartment"),y(!1)}};return e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:x.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:x.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:x.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Updating...":"Update"})]})]})}function x4({isOpen:n,onClose:c,onImportSuccess:o}){const[x,f]=N.useState(null),[g,y]=N.useState(!1),[j,k]=N.useState(!1),[b,S]=N.useState(null),E=B=>{B.preventDefault(),y(!0)},_=B=>{B.preventDefault(),y(!1)},T=B=>{B.preventDefault(),y(!1);const Y=B.dataTransfer.files[0];Y&&M(Y)},O=B=>{const Y=B.target.files[0];Y&&M(Y)},M=B=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(B.type)){J.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(B.size>10*1024*1024){J.error("File size must be less than 10MB");return}f(B),S(null)},z=async()=>{if(!x){J.error("Please select a file first");return}k(!0);const B=new FormData;B.append("excelFile",x);try{const Y=await fe.post("/bulk-import/import",B,{headers:{"Content-Type":"multipart/form-data"}});S(Y.data.data),o&&o()}catch(Y){console.error("Import error:",Y),J.error(Y.response?.data?.message||"Failed to import data")}finally{k(!1)}},I=async()=>{try{const B=await fe.get("/bulk-import/template",{responseType:"blob"}),Y=window.URL.createObjectURL(new Blob([B.data])),X=document.createElement("a");X.href=Y,X.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild(X),X.click(),X.remove(),window.URL.revokeObjectURL(Y),J.success("Template downloaded successfully!")}catch(B){console.error("Download error:",B),J.error("Failed to download template")}},L=()=>{f(null),S(null)},D=()=>{L(),c()};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Gt,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!b&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(ec,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${g?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:E,onDragLeave:_,onDrop:T,children:[e.jsx(Ns,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:x?x.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:O})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:D,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:j,children:"Cancel"}),e.jsx("button",{onClick:z,disabled:!x||j,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{size:16}),"Import Data"]})})]})]}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nr,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",b.created.houses," houses from ",b.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Di,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:b.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(Zx,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:b.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(ga,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:b.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx(yv,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),b.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Da,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[b.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:b.errors.map((B,Y)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(Mx,{size:14}),B]},Y))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:L,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:D,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function h4({apartment:n,onClose:c,onUploadSuccess:o}){const[x,f]=N.useState(!1),[g,y]=N.useState([]),[j,k]=N.useState([]),[b,S]=N.useState(!0),E=N.useRef(null);N.useEffect(()=>{M()},[n.id]);const _=D=>{const B=Array.from(D.target.files);k(Y=>[...Y,...B])},T=D=>{k(B=>B.filter((Y,X)=>X!==D))},O=async()=>{if(j.length===0){J.error("Please select at least one file");return}try{f(!0);const D=new FormData;j.forEach(Y=>{D.append("documents",Y)}),D.append("apartmentId",n.id),(await fe.post("/apartment-documents/upload",D,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(k([]),o?.(),M(),E.current&&(E.current.value=""))}catch(D){console.error("Upload error:",D);const B=D.response?.data?.message||"Failed to upload documents";J.error(B)}finally{f(!1)}},M=async()=>{try{S(!0);const D=await fe.get(`/apartment-documents/apartments/${n.id}/documents`);D.data.success&&y(D.data.data)}catch(D){console.error("Error loading documents:",D);const B=D.response?.data?.message||"Failed to load documents";J.error(B)}finally{S(!1)}},z=async D=>{if(window.confirm("Are you sure you want to delete this document?"))try{await fe.delete(`/apartment-documents/documents/${D}`),J.success("Document deleted successfully"),M()}catch(B){console.error("Delete error:",B);const Y=B.response?.data?.message||"Failed to delete document";J.error(Y)}},I=async D=>{try{const B=await fe.get(`/apartment-documents/documents/${D.id}/download`,{responseType:"blob"}),Y=window.URL.createObjectURL(new Blob([B.data])),X=document.createElement("a");X.href=Y,X.setAttribute("download",D.original_name||D.file_name),document.body.appendChild(X),X.click(),X.remove(),window.URL.revokeObjectURL(Y)}catch(B){console.error("Download error:",B);const Y=B.response?.data?.message||"Failed to download document";J.error(Y)}},L=D=>{if(D===0)return"0 Bytes";const B=1024,Y=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(D)/Math.log(B));return parseFloat((D/Math.pow(B,X)).toFixed(2))+" "+Y[X]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",n.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:E,onChange:_,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>E.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ns,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),j.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:j.map((D,B)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ht,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:D.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:L(D.size)})]})]}),e.jsx("button",{onClick:()=>T(B),className:"text-red-500 hover:text-red-700",children:e.jsx(Gt,{size:16})})]},B))})]}),j.length>0&&e.jsx("button",{onClick:O,disabled:x,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:x?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{size:20}),"Upload ",j.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):g.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Ht,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:g.map(D=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Ht,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D.original_name||D.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[L(D.file_size),"  Uploaded on ",new Date(D.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(D),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(ec,{size:18})}),e.jsx("button",{onClick:()=>z(D.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:18})})]})]},D.id))})]})]})}function m4(){const{auth:n}=N.useContext(da),c=Vt(),[o,x]=N.useState(!1),[f,g]=N.useState(!1),[y,j]=N.useState(window.innerWidth<768),[k,b]=N.useState([]),[S,E]=N.useState(!0),[_,T]=N.useState(null),[O,M]=N.useState(!1),[z,I]=N.useState(!1),[L,D]=N.useState(null),[B,Y]=N.useState(!1),[X,U]=N.useState(null),[G,Q]=N.useState(!1),[le,ce]=N.useState(!1),[te,re]=N.useState(null),[W,P]=N.useState(!1),[$,ne]=N.useState(null);N.useEffect(()=>{const oe=()=>{j(window.innerWidth<768)};return window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)},[]);const de=()=>{M(!0)},Ce=()=>{Q(!0)},ee=()=>{Q(!1)},H=oe=>{D(oe),I(!0)},me=oe=>{c(`/floors/${oe.id}`)},ae=()=>{M(!1)},be=()=>{I(!1),D(null)},ze=()=>{Ke(),M(!1),J.success("Apartment created successfully!")},xe=()=>{Ke(),I(!1),D(null),J.success("Apartment updated successfully!")},Ze=()=>{Ke(),J.success("Bulk import completed successfully!")},je=oe=>{U(oe),Y(!0)},Je=()=>{Y(!1)},Ke=async()=>{try{E(!0),T(null);const oe=await fe.get("/apartments");oe.data.success&&Array.isArray(oe.data.data)?b(oe.data.data):Array.isArray(oe.data)?b(oe.data):(console.warn("Unexpected response format:",oe.data),b([]))}catch(oe){console.error("Error loading apartments:",oe),oe.response?.status===401?(T("Unauthorized. Please login again."),c("/login")):oe.response?.status===400?T("Company information missing. Please contact support."):T("Failed to load apartments. Please try again.")}finally{E(!1)}};N.useEffect(()=>{Ke()},[]);const at=async oe=>{try{const pe=await fe.patch(`/apartments/${oe.id}/toggle`);J.success(pe.data.message),Ke()}catch(pe){console.error("Error toggling apartment:",pe),J.error("Failed to toggle apartment status")}},Ue=oe=>{re(oe),ce(!0)},ve=async()=>{try{if(!te)return;await fe.delete(`/apartments/${te.id}`),J.success("Apartment deleted successfully"),ce(!1),re(null),Ke()}catch(oe){console.error("Delete apartment error:",oe),J.error("Failed to delete apartment")}},he=()=>{ce(!1),re(null)},He=oe=>{ne(oe),P(!0)},et=()=>{P(!1),ne(null)},Ne=()=>{J.success("Document uploaded successfully!")},Te=()=>e.jsx("button",{onClick:()=>g(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Ul,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Te,{}),e.jsx(Zt,{onCollapse:x,isMobileOpen:f,onMobileClose:()=>g(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${o?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{onMobileMenuClick:()=>g(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(er,{size:y?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Apartments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your apartment buildings"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:Ce,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Ns,{size:y?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Upload Excel"})]}),e.jsxs("button",{onClick:de,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(tr,{size:y?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:S?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(yt,{size:y?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading apartments..."})]}):_?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:_}),e.jsx("button",{onClick:Ke,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):k.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Kr,{size:y?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No apartments found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first apartment"}),e.jsx("button",{onClick:de,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Apartment"})]}):e.jsx(e.Fragment,{children:y?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Apartments: ",k.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[k.length," items"]})]})}),k.map((oe,pe)=>e.jsxs("div",{onClick:()=>oe.is_active&&me(oe),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${oe.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[oe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${oe.picture}`,alt:oe.name,className:"w-12 h-12 object-cover rounded-lg mr-3",onError:Me=>{console.error("Image failed to load:",oe.picture),Me.target.style.display="none";const jt=Me.target.parentNode.querySelector(".image-fallback");jt&&(jt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Kr,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:oe.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:oe.city||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:Me=>{Me.stopPropagation(),He(oe)},className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(Ht,{size:16})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),H(oe)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Pa,{size:16})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),je(oe)},className:`p-2 rounded-lg ${oe.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:oe.is_active?"Deactivate":"Activate",children:oe.is_active?e.jsx(Fl,{size:16}):e.jsx(zl,{size:16})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),Ue(oe)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(ua,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mt-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Address:"}),e.jsx("span",{className:"truncate",children:oe.address})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Floors:"}),e.jsx("span",{children:oe.floors})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Units:"}),e.jsx("span",{children:oe.houses})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${oe.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:oe.is_active?"Active":"Inactive"})]})]})]},oe.id||pe))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Apartments"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[k.length," apartments"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:k.map((oe,pe)=>e.jsxs("tr",{onClick:()=>oe.is_active&&me(oe),className:`transition-colors cursor-pointer ${oe.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:oe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${oe.picture}`,alt:oe.name,className:"w-12 h-12 object-cover rounded-lg",onError:Me=>{console.error("Image failed to load:",oe.picture),Me.target.style.display="none";const jt=Me.target.parentNode.querySelector(".image-fallback");jt&&(jt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(Kr,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:oe.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:oe.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:oe.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:oe.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:oe.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Me=>{Me.stopPropagation(),He(oe)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(Ht,{size:20})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),H(oe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),je(oe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:oe.is_active?"Deactivate":"Activate",children:oe.is_active?e.jsx(Fl,{size:25}):e.jsx(zl,{size:25})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),Ue(oe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},oe.id||pe))})]})]})})})]})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:ae,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(d4,{onClose:ae,onCreated:ze})]})})}),z&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx("button",{onClick:be,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(u4,{onClose:be,onEdited:xe,apartment:L})]})})}),e.jsx(x4,{isOpen:G,onClose:ee,onImportSuccess:Ze}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:X?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:X?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Je,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{X&&(at(X),Y(!1),U(null))},className:`flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors ${X?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:X?.is_active?"Deactivate":"Activate"})]})]})}),le&&te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',te.name,'"?']}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:he,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ve,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),W&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:["Documents - ",$.name]}),e.jsx("button",{onClick:et,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(h4,{apartment:$,onClose:et,onUploadSuccess:Ne})]})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function f4({onClose:n,onCreated:c,roles:o,rolesLoading:x}){const[f,g]=N.useState({email:"",role_id:""}),[y,j]=N.useState(!1),[k,b]=N.useState(""),S=_=>{const{name:T,value:O}=_.target;g(M=>({...M,[T]:O}))},E=async _=>{_.preventDefault(),b(""),j(!0);try{const T=await fe.post("/auth/invite",{email:f.email,role_id:f.role_id});J.success("Invitation sent successfully!"),c&&c(),n&&n()}catch(T){console.error("Invite error:",T);const O=T.response?.data?.message||"Failed to send invitation. Try again.";b(O),J.error(O)}finally{j(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4 text-black dark:text-white",children:[k&&e.jsx("p",{className:"text-red-500",children:k}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:f.email,onChange:S,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:f.role_id,onChange:S,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:x,children:[e.jsx("option",{value:"",children:"Select Role"}),x?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):o.map(_=>e.jsx("option",{value:_.id,children:_.role_name},_.id))]}),x&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(yt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:y,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y||x,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:y?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function g4({user:n,onClose:c,onUpdated:o,roles:x,rolesLoading:f}){const[g,y]=N.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[j,k]=N.useState(!1),[b,S]=N.useState(""),[E,_]=N.useState(!1),[T,O]=N.useState(!1),[M,z]=N.useState(!1),[I,L]=N.useState("");N.useEffect(()=>{n&&(y({firstname:n.firstname||"",lastname:n.lastname||"",email:n.email||"",country:n.country||"",mobile:n.mobile||"",role_id:n.role_id||"",password:"",confirmPassword:""}),L(n.email||""))},[n]);const D=X=>{const{name:U,value:G}=X.target;y(Q=>({...Q,[U]:G})),U==="email"&&z(G!==I)},B=async()=>{try{k(!0),await fe.post("/auth/resend",{email:g.email}),J.success("Verification email sent successfully!"),z(!1)}catch(X){console.error("Error sending verification email:",X),J.error(X.response?.data?.message||"Failed to send verification email")}finally{k(!1)}},Y=async X=>{if(X.preventDefault(),k(!0),S(""),g.password&&g.password!==g.confirmPassword){S("Passwords do not match"),k(!1);return}if(g.password&&g.password.length<8){S("Password must be at least 8 characters long"),k(!1);return}try{const U={firstname:g.firstname,lastname:g.lastname,email:g.email,country:g.country,mobile:g.mobile,role_id:g.role_id};g.password&&(U.password=g.password);const G=await fe.put(`/auth/users/${n.id}`,U);G.data.success?(J.success("User updated successfully!"),G.data.data.requires_verification&&await B(),o?.(G.data.data)):S(G.data.message||"Failed to update user")}catch(U){console.error("Error updating user:",U),S(U.response?.data?.message||"Failed to update user")}finally{k(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:g.firstname,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:g.lastname,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:g.email,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),M&&e.jsx("button",{type:"button",onClick:B,disabled:j,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(m1,{size:16})})]}),M&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:g.country,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:g.mobile,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:g.role_id,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:f,children:[e.jsx("option",{value:"",children:"Select Role"}),f?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):x.map(X=>e.jsx("option",{value:X.id,children:X.role_name},X.id))]}),f&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(yt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:E?"text":"password",name:"password",value:g.password,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>_(!E),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E?e.jsx(bn,{size:16}):e.jsx(ws,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:T?"text":"password",name:"confirmPassword",value:g.confirmPassword,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>O(!T),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:T?e.jsx(bn,{size:16}):e.jsx(ws,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:j,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j||f,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:j?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function p4({user:n,onClose:c,onAssignSuccess:o}){const[x,f]=N.useState([]),[g,y]=N.useState([]),[j,k]=N.useState(!0),[b,S]=N.useState(!1),[E,_]=N.useState(""),[T,O]=N.useState(new Set);N.useEffect(()=>{n&&(async()=>{try{k(!0);const Q=await fe.get("/bills");if(Q.data.success){const ce=(Q.data.data||[]).filter(te=>te.billtype?.toLowerCase()==="measurable");f(ce)}const le=await fe.get(`/user-bills/users/${n.id}/bills`);if(le.data.success){const te=(le.data.data||[]).filter(W=>W.billtype?.toLowerCase()==="measurable");y(te);const re=new Set(te.map(W=>W.id));O(re)}}catch(Q){console.error("Error loading bill data:",Q),J.error("Failed to load bill data")}finally{k(!1)}})()},[n]);const M=x.filter(G=>G.bill_name?.toLowerCase().includes(E.toLowerCase())),z=G=>g.some(Q=>Q.id===G),I=G=>T.has(G),L=G=>{O(Q=>{const le=new Set(Q);return le.has(G)?le.delete(G):le.add(G),le})},D=()=>{const G=new Set(x.map(Q=>Q.id));O(G)},B=()=>{O(new Set)},Y=async()=>{try{S(!0);const G=Array.from(T);await fe.post(`/user-bills/users/${n.id}/bills`,{bill_ids:G}),J.success("Measurable bills assigned successfully!"),o?.(),c()}catch(G){console.error("Error assigning bills:",G),J.error(G.response?.data?.message||"Failed to assign bills")}finally{S(!1)}},X=G=>g.find(Q=>Q.id===G),U=G=>{try{return new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ar,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:E,onChange:G=>_(G.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:D,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:B,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):M.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Nd,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:M.map(G=>{const Q=I(G.id),le=z(G.id),ce=X(G.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${Q?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>L(G.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ga,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:G.bill_name}),le&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(Ht,{size:14}),e.jsx("span",{className:"capitalize",children:G.billtype}),G.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",U(G.created_at)]})}),ce&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",U(ce.assigned_at||ce.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:Q?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(ys,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},G.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[T.size," measurable bill(s) selected",g.length>0&&e.jsxs("span",{children:["  ",g.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:Y,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(yt,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]})}function y4({user:n,onClose:c,onAssignSuccess:o}){const[x,f]=N.useState([]),[g,y]=N.useState([]),[j,k]=N.useState(!0),[b,S]=N.useState(!1),[E,_]=N.useState(""),[T,O]=N.useState(new Set),[M,z]=N.useState("categories");N.useEffect(()=>{n&&(async()=>{try{k(!0);const ce=await fe.get("/categories");if(ce.data.success){const re=(ce.data.data||[]).filter(W=>W.is_active!==!1);f(re)}const te=await fe.get(`/technician-categories/technicians/${n.id}/categories`);if(te.data.success){const re=te.data.data||[];y(re);const W=new Set(re.map(P=>P.category_id));O(W)}}catch(ce){console.error("Error loading category data:",ce),J.error("Failed to load category data")}finally{k(!1)}})()},[n]);const I=x.filter(le=>le.name?.toLowerCase().includes(E.toLowerCase())||le.description?.toLowerCase().includes(E.toLowerCase())),L=le=>g.some(ce=>ce.category_id===le),D=le=>T.has(le),B=le=>{O(ce=>{const te=new Set(ce);return te.has(le)?te.delete(le):te.add(le),te})},Y=()=>{const le=new Set(x.map(ce=>ce.id));O(le)},X=()=>{O(new Set)},U=async()=>{try{S(!0);const le=Array.from(T);await fe.post(`/technician-categories/technicians/${n.id}/categories`,{category_ids:le}),J.success("Categories assigned successfully!"),o?.(),c()}catch(le){console.error("Error assigning categories:",le),J.error(le.response?.data?.message||"Failed to assign categories")}finally{S(!1)}},G=le=>g.find(ce=>ce.category_id===le),Q=le=>{try{return new Date(le).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ar,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:E,onChange:le=>_(le.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:X,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading categories..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(f1,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No categories found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No categories available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Only active categories are shown here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(le=>{const ce=D(le.id),te=L(le.id),re=G(le.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${ce?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(le.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(kv,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:le.name}),te&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Assigned"}),le.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:"Inactive"})]}),le.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:le.description}),e.jsx("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(DN,{size:12}),e.jsx("span",{children:"Service Category"})]})}),re&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-1",children:[e.jsx(Wr,{size:12}),e.jsxs("span",{children:["Assigned: ",Q(re.assigned_at)]})]})]}),e.jsx("div",{className:"flex items-center ml-4",children:ce?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(ys,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},le.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[T.size," category(ies) selected",g.length>0&&e.jsxs("span",{children:["  ",g.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:U,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(yt,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]})}function b4({user:n,onClose:c,onAssignSuccess:o}){const[x,f]=N.useState([]),[g,y]=N.useState([]),[j,k]=N.useState(!0),[b,S]=N.useState(!1),[E,_]=N.useState(""),[T,O]=N.useState(new Set),[M,z]=N.useState("apartments");N.useEffect(()=>{n&&(async()=>{try{k(!0);const ce=await fe.get("/apartments");ce.data.success&&f(ce.data.data||[]);const te=await fe.get(`/user-apartments/users/${n.id}/apartments`);if(te.data.success){const re=te.data.data||[];y(re);const W=new Set(re.map(P=>P.id));O(W)}}catch(ce){console.error("Error loading apartment data:",ce),J.error("Failed to load apartment data")}finally{k(!1)}})()},[n]);const I=x.filter(le=>le.name?.toLowerCase().includes(E.toLowerCase())||le.address?.toLowerCase().includes(E.toLowerCase())||le.city?.toLowerCase().includes(E.toLowerCase())),L=le=>g.some(ce=>ce.id===le),D=le=>T.has(le),B=le=>{O(ce=>{const te=new Set(ce);return te.has(le)?te.delete(le):te.add(le),te})},Y=()=>{const le=new Set(x.map(ce=>ce.id));O(le)},X=()=>{O(new Set)},U=async()=>{try{S(!0);const le=Array.from(T);await fe.post(`/user-apartments/users/${n.id}/apartments`,{apartment_ids:le}),o?.(),c()}catch(le){console.error("Error assigning apartments:",le),J.error(le.response?.data?.message||"Failed to assign apartments")}finally{S(!1)}},G=le=>g.find(ce=>ce.id===le),Q=le=>{try{return new Date(le).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(er,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.firstname," ",n.lastname]})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Gt,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>z("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${M==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>z("bills"),className:`px-4 py-2 font-semibold 
                ${M==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"}),e.jsx("button",{onClick:()=>z("complaint_categories"),className:`px-4 py-2 font-semibold 
                ${M==="complaint_categories"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Categories"})]}),M==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ar,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:E,onChange:le=>_(le.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:X,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:j?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(er,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(le=>{const ce=D(le.id),te=L(le.id),re=G(le.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${ce?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(le.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ga,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:le.name}),te&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(Bl,{size:14}),e.jsxs("span",{children:[le.address,", ",le.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[le.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[le.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:le.is_active?"Active":"Inactive"})]}),re&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",Q(re.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:ce?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(ys,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},le.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[T.size," apartment(s) selected",g.length>0&&e.jsxs("span",{children:["  ",g.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:U,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(yt,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]}):M==="bills"?e.jsx(p4,{user:n,onClose:c,onAssignSuccess:o}):e.jsx(y4,{user:n,onClose:c,onAssignSuccess:o})]})})}function w4({onClose:n,onCreated:c}){const[o,x]=N.useState({role_name:""}),[f,g]=N.useState(!1),[y,j]=N.useState(""),[k,b]=N.useState([]),S=_=>{const{name:T,value:O}=_.target;x(M=>({...M,[T]:O})),T==="role_name"&&y&&j("")},E=async _=>{if(_.preventDefault(),g(!0),j(""),!o.role_name.trim()){j("Please fill in all required fields"),g(!1);return}try{const T=await fe.post("/roles",{role_name:o.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});T.data.success?(c?.(T.data.data),J.success("Role created successfully"),n()):j(T.data.message||"Failed to save role")}catch(T){console.error("Error saving role:",T);const O=T.response?.data?.message||"Error saving role. Please try again.";j(O),T.response?.status===409&&J.error(O)}finally{g(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[y&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:y}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:o.role_name,onChange:S,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!o.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${f||!o.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}const N4=({role:n,onClose:c,onAssign:o})=>{const[x,f]=N.useState([]),[g,y]=N.useState(!1),[j,k]=N.useState(!1),S=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"},{id:"my_complaints",name:"My Complaints",description:"View and manage your complaints",category:"Personal",icon:"ClipboardList"}].reduce((I,L)=>{const D=L.category;return I[D]||(I[D]=[]),I[D].push(L),I},{});N.useEffect(()=>{n&&E()},[n]);const E=async()=>{try{y(!0);const I=await fe.get(`/role-components/role/${n.id}`);if(I.data.success){const L=I.data.data||[];f(L)}}catch(I){console.error("Error loading role components:",I),f([])}finally{y(!1)}},_=I=>{f(L=>L.includes(I)?L.filter(D=>D!==I):[...L,I])},T=I=>{const L=S[I].map(D=>D.id);f(D=>{const B=[...D];return L.forEach(Y=>{B.includes(Y)||B.push(Y)}),B})},O=I=>{const L=S[I].map(D=>D.id);f(D=>D.filter(B=>!L.includes(B)))},M=async()=>{try{k(!0);const I=["employee_dashboard","profile"],L=x.filter(B=>!I.includes(B));(await fe.post(`/role-components/role/${n.id}`,{components:L})).data.success&&(J.success("Components assigned successfully! The sidebar will refresh for affected users."),o(n.id,x),c())}catch(I){console.error("Error saving role components:",I),alert("Failed to save component assignments. Please try again.")}finally{k(!1)}},z=I=>{const D={Core:vr,Management:Ll,Financial:Qx,Personal:ga}[I]||Ed;return e.jsx(D,{size:16})};return n?n.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ll,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:n.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx(Gt,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(S).map(([I,L])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[z(I),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[I," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",L.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>T(I),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>O(I),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:L.map(D=>e.jsxs("div",{onClick:()=>_(D.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${x.includes(D.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:x.includes(D.id)?e.jsx(aj,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(Ed,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:D.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.description})]})]},D.id))})]},I))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[x.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:M,disabled:j||g,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hd,{size:20}),"Save Assignments"]})})]})]})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]}):null};function v4({role:n,onClose:c,onUpdated:o}){const[x,f]=N.useState({role_name:""}),[g,y]=N.useState(!1),[j,k]=N.useState({});N.useEffect(()=>{n&&f({role_name:n.role_name||""})},[n]);const b=_=>{const{name:T,value:O}=_.target;f(M=>({...M,[T]:O})),j[T]&&k(M=>({...M,[T]:""}))},S=()=>{const _={};return x.role_name.trim()?x.role_name.trim().length<2?_.role_name="Role name must be at least 2 characters long":x.role_name.trim().length>50&&(_.role_name="Role name must be less than 50 characters"):_.role_name="Role name is required",k(_),Object.keys(_).length===0},E=async _=>{if(_.preventDefault(),!!S())try{y(!0);const T=await fe.put(`/roles/${n.id}`,{role_name:x.role_name.trim()});T.data.success?(o?.(T.data.data),c()):J.error(T.data.message||"Failed to update role")}catch(T){console.error("Error updating role:",T),T.response?.status===409?(J.error("A role with this name already exists"),k({role_name:"A role with this name already exists"})):T.response?.data?.message?J.error(T.response.data.message):J.error("Failed to update role. Please try again.")}finally{y(!1)}};return n?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:c,disabled:g,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(Gt,{size:20})})]}),e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:x.role_name,onChange:b,disabled:g,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${j.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),j.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",n.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${n.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:n.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,disabled:g,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(yt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Updating...":"Update Role"})]})]})]})]})}):null}function k1(){const[n,c]=N.useState(!1),[o,x]=N.useState([]),[f,g]=N.useState(!0),[y,j]=N.useState(null),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState(null),[O,M]=N.useState(!1),[z,I]=N.useState(null),[L,D]=N.useState(!1),[B,Y]=N.useState(null),X=async()=>{try{g(!0),j(null);const Ce=await fe.get("/roles");Ce.data.success&&Array.isArray(Ce.data.data)?x(Ce.data.data):x([])}catch(Ce){console.error("Error loading roles:",Ce),j("Failed to load Roles. Please try again.")}finally{g(!1)}};N.useEffect(()=>{X()},[]);const U=()=>{b(!0)},G=()=>{b(!1)},Q=()=>{X(),b(!1)},le=Ce=>{T(Ce),E(!0)},ce=()=>{E(!1),T(null)},te=()=>{J.success("Role updated successfully!"),X(),E(!1),T(null)},re=Ce=>{I(Ce),M(!0)},W=async()=>{try{if(!z)return;const Ce=await fe.delete(`/roles/${z.id}`);Ce.data.success?(J.success("Role deleted successfully"),M(!1),I(null),X()):J.error(Ce.data.message||"Failed to delete role")}catch(Ce){console.error("Delete role error:",Ce),Ce.response?.data?.message?.includes("users assigned")||Ce.response?.data?.message?.includes("Cannot delete role")||Ce.response?.data?.message?J.error(Ce.response.data.message):J.error("Failed to delete role. Please try again."),M(!1),I(null)}},P=()=>{M(!1),I(null)},$=Ce=>{Y(Ce),D(!0)},ne=(Ce,ee)=>{J.success("Components assigned successfully!")},de=Ce=>{try{return new Date(Ce).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"Add Role"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):y?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[y,e.jsx("button",{onClick:X,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Kr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map((Ce,ee)=>e.jsxs("tr",{onClick:()=>$(Ce),className:`transition-colors cursor-pointer ${Ce.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ee+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ce.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:de(Ce.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),le(Ce)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),re(Ce)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),$(Ce)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(Ad,{size:20})})]})})]},Ce.id||ee))})]})})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:G,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(w4,{onClose:G,onCreated:Q})]})}),L&&e.jsx(N4,{role:B,onClose:()=>D(!1),onAssign:ne}),S&&_&&e.jsx(v4,{role:_,onClose:ce,onUpdated:te}),O&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',z.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:P,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function j4(){const[n,c]=N.useState(!1),[o,x]=N.useState([]),[f,g]=N.useState([]),[y,j]=N.useState(!1),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState(null),[O,M]=N.useState(null),[z,I]=N.useState(!0),[L,D]=N.useState(!0),[B,Y]=N.useState(null),{auth:X}=N.useContext(da),[U,G]=N.useState(!1),[Q,le]=N.useState(null),[ce,te]=N.useState(!1),[re,W]=N.useState(null),[P,$]=N.useState("users"),ne=async()=>{try{I(!0),Y(null);const Ne=await fe.get("/auth/users");Ne.data.success&&Array.isArray(Ne.data.data)?x(Ne.data.data):(console.warn("Unexpected response format:",Ne.data),x([]))}catch(Ne){console.error("Error in fetching users:",Ne),Y("Failed to load users. Please try again."),J.error("Failed to fetch users")}finally{I(!1)}},de=async()=>{try{D(!0);const Ne=await fe.get("/roles");Ne.data.success&&Array.isArray(Ne.data.data)?g(Ne.data.data):g([])}catch(Ne){console.error("Error loading roles:",Ne),J.error("Failed to load roles")}finally{D(!1)}};N.useEffect(()=>{ne(),de()},[]);const Ce=()=>j(!0),ee=()=>j(!1),H=Ne=>{T(Ne),b(!0)},me=()=>{b(!1),T(null)},ae=Ne=>{M(Ne),E(!0)},be=()=>{E(!1),M(null)},ze=()=>{ne(),j(!1),J.success("User created successfully!")},xe=()=>{ne(),b(!1),T(null)},[Ze,je]=N.useState(!1),Je=async Ne=>{try{je(!0),await fe.post("/auth/resend",{email:Ne.email}),J.success("Verification email sent successfully!")}catch(Te){console.error("Error sending verification email:",Te),J.error(Te.response?.data?.message||"Failed to send verification email")}finally{je(!1)}},Ke=async()=>{if(O)try{await fe.patch(`/auth/users/${O.id}/toggle`),J.success(`User ${O.is_active?"deactivated":"activated"} successfully!`),ne(),be()}catch(Ne){console.error("Error toggling user:",Ne),J.error("Failed to update user status")}},at=Ne=>{le(Ne),G(!0)},Ue=async()=>{try{if(!Q)return;await fe.delete(`/auth/users/${Q.id}`),J.success("User deleted successfully"),G(!1),le(null),ne()}catch(Ne){console.error("Delete user error:",Ne),Ne.response?.data?.message?J.error(Ne.response.data.message):J.error("Failed to delete user")}},ve=()=>{G(!1),le(null)},he=Ne=>{W(Ne),te(!0)},He=()=>{te(!1),W(null)},et=()=>{J.success("Apartments assigned successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(vs,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Users Management"})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>$("users"),className:`px-4 py-2 font-semibold 
                      ${P==="users"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Info"}),e.jsx("button",{onClick:()=>$("roles"),className:`px-4 py-2 font-semibold 
                      ${P==="roles"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Roles"})]}),P==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"Add User"})]})}),z?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Users..."})]}):B?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[B,e.jsx("button",{onClick:ne,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(vr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first user"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map((Ne,Te)=>{const oe=Ne.email===X?.user?.email||Ne.id===X?.user?.id;return e.jsxs("tr",{className:`transition-colors ${Ne.is_active?oe?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ne.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:Ne.email}),!Ne.is_verified&&e.jsx("button",{onClick:()=>Je(Ne),disabled:oe||!Ne.is_active||Ze,className:`ml-2 p-1 rounded ${oe||!Ne.is_active||Ze?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:Ze?e.jsx(yt,{size:14,className:"animate-spin"}):e.jsx(m1,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ne.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ne.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:Ne.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ne.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Ne.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:pe=>{pe.stopPropagation(),he(Ne)},disabled:oe||!Ne.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${oe||!Ne.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:oe?"You can't assign to your own account":Ne.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(er,{size:20})}),e.jsx("button",{onClick:()=>H(Ne),disabled:oe||!Ne.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${oe||!Ne.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:oe?"You can't edit your own account":Ne.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:()=>ae(Ne),disabled:oe,className:`flex items-center justify-center w-8 h-8 rounded ${oe?"text-gray-400 cursor-not-allowed bg-transparent":Ne.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:oe?"You can't modify your own account":Ne.is_active?"Deactivate":"Activate",children:Ne.is_active?e.jsx(Fl,{size:20}):e.jsx(zl,{size:20})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),at(Ne)},disabled:oe||!Ne.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${oe||!Ne.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:oe?"You can't delete your own account":Ne.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(ua,{size:20})})]})})]},Ne.id??Te)})})]})})]}),P==="roles"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:e.jsx(k1,{})})]})})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ee,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New User"}),e.jsx(f4,{onClose:ee,onCreated:ze,roles:f,rolesLoading:L})]})}),k&&_&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:me,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit User"}),e.jsx(g4,{user:_,onClose:me,onUpdated:xe,roles:f,rolesLoading:L})]})}),S&&O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:O.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:O.is_active?`Are you sure you want to deactivate ${O.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${O.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:be,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ke,className:`px-4 py-2 rounded-md text-white transition-colors ${O.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:O.is_active?"Deactivate":"Activate"})]})]})}),U&&Q&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',Q.firstname||Q.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ve,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ue,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),ce&&re&&e.jsx(b4,{user:re,onClose:He,onAssignSuccess:et}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function k4({onClose:n,apartment_id:c}){const[o,x]=N.useState(1),[f,g]=N.useState([]),[y,j]=N.useState(!1),[k,b]=N.useState(0),[S,E]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const z=await fe.get(`/floors/apartment/${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("Existing floors from backend:",z.data),z.data&&z.data.length>0){const I=Math.max(...z.data.map(L=>{const D=L.floor_id.match(/\d+/);return D?parseInt(D[0]):0}));console.log("Detected last floor number:",I),b(I)}}catch(z){console.error("Error fetching existing floors:",z)}finally{E(!1)}})()},[c]);const _=()=>{const M=Array.from({length:o},(z,I)=>({floor_id:`F${k+I+1}`}));console.log("Generated floors:",M),g(M)},T=(M,z,I)=>{const L=[...f];L[M][z]=I,g(L)},O=async M=>{M.preventDefault(),j(!0);try{const z=await fe.post("/floors/batch",{apartment_id:c,floors:f},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Created floors:",z.data),n()}catch(z){console.error("Error creating floors:",z)}finally{j(!1)}};return S?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:O,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:o,min:"1",onChange:M=>x(parseInt(M.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:_,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:f.map((M,z)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",k+z+1]}),e.jsx("input",{type:"text",value:M.floor_id,onChange:I=>T(z,"floor_id",I.target.value),className:"border rounded p-1 mr-2"})]},z))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:"px-4 py-2 rounded bg-purple-600 text-white",children:y?"Saving...":"Save All"})]})]})}function C4({floor:n,onClose:c,onUpdated:o}){const[x,f]=N.useState({floor_id:n.floor_id||"",status:n.status||"active"}),g=k=>{const{name:b,value:S}=k.target;f({...x,[b]:S})},y=localStorage.getItem("token"),j=async k=>{k.preventDefault();try{(await fe.put(`/floors/${n.id}`,x,{headers:{Authorization:`Bearer ${y}`}})).data.success?o():J.error("Failed to update floor")}catch(b){console.error("Error updating floor:",b),J.error("Error updating floor")}};return e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:x.floor_id,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:x.status,onChange:g,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function S4({floor:n,apartment:c,onClose:o,onUploadSuccess:x}){const[f,g]=N.useState(!1),[y,j]=N.useState([]),[k,b]=N.useState([]),[S,E]=N.useState(!0),_=N.useRef(null);N.useEffect(()=>{z()},[n.id]);const T=B=>{const Y=Array.from(B.target.files);b(X=>[...X,...Y])},O=B=>{b(Y=>Y.filter((X,U)=>U!==B))},M=async()=>{if(k.length===0){J.error("Please select at least one file");return}try{g(!0);const B=new FormData;k.forEach(X=>{B.append("documents",X)}),B.append("apartmentId",c.id),B.append("floorId",n.id),(await fe.post("/floor-documents/upload",B,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),x?.(),z(),_.current&&(_.current.value=""))}catch(B){console.error("Upload error:",B);const Y=B.response?.data?.message||"Failed to upload floor documents";J.error(Y)}finally{g(!1)}},z=async()=>{try{E(!0);const B=await fe.get(`/floor-documents/${n.id}/documents`);B.data.success&&j(B.data.data)}catch(B){console.error("Error loading floor documents:",B);const Y=B.response?.data?.message||"Failed to load floor documents";J.error(Y)}finally{E(!1)}},I=async B=>{if(window.confirm("Are you sure you want to delete this document?"))try{await fe.delete(`/floor-documents/documents/${B}`),J.success("Floor document deleted successfully"),z()}catch(Y){console.error("Delete error:",Y);const X=Y.response?.data?.message||"Failed to delete floor document";J.error(X)}},L=async B=>{try{const Y=await fe.get(`/floor-documents/documents/${B.id}/download`,{responseType:"blob"}),X=window.URL.createObjectURL(new Blob([Y.data])),U=document.createElement("a");U.href=X,U.setAttribute("download",B.original_name||B.file_name),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(X)}catch(Y){console.error("Download error:",Y);const X=Y.response?.data?.message||"Failed to download floor document";J.error(X)}},D=B=>{if(B===0)return"0 Bytes";const Y=1024,X=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(B)/Math.log(Y));return parseFloat((B/Math.pow(Y,U)).toFixed(2))+" "+X[U]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",n.floor_id]}),e.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),c&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",c.name," |",e.jsx("strong",{children:" Floor:"})," ",n.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:_,onChange:T,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>_.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ns,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),k.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:k.map((B,Y)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ht,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:B.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:D(B.size)})]})]}),e.jsx("button",{onClick:()=>O(Y),className:"text-red-500 hover:text-red-700",children:e.jsx(Gt,{size:16})})]},Y))})]}),k.length>0&&e.jsx("button",{onClick:M,disabled:f,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{size:20}),"Upload ",k.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):y.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Ht,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:y.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Ht,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:B.original_name||B.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[D(B.file_size),"  Uploaded on ",new Date(B.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>L(B),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(ec,{size:18})}),e.jsx("button",{onClick:()=>I(B.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:18})})]})]},B.id))})]})]})}function A4(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),[f,g]=N.useState(window.innerWidth<768),{id:y}=os(),[j,k]=N.useState(null),b=Vt(),[S,E]=N.useState([]),[_,T]=N.useState(null),[O,M]=N.useState(!0),[z,I]=N.useState(!1),[L,D]=N.useState(!1),[B,Y]=N.useState(null),[X,U]=N.useState(!1),[G,Q]=N.useState(null),[le,ce]=N.useState(!1),[te,re]=N.useState(null),[W,P]=N.useState(!1),[$,ne]=N.useState(null);N.useEffect(()=>{const Ne=()=>{g(window.innerWidth<768)};return window.addEventListener("resize",Ne),()=>window.removeEventListener("resize",Ne)},[]),N.useEffect(()=>{y&&(async()=>{try{const Te=await fe.get(`/apartments/${y}`);Te.data.success&&k(Te.data.data)}catch(Te){console.error("Error fetching apartment:",Te)}})()},[y]);const de=()=>{b("/apartmentview")},Ce=async()=>{try{M(!0),T(null);const Ne=await fe.get(`/floors?apartment_id=${y}`);Ne.data.success&&Array.isArray(Ne.data.data)?E(Ne.data.data):E([])}catch(Ne){console.error("Error loading floors:",Ne),T("Failed to load floors. Please try again.")}finally{M(!1)}};N.useEffect(()=>{Ce()},[y]);const ee=Ne=>{b(`/houses/${y}/${Ne.id}`)},H=Ne=>{Q(Ne),U(!0)},me=()=>{U(!1),Q(null)},ae=async Ne=>{try{const Te=await fe.patch(`/floors/${Ne.id}/toggle`);J.success(Te.data.message),Ce()}catch(Te){console.error("Error toggling floor:",Te),J.error("Failed to toggle floor status")}},be=()=>{I(!0)},ze=()=>{I(!1)},xe=()=>{Ce(),I(!1),J.success("Floor created successfully!")},Ze=Ne=>{Y(Ne),D(!0)},je=()=>{D(!1),Y(null)},Je=()=>{Ce(),D(!1),J.success("Floor updated successfully!")},Ke=Ne=>{re(Ne),ce(!0)},at=async()=>{try{if(!te)return;await fe.delete(`/floors/${te.id}`),J.success("Floor deleted successfully"),ce(!1),re(null),Ce()}catch(Ne){console.error("Delete floor error:",Ne),J.error("Failed to delete floor")}},Ue=()=>{ce(!1),re(null)},ve=Ne=>{ne(Ne),P(!0)},he=()=>{P(!1),ne(null)},He=()=>{J.success("Floor documents uploaded successfully!")},et=()=>e.jsx("button",{onClick:()=>x(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Ul,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(et,{}),e.jsx(Zt,{onCollapse:c,isMobileOpen:o,onMobileClose:()=>x(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{onMobileMenuClick:()=>x(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:de,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(bs,{size:f?20:25})}),e.jsx(Di,{size:f?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Floors"}),j&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Apartment: ",j.name]})]})]}),e.jsxs("button",{onClick:be,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(tr,{size:f?16:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:O?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(yt,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading floors..."})]}):_?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:_}),e.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):S.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Kr,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No floors found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding floors"}),e.jsx("button",{onClick:be,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First Floor"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Floors: ",S.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[S.length," items"]})]})}),S.map((Ne,Te)=>e.jsxs("div",{onClick:()=>Ne.is_active&&ee(Ne),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${Ne.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["Floor ",Ne.floor_id]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-3",children:[e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Houses:"})," ",Ne.house_count]}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full 
                                                                ${Ne.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":Ne.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":Ne.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:Ne.status.charAt(0).toUpperCase()+Ne.status.slice(1)})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:oe=>{oe.stopPropagation(),ve(Ne)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(Ht,{size:14})}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),Ze(Ne)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Pa,{size:14})}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),H(Ne)},className:`p-1.5 rounded-lg ${Ne.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:Ne.is_active?"Deactivate":"Activate",children:Ne.is_active?e.jsx(Fl,{size:14}):e.jsx(zl,{size:14})}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),Ke(Ne)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(ua,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex justify-between",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded ${Ne.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Ne.is_active?"Active":"Inactive"}),e.jsx("span",{children:"Click to view houses"})]})]},Ne.id||Te))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Floors Management"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[S.length," floors"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map((Ne,Te)=>e.jsxs("tr",{onClick:()=>Ne.is_active&&ee(Ne),className:`transition-colors cursor-pointer ${Ne.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ne.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ne.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${Ne.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":Ne.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":Ne.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:Ne.status.charAt(0).toUpperCase()+Ne.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:oe=>{oe.stopPropagation(),ve(Ne)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(Ht,{size:20})}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),Ze(Ne)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),H(Ne)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:Ne.is_active?"Deactivate":"Activate",children:Ne.is_active?e.jsx(Fl,{size:25}):e.jsx(zl,{size:25})}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),Ke(Ne)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},Ne.id||Te))})]})]})})})]})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx("button",{onClick:ze,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(k4,{onClose:ze,onCreated:xe,apartment_id:y})]})})}),L&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx("button",{onClick:je,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(C4,{onClose:je,onUpdated:Je,floor:B})]})})}),X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:G?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:G?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:`flex ${f?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:me,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${f?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{G&&(ae(G),U(!1),Q(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${f?"":"flex-1"} ${G?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:G?.is_active?"Deactivate":"Activate"})]})]})}),le&&te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',te.floor_id,'"?']}),e.jsxs("div",{className:`flex ${f?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Ue,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${f?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:at,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${f?"":"flex-1"}`,children:"Delete"})]})]})}),W&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(S4,{floor:$,apartment:j,onClose:he,onUploadSuccess:He})})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function E4({onClose:n,apartment_id:c,onCreated:o}){const[x,f]=N.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[g,y]=N.useState(!1),[j,k]=N.useState(""),b=_=>{const{name:T,value:O}=_.target;f(M=>({...M,[T]:O}))},S=async()=>{try{const T=(await fe.get(`/housetype?apartment_id=${c}`)).data.data||[],O=T.length>0?T[T.length-1]:null,M=O?parseInt(O.name.replace("Type","")):0,z=`Type ${String(M+1).padStart(2,"0")}`;f(I=>({...I,name:z}))}catch(_){console.error("Error fetching last type:",_),k("Failed to generate Type ID")}};N.useEffect(()=>{S()},[]);const E=async _=>{_.preventDefault(),y(!0),k("");try{const T=await fe.post("/housetype",{...x,apartment_id:c},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});T.data.success?(o?.(T.data.data),n()):k("Failed to save house type")}catch(T){console.error("Error saving house type:",T),k("Error saving house type")}finally{y(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsx("input",{type:"text",name:"name",value:x.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:x.sqrfeet,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:x.rooms,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:x.bathrooms,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Saving...":"Save"})]})]})}function _4({housetype:n,onClose:c,onUpdated:o}){const[x,f]=N.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[g,y]=N.useState(!1),[j,k]=N.useState(""),b=localStorage.getItem("token");N.useEffect(()=>{n&&f({name:n.name||"",sqrfeet:n.sqrfeet||"",rooms:n.rooms||"",bathrooms:n.bathrooms||""})},[n]);const S=_=>{const{name:T,value:O}=_.target;f(M=>({...M,[T]:O}))},E=async _=>{_.preventDefault(),y(!0),k("");try{const T=await fe.put(`/housetype/${n.id}`,x,{headers:{Authorization:`Bearer ${b}`}});T.data.success?(o&&o(T.data.data),c&&c()):k(T.data.message||"Failed to update house type")}catch(T){console.error("Update error:",T),k("Error updating house type")}finally{y(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsx("input",{type:"text",name:"name",value:x.name,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:x.sqrfeet,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:x.rooms,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:x.bathrooms,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Saving...":"Save"})]})]})}function C1(){const{apartment_id:n}=os();console.log("Apartment ID:",n);const[c,o]=N.useState(!1),[x,f]=N.useState(null),[g,y]=N.useState([]),[j,k]=N.useState(!1),[b,S]=N.useState(!1),[E,_]=N.useState(null),[T,O]=N.useState(!1),[M,z]=N.useState(null),I=async()=>{try{o(!0),f(null);const ce=await fe.get(`/housetype?apartment_id=${n}`);ce.data.success&&Array.isArray(ce.data.data)?y(ce.data.data):y([])}catch(ce){console.error("Error loading houses:",ce),f("Failed to load houses. Please try again.")}finally{o(!1)}};N.useEffect(()=>{I()},[n]);const L=()=>{k(!0)},D=()=>{k(!1)},B=()=>{I(),k(!1),J.success("House Type Created Successfully")},Y=ce=>{_(ce),S(!0)},X=()=>{S(!1),_(null)},U=()=>{I(),S(!1),J.success("House Type updated successfully!")},G=ce=>{z(ce),O(!0)},Q=async()=>{try{if(!M)return;await fe.delete(`/houseType/${M.id}`),J.success("House type deleted successfully"),O(!1),z(null),I()}catch(ce){console.error("Delete house type error:",ce),J.error("Failed to delete house type")}},le=()=>{O(!1),z(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:L,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"New House Type"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):x?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[x,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):g.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Kr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:g.map(ce=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ce.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ce.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ce.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ce.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:te=>{te.stopPropagation(),Y(ce)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:te=>{te.stopPropagation(),G(ce)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},ce.id))})]})}),j&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:D,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(E4,{onClose:D,onCreated:B,apartment_id:n})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:X,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx(_4,{onClose:X,onUpdated:U,housetype:E})]})}),T&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Q,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function T4({houseowner:n,onClose:c,onUpdated:o}){const[x,f]=N.useState(!1),[g,y]=N.useState(!1),[j,k]=N.useState(null),[b,S]=N.useState(null),[E,_]=N.useState([]),[T,O]=N.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});N.useEffect(()=>{n&&(O({name:n.name||"",occupation:n.occupation||"",country:n.country||"",mobile:n.mobile||"",email:n.email||"",occupied_way:n.occupied_way||"own",proof:n.proof||""}),n.proof&&S(n.proof))},[n]),N.useEffect(()=>{(async()=>{try{const U=await fe.get("/countries");_(U.data.data||[])}catch(U){console.error("Error fetching countries:",U)}})()},[]);const M=X=>{const{name:U,value:G}=X.target;O(Q=>({...Q,[U]:G}))},z=X=>{const U=X.target.files[0];if(U)if(k(U),U.type.startsWith("image/")){const G=new FileReader;G.onloadend=()=>{S(G.result)},G.readAsDataURL(U)}else S(null)},I=X=>{const U=X.target.value,G=E.find(Q=>Q.id.toString()===U);O(G?Q=>({...Q,country:G.country_name,mobile:G.phone_code+" "+Q.mobile.replace(/^\+\d+\s?/,"")}):Q=>({...Q,country:"",mobile:Q.mobile.replace(/^\+\d+\s?/,"")}))},L=X=>{const U=X.target.value;if(T.mobile&&T.mobile.includes("+")){const G=T.mobile.match(/^(\+\d+)(?:\s|$)/);if(G){const Q=G[1];U.startsWith(Q)?O(le=>({...le,mobile:U})):O(le=>({...le,mobile:Q+" "+U.replace(/^\+\d+\s?/,"")}));return}}O(G=>({...G,mobile:U}))},D=async X=>{X.preventDefault(),y(!0);try{const U=new FormData;Object.keys(T).forEach(Q=>{Q!=="proof"&&U.append(Q,T[Q])}),j&&U.append("proof",j);const G=await fe.put(`/houseowner/${n.id}`,U,{headers:{"Content-Type":"multipart/form-data"}});G.data.success&&(o(G.data.data),c())}catch(U){console.error("Error updating house owner:",U),alert("Error updating house owner. Please try again.")}finally{y(!1)}},Y=E.find(X=>X.country_name===T.country)?.phone_code||"";return x?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(yt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):n?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Gt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(vr,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:T.name,onChange:M,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cd,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:T.occupation,onChange:M,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(c1,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:E.find(X=>X.country_name===T.country)?.id||"",onChange:I,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),E.map(X=>e.jsxs("option",{value:X.id,children:[X.country_name," (",X.phone_code,")"]},X.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Fi,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[Y&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:Y}),e.jsx("input",{type:"tel",name:"mobile",value:T.mobile.replace(/^\+\d+\s?/,""),onChange:L,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${Y?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ll,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:T.email,onChange:M,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:T.occupied_way,onChange:M,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ns,{size:16,className:"inline mr-2"}),"Proof Document"]}),b&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(Ht,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:T.proof.split("/").pop()})}),e.jsx("a",{href:`${fe.defaults.baseURL}/houseowner/view-proof/${n.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:z,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(Ns,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),j&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",j.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function M4({houseownerId:n,onClose:c,onSuccess:o}){const[x,f]=N.useState(!1),[g,y]=N.useState(!1),[j,k]=N.useState({name:"",nic:"",email:"",phone:"",houseowner_id:n}),[b,S]=N.useState({});N.useEffect(()=>{k({name:"",nic:"",email:"",phone:"",houseowner_id:n}),S({})},[n]);const E=()=>{const M={};return j.name.trim()||(M.name="Name is required"),j.nic.trim()||(M.nic="NIC is required"),j.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(j.email)&&(M.email="Invalid email address"),j.phone&&!/^[0-9+\-\s()]{10,}$/.test(j.phone.replace(/\s/g,""))&&(M.phone="Invalid phone number"),S(M),Object.keys(M).length===0},_=M=>{const{name:z,value:I}=M.target;k(L=>({...L,[z]:I})),b[z]&&S(L=>({...L,[z]:""}))},T=async M=>{if(M.preventDefault(),!!E()){y(!0);try{const z=await fe.post("/family",{...j,houseowner_id:n});z.data.success&&(o(z.data.data),c())}catch(z){console.error("Error adding family member:",z),z.response?.data?.error?S(I=>({...I,general:z.response.data.message||"Failed to add family member"})):S(I=>({...I,general:"Failed to add family member. Please try again."}))}finally{y(!1)}}},O=M=>{const I=M.target.value.replace(/[^\d+\-\s]/g,"");k(L=>({...L,phone:I})),b.phone&&S(L=>({...L,phone:""}))};return x?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(yt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(qo,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:g,children:e.jsx(Gt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6",children:[b.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:b.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(vr,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:g}),b.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(d1,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:j.nic,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:g}),b.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ll,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:j.email,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:g}),b.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Fi,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:j.phone,onChange:O,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:g}),b.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(qo,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function D4({member:n,onClose:c,onUpdated:o}){const[x,f]=N.useState(!1),[g,y]=N.useState(!1),[j,k]=N.useState({}),[b,S]=N.useState({name:"",email:"",phone:""});N.useEffect(()=>{n&&S({name:n.name||"",email:n.email||"",phone:n.phone||""})},[n]);const E=()=>{const O={};return b.name.trim()||(O.name="Name is required"),b.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)&&(O.email="Invalid email address"),b.phone&&!/^[0-9+\-\s()]{10,}$/.test(b.phone.replace(/\s/g,""))&&(O.phone="Invalid phone number"),k(O),Object.keys(O).length===0},_=O=>{const{name:M,value:z}=O.target;S(I=>({...I,[M]:z})),j[M]&&k(I=>({...I,[M]:""}))},T=async O=>{if(O.preventDefault(),!!E()){y(!0);try{const M=await fe.put(`/family/${n.id}`,b);M.data.success&&(o(M.data.data),c())}catch(M){console.error("Error updating family member:",M),k(z=>({...z,general:M.response?.data?.message||"Failed to update family member"}))}finally{y(!1)}}};return n?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:g,children:e.jsx(Gt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6",children:[j.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:j.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(vr,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:b.name,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:g}),j.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ll,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:b.email,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:g}),j.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Fi,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:b.phone,onChange:_,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:g}),j.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:j.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:g?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hd,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function R4(){const[n,c]=N.useState(!1),[o,x]=N.useState("type"),{apartment_id:f,floor_id:g,id:y}=os();console.log("Apartment Id:",f),console.log("Floor ID: ",g),console.log("House ID: ",y);const[j,k]=N.useState(null),[b,S]=N.useState(null),[E,_]=N.useState(null),[T,O]=N.useState(null),[M,z]=N.useState(null),[I,L]=N.useState([]),[D,B]=N.useState(!1),[Y,X]=N.useState([]),[U,G]=N.useState(!1),[Q,le]=N.useState(!1),[ce,te]=N.useState(!1),[re,W]=N.useState(!1),[P,$]=N.useState(!1),[ne,de]=N.useState(null),Ce=Vt();N.useEffect(()=>{f&&fe.get(`/apartments/${f}`).then(je=>je.data.success&&k(je.data.data)).catch(je=>console.error("Error fetching apartment:",je))},[f]),N.useEffect(()=>{g&&fe.get(`/floors/${g}`).then(je=>je.data.success&&S(je.data.data)).catch(je=>console.error("Error fetching floor:",je))},[g]),N.useEffect(()=>{y&&fe.get(`/houses/${y}`).then(je=>je.data.success&&_(je.data.data)).catch(je=>console.error("Error fetching house:",je))},[y]),N.useEffect(()=>{E?.housetype_id&&fe.get(`/housetype/${E.housetype_id}`).then(je=>je.data.success&&O(je.data.data)).catch(je=>console.error("Error fetching house type:",je))},[E]),N.useEffect(()=>{E?.houseowner_id&&fe.get(`/houseowner/${E.houseowner_id}`).then(je=>je.data.success&&z(je.data.data)).catch(je=>console.error("Error fetching house owner: ",je))},[E]),N.useEffect(()=>{E?.houseowner_id&&ee(E.houseowner_id)},[E]);const ee=async je=>{try{B(!0);const Je=await fe.get(`/family/houseowner/${je}`);Je.data.success&&L(Je.data.data||[])}catch(Je){console.error("Error fetching family members: ",Je),L([])}finally{B(!1)}};N.useEffect(()=>{y&&H()},[y]);const H=async()=>{try{G(!0);const je=await fe.get(`/bill-assignments/house/${y}`);je.data.success&&X(je.data.data||[])}catch(je){console.error("Error fetching assigned bills:",je),X([])}finally{G(!1)}},me=()=>{Ce(`/houses/${f}/${g}`)},ae=je=>new Date(je).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),be=async()=>{if(!M?.id){alert("House owner information not available");return}try{le(!0),console.log("Downloading proof for houseowner ID:",M.id),console.log("Proof path in database:",M.proof);try{const he=await fe.head(`/houseowner/download-proof/${M.id}`);console.log("HEAD request successful:",he.status)}catch(he){console.error("HEAD request failed:",he.response?.status||he.message)}const je=await fe.get(`/houseowner/download-proof/${M.id}`,{responseType:"blob"});if(console.log("Download response status:",je.status),console.log("Response headers:",je.headers),je.status!==200){const he=await je.data.text();console.error("Error response:",he);let He=`Download failed with status ${je.status}`;try{const et=JSON.parse(he);et.message&&(He=et.message)}catch{he&&(He=he)}throw new Error(He)}const Je=new Blob([je.data]),Ke=window.URL.createObjectURL(Je),at=document.createElement("a");at.href=Ke;const Ue=je.headers["content-disposition"];let ve="owner_proof.jpg";if(Ue){const he=Ue.match(/filename="?([^"]+)"?/);he&&(ve=he[1],console.log("Filename from header:",ve))}else if(M.proof){const he=M.proof.split("/");ve=he[he.length-1]||ve}at.download=ve,document.body.appendChild(at),at.click(),document.body.removeChild(at),setTimeout(()=>{window.URL.revokeObjectURL(Ke)},100),console.log("Download successful")}catch(je){console.error("Error downloading proof:",je),console.error("Error details:",{name:je.name,message:je.message,stack:je.stack,response:je.response?.data}),je.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):je.response?.status===500?alert("Server error occurred. Please check server logs."):je.message?alert(`Download failed: ${je.message}`):alert("Failed to download proof document. Please try again.")}finally{le(!1)}},ze=()=>{E?.houseowner_id?W(!0):alert("House owner information is required before adding family members.")},xe=je=>{de(je),$(!0)},Ze=async je=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await fe.delete(`/family/${je}`),E?.houseowner_id&&ee(E.houseowner_id)}catch(Je){console.error("Error deleting family member:",Je),alert("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:me,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(bs,{size:25})}),e.jsx(ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),j&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",j.name]}),b&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",b.floor_id]}),E&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",E.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>x("type"),className:`px-4 py-2 font-semibold 
                                    ${o==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>x("owner"),className:`px-4 py-2 font-semibold 
                                    ${o==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>x("residents"),className:`px-4 py-2 font-semibold 
                                    ${o==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",I.length,")"]}),e.jsx("button",{onClick:()=>x("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${o==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),o==="type"&&T&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(ga,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ed,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:T.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ed,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[T.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(zN,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:T.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(BN,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:T.bathrooms})]})]})})]})]}),o==="owner"&&M&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(vr,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:M.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:M.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),M.houseowner_id&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," House Owner"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>te(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Pa,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qx,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:M.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cd,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:M.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:M.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:ae(E.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(c1,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:M.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fi,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:M.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ll,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:M.email||"N/A"})]})]}),M.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ht,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:be,disabled:Q,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:Q?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ec,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M.proof.split("/").pop()})]})]})]})]})]})]}),o==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(vs,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:ze,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(qo,{size:18,className:"mr-2"}),"Add Family Member"]})]}),D?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):I.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(vs,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:ze,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(qo,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(je=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:je.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:je.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(d1,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:je.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>xe(je),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Pa,{size:18})}),e.jsx("button",{onClick:()=>Ze(je.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(ua,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[je.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Cd,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:je.occupation})]})]}),je.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(ll,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:je.email})]})]}),je.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Uv,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:je.phone})]})]}),je.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(nl,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:ae(je.moved_at)})]})]})]})]},je.id))})]}),o==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(Ht,{className:"mr-2",size:20}),"Assigned Bills"]}),U?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(yt,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):Y.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Ht,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:Y.map(je=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Qr,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:je.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:je.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(nl,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:ae(je.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${je.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:je.status||"active"})})]})},je.id))})]})]})})]}),ce&&M&&e.jsx(T4,{houseowner:M,onClose:()=>te(!1),onUpdated:je=>{z(je),te(!1)}}),re&&E?.houseowner_id&&e.jsx(M4,{houseownerId:E.houseowner_id,onClose:()=>W(!1),onSuccess:je=>{L(Je=>[je,...Je]),W(!1)}}),P&&ne&&e.jsx(D4,{member:ne,onClose:()=>{$(!1),de(null)},onUpdated:je=>{ee(),L(Je=>Je.map(Ke=>Ke.id===je.id?je:Ke)),$(!1),de(null)}})]})}function I4({onClose:n,onCreated:c,apartment_id:o,floor_id:x}){const[f,g]=N.useState([{numHouses:1,housetype_id:""}]),[y,j]=N.useState(""),[k,b]=N.useState([]),[S,E]=N.useState([]),[_,T]=N.useState([]),[O,M]=N.useState(!1),[z,I]=N.useState(!0),[L,D]=N.useState("");N.useEffect(()=>{(async()=>{try{const W=await fe.get(`/houses?apartment_id=${o}&floor_id=${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});W.data?.data?.length>0&&(T(W.data.data),console.log("Existing houses:",W.data.data))}catch(W){console.error("Error fetching existing houses:",W)}finally{I(!1)}})()},[o,x]),N.useEffect(()=>{(async()=>{try{const W=await fe.get(`/housetype?apartment_id=${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});E(W.data.data||[])}catch(W){console.error("Error fetching house types:",W)}})()},[o]);const B=re=>{if(!re||_.length===0)return 0;const W=_.filter($=>$.house_id&&$.house_id.startsWith(re)).map($=>{const de=$.house_id.slice(re.length).match(/^\d+$/);return de?parseInt(de[0]):0}).filter($=>$>0);if(console.log(`Houses with prefix "${re}":`,W),W.length===0)return 0;const P=Math.max(...W);return console.log(`Last house number for prefix "${re}":`,P),P},Y=()=>{g(re=>[...re,{numHouses:1,housetype_id:""}])},X=re=>{if(f.length===1){D("At least one house type row is required");return}g(W=>W.filter((P,$)=>$!==re))},U=(re,W,P)=>{g($=>$.map((ne,de)=>de===re?{...ne,[W]:P}:ne))},G=()=>{if(!y.trim()){D("Please enter a key letter/prefix");return}if(f.filter(de=>!de.housetype_id||de.numHouses<1).length>0){D("Please select house type and ensure number of houses is at least 1 for all rows");return}D("");const W=y.trim().toUpperCase();let $=B(W)+1;const ne=[];f.forEach(de=>{const Ce=S.find(ee=>ee.id===de.housetype_id);for(let ee=0;ee<de.numHouses;ee++)ne.push({house_id:`${W}${$}`,housetype_id:de.housetype_id,house_type_name:Ce?.name||""}),$++}),console.log(`Generated ${ne.length} houses:`,ne),b(ne)},Q=(re,W)=>{const P=[...k];P[re].housetype_id=W;const $=S.find(ne=>ne.id===W);P[re].house_type_name=$?.name||"",b(P)},le=async re=>{if(re.preventDefault(),D(""),M(!0),k.filter(P=>!P.housetype_id).length>0){D("Please select house type for all houses"),M(!1);return}try{const P={apartment_id:o,floor_id:x,houses:k.map(ne=>({house_id:ne.house_id,housetype_id:ne.housetype_id}))},$=await fe.post("/houses/batch",P,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c&&c(),n&&n()}catch(P){console.error("Error creating houses:",P),D(P.response?.data?.message||"Server error while creating houses.")}finally{M(!1)}},ce=re=>{j(re.target.value),b([])},te=f.reduce((re,W)=>re+(W.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[L&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:L}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:y,onChange:ce,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:Y,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(tr,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:f.map((re,W)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:re.numHouses,onChange:P=>U(W,"numHouses",parseInt(P.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:re.housetype_id,onChange:P=>U(W,"housetype_id",P.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),S.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>X(W),disabled:f.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(ua,{size:16})})})]},W))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:te})]})})]}),y.trim()&&_.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',y.toUpperCase(),'":']})," Found ",B(y.trim().toUpperCase())," existing houses.",B(y.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${B(y.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:G,disabled:!y.trim()||z||te===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:z?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",te," House",te!==1?"s":"",e.jsx(_N,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),k.length>0?e.jsxs("form",{onSubmit:le,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",k.length," house",k.length!==1?"s":"",' with prefix "',y.toUpperCase(),'"']}),k.map((re,W)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:re.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:re.housetype_id,onChange:P=>Q(W,P.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),S.map(P=>e.jsx("option",{value:P.id,children:P.name},P.id))]})]})]}),re.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",re.house_type_name]})]},W))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:n,disabled:O,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:O,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${k.length} House${k.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function O4({house:n,onClose:c,onUpdated:o,apartment_id:x,floor_id:f}){const[g,y]=N.useState({house_id:n.house_id,status:n.status,housetype_id:n.housetype_id,houseowner_id:n.houseowner_id}),[j,k]=N.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[b,S]=N.useState([]),[E,_]=N.useState(!1),[T,O]=N.useState(!1),[M,z]=N.useState(null),[I,L]=N.useState([]),[D,B]=N.useState(!0);N.useEffect(()=>{(async()=>{try{const W=await fe.get("/countries");L(W.data.data)}catch(W){console.error("Error fetching countries:",W)}})()},[]);const Y=re=>{const W=re.target.value,P=I.find($=>$.id.toString()===W);k(P?$=>({...$,country:P.country_name,mobile:P.phone_code+" "}):$=>({...$,country:"",mobile:""}))},X=re=>{const W=re.target.value;if(j.mobile&&j.mobile.includes("+")){const P=j.mobile.match(/^(\+\d+)(?:\s|$)/);if(P){const $=P[1];W.startsWith($)?k(ne=>({...ne,mobile:W})):k(ne=>({...ne,mobile:$+" "+W.replace(/^\+\d+\s?/,"")}));return}}k(P=>({...P,mobile:W}))};N.useEffect(()=>{(async()=>{try{const W=await fe.get(`/housetype?apartment_id=${x}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});S(W.data.data||[])}catch(W){console.error("Error fetching house types:",W)}})()},[x]),N.useEffect(()=>{g.status==="occupied"&&n.status!=="occupied"?(O(!0),B(!0)):g.status!=="occupied"&&O(!1)},[g.status,n.status]);const U=re=>{y({...g,[re.target.name]:re.target.value})},G=re=>{k({...j,[re.target.name]:re.target.value})},Q=re=>{z(re.target.files[0])},le=async re=>{re.preventDefault(),_(!0);try{let W=g.houseowner_id,P=!1;if(g.status==="occupied"&&!W){const de=new FormData;de.append("name",j.name),de.append("nic",j.nic),de.append("occupation",j.occupation),de.append("country",j.country),de.append("mobile",j.mobile),de.append("email",j.email),de.append("occupied_way",j.occupied_way),de.append("apartment_id",x),M&&de.append("proof",M);const Ce=await fe.post("/houseowner",de,{headers:{"Content-Type":"multipart/form-data"}});Ce.data.success&&(W=Ce.data.data.id,P=!0,y(ee=>({...ee,houseowner_id:W})))}const $={...g,house_owner_id:W||W};if((await fe.put(`/houses/${n.id}`,$)).data.success)return P?(o(),alert(" House owner saved successfully! You can now setup login.")):o(),W}catch(W){console.error("Error updating house:",W),alert("Error updating house. Please try again.")}finally{_(!1)}},ce=I.find(re=>re.country_name===j.country),te=async()=>{try{_(!0);const re=g.houseowner_id;if(!re){alert("House owner ID not found. Please save the house owner first.");return}const W=j.email;if(!W||!W.includes("@")){alert("Please enter a valid email address for the house owner");return}if(!window.confirm(`Send verification email to ${W}?

The house owner will receive an email with verification link.`)){_(!1);return}const $=await fe.post("/houseowner-auth/admin/setup",{houseowner_id:re,send_email:!0});$.data.success?(alert(` Setup successful!

Verification email sent to: ${W}

${$.data.message}`),o()):alert($.data.message||"Failed to set up house owner")}catch(re){console.error("Error setting up house owner:",re),alert("Error setting up house owner. Please try again.")}finally{_(!1)}};return e.jsxs("form",{onSubmit:le,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 pl-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:g.house_id,onChange:U,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:g.housetype_id,onChange:U,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),b&&b.length>0?b.map(re=>e.jsx("option",{value:re.id,children:re.name||re.type_name||"Unnamed Type"},re.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:g.status,onChange:U,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),T&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("button",{type:"button",onClick:()=>B(!D),className:"flex items-center justify-between w-full mb-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),D?e.jsx(Ii,{size:20,className:"text-gray-500"}):e.jsx(Ri,{size:20,className:"text-gray-500"})]}),D&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:G,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:j.nic,onChange:G,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:j.occupation,onChange:G,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsxs("select",{name:"country",value:I.find(re=>re.country_name===j.country)?.id||"",onChange:Y,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select country *"}),I.map(re=>e.jsxs("option",{value:re.id,children:[re.country_name," (",re.phone_code,")"]},re.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsxs("div",{className:"flex items-center",children:[ce&&e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-3 py-2 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600 whitespace-nowrap",children:ce.phone_code}),e.jsx("input",{name:"mobile",value:j.mobile,onChange:X,placeholder:ce?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${ce?"rounded-l-none":""}`,required:!0,disabled:!ce})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",ce?.phone_code||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:j.email,onChange:G,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:j.occupied_way,onChange:G,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:Q,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[E&&e.jsx(yt,{size:16,className:"animate-spin"}),T?"Save House & Owner":"Save Changes"]}),(g.houseowner_id||T&&j.email)&&e.jsx("button",{type:"button",onClick:te,disabled:E||!j.email,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",title:j.email?"Setup login for house owner":"Enter email first",children:"Setup Login for Owner"})]})})]})}function B4({onClose:n,onCreated:c}){const[o,x]=N.useState({bill_name:"",billtype:""}),[f,g]=N.useState(!1),[y,j]=N.useState(""),[k,b]=N.useState([]),S=_=>{const{name:T,value:O}=_.target;x(M=>({...M,[T]:O})),T==="bill_name"&&y&&j("")},E=async _=>{if(_.preventDefault(),g(!0),j(""),!o.bill_name.trim()||!o.billtype){j("Please fill in all required fields"),g(!1);return}try{const T=await fe.post("/bills",{bill_name:o.bill_name.trim(),billtype:o.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});T.data.success?(c?.(T.data.data),J.success("Bill type created successfully"),n()):j(T.data.message||"Failed to save bill type")}catch(T){console.error("Error saving bill type:",T);const O=T.response?.data?.message||"Error saving bill type. Please try again.";j(O),T.response?.status===409&&J.error(O)}finally{g(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[y&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:y}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:o.billtype,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:o.bill_name,onChange:S,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!o.bill_name.trim()||!o.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${f||!o.bill_name.trim()||!o.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:f?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function S1({bills:n,onClose:c,onUpdated:o}){const[x,f]=N.useState({bill_name:"",billtype:""}),[g,y]=N.useState(!1),[j,k]=N.useState(""),b=localStorage.getItem("token");N.useEffect(()=>{n&&f({bill_name:n.bill_name||"",billtype:n.billtype||""})},[n]);const S=_=>{const{name:T,value:O}=_.target;f(M=>({...M,[T]:O}))},E=async _=>{_.preventDefault(),y(!0),k("");try{const T=await fe.put(`/bills/${n.id}`,x,{headers:{Authorization:`Bearer ${b}`}});T.data.success?(o&&o(T.data.data),c&&c()):k(T.data.message||"Failed to update bill type")}catch(T){console.error("Update error:",T),k("Error updating bill type")}finally{y(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:x.billtype,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:x.bill_name,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Saving...":"Save"})]})]})}function A1({isOpen:n,onClose:c,selectedBill:o,onAssignSuccess:x}){const[f,g]=N.useState([]),[y,j]=N.useState({}),[k,b]=N.useState({}),[S,E]=N.useState(""),[_,T]=N.useState(""),[O,M]=N.useState([]),[z,I]=N.useState({}),[L,D]=N.useState({}),[B,Y]=N.useState(!1),[X,U]=N.useState({}),[G,Q]=N.useState({}),[le,ce]=N.useState(!1),te=async()=>{try{Y(!0);const ae=await fe.get("/apartments");ae.data.success&&g(ae.data.data||[])}catch(ae){console.error("Error loading apartments:",ae),J.error("Failed to load apartments")}finally{Y(!1)}},re=async ae=>{if(ae)try{U(ze=>({...ze,[ae]:!0}));const be=await fe.get(`/floors?apartment_id=${ae}`);if(be.data.success){const ze=be.data.data||[];j(xe=>({...xe,[ae]:ze}))}}catch(be){console.error("Error loading floors:",be),J.error("Failed to load floors")}finally{U(be=>({...be,[ae]:!1}))}},W=async(ae,be)=>{if(!(!ae||!be))try{Q(xe=>({...xe,[be]:!0}));const ze=await fe.get(`/houses?apartment_id=${ae}&floor_id=${be}`);if(ze.data.success){const xe=ze.data.data||[];b(Ze=>({...Ze,[be]:xe}))}}catch(ze){console.error("Error loading houses:",ze),J.error("Failed to load houses")}finally{Q(ze=>({...ze,[be]:!1}))}},P=async ae=>{const be=z[ae.id];!be&&!y[ae.id]&&await re(ae.id),I(ze=>({...ze,[ae.id]:!be})),be||(E(ae.id),T(""),M([]))},$=async(ae,be)=>{const ze=`${ae}-${be.id}`,xe=L[ze];!xe&&!k[be.id]&&await W(ae,be.id),D(Ze=>({...Ze,[ze]:!xe})),xe||(T(be.id),M([]))},ne=ae=>{M(be=>be.includes(ae)?be.filter(ze=>ze!==ae):[...be,ae])},de=()=>{if(!_)return;const be=(k[_]||[]).map(xe=>xe.id),ze=be.every(xe=>O.includes(xe));M(ze?xe=>xe.filter(Ze=>!be.includes(Ze)):xe=>{const Ze=[...xe];return be.forEach(je=>{Ze.includes(je)||Ze.push(je)}),Ze})},Ce=()=>{if(!_)return!1;const ae=k[_]||[];return ae.length===0?!1:ae.every(be=>O.includes(be.id))},ee=()=>{if(!_)return!1;const ae=k[_]||[];return ae.length===0?!1:ae.some(be=>O.includes(be.id))&&!Ce()},H=async()=>{if(!S||!_||O.length===0){J.error("Please select apartment, floor, and at least one house");return}ce(!0);try{const ae={bill_id:o.id,apartment_id:S,floor_id:_,house_ids:O};await fe.post("/bill-assignments/assign",ae),J.success("Bill assign successfully"),x(),me()}catch(ae){console.error("Error assigning bill:",ae),J.error(ae.response?.data?.message||"Failed to assign bill")}finally{ce(!1)}},me=()=>{E(""),T(""),j({}),b({}),M([]),I({}),D({}),c()};return N.useEffect(()=>{n&&te()},[n]),n?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:me,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:o?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),B?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(yt,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:f.map(ae=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${S===ae.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>P(ae),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ae.name}),e.jsx("button",{onClick:be=>{be.stopPropagation(),P(ae)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:z[ae.id]?e.jsx(Ii,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(Ri,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),z[ae.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:X[ae.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(yt,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(y[ae.id]||[]).map(be=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${_===be.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>$(ae.id,be),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:be.floor_id}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),$(ae.id,be)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:L[`${ae.id}-${be.id}`]?e.jsx(Ii,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(Ri,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),L[`${ae.id}-${be.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:G[be.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(yt,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:Ce(),ref:ze=>{ze&&(ze.indeterminate=ee())},onChange:de,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(k[be.id]||[]).map(ze=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:O.includes(ze.id),onChange:()=>ne(ze.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:ze.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",ze.status,")"]})]})]},ze.id))})]})})]},be.id))})})]},ae.id))})]}),O.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:O.length})," house",O.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:me,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:H,disabled:!S||!_||O.length===0||le,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:le?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${O.length} House${O.length!==1?"s":""}`})]})]})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]}):null}function L4(){const[n,c]=N.useState(!1),[o,x]=N.useState(null),[f,g]=N.useState([]),[y,j]=N.useState(!1),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState(null),[O,M]=N.useState(null),[z,I]=N.useState(!1),[L,D]=N.useState(null);Vt();const B=async()=>{try{c(!0),x(null);const P=await fe.get("/bills");P.data.success&&Array.isArray(P.data.data)?g(P.data.data):g([])}catch(P){console.error("Error loading bills:",P),x("Failed to load bills. Please try again.")}finally{c(!1)}};N.useEffect(()=>{B()},[]);const Y=f.filter(P=>P.billtype==="Shared"),X=P=>{M(P),E(!0)},U=()=>{E(!1),M(null)},G=()=>{J.success("Bill assigned successfully!")},Q=P=>{T(P),b(!0)},le=()=>{b(!1),T(null)},ce=()=>{B(),b(!1),J.success("Bill Type updated successfully!")},te=P=>{D(P),I(!0)},re=async()=>{try{if(!L)return;await fe.delete(`/bills/${L.id}`),J.success("Bill type deleted successfully"),I(!1),D(null),B()}catch(P){console.error("Delete bill type error:",P),J.error("Failed to delete bill type")}},W=()=>{I(!1),D(null)};return e.jsxs("div",{children:[n?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):o?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[o,e.jsx("button",{onClick:B,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):Y.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Kr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Y.map((P,$)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:$+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:P.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ne=>{ne.stopPropagation(),X(P)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(tr,{size:20})}),e.jsx("span",{children:P.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ne=>{ne.stopPropagation(),Q(P)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:ne=>{ne.stopPropagation(),te(P)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},P.id))})]})}),k&&_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:le,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(S1,{onClose:le,onUpdated:ce,bills:_})]})}),e.jsx(A1,{isOpen:S,onClose:U,selectedBill:O,onAssignSuccess:G}),z&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',L.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:re,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function E1(){const[n,c]=N.useState(!1),[o,x]=N.useState(null),[f,g]=N.useState([]),[y,j]=N.useState(!1),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState(null),[O,M]=N.useState(null),[z,I]=N.useState(!1),[L,D]=N.useState(null),[B,Y]=N.useState("bills"),X=Vt(),U=async()=>{try{c(!0),x(null);const H=await fe.get("/bills");H.data.success&&Array.isArray(H.data.data)?g(H.data.data):g([])}catch(H){console.error("Error loading bills:",H),x("Failed to load bills. Please try again.")}finally{c(!1)}};N.useEffect(()=>{U()},[]);const G=f.filter(H=>H.billtype==="Measurable"),Q=H=>{M(H),E(!0)},le=()=>{E(!1),M(null)},ce=()=>{J.success("Bill assigned successfully!")},te=()=>{j(!0)},re=()=>{j(!1)},W=()=>{U(),j(!1)},P=H=>{T(H),b(!0)},$=()=>{b(!1),T(null)},ne=()=>{U(),b(!1),J.success("Bill Type updated successfully!")},de=H=>{D(H),I(!0)},Ce=async()=>{try{if(!L)return;await fe.delete(`/bills/${L.id}`),J.success("Bill type deleted successfully"),I(!1),D(null),U()}catch(H){console.error("Delete bill type error:",H),J.error("Failed to delete bill type")}},ee=()=>{I(!1),D(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:te,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>Y("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${B==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",G.length,")"]}),e.jsx("button",{onClick:()=>Y("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${B==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),B==="bills"&&e.jsx(e.Fragment,{children:n?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):o?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[o,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):G.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Kr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:G.map((H,me)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>X(`/billranges/${H.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:me+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:H.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ae=>{ae.stopPropagation(),Q(H)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(tr,{size:20})}),e.jsx("span",{children:H.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ae=>{ae.stopPropagation(),P(H)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),de(H)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},H.id))})]})})}),B==="sharedValueBills"&&e.jsx(L4,{}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:re,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(B4,{onClose:re,onCreated:W})]})}),k&&_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:$,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(S1,{onClose:$,onUpdated:ne,bills:_})]})}),e.jsx(A1,{isOpen:S,onClose:le,selectedBill:O,onAssignSuccess:ce}),z&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',L.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ee,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ce,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function z4({house:n,apartment:c,floor:o,onClose:x,onUploadSuccess:f}){const[g,y]=N.useState(!1),[j,k]=N.useState([]),[b,S]=N.useState([]),[E,_]=N.useState(!0),T=N.useRef(null);N.useEffect(()=>{I()},[n.id]);const O=Y=>{const X=Array.from(Y.target.files);S(U=>[...U,...X])},M=Y=>{S(X=>X.filter((U,G)=>G!==Y))},z=async()=>{if(b.length===0){J.error("Please select at least one file");return}try{y(!0);const Y=new FormData;b.forEach(U=>{Y.append("documents",U)}),Y.append("apartmentId",c.id),Y.append("floorId",o.id),Y.append("houseId",n.id),(await fe.post("/house-documents/upload",Y,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(J.success("House documents uploaded successfully!"),S([]),f?.(),I(),T.current&&(T.current.value=""))}catch(Y){console.error("Upload error:",Y);const X=Y.response?.data?.message||"Failed to upload house documents";J.error(X)}finally{y(!1)}},I=async()=>{try{_(!0),console.log("Loading documents for house ID:",n.id);const Y=await fe.get(`/house-documents/${n.id}/documents`);console.log("Documents response:",Y.data),Y.data.success?(k(Y.data.data),console.log("Documents loaded:",Y.data.data)):console.error("API response not successful:",Y.data)}catch(Y){console.error("Error loading house documents:",Y);const X=Y.response?.data?.message||"Failed to load house documents";J.error(X),Y.response&&(console.error("Error response:",Y.response.data),console.error("Error status:",Y.response.status))}finally{_(!1)}},L=async Y=>{if(window.confirm("Are you sure you want to delete this document?"))try{await fe.delete(`/house-documents/documents/${Y}`),J.success("House document deleted successfully"),I()}catch(X){console.error("Delete error:",X);const U=X.response?.data?.message||"Failed to delete house document";J.error(U)}},D=async Y=>{try{const X=await fe.get(`/house-documents/documents/${Y.id}/download`,{responseType:"blob"}),U=window.URL.createObjectURL(new Blob([X.data])),G=document.createElement("a");G.href=U,G.setAttribute("download",Y.original_name||Y.file_name),document.body.appendChild(G),G.click(),G.remove(),window.URL.revokeObjectURL(U)}catch(X){console.error("Download error:",X);const U=X.response?.data?.message||"Failed to download house document";J.error(U)}},B=Y=>{if(Y===0)return"0 Bytes";const X=1024,U=["Bytes","KB","MB","GB"],G=Math.floor(Math.log(Y)/Math.log(X));return parseFloat((Y/Math.pow(X,G)).toFixed(2))+" "+U[G]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",n.house_id]}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),c&&o&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",c.name," |",e.jsx("strong",{children:" Floor:"})," ",o.floor_id," |",e.jsx("strong",{children:" House:"})," ",n.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:T,onChange:O,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>T.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ns,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((Y,X)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ht,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:Y.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:B(Y.size)})]})]}),e.jsx("button",{onClick:()=>M(X),className:"text-red-500 hover:text-red-700",children:e.jsx(Gt,{size:16})})]},X))})]}),b.length>0&&e.jsx("button",{onClick:z,disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ns,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),E?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):j.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Ht,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:j.map(Y=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(Ht,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Y.original_name||Y.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[B(Y.file_size),"  Uploaded on ",new Date(Y.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(Y),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(ec,{size:18})}),e.jsx("button",{onClick:()=>L(Y.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:18})})]})]},Y.id))})]})]})}const F4="modulepreload",P4=function(n){return"/"+n},Eg={},U4=function(c,o,x){let f=Promise.resolve();if(o&&o.length>0){let k=function(b){return Promise.all(b.map(S=>Promise.resolve(S).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),j=y?.nonce||y?.getAttribute("nonce");f=k(o.map(b=>{if(b=P4(b),b in Eg)return;Eg[b]=!0;const S=b.endsWith(".css"),E=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${E}`))return;const _=document.createElement("link");if(_.rel=S?"stylesheet":F4,S||(_.as="script"),_.crossOrigin="",_.href=b,j&&_.setAttribute("nonce",j),document.head.appendChild(_),S)return new Promise((T,O)=>{_.addEventListener("load",T),_.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${b}`)))})}))}function g(y){const j=new Event("vite:preloadError",{cancelable:!0});if(j.payload=y,window.dispatchEvent(j),!j.defaultPrevented)throw y}return f.then(y=>{for(const j of y||[])j.status==="rejected"&&g(j.reason);return c().catch(g)})};var _i={},Ku,_g;function H4(){return _g||(_g=1,Ku=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ku}var Ju={},al={},Tg;function Hl(){if(Tg)return al;Tg=1;let n;const c=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return al.getSymbolSize=function(x){if(!x)throw new Error('"version" cannot be null or undefined');if(x<1||x>40)throw new Error('"version" should be in range from 1 to 40');return x*4+17},al.getSymbolTotalCodewords=function(x){return c[x]},al.getBCHDigit=function(o){let x=0;for(;o!==0;)x++,o>>>=1;return x},al.setToSJISFunction=function(x){if(typeof x!="function")throw new Error('"toSJISFunc" is not a valid function.');n=x},al.isKanjiModeEnabled=function(){return typeof n<"u"},al.toSJIS=function(x){return n(x)},al}var ex={},Mg;function Wx(){return Mg||(Mg=1,function(n){n.L={bit:1},n.M={bit:0},n.Q={bit:3},n.H={bit:2};function c(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"l":case"low":return n.L;case"m":case"medium":return n.M;case"q":case"quartile":return n.Q;case"h":case"high":return n.H;default:throw new Error("Unknown EC Level: "+o)}}n.isValid=function(x){return x&&typeof x.bit<"u"&&x.bit>=0&&x.bit<4},n.from=function(x,f){if(n.isValid(x))return x;try{return c(x)}catch{return f}}}(ex)),ex}var tx,Dg;function V4(){if(Dg)return tx;Dg=1;function n(){this.buffer=[],this.length=0}return n.prototype={get:function(c){const o=Math.floor(c/8);return(this.buffer[o]>>>7-c%8&1)===1},put:function(c,o){for(let x=0;x<o;x++)this.putBit((c>>>o-x-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(c){const o=Math.floor(this.length/8);this.buffer.length<=o&&this.buffer.push(0),c&&(this.buffer[o]|=128>>>this.length%8),this.length++}},tx=n,tx}var ax,Rg;function q4(){if(Rg)return ax;Rg=1;function n(c){if(!c||c<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=c,this.data=new Uint8Array(c*c),this.reservedBit=new Uint8Array(c*c)}return n.prototype.set=function(c,o,x,f){const g=c*this.size+o;this.data[g]=x,f&&(this.reservedBit[g]=!0)},n.prototype.get=function(c,o){return this.data[c*this.size+o]},n.prototype.xor=function(c,o,x){this.data[c*this.size+o]^=x},n.prototype.isReserved=function(c,o){return this.reservedBit[c*this.size+o]},ax=n,ax}var rx={},Ig;function G4(){return Ig||(Ig=1,function(n){const c=Hl().getSymbolSize;n.getRowColCoords=function(x){if(x===1)return[];const f=Math.floor(x/7)+2,g=c(x),y=g===145?26:Math.ceil((g-13)/(2*f-2))*2,j=[g-7];for(let k=1;k<f-1;k++)j[k]=j[k-1]-y;return j.push(6),j.reverse()},n.getPositions=function(x){const f=[],g=n.getRowColCoords(x),y=g.length;for(let j=0;j<y;j++)for(let k=0;k<y;k++)j===0&&k===0||j===0&&k===y-1||j===y-1&&k===0||f.push([g[j],g[k]]);return f}}(rx)),rx}var sx={},Og;function Y4(){if(Og)return sx;Og=1;const n=Hl().getSymbolSize,c=7;return sx.getPositions=function(x){const f=n(x);return[[0,0],[f-c,0],[0,f-c]]},sx}var nx={},Bg;function X4(){return Bg||(Bg=1,function(n){n.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const c={N1:3,N2:3,N3:40,N4:10};n.isValid=function(f){return f!=null&&f!==""&&!isNaN(f)&&f>=0&&f<=7},n.from=function(f){return n.isValid(f)?parseInt(f,10):void 0},n.getPenaltyN1=function(f){const g=f.size;let y=0,j=0,k=0,b=null,S=null;for(let E=0;E<g;E++){j=k=0,b=S=null;for(let _=0;_<g;_++){let T=f.get(E,_);T===b?j++:(j>=5&&(y+=c.N1+(j-5)),b=T,j=1),T=f.get(_,E),T===S?k++:(k>=5&&(y+=c.N1+(k-5)),S=T,k=1)}j>=5&&(y+=c.N1+(j-5)),k>=5&&(y+=c.N1+(k-5))}return y},n.getPenaltyN2=function(f){const g=f.size;let y=0;for(let j=0;j<g-1;j++)for(let k=0;k<g-1;k++){const b=f.get(j,k)+f.get(j,k+1)+f.get(j+1,k)+f.get(j+1,k+1);(b===4||b===0)&&y++}return y*c.N2},n.getPenaltyN3=function(f){const g=f.size;let y=0,j=0,k=0;for(let b=0;b<g;b++){j=k=0;for(let S=0;S<g;S++)j=j<<1&2047|f.get(b,S),S>=10&&(j===1488||j===93)&&y++,k=k<<1&2047|f.get(S,b),S>=10&&(k===1488||k===93)&&y++}return y*c.N3},n.getPenaltyN4=function(f){let g=0;const y=f.data.length;for(let k=0;k<y;k++)g+=f.data[k];return Math.abs(Math.ceil(g*100/y/5)-10)*c.N4};function o(x,f,g){switch(x){case n.Patterns.PATTERN000:return(f+g)%2===0;case n.Patterns.PATTERN001:return f%2===0;case n.Patterns.PATTERN010:return g%3===0;case n.Patterns.PATTERN011:return(f+g)%3===0;case n.Patterns.PATTERN100:return(Math.floor(f/2)+Math.floor(g/3))%2===0;case n.Patterns.PATTERN101:return f*g%2+f*g%3===0;case n.Patterns.PATTERN110:return(f*g%2+f*g%3)%2===0;case n.Patterns.PATTERN111:return(f*g%3+(f+g)%2)%2===0;default:throw new Error("bad maskPattern:"+x)}}n.applyMask=function(f,g){const y=g.size;for(let j=0;j<y;j++)for(let k=0;k<y;k++)g.isReserved(k,j)||g.xor(k,j,o(f,k,j))},n.getBestMask=function(f,g){const y=Object.keys(n.Patterns).length;let j=0,k=1/0;for(let b=0;b<y;b++){g(b),n.applyMask(b,f);const S=n.getPenaltyN1(f)+n.getPenaltyN2(f)+n.getPenaltyN3(f)+n.getPenaltyN4(f);n.applyMask(b,f),S<k&&(k=S,j=b)}return j}}(nx)),nx}var fd={},Lg;function _1(){if(Lg)return fd;Lg=1;const n=Wx(),c=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],o=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return fd.getBlocksCount=function(f,g){switch(g){case n.L:return c[(f-1)*4+0];case n.M:return c[(f-1)*4+1];case n.Q:return c[(f-1)*4+2];case n.H:return c[(f-1)*4+3];default:return}},fd.getTotalCodewordsCount=function(f,g){switch(g){case n.L:return o[(f-1)*4+0];case n.M:return o[(f-1)*4+1];case n.Q:return o[(f-1)*4+2];case n.H:return o[(f-1)*4+3];default:return}},fd}var lx={},Fo={},zg;function $4(){if(zg)return Fo;zg=1;const n=new Uint8Array(512),c=new Uint8Array(256);return function(){let x=1;for(let f=0;f<255;f++)n[f]=x,c[x]=f,x<<=1,x&256&&(x^=285);for(let f=255;f<512;f++)n[f]=n[f-255]}(),Fo.log=function(x){if(x<1)throw new Error("log("+x+")");return c[x]},Fo.exp=function(x){return n[x]},Fo.mul=function(x,f){return x===0||f===0?0:n[c[x]+c[f]]},Fo}var Fg;function Q4(){return Fg||(Fg=1,function(n){const c=$4();n.mul=function(x,f){const g=new Uint8Array(x.length+f.length-1);for(let y=0;y<x.length;y++)for(let j=0;j<f.length;j++)g[y+j]^=c.mul(x[y],f[j]);return g},n.mod=function(x,f){let g=new Uint8Array(x);for(;g.length-f.length>=0;){const y=g[0];for(let k=0;k<f.length;k++)g[k]^=c.mul(f[k],y);let j=0;for(;j<g.length&&g[j]===0;)j++;g=g.slice(j)}return g},n.generateECPolynomial=function(x){let f=new Uint8Array([1]);for(let g=0;g<x;g++)f=n.mul(f,new Uint8Array([1,c.exp(g)]));return f}}(lx)),lx}var ix,Pg;function Z4(){if(Pg)return ix;Pg=1;const n=Q4();function c(o){this.genPoly=void 0,this.degree=o,this.degree&&this.initialize(this.degree)}return c.prototype.initialize=function(x){this.degree=x,this.genPoly=n.generateECPolynomial(this.degree)},c.prototype.encode=function(x){if(!this.genPoly)throw new Error("Encoder not initialized");const f=new Uint8Array(x.length+this.degree);f.set(x);const g=n.mod(f,this.genPoly),y=this.degree-g.length;if(y>0){const j=new Uint8Array(this.degree);return j.set(g,y),j}return g},ix=c,ix}var ox={},cx={},dx={},Ug;function T1(){return Ug||(Ug=1,dx.isValid=function(c){return!isNaN(c)&&c>=1&&c<=40}),dx}var qs={},Hg;function M1(){if(Hg)return qs;Hg=1;const n="[0-9]+",c="[A-Z $%*+\\-./:]+";let o="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";o=o.replace(/u/g,"\\u");const x="(?:(?![A-Z0-9 $%*+\\-./:]|"+o+`)(?:.|[\r
]))+`;qs.KANJI=new RegExp(o,"g"),qs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),qs.BYTE=new RegExp(x,"g"),qs.NUMERIC=new RegExp(n,"g"),qs.ALPHANUMERIC=new RegExp(c,"g");const f=new RegExp("^"+o+"$"),g=new RegExp("^"+n+"$"),y=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return qs.testKanji=function(k){return f.test(k)},qs.testNumeric=function(k){return g.test(k)},qs.testAlphanumeric=function(k){return y.test(k)},qs}var Vg;function Vl(){return Vg||(Vg=1,function(n){const c=T1(),o=M1();n.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},n.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},n.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},n.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},n.MIXED={bit:-1},n.getCharCountIndicator=function(g,y){if(!g.ccBits)throw new Error("Invalid mode: "+g);if(!c.isValid(y))throw new Error("Invalid version: "+y);return y>=1&&y<10?g.ccBits[0]:y<27?g.ccBits[1]:g.ccBits[2]},n.getBestModeForData=function(g){return o.testNumeric(g)?n.NUMERIC:o.testAlphanumeric(g)?n.ALPHANUMERIC:o.testKanji(g)?n.KANJI:n.BYTE},n.toString=function(g){if(g&&g.id)return g.id;throw new Error("Invalid mode")},n.isValid=function(g){return g&&g.bit&&g.ccBits};function x(f){if(typeof f!="string")throw new Error("Param is not a string");switch(f.toLowerCase()){case"numeric":return n.NUMERIC;case"alphanumeric":return n.ALPHANUMERIC;case"kanji":return n.KANJI;case"byte":return n.BYTE;default:throw new Error("Unknown mode: "+f)}}n.from=function(g,y){if(n.isValid(g))return g;try{return x(g)}catch{return y}}}(cx)),cx}var qg;function W4(){return qg||(qg=1,function(n){const c=Hl(),o=_1(),x=Wx(),f=Vl(),g=T1(),y=7973,j=c.getBCHDigit(y);function k(_,T,O){for(let M=1;M<=40;M++)if(T<=n.getCapacity(M,O,_))return M}function b(_,T){return f.getCharCountIndicator(_,T)+4}function S(_,T){let O=0;return _.forEach(function(M){const z=b(M.mode,T);O+=z+M.getBitsLength()}),O}function E(_,T){for(let O=1;O<=40;O++)if(S(_,O)<=n.getCapacity(O,T,f.MIXED))return O}n.from=function(T,O){return g.isValid(T)?parseInt(T,10):O},n.getCapacity=function(T,O,M){if(!g.isValid(T))throw new Error("Invalid QR Code version");typeof M>"u"&&(M=f.BYTE);const z=c.getSymbolTotalCodewords(T),I=o.getTotalCodewordsCount(T,O),L=(z-I)*8;if(M===f.MIXED)return L;const D=L-b(M,T);switch(M){case f.NUMERIC:return Math.floor(D/10*3);case f.ALPHANUMERIC:return Math.floor(D/11*2);case f.KANJI:return Math.floor(D/13);case f.BYTE:default:return Math.floor(D/8)}},n.getBestVersionForData=function(T,O){let M;const z=x.from(O,x.M);if(Array.isArray(T)){if(T.length>1)return E(T,z);if(T.length===0)return 1;M=T[0]}else M=T;return k(M.mode,M.getLength(),z)},n.getEncodedBits=function(T){if(!g.isValid(T)||T<7)throw new Error("Invalid QR Code version");let O=T<<12;for(;c.getBCHDigit(O)-j>=0;)O^=y<<c.getBCHDigit(O)-j;return T<<12|O}}(ox)),ox}var ux={},Gg;function K4(){if(Gg)return ux;Gg=1;const n=Hl(),c=1335,o=21522,x=n.getBCHDigit(c);return ux.getEncodedBits=function(g,y){const j=g.bit<<3|y;let k=j<<10;for(;n.getBCHDigit(k)-x>=0;)k^=c<<n.getBCHDigit(k)-x;return(j<<10|k)^o},ux}var xx={},hx,Yg;function J4(){if(Yg)return hx;Yg=1;const n=Vl();function c(o){this.mode=n.NUMERIC,this.data=o.toString()}return c.getBitsLength=function(x){return 10*Math.floor(x/3)+(x%3?x%3*3+1:0)},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(x){let f,g,y;for(f=0;f+3<=this.data.length;f+=3)g=this.data.substr(f,3),y=parseInt(g,10),x.put(y,10);const j=this.data.length-f;j>0&&(g=this.data.substr(f),y=parseInt(g,10),x.put(y,j*3+1))},hx=c,hx}var mx,Xg;function e3(){if(Xg)return mx;Xg=1;const n=Vl(),c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function o(x){this.mode=n.ALPHANUMERIC,this.data=x}return o.getBitsLength=function(f){return 11*Math.floor(f/2)+6*(f%2)},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(f){let g;for(g=0;g+2<=this.data.length;g+=2){let y=c.indexOf(this.data[g])*45;y+=c.indexOf(this.data[g+1]),f.put(y,11)}this.data.length%2&&f.put(c.indexOf(this.data[g]),6)},mx=o,mx}var fx,$g;function t3(){if($g)return fx;$g=1;const n=Vl();function c(o){this.mode=n.BYTE,typeof o=="string"?this.data=new TextEncoder().encode(o):this.data=new Uint8Array(o)}return c.getBitsLength=function(x){return x*8},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(o){for(let x=0,f=this.data.length;x<f;x++)o.put(this.data[x],8)},fx=c,fx}var gx,Qg;function a3(){if(Qg)return gx;Qg=1;const n=Vl(),c=Hl();function o(x){this.mode=n.KANJI,this.data=x}return o.getBitsLength=function(f){return f*13},o.prototype.getLength=function(){return this.data.length},o.prototype.getBitsLength=function(){return o.getBitsLength(this.data.length)},o.prototype.write=function(x){let f;for(f=0;f<this.data.length;f++){let g=c.toSJIS(this.data[f]);if(g>=33088&&g<=40956)g-=33088;else if(g>=57408&&g<=60351)g-=49472;else throw new Error("Invalid SJIS character: "+this.data[f]+`
Make sure your charset is UTF-8`);g=(g>>>8&255)*192+(g&255),x.put(g,13)}},gx=o,gx}var px={exports:{}},Zg;function r3(){return Zg||(Zg=1,function(n){var c={single_source_shortest_paths:function(o,x,f){var g={},y={};y[x]=0;var j=c.PriorityQueue.make();j.push(x,0);for(var k,b,S,E,_,T,O,M,z;!j.empty();){k=j.pop(),b=k.value,E=k.cost,_=o[b]||{};for(S in _)_.hasOwnProperty(S)&&(T=_[S],O=E+T,M=y[S],z=typeof y[S]>"u",(z||M>O)&&(y[S]=O,j.push(S,O),g[S]=b))}if(typeof f<"u"&&typeof y[f]>"u"){var I=["Could not find a path from ",x," to ",f,"."].join("");throw new Error(I)}return g},extract_shortest_path_from_predecessor_list:function(o,x){for(var f=[],g=x;g;)f.push(g),o[g],g=o[g];return f.reverse(),f},find_path:function(o,x,f){var g=c.single_source_shortest_paths(o,x,f);return c.extract_shortest_path_from_predecessor_list(g,f)},PriorityQueue:{make:function(o){var x=c.PriorityQueue,f={},g;o=o||{};for(g in x)x.hasOwnProperty(g)&&(f[g]=x[g]);return f.queue=[],f.sorter=o.sorter||x.default_sorter,f},default_sorter:function(o,x){return o.cost-x.cost},push:function(o,x){var f={value:o,cost:x};this.queue.push(f),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};n.exports=c}(px)),px.exports}var Wg;function s3(){return Wg||(Wg=1,function(n){const c=Vl(),o=J4(),x=e3(),f=t3(),g=a3(),y=M1(),j=Hl(),k=r3();function b(I){return unescape(encodeURIComponent(I)).length}function S(I,L,D){const B=[];let Y;for(;(Y=I.exec(D))!==null;)B.push({data:Y[0],index:Y.index,mode:L,length:Y[0].length});return B}function E(I){const L=S(y.NUMERIC,c.NUMERIC,I),D=S(y.ALPHANUMERIC,c.ALPHANUMERIC,I);let B,Y;return j.isKanjiModeEnabled()?(B=S(y.BYTE,c.BYTE,I),Y=S(y.KANJI,c.KANJI,I)):(B=S(y.BYTE_KANJI,c.BYTE,I),Y=[]),L.concat(D,B,Y).sort(function(U,G){return U.index-G.index}).map(function(U){return{data:U.data,mode:U.mode,length:U.length}})}function _(I,L){switch(L){case c.NUMERIC:return o.getBitsLength(I);case c.ALPHANUMERIC:return x.getBitsLength(I);case c.KANJI:return g.getBitsLength(I);case c.BYTE:return f.getBitsLength(I)}}function T(I){return I.reduce(function(L,D){const B=L.length-1>=0?L[L.length-1]:null;return B&&B.mode===D.mode?(L[L.length-1].data+=D.data,L):(L.push(D),L)},[])}function O(I){const L=[];for(let D=0;D<I.length;D++){const B=I[D];switch(B.mode){case c.NUMERIC:L.push([B,{data:B.data,mode:c.ALPHANUMERIC,length:B.length},{data:B.data,mode:c.BYTE,length:B.length}]);break;case c.ALPHANUMERIC:L.push([B,{data:B.data,mode:c.BYTE,length:B.length}]);break;case c.KANJI:L.push([B,{data:B.data,mode:c.BYTE,length:b(B.data)}]);break;case c.BYTE:L.push([{data:B.data,mode:c.BYTE,length:b(B.data)}])}}return L}function M(I,L){const D={},B={start:{}};let Y=["start"];for(let X=0;X<I.length;X++){const U=I[X],G=[];for(let Q=0;Q<U.length;Q++){const le=U[Q],ce=""+X+Q;G.push(ce),D[ce]={node:le,lastCount:0},B[ce]={};for(let te=0;te<Y.length;te++){const re=Y[te];D[re]&&D[re].node.mode===le.mode?(B[re][ce]=_(D[re].lastCount+le.length,le.mode)-_(D[re].lastCount,le.mode),D[re].lastCount+=le.length):(D[re]&&(D[re].lastCount=le.length),B[re][ce]=_(le.length,le.mode)+4+c.getCharCountIndicator(le.mode,L))}}Y=G}for(let X=0;X<Y.length;X++)B[Y[X]].end=0;return{map:B,table:D}}function z(I,L){let D;const B=c.getBestModeForData(I);if(D=c.from(L,B),D!==c.BYTE&&D.bit<B.bit)throw new Error('"'+I+'" cannot be encoded with mode '+c.toString(D)+`.
 Suggested mode is: `+c.toString(B));switch(D===c.KANJI&&!j.isKanjiModeEnabled()&&(D=c.BYTE),D){case c.NUMERIC:return new o(I);case c.ALPHANUMERIC:return new x(I);case c.KANJI:return new g(I);case c.BYTE:return new f(I)}}n.fromArray=function(L){return L.reduce(function(D,B){return typeof B=="string"?D.push(z(B,null)):B.data&&D.push(z(B.data,B.mode)),D},[])},n.fromString=function(L,D){const B=E(L,j.isKanjiModeEnabled()),Y=O(B),X=M(Y,D),U=k.find_path(X.map,"start","end"),G=[];for(let Q=1;Q<U.length-1;Q++)G.push(X.table[U[Q]].node);return n.fromArray(T(G))},n.rawSplit=function(L){return n.fromArray(E(L,j.isKanjiModeEnabled()))}}(xx)),xx}var Kg;function n3(){if(Kg)return Ju;Kg=1;const n=Hl(),c=Wx(),o=V4(),x=q4(),f=G4(),g=Y4(),y=X4(),j=_1(),k=Z4(),b=W4(),S=K4(),E=Vl(),_=s3();function T(X,U){const G=X.size,Q=g.getPositions(U);for(let le=0;le<Q.length;le++){const ce=Q[le][0],te=Q[le][1];for(let re=-1;re<=7;re++)if(!(ce+re<=-1||G<=ce+re))for(let W=-1;W<=7;W++)te+W<=-1||G<=te+W||(re>=0&&re<=6&&(W===0||W===6)||W>=0&&W<=6&&(re===0||re===6)||re>=2&&re<=4&&W>=2&&W<=4?X.set(ce+re,te+W,!0,!0):X.set(ce+re,te+W,!1,!0))}}function O(X){const U=X.size;for(let G=8;G<U-8;G++){const Q=G%2===0;X.set(G,6,Q,!0),X.set(6,G,Q,!0)}}function M(X,U){const G=f.getPositions(U);for(let Q=0;Q<G.length;Q++){const le=G[Q][0],ce=G[Q][1];for(let te=-2;te<=2;te++)for(let re=-2;re<=2;re++)te===-2||te===2||re===-2||re===2||te===0&&re===0?X.set(le+te,ce+re,!0,!0):X.set(le+te,ce+re,!1,!0)}}function z(X,U){const G=X.size,Q=b.getEncodedBits(U);let le,ce,te;for(let re=0;re<18;re++)le=Math.floor(re/3),ce=re%3+G-8-3,te=(Q>>re&1)===1,X.set(le,ce,te,!0),X.set(ce,le,te,!0)}function I(X,U,G){const Q=X.size,le=S.getEncodedBits(U,G);let ce,te;for(ce=0;ce<15;ce++)te=(le>>ce&1)===1,ce<6?X.set(ce,8,te,!0):ce<8?X.set(ce+1,8,te,!0):X.set(Q-15+ce,8,te,!0),ce<8?X.set(8,Q-ce-1,te,!0):ce<9?X.set(8,15-ce-1+1,te,!0):X.set(8,15-ce-1,te,!0);X.set(Q-8,8,1,!0)}function L(X,U){const G=X.size;let Q=-1,le=G-1,ce=7,te=0;for(let re=G-1;re>0;re-=2)for(re===6&&re--;;){for(let W=0;W<2;W++)if(!X.isReserved(le,re-W)){let P=!1;te<U.length&&(P=(U[te]>>>ce&1)===1),X.set(le,re-W,P),ce--,ce===-1&&(te++,ce=7)}if(le+=Q,le<0||G<=le){le-=Q,Q=-Q;break}}}function D(X,U,G){const Q=new o;G.forEach(function(W){Q.put(W.mode.bit,4),Q.put(W.getLength(),E.getCharCountIndicator(W.mode,X)),W.write(Q)});const le=n.getSymbolTotalCodewords(X),ce=j.getTotalCodewordsCount(X,U),te=(le-ce)*8;for(Q.getLengthInBits()+4<=te&&Q.put(0,4);Q.getLengthInBits()%8!==0;)Q.putBit(0);const re=(te-Q.getLengthInBits())/8;for(let W=0;W<re;W++)Q.put(W%2?17:236,8);return B(Q,X,U)}function B(X,U,G){const Q=n.getSymbolTotalCodewords(U),le=j.getTotalCodewordsCount(U,G),ce=Q-le,te=j.getBlocksCount(U,G),re=Q%te,W=te-re,P=Math.floor(Q/te),$=Math.floor(ce/te),ne=$+1,de=P-$,Ce=new k(de);let ee=0;const H=new Array(te),me=new Array(te);let ae=0;const be=new Uint8Array(X.buffer);for(let Je=0;Je<te;Je++){const Ke=Je<W?$:ne;H[Je]=be.slice(ee,ee+Ke),me[Je]=Ce.encode(H[Je]),ee+=Ke,ae=Math.max(ae,Ke)}const ze=new Uint8Array(Q);let xe=0,Ze,je;for(Ze=0;Ze<ae;Ze++)for(je=0;je<te;je++)Ze<H[je].length&&(ze[xe++]=H[je][Ze]);for(Ze=0;Ze<de;Ze++)for(je=0;je<te;je++)ze[xe++]=me[je][Ze];return ze}function Y(X,U,G,Q){let le;if(Array.isArray(X))le=_.fromArray(X);else if(typeof X=="string"){let P=U;if(!P){const $=_.rawSplit(X);P=b.getBestVersionForData($,G)}le=_.fromString(X,P||40)}else throw new Error("Invalid data");const ce=b.getBestVersionForData(le,G);if(!ce)throw new Error("The amount of data is too big to be stored in a QR Code");if(!U)U=ce;else if(U<ce)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ce+`.
`);const te=D(U,G,le),re=n.getSymbolSize(U),W=new x(re);return T(W,U),O(W),M(W,U),I(W,G,0),U>=7&&z(W,U),L(W,te),isNaN(Q)&&(Q=y.getBestMask(W,I.bind(null,W,G))),y.applyMask(Q,W),I(W,G,Q),{modules:W,version:U,errorCorrectionLevel:G,maskPattern:Q,segments:le}}return Ju.create=function(U,G){if(typeof U>"u"||U==="")throw new Error("No input text");let Q=c.M,le,ce;return typeof G<"u"&&(Q=c.from(G.errorCorrectionLevel,c.M),le=b.from(G.version),ce=y.from(G.maskPattern),G.toSJISFunc&&n.setToSJISFunction(G.toSJISFunc)),Y(U,le,Q,ce)},Ju}var yx={},bx={},Jg;function D1(){return Jg||(Jg=1,function(n){function c(o){if(typeof o=="number"&&(o=o.toString()),typeof o!="string")throw new Error("Color should be defined as hex string");let x=o.slice().replace("#","").split("");if(x.length<3||x.length===5||x.length>8)throw new Error("Invalid hex color: "+o);(x.length===3||x.length===4)&&(x=Array.prototype.concat.apply([],x.map(function(g){return[g,g]}))),x.length===6&&x.push("F","F");const f=parseInt(x.join(""),16);return{r:f>>24&255,g:f>>16&255,b:f>>8&255,a:f&255,hex:"#"+x.slice(0,6).join("")}}n.getOptions=function(x){x||(x={}),x.color||(x.color={});const f=typeof x.margin>"u"||x.margin===null||x.margin<0?4:x.margin,g=x.width&&x.width>=21?x.width:void 0,y=x.scale||4;return{width:g,scale:g?4:y,margin:f,color:{dark:c(x.color.dark||"#000000ff"),light:c(x.color.light||"#ffffffff")},type:x.type,rendererOpts:x.rendererOpts||{}}},n.getScale=function(x,f){return f.width&&f.width>=x+f.margin*2?f.width/(x+f.margin*2):f.scale},n.getImageWidth=function(x,f){const g=n.getScale(x,f);return Math.floor((x+f.margin*2)*g)},n.qrToImageData=function(x,f,g){const y=f.modules.size,j=f.modules.data,k=n.getScale(y,g),b=Math.floor((y+g.margin*2)*k),S=g.margin*k,E=[g.color.light,g.color.dark];for(let _=0;_<b;_++)for(let T=0;T<b;T++){let O=(_*b+T)*4,M=g.color.light;if(_>=S&&T>=S&&_<b-S&&T<b-S){const z=Math.floor((_-S)/k),I=Math.floor((T-S)/k);M=E[j[z*y+I]?1:0]}x[O++]=M.r,x[O++]=M.g,x[O++]=M.b,x[O]=M.a}}}(bx)),bx}var ep;function l3(){return ep||(ep=1,function(n){const c=D1();function o(f,g,y){f.clearRect(0,0,g.width,g.height),g.style||(g.style={}),g.height=y,g.width=y,g.style.height=y+"px",g.style.width=y+"px"}function x(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}n.render=function(g,y,j){let k=j,b=y;typeof k>"u"&&(!y||!y.getContext)&&(k=y,y=void 0),y||(b=x()),k=c.getOptions(k);const S=c.getImageWidth(g.modules.size,k),E=b.getContext("2d"),_=E.createImageData(S,S);return c.qrToImageData(_.data,g,k),o(E,b,S),E.putImageData(_,0,0),b},n.renderToDataURL=function(g,y,j){let k=j;typeof k>"u"&&(!y||!y.getContext)&&(k=y,y=void 0),k||(k={});const b=n.render(g,y,k),S=k.type||"image/png",E=k.rendererOpts||{};return b.toDataURL(S,E.quality)}}(yx)),yx}var wx={},tp;function i3(){if(tp)return wx;tp=1;const n=D1();function c(f,g){const y=f.a/255,j=g+'="'+f.hex+'"';return y<1?j+" "+g+'-opacity="'+y.toFixed(2).slice(1)+'"':j}function o(f,g,y){let j=f+g;return typeof y<"u"&&(j+=" "+y),j}function x(f,g,y){let j="",k=0,b=!1,S=0;for(let E=0;E<f.length;E++){const _=Math.floor(E%g),T=Math.floor(E/g);!_&&!b&&(b=!0),f[E]?(S++,E>0&&_>0&&f[E-1]||(j+=b?o("M",_+y,.5+T+y):o("m",k,0),k=0,b=!1),_+1<g&&f[E+1]||(j+=o("h",S),S=0)):k++}return j}return wx.render=function(g,y,j){const k=n.getOptions(y),b=g.modules.size,S=g.modules.data,E=b+k.margin*2,_=k.color.light.a?"<path "+c(k.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",T="<path "+c(k.color.dark,"stroke")+' d="'+x(S,b,k.margin)+'"/>',O='viewBox="0 0 '+E+" "+E+'"',z='<svg xmlns="http://www.w3.org/2000/svg" '+(k.width?'width="'+k.width+'" height="'+k.width+'" ':"")+O+' shape-rendering="crispEdges">'+_+T+`</svg>
`;return typeof j=="function"&&j(null,z),z},wx}var ap;function o3(){if(ap)return _i;ap=1;const n=H4(),c=n3(),o=l3(),x=i3();function f(g,y,j,k,b){const S=[].slice.call(arguments,1),E=S.length,_=typeof S[E-1]=="function";if(!_&&!n())throw new Error("Callback required as last argument");if(_){if(E<2)throw new Error("Too few arguments provided");E===2?(b=j,j=y,y=k=void 0):E===3&&(y.getContext&&typeof b>"u"?(b=k,k=void 0):(b=k,k=j,j=y,y=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(j=y,y=k=void 0):E===2&&!y.getContext&&(k=j,j=y,y=void 0),new Promise(function(T,O){try{const M=c.create(j,k);T(g(M,y,k))}catch(M){O(M)}})}try{const T=c.create(j,k);b(null,g(T,y,k))}catch(T){b(T)}}return _i.create=c.create,_i.toCanvas=f.bind(null,o.render),_i.toDataURL=f.bind(null,o.renderToDataURL),_i.toString=f.bind(null,function(g,y,j){return x.render(g,j)}),_i}var c3=o3();const d3=Dd(c3);function u3({houses:n,apartment:c,floor:o,onClose:x}){const[f,g]=N.useState(!1),[y,j]=N.useState(!1),[k,b]=N.useState({}),S=M=>`${M.id}`,E=M=>M.split("|")[0];N.useEffect(()=>{(async()=>{if(n.length){g(!0);try{const z={};for(const I of n){const L=S(I);console.log(`QR Data for House ${I.house_id}:`,L),console.log("House ID only:",E(L));try{z[I.id]=await d3.toDataURL(L,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(D){console.error("QR Generation Error:",D),z[I.id]="",J.error(`Failed to generate QR for house ${I.house_id}`)}}b(z)}catch(z){console.error("Error generating QR codes",z),J.error("Failed to generate QR codes")}g(!1)}})()},[n,c,o]);const _=async()=>{j(!0);try{const{jsPDF:M}=await U4(async()=>{const{jsPDF:ce}=await import("./jspdf.es.min-BMxvOubg.js").then(te=>te.j);return{jsPDF:ce}},[]),z=new M("p","mm","a4"),I=85,L=70,D=12,B=40,Y=z.internal.pageSize.getWidth(),X=z.internal.pageSize.getHeight();let U=D,G=2,Q=0;for(let ce=0;ce<n.length;ce++){const te=n[ce],re=ce%G,W=D+re*(I+D);U+L>X-D&&(z.addPage(),U=D,Q=0),z.setDrawColor(200,200,200),z.rect(W,U,I,L),z.setFontSize(8),z.setFont(void 0,"bold"),z.text(c.name,W+I/2,U+5,{align:"center"}),z.setFontSize(7),z.setTextColor(100,100,100),z.text(`Floor: ${o.floor_id}`,W+I/2,U+9,{align:"center"}),z.setFontSize(14),z.setFont(void 0,"bold"),z.setTextColor(0,0,0),z.text(`${te.house_id}`,W+I/2,U+15,{align:"center"}),z.setFontSize(7),z.setFont(void 0,"bold"),z.setTextColor(0,0,0),z.text(`${te.id}`,W+I/2,U+18,{align:"center"}),k[te.id]&&z.addImage(k[te.id],"PNG",W+(I-B)/2,U+20,B,B),Q++,Q===G&&(U+=L+D,Q=0),ce===n.length-1&&Q>0&&(U+=L+D)}const le=`QR_Codes_${c.name.replace(/\s+/g,"_")}_Floor_${o.floor_id}.pdf`;z.save(le),J.success("PDF Generated Successfully!")}catch(M){console.error("PDF Generation Error:",M),J.error("Failed to generate PDF")}j(!1)},T=({house:M})=>{const z=k[M.id];return S(M),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",M.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[c.name,"  Floor ",o.floor_id]}),z?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:z,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${M.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:M.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(yt,{size:24,className:"animate-spin text-gray-400"})})]})})},O=M=>{const z=k[M];if(z){const I=n.find(B=>B.id===M);if(!I)return;const L=S(I);E(L),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${I.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${z}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(u1,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.name,"  Floor ",o.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(Ll,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:x,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",n.length," house",n.length!==1?"s":""]}),f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(M=>e.jsxs("div",{className:"relative",children:[e.jsx(T,{house:M}),e.jsx("button",{onClick:()=>O(M.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},M.id))})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(k).length," QR code",Object.keys(k).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:x,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:f||y||!Object.keys(k).length,onClick:_,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:y?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Vo,{size:16}),"Download PDF"]})})]})]})})]})})}function x3(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),[f,g]=N.useState(window.innerWidth<768),{apartment_id:y,floor_id:j}=os(),[k,b]=N.useState(null),[S,E]=N.useState(null),[_,T]=N.useState([]),[O,M]=N.useState([]),[z,I]=N.useState(null),L=Vt(),[D,B]=N.useState(!1),[Y,X]=N.useState(!1),[U,G]=N.useState(!1),[Q,le]=N.useState(!1),[ce,te]=N.useState(!1),[re,W]=N.useState(null),[P,$]=N.useState(!1),[ne,de]=N.useState(null),[Ce,ee]=N.useState("houses"),[H,me]=N.useState(null),[ae,be]=N.useState(!1),[ze,xe]=N.useState(null),[Ze,je]=N.useState([]),[Je,Ke]=N.useState(!1),[at,Ue]=N.useState(!1);N.useEffect(()=>{const Ve=()=>{g(window.innerWidth<768)};return window.addEventListener("resize",Ve),()=>window.removeEventListener("resize",Ve)},[]),N.useEffect(()=>{y&&(async()=>{try{const st=await fe.get(`/apartments/${y}`);st.data.success&&b(st.data.data)}catch(st){console.error("Error fetching apartment:",st)}})()},[y]),N.useEffect(()=>{j&&(async()=>{try{const st=await fe.get(`/floors/${j}`);st.data.success&&E(st.data.data)}catch(st){console.error("Error fetching floors:",st)}})()},[j]);const ve=async()=>{try{X(!0),I(null);const Ve=await fe.get(`/housetype?apartment_id=${y}`);Ve.data.success&&Array.isArray(Ve.data.data)?M(Ve.data.data):M([])}catch(Ve){console.error("Error loading houses:",Ve),I("Failed to load houses. Please try again.")}finally{X(!1)}};N.useEffect(()=>{ve()},[y]);const he=()=>{L(`/floors/${k.id}`)},He=async Ve=>{try{B(!0),I(null);const st=await fe.get(`/houses?apartment_id=${y}&floor_id=${Ve}`);st.data.success&&Array.isArray(st.data.data)?(T(st.data.data),je([]),Ke(!1)):T([])}catch(st){console.error("Error loading houses:",st),I("Failed to load houses. Please try again.")}finally{B(!1)}};N.useEffect(()=>{j&&y&&He(j)},[j,y]);const et=Ve=>{L(`/viewhouse/${y}/${j}/${Ve.id}`)},Ne=()=>{G(!0)},Te=()=>{G(!1)},oe=()=>{He(j),G(!1),J.success("House created successfully!")},pe=Ve=>{me(Ve),le(!0)},Me=()=>{le(!1),me(null)},jt=()=>{He(j),J.success("House updated successfully!")},Ct=Ve=>{W(Ve),te(!0)},ft=()=>{te(!1),W(null)},Ft=async Ve=>{try{const st=await fe.patch(`/houses/${Ve.id}/toggle`);J.success(st.data.message),He(j)}catch(st){console.error("Error toggling house:",st),J.error("Failed to toggle house status")}},Le=Ve=>{de(Ve),$(!0)},lt=async()=>{try{if(!ne)return;await fe.delete(`/houses/${ne.id}`),J.success("House deleted successfully"),$(!1),de(null),He(j)}catch(Ve){console.error("Delete house error:",Ve),J.error("Failed to delete house")}},Bt=()=>{$(!1),de(null)},gt=Ve=>{xe(Ve),be(!0)},Wt=()=>{be(!1),xe(null)},Tt=()=>{J.success("House documents uploaded successfully!")},xr=Ve=>{je(st=>st.includes(Ve)?st.filter(jn=>jn!==Ve):[...st,Ve])},Lt=()=>{if(Je)je([]);else{const Ve=_.map(st=>st.id);je(Ve)}Ke(!Je)};N.useEffect(()=>{_.length>0&&Ze.length===_.length?Ke(!0):Ke(!1)},[Ze,_]),Ze.length;const Qe=()=>{if(Ze.length===0){J.error("Please select at least one house to generate QR codes");return}_.filter(Ve=>Ze.includes(Ve.id)),Ue(!0)},Yt=Ve=>{try{return new Date(Ve).toLocaleDateString()}catch{return"N/A"}},ot=()=>e.jsx("button",{onClick:()=>x(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Ul,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ot,{}),e.jsx(Zt,{onCollapse:c,isMobileOpen:o,onMobileClose:()=>x(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{onMobileMenuClick:()=>x(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:he,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(bs,{size:f?20:25})}),e.jsx(ga,{size:f?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Houses"}),k&&S&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:[e.jsx("span",{className:"font-medium",children:k.name}),"  Floor ",S.floor_id]})]})]}),f&&Ze.length>0&&e.jsxs("button",{onClick:Qe,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700",children:[e.jsx(Vo,{size:16}),e.jsxs("span",{className:"text-xs",children:["QR (",Ze.length,")"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 md:mb-6",children:[e.jsx("button",{onClick:()=>ee("houses"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${Ce==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>ee("houseTypes"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${Ce==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),Ce==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:[e.jsxs("div",{className:`flex ${f?"flex-col space-y-3":"gap-3 mb-4"}`,children:[e.jsxs("button",{onClick:Ne,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base ${f?"w-full":""}`,children:[e.jsx(tr,{size:f?16:20}),e.jsx("span",{children:"New House"})]}),!f&&e.jsxs("button",{onClick:Qe,disabled:Ze.length===0,className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(Vo,{size:f?16:20}),e.jsxs("span",{children:["Generate QR Code (",Ze.length,")"]})]})]}),Ze.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[Ze.length," house",Ze.length!==1?"s":""," selected"]}),f?e.jsx("button",{onClick:Qe,className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Generate QR"}):null]})}),D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(yt,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading Houses..."})]}):z?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:z}),e.jsx("button",{onClick:()=>He(j),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):_.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Kr,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No houses found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding houses"}),e.jsx("button",{onClick:Ne,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First House"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Houses: ",_.length]}),e.jsx("button",{onClick:Lt,className:"text-xs text-purple-600 dark:text-purple-400",children:Je?"Deselect All":"Select All"})]})}),_.map(Ve=>e.jsxs("div",{onClick:()=>Ve.is_active&&et(Ve),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${Ve.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:Ze.includes(Ve.id),onChange:st=>{st.stopPropagation(),xr(Ve.id)},onClick:st=>st.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["House ",Ve.house_id]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${Ve.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:Ve.status})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:O.find(st=>st.id===Ve.housetype_id)?.name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:st=>{st.stopPropagation(),gt(Ve)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(Ht,{size:14})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),pe(Ve)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Pa,{size:14})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),Ct(Ve)},className:`p-1.5 rounded-lg ${Ve.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:Ve.is_active?"Deactivate":"Activate",children:Ve.is_active?e.jsx(Fl,{size:14}):e.jsx(zl,{size:14})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),Le(Ve)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(ua,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex justify-between mt-2",children:[e.jsxs("span",{children:["Created: ",Yt(Ve.created_at)]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${Ve.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Ve.is_active?"Active":"Inactive"})]})]},Ve.id))]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Je,onChange:Lt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:_.map(Ve=>e.jsxs("tr",{onClick:()=>Ve.is_active&&et(Ve),className:`transition-colors cursor-pointer ${Ve.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:Ze.includes(Ve.id),onChange:st=>{st.stopPropagation(),xr(Ve.id)},onClick:st=>st.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ve.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:O.find(st=>st.id===Ve.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ve.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Yt(Ve.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:st=>{st.stopPropagation(),gt(Ve)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(Ht,{size:20})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),pe(Ve)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),Ct(Ve)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:Ve.is_active?"Deactivate":"Activate",children:Ve.is_active?e.jsx(Fl,{size:25}):e.jsx(zl,{size:25})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),Le(Ve)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},Ve.id))})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",_.length," house",_.length!==1?"s":""]})})]})})]}):e.jsx(C1,{})]})})]}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx("button",{onClick:Te,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(I4,{onClose:Te,onCreated:oe,apartment_id:y,floor_id:j})]})})}),Q&&H&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit House"}),e.jsx("button",{onClick:Me,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(O4,{onClose:Me,onUpdated:jt,house:H,apartment_id:y,floor_id:j})]})})}),ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:re?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:re?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:`flex ${f?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:ft,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${f?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{re&&(Ft(re),te(!1),W(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${f?"":"flex-1"} ${re?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:re?.is_active?"Deactivate":"Activate"})]})]})}),P&&ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',ne.house_id,'"?']}),e.jsxs("div",{className:`flex ${f?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Bt,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${f?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:lt,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${f?"":"flex-1"}`,children:"Delete"})]})]})}),ae&&ze&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(z4,{house:ze,apartment:k,floor:S,onClose:Wt,onUploadSuccess:Tt})})})}),at&&k&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(u3,{houses:_.filter(Ve=>Ze.includes(Ve.id)),apartment:k,floor:S,onClose:()=>Ue(!1)})})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function h3(){const[n,c]=N.useState(""),[o,x]=N.useState(!1),f=Vt(),g=async j=>{if(j.preventDefault(),!n){J.error("Please enter your email address");return}x(!0);try{await fe.post("/auth/forgot-password-unified",{email:n}),J.success(" Password reset link sent! Check your inbox."),c("")}catch(k){const b=k.response?.data?.message||"Something went wrong";J.error(b)}finally{x(!1)}},y=()=>{f("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-3 mt-5",children:[e.jsx("button",{onClick:y,className:"flex items-center gap-2 text-white hover:text-gray-300 transition-colors",title:"Back to Login",children:e.jsx(Mi,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-10 h-10"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"font-bold text-xl text-center mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm text-center",children:"Enter your email address and we'll send you a password reset link."}),e.jsxs("form",{onSubmit:g,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email address",className:"loginInput w-full",value:n,onChange:j=>c(j.target.value),required:!0,autoComplete:"email",disabled:o}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll check if you're an admin, employee, or house owner automatically."})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full flex items-center justify-center py-3",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):"Send Password Reset Link"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:y,className:"text-purple-700 dark:text-purple-400 hover:underline text-center font-medium py-2",children:" Back to Login"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center",children:"Don't have an account? Contact your apartment administrator."})]})})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function m3(){const[n,c]=N.useState(""),[o,x]=N.useState(""),[f,g]=N.useState(!1),[y,j]=N.useState(!1),[k,b]=N.useState(!1),[S]=Qo(),E=Vt(),[_,T]=N.useState(null),[O,M]=N.useState(null),[z,I]=N.useState(null),[L,D]=N.useState(!0),[B,Y]=N.useState(!0),[X,U]=N.useState(""),[G,Q]=N.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1,match:!1});N.useEffect(()=>{const P=S.get("token"),$=S.get("id"),ne=S.get("user_type");if(!P||!$){D(!1),Y(!1),J.error("Invalid or missing reset link parameters");return}T(P),M($),I(ne||"user"),(async()=>{try{const Ce=await fe.post("/auth/check-reset-token",{token:P,id:$});Ce.data.success?(I(Ce.data.user_type),U(Ce.data.email||""),D(!0)):(D(!1),J.error(Ce.data.message||"Invalid reset token"))}catch(Ce){console.error("Error verifying token:",Ce),D(!1),J.error("Unable to verify reset token")}finally{Y(!1)}})()},[S]),N.useEffect(()=>{if(n){const P=/[A-Z]/.test(n),$=/[a-z]/.test(n),ne=/\d/.test(n),de=/[!@#$%^&*(),.?":{}|<>]/.test(n),Ce=n.length>=6;Q(ee=>({...ee,length:Ce,uppercase:P,lowercase:$,number:ne,special:de}))}},[n]),N.useEffect(()=>{Q(P=>({...P,match:n===o&&o.length>0}))},[n,o]);const le=()=>{E("/login")},te=(()=>{if(!n)return{strength:0,label:"Very Weak",color:"bg-red-500"};let P=0;n.length>=8&&P++,/(?=.*[a-z])/.test(n)&&P++,/(?=.*[A-Z])/.test(n)&&P++,/(?=.*\d)/.test(n)&&P++,/(?=.*[@$!%*?&])/.test(n)&&P++;const $=["Very Weak","Weak","Fair","Good","Strong","Very Strong"],ne=["bg-red-500","bg-red-400","bg-yellow-500","bg-green-400","bg-green-500","bg-green-600"];return{strength:P,label:$[P]||"Very Weak",color:ne[P]||"bg-red-500"}})(),re=({isValid:P,text:$})=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[P?e.jsx(Nr,{size:12,className:"text-green-500 flex-shrink-0"}):e.jsx(Mx,{size:12,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:`truncate ${P?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:$})]}),W=async P=>{if(P.preventDefault(),!Object.values(G).every(ne=>ne===!0)){J.error("Please meet all password requirements");return}if(!z){J.error("Unable to determine account type. Please request a new reset link.");return}b(!0);try{await fe.post("/auth/reset-password-unified",{token:_,id:O,password:n,user_type:z}),J.success(" Password reset successful! Redirecting to login..."),setTimeout(()=>E("/login"),2e3)}catch(ne){const de=ne.response?.data?.message||"Reset failed. The link may have expired.";ne.response?.status===400?de.includes("expired")?J.error("Reset link has expired. Please request a new one."):de.includes("Invalid")||de.includes("invalid")?J.error("Invalid reset link. Please request a new one."):de.includes("already used")?J.error("This reset link has already been used. Please request a new one."):J.error(de):ne.response?.status===404?J.error("Account not found. The link may be invalid."):J.error(de)}finally{b(!1)}};return B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Please wait while we verify your reset link..."})]})})})}):L?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs("button",{onClick:le,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(Mi,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/apartment.png",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AptSync"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-5 sm:p-8",children:[z&&e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm ${z==="houseowner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:[e.jsx(Cg,{size:14,className:"flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:z==="houseowner"?"House Owner Account":"Admin/Employee Account"}),X&&e.jsxs("span",{className:"hidden sm:inline text-xs opacity-75 ml-1 truncate",children:["(",X,")"]})]})}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Create a strong password for your account"})]}),e.jsxs("form",{onSubmit:W,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:n,onChange:P=>c(P.target.value),required:!0,autoComplete:"new-password",disabled:k}),e.jsx("button",{type:"button",onClick:()=>g(!f),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":f?"Hide password":"Show password",children:f?e.jsx(bn,{size:20}):e.jsx(ws,{size:20})})]}),n&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strength:"}),e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${te.strength<2?"text-red-500":te.strength<4?"text-yellow-500":"text-green-500"}`,children:te.label})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-1.5 sm:h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${te.color}`,style:{width:`${te.strength/5*100}%`}})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3 text-sm",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2",children:[e.jsx(re,{isValid:G.length,text:"Min 6 characters"}),e.jsx(re,{isValid:G.uppercase,text:"Uppercase letter"}),e.jsx(re,{isValid:G.lowercase,text:"Lowercase letter"}),e.jsx(re,{isValid:G.number,text:"Number"}),e.jsx(re,{isValid:G.special,text:"Special character"}),e.jsx(re,{isValid:G.match,text:"Passwords match"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:y?"text":"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:o,onChange:P=>x(P.target.value),required:!0,autoComplete:"new-password",disabled:k}),e.jsx("button",{type:"button",onClick:()=>j(!y),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":y?"Hide password":"Show password",children:y?e.jsx(bn,{size:20}):e.jsx(ws,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-3.5 sm:py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm sm:text-base transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:k||!Object.values(G).every(P=>P===!0),children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Cg,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:le,className:"text-purple-600 dark:text-purple-400 hover:underline text-center text-sm py-2",children:" Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Having trouble?"," ",e.jsx("button",{type:"button",onClick:()=>E("/forgot-password"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium text-xs",children:"Request a new reset link"})]})})]})})]})}),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," AptSync. All rights reserved."]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3,toastClassName:"!text-sm"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("button",{onClick:le,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(Mi,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(Mx,{size:64,className:"text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm sm:text-base",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full mt-4",children:[e.jsx("button",{onClick:()=>E("/forgot-password"),className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex-1",children:"Request New Reset Link"}),e.jsx("button",{onClick:le,className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors flex-1",children:"Back to Login"})]})]})})]})})}function f3(){const[n]=Qo(),c=Vt(),[o,x]=N.useState(""),[f,g]=N.useState(""),[y,j]=N.useState(""),[k,b]=N.useState(!0),[S,E]=N.useState(!0),[_,T]=N.useState(!1),[O,M]=N.useState(!1),[z,I]=N.useState(!1),[L,D]=N.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});N.useEffect(()=>{const X=n.get("token"),U=n.get("id");if(console.log("URL Parameters:",{token:X,id:U}),!X||!U){b(!1),E(!1),J.error("Invalid registration link - missing parameters");return}x(X),g(U),(async()=>{try{const Q=await fe.post("/auth/verify-invite-link",{token:X,id:U});console.log("Link verification response:",Q.data),Q.data.success&&(j(Q.data.email),b(!0))}catch(Q){console.error("Link verification failed:",Q),b(!1),J.error(Q.response?.data?.message||"This invitation link is invalid or expired.")}finally{E(!1)}})()},[n]);const B=X=>{const{name:U,value:G}=X.target;D(Q=>({...Q,[U]:G}))},Y=async X=>{if(X.preventDefault(),L.password!==L.confirmPassword){J.error("Passwords do not match");return}if(L.password.length<8){J.error("Password must be at least 8 characters long");return}I(!0);try{const U=await fe.post("/auth/verify",{token:o,id:f});console.log("Verification response:",U.data),await fe.post("/auth/complete-registration",{email:y,firstname:L.firstname,lastname:L.lastname,country:L.country,mobile:L.mobile,password:L.password}),J.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>c("/login"),2e3)}catch(U){console.error("Registration error:",U),J.error(U.response?.data?.message||"Failed to complete registration")}finally{I(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):k?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>c("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(Mi,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",y]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:L.firstname,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:L.lastname,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"country",placeholder:"Country",value:L.country,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:L.mobile,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:_?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:L.password,onChange:B,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>T(!_),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_?e.jsx(bn,{size:18}):e.jsx(ws,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:O?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:L.confirmPassword,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>M(!O),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:O?e.jsx(bn,{size:18}):e.jsx(ws,{size:18})})]}),e.jsx("button",{type:"submit",disabled:z,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:z?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>c("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function g3(){const{auth:n}=N.useContext(da),c=Vt(),[o,x]=N.useState([]),[f,g]=N.useState(!0),[y,j]=N.useState(null),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState(null),[O,M]=N.useState(!1),[z,I]=N.useState(null),L=B=>{c(`/bills-and-calculations/${B.id}`)},D=async()=>{try{g(!0),j(null);const B=await fe.get("/apartments");console.log("API Response:",B.data),B.data.success&&Array.isArray(B.data.data)?x(B.data.data):Array.isArray(B.data)?x(B.data):(console.warn("Unexpected response format:",B.data),x([]))}catch(B){console.error("Error loading apartments:",B),B.response?.status===401?(j("Unauthorized. Please login again."),c("/login")):B.response?.status===400?j("Company information missing. Please contact support."):j("Failed to load apartments. Please try again.")}finally{g(!1)}};return N.useEffect(()=>{D()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):y?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[y,e.jsx("button",{onClick:D,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Kr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map((B,Y)=>e.jsxs("tr",{onClick:()=>B.is_active&&L(B),className:`transition-colors cursor-pointer ${B.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.picture?e.jsx("img",{src:`http://localhost:2500${B.picture}`,alt:B.name,className:"w-12 h-12 object-cover rounded-lg",onError:X=>{console.error("Image failed to load:",B.picture),X.target.style.display="none";const U=X.target.parentNode.querySelector(".image-fallback");U&&(U.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(Kr,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:B.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.houses})]},B.id||Y))})]})]})})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}const rp=(n,c=2,o="standard")=>{if(o==="ten")return Math.ceil(n/10)*10;if(o==="hundred")return Math.ceil(n/100)*100;{const x=Math.pow(10,c);return Math.ceil(n*x)/x}};function p3({onClose:n,onCreated:c,apartment_id:o}){const[x,f]=N.useState(!1),[g,y]=N.useState(!1),[j,k]=N.useState(null),[b,S]=N.useState([]),[E,_]=N.useState(""),[T,O]=N.useState(""),[M,z]=N.useState(new Date().getFullYear()),[I,L]=N.useState(new Date().toLocaleString("default",{month:"long"})),[D,B]=N.useState(0),[Y,X]=N.useState(0),[U,G]=N.useState(!1),[Q,le]=N.useState([]),[ce,te]=N.useState(!1),[re,W]=N.useState(""),[P,$]=N.useState([]),[ne,de]=N.useState(""),[Ce,ee]=N.useState([]),[H,me]=N.useState([]),[ae,be]=N.useState("house_count"),ze=async()=>{try{f(!0),k(null);const he=await fe.get("/bills");if(he.data.success&&Array.isArray(he.data.data)){const He=he.data.data.filter(et=>et.billtype==="Shared");S(He)}else S([])}catch(he){console.error("Error loading bills:",he),k("Failed to load bills. Please try again.")}finally{f(!1)}},xe=async()=>{try{te(!0);const he=await fe.get("/apartments");he.data.success&&le(he.data.data||[])}catch(he){console.error("Error loading apartments:",he)}finally{te(!1)}},Ze=async(he,He)=>{if(!he||!He){ee([]),me([]),B(0);return}try{G(!0);const et=await fe.get(`/generate-bills/assigned-houses/details?bill_id=${he}&apartment_id=${He}`);if(et.data.success)if(ee(et.data.data.houses||[]),me(et.data.data.floors||[]),B(et.data.data.houses.length),T&&et.data.data.houses.length>0){const Ne=parseFloat(T)/et.data.data.houses.length;X(Ne)}else X(0)}catch(et){console.error("Error fetching assigned houses details:",et),ee([]),me([]),B(0)}finally{G(!1)}};N.useEffect(()=>{ze(),xe()},[]);const je=he=>{de(he),he&&E?Ze(E,he):(ee([]),me([]),B(0))},Je=he=>{_(he),he&&ne?Ze(he,ne):(ee([]),me([]),B(0))},Ke=he=>{O(he);const He=Ce;if(he&&He.length>0)if(ae==="square_footage"){const et=parseFloat(he)/He.length,Ne=rp(et,2,"ten");X(Ne)}else{const et=parseFloat(he)/He.length,Ne=rp(et,2,"ten");X(Ne)}else X(0)},at=async()=>{if(!E){k("Please select a bill.");return}if(!ne){k("Please select an apartment.");return}if(!T||parseFloat(T)<=0){k("Please enter a valid total amount.");return}if(D===0){k("No houses are assigned to this bill for the selected apartment.");return}try{y(!0),k(null);const he={bill_id:E,year:M,month:I,totalAmount:parseFloat(T),apartment_id:ne,selected_floors:[],selected_houses:[],calculation_method:ae,due_date:re||null},He=await fe.post("/generate-bills/multiple",he);He.data.success?(J.success(`Successfully generated ${He.data.data?.length||0} bills!`),c(He.data.data)):k(He.data.message||"Failed to generate bill")}catch(he){console.error("Error generating bill:",he),console.error("Error details:",he.response?.data);let He="Failed to generate bill. Please try again.";he.response?.data.message?He=he.response.data.message:he.message&&(He=he.message),J.error(He)}finally{y(!1)}},Ue=()=>{const he=b.find(He=>He.id===E);return he?he.bill_name:""},ve=()=>{const he=Q.find(He=>He.id===ne);return he?he.name:""};return N.useEffect(()=>{(async()=>{try{const He=await fe.get(`/housetype?apartment_id=${o}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});$(He.data.data||[])}catch(He){console.error("Error fetching house types:",He)}})()},[o]),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 pl-1",children:[j&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:j}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("input",{type:"number",value:M,onChange:he=>z(parseInt(he.target.value)),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:I,onChange:he=>L(he.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(he=>e.jsx("option",{value:he,children:he},he))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:re,onChange:he=>W(he.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:E,onChange:he=>Je(he.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:x,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),b.map(he=>e.jsx("option",{value:he.id,children:he.bill_name},he.id))]}),x&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:ne,onChange:he=>je(he.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:ce,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),Q.map(he=>e.jsx("option",{value:he.id,children:he.name},he.id))]}),ce&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Calculation Method *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"house_count",name:"calculation_method",value:"house_count",checked:ae==="house_count",onChange:he=>be(he.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"house_count",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by House Count (Equal division)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"square_footage",name:"calculation_method",value:"square_footage",checked:ae==="square_footage",onChange:he=>be(he.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"square_footage",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by Square Footage (Proportional)"})]})]}),ae==="square_footage"&&e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Total amount will be divided proportionally based on each house's square footage"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:T,onChange:he=>Ke(he.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),E&&ne&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Assigned Houses Information"}),U&&e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Assigned Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Floors:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:H.length})]})]}),H.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Houses by Floor:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto pr-2",children:H.map(he=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Floor ",he.floor_id,":"]}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[he.assigned_houses_count," houses"]})]},he.id))})]})]}),E&&ne&&D>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Calculation Method:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:ae==="house_count"?"House Count (Equal)":"Square Footage (Proportional)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ue()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Apartment:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:ve()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D})]})]}),T&&D>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[ae==="house_count"?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(T).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",Y.toFixed(2),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Rounded up to nearest 10)"})]})]})]}):e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amounts will be calculated proportionally based on each house's square footage and rounded up to the nearest 10"})}),ae==="house_count"&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",T,"  ",D," houses =",e.jsxs("span",{className:"font-medium",children:[" $",(parseFloat(T)/D).toFixed(6)]}),e.jsx("span",{className:"mx-2",children:""}),"Rounded up to: ",e.jsxs("span",{className:"font-medium",children:["$",Y.toFixed(2)]})," per house"]})]})]}),E&&ne&&!U&&D===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:" No houses are assigned to this bill for the selected apartment. Please assign houses to this bill first."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:g,children:"Cancel"}),e.jsx("button",{onClick:at,disabled:!E||!ne||!T||D===0||g,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs("span",{children:["Generate ",D," Bills"]})})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function y3({bill:n,onClose:c,getApartmentName:o,getFloorName:x,getHouseName:f,getLocationScope:g,getLocationDisplay:y}){if(!n)return null;const j=b=>{if(!b)return"0.00";const S=typeof b=="string"?parseFloat(b):b;return isNaN(S)?"0.00":S.toFixed(2)},k=b=>{switch(b){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ga,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Gt,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Ga,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:n.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(nl,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[n.month," ",n.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${k(g(n))}`,children:[g(n)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Bl,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Di,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:o(n.apartment_id)})]})]}),n.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Zx,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:x(n.floor_id)})]})]}),n.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ga,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f(n.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:y(n)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Qr,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",j(n.totalAmount)]})]}),n.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",j(n.unitPrice)]})]}),n.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(vs,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:n.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(n.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(n.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${n.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:n.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function b3(){const[n,c]=N.useState(!1),[o,x]=N.useState([]),[f,g]=N.useState(!1),[y,j]=N.useState(""),[k,b]=N.useState(""),[S,E]=N.useState([]),[_,T]=N.useState({}),[O,M]=N.useState({}),[z,I]=N.useState(!1),[L,D]=N.useState({}),[B,Y]=N.useState({}),[X,U]=N.useState({}),[G,Q]=N.useState({}),[le,ce]=N.useState({}),[te,re]=N.useState(!1),[W,P]=N.useState(null),[$,ne]=N.useState(!1),[de,Ce]=N.useState(!1),[ee,H]=N.useState(null),me=async()=>{try{g(!0);const oe=await fe.get("/generate-bills");oe.data.success&&(x(oe.data.data),ae(oe.data.data))}catch(oe){console.error("Error loading generated bills:",oe),J.error("Failed to load generated bills")}finally{g(!1)}},ae=async oe=>{const pe=[...new Set(oe.map(Ct=>Ct.apartment_id).filter(Boolean))],Me=[...new Set(oe.map(Ct=>Ct.floor_id).filter(Boolean))],jt=[...new Set(oe.map(Ct=>Ct.house_id).filter(Boolean))];if(pe.length>0)try{const Ct=await fe.get("/apartments");if(Ct.data.success){const ft={};Ct.data.data.forEach(Ft=>{ft[Ft.id]=Ft.name}),U(ft)}}catch(Ct){console.error("Error loading apartments:",Ct)}for(const Ct of Me)if(Ct&&!G[Ct])try{const ft=await fe.get(`/floors/${Ct}`);ft.data.success&&Q(Ft=>({...Ft,[Ct]:ft.data.data.floor_id}))}catch(ft){console.error("Error loading floor:",ft)}for(const Ct of jt)if(Ct&&!le[Ct])try{const ft=await fe.get(`/houses/${Ct}`);ft.data.success&&ce(Ft=>({...Ft,[Ct]:ft.data.data.house_id}))}catch(ft){console.error("Error loading house:",ft)}},be=oe=>X[oe]||oe||"All Apartments",ze=oe=>G[oe]||oe||"All Floors",xe=oe=>le[oe]||oe||"All Houses",Ze=oe=>oe.house_id?"House":oe.floor_id?"Floor":oe.apartment_id?"Apartment":"Global",je=oe=>{switch(Ze(oe)){case"House":return`${be(oe.apartment_id)}  ${ze(oe.floor_id)}  ${xe(oe.house_id)}`;case"Floor":return`${be(oe.apartment_id)}  ${ze(oe.floor_id)}`;case"Apartment":return be(oe.apartment_id);default:return"All Locations"}};N.useEffect(()=>{me(),Ne()},[]);const Je=()=>{c(!0)},Ke=()=>{c(!1)},at=oe=>{oe&&oe.length>0&&(x(pe=>[...oe,...pe]),ae(oe)),me(),c(!1)},Ue=oe=>{H(oe),Ce(!0)},ve=()=>{Ce(!1),H(null)},he=oe=>{P(oe),re(!0)},He=async()=>{if(W)try{ne(!0),(await fe.delete(`/generate-bills/${W.id}`)).data.success&&(J.success("Generated bill deleted successfully"),x(pe=>pe.filter(Me=>Me.id!==W.id)))}catch(oe){console.error("Error deleting generated bill:",oe),J.error(oe.response?.data?.message||"Failed to delete generated bill")}finally{ne(!1),re(!1),P(null)}},et=()=>{re(!1),P(null)},Ne=async()=>{try{I(!0);const oe=await fe.get("/apartments");if(oe.data.success){E(oe.data.data||[]);const pe={};oe.data.data.forEach(Me=>{pe[Me.id]=Me.name}),U(pe)}}catch(oe){console.error("Error loading apartments:",oe),J.error("Failed to load apartments")}finally{I(!1)}},Te=o.filter(oe=>{const pe=oe.bill_name?.toLowerCase().includes(y.toLowerCase())||oe.month?.toLowerCase().includes(y.toLowerCase())||oe.year?.toString().includes(y)||be(oe.apartment_id)?.toLowerCase().includes(y.toLowerCase())||ze(oe.floor_id)?.toLowerCase().includes(y.toLowerCase())||xe(oe.house_id)?.toLowerCase().includes(y.toLowerCase()),Me=!k||oe.billtype===k;return pe&&Me});return[...new Set(o.map(oe=>oe.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:y,onChange:oe=>j(oe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:Je,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",Te.length,")"]}),f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):Te.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(tr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:o.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Te.map(oe=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:oe.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:oe.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[oe.month," ",oe.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${oe.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:oe.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(oe.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ue(oe),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(ws,{size:16})}),e.jsx("button",{onClick:()=>he(oe),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(ua,{size:16})})]})]})]})})},oe.id))})]})]}),n&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:Ke,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(p3,{onClose:Ke,onCreated:at})]})}),de&&ee&&e.jsx(y3,{bill:ee,onClose:ve,getApartmentName:be,getFloorName:ze,getHouseName:xe,getLocationScope:Ze,getLocationDisplay:je}),te&&W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(ua,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",W.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",W.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:W.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:W.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[W.month," ",W.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:et,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:$,children:"Cancel"}),e.jsx("button",{onClick:He,disabled:$,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:$?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function w3(){const[n,c]=N.useState([]),[o,x]=N.useState(!1),[f,g]=N.useState(""),[y,j]=N.useState(""),[k,b]=N.useState([]),[S,E]=N.useState({}),[_,T]=N.useState({}),[O,M]=N.useState({}),[z,I]=N.useState({}),[L,D]=N.useState({}),[B,Y]=N.useState(!1),[X,U]=N.useState(null),[G,Q]=N.useState(!1),[le,ce]=N.useState(null),[te,re]=N.useState(!1),W=async()=>{try{x(!0);const xe=await fe.get("/generate-measurable-bills");xe.data.success&&(c(xe.data.data),P(xe.data.data))}catch(xe){console.error("Error loading measurable bills:",xe),J.error("Failed to load measurable bills")}finally{x(!1)}},P=async xe=>{const Ze=[...new Set(xe.map(Ke=>Ke.apartment_id).filter(Boolean))],je=[...new Set(xe.map(Ke=>Ke.floor_id).filter(Boolean))],Je=[...new Set(xe.map(Ke=>Ke.house_id).filter(Boolean))];if(Ze.length>0)try{const Ke=await fe.get("/apartments");if(Ke.data.success){const at={};Ke.data.data.forEach(Ue=>{at[Ue.id]=Ue.name}),M(at)}}catch(Ke){console.error("Error loading apartments:",Ke)}for(const Ke of je)if(Ke&&!z[Ke])try{const at=await fe.get(`/floors/${Ke}`);at.data.success&&I(Ue=>({...Ue,[Ke]:at.data.data.floor_id}))}catch(at){console.error("Error loading floor:",at)}for(const Ke of Je)if(Ke&&!L[Ke])try{const at=await fe.get(`/houses/${Ke}`);at.data.success&&D(Ue=>({...Ue,[Ke]:at.data.data.house_id}))}catch(at){console.error("Error loading house:",at)}},$=xe=>O[xe]||xe||"N/A",ne=xe=>z[xe]||xe||"N/A",de=xe=>L[xe]||xe||"N/A",Ce=xe=>xe.house_id?`${$(xe.apartment_id)}  ${ne(xe.floor_id)}  ${de(xe.house_id)}`:xe.floor_id?`${$(xe.apartment_id)}  ${ne(xe.floor_id)}`:xe.apartment_id?$(xe.apartment_id):"Global";N.useEffect(()=>{W()},[]);const ee=xe=>{ce(xe),re(!0)},H=()=>{re(!1),ce(null)},me=xe=>{U(xe),Y(!0)},ae=async()=>{if(X)try{Q(!0),(await fe.delete(`/generate-measurable-bills/${X.id}`)).data.success&&(J.success("Measurable bill deleted successfully"),c(Ze=>Ze.filter(je=>je.id!==X.id)))}catch(xe){console.error("Error deleting measurable bill:",xe),J.error(xe.response?.data?.message||"Failed to delete measurable bill")}finally{Q(!1),Y(!1),U(null)}},be=()=>{Y(!1),U(null)},ze=n.filter(xe=>{const Ze=xe.bill_name?.toLowerCase().includes(f.toLowerCase())||xe.month?.toLowerCase().includes(f.toLowerCase())||xe.year?.toString().includes(f)||$(xe.apartment_id)?.toLowerCase().includes(f.toLowerCase())||ne(xe.floor_id)?.toLowerCase().includes(f.toLowerCase())||de(xe.house_id)?.toLowerCase().includes(f.toLowerCase()),je=!y||xe.billtype===y;return Ze&&je});return[...new Set(n.map(xe=>xe.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:f,onChange:xe=>g(xe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",ze.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",ze.length," of ",n.length," bills"]})]}),o?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):ze.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ar,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:ze.map(xe=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:xe.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:xe.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[xe.month," ",xe.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(xe.created_at).toLocaleDateString()," at ",new Date(xe.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ee(xe),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(ws,{size:16})}),e.jsx("button",{onClick:()=>me(xe),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:xe.payment_status==="Paid",children:e.jsx(ua,{size:16})})]})]})]})})},xe.id))})]})]}),te&&le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:H,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:le.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:le.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[le.month," ",le.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:Ce(le)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:le.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:le.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[le.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",le.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:le.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(le.created_at).toLocaleString()})]}),le.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(le.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),B&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(ua,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:X.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:X.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[X.month," ",X.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",X.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:be,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:G,children:"Cancel"}),e.jsx("button",{onClick:ae,disabled:G,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function N3(){const[n,c]=N.useState(!1),[o,x]=N.useState("bills");Vt();const{apartment_id:f}=os(),[g,y]=N.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>x("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${o==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>x("generateBill"),className:`px-4 py-2 font-semibold 
                                ${o==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>x("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${o==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),o==="bills"&&e.jsx(E1,{}),o==="generateBill"&&e.jsx(b3,{}),o==="measurableBill"&&e.jsx(w3,{})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function v3({show:n,onClose:c,onSave:o}){const[x,f]=N.useState({fromRange:"",toRange:""});if(!n)return null;const g=j=>{const{name:k,value:b}=j.target;f(S=>({...S,[k]:b}))},y=()=>{if(!x.fromRange||!x.toRange){alert("Please fill all fields.");return}o(x)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(Gt,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:x.fromRange,onChange:g,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:x.toRange,onChange:g,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:y,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function j3({range:n,onClose:c,onUpdated:o}){const[x,f]=N.useState({fromRange:"",toRange:"",unitPrice:""}),[g,y]=N.useState(!1),[j,k]=N.useState(""),b=localStorage.getItem("token");N.useEffect(()=>{n&&f({fromRange:n.fromRange??"",toRange:n.toRange??"",unitPrice:n.unitPrice??""})},[n]);const S=_=>{const{name:T,value:O}=_.target;f(M=>({...M,[T]:O}))},E=async _=>{_.preventDefault(),y(!0),k("");try{const T=await fe.put(`/billranges/${n.id}`,x,{headers:{Authorization:`Bearer ${b}`}});T.data.success?(o&&o(T.data.data),c&&c()):k(T.data.message||"Failed to update bill range")}catch(T){console.error("Update error:",T),k("Error updating bill range")}finally{y(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),j&&e.jsx("p",{className:"text-red-500",children:j}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:x.fromRange,onChange:S,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:x.toRange,onChange:S,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Saving...":"Save"})]})]})]})})}function k3(){const{bill_id:n}=os();console.log("Bill ID:",n);const[c,o]=N.useState(!1),[x,f]=N.useState(null),[g,y]=N.useState([]),[j,k]=N.useState(!1),b=Vt(),[S,E]=N.useState([]),[_,T]=N.useState(!1),[O,M]=N.useState(!1),[z,I]=N.useState(!1),[L,D]=N.useState(null),[B,Y]=N.useState(null),[X,U]=N.useState(!1),G=async()=>{try{o(!0),f(null);const W=await fe.get(`/billranges?bill_id=${n}`);if(W.data.success&&Array.isArray(W.data.data)){const P=W.data.data.filter($=>$.bill_id===n);y(P)}else y([])}catch(W){console.error("Error loading bill ranges:",W),f("Failed to load bill ranges. Please try again.")}finally{o(!1)}};N.useEffect(()=>{G()},[n]);const Q=()=>{b("/bills-and-calculations")},le=async()=>{try{T(!0),f(null);const W=await fe.get("/bills");W.data.success&&Array.isArray(W.data.data)?E(W.data.data):E([])}catch(W){console.error("Error loading bills:",W),f("Failed to load bills. Please try again.")}finally{T(!1)}};N.useEffect(()=>{le()},[]);const ce=W=>{Y(W),U(!0)},te=async()=>{try{if(!B)return;await fe.delete(`/billranges/${B.id}`),J.success("Bill range deleted successfully"),U(!1),Y(null),G()}catch(W){console.error("Delete bill range error:",W),J.error("Failed to delete bill range")}},re=()=>{U(!1),Y(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:k}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${j?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Q,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(bs,{size:25})}),e.jsx(Ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const W=S.find(P=>P.id===n);return W?W.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>M(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):x?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[x,e.jsx("button",{onClick:G,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):g.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Kr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:g.map((W,P)=>e.jsxs("tr",{onClick:()=>b(`/billprice/${n}/${W.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:P+1}),e.jsx("td",{className:"px-4 py-4",children:W.fromRange}),e.jsx("td",{className:"px-4 py-4",children:W.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:$=>{$.stopPropagation(),D(W),I(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:$=>{$.stopPropagation(),ce(W)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},W.id))})]})})]})]})})]}),e.jsx(v3,{show:O,onClose:()=>M(!1),onSave:async W=>{try{(await fe.post("/billranges",{...W,bill_id:n})).data.success?(J.success("Bill range added successfully!"),M(!1),G()):J.error("Failed to add bill range.")}catch(P){console.error("Error adding bill range:",P),J.error("Error adding bill range.")}}}),z&&e.jsx(j3,{range:L,onClose:()=>I(!1),onUpdated:()=>{J.success("Bill range updated!"),G()}}),X&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:re,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:te,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function C3({bill_id:n,billrange_id:c,onClose:o,onCreated:x}){const[f,g]=N.useState({year:"",month:"",unitprice:"",fixedamount:""}),[y,j]=N.useState(!1),[k,b]=N.useState("");la.useEffect(()=>{console.log("CreateBillPrice props:",{bill_id:n,billrange_id:c})},[n,c]);const S=_=>{const{name:T,value:O}=_.target;g(M=>({...M,[T]:O}))},E=async _=>{_.preventDefault(),j(!0),b("");const T={...f,bill_id:n,billrange_id:c};console.log("Submitting bill price data:",T);try{const O=await fe.post("/billprice",T,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});O.data.success?(x?.(O.data.data),g({year:"",month:"",unitprice:"",fixedamount:""}),o()):b(O.data.message||"Failed to save bill price")}catch(O){console.error("Error saving bill price:",O),console.error("Error response:",O.response?.data),O.response?.status===400?b(O.response.data?.message||"Bad request. Please check all required fields."):O.response?.status===403?b("Access denied. Please check your login or permissions."):b("Error saving bill price. Please try again.")}finally{j(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:o,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(Gt,{size:20})})]}),k&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:k}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:f.year,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:f.month,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:f.unitprice,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:f.fixedamount,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y||!n||!c,className:`px-4 py-2 rounded-lg text-white transition ${y||!n||!c?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:y?"Saving...":"Save"})]})]})]})})}function S3({bill_id:n,billrange_id:c,billPrice:o,onClose:x,onUpdated:f}){const[g,y]=N.useState({year:"",month:"",unitprice:"",fixedamount:""}),[j,k]=N.useState(!1),[b,S]=N.useState("");N.useEffect(()=>{o&&y({year:o.year||"",month:o.month||"",unitprice:o.unitprice||"",fixedamount:o.fixedamount||""})},[o]),N.useEffect(()=>{console.log("EditBillPrice props:",{bill_id:n,billrange_id:c,billPrice:o,formData:g})},[n,c,o,g]);const E=T=>{const{name:O,value:M}=T.target;y(z=>({...z,[O]:M}))},_=async T=>{if(T.preventDefault(),k(!0),S(""),!o||!o.id){S("No bill price selected for editing"),k(!1);return}const O={...g,bill_id:n,billrange_id:c,id:o.id};console.log("Updating bill price data:",O);try{const M=await fe.put(`/billprice/${o.id}`,O,{headers:{"Content-Type":"application/json"}});M.data.success?(f?.(M.data.data),x()):S(M.data.message||"Failed to update bill price")}catch(M){console.error("Error updating bill price:",M),console.error("Error response:",M.response?.data),M.response?.status===400?S(M.response.data?.message||"Bad request. Please check all required fields."):M.response?.status===403?S("Access denied. Please check your login or permissions."):M.response?.status===404?S("Bill price not found. It may have been deleted."):S("Error updating bill price. Please try again.")}finally{k(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:x,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(Gt,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:_,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:g.year,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:g.month,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(T=>e.jsx("option",{value:T,children:T},T))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:g.unitprice,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:g.fixedamount,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:x,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j||!n||!c||!o,className:`px-4 py-2 rounded-lg text-white transition ${j||!n||!c||!o?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:j?"Updating...":"Update"})]})]})]})})}function A3(){const{bill_id:n,billrange_id:c}=os(),o=Vt(),[x,f]=N.useState([]),[g,y]=N.useState(!1),[j,k]=N.useState(null),[b,S]=N.useState(!1),[E,_]=N.useState(!1),[T,O]=N.useState(!1),[M,z]=N.useState(null);la.useEffect(()=>{console.log("Route parameters:",{bill_id:n,billrange_id:c})},[n,c]);const I=async()=>{try{y(!0),k(null),console.log("Loading bill prices with:",{bill_id:n,billrange_id:c});const G=await fe.get(`/billprice?bill_id=${n}&billrange_id=${c}`);console.log("API Response:",G.data),G.data.success?f(G.data.data||[]):(f([]),k(G.data.message||"Failed to load bill prices"))}catch(G){console.error("Error loading bill prices:",G),k(G.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{y(!1)}};N.useEffect(()=>{n&&c?I():k("Missing bill_id or billrange_id in URL parameters")},[n,c]);const L=()=>{o(-1)},D=()=>{I(),_(!1),J.success("Bill price created successfully!")},B=G=>{z(G),O(!0)},Y=()=>{I(),O(!1),z(null),J.success("Updated!")},X=()=>{O(!1),z(null)},U=async G=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await fe.delete(`/billprice/${G}`),J.success("Bill price deleted successfully"),I()}catch(Q){console.error("Error deleting bill price:",Q),J.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:S}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:L,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(bs,{size:25})}),e.jsx(Ht,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>_(!0),disabled:!n||!c,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!n||!c?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):j?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[j,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):x.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Ht,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:x.map((G,Q)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:Q+1}),e.jsx("td",{className:"px-4 py-4",children:G.year}),e.jsx("td",{className:"px-4 py-4",children:G.month}),e.jsx("td",{className:"px-4 py-4",children:G.unitprice}),e.jsx("td",{className:"px-4 py-4",children:G.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(G),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Pa,{size:20})}),e.jsx("button",{onClick:()=>U(G.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(ua,{size:20})})]})})]},G.id))})]})})]})]})})]}),E&&e.jsx(C3,{onClose:()=>_(!1),onCreated:D,billrange_id:c,bill_id:n}),T&&M&&e.jsx(S3,{onClose:X,onUpdated:Y,billrange_id:c,bill_id:n,billPrice:M}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function E3(){const[n,c]=N.useState(!1),[o,x]=N.useState(0),[f,g]=N.useState(!0),[y,j]=N.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0}),{auth:k}=N.useContext(da);N.useEffect(()=>{k?.user?.id&&(b(),S())},[k?.user?.id]);const b=async()=>{try{g(!0);const _=await fe.get(`/user-apartments/users/${k.user.id}/apartments`);if(_.data.success){const T=_.data.data||[];x(T.length),j(O=>({...O,assignedApartments:T.length}))}else J.error("Failed to load assigned apartments")}catch(_){console.error("Error fetching assigned apartments:",_),J.error("Error loading assigned apartments")}finally{g(!1)}},S=async()=>{try{const _={pendingTasks:12,completedTasks:45,maintenanceRequests:8};j(T=>({...T,..._}))}catch(_){console.error("Error fetching dashboard stats:",_)}},E=_=>_.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ga,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:E(o)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(sl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assigned Apartments Summary"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View Details"})]}),o===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(er,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Apartments Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't been assigned to any apartments yet."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:E(o)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Apartments"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:E(o)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Status"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:E(y.pendingTasks)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Tasks"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:E(y.maintenanceRequests)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maintenance"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4 mt-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(Nr,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["You are responsible for ",o," apartments"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Nr,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Regular inspections ensure tenant satisfaction"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Nr,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Keep track of pending tasks and maintenance requests"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 lg:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:o===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity. Start by getting assigned to apartments."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Nr,{size:16,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Assigned to ",o," apartments"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today  All apartments active"})]})]}),e.jsx(sl,{size:16,className:"text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Wr,{size:16,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[y.pendingTasks," pending tasks"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Requires your attention"})]})]}),e.jsx(sl,{size:16,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(vs,{size:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[y.maintenanceRequests," maintenance requests"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Scheduled for this week"})]})]}),e.jsx(sl,{size:16,className:"text-blue-500"})]})]})})]})]})})]}),e.jsx(Dt,{position:"top-right",autoClose:3e3})]})}function _3(){const[n,c]=N.useState(!1),[o,x]=N.useState(null),[f,g]=N.useState(!0),[y,j]=N.useState(!1),[k,b]=N.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:S}=N.useContext(da);N.useEffect(()=>{E()},[]);const E=async()=>{try{g(!0);const I=await fe.get("/auth/me");if(I.data.success&&I.data.data&&I.data.data.length>0){const L=I.data.data[0];x(L),b({firstname:L.firstname||"",lastname:L.lastname||"",country:L.country||"",mobile:L.mobile||""})}else J.error("No profile data found")}catch(I){console.error("Error fetching profile:",I),J.error("Failed to load profile")}finally{g(!1)}},_=()=>{j(!0)},T=()=>{j(!1),o&&b({firstname:o.firstname||"",lastname:o.lastname||"",country:o.country||"",mobile:o.mobile||""})},O=async()=>{try{const I=await fe.put(`/auth/users/${o.id}`,k);I.data.success&&(x(L=>({...L,...I.data.data})),j(!1),J.success("Profile updated successfully"),E())}catch(I){console.error("Error updating profile:",I),J.error(I.response?.data?.message||"Failed to update profile")}},M=I=>{const{name:L,value:D}=I.target;b(B=>({...B,[L]:D}))},z=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return f?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):o?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(Zt,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"md:ml-20":"md:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),y?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(Gt,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:O,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(Hd,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:_,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Pa,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[o.firstname?.charAt(0)?.toUpperCase(),o.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[o.firstname," ",o.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:o.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(nl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",z(o.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${o.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:o.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),y?e.jsx("input",{type:"text",name:"firstname",value:k.firstname,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),y?e.jsx("input",{type:"text",name:"lastname",value:k.lastname,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Bl,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),y?e.jsx("input",{type:"text",name:"country",value:k.country,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Fi,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),y?e.jsx("input",{type:"tel",name:"mobile",value:k.mobile,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(ll,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Ll,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:o.role})]})]})]})})]})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function T3(){const[n,c]=N.useState([]),[o,x]=N.useState(!0),[f,g]=N.useState(""),[y,j]=N.useState(!1),[k,b]=N.useState(!1),{auth:S}=N.useContext(da),E=Vt(),_=async()=>{try{x(!0);const I=await fe.get(`/user-apartments/users/${S.user.id}/apartments`);I.data.success?c(I.data.data||[]):(J.error("Failed to load apartments"),c([]))}catch(I){console.error("Error fetching apartments:",I),J.error("Error loading your apartments"),c([])}finally{x(!1)}};N.useEffect(()=>{S?.user?.id&&_()},[S?.user?.id]);const T=n.filter(I=>I.name?.toLowerCase().includes(f.toLowerCase())||I.address?.toLowerCase().includes(f.toLowerCase())||I.city?.toLowerCase().includes(f.toLowerCase())),O=I=>{try{return new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},M=I=>I?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",z=I=>{E(`/floors/${I}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(Zt,{onCollapse:j})}),k&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${k?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(Zt,{onCollapse:j})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${y?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:n.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(er,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:n.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ar,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:f,onChange:I=>g(I.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:o?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(er,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:f?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:f?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:T.map(I=>e.jsxs("div",{onClick:()=>z(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ga,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(Bl,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(vs,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(er,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",O(I.assigned_at)]})})]},I.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(I=>e.jsxs("div",{onClick:()=>z(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ga,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${M(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(Bl,{size:16}),e.jsxs("span",{className:"text-sm",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(vs,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(er,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",O(I.assigned_at)]})})]},I.id))})]})}),T.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Ar,{size:20})})})]})})]}),e.jsx(Dt,{position:"top-right",autoClose:3e3})]})}function M3({bill_id:n,onClose:c,onSuccess:o}){const[x,f]=N.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[g,y]=N.useState(!1),[j,k]=N.useState({}),b=T=>{const{name:O,value:M}=T.target;f(z=>({...z,[O]:M})),j[O]&&k(z=>({...z,[O]:""}))},S=()=>{const T={};return(!x.year||x.year<2e3||x.year>2100)&&(T.year="Please enter a valid year (2000-2100)"),(!x.month||x.month<1||x.month>12)&&(T.month="Please select a valid month (1-12)"),(!x.amount||parseFloat(x.amount)<=0)&&(T.amount="Please enter a valid amount"),k(T),Object.keys(T).length===0},E=async T=>{if(T.preventDefault(),!!S())try{y(!0);const O=await fe.post("/shared-value-prices",{bill_id:n,year:parseInt(x.year),month:parseInt(x.month),amount:parseFloat(x.amount)});O.data.success?o():J.error(O.data.message||"Failed to create shared value price")}catch(O){console.error("Error creating shared value price:",O),O.response?.data?.message?J.error(O.response.data.message):J.error("Failed to create shared value price")}finally{y(!1)}},_=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:x.year,onChange:b,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),j.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:x.month,onChange:b,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:_.map(T=>e.jsx("option",{value:T.value,children:T.label},T.value))}),j.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:x.amount,onChange:b,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${j.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),j.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:j.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[g&&e.jsx(yt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Creating...":"Create"})]})]})]})]})})}function D3(){const{bill_id:n}=os(),c=Vt(),[o,x]=N.useState([]),[f,g]=N.useState(null),[y,j]=N.useState(!1),[k,b]=N.useState(!1),[S,E]=N.useState(null),[_,T]=N.useState(!1),[O,M]=N.useState(!1),[z,I]=N.useState(!1),[L,D]=N.useState(null),[B,Y]=N.useState(!1),[X,U]=N.useState(null),G=async()=>{try{b(!0);const de=await fe.get(`/bills/${n}`);de.data.success&&g(de.data.data)}catch(de){console.error("Error loading bill info:",de)}finally{b(!1)}},Q=async()=>{try{if(j(!0),E(null),!n){E("Bill ID is required");return}const de=await fe.get(`/shared-value-prices/bill/${n}`);de.data.success?x(de.data.data||[]):(E("Failed to load shared value prices"),x([]))}catch(de){console.error("Error loading shared value prices:",de),E("Failed to load shared value prices. Please try again."),x([])}finally{j(!1)}};N.useEffect(()=>{n&&(G(),Q())},[n]);const le=()=>{c(-1)},ce=()=>{console.log("handleCreateSuccess called"),M(!1),J.success("Shared value price created successfully"),Q()};N.useEffect(()=>{console.log("bill_id changed:",n),n&&(G(),Q())},[n]);const te=()=>{Q(),I(!1),D(null),J.success("Shared value price updated successfully")},re=de=>{D(de),I(!0)},W=de=>{U(de),Y(!0)},P=async()=>{try{if(!X)return;await fe.delete(`/shared-value-prices/${X.id}`),J.success("Shared value price deleted successfully"),Y(!1),U(null),Q()}catch(de){console.error("Delete shared value price error:",de),J.error("Failed to delete shared value price")}},$=()=>{Y(!1),U(null)},ne=de=>["January","February","March","April","May","June","July","August","September","October","November","December"][de-1]||de;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:T}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${_?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:le,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(bs,{size:25})}),e.jsx(Ht,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),f&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[f.bill_name," - ",f.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>M(!0),disabled:!n,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${n?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),y?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):S?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[S,e.jsx("button",{onClick:Q,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):o.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Ht,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:o.map((de,Ce)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Ce+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:de.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ne(de.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:de.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(de.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>re(de),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(Pa,{size:18})}),e.jsx("button",{onClick:()=>W(de),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(ua,{size:18})})]})})]},de.id))})]})})]})]})})]}),O&&e.jsx(M3,{bill_id:n,onClose:()=>M(!1),onSuccess:ce}),z&&L&&e.jsx(EditSharedValuePriceModal,{price:L,onClose:()=>{I(!1),D(null)},onSuccess:te}),B&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",ne(X.month)," ",X.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:$,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:P,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function R1({payment:n,onClose:c,onUpdate:o}){const[x,f]=N.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[g,y]=N.useState(!1),j=!!n?.generateMeasurable_bills_id;if(N.useEffect(()=>{n&&f({additionalAmount:0,payment_status:n.payment_status||"Pending",paid_at:n.paid_at?new Date(n.paid_at).toISOString().split("T")[0]:""})},[n,j]),!n)return null;const b=j?parseFloat(n.generated_total_amount)||parseFloat(n.unitPrice)||0:parseFloat(n.unitPrice)||0,S=parseFloat(n.paidAmount)||0,E=parseFloat(n.pendingAmount)||0,_=S+parseFloat(x.additionalAmount||0),T=b-_,O=L=>{const D=typeof L=="string"?parseFloat(L):L;return isNaN(D)?"0.00":D.toFixed(2)},M=async L=>{L.preventDefault();const D=parseFloat(x.additionalAmount||0);if(D<0){J.error("Payment amount cannot be negative");return}if(D>E){J.error(`Payment amount cannot exceed pending amount of $${O(E)}`);return}let B=x.payment_status;_>=b?B="Paid":_>0?B="Partial":B="Pending";try{y(!0);const Y={payment_status:B,paidAmount:_};B==="Paid"&&x.paid_at?Y.paid_at=x.paid_at:B==="Paid"&&!x.paid_at&&(Y.paid_at=new Date().toISOString().split("T")[0]),console.log("Sending update data:",Y),console.log("Current paid:",S),console.log("Additional:",D),console.log("New total paid:",_);const X=await fe.patch(`/bill-payments/${n.id}/status`,Y);X.data.success&&(J.success("Payment updated successfully"),o(X.data.data))}catch(Y){console.error("Error updating payment:",Y),console.error("Error details:",Y.response?.data),J.error(`Failed to update payment: ${Y.response?.data?.message||Y.message}`)}finally{y(!1)}},z=L=>{const D=parseFloat(L)||0,Y=Math.min(D,E),X=S+Y;let U="Pending";X>=b?U="Paid":X>0&&(U="Partial"),f(G=>({...G,additionalAmount:Y,payment_status:U}))},I=T<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ga,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),j&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Gt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[n.bill_name," (",n.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[n.apartment_name," - Floor ",n.floor_id," - House ",n.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[n.month," ",n.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:j?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",O(S)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",O(E)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${j?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${j?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:j?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${j?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",O(b)]}),j&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:E,value:x.additionalAmount,onChange:L=>z(L.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",O(E)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",O(x.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",O(_)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",O(x.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${T>0&&T<E?"bg-orange-50 dark:bg-orange-900/20":I?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${T>0&&T<E?"text-orange-800 dark:text-orange-300":I?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${T>0&&T<E?"text-orange-600 dark:text-orange-400":I?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",O(T)]}),I?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):T<E?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",O(E-T)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${x.payment_status==="Paid"?"text-green-600 dark:text-green-400":x.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:x.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(x.payment_status==="Paid"||I)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:x.paid_at,onChange:L=>f(D=>({...D,paid_at:L.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:x.payment_status==="Paid"||I})]}),!x.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||x.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qr,{size:16}),e.jsxs("span",{children:["Pay $",O(x.additionalAmount)]})]})})]})]})]})]})})}function R3(){const[n,c]=N.useState([]),[o,x]=N.useState(!1),[f,g]=N.useState({}),[y,j]=N.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[k,b]=N.useState([]),[S,E]=N.useState([]),[_,T]=N.useState([]),[O,M]=N.useState([]),[z,I]=N.useState(""),[L,D]=N.useState(!1),[B,Y]=N.useState(!1),[X,U]=N.useState(!1),[G,Q]=N.useState(!1),[le,ce]=N.useState(null),[te,re]=N.useState(!1),[W,P]=N.useState(null),[$,ne]=N.useState(!1),[de,Ce]=N.useState(null),ee=async()=>{try{const pe=await fe.get("/bills");pe.data.success&&M(pe.data.data||[])}catch(pe){console.error("Error loading bills:",pe),J.error("Failed to load bills")}},H=async()=>{try{Y(!0);const pe=await fe.get("/apartments");pe.data.success?b(pe.data.data||[]):b([])}catch(pe){console.error("Error loading apartments:",pe),J.error("Failed to load apartments"),b([])}finally{Y(!1)}},me=async pe=>{if(!pe){E([]),T([]);return}try{U(!0);const Me=await fe.get(`/floors?apartment_id=${pe}`);Me.data.success?E(Me.data.data||[]):E([])}catch(Me){console.error("Error loading floors:",Me),J.error("Failed to load floors"),E([])}finally{U(!1)}},ae=async pe=>{if(!pe||!y.apartment_id){T([]);return}try{Q(!0);const Me=await fe.get(`/houses?floor_id=${pe}&apartment_id=${y.apartment_id}`);Me.data.success?T(Me.data.data||[]):T([])}catch(Me){console.error("Error loading houses:",Me),J.error("Failed to load houses"),T([])}finally{Q(!1)}},be=async()=>{try{x(!0);const pe=new URLSearchParams;Object.entries(y).forEach(([jt,Ct])=>{Ct&&pe.append(jt,Ct)}),console.log("Loading payments with filters:",Object.fromEntries(pe));const Me=await fe.get(`/bill-payments?${pe}`);Me.data.success&&(c(Me.data.data),console.log("Payments loaded:",Me.data.data.length))}catch(pe){console.error("Error loading payments:",pe),console.error("Payment loading error details:",pe.response?.data),J.error("Failed to load payments. Check console for details.")}finally{x(!1)}},ze=async()=>{try{const pe=await fe.get("/bill-payments/summary");if(pe.data.success){const Me={};pe.data.data.forEach(jt=>{Me[jt.payment_status]=jt}),g(Me)}}catch(pe){console.error("Error loading summary:",pe)}};N.useEffect(()=>{ee(),H(),ze(),be()},[]),N.useEffect(()=>{be()},[y]);const xe=pe=>{j({billtype:pe,apartment_id:"",floor_id:"",house_id:"",payment_status:y.payment_status,month:y.month,year:y.year})},Ze=pe=>{j(Me=>({...Me,apartment_id:pe,floor_id:"",house_id:""})),me(pe)},je=pe=>{j(Me=>({...Me,floor_id:pe,house_id:""})),ae(pe)},Je=pe=>{j(Me=>({...Me,house_id:pe}))},Ke=(pe,Me)=>{j(jt=>({...jt,[pe]:Me}))},at=pe=>{Ce(pe),ne(!0)},Ue=async()=>{if(de)try{P(de.id),(await fe.delete(`/bill-payments/${de.id}`)).data.success&&(J.success("Payment deleted successfully"),c(Me=>Me.filter(jt=>jt.id!==de.id)),ze())}catch(pe){console.error("Error deleting payment:",pe),J.error(pe.response?.data?.message||"Failed to delete payment")}finally{P(null),ne(!1),Ce(null)}},ve=()=>{j({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),I(""),E([]),T([])},he=n.filter(pe=>{const Me=z.toLowerCase();return pe.bill_name?.toLowerCase().includes(Me)||pe.apartment_name?.toLowerCase().includes(Me)||pe.house_number?.toString().includes(z)||pe.month?.toLowerCase().includes(Me)}),He=pe=>{switch(pe){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},et=["January","February","March","April","May","June","July","August","September","October","November","December"],Ne=[...new Set(O.map(pe=>pe.billtype))].filter(pe=>pe),Te=()=>{re(!1),ce(null)},oe=pe=>{c(Me=>Me.map(jt=>jt.id===pe.id?pe:jt)),Te(),ze()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:D}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${L?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:z,onChange:pe=>I(pe.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:y.billtype,onChange:pe=>xe(pe.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),Ne.map(pe=>e.jsx("option",{value:pe,children:pe},pe))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:y.apartment_id,onChange:pe=>Ze(pe.target.value),disabled:B,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),k.map(pe=>e.jsx("option",{value:pe.id,children:pe.name},pe.id))]}),B&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:y.floor_id,onChange:pe=>je(pe.target.value),disabled:!y.apartment_id||X,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),S.map(pe=>e.jsxs("option",{value:pe.id,children:["Floor ",pe.floor_id]},pe.id))]}),X&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:y.house_id,onChange:pe=>Je(pe.target.value),disabled:!y.floor_id||G,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),_.map(pe=>e.jsxs("option",{value:pe.id,children:["House ",pe.house_id]},pe.id))]}),G&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:y.payment_status,onChange:pe=>Ke("payment_status",pe.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:y.month,onChange:pe=>Ke("month",pe.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),et.map(pe=>e.jsx("option",{value:pe,children:pe},pe))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:y.year,onChange:pe=>Ke("year",pe.target.value),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:ve,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",he.length," of ",n.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ud,{size:16}),e.jsxs("span",{children:[he.length," payments found"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:o?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):he.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Qr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:n.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:he.map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[pe.bill_name," (",pe.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Di,{size:12,className:"inline mr-1"}),pe.apartment_name,e.jsx(ga,{size:12,className:"inline mx-1"}),"Floor ",pe.floor_id," - House ",pe.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[pe.month," ",pe.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",pe.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",pe.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",pe.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${He(pe.payment_status)}`,children:pe.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:pe.paid_at?new Date(pe.paid_at).toLocaleDateString():new Date(pe.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex space-x-1",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>at(pe),disabled:W===pe.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:W===pe.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(ua,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})})})]},pe.id))})]})})})]})})]}),te&&e.jsx(R1,{payment:le,onClose:Te,onUpdate:oe}),$&&de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(ua,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[de.bill_name," (",de.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[de.apartment_name," - House ",de.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",de.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${de.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:de.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{ne(!1),Ce(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:W===de.id,children:"Cancel"}),e.jsx("button",{onClick:Ue,disabled:W===de.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:W===de.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}var rt;(function(n){n[n.QR_CODE=0]="QR_CODE",n[n.AZTEC=1]="AZTEC",n[n.CODABAR=2]="CODABAR",n[n.CODE_39=3]="CODE_39",n[n.CODE_93=4]="CODE_93",n[n.CODE_128=5]="CODE_128",n[n.DATA_MATRIX=6]="DATA_MATRIX",n[n.MAXICODE=7]="MAXICODE",n[n.ITF=8]="ITF",n[n.EAN_13=9]="EAN_13",n[n.EAN_8=10]="EAN_8",n[n.PDF_417=11]="PDF_417",n[n.RSS_14=12]="RSS_14",n[n.RSS_EXPANDED=13]="RSS_EXPANDED",n[n.UPC_A=14]="UPC_A",n[n.UPC_E=15]="UPC_E",n[n.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(rt||(rt={}));var sp=new Map([[rt.QR_CODE,"QR_CODE"],[rt.AZTEC,"AZTEC"],[rt.CODABAR,"CODABAR"],[rt.CODE_39,"CODE_39"],[rt.CODE_93,"CODE_93"],[rt.CODE_128,"CODE_128"],[rt.DATA_MATRIX,"DATA_MATRIX"],[rt.MAXICODE,"MAXICODE"],[rt.ITF,"ITF"],[rt.EAN_13,"EAN_13"],[rt.EAN_8,"EAN_8"],[rt.PDF_417,"PDF_417"],[rt.RSS_14,"RSS_14"],[rt.RSS_EXPANDED,"RSS_EXPANDED"],[rt.UPC_A,"UPC_A"],[rt.UPC_E,"UPC_E"],[rt.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),np;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.URL=1]="URL"})(np||(np={}));function I3(n){return Object.values(rt).includes(n)}var Ys;(function(n){n[n.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",n[n.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ys||(Ys={}));var gs=function(){function n(){}return n.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",n.SCAN_DEFAULT_FPS=2,n.DEFAULT_DISABLE_FLIP=!1,n.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,n.DEFAULT_SUPPORTED_SCAN_TYPE=[Ys.SCAN_TYPE_CAMERA,Ys.SCAN_TYPE_FILE],n}(),I1=function(){function n(c,o){this.format=c,this.formatName=o}return n.prototype.toString=function(){return this.formatName},n.create=function(c){if(!sp.has(c))throw"".concat(c," not in html5QrcodeSupportedFormatsTextMap");return new n(c,sp.get(c))},n}(),lp=function(){function n(){}return n.createFromText=function(c){var o={text:c};return{decodedText:c,result:o}},n.createFromQrcodeResult=function(c){return{decodedText:c.text,result:c}},n}(),Fx;(function(n){n[n.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",n[n.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",n[n.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Fx||(Fx={}));var O1=function(){function n(){}return n.createFrom=function(c){return{errorMessage:c,type:Fx.UNKWOWN_ERROR}},n}(),B1=function(){function n(c){this.verbose=c}return n.prototype.log=function(c){this.verbose&&console.log(c)},n.prototype.warn=function(c){this.verbose&&console.warn(c)},n.prototype.logError=function(c,o){(this.verbose||o===!0)&&console.error(c)},n.prototype.logErrors=function(c){if(c.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(c)},n}();function Gs(n){return typeof n>"u"||n===null}function O3(n,c,o){return n>o?o:n<c?c:n}var Ti=function(){function n(){}return n.codeParseError=function(c){return"QR code parse error, error = ".concat(c)},n.errorGettingUserMedia=function(c){return"Error getting userMedia, error = ".concat(c)},n.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},n.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},n.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},n.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},n.scannerPaused=function(){return"Scanner paused"},n}(),na=function(){function n(){}return n.scanningStatus=function(){return"Scanning"},n.idleStatus=function(){return"Idle"},n.errorStatus=function(){return"Error"},n.permissionStatus=function(){return"Permission"},n.noCameraFoundErrorStatus=function(){return"No Cameras"},n.lastMatch=function(c){return"Last Match: ".concat(c)},n.codeScannerTitle=function(){return"Code Scanner"},n.cameraPermissionTitle=function(){return"Request Camera Permissions"},n.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},n.noCameraFound=function(){return"No camera found"},n.scanButtonStopScanningText=function(){return"Stop Scanning"},n.scanButtonStartScanningText=function(){return"Start Scanning"},n.torchOnButton=function(){return"Switch On Torch"},n.torchOffButton=function(){return"Switch Off Torch"},n.torchOnFailedMessage=function(){return"Failed to turn on torch"},n.torchOffFailedMessage=function(){return"Failed to turn off torch"},n.scanButtonScanningStarting=function(){return"Launching Camera..."},n.textIfCameraScanSelected=function(){return"Scan an Image File"},n.textIfFileScanSelected=function(){return"Scan using camera directly"},n.selectCamera=function(){return"Select Camera"},n.fileSelectionChooseImage=function(){return"Choose Image"},n.fileSelectionChooseAnother=function(){return"Choose Another"},n.fileSelectionNoImageSelected=function(){return"No image choosen"},n.anonymousCameraPrefix=function(){return"Anonymous Camera"},n.dragAndDropMessage=function(){return"Or drop an image to scan"},n.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},n.zoom=function(){return"zoom"},n.loadingImage=function(){return"Loading image..."},n.cameraScanAltText=function(){return"Camera based scan"},n.fileScanAltText=function(){return"Fule based scan"},n}(),ip=function(){function n(){}return n.poweredBy=function(){return"Powered by "},n.reportIssues=function(){return"Report issues"},n}(),L1=function(){function n(){}return n.isMediaStreamConstraintsValid=function(c,o){if(typeof c!="object"){var x=typeof c;return o.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(x,"."),!0),!1}for(var f=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],g=new Set(f),y=Object.keys(c),j=0,k=y;j<k.length;j++){var b=k[j];if(g.has(b))return o.logError("".concat(b," is not supported videoConstaints."),!0),!1}return!0},n}(),Po={exports:{}},B3=Po.exports,op;function L3(){return op||(op=1,function(n,c){(function(o,x){x(c)})(B3,function(o){function x(V){return V==null}var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(V,a){V.__proto__=a}||function(V,a){for(var s in a)a.hasOwnProperty(s)&&(V[s]=a[s])};function g(V,a){f(V,a);function s(){this.constructor=V}V.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}function y(V,a){var s=Object.setPrototypeOf;s?s(V,a):V.__proto__=a}function j(V,a){a===void 0&&(a=V.constructor);var s=Error.captureStackTrace;s&&s(V,a)}var k=function(V){g(a,V);function a(s){var l=this.constructor,d=V.call(this,s)||this;return Object.defineProperty(d,"name",{value:l.name,enumerable:!1}),y(d,l.prototype),j(d),d}return a}(Error);class b extends k{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}b.kind="Exception";class S extends b{}S.kind="ArgumentException";class E extends b{}E.kind="IllegalArgumentException";class _{constructor(a){if(this.binarizer=a,a===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,s){return this.binarizer.getBlackRow(a,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,s,l,d){const u=this.binarizer.getLuminanceSource().crop(a,s,l,d);return new _(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new _(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new _(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class T extends b{static getChecksumInstance(){return new T}}T.kind="ChecksumException";class O{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class M{static arraycopy(a,s,l,d,u){for(;u--;)l[d++]=a[s++]}static currentTimeMillis(){return Date.now()}}class z extends b{}z.kind="IndexOutOfBoundsException";class I extends z{constructor(a=void 0,s=void 0){super(s),this.index=a,this.message=s}}I.kind="ArrayIndexOutOfBoundsException";class L{static fill(a,s){for(let l=0,d=a.length;l<d;l++)a[l]=s}static fillWithin(a,s,l,d){L.rangeCheck(a.length,s,l);for(let u=s;u<l;u++)a[u]=d}static rangeCheck(a,s,l){if(s>l)throw new E("fromIndex("+s+") > toIndex("+l+")");if(s<0)throw new I(s);if(l>a)throw new I(l)}static asList(...a){return a}static create(a,s,l){return Array.from({length:a}).map(u=>Array.from({length:s}).fill(l))}static createInt32Array(a,s,l){return Array.from({length:a}).map(u=>Int32Array.from({length:s}).fill(l))}static equals(a,s){if(!a||!s||!a.length||!s.length||a.length!==s.length)return!1;for(let l=0,d=a.length;l<d;l++)if(a[l]!==s[l])return!1;return!0}static hashCode(a){if(a===null)return 0;let s=1;for(const l of a)s=31*s+l;return s}static fillUint8Array(a,s){for(let l=0;l!==a.length;l++)a[l]=s}static copyOf(a,s){return a.slice(0,s)}static copyOfUint8Array(a,s){if(a.length<=s){const l=new Uint8Array(s);return l.set(a),l}return a.slice(0,s)}static copyOfRange(a,s,l){const d=l-s,u=new Int32Array(d);return M.arraycopy(a,s,u,0,d),u}static binarySearch(a,s,l){l===void 0&&(l=L.numberComparator);let d=0,u=a.length-1;for(;d<=u;){const m=u+d>>1,p=l(s,a[m]);if(p>0)d=m+1;else if(p<0)u=m-1;else return m}return-d-1}static numberComparator(a,s){return a-s}}class D{static numberOfTrailingZeros(a){let s;if(a===0)return 32;let l=31;return s=a<<16,s!==0&&(l-=16,a=s),s=a<<8,s!==0&&(l-=8,a=s),s=a<<4,s!==0&&(l-=4,a=s),s=a<<2,s!==0&&(l-=2,a=s),l-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let s=1;return a>>>16||(s+=16,a<<=16),a>>>24||(s+=8,a<<=8),a>>>28||(s+=4,a<<=4),a>>>30||(s+=2,a<<=2),s-=a>>>31,s}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,s){return Math.trunc(a/s)}static parseInt(a,s=void 0){return parseInt(a,s)}}D.MIN_VALUE_32_BITS=-2147483648,D.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(a,s){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,s==null?this.bits=B.makeArray(a):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const s=B.makeArray(a);M.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const s=this.size;if(a>=s)return s;const l=this.bits;let d=Math.floor(a/32),u=l[d];u&=~((1<<(a&31))-1);const m=l.length;for(;u===0;){if(++d===m)return s;u=l[d]}const p=d*32+D.numberOfTrailingZeros(u);return p>s?s:p}getNextUnset(a){const s=this.size;if(a>=s)return s;const l=this.bits;let d=Math.floor(a/32),u=~l[d];u&=~((1<<(a&31))-1);const m=l.length;for(;u===0;){if(++d===m)return s;u=~l[d]}const p=d*32+D.numberOfTrailingZeros(u);return p>s?s:p}setBulk(a,s){this.bits[Math.floor(a/32)]=s}setRange(a,s){if(s<a||a<0||s>this.size)throw new E;if(s===a)return;s--;const l=Math.floor(a/32),d=Math.floor(s/32),u=this.bits;for(let m=l;m<=d;m++){const p=m>l?0:a&31,A=(2<<(m<d?31:s&31))-(1<<p);u[m]|=A}}clear(){const a=this.bits.length,s=this.bits;for(let l=0;l<a;l++)s[l]=0}isRange(a,s,l){if(s<a||a<0||s>this.size)throw new E;if(s===a)return!0;s--;const d=Math.floor(a/32),u=Math.floor(s/32),m=this.bits;for(let p=d;p<=u;p++){const v=p>d?0:a&31,R=(2<<(p<u?31:s&31))-(1<<v)&4294967295;if((m[p]&R)!==(l?R:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let l=s;l>0;l--)this.appendBit((a>>l-1&1)===1)}appendBitArray(a){const s=a.size;this.ensureCapacity(this.size+s);for(let l=0;l<s;l++)this.appendBit(a.get(l))}xor(a){if(this.size!==a.size)throw new E("Sizes don't match");const s=this.bits;for(let l=0,d=s.length;l<d;l++)s[l]^=a.bits[l]}toBytes(a,s,l,d){for(let u=0;u<d;u++){let m=0;for(let p=0;p<8;p++)this.get(a)&&(m|=1<<7-p),a++;s[l+u]=m}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),l=s+1,d=this.bits;for(let u=0;u<l;u++){let m=d[u];m=m>>1&1431655765|(m&1431655765)<<1,m=m>>2&858993459|(m&858993459)<<2,m=m>>4&252645135|(m&252645135)<<4,m=m>>8&16711935|(m&16711935)<<8,m=m>>16&65535|(m&65535)<<16,a[s-u]=m}if(this.size!==l*32){const u=l*32-this.size;let m=a[0]>>>u;for(let p=1;p<l;p++){const v=a[p];m|=v<<32-u,a[p-1]=m,m=v>>>u}a[l-1]=m}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof B))return!1;const s=a;return this.size===s.size&&L.equals(this.bits,s.bits)}hashCode(){return 31*this.size+L.hashCode(this.bits)}toString(){let a="";for(let s=0,l=this.size;s<l;s++)(s&7)===0&&(a+=" "),a+=this.get(s)?"X":".";return a}clone(){return new B(this.size,this.bits.slice())}}var Y;(function(V){V[V.OTHER=0]="OTHER",V[V.PURE_BARCODE=1]="PURE_BARCODE",V[V.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",V[V.TRY_HARDER=3]="TRY_HARDER",V[V.CHARACTER_SET=4]="CHARACTER_SET",V[V.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",V[V.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",V[V.ASSUME_GS1=7]="ASSUME_GS1",V[V.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",V[V.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",V[V.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Y||(Y={}));var X=Y;class U extends b{static getFormatInstance(){return new U}}U.kind="FormatException";var G;(function(V){V[V.Cp437=0]="Cp437",V[V.ISO8859_1=1]="ISO8859_1",V[V.ISO8859_2=2]="ISO8859_2",V[V.ISO8859_3=3]="ISO8859_3",V[V.ISO8859_4=4]="ISO8859_4",V[V.ISO8859_5=5]="ISO8859_5",V[V.ISO8859_6=6]="ISO8859_6",V[V.ISO8859_7=7]="ISO8859_7",V[V.ISO8859_8=8]="ISO8859_8",V[V.ISO8859_9=9]="ISO8859_9",V[V.ISO8859_10=10]="ISO8859_10",V[V.ISO8859_11=11]="ISO8859_11",V[V.ISO8859_13=12]="ISO8859_13",V[V.ISO8859_14=13]="ISO8859_14",V[V.ISO8859_15=14]="ISO8859_15",V[V.ISO8859_16=15]="ISO8859_16",V[V.SJIS=16]="SJIS",V[V.Cp1250=17]="Cp1250",V[V.Cp1251=18]="Cp1251",V[V.Cp1252=19]="Cp1252",V[V.Cp1256=20]="Cp1256",V[V.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",V[V.UTF8=22]="UTF8",V[V.ASCII=23]="ASCII",V[V.Big5=24]="Big5",V[V.GB18030=25]="GB18030",V[V.EUC_KR=26]="EUC_KR"})(G||(G={}));class Q{constructor(a,s,l,...d){this.valueIdentifier=a,this.name=l,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=d,Q.VALUE_IDENTIFIER_TO_ECI.set(a,this),Q.NAME_TO_ECI.set(l,this);const u=this.values;for(let m=0,p=u.length;m!==p;m++){const v=u[m];Q.VALUES_TO_ECI.set(v,this)}for(const m of d)Q.NAME_TO_ECI.set(m,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new U("incorect value");const s=Q.VALUES_TO_ECI.get(a);if(s===void 0)throw new U("incorect value");return s}static getCharacterSetECIByName(a){const s=Q.NAME_TO_ECI.get(a);if(s===void 0)throw new U("incorect value");return s}equals(a){if(!(a instanceof Q))return!1;const s=a;return this.getName()===s.getName()}}Q.VALUE_IDENTIFIER_TO_ECI=new Map,Q.VALUES_TO_ECI=new Map,Q.NAME_TO_ECI=new Map,Q.Cp437=new Q(G.Cp437,Int32Array.from([0,2]),"Cp437"),Q.ISO8859_1=new Q(G.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Q.ISO8859_2=new Q(G.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Q.ISO8859_3=new Q(G.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Q.ISO8859_4=new Q(G.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Q.ISO8859_5=new Q(G.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Q.ISO8859_6=new Q(G.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Q.ISO8859_7=new Q(G.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Q.ISO8859_8=new Q(G.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Q.ISO8859_9=new Q(G.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Q.ISO8859_10=new Q(G.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Q.ISO8859_11=new Q(G.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Q.ISO8859_13=new Q(G.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Q.ISO8859_14=new Q(G.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Q.ISO8859_15=new Q(G.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Q.ISO8859_16=new Q(G.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Q.SJIS=new Q(G.SJIS,20,"SJIS","Shift_JIS"),Q.Cp1250=new Q(G.Cp1250,21,"Cp1250","windows-1250"),Q.Cp1251=new Q(G.Cp1251,22,"Cp1251","windows-1251"),Q.Cp1252=new Q(G.Cp1252,23,"Cp1252","windows-1252"),Q.Cp1256=new Q(G.Cp1256,24,"Cp1256","windows-1256"),Q.UnicodeBigUnmarked=new Q(G.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Q.UTF8=new Q(G.UTF8,26,"UTF8","UTF-8"),Q.ASCII=new Q(G.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Q.Big5=new Q(G.Big5,28,"Big5"),Q.GB18030=new Q(G.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Q.EUC_KR=new Q(G.EUC_KR,30,"EUC_KR","EUC-KR");class le extends b{}le.kind="UnsupportedOperationException";class ce{static decode(a,s){const l=this.encodingName(s);return this.customDecoder?this.customDecoder(a,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(a,l):new TextDecoder(l).decode(a)}static shouldDecodeOnFallback(a){return!ce.isBrowser()&&a==="ISO-8859-1"}static encode(a,s){const l=this.encodingName(s);return this.customEncoder?this.customEncoder(a,l):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof Q?a:Q.getCharacterSetECIByName(a)}static decodeFallback(a,s){const l=this.encodingCharacterSet(s);if(ce.isDecodeFallbackSupported(l)){let d="";for(let u=0,m=a.length;u<m;u++){let p=a[u].toString(16);p.length<2&&(p="0"+p),d+="%"+p}return decodeURIComponent(d)}if(l.equals(Q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new le(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(Q.UTF8)||a.equals(Q.ISO8859_1)||a.equals(Q.ASCII)}static encodeFallback(a){const l=btoa(unescape(encodeURIComponent(a))).split(""),d=[];for(let u=0;u<l.length;u++)d.push(l[u].charCodeAt(0));return new Uint8Array(d)}}class te{static castAsNonUtf8Char(a,s=null){const l=s?s.getName():this.ISO88591;return ce.decode(new Uint8Array([a]),l)}static guessEncoding(a,s){if(s!=null&&s.get(X.CHARACTER_SET)!==void 0)return s.get(X.CHARACTER_SET).toString();const l=a.length;let d=!0,u=!0,m=!0,p=0,v=0,A=0,R=0,q=0,Z=0,ie=0,ge=0,ye=0,Se=0,Re=0;const Xe=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let $e=0;$e<l&&(d||u||m);$e++){const Ye=a[$e]&255;m&&(p>0?(Ye&128)===0?m=!1:p--:(Ye&128)!==0&&((Ye&64)===0?m=!1:(p++,(Ye&32)===0?v++:(p++,(Ye&16)===0?A++:(p++,(Ye&8)===0?R++:m=!1))))),d&&(Ye>127&&Ye<160?d=!1:Ye>159&&(Ye<192||Ye===215||Ye===247)&&Re++),u&&(q>0?Ye<64||Ye===127||Ye>252?u=!1:q--:Ye===128||Ye===160||Ye>239?u=!1:Ye>160&&Ye<224?(Z++,ge=0,ie++,ie>ye&&(ye=ie)):Ye>127?(q++,ie=0,ge++,ge>Se&&(Se=ge)):(ie=0,ge=0))}return m&&p>0&&(m=!1),u&&q>0&&(u=!1),m&&(Xe||v+A+R>0)?te.UTF8:u&&(te.ASSUME_SHIFT_JIS||ye>=3||Se>=3)?te.SHIFT_JIS:d&&u?ye===2&&Z===2||Re*10>=l?te.SHIFT_JIS:te.ISO88591:d?te.ISO88591:u?te.SHIFT_JIS:m?te.UTF8:te.PLATFORM_DEFAULT_ENCODING}static format(a,...s){let l=-1;function d(m,p,v,A,R,q){if(m==="%%")return"%";if(s[++l]===void 0)return;m=A?parseInt(A.substr(1)):void 0;let Z=R?parseInt(R.substr(1)):void 0,ie;switch(q){case"s":ie=s[l];break;case"c":ie=s[l][0];break;case"f":ie=parseFloat(s[l]).toFixed(m);break;case"p":ie=parseFloat(s[l]).toPrecision(m);break;case"e":ie=parseFloat(s[l]).toExponential(m);break;case"x":ie=parseInt(s[l]).toString(Z||16);break;case"d":ie=parseFloat(parseInt(s[l],Z||10).toPrecision(m)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(Z);let ge=parseInt(v),ye=v&&v[0]+""=="0"?"0":" ";for(;ie.length<ge;)ie=p!==void 0?ie+ye:ye+ie;return ie}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(u,d)}static getBytes(a,s){return ce.encode(a,s)}static getCharCode(a,s=0){return a.charCodeAt(s)}static getCharAt(a){return String.fromCharCode(a)}}te.SHIFT_JIS=Q.SJIS.getName(),te.GB2312="GB2312",te.ISO88591=Q.ISO8859_1.getName(),te.EUC_JP="EUC_JP",te.UTF8=Q.UTF8.getName(),te.PLATFORM_DEFAULT_ENCODING=te.UTF8,te.ASSUME_SHIFT_JIS=!1;class re{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=te.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,s,l){for(let d=s;s<s+l;d++)this.append(a[d]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,s){this.value=this.value.substr(0,a)+s+this.value.substr(a+1)}substring(a,s){return this.value.substring(a,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,s){this.value=this.value.substr(0,a)+s+this.value.substr(a+s.length)}}class W{constructor(a,s,l,d){if(this.width=a,this.height=s,this.rowSize=l,this.bits=d,s==null&&(s=a),this.height=s,a<1||s<1)throw new E("Both dimensions must be greater than 0");l==null&&(l=Math.floor((a+31)/32)),this.rowSize=l,d==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const s=a.length,l=a[0].length,d=new W(l,s);for(let u=0;u<s;u++){const m=a[u];for(let p=0;p<l;p++)m[p]&&d.set(p,u)}return d}static parseFromString(a,s,l){if(a===null)throw new E("stringRepresentation cannot be null");const d=new Array(a.length);let u=0,m=0,p=-1,v=0,A=0;for(;A<a.length;)if(a.charAt(A)===`
`||a.charAt(A)==="\r"){if(u>m){if(p===-1)p=u-m;else if(u-m!==p)throw new E("row lengths do not match");m=u,v++}A++}else if(a.substring(A,A+s.length)===s)A+=s.length,d[u]=!0,u++;else if(a.substring(A,A+l.length)===l)A+=l.length,d[u]=!1,u++;else throw new E("illegal character encountered: "+a.substring(A));if(u>m){if(p===-1)p=u-m;else if(u-m!==p)throw new E("row lengths do not match");v++}const R=new W(p,v);for(let q=0;q<u;q++)d[q]&&R.set(Math.floor(q%p),Math.floor(q/p));return R}get(a,s){const l=s*this.rowSize+Math.floor(a/32);return(this.bits[l]>>>(a&31)&1)!==0}set(a,s){const l=s*this.rowSize+Math.floor(a/32);this.bits[l]|=1<<(a&31)&4294967295}unset(a,s){const l=s*this.rowSize+Math.floor(a/32);this.bits[l]&=~(1<<(a&31)&4294967295)}flip(a,s){const l=s*this.rowSize+Math.floor(a/32);this.bits[l]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new E("input matrix dimensions do not match");const s=new B(Math.floor(this.width/32)+1),l=this.rowSize,d=this.bits;for(let u=0,m=this.height;u<m;u++){const p=u*l,v=a.getRow(u,s).getBitArray();for(let A=0;A<l;A++)d[p+A]^=v[A]}}clear(){const a=this.bits,s=a.length;for(let l=0;l<s;l++)a[l]=0}setRegion(a,s,l,d){if(s<0||a<0)throw new E("Left and top must be nonnegative");if(d<1||l<1)throw new E("Height and width must be at least 1");const u=a+l,m=s+d;if(m>this.height||u>this.width)throw new E("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let A=s;A<m;A++){const R=A*p;for(let q=a;q<u;q++)v[R+Math.floor(q/32)]|=1<<(q&31)&4294967295}}getRow(a,s){s==null||s.getSize()<this.width?s=new B(this.width):s.clear();const l=this.rowSize,d=this.bits,u=a*l;for(let m=0;m<l;m++)s.setBulk(m*32,d[u+m]);return s}setRow(a,s){M.arraycopy(s.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),s=this.getHeight();let l=new B(a),d=new B(a);for(let u=0,m=Math.floor((s+1)/2);u<m;u++)l=this.getRow(u,l),d=this.getRow(s-1-u,d),l.reverse(),d.reverse(),this.setRow(u,d),this.setRow(s-1-u,l)}getEnclosingRectangle(){const a=this.width,s=this.height,l=this.rowSize,d=this.bits;let u=a,m=s,p=-1,v=-1;for(let A=0;A<s;A++)for(let R=0;R<l;R++){const q=d[A*l+R];if(q!==0){if(A<m&&(m=A),A>v&&(v=A),R*32<u){let Z=0;for(;(q<<31-Z&4294967295)===0;)Z++;R*32+Z<u&&(u=R*32+Z)}if(R*32+31>p){let Z=31;for(;!(q>>>Z);)Z--;R*32+Z>p&&(p=R*32+Z)}}}return p<u||v<m?null:Int32Array.from([u,m,p-u+1,v-m+1])}getTopLeftOnBit(){const a=this.rowSize,s=this.bits;let l=0;for(;l<s.length&&s[l]===0;)l++;if(l===s.length)return null;const d=l/a;let u=l%a*32;const m=s[l];let p=0;for(;(m<<31-p&4294967295)===0;)p++;return u+=p,Int32Array.from([u,d])}getBottomRightOnBit(){const a=this.rowSize,s=this.bits;let l=s.length-1;for(;l>=0&&s[l]===0;)l--;if(l<0)return null;const d=Math.floor(l/a);let u=Math.floor(l%a)*32;const m=s[l];let p=31;for(;!(m>>>p);)p--;return u+=p,Int32Array.from([u,d])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof W))return!1;const s=a;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&L.equals(this.bits,s.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+L.hashCode(this.bits),a}toString(a="X ",s="  ",l=`
`){return this.buildToString(a,s,l)}buildToString(a,s,l){let d=new re;for(let u=0,m=this.height;u<m;u++){for(let p=0,v=this.width;p<v;p++)d.append(this.get(p,u)?a:s);d.append(l)}return d.toString()}clone(){return new W(this.width,this.height,this.rowSize,this.bits.slice())}}class P extends b{static getNotFoundInstance(){return new P}}P.kind="NotFoundException";class $ extends O{constructor(a){super(a),this.luminances=$.EMPTY,this.buckets=new Int32Array($.LUMINANCE_BUCKETS)}getBlackRow(a,s){const l=this.getLuminanceSource(),d=l.getWidth();s==null||s.getSize()<d?s=new B(d):s.clear(),this.initArrays(d);const u=l.getRow(a,this.luminances),m=this.buckets;for(let v=0;v<d;v++)m[(u[v]&255)>>$.LUMINANCE_SHIFT]++;const p=$.estimateBlackPoint(m);if(d<3)for(let v=0;v<d;v++)(u[v]&255)<p&&s.set(v);else{let v=u[0]&255,A=u[1]&255;for(let R=1;R<d-1;R++){const q=u[R+1]&255;(A*4-v-q)/2<p&&s.set(R),v=A,A=q}}return s}getBlackMatrix(){const a=this.getLuminanceSource(),s=a.getWidth(),l=a.getHeight(),d=new W(s,l);this.initArrays(s);const u=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(l*v/5),R=a.getRow(A,this.luminances),q=Math.floor(s*4/5);for(let Z=Math.floor(s/5);Z<q;Z++){const ie=R[Z]&255;u[ie>>$.LUMINANCE_SHIFT]++}}const m=$.estimateBlackPoint(u),p=a.getMatrix();for(let v=0;v<l;v++){const A=v*s;for(let R=0;R<s;R++)(p[A+R]&255)<m&&d.set(R,v)}return d}createBinarizer(a){return new $(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const s=this.buckets;for(let l=0;l<$.LUMINANCE_BUCKETS;l++)s[l]=0}static estimateBlackPoint(a){const s=a.length;let l=0,d=0,u=0;for(let R=0;R<s;R++)a[R]>u&&(d=R,u=a[R]),a[R]>l&&(l=a[R]);let m=0,p=0;for(let R=0;R<s;R++){const q=R-d,Z=a[R]*q*q;Z>p&&(m=R,p=Z)}if(d>m){const R=d;d=m,m=R}if(m-d<=s/16)throw new P;let v=m-1,A=-1;for(let R=m-1;R>d;R--){const q=R-d,Z=q*q*(m-R)*(l-a[R]);Z>A&&(v=R,A=Z)}return v<<$.LUMINANCE_SHIFT}}$.LUMINANCE_BITS=5,$.LUMINANCE_SHIFT=8-$.LUMINANCE_BITS,$.LUMINANCE_BUCKETS=1<<$.LUMINANCE_BITS,$.EMPTY=Uint8ClampedArray.from([0]);class ne extends ${constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),s=a.getWidth(),l=a.getHeight();if(s>=ne.MINIMUM_DIMENSION&&l>=ne.MINIMUM_DIMENSION){const d=a.getMatrix();let u=s>>ne.BLOCK_SIZE_POWER;(s&ne.BLOCK_SIZE_MASK)!==0&&u++;let m=l>>ne.BLOCK_SIZE_POWER;(l&ne.BLOCK_SIZE_MASK)!==0&&m++;const p=ne.calculateBlackPoints(d,u,m,s,l),v=new W(s,l);ne.calculateThresholdForBlock(d,u,m,s,l,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new ne(a)}static calculateThresholdForBlock(a,s,l,d,u,m,p){const v=u-ne.BLOCK_SIZE,A=d-ne.BLOCK_SIZE;for(let R=0;R<l;R++){let q=R<<ne.BLOCK_SIZE_POWER;q>v&&(q=v);const Z=ne.cap(R,2,l-3);for(let ie=0;ie<s;ie++){let ge=ie<<ne.BLOCK_SIZE_POWER;ge>A&&(ge=A);const ye=ne.cap(ie,2,s-3);let Se=0;for(let Xe=-2;Xe<=2;Xe++){const $e=m[Z+Xe];Se+=$e[ye-2]+$e[ye-1]+$e[ye]+$e[ye+1]+$e[ye+2]}const Re=Se/25;ne.thresholdBlock(a,ge,q,Re,d,p)}}}static cap(a,s,l){return a<s?s:a>l?l:a}static thresholdBlock(a,s,l,d,u,m){for(let p=0,v=l*u+s;p<ne.BLOCK_SIZE;p++,v+=u)for(let A=0;A<ne.BLOCK_SIZE;A++)(a[v+A]&255)<=d&&m.set(s+A,l+p)}static calculateBlackPoints(a,s,l,d,u){const m=u-ne.BLOCK_SIZE,p=d-ne.BLOCK_SIZE,v=new Array(l);for(let A=0;A<l;A++){v[A]=new Int32Array(s);let R=A<<ne.BLOCK_SIZE_POWER;R>m&&(R=m);for(let q=0;q<s;q++){let Z=q<<ne.BLOCK_SIZE_POWER;Z>p&&(Z=p);let ie=0,ge=255,ye=0;for(let Re=0,Xe=R*d+Z;Re<ne.BLOCK_SIZE;Re++,Xe+=d){for(let $e=0;$e<ne.BLOCK_SIZE;$e++){const Ye=a[Xe+$e]&255;ie+=Ye,Ye<ge&&(ge=Ye),Ye>ye&&(ye=Ye)}if(ye-ge>ne.MIN_DYNAMIC_RANGE)for(Re++,Xe+=d;Re<ne.BLOCK_SIZE;Re++,Xe+=d)for(let $e=0;$e<ne.BLOCK_SIZE;$e++)ie+=a[Xe+$e]&255}let Se=ie>>ne.BLOCK_SIZE_POWER*2;if(ye-ge<=ne.MIN_DYNAMIC_RANGE&&(Se=ge/2,A>0&&q>0)){const Re=(v[A-1][q]+2*v[A][q-1]+v[A-1][q-1])/4;ge<Re&&(Se=Re)}v[A][q]=Se}}return v}}ne.BLOCK_SIZE_POWER=3,ne.BLOCK_SIZE=1<<ne.BLOCK_SIZE_POWER,ne.BLOCK_SIZE_MASK=ne.BLOCK_SIZE-1,ne.MINIMUM_DIMENSION=ne.BLOCK_SIZE*5,ne.MIN_DYNAMIC_RANGE=24;class de{constructor(a,s){this.width=a,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,s,l,d){throw new le("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new le("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new le("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let s=new re;for(let l=0;l<this.height;l++){const d=this.getRow(l,a);for(let u=0;u<this.width;u++){const m=d[u]&255;let p;m<64?p="#":m<128?p="+":m<192?p=".":p=" ",s.append(p)}s.append(`
`)}return s.toString()}}class Ce extends de{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,s){const l=this.delegate.getRow(a,s),d=this.getWidth();for(let u=0;u<d;u++)l[u]=255-(l[u]&255);return l}getMatrix(){const a=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(s);for(let d=0;d<s;d++)l[d]=255-(a[d]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(a,s,l,d){return new Ce(this.delegate.crop(a,s,l,d))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Ce(this.delegate.rotateCounterClockwise45())}}class ee extends de{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=ee.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const s=a.getContext("2d").getImageData(0,0,a.width,a.height);return ee.toGrayscaleBuffer(s.data,a.width,a.height)}static toGrayscaleBuffer(a,s,l){const d=new Uint8ClampedArray(s*l);for(let u=0,m=0,p=a.length;u<p;u+=4,m++){let v;if(a[u+3]===0)v=255;else{const R=a[u],q=a[u+1],Z=a[u+2];v=306*R+601*q+117*Z+512>>10}d[m]=v}return d}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const l=this.getWidth(),d=a*l;return s===null?s=this.buffer.slice(d,d+l):(s.length<l&&(s=new Uint8ClampedArray(l)),s.set(this.buffer.slice(d,d+l))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,s,l,d){return super.crop(a,s,l,d),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const s=this.getTempCanvasElement(),l=s.getContext("2d"),d=a*ee.DEGREE_TO_RADIANS,u=this.canvas.width,m=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(d))*u+Math.abs(Math.sin(d))*m),v=Math.ceil(Math.abs(Math.sin(d))*u+Math.abs(Math.cos(d))*m);return s.width=p,s.height=v,l.translate(p/2,v/2),l.rotate(d),l.drawImage(this.canvas,u/-2,m/-2),this.buffer=ee.makeBufferFromCanvasImageData(s),this}invert(){return new Ce(this)}}ee.DEGREE_TO_RADIANS=Math.PI/180;class H{constructor(a,s,l){this.deviceId=a,this.label=s,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var me=(globalThis||hd||self||window||void 0)&&(globalThis||hd||self||window||void 0).__awaiter||function(V,a,s,l){function d(u){return u instanceof s?u:new s(function(m){m(u)})}return new(s||(s=Promise))(function(u,m){function p(R){try{A(l.next(R))}catch(q){m(q)}}function v(R){try{A(l.throw(R))}catch(q){m(q)}}function A(R){R.done?u(R.value):d(R.value).then(p,v)}A((l=l.apply(V,a||[])).next())})};class ae{constructor(a,s=500,l){this.reader=a,this.timeBetweenScansMillis=s,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return me(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const l of a){const d=l.kind==="video"?"videoinput":l.kind;if(d!=="videoinput")continue;const u=l.deviceId||l.id,m=l.label||`Video device ${s.length+1}`,p=l.groupId,v={deviceId:u,label:m,kind:d,groupId:p};s.push(v)}return s})}getVideoInputDevices(){return me(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new H(s.deviceId,s.label))})}findDeviceById(a){return me(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(l=>l.deviceId===a):null})}decodeFromInputVideoDevice(a,s){return me(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,s)})}decodeOnceFromVideoDevice(a,s){return me(this,void 0,void 0,function*(){this.reset();let l;a?l={deviceId:{exact:a}}:l={facingMode:"environment"};const d={video:l};return yield this.decodeOnceFromConstraints(d,s)})}decodeOnceFromConstraints(a,s){return me(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(l,s)})}decodeOnceFromStream(a,s){return me(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(a,s);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(a,s,l){return me(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,s,l)})}decodeFromVideoDevice(a,s,l){return me(this,void 0,void 0,function*(){let d;a?d={deviceId:{exact:a}}:d={facingMode:"environment"};const u={video:d};return yield this.decodeFromConstraints(u,s,l)})}decodeFromConstraints(a,s,l){return me(this,void 0,void 0,function*(){const d=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(d,s,l)})}decodeFromStream(a,s,l){return me(this,void 0,void 0,function*(){this.reset();const d=yield this.attachStreamToVideo(a,s);return yield this.decodeContinuously(d,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,s){return me(this,void 0,void 0,function*(){const l=this.prepareVideoElement(s);return this.addVideoSource(l,a),this.videoElement=l,this.stream=a,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(a){return new Promise((s,l)=>this.playVideoOnLoad(a,()=>s()))}playVideoOnLoad(a,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",s),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return me(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,s){const l=document.getElementById(a);if(!l)throw new S(`element with id '${a}' not found`);if(l.nodeName.toLowerCase()!==s.toLowerCase())throw new S(`element with id '${a}' must be an ${s} element`);return l}decodeFromImage(a,s){if(!a&&!s)throw new S("either imageElement with a src set or an url must be provided");return s&&!a?this.decodeFromImageUrl(s):this.decodeFromImageElement(a)}decodeFromVideo(a,s){if(!a&&!s)throw new S("Either an element with a src set or an URL must be provided");return s&&!a?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,s,l){if(a===void 0&&s===void 0)throw new S("Either an element with a src set or an URL must be provided");return s&&!a?this.decodeFromVideoUrlContinuously(s,l):this.decodeFromVideoElementContinuously(a,l)}decodeFromImageElement(a){if(!a)throw new S("An image element must be provided.");this.reset();const s=this.prepareImageElement(a);this.imageElement=s;let l;return this.isImageLoaded(s)?l=this.decodeOnce(s,!1,!0):l=this._decodeOnLoadImage(s),l}decodeFromVideoElement(a){const s=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(a,s){const l=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(l,s)}_decodeFromVideoElementSetup(a){if(!a)throw new S("A video element must be provided.");this.reset();const s=this.prepareVideoElement(a);return this.videoElement=s,s}decodeFromImageUrl(a){if(!a)throw new S("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const l=this._decodeOnLoadImage(s);return s.src=a,l}decodeFromVideoUrl(a){if(!a)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),l=this.decodeFromVideoElement(s);return s.src=a,l}decodeFromVideoUrlContinuously(a,s){if(!a)throw new S("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),d=this.decodeFromVideoElementContinuously(l,s);return l.src=a,d}_decodeOnLoadImage(a){return new Promise((s,l)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(s,l),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return me(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,s){return me(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,s)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let s;return typeof a>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof a=="string"&&(s=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(s=a),s}prepareVideoElement(a){let s;return!a&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof a=="string"&&(s=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(s=a),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(a,s=!0,l=!0){this._stopAsyncDecode=!1;const d=(u,m)=>{if(this._stopAsyncDecode){m(new P("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(a);u(p)}catch(p){const v=s&&p instanceof P,R=(p instanceof T||p instanceof U)&&l;if(v||R)return setTimeout(d,this._timeBetweenDecodingAttempts,u,m);m(p)}};return new Promise((u,m)=>d(u,m))}decodeContinuously(a,s){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const d=this.decode(a);s(d,null),setTimeout(l,this.timeBetweenScansMillis)}catch(d){s(null,d);const u=d instanceof T||d instanceof U,m=d instanceof P;(u||m)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(a){const s=this.createBinaryBitmap(a);return this.decodeBitmap(s)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,s,l){s||(s={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(a,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(a,s,l=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(a,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const s=this.getCaptureCanvas(a),l=new ee(s),d=new ne(l);return new _(d)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const s=this.createCaptureCanvas(a);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let l,d;return typeof a<"u"&&(a instanceof HTMLVideoElement?(l=a.videoWidth,d=a.videoHeight):a instanceof HTMLImageElement&&(l=a.naturalWidth||a.width,d=a.naturalHeight||a.height)),s.style.width=l+"px",s.style.height=d+"px",s.width=l,s.height=d,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,s){try{a.srcObject=s}catch{a.src=URL.createObjectURL(s)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class be{constructor(a,s,l=s==null?0:8*s.length,d,u,m=M.currentTimeMillis()){this.text=a,this.rawBytes=s,this.numBits=l,this.resultPoints=d,this.format=u,this.timestamp=m,this.text=a,this.rawBytes=s,l==null?this.numBits=s==null?0:8*s.length:this.numBits=l,this.resultPoints=d,this.format=u,this.resultMetadata=null,m==null?this.timestamp=M.currentTimeMillis():this.timestamp=m}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,s)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const s=this.resultPoints;if(s===null)this.resultPoints=a;else if(a!==null&&a.length>0){const l=new Array(s.length+a.length);M.arraycopy(s,0,l,0,s.length),M.arraycopy(a,0,l,s.length,a.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ze;(function(V){V[V.AZTEC=0]="AZTEC",V[V.CODABAR=1]="CODABAR",V[V.CODE_39=2]="CODE_39",V[V.CODE_93=3]="CODE_93",V[V.CODE_128=4]="CODE_128",V[V.DATA_MATRIX=5]="DATA_MATRIX",V[V.EAN_8=6]="EAN_8",V[V.EAN_13=7]="EAN_13",V[V.ITF=8]="ITF",V[V.MAXICODE=9]="MAXICODE",V[V.PDF_417=10]="PDF_417",V[V.QR_CODE=11]="QR_CODE",V[V.RSS_14=12]="RSS_14",V[V.RSS_EXPANDED=13]="RSS_EXPANDED",V[V.UPC_A=14]="UPC_A",V[V.UPC_E=15]="UPC_E",V[V.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var xe=ze,Ze;(function(V){V[V.OTHER=0]="OTHER",V[V.ORIENTATION=1]="ORIENTATION",V[V.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",V[V.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",V[V.ISSUE_NUMBER=4]="ISSUE_NUMBER",V[V.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",V[V.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",V[V.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",V[V.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",V[V.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",V[V.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ze||(Ze={}));var je=Ze;class Je{constructor(a,s,l,d,u=-1,m=-1){this.rawBytes=a,this.text=s,this.byteSegments=l,this.ecLevel=d,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=m,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Ke{exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}static addOrSubtract(a,s){return a^s}}class at{constructor(a,s){if(s.length===0)throw new E;this.field=a;const l=s.length;if(l>1&&s[0]===0){let d=1;for(;d<l&&s[d]===0;)d++;d===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-d),M.arraycopy(s,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const s=this.coefficients;let l;if(a===1){l=0;for(let m=0,p=s.length;m!==p;m++){const v=s[m];l=Ke.addOrSubtract(l,v)}return l}l=s[0];const d=s.length,u=this.field;for(let m=1;m<d;m++)l=Ke.addOrSubtract(u.multiply(a,l),s[m]);return l}addOrSubtract(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let s=this.coefficients,l=a.coefficients;if(s.length>l.length){const m=s;s=l,l=m}let d=new Int32Array(l.length);const u=l.length-s.length;M.arraycopy(l,0,d,0,u);for(let m=u;m<l.length;m++)d[m]=Ke.addOrSubtract(s[m-u],l[m]);return new at(this.field,d)}multiply(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const s=this.coefficients,l=s.length,d=a.coefficients,u=d.length,m=new Int32Array(l+u-1),p=this.field;for(let v=0;v<l;v++){const A=s[v];for(let R=0;R<u;R++)m[v+R]=Ke.addOrSubtract(m[v+R],p.multiply(A,d[R]))}return new at(p,m)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const s=this.coefficients.length,l=this.field,d=new Int32Array(s),u=this.coefficients;for(let m=0;m<s;m++)d[m]=l.multiply(u[m],a);return new at(l,d)}multiplyByMonomial(a,s){if(a<0)throw new E;if(s===0)return this.field.getZero();const l=this.coefficients,d=l.length,u=new Int32Array(d+a),m=this.field;for(let p=0;p<d;p++)u[p]=m.multiply(l[p],s);return new at(m,u)}divide(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new E("Divide by 0");const s=this.field;let l=s.getZero(),d=this;const u=a.getCoefficient(a.getDegree()),m=s.inverse(u);for(;d.getDegree()>=a.getDegree()&&!d.isZero();){const p=d.getDegree()-a.getDegree(),v=s.multiply(d.getCoefficient(d.getDegree()),m),A=a.multiplyByMonomial(p,v),R=s.buildMonomial(p,v);l=l.addOrSubtract(R),d=d.addOrSubtract(A)}return[l,d]}toString(){let a="";for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);if(l!==0){if(l<0?(a+=" - ",l=-l):a.length>0&&(a+=" + "),s===0||l!==1){const d=this.field.log(l);d===0?a+="1":d===1?a+="a":(a+="a^",a+=d)}s!==0&&(s===1?a+="x":(a+="x^",a+=s))}}return a}}class Ue extends b{}Ue.kind="ArithmeticException";class ve extends Ke{constructor(a,s,l){super(),this.primitive=a,this.size=s,this.generatorBase=l;const d=new Int32Array(s);let u=1;for(let p=0;p<s;p++)d[p]=u,u*=2,u>=s&&(u^=a,u&=s-1);this.expTable=d;const m=new Int32Array(s);for(let p=0;p<s-1;p++)m[d[p]]=p;this.logTable=m,this.zero=new at(this,Int32Array.from([0])),this.one=new at(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,s){if(a<0)throw new E;if(s===0)return this.zero;const l=new Int32Array(a+1);return l[0]=s,new at(this,l)}inverse(a){if(a===0)throw new Ue;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+D.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}ve.AZTEC_DATA_12=new ve(4201,4096,1),ve.AZTEC_DATA_10=new ve(1033,1024,1),ve.AZTEC_DATA_6=new ve(67,64,1),ve.AZTEC_PARAM=new ve(19,16,1),ve.QR_CODE_FIELD_256=new ve(285,256,0),ve.DATA_MATRIX_FIELD_256=new ve(301,256,1),ve.AZTEC_DATA_8=ve.DATA_MATRIX_FIELD_256,ve.MAXICODE_FIELD_64=ve.AZTEC_DATA_6;class he extends b{}he.kind="ReedSolomonException";class He extends b{}He.kind="IllegalStateException";class et{constructor(a){this.field=a}decode(a,s){const l=this.field,d=new at(l,a),u=new Int32Array(s);let m=!0;for(let ie=0;ie<s;ie++){const ge=d.evaluateAt(l.exp(ie+l.getGeneratorBase()));u[u.length-1-ie]=ge,ge!==0&&(m=!1)}if(m)return;const p=new at(l,u),v=this.runEuclideanAlgorithm(l.buildMonomial(s,1),p,s),A=v[0],R=v[1],q=this.findErrorLocations(A),Z=this.findErrorMagnitudes(R,q);for(let ie=0;ie<q.length;ie++){const ge=a.length-1-l.log(q[ie]);if(ge<0)throw new he("Bad error location");a[ge]=ve.addOrSubtract(a[ge],Z[ie])}}runEuclideanAlgorithm(a,s,l){if(a.getDegree()<s.getDegree()){const ie=a;a=s,s=ie}const d=this.field;let u=a,m=s,p=d.getZero(),v=d.getOne();for(;m.getDegree()>=(l/2|0);){let ie=u,ge=p;if(u=m,p=v,u.isZero())throw new he("r_{i-1} was zero");m=ie;let ye=d.getZero();const Se=u.getCoefficient(u.getDegree()),Re=d.inverse(Se);for(;m.getDegree()>=u.getDegree()&&!m.isZero();){const Xe=m.getDegree()-u.getDegree(),$e=d.multiply(m.getCoefficient(m.getDegree()),Re);ye=ye.addOrSubtract(d.buildMonomial(Xe,$e)),m=m.addOrSubtract(u.multiplyByMonomial(Xe,$e))}if(v=ye.multiply(p).addOrSubtract(ge),m.getDegree()>=u.getDegree())throw new He("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new he("sigmaTilde(0) was zero");const R=d.inverse(A),q=v.multiplyScalar(R),Z=m.multiplyScalar(R);return[q,Z]}findErrorLocations(a){const s=a.getDegree();if(s===1)return Int32Array.from([a.getCoefficient(1)]);const l=new Int32Array(s);let d=0;const u=this.field;for(let m=1;m<u.getSize()&&d<s;m++)a.evaluateAt(m)===0&&(l[d]=u.inverse(m),d++);if(d!==s)throw new he("Error locator degree does not match number of roots");return l}findErrorMagnitudes(a,s){const l=s.length,d=new Int32Array(l),u=this.field;for(let m=0;m<l;m++){const p=u.inverse(s[m]);let v=1;for(let A=0;A<l;A++)if(m!==A){const R=u.multiply(s[A],p),q=(R&1)===0?R|1:R&-2;v=u.multiply(v,q)}d[m]=u.multiply(a.evaluateAt(p),u.inverse(v)),u.getGeneratorBase()!==0&&(d[m]=u.multiply(d[m],p))}return d}}var Ne;(function(V){V[V.UPPER=0]="UPPER",V[V.LOWER=1]="LOWER",V[V.MIXED=2]="MIXED",V[V.DIGIT=3]="DIGIT",V[V.PUNCT=4]="PUNCT",V[V.BINARY=5]="BINARY"})(Ne||(Ne={}));class Te{decode(a){this.ddata=a;let s=a.getBits(),l=this.extractBits(s),d=this.correctBits(l),u=Te.convertBoolArrayToByteArray(d),m=Te.getEncodedData(d),p=new Je(u,m,null,null);return p.setNumBits(d.length),p}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let s=a.length,l=Ne.UPPER,d=Ne.UPPER,u="",m=0;for(;m<s;)if(d===Ne.BINARY){if(s-m<5)break;let p=Te.readCode(a,m,5);if(m+=5,p===0){if(s-m<11)break;p=Te.readCode(a,m,11)+31,m+=11}for(let v=0;v<p;v++){if(s-m<8){m=s;break}const A=Te.readCode(a,m,8);u+=te.castAsNonUtf8Char(A),m+=8}d=l}else{let p=d===Ne.DIGIT?4:5;if(s-m<p)break;let v=Te.readCode(a,m,p);m+=p;let A=Te.getCharacter(d,v);A.startsWith("CTRL_")?(l=d,d=Te.getTable(A.charAt(5)),A.charAt(6)==="L"&&(l=d)):(u+=A,d=l)}return u}static getTable(a){switch(a){case"L":return Ne.LOWER;case"P":return Ne.PUNCT;case"M":return Ne.MIXED;case"D":return Ne.DIGIT;case"B":return Ne.BINARY;case"U":default:return Ne.UPPER}}static getCharacter(a,s){switch(a){case Ne.UPPER:return Te.UPPER_TABLE[s];case Ne.LOWER:return Te.LOWER_TABLE[s];case Ne.MIXED:return Te.MIXED_TABLE[s];case Ne.PUNCT:return Te.PUNCT_TABLE[s];case Ne.DIGIT:return Te.DIGIT_TABLE[s];default:throw new He("Bad table")}}correctBits(a){let s,l;this.ddata.getNbLayers()<=2?(l=6,s=ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,s=ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,s=ve.AZTEC_DATA_10):(l=12,s=ve.AZTEC_DATA_12);let d=this.ddata.getNbDatablocks(),u=a.length/l;if(u<d)throw new U;let m=a.length%l,p=new Int32Array(u);for(let Z=0;Z<u;Z++,m+=l)p[Z]=Te.readCode(a,m,l);try{new et(s).decode(p,u-d)}catch(Z){throw new U(Z)}let v=(1<<l)-1,A=0;for(let Z=0;Z<d;Z++){let ie=p[Z];if(ie===0||ie===v)throw new U;(ie===1||ie===v-1)&&A++}let R=new Array(d*l-A),q=0;for(let Z=0;Z<d;Z++){let ie=p[Z];if(ie===1||ie===v-1)R.fill(ie>1,q,q+l-1),q+=l-1;else for(let ge=l-1;ge>=0;--ge)R[q++]=(ie&1<<ge)!==0}return R}extractBits(a){let s=this.ddata.isCompact(),l=this.ddata.getNbLayers(),d=(s?11:14)+l*4,u=new Int32Array(d),m=new Array(this.totalBitsInLayer(l,s));if(s)for(let p=0;p<u.length;p++)u[p]=p;else{let p=d+1+2*D.truncDivision(D.truncDivision(d,2)-1,15),v=d/2,A=D.truncDivision(p,2);for(let R=0;R<v;R++){let q=R+D.truncDivision(R,15);u[v-R-1]=A-q-1,u[v+R]=A+q+1}}for(let p=0,v=0;p<l;p++){let A=(l-p)*4+(s?9:12),R=p*2,q=d-1-R;for(let Z=0;Z<A;Z++){let ie=Z*2;for(let ge=0;ge<2;ge++)m[v+ie+ge]=a.get(u[R+ge],u[R+Z]),m[v+2*A+ie+ge]=a.get(u[R+Z],u[q-ge]),m[v+4*A+ie+ge]=a.get(u[q-ge],u[q-Z]),m[v+6*A+ie+ge]=a.get(u[q-Z],u[R+ge])}v+=A*8}return m}static readCode(a,s,l){let d=0;for(let u=s;u<s+l;u++)d<<=1,a[u]&&(d|=1);return d}static readByte(a,s){let l=a.length-s;return l>=8?Te.readCode(a,s,8):Te.readCode(a,s,l)<<8-l}static convertBoolArrayToByteArray(a){let s=new Uint8Array((a.length+7)/8);for(let l=0;l<s.length;l++)s[l]=Te.readByte(a,8*l);return s}totalBitsInLayer(a,s){return((s?88:112)+16*a)*a}}Te.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Te.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Te.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Te.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Te.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class oe{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,s,l,d){const u=a-l,m=s-d;return Math.sqrt(u*u+m*m)}static sum(a){let s=0;for(let l=0,d=a.length;l!==d;l++){const u=a[l];s+=u}return s}}class pe{static floatToIntBits(a){return a}}pe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(a,s){this.x=a,this.y=s}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof Me){const s=a;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*pe.floatToIntBits(this.x)+pe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const s=this.distance(a[0],a[1]),l=this.distance(a[1],a[2]),d=this.distance(a[0],a[2]);let u,m,p;if(l>=s&&l>=d?(m=a[0],u=a[1],p=a[2]):d>=l&&d>=s?(m=a[1],u=a[0],p=a[2]):(m=a[2],u=a[0],p=a[1]),this.crossProductZ(u,m,p)<0){const v=u;u=p,p=v}a[0]=u,a[1]=m,a[2]=p}static distance(a,s){return oe.distance(a.x,a.y,s.x,s.y)}static crossProductZ(a,s,l){const d=s.x,u=s.y;return(l.x-d)*(a.y-u)-(l.y-u)*(a.x-d)}}class jt{constructor(a,s){this.bits=a,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ct extends jt{constructor(a,s,l,d,u){super(a,s),this.compact=l,this.nbDatablocks=d,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class ft{constructor(a,s,l,d){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),s==null&&(s=ft.INIT_SIZE),l==null&&(l=a.getWidth()/2|0),d==null&&(d=a.getHeight()/2|0);const u=s/2|0;if(this.leftInit=l-u,this.rightInit=l+u,this.upInit=d-u,this.downInit=d+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new P}detect(){let a=this.leftInit,s=this.rightInit,l=this.upInit,d=this.downInit,u=!1,m=!0,p=!1,v=!1,A=!1,R=!1,q=!1;const Z=this.width,ie=this.height;for(;m;){m=!1;let ge=!0;for(;(ge||!v)&&s<Z;)ge=this.containsBlackPoint(l,d,s,!1),ge?(s++,m=!0,v=!0):v||s++;if(s>=Z){u=!0;break}let ye=!0;for(;(ye||!A)&&d<ie;)ye=this.containsBlackPoint(a,s,d,!0),ye?(d++,m=!0,A=!0):A||d++;if(d>=ie){u=!0;break}let Se=!0;for(;(Se||!R)&&a>=0;)Se=this.containsBlackPoint(l,d,a,!1),Se?(a--,m=!0,R=!0):R||a--;if(a<0){u=!0;break}let Re=!0;for(;(Re||!q)&&l>=0;)Re=this.containsBlackPoint(a,s,l,!0),Re?(l--,m=!0,q=!0):q||l--;if(l<0){u=!0;break}m&&(p=!0)}if(!u&&p){const ge=s-a;let ye=null;for(let $e=1;ye===null&&$e<ge;$e++)ye=this.getBlackPointOnSegment(a,d-$e,a+$e,d);if(ye==null)throw new P;let Se=null;for(let $e=1;Se===null&&$e<ge;$e++)Se=this.getBlackPointOnSegment(a,l+$e,a+$e,l);if(Se==null)throw new P;let Re=null;for(let $e=1;Re===null&&$e<ge;$e++)Re=this.getBlackPointOnSegment(s,l+$e,s-$e,l);if(Re==null)throw new P;let Xe=null;for(let $e=1;Xe===null&&$e<ge;$e++)Xe=this.getBlackPointOnSegment(s,d-$e,s-$e,d);if(Xe==null)throw new P;return this.centerEdges(Xe,ye,Re,Se)}else throw new P}getBlackPointOnSegment(a,s,l,d){const u=oe.round(oe.distance(a,s,l,d)),m=(l-a)/u,p=(d-s)/u,v=this.image;for(let A=0;A<u;A++){const R=oe.round(a+A*m),q=oe.round(s+A*p);if(v.get(R,q))return new Me(R,q)}return null}centerEdges(a,s,l,d){const u=a.getX(),m=a.getY(),p=s.getX(),v=s.getY(),A=l.getX(),R=l.getY(),q=d.getX(),Z=d.getY(),ie=ft.CORR;return u<this.width/2?[new Me(q-ie,Z+ie),new Me(p+ie,v+ie),new Me(A-ie,R-ie),new Me(u+ie,m-ie)]:[new Me(q+ie,Z+ie),new Me(p+ie,v-ie),new Me(A-ie,R+ie),new Me(u-ie,m-ie)]}containsBlackPoint(a,s,l,d){const u=this.image;if(d){for(let m=a;m<=s;m++)if(u.get(m,l))return!0}else for(let m=a;m<=s;m++)if(u.get(l,m))return!0;return!1}}ft.INIT_SIZE=10,ft.CORR=1;class Ft{static checkAndNudgePoints(a,s){const l=a.getWidth(),d=a.getHeight();let u=!0;for(let m=0;m<s.length&&u;m+=2){const p=Math.floor(s[m]),v=Math.floor(s[m+1]);if(p<-1||p>l||v<-1||v>d)throw new P;u=!1,p===-1?(s[m]=0,u=!0):p===l&&(s[m]=l-1,u=!0),v===-1?(s[m+1]=0,u=!0):v===d&&(s[m+1]=d-1,u=!0)}u=!0;for(let m=s.length-2;m>=0&&u;m-=2){const p=Math.floor(s[m]),v=Math.floor(s[m+1]);if(p<-1||p>l||v<-1||v>d)throw new P;u=!1,p===-1?(s[m]=0,u=!0):p===l&&(s[m]=l-1,u=!0),v===-1?(s[m+1]=0,u=!0):v===d&&(s[m+1]=d-1,u=!0)}}}class Le{constructor(a,s,l,d,u,m,p,v,A){this.a11=a,this.a21=s,this.a31=l,this.a12=d,this.a22=u,this.a32=m,this.a13=p,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(a,s,l,d,u,m,p,v,A,R,q,Z,ie,ge,ye,Se){const Re=Le.quadrilateralToSquare(a,s,l,d,u,m,p,v);return Le.squareToQuadrilateral(A,R,q,Z,ie,ge,ye,Se).times(Re)}transformPoints(a){const s=a.length,l=this.a11,d=this.a12,u=this.a13,m=this.a21,p=this.a22,v=this.a23,A=this.a31,R=this.a32,q=this.a33;for(let Z=0;Z<s;Z+=2){const ie=a[Z],ge=a[Z+1],ye=u*ie+v*ge+q;a[Z]=(l*ie+m*ge+A)/ye,a[Z+1]=(d*ie+p*ge+R)/ye}}transformPointsWithValues(a,s){const l=this.a11,d=this.a12,u=this.a13,m=this.a21,p=this.a22,v=this.a23,A=this.a31,R=this.a32,q=this.a33,Z=a.length;for(let ie=0;ie<Z;ie++){const ge=a[ie],ye=s[ie],Se=u*ge+v*ye+q;a[ie]=(l*ge+m*ye+A)/Se,s[ie]=(d*ge+p*ye+R)/Se}}static squareToQuadrilateral(a,s,l,d,u,m,p,v){const A=a-l+u-p,R=s-d+m-v;if(A===0&&R===0)return new Le(l-a,u-l,a,d-s,m-d,s,0,0,1);{const q=l-u,Z=p-u,ie=d-m,ge=v-m,ye=q*ge-Z*ie,Se=(A*ge-Z*R)/ye,Re=(q*R-A*ie)/ye;return new Le(l-a+Se*l,p-a+Re*p,a,d-s+Se*d,v-s+Re*v,s,Se,Re,1)}}static quadrilateralToSquare(a,s,l,d,u,m,p,v){return Le.squareToQuadrilateral(a,s,l,d,u,m,p,v).buildAdjoint()}buildAdjoint(){return new Le(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new Le(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class lt extends Ft{sampleGrid(a,s,l,d,u,m,p,v,A,R,q,Z,ie,ge,ye,Se,Re,Xe,$e){const Ye=Le.quadrilateralToQuadrilateral(d,u,m,p,v,A,R,q,Z,ie,ge,ye,Se,Re,Xe,$e);return this.sampleGridWithTransform(a,s,l,Ye)}sampleGridWithTransform(a,s,l,d){if(s<=0||l<=0)throw new P;const u=new W(s,l),m=new Float32Array(2*s);for(let p=0;p<l;p++){const v=m.length,A=p+.5;for(let R=0;R<v;R+=2)m[R]=R/2+.5,m[R+1]=A;d.transformPoints(m),Ft.checkAndNudgePoints(a,m);try{for(let R=0;R<v;R+=2)a.get(Math.floor(m[R]),Math.floor(m[R+1]))&&u.set(R/2,p)}catch{throw new P}}return u}}class Bt{static setGridSampler(a){Bt.gridSampler=a}static getInstance(){return Bt.gridSampler}}Bt.gridSampler=new lt;class gt{constructor(a,s){this.x=a,this.y=s}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Wt{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let s=this.getMatrixCenter(),l=this.getBullsEyeCorners(s);if(a){let m=l[0];l[0]=l[2],l[2]=m}this.extractParameters(l);let d=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),u=this.getMatrixCornerPoints(l);return new Ct(d,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new P;let s=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(a[0],a[1],s),this.sampleLine(a[1],a[2],s),this.sampleLine(a[2],a[3],s),this.sampleLine(a[3],a[0],s)]);this.shift=this.getRotation(l,s);let d=0;for(let m=0;m<4;m++){let p=l[(this.shift+m)%4];this.compact?(d<<=7,d+=p>>1&127):(d<<=10,d+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(d,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(a,s){let l=0;a.forEach((d,u,m)=>{let p=(d>>s-2<<1)+(d&1);l=(l<<3)+p}),l=((l&1)<<11)+(l>>1);for(let d=0;d<4;d++)if(D.bitCount(l^this.EXPECTED_CORNER_BITS[d])<=2)return d;throw new P}getCorrectedParameterData(a,s){let l,d;s?(l=7,d=2):(l=10,d=4);let u=l-d,m=new Int32Array(l);for(let v=l-1;v>=0;--v)m[v]=a&15,a>>=4;try{new et(ve.AZTEC_PARAM).decode(m,u)}catch{throw new P}let p=0;for(let v=0;v<d;v++)p=(p<<4)+m[v];return p}getBullsEyeCorners(a){let s=a,l=a,d=a,u=a,m=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let q=this.getFirstDifferent(s,m,1,-1),Z=this.getFirstDifferent(l,m,1,1),ie=this.getFirstDifferent(d,m,-1,1),ge=this.getFirstDifferent(u,m,-1,-1);if(this.nbCenterLayers>2){let ye=this.distancePoint(ge,q)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(ye<.75||ye>1.25||!this.isWhiteOrBlackRectangle(q,Z,ie,ge))break}s=q,l=Z,d=ie,u=ge,m=!m}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new P;this.compact=this.nbCenterLayers===5;let p=new Me(s.getX()+.5,s.getY()-.5),v=new Me(l.getX()+.5,l.getY()+.5),A=new Me(d.getX()-.5,d.getY()+.5),R=new Me(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,v,A,R],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,s,l,d;try{let p=new ft(this.image).detect();a=p[0],s=p[1],l=p[2],d=p[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;a=this.getFirstDifferent(new gt(v+7,A-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new gt(v+7,A+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new gt(v-7,A+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new gt(v-7,A-7),!1,-1,-1).toResultPoint()}let u=oe.round((a.getX()+d.getX()+s.getX()+l.getX())/4),m=oe.round((a.getY()+d.getY()+s.getY()+l.getY())/4);try{let p=new ft(this.image,15,u,m).detect();a=p[0],s=p[1],l=p[2],d=p[3]}catch{a=this.getFirstDifferent(new gt(u+7,m-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new gt(u+7,m+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new gt(u-7,m+7),!1,-1,1).toResultPoint(),d=this.getFirstDifferent(new gt(u-7,m-7),!1,-1,-1).toResultPoint()}return u=oe.round((a.getX()+d.getX()+s.getX()+l.getX())/4),m=oe.round((a.getY()+d.getY()+s.getY()+l.getY())/4),new gt(u,m)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,s,l,d,u){let m=Bt.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,A=p/2+this.nbCenterLayers;return m.sampleGrid(a,p,p,v,v,A,v,A,A,v,A,s.getX(),s.getY(),l.getX(),l.getY(),d.getX(),d.getY(),u.getX(),u.getY())}sampleLine(a,s,l){let d=0,u=this.distanceResultPoint(a,s),m=u/l,p=a.getX(),v=a.getY(),A=m*(s.getX()-a.getX())/u,R=m*(s.getY()-a.getY())/u;for(let q=0;q<l;q++)this.image.get(oe.round(p+q*A),oe.round(v+q*R))&&(d|=1<<l-q-1);return d}isWhiteOrBlackRectangle(a,s,l,d){let u=3;a=new gt(a.getX()-u,a.getY()+u),s=new gt(s.getX()-u,s.getY()-u),l=new gt(l.getX()+u,l.getY()-u),d=new gt(d.getX()+u,d.getY()+u);let m=this.getColor(d,a);if(m===0)return!1;let p=this.getColor(a,s);return p!==m||(p=this.getColor(s,l),p!==m)?!1:(p=this.getColor(l,d),p===m)}getColor(a,s){let l=this.distancePoint(a,s),d=(s.getX()-a.getX())/l,u=(s.getY()-a.getY())/l,m=0,p=a.getX(),v=a.getY(),A=this.image.get(a.getX(),a.getY()),R=Math.ceil(l);for(let Z=0;Z<R;Z++)p+=d,v+=u,this.image.get(oe.round(p),oe.round(v))!==A&&m++;let q=m/l;return q>.1&&q<.9?0:q<=.1===A?1:-1}getFirstDifferent(a,s,l,d){let u=a.getX()+l,m=a.getY()+d;for(;this.isValid(u,m)&&this.image.get(u,m)===s;)u+=l,m+=d;for(u-=l,m-=d;this.isValid(u,m)&&this.image.get(u,m)===s;)u+=l;for(u-=l;this.isValid(u,m)&&this.image.get(u,m)===s;)m+=d;return m-=d,new gt(u,m)}expandSquare(a,s,l){let d=l/(2*s),u=a[0].getX()-a[2].getX(),m=a[0].getY()-a[2].getY(),p=(a[0].getX()+a[2].getX())/2,v=(a[0].getY()+a[2].getY())/2,A=new Me(p+d*u,v+d*m),R=new Me(p-d*u,v-d*m);u=a[1].getX()-a[3].getX(),m=a[1].getY()-a[3].getY(),p=(a[1].getX()+a[3].getX())/2,v=(a[1].getY()+a[3].getY())/2;let q=new Me(p+d*u,v+d*m),Z=new Me(p-d*u,v-d*m);return[A,q,R,Z]}isValid(a,s){return a>=0&&a<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(a){let s=oe.round(a.getX()),l=oe.round(a.getY());return this.isValid(s,l)}distancePoint(a,s){return oe.distance(a.getX(),a.getY(),s.getX(),s.getY())}distanceResultPoint(a,s){return oe.distance(a.getX(),a.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(D.truncDivision(this.nbLayers-4,8)+1)+15}}class Tt{decode(a,s=null){let l=null,d=new Wt(a.getBlackMatrix()),u=null,m=null;try{let R=d.detectMirror(!1);u=R.getPoints(),this.reportFoundResultPoints(s,u),m=new Te().decode(R)}catch(R){l=R}if(m==null)try{let R=d.detectMirror(!0);u=R.getPoints(),this.reportFoundResultPoints(s,u),m=new Te().decode(R)}catch(R){throw l??R}let p=new be(m.getText(),m.getRawBytes(),m.getNumBits(),u,xe.AZTEC,M.currentTimeMillis()),v=m.getByteSegments();v!=null&&p.putMetadata(je.BYTE_SEGMENTS,v);let A=m.getECLevel();return A!=null&&p.putMetadata(je.ERROR_CORRECTION_LEVEL,A),p}reportFoundResultPoints(a,s){if(a!=null){let l=a.get(X.NEED_RESULT_POINT_CALLBACK);l!=null&&s.forEach((d,u,m)=>{l.foundPossibleResultPoint(d)})}}reset(){}}class xr extends ae{constructor(a=500){super(new Tt,a)}}class Lt{decode(a,s){try{return this.doDecode(a,s)}catch{if(s&&s.get(X.TRY_HARDER)===!0&&a.isRotateSupported()){const u=a.rotateCounterClockwise(),m=this.doDecode(u,s),p=m.getResultMetadata();let v=270;p!==null&&p.get(je.ORIENTATION)===!0&&(v=v+p.get(je.ORIENTATION)%360),m.putMetadata(je.ORIENTATION,v);const A=m.getResultPoints();if(A!==null){const R=u.getHeight();for(let q=0;q<A.length;q++)A[q]=new Me(R-A[q].getY()-1,A[q].getX())}return m}else throw new P}}reset(){}doDecode(a,s){const l=a.getWidth(),d=a.getHeight();let u=new B(l);const m=s&&s.get(X.TRY_HARDER)===!0,p=Math.max(1,d>>(m?8:5));let v;m?v=d:v=15;const A=Math.trunc(d/2);for(let R=0;R<v;R++){const q=Math.trunc((R+1)/2),Z=(R&1)===0,ie=A+p*(Z?q:-q);if(ie<0||ie>=d)break;try{u=a.getBlackRow(ie,u)}catch{continue}for(let ge=0;ge<2;ge++){if(ge===1&&(u.reverse(),s&&s.get(X.NEED_RESULT_POINT_CALLBACK)===!0)){const ye=new Map;s.forEach((Se,Re)=>ye.set(Re,Se)),ye.delete(X.NEED_RESULT_POINT_CALLBACK),s=ye}try{const ye=this.decodeRow(ie,u,s);if(ge===1){ye.putMetadata(je.ORIENTATION,180);const Se=ye.getResultPoints();Se!==null&&(Se[0]=new Me(l-Se[0].getX()-1,Se[0].getY()),Se[1]=new Me(l-Se[1].getX()-1,Se[1].getY()))}return ye}catch{}}}throw new P}static recordPattern(a,s,l){const d=l.length;for(let A=0;A<d;A++)l[A]=0;const u=a.getSize();if(s>=u)throw new P;let m=!a.get(s),p=0,v=s;for(;v<u;){if(a.get(v)!==m)l[p]++;else{if(++p===d)break;l[p]=1,m=!m}v++}if(!(p===d||p===d-1&&v===u))throw new P}static recordPatternInReverse(a,s,l){let d=l.length,u=a.get(s);for(;s>0&&d>=0;)a.get(--s)!==u&&(d--,u=!u);if(d>=0)throw new P;Lt.recordPattern(a,s+1,l)}static patternMatchVariance(a,s,l){const d=a.length;let u=0,m=0;for(let A=0;A<d;A++)u+=a[A],m+=s[A];if(u<m)return Number.POSITIVE_INFINITY;const p=u/m;l*=p;let v=0;for(let A=0;A<d;A++){const R=a[A],q=s[A]*p,Z=R>q?R-q:q-R;if(Z>l)return Number.POSITIVE_INFINITY;v+=Z}return v/u}}class Qe extends Lt{static findStartPattern(a){const s=a.getSize(),l=a.getNextSet(0);let d=0,u=Int32Array.from([0,0,0,0,0,0]),m=l,p=!1;const v=6;for(let A=l;A<s;A++)if(a.get(A)!==p)u[d]++;else{if(d===v-1){let R=Qe.MAX_AVG_VARIANCE,q=-1;for(let Z=Qe.CODE_START_A;Z<=Qe.CODE_START_C;Z++){const ie=Lt.patternMatchVariance(u,Qe.CODE_PATTERNS[Z],Qe.MAX_INDIVIDUAL_VARIANCE);ie<R&&(R=ie,q=Z)}if(q>=0&&a.isRange(Math.max(0,m-(A-m)/2),m,!1))return Int32Array.from([m,A,q]);m+=u[0]+u[1],u=u.slice(2,u.length-1),u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,p=!p}throw new P}static decodeCode(a,s,l){Lt.recordPattern(a,l,s);let d=Qe.MAX_AVG_VARIANCE,u=-1;for(let m=0;m<Qe.CODE_PATTERNS.length;m++){const p=Qe.CODE_PATTERNS[m],v=this.patternMatchVariance(s,p,Qe.MAX_INDIVIDUAL_VARIANCE);v<d&&(d=v,u=m)}if(u>=0)return u;throw new P}decodeRow(a,s,l){const d=l&&l.get(X.ASSUME_GS1)===!0,u=Qe.findStartPattern(s),m=u[2];let p=0;const v=new Uint8Array(20);v[p++]=m;let A;switch(m){case Qe.CODE_START_A:A=Qe.CODE_CODE_A;break;case Qe.CODE_START_B:A=Qe.CODE_CODE_B;break;case Qe.CODE_START_C:A=Qe.CODE_CODE_C;break;default:throw new U}let R=!1,q=!1,Z="",ie=u[0],ge=u[1];const ye=Int32Array.from([0,0,0,0,0,0]);let Se=0,Re=0,Xe=m,$e=0,Ye=!0,vt=!1,bt=!1;for(;!R;){const Ls=q;switch(q=!1,Se=Re,Re=Qe.decodeCode(s,ye,ge),v[p++]=Re,Re!==Qe.CODE_STOP&&(Ye=!0),Re!==Qe.CODE_STOP&&($e++,Xe+=$e*Re),ie=ge,ge+=ye.reduce((Pr,hc)=>Pr+hc,0),Re){case Qe.CODE_START_A:case Qe.CODE_START_B:case Qe.CODE_START_C:throw new U}switch(A){case Qe.CODE_CODE_A:if(Re<64)bt===vt?Z+=String.fromCharCode(32+Re):Z+=String.fromCharCode(32+Re+128),bt=!1;else if(Re<96)bt===vt?Z+=String.fromCharCode(Re-64):Z+=String.fromCharCode(Re+64),bt=!1;else switch(Re!==Qe.CODE_STOP&&(Ye=!1),Re){case Qe.CODE_FNC_1:d&&(Z.length===0?Z+="]C1":Z+="");break;case Qe.CODE_FNC_2:case Qe.CODE_FNC_3:break;case Qe.CODE_FNC_4_A:!vt&&bt?(vt=!0,bt=!1):vt&&bt?(vt=!1,bt=!1):bt=!0;break;case Qe.CODE_SHIFT:q=!0,A=Qe.CODE_CODE_B;break;case Qe.CODE_CODE_B:A=Qe.CODE_CODE_B;break;case Qe.CODE_CODE_C:A=Qe.CODE_CODE_C;break;case Qe.CODE_STOP:R=!0;break}break;case Qe.CODE_CODE_B:if(Re<96)bt===vt?Z+=String.fromCharCode(32+Re):Z+=String.fromCharCode(32+Re+128),bt=!1;else switch(Re!==Qe.CODE_STOP&&(Ye=!1),Re){case Qe.CODE_FNC_1:d&&(Z.length===0?Z+="]C1":Z+="");break;case Qe.CODE_FNC_2:case Qe.CODE_FNC_3:break;case Qe.CODE_FNC_4_B:!vt&&bt?(vt=!0,bt=!1):vt&&bt?(vt=!1,bt=!1):bt=!0;break;case Qe.CODE_SHIFT:q=!0,A=Qe.CODE_CODE_A;break;case Qe.CODE_CODE_A:A=Qe.CODE_CODE_A;break;case Qe.CODE_CODE_C:A=Qe.CODE_CODE_C;break;case Qe.CODE_STOP:R=!0;break}break;case Qe.CODE_CODE_C:if(Re<100)Re<10&&(Z+="0"),Z+=Re;else switch(Re!==Qe.CODE_STOP&&(Ye=!1),Re){case Qe.CODE_FNC_1:d&&(Z.length===0?Z+="]C1":Z+="");break;case Qe.CODE_CODE_A:A=Qe.CODE_CODE_A;break;case Qe.CODE_CODE_B:A=Qe.CODE_CODE_B;break;case Qe.CODE_STOP:R=!0;break}break}Ls&&(A=A===Qe.CODE_CODE_A?Qe.CODE_CODE_B:Qe.CODE_CODE_A)}const or=ge-ie;if(ge=s.getNextUnset(ge),!s.isRange(ge,Math.min(s.getSize(),ge+(ge-ie)/2),!1))throw new P;if(Xe-=$e*Se,Xe%103!==Se)throw new T;const Mr=Z.length;if(Mr===0)throw new P;Mr>0&&Ye&&(A===Qe.CODE_CODE_C?Z=Z.substring(0,Mr-2):Z=Z.substring(0,Mr-1));const gr=(u[1]+u[0])/2,aa=ie+or/2,Wa=v.length,pr=new Uint8Array(Wa);for(let Ls=0;Ls<Wa;Ls++)pr[Ls]=v[Ls];const tn=[new Me(gr,a),new Me(aa,a)];return new be(Z,pr,0,tn,xe.CODE_128,new Date().getTime())}}Qe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Qe.MAX_AVG_VARIANCE=.25,Qe.MAX_INDIVIDUAL_VARIANCE=.7,Qe.CODE_SHIFT=98,Qe.CODE_CODE_C=99,Qe.CODE_CODE_B=100,Qe.CODE_CODE_A=101,Qe.CODE_FNC_1=102,Qe.CODE_FNC_2=97,Qe.CODE_FNC_3=96,Qe.CODE_FNC_4_A=101,Qe.CODE_FNC_4_B=100,Qe.CODE_START_A=103,Qe.CODE_START_B=104,Qe.CODE_START_C=105,Qe.CODE_STOP=106;class Yt extends Lt{constructor(a=!1,s=!1){super(),this.usingCheckDigit=a,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,s,l){let d=this.counters;d.fill(0),this.decodeRowResult="";let u=Yt.findAsteriskPattern(s,d),m=s.getNextSet(u[1]),p=s.getSize(),v,A;do{Yt.recordPattern(s,m,d);let ye=Yt.toNarrowWidePattern(d);if(ye<0)throw new P;v=Yt.patternToChar(ye),this.decodeRowResult+=v,A=m;for(let Se of d)m+=Se;m=s.getNextSet(m)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let R=0;for(let ye of d)R+=ye;let q=m-A-R;if(m!==p&&q*2<R)throw new P;if(this.usingCheckDigit){let ye=this.decodeRowResult.length-1,Se=0;for(let Re=0;Re<ye;Re++)Se+=Yt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Re));if(this.decodeRowResult.charAt(ye)!==Yt.ALPHABET_STRING.charAt(Se%43))throw new T;this.decodeRowResult=this.decodeRowResult.substring(0,ye)}if(this.decodeRowResult.length===0)throw new P;let Z;this.extendedMode?Z=Yt.decodeExtended(this.decodeRowResult):Z=this.decodeRowResult;let ie=(u[1]+u[0])/2,ge=A+R/2;return new be(Z,null,0,[new Me(ie,a),new Me(ge,a)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(a,s){let l=a.getSize(),d=a.getNextSet(0),u=0,m=d,p=!1,v=s.length;for(let A=d;A<l;A++)if(a.get(A)!==p)s[u]++;else{if(u===v-1){if(this.toNarrowWidePattern(s)===Yt.ASTERISK_ENCODING&&a.isRange(Math.max(0,m-Math.floor((A-m)/2)),m,!1))return[m,A];m+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,p=!p}throw new P}static toNarrowWidePattern(a){let s=a.length,l=0,d;do{let u=2147483647;for(let v of a)v<u&&v>l&&(u=v);l=u,d=0;let m=0,p=0;for(let v=0;v<s;v++){let A=a[v];A>l&&(p|=1<<s-1-v,d++,m+=A)}if(d===3){for(let v=0;v<s&&d>0;v++){let A=a[v];if(A>l&&(d--,A*2>=m))return-1}return p}}while(d>3);return-1}static patternToChar(a){for(let s=0;s<Yt.CHARACTER_ENCODINGS.length;s++)if(Yt.CHARACTER_ENCODINGS[s]===a)return Yt.ALPHABET_STRING.charAt(s);if(a===Yt.ASTERISK_ENCODING)return"*";throw new P}static decodeExtended(a){let s=a.length,l="";for(let d=0;d<s;d++){let u=a.charAt(d);if(u==="+"||u==="$"||u==="%"||u==="/"){let m=a.charAt(d+1),p="\0";switch(u){case"+":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)+32);else throw new U;break;case"$":if(m>="A"&&m<="Z")p=String.fromCharCode(m.charCodeAt(0)-64);else throw new U;break;case"%":if(m>="A"&&m<="E")p=String.fromCharCode(m.charCodeAt(0)-38);else if(m>="F"&&m<="J")p=String.fromCharCode(m.charCodeAt(0)-11);else if(m>="K"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)+16);else if(m>="P"&&m<="T")p=String.fromCharCode(m.charCodeAt(0)+43);else if(m==="U")p="\0";else if(m==="V")p="@";else if(m==="W")p="`";else if(m==="X"||m==="Y"||m==="Z")p="";else throw new U;break;case"/":if(m>="A"&&m<="O")p=String.fromCharCode(m.charCodeAt(0)-32);else if(m==="Z")p=":";else throw new U;break}l+=p,d++}else l+=u}return l}}Yt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Yt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Yt.ASTERISK_ENCODING=148;class ot extends Lt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,s,l){let d=this.decodeStart(s),u=this.decodeEnd(s),m=new re;ot.decodeMiddle(s,d[1],u[0],m);let p=m.toString(),v=null;l!=null&&(v=l.get(X.ALLOWED_LENGTHS)),v==null&&(v=ot.DEFAULT_ALLOWED_LENGTHS);let A=p.length,R=!1,q=0;for(let ge of v){if(A===ge){R=!0;break}ge>q&&(q=ge)}if(!R&&A>q&&(R=!0),!R)throw new U;const Z=[new Me(d[1],a),new Me(u[0],a)];return new be(p,null,0,Z,xe.ITF,new Date().getTime())}static decodeMiddle(a,s,l,d){let u=new Int32Array(10),m=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),m.fill(0),p.fill(0);s<l;){Lt.recordPattern(a,s,u);for(let A=0;A<5;A++){let R=2*A;m[A]=u[R],p[A]=u[R+1]}let v=ot.decodeDigit(m);d.append(v.toString()),v=this.decodeDigit(p),d.append(v.toString()),u.forEach(function(A){s+=A})}}decodeStart(a){let s=ot.skipWhiteSpace(a),l=ot.findGuardPattern(a,s,ot.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(a,l[0]),l}validateQuietZone(a,s){let l=this.narrowLineWidth*10;l=l<s?l:s;for(let d=s-1;l>0&&d>=0&&!a.get(d);d--)l--;if(l!==0)throw new P}static skipWhiteSpace(a){const s=a.getSize(),l=a.getNextSet(0);if(l===s)throw new P;return l}decodeEnd(a){a.reverse();try{let s=ot.skipWhiteSpace(a),l;try{l=ot.findGuardPattern(a,s,ot.END_PATTERN_REVERSED[0])}catch(u){u instanceof P&&(l=ot.findGuardPattern(a,s,ot.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,l[0]);let d=l[0];return l[0]=a.getSize()-l[1],l[1]=a.getSize()-d,l}finally{a.reverse()}}static findGuardPattern(a,s,l){let d=l.length,u=new Int32Array(d),m=a.getSize(),p=!1,v=0,A=s;u.fill(0);for(let R=s;R<m;R++)if(a.get(R)!==p)u[v]++;else{if(v===d-1){if(Lt.patternMatchVariance(u,l,ot.MAX_INDIVIDUAL_VARIANCE)<ot.MAX_AVG_VARIANCE)return[A,R];A+=u[0]+u[1],M.arraycopy(u,2,u,0,v-1),u[v-1]=0,u[v]=0,v--}else v++;u[v]=1,p=!p}throw new P}static decodeDigit(a){let s=ot.MAX_AVG_VARIANCE,l=-1,d=ot.PATTERNS.length;for(let u=0;u<d;u++){let m=ot.PATTERNS[u],p=Lt.patternMatchVariance(a,m,ot.MAX_INDIVIDUAL_VARIANCE);p<s?(s=p,l=u):p===s&&(l=-1)}if(l>=0)return l%10;throw new P}}ot.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ot.MAX_AVG_VARIANCE=.38,ot.MAX_INDIVIDUAL_VARIANCE=.5,ot.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ot.START_PATTERN=Int32Array.from([1,1,1,1]),ot.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Ve extends Lt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let s=!1,l,d=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),l=Ve.findGuardPattern(a,d,!1,this.START_END_PATTERN,u);let m=l[0];d=l[1];let p=m-(d-m);p>=0&&(s=a.isRange(p,m,!1))}return l}static checkChecksum(a){return Ve.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let s=a.length;if(s===0)return!1;let l=parseInt(a.charAt(s-1),10);return Ve.getStandardUPCEANChecksum(a.substring(0,s-1))===l}static getStandardUPCEANChecksum(a){let s=a.length,l=0;for(let d=s-1;d>=0;d-=2){let u=a.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new U;l+=u}l*=3;for(let d=s-2;d>=0;d-=2){let u=a.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new U;l+=u}return(1e3-l)%10}static decodeEnd(a,s){return Ve.findGuardPattern(a,s,!1,Ve.START_END_PATTERN,new Int32Array(Ve.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,s,l,d){return this.findGuardPattern(a,s,l,d,new Int32Array(d.length))}static findGuardPattern(a,s,l,d,u){let m=a.getSize();s=l?a.getNextUnset(s):a.getNextSet(s);let p=0,v=s,A=d.length,R=l;for(let q=s;q<m;q++)if(a.get(q)!==R)u[p]++;else{if(p===A-1){if(Lt.patternMatchVariance(u,d,Ve.MAX_INDIVIDUAL_VARIANCE)<Ve.MAX_AVG_VARIANCE)return Int32Array.from([v,q]);v+=u[0]+u[1];let Z=u.slice(2,u.length-1);for(let ie=0;ie<p-1;ie++)u[ie]=Z[ie];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,R=!R}throw new P}static decodeDigit(a,s,l,d){this.recordPattern(a,l,s);let u=this.MAX_AVG_VARIANCE,m=-1,p=d.length;for(let v=0;v<p;v++){let A=d[v],R=Lt.patternMatchVariance(s,A,Ve.MAX_INDIVIDUAL_VARIANCE);R<u&&(u=R,m=v)}if(m>=0)return m;throw new P}}Ve.MAX_AVG_VARIANCE=.48,Ve.MAX_INDIVIDUAL_VARIANCE=.7,Ve.START_END_PATTERN=Int32Array.from([1,1,1]),Ve.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Ve.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ve.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class st{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,s,l){let d=this.decodeRowStringBuffer,u=this.decodeMiddle(s,l,d),m=d.toString(),p=st.parseExtensionString(m),v=[new Me((l[0]+l[1])/2,a),new Me(u,a)],A=new be(m,null,0,v,xe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(a,s,l){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=a.getSize(),m=s[1],p=0;for(let A=0;A<5&&m<u;A++){let R=Ve.decodeDigit(a,d,m,Ve.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let q of d)m+=q;R>=10&&(p|=1<<4-A),A!==4&&(m=a.getNextSet(m),m=a.getNextUnset(m))}if(l.length!==5)throw new P;let v=this.determineCheckDigit(p);if(st.extensionChecksum(l.toString())!==v)throw new P;return m}static extensionChecksum(a){let s=a.length,l=0;for(let d=s-2;d>=0;d-=2)l+=a.charAt(d).charCodeAt(0)-48;l*=3;for(let d=s-1;d>=0;d-=2)l+=a.charAt(d).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(a){for(let s=0;s<10;s++)if(a===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new P}static parseExtensionString(a){if(a.length!==5)return null;let s=st.parseExtension5String(a);return s==null?null:new Map([[je.SUGGESTED_PRICE,s]])}static parseExtension5String(a){let s;switch(a.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let l=parseInt(a.substring(1)),d=(l/100).toString(),u=l%100,m=u<10?"0"+u:u.toString();return s+d+"."+m}}class jn{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,s,l){let d=this.decodeRowStringBuffer,u=this.decodeMiddle(s,l,d),m=d.toString(),p=jn.parseExtensionString(m),v=[new Me((l[0]+l[1])/2,a),new Me(u,a)],A=new be(m,null,0,v,xe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(a,s,l){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=a.getSize(),m=s[1],p=0;for(let v=0;v<2&&m<u;v++){let A=Ve.decodeDigit(a,d,m,Ve.L_AND_G_PATTERNS);l+=String.fromCharCode(48+A%10);for(let R of d)m+=R;A>=10&&(p|=1<<1-v),v!==1&&(m=a.getNextSet(m),m=a.getNextUnset(m))}if(l.length!==2)throw new P;if(parseInt(l.toString())%4!==p)throw new P;return m}static parseExtensionString(a){return a.length!==2?null:new Map([[je.ISSUE_NUMBER,parseInt(a)]])}}class Pi{static decodeRow(a,s,l){let d=Ve.findGuardPattern(s,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new st().decodeRow(a,s,d)}catch{return new jn().decodeRow(a,s,d)}}}Pi.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Pt extends Ve{constructor(){super(),this.decodeRowStringBuffer="",Pt.L_AND_G_PATTERNS=Pt.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let s=Pt.L_PATTERNS[a-10],l=new Int32Array(s.length);for(let d=0;d<s.length;d++)l[d]=s[s.length-d-1];Pt.L_AND_G_PATTERNS[a]=l}}decodeRow(a,s,l){let d=Pt.findStartGuardPattern(s),u=l==null?null:l.get(X.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Ye=new Me((d[0]+d[1])/2,a);u.foundPossibleResultPoint(Ye)}let m=this.decodeMiddle(s,d,this.decodeRowStringBuffer),p=m.rowOffset,v=m.resultString;if(u!=null){const Ye=new Me(p,a);u.foundPossibleResultPoint(Ye)}let A=this.decodeEnd(s,p);if(u!=null){const Ye=new Me((A[0]+A[1])/2,a);u.foundPossibleResultPoint(Ye)}let R=A[1],q=R+(R-A[0]);if(q>=s.getSize()||!s.isRange(R,q,!1))throw new P;let Z=v.toString();if(Z.length<8)throw new U;if(!Pt.checkChecksum(Z))throw new T;let ie=(d[1]+d[0])/2,ge=(A[1]+A[0])/2,ye=this.getBarcodeFormat(),Se=[new Me(ie,a),new Me(ge,a)],Re=new be(Z,null,0,Se,ye,new Date().getTime()),Xe=0;try{let Ye=Pi.decodeRow(a,s,A[1]);Re.putMetadata(je.UPC_EAN_EXTENSION,Ye.getText()),Re.putAllMetadata(Ye.getResultMetadata()),Re.addResultPoints(Ye.getResultPoints()),Xe=Ye.getText().length}catch{}let $e=l==null?null:l.get(X.ALLOWED_EAN_EXTENSIONS);if($e!=null){let Ye=!1;for(let vt in $e)if(Xe.toString()===vt){Ye=!0;break}if(!Ye)throw new P}return Re}decodeEnd(a,s){return Pt.findGuardPattern(a,s,!1,Pt.START_END_PATTERN,new Int32Array(Pt.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return Pt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let s=a.length;if(s===0)return!1;let l=parseInt(a.charAt(s-1),10);return Pt.getStandardUPCEANChecksum(a.substring(0,s-1))===l}static getStandardUPCEANChecksum(a){let s=a.length,l=0;for(let d=s-1;d>=0;d-=2){let u=a.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new U;l+=u}l*=3;for(let d=s-2;d>=0;d-=2){let u=a.charAt(d).charCodeAt(0)-48;if(u<0||u>9)throw new U;l+=u}return(1e3-l)%10}}class Lr extends Pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,s,l){let d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=a.getSize(),m=s[1],p=0;for(let A=0;A<6&&m<u;A++){let R=Pt.decodeDigit(a,d,m,Pt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let q of d)m+=q;R>=10&&(p|=1<<5-A)}l=Lr.determineFirstDigit(l,p),m=Pt.findGuardPattern(a,m,!0,Pt.MIDDLE_PATTERN,new Int32Array(Pt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&m<u;A++){let R=Pt.decodeDigit(a,d,m,Pt.L_PATTERNS);l+=String.fromCharCode(48+R);for(let q of d)m+=q}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(a,s){for(let l=0;l<10;l++)if(s===this.FIRST_DIGIT_ENCODINGS[l])return a=String.fromCharCode(48+l)+a,a;throw new P}}Lr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class rc extends Pt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,s,l){const d=this.decodeMiddleCounters;d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=a.getSize(),m=s[1];for(let v=0;v<4&&m<u;v++){let A=Pt.decodeDigit(a,d,m,Pt.L_PATTERNS);l+=String.fromCharCode(48+A);for(let R of d)m+=R}m=Pt.findGuardPattern(a,m,!0,Pt.MIDDLE_PATTERN,new Int32Array(Pt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&m<u;v++){let A=Pt.decodeDigit(a,d,m,Pt.L_PATTERNS);l+=String.fromCharCode(48+A);for(let R of d)m+=R}return{rowOffset:m,resultString:l}}getBarcodeFormat(){return xe.EAN_8}}class Ui extends Pt{constructor(){super(...arguments),this.ean13Reader=new Lr}getBarcodeFormat(){return xe.UPC_A}decode(a,s){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,s,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,s,l))}decodeMiddle(a,s,l){return this.ean13Reader.decodeMiddle(a,s,l)}maybeReturnResult(a){let s=a.getText();if(s.charAt(0)==="0"){let l=new be(s.substring(1),null,null,a.getResultPoints(),xe.UPC_A);return a.getResultMetadata()!=null&&l.putAllMetadata(a.getResultMetadata()),l}else throw new P}reset(){this.ean13Reader.reset()}}class Er extends Pt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,s,l){const d=this.decodeMiddleCounters.map(A=>A);d[0]=0,d[1]=0,d[2]=0,d[3]=0;const u=a.getSize();let m=s[1],p=0;for(let A=0;A<6&&m<u;A++){const R=Er.decodeDigit(a,d,m,Er.L_AND_G_PATTERNS);l+=String.fromCharCode(48+R%10);for(let q of d)m+=q;R>=10&&(p|=1<<5-A)}let v=Er.determineNumSysAndCheckDigit(l,p);return{rowOffset:m,resultString:v}}decodeEnd(a,s){return Er.findGuardPatternWithoutCounters(a,s,!0,Er.MIDDLE_END_PATTERN)}checkChecksum(a){return Pt.checkChecksum(Er.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,s){for(let l=0;l<=1;l++)for(let d=0;d<10;d++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][d]){let u=String.fromCharCode(48+l),m=String.fromCharCode(48+d);return u+a+m}throw P.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(a){const s=a.slice(1,7).split("").map(u=>u.charCodeAt(0)),l=new re;l.append(a.charAt(0));let d=s[5];switch(d){case 0:case 1:case 2:l.appendChars(s,0,2),l.append(d),l.append("0000"),l.appendChars(s,2,3);break;case 3:l.appendChars(s,0,3),l.append("00000"),l.appendChars(s,3,2);break;case 4:l.appendChars(s,0,4),l.append("00000"),l.append(s[4]);break;default:l.appendChars(s,0,5),l.append("0000"),l.append(d);break}return a.length>=8&&l.append(a.charAt(7)),l.toString()}}Er.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Er.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class il extends Lt{constructor(a){super();let s=a==null?null:a.get(X.POSSIBLE_FORMATS),l=[];x(s)?(l.push(new Lr),l.push(new Ui),l.push(new rc),l.push(new Er)):(s.indexOf(xe.EAN_13)>-1&&l.push(new Lr),s.indexOf(xe.UPC_A)>-1&&l.push(new Ui),s.indexOf(xe.EAN_8)>-1&&l.push(new rc),s.indexOf(xe.UPC_E)>-1&&l.push(new Er)),this.readers=l}decodeRow(a,s,l){for(let d of this.readers)try{const u=d.decodeRow(a,s,l),m=u.getBarcodeFormat()===xe.EAN_13&&u.getText().charAt(0)==="0",p=l==null?null:l.get(X.POSSIBLE_FORMATS),v=p==null||p.includes(xe.UPC_A);if(m&&v){const A=u.getRawBytes(),R=new be(u.getText().substring(1),A,A?A.length:null,u.getResultPoints(),xe.UPC_A);return R.putAllMetadata(u.getResultMetadata()),R}return u}catch{}throw new P}reset(){for(let a of this.readers)a.reset()}}class Ua extends Lt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,s){for(let l=0;l<s.length;l++)if(Lt.patternMatchVariance(a,s[l],Ua.MAX_INDIVIDUAL_VARIANCE)<Ua.MAX_AVG_VARIANCE)return l;throw new P}static count(a){return oe.sum(new Int32Array(a))}static increment(a,s){let l=0,d=s[0];for(let u=1;u<a.length;u++)s[u]>d&&(d=s[u],l=u);a[l]++}static decrement(a,s){let l=0,d=s[0];for(let u=1;u<a.length;u++)s[u]<d&&(d=s[u],l=u);a[l]--}static isFinderPattern(a){let s=a[0]+a[1],l=s+a[2]+a[3],d=s/l;if(d>=Ua.MIN_FINDER_PATTERN_RATIO&&d<=Ua.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,m=Number.MIN_SAFE_INTEGER;for(let p of a)p>m&&(m=p),p<u&&(u=p);return m<10*u}return!1}}Ua.MAX_AVG_VARIANCE=.2,Ua.MAX_INDIVIDUAL_VARIANCE=.45,Ua.MIN_FINDER_PATTERN_RATIO=9.5/12,Ua.MAX_FINDER_PATTERN_RATIO=12.5/14;class Qs{constructor(a,s){this.value=a,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof Qs))return!1;const s=a;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ql{constructor(a,s,l,d,u){this.value=a,this.startEnd=s,this.value=a,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new Me(l,u)),this.resultPoints.push(new Me(d,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof ql))return!1;const s=a;return this.value===s.value}hashCode(){return this.value}}class Ya{constructor(){}static getRSSvalue(a,s,l){let d=0;for(let v of a)d+=v;let u=0,m=0,p=a.length;for(let v=0;v<p-1;v++){let A;for(A=1,m|=1<<v;A<a[v];A++,m&=~(1<<v)){let R=Ya.combins(d-A-1,p-v-2);if(l&&m===0&&d-A-(p-v-1)>=p-v-1&&(R-=Ya.combins(d-A-(p-v),p-v-2)),p-v-1>1){let q=0;for(let Z=d-A-(p-v-2);Z>s;Z--)q+=Ya.combins(d-A-Z-1,p-v-3);R-=q*(p-1-v)}else d-A>s&&R--;u+=R}d-=A}return u}static combins(a,s){let l,d;a-s>s?(d=s,l=a-s):(d=a-s,l=s);let u=1,m=1;for(let p=a;p>l;p--)u*=p,m<=d&&(u/=m,m++);for(;m<=d;)u/=m,m++;return u}}class ar{static buildBitArray(a){let s=a.length*2-1;a[a.length-1].getRightChar()==null&&(s-=1);let l=12*s,d=new B(l),u=0,p=a[0].getRightChar().getValue();for(let v=11;v>=0;--v)(p&1<<v)!=0&&d.set(u),u++;for(let v=1;v<a.length;++v){let A=a[v],R=A.getLeftChar().getValue();for(let q=11;q>=0;--q)(R&1<<q)!=0&&d.set(u),u++;if(A.getRightChar()!=null){let q=A.getRightChar().getValue();for(let Z=11;Z>=0;--Z)(q&1<<Z)!=0&&d.set(u),u++}}return d}}class Sa{constructor(a,s){s?this.decodedInformation=null:(this.finished=a,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Cs{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class rr extends Cs{constructor(a,s){super(a),this.value=s}getValue(){return this.value}isFNC1(){return this.value===rr.FNC1}}rr.FNC1="$";class Zs extends Cs{constructor(a,s,l){super(a),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class _r extends Cs{constructor(a,s,l){if(super(a),s<0||s>10||l<0||l>10)throw new U;this.firstDigit=s,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===_r.FNC1}isSecondDigitFNC1(){return this.secondDigit===_r.FNC1}isAnyFNC1(){return this.firstDigit===_r.FNC1||this.secondDigit===_r.FNC1}}_r.FNC1=10;class tt{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new P;let s=a.substring(0,2);for(let u of tt.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(2,u[2],a):tt.processFixedAI(2,u[1],a);if(a.length<3)throw new P;let l=a.substring(0,3);for(let u of tt.THREE_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(3,u[2],a):tt.processFixedAI(3,u[1],a);for(let u of tt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===l)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(4,u[2],a):tt.processFixedAI(4,u[1],a);if(a.length<4)throw new P;let d=a.substring(0,4);for(let u of tt.FOUR_DIGIT_DATA_LENGTH)if(u[0]===d)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(4,u[2],a):tt.processFixedAI(4,u[1],a);throw new P}static processFixedAI(a,s,l){if(l.length<a)throw new P;let d=l.substring(0,a);if(l.length<a+s)throw new P;let u=l.substring(a,a+s),m=l.substring(a+s),p="("+d+")"+u,v=tt.parseFieldsInGeneralPurpose(m);return v==null?p:p+v}static processVariableAI(a,s,l){let d=l.substring(0,a),u;l.length<a+s?u=l.length:u=a+s;let m=l.substring(a,u),p=l.substring(u),v="("+d+")"+m,A=tt.parseFieldsInGeneralPurpose(p);return A==null?v:v+A}}tt.VARIABLE_LENGTH=[],tt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",tt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",tt.VARIABLE_LENGTH,20],["22",tt.VARIABLE_LENGTH,29],["30",tt.VARIABLE_LENGTH,8],["37",tt.VARIABLE_LENGTH,8],["90",tt.VARIABLE_LENGTH,30],["91",tt.VARIABLE_LENGTH,30],["92",tt.VARIABLE_LENGTH,30],["93",tt.VARIABLE_LENGTH,30],["94",tt.VARIABLE_LENGTH,30],["95",tt.VARIABLE_LENGTH,30],["96",tt.VARIABLE_LENGTH,30],["97",tt.VARIABLE_LENGTH,3],["98",tt.VARIABLE_LENGTH,30],["99",tt.VARIABLE_LENGTH,30]],tt.THREE_DIGIT_DATA_LENGTH=[["240",tt.VARIABLE_LENGTH,30],["241",tt.VARIABLE_LENGTH,30],["242",tt.VARIABLE_LENGTH,6],["250",tt.VARIABLE_LENGTH,30],["251",tt.VARIABLE_LENGTH,30],["253",tt.VARIABLE_LENGTH,17],["254",tt.VARIABLE_LENGTH,20],["400",tt.VARIABLE_LENGTH,30],["401",tt.VARIABLE_LENGTH,30],["402",17],["403",tt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",tt.VARIABLE_LENGTH,20],["421",tt.VARIABLE_LENGTH,15],["422",3],["423",tt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],tt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",tt.VARIABLE_LENGTH,15],["391",tt.VARIABLE_LENGTH,18],["392",tt.VARIABLE_LENGTH,15],["393",tt.VARIABLE_LENGTH,18],["703",tt.VARIABLE_LENGTH,30]],tt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",tt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",tt.VARIABLE_LENGTH,20],["8003",tt.VARIABLE_LENGTH,30],["8004",tt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",tt.VARIABLE_LENGTH,30],["8008",tt.VARIABLE_LENGTH,12],["8018",18],["8020",tt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",tt.VARIABLE_LENGTH,70],["8200",tt.VARIABLE_LENGTH,70]];class Jr{constructor(a){this.buffer=new re,this.information=a}decodeAllCodes(a,s){let l=s,d=null;do{let u=this.decodeGeneralPurposeField(l,d),m=tt.parseFieldsInGeneralPurpose(u.getNewString());if(m!=null&&a.append(m),u.isRemaining()?d=""+u.getRemainingValue():d=null,l===u.getNewPosition())break;l=u.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let s=a;s<a+3;++s)if(this.information.get(s))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(a,4);return u===0?new _r(this.information.getSize(),_r.FNC1,_r.FNC1):new _r(this.information.getSize(),u-1,_r.FNC1)}let s=this.extractNumericValueFromBitArray(a,7),l=(s-8)/11,d=(s-8)%11;return new _r(a+7,l,d)}extractNumericValueFromBitArray(a,s){return Jr.extractNumericValueFromBitArray(this.information,a,s)}static extractNumericValueFromBitArray(a,s,l){let d=0;for(let u=0;u<l;++u)a.get(s+u)&&(d|=1<<l-u-1);return d}decodeGeneralPurposeField(a,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(a);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Zs(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Zs(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,s;do{let l=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),a=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),a=s.isFinished()):(s=this.parseNumericBlock(),a=s.isFinished()),!(l!==this.current.getPosition())&&!a)break}while(!a);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let s;return a.isSecondDigitFNC1()?s=new Zs(this.current.getPosition(),this.buffer.toString()):s=new Zs(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new Sa(!0,s)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let s=new Zs(this.current.getPosition(),this.buffer.toString());return new Sa(!0,s)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Sa(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let s=new Zs(this.current.getPosition(),this.buffer.toString());return new Sa(!0,s)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Sa(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let s=new Zs(this.current.getPosition(),this.buffer.toString());return new Sa(!0,s)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Sa(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(a,5);if(s>=5&&s<16)return!0;if(a+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,7);if(l>=64&&l<116)return!0;if(a+8>this.information.getSize())return!1;let d=this.extractNumericValueFromBitArray(a,8);return d>=232&&d<253}decodeIsoIec646(a){let s=this.extractNumericValueFromBitArray(a,5);if(s===15)return new rr(a+5,rr.FNC1);if(s>=5&&s<15)return new rr(a+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(a,7);if(l>=64&&l<90)return new rr(a+7,""+(l+1));if(l>=90&&l<116)return new rr(a+7,""+(l+7));let d=this.extractNumericValueFromBitArray(a,8),u;switch(d){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new U}return new rr(a+8,u)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(a,5);if(s>=5&&s<16)return!0;if(a+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(a,6);return l>=16&&l<63}decodeAlphanumeric(a){let s=this.extractNumericValueFromBitArray(a,5);if(s===15)return new rr(a+5,rr.FNC1);if(s>=5&&s<15)return new rr(a+5,"0"+(s-5));let l=this.extractNumericValueFromBitArray(a,6);if(l>=32&&l<58)return new rr(a+6,""+(l+33));let d;switch(l){case 58:d="*";break;case 59:d=",";break;case 60:d="-";break;case 61:d=".";break;case 62:d="/";break;default:throw new He("Decoding invalid alphanumeric value: "+l)}return new rr(a+6,d)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let s=0;s<5&&s+a<this.information.getSize();++s)if(s===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+s))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let s=a;s<a+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let s=0;s<4&&s+a<this.information.getSize();++s)if(this.information.get(a+s))return!1;return!0}}class ol{constructor(a){this.information=a,this.generalDecoder=new Jr(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ra extends ol{constructor(a){super(a)}encodeCompressedGtin(a,s){a.append("(01)");let l=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,s,l)}encodeCompressedGtinWithoutAI(a,s,l){for(let d=0;d<4;++d){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*d,10);u/100===0&&a.append("0"),u/10===0&&a.append("0"),a.append(u)}Ra.appendCheckDigit(a,l)}static appendCheckDigit(a,s){let l=0;for(let d=0;d<13;d++){let u=a.charAt(d+s).charCodeAt(0)-48;l+=(d&1)===0?3*u:u}l=10-l%10,l===10&&(l=0),a.append(l)}}Ra.GTIN_SIZE=40;class zr extends Ra{constructor(a){super(a)}parseInformation(){let a=new re;a.append("(01)");let s=a.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(zr.HEADER_SIZE,4);return a.append(l),this.encodeCompressedGtinWithoutAI(a,zr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(a,zr.HEADER_SIZE+44)}}zr.HEADER_SIZE=4;class Ss extends ol{constructor(a){super(a)}parseInformation(){let a=new re;return this.getGeneralDecoder().decodeAllCodes(a,Ss.HEADER_SIZE)}}Ss.HEADER_SIZE=5;class cs extends Ra{constructor(a){super(a)}encodeCompressedWeight(a,s,l){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(s,l);this.addWeightCode(a,d);let u=this.checkWeight(d),m=1e5;for(let p=0;p<5;++p)u/m===0&&a.append("0"),m/=10;a.append(u)}}class ea extends cs{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=ea.HEADER_SIZE+cs.GTIN_SIZE+ea.WEIGHT_SIZE)throw new P;let a=new re;return this.encodeCompressedGtin(a,ea.HEADER_SIZE),this.encodeCompressedWeight(a,ea.HEADER_SIZE+cs.GTIN_SIZE,ea.WEIGHT_SIZE),a.toString()}}ea.HEADER_SIZE=5,ea.WEIGHT_SIZE=15;class sc extends ea{constructor(a){super(a)}addWeightCode(a,s){a.append("(3103)")}checkWeight(a){return a}}class nc extends ea{constructor(a){super(a)}addWeightCode(a,s){s<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class sr extends Ra{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<sr.HEADER_SIZE+Ra.GTIN_SIZE)throw new P;let a=new re;this.encodeCompressedGtin(a,sr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(sr.HEADER_SIZE+Ra.GTIN_SIZE,sr.LAST_DIGIT_SIZE);a.append("(392"),a.append(s),a.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(sr.HEADER_SIZE+Ra.GTIN_SIZE+sr.LAST_DIGIT_SIZE,null);return a.append(l.getNewString()),a.toString()}}sr.HEADER_SIZE=8,sr.LAST_DIGIT_SIZE=2;class Aa extends Ra{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Aa.HEADER_SIZE+Ra.GTIN_SIZE)throw new P;let a=new re;this.encodeCompressedGtin(a,Aa.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Aa.HEADER_SIZE+Ra.GTIN_SIZE,Aa.LAST_DIGIT_SIZE);a.append("(393"),a.append(s),a.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(Aa.HEADER_SIZE+Ra.GTIN_SIZE+Aa.LAST_DIGIT_SIZE,Aa.FIRST_THREE_DIGITS_SIZE);l/100==0&&a.append("0"),l/10==0&&a.append("0"),a.append(l);let d=this.getGeneralDecoder().decodeGeneralPurposeField(Aa.HEADER_SIZE+Ra.GTIN_SIZE+Aa.LAST_DIGIT_SIZE+Aa.FIRST_THREE_DIGITS_SIZE,null);return a.append(d.getNewString()),a.toString()}}Aa.HEADER_SIZE=8,Aa.LAST_DIGIT_SIZE=2,Aa.FIRST_THREE_DIGITS_SIZE=10;class ma extends cs{constructor(a,s,l){super(a),this.dateCode=l,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ma.HEADER_SIZE+ma.GTIN_SIZE+ma.WEIGHT_SIZE+ma.DATE_SIZE)throw new P;let a=new re;return this.encodeCompressedGtin(a,ma.HEADER_SIZE),this.encodeCompressedWeight(a,ma.HEADER_SIZE+ma.GTIN_SIZE,ma.WEIGHT_SIZE),this.encodeCompressedDate(a,ma.HEADER_SIZE+ma.GTIN_SIZE+ma.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,s){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ma.DATE_SIZE);if(l==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let d=l%32;l/=32;let u=l%12+1;l/=12;let m=l;m/10==0&&a.append("0"),a.append(m),u/10==0&&a.append("0"),a.append(u),d/10==0&&a.append("0"),a.append(d)}addWeightCode(a,s){a.append("("),a.append(this.firstAIdigits),a.append(s/1e5),a.append(")")}checkWeight(a){return a%1e5}}ma.HEADER_SIZE=8,ma.WEIGHT_SIZE=20,ma.DATE_SIZE=16;function Hi(V){try{if(V.get(1))return new zr(V);if(!V.get(2))return new Ss(V);switch(Jr.extractNumericValueFromBitArray(V,1,4)){case 4:return new sc(V);case 5:return new nc(V)}switch(Jr.extractNumericValueFromBitArray(V,1,5)){case 12:return new sr(V);case 13:return new Aa(V)}switch(Jr.extractNumericValueFromBitArray(V,1,7)){case 56:return new ma(V,"310","11");case 57:return new ma(V,"320","11");case 58:return new ma(V,"310","13");case 59:return new ma(V,"320","13");case 60:return new ma(V,"310","15");case 61:return new ma(V,"320","15");case 62:return new ma(V,"310","17");case 63:return new ma(V,"320","17")}}catch(a){throw console.log(a),new He("unknown decoder: "+V)}}class ds{constructor(a,s,l,d){this.leftchar=a,this.rightchar=s,this.finderpattern=l,this.maybeLast=d}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,s){return a instanceof ds?ds.equalsOrNull(a.leftchar,s.leftchar)&&ds.equalsOrNull(a.rightchar,s.rightchar)&&ds.equalsOrNull(a.finderpattern,s.finderpattern):!1}static equalsOrNull(a,s){return a===null?s===null:ds.equals(a,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Vi{constructor(a,s,l){this.pairs=a,this.rowNumber=s,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,s){return a instanceof Vi?this.checkEqualitity(a,s)&&a.wasReversed===s.wasReversed:!1}checkEqualitity(a,s){if(!a||!s)return;let l;return a.forEach((d,u)=>{s.forEach(m=>{d.getLeftChar().getValue()===m.getLeftChar().getValue()&&d.getRightChar().getValue()===m.getRightChar().getValue()&&d.getFinderPatter().getValue()===m.getFinderPatter().getValue()&&(l=!0)})}),l}}class Ge extends Ua{constructor(a){super(...arguments),this.pairs=new Array(Ge.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,s,l){this.pairs.length=0,this.startFromEven=!1;try{return Ge.constructResult(this.decodeRow2pairs(a,s))}catch(d){this.verbose&&console.log(d)}return this.pairs.length=0,this.startFromEven=!0,Ge.constructResult(this.decodeRow2pairs(a,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,s){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,a))}catch(u){if(u instanceof P){if(!this.pairs.length)throw new P;l=!0}}if(this.checkChecksum())return this.pairs;let d;if(this.rows.length?d=!0:d=!1,this.storeRow(a,!1),d){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new P}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return a&&(this.rows=this.rows.reverse()),s}checkRows(a,s){for(let l=s;l<this.rows.length;l++){let d=this.rows[l];this.pairs.length=0;for(let m of a)this.pairs.push(m.getPairs());if(this.pairs.push(d.getPairs()),!Ge.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(a);u.push(d);try{return this.checkRows(u,l+1)}catch(m){this.verbose&&console.log(m)}}throw new P}static isValidSequence(a){for(let s of Ge.FINDER_PATTERN_SEQUENCES){if(a.length>s.length)continue;let l=!0;for(let d=0;d<a.length;d++)if(a[d].getFinderPattern().getValue()!=s[d]){l=!1;break}if(l)return!0}return!1}storeRow(a,s){let l=0,d=!1,u=!1;for(;l<this.rows.length;){let m=this.rows[l];if(m.getRowNumber()>a){u=m.isEquivalent(this.pairs);break}d=m.isEquivalent(this.pairs),l++}u||d||Ge.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Vi(this.pairs,a,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,s){for(let l of s)if(l.getPairs().length!==a.length){for(let d of l.getPairs())for(let u of a)if(ds.equals(d,u))break}}static isPartialRow(a,s){for(let l of s){let d=!0;for(let u of a){let m=!1;for(let p of l.getPairs())if(u.equals(p)){m=!0;break}if(!m){d=!1;break}}if(d)return!0}return!1}getRows(){return this.rows}static constructResult(a){let s=ar.buildBitArray(a),d=Hi(s).parseInformation(),u=a[0].getFinderPattern().getResultPoints(),m=a[a.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],m[0],m[1]];return new be(d,null,null,p,xe.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),s=a.getLeftChar(),l=a.getRightChar();if(l==null)return!1;let d=l.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);d+=v.getLeftChar().getChecksumPortion(),u++;let A=v.getRightChar();A!=null&&(d+=A.getChecksumPortion(),u++)}return d%=211,211*(u-4)+d==s.getValue()}static getNextSecondBar(a,s){let l;return a.get(s)?(l=a.getNextUnset(s),l=a.getNextSet(l)):(l=a.getNextSet(s),l=a.getNextUnset(l)),l}retrieveNextPair(a,s,l){let d=s.length%2==0;this.startFromEven&&(d=!d);let u,m=!0,p=-1;do this.findNextPair(a,s,p),u=this.parseFoundFinderPattern(a,l,d),u==null?p=Ge.getNextSecondBar(a,this.startEnd[0]):m=!1;while(m);let v=this.decodeDataCharacter(a,u,d,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new P;let A;try{A=this.decodeDataCharacter(a,u,d,!1)}catch(R){A=null,this.verbose&&console.log(R)}return new ds(v,A,u,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,s,l){let d=this.getDecodeFinderCounters();d[0]=0,d[1]=0,d[2]=0,d[3]=0;let u=a.getSize(),m;l>=0?m=l:this.isEmptyPair(s)?m=0:m=s[s.length-1].getFinderPattern().getStartEnd()[1];let p=s.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;m<u&&(v=!a.get(m),!!v);)m++;let A=0,R=m;for(let q=m;q<u;q++)if(a.get(q)!=v)d[A]++;else{if(A==3){if(p&&Ge.reverseCounters(d),Ge.isFinderPattern(d)){this.startEnd[0]=R,this.startEnd[1]=q;return}p&&Ge.reverseCounters(d),R+=d[0]+d[1],d[0]=d[2],d[1]=d[3],d[2]=0,d[3]=0,A--}else A++;d[A]=1,v=!v}throw new P}static reverseCounters(a){let s=a.length;for(let l=0;l<s/2;++l){let d=a[l];a[l]=a[s-l-1],a[s-l-1]=d}}parseFoundFinderPattern(a,s,l){let d,u,m;if(l){let A=this.startEnd[0]-1;for(;A>=0&&!a.get(A);)A--;A++,d=this.startEnd[0]-A,u=A,m=this.startEnd[1]}else u=this.startEnd[0],m=a.getNextUnset(this.startEnd[1]+1),d=m-this.startEnd[1];let p=this.getDecodeFinderCounters();M.arraycopy(p,0,p,1,p.length-1),p[0]=d;let v;try{v=this.parseFinderValue(p,Ge.FINDER_PATTERNS)}catch{return null}return new ql(v,[u,m],u,m,s)}decodeDataCharacter(a,s,l,d){let u=this.getDataCharacterCounters();for(let aa=0;aa<u.length;aa++)u[aa]=0;if(d)Ge.recordPatternInReverse(a,s.getStartEnd()[0],u);else{Ge.recordPattern(a,s.getStartEnd()[1],u);for(let aa=0,Wa=u.length-1;aa<Wa;aa++,Wa--){let pr=u[aa];u[aa]=u[Wa],u[Wa]=pr}}let m=17,p=oe.sum(new Int32Array(u))/m,v=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new P;let A=this.getOddCounts(),R=this.getEvenCounts(),q=this.getOddRoundingErrors(),Z=this.getEvenRoundingErrors();for(let aa=0;aa<u.length;aa++){let Wa=1*u[aa]/p,pr=Wa+.5;if(pr<1){if(Wa<.3)throw new P;pr=1}else if(pr>8){if(Wa>8.7)throw new P;pr=8}let tn=aa/2;(aa&1)==0?(A[tn]=pr,q[tn]=Wa-pr):(R[tn]=pr,Z[tn]=Wa-pr)}this.adjustOddEvenCounts(m);let ie=4*s.getValue()+(l?0:2)+(d?0:1)-1,ge=0,ye=0;for(let aa=A.length-1;aa>=0;aa--){if(Ge.isNotA1left(s,l,d)){let Wa=Ge.WEIGHTS[ie][2*aa];ye+=A[aa]*Wa}ge+=A[aa]}let Se=0;for(let aa=R.length-1;aa>=0;aa--)if(Ge.isNotA1left(s,l,d)){let Wa=Ge.WEIGHTS[ie][2*aa+1];Se+=R[aa]*Wa}let Re=ye+Se;if((ge&1)!=0||ge>13||ge<4)throw new P;let Xe=(13-ge)/2,$e=Ge.SYMBOL_WIDEST[Xe],Ye=9-$e,vt=Ya.getRSSvalue(A,$e,!0),bt=Ya.getRSSvalue(R,Ye,!1),or=Ge.EVEN_TOTAL_SUBSET[Xe],Mr=Ge.GSUM[Xe],gr=vt*or+bt+Mr;return new Qs(gr,Re)}static isNotA1left(a,s,l){return!(a.getValue()==0&&s&&l)}adjustOddEvenCounts(a){let s=oe.sum(new Int32Array(this.getOddCounts())),l=oe.sum(new Int32Array(this.getEvenCounts())),d=!1,u=!1;s>13?u=!0:s<4&&(d=!0);let m=!1,p=!1;l>13?p=!0:l<4&&(m=!0);let v=s+l-a,A=(s&1)==1,R=(l&1)==0;if(v==1)if(A){if(R)throw new P;u=!0}else{if(!R)throw new P;p=!0}else if(v==-1)if(A){if(R)throw new P;d=!0}else{if(!R)throw new P;m=!0}else if(v==0){if(A){if(!R)throw new P;s<l?(d=!0,p=!0):(u=!0,m=!0)}else if(R)throw new P}else throw new P;if(d){if(u)throw new P;Ge.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&Ge.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new P;Ge.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Ge.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ge.SYMBOL_WIDEST=[7,5,4,3,1],Ge.EVEN_TOTAL_SUBSET=[4,20,52,104,204],Ge.GSUM=[0,348,1388,2948,3988],Ge.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],Ge.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],Ge.FINDER_PAT_A=0,Ge.FINDER_PAT_B=1,Ge.FINDER_PAT_C=2,Ge.FINDER_PAT_D=3,Ge.FINDER_PAT_E=4,Ge.FINDER_PAT_F=5,Ge.FINDER_PATTERN_SEQUENCES=[[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_C,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_C],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_E,Ge.FINDER_PAT_B,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F],[Ge.FINDER_PAT_A,Ge.FINDER_PAT_A,Ge.FINDER_PAT_B,Ge.FINDER_PAT_B,Ge.FINDER_PAT_C,Ge.FINDER_PAT_D,Ge.FINDER_PAT_D,Ge.FINDER_PAT_E,Ge.FINDER_PAT_E,Ge.FINDER_PAT_F,Ge.FINDER_PAT_F]],Ge.MAX_PAIRS=11;class Gl extends Qs{constructor(a,s,l){super(a,s),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Xt extends Ua{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,s,l){const d=this.decodePair(s,!1,a,l);Xt.addOrTally(this.possibleLeftPairs,d),s.reverse();let u=this.decodePair(s,!0,a,l);Xt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let m of this.possibleLeftPairs)if(m.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Xt.checkChecksum(m,p))return Xt.constructResult(m,p)}throw new P}static addOrTally(a,s){if(s==null)return;let l=!1;for(let d of a)if(d.getValue()===s.getValue()){d.incrementCount(),l=!0;break}l||a.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,s){let l=4537077*a.getValue()+s.getValue(),d=new String(l).toString(),u=new re;for(let A=13-d.length;A>0;A--)u.append("0");u.append(d);let m=0;for(let A=0;A<13;A++){let R=u.charAt(A).charCodeAt(0)-48;m+=(A&1)===0?3*R:R}m=10-m%10,m===10&&(m=0),u.append(m.toString());let p=a.getFinderPattern().getResultPoints(),v=s.getFinderPattern().getResultPoints();return new be(u.toString(),null,0,[p[0],p[1],v[0],v[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(a,s){let l=(a.getChecksumPortion()+16*s.getChecksumPortion())%79,d=9*a.getFinderPattern().getValue()+s.getFinderPattern().getValue();return d>72&&d--,d>8&&d--,l===d}decodePair(a,s,l,d){try{let u=this.findFinderPattern(a,s),m=this.parseFoundFinderPattern(a,l,s,u),p=d==null?null:d.get(X.NEED_RESULT_POINT_CALLBACK);if(p!=null){let R=(u[0]+u[1])/2;s&&(R=a.getSize()-1-R),p.foundPossibleResultPoint(new Me(R,l))}let v=this.decodeDataCharacter(a,m,!0),A=this.decodeDataCharacter(a,m,!1);return new Gl(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),m)}catch{return null}}decodeDataCharacter(a,s,l){let d=this.getDataCharacterCounters();for(let Se=0;Se<d.length;Se++)d[Se]=0;if(l)Lt.recordPatternInReverse(a,s.getStartEnd()[0],d);else{Lt.recordPattern(a,s.getStartEnd()[1]+1,d);for(let Se=0,Re=d.length-1;Se<Re;Se++,Re--){let Xe=d[Se];d[Se]=d[Re],d[Re]=Xe}}let u=l?16:15,m=oe.sum(new Int32Array(d))/u,p=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let Se=0;Se<d.length;Se++){let Re=d[Se]/m,Xe=Math.floor(Re+.5);Xe<1?Xe=1:Xe>8&&(Xe=8);let $e=Math.floor(Se/2);(Se&1)===0?(p[$e]=Xe,A[$e]=Re-Xe):(v[$e]=Xe,R[$e]=Re-Xe)}this.adjustOddEvenCounts(l,u);let q=0,Z=0;for(let Se=p.length-1;Se>=0;Se--)Z*=9,Z+=p[Se],q+=p[Se];let ie=0,ge=0;for(let Se=v.length-1;Se>=0;Se--)ie*=9,ie+=v[Se],ge+=v[Se];let ye=Z+3*ie;if(l){if((q&1)!==0||q>12||q<4)throw new P;let Se=(12-q)/2,Re=Xt.OUTSIDE_ODD_WIDEST[Se],Xe=9-Re,$e=Ya.getRSSvalue(p,Re,!1),Ye=Ya.getRSSvalue(v,Xe,!0),vt=Xt.OUTSIDE_EVEN_TOTAL_SUBSET[Se],bt=Xt.OUTSIDE_GSUM[Se];return new Qs($e*vt+Ye+bt,ye)}else{if((ge&1)!==0||ge>10||ge<4)throw new P;let Se=(10-ge)/2,Re=Xt.INSIDE_ODD_WIDEST[Se],Xe=9-Re,$e=Ya.getRSSvalue(p,Re,!0),Ye=Ya.getRSSvalue(v,Xe,!1),vt=Xt.INSIDE_ODD_TOTAL_SUBSET[Se],bt=Xt.INSIDE_GSUM[Se];return new Qs(Ye*vt+$e+bt,ye)}}findFinderPattern(a,s){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let d=a.getSize(),u=!1,m=0;for(;m<d&&(u=!a.get(m),s!==u);)m++;let p=0,v=m;for(let A=m;A<d;A++)if(a.get(A)!==u)l[p]++;else{if(p===3){if(Ua.isFinderPattern(l))return[v,A];v+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,p--}else p++;l[p]=1,u=!u}throw new P}parseFoundFinderPattern(a,s,l,d){let u=a.get(d[0]),m=d[0]-1;for(;m>=0&&u!==a.get(m);)m--;m++;const p=d[0]-m,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);M.arraycopy(v,0,A,1,v.length-1),A[0]=p;const R=this.parseFinderValue(A,Xt.FINDER_PATTERNS);let q=m,Z=d[1];return l&&(q=a.getSize()-1-q,Z=a.getSize()-1-Z),new ql(R,[m,d[1]],q,Z,s)}adjustOddEvenCounts(a,s){let l=oe.sum(new Int32Array(this.getOddCounts())),d=oe.sum(new Int32Array(this.getEvenCounts())),u=!1,m=!1,p=!1,v=!1;a?(l>12?m=!0:l<4&&(u=!0),d>12?v=!0:d<4&&(p=!0)):(l>11?m=!0:l<5&&(u=!0),d>10?v=!0:d<4&&(p=!0));let A=l+d-s,R=(l&1)===(a?1:0),q=(d&1)===1;if(A===1)if(R){if(q)throw new P;m=!0}else{if(!q)throw new P;v=!0}else if(A===-1)if(R){if(q)throw new P;u=!0}else{if(!q)throw new P;p=!0}else if(A===0){if(R){if(!q)throw new P;l<d?(u=!0,v=!0):(m=!0,p=!0)}else if(q)throw new P}else throw new P;if(u){if(m)throw new P;Ua.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(m&&Ua.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new P;Ua.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&Ua.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Xt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Xt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Xt.OUTSIDE_GSUM=[0,161,961,2015,2715],Xt.INSIDE_GSUM=[0,336,1036,1516],Xt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Xt.INSIDE_ODD_WIDEST=[2,4,6,8],Xt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class As extends Lt{constructor(a,s){super(),this.readers=[],this.verbose=s===!0;const l=a?a.get(X.POSSIBLE_FORMATS):null,d=a&&a.get(X.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(xe.EAN_13)||l.includes(xe.UPC_A)||l.includes(xe.EAN_8)||l.includes(xe.UPC_E))&&this.readers.push(new il(a)),l.includes(xe.CODE_39)&&this.readers.push(new Yt(d)),l.includes(xe.CODE_128)&&this.readers.push(new Qe),l.includes(xe.ITF)&&this.readers.push(new ot),l.includes(xe.RSS_14)&&this.readers.push(new Xt),l.includes(xe.RSS_EXPANDED)&&this.readers.push(new Ge(this.verbose))):(this.readers.push(new il(a)),this.readers.push(new Yt),this.readers.push(new il(a)),this.readers.push(new Qe),this.readers.push(new ot),this.readers.push(new Xt),this.readers.push(new Ge(this.verbose)))}decodeRow(a,s,l){for(let d=0;d<this.readers.length;d++)try{return this.readers[d].decodeRow(a,s,l)}catch{}throw new P}reset(){this.readers.forEach(a=>a.reset())}}class lc extends ae{constructor(a=500,s){super(new As(s),a,s)}}class Rt{constructor(a,s,l){this.ecCodewords=a,this.ecBlocks=[s],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ut{constructor(a,s){this.count=a,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Et{constructor(a,s,l,d,u,m){this.versionNumber=a,this.symbolSizeRows=s,this.symbolSizeColumns=l,this.dataRegionSizeRows=d,this.dataRegionSizeColumns=u,this.ecBlocks=m;let p=0;const v=m.getECCodewords(),A=m.getECBlocks();for(let R of A)p+=R.getCount()*(R.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,s){if((a&1)!==0||(s&1)!==0)throw new U;for(let l of Et.VERSIONS)if(l.symbolSizeRows===a&&l.symbolSizeColumns===s)return l;throw new U}toString(){return""+this.versionNumber}static buildVersions(){return[new Et(1,10,10,8,8,new Rt(5,new Ut(1,3))),new Et(2,12,12,10,10,new Rt(7,new Ut(1,5))),new Et(3,14,14,12,12,new Rt(10,new Ut(1,8))),new Et(4,16,16,14,14,new Rt(12,new Ut(1,12))),new Et(5,18,18,16,16,new Rt(14,new Ut(1,18))),new Et(6,20,20,18,18,new Rt(18,new Ut(1,22))),new Et(7,22,22,20,20,new Rt(20,new Ut(1,30))),new Et(8,24,24,22,22,new Rt(24,new Ut(1,36))),new Et(9,26,26,24,24,new Rt(28,new Ut(1,44))),new Et(10,32,32,14,14,new Rt(36,new Ut(1,62))),new Et(11,36,36,16,16,new Rt(42,new Ut(1,86))),new Et(12,40,40,18,18,new Rt(48,new Ut(1,114))),new Et(13,44,44,20,20,new Rt(56,new Ut(1,144))),new Et(14,48,48,22,22,new Rt(68,new Ut(1,174))),new Et(15,52,52,24,24,new Rt(42,new Ut(2,102))),new Et(16,64,64,14,14,new Rt(56,new Ut(2,140))),new Et(17,72,72,16,16,new Rt(36,new Ut(4,92))),new Et(18,80,80,18,18,new Rt(48,new Ut(4,114))),new Et(19,88,88,20,20,new Rt(56,new Ut(4,144))),new Et(20,96,96,22,22,new Rt(68,new Ut(4,174))),new Et(21,104,104,24,24,new Rt(56,new Ut(6,136))),new Et(22,120,120,18,18,new Rt(68,new Ut(6,175))),new Et(23,132,132,20,20,new Rt(62,new Ut(8,163))),new Et(24,144,144,22,22,new Rt(62,new Ut(8,156),new Ut(2,155))),new Et(25,8,18,6,16,new Rt(7,new Ut(1,5))),new Et(26,8,32,6,14,new Rt(11,new Ut(1,10))),new Et(27,12,26,10,24,new Rt(14,new Ut(1,16))),new Et(28,12,36,10,16,new Rt(18,new Ut(1,22))),new Et(29,16,36,14,16,new Rt(24,new Ut(1,32))),new Et(30,16,48,14,22,new Rt(28,new Ut(1,49)))]}}Et.VERSIONS=Et.buildVersions();class qi{constructor(a){const s=a.getHeight();if(s<8||s>144||(s&1)!==0)throw new U;this.version=qi.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new W(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const s=a.getHeight(),l=a.getWidth();return Et.getVersionForDimensions(s,l)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let s=0,l=4,d=0;const u=this.mappingBitMatrix.getHeight(),m=this.mappingBitMatrix.getWidth();let p=!1,v=!1,A=!1,R=!1;do if(l===u&&d===0&&!p)a[s++]=this.readCorner1(u,m)&255,l-=2,d+=2,p=!0;else if(l===u-2&&d===0&&(m&3)!==0&&!v)a[s++]=this.readCorner2(u,m)&255,l-=2,d+=2,v=!0;else if(l===u+4&&d===2&&(m&7)===0&&!A)a[s++]=this.readCorner3(u,m)&255,l-=2,d+=2,A=!0;else if(l===u-2&&d===0&&(m&7)===4&&!R)a[s++]=this.readCorner4(u,m)&255,l-=2,d+=2,R=!0;else{do l<u&&d>=0&&!this.readMappingMatrix.get(d,l)&&(a[s++]=this.readUtah(l,d,u,m)&255),l-=2,d+=2;while(l>=0&&d<m);l+=1,d+=3;do l>=0&&d<m&&!this.readMappingMatrix.get(d,l)&&(a[s++]=this.readUtah(l,d,u,m)&255),l+=2,d-=2;while(l<u&&d>=0);l+=3,d+=1}while(l<u||d<m);if(s!==this.version.getTotalCodewords())throw new U;return a}readModule(a,s,l,d){return a<0&&(a+=l,s+=4-(l+4&7)),s<0&&(s+=d,a+=4-(d+4&7)),this.readMappingMatrix.set(s,a),this.mappingBitMatrix.get(s,a)}readUtah(a,s,l,d){let u=0;return this.readModule(a-2,s-2,l,d)&&(u|=1),u<<=1,this.readModule(a-2,s-1,l,d)&&(u|=1),u<<=1,this.readModule(a-1,s-2,l,d)&&(u|=1),u<<=1,this.readModule(a-1,s-1,l,d)&&(u|=1),u<<=1,this.readModule(a-1,s,l,d)&&(u|=1),u<<=1,this.readModule(a,s-2,l,d)&&(u|=1),u<<=1,this.readModule(a,s-1,l,d)&&(u|=1),u<<=1,this.readModule(a,s,l,d)&&(u|=1),u}readCorner1(a,s){let l=0;return this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,1,a,s)&&(l|=1),l<<=1,this.readModule(a-1,2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l<<=1,this.readModule(2,s-1,a,s)&&(l|=1),l<<=1,this.readModule(3,s-1,a,s)&&(l|=1),l}readCorner2(a,s){let l=0;return this.readModule(a-3,0,a,s)&&(l|=1),l<<=1,this.readModule(a-2,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(0,s-4,a,s)&&(l|=1),l<<=1,this.readModule(0,s-3,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l}readCorner3(a,s){let l=0;return this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,s-1,a,s)&&(l|=1),l<<=1,this.readModule(0,s-3,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-3,a,s)&&(l|=1),l<<=1,this.readModule(1,s-2,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l}readCorner4(a,s){let l=0;return this.readModule(a-3,0,a,s)&&(l|=1),l<<=1,this.readModule(a-2,0,a,s)&&(l|=1),l<<=1,this.readModule(a-1,0,a,s)&&(l|=1),l<<=1,this.readModule(0,s-2,a,s)&&(l|=1),l<<=1,this.readModule(0,s-1,a,s)&&(l|=1),l<<=1,this.readModule(1,s-1,a,s)&&(l|=1),l<<=1,this.readModule(2,s-1,a,s)&&(l|=1),l<<=1,this.readModule(3,s-1,a,s)&&(l|=1),l}extractDataRegion(a){const s=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(a.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const d=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),m=s/d|0,p=l/u|0,v=m*d,A=p*u,R=new W(A,v);for(let q=0;q<m;++q){const Z=q*d;for(let ie=0;ie<p;++ie){const ge=ie*u;for(let ye=0;ye<d;++ye){const Se=q*(d+2)+1+ye,Re=Z+ye;for(let Xe=0;Xe<u;++Xe){const $e=ie*(u+2)+1+Xe;if(a.get($e,Se)){const Ye=ge+Xe;R.set(Ye,Re)}}}}}return R}}class Yl{constructor(a,s){this.numDataCodewords=a,this.codewords=s}static getDataBlocks(a,s){const l=s.getECBlocks();let d=0;const u=l.getECBlocks();for(let ye of u)d+=ye.getCount();const m=new Array(d);let p=0;for(let ye of u)for(let Se=0;Se<ye.getCount();Se++){const Re=ye.getDataCodewords(),Xe=l.getECCodewords()+Re;m[p++]=new Yl(Re,new Uint8Array(Xe))}const A=m[0].codewords.length-l.getECCodewords(),R=A-1;let q=0;for(let ye=0;ye<R;ye++)for(let Se=0;Se<p;Se++)m[Se].codewords[ye]=a[q++];const Z=s.getVersionNumber()===24,ie=Z?8:p;for(let ye=0;ye<ie;ye++)m[ye].codewords[A-1]=a[q++];const ge=m[0].codewords.length;for(let ye=A;ye<ge;ye++)for(let Se=0;Se<p;Se++){const Re=Z?(Se+8)%p:Se,Xe=Z&&Re>7?ye-1:ye;m[Re].codewords[Xe]=a[q++]}if(q!==a.length)throw new E;return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class hr{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new E(""+a);let s=0,l=this.bitOffset,d=this.byteOffset;const u=this.bytes;if(l>0){const m=8-l,p=a<m?a:m,v=m-p,A=255>>8-p<<v;s=(u[d]&A)>>v,a-=p,l+=p,l===8&&(l=0,d++)}if(a>0){for(;a>=8;)s=s<<8|u[d]&255,d++,a-=8;if(a>0){const m=8-a,p=255>>m<<m;s=s<<a|(u[d]&p)>>m,l+=a}}return this.bitOffset=l,this.byteOffset=d,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Ea;(function(V){V[V.PAD_ENCODE=0]="PAD_ENCODE",V[V.ASCII_ENCODE=1]="ASCII_ENCODE",V[V.C40_ENCODE=2]="C40_ENCODE",V[V.TEXT_ENCODE=3]="TEXT_ENCODE",V[V.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",V[V.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",V[V.BASE256_ENCODE=6]="BASE256_ENCODE"})(Ea||(Ea={}));class Es{static decode(a){const s=new hr(a),l=new re,d=new re,u=new Array;let m=Ea.ASCII_ENCODE;do if(m===Ea.ASCII_ENCODE)m=this.decodeAsciiSegment(s,l,d);else{switch(m){case Ea.C40_ENCODE:this.decodeC40Segment(s,l);break;case Ea.TEXT_ENCODE:this.decodeTextSegment(s,l);break;case Ea.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,l);break;case Ea.EDIFACT_ENCODE:this.decodeEdifactSegment(s,l);break;case Ea.BASE256_ENCODE:this.decodeBase256Segment(s,l,u);break;default:throw new U}m=Ea.ASCII_ENCODE}while(m!==Ea.PAD_ENCODE&&s.available()>0);return d.length()>0&&l.append(d.toString()),new Je(a,l.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(a,s,l){let d=!1;do{let u=a.readBits(8);if(u===0)throw new U;if(u<=128)return d&&(u+=128),s.append(String.fromCharCode(u-1)),Ea.ASCII_ENCODE;if(u===129)return Ea.PAD_ENCODE;if(u<=229){const m=u-130;m<10&&s.append("0"),s.append(""+m)}else switch(u){case 230:return Ea.C40_ENCODE;case 231:return Ea.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:d=!0;break;case 236:s.append("[)>05"),l.insert(0,"");break;case 237:s.append("[)>06"),l.insert(0,"");break;case 238:return Ea.ANSIX12_ENCODE;case 239:return Ea.TEXT_ENCODE;case 240:return Ea.EDIFACT_ENCODE;case 241:break;default:if(u!==254||a.available()!==0)throw new U;break}}while(a.available()>0);return Ea.ASCII_ENCODE}static decodeC40Segment(a,s){let l=!1;const d=[];let u=0;do{if(a.available()===8)return;const m=a.readBits(8);if(m===254)return;this.parseTwoBytes(m,a.readBits(8),d);for(let p=0;p<3;p++){const v=d[p];switch(u){case 0:if(v<3)u=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else throw new U;break;case 1:l?(s.append(String.fromCharCode(v+128)),l=!1):s.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else switch(v){case 27:s.append("");break;case 30:l=!0;break;default:throw new U}u=0;break;case 3:l?(s.append(String.fromCharCode(v+224)),l=!1):s.append(String.fromCharCode(v+96)),u=0;break;default:throw new U}}}while(a.available()>0)}static decodeTextSegment(a,s){let l=!1,d=[],u=0;do{if(a.available()===8)return;const m=a.readBits(8);if(m===254)return;this.parseTwoBytes(m,a.readBits(8),d);for(let p=0;p<3;p++){const v=d[p];switch(u){case 0:if(v<3)u=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else throw new U;break;case 1:l?(s.append(String.fromCharCode(v+128)),l=!1):s.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A)}else switch(v){case 27:s.append("");break;case 30:l=!0;break;default:throw new U}u=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];l?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),l=!1):s.append(A),u=0}else throw new U;break;default:throw new U}}}while(a.available()>0)}static decodeAnsiX12Segment(a,s){const l=[];do{if(a.available()===8)return;const d=a.readBits(8);if(d===254)return;this.parseTwoBytes(d,a.readBits(8),l);for(let u=0;u<3;u++){const m=l[u];switch(m){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(m<14)s.append(String.fromCharCode(m+44));else if(m<40)s.append(String.fromCharCode(m+51));else throw new U;break}}}while(a.available()>0)}static parseTwoBytes(a,s,l){let d=(a<<8)+s-1,u=Math.floor(d/1600);l[0]=u,d-=u*1600,u=Math.floor(d/40),l[1]=u,l[2]=d-u*40}static decodeEdifactSegment(a,s){do{if(a.available()<=16)return;for(let l=0;l<4;l++){let d=a.readBits(6);if(d===31){const u=8-a.getBitOffset();u!==8&&a.readBits(u);return}(d&32)===0&&(d|=64),s.append(String.fromCharCode(d))}}while(a.available()>0)}static decodeBase256Segment(a,s,l){let d=1+a.getByteOffset();const u=this.unrandomize255State(a.readBits(8),d++);let m;if(u===0?m=a.available()/8|0:u<250?m=u:m=250*(u-249)+this.unrandomize255State(a.readBits(8),d++),m<0)throw new U;const p=new Uint8Array(m);for(let v=0;v<m;v++){if(a.available()<8)throw new U;p[v]=this.unrandomize255State(a.readBits(8),d++)}l.push(p);try{s.append(ce.decode(p,te.ISO88591))}catch(v){throw new He("Platform does not support required encoding: "+v.message)}}static unrandomize255State(a,s){const l=149*s%255+1,d=a-l;return d>=0?d:d+256}}Es.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Es.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Es.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Es.TEXT_SHIFT2_SET_CHARS=Es.C40_SHIFT2_SET_CHARS,Es.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Xl{constructor(){this.rsDecoder=new et(ve.DATA_MATRIX_FIELD_256)}decode(a){const s=new qi(a),l=s.getVersion(),d=s.readCodewords(),u=Yl.getDataBlocks(d,l);let m=0;for(let A of u)m+=A.getNumDataCodewords();const p=new Uint8Array(m),v=u.length;for(let A=0;A<v;A++){const R=u[A],q=R.getCodewords(),Z=R.getNumDataCodewords();this.correctErrors(q,Z);for(let ie=0;ie<Z;ie++)p[ie*v+A]=q[ie]}return Es.decode(p)}correctErrors(a,s){const l=new Int32Array(a);try{this.rsDecoder.decode(l,a.length-s)}catch{throw new T}for(let d=0;d<s;d++)a[d]=l[d]}}class wa{constructor(a){this.image=a,this.rectangleDetector=new ft(this.image)}detect(){const a=this.rectangleDetector.detect();let s=this.detectSolid1(a);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new P;s=this.shiftToModuleCenter(s);const l=s[0],d=s[1],u=s[2],m=s[3];let p=this.transitionsBetween(l,m)+1,v=this.transitionsBetween(u,m)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let A=wa.sampleGrid(this.image,l,d,u,m,p,v);return new jt(A,[l,d,u,m])}static shiftPoint(a,s,l){let d=(s.getX()-a.getX())/(l+1),u=(s.getY()-a.getY())/(l+1);return new Me(a.getX()+d,a.getY()+u)}static moveAway(a,s,l){let d=a.getX(),u=a.getY();return d<s?d-=1:d+=1,u<l?u-=1:u+=1,new Me(d,u)}detectSolid1(a){let s=a[0],l=a[1],d=a[3],u=a[2],m=this.transitionsBetween(s,l),p=this.transitionsBetween(l,d),v=this.transitionsBetween(d,u),A=this.transitionsBetween(u,s),R=m,q=[u,s,l,d];return R>p&&(R=p,q[0]=s,q[1]=l,q[2]=d,q[3]=u),R>v&&(R=v,q[0]=l,q[1]=d,q[2]=u,q[3]=s),R>A&&(q[0]=d,q[1]=u,q[2]=s,q[3]=l),q}detectSolid2(a){let s=a[0],l=a[1],d=a[2],u=a[3],m=this.transitionsBetween(s,u),p=wa.shiftPoint(l,d,(m+1)*4),v=wa.shiftPoint(d,l,(m+1)*4),A=this.transitionsBetween(p,s),R=this.transitionsBetween(v,u);return A<R?(a[0]=s,a[1]=l,a[2]=d,a[3]=u):(a[0]=l,a[1]=d,a[2]=u,a[3]=s),a}correctTopRight(a){let s=a[0],l=a[1],d=a[2],u=a[3],m=this.transitionsBetween(s,u),p=this.transitionsBetween(l,u),v=wa.shiftPoint(s,l,(p+1)*4),A=wa.shiftPoint(d,l,(m+1)*4);m=this.transitionsBetween(v,u),p=this.transitionsBetween(A,u);let R=new Me(u.getX()+(d.getX()-l.getX())/(m+1),u.getY()+(d.getY()-l.getY())/(m+1)),q=new Me(u.getX()+(s.getX()-l.getX())/(p+1),u.getY()+(s.getY()-l.getY())/(p+1));if(!this.isValid(R))return this.isValid(q)?q:null;if(!this.isValid(q))return R;let Z=this.transitionsBetween(v,R)+this.transitionsBetween(A,R),ie=this.transitionsBetween(v,q)+this.transitionsBetween(A,q);return Z>ie?R:q}shiftToModuleCenter(a){let s=a[0],l=a[1],d=a[2],u=a[3],m=this.transitionsBetween(s,u)+1,p=this.transitionsBetween(d,u)+1,v=wa.shiftPoint(s,l,p*4),A=wa.shiftPoint(d,l,m*4);m=this.transitionsBetween(v,u)+1,p=this.transitionsBetween(A,u)+1,(m&1)===1&&(m+=1),(p&1)===1&&(p+=1);let R=(s.getX()+l.getX()+d.getX()+u.getX())/4,q=(s.getY()+l.getY()+d.getY()+u.getY())/4;s=wa.moveAway(s,R,q),l=wa.moveAway(l,R,q),d=wa.moveAway(d,R,q),u=wa.moveAway(u,R,q);let Z,ie;return v=wa.shiftPoint(s,l,p*4),v=wa.shiftPoint(v,u,m*4),Z=wa.shiftPoint(l,s,p*4),Z=wa.shiftPoint(Z,d,m*4),A=wa.shiftPoint(d,u,p*4),A=wa.shiftPoint(A,l,m*4),ie=wa.shiftPoint(u,d,p*4),ie=wa.shiftPoint(ie,s,m*4),[v,Z,A,ie]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,s,l,d,u,m,p){return Bt.getInstance().sampleGrid(a,m,p,.5,.5,m-.5,.5,m-.5,p-.5,.5,p-.5,s.getX(),s.getY(),u.getX(),u.getY(),d.getX(),d.getY(),l.getX(),l.getY())}transitionsBetween(a,s){let l=Math.trunc(a.getX()),d=Math.trunc(a.getY()),u=Math.trunc(s.getX()),m=Math.trunc(s.getY()),p=Math.abs(m-d)>Math.abs(u-l);if(p){let ye=l;l=d,d=ye,ye=u,u=m,m=ye}let v=Math.abs(u-l),A=Math.abs(m-d),R=-v/2,q=d<m?1:-1,Z=l<u?1:-1,ie=0,ge=this.image.get(p?d:l,p?l:d);for(let ye=l,Se=d;ye!==u;ye+=Z){let Re=this.image.get(p?Se:ye,p?ye:Se);if(Re!==ge&&(ie++,ge=Re),R+=A,R>0){if(Se===m)break;Se+=q,R-=v}}return ie}}class Fr{constructor(){this.decoder=new Xl}decode(a,s=null){let l,d;if(s!=null&&s.has(X.PURE_BARCODE)){const A=Fr.extractPureBits(a.getBlackMatrix());l=this.decoder.decode(A),d=Fr.NO_POINTS}else{const A=new wa(a.getBlackMatrix()).detect();l=this.decoder.decode(A.getBits()),d=A.getPoints()}const u=l.getRawBytes(),m=new be(l.getText(),u,8*u.length,d,xe.DATA_MATRIX,M.currentTimeMillis()),p=l.getByteSegments();p!=null&&m.putMetadata(je.BYTE_SEGMENTS,p);const v=l.getECLevel();return v!=null&&m.putMetadata(je.ERROR_CORRECTION_LEVEL,v),m}reset(){}static extractPureBits(a){const s=a.getTopLeftOnBit(),l=a.getBottomRightOnBit();if(s==null||l==null)throw new P;const d=this.moduleSize(s,a);let u=s[1];const m=l[1];let p=s[0];const A=(l[0]-p+1)/d,R=(m-u+1)/d;if(A<=0||R<=0)throw new P;const q=d/2;u+=q,p+=q;const Z=new W(A,R);for(let ie=0;ie<R;ie++){const ge=u+ie*d;for(let ye=0;ye<A;ye++)a.get(p+ye*d,ge)&&Z.set(ye,ie)}return Z}static moduleSize(a,s){const l=s.getWidth();let d=a[0];const u=a[1];for(;d<l&&s.get(d,u);)d++;if(d===l)throw new P;const m=d-a[0];if(m===0)throw new P;return m}}Fr.NO_POINTS=[];class Yd extends ae{constructor(a=500){super(new Fr,a)}}var Xa;(function(V){V[V.L=0]="L",V[V.M=1]="M",V[V.Q=2]="Q",V[V.H=3]="H"})(Xa||(Xa={}));class Kt{constructor(a,s,l){this.value=a,this.stringValue=s,this.bits=l,Kt.FOR_BITS.set(l,this),Kt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Kt.L;case"M":return Kt.M;case"Q":return Kt.Q;case"H":return Kt.H;default:throw new S(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Kt))return!1;const s=a;return this.value===s.value}static forBits(a){if(a<0||a>=Kt.FOR_BITS.size)throw new E;return Kt.FOR_BITS.get(a)}}Kt.FOR_BITS=new Map,Kt.FOR_VALUE=new Map,Kt.L=new Kt(Xa.L,"L",1),Kt.M=new Kt(Xa.M,"M",0),Kt.Q=new Kt(Xa.Q,"Q",3),Kt.H=new Kt(Xa.H,"H",2);class $a{constructor(a){this.errorCorrectionLevel=Kt.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,s){return D.bitCount(a^s)}static decodeFormatInformation(a,s){const l=$a.doDecodeFormatInformation(a,s);return l!==null?l:$a.doDecodeFormatInformation(a^$a.FORMAT_INFO_MASK_QR,s^$a.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,s){let l=Number.MAX_SAFE_INTEGER,d=0;for(const u of $a.FORMAT_INFO_DECODE_LOOKUP){const m=u[0];if(m===a||m===s)return new $a(u[1]);let p=$a.numBitsDiffering(a,m);p<l&&(d=u[1],l=p),a!==s&&(p=$a.numBitsDiffering(s,m),p<l&&(d=u[1],l=p))}return l<=3?new $a(d):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof $a))return!1;const s=a;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}$a.FORMAT_INFO_MASK_QR=21522,$a.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ae{constructor(a,...s){this.ecCodewordsPerBlock=a,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const s=this.ecBlocks;for(const l of s)a+=l.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class se{constructor(a,s){this.count=a,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(a,s,...l){this.versionNumber=a,this.alignmentPatternCenters=s,this.ecBlocks=l;let d=0;const u=l[0].getECCodewordsPerBlock(),m=l[0].getECBlocks();for(const p of m)d+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new U;try{return this.getVersionForNumber((a-17)/4)}catch{throw new U}}static getVersionForNumber(a){if(a<1||a>40)throw new E;return it.VERSIONS[a-1]}static decodeVersionInformation(a){let s=Number.MAX_SAFE_INTEGER,l=0;for(let d=0;d<it.VERSION_DECODE_INFO.length;d++){const u=it.VERSION_DECODE_INFO[d];if(u===a)return it.getVersionForNumber(d+7);const m=$a.numBitsDiffering(a,u);m<s&&(l=d+7,s=m)}return s<=3?it.getVersionForNumber(l):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),s=new W(a);s.setRegion(0,0,9,9),s.setRegion(a-8,0,8,9),s.setRegion(0,a-8,9,8);const l=this.alignmentPatternCenters.length;for(let d=0;d<l;d++){const u=this.alignmentPatternCenters[d]-2;for(let m=0;m<l;m++)d===0&&(m===0||m===l-1)||d===l-1&&m===0||s.setRegion(this.alignmentPatternCenters[m]-2,u,5,5)}return s.setRegion(6,9,1,a-17),s.setRegion(9,6,a-17,1),this.versionNumber>6&&(s.setRegion(a-11,0,3,6),s.setRegion(0,a-11,6,3)),s}toString(){return""+this.versionNumber}}it.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),it.VERSIONS=[new it(1,new Int32Array(0),new Ae(7,new se(1,19)),new Ae(10,new se(1,16)),new Ae(13,new se(1,13)),new Ae(17,new se(1,9))),new it(2,Int32Array.from([6,18]),new Ae(10,new se(1,34)),new Ae(16,new se(1,28)),new Ae(22,new se(1,22)),new Ae(28,new se(1,16))),new it(3,Int32Array.from([6,22]),new Ae(15,new se(1,55)),new Ae(26,new se(1,44)),new Ae(18,new se(2,17)),new Ae(22,new se(2,13))),new it(4,Int32Array.from([6,26]),new Ae(20,new se(1,80)),new Ae(18,new se(2,32)),new Ae(26,new se(2,24)),new Ae(16,new se(4,9))),new it(5,Int32Array.from([6,30]),new Ae(26,new se(1,108)),new Ae(24,new se(2,43)),new Ae(18,new se(2,15),new se(2,16)),new Ae(22,new se(2,11),new se(2,12))),new it(6,Int32Array.from([6,34]),new Ae(18,new se(2,68)),new Ae(16,new se(4,27)),new Ae(24,new se(4,19)),new Ae(28,new se(4,15))),new it(7,Int32Array.from([6,22,38]),new Ae(20,new se(2,78)),new Ae(18,new se(4,31)),new Ae(18,new se(2,14),new se(4,15)),new Ae(26,new se(4,13),new se(1,14))),new it(8,Int32Array.from([6,24,42]),new Ae(24,new se(2,97)),new Ae(22,new se(2,38),new se(2,39)),new Ae(22,new se(4,18),new se(2,19)),new Ae(26,new se(4,14),new se(2,15))),new it(9,Int32Array.from([6,26,46]),new Ae(30,new se(2,116)),new Ae(22,new se(3,36),new se(2,37)),new Ae(20,new se(4,16),new se(4,17)),new Ae(24,new se(4,12),new se(4,13))),new it(10,Int32Array.from([6,28,50]),new Ae(18,new se(2,68),new se(2,69)),new Ae(26,new se(4,43),new se(1,44)),new Ae(24,new se(6,19),new se(2,20)),new Ae(28,new se(6,15),new se(2,16))),new it(11,Int32Array.from([6,30,54]),new Ae(20,new se(4,81)),new Ae(30,new se(1,50),new se(4,51)),new Ae(28,new se(4,22),new se(4,23)),new Ae(24,new se(3,12),new se(8,13))),new it(12,Int32Array.from([6,32,58]),new Ae(24,new se(2,92),new se(2,93)),new Ae(22,new se(6,36),new se(2,37)),new Ae(26,new se(4,20),new se(6,21)),new Ae(28,new se(7,14),new se(4,15))),new it(13,Int32Array.from([6,34,62]),new Ae(26,new se(4,107)),new Ae(22,new se(8,37),new se(1,38)),new Ae(24,new se(8,20),new se(4,21)),new Ae(22,new se(12,11),new se(4,12))),new it(14,Int32Array.from([6,26,46,66]),new Ae(30,new se(3,115),new se(1,116)),new Ae(24,new se(4,40),new se(5,41)),new Ae(20,new se(11,16),new se(5,17)),new Ae(24,new se(11,12),new se(5,13))),new it(15,Int32Array.from([6,26,48,70]),new Ae(22,new se(5,87),new se(1,88)),new Ae(24,new se(5,41),new se(5,42)),new Ae(30,new se(5,24),new se(7,25)),new Ae(24,new se(11,12),new se(7,13))),new it(16,Int32Array.from([6,26,50,74]),new Ae(24,new se(5,98),new se(1,99)),new Ae(28,new se(7,45),new se(3,46)),new Ae(24,new se(15,19),new se(2,20)),new Ae(30,new se(3,15),new se(13,16))),new it(17,Int32Array.from([6,30,54,78]),new Ae(28,new se(1,107),new se(5,108)),new Ae(28,new se(10,46),new se(1,47)),new Ae(28,new se(1,22),new se(15,23)),new Ae(28,new se(2,14),new se(17,15))),new it(18,Int32Array.from([6,30,56,82]),new Ae(30,new se(5,120),new se(1,121)),new Ae(26,new se(9,43),new se(4,44)),new Ae(28,new se(17,22),new se(1,23)),new Ae(28,new se(2,14),new se(19,15))),new it(19,Int32Array.from([6,30,58,86]),new Ae(28,new se(3,113),new se(4,114)),new Ae(26,new se(3,44),new se(11,45)),new Ae(26,new se(17,21),new se(4,22)),new Ae(26,new se(9,13),new se(16,14))),new it(20,Int32Array.from([6,34,62,90]),new Ae(28,new se(3,107),new se(5,108)),new Ae(26,new se(3,41),new se(13,42)),new Ae(30,new se(15,24),new se(5,25)),new Ae(28,new se(15,15),new se(10,16))),new it(21,Int32Array.from([6,28,50,72,94]),new Ae(28,new se(4,116),new se(4,117)),new Ae(26,new se(17,42)),new Ae(28,new se(17,22),new se(6,23)),new Ae(30,new se(19,16),new se(6,17))),new it(22,Int32Array.from([6,26,50,74,98]),new Ae(28,new se(2,111),new se(7,112)),new Ae(28,new se(17,46)),new Ae(30,new se(7,24),new se(16,25)),new Ae(24,new se(34,13))),new it(23,Int32Array.from([6,30,54,78,102]),new Ae(30,new se(4,121),new se(5,122)),new Ae(28,new se(4,47),new se(14,48)),new Ae(30,new se(11,24),new se(14,25)),new Ae(30,new se(16,15),new se(14,16))),new it(24,Int32Array.from([6,28,54,80,106]),new Ae(30,new se(6,117),new se(4,118)),new Ae(28,new se(6,45),new se(14,46)),new Ae(30,new se(11,24),new se(16,25)),new Ae(30,new se(30,16),new se(2,17))),new it(25,Int32Array.from([6,32,58,84,110]),new Ae(26,new se(8,106),new se(4,107)),new Ae(28,new se(8,47),new se(13,48)),new Ae(30,new se(7,24),new se(22,25)),new Ae(30,new se(22,15),new se(13,16))),new it(26,Int32Array.from([6,30,58,86,114]),new Ae(28,new se(10,114),new se(2,115)),new Ae(28,new se(19,46),new se(4,47)),new Ae(28,new se(28,22),new se(6,23)),new Ae(30,new se(33,16),new se(4,17))),new it(27,Int32Array.from([6,34,62,90,118]),new Ae(30,new se(8,122),new se(4,123)),new Ae(28,new se(22,45),new se(3,46)),new Ae(30,new se(8,23),new se(26,24)),new Ae(30,new se(12,15),new se(28,16))),new it(28,Int32Array.from([6,26,50,74,98,122]),new Ae(30,new se(3,117),new se(10,118)),new Ae(28,new se(3,45),new se(23,46)),new Ae(30,new se(4,24),new se(31,25)),new Ae(30,new se(11,15),new se(31,16))),new it(29,Int32Array.from([6,30,54,78,102,126]),new Ae(30,new se(7,116),new se(7,117)),new Ae(28,new se(21,45),new se(7,46)),new Ae(30,new se(1,23),new se(37,24)),new Ae(30,new se(19,15),new se(26,16))),new it(30,Int32Array.from([6,26,52,78,104,130]),new Ae(30,new se(5,115),new se(10,116)),new Ae(28,new se(19,47),new se(10,48)),new Ae(30,new se(15,24),new se(25,25)),new Ae(30,new se(23,15),new se(25,16))),new it(31,Int32Array.from([6,30,56,82,108,134]),new Ae(30,new se(13,115),new se(3,116)),new Ae(28,new se(2,46),new se(29,47)),new Ae(30,new se(42,24),new se(1,25)),new Ae(30,new se(23,15),new se(28,16))),new it(32,Int32Array.from([6,34,60,86,112,138]),new Ae(30,new se(17,115)),new Ae(28,new se(10,46),new se(23,47)),new Ae(30,new se(10,24),new se(35,25)),new Ae(30,new se(19,15),new se(35,16))),new it(33,Int32Array.from([6,30,58,86,114,142]),new Ae(30,new se(17,115),new se(1,116)),new Ae(28,new se(14,46),new se(21,47)),new Ae(30,new se(29,24),new se(19,25)),new Ae(30,new se(11,15),new se(46,16))),new it(34,Int32Array.from([6,34,62,90,118,146]),new Ae(30,new se(13,115),new se(6,116)),new Ae(28,new se(14,46),new se(23,47)),new Ae(30,new se(44,24),new se(7,25)),new Ae(30,new se(59,16),new se(1,17))),new it(35,Int32Array.from([6,30,54,78,102,126,150]),new Ae(30,new se(12,121),new se(7,122)),new Ae(28,new se(12,47),new se(26,48)),new Ae(30,new se(39,24),new se(14,25)),new Ae(30,new se(22,15),new se(41,16))),new it(36,Int32Array.from([6,24,50,76,102,128,154]),new Ae(30,new se(6,121),new se(14,122)),new Ae(28,new se(6,47),new se(34,48)),new Ae(30,new se(46,24),new se(10,25)),new Ae(30,new se(2,15),new se(64,16))),new it(37,Int32Array.from([6,28,54,80,106,132,158]),new Ae(30,new se(17,122),new se(4,123)),new Ae(28,new se(29,46),new se(14,47)),new Ae(30,new se(49,24),new se(10,25)),new Ae(30,new se(24,15),new se(46,16))),new it(38,Int32Array.from([6,32,58,84,110,136,162]),new Ae(30,new se(4,122),new se(18,123)),new Ae(28,new se(13,46),new se(32,47)),new Ae(30,new se(48,24),new se(14,25)),new Ae(30,new se(42,15),new se(32,16))),new it(39,Int32Array.from([6,26,54,82,110,138,166]),new Ae(30,new se(20,117),new se(4,118)),new Ae(28,new se(40,47),new se(7,48)),new Ae(30,new se(43,24),new se(22,25)),new Ae(30,new se(10,15),new se(67,16))),new it(40,Int32Array.from([6,30,58,86,114,142,170]),new Ae(30,new se(19,118),new se(6,119)),new Ae(28,new se(18,47),new se(31,48)),new Ae(30,new se(34,24),new se(34,25)),new Ae(30,new se(20,15),new se(61,16)))];var Ia;(function(V){V[V.DATA_MASK_000=0]="DATA_MASK_000",V[V.DATA_MASK_001=1]="DATA_MASK_001",V[V.DATA_MASK_010=2]="DATA_MASK_010",V[V.DATA_MASK_011=3]="DATA_MASK_011",V[V.DATA_MASK_100=4]="DATA_MASK_100",V[V.DATA_MASK_101=5]="DATA_MASK_101",V[V.DATA_MASK_110=6]="DATA_MASK_110",V[V.DATA_MASK_111=7]="DATA_MASK_111"})(Ia||(Ia={}));class Qa{constructor(a,s){this.value=a,this.isMasked=s}unmaskBitMatrix(a,s){for(let l=0;l<s;l++)for(let d=0;d<s;d++)this.isMasked(l,d)&&a.flip(d,l)}}Qa.values=new Map([[Ia.DATA_MASK_000,new Qa(Ia.DATA_MASK_000,(V,a)=>(V+a&1)===0)],[Ia.DATA_MASK_001,new Qa(Ia.DATA_MASK_001,(V,a)=>(V&1)===0)],[Ia.DATA_MASK_010,new Qa(Ia.DATA_MASK_010,(V,a)=>a%3===0)],[Ia.DATA_MASK_011,new Qa(Ia.DATA_MASK_011,(V,a)=>(V+a)%3===0)],[Ia.DATA_MASK_100,new Qa(Ia.DATA_MASK_100,(V,a)=>(Math.floor(V/2)+Math.floor(a/3)&1)===0)],[Ia.DATA_MASK_101,new Qa(Ia.DATA_MASK_101,(V,a)=>V*a%6===0)],[Ia.DATA_MASK_110,new Qa(Ia.DATA_MASK_110,(V,a)=>V*a%6<3)],[Ia.DATA_MASK_111,new Qa(Ia.DATA_MASK_111,(V,a)=>(V+a+V*a%3&1)===0)]]);class Xd{constructor(a){const s=a.getHeight();if(s<21||(s&3)!==1)throw new U;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let u=0;u<6;u++)a=this.copyBit(u,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let u=5;u>=0;u--)a=this.copyBit(8,u,a);const s=this.bitMatrix.getHeight();let l=0;const d=s-7;for(let u=s-1;u>=d;u--)l=this.copyBit(8,u,l);for(let u=s-8;u<s;u++)l=this.copyBit(u,8,l);if(this.parsedFormatInfo=$a.decodeFormatInformation(a,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new U}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),s=Math.floor((a-17)/4);if(s<=6)return it.getVersionForNumber(s);let l=0;const d=a-11;for(let m=5;m>=0;m--)for(let p=a-9;p>=d;p--)l=this.copyBit(p,m,l);let u=it.decodeVersionInformation(l);if(u!==null&&u.getDimensionForVersion()===a)return this.parsedVersion=u,u;l=0;for(let m=5;m>=0;m--)for(let p=a-9;p>=d;p--)l=this.copyBit(m,p,l);if(u=it.decodeVersionInformation(l),u!==null&&u.getDimensionForVersion()===a)return this.parsedVersion=u,u;throw new U}copyBit(a,s,l){return(this.isMirror?this.bitMatrix.get(s,a):this.bitMatrix.get(a,s))?l<<1|1:l<<1}readCodewords(){const a=this.readFormatInformation(),s=this.readVersion(),l=Qa.values.get(a.getDataMask()),d=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,d);const u=s.buildFunctionPattern();let m=!0;const p=new Uint8Array(s.getTotalCodewords());let v=0,A=0,R=0;for(let q=d-1;q>0;q-=2){q===6&&q--;for(let Z=0;Z<d;Z++){const ie=m?d-1-Z:Z;for(let ge=0;ge<2;ge++)u.get(q-ge,ie)||(R++,A<<=1,this.bitMatrix.get(q-ge,ie)&&(A|=1),R===8&&(p[v++]=A,R=0,A=0))}m=!m}if(v!==s.getTotalCodewords())throw new U;return p}remask(){if(this.parsedFormatInfo===null)return;const a=Qa.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,s)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let s=0,l=a.getWidth();s<l;s++)for(let d=s+1,u=a.getHeight();d<u;d++)a.get(s,d)!==a.get(d,s)&&(a.flip(d,s),a.flip(s,d))}}class $l{constructor(a,s){this.numDataCodewords=a,this.codewords=s}static getDataBlocks(a,s,l){if(a.length!==s.getTotalCodewords())throw new E;const d=s.getECBlocksForLevel(l);let u=0;const m=d.getECBlocks();for(const ge of m)u+=ge.getCount();const p=new Array(u);let v=0;for(const ge of m)for(let ye=0;ye<ge.getCount();ye++){const Se=ge.getDataCodewords(),Re=d.getECCodewordsPerBlock()+Se;p[v++]=new $l(Se,new Uint8Array(Re))}const A=p[0].codewords.length;let R=p.length-1;for(;R>=0&&p[R].codewords.length!==A;)R--;R++;const q=A-d.getECCodewordsPerBlock();let Z=0;for(let ge=0;ge<q;ge++)for(let ye=0;ye<v;ye++)p[ye].codewords[ge]=a[Z++];for(let ge=R;ge<v;ge++)p[ge].codewords[q]=a[Z++];const ie=p[0].codewords.length;for(let ge=q;ge<ie;ge++)for(let ye=0;ye<v;ye++){const Se=ye<R?ge:ge+1;p[ye].codewords[Se]=a[Z++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var jr;(function(V){V[V.TERMINATOR=0]="TERMINATOR",V[V.NUMERIC=1]="NUMERIC",V[V.ALPHANUMERIC=2]="ALPHANUMERIC",V[V.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",V[V.BYTE=4]="BYTE",V[V.ECI=5]="ECI",V[V.KANJI=6]="KANJI",V[V.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",V[V.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",V[V.HANZI=9]="HANZI"})(jr||(jr={}));class ct{constructor(a,s,l,d){this.value=a,this.stringValue=s,this.characterCountBitsForVersions=l,this.bits=d,ct.FOR_BITS.set(d,this),ct.FOR_VALUE.set(a,this)}static forBits(a){const s=ct.FOR_BITS.get(a);if(s===void 0)throw new E;return s}getCharacterCountBits(a){const s=a.getVersionNumber();let l;return s<=9?l=0:s<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof ct))return!1;const s=a;return this.value===s.value}toString(){return this.stringValue}}ct.FOR_BITS=new Map,ct.FOR_VALUE=new Map,ct.TERMINATOR=new ct(jr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ct.NUMERIC=new ct(jr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ct.ALPHANUMERIC=new ct(jr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ct.STRUCTURED_APPEND=new ct(jr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ct.BYTE=new ct(jr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ct.ECI=new ct(jr.ECI,"ECI",Int32Array.from([0,0,0]),7),ct.KANJI=new ct(jr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ct.FNC1_FIRST_POSITION=new ct(jr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ct.FNC1_SECOND_POSITION=new ct(jr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ct.HANZI=new ct(jr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class pa{static decode(a,s,l,d){const u=new hr(a);let m=new re;const p=new Array;let v=-1,A=-1;try{let R=null,q=!1,Z;do{if(u.available()<4)Z=ct.TERMINATOR;else{const ie=u.readBits(4);Z=ct.forBits(ie)}switch(Z){case ct.TERMINATOR:break;case ct.FNC1_FIRST_POSITION:case ct.FNC1_SECOND_POSITION:q=!0;break;case ct.STRUCTURED_APPEND:if(u.available()<16)throw new U;v=u.readBits(8),A=u.readBits(8);break;case ct.ECI:const ie=pa.parseECIValue(u);if(R=Q.getCharacterSetECIByValue(ie),R===null)throw new U;break;case ct.HANZI:const ge=u.readBits(4),ye=u.readBits(Z.getCharacterCountBits(s));ge===pa.GB2312_SUBSET&&pa.decodeHanziSegment(u,m,ye);break;default:const Se=u.readBits(Z.getCharacterCountBits(s));switch(Z){case ct.NUMERIC:pa.decodeNumericSegment(u,m,Se);break;case ct.ALPHANUMERIC:pa.decodeAlphanumericSegment(u,m,Se,q);break;case ct.BYTE:pa.decodeByteSegment(u,m,Se,R,p,d);break;case ct.KANJI:pa.decodeKanjiSegment(u,m,Se);break;default:throw new U}break}}while(Z!==ct.TERMINATOR)}catch{throw new U}return new Je(a,m.toString(),p.length===0?null:p,l===null?null:l.toString(),v,A)}static decodeHanziSegment(a,s,l){if(l*13>a.available())throw new U;const d=new Uint8Array(2*l);let u=0;for(;l>0;){const m=a.readBits(13);let p=m/96<<8&4294967295|m%96;p<959?p+=41377:p+=42657,d[u]=p>>8&255,d[u+1]=p&255,u+=2,l--}try{s.append(ce.decode(d,te.GB2312))}catch(m){throw new U(m)}}static decodeKanjiSegment(a,s,l){if(l*13>a.available())throw new U;const d=new Uint8Array(2*l);let u=0;for(;l>0;){const m=a.readBits(13);let p=m/192<<8&4294967295|m%192;p<7936?p+=33088:p+=49472,d[u]=p>>8,d[u+1]=p,u+=2,l--}try{s.append(ce.decode(d,te.SHIFT_JIS))}catch(m){throw new U(m)}}static decodeByteSegment(a,s,l,d,u,m){if(8*l>a.available())throw new U;const p=new Uint8Array(l);for(let A=0;A<l;A++)p[A]=a.readBits(8);let v;d===null?v=te.guessEncoding(p,m):v=d.getName();try{s.append(ce.decode(p,v))}catch(A){throw new U(A)}u.push(p)}static toAlphaNumericChar(a){if(a>=pa.ALPHANUMERIC_CHARS.length)throw new U;return pa.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,s,l,d){const u=s.length();for(;l>1;){if(a.available()<11)throw new U;const m=a.readBits(11);s.append(pa.toAlphaNumericChar(Math.floor(m/45))),s.append(pa.toAlphaNumericChar(m%45)),l-=2}if(l===1){if(a.available()<6)throw new U;s.append(pa.toAlphaNumericChar(a.readBits(6)))}if(d)for(let m=u;m<s.length();m++)s.charAt(m)==="%"&&(m<s.length()-1&&s.charAt(m+1)==="%"?s.deleteCharAt(m+1):s.setCharAt(m,""))}static decodeNumericSegment(a,s,l){for(;l>=3;){if(a.available()<10)throw new U;const d=a.readBits(10);if(d>=1e3)throw new U;s.append(pa.toAlphaNumericChar(Math.floor(d/100))),s.append(pa.toAlphaNumericChar(Math.floor(d/10)%10)),s.append(pa.toAlphaNumericChar(d%10)),l-=3}if(l===2){if(a.available()<7)throw new U;const d=a.readBits(7);if(d>=100)throw new U;s.append(pa.toAlphaNumericChar(Math.floor(d/10))),s.append(pa.toAlphaNumericChar(d%10))}else if(l===1){if(a.available()<4)throw new U;const d=a.readBits(4);if(d>=10)throw new U;s.append(pa.toAlphaNumericChar(d))}}static parseECIValue(a){const s=a.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const l=a.readBits(8);return(s&63)<<8&4294967295|l}if((s&224)===192){const l=a.readBits(16);return(s&31)<<16&4294967295|l}throw new U}}pa.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",pa.GB2312_SUBSET=1;class ic{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const s=a[0];a[0]=a[2],a[2]=s}}class Ql{constructor(){this.rsDecoder=new et(ve.QR_CODE_FIELD_256)}decodeBooleanArray(a,s){return this.decodeBitMatrix(W.parseFromBooleanArray(a),s)}decodeBitMatrix(a,s){const l=new Xd(a);let d=null;try{return this.decodeBitMatrixParser(l,s)}catch(u){d=u}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const u=this.decodeBitMatrixParser(l,s);return u.setOther(new ic(!0)),u}catch(u){throw d!==null?d:u}}decodeBitMatrixParser(a,s){const l=a.readVersion(),d=a.readFormatInformation().getErrorCorrectionLevel(),u=a.readCodewords(),m=$l.getDataBlocks(u,l,d);let p=0;for(const R of m)p+=R.getNumDataCodewords();const v=new Uint8Array(p);let A=0;for(const R of m){const q=R.getCodewords(),Z=R.getNumDataCodewords();this.correctErrors(q,Z);for(let ie=0;ie<Z;ie++)v[A++]=q[ie]}return pa.decode(v,l,d,s)}correctErrors(a,s){const l=new Int32Array(a);try{this.rsDecoder.decode(l,a.length-s)}catch{throw new T}for(let d=0;d<s;d++)a[d]=l[d]}}class cl extends Me{constructor(a,s,l){super(a,s),this.estimatedModuleSize=l}aboutEquals(a,s,l){if(Math.abs(s-this.getY())<=a&&Math.abs(l-this.getX())<=a){const d=Math.abs(a-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(a,s,l){const d=(this.getX()+s)/2,u=(this.getY()+a)/2,m=(this.estimatedModuleSize+l)/2;return new cl(d,u,m)}}class kn{constructor(a,s,l,d,u,m,p){this.image=a,this.startX=s,this.startY=l,this.width=d,this.height=u,this.moduleSize=m,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,s=this.height,l=this.width,d=a+l,u=this.startY+s/2,m=new Int32Array(3),p=this.image;for(let v=0;v<s;v++){const A=u+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));m[0]=0,m[1]=0,m[2]=0;let R=a;for(;R<d&&!p.get(R,A);)R++;let q=0;for(;R<d;){if(p.get(R,A))if(q===1)m[1]++;else if(q===2){if(this.foundPatternCross(m)){const Z=this.handlePossibleCenter(m,A,R);if(Z!==null)return Z}m[0]=m[2],m[1]=1,m[2]=0,q=1}else m[++q]++;else q===1&&q++,m[q]++;R++}if(this.foundPatternCross(m)){const Z=this.handlePossibleCenter(m,A,d);if(Z!==null)return Z}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new P}static centerFromEnd(a,s){return s-a[2]-a[1]/2}foundPatternCross(a){const s=this.moduleSize,l=s/2;for(let d=0;d<3;d++)if(Math.abs(s-a[d])>=l)return!1;return!0}crossCheckVertical(a,s,l,d){const u=this.image,m=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=a;for(;v>=0&&u.get(s,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&!u.get(s,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=a+1;v<m&&u.get(s,v)&&p[1]<=l;)p[1]++,v++;if(v===m||p[1]>l)return NaN;for(;v<m&&!u.get(s,v)&&p[2]<=l;)p[2]++,v++;if(p[2]>l)return NaN;const A=p[0]+p[1]+p[2];return 5*Math.abs(A-d)>=2*d?NaN:this.foundPatternCross(p)?kn.centerFromEnd(p,v):NaN}handlePossibleCenter(a,s,l){const d=a[0]+a[1]+a[2],u=kn.centerFromEnd(a,l),m=this.crossCheckVertical(s,u,2*a[1],d);if(!isNaN(m)){const p=(a[0]+a[1]+a[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(p,m,u))return A.combineEstimate(m,u,p);const v=new cl(u,m,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class _s extends Me{constructor(a,s,l,d){super(a,s),this.estimatedModuleSize=l,this.count=d,d===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,s,l){if(Math.abs(s-this.getY())<=a&&Math.abs(l-this.getX())<=a){const d=Math.abs(a-this.estimatedModuleSize);return d<=1||d<=this.estimatedModuleSize}return!1}combineEstimate(a,s,l){const d=this.count+1,u=(this.count*this.getX()+s)/d,m=(this.count*this.getY()+a)/d,p=(this.count*this.estimatedModuleSize+l)/d;return new _s(u,m,p,d)}}class Cn{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Oa{constructor(a,s){this.image=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const s=a!=null&&a.get(X.TRY_HARDER)!==void 0,l=a!=null&&a.get(X.PURE_BARCODE)!==void 0,d=this.image,u=d.getHeight(),m=d.getWidth();let p=Math.floor(3*u/(4*Oa.MAX_MODULES));(p<Oa.MIN_SKIP||s)&&(p=Oa.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let q=p-1;q<u&&!v;q+=p){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let Z=0;for(let ie=0;ie<m;ie++)if(d.get(ie,q))(Z&1)===1&&Z++,A[Z]++;else if((Z&1)===0)if(Z===4)if(Oa.foundPatternCross(A)){if(this.handlePossibleCenter(A,q,ie,l)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const ye=this.findRowSkip();ye>A[2]&&(q+=ye-A[2]-p,ie=m-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,Z=3;continue}Z=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,Z=3;else A[++Z]++;else A[Z]++;Oa.foundPatternCross(A)&&this.handlePossibleCenter(A,q,m,l)===!0&&(p=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const R=this.selectBestPatterns();return Me.orderBestPatterns(R),new Cn(R)}static centerFromEnd(a,s){return s-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let s=0;for(let u=0;u<5;u++){const m=a[u];if(m===0)return!1;s+=m}if(s<7)return!1;const l=s/7,d=l/2;return Math.abs(l-a[0])<d&&Math.abs(l-a[1])<d&&Math.abs(3*l-a[2])<3*d&&Math.abs(l-a[3])<d&&Math.abs(l-a[4])<d}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,s,l,d){const u=this.getCrossCheckStateCount();let m=0;const p=this.image;for(;a>=m&&s>=m&&p.get(s-m,a-m);)u[2]++,m++;if(a<m||s<m)return!1;for(;a>=m&&s>=m&&!p.get(s-m,a-m)&&u[1]<=l;)u[1]++,m++;if(a<m||s<m||u[1]>l)return!1;for(;a>=m&&s>=m&&p.get(s-m,a-m)&&u[0]<=l;)u[0]++,m++;if(u[0]>l)return!1;const v=p.getHeight(),A=p.getWidth();for(m=1;a+m<v&&s+m<A&&p.get(s+m,a+m);)u[2]++,m++;if(a+m>=v||s+m>=A)return!1;for(;a+m<v&&s+m<A&&!p.get(s+m,a+m)&&u[3]<l;)u[3]++,m++;if(a+m>=v||s+m>=A||u[3]>=l)return!1;for(;a+m<v&&s+m<A&&p.get(s+m,a+m)&&u[4]<l;)u[4]++,m++;if(u[4]>=l)return!1;const R=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(R-d)<2*d&&Oa.foundPatternCross(u)}crossCheckVertical(a,s,l,d){const u=this.image,m=u.getHeight(),p=this.getCrossCheckStateCount();let v=a;for(;v>=0&&u.get(s,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(s,v)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&u.get(s,v)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=a+1;v<m&&u.get(s,v);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!u.get(s,v)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&u.get(s,v)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-d)>=2*d?NaN:Oa.foundPatternCross(p)?Oa.centerFromEnd(p,v):NaN}crossCheckHorizontal(a,s,l,d){const u=this.image,m=u.getWidth(),p=this.getCrossCheckStateCount();let v=a;for(;v>=0&&u.get(v,s);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(v,s)&&p[1]<=l;)p[1]++,v--;if(v<0||p[1]>l)return NaN;for(;v>=0&&u.get(v,s)&&p[0]<=l;)p[0]++,v--;if(p[0]>l)return NaN;for(v=a+1;v<m&&u.get(v,s);)p[2]++,v++;if(v===m)return NaN;for(;v<m&&!u.get(v,s)&&p[3]<l;)p[3]++,v++;if(v===m||p[3]>=l)return NaN;for(;v<m&&u.get(v,s)&&p[4]<l;)p[4]++,v++;if(p[4]>=l)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-d)>=d?NaN:Oa.foundPatternCross(p)?Oa.centerFromEnd(p,v):NaN}handlePossibleCenter(a,s,l,d){const u=a[0]+a[1]+a[2]+a[3]+a[4];let m=Oa.centerFromEnd(a,l),p=this.crossCheckVertical(s,Math.floor(m),a[2],u);if(!isNaN(p)&&(m=this.crossCheckHorizontal(Math.floor(m),Math.floor(p),a[2],u),!isNaN(m)&&(!d||this.crossCheckDiagonal(Math.floor(p),Math.floor(m),a[2],u)))){const v=u/7;let A=!1;const R=this.possibleCenters;for(let q=0,Z=R.length;q<Z;q++){const ie=R[q];if(ie.aboutEquals(v,p,m)){R[q]=ie.combineEstimate(p,m,v),A=!0;break}}if(!A){const q=new _s(m,p,v);R.push(q),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(q)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const l of this.possibleCenters)if(l.getCount()>=Oa.CENTER_QUORUM)if(s==null)s=l;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-l.getX())-Math.abs(s.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,s=0;const l=this.possibleCenters.length;for(const m of this.possibleCenters)m.getCount()>=Oa.CENTER_QUORUM&&(a++,s+=m.getEstimatedModuleSize());if(a<3)return!1;const d=s/l;let u=0;for(const m of this.possibleCenters)u+=Math.abs(m.getEstimatedModuleSize()-d);return u<=.05*s}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new P;const s=this.possibleCenters;let l;if(a>3){let d=0,u=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();d+=A,u+=A*A}l=d/a;let m=Math.sqrt(u/a-l*l);s.sort((v,A)=>{const R=Math.abs(A.getEstimatedModuleSize()-l),q=Math.abs(v.getEstimatedModuleSize()-l);return R<q?-1:R>q?1:0});const p=Math.max(.2*l,m);for(let v=0;v<s.length&&s.length>3;v++){const A=s[v];Math.abs(A.getEstimatedModuleSize()-l)>p&&(s.splice(v,1),v--)}}if(s.length>3){let d=0;for(const u of s)d+=u.getEstimatedModuleSize();l=d/s.length,s.sort((u,m)=>{if(m.getCount()===u.getCount()){const p=Math.abs(m.getEstimatedModuleSize()-l),v=Math.abs(u.getEstimatedModuleSize()-l);return p<v?1:p>v?-1:0}else return m.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Oa.CENTER_QUORUM=2,Oa.MIN_SKIP=3,Oa.MAX_MODULES=57;class Ws{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get(X.NEED_RESULT_POINT_CALLBACK);const l=new Oa(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(l)}processFinderPatternInfo(a){const s=a.getTopLeft(),l=a.getTopRight(),d=a.getBottomLeft(),u=this.calculateModuleSize(s,l,d);if(u<1)throw new P("No pattern found in proccess finder.");const m=Ws.computeDimension(s,l,d,u),p=it.getProvisionalVersionForDimension(m),v=p.getDimensionForVersion()-7;let A=null;if(p.getAlignmentPatternCenters().length>0){const ie=l.getX()-s.getX()+d.getX(),ge=l.getY()-s.getY()+d.getY(),ye=1-3/v,Se=Math.floor(s.getX()+ye*(ie-s.getX())),Re=Math.floor(s.getY()+ye*(ge-s.getY()));for(let Xe=4;Xe<=16;Xe<<=1)try{A=this.findAlignmentInRegion(u,Se,Re,Xe);break}catch($e){if(!($e instanceof P))throw $e}}const R=Ws.createTransform(s,l,d,A,m),q=Ws.sampleGrid(this.image,R,m);let Z;return A===null?Z=[d,s,l]:Z=[d,s,l,A],new jt(q,Z)}static createTransform(a,s,l,d,u){const m=u-3.5;let p,v,A,R;return d!==null?(p=d.getX(),v=d.getY(),A=m-3,R=A):(p=s.getX()-a.getX()+l.getX(),v=s.getY()-a.getY()+l.getY(),A=m,R=m),Le.quadrilateralToQuadrilateral(3.5,3.5,m,3.5,A,R,3.5,m,a.getX(),a.getY(),s.getX(),s.getY(),p,v,l.getX(),l.getY())}static sampleGrid(a,s,l){return Bt.getInstance().sampleGridWithTransform(a,l,l,s)}static computeDimension(a,s,l,d){const u=oe.round(Me.distance(a,s)/d),m=oe.round(Me.distance(a,l)/d);let p=Math.floor((u+m)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new P("Dimensions could be not found.")}return p}calculateModuleSize(a,s,l){return(this.calculateModuleSizeOneWay(a,s)+this.calculateModuleSizeOneWay(a,l))/2}calculateModuleSizeOneWay(a,s){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY())),d=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(l)?d/7:isNaN(d)?l/7:(l+d)/14}sizeOfBlackWhiteBlackRunBothWays(a,s,l,d){let u=this.sizeOfBlackWhiteBlackRun(a,s,l,d),m=1,p=a-(l-a);p<0?(m=a/(a-p),p=0):p>=this.image.getWidth()&&(m=(this.image.getWidth()-1-a)/(p-a),p=this.image.getWidth()-1);let v=Math.floor(s-(d-s)*m);return m=1,v<0?(m=s/(s-v),v=0):v>=this.image.getHeight()&&(m=(this.image.getHeight()-1-s)/(v-s),v=this.image.getHeight()-1),p=Math.floor(a+(p-a)*m),u+=this.sizeOfBlackWhiteBlackRun(a,s,p,v),u-1}sizeOfBlackWhiteBlackRun(a,s,l,d){const u=Math.abs(d-s)>Math.abs(l-a);if(u){let ie=a;a=s,s=ie,ie=l,l=d,d=ie}const m=Math.abs(l-a),p=Math.abs(d-s);let v=-m/2;const A=a<l?1:-1,R=s<d?1:-1;let q=0;const Z=l+A;for(let ie=a,ge=s;ie!==Z;ie+=A){const ye=u?ge:ie,Se=u?ie:ge;if(q===1===this.image.get(ye,Se)){if(q===2)return oe.distance(ie,ge,a,s);q++}if(v+=p,v>0){if(ge===d)break;ge+=R,v-=m}}return q===2?oe.distance(l+A,d,a,s):NaN}findAlignmentInRegion(a,s,l,d){const u=Math.floor(d*a),m=Math.max(0,s-u),p=Math.min(this.image.getWidth()-1,s+u);if(p-m<a*3)throw new P("Alignment top exceeds estimated module size.");const v=Math.max(0,l-u),A=Math.min(this.image.getHeight()-1,l+u);if(A-v<a*3)throw new P("Alignment bottom exceeds estimated module size.");return new kn(this.image,m,v,p-m,A-v,a,this.resultPointCallback).find()}}class us{constructor(){this.decoder=new Ql}getDecoder(){return this.decoder}decode(a,s){let l,d;if(s!=null&&s.get(X.PURE_BARCODE)!==void 0){const v=us.extractPureBits(a.getBlackMatrix());l=this.decoder.decodeBitMatrix(v,s),d=us.NO_POINTS}else{const v=new Ws(a.getBlackMatrix()).detect(s);l=this.decoder.decodeBitMatrix(v.getBits(),s),d=v.getPoints()}l.getOther()instanceof ic&&l.getOther().applyMirroredCorrection(d);const u=new be(l.getText(),l.getRawBytes(),void 0,d,xe.QR_CODE,void 0),m=l.getByteSegments();m!==null&&u.putMetadata(je.BYTE_SEGMENTS,m);const p=l.getECLevel();return p!==null&&u.putMetadata(je.ERROR_CORRECTION_LEVEL,p),l.hasStructuredAppend()&&(u.putMetadata(je.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),u.putMetadata(je.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),u}reset(){}static extractPureBits(a){const s=a.getTopLeftOnBit(),l=a.getBottomRightOnBit();if(s===null||l===null)throw new P;const d=this.moduleSize(s,a);let u=s[1],m=l[1],p=s[0],v=l[0];if(p>=v||u>=m)throw new P;if(m-u!==v-p&&(v=p+(m-u),v>=a.getWidth()))throw new P;const A=Math.round((v-p+1)/d),R=Math.round((m-u+1)/d);if(A<=0||R<=0)throw new P;if(R!==A)throw new P;const q=Math.floor(d/2);u+=q,p+=q;const Z=p+Math.floor((A-1)*d)-v;if(Z>0){if(Z>q)throw new P;p-=Z}const ie=u+Math.floor((R-1)*d)-m;if(ie>0){if(ie>q)throw new P;u-=ie}const ge=new W(A,R);for(let ye=0;ye<R;ye++){const Se=u+Math.floor(ye*d);for(let Re=0;Re<A;Re++)a.get(p+Math.floor(Re*d),Se)&&ge.set(Re,ye)}return ge}static moduleSize(a,s){const l=s.getHeight(),d=s.getWidth();let u=a[0],m=a[1],p=!0,v=0;for(;u<d&&m<l;){if(p!==s.get(u,m)){if(++v===5)break;p=!p}u++,m++}if(u===d||m===l)throw new P;return(u-a[0])/7}}us.NO_POINTS=new Array;class ut{PDF417Common(){}static getBitCountSum(a){return oe.sum(a)}static toIntArray(a){if(a==null||!a.length)return ut.EMPTY_INT_ARRAY;const s=new Int32Array(a.length);let l=0;for(const d of a)s[l++]=d;return s}static getCodeword(a){const s=L.binarySearch(ut.SYMBOL_TABLE,a&262143);return s<0?-1:(ut.CODEWORD_TABLE[s]-1)%ut.NUMBER_OF_CODEWORDS}}ut.NUMBER_OF_CODEWORDS=929,ut.MAX_CODEWORDS_IN_BARCODE=ut.NUMBER_OF_CODEWORDS-1,ut.MIN_ROWS_IN_BARCODE=3,ut.MAX_ROWS_IN_BARCODE=90,ut.MODULES_IN_CODEWORD=17,ut.MODULES_IN_STOP_PATTERN=18,ut.BARS_IN_MODULE=8,ut.EMPTY_INT_ARRAY=new Int32Array([]),ut.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ut.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class xs{constructor(a,s){this.bits=a,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Nt{static detectMultiple(a,s,l){let d=a.getBlackMatrix(),u=Nt.detect(l,d);return u.length||(d=d.clone(),d.rotate180(),u=Nt.detect(l,d)),new xs(d,u)}static detect(a,s){const l=new Array;let d=0,u=0,m=!1;for(;d<s.getHeight();){const p=Nt.findVertices(s,d,u);if(p[0]==null&&p[3]==null){if(!m)break;m=!1,u=0;for(const v of l)v[1]!=null&&(d=Math.trunc(Math.max(d,v[1].getY()))),v[3]!=null&&(d=Math.max(d,Math.trunc(v[3].getY())));d+=Nt.ROW_STEP;continue}if(m=!0,l.push(p),!a)break;p[2]!=null?(u=Math.trunc(p[2].getX()),d=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),d=Math.trunc(p[4].getY()))}return l}static findVertices(a,s,l){const d=a.getHeight(),u=a.getWidth(),m=new Array(8);return Nt.copyToResult(m,Nt.findRowsWithPattern(a,d,u,s,l,Nt.START_PATTERN),Nt.INDEXES_START_PATTERN),m[4]!=null&&(l=Math.trunc(m[4].getX()),s=Math.trunc(m[4].getY())),Nt.copyToResult(m,Nt.findRowsWithPattern(a,d,u,s,l,Nt.STOP_PATTERN),Nt.INDEXES_STOP_PATTERN),m}static copyToResult(a,s,l){for(let d=0;d<l.length;d++)a[l[d]]=s[d]}static findRowsWithPattern(a,s,l,d,u,m){const p=new Array(4);let v=!1;const A=new Int32Array(m.length);for(;d<s;d+=Nt.ROW_STEP){let q=Nt.findGuardPattern(a,u,d,l,!1,m,A);if(q!=null){for(;d>0;){const Z=Nt.findGuardPattern(a,u,--d,l,!1,m,A);if(Z!=null)q=Z;else{d++;break}}p[0]=new Me(q[0],d),p[1]=new Me(q[1],d),v=!0;break}}let R=d+1;if(v){let q=0,Z=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;R<s;R++){const ie=Nt.findGuardPattern(a,Z[0],R,l,!1,m,A);if(ie!=null&&Math.abs(Z[0]-ie[0])<Nt.MAX_PATTERN_DRIFT&&Math.abs(Z[1]-ie[1])<Nt.MAX_PATTERN_DRIFT)Z=ie,q=0;else{if(q>Nt.SKIPPED_ROW_COUNT_MAX)break;q++}}R-=q+1,p[2]=new Me(Z[0],R),p[3]=new Me(Z[1],R)}return R-d<Nt.BARCODE_MIN_HEIGHT&&L.fill(p,null),p}static findGuardPattern(a,s,l,d,u,m,p){L.fillWithin(p,0,p.length,0);let v=s,A=0;for(;a.get(v,l)&&v>0&&A++<Nt.MAX_PIXEL_DRIFT;)v--;let R=v,q=0,Z=m.length;for(let ie=u;R<d;R++)if(a.get(R,l)!==ie)p[q]++;else{if(q===Z-1){if(Nt.patternMatchVariance(p,m,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE)return new Int32Array([v,R]);v+=p[0]+p[1],M.arraycopy(p,2,p,0,q-1),p[q-1]=0,p[q]=0,q--}else q++;p[q]=1,ie=!ie}return q===Z-1&&Nt.patternMatchVariance(p,m,Nt.MAX_INDIVIDUAL_VARIANCE)<Nt.MAX_AVG_VARIANCE?new Int32Array([v,R-1]):null}static patternMatchVariance(a,s,l){let d=a.length,u=0,m=0;for(let A=0;A<d;A++)u+=a[A],m+=s[A];if(u<m)return 1/0;let p=u/m;l*=p;let v=0;for(let A=0;A<d;A++){let R=a[A],q=s[A]*p,Z=R>q?R-q:q-R;if(Z>l)return 1/0;v+=Z}return v/u}}Nt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Nt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Nt.MAX_AVG_VARIANCE=.42,Nt.MAX_INDIVIDUAL_VARIANCE=.8,Nt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Nt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Nt.MAX_PIXEL_DRIFT=3,Nt.MAX_PATTERN_DRIFT=5,Nt.SKIPPED_ROW_COUNT_MAX=25,Nt.ROW_STEP=5,Nt.BARCODE_MIN_HEIGHT=10;class ja{constructor(a,s){if(s.length===0)throw new E;this.field=a;let l=s.length;if(l>1&&s[0]===0){let d=1;for(;d<l&&s[d]===0;)d++;d===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-d),M.arraycopy(s,d,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let d=0;for(let u of this.coefficients)d=this.field.add(d,u);return d}let s=this.coefficients[0],l=this.coefficients.length;for(let d=1;d<l;d++)s=this.field.add(this.field.multiply(a,s),this.coefficients[d]);return s}add(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let s=this.coefficients,l=a.coefficients;if(s.length>l.length){let m=s;s=l,l=m}let d=new Int32Array(l.length),u=l.length-s.length;M.arraycopy(l,0,d,0,u);for(let m=u;m<l.length;m++)d[m]=this.field.add(s[m-u],l[m]);return new ja(this.field,d)}subtract(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof ja?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new ja(this.field,new Int32Array([0]));let s=this.coefficients,l=s.length,d=a.coefficients,u=d.length,m=new Int32Array(l+u-1);for(let p=0;p<l;p++){let v=s[p];for(let A=0;A<u;A++)m[p+A]=this.field.add(m[p+A],this.field.multiply(v,d[A]))}return new ja(this.field,m)}negative(){let a=this.coefficients.length,s=new Int32Array(a);for(let l=0;l<a;l++)s[l]=this.field.subtract(0,this.coefficients[l]);return new ja(this.field,s)}multiplyScalar(a){if(a===0)return new ja(this.field,new Int32Array([0]));if(a===1)return this;let s=this.coefficients.length,l=new Int32Array(s);for(let d=0;d<s;d++)l[d]=this.field.multiply(this.coefficients[d],a);return new ja(this.field,l)}multiplyByMonomial(a,s){if(a<0)throw new E;if(s===0)return new ja(this.field,new Int32Array([0]));let l=this.coefficients.length,d=new Int32Array(l+a);for(let u=0;u<l;u++)d[u]=this.field.multiply(this.coefficients[u],s);return new ja(this.field,d)}toString(){let a=new re;for(let s=this.getDegree();s>=0;s--){let l=this.getCoefficient(s);l!==0&&(l<0?(a.append(" - "),l=-l):a.length()>0&&a.append(" + "),(s===0||l!==1)&&a.append(l),s!==0&&(s===1?a.append("x"):(a.append("x^"),a.append(s))))}return a.toString()}}class Ts{add(a,s){return(a+s)%this.modulus}subtract(a,s){return(this.modulus+a-s)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}inverse(a){if(a===0)throw new Ue;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class dl extends Ts{constructor(a,s){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let l=1;for(let d=0;d<a;d++)this.expTable[d]=l,l=l*s%a;for(let d=0;d<a-1;d++)this.logTable[this.expTable[d]]=d;this.zero=new ja(this,new Int32Array([0])),this.one=new ja(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,s){if(a<0)throw new E;if(s===0)return this.zero;let l=new Int32Array(a+1);return l[0]=s,new ja(this,l)}}dl.PDF417_GF=new dl(ut.NUMBER_OF_CODEWORDS,3);class ul{constructor(){this.field=dl.PDF417_GF}decode(a,s,l){let d=new ja(this.field,a),u=new Int32Array(s),m=!1;for(let ge=s;ge>0;ge--){let ye=d.evaluateAt(this.field.exp(ge));u[s-ge]=ye,ye!==0&&(m=!0)}if(!m)return 0;let p=this.field.getOne();if(l!=null)for(const ge of l){let ye=this.field.exp(a.length-1-ge),Se=new ja(this.field,new Int32Array([this.field.subtract(0,ye),1]));p=p.multiply(Se)}let v=new ja(this.field,u),A=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),v,s),R=A[0],q=A[1],Z=this.findErrorLocations(R),ie=this.findErrorMagnitudes(q,R,Z);for(let ge=0;ge<Z.length;ge++){let ye=a.length-1-this.field.log(Z[ge]);if(ye<0)throw T.getChecksumInstance();a[ye]=this.field.subtract(a[ye],ie[ge])}return Z.length}runEuclideanAlgorithm(a,s,l){if(a.getDegree()<s.getDegree()){let Z=a;a=s,s=Z}let d=a,u=s,m=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(l/2);){let Z=d,ie=m;if(d=u,m=p,d.isZero())throw T.getChecksumInstance();u=Z;let ge=this.field.getZero(),ye=d.getCoefficient(d.getDegree()),Se=this.field.inverse(ye);for(;u.getDegree()>=d.getDegree()&&!u.isZero();){let Re=u.getDegree()-d.getDegree(),Xe=this.field.multiply(u.getCoefficient(u.getDegree()),Se);ge=ge.add(this.field.buildMonomial(Re,Xe)),u=u.subtract(d.multiplyByMonomial(Re,Xe))}p=ge.multiply(m).subtract(ie).negative()}let v=p.getCoefficient(0);if(v===0)throw T.getChecksumInstance();let A=this.field.inverse(v),R=p.multiply(A),q=u.multiply(A);return[R,q]}findErrorLocations(a){let s=a.getDegree(),l=new Int32Array(s),d=0;for(let u=1;u<this.field.getSize()&&d<s;u++)a.evaluateAt(u)===0&&(l[d]=this.field.inverse(u),d++);if(d!==s)throw T.getChecksumInstance();return l}findErrorMagnitudes(a,s,l){let d=s.getDegree(),u=new Int32Array(d);for(let A=1;A<=d;A++)u[d-A]=this.field.multiply(A,s.getCoefficient(A));let m=new ja(this.field,u),p=l.length,v=new Int32Array(p);for(let A=0;A<p;A++){let R=this.field.inverse(l[A]),q=this.field.subtract(0,a.evaluateAt(R)),Z=this.field.inverse(m.evaluateAt(R));v[A]=this.field.multiply(q,Z)}return v}}class Ms{constructor(a,s,l,d,u){a instanceof Ms?this.constructor_2(a):this.constructor_1(a,s,l,d,u)}constructor_1(a,s,l,d,u){const m=s==null||l==null,p=d==null||u==null;if(m&&p)throw new P;m?(s=new Me(0,d.getY()),l=new Me(0,u.getY())):p&&(d=new Me(a.getWidth()-1,s.getY()),u=new Me(a.getWidth()-1,l.getY())),this.image=a,this.topLeft=s,this.bottomLeft=l,this.topRight=d,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),l.getX())),this.maxX=Math.trunc(Math.max(d.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),d.getY())),this.maxY=Math.trunc(Math.max(l.getY(),u.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,s){return a==null?s:s==null?a:new Ms(a.image,a.topLeft,a.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(a,s,l){let d=this.topLeft,u=this.bottomLeft,m=this.topRight,p=this.bottomRight;if(a>0){let v=l?this.topLeft:this.topRight,A=Math.trunc(v.getY()-a);A<0&&(A=0);let R=new Me(v.getX(),A);l?d=R:m=R}if(s>0){let v=l?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+s);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let R=new Me(v.getX(),A);l?u=R:p=R}return new Ms(this.image,d,u,m,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Zl{constructor(a,s,l,d){this.columnCount=a,this.errorCorrectionLevel=d,this.rowCountUpperPart=s,this.rowCountLowerPart=l,this.rowCount=s+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ds{constructor(){this.buffer=""}static form(a,s){let l=-1;function d(m,p,v,A,R,q){if(m==="%%")return"%";if(s[++l]===void 0)return;m=A?parseInt(A.substr(1)):void 0;let Z=R?parseInt(R.substr(1)):void 0,ie;switch(q){case"s":ie=s[l];break;case"c":ie=s[l][0];break;case"f":ie=parseFloat(s[l]).toFixed(m);break;case"p":ie=parseFloat(s[l]).toPrecision(m);break;case"e":ie=parseFloat(s[l]).toExponential(m);break;case"x":ie=parseInt(s[l]).toString(Z||16);break;case"d":ie=parseFloat(parseInt(s[l],Z||10).toPrecision(m)).toFixed(0);break}ie=typeof ie=="object"?JSON.stringify(ie):(+ie).toString(Z);let ge=parseInt(v),ye=v&&v[0]+""=="0"?"0":" ";for(;ie.length<ge;)ie=p!==void 0?ie+ye:ye+ie;return ie}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(u,d)}format(a,...s){this.buffer+=Ds.form(a,s)}toString(){return this.buffer}}class Sn{constructor(a){this.boundingBox=new Ms(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let s=this.getCodeword(a);if(s!=null)return s;for(let l=1;l<Sn.MAX_NEARBY_DISTANCE;l++){let d=this.imageRowToCodewordIndex(a)-l;if(d>=0&&(s=this.codewords[d],s!=null)||(d=this.imageRowToCodewordIndex(a)+l,d<this.codewords.length&&(s=this.codewords[d],s!=null)))return s}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,s){this.codewords[this.imageRowToCodewordIndex(a)]=s}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new Ds;let s=0;for(const l of this.codewords){if(l==null){a.format("%3d:    |   %n",s++);continue}a.format("%3d: %3d|%3d%n",s++,l.getRowNumber(),l.getValue())}return a.toString()}}Sn.MAX_NEARBY_DISTANCE=5;class Ha{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let s=this.values.get(a);s==null&&(s=0),s++,this.values.set(a,s)}getValue(){let a=-1,s=new Array;for(const[l,d]of this.values.entries()){const u={getKey:()=>l,getValue:()=>d};u.getValue()>a?(a=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===a&&s.push(u.getKey())}return ut.toIntArray(s)}getConfidence(a){return this.values.get(a)}}class Rs extends Sn{constructor(a,s){super(a),this._isLeft=s}setRowNumbers(){for(let a of this.getCodewords())a?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,a);let l=this.getBoundingBox(),d=this._isLeft?l.getTopLeft():l.getTopRight(),u=this._isLeft?l.getBottomLeft():l.getBottomRight(),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=-1,A=1,R=0;for(let q=m;q<p;q++){if(s[q]==null)continue;let Z=s[q],ie=Z.getRowNumber()-v;if(ie===0)R++;else if(ie===1)A=Math.max(A,R),R=1,v=Z.getRowNumber();else if(ie<0||Z.getRowNumber()>=a.getRowCount()||ie>q)s[q]=null;else{let ge;A>2?ge=(A-2)*ie:ge=ie;let ye=ge>=q;for(let Se=1;Se<=ge&&!ye;Se++)ye=s[q-Se]!=null;ye?s[q]=null:(v=Z.getRowNumber(),R=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let s=new Int32Array(a.getRowCount());for(let l of this.getCodewords())if(l!=null){let d=l.getRowNumber();if(d>=s.length)continue;s[d]++}return s}adjustIncompleteIndicatorColumnRowNumbers(a){let s=this.getBoundingBox(),l=this._isLeft?s.getTopLeft():s.getTopRight(),d=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(l.getY())),m=this.imageRowToCodewordIndex(Math.trunc(d.getY())),p=this.getCodewords(),v=-1;for(let A=u;A<m;A++){if(p[A]==null)continue;let R=p[A];R.setRowNumberAsRowIndicatorColumn();let q=R.getRowNumber()-v;q===0||(q===1?v=R.getRowNumber():R.getRowNumber()>=a.getRowCount()?p[A]=null:v=R.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),s=new Ha,l=new Ha,d=new Ha,u=new Ha;for(let p of a){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,A=p.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:l.setValue(v*3+1);break;case 1:u.setValue(v/3),d.setValue(v%3);break;case 2:s.setValue(v+1);break}}if(s.getValue().length===0||l.getValue().length===0||d.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||l.getValue()[0]+d.getValue()[0]<ut.MIN_ROWS_IN_BARCODE||l.getValue()[0]+d.getValue()[0]>ut.MAX_ROWS_IN_BARCODE)return null;let m=new Zl(s.getValue()[0],l.getValue()[0],d.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(a,m),m}removeIncorrectCodewords(a,s){for(let l=0;l<a.length;l++){let d=a[l];if(a[l]==null)continue;let u=d.getValue()%30,m=d.getRowNumber();if(m>s.getRowCount()){a[l]=null;continue}switch(this._isLeft||(m+=2),m%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(a[l]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(a[l]=null);break;case 2:u+1!==s.getColumnCount()&&(a[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Is{constructor(a,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=ut.MAX_CODEWORDS_IN_BARCODE,s;do s=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let l=this.detectionResultColumns[s].getCodewords();for(let d=0;d<l.length;d++)l[d]!=null&&(l[d].hasValidRowNumber()||this.adjustRowNumbers(s,d,l))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<a.length;l++)if(a[l]!=null&&s[l]!=null&&a[l].getRowNumber()===s[l].getRowNumber())for(let d=1;d<=this.barcodeColumnCount;d++){let u=this.detectionResultColumns[d].getCodewords()[l];u!=null&&(u.setRowNumber(a[l].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[d].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let d=s[l].getRowNumber(),u=0;for(let m=this.barcodeColumnCount+1;m>0&&u<this.ADJUST_ROW_NUMBER_SKIP;m--){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(u=Is.adjustRowNumberIfValid(d,u,p),p.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,s=this.detectionResultColumns[0].getCodewords();for(let l=0;l<s.length;l++){if(s[l]==null)continue;let d=s[l].getRowNumber(),u=0;for(let m=1;m<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;m++){let p=this.detectionResultColumns[m].getCodewords()[l];p!=null&&(u=Is.adjustRowNumberIfValid(d,u,p),p.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,s,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(a)?(l.setRowNumber(a),s=0):++s),s}adjustRowNumbers(a,s,l){if(!this.detectionResultColumns[a-1])return;let d=l[s],u=this.detectionResultColumns[a-1].getCodewords(),m=u;this.detectionResultColumns[a+1]!=null&&(m=this.detectionResultColumns[a+1].getCodewords());let p=new Array(14);p[2]=u[s],p[3]=m[s],s>0&&(p[0]=l[s-1],p[4]=u[s-1],p[5]=m[s-1]),s>1&&(p[8]=l[s-2],p[10]=u[s-2],p[11]=m[s-2]),s<l.length-1&&(p[1]=l[s+1],p[6]=u[s+1],p[7]=m[s+1]),s<l.length-2&&(p[9]=l[s+2],p[12]=u[s+2],p[13]=m[s+2]);for(let v of p)if(Is.adjustRowNumber(d,v))return}static adjustRowNumber(a,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===a.getBucket()?(a.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,s){this.detectionResultColumns[a]=s}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Ds;for(let l=0;l<a.getCodewords().length;l++){s.format("CW %3d:",l);for(let d=0;d<this.barcodeColumnCount+2;d++){if(this.detectionResultColumns[d]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[d].getCodewords()[l];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class hs{constructor(a,s,l,d){this.rowNumber=hs.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(s),this.bucket=Math.trunc(l),this.value=Math.trunc(d)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==hs.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}hs.BARCODE_ROW_UNKNOWN=-1;class mr{static initialize(){for(let a=0;a<ut.SYMBOL_TABLE.length;a++){let s=ut.SYMBOL_TABLE[a],l=s&1;for(let d=0;d<ut.BARS_IN_MODULE;d++){let u=0;for(;(s&1)===l;)u+=1,s>>=1;l=s&1,mr.RATIOS_TABLE[a]||(mr.RATIOS_TABLE[a]=new Array(ut.BARS_IN_MODULE)),mr.RATIOS_TABLE[a][ut.BARS_IN_MODULE-d-1]=Math.fround(u/ut.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let s=mr.getDecodedCodewordValue(mr.sampleBitCounts(a));return s!==-1?s:mr.getClosestDecodedValue(a)}static sampleBitCounts(a){let s=oe.sum(a),l=new Int32Array(ut.BARS_IN_MODULE),d=0,u=0;for(let m=0;m<ut.MODULES_IN_CODEWORD;m++){let p=s/(2*ut.MODULES_IN_CODEWORD)+m*s/ut.MODULES_IN_CODEWORD;u+a[d]<=p&&(u+=a[d],d++),l[d]++}return l}static getDecodedCodewordValue(a){let s=mr.getBitValue(a);return ut.getCodeword(s)===-1?-1:s}static getBitValue(a){let s=0;for(let l=0;l<a.length;l++)for(let d=0;d<a[l];d++)s=s<<1|(l%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(a){let s=oe.sum(a),l=new Array(ut.BARS_IN_MODULE);if(s>1)for(let m=0;m<l.length;m++)l[m]=Math.fround(a[m]/s);let d=pe.MAX_VALUE,u=-1;this.bSymbolTableReady||mr.initialize();for(let m=0;m<mr.RATIOS_TABLE.length;m++){let p=0,v=mr.RATIOS_TABLE[m];for(let A=0;A<ut.BARS_IN_MODULE;A++){let R=Math.fround(v[A]-l[A]);if(p+=Math.fround(R*R),p>=d)break}p<d&&(d=p,u=ut.SYMBOL_TABLE[m])}return u}}mr.bSymbolTableReady=!1,mr.RATIOS_TABLE=new Array(ut.SYMBOL_TABLE.length).map(V=>new Array(ut.BARS_IN_MODULE));class Wl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class Kl{static parseLong(a,s=void 0){return parseInt(a,s)}}class An extends b{}An.kind="NullPointerException";class Jl{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,s,l){if(a==null)throw new An;if(s<0||s>a.length||l<0||s+l>a.length||s+l<0)throw new z;if(l===0)return;for(let d=0;d<l;d++)this.write(a[s+d])}flush(){}close(){}}class oc extends b{}class $d extends Jl{constructor(a=32){if(super(),this.count=0,a<0)throw new E("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let l=this.buf.length<<1;if(l-a<0&&(l=a),l<0){if(a<0)throw new oc;l=D.MAX_VALUE}this.buf=L.copyOfUint8Array(this.buf,l)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,s,l){if(s<0||s>a.length||l<0||s+l-a.length>0)throw new z;this.ensureCapacity(this.count+l),M.arraycopy(a,s,this.buf,this.count,l),this.count+=l}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return L.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Jt;(function(V){V[V.ALPHA=0]="ALPHA",V[V.LOWER=1]="LOWER",V[V.MIXED=2]="MIXED",V[V.PUNCT=3]="PUNCT",V[V.ALPHA_SHIFT=4]="ALPHA_SHIFT",V[V.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Jt||(Jt={}));function cc(){if(typeof window<"u")return window.BigInt||null;if(typeof hd<"u")return hd.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let En;function Os(V){if(typeof En>"u"&&(En=cc()),En===null)throw new Error("BigInt is not supported!");return En(V)}function Qd(){let V=[];V[0]=Os(1);let a=Os(900);V[1]=a;for(let s=2;s<16;s++)V[s]=V[s-1]*a;return V}class Oe{static decode(a,s){let l=new re(""),d=Q.ISO8859_1;l.enableDecoding(d);let u=1,m=a[u++],p=new Wl;for(;u<a[0];){switch(m){case Oe.TEXT_COMPACTION_MODE_LATCH:u=Oe.textCompaction(a,u,l);break;case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:u=Oe.byteCompaction(m,a,d,u,l);break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(a[u++]);break;case Oe.NUMERIC_COMPACTION_MODE_LATCH:u=Oe.numericCompaction(a,u,l);break;case Oe.ECI_CHARSET:Q.getCharacterSetECIByValue(a[u++]);break;case Oe.ECI_GENERAL_PURPOSE:u+=2;break;case Oe.ECI_USER_DEFINED:u++;break;case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=Oe.decodeMacroBlock(a,u,p);break;case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:throw new U;default:u--,u=Oe.textCompaction(a,u,l);break}if(u<a.length)m=a[u++];else throw U.getFormatInstance()}if(l.length()===0)throw U.getFormatInstance();let v=new Je(null,l.toString(),null,s);return v.setOther(p),v}static decodeMacroBlock(a,s,l){if(s+Oe.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw U.getFormatInstance();let d=new Int32Array(Oe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<Oe.NUMBER_OF_SEQUENCE_CODEWORDS;p++,s++)d[p]=a[s];l.setSegmentIndex(D.parseInt(Oe.decodeBase900toBase10(d,Oe.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new re;s=Oe.textCompaction(a,s,u),l.setFileId(u.toString());let m=-1;for(a[s]===Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(m=s+1);s<a[0];)switch(a[s]){case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,a[s]){case Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new re;s=Oe.textCompaction(a,s+1,p),l.setFileName(p.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new re;s=Oe.textCompaction(a,s+1,v),l.setSender(v.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new re;s=Oe.textCompaction(a,s+1,A),l.setAddressee(A.toString());break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let R=new re;s=Oe.numericCompaction(a,s+1,R),l.setSegmentCount(D.parseInt(R.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let q=new re;s=Oe.numericCompaction(a,s+1,q),l.setTimestamp(Kl.parseLong(q.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let Z=new re;s=Oe.numericCompaction(a,s+1,Z),l.setChecksum(D.parseInt(Z.toString()));break;case Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let ie=new re;s=Oe.numericCompaction(a,s+1,ie),l.setFileSize(Kl.parseLong(ie.toString()));break;default:throw U.getFormatInstance()}break;case Oe.MACRO_PDF417_TERMINATOR:s++,l.setLastSegment(!0);break;default:throw U.getFormatInstance()}if(m!==-1){let p=s-m;l.isLastSegment()&&p--,l.setOptionalData(L.copyOfRange(a,m,m+p))}return s}static textCompaction(a,s,l){let d=new Int32Array((a[0]-s)*2),u=new Int32Array((a[0]-s)*2),m=0,p=!1;for(;s<a[0]&&!p;){let v=a[s++];if(v<Oe.TEXT_COMPACTION_MODE_LATCH)d[m]=v/30,d[m+1]=v%30,m+=2;else switch(v){case Oe.TEXT_COMPACTION_MODE_LATCH:d[m++]=Oe.TEXT_COMPACTION_MODE_LATCH;break;case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:s--,p=!0;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d[m]=Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=a[s++],u[m]=v,m++;break}}return Oe.decodeTextCompaction(d,u,m,l),s}static decodeTextCompaction(a,s,l,d){let u=Jt.ALPHA,m=Jt.ALPHA,p=0;for(;p<l;){let v=a[p],A="";switch(u){case Jt.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case Oe.LL:u=Jt.LOWER;break;case Oe.ML:u=Jt.MIXED;break;case Oe.PS:m=u,u=Jt.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=Jt.ALPHA;break}break;case Jt.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case Oe.AS:m=u,u=Jt.ALPHA_SHIFT;break;case Oe.ML:u=Jt.MIXED;break;case Oe.PS:m=u,u=Jt.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=Jt.ALPHA;break}break;case Jt.MIXED:if(v<Oe.PL)A=Oe.MIXED_CHARS[v];else switch(v){case Oe.PL:u=Jt.PUNCT;break;case 26:A=" ";break;case Oe.LL:u=Jt.LOWER;break;case Oe.AL:u=Jt.ALPHA;break;case Oe.PS:m=u,u=Jt.PUNCT_SHIFT;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=Jt.ALPHA;break}break;case Jt.PUNCT:if(v<Oe.PAL)A=Oe.PUNCT_CHARS[v];else switch(v){case Oe.PAL:u=Jt.ALPHA;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=Jt.ALPHA;break}break;case Jt.ALPHA_SHIFT:if(u=m,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=Jt.ALPHA;break}break;case Jt.PUNCT_SHIFT:if(u=m,v<Oe.PAL)A=Oe.PUNCT_CHARS[v];else switch(v){case Oe.PAL:u=Jt.ALPHA;break;case Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:d.append(s[p]);break;case Oe.TEXT_COMPACTION_MODE_LATCH:u=Jt.ALPHA;break}break}A!==""&&d.append(A),p++}}static byteCompaction(a,s,l,d,u){let m=new $d,p=0,v=0,A=!1;switch(a){case Oe.BYTE_COMPACTION_MODE_LATCH:let R=new Int32Array(6),q=s[d++];for(;d<s[0]&&!A;)switch(R[p++]=q,v=900*v+q,q=s[d++],q){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:d--,A=!0;break;default:if(p%5===0&&p>0){for(let Z=0;Z<6;++Z)m.write(Number(Os(v)>>Os(8*(5-Z))));v=0,p=0}break}d===s[0]&&q<Oe.TEXT_COMPACTION_MODE_LATCH&&(R[p++]=q);for(let Z=0;Z<p;Z++)m.write(R[Z]);break;case Oe.BYTE_COMPACTION_MODE_LATCH_6:for(;d<s[0]&&!A;){let Z=s[d++];if(Z<Oe.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+Z;else switch(Z){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.NUMERIC_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:d--,A=!0;break}if(p%5===0&&p>0){for(let ie=0;ie<6;++ie)m.write(Number(Os(v)>>Os(8*(5-ie))));v=0,p=0}}break}return u.append(ce.decode(m.toByteArray(),l)),d}static numericCompaction(a,s,l){let d=0,u=!1,m=new Int32Array(Oe.MAX_NUMERIC_CODEWORDS);for(;s<a[0]&&!u;){let p=a[s++];if(s===a[0]&&(u=!0),p<Oe.TEXT_COMPACTION_MODE_LATCH)m[d]=p,d++;else switch(p){case Oe.TEXT_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH:case Oe.BYTE_COMPACTION_MODE_LATCH_6:case Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Oe.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(d%Oe.MAX_NUMERIC_CODEWORDS===0||p===Oe.NUMERIC_COMPACTION_MODE_LATCH||u)&&d>0&&(l.append(Oe.decodeBase900toBase10(m,d)),d=0)}return s}static decodeBase900toBase10(a,s){let l=Os(0);for(let u=0;u<s;u++)l+=Oe.EXP900[s-u-1]*Os(a[u]);let d=l.toString();if(d.charAt(0)!=="1")throw new U;return d.substring(1)}}Oe.TEXT_COMPACTION_MODE_LATCH=900,Oe.BYTE_COMPACTION_MODE_LATCH=901,Oe.NUMERIC_COMPACTION_MODE_LATCH=902,Oe.BYTE_COMPACTION_MODE_LATCH_6=924,Oe.ECI_USER_DEFINED=925,Oe.ECI_GENERAL_PURPOSE=926,Oe.ECI_CHARSET=927,Oe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Oe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Oe.MACRO_PDF417_TERMINATOR=922,Oe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Oe.MAX_NUMERIC_CODEWORDS=15,Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Oe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Oe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Oe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Oe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Oe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Oe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Oe.PL=25,Oe.LL=27,Oe.AS=27,Oe.ML=28,Oe.AL=28,Oe.PS=29,Oe.PAL=29,Oe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Oe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Oe.EXP900=cc()?Qd():[],Oe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class St{constructor(){}static decode(a,s,l,d,u,m,p){let v=new Ms(a,s,l,d,u),A=null,R=null,q;for(let ge=!0;;ge=!1){if(s!=null&&(A=St.getRowIndicatorColumn(a,v,s,!0,m,p)),d!=null&&(R=St.getRowIndicatorColumn(a,v,d,!1,m,p)),q=St.merge(A,R),q==null)throw P.getNotFoundInstance();let ye=q.getBoundingBox();if(ge&&ye!=null&&(ye.getMinY()<v.getMinY()||ye.getMaxY()>v.getMaxY()))v=ye;else break}q.setBoundingBox(v);let Z=q.getBarcodeColumnCount()+1;q.setDetectionResultColumn(0,A),q.setDetectionResultColumn(Z,R);let ie=A!=null;for(let ge=1;ge<=Z;ge++){let ye=ie?ge:Z-ge;if(q.getDetectionResultColumn(ye)!==void 0)continue;let Se;ye===0||ye===Z?Se=new Rs(v,ye===0):Se=new Sn(v),q.setDetectionResultColumn(ye,Se);let Re=-1,Xe=Re;for(let $e=v.getMinY();$e<=v.getMaxY();$e++){if(Re=St.getStartColumn(q,ye,$e,ie),Re<0||Re>v.getMaxX()){if(Xe===-1)continue;Re=Xe}let Ye=St.detectCodeword(a,v.getMinX(),v.getMaxX(),ie,Re,$e,m,p);Ye!=null&&(Se.setCodeword($e,Ye),Xe=Re,m=Math.min(m,Ye.getWidth()),p=Math.max(p,Ye.getWidth()))}}return St.createDecoderResult(q)}static merge(a,s){if(a==null&&s==null)return null;let l=St.getBarcodeMetadata(a,s);if(l==null)return null;let d=Ms.merge(St.adjustBoundingBox(a),St.adjustBoundingBox(s));return new Is(l,d)}static adjustBoundingBox(a){if(a==null)return null;let s=a.getRowHeights();if(s==null)return null;let l=St.getMax(s),d=0;for(let p of s)if(d+=l-p,p>0)break;let u=a.getCodewords();for(let p=0;d>0&&u[p]==null;p++)d--;let m=0;for(let p=s.length-1;p>=0&&(m+=l-s[p],!(s[p]>0));p--);for(let p=u.length-1;m>0&&u[p]==null;p--)m--;return a.getBoundingBox().addMissingRows(d,m,a.isLeft())}static getMax(a){let s=-1;for(let l of a)s=Math.max(s,l);return s}static getBarcodeMetadata(a,s){let l;if(a==null||(l=a.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let d;return s==null||(d=s.getBarcodeMetadata())==null?l:l.getColumnCount()!==d.getColumnCount()&&l.getErrorCorrectionLevel()!==d.getErrorCorrectionLevel()&&l.getRowCount()!==d.getRowCount()?null:l}static getRowIndicatorColumn(a,s,l,d,u,m){let p=new Rs(s,d);for(let v=0;v<2;v++){let A=v===0?1:-1,R=Math.trunc(Math.trunc(l.getX()));for(let q=Math.trunc(Math.trunc(l.getY()));q<=s.getMaxY()&&q>=s.getMinY();q+=A){let Z=St.detectCodeword(a,0,a.getWidth(),d,R,q,u,m);Z!=null&&(p.setCodeword(q,Z),d?R=Z.getStartX():R=Z.getEndX())}}return p}static adjustCodewordCount(a,s){let l=s[0][1],d=l.getValue(),u=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-St.getNumberOfECCodeWords(a.getBarcodeECLevel());if(d.length===0){if(u<1||u>ut.MAX_CODEWORDS_IN_BARCODE)throw P.getNotFoundInstance();l.setValue(u)}else d[0]!==u&&l.setValue(u)}static createDecoderResult(a){let s=St.createBarcodeMatrix(a);St.adjustCodewordCount(a,s);let l=new Array,d=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),u=[],m=new Array;for(let v=0;v<a.getBarcodeRowCount();v++)for(let A=0;A<a.getBarcodeColumnCount();A++){let R=s[v][A+1].getValue(),q=v*a.getBarcodeColumnCount()+A;R.length===0?l.push(q):R.length===1?d[q]=R[0]:(m.push(q),u.push(R))}let p=new Array(u.length);for(let v=0;v<p.length;v++)p[v]=u[v];return St.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),d,ut.toIntArray(l),ut.toIntArray(m),p)}static createDecoderResultFromAmbiguousValues(a,s,l,d,u){let m=new Int32Array(d.length),p=100;for(;p-- >0;){for(let v=0;v<m.length;v++)s[d[v]]=u[v][m[v]];try{return St.decodeCodewords(s,a,l)}catch(v){if(!(v instanceof T))throw v}if(m.length===0)throw T.getChecksumInstance();for(let v=0;v<m.length;v++)if(m[v]<u[v].length-1){m[v]++;break}else if(m[v]=0,v===m.length-1)throw T.getChecksumInstance()}throw T.getChecksumInstance()}static createBarcodeMatrix(a){let s=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let d=0;d<s.length;d++)for(let u=0;u<s[d].length;u++)s[d][u]=new Ha;let l=0;for(let d of a.getDetectionResultColumns()){if(d!=null){for(let u of d.getCodewords())if(u!=null){let m=u.getRowNumber();if(m>=0){if(m>=s.length)continue;s[m][l].setValue(u.getValue())}}}l++}return s}static isValidBarcodeColumn(a,s){return s>=0&&s<=a.getBarcodeColumnCount()+1}static getStartColumn(a,s,l,d){let u=d?1:-1,m=null;if(St.isValidBarcodeColumn(a,s-u)&&(m=a.getDetectionResultColumn(s-u).getCodeword(l)),m!=null)return d?m.getEndX():m.getStartX();if(m=a.getDetectionResultColumn(s).getCodewordNearby(l),m!=null)return d?m.getStartX():m.getEndX();if(St.isValidBarcodeColumn(a,s-u)&&(m=a.getDetectionResultColumn(s-u).getCodewordNearby(l)),m!=null)return d?m.getEndX():m.getStartX();let p=0;for(;St.isValidBarcodeColumn(a,s-u);){s-=u;for(let v of a.getDetectionResultColumn(s).getCodewords())if(v!=null)return(d?v.getEndX():v.getStartX())+u*p*(v.getEndX()-v.getStartX());p++}return d?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,s,l,d,u,m,p,v){u=St.adjustCodewordStartColumn(a,s,l,d,u,m);let A=St.getModuleBitCount(a,s,l,d,u,m);if(A==null)return null;let R,q=oe.sum(A);if(d)R=u+q;else{for(let ge=0;ge<A.length/2;ge++){let ye=A[ge];A[ge]=A[A.length-1-ge],A[A.length-1-ge]=ye}R=u,u=R-q}if(!St.checkCodewordSkew(q,p,v))return null;let Z=mr.getDecodedValue(A),ie=ut.getCodeword(Z);return ie===-1?null:new hs(u,R,St.getCodewordBucketNumber(Z),ie)}static getModuleBitCount(a,s,l,d,u,m){let p=u,v=new Int32Array(8),A=0,R=d?1:-1,q=d;for(;(d?p<l:p>=s)&&A<v.length;)a.get(p,m)===q?(v[A]++,p+=R):(A++,q=!q);return A===v.length||p===(d?l:s)&&A===v.length-1?v:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,s,l,d,u,m){let p=u,v=d?-1:1;for(let A=0;A<2;A++){for(;(d?p>=s:p<l)&&d===a.get(p,m);){if(Math.abs(u-p)>St.CODEWORD_SKEW_SIZE)return u;p+=v}v=-v,d=!d}return p}static checkCodewordSkew(a,s,l){return s-St.CODEWORD_SKEW_SIZE<=a&&a<=l+St.CODEWORD_SKEW_SIZE}static decodeCodewords(a,s,l){if(a.length===0)throw U.getFormatInstance();let d=1<<s+1,u=St.correctErrors(a,l,d);St.verifyCodewordCount(a,d);let m=Oe.decode(a,""+s);return m.setErrorsCorrected(u),m.setErasures(l.length),m}static correctErrors(a,s,l){if(s!=null&&s.length>l/2+St.MAX_ERRORS||l<0||l>St.MAX_EC_CODEWORDS)throw T.getChecksumInstance();return St.errorCorrection.decode(a,l,s)}static verifyCodewordCount(a,s){if(a.length<4)throw U.getFormatInstance();let l=a[0];if(l>a.length)throw U.getFormatInstance();if(l===0)if(s<a.length)a[0]=a.length-s;else throw U.getFormatInstance()}static getBitCountForCodeword(a){let s=new Int32Array(8),l=0,d=s.length-1;for(;!((a&1)!==l&&(l=a&1,d--,d<0));)s[d]++,a>>=1;return s}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return St.getCodewordBucketNumber(St.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let s=new Ds;for(let l=0;l<a.length;l++){s.format("Row %2d: ",l);for(let d=0;d<a[l].length;d++){let u=a[l][d];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}St.CODEWORD_SKEW_SIZE=2,St.MAX_ERRORS=3,St.MAX_EC_CODEWORDS=512,St.errorCorrection=new ul;class Za{decode(a,s=null){let l=Za.decode(a,s,!1);if(l==null||l.length===0||l[0]==null)throw P.getNotFoundInstance();return l[0]}decodeMultiple(a,s=null){try{return Za.decode(a,s,!0)}catch(l){throw l instanceof U||l instanceof T?P.getNotFoundInstance():l}}static decode(a,s,l){const d=new Array,u=Nt.detectMultiple(a,s,l);for(const m of u.getPoints()){const p=St.decode(u.getBits(),m[4],m[5],m[6],m[7],Za.getMinCodewordWidth(m),Za.getMaxCodewordWidth(m)),v=new be(p.getText(),p.getRawBytes(),void 0,m,xe.PDF_417);v.putMetadata(je.ERROR_CORRECTION_LEVEL,p.getECLevel());const A=p.getOther();A!=null&&v.putMetadata(je.PDF417_EXTRA_METADATA,A),d.push(v)}return d.map(m=>m)}static getMaxWidth(a,s){return a==null||s==null?0:Math.trunc(Math.abs(a.getX()-s.getX()))}static getMinWidth(a,s){return a==null||s==null?D.MAX_VALUE:Math.trunc(Math.abs(a.getX()-s.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(Za.getMaxWidth(a[0],a[4]),Za.getMaxWidth(a[6],a[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.max(Za.getMaxWidth(a[1],a[5]),Za.getMaxWidth(a[7],a[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(Za.getMinWidth(a[0],a[4]),Za.getMinWidth(a[6],a[2])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN),Math.min(Za.getMinWidth(a[1],a[5]),Za.getMinWidth(a[7],a[3])*ut.MODULES_IN_CODEWORD/ut.MODULES_IN_STOP_PATTERN)))}reset(){}}class xl extends b{}xl.kind="ReaderException";class dc{constructor(a,s){this.verbose=a===!0,s&&this.setHints(s)}decode(a,s){return s&&this.setHints(s),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const s=!x(a)&&a.get(X.TRY_HARDER)===!0,l=x(a)?null:a.get(X.POSSIBLE_FORMATS),d=new Array;if(!x(l)){const u=l.some(m=>m===xe.UPC_A||m===xe.UPC_E||m===xe.EAN_13||m===xe.EAN_8||m===xe.CODABAR||m===xe.CODE_39||m===xe.CODE_93||m===xe.CODE_128||m===xe.ITF||m===xe.RSS_14||m===xe.RSS_EXPANDED);u&&!s&&d.push(new As(a,this.verbose)),l.includes(xe.QR_CODE)&&d.push(new us),l.includes(xe.DATA_MATRIX)&&d.push(new Fr),l.includes(xe.AZTEC)&&d.push(new Tt),l.includes(xe.PDF_417)&&d.push(new Za),u&&s&&d.push(new As(a,this.verbose))}d.length===0&&(s||d.push(new As(a,this.verbose)),d.push(new us),d.push(new Fr),d.push(new Tt),d.push(new Za),s&&d.push(new As(a,this.verbose))),this.readers=d}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new xl("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(a,this.hints)}catch(l){if(l instanceof xl)continue}throw new P("No MultiFormat Readers were able to detect the code.")}}class Zd extends ae{constructor(a=null,s=500){const l=new dc;l.setHints(a),super(l,s)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class Wd extends ae{constructor(a=500){super(new Za,a)}}class Kd extends ae{constructor(a=500){super(new us,a)}}var hl;(function(V){V[V.ERROR_CORRECTION=0]="ERROR_CORRECTION",V[V.CHARACTER_SET=1]="CHARACTER_SET",V[V.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",V[V.MIN_SIZE=3]="MIN_SIZE",V[V.MAX_SIZE=4]="MAX_SIZE",V[V.MARGIN=5]="MARGIN",V[V.PDF417_COMPACT=6]="PDF417_COMPACT",V[V.PDF417_COMPACTION=7]="PDF417_COMPACTION",V[V.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",V[V.AZTEC_LAYERS=9]="AZTEC_LAYERS",V[V.QR_VERSION=10]="QR_VERSION"})(hl||(hl={}));var Ba=hl;class Gi{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new at(a,Int32Array.from([1])))}buildGenerator(a){const s=this.cachedGenerators;if(a>=s.length){let l=s[s.length-1];const d=this.field;for(let u=s.length;u<=a;u++){const m=l.multiply(new at(d,Int32Array.from([1,d.exp(u-1+d.getGeneratorBase())])));s.push(m),l=m}}return s[a]}encode(a,s){if(s===0)throw new E("No error correction bytes");const l=a.length-s;if(l<=0)throw new E("No data bytes provided");const d=this.buildGenerator(s),u=new Int32Array(l);M.arraycopy(a,0,u,0,l);let m=new at(this.field,u);m=m.multiplyByMonomial(s,1);const v=m.divide(d)[1].getCoefficients(),A=s-v.length;for(let R=0;R<A;R++)a[l+R]=0;M.arraycopy(v,0,a,l+A,v.length)}}class Na{constructor(){}static applyMaskPenaltyRule1(a){return Na.applyMaskPenaltyRule1Internal(a,!0)+Na.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let s=0;const l=a.getArray(),d=a.getWidth(),u=a.getHeight();for(let m=0;m<u-1;m++){const p=l[m];for(let v=0;v<d-1;v++){const A=p[v];A===p[v+1]&&A===l[m+1][v]&&A===l[m+1][v+1]&&s++}}return Na.N2*s}static applyMaskPenaltyRule3(a){let s=0;const l=a.getArray(),d=a.getWidth(),u=a.getHeight();for(let m=0;m<u;m++)for(let p=0;p<d;p++){const v=l[m];p+6<d&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(Na.isWhiteHorizontal(v,p-4,p)||Na.isWhiteHorizontal(v,p+7,p+11))&&s++,m+6<u&&l[m][p]===1&&l[m+1][p]===0&&l[m+2][p]===1&&l[m+3][p]===1&&l[m+4][p]===1&&l[m+5][p]===0&&l[m+6][p]===1&&(Na.isWhiteVertical(l,p,m-4,m)||Na.isWhiteVertical(l,p,m+7,m+11))&&s++}return s*Na.N3}static isWhiteHorizontal(a,s,l){s=Math.max(s,0),l=Math.min(l,a.length);for(let d=s;d<l;d++)if(a[d]===1)return!1;return!0}static isWhiteVertical(a,s,l,d){l=Math.max(l,0),d=Math.min(d,a.length);for(let u=l;u<d;u++)if(a[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let s=0;const l=a.getArray(),d=a.getWidth(),u=a.getHeight();for(let v=0;v<u;v++){const A=l[v];for(let R=0;R<d;R++)A[R]===1&&s++}const m=a.getHeight()*a.getWidth();return Math.floor(Math.abs(s*2-m)*10/m)*Na.N4}static getDataMaskBit(a,s,l){let d,u;switch(a){case 0:d=l+s&1;break;case 1:d=l&1;break;case 2:d=s%3;break;case 3:d=(l+s)%3;break;case 4:d=Math.floor(l/2)+Math.floor(s/3)&1;break;case 5:u=l*s,d=(u&1)+u%3;break;case 6:u=l*s,d=(u&1)+u%3&1;break;case 7:u=l*s,d=u%3+(l+s&1)&1;break;default:throw new E("Invalid mask pattern: "+a)}return d===0}static applyMaskPenaltyRule1Internal(a,s){let l=0;const d=s?a.getHeight():a.getWidth(),u=s?a.getWidth():a.getHeight(),m=a.getArray();for(let p=0;p<d;p++){let v=0,A=-1;for(let R=0;R<u;R++){const q=s?m[p][R]:m[R][p];q===A?v++:(v>=5&&(l+=Na.N1+(v-5)),v=1,A=q)}v>=5&&(l+=Na.N1+(v-5))}return l}}Na.N1=3,Na.N2=3,Na.N3=40,Na.N4=10;class ml{constructor(a,s){this.width=a,this.height=s;const l=new Array(s);for(let d=0;d!==s;d++)l[d]=new Uint8Array(a);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(a,s){return this.bytes[s][a]}getArray(){return this.bytes}setNumber(a,s,l){this.bytes[s][a]=l}setBoolean(a,s,l){this.bytes[s][a]=l?1:0}clear(a){for(const s of this.bytes)L.fill(s,a)}equals(a){if(!(a instanceof ml))return!1;const s=a;if(this.width!==s.width||this.height!==s.height)return!1;for(let l=0,d=this.height;l<d;++l){const u=this.bytes[l],m=s.bytes[l];for(let p=0,v=this.width;p<v;++p)if(u[p]!==m[p])return!1}return!0}toString(){const a=new re;for(let s=0,l=this.height;s<l;++s){const d=this.bytes[s];for(let u=0,m=this.width;u<m;++u)switch(d[u]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Ks{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new re;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Ks.NUM_MASK_PATTERNS}}Ks.NUM_MASK_PATTERNS=8;class ta extends b{}ta.kind="WriterException";class xt{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,s,l,d,u){xt.clearMatrix(u),xt.embedBasicPatterns(l,u),xt.embedTypeInfo(s,d,u),xt.maybeEmbedVersionInfo(l,u),xt.embedDataBits(a,d,u)}static embedBasicPatterns(a,s){xt.embedPositionDetectionPatternsAndSeparators(s),xt.embedDarkDotAtLeftBottomCorner(s),xt.maybeEmbedPositionAdjustmentPatterns(a,s),xt.embedTimingPatterns(s)}static embedTypeInfo(a,s,l){const d=new B;xt.makeTypeInfoBits(a,s,d);for(let u=0,m=d.getSize();u<m;++u){const p=d.get(d.getSize()-1-u),v=xt.TYPE_INFO_COORDINATES[u],A=v[0],R=v[1];if(l.setBoolean(A,R,p),u<8){const q=l.getWidth()-u-1;l.setBoolean(q,8,p)}else{const Z=l.getHeight()-7+(u-8);l.setBoolean(8,Z,p)}}}static maybeEmbedVersionInfo(a,s){if(a.getVersionNumber()<7)return;const l=new B;xt.makeVersionInfoBits(a,l);let d=17;for(let u=0;u<6;++u)for(let m=0;m<3;++m){const p=l.get(d);d--,s.setBoolean(u,s.getHeight()-11+m,p),s.setBoolean(s.getHeight()-11+m,u,p)}}static embedDataBits(a,s,l){let d=0,u=-1,m=l.getWidth()-1,p=l.getHeight()-1;for(;m>0;){for(m===6&&(m-=1);p>=0&&p<l.getHeight();){for(let v=0;v<2;++v){const A=m-v;if(!xt.isEmpty(l.get(A,p)))continue;let R;d<a.getSize()?(R=a.get(d),++d):R=!1,s!==255&&Na.getDataMaskBit(s,A,p)&&(R=!R),l.setBoolean(A,p,R)}p+=u}u=-u,p+=u,m-=2}if(d!==a.getSize())throw new ta("Not all bits consumed: "+d+"/"+a.getSize())}static findMSBSet(a){return 32-D.numberOfLeadingZeros(a)}static calculateBCHCode(a,s){if(s===0)throw new E("0 polynomial");const l=xt.findMSBSet(s);for(a<<=l-1;xt.findMSBSet(a)>=l;)a^=s<<xt.findMSBSet(a)-l;return a}static makeTypeInfoBits(a,s,l){if(!Ks.isValidMaskPattern(s))throw new ta("Invalid mask pattern");const d=a.getBits()<<3|s;l.appendBits(d,5);const u=xt.calculateBCHCode(d,xt.TYPE_INFO_POLY);l.appendBits(u,10);const m=new B;if(m.appendBits(xt.TYPE_INFO_MASK_PATTERN,15),l.xor(m),l.getSize()!==15)throw new ta("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(a,s){s.appendBits(a.getVersionNumber(),6);const l=xt.calculateBCHCode(a.getVersionNumber(),xt.VERSION_INFO_POLY);if(s.appendBits(l,12),s.getSize()!==18)throw new ta("should not happen but we got: "+s.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let s=8;s<a.getWidth()-8;++s){const l=(s+1)%2;xt.isEmpty(a.get(s,6))&&a.setNumber(s,6,l),xt.isEmpty(a.get(6,s))&&a.setNumber(6,s,l)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new ta;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,s,l){for(let d=0;d<8;++d){if(!xt.isEmpty(l.get(a+d,s)))throw new ta;l.setNumber(a+d,s,0)}}static embedVerticalSeparationPattern(a,s,l){for(let d=0;d<7;++d){if(!xt.isEmpty(l.get(a,s+d)))throw new ta;l.setNumber(a,s+d,0)}}static embedPositionAdjustmentPattern(a,s,l){for(let d=0;d<5;++d){const u=xt.POSITION_ADJUSTMENT_PATTERN[d];for(let m=0;m<5;++m)l.setNumber(a+m,s+d,u[m])}}static embedPositionDetectionPattern(a,s,l){for(let d=0;d<7;++d){const u=xt.POSITION_DETECTION_PATTERN[d];for(let m=0;m<7;++m)l.setNumber(a+m,s+d,u[m])}}static embedPositionDetectionPatternsAndSeparators(a){const s=xt.POSITION_DETECTION_PATTERN[0].length;xt.embedPositionDetectionPattern(0,0,a),xt.embedPositionDetectionPattern(a.getWidth()-s,0,a),xt.embedPositionDetectionPattern(0,a.getWidth()-s,a);const l=8;xt.embedHorizontalSeparationPattern(0,l-1,a),xt.embedHorizontalSeparationPattern(a.getWidth()-l,l-1,a),xt.embedHorizontalSeparationPattern(0,a.getWidth()-l,a);const d=7;xt.embedVerticalSeparationPattern(d,0,a),xt.embedVerticalSeparationPattern(a.getHeight()-d-1,0,a),xt.embedVerticalSeparationPattern(d,a.getHeight()-d,a)}static maybeEmbedPositionAdjustmentPatterns(a,s){if(a.getVersionNumber()<2)return;const l=a.getVersionNumber()-1,d=xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let u=0,m=d.length;u!==m;u++){const p=d[u];if(p>=0)for(let v=0;v!==m;v++){const A=d[v];A>=0&&xt.isEmpty(s.get(A,p))&&xt.embedPositionAdjustmentPattern(A-2,p-2,s)}}}}xt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),xt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),xt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),xt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),xt.VERSION_INFO_POLY=7973,xt.TYPE_INFO_POLY=1335,xt.TYPE_INFO_MASK_PATTERN=21522;class Jd{constructor(a,s){this.dataBytes=a,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class xa{constructor(){}static calculateMaskPenalty(a){return Na.applyMaskPenaltyRule1(a)+Na.applyMaskPenaltyRule2(a)+Na.applyMaskPenaltyRule3(a)+Na.applyMaskPenaltyRule4(a)}static encode(a,s,l=null){let d=xa.DEFAULT_BYTE_MODE_ENCODING;const u=l!==null&&l.get(Ba.CHARACTER_SET)!==void 0;u&&(d=l.get(Ba.CHARACTER_SET).toString());const m=this.chooseMode(a,d),p=new B;if(m===ct.BYTE&&(u||xa.DEFAULT_BYTE_MODE_ENCODING!==d)){const $e=Q.getCharacterSetECIByName(d);$e!==void 0&&this.appendECI($e,p)}this.appendModeInfo(m,p);const v=new B;this.appendBytes(a,m,v,d);let A;if(l!==null&&l.get(Ba.QR_VERSION)!==void 0){const $e=Number.parseInt(l.get(Ba.QR_VERSION).toString(),10);A=it.getVersionForNumber($e);const Ye=this.calculateBitsNeeded(m,p,v,A);if(!this.willFit(Ye,A,s))throw new ta("Data too big for requested version")}else A=this.recommendVersion(s,m,p,v);const R=new B;R.appendBitArray(p);const q=m===ct.BYTE?v.getSizeInBytes():a.length;this.appendLengthInfo(q,A,m,R),R.appendBitArray(v);const Z=A.getECBlocksForLevel(s),ie=A.getTotalCodewords()-Z.getTotalECCodewords();this.terminateBits(ie,R);const ge=this.interleaveWithECBytes(R,A.getTotalCodewords(),ie,Z.getNumBlocks()),ye=new Ks;ye.setECLevel(s),ye.setMode(m),ye.setVersion(A);const Se=A.getDimensionForVersion(),Re=new ml(Se,Se),Xe=this.chooseMaskPattern(ge,s,A,Re);return ye.setMaskPattern(Xe),xt.buildMatrix(ge,s,A,Xe,Re),ye.setMatrix(Re),ye}static recommendVersion(a,s,l,d){const u=this.calculateBitsNeeded(s,l,d,it.getVersionForNumber(1)),m=this.chooseVersion(u,a),p=this.calculateBitsNeeded(s,l,d,m);return this.chooseVersion(p,a)}static calculateBitsNeeded(a,s,l,d){return s.getSize()+a.getCharacterCountBits(d)+l.getSize()}static getAlphanumericCode(a){return a<xa.ALPHANUMERIC_TABLE.length?xa.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,s=null){if(Q.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(a))return ct.KANJI;let l=!1,d=!1;for(let u=0,m=a.length;u<m;++u){const p=a.charAt(u);if(xa.isDigit(p))l=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)d=!0;else return ct.BYTE}return d?ct.ALPHANUMERIC:l?ct.NUMERIC:ct.BYTE}static isOnlyDoubleByteKanji(a){let s;try{s=ce.encode(a,Q.SJIS)}catch{return!1}const l=s.length;if(l%2!==0)return!1;for(let d=0;d<l;d+=2){const u=s[d]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(a,s,l,d){let u=Number.MAX_SAFE_INTEGER,m=-1;for(let p=0;p<Ks.NUM_MASK_PATTERNS;p++){xt.buildMatrix(a,s,l,p,d);let v=this.calculateMaskPenalty(d);v<u&&(u=v,m=p)}return m}static chooseVersion(a,s){for(let l=1;l<=40;l++){const d=it.getVersionForNumber(l);if(xa.willFit(a,d,s))return d}throw new ta("Data too big")}static willFit(a,s,l){const d=s.getTotalCodewords(),m=s.getECBlocksForLevel(l).getTotalECCodewords(),p=d-m,v=(a+7)/8;return p>=v}static terminateBits(a,s){const l=a*8;if(s.getSize()>l)throw new ta("data bits cannot fit in the QR Code"+s.getSize()+" > "+l);for(let m=0;m<4&&s.getSize()<l;++m)s.appendBit(!1);const d=s.getSize()&7;if(d>0)for(let m=d;m<8;m++)s.appendBit(!1);const u=a-s.getSizeInBytes();for(let m=0;m<u;++m)s.appendBits((m&1)===0?236:17,8);if(s.getSize()!==l)throw new ta("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,s,l,d,u,m){if(d>=l)throw new ta("Block ID too large");const p=a%l,v=l-p,A=Math.floor(a/l),R=A+1,q=Math.floor(s/l),Z=q+1,ie=A-q,ge=R-Z;if(ie!==ge)throw new ta("EC bytes mismatch");if(l!==v+p)throw new ta("RS blocks mismatch");if(a!==(q+ie)*v+(Z+ge)*p)throw new ta("Total bytes mismatch");d<v?(u[0]=q,m[0]=ie):(u[0]=Z,m[0]=ge)}static interleaveWithECBytes(a,s,l,d){if(a.getSizeInBytes()!==l)throw new ta("Number of bits and data bytes does not match");let u=0,m=0,p=0;const v=new Array;for(let R=0;R<d;++R){const q=new Int32Array(1),Z=new Int32Array(1);xa.getNumDataBytesAndNumECBytesForBlockID(s,l,d,R,q,Z);const ie=q[0],ge=new Uint8Array(ie);a.toBytes(8*u,ge,0,ie);const ye=xa.generateECBytes(ge,Z[0]);v.push(new Jd(ge,ye)),m=Math.max(m,ie),p=Math.max(p,ye.length),u+=q[0]}if(l!==u)throw new ta("Data bytes does not match offset");const A=new B;for(let R=0;R<m;++R)for(const q of v){const Z=q.getDataBytes();R<Z.length&&A.appendBits(Z[R],8)}for(let R=0;R<p;++R)for(const q of v){const Z=q.getErrorCorrectionBytes();R<Z.length&&A.appendBits(Z[R],8)}if(s!==A.getSizeInBytes())throw new ta("Interleaving error: "+s+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(a,s){const l=a.length,d=new Int32Array(l+s);for(let m=0;m<l;m++)d[m]=a[m]&255;new Gi(ve.QR_CODE_FIELD_256).encode(d,s);const u=new Uint8Array(s);for(let m=0;m<s;m++)u[m]=d[l+m];return u}static appendModeInfo(a,s){s.appendBits(a.getBits(),4)}static appendLengthInfo(a,s,l,d){const u=l.getCharacterCountBits(s);if(a>=1<<u)throw new ta(a+" is bigger than "+((1<<u)-1));d.appendBits(a,u)}static appendBytes(a,s,l,d){switch(s){case ct.NUMERIC:xa.appendNumericBytes(a,l);break;case ct.ALPHANUMERIC:xa.appendAlphanumericBytes(a,l);break;case ct.BYTE:xa.append8BitBytes(a,l,d);break;case ct.KANJI:xa.appendKanjiBytes(a,l);break;default:throw new ta("Invalid mode: "+s)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const s=xa.getDigit(a);return s>=0&&s<=9}static appendNumericBytes(a,s){const l=a.length;let d=0;for(;d<l;){const u=xa.getDigit(a.charAt(d));if(d+2<l){const m=xa.getDigit(a.charAt(d+1)),p=xa.getDigit(a.charAt(d+2));s.appendBits(u*100+m*10+p,10),d+=3}else if(d+1<l){const m=xa.getDigit(a.charAt(d+1));s.appendBits(u*10+m,7),d+=2}else s.appendBits(u,4),d++}}static appendAlphanumericBytes(a,s){const l=a.length;let d=0;for(;d<l;){const u=xa.getAlphanumericCode(a.charCodeAt(d));if(u===-1)throw new ta;if(d+1<l){const m=xa.getAlphanumericCode(a.charCodeAt(d+1));if(m===-1)throw new ta;s.appendBits(u*45+m,11),d+=2}else s.appendBits(u,6),d++}}static append8BitBytes(a,s,l){let d;try{d=ce.encode(a,l)}catch(u){throw new ta(u)}for(let u=0,m=d.length;u!==m;u++){const p=d[u];s.appendBits(p,8)}}static appendKanjiBytes(a,s){let l;try{l=ce.encode(a,Q.SJIS)}catch(u){throw new ta(u)}const d=l.length;for(let u=0;u<d;u+=2){const m=l[u]&255,p=l[u+1]&255,v=m<<8&4294967295|p;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new ta("Invalid byte sequence");const R=(A>>8)*192+(A&255);s.appendBits(R,13)}}static appendECI(a,s){s.appendBits(ct.ECI.getBits(),4),s.appendBits(a.getValue(),8)}}xa.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),xa.DEFAULT_BYTE_MODE_ENCODING=Q.UTF8.getName();class Js{write(a,s,l,d=null){if(a.length===0)throw new E("Found empty contents");if(s<0||l<0)throw new E("Requested dimensions are too small: "+s+"x"+l);let u=Kt.L,m=Js.QUIET_ZONE_SIZE;d!==null&&(d.get(Ba.ERROR_CORRECTION)!==void 0&&(u=Kt.fromString(d.get(Ba.ERROR_CORRECTION).toString())),d.get(Ba.MARGIN)!==void 0&&(m=Number.parseInt(d.get(Ba.MARGIN).toString(),10)));const p=xa.encode(a,u,d);return this.renderResult(p,s,l,m)}writeToDom(a,s,l,d,u=null){typeof a=="string"&&(a=document.querySelector(a));const m=this.write(s,l,d,u);a&&a.appendChild(m)}renderResult(a,s,l,d){const u=a.getMatrix();if(u===null)throw new He;const m=u.getWidth(),p=u.getHeight(),v=m+d*2,A=p+d*2,R=Math.max(s,v),q=Math.max(l,A),Z=Math.min(Math.floor(R/v),Math.floor(q/A)),ie=Math.floor((R-m*Z)/2),ge=Math.floor((q-p*Z)/2),ye=this.createSVGElement(R,q);for(let Se=0,Re=ge;Se<p;Se++,Re+=Z)for(let Xe=0,$e=ie;Xe<m;Xe++,$e+=Z)if(u.get(Xe,Se)===1){const Ye=this.createSvgRectElement($e,Re,Z,Z);ye.appendChild(Ye)}return ye}createSVGElement(a,s){const l=document.createElementNS(Js.SVG_NS,"svg");return l.setAttributeNS(null,"height",a.toString()),l.setAttributeNS(null,"width",s.toString()),l}createSvgRectElement(a,s,l,d){const u=document.createElementNS(Js.SVG_NS,"rect");return u.setAttributeNS(null,"x",a.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",l.toString()),u.setAttributeNS(null,"width",d.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Js.QUIET_ZONE_SIZE=4,Js.SVG_NS="http://www.w3.org/2000/svg";class _n{encode(a,s,l,d,u){if(a.length===0)throw new E("Found empty contents");if(s!==xe.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(l<0||d<0)throw new E(`Requested dimensions are too small: ${l}x${d}`);let m=Kt.L,p=_n.QUIET_ZONE_SIZE;u!==null&&(u.get(Ba.ERROR_CORRECTION)!==void 0&&(m=Kt.fromString(u.get(Ba.ERROR_CORRECTION).toString())),u.get(Ba.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Ba.MARGIN).toString(),10)));const v=xa.encode(a,m,u);return _n.renderResult(v,l,d,p)}static renderResult(a,s,l,d){const u=a.getMatrix();if(u===null)throw new He;const m=u.getWidth(),p=u.getHeight(),v=m+d*2,A=p+d*2,R=Math.max(s,v),q=Math.max(l,A),Z=Math.min(Math.floor(R/v),Math.floor(q/A)),ie=Math.floor((R-m*Z)/2),ge=Math.floor((q-p*Z)/2),ye=new W(R,q);for(let Se=0,Re=ge;Se<p;Se++,Re+=Z)for(let Xe=0,$e=ie;Xe<m;Xe++,$e+=Z)u.get(Xe,Se)===1&&ye.setRegion($e,Re,Z,Z);return ye}}_n.QUIET_ZONE_SIZE=4;class e0{encode(a,s,l,d,u){let m;switch(s){case xe.QR_CODE:m=new _n;break;default:throw new E("No encoder available for format "+s)}return m.encode(a,s,l,d,u)}}class es extends de{constructor(a,s,l,d,u,m,p,v){if(super(m,p),this.yuvData=a,this.dataWidth=s,this.dataHeight=l,this.left=d,this.top=u,d+m>s||u+p>l)throw new E("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(m,p)}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const d=(a+this.top)*this.dataWidth+this.left;return M.arraycopy(this.yuvData,d,s,0,l),s}getMatrix(){const a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.yuvData;const l=a*s,d=new Uint8ClampedArray(l);let u=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return M.arraycopy(this.yuvData,u,d,0,l),d;for(let m=0;m<s;m++){const p=m*a;M.arraycopy(this.yuvData,u,d,p,a),u+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,s,l,d){return new es(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+s,l,d,!1)}renderThumbnail(){const a=this.getWidth()/es.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/es.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(a*s),d=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let m=0;m<s;m++){const p=m*a;for(let v=0;v<a;v++){const A=d[u+v*es.THUMBNAIL_SCALE_FACTOR]&255;l[p+v]=4278190080|A*65793}u+=this.dataWidth*es.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/es.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/es.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,s){const l=this.yuvData;for(let d=0,u=this.top*this.dataWidth+this.left;d<s;d++,u+=this.dataWidth){const m=u+a/2;for(let p=u,v=u+a-1;p<m;p++,v--){const A=l[p];l[p]=l[v],l[v]=A}}}invert(){return new Ce(this)}}es.THUMBNAIL_SCALE_FACTOR=2;class fl extends de{constructor(a,s,l,d,u,m,p){if(super(s,l),this.dataWidth=d,this.dataHeight=u,this.left=m,this.top=p,a.BYTES_PER_ELEMENT===4){const v=s*l,A=new Uint8ClampedArray(v);for(let R=0;R<v;R++){const q=a[R],Z=q>>16&255,ie=q>>7&510,ge=q&255;A[R]=(Z+ie+ge)/4&255}this.luminances=A}else this.luminances=a;if(d===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=l),m===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+l>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const l=this.getWidth();(s==null||s.length<l)&&(s=new Uint8ClampedArray(l));const d=(a+this.top)*this.dataWidth+this.left;return M.arraycopy(this.luminances,d,s,0,l),s}getMatrix(){const a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.luminances;const l=a*s,d=new Uint8ClampedArray(l);let u=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return M.arraycopy(this.luminances,u,d,0,l),d;for(let m=0;m<s;m++){const p=m*a;M.arraycopy(this.luminances,u,d,p,a),u+=this.dataWidth}return d}isCropSupported(){return!0}crop(a,s,l,d){return new fl(this.luminances,l,d,this.dataWidth,this.dataHeight,this.left+a,this.top+s)}invert(){return new Ce(this)}}class Tn extends Q{static forName(a){return this.getCharacterSetECIByName(a)}}class Yi{}Yi.ISO_8859_1=Q.ISO8859_1;class Xi{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class $i{static singletonList(a){return[a]}static min(a,s){return a.sort(s)[0]}}class uc{constructor(a){this.previous=a}getPrevious(){return this.previous}}class en extends uc{constructor(a,s,l){super(a),this.value=s,this.bitCount=l}appendTo(a,s){a.appendBits(this.value,this.bitCount)}add(a,s){return new en(this,a,s)}addBinaryShift(a,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new en(this,a,s)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+D.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class ei extends en{constructor(a,s,l){super(a,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=l}appendTo(a,s){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):l===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(s[this.binaryShiftStart+l],8)}addBinaryShift(a,s){return new ei(this,a,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Mn(V,a,s){return new ei(V,a,s)}function gl(V,a,s){return new en(V,a,s)}const t0=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Bs=0,pl=1,kr=2,Dn=3,fr=4,a0=new en(null,0,0),Rn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function xc(V){for(let a of V)L.fill(a,-1);return V[Bs][fr]=0,V[pl][fr]=0,V[pl][Bs]=28,V[Dn][fr]=0,V[kr][fr]=0,V[kr][Bs]=15,V}const Qi=xc(L.createInt32Array(6,6));class Tr{constructor(a,s,l,d){this.token=a,this.mode=s,this.binaryShiftByteCount=l,this.bitCount=d}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,s){let l=this.bitCount,d=this.token;if(a!==this.mode){let m=Rn[this.mode][a];d=gl(d,m&65535,m>>16),l+=m>>16}let u=a===kr?4:5;return d=gl(d,s,u),new Tr(d,a,0,l+u)}shiftAndAppend(a,s){let l=this.token,d=this.mode===kr?4:5;return l=gl(l,Qi[this.mode][a],d),l=gl(l,s,5),new Tr(l,this.mode,0,this.bitCount+d+5)}addBinaryShiftChar(a){let s=this.token,l=this.mode,d=this.bitCount;if(this.mode===fr||this.mode===kr){let p=Rn[l][Bs];s=gl(s,p&65535,p>>16),d+=p>>16,l=Bs}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,m=new Tr(s,l,this.binaryShiftByteCount+1,d+u);return m.binaryShiftByteCount===2078&&(m=m.endBinaryShift(a+1)),m}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Mn(s,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new Tr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let s=this.bitCount+(Rn[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?s+=Tr.calculateBinaryShiftCost(a)-Tr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(s+=10),s<=a.bitCount}toBitArray(a){let s=[];for(let d=this.endBinaryShift(a.length).token;d!==null;d=d.getPrevious())s.unshift(d);let l=new B;for(const d of s)d.appendTo(l,a);return l}toString(){return te.format("%s bits=%d bytes=%d",t0[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}Tr.INITIAL_STATE=new Tr(a0,Bs,0,0);function Zi(V){const a=te.getCharCode(" "),s=te.getCharCode("."),l=te.getCharCode(",");V[Bs][a]=1;const d=te.getCharCode("Z"),u=te.getCharCode("A");for(let Z=u;Z<=d;Z++)V[Bs][Z]=Z-u+2;V[pl][a]=1;const m=te.getCharCode("z"),p=te.getCharCode("a");for(let Z=p;Z<=m;Z++)V[pl][Z]=Z-p+2;V[kr][a]=1;const v=te.getCharCode("9"),A=te.getCharCode("0");for(let Z=A;Z<=v;Z++)V[kr][Z]=Z-A+2;V[kr][l]=12,V[kr][s]=13;const R=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let Z=0;Z<R.length;Z++)V[Dn][te.getCharCode(R[Z])]=Z;const q=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let Z=0;Z<q.length;Z++)te.getCharCode(q[Z])>0&&(V[fr][te.getCharCode(q[Z])]=Z);return V}const ti=Zi(L.createInt32Array(5,256));class In{constructor(a){this.text=a}encode(){const a=te.getCharCode(" "),s=te.getCharCode(`
`);let l=$i.singletonList(Tr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let m,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case te.getCharCode("\r"):m=p===s?2:0;break;case te.getCharCode("."):m=p===a?3:0;break;case te.getCharCode(","):m=p===a?4:0;break;case te.getCharCode(":"):m=p===a?5:0;break;default:m=0}m>0?(l=In.updateStateListForPair(l,u,m),u++):l=this.updateStateListForChar(l,u)}return $i.min(l,(u,m)=>u.getBitCount()-m.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,s){const l=[];for(let d of a)this.updateStateForChar(d,s,l);return In.simplifyStates(l)}updateStateForChar(a,s,l){let d=this.text[s]&255,u=ti[a.getMode()][d]>0,m=null;for(let p=0;p<=fr;p++){let v=ti[p][d];if(v>0){if(m==null&&(m=a.endBinaryShift(s)),!u||p===a.getMode()||p===kr){const A=m.latchAndAppend(p,v);l.push(A)}if(!u&&Qi[a.getMode()][p]>=0){const A=m.shiftAndAppend(p,v);l.push(A)}}}if(a.getBinaryShiftByteCount()>0||ti[a.getMode()][d]===0){let p=a.addBinaryShiftChar(s);l.push(p)}}static updateStateListForPair(a,s,l){const d=[];for(let u of a)this.updateStateForPair(u,s,l,d);return this.simplifyStates(d)}static updateStateForPair(a,s,l,d){let u=a.endBinaryShift(s);if(d.push(u.latchAndAppend(fr,l)),a.getMode()!==fr&&d.push(u.shiftAndAppend(fr,l)),l===3||l===4){let m=u.latchAndAppend(kr,16-l).latchAndAppend(kr,1);d.push(m)}if(a.getBinaryShiftByteCount()>0){let m=a.addBinaryShiftChar(s).addBinaryShiftChar(s+1);d.push(m)}}static simplifyStates(a){let s=[];for(const l of a){let d=!0;for(const u of s){if(u.isBetterThanOrEqualTo(l)){d=!1;break}l.isBetterThanOrEqualTo(u)&&(s=s.filter(m=>m!==u))}d&&s.push(l)}return s}}class zt{constructor(){}static encodeBytes(a){return zt.encode(a,zt.DEFAULT_EC_PERCENT,zt.DEFAULT_AZTEC_LAYERS)}static encode(a,s,l){let d=new In(a).encode(),u=D.truncDivision(d.getSize()*s,100)+11,m=d.getSize()+u,p,v,A,R,q;if(l!==zt.DEFAULT_AZTEC_LAYERS){if(p=l<0,v=Math.abs(l),v>(p?zt.MAX_NB_BITS_COMPACT:zt.MAX_NB_BITS))throw new E(te.format("Illegal value %s for layers",l));A=zt.totalBitsInLayer(v,p),R=zt.WORD_SIZE[v];let Ye=A-A%R;if(q=zt.stuffBits(d,R),q.getSize()+u>Ye)throw new E("Data to large for user specified layer");if(p&&q.getSize()>R*64)throw new E("Data to large for user specified layer")}else{R=0,q=null;for(let Ye=0;;Ye++){if(Ye>zt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(p=Ye<=3,v=p?Ye+1:Ye,A=zt.totalBitsInLayer(v,p),m>A)continue;(q==null||R!==zt.WORD_SIZE[v])&&(R=zt.WORD_SIZE[v],q=zt.stuffBits(d,R));let vt=A-A%R;if(!(p&&q.getSize()>R*64)&&q.getSize()+u<=vt)break}}let Z=zt.generateCheckWords(q,A,R),ie=q.getSize()/R,ge=zt.generateModeMessage(p,v,ie),ye=(p?11:14)+v*4,Se=new Int32Array(ye),Re;if(p){Re=ye;for(let Ye=0;Ye<Se.length;Ye++)Se[Ye]=Ye}else{Re=ye+1+2*D.truncDivision(D.truncDivision(ye,2)-1,15);let Ye=D.truncDivision(ye,2),vt=D.truncDivision(Re,2);for(let bt=0;bt<Ye;bt++){let or=bt+D.truncDivision(bt,15);Se[Ye-bt-1]=vt-or-1,Se[Ye+bt]=vt+or+1}}let Xe=new W(Re);for(let Ye=0,vt=0;Ye<v;Ye++){let bt=(v-Ye)*4+(p?9:12);for(let or=0;or<bt;or++){let Mr=or*2;for(let gr=0;gr<2;gr++)Z.get(vt+Mr+gr)&&Xe.set(Se[Ye*2+gr],Se[Ye*2+or]),Z.get(vt+bt*2+Mr+gr)&&Xe.set(Se[Ye*2+or],Se[ye-1-Ye*2-gr]),Z.get(vt+bt*4+Mr+gr)&&Xe.set(Se[ye-1-Ye*2-gr],Se[ye-1-Ye*2-or]),Z.get(vt+bt*6+Mr+gr)&&Xe.set(Se[ye-1-Ye*2-or],Se[Ye*2+gr])}vt+=bt*8}if(zt.drawModeMessage(Xe,p,Re,ge),p)zt.drawBullsEye(Xe,D.truncDivision(Re,2),5);else{zt.drawBullsEye(Xe,D.truncDivision(Re,2),7);for(let Ye=0,vt=0;Ye<D.truncDivision(ye,2)-1;Ye+=15,vt+=16)for(let bt=D.truncDivision(Re,2)&1;bt<Re;bt+=2)Xe.set(D.truncDivision(Re,2)-vt,bt),Xe.set(D.truncDivision(Re,2)+vt,bt),Xe.set(bt,D.truncDivision(Re,2)-vt),Xe.set(bt,D.truncDivision(Re,2)+vt)}let $e=new Xi;return $e.setCompact(p),$e.setSize(Re),$e.setLayers(v),$e.setCodeWords(ie),$e.setMatrix(Xe),$e}static drawBullsEye(a,s,l){for(let d=0;d<l;d+=2)for(let u=s-d;u<=s+d;u++)a.set(u,s-d),a.set(u,s+d),a.set(s-d,u),a.set(s+d,u);a.set(s-l,s-l),a.set(s-l+1,s-l),a.set(s-l,s-l+1),a.set(s+l,s-l),a.set(s+l,s-l+1),a.set(s+l,s+l-1)}static generateModeMessage(a,s,l){let d=new B;return a?(d.appendBits(s-1,2),d.appendBits(l-1,6),d=zt.generateCheckWords(d,28,4)):(d.appendBits(s-1,5),d.appendBits(l-1,11),d=zt.generateCheckWords(d,40,4)),d}static drawModeMessage(a,s,l,d){let u=D.truncDivision(l,2);if(s)for(let m=0;m<7;m++){let p=u-3+m;d.get(m)&&a.set(p,u-5),d.get(m+7)&&a.set(u+5,p),d.get(20-m)&&a.set(p,u+5),d.get(27-m)&&a.set(u-5,p)}else for(let m=0;m<10;m++){let p=u-5+m+D.truncDivision(m,5);d.get(m)&&a.set(p,u-7),d.get(m+10)&&a.set(u+7,p),d.get(29-m)&&a.set(p,u+7),d.get(39-m)&&a.set(u-7,p)}}static generateCheckWords(a,s,l){let d=a.getSize()/l,u=new Gi(zt.getGF(l)),m=D.truncDivision(s,l),p=zt.bitsToWords(a,l,m);u.encode(p,m-d);let v=s%l,A=new B;A.appendBits(0,v);for(const R of Array.from(p))A.appendBits(R,l);return A}static bitsToWords(a,s,l){let d=new Int32Array(l),u,m;for(u=0,m=a.getSize()/s;u<m;u++){let p=0;for(let v=0;v<s;v++)p|=a.get(u*s+v)?1<<s-v-1:0;d[u]=p}return d}static getGF(a){switch(a){case 4:return ve.AZTEC_PARAM;case 6:return ve.AZTEC_DATA_6;case 8:return ve.AZTEC_DATA_8;case 10:return ve.AZTEC_DATA_10;case 12:return ve.AZTEC_DATA_12;default:throw new E("Unsupported word size "+a)}}static stuffBits(a,s){let l=new B,d=a.getSize(),u=(1<<s)-2;for(let m=0;m<d;m+=s){let p=0;for(let v=0;v<s;v++)(m+v>=d||a.get(m+v))&&(p|=1<<s-1-v);(p&u)===u?(l.appendBits(p&u,s),m--):(p&u)===0?(l.appendBits(p|1,s),m--):l.appendBits(p,s)}return l}static totalBitsInLayer(a,s){return((s?88:112)+16*a)*a}}zt.DEFAULT_EC_PERCENT=33,zt.DEFAULT_AZTEC_LAYERS=0,zt.MAX_NB_BITS=32,zt.MAX_NB_BITS_COMPACT=4,zt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class ai{encode(a,s,l,d){return this.encodeWithHints(a,s,l,d,null)}encodeWithHints(a,s,l,d,u){let m=Yi.ISO_8859_1,p=zt.DEFAULT_EC_PERCENT,v=zt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Ba.CHARACTER_SET)&&(m=Tn.forName(u.get(Ba.CHARACTER_SET).toString())),u.has(Ba.ERROR_CORRECTION)&&(p=D.parseInt(u.get(Ba.ERROR_CORRECTION).toString())),u.has(Ba.AZTEC_LAYERS)&&(v=D.parseInt(u.get(Ba.AZTEC_LAYERS).toString()))),ai.encodeLayers(a,s,l,d,m,p,v)}static encodeLayers(a,s,l,d,u,m,p){if(s!==xe.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let v=zt.encode(te.getBytes(a,u),m,p);return ai.renderResult(v,l,d)}static renderResult(a,s,l){let d=a.getMatrix();if(d==null)throw new He;let u=d.getWidth(),m=d.getHeight(),p=Math.max(s,u),v=Math.max(l,m),A=Math.min(p/u,v/m),R=(p-u*A)/2,q=(v-m*A)/2,Z=new W(p,v);for(let ie=0,ge=q;ie<m;ie++,ge+=A)for(let ye=0,Se=R;ye<u;ye++,Se+=A)d.get(ye,ie)&&Z.setRegion(Se,ge,A,A);return Z}}o.AbstractExpandedDecoder=ol,o.ArgumentException=S,o.ArithmeticException=Ue,o.AztecCode=Xi,o.AztecCodeReader=Tt,o.AztecCodeWriter=ai,o.AztecDecoder=Te,o.AztecDetector=Wt,o.AztecDetectorResult=Ct,o.AztecEncoder=zt,o.AztecHighLevelEncoder=In,o.AztecPoint=gt,o.BarcodeFormat=xe,o.Binarizer=O,o.BinaryBitmap=_,o.BitArray=B,o.BitMatrix=W,o.BitSource=hr,o.BrowserAztecCodeReader=xr,o.BrowserBarcodeReader=lc,o.BrowserCodeReader=ae,o.BrowserDatamatrixCodeReader=Yd,o.BrowserMultiFormatReader=Zd,o.BrowserPDF417Reader=Wd,o.BrowserQRCodeReader=Kd,o.BrowserQRCodeSvgWriter=Js,o.CharacterSetECI=Q,o.ChecksumException=T,o.Code128Reader=Qe,o.Code39Reader=Yt,o.DataMatrixDecodedBitStreamParser=Es,o.DataMatrixReader=Fr,o.DecodeHintType=X,o.DecoderResult=Je,o.DefaultGridSampler=lt,o.DetectorResult=jt,o.EAN13Reader=Lr,o.EncodeHintType=Ba,o.Exception=b,o.FormatException=U,o.GenericGF=ve,o.GenericGFPoly=at,o.GlobalHistogramBinarizer=$,o.GridSampler=Ft,o.GridSamplerInstance=Bt,o.HTMLCanvasElementLuminanceSource=ee,o.HybridBinarizer=ne,o.ITFReader=ot,o.IllegalArgumentException=E,o.IllegalStateException=He,o.InvertedLuminanceSource=Ce,o.LuminanceSource=de,o.MathUtils=oe,o.MultiFormatOneDReader=As,o.MultiFormatReader=dc,o.MultiFormatWriter=e0,o.NotFoundException=P,o.OneDReader=Lt,o.PDF417DecodedBitStreamParser=Oe,o.PDF417DecoderErrorCorrection=ul,o.PDF417Reader=Za,o.PDF417ResultMetadata=Wl,o.PerspectiveTransform=Le,o.PlanarYUVLuminanceSource=es,o.QRCodeByteMatrix=ml,o.QRCodeDataMask=Qa,o.QRCodeDecodedBitStreamParser=pa,o.QRCodeDecoderErrorCorrectionLevel=Kt,o.QRCodeDecoderFormatInformation=$a,o.QRCodeEncoder=xa,o.QRCodeEncoderQRCode=Ks,o.QRCodeMaskUtil=Na,o.QRCodeMatrixUtil=xt,o.QRCodeMode=ct,o.QRCodeReader=us,o.QRCodeVersion=it,o.QRCodeWriter=_n,o.RGBLuminanceSource=fl,o.RSS14Reader=Xt,o.RSSExpandedReader=Ge,o.ReaderException=xl,o.ReedSolomonDecoder=et,o.ReedSolomonEncoder=Gi,o.ReedSolomonException=he,o.Result=be,o.ResultMetadataType=je,o.ResultPoint=Me,o.StringUtils=te,o.UnsupportedOperationException=le,o.VideoInputDevice=H,o.WhiteRectangleDetector=ft,o.WriterException=ta,o.ZXingArrays=L,o.ZXingCharset=Tn,o.ZXingInteger=D,o.ZXingStandardCharsets=Yi,o.ZXingStringBuilder=re,o.ZXingStringEncoding=ce,o.ZXingSystem=M,o.createAbstractExpandedDecoder=Hi,Object.defineProperty(o,"__esModule",{value:!0})})}(Po,Po.exports)),Po.exports}var ya=L3();const z3=Dd(ya),F3=nb({__proto__:null,default:z3},[ya]);var cp=function(){function n(c,o,x){if(this.formatMap=new Map([[rt.QR_CODE,ya.BarcodeFormat.QR_CODE],[rt.AZTEC,ya.BarcodeFormat.AZTEC],[rt.CODABAR,ya.BarcodeFormat.CODABAR],[rt.CODE_39,ya.BarcodeFormat.CODE_39],[rt.CODE_93,ya.BarcodeFormat.CODE_93],[rt.CODE_128,ya.BarcodeFormat.CODE_128],[rt.DATA_MATRIX,ya.BarcodeFormat.DATA_MATRIX],[rt.MAXICODE,ya.BarcodeFormat.MAXICODE],[rt.ITF,ya.BarcodeFormat.ITF],[rt.EAN_13,ya.BarcodeFormat.EAN_13],[rt.EAN_8,ya.BarcodeFormat.EAN_8],[rt.PDF_417,ya.BarcodeFormat.PDF_417],[rt.RSS_14,ya.BarcodeFormat.RSS_14],[rt.RSS_EXPANDED,ya.BarcodeFormat.RSS_EXPANDED],[rt.UPC_A,ya.BarcodeFormat.UPC_A],[rt.UPC_E,ya.BarcodeFormat.UPC_E],[rt.UPC_EAN_EXTENSION,ya.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!F3)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=o,this.logger=x;var f=this.createZXingFormats(c),g=new Map;g.set(ya.DecodeHintType.POSSIBLE_FORMATS,f),g.set(ya.DecodeHintType.TRY_HARDER,!1),this.hints=g}return n.prototype.decodeAsync=function(c){var o=this;return new Promise(function(x,f){try{x(o.decode(c))}catch(g){f(g)}})},n.prototype.decode=function(c){var o=new ya.MultiFormatReader(this.verbose,this.hints),x=new ya.HTMLCanvasElementLuminanceSource(c),f=new ya.BinaryBitmap(new ya.HybridBinarizer(x)),g=o.decode(f);return{text:g.text,format:I1.create(this.toHtml5QrcodeSupportedFormats(g.format)),debugData:this.createDebugData()}},n.prototype.createReverseFormatMap=function(){var c=new Map;return this.formatMap.forEach(function(o,x,f){c.set(o,x)}),c},n.prototype.toHtml5QrcodeSupportedFormats=function(c){if(!this.reverseFormatMap.has(c))throw"reverseFormatMap doesn't have ".concat(c);return this.reverseFormatMap.get(c)},n.prototype.createZXingFormats=function(c){for(var o=[],x=0,f=c;x<f.length;x++){var g=f[x];this.formatMap.has(g)?o.push(this.formatMap.get(g)):this.logger.logError("".concat(g," is not supported by")+"ZXingHtml5QrcodeShim")}return o},n.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},n}(),P3=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},U3=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},dp=function(){function n(c,o,x){if(this.formatMap=new Map([[rt.QR_CODE,"qr_code"],[rt.AZTEC,"aztec"],[rt.CODABAR,"codabar"],[rt.CODE_39,"code_39"],[rt.CODE_93,"code_93"],[rt.CODE_128,"code_128"],[rt.DATA_MATRIX,"data_matrix"],[rt.ITF,"itf"],[rt.EAN_13,"ean_13"],[rt.EAN_8,"ean_8"],[rt.PDF_417,"pdf417"],[rt.UPC_A,"upc_a"],[rt.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!n.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=o,this.logger=x;var f=this.createBarcodeDetectorFormats(c);if(this.detector=new BarcodeDetector(f),!this.detector)throw"BarcodeDetector detector not supported"}return n.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var c=new BarcodeDetector({formats:["qr_code"]});return typeof c<"u"},n.prototype.decodeAsync=function(c){return P3(this,void 0,void 0,function(){var o,x;return U3(this,function(f){switch(f.label){case 0:return[4,this.detector.detect(c)];case 1:if(o=f.sent(),!o||o.length===0)throw"No barcode or QR code detected.";return x=this.selectLargestBarcode(o),[2,{text:x.rawValue,format:I1.create(this.toHtml5QrcodeSupportedFormats(x.format)),debugData:this.createDebugData()}]}})})},n.prototype.selectLargestBarcode=function(c){for(var o=null,x=0,f=0,g=c;f<g.length;f++){var y=g[f],j=y.boundingBox.width*y.boundingBox.height;j>x&&(x=j,o=y)}if(!o)throw"No largest barcode found";return o},n.prototype.createBarcodeDetectorFormats=function(c){for(var o=[],x=0,f=c;x<f.length;x++){var g=f[x];this.formatMap.has(g)?o.push(this.formatMap.get(g)):this.logger.warn("".concat(g," is not supported by")+"BarcodeDetectorDelegate")}return{formats:o}},n.prototype.toHtml5QrcodeSupportedFormats=function(c){if(!this.reverseFormatMap.has(c))throw"reverseFormatMap doesn't have ".concat(c);return this.reverseFormatMap.get(c)},n.prototype.createReverseFormatMap=function(){var c=new Map;return this.formatMap.forEach(function(o,x,f){c.set(o,x)}),c},n.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},n}(),up=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},xp=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},H3=function(){function n(c,o,x,f){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=x,o&&dp.isSupported()?(this.primaryDecoder=new dp(c,x,f),this.secondaryDecoder=new cp(c,x,f)):this.primaryDecoder=new cp(c,x,f)}return n.prototype.decodeAsync=function(c){return up(this,void 0,void 0,function(){var o;return xp(this,function(x){switch(x.label){case 0:o=performance.now(),x.label=1;case 1:return x.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(c)];case 2:return[2,x.sent()];case 3:return this.possiblyLogPerformance(o),[7];case 4:return[2]}})})},n.prototype.decodeRobustlyAsync=function(c){return up(this,void 0,void 0,function(){var o,x;return xp(this,function(f){switch(f.label){case 0:o=performance.now(),f.label=1;case 1:return f.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(c)];case 2:return[2,f.sent()];case 3:if(x=f.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(c)];throw x;case 4:return this.possiblyLogPerformance(o),[7];case 5:return[2]}})})},n.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},n.prototype.possiblyLogPerformance=function(c){if(this.verbose){var o=performance.now()-c;this.executionResults.push(o),this.executions++,this.possiblyFlushPerformanceReport()}},n.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var c=0,o=0,x=this.executionResults;o<x.length;o++){var f=x[o];c+=f}var g=c/this.executionResults.length;console.log("".concat(g," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},n}(),Kx=function(){var n=function(c,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,f){x.__proto__=f}||function(x,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(x[g]=f[g])},n(c,o)};return function(c,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(c,o);function x(){this.constructor=c}c.prototype=o===null?Object.create(o):(x.prototype=o.prototype,new x)}}(),Td=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},Md=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},z1=function(){function n(c,o){this.name=c,this.track=o}return n.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},n.prototype.apply=function(c){var o={};o[this.name]=c;var x={advanced:[o]};return this.track.applyConstraints(x)},n.prototype.value=function(){var c=this.track.getSettings();if(this.name in c){var o=c[this.name];return o}return null},n}(),V3=function(n){Kx(c,n);function c(o,x){return n.call(this,o,x)||this}return c.prototype.min=function(){return this.getCapabilities().min},c.prototype.max=function(){return this.getCapabilities().max},c.prototype.step=function(){return this.getCapabilities().step},c.prototype.apply=function(o){var x={};x[this.name]=o;var f={advanced:[x]};return this.track.applyConstraints(f)},c.prototype.getCapabilities=function(){this.failIfNotSupported();var o=this.track.getCapabilities(),x=o[this.name];return{min:x.min,max:x.max,step:x.step}},c.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},c}(z1),q3=function(n){Kx(c,n);function c(o){return n.call(this,"zoom",o)||this}return c}(V3),G3=function(n){Kx(c,n);function c(o){return n.call(this,"torch",o)||this}return c}(z1),Y3=function(){function n(c){this.track=c}return n.prototype.zoomFeature=function(){return new q3(this.track)},n.prototype.torchFeature=function(){return new G3(this.track)},n}(),X3=function(){function n(c,o,x){this.isClosed=!1,this.parentElement=c,this.mediaStream=o,this.callbacks=x,this.surface=this.createVideoElement(this.parentElement.clientWidth),c.append(this.surface)}return n.prototype.createVideoElement=function(c){var o=document.createElement("video");return o.style.width="".concat(c,"px"),o.style.display="block",o.muted=!0,o.setAttribute("muted","true"),o.playsInline=!0,o},n.prototype.setupSurface=function(){var c=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var o=function(){var x=c.surface.clientWidth,f=c.surface.clientHeight;c.callbacks.onRenderSurfaceReady(x,f),c.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.srcObject=this.mediaStream,this.surface.play()},n.create=function(c,o,x,f){return Td(this,void 0,void 0,function(){var g,y;return Md(this,function(j){switch(j.label){case 0:return g=new n(c,o,f),x.aspectRatio?(y={aspectRatio:x.aspectRatio},[4,g.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:j.sent(),j.label=2;case 2:return g.setupSurface(),[2,g]}})})},n.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},n.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},n.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},n.prototype.resume=function(c){this.failIfClosed();var o=this,x=function(){setTimeout(c,200),o.surface.removeEventListener("playing",x)};this.surface.addEventListener("playing",x),this.surface.play()},n.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},n.prototype.getSurface=function(){return this.failIfClosed(),this.surface},n.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},n.prototype.applyVideoConstraints=function(c){return Td(this,void 0,void 0,function(){return Md(this,function(o){if("aspectRatio"in c)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(c)]})})},n.prototype.close=function(){if(this.isClosed)return Promise.resolve();var c=this;return new Promise(function(o,x){var f=c.mediaStream.getVideoTracks(),g=f.length,y=0;c.mediaStream.getVideoTracks().forEach(function(j){c.mediaStream.removeTrack(j),j.stop(),++y,y>=g&&(c.isClosed=!0,c.parentElement.removeChild(c.surface),o())})})},n.prototype.getCapabilities=function(){return new Y3(this.getFirstTrackOrFail())},n}(),$3=function(){function n(c){this.mediaStream=c}return n.prototype.render=function(c,o,x){return Td(this,void 0,void 0,function(){return Md(this,function(f){return[2,X3.create(c,this.mediaStream,o,x)]})})},n.create=function(c){return Td(this,void 0,void 0,function(){var o,x;return Md(this,function(f){switch(f.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return o={audio:!1,video:c},[4,navigator.mediaDevices.getUserMedia(o)];case 1:return x=f.sent(),[2,new n(x)]}})})},n}(),hp=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},mp=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Q3=function(){function n(){}return n.failIfNotSupported=function(){return hp(this,void 0,void 0,function(){return mp(this,function(c){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new n]})})},n.prototype.create=function(c){return hp(this,void 0,void 0,function(){return mp(this,function(o){return[2,$3.create(c)]})})},n}(),Z3=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},W3=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},K3=function(){function n(){}return n.retrieve=function(){if(navigator.mediaDevices)return n.getCamerasFromMediaDevices();var c=MediaStreamTrack;return MediaStreamTrack&&c.getSources?n.getCamerasFromMediaStreamTrack():n.rejectWithError()},n.rejectWithError=function(){var c=Ti.unableToQuerySupportedDevices();return n.isHttpsOrLocalhost()||(c=Ti.insecureContextCameraQueryError()),Promise.reject(c)},n.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var c=location.host.split(":")[0];return c==="127.0.0.1"||c==="localhost"},n.getCamerasFromMediaDevices=function(){return Z3(this,void 0,void 0,function(){var c,o,x,f,g,y,j;return W3(this,function(k){switch(k.label){case 0:return c=function(b){for(var S=b.getVideoTracks(),E=0,_=S;E<_.length;E++){var T=_[E];T.enabled=!1,T.stop(),b.removeTrack(T)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return o=k.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(x=k.sent(),f=[],g=0,y=x;g<y.length;g++)j=y[g],j.kind==="videoinput"&&f.push({id:j.deviceId,label:j.label});return c(o),[2,f]}})})},n.getCamerasFromMediaStreamTrack=function(){return new Promise(function(c,o){var x=function(g){for(var y=[],j=0,k=g;j<k.length;j++){var b=k[j];b.kind==="video"&&y.push({id:b.id,label:b.label})}c(y)},f=MediaStreamTrack;f.getSources(x)})},n}(),Ma;(function(n){n[n.UNKNOWN=0]="UNKNOWN",n[n.NOT_STARTED=1]="NOT_STARTED",n[n.SCANNING=2]="SCANNING",n[n.PAUSED=3]="PAUSED"})(Ma||(Ma={}));var J3=function(){function n(){this.state=Ma.NOT_STARTED,this.onGoingTransactionNewState=Ma.UNKNOWN}return n.prototype.directTransition=function(c){this.failIfTransitionOngoing(),this.validateTransition(c),this.state=c},n.prototype.startTransition=function(c){return this.failIfTransitionOngoing(),this.validateTransition(c),this.onGoingTransactionNewState=c,this},n.prototype.execute=function(){if(this.onGoingTransactionNewState===Ma.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var c=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ma.UNKNOWN,this.directTransition(c)},n.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ma.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ma.UNKNOWN},n.prototype.getState=function(){return this.state},n.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ma.UNKNOWN)throw"Cannot transition to a new state, already under transition"},n.prototype.validateTransition=function(c){switch(this.state){case Ma.UNKNOWN:throw"Transition from unknown is not allowed";case Ma.NOT_STARTED:this.failIfNewStateIs(c,[Ma.PAUSED]);break;case Ma.SCANNING:break;case Ma.PAUSED:break}},n.prototype.failIfNewStateIs=function(c,o){for(var x=0,f=o;x<f.length;x++){var g=f[x];if(c===g)throw"Cannot transition from ".concat(this.state," to ").concat(c)}},n}(),ek=function(){function n(c){this.stateManager=c}return n.prototype.startTransition=function(c){return this.stateManager.startTransition(c)},n.prototype.directTransition=function(c){this.stateManager.directTransition(c)},n.prototype.getState=function(){return this.stateManager.getState()},n.prototype.canScanFile=function(){return this.stateManager.getState()===Ma.NOT_STARTED},n.prototype.isScanning=function(){return this.stateManager.getState()!==Ma.NOT_STARTED},n.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ma.SCANNING},n.prototype.isPaused=function(){return this.stateManager.getState()===Ma.PAUSED},n}(),tk=function(){function n(){}return n.create=function(){return new ek(new J3)},n}(),ak=function(){var n=function(c,o){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,f){x.__proto__=f}||function(x,f){for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(x[g]=f[g])},n(c,o)};return function(c,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");n(c,o);function x(){this.constructor=c}c.prototype=o===null?Object.create(o):(x.prototype=o.prototype,new x)}}(),Xr=function(n){ak(c,n);function c(){return n!==null&&n.apply(this,arguments)||this}return c.DEFAULT_WIDTH=300,c.DEFAULT_WIDTH_OFFSET=2,c.FILE_SCAN_MIN_HEIGHT=300,c.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,c.MIN_QR_BOX_SIZE=50,c.SHADED_LEFT=1,c.SHADED_RIGHT=2,c.SHADED_TOP=3,c.SHADED_BOTTOM=4,c.SHADED_REGION_ELEMENT_ID="qr-shaded-region",c.VERBOSE=!1,c.BORDER_SHADER_DEFAULT_COLOR="#ffffff",c.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",c}(gs),rk=function(){function n(c,o){this.logger=o,this.fps=Xr.SCAN_DEFAULT_FPS,c?(c.fps&&(this.fps=c.fps),this.disableFlip=c.disableFlip===!0,this.qrbox=c.qrbox,this.aspectRatio=c.aspectRatio,this.videoConstraints=c.videoConstraints):this.disableFlip=Xr.DEFAULT_DISABLE_FLIP}return n.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?L1.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},n.prototype.isShadedBoxEnabled=function(){return!Gs(this.qrbox)},n.create=function(c,o){return new n(c,o)},n}(),fp=function(){function n(c,o){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(c))throw"HTML Element with id=".concat(c," not found");this.elementId=c,this.verbose=!1;var x;typeof o=="boolean"?this.verbose=o===!0:o&&(x=o,this.verbose=x.verbose===!0,x.experimentalFeatures),this.logger=new B1(this.verbose),this.qrcode=new H3(this.getSupportedFormats(o),this.getUseBarCodeDetectorIfSupported(x),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=tk.create()}return n.prototype.start=function(c,o,x,f){var g=this;if(!c)throw"cameraIdOrConfig is required";if(!x||typeof x!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;f?y=f:y=this.verbose?this.logger.log:function(){};var j=rk.create(o,this.logger);this.clearElement();var k=!1;j.videoConstraints&&(j.isMediaStreamConstraintsValid()?k=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var b=k,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Xr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var E=this,_=this.stateManagerProxy.startTransition(Ma.SCANNING);return new Promise(function(T,O){var M=b?j.videoConstraints:E.createVideoConstraints(c);if(!M){_.cancel(),O("videoConstraints should be defined");return}var z={};(!b||j.aspectRatio)&&(z.aspectRatio=j.aspectRatio);var I={onRenderSurfaceReady:function(L,D){E.setupUi(L,D,j),E.isScanning=!0,E.foreverScan(j,x,y)}};Q3.failIfNotSupported().then(function(L){L.create(M).then(function(D){return D.render(g.element,z,I).then(function(B){E.renderedCamera=B,_.execute(),T(null)}).catch(function(B){_.cancel(),O(B)})}).catch(function(D){_.cancel(),O(Ti.errorGettingUserMedia(D))})}).catch(function(L){_.cancel(),O(Ti.cameraStreamingNotSupported())})})},n.prototype.pause=function(c){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ma.PAUSED),this.showPausedState(),(Gs(c)||c!==!0)&&(c=!1),c&&this.renderedCamera&&this.renderedCamera.pause()},n.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var c=this,o=function(){c.stateManagerProxy.directTransition(Ma.SCANNING),c.hidePausedState()};if(!this.renderedCamera.isPaused()){o();return}this.renderedCamera.resume(function(){o()})},n.prototype.getState=function(){return this.stateManagerProxy.getState()},n.prototype.stop=function(){var c=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var o=this.stateManagerProxy.startTransition(Ma.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var x=function(){if(c.element){var g=document.getElementById(Xr.SHADED_REGION_ELEMENT_ID);g&&c.element.removeChild(g)}},f=this;return this.renderedCamera.close().then(function(){return f.renderedCamera=null,f.element&&(f.element.removeChild(f.canvasElement),f.canvasElement=null),x(),f.qrRegion&&(f.qrRegion=null),f.context&&(f.context=null),o.execute(),f.hidePausedState(),f.isScanning=!1,Promise.resolve()})},n.prototype.scanFile=function(c,o){return this.scanFileV2(c,o).then(function(x){return x.decodedText})},n.prototype.scanFileV2=function(c,o){var x=this;if(!c||!(c instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Gs(o)&&(o=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(f,g){x.possiblyCloseLastScanImageFile(),x.clearElement(),x.lastScanImageFile=URL.createObjectURL(c);var y=new Image;y.onload=function(){var j=y.width,k=y.height,b=document.getElementById(x.elementId),S=b.clientWidth?b.clientWidth:Xr.DEFAULT_WIDTH,E=Math.max(b.clientHeight?b.clientHeight:k,Xr.FILE_SCAN_MIN_HEIGHT),_=x.computeCanvasDrawConfig(j,k,S,E);if(o){var T=x.createCanvasElement(S,E,"qr-canvas-visible");T.style.display="inline-block",b.appendChild(T);var O=T.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=S,O.canvas.height=E,O.drawImage(y,0,0,j,k,_.x,_.y,_.width,_.height)}var M=Xr.FILE_SCAN_HIDDEN_CANVAS_PADDING,z=Math.max(y.width,_.width),I=Math.max(y.height,_.height),L=z+2*M,D=I+2*M,B=x.createCanvasElement(L,D);b.appendChild(B);var Y=B.getContext("2d");if(!Y)throw"Unable to get 2d context from canvas";Y.canvas.width=L,Y.canvas.height=D,Y.drawImage(y,0,0,j,k,M,M,z,I);try{x.qrcode.decodeRobustlyAsync(B).then(function(X){f(lp.createFromQrcodeResult(X))}).catch(g)}catch(X){g("QR code parse error, error = ".concat(X))}},y.onerror=g,y.onabort=g,y.onstalled=g,y.onsuspend=g,y.src=URL.createObjectURL(c)})},n.prototype.clear=function(){this.clearElement()},n.getCameras=function(){return K3.retrieve()},n.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},n.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},n.prototype.applyVideoConstraints=function(c){if(c){if(!L1.isMediaStreamConstraintsValid(c,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(c)},n.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},n.prototype.getSupportedFormats=function(c){var o=[rt.QR_CODE,rt.AZTEC,rt.CODABAR,rt.CODE_39,rt.CODE_93,rt.CODE_128,rt.DATA_MATRIX,rt.MAXICODE,rt.ITF,rt.EAN_13,rt.EAN_8,rt.PDF_417,rt.RSS_14,rt.RSS_EXPANDED,rt.UPC_A,rt.UPC_E,rt.UPC_EAN_EXTENSION];if(!c||typeof c=="boolean"||!c.formatsToSupport)return o;if(!Array.isArray(c.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(c.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var x=[],f=0,g=c.formatsToSupport;f<g.length;f++){var y=g[f];I3(y)?x.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(x.length===0)throw"None of formatsToSupport match supported values.";return x},n.prototype.getUseBarCodeDetectorIfSupported=function(c){if(Gs(c))return!0;if(!Gs(c.useBarCodeDetectorIfSupported))return c.useBarCodeDetectorIfSupported!==!1;if(Gs(c.experimentalFeatures))return!0;var o=c.experimentalFeatures;return Gs(o.useBarCodeDetectorIfSupported)?!0:o.useBarCodeDetectorIfSupported!==!1},n.prototype.validateQrboxSize=function(c,o,x){var f=this,g=x.qrbox;this.validateQrboxConfig(g);var y=this.toQrdimensions(c,o,g),j=function(b){if(b<Xr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Xr.MIN_QR_BOX_SIZE,"px.")},k=function(b){return b>c&&(f.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),b=c),b};j(y.width),j(y.height),y.width=k(y.width)},n.prototype.validateQrboxConfig=function(c){if(typeof c!="number"&&typeof c!="function"&&(c.width===void 0||c.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},n.prototype.toQrdimensions=function(c,o,x){if(typeof x=="number")return{width:x,height:x};if(typeof x=="function")try{return x(c,o)}catch(f){throw new Error("qrbox config was passed as a function but it failed with unknown error"+f)}return x},n.prototype.setupUi=function(c,o,x){x.isShadedBoxEnabled()&&this.validateQrboxSize(c,o,x);var f=Gs(x.qrbox)?{width:c,height:o}:x.qrbox;this.validateQrboxConfig(f);var g=this.toQrdimensions(c,o,f);g.height>o&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=x.isShadedBoxEnabled()&&g.height<=o,j={x:0,y:0,width:c,height:o},k=y?this.getShadedRegionBounds(c,o,g):j,b=this.createCanvasElement(k.width,k.height),S={willReadFrequently:!0},E=b.getContext("2d",S);E.canvas.width=k.width,E.canvas.height=k.height,this.element.append(b),y&&this.possiblyInsertShadingElement(this.element,c,o,g),this.createScannerPausedUiElement(this.element),this.qrRegion=k,this.context=E,this.canvasElement=b},n.prototype.createScannerPausedUiElement=function(c){var o=document.createElement("div");o.innerText=Ti.scannerPaused(),o.style.display="none",o.style.position="absolute",o.style.top="0px",o.style.zIndex="1",o.style.background="rgba(9, 9, 9, 0.46)",o.style.color="#FFECEC",o.style.textAlign="center",o.style.width="100%",c.appendChild(o),this.scannerPausedUiElement=o},n.prototype.scanContext=function(c,o){var x=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(f){return c(f.text,lp.createFromQrcodeResult(f)),x.possiblyUpdateShaders(!0),!0}).catch(function(f){x.possiblyUpdateShaders(!1);var g=Ti.codeParseError(f);return o(g,O1.createFrom(g)),!1})},n.prototype.foreverScan=function(c,o,x){var f=this;if(this.shouldScan&&this.renderedCamera){var g=this.renderedCamera.getSurface(),y=g.videoWidth/g.clientWidth,j=g.videoHeight/g.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var k=this.qrRegion.width*y,b=this.qrRegion.height*j,S=this.qrRegion.x*y,E=this.qrRegion.y*j;this.context.drawImage(g,S,E,k,b,0,0,this.qrRegion.width,this.qrRegion.height);var _=function(){f.foreverScanTimeout=setTimeout(function(){f.foreverScan(c,o,x)},f.getTimeoutFps(c.fps))};this.scanContext(o,x).then(function(T){!T&&c.disableFlip!==!0?(f.context.translate(f.context.canvas.width,0),f.context.scale(-1,1),f.scanContext(o,x).finally(function(){_()})):_()}).catch(function(T){f.logger.logError("Error happend while scanning context",T),_()})}},n.prototype.createVideoConstraints=function(c){if(typeof c=="string")return{deviceId:{exact:c}};if(typeof c=="object"){var o="facingMode",x="deviceId",f={user:!0,environment:!0},g="exact",y=function(O){if(O in f)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},j=Object.keys(c);if(j.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(j.length," keys");var k=Object.keys(c)[0];if(k!==o&&k!==x)throw"Only '".concat(o,"' and '").concat(x,"' ")+" are supported for 'cameraIdOrConfig'";if(k===o){var b=c.facingMode;if(typeof b=="string"){if(y(b))return{facingMode:b}}else if(typeof b=="object")if(g in b){if(y(b["".concat(g)]))return{facingMode:{exact:b["".concat(g)]}}}else throw"'facingMode' should be string or object with"+" ".concat(g," as key.");else{var S=typeof b;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var E=c.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(g in E)return{deviceId:{exact:E["".concat(g)]}};throw"'deviceId' should be string or object with"+" ".concat(g," as key.")}else{var _=typeof E;throw"Invalid type of 'deviceId' = ".concat(_)}}}var T=typeof c;throw"Invalid type of 'cameraIdOrConfig' = ".concat(T)},n.prototype.computeCanvasDrawConfig=function(c,o,x,f){if(c<=x&&o<=f){var g=(x-c)/2,y=(f-o)/2;return{x:g,y,width:c,height:o}}else{var j=c,k=o;return c>x&&(o=x/c*o,c=x),o>f&&(c=f/o*c,o=f),this.logger.log("Image downsampled from "+"".concat(j,"X").concat(k)+" to ".concat(c,"X").concat(o,".")),this.computeCanvasDrawConfig(c,o,x,f)}},n.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var c=document.getElementById(this.elementId);c&&(c.innerHTML="")},n.prototype.possiblyUpdateShaders=function(c){this.qrMatch!==c&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(o){o.style.backgroundColor=c?Xr.BORDER_SHADER_MATCH_COLOR:Xr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=c)},n.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},n.prototype.createCanvasElement=function(c,o,x){var f=c,g=o,y=document.createElement("canvas");return y.style.width="".concat(f,"px"),y.style.height="".concat(g,"px"),y.style.display="none",y.id=Gs(x)?"qr-canvas":x,y},n.prototype.getShadedRegionBounds=function(c,o,x){if(x.width>c||x.height>o)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(c-x.width)/2,y:(o-x.height)/2,width:x.width,height:x.height}},n.prototype.possiblyInsertShadingElement=function(c,o,x,f){if(!(o-f.width<1||x-f.height<1)){var g=document.createElement("div");g.style.position="absolute";var y=(o-f.width)/2,j=(x-f.height)/2;if(g.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderTop="".concat(j,"px solid rgba(0, 0, 0, 0.48)"),g.style.borderBottom="".concat(j,"px solid rgba(0, 0, 0, 0.48)"),g.style.boxSizing="border-box",g.style.top="0px",g.style.bottom="0px",g.style.left="0px",g.style.right="0px",g.id="".concat(Xr.SHADED_REGION_ELEMENT_ID),o-f.width<11||x-f.height<11)this.hasBorderShaders=!1;else{var k=5,b=40;this.insertShaderBorders(g,b,k,-k,null,0,!0),this.insertShaderBorders(g,b,k,-k,null,0,!1),this.insertShaderBorders(g,b,k,null,-k,0,!0),this.insertShaderBorders(g,b,k,null,-k,0,!1),this.insertShaderBorders(g,k,b+k,-k,null,-k,!0),this.insertShaderBorders(g,k,b+k,null,-k,-k,!0),this.insertShaderBorders(g,k,b+k,-k,null,-k,!1),this.insertShaderBorders(g,k,b+k,null,-k,-k,!1),this.hasBorderShaders=!0}c.append(g)}},n.prototype.insertShaderBorders=function(c,o,x,f,g,y,j){var k=document.createElement("div");k.style.position="absolute",k.style.backgroundColor=Xr.BORDER_SHADER_DEFAULT_COLOR,k.style.width="".concat(o,"px"),k.style.height="".concat(x,"px"),f!==null&&(k.style.top="".concat(f,"px")),g!==null&&(k.style.bottom="".concat(g,"px")),j?k.style.left="".concat(y,"px"):k.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(k),c.appendChild(k)},n.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},n.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},n.prototype.getTimeoutFps=function(c){return 1e3/c},n}(),Jx="data:image/svg+xml;base64,",sk=Jx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",nk=Jx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",gp=Jx+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",lk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",pp=function(){function n(){}return n.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},n}(),ik=function(){function n(){this.data=pp.createDefault();var c=localStorage.getItem(n.LOCAL_STORAGE_KEY);c?this.data=JSON.parse(c):this.reset()}return n.prototype.hasCameraPermissions=function(){return this.data.hasPermission},n.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},n.prototype.setHasPermission=function(c){this.data.hasPermission=c,this.flush()},n.prototype.setLastUsedCameraId=function(c){this.data.lastUsedCameraId=c,this.flush()},n.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},n.prototype.reset=function(){this.data=pp.createDefault(),this.flush()},n.prototype.flush=function(){localStorage.setItem(n.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},n.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",n}(),ok=function(){function n(){this.infoDiv=document.createElement("div")}return n.prototype.renderInto=function(c){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ip.poweredBy();var o=document.createElement("a");o.innerText="ScanApp",o.href="https://scanapp.org",o.target="new",o.style.color="white",this.infoDiv.appendChild(o);var x=document.createElement("br"),f=document.createElement("br");this.infoDiv.appendChild(x),this.infoDiv.appendChild(f);var g=document.createElement("a");g.innerText=ip.reportIssues(),g.href="https://github.com/mebjas/html5-qrcode/issues",g.target="new",g.style.color="white",this.infoDiv.appendChild(g),c.appendChild(this.infoDiv)},n.prototype.show=function(){this.infoDiv.style.display="block"},n.prototype.hide=function(){this.infoDiv.style.display="none"},n}(),ck=function(){function n(c,o){this.isShowingInfoIcon=!0,this.onTapIn=c,this.onTapOut=o,this.infoIcon=document.createElement("img")}return n.prototype.renderInto=function(c){var o=this;this.infoIcon.alt="Info icon",this.infoIcon.src=gp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(x){return o.onHoverIn()},this.infoIcon.onmouseout=function(x){return o.onHoverOut()},this.infoIcon.onclick=function(x){return o.onClick()},c.appendChild(this.infoIcon)},n.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},n.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},n.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=lk,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=gp,this.infoIcon.style.opacity="0.6")},n}(),dk=function(){function n(){var c=this;this.infoDiv=new ok,this.infoIcon=new ck(function(){c.infoDiv.show()},function(){c.infoDiv.hide()})}return n.prototype.renderInto=function(c){this.infoDiv.renderInto(c),this.infoIcon.renderInto(c)},n}(),uk=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},xk=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},yp=function(){function n(){}return n.hasPermissions=function(){return uk(this,void 0,void 0,function(){var c,o,x,f;return xk(this,function(g){switch(g.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(c=g.sent(),o=0,x=c;o<x.length;o++)if(f=x[o],f.kind==="videoinput"&&f.label)return[2,!0];return[2,!1]}})})},n}(),rl=function(){function n(c){this.supportedScanTypes=this.validateAndReturnScanTypes(c)}return n.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},n.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},n.prototype.isCameraScanRequired=function(){for(var c=0,o=this.supportedScanTypes;c<o.length;c++){var x=o[c];if(n.isCameraScanType(x))return!0}return!1},n.isCameraScanType=function(c){return c===Ys.SCAN_TYPE_CAMERA},n.isFileScanType=function(c){return c===Ys.SCAN_TYPE_FILE},n.prototype.validateAndReturnScanTypes=function(c){if(!c||c.length===0)return gs.DEFAULT_SUPPORTED_SCAN_TYPE;var o=gs.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(c.length>o)throw"Max ".concat(o," values expected for ")+"supportedScanTypes";for(var x=0,f=c;x<f.length;x++){var g=f[x];if(!gs.DEFAULT_SUPPORTED_SCAN_TYPE.includes(g))throw"Unsupported scan type ".concat(g)}return c},n}(),Zr=function(){function n(){}return n.ALL_ELEMENT_CLASS="html5-qrcode-element",n.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",n.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",n.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",n.TORCH_BUTTON_ID="html5-qrcode-button-torch",n.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",n.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",n.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",n.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",n.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",n.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",n}(),gn=function(){function n(){}return n.createElement=function(c,o){var x=document.createElement(c);return x.id=o,x.classList.add(Zr.ALL_ELEMENT_CLASS),c==="button"&&x.setAttribute("type","button"),x},n}(),F1=function(n,c,o,x){function f(g){return g instanceof o?g:new o(function(y){y(g)})}return new(o||(o=Promise))(function(g,y){function j(S){try{b(x.next(S))}catch(E){y(E)}}function k(S){try{b(x.throw(S))}catch(E){y(E)}}function b(S){S.done?g(S.value):f(S.value).then(j,k)}b((x=x.apply(n,c||[])).next())})},P1=function(n,c){var o={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},x,f,g,y;return y={next:j(0),throw:j(1),return:j(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function j(b){return function(S){return k([b,S])}}function k(b){if(x)throw new TypeError("Generator is already executing.");for(;y&&(y=0,b[0]&&(o=0)),o;)try{if(x=1,f&&(g=b[0]&2?f.return:b[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,b[1])).done)return g;switch(f=0,g&&(b=[b[0]&2,g.value]),b[0]){case 0:case 1:g=b;break;case 4:return o.label++,{value:b[1],done:!1};case 5:o.label++,f=b[1],b=[0];continue;case 7:b=o.ops.pop(),o.trys.pop();continue;default:if(g=o.trys,!(g=g.length>0&&g[g.length-1])&&(b[0]===6||b[0]===2)){o=0;continue}if(b[0]===3&&(!g||b[1]>g[0]&&b[1]<g[3])){o.label=b[1];break}if(b[0]===6&&o.label<g[1]){o.label=g[1],g=b;break}if(g&&o.label<g[2]){o.label=g[2],o.ops.push(b);break}g[2]&&o.ops.pop(),o.trys.pop();continue}b=c.call(n,o)}catch(S){b=[6,S],f=0}finally{x=g=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},bp=function(){function n(c,o,x){this.isTorchOn=!1,this.torchCapability=c,this.buttonController=o,this.onTorchActionFailureCallback=x}return n.prototype.isTorchEnabled=function(){return this.isTorchOn},n.prototype.flipState=function(){return F1(this,void 0,void 0,function(){var c,o;return P1(this,function(x){switch(x.label){case 0:this.buttonController.disable(),c=!this.isTorchOn,x.label=1;case 1:return x.trys.push([1,3,,4]),[4,this.torchCapability.apply(c)];case 2:return x.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),c),[3,4];case 3:return o=x.sent(),this.propagateFailure(c,o),this.buttonController.enable(),[3,4];case 4:return[2]}})})},n.prototype.updateUiBasedOnLatestSettings=function(c,o){c===o?(this.buttonController.setText(o?na.torchOffButton():na.torchOnButton()),this.isTorchOn=o):this.propagateFailure(o),this.buttonController.enable()},n.prototype.propagateFailure=function(c,o){var x=c?na.torchOnFailedMessage():na.torchOffFailedMessage();o&&(x+="; Error = "+o),this.onTorchActionFailureCallback(x)},n.prototype.reset=function(){this.isTorchOn=!1},n}(),hk=function(){function n(c,o){this.onTorchActionFailureCallback=o,this.torchButton=gn.createElement("button",Zr.TORCH_BUTTON_ID),this.torchController=new bp(c,this,o)}return n.prototype.render=function(c,o){var x=this;this.torchButton.innerText=na.torchOnButton(),this.torchButton.style.display=o.display,this.torchButton.style.marginLeft=o.marginLeft;var f=this;this.torchButton.addEventListener("click",function(g){return F1(x,void 0,void 0,function(){return P1(this,function(y){switch(y.label){case 0:return[4,f.torchController.flipState()];case 1:return y.sent(),f.torchController.isTorchEnabled()?(f.torchButton.classList.remove(Zr.TORCH_BUTTON_CLASS_TORCH_OFF),f.torchButton.classList.add(Zr.TORCH_BUTTON_CLASS_TORCH_ON)):(f.torchButton.classList.remove(Zr.TORCH_BUTTON_CLASS_TORCH_ON),f.torchButton.classList.add(Zr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),c.appendChild(this.torchButton)},n.prototype.updateTorchCapability=function(c){this.torchController=new bp(c,this,this.onTorchActionFailureCallback)},n.prototype.getTorchButton=function(){return this.torchButton},n.prototype.hide=function(){this.torchButton.style.display="none"},n.prototype.show=function(){this.torchButton.style.display="inline-block"},n.prototype.disable=function(){this.torchButton.disabled=!0},n.prototype.enable=function(){this.torchButton.disabled=!1},n.prototype.setText=function(c){this.torchButton.innerText=c},n.prototype.reset=function(){this.torchButton.innerText=na.torchOnButton(),this.torchController.reset()},n.create=function(c,o,x,f){var g=new n(o,f);return g.render(c,x),g},n}(),mk=function(){function n(c,o,x){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=o?"block":"none",c.appendChild(this.fileBasedScanRegion);var f=document.createElement("label");f.setAttribute("for",this.getFileScanInputId()),f.style.display="inline-block",this.fileBasedScanRegion.appendChild(f),this.fileSelectionButton=gn.createElement("button",Zr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(j){f.click()}),f.append(this.fileSelectionButton),this.fileScanInput=gn.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",f.appendChild(this.fileScanInput);var g=this;this.fileScanInput.addEventListener("change",function(j){if(!(j==null||j.target==null)){var k=j.target;if(!(k.files&&k.files.length===0)){var b=k.files,S=b[0],E=S.name;g.setImageNameToButton(E),x(S)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(j){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),j.stopPropagation(),j.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(j){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder(),j.stopPropagation(),j.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(j){g.fileBasedScanRegion.style.border=g.fileBasedScanRegionActiveBorder(),j.stopPropagation(),j.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(j){j.stopPropagation(),j.preventDefault(),g.fileBasedScanRegion.style.border=g.fileBasedScanRegionDefaultBorder();var k=j.dataTransfer;if(k){var b=k.files;if(!b||b.length===0)return;for(var S=!1,E=0;E<b.length;++E){var _=b.item(E);if(_){var T=/image.*/;if(_.type.match(T)){S=!0;var O=_.name;g.setImageNameToButton(O),x(_),y.innerText=na.dragAndDropMessage();break}}}S||(y.innerText=na.dragAndDropMessageOnlyImages())}})}return n.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},n.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},n.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},n.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},n.prototype.createFileBasedScanRegion=function(){var c=document.createElement("div");return c.style.textAlign="center",c.style.margin="auto",c.style.width="80%",c.style.maxWidth="600px",c.style.border=this.fileBasedScanRegionDefaultBorder(),c.style.padding="10px",c.style.marginBottom="10px",c},n.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},n.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},n.prototype.createDragAndDropMessage=function(){var c=document.createElement("div");return c.innerText=na.dragAndDropMessage(),c.style.fontWeight="400",c},n.prototype.setImageNameToButton=function(c){var o=20;if(c.length>o){var x=c.substring(0,8),f=c.length,g=c.substring(f-8,f);c="".concat(x,"....").concat(g)}var y=na.fileSelectionChooseAnother()+" - "+c;this.fileSelectionButton.innerText=y},n.prototype.setInitialValueToButton=function(){var c=na.fileSelectionChooseImage()+" - "+na.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=c},n.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},n.create=function(c,o,x){var f=new n(c,o,x);return f},n}(),fk=function(){function n(c){this.selectElement=gn.createElement("select",Zr.CAMERA_SELECTION_SELECT_ID),this.cameras=c,this.options=[]}return n.prototype.render=function(c){var o=document.createElement("span");o.style.marginRight="10px";var x=this.cameras.length;if(x===0)throw new Error("No cameras found");if(x===1)o.style.display="none";else{var f=na.selectCamera();o.innerText="".concat(f," (").concat(this.cameras.length,")  ")}for(var g=1,y=0,j=this.cameras;y<j.length;y++){var k=j[y],b=k.id,S=k.label==null?b:k.label;(!S||S==="")&&(S=[na.anonymousCameraPrefix(),g++].join(" "));var E=document.createElement("option");E.value=b,E.innerText=S,this.options.push(E),this.selectElement.appendChild(E)}o.appendChild(this.selectElement),c.appendChild(o)},n.prototype.disable=function(){this.selectElement.disabled=!0},n.prototype.isDisabled=function(){return this.selectElement.disabled===!0},n.prototype.enable=function(){this.selectElement.disabled=!1},n.prototype.getValue=function(){return this.selectElement.value},n.prototype.hasValue=function(c){for(var o=0,x=this.options;o<x.length;o++){var f=x[o];if(f.value===c)return!0}return!1},n.prototype.setValue=function(c){if(!this.hasValue(c))throw new Error("".concat(c," is not present in the camera list."));this.selectElement.value=c},n.prototype.hasSingleItem=function(){return this.cameras.length===1},n.prototype.numCameras=function(){return this.cameras.length},n.create=function(c,o){var x=new n(o);return x.render(c),x},n}(),gk=function(){function n(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=gn.createElement("input",Zr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return n.prototype.render=function(c,o){this.zoomElementContainer.style.display=o?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",c.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var x=na.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(x),this.rangeText.style.marginRight="10px";var f=this;this.rangeInput.addEventListener("input",function(){return f.onValueChange()}),this.rangeInput.addEventListener("change",function(){return f.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},n.prototype.onValueChange=function(){var c=na.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},n.prototype.setValues=function(c,o,x,f){this.rangeInput.min=c.toString(),this.rangeInput.max=o.toString(),this.rangeInput.step=f.toString(),this.rangeInput.value=x.toString(),this.onValueChange()},n.prototype.show=function(){this.zoomElementContainer.style.display="block"},n.prototype.hide=function(){this.zoomElementContainer.style.display="none"},n.prototype.setOnCameraZoomValueChangeCallback=function(c){this.onChangeCallback=c},n.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},n.create=function(c,o){var x=new n;return x.render(c,o),x},n}(),$r;(function(n){n[n.STATUS_DEFAULT=0]="STATUS_DEFAULT",n[n.STATUS_SUCCESS=1]="STATUS_SUCCESS",n[n.STATUS_WARNING=2]="STATUS_WARNING",n[n.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($r||($r={}));function pk(n){return{fps:n.fps,qrbox:n.qrbox,aspectRatio:n.aspectRatio,disableFlip:n.disableFlip,videoConstraints:n.videoConstraints}}function yk(n,c){return{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:c}}var U1=function(){function n(c,o,x){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=c,this.config=this.createConfig(o),this.verbose=x===!0,!document.getElementById(c))throw"HTML Element with id=".concat(c," not found");this.scanTypeSelector=new rl(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new B1(this.verbose),this.persistedDataManager=new ik,o.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return n.prototype.render=function(c,o){var x=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(g,y){if(c)c(g,y);else{if(x.lastMatchFound===g)return;x.lastMatchFound=g,x.setHeaderMessage(na.lastMatch(g),$r.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(g,y){o&&o(g,y)};var f=document.getElementById(this.elementId);if(!f)throw"HTML Element with id=".concat(this.elementId," not found");f.innerHTML="",this.createBasicLayout(f),this.html5Qrcode=new fp(this.getScanRegionId(),yk(this.config,this.verbose))},n.prototype.pause=function(c){(Gs(c)||c!==!0)&&(c=!1),this.getHtml5QrcodeOrFail().pause(c)},n.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},n.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},n.prototype.clear=function(){var c=this,o=function(){var x=document.getElementById(c.elementId);x&&(x.innerHTML="",c.resetBasicLayout(x))};return this.html5Qrcode?new Promise(function(x,f){if(!c.html5Qrcode){x();return}c.html5Qrcode.isScanning?c.html5Qrcode.stop().then(function(g){if(!c.html5Qrcode){x();return}c.html5Qrcode.clear(),o(),x()}).catch(function(g){c.verbose&&c.logger.logError("Unable to stop qrcode scanner",g),f(g)}):(c.html5Qrcode.clear(),o(),x())}):Promise.resolve()},n.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},n.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},n.prototype.applyVideoConstraints=function(c){return this.getHtml5QrcodeOrFail().applyVideoConstraints(c)},n.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},n.prototype.createConfig=function(c){return c?(c.fps||(c.fps=gs.SCAN_DEFAULT_FPS),c.rememberLastUsedCamera!==!gs.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(c.rememberLastUsedCamera=gs.DEFAULT_REMEMBER_LAST_CAMERA_USED),c.supportedScanTypes||(c.supportedScanTypes=gs.DEFAULT_SUPPORTED_SCAN_TYPE),c):{fps:gs.SCAN_DEFAULT_FPS,rememberLastUsedCamera:gs.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:gs.DEFAULT_SUPPORTED_SCAN_TYPE}},n.prototype.createBasicLayout=function(c){c.style.position="relative",c.style.padding="0px",c.style.border="1px solid silver",this.createHeader(c);var o=document.createElement("div"),x=this.getScanRegionId();o.id=x,o.style.width="100%",o.style.minHeight="100px",o.style.textAlign="center",c.appendChild(o),rl.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var f=document.createElement("div"),g=this.getDashboardId();f.id=g,f.style.width="100%",c.appendChild(f),this.setupInitialDashboard(f)},n.prototype.resetBasicLayout=function(c){c.style.border="none"},n.prototype.setupInitialDashboard=function(c){this.createSection(c),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},n.prototype.createHeader=function(c){var o=document.createElement("div");o.style.textAlign="left",o.style.margin="0px",c.appendChild(o);var x=new dk;x.renderInto(o);var f=document.createElement("div");f.id=this.getHeaderMessageContainerId(),f.style.display="none",f.style.textAlign="center",f.style.fontSize="14px",f.style.padding="2px 10px",f.style.margin="4px",f.style.borderTop="1px solid #f6f6f6",o.appendChild(f)},n.prototype.createSection=function(c){var o=document.createElement("div");o.id=this.getDashboardSectionId(),o.style.width="100%",o.style.padding="10px 0px 10px 0px",o.style.textAlign="left",c.appendChild(o)},n.prototype.createCameraListUi=function(c,o,x){var f=this;f.showHideScanTypeSwapLink(!1),f.setHeaderMessage(na.cameraPermissionRequesting());var g=function(){x||f.createPermissionButton(c,o)};fp.getCameras().then(function(y){f.persistedDataManager.setHasPermission(!0),f.showHideScanTypeSwapLink(!0),f.resetHeaderMessage(),y&&y.length>0?(c.removeChild(o),f.renderCameraSelection(y)):(f.setHeaderMessage(na.noCameraFound(),$r.STATUS_WARNING),g())}).catch(function(y){f.persistedDataManager.setHasPermission(!1),x?x.disabled=!1:g(),f.setHeaderMessage(y,$r.STATUS_WARNING),f.showHideScanTypeSwapLink(!0)})},n.prototype.createPermissionButton=function(c,o){var x=this,f=gn.createElement("button",this.getCameraPermissionButtonId());f.innerText=na.cameraPermissionTitle(),f.addEventListener("click",function(){f.disabled=!0,x.createCameraListUi(c,o,f)}),o.appendChild(f)},n.prototype.createPermissionsUi=function(c,o){var x=this;if(rl.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){yp.hasPermissions().then(function(f){f?x.createCameraListUi(c,o):(x.persistedDataManager.setHasPermission(!1),x.createPermissionButton(c,o))}).catch(function(f){x.persistedDataManager.setHasPermission(!1),x.createPermissionButton(c,o)});return}this.createPermissionButton(c,o)},n.prototype.createSectionControlPanel=function(){var c=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");c.appendChild(o);var x=document.createElement("div");x.id=this.getDashboardSectionCameraScanRegionId(),x.style.display=rl.isCameraScanType(this.currentScanType)?"block":"none",o.appendChild(x);var f=document.createElement("div");f.style.textAlign="center",x.appendChild(f),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(x,f),this.renderFileScanUi(o)},n.prototype.renderFileScanUi=function(c){var o=rl.isFileScanType(this.currentScanType),x=this,f=function(g){if(!x.html5Qrcode)throw"html5Qrcode not defined";rl.isFileScanType(x.currentScanType)&&(x.setHeaderMessage(na.loadingImage()),x.html5Qrcode.scanFileV2(g,!0).then(function(y){x.resetHeaderMessage(),x.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){x.setHeaderMessage(y,$r.STATUS_WARNING),x.qrCodeErrorCallback(y,O1.createFrom(y))}))};this.fileSelectionUi=mk.create(c,o,f)},n.prototype.renderCameraSelection=function(c){var o=this,x=this,f=document.getElementById(this.getDashboardSectionCameraScanRegionId());f.style.textAlign="center";var g=gk.create(f,!1),y=function(M){var z=M.zoomFeature();if(z.isSupported()){g.setOnCameraZoomValueChangeCallback(function(L){z.apply(L)});var I=1;o.config.defaultZoomValueIfSupported&&(I=o.config.defaultZoomValueIfSupported),I=O3(I,z.min(),z.max()),g.setValues(z.min(),z.max(),I,z.step()),g.show()}},j=fk.create(f,c),k=document.createElement("span"),b=gn.createElement("button",Zr.CAMERA_START_BUTTON_ID);b.innerText=na.scanButtonStartScanningText(),k.appendChild(b);var S=gn.createElement("button",Zr.CAMERA_STOP_BUTTON_ID);S.innerText=na.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,k.appendChild(S);var E,_=function(M){if(!M.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(M.torchFeature()):E=hk.create(k,M.torchFeature(),{display:"none",marginLeft:"5px"},function(z){x.setHeaderMessage(z,$r.STATUS_WARNING)}),E.show()};f.appendChild(k);var T=function(M){M||(b.style.display="none"),b.innerText=na.scanButtonStartScanningText(),b.style.opacity="1",b.disabled=!1,M&&(b.style.display="inline-block")};if(b.addEventListener("click",function(M){b.innerText=na.scanButtonScanningStarting(),j.disable(),b.disabled=!0,b.style.opacity="0.5",o.scanTypeSelector.hasMoreThanOneScanType()&&x.showHideScanTypeSwapLink(!1),x.resetHeaderMessage();var z=j.getValue();x.persistedDataManager.setLastUsedCameraId(z),x.html5Qrcode.start(z,pk(x.config),x.qrCodeSuccessCallback,x.qrCodeErrorCallback).then(function(I){S.disabled=!1,S.style.display="inline-block",T(!1);var L=x.html5Qrcode.getRunningTrackCameraCapabilities();o.config.showTorchButtonIfSupported===!0&&_(L),o.config.showZoomSliderIfSupported===!0&&y(L)}).catch(function(I){x.showHideScanTypeSwapLink(!0),j.enable(),T(!0),x.setHeaderMessage(I,$r.STATUS_WARNING)})}),j.hasSingleItem()&&b.click(),S.addEventListener("click",function(M){if(!x.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,x.html5Qrcode.stop().then(function(z){o.scanTypeSelector.hasMoreThanOneScanType()&&x.showHideScanTypeSwapLink(!0),j.enable(),b.disabled=!1,S.style.display="none",b.style.display="inline-block",E&&(E.reset(),E.hide()),g.removeOnCameraZoomValueChangeCallback(),g.hide(),x.insertCameraScanImageToScanRegion()}).catch(function(z){S.disabled=!1,x.setHeaderMessage(z,$r.STATUS_WARNING)})}),x.persistedDataManager.getLastUsedCameraId()){var O=x.persistedDataManager.getLastUsedCameraId();j.hasValue(O)?(j.setValue(O),b.click()):x.persistedDataManager.resetLastUsedCameraId()}},n.prototype.createSectionSwap=function(){var c=this,o=na.textIfCameraScanSelected(),x=na.textIfFileScanSelected(),f=document.getElementById(this.getDashboardSectionId()),g=document.createElement("div");g.style.textAlign="center";var y=gn.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=rl.isCameraScanType(this.currentScanType)?o:x,y.addEventListener("click",function(){if(!c.sectionSwapAllowed){c.verbose&&c.logger.logError("Section swap called when not allowed");return}c.resetHeaderMessage(),c.fileSelectionUi.resetValue(),c.sectionSwapAllowed=!1,rl.isCameraScanType(c.currentScanType)?(c.clearScanRegion(),c.getCameraScanRegion().style.display="none",c.fileSelectionUi.show(),y.innerText=x,c.currentScanType=Ys.SCAN_TYPE_FILE,c.insertFileScanImageToScanRegion()):(c.clearScanRegion(),c.getCameraScanRegion().style.display="block",c.fileSelectionUi.hide(),y.innerText=o,c.currentScanType=Ys.SCAN_TYPE_CAMERA,c.insertCameraScanImageToScanRegion(),c.startCameraScanIfPermissionExistsOnSwap()),c.sectionSwapAllowed=!0}),g.appendChild(y),f.appendChild(g)},n.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var c=this,o=this;if(this.persistedDataManager.hasCameraPermissions()){yp.hasPermissions().then(function(x){if(x){var f=document.getElementById(o.getCameraPermissionButtonId());if(!f)throw c.logger.logError("Permission button not found, fail;"),"Permission button not found";f.click()}else o.persistedDataManager.setHasPermission(!1)}).catch(function(x){o.persistedDataManager.setHasPermission(!1)});return}},n.prototype.resetHeaderMessage=function(){var c=document.getElementById(this.getHeaderMessageContainerId());c.style.display="none"},n.prototype.setHeaderMessage=function(c,o){o||(o=$r.STATUS_DEFAULT);var x=this.getHeaderMessageDiv();switch(x.innerText=c,x.style.display="block",o){case $r.STATUS_SUCCESS:x.style.background="rgba(106, 175, 80, 0.26)",x.style.color="#477735";break;case $r.STATUS_WARNING:x.style.background="rgba(203, 36, 49, 0.14)",x.style.color="#cb2431";break;case $r.STATUS_DEFAULT:default:x.style.background="rgba(0, 0, 0, 0)",x.style.color="rgb(17, 17, 17)";break}},n.prototype.showHideScanTypeSwapLink=function(c){this.scanTypeSelector.hasMoreThanOneScanType()&&(c!==!0&&(c=!1),this.sectionSwapAllowed=c,this.getDashboardSectionSwapLink().style.display=c?"inline-block":"none")},n.prototype.insertCameraScanImageToScanRegion=function(){var c=this,o=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){o.innerHTML="<br>",o.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(x){o.innerHTML="<br>",o.appendChild(c.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=sk,this.cameraScanImage.alt=na.cameraScanAltText()},n.prototype.insertFileScanImageToScanRegion=function(){var c=this,o=document.getElementById(this.getScanRegionId());if(this.fileScanImage){o.innerHTML="<br>",o.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(x){o.innerHTML="<br>",o.appendChild(c.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=nk,this.fileScanImage.alt=na.fileScanAltText()},n.prototype.clearScanRegion=function(){var c=document.getElementById(this.getScanRegionId());c.innerHTML=""},n.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},n.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},n.prototype.getDashboardSectionSwapLinkId=function(){return Zr.SCAN_TYPE_CHANGE_ANCHOR_ID},n.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},n.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},n.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},n.prototype.getCameraPermissionButtonId=function(){return Zr.CAMERA_PERMISSION_BUTTON_ID},n.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},n.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},n.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},n}();function H1(){const{bill_id:n}=os(),[c,o]=N.useState(!1),[x,f]=N.useState(null),[g,y]=N.useState(!1),[j,k]=N.useState(null),[b,S]=N.useState([]),[E,_]=N.useState(!1),[T,O]=N.useState(""),[M,z]=N.useState(null),[I,L]=N.useState(""),D=N.useRef(null),B=Vt(),{auth:Y}=N.useContext(da),[X,U]=N.useState("environment"),G=async()=>{try{if(!n)return;const ee=await fe.get(`/user-bills/users/${Y.user.id}/bills`);if(ee.data.success&&Array.isArray(ee.data.data)){const H=ee.data.data.find(me=>me.id===n);H?k(H):(J.error("You are not assigned to this bill"),B("/my-bills"))}}catch(ee){console.error("Error fetching bill details:",ee),J.error("Error loading bill information")}},Q=async()=>{try{const ee=await fe.get(`/user-apartments/users/${Y.user.id}/apartments`);return ee.data.success&&Array.isArray(ee.data.data)?(S(ee.data.data),ee.data.data):[]}catch(ee){return console.error("Error fetching user apartments:",ee),J.error("Error loading your assigned apartments"),[]}},le=async(ee,H)=>{try{if(!ee)return{access:!1,reason:"Invalid house ID"};const me=await fe.get(`/houses/${ee}`);if(!me.data.success||!me.data.data)return{access:!1,reason:"House not found in the system"};const ae=me.data.data;let be=null;if(ae.apartment_id)try{const Je=await fe.get(`/apartments/${ae.apartment_id}`);Je.data.success&&(be=Je.data.data)}catch(Je){console.error("Error fetching apartment:",Je)}let ze=null;if(ae.floor_id)try{const Je=await fe.get(`/floors/${ae.floor_id}`);Je.data.success&&(ze=Je.data.data)}catch(Je){console.error("Error fetching floor:",Je)}const xe={...ae,apartment:be,floor:ze};if(z(xe),!H.some(Je=>Je.id===ae.apartment_id))return{access:!1,reason:`You are not assigned to "${be?.name||"this apartment"}"`};let je=!1;try{const Je=await fe.get(`/bill-assignments/house-details?house_id=${ee}&apartment_id=${ae.apartment_id}`);Je.data.success&&(je=(Array.isArray(Je.data.data)?Je.data.data:Je.data.data?.bills||[]).some(at=>at.bill_id===n||at.id===n))}catch(Je){console.error("Error checking bill assignments:",Je);try{const Ke=await fe.get(`/user-bills/users/${Y.user.id}/bills`);Ke.data.success&&Array.isArray(Ke.data.data)&&Ke.data.data.find(Ue=>Ue.id===n)&&(je=!0)}catch(Ke){console.error("Alternative check failed:",Ke)}}return je?j?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${j?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:xe,apartmentId:ae.apartment_id,floorId:ae.floor_id,houseId:ae.id}:{access:!1,reason:`This house does not have "${j?.bill_name||"the selected bill"}" assigned`}}catch(me){if(console.error("Error checking house access:",me),me.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const ae=me.response?.status;return ae===401?{access:!1,reason:"Session expired. Please login again."}:ae===403?{access:!1,reason:"Access denied to this resource."}:ae===404?{access:!1,reason:"House not found."}:ae===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},ce=async()=>{if(!I.trim()){J.error("Please enter a house ID");return}try{y(!0),D.current&&D.current.clear().catch(ae=>{console.log("Scanner clear error:",ae)}),o(!1);const ee=I.trim();f({houseId:ee,source:"manual"});const H=await Q(),me=await le(ee,H);me.access?(_(!0),J.success(`Access granted! House ${M?.house_id||ee} has ${j?.bill_name} bill.`)):(_(!1),O(me.reason||"Access denied"),J.error(me.reason||"Access denied"))}catch(ee){console.error("Error processing manual input:",ee),J.error(ee.message||"Invalid house ID. Please enter a valid house ID.")}finally{y(!1)}},te=ee=>{L(ee.target.value)},re=ee=>{ee.key==="Enter"&&ce()},W=()=>{o(!0),f(null),_(!1),O(""),z(null),L(""),setTimeout(()=>{try{D.current&&D.current.clear().catch(ee=>{console.log("Scanner clear error:",ee)}),D.current=new U1("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,supportedScanTypes:[Ys.SCAN_TYPE_CAMERA],facingMode:X},!1),D.current.render(ee=>{$(ee)},ee=>{console.log("QR Scan error:",ee)})}catch(ee){console.error("Scanner initialization error:",ee),J.error("Failed to initialize scanner. Please refresh and try again.")}},100)},P=()=>{U(X==="environment"?"user":"environment"),c&&W()},$=async ee=>{try{y(!0),D.current&&await D.current.clear(),o(!1),L("");const H=ee.trim();f({houseId:H,source:"qr"});const me=await Q(),ae=await le(H,me);ae.access?(_(!0),J.success(`Access granted! House ${M?.house_id||H} has ${j?.bill_name} bill.`)):(_(!1),O(ae.reason||"Access denied"),J.error(ae.reason||"Access denied"))}catch(H){console.error("Error processing QR code:",H),J.error(H.message||"Invalid QR code. Please scan a valid house QR code."),o(!1)}finally{y(!1)}},ne=()=>{D.current&&D.current.clear().catch(ee=>{console.log("Scanner clear error on reset:",ee)}),o(!1),f(null),_(!1),O(""),z(null),L("")},de=()=>{B("/my-bills")},Ce=()=>{if(!M||!x){J.error("House data not available");return}B(`/calculate-measurable-bill/${n}`,{state:{scannedData:x,billData:j,actualBillId:n,houseData:M,houseId:M.id,source:x.source}})};return N.useEffect(()=>()=>{D.current&&D.current.clear().catch(ee=>{console.log("Scanner clear error on unmount:",ee)})},[]),N.useEffect(()=>{Y?.user?.id&&n&&(G(),Q())},[Y?.user?.id,n]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(Zt,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:P,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${X==="environment"?"Front":"Back"} Camera`,children:e.jsx(h1,{size:16})}),e.jsx("button",{onClick:ne,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(Gt,{size:16})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Position QR code within frame ",X==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",j?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),g&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(yt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),x&&!g&&!c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:ne,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Mi,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),E?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(ys,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",j?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:Ce,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(Ht,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Da,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:T}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",j?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',j?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!x&&!c&&!g&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:I,onChange:te,onKeyPress:re,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:ce,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(Ht,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Vo,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:j?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:W,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(o1,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:de,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function bk(){const{bill_id:n}=os(),c=Vt(),o=js(),{auth:x}=N.useContext(da),f=o.state?.scannedData||null,g=o.state?.billData||null,y=o.state?.houseData||null,j=o.state?.actualBillId||n,k=o.state?.source||"qr",[b,S]=N.useState(!1),[E,_]=N.useState(null),[T,O]=N.useState([]),[M,z]=N.useState([]),[I,L]=N.useState(null),[D,B]=N.useState(null),[Y,X]=N.useState(""),[U,G]=N.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[Q,le]=N.useState(null),[ce,te]=N.useState([]),[re,W]=N.useState(!1),[P,$]=N.useState(!1),ne=la.useRef(U.month),de=la.useRef(U.year),Ce=Ue=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ue-1]||"";N.useEffect(()=>{if(!n||!j){J.error("Bill ID is missing"),c("/my-bills");return}if(!f||!y||!g){J.error("House data is incomplete. Please go back and try again."),c(`/measurable-bills/${n}`);return}},[n,j,f,y,g,c]);const ee=async()=>{try{const Ue=await fe.get(`/billranges/bills/${j}`);let ve=[];if(Array.isArray(Ue.data))ve=Ue.data;else if(Ue.data.data&&Array.isArray(Ue.data.data))ve=Ue.data.data;else if(Ue.data.success&&Ue.data.data)Array.isArray(Ue.data.data)?ve=Ue.data.data:typeof Ue.data.data=="object"&&(ve=Object.values(Ue.data.data));else if(typeof Ue.data=="object"){for(const he in Ue.data)if(Array.isArray(Ue.data[he])){ve=Ue.data[he];break}}if(ve.length>0){const he=ve.sort((He,et)=>parseFloat(He.fromRange||He.from_range||He.from||0)-parseFloat(et.fromRange||et.from_range||et.from||0));O(he),he.length>0&&L(he[0])}else O([]),J.warning("No bill ranges data available in response")}catch(Ue){console.error("Error loading bill ranges:",Ue),J.error("Failed to load bill ranges."),O([])}},H=async()=>{try{const Ue=Ce(U.month),ve=U.month;z([]),B(null);let he=null,He=null;try{he=await fe.get("/billprice",{params:{bill_id:j,month:Ue,year:U.year}})}catch(Te){He=Te;try{he=await fe.get("/billprice",{params:{bill_id:j,month:ve,year:U.year}})}catch(oe){He=oe;try{he=await fe.get(`/billprice/${j}/${Ue}/${U.year}`)}catch(pe){He=pe;try{he=await fe.get(`/billprice/${j}/${ve}/${U.year}`)}catch(Me){He=Me;try{he=await fe.get("/api/billprice",{params:{bill_id:j,month:Ue,year:U.year}})}catch(jt){throw He=jt,new Error("All API attempts failed")}}}}}let et=[];if(he.data?.success)Array.isArray(he.data.data)?et=he.data.data:he.data.data&&typeof he.data.data=="object"?et=Object.values(he.data.data):et=[];else if(Array.isArray(he.data))et=he.data;else if(he.data?.data&&Array.isArray(he.data.data))et=he.data.data;else if(he.data&&typeof he.data=="object"){for(const Te in he.data)if(Array.isArray(he.data[Te])){et=he.data[Te];break}}const Ne=et.filter(Te=>{const oe=Te.month,pe=Te.year,Me=oe===Ue||oe===ve.toString(),jt=pe===U.year||pe===U.year.toString();return Me&&jt});Ne.length>0?(z(Ne),I&&me(Ne)):et.length>0?(z(et),I&&me(et),J.success(`Loaded ${et.length} price(s) for ${Ue}`)):(z([]),J.info(`No prices found for ${Ue} ${U.year}. Please set prices first.`))}catch(Ue){console.error("Error loading bill prices:",Ue),z([]),B(null),J.error(`Failed to load prices for ${Ce(U.month)}. Check console.`)}},me=(Ue=M)=>{if(!I||!Ue||Ue.length===0){B(null);return}const ve=Ue.find(he=>{const He=he.billrange_id||he.range_id||he.id,et=I.id||I._id;return He&&He.toString()===et.toString()});B(ve||null)},ae=async()=>{let Ue=null;if(Ue=f?.houseId||f?.hse,!Ue||!j){G(ve=>({...ve,previous_reading:"0"}));return}try{W(!0);const ve=await fe.get("/generate-measurable-bills/previous-reading",{params:{house_id:Ue,bill_id:j}});if(ve.data.success){const he=ve.data.data?.current_reading||0;G(He=>({...He,previous_reading:he.toString()}))}}catch(ve){console.error(" Error loading previous reading:",ve),ve.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),G(he=>({...he,previous_reading:"0"}))):(J.error("Could not load previous reading"),G(he=>({...he,previous_reading:"0"})))}finally{W(!1)}},be=async(Ue,ve)=>{const he={...U,[Ue]:parseInt(ve)};G(he);const He=Ue==="month"&&ve!==ne.current,et=Ue==="year"&&ve!==de.current;(He||et)&&(Ue==="month"&&(ne.current=ve),Ue==="year"&&(de.current=ve),z([]),B(null),le(null),te([]),G(Ne=>({...Ne,[Ue]:parseInt(ve),total_amount:"",used_units:""})),H(),ae())},ze=Ue=>{const{name:ve,value:he}=Ue.target;if(ve==="month"||ve==="year"){be(ve,he);return}const He={...U,[ve]:he};if(G(He),ve==="current_reading"){const et=parseFloat(he)||0,Ne=parseFloat(U.previous_reading)||0,Te=et-Ne;if(Te>=0)if(He.used_units=Te.toString(),He.total_amount="",Te>0&&T.length>0&&M.length>0){const{totalAmount:oe,details:pe}=xe(Te);He.total_amount=oe.toFixed(2),Ze(Te,oe,pe)}else le(null),te([]);else J.error("Current reading cannot be less than previous reading")}G(He)},xe=Ue=>{if(!T.length||!M.length)return{totalAmount:0,details:[]};const ve=[...T].sort((Ne,Te)=>parseFloat(Ne.fromRange||Ne.from_range||Ne.from||0)-parseFloat(Te.fromRange||Te.from_range||Te.from||0));let he=parseFloat(Ue),He=0;const et=[];for(let Ne=0;Ne<ve.length&&he>0;Ne++){const Te=ve[Ne],oe=M.find(Ft=>{const Le=Ft.billrange_id||Ft.range_id||Ft.id,lt=Te.id||Te._id;return Le&&Le.toString()===lt.toString()});if(!oe){console.warn(`No price found for range ${Te.id}`);continue}const pe=parseFloat(Te.fromRange||Te.from_range||Te.from||0),Me=Te.toRange?parseFloat(Te.toRange||Te.to_range||Te.to):1/0,jt=parseFloat(oe.unitprice||oe.uniprice||0),Ct=parseFloat(oe.fixedamount||0);let ft=0;if(Me===1/0)ft=he,he=0;else{const Ft=Me-pe+1;Ne===0?Ue<=Ft?ft=Ue:ft=Ft:ft=Math.min(Ft,he),he-=ft}if(ft>0){const Ft=ft*jt+Ct;He+=Ft,et.push({range:`${pe} - ${Me===1/0?"":Me}`,units:ft,unitPrice:jt,fixedAmount:Ct,rangeAmount:Ft,calculation:`${ft}  ${jt} + ${Ct} = ${Ft.toFixed(2)}`})}}return{totalAmount:He,details:et}},Ze=(Ue,ve,he)=>{le({used_units:Ue,total_amount:ve,calculated_at:new Date().toISOString()}),te(he)},je=async()=>{if(!Q){J.error("Please calculate the bill first");return}const Ue=f?.houseId||f?.hse,ve=y?.apartment_id,he=y?.floor_id;if(!Ue||!ve||!he){J.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:Ue,apartmentId:ve,floorId:he,source:k,scannedData:f,houseDetails:y});return}try{$(!0);const He={house_id:Ue,apartment_id:ve,floor_id:he,bill_id:j,year:parseInt(U.year),month:Ce(parseInt(U.month)),previous_reading:parseFloat(U.previous_reading)||0,current_reading:parseFloat(U.current_reading)||0,used_units:parseFloat(U.used_units)||Q.used_units,totalAmount:parseFloat(U.total_amount)||Q.total_amount,due_date:Y||null,source:k},et=await fe.post("/generate-measurable-bills/from-calculation",He);et.data.success?(J.success("Bill generated successfully!"),G({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:U.current_reading,current_reading:"",used_units:"",total_amount:""}),le(null),te([]),setTimeout(()=>{c(`/house-bill-meter/${n}`)},2e3)):J.error(et.data.message||"Failed to generate bill")}catch(He){console.error("Error generating bill:",He);let et="Failed to generate bill";He.response?.data?.message?et=He.response.data.message:He.message&&(et=He.message),J.error(et)}finally{$(!1)}},Je=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];new Date().getFullYear(),N.useEffect(()=>{if(U.used_units&&parseFloat(U.used_units)>0&&T.length>0&&M.length>0){const Ue=parseFloat(U.used_units),{totalAmount:ve,details:he}=xe(Ue);G(He=>({...He,total_amount:ve.toFixed(2)})),Ze(Ue,ve,he)}},[T,M]),N.useEffect(()=>{I&&M.length>0&&me()},[I,M]),N.useEffect(()=>{ee(),ae(),ne.current=U.month,de.current=U.year},[j,f]),N.useEffect(()=>{j&&U.month&&U.year&&T.length>0&&H()},[j,U.month,U.year,T.length]);const Ke=Ce(U.month);return{houseId:y?.house_id||f?.houseId,apartment:y?.apartment?.name||"N/A",floor:y?.floor?.floor_id||"N/A",houseDatabaseId:y?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(Zt,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(ba,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>c(`/house-bill-meter/${n}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",g?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:k==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${k==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:k==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{ee(),H(),ae(),J.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:U.month,onChange:ze,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,children:Je.map(Ue=>e.jsx("option",{value:Ue.value,children:Ue.label},Ue.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:U.year,onChange:ze,min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:Y,onChange:Ue=>X(Ue.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:U.previous_reading,onChange:ze,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,readOnly:!0}),re&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-purple-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:U.current_reading,onChange:ze,placeholder:"Enter current reading",min:U.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",Ke," ",U.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:U.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),U.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(U.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>c(`/measurable-bills/${n}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:je,disabled:!Q||P,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function wk(){const[n,c]=N.useState([]),[o,x]=N.useState(!0),[f,g]=N.useState(""),[y,j]=N.useState(!1),[k,b]=N.useState(!1),{auth:S}=N.useContext(da),E=Vt(),_=async()=>{try{x(!0);const L=await fe.get(`/user-bills/users/${S.user.id}/bills`);L.data.success?c(L.data.data||[]):(J.error("Failed to load bills"),c([]))}catch(L){console.error("Error fetching bills:",L),J.error("Error loading your bills"),c([])}finally{x(!1)}};N.useEffect(()=>{S?.user?.id&&_()},[S?.user?.id]);const T=n.filter(L=>L.bill_name?.toLowerCase().includes(f.toLowerCase())||L.billtype?.toLowerCase().includes(f.toLowerCase())),O=L=>{try{return new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},M=L=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(Nd,{size:12,className:"inline mr-1"})}})[L?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(Ht,{size:12,className:"inline mr-1"})},z={totalBills:n.length,measurableBills:n.filter(L=>L.billtype?.toLowerCase()==="measurable").length},I=L=>{E(`/house-bill-meter/${L}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(Zt,{onCollapse:j})}),k&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${k?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(Zt,{onCollapse:j})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${y?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ga,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:z.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:z.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ar,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:f,onChange:L=>g(L.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:o?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(yt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):T.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ga,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:f?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:f?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:T.map(L=>{const D=M(L.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ga,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:L.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.class}`,children:[D.icon,L.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[L.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Nd,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>I(L.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(jg,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",O(L.assigned_at)]})})]},L.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:T.map(L=>{const D=M(L.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ga,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:L.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.class}`,children:[D.icon,L.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[L.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Nd,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>I(L.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(jg,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",O(L.assigned_at)]})})]},L.id)})})]})}),T.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Ar,{size:20})})})]})})]}),e.jsx(Dt,{position:"top-right",autoClose:3e3})]})}function Nk(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),[f,g]=N.useState("manual"),y=Vt(),{bill_id:j}=os(),k=()=>{y("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(Zt,{onCollapse:c})}),o&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>x(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${o?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(Zt,{onCollapse:c})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:k,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(bs,{size:16})}),e.jsx(Ga,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:k,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(bs,{size:16})}),e.jsx(Ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(H1,{})})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function vk(){const[n,c]=N.useState([]),[o,x]=N.useState([]),[f,g]=N.useState(0),[y,j]=N.useState(0),[k,b]=N.useState(!1),[S,E]=N.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[_,T]=N.useState([]),[O,M]=N.useState([]),[z,I]=N.useState([]),[L,D]=N.useState(null),[B,Y]=N.useState(!1),[X,U]=N.useState(!1),[G,Q]=N.useState(!1),[le,ce]=N.useState(null),[te,re]=N.useState(!1),[W,P]=N.useState(!1),[$,ne]=N.useState(!1),[de,Ce]=N.useState(!1),[ee,H]=N.useState(0),[me,ae]=N.useState(""),be=["","January","February","March","April","May","June","July","August","September","October","November","December"],ze=new Date().getFullYear();Array.from({length:10},(Le,lt)=>(ze-5+lt).toString());const xe=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];N.useEffect(()=>{Ze()},[]);const Ze=async()=>{try{Y(!0);const Le=await fe.get("/apartments");Le.data.success?T(Le.data.data||[]):T([])}catch(Le){console.error("Error loading apartments:",Le),J.error("Failed to load apartments"),T([])}finally{Y(!1)}};N.useEffect(()=>{S.apartment_id?je(S.apartment_id):(M([]),I([]),E(Le=>({...Le,floor_id:"",house_id:""})))},[S.apartment_id]),N.useEffect(()=>{S.floor_id&&S.apartment_id?Je(S.floor_id):(I([]),E(Le=>({...Le,house_id:""})))},[S.floor_id,S.apartment_id]);const je=async Le=>{try{U(!0);const lt=await fe.get(`/floors?apartment_id=${Le}`);lt.data.success?M(lt.data.data||[]):M([])}catch(lt){console.error("Error loading floors:",lt),J.error("Failed to load floors"),M([])}finally{U(!1)}},Je=async Le=>{try{Q(!0);const lt=await fe.get(`/houses?floor_id=${Le}&apartment_id=${S.apartment_id}`);lt.data.success?I(lt.data.data||[]):I([])}catch(lt){console.error("Error loading houses:",lt),J.error("Failed to load houses"),I([])}finally{Q(!1)}};N.useEffect(()=>{if(S.house_id){const Le=setTimeout(()=>{Ke(S.house_id)},100);return()=>clearTimeout(Le)}},[S.house_id,S.year,S.month,S.payment_status]);const Ke=async Le=>{if(!(!Le||!S.apartment_id||!S.floor_id||!S.year))try{b(!0);const lt=z.find(ot=>ot.id===Le),Bt=_.find(ot=>ot.id===S.apartment_id),gt=O.find(ot=>ot.id===S.floor_id);lt&&Bt&&gt&&D({houseNumber:lt.house_id,apartmentName:Bt.name,floorNumber:gt.floor_id,houseId:lt.id});const Wt=S.payment_status.split(",");let Tt=[];for(const ot of Wt){const Ve=new URLSearchParams({house_id:Le,apartment_id:S.apartment_id,floor_id:S.floor_id,year:S.year,payment_status:ot.trim()});S.month&&Ve.append("month",S.month);const st=await fe.get(`/bill-payments?${Ve}`);st.data.success&&(Tt=[...Tt,...st.data.data||[]])}c(Tt),at(Tt);const xr=Tt.filter(ot=>ot.payment_status==="Pending").reduce((ot,Ve)=>ot+(parseFloat(Ve.pendingAmount)||0),0),Lt=Tt.filter(ot=>ot.payment_status==="Partial").reduce((ot,Ve)=>ot+(parseFloat(Ve.pendingAmount)||0),0);g(xr),j(Lt),H(0),ae("");const Qe=Tt.filter(ot=>ot.payment_status==="Pending").length,Yt=Tt.filter(ot=>ot.payment_status==="Partial").length;if(Tt.length>0){let ot=`Found ${Qe} pending and ${Yt} partial bills for House ${lt?.house_id}`;S.month?ot+=` (${S.month} ${S.year})`:ot+=` (Year: ${S.year})`,J.success(ot)}else J.info("No bills found for the selected criteria")}catch(lt){console.error("Error loading bills:",lt),J.error("Failed to load bills"),c([]),x([]),g(0),j(0)}finally{b(!1)}},at=(Le=n)=>{const lt=S.payment_status.split(","),Bt=Le.filter(gt=>lt.includes(gt.payment_status));x(Bt)},Ue=Le=>{E(Tt=>({...Tt,payment_status:Le})),at();const lt=Le.split(","),Bt=n.filter(Tt=>lt.includes(Tt.payment_status)),gt=Bt.filter(Tt=>Tt.payment_status==="Pending").reduce((Tt,xr)=>Tt+(parseFloat(xr.pendingAmount)||0),0),Wt=Bt.filter(Tt=>Tt.payment_status==="Partial").reduce((Tt,xr)=>Tt+(parseFloat(xr.pendingAmount)||0),0);g(gt),j(Wt)},ve=(Le,lt)=>{E(Bt=>{const gt={...Bt,[Le]:lt};return Le==="apartment_id"?(gt.floor_id="",gt.house_id=""):Le==="floor_id"&&(gt.house_id=""),gt})},he=()=>{E({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),T([]),M([]),I([]),c([]),x([]),g(0),j(0),D(null),H(0),ae(""),Ze()},He=Le=>{ce(Le),re(!0)},et=()=>{P(!0)},Ne=()=>{const Le=((f+y)*.5).toFixed(2);H(Le),ae(new Date().toISOString().split("T")[0]),ne(!0)},Te=()=>{re(!1),P(!1),ne(!1),ce(null)},oe=Le=>{const lt=n.map(Wt=>Wt.id===Le.id?Le:Wt);c(lt),at(lt);const Bt=lt.filter(Wt=>Wt.payment_status==="Pending").reduce((Wt,Tt)=>Wt+(parseFloat(Tt.pendingAmount)||0),0),gt=lt.filter(Wt=>Wt.payment_status==="Partial").reduce((Wt,Tt)=>Wt+(parseFloat(Tt.pendingAmount)||0),0);g(Bt),j(gt),Te(),Le.payment_status==="Paid"&&J.success("Payment completed successfully!")},pe=Le=>{const lt=typeof Le=="string"?parseFloat(Le):Le;return isNaN(lt)?"0.00":lt.toFixed(2)},Me=async()=>{try{b(!0);const Le=o.map(Bt=>fe.patch(`/bill-payments/${Bt.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(Bt.paidAmount)+parseFloat(Bt.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all(Le);const lt=f+y;J.success(`Successfully paid ${o.length} bills totaling $${lt.toFixed(2)}`),await Ke(S.house_id),P(!1)}catch(Le){console.error("Error processing total payment:",Le),J.error("Failed to process total payment")}finally{b(!1)}},jt=async()=>{try{b(!0);const Le=f+y,lt=parseFloat(ee);if(lt<=0){J.error("Payment amount must be greater than 0");return}if(lt>Le){J.error(`Payment amount cannot exceed total amount of $${pe(Le)}`);return}const gt=o.map(Wt=>{const xr=(parseFloat(Wt.pendingAmount)||0)/Le,Lt=lt*xr;return{...Wt,additionalPayment:Lt}}).map(Wt=>{const Tt=parseFloat(Wt.paidAmount)+Wt.additionalPayment,xr=parseFloat(Wt.pendingAmount)-Wt.additionalPayment;let Lt="Partial";return xr<=.01?Lt="Paid":Tt>0&&(Lt="Partial"),fe.patch(`/bill-payments/${Wt.id}/status`,{payment_status:Lt,paidAmount:Tt,paid_at:me||new Date().toISOString().split("T")[0]})});await Promise.all(gt),J.success(`Successfully paid $${pe(lt)} across ${o.length} bills`),await Ke(S.house_id),ne(!1)}catch(Le){console.error("Error processing partial payment:",Le),J.error("Failed to process partial payment")}finally{b(!1)}},Ct=Le=>{switch(Le){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},ft=Le=>{switch(Le){case"Paid":return e.jsx(Nr,{size:16,className:"text-green-600"});case"Partial":return e.jsx(Wr,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(Wr,{size:16,className:"text-yellow-600"});default:return null}},Ft=f+y;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:Ce}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${de?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ga,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:he,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:S.year,onChange:Le=>ve("year",Le.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:S.month,onChange:Le=>ve("month",Le.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),be.slice(1).map(Le=>e.jsx("option",{value:Le,children:Le},Le))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:S.apartment_id,onChange:Le=>ve("apartment_id",Le.target.value),disabled:B,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),_.map(Le=>e.jsx("option",{value:Le.id,children:Le.name},Le.id))]}),B&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:S.floor_id,onChange:Le=>ve("floor_id",Le.target.value),disabled:!S.apartment_id||X,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),O.map(Le=>e.jsxs("option",{value:Le.id,children:["Floor ",Le.floor_id]},Le.id))]}),X&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:S.house_id,onChange:Le=>ve("house_id",Le.target.value),disabled:!S.floor_id||G,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),z.map(Le=>e.jsxs("option",{value:Le.id,children:["House ",Le.house_id]},Le.id))]}),G&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:xe.map(Le=>e.jsxs("button",{type:"button",onClick:()=>Ue(Le.value),className:`px-3 py-1 text-sm rounded-lg border ${S.payment_status===Le.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Le.color}`}),Le.label]},Le.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>S.house_id&&Ke(S.house_id),disabled:!S.house_id||!S.year||!S.apartment_id||!S.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Sd,{size:16}),"Load Bills"]})})]}),L&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(ga,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",L.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[L.apartmentName,"  Floor ",L.floorNumber,S.month?`  ${S.month} ${S.year}`:`  Year: ${S.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",S.payment_status==="Pending,Partial"?"Pending & Partial Bills":S.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Pending Bills"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",pe(f)]}),e.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:[n.filter(Le=>Le.payment_status==="Pending").length," bills"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Partial Bills"})]}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-300 font-bold text-2xl",children:["$",pe(y)]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[n.filter(Le=>Le.payment_status==="Partial").length," bills"]})]})]}),k?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nr,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>Ue("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:Ne,disabled:o.length===0||Ft<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qr,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:et,disabled:o.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Qr,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map(Le=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${Ct(Le.payment_status)}`,children:[ft(Le.payment_status),Le.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:Le.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:Le.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[Le.month," ",Le.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",pe(Le.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",pe(Le.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>He(Le),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx(Qr,{size:18})})})})]},Le.id))})]})})]})]})]})})]}),te&&e.jsx(R1,{payment:le,onClose:Te,onUpdate:oe}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx(Qr,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",o.length," selected bills for House ",L?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[o.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",pe(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",pe(y)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[L?.apartmentName," - House ",L?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:S.month?`${S.month} ${S.year}`:`Year: ${S.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",pe(Ft)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>P(!1),disabled:k,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Me,disabled:k,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${pe(Ft)}`})]})]})})}),$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx(Qr,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",o.length," bills for House ",L?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[o.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",pe(Ft)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[L?.apartmentName," - House ",L?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:Le=>{Le.preventDefault(),jt()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Qr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ft,value:ee,onChange:Le=>H(Le.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",pe(Ft)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",pe(Ft-parseFloat(ee||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:me,onChange:Le=>ae(Le.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",pe(ee)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",pe(Ft-parseFloat(ee||0))]})]}),parseFloat(ee||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",o.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>ne(!1),disabled:k,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:k||!ee||parseFloat(ee)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:k?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${pe(ee)}`})]})]})]})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function jk(){const[n,c]=N.useState(""),[o,x]=N.useState(""),[f,g]=N.useState(!1),[y,j]=N.useState(""),k=Vt(),b=async S=>{S.preventDefault(),g(!0),j("");try{const E=await fe.post("/houseowner-auth/login",{email:n,password:o});E.data.success&&(localStorage.setItem("houseOwnerToken",E.data.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(E.data.owner)),k("/houseowner/dashboard"))}catch(E){j(E.response?.data?.message||"Login failed")}finally{g(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"House Owner Login"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Access your apartment management portal"})]}),e.jsxs("form",{onSubmit:b,className:"space-y-6",children:[y&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:y}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:n,onChange:S=>c(S.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:o,onChange:S=>x(S.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx(Ml,{to:"/houseowner/forgot-password",className:"text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? Contact your apartment administrator."})})]})})}function Nn({onCollapse:n}){const[c,o]=N.useState(!0),[x,f]=N.useState(!1),[g,y]=N.useState(null),j=[{title:"Dashboard",icon:e.jsx(Av,{size:20}),path:"/houseowner/dashboard",exact:!0},{title:"My House",icon:e.jsx(ga,{size:20}),path:"/houseowner/houseowner-houseview",exact:!1},{title:"My Bills",icon:e.jsx(Ga,{size:20}),path:"/houseowner/houseowner-billview",exact:!1},{title:"Complaints",icon:e.jsx(Ga,{size:20}),path:"/houseowner/complaints",exact:!1},{title:"Profile",icon:e.jsx(vr,{size:20}),path:"/houseowner/houseowner-profile",exact:!1}],k=_=>{y(g===_?null:_)},b=({item:_})=>{const T=_.exact?location.pathname===_.path:location.pathname.startsWith(_.path);return e.jsx("div",{className:"mb-1",children:_.subItems?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>k(_.title),className:`flex items-center justify-between w-full p-3 rounded-lg transition-colors ${T?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[_.icon,e.jsx("span",{className:"font-medium",children:_.title})]}),g===_.title?e.jsx(Ii,{size:16}):e.jsx(Ri,{size:16})]}),g===_.title&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:_.subItems.map((O,M)=>e.jsx(kx,{to:O.path,className:({isActive:z})=>`block p-2 rounded-lg transition-colors ${z?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>f(!1),children:e.jsx("span",{className:"text-sm",children:O.title})},M))})]}):e.jsxs(kx,{to:_.path,className:({isActive:O})=>`flex items-center gap-3 p-3 rounded-lg transition-colors ${O?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>f(!1),children:[_.icon,e.jsx("span",{className:"font-medium",children:_.title})]})})},S=()=>e.jsx("button",{onClick:()=>f(!x),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white text-gray-800 dark:bg-gray-800  dark:text-gray-300 rounded-lg shadow-lg",children:x?e.jsx(Gt,{size:24}):e.jsx(Ul,{size:24})}),E=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(ga,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"AptSync"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"House Owner Portal"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:j.map((_,T)=>e.jsx(b,{item:_},T))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(S,{}),x&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>f(!1)}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 ${x?"translate-x-0":"-translate-x-full"}`,children:e.jsx(E,{})}),e.jsx("aside",{className:`hidden lg:flex flex-col w-64 bg-white dark:bg-gray-900 border-r dark:border-gray-800 transition-all duration-300 fixed left-0 top-0 h-full z-30 ${c?"translate-x-0":"-translate-x-full"}`,children:e.jsx(E,{})})]})}function vn(){const[n,c]=N.useState(!1),{auth:o,logout:x,resetActivityTimer:f}=N.useContext(da),g=Vt(),[y,j]=N.useState(!1);N.useEffect(()=>{const _=localStorage.getItem("theme"),T=window.matchMedia("(prefers-color-scheme: dark)").matches;_==="dark"||!_&&T?(c(!0),document.documentElement.classList.add("dark")):(c(!1),document.documentElement.classList.remove("dark"))},[]),N.useEffect(()=>{if(!o.accessToken)return;const _=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],T=()=>f();_.forEach(M=>window.addEventListener(M,T,{passive:!0}));const O=()=>{document.hidden||f()};return document.addEventListener("visibilitychange",O),()=>{_.forEach(M=>window.removeEventListener(M,T)),document.removeEventListener("visibilitychange",O)}},[o.accessToken,f]);const k=async()=>{try{await fe.post("/auth/logout"),x(),J.success("Logged out successfully"),g("/")}catch(_){console.error("Logout error:",_),x(),J.success("Logged out successfully"),g("/")}finally{j(!1)}},b=()=>{j(!0)},S=()=>{j(!1)},E=()=>{const _=!n;c(_),_?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:E,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:n?"Switch to light mode":"Switch to dark mode",children:n?e.jsx(Ix,{size:20}):e.jsx(Rx,{size:20})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:o?.user?.name?.charAt(0)?.toUpperCase()||"H"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate max-w-[120px]",children:o?.user?.name||"House Owner"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[120px]",children:o?.user?.email||"user@example.com"})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:o?.user?.name?.charAt(0)?.toUpperCase()||"H"})})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:b,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Dx,{size:20})})})]})]})}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out from the House Owner Portal?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function kk(){const[n,c]=N.useState(!1),[o,x]=N.useState(!0),[f,g]=N.useState(""),[y,j]=N.useState({total:0,pending:0,resolved:0}),[k,b]=N.useState([]),[S,E]=N.useState([]),[_,T]=N.useState(!1),{auth:O}=N.useContext(da);N.useEffect(()=>{const D=()=>{T(window.innerWidth<1024)};return D(),window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),N.useEffect(()=>{M()},[O.accessToken]);const M=async()=>{try{x(!0),g(""),await z(),E([{id:1,message:"Maintenance scheduled for tomorrow",time:"2 hours ago",type:"info"},{id:2,message:"New community notice posted",time:"1 day ago",type:"info"}])}catch(D){console.error("Failed to fetch dashboard data:",D),g("Failed to load dashboard data")}finally{x(!1)}},z=async()=>{try{if(O.accessToken){const D=await fe.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${O.accessToken}`}});if(D.data.success)if(D.data.statistics)j({total:D.data.statistics.total||0,pending:D.data.statistics.pending||0,resolved:D.data.statistics.resolved||0});else{const B=D.data.data||[],Y=B.length,X=B.filter(G=>G.status==="Pending").length,U=B.filter(G=>G.status==="Resolved"||G.status==="Closed").length;j({total:Y,pending:X,resolved:U})}}}catch(D){console.error("Failed to fetch complaint stats:",D)}},I=()=>{window.location.href="/complaints"},L=()=>{window.location.href="/complaints"};return o?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Nn,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?_?"ml-0":"ml-20":_?"ml-0":"ml-64"}`,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Nn,{onCollapse:c}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${n?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ga,{size:_?32:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:`${_?"text-xl":"text-2xl"} font-bold text-gray-800 dark:text-white`,children:"House Owner Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",O.user?.name||"House Owner","!"]})]})]}),e.jsxs("button",{onClick:L,className:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"New Complaint"})]})]}),f&&e.jsx("div",{className:"mb-4 md:mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Da,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:f}),e.jsx("button",{onClick:M,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Complaints"}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(Ht,{size:_?18:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:y.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"All time complaints"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Pending"}),e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Wr,{size:_?18:24,className:"text-yellow-600 dark:text-yellow-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-yellow-600 dark:text-yellow-400`,children:y.pending}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Awaiting resolution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Resolved"}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Nr,{size:_?18:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-green-600 dark:text-green-400`,children:y.resolved}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Issues fixed"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Notifications"}),e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(Wu,{size:_?18:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${_?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:S.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Unread notifications"})]})]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("button",{onClick:L,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500",children:[e.jsx(tr,{className:"mx-auto text-purple-600 dark:text-purple-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"New Complaint"})]}),e.jsxs("button",{onClick:I,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500",children:[e.jsx(Ht,{className:"mx-auto text-blue-600 dark:text-blue-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"View Complaints"})]}),e.jsxs("button",{onClick:()=>window.location.href="/profile",className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-green-400 dark:hover:border-green-500",children:[e.jsx(vr,{className:"mx-auto text-green-600 dark:text-green-400 mb-2",size:_?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"Profile"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200 mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Complaints Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-white dark:from-purple-900/20 dark:to-gray-800 border border-purple-100 dark:border-purple-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-purple-100 dark:bg-purple-900/40 rounded-full mb-3",children:e.jsx(Ht,{size:24,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:y.total}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Complaints"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-yellow-50 to-white dark:from-yellow-900/20 dark:to-gray-800 border border-yellow-100 dark:border-yellow-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-yellow-100 dark:bg-yellow-900/40 rounded-full mb-3",children:e.jsx(Wr,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:y.pending}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-white dark:from-green-900/20 dark:to-gray-800 border border-green-100 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-green-100 dark:bg-green-900/40 rounded-full mb-3",children:e.jsx(Nr,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:y.resolved}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Notifications"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View all"})]}),S.length>0?e.jsx("div",{className:"space-y-3",children:S.map(D=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 flex-shrink-0 ${D.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:D.type==="warning"?e.jsx(Da,{size:_?14:16,className:"text-yellow-600 dark:text-yellow-400"}):e.jsx(Wu,{size:_?14:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:D.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:D.time})]})]})},D.id))}):e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(Wu,{size:_?36:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-3 md:mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Notifications will appear here"})]})]}),_&&e.jsx("div",{className:"h-16"})]})})]})]})}function Ck(){const[n]=Qo(),c=Vt(),[o,x]=N.useState(!0),[f,g]=N.useState(""),[y,j]=N.useState(""),[k,b]=N.useState(!1),[S,E]=N.useState(""),[_,T]=N.useState(""),[O,M]=N.useState(""),[z,I]=N.useState(""),[L,D]=N.useState("");N.useEffect(()=>{const G=n.get("token"),Q=n.get("id");G&&Q?(I(G),M(Q),B(G,Q)):(j("Invalid verification link"),x(!1))},[]);const B=async(G,Q)=>{try{const le=await fe.post("/houseowner-auth/verify",{token:G,id:Q});le.data.success&&(g(le.data.message),le.data.requires_password?b(!0):setTimeout(()=>{c("/login")},2e3))}catch(le){j(le.response?.data?.message||"Verification failed")}finally{x(!1)}},Y=async()=>{if(D(""),S.length<6){D("Password must be at least 6 characters");return}if(S!==_){D("Passwords do not match");return}const G=/[A-Z]/.test(S),Q=/[a-z]/.test(S),le=/\d/.test(S),ce=/[!@#$%^&*(),.?":{}|<>]/.test(S);if(!G||!Q||!le||!ce){D("Password must contain uppercase, lowercase, numbers, and special characters");return}try{x(!0);const te=await fe.post("/houseowner-auth/setup-password",{token:z,id:O,password:S});te.data.success&&(g(te.data.message),b(!1),setTimeout(()=>{c("/login")},3e3))}catch(te){D(te.response?.data?.message||"Failed to set password")}finally{x(!1)}},X=G=>{E(G.target.value),L&&D("")},U=G=>{T(G.target.value),L&&D("")};return o&&!k?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying your email..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-md w-full p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:y?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:y}),e.jsx("button",{onClick:()=>c("/"),className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Homepage"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:k?"Set Your Password":"Email Verified Successfully!"}),f&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:f}),k?e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{type:"password",placeholder:"Enter password",value:S,onChange:X,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"Must be at least 6 characters with uppercase, lowercase, numbers, and special characters"})]}),e.jsx("div",{children:e.jsx("input",{type:"password",placeholder:"Confirm password",value:_,onChange:U,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),L&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:L})}),e.jsx("button",{onClick:Y,disabled:o,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:o?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Setting Password..."]}):"Set Password"})]})}):e.jsx("button",{onClick:()=>c("/login"),className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Login"})]})})})}function Sk(){const[n,c]=N.useState({}),[o,x]=N.useState({}),[f,g]=N.useState([]),[y,j]=N.useState(null),[k,b]=N.useState(null),[S,E]=N.useState([]),[_,T]=N.useState(!0),[O,M]=N.useState(null),[z,I]=N.useState(!1),{auth:L}=N.useContext(da),D=async()=>{try{if(T(!0),M(null),L.accessToken){console.log("Fetching houses with all details...");const G=await fe.get("/houses/owner/me",{headers:{Authorization:`Bearer ${L.accessToken}`,"Content-Type":"application/json"}});if(console.log("API Response with details:",G.data),G.data.success){const Q=G.data.data||[];g(Q);const le={},ce={},te={};Q.forEach(re=>{re.apartment_id&&(le[re.apartment_id]={id:re.apartment_id,name:re.apartment_name,address:re.apartment_address,city:re.apartment_city}),re.floor_id&&(ce[re.floor_id]={id:re.floor_id,floor_id:re.floor_id,floor_number:re.floor_number}),re.housetype_id&&(te[re.housetype_id]={id:re.housetype_id,name:re.house_type_name,sqrfeet:re.house_type_sqrfeet,rooms:re.house_type_rooms,bathrooms:re.house_type_bathrooms})}),c(le),x(ce),E(Object.values(te)),Q.length>0?j(Q[0]):j(null)}else M(G.data.message||"Failed to fetch houses")}else M("No authentication token found. Please log in.")}catch(G){console.error("Failed to fetch house data:",G),G.response?(console.error("Error response:",G.response.data),console.error("Error status:",G.response.status),G.response.status===401?M("Session expired. Please log in again."):G.response.status===403?M("Access denied. You are not authorized as a house owner."):G.response.status===404?M("No houses found for your account."):M(G.response.data?.message||"Failed to load house data")):G.request?M("Network error. Please check your internet connection."):M("An unexpected error occurred.")}finally{T(!1)}};N.useEffect(()=>{D()},[L.accessToken]);const B=G=>{if(!G)return"N/A";const Q=S.find(ce=>ce.id===G);return Q?Q.name:f.find(ce=>ce.housetype_id===G)?.house_type_name||"N/A"},Y=G=>{if(!G)return"N/A";const Q=n[G];return Q?Q.name:f.find(ce=>ce.apartment_id===G)?.apartment_name||"N/A"},X=G=>{if(!G)return"N/A";const Q=o[G];return Q&&Q.floor_number?Q.floor_number:f.find(ce=>ce.floor_id===G)?.floor_number||"N/A"},U=G=>{j(G)};return _?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Nn,{onCollapse:I}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${z?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your house details..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Nn,{onCollapse:I}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${z?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6",children:[e.jsx(ga,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Houses"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your properties"})]})]}),O&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Da,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:O})]})}),f.length>1&&e.jsxs("div",{className:"mb-4 md:mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-3",children:"Select a House"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((G,Q)=>e.jsxs("button",{onClick:()=>U(G),className:`px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base rounded-lg transition-colors ${y?.id===G.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",Q+1,": ",G.house_id]},G.id))})]}),y&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"House Information"}),e.jsx("span",{className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${y.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":y.status==="available"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:y.status?.charAt(0).toUpperCase()+y.status?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Number"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ga,{className:"text-purple-600 dark:text-purple-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:y.house_id||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(er,{className:"text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:y.house_type_name||B(y.housetype_id)})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Floor"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zx,{className:"text-green-600 dark:text-green-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white",children:y.floor_number||X(y.floor_id)})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Apartment Complex"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment Name"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white break-words",children:y.apartment_name||Y(y.apartment_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200 break-words",children:y.apartment_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"City"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:y.apartment_city||"N/A"})]})]}),y.house_type_name&&e.jsxs("div",{className:"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"House Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Square Feet"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:[y.house_type_sqrfeet||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:y.house_type_rooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Bathrooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:y.house_type_bathrooms||"N/A"})]})]})]})]})]}),f.length===0&&!O&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(ga,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function Ak(){const[n,c]=N.useState({}),[o,x]=N.useState({}),[f,g]=N.useState([]),[y,j]=N.useState(null),[k,b]=N.useState([]),[S,E]=N.useState([]),[_,T]=N.useState([]),[O,M]=N.useState(!0),[z,I]=N.useState(!1),[L,D]=N.useState(null),[B,Y]=N.useState(!1),[X,U]=N.useState({totalBills:0,totalPaid:0,totalPending:0,totalAmount:0}),[G,Q]=N.useState({status:"all",month:"all",year:new Date().getFullYear(),house_id:"all"}),{auth:le}=N.useContext(da),ce=async()=>{try{if(M(!0),D(null),le.accessToken){const H=await fe.get("/houses/owner/me",{headers:{Authorization:`Bearer ${le.accessToken}`,"Content-Type":"application/json"}});if(H.data.success){const me=H.data.data||[];g(me);const ae={},be={},ze={};me.forEach(xe=>{xe.apartment_id&&(ae[xe.apartment_id]={id:xe.apartment_id,name:xe.apartment_name,address:xe.apartment_address,city:xe.apartment_city}),xe.floor_id&&(be[xe.floor_id]={id:xe.floor_id,floor_id:xe.floor_id,floor_number:xe.floor_number}),xe.housetype_id&&(ze[xe.housetype_id]={id:xe.housetype_id,name:xe.house_type_name,sqrfeet:xe.house_type_sqrfeet,rooms:xe.house_type_rooms,bathrooms:xe.house_type_bathrooms})}),c(ae),x(be),b(Object.values(ze)),me.length>0?(j(me[0]),te()):j(null)}else D(H.data.message||"Failed to fetch houses")}else D("No authentication token found. Please log in.")}catch(H){console.error("Failed to fetch house data:",H),H.response?.status===401?D("Session expired. Please log in again."):H.response?.status===403?D("Access denied. Please contact administrator."):H.response?.status===404?D("No houses found for your account."):H.request?D("Network error. Please check your internet connection."):D("An unexpected error occurred.")}finally{M(!1)}},te=async()=>{try{I(!0),D(null),console.log(" [Frontend] Fetching bill payments...");const H={};console.log(" [Frontend] Query params:",H);const me=await fe.get("/bill-payments/house-owner/me",{headers:{Authorization:`Bearer ${le.accessToken}`,"Content-Type":"application/json"},params:H});if(console.log(" [Frontend] Response received:",me.data),me.data.success){const ae=me.data.data||[],be=me.data.houses||f;console.log(` [Frontend] Found ${ae.length} bills for ${be.length} houses`),E(ae),T(ae),me.data.houses&&g(be),me.data.summary&&U(me.data.summary),be.length>0&&!y&&j(be[0])}else console.error(" [Frontend] API error:",me.data.message),D(me.data.message||"Failed to fetch bills"),E([]),T([])}catch(H){console.error(" [Frontend] Failed to fetch bill payments:",H);try{const me=await fe.get("/bill-payments/debug/database-state",{headers:{Authorization:`Bearer ${le.accessToken}`,"Content-Type":"application/json"}});console.log(" [Frontend] Debug database state:",me.data)}catch(me){console.error(" [Frontend] Debug endpoint failed:",me)}H.response?(console.error(" [Frontend] Error response:",{status:H.response.status,data:H.response.data,headers:H.response.headers}),H.response.status===401?D("Session expired. Please log in again."):H.response.status===403?D("Access denied. Please contact administrator."):H.response.status===404?(D("No bill payments found for your account."),E([]),T([])):H.response.data?.message?D(H.response.data.message):D(`Server error: ${H.response.status}`)):H.request?(console.error(" [Frontend] No response received:",H.request),D("Network error. Please check your internet connection.")):(console.error(" [Frontend] Request setup error:",H.message),D("An unexpected error occurred: "+H.message))}finally{I(!1)}};N.useEffect(()=>{ce()},[le.accessToken]),N.useEffect(()=>{y&&te()},[y,G]),N.useEffect(()=>{if(!S.length){T([]);return}let H=[...S];G.status!=="all"&&(H=H.filter(me=>me.payment_status===G.status)),G.month!=="all"&&(H=H.filter(me=>me.month===G.month)),G.year!=="all"&&(H=H.filter(me=>me.year.toString()===G.year.toString())),G.house_id!=="all"&&(H=H.filter(me=>me.house_id===G.house_id)),T(H)},[S,G]);const re=H=>{j(H),Q({status:"all",month:"all",year:"all",house_id:H.id})},W=(H,me)=>{Q(ae=>({...ae,[H]:me}))},P=()=>{Q({status:"all",month:"all",year:"all",house_id:y?.id||"all"})},$=H=>{switch(H){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},ne=H=>{switch(H){case"Paid":return e.jsx(Nr,{size:16,className:"text-green-600 dark:text-green-400"});case"Partial":return e.jsx(Qr,{size:16,className:"text-blue-600 dark:text-blue-400"});case"Pending":return e.jsx(Wr,{size:16,className:"text-yellow-600 dark:text-yellow-400"});default:return e.jsx(Wr,{size:16,className:"text-gray-600 dark:text-gray-400"})}},de=["January","February","March","April","May","June","July","August","September","October","November","December"];[...new Set(S.map(H=>H.year))].filter(Boolean).sort((H,me)=>me-H);const ee=(()=>{const H=_.length,me=_.reduce((ze,xe)=>ze+(parseFloat(xe.totalAmount)||0),0),ae=_.reduce((ze,xe)=>ze+(parseFloat(xe.paidAmount)||0),0),be=_.reduce((ze,xe)=>ze+(parseFloat(xe.pendingAmount)||0),0);return{totalBills:H,totalAmount:me,paidAmount:ae,pendingAmount:be}})();return O?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Nn,{onCollapse:Y}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${B?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Nn,{onCollapse:Y}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${B?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ga,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Bills"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your bills"})]})]})}),L&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Da,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:L})]})}),f.length>1&&e.jsxs("div",{className:"lg:hidden mb-4 bg-white dark:bg-gray-800 rounded-lg shadow p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-white mb-2",children:"Select House to View Bills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:f.map((H,me)=>e.jsxs("button",{onClick:()=>re(H),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${y?.id===H.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",H.house_id||me+1]},H.id))})]}),y&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Current House Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(er,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:y.apartment_name}),e.jsx(ga,{size:18,className:"text-gray-500 dark:text-gray-400 ml-2"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["House ",y.house_id,", Floor ",y.floor_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:ee.totalBills})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ga,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:["$",ee.totalAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Qr,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:["$",ee.paidAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:["$",ee.pendingAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Wr,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Bills"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ud,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[_.length," of ",S.length," bills"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Payment Status"}),e.jsxs("select",{value:G.status,onChange:H=>W("status",H.target.value),className:"w-full px-3 text-gray-600 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Month"}),e.jsxs("select",{value:G.month,onChange:H=>W("month",H.target.value),className:"w-full px-3 py-2 text-gray-600 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Months"}),de.map(H=>e.jsx("option",{value:H,children:H},H))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Year"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:G.year,onChange:H=>W("year",H.target.value),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House"}),e.jsxs("select",{value:G.house_id,onChange:H=>W("house_id",H.target.value),className:"w-full px-3 py-2 text-gray-600 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Houses"}),f.map(H=>e.jsxs("option",{value:H.id,children:["House ",H.house_id," - Floor ",H.floor_number]},H.id))]})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:P,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:z?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ga,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:S.length===0?"No bills have been generated for your houses yet.":"No bills match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:_.map((H,me)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:H.bill_name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Type: ",H.billtype]}),H.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:H.description})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[H.month," ",H.year]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",H.due_date?new Date(H.due_date).toLocaleDateString():"Not set"]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Total: $",(parseFloat(H.totalAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",(parseFloat(H.paidAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",(parseFloat(H.pendingAmount)||0).toFixed(2)]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[ne(H.payment_status),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${$(H.payment_status)}`,children:H.payment_status})]})})]},H.id||me))})]})})})]}),f.length===0&&!L&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(ga,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function Ek(){const[n,c]=N.useState([]),[o,x]=N.useState([]),[f,g]=N.useState(!0),[y,j]=N.useState(!1),[k,b]=N.useState(!1),[S,E]=N.useState(null),[_,T]=N.useState([]),[O,M]=N.useState({title:"",description:"",category_id:"",apartment_id:"",floor_id:"",house_id:""}),[z,I]=N.useState({}),[L,D]=N.useState({status:"all"}),[B,Y]=N.useState({total:0,pending:0,resolved:0}),{auth:X}=N.useContext(da),[U,G]=N.useState(!1),[Q,le]=N.useState(null),[ce,te]=N.useState(!1),[re,W]=N.useState({rating:0,feedback:""}),[P,$]=N.useState(""),[ne,de]=N.useState(!1),[Ce,ee]=N.useState(null),H=async()=>{try{const ve=await fe.get("/categories",{headers:{Authorization:`Bearer ${X.accessToken}`}});ve.data.success&&T(ve.data.data||[]);const he=await fe.get("/houses/owner/me",{headers:{Authorization:`Bearer ${X.accessToken}`}});if(he.data.success&&he.data.data.length>0){const He=he.data.data[0];le(He),M(et=>({...et,apartment_id:He.apartment_id,floor_id:He.floor_id,house_id:He.id}))}else J.warning("No house information found. Please contact your apartment administrator.")}catch(ve){console.error("Failed to fetch house owner info:",ve),J.error("Failed to load your information. Please try again.")}},me=async()=>{try{g(!0);const ve=await fe.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${X.accessToken}`},params:L});ve.data.success&&(c(ve.data.data||[]),x(ve.data.data||[]),Y(ve.data.statistics||{total:0,pending:0,resolved:0}))}catch(ve){console.error("Failed to fetch complaints:",ve),J.error("Failed to load complaints. Please try again.")}finally{g(!1)}};N.useEffect(()=>{X.accessToken&&(H(),me())},[X.accessToken,L]),N.useEffect(()=>{if(!n.length){x([]);return}let ve=[...n];L.status!=="all"&&(ve=ve.filter(he=>he.status===L.status)),x(ve)},[n,L]);const ae=async ve=>{ve.preventDefault();const he={};if(O.title.trim()||(he.title="Title is required"),O.description.trim()||(he.description="Description is required"),O.category_id||(he.category_id="Please select a category"),Object.keys(he).length>0){I(he);return}if(!O.house_id){J.error("No house information found. Please contact your apartment administrator.");return}try{(await fe.post("/complaints",{title:O.title,description:O.description,category_id:O.category_id,apartment_id:O.apartment_id,floor_id:O.floor_id,house_id:O.house_id},{headers:{Authorization:`Bearer ${X.accessToken}`,"Content-Type":"application/json"}})).data.success&&(J.success("Complaint filed successfully!"),j(!1),be(),me())}catch(He){console.error("Failed to create complaint:",He);const et=He.response?.data?.message||"Failed to create complaint";J.error(et)}},be=()=>{M({title:"",description:"",category_id:"",apartment_id:Q?.apartment_id||"",floor_id:Q?.floor_id||"",house_id:Q?.id||""}),I({})},ze=ve=>{switch(ve){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},xe=ve=>{switch(ve){case"Pending":return e.jsx(Wr,{className:"text-yellow-600 dark:text-yellow-400 mr-2",size:16});case"In Progress":return e.jsx(_d,{className:"text-blue-600 dark:text-blue-400 mr-2",size:16});case"Resolved":return e.jsx(Nr,{className:"text-green-600 dark:text-green-400 mr-2",size:16});case"Closed":return e.jsx(Ll,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16});case"Rejected":return e.jsx(mj,{className:"text-red-600 dark:text-red-400 mr-2",size:16});default:return e.jsx(Ht,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16})}},Ze=async ve=>{if(E(ve),b(!0),ve.status==="Closed")try{const he=await fe.get(`/complaints/${ve.id}/rating-status`,{headers:{Authorization:`Bearer ${X.accessToken}`}});he.data.success&&he.data.canRate&&(ee(ve),de(!0))}catch(he){console.error("Error checking rating status:",he)}},je=async ve=>{try{const he=await fe.post(`/complaints/${ve}/close`,{},{headers:{Authorization:`Bearer ${X.accessToken}`}});he.data.success&&(J.success("Complaint closed successfully!"),he.data.requiresRating&&(ee(S),te(!0)),me(),b(!1))}catch(he){console.error("Failed to close complaint:",he),J.error(he.response?.data?.message||"Failed to close complaint")}},Je=async ve=>{try{(await fe.post(`/complaints/${ve}/reopen`,{},{headers:{Authorization:`Bearer ${X.accessToken}`}})).data.success&&(J.success("Complaint reopened successfully!"),me(),b(!1))}catch(he){console.error("Failed to reopen complaint:",he),J.error(he.response?.data?.message||"Failed to reopen complaint")}},Ke=async ve=>{if(ve.preventDefault(),!re.rating){$("Please select a rating");return}try{(await fe.post(`/ratings/complaints/${Ce.id}/rate`,{rating:re.rating,feedback:re.feedback},{headers:{Authorization:`Bearer ${X.accessToken}`}})).data.success&&(J.success("Thank you for your feedback!"),te(!1),de(!1),W({rating:0,feedback:""}),$(""),me())}catch(he){console.error("Failed to submit rating:",he),J.error(he.response?.data?.message||"Failed to submit rating")}},at=ve=>{const he=_.find(He=>He.id===ve);return he?he.color:"gray"},Ue=ve=>new Date(ve).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return f&&!n.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Nn,{onCollapse:G}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${U?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Nn,{onCollapse:G}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${U?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(vn,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Da,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Report and track maintenance issues"})]})]}),e.jsxs("button",{onClick:()=>j(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!Q,children:[e.jsx(tr,{size:20}),e.jsx("span",{children:"File New Complaint"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:B.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ht,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:B.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Wr,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:B.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ud,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o.length," of ",n.length," complaints"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:L.status,onChange:ve=>D(he=>({...he,status:ve.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Da,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:n.length===0?"You haven't filed any complaints yet.":"No complaints match your filter criteria."}),n.length===0&&e.jsx("button",{onClick:()=>j(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!Q,children:"File Your First Complaint"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map(ve=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:ve.complaint_number}),ve.category_name&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${at(ve.category_id)}20`,color:at(ve.category_id)},children:ve.category_name})]}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-2",children:ve.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:ve.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[e.jsx(er,{size:12,className:"mr-1"}),ve.apartment_name,"  Floor ",ve.floor_number,"  House ",ve.house_number]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[xe(ve.status),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ze(ve.status)}`,children:ve.status})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:Ue(ve.created_at)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Ze(ve),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Details",children:e.jsx(Ht,{size:16})})})})]},ve.id))})]})})})]})})]}),y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"File New Complaint"}),e.jsx("button",{onClick:()=>{j(!1),be()},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),Q?e.jsxs("form",{onSubmit:ae,children:[e.jsx("div",{className:"mb-6"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Category *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:O.category_id,onChange:ve=>{M(he=>({...he,category_id:ve.target.value})),z.category_id&&I(he=>({...he,category_id:""}))},className:"w-full px-3 py-2 pl-10 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white appearance-none",children:[e.jsx("option",{value:"",children:"Select a category"}),_.map(ve=>e.jsx("option",{value:ve.id,children:ve.name},ve.id))]}),e.jsx(f1,{className:"absolute left-3 top-2.5 text-gray-400",size:16})]}),z.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:z.category_id}),_.length===0&&e.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"No categories available. Please contact your administrator."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Title *"}),e.jsx("input",{type:"text",value:O.title,onChange:ve=>{M(he=>({...he,title:ve.target.value})),z.title&&I(he=>({...he,title:""}))},className:"w-full px-3 py-2 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief description of the issue"}),z.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:z.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Detailed Description *"}),e.jsx("textarea",{value:O.description,onChange:ve=>{M(he=>({...he,description:ve.target.value})),z.description&&I(he=>({...he,description:""}))},rows:4,className:"w-full px-3 py-2 border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed information about the issue..."}),z.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:z.description}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Be specific about the issue. Include details like location, severity, and any photos if possible."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{j(!1),be()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Complaint"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ga,{className:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:40}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No House Information Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please contact your apartment administrator to assign a house to your account."}),e.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})]})})}),k&&S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Complaint Details"}),e.jsx("button",{onClick:()=>b(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:S.complaint_number}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ze(S.status)}`,children:S.status}),S.category_name&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${at(S.category_id)}20`,color:at(S.category_id)},children:S.category_name})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-3",children:S.title})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Filed:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Ue(S.created_at)})]}),S.assigned_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Assigned:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Ue(S.assigned_at)})]}),S.resolved_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Ue(S.resolved_at)})]}),S.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:Ue(S.updated_at)})]})]})})]})}),S.assigned_to_name&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx(vs,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:S.assigned_to_name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:S.assigned_to_role}),S.assignment_notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 italic border-l-2 border-blue-500 pl-2",children:["Note: ",S.assignment_notes]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Description"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:S.description})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Update Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[S.status==="Resolved"&&e.jsx("button",{onClick:()=>je(S.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Verified & Close"}),S.status==="Resolved"&&e.jsx("button",{onClick:()=>Je(S.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"Reopen - Issue Not Resolved"}),S.status==="Closed"&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:"This complaint is closed and cannot be reopened."})]})]}),ce&&Ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Rate Your Experience"}),e.jsx("button",{onClick:()=>{te(!1),W({rating:0,feedback:""}),$("")},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:Ce.complaint_number})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:Ce.title})]})}),e.jsxs("form",{onSubmit:Ke,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"How would you rate the service? *"}),e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(ve=>e.jsx("button",{type:"button",onClick:()=>{W(he=>({...he,rating:ve})),P&&$("")},className:`text-3xl ${ve<=re.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`,children:""},ve))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("span",{children:"Poor"}),e.jsx("span",{children:"Excellent"})]}),P&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:P})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:re.feedback,onChange:ve=>W(he=>({...he,feedback:ve.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about your experience..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{te(!1),W({rating:0,feedback:""}),$("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Skip"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Rating"})]})]})]})})}),ne&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-purple-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(lj,{size:24,className:"text-yellow-300"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold",children:"Rate Your Experience"}),e.jsxs("p",{className:"text-sm mt-1",children:["Please rate the service for complaint ",Ce?.complaint_number]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{te(!0),de(!1)},className:"px-3 py-1 bg-white text-purple-600 rounded text-sm font-medium hover:bg-gray-100 transition-colors",children:"Rate Now"}),e.jsx("button",{onClick:()=>de(!1),className:"px-3 py-1 bg-transparent border border-white rounded text-sm hover:bg-purple-700 transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>de(!1),className:"ml-4 text-white hover:text-gray-200",children:""})]})}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})})]})})}),e.jsx(Dt,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function _k(){const[n,c]=N.useState(!1),[o,x]=N.useState([]),[f,g]=N.useState([]),[y,j]=N.useState(!0),[k,b]=N.useState(""),[S,E]=N.useState({status:"all",apartment_id:"all",category:"all"}),[_,T]=N.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:O}=N.useContext(da),[M,z]=N.useState([]),[I,L]=N.useState([]),D=async()=>{try{const te=await fe.get("/apartments");te.data.success&&L(te.data.data||[])}catch(te){console.error("Error loading apartments:",te),J.error("Failed to load apartments")}},B=async()=>{try{j(!0);const te=await fe.get("/complaints",{headers:{Authorization:`Bearer ${O.accessToken}`},params:S});if(te.data.success){const re=te.data.data||[];if(x(re),g(re),Y(re),re.length>0){const W=[...new Set(re.map(P=>P.category).filter(P=>P&&P.trim()!=="").sort())];W.includes("General")||W.unshift("General"),z(W)}}}catch(te){console.error("Failed to fetch complaints:",te),J.error("Failed to load complaints")}finally{j(!1)}};N.useEffect(()=>{O.accessToken&&(D(),B())},[O.accessToken,S]),N.useEffect(()=>{if(!o.length){g([]);return}let te=[...o];if(k){const re=k.toLowerCase();te=te.filter(W=>W.complaint_number?.toLowerCase().includes(re)||W.title?.toLowerCase().includes(re)||W.houseowner_name&&W.houseowner_name.toLowerCase().includes(re)||W.apartment_name&&W.apartment_name.toLowerCase().includes(re))}S.status!=="all"&&(te=te.filter(re=>re.status===S.status)),S.apartment_id!=="all"&&(te=te.filter(re=>re.apartment_id===S.apartment_id)),S.category!=="all"&&(te=te.filter(re=>re.category===S.category)),g(te)},[o,k,S]);const Y=te=>{const re=te.length,W=te.filter(ne=>ne.status==="Pending").length,P=te.filter(ne=>ne.status==="In Progress").length,$=te.filter(ne=>ne.status==="Resolved"||ne.status==="Closed").length;T({total:re,pending:W,in_progress:P,resolved:$})},X=te=>{switch(te){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},U=te=>{switch((te||"").toLowerCase()){case"water":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"electricity":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"gas":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"plumbing":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300";case"carpentry":return"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300";case"general":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},G=te=>{if(!te)return"N/A";try{return new Date(te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},Q=(te,re)=>{if(!te||!re)return"N/A";try{const W=new Date(te),$=(re==="now"?new Date:new Date(re))-W,ne=Math.floor($/(1e3*60*60*24)),de=Math.floor($%(1e3*60*60*24)/(1e3*60*60)),Ce=Math.floor($%(1e3*60*60)/(1e3*60));return ne>0?`${ne}d ${de}h`:de>0?`${de}h ${Ce}m`:Ce>0?`${Ce}m`:"Just now"}catch{return"N/A"}},le=te=>{if(!te||te===0)return"N/A";const re=Math.floor(te/3600),W=Math.floor(te%3600/60);return re>0?`${re}h ${W}m`:`${W}m`},ce=()=>{b(""),E({status:"all",apartment_id:"all",category:"all"})};return y?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Zt,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"ml-20":"ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Da,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"All Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and manage all complaints"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:_.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ht,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:_.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Wr,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:_.in_progress})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(_d,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved/Closed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:_.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Nr,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter & Search Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ud,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[f.length," of ",o.length," complaints"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ar,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:k,onChange:te=>b(te.target.value),placeholder:"Search by complaint number, title, or house owner...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),e.jsx("div",{children:e.jsxs("select",{value:S.status,onChange:te=>E(re=>({...re,status:te.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsxs("select",{value:S.apartment_id,onChange:te=>E(re=>({...re,apartment_id:te.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Apartments"}),I.map(te=>e.jsx("option",{value:te.id,children:te.name},te.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:S.category_id||"all",onChange:te=>E(re=>({...re,category_id:te.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),M.map(te=>e.jsx("option",{value:te.category_id,children:te.category_name},te.category_id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ce,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:f.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Da,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:o.length===0?"No complaints have been filed yet.":"No complaints match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Timeline & Rating"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:f.map(te=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:te.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:te.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:te.description}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${U(te.category)}`,children:te.category||"General"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["By: ",te.houseowner_name||"Unknown"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",G(te.created_at)]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:te.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",te.floor_number,"  House ",te.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${X(te.status)}`,children:te.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[te.resolved_at?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[e.jsx(qN,{size:14,className:"mr-1"}),"Resolved: ",G(te.resolved_at)]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Duration: ",Q(te.created_at,te.resolved_at)]})]}):e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Open for: ",Q(te.created_at,"now")]}),te.total_work_time>0&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center",children:[e.jsx(g1,{size:12,className:"mr-1"}),"Work Time: ",le(te.total_work_time)]})]})})]},te.id))})]})})})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function Tk(){const[n,c]=N.useState([]),[o,x]=N.useState([]),[f,g]=N.useState(!0),[y,j]=N.useState(""),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState({status:"all"}),[O,M]=N.useState({total:0,pending:0,in_progress:0,resolved:0}),[z,I]=N.useState({}),{auth:L}=N.useContext(da),D=Vt(),[B,Y]=N.useState([]),[X,U]=N.useState([]),[G,Q]=N.useState(!1),[le,ce]=N.useState("pending"),te=async()=>{try{const ae=await fe.get(`/user-apartments/users/${L.user.id}/apartments`);ae.data.success?Y(ae.data.data||[]):(J.error("Failed to load apartments"),Y([]))}catch(ae){console.error("Error fetching apartments:",ae),J.error("Error loading your apartments"),Y([])}},re=async()=>{try{Q(!0);const ae=await fe.get(`/technician-categories/technicians/${L.user.id}/categories`,{headers:{Authorization:`Bearer ${L.accessToken}`}});ae.data.success?U(ae.data.data||[]):(console.error("Failed to load assigned categories:",ae.data.message),U([]))}catch(ae){console.error("Error fetching assigned categories:",ae),U([])}finally{Q(!1)}},W=async()=>{try{g(!0);const ae=await fe.get("/complaints/my-complaints/technician",{headers:{Authorization:`Bearer ${L.accessToken}`},params:_});if(ae.data.success){const be=ae.data.data||[];c(be),x(be),ae.data.statistics&&M(ae.data.statistics)}else console.error("Failed to load complaints:",ae.data.message),c([]),x([])}catch(ae){console.error("Error fetching complaints:",ae),c([]),x([])}finally{g(!1)}};N.useEffect(()=>{L?.user?.id&&(async()=>(await Promise.all([te(),re()]),L?.accessToken&&W()))()},[L?.user?.id]);const P=async ae=>{try{D(`/my-work/${ae.id}`,{state:{complaint:ae}})}catch(be){console.error("Error navigating to my work:",be),J.error("Failed to start work")}};N.useEffect(()=>{L?.accessToken&&B.length>0&&W()},[L?.accessToken,B,_]),N.useEffect(()=>{if(!n.length){x([]);return}let ae=n.filter(be=>be.complaint_number?.toLowerCase().includes(y.toLowerCase())||be.title?.toLowerCase().includes(y.toLowerCase())||be.description?.toLowerCase().includes(y.toLowerCase())||be.houseowner_name?.toLowerCase().includes(y.toLowerCase())||be.apartment_name?.toLowerCase().includes(y.toLowerCase()));x(ae)},[n,y]);const $=ae=>{try{return new Date(ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},ne=ae=>{switch(ae){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},de=ae=>{if(!ae.category_name&&!ae.category_id)return null;const be=X.find(ze=>ze.category_id===ae.category_id);return be?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${be.category_color}20`,color:be.category_color},children:ae.category_name||"Uncategorized"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:ae.category_name||"Uncategorized"})},Ce=(ae,be)=>{T(ze=>({...ze,[ae]:be}))},ee=()=>{T({status:"all"}),j("")},H=ae=>ae.status==="Resolved"||ae.status==="Closed"?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"})}):ae.status==="Pending"||ae.status==="In Progress"||ae.is_on_hold?e.jsxs("button",{onClick:()=>P(ae),className:"flex items-center justify-center gap-1 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors w-full",title:ae.is_on_hold?"Resume from Hold":"Start Work",children:[e.jsx(x1,{size:16}),e.jsx("span",{children:ae.is_on_hold?"Resume Work":"Start Work"})]}):null,me=()=>G?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Loading your assigned categories..."})]}):B.length===0&&X.length===0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Da,{className:"text-yellow-600 dark:text-yellow-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No assignments found"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:"You need to be assigned to apartments and categories to see complaints."})]})]})}):e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:["Assigned Categories: ",X.length]})}),X.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[X.slice(0,3).map(ae=>e.jsx("span",{className:"px-4 py-2 text-xs rounded-full font-medium bg-gray-400 dark:bg-gray-300",style:{color:ae.category_color},children:ae.category_name},ae.category_id)),X.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400",children:["+",X.length-3," more"]})]})]});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(Zt,{onCollapse:b})}),S&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>E(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${S?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(Zt,{onCollapse:b})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${k?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{onMobileMenuClick:()=>E(!0)}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Da,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Complaints assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:O.total})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Da,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View complaints from your assigned apartments and categories"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6",children:me()}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ar,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints by number, title, or house owner...",value:y,onChange:ae=>j(ae.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{children:e.jsxs("select",{value:_.status,onChange:ae=>Ce("status",ae.target.value),className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",o.length," of ",n.length," complaints"]}),(_.status!=="all"||y)&&e.jsx("button",{onClick:ee,className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:"Clear filters"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Da,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:y?"No matching complaints found":"No complaints available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:y?"Try adjusting your search terms":B.length===0?"You are not assigned to any apartments":X.length===0?"You are not assigned to any complaint categories":"No complaints match your assigned apartments and categories"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:o.map(ae=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Da,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base",children:ae.complaint_number}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 truncate",children:ae.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ne(ae.status)}`,children:[ae.status,ae.is_on_hold&&" (On Hold)"]}),de(ae)]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(er,{size:14,className:"mr-2"}),e.jsx("span",{className:"truncate",children:ae.apartment_name||"Unknown"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(Bl,{size:14,className:"mr-2"}),e.jsxs("span",{children:["Floor ",ae.floor_number,"  House ",ae.house_number]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(vr,{size:14,className:"mr-2"}),e.jsxs("span",{className:"truncate",children:["House Owner: ",ae.houseowner_name||"Unknown"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:ae.description})}),e.jsx("div",{className:"mb-4",children:H(ae)}),e.jsx("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",$(ae.created_at)]}),ae.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",$(ae.assigned_at)]})]})})]},ae.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Hold Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:o.map(ae=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ae.complaint_number}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mt-1",children:ae.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:ae.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["House Owner: ",ae.houseowner_name||"Unknown"]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:ae.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",ae.floor_number,"  House ",ae.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:de(ae)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ne(ae.status)}`,children:ae.status}),ae.is_on_hold&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"On Hold"})})]}),e.jsx("td",{className:"px-4 py-4",children:H(ae)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:$(ae.created_at)}),ae.assigned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",$(ae.assigned_at)]})]})]},ae.id))})]})})]})}),o.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Ar,{size:20})})})]})})]})]})}function Mk(){const[n,c]=N.useState(!1),[o,x]=N.useState(null),[f,g]=N.useState(!0),[y,j]=N.useState(!1),[k,b]=N.useState({name:"",country:"",mobile:"",nic:"",occupation:""}),{auth:S}=N.useContext(da);N.useEffect(()=>{E()},[]);const E=async()=>{try{g(!0),console.log("Fetching house owner profile...");const L=await fe.get("/auth/me");if(console.log("House owner profile response:",L.data),L.data.success&&L.data.data&&L.data.data.length>0){const D=L.data.data[0];x(D),b({name:D.name||`${D.firstname||""} ${D.lastname||""}`.trim(),country:D.country||"",mobile:D.mobile||"",nic:D.nic||"",occupation:D.occupation||""})}else J.error("No profile data found")}catch(L){console.error("Error fetching house owner profile:",L),J.error("Failed to load profile")}finally{g(!1)}},_=()=>{j(!0)},T=()=>{j(!1),o&&b({name:o.name||`${o.firstname||""} ${o.lastname||""}`.trim(),country:o.country||"",mobile:o.mobile||"",nic:o.nic||"",occupation:o.occupation||""})},O=async()=>{try{console.log("Updating house owner profile:",k);const L=await fe.put(`/auth/users/${o.id}`,k);L.data.success?(x(D=>({...D,...L.data.data,name:k.name})),j(!1),J.success("Profile updated successfully"),E()):J.error(L.data.message||"Failed to update profile")}catch(L){console.error("Error updating house owner profile:",L),J.error(L.response?.data?.message||"Failed to update profile")}},M=L=>{const{name:D,value:B}=L.target;b(Y=>({...Y,[D]:B}))},z=L=>{if(!L)return"Not available";try{return new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};if(f)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!o)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(vr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"}),e.jsx("button",{onClick:E,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]})});const I=()=>{if(o.name){const L=o.name.split(" ");return L.length>=2?(L[0].charAt(0)+L[1].charAt(0)).toUpperCase():o.name.charAt(0).toUpperCase()}return o.firstname?.charAt(0)?.toUpperCase()||"H"};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(Nn,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${n?"md:ml-20":"md:ml-64"}`,children:[e.jsx(vn,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(vr,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"My Profile"}),e.jsx("span",{className:"ml-3 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded-full",children:"House Owner"})]}),y?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(Gt,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:O,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(Hd,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save Changes"})]})]}):e.jsxs("button",{onClick:_,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Pa,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsx("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:I()})}),e.jsx("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:o.name||`${o.firstname||""} ${o.lastname||""}`.trim()}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:"House Owner"}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(nl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",z(o.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${o.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:o.is_verified?"Verified":"Pending Verification"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${o.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:o.is_active?"Active":"Inactive"})]})]}),(o.apartment_name||o.house_number||o.floor_number)&&e.jsxs("div",{className:"mt-4 md:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 mb-2 md:mb-3 flex items-center",children:[e.jsx(ga,{size:16,className:"md:size-4 mr-2"}),"Property Information"]}),e.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[o.apartment_name&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Di,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Apartment: ",o.apartment_name]})]}),o.house_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ga,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["House No: ",o.house_number]})]}),o.floor_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Di,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["Floor: ",o.floor_number]})]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(vr,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Full Name"]}),y?e.jsx("input",{type:"text",name:"name",value:k.name,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.name||`${o.firstname||""} ${o.lastname||""}`.trim()||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Ht,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"NIC Number"]}),y?e.jsx("input",{type:"text",name:"nic",value:k.nic,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter NIC number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.nic||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Cd,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Occupation"]}),y?e.jsx("input",{type:"text",name:"occupation",value:k.occupation,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your occupation"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.occupation||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Bl,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),y?e.jsx("input",{type:"text",name:"country",value:k.country,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your country"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Fi,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),y?e.jsx("input",{type:"tel",name:"mobile",value:k.mobile,onChange:M,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter mobile number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(ll,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email Address"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:o.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Ll,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Account Type"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:"House Owner"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6 mt-4 md:mt-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Verification Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${o.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:o.is_verified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Account Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${o.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:o.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:z(o.created_at)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Profile Update"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:o.updated_at?z(o.updated_at):"Not updated yet"})]})]})]})]})]})]})})]}),e.jsx(Dt,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function Dk({complaint:n,onClose:c,onHoldSuccess:o}){const[x,f]=N.useState(""),[g,y]=N.useState(""),[j,k]=N.useState(!1),[b,S]=N.useState(""),{auth:E}=N.useContext(da),_=["Waiting for parts/equipment","Need specialist assistance","Material shortage","Weather conditions","Safety concerns","Access issues","Waiting for approval","Other"],T=async z=>{if(z.preventDefault(),!x.trim()){J.error("Please provide a reason for placing the complaint on hold");return}try{k(!0);const I=await fe.post(`/complaints/${n.id}/hold`,{reason:x,expected_resolution_date:g||null},{headers:{Authorization:`Bearer ${E.accessToken}`}});I.data.success?(J.success("Complaint placed on hold successfully"),o(),c()):J.error(I.data.message||"Failed to place complaint on hold")}catch(I){console.error("Error holding complaint:",I),J.error(I.response?.data?.message||"Failed to place complaint on hold")}finally{k(!1)}},O=z=>{S(z),f(z==="Other"?"":z)},M=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:e.jsx(Gt,{size:20})}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg mr-3",children:e.jsx(Da,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Hold Complaint"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:n.complaint_number})]}),e.jsxs("form",{onSubmit:T,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Common Reasons"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(z=>e.jsx("button",{type:"button",onClick:()=>O(z),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${b===z?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900 dark:text-purple-300 dark:border-purple-700":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,children:z},z))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hold Reason Details"}),e.jsx("textarea",{value:x,onChange:z=>{f(z.target.value),z.target.value!==b&&S("")},rows:"4",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Describe why you need to hold this complaint...",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Resolution Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",value:g,onChange:z=>y(z.target.value),min:M,className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"When do you expect to resume work on this complaint?"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Da,{size:18,className:"text-yellow-600 dark:text-yellow-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," The complaint timer will be paused while on hold. You will need to resume the complaint before completing the work."]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:j,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:j||!x.trim(),className:"px-4 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Da,{size:18}),"Place on Hold"]})})]})]})]})})}function V1(){const{complaintId:n}=os(),c=js(),[o,x]=N.useState(c.state?.complaint||null),[f,g]=N.useState(!1),[y,j]=N.useState(null),[k,b]=N.useState(!1),[S,E]=N.useState(!1),[_,T]=N.useState(""),[O,M]=N.useState(null),[z,I]=N.useState(""),[L,D]=N.useState(!1),[B,Y]=N.useState(0),[X,U]=N.useState("environment"),G=N.useRef(null),Q=Vt(),{auth:le}=N.useContext(da),ce=N.useRef(null),[te,re]=N.useState(!1),[W,P]=N.useState(!1),[$,ne]=N.useState(!1),[de,Ce]=N.useState(!1),[ee,H]=N.useState(null),[me,ae]=N.useState(!1);N.useEffect(()=>{const Te=async()=>{if(!o&&n)try{b(!0);const oe=await fe.get(`/complaints/${n}`,{headers:{Authorization:`Bearer ${le.accessToken}`}});oe.data.success?x(oe.data.data):(J.error("Failed to load complaint details"),Q("/my-complaints"))}catch(oe){console.error("Error fetching complaint:",oe),J.error("Error loading complaint information"),Q("/my-complaints")}finally{b(!1)}};le?.accessToken&&n&&Te()},[n,le?.accessToken,o,Q]);const be=async Te=>{try{if(!Te)return{access:!1,reason:"Invalid house ID"};const oe=await fe.get(`/houses/${Te}`);if(!oe.data.success||!oe.data.data)return{access:!1,reason:"House not found in the system"};const pe=oe.data.data;if(o&&o.house_id!==pe.id)return{access:!1,reason:`This house (${pe.house_id}) does not match the complaint's house (House ${o.house_number})`};let Me=null;if(pe.apartment_id)try{const ft=await fe.get(`/apartments/${pe.apartment_id}`);ft.data.success&&(Me=ft.data.data)}catch(ft){console.error("Error fetching apartment:",ft)}let jt=null;if(pe.floor_id)try{const ft=await fe.get(`/floors/${pe.floor_id}`);ft.data.success&&(jt=ft.data.data)}catch(ft){console.error("Error fetching floor:",ft)}const Ct={...pe,apartment:Me,floor:jt};return M(Ct),{access:!0,houseData:Ct,apartmentId:pe.apartment_id,floorId:pe.floor_id,houseId:pe.id}}catch(oe){if(console.error("Error checking house access:",oe),oe.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const pe=oe.response?.status;return pe===401?{access:!1,reason:"Session expired. Please login again."}:pe===403?{access:!1,reason:"Access denied to this resource."}:pe===404?{access:!1,reason:"House not found."}:pe===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},ze=async()=>{try{const Te=await fe.post(`/complaints/${n}/timer/start`,{},{headers:{Authorization:`Bearer ${le.accessToken}`}});if(Te.data.success){const oe=Te.data.data;return D(!0),re(!0),Y(oe.currentElapsedTime||0),ce.current&&clearInterval(ce.current),ce.current=setInterval(()=>{Y(pe=>pe+1)},1e3),J.success("Work started! Timer is now running."),x(pe=>({...pe,status:"In Progress",is_timer_running:!0,work_started_at:new Date().toISOString()})),!0}else return J.error(Te.data.message||"Failed to start timer"),!1}catch(Te){return console.error("Error starting timer:",Te),J.error(Te.response?.data?.message||"Failed to start timer"),!1}},xe=async()=>{try{const Te=await fe.post(`/complaints/${n}/timer/stop`,{},{headers:{Authorization:`Bearer ${le.accessToken}`}});return Te.data.success?(D(!1),re(!1),ce.current&&(clearInterval(ce.current),ce.current=null),Te.data.data&&Te.data.data.currentElapsedTime&&Y(Te.data.data.currentElapsedTime),J.success("Work completed! Timer stopped."),x(oe=>({...oe,status:"Resolved",is_timer_running:!1,work_paused_at:new Date().toISOString()})),setTimeout(()=>{Q("/my-complaints")},3e3),!0):(J.error(Te.data.message||"Failed to stop timer"),!1)}catch(Te){return console.error("Error stopping timer:",Te),J.error(Te.response?.data?.message||"Failed to stop timer"),!1}},Ze=async()=>{try{const Te=await fe.post(`/complaints/${n}/timer/pause`,{},{headers:{Authorization:`Bearer ${le.accessToken}`}});return Te.data.success?(D(!1),ce.current&&(clearInterval(ce.current),ce.current=null),Te.data.data&&Te.data.data.currentElapsedTime&&Y(Te.data.data.currentElapsedTime),J.success("Timer paused"),!0):(J.error(Te.data.message||"Failed to pause timer"),!1)}catch(Te){return console.error("Error pausing timer:",Te),J.error(Te.response?.data?.message||"Failed to pause timer"),!1}},je=async()=>{try{const Te=await fe.post(`/complaints/${n}/timer/resume`,{},{headers:{Authorization:`Bearer ${le.accessToken}`}});return Te.data.success?(D(!0),ce.current||(ce.current=setInterval(()=>{Y(oe=>oe+1)},1e3)),J.success("Timer resumed"),!0):(J.error(Te.data.message||"Failed to resume timer"),!1)}catch(Te){return console.error("Error resuming timer:",Te),J.error(Te.response?.data?.message||"Failed to resume timer"),!1}},Je=()=>{g(!0),j(null),E(!1),T(""),M(null),I(""),setTimeout(()=>{try{G.current&&G.current.clear().catch(Te=>{console.log("Scanner clear error:",Te)}),G.current=new U1("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,supportedScanTypes:[Ys.SCAN_TYPE_CAMERA],facingMode:X},!1),G.current.render(Te=>{Ke(Te)},Te=>{console.log("QR Scan error:",Te)})}catch(Te){console.error("Scanner initialization error:",Te),J.error("Failed to initialize scanner. Please refresh and try again.")}},100)},Ke=async Te=>{try{b(!0),G.current&&await G.current.clear(),g(!1),I("");const oe=Te.trim();if(j({houseId:oe,source:"qr"}),ee?.is_on_hold){const pe=await be(oe);pe.access?(J.success("Location verified! Ready to resume from hold."),E(!0)):(E(!1),T(pe.reason||"Access denied"),J.error(pe.reason||"Access denied"))}else{const pe=await be(oe);if(pe.access){E(!0),J.success("Access granted! This is the correct house.");try{await ze()&&(D(!0),re(!0),x(jt=>({...jt,status:"In Progress",is_timer_running:!0})))}catch(Me){J.error("Failed to start timer: "+Me.message)}}else E(!1),T(pe.reason||"Access denied"),J.error(pe.reason||"Access denied")}}catch(oe){console.error("Error processing QR code:",oe),J.error(oe.message||"Invalid QR code. Please scan a valid house QR code."),g(!1)}finally{b(!1)}},at=()=>{U(X==="environment"?"user":"environment"),f&&Je()},Ue=Te=>{const oe=Math.floor(Te/3600),pe=Math.floor(Te%3600/60),Me=Te%60;return`${oe.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}:${Me.toString().padStart(2,"0")}`},ve=()=>{G.current&&G.current.clear().catch(Te=>{console.log("Scanner clear error on reset:",Te)}),ce.current&&(clearInterval(ce.current),ce.current=null),g(!1),j(null),E(!1),T(""),M(null),I(""),D(!1),Y(0),re(!1)};N.useEffect(()=>()=>{G.current&&G.current.clear().catch(Te=>{console.log("Scanner clear error on unmount:",Te)}),ce.current&&clearInterval(ce.current)},[]),N.useEffect(()=>((async()=>{if(n&&le?.accessToken)try{const oe=await fe.get(`/complaints/${n}/timer/status`,{headers:{Authorization:`Bearer ${le.accessToken}`}});if(oe.data.success&&oe.data.data){const pe=oe.data.data;pe.is_timer_running&&(D(!0),re(!0),Y(pe.currentElapsedTime||0),ce.current=setInterval(()=>{Y(Me=>Me+1)},1e3))}}catch{console.log("No active timer found")}})(),()=>{ce.current&&clearInterval(ce.current)}),[n,le?.accessToken]);const he=Te=>{try{return new Date(Te).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},He=async()=>{try{ae(!0);const Te=await fe.get(`/complaints/${n}/hold-status`,{headers:{Authorization:`Bearer ${le.accessToken}`}});Te.data.success&&H(Te.data.data)}catch(Te){console.error("Error fetching hold status:",Te)}finally{ae(!1)}};N.useEffect(()=>{n&&le?.accessToken&&He()},[n,le?.accessToken]);const et=async()=>{try{b(!0);const Te=await fe.post(`/complaints/${n}/resume`,{},{headers:{Authorization:`Bearer ${le.accessToken}`}});Te.data.success?(J.success("Complaint resumed from hold"),H(null),D(!0),re(!0),x(oe=>({...oe,status:"In Progress",is_timer_running:!0,is_on_hold:!1})),ce.current&&clearInterval(ce.current),ce.current=setInterval(()=>{Y(oe=>oe+1)},1e3)):J.error(Te.data.message||"Failed to resume complaint")}catch(Te){console.error("Error resuming from hold:",Te),J.error(Te.response?.data?.message||"Failed to resume complaint")}finally{b(!1)}},Ne=()=>{He(),D(!1),ce.current&&(clearInterval(ce.current),ce.current=null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(Zt,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[o&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Complaint: ",o.complaint_number]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:o.title})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${o.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":o.status==="In Progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:o.status})}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Created: ",he(o.created_at)]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:o.description})]})]}),te&&!ee?.is_on_hold&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-800 rounded-lg mr-4",children:e.jsx(g1,{size:24,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Work In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-200 mt-2",children:Ue(B)}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Elapsed Time"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[L?e.jsx("button",{onClick:Ze,className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors min-w-[70px]",children:e.jsx(Fv,{size:16})}):e.jsx("button",{onClick:je,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors min-w-[70px]",children:e.jsx(x1,{size:16})}),e.jsx("button",{onClick:()=>Ce(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors min-w-[70px]",children:e.jsx(Da,{size:16})}),e.jsx("button",{onClick:xe,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors min-w-[70px]",children:e.jsx(nv,{size:16})})]})]})}),ee?.is_on_hold&&!te&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx(Da,{size:24,className:"text-orange-600 dark:text-orange-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300",children:"Complaint On Hold"}),e.jsxs("p",{className:"text-orange-700 dark:text-orange-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",ee.reason]}),ee.expected_resolution_date&&e.jsxs("p",{className:"text-orange-700 dark:text-orange-400",children:[e.jsx("span",{className:"font-medium",children:"Expected Resolution:"})," ",new Date(ee.expected_resolution_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"To resume work:"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"Verify your location (scan QR or enter House ID)"}),e.jsx("li",{children:'Click "Resume from Hold" button'}),e.jsx("li",{children:"The timer will resume from where it was paused"})]})]}),S?e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ys,{size:20,className:"text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Location verified! You can now resume work."})]}),e.jsxs("button",{onClick:et,className:"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",disabled:k,children:[e.jsx(rv,{size:20}),"Resume from Hold"]})]}):e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"Please verify your location first to resume work"})]}),f&&!te&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:at,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${X==="environment"?"Front":"Back"} Camera`,children:[e.jsx(h1,{size:16}),e.jsx("span",{children:"Switch Camera"})]}),e.jsxs("button",{onClick:ve,className:"flex items-center gap-2 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/40",children:[e.jsx(Gt,{size:16}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Scanning ",X==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Scan the house QR code to verify location and start work"}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),k&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(yt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processing..."})]}),y&&!k&&!f&&!te&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Verification"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[y.source==="manual"?"Manual Entry":"QR Scan"," Result"]})]}),e.jsxs("button",{onClick:ve,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Mi,{size:16}),e.jsx("span",{children:"Try Again"})]})]}),S?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(ys,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Location Verified "}),e.jsx("p",{className:"text-green-700 dark:text-green-400",children:"Timer has been started automatically"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center justify-center bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx(Wr,{size:24,className:"text-green-600 dark:text-green-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:"Running..."})]})]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Da,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:_}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsx("p",{children:"Requirements to start work:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House ID must match the complaint's house"}),e.jsx("li",{children:"House must exist in the system"}),e.jsx("li",{children:"You must be at the correct location"})]})]})]})]})})]}),!y&&!f&&!k&&!te&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(_d,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Start Work"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Verify the house location to start working on this complaint"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"You must verify that you are at the correct house before starting work"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),e.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]})}),e.jsxs("div",{children:[e.jsx(Vo,{size:48,className:"mx-auto text-purple-400 mb-4"}),e.jsxs("button",{onClick:Je,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(o1,{size:20}),"Scan House QR Code"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"QR scanning will automatically verify and start timer"})]})]})}),te&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(_d,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Work Started Successfully"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are now working on complaint: ",e.jsx("strong",{children:o?.complaint_number})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Remember to stop the timer when you finish your work"}),e.jsx("p",{className:"mt-1",children:"The complaint will be marked as completed automatically"})]})]})})]})})]}),de&&o&&e.jsx(Dk,{complaint:o,onClose:()=>Ce(!1),onHoldSuccess:Ne}),e.jsx(Dt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function Rk(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),f=Vt(),g=()=>{f("/my-complaints")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(Zt,{onCollapse:c})}),o&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>x(!1)}),e.jsx("div",{className:`
            lg:hidden fixed left-0 top-0 h-full z-50
            transform transition-transform duration-300 ease-in-out
            ${o?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(Zt,{onCollapse:c})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:g,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(bs,{size:16})}),e.jsx(Sg,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"My Service"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:g,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(bs,{size:16})}),e.jsx(Sg,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Service Management"})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(V1,{})})]})})]})]})}function Ik({onClose:n,onCreated:c}){const{auth:o}=N.useContext(da),[x,f]=N.useState(!1),[g,y]=N.useState({}),[j,k]=N.useState({name:"",description:"",color:"Purple"}),b=[{name:"Purple",value:"#667eea",displayName:"Purple"},{name:"Blue",value:"#3b82f6",displayName:"Blue"},{name:"Green",value:"#10b981",displayName:"Green"},{name:"Yellow",value:"#f59e0b",displayName:"Yellow"},{name:"Red",value:"#ef4444",displayName:"Red"},{name:"Pink",value:"#ec4899",displayName:"Pink"},{name:"Indigo",value:"#6366f1",displayName:"Indigo"},{name:"Teal",value:"#14b8a6",displayName:"Teal"},{name:"Orange",value:"#f97316",displayName:"Orange"},{name:"Gray",value:"#6b7280",displayName:"Gray"}],S=B=>{const Y=b.find(X=>X.name===B);return Y?Y.value:"#667eea"},E=B=>{const Y=b.find(X=>X.name===B);return Y?`${Y.displayName} (${Y.value})`:`Custom (${S(B)})`},_=B=>!b.some(Y=>Y.name===B),T=()=>_(j.color)?j.color.startsWith("#")?j.color:"#667eea":S(j.color),O=()=>{const B={};return j.name.trim()?j.name.trim().length<2?B.name="Category name must be at least 2 characters":j.name.trim().length>50&&(B.name="Category name cannot exceed 50 characters"):B.name="Category name is required",j.description&&j.description.length>500&&(B.description="Description cannot exceed 500 characters"),j.color||(B.color="Please select a color"),B},M=B=>{const{name:Y,value:X}=B.target;k(U=>({...U,[Y]:X})),g[Y]&&y(U=>({...U,[Y]:""}))},z=B=>{k(Y=>({...Y,color:B})),g.color&&y(Y=>({...Y,color:""}))},I=B=>{k(Y=>({...Y,color:B})),g.color&&y(Y=>({...Y,color:""}))},L=async B=>{B.preventDefault();const Y=O();if(Object.keys(Y).length>0){y(Y);return}try{f(!0);const X={name:j.name.trim(),description:j.description.trim(),color:j.color},U=await fe.post("/categories",X,{headers:{Authorization:`Bearer ${o.accessToken}`}});if(U.data.success)c&&c(),n();else throw new Error(U.data.message||"Failed to create category")}catch(X){console.error("Create category error:",X),X.response?.status===409?(y(U=>({...U,name:"A category with this name already exists"})),J.error("A category with this name already exists")):X.response?.status===401?(J.error("Session expired. Please login again."),n()):J.error(X.response?.data?.message||"Failed to create service category")}finally{f(!1)}},D=()=>{k({name:"",description:"",color:"Purple"}),y({})};return e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",name:"name",value:j.name,onChange:M,className:`w-full px-3 py-2 border  text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${g.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Plumbing, Electrical, Carpentry",disabled:x}),g.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required. Will be used for complaint categorization."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:j.description,onChange:M,rows:3,className:`w-full px-3 py-2 text-gray-700 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${g.description?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Brief description of what this category includes...",disabled:x}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Optional. Helps technicians understand the category scope."}),e.jsxs("p",{className:`text-xs ${j.description.length>500?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[j.description.length,"/500"]})]}),g.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Color *"}),e.jsxs("div",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg mr-3 border-2 border-gray-300 dark:border-gray-600 flex-shrink-0",style:{backgroundColor:T()}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:_(j.color)?"Custom Color":j.color}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:e.jsx("span",{className:"truncate",children:E(j.color)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select from predefined colors:"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:b.map(B=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{type:"button",onClick:()=>z(B.name),className:`relative w-full aspect-square rounded-lg border-2 transition-all hover:scale-105 mb-1 ${j.color===B.name?"border-purple-500 dark:border-purple-400 scale-105 shadow-md":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,title:`${B.displayName} (${B.value})`,disabled:x,children:[e.jsx("div",{className:"w-full h-full rounded",style:{backgroundColor:B.value}}),j.color===B.name&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded",children:e.jsx(ys,{className:"text-white",size:14})})]}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center",children:B.name})]},B.name))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Custom Color"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Or create your own"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ov,{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:18}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Color Picker"}),e.jsx("input",{type:"color",value:T(),onChange:B=>I(B.target.value),className:"w-full h-10 cursor-pointer rounded border border-gray-300 dark:border-gray-600",disabled:x})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Hex Code"}),e.jsx("input",{type:"text",value:T(),onChange:B=>I(B.target.value),className:"w-full px-3 py-2  text-gray-700 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-800 dark:text-white",placeholder:"#RRGGBB",pattern:"^#[0-9A-Fa-f]{6}$",disabled:x})]})]})]}),_(j.color)&&e.jsx("div",{className:"mt-3 p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:T()}}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Custom Color Selected"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:T()})]})})]}),g.color&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:g.color}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Color helps visually identify this category in lists and charts."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:"Reset Form"}),e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:x,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:x,className:"flex items-center justify-center px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:x?e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"animate-spin mr-2",size:16}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{className:"mr-2",size:16}),"Create Category"]})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Tips for creating categories:"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:'Use clear, descriptive names (e.g., "Electrical Repair" instead of "Electricity")'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Keep descriptions concise but informative"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Choose distinct colors for easy visual differentiation"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Categories can be assigned to technicians for specialization"})]})]})]})]})}function Ok({onClose:n,onEdited:c,serviceCategory:o}){const{auth:x}=N.useContext(da),[f,g]=N.useState(!1),[y,j]=N.useState(!1),[k,b]=N.useState({name:"",description:"",color:"#6b46c1"}),[S,E]=N.useState({}),[_,T]=N.useState(window.innerWidth<768);N.useEffect(()=>{const D=()=>{T(window.innerWidth<768)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),N.useEffect(()=>{o&&b({name:o.name||"",description:o.description||"",color:o.color||"#6b46c1"})},[o]);const O=()=>{const D={};return k.name.trim()?k.name.length>100&&(D.name="Name must be less than 100 characters"):D.name="Category name is required",k.description&&k.description.length>500&&(D.description="Description must be less than 500 characters"),k.color||(D.color="Color is required"),E(D),Object.keys(D).length===0},M=D=>{const{name:B,value:Y}=D.target;b(X=>({...X,[B]:Y})),S[B]&&E(X=>({...X,[B]:""}))},z=D=>{b(B=>({...B,color:D.target.value})),S.color&&E(B=>({...B,color:""}))},I=async D=>{if(D.preventDefault(),!!O()){j(!0);try{const B={name:k.name.trim(),color:k.color};k.description.trim()&&(B.description=k.description.trim());const Y=await fe.put(`/categories/${o.id}`,B);Y.data.success?c():J.error(Y.data.message||"Failed to update category")}catch(B){if(console.error("Update category error:",B),B.response)switch(B.response.status){case 400:J.error("Invalid data provided");break;case 401:J.error("Session expired. Please login again.");break;case 403:J.error("You do not have permission to update this category");break;case 404:J.error("Category not found"),n();break;case 409:J.error(B.response.data?.message||"Category with this name already exists");break;default:J.error("Failed to update service category")}else B.request?J.error("No response from server. Please check your connection."):J.error("An error occurred while updating the category")}finally{j(!1)}}},L=[{value:"#6b46c1",label:"Purple",color:"bg-purple-500"},{value:"#4299e1",label:"Blue",color:"bg-blue-500"},{value:"#38a169",label:"Green",color:"bg-green-500"},{value:"#e53e3e",label:"Red",color:"bg-red-500"},{value:"#ed8936",label:"Orange",color:"bg-orange-500"},{value:"#d69e2e",label:"Yellow",color:"bg-yellow-500"},{value:"#4fd1c7",label:"Teal",color:"bg-teal-500"},{value:"#9f7aea",label:"Indigo",color:"bg-indigo-500"},{value:"#f687b3",label:"Pink",color:"bg-pink-500"}];return e.jsxs("form",{onSubmit:I,className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:k.name,onChange:M,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${S.name?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter category name",disabled:y,maxLength:100}),S.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:S.name}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[k.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",name:"description",value:k.description,onChange:M,rows:_?3:4,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${S.description?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none`,placeholder:"Enter category description",disabled:y,maxLength:500}),S.description&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:S.description}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[k.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color *"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Quick select:"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-9 gap-2",children:L.map(D=>e.jsx("button",{type:"button",onClick:()=>{b(B=>({...B,color:D.value})),S.color&&E(B=>({...B,color:""}))},className:`relative w-8 h-8 rounded-full flex items-center justify-center ${D.color} border-2 ${k.color===D.value?"border-gray-800 dark:border-white":"border-transparent"} hover:border-gray-400 dark:hover:border-gray-300 transition-colors`,title:D.label,disabled:y,children:k.color===D.value&&e.jsx(ys,{size:14,className:"text-white"})},D.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Custom color:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300 dark:border-gray-600",style:{backgroundColor:k.color}}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",id:"color",name:"color",value:k.color,onChange:z,className:"w-full h-10 cursor-pointer",disabled:y})}),e.jsx("div",{className:"w-24",children:e.jsx("input",{type:"text",value:k.color,onChange:z,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#000000",disabled:y,maxLength:7})})]}),S.color&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:S.color})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Current Category Information:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(o.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(o.updated_at).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:`flex ${_?"flex-col space-y-3":"space-x-3"} pt-4 border-t border-gray-200 dark:border-gray-700`,children:[e.jsx("button",{type:"button",onClick:n,disabled:y,className:`flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${_?"":"order-2"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:y,className:`flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center justify-center ${y?"opacity-70 cursor-not-allowed":""} ${_?"":"order-1"}`,children:y?e.jsxs(e.Fragment,{children:[e.jsx(yt,{size:18,className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ys,{size:18,className:"mr-2"}),"Update Category"]})})]}),Object.keys(S).length>0&&e.jsxs("div",{className:"sr-only",role:"alert",children:["Form has ",Object.keys(S).length," error(s). Please fix them before submitting."]})]})}function Bk(){const[n,c]=N.useState(!1),[o,x]=N.useState(!1),[f,g]=N.useState(window.innerWidth<768),{auth:y}=N.useContext(da),j=Vt(),[k,b]=N.useState(!1),[S,E]=N.useState([]),[_,T]=N.useState(null),[O,M]=N.useState(!1),[z,I]=N.useState(!1),[L,D]=N.useState(!1),[B,Y]=N.useState(null),[X,U]=N.useState(!1),[G,Q]=N.useState(null);N.useEffect(()=>{const H=()=>{g(window.innerWidth<768)};return window.addEventListener("resize",H),()=>window.removeEventListener("resize",H)},[]);const le=async()=>{try{b(!0),T(null);const H=await fe.get("/categories");H.data.success&&Array.isArray(H.data.data)?E(H.data.data):Array.isArray(H.data)?E(H.data):(console.warn("Unexpected response format:",H.data),E([]))}catch(H){console.error("Failed to load service categories:",H),J.error("Failed to load service categories. Please try again."),H.response?.status===401?(T("Unauthorized. Please login again."),j("/login")):H.response?.status===400?T("Company information missing. Please contact support."):T("Failed to load service categories. Please try again.")}finally{b(!1)}};N.useEffect(()=>{le()},[]);const ce=()=>{I(!0)},te=()=>{I(!1)},re=()=>{le(),I(!1),J.success("Service category created successfully!")},W=H=>{Y(H),D(!0)},P=()=>{D(!1),Y(null)},$=()=>{le(),D(!1),Y(null),J.success("Service category updated successfully!")},ne=H=>{Q(H),U(!0)},de=async()=>{try{if(!G)return;await fe.delete(`/categories/${G.id}`),J.success("Category deleted successfully"),U(!1),Q(null),le()}catch(H){console.error("Delete category error:",H),J.error("Failed to delete category. Please try again.")}},Ce=()=>{U(!1),Q(null)},ee=()=>e.jsx("button",{onClick:()=>x(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Ul,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ee,{}),e.jsx(Zt,{onCollapse:c,isMobileOpen:o,onMobileClose:()=>x(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${n?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(ba,{onMobileMenuClick:()=>x(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ad,{size:f?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Service Categories"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your service categories"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:ce,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(tr,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:k?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(yt,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading service categories..."})]}):_?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:_}),e.jsx("button",{onClick:le,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):S.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Kr,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No service categories found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first service category"}),e.jsx("button",{onClick:ce,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Category"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Categories: ",S.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[S.length," items"]})]})}),S.map(H=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:H.name}),H.description&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:H.description})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:me=>{me.stopPropagation(),W(H)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Pa,{size:16})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),ne(H)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(ua,{size:16})})]})]}),H.color&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:H.color}}),e.jsxs("span",{children:["Color: ",H.color]})]})]},H.id))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Service Categories"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[S.length," categories"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:S.map(H=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:H.name}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 dark:text-white max-w-[300px] truncate",children:H.description||"No description"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:H.color?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:H.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:H.color})]}):e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"No color"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:me=>{me.stopPropagation(),W(H)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(Pa,{size:18})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),ne(H)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(ua,{size:18})})]})})]},H.id))})]})]})})})]})})]}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Service Category"}),e.jsx("button",{onClick:te,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(Ik,{onClose:te,onCreated:re})]})})}),L&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Service Category"}),e.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(Ok,{onClose:P,onEdited:$,serviceCategory:B})]})})}),X&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ce,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:de,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(Dt,{position:"top-center",autoClose:3e3})]})}function Lk(){return e.jsx(T2,{children:e.jsx(gN,{children:e.jsxs(l2,{children:[e.jsx(wt,{path:"/",element:e.jsx(F2,{})}),e.jsx(wt,{path:"/login",element:e.jsx(l4,{})}),e.jsx(wt,{path:"/register",element:e.jsx(i4,{})}),e.jsx(wt,{path:"/verify",element:e.jsx(o4,{})}),e.jsx(wt,{path:"/sidebar",element:e.jsx(Lv,{})}),e.jsx(wt,{path:"/navbar",element:e.jsx(ba,{})}),e.jsx(wt,{path:"/admindashboard",element:e.jsx(c4,{})}),e.jsx(wt,{path:"/apartmentview",element:e.jsx(m4,{})}),e.jsx(wt,{path:"/userview",element:e.jsx(j4,{})}),e.jsx(wt,{path:"/floors/:id",element:e.jsx(A4,{})}),e.jsx(wt,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(x3,{})}),e.jsx(wt,{path:"/housetype/:apartment_id",element:e.jsx(C1,{})}),e.jsx(wt,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(R4,{})}),e.jsx(wt,{path:"/bills/:apartment_id",element:e.jsx(E1,{})}),e.jsx(wt,{path:"/reset-password",element:e.jsx(m3,{})}),e.jsx(wt,{path:"/forgot-password",element:e.jsx(h3,{})}),e.jsx(wt,{path:"/complete-registration",element:e.jsx(f3,{})}),e.jsx(wt,{path:"/manage-bills",element:e.jsx(g3,{})}),e.jsx(wt,{path:"/bills-and-calculations",element:e.jsx(N3,{})}),e.jsx(wt,{path:"/billranges/:bill_id",element:e.jsx(k3,{})}),e.jsx(wt,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(A3,{})}),e.jsx(wt,{path:"/employee-dashboard",element:e.jsx(E3,{})}),e.jsx(wt,{path:"/role",element:e.jsx(k1,{})}),e.jsx(wt,{path:"/profile-page",element:e.jsx(_3,{})}),e.jsx(wt,{path:"/my-apartments",element:e.jsx(T3,{})}),e.jsx(wt,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(D3,{})}),e.jsx(wt,{path:"/bill-payments",element:e.jsx(R3,{})}),e.jsx(wt,{path:"/measurable-bills",element:e.jsx(H1,{})}),e.jsx(wt,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(bk,{})}),e.jsx(wt,{path:"/my-bills",element:e.jsx(wk,{})}),e.jsx(wt,{path:"/house-bill-meter/:bill_id",element:e.jsx(Nk,{})}),e.jsx(wt,{path:"/bill-payment-settle",element:e.jsx(vk,{})}),e.jsx(wt,{path:"/houseowner/login",element:e.jsx(jk,{})}),e.jsx(wt,{path:"/houseowner/verify",element:e.jsx(Ck,{})}),e.jsx(wt,{path:"/houseowner/dashboard",element:e.jsx(kk,{})}),e.jsx(wt,{path:"/houseowner/houseowner-houseview",element:e.jsx(Sk,{})}),e.jsx(wt,{path:"/houseowner/houseowner-billview",element:e.jsx(Ak,{})}),e.jsx(wt,{path:"/houseowner/complaints",element:e.jsx(Ek,{})}),e.jsx(wt,{path:"/houseowner/houseowner-profile",element:e.jsx(Mk,{})}),e.jsx(wt,{path:"/view-complaints",element:e.jsx(_k,{})}),e.jsx(wt,{path:"/my-complaints",element:e.jsx(Tk,{})}),e.jsx(wt,{path:"/my-work/:complaintId",element:e.jsx(Rk,{})}),e.jsx(wt,{path:"/start-work",element:e.jsx(V1,{})}),e.jsx(wt,{path:"/complaint-categories",element:e.jsx(Bk,{})})]})})})}function zk(){const[n,c]=N.useState(null);return e.jsx(da.Provider,{value:{auth:n,setAuth:c},children:e.jsx(Lk,{})})}gb.createRoot(document.getElementById("root")).render(e.jsx(zk,{}));export{U4 as _,hd as c,Dd as g};
