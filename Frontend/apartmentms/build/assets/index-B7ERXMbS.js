function Hy(l,c){for(var d=0;d<c.length;d++){const f=c[d];if(typeof f!="string"&&!Array.isArray(f)){for(const g in f)if(g!=="default"&&!(g in l)){const m=Object.getOwnPropertyDescriptor(f,g);m&&Object.defineProperty(l,g,m.get?m:{enumerable:!0,get:()=>f[g]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))f(g);new MutationObserver(g=>{for(const m of g)if(m.type==="childList")for(const w of m.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&f(w)}).observe(document,{childList:!0,subtree:!0});function d(g){const m={};return g.integrity&&(m.integrity=g.integrity),g.referrerPolicy&&(m.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?m.credentials="include":g.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function f(g){if(g.ep)return;g.ep=!0;const m=d(g);fetch(g.href,m)}})();var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function md(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var E0={exports:{}},wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og;function Vy(){if(Og)return wo;Og=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.fragment");function d(f,g,m){var w=null;if(m!==void 0&&(w=""+m),g.key!==void 0&&(w=""+g.key),"key"in g){m={};for(var N in g)N!=="key"&&(m[N]=g[N])}else m=g;return g=m.ref,{$$typeof:l,type:f,key:w,ref:g!==void 0?g:null,props:m}}return wo.Fragment=c,wo.jsx=d,wo.jsxs=d,wo}var Bg;function Gy(){return Bg||(Bg=1,E0.exports=Vy()),E0.exports}var e=Gy(),T0={exports:{}},Ct={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function qy(){if(Lg)return Ct;Lg=1;var l=Symbol.for("react.transitional.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),w=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),E=Symbol.iterator;function M(K){return K===null||typeof K!="object"?null:(K=E&&K[E]||K["@@iterator"],typeof K=="function"?K:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B=Object.assign,_={};function G(K,ge,Oe){this.props=K,this.context=ge,this.refs=_,this.updater=Oe||D}G.prototype.isReactComponent={},G.prototype.setState=function(K,ge){if(typeof K!="object"&&typeof K!="function"&&K!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,K,ge,"setState")},G.prototype.forceUpdate=function(K){this.updater.enqueueForceUpdate(this,K,"forceUpdate")};function R(){}R.prototype=G.prototype;function z(K,ge,Oe){this.props=K,this.context=ge,this.refs=_,this.updater=Oe||D}var F=z.prototype=new R;F.constructor=z,B(F,G.prototype),F.isPureReactComponent=!0;var V=Array.isArray,Q={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function P(K,ge,Oe,xe,ve,Fe){return Oe=Fe.ref,{$$typeof:l,type:K,key:ge,ref:Oe!==void 0?Oe:null,props:Fe}}function X(K,ge){return P(K.type,ge,void 0,void 0,void 0,K.props)}function Z(K){return typeof K=="object"&&K!==null&&K.$$typeof===l}function de(K){var ge={"=":"=0",":":"=2"};return"$"+K.replace(/[=:]/g,function(Oe){return ge[Oe]})}var he=/\/+/g;function re(K,ge){return typeof K=="object"&&K!==null&&K.key!=null?de(""+K.key):ge.toString(36)}function le(){}function W(K){switch(K.status){case"fulfilled":return K.value;case"rejected":throw K.reason;default:switch(typeof K.status=="string"?K.then(le,le):(K.status="pending",K.then(function(ge){K.status==="pending"&&(K.status="fulfilled",K.value=ge)},function(ge){K.status==="pending"&&(K.status="rejected",K.reason=ge)})),K.status){case"fulfilled":return K.value;case"rejected":throw K.reason}}throw K}function U(K,ge,Oe,xe,ve){var Fe=typeof K;(Fe==="undefined"||Fe==="boolean")&&(K=null);var ie=!1;if(K===null)ie=!0;else switch(Fe){case"bigint":case"string":case"number":ie=!0;break;case"object":switch(K.$$typeof){case l:case c:ie=!0;break;case S:return ie=K._init,U(ie(K._payload),ge,Oe,xe,ve)}}if(ie)return ve=ve(K),ie=xe===""?"."+re(K,0):xe,V(ve)?(Oe="",ie!=null&&(Oe=ie.replace(he,"$&/")+"/"),U(ve,ge,Oe,"",function(dt){return dt})):ve!=null&&(Z(ve)&&(ve=X(ve,Oe+(ve.key==null||K&&K.key===ve.key?"":(""+ve.key).replace(he,"$&/")+"/")+ie)),ge.push(ve)),1;ie=0;var Qe=xe===""?".":xe+":";if(V(K))for(var ye=0;ye<K.length;ye++)xe=K[ye],Fe=Qe+re(xe,ye),ie+=U(xe,ge,Oe,Fe,ve);else if(ye=M(K),typeof ye=="function")for(K=ye.call(K),ye=0;!(xe=K.next()).done;)xe=xe.value,Fe=Qe+re(xe,ye++),ie+=U(xe,ge,Oe,Fe,ve);else if(Fe==="object"){if(typeof K.then=="function")return U(W(K),ge,Oe,xe,ve);throw ge=String(K),Error("Objects are not valid as a React child (found: "+(ge==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":ge)+"). If you meant to render a collection of children, use an array instead.")}return ie}function H(K,ge,Oe){if(K==null)return K;var xe=[],ve=0;return U(K,xe,"","",function(Fe){return ge.call(Oe,Fe,ve++)}),xe}function ee(K){if(K._status===-1){var ge=K._result;ge=ge(),ge.then(function(Oe){(K._status===0||K._status===-1)&&(K._status=1,K._result=Oe)},function(Oe){(K._status===0||K._status===-1)&&(K._status=2,K._result=Oe)}),K._status===-1&&(K._status=0,K._result=ge)}if(K._status===1)return K._result.default;throw K._result}var oe=typeof reportError=="function"?reportError:function(K){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ge=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof K=="object"&&K!==null&&typeof K.message=="string"?String(K.message):String(K),error:K});if(!window.dispatchEvent(ge))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",K);return}console.error(K)};function we(){}return Ct.Children={map:H,forEach:function(K,ge,Oe){H(K,function(){ge.apply(this,arguments)},Oe)},count:function(K){var ge=0;return H(K,function(){ge++}),ge},toArray:function(K){return H(K,function(ge){return ge})||[]},only:function(K){if(!Z(K))throw Error("React.Children.only expected to receive a single React element child.");return K}},Ct.Component=G,Ct.Fragment=d,Ct.Profiler=g,Ct.PureComponent=z,Ct.StrictMode=f,Ct.Suspense=C,Ct.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ct.__COMPILER_RUNTIME={__proto__:null,c:function(K){return Q.H.useMemoCache(K)}},Ct.cache=function(K){return function(){return K.apply(null,arguments)}},Ct.cloneElement=function(K,ge,Oe){if(K==null)throw Error("The argument must be a React element, but you passed "+K+".");var xe=B({},K.props),ve=K.key,Fe=void 0;if(ge!=null)for(ie in ge.ref!==void 0&&(Fe=void 0),ge.key!==void 0&&(ve=""+ge.key),ge)!$.call(ge,ie)||ie==="key"||ie==="__self"||ie==="__source"||ie==="ref"&&ge.ref===void 0||(xe[ie]=ge[ie]);var ie=arguments.length-2;if(ie===1)xe.children=Oe;else if(1<ie){for(var Qe=Array(ie),ye=0;ye<ie;ye++)Qe[ye]=arguments[ye+2];xe.children=Qe}return P(K.type,ve,void 0,void 0,Fe,xe)},Ct.createContext=function(K){return K={$$typeof:w,_currentValue:K,_currentValue2:K,_threadCount:0,Provider:null,Consumer:null},K.Provider=K,K.Consumer={$$typeof:m,_context:K},K},Ct.createElement=function(K,ge,Oe){var xe,ve={},Fe=null;if(ge!=null)for(xe in ge.key!==void 0&&(Fe=""+ge.key),ge)$.call(ge,xe)&&xe!=="key"&&xe!=="__self"&&xe!=="__source"&&(ve[xe]=ge[xe]);var ie=arguments.length-2;if(ie===1)ve.children=Oe;else if(1<ie){for(var Qe=Array(ie),ye=0;ye<ie;ye++)Qe[ye]=arguments[ye+2];ve.children=Qe}if(K&&K.defaultProps)for(xe in ie=K.defaultProps,ie)ve[xe]===void 0&&(ve[xe]=ie[xe]);return P(K,Fe,void 0,void 0,null,ve)},Ct.createRef=function(){return{current:null}},Ct.forwardRef=function(K){return{$$typeof:N,render:K}},Ct.isValidElement=Z,Ct.lazy=function(K){return{$$typeof:S,_payload:{_status:-1,_result:K},_init:ee}},Ct.memo=function(K,ge){return{$$typeof:b,type:K,compare:ge===void 0?null:ge}},Ct.startTransition=function(K){var ge=Q.T,Oe={};Q.T=Oe;try{var xe=K(),ve=Q.S;ve!==null&&ve(Oe,xe),typeof xe=="object"&&xe!==null&&typeof xe.then=="function"&&xe.then(we,oe)}catch(Fe){oe(Fe)}finally{Q.T=ge}},Ct.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ct.use=function(K){return Q.H.use(K)},Ct.useActionState=function(K,ge,Oe){return Q.H.useActionState(K,ge,Oe)},Ct.useCallback=function(K,ge){return Q.H.useCallback(K,ge)},Ct.useContext=function(K){return Q.H.useContext(K)},Ct.useDebugValue=function(){},Ct.useDeferredValue=function(K,ge){return Q.H.useDeferredValue(K,ge)},Ct.useEffect=function(K,ge,Oe){var xe=Q.H;if(typeof Oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return xe.useEffect(K,ge)},Ct.useId=function(){return Q.H.useId()},Ct.useImperativeHandle=function(K,ge,Oe){return Q.H.useImperativeHandle(K,ge,Oe)},Ct.useInsertionEffect=function(K,ge){return Q.H.useInsertionEffect(K,ge)},Ct.useLayoutEffect=function(K,ge){return Q.H.useLayoutEffect(K,ge)},Ct.useMemo=function(K,ge){return Q.H.useMemo(K,ge)},Ct.useOptimistic=function(K,ge){return Q.H.useOptimistic(K,ge)},Ct.useReducer=function(K,ge,Oe){return Q.H.useReducer(K,ge,Oe)},Ct.useRef=function(K){return Q.H.useRef(K)},Ct.useState=function(K){return Q.H.useState(K)},Ct.useSyncExternalStore=function(K,ge,Oe){return Q.H.useSyncExternalStore(K,ge,Oe)},Ct.useTransition=function(){return Q.H.useTransition()},Ct.version="19.1.1",Ct}var Fg;function Sf(){return Fg||(Fg=1,T0.exports=qy()),T0.exports}var k=Sf();const ra=md(k);var _0={exports:{}},vo={},M0={exports:{}},D0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function Yy(){return Pg||(Pg=1,function(l){function c(H,ee){var oe=H.length;H.push(ee);e:for(;0<oe;){var we=oe-1>>>1,K=H[we];if(0<g(K,ee))H[we]=ee,H[oe]=K,oe=we;else break e}}function d(H){return H.length===0?null:H[0]}function f(H){if(H.length===0)return null;var ee=H[0],oe=H.pop();if(oe!==ee){H[0]=oe;e:for(var we=0,K=H.length,ge=K>>>1;we<ge;){var Oe=2*(we+1)-1,xe=H[Oe],ve=Oe+1,Fe=H[ve];if(0>g(xe,oe))ve<K&&0>g(Fe,xe)?(H[we]=Fe,H[ve]=oe,we=ve):(H[we]=xe,H[Oe]=oe,we=Oe);else if(ve<K&&0>g(Fe,oe))H[we]=Fe,H[ve]=oe,we=ve;else break e}}return ee}function g(H,ee){var oe=H.sortIndex-ee.sortIndex;return oe!==0?oe:H.id-ee.id}if(l.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;l.unstable_now=function(){return m.now()}}else{var w=Date,N=w.now();l.unstable_now=function(){return w.now()-N}}var C=[],b=[],S=1,E=null,M=3,D=!1,B=!1,_=!1,G=!1,R=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function V(H){for(var ee=d(b);ee!==null;){if(ee.callback===null)f(b);else if(ee.startTime<=H)f(b),ee.sortIndex=ee.expirationTime,c(C,ee);else break;ee=d(b)}}function Q(H){if(_=!1,V(H),!B)if(d(C)!==null)B=!0,$||($=!0,re());else{var ee=d(b);ee!==null&&U(Q,ee.startTime-H)}}var $=!1,P=-1,X=5,Z=-1;function de(){return G?!0:!(l.unstable_now()-Z<X)}function he(){if(G=!1,$){var H=l.unstable_now();Z=H;var ee=!0;try{e:{B=!1,_&&(_=!1,z(P),P=-1),D=!0;var oe=M;try{t:{for(V(H),E=d(C);E!==null&&!(E.expirationTime>H&&de());){var we=E.callback;if(typeof we=="function"){E.callback=null,M=E.priorityLevel;var K=we(E.expirationTime<=H);if(H=l.unstable_now(),typeof K=="function"){E.callback=K,V(H),ee=!0;break t}E===d(C)&&f(C),V(H)}else f(C);E=d(C)}if(E!==null)ee=!0;else{var ge=d(b);ge!==null&&U(Q,ge.startTime-H),ee=!1}}break e}finally{E=null,M=oe,D=!1}ee=void 0}}finally{ee?re():$=!1}}}var re;if(typeof F=="function")re=function(){F(he)};else if(typeof MessageChannel<"u"){var le=new MessageChannel,W=le.port2;le.port1.onmessage=he,re=function(){W.postMessage(null)}}else re=function(){R(he,0)};function U(H,ee){P=R(function(){H(l.unstable_now())},ee)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(H){H.callback=null},l.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):X=0<H?Math.floor(1e3/H):5},l.unstable_getCurrentPriorityLevel=function(){return M},l.unstable_next=function(H){switch(M){case 1:case 2:case 3:var ee=3;break;default:ee=M}var oe=M;M=ee;try{return H()}finally{M=oe}},l.unstable_requestPaint=function(){G=!0},l.unstable_runWithPriority=function(H,ee){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var oe=M;M=H;try{return ee()}finally{M=oe}},l.unstable_scheduleCallback=function(H,ee,oe){var we=l.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?we+oe:we):oe=we,H){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=oe+K,H={id:S++,callback:ee,priorityLevel:H,startTime:oe,expirationTime:K,sortIndex:-1},oe>we?(H.sortIndex=oe,c(b,H),d(C)===null&&H===d(b)&&(_?(z(P),P=-1):_=!0,U(Q,oe-we))):(H.sortIndex=K,c(C,H),B||D||(B=!0,$||($=!0,re()))),H},l.unstable_shouldYield=de,l.unstable_wrapCallback=function(H){var ee=M;return function(){var oe=M;M=ee;try{return H.apply(this,arguments)}finally{M=oe}}}}(D0)),D0}var zg;function Xy(){return zg||(zg=1,M0.exports=Yy()),M0.exports}var R0={exports:{}},ur={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function Zy(){if(Ug)return ur;Ug=1;var l=Sf();function c(C){var b="https://react.dev/errors/"+C;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)b+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+C+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function d(){}var f={d:{f:d,r:function(){throw Error(c(522))},D:d,C:d,L:d,m:d,X:d,S:d,M:d},p:0,findDOMNode:null},g=Symbol.for("react.portal");function m(C,b,S){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:g,key:E==null?null:""+E,children:C,containerInfo:b,implementation:S}}var w=l.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function N(C,b){if(C==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return ur.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=f,ur.createPortal=function(C,b){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(c(299));return m(C,b,null,S)},ur.flushSync=function(C){var b=w.T,S=f.p;try{if(w.T=null,f.p=2,C)return C()}finally{w.T=b,f.p=S,f.d.f()}},ur.preconnect=function(C,b){typeof C=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,f.d.C(C,b))},ur.prefetchDNS=function(C){typeof C=="string"&&f.d.D(C)},ur.preinit=function(C,b){if(typeof C=="string"&&b&&typeof b.as=="string"){var S=b.as,E=N(S,b.crossOrigin),M=typeof b.integrity=="string"?b.integrity:void 0,D=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;S==="style"?f.d.S(C,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:E,integrity:M,fetchPriority:D}):S==="script"&&f.d.X(C,{crossOrigin:E,integrity:M,fetchPriority:D,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},ur.preinitModule=function(C,b){if(typeof C=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var S=N(b.as,b.crossOrigin);f.d.M(C,{crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&f.d.M(C)},ur.preload=function(C,b){if(typeof C=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var S=b.as,E=N(S,b.crossOrigin);f.d.L(C,S,{crossOrigin:E,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},ur.preloadModule=function(C,b){if(typeof C=="string")if(b){var S=N(b.as,b.crossOrigin);f.d.m(C,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:S,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else f.d.m(C)},ur.requestFormReset=function(C){f.d.r(C)},ur.unstable_batchedUpdates=function(C,b){return C(b)},ur.useFormState=function(C,b,S){return w.H.useFormState(C,b,S)},ur.useFormStatus=function(){return w.H.useHostTransitionStatus()},ur.version="19.1.1",ur}var Hg;function Qy(){if(Hg)return R0.exports;Hg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),R0.exports=Zy(),R0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vg;function $y(){if(Vg)return vo;Vg=1;var l=Xy(),c=Sf(),d=Qy();function f(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function g(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function m(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function w(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function N(t){if(m(t)!==t)throw Error(f(188))}function C(t){var r=t.alternate;if(!r){if(r=m(t),r===null)throw Error(f(188));return r!==t?null:t}for(var i=t,h=r;;){var y=i.return;if(y===null)break;var j=y.alternate;if(j===null){if(h=y.return,h!==null){i=h;continue}break}if(y.child===j.child){for(j=y.child;j;){if(j===i)return N(y),t;if(j===h)return N(y),r;j=j.sibling}throw Error(f(188))}if(i.return!==h.return)i=y,h=j;else{for(var I=!1,Y=y.child;Y;){if(Y===i){I=!0,i=y,h=j;break}if(Y===h){I=!0,h=y,i=j;break}Y=Y.sibling}if(!I){for(Y=j.child;Y;){if(Y===i){I=!0,i=j,h=y;break}if(Y===h){I=!0,h=j,i=y;break}Y=Y.sibling}if(!I)throw Error(f(189))}}if(i.alternate!==h)throw Error(f(190))}if(i.tag!==3)throw Error(f(188));return i.stateNode.current===i?t:r}function b(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=b(t),r!==null)return r;t=t.sibling}return null}var S=Object.assign,E=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),z=Symbol.for("react.consumer"),F=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),Q=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),X=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),he=Symbol.iterator;function re(t){return t===null||typeof t!="object"?null:(t=he&&t[he]||t["@@iterator"],typeof t=="function"?t:null)}var le=Symbol.for("react.client.reference");function W(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===le?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case B:return"Fragment";case G:return"Profiler";case _:return"StrictMode";case Q:return"Suspense";case $:return"SuspenseList";case Z:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case D:return"Portal";case F:return(t.displayName||"Context")+".Provider";case z:return(t._context.displayName||"Context")+".Consumer";case V:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case P:return r=t.displayName||null,r!==null?r:W(t.type)||"Memo";case X:r=t._payload,t=t._init;try{return W(t(r))}catch{}}return null}var U=Array.isArray,H=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=d.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe={pending:!1,data:null,method:null,action:null},we=[],K=-1;function ge(t){return{current:t}}function Oe(t){0>K||(t.current=we[K],we[K]=null,K--)}function xe(t,r){K++,we[K]=t.current,t.current=r}var ve=ge(null),Fe=ge(null),ie=ge(null),Qe=ge(null);function ye(t,r){switch(xe(ie,r),xe(Fe,t),xe(ve,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?cg(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=cg(r),t=dg(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Oe(ve),xe(ve,t)}function dt(){Oe(ve),Oe(Fe),Oe(ie)}function rt(t){t.memoizedState!==null&&xe(Qe,t);var r=ve.current,i=dg(r,t.type);r!==i&&(xe(Fe,t),xe(ve,i))}function lt(t){Fe.current===t&&(Oe(ve),Oe(Fe)),Qe.current===t&&(Oe(Qe),go._currentValue=oe)}var Ze=Object.prototype.hasOwnProperty,Je=l.unstable_scheduleCallback,be=l.unstable_cancelCallback,Ye=l.unstable_shouldYield,Ae=l.unstable_requestPaint,Xe=l.unstable_now,Ge=l.unstable_getCurrentPriorityLevel,Me=l.unstable_ImmediatePriority,ae=l.unstable_UserBlockingPriority,je=l.unstable_NormalPriority,We=l.unstable_LowPriority,xt=l.unstable_IdlePriority,Mt=l.log,Vt=l.unstable_setDisableYieldValue,Re=null,et=null;function At(t){if(typeof Mt=="function"&&Vt(t),et&&typeof et.setStrictMode=="function")try{et.setStrictMode(Re,t)}catch{}}var pt=Math.clz32?Math.clz32:st,Yt=Math.log,Tt=Math.LN2;function st(t){return t>>>=0,t===0?32:31-(Yt(t)/Tt|0)|0}var $e=256,qe=4194304;function $t(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function ut(t,r,i){var h=t.pendingLanes;if(h===0)return 0;var y=0,j=t.suspendedLanes,I=t.pingedLanes;t=t.warmLanes;var Y=h&134217727;return Y!==0?(h=Y&~j,h!==0?y=$t(h):(I&=Y,I!==0?y=$t(I):i||(i=Y&~t,i!==0&&(y=$t(i))))):(Y=h&~j,Y!==0?y=$t(Y):I!==0?y=$t(I):i||(i=h&~t,i!==0&&(y=$t(i)))),y===0?0:r!==0&&r!==y&&(r&j)===0&&(j=y&-y,i=r&-r,j>=i||j===32&&(i&4194048)!==0)?r:y}function Bt(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ms(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ml(){var t=$e;return $e<<=1,($e&4194048)===0&&($e=256),t}function ki(){var t=qe;return qe<<=1,(qe&62914560)===0&&(qe=4194304),t}function Lt(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Dr(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function qo(t,r,i,h,y,j){var I=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var Y=t.entanglements,ne=t.expirationTimes,Se=t.hiddenUpdates;for(i=I&~i;0<i;){var Be=31-pt(i),Pe=1<<Be;Y[Be]=0,ne[Be]=-1;var Ee=Se[Be];if(Ee!==null)for(Se[Be]=null,Be=0;Be<Ee.length;Be++){var _e=Ee[Be];_e!==null&&(_e.lane&=-536870913)}i&=~Pe}h!==0&&Ai(t,h,0),j!==0&&y===0&&t.tag!==0&&(t.suspendedLanes|=j&~(I&~r))}function Ai(t,r,i){t.pendingLanes|=r,t.suspendedLanes&=~r;var h=31-pt(r);t.entangledLanes|=r,t.entanglements[h]=t.entanglements[h]|1073741824|i&4194090}function jr(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var h=31-pt(i),y=1<<h;y&r|t[h]&r&&(t[h]|=r),i&=~y}}function Jn(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function La(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Gs(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Tg(t.type))}function Dl(t,r){var i=ee.p;try{return ee.p=t,r()}finally{ee.p=i}}var Ua=Math.random().toString(36).slice(2),Qa="__reactFiber$"+Ua,ja="__reactProps$"+Ua,ps="__reactContainer$"+Ua,$a="__reactEvents$"+Ua,qs="__reactListeners$"+Ua,Cr="__reactHandles$"+Ua,tt="__reactResources$"+Ua,qr="__reactMarker$"+Ua;function el(t){delete t[Qa],delete t[ja],delete t[$a],delete t[qs],delete t[Cr]}function _a(t){var r=t[Qa];if(r)return r;for(var i=t.parentNode;i;){if(r=i[ps]||i[Qa]){if(i=r.alternate,r.child!==null||i!==null&&i.child!==null)for(t=xg(t);t!==null;){if(i=t[Qa])return i;t=xg(t)}return r}t=i,i=t.parentNode}return null}function Rr(t){if(t=t[Qa]||t[ps]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function ys(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(f(33))}function es(t){var r=t[tt];return r||(r=t[tt]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Wt(t){t[qr]=!0}var Yo=new Set,Xo={};function Wa(t,r){Ca(t,r),Ca(t+"Capture",r)}function Ca(t,r){for(Xo[t]=r,t=0;t<r.length;t++)Yo.add(r[t])}var da=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Si={},ts={};function Ei(t){return Ze.call(ts,t)?!0:Ze.call(Si,t)?!1:da.test(t)?ts[t]=!0:(Si[t]=!0,!1)}function ze(t,r,i){if(Ei(r))if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var h=r.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+i)}}function Rl(t,r,i){if(i===null)t.removeAttribute(r);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+i)}}function Ut(t,r,i,h){if(h===null)t.removeAttribute(i);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(r,i,""+h)}}var bs,Zo;function Dt(t){if(bs===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);bs=r&&r[1]||"",Zo=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+bs+t+Zo}var Ft=!1;function St(t,r){if(!t||Ft)return"";Ft=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(r){var Pe=function(){throw Error()};if(Object.defineProperty(Pe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Pe,[])}catch(_e){var Ee=_e}Reflect.construct(t,[],Pe)}else{try{Pe.call()}catch(_e){Ee=_e}t.call(Pe.prototype)}}else{try{throw Error()}catch(_e){Ee=_e}(Pe=t())&&typeof Pe.catch=="function"&&Pe.catch(function(){})}}catch(_e){if(_e&&Ee&&typeof _e.stack=="string")return[_e.stack,Ee.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=h.DetermineComponentFrameRoot(),I=j[0],Y=j[1];if(I&&Y){var ne=I.split(`
`),Se=Y.split(`
`);for(y=h=0;h<ne.length&&!ne[h].includes("DetermineComponentFrameRoot");)h++;for(;y<Se.length&&!Se[y].includes("DetermineComponentFrameRoot");)y++;if(h===ne.length||y===Se.length)for(h=ne.length-1,y=Se.length-1;1<=h&&0<=y&&ne[h]!==Se[y];)y--;for(;1<=h&&0<=y;h--,y--)if(ne[h]!==Se[y]){if(h!==1||y!==1)do if(h--,y--,0>y||ne[h]!==Se[y]){var Be=`
`+ne[h].replace(" at new "," at ");return t.displayName&&Be.includes("<anonymous>")&&(Be=Be.replace("<anonymous>",t.displayName)),Be}while(1<=h&&0<=y);break}}}finally{Ft=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?Dt(i):""}function Ti(t){switch(t.tag){case 26:case 27:case 5:return Dt(t.type);case 16:return Dt("Lazy");case 13:return Dt("Suspense");case 19:return Dt("SuspenseList");case 0:case 15:return St(t.type,!1);case 11:return St(t.type.render,!1);case 1:return St(t.type,!0);case 31:return Dt("Activity");default:return""}}function Il(t){try{var r="";do r+=Ti(t),t=t.return;while(t);return r}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}function nr(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ka(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ws(t){var r=ka(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),h=""+t[r];if(!t.hasOwnProperty(r)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var y=i.get,j=i.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return y.call(this)},set:function(I){h=""+I,j.call(this,I)}}),Object.defineProperty(t,r,{enumerable:i.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function Ol(t){t._valueTracker||(t._valueTracker=ws(t))}function ga(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var i=r.getValue(),h="";return t&&(h=ka(t)?t.checked?"true":"false":t.value),t=h,t!==i?(r.setValue(t),!0):!1}function Ir(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Id=/[\n"\\]/g;function Ha(t){return t.replace(Id,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function Xt(t,r,i,h,y,j,I,Y){t.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?t.type=I:t.removeAttribute("type"),r!=null?I==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+nr(r)):t.value!==""+nr(r)&&(t.value=""+nr(r)):I!=="submit"&&I!=="reset"||t.removeAttribute("value"),r!=null?Ce(t,I,nr(r)):i!=null?Ce(t,I,nr(i)):h!=null&&t.removeAttribute("value"),y==null&&j!=null&&(t.defaultChecked=!!j),y!=null&&(t.checked=y&&typeof y!="function"&&typeof y!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?t.name=""+nr(Y):t.removeAttribute("name")}function Va(t,r,i,h,y,j,I,Y){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.type=j),r!=null||i!=null){if(!(j!=="submit"&&j!=="reset"||r!=null))return;i=i!=null?""+nr(i):"",r=r!=null?""+nr(r):i,Y||r===t.value||(t.value=r),t.defaultValue=r}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,t.checked=Y?t.checked:!!h,t.defaultChecked=!!h,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(t.name=I)}function Ce(t,r,i){r==="number"&&Ir(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function J(t,r,i,h){if(t=t.options,r){r={};for(var y=0;y<i.length;y++)r["$"+i[y]]=!0;for(i=0;i<t.length;i++)y=r.hasOwnProperty("$"+t[i].value),t[i].selected!==y&&(t[i].selected=y),y&&h&&(t[i].defaultSelected=!0)}else{for(i=""+nr(i),r=null,y=0;y<t.length;y++){if(t[y].value===i){t[y].selected=!0,h&&(t[y].defaultSelected=!0);return}r!==null||t[y].disabled||(r=t[y])}r!==null&&(r.selected=!0)}}function it(t,r,i){if(r!=null&&(r=""+nr(r),r!==t.value&&(t.value=r),i==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=i!=null?""+nr(i):""}function Ma(t,r,i,h){if(r==null){if(h!=null){if(i!=null)throw Error(f(92));if(U(h)){if(1<h.length)throw Error(f(93));h=h[0]}i=h}i==null&&(i=""),r=i}i=nr(r),t.defaultValue=i,h=t.textContent,h===i&&h!==""&&h!==null&&(t.value=h)}function Ga(t,r){if(r){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=r;return}}t.textContent=r}var Od=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bl(t,r,i){var h=r.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?h?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":h?t.setProperty(r,i):typeof i!="number"||i===0||Od.has(r)?r==="float"?t.cssFloat=i:t[r]=(""+i).trim():t[r]=i+"px"}function hr(t,r,i){if(r!=null&&typeof r!="object")throw Error(f(62));if(t=t.style,i!=null){for(var h in i)!i.hasOwnProperty(h)||r!=null&&r.hasOwnProperty(h)||(h.indexOf("--")===0?t.setProperty(h,""):h==="float"?t.cssFloat="":t[h]="");for(var y in r)h=r[y],r.hasOwnProperty(y)&&i[y]!==h&&Bl(t,y,h)}else for(var j in r)r.hasOwnProperty(j)&&Bl(t,j,r[j])}function ot(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fa=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Qo=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ll(t){return Qo.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var tl=null;function mn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var vs=null,pn=null;function Da(t){var r=Rr(t);if(r&&(t=r.stateNode)){var i=t[ja]||null;e:switch(t=r.stateNode,r.type){case"input":if(Xt(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),r=i.name,i.type==="radio"&&r!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+Ha(""+r)+'"][type="radio"]'),r=0;r<i.length;r++){var h=i[r];if(h!==t&&h.form===t.form){var y=h[ja]||null;if(!y)throw Error(f(90));Xt(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(r=0;r<i.length;r++)h=i[r],h.form===t.form&&ga(h)}break e;case"textarea":it(t,i.value,i.defaultValue);break e;case"select":r=i.value,r!=null&&J(t,!!i.multiple,r,!1)}}}var Ys=!1;function as(t,r,i){if(Ys)return t(r,i);Ys=!0;try{var h=t(r);return h}finally{if(Ys=!1,(vs!==null||pn!==null)&&(Ic(),vs&&(r=vs,t=pn,pn=vs=null,Da(r),t)))for(r=0;r<t.length;r++)Da(t[r])}}function ft(t,r){var i=t.stateNode;if(i===null)return null;var h=i[ja]||null;if(h===null)return null;i=h[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(t=t.type,h=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!h;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(f(231,r,typeof i));return i}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wt=!1;if(rs)try{var ba={};Object.defineProperty(ba,"passive",{get:function(){wt=!0}}),window.addEventListener("test",ba,ba),window.removeEventListener("test",ba,ba)}catch{wt=!1}var Ns=null,al=null,rl=null;function js(){if(rl)return rl;var t,r=al,i=r.length,h,y="value"in Ns?Ns.value:Ns.textContent,j=y.length;for(t=0;t<i&&r[t]===y[t];t++);var I=i-t;for(h=1;h<=I&&r[i-h]===y[j-h];h++);return rl=y.slice(t,1<h?1-h:void 0)}function Fl(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function Cs(){return!0}function yn(){return!1}function Fa(t){function r(i,h,y,j,I){this._reactName=i,this._targetInst=y,this.type=h,this.nativeEvent=j,this.target=I,this.currentTarget=null;for(var Y in t)t.hasOwnProperty(Y)&&(i=t[Y],this[Y]=i?i(j):j[Y]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Cs:yn,this.isPropagationStopped=yn,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Cs)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Cs)},persist:function(){},isPersistent:Cs}),r}var ks={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},As=Fa(ks),ss=S({},ks,{view:0,detail:0}),lr=Fa(ss),Pl,zl,bn,Ul=S({},ss,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bn&&(bn&&t.type==="mousemove"?(Pl=t.screenX-bn.screenX,zl=t.screenY-bn.screenY):zl=Pl=0,bn=t),Pl)},movementY:function(t){return"movementY"in t?t.movementY:zl}}),$o=Fa(Ul),Bd=S({},Ul,{dataTransfer:0}),Zt=Fa(Bd),Wo=S({},ss,{relatedTarget:0}),wn=Fa(Wo),Ss=S({},ks,{animationName:0,elapsedTime:0,pseudoElement:0}),Ld=Fa(Ss),De=S({},ks,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),jt=Fa(De),qa=S({},ks,{data:0}),sl=Fa(qa),Ko={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zd(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=Pd[t])?!!r[t]:!1}function nl(){return zd}var Ra=S({},ss,{key:function(t){if(t.key){var r=Ko[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Fd[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nl,charCode:function(t){return t.type==="keypress"?Fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),_i=Fa(Ra),ma=S({},Ul,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ll=Fa(ma),Xs=S({},ss,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nl}),Kt=Fa(Xs),ht=S({},ks,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ud=Fa(ht),oa=S({},Ul,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Zs=Fa(oa),vn=S({},ks,{newState:0,oldState:0}),Hd=Fa(vn),Yr=[9,13,27,32],il=rs&&"CompositionEvent"in window,Nn=null;rs&&"documentMode"in document&&(Nn=document.documentMode);var Mi=rs&&"TextEvent"in window&&!Nn,Di=rs&&(!il||Nn&&8<Nn&&11>=Nn),Ri=" ",Jo=!1;function Qs(t,r){switch(t){case"keyup":return Yr.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hl(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jn=!1;function ol(t,r){switch(t){case"compositionend":return Hl(r);case"keypress":return r.which!==32?null:(Jo=!0,Ri);case"textInput":return t=r.data,t===Ri&&Jo?null:t;default:return null}}function Vd(t,r){if(jn)return t==="compositionend"||!il&&Qs(t,r)?(t=js(),rl=al=Ns=null,jn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Di&&r.locale!=="ko"?null:r.data;default:return null}}var Es={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cl(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!Es[t.type]:r==="textarea"}function xr(t,r,i,h){vs?pn?pn.push(h):pn=[h]:vs=h,r=zc(r,"onChange"),0<r.length&&(i=new As("onChange","change",null,i,h),t.push({event:i,listeners:r}))}var Cn=null,ir=null;function Gd(t){sg(t,0)}function kn(t){var r=ys(t);if(ga(r))return t}function ec(t,r){if(t==="change")return r}var Ii=!1;if(rs){var kr;if(rs){var Oi="oninput"in document;if(!Oi){var Vl=document.createElement("div");Vl.setAttribute("oninput","return;"),Oi=typeof Vl.oninput=="function"}kr=Oi}else kr=!1;Ii=kr&&(!document.documentMode||9<document.documentMode)}function An(){Cn&&(Cn.detachEvent("onpropertychange",Ot),ir=Cn=null)}function Ot(t){if(t.propertyName==="value"&&kn(ir)){var r=[];xr(r,ir,t,mn(t)),as(Gd,r)}}function Gl(t,r,i){t==="focusin"?(An(),Cn=r,ir=i,Cn.attachEvent("onpropertychange",Ot)):t==="focusout"&&An()}function O(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return kn(ir)}function a(t,r){if(t==="click")return kn(r)}function s(t,r){if(t==="input"||t==="change")return kn(r)}function n(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var o=typeof Object.is=="function"?Object.is:n;function u(t,r){if(o(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),h=Object.keys(r);if(i.length!==h.length)return!1;for(h=0;h<i.length;h++){var y=i[h];if(!Ze.call(r,y)||!o(t[y],r[y]))return!1}return!0}function x(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function p(t,r){var i=x(t);t=0;for(var h;i;){if(i.nodeType===3){if(h=t+i.textContent.length,t<=r&&h>=r)return{node:i,offset:r-t};t=h}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=x(i)}}function v(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?v(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function A(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ir(t.document);r instanceof t.HTMLIFrameElement;){try{var i=typeof r.contentWindow.location.href=="string"}catch{i=!1}if(i)t=r.contentWindow;else break;r=Ir(t.document)}return r}function T(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var L=rs&&"documentMode"in document&&11>=document.documentMode,q=null,te=null,ce=null,ue=!1;function Ne(t,r,i){var h=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;ue||q==null||q!==Ir(h)||(h=q,"selectionStart"in h&&T(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),ce&&u(ce,h)||(ce=h,h=zc(te,"onSelect"),0<h.length&&(r=new As("onSelect","select",null,r,i),t.push({event:r,listeners:h}),r.target=q)))}function Te(t,r){var i={};return i[t.toLowerCase()]=r.toLowerCase(),i["Webkit"+t]="webkit"+r,i["Moz"+t]="moz"+r,i}var He={animationend:Te("Animation","AnimationEnd"),animationiteration:Te("Animation","AnimationIteration"),animationstart:Te("Animation","AnimationStart"),transitionrun:Te("Transition","TransitionRun"),transitionstart:Te("Transition","TransitionStart"),transitioncancel:Te("Transition","TransitionCancel"),transitionend:Te("Transition","TransitionEnd")},Ve={},Ue={};rs&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete He.animationend.animation,delete He.animationiteration.animation,delete He.animationstart.animation),"TransitionEvent"in window||delete He.transitionend.transition);function vt(t){if(Ve[t])return Ve[t];if(!He[t])return t;var r=He[t],i;for(i in r)if(r.hasOwnProperty(i)&&i in Ue)return Ve[t]=r[i];return t}var bt=vt("animationend"),tr=vt("animationiteration"),Ar=vt("animationstart"),or=vt("transitionrun"),Jt=vt("transitionstart"),Ya=vt("transitioncancel"),cr=vt("transitionend"),$s=new Map,Ts="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ts.push("scrollEnd");function Or(t,r){$s.set(t,r),Wa(r,[t])}var tc=new WeakMap;function Xr(t,r){if(typeof t=="object"&&t!==null){var i=tc.get(t);return i!==void 0?i:(r={value:t,source:r,stack:Il(r)},tc.set(t,r),r)}return{value:t,source:r,stack:Il(r)}}var Zr=[],ql=0,qd=0;function ac(){for(var t=ql,r=qd=ql=0;r<t;){var i=Zr[r];Zr[r++]=null;var h=Zr[r];Zr[r++]=null;var y=Zr[r];Zr[r++]=null;var j=Zr[r];if(Zr[r++]=null,h!==null&&y!==null){var I=h.pending;I===null?y.next=y:(y.next=I.next,I.next=y),h.pending=y}j!==0&&Hf(i,y,j)}}function rc(t,r,i,h){Zr[ql++]=t,Zr[ql++]=r,Zr[ql++]=i,Zr[ql++]=h,qd|=h,t.lanes|=h,t=t.alternate,t!==null&&(t.lanes|=h)}function Yd(t,r,i,h){return rc(t,r,i,h),sc(t)}function Yl(t,r){return rc(t,null,null,r),sc(t)}function Hf(t,r,i){t.lanes|=i;var h=t.alternate;h!==null&&(h.lanes|=i);for(var y=!1,j=t.return;j!==null;)j.childLanes|=i,h=j.alternate,h!==null&&(h.childLanes|=i),j.tag===22&&(t=j.stateNode,t===null||t._visibility&1||(y=!0)),t=j,j=j.return;return t.tag===3?(j=t.stateNode,y&&r!==null&&(y=31-pt(i),t=j.hiddenUpdates,h=t[y],h===null?t[y]=[r]:h.push(r),r.lane=i|536870912),j):null}function sc(t){if(50<lo)throw lo=0,Ku=null,Error(f(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Xl={};function Sp(t,r,i,h){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Br(t,r,i,h){return new Sp(t,r,i,h)}function Xd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ws(t,r){var i=t.alternate;return i===null?(i=Br(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function Vf(t,r){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,r=i.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function nc(t,r,i,h,y,j){var I=0;if(h=t,typeof t=="function")Xd(t)&&(I=1);else if(typeof t=="string")I=Ty(t,i,ve.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case Z:return t=Br(31,i,r,y),t.elementType=Z,t.lanes=j,t;case B:return dl(i.children,y,j,r);case _:I=8,y|=24;break;case G:return t=Br(12,i,r,y|2),t.elementType=G,t.lanes=j,t;case Q:return t=Br(13,i,r,y),t.elementType=Q,t.lanes=j,t;case $:return t=Br(19,i,r,y),t.elementType=$,t.lanes=j,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R:case F:I=10;break e;case z:I=9;break e;case V:I=11;break e;case P:I=14;break e;case X:I=16,h=null;break e}I=29,i=Error(f(130,t===null?"null":typeof t,"")),h=null}return r=Br(I,i,r,y),r.elementType=t,r.type=h,r.lanes=j,r}function dl(t,r,i,h){return t=Br(7,t,h,r),t.lanes=i,t}function Zd(t,r,i){return t=Br(6,t,null,r),t.lanes=i,t}function Qd(t,r,i){return r=Br(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var Zl=[],Ql=0,lc=null,ic=0,Qr=[],$r=0,ul=null,Ks=1,Js="";function fl(t,r){Zl[Ql++]=ic,Zl[Ql++]=lc,lc=t,ic=r}function Gf(t,r,i){Qr[$r++]=Ks,Qr[$r++]=Js,Qr[$r++]=ul,ul=t;var h=Ks;t=Js;var y=32-pt(h)-1;h&=~(1<<y),i+=1;var j=32-pt(r)+y;if(30<j){var I=y-y%5;j=(h&(1<<I)-1).toString(32),h>>=I,y-=I,Ks=1<<32-pt(r)+y|i<<y|h,Js=j+t}else Ks=1<<j|i<<y|h,Js=t}function $d(t){t.return!==null&&(fl(t,1),Gf(t,1,0))}function Wd(t){for(;t===lc;)lc=Zl[--Ql],Zl[Ql]=null,ic=Zl[--Ql],Zl[Ql]=null;for(;t===ul;)ul=Qr[--$r],Qr[$r]=null,Js=Qr[--$r],Qr[$r]=null,Ks=Qr[--$r],Qr[$r]=null}var gr=null,Aa=null,Gt=!1,hl=null,_s=!1,Kd=Error(f(519));function xl(t){var r=Error(f(418,""));throw Fi(Xr(r,t)),Kd}function qf(t){var r=t.stateNode,i=t.type,h=t.memoizedProps;switch(r[Qa]=t,r[ja]=h,i){case"dialog":It("cancel",r),It("close",r);break;case"iframe":case"object":case"embed":It("load",r);break;case"video":case"audio":for(i=0;i<oo.length;i++)It(oo[i],r);break;case"source":It("error",r);break;case"img":case"image":case"link":It("error",r),It("load",r);break;case"details":It("toggle",r);break;case"input":It("invalid",r),Va(r,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0),Ol(r);break;case"select":It("invalid",r);break;case"textarea":It("invalid",r),Ma(r,h.value,h.defaultValue,h.children),Ol(r)}i=h.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||r.textContent===""+i||h.suppressHydrationWarning===!0||og(r.textContent,i)?(h.popover!=null&&(It("beforetoggle",r),It("toggle",r)),h.onScroll!=null&&It("scroll",r),h.onScrollEnd!=null&&It("scrollend",r),h.onClick!=null&&(r.onclick=Uc),r=!0):r=!1,r||xl(t)}function Yf(t){for(gr=t.return;gr;)switch(gr.tag){case 5:case 13:_s=!1;return;case 27:case 3:_s=!0;return;default:gr=gr.return}}function Bi(t){if(t!==gr)return!1;if(!Gt)return Yf(t),Gt=!0,!1;var r=t.tag,i;if((i=r!==3&&r!==27)&&((i=r===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||x0(t.type,t.memoizedProps)),i=!i),i&&Aa&&xl(t),Yf(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(f(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(i=t.data,i==="/$"){if(r===0){Aa=ls(t.nextSibling);break e}r--}else i!=="$"&&i!=="$!"&&i!=="$?"||r++;t=t.nextSibling}Aa=null}}else r===27?(r=Aa,Hn(t.type)?(t=y0,y0=null,Aa=t):Aa=r):Aa=gr?ls(t.stateNode.nextSibling):null;return!0}function Li(){Aa=gr=null,Gt=!1}function Xf(){var t=hl;return t!==null&&(Tr===null?Tr=t:Tr.push.apply(Tr,t),hl=null),t}function Fi(t){hl===null?hl=[t]:hl.push(t)}var Jd=ge(null),gl=null,en=null;function Sn(t,r,i){xe(Jd,r._currentValue),r._currentValue=i}function tn(t){t._currentValue=Jd.current,Oe(Jd)}function eu(t,r,i){for(;t!==null;){var h=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,h!==null&&(h.childLanes|=r)):h!==null&&(h.childLanes&r)!==r&&(h.childLanes|=r),t===i)break;t=t.return}}function tu(t,r,i,h){var y=t.child;for(y!==null&&(y.return=t);y!==null;){var j=y.dependencies;if(j!==null){var I=y.child;j=j.firstContext;e:for(;j!==null;){var Y=j;j=y;for(var ne=0;ne<r.length;ne++)if(Y.context===r[ne]){j.lanes|=i,Y=j.alternate,Y!==null&&(Y.lanes|=i),eu(j.return,i,t),h||(I=null);break e}j=Y.next}}else if(y.tag===18){if(I=y.return,I===null)throw Error(f(341));I.lanes|=i,j=I.alternate,j!==null&&(j.lanes|=i),eu(I,i,t),I=null}else I=y.child;if(I!==null)I.return=y;else for(I=y;I!==null;){if(I===t){I=null;break}if(y=I.sibling,y!==null){y.return=I.return,I=y;break}I=I.return}y=I}}function Pi(t,r,i,h){t=null;for(var y=r,j=!1;y!==null;){if(!j){if((y.flags&524288)!==0)j=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var I=y.alternate;if(I===null)throw Error(f(387));if(I=I.memoizedProps,I!==null){var Y=y.type;o(y.pendingProps.value,I.value)||(t!==null?t.push(Y):t=[Y])}}else if(y===Qe.current){if(I=y.alternate,I===null)throw Error(f(387));I.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(t!==null?t.push(go):t=[go])}y=y.return}t!==null&&tu(r,t,i,h),r.flags|=262144}function oc(t){for(t=t.firstContext;t!==null;){if(!o(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function ml(t){gl=t,en=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function dr(t){return Zf(gl,t)}function cc(t,r){return gl===null&&ml(t),Zf(t,r)}function Zf(t,r){var i=r._currentValue;if(r={context:r,memoizedValue:i,next:null},en===null){if(t===null)throw Error(f(308));en=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else en=en.next=r;return i}var Ep=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(i,h){t.push(h)}};this.abort=function(){r.aborted=!0,t.forEach(function(i){return i()})}},Tp=l.unstable_scheduleCallback,_p=l.unstable_NormalPriority,Xa={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function au(){return{controller:new Ep,data:new Map,refCount:0}}function zi(t){t.refCount--,t.refCount===0&&Tp(_p,function(){t.controller.abort()})}var Ui=null,ru=0,$l=0,Wl=null;function Mp(t,r){if(Ui===null){var i=Ui=[];ru=0,$l=n0(),Wl={status:"pending",value:void 0,then:function(h){i.push(h)}}}return ru++,r.then(Qf,Qf),r}function Qf(){if(--ru===0&&Ui!==null){Wl!==null&&(Wl.status="fulfilled");var t=Ui;Ui=null,$l=0,Wl=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function Dp(t,r){var i=[],h={status:"pending",value:null,reason:null,then:function(y){i.push(y)}};return t.then(function(){h.status="fulfilled",h.value=r;for(var y=0;y<i.length;y++)(0,i[y])(r)},function(y){for(h.status="rejected",h.reason=y,y=0;y<i.length;y++)(0,i[y])(void 0)}),h}var $f=H.S;H.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Mp(t,r),$f!==null&&$f(t,r)};var pl=ge(null);function su(){var t=pl.current;return t!==null?t:ua.pooledCache}function dc(t,r){r===null?xe(pl,pl.current):xe(pl,r.pool)}function Wf(){var t=su();return t===null?null:{parent:Xa._currentValue,pool:t}}var Hi=Error(f(460)),Kf=Error(f(474)),uc=Error(f(542)),nu={then:function(){}};function Jf(t){return t=t.status,t==="fulfilled"||t==="rejected"}function fc(){}function eh(t,r,i){switch(i=t[i],i===void 0?t.push(r):i!==r&&(r.then(fc,fc),r=i),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ah(t),t;default:if(typeof r.status=="string")r.then(fc,fc);else{if(t=ua,t!==null&&100<t.shellSuspendCounter)throw Error(f(482));t=r,t.status="pending",t.then(function(h){if(r.status==="pending"){var y=r;y.status="fulfilled",y.value=h}},function(h){if(r.status==="pending"){var y=r;y.status="rejected",y.reason=h}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,ah(t),t}throw Vi=r,Hi}}var Vi=null;function th(){if(Vi===null)throw Error(f(459));var t=Vi;return Vi=null,t}function ah(t){if(t===Hi||t===uc)throw Error(f(483))}var En=!1;function lu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function iu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Tn(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function _n(t,r,i){var h=t.updateQueue;if(h===null)return null;if(h=h.shared,(ea&2)!==0){var y=h.pending;return y===null?r.next=r:(r.next=y.next,y.next=r),h.pending=r,r=sc(t),Hf(t,null,i),r}return rc(t,h,r,i),sc(t)}function Gi(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194048)!==0)){var h=r.lanes;h&=t.pendingLanes,i|=h,r.lanes=i,jr(t,i)}}function ou(t,r){var i=t.updateQueue,h=t.alternate;if(h!==null&&(h=h.updateQueue,i===h)){var y=null,j=null;if(i=i.firstBaseUpdate,i!==null){do{var I={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};j===null?y=j=I:j=j.next=I,i=i.next}while(i!==null);j===null?y=j=r:j=j.next=r}else y=j=r;i={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:j,shared:h.shared,callbacks:h.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}var cu=!1;function qi(){if(cu){var t=Wl;if(t!==null)throw t}}function Yi(t,r,i,h){cu=!1;var y=t.updateQueue;En=!1;var j=y.firstBaseUpdate,I=y.lastBaseUpdate,Y=y.shared.pending;if(Y!==null){y.shared.pending=null;var ne=Y,Se=ne.next;ne.next=null,I===null?j=Se:I.next=Se,I=ne;var Be=t.alternate;Be!==null&&(Be=Be.updateQueue,Y=Be.lastBaseUpdate,Y!==I&&(Y===null?Be.firstBaseUpdate=Se:Y.next=Se,Be.lastBaseUpdate=ne))}if(j!==null){var Pe=y.baseState;I=0,Be=Se=ne=null,Y=j;do{var Ee=Y.lane&-536870913,_e=Ee!==Y.lane;if(_e?(Pt&Ee)===Ee:(h&Ee)===Ee){Ee!==0&&Ee===$l&&(cu=!0),Be!==null&&(Be=Be.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var yt=t,gt=Y;Ee=r;var la=i;switch(gt.tag){case 1:if(yt=gt.payload,typeof yt=="function"){Pe=yt.call(la,Pe,Ee);break e}Pe=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=gt.payload,Ee=typeof yt=="function"?yt.call(la,Pe,Ee):yt,Ee==null)break e;Pe=S({},Pe,Ee);break e;case 2:En=!0}}Ee=Y.callback,Ee!==null&&(t.flags|=64,_e&&(t.flags|=8192),_e=y.callbacks,_e===null?y.callbacks=[Ee]:_e.push(Ee))}else _e={lane:Ee,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Be===null?(Se=Be=_e,ne=Pe):Be=Be.next=_e,I|=Ee;if(Y=Y.next,Y===null){if(Y=y.shared.pending,Y===null)break;_e=Y,Y=_e.next,_e.next=null,y.lastBaseUpdate=_e,y.shared.pending=null}}while(!0);Be===null&&(ne=Pe),y.baseState=ne,y.firstBaseUpdate=Se,y.lastBaseUpdate=Be,j===null&&(y.shared.lanes=0),Fn|=I,t.lanes=I,t.memoizedState=Pe}}function rh(t,r){if(typeof t!="function")throw Error(f(191,t));t.call(r)}function sh(t,r){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)rh(i[t],r)}var Kl=ge(null),hc=ge(0);function nh(t,r){t=cn,xe(hc,t),xe(Kl,r),cn=t|r.baseLanes}function du(){xe(hc,cn),xe(Kl,Kl.current)}function uu(){cn=hc.current,Oe(Kl),Oe(hc)}var Mn=0,Et=null,sa=null,Pa=null,xc=!1,Jl=!1,yl=!1,gc=0,Xi=0,ei=null,Rp=0;function Ia(){throw Error(f(321))}function fu(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!o(t[i],r[i]))return!1;return!0}function hu(t,r,i,h,y,j){return Mn=j,Et=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,H.H=t===null||t.memoizedState===null?Hh:Vh,yl=!1,j=i(h,y),yl=!1,Jl&&(j=ih(r,i,h,y)),lh(t),j}function lh(t){H.H=vc;var r=sa!==null&&sa.next!==null;if(Mn=0,Pa=sa=Et=null,xc=!1,Xi=0,ei=null,r)throw Error(f(300));t===null||Ka||(t=t.dependencies,t!==null&&oc(t)&&(Ka=!0))}function ih(t,r,i,h){Et=t;var y=0;do{if(Jl&&(ei=null),Xi=0,Jl=!1,25<=y)throw Error(f(301));if(y+=1,Pa=sa=null,t.updateQueue!=null){var j=t.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}H.H=zp,j=r(i,h)}while(Jl);return j}function Ip(){var t=H.H,r=t.useState()[0];return r=typeof r.then=="function"?Zi(r):r,t=t.useState()[0],(sa!==null?sa.memoizedState:null)!==t&&(Et.flags|=1024),r}function xu(){var t=gc!==0;return gc=0,t}function gu(t,r,i){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~i}function mu(t){if(xc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}xc=!1}Mn=0,Pa=sa=Et=null,Jl=!1,Xi=gc=0,ei=null}function Sr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pa===null?Et.memoizedState=Pa=t:Pa=Pa.next=t,Pa}function za(){if(sa===null){var t=Et.alternate;t=t!==null?t.memoizedState:null}else t=sa.next;var r=Pa===null?Et.memoizedState:Pa.next;if(r!==null)Pa=r,sa=t;else{if(t===null)throw Et.alternate===null?Error(f(467)):Error(f(310));sa=t,t={memoizedState:sa.memoizedState,baseState:sa.baseState,baseQueue:sa.baseQueue,queue:sa.queue,next:null},Pa===null?Et.memoizedState=Pa=t:Pa=Pa.next=t}return Pa}function pu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zi(t){var r=Xi;return Xi+=1,ei===null&&(ei=[]),t=eh(ei,t,r),r=Et,(Pa===null?r.memoizedState:Pa.next)===null&&(r=r.alternate,H.H=r===null||r.memoizedState===null?Hh:Vh),t}function mc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Zi(t);if(t.$$typeof===F)return dr(t)}throw Error(f(438,String(t)))}function yu(t){var r=null,i=Et.updateQueue;if(i!==null&&(r=i.memoCache),r==null){var h=Et.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(r={data:h.data.map(function(y){return y.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),i===null&&(i=pu(),Et.updateQueue=i),i.memoCache=r,i=r.data[r.index],i===void 0)for(i=r.data[r.index]=Array(t),h=0;h<t;h++)i[h]=de;return r.index++,i}function an(t,r){return typeof r=="function"?r(t):r}function pc(t){var r=za();return bu(r,sa,t)}function bu(t,r,i){var h=t.queue;if(h===null)throw Error(f(311));h.lastRenderedReducer=i;var y=t.baseQueue,j=h.pending;if(j!==null){if(y!==null){var I=y.next;y.next=j.next,j.next=I}r.baseQueue=y=j,h.pending=null}if(j=t.baseState,y===null)t.memoizedState=j;else{r=y.next;var Y=I=null,ne=null,Se=r,Be=!1;do{var Pe=Se.lane&-536870913;if(Pe!==Se.lane?(Pt&Pe)===Pe:(Mn&Pe)===Pe){var Ee=Se.revertLane;if(Ee===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null}),Pe===$l&&(Be=!0);else if((Mn&Ee)===Ee){Se=Se.next,Ee===$l&&(Be=!0);continue}else Pe={lane:0,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ne===null?(Y=ne=Pe,I=j):ne=ne.next=Pe,Et.lanes|=Ee,Fn|=Ee;Pe=Se.action,yl&&i(j,Pe),j=Se.hasEagerState?Se.eagerState:i(j,Pe)}else Ee={lane:Pe,revertLane:Se.revertLane,action:Se.action,hasEagerState:Se.hasEagerState,eagerState:Se.eagerState,next:null},ne===null?(Y=ne=Ee,I=j):ne=ne.next=Ee,Et.lanes|=Pe,Fn|=Pe;Se=Se.next}while(Se!==null&&Se!==r);if(ne===null?I=j:ne.next=Y,!o(j,t.memoizedState)&&(Ka=!0,Be&&(i=Wl,i!==null)))throw i;t.memoizedState=j,t.baseState=I,t.baseQueue=ne,h.lastRenderedState=j}return y===null&&(h.lanes=0),[t.memoizedState,h.dispatch]}function wu(t){var r=za(),i=r.queue;if(i===null)throw Error(f(311));i.lastRenderedReducer=t;var h=i.dispatch,y=i.pending,j=r.memoizedState;if(y!==null){i.pending=null;var I=y=y.next;do j=t(j,I.action),I=I.next;while(I!==y);o(j,r.memoizedState)||(Ka=!0),r.memoizedState=j,r.baseQueue===null&&(r.baseState=j),i.lastRenderedState=j}return[j,h]}function oh(t,r,i){var h=Et,y=za(),j=Gt;if(j){if(i===void 0)throw Error(f(407));i=i()}else i=r();var I=!o((sa||y).memoizedState,i);I&&(y.memoizedState=i,Ka=!0),y=y.queue;var Y=uh.bind(null,h,y,t);if(Qi(2048,8,Y,[t]),y.getSnapshot!==r||I||Pa!==null&&Pa.memoizedState.tag&1){if(h.flags|=2048,ti(9,yc(),dh.bind(null,h,y,i,r),null),ua===null)throw Error(f(349));j||(Mn&124)!==0||ch(h,r,i)}return i}function ch(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Et.updateQueue,r===null?(r=pu(),Et.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function dh(t,r,i,h){r.value=i,r.getSnapshot=h,fh(r)&&hh(t)}function uh(t,r,i){return i(function(){fh(r)&&hh(t)})}function fh(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!o(t,i)}catch{return!0}}function hh(t){var r=Yl(t,2);r!==null&&Ur(r,t,2)}function vu(t){var r=Sr();if(typeof t=="function"){var i=t;if(t=i(),yl){At(!0);try{i()}finally{At(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:t},r}function xh(t,r,i,h){return t.baseState=i,bu(t,sa,typeof h=="function"?h:an)}function Op(t,r,i,h,y){if(wc(t))throw Error(f(485));if(t=r.action,t!==null){var j={payload:y,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){j.listeners.push(I)}};H.T!==null?i(!0):j.isTransition=!1,h(j),i=r.pending,i===null?(j.next=r.pending=j,gh(r,j)):(j.next=i.next,r.pending=i.next=j)}}function gh(t,r){var i=r.action,h=r.payload,y=t.state;if(r.isTransition){var j=H.T,I={};H.T=I;try{var Y=i(y,h),ne=H.S;ne!==null&&ne(I,Y),mh(t,r,Y)}catch(Se){Nu(t,r,Se)}finally{H.T=j}}else try{j=i(y,h),mh(t,r,j)}catch(Se){Nu(t,r,Se)}}function mh(t,r,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(h){ph(t,r,h)},function(h){return Nu(t,r,h)}):ph(t,r,i)}function ph(t,r,i){r.status="fulfilled",r.value=i,yh(r),t.state=i,r=t.pending,r!==null&&(i=r.next,i===r?t.pending=null:(i=i.next,r.next=i,gh(t,i)))}function Nu(t,r,i){var h=t.pending;if(t.pending=null,h!==null){h=h.next;do r.status="rejected",r.reason=i,yh(r),r=r.next;while(r!==h)}t.action=null}function yh(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function bh(t,r){return r}function wh(t,r){if(Gt){var i=ua.formState;if(i!==null){e:{var h=Et;if(Gt){if(Aa){t:{for(var y=Aa,j=_s;y.nodeType!==8;){if(!j){y=null;break t}if(y=ls(y.nextSibling),y===null){y=null;break t}}j=y.data,y=j==="F!"||j==="F"?y:null}if(y){Aa=ls(y.nextSibling),h=y.data==="F!";break e}}xl(h)}h=!1}h&&(r=i[0])}}return i=Sr(),i.memoizedState=i.baseState=r,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:bh,lastRenderedState:r},i.queue=h,i=Ph.bind(null,Et,h),h.dispatch=i,h=vu(!1),j=Su.bind(null,Et,!1,h.queue),h=Sr(),y={state:r,dispatch:null,action:t,pending:null},h.queue=y,i=Op.bind(null,Et,y,j,i),y.dispatch=i,h.memoizedState=t,[r,i,!1]}function vh(t){var r=za();return Nh(r,sa,t)}function Nh(t,r,i){if(r=bu(t,r,bh)[0],t=pc(an)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var h=Zi(r)}catch(I){throw I===Hi?uc:I}else h=r;r=za();var y=r.queue,j=y.dispatch;return i!==r.memoizedState&&(Et.flags|=2048,ti(9,yc(),Bp.bind(null,y,i),null)),[h,j,t]}function Bp(t,r){t.action=r}function jh(t){var r=za(),i=sa;if(i!==null)return Nh(r,i,t);za(),r=r.memoizedState,i=za();var h=i.queue.dispatch;return i.memoizedState=t,[r,h,!1]}function ti(t,r,i,h){return t={tag:t,create:i,deps:h,inst:r,next:null},r=Et.updateQueue,r===null&&(r=pu(),Et.updateQueue=r),i=r.lastEffect,i===null?r.lastEffect=t.next=t:(h=i.next,i.next=t,t.next=h,r.lastEffect=t),t}function yc(){return{destroy:void 0,resource:void 0}}function Ch(){return za().memoizedState}function bc(t,r,i,h){var y=Sr();h=h===void 0?null:h,Et.flags|=t,y.memoizedState=ti(1|r,yc(),i,h)}function Qi(t,r,i,h){var y=za();h=h===void 0?null:h;var j=y.memoizedState.inst;sa!==null&&h!==null&&fu(h,sa.memoizedState.deps)?y.memoizedState=ti(r,j,i,h):(Et.flags|=t,y.memoizedState=ti(1|r,j,i,h))}function kh(t,r){bc(8390656,8,t,r)}function Ah(t,r){Qi(2048,8,t,r)}function Sh(t,r){return Qi(4,2,t,r)}function Eh(t,r){return Qi(4,4,t,r)}function Th(t,r){if(typeof r=="function"){t=t();var i=r(t);return function(){typeof i=="function"?i():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function _h(t,r,i){i=i!=null?i.concat([t]):null,Qi(4,4,Th.bind(null,r,t),i)}function ju(){}function Mh(t,r){var i=za();r=r===void 0?null:r;var h=i.memoizedState;return r!==null&&fu(r,h[1])?h[0]:(i.memoizedState=[t,r],t)}function Dh(t,r){var i=za();r=r===void 0?null:r;var h=i.memoizedState;if(r!==null&&fu(r,h[1]))return h[0];if(h=t(),yl){At(!0);try{t()}finally{At(!1)}}return i.memoizedState=[h,r],h}function Cu(t,r,i){return i===void 0||(Mn&1073741824)!==0?t.memoizedState=r:(t.memoizedState=i,t=Ox(),Et.lanes|=t,Fn|=t,i)}function Rh(t,r,i,h){return o(i,r)?i:Kl.current!==null?(t=Cu(t,i,h),o(t,r)||(Ka=!0),t):(Mn&42)===0?(Ka=!0,t.memoizedState=i):(t=Ox(),Et.lanes|=t,Fn|=t,r)}function Ih(t,r,i,h,y){var j=ee.p;ee.p=j!==0&&8>j?j:8;var I=H.T,Y={};H.T=Y,Su(t,!1,r,i);try{var ne=y(),Se=H.S;if(Se!==null&&Se(Y,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Be=Dp(ne,h);$i(t,r,Be,zr(t))}else $i(t,r,h,zr(t))}catch(Pe){$i(t,r,{then:function(){},status:"rejected",reason:Pe},zr())}finally{ee.p=j,H.T=I}}function Lp(){}function ku(t,r,i,h){if(t.tag!==5)throw Error(f(476));var y=Oh(t).queue;Ih(t,y,r,oe,i===null?Lp:function(){return Bh(t),i(h)})}function Oh(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:oe,baseState:oe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:oe},next:null};var i={};return r.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:an,lastRenderedState:i},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Bh(t){var r=Oh(t).next.queue;$i(t,r,{},zr())}function Au(){return dr(go)}function Lh(){return za().memoizedState}function Fh(){return za().memoizedState}function Fp(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var i=zr();t=Tn(i);var h=_n(r,t,i);h!==null&&(Ur(h,r,i),Gi(h,r,i)),r={cache:au()},t.payload=r;return}r=r.return}}function Pp(t,r,i){var h=zr();i={lane:h,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},wc(t)?zh(r,i):(i=Yd(t,r,i,h),i!==null&&(Ur(i,t,h),Uh(i,r,h)))}function Ph(t,r,i){var h=zr();$i(t,r,i,h)}function $i(t,r,i,h){var y={lane:h,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(wc(t))zh(r,y);else{var j=t.alternate;if(t.lanes===0&&(j===null||j.lanes===0)&&(j=r.lastRenderedReducer,j!==null))try{var I=r.lastRenderedState,Y=j(I,i);if(y.hasEagerState=!0,y.eagerState=Y,o(Y,I))return rc(t,r,y,0),ua===null&&ac(),!1}catch{}finally{}if(i=Yd(t,r,y,h),i!==null)return Ur(i,t,h),Uh(i,r,h),!0}return!1}function Su(t,r,i,h){if(h={lane:2,revertLane:n0(),action:h,hasEagerState:!1,eagerState:null,next:null},wc(t)){if(r)throw Error(f(479))}else r=Yd(t,i,h,2),r!==null&&Ur(r,t,2)}function wc(t){var r=t.alternate;return t===Et||r!==null&&r===Et}function zh(t,r){Jl=xc=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function Uh(t,r,i){if((i&4194048)!==0){var h=r.lanes;h&=t.pendingLanes,i|=h,r.lanes=i,jr(t,i)}}var vc={readContext:dr,use:mc,useCallback:Ia,useContext:Ia,useEffect:Ia,useImperativeHandle:Ia,useLayoutEffect:Ia,useInsertionEffect:Ia,useMemo:Ia,useReducer:Ia,useRef:Ia,useState:Ia,useDebugValue:Ia,useDeferredValue:Ia,useTransition:Ia,useSyncExternalStore:Ia,useId:Ia,useHostTransitionStatus:Ia,useFormState:Ia,useActionState:Ia,useOptimistic:Ia,useMemoCache:Ia,useCacheRefresh:Ia},Hh={readContext:dr,use:mc,useCallback:function(t,r){return Sr().memoizedState=[t,r===void 0?null:r],t},useContext:dr,useEffect:kh,useImperativeHandle:function(t,r,i){i=i!=null?i.concat([t]):null,bc(4194308,4,Th.bind(null,r,t),i)},useLayoutEffect:function(t,r){return bc(4194308,4,t,r)},useInsertionEffect:function(t,r){bc(4,2,t,r)},useMemo:function(t,r){var i=Sr();r=r===void 0?null:r;var h=t();if(yl){At(!0);try{t()}finally{At(!1)}}return i.memoizedState=[h,r],h},useReducer:function(t,r,i){var h=Sr();if(i!==void 0){var y=i(r);if(yl){At(!0);try{i(r)}finally{At(!1)}}}else y=r;return h.memoizedState=h.baseState=y,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:y},h.queue=t,t=t.dispatch=Pp.bind(null,Et,t),[h.memoizedState,t]},useRef:function(t){var r=Sr();return t={current:t},r.memoizedState=t},useState:function(t){t=vu(t);var r=t.queue,i=Ph.bind(null,Et,r);return r.dispatch=i,[t.memoizedState,i]},useDebugValue:ju,useDeferredValue:function(t,r){var i=Sr();return Cu(i,t,r)},useTransition:function(){var t=vu(!1);return t=Ih.bind(null,Et,t.queue,!0,!1),Sr().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,i){var h=Et,y=Sr();if(Gt){if(i===void 0)throw Error(f(407));i=i()}else{if(i=r(),ua===null)throw Error(f(349));(Pt&124)!==0||ch(h,r,i)}y.memoizedState=i;var j={value:i,getSnapshot:r};return y.queue=j,kh(uh.bind(null,h,j,t),[t]),h.flags|=2048,ti(9,yc(),dh.bind(null,h,j,i,r),null),i},useId:function(){var t=Sr(),r=ua.identifierPrefix;if(Gt){var i=Js,h=Ks;i=(h&~(1<<32-pt(h)-1)).toString(32)+i,r=""+r+"R"+i,i=gc++,0<i&&(r+="H"+i.toString(32)),r+=""}else i=Rp++,r=""+r+"r"+i.toString(32)+"";return t.memoizedState=r},useHostTransitionStatus:Au,useFormState:wh,useActionState:wh,useOptimistic:function(t){var r=Sr();r.memoizedState=r.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=i,r=Su.bind(null,Et,!0,i),i.dispatch=r,[t,r]},useMemoCache:yu,useCacheRefresh:function(){return Sr().memoizedState=Fp.bind(null,Et)}},Vh={readContext:dr,use:mc,useCallback:Mh,useContext:dr,useEffect:Ah,useImperativeHandle:_h,useInsertionEffect:Sh,useLayoutEffect:Eh,useMemo:Dh,useReducer:pc,useRef:Ch,useState:function(){return pc(an)},useDebugValue:ju,useDeferredValue:function(t,r){var i=za();return Rh(i,sa.memoizedState,t,r)},useTransition:function(){var t=pc(an)[0],r=za().memoizedState;return[typeof t=="boolean"?t:Zi(t),r]},useSyncExternalStore:oh,useId:Lh,useHostTransitionStatus:Au,useFormState:vh,useActionState:vh,useOptimistic:function(t,r){var i=za();return xh(i,sa,t,r)},useMemoCache:yu,useCacheRefresh:Fh},zp={readContext:dr,use:mc,useCallback:Mh,useContext:dr,useEffect:Ah,useImperativeHandle:_h,useInsertionEffect:Sh,useLayoutEffect:Eh,useMemo:Dh,useReducer:wu,useRef:Ch,useState:function(){return wu(an)},useDebugValue:ju,useDeferredValue:function(t,r){var i=za();return sa===null?Cu(i,t,r):Rh(i,sa.memoizedState,t,r)},useTransition:function(){var t=wu(an)[0],r=za().memoizedState;return[typeof t=="boolean"?t:Zi(t),r]},useSyncExternalStore:oh,useId:Lh,useHostTransitionStatus:Au,useFormState:jh,useActionState:jh,useOptimistic:function(t,r){var i=za();return sa!==null?xh(i,sa,t,r):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:yu,useCacheRefresh:Fh},ai=null,Wi=0;function Nc(t){var r=Wi;return Wi+=1,ai===null&&(ai=[]),eh(ai,t,r)}function Ki(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function jc(t,r){throw r.$$typeof===E?Error(f(525)):(t=Object.prototype.toString.call(r),Error(f(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Gh(t){var r=t._init;return r(t._payload)}function qh(t){function r(me,fe){if(t){var ke=me.deletions;ke===null?(me.deletions=[fe],me.flags|=16):ke.push(fe)}}function i(me,fe){if(!t)return null;for(;fe!==null;)r(me,fe),fe=fe.sibling;return null}function h(me){for(var fe=new Map;me!==null;)me.key!==null?fe.set(me.key,me):fe.set(me.index,me),me=me.sibling;return fe}function y(me,fe){return me=Ws(me,fe),me.index=0,me.sibling=null,me}function j(me,fe,ke){return me.index=ke,t?(ke=me.alternate,ke!==null?(ke=ke.index,ke<fe?(me.flags|=67108866,fe):ke):(me.flags|=67108866,fe)):(me.flags|=1048576,fe)}function I(me){return t&&me.alternate===null&&(me.flags|=67108866),me}function Y(me,fe,ke,Le){return fe===null||fe.tag!==6?(fe=Zd(ke,me.mode,Le),fe.return=me,fe):(fe=y(fe,ke),fe.return=me,fe)}function ne(me,fe,ke,Le){var nt=ke.type;return nt===B?Be(me,fe,ke.props.children,Le,ke.key):fe!==null&&(fe.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===X&&Gh(nt)===fe.type)?(fe=y(fe,ke.props),Ki(fe,ke),fe.return=me,fe):(fe=nc(ke.type,ke.key,ke.props,null,me.mode,Le),Ki(fe,ke),fe.return=me,fe)}function Se(me,fe,ke,Le){return fe===null||fe.tag!==4||fe.stateNode.containerInfo!==ke.containerInfo||fe.stateNode.implementation!==ke.implementation?(fe=Qd(ke,me.mode,Le),fe.return=me,fe):(fe=y(fe,ke.children||[]),fe.return=me,fe)}function Be(me,fe,ke,Le,nt){return fe===null||fe.tag!==7?(fe=dl(ke,me.mode,Le,nt),fe.return=me,fe):(fe=y(fe,ke),fe.return=me,fe)}function Pe(me,fe,ke){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return fe=Zd(""+fe,me.mode,ke),fe.return=me,fe;if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case M:return ke=nc(fe.type,fe.key,fe.props,null,me.mode,ke),Ki(ke,fe),ke.return=me,ke;case D:return fe=Qd(fe,me.mode,ke),fe.return=me,fe;case X:var Le=fe._init;return fe=Le(fe._payload),Pe(me,fe,ke)}if(U(fe)||re(fe))return fe=dl(fe,me.mode,ke,null),fe.return=me,fe;if(typeof fe.then=="function")return Pe(me,Nc(fe),ke);if(fe.$$typeof===F)return Pe(me,cc(me,fe),ke);jc(me,fe)}return null}function Ee(me,fe,ke,Le){var nt=fe!==null?fe.key:null;if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return nt!==null?null:Y(me,fe,""+ke,Le);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case M:return ke.key===nt?ne(me,fe,ke,Le):null;case D:return ke.key===nt?Se(me,fe,ke,Le):null;case X:return nt=ke._init,ke=nt(ke._payload),Ee(me,fe,ke,Le)}if(U(ke)||re(ke))return nt!==null?null:Be(me,fe,ke,Le,null);if(typeof ke.then=="function")return Ee(me,fe,Nc(ke),Le);if(ke.$$typeof===F)return Ee(me,fe,cc(me,ke),Le);jc(me,ke)}return null}function _e(me,fe,ke,Le,nt){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return me=me.get(ke)||null,Y(fe,me,""+Le,nt);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case M:return me=me.get(Le.key===null?ke:Le.key)||null,ne(fe,me,Le,nt);case D:return me=me.get(Le.key===null?ke:Le.key)||null,Se(fe,me,Le,nt);case X:var _t=Le._init;return Le=_t(Le._payload),_e(me,fe,ke,Le,nt)}if(U(Le)||re(Le))return me=me.get(ke)||null,Be(fe,me,Le,nt,null);if(typeof Le.then=="function")return _e(me,fe,ke,Nc(Le),nt);if(Le.$$typeof===F)return _e(me,fe,ke,cc(fe,Le),nt);jc(fe,Le)}return null}function yt(me,fe,ke,Le){for(var nt=null,_t=null,ct=fe,mt=fe=0,er=null;ct!==null&&mt<ke.length;mt++){ct.index>mt?(er=ct,ct=null):er=ct.sibling;var Ht=Ee(me,ct,ke[mt],Le);if(Ht===null){ct===null&&(ct=er);break}t&&ct&&Ht.alternate===null&&r(me,ct),fe=j(Ht,fe,mt),_t===null?nt=Ht:_t.sibling=Ht,_t=Ht,ct=er}if(mt===ke.length)return i(me,ct),Gt&&fl(me,mt),nt;if(ct===null){for(;mt<ke.length;mt++)ct=Pe(me,ke[mt],Le),ct!==null&&(fe=j(ct,fe,mt),_t===null?nt=ct:_t.sibling=ct,_t=ct);return Gt&&fl(me,mt),nt}for(ct=h(ct);mt<ke.length;mt++)er=_e(ct,me,mt,ke[mt],Le),er!==null&&(t&&er.alternate!==null&&ct.delete(er.key===null?mt:er.key),fe=j(er,fe,mt),_t===null?nt=er:_t.sibling=er,_t=er);return t&&ct.forEach(function(Xn){return r(me,Xn)}),Gt&&fl(me,mt),nt}function gt(me,fe,ke,Le){if(ke==null)throw Error(f(151));for(var nt=null,_t=null,ct=fe,mt=fe=0,er=null,Ht=ke.next();ct!==null&&!Ht.done;mt++,Ht=ke.next()){ct.index>mt?(er=ct,ct=null):er=ct.sibling;var Xn=Ee(me,ct,Ht.value,Le);if(Xn===null){ct===null&&(ct=er);break}t&&ct&&Xn.alternate===null&&r(me,ct),fe=j(Xn,fe,mt),_t===null?nt=Xn:_t.sibling=Xn,_t=Xn,ct=er}if(Ht.done)return i(me,ct),Gt&&fl(me,mt),nt;if(ct===null){for(;!Ht.done;mt++,Ht=ke.next())Ht=Pe(me,Ht.value,Le),Ht!==null&&(fe=j(Ht,fe,mt),_t===null?nt=Ht:_t.sibling=Ht,_t=Ht);return Gt&&fl(me,mt),nt}for(ct=h(ct);!Ht.done;mt++,Ht=ke.next())Ht=_e(ct,me,mt,Ht.value,Le),Ht!==null&&(t&&Ht.alternate!==null&&ct.delete(Ht.key===null?mt:Ht.key),fe=j(Ht,fe,mt),_t===null?nt=Ht:_t.sibling=Ht,_t=Ht);return t&&ct.forEach(function(Uy){return r(me,Uy)}),Gt&&fl(me,mt),nt}function la(me,fe,ke,Le){if(typeof ke=="object"&&ke!==null&&ke.type===B&&ke.key===null&&(ke=ke.props.children),typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case M:e:{for(var nt=ke.key;fe!==null;){if(fe.key===nt){if(nt=ke.type,nt===B){if(fe.tag===7){i(me,fe.sibling),Le=y(fe,ke.props.children),Le.return=me,me=Le;break e}}else if(fe.elementType===nt||typeof nt=="object"&&nt!==null&&nt.$$typeof===X&&Gh(nt)===fe.type){i(me,fe.sibling),Le=y(fe,ke.props),Ki(Le,ke),Le.return=me,me=Le;break e}i(me,fe);break}else r(me,fe);fe=fe.sibling}ke.type===B?(Le=dl(ke.props.children,me.mode,Le,ke.key),Le.return=me,me=Le):(Le=nc(ke.type,ke.key,ke.props,null,me.mode,Le),Ki(Le,ke),Le.return=me,me=Le)}return I(me);case D:e:{for(nt=ke.key;fe!==null;){if(fe.key===nt)if(fe.tag===4&&fe.stateNode.containerInfo===ke.containerInfo&&fe.stateNode.implementation===ke.implementation){i(me,fe.sibling),Le=y(fe,ke.children||[]),Le.return=me,me=Le;break e}else{i(me,fe);break}else r(me,fe);fe=fe.sibling}Le=Qd(ke,me.mode,Le),Le.return=me,me=Le}return I(me);case X:return nt=ke._init,ke=nt(ke._payload),la(me,fe,ke,Le)}if(U(ke))return yt(me,fe,ke,Le);if(re(ke)){if(nt=re(ke),typeof nt!="function")throw Error(f(150));return ke=nt.call(ke),gt(me,fe,ke,Le)}if(typeof ke.then=="function")return la(me,fe,Nc(ke),Le);if(ke.$$typeof===F)return la(me,fe,cc(me,ke),Le);jc(me,ke)}return typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint"?(ke=""+ke,fe!==null&&fe.tag===6?(i(me,fe.sibling),Le=y(fe,ke),Le.return=me,me=Le):(i(me,fe),Le=Zd(ke,me.mode,Le),Le.return=me,me=Le),I(me)):i(me,fe)}return function(me,fe,ke,Le){try{Wi=0;var nt=la(me,fe,ke,Le);return ai=null,nt}catch(ct){if(ct===Hi||ct===uc)throw ct;var _t=Br(29,ct,null,me.mode);return _t.lanes=Le,_t.return=me,_t}finally{}}}var ri=qh(!0),Yh=qh(!1),Wr=ge(null),Ms=null;function Dn(t){var r=t.alternate;xe(Za,Za.current&1),xe(Wr,t),Ms===null&&(r===null||Kl.current!==null||r.memoizedState!==null)&&(Ms=t)}function Xh(t){if(t.tag===22){if(xe(Za,Za.current),xe(Wr,t),Ms===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Ms=t)}}else Rn()}function Rn(){xe(Za,Za.current),xe(Wr,Wr.current)}function rn(t){Oe(Wr),Ms===t&&(Ms=null),Oe(Za)}var Za=ge(0);function Cc(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||p0(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Eu(t,r,i,h){r=t.memoizedState,i=i(h,r),i=i==null?r:S({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Tu={enqueueSetState:function(t,r,i){t=t._reactInternals;var h=zr(),y=Tn(h);y.payload=r,i!=null&&(y.callback=i),r=_n(t,y,h),r!==null&&(Ur(r,t,h),Gi(r,t,h))},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var h=zr(),y=Tn(h);y.tag=1,y.payload=r,i!=null&&(y.callback=i),r=_n(t,y,h),r!==null&&(Ur(r,t,h),Gi(r,t,h))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=zr(),h=Tn(i);h.tag=2,r!=null&&(h.callback=r),r=_n(t,h,i),r!==null&&(Ur(r,t,i),Gi(r,t,i))}};function Zh(t,r,i,h,y,j,I){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(h,j,I):r.prototype&&r.prototype.isPureReactComponent?!u(i,h)||!u(y,j):!0}function Qh(t,r,i,h){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,h),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,h),r.state!==t&&Tu.enqueueReplaceState(r,r.state,null)}function bl(t,r){var i=r;if("ref"in r){i={};for(var h in r)h!=="ref"&&(i[h]=r[h])}if(t=t.defaultProps){i===r&&(i=S({},i));for(var y in t)i[y]===void 0&&(i[y]=t[y])}return i}var kc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function $h(t){kc(t)}function Wh(t){console.error(t)}function Kh(t){kc(t)}function Ac(t,r){try{var i=t.onUncaughtError;i(r.value,{componentStack:r.stack})}catch(h){setTimeout(function(){throw h})}}function Jh(t,r,i){try{var h=t.onCaughtError;h(i.value,{componentStack:i.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function _u(t,r,i){return i=Tn(i),i.tag=3,i.payload={element:null},i.callback=function(){Ac(t,r)},i}function ex(t){return t=Tn(t),t.tag=3,t}function tx(t,r,i,h){var y=i.type.getDerivedStateFromError;if(typeof y=="function"){var j=h.value;t.payload=function(){return y(j)},t.callback=function(){Jh(r,i,h)}}var I=i.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(t.callback=function(){Jh(r,i,h),typeof y!="function"&&(Pn===null?Pn=new Set([this]):Pn.add(this));var Y=h.stack;this.componentDidCatch(h.value,{componentStack:Y!==null?Y:""})})}function Up(t,r,i,h,y){if(i.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(r=i.alternate,r!==null&&Pi(r,i,y,!0),i=Wr.current,i!==null){switch(i.tag){case 13:return Ms===null?e0():i.alternate===null&&Sa===0&&(Sa=3),i.flags&=-257,i.flags|=65536,i.lanes=y,h===nu?i.flags|=16384:(r=i.updateQueue,r===null?i.updateQueue=new Set([h]):r.add(h),a0(t,h,y)),!1;case 22:return i.flags|=65536,h===nu?i.flags|=16384:(r=i.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([h])},i.updateQueue=r):(i=r.retryQueue,i===null?r.retryQueue=new Set([h]):i.add(h)),a0(t,h,y)),!1}throw Error(f(435,i.tag))}return a0(t,h,y),e0(),!1}if(Gt)return r=Wr.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=y,h!==Kd&&(t=Error(f(422),{cause:h}),Fi(Xr(t,i)))):(h!==Kd&&(r=Error(f(423),{cause:h}),Fi(Xr(r,i))),t=t.current.alternate,t.flags|=65536,y&=-y,t.lanes|=y,h=Xr(h,i),y=_u(t.stateNode,h,y),ou(t,y),Sa!==4&&(Sa=2)),!1;var j=Error(f(520),{cause:h});if(j=Xr(j,i),no===null?no=[j]:no.push(j),Sa!==4&&(Sa=2),r===null)return!0;h=Xr(h,i),i=r;do{switch(i.tag){case 3:return i.flags|=65536,t=y&-y,i.lanes|=t,t=_u(i.stateNode,h,t),ou(i,t),!1;case 1:if(r=i.type,j=i.stateNode,(i.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Pn===null||!Pn.has(j))))return i.flags|=65536,y&=-y,i.lanes|=y,y=ex(y),tx(y,t,i,h),ou(i,y),!1}i=i.return}while(i!==null);return!1}var ax=Error(f(461)),Ka=!1;function ar(t,r,i,h){r.child=t===null?Yh(r,null,i,h):ri(r,t.child,i,h)}function rx(t,r,i,h,y){i=i.render;var j=r.ref;if("ref"in h){var I={};for(var Y in h)Y!=="ref"&&(I[Y]=h[Y])}else I=h;return ml(r),h=hu(t,r,i,I,j,y),Y=xu(),t!==null&&!Ka?(gu(t,r,y),sn(t,r,y)):(Gt&&Y&&$d(r),r.flags|=1,ar(t,r,h,y),r.child)}function sx(t,r,i,h,y){if(t===null){var j=i.type;return typeof j=="function"&&!Xd(j)&&j.defaultProps===void 0&&i.compare===null?(r.tag=15,r.type=j,nx(t,r,j,h,y)):(t=nc(i.type,null,h,r,r.mode,y),t.ref=r.ref,t.return=r,r.child=t)}if(j=t.child,!Fu(t,y)){var I=j.memoizedProps;if(i=i.compare,i=i!==null?i:u,i(I,h)&&t.ref===r.ref)return sn(t,r,y)}return r.flags|=1,t=Ws(j,h),t.ref=r.ref,t.return=r,r.child=t}function nx(t,r,i,h,y){if(t!==null){var j=t.memoizedProps;if(u(j,h)&&t.ref===r.ref)if(Ka=!1,r.pendingProps=h=j,Fu(t,y))(t.flags&131072)!==0&&(Ka=!0);else return r.lanes=t.lanes,sn(t,r,y)}return Mu(t,r,i,h,y)}function lx(t,r,i){var h=r.pendingProps,y=h.children,j=t!==null?t.memoizedState:null;if(h.mode==="hidden"){if((r.flags&128)!==0){if(h=j!==null?j.baseLanes|i:i,t!==null){for(y=r.child=t.child,j=0;y!==null;)j=j|y.lanes|y.childLanes,y=y.sibling;r.childLanes=j&~h}else r.childLanes=0,r.child=null;return ix(t,r,h,i)}if((i&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&dc(r,j!==null?j.cachePool:null),j!==null?nh(r,j):du(),Xh(r);else return r.lanes=r.childLanes=536870912,ix(t,r,j!==null?j.baseLanes|i:i,i)}else j!==null?(dc(r,j.cachePool),nh(r,j),Rn(),r.memoizedState=null):(t!==null&&dc(r,null),du(),Rn());return ar(t,r,y,i),r.child}function ix(t,r,i,h){var y=su();return y=y===null?null:{parent:Xa._currentValue,pool:y},r.memoizedState={baseLanes:i,cachePool:y},t!==null&&dc(r,null),du(),Xh(r),t!==null&&Pi(t,r,h,!0),null}function Sc(t,r){var i=r.ref;if(i===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(f(284));(t===null||t.ref!==i)&&(r.flags|=4194816)}}function Mu(t,r,i,h,y){return ml(r),i=hu(t,r,i,h,void 0,y),h=xu(),t!==null&&!Ka?(gu(t,r,y),sn(t,r,y)):(Gt&&h&&$d(r),r.flags|=1,ar(t,r,i,y),r.child)}function ox(t,r,i,h,y,j){return ml(r),r.updateQueue=null,i=ih(r,h,i,y),lh(t),h=xu(),t!==null&&!Ka?(gu(t,r,j),sn(t,r,j)):(Gt&&h&&$d(r),r.flags|=1,ar(t,r,i,j),r.child)}function cx(t,r,i,h,y){if(ml(r),r.stateNode===null){var j=Xl,I=i.contextType;typeof I=="object"&&I!==null&&(j=dr(I)),j=new i(h,j),r.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Tu,r.stateNode=j,j._reactInternals=r,j=r.stateNode,j.props=h,j.state=r.memoizedState,j.refs={},lu(r),I=i.contextType,j.context=typeof I=="object"&&I!==null?dr(I):Xl,j.state=r.memoizedState,I=i.getDerivedStateFromProps,typeof I=="function"&&(Eu(r,i,I,h),j.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(I=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),I!==j.state&&Tu.enqueueReplaceState(j,j.state,null),Yi(r,h,j,y),qi(),j.state=r.memoizedState),typeof j.componentDidMount=="function"&&(r.flags|=4194308),h=!0}else if(t===null){j=r.stateNode;var Y=r.memoizedProps,ne=bl(i,Y);j.props=ne;var Se=j.context,Be=i.contextType;I=Xl,typeof Be=="object"&&Be!==null&&(I=dr(Be));var Pe=i.getDerivedStateFromProps;Be=typeof Pe=="function"||typeof j.getSnapshotBeforeUpdate=="function",Y=r.pendingProps!==Y,Be||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(Y||Se!==I)&&Qh(r,j,h,I),En=!1;var Ee=r.memoizedState;j.state=Ee,Yi(r,h,j,y),qi(),Se=r.memoizedState,Y||Ee!==Se||En?(typeof Pe=="function"&&(Eu(r,i,Pe,h),Se=r.memoizedState),(ne=En||Zh(r,i,ne,h,Ee,Se,I))?(Be||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(r.flags|=4194308)):(typeof j.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=h,r.memoizedState=Se),j.props=h,j.state=Se,j.context=I,h=ne):(typeof j.componentDidMount=="function"&&(r.flags|=4194308),h=!1)}else{j=r.stateNode,iu(t,r),I=r.memoizedProps,Be=bl(i,I),j.props=Be,Pe=r.pendingProps,Ee=j.context,Se=i.contextType,ne=Xl,typeof Se=="object"&&Se!==null&&(ne=dr(Se)),Y=i.getDerivedStateFromProps,(Se=typeof Y=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(I!==Pe||Ee!==ne)&&Qh(r,j,h,ne),En=!1,Ee=r.memoizedState,j.state=Ee,Yi(r,h,j,y),qi();var _e=r.memoizedState;I!==Pe||Ee!==_e||En||t!==null&&t.dependencies!==null&&oc(t.dependencies)?(typeof Y=="function"&&(Eu(r,i,Y,h),_e=r.memoizedState),(Be=En||Zh(r,i,Be,h,Ee,_e,ne)||t!==null&&t.dependencies!==null&&oc(t.dependencies))?(Se||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(h,_e,ne),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(h,_e,ne)),typeof j.componentDidUpdate=="function"&&(r.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof j.componentDidUpdate!="function"||I===t.memoizedProps&&Ee===t.memoizedState||(r.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&Ee===t.memoizedState||(r.flags|=1024),r.memoizedProps=h,r.memoizedState=_e),j.props=h,j.state=_e,j.context=ne,h=Be):(typeof j.componentDidUpdate!="function"||I===t.memoizedProps&&Ee===t.memoizedState||(r.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||I===t.memoizedProps&&Ee===t.memoizedState||(r.flags|=1024),h=!1)}return j=h,Sc(t,r),h=(r.flags&128)!==0,j||h?(j=r.stateNode,i=h&&typeof i.getDerivedStateFromError!="function"?null:j.render(),r.flags|=1,t!==null&&h?(r.child=ri(r,t.child,null,y),r.child=ri(r,null,i,y)):ar(t,r,i,y),r.memoizedState=j.state,t=r.child):t=sn(t,r,y),t}function dx(t,r,i,h){return Li(),r.flags|=256,ar(t,r,i,h),r.child}var Du={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ru(t){return{baseLanes:t,cachePool:Wf()}}function Iu(t,r,i){return t=t!==null?t.childLanes&~i:0,r&&(t|=Kr),t}function ux(t,r,i){var h=r.pendingProps,y=!1,j=(r.flags&128)!==0,I;if((I=j)||(I=t!==null&&t.memoizedState===null?!1:(Za.current&2)!==0),I&&(y=!0,r.flags&=-129),I=(r.flags&32)!==0,r.flags&=-33,t===null){if(Gt){if(y?Dn(r):Rn(),Gt){var Y=Aa,ne;if(ne=Y){e:{for(ne=Y,Y=_s;ne.nodeType!==8;){if(!Y){Y=null;break e}if(ne=ls(ne.nextSibling),ne===null){Y=null;break e}}Y=ne}Y!==null?(r.memoizedState={dehydrated:Y,treeContext:ul!==null?{id:Ks,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},ne=Br(18,null,null,0),ne.stateNode=Y,ne.return=r,r.child=ne,gr=r,Aa=null,ne=!0):ne=!1}ne||xl(r)}if(Y=r.memoizedState,Y!==null&&(Y=Y.dehydrated,Y!==null))return p0(Y)?r.lanes=32:r.lanes=536870912,null;rn(r)}return Y=h.children,h=h.fallback,y?(Rn(),y=r.mode,Y=Ec({mode:"hidden",children:Y},y),h=dl(h,y,i,null),Y.return=r,h.return=r,Y.sibling=h,r.child=Y,y=r.child,y.memoizedState=Ru(i),y.childLanes=Iu(t,I,i),r.memoizedState=Du,h):(Dn(r),Ou(r,Y))}if(ne=t.memoizedState,ne!==null&&(Y=ne.dehydrated,Y!==null)){if(j)r.flags&256?(Dn(r),r.flags&=-257,r=Bu(t,r,i)):r.memoizedState!==null?(Rn(),r.child=t.child,r.flags|=128,r=null):(Rn(),y=h.fallback,Y=r.mode,h=Ec({mode:"visible",children:h.children},Y),y=dl(y,Y,i,null),y.flags|=2,h.return=r,y.return=r,h.sibling=y,r.child=h,ri(r,t.child,null,i),h=r.child,h.memoizedState=Ru(i),h.childLanes=Iu(t,I,i),r.memoizedState=Du,r=y);else if(Dn(r),p0(Y)){if(I=Y.nextSibling&&Y.nextSibling.dataset,I)var Se=I.dgst;I=Se,h=Error(f(419)),h.stack="",h.digest=I,Fi({value:h,source:null,stack:null}),r=Bu(t,r,i)}else if(Ka||Pi(t,r,i,!1),I=(i&t.childLanes)!==0,Ka||I){if(I=ua,I!==null&&(h=i&-i,h=(h&42)!==0?1:Jn(h),h=(h&(I.suspendedLanes|i))!==0?0:h,h!==0&&h!==ne.retryLane))throw ne.retryLane=h,Yl(t,h),Ur(I,t,h),ax;Y.data==="$?"||e0(),r=Bu(t,r,i)}else Y.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=ne.treeContext,Aa=ls(Y.nextSibling),gr=r,Gt=!0,hl=null,_s=!1,t!==null&&(Qr[$r++]=Ks,Qr[$r++]=Js,Qr[$r++]=ul,Ks=t.id,Js=t.overflow,ul=r),r=Ou(r,h.children),r.flags|=4096);return r}return y?(Rn(),y=h.fallback,Y=r.mode,ne=t.child,Se=ne.sibling,h=Ws(ne,{mode:"hidden",children:h.children}),h.subtreeFlags=ne.subtreeFlags&65011712,Se!==null?y=Ws(Se,y):(y=dl(y,Y,i,null),y.flags|=2),y.return=r,h.return=r,h.sibling=y,r.child=h,h=y,y=r.child,Y=t.child.memoizedState,Y===null?Y=Ru(i):(ne=Y.cachePool,ne!==null?(Se=Xa._currentValue,ne=ne.parent!==Se?{parent:Se,pool:Se}:ne):ne=Wf(),Y={baseLanes:Y.baseLanes|i,cachePool:ne}),y.memoizedState=Y,y.childLanes=Iu(t,I,i),r.memoizedState=Du,h):(Dn(r),i=t.child,t=i.sibling,i=Ws(i,{mode:"visible",children:h.children}),i.return=r,i.sibling=null,t!==null&&(I=r.deletions,I===null?(r.deletions=[t],r.flags|=16):I.push(t)),r.child=i,r.memoizedState=null,i)}function Ou(t,r){return r=Ec({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Ec(t,r){return t=Br(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function Bu(t,r,i){return ri(r,t.child,null,i),t=Ou(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function fx(t,r,i){t.lanes|=r;var h=t.alternate;h!==null&&(h.lanes|=r),eu(t.return,r,i)}function Lu(t,r,i,h,y){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:h,tail:i,tailMode:y}:(j.isBackwards=r,j.rendering=null,j.renderingStartTime=0,j.last=h,j.tail=i,j.tailMode=y)}function hx(t,r,i){var h=r.pendingProps,y=h.revealOrder,j=h.tail;if(ar(t,r,h.children,i),h=Za.current,(h&2)!==0)h=h&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&fx(t,i,r);else if(t.tag===19)fx(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}h&=1}switch(xe(Za,h),y){case"forwards":for(i=r.child,y=null;i!==null;)t=i.alternate,t!==null&&Cc(t)===null&&(y=i),i=i.sibling;i=y,i===null?(y=r.child,r.child=null):(y=i.sibling,i.sibling=null),Lu(r,!1,y,i,j);break;case"backwards":for(i=null,y=r.child,r.child=null;y!==null;){if(t=y.alternate,t!==null&&Cc(t)===null){r.child=y;break}t=y.sibling,y.sibling=i,i=y,y=t}Lu(r,!0,i,null,j);break;case"together":Lu(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function sn(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),Fn|=r.lanes,(i&r.childLanes)===0)if(t!==null){if(Pi(t,r,i,!1),(i&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(f(153));if(r.child!==null){for(t=r.child,i=Ws(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=Ws(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Fu(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&oc(t)))}function Hp(t,r,i){switch(r.tag){case 3:ye(r,r.stateNode.containerInfo),Sn(r,Xa,t.memoizedState.cache),Li();break;case 27:case 5:rt(r);break;case 4:ye(r,r.stateNode.containerInfo);break;case 10:Sn(r,r.type,r.memoizedProps.value);break;case 13:var h=r.memoizedState;if(h!==null)return h.dehydrated!==null?(Dn(r),r.flags|=128,null):(i&r.child.childLanes)!==0?ux(t,r,i):(Dn(r),t=sn(t,r,i),t!==null?t.sibling:null);Dn(r);break;case 19:var y=(t.flags&128)!==0;if(h=(i&r.childLanes)!==0,h||(Pi(t,r,i,!1),h=(i&r.childLanes)!==0),y){if(h)return hx(t,r,i);r.flags|=128}if(y=r.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),xe(Za,Za.current),h)break;return null;case 22:case 23:return r.lanes=0,lx(t,r,i);case 24:Sn(r,Xa,t.memoizedState.cache)}return sn(t,r,i)}function xx(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ka=!0;else{if(!Fu(t,i)&&(r.flags&128)===0)return Ka=!1,Hp(t,r,i);Ka=(t.flags&131072)!==0}else Ka=!1,Gt&&(r.flags&1048576)!==0&&Gf(r,ic,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var h=r.elementType,y=h._init;if(h=y(h._payload),r.type=h,typeof h=="function")Xd(h)?(t=bl(h,t),r.tag=1,r=cx(null,r,h,t,i)):(r.tag=0,r=Mu(null,r,h,t,i));else{if(h!=null){if(y=h.$$typeof,y===V){r.tag=11,r=rx(null,r,h,t,i);break e}else if(y===P){r.tag=14,r=sx(null,r,h,t,i);break e}}throw r=W(h)||h,Error(f(306,r,""))}}return r;case 0:return Mu(t,r,r.type,r.pendingProps,i);case 1:return h=r.type,y=bl(h,r.pendingProps),cx(t,r,h,y,i);case 3:e:{if(ye(r,r.stateNode.containerInfo),t===null)throw Error(f(387));h=r.pendingProps;var j=r.memoizedState;y=j.element,iu(t,r),Yi(r,h,null,i);var I=r.memoizedState;if(h=I.cache,Sn(r,Xa,h),h!==j.cache&&tu(r,[Xa],i,!0),qi(),h=I.element,j.isDehydrated)if(j={element:h,isDehydrated:!1,cache:I.cache},r.updateQueue.baseState=j,r.memoizedState=j,r.flags&256){r=dx(t,r,h,i);break e}else if(h!==y){y=Xr(Error(f(424)),r),Fi(y),r=dx(t,r,h,i);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Aa=ls(t.firstChild),gr=r,Gt=!0,hl=null,_s=!0,i=Yh(r,null,h,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Li(),h===y){r=sn(t,r,i);break e}ar(t,r,h,i)}r=r.child}return r;case 26:return Sc(t,r),t===null?(i=yg(r.type,null,r.pendingProps,null))?r.memoizedState=i:Gt||(i=r.type,t=r.pendingProps,h=Hc(ie.current).createElement(i),h[Qa]=r,h[ja]=t,sr(h,i,t),Wt(h),r.stateNode=h):r.memoizedState=yg(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return rt(r),t===null&&Gt&&(h=r.stateNode=gg(r.type,r.pendingProps,ie.current),gr=r,_s=!0,y=Aa,Hn(r.type)?(y0=y,Aa=ls(h.firstChild)):Aa=y),ar(t,r,r.pendingProps.children,i),Sc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Gt&&((y=h=Aa)&&(h=my(h,r.type,r.pendingProps,_s),h!==null?(r.stateNode=h,gr=r,Aa=ls(h.firstChild),_s=!1,y=!0):y=!1),y||xl(r)),rt(r),y=r.type,j=r.pendingProps,I=t!==null?t.memoizedProps:null,h=j.children,x0(y,j)?h=null:I!==null&&x0(y,I)&&(r.flags|=32),r.memoizedState!==null&&(y=hu(t,r,Ip,null,null,i),go._currentValue=y),Sc(t,r),ar(t,r,h,i),r.child;case 6:return t===null&&Gt&&((t=i=Aa)&&(i=py(i,r.pendingProps,_s),i!==null?(r.stateNode=i,gr=r,Aa=null,t=!0):t=!1),t||xl(r)),null;case 13:return ux(t,r,i);case 4:return ye(r,r.stateNode.containerInfo),h=r.pendingProps,t===null?r.child=ri(r,null,h,i):ar(t,r,h,i),r.child;case 11:return rx(t,r,r.type,r.pendingProps,i);case 7:return ar(t,r,r.pendingProps,i),r.child;case 8:return ar(t,r,r.pendingProps.children,i),r.child;case 12:return ar(t,r,r.pendingProps.children,i),r.child;case 10:return h=r.pendingProps,Sn(r,r.type,h.value),ar(t,r,h.children,i),r.child;case 9:return y=r.type._context,h=r.pendingProps.children,ml(r),y=dr(y),h=h(y),r.flags|=1,ar(t,r,h,i),r.child;case 14:return sx(t,r,r.type,r.pendingProps,i);case 15:return nx(t,r,r.type,r.pendingProps,i);case 19:return hx(t,r,i);case 31:return h=r.pendingProps,i=r.mode,h={mode:h.mode,children:h.children},t===null?(i=Ec(h,i),i.ref=r.ref,r.child=i,i.return=r,r=i):(i=Ws(t.child,h),i.ref=r.ref,r.child=i,i.return=r,r=i),r;case 22:return lx(t,r,i);case 24:return ml(r),h=dr(Xa),t===null?(y=su(),y===null&&(y=ua,j=au(),y.pooledCache=j,j.refCount++,j!==null&&(y.pooledCacheLanes|=i),y=j),r.memoizedState={parent:h,cache:y},lu(r),Sn(r,Xa,y)):((t.lanes&i)!==0&&(iu(t,r),Yi(r,null,null,i),qi()),y=t.memoizedState,j=r.memoizedState,y.parent!==h?(y={parent:h,cache:h},r.memoizedState=y,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=y),Sn(r,Xa,h)):(h=j.cache,Sn(r,Xa,h),h!==y.cache&&tu(r,[Xa],i,!0))),ar(t,r,r.pendingProps.children,i),r.child;case 29:throw r.pendingProps}throw Error(f(156,r.tag))}function nn(t){t.flags|=4}function gx(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!jg(r)){if(r=Wr.current,r!==null&&((Pt&4194048)===Pt?Ms!==null:(Pt&62914560)!==Pt&&(Pt&536870912)===0||r!==Ms))throw Vi=nu,Kf;t.flags|=8192}}function Tc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?ki():536870912,t.lanes|=r,ii|=r)}function Ji(t,r){if(!Gt)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var h=null;i!==null;)i.alternate!==null&&(h=i),i=i.sibling;h===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:h.sibling=null}}function wa(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,h=0;if(r)for(var y=t.child;y!==null;)i|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=t,y=y.sibling;else for(y=t.child;y!==null;)i|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=t,y=y.sibling;return t.subtreeFlags|=h,t.childLanes=i,r}function Vp(t,r,i){var h=r.pendingProps;switch(Wd(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wa(r),null;case 1:return wa(r),null;case 3:return i=r.stateNode,h=null,t!==null&&(h=t.memoizedState.cache),r.memoizedState.cache!==h&&(r.flags|=2048),tn(Xa),dt(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Bi(r)?nn(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xf())),wa(r),null;case 26:return i=r.memoizedState,t===null?(nn(r),i!==null?(wa(r),gx(r,i)):(wa(r),r.flags&=-16777217)):i?i!==t.memoizedState?(nn(r),wa(r),gx(r,i)):(wa(r),r.flags&=-16777217):(t.memoizedProps!==h&&nn(r),wa(r),r.flags&=-16777217),null;case 27:lt(r),i=ie.current;var y=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==h&&nn(r);else{if(!h){if(r.stateNode===null)throw Error(f(166));return wa(r),null}t=ve.current,Bi(r)?qf(r):(t=gg(y,h,i),r.stateNode=t,nn(r))}return wa(r),null;case 5:if(lt(r),i=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==h&&nn(r);else{if(!h){if(r.stateNode===null)throw Error(f(166));return wa(r),null}if(t=ve.current,Bi(r))qf(r);else{switch(y=Hc(ie.current),t){case 1:t=y.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:t=y.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":t=y.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":t=y.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":t=y.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof h.is=="string"?y.createElement("select",{is:h.is}):y.createElement("select"),h.multiple?t.multiple=!0:h.size&&(t.size=h.size);break;default:t=typeof h.is=="string"?y.createElement(i,{is:h.is}):y.createElement(i)}}t[Qa]=r,t[ja]=h;e:for(y=r.child;y!==null;){if(y.tag===5||y.tag===6)t.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===r)break e;for(;y.sibling===null;){if(y.return===null||y.return===r)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}r.stateNode=t;e:switch(sr(t,i,h),i){case"button":case"input":case"select":case"textarea":t=!!h.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&nn(r)}}return wa(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==h&&nn(r);else{if(typeof h!="string"&&r.stateNode===null)throw Error(f(166));if(t=ie.current,Bi(r)){if(t=r.stateNode,i=r.memoizedProps,h=null,y=gr,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}t[Qa]=r,t=!!(t.nodeValue===i||h!==null&&h.suppressHydrationWarning===!0||og(t.nodeValue,i)),t||xl(r)}else t=Hc(t).createTextNode(h),t[Qa]=r,r.stateNode=t}return wa(r),null;case 13:if(h=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(y=Bi(r),h!==null&&h.dehydrated!==null){if(t===null){if(!y)throw Error(f(318));if(y=r.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(f(317));y[Qa]=r}else Li(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;wa(r),y=!1}else y=Xf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=y),y=!0;if(!y)return r.flags&256?(rn(r),r):(rn(r),null)}if(rn(r),(r.flags&128)!==0)return r.lanes=i,r;if(i=h!==null,t=t!==null&&t.memoizedState!==null,i){h=r.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool);var j=null;h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(j=h.memoizedState.cachePool.pool),j!==y&&(h.flags|=2048)}return i!==t&&i&&(r.child.flags|=8192),Tc(r,r.updateQueue),wa(r),null;case 4:return dt(),t===null&&c0(r.stateNode.containerInfo),wa(r),null;case 10:return tn(r.type),wa(r),null;case 19:if(Oe(Za),y=r.memoizedState,y===null)return wa(r),null;if(h=(r.flags&128)!==0,j=y.rendering,j===null)if(h)Ji(y,!1);else{if(Sa!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(j=Cc(t),j!==null){for(r.flags|=128,Ji(y,!1),t=j.updateQueue,r.updateQueue=t,Tc(r,t),r.subtreeFlags=0,t=i,i=r.child;i!==null;)Vf(i,t),i=i.sibling;return xe(Za,Za.current&1|2),r.child}t=t.sibling}y.tail!==null&&Xe()>Dc&&(r.flags|=128,h=!0,Ji(y,!1),r.lanes=4194304)}else{if(!h)if(t=Cc(j),t!==null){if(r.flags|=128,h=!0,t=t.updateQueue,r.updateQueue=t,Tc(r,t),Ji(y,!0),y.tail===null&&y.tailMode==="hidden"&&!j.alternate&&!Gt)return wa(r),null}else 2*Xe()-y.renderingStartTime>Dc&&i!==536870912&&(r.flags|=128,h=!0,Ji(y,!1),r.lanes=4194304);y.isBackwards?(j.sibling=r.child,r.child=j):(t=y.last,t!==null?t.sibling=j:r.child=j,y.last=j)}return y.tail!==null?(r=y.tail,y.rendering=r,y.tail=r.sibling,y.renderingStartTime=Xe(),r.sibling=null,t=Za.current,xe(Za,h?t&1|2:t&1),r):(wa(r),null);case 22:case 23:return rn(r),uu(),h=r.memoizedState!==null,t!==null?t.memoizedState!==null!==h&&(r.flags|=8192):h&&(r.flags|=8192),h?(i&536870912)!==0&&(r.flags&128)===0&&(wa(r),r.subtreeFlags&6&&(r.flags|=8192)):wa(r),i=r.updateQueue,i!==null&&Tc(r,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),h=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),h!==i&&(r.flags|=2048),t!==null&&Oe(pl),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),r.memoizedState.cache!==i&&(r.flags|=2048),tn(Xa),wa(r),null;case 25:return null;case 30:return null}throw Error(f(156,r.tag))}function Gp(t,r){switch(Wd(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return tn(Xa),dt(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return lt(r),null;case 13:if(rn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(f(340));Li()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return Oe(Za),null;case 4:return dt(),null;case 10:return tn(r.type),null;case 22:case 23:return rn(r),uu(),t!==null&&Oe(pl),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return tn(Xa),null;case 25:return null;default:return null}}function mx(t,r){switch(Wd(r),r.tag){case 3:tn(Xa),dt();break;case 26:case 27:case 5:lt(r);break;case 4:dt();break;case 13:rn(r);break;case 19:Oe(Za);break;case 10:tn(r.type);break;case 22:case 23:rn(r),uu(),t!==null&&Oe(pl);break;case 24:tn(Xa)}}function eo(t,r){try{var i=r.updateQueue,h=i!==null?i.lastEffect:null;if(h!==null){var y=h.next;i=y;do{if((i.tag&t)===t){h=void 0;var j=i.create,I=i.inst;h=j(),I.destroy=h}i=i.next}while(i!==y)}}catch(Y){ca(r,r.return,Y)}}function In(t,r,i){try{var h=r.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var j=y.next;h=j;do{if((h.tag&t)===t){var I=h.inst,Y=I.destroy;if(Y!==void 0){I.destroy=void 0,y=r;var ne=i,Se=Y;try{Se()}catch(Be){ca(y,ne,Be)}}}h=h.next}while(h!==j)}}catch(Be){ca(r,r.return,Be)}}function px(t){var r=t.updateQueue;if(r!==null){var i=t.stateNode;try{sh(r,i)}catch(h){ca(t,t.return,h)}}}function yx(t,r,i){i.props=bl(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(h){ca(t,r,h)}}function to(t,r){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var h=t.stateNode;break;case 30:h=t.stateNode;break;default:h=t.stateNode}typeof i=="function"?t.refCleanup=i(h):i.current=h}}catch(y){ca(t,r,y)}}function Ds(t,r){var i=t.ref,h=t.refCleanup;if(i!==null)if(typeof h=="function")try{h()}catch(y){ca(t,r,y)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(y){ca(t,r,y)}else i.current=null}function bx(t){var r=t.type,i=t.memoizedProps,h=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":i.autoFocus&&h.focus();break e;case"img":i.src?h.src=i.src:i.srcSet&&(h.srcset=i.srcSet)}}catch(y){ca(t,t.return,y)}}function Pu(t,r,i){try{var h=t.stateNode;uy(h,t.type,i,r),h[ja]=r}catch(y){ca(t,t.return,y)}}function wx(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Hn(t.type)||t.tag===4}function zu(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||wx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Hn(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Uu(t,r,i){var h=t.tag;if(h===5||h===6)t=t.stateNode,r?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,r):(r=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,r.appendChild(t),i=i._reactRootContainer,i!=null||r.onclick!==null||(r.onclick=Uc));else if(h!==4&&(h===27&&Hn(t.type)&&(i=t.stateNode,r=null),t=t.child,t!==null))for(Uu(t,r,i),t=t.sibling;t!==null;)Uu(t,r,i),t=t.sibling}function _c(t,r,i){var h=t.tag;if(h===5||h===6)t=t.stateNode,r?i.insertBefore(t,r):i.appendChild(t);else if(h!==4&&(h===27&&Hn(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(_c(t,r,i),t=t.sibling;t!==null;)_c(t,r,i),t=t.sibling}function vx(t){var r=t.stateNode,i=t.memoizedProps;try{for(var h=t.type,y=r.attributes;y.length;)r.removeAttributeNode(y[0]);sr(r,h,i),r[Qa]=t,r[ja]=i}catch(j){ca(t,t.return,j)}}var ln=!1,Oa=!1,Hu=!1,Nx=typeof WeakSet=="function"?WeakSet:Set,Ja=null;function qp(t,r){if(t=t.containerInfo,f0=Zc,t=A(t),T(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var h=i.getSelection&&i.getSelection();if(h&&h.rangeCount!==0){i=h.anchorNode;var y=h.anchorOffset,j=h.focusNode;h=h.focusOffset;try{i.nodeType,j.nodeType}catch{i=null;break e}var I=0,Y=-1,ne=-1,Se=0,Be=0,Pe=t,Ee=null;t:for(;;){for(var _e;Pe!==i||y!==0&&Pe.nodeType!==3||(Y=I+y),Pe!==j||h!==0&&Pe.nodeType!==3||(ne=I+h),Pe.nodeType===3&&(I+=Pe.nodeValue.length),(_e=Pe.firstChild)!==null;)Ee=Pe,Pe=_e;for(;;){if(Pe===t)break t;if(Ee===i&&++Se===y&&(Y=I),Ee===j&&++Be===h&&(ne=I),(_e=Pe.nextSibling)!==null)break;Pe=Ee,Ee=Pe.parentNode}Pe=_e}i=Y===-1||ne===-1?null:{start:Y,end:ne}}else i=null}i=i||{start:0,end:0}}else i=null;for(h0={focusedElem:t,selectionRange:i},Zc=!1,Ja=r;Ja!==null;)if(r=Ja,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,Ja=t;else for(;Ja!==null;){switch(r=Ja,j=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&j!==null){t=void 0,i=r,y=j.memoizedProps,j=j.memoizedState,h=i.stateNode;try{var yt=bl(i.type,y,i.elementType===i.type);t=h.getSnapshotBeforeUpdate(yt,j),h.__reactInternalSnapshotBeforeUpdate=t}catch(gt){ca(i,i.return,gt)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,i=t.nodeType,i===9)m0(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":m0(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(f(163))}if(t=r.sibling,t!==null){t.return=r.return,Ja=t;break}Ja=r.return}}function jx(t,r,i){var h=i.flags;switch(i.tag){case 0:case 11:case 15:On(t,i),h&4&&eo(5,i);break;case 1:if(On(t,i),h&4)if(t=i.stateNode,r===null)try{t.componentDidMount()}catch(I){ca(i,i.return,I)}else{var y=bl(i.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(y,r,t.__reactInternalSnapshotBeforeUpdate)}catch(I){ca(i,i.return,I)}}h&64&&px(i),h&512&&to(i,i.return);break;case 3:if(On(t,i),h&64&&(t=i.updateQueue,t!==null)){if(r=null,i.child!==null)switch(i.child.tag){case 27:case 5:r=i.child.stateNode;break;case 1:r=i.child.stateNode}try{sh(t,r)}catch(I){ca(i,i.return,I)}}break;case 27:r===null&&h&4&&vx(i);case 26:case 5:On(t,i),r===null&&h&4&&bx(i),h&512&&to(i,i.return);break;case 12:On(t,i);break;case 13:On(t,i),h&4&&Ax(t,i),h&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=ey.bind(null,i),yy(t,i))));break;case 22:if(h=i.memoizedState!==null||ln,!h){r=r!==null&&r.memoizedState!==null||Oa,y=ln;var j=Oa;ln=h,(Oa=r)&&!j?Bn(t,i,(i.subtreeFlags&8772)!==0):On(t,i),ln=y,Oa=j}break;case 30:break;default:On(t,i)}}function Cx(t){var r=t.alternate;r!==null&&(t.alternate=null,Cx(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&el(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var pa=null,Er=!1;function on(t,r,i){for(i=i.child;i!==null;)kx(t,r,i),i=i.sibling}function kx(t,r,i){if(et&&typeof et.onCommitFiberUnmount=="function")try{et.onCommitFiberUnmount(Re,i)}catch{}switch(i.tag){case 26:Oa||Ds(i,r),on(t,r,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Oa||Ds(i,r);var h=pa,y=Er;Hn(i.type)&&(pa=i.stateNode,Er=!1),on(t,r,i),uo(i.stateNode),pa=h,Er=y;break;case 5:Oa||Ds(i,r);case 6:if(h=pa,y=Er,pa=null,on(t,r,i),pa=h,Er=y,pa!==null)if(Er)try{(pa.nodeType===9?pa.body:pa.nodeName==="HTML"?pa.ownerDocument.body:pa).removeChild(i.stateNode)}catch(j){ca(i,r,j)}else try{pa.removeChild(i.stateNode)}catch(j){ca(i,r,j)}break;case 18:pa!==null&&(Er?(t=pa,hg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),bo(t)):hg(pa,i.stateNode));break;case 4:h=pa,y=Er,pa=i.stateNode.containerInfo,Er=!0,on(t,r,i),pa=h,Er=y;break;case 0:case 11:case 14:case 15:Oa||In(2,i,r),Oa||In(4,i,r),on(t,r,i);break;case 1:Oa||(Ds(i,r),h=i.stateNode,typeof h.componentWillUnmount=="function"&&yx(i,r,h)),on(t,r,i);break;case 21:on(t,r,i);break;case 22:Oa=(h=Oa)||i.memoizedState!==null,on(t,r,i),Oa=h;break;default:on(t,r,i)}}function Ax(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{bo(t)}catch(i){ca(r,r.return,i)}}function Yp(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Nx),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Nx),r;default:throw Error(f(435,t.tag))}}function Vu(t,r){var i=Yp(t);r.forEach(function(h){var y=ty.bind(null,t,h);i.has(h)||(i.add(h),h.then(y,y))})}function Lr(t,r){var i=r.deletions;if(i!==null)for(var h=0;h<i.length;h++){var y=i[h],j=t,I=r,Y=I;e:for(;Y!==null;){switch(Y.tag){case 27:if(Hn(Y.type)){pa=Y.stateNode,Er=!1;break e}break;case 5:pa=Y.stateNode,Er=!1;break e;case 3:case 4:pa=Y.stateNode.containerInfo,Er=!0;break e}Y=Y.return}if(pa===null)throw Error(f(160));kx(j,I,y),pa=null,Er=!1,j=y.alternate,j!==null&&(j.return=null),y.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Sx(r,t),r=r.sibling}var ns=null;function Sx(t,r){var i=t.alternate,h=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Lr(r,t),Fr(t),h&4&&(In(3,t,t.return),eo(3,t),In(5,t,t.return));break;case 1:Lr(r,t),Fr(t),h&512&&(Oa||i===null||Ds(i,i.return)),h&64&&ln&&(t=t.updateQueue,t!==null&&(h=t.callbacks,h!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?h:i.concat(h))));break;case 26:var y=ns;if(Lr(r,t),Fr(t),h&512&&(Oa||i===null||Ds(i,i.return)),h&4){var j=i!==null?i.memoizedState:null;if(h=t.memoizedState,i===null)if(h===null)if(t.stateNode===null){e:{h=t.type,i=t.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":j=y.getElementsByTagName("title")[0],(!j||j[qr]||j[Qa]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=y.createElement(h),y.head.insertBefore(j,y.querySelector("head > title"))),sr(j,h,i),j[Qa]=t,Wt(j),h=j;break e;case"link":var I=vg("link","href",y).get(h+(i.href||""));if(I){for(var Y=0;Y<I.length;Y++)if(j=I[Y],j.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&j.getAttribute("rel")===(i.rel==null?null:i.rel)&&j.getAttribute("title")===(i.title==null?null:i.title)&&j.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){I.splice(Y,1);break t}}j=y.createElement(h),sr(j,h,i),y.head.appendChild(j);break;case"meta":if(I=vg("meta","content",y).get(h+(i.content||""))){for(Y=0;Y<I.length;Y++)if(j=I[Y],j.getAttribute("content")===(i.content==null?null:""+i.content)&&j.getAttribute("name")===(i.name==null?null:i.name)&&j.getAttribute("property")===(i.property==null?null:i.property)&&j.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&j.getAttribute("charset")===(i.charSet==null?null:i.charSet)){I.splice(Y,1);break t}}j=y.createElement(h),sr(j,h,i),y.head.appendChild(j);break;default:throw Error(f(468,h))}j[Qa]=t,Wt(j),h=j}t.stateNode=h}else Ng(y,t.type,t.stateNode);else t.stateNode=wg(y,h,t.memoizedProps);else j!==h?(j===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):j.count--,h===null?Ng(y,t.type,t.stateNode):wg(y,h,t.memoizedProps)):h===null&&t.stateNode!==null&&Pu(t,t.memoizedProps,i.memoizedProps)}break;case 27:Lr(r,t),Fr(t),h&512&&(Oa||i===null||Ds(i,i.return)),i!==null&&h&4&&Pu(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Lr(r,t),Fr(t),h&512&&(Oa||i===null||Ds(i,i.return)),t.flags&32){y=t.stateNode;try{Ga(y,"")}catch(_e){ca(t,t.return,_e)}}h&4&&t.stateNode!=null&&(y=t.memoizedProps,Pu(t,y,i!==null?i.memoizedProps:y)),h&1024&&(Hu=!0);break;case 6:if(Lr(r,t),Fr(t),h&4){if(t.stateNode===null)throw Error(f(162));h=t.memoizedProps,i=t.stateNode;try{i.nodeValue=h}catch(_e){ca(t,t.return,_e)}}break;case 3:if(qc=null,y=ns,ns=Vc(r.containerInfo),Lr(r,t),ns=y,Fr(t),h&4&&i!==null&&i.memoizedState.isDehydrated)try{bo(r.containerInfo)}catch(_e){ca(t,t.return,_e)}Hu&&(Hu=!1,Ex(t));break;case 4:h=ns,ns=Vc(t.stateNode.containerInfo),Lr(r,t),Fr(t),ns=h;break;case 12:Lr(r,t),Fr(t);break;case 13:Lr(r,t),Fr(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(Qu=Xe()),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,Vu(t,h)));break;case 22:y=t.memoizedState!==null;var ne=i!==null&&i.memoizedState!==null,Se=ln,Be=Oa;if(ln=Se||y,Oa=Be||ne,Lr(r,t),Oa=Be,ln=Se,Fr(t),h&8192)e:for(r=t.stateNode,r._visibility=y?r._visibility&-2:r._visibility|1,y&&(i===null||ne||ln||Oa||wl(t)),i=null,r=t;;){if(r.tag===5||r.tag===26){if(i===null){ne=i=r;try{if(j=ne.stateNode,y)I=j.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{Y=ne.stateNode;var Pe=ne.memoizedProps.style,Ee=Pe!=null&&Pe.hasOwnProperty("display")?Pe.display:null;Y.style.display=Ee==null||typeof Ee=="boolean"?"":(""+Ee).trim()}}catch(_e){ca(ne,ne.return,_e)}}}else if(r.tag===6){if(i===null){ne=r;try{ne.stateNode.nodeValue=y?"":ne.memoizedProps}catch(_e){ca(ne,ne.return,_e)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;i===r&&(i=null),r=r.return}i===r&&(i=null),r.sibling.return=r.return,r=r.sibling}h&4&&(h=t.updateQueue,h!==null&&(i=h.retryQueue,i!==null&&(h.retryQueue=null,Vu(t,i))));break;case 19:Lr(r,t),Fr(t),h&4&&(h=t.updateQueue,h!==null&&(t.updateQueue=null,Vu(t,h)));break;case 30:break;case 21:break;default:Lr(r,t),Fr(t)}}function Fr(t){var r=t.flags;if(r&2){try{for(var i,h=t.return;h!==null;){if(wx(h)){i=h;break}h=h.return}if(i==null)throw Error(f(160));switch(i.tag){case 27:var y=i.stateNode,j=zu(t);_c(t,j,y);break;case 5:var I=i.stateNode;i.flags&32&&(Ga(I,""),i.flags&=-33);var Y=zu(t);_c(t,Y,I);break;case 3:case 4:var ne=i.stateNode.containerInfo,Se=zu(t);Uu(t,Se,ne);break;default:throw Error(f(161))}}catch(Be){ca(t,t.return,Be)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ex(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Ex(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function On(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)jx(t,r.alternate,r),r=r.sibling}function wl(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:In(4,r,r.return),wl(r);break;case 1:Ds(r,r.return);var i=r.stateNode;typeof i.componentWillUnmount=="function"&&yx(r,r.return,i),wl(r);break;case 27:uo(r.stateNode);case 26:case 5:Ds(r,r.return),wl(r);break;case 22:r.memoizedState===null&&wl(r);break;case 30:wl(r);break;default:wl(r)}t=t.sibling}}function Bn(t,r,i){for(i=i&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var h=r.alternate,y=t,j=r,I=j.flags;switch(j.tag){case 0:case 11:case 15:Bn(y,j,i),eo(4,j);break;case 1:if(Bn(y,j,i),h=j,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(Se){ca(h,h.return,Se)}if(h=j,y=h.updateQueue,y!==null){var Y=h.stateNode;try{var ne=y.shared.hiddenCallbacks;if(ne!==null)for(y.shared.hiddenCallbacks=null,y=0;y<ne.length;y++)rh(ne[y],Y)}catch(Se){ca(h,h.return,Se)}}i&&I&64&&px(j),to(j,j.return);break;case 27:vx(j);case 26:case 5:Bn(y,j,i),i&&h===null&&I&4&&bx(j),to(j,j.return);break;case 12:Bn(y,j,i);break;case 13:Bn(y,j,i),i&&I&4&&Ax(y,j);break;case 22:j.memoizedState===null&&Bn(y,j,i),to(j,j.return);break;case 30:break;default:Bn(y,j,i)}r=r.sibling}}function Gu(t,r){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&zi(i))}function qu(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&zi(t))}function Rs(t,r,i,h){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)Tx(t,r,i,h),r=r.sibling}function Tx(t,r,i,h){var y=r.flags;switch(r.tag){case 0:case 11:case 15:Rs(t,r,i,h),y&2048&&eo(9,r);break;case 1:Rs(t,r,i,h);break;case 3:Rs(t,r,i,h),y&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&zi(t)));break;case 12:if(y&2048){Rs(t,r,i,h),t=r.stateNode;try{var j=r.memoizedProps,I=j.id,Y=j.onPostCommit;typeof Y=="function"&&Y(I,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(ne){ca(r,r.return,ne)}}else Rs(t,r,i,h);break;case 13:Rs(t,r,i,h);break;case 23:break;case 22:j=r.stateNode,I=r.alternate,r.memoizedState!==null?j._visibility&2?Rs(t,r,i,h):ao(t,r):j._visibility&2?Rs(t,r,i,h):(j._visibility|=2,si(t,r,i,h,(r.subtreeFlags&10256)!==0)),y&2048&&Gu(I,r);break;case 24:Rs(t,r,i,h),y&2048&&qu(r.alternate,r);break;default:Rs(t,r,i,h)}}function si(t,r,i,h,y){for(y=y&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var j=t,I=r,Y=i,ne=h,Se=I.flags;switch(I.tag){case 0:case 11:case 15:si(j,I,Y,ne,y),eo(8,I);break;case 23:break;case 22:var Be=I.stateNode;I.memoizedState!==null?Be._visibility&2?si(j,I,Y,ne,y):ao(j,I):(Be._visibility|=2,si(j,I,Y,ne,y)),y&&Se&2048&&Gu(I.alternate,I);break;case 24:si(j,I,Y,ne,y),y&&Se&2048&&qu(I.alternate,I);break;default:si(j,I,Y,ne,y)}r=r.sibling}}function ao(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var i=t,h=r,y=h.flags;switch(h.tag){case 22:ao(i,h),y&2048&&Gu(h.alternate,h);break;case 24:ao(i,h),y&2048&&qu(h.alternate,h);break;default:ao(i,h)}r=r.sibling}}var ro=8192;function ni(t){if(t.subtreeFlags&ro)for(t=t.child;t!==null;)_x(t),t=t.sibling}function _x(t){switch(t.tag){case 26:ni(t),t.flags&ro&&t.memoizedState!==null&&My(ns,t.memoizedState,t.memoizedProps);break;case 5:ni(t);break;case 3:case 4:var r=ns;ns=Vc(t.stateNode.containerInfo),ni(t),ns=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=ro,ro=16777216,ni(t),ro=r):ni(t));break;default:ni(t)}}function Mx(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function so(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var h=r[i];Ja=h,Rx(h,t)}Mx(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Dx(t),t=t.sibling}function Dx(t){switch(t.tag){case 0:case 11:case 15:so(t),t.flags&2048&&In(9,t,t.return);break;case 3:so(t);break;case 12:so(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Mc(t)):so(t);break;default:so(t)}}function Mc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var i=0;i<r.length;i++){var h=r[i];Ja=h,Rx(h,t)}Mx(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:In(8,r,r.return),Mc(r);break;case 22:i=r.stateNode,i._visibility&2&&(i._visibility&=-3,Mc(r));break;default:Mc(r)}t=t.sibling}}function Rx(t,r){for(;Ja!==null;){var i=Ja;switch(i.tag){case 0:case 11:case 15:In(8,i,r);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var h=i.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:zi(i.memoizedState.cache)}if(h=i.child,h!==null)h.return=i,Ja=h;else e:for(i=t;Ja!==null;){h=Ja;var y=h.sibling,j=h.return;if(Cx(h),h===i){Ja=null;break e}if(y!==null){y.return=j,Ja=y;break e}Ja=j}}}var Xp={getCacheForType:function(t){var r=dr(Xa),i=r.data.get(t);return i===void 0&&(i=t(),r.data.set(t,i)),i}},Zp=typeof WeakMap=="function"?WeakMap:Map,ea=0,ua=null,Rt=null,Pt=0,ta=0,Pr=null,Ln=!1,li=!1,Yu=!1,cn=0,Sa=0,Fn=0,vl=0,Xu=0,Kr=0,ii=0,no=null,Tr=null,Zu=!1,Qu=0,Dc=1/0,Rc=null,Pn=null,rr=0,zn=null,oi=null,ci=0,$u=0,Wu=null,Ix=null,lo=0,Ku=null;function zr(){if((ea&2)!==0&&Pt!==0)return Pt&-Pt;if(H.T!==null){var t=$l;return t!==0?t:n0()}return Gs()}function Ox(){Kr===0&&(Kr=(Pt&536870912)===0||Gt?Ml():536870912);var t=Wr.current;return t!==null&&(t.flags|=32),Kr}function Ur(t,r,i){(t===ua&&(ta===2||ta===9)||t.cancelPendingCommit!==null)&&(di(t,0),Un(t,Pt,Kr,!1)),Dr(t,i),((ea&2)===0||t!==ua)&&(t===ua&&((ea&2)===0&&(vl|=i),Sa===4&&Un(t,Pt,Kr,!1)),Is(t))}function Bx(t,r,i){if((ea&6)!==0)throw Error(f(327));var h=!i&&(r&124)===0&&(r&t.expiredLanes)===0||Bt(t,r),y=h?Wp(t,r):t0(t,r,!0),j=h;do{if(y===0){li&&!h&&Un(t,r,0,!1);break}else{if(i=t.current.alternate,j&&!Qp(i)){y=t0(t,r,!1),j=!1;continue}if(y===2){if(j=r,t.errorRecoveryDisabledLanes&j)var I=0;else I=t.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){r=I;e:{var Y=t;y=no;var ne=Y.current.memoizedState.isDehydrated;if(ne&&(di(Y,I).flags|=256),I=t0(Y,I,!1),I!==2){if(Yu&&!ne){Y.errorRecoveryDisabledLanes|=j,vl|=j,y=4;break e}j=Tr,Tr=y,j!==null&&(Tr===null?Tr=j:Tr.push.apply(Tr,j))}y=I}if(j=!1,y!==2)continue}}if(y===1){di(t,0),Un(t,r,0,!0);break}e:{switch(h=t,j=y,j){case 0:case 1:throw Error(f(345));case 4:if((r&4194048)!==r)break;case 6:Un(h,r,Kr,!Ln);break e;case 2:Tr=null;break;case 3:case 5:break;default:throw Error(f(329))}if((r&62914560)===r&&(y=Qu+300-Xe(),10<y)){if(Un(h,r,Kr,!Ln),ut(h,0,!0)!==0)break e;h.timeoutHandle=ug(Lx.bind(null,h,i,Tr,Rc,Zu,r,Kr,vl,ii,Ln,j,2,-0,0),y);break e}Lx(h,i,Tr,Rc,Zu,r,Kr,vl,ii,Ln,j,0,-0,0)}}break}while(!0);Is(t)}function Lx(t,r,i,h,y,j,I,Y,ne,Se,Be,Pe,Ee,_e){if(t.timeoutHandle=-1,Pe=r.subtreeFlags,(Pe&8192||(Pe&16785408)===16785408)&&(xo={stylesheets:null,count:0,unsuspend:_y},_x(r),Pe=Dy(),Pe!==null)){t.cancelPendingCommit=Pe(Gx.bind(null,t,r,j,i,h,y,I,Y,ne,Be,1,Ee,_e)),Un(t,j,I,!Se);return}Gx(t,r,j,i,h,y,I,Y,ne)}function Qp(t){for(var r=t;;){var i=r.tag;if((i===0||i===11||i===15)&&r.flags&16384&&(i=r.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var h=0;h<i.length;h++){var y=i[h],j=y.getSnapshot;y=y.value;try{if(!o(j(),y))return!1}catch{return!1}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Un(t,r,i,h){r&=~Xu,r&=~vl,t.suspendedLanes|=r,t.pingedLanes&=~r,h&&(t.warmLanes|=r),h=t.expirationTimes;for(var y=r;0<y;){var j=31-pt(y),I=1<<j;h[j]=-1,y&=~I}i!==0&&Ai(t,i,r)}function Ic(){return(ea&6)===0?(io(0),!1):!0}function Ju(){if(Rt!==null){if(ta===0)var t=Rt.return;else t=Rt,en=gl=null,mu(t),ai=null,Wi=0,t=Rt;for(;t!==null;)mx(t.alternate,t),t=t.return;Rt=null}}function di(t,r){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,hy(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),Ju(),ua=t,Rt=i=Ws(t.current,null),Pt=r,ta=0,Pr=null,Ln=!1,li=Bt(t,r),Yu=!1,ii=Kr=Xu=vl=Fn=Sa=0,Tr=no=null,Zu=!1,(r&8)!==0&&(r|=r&32);var h=t.entangledLanes;if(h!==0)for(t=t.entanglements,h&=r;0<h;){var y=31-pt(h),j=1<<y;r|=t[y],h&=~j}return cn=r,ac(),i}function Fx(t,r){Et=null,H.H=vc,r===Hi||r===uc?(r=th(),ta=3):r===Kf?(r=th(),ta=4):ta=r===ax?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,Pr=r,Rt===null&&(Sa=1,Ac(t,Xr(r,t.current)))}function Px(){var t=H.H;return H.H=vc,t===null?vc:t}function zx(){var t=H.A;return H.A=Xp,t}function e0(){Sa=4,Ln||(Pt&4194048)!==Pt&&Wr.current!==null||(li=!0),(Fn&134217727)===0&&(vl&134217727)===0||ua===null||Un(ua,Pt,Kr,!1)}function t0(t,r,i){var h=ea;ea|=2;var y=Px(),j=zx();(ua!==t||Pt!==r)&&(Rc=null,di(t,r)),r=!1;var I=Sa;e:do try{if(ta!==0&&Rt!==null){var Y=Rt,ne=Pr;switch(ta){case 8:Ju(),I=6;break e;case 3:case 2:case 9:case 6:Wr.current===null&&(r=!0);var Se=ta;if(ta=0,Pr=null,ui(t,Y,ne,Se),i&&li){I=0;break e}break;default:Se=ta,ta=0,Pr=null,ui(t,Y,ne,Se)}}$p(),I=Sa;break}catch(Be){Fx(t,Be)}while(!0);return r&&t.shellSuspendCounter++,en=gl=null,ea=h,H.H=y,H.A=j,Rt===null&&(ua=null,Pt=0,ac()),I}function $p(){for(;Rt!==null;)Ux(Rt)}function Wp(t,r){var i=ea;ea|=2;var h=Px(),y=zx();ua!==t||Pt!==r?(Rc=null,Dc=Xe()+500,di(t,r)):li=Bt(t,r);e:do try{if(ta!==0&&Rt!==null){r=Rt;var j=Pr;t:switch(ta){case 1:ta=0,Pr=null,ui(t,r,j,1);break;case 2:case 9:if(Jf(j)){ta=0,Pr=null,Hx(r);break}r=function(){ta!==2&&ta!==9||ua!==t||(ta=7),Is(t)},j.then(r,r);break e;case 3:ta=7;break e;case 4:ta=5;break e;case 7:Jf(j)?(ta=0,Pr=null,Hx(r)):(ta=0,Pr=null,ui(t,r,j,7));break;case 5:var I=null;switch(Rt.tag){case 26:I=Rt.memoizedState;case 5:case 27:var Y=Rt;if(!I||jg(I)){ta=0,Pr=null;var ne=Y.sibling;if(ne!==null)Rt=ne;else{var Se=Y.return;Se!==null?(Rt=Se,Oc(Se)):Rt=null}break t}}ta=0,Pr=null,ui(t,r,j,5);break;case 6:ta=0,Pr=null,ui(t,r,j,6);break;case 8:Ju(),Sa=6;break e;default:throw Error(f(462))}}Kp();break}catch(Be){Fx(t,Be)}while(!0);return en=gl=null,H.H=h,H.A=y,ea=i,Rt!==null?0:(ua=null,Pt=0,ac(),Sa)}function Kp(){for(;Rt!==null&&!Ye();)Ux(Rt)}function Ux(t){var r=xx(t.alternate,t,cn);t.memoizedProps=t.pendingProps,r===null?Oc(t):Rt=r}function Hx(t){var r=t,i=r.alternate;switch(r.tag){case 15:case 0:r=ox(i,r,r.pendingProps,r.type,void 0,Pt);break;case 11:r=ox(i,r,r.pendingProps,r.type.render,r.ref,Pt);break;case 5:mu(r);default:mx(i,r),r=Rt=Vf(r,cn),r=xx(i,r,cn)}t.memoizedProps=t.pendingProps,r===null?Oc(t):Rt=r}function ui(t,r,i,h){en=gl=null,mu(r),ai=null,Wi=0;var y=r.return;try{if(Up(t,y,r,i,Pt)){Sa=1,Ac(t,Xr(i,t.current)),Rt=null;return}}catch(j){if(y!==null)throw Rt=y,j;Sa=1,Ac(t,Xr(i,t.current)),Rt=null;return}r.flags&32768?(Gt||h===1?t=!0:li||(Pt&536870912)!==0?t=!1:(Ln=t=!0,(h===2||h===9||h===3||h===6)&&(h=Wr.current,h!==null&&h.tag===13&&(h.flags|=16384))),Vx(r,t)):Oc(r)}function Oc(t){var r=t;do{if((r.flags&32768)!==0){Vx(r,Ln);return}t=r.return;var i=Vp(r.alternate,r,cn);if(i!==null){Rt=i;return}if(r=r.sibling,r!==null){Rt=r;return}Rt=r=t}while(r!==null);Sa===0&&(Sa=5)}function Vx(t,r){do{var i=Gp(t.alternate,t);if(i!==null){i.flags&=32767,Rt=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!r&&(t=t.sibling,t!==null)){Rt=t;return}Rt=t=i}while(t!==null);Sa=6,Rt=null}function Gx(t,r,i,h,y,j,I,Y,ne){t.cancelPendingCommit=null;do Bc();while(rr!==0);if((ea&6)!==0)throw Error(f(327));if(r!==null){if(r===t.current)throw Error(f(177));if(j=r.lanes|r.childLanes,j|=qd,qo(t,i,j,I,Y,ne),t===ua&&(Rt=ua=null,Pt=0),oi=r,zn=t,ci=i,$u=j,Wu=y,Ix=h,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,ay(je,function(){return Qx(),null})):(t.callbackNode=null,t.callbackPriority=0),h=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||h){h=H.T,H.T=null,y=ee.p,ee.p=2,I=ea,ea|=4;try{qp(t,r,i)}finally{ea=I,ee.p=y,H.T=h}}rr=1,qx(),Yx(),Xx()}}function qx(){if(rr===1){rr=0;var t=zn,r=oi,i=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||i){i=H.T,H.T=null;var h=ee.p;ee.p=2;var y=ea;ea|=4;try{Sx(r,t);var j=h0,I=A(t.containerInfo),Y=j.focusedElem,ne=j.selectionRange;if(I!==Y&&Y&&Y.ownerDocument&&v(Y.ownerDocument.documentElement,Y)){if(ne!==null&&T(Y)){var Se=ne.start,Be=ne.end;if(Be===void 0&&(Be=Se),"selectionStart"in Y)Y.selectionStart=Se,Y.selectionEnd=Math.min(Be,Y.value.length);else{var Pe=Y.ownerDocument||document,Ee=Pe&&Pe.defaultView||window;if(Ee.getSelection){var _e=Ee.getSelection(),yt=Y.textContent.length,gt=Math.min(ne.start,yt),la=ne.end===void 0?gt:Math.min(ne.end,yt);!_e.extend&&gt>la&&(I=la,la=gt,gt=I);var me=p(Y,gt),fe=p(Y,la);if(me&&fe&&(_e.rangeCount!==1||_e.anchorNode!==me.node||_e.anchorOffset!==me.offset||_e.focusNode!==fe.node||_e.focusOffset!==fe.offset)){var ke=Pe.createRange();ke.setStart(me.node,me.offset),_e.removeAllRanges(),gt>la?(_e.addRange(ke),_e.extend(fe.node,fe.offset)):(ke.setEnd(fe.node,fe.offset),_e.addRange(ke))}}}}for(Pe=[],_e=Y;_e=_e.parentNode;)_e.nodeType===1&&Pe.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Pe.length;Y++){var Le=Pe[Y];Le.element.scrollLeft=Le.left,Le.element.scrollTop=Le.top}}Zc=!!f0,h0=f0=null}finally{ea=y,ee.p=h,H.T=i}}t.current=r,rr=2}}function Yx(){if(rr===2){rr=0;var t=zn,r=oi,i=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||i){i=H.T,H.T=null;var h=ee.p;ee.p=2;var y=ea;ea|=4;try{jx(t,r.alternate,r)}finally{ea=y,ee.p=h,H.T=i}}rr=3}}function Xx(){if(rr===4||rr===3){rr=0,Ae();var t=zn,r=oi,i=ci,h=Ix;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?rr=5:(rr=0,oi=zn=null,Zx(t,t.pendingLanes));var y=t.pendingLanes;if(y===0&&(Pn=null),La(i),r=r.stateNode,et&&typeof et.onCommitFiberRoot=="function")try{et.onCommitFiberRoot(Re,r,void 0,(r.current.flags&128)===128)}catch{}if(h!==null){r=H.T,y=ee.p,ee.p=2,H.T=null;try{for(var j=t.onRecoverableError,I=0;I<h.length;I++){var Y=h[I];j(Y.value,{componentStack:Y.stack})}}finally{H.T=r,ee.p=y}}(ci&3)!==0&&Bc(),Is(t),y=t.pendingLanes,(i&4194090)!==0&&(y&42)!==0?t===Ku?lo++:(lo=0,Ku=t):lo=0,io(0)}}function Zx(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,zi(r)))}function Bc(t){return qx(),Yx(),Xx(),Qx()}function Qx(){if(rr!==5)return!1;var t=zn,r=$u;$u=0;var i=La(ci),h=H.T,y=ee.p;try{ee.p=32>i?32:i,H.T=null,i=Wu,Wu=null;var j=zn,I=ci;if(rr=0,oi=zn=null,ci=0,(ea&6)!==0)throw Error(f(331));var Y=ea;if(ea|=4,Dx(j.current),Tx(j,j.current,I,i),ea=Y,io(0,!1),et&&typeof et.onPostCommitFiberRoot=="function")try{et.onPostCommitFiberRoot(Re,j)}catch{}return!0}finally{ee.p=y,H.T=h,Zx(t,r)}}function $x(t,r,i){r=Xr(i,r),r=_u(t.stateNode,r,2),t=_n(t,r,2),t!==null&&(Dr(t,2),Is(t))}function ca(t,r,i){if(t.tag===3)$x(t,t,i);else for(;r!==null;){if(r.tag===3){$x(r,t,i);break}else if(r.tag===1){var h=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(Pn===null||!Pn.has(h))){t=Xr(i,t),i=ex(2),h=_n(r,i,2),h!==null&&(tx(i,h,r,t),Dr(h,2),Is(h));break}}r=r.return}}function a0(t,r,i){var h=t.pingCache;if(h===null){h=t.pingCache=new Zp;var y=new Set;h.set(r,y)}else y=h.get(r),y===void 0&&(y=new Set,h.set(r,y));y.has(i)||(Yu=!0,y.add(i),t=Jp.bind(null,t,r,i),r.then(t,t))}function Jp(t,r,i){var h=t.pingCache;h!==null&&h.delete(r),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,ua===t&&(Pt&i)===i&&(Sa===4||Sa===3&&(Pt&62914560)===Pt&&300>Xe()-Qu?(ea&2)===0&&di(t,0):Xu|=i,ii===Pt&&(ii=0)),Is(t)}function Wx(t,r){r===0&&(r=ki()),t=Yl(t,r),t!==null&&(Dr(t,r),Is(t))}function ey(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),Wx(t,i)}function ty(t,r){var i=0;switch(t.tag){case 13:var h=t.stateNode,y=t.memoizedState;y!==null&&(i=y.retryLane);break;case 19:h=t.stateNode;break;case 22:h=t.stateNode._retryCache;break;default:throw Error(f(314))}h!==null&&h.delete(r),Wx(t,i)}function ay(t,r){return Je(t,r)}var Lc=null,fi=null,r0=!1,Fc=!1,s0=!1,Nl=0;function Is(t){t!==fi&&t.next===null&&(fi===null?Lc=fi=t:fi=fi.next=t),Fc=!0,r0||(r0=!0,sy())}function io(t,r){if(!s0&&Fc){s0=!0;do for(var i=!1,h=Lc;h!==null;){if(t!==0){var y=h.pendingLanes;if(y===0)var j=0;else{var I=h.suspendedLanes,Y=h.pingedLanes;j=(1<<31-pt(42|t)+1)-1,j&=y&~(I&~Y),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(i=!0,tg(h,j))}else j=Pt,j=ut(h,h===ua?j:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(j&3)===0||Bt(h,j)||(i=!0,tg(h,j));h=h.next}while(i);s0=!1}}function ry(){Kx()}function Kx(){Fc=r0=!1;var t=0;Nl!==0&&(fy()&&(t=Nl),Nl=0);for(var r=Xe(),i=null,h=Lc;h!==null;){var y=h.next,j=Jx(h,r);j===0?(h.next=null,i===null?Lc=y:i.next=y,y===null&&(fi=i)):(i=h,(t!==0||(j&3)!==0)&&(Fc=!0)),h=y}io(t)}function Jx(t,r){for(var i=t.suspendedLanes,h=t.pingedLanes,y=t.expirationTimes,j=t.pendingLanes&-62914561;0<j;){var I=31-pt(j),Y=1<<I,ne=y[I];ne===-1?((Y&i)===0||(Y&h)!==0)&&(y[I]=ms(Y,r)):ne<=r&&(t.expiredLanes|=Y),j&=~Y}if(r=ua,i=Pt,i=ut(t,t===r?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),h=t.callbackNode,i===0||t===r&&(ta===2||ta===9)||t.cancelPendingCommit!==null)return h!==null&&h!==null&&be(h),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Bt(t,i)){if(r=i&-i,r===t.callbackPriority)return r;switch(h!==null&&be(h),La(i)){case 2:case 8:i=ae;break;case 32:i=je;break;case 268435456:i=xt;break;default:i=je}return h=eg.bind(null,t),i=Je(i,h),t.callbackPriority=r,t.callbackNode=i,r}return h!==null&&h!==null&&be(h),t.callbackPriority=2,t.callbackNode=null,2}function eg(t,r){if(rr!==0&&rr!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Bc()&&t.callbackNode!==i)return null;var h=Pt;return h=ut(t,t===ua?h:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),h===0?null:(Bx(t,h,r),Jx(t,Xe()),t.callbackNode!=null&&t.callbackNode===i?eg.bind(null,t):null)}function tg(t,r){if(Bc())return null;Bx(t,r,!0)}function sy(){xy(function(){(ea&6)!==0?Je(Me,ry):Kx()})}function n0(){return Nl===0&&(Nl=Ml()),Nl}function ag(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ll(""+t)}function rg(t,r){var i=r.ownerDocument.createElement("input");return i.name=r.name,i.value=r.value,t.id&&i.setAttribute("form",t.id),r.parentNode.insertBefore(i,r),t=new FormData(t),i.parentNode.removeChild(i),t}function ny(t,r,i,h,y){if(r==="submit"&&i&&i.stateNode===y){var j=ag((y[ja]||null).action),I=h.submitter;I&&(r=(r=I[ja]||null)?ag(r.formAction):I.getAttribute("formAction"),r!==null&&(j=r,I=null));var Y=new As("action","action",null,h,y);t.push({event:Y,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(Nl!==0){var ne=I?rg(y,I):new FormData(y);ku(i,{pending:!0,data:ne,method:y.method,action:j},null,ne)}}else typeof j=="function"&&(Y.preventDefault(),ne=I?rg(y,I):new FormData(y),ku(i,{pending:!0,data:ne,method:y.method,action:j},j,ne))},currentTarget:y}]})}}for(var l0=0;l0<Ts.length;l0++){var i0=Ts[l0],ly=i0.toLowerCase(),iy=i0[0].toUpperCase()+i0.slice(1);Or(ly,"on"+iy)}Or(bt,"onAnimationEnd"),Or(tr,"onAnimationIteration"),Or(Ar,"onAnimationStart"),Or("dblclick","onDoubleClick"),Or("focusin","onFocus"),Or("focusout","onBlur"),Or(or,"onTransitionRun"),Or(Jt,"onTransitionStart"),Or(Ya,"onTransitionCancel"),Or(cr,"onTransitionEnd"),Ca("onMouseEnter",["mouseout","mouseover"]),Ca("onMouseLeave",["mouseout","mouseover"]),Ca("onPointerEnter",["pointerout","pointerover"]),Ca("onPointerLeave",["pointerout","pointerover"]),Wa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oy=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oo));function sg(t,r){r=(r&4)!==0;for(var i=0;i<t.length;i++){var h=t[i],y=h.event;h=h.listeners;e:{var j=void 0;if(r)for(var I=h.length-1;0<=I;I--){var Y=h[I],ne=Y.instance,Se=Y.currentTarget;if(Y=Y.listener,ne!==j&&y.isPropagationStopped())break e;j=Y,y.currentTarget=Se;try{j(y)}catch(Be){kc(Be)}y.currentTarget=null,j=ne}else for(I=0;I<h.length;I++){if(Y=h[I],ne=Y.instance,Se=Y.currentTarget,Y=Y.listener,ne!==j&&y.isPropagationStopped())break e;j=Y,y.currentTarget=Se;try{j(y)}catch(Be){kc(Be)}y.currentTarget=null,j=ne}}}}function It(t,r){var i=r[$a];i===void 0&&(i=r[$a]=new Set);var h=t+"__bubble";i.has(h)||(ng(r,t,2,!1),i.add(h))}function o0(t,r,i){var h=0;r&&(h|=4),ng(i,t,h,r)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function c0(t){if(!t[Pc]){t[Pc]=!0,Yo.forEach(function(i){i!=="selectionchange"&&(oy.has(i)||o0(i,!1,t),o0(i,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Pc]||(r[Pc]=!0,o0("selectionchange",!1,r))}}function ng(t,r,i,h){switch(Tg(r)){case 2:var y=Oy;break;case 8:y=By;break;default:y=j0}i=y.bind(null,r,i,t),y=void 0,!wt||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(y=!0),h?y!==void 0?t.addEventListener(r,i,{capture:!0,passive:y}):t.addEventListener(r,i,!0):y!==void 0?t.addEventListener(r,i,{passive:y}):t.addEventListener(r,i,!1)}function d0(t,r,i,h,y){var j=h;if((r&1)===0&&(r&2)===0&&h!==null)e:for(;;){if(h===null)return;var I=h.tag;if(I===3||I===4){var Y=h.stateNode.containerInfo;if(Y===y)break;if(I===4)for(I=h.return;I!==null;){var ne=I.tag;if((ne===3||ne===4)&&I.stateNode.containerInfo===y)return;I=I.return}for(;Y!==null;){if(I=_a(Y),I===null)return;if(ne=I.tag,ne===5||ne===6||ne===26||ne===27){h=j=I;continue e}Y=Y.parentNode}}h=h.return}as(function(){var Se=j,Be=mn(i),Pe=[];e:{var Ee=$s.get(t);if(Ee!==void 0){var _e=As,yt=t;switch(t){case"keypress":if(Fl(i)===0)break e;case"keydown":case"keyup":_e=_i;break;case"focusin":yt="focus",_e=wn;break;case"focusout":yt="blur",_e=wn;break;case"beforeblur":case"afterblur":_e=wn;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=$o;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Zt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=Kt;break;case bt:case tr:case Ar:_e=Ld;break;case cr:_e=Ud;break;case"scroll":case"scrollend":_e=lr;break;case"wheel":_e=Zs;break;case"copy":case"cut":case"paste":_e=jt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=ll;break;case"toggle":case"beforetoggle":_e=Hd}var gt=(r&4)!==0,la=!gt&&(t==="scroll"||t==="scrollend"),me=gt?Ee!==null?Ee+"Capture":null:Ee;gt=[];for(var fe=Se,ke;fe!==null;){var Le=fe;if(ke=Le.stateNode,Le=Le.tag,Le!==5&&Le!==26&&Le!==27||ke===null||me===null||(Le=ft(fe,me),Le!=null&&gt.push(co(fe,Le,ke))),la)break;fe=fe.return}0<gt.length&&(Ee=new _e(Ee,yt,null,i,Be),Pe.push({event:Ee,listeners:gt}))}}if((r&7)===0){e:{if(Ee=t==="mouseover"||t==="pointerover",_e=t==="mouseout"||t==="pointerout",Ee&&i!==tl&&(yt=i.relatedTarget||i.fromElement)&&(_a(yt)||yt[ps]))break e;if((_e||Ee)&&(Ee=Be.window===Be?Be:(Ee=Be.ownerDocument)?Ee.defaultView||Ee.parentWindow:window,_e?(yt=i.relatedTarget||i.toElement,_e=Se,yt=yt?_a(yt):null,yt!==null&&(la=m(yt),gt=yt.tag,yt!==la||gt!==5&&gt!==27&&gt!==6)&&(yt=null)):(_e=null,yt=Se),_e!==yt)){if(gt=$o,Le="onMouseLeave",me="onMouseEnter",fe="mouse",(t==="pointerout"||t==="pointerover")&&(gt=ll,Le="onPointerLeave",me="onPointerEnter",fe="pointer"),la=_e==null?Ee:ys(_e),ke=yt==null?Ee:ys(yt),Ee=new gt(Le,fe+"leave",_e,i,Be),Ee.target=la,Ee.relatedTarget=ke,Le=null,_a(Be)===Se&&(gt=new gt(me,fe+"enter",yt,i,Be),gt.target=ke,gt.relatedTarget=la,Le=gt),la=Le,_e&&yt)t:{for(gt=_e,me=yt,fe=0,ke=gt;ke;ke=hi(ke))fe++;for(ke=0,Le=me;Le;Le=hi(Le))ke++;for(;0<fe-ke;)gt=hi(gt),fe--;for(;0<ke-fe;)me=hi(me),ke--;for(;fe--;){if(gt===me||me!==null&&gt===me.alternate)break t;gt=hi(gt),me=hi(me)}gt=null}else gt=null;_e!==null&&lg(Pe,Ee,_e,gt,!1),yt!==null&&la!==null&&lg(Pe,la,yt,gt,!0)}}e:{if(Ee=Se?ys(Se):window,_e=Ee.nodeName&&Ee.nodeName.toLowerCase(),_e==="select"||_e==="input"&&Ee.type==="file")var nt=ec;else if(cl(Ee))if(Ii)nt=s;else{nt=O;var _t=Gl}else _e=Ee.nodeName,!_e||_e.toLowerCase()!=="input"||Ee.type!=="checkbox"&&Ee.type!=="radio"?Se&&ot(Se.elementType)&&(nt=ec):nt=a;if(nt&&(nt=nt(t,Se))){xr(Pe,nt,i,Be);break e}_t&&_t(t,Ee,Se),t==="focusout"&&Se&&Ee.type==="number"&&Se.memoizedProps.value!=null&&Ce(Ee,"number",Ee.value)}switch(_t=Se?ys(Se):window,t){case"focusin":(cl(_t)||_t.contentEditable==="true")&&(q=_t,te=Se,ce=null);break;case"focusout":ce=te=q=null;break;case"mousedown":ue=!0;break;case"contextmenu":case"mouseup":case"dragend":ue=!1,Ne(Pe,i,Be);break;case"selectionchange":if(L)break;case"keydown":case"keyup":Ne(Pe,i,Be)}var ct;if(il)e:{switch(t){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else jn?Qs(t,i)&&(mt="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(mt="onCompositionStart");mt&&(Di&&i.locale!=="ko"&&(jn||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&jn&&(ct=js()):(Ns=Be,al="value"in Ns?Ns.value:Ns.textContent,jn=!0)),_t=zc(Se,mt),0<_t.length&&(mt=new sl(mt,t,null,i,Be),Pe.push({event:mt,listeners:_t}),ct?mt.data=ct:(ct=Hl(i),ct!==null&&(mt.data=ct)))),(ct=Mi?ol(t,i):Vd(t,i))&&(mt=zc(Se,"onBeforeInput"),0<mt.length&&(_t=new sl("onBeforeInput","beforeinput",null,i,Be),Pe.push({event:_t,listeners:mt}),_t.data=ct)),ny(Pe,t,Se,i,Be)}sg(Pe,r)})}function co(t,r,i){return{instance:t,listener:r,currentTarget:i}}function zc(t,r){for(var i=r+"Capture",h=[];t!==null;){var y=t,j=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||j===null||(y=ft(t,i),y!=null&&h.unshift(co(t,y,j)),y=ft(t,r),y!=null&&h.push(co(t,y,j))),t.tag===3)return h;t=t.return}return[]}function hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function lg(t,r,i,h,y){for(var j=r._reactName,I=[];i!==null&&i!==h;){var Y=i,ne=Y.alternate,Se=Y.stateNode;if(Y=Y.tag,ne!==null&&ne===h)break;Y!==5&&Y!==26&&Y!==27||Se===null||(ne=Se,y?(Se=ft(i,j),Se!=null&&I.unshift(co(i,Se,ne))):y||(Se=ft(i,j),Se!=null&&I.push(co(i,Se,ne)))),i=i.return}I.length!==0&&t.push({event:r,listeners:I})}var cy=/\r\n?/g,dy=/\u0000|\uFFFD/g;function ig(t){return(typeof t=="string"?t:""+t).replace(cy,`
`).replace(dy,"")}function og(t,r){return r=ig(r),ig(t)===r}function Uc(){}function na(t,r,i,h,y,j){switch(i){case"children":typeof h=="string"?r==="body"||r==="textarea"&&h===""||Ga(t,h):(typeof h=="number"||typeof h=="bigint")&&r!=="body"&&Ga(t,""+h);break;case"className":Rl(t,"class",h);break;case"tabIndex":Rl(t,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Rl(t,i,h);break;case"style":hr(t,h,j);break;case"data":if(r!=="object"){Rl(t,"data",h);break}case"src":case"href":if(h===""&&(r!=="a"||i!=="href")){t.removeAttribute(i);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){t.removeAttribute(i);break}h=Ll(""+h),t.setAttribute(i,h);break;case"action":case"formAction":if(typeof h=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(i==="formAction"?(r!=="input"&&na(t,r,"name",y.name,y,null),na(t,r,"formEncType",y.formEncType,y,null),na(t,r,"formMethod",y.formMethod,y,null),na(t,r,"formTarget",y.formTarget,y,null)):(na(t,r,"encType",y.encType,y,null),na(t,r,"method",y.method,y,null),na(t,r,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){t.removeAttribute(i);break}h=Ll(""+h),t.setAttribute(i,h);break;case"onClick":h!=null&&(t.onclick=Uc);break;case"onScroll":h!=null&&It("scroll",t);break;case"onScrollEnd":h!=null&&It("scrollend",t);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(i=h.__html,i!=null){if(y.children!=null)throw Error(f(60));t.innerHTML=i}}break;case"multiple":t.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":t.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){t.removeAttribute("xlink:href");break}i=Ll(""+h),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(i,""+h):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":h===!0?t.setAttribute(i,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?t.setAttribute(i,h):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?t.setAttribute(i,h):t.removeAttribute(i);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?t.removeAttribute(i):t.setAttribute(i,h);break;case"popover":It("beforetoggle",t),It("toggle",t),ze(t,"popover",h);break;case"xlinkActuate":Ut(t,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":Ut(t,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":Ut(t,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":Ut(t,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":Ut(t,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":Ut(t,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":Ut(t,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":ze(t,"is",h);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=fa.get(i)||i,ze(t,i,h))}}function u0(t,r,i,h,y,j){switch(i){case"style":hr(t,h,j);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(f(61));if(i=h.__html,i!=null){if(y.children!=null)throw Error(f(60));t.innerHTML=i}}break;case"children":typeof h=="string"?Ga(t,h):(typeof h=="number"||typeof h=="bigint")&&Ga(t,""+h);break;case"onScroll":h!=null&&It("scroll",t);break;case"onScrollEnd":h!=null&&It("scrollend",t);break;case"onClick":h!=null&&(t.onclick=Uc);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Xo.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(y=i.endsWith("Capture"),r=i.slice(2,y?i.length-7:void 0),j=t[ja]||null,j=j!=null?j[i]:null,typeof j=="function"&&t.removeEventListener(r,j,y),typeof h=="function")){typeof j!="function"&&j!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(r,h,y);break e}i in t?t[i]=h:h===!0?t.setAttribute(i,""):ze(t,i,h)}}}function sr(t,r,i){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":It("error",t),It("load",t);var h=!1,y=!1,j;for(j in i)if(i.hasOwnProperty(j)){var I=i[j];if(I!=null)switch(j){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(f(137,r));default:na(t,r,j,I,i,null)}}y&&na(t,r,"srcSet",i.srcSet,i,null),h&&na(t,r,"src",i.src,i,null);return;case"input":It("invalid",t);var Y=j=I=y=null,ne=null,Se=null;for(h in i)if(i.hasOwnProperty(h)){var Be=i[h];if(Be!=null)switch(h){case"name":y=Be;break;case"type":I=Be;break;case"checked":ne=Be;break;case"defaultChecked":Se=Be;break;case"value":j=Be;break;case"defaultValue":Y=Be;break;case"children":case"dangerouslySetInnerHTML":if(Be!=null)throw Error(f(137,r));break;default:na(t,r,h,Be,i,null)}}Va(t,j,Y,ne,Se,I,y,!1),Ol(t);return;case"select":It("invalid",t),h=I=j=null;for(y in i)if(i.hasOwnProperty(y)&&(Y=i[y],Y!=null))switch(y){case"value":j=Y;break;case"defaultValue":I=Y;break;case"multiple":h=Y;default:na(t,r,y,Y,i,null)}r=j,i=I,t.multiple=!!h,r!=null?J(t,!!h,r,!1):i!=null&&J(t,!!h,i,!0);return;case"textarea":It("invalid",t),j=y=h=null;for(I in i)if(i.hasOwnProperty(I)&&(Y=i[I],Y!=null))switch(I){case"value":h=Y;break;case"defaultValue":y=Y;break;case"children":j=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(f(91));break;default:na(t,r,I,Y,i,null)}Ma(t,h,y,j),Ol(t);return;case"option":for(ne in i)if(i.hasOwnProperty(ne)&&(h=i[ne],h!=null))switch(ne){case"selected":t.selected=h&&typeof h!="function"&&typeof h!="symbol";break;default:na(t,r,ne,h,i,null)}return;case"dialog":It("beforetoggle",t),It("toggle",t),It("cancel",t),It("close",t);break;case"iframe":case"object":It("load",t);break;case"video":case"audio":for(h=0;h<oo.length;h++)It(oo[h],t);break;case"image":It("error",t),It("load",t);break;case"details":It("toggle",t);break;case"embed":case"source":case"link":It("error",t),It("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Se in i)if(i.hasOwnProperty(Se)&&(h=i[Se],h!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":throw Error(f(137,r));default:na(t,r,Se,h,i,null)}return;default:if(ot(r)){for(Be in i)i.hasOwnProperty(Be)&&(h=i[Be],h!==void 0&&u0(t,r,Be,h,i,void 0));return}}for(Y in i)i.hasOwnProperty(Y)&&(h=i[Y],h!=null&&na(t,r,Y,h,i,null))}function uy(t,r,i,h){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,j=null,I=null,Y=null,ne=null,Se=null,Be=null;for(_e in i){var Pe=i[_e];if(i.hasOwnProperty(_e)&&Pe!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":ne=Pe;default:h.hasOwnProperty(_e)||na(t,r,_e,null,h,Pe)}}for(var Ee in h){var _e=h[Ee];if(Pe=i[Ee],h.hasOwnProperty(Ee)&&(_e!=null||Pe!=null))switch(Ee){case"type":j=_e;break;case"name":y=_e;break;case"checked":Se=_e;break;case"defaultChecked":Be=_e;break;case"value":I=_e;break;case"defaultValue":Y=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(f(137,r));break;default:_e!==Pe&&na(t,r,Ee,_e,h,Pe)}}Xt(t,I,Y,ne,Se,Be,j,y);return;case"select":_e=I=Y=Ee=null;for(j in i)if(ne=i[j],i.hasOwnProperty(j)&&ne!=null)switch(j){case"value":break;case"multiple":_e=ne;default:h.hasOwnProperty(j)||na(t,r,j,null,h,ne)}for(y in h)if(j=h[y],ne=i[y],h.hasOwnProperty(y)&&(j!=null||ne!=null))switch(y){case"value":Ee=j;break;case"defaultValue":Y=j;break;case"multiple":I=j;default:j!==ne&&na(t,r,y,j,h,ne)}r=Y,i=I,h=_e,Ee!=null?J(t,!!i,Ee,!1):!!h!=!!i&&(r!=null?J(t,!!i,r,!0):J(t,!!i,i?[]:"",!1));return;case"textarea":_e=Ee=null;for(Y in i)if(y=i[Y],i.hasOwnProperty(Y)&&y!=null&&!h.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:na(t,r,Y,null,h,y)}for(I in h)if(y=h[I],j=i[I],h.hasOwnProperty(I)&&(y!=null||j!=null))switch(I){case"value":Ee=y;break;case"defaultValue":_e=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(f(91));break;default:y!==j&&na(t,r,I,y,h,j)}it(t,Ee,_e);return;case"option":for(var yt in i)if(Ee=i[yt],i.hasOwnProperty(yt)&&Ee!=null&&!h.hasOwnProperty(yt))switch(yt){case"selected":t.selected=!1;break;default:na(t,r,yt,null,h,Ee)}for(ne in h)if(Ee=h[ne],_e=i[ne],h.hasOwnProperty(ne)&&Ee!==_e&&(Ee!=null||_e!=null))switch(ne){case"selected":t.selected=Ee&&typeof Ee!="function"&&typeof Ee!="symbol";break;default:na(t,r,ne,Ee,h,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var gt in i)Ee=i[gt],i.hasOwnProperty(gt)&&Ee!=null&&!h.hasOwnProperty(gt)&&na(t,r,gt,null,h,Ee);for(Se in h)if(Ee=h[Se],_e=i[Se],h.hasOwnProperty(Se)&&Ee!==_e&&(Ee!=null||_e!=null))switch(Se){case"children":case"dangerouslySetInnerHTML":if(Ee!=null)throw Error(f(137,r));break;default:na(t,r,Se,Ee,h,_e)}return;default:if(ot(r)){for(var la in i)Ee=i[la],i.hasOwnProperty(la)&&Ee!==void 0&&!h.hasOwnProperty(la)&&u0(t,r,la,void 0,h,Ee);for(Be in h)Ee=h[Be],_e=i[Be],!h.hasOwnProperty(Be)||Ee===_e||Ee===void 0&&_e===void 0||u0(t,r,Be,Ee,h,_e);return}}for(var me in i)Ee=i[me],i.hasOwnProperty(me)&&Ee!=null&&!h.hasOwnProperty(me)&&na(t,r,me,null,h,Ee);for(Pe in h)Ee=h[Pe],_e=i[Pe],!h.hasOwnProperty(Pe)||Ee===_e||Ee==null&&_e==null||na(t,r,Pe,Ee,h,_e)}var f0=null,h0=null;function Hc(t){return t.nodeType===9?t:t.ownerDocument}function cg(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function dg(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function x0(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var g0=null;function fy(){var t=window.event;return t&&t.type==="popstate"?t===g0?!1:(g0=t,!0):(g0=null,!1)}var ug=typeof setTimeout=="function"?setTimeout:void 0,hy=typeof clearTimeout=="function"?clearTimeout:void 0,fg=typeof Promise=="function"?Promise:void 0,xy=typeof queueMicrotask=="function"?queueMicrotask:typeof fg<"u"?function(t){return fg.resolve(null).then(t).catch(gy)}:ug;function gy(t){setTimeout(function(){throw t})}function Hn(t){return t==="head"}function hg(t,r){var i=r,h=0,y=0;do{var j=i.nextSibling;if(t.removeChild(i),j&&j.nodeType===8)if(i=j.data,i==="/$"){if(0<h&&8>h){i=h;var I=t.ownerDocument;if(i&1&&uo(I.documentElement),i&2&&uo(I.body),i&4)for(i=I.head,uo(i),I=i.firstChild;I;){var Y=I.nextSibling,ne=I.nodeName;I[qr]||ne==="SCRIPT"||ne==="STYLE"||ne==="LINK"&&I.rel.toLowerCase()==="stylesheet"||i.removeChild(I),I=Y}}if(y===0){t.removeChild(j),bo(r);return}y--}else i==="$"||i==="$?"||i==="$!"?y++:h=i.charCodeAt(0)-48;else h=0;i=j}while(i);bo(r)}function m0(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var i=r;switch(r=r.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":m0(i),el(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function my(t,r,i,h){for(;t.nodeType===1;){var y=i;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!h&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(h){if(!t[qr])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(j=t.getAttribute("rel"),j==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(j!==y.rel||t.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||t.getAttribute("title")!==(y.title==null?null:y.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(j=t.getAttribute("src"),(j!==(y.src==null?null:y.src)||t.getAttribute("type")!==(y.type==null?null:y.type)||t.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&j&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var j=y.name==null?null:""+y.name;if(y.type==="hidden"&&t.getAttribute("name")===j)return t}else return t;if(t=ls(t.nextSibling),t===null)break}return null}function py(t,r,i){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=ls(t.nextSibling),t===null))return null;return t}function p0(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function yy(t,r){var i=t.ownerDocument;if(t.data!=="$?"||i.readyState==="complete")r();else{var h=function(){r(),i.removeEventListener("DOMContentLoaded",h)};i.addEventListener("DOMContentLoaded",h),t._reactRetry=h}}function ls(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var y0=null;function xg(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(r===0)return t;r--}else i==="/$"&&r++}t=t.previousSibling}return null}function gg(t,r,i){switch(r=Hc(i),t){case"html":if(t=r.documentElement,!t)throw Error(f(452));return t;case"head":if(t=r.head,!t)throw Error(f(453));return t;case"body":if(t=r.body,!t)throw Error(f(454));return t;default:throw Error(f(451))}}function uo(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);el(t)}var Jr=new Map,mg=new Set;function Vc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var dn=ee.d;ee.d={f:by,r:wy,D:vy,C:Ny,L:jy,m:Cy,X:Ay,S:ky,M:Sy};function by(){var t=dn.f(),r=Ic();return t||r}function wy(t){var r=Rr(t);r!==null&&r.tag===5&&r.type==="form"?Bh(r):dn.r(t)}var xi=typeof document>"u"?null:document;function pg(t,r,i){var h=xi;if(h&&typeof r=="string"&&r){var y=Ha(r);y='link[rel="'+t+'"][href="'+y+'"]',typeof i=="string"&&(y+='[crossorigin="'+i+'"]'),mg.has(y)||(mg.add(y),t={rel:t,crossOrigin:i,href:r},h.querySelector(y)===null&&(r=h.createElement("link"),sr(r,"link",t),Wt(r),h.head.appendChild(r)))}}function vy(t){dn.D(t),pg("dns-prefetch",t,null)}function Ny(t,r){dn.C(t,r),pg("preconnect",t,r)}function jy(t,r,i){dn.L(t,r,i);var h=xi;if(h&&t&&r){var y='link[rel="preload"][as="'+Ha(r)+'"]';r==="image"&&i&&i.imageSrcSet?(y+='[imagesrcset="'+Ha(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(y+='[imagesizes="'+Ha(i.imageSizes)+'"]')):y+='[href="'+Ha(t)+'"]';var j=y;switch(r){case"style":j=gi(t);break;case"script":j=mi(t)}Jr.has(j)||(t=S({rel:"preload",href:r==="image"&&i&&i.imageSrcSet?void 0:t,as:r},i),Jr.set(j,t),h.querySelector(y)!==null||r==="style"&&h.querySelector(fo(j))||r==="script"&&h.querySelector(ho(j))||(r=h.createElement("link"),sr(r,"link",t),Wt(r),h.head.appendChild(r)))}}function Cy(t,r){dn.m(t,r);var i=xi;if(i&&t){var h=r&&typeof r.as=="string"?r.as:"script",y='link[rel="modulepreload"][as="'+Ha(h)+'"][href="'+Ha(t)+'"]',j=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=mi(t)}if(!Jr.has(j)&&(t=S({rel:"modulepreload",href:t},r),Jr.set(j,t),i.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(ho(j)))return}h=i.createElement("link"),sr(h,"link",t),Wt(h),i.head.appendChild(h)}}}function ky(t,r,i){dn.S(t,r,i);var h=xi;if(h&&t){var y=es(h).hoistableStyles,j=gi(t);r=r||"default";var I=y.get(j);if(!I){var Y={loading:0,preload:null};if(I=h.querySelector(fo(j)))Y.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":r},i),(i=Jr.get(j))&&b0(t,i);var ne=I=h.createElement("link");Wt(ne),sr(ne,"link",t),ne._p=new Promise(function(Se,Be){ne.onload=Se,ne.onerror=Be}),ne.addEventListener("load",function(){Y.loading|=1}),ne.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,Gc(I,r,h)}I={type:"stylesheet",instance:I,count:1,state:Y},y.set(j,I)}}}function Ay(t,r){dn.X(t,r);var i=xi;if(i&&t){var h=es(i).hoistableScripts,y=mi(t),j=h.get(y);j||(j=i.querySelector(ho(y)),j||(t=S({src:t,async:!0},r),(r=Jr.get(y))&&w0(t,r),j=i.createElement("script"),Wt(j),sr(j,"link",t),i.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},h.set(y,j))}}function Sy(t,r){dn.M(t,r);var i=xi;if(i&&t){var h=es(i).hoistableScripts,y=mi(t),j=h.get(y);j||(j=i.querySelector(ho(y)),j||(t=S({src:t,async:!0,type:"module"},r),(r=Jr.get(y))&&w0(t,r),j=i.createElement("script"),Wt(j),sr(j,"link",t),i.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},h.set(y,j))}}function yg(t,r,i,h){var y=(y=ie.current)?Vc(y):null;if(!y)throw Error(f(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(r=gi(i.href),i=es(y).hoistableStyles,h=i.get(r),h||(h={type:"style",instance:null,count:0,state:null},i.set(r,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=gi(i.href);var j=es(y).hoistableStyles,I=j.get(t);if(I||(y=y.ownerDocument||y,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(t,I),(j=y.querySelector(fo(t)))&&!j._p&&(I.instance=j,I.state.loading=5),Jr.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},Jr.set(t,i),j||Ey(y,t,i,I.state))),r&&h===null)throw Error(f(528,""));return I}if(r&&h!==null)throw Error(f(529,""));return null;case"script":return r=i.async,i=i.src,typeof i=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=mi(i),i=es(y).hoistableScripts,h=i.get(r),h||(h={type:"script",instance:null,count:0,state:null},i.set(r,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(f(444,t))}}function gi(t){return'href="'+Ha(t)+'"'}function fo(t){return'link[rel="stylesheet"]['+t+"]"}function bg(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function Ey(t,r,i,h){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?h.loading=1:(r=t.createElement("link"),h.preload=r,r.addEventListener("load",function(){return h.loading|=1}),r.addEventListener("error",function(){return h.loading|=2}),sr(r,"link",i),Wt(r),t.head.appendChild(r))}function mi(t){return'[src="'+Ha(t)+'"]'}function ho(t){return"script[async]"+t}function wg(t,r,i){if(r.count++,r.instance===null)switch(r.type){case"style":var h=t.querySelector('style[data-href~="'+Ha(i.href)+'"]');if(h)return r.instance=h,Wt(h),h;var y=S({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return h=(t.ownerDocument||t).createElement("style"),Wt(h),sr(h,"style",y),Gc(h,i.precedence,t),r.instance=h;case"stylesheet":y=gi(i.href);var j=t.querySelector(fo(y));if(j)return r.state.loading|=4,r.instance=j,Wt(j),j;h=bg(i),(y=Jr.get(y))&&b0(h,y),j=(t.ownerDocument||t).createElement("link"),Wt(j);var I=j;return I._p=new Promise(function(Y,ne){I.onload=Y,I.onerror=ne}),sr(j,"link",h),r.state.loading|=4,Gc(j,i.precedence,t),r.instance=j;case"script":return j=mi(i.src),(y=t.querySelector(ho(j)))?(r.instance=y,Wt(y),y):(h=i,(y=Jr.get(j))&&(h=S({},i),w0(h,y)),t=t.ownerDocument||t,y=t.createElement("script"),Wt(y),sr(y,"link",h),t.head.appendChild(y),r.instance=y);case"void":return null;default:throw Error(f(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(h=r.instance,r.state.loading|=4,Gc(h,i.precedence,t));return r.instance}function Gc(t,r,i){for(var h=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,j=y,I=0;I<h.length;I++){var Y=h[I];if(Y.dataset.precedence===r)j=Y;else if(j!==y)break}j?j.parentNode.insertBefore(t,j.nextSibling):(r=i.nodeType===9?i.head:i,r.insertBefore(t,r.firstChild))}function b0(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function w0(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var qc=null;function vg(t,r,i){if(qc===null){var h=new Map,y=qc=new Map;y.set(i,h)}else y=qc,h=y.get(i),h||(h=new Map,y.set(i,h));if(h.has(t))return h;for(h.set(t,null),i=i.getElementsByTagName(t),y=0;y<i.length;y++){var j=i[y];if(!(j[qr]||j[Qa]||t==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var I=j.getAttribute(r)||"";I=t+I;var Y=h.get(I);Y?Y.push(j):h.set(I,[j])}}return h}function Ng(t,r,i){t=t.ownerDocument||t,t.head.insertBefore(i,r==="title"?t.querySelector("head > title"):null)}function Ty(t,r,i){if(i===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function jg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var xo=null;function _y(){}function My(t,r,i){if(xo===null)throw Error(f(475));var h=xo;if(r.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var y=gi(i.href),j=t.querySelector(fo(y));if(j){t=j._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(h.count++,h=Yc.bind(h),t.then(h,h)),r.state.loading|=4,r.instance=j,Wt(j);return}j=t.ownerDocument||t,i=bg(i),(y=Jr.get(y))&&b0(i,y),j=j.createElement("link"),Wt(j);var I=j;I._p=new Promise(function(Y,ne){I.onload=Y,I.onerror=ne}),sr(j,"link",i),r.instance=j}h.stylesheets===null&&(h.stylesheets=new Map),h.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(h.count++,r=Yc.bind(h),t.addEventListener("load",r),t.addEventListener("error",r))}}function Dy(){if(xo===null)throw Error(f(475));var t=xo;return t.stylesheets&&t.count===0&&v0(t,t.stylesheets),0<t.count?function(r){var i=setTimeout(function(){if(t.stylesheets&&v0(t,t.stylesheets),t.unsuspend){var h=t.unsuspend;t.unsuspend=null,h()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(i)}}:null}function Yc(){if(this.count--,this.count===0){if(this.stylesheets)v0(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Xc=null;function v0(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Xc=new Map,r.forEach(Ry,t),Xc=null,Yc.call(t))}function Ry(t,r){if(!(r.state.loading&4)){var i=Xc.get(t);if(i)var h=i.get(null);else{i=new Map,Xc.set(t,i);for(var y=t.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<y.length;j++){var I=y[j];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(i.set(I.dataset.precedence,I),h=I)}h&&i.set(null,h)}y=r.instance,I=y.getAttribute("data-precedence"),j=i.get(I)||h,j===h&&i.set(null,y),i.set(I,y),this.count++,h=Yc.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),j?j.parentNode.insertBefore(y,j.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(y,t.firstChild)),r.state.loading|=4}}var go={$$typeof:F,Provider:null,Consumer:null,_currentValue:oe,_currentValue2:oe,_threadCount:0};function Iy(t,r,i,h,y,j,I,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Lt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lt(0),this.hiddenUpdates=Lt(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=j,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Cg(t,r,i,h,y,j,I,Y,ne,Se,Be,Pe){return t=new Iy(t,r,i,I,Y,ne,Se,Pe),r=1,j===!0&&(r|=24),j=Br(3,null,null,r),t.current=j,j.stateNode=t,r=au(),r.refCount++,t.pooledCache=r,r.refCount++,j.memoizedState={element:h,isDehydrated:i,cache:r},lu(j),t}function kg(t){return t?(t=Xl,t):Xl}function Ag(t,r,i,h,y,j){y=kg(y),h.context===null?h.context=y:h.pendingContext=y,h=Tn(r),h.payload={element:i},j=j===void 0?null:j,j!==null&&(h.callback=j),i=_n(t,h,r),i!==null&&(Ur(i,t,r),Gi(i,t,r))}function Sg(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function N0(t,r){Sg(t,r),(t=t.alternate)&&Sg(t,r)}function Eg(t){if(t.tag===13){var r=Yl(t,67108864);r!==null&&Ur(r,t,67108864),N0(t,67108864)}}var Zc=!0;function Oy(t,r,i,h){var y=H.T;H.T=null;var j=ee.p;try{ee.p=2,j0(t,r,i,h)}finally{ee.p=j,H.T=y}}function By(t,r,i,h){var y=H.T;H.T=null;var j=ee.p;try{ee.p=8,j0(t,r,i,h)}finally{ee.p=j,H.T=y}}function j0(t,r,i,h){if(Zc){var y=C0(h);if(y===null)d0(t,r,h,Qc,i),_g(t,h);else if(Fy(y,t,r,i,h))h.stopPropagation();else if(_g(t,h),r&4&&-1<Ly.indexOf(t)){for(;y!==null;){var j=Rr(y);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var I=$t(j.pendingLanes);if(I!==0){var Y=j;for(Y.pendingLanes|=2,Y.entangledLanes|=2;I;){var ne=1<<31-pt(I);Y.entanglements[1]|=ne,I&=~ne}Is(j),(ea&6)===0&&(Dc=Xe()+500,io(0))}}break;case 13:Y=Yl(j,2),Y!==null&&Ur(Y,j,2),Ic(),N0(j,2)}if(j=C0(h),j===null&&d0(t,r,h,Qc,i),j===y)break;y=j}y!==null&&h.stopPropagation()}else d0(t,r,h,null,i)}}function C0(t){return t=mn(t),k0(t)}var Qc=null;function k0(t){if(Qc=null,t=_a(t),t!==null){var r=m(t);if(r===null)t=null;else{var i=r.tag;if(i===13){if(t=w(r),t!==null)return t;t=null}else if(i===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Qc=t,null}function Tg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case Me:return 2;case ae:return 8;case je:case We:return 32;case xt:return 268435456;default:return 32}default:return 32}}var A0=!1,Vn=null,Gn=null,qn=null,mo=new Map,po=new Map,Yn=[],Ly="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _g(t,r){switch(t){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":mo.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":po.delete(r.pointerId)}}function yo(t,r,i,h,y,j){return t===null||t.nativeEvent!==j?(t={blockedOn:r,domEventName:i,eventSystemFlags:h,nativeEvent:j,targetContainers:[y]},r!==null&&(r=Rr(r),r!==null&&Eg(r)),t):(t.eventSystemFlags|=h,r=t.targetContainers,y!==null&&r.indexOf(y)===-1&&r.push(y),t)}function Fy(t,r,i,h,y){switch(r){case"focusin":return Vn=yo(Vn,t,r,i,h,y),!0;case"dragenter":return Gn=yo(Gn,t,r,i,h,y),!0;case"mouseover":return qn=yo(qn,t,r,i,h,y),!0;case"pointerover":var j=y.pointerId;return mo.set(j,yo(mo.get(j)||null,t,r,i,h,y)),!0;case"gotpointercapture":return j=y.pointerId,po.set(j,yo(po.get(j)||null,t,r,i,h,y)),!0}return!1}function Mg(t){var r=_a(t.target);if(r!==null){var i=m(r);if(i!==null){if(r=i.tag,r===13){if(r=w(i),r!==null){t.blockedOn=r,Dl(t.priority,function(){if(i.tag===13){var h=zr();h=Jn(h);var y=Yl(i,h);y!==null&&Ur(y,i,h),N0(i,h)}});return}}else if(r===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $c(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var i=C0(t.nativeEvent);if(i===null){i=t.nativeEvent;var h=new i.constructor(i.type,i);tl=h,i.target.dispatchEvent(h),tl=null}else return r=Rr(i),r!==null&&Eg(r),t.blockedOn=i,!1;r.shift()}return!0}function Dg(t,r,i){$c(t)&&i.delete(r)}function Py(){A0=!1,Vn!==null&&$c(Vn)&&(Vn=null),Gn!==null&&$c(Gn)&&(Gn=null),qn!==null&&$c(qn)&&(qn=null),mo.forEach(Dg),po.forEach(Dg)}function Wc(t,r){t.blockedOn===r&&(t.blockedOn=null,A0||(A0=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Py)))}var Kc=null;function Rg(t){Kc!==t&&(Kc=t,l.unstable_scheduleCallback(l.unstable_NormalPriority,function(){Kc===t&&(Kc=null);for(var r=0;r<t.length;r+=3){var i=t[r],h=t[r+1],y=t[r+2];if(typeof h!="function"){if(k0(h||i)===null)continue;break}var j=Rr(i);j!==null&&(t.splice(r,3),r-=3,ku(j,{pending:!0,data:y,method:i.method,action:h},h,y))}}))}function bo(t){function r(ne){return Wc(ne,t)}Vn!==null&&Wc(Vn,t),Gn!==null&&Wc(Gn,t),qn!==null&&Wc(qn,t),mo.forEach(r),po.forEach(r);for(var i=0;i<Yn.length;i++){var h=Yn[i];h.blockedOn===t&&(h.blockedOn=null)}for(;0<Yn.length&&(i=Yn[0],i.blockedOn===null);)Mg(i),i.blockedOn===null&&Yn.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(h=0;h<i.length;h+=3){var y=i[h],j=i[h+1],I=y[ja]||null;if(typeof j=="function")I||Rg(i);else if(I){var Y=null;if(j&&j.hasAttribute("formAction")){if(y=j,I=j[ja]||null)Y=I.formAction;else if(k0(y)!==null)continue}else Y=I.action;typeof Y=="function"?i[h+1]=Y:(i.splice(h,3),h-=3),Rg(i)}}}function S0(t){this._internalRoot=t}Jc.prototype.render=S0.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(f(409));var i=r.current,h=zr();Ag(i,h,t,r,null,null)},Jc.prototype.unmount=S0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ag(t.current,2,null,t,null,null),Ic(),r[ps]=null}};function Jc(t){this._internalRoot=t}Jc.prototype.unstable_scheduleHydration=function(t){if(t){var r=Gs();t={blockedOn:null,target:t,priority:r};for(var i=0;i<Yn.length&&r!==0&&r<Yn[i].priority;i++);Yn.splice(i,0,t),i===0&&Mg(t)}};var Ig=c.version;if(Ig!=="19.1.1")throw Error(f(527,Ig,"19.1.1"));ee.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(f(188)):(t=Object.keys(t).join(","),Error(f(268,t)));return t=C(r),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var zy={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Re=ed.inject(zy),et=ed}catch{}}return vo.createRoot=function(t,r){if(!g(t))throw Error(f(299));var i=!1,h="",y=$h,j=Wh,I=Kh,Y=null;return r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(h=r.identifierPrefix),r.onUncaughtError!==void 0&&(y=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(I=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(Y=r.unstable_transitionCallbacks)),r=Cg(t,1,!1,null,null,i,h,y,j,I,Y,null),t[ps]=r.current,c0(t),new S0(r)},vo.hydrateRoot=function(t,r,i){if(!g(t))throw Error(f(299));var h=!1,y="",j=$h,I=Wh,Y=Kh,ne=null,Se=null;return i!=null&&(i.unstable_strictMode===!0&&(h=!0),i.identifierPrefix!==void 0&&(y=i.identifierPrefix),i.onUncaughtError!==void 0&&(j=i.onUncaughtError),i.onCaughtError!==void 0&&(I=i.onCaughtError),i.onRecoverableError!==void 0&&(Y=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(ne=i.unstable_transitionCallbacks),i.formState!==void 0&&(Se=i.formState)),r=Cg(t,1,!0,r,i??null,h,y,j,I,Y,ne,Se),r.context=kg(null),i=r.current,h=zr(),h=Jn(h),y=Tn(h),y.callback=null,_n(i,y,h),i=h,r.current.lanes=i,Dr(r,i),Is(r),t[ps]=r.current,c0(t),new Jc(r)},vo.version="19.1.1",vo}var Gg;function Wy(){if(Gg)return _0.exports;Gg=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(c){console.error(c)}}return l(),_0.exports=$y(),_0.exports}var Ky=Wy();const Jy=md(Ky);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qg="popstate";function eb(l={}){function c(f,g){let{pathname:m,search:w,hash:N}=f.location;return cf("",{pathname:m,search:w,hash:N},g.state&&g.state.usr||null,g.state&&g.state.key||"default")}function d(f,g){return typeof g=="string"?g:Ao(g)}return ab(c,d,null,l)}function va(l,c){if(l===!1||l===null||typeof l>"u")throw new Error(c)}function cs(l,c){if(!l){typeof console<"u"&&console.warn(c);try{throw new Error(c)}catch{}}}function tb(){return Math.random().toString(36).substring(2,10)}function Yg(l,c){return{usr:l.state,key:l.key,idx:c}}function cf(l,c,d=null,f){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof c=="string"?vi(c):c,state:d,key:c&&c.key||f||tb()}}function Ao({pathname:l="/",search:c="",hash:d=""}){return c&&c!=="?"&&(l+=c.charAt(0)==="?"?c:"?"+c),d&&d!=="#"&&(l+=d.charAt(0)==="#"?d:"#"+d),l}function vi(l){let c={};if(l){let d=l.indexOf("#");d>=0&&(c.hash=l.substring(d),l=l.substring(0,d));let f=l.indexOf("?");f>=0&&(c.search=l.substring(f),l=l.substring(0,f)),l&&(c.pathname=l)}return c}function ab(l,c,d,f={}){let{window:g=document.defaultView,v5Compat:m=!1}=f,w=g.history,N="POP",C=null,b=S();b==null&&(b=0,w.replaceState({...w.state,idx:b},""));function S(){return(w.state||{idx:null}).idx}function E(){N="POP";let G=S(),R=G==null?null:G-b;b=G,C&&C({action:N,location:_.location,delta:R})}function M(G,R){N="PUSH";let z=cf(_.location,G,R);b=S()+1;let F=Yg(z,b),V=_.createHref(z);try{w.pushState(F,"",V)}catch(Q){if(Q instanceof DOMException&&Q.name==="DataCloneError")throw Q;g.location.assign(V)}m&&C&&C({action:N,location:_.location,delta:1})}function D(G,R){N="REPLACE";let z=cf(_.location,G,R);b=S();let F=Yg(z,b),V=_.createHref(z);w.replaceState(F,"",V),m&&C&&C({action:N,location:_.location,delta:0})}function B(G){return rb(G)}let _={get action(){return N},get location(){return l(g,w)},listen(G){if(C)throw new Error("A history only accepts one active listener");return g.addEventListener(qg,E),C=G,()=>{g.removeEventListener(qg,E),C=null}},createHref(G){return c(g,G)},createURL:B,encodeLocation(G){let R=B(G);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:M,replace:D,go(G){return w.go(G)}};return _}function rb(l,c=!1){let d="http://localhost";typeof window<"u"&&(d=window.location.origin!=="null"?window.location.origin:window.location.href),va(d,"No window.location.(origin|href) available to create URL");let f=typeof l=="string"?l:Ao(l);return f=f.replace(/ $/,"%20"),!c&&f.startsWith("//")&&(f=d+f),new URL(f,d)}function l1(l,c,d="/"){return sb(l,c,d,!1)}function sb(l,c,d,f){let g=typeof c=="string"?vi(c):c,m=hn(g.pathname||"/",d);if(m==null)return null;let w=i1(l);nb(w);let N=null;for(let C=0;N==null&&C<w.length;++C){let b=mb(m);N=xb(w[C],b,f)}return N}function i1(l,c=[],d=[],f=""){let g=(m,w,N)=>{let C={relativePath:N===void 0?m.path||"":N,caseSensitive:m.caseSensitive===!0,childrenIndex:w,route:m};C.relativePath.startsWith("/")&&(va(C.relativePath.startsWith(f),`Absolute route path "${C.relativePath}" nested under path "${f}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),C.relativePath=C.relativePath.slice(f.length));let b=fn([f,C.relativePath]),S=d.concat(C);m.children&&m.children.length>0&&(va(m.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${b}".`),i1(m.children,c,S,b)),!(m.path==null&&!m.index)&&c.push({path:b,score:fb(b,m.index),routesMeta:S})};return l.forEach((m,w)=>{if(m.path===""||!m.path?.includes("?"))g(m,w);else for(let N of o1(m.path))g(m,w,N)}),c}function o1(l){let c=l.split("/");if(c.length===0)return[];let[d,...f]=c,g=d.endsWith("?"),m=d.replace(/\?$/,"");if(f.length===0)return g?[m,""]:[m];let w=o1(f.join("/")),N=[];return N.push(...w.map(C=>C===""?m:[m,C].join("/"))),g&&N.push(...w),N.map(C=>l.startsWith("/")&&C===""?"/":C)}function nb(l){l.sort((c,d)=>c.score!==d.score?d.score-c.score:hb(c.routesMeta.map(f=>f.childrenIndex),d.routesMeta.map(f=>f.childrenIndex)))}var lb=/^:[\w-]+$/,ib=3,ob=2,cb=1,db=10,ub=-2,Xg=l=>l==="*";function fb(l,c){let d=l.split("/"),f=d.length;return d.some(Xg)&&(f+=ub),c&&(f+=ob),d.filter(g=>!Xg(g)).reduce((g,m)=>g+(lb.test(m)?ib:m===""?cb:db),f)}function hb(l,c){return l.length===c.length&&l.slice(0,-1).every((f,g)=>f===c[g])?l[l.length-1]-c[c.length-1]:0}function xb(l,c,d=!1){let{routesMeta:f}=l,g={},m="/",w=[];for(let N=0;N<f.length;++N){let C=f[N],b=N===f.length-1,S=m==="/"?c:c.slice(m.length)||"/",E=dd({path:C.relativePath,caseSensitive:C.caseSensitive,end:b},S),M=C.route;if(!E&&b&&d&&!f[f.length-1].route.index&&(E=dd({path:C.relativePath,caseSensitive:C.caseSensitive,end:!1},S)),!E)return null;Object.assign(g,E.params),w.push({params:g,pathname:fn([m,E.pathname]),pathnameBase:wb(fn([m,E.pathnameBase])),route:M}),E.pathnameBase!=="/"&&(m=fn([m,E.pathnameBase]))}return w}function dd(l,c){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[d,f]=gb(l.path,l.caseSensitive,l.end),g=c.match(d);if(!g)return null;let m=g[0],w=m.replace(/(.)\/+$/,"$1"),N=g.slice(1);return{params:f.reduce((b,{paramName:S,isOptional:E},M)=>{if(S==="*"){let B=N[M]||"";w=m.slice(0,m.length-B.length).replace(/(.)\/+$/,"$1")}const D=N[M];return E&&!D?b[S]=void 0:b[S]=(D||"").replace(/%2F/g,"/"),b},{}),pathname:m,pathnameBase:w,pattern:l}}function gb(l,c=!1,d=!0){cs(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let f=[],g="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(w,N,C)=>(f.push({paramName:N,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return l.endsWith("*")?(f.push({paramName:"*"}),g+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):d?g+="\\/*$":l!==""&&l!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,c?void 0:"i"),f]}function mb(l){try{return l.split("/").map(c=>decodeURIComponent(c).replace(/\//g,"%2F")).join("/")}catch(c){return cs(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${c}).`),l}}function hn(l,c){if(c==="/")return l;if(!l.toLowerCase().startsWith(c.toLowerCase()))return null;let d=c.endsWith("/")?c.length-1:c.length,f=l.charAt(d);return f&&f!=="/"?null:l.slice(d)||"/"}function pb(l,c="/"){let{pathname:d,search:f="",hash:g=""}=typeof l=="string"?vi(l):l;return{pathname:d?d.startsWith("/")?d:yb(d,c):c,search:vb(f),hash:Nb(g)}}function yb(l,c){let d=c.replace(/\/+$/,"").split("/");return l.split("/").forEach(g=>{g===".."?d.length>1&&d.pop():g!=="."&&d.push(g)}),d.length>1?d.join("/"):"/"}function I0(l,c,d,f){return`Cannot include a '${l}' character in a manually specified \`to.${c}\` field [${JSON.stringify(f)}].  Please separate it out to the \`to.${d}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bb(l){return l.filter((c,d)=>d===0||c.route.path&&c.route.path.length>0)}function c1(l){let c=bb(l);return c.map((d,f)=>f===c.length-1?d.pathname:d.pathnameBase)}function d1(l,c,d,f=!1){let g;typeof l=="string"?g=vi(l):(g={...l},va(!g.pathname||!g.pathname.includes("?"),I0("?","pathname","search",g)),va(!g.pathname||!g.pathname.includes("#"),I0("#","pathname","hash",g)),va(!g.search||!g.search.includes("#"),I0("#","search","hash",g)));let m=l===""||g.pathname==="",w=m?"/":g.pathname,N;if(w==null)N=d;else{let E=c.length-1;if(!f&&w.startsWith("..")){let M=w.split("/");for(;M[0]==="..";)M.shift(),E-=1;g.pathname=M.join("/")}N=E>=0?c[E]:"/"}let C=pb(g,N),b=w&&w!=="/"&&w.endsWith("/"),S=(m||w===".")&&d.endsWith("/");return!C.pathname.endsWith("/")&&(b||S)&&(C.pathname+="/"),C}var fn=l=>l.join("/").replace(/\/\/+/g,"/"),wb=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),vb=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Nb=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function jb(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}var u1=["POST","PUT","PATCH","DELETE"];new Set(u1);var Cb=["GET",...u1];new Set(Cb);var Ni=k.createContext(null);Ni.displayName="DataRouter";var pd=k.createContext(null);pd.displayName="DataRouterState";k.createContext(!1);var f1=k.createContext({isTransitioning:!1});f1.displayName="ViewTransition";var kb=k.createContext(new Map);kb.displayName="Fetchers";var Ab=k.createContext(null);Ab.displayName="Await";var Us=k.createContext(null);Us.displayName="Navigation";var Io=k.createContext(null);Io.displayName="Location";var Hs=k.createContext({outlet:null,matches:[],isDataRoute:!1});Hs.displayName="Route";var Ef=k.createContext(null);Ef.displayName="RouteError";function Sb(l,{relative:c}={}){va(Oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:d,navigator:f}=k.useContext(Us),{hash:g,pathname:m,search:w}=Bo(l,{relative:c}),N=m;return d!=="/"&&(N=m==="/"?d:fn([d,m])),f.createHref({pathname:N,search:w,hash:g})}function Oo(){return k.useContext(Io)!=null}function Vs(){return va(Oo(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Io).location}var h1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function x1(l){k.useContext(Us).static||k.useLayoutEffect(l)}function ia(){let{isDataRoute:l}=k.useContext(Hs);return l?zb():Eb()}function Eb(){va(Oo(),"useNavigate() may be used only in the context of a <Router> component.");let l=k.useContext(Ni),{basename:c,navigator:d}=k.useContext(Us),{matches:f}=k.useContext(Hs),{pathname:g}=Vs(),m=JSON.stringify(c1(f)),w=k.useRef(!1);return x1(()=>{w.current=!0}),k.useCallback((C,b={})=>{if(cs(w.current,h1),!w.current)return;if(typeof C=="number"){d.go(C);return}let S=d1(C,JSON.parse(m),g,b.relative==="path");l==null&&c!=="/"&&(S.pathname=S.pathname==="/"?c:fn([c,S.pathname])),(b.replace?d.replace:d.push)(S,b.state,b)},[c,d,m,g,l])}k.createContext(null);function xs(){let{matches:l}=k.useContext(Hs),c=l[l.length-1];return c?c.params:{}}function Bo(l,{relative:c}={}){let{matches:d}=k.useContext(Hs),{pathname:f}=Vs(),g=JSON.stringify(c1(d));return k.useMemo(()=>d1(l,JSON.parse(g),f,c==="path"),[l,g,f,c])}function Tb(l,c){return g1(l,c)}function g1(l,c,d,f){va(Oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:g}=k.useContext(Us),{matches:m}=k.useContext(Hs),w=m[m.length-1],N=w?w.params:{},C=w?w.pathname:"/",b=w?w.pathnameBase:"/",S=w&&w.route;{let R=S&&S.path||"";m1(C,!S||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${C}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let E=Vs(),M;if(c){let R=typeof c=="string"?vi(c):c;va(b==="/"||R.pathname?.startsWith(b),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${b}" but pathname "${R.pathname}" was given in the \`location\` prop.`),M=R}else M=E;let D=M.pathname||"/",B=D;if(b!=="/"){let R=b.replace(/^\//,"").split("/");B="/"+D.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=l1(l,{pathname:B});cs(S||_!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),cs(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let G=Ib(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},N,R.params),pathname:fn([b,g.encodeLocation?g.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?b:fn([b,g.encodeLocation?g.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),m,d,f);return c&&G?k.createElement(Io.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},G):G}function _b(){let l=Pb(),c=jb(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),d=l instanceof Error?l.stack:null,f="rgba(200,200,200, 0.5)",g={padding:"0.5rem",backgroundColor:f},m={padding:"2px 4px",backgroundColor:f},w=null;return console.error("Error handled by React Router default ErrorBoundary:",l),w=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:m},"ErrorBoundary")," or"," ",k.createElement("code",{style:m},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},c),d?k.createElement("pre",{style:g},d):null,w)}var Mb=k.createElement(_b,null),Db=class extends k.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,c){return c.location!==l.location||c.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:c.error,location:c.location,revalidation:l.revalidation||c.revalidation}}componentDidCatch(l,c){console.error("React Router caught the following error during render",l,c)}render(){return this.state.error!==void 0?k.createElement(Hs.Provider,{value:this.props.routeContext},k.createElement(Ef.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Rb({routeContext:l,match:c,children:d}){let f=k.useContext(Ni);return f&&f.static&&f.staticContext&&(c.route.errorElement||c.route.ErrorBoundary)&&(f.staticContext._deepestRenderedBoundaryId=c.route.id),k.createElement(Hs.Provider,{value:l},d)}function Ib(l,c=[],d=null,f=null){if(l==null){if(!d)return null;if(d.errors)l=d.matches;else if(c.length===0&&!d.initialized&&d.matches.length>0)l=d.matches;else return null}let g=l,m=d?.errors;if(m!=null){let C=g.findIndex(b=>b.route.id&&m?.[b.route.id]!==void 0);va(C>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(m).join(",")}`),g=g.slice(0,Math.min(g.length,C+1))}let w=!1,N=-1;if(d)for(let C=0;C<g.length;C++){let b=g[C];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(N=C),b.route.id){let{loaderData:S,errors:E}=d,M=b.route.loader&&!S.hasOwnProperty(b.route.id)&&(!E||E[b.route.id]===void 0);if(b.route.lazy||M){w=!0,N>=0?g=g.slice(0,N+1):g=[g[0]];break}}}return g.reduceRight((C,b,S)=>{let E,M=!1,D=null,B=null;d&&(E=m&&b.route.id?m[b.route.id]:void 0,D=b.route.errorElement||Mb,w&&(N<0&&S===0?(m1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),M=!0,B=null):N===S&&(M=!0,B=b.route.hydrateFallbackElement||null)));let _=c.concat(g.slice(0,S+1)),G=()=>{let R;return E?R=D:M?R=B:b.route.Component?R=k.createElement(b.route.Component,null):b.route.element?R=b.route.element:R=C,k.createElement(Rb,{match:b,routeContext:{outlet:C,matches:_,isDataRoute:d!=null},children:R})};return d&&(b.route.ErrorBoundary||b.route.errorElement||S===0)?k.createElement(Db,{location:d.location,revalidation:d.revalidation,component:D,error:E,children:G(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):G()},null)}function Tf(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ob(l){let c=k.useContext(Ni);return va(c,Tf(l)),c}function Bb(l){let c=k.useContext(pd);return va(c,Tf(l)),c}function Lb(l){let c=k.useContext(Hs);return va(c,Tf(l)),c}function _f(l){let c=Lb(l),d=c.matches[c.matches.length-1];return va(d.route.id,`${l} can only be used on routes that contain a unique "id"`),d.route.id}function Fb(){return _f("useRouteId")}function Pb(){let l=k.useContext(Ef),c=Bb("useRouteError"),d=_f("useRouteError");return l!==void 0?l:c.errors?.[d]}function zb(){let{router:l}=Ob("useNavigate"),c=_f("useNavigate"),d=k.useRef(!1);return x1(()=>{d.current=!0}),k.useCallback(async(g,m={})=>{cs(d.current,h1),d.current&&(typeof g=="number"?l.navigate(g):await l.navigate(g,{fromRouteId:c,...m}))},[l,c])}var Zg={};function m1(l,c,d){!c&&!Zg[l]&&(Zg[l]=!0,cs(!1,d))}k.memo(Ub);function Ub({routes:l,future:c,state:d}){return g1(l,void 0,d,c)}function zt(l){va(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Hb({basename:l="/",children:c=null,location:d,navigationType:f="POP",navigator:g,static:m=!1}){va(!Oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let w=l.replace(/^\/*/,"/"),N=k.useMemo(()=>({basename:w,navigator:g,static:m,future:{}}),[w,g,m]);typeof d=="string"&&(d=vi(d));let{pathname:C="/",search:b="",hash:S="",state:E=null,key:M="default"}=d,D=k.useMemo(()=>{let B=hn(C,w);return B==null?null:{location:{pathname:B,search:b,hash:S,state:E,key:M},navigationType:f}},[w,C,b,S,E,M,f]);return cs(D!=null,`<Router basename="${w}"> is not able to match the URL "${C}${b}${S}" because it does not start with the basename, so the <Router> won't render anything.`),D==null?null:k.createElement(Us.Provider,{value:N},k.createElement(Io.Provider,{children:c,value:D}))}function Vb({children:l,location:c}){return Tb(df(l),c)}function df(l,c=[]){let d=[];return k.Children.forEach(l,(f,g)=>{if(!k.isValidElement(f))return;let m=[...c,g];if(f.type===k.Fragment){d.push.apply(d,df(f.props.children,m));return}va(f.type===zt,`[${typeof f.type=="string"?f.type:f.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),va(!f.props.index||!f.props.children,"An index route cannot have child routes.");let w={id:f.props.id||m.join("-"),caseSensitive:f.props.caseSensitive,element:f.props.element,Component:f.props.Component,index:f.props.index,path:f.props.path,loader:f.props.loader,action:f.props.action,hydrateFallbackElement:f.props.hydrateFallbackElement,HydrateFallback:f.props.HydrateFallback,errorElement:f.props.errorElement,ErrorBoundary:f.props.ErrorBoundary,hasErrorBoundary:f.props.hasErrorBoundary===!0||f.props.ErrorBoundary!=null||f.props.errorElement!=null,shouldRevalidate:f.props.shouldRevalidate,handle:f.props.handle,lazy:f.props.lazy};f.props.children&&(w.children=df(f.props.children,m)),d.push(w)}),d}var sd="get",nd="application/x-www-form-urlencoded";function yd(l){return l!=null&&typeof l.tagName=="string"}function Gb(l){return yd(l)&&l.tagName.toLowerCase()==="button"}function qb(l){return yd(l)&&l.tagName.toLowerCase()==="form"}function Yb(l){return yd(l)&&l.tagName.toLowerCase()==="input"}function Xb(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function Zb(l,c){return l.button===0&&(!c||c==="_self")&&!Xb(l)}function uf(l=""){return new URLSearchParams(typeof l=="string"||Array.isArray(l)||l instanceof URLSearchParams?l:Object.keys(l).reduce((c,d)=>{let f=l[d];return c.concat(Array.isArray(f)?f.map(g=>[d,g]):[[d,f]])},[]))}function Qb(l,c){let d=uf(l);return c&&c.forEach((f,g)=>{d.has(g)||c.getAll(g).forEach(m=>{d.append(g,m)})}),d}var ad=null;function $b(){if(ad===null)try{new FormData(document.createElement("form"),0),ad=!1}catch{ad=!0}return ad}var Wb=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function O0(l){return l!=null&&!Wb.has(l)?(cs(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${nd}"`),null):l}function Kb(l,c){let d,f,g,m,w;if(qb(l)){let N=l.getAttribute("action");f=N?hn(N,c):null,d=l.getAttribute("method")||sd,g=O0(l.getAttribute("enctype"))||nd,m=new FormData(l)}else if(Gb(l)||Yb(l)&&(l.type==="submit"||l.type==="image")){let N=l.form;if(N==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let C=l.getAttribute("formaction")||N.getAttribute("action");if(f=C?hn(C,c):null,d=l.getAttribute("formmethod")||N.getAttribute("method")||sd,g=O0(l.getAttribute("formenctype"))||O0(N.getAttribute("enctype"))||nd,m=new FormData(N,l),!$b()){let{name:b,type:S,value:E}=l;if(S==="image"){let M=b?`${b}.`:"";m.append(`${M}x`,"0"),m.append(`${M}y`,"0")}else b&&m.append(b,E)}}else{if(yd(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');d=sd,f=null,g=nd,w=l}return m&&g==="text/plain"&&(w=m,m=void 0),{action:f,method:d.toLowerCase(),encType:g,formData:m,body:w}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Mf(l,c){if(l===!1||l===null||typeof l>"u")throw new Error(c)}function Jb(l,c,d){let f=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return f.pathname==="/"?f.pathname=`_root.${d}`:c&&hn(f.pathname,c)==="/"?f.pathname=`${c.replace(/\/$/,"")}/_root.${d}`:f.pathname=`${f.pathname.replace(/\/$/,"")}.${d}`,f}async function e2(l,c){if(l.id in c)return c[l.id];try{let d=await import(l.module);return c[l.id]=d,d}catch(d){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(d),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function t2(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function a2(l,c,d){let f=await Promise.all(l.map(async g=>{let m=c.routes[g.route.id];if(m){let w=await e2(m,d);return w.links?w.links():[]}return[]}));return l2(f.flat(1).filter(t2).filter(g=>g.rel==="stylesheet"||g.rel==="preload").map(g=>g.rel==="stylesheet"?{...g,rel:"prefetch",as:"style"}:{...g,rel:"prefetch"}))}function Qg(l,c,d,f,g,m){let w=(C,b)=>d[b]?C.route.id!==d[b].route.id:!0,N=(C,b)=>d[b].pathname!==C.pathname||d[b].route.path?.endsWith("*")&&d[b].params["*"]!==C.params["*"];return m==="assets"?c.filter((C,b)=>w(C,b)||N(C,b)):m==="data"?c.filter((C,b)=>{let S=f.routes[C.route.id];if(!S||!S.hasLoader)return!1;if(w(C,b)||N(C,b))return!0;if(C.route.shouldRevalidate){let E=C.route.shouldRevalidate({currentUrl:new URL(g.pathname+g.search+g.hash,window.origin),currentParams:d[0]?.params||{},nextUrl:new URL(l,window.origin),nextParams:C.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function r2(l,c,{includeHydrateFallback:d}={}){return s2(l.map(f=>{let g=c.routes[f.route.id];if(!g)return[];let m=[g.module];return g.clientActionModule&&(m=m.concat(g.clientActionModule)),g.clientLoaderModule&&(m=m.concat(g.clientLoaderModule)),d&&g.hydrateFallbackModule&&(m=m.concat(g.hydrateFallbackModule)),g.imports&&(m=m.concat(g.imports)),m}).flat(1))}function s2(l){return[...new Set(l)]}function n2(l){let c={},d=Object.keys(l).sort();for(let f of d)c[f]=l[f];return c}function l2(l,c){let d=new Set;return new Set(c),l.reduce((f,g)=>{let m=JSON.stringify(n2(g));return d.has(m)||(d.add(m),f.push({key:m,link:g})),f},[])}function p1(){let l=k.useContext(Ni);return Mf(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function i2(){let l=k.useContext(pd);return Mf(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Df=k.createContext(void 0);Df.displayName="FrameworkContext";function y1(){let l=k.useContext(Df);return Mf(l,"You must render this element inside a <HydratedRouter> element"),l}function o2(l,c){let d=k.useContext(Df),[f,g]=k.useState(!1),[m,w]=k.useState(!1),{onFocus:N,onBlur:C,onMouseEnter:b,onMouseLeave:S,onTouchStart:E}=c,M=k.useRef(null);k.useEffect(()=>{if(l==="render"&&w(!0),l==="viewport"){let _=R=>{R.forEach(z=>{w(z.isIntersecting)})},G=new IntersectionObserver(_,{threshold:.5});return M.current&&G.observe(M.current),()=>{G.disconnect()}}},[l]),k.useEffect(()=>{if(f){let _=setTimeout(()=>{w(!0)},100);return()=>{clearTimeout(_)}}},[f]);let D=()=>{g(!0)},B=()=>{g(!1),w(!1)};return d?l!=="intent"?[m,M,{}]:[m,M,{onFocus:No(N,D),onBlur:No(C,B),onMouseEnter:No(b,D),onMouseLeave:No(S,B),onTouchStart:No(E,D)}]:[!1,M,{}]}function No(l,c){return d=>{l&&l(d),d.defaultPrevented||c(d)}}function c2({page:l,...c}){let{router:d}=p1(),f=k.useMemo(()=>l1(d.routes,l,d.basename),[d.routes,l,d.basename]);return f?k.createElement(u2,{page:l,matches:f,...c}):null}function d2(l){let{manifest:c,routeModules:d}=y1(),[f,g]=k.useState([]);return k.useEffect(()=>{let m=!1;return a2(l,c,d).then(w=>{m||g(w)}),()=>{m=!0}},[l,c,d]),f}function u2({page:l,matches:c,...d}){let f=Vs(),{manifest:g,routeModules:m}=y1(),{basename:w}=p1(),{loaderData:N,matches:C}=i2(),b=k.useMemo(()=>Qg(l,c,C,g,f,"data"),[l,c,C,g,f]),S=k.useMemo(()=>Qg(l,c,C,g,f,"assets"),[l,c,C,g,f]),E=k.useMemo(()=>{if(l===f.pathname+f.search+f.hash)return[];let B=new Set,_=!1;if(c.forEach(R=>{let z=g.routes[R.route.id];!z||!z.hasLoader||(!b.some(F=>F.route.id===R.route.id)&&R.route.id in N&&m[R.route.id]?.shouldRevalidate||z.hasClientLoader?_=!0:B.add(R.route.id))}),B.size===0)return[];let G=Jb(l,w,"data");return _&&B.size>0&&G.searchParams.set("_routes",c.filter(R=>B.has(R.route.id)).map(R=>R.route.id).join(",")),[G.pathname+G.search]},[w,N,f,g,b,c,l,m]),M=k.useMemo(()=>r2(S,g),[S,g]),D=d2(S);return k.createElement(k.Fragment,null,E.map(B=>k.createElement("link",{key:B,rel:"prefetch",as:"fetch",href:B,...d})),M.map(B=>k.createElement("link",{key:B,rel:"modulepreload",href:B,...d})),D.map(({key:B,link:_})=>k.createElement("link",{key:B,nonce:d.nonce,..._})))}function f2(...l){return c=>{l.forEach(d=>{typeof d=="function"?d(c):d!=null&&(d.current=c)})}}var b1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{b1&&(window.__reactRouterVersion="7.8.0")}catch{}function h2({basename:l,children:c,window:d}){let f=k.useRef();f.current==null&&(f.current=eb({window:d,v5Compat:!0}));let g=f.current,[m,w]=k.useState({action:g.action,location:g.location}),N=k.useCallback(C=>{k.startTransition(()=>w(C))},[w]);return k.useLayoutEffect(()=>g.listen(N),[g,N]),k.createElement(Hb,{basename:l,children:c,location:m.location,navigationType:m.action,navigator:g})}var w1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yi=k.forwardRef(function({onClick:c,discover:d="render",prefetch:f="none",relative:g,reloadDocument:m,replace:w,state:N,target:C,to:b,preventScrollReset:S,viewTransition:E,...M},D){let{basename:B}=k.useContext(Us),_=typeof b=="string"&&w1.test(b),G,R=!1;if(typeof b=="string"&&_&&(G=b,b1))try{let Z=new URL(window.location.href),de=b.startsWith("//")?new URL(Z.protocol+b):new URL(b),he=hn(de.pathname,B);de.origin===Z.origin&&he!=null?b=he+de.search+de.hash:R=!0}catch{cs(!1,`<Link to="${b}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let z=Sb(b,{relative:g}),[F,V,Q]=o2(f,M),$=p2(b,{replace:w,state:N,target:C,preventScrollReset:S,relative:g,viewTransition:E});function P(Z){c&&c(Z),Z.defaultPrevented||$(Z)}let X=k.createElement("a",{...M,...Q,href:G||z,onClick:R||m?c:P,ref:f2(D,V),target:C,"data-discover":!_&&d==="render"?"true":void 0});return F&&!_?k.createElement(k.Fragment,null,X,k.createElement(c2,{page:z})):X});yi.displayName="Link";var x2=k.forwardRef(function({"aria-current":c="page",caseSensitive:d=!1,className:f="",end:g=!1,style:m,to:w,viewTransition:N,children:C,...b},S){let E=Bo(w,{relative:b.relative}),M=Vs(),D=k.useContext(pd),{navigator:B,basename:_}=k.useContext(Us),G=D!=null&&N2(E)&&N===!0,R=B.encodeLocation?B.encodeLocation(E).pathname:E.pathname,z=M.pathname,F=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;d||(z=z.toLowerCase(),F=F?F.toLowerCase():null,R=R.toLowerCase()),F&&_&&(F=hn(F,_)||F);const V=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let Q=z===R||!g&&z.startsWith(R)&&z.charAt(V)==="/",$=F!=null&&(F===R||!g&&F.startsWith(R)&&F.charAt(R.length)==="/"),P={isActive:Q,isPending:$,isTransitioning:G},X=Q?c:void 0,Z;typeof f=="function"?Z=f(P):Z=[f,Q?"active":null,$?"pending":null,G?"transitioning":null].filter(Boolean).join(" ");let de=typeof m=="function"?m(P):m;return k.createElement(yi,{...b,"aria-current":X,className:Z,ref:S,style:de,to:w,viewTransition:N},typeof C=="function"?C(P):C)});x2.displayName="NavLink";var g2=k.forwardRef(({discover:l="render",fetcherKey:c,navigate:d,reloadDocument:f,replace:g,state:m,method:w=sd,action:N,onSubmit:C,relative:b,preventScrollReset:S,viewTransition:E,...M},D)=>{let B=w2(),_=v2(N,{relative:b}),G=w.toLowerCase()==="get"?"get":"post",R=typeof N=="string"&&w1.test(N),z=F=>{if(C&&C(F),F.defaultPrevented)return;F.preventDefault();let V=F.nativeEvent.submitter,Q=V?.getAttribute("formmethod")||w;B(V||F.currentTarget,{fetcherKey:c,method:Q,navigate:d,replace:g,state:m,relative:b,preventScrollReset:S,viewTransition:E})};return k.createElement("form",{ref:D,method:G,action:_,onSubmit:f?C:z,...M,"data-discover":!R&&l==="render"?"true":void 0})});g2.displayName="Form";function m2(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v1(l){let c=k.useContext(Ni);return va(c,m2(l)),c}function p2(l,{target:c,replace:d,state:f,preventScrollReset:g,relative:m,viewTransition:w}={}){let N=ia(),C=Vs(),b=Bo(l,{relative:m});return k.useCallback(S=>{if(Zb(S,c)){S.preventDefault();let E=d!==void 0?d:Ao(C)===Ao(b);N(l,{replace:E,state:f,preventScrollReset:g,relative:m,viewTransition:w})}},[C,N,b,d,f,c,l,g,m,w])}function bd(l){cs(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let c=k.useRef(uf(l)),d=k.useRef(!1),f=Vs(),g=k.useMemo(()=>Qb(f.search,d.current?null:c.current),[f.search]),m=ia(),w=k.useCallback((N,C)=>{const b=uf(typeof N=="function"?N(new URLSearchParams(g)):N);d.current=!0,m("?"+b,C)},[m,g]);return[g,w]}var y2=0,b2=()=>`__${String(++y2)}__`;function w2(){let{router:l}=v1("useSubmit"),{basename:c}=k.useContext(Us),d=Fb();return k.useCallback(async(f,g={})=>{let{action:m,method:w,encType:N,formData:C,body:b}=Kb(f,c);if(g.navigate===!1){let S=g.fetcherKey||b2();await l.fetch(S,d,g.action||m,{preventScrollReset:g.preventScrollReset,formData:C,body:b,formMethod:g.method||w,formEncType:g.encType||N,flushSync:g.flushSync})}else await l.navigate(g.action||m,{preventScrollReset:g.preventScrollReset,formData:C,body:b,formMethod:g.method||w,formEncType:g.encType||N,replace:g.replace,state:g.state,fromRouteId:d,flushSync:g.flushSync,viewTransition:g.viewTransition})},[l,c,d])}function v2(l,{relative:c}={}){let{basename:d}=k.useContext(Us),f=k.useContext(Hs);va(f,"useFormAction must be used inside a RouteContext");let[g]=f.matches.slice(-1),m={...Bo(l||".",{relative:c})},w=Vs();if(l==null){m.search=w.search;let N=new URLSearchParams(m.search),C=N.getAll("index");if(C.some(S=>S==="")){N.delete("index"),C.filter(E=>E).forEach(E=>N.append("index",E));let S=N.toString();m.search=S?`?${S}`:""}}return(!l||l===".")&&g.route.index&&(m.search=m.search?m.search.replace(/^\?/,"?index&"):"?index"),d!=="/"&&(m.pathname=m.pathname==="/"?d:fn([d,m.pathname])),Ao(m)}function N2(l,{relative:c}={}){let d=k.useContext(f1);va(d!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:f}=v1("useViewTransitionState"),g=Bo(l,{relative:c});if(!d.isTransitioning)return!1;let m=hn(d.currentLocation.pathname,f)||d.currentLocation.pathname,w=hn(d.nextLocation.pathname,f)||d.nextLocation.pathname;return dd(g.pathname,w)!=null||dd(g.pathname,m)!=null}function j2(){const l=ia(),c=()=>{l("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsxs("div",{className:"absolute top-4 right-2 sm:right-6 flex gap-2 sm:gap-4 md:gap-6 mt-5",children:[e.jsx("button",{onClick:()=>l("/login"),className:"signInSignUp",children:"Sign In"}),e.jsx("button",{onClick:()=>l("/register"),className:"signInSignUp",children:"Sign Up"})]}),e.jsxs("div",{className:"welcomeCard",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-28 sm:w-36 md:w-44 mx-auto mb-6"}),e.jsxs("h1",{className:"welcomeTitle",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid",children:[e.jsx("div",{className:"featureItem",children:" Resident Records"}),e.jsx("div",{className:"featureItem",children:" Role Management"}),e.jsx("div",{className:"featureItem",children:" Maintenance Requests"}),e.jsx("div",{className:"featureItem",children:" Announcements"})]}),e.jsx("button",{className:"welcomeButton",onClick:c,children:" Get Started"})]})]})}function N1(l,c){return function(){return l.apply(c,arguments)}}const{toString:C2}=Object.prototype,{getPrototypeOf:Rf}=Object,{iterator:wd,toStringTag:j1}=Symbol,vd=(l=>c=>{const d=C2.call(c);return l[d]||(l[d]=d.slice(8,-1).toLowerCase())})(Object.create(null)),gs=l=>(l=l.toLowerCase(),c=>vd(c)===l),Nd=l=>c=>typeof c===l,{isArray:ji}=Array,So=Nd("undefined");function Lo(l){return l!==null&&!So(l)&&l.constructor!==null&&!So(l.constructor)&&_r(l.constructor.isBuffer)&&l.constructor.isBuffer(l)}const C1=gs("ArrayBuffer");function k2(l){let c;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?c=ArrayBuffer.isView(l):c=l&&l.buffer&&C1(l.buffer),c}const A2=Nd("string"),_r=Nd("function"),k1=Nd("number"),Fo=l=>l!==null&&typeof l=="object",S2=l=>l===!0||l===!1,ld=l=>{if(vd(l)!=="object")return!1;const c=Rf(l);return(c===null||c===Object.prototype||Object.getPrototypeOf(c)===null)&&!(j1 in l)&&!(wd in l)},E2=l=>{if(!Fo(l)||Lo(l))return!1;try{return Object.keys(l).length===0&&Object.getPrototypeOf(l)===Object.prototype}catch{return!1}},T2=gs("Date"),_2=gs("File"),M2=gs("Blob"),D2=gs("FileList"),R2=l=>Fo(l)&&_r(l.pipe),I2=l=>{let c;return l&&(typeof FormData=="function"&&l instanceof FormData||_r(l.append)&&((c=vd(l))==="formdata"||c==="object"&&_r(l.toString)&&l.toString()==="[object FormData]"))},O2=gs("URLSearchParams"),[B2,L2,F2,P2]=["ReadableStream","Request","Response","Headers"].map(gs),z2=l=>l.trim?l.trim():l.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Po(l,c,{allOwnKeys:d=!1}={}){if(l===null||typeof l>"u")return;let f,g;if(typeof l!="object"&&(l=[l]),ji(l))for(f=0,g=l.length;f<g;f++)c.call(null,l[f],f,l);else{if(Lo(l))return;const m=d?Object.getOwnPropertyNames(l):Object.keys(l),w=m.length;let N;for(f=0;f<w;f++)N=m[f],c.call(null,l[N],N,l)}}function A1(l,c){if(Lo(l))return null;c=c.toLowerCase();const d=Object.keys(l);let f=d.length,g;for(;f-- >0;)if(g=d[f],c===g.toLowerCase())return g;return null}const jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,S1=l=>!So(l)&&l!==jl;function ff(){const{caseless:l}=S1(this)&&this||{},c={},d=(f,g)=>{const m=l&&A1(c,g)||g;ld(c[m])&&ld(f)?c[m]=ff(c[m],f):ld(f)?c[m]=ff({},f):ji(f)?c[m]=f.slice():c[m]=f};for(let f=0,g=arguments.length;f<g;f++)arguments[f]&&Po(arguments[f],d);return c}const U2=(l,c,d,{allOwnKeys:f}={})=>(Po(c,(g,m)=>{d&&_r(g)?l[m]=N1(g,d):l[m]=g},{allOwnKeys:f}),l),H2=l=>(l.charCodeAt(0)===65279&&(l=l.slice(1)),l),V2=(l,c,d,f)=>{l.prototype=Object.create(c.prototype,f),l.prototype.constructor=l,Object.defineProperty(l,"super",{value:c.prototype}),d&&Object.assign(l.prototype,d)},G2=(l,c,d,f)=>{let g,m,w;const N={};if(c=c||{},l==null)return c;do{for(g=Object.getOwnPropertyNames(l),m=g.length;m-- >0;)w=g[m],(!f||f(w,l,c))&&!N[w]&&(c[w]=l[w],N[w]=!0);l=d!==!1&&Rf(l)}while(l&&(!d||d(l,c))&&l!==Object.prototype);return c},q2=(l,c,d)=>{l=String(l),(d===void 0||d>l.length)&&(d=l.length),d-=c.length;const f=l.indexOf(c,d);return f!==-1&&f===d},Y2=l=>{if(!l)return null;if(ji(l))return l;let c=l.length;if(!k1(c))return null;const d=new Array(c);for(;c-- >0;)d[c]=l[c];return d},X2=(l=>c=>l&&c instanceof l)(typeof Uint8Array<"u"&&Rf(Uint8Array)),Z2=(l,c)=>{const f=(l&&l[wd]).call(l);let g;for(;(g=f.next())&&!g.done;){const m=g.value;c.call(l,m[0],m[1])}},Q2=(l,c)=>{let d;const f=[];for(;(d=l.exec(c))!==null;)f.push(d);return f},$2=gs("HTMLFormElement"),W2=l=>l.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(d,f,g){return f.toUpperCase()+g}),$g=(({hasOwnProperty:l})=>(c,d)=>l.call(c,d))(Object.prototype),K2=gs("RegExp"),E1=(l,c)=>{const d=Object.getOwnPropertyDescriptors(l),f={};Po(d,(g,m)=>{let w;(w=c(g,m,l))!==!1&&(f[m]=w||g)}),Object.defineProperties(l,f)},J2=l=>{E1(l,(c,d)=>{if(_r(l)&&["arguments","caller","callee"].indexOf(d)!==-1)return!1;const f=l[d];if(_r(f)){if(c.enumerable=!1,"writable"in c){c.writable=!1;return}c.set||(c.set=()=>{throw Error("Can not rewrite read-only method '"+d+"'")})}})},ew=(l,c)=>{const d={},f=g=>{g.forEach(m=>{d[m]=!0})};return ji(l)?f(l):f(String(l).split(c)),d},tw=()=>{},aw=(l,c)=>l!=null&&Number.isFinite(l=+l)?l:c;function rw(l){return!!(l&&_r(l.append)&&l[j1]==="FormData"&&l[wd])}const sw=l=>{const c=new Array(10),d=(f,g)=>{if(Fo(f)){if(c.indexOf(f)>=0)return;if(Lo(f))return f;if(!("toJSON"in f)){c[g]=f;const m=ji(f)?[]:{};return Po(f,(w,N)=>{const C=d(w,g+1);!So(C)&&(m[N]=C)}),c[g]=void 0,m}}return f};return d(l,0)},nw=gs("AsyncFunction"),lw=l=>l&&(Fo(l)||_r(l))&&_r(l.then)&&_r(l.catch),T1=((l,c)=>l?setImmediate:c?((d,f)=>(jl.addEventListener("message",({source:g,data:m})=>{g===jl&&m===d&&f.length&&f.shift()()},!1),g=>{f.push(g),jl.postMessage(d,"*")}))(`axios@${Math.random()}`,[]):d=>setTimeout(d))(typeof setImmediate=="function",_r(jl.postMessage)),iw=typeof queueMicrotask<"u"?queueMicrotask.bind(jl):typeof process<"u"&&process.nextTick||T1,ow=l=>l!=null&&_r(l[wd]),Ie={isArray:ji,isArrayBuffer:C1,isBuffer:Lo,isFormData:I2,isArrayBufferView:k2,isString:A2,isNumber:k1,isBoolean:S2,isObject:Fo,isPlainObject:ld,isEmptyObject:E2,isReadableStream:B2,isRequest:L2,isResponse:F2,isHeaders:P2,isUndefined:So,isDate:T2,isFile:_2,isBlob:M2,isRegExp:K2,isFunction:_r,isStream:R2,isURLSearchParams:O2,isTypedArray:X2,isFileList:D2,forEach:Po,merge:ff,extend:U2,trim:z2,stripBOM:H2,inherits:V2,toFlatObject:G2,kindOf:vd,kindOfTest:gs,endsWith:q2,toArray:Y2,forEachEntry:Z2,matchAll:Q2,isHTMLForm:$2,hasOwnProperty:$g,hasOwnProp:$g,reduceDescriptors:E1,freezeMethods:J2,toObjectSet:ew,toCamelCase:W2,noop:tw,toFiniteNumber:aw,findKey:A1,global:jl,isContextDefined:S1,isSpecCompliantForm:rw,toJSONObject:sw,isAsyncFn:nw,isThenable:lw,setImmediate:T1,asap:iw,isIterable:ow};function Nt(l,c,d,f,g){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=l,this.name="AxiosError",c&&(this.code=c),d&&(this.config=d),f&&(this.request=f),g&&(this.response=g,this.status=g.status?g.status:null)}Ie.inherits(Nt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ie.toJSONObject(this.config),code:this.code,status:this.status}}});const _1=Nt.prototype,M1={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(l=>{M1[l]={value:l}});Object.defineProperties(Nt,M1);Object.defineProperty(_1,"isAxiosError",{value:!0});Nt.from=(l,c,d,f,g,m)=>{const w=Object.create(_1);return Ie.toFlatObject(l,w,function(C){return C!==Error.prototype},N=>N!=="isAxiosError"),Nt.call(w,l.message,c,d,f,g),w.cause=l,w.name=l.name,m&&Object.assign(w,m),w};const cw=null;function hf(l){return Ie.isPlainObject(l)||Ie.isArray(l)}function D1(l){return Ie.endsWith(l,"[]")?l.slice(0,-2):l}function Wg(l,c,d){return l?l.concat(c).map(function(g,m){return g=D1(g),!d&&m?"["+g+"]":g}).join(d?".":""):c}function dw(l){return Ie.isArray(l)&&!l.some(hf)}const uw=Ie.toFlatObject(Ie,{},null,function(c){return/^is[A-Z]/.test(c)});function jd(l,c,d){if(!Ie.isObject(l))throw new TypeError("target must be an object");c=c||new FormData,d=Ie.toFlatObject(d,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,G){return!Ie.isUndefined(G[_])});const f=d.metaTokens,g=d.visitor||S,m=d.dots,w=d.indexes,C=(d.Blob||typeof Blob<"u"&&Blob)&&Ie.isSpecCompliantForm(c);if(!Ie.isFunction(g))throw new TypeError("visitor must be a function");function b(B){if(B===null)return"";if(Ie.isDate(B))return B.toISOString();if(Ie.isBoolean(B))return B.toString();if(!C&&Ie.isBlob(B))throw new Nt("Blob is not supported. Use a Buffer instead.");return Ie.isArrayBuffer(B)||Ie.isTypedArray(B)?C&&typeof Blob=="function"?new Blob([B]):Buffer.from(B):B}function S(B,_,G){let R=B;if(B&&!G&&typeof B=="object"){if(Ie.endsWith(_,"{}"))_=f?_:_.slice(0,-2),B=JSON.stringify(B);else if(Ie.isArray(B)&&dw(B)||(Ie.isFileList(B)||Ie.endsWith(_,"[]"))&&(R=Ie.toArray(B)))return _=D1(_),R.forEach(function(F,V){!(Ie.isUndefined(F)||F===null)&&c.append(w===!0?Wg([_],V,m):w===null?_:_+"[]",b(F))}),!1}return hf(B)?!0:(c.append(Wg(G,_,m),b(B)),!1)}const E=[],M=Object.assign(uw,{defaultVisitor:S,convertValue:b,isVisitable:hf});function D(B,_){if(!Ie.isUndefined(B)){if(E.indexOf(B)!==-1)throw Error("Circular reference detected in "+_.join("."));E.push(B),Ie.forEach(B,function(R,z){(!(Ie.isUndefined(R)||R===null)&&g.call(c,R,Ie.isString(z)?z.trim():z,_,M))===!0&&D(R,_?_.concat(z):[z])}),E.pop()}}if(!Ie.isObject(l))throw new TypeError("data must be an object");return D(l),c}function Kg(l){const c={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(l).replace(/[!'()~]|%20|%00/g,function(f){return c[f]})}function If(l,c){this._pairs=[],l&&jd(l,this,c)}const R1=If.prototype;R1.append=function(c,d){this._pairs.push([c,d])};R1.toString=function(c){const d=c?function(f){return c.call(this,f,Kg)}:Kg;return this._pairs.map(function(g){return d(g[0])+"="+d(g[1])},"").join("&")};function fw(l){return encodeURIComponent(l).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function I1(l,c,d){if(!c)return l;const f=d&&d.encode||fw;Ie.isFunction(d)&&(d={serialize:d});const g=d&&d.serialize;let m;if(g?m=g(c,d):m=Ie.isURLSearchParams(c)?c.toString():new If(c,d).toString(f),m){const w=l.indexOf("#");w!==-1&&(l=l.slice(0,w)),l+=(l.indexOf("?")===-1?"?":"&")+m}return l}class Jg{constructor(){this.handlers=[]}use(c,d,f){return this.handlers.push({fulfilled:c,rejected:d,synchronous:f?f.synchronous:!1,runWhen:f?f.runWhen:null}),this.handlers.length-1}eject(c){this.handlers[c]&&(this.handlers[c]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(c){Ie.forEach(this.handlers,function(f){f!==null&&c(f)})}}const O1={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hw=typeof URLSearchParams<"u"?URLSearchParams:If,xw=typeof FormData<"u"?FormData:null,gw=typeof Blob<"u"?Blob:null,mw={isBrowser:!0,classes:{URLSearchParams:hw,FormData:xw,Blob:gw},protocols:["http","https","file","blob","url","data"]},Of=typeof window<"u"&&typeof document<"u",xf=typeof navigator=="object"&&navigator||void 0,pw=Of&&(!xf||["ReactNative","NativeScript","NS"].indexOf(xf.product)<0),yw=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",bw=Of&&window.location.href||"http://localhost",ww=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Of,hasStandardBrowserEnv:pw,hasStandardBrowserWebWorkerEnv:yw,navigator:xf,origin:bw},Symbol.toStringTag,{value:"Module"})),fr={...ww,...mw};function vw(l,c){return jd(l,new fr.classes.URLSearchParams,{visitor:function(d,f,g,m){return fr.isNode&&Ie.isBuffer(d)?(this.append(f,d.toString("base64")),!1):m.defaultVisitor.apply(this,arguments)},...c})}function Nw(l){return Ie.matchAll(/\w+|\[(\w*)]/g,l).map(c=>c[0]==="[]"?"":c[1]||c[0])}function jw(l){const c={},d=Object.keys(l);let f;const g=d.length;let m;for(f=0;f<g;f++)m=d[f],c[m]=l[m];return c}function B1(l){function c(d,f,g,m){let w=d[m++];if(w==="__proto__")return!0;const N=Number.isFinite(+w),C=m>=d.length;return w=!w&&Ie.isArray(g)?g.length:w,C?(Ie.hasOwnProp(g,w)?g[w]=[g[w],f]:g[w]=f,!N):((!g[w]||!Ie.isObject(g[w]))&&(g[w]=[]),c(d,f,g[w],m)&&Ie.isArray(g[w])&&(g[w]=jw(g[w])),!N)}if(Ie.isFormData(l)&&Ie.isFunction(l.entries)){const d={};return Ie.forEachEntry(l,(f,g)=>{c(Nw(f),g,d,0)}),d}return null}function Cw(l,c,d){if(Ie.isString(l))try{return(c||JSON.parse)(l),Ie.trim(l)}catch(f){if(f.name!=="SyntaxError")throw f}return(d||JSON.stringify)(l)}const zo={transitional:O1,adapter:["xhr","http","fetch"],transformRequest:[function(c,d){const f=d.getContentType()||"",g=f.indexOf("application/json")>-1,m=Ie.isObject(c);if(m&&Ie.isHTMLForm(c)&&(c=new FormData(c)),Ie.isFormData(c))return g?JSON.stringify(B1(c)):c;if(Ie.isArrayBuffer(c)||Ie.isBuffer(c)||Ie.isStream(c)||Ie.isFile(c)||Ie.isBlob(c)||Ie.isReadableStream(c))return c;if(Ie.isArrayBufferView(c))return c.buffer;if(Ie.isURLSearchParams(c))return d.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),c.toString();let N;if(m){if(f.indexOf("application/x-www-form-urlencoded")>-1)return vw(c,this.formSerializer).toString();if((N=Ie.isFileList(c))||f.indexOf("multipart/form-data")>-1){const C=this.env&&this.env.FormData;return jd(N?{"files[]":c}:c,C&&new C,this.formSerializer)}}return m||g?(d.setContentType("application/json",!1),Cw(c)):c}],transformResponse:[function(c){const d=this.transitional||zo.transitional,f=d&&d.forcedJSONParsing,g=this.responseType==="json";if(Ie.isResponse(c)||Ie.isReadableStream(c))return c;if(c&&Ie.isString(c)&&(f&&!this.responseType||g)){const w=!(d&&d.silentJSONParsing)&&g;try{return JSON.parse(c)}catch(N){if(w)throw N.name==="SyntaxError"?Nt.from(N,Nt.ERR_BAD_RESPONSE,this,null,this.response):N}}return c}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(c){return c>=200&&c<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ie.forEach(["delete","get","head","post","put","patch"],l=>{zo.headers[l]={}});const kw=Ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Aw=l=>{const c={};let d,f,g;return l&&l.split(`
`).forEach(function(w){g=w.indexOf(":"),d=w.substring(0,g).trim().toLowerCase(),f=w.substring(g+1).trim(),!(!d||c[d]&&kw[d])&&(d==="set-cookie"?c[d]?c[d].push(f):c[d]=[f]:c[d]=c[d]?c[d]+", "+f:f)}),c},em=Symbol("internals");function jo(l){return l&&String(l).trim().toLowerCase()}function id(l){return l===!1||l==null?l:Ie.isArray(l)?l.map(id):String(l)}function Sw(l){const c=Object.create(null),d=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let f;for(;f=d.exec(l);)c[f[1]]=f[2];return c}const Ew=l=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(l.trim());function B0(l,c,d,f,g){if(Ie.isFunction(f))return f.call(this,c,d);if(g&&(c=d),!!Ie.isString(c)){if(Ie.isString(f))return c.indexOf(f)!==-1;if(Ie.isRegExp(f))return f.test(c)}}function Tw(l){return l.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(c,d,f)=>d.toUpperCase()+f)}function _w(l,c){const d=Ie.toCamelCase(" "+c);["get","set","has"].forEach(f=>{Object.defineProperty(l,f+d,{value:function(g,m,w){return this[f].call(this,c,g,m,w)},configurable:!0})})}let Mr=class{constructor(c){c&&this.set(c)}set(c,d,f){const g=this;function m(N,C,b){const S=jo(C);if(!S)throw new Error("header name must be a non-empty string");const E=Ie.findKey(g,S);(!E||g[E]===void 0||b===!0||b===void 0&&g[E]!==!1)&&(g[E||C]=id(N))}const w=(N,C)=>Ie.forEach(N,(b,S)=>m(b,S,C));if(Ie.isPlainObject(c)||c instanceof this.constructor)w(c,d);else if(Ie.isString(c)&&(c=c.trim())&&!Ew(c))w(Aw(c),d);else if(Ie.isObject(c)&&Ie.isIterable(c)){let N={},C,b;for(const S of c){if(!Ie.isArray(S))throw TypeError("Object iterator must return a key-value pair");N[b=S[0]]=(C=N[b])?Ie.isArray(C)?[...C,S[1]]:[C,S[1]]:S[1]}w(N,d)}else c!=null&&m(d,c,f);return this}get(c,d){if(c=jo(c),c){const f=Ie.findKey(this,c);if(f){const g=this[f];if(!d)return g;if(d===!0)return Sw(g);if(Ie.isFunction(d))return d.call(this,g,f);if(Ie.isRegExp(d))return d.exec(g);throw new TypeError("parser must be boolean|regexp|function")}}}has(c,d){if(c=jo(c),c){const f=Ie.findKey(this,c);return!!(f&&this[f]!==void 0&&(!d||B0(this,this[f],f,d)))}return!1}delete(c,d){const f=this;let g=!1;function m(w){if(w=jo(w),w){const N=Ie.findKey(f,w);N&&(!d||B0(f,f[N],N,d))&&(delete f[N],g=!0)}}return Ie.isArray(c)?c.forEach(m):m(c),g}clear(c){const d=Object.keys(this);let f=d.length,g=!1;for(;f--;){const m=d[f];(!c||B0(this,this[m],m,c,!0))&&(delete this[m],g=!0)}return g}normalize(c){const d=this,f={};return Ie.forEach(this,(g,m)=>{const w=Ie.findKey(f,m);if(w){d[w]=id(g),delete d[m];return}const N=c?Tw(m):String(m).trim();N!==m&&delete d[m],d[N]=id(g),f[N]=!0}),this}concat(...c){return this.constructor.concat(this,...c)}toJSON(c){const d=Object.create(null);return Ie.forEach(this,(f,g)=>{f!=null&&f!==!1&&(d[g]=c&&Ie.isArray(f)?f.join(", "):f)}),d}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([c,d])=>c+": "+d).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(c){return c instanceof this?c:new this(c)}static concat(c,...d){const f=new this(c);return d.forEach(g=>f.set(g)),f}static accessor(c){const f=(this[em]=this[em]={accessors:{}}).accessors,g=this.prototype;function m(w){const N=jo(w);f[N]||(_w(g,w),f[N]=!0)}return Ie.isArray(c)?c.forEach(m):m(c),this}};Mr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ie.reduceDescriptors(Mr.prototype,({value:l},c)=>{let d=c[0].toUpperCase()+c.slice(1);return{get:()=>l,set(f){this[d]=f}}});Ie.freezeMethods(Mr);function L0(l,c){const d=this||zo,f=c||d,g=Mr.from(f.headers);let m=f.data;return Ie.forEach(l,function(N){m=N.call(d,m,g.normalize(),c?c.status:void 0)}),g.normalize(),m}function L1(l){return!!(l&&l.__CANCEL__)}function Ci(l,c,d){Nt.call(this,l??"canceled",Nt.ERR_CANCELED,c,d),this.name="CanceledError"}Ie.inherits(Ci,Nt,{__CANCEL__:!0});function F1(l,c,d){const f=d.config.validateStatus;!d.status||!f||f(d.status)?l(d):c(new Nt("Request failed with status code "+d.status,[Nt.ERR_BAD_REQUEST,Nt.ERR_BAD_RESPONSE][Math.floor(d.status/100)-4],d.config,d.request,d))}function Mw(l){const c=/^([-+\w]{1,25})(:?\/\/|:)/.exec(l);return c&&c[1]||""}function Dw(l,c){l=l||10;const d=new Array(l),f=new Array(l);let g=0,m=0,w;return c=c!==void 0?c:1e3,function(C){const b=Date.now(),S=f[m];w||(w=b),d[g]=C,f[g]=b;let E=m,M=0;for(;E!==g;)M+=d[E++],E=E%l;if(g=(g+1)%l,g===m&&(m=(m+1)%l),b-w<c)return;const D=S&&b-S;return D?Math.round(M*1e3/D):void 0}}function Rw(l,c){let d=0,f=1e3/c,g,m;const w=(b,S=Date.now())=>{d=S,g=null,m&&(clearTimeout(m),m=null),l(...b)};return[(...b)=>{const S=Date.now(),E=S-d;E>=f?w(b,S):(g=b,m||(m=setTimeout(()=>{m=null,w(g)},f-E)))},()=>g&&w(g)]}const ud=(l,c,d=3)=>{let f=0;const g=Dw(50,250);return Rw(m=>{const w=m.loaded,N=m.lengthComputable?m.total:void 0,C=w-f,b=g(C),S=w<=N;f=w;const E={loaded:w,total:N,progress:N?w/N:void 0,bytes:C,rate:b||void 0,estimated:b&&N&&S?(N-w)/b:void 0,event:m,lengthComputable:N!=null,[c?"download":"upload"]:!0};l(E)},d)},tm=(l,c)=>{const d=l!=null;return[f=>c[0]({lengthComputable:d,total:l,loaded:f}),c[1]]},am=l=>(...c)=>Ie.asap(()=>l(...c)),Iw=fr.hasStandardBrowserEnv?((l,c)=>d=>(d=new URL(d,fr.origin),l.protocol===d.protocol&&l.host===d.host&&(c||l.port===d.port)))(new URL(fr.origin),fr.navigator&&/(msie|trident)/i.test(fr.navigator.userAgent)):()=>!0,Ow=fr.hasStandardBrowserEnv?{write(l,c,d,f,g,m){const w=[l+"="+encodeURIComponent(c)];Ie.isNumber(d)&&w.push("expires="+new Date(d).toGMTString()),Ie.isString(f)&&w.push("path="+f),Ie.isString(g)&&w.push("domain="+g),m===!0&&w.push("secure"),document.cookie=w.join("; ")},read(l){const c=document.cookie.match(new RegExp("(^|;\\s*)("+l+")=([^;]*)"));return c?decodeURIComponent(c[3]):null},remove(l){this.write(l,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bw(l){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(l)}function Lw(l,c){return c?l.replace(/\/?\/$/,"")+"/"+c.replace(/^\/+/,""):l}function P1(l,c,d){let f=!Bw(c);return l&&(f||d==!1)?Lw(l,c):c}const rm=l=>l instanceof Mr?{...l}:l;function Al(l,c){c=c||{};const d={};function f(b,S,E,M){return Ie.isPlainObject(b)&&Ie.isPlainObject(S)?Ie.merge.call({caseless:M},b,S):Ie.isPlainObject(S)?Ie.merge({},S):Ie.isArray(S)?S.slice():S}function g(b,S,E,M){if(Ie.isUndefined(S)){if(!Ie.isUndefined(b))return f(void 0,b,E,M)}else return f(b,S,E,M)}function m(b,S){if(!Ie.isUndefined(S))return f(void 0,S)}function w(b,S){if(Ie.isUndefined(S)){if(!Ie.isUndefined(b))return f(void 0,b)}else return f(void 0,S)}function N(b,S,E){if(E in c)return f(b,S);if(E in l)return f(void 0,b)}const C={url:m,method:m,data:m,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,withXSRFToken:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,beforeRedirect:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:N,headers:(b,S,E)=>g(rm(b),rm(S),E,!0)};return Ie.forEach(Object.keys({...l,...c}),function(S){const E=C[S]||g,M=E(l[S],c[S],S);Ie.isUndefined(M)&&E!==N||(d[S]=M)}),d}const z1=l=>{const c=Al({},l);let{data:d,withXSRFToken:f,xsrfHeaderName:g,xsrfCookieName:m,headers:w,auth:N}=c;c.headers=w=Mr.from(w),c.url=I1(P1(c.baseURL,c.url,c.allowAbsoluteUrls),l.params,l.paramsSerializer),N&&w.set("Authorization","Basic "+btoa((N.username||"")+":"+(N.password?unescape(encodeURIComponent(N.password)):"")));let C;if(Ie.isFormData(d)){if(fr.hasStandardBrowserEnv||fr.hasStandardBrowserWebWorkerEnv)w.setContentType(void 0);else if((C=w.getContentType())!==!1){const[b,...S]=C?C.split(";").map(E=>E.trim()).filter(Boolean):[];w.setContentType([b||"multipart/form-data",...S].join("; "))}}if(fr.hasStandardBrowserEnv&&(f&&Ie.isFunction(f)&&(f=f(c)),f||f!==!1&&Iw(c.url))){const b=g&&m&&Ow.read(m);b&&w.set(g,b)}return c},Fw=typeof XMLHttpRequest<"u",Pw=Fw&&function(l){return new Promise(function(d,f){const g=z1(l);let m=g.data;const w=Mr.from(g.headers).normalize();let{responseType:N,onUploadProgress:C,onDownloadProgress:b}=g,S,E,M,D,B;function _(){D&&D(),B&&B(),g.cancelToken&&g.cancelToken.unsubscribe(S),g.signal&&g.signal.removeEventListener("abort",S)}let G=new XMLHttpRequest;G.open(g.method.toUpperCase(),g.url,!0),G.timeout=g.timeout;function R(){if(!G)return;const F=Mr.from("getAllResponseHeaders"in G&&G.getAllResponseHeaders()),Q={data:!N||N==="text"||N==="json"?G.responseText:G.response,status:G.status,statusText:G.statusText,headers:F,config:l,request:G};F1(function(P){d(P),_()},function(P){f(P),_()},Q),G=null}"onloadend"in G?G.onloadend=R:G.onreadystatechange=function(){!G||G.readyState!==4||G.status===0&&!(G.responseURL&&G.responseURL.indexOf("file:")===0)||setTimeout(R)},G.onabort=function(){G&&(f(new Nt("Request aborted",Nt.ECONNABORTED,l,G)),G=null)},G.onerror=function(){f(new Nt("Network Error",Nt.ERR_NETWORK,l,G)),G=null},G.ontimeout=function(){let V=g.timeout?"timeout of "+g.timeout+"ms exceeded":"timeout exceeded";const Q=g.transitional||O1;g.timeoutErrorMessage&&(V=g.timeoutErrorMessage),f(new Nt(V,Q.clarifyTimeoutError?Nt.ETIMEDOUT:Nt.ECONNABORTED,l,G)),G=null},m===void 0&&w.setContentType(null),"setRequestHeader"in G&&Ie.forEach(w.toJSON(),function(V,Q){G.setRequestHeader(Q,V)}),Ie.isUndefined(g.withCredentials)||(G.withCredentials=!!g.withCredentials),N&&N!=="json"&&(G.responseType=g.responseType),b&&([M,B]=ud(b,!0),G.addEventListener("progress",M)),C&&G.upload&&([E,D]=ud(C),G.upload.addEventListener("progress",E),G.upload.addEventListener("loadend",D)),(g.cancelToken||g.signal)&&(S=F=>{G&&(f(!F||F.type?new Ci(null,l,G):F),G.abort(),G=null)},g.cancelToken&&g.cancelToken.subscribe(S),g.signal&&(g.signal.aborted?S():g.signal.addEventListener("abort",S)));const z=Mw(g.url);if(z&&fr.protocols.indexOf(z)===-1){f(new Nt("Unsupported protocol "+z+":",Nt.ERR_BAD_REQUEST,l));return}G.send(m||null)})},zw=(l,c)=>{const{length:d}=l=l?l.filter(Boolean):[];if(c||d){let f=new AbortController,g;const m=function(b){if(!g){g=!0,N();const S=b instanceof Error?b:this.reason;f.abort(S instanceof Nt?S:new Ci(S instanceof Error?S.message:S))}};let w=c&&setTimeout(()=>{w=null,m(new Nt(`timeout ${c} of ms exceeded`,Nt.ETIMEDOUT))},c);const N=()=>{l&&(w&&clearTimeout(w),w=null,l.forEach(b=>{b.unsubscribe?b.unsubscribe(m):b.removeEventListener("abort",m)}),l=null)};l.forEach(b=>b.addEventListener("abort",m));const{signal:C}=f;return C.unsubscribe=()=>Ie.asap(N),C}},Uw=function*(l,c){let d=l.byteLength;if(d<c){yield l;return}let f=0,g;for(;f<d;)g=f+c,yield l.slice(f,g),f=g},Hw=async function*(l,c){for await(const d of Vw(l))yield*Uw(d,c)},Vw=async function*(l){if(l[Symbol.asyncIterator]){yield*l;return}const c=l.getReader();try{for(;;){const{done:d,value:f}=await c.read();if(d)break;yield f}}finally{await c.cancel()}},sm=(l,c,d,f)=>{const g=Hw(l,c);let m=0,w,N=C=>{w||(w=!0,f&&f(C))};return new ReadableStream({async pull(C){try{const{done:b,value:S}=await g.next();if(b){N(),C.close();return}let E=S.byteLength;if(d){let M=m+=E;d(M)}C.enqueue(new Uint8Array(S))}catch(b){throw N(b),b}},cancel(C){return N(C),g.return()}},{highWaterMark:2})},Cd=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",U1=Cd&&typeof ReadableStream=="function",Gw=Cd&&(typeof TextEncoder=="function"?(l=>c=>l.encode(c))(new TextEncoder):async l=>new Uint8Array(await new Response(l).arrayBuffer())),H1=(l,...c)=>{try{return!!l(...c)}catch{return!1}},qw=U1&&H1(()=>{let l=!1;const c=new Request(fr.origin,{body:new ReadableStream,method:"POST",get duplex(){return l=!0,"half"}}).headers.has("Content-Type");return l&&!c}),nm=64*1024,gf=U1&&H1(()=>Ie.isReadableStream(new Response("").body)),fd={stream:gf&&(l=>l.body)};Cd&&(l=>{["text","arrayBuffer","blob","formData","stream"].forEach(c=>{!fd[c]&&(fd[c]=Ie.isFunction(l[c])?d=>d[c]():(d,f)=>{throw new Nt(`Response type '${c}' is not supported`,Nt.ERR_NOT_SUPPORT,f)})})})(new Response);const Yw=async l=>{if(l==null)return 0;if(Ie.isBlob(l))return l.size;if(Ie.isSpecCompliantForm(l))return(await new Request(fr.origin,{method:"POST",body:l}).arrayBuffer()).byteLength;if(Ie.isArrayBufferView(l)||Ie.isArrayBuffer(l))return l.byteLength;if(Ie.isURLSearchParams(l)&&(l=l+""),Ie.isString(l))return(await Gw(l)).byteLength},Xw=async(l,c)=>{const d=Ie.toFiniteNumber(l.getContentLength());return d??Yw(c)},Zw=Cd&&(async l=>{let{url:c,method:d,data:f,signal:g,cancelToken:m,timeout:w,onDownloadProgress:N,onUploadProgress:C,responseType:b,headers:S,withCredentials:E="same-origin",fetchOptions:M}=z1(l);b=b?(b+"").toLowerCase():"text";let D=zw([g,m&&m.toAbortSignal()],w),B;const _=D&&D.unsubscribe&&(()=>{D.unsubscribe()});let G;try{if(C&&qw&&d!=="get"&&d!=="head"&&(G=await Xw(S,f))!==0){let Q=new Request(c,{method:"POST",body:f,duplex:"half"}),$;if(Ie.isFormData(f)&&($=Q.headers.get("content-type"))&&S.setContentType($),Q.body){const[P,X]=tm(G,ud(am(C)));f=sm(Q.body,nm,P,X)}}Ie.isString(E)||(E=E?"include":"omit");const R="credentials"in Request.prototype;B=new Request(c,{...M,signal:D,method:d.toUpperCase(),headers:S.normalize().toJSON(),body:f,duplex:"half",credentials:R?E:void 0});let z=await fetch(B,M);const F=gf&&(b==="stream"||b==="response");if(gf&&(N||F&&_)){const Q={};["status","statusText","headers"].forEach(Z=>{Q[Z]=z[Z]});const $=Ie.toFiniteNumber(z.headers.get("content-length")),[P,X]=N&&tm($,ud(am(N),!0))||[];z=new Response(sm(z.body,nm,P,()=>{X&&X(),_&&_()}),Q)}b=b||"text";let V=await fd[Ie.findKey(fd,b)||"text"](z,l);return!F&&_&&_(),await new Promise((Q,$)=>{F1(Q,$,{data:V,headers:Mr.from(z.headers),status:z.status,statusText:z.statusText,config:l,request:B})})}catch(R){throw _&&_(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new Nt("Network Error",Nt.ERR_NETWORK,l,B),{cause:R.cause||R}):Nt.from(R,R&&R.code,l,B)}}),mf={http:cw,xhr:Pw,fetch:Zw};Ie.forEach(mf,(l,c)=>{if(l){try{Object.defineProperty(l,"name",{value:c})}catch{}Object.defineProperty(l,"adapterName",{value:c})}});const lm=l=>`- ${l}`,Qw=l=>Ie.isFunction(l)||l===null||l===!1,V1={getAdapter:l=>{l=Ie.isArray(l)?l:[l];const{length:c}=l;let d,f;const g={};for(let m=0;m<c;m++){d=l[m];let w;if(f=d,!Qw(d)&&(f=mf[(w=String(d)).toLowerCase()],f===void 0))throw new Nt(`Unknown adapter '${w}'`);if(f)break;g[w||"#"+m]=f}if(!f){const m=Object.entries(g).map(([N,C])=>`adapter ${N} `+(C===!1?"is not supported by the environment":"is not available in the build"));let w=c?m.length>1?`since :
`+m.map(lm).join(`
`):" "+lm(m[0]):"as no adapter specified";throw new Nt("There is no suitable adapter to dispatch the request "+w,"ERR_NOT_SUPPORT")}return f},adapters:mf};function F0(l){if(l.cancelToken&&l.cancelToken.throwIfRequested(),l.signal&&l.signal.aborted)throw new Ci(null,l)}function im(l){return F0(l),l.headers=Mr.from(l.headers),l.data=L0.call(l,l.transformRequest),["post","put","patch"].indexOf(l.method)!==-1&&l.headers.setContentType("application/x-www-form-urlencoded",!1),V1.getAdapter(l.adapter||zo.adapter)(l).then(function(f){return F0(l),f.data=L0.call(l,l.transformResponse,f),f.headers=Mr.from(f.headers),f},function(f){return L1(f)||(F0(l),f&&f.response&&(f.response.data=L0.call(l,l.transformResponse,f.response),f.response.headers=Mr.from(f.response.headers))),Promise.reject(f)})}const G1="1.11.0",kd={};["object","boolean","number","function","string","symbol"].forEach((l,c)=>{kd[l]=function(f){return typeof f===l||"a"+(c<1?"n ":" ")+l}});const om={};kd.transitional=function(c,d,f){function g(m,w){return"[Axios v"+G1+"] Transitional option '"+m+"'"+w+(f?". "+f:"")}return(m,w,N)=>{if(c===!1)throw new Nt(g(w," has been removed"+(d?" in "+d:"")),Nt.ERR_DEPRECATED);return d&&!om[w]&&(om[w]=!0,console.warn(g(w," has been deprecated since v"+d+" and will be removed in the near future"))),c?c(m,w,N):!0}};kd.spelling=function(c){return(d,f)=>(console.warn(`${f} is likely a misspelling of ${c}`),!0)};function $w(l,c,d){if(typeof l!="object")throw new Nt("options must be an object",Nt.ERR_BAD_OPTION_VALUE);const f=Object.keys(l);let g=f.length;for(;g-- >0;){const m=f[g],w=c[m];if(w){const N=l[m],C=N===void 0||w(N,m,l);if(C!==!0)throw new Nt("option "+m+" must be "+C,Nt.ERR_BAD_OPTION_VALUE);continue}if(d!==!0)throw new Nt("Unknown option "+m,Nt.ERR_BAD_OPTION)}}const od={assertOptions:$w,validators:kd},Os=od.validators;let Cl=class{constructor(c){this.defaults=c||{},this.interceptors={request:new Jg,response:new Jg}}async request(c,d){try{return await this._request(c,d)}catch(f){if(f instanceof Error){let g={};Error.captureStackTrace?Error.captureStackTrace(g):g=new Error;const m=g.stack?g.stack.replace(/^.+\n/,""):"";try{f.stack?m&&!String(f.stack).endsWith(m.replace(/^.+\n.+\n/,""))&&(f.stack+=`
`+m):f.stack=m}catch{}}throw f}}_request(c,d){typeof c=="string"?(d=d||{},d.url=c):d=c||{},d=Al(this.defaults,d);const{transitional:f,paramsSerializer:g,headers:m}=d;f!==void 0&&od.assertOptions(f,{silentJSONParsing:Os.transitional(Os.boolean),forcedJSONParsing:Os.transitional(Os.boolean),clarifyTimeoutError:Os.transitional(Os.boolean)},!1),g!=null&&(Ie.isFunction(g)?d.paramsSerializer={serialize:g}:od.assertOptions(g,{encode:Os.function,serialize:Os.function},!0)),d.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?d.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:d.allowAbsoluteUrls=!0),od.assertOptions(d,{baseUrl:Os.spelling("baseURL"),withXsrfToken:Os.spelling("withXSRFToken")},!0),d.method=(d.method||this.defaults.method||"get").toLowerCase();let w=m&&Ie.merge(m.common,m[d.method]);m&&Ie.forEach(["delete","get","head","post","put","patch","common"],B=>{delete m[B]}),d.headers=Mr.concat(w,m);const N=[];let C=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(d)===!1||(C=C&&_.synchronous,N.unshift(_.fulfilled,_.rejected))});const b=[];this.interceptors.response.forEach(function(_){b.push(_.fulfilled,_.rejected)});let S,E=0,M;if(!C){const B=[im.bind(this),void 0];for(B.unshift(...N),B.push(...b),M=B.length,S=Promise.resolve(d);E<M;)S=S.then(B[E++],B[E++]);return S}M=N.length;let D=d;for(E=0;E<M;){const B=N[E++],_=N[E++];try{D=B(D)}catch(G){_.call(this,G);break}}try{S=im.call(this,D)}catch(B){return Promise.reject(B)}for(E=0,M=b.length;E<M;)S=S.then(b[E++],b[E++]);return S}getUri(c){c=Al(this.defaults,c);const d=P1(c.baseURL,c.url,c.allowAbsoluteUrls);return I1(d,c.params,c.paramsSerializer)}};Ie.forEach(["delete","get","head","options"],function(c){Cl.prototype[c]=function(d,f){return this.request(Al(f||{},{method:c,url:d,data:(f||{}).data}))}});Ie.forEach(["post","put","patch"],function(c){function d(f){return function(m,w,N){return this.request(Al(N||{},{method:c,headers:f?{"Content-Type":"multipart/form-data"}:{},url:m,data:w}))}}Cl.prototype[c]=d(),Cl.prototype[c+"Form"]=d(!0)});let Ww=class q1{constructor(c){if(typeof c!="function")throw new TypeError("executor must be a function.");let d;this.promise=new Promise(function(m){d=m});const f=this;this.promise.then(g=>{if(!f._listeners)return;let m=f._listeners.length;for(;m-- >0;)f._listeners[m](g);f._listeners=null}),this.promise.then=g=>{let m;const w=new Promise(N=>{f.subscribe(N),m=N}).then(g);return w.cancel=function(){f.unsubscribe(m)},w},c(function(m,w,N){f.reason||(f.reason=new Ci(m,w,N),d(f.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(c){if(this.reason){c(this.reason);return}this._listeners?this._listeners.push(c):this._listeners=[c]}unsubscribe(c){if(!this._listeners)return;const d=this._listeners.indexOf(c);d!==-1&&this._listeners.splice(d,1)}toAbortSignal(){const c=new AbortController,d=f=>{c.abort(f)};return this.subscribe(d),c.signal.unsubscribe=()=>this.unsubscribe(d),c.signal}static source(){let c;return{token:new q1(function(g){c=g}),cancel:c}}};function Kw(l){return function(d){return l.apply(null,d)}}function Jw(l){return Ie.isObject(l)&&l.isAxiosError===!0}const pf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(pf).forEach(([l,c])=>{pf[c]=l});function Y1(l){const c=new Cl(l),d=N1(Cl.prototype.request,c);return Ie.extend(d,Cl.prototype,c,{allOwnKeys:!0}),Ie.extend(d,c,null,{allOwnKeys:!0}),d.create=function(g){return Y1(Al(l,g))},d}const Ba=Y1(zo);Ba.Axios=Cl;Ba.CanceledError=Ci;Ba.CancelToken=Ww;Ba.isCancel=L1;Ba.VERSION=G1;Ba.toFormData=jd;Ba.AxiosError=Nt;Ba.Cancel=Ba.CanceledError;Ba.all=function(c){return Promise.all(c)};Ba.spread=Kw;Ba.isAxiosError=Jw;Ba.mergeConfig=Al;Ba.AxiosHeaders=Mr;Ba.formToJSON=l=>B1(Ie.isHTMLForm(l)?new FormData(l):l);Ba.getAdapter=V1.getAdapter;Ba.HttpStatusCode=pf;Ba.default=Ba;const{Axios:Hj,AxiosError:Vj,CanceledError:Gj,isCancel:qj,CancelToken:Yj,VERSION:Xj,all:Zj,Cancel:Qj,isAxiosError:$j,spread:Wj,toFormData:Kj,AxiosHeaders:Jj,HttpStatusCode:e6,formToJSON:t6,getAdapter:a6,mergeConfig:r6}=Ba,br=k.createContext(null);function ev({children:l}){const[c,d]=k.useState(()=>{const M=localStorage.getItem("auth");return M?JSON.parse(M):{accessToken:null,user:null}}),f=ia(),g=k.useRef(null),m=600*1e3,w=k.useCallback(()=>{d({accessToken:null,user:null}),localStorage.removeItem("auth"),localStorage.removeItem("lastActivity"),g.current&&clearTimeout(g.current),f("/login"),console.log("Auto logged out due to inactivity")},[f]),N=k.useCallback(()=>{g.current&&clearTimeout(g.current),localStorage.setItem("lastActivity",Date.now().toString()),g.current=setTimeout(()=>{w()},m)},[w,m]),C=k.useCallback(()=>{const M=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],D=()=>{N()};M.forEach(_=>{window.addEventListener(_,D,{passive:!0})});const B=()=>{document.hidden||N()};return document.addEventListener("visibilitychange",B),()=>{M.forEach(_=>{window.removeEventListener(_,D)}),document.removeEventListener("visibilitychange",B),g.current&&clearTimeout(g.current)}},[N]);k.useEffect(()=>{if(c&&c.accessToken){const M=localStorage.getItem("lastActivity");if(M){const B=parseInt(M,10),_=Date.now()-B;if(_>m){w();return}const G=m-_;g.current=setTimeout(w,G)}else N();return C()}else g.current&&clearTimeout(g.current)},[c,N,C,w,m]);const b=k.useCallback(M=>{d(M),M&&M.accessToken?(localStorage.setItem("auth",JSON.stringify(M)),N()):(localStorage.removeItem("auth"),localStorage.removeItem("lastActivity"),g.current&&clearTimeout(g.current))},[N]),S=k.useCallback(async()=>{try{await pe.post("/auth/logout",{credentials:"include",headers:{"Content-Type":"application/json"}})}catch(M){console.error("Logout error:",M)}finally{w()}},[w]),E={auth:c,setAuth:b,logout:S,resetActivityTimer:N};return e.jsx(br.Provider,{value:E,children:l})}const pe=Ba.create({baseURL:"https://apmt.apivcm.shop/api",withCredentials:!0});pe.interceptors.request.use(l=>{try{const c=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");c&&(l.headers=l.headers||{},l.headers.Authorization=`Bearer ${c}`)}catch{}return l},l=>Promise.reject(l));pe.interceptors.response.use(l=>l,async l=>{const c=l.config;if(l.response&&l.response.status===401&&!c?._retry){c._retry=!0;try{const f=(await pe.post("/auth/refresh")).data?.accessToken;if(f){try{localStorage.setItem("accessToken",f)}catch{}pe.defaults.headers.common.Authorization=`Bearer ${f}`,c.headers=c.headers||{},c.headers.Authorization=`Bearer ${f}`}return pe(c)}catch(d){try{window.location.href="/login"}catch{}return Promise.reject(d)}}return Promise.reject(l)});/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=l=>l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),av=l=>l.replace(/^([A-Z])|[\s-_]+(\w)/g,(c,d,f)=>f?f.toUpperCase():d.toLowerCase()),cm=l=>{const c=av(l);return c.charAt(0).toUpperCase()+c.slice(1)},X1=(...l)=>l.filter((c,d,f)=>!!c&&c.trim()!==""&&f.indexOf(c)===d).join(" ").trim(),rv=l=>{for(const c in l)if(c.startsWith("aria-")||c==="role"||c==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=k.forwardRef(({color:l="currentColor",size:c=24,strokeWidth:d=2,absoluteStrokeWidth:f,className:g="",children:m,iconNode:w,...N},C)=>k.createElement("svg",{ref:C,...sv,width:c,height:c,stroke:l,strokeWidth:f?Number(d)*24/Number(c):d,className:X1("lucide",g),...!m&&!rv(N)&&{"aria-hidden":"true"},...N},[...w.map(([b,S])=>k.createElement(b,S)),...Array.isArray(m)?m:[m]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(l,c)=>{const d=k.forwardRef(({className:f,...g},m)=>k.createElement(nv,{ref:m,iconNode:c,className:X1(`lucide-${tv(cm(l))}`,`lucide-${l}`,f),...g}));return d.displayName=cm(l),d};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lv=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],iv=Ke("activity",lv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],dm=Ke("arrow-big-right",ov);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],dv=Ke("arrow-down-right",cv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ad=Ke("arrow-left",uv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],hv=Ke("arrow-right",fv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Wn=Ke("arrow-up-right",xv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],mv=Ke("banknote-arrow-down",gv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pv=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],yv=Ke("bath",pv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],wv=Ke("bed",bv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Nv=Ke("bell",vv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jv=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],yf=Ke("briefcase",jv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],pr=Ke("building-2",Cv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Sd=Ke("building",kv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],wi=Ke("calendar",Av);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sv=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Ev=Ke("camera",Sv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],cd=Ke("chart-no-axes-column-increasing",Tv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _v=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ed=Ke("check",_v);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Eo=Ke("chevron-down",Mv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Fs=Ke("chevron-left",Dv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Z1=Ke("chevron-right",Rv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],To=Ke("chevron-up",Iv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Q1=Ke("circle-alert",Ov);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$n=Ke("circle-check-big",Bv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Fv=Ke("circle-x",Lv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bf=Ke("clock",Pv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Bf=Ke("credit-card",zv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uv=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],os=Ke("dollar-sign",Uv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Uo=Ke("download",Hv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],xn=Ke("eye-off",Vv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ds=Ke("eye",Gv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ya=Ke("file-text",qv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Xv=Ke("funnel",Yv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$1=Ke("globe",Zv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],$v=Ke("hash",Qv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],wr=Ke("house",Wv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],W1=Ke("id-card",Kv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],us=Ke("image",Jv);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],K1=Ke("key",eN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],J1=Ke("layers",tN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],kt=Ke("loader",aN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],um=Ke("log-out",rN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Sl=Ke("mail",sN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],_o=Ke("map-pin",nN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],ep=Ke("menu",lN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],fm=Ke("moon",iN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}]],cN=Ke("panel-left",oN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],uN=Ke("phone-call",dN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ho=Ke("phone",fN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],vr=Ke("plus",hN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Lf=Ke("qr-code",xN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],mr=Ke("receipt",gN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],wf=Ke("refresh-cw",mN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Ff=Ke("save",pN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],fs=Ke("search",yN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],tp=Ke("send",bN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],vf=Ke("settings",wN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Mo=Ke("shield",vN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],jN=Ke("square-check-big",NN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Nr=Ke("square-pen",CN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],hd=Ke("square",kN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],hm=Ke("sun",AN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Td=Ke("toggle-left",SN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EN=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],_d=Ke("toggle-right",EN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Na=Ke("trash-2",TN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],hs=Ke("upload",_N);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],DN=Ke("user-check",MN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m14.305 16.53.923-.382",key:"1itpsq"}],["path",{d:"m15.228 13.852-.923-.383",key:"eplpkm"}],["path",{d:"m16.852 12.228-.383-.923",key:"13v3q0"}],["path",{d:"m16.852 17.772-.383.924",key:"1i8mnm"}],["path",{d:"m19.148 12.228.383-.923",key:"1q8j1v"}],["path",{d:"m19.53 18.696-.382-.924",key:"vk1qj3"}],["path",{d:"m20.772 13.852.924-.383",key:"n880s0"}],["path",{d:"m20.772 16.148.924.383",key:"1g6xey"}],["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ap=Ke("user-cog",RN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Do=Ke("user-plus",IN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],BN=Ke("user-x",ON);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LN=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ps=Ke("user",LN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],zs=Ke("users",FN);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Qt=Ke("x",PN);function rp(l){var c,d,f="";if(typeof l=="string"||typeof l=="number")f+=l;else if(typeof l=="object")if(Array.isArray(l)){var g=l.length;for(c=0;c<g;c++)l[c]&&(d=rp(l[c]))&&(f&&(f+=" "),f+=d)}else for(d in l)l[d]&&(f&&(f+=" "),f+=d);return f}function kl(){for(var l,c,d=0,f="",g=arguments.length;d<g;d++)(l=arguments[d])&&(c=rp(l))&&(f&&(f+=" "),f+=c);return f}function zN(l){if(typeof document>"u")return;let c=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style");d.type="text/css",c.firstChild?c.insertBefore(d,c.firstChild):c.appendChild(d),d.styleSheet?d.styleSheet.cssText=l:d.appendChild(document.createTextNode(l))}zN(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Vo=l=>typeof l=="number"&&!isNaN(l),El=l=>typeof l=="string",gn=l=>typeof l=="function",UN=l=>El(l)||Vo(l),Nf=l=>El(l)||gn(l)?l:null,HN=(l,c)=>l===!1||Vo(l)&&l>0?l:c,jf=l=>k.isValidElement(l)||El(l)||gn(l)||Vo(l);function VN(l,c,d=300){let{scrollHeight:f,style:g}=l;requestAnimationFrame(()=>{g.minHeight="initial",g.height=f+"px",g.transition=`all ${d}ms`,requestAnimationFrame(()=>{g.height="0",g.padding="0",g.margin="0",setTimeout(c,d)})})}function GN({enter:l,exit:c,appendPosition:d=!1,collapse:f=!0,collapseDuration:g=300}){return function({children:m,position:w,preventExitTransition:N,done:C,nodeRef:b,isIn:S,playToast:E}){let M=d?`${l}--${w}`:l,D=d?`${c}--${w}`:c,B=k.useRef(0);return k.useLayoutEffect(()=>{let _=b.current,G=M.split(" "),R=z=>{z.target===b.current&&(E(),_.removeEventListener("animationend",R),_.removeEventListener("animationcancel",R),B.current===0&&z.type!=="animationcancel"&&_.classList.remove(...G))};_.classList.add(...G),_.addEventListener("animationend",R),_.addEventListener("animationcancel",R)},[]),k.useEffect(()=>{let _=b.current,G=()=>{_.removeEventListener("animationend",G),f?VN(_,C,g):C()};S||(N?G():(B.current=1,_.className+=` ${D}`,_.addEventListener("animationend",G)))},[S]),ra.createElement(ra.Fragment,null,m)}}function xm(l,c){return{content:sp(l.content,l.props),containerId:l.props.containerId,id:l.props.toastId,theme:l.props.theme,type:l.props.type,data:l.props.data||{},isLoading:l.props.isLoading,icon:l.props.icon,reason:l.removalReason,status:c}}function sp(l,c,d=!1){return k.isValidElement(l)&&!El(l.type)?k.cloneElement(l,{closeToast:c.closeToast,toastProps:c,data:c.data,isPaused:d}):gn(l)?l({closeToast:c.closeToast,toastProps:c,data:c.data,isPaused:d}):l}function qN({closeToast:l,theme:c,ariaLabel:d="close"}){return ra.createElement("button",{className:`Toastify__close-button Toastify__close-button--${c}`,type:"button",onClick:f=>{f.stopPropagation(),l(!0)},"aria-label":d},ra.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ra.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function YN({delay:l,isRunning:c,closeToast:d,type:f="default",hide:g,className:m,controlledProgress:w,progress:N,rtl:C,isIn:b,theme:S}){let E=g||w&&N===0,M={animationDuration:`${l}ms`,animationPlayState:c?"running":"paused"};w&&(M.transform=`scaleX(${N})`);let D=kl("Toastify__progress-bar",w?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${S}`,`Toastify__progress-bar--${f}`,{"Toastify__progress-bar--rtl":C}),B=gn(m)?m({rtl:C,type:f,defaultClassName:D}):kl(D,m),_={[w&&N>=1?"onTransitionEnd":"onAnimationEnd"]:w&&N<1?null:()=>{b&&d()}};return ra.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":E},ra.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${S} Toastify__progress-bar--${f}`}),ra.createElement("div",{role:"progressbar","aria-hidden":E?"true":"false","aria-label":"notification timer",className:B,style:M,..._}))}var XN=1,np=()=>`${XN++}`;function ZN(l,c,d){let f=1,g=0,m=[],w=[],N=c,C=new Map,b=new Set,S=z=>(b.add(z),()=>b.delete(z)),E=()=>{w=Array.from(C.values()),b.forEach(z=>z())},M=({containerId:z,toastId:F,updateId:V})=>{let Q=z?z!==l:l!==1,$=C.has(F)&&V==null;return Q||$},D=(z,F)=>{C.forEach(V=>{var Q;(F==null||F===V.props.toastId)&&((Q=V.toggle)==null||Q.call(V,z))})},B=z=>{var F,V;(V=(F=z.props)==null?void 0:F.onClose)==null||V.call(F,z.removalReason),z.isActive=!1},_=z=>{if(z==null)C.forEach(B);else{let F=C.get(z);F&&B(F)}E()},G=()=>{g-=m.length,m=[]},R=z=>{var F,V;let{toastId:Q,updateId:$}=z.props,P=$==null;z.staleId&&C.delete(z.staleId),z.isActive=!0,C.set(Q,z),E(),d(xm(z,P?"added":"updated")),P&&((V=(F=z.props).onOpen)==null||V.call(F))};return{id:l,props:N,observe:S,toggle:D,removeToast:_,toasts:C,clearQueue:G,buildToast:(z,F)=>{if(M(F))return;let{toastId:V,updateId:Q,data:$,staleId:P,delay:X}=F,Z=Q==null;Z&&g++;let de={...N,style:N.toastStyle,key:f++,...Object.fromEntries(Object.entries(F).filter(([re,le])=>le!=null)),toastId:V,updateId:Q,data:$,isIn:!1,className:Nf(F.className||N.toastClassName),progressClassName:Nf(F.progressClassName||N.progressClassName),autoClose:F.isLoading?!1:HN(F.autoClose,N.autoClose),closeToast(re){C.get(V).removalReason=re,_(V)},deleteToast(){let re=C.get(V);if(re!=null){if(d(xm(re,"removed")),C.delete(V),g--,g<0&&(g=0),m.length>0){R(m.shift());return}E()}}};de.closeButton=N.closeButton,F.closeButton===!1||jf(F.closeButton)?de.closeButton=F.closeButton:F.closeButton===!0&&(de.closeButton=jf(N.closeButton)?N.closeButton:!0);let he={content:z,props:de,staleId:P};N.limit&&N.limit>0&&g>N.limit&&Z?m.push(he):Vo(X)?setTimeout(()=>{R(he)},X):R(he)},setProps(z){N=z},setToggle:(z,F)=>{let V=C.get(z);V&&(V.toggle=F)},isToastActive:z=>{var F;return(F=C.get(z))==null?void 0:F.isActive},getSnapshot:()=>w}}var yr=new Map,Ro=[],Cf=new Set,QN=l=>Cf.forEach(c=>c(l)),lp=()=>yr.size>0;function $N(){Ro.forEach(l=>op(l.content,l.options)),Ro=[]}var WN=(l,{containerId:c})=>{var d;return(d=yr.get(c||1))==null?void 0:d.toasts.get(l)};function ip(l,c){var d;if(c)return!!((d=yr.get(c))!=null&&d.isToastActive(l));let f=!1;return yr.forEach(g=>{g.isToastActive(l)&&(f=!0)}),f}function KN(l){if(!lp()){Ro=Ro.filter(c=>l!=null&&c.options.toastId!==l);return}if(l==null||UN(l))yr.forEach(c=>{c.removeToast(l)});else if(l&&("containerId"in l||"id"in l)){let c=yr.get(l.containerId);c?c.removeToast(l.id):yr.forEach(d=>{d.removeToast(l.id)})}}var JN=(l={})=>{yr.forEach(c=>{c.props.limit&&(!l.containerId||c.id===l.containerId)&&c.clearQueue()})};function op(l,c){jf(l)&&(lp()||Ro.push({content:l,options:c}),yr.forEach(d=>{d.buildToast(l,c)}))}function e3(l){var c;(c=yr.get(l.containerId||1))==null||c.setToggle(l.id,l.fn)}function cp(l,c){yr.forEach(d=>{(c==null||!(c!=null&&c.containerId)||c?.containerId===d.id)&&d.toggle(l,c?.id)})}function t3(l){let c=l.containerId||1;return{subscribe(d){let f=ZN(c,l,QN);yr.set(c,f);let g=f.observe(d);return $N(),()=>{g(),yr.delete(c)}},setProps(d){var f;(f=yr.get(c))==null||f.setProps(d)},getSnapshot(){var d;return(d=yr.get(c))==null?void 0:d.getSnapshot()}}}function a3(l){return Cf.add(l),()=>{Cf.delete(l)}}function r3(l){return l&&(El(l.toastId)||Vo(l.toastId))?l.toastId:np()}function Go(l,c){return op(l,c),c.toastId}function Md(l,c){return{...c,type:c&&c.type||l,toastId:r3(c)}}function Dd(l){return(c,d)=>Go(c,Md(l,d))}function se(l,c){return Go(l,Md("default",c))}se.loading=(l,c)=>Go(l,Md("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...c}));function s3(l,{pending:c,error:d,success:f},g){let m;c&&(m=El(c)?se.loading(c,g):se.loading(c.render,{...g,...c}));let w={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},N=(b,S,E)=>{if(S==null){se.dismiss(m);return}let M={type:b,...w,...g,data:E},D=El(S)?{render:S}:S;return m?se.update(m,{...M,...D}):se(D.render,{...M,...D}),E},C=gn(l)?l():l;return C.then(b=>N("success",f,b)).catch(b=>N("error",d,b)),C}se.promise=s3;se.success=Dd("success");se.info=Dd("info");se.error=Dd("error");se.warning=Dd("warning");se.warn=se.warning;se.dark=(l,c)=>Go(l,Md("default",{theme:"dark",...c}));function n3(l){KN(l)}se.dismiss=n3;se.clearWaitingQueue=JN;se.isActive=ip;se.update=(l,c={})=>{let d=WN(l,c);if(d){let{props:f,content:g}=d,m={delay:100,...f,...c,toastId:c.toastId||l,updateId:np()};m.toastId!==l&&(m.staleId=l);let w=m.render||g;delete m.render,Go(w,m)}};se.done=l=>{se.update(l,{progress:1})};se.onChange=a3;se.play=l=>cp(!0,l);se.pause=l=>cp(!1,l);function l3(l){var c;let{subscribe:d,getSnapshot:f,setProps:g}=k.useRef(t3(l)).current;g(l);let m=(c=k.useSyncExternalStore(d,f,f))==null?void 0:c.slice();function w(N){if(!m)return[];let C=new Map;return l.newestOnTop&&m.reverse(),m.forEach(b=>{let{position:S}=b.props;C.has(S)||C.set(S,[]),C.get(S).push(b)}),Array.from(C,b=>N(b[0],b[1]))}return{getToastToRender:w,isToastActive:ip,count:m?.length}}function i3(l){let[c,d]=k.useState(!1),[f,g]=k.useState(!1),m=k.useRef(null),w=k.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:N,pauseOnHover:C,closeToast:b,onClick:S,closeOnClick:E}=l;e3({id:l.toastId,containerId:l.containerId,fn:d}),k.useEffect(()=>{if(l.pauseOnFocusLoss)return M(),()=>{D()}},[l.pauseOnFocusLoss]);function M(){document.hasFocus()||R(),window.addEventListener("focus",G),window.addEventListener("blur",R)}function D(){window.removeEventListener("focus",G),window.removeEventListener("blur",R)}function B(P){if(l.draggable===!0||l.draggable===P.pointerType){z();let X=m.current;w.canCloseOnClick=!0,w.canDrag=!0,X.style.transition="none",l.draggableDirection==="x"?(w.start=P.clientX,w.removalDistance=X.offsetWidth*(l.draggablePercent/100)):(w.start=P.clientY,w.removalDistance=X.offsetHeight*(l.draggablePercent===80?l.draggablePercent*1.5:l.draggablePercent)/100)}}function _(P){let{top:X,bottom:Z,left:de,right:he}=m.current.getBoundingClientRect();P.nativeEvent.type!=="touchend"&&l.pauseOnHover&&P.clientX>=de&&P.clientX<=he&&P.clientY>=X&&P.clientY<=Z?R():G()}function G(){d(!0)}function R(){d(!1)}function z(){w.didMove=!1,document.addEventListener("pointermove",V),document.addEventListener("pointerup",Q)}function F(){document.removeEventListener("pointermove",V),document.removeEventListener("pointerup",Q)}function V(P){let X=m.current;if(w.canDrag&&X){w.didMove=!0,c&&R(),l.draggableDirection==="x"?w.delta=P.clientX-w.start:w.delta=P.clientY-w.start,w.start!==P.clientX&&(w.canCloseOnClick=!1);let Z=l.draggableDirection==="x"?`${w.delta}px, var(--y)`:`0, calc(${w.delta}px + var(--y))`;X.style.transform=`translate3d(${Z},0)`,X.style.opacity=`${1-Math.abs(w.delta/w.removalDistance)}`}}function Q(){F();let P=m.current;if(w.canDrag&&w.didMove&&P){if(w.canDrag=!1,Math.abs(w.delta)>w.removalDistance){g(!0),l.closeToast(!0),l.collapseAll();return}P.style.transition="transform 0.2s, opacity 0.2s",P.style.removeProperty("transform"),P.style.removeProperty("opacity")}}let $={onPointerDown:B,onPointerUp:_};return N&&C&&($.onMouseEnter=R,l.stacked||($.onMouseLeave=G)),E&&($.onClick=P=>{S&&S(P),w.canCloseOnClick&&b(!0)}),{playToast:G,pauseToast:R,isRunning:c,preventExitTransition:f,toastRef:m,eventHandlers:$}}var o3=typeof window<"u"?k.useLayoutEffect:k.useEffect,Rd=({theme:l,type:c,isLoading:d,...f})=>ra.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:l==="colored"?"currentColor":`var(--toastify-icon-color-${c})`,...f});function c3(l){return ra.createElement(Rd,{...l},ra.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function d3(l){return ra.createElement(Rd,{...l},ra.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function u3(l){return ra.createElement(Rd,{...l},ra.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function f3(l){return ra.createElement(Rd,{...l},ra.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function h3(){return ra.createElement("div",{className:"Toastify__spinner"})}var kf={info:d3,warning:c3,success:u3,error:f3,spinner:h3},x3=l=>l in kf;function g3({theme:l,type:c,isLoading:d,icon:f}){let g=null,m={theme:l,type:c};return f===!1||(gn(f)?g=f({...m,isLoading:d}):k.isValidElement(f)?g=k.cloneElement(f,m):d?g=kf.spinner():x3(c)&&(g=kf[c](m))),g}var m3=l=>{let{isRunning:c,preventExitTransition:d,toastRef:f,eventHandlers:g,playToast:m}=i3(l),{closeButton:w,children:N,autoClose:C,onClick:b,type:S,hideProgressBar:E,closeToast:M,transition:D,position:B,className:_,style:G,progressClassName:R,updateId:z,role:F,progress:V,rtl:Q,toastId:$,deleteToast:P,isIn:X,isLoading:Z,closeOnClick:de,theme:he,ariaLabel:re}=l,le=kl("Toastify__toast",`Toastify__toast-theme--${he}`,`Toastify__toast--${S}`,{"Toastify__toast--rtl":Q},{"Toastify__toast--close-on-click":de}),W=gn(_)?_({rtl:Q,position:B,type:S,defaultClassName:le}):kl(le,_),U=g3(l),H=!!V||!C,ee={closeToast:M,type:S,theme:he},oe=null;return w===!1||(gn(w)?oe=w(ee):k.isValidElement(w)?oe=k.cloneElement(w,ee):oe=qN(ee)),ra.createElement(D,{isIn:X,done:P,position:B,preventExitTransition:d,nodeRef:f,playToast:m},ra.createElement("div",{id:$,tabIndex:0,onClick:b,"data-in":X,className:W,...g,style:G,ref:f,...X&&{role:F,"aria-label":re}},U!=null&&ra.createElement("div",{className:kl("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!Z})},U),sp(N,l,!c),oe,!l.customProgressBar&&ra.createElement(YN,{...z&&!H?{key:`p-${z}`}:{},rtl:Q,theme:he,delay:C,isRunning:c,isIn:X,closeToast:M,hide:E,type:S,className:R,controlledProgress:H,progress:V||0})))},p3=(l,c=!1)=>({enter:`Toastify--animate Toastify__${l}-enter`,exit:`Toastify--animate Toastify__${l}-exit`,appendPosition:c}),y3=GN(p3("bounce",!0)),b3={position:"top-right",transition:y3,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:l=>l.altKey&&l.code==="KeyT"};function qt(l){let c={...b3,...l},d=l.stacked,[f,g]=k.useState(!0),m=k.useRef(null),{getToastToRender:w,isToastActive:N,count:C}=l3(c),{className:b,style:S,rtl:E,containerId:M,hotKeys:D}=c;function B(G){let R=kl("Toastify__toast-container",`Toastify__toast-container--${G}`,{"Toastify__toast-container--rtl":E});return gn(b)?b({position:G,rtl:E,defaultClassName:R}):kl(R,Nf(b))}function _(){d&&(g(!0),se.play())}return o3(()=>{var G;if(d){let R=m.current.querySelectorAll('[data-in="true"]'),z=12,F=(G=c.position)==null?void 0:G.includes("top"),V=0,Q=0;Array.from(R).reverse().forEach(($,P)=>{let X=$;X.classList.add("Toastify__toast--stacked"),P>0&&(X.dataset.collapsed=`${f}`),X.dataset.pos||(X.dataset.pos=F?"top":"bot");let Z=V*(f?.2:1)+(f?0:z*P);X.style.setProperty("--y",`${F?Z:Z*-1}px`),X.style.setProperty("--g",`${z}`),X.style.setProperty("--s",`${1-(f?Q:0)}`),V+=X.offsetHeight,Q+=.025})}},[f,C,d]),k.useEffect(()=>{function G(R){var z;let F=m.current;D(R)&&((z=F.querySelector('[tabIndex="0"]'))==null||z.focus(),g(!1),se.pause()),R.key==="Escape"&&(document.activeElement===F||F!=null&&F.contains(document.activeElement))&&(g(!0),se.play())}return document.addEventListener("keydown",G),()=>{document.removeEventListener("keydown",G)}},[D]),ra.createElement("section",{ref:m,className:"Toastify",id:M,onMouseEnter:()=>{d&&(g(!1),se.pause())},onMouseLeave:_,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":c["aria-label"]},w((G,R)=>{let z=R.length?{...S}:{...S,pointerEvents:"none"};return ra.createElement("div",{tabIndex:-1,className:B(G),"data-stacked":d,style:z,key:`c-${G}`},R.map(({content:F,props:V})=>ra.createElement(m3,{...V,stacked:d,collapseAll:_,isIn:N(V.toastId,V.containerId),key:`t-${V.key}`},F)))}))}function w3(){const{setAuth:l}=k.useContext(br),[c,d]=k.useState(""),[f,g]=k.useState(""),[m,w]=k.useState(!1),[N,C]=k.useState(null),[b,S]=k.useState(!1),[E,M]=k.useState(!1),[D,B]=k.useState(!1),[_,G]=k.useState(!1),[R,z]=k.useState(0),F=ia();let[V,Q]=bd();k.useEffect(()=>{const re=V.get("token"),le=V.get("id");re&&le&&$(re,le)},[V]),k.useEffect(()=>{try{const re=localStorage.getItem("rateLimitedUntil");if(re){const le=Number(re)-Date.now();if(le>0){const W=Math.ceil(le/1e3);G(!0),z(W);let U=W;const H=setInterval(()=>{U-=1,z(U),U<=0&&(clearInterval(H),G(!1),z(0),localStorage.removeItem("rateLimitedUntil"))},1e3);return()=>clearInterval(H)}else localStorage.removeItem("rateLimitedUntil")}}catch(re){console.warn("Could not read rate limit info:",re)}},[]);const $=async(re,le)=>{S(!0),C(null);try{await pe.post("/auth/verify",{token:re,id:le}),se.success("Email verified successfully! You can now log in."),Q({})}catch(W){se.error(W.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{S(!1)}};async function P(re){if(re.preventDefault(),!(b||_)){C(null),S(!0);try{const le=await pe.post("/auth/login",{email:c,password:f});if(l({accessToken:le.data.accessToken,user:le.data.user}),se.success("Login Successful!"),le.data.accessToken)try{localStorage.setItem("accessToken",le.data.accessToken),localStorage.setItem("user",JSON.stringify(le.data.user))}catch(W){console.warn("Could not save to localStorage:",W)}return X(le.data.user.role)}catch(le){if(le.response?.status===429){const U=le.response?.headers?.["retry-after"],H=U?Math.max(1,Number(U)):60;se.error(`Too many requests. Please wait ${H}s before trying again.`),G(!0),z(H);try{localStorage.setItem("rateLimitedUntil",Date.now()+H*1e3)}catch(we){console.warn("Could not save rate limit info:",we)}let ee=H;const oe=setInterval(()=>{if(ee-=1,z(ee),ee<=0){clearInterval(oe),G(!1),z(0);try{localStorage.removeItem("rateLimitedUntil")}catch(we){console.warn("Could not clear rate limit info:",we)}}},1e3)}else{const U=le.response?.data?.message||"Login failed";C(U),se.error(U),(U.includes("verify")||U.includes("verified"))&&se.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:Z,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:E,children:E?"Sending...":"Resend Verification"})]}),{autoClose:5e3})}}finally{S(!1),B(!1)}}}const X=re=>{F(re==="Admin"?"/admindashboard":"/employee-dashboard")},Z=async re=>{if(re.preventDefault(),!c){se.error("Please enter your email first");return}M(!0);try{await pe.post("/auth/resend",{email:c}),se.success("Verification email sent! Please check your inbox.")}catch(le){se.error(le.response?.data?.message||"Failed to resend verification email")}finally{M(!1)}},de=()=>{F("/forgot-password")},he=()=>{F("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),b&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:P,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:c,onChange:re=>d(re.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:f,onChange:re=>g(re.target.value),placeholder:"Password",type:m?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>w(!m),className:"passwordToggle","aria-label":m?"Hide password":"Show password",children:m?e.jsx(xn,{size:20}):e.jsx(ds,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:b||_,children:_?`Try again in ${R}s`:b?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:he,disabled:b,children:"Cancel"})]})]}),N&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:N}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:de,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email? ",e.jsx("button",{type:"button",onClick:Z,disabled:E,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:E?"Sending...":"Resend"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function v3(){const[l,c]=k.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[d,f]=k.useState({regNo:"",name:"",address:""}),[g,m]=k.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[w,N]=k.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[C,b]=k.useState(1),[S,E]=k.useState(!1),[M,D]=k.useState(!1),[B,_]=k.useState([]);k.useEffect(()=>{(async()=>{try{const U=await pe.get("/countries");_(U.data.data)}catch(U){console.error("Error fetching countries:",U)}})()},[]);const G=W=>{const U=W.target.value,H=B.find(ee=>ee.id.toString()===U);H&&c(ee=>({...ee,country:H.country_name,mobile:H.phone_code}))},R=ia(),z=3,F=(W,U)=>{let H="";switch(W){case"firstname":U.trim()?U.length<3?H="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(U)?U.length>20&&(H="First name cannot exceed 20 characters"):H="First name can only contain letters, and numbers":H="First name is required";break;case"lastname":U.trim()?U.length<3?H="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(U)?U.length>20&&(H="Last name cannot exceed 20 characters"):H="Last name can only contain letters, and numbers":H="Last name is required";break;case"country":U.trim()||(H="Country is required");break;case"mobile":U.trim()?/^\+\d{2} \d{9}$/.test(U)?U.length>15&&(H="Mobile cannot exceed 15 digits"):H="Mobile must be in format +XX XXXXXXXXX":H="Mobile Number is required";break;case"email":U.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U)||(H="Please enter a valid email address"):H="Email is required";break;case"password":U?U.length<8?H="Password must be at least 8 characters":/(?=.*[a-z])/.test(U)?/(?=.*[A-Z])/.test(U)?/(?=.*\d)/.test(U)?/(?=.*[@$!%*?&])/.test(U)||(H="Password must contain at least one special character (@$!%*?&)"):H="Password must contain at least one number":H="Password must contain at least one uppercase letter":H="Password must contain at least one lowercase letter":H="Password is required";break;case"confirmPassword":U?U!==l.password&&(H="Passwords do not match"):H="Please confirm your password";break;case"regNo":U.trim()?U.length<2&&(H="Business REgistration No must be at least 2 characters"):H="Business Registration No is required";break;case"name":U.trim()?U.length<2&&(H="Company name must be at least 2 characters"):H="Company name is required";break;case"address":U.trim()?U.length<3&&(H="Company address must be at least 3 characters"):H="Company address is required";break}return H},V=(W,U=!1)=>{const{name:H,value:ee}=W.target;if(U?f(oe=>({...oe,[H]:ee})):c(oe=>({...oe,[H]:ee})),w[H]){const oe=F(H,ee);m(we=>({...we,[H]:oe}))}},Q=(W,U=!1)=>{const{name:H}=W.target;N(we=>({...we,[H]:!0}));const ee=U?d[H]:l[H],oe=F(H,ee);m(we=>({...we,[H]:oe}))},$=W=>{if(c(U=>({...U,confirmPassword:W})),w.confirmPassword){const U=F("confirmPassword",W);m(H=>({...H,confirmPassword:U}))}},P=W=>{const U={},H={};let ee=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[W].forEach(we=>{H[we]=!0;const K=we in d?d[we]:l[we],ge=F(we,K);U[we]=ge,ge&&(ee=!1)}),N(we=>({...we,...H})),m(we=>({...we,...U})),ee},X=()=>{P(C)?b(C+1):se.error("Please fix the validation errors before proceeding")},Z=()=>{b(C-1)};async function de(W){W.preventDefault();let U=!0;for(let H=1;H<=z;H++)if(!P(H)){U=!1,H!==C&&b(H);break}if(!U){se.error("Please fix all validation errors before submitting");return}try{const H={regNo:d.regNo,name:d.name,address:d.address};console.log("Sending company data to /tenants:",H);const ee=await pe.post("/tenants",H);console.log("Company registration successful:",ee.data);const oe=ee.data.data.id,we=await pe.post("/auth/register",{firstname:l.firstname,lastname:l.lastname,country:l.country,mobile:l.mobile,email:l.email,password:l.password,company_id:oe});console.log("User registration successful:",we.data),se.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>R("/login"),3e3)}catch(H){console.error("Registration error:",H),H.response?.status===403?se.error("Access denied. Please try registering again."):H.response?.data?.message?se.error(H.response.data.message):se.error("Registration failed. Please try again.")}}const re=(()=>{if(!l.password)return{strength:0,label:""};let W=0;return l.password.length>=8&&W++,/(?=.*[a-z])/.test(l.password)&&W++,/(?=.*[A-Z])/.test(l.password)&&W++,/(?=.*\d)/.test(l.password)&&W++,/(?=.*[@$!%*?&])/.test(l.password)&&W++,{strength:W,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][W]}})(),le=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:le.map(W=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${C>=W.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:W.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:W.title})]},W.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(C-1)/(z-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:de,className:"loginForm",children:[C===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:d.regNo,onChange:W=>V(W,!0),onBlur:W=>Q(W,!0),placeholder:"Company Registration No *",className:`loginInput ${g.regNo?"border-red-500":w.regNo&&"border-green-500"}`}),w.regNo&&g.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:d.name,onChange:W=>V(W,!0),onBlur:W=>Q(W,!0),placeholder:"Company Name *",className:`loginInput ${g.name?"border-red-500":w.name&&"border-green-500"}`}),w.name&&g.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:d.address,onChange:W=>V(W,!0),onBlur:W=>Q(W,!0),placeholder:"Company Address *",className:`loginInput ${g.address?"border-red-500":w.address&&"border-green-500"}`}),w.businessInfo&&g.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.businessInfo]})]})]}),C===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:l.firstname,onChange:W=>V(W,!1),onBlur:W=>Q(W,!1),placeholder:"First Name *",className:`loginInput ${g.firstname?"border-red-500":w.firstname&&"border-green-500"}`}),w.firstname&&g.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:l.lastname,onChange:W=>V(W,!1),onBlur:W=>Q(W,!1),placeholder:"Last Name *",className:`loginInput ${g.lastname?"border-red-500":w.lastname&&"border-green-500"}`}),w.lastname&&g.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.lastname]})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"country",value:B.find(W=>W.country_name===l.country)?.id||"",onChange:G,onBlur:W=>Q(W,!1),className:`loginInput ${g.country?"border-red-500":w.country&&"border-green-500"}`,children:[e.jsx("option",{value:"",children:"Select country *"}),B.map(W=>e.jsx("option",{value:W.id,children:W.country_name},W.id))]}),w.country&&g.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:l.mobile,onChange:W=>V(W,!1),onBlur:W=>Q(W,!1),placeholder:"Mobile *",className:`loginInput ${g.mobile?"border-red-500":w.mobile&&"border-green-500"}`}),w.mobile&&g.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:l.email,onChange:W=>V(W,!1),onBlur:W=>Q(W,!1),placeholder:"Email *",className:`loginInput ${g.email?"border-red-500":w.email&&"border-green-500"}`}),w.email&&g.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.email]})]})]}),C===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:l.password,onChange:W=>V(W,!1),onBlur:W=>Q(W,!1),placeholder:"Password *",type:S?"text":"password",className:`loginInput ${g.password?"border-red-500":w.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>E(!S),className:"passwordToggle","aria-label":S?"Hide password":"Show password",children:S?e.jsx(xn,{size:20}):e.jsx(ds,{size:20})})]}),w.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",re.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${re.strength<2?"bg-red-500":re.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${re.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),w.password&&g.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:l.confirmPassword,onChange:W=>$(W.target.value),onBlur:()=>N(W=>({...W,confirmPassword:!0})),placeholder:"Confirm Password *",type:M?"text":"password",className:`loginInput ${g.confirmPassword?"border-red-500":w.confirmPassword&&l.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>D(!M),className:"passwordToggle","aria-label":M?"Hide password":"Show password",children:M?e.jsx(xn,{size:20}):e.jsx(ds,{size:20})})]}),w.confirmPassword&&g.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(Qt,{size:14,className:"mr-1"})," ",g.confirmPassword]}),w.confirmPassword&&!g.confirmPassword&&l.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(Ed,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[C>1&&e.jsxs("button",{type:"button",onClick:Z,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(Fs,{size:18,className:"mr-1"}),"Back"]}),C<z?e.jsxs("button",{type:"button",onClick:X,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(Z1,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>R("/"),children:"Cancel"})]})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function N3(){const[l]=bd(),c=ia(),[d,f]=k.useState(!1),[g,m]=k.useState("");k.useEffect(()=>{const N=l.get("token"),C=l.get("id");N&&C&&w(N,C)},[l]);const w=async(N,C)=>{try{f(!0);const b=await pe.post("/auth/verify",{token:N,id:C});m(b.data.message),se.success("Email verified successfully!"),setTimeout(()=>{c("/login")},3e3)}catch(b){console.error("Verification error:",b),m(b.response?.data?.message||"Verification failed"),se.error("Email verification failed")}finally{f(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),d?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):g?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:g}),e.jsx("button",{onClick:()=>c("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function Ta(){const[l,c]=k.useState(!1),[d,f]=k.useState(!1),{auth:g,setAuth:m}=k.useContext(br),{logout:w,resetActivityTimer:N}=k.useContext(br),C=ia(),[b,S]=k.useState(!1);k.useEffect(()=>{const _=localStorage.getItem("theme"),G=window.matchMedia("(prefers-color-scheme: dark)").matches;_==="dark"||!_&&G?(f(!0),document.documentElement.classList.add("dark")):(f(!1),document.documentElement.classList.remove("dark"))},[]),k.useEffect(()=>{if(!g.accessToken)return;const _=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],G=()=>N();_.forEach(z=>window.addEventListener(z,G,{passive:!0}));const R=()=>{document.hidden||N()};return document.addEventListener("visibilitychange",R),()=>{_.forEach(z=>window.removeEventListener(z,G)),document.removeEventListener("visibilitychange",R)}},[g.accessToken,N]);const E=async()=>{try{await pe.post("/auth/logout"),w(),se.success("Logged out successfully"),C("/")}catch(_){console.error("Logout error:",_),w(),se.success("Logged out successfully"),C("/")}},M=()=>{S(!0)},D=()=>{S(!1)},B=()=>{const _=!d;f(_),_?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:()=>c(!l),className:"lg:hidden p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",children:l?e.jsx(Qt,{size:24}):e.jsx(ep,{size:24})}),e.jsx("div",{className:"hidden md:block relative ml-4"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:B,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:d?"Switch to light mode":"Switch to dark mode",children:d?e.jsx(hm,{size:20}):e.jsx(fm,{size:20})}),e.jsxs("button",{className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",children:[e.jsx(Nv,{size:20}),e.jsx("span",{className:"absolute top-0 right-0 h-4 w-4 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:"3"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:g?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:g?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:g?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:M,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(um,{size:20})})})]})]})}),l&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(fs,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:B,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[d?e.jsx(hm,{size:18,className:"mr-2"}):e.jsx(fm,{size:18,className:"mr-2"}),d?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:M,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(um,{size:18,className:"mr-2"}),"Logout"]})})]})}),b&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:D,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function xa(){const{auth:l}=k.useContext(br),c=Vs(),[d,f]=k.useState(!1),[g,m]=k.useState(null),[w,N]=k.useState([]),[C,b]=k.useState(!0),[S,E]=k.useState(Date.now()),[M,D]=k.useState(!1),[B,_]=k.useState(!1),G=l?.user?.role||"Admin",R=l?.user?.id;k.useEffect(()=>{const U=()=>{_(window.innerWidth<1024)};return U(),window.addEventListener("resize",U),()=>window.removeEventListener("resize",U)},[]),k.useEffect(()=>{D(!1)},[c.pathname]);const z=["employee_dashboard","profile"],F={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:wr,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:vf,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:wr,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:vf,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:zs,isConstant:!1},role_management:{id:"role_management",name:"Roles",path:"/role",icon:ap,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:pr,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:mv,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:zs,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:pr,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:Bf,isConstant:!1}},V=()=>["admin_dashboard","users_management","role_management","apartments_management","expenses_management","admin_profile"],Q=async()=>{try{if(b(!0),console.log("Fetching components for role:",G),G==="Admin"){N(V()),b(!1);return}try{const U=await pe.get("/role-components/user/components");if(console.log("API Response:",U.data),U.data.success){const H=U.data.data||[];console.log("Components from API:",H);const ee=H.filter(we=>!z.includes(we)),oe=[...z,...ee];console.log("Final components to set:",oe),N(oe)}else console.error("API returned error:",U.data.message),N([...z])}catch(U){console.error("Error fetching user components",U),N([...z])}}catch(U){console.error("Error in fetchUserComponents",U),N(G==="Admin"?V():[...z])}finally{b(!1)}};k.useEffect(()=>{Q()},[G,R,S]);const $=()=>{E(Date.now())},X=(()=>{const U=w.map(H=>F[H]).filter(Boolean);return console.log("Built navigation items:",U),U})(),Z=U=>c.pathname===U,de=U=>m(g===U?null:U),he=()=>D(!M),re=()=>e.jsx("button",{onClick:he,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:M?e.jsx(Qt,{size:24}):e.jsx(ep,{size:24})}),le=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${d?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!d&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:$,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(wf,{size:16})})]}),d&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})}),e.jsx("button",{onClick:()=>f(!d),className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:d?e.jsx(Z1,{size:20}):e.jsx(Fs,{size:20})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:C?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!d&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):X.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):X.map(U=>{if(!U)return null;const H=U.icon;if(U.children){const ee=U.children.some(oe=>oe.path&&Z(oe.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>de(U.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${g===U.name||ee?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:20,className:d?"mx-auto":"mr-3"}),!d&&e.jsx("span",{children:U.name})]}),!d&&U.children&&U.children.length>0&&(g===U.name?e.jsx(To,{size:16}):e.jsx(Eo,{size:16}))]}),g===U.name&&!d&&U.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:U.children.map(oe=>e.jsx(yi,{to:oe.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${Z(oe.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:oe.name},oe.name))})]},U.id)}return e.jsxs(yi,{to:U.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${Z(U.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(H,{size:20,className:d?"mx-auto":"mr-3"}),!d&&e.jsx("span",{children:U.name})]},U.id)})})]}),W=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:M?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:$,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(wf,{size:16})}),e.jsx("button",{onClick:he,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx(Qt,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:C?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):X.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):X.map(U=>{if(!U)return null;const H=U.icon;if(U.children){const ee=U.children.some(oe=>oe.path&&Z(oe.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>de(U.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${g===U.name||ee?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{size:20,className:"mr-3"}),e.jsx("span",{children:U.name})]}),U.children&&U.children.length>0&&(g===U.name?e.jsx(To,{size:16}):e.jsx(Eo,{size:16}))]}),g===U.name&&U.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:U.children.map(oe=>e.jsx(yi,{to:oe.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${Z(oe.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:oe.name},oe.name))})]},U.id)}return e.jsxs(yi,{to:U.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${Z(U.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(H,{size:20,className:"mr-3"}),e.jsx("span",{children:U.name})]},U.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(re,{}),M&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:he}),e.jsx(W,{}),e.jsx(le,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function j3(){const[l,c]=k.useState(!1),d=ia(),[f,g]=k.useState([]),[m,w]=k.useState([]),[N,C]=k.useState([]),[b,S]=k.useState([]),[E,M]=k.useState(!0),[D,B]=k.useState(null),_={USER_REGISTERED:{icon:Do,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_UPDATED:{icon:Nr,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},USER_DELETED:{icon:Na,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},USER_VERIFIED:{icon:DN,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_DEACTIVATED:{icon:BN,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},APARTMENT_CREATED:{icon:pr,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",trend:"up"},APARTMENT_UPDATED:{icon:pr,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},APARTMENT_DELETED:{icon:pr,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},PASSWORD_RESET:{icon:K1,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30",trend:"up"},EMAIL_SENT:{icon:Sl,color:"text-indigo-600",bgColor:"bg-indigo-100 dark:bg-indigo-900/30",trend:"up"}},G=(H,ee)=>({USER_REGISTERED:`New user registered: ${ee.email}`,USER_UPDATED:`User updated: ${ee.email}`,USER_DELETED:`User deleted: ${ee.email}`,USER_VERIFIED:`User verified: ${ee.email}`,USER_DEACTIVATED:`User deactivated: ${ee.email}`,APARTMENT_CREATED:`New apartment created: ${ee.name}`,APARTMENT_UPDATED:`Apartment updated: ${ee.name}`,APARTMENT_DELETED:`Apartment deleted: ${ee.name}`,PASSWORD_RESET:`Password reset requested for: ${ee.email}`,EMAIL_SENT:`Verification email sent to: ${ee.email}`})[H]||"Activity recorded",R=(H,ee)=>{const oe={id:Date.now(),type:H,action:G(H,ee),time:"Just now",timestamp:new Date,..._[H]};S(we=>[oe,...we.slice(0,9)])},z=H=>{const oe=Math.floor((new Date-new Date(H))/1e3);return oe<60?"Just now":oe<3600?`${Math.floor(oe/60)} minutes ago`:oe<86400?`${Math.floor(oe/3600)} hours ago`:`${Math.floor(oe/86400)} days ago`};k.useEffect(()=>{const H=setInterval(()=>{S(ee=>ee.map(oe=>({...oe,time:z(oe.timestamp)})))},6e4);return()=>clearInterval(H)},[]);const F=async()=>{try{const H=await pe.get("/apartments");console.log("Apartments API Response:",H.data),H.data.success&&Array.isArray(H.data.data)?(g(H.data.data),H.data.data.length>0&&R("APARTMENT_CREATED",{name:`${H.data.data.length} apartments loaded`})):Array.isArray(H.data)?g(H.data):(console.warn("Unexpected apartments response format:",H.data),g([]))}catch(H){console.error("Error loading apartments:",H),H.response?.status===401?(B("Unauthorized. Please login again."),d("/login")):H.response?.status===400?B("Company information missing. Please contact support."):B("Failed to load apartments. Please try again.")}},V=async()=>{try{const H=await pe.get("/auth/users");if(console.log("Users API Response:",H.data),H.data.success&&Array.isArray(H.data.data)){const ee=H.data.data;w(ee),ee.length>0&&R("USER_REGISTERED",{email:`${ee.length} users loaded`}),ee.filter(we=>we.is_verified&&!m.find(K=>K.id===we.id&&K.is_verified)).forEach(we=>{R("USER_VERIFIED",{email:we.email})})}else console.warn("Unexpected users response format:",H.data),w([])}catch(H){console.error("Error in fetching users:",H),B("Failed to load users. Please try again.")}},Q=async()=>{try{const H=await pe.get("/roles");H.data.success&&Array.isArray(H.data.data)?C(H.data.data):C([])}catch(H){console.error("Error loading roles:",H)}},$=()=>{try{const H=localStorage.getItem("recentActivities");if(H){const oe=JSON.parse(H).map(we=>({...we,time:z(we.timestamp),..._[we.type]}));S(oe)}}catch(H){console.error("Error loading recent activities:",H)}};k.useEffect(()=>{b.length>0&&localStorage.setItem("recentActivities",JSON.stringify(b))},[b]);const P=async()=>{try{M(!0),B(null),$(),await Promise.all([F(),V(),Q()]),R("EMAIL_SENT",{email:"System initialized successfully"})}catch(H){console.error("Error loading dashboard data:",H),B("Failed to load dashboard data")}finally{M(!1)}};k.useEffect(()=>{E||[{type:"USER_REGISTERED",data:{email:"demo@example.com"}},{type:"APARTMENT_CREATED",data:{name:"Demo Apartment"}},{type:"EMAIL_SENT",data:{email:"user@example.com"}}].forEach((ee,oe)=>{setTimeout(()=>{R(ee.type,ee.data)},(oe+1)*5e3)})},[E]),k.useEffect(()=>{P()},[]);const X=m.length,Z=f.length,de=N.length,he=m.filter(H=>H.is_active).length,re=m.filter(H=>H.is_verified).length,le=f.filter(H=>H.is_active).length,W=H=>H.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),U=()=>{S([]),localStorage.removeItem("recentActivities"),se.success("Activities cleared")};return E?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsx(wr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})]}),D&&e.jsxs("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:D}),e.jsx("button",{onClick:P,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Users"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:W(X)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[he," active  ",re," verified"]})]}),e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(zs,{size:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Wn,{size:16,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:X>0?"Active system":"No users yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Apartments"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:W(Z)}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[le," active apartments"]})]}),e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(pr,{size:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Wn,{size:16,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:Z>0?"Properties managed":"No apartments yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"User Roles"}),e.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400",children:W(de)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Role types in system"})]}),e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Mo,{size:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Wn,{size:16,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-sm text-green-500",children:de>0?"Role system active":"No roles defined"})]})]})]}),e.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:U,className:"text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300",children:"Clear All"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View all"})]})]}),e.jsx("div",{className:"space-y-4",children:b.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(iv,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent activities"}),e.jsx("p",{className:"text-sm",children:"Activities will appear here as they happen"})]}):b.map(H=>{const ee=H.icon,oe=H.trend==="up"?Wn:dv,we=H.trend==="up"?"text-green-500":"text-red-500";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`p-2 ${H.bgColor} rounded-full mr-3`,children:e.jsx(ee,{size:18,className:H.color})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:H.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:H.time})]})]}),e.jsx(oe,{size:16,className:we})]},H.id)})})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Users Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Users"}),e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:X})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Users"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:he})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Verified Users"}),e.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",children:re})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Pending Verification"}),e.jsx("span",{className:"font-semibold text-yellow-600 dark:text-yellow-400",children:m.filter(H=>!H.is_verified).length})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Apartments Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Apartments"}),e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:Z})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Apartments"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:le})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Inactive Apartments"}),e.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:f.filter(H=>!H.is_active).length})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Roles Summary"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total Roles"}),e.jsx("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:de})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Active Roles"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400",children:N.filter(H=>H.is_active).length})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Inactive Roles"}),e.jsx("span",{className:"font-semibold text-red-600 dark:text-red-400",children:N.filter(H=>!H.is_active).length})]})]})]})]})]})})]})]})}function C3({onClose:l,onCreated:c}){const[d,f]=k.useState({apartment_id:"",name:"",address:"",city:"",image:null}),[g,m]=k.useState(!1),[w,N]=k.useState(""),C=E=>{const{name:M,value:D,files:B}=E.target;f(_=>({..._,[M]:B?B[0]:D}))},b=async()=>{try{const D=(await pe.get("/apartments")).data.data[0],B=D?parseInt(D.apartment_id.slice(3)):0,_=`A${String(B+1).padStart(3,"0")}`;f(G=>({...G,apartment_id:_}))}catch(E){console.error("Error fetching last apartment id:",E)}};k.useEffect(()=>{b()},[]);const S=async E=>{E.preventDefault(),N(""),m(!0);try{const M=new FormData;M.append("apartment_id",d.apartment_id),M.append("name",d.name),M.append("address",d.address),M.append("city",d.city),d.image&&M.append("picture",d.image);const D=await pe.post("/apartments",M,{headers:{"Content-Type":"multipart/form-data"}});m(!1),c&&c(),l&&l()}catch(M){se.error("Failed to create apartment"),console.error(M),m(!1)}};return e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[w&&e.jsx("p",{className:"text-red-500",children:w}),e.jsx("input",{type:"text",name:"apartment_id",value:d.apartment_id,onChange:C,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:d.name,onChange:C,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:d.address,onChange:C,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:d.city,onChange:C,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:C,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:g?"Saving...":"Save"})]})]})}function k3({onClose:l,onEdited:c,apartment:d}){const[f,g]=k.useState({name:"",address:"",city:"",floors:"",houses:"",image:null}),[m,w]=k.useState(!1),[N,C]=k.useState("");k.useEffect(()=>{d&&g({name:d.name||"",address:d.address||"",city:d.city||"",floors:d.floors||"",houses:d.houses||"",image:null})},[d]);const b=E=>{const{name:M,value:D,files:B}=E.target;g(_=>({..._,[M]:B?B[0]:D}))},S=async E=>{E.preventDefault(),C(""),w(!0);try{const M=new FormData;M.append("name",f.name),M.append("address",f.address),M.append("city",f.city),M.append("floors",f.floors),M.append("houses",f.houses),f.image&&M.append("picture",f.image);const D=await pe.put(`/apartments/${d.id}`,M,{headers:{"Content-Type":"multipart/form-data"}});w(!1),c&&c(),l&&l()}catch(M){console.error("Update error:",M),se.error(M.response?.data?.message||"Failed to update apartment"),w(!1)}};return e.jsxs("form",{onSubmit:S,className:"flex flex-col gap-4",children:[N&&e.jsx("p",{className:"text-red-500",children:N}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:f.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:f.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:f.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"floors",placeholder:"No of Floors",value:f.floors,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"houses",placeholder:"No of Houses",value:f.houses,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Updating...":"Update"})]})]})}function A3({isOpen:l,onClose:c,onImportSuccess:d}){const[f,g]=k.useState(null),[m,w]=k.useState(!1),[N,C]=k.useState(!1),[b,S]=k.useState(null),E=V=>{V.preventDefault(),w(!0)},M=V=>{V.preventDefault(),w(!1)},D=V=>{V.preventDefault(),w(!1);const Q=V.dataTransfer.files[0];Q&&_(Q)},B=V=>{const Q=V.target.files[0];Q&&_(Q)},_=V=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(V.type)){se.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(V.size>10*1024*1024){se.error("File size must be less than 10MB");return}g(V),S(null)},G=async()=>{if(!f){se.error("Please select a file first");return}C(!0);const V=new FormData;V.append("excelFile",f);try{const Q=await pe.post("/bulk-import/import",V,{headers:{"Content-Type":"multipart/form-data"}});S(Q.data.data),d&&d()}catch(Q){console.error("Import error:",Q),se.error(Q.response?.data?.message||"Failed to import data")}finally{C(!1)}},R=async()=>{try{const V=await pe.get("/bulk-import/template",{responseType:"blob"}),Q=window.URL.createObjectURL(new Blob([V.data])),$=document.createElement("a");$.href=Q,$.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild($),$.click(),$.remove(),window.URL.revokeObjectURL(Q),se.success("Template downloaded successfully!")}catch(V){console.error("Download error:",V),se.error("Failed to download template")}},z=()=>{g(null),S(null)},F=()=>{z(),c()};return l?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:F,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(Qt,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!b&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:R,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Uo,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${m?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:E,onDragLeave:M,onDrop:D,children:[e.jsx(hs,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:f?f.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:B})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:F,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:N,children:"Cancel"}),e.jsx("button",{onClick:G,disabled:!f||N,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{size:16}),"Import Data"]})})]})]}),b&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($n,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",b.created.houses," houses from ",b.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Sd,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:b.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(J1,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:b.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(wr,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:b.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx($v,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:b.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),b.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Q1,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[b.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:b.errors.map((V,Q)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(Fv,{size:14}),V]},Q))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:z,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:F,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function S3({apartment:l,onClose:c,onUploadSuccess:d}){const[f,g]=k.useState(!1),[m,w]=k.useState([]),[N,C]=k.useState([]),[b,S]=k.useState(!0),E=k.useRef(null);k.useEffect(()=>{_()},[l.id]);const M=F=>{const V=Array.from(F.target.files);C(Q=>[...Q,...V])},D=F=>{C(V=>V.filter((Q,$)=>$!==F))},B=async()=>{if(N.length===0){se.error("Please select at least one file");return}try{g(!0);const F=new FormData;N.forEach(Q=>{F.append("documents",Q)}),F.append("apartmentId",l.id),(await pe.post("/apartment-documents/upload",F,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(C([]),d?.(),_(),E.current&&(E.current.value=""))}catch(F){console.error("Upload error:",F);const V=F.response?.data?.message||"Failed to upload documents";se.error(V)}finally{g(!1)}},_=async()=>{try{S(!0);const F=await pe.get(`/apartment-documents/apartments/${l.id}/documents`);F.data.success&&w(F.data.data)}catch(F){console.error("Error loading documents:",F);const V=F.response?.data?.message||"Failed to load documents";se.error(V)}finally{S(!1)}},G=async F=>{if(window.confirm("Are you sure you want to delete this document?"))try{await pe.delete(`/apartment-documents/documents/${F}`),se.success("Document deleted successfully"),_()}catch(V){console.error("Delete error:",V);const Q=V.response?.data?.message||"Failed to delete document";se.error(Q)}},R=async F=>{try{const V=await pe.get(`/apartment-documents/documents/${F.id}/download`,{responseType:"blob"}),Q=window.URL.createObjectURL(new Blob([V.data])),$=document.createElement("a");$.href=Q,$.setAttribute("download",F.original_name||F.file_name),document.body.appendChild($),$.click(),$.remove(),window.URL.revokeObjectURL(Q)}catch(V){console.error("Download error:",V);const Q=V.response?.data?.message||"Failed to download document";se.error(Q)}},z=F=>{if(F===0)return"0 Bytes";const V=1024,Q=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(F)/Math.log(V));return parseFloat((F/Math.pow(V,$)).toFixed(2))+" "+Q[$]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",l.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:E,onChange:M,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>E.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(hs,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),N.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:N.map((F,V)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:F.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:z(F.size)})]})]}),e.jsx("button",{onClick:()=>D(V),className:"text-red-500 hover:text-red-700",children:e.jsx(Qt,{size:16})})]},V))})]}),N.length>0&&e.jsx("button",{onClick:B,disabled:f,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{size:20}),"Upload ",N.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),b?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):m.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ya,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:m.map(F=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ya,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:F.original_name||F.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[z(F.file_size),"  Uploaded on ",new Date(F.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>R(F),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Uo,{size:18})}),e.jsx("button",{onClick:()=>G(F.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:18})})]})]},F.id))})]})]})}function E3(){const{auth:l}=k.useContext(br),c=ia(),[d,f]=k.useState(!1),[g,m]=k.useState([]),[w,N]=k.useState(!0),[C,b]=k.useState(null),[S,E]=k.useState(!1),[M,D]=k.useState(!1),[B,_]=k.useState(null),[G,R]=k.useState(!1),[z,F]=k.useState(null),[V,Q]=k.useState(!1),[$,P]=k.useState(!1),[X,Z]=k.useState(null),[de,he]=k.useState(!1),[re,le]=k.useState(null),W=()=>{E(!0)},U=()=>{Q(!0)},H=()=>{Q(!1)},ee=be=>{_(be),D(!0)},oe=be=>{c(`/floors/${be.id}`)},we=()=>{E(!1)},K=()=>{D(!1),_(null)},ge=()=>{ie(),E(!1),se.success("Apartment created successfully!")},Oe=()=>{ie(),D(!1),_(null),se.success("Apartment updated successfully!")},xe=()=>{ie(),se.success("Bulk import completed successfully!")},ve=be=>{F(be),R(!0)},Fe=()=>{R(!1)},ie=async()=>{try{N(!0),b(null);const be=await pe.get("/apartments");console.log("API Response:",be.data),be.data.success&&Array.isArray(be.data.data)?m(be.data.data):Array.isArray(be.data)?m(be.data):(console.warn("Unexpected response format:",be.data),m([]))}catch(be){console.error("Error loading apartments:",be),be.response?.status===401?(b("Unauthorized. Please login again."),c("/login")):be.response?.status===400?b("Company information missing. Please contact support."):b("Failed to load apartments. Please try again.")}finally{N(!1)}};k.useEffect(()=>{ie()},[]);const Qe=async be=>{try{const Ye=await pe.patch(`/apartments/${be.id}/toggle`);se.success(Ye.data.message),ie()}catch(Ye){console.error("Error toggling apartment:",Ye),se.error("Failed to toggle apartment status")}},ye=be=>{Z(be),P(!0)},dt=async()=>{try{if(!X)return;await pe.delete(`/apartments/${X.id}`),se.success("Apartment deleted successfully"),P(!1),Z(null),ie()}catch(be){console.error("Delete apartment error:",be),se.error("Failed to delete apartment")}},rt=()=>{P(!1),Z(null)},lt=be=>{le(be),he(!0)},Ze=()=>{he(!1),le(null)},Je=()=>{se.success("Document uploaded successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:f}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${d?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Apartments"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:U,className:"flex items-center gap-2 px-4 py-2 rounded-md font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105",children:[e.jsx(hs,{size:20}),e.jsx("span",{children:"Upload Excel"})]}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:w?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):C?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[C,e.jsx("button",{onClick:ie,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):g.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first apartment"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:g.map((be,Ye)=>e.jsxs("tr",{onClick:()=>be.is_active&&oe(be),className:`transition-colors cursor-pointer ${be.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${be.picture}`,alt:be.name,className:"w-12 h-12 object-cover rounded-lg",onError:Ae=>{console.error("Image failed to load:",be.picture),Ae.target.style.display="none";const Xe=Ae.target.parentNode.querySelector(".image-fallback");Xe&&(Xe.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(us,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),lt(be)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(ya,{size:20})}),e.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),ee(be)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),ve(be)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(_d,{size:25}):e.jsx(Td,{size:25})}),e.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),ye(be)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},be.id||Ye))})]})})})]})})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:we,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx(C3,{onClose:we,onCreated:ge})]})}),M&&B&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:K,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx(k3,{onClose:K,onEdited:Oe,apartment:B})]})}),e.jsx(A3,{isOpen:V,onClose:H,onImportSuccess:xe}),G&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:z?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:z?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Fe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{z&&(Qe(z),R(!1),F(null))},className:`px-4 py-2 rounded-md text-white transition-colors duration-200 ${z?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:z?.is_active?"Deactivate":"Activate"})]})]})}),$&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',X.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:rt,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:dt,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),de&&re&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:Ze,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white z-10",children:""}),e.jsx(S3,{apartment:re,onClose:Ze,onUploadSuccess:Je})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function T3({onClose:l,onCreated:c,roles:d,rolesLoading:f}){const[g,m]=k.useState({email:"",role_id:""}),[w,N]=k.useState(!1),[C,b]=k.useState(""),S=M=>{const{name:D,value:B}=M.target;m(_=>({..._,[D]:B}))},E=async M=>{M.preventDefault(),b(""),N(!0);try{const D=await pe.post("/auth/invite",{email:g.email,role_id:g.role_id});se.success("Invitation sent successfully!"),c&&c(),l&&l()}catch(D){console.error("Invite error:",D);const B=D.response?.data?.message||"Failed to send invitation. Try again.";b(B),se.error(B)}finally{N(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4 text-black dark:text-white",children:[C&&e.jsx("p",{className:"text-red-500",children:C}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:g.email,onChange:S,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:g.role_id,onChange:S,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:f,children:[e.jsx("option",{value:"",children:"Select Role"}),f?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):d.map(M=>e.jsx("option",{value:M.id,children:M.role_name},M.id))]}),f&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(kt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:w,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||f,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:w?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function _3({user:l,onClose:c,onUpdated:d,roles:f,rolesLoading:g}){const[m,w]=k.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[N,C]=k.useState(!1),[b,S]=k.useState(""),[E,M]=k.useState(!1),[D,B]=k.useState(!1),[_,G]=k.useState(!1),[R,z]=k.useState("");k.useEffect(()=>{l&&(w({firstname:l.firstname||"",lastname:l.lastname||"",email:l.email||"",country:l.country||"",mobile:l.mobile||"",role_id:l.role_id||"",password:"",confirmPassword:""}),z(l.email||""))},[l]);const F=$=>{const{name:P,value:X}=$.target;w(Z=>({...Z,[P]:X})),P==="email"&&G(X!==R)},V=async()=>{try{C(!0),await pe.post("/auth/resend",{email:m.email}),se.success("Verification email sent successfully!"),G(!1)}catch($){console.error("Error sending verification email:",$),se.error($.response?.data?.message||"Failed to send verification email")}finally{C(!1)}},Q=async $=>{if($.preventDefault(),C(!0),S(""),m.password&&m.password!==m.confirmPassword){S("Passwords do not match"),C(!1);return}if(m.password&&m.password.length<8){S("Password must be at least 8 characters long"),C(!1);return}try{const P={firstname:m.firstname,lastname:m.lastname,email:m.email,country:m.country,mobile:m.mobile,role_id:m.role_id};m.password&&(P.password=m.password);const X=await pe.put(`/auth/users/${l.id}`,P);X.data.success?(se.success("User updated successfully!"),X.data.data.requires_verification&&await V(),d?.(X.data.data)):S(X.data.message||"Failed to update user")}catch(P){console.error("Error updating user:",P),S(P.response?.data?.message||"Failed to update user")}finally{C(!1)}};return l?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:m.firstname,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:m.lastname,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:m.email,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),_&&e.jsx("button",{type:"button",onClick:V,disabled:N,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(tp,{size:16})})]}),_&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:m.country,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:m.mobile,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:m.role_id,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:g,children:[e.jsx("option",{value:"",children:"Select Role"}),g?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):f.map($=>e.jsx("option",{value:$.id,children:$.role_name},$.id))]}),g&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(kt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:E?"text":"password",name:"password",value:m.password,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>M(!E),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E?e.jsx(xn,{size:16}):e.jsx(ds,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:D?"text":"password",name:"confirmPassword",value:m.confirmPassword,onChange:F,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>B(!D),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:D?e.jsx(xn,{size:16}):e.jsx(ds,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:N,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N||g,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:N?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function M3({user:l,onClose:c,onAssignSuccess:d}){const[f,g]=k.useState([]),[m,w]=k.useState([]),[N,C]=k.useState(!0),[b,S]=k.useState(!1),[E,M]=k.useState(""),[D,B]=k.useState(new Set);k.useEffect(()=>{l&&(async()=>{try{C(!0);const Z=await pe.get("/bills");if(Z.data.success){const he=(Z.data.data||[]).filter(re=>re.billtype?.toLowerCase()==="measurable");g(he)}const de=await pe.get(`/user-bills/users/${l.id}/bills`);if(de.data.success){const re=(de.data.data||[]).filter(W=>W.billtype?.toLowerCase()==="measurable");w(re);const le=new Set(re.map(W=>W.id));B(le)}}catch(Z){console.error("Error loading bill data:",Z),se.error("Failed to load bill data")}finally{C(!1)}})()},[l]);const _=f.filter(X=>X.bill_name?.toLowerCase().includes(E.toLowerCase())),G=X=>m.some(Z=>Z.id===X),R=X=>D.has(X),z=X=>{B(Z=>{const de=new Set(Z);return de.has(X)?de.delete(X):de.add(X),de})},F=()=>{const X=new Set(f.map(Z=>Z.id));B(X)},V=()=>{B(new Set)},Q=async()=>{try{S(!0);const X=Array.from(D);await pe.post(`/user-bills/users/${l.id}/bills`,{bill_ids:X}),se.success("Measurable bills assigned successfully!"),d?.(),c()}catch(X){console.error("Error assigning bills:",X),se.error(X.response?.data?.message||"Failed to assign bills")}finally{S(!1)}},$=X=>m.find(Z=>Z.id===X),P=X=>{try{return new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(fs,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:E,onChange:X=>M(X.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:F,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:V,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:N?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):_.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(cd,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:_.map(X=>{const Z=R(X.id),de=G(X.id),he=$(X.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${Z?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>z(X.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(mr,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:X.bill_name}),de&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(ya,{size:14}),e.jsx("span",{className:"capitalize",children:X.billtype}),X.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",P(X.created_at)]})}),he&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",P(he.assigned_at||he.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:Z?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Ed,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},X.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[D.size," measurable bill(s) selected",m.length>0&&e.jsxs("span",{children:["  ",m.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:Q,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(kt,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]})}function D3({user:l,onClose:c,onAssignSuccess:d}){const[f,g]=k.useState([]),[m,w]=k.useState([]),[N,C]=k.useState(!0),[b,S]=k.useState(!1),[E,M]=k.useState(""),[D,B]=k.useState(new Set),[_,G]=k.useState("apartments");k.useEffect(()=>{l&&(async()=>{try{C(!0);const he=await pe.get("/apartments");he.data.success&&g(he.data.data||[]);const re=await pe.get(`/user-apartments/users/${l.id}/apartments`);if(re.data.success){const le=re.data.data||[];w(le);const W=new Set(le.map(U=>U.id));B(W)}}catch(he){console.error("Error loading apartment data:",he),se.error("Failed to load apartment data")}finally{C(!1)}})()},[l]);const R=f.filter(de=>de.name?.toLowerCase().includes(E.toLowerCase())||de.address?.toLowerCase().includes(E.toLowerCase())||de.city?.toLowerCase().includes(E.toLowerCase())),z=de=>m.some(he=>he.id===de),F=de=>D.has(de),V=de=>{B(he=>{const re=new Set(he);return re.has(de)?re.delete(de):re.add(de),re})},Q=()=>{const de=new Set(f.map(he=>he.id));B(de)},$=()=>{B(new Set)},P=async()=>{try{S(!0);const de=Array.from(D);await pe.post(`/user-apartments/users/${l.id}/apartments`,{apartment_ids:de}),d?.(),c()}catch(de){console.error("Error assigning apartments:",de),se.error(de.response?.data?.message||"Failed to assign apartments")}finally{S(!1)}},X=de=>m.find(he=>he.id===de),Z=de=>{try{return new Date(de).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pr,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[l.firstname," ",l.lastname]})]})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Qt,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>G("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${_==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>G("bills"),className:`px-4 py-2 font-semibold 
                ${_==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"})]}),_==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(fs,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:E,onChange:de=>M(de.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Q,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:$,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:N?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):R.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(pr,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:E?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:R.map(de=>{const he=F(de.id),re=z(de.id),le=X(de.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${he?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>V(de.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(wr,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:de.name}),re&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(_o,{size:14}),e.jsxs("span",{children:[de.address,", ",de.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[de.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[de.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:de.is_active?"Active":"Inactive"})]}),le&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",Z(le.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:he?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(Ed,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},de.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[D.size," apartment(s) selected",m.length>0&&e.jsxs("span",{children:["  ",m.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:c,disabled:b,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:P,disabled:b,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[b&&e.jsx(kt,{size:16,className:"animate-spin"}),e.jsx("span",{children:b?"Saving...":"Save Assignments"})]})]})]})]}):e.jsx(M3,{user:l,onClose:c,onAssignSuccess:d})]})})}function R3(){const[l,c]=k.useState(!1),[d,f]=k.useState([]),[g,m]=k.useState([]),[w,N]=k.useState(!1),[C,b]=k.useState(!1),[S,E]=k.useState(!1),[M,D]=k.useState(null),[B,_]=k.useState(null),[G,R]=k.useState(!0),[z,F]=k.useState(!0),[V,Q]=k.useState(null),{auth:$}=k.useContext(br),[P,X]=k.useState(!1),[Z,de]=k.useState(null),[he,re]=k.useState(!1),[le,W]=k.useState(null),U=async()=>{try{R(!0),Q(null);const Ae=await pe.get("/auth/users");console.log("API Response:",Ae.data),Ae.data.success&&Array.isArray(Ae.data.data)?f(Ae.data.data):(console.warn("Unexpected response format:",Ae.data),f([]))}catch(Ae){console.error("Error in fetching users:",Ae),Q("Failed to load users. Please try again."),se.error("Failed to fetch users")}finally{R(!1)}},H=async()=>{try{F(!0);const Ae=await pe.get("/roles");Ae.data.success&&Array.isArray(Ae.data.data)?m(Ae.data.data):m([])}catch(Ae){console.error("Error loading roles:",Ae),se.error("Failed to load roles")}finally{F(!1)}};k.useEffect(()=>{U(),H()},[]);const ee=()=>N(!0),oe=()=>N(!1),we=Ae=>{D(Ae),b(!0)},K=()=>{b(!1),D(null)},ge=Ae=>{_(Ae),E(!0)},Oe=()=>{E(!1),_(null)},xe=()=>{U(),N(!1),se.success("User created successfully!")},ve=()=>{U(),b(!1),D(null)},[Fe,ie]=k.useState(!1),Qe=async Ae=>{try{ie(!0),await pe.post("/auth/resend",{email:Ae.email}),se.success("Verification email sent successfully!")}catch(Xe){console.error("Error sending verification email:",Xe),se.error(Xe.response?.data?.message||"Failed to send verification email")}finally{ie(!1)}},ye=async()=>{if(B)try{await pe.patch(`/auth/users/${B.id}/toggle`),se.success(`User ${B.is_active?"deactivated":"activated"} successfully!`),U(),Oe()}catch(Ae){console.error("Error toggling user:",Ae),se.error("Failed to update user status")}},dt=Ae=>{de(Ae),X(!0)},rt=async()=>{try{if(!Z)return;await pe.delete(`/auth/users/${Z.id}`),se.success("User deleted successfully"),X(!1),de(null),U()}catch(Ae){console.error("Delete user error:",Ae),Ae.response?.data?.message?se.error(Ae.response.data.message):se.error("Failed to delete user")}},lt=()=>{X(!1),de(null)},Ze=Ae=>{try{return new Date(Ae).toLocaleDateString()}catch{return"N/A"}},Je=Ae=>{W(Ae),re(!0)},be=()=>{re(!1),W(null)},Ye=()=>{se.success("Apartments assigned successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(zs,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Users"})]}),e.jsxs("button",{onClick:ee,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:G?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Users..."})]}):V?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[V,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Ps,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first user"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((Ae,Xe)=>{const Ge=Ae.email===$?.user?.email||Ae.id===$?.user?.id;return e.jsxs("tr",{className:`transition-colors ${Ae.is_active?Ge?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ae.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ae.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:Ae.email}),!Ae.is_verified&&e.jsx("button",{onClick:()=>Qe(Ae),disabled:Ge||!Ae.is_active||Fe,className:`ml-2 p-1 rounded ${Ge||!Ae.is_active||Fe?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:Fe?e.jsx(kt,{size:14,className:"animate-spin"}):e.jsx(tp,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ae.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ae.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ae.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ae.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:Ae.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Ae.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Ae.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ze(Ae.created_at)}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:Me=>{Me.stopPropagation(),Je(Ae)},disabled:Ge||!Ae.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${Ge||!Ae.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:Ge?"You can't assign to your own account":Ae.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(pr,{size:20})}),e.jsx("button",{onClick:()=>we(Ae),disabled:Ge||!Ae.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${Ge||!Ae.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:Ge?"You can't edit your own account":Ae.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:()=>ge(Ae),disabled:Ge,className:`flex items-center justify-center w-8 h-8 rounded ${Ge?"text-gray-400 cursor-not-allowed bg-transparent":Ae.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:Ge?"You can't modify your own account":Ae.is_active?"Deactivate":"Activate",children:Ae.is_active?e.jsx(_d,{size:20}):e.jsx(Td,{size:20})}),e.jsx("button",{onClick:Me=>{Me.stopPropagation(),dt(Ae)},disabled:Ge||!Ae.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${Ge||!Ae.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:Ge?"You can't delete your own account":Ae.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(Na,{size:20})})]})})]},Ae.id??Xe)})})]})})})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:oe,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New User"}),e.jsx(T3,{onClose:oe,onCreated:xe,roles:g,rolesLoading:z})]})}),C&&M&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:K,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit User"}),e.jsx(_3,{user:M,onClose:K,onUpdated:ve,roles:g,rolesLoading:z})]})}),S&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:B.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:B.is_active?`Are you sure you want to deactivate ${B.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${B.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Oe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ye,className:`px-4 py-2 rounded-md text-white transition-colors ${B.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:B.is_active?"Deactivate":"Activate"})]})]})}),P&&Z&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',Z.firstname||Z.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:lt,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:rt,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),he&&le&&e.jsx(D3,{user:le,onClose:be,onAssignSuccess:Ye}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function I3({onClose:l,apartment_id:c}){const[d,f]=k.useState(1),[g,m]=k.useState([]),[w,N]=k.useState(!1),[C,b]=k.useState(0),[S,E]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const G=await pe.get(`/floors/apartment/${c}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(console.log("Existing floors from backend:",G.data),G.data&&G.data.length>0){const R=Math.max(...G.data.map(z=>{const F=z.floor_id.match(/\d+/);return F?parseInt(F[0]):0}));console.log("Detected last floor number:",R),b(R)}}catch(G){console.error("Error fetching existing floors:",G)}finally{E(!1)}})()},[c]);const M=()=>{const _=Array.from({length:d},(G,R)=>({floor_id:`F${C+R+1}`}));console.log("Generated floors:",_),m(_)},D=(_,G,R)=>{const z=[...g];z[_][G]=R,m(z)},B=async _=>{_.preventDefault(),N(!0);try{const G=await pe.post("/floors/batch",{apartment_id:c,floors:g},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});console.log("Created floors:",G.data),l()}catch(G){console.error("Error creating floors:",G)}finally{N(!1)}};return S?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:B,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:d,min:"1",onChange:_=>f(parseInt(_.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:M,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:g.map((_,G)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",C+G+1]}),e.jsx("input",{type:"text",value:_.floor_id,onChange:R=>D(G,"floor_id",R.target.value),className:"border rounded p-1 mr-2"})]},G))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w,className:"px-4 py-2 rounded bg-purple-600 text-white",children:w?"Saving...":"Save All"})]})]})}function O3({floor:l,onClose:c,onUpdated:d}){const[f,g]=k.useState({floor_id:l.floor_id||"",status:l.status||"active"}),m=C=>{const{name:b,value:S}=C.target;g({...f,[b]:S})},w=localStorage.getItem("token"),N=async C=>{C.preventDefault();try{(await pe.put(`/floors/${l.id}`,f,{headers:{Authorization:`Bearer ${w}`}})).data.success?d():se.error("Failed to update floor")}catch(b){console.error("Error updating floor:",b),se.error("Error updating floor")}};return e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:f.floor_id,onChange:m,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:f.status,onChange:m,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function B3({floor:l,apartment:c,onClose:d,onUploadSuccess:f}){const[g,m]=k.useState(!1),[w,N]=k.useState([]),[C,b]=k.useState([]),[S,E]=k.useState(!0),M=k.useRef(null);k.useEffect(()=>{G()},[l.id]);const D=V=>{const Q=Array.from(V.target.files);b($=>[...$,...Q])},B=V=>{b(Q=>Q.filter(($,P)=>P!==V))},_=async()=>{if(C.length===0){se.error("Please select at least one file");return}try{m(!0);const V=new FormData;C.forEach($=>{V.append("documents",$)}),V.append("apartmentId",c.id),V.append("floorId",l.id),(await pe.post("/floor-documents/upload",V,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),f?.(),G(),M.current&&(M.current.value=""))}catch(V){console.error("Upload error:",V);const Q=V.response?.data?.message||"Failed to upload floor documents";se.error(Q)}finally{m(!1)}},G=async()=>{try{E(!0);const V=await pe.get(`/floor-documents/${l.id}/documents`);V.data.success&&N(V.data.data)}catch(V){console.error("Error loading floor documents:",V);const Q=V.response?.data?.message||"Failed to load floor documents";se.error(Q)}finally{E(!1)}},R=async V=>{if(window.confirm("Are you sure you want to delete this document?"))try{await pe.delete(`/floor-documents/documents/${V}`),se.success("Floor document deleted successfully"),G()}catch(Q){console.error("Delete error:",Q);const $=Q.response?.data?.message||"Failed to delete floor document";se.error($)}},z=async V=>{try{const Q=await pe.get(`/floor-documents/documents/${V.id}/download`,{responseType:"blob"}),$=window.URL.createObjectURL(new Blob([Q.data])),P=document.createElement("a");P.href=$,P.setAttribute("download",V.original_name||V.file_name),document.body.appendChild(P),P.click(),P.remove(),window.URL.revokeObjectURL($)}catch(Q){console.error("Download error:",Q);const $=Q.response?.data?.message||"Failed to download floor document";se.error($)}},F=V=>{if(V===0)return"0 Bytes";const Q=1024,$=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(V)/Math.log(Q));return parseFloat((V/Math.pow(Q,P)).toFixed(2))+" "+$[P]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",l.floor_id]}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),c&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",c.name," |",e.jsx("strong",{children:" Floor:"})," ",l.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:M,onChange:D,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>M.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(hs,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),C.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:C.map((V,Q)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:V.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:F(V.size)})]})]}),e.jsx("button",{onClick:()=>B(Q),className:"text-red-500 hover:text-red-700",children:e.jsx(Qt,{size:16})})]},Q))})]}),C.length>0&&e.jsx("button",{onClick:_,disabled:g,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{size:20}),"Upload ",C.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),S?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ya,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:w.map(V=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ya,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:V.original_name||V.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[F(V.file_size),"  Uploaded on ",new Date(V.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>z(V),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Uo,{size:18})}),e.jsx("button",{onClick:()=>R(V.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:18})})]})]},V.id))})]})]})}function L3(){const[l,c]=k.useState(!1),{id:d}=xs();console.log("Apartment ID:",d);const[f,g]=k.useState(null),m=ia(),[w,N]=k.useState([]),[C,b]=k.useState(null),[S,E]=k.useState(!0),[M,D]=k.useState(!1),[B,_]=k.useState(!1),[G,R]=k.useState(null),[z,F]=k.useState(!1),[V,Q]=k.useState(null),[$,P]=k.useState(!1),[X,Z]=k.useState(null),[de,he]=k.useState(!1),[re,le]=k.useState(null);k.useEffect(()=>{d&&(async()=>{try{const Je=await pe.get(`/apartments/${d}`);Je.data.success&&g(Je.data.data)}catch(Je){console.error("Error fetching apartment:",Je)}})()},[d]);const W=()=>{m("/apartmentview")},U=async()=>{try{E(!0),b(null);const Ze=await pe.get(`/floors?apartment_id=${d}`);console.log("API Response:",Ze.data),Ze.data.success&&Array.isArray(Ze.data.data)?N(Ze.data.data):N([])}catch(Ze){console.error("Error loading floors:",Ze),b("Failed to load floors. Please try again.")}finally{E(!1)}};k.useEffect(()=>{U()},[d]);const H=Ze=>{m(`/houses/${d}/${Ze.id}`)},ee=Ze=>{Q(Ze),F(!0)},oe=()=>{F(!1),Q(null)},we=async Ze=>{try{const Je=await pe.patch(`/floors/${Ze.id}/toggle`);se.success(Je.data.message),U()}catch(Je){console.error("Error toggling floor:",Je),se.error("Failed to toggle floor status")}},K=()=>{D(!0)},ge=()=>{D(!1)},Oe=()=>{U(),D(!1),se.success("Floor created successfully!")},xe=Ze=>{R(Ze),_(!0)},ve=()=>{_(!1),R(null)},Fe=()=>{U(),_(!1),se.success("Floor updated successfully!")},ie=Ze=>{Z(Ze),P(!0)},Qe=async()=>{try{if(!X)return;await pe.delete(`/floors/${X.id}`),se.success("Floor deleted successfully"),P(!1),Z(null),U()}catch(Ze){console.error("Delete floor error:",Ze),se.error("Failed to delete floor")}},ye=()=>{P(!1),Z(null)},dt=Ze=>{le(Ze),he(!0)},rt=()=>{he(!1),le(null)},lt=()=>{se.success("Floor documents uploaded successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:W,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Fs,{size:25})}),e.jsx(Sd,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Floors"})]}),f&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",f.name]})]}),e.jsxs("button",{onClick:K,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:S?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading floors..."})]}):C?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[C,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No floors found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding floors"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((Ze,Je)=>e.jsxs("tr",{onClick:()=>Ze.is_active&&H(Ze),className:`transition-colors cursor-pointer ${Ze.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ze.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Ze.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${Ze.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":Ze.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":Ze.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:Ze.status.charAt(0).toUpperCase()+Ze.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:be=>{be.stopPropagation(),dt(Ze)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(ya,{size:20})}),e.jsx("button",{onClick:be=>{be.stopPropagation(),xe(Ze)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:be=>{be.stopPropagation(),ee(Ze)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:Ze.is_active?"Deactivate":"Activate",children:Ze.is_active?e.jsx(_d,{size:25}):e.jsx(Td,{size:25})}),e.jsx("button",{onClick:be=>{be.stopPropagation(),ie(Ze)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},Ze.id||Je))})]})})})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ge,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx(I3,{onClose:ge,onCreated:Oe,apartment_id:d})]})}),B&&G&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ve,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx(O3,{onClose:ve,onUpdated:Fe,floor:G})]})}),z&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:V?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:V?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{V&&(we(V),F(!1),Q(null))},className:`px-4 py-2 rounded-md text-white transition-colors duration-200 ${V?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:V?.is_active?"Deactivate":"Activate"})]})]})}),$&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',X.floor_id,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ye,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Qe,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),de&&re&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl relative max-h-[90vh] overflow-y-auto",children:e.jsx(B3,{floor:re,apartment:f,onClose:rt,onUploadSuccess:lt})})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function F3({onClose:l,apartment_id:c,onCreated:d}){const[f,g]=k.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[m,w]=k.useState(!1),[N,C]=k.useState(""),b=M=>{const{name:D,value:B}=M.target;g(_=>({..._,[D]:B}))},S=async()=>{try{const D=(await pe.get(`/housetype?apartment_id=${c}`)).data.data||[],B=D.length>0?D[D.length-1]:null,_=B?parseInt(B.name.replace("Type","")):0,G=`Type ${String(_+1).padStart(2,"0")}`;g(R=>({...R,name:G}))}catch(M){console.error("Error fetching last type:",M),C("Failed to generate Type ID")}};k.useEffect(()=>{S()},[]);const E=async M=>{M.preventDefault(),w(!0),C("");try{const D=await pe.post("/housetype",{...f,apartment_id:c},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});D.data.success?(d?.(D.data.data),l()):C("Failed to save house type")}catch(D){console.error("Error saving house type:",D),C("Error saving house type")}finally{w(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[N&&e.jsx("p",{className:"text-red-500",children:N}),e.jsx("input",{type:"text",name:"name",value:f.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:f.sqrfeet,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:f.rooms,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:f.bathrooms,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})}function P3({housetype:l,onClose:c,onUpdated:d}){const[f,g]=k.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[m,w]=k.useState(!1),[N,C]=k.useState(""),b=localStorage.getItem("token");k.useEffect(()=>{l&&g({name:l.name||"",sqrfeet:l.sqrfeet||"",rooms:l.rooms||"",bathrooms:l.bathrooms||""})},[l]);const S=M=>{const{name:D,value:B}=M.target;g(_=>({..._,[D]:B}))},E=async M=>{M.preventDefault(),w(!0),C("");try{const D=await pe.put(`/housetype/${l.id}`,f,{headers:{Authorization:`Bearer ${b}`}});D.data.success?(d&&d(D.data.data),c&&c()):C(D.data.message||"Failed to update house type")}catch(D){console.error("Update error:",D),C("Error updating house type")}finally{w(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[N&&e.jsx("p",{className:"text-red-500",children:N}),e.jsx("input",{type:"text",name:"name",value:f.name,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:f.sqrfeet,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:f.rooms,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:f.bathrooms,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})}function dp(){const{apartment_id:l}=xs();console.log("Apartment ID:",l);const[c,d]=k.useState(!1),[f,g]=k.useState(null),[m,w]=k.useState([]),[N,C]=k.useState(!1),[b,S]=k.useState(!1),[E,M]=k.useState(null),[D,B]=k.useState(!1),[_,G]=k.useState(null),R=async()=>{try{d(!0),g(null);const he=await pe.get(`/housetype?apartment_id=${l}`);he.data.success&&Array.isArray(he.data.data)?w(he.data.data):w([])}catch(he){console.error("Error loading houses:",he),g("Failed to load houses. Please try again.")}finally{d(!1)}};k.useEffect(()=>{R()},[l]);const z=()=>{C(!0)},F=()=>{C(!1)},V=()=>{R(),C(!1),se.success("House Type Created Successfully")},Q=he=>{M(he),S(!0)},$=()=>{S(!1),M(null)},P=()=>{R(),S(!1),se.success("House Type updated successfully!")},X=he=>{G(he),B(!0)},Z=async()=>{try{if(!_)return;await pe.delete(`/houseType/${_.id}`),se.success("House type deleted successfully"),B(!1),G(null),R()}catch(he){console.error("Delete house type error:",he),se.error("Failed to delete house type")}},de=()=>{B(!1),G(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:z,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"New House Type"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:R,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map(he=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:he.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:re=>{re.stopPropagation(),Q(he)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:re=>{re.stopPropagation(),X(he)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},he.id))})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:F,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(F3,{onClose:F,onCreated:V,apartment_id:l})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:$,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx(P3,{onClose:$,onUpdated:P,housetype:E})]})}),D&&_&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',_.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:de,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Z,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function z3({houseowner:l,onClose:c,onUpdated:d}){const[f,g]=k.useState(!1),[m,w]=k.useState(!1),[N,C]=k.useState(null),[b,S]=k.useState(null),[E,M]=k.useState([]),[D,B]=k.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});k.useEffect(()=>{l&&(B({name:l.name||"",occupation:l.occupation||"",country:l.country||"",mobile:l.mobile||"",email:l.email||"",occupied_way:l.occupied_way||"own",proof:l.proof||""}),l.proof&&S(l.proof))},[l]),k.useEffect(()=>{(async()=>{try{const P=await pe.get("/countries");M(P.data.data||[])}catch(P){console.error("Error fetching countries:",P)}})()},[]);const _=$=>{const{name:P,value:X}=$.target;B(Z=>({...Z,[P]:X}))},G=$=>{const P=$.target.files[0];if(P)if(C(P),P.type.startsWith("image/")){const X=new FileReader;X.onloadend=()=>{S(X.result)},X.readAsDataURL(P)}else S(null)},R=$=>{const P=$.target.value,X=E.find(Z=>Z.id.toString()===P);B(X?Z=>({...Z,country:X.country_name,mobile:X.phone_code+" "+Z.mobile.replace(/^\+\d+\s?/,"")}):Z=>({...Z,country:"",mobile:Z.mobile.replace(/^\+\d+\s?/,"")}))},z=$=>{const P=$.target.value;if(D.mobile&&D.mobile.includes("+")){const X=D.mobile.match(/^(\+\d+)(?:\s|$)/);if(X){const Z=X[1];P.startsWith(Z)?B(de=>({...de,mobile:P})):B(de=>({...de,mobile:Z+" "+P.replace(/^\+\d+\s?/,"")}));return}}B(X=>({...X,mobile:P}))},F=async $=>{$.preventDefault(),w(!0);try{const P=new FormData;Object.keys(D).forEach(Z=>{Z!=="proof"&&P.append(Z,D[Z])}),N&&P.append("proof",N);const X=await pe.put(`/houseowner/${l.id}`,P,{headers:{"Content-Type":"multipart/form-data"}});X.data.success&&(d(X.data.data),c())}catch(P){console.error("Error updating house owner:",P),alert("Error updating house owner. Please try again.")}finally{w(!1)}},Q=E.find($=>$.country_name===D.country)?.phone_code||"";return f?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(kt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):l?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(Qt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:F,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ps,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:D.name,onChange:_,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(yf,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:D.occupation,onChange:_,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx($1,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:E.find($=>$.country_name===D.country)?.id||"",onChange:R,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),E.map($=>e.jsxs("option",{value:$.id,children:[$.country_name," (",$.phone_code,")"]},$.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ho,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[Q&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:Q}),e.jsx("input",{type:"tel",name:"mobile",value:D.mobile.replace(/^\+\d+\s?/,""),onChange:z,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${Q?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Sl,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:D.email,onChange:_,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:D.occupied_way,onChange:_,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(hs,{size:16,className:"inline mr-2"}),"Proof Document"]}),b&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(ya,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:D.proof.split("/").pop()})}),e.jsx("a",{href:`${pe.defaults.baseURL}/houseowner/view-proof/${l.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:G,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(hs,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),N&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",N.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function U3({houseownerId:l,onClose:c,onSuccess:d}){const[f,g]=k.useState(!1),[m,w]=k.useState(!1),[N,C]=k.useState({name:"",nic:"",email:"",phone:"",houseowner_id:l}),[b,S]=k.useState({});k.useEffect(()=>{C({name:"",nic:"",email:"",phone:"",houseowner_id:l}),S({})},[l]);const E=()=>{const _={};return N.name.trim()||(_.name="Name is required"),N.nic.trim()||(_.nic="NIC is required"),N.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(N.email)&&(_.email="Invalid email address"),N.phone&&!/^[0-9+\-\s()]{10,}$/.test(N.phone.replace(/\s/g,""))&&(_.phone="Invalid phone number"),S(_),Object.keys(_).length===0},M=_=>{const{name:G,value:R}=_.target;C(z=>({...z,[G]:R})),b[G]&&S(z=>({...z,[G]:""}))},D=async _=>{if(_.preventDefault(),!!E()){w(!0);try{const G=await pe.post("/family",{...N,houseowner_id:l});G.data.success&&(d(G.data.data),c())}catch(G){console.error("Error adding family member:",G),G.response?.data?.error?S(R=>({...R,general:G.response.data.message||"Failed to add family member"})):S(R=>({...R,general:"Failed to add family member. Please try again."}))}finally{w(!1)}}},B=_=>{const R=_.target.value.replace(/[^\d+\-\s]/g,"");C(z=>({...z,phone:R})),b.phone&&S(z=>({...z,phone:""}))};return f?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(kt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Do,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:m,children:e.jsx(Qt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6",children:[b.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:b.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ps,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:N.name,onChange:M,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:m}),b.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(W1,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:N.nic,onChange:M,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:m}),b.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Sl,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:N.email,onChange:M,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:m}),b.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ho,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:N.phone,onChange:B,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${b.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:m}),b.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:b.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Do,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function H3({member:l,onClose:c,onUpdated:d}){const[f,g]=k.useState(!1),[m,w]=k.useState(!1),[N,C]=k.useState({}),[b,S]=k.useState({name:"",email:"",phone:""});k.useEffect(()=>{l&&S({name:l.name||"",email:l.email||"",phone:l.phone||""})},[l]);const E=()=>{const B={};return b.name.trim()||(B.name="Name is required"),b.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(b.email)&&(B.email="Invalid email address"),b.phone&&!/^[0-9+\-\s()]{10,}$/.test(b.phone.replace(/\s/g,""))&&(B.phone="Invalid phone number"),C(B),Object.keys(B).length===0},M=B=>{const{name:_,value:G}=B.target;S(R=>({...R,[_]:G})),N[_]&&C(R=>({...R,[_]:""}))},D=async B=>{if(B.preventDefault(),!!E()){w(!0);try{const _=await pe.put(`/family/${l.id}`,b);_.data.success&&(d(_.data.data),c())}catch(_){console.error("Error updating family member:",_),C(G=>({...G,general:_.response?.data?.message||"Failed to update family member"}))}finally{w(!1)}}};return l?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:c,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:m,children:e.jsx(Qt,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6",children:[N.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:N.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ps,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:b.name,onChange:M,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${N.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:m}),N.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:N.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Sl,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:b.email,onChange:M,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${N.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:m}),N.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:N.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ho,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:b.phone,onChange:M,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${N.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:m}),N.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:N.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:m?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ff,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function V3(){const[l,c]=k.useState(!1),[d,f]=k.useState("type"),{apartment_id:g,floor_id:m,id:w}=xs();console.log("Apartment Id:",g),console.log("Floor ID: ",m),console.log("House ID: ",w);const[N,C]=k.useState(null),[b,S]=k.useState(null),[E,M]=k.useState(null),[D,B]=k.useState(null),[_,G]=k.useState(null),[R,z]=k.useState([]),[F,V]=k.useState(!1),[Q,$]=k.useState([]),[P,X]=k.useState(!1),[Z,de]=k.useState(!1),[he,re]=k.useState(!1),[le,W]=k.useState(!1),[U,H]=k.useState(!1),[ee,oe]=k.useState(null),we=ia();k.useEffect(()=>{g&&pe.get(`/apartments/${g}`).then(ye=>ye.data.success&&C(ye.data.data)).catch(ye=>console.error("Error fetching apartment:",ye))},[g]),k.useEffect(()=>{m&&pe.get(`/floors/${m}`).then(ye=>ye.data.success&&S(ye.data.data)).catch(ye=>console.error("Error fetching floor:",ye))},[m]),k.useEffect(()=>{w&&pe.get(`/houses/${w}`).then(ye=>ye.data.success&&M(ye.data.data)).catch(ye=>console.error("Error fetching house:",ye))},[w]),k.useEffect(()=>{E?.housetype_id&&pe.get(`/housetype/${E.housetype_id}`).then(ye=>ye.data.success&&B(ye.data.data)).catch(ye=>console.error("Error fetching house type:",ye))},[E]),k.useEffect(()=>{E?.houseowner_id&&pe.get(`/houseowner/${E.houseowner_id}`).then(ye=>ye.data.success&&G(ye.data.data)).catch(ye=>console.error("Error fetching house owner: ",ye))},[E]),k.useEffect(()=>{E?.houseowner_id&&K(E.houseowner_id)},[E]);const K=async ye=>{try{V(!0);const dt=await pe.get(`/family/houseowner/${ye}`);dt.data.success&&z(dt.data.data||[])}catch(dt){console.error("Error fetching family members: ",dt),z([])}finally{V(!1)}};k.useEffect(()=>{w&&ge()},[w]);const ge=async()=>{try{X(!0);const ye=await pe.get(`/bill-assignments/house/${w}`);ye.data.success&&$(ye.data.data||[])}catch(ye){console.error("Error fetching assigned bills:",ye),$([])}finally{X(!1)}},Oe=()=>{we(`/houses/${g}/${m}`)},xe=ye=>new Date(ye).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ve=async()=>{if(!_?.id){alert("House owner information not available");return}try{de(!0),console.log("Downloading proof for houseowner ID:",_.id),console.log("Proof path in database:",_.proof);try{const be=await pe.head(`/houseowner/download-proof/${_.id}`);console.log("HEAD request successful:",be.status)}catch(be){console.error("HEAD request failed:",be.response?.status||be.message)}const ye=await pe.get(`/houseowner/download-proof/${_.id}`,{responseType:"blob"});if(console.log("Download response status:",ye.status),console.log("Response headers:",ye.headers),ye.status!==200){const be=await ye.data.text();console.error("Error response:",be);let Ye=`Download failed with status ${ye.status}`;try{const Ae=JSON.parse(be);Ae.message&&(Ye=Ae.message)}catch{be&&(Ye=be)}throw new Error(Ye)}const dt=new Blob([ye.data]),rt=window.URL.createObjectURL(dt),lt=document.createElement("a");lt.href=rt;const Ze=ye.headers["content-disposition"];let Je="owner_proof.jpg";if(Ze){const be=Ze.match(/filename="?([^"]+)"?/);be&&(Je=be[1],console.log("Filename from header:",Je))}else if(_.proof){const be=_.proof.split("/");Je=be[be.length-1]||Je}lt.download=Je,document.body.appendChild(lt),lt.click(),document.body.removeChild(lt),setTimeout(()=>{window.URL.revokeObjectURL(rt)},100),console.log("Download successful")}catch(ye){console.error("Error downloading proof:",ye),console.error("Error details:",{name:ye.name,message:ye.message,stack:ye.stack,response:ye.response?.data}),ye.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):ye.response?.status===500?alert("Server error occurred. Please check server logs."):ye.message?alert(`Download failed: ${ye.message}`):alert("Failed to download proof document. Please try again.")}finally{de(!1)}},Fe=()=>{E?.houseowner_id?W(!0):alert("House owner information is required before adding family members.")},ie=ye=>{oe(ye),H(!0)},Qe=async ye=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await pe.delete(`/family/${ye}`),E?.houseowner_id&&K(E.houseowner_id)}catch(dt){console.error("Error deleting family member:",dt),alert("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Oe,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Fs,{size:25})}),e.jsx(wr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),N&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",N.name]}),b&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",b.floor_id]}),E&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",E.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>f("type"),className:`px-4 py-2 font-semibold 
                                    ${d==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>f("owner"),className:`px-4 py-2 font-semibold 
                                    ${d==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>f("residents"),className:`px-4 py-2 font-semibold 
                                    ${d==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",R.length,")"]}),e.jsx("button",{onClick:()=>f("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${d==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),d==="type"&&D&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(wr,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(hd,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:D.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(hd,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[D.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(wv,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:D.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(yv,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:D.bathrooms})]})]})})]})]}),d==="owner"&&_&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(Ps,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:_.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:_.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>re(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Nr,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Bf,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:_.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(yf,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:_.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:_.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:xe(E.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($1,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:_.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ho,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:_.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sl,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:_.email||"N/A"})]})]}),_.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(ya,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:ve,disabled:Z,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Uo,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:_.proof.split("/").pop()})]})]})]})]})]})]}),d==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(zs,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:Fe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(Do,{size:18,className:"mr-2"}),"Add Family Member"]})]}),F?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):R.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(zs,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:Fe,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(Do,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:R.map(ye=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:ye.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:ye.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(W1,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:ye.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ie(ye),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Nr,{size:18})}),e.jsx("button",{onClick:()=>Qe(ye.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(Na,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[ye.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(yf,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:ye.occupation})]})]}),ye.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Sl,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:ye.email})]})]}),ye.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(uN,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:ye.phone})]})]}),ye.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(wi,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:xe(ye.moved_at)})]})]})]})]},ye.id))})]}),d==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(ya,{className:"mr-2",size:20}),"Assigned Bills"]}),P?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(kt,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):Q.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ya,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:Q.map(ye=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(os,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:ye.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:ye.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(wi,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:xe(ye.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ye.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:ye.status||"active"})})]})},ye.id))})]})]})})]}),he&&_&&e.jsx(z3,{houseowner:_,onClose:()=>re(!1),onUpdated:ye=>{G(ye),re(!1)}}),le&&E?.houseowner_id&&e.jsx(U3,{houseownerId:E.houseowner_id,onClose:()=>W(!1),onSuccess:ye=>{z(dt=>[ye,...dt]),W(!1)}}),U&&ee&&e.jsx(H3,{member:ee,onClose:()=>{H(!1),oe(null)},onUpdated:ye=>{K(),z(dt=>dt.map(rt=>rt.id===ye.id?ye:rt)),H(!1),oe(null)}})]})}function G3({onClose:l,onCreated:c,apartment_id:d,floor_id:f}){const[g,m]=k.useState([{numHouses:1,housetype_id:""}]),[w,N]=k.useState(""),[C,b]=k.useState([]),[S,E]=k.useState([]),[M,D]=k.useState([]),[B,_]=k.useState(!1),[G,R]=k.useState(!0),[z,F]=k.useState("");k.useEffect(()=>{(async()=>{try{const W=await pe.get(`/houses?apartment_id=${d}&floor_id=${f}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});W.data?.data?.length>0&&(D(W.data.data),console.log("Existing houses:",W.data.data))}catch(W){console.error("Error fetching existing houses:",W)}finally{R(!1)}})()},[d,f]),k.useEffect(()=>{(async()=>{try{const W=await pe.get(`/housetype?apartment_id=${d}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});E(W.data.data||[])}catch(W){console.error("Error fetching house types:",W)}})()},[d]);const V=le=>{if(!le||M.length===0)return 0;const W=M.filter(H=>H.house_id&&H.house_id.startsWith(le)).map(H=>{const oe=H.house_id.slice(le.length).match(/^\d+$/);return oe?parseInt(oe[0]):0}).filter(H=>H>0);if(console.log(`Houses with prefix "${le}":`,W),W.length===0)return 0;const U=Math.max(...W);return console.log(`Last house number for prefix "${le}":`,U),U},Q=()=>{m(le=>[...le,{numHouses:1,housetype_id:""}])},$=le=>{if(g.length===1){F("At least one house type row is required");return}m(W=>W.filter((U,H)=>H!==le))},P=(le,W,U)=>{m(H=>H.map((ee,oe)=>oe===le?{...ee,[W]:U}:ee))},X=()=>{if(!w.trim()){F("Please enter a key letter/prefix");return}if(g.filter(oe=>!oe.housetype_id||oe.numHouses<1).length>0){F("Please select house type and ensure number of houses is at least 1 for all rows");return}F("");const W=w.trim().toUpperCase();let H=V(W)+1;const ee=[];g.forEach(oe=>{const we=S.find(K=>K.id===oe.housetype_id);for(let K=0;K<oe.numHouses;K++)ee.push({house_id:`${W}${H}`,housetype_id:oe.housetype_id,house_type_name:we?.name||""}),H++}),console.log(`Generated ${ee.length} houses:`,ee),b(ee)},Z=(le,W)=>{const U=[...C];U[le].housetype_id=W;const H=S.find(ee=>ee.id===W);U[le].house_type_name=H?.name||"",b(U)},de=async le=>{if(le.preventDefault(),F(""),_(!0),C.filter(U=>!U.housetype_id).length>0){F("Please select house type for all houses"),_(!1);return}try{const U={apartment_id:d,floor_id:f,houses:C.map(ee=>({house_id:ee.house_id,housetype_id:ee.housetype_id}))},H=await pe.post("/houses/batch",U,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});c&&c(),l&&l()}catch(U){console.error("Error creating houses:",U),F(U.response?.data?.message||"Server error while creating houses.")}finally{_(!1)}},he=le=>{N(le.target.value),b([])},re=g.reduce((le,W)=>le+(W.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[z&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:z}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:w,onChange:he,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:Q,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(vr,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:g.map((le,W)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:le.numHouses,onChange:U=>P(W,"numHouses",parseInt(U.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:le.housetype_id,onChange:U=>P(W,"housetype_id",U.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),S.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>$(W),disabled:g.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(Na,{size:16})})})]},W))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:re})]})})]}),w.trim()&&M.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',w.toUpperCase(),'":']})," Found ",V(w.trim().toUpperCase())," existing houses.",V(w.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${V(w.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:X,disabled:!w.trim()||G||re===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:G?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",re," House",re!==1?"s":"",e.jsx(hv,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),C.length>0?e.jsxs("form",{onSubmit:de,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",C.length," house",C.length!==1?"s":"",' with prefix "',w.toUpperCase(),'"']}),C.map((le,W)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:le.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:le.housetype_id,onChange:U=>Z(W,U.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),S.map(U=>e.jsx("option",{value:U.id,children:U.name},U.id))]})]})]}),le.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",le.house_type_name]})]},W))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:l,disabled:B,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:B,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${C.length} House${C.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function q3({house:l,onClose:c,onUpdated:d,apartment_id:f,floor_id:g}){const[m,w]=k.useState({house_id:l.house_id,status:l.status,housetype_id:l.housetype_id,houseowner_id:l.houseowner_id}),[N,C]=k.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[b,S]=k.useState([]),[E,M]=k.useState(!1),[D,B]=k.useState(!1),[_,G]=k.useState(null),[R,z]=k.useState([]),[F,V]=k.useState(!0);k.useEffect(()=>{(async()=>{try{const le=await pe.get("/countries");z(le.data.data)}catch(le){console.error("Error fetching countries:",le)}})()},[]);const Q=re=>{const le=re.target.value,W=R.find(U=>U.id.toString()===le);C(W?U=>({...U,country:W.country_name,mobile:W.phone_code+" "}):U=>({...U,country:"",mobile:""}))},$=re=>{const le=re.target.value;if(N.mobile&&N.mobile.includes("+")){const W=N.mobile.match(/^(\+\d+)(?:\s|$)/);if(W){const U=W[1];le.startsWith(U)?C(H=>({...H,mobile:le})):C(H=>({...H,mobile:U+" "+le.replace(/^\+\d+\s?/,"")}));return}}C(W=>({...W,mobile:le}))};k.useEffect(()=>{(async()=>{try{const le=await pe.get(`/housetype?apartment_id=${f}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});S(le.data.data||[])}catch(le){console.error("Error fetching house types:",le)}})()},[f]),k.useEffect(()=>{m.status==="occupied"&&l.status!=="occupied"?(B(!0),V(!0)):m.status!=="occupied"&&B(!1)},[m.status,l.status]);const P=re=>{w({...m,[re.target.name]:re.target.value})},X=re=>{C({...N,[re.target.name]:re.target.value})},Z=re=>{G(re.target.files[0])},de=async re=>{re.preventDefault(),M(!0);try{let le=m.houseowner_id;if(m.status==="occupied"&&!le){const H=new FormData;H.append("name",N.name),H.append("nic",N.nic),H.append("occupation",N.occupation),H.append("country",N.country),H.append("mobile",N.mobile),H.append("email",N.email),H.append("occupied_way",N.occupied_way),H.append("apartment_id",f),_&&H.append("proof",_);const ee=await pe.post("/houseowner",H,{headers:{"Content-Type":"multipart/form-data"}});ee.data.success&&(le=ee.data.data.id)}const W={...m,house_owner_id:le};(await pe.put(`/houses/${l.id}`,W)).data.success&&d()}catch(le){console.error("Error updating house:",le),alert("Error updating house. Please try again.")}finally{M(!1)}},he=R.find(re=>re.country_name===N.country);return e.jsxs("form",{onSubmit:de,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:m.house_id,onChange:P,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:m.housetype_id,onChange:P,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),b&&b.length>0?b.map(re=>e.jsx("option",{value:re.id,children:re.name||re.type_name||"Unnamed Type"},re.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:m.status,onChange:P,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),D&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("button",{type:"button",onClick:()=>V(!F),className:"flex items-center justify-between w-full mb-3 p-2 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),F?e.jsx(To,{size:20,className:"text-gray-500"}):e.jsx(Eo,{size:20,className:"text-gray-500"})]}),F&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:N.name,onChange:X,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:N.nic,onChange:X,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:N.occupation,onChange:X,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsxs("select",{name:"country",value:R.find(re=>re.country_name===N.country)?.id||"",onChange:Q,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select country *"}),R.map(re=>e.jsxs("option",{value:re.id,children:[re.country_name," (",re.phone_code,")"]},re.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsxs("div",{className:"flex items-center",children:[he&&e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 px-3 py-2 rounded-l-md border border-r-0 border-gray-300 dark:border-gray-600 whitespace-nowrap",children:he.phone_code}),e.jsx("input",{name:"mobile",value:N.mobile,onChange:$,placeholder:he?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${he?"rounded-l-none":""}`,required:!0,disabled:!he})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",he?.phone_code||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:N.email,onChange:X,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:N.occupied_way,onChange:X,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:Z,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:E,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[E&&e.jsx(kt,{size:16,className:"animate-spin"}),D?"Save House & Owner":"Save Changes"]})]})})]})}function Y3({onClose:l,onCreated:c}){const[d,f]=k.useState({bill_name:"",billtype:""}),[g,m]=k.useState(!1),[w,N]=k.useState(""),[C,b]=k.useState([]),S=M=>{const{name:D,value:B}=M.target;f(_=>({..._,[D]:B})),D==="bill_name"&&w&&N("")},E=async M=>{if(M.preventDefault(),m(!0),N(""),!d.bill_name.trim()||!d.billtype){N("Please fill in all required fields"),m(!1);return}try{const D=await pe.post("/bills",{bill_name:d.bill_name.trim(),billtype:d.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});D.data.success?(c?.(D.data.data),se.success("Bill type created successfully"),l()):N(D.data.message||"Failed to save bill type")}catch(D){console.error("Error saving bill type:",D);const B=D.response?.data?.message||"Error saving bill type. Please try again.";N(B),D.response?.status===409&&se.error(B)}finally{m(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[w&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:w}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:d.billtype,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:d.bill_name,onChange:S,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!d.bill_name.trim()||!d.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${g||!d.bill_name.trim()||!d.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function up({bills:l,onClose:c,onUpdated:d}){const[f,g]=k.useState({bill_name:"",billtype:""}),[m,w]=k.useState(!1),[N,C]=k.useState(""),b=localStorage.getItem("token");k.useEffect(()=>{l&&g({bill_name:l.bill_name||"",billtype:l.billtype||""})},[l]);const S=M=>{const{name:D,value:B}=M.target;g(_=>({..._,[D]:B}))},E=async M=>{M.preventDefault(),w(!0),C("");try{const D=await pe.put(`/bills/${l.id}`,f,{headers:{Authorization:`Bearer ${b}`}});D.data.success?(d&&d(D.data.data),c&&c()):C(D.data.message||"Failed to update bill type")}catch(D){console.error("Update error:",D),C("Error updating bill type")}finally{w(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[N&&e.jsx("p",{className:"text-red-500",children:N}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:f.billtype,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:f.bill_name,onChange:S,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})}function fp({isOpen:l,onClose:c,selectedBill:d,onAssignSuccess:f}){const[g,m]=k.useState([]),[w,N]=k.useState({}),[C,b]=k.useState({}),[S,E]=k.useState(""),[M,D]=k.useState(""),[B,_]=k.useState([]),[G,R]=k.useState({}),[z,F]=k.useState({}),[V,Q]=k.useState(!1),[$,P]=k.useState({}),[X,Z]=k.useState({}),[de,he]=k.useState(!1),re=async()=>{try{Q(!0);const xe=await pe.get("/apartments");xe.data.success&&m(xe.data.data||[])}catch(xe){console.error("Error loading apartments:",xe),se.error("Failed to load apartments")}finally{Q(!1)}},le=async xe=>{if(xe)try{P(Fe=>({...Fe,[xe]:!0}));const ve=await pe.get(`/floors?apartment_id=${xe}`);if(ve.data.success){const Fe=ve.data.data||[];N(ie=>({...ie,[xe]:Fe}))}}catch(ve){console.error("Error loading floors:",ve),se.error("Failed to load floors")}finally{P(ve=>({...ve,[xe]:!1}))}},W=async(xe,ve)=>{if(!(!xe||!ve))try{Z(ie=>({...ie,[ve]:!0}));const Fe=await pe.get(`/houses?apartment_id=${xe}&floor_id=${ve}`);if(Fe.data.success){const ie=Fe.data.data||[];b(Qe=>({...Qe,[ve]:ie}))}}catch(Fe){console.error("Error loading houses:",Fe),se.error("Failed to load houses")}finally{Z(Fe=>({...Fe,[ve]:!1}))}},U=async xe=>{const ve=G[xe.id];!ve&&!w[xe.id]&&await le(xe.id),R(Fe=>({...Fe,[xe.id]:!ve})),ve||(E(xe.id),D(""),_([]))},H=async(xe,ve)=>{const Fe=`${xe}-${ve.id}`,ie=z[Fe];!ie&&!C[ve.id]&&await W(xe,ve.id),F(Qe=>({...Qe,[Fe]:!ie})),ie||(D(ve.id),_([]))},ee=xe=>{_(ve=>ve.includes(xe)?ve.filter(Fe=>Fe!==xe):[...ve,xe])},oe=()=>{if(!M)return;const ve=(C[M]||[]).map(ie=>ie.id),Fe=ve.every(ie=>B.includes(ie));_(Fe?ie=>ie.filter(Qe=>!ve.includes(Qe)):ie=>{const Qe=[...ie];return ve.forEach(ye=>{Qe.includes(ye)||Qe.push(ye)}),Qe})},we=()=>{if(!M)return!1;const xe=C[M]||[];return xe.length===0?!1:xe.every(ve=>B.includes(ve.id))},K=()=>{if(!M)return!1;const xe=C[M]||[];return xe.length===0?!1:xe.some(ve=>B.includes(ve.id))&&!we()},ge=async()=>{if(!S||!M||B.length===0){se.error("Please select apartment, floor, and at least one house");return}he(!0);try{const xe={bill_id:d.id,apartment_id:S,floor_id:M,house_ids:B};await pe.post("/bill-assignments/assign",xe),se.success("Bill assign successfully"),f(),Oe()}catch(xe){console.error("Error assigning bill:",xe),se.error(xe.response?.data?.message||"Failed to assign bill")}finally{he(!1)}},Oe=()=>{E(""),D(""),N({}),b({}),_([]),R({}),F({}),c()};return k.useEffect(()=>{l&&re()},[l]),l?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:Oe,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:d?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),V?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(kt,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:g.map(xe=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${S===xe.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>U(xe),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:xe.name}),e.jsx("button",{onClick:ve=>{ve.stopPropagation(),U(xe)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:G[xe.id]?e.jsx(To,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(Eo,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),G[xe.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:$[xe.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(kt,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(w[xe.id]||[]).map(ve=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${M===ve.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>H(xe.id,ve),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ve.floor_id}),e.jsx("button",{onClick:Fe=>{Fe.stopPropagation(),H(xe.id,ve)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:z[`${xe.id}-${ve.id}`]?e.jsx(To,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(Eo,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),z[`${xe.id}-${ve.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:X[ve.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(kt,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:we(),ref:Fe=>{Fe&&(Fe.indeterminate=K())},onChange:oe,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(C[ve.id]||[]).map(Fe=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:B.includes(Fe.id),onChange:()=>ee(Fe.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:Fe.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",Fe.status,")"]})]})]},Fe.id))})]})})]},ve.id))})})]},xe.id))})]}),B.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:B.length})," house",B.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:Oe,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:ge,disabled:!S||!M||B.length===0||de,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:de?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${B.length} House${B.length!==1?"s":""}`})]})]})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]}):null}function X3(){const[l,c]=k.useState(!1),[d,f]=k.useState(null),[g,m]=k.useState([]),[w,N]=k.useState(!1),[C,b]=k.useState(!1),[S,E]=k.useState(!1),[M,D]=k.useState(null),[B,_]=k.useState(null),[G,R]=k.useState(!1),[z,F]=k.useState(null);ia();const V=async()=>{try{c(!0),f(null);const U=await pe.get("/bills");U.data.success&&Array.isArray(U.data.data)?m(U.data.data):m([])}catch(U){console.error("Error loading bills:",U),f("Failed to load bills. Please try again.")}finally{c(!1)}};k.useEffect(()=>{V()},[]);const Q=g.filter(U=>U.billtype==="Shared"),$=U=>{_(U),E(!0)},P=()=>{E(!1),_(null)},X=()=>{se.success("Bill assigned successfully!")},Z=U=>{D(U),b(!0)},de=()=>{b(!1),D(null)},he=()=>{V(),b(!1),se.success("Bill Type updated successfully!")},re=U=>{F(U),R(!0)},le=async()=>{try{if(!z)return;await pe.delete(`/bills/${z.id}`),se.success("Bill type deleted successfully"),R(!1),F(null),V()}catch(U){console.error("Delete bill type error:",U),se.error("Failed to delete bill type")}},W=()=>{R(!1),F(null)};return e.jsxs("div",{children:[l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):d?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[d,e.jsx("button",{onClick:V,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):Q.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Q.map((U,H)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:H+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:U.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ee=>{ee.stopPropagation(),$(U)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(vr,{size:20})}),e.jsx("span",{children:U.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ee=>{ee.stopPropagation(),Z(U)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:ee=>{ee.stopPropagation(),re(U)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},U.id))})]})}),C&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:de,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(up,{onClose:de,onUpdated:he,bills:M})]})}),e.jsx(fp,{isOpen:S,onClose:P,selectedBill:B,onAssignSuccess:X}),G&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',z.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function hp(){const[l,c]=k.useState(!1),[d,f]=k.useState(null),[g,m]=k.useState([]),[w,N]=k.useState(!1),[C,b]=k.useState(!1),[S,E]=k.useState(!1),[M,D]=k.useState(null),[B,_]=k.useState(null),[G,R]=k.useState(!1),[z,F]=k.useState(null),[V,Q]=k.useState("bills"),$=ia(),P=async()=>{try{c(!0),f(null);const ge=await pe.get("/bills");ge.data.success&&Array.isArray(ge.data.data)?m(ge.data.data):m([])}catch(ge){console.error("Error loading bills:",ge),f("Failed to load bills. Please try again.")}finally{c(!1)}};k.useEffect(()=>{P()},[]);const X=g.filter(ge=>ge.billtype==="Measurable"),Z=ge=>{_(ge),E(!0)},de=()=>{E(!1),_(null)},he=()=>{se.success("Bill assigned successfully!")},re=()=>{N(!0)},le=()=>{N(!1)},W=()=>{P(),N(!1)},U=ge=>{D(ge),b(!0)},H=()=>{b(!1),D(null)},ee=()=>{P(),b(!1),se.success("Bill Type updated successfully!")},oe=ge=>{F(ge),R(!0)},we=async()=>{try{if(!z)return;await pe.delete(`/bills/${z.id}`),se.success("Bill type deleted successfully"),R(!1),F(null),P()}catch(ge){console.error("Delete bill type error:",ge),se.error("Failed to delete bill type")}},K=()=>{R(!1),F(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:re,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>Q("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${V==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",X.length,")"]}),e.jsx("button",{onClick:()=>Q("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${V==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),V==="bills"&&e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):d?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[d,e.jsx("button",{onClick:P,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):X.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:X.map((ge,Oe)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>$(`/billranges/${ge.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Oe+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ge.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:xe=>{xe.stopPropagation(),Z(ge)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(vr,{size:20})}),e.jsx("span",{children:ge.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:xe=>{xe.stopPropagation(),U(ge)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:xe=>{xe.stopPropagation(),oe(ge)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},ge.id))})]})})}),V==="sharedValueBills"&&e.jsx(X3,{}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:le,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(Y3,{onClose:le,onCreated:W})]})}),C&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:H,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(up,{onClose:H,onUpdated:ee,bills:M})]})}),e.jsx(fp,{isOpen:S,onClose:de,selectedBill:B,onAssignSuccess:he}),G&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',z.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:K,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:we,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function Z3({house:l,apartment:c,floor:d,onClose:f,onUploadSuccess:g}){const[m,w]=k.useState(!1),[N,C]=k.useState([]),[b,S]=k.useState([]),[E,M]=k.useState(!0),D=k.useRef(null);k.useEffect(()=>{R()},[l.id]);const B=Q=>{const $=Array.from(Q.target.files);S(P=>[...P,...$])},_=Q=>{S($=>$.filter((P,X)=>X!==Q))},G=async()=>{if(b.length===0){se.error("Please select at least one file");return}try{w(!0);const Q=new FormData;b.forEach(P=>{Q.append("documents",P)}),Q.append("apartmentId",c.id),Q.append("floorId",d.id),Q.append("houseId",l.id),(await pe.post("/house-documents/upload",Q,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(se.success("House documents uploaded successfully!"),S([]),g?.(),R(),D.current&&(D.current.value=""))}catch(Q){console.error("Upload error:",Q);const $=Q.response?.data?.message||"Failed to upload house documents";se.error($)}finally{w(!1)}},R=async()=>{try{M(!0),console.log("Loading documents for house ID:",l.id);const Q=await pe.get(`/house-documents/${l.id}/documents`);console.log("Documents response:",Q.data),Q.data.success?(C(Q.data.data),console.log("Documents loaded:",Q.data.data)):console.error("API response not successful:",Q.data)}catch(Q){console.error("Error loading house documents:",Q);const $=Q.response?.data?.message||"Failed to load house documents";se.error($),Q.response&&(console.error("Error response:",Q.response.data),console.error("Error status:",Q.response.status))}finally{M(!1)}},z=async Q=>{if(window.confirm("Are you sure you want to delete this document?"))try{await pe.delete(`/house-documents/documents/${Q}`),se.success("House document deleted successfully"),R()}catch($){console.error("Delete error:",$);const P=$.response?.data?.message||"Failed to delete house document";se.error(P)}},F=async Q=>{try{const $=await pe.get(`/house-documents/documents/${Q.id}/download`,{responseType:"blob"}),P=window.URL.createObjectURL(new Blob([$.data])),X=document.createElement("a");X.href=P,X.setAttribute("download",Q.original_name||Q.file_name),document.body.appendChild(X),X.click(),X.remove(),window.URL.revokeObjectURL(P)}catch($){console.error("Download error:",$);const P=$.response?.data?.message||"Failed to download house document";se.error(P)}},V=Q=>{if(Q===0)return"0 Bytes";const $=1024,P=["Bytes","KB","MB","GB"],X=Math.floor(Math.log(Q)/Math.log($));return parseFloat((Q/Math.pow($,X)).toFixed(2))+" "+P[X]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",l.house_id]}),e.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),c&&d&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",c.name," |",e.jsx("strong",{children:" Floor:"})," ",d.floor_id," |",e.jsx("strong",{children:" House:"})," ",l.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:D,onChange:B,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>D.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(hs,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((Q,$)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ya,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:Q.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:V(Q.size)})]})]}),e.jsx("button",{onClick:()=>_($),className:"text-red-500 hover:text-red-700",children:e.jsx(Qt,{size:16})})]},$))})]}),b.length>0&&e.jsx("button",{onClick:G,disabled:m,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hs,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),E?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):N.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(ya,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:R,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:N.map(Q=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(ya,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Q.original_name||Q.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[V(Q.file_size),"  Uploaded on ",new Date(Q.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(Q),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Uo,{size:18})}),e.jsx("button",{onClick:()=>z(Q.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:18})})]})]},Q.id))})]})]})}const Q3="modulepreload",$3=function(l){return"/"+l},gm={},W3=function(c,d,f){let g=Promise.resolve();if(d&&d.length>0){let C=function(b){return Promise.all(b.map(S=>Promise.resolve(S).then(E=>({status:"fulfilled",value:E}),E=>({status:"rejected",reason:E}))))};document.getElementsByTagName("link");const w=document.querySelector("meta[property=csp-nonce]"),N=w?.nonce||w?.getAttribute("nonce");g=C(d.map(b=>{if(b=$3(b),b in gm)return;gm[b]=!0;const S=b.endsWith(".css"),E=S?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${E}`))return;const M=document.createElement("link");if(M.rel=S?"stylesheet":Q3,S||(M.as="script"),M.crossOrigin="",M.href=b,N&&M.setAttribute("nonce",N),document.head.appendChild(M),S)return new Promise((D,B)=>{M.addEventListener("load",D),M.addEventListener("error",()=>B(new Error(`Unable to preload CSS for ${b}`)))})}))}function m(w){const N=new Event("vite:preloadError",{cancelable:!0});if(N.payload=w,window.dispatchEvent(N),!N.defaultPrevented)throw w}return g.then(w=>{for(const N of w||[])N.status==="rejected"&&m(N.reason);return c().catch(m)})};var pi={},P0,mm;function K3(){return mm||(mm=1,P0=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),P0}var z0={},Zn={},pm;function Tl(){if(pm)return Zn;pm=1;let l;const c=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Zn.getSymbolSize=function(f){if(!f)throw new Error('"version" cannot be null or undefined');if(f<1||f>40)throw new Error('"version" should be in range from 1 to 40');return f*4+17},Zn.getSymbolTotalCodewords=function(f){return c[f]},Zn.getBCHDigit=function(d){let f=0;for(;d!==0;)f++,d>>>=1;return f},Zn.setToSJISFunction=function(f){if(typeof f!="function")throw new Error('"toSJISFunc" is not a valid function.');l=f},Zn.isKanjiModeEnabled=function(){return typeof l<"u"},Zn.toSJIS=function(f){return l(f)},Zn}var U0={},ym;function Pf(){return ym||(ym=1,function(l){l.L={bit:1},l.M={bit:0},l.Q={bit:3},l.H={bit:2};function c(d){if(typeof d!="string")throw new Error("Param is not a string");switch(d.toLowerCase()){case"l":case"low":return l.L;case"m":case"medium":return l.M;case"q":case"quartile":return l.Q;case"h":case"high":return l.H;default:throw new Error("Unknown EC Level: "+d)}}l.isValid=function(f){return f&&typeof f.bit<"u"&&f.bit>=0&&f.bit<4},l.from=function(f,g){if(l.isValid(f))return f;try{return c(f)}catch{return g}}}(U0)),U0}var H0,bm;function J3(){if(bm)return H0;bm=1;function l(){this.buffer=[],this.length=0}return l.prototype={get:function(c){const d=Math.floor(c/8);return(this.buffer[d]>>>7-c%8&1)===1},put:function(c,d){for(let f=0;f<d;f++)this.putBit((c>>>d-f-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(c){const d=Math.floor(this.length/8);this.buffer.length<=d&&this.buffer.push(0),c&&(this.buffer[d]|=128>>>this.length%8),this.length++}},H0=l,H0}var V0,wm;function e4(){if(wm)return V0;wm=1;function l(c){if(!c||c<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=c,this.data=new Uint8Array(c*c),this.reservedBit=new Uint8Array(c*c)}return l.prototype.set=function(c,d,f,g){const m=c*this.size+d;this.data[m]=f,g&&(this.reservedBit[m]=!0)},l.prototype.get=function(c,d){return this.data[c*this.size+d]},l.prototype.xor=function(c,d,f){this.data[c*this.size+d]^=f},l.prototype.isReserved=function(c,d){return this.reservedBit[c*this.size+d]},V0=l,V0}var G0={},vm;function t4(){return vm||(vm=1,function(l){const c=Tl().getSymbolSize;l.getRowColCoords=function(f){if(f===1)return[];const g=Math.floor(f/7)+2,m=c(f),w=m===145?26:Math.ceil((m-13)/(2*g-2))*2,N=[m-7];for(let C=1;C<g-1;C++)N[C]=N[C-1]-w;return N.push(6),N.reverse()},l.getPositions=function(f){const g=[],m=l.getRowColCoords(f),w=m.length;for(let N=0;N<w;N++)for(let C=0;C<w;C++)N===0&&C===0||N===0&&C===w-1||N===w-1&&C===0||g.push([m[N],m[C]]);return g}}(G0)),G0}var q0={},Nm;function a4(){if(Nm)return q0;Nm=1;const l=Tl().getSymbolSize,c=7;return q0.getPositions=function(f){const g=l(f);return[[0,0],[g-c,0],[0,g-c]]},q0}var Y0={},jm;function r4(){return jm||(jm=1,function(l){l.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const c={N1:3,N2:3,N3:40,N4:10};l.isValid=function(g){return g!=null&&g!==""&&!isNaN(g)&&g>=0&&g<=7},l.from=function(g){return l.isValid(g)?parseInt(g,10):void 0},l.getPenaltyN1=function(g){const m=g.size;let w=0,N=0,C=0,b=null,S=null;for(let E=0;E<m;E++){N=C=0,b=S=null;for(let M=0;M<m;M++){let D=g.get(E,M);D===b?N++:(N>=5&&(w+=c.N1+(N-5)),b=D,N=1),D=g.get(M,E),D===S?C++:(C>=5&&(w+=c.N1+(C-5)),S=D,C=1)}N>=5&&(w+=c.N1+(N-5)),C>=5&&(w+=c.N1+(C-5))}return w},l.getPenaltyN2=function(g){const m=g.size;let w=0;for(let N=0;N<m-1;N++)for(let C=0;C<m-1;C++){const b=g.get(N,C)+g.get(N,C+1)+g.get(N+1,C)+g.get(N+1,C+1);(b===4||b===0)&&w++}return w*c.N2},l.getPenaltyN3=function(g){const m=g.size;let w=0,N=0,C=0;for(let b=0;b<m;b++){N=C=0;for(let S=0;S<m;S++)N=N<<1&2047|g.get(b,S),S>=10&&(N===1488||N===93)&&w++,C=C<<1&2047|g.get(S,b),S>=10&&(C===1488||C===93)&&w++}return w*c.N3},l.getPenaltyN4=function(g){let m=0;const w=g.data.length;for(let C=0;C<w;C++)m+=g.data[C];return Math.abs(Math.ceil(m*100/w/5)-10)*c.N4};function d(f,g,m){switch(f){case l.Patterns.PATTERN000:return(g+m)%2===0;case l.Patterns.PATTERN001:return g%2===0;case l.Patterns.PATTERN010:return m%3===0;case l.Patterns.PATTERN011:return(g+m)%3===0;case l.Patterns.PATTERN100:return(Math.floor(g/2)+Math.floor(m/3))%2===0;case l.Patterns.PATTERN101:return g*m%2+g*m%3===0;case l.Patterns.PATTERN110:return(g*m%2+g*m%3)%2===0;case l.Patterns.PATTERN111:return(g*m%3+(g+m)%2)%2===0;default:throw new Error("bad maskPattern:"+f)}}l.applyMask=function(g,m){const w=m.size;for(let N=0;N<w;N++)for(let C=0;C<w;C++)m.isReserved(C,N)||m.xor(C,N,d(g,C,N))},l.getBestMask=function(g,m){const w=Object.keys(l.Patterns).length;let N=0,C=1/0;for(let b=0;b<w;b++){m(b),l.applyMask(b,g);const S=l.getPenaltyN1(g)+l.getPenaltyN2(g)+l.getPenaltyN3(g)+l.getPenaltyN4(g);l.applyMask(b,g),S<C&&(C=S,N=b)}return N}}(Y0)),Y0}var rd={},Cm;function xp(){if(Cm)return rd;Cm=1;const l=Pf(),c=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],d=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return rd.getBlocksCount=function(g,m){switch(m){case l.L:return c[(g-1)*4+0];case l.M:return c[(g-1)*4+1];case l.Q:return c[(g-1)*4+2];case l.H:return c[(g-1)*4+3];default:return}},rd.getTotalCodewordsCount=function(g,m){switch(m){case l.L:return d[(g-1)*4+0];case l.M:return d[(g-1)*4+1];case l.Q:return d[(g-1)*4+2];case l.H:return d[(g-1)*4+3];default:return}},rd}var X0={},Co={},km;function s4(){if(km)return Co;km=1;const l=new Uint8Array(512),c=new Uint8Array(256);return function(){let f=1;for(let g=0;g<255;g++)l[g]=f,c[f]=g,f<<=1,f&256&&(f^=285);for(let g=255;g<512;g++)l[g]=l[g-255]}(),Co.log=function(f){if(f<1)throw new Error("log("+f+")");return c[f]},Co.exp=function(f){return l[f]},Co.mul=function(f,g){return f===0||g===0?0:l[c[f]+c[g]]},Co}var Am;function n4(){return Am||(Am=1,function(l){const c=s4();l.mul=function(f,g){const m=new Uint8Array(f.length+g.length-1);for(let w=0;w<f.length;w++)for(let N=0;N<g.length;N++)m[w+N]^=c.mul(f[w],g[N]);return m},l.mod=function(f,g){let m=new Uint8Array(f);for(;m.length-g.length>=0;){const w=m[0];for(let C=0;C<g.length;C++)m[C]^=c.mul(g[C],w);let N=0;for(;N<m.length&&m[N]===0;)N++;m=m.slice(N)}return m},l.generateECPolynomial=function(f){let g=new Uint8Array([1]);for(let m=0;m<f;m++)g=l.mul(g,new Uint8Array([1,c.exp(m)]));return g}}(X0)),X0}var Z0,Sm;function l4(){if(Sm)return Z0;Sm=1;const l=n4();function c(d){this.genPoly=void 0,this.degree=d,this.degree&&this.initialize(this.degree)}return c.prototype.initialize=function(f){this.degree=f,this.genPoly=l.generateECPolynomial(this.degree)},c.prototype.encode=function(f){if(!this.genPoly)throw new Error("Encoder not initialized");const g=new Uint8Array(f.length+this.degree);g.set(f);const m=l.mod(g,this.genPoly),w=this.degree-m.length;if(w>0){const N=new Uint8Array(this.degree);return N.set(m,w),N}return m},Z0=c,Z0}var Q0={},$0={},W0={},Em;function gp(){return Em||(Em=1,W0.isValid=function(c){return!isNaN(c)&&c>=1&&c<=40}),W0}var Bs={},Tm;function mp(){if(Tm)return Bs;Tm=1;const l="[0-9]+",c="[A-Z $%*+\\-./:]+";let d="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";d=d.replace(/u/g,"\\u");const f="(?:(?![A-Z0-9 $%*+\\-./:]|"+d+`)(?:.|[\r
]))+`;Bs.KANJI=new RegExp(d,"g"),Bs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Bs.BYTE=new RegExp(f,"g"),Bs.NUMERIC=new RegExp(l,"g"),Bs.ALPHANUMERIC=new RegExp(c,"g");const g=new RegExp("^"+d+"$"),m=new RegExp("^"+l+"$"),w=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Bs.testKanji=function(C){return g.test(C)},Bs.testNumeric=function(C){return m.test(C)},Bs.testAlphanumeric=function(C){return w.test(C)},Bs}var _m;function _l(){return _m||(_m=1,function(l){const c=gp(),d=mp();l.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},l.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},l.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},l.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},l.MIXED={bit:-1},l.getCharCountIndicator=function(m,w){if(!m.ccBits)throw new Error("Invalid mode: "+m);if(!c.isValid(w))throw new Error("Invalid version: "+w);return w>=1&&w<10?m.ccBits[0]:w<27?m.ccBits[1]:m.ccBits[2]},l.getBestModeForData=function(m){return d.testNumeric(m)?l.NUMERIC:d.testAlphanumeric(m)?l.ALPHANUMERIC:d.testKanji(m)?l.KANJI:l.BYTE},l.toString=function(m){if(m&&m.id)return m.id;throw new Error("Invalid mode")},l.isValid=function(m){return m&&m.bit&&m.ccBits};function f(g){if(typeof g!="string")throw new Error("Param is not a string");switch(g.toLowerCase()){case"numeric":return l.NUMERIC;case"alphanumeric":return l.ALPHANUMERIC;case"kanji":return l.KANJI;case"byte":return l.BYTE;default:throw new Error("Unknown mode: "+g)}}l.from=function(m,w){if(l.isValid(m))return m;try{return f(m)}catch{return w}}}($0)),$0}var Mm;function i4(){return Mm||(Mm=1,function(l){const c=Tl(),d=xp(),f=Pf(),g=_l(),m=gp(),w=7973,N=c.getBCHDigit(w);function C(M,D,B){for(let _=1;_<=40;_++)if(D<=l.getCapacity(_,B,M))return _}function b(M,D){return g.getCharCountIndicator(M,D)+4}function S(M,D){let B=0;return M.forEach(function(_){const G=b(_.mode,D);B+=G+_.getBitsLength()}),B}function E(M,D){for(let B=1;B<=40;B++)if(S(M,B)<=l.getCapacity(B,D,g.MIXED))return B}l.from=function(D,B){return m.isValid(D)?parseInt(D,10):B},l.getCapacity=function(D,B,_){if(!m.isValid(D))throw new Error("Invalid QR Code version");typeof _>"u"&&(_=g.BYTE);const G=c.getSymbolTotalCodewords(D),R=d.getTotalCodewordsCount(D,B),z=(G-R)*8;if(_===g.MIXED)return z;const F=z-b(_,D);switch(_){case g.NUMERIC:return Math.floor(F/10*3);case g.ALPHANUMERIC:return Math.floor(F/11*2);case g.KANJI:return Math.floor(F/13);case g.BYTE:default:return Math.floor(F/8)}},l.getBestVersionForData=function(D,B){let _;const G=f.from(B,f.M);if(Array.isArray(D)){if(D.length>1)return E(D,G);if(D.length===0)return 1;_=D[0]}else _=D;return C(_.mode,_.getLength(),G)},l.getEncodedBits=function(D){if(!m.isValid(D)||D<7)throw new Error("Invalid QR Code version");let B=D<<12;for(;c.getBCHDigit(B)-N>=0;)B^=w<<c.getBCHDigit(B)-N;return D<<12|B}}(Q0)),Q0}var K0={},Dm;function o4(){if(Dm)return K0;Dm=1;const l=Tl(),c=1335,d=21522,f=l.getBCHDigit(c);return K0.getEncodedBits=function(m,w){const N=m.bit<<3|w;let C=N<<10;for(;l.getBCHDigit(C)-f>=0;)C^=c<<l.getBCHDigit(C)-f;return(N<<10|C)^d},K0}var J0={},ef,Rm;function c4(){if(Rm)return ef;Rm=1;const l=_l();function c(d){this.mode=l.NUMERIC,this.data=d.toString()}return c.getBitsLength=function(f){return 10*Math.floor(f/3)+(f%3?f%3*3+1:0)},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(f){let g,m,w;for(g=0;g+3<=this.data.length;g+=3)m=this.data.substr(g,3),w=parseInt(m,10),f.put(w,10);const N=this.data.length-g;N>0&&(m=this.data.substr(g),w=parseInt(m,10),f.put(w,N*3+1))},ef=c,ef}var tf,Im;function d4(){if(Im)return tf;Im=1;const l=_l(),c=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function d(f){this.mode=l.ALPHANUMERIC,this.data=f}return d.getBitsLength=function(g){return 11*Math.floor(g/2)+6*(g%2)},d.prototype.getLength=function(){return this.data.length},d.prototype.getBitsLength=function(){return d.getBitsLength(this.data.length)},d.prototype.write=function(g){let m;for(m=0;m+2<=this.data.length;m+=2){let w=c.indexOf(this.data[m])*45;w+=c.indexOf(this.data[m+1]),g.put(w,11)}this.data.length%2&&g.put(c.indexOf(this.data[m]),6)},tf=d,tf}var af,Om;function u4(){if(Om)return af;Om=1;const l=_l();function c(d){this.mode=l.BYTE,typeof d=="string"?this.data=new TextEncoder().encode(d):this.data=new Uint8Array(d)}return c.getBitsLength=function(f){return f*8},c.prototype.getLength=function(){return this.data.length},c.prototype.getBitsLength=function(){return c.getBitsLength(this.data.length)},c.prototype.write=function(d){for(let f=0,g=this.data.length;f<g;f++)d.put(this.data[f],8)},af=c,af}var rf,Bm;function f4(){if(Bm)return rf;Bm=1;const l=_l(),c=Tl();function d(f){this.mode=l.KANJI,this.data=f}return d.getBitsLength=function(g){return g*13},d.prototype.getLength=function(){return this.data.length},d.prototype.getBitsLength=function(){return d.getBitsLength(this.data.length)},d.prototype.write=function(f){let g;for(g=0;g<this.data.length;g++){let m=c.toSJIS(this.data[g]);if(m>=33088&&m<=40956)m-=33088;else if(m>=57408&&m<=60351)m-=49472;else throw new Error("Invalid SJIS character: "+this.data[g]+`
Make sure your charset is UTF-8`);m=(m>>>8&255)*192+(m&255),f.put(m,13)}},rf=d,rf}var sf={exports:{}},Lm;function h4(){return Lm||(Lm=1,function(l){var c={single_source_shortest_paths:function(d,f,g){var m={},w={};w[f]=0;var N=c.PriorityQueue.make();N.push(f,0);for(var C,b,S,E,M,D,B,_,G;!N.empty();){C=N.pop(),b=C.value,E=C.cost,M=d[b]||{};for(S in M)M.hasOwnProperty(S)&&(D=M[S],B=E+D,_=w[S],G=typeof w[S]>"u",(G||_>B)&&(w[S]=B,N.push(S,B),m[S]=b))}if(typeof g<"u"&&typeof w[g]>"u"){var R=["Could not find a path from ",f," to ",g,"."].join("");throw new Error(R)}return m},extract_shortest_path_from_predecessor_list:function(d,f){for(var g=[],m=f;m;)g.push(m),d[m],m=d[m];return g.reverse(),g},find_path:function(d,f,g){var m=c.single_source_shortest_paths(d,f,g);return c.extract_shortest_path_from_predecessor_list(m,g)},PriorityQueue:{make:function(d){var f=c.PriorityQueue,g={},m;d=d||{};for(m in f)f.hasOwnProperty(m)&&(g[m]=f[m]);return g.queue=[],g.sorter=d.sorter||f.default_sorter,g},default_sorter:function(d,f){return d.cost-f.cost},push:function(d,f){var g={value:d,cost:f};this.queue.push(g),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};l.exports=c}(sf)),sf.exports}var Fm;function x4(){return Fm||(Fm=1,function(l){const c=_l(),d=c4(),f=d4(),g=u4(),m=f4(),w=mp(),N=Tl(),C=h4();function b(R){return unescape(encodeURIComponent(R)).length}function S(R,z,F){const V=[];let Q;for(;(Q=R.exec(F))!==null;)V.push({data:Q[0],index:Q.index,mode:z,length:Q[0].length});return V}function E(R){const z=S(w.NUMERIC,c.NUMERIC,R),F=S(w.ALPHANUMERIC,c.ALPHANUMERIC,R);let V,Q;return N.isKanjiModeEnabled()?(V=S(w.BYTE,c.BYTE,R),Q=S(w.KANJI,c.KANJI,R)):(V=S(w.BYTE_KANJI,c.BYTE,R),Q=[]),z.concat(F,V,Q).sort(function(P,X){return P.index-X.index}).map(function(P){return{data:P.data,mode:P.mode,length:P.length}})}function M(R,z){switch(z){case c.NUMERIC:return d.getBitsLength(R);case c.ALPHANUMERIC:return f.getBitsLength(R);case c.KANJI:return m.getBitsLength(R);case c.BYTE:return g.getBitsLength(R)}}function D(R){return R.reduce(function(z,F){const V=z.length-1>=0?z[z.length-1]:null;return V&&V.mode===F.mode?(z[z.length-1].data+=F.data,z):(z.push(F),z)},[])}function B(R){const z=[];for(let F=0;F<R.length;F++){const V=R[F];switch(V.mode){case c.NUMERIC:z.push([V,{data:V.data,mode:c.ALPHANUMERIC,length:V.length},{data:V.data,mode:c.BYTE,length:V.length}]);break;case c.ALPHANUMERIC:z.push([V,{data:V.data,mode:c.BYTE,length:V.length}]);break;case c.KANJI:z.push([V,{data:V.data,mode:c.BYTE,length:b(V.data)}]);break;case c.BYTE:z.push([{data:V.data,mode:c.BYTE,length:b(V.data)}])}}return z}function _(R,z){const F={},V={start:{}};let Q=["start"];for(let $=0;$<R.length;$++){const P=R[$],X=[];for(let Z=0;Z<P.length;Z++){const de=P[Z],he=""+$+Z;X.push(he),F[he]={node:de,lastCount:0},V[he]={};for(let re=0;re<Q.length;re++){const le=Q[re];F[le]&&F[le].node.mode===de.mode?(V[le][he]=M(F[le].lastCount+de.length,de.mode)-M(F[le].lastCount,de.mode),F[le].lastCount+=de.length):(F[le]&&(F[le].lastCount=de.length),V[le][he]=M(de.length,de.mode)+4+c.getCharCountIndicator(de.mode,z))}}Q=X}for(let $=0;$<Q.length;$++)V[Q[$]].end=0;return{map:V,table:F}}function G(R,z){let F;const V=c.getBestModeForData(R);if(F=c.from(z,V),F!==c.BYTE&&F.bit<V.bit)throw new Error('"'+R+'" cannot be encoded with mode '+c.toString(F)+`.
 Suggested mode is: `+c.toString(V));switch(F===c.KANJI&&!N.isKanjiModeEnabled()&&(F=c.BYTE),F){case c.NUMERIC:return new d(R);case c.ALPHANUMERIC:return new f(R);case c.KANJI:return new m(R);case c.BYTE:return new g(R)}}l.fromArray=function(z){return z.reduce(function(F,V){return typeof V=="string"?F.push(G(V,null)):V.data&&F.push(G(V.data,V.mode)),F},[])},l.fromString=function(z,F){const V=E(z,N.isKanjiModeEnabled()),Q=B(V),$=_(Q,F),P=C.find_path($.map,"start","end"),X=[];for(let Z=1;Z<P.length-1;Z++)X.push($.table[P[Z]].node);return l.fromArray(D(X))},l.rawSplit=function(z){return l.fromArray(E(z,N.isKanjiModeEnabled()))}}(J0)),J0}var Pm;function g4(){if(Pm)return z0;Pm=1;const l=Tl(),c=Pf(),d=J3(),f=e4(),g=t4(),m=a4(),w=r4(),N=xp(),C=l4(),b=i4(),S=o4(),E=_l(),M=x4();function D($,P){const X=$.size,Z=m.getPositions(P);for(let de=0;de<Z.length;de++){const he=Z[de][0],re=Z[de][1];for(let le=-1;le<=7;le++)if(!(he+le<=-1||X<=he+le))for(let W=-1;W<=7;W++)re+W<=-1||X<=re+W||(le>=0&&le<=6&&(W===0||W===6)||W>=0&&W<=6&&(le===0||le===6)||le>=2&&le<=4&&W>=2&&W<=4?$.set(he+le,re+W,!0,!0):$.set(he+le,re+W,!1,!0))}}function B($){const P=$.size;for(let X=8;X<P-8;X++){const Z=X%2===0;$.set(X,6,Z,!0),$.set(6,X,Z,!0)}}function _($,P){const X=g.getPositions(P);for(let Z=0;Z<X.length;Z++){const de=X[Z][0],he=X[Z][1];for(let re=-2;re<=2;re++)for(let le=-2;le<=2;le++)re===-2||re===2||le===-2||le===2||re===0&&le===0?$.set(de+re,he+le,!0,!0):$.set(de+re,he+le,!1,!0)}}function G($,P){const X=$.size,Z=b.getEncodedBits(P);let de,he,re;for(let le=0;le<18;le++)de=Math.floor(le/3),he=le%3+X-8-3,re=(Z>>le&1)===1,$.set(de,he,re,!0),$.set(he,de,re,!0)}function R($,P,X){const Z=$.size,de=S.getEncodedBits(P,X);let he,re;for(he=0;he<15;he++)re=(de>>he&1)===1,he<6?$.set(he,8,re,!0):he<8?$.set(he+1,8,re,!0):$.set(Z-15+he,8,re,!0),he<8?$.set(8,Z-he-1,re,!0):he<9?$.set(8,15-he-1+1,re,!0):$.set(8,15-he-1,re,!0);$.set(Z-8,8,1,!0)}function z($,P){const X=$.size;let Z=-1,de=X-1,he=7,re=0;for(let le=X-1;le>0;le-=2)for(le===6&&le--;;){for(let W=0;W<2;W++)if(!$.isReserved(de,le-W)){let U=!1;re<P.length&&(U=(P[re]>>>he&1)===1),$.set(de,le-W,U),he--,he===-1&&(re++,he=7)}if(de+=Z,de<0||X<=de){de-=Z,Z=-Z;break}}}function F($,P,X){const Z=new d;X.forEach(function(W){Z.put(W.mode.bit,4),Z.put(W.getLength(),E.getCharCountIndicator(W.mode,$)),W.write(Z)});const de=l.getSymbolTotalCodewords($),he=N.getTotalCodewordsCount($,P),re=(de-he)*8;for(Z.getLengthInBits()+4<=re&&Z.put(0,4);Z.getLengthInBits()%8!==0;)Z.putBit(0);const le=(re-Z.getLengthInBits())/8;for(let W=0;W<le;W++)Z.put(W%2?17:236,8);return V(Z,$,P)}function V($,P,X){const Z=l.getSymbolTotalCodewords(P),de=N.getTotalCodewordsCount(P,X),he=Z-de,re=N.getBlocksCount(P,X),le=Z%re,W=re-le,U=Math.floor(Z/re),H=Math.floor(he/re),ee=H+1,oe=U-H,we=new C(oe);let K=0;const ge=new Array(re),Oe=new Array(re);let xe=0;const ve=new Uint8Array($.buffer);for(let dt=0;dt<re;dt++){const rt=dt<W?H:ee;ge[dt]=ve.slice(K,K+rt),Oe[dt]=we.encode(ge[dt]),K+=rt,xe=Math.max(xe,rt)}const Fe=new Uint8Array(Z);let ie=0,Qe,ye;for(Qe=0;Qe<xe;Qe++)for(ye=0;ye<re;ye++)Qe<ge[ye].length&&(Fe[ie++]=ge[ye][Qe]);for(Qe=0;Qe<oe;Qe++)for(ye=0;ye<re;ye++)Fe[ie++]=Oe[ye][Qe];return Fe}function Q($,P,X,Z){let de;if(Array.isArray($))de=M.fromArray($);else if(typeof $=="string"){let U=P;if(!U){const H=M.rawSplit($);U=b.getBestVersionForData(H,X)}de=M.fromString($,U||40)}else throw new Error("Invalid data");const he=b.getBestVersionForData(de,X);if(!he)throw new Error("The amount of data is too big to be stored in a QR Code");if(!P)P=he;else if(P<he)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+he+`.
`);const re=F(P,X,de),le=l.getSymbolSize(P),W=new f(le);return D(W,P),B(W),_(W,P),R(W,X,0),P>=7&&G(W,P),z(W,re),isNaN(Z)&&(Z=w.getBestMask(W,R.bind(null,W,X))),w.applyMask(Z,W),R(W,X,Z),{modules:W,version:P,errorCorrectionLevel:X,maskPattern:Z,segments:de}}return z0.create=function(P,X){if(typeof P>"u"||P==="")throw new Error("No input text");let Z=c.M,de,he;return typeof X<"u"&&(Z=c.from(X.errorCorrectionLevel,c.M),de=b.from(X.version),he=w.from(X.maskPattern),X.toSJISFunc&&l.setToSJISFunction(X.toSJISFunc)),Q(P,de,Z,he)},z0}var nf={},lf={},zm;function pp(){return zm||(zm=1,function(l){function c(d){if(typeof d=="number"&&(d=d.toString()),typeof d!="string")throw new Error("Color should be defined as hex string");let f=d.slice().replace("#","").split("");if(f.length<3||f.length===5||f.length>8)throw new Error("Invalid hex color: "+d);(f.length===3||f.length===4)&&(f=Array.prototype.concat.apply([],f.map(function(m){return[m,m]}))),f.length===6&&f.push("F","F");const g=parseInt(f.join(""),16);return{r:g>>24&255,g:g>>16&255,b:g>>8&255,a:g&255,hex:"#"+f.slice(0,6).join("")}}l.getOptions=function(f){f||(f={}),f.color||(f.color={});const g=typeof f.margin>"u"||f.margin===null||f.margin<0?4:f.margin,m=f.width&&f.width>=21?f.width:void 0,w=f.scale||4;return{width:m,scale:m?4:w,margin:g,color:{dark:c(f.color.dark||"#000000ff"),light:c(f.color.light||"#ffffffff")},type:f.type,rendererOpts:f.rendererOpts||{}}},l.getScale=function(f,g){return g.width&&g.width>=f+g.margin*2?g.width/(f+g.margin*2):g.scale},l.getImageWidth=function(f,g){const m=l.getScale(f,g);return Math.floor((f+g.margin*2)*m)},l.qrToImageData=function(f,g,m){const w=g.modules.size,N=g.modules.data,C=l.getScale(w,m),b=Math.floor((w+m.margin*2)*C),S=m.margin*C,E=[m.color.light,m.color.dark];for(let M=0;M<b;M++)for(let D=0;D<b;D++){let B=(M*b+D)*4,_=m.color.light;if(M>=S&&D>=S&&M<b-S&&D<b-S){const G=Math.floor((M-S)/C),R=Math.floor((D-S)/C);_=E[N[G*w+R]?1:0]}f[B++]=_.r,f[B++]=_.g,f[B++]=_.b,f[B]=_.a}}}(lf)),lf}var Um;function m4(){return Um||(Um=1,function(l){const c=pp();function d(g,m,w){g.clearRect(0,0,m.width,m.height),m.style||(m.style={}),m.height=w,m.width=w,m.style.height=w+"px",m.style.width=w+"px"}function f(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}l.render=function(m,w,N){let C=N,b=w;typeof C>"u"&&(!w||!w.getContext)&&(C=w,w=void 0),w||(b=f()),C=c.getOptions(C);const S=c.getImageWidth(m.modules.size,C),E=b.getContext("2d"),M=E.createImageData(S,S);return c.qrToImageData(M.data,m,C),d(E,b,S),E.putImageData(M,0,0),b},l.renderToDataURL=function(m,w,N){let C=N;typeof C>"u"&&(!w||!w.getContext)&&(C=w,w=void 0),C||(C={});const b=l.render(m,w,C),S=C.type||"image/png",E=C.rendererOpts||{};return b.toDataURL(S,E.quality)}}(nf)),nf}var of={},Hm;function p4(){if(Hm)return of;Hm=1;const l=pp();function c(g,m){const w=g.a/255,N=m+'="'+g.hex+'"';return w<1?N+" "+m+'-opacity="'+w.toFixed(2).slice(1)+'"':N}function d(g,m,w){let N=g+m;return typeof w<"u"&&(N+=" "+w),N}function f(g,m,w){let N="",C=0,b=!1,S=0;for(let E=0;E<g.length;E++){const M=Math.floor(E%m),D=Math.floor(E/m);!M&&!b&&(b=!0),g[E]?(S++,E>0&&M>0&&g[E-1]||(N+=b?d("M",M+w,.5+D+w):d("m",C,0),C=0,b=!1),M+1<m&&g[E+1]||(N+=d("h",S),S=0)):C++}return N}return of.render=function(m,w,N){const C=l.getOptions(w),b=m.modules.size,S=m.modules.data,E=b+C.margin*2,M=C.color.light.a?"<path "+c(C.color.light,"fill")+' d="M0 0h'+E+"v"+E+'H0z"/>':"",D="<path "+c(C.color.dark,"stroke")+' d="'+f(S,b,C.margin)+'"/>',B='viewBox="0 0 '+E+" "+E+'"',G='<svg xmlns="http://www.w3.org/2000/svg" '+(C.width?'width="'+C.width+'" height="'+C.width+'" ':"")+B+' shape-rendering="crispEdges">'+M+D+`</svg>
`;return typeof N=="function"&&N(null,G),G},of}var Vm;function y4(){if(Vm)return pi;Vm=1;const l=K3(),c=g4(),d=m4(),f=p4();function g(m,w,N,C,b){const S=[].slice.call(arguments,1),E=S.length,M=typeof S[E-1]=="function";if(!M&&!l())throw new Error("Callback required as last argument");if(M){if(E<2)throw new Error("Too few arguments provided");E===2?(b=N,N=w,w=C=void 0):E===3&&(w.getContext&&typeof b>"u"?(b=C,C=void 0):(b=C,C=N,N=w,w=void 0))}else{if(E<1)throw new Error("Too few arguments provided");return E===1?(N=w,w=C=void 0):E===2&&!w.getContext&&(C=N,N=w,w=void 0),new Promise(function(D,B){try{const _=c.create(N,C);D(m(_,w,C))}catch(_){B(_)}})}try{const D=c.create(N,C);b(null,m(D,w,C))}catch(D){b(D)}}return pi.create=c.create,pi.toCanvas=g.bind(null,d.render),pi.toDataURL=g.bind(null,d.renderToDataURL),pi.toString=g.bind(null,function(m,w,N){return f.render(m,N)}),pi}var b4=y4();const w4=md(b4);function v4({houses:l,apartment:c,floor:d,onClose:f}){const[g,m]=k.useState(!1),[w,N]=k.useState(!1),[C,b]=k.useState({}),S=_=>`${_.id}`,E=_=>_.split("|")[0];k.useEffect(()=>{(async()=>{if(l.length){m(!0);try{const G={};for(const R of l){const z=S(R);console.log(`QR Data for House ${R.house_id}:`,z),console.log("House ID only:",E(z));try{G[R.id]=await w4.toDataURL(z,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(F){console.error("QR Generation Error:",F),G[R.id]="",se.error(`Failed to generate QR for house ${R.house_id}`)}}b(G)}catch(G){console.error("Error generating QR codes",G),se.error("Failed to generate QR codes")}m(!1)}})()},[l,c,d]);const M=async()=>{N(!0);try{const{jsPDF:_}=await W3(async()=>{const{jsPDF:he}=await import("./jspdf.es.min-G4NXLWMp.js").then(re=>re.j);return{jsPDF:he}},[]),G=new _("p","mm","a4"),R=85,z=70,F=12,V=40,Q=G.internal.pageSize.getWidth(),$=G.internal.pageSize.getHeight();let P=F,X=2,Z=0;for(let he=0;he<l.length;he++){const re=l[he],le=he%X,W=F+le*(R+F);P+z>$-F&&(G.addPage(),P=F,Z=0),G.setDrawColor(200,200,200),G.rect(W,P,R,z),G.setFontSize(8),G.setFont(void 0,"bold"),G.text(c.name,W+R/2,P+5,{align:"center"}),G.setFontSize(7),G.setTextColor(100,100,100),G.text(`Floor: ${d.floor_id}`,W+R/2,P+9,{align:"center"}),G.setFontSize(14),G.setFont(void 0,"bold"),G.setTextColor(0,0,0),G.text(`${re.house_id}`,W+R/2,P+15,{align:"center"}),G.setFontSize(7),G.setFont(void 0,"bold"),G.setTextColor(0,0,0),G.text(`${re.id}`,W+R/2,P+18,{align:"center"}),C[re.id]&&G.addImage(C[re.id],"PNG",W+(R-V)/2,P+20,V,V),Z++,Z===X&&(P+=z+F,Z=0),he===l.length-1&&Z>0&&(P+=z+F)}const de=`QR_Codes_${c.name.replace(/\s+/g,"_")}_Floor_${d.floor_id}.pdf`;G.save(de),se.success("PDF Generated Successfully!")}catch(_){console.error("PDF Generation Error:",_),se.error("Failed to generate PDF")}N(!1)},D=({house:_})=>{const G=C[_.id];return S(_),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",_.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[c.name,"  Floor ",d.floor_id]}),G?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:G,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${_.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:_.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(kt,{size:24,className:"animate-spin text-gray-400"})})]})})},B=_=>{const G=C[_];if(G){const R=l.find(V=>V.id===_);if(!R)return;const z=S(R);E(z),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${R.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${G}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(K1,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[c.name,"  Floor ",d.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(Mo,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:f,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",l.length," house",l.length!==1?"s":""]}),g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:l.map(_=>e.jsxs("div",{className:"relative",children:[e.jsx(D,{house:_}),e.jsx("button",{onClick:()=>B(_.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},_.id))})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(C).length," QR code",Object.keys(C).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:g||w||!Object.keys(C).length,onClick:M,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:w?e.jsxs(e.Fragment,{children:[e.jsx(kt,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Lf,{size:16}),"Download PDF"]})})]})]})})]})})}function N4(){const[l,c]=k.useState(!1),{apartment_id:d,floor_id:f}=xs();console.log("Apartment ID:",d),console.log("Floor Id: ",f);const[g,m]=k.useState(null),[w,N]=k.useState(null),[C,b]=k.useState([]),[S,E]=k.useState([]),[M,D]=k.useState(null),B=ia(),[_,G]=k.useState(!1),[R,z]=k.useState(!1),[F,V]=k.useState(!1),[Q,$]=k.useState(!1),[P,X]=k.useState(!1),[Z,de]=k.useState(null),[he,re]=k.useState(!1),[le,W]=k.useState(null),[U,H]=k.useState("houses"),[ee,oe]=k.useState(null),[we,K]=k.useState(!1),[ge,Oe]=k.useState(null),[xe,ve]=k.useState([]),[Fe,ie]=k.useState(!1),[Qe,ye]=k.useState(!1);k.useEffect(()=>{d&&(async()=>{try{const $e=await pe.get(`/apartments/${d}`);$e.data.success&&m($e.data.data)}catch($e){console.error("Error fetching apartment:",$e)}})()},[d]),k.useEffect(()=>{f&&(async()=>{try{const $e=await pe.get(`/floors/${f}`);$e.data.success&&N($e.data.data)}catch($e){console.error("Error fetching floors:",$e)}})()},[f]);const dt=async()=>{try{z(!0),D(null);const st=await pe.get(`/housetype?apartment_id=${d}`);st.data.success&&Array.isArray(st.data.data)?E(st.data.data):E([])}catch(st){console.error("Error loading houses:",st),D("Failed to load houses. Please try again.")}finally{z(!1)}};k.useEffect(()=>{dt()},[d]);const rt=()=>{B(`/floors/${g.id}`)},lt=async st=>{try{G(!0),D(null);const $e=await pe.get(`/houses?apartment_id=${d}&floor_id=${st}`);$e.data.success&&Array.isArray($e.data.data)?(b($e.data.data),ve([]),ie(!1)):b([])}catch($e){console.error("Error loading houses:",$e),D("Failed to load houses. Please try again.")}finally{G(!1)}};k.useEffect(()=>{f&&d&&lt(f)},[f,d]);const Ze=st=>{B(`/viewhouse/${d}/${f}/${st.id}`)},Je=()=>{V(!0)},be=()=>{V(!1)},Ye=()=>{lt(f),V(!1),se.success("House created successfully!")},Ae=st=>{oe(st),$(!0)},Xe=()=>{$(!1),oe(null)},Ge=()=>{lt(f),$(!1),se.success("House updated successfully!")},Me=st=>{de(st),X(!0)},ae=()=>{X(!1),de(null)},je=async st=>{try{const $e=await pe.patch(`/houses/${st.id}/toggle`);se.success($e.data.message),lt(f)}catch($e){console.error("Error toggling house:",$e),se.error("Failed to toggle house status")}},We=st=>{W(st),re(!0)},xt=async()=>{try{if(!le)return;await pe.delete(`/houses/${le.id}`),se.success("House deleted successfully"),re(!1),W(null),lt(f)}catch(st){console.error("Delete house error:",st),se.error("Failed to delete house")}},Mt=()=>{re(!1),W(null)},Vt=st=>{Oe(st),K(!0)},Re=()=>{K(!1),Oe(null)},et=()=>{se.success("House documents uploaded successfully!")},At=st=>{ve($e=>$e.includes(st)?$e.filter(qe=>qe!==st):[...$e,st])},pt=()=>{if(Fe)ve([]);else{const st=C.map($e=>$e.id);ve(st)}ie(!Fe)};k.useEffect(()=>{C.length>0&&xe.length===C.length?ie(!0):ie(!1)},[xe,C]),xe.length;const Yt=()=>{if(xe.length===0){se.error("Please select at least one house to generate QR codes");return}C.filter(st=>xe.includes(st.id)),ye(!0)},Tt=st=>{try{return new Date(st).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:rt,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Fs,{size:25})}),e.jsx(wr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Houses"})]}),g&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",g.name]}),w&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",w.floor_id]})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>H("houses"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                    ${U==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>H("houseTypes"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                    ${U==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),U==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Je,className:"flex items-center gap-2 mb-4 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"New House"})]}),e.jsxs("button",{onClick:Yt,disabled:xe.length===0,className:"flex items-center ml-190 gap-2 px-4 py-2 mb-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(Lf,{size:20}),e.jsxs("span",{children:["Generate QR Code (",xe.length,")"]})]})]}),xe.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[xe.length," house",xe.length!==1?"s":""," selected for QR code generation"]})}),_?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Houses..."})]}):M?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[M,e.jsx("button",{onClick:lt,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):C.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No houses found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding houses"})]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"overflow-auto max-h-[500px]",children:[" ",e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Fe,onChange:pt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:C.map(st=>e.jsxs("tr",{onClick:()=>st.is_active&&Ze(st),className:`transition-colors cursor-pointer ${st.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:xe.includes(st.id),onChange:$e=>{$e.stopPropagation(),At(st.id)},onClick:$e=>$e.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:st.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:S.find($e=>$e.id===st.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:st.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Tt(st.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:$e=>{$e.stopPropagation(),Vt(st)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(ya,{size:20})}),e.jsx("button",{onClick:$e=>{$e.stopPropagation(),Ae(st)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:$e=>{$e.stopPropagation(),Me(st)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:st.is_active?"Deactivate":"Activate",children:st.is_active?e.jsx(_d,{size:25}):e.jsx(Td,{size:25})}),e.jsx("button",{onClick:$e=>{$e.stopPropagation(),We(st)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},st.id))})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",C.length," house",C.length!==1?"s":""]})})]})]}):e.jsx(dp,{})]})})]}),F&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-5xl relative",children:[e.jsx("button",{onClick:be,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx(G3,{onClose:be,onCreated:Ye,apartment_id:d,floor_id:f})]})}),Q&&ee&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Xe,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit House"}),e.jsx(q3,{onClose:Xe,onUpdated:Ge,house:ee,apartment_id:d,floor_id:f})]})}),P&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:Z?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:Z?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ae,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:()=>{Z&&(je(Z),X(!1),de(null))},className:`px-4 py-2 rounded-md text-white transition-colors duration-200 ${Z?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:Z?.is_active?"Deactivate":"Activate"})]})]})}),he&&le&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',le.house_id,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Mt,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:xt,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),we&&ge&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto relative",children:e.jsx(Z3,{house:ge,apartment:g,floor:w,onClose:Re,onUploadSuccess:et})})}),Qe&&g&&w&&e.jsx(v4,{houses:C.filter(st=>xe.includes(st.id)),apartment:g,floor:w,onClose:()=>ye(!1)}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function j4(){const[l,c]=k.useState(""),[d,f]=k.useState(!1),g=ia(),m=async N=>{N.preventDefault(),f(!0);try{await pe.post("/auth/forgot-password",{email:l}),se.success(" Password reset link sent! Check your inbox."),c("")}catch(C){se.error(C.response?.data?.message||"Something went wrong")}finally{f(!1)}},w=()=>{g("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("button",{onClick:w,className:"flex items-center gap-2 mb-4 text-white hover:text-black transition-colors",children:e.jsx(Ad,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("h1",{className:"font-bold text-xl text-center",children:"Forgot Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Enter your email address and we'll send you a link to reset your password."}),e.jsxs("form",{onSubmit:m,children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"loginInput mb-4",value:l,onChange:N=>c(N.target.value),required:!0}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full",disabled:d,children:d?"Sending...":"Send Reset Link"})]}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Remember your password?"," ",e.jsx("button",{type:"button",onClick:w,className:"text-purple-700 hover:underline",children:"Back to Login"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function C4(){const[l,c]=k.useState(""),[d,f]=k.useState(""),[g,m]=k.useState(!1),[w,N]=k.useState(!1),[C,b]=k.useState(!1),[S]=bd(),E=ia(),[M,D]=k.useState(null),[B,_]=k.useState(null),[G,R]=k.useState(!0);k.useEffect(()=>{const P=S.get("token"),X=S.get("id");D(P),_(X),(!P||!X)&&(R(!1),se.error("Invalid reset link"))},[S]);const z=()=>{E("/login")},F=(P,X)=>{let Z="";return P==="password"&&(X?X.length<8?Z="Password must be at least 8 characters":/(?=.*[a-z])/.test(X)?/(?=.*[A-Z])/.test(X)?/(?=.*\d)/.test(X)?/(?=.*[@$!%*?&])/.test(X)||(Z="Password must contain at least one special character (@$!%*?&)"):Z="Password must contain at least one number":Z="Password must contain at least one uppercase letter":Z="Password must contain at least one lowercase letter":Z="Password is required"),P==="confirm"&&(X?X!==l&&(Z="Passwords do not match"):Z="Please confirm your password"),Z},Q=(()=>{if(!l)return{strength:0,label:""};let P=0;return l.length>=8&&P++,/(?=.*[a-z])/.test(l)&&P++,/(?=.*[A-Z])/.test(l)&&P++,/(?=.*\\d)/.test(l)&&P++,/(?=.*[@$!%*?&])/.test(l)&&P++,{strength:P,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][P]}})(),$=async P=>{P.preventDefault();const X=F("password",l),Z=F("confirm",d);if(X)return se.error(X);if(Z)return se.error(Z);b(!0);try{await pe.post("/auth/reset-password",{token:M,id:B,password:l}),se.success("Password reset successful! Redirecting to login..."),setTimeout(()=>E("/login"),2e3)}catch(de){se.error(de.response?.data?.message||"Reset failed. The link may have expired.")}finally{b(!1)}};return G?e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("button",{onClick:z,className:"flex items-center gap-2 mb-4 text-white hover:text-black transition-colors",children:e.jsx(Ad,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:e.jsx("h1",{className:"font-bold text-xl",children:"Reset Password"})}),e.jsxs("form",{onSubmit:$,children:[e.jsxs("div",{className:"passwordField mb-4",children:[e.jsx("input",{type:g?"text":"password",placeholder:"New password",className:"loginInput",value:l,onChange:P=>c(P.target.value),required:!0}),e.jsx("span",{type:"button",onClick:()=>m(!g),className:"passwordToggle",children:g?e.jsx(xn,{size:20}):e.jsx(ds,{size:20})})]}),l&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",e.jsx("span",{className:"font-semibold",children:Q.label})]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${Q.strength<2?"bg-red-500":Q.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Q.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1 leading-snug",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),e.jsxs("div",{className:"passwordField mb-6",children:[e.jsx("input",{type:w?"text":"password",placeholder:"Confirm new password",className:"loginInput",value:d,onChange:P=>f(P.target.value),required:!0,minLength:"6"}),e.jsx("span",{type:"button",onClick:()=>N(!w),className:"passwordToggle",children:w?e.jsx(xn,{size:20}):e.jsx(ds,{size:20})})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full",disabled:C,children:C?"Resetting...":"Reset Password"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]}):e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-4",children:e.jsx("h2",{className:"text-xl font-bold mb-4 text-red-600",children:"Invalid Reset Link"})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"This password reset link is invalid or has expired."}),e.jsx("button",{onClick:z,className:"loginButton loginButton--submit w-full",children:"Back to Login"})]})})]})}function k4(){const[l]=bd(),c=ia(),[d,f]=k.useState(""),[g,m]=k.useState(""),[w,N]=k.useState(""),[C,b]=k.useState(!0),[S,E]=k.useState(!0),[M,D]=k.useState(!1),[B,_]=k.useState(!1),[G,R]=k.useState(!1),[z,F]=k.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});k.useEffect(()=>{const $=l.get("token"),P=l.get("id");if(console.log("URL Parameters:",{token:$,id:P}),!$||!P){b(!1),E(!1),se.error("Invalid registration link - missing parameters");return}f($),m(P),(async()=>{try{const Z=await pe.post("/auth/verify-invite-link",{token:$,id:P});console.log("Link verification response:",Z.data),Z.data.success&&(N(Z.data.email),b(!0))}catch(Z){console.error("Link verification failed:",Z),b(!1),se.error(Z.response?.data?.message||"This invitation link is invalid or expired.")}finally{E(!1)}})()},[l]);const V=$=>{const{name:P,value:X}=$.target;F(Z=>({...Z,[P]:X}))},Q=async $=>{if($.preventDefault(),z.password!==z.confirmPassword){se.error("Passwords do not match");return}if(z.password.length<8){se.error("Password must be at least 8 characters long");return}R(!0);try{const P=await pe.post("/auth/verify",{token:d,id:g});console.log("Verification response:",P.data),await pe.post("/auth/complete-registration",{email:w,firstname:z.firstname,lastname:z.lastname,country:z.country,mobile:z.mobile,password:z.password}),se.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>c("/login"),2e3)}catch(P){console.error("Registration error:",P),se.error(P.response?.data?.message||"Failed to complete registration")}finally{R(!1)}};return S?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):C?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>c("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(Ad,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",w]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:z.firstname,onChange:V,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:z.lastname,onChange:V,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"country",placeholder:"Country",value:z.country,onChange:V,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"tel",name:"mobile",placeholder:"Mobile Number",value:z.mobile,onChange:V,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:M?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:z.password,onChange:V,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>D(!M),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:M?e.jsx(xn,{size:18}):e.jsx(ds,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:B?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:z.confirmPassword,onChange:V,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>_(!B),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:B?e.jsx(xn,{size:18}):e.jsx(ds,{size:18})})]}),e.jsx("button",{type:"submit",disabled:G,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>c("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function A4(){const{auth:l}=k.useContext(br),c=ia(),[d,f]=k.useState([]),[g,m]=k.useState(!0),[w,N]=k.useState(null),[C,b]=k.useState(!1),[S,E]=k.useState(!1),[M,D]=k.useState(null),[B,_]=k.useState(!1),[G,R]=k.useState(null),z=V=>{c(`/bills-and-calculations/${V.id}`)},F=async()=>{try{m(!0),N(null);const V=await pe.get("/apartments");console.log("API Response:",V.data),V.data.success&&Array.isArray(V.data.data)?f(V.data.data):Array.isArray(V.data)?f(V.data):(console.warn("Unexpected response format:",V.data),f([]))}catch(V){console.error("Error loading apartments:",V),V.response?.status===401?(N("Unauthorized. Please login again."),c("/login")):V.response?.status===400?N("Company information missing. Please contact support."):N("Failed to load apartments. Please try again.")}finally{m(!1)}};return k.useEffect(()=>{F()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:F,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((V,Q)=>e.jsxs("tr",{onClick:()=>V.is_active&&z(V),className:`transition-colors cursor-pointer ${V.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:V.picture?e.jsx("img",{src:`http://localhost:2500${V.picture}`,alt:V.name,className:"w-12 h-12 object-cover rounded-lg",onError:$=>{console.error("Image failed to load:",V.picture),$.target.style.display="none";const P=$.target.parentNode.querySelector(".image-fallback");P&&(P.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(us,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:V.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:V.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:V.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:V.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:V.houses})]},V.id||Q))})]})]})})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function S4({onClose:l,onCreated:c}){const[d,f]=k.useState(!1),[g,m]=k.useState(!1),[w,N]=k.useState(null),[C,b]=k.useState([]),[S,E]=k.useState(""),[M,D]=k.useState(""),[B,_]=k.useState(new Date().getFullYear()),[G,R]=k.useState(new Date().toLocaleString("default",{month:"long"})),[z,F]=k.useState(0),[V,Q]=k.useState(0),[$,P]=k.useState(!1),[X,Z]=k.useState([]),[de,he]=k.useState(!1),[re,le]=k.useState(""),[W,U]=k.useState(""),[H,ee]=k.useState([]),[oe,we]=k.useState([]),[K,ge]=k.useState([]),[Oe,xe]=k.useState([]),[ve,Fe]=k.useState("apartment"),ie=async()=>{try{f(!0),N(null);const ae=await pe.get("/bills");if(ae.data.success&&Array.isArray(ae.data.data)){const je=ae.data.data.filter(We=>We.billtype==="Shared");b(je)}else b([])}catch(ae){console.error("Error loading bills:",ae),N("Failed to load bills. Please try again.")}finally{f(!1)}},Qe=async()=>{try{he(!0);const ae=await pe.get("/apartments");ae.data.success&&Z(ae.data.data||[])}catch(ae){console.error("Error loading apartments:",ae)}finally{he(!1)}},ye=async(ae,je)=>{if(!ae||!je){ge([]),xe([]),F(0);return}try{P(!0);const We=await pe.get(`/generate-bills/assigned-houses/details?bill_id=${ae}&apartment_id=${je}`);if(We.data.success)if(ge(We.data.data.houses||[]),xe(We.data.data.floors||[]),F(We.data.data.houses.length),M&&We.data.data.houses.length>0){const xt=parseFloat(M)/We.data.data.houses.length;Q(xt)}else Q(0)}catch(We){console.error("Error fetching assigned houses details:",We),ge([]),xe([]),F(0)}finally{P(!1)}};k.useEffect(()=>{ie(),Qe()},[]);const dt=ae=>{U(ae),ee([]),we([]),ae&&S?ye(S,ae):(ge([]),xe([]),F(0))},rt=ae=>{E(ae),ae&&W?ye(ae,W):(ge([]),xe([]),F(0))},lt=ae=>{ee(je=>je.includes(ae)?je.filter(We=>We!==ae):[...je,ae])},Ze=ae=>{we(je=>je.includes(ae)?je.filter(We=>We!==ae):[...je,ae])},Je=ae=>{const We=K.filter(xt=>xt.floor_id===ae).map(xt=>xt.house_id);we(xt=>We.every(Vt=>xt.includes(Vt))?xt.filter(Vt=>!We.includes(Vt)):[...new Set([...xt,...We])])},be=ae=>{D(ae);let je=z;if(ve==="floor"&&H.length>0?je=K.filter(We=>H.includes(We.floor_id)).length:ve==="house"&&oe.length>0&&(je=oe.length),ae&&je>0){const We=parseFloat(ae)/je;Q(We)}else Q(0)},Ye=ae=>{Fe(ae),ee([]),we([])},Ae=async()=>{if(!S){N("Please select a bill.");return}if(!W){N("Please select an apartment.");return}if(!M||parseFloat(M)<=0){N("Please enter a valid total amount.");return}let ae=0;if(ve==="apartment"?ae=z:ve==="floor"?ae=H.length>0?K.filter(je=>H.includes(je.floor_id)).length:0:ve==="house"&&(ae=oe.length),ae===0){N("No houses selected for bill generation.");return}try{m(!0),N(null);let je;if(ve==="apartment"){const We={bill_id:S,year:B,month:G,totalAmount:parseFloat(M),assignedHouses:z,unitPrice:V,apartment_id:W,due_date:re||null};je=await pe.post("/generate-bills",We)}else{const We={bill_id:S,year:B,month:G,totalAmount:parseFloat(M),apartment_id:W,selected_floors:ve==="floor"?H:[],selected_houses:ve==="house"?oe:[]};je=await pe.post("/generate-bills/multiple",We)}je.data.success?c(je.data.data):N(je.data.message||"Failed to generate bill")}catch(je){console.error("Error generating bill:",je),N(je.response?.data?.message||"Failed to generate bill. Please try again.")}finally{m(!1)}},Xe=()=>{const ae=C.find(je=>je.id===S);return ae?ae.bill_name:""},Ge=()=>{const ae=X.find(je=>je.id===W);return ae?ae.name:""},Me=()=>ve==="apartment"?z:ve==="floor"?K.filter(ae=>H.includes(ae.floor_id)).length:ve==="house"?oe.length:0;return e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[w&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:w}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("select",{value:B,onChange:ae=>_(parseInt(ae.target.value)),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:[2023,2024,2025].map(ae=>e.jsx("option",{value:ae,children:ae},ae))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:G,onChange:ae=>R(ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(ae=>e.jsx("option",{value:ae,children:ae},ae))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:re,onChange:ae=>le(ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:S,onChange:ae=>rt(ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:d,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),C.map(ae=>e.jsx("option",{value:ae.id,children:ae.bill_name},ae.id))]}),d&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:W,onChange:ae=>dt(ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:de,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),X.map(ae=>e.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),de&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Generation Scope"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx("button",{type:"button",onClick:()=>Ye("apartment"),className:`px-3 py-2 text-sm rounded-md border transition-colors ${ve==="apartment"?"bg-purple-100 border-purple-500 text-purple-700 dark:bg-purple-900 dark:border-purple-400 dark:text-purple-300":"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:"Entire Apartment"}),e.jsx("button",{type:"button",onClick:()=>Ye("floor"),className:`px-3 py-2 text-sm rounded-md border transition-colors ${ve==="floor"?"bg-blue-100 border-blue-500 text-blue-700 dark:bg-blue-900 dark:border-blue-400 dark:text-blue-300":"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:"Select Floors"}),e.jsx("button",{type:"button",onClick:()=>Ye("house"),className:`px-3 py-2 text-sm rounded-md border transition-colors ${ve==="house"?"bg-green-100 border-green-500 text-green-700 dark:bg-green-900 dark:border-green-400 dark:text-green-300":"bg-gray-100 border-gray-300 text-gray-700 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300"}`,children:"Select Houses"})]})]}),ve==="floor"&&W&&S&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Select Floors (",H.length," selected)"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-gray-50 dark:bg-gray-700",children:$?e.jsx("p",{className:"text-xs text-gray-500",children:"Loading floors..."}):Oe.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"No floors found"}):Oe.map(ae=>e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("input",{type:"checkbox",id:`floor-${ae.id}`,checked:H.includes(ae.id),onChange:()=>lt(ae.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsxs("label",{htmlFor:`floor-${ae.id}`,className:"text-sm text-gray-700 dark:text-gray-300",children:["Floor ",ae.floor_id," (",ae.assigned_houses_count," houses)"]})]},ae.id))})]}),ve==="house"&&W&&S&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Select Houses (",oe.length," selected)"]}),e.jsx("div",{className:"max-h-40 overflow-y-auto border border-gray-300 dark:border-gray-600 rounded-md p-2 bg-gray-50 dark:bg-gray-700",children:$?e.jsx("p",{className:"text-xs text-gray-500",children:"Loading houses..."}):K.length===0?e.jsx("p",{className:"text-xs text-gray-500",children:"No houses found"}):Oe.map(ae=>{const je=K.filter(We=>We.floor_id===ae.id);return je.length===0?null:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 py-1 border-b border-gray-200 dark:border-gray-600",children:[e.jsx("input",{type:"checkbox",id:`floor-all-${ae.id}`,checked:je.every(We=>oe.includes(We.house_id)),onChange:()=>Je(ae.id),className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),e.jsxs("label",{htmlFor:`floor-all-${ae.id}`,className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Floor ",ae.floor_id," (",je.length," houses)"]})]}),e.jsx("div",{className:"ml-4 mt-1 grid grid-cols-2 gap-1",children:je.map(We=>e.jsxs("div",{className:"flex items-center space-x-2 py-1",children:[e.jsx("input",{type:"checkbox",id:`house-${We.house_id}`,checked:oe.includes(We.house_id),onChange:()=>Ze(We.house_id),className:"rounded border-gray-300 text-green-600 focus:ring-green-500"}),e.jsxs("label",{htmlFor:`house-${We.house_id}`,className:"text-xs text-gray-600 dark:text-gray-400",children:["House ",We.house_number]})]},We.house_id))})]},ae.id)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:M,onChange:ae=>be(ae.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),S&&W&&Me()>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Xe()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Apartment:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ge()})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 text-sm",children:e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:ve==="apartment"?"Total Houses:":ve==="floor"?"Selected Floors:":"Selected Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:$?e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."}):ve==="floor"?`${H.length} floors (${Me()} houses)`:Me()})]})}),M&&Me()>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(M).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",V.toFixed(2)]})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",M,"  ",Me()," houses = $",V.toFixed(2)," per house"]})]})]}),S&&W&&!$&&Me()===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:ve==="apartment"?" No houses are assigned to this bill for the selected apartment.":ve==="floor"?" Please select at least one floor.":" Please select at least one house."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:l,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:g,children:"Cancel"}),e.jsx("button",{onClick:Ae,disabled:!S||!W||!M||Me()===0||g,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:g?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsx("span",{children:ve==="apartment"?"Generate Bill":`Generate ${Me()} Bills`})})]})})]})}function E4({bill:l,onClose:c,getApartmentName:d,getFloorName:f,getHouseName:g,getLocationScope:m,getLocationDisplay:w}){if(!l)return null;const N=b=>{if(!b)return"0.00";const S=typeof b=="string"?parseFloat(b):b;return isNaN(S)?"0.00":S.toFixed(2)},C=b=>{switch(b){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Qt,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(mr,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:l.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(wi,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[l.month," ",l.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${C(m(l))}`,children:[m(l)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(_o,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sd,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:d(l.apartment_id)})]})]}),l.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J1,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:f(l.floor_id)})]})]}),l.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wr,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:g(l.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:w(l)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(os,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",N(l.totalAmount)]})]}),l.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",N(l.unitPrice)]})]}),l.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(zs,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:l.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(l.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(l.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${l.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:l.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:c,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function T4(){const[l,c]=k.useState(!1),[d,f]=k.useState([]),[g,m]=k.useState(!1),[w,N]=k.useState(""),[C,b]=k.useState(""),[S,E]=k.useState([]),[M,D]=k.useState({}),[B,_]=k.useState({}),[G,R]=k.useState(!1),[z,F]=k.useState({}),[V,Q]=k.useState({}),[$,P]=k.useState({}),[X,Z]=k.useState({}),[de,he]=k.useState({}),[re,le]=k.useState(!1),[W,U]=k.useState(null),[H,ee]=k.useState(!1),[oe,we]=k.useState(!1),[K,ge]=k.useState(null),Oe=async()=>{try{m(!0);const Me=await pe.get("/generate-bills");Me.data.success&&(f(Me.data.data),xe(Me.data.data))}catch(Me){console.error("Error loading generated bills:",Me),se.error("Failed to load generated bills")}finally{m(!1)}},xe=async Me=>{const ae=[...new Set(Me.map(xt=>xt.apartment_id).filter(Boolean))],je=[...new Set(Me.map(xt=>xt.floor_id).filter(Boolean))],We=[...new Set(Me.map(xt=>xt.house_id).filter(Boolean))];if(ae.length>0)try{const xt=await pe.get("/apartments");if(xt.data.success){const Mt={};xt.data.data.forEach(Vt=>{Mt[Vt.id]=Vt.name}),P(Mt)}}catch(xt){console.error("Error loading apartments:",xt)}for(const xt of je)if(xt&&!X[xt])try{const Mt=await pe.get(`/floors/${xt}`);Mt.data.success&&Z(Vt=>({...Vt,[xt]:Mt.data.data.floor_id}))}catch(Mt){console.error("Error loading floor:",Mt)}for(const xt of We)if(xt&&!de[xt])try{const Mt=await pe.get(`/houses/${xt}`);Mt.data.success&&he(Vt=>({...Vt,[xt]:Mt.data.data.house_id}))}catch(Mt){console.error("Error loading house:",Mt)}},ve=Me=>$[Me]||Me||"All Apartments",Fe=Me=>X[Me]||Me||"All Floors",ie=Me=>de[Me]||Me||"All Houses",Qe=Me=>Me.house_id?"House":Me.floor_id?"Floor":Me.apartment_id?"Apartment":"Global",ye=Me=>{switch(Qe(Me)){case"House":return`${ve(Me.apartment_id)}  ${Fe(Me.floor_id)}  ${ie(Me.house_id)}`;case"Floor":return`${ve(Me.apartment_id)}  ${Fe(Me.floor_id)}`;case"Apartment":return ve(Me.apartment_id);default:return"All Locations"}};k.useEffect(()=>{Oe(),Xe()},[]);const dt=()=>{c(!0)},rt=()=>{c(!1)},lt=Me=>{Me&&Me.length>0&&(f(ae=>[...Me,...ae]),xe(Me)),Oe(),c(!1)},Ze=Me=>{ge(Me),we(!0)},Je=()=>{we(!1),ge(null)},be=Me=>{U(Me),le(!0)},Ye=async()=>{if(W)try{ee(!0),(await pe.delete(`/generate-bills/${W.id}`)).data.success&&(se.success("Generated bill deleted successfully"),f(ae=>ae.filter(je=>je.id!==W.id)))}catch(Me){console.error("Error deleting generated bill:",Me),se.error(Me.response?.data?.message||"Failed to delete generated bill")}finally{ee(!1),le(!1),U(null)}},Ae=()=>{le(!1),U(null)},Xe=async()=>{try{R(!0);const Me=await pe.get("/apartments");if(Me.data.success){E(Me.data.data||[]);const ae={};Me.data.data.forEach(je=>{ae[je.id]=je.name}),P(ae)}}catch(Me){console.error("Error loading apartments:",Me),se.error("Failed to load apartments")}finally{R(!1)}},Ge=d.filter(Me=>{const ae=Me.bill_name?.toLowerCase().includes(w.toLowerCase())||Me.month?.toLowerCase().includes(w.toLowerCase())||Me.year?.toString().includes(w)||ve(Me.apartment_id)?.toLowerCase().includes(w.toLowerCase())||Fe(Me.floor_id)?.toLowerCase().includes(w.toLowerCase())||ie(Me.house_id)?.toLowerCase().includes(w.toLowerCase()),je=!C||Me.billtype===C;return ae&&je});return[...new Set(d.map(Me=>Me.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:w,onChange:Me=>N(Me.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:dt,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",Ge.length,")"]}),g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):Ge.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(vr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:d.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Ge.map(Me=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:Me.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:Me.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[Me.month," ",Me.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${Me.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:Me.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(Me.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Ze(Me),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(ds,{size:16})}),e.jsx("button",{onClick:()=>be(Me),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(Na,{size:16})})]})]})]})})},Me.id))})]})]}),l&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:rt,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(S4,{onClose:rt,onCreated:lt})]})}),oe&&K&&e.jsx(E4,{bill:K,onClose:Je,getApartmentName:ve,getFloorName:Fe,getHouseName:ie,getLocationScope:Qe,getLocationDisplay:ye}),re&&W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Na,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",W.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",W.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:W.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:W.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[W.month," ",W.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ae,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:H,children:"Cancel"}),e.jsx("button",{onClick:Ye,disabled:H,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:H?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function _4(){const[l,c]=k.useState([]),[d,f]=k.useState(!1),[g,m]=k.useState(""),[w,N]=k.useState(""),[C,b]=k.useState([]),[S,E]=k.useState({}),[M,D]=k.useState({}),[B,_]=k.useState({}),[G,R]=k.useState({}),[z,F]=k.useState({}),[V,Q]=k.useState(!1),[$,P]=k.useState(null),[X,Z]=k.useState(!1),[de,he]=k.useState(null),[re,le]=k.useState(!1),W=async()=>{try{f(!0);const ie=await pe.get("/generate-measurable-bills");ie.data.success&&(c(ie.data.data),U(ie.data.data))}catch(ie){console.error("Error loading measurable bills:",ie),se.error("Failed to load measurable bills")}finally{f(!1)}},U=async ie=>{const Qe=[...new Set(ie.map(rt=>rt.apartment_id).filter(Boolean))],ye=[...new Set(ie.map(rt=>rt.floor_id).filter(Boolean))],dt=[...new Set(ie.map(rt=>rt.house_id).filter(Boolean))];if(Qe.length>0)try{const rt=await pe.get("/apartments");if(rt.data.success){const lt={};rt.data.data.forEach(Ze=>{lt[Ze.id]=Ze.name}),_(lt)}}catch(rt){console.error("Error loading apartments:",rt)}for(const rt of ye)if(rt&&!G[rt])try{const lt=await pe.get(`/floors/${rt}`);lt.data.success&&R(Ze=>({...Ze,[rt]:lt.data.data.floor_id}))}catch(lt){console.error("Error loading floor:",lt)}for(const rt of dt)if(rt&&!z[rt])try{const lt=await pe.get(`/houses/${rt}`);lt.data.success&&F(Ze=>({...Ze,[rt]:lt.data.data.house_id}))}catch(lt){console.error("Error loading house:",lt)}},H=ie=>B[ie]||ie||"N/A",ee=ie=>G[ie]||ie||"N/A",oe=ie=>z[ie]||ie||"N/A",we=ie=>ie.house_id?`${H(ie.apartment_id)}  ${ee(ie.floor_id)}  ${oe(ie.house_id)}`:ie.floor_id?`${H(ie.apartment_id)}  ${ee(ie.floor_id)}`:ie.apartment_id?H(ie.apartment_id):"Global";k.useEffect(()=>{W()},[]);const K=ie=>{he(ie),le(!0)},ge=()=>{le(!1),he(null)},Oe=ie=>{P(ie),Q(!0)},xe=async()=>{if($)try{Z(!0),(await pe.delete(`/generate-measurable-bills/${$.id}`)).data.success&&(se.success("Measurable bill deleted successfully"),c(Qe=>Qe.filter(ye=>ye.id!==$.id)))}catch(ie){console.error("Error deleting measurable bill:",ie),se.error(ie.response?.data?.message||"Failed to delete measurable bill")}finally{Z(!1),Q(!1),P(null)}},ve=()=>{Q(!1),P(null)},Fe=l.filter(ie=>{const Qe=ie.bill_name?.toLowerCase().includes(g.toLowerCase())||ie.month?.toLowerCase().includes(g.toLowerCase())||ie.year?.toString().includes(g)||H(ie.apartment_id)?.toLowerCase().includes(g.toLowerCase())||ee(ie.floor_id)?.toLowerCase().includes(g.toLowerCase())||oe(ie.house_id)?.toLowerCase().includes(g.toLowerCase()),ye=!w||ie.billtype===w;return Qe&&ye});return[...new Set(l.map(ie=>ie.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:g,onChange:ie=>m(ie.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",Fe.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",Fe.length," of ",l.length," bills"]})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):Fe.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(fs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Fe.map(ie=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:ie.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:ie.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[ie.month," ",ie.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(ie.created_at).toLocaleDateString()," at ",new Date(ie.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>K(ie),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(ds,{size:16})}),e.jsx("button",{onClick:()=>Oe(ie),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:ie.payment_status==="Paid",children:e.jsx(Na,{size:16})})]})]})]})})},ie.id))})]})]}),re&&de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:ge,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:de.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:de.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[de.month," ",de.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:we(de)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:de.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:de.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[de.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",de.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:de.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(de.created_at).toLocaleString()})]}),de.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(de.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:ge,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),V&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Na,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:$.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:$.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[$.month," ",$.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",$.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ve,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:X,children:"Cancel"}),e.jsx("button",{onClick:xe,disabled:X,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function M4(){const[l,c]=k.useState(!1),[d,f]=k.useState("bills");ia();const{apartment_id:g}=xs(),[m,w]=k.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>f("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${d==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>f("generateBill"),className:`px-4 py-2 font-semibold 
                                ${d==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>f("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${d==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),d==="bills"&&e.jsx(hp,{}),d==="generateBill"&&e.jsx(T4,{}),d==="measurableBill"&&e.jsx(_4,{})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function D4({show:l,onClose:c,onSave:d}){const[f,g]=k.useState({fromRange:"",toRange:""});if(!l)return null;const m=N=>{const{name:C,value:b}=N.target;g(S=>({...S,[C]:b}))},w=()=>{if(!f.fromRange||!f.toRange){alert("Please fill all fields.");return}d(f)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(Qt,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:f.fromRange,onChange:m,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:f.toRange,onChange:m,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function R4({range:l,onClose:c,onUpdated:d}){const[f,g]=k.useState({fromRange:"",toRange:"",unitPrice:""}),[m,w]=k.useState(!1),[N,C]=k.useState(""),b=localStorage.getItem("token");k.useEffect(()=>{l&&g({fromRange:l.fromRange??"",toRange:l.toRange??"",unitPrice:l.unitPrice??""})},[l]);const S=M=>{const{name:D,value:B}=M.target;g(_=>({..._,[D]:B}))},E=async M=>{M.preventDefault(),w(!0),C("");try{const D=await pe.put(`/billranges/${l.id}`,f,{headers:{Authorization:`Bearer ${b}`}});D.data.success?(d&&d(D.data.data),c&&c()):C(D.data.message||"Failed to update bill range")}catch(D){console.error("Update error:",D),C("Error updating bill range")}finally{w(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),N&&e.jsx("p",{className:"text-red-500",children:N}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:f.fromRange,onChange:S,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:f.toRange,onChange:S,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:m?"Saving...":"Save"})]})]})]})})}function I4(){const{bill_id:l}=xs();console.log("Bill ID:",l);const[c,d]=k.useState(!1),[f,g]=k.useState(null),[m,w]=k.useState([]),[N,C]=k.useState(!1),b=ia(),[S,E]=k.useState([]),[M,D]=k.useState(!1),[B,_]=k.useState(!1),[G,R]=k.useState(!1),[z,F]=k.useState(null),[V,Q]=k.useState(null),[$,P]=k.useState(!1),X=async()=>{try{d(!0),g(null);const W=await pe.get(`/billranges?bill_id=${l}`);if(W.data.success&&Array.isArray(W.data.data)){const U=W.data.data.filter(H=>H.bill_id===l);w(U)}else w([])}catch(W){console.error("Error loading bill ranges:",W),g("Failed to load bill ranges. Please try again.")}finally{d(!1)}};k.useEffect(()=>{X()},[l]);const Z=()=>{b("/bills-and-calculations")},de=async()=>{try{D(!0),g(null);const W=await pe.get("/bills");W.data.success&&Array.isArray(W.data.data)?E(W.data.data):E([])}catch(W){console.error("Error loading bills:",W),g("Failed to load bills. Please try again.")}finally{D(!1)}};k.useEffect(()=>{de()},[]);const he=W=>{Q(W),P(!0)},re=async()=>{try{if(!V)return;await pe.delete(`/billranges/${V.id}`),se.success("Bill range deleted successfully"),P(!1),Q(null),X()}catch(W){console.error("Delete bill range error:",W),se.error("Failed to delete bill range")}},le=()=>{P(!1),Q(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:C}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${N?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Z,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Fs,{size:25})}),e.jsx(mr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const W=S.find(U=>U.id===l);return W?W.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>_(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),c?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:X,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):m.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:m.map((W,U)=>e.jsxs("tr",{onClick:()=>b(`/billprice/${l}/${W.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:U+1}),e.jsx("td",{className:"px-4 py-4",children:W.fromRange}),e.jsx("td",{className:"px-4 py-4",children:W.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H=>{H.stopPropagation(),F(W),R(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:H=>{H.stopPropagation(),he(W)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},W.id))})]})})]})]})})]}),e.jsx(D4,{show:B,onClose:()=>_(!1),onSave:async W=>{try{(await pe.post("/billranges",{...W,bill_id:l})).data.success?(se.success("Bill range added successfully!"),_(!1),X()):se.error("Failed to add bill range.")}catch(U){console.error("Error adding bill range:",U),se.error("Error adding bill range.")}}}),G&&e.jsx(R4,{range:z,onClose:()=>R(!1),onUpdated:()=>{se.success("Bill range updated!"),X()}}),$&&V&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:re,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function O4({bill_id:l,billrange_id:c,onClose:d,onCreated:f}){const[g,m]=k.useState({year:"",month:"",unitprice:"",fixedamount:""}),[w,N]=k.useState(!1),[C,b]=k.useState("");ra.useEffect(()=>{console.log("CreateBillPrice props:",{bill_id:l,billrange_id:c})},[l,c]);const S=M=>{const{name:D,value:B}=M.target;m(_=>({..._,[D]:B}))},E=async M=>{M.preventDefault(),N(!0),b("");const D={...g,bill_id:l,billrange_id:c};console.log("Submitting bill price data:",D);try{const B=await pe.post("/billprice",D,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});B.data.success?(f?.(B.data.data),m({year:"",month:"",unitprice:"",fixedamount:""}),d()):b(B.data.message||"Failed to save bill price")}catch(B){console.error("Error saving bill price:",B),console.error("Error response:",B.response?.data),B.response?.status===400?b(B.response.data?.message||"Bad request. Please check all required fields."):B.response?.status===403?b("Access denied. Please check your login or permissions."):b("Error saving bill price. Please try again.")}finally{N(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:d,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(Qt,{size:20})})]}),C&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:C}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:g.year,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:g.month,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(M=>e.jsx("option",{value:M,children:M},M))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:g.unitprice,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:g.fixedamount,onChange:S,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:d,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:w||!l||!c,className:`px-4 py-2 rounded-lg text-white transition ${w||!l||!c?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:w?"Saving...":"Save"})]})]})]})})}function B4({bill_id:l,billrange_id:c,billPrice:d,onClose:f,onUpdated:g}){const[m,w]=k.useState({year:"",month:"",unitprice:"",fixedamount:""}),[N,C]=k.useState(!1),[b,S]=k.useState("");k.useEffect(()=>{d&&w({year:d.year||"",month:d.month||"",unitprice:d.unitprice||"",fixedamount:d.fixedamount||""})},[d]),k.useEffect(()=>{console.log("EditBillPrice props:",{bill_id:l,billrange_id:c,billPrice:d,formData:m})},[l,c,d,m]);const E=D=>{const{name:B,value:_}=D.target;w(G=>({...G,[B]:_}))},M=async D=>{if(D.preventDefault(),C(!0),S(""),!d||!d.id){S("No bill price selected for editing"),C(!1);return}const B={...m,bill_id:l,billrange_id:c,id:d.id};console.log("Updating bill price data:",B);try{const _=await pe.put(`/billprice/${d.id}`,B,{headers:{"Content-Type":"application/json"}});_.data.success?(g?.(_.data.data),f()):S(_.data.message||"Failed to update bill price")}catch(_){console.error("Error updating bill price:",_),console.error("Error response:",_.response?.data),_.response?.status===400?S(_.response.data?.message||"Bad request. Please check all required fields."):_.response?.status===403?S("Access denied. Please check your login or permissions."):_.response?.status===404?S("Bill price not found. It may have been deleted."):S("Error updating bill price. Please try again.")}finally{C(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:f,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(Qt,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:M,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:m.year,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:m.month,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(D=>e.jsx("option",{value:D,children:D},D))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:m.unitprice,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:m.fixedamount,onChange:E,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:N||!l||!c||!d,className:`px-4 py-2 rounded-lg text-white transition ${N||!l||!c||!d?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:N?"Updating...":"Update"})]})]})]})})}function L4(){const{bill_id:l,billrange_id:c}=xs(),d=ia(),[f,g]=k.useState([]),[m,w]=k.useState(!1),[N,C]=k.useState(null),[b,S]=k.useState(!1),[E,M]=k.useState(!1),[D,B]=k.useState(!1),[_,G]=k.useState(null);ra.useEffect(()=>{console.log("Route parameters:",{bill_id:l,billrange_id:c})},[l,c]);const R=async()=>{try{w(!0),C(null),console.log("Loading bill prices with:",{bill_id:l,billrange_id:c});const X=await pe.get(`/billprice?bill_id=${l}&billrange_id=${c}`);console.log("API Response:",X.data),X.data.success?g(X.data.data||[]):(g([]),C(X.data.message||"Failed to load bill prices"))}catch(X){console.error("Error loading bill prices:",X),C(X.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{w(!1)}};k.useEffect(()=>{l&&c?R():C("Missing bill_id or billrange_id in URL parameters")},[l,c]);const z=()=>{d(-1)},F=()=>{R(),M(!1),se.success("Bill price created successfully!")},V=X=>{G(X),B(!0)},Q=()=>{R(),B(!1),G(null),se.success("Updated!")},$=()=>{B(!1),G(null)},P=async X=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await pe.delete(`/billprice/${X}`),se.success("Bill price deleted successfully"),R()}catch(Z){console.error("Error deleting bill price:",Z),se.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(xa,{onCollapse:S}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:z,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(Fs,{size:25})}),e.jsx(ya,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>M(!0),disabled:!l||!c,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!l||!c?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),m?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):N?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[N,e.jsx("button",{onClick:R,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):f.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ya,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map((X,Z)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:Z+1}),e.jsx("td",{className:"px-4 py-4",children:X.year}),e.jsx("td",{className:"px-4 py-4",children:X.month}),e.jsx("td",{className:"px-4 py-4",children:X.unitprice}),e.jsx("td",{className:"px-4 py-4",children:X.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>V(X),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:()=>P(X.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})})]})})]},X.id))})]})})]})]})})]}),E&&e.jsx(O4,{onClose:()=>M(!1),onCreated:F,billrange_id:c,bill_id:l}),D&&_&&e.jsx(B4,{onClose:$,onUpdated:Q,billrange_id:c,bill_id:l,billPrice:_}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function F4({onClose:l,onCreated:c}){const[d,f]=k.useState({role_name:""}),[g,m]=k.useState(!1),[w,N]=k.useState(""),[C,b]=k.useState([]),S=M=>{const{name:D,value:B}=M.target;f(_=>({..._,[D]:B})),D==="role_name"&&w&&N("")},E=async M=>{if(M.preventDefault(),m(!0),N(""),!d.role_name.trim()){N("Please fill in all required fields"),m(!1);return}try{const D=await pe.post("/roles",{role_name:d.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});D.data.success?(c?.(D.data.data),se.success("Role created successfully"),l()):N(D.data.message||"Failed to save role")}catch(D){console.error("Error saving role:",D);const B=D.response?.data?.message||"Error saving role. Please try again.";N(B),D.response?.status===409&&se.error(B)}finally{m(!1)}};return e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[w&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:w}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:d.role_name,onChange:S,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:g,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:g||!d.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${g||!d.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:g?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}const P4=({role:l,onClose:c,onAssign:d})=>{const[f,g]=k.useState([]),[m,w]=k.useState(!1),[N,C]=k.useState(!1),S=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"}].reduce((R,z)=>{const F=z.category;return R[F]||(R[F]=[]),R[F].push(z),R},{});k.useEffect(()=>{l&&E()},[l]);const E=async()=>{try{w(!0);const R=await pe.get(`/role-components/role/${l.id}`);if(R.data.success){const z=R.data.data||[];g(z)}}catch(R){console.error("Error loading role components:",R),g([])}finally{w(!1)}},M=R=>{g(z=>z.includes(R)?z.filter(F=>F!==R):[...z,R])},D=R=>{const z=S[R].map(F=>F.id);g(F=>{const V=[...F];return z.forEach(Q=>{V.includes(Q)||V.push(Q)}),V})},B=R=>{const z=S[R].map(F=>F.id);g(F=>F.filter(V=>!z.includes(V)))},_=async()=>{try{C(!0);const R=["employee_dashboard","profile"],z=f.filter(V=>!R.includes(V));(await pe.post(`/role-components/role/${l.id}`,{components:z})).data.success&&(alert("Components assigned successfully! The sidebar will refresh for affected users."),d(l.id,f),c())}catch(R){console.error("Error saving role components:",R),alert("Failed to save component assignments. Please try again.")}finally{C(!1)}},G=R=>{const F={Core:Ps,Management:Mo,Financial:Bf,Personal:wr}[R]||hd;return e.jsx(F,{size:16})};return l?l.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Mo,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:c,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:l.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:c,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx(Qt,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:m?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(S).map(([R,z])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[G(R),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[R," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",z.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>D(R),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>B(R),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:z.map(F=>e.jsxs("div",{onClick:()=>M(F.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${f.includes(F.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:f.includes(F.id)?e.jsx(jN,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(hd,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:F.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:F.description})]})]},F.id))})]},R))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[f.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:c,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:_,disabled:N||m,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:N?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ff,{size:20}),"Save Assignments"]})})]})]})]})}):null};function z4({role:l,onClose:c,onUpdated:d}){const[f,g]=k.useState({role_name:""}),[m,w]=k.useState(!1),[N,C]=k.useState({});k.useEffect(()=>{l&&g({role_name:l.role_name||""})},[l]);const b=M=>{const{name:D,value:B}=M.target;g(_=>({..._,[D]:B})),N[D]&&C(_=>({..._,[D]:""}))},S=()=>{const M={};return f.role_name.trim()?f.role_name.trim().length<2?M.role_name="Role name must be at least 2 characters long":f.role_name.trim().length>50&&(M.role_name="Role name must be less than 50 characters"):M.role_name="Role name is required",C(M),Object.keys(M).length===0},E=async M=>{if(M.preventDefault(),!!S())try{w(!0);const D=await pe.put(`/roles/${l.id}`,{role_name:f.role_name.trim()});D.data.success?(d?.(D.data.data),c()):se.error(D.data.message||"Failed to update role")}catch(D){console.error("Error updating role:",D),D.response?.status===409?(se.error("A role with this name already exists"),C({role_name:"A role with this name already exists"})):D.response?.data?.message?se.error(D.response.data.message):se.error("Failed to update role. Please try again.")}finally{w(!1)}};return l?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:c,disabled:m,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(Qt,{size:20})})]}),e.jsxs("form",{onSubmit:E,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:f.role_name,onChange:b,disabled:m,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${N.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),N.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:N.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",l.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${l.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:l.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,disabled:m,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[m&&e.jsx(kt,{size:16,className:"animate-spin"}),e.jsx("span",{children:m?"Updating...":"Update Role"})]})]})]})]})}):null}function U4(){const[l,c]=k.useState(!1),[d,f]=k.useState([]),[g,m]=k.useState(!0),[w,N]=k.useState(null),[C,b]=k.useState(!1),[S,E]=k.useState(!1),[M,D]=k.useState(null),[B,_]=k.useState(!1),[G,R]=k.useState(null),[z,F]=k.useState(!1),[V,Q]=k.useState(null),$=async()=>{try{m(!0),N(null);const we=await pe.get("/roles");we.data.success&&Array.isArray(we.data.data)?f(we.data.data):f([])}catch(we){console.error("Error loading roles:",we),N("Failed to load Roles. Please try again.")}finally{m(!1)}};k.useEffect(()=>{$()},[]);const P=()=>{b(!0)},X=()=>{b(!1)},Z=()=>{$(),b(!1)},de=we=>{D(we),E(!0)},he=()=>{E(!1),D(null)},re=()=>{se.success("Role updated successfully!"),$(),E(!1),D(null)},le=we=>{R(we),_(!0)},W=async()=>{try{if(!G)return;const we=await pe.delete(`/roles/${G.id}`);we.data.success?(se.success("Role deleted successfully"),_(!1),R(null),$()):se.error(we.data.message||"Failed to delete role")}catch(we){console.error("Delete role error:",we),we.response?.data?.message?.includes("users assigned")||we.response?.data?.message?.includes("Cannot delete role")||we.response?.data?.message?se.error(we.response.data.message):se.error("Failed to delete role. Please try again."),_(!1),R(null)}},U=()=>{_(!1),R(null)},H=we=>{Q(we),F(!0)},ee=(we,K)=>{console.log(`Components assigned to role ${we}:`,K)},oe=we=>{try{return new Date(we).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ap,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Role Management"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:P,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Add New"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:g?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:$,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((we,K)=>e.jsxs("tr",{onClick:()=>H(we),className:`transition-colors cursor-pointer ${we.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:K+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:we.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:oe(we.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ge=>{ge.stopPropagation(),de(we)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Nr,{size:20})}),e.jsx("button",{onClick:ge=>{ge.stopPropagation(),le(we)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:ge=>{ge.stopPropagation(),H(we)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(vf,{size:20})})]})})]},we.id||K))})]})})})]})})]}),C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:X,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(F4,{onClose:X,onCreated:Z})]})}),z&&e.jsx(P4,{role:V,onClose:()=>F(!1),onAssign:ee}),S&&M&&e.jsx(z4,{role:M,onClose:he,onUpdated:re}),B&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:U,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function H4(){const[l,c]=k.useState(!1),[d,f]=k.useState(0),[g,m]=k.useState(!0),[w,N]=k.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0}),{auth:C}=k.useContext(br);k.useEffect(()=>{C?.user?.id&&(b(),S())},[C?.user?.id]);const b=async()=>{try{m(!0);const M=await pe.get(`/user-apartments/users/${C.user.id}/apartments`);if(M.data.success){const D=M.data.data||[];f(D.length),N(B=>({...B,assignedApartments:D.length}))}else se.error("Failed to load assigned apartments")}catch(M){console.error("Error fetching assigned apartments:",M),se.error("Error loading assigned apartments")}finally{m(!1)}},S=async()=>{try{const M={pendingTasks:12,completedTasks:45,maintenanceRequests:8};N(D=>({...D,...M}))}catch(M){console.error("Error fetching dashboard stats:",M)}},E=M=>M.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(wr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx($n,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:E(d)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(Wn,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assigned Apartments Summary"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View Details"})]}),d===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(pr,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Apartments Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't been assigned to any apartments yet."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:E(d)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Apartments"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:E(d)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Status"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:E(w.pendingTasks)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Tasks"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:E(w.maintenanceRequests)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maintenance"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4 mt-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx($n,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["You are responsible for ",d," apartments"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx($n,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Regular inspections ensure tenant satisfaction"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx($n,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Keep track of pending tasks and maintenance requests"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 lg:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:d===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity. Start by getting assigned to apartments."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx($n,{size:16,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Assigned to ",d," apartments"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today  All apartments active"})]})]}),e.jsx(Wn,{size:16,className:"text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(bf,{size:16,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[w.pendingTasks," pending tasks"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Requires your attention"})]})]}),e.jsx(Wn,{size:16,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(zs,{size:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[w.maintenanceRequests," maintenance requests"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Scheduled for this week"})]})]}),e.jsx(Wn,{size:16,className:"text-blue-500"})]})]})})]})]})})]}),e.jsx(qt,{position:"top-right",autoClose:3e3})]})}function V4(){const[l,c]=k.useState(!1),[d,f]=k.useState(null),[g,m]=k.useState(!0),[w,N]=k.useState(!1),[C,b]=k.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:S}=k.useContext(br);k.useEffect(()=>{E()},[]);const E=async()=>{try{m(!0);const R=await pe.get("/auth/me");if(R.data.success&&R.data.data&&R.data.data.length>0){const z=R.data.data[0];f(z),b({firstname:z.firstname||"",lastname:z.lastname||"",country:z.country||"",mobile:z.mobile||""})}else se.error("No profile data found")}catch(R){console.error("Error fetching profile:",R),se.error("Failed to load profile")}finally{m(!1)}},M=()=>{N(!0)},D=()=>{N(!1),d&&b({firstname:d.firstname||"",lastname:d.lastname||"",country:d.country||"",mobile:d.mobile||""})},B=async()=>{try{const R=await pe.put(`/auth/users/${d.id}`,C);R.data.success&&(f(z=>({...z,...R.data.data})),N(!1),se.success("Profile updated successfully"),E())}catch(R){console.error("Error updating profile:",R),se.error(R.response?.data?.message||"Failed to update profile")}},_=R=>{const{name:z,value:F}=R.target;b(V=>({...V,[z]:F}))},G=R=>new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return g?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):d?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(xa,{onCollapse:c}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${l?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ps,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),w?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:D,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(Qt,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:B,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(Ff,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:M,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Nr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[d.firstname?.charAt(0)?.toUpperCase(),d.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[d.firstname," ",d.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:d.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(wi,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",G(d.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${d.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:d.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),w?e.jsx("input",{type:"text",name:"firstname",value:C.firstname,onChange:_,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),w?e.jsx("input",{type:"text",name:"lastname",value:C.lastname,onChange:_,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(_o,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),w?e.jsx("input",{type:"text",name:"country",value:C.country,onChange:_,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Ho,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),w?e.jsx("input",{type:"tel",name:"mobile",value:C.mobile,onChange:_,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Sl,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:d.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Mo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:d.role})]})]})]})})]})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ps,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function G4(){const[l,c]=k.useState([]),[d,f]=k.useState(!0),[g,m]=k.useState(""),[w,N]=k.useState(!1),[C,b]=k.useState(!1),{auth:S}=k.useContext(br),E=ia(),M=async()=>{try{f(!0);const R=await pe.get(`/user-apartments/users/${S.user.id}/apartments`);R.data.success?c(R.data.data||[]):(se.error("Failed to load apartments"),c([]))}catch(R){console.error("Error fetching apartments:",R),se.error("Error loading your apartments"),c([])}finally{f(!1)}};k.useEffect(()=>{S?.user?.id&&M()},[S?.user?.id]);const D=l.filter(R=>R.name?.toLowerCase().includes(g.toLowerCase())||R.address?.toLowerCase().includes(g.toLowerCase())||R.city?.toLowerCase().includes(g.toLowerCase())),B=R=>{try{return new Date(R).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},_=R=>R?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",G=R=>{E(`/floors/${R}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(xa,{onCollapse:N})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${C?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(xa,{onCollapse:N})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${w?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:l.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:l.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:g,onChange:R=>m(R.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):D.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(pr,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:g?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:g?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:D.map(R=>e.jsxs("div",{onClick:()=>G(R.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(wr,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:R.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_(R.is_active)}`,children:R.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(_o,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[R.address,", ",R.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(zs,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:R.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(pr,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:R.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",B(R.assigned_at)]})})]},R.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(R=>e.jsxs("div",{onClick:()=>G(R.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(wr,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:R.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${_(R.is_active)}`,children:R.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(_o,{size:16}),e.jsxs("span",{className:"text-sm",children:[R.address,", ",R.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(zs,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:R.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(pr,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:R.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",B(R.assigned_at)]})})]},R.id))})]})}),D.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(fs,{size:20})})})]})})]}),e.jsx(qt,{position:"top-right",autoClose:3e3})]})}function q4({bill_id:l,onClose:c,onSuccess:d}){const[f,g]=k.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[m,w]=k.useState(!1),[N,C]=k.useState({}),b=D=>{const{name:B,value:_}=D.target;g(G=>({...G,[B]:_})),N[B]&&C(G=>({...G,[B]:""}))},S=()=>{const D={};return(!f.year||f.year<2e3||f.year>2100)&&(D.year="Please enter a valid year (2000-2100)"),(!f.month||f.month<1||f.month>12)&&(D.month="Please select a valid month (1-12)"),(!f.amount||parseFloat(f.amount)<=0)&&(D.amount="Please enter a valid amount"),C(D),Object.keys(D).length===0},E=async D=>{if(D.preventDefault(),!!S())try{w(!0);const B=await pe.post("/shared-value-prices",{bill_id:l,year:parseInt(f.year),month:parseInt(f.month),amount:parseFloat(f.amount)});B.data.success?d():se.error(B.data.message||"Failed to create shared value price")}catch(B){console.error("Error creating shared value price:",B),B.response?.data?.message?se.error(B.response.data.message):se.error("Failed to create shared value price")}finally{w(!1)}},M=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:c,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:f.year,onChange:b,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${N.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),N.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:f.month,onChange:b,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${N.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:M.map(D=>e.jsx("option",{value:D.value,children:D.label},D.value))}),N.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:f.amount,onChange:b,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${N.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),N.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:N.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:c,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:m,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[m&&e.jsx(kt,{size:16,className:"animate-spin"}),e.jsx("span",{children:m?"Creating...":"Create"})]})]})]})]})})}function Y4(){const{bill_id:l}=xs(),c=ia(),[d,f]=k.useState([]),[g,m]=k.useState(null),[w,N]=k.useState(!1),[C,b]=k.useState(!1),[S,E]=k.useState(null),[M,D]=k.useState(!1),[B,_]=k.useState(!1),[G,R]=k.useState(!1),[z,F]=k.useState(null),[V,Q]=k.useState(!1),[$,P]=k.useState(null),X=async()=>{try{b(!0);const oe=await pe.get(`/bills/${l}`);oe.data.success&&m(oe.data.data)}catch(oe){console.error("Error loading bill info:",oe)}finally{b(!1)}},Z=async()=>{try{if(N(!0),E(null),!l){E("Bill ID is required");return}const oe=await pe.get(`/shared-value-prices/bill/${l}`);oe.data.success?f(oe.data.data||[]):(E("Failed to load shared value prices"),f([]))}catch(oe){console.error("Error loading shared value prices:",oe),E("Failed to load shared value prices. Please try again."),f([])}finally{N(!1)}};k.useEffect(()=>{l&&(X(),Z())},[l]);const de=()=>{c(-1)},he=()=>{console.log("handleCreateSuccess called"),_(!1),se.success("Shared value price created successfully"),Z()};k.useEffect(()=>{console.log("bill_id changed:",l),l&&(X(),Z())},[l]);const re=()=>{Z(),R(!1),F(null),se.success("Shared value price updated successfully")},le=oe=>{F(oe),R(!0)},W=oe=>{P(oe),Q(!0)},U=async()=>{try{if(!$)return;await pe.delete(`/shared-value-prices/${$.id}`),se.success("Shared value price deleted successfully"),Q(!1),P(null),Z()}catch(oe){console.error("Delete shared value price error:",oe),se.error("Failed to delete shared value price")}},H=()=>{Q(!1),P(null)},ee=oe=>["January","February","March","April","May","June","July","August","September","October","November","December"][oe-1]||oe;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(xa,{onCollapse:D}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${M?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:de,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(Fs,{size:25})}),e.jsx(ya,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),g&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[g.bill_name," - ",g.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>_(!0),disabled:!l,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${l?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(vr,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),w?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):S?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[S,e.jsx("button",{onClick:Z,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(ya,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((oe,we)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:we+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:oe.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ee(oe.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:oe.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(oe.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>le(oe),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(Nr,{size:18})}),e.jsx("button",{onClick:()=>W(oe),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(Na,{size:18})})]})})]},oe.id))})]})})]})]})})]}),B&&e.jsx(q4,{bill_id:l,onClose:()=>_(!1),onSuccess:he}),G&&z&&e.jsx(EditSharedValuePriceModal,{price:z,onClose:()=>{R(!1),F(null)},onSuccess:re}),V&&$&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",ee($.month)," ",$.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:U,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function yp({payment:l,onClose:c,onUpdate:d}){const[f,g]=k.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[m,w]=k.useState(!1),N=!!l?.generateMeasurable_bills_id;if(k.useEffect(()=>{l&&g({additionalAmount:0,payment_status:l.payment_status||"Pending",paid_at:l.paid_at?new Date(l.paid_at).toISOString().split("T")[0]:""})},[l,N]),!l)return null;const b=N?parseFloat(l.generated_total_amount)||parseFloat(l.unitPrice)||0:parseFloat(l.unitPrice)||0,S=parseFloat(l.paidAmount)||0,E=parseFloat(l.pendingAmount)||0,M=S+parseFloat(f.additionalAmount||0),D=b-M,B=z=>{const F=typeof z=="string"?parseFloat(z):z;return isNaN(F)?"0.00":F.toFixed(2)},_=async z=>{z.preventDefault();const F=parseFloat(f.additionalAmount||0);if(F<0){se.error("Payment amount cannot be negative");return}if(F>E){se.error(`Payment amount cannot exceed pending amount of $${B(E)}`);return}let V=f.payment_status;M>=b?V="Paid":M>0?V="Partial":V="Pending";try{w(!0);const Q={payment_status:V,paidAmount:M};V==="Paid"&&f.paid_at?Q.paid_at=f.paid_at:V==="Paid"&&!f.paid_at&&(Q.paid_at=new Date().toISOString().split("T")[0]),console.log("Sending update data:",Q),console.log("Current paid:",S),console.log("Additional:",F),console.log("New total paid:",M);const $=await pe.patch(`/bill-payments/${l.id}/status`,Q);$.data.success&&(se.success("Payment updated successfully"),d($.data.data))}catch(Q){console.error("Error updating payment:",Q),console.error("Error details:",Q.response?.data),se.error(`Failed to update payment: ${Q.response?.data?.message||Q.message}`)}finally{w(!1)}},G=z=>{const F=parseFloat(z)||0,Q=Math.min(F,E),$=S+Q;let P="Pending";$>=b?P="Paid":$>0&&(P="Partial"),g(X=>({...X,additionalAmount:Q,payment_status:P}))},R=D<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(mr,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),N&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:c,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(Qt,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[l.bill_name," (",l.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[l.apartment_name," - Floor ",l.floor_id," - House ",l.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[l.month," ",l.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:N?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",B(S)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",B(E)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${N?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${N?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:N?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${N?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",B(b)]}),N&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:E,value:f.additionalAmount,onChange:z=>G(z.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",B(E)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",B(f.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",B(M)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",B(f.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${D>0&&D<E?"bg-orange-50 dark:bg-orange-900/20":R?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${D>0&&D<E?"text-orange-800 dark:text-orange-300":R?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${D>0&&D<E?"text-orange-600 dark:text-orange-400":R?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",B(D)]}),R?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):D<E?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",B(E-D)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${f.payment_status==="Paid"?"text-green-600 dark:text-green-400":f.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:f.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(f.payment_status==="Paid"||R)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(wi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:f.paid_at,onChange:z=>g(F=>({...F,paid_at:z.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:f.payment_status==="Paid"||R})]}),!f.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:c,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:m,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:m||f.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(os,{size:16}),e.jsxs("span",{children:["Pay $",B(f.additionalAmount)]})]})})]})]})]})]})})}function X4(){const[l,c]=k.useState([]),[d,f]=k.useState(!1),[g,m]=k.useState({}),[w,N]=k.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[C,b]=k.useState([]),[S,E]=k.useState([]),[M,D]=k.useState([]),[B,_]=k.useState([]),[G,R]=k.useState(""),[z,F]=k.useState(!1),[V,Q]=k.useState(!1),[$,P]=k.useState(!1),[X,Z]=k.useState(!1),[de,he]=k.useState(null),[re,le]=k.useState(!1),[W,U]=k.useState(null),[H,ee]=k.useState(!1),[oe,we]=k.useState(null),K=async()=>{try{const ae=await pe.get("/bills");ae.data.success&&_(ae.data.data||[])}catch(ae){console.error("Error loading bills:",ae),se.error("Failed to load bills")}},ge=async()=>{try{Q(!0);const ae=await pe.get("/apartments");ae.data.success?b(ae.data.data||[]):b([])}catch(ae){console.error("Error loading apartments:",ae),se.error("Failed to load apartments"),b([])}finally{Q(!1)}},Oe=async ae=>{if(!ae){E([]),D([]);return}try{P(!0);const je=await pe.get(`/floors?apartment_id=${ae}`);je.data.success?E(je.data.data||[]):E([])}catch(je){console.error("Error loading floors:",je),se.error("Failed to load floors"),E([])}finally{P(!1)}},xe=async ae=>{if(!ae||!w.apartment_id){D([]);return}try{Z(!0);const je=await pe.get(`/houses?floor_id=${ae}&apartment_id=${w.apartment_id}`);je.data.success?D(je.data.data||[]):D([])}catch(je){console.error("Error loading houses:",je),se.error("Failed to load houses"),D([])}finally{Z(!1)}},ve=async()=>{try{f(!0);const ae=new URLSearchParams;Object.entries(w).forEach(([We,xt])=>{xt&&ae.append(We,xt)}),console.log("Loading payments with filters:",Object.fromEntries(ae));const je=await pe.get(`/bill-payments?${ae}`);je.data.success&&(c(je.data.data),console.log("Payments loaded:",je.data.data.length))}catch(ae){console.error("Error loading payments:",ae),console.error("Payment loading error details:",ae.response?.data),se.error("Failed to load payments. Check console for details.")}finally{f(!1)}},Fe=async()=>{try{const ae=await pe.get("/bill-payments/summary");if(ae.data.success){const je={};ae.data.data.forEach(We=>{je[We.payment_status]=We}),m(je)}}catch(ae){console.error("Error loading summary:",ae)}};k.useEffect(()=>{K(),ge(),Fe(),ve()},[]),k.useEffect(()=>{ve()},[w]);const ie=ae=>{N({billtype:ae,apartment_id:"",floor_id:"",house_id:"",payment_status:w.payment_status,month:w.month,year:w.year})},Qe=ae=>{N(je=>({...je,apartment_id:ae,floor_id:"",house_id:""})),Oe(ae)},ye=ae=>{N(je=>({...je,floor_id:ae,house_id:""})),xe(ae)},dt=ae=>{N(je=>({...je,house_id:ae}))},rt=(ae,je)=>{N(We=>({...We,[ae]:je}))},lt=ae=>{we(ae),ee(!0)},Ze=async()=>{if(oe)try{U(oe.id),(await pe.delete(`/bill-payments/${oe.id}`)).data.success&&(se.success("Payment deleted successfully"),c(je=>je.filter(We=>We.id!==oe.id)),Fe())}catch(ae){console.error("Error deleting payment:",ae),se.error(ae.response?.data?.message||"Failed to delete payment")}finally{U(null),ee(!1),we(null)}},Je=()=>{N({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),R(""),E([]),D([])},be=l.filter(ae=>{const je=G.toLowerCase();return ae.bill_name?.toLowerCase().includes(je)||ae.apartment_name?.toLowerCase().includes(je)||ae.house_number?.toString().includes(G)||ae.month?.toLowerCase().includes(je)}),Ye=ae=>{switch(ae){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Ae=["January","February","March","April","May","June","July","August","September","October","November","December"],Xe=[...new Set(B.map(ae=>ae.billtype))].filter(ae=>ae),Ge=()=>{le(!1),he(null)},Me=ae=>{c(je=>je.map(We=>We.id===ae.id?ae:We)),Ge(),Fe()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:F}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${z?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:G,onChange:ae=>R(ae.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:w.billtype,onChange:ae=>ie(ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),Xe.map(ae=>e.jsx("option",{value:ae,children:ae},ae))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:w.apartment_id,onChange:ae=>Qe(ae.target.value),disabled:V,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),C.map(ae=>e.jsx("option",{value:ae.id,children:ae.name},ae.id))]}),V&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:w.floor_id,onChange:ae=>ye(ae.target.value),disabled:!w.apartment_id||$,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),S.map(ae=>e.jsxs("option",{value:ae.id,children:["Floor ",ae.floor_id]},ae.id))]}),$&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:w.house_id,onChange:ae=>dt(ae.target.value),disabled:!w.floor_id||X,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),M.map(ae=>e.jsxs("option",{value:ae.id,children:["House ",ae.house_id]},ae.id))]}),X&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:w.payment_status,onChange:ae=>rt("payment_status",ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:w.month,onChange:ae=>rt("month",ae.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),Ae.map(ae=>e.jsx("option",{value:ae,children:ae},ae))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:w.year,onChange:ae=>rt("year",ae.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:Je,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",be.length," of ",l.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Xv,{size:16}),e.jsxs("span",{children:[be.length," payments found"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):be.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(os,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:l.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:be.map(ae=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[ae.bill_name," (",ae.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Sd,{size:12,className:"inline mr-1"}),ae.apartment_name,e.jsx(wr,{size:12,className:"inline mx-1"}),"Floor ",ae.floor_id," - House ",ae.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[ae.month," ",ae.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",ae.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",ae.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",ae.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Ye(ae.payment_status)}`,children:ae.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:ae.paid_at?new Date(ae.paid_at).toLocaleDateString():new Date(ae.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex space-x-1",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>lt(ae),disabled:W===ae.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:W===ae.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Na,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})})})]},ae.id))})]})})})]})})]}),re&&e.jsx(yp,{payment:de,onClose:Ge,onUpdate:Me}),H&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Na,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[oe.bill_name," (",oe.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[oe.apartment_name," - House ",oe.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",oe.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${oe.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:oe.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{ee(!1),we(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:W===oe.id,children:"Cancel"}),e.jsx("button",{onClick:Ze,disabled:W===oe.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:W===oe.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}var at;(function(l){l[l.QR_CODE=0]="QR_CODE",l[l.AZTEC=1]="AZTEC",l[l.CODABAR=2]="CODABAR",l[l.CODE_39=3]="CODE_39",l[l.CODE_93=4]="CODE_93",l[l.CODE_128=5]="CODE_128",l[l.DATA_MATRIX=6]="DATA_MATRIX",l[l.MAXICODE=7]="MAXICODE",l[l.ITF=8]="ITF",l[l.EAN_13=9]="EAN_13",l[l.EAN_8=10]="EAN_8",l[l.PDF_417=11]="PDF_417",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(at||(at={}));var Gm=new Map([[at.QR_CODE,"QR_CODE"],[at.AZTEC,"AZTEC"],[at.CODABAR,"CODABAR"],[at.CODE_39,"CODE_39"],[at.CODE_93,"CODE_93"],[at.CODE_128,"CODE_128"],[at.DATA_MATRIX,"DATA_MATRIX"],[at.MAXICODE,"MAXICODE"],[at.ITF,"ITF"],[at.EAN_13,"EAN_13"],[at.EAN_8,"EAN_8"],[at.PDF_417,"PDF_417"],[at.RSS_14,"RSS_14"],[at.RSS_EXPANDED,"RSS_EXPANDED"],[at.UPC_A,"UPC_A"],[at.UPC_E,"UPC_E"],[at.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),qm;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.URL=1]="URL"})(qm||(qm={}));function Z4(l){return Object.values(at).includes(l)}var Kn;(function(l){l[l.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",l[l.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Kn||(Kn={}));var is=function(){function l(){}return l.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",l.SCAN_DEFAULT_FPS=2,l.DEFAULT_DISABLE_FLIP=!1,l.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,l.DEFAULT_SUPPORTED_SCAN_TYPE=[Kn.SCAN_TYPE_CAMERA,Kn.SCAN_TYPE_FILE],l}(),bp=function(){function l(c,d){this.format=c,this.formatName=d}return l.prototype.toString=function(){return this.formatName},l.create=function(c){if(!Gm.has(c))throw"".concat(c," not in html5QrcodeSupportedFormatsTextMap");return new l(c,Gm.get(c))},l}(),Ym=function(){function l(){}return l.createFromText=function(c){var d={text:c};return{decodedText:c,result:d}},l.createFromQrcodeResult=function(c){return{decodedText:c.text,result:c}},l}(),Af;(function(l){l[l.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",l[l.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",l[l.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Af||(Af={}));var wp=function(){function l(){}return l.createFrom=function(c){return{errorMessage:c,type:Af.UNKWOWN_ERROR}},l}(),vp=function(){function l(c){this.verbose=c}return l.prototype.log=function(c){this.verbose&&console.log(c)},l.prototype.warn=function(c){this.verbose&&console.warn(c)},l.prototype.logError=function(c,d){(this.verbose||d===!0)&&console.error(c)},l.prototype.logErrors=function(c){if(c.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(c)},l}();function Ls(l){return typeof l>"u"||l===null}function Q4(l,c,d){return l>d?d:l<c?c:l}var bi=function(){function l(){}return l.codeParseError=function(c){return"QR code parse error, error = ".concat(c)},l.errorGettingUserMedia=function(c){return"Error getting userMedia, error = ".concat(c)},l.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},l.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},l.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},l.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},l.scannerPaused=function(){return"Scanner paused"},l}(),aa=function(){function l(){}return l.scanningStatus=function(){return"Scanning"},l.idleStatus=function(){return"Idle"},l.errorStatus=function(){return"Error"},l.permissionStatus=function(){return"Permission"},l.noCameraFoundErrorStatus=function(){return"No Cameras"},l.lastMatch=function(c){return"Last Match: ".concat(c)},l.codeScannerTitle=function(){return"Code Scanner"},l.cameraPermissionTitle=function(){return"Request Camera Permissions"},l.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},l.noCameraFound=function(){return"No camera found"},l.scanButtonStopScanningText=function(){return"Stop Scanning"},l.scanButtonStartScanningText=function(){return"Start Scanning"},l.torchOnButton=function(){return"Switch On Torch"},l.torchOffButton=function(){return"Switch Off Torch"},l.torchOnFailedMessage=function(){return"Failed to turn on torch"},l.torchOffFailedMessage=function(){return"Failed to turn off torch"},l.scanButtonScanningStarting=function(){return"Launching Camera..."},l.textIfCameraScanSelected=function(){return"Scan an Image File"},l.textIfFileScanSelected=function(){return"Scan using camera directly"},l.selectCamera=function(){return"Select Camera"},l.fileSelectionChooseImage=function(){return"Choose Image"},l.fileSelectionChooseAnother=function(){return"Choose Another"},l.fileSelectionNoImageSelected=function(){return"No image choosen"},l.anonymousCameraPrefix=function(){return"Anonymous Camera"},l.dragAndDropMessage=function(){return"Or drop an image to scan"},l.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},l.zoom=function(){return"zoom"},l.loadingImage=function(){return"Loading image..."},l.cameraScanAltText=function(){return"Camera based scan"},l.fileScanAltText=function(){return"Fule based scan"},l}(),Xm=function(){function l(){}return l.poweredBy=function(){return"Powered by "},l.reportIssues=function(){return"Report issues"},l}(),Np=function(){function l(){}return l.isMediaStreamConstraintsValid=function(c,d){if(typeof c!="object"){var f=typeof c;return d.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(f,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(g),w=Object.keys(c),N=0,C=w;N<C.length;N++){var b=C[N];if(m.has(b))return d.logError("".concat(b," is not supported videoConstaints."),!0),!1}return!0},l}(),ko={exports:{}},$4=ko.exports,Zm;function W4(){return Zm||(Zm=1,function(l,c){(function(d,f){f(c)})($4,function(d){function f(O){return O==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(O,a){O.__proto__=a}||function(O,a){for(var s in a)a.hasOwnProperty(s)&&(O[s]=a[s])};function m(O,a){g(O,a);function s(){this.constructor=O}O.prototype=a===null?Object.create(a):(s.prototype=a.prototype,new s)}function w(O,a){var s=Object.setPrototypeOf;s?s(O,a):O.__proto__=a}function N(O,a){a===void 0&&(a=O.constructor);var s=Error.captureStackTrace;s&&s(O,a)}var C=function(O){m(a,O);function a(s){var n=this.constructor,o=O.call(this,s)||this;return Object.defineProperty(o,"name",{value:n.name,enumerable:!1}),w(o,n.prototype),N(o),o}return a}(Error);class b extends C{constructor(a=void 0){super(a),this.message=a}getKind(){return this.constructor.kind}}b.kind="Exception";class S extends b{}S.kind="ArgumentException";class E extends b{}E.kind="IllegalArgumentException";class M{constructor(a){if(this.binarizer=a,a===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(a,s){return this.binarizer.getBlackRow(a,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(a,s,n,o){const u=this.binarizer.getLuminanceSource().crop(a,s,n,o);return new M(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new M(this.binarizer.createBinarizer(a))}rotateCounterClockwise45(){const a=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new M(this.binarizer.createBinarizer(a))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class D extends b{static getChecksumInstance(){return new D}}D.kind="ChecksumException";class B{constructor(a){this.source=a}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class _{static arraycopy(a,s,n,o,u){for(;u--;)n[o++]=a[s++]}static currentTimeMillis(){return Date.now()}}class G extends b{}G.kind="IndexOutOfBoundsException";class R extends G{constructor(a=void 0,s=void 0){super(s),this.index=a,this.message=s}}R.kind="ArrayIndexOutOfBoundsException";class z{static fill(a,s){for(let n=0,o=a.length;n<o;n++)a[n]=s}static fillWithin(a,s,n,o){z.rangeCheck(a.length,s,n);for(let u=s;u<n;u++)a[u]=o}static rangeCheck(a,s,n){if(s>n)throw new E("fromIndex("+s+") > toIndex("+n+")");if(s<0)throw new R(s);if(n>a)throw new R(n)}static asList(...a){return a}static create(a,s,n){return Array.from({length:a}).map(u=>Array.from({length:s}).fill(n))}static createInt32Array(a,s,n){return Array.from({length:a}).map(u=>Int32Array.from({length:s}).fill(n))}static equals(a,s){if(!a||!s||!a.length||!s.length||a.length!==s.length)return!1;for(let n=0,o=a.length;n<o;n++)if(a[n]!==s[n])return!1;return!0}static hashCode(a){if(a===null)return 0;let s=1;for(const n of a)s=31*s+n;return s}static fillUint8Array(a,s){for(let n=0;n!==a.length;n++)a[n]=s}static copyOf(a,s){return a.slice(0,s)}static copyOfUint8Array(a,s){if(a.length<=s){const n=new Uint8Array(s);return n.set(a),n}return a.slice(0,s)}static copyOfRange(a,s,n){const o=n-s,u=new Int32Array(o);return _.arraycopy(a,s,u,0,o),u}static binarySearch(a,s,n){n===void 0&&(n=z.numberComparator);let o=0,u=a.length-1;for(;o<=u;){const x=u+o>>1,p=n(s,a[x]);if(p>0)o=x+1;else if(p<0)u=x-1;else return x}return-o-1}static numberComparator(a,s){return a-s}}class F{static numberOfTrailingZeros(a){let s;if(a===0)return 32;let n=31;return s=a<<16,s!==0&&(n-=16,a=s),s=a<<8,s!==0&&(n-=8,a=s),s=a<<4,s!==0&&(n-=4,a=s),s=a<<2,s!==0&&(n-=2,a=s),n-(a<<1>>>31)}static numberOfLeadingZeros(a){if(a===0)return 32;let s=1;return a>>>16||(s+=16,a<<=16),a>>>24||(s+=8,a<<=8),a>>>28||(s+=4,a<<=4),a>>>30||(s+=2,a<<=2),s-=a>>>31,s}static toHexString(a){return a.toString(16)}static toBinaryString(a){return String(parseInt(String(a),2))}static bitCount(a){return a=a-(a>>>1&1431655765),a=(a&858993459)+(a>>>2&858993459),a=a+(a>>>4)&252645135,a=a+(a>>>8),a=a+(a>>>16),a&63}static truncDivision(a,s){return Math.trunc(a/s)}static parseInt(a,s=void 0){return parseInt(a,s)}}F.MIN_VALUE_32_BITS=-2147483648,F.MAX_VALUE=Number.MAX_SAFE_INTEGER;class V{constructor(a,s){a===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=a,s==null?this.bits=V.makeArray(a):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(a){if(a>this.bits.length*32){const s=V.makeArray(a);_.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(a){return(this.bits[Math.floor(a/32)]&1<<(a&31))!==0}set(a){this.bits[Math.floor(a/32)]|=1<<(a&31)}flip(a){this.bits[Math.floor(a/32)]^=1<<(a&31)}getNextSet(a){const s=this.size;if(a>=s)return s;const n=this.bits;let o=Math.floor(a/32),u=n[o];u&=~((1<<(a&31))-1);const x=n.length;for(;u===0;){if(++o===x)return s;u=n[o]}const p=o*32+F.numberOfTrailingZeros(u);return p>s?s:p}getNextUnset(a){const s=this.size;if(a>=s)return s;const n=this.bits;let o=Math.floor(a/32),u=~n[o];u&=~((1<<(a&31))-1);const x=n.length;for(;u===0;){if(++o===x)return s;u=~n[o]}const p=o*32+F.numberOfTrailingZeros(u);return p>s?s:p}setBulk(a,s){this.bits[Math.floor(a/32)]=s}setRange(a,s){if(s<a||a<0||s>this.size)throw new E;if(s===a)return;s--;const n=Math.floor(a/32),o=Math.floor(s/32),u=this.bits;for(let x=n;x<=o;x++){const p=x>n?0:a&31,A=(2<<(x<o?31:s&31))-(1<<p);u[x]|=A}}clear(){const a=this.bits.length,s=this.bits;for(let n=0;n<a;n++)s[n]=0}isRange(a,s,n){if(s<a||a<0||s>this.size)throw new E;if(s===a)return!0;s--;const o=Math.floor(a/32),u=Math.floor(s/32),x=this.bits;for(let p=o;p<=u;p++){const v=p>o?0:a&31,T=(2<<(p<u?31:s&31))-(1<<v)&4294967295;if((x[p]&T)!==(n?T:0))return!1}return!0}appendBit(a){this.ensureCapacity(this.size+1),a&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(a,s){if(s<0||s>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let n=s;n>0;n--)this.appendBit((a>>n-1&1)===1)}appendBitArray(a){const s=a.size;this.ensureCapacity(this.size+s);for(let n=0;n<s;n++)this.appendBit(a.get(n))}xor(a){if(this.size!==a.size)throw new E("Sizes don't match");const s=this.bits;for(let n=0,o=s.length;n<o;n++)s[n]^=a.bits[n]}toBytes(a,s,n,o){for(let u=0;u<o;u++){let x=0;for(let p=0;p<8;p++)this.get(a)&&(x|=1<<7-p),a++;s[n+u]=x}}getBitArray(){return this.bits}reverse(){const a=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),n=s+1,o=this.bits;for(let u=0;u<n;u++){let x=o[u];x=x>>1&1431655765|(x&1431655765)<<1,x=x>>2&858993459|(x&858993459)<<2,x=x>>4&252645135|(x&252645135)<<4,x=x>>8&16711935|(x&16711935)<<8,x=x>>16&65535|(x&65535)<<16,a[s-u]=x}if(this.size!==n*32){const u=n*32-this.size;let x=a[0]>>>u;for(let p=1;p<n;p++){const v=a[p];x|=v<<32-u,a[p-1]=x,x=v>>>u}a[n-1]=x}this.bits=a}static makeArray(a){return new Int32Array(Math.floor((a+31)/32))}equals(a){if(!(a instanceof V))return!1;const s=a;return this.size===s.size&&z.equals(this.bits,s.bits)}hashCode(){return 31*this.size+z.hashCode(this.bits)}toString(){let a="";for(let s=0,n=this.size;s<n;s++)(s&7)===0&&(a+=" "),a+=this.get(s)?"X":".";return a}clone(){return new V(this.size,this.bits.slice())}}var Q;(function(O){O[O.OTHER=0]="OTHER",O[O.PURE_BARCODE=1]="PURE_BARCODE",O[O.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",O[O.TRY_HARDER=3]="TRY_HARDER",O[O.CHARACTER_SET=4]="CHARACTER_SET",O[O.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",O[O.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",O[O.ASSUME_GS1=7]="ASSUME_GS1",O[O.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",O[O.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",O[O.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Q||(Q={}));var $=Q;class P extends b{static getFormatInstance(){return new P}}P.kind="FormatException";var X;(function(O){O[O.Cp437=0]="Cp437",O[O.ISO8859_1=1]="ISO8859_1",O[O.ISO8859_2=2]="ISO8859_2",O[O.ISO8859_3=3]="ISO8859_3",O[O.ISO8859_4=4]="ISO8859_4",O[O.ISO8859_5=5]="ISO8859_5",O[O.ISO8859_6=6]="ISO8859_6",O[O.ISO8859_7=7]="ISO8859_7",O[O.ISO8859_8=8]="ISO8859_8",O[O.ISO8859_9=9]="ISO8859_9",O[O.ISO8859_10=10]="ISO8859_10",O[O.ISO8859_11=11]="ISO8859_11",O[O.ISO8859_13=12]="ISO8859_13",O[O.ISO8859_14=13]="ISO8859_14",O[O.ISO8859_15=14]="ISO8859_15",O[O.ISO8859_16=15]="ISO8859_16",O[O.SJIS=16]="SJIS",O[O.Cp1250=17]="Cp1250",O[O.Cp1251=18]="Cp1251",O[O.Cp1252=19]="Cp1252",O[O.Cp1256=20]="Cp1256",O[O.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",O[O.UTF8=22]="UTF8",O[O.ASCII=23]="ASCII",O[O.Big5=24]="Big5",O[O.GB18030=25]="GB18030",O[O.EUC_KR=26]="EUC_KR"})(X||(X={}));class Z{constructor(a,s,n,...o){this.valueIdentifier=a,this.name=n,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=o,Z.VALUE_IDENTIFIER_TO_ECI.set(a,this),Z.NAME_TO_ECI.set(n,this);const u=this.values;for(let x=0,p=u.length;x!==p;x++){const v=u[x];Z.VALUES_TO_ECI.set(v,this)}for(const x of o)Z.NAME_TO_ECI.set(x,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(a){if(a<0||a>=900)throw new P("incorect value");const s=Z.VALUES_TO_ECI.get(a);if(s===void 0)throw new P("incorect value");return s}static getCharacterSetECIByName(a){const s=Z.NAME_TO_ECI.get(a);if(s===void 0)throw new P("incorect value");return s}equals(a){if(!(a instanceof Z))return!1;const s=a;return this.getName()===s.getName()}}Z.VALUE_IDENTIFIER_TO_ECI=new Map,Z.VALUES_TO_ECI=new Map,Z.NAME_TO_ECI=new Map,Z.Cp437=new Z(X.Cp437,Int32Array.from([0,2]),"Cp437"),Z.ISO8859_1=new Z(X.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),Z.ISO8859_2=new Z(X.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),Z.ISO8859_3=new Z(X.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),Z.ISO8859_4=new Z(X.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),Z.ISO8859_5=new Z(X.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),Z.ISO8859_6=new Z(X.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),Z.ISO8859_7=new Z(X.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),Z.ISO8859_8=new Z(X.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),Z.ISO8859_9=new Z(X.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),Z.ISO8859_10=new Z(X.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),Z.ISO8859_11=new Z(X.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),Z.ISO8859_13=new Z(X.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),Z.ISO8859_14=new Z(X.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),Z.ISO8859_15=new Z(X.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),Z.ISO8859_16=new Z(X.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),Z.SJIS=new Z(X.SJIS,20,"SJIS","Shift_JIS"),Z.Cp1250=new Z(X.Cp1250,21,"Cp1250","windows-1250"),Z.Cp1251=new Z(X.Cp1251,22,"Cp1251","windows-1251"),Z.Cp1252=new Z(X.Cp1252,23,"Cp1252","windows-1252"),Z.Cp1256=new Z(X.Cp1256,24,"Cp1256","windows-1256"),Z.UnicodeBigUnmarked=new Z(X.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),Z.UTF8=new Z(X.UTF8,26,"UTF8","UTF-8"),Z.ASCII=new Z(X.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),Z.Big5=new Z(X.Big5,28,"Big5"),Z.GB18030=new Z(X.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),Z.EUC_KR=new Z(X.EUC_KR,30,"EUC_KR","EUC-KR");class de extends b{}de.kind="UnsupportedOperationException";class he{static decode(a,s){const n=this.encodingName(s);return this.customDecoder?this.customDecoder(a,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(a,n):new TextDecoder(n).decode(a)}static shouldDecodeOnFallback(a){return!he.isBrowser()&&a==="ISO-8859-1"}static encode(a,s){const n=this.encodingName(s);return this.customEncoder?this.customEncoder(a,n):typeof TextEncoder>"u"?this.encodeFallback(a):new TextEncoder().encode(a)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(a){return typeof a=="string"?a:a.getName()}static encodingCharacterSet(a){return a instanceof Z?a:Z.getCharacterSetECIByName(a)}static decodeFallback(a,s){const n=this.encodingCharacterSet(s);if(he.isDecodeFallbackSupported(n)){let o="";for(let u=0,x=a.length;u<x;u++){let p=a[u].toString(16);p.length<2&&(p="0"+p),o+="%"+p}return decodeURIComponent(o)}if(n.equals(Z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(a.buffer));throw new de(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(a){return a.equals(Z.UTF8)||a.equals(Z.ISO8859_1)||a.equals(Z.ASCII)}static encodeFallback(a){const n=btoa(unescape(encodeURIComponent(a))).split(""),o=[];for(let u=0;u<n.length;u++)o.push(n[u].charCodeAt(0));return new Uint8Array(o)}}class re{static castAsNonUtf8Char(a,s=null){const n=s?s.getName():this.ISO88591;return he.decode(new Uint8Array([a]),n)}static guessEncoding(a,s){if(s!=null&&s.get($.CHARACTER_SET)!==void 0)return s.get($.CHARACTER_SET).toString();const n=a.length;let o=!0,u=!0,x=!0,p=0,v=0,A=0,T=0,L=0,q=0,te=0,ce=0,ue=0,Ne=0,Te=0;const He=a.length>3&&a[0]===239&&a[1]===187&&a[2]===191;for(let Ve=0;Ve<n&&(o||u||x);Ve++){const Ue=a[Ve]&255;x&&(p>0?(Ue&128)===0?x=!1:p--:(Ue&128)!==0&&((Ue&64)===0?x=!1:(p++,(Ue&32)===0?v++:(p++,(Ue&16)===0?A++:(p++,(Ue&8)===0?T++:x=!1))))),o&&(Ue>127&&Ue<160?o=!1:Ue>159&&(Ue<192||Ue===215||Ue===247)&&Te++),u&&(L>0?Ue<64||Ue===127||Ue>252?u=!1:L--:Ue===128||Ue===160||Ue>239?u=!1:Ue>160&&Ue<224?(q++,ce=0,te++,te>ue&&(ue=te)):Ue>127?(L++,te=0,ce++,ce>Ne&&(Ne=ce)):(te=0,ce=0))}return x&&p>0&&(x=!1),u&&L>0&&(u=!1),x&&(He||v+A+T>0)?re.UTF8:u&&(re.ASSUME_SHIFT_JIS||ue>=3||Ne>=3)?re.SHIFT_JIS:o&&u?ue===2&&q===2||Te*10>=n?re.SHIFT_JIS:re.ISO88591:o?re.ISO88591:u?re.SHIFT_JIS:x?re.UTF8:re.PLATFORM_DEFAULT_ENCODING}static format(a,...s){let n=-1;function o(x,p,v,A,T,L){if(x==="%%")return"%";if(s[++n]===void 0)return;x=A?parseInt(A.substr(1)):void 0;let q=T?parseInt(T.substr(1)):void 0,te;switch(L){case"s":te=s[n];break;case"c":te=s[n][0];break;case"f":te=parseFloat(s[n]).toFixed(x);break;case"p":te=parseFloat(s[n]).toPrecision(x);break;case"e":te=parseFloat(s[n]).toExponential(x);break;case"x":te=parseInt(s[n]).toString(q||16);break;case"d":te=parseFloat(parseInt(s[n],q||10).toPrecision(x)).toFixed(0);break}te=typeof te=="object"?JSON.stringify(te):(+te).toString(q);let ce=parseInt(v),ue=v&&v[0]+""=="0"?"0":" ";for(;te.length<ce;)te=p!==void 0?te+ue:ue+te;return te}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(u,o)}static getBytes(a,s){return he.encode(a,s)}static getCharCode(a,s=0){return a.charCodeAt(s)}static getCharAt(a){return String.fromCharCode(a)}}re.SHIFT_JIS=Z.SJIS.getName(),re.GB2312="GB2312",re.ISO88591=Z.ISO8859_1.getName(),re.EUC_JP="EUC_JP",re.UTF8=Z.UTF8.getName(),re.PLATFORM_DEFAULT_ENCODING=re.UTF8,re.ASSUME_SHIFT_JIS=!1;class le{constructor(a=""){this.value=a}enableDecoding(a){return this.encoding=a,this}append(a){return typeof a=="string"?this.value+=a.toString():this.encoding?this.value+=re.castAsNonUtf8Char(a,this.encoding):this.value+=String.fromCharCode(a),this}appendChars(a,s,n){for(let o=s;s<s+n;o++)this.append(a[o]);return this}length(){return this.value.length}charAt(a){return this.value.charAt(a)}deleteCharAt(a){this.value=this.value.substr(0,a)+this.value.substring(a+1)}setCharAt(a,s){this.value=this.value.substr(0,a)+s+this.value.substr(a+1)}substring(a,s){return this.value.substring(a,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(a,s){this.value=this.value.substr(0,a)+s+this.value.substr(a+s.length)}}class W{constructor(a,s,n,o){if(this.width=a,this.height=s,this.rowSize=n,this.bits=o,s==null&&(s=a),this.height=s,a<1||s<1)throw new E("Both dimensions must be greater than 0");n==null&&(n=Math.floor((a+31)/32)),this.rowSize=n,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(a){const s=a.length,n=a[0].length,o=new W(n,s);for(let u=0;u<s;u++){const x=a[u];for(let p=0;p<n;p++)x[p]&&o.set(p,u)}return o}static parseFromString(a,s,n){if(a===null)throw new E("stringRepresentation cannot be null");const o=new Array(a.length);let u=0,x=0,p=-1,v=0,A=0;for(;A<a.length;)if(a.charAt(A)===`
`||a.charAt(A)==="\r"){if(u>x){if(p===-1)p=u-x;else if(u-x!==p)throw new E("row lengths do not match");x=u,v++}A++}else if(a.substring(A,A+s.length)===s)A+=s.length,o[u]=!0,u++;else if(a.substring(A,A+n.length)===n)A+=n.length,o[u]=!1,u++;else throw new E("illegal character encountered: "+a.substring(A));if(u>x){if(p===-1)p=u-x;else if(u-x!==p)throw new E("row lengths do not match");v++}const T=new W(p,v);for(let L=0;L<u;L++)o[L]&&T.set(Math.floor(L%p),Math.floor(L/p));return T}get(a,s){const n=s*this.rowSize+Math.floor(a/32);return(this.bits[n]>>>(a&31)&1)!==0}set(a,s){const n=s*this.rowSize+Math.floor(a/32);this.bits[n]|=1<<(a&31)&4294967295}unset(a,s){const n=s*this.rowSize+Math.floor(a/32);this.bits[n]&=~(1<<(a&31)&4294967295)}flip(a,s){const n=s*this.rowSize+Math.floor(a/32);this.bits[n]^=1<<(a&31)&4294967295}xor(a){if(this.width!==a.getWidth()||this.height!==a.getHeight()||this.rowSize!==a.getRowSize())throw new E("input matrix dimensions do not match");const s=new V(Math.floor(this.width/32)+1),n=this.rowSize,o=this.bits;for(let u=0,x=this.height;u<x;u++){const p=u*n,v=a.getRow(u,s).getBitArray();for(let A=0;A<n;A++)o[p+A]^=v[A]}}clear(){const a=this.bits,s=a.length;for(let n=0;n<s;n++)a[n]=0}setRegion(a,s,n,o){if(s<0||a<0)throw new E("Left and top must be nonnegative");if(o<1||n<1)throw new E("Height and width must be at least 1");const u=a+n,x=s+o;if(x>this.height||u>this.width)throw new E("The region must fit inside the matrix");const p=this.rowSize,v=this.bits;for(let A=s;A<x;A++){const T=A*p;for(let L=a;L<u;L++)v[T+Math.floor(L/32)]|=1<<(L&31)&4294967295}}getRow(a,s){s==null||s.getSize()<this.width?s=new V(this.width):s.clear();const n=this.rowSize,o=this.bits,u=a*n;for(let x=0;x<n;x++)s.setBulk(x*32,o[u+x]);return s}setRow(a,s){_.arraycopy(s.getBitArray(),0,this.bits,a*this.rowSize,this.rowSize)}rotate180(){const a=this.getWidth(),s=this.getHeight();let n=new V(a),o=new V(a);for(let u=0,x=Math.floor((s+1)/2);u<x;u++)n=this.getRow(u,n),o=this.getRow(s-1-u,o),n.reverse(),o.reverse(),this.setRow(u,o),this.setRow(s-1-u,n)}getEnclosingRectangle(){const a=this.width,s=this.height,n=this.rowSize,o=this.bits;let u=a,x=s,p=-1,v=-1;for(let A=0;A<s;A++)for(let T=0;T<n;T++){const L=o[A*n+T];if(L!==0){if(A<x&&(x=A),A>v&&(v=A),T*32<u){let q=0;for(;(L<<31-q&4294967295)===0;)q++;T*32+q<u&&(u=T*32+q)}if(T*32+31>p){let q=31;for(;!(L>>>q);)q--;T*32+q>p&&(p=T*32+q)}}}return p<u||v<x?null:Int32Array.from([u,x,p-u+1,v-x+1])}getTopLeftOnBit(){const a=this.rowSize,s=this.bits;let n=0;for(;n<s.length&&s[n]===0;)n++;if(n===s.length)return null;const o=n/a;let u=n%a*32;const x=s[n];let p=0;for(;(x<<31-p&4294967295)===0;)p++;return u+=p,Int32Array.from([u,o])}getBottomRightOnBit(){const a=this.rowSize,s=this.bits;let n=s.length-1;for(;n>=0&&s[n]===0;)n--;if(n<0)return null;const o=Math.floor(n/a);let u=Math.floor(n%a)*32;const x=s[n];let p=31;for(;!(x>>>p);)p--;return u+=p,Int32Array.from([u,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(a){if(!(a instanceof W))return!1;const s=a;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&z.equals(this.bits,s.bits)}hashCode(){let a=this.width;return a=31*a+this.width,a=31*a+this.height,a=31*a+this.rowSize,a=31*a+z.hashCode(this.bits),a}toString(a="X ",s="  ",n=`
`){return this.buildToString(a,s,n)}buildToString(a,s,n){let o=new le;for(let u=0,x=this.height;u<x;u++){for(let p=0,v=this.width;p<v;p++)o.append(this.get(p,u)?a:s);o.append(n)}return o.toString()}clone(){return new W(this.width,this.height,this.rowSize,this.bits.slice())}}class U extends b{static getNotFoundInstance(){return new U}}U.kind="NotFoundException";class H extends B{constructor(a){super(a),this.luminances=H.EMPTY,this.buckets=new Int32Array(H.LUMINANCE_BUCKETS)}getBlackRow(a,s){const n=this.getLuminanceSource(),o=n.getWidth();s==null||s.getSize()<o?s=new V(o):s.clear(),this.initArrays(o);const u=n.getRow(a,this.luminances),x=this.buckets;for(let v=0;v<o;v++)x[(u[v]&255)>>H.LUMINANCE_SHIFT]++;const p=H.estimateBlackPoint(x);if(o<3)for(let v=0;v<o;v++)(u[v]&255)<p&&s.set(v);else{let v=u[0]&255,A=u[1]&255;for(let T=1;T<o-1;T++){const L=u[T+1]&255;(A*4-v-L)/2<p&&s.set(T),v=A,A=L}}return s}getBlackMatrix(){const a=this.getLuminanceSource(),s=a.getWidth(),n=a.getHeight(),o=new W(s,n);this.initArrays(s);const u=this.buckets;for(let v=1;v<5;v++){const A=Math.floor(n*v/5),T=a.getRow(A,this.luminances),L=Math.floor(s*4/5);for(let q=Math.floor(s/5);q<L;q++){const te=T[q]&255;u[te>>H.LUMINANCE_SHIFT]++}}const x=H.estimateBlackPoint(u),p=a.getMatrix();for(let v=0;v<n;v++){const A=v*s;for(let T=0;T<s;T++)(p[A+T]&255)<x&&o.set(T,v)}return o}createBinarizer(a){return new H(a)}initArrays(a){this.luminances.length<a&&(this.luminances=new Uint8ClampedArray(a));const s=this.buckets;for(let n=0;n<H.LUMINANCE_BUCKETS;n++)s[n]=0}static estimateBlackPoint(a){const s=a.length;let n=0,o=0,u=0;for(let T=0;T<s;T++)a[T]>u&&(o=T,u=a[T]),a[T]>n&&(n=a[T]);let x=0,p=0;for(let T=0;T<s;T++){const L=T-o,q=a[T]*L*L;q>p&&(x=T,p=q)}if(o>x){const T=o;o=x,x=T}if(x-o<=s/16)throw new U;let v=x-1,A=-1;for(let T=x-1;T>o;T--){const L=T-o,q=L*L*(x-T)*(n-a[T]);q>A&&(v=T,A=q)}return v<<H.LUMINANCE_SHIFT}}H.LUMINANCE_BITS=5,H.LUMINANCE_SHIFT=8-H.LUMINANCE_BITS,H.LUMINANCE_BUCKETS=1<<H.LUMINANCE_BITS,H.EMPTY=Uint8ClampedArray.from([0]);class ee extends H{constructor(a){super(a),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const a=this.getLuminanceSource(),s=a.getWidth(),n=a.getHeight();if(s>=ee.MINIMUM_DIMENSION&&n>=ee.MINIMUM_DIMENSION){const o=a.getMatrix();let u=s>>ee.BLOCK_SIZE_POWER;(s&ee.BLOCK_SIZE_MASK)!==0&&u++;let x=n>>ee.BLOCK_SIZE_POWER;(n&ee.BLOCK_SIZE_MASK)!==0&&x++;const p=ee.calculateBlackPoints(o,u,x,s,n),v=new W(s,n);ee.calculateThresholdForBlock(o,u,x,s,n,p,v),this.matrix=v}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(a){return new ee(a)}static calculateThresholdForBlock(a,s,n,o,u,x,p){const v=u-ee.BLOCK_SIZE,A=o-ee.BLOCK_SIZE;for(let T=0;T<n;T++){let L=T<<ee.BLOCK_SIZE_POWER;L>v&&(L=v);const q=ee.cap(T,2,n-3);for(let te=0;te<s;te++){let ce=te<<ee.BLOCK_SIZE_POWER;ce>A&&(ce=A);const ue=ee.cap(te,2,s-3);let Ne=0;for(let He=-2;He<=2;He++){const Ve=x[q+He];Ne+=Ve[ue-2]+Ve[ue-1]+Ve[ue]+Ve[ue+1]+Ve[ue+2]}const Te=Ne/25;ee.thresholdBlock(a,ce,L,Te,o,p)}}}static cap(a,s,n){return a<s?s:a>n?n:a}static thresholdBlock(a,s,n,o,u,x){for(let p=0,v=n*u+s;p<ee.BLOCK_SIZE;p++,v+=u)for(let A=0;A<ee.BLOCK_SIZE;A++)(a[v+A]&255)<=o&&x.set(s+A,n+p)}static calculateBlackPoints(a,s,n,o,u){const x=u-ee.BLOCK_SIZE,p=o-ee.BLOCK_SIZE,v=new Array(n);for(let A=0;A<n;A++){v[A]=new Int32Array(s);let T=A<<ee.BLOCK_SIZE_POWER;T>x&&(T=x);for(let L=0;L<s;L++){let q=L<<ee.BLOCK_SIZE_POWER;q>p&&(q=p);let te=0,ce=255,ue=0;for(let Te=0,He=T*o+q;Te<ee.BLOCK_SIZE;Te++,He+=o){for(let Ve=0;Ve<ee.BLOCK_SIZE;Ve++){const Ue=a[He+Ve]&255;te+=Ue,Ue<ce&&(ce=Ue),Ue>ue&&(ue=Ue)}if(ue-ce>ee.MIN_DYNAMIC_RANGE)for(Te++,He+=o;Te<ee.BLOCK_SIZE;Te++,He+=o)for(let Ve=0;Ve<ee.BLOCK_SIZE;Ve++)te+=a[He+Ve]&255}let Ne=te>>ee.BLOCK_SIZE_POWER*2;if(ue-ce<=ee.MIN_DYNAMIC_RANGE&&(Ne=ce/2,A>0&&L>0)){const Te=(v[A-1][L]+2*v[A][L-1]+v[A-1][L-1])/4;ce<Te&&(Ne=Te)}v[A][L]=Ne}}return v}}ee.BLOCK_SIZE_POWER=3,ee.BLOCK_SIZE=1<<ee.BLOCK_SIZE_POWER,ee.BLOCK_SIZE_MASK=ee.BLOCK_SIZE-1,ee.MINIMUM_DIMENSION=ee.BLOCK_SIZE*5,ee.MIN_DYNAMIC_RANGE=24;class oe{constructor(a,s){this.width=a,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(a,s,n,o){throw new de("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new de("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new de("This luminance source does not support rotation by 45 degrees.")}toString(){const a=new Uint8ClampedArray(this.width);let s=new le;for(let n=0;n<this.height;n++){const o=this.getRow(n,a);for(let u=0;u<this.width;u++){const x=o[u]&255;let p;x<64?p="#":x<128?p="+":x<192?p=".":p=" ",s.append(p)}s.append(`
`)}return s.toString()}}class we extends oe{constructor(a){super(a.getWidth(),a.getHeight()),this.delegate=a}getRow(a,s){const n=this.delegate.getRow(a,s),o=this.getWidth();for(let u=0;u<o;u++)n[u]=255-(n[u]&255);return n}getMatrix(){const a=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),n=new Uint8ClampedArray(s);for(let o=0;o<s;o++)n[o]=255-(a[o]&255);return n}isCropSupported(){return this.delegate.isCropSupported()}crop(a,s,n,o){return new we(this.delegate.crop(a,s,n,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new we(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new we(this.delegate.rotateCounterClockwise45())}}class K extends oe{constructor(a){super(a.width,a.height),this.canvas=a,this.tempCanvasElement=null,this.buffer=K.makeBufferFromCanvasImageData(a)}static makeBufferFromCanvasImageData(a){const s=a.getContext("2d").getImageData(0,0,a.width,a.height);return K.toGrayscaleBuffer(s.data,a.width,a.height)}static toGrayscaleBuffer(a,s,n){const o=new Uint8ClampedArray(s*n);for(let u=0,x=0,p=a.length;u<p;u+=4,x++){let v;if(a[u+3]===0)v=255;else{const T=a[u],L=a[u+1],q=a[u+2];v=306*T+601*L+117*q+512>>10}o[x]=v}return o}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const n=this.getWidth(),o=a*n;return s===null?s=this.buffer.slice(o,o+n):(s.length<n&&(s=new Uint8ClampedArray(n)),s.set(this.buffer.slice(o,o+n))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(a,s,n,o){return super.crop(a,s,n,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const a=this.canvas.ownerDocument.createElement("canvas");a.width=this.canvas.width,a.height=this.canvas.height,this.tempCanvasElement=a}return this.tempCanvasElement}rotate(a){const s=this.getTempCanvasElement(),n=s.getContext("2d"),o=a*K.DEGREE_TO_RADIANS,u=this.canvas.width,x=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(o))*u+Math.abs(Math.sin(o))*x),v=Math.ceil(Math.abs(Math.sin(o))*u+Math.abs(Math.cos(o))*x);return s.width=p,s.height=v,n.translate(p/2,v/2),n.rotate(o),n.drawImage(this.canvas,u/-2,x/-2),this.buffer=K.makeBufferFromCanvasImageData(s),this}invert(){return new we(this)}}K.DEGREE_TO_RADIANS=Math.PI/180;class ge{constructor(a,s,n){this.deviceId=a,this.label=s,this.kind="videoinput",this.groupId=n||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Oe=(globalThis||td||self||window||void 0)&&(globalThis||td||self||window||void 0).__awaiter||function(O,a,s,n){function o(u){return u instanceof s?u:new s(function(x){x(u)})}return new(s||(s=Promise))(function(u,x){function p(T){try{A(n.next(T))}catch(L){x(L)}}function v(T){try{A(n.throw(T))}catch(L){x(L)}}function A(T){T.done?u(T.value):o(T.value).then(p,v)}A((n=n.apply(O,a||[])).next())})};class xe{constructor(a,s=500,n){this.reader=a,this.timeBetweenScansMillis=s,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(a){this._timeBetweenDecodingAttempts=a<0?0:a}set hints(a){this._hints=a||null}get hints(){return this._hints}listVideoInputDevices(){return Oe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const a=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const n of a){const o=n.kind==="video"?"videoinput":n.kind;if(o!=="videoinput")continue;const u=n.deviceId||n.id,x=n.label||`Video device ${s.length+1}`,p=n.groupId,v={deviceId:u,label:x,kind:o,groupId:p};s.push(v)}return s})}getVideoInputDevices(){return Oe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new ge(s.deviceId,s.label))})}findDeviceById(a){return Oe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(n=>n.deviceId===a):null})}decodeFromInputVideoDevice(a,s){return Oe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(a,s)})}decodeOnceFromVideoDevice(a,s){return Oe(this,void 0,void 0,function*(){this.reset();let n;a?n={deviceId:{exact:a}}:n={facingMode:"environment"};const o={video:n};return yield this.decodeOnceFromConstraints(o,s)})}decodeOnceFromConstraints(a,s){return Oe(this,void 0,void 0,function*(){const n=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeOnceFromStream(n,s)})}decodeOnceFromStream(a,s){return Oe(this,void 0,void 0,function*(){this.reset();const n=yield this.attachStreamToVideo(a,s);return yield this.decodeOnce(n)})}decodeFromInputVideoDeviceContinuously(a,s,n){return Oe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(a,s,n)})}decodeFromVideoDevice(a,s,n){return Oe(this,void 0,void 0,function*(){let o;a?o={deviceId:{exact:a}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeFromConstraints(u,s,n)})}decodeFromConstraints(a,s,n){return Oe(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(a);return yield this.decodeFromStream(o,s,n)})}decodeFromStream(a,s,n){return Oe(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(a,s);return yield this.decodeContinuously(o,n)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(a,s){return Oe(this,void 0,void 0,function*(){const n=this.prepareVideoElement(s);return this.addVideoSource(n,a),this.videoElement=n,this.stream=a,yield this.playVideoOnLoadAsync(n),n})}playVideoOnLoadAsync(a){return new Promise((s,n)=>this.playVideoOnLoad(a,()=>s()))}playVideoOnLoad(a,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(a),a.addEventListener("ended",this.videoEndedListener),a.addEventListener("canplay",this.videoCanPlayListener),a.addEventListener("playing",s),this.tryPlayVideo(a)}isVideoPlaying(a){return a.currentTime>0&&!a.paused&&!a.ended&&a.readyState>2}tryPlayVideo(a){return Oe(this,void 0,void 0,function*(){if(this.isVideoPlaying(a)){console.warn("Trying to play video that is already playing.");return}try{yield a.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(a,s){const n=document.getElementById(a);if(!n)throw new S(`element with id '${a}' not found`);if(n.nodeName.toLowerCase()!==s.toLowerCase())throw new S(`element with id '${a}' must be an ${s} element`);return n}decodeFromImage(a,s){if(!a&&!s)throw new S("either imageElement with a src set or an url must be provided");return s&&!a?this.decodeFromImageUrl(s):this.decodeFromImageElement(a)}decodeFromVideo(a,s){if(!a&&!s)throw new S("Either an element with a src set or an URL must be provided");return s&&!a?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(a)}decodeFromVideoContinuously(a,s,n){if(a===void 0&&s===void 0)throw new S("Either an element with a src set or an URL must be provided");return s&&!a?this.decodeFromVideoUrlContinuously(s,n):this.decodeFromVideoElementContinuously(a,n)}decodeFromImageElement(a){if(!a)throw new S("An image element must be provided.");this.reset();const s=this.prepareImageElement(a);this.imageElement=s;let n;return this.isImageLoaded(s)?n=this.decodeOnce(s,!1,!0):n=this._decodeOnLoadImage(s),n}decodeFromVideoElement(a){const s=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(a,s){const n=this._decodeFromVideoElementSetup(a);return this._decodeOnLoadVideoContinuously(n,s)}_decodeFromVideoElementSetup(a){if(!a)throw new S("A video element must be provided.");this.reset();const s=this.prepareVideoElement(a);return this.videoElement=s,s}decodeFromImageUrl(a){if(!a)throw new S("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const n=this._decodeOnLoadImage(s);return s.src=a,n}decodeFromVideoUrl(a){if(!a)throw new S("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),n=this.decodeFromVideoElement(s);return s.src=a,n}decodeFromVideoUrlContinuously(a,s){if(!a)throw new S("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(n,s);return n.src=a,o}_decodeOnLoadImage(a){return new Promise((s,n)=>{this.imageLoadedListener=()=>this.decodeOnce(a,!1,!0).then(s,n),a.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(a){return Oe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(a),yield this.decodeOnce(a)})}_decodeOnLoadVideoContinuously(a,s){return Oe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(a),this.decodeContinuously(a,s)})}isImageLoaded(a){return!(!a.complete||a.naturalWidth===0)}prepareImageElement(a){let s;return typeof a>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof a=="string"&&(s=this.getMediaElement(a,"img")),a instanceof HTMLImageElement&&(s=a),s}prepareVideoElement(a){let s;return!a&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof a=="string"&&(s=this.getMediaElement(a,"video")),a instanceof HTMLVideoElement&&(s=a),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(a,s=!0,n=!0){this._stopAsyncDecode=!1;const o=(u,x)=>{if(this._stopAsyncDecode){x(new U("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(a);u(p)}catch(p){const v=s&&p instanceof U,T=(p instanceof D||p instanceof P)&&n;if(v||T)return setTimeout(o,this._timeBetweenDecodingAttempts,u,x);x(p)}};return new Promise((u,x)=>o(u,x))}decodeContinuously(a,s){this._stopContinuousDecode=!1;const n=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(a);s(o,null),setTimeout(n,this.timeBetweenScansMillis)}catch(o){s(null,o);const u=o instanceof D||o instanceof P,x=o instanceof U;(u||x)&&setTimeout(n,this._timeBetweenDecodingAttempts)}};n()}decode(a){const s=this.createBinaryBitmap(a);return this.decodeBitmap(s)}_isHTMLVideoElement(a){return a.videoWidth!==0}drawFrameOnCanvas(a,s,n){s||(s={sx:0,sy:0,sWidth:a.videoWidth,sHeight:a.videoHeight,dx:0,dy:0,dWidth:a.videoWidth,dHeight:a.videoHeight}),n||(n=this.captureCanvasContext),n.drawImage(a,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(a,s,n=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:a.naturalWidth,sHeight:a.naturalHeight,dx:0,dy:0,dWidth:a.naturalWidth,dHeight:a.naturalHeight}),n||(n=this.captureCanvasContext),n.drawImage(a,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(a){this.getCaptureCanvasContext(a),this._isHTMLVideoElement(a)?this.drawFrameOnCanvas(a):this.drawImageOnCanvas(a);const s=this.getCaptureCanvas(a),n=new K(s),o=new ee(n);return new M(o)}getCaptureCanvasContext(a){if(!this.captureCanvasContext){const n=this.getCaptureCanvas(a).getContext("2d");this.captureCanvasContext=n}return this.captureCanvasContext}getCaptureCanvas(a){if(!this.captureCanvas){const s=this.createCaptureCanvas(a);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(a){return this.reader.decode(a,this._hints)}createCaptureCanvas(a){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let n,o;return typeof a<"u"&&(a instanceof HTMLVideoElement?(n=a.videoWidth,o=a.videoHeight):a instanceof HTMLImageElement&&(n=a.naturalWidth||a.width,o=a.naturalHeight||a.height)),s.style.width=n+"px",s.style.height=o+"px",s.width=n,s.height=o,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(a=>a.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(a,s){try{a.srcObject=s}catch{a.src=URL.createObjectURL(s)}}cleanVideoSource(a){try{a.srcObject=null}catch{a.src=""}this.videoElement.removeAttribute("src")}}class ve{constructor(a,s,n=s==null?0:8*s.length,o,u,x=_.currentTimeMillis()){this.text=a,this.rawBytes=s,this.numBits=n,this.resultPoints=o,this.format=u,this.timestamp=x,this.text=a,this.rawBytes=s,n==null?this.numBits=s==null?0:8*s.length:this.numBits=n,this.resultPoints=o,this.format=u,this.resultMetadata=null,x==null?this.timestamp=_.currentTimeMillis():this.timestamp=x}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(a,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(a,s)}putAllMetadata(a){a!==null&&(this.resultMetadata===null?this.resultMetadata=a:this.resultMetadata=new Map(a))}addResultPoints(a){const s=this.resultPoints;if(s===null)this.resultPoints=a;else if(a!==null&&a.length>0){const n=new Array(s.length+a.length);_.arraycopy(s,0,n,0,s.length),_.arraycopy(a,0,n,s.length,a.length),this.resultPoints=n}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Fe;(function(O){O[O.AZTEC=0]="AZTEC",O[O.CODABAR=1]="CODABAR",O[O.CODE_39=2]="CODE_39",O[O.CODE_93=3]="CODE_93",O[O.CODE_128=4]="CODE_128",O[O.DATA_MATRIX=5]="DATA_MATRIX",O[O.EAN_8=6]="EAN_8",O[O.EAN_13=7]="EAN_13",O[O.ITF=8]="ITF",O[O.MAXICODE=9]="MAXICODE",O[O.PDF_417=10]="PDF_417",O[O.QR_CODE=11]="QR_CODE",O[O.RSS_14=12]="RSS_14",O[O.RSS_EXPANDED=13]="RSS_EXPANDED",O[O.UPC_A=14]="UPC_A",O[O.UPC_E=15]="UPC_E",O[O.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var ie=Fe,Qe;(function(O){O[O.OTHER=0]="OTHER",O[O.ORIENTATION=1]="ORIENTATION",O[O.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",O[O.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",O[O.ISSUE_NUMBER=4]="ISSUE_NUMBER",O[O.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",O[O.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",O[O.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",O[O.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",O[O.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",O[O.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Qe||(Qe={}));var ye=Qe;class dt{constructor(a,s,n,o,u=-1,x=-1){this.rawBytes=a,this.text=s,this.byteSegments=n,this.ecLevel=o,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=x,this.numBits=a==null?0:8*a.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(a){this.numBits=a}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(a){this.errorsCorrected=a}getErasures(){return this.erasures}setErasures(a){this.erasures=a}getOther(){return this.other}setOther(a){this.other=a}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class rt{exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}static addOrSubtract(a,s){return a^s}}class lt{constructor(a,s){if(s.length===0)throw new E;this.field=a;const n=s.length;if(n>1&&s[0]===0){let o=1;for(;o<n&&s[o]===0;)o++;o===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-o),_.arraycopy(s,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);const s=this.coefficients;let n;if(a===1){n=0;for(let x=0,p=s.length;x!==p;x++){const v=s[x];n=rt.addOrSubtract(n,v)}return n}n=s[0];const o=s.length,u=this.field;for(let x=1;x<o;x++)n=rt.addOrSubtract(u.multiply(a,n),s[x]);return n}addOrSubtract(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return a;if(a.isZero())return this;let s=this.coefficients,n=a.coefficients;if(s.length>n.length){const x=s;s=n,n=x}let o=new Int32Array(n.length);const u=n.length-s.length;_.arraycopy(n,0,o,0,u);for(let x=u;x<n.length;x++)o[x]=rt.addOrSubtract(s[x-u],n[x]);return new lt(this.field,o)}multiply(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||a.isZero())return this.field.getZero();const s=this.coefficients,n=s.length,o=a.coefficients,u=o.length,x=new Int32Array(n+u-1),p=this.field;for(let v=0;v<n;v++){const A=s[v];for(let T=0;T<u;T++)x[v+T]=rt.addOrSubtract(x[v+T],p.multiply(A,o[T]))}return new lt(p,x)}multiplyScalar(a){if(a===0)return this.field.getZero();if(a===1)return this;const s=this.coefficients.length,n=this.field,o=new Int32Array(s),u=this.coefficients;for(let x=0;x<s;x++)o[x]=n.multiply(u[x],a);return new lt(n,o)}multiplyByMonomial(a,s){if(a<0)throw new E;if(s===0)return this.field.getZero();const n=this.coefficients,o=n.length,u=new Int32Array(o+a),x=this.field;for(let p=0;p<o;p++)u[p]=x.multiply(n[p],s);return new lt(x,u)}divide(a){if(!this.field.equals(a.field))throw new E("GenericGFPolys do not have same GenericGF field");if(a.isZero())throw new E("Divide by 0");const s=this.field;let n=s.getZero(),o=this;const u=a.getCoefficient(a.getDegree()),x=s.inverse(u);for(;o.getDegree()>=a.getDegree()&&!o.isZero();){const p=o.getDegree()-a.getDegree(),v=s.multiply(o.getCoefficient(o.getDegree()),x),A=a.multiplyByMonomial(p,v),T=s.buildMonomial(p,v);n=n.addOrSubtract(T),o=o.addOrSubtract(A)}return[n,o]}toString(){let a="";for(let s=this.getDegree();s>=0;s--){let n=this.getCoefficient(s);if(n!==0){if(n<0?(a+=" - ",n=-n):a.length>0&&(a+=" + "),s===0||n!==1){const o=this.field.log(n);o===0?a+="1":o===1?a+="a":(a+="a^",a+=o)}s!==0&&(s===1?a+="x":(a+="x^",a+=s))}}return a}}class Ze extends b{}Ze.kind="ArithmeticException";class Je extends rt{constructor(a,s,n){super(),this.primitive=a,this.size=s,this.generatorBase=n;const o=new Int32Array(s);let u=1;for(let p=0;p<s;p++)o[p]=u,u*=2,u>=s&&(u^=a,u&=s-1);this.expTable=o;const x=new Int32Array(s);for(let p=0;p<s-1;p++)x[o[p]]=p;this.logTable=x,this.zero=new lt(this,Int32Array.from([0])),this.one=new lt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,s){if(a<0)throw new E;if(s===0)return this.zero;const n=new Int32Array(a+1);return n[0]=s,new lt(this,n)}inverse(a){if(a===0)throw new Ze;return this.expTable[this.size-this.logTable[a]-1]}multiply(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+F.toHexString(this.primitive)+","+this.size+")"}equals(a){return a===this}}Je.AZTEC_DATA_12=new Je(4201,4096,1),Je.AZTEC_DATA_10=new Je(1033,1024,1),Je.AZTEC_DATA_6=new Je(67,64,1),Je.AZTEC_PARAM=new Je(19,16,1),Je.QR_CODE_FIELD_256=new Je(285,256,0),Je.DATA_MATRIX_FIELD_256=new Je(301,256,1),Je.AZTEC_DATA_8=Je.DATA_MATRIX_FIELD_256,Je.MAXICODE_FIELD_64=Je.AZTEC_DATA_6;class be extends b{}be.kind="ReedSolomonException";class Ye extends b{}Ye.kind="IllegalStateException";class Ae{constructor(a){this.field=a}decode(a,s){const n=this.field,o=new lt(n,a),u=new Int32Array(s);let x=!0;for(let te=0;te<s;te++){const ce=o.evaluateAt(n.exp(te+n.getGeneratorBase()));u[u.length-1-te]=ce,ce!==0&&(x=!1)}if(x)return;const p=new lt(n,u),v=this.runEuclideanAlgorithm(n.buildMonomial(s,1),p,s),A=v[0],T=v[1],L=this.findErrorLocations(A),q=this.findErrorMagnitudes(T,L);for(let te=0;te<L.length;te++){const ce=a.length-1-n.log(L[te]);if(ce<0)throw new be("Bad error location");a[ce]=Je.addOrSubtract(a[ce],q[te])}}runEuclideanAlgorithm(a,s,n){if(a.getDegree()<s.getDegree()){const te=a;a=s,s=te}const o=this.field;let u=a,x=s,p=o.getZero(),v=o.getOne();for(;x.getDegree()>=(n/2|0);){let te=u,ce=p;if(u=x,p=v,u.isZero())throw new be("r_{i-1} was zero");x=te;let ue=o.getZero();const Ne=u.getCoefficient(u.getDegree()),Te=o.inverse(Ne);for(;x.getDegree()>=u.getDegree()&&!x.isZero();){const He=x.getDegree()-u.getDegree(),Ve=o.multiply(x.getCoefficient(x.getDegree()),Te);ue=ue.addOrSubtract(o.buildMonomial(He,Ve)),x=x.addOrSubtract(u.multiplyByMonomial(He,Ve))}if(v=ue.multiply(p).addOrSubtract(ce),x.getDegree()>=u.getDegree())throw new Ye("Division algorithm failed to reduce polynomial?")}const A=v.getCoefficient(0);if(A===0)throw new be("sigmaTilde(0) was zero");const T=o.inverse(A),L=v.multiplyScalar(T),q=x.multiplyScalar(T);return[L,q]}findErrorLocations(a){const s=a.getDegree();if(s===1)return Int32Array.from([a.getCoefficient(1)]);const n=new Int32Array(s);let o=0;const u=this.field;for(let x=1;x<u.getSize()&&o<s;x++)a.evaluateAt(x)===0&&(n[o]=u.inverse(x),o++);if(o!==s)throw new be("Error locator degree does not match number of roots");return n}findErrorMagnitudes(a,s){const n=s.length,o=new Int32Array(n),u=this.field;for(let x=0;x<n;x++){const p=u.inverse(s[x]);let v=1;for(let A=0;A<n;A++)if(x!==A){const T=u.multiply(s[A],p),L=(T&1)===0?T|1:T&-2;v=u.multiply(v,L)}o[x]=u.multiply(a.evaluateAt(p),u.inverse(v)),u.getGeneratorBase()!==0&&(o[x]=u.multiply(o[x],p))}return o}}var Xe;(function(O){O[O.UPPER=0]="UPPER",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.DIGIT=3]="DIGIT",O[O.PUNCT=4]="PUNCT",O[O.BINARY=5]="BINARY"})(Xe||(Xe={}));class Ge{decode(a){this.ddata=a;let s=a.getBits(),n=this.extractBits(s),o=this.correctBits(n),u=Ge.convertBoolArrayToByteArray(o),x=Ge.getEncodedData(o),p=new dt(u,x,null,null);return p.setNumBits(o.length),p}static highLevelDecode(a){return this.getEncodedData(a)}static getEncodedData(a){let s=a.length,n=Xe.UPPER,o=Xe.UPPER,u="",x=0;for(;x<s;)if(o===Xe.BINARY){if(s-x<5)break;let p=Ge.readCode(a,x,5);if(x+=5,p===0){if(s-x<11)break;p=Ge.readCode(a,x,11)+31,x+=11}for(let v=0;v<p;v++){if(s-x<8){x=s;break}const A=Ge.readCode(a,x,8);u+=re.castAsNonUtf8Char(A),x+=8}o=n}else{let p=o===Xe.DIGIT?4:5;if(s-x<p)break;let v=Ge.readCode(a,x,p);x+=p;let A=Ge.getCharacter(o,v);A.startsWith("CTRL_")?(n=o,o=Ge.getTable(A.charAt(5)),A.charAt(6)==="L"&&(n=o)):(u+=A,o=n)}return u}static getTable(a){switch(a){case"L":return Xe.LOWER;case"P":return Xe.PUNCT;case"M":return Xe.MIXED;case"D":return Xe.DIGIT;case"B":return Xe.BINARY;case"U":default:return Xe.UPPER}}static getCharacter(a,s){switch(a){case Xe.UPPER:return Ge.UPPER_TABLE[s];case Xe.LOWER:return Ge.LOWER_TABLE[s];case Xe.MIXED:return Ge.MIXED_TABLE[s];case Xe.PUNCT:return Ge.PUNCT_TABLE[s];case Xe.DIGIT:return Ge.DIGIT_TABLE[s];default:throw new Ye("Bad table")}}correctBits(a){let s,n;this.ddata.getNbLayers()<=2?(n=6,s=Je.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,s=Je.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,s=Je.AZTEC_DATA_10):(n=12,s=Je.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),u=a.length/n;if(u<o)throw new P;let x=a.length%n,p=new Int32Array(u);for(let q=0;q<u;q++,x+=n)p[q]=Ge.readCode(a,x,n);try{new Ae(s).decode(p,u-o)}catch(q){throw new P(q)}let v=(1<<n)-1,A=0;for(let q=0;q<o;q++){let te=p[q];if(te===0||te===v)throw new P;(te===1||te===v-1)&&A++}let T=new Array(o*n-A),L=0;for(let q=0;q<o;q++){let te=p[q];if(te===1||te===v-1)T.fill(te>1,L,L+n-1),L+=n-1;else for(let ce=n-1;ce>=0;--ce)T[L++]=(te&1<<ce)!==0}return T}extractBits(a){let s=this.ddata.isCompact(),n=this.ddata.getNbLayers(),o=(s?11:14)+n*4,u=new Int32Array(o),x=new Array(this.totalBitsInLayer(n,s));if(s)for(let p=0;p<u.length;p++)u[p]=p;else{let p=o+1+2*F.truncDivision(F.truncDivision(o,2)-1,15),v=o/2,A=F.truncDivision(p,2);for(let T=0;T<v;T++){let L=T+F.truncDivision(T,15);u[v-T-1]=A-L-1,u[v+T]=A+L+1}}for(let p=0,v=0;p<n;p++){let A=(n-p)*4+(s?9:12),T=p*2,L=o-1-T;for(let q=0;q<A;q++){let te=q*2;for(let ce=0;ce<2;ce++)x[v+te+ce]=a.get(u[T+ce],u[T+q]),x[v+2*A+te+ce]=a.get(u[T+q],u[L-ce]),x[v+4*A+te+ce]=a.get(u[L-ce],u[L-q]),x[v+6*A+te+ce]=a.get(u[L-q],u[T+ce])}v+=A*8}return x}static readCode(a,s,n){let o=0;for(let u=s;u<s+n;u++)o<<=1,a[u]&&(o|=1);return o}static readByte(a,s){let n=a.length-s;return n>=8?Ge.readCode(a,s,8):Ge.readCode(a,s,n)<<8-n}static convertBoolArrayToByteArray(a){let s=new Uint8Array((a.length+7)/8);for(let n=0;n<s.length;n++)s[n]=Ge.readByte(a,8*n);return s}totalBitsInLayer(a,s){return((s?88:112)+16*a)*a}}Ge.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ge.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ge.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ge.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ge.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Me{constructor(){}static round(a){return a===NaN?0:a<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:a>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:a+(a<0?-.5:.5)|0}static distance(a,s,n,o){const u=a-n,x=s-o;return Math.sqrt(u*u+x*x)}static sum(a){let s=0;for(let n=0,o=a.length;n!==o;n++){const u=a[n];s+=u}return s}}class ae{static floatToIntBits(a){return a}}ae.MAX_VALUE=Number.MAX_SAFE_INTEGER;class je{constructor(a,s){this.x=a,this.y=s}getX(){return this.x}getY(){return this.y}equals(a){if(a instanceof je){const s=a;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ae.floatToIntBits(this.x)+ae.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(a){const s=this.distance(a[0],a[1]),n=this.distance(a[1],a[2]),o=this.distance(a[0],a[2]);let u,x,p;if(n>=s&&n>=o?(x=a[0],u=a[1],p=a[2]):o>=n&&o>=s?(x=a[1],u=a[0],p=a[2]):(x=a[2],u=a[0],p=a[1]),this.crossProductZ(u,x,p)<0){const v=u;u=p,p=v}a[0]=u,a[1]=x,a[2]=p}static distance(a,s){return Me.distance(a.x,a.y,s.x,s.y)}static crossProductZ(a,s,n){const o=s.x,u=s.y;return(n.x-o)*(a.y-u)-(n.y-u)*(a.x-o)}}class We{constructor(a,s){this.bits=a,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class xt extends We{constructor(a,s,n,o,u){super(a,s),this.compact=n,this.nbDatablocks=o,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Mt{constructor(a,s,n,o){this.image=a,this.height=a.getHeight(),this.width=a.getWidth(),s==null&&(s=Mt.INIT_SIZE),n==null&&(n=a.getWidth()/2|0),o==null&&(o=a.getHeight()/2|0);const u=s/2|0;if(this.leftInit=n-u,this.rightInit=n+u,this.upInit=o-u,this.downInit=o+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new U}detect(){let a=this.leftInit,s=this.rightInit,n=this.upInit,o=this.downInit,u=!1,x=!0,p=!1,v=!1,A=!1,T=!1,L=!1;const q=this.width,te=this.height;for(;x;){x=!1;let ce=!0;for(;(ce||!v)&&s<q;)ce=this.containsBlackPoint(n,o,s,!1),ce?(s++,x=!0,v=!0):v||s++;if(s>=q){u=!0;break}let ue=!0;for(;(ue||!A)&&o<te;)ue=this.containsBlackPoint(a,s,o,!0),ue?(o++,x=!0,A=!0):A||o++;if(o>=te){u=!0;break}let Ne=!0;for(;(Ne||!T)&&a>=0;)Ne=this.containsBlackPoint(n,o,a,!1),Ne?(a--,x=!0,T=!0):T||a--;if(a<0){u=!0;break}let Te=!0;for(;(Te||!L)&&n>=0;)Te=this.containsBlackPoint(a,s,n,!0),Te?(n--,x=!0,L=!0):L||n--;if(n<0){u=!0;break}x&&(p=!0)}if(!u&&p){const ce=s-a;let ue=null;for(let Ve=1;ue===null&&Ve<ce;Ve++)ue=this.getBlackPointOnSegment(a,o-Ve,a+Ve,o);if(ue==null)throw new U;let Ne=null;for(let Ve=1;Ne===null&&Ve<ce;Ve++)Ne=this.getBlackPointOnSegment(a,n+Ve,a+Ve,n);if(Ne==null)throw new U;let Te=null;for(let Ve=1;Te===null&&Ve<ce;Ve++)Te=this.getBlackPointOnSegment(s,n+Ve,s-Ve,n);if(Te==null)throw new U;let He=null;for(let Ve=1;He===null&&Ve<ce;Ve++)He=this.getBlackPointOnSegment(s,o-Ve,s-Ve,o);if(He==null)throw new U;return this.centerEdges(He,ue,Te,Ne)}else throw new U}getBlackPointOnSegment(a,s,n,o){const u=Me.round(Me.distance(a,s,n,o)),x=(n-a)/u,p=(o-s)/u,v=this.image;for(let A=0;A<u;A++){const T=Me.round(a+A*x),L=Me.round(s+A*p);if(v.get(T,L))return new je(T,L)}return null}centerEdges(a,s,n,o){const u=a.getX(),x=a.getY(),p=s.getX(),v=s.getY(),A=n.getX(),T=n.getY(),L=o.getX(),q=o.getY(),te=Mt.CORR;return u<this.width/2?[new je(L-te,q+te),new je(p+te,v+te),new je(A-te,T-te),new je(u+te,x-te)]:[new je(L+te,q+te),new je(p+te,v-te),new je(A-te,T+te),new je(u-te,x-te)]}containsBlackPoint(a,s,n,o){const u=this.image;if(o){for(let x=a;x<=s;x++)if(u.get(x,n))return!0}else for(let x=a;x<=s;x++)if(u.get(n,x))return!0;return!1}}Mt.INIT_SIZE=10,Mt.CORR=1;class Vt{static checkAndNudgePoints(a,s){const n=a.getWidth(),o=a.getHeight();let u=!0;for(let x=0;x<s.length&&u;x+=2){const p=Math.floor(s[x]),v=Math.floor(s[x+1]);if(p<-1||p>n||v<-1||v>o)throw new U;u=!1,p===-1?(s[x]=0,u=!0):p===n&&(s[x]=n-1,u=!0),v===-1?(s[x+1]=0,u=!0):v===o&&(s[x+1]=o-1,u=!0)}u=!0;for(let x=s.length-2;x>=0&&u;x-=2){const p=Math.floor(s[x]),v=Math.floor(s[x+1]);if(p<-1||p>n||v<-1||v>o)throw new U;u=!1,p===-1?(s[x]=0,u=!0):p===n&&(s[x]=n-1,u=!0),v===-1?(s[x+1]=0,u=!0):v===o&&(s[x+1]=o-1,u=!0)}}}class Re{constructor(a,s,n,o,u,x,p,v,A){this.a11=a,this.a21=s,this.a31=n,this.a12=o,this.a22=u,this.a32=x,this.a13=p,this.a23=v,this.a33=A}static quadrilateralToQuadrilateral(a,s,n,o,u,x,p,v,A,T,L,q,te,ce,ue,Ne){const Te=Re.quadrilateralToSquare(a,s,n,o,u,x,p,v);return Re.squareToQuadrilateral(A,T,L,q,te,ce,ue,Ne).times(Te)}transformPoints(a){const s=a.length,n=this.a11,o=this.a12,u=this.a13,x=this.a21,p=this.a22,v=this.a23,A=this.a31,T=this.a32,L=this.a33;for(let q=0;q<s;q+=2){const te=a[q],ce=a[q+1],ue=u*te+v*ce+L;a[q]=(n*te+x*ce+A)/ue,a[q+1]=(o*te+p*ce+T)/ue}}transformPointsWithValues(a,s){const n=this.a11,o=this.a12,u=this.a13,x=this.a21,p=this.a22,v=this.a23,A=this.a31,T=this.a32,L=this.a33,q=a.length;for(let te=0;te<q;te++){const ce=a[te],ue=s[te],Ne=u*ce+v*ue+L;a[te]=(n*ce+x*ue+A)/Ne,s[te]=(o*ce+p*ue+T)/Ne}}static squareToQuadrilateral(a,s,n,o,u,x,p,v){const A=a-n+u-p,T=s-o+x-v;if(A===0&&T===0)return new Re(n-a,u-n,a,o-s,x-o,s,0,0,1);{const L=n-u,q=p-u,te=o-x,ce=v-x,ue=L*ce-q*te,Ne=(A*ce-q*T)/ue,Te=(L*T-A*te)/ue;return new Re(n-a+Ne*n,p-a+Te*p,a,o-s+Ne*o,v-s+Te*v,s,Ne,Te,1)}}static quadrilateralToSquare(a,s,n,o,u,x,p,v){return Re.squareToQuadrilateral(a,s,n,o,u,x,p,v).buildAdjoint()}buildAdjoint(){return new Re(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(a){return new Re(this.a11*a.a11+this.a21*a.a12+this.a31*a.a13,this.a11*a.a21+this.a21*a.a22+this.a31*a.a23,this.a11*a.a31+this.a21*a.a32+this.a31*a.a33,this.a12*a.a11+this.a22*a.a12+this.a32*a.a13,this.a12*a.a21+this.a22*a.a22+this.a32*a.a23,this.a12*a.a31+this.a22*a.a32+this.a32*a.a33,this.a13*a.a11+this.a23*a.a12+this.a33*a.a13,this.a13*a.a21+this.a23*a.a22+this.a33*a.a23,this.a13*a.a31+this.a23*a.a32+this.a33*a.a33)}}class et extends Vt{sampleGrid(a,s,n,o,u,x,p,v,A,T,L,q,te,ce,ue,Ne,Te,He,Ve){const Ue=Re.quadrilateralToQuadrilateral(o,u,x,p,v,A,T,L,q,te,ce,ue,Ne,Te,He,Ve);return this.sampleGridWithTransform(a,s,n,Ue)}sampleGridWithTransform(a,s,n,o){if(s<=0||n<=0)throw new U;const u=new W(s,n),x=new Float32Array(2*s);for(let p=0;p<n;p++){const v=x.length,A=p+.5;for(let T=0;T<v;T+=2)x[T]=T/2+.5,x[T+1]=A;o.transformPoints(x),Vt.checkAndNudgePoints(a,x);try{for(let T=0;T<v;T+=2)a.get(Math.floor(x[T]),Math.floor(x[T+1]))&&u.set(T/2,p)}catch{throw new U}}return u}}class At{static setGridSampler(a){At.gridSampler=a}static getInstance(){return At.gridSampler}}At.gridSampler=new et;class pt{constructor(a,s){this.x=a,this.y=s}toResultPoint(){return new je(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Yt{constructor(a){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=a}detect(){return this.detectMirror(!1)}detectMirror(a){let s=this.getMatrixCenter(),n=this.getBullsEyeCorners(s);if(a){let x=n[0];n[0]=n[2],n[2]=x}this.extractParameters(n);let o=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),u=this.getMatrixCornerPoints(n);return new xt(o,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(a){if(!this.isValidPoint(a[0])||!this.isValidPoint(a[1])||!this.isValidPoint(a[2])||!this.isValidPoint(a[3]))throw new U;let s=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(a[0],a[1],s),this.sampleLine(a[1],a[2],s),this.sampleLine(a[2],a[3],s),this.sampleLine(a[3],a[0],s)]);this.shift=this.getRotation(n,s);let o=0;for(let x=0;x<4;x++){let p=n[(this.shift+x)%4];this.compact?(o<<=7,o+=p>>1&127):(o<<=10,o+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(a,s){let n=0;a.forEach((o,u,x)=>{let p=(o>>s-2<<1)+(o&1);n=(n<<3)+p}),n=((n&1)<<11)+(n>>1);for(let o=0;o<4;o++)if(F.bitCount(n^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new U}getCorrectedParameterData(a,s){let n,o;s?(n=7,o=2):(n=10,o=4);let u=n-o,x=new Int32Array(n);for(let v=n-1;v>=0;--v)x[v]=a&15,a>>=4;try{new Ae(Je.AZTEC_PARAM).decode(x,u)}catch{throw new U}let p=0;for(let v=0;v<o;v++)p=(p<<4)+x[v];return p}getBullsEyeCorners(a){let s=a,n=a,o=a,u=a,x=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let L=this.getFirstDifferent(s,x,1,-1),q=this.getFirstDifferent(n,x,1,1),te=this.getFirstDifferent(o,x,-1,1),ce=this.getFirstDifferent(u,x,-1,-1);if(this.nbCenterLayers>2){let ue=this.distancePoint(ce,L)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(ue<.75||ue>1.25||!this.isWhiteOrBlackRectangle(L,q,te,ce))break}s=L,n=q,o=te,u=ce,x=!x}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new U;this.compact=this.nbCenterLayers===5;let p=new je(s.getX()+.5,s.getY()-.5),v=new je(n.getX()+.5,n.getY()+.5),A=new je(o.getX()-.5,o.getY()+.5),T=new je(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,v,A,T],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let a,s,n,o;try{let p=new Mt(this.image).detect();a=p[0],s=p[1],n=p[2],o=p[3]}catch{let v=this.image.getWidth()/2,A=this.image.getHeight()/2;a=this.getFirstDifferent(new pt(v+7,A-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new pt(v+7,A+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pt(v-7,A+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new pt(v-7,A-7),!1,-1,-1).toResultPoint()}let u=Me.round((a.getX()+o.getX()+s.getX()+n.getX())/4),x=Me.round((a.getY()+o.getY()+s.getY()+n.getY())/4);try{let p=new Mt(this.image,15,u,x).detect();a=p[0],s=p[1],n=p[2],o=p[3]}catch{a=this.getFirstDifferent(new pt(u+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new pt(u+7,x+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new pt(u-7,x+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new pt(u-7,x-7),!1,-1,-1).toResultPoint()}return u=Me.round((a.getX()+o.getX()+s.getX()+n.getX())/4),x=Me.round((a.getY()+o.getY()+s.getY()+n.getY())/4),new pt(u,x)}getMatrixCornerPoints(a){return this.expandSquare(a,2*this.nbCenterLayers,this.getDimension())}sampleGrid(a,s,n,o,u){let x=At.getInstance(),p=this.getDimension(),v=p/2-this.nbCenterLayers,A=p/2+this.nbCenterLayers;return x.sampleGrid(a,p,p,v,v,A,v,A,A,v,A,s.getX(),s.getY(),n.getX(),n.getY(),o.getX(),o.getY(),u.getX(),u.getY())}sampleLine(a,s,n){let o=0,u=this.distanceResultPoint(a,s),x=u/n,p=a.getX(),v=a.getY(),A=x*(s.getX()-a.getX())/u,T=x*(s.getY()-a.getY())/u;for(let L=0;L<n;L++)this.image.get(Me.round(p+L*A),Me.round(v+L*T))&&(o|=1<<n-L-1);return o}isWhiteOrBlackRectangle(a,s,n,o){let u=3;a=new pt(a.getX()-u,a.getY()+u),s=new pt(s.getX()-u,s.getY()-u),n=new pt(n.getX()+u,n.getY()-u),o=new pt(o.getX()+u,o.getY()+u);let x=this.getColor(o,a);if(x===0)return!1;let p=this.getColor(a,s);return p!==x||(p=this.getColor(s,n),p!==x)?!1:(p=this.getColor(n,o),p===x)}getColor(a,s){let n=this.distancePoint(a,s),o=(s.getX()-a.getX())/n,u=(s.getY()-a.getY())/n,x=0,p=a.getX(),v=a.getY(),A=this.image.get(a.getX(),a.getY()),T=Math.ceil(n);for(let q=0;q<T;q++)p+=o,v+=u,this.image.get(Me.round(p),Me.round(v))!==A&&x++;let L=x/n;return L>.1&&L<.9?0:L<=.1===A?1:-1}getFirstDifferent(a,s,n,o){let u=a.getX()+n,x=a.getY()+o;for(;this.isValid(u,x)&&this.image.get(u,x)===s;)u+=n,x+=o;for(u-=n,x-=o;this.isValid(u,x)&&this.image.get(u,x)===s;)u+=n;for(u-=n;this.isValid(u,x)&&this.image.get(u,x)===s;)x+=o;return x-=o,new pt(u,x)}expandSquare(a,s,n){let o=n/(2*s),u=a[0].getX()-a[2].getX(),x=a[0].getY()-a[2].getY(),p=(a[0].getX()+a[2].getX())/2,v=(a[0].getY()+a[2].getY())/2,A=new je(p+o*u,v+o*x),T=new je(p-o*u,v-o*x);u=a[1].getX()-a[3].getX(),x=a[1].getY()-a[3].getY(),p=(a[1].getX()+a[3].getX())/2,v=(a[1].getY()+a[3].getY())/2;let L=new je(p+o*u,v+o*x),q=new je(p-o*u,v-o*x);return[A,L,T,q]}isValid(a,s){return a>=0&&a<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(a){let s=Me.round(a.getX()),n=Me.round(a.getY());return this.isValid(s,n)}distancePoint(a,s){return Me.distance(a.getX(),a.getY(),s.getX(),s.getY())}distanceResultPoint(a,s){return Me.distance(a.getX(),a.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(F.truncDivision(this.nbLayers-4,8)+1)+15}}class Tt{decode(a,s=null){let n=null,o=new Yt(a.getBlackMatrix()),u=null,x=null;try{let T=o.detectMirror(!1);u=T.getPoints(),this.reportFoundResultPoints(s,u),x=new Ge().decode(T)}catch(T){n=T}if(x==null)try{let T=o.detectMirror(!0);u=T.getPoints(),this.reportFoundResultPoints(s,u),x=new Ge().decode(T)}catch(T){throw n??T}let p=new ve(x.getText(),x.getRawBytes(),x.getNumBits(),u,ie.AZTEC,_.currentTimeMillis()),v=x.getByteSegments();v!=null&&p.putMetadata(ye.BYTE_SEGMENTS,v);let A=x.getECLevel();return A!=null&&p.putMetadata(ye.ERROR_CORRECTION_LEVEL,A),p}reportFoundResultPoints(a,s){if(a!=null){let n=a.get($.NEED_RESULT_POINT_CALLBACK);n!=null&&s.forEach((o,u,x)=>{n.foundPossibleResultPoint(o)})}}reset(){}}class st extends xe{constructor(a=500){super(new Tt,a)}}class $e{decode(a,s){try{return this.doDecode(a,s)}catch{if(s&&s.get($.TRY_HARDER)===!0&&a.isRotateSupported()){const u=a.rotateCounterClockwise(),x=this.doDecode(u,s),p=x.getResultMetadata();let v=270;p!==null&&p.get(ye.ORIENTATION)===!0&&(v=v+p.get(ye.ORIENTATION)%360),x.putMetadata(ye.ORIENTATION,v);const A=x.getResultPoints();if(A!==null){const T=u.getHeight();for(let L=0;L<A.length;L++)A[L]=new je(T-A[L].getY()-1,A[L].getX())}return x}else throw new U}}reset(){}doDecode(a,s){const n=a.getWidth(),o=a.getHeight();let u=new V(n);const x=s&&s.get($.TRY_HARDER)===!0,p=Math.max(1,o>>(x?8:5));let v;x?v=o:v=15;const A=Math.trunc(o/2);for(let T=0;T<v;T++){const L=Math.trunc((T+1)/2),q=(T&1)===0,te=A+p*(q?L:-L);if(te<0||te>=o)break;try{u=a.getBlackRow(te,u)}catch{continue}for(let ce=0;ce<2;ce++){if(ce===1&&(u.reverse(),s&&s.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const ue=new Map;s.forEach((Ne,Te)=>ue.set(Te,Ne)),ue.delete($.NEED_RESULT_POINT_CALLBACK),s=ue}try{const ue=this.decodeRow(te,u,s);if(ce===1){ue.putMetadata(ye.ORIENTATION,180);const Ne=ue.getResultPoints();Ne!==null&&(Ne[0]=new je(n-Ne[0].getX()-1,Ne[0].getY()),Ne[1]=new je(n-Ne[1].getX()-1,Ne[1].getY()))}return ue}catch{}}}throw new U}static recordPattern(a,s,n){const o=n.length;for(let A=0;A<o;A++)n[A]=0;const u=a.getSize();if(s>=u)throw new U;let x=!a.get(s),p=0,v=s;for(;v<u;){if(a.get(v)!==x)n[p]++;else{if(++p===o)break;n[p]=1,x=!x}v++}if(!(p===o||p===o-1&&v===u))throw new U}static recordPatternInReverse(a,s,n){let o=n.length,u=a.get(s);for(;s>0&&o>=0;)a.get(--s)!==u&&(o--,u=!u);if(o>=0)throw new U;$e.recordPattern(a,s+1,n)}static patternMatchVariance(a,s,n){const o=a.length;let u=0,x=0;for(let A=0;A<o;A++)u+=a[A],x+=s[A];if(u<x)return Number.POSITIVE_INFINITY;const p=u/x;n*=p;let v=0;for(let A=0;A<o;A++){const T=a[A],L=s[A]*p,q=T>L?T-L:L-T;if(q>n)return Number.POSITIVE_INFINITY;v+=q}return v/u}}class qe extends $e{static findStartPattern(a){const s=a.getSize(),n=a.getNextSet(0);let o=0,u=Int32Array.from([0,0,0,0,0,0]),x=n,p=!1;const v=6;for(let A=n;A<s;A++)if(a.get(A)!==p)u[o]++;else{if(o===v-1){let T=qe.MAX_AVG_VARIANCE,L=-1;for(let q=qe.CODE_START_A;q<=qe.CODE_START_C;q++){const te=$e.patternMatchVariance(u,qe.CODE_PATTERNS[q],qe.MAX_INDIVIDUAL_VARIANCE);te<T&&(T=te,L=q)}if(L>=0&&a.isRange(Math.max(0,x-(A-x)/2),x,!1))return Int32Array.from([x,A,L]);x+=u[0]+u[1],u=u.slice(2,u.length-1),u[o-1]=0,u[o]=0,o--}else o++;u[o]=1,p=!p}throw new U}static decodeCode(a,s,n){$e.recordPattern(a,n,s);let o=qe.MAX_AVG_VARIANCE,u=-1;for(let x=0;x<qe.CODE_PATTERNS.length;x++){const p=qe.CODE_PATTERNS[x],v=this.patternMatchVariance(s,p,qe.MAX_INDIVIDUAL_VARIANCE);v<o&&(o=v,u=x)}if(u>=0)return u;throw new U}decodeRow(a,s,n){const o=n&&n.get($.ASSUME_GS1)===!0,u=qe.findStartPattern(s),x=u[2];let p=0;const v=new Uint8Array(20);v[p++]=x;let A;switch(x){case qe.CODE_START_A:A=qe.CODE_CODE_A;break;case qe.CODE_START_B:A=qe.CODE_CODE_B;break;case qe.CODE_START_C:A=qe.CODE_CODE_C;break;default:throw new P}let T=!1,L=!1,q="",te=u[0],ce=u[1];const ue=Int32Array.from([0,0,0,0,0,0]);let Ne=0,Te=0,He=x,Ve=0,Ue=!0,vt=!1,bt=!1;for(;!T;){const Ts=L;switch(L=!1,Ne=Te,Te=qe.decodeCode(s,ue,ce),v[p++]=Te,Te!==qe.CODE_STOP&&(Ue=!0),Te!==qe.CODE_STOP&&(Ve++,He+=Ve*Te),te=ce,ce+=ue.reduce((Or,tc)=>Or+tc,0),Te){case qe.CODE_START_A:case qe.CODE_START_B:case qe.CODE_START_C:throw new P}switch(A){case qe.CODE_CODE_A:if(Te<64)bt===vt?q+=String.fromCharCode(32+Te):q+=String.fromCharCode(32+Te+128),bt=!1;else if(Te<96)bt===vt?q+=String.fromCharCode(Te-64):q+=String.fromCharCode(Te+64),bt=!1;else switch(Te!==qe.CODE_STOP&&(Ue=!1),Te){case qe.CODE_FNC_1:o&&(q.length===0?q+="]C1":q+="");break;case qe.CODE_FNC_2:case qe.CODE_FNC_3:break;case qe.CODE_FNC_4_A:!vt&&bt?(vt=!0,bt=!1):vt&&bt?(vt=!1,bt=!1):bt=!0;break;case qe.CODE_SHIFT:L=!0,A=qe.CODE_CODE_B;break;case qe.CODE_CODE_B:A=qe.CODE_CODE_B;break;case qe.CODE_CODE_C:A=qe.CODE_CODE_C;break;case qe.CODE_STOP:T=!0;break}break;case qe.CODE_CODE_B:if(Te<96)bt===vt?q+=String.fromCharCode(32+Te):q+=String.fromCharCode(32+Te+128),bt=!1;else switch(Te!==qe.CODE_STOP&&(Ue=!1),Te){case qe.CODE_FNC_1:o&&(q.length===0?q+="]C1":q+="");break;case qe.CODE_FNC_2:case qe.CODE_FNC_3:break;case qe.CODE_FNC_4_B:!vt&&bt?(vt=!0,bt=!1):vt&&bt?(vt=!1,bt=!1):bt=!0;break;case qe.CODE_SHIFT:L=!0,A=qe.CODE_CODE_A;break;case qe.CODE_CODE_A:A=qe.CODE_CODE_A;break;case qe.CODE_CODE_C:A=qe.CODE_CODE_C;break;case qe.CODE_STOP:T=!0;break}break;case qe.CODE_CODE_C:if(Te<100)Te<10&&(q+="0"),q+=Te;else switch(Te!==qe.CODE_STOP&&(Ue=!1),Te){case qe.CODE_FNC_1:o&&(q.length===0?q+="]C1":q+="");break;case qe.CODE_CODE_A:A=qe.CODE_CODE_A;break;case qe.CODE_CODE_B:A=qe.CODE_CODE_B;break;case qe.CODE_STOP:T=!0;break}break}Ts&&(A=A===qe.CODE_CODE_A?qe.CODE_CODE_B:qe.CODE_CODE_A)}const tr=ce-te;if(ce=s.getNextUnset(ce),!s.isRange(ce,Math.min(s.getSize(),ce+(ce-te)/2),!1))throw new U;if(He-=Ve*Ne,He%103!==Ne)throw new D;const Ar=q.length;if(Ar===0)throw new U;Ar>0&&Ue&&(A===qe.CODE_CODE_C?q=q.substring(0,Ar-2):q=q.substring(0,Ar-1));const or=(u[1]+u[0])/2,Jt=te+tr/2,Ya=v.length,cr=new Uint8Array(Ya);for(let Ts=0;Ts<Ya;Ts++)cr[Ts]=v[Ts];const $s=[new je(or,a),new je(Jt,a)];return new ve(q,cr,0,$s,ie.CODE_128,new Date().getTime())}}qe.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],qe.MAX_AVG_VARIANCE=.25,qe.MAX_INDIVIDUAL_VARIANCE=.7,qe.CODE_SHIFT=98,qe.CODE_CODE_C=99,qe.CODE_CODE_B=100,qe.CODE_CODE_A=101,qe.CODE_FNC_1=102,qe.CODE_FNC_2=97,qe.CODE_FNC_3=96,qe.CODE_FNC_4_A=101,qe.CODE_FNC_4_B=100,qe.CODE_START_A=103,qe.CODE_START_B=104,qe.CODE_START_C=105,qe.CODE_STOP=106;class $t extends $e{constructor(a=!1,s=!1){super(),this.usingCheckDigit=a,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(a,s,n){let o=this.counters;o.fill(0),this.decodeRowResult="";let u=$t.findAsteriskPattern(s,o),x=s.getNextSet(u[1]),p=s.getSize(),v,A;do{$t.recordPattern(s,x,o);let ue=$t.toNarrowWidePattern(o);if(ue<0)throw new U;v=$t.patternToChar(ue),this.decodeRowResult+=v,A=x;for(let Ne of o)x+=Ne;x=s.getNextSet(x)}while(v!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let T=0;for(let ue of o)T+=ue;let L=x-A-T;if(x!==p&&L*2<T)throw new U;if(this.usingCheckDigit){let ue=this.decodeRowResult.length-1,Ne=0;for(let Te=0;Te<ue;Te++)Ne+=$t.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Te));if(this.decodeRowResult.charAt(ue)!==$t.ALPHABET_STRING.charAt(Ne%43))throw new D;this.decodeRowResult=this.decodeRowResult.substring(0,ue)}if(this.decodeRowResult.length===0)throw new U;let q;this.extendedMode?q=$t.decodeExtended(this.decodeRowResult):q=this.decodeRowResult;let te=(u[1]+u[0])/2,ce=A+T/2;return new ve(q,null,0,[new je(te,a),new je(ce,a)],ie.CODE_39,new Date().getTime())}static findAsteriskPattern(a,s){let n=a.getSize(),o=a.getNextSet(0),u=0,x=o,p=!1,v=s.length;for(let A=o;A<n;A++)if(a.get(A)!==p)s[u]++;else{if(u===v-1){if(this.toNarrowWidePattern(s)===$t.ASTERISK_ENCODING&&a.isRange(Math.max(0,x-Math.floor((A-x)/2)),x,!1))return[x,A];x+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,p=!p}throw new U}static toNarrowWidePattern(a){let s=a.length,n=0,o;do{let u=2147483647;for(let v of a)v<u&&v>n&&(u=v);n=u,o=0;let x=0,p=0;for(let v=0;v<s;v++){let A=a[v];A>n&&(p|=1<<s-1-v,o++,x+=A)}if(o===3){for(let v=0;v<s&&o>0;v++){let A=a[v];if(A>n&&(o--,A*2>=x))return-1}return p}}while(o>3);return-1}static patternToChar(a){for(let s=0;s<$t.CHARACTER_ENCODINGS.length;s++)if($t.CHARACTER_ENCODINGS[s]===a)return $t.ALPHABET_STRING.charAt(s);if(a===$t.ASTERISK_ENCODING)return"*";throw new U}static decodeExtended(a){let s=a.length,n="";for(let o=0;o<s;o++){let u=a.charAt(o);if(u==="+"||u==="$"||u==="%"||u==="/"){let x=a.charAt(o+1),p="\0";switch(u){case"+":if(x>="A"&&x<="Z")p=String.fromCharCode(x.charCodeAt(0)+32);else throw new P;break;case"$":if(x>="A"&&x<="Z")p=String.fromCharCode(x.charCodeAt(0)-64);else throw new P;break;case"%":if(x>="A"&&x<="E")p=String.fromCharCode(x.charCodeAt(0)-38);else if(x>="F"&&x<="J")p=String.fromCharCode(x.charCodeAt(0)-11);else if(x>="K"&&x<="O")p=String.fromCharCode(x.charCodeAt(0)+16);else if(x>="P"&&x<="T")p=String.fromCharCode(x.charCodeAt(0)+43);else if(x==="U")p="\0";else if(x==="V")p="@";else if(x==="W")p="`";else if(x==="X"||x==="Y"||x==="Z")p="";else throw new P;break;case"/":if(x>="A"&&x<="O")p=String.fromCharCode(x.charCodeAt(0)-32);else if(x==="Z")p=":";else throw new P;break}n+=p,o++}else n+=u}return n}}$t.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",$t.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],$t.ASTERISK_ENCODING=148;class ut extends $e{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(a,s,n){let o=this.decodeStart(s),u=this.decodeEnd(s),x=new le;ut.decodeMiddle(s,o[1],u[0],x);let p=x.toString(),v=null;n!=null&&(v=n.get($.ALLOWED_LENGTHS)),v==null&&(v=ut.DEFAULT_ALLOWED_LENGTHS);let A=p.length,T=!1,L=0;for(let ce of v){if(A===ce){T=!0;break}ce>L&&(L=ce)}if(!T&&A>L&&(T=!0),!T)throw new P;const q=[new je(o[1],a),new je(u[0],a)];return new ve(p,null,0,q,ie.ITF,new Date().getTime())}static decodeMiddle(a,s,n,o){let u=new Int32Array(10),x=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),x.fill(0),p.fill(0);s<n;){$e.recordPattern(a,s,u);for(let A=0;A<5;A++){let T=2*A;x[A]=u[T],p[A]=u[T+1]}let v=ut.decodeDigit(x);o.append(v.toString()),v=this.decodeDigit(p),o.append(v.toString()),u.forEach(function(A){s+=A})}}decodeStart(a){let s=ut.skipWhiteSpace(a),n=ut.findGuardPattern(a,s,ut.START_PATTERN);return this.narrowLineWidth=(n[1]-n[0])/4,this.validateQuietZone(a,n[0]),n}validateQuietZone(a,s){let n=this.narrowLineWidth*10;n=n<s?n:s;for(let o=s-1;n>0&&o>=0&&!a.get(o);o--)n--;if(n!==0)throw new U}static skipWhiteSpace(a){const s=a.getSize(),n=a.getNextSet(0);if(n===s)throw new U;return n}decodeEnd(a){a.reverse();try{let s=ut.skipWhiteSpace(a),n;try{n=ut.findGuardPattern(a,s,ut.END_PATTERN_REVERSED[0])}catch(u){u instanceof U&&(n=ut.findGuardPattern(a,s,ut.END_PATTERN_REVERSED[1]))}this.validateQuietZone(a,n[0]);let o=n[0];return n[0]=a.getSize()-n[1],n[1]=a.getSize()-o,n}finally{a.reverse()}}static findGuardPattern(a,s,n){let o=n.length,u=new Int32Array(o),x=a.getSize(),p=!1,v=0,A=s;u.fill(0);for(let T=s;T<x;T++)if(a.get(T)!==p)u[v]++;else{if(v===o-1){if($e.patternMatchVariance(u,n,ut.MAX_INDIVIDUAL_VARIANCE)<ut.MAX_AVG_VARIANCE)return[A,T];A+=u[0]+u[1],_.arraycopy(u,2,u,0,v-1),u[v-1]=0,u[v]=0,v--}else v++;u[v]=1,p=!p}throw new U}static decodeDigit(a){let s=ut.MAX_AVG_VARIANCE,n=-1,o=ut.PATTERNS.length;for(let u=0;u<o;u++){let x=ut.PATTERNS[u],p=$e.patternMatchVariance(a,x,ut.MAX_INDIVIDUAL_VARIANCE);p<s?(s=p,n=u):p===s&&(n=-1)}if(n>=0)return n%10;throw new U}}ut.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],ut.MAX_AVG_VARIANCE=.38,ut.MAX_INDIVIDUAL_VARIANCE=.5,ut.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],ut.START_PATTERN=Int32Array.from([1,1,1,1]),ut.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Bt extends $e{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(a){let s=!1,n,o=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),n=Bt.findGuardPattern(a,o,!1,this.START_END_PATTERN,u);let x=n[0];o=n[1];let p=x-(o-x);p>=0&&(s=a.isRange(p,x,!1))}return n}static checkChecksum(a){return Bt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let s=a.length;if(s===0)return!1;let n=parseInt(a.charAt(s-1),10);return Bt.getStandardUPCEANChecksum(a.substring(0,s-1))===n}static getStandardUPCEANChecksum(a){let s=a.length,n=0;for(let o=s-1;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new P;n+=u}n*=3;for(let o=s-2;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new P;n+=u}return(1e3-n)%10}static decodeEnd(a,s){return Bt.findGuardPattern(a,s,!1,Bt.START_END_PATTERN,new Int32Array(Bt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(a,s,n,o){return this.findGuardPattern(a,s,n,o,new Int32Array(o.length))}static findGuardPattern(a,s,n,o,u){let x=a.getSize();s=n?a.getNextUnset(s):a.getNextSet(s);let p=0,v=s,A=o.length,T=n;for(let L=s;L<x;L++)if(a.get(L)!==T)u[p]++;else{if(p===A-1){if($e.patternMatchVariance(u,o,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return Int32Array.from([v,L]);v+=u[0]+u[1];let q=u.slice(2,u.length-1);for(let te=0;te<p-1;te++)u[te]=q[te];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,T=!T}throw new U}static decodeDigit(a,s,n,o){this.recordPattern(a,n,s);let u=this.MAX_AVG_VARIANCE,x=-1,p=o.length;for(let v=0;v<p;v++){let A=o[v],T=$e.patternMatchVariance(s,A,Bt.MAX_INDIVIDUAL_VARIANCE);T<u&&(u=T,x=v)}if(x>=0)return x;throw new U}}Bt.MAX_AVG_VARIANCE=.48,Bt.MAX_INDIVIDUAL_VARIANCE=.7,Bt.START_END_PATTERN=Int32Array.from([1,1,1]),Bt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Bt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Bt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ms{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,s,n){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(s,n,o),x=o.toString(),p=ms.parseExtensionString(x),v=[new je((n[0]+n[1])/2,a),new je(u,a)],A=new ve(x,null,0,v,ie.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(a,s,n){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1],p=0;for(let A=0;A<5&&x<u;A++){let T=Bt.decodeDigit(a,o,x,Bt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+T%10);for(let L of o)x+=L;T>=10&&(p|=1<<4-A),A!==4&&(x=a.getNextSet(x),x=a.getNextUnset(x))}if(n.length!==5)throw new U;let v=this.determineCheckDigit(p);if(ms.extensionChecksum(n.toString())!==v)throw new U;return x}static extensionChecksum(a){let s=a.length,n=0;for(let o=s-2;o>=0;o-=2)n+=a.charAt(o).charCodeAt(0)-48;n*=3;for(let o=s-1;o>=0;o-=2)n+=a.charAt(o).charCodeAt(0)-48;return n*=3,n%10}determineCheckDigit(a){for(let s=0;s<10;s++)if(a===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new U}static parseExtensionString(a){if(a.length!==5)return null;let s=ms.parseExtension5String(a);return s==null?null:new Map([[ye.SUGGESTED_PRICE,s]])}static parseExtension5String(a){let s;switch(a.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(a){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let n=parseInt(a.substring(1)),o=(n/100).toString(),u=n%100,x=u<10?"0"+u:u.toString();return s+o+"."+x}}class Ml{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(a,s,n){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(s,n,o),x=o.toString(),p=Ml.parseExtensionString(x),v=[new je((n[0]+n[1])/2,a),new je(u,a)],A=new ve(x,null,0,v,ie.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&A.putAllMetadata(p),A}decodeMiddle(a,s,n){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1],p=0;for(let v=0;v<2&&x<u;v++){let A=Bt.decodeDigit(a,o,x,Bt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+A%10);for(let T of o)x+=T;A>=10&&(p|=1<<1-v),v!==1&&(x=a.getNextSet(x),x=a.getNextUnset(x))}if(n.length!==2)throw new U;if(parseInt(n.toString())%4!==p)throw new U;return x}static parseExtensionString(a){return a.length!==2?null:new Map([[ye.ISSUE_NUMBER,parseInt(a)]])}}class ki{static decodeRow(a,s,n){let o=Bt.findGuardPattern(s,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ms().decodeRow(a,s,o)}catch{return new Ml().decodeRow(a,s,o)}}}ki.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Lt extends Bt{constructor(){super(),this.decodeRowStringBuffer="",Lt.L_AND_G_PATTERNS=Lt.L_PATTERNS.map(a=>Int32Array.from(a));for(let a=10;a<20;a++){let s=Lt.L_PATTERNS[a-10],n=new Int32Array(s.length);for(let o=0;o<s.length;o++)n[o]=s[s.length-o-1];Lt.L_AND_G_PATTERNS[a]=n}}decodeRow(a,s,n){let o=Lt.findStartGuardPattern(s),u=n==null?null:n.get($.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Ue=new je((o[0]+o[1])/2,a);u.foundPossibleResultPoint(Ue)}let x=this.decodeMiddle(s,o,this.decodeRowStringBuffer),p=x.rowOffset,v=x.resultString;if(u!=null){const Ue=new je(p,a);u.foundPossibleResultPoint(Ue)}let A=this.decodeEnd(s,p);if(u!=null){const Ue=new je((A[0]+A[1])/2,a);u.foundPossibleResultPoint(Ue)}let T=A[1],L=T+(T-A[0]);if(L>=s.getSize()||!s.isRange(T,L,!1))throw new U;let q=v.toString();if(q.length<8)throw new P;if(!Lt.checkChecksum(q))throw new D;let te=(o[1]+o[0])/2,ce=(A[1]+A[0])/2,ue=this.getBarcodeFormat(),Ne=[new je(te,a),new je(ce,a)],Te=new ve(q,null,0,Ne,ue,new Date().getTime()),He=0;try{let Ue=ki.decodeRow(a,s,A[1]);Te.putMetadata(ye.UPC_EAN_EXTENSION,Ue.getText()),Te.putAllMetadata(Ue.getResultMetadata()),Te.addResultPoints(Ue.getResultPoints()),He=Ue.getText().length}catch{}let Ve=n==null?null:n.get($.ALLOWED_EAN_EXTENSIONS);if(Ve!=null){let Ue=!1;for(let vt in Ve)if(He.toString()===vt){Ue=!0;break}if(!Ue)throw new U}return Te}decodeEnd(a,s){return Lt.findGuardPattern(a,s,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static checkChecksum(a){return Lt.checkStandardUPCEANChecksum(a)}static checkStandardUPCEANChecksum(a){let s=a.length;if(s===0)return!1;let n=parseInt(a.charAt(s-1),10);return Lt.getStandardUPCEANChecksum(a.substring(0,s-1))===n}static getStandardUPCEANChecksum(a){let s=a.length,n=0;for(let o=s-1;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new P;n+=u}n*=3;for(let o=s-2;o>=0;o-=2){let u=a.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new P;n+=u}return(1e3-n)%10}}class Dr extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,s,n){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1],p=0;for(let A=0;A<6&&x<u;A++){let T=Lt.decodeDigit(a,o,x,Lt.L_AND_G_PATTERNS);n+=String.fromCharCode(48+T%10);for(let L of o)x+=L;T>=10&&(p|=1<<5-A)}n=Dr.determineFirstDigit(n,p),x=Lt.findGuardPattern(a,x,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&x<u;A++){let T=Lt.decodeDigit(a,o,x,Lt.L_PATTERNS);n+=String.fromCharCode(48+T);for(let L of o)x+=L}return{rowOffset:x,resultString:n}}getBarcodeFormat(){return ie.EAN_13}static determineFirstDigit(a,s){for(let n=0;n<10;n++)if(s===this.FIRST_DIGIT_ENCODINGS[n])return a=String.fromCharCode(48+n)+a,a;throw new U}}Dr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class qo extends Lt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(a,s,n){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x=s[1];for(let v=0;v<4&&x<u;v++){let A=Lt.decodeDigit(a,o,x,Lt.L_PATTERNS);n+=String.fromCharCode(48+A);for(let T of o)x+=T}x=Lt.findGuardPattern(a,x,!0,Lt.MIDDLE_PATTERN,new Int32Array(Lt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<4&&x<u;v++){let A=Lt.decodeDigit(a,o,x,Lt.L_PATTERNS);n+=String.fromCharCode(48+A);for(let T of o)x+=T}return{rowOffset:x,resultString:n}}getBarcodeFormat(){return ie.EAN_8}}class Ai extends Lt{constructor(){super(...arguments),this.ean13Reader=new Dr}getBarcodeFormat(){return ie.UPC_A}decode(a,s){return this.maybeReturnResult(this.ean13Reader.decode(a))}decodeRow(a,s,n){return this.maybeReturnResult(this.ean13Reader.decodeRow(a,s,n))}decodeMiddle(a,s,n){return this.ean13Reader.decodeMiddle(a,s,n)}maybeReturnResult(a){let s=a.getText();if(s.charAt(0)==="0"){let n=new ve(s.substring(1),null,null,a.getResultPoints(),ie.UPC_A);return a.getResultMetadata()!=null&&n.putAllMetadata(a.getResultMetadata()),n}else throw new U}reset(){this.ean13Reader.reset()}}class jr extends Lt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(a,s,n){const o=this.decodeMiddleCounters.map(A=>A);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const u=a.getSize();let x=s[1],p=0;for(let A=0;A<6&&x<u;A++){const T=jr.decodeDigit(a,o,x,jr.L_AND_G_PATTERNS);n+=String.fromCharCode(48+T%10);for(let L of o)x+=L;T>=10&&(p|=1<<5-A)}let v=jr.determineNumSysAndCheckDigit(n,p);return{rowOffset:x,resultString:v}}decodeEnd(a,s){return jr.findGuardPatternWithoutCounters(a,s,!0,jr.MIDDLE_END_PATTERN)}checkChecksum(a){return Lt.checkChecksum(jr.convertUPCEtoUPCA(a))}static determineNumSysAndCheckDigit(a,s){for(let n=0;n<=1;n++)for(let o=0;o<10;o++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[n][o]){let u=String.fromCharCode(48+n),x=String.fromCharCode(48+o);return u+a+x}throw U.getNotFoundInstance()}getBarcodeFormat(){return ie.UPC_E}static convertUPCEtoUPCA(a){const s=a.slice(1,7).split("").map(u=>u.charCodeAt(0)),n=new le;n.append(a.charAt(0));let o=s[5];switch(o){case 0:case 1:case 2:n.appendChars(s,0,2),n.append(o),n.append("0000"),n.appendChars(s,2,3);break;case 3:n.appendChars(s,0,3),n.append("00000"),n.appendChars(s,3,2);break;case 4:n.appendChars(s,0,4),n.append("00000"),n.append(s[4]);break;default:n.appendChars(s,0,5),n.append("0000"),n.append(o);break}return a.length>=8&&n.append(a.charAt(7)),n.toString()}}jr.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),jr.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Jn extends $e{constructor(a){super();let s=a==null?null:a.get($.POSSIBLE_FORMATS),n=[];f(s)?(n.push(new Dr),n.push(new Ai),n.push(new qo),n.push(new jr)):(s.indexOf(ie.EAN_13)>-1&&n.push(new Dr),s.indexOf(ie.UPC_A)>-1&&n.push(new Ai),s.indexOf(ie.EAN_8)>-1&&n.push(new qo),s.indexOf(ie.UPC_E)>-1&&n.push(new jr)),this.readers=n}decodeRow(a,s,n){for(let o of this.readers)try{const u=o.decodeRow(a,s,n),x=u.getBarcodeFormat()===ie.EAN_13&&u.getText().charAt(0)==="0",p=n==null?null:n.get($.POSSIBLE_FORMATS),v=p==null||p.includes(ie.UPC_A);if(x&&v){const A=u.getRawBytes(),T=new ve(u.getText().substring(1),A,A?A.length:null,u.getResultPoints(),ie.UPC_A);return T.putAllMetadata(u.getResultMetadata()),T}return u}catch{}throw new U}reset(){for(let a of this.readers)a.reset()}}class La extends $e{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(a,s){for(let n=0;n<s.length;n++)if($e.patternMatchVariance(a,s[n],La.MAX_INDIVIDUAL_VARIANCE)<La.MAX_AVG_VARIANCE)return n;throw new U}static count(a){return Me.sum(new Int32Array(a))}static increment(a,s){let n=0,o=s[0];for(let u=1;u<a.length;u++)s[u]>o&&(o=s[u],n=u);a[n]++}static decrement(a,s){let n=0,o=s[0];for(let u=1;u<a.length;u++)s[u]<o&&(o=s[u],n=u);a[n]--}static isFinderPattern(a){let s=a[0]+a[1],n=s+a[2]+a[3],o=s/n;if(o>=La.MIN_FINDER_PATTERN_RATIO&&o<=La.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,x=Number.MIN_SAFE_INTEGER;for(let p of a)p>x&&(x=p),p<u&&(u=p);return x<10*u}return!1}}La.MAX_AVG_VARIANCE=.2,La.MAX_INDIVIDUAL_VARIANCE=.45,La.MIN_FINDER_PATTERN_RATIO=9.5/12,La.MAX_FINDER_PATTERN_RATIO=12.5/14;class Gs{constructor(a,s){this.value=a,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(a){if(!(a instanceof Gs))return!1;const s=a;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Dl{constructor(a,s,n,o,u){this.value=a,this.startEnd=s,this.value=a,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new je(n,u)),this.resultPoints.push(new je(o,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(a){if(!(a instanceof Dl))return!1;const s=a;return this.value===s.value}hashCode(){return this.value}}class Ua{constructor(){}static getRSSvalue(a,s,n){let o=0;for(let v of a)o+=v;let u=0,x=0,p=a.length;for(let v=0;v<p-1;v++){let A;for(A=1,x|=1<<v;A<a[v];A++,x&=~(1<<v)){let T=Ua.combins(o-A-1,p-v-2);if(n&&x===0&&o-A-(p-v-1)>=p-v-1&&(T-=Ua.combins(o-A-(p-v),p-v-2)),p-v-1>1){let L=0;for(let q=o-A-(p-v-2);q>s;q--)L+=Ua.combins(o-A-q-1,p-v-3);T-=L*(p-1-v)}else o-A>s&&T--;u+=T}o-=A}return u}static combins(a,s){let n,o;a-s>s?(o=s,n=a-s):(o=a-s,n=s);let u=1,x=1;for(let p=a;p>n;p--)u*=p,x<=o&&(u/=x,x++);for(;x<=o;)u/=x,x++;return u}}class Qa{static buildBitArray(a){let s=a.length*2-1;a[a.length-1].getRightChar()==null&&(s-=1);let n=12*s,o=new V(n),u=0,p=a[0].getRightChar().getValue();for(let v=11;v>=0;--v)(p&1<<v)!=0&&o.set(u),u++;for(let v=1;v<a.length;++v){let A=a[v],T=A.getLeftChar().getValue();for(let L=11;L>=0;--L)(T&1<<L)!=0&&o.set(u),u++;if(A.getRightChar()!=null){let L=A.getRightChar().getValue();for(let q=11;q>=0;--q)(L&1<<q)!=0&&o.set(u),u++}}return o}}class ja{constructor(a,s){s?this.decodedInformation=null:(this.finished=a,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ps{constructor(a){this.newPosition=a}getNewPosition(){return this.newPosition}}class $a extends ps{constructor(a,s){super(a),this.value=s}getValue(){return this.value}isFNC1(){return this.value===$a.FNC1}}$a.FNC1="$";class qs extends ps{constructor(a,s,n){super(a),n?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Cr extends ps{constructor(a,s,n){if(super(a),s<0||s>10||n<0||n>10)throw new P;this.firstDigit=s,this.secondDigit=n}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Cr.FNC1}isSecondDigitFNC1(){return this.secondDigit===Cr.FNC1}isAnyFNC1(){return this.firstDigit===Cr.FNC1||this.secondDigit===Cr.FNC1}}Cr.FNC1=10;class tt{constructor(){}static parseFieldsInGeneralPurpose(a){if(!a)return null;if(a.length<2)throw new U;let s=a.substring(0,2);for(let u of tt.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(2,u[2],a):tt.processFixedAI(2,u[1],a);if(a.length<3)throw new U;let n=a.substring(0,3);for(let u of tt.THREE_DIGIT_DATA_LENGTH)if(u[0]===n)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(3,u[2],a):tt.processFixedAI(3,u[1],a);for(let u of tt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===n)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(4,u[2],a):tt.processFixedAI(4,u[1],a);if(a.length<4)throw new U;let o=a.substring(0,4);for(let u of tt.FOUR_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===tt.VARIABLE_LENGTH?tt.processVariableAI(4,u[2],a):tt.processFixedAI(4,u[1],a);throw new U}static processFixedAI(a,s,n){if(n.length<a)throw new U;let o=n.substring(0,a);if(n.length<a+s)throw new U;let u=n.substring(a,a+s),x=n.substring(a+s),p="("+o+")"+u,v=tt.parseFieldsInGeneralPurpose(x);return v==null?p:p+v}static processVariableAI(a,s,n){let o=n.substring(0,a),u;n.length<a+s?u=n.length:u=a+s;let x=n.substring(a,u),p=n.substring(u),v="("+o+")"+x,A=tt.parseFieldsInGeneralPurpose(p);return A==null?v:v+A}}tt.VARIABLE_LENGTH=[],tt.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",tt.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",tt.VARIABLE_LENGTH,20],["22",tt.VARIABLE_LENGTH,29],["30",tt.VARIABLE_LENGTH,8],["37",tt.VARIABLE_LENGTH,8],["90",tt.VARIABLE_LENGTH,30],["91",tt.VARIABLE_LENGTH,30],["92",tt.VARIABLE_LENGTH,30],["93",tt.VARIABLE_LENGTH,30],["94",tt.VARIABLE_LENGTH,30],["95",tt.VARIABLE_LENGTH,30],["96",tt.VARIABLE_LENGTH,30],["97",tt.VARIABLE_LENGTH,3],["98",tt.VARIABLE_LENGTH,30],["99",tt.VARIABLE_LENGTH,30]],tt.THREE_DIGIT_DATA_LENGTH=[["240",tt.VARIABLE_LENGTH,30],["241",tt.VARIABLE_LENGTH,30],["242",tt.VARIABLE_LENGTH,6],["250",tt.VARIABLE_LENGTH,30],["251",tt.VARIABLE_LENGTH,30],["253",tt.VARIABLE_LENGTH,17],["254",tt.VARIABLE_LENGTH,20],["400",tt.VARIABLE_LENGTH,30],["401",tt.VARIABLE_LENGTH,30],["402",17],["403",tt.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",tt.VARIABLE_LENGTH,20],["421",tt.VARIABLE_LENGTH,15],["422",3],["423",tt.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],tt.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",tt.VARIABLE_LENGTH,15],["391",tt.VARIABLE_LENGTH,18],["392",tt.VARIABLE_LENGTH,15],["393",tt.VARIABLE_LENGTH,18],["703",tt.VARIABLE_LENGTH,30]],tt.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",tt.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",tt.VARIABLE_LENGTH,20],["8003",tt.VARIABLE_LENGTH,30],["8004",tt.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",tt.VARIABLE_LENGTH,30],["8008",tt.VARIABLE_LENGTH,12],["8018",18],["8020",tt.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",tt.VARIABLE_LENGTH,70],["8200",tt.VARIABLE_LENGTH,70]];class qr{constructor(a){this.buffer=new le,this.information=a}decodeAllCodes(a,s){let n=s,o=null;do{let u=this.decodeGeneralPurposeField(n,o),x=tt.parseFieldsInGeneralPurpose(u.getNewString());if(x!=null&&a.append(x),u.isRemaining()?o=""+u.getRemainingValue():o=null,n===u.getNewPosition())break;n=u.getNewPosition()}while(!0);return a.toString()}isStillNumeric(a){if(a+7>this.information.getSize())return a+4<=this.information.getSize();for(let s=a;s<a+3;++s)if(this.information.get(s))return!0;return this.information.get(a+3)}decodeNumeric(a){if(a+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(a,4);return u===0?new Cr(this.information.getSize(),Cr.FNC1,Cr.FNC1):new Cr(this.information.getSize(),u-1,Cr.FNC1)}let s=this.extractNumericValueFromBitArray(a,7),n=(s-8)/11,o=(s-8)%11;return new Cr(a+7,n,o)}extractNumericValueFromBitArray(a,s){return qr.extractNumericValueFromBitArray(this.information,a,s)}static extractNumericValueFromBitArray(a,s,n){let o=0;for(let u=0;u<n;++u)a.get(s+u)&&(o|=1<<n-u-1);return o}decodeGeneralPurposeField(a,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(a);let n=this.parseBlocks();return n!=null&&n.isRemaining()?new qs(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new qs(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let a,s;do{let n=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),a=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),a=s.isFinished()):(s=this.parseNumericBlock(),a=s.isFinished()),!(n!==this.current.getPosition())&&!a)break}while(!a);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let a=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFirstDigitFNC1()){let s;return a.isSecondDigitFNC1()?s=new qs(this.current.getPosition(),this.buffer.toString()):s=new qs(this.current.getPosition(),this.buffer.toString(),a.getSecondDigit()),new ja(!0,s)}if(this.buffer.append(a.getFirstDigit()),a.isSecondDigitFNC1()){let s=new qs(this.current.getPosition(),this.buffer.toString());return new ja(!0,s)}this.buffer.append(a.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new ja(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let a=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let s=new qs(this.current.getPosition(),this.buffer.toString());return new ja(!0,s)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new ja(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let a=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(a.getNewPosition()),a.isFNC1()){let s=new qs(this.current.getPosition(),this.buffer.toString());return new ja(!0,s)}this.buffer.append(a.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new ja(!1)}isStillIsoIec646(a){if(a+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(a,5);if(s>=5&&s<16)return!0;if(a+7>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(a,7);if(n>=64&&n<116)return!0;if(a+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(a,8);return o>=232&&o<253}decodeIsoIec646(a){let s=this.extractNumericValueFromBitArray(a,5);if(s===15)return new $a(a+5,$a.FNC1);if(s>=5&&s<15)return new $a(a+5,"0"+(s-5));let n=this.extractNumericValueFromBitArray(a,7);if(n>=64&&n<90)return new $a(a+7,""+(n+1));if(n>=90&&n<116)return new $a(a+7,""+(n+7));let o=this.extractNumericValueFromBitArray(a,8),u;switch(o){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new P}return new $a(a+8,u)}isStillAlpha(a){if(a+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(a,5);if(s>=5&&s<16)return!0;if(a+6>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(a,6);return n>=16&&n<63}decodeAlphanumeric(a){let s=this.extractNumericValueFromBitArray(a,5);if(s===15)return new $a(a+5,$a.FNC1);if(s>=5&&s<15)return new $a(a+5,"0"+(s-5));let n=this.extractNumericValueFromBitArray(a,6);if(n>=32&&n<58)return new $a(a+6,""+(n+33));let o;switch(n){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Ye("Decoding invalid alphanumeric value: "+n)}return new $a(a+6,o)}isAlphaTo646ToAlphaLatch(a){if(a+1>this.information.getSize())return!1;for(let s=0;s<5&&s+a<this.information.getSize();++s)if(s===2){if(!this.information.get(a+2))return!1}else if(this.information.get(a+s))return!1;return!0}isAlphaOr646ToNumericLatch(a){if(a+3>this.information.getSize())return!1;for(let s=a;s<a+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(a){if(a+1>this.information.getSize())return!1;for(let s=0;s<4&&s+a<this.information.getSize();++s)if(this.information.get(a+s))return!1;return!0}}class el{constructor(a){this.information=a,this.generalDecoder=new qr(a)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class _a extends el{constructor(a){super(a)}encodeCompressedGtin(a,s){a.append("(01)");let n=a.length();a.append("9"),this.encodeCompressedGtinWithoutAI(a,s,n)}encodeCompressedGtinWithoutAI(a,s,n){for(let o=0;o<4;++o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*o,10);u/100===0&&a.append("0"),u/10===0&&a.append("0"),a.append(u)}_a.appendCheckDigit(a,n)}static appendCheckDigit(a,s){let n=0;for(let o=0;o<13;o++){let u=a.charAt(o+s).charCodeAt(0)-48;n+=(o&1)===0?3*u:u}n=10-n%10,n===10&&(n=0),a.append(n)}}_a.GTIN_SIZE=40;class Rr extends _a{constructor(a){super(a)}parseInformation(){let a=new le;a.append("(01)");let s=a.length(),n=this.getGeneralDecoder().extractNumericValueFromBitArray(Rr.HEADER_SIZE,4);return a.append(n),this.encodeCompressedGtinWithoutAI(a,Rr.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(a,Rr.HEADER_SIZE+44)}}Rr.HEADER_SIZE=4;class ys extends el{constructor(a){super(a)}parseInformation(){let a=new le;return this.getGeneralDecoder().decodeAllCodes(a,ys.HEADER_SIZE)}}ys.HEADER_SIZE=5;class es extends _a{constructor(a){super(a)}encodeCompressedWeight(a,s,n){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,n);this.addWeightCode(a,o);let u=this.checkWeight(o),x=1e5;for(let p=0;p<5;++p)u/x===0&&a.append("0"),x/=10;a.append(u)}}class Wt extends es{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()!=Wt.HEADER_SIZE+es.GTIN_SIZE+Wt.WEIGHT_SIZE)throw new U;let a=new le;return this.encodeCompressedGtin(a,Wt.HEADER_SIZE),this.encodeCompressedWeight(a,Wt.HEADER_SIZE+es.GTIN_SIZE,Wt.WEIGHT_SIZE),a.toString()}}Wt.HEADER_SIZE=5,Wt.WEIGHT_SIZE=15;class Yo extends Wt{constructor(a){super(a)}addWeightCode(a,s){a.append("(3103)")}checkWeight(a){return a}}class Xo extends Wt{constructor(a){super(a)}addWeightCode(a,s){s<1e4?a.append("(3202)"):a.append("(3203)")}checkWeight(a){return a<1e4?a:a-1e4}}class Wa extends _a{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Wa.HEADER_SIZE+_a.GTIN_SIZE)throw new U;let a=new le;this.encodeCompressedGtin(a,Wa.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Wa.HEADER_SIZE+_a.GTIN_SIZE,Wa.LAST_DIGIT_SIZE);a.append("(392"),a.append(s),a.append(")");let n=this.getGeneralDecoder().decodeGeneralPurposeField(Wa.HEADER_SIZE+_a.GTIN_SIZE+Wa.LAST_DIGIT_SIZE,null);return a.append(n.getNewString()),a.toString()}}Wa.HEADER_SIZE=8,Wa.LAST_DIGIT_SIZE=2;class Ca extends _a{constructor(a){super(a)}parseInformation(){if(this.getInformation().getSize()<Ca.HEADER_SIZE+_a.GTIN_SIZE)throw new U;let a=new le;this.encodeCompressedGtin(a,Ca.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Ca.HEADER_SIZE+_a.GTIN_SIZE,Ca.LAST_DIGIT_SIZE);a.append("(393"),a.append(s),a.append(")");let n=this.getGeneralDecoder().extractNumericValueFromBitArray(Ca.HEADER_SIZE+_a.GTIN_SIZE+Ca.LAST_DIGIT_SIZE,Ca.FIRST_THREE_DIGITS_SIZE);n/100==0&&a.append("0"),n/10==0&&a.append("0"),a.append(n);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Ca.HEADER_SIZE+_a.GTIN_SIZE+Ca.LAST_DIGIT_SIZE+Ca.FIRST_THREE_DIGITS_SIZE,null);return a.append(o.getNewString()),a.toString()}}Ca.HEADER_SIZE=8,Ca.LAST_DIGIT_SIZE=2,Ca.FIRST_THREE_DIGITS_SIZE=10;class da extends es{constructor(a,s,n){super(a),this.dateCode=n,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=da.HEADER_SIZE+da.GTIN_SIZE+da.WEIGHT_SIZE+da.DATE_SIZE)throw new U;let a=new le;return this.encodeCompressedGtin(a,da.HEADER_SIZE),this.encodeCompressedWeight(a,da.HEADER_SIZE+da.GTIN_SIZE,da.WEIGHT_SIZE),this.encodeCompressedDate(a,da.HEADER_SIZE+da.GTIN_SIZE+da.WEIGHT_SIZE),a.toString()}encodeCompressedDate(a,s){let n=this.getGeneralDecoder().extractNumericValueFromBitArray(s,da.DATE_SIZE);if(n==38400)return;a.append("("),a.append(this.dateCode),a.append(")");let o=n%32;n/=32;let u=n%12+1;n/=12;let x=n;x/10==0&&a.append("0"),a.append(x),u/10==0&&a.append("0"),a.append(u),o/10==0&&a.append("0"),a.append(o)}addWeightCode(a,s){a.append("("),a.append(this.firstAIdigits),a.append(s/1e5),a.append(")")}checkWeight(a){return a%1e5}}da.HEADER_SIZE=8,da.WEIGHT_SIZE=20,da.DATE_SIZE=16;function Si(O){try{if(O.get(1))return new Rr(O);if(!O.get(2))return new ys(O);switch(qr.extractNumericValueFromBitArray(O,1,4)){case 4:return new Yo(O);case 5:return new Xo(O)}switch(qr.extractNumericValueFromBitArray(O,1,5)){case 12:return new Wa(O);case 13:return new Ca(O)}switch(qr.extractNumericValueFromBitArray(O,1,7)){case 56:return new da(O,"310","11");case 57:return new da(O,"320","11");case 58:return new da(O,"310","13");case 59:return new da(O,"320","13");case 60:return new da(O,"310","15");case 61:return new da(O,"320","15");case 62:return new da(O,"310","17");case 63:return new da(O,"320","17")}}catch(a){throw console.log(a),new Ye("unknown decoder: "+O)}}class ts{constructor(a,s,n,o){this.leftchar=a,this.rightchar=s,this.finderpattern=n,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(a,s){return a instanceof ts?ts.equalsOrNull(a.leftchar,s.leftchar)&&ts.equalsOrNull(a.rightchar,s.rightchar)&&ts.equalsOrNull(a.finderpattern,s.finderpattern):!1}static equalsOrNull(a,s){return a===null?s===null:ts.equals(a,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ei{constructor(a,s,n){this.pairs=a,this.rowNumber=s,this.wasReversed=n}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(a){return this.checkEqualitity(this,a)}toString(){return"{ "+this.pairs+" }"}equals(a,s){return a instanceof Ei?this.checkEqualitity(a,s)&&a.wasReversed===s.wasReversed:!1}checkEqualitity(a,s){if(!a||!s)return;let n;return a.forEach((o,u)=>{s.forEach(x=>{o.getLeftChar().getValue()===x.getLeftChar().getValue()&&o.getRightChar().getValue()===x.getRightChar().getValue()&&o.getFinderPatter().getValue()===x.getFinderPatter().getValue()&&(n=!0)})}),n}}class ze extends La{constructor(a){super(...arguments),this.pairs=new Array(ze.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=a===!0}decodeRow(a,s,n){this.pairs.length=0,this.startFromEven=!1;try{return ze.constructResult(this.decodeRow2pairs(a,s))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,ze.constructResult(this.decodeRow2pairs(a,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(a,s){let n=!1;for(;!n;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,a))}catch(u){if(u instanceof U){if(!this.pairs.length)throw new U;n=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(a,!1),o){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new U}checkRowsBoolean(a){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,a&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(n){this.verbose&&console.log(n)}return a&&(this.rows=this.rows.reverse()),s}checkRows(a,s){for(let n=s;n<this.rows.length;n++){let o=this.rows[n];this.pairs.length=0;for(let x of a)this.pairs.push(x.getPairs());if(this.pairs.push(o.getPairs()),!ze.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(a);u.push(o);try{return this.checkRows(u,n+1)}catch(x){this.verbose&&console.log(x)}}throw new U}static isValidSequence(a){for(let s of ze.FINDER_PATTERN_SEQUENCES){if(a.length>s.length)continue;let n=!0;for(let o=0;o<a.length;o++)if(a[o].getFinderPattern().getValue()!=s[o]){n=!1;break}if(n)return!0}return!1}storeRow(a,s){let n=0,o=!1,u=!1;for(;n<this.rows.length;){let x=this.rows[n];if(x.getRowNumber()>a){u=x.isEquivalent(this.pairs);break}o=x.isEquivalent(this.pairs),n++}u||o||ze.isPartialRow(this.pairs,this.rows)||(this.rows.push(n,new Ei(this.pairs,a,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(a,s){for(let n of s)if(n.getPairs().length!==a.length){for(let o of n.getPairs())for(let u of a)if(ts.equals(o,u))break}}static isPartialRow(a,s){for(let n of s){let o=!0;for(let u of a){let x=!1;for(let p of n.getPairs())if(u.equals(p)){x=!0;break}if(!x){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(a){let s=Qa.buildBitArray(a),o=Si(s).parseInformation(),u=a[0].getFinderPattern().getResultPoints(),x=a[a.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],x[0],x[1]];return new ve(o,null,null,p,ie.RSS_EXPANDED,null)}checkChecksum(){let a=this.pairs.get(0),s=a.getLeftChar(),n=a.getRightChar();if(n==null)return!1;let o=n.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let v=this.pairs.get(p);o+=v.getLeftChar().getChecksumPortion(),u++;let A=v.getRightChar();A!=null&&(o+=A.getChecksumPortion(),u++)}return o%=211,211*(u-4)+o==s.getValue()}static getNextSecondBar(a,s){let n;return a.get(s)?(n=a.getNextUnset(s),n=a.getNextSet(n)):(n=a.getNextSet(s),n=a.getNextUnset(n)),n}retrieveNextPair(a,s,n){let o=s.length%2==0;this.startFromEven&&(o=!o);let u,x=!0,p=-1;do this.findNextPair(a,s,p),u=this.parseFoundFinderPattern(a,n,o),u==null?p=ze.getNextSecondBar(a,this.startEnd[0]):x=!1;while(x);let v=this.decodeDataCharacter(a,u,o,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new U;let A;try{A=this.decodeDataCharacter(a,u,o,!1)}catch(T){A=null,this.verbose&&console.log(T)}return new ts(v,A,u,!0)}isEmptyPair(a){return a.length===0}findNextPair(a,s,n){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=a.getSize(),x;n>=0?x=n:this.isEmptyPair(s)?x=0:x=s[s.length-1].getFinderPattern().getStartEnd()[1];let p=s.length%2!=0;this.startFromEven&&(p=!p);let v=!1;for(;x<u&&(v=!a.get(x),!!v);)x++;let A=0,T=x;for(let L=x;L<u;L++)if(a.get(L)!=v)o[A]++;else{if(A==3){if(p&&ze.reverseCounters(o),ze.isFinderPattern(o)){this.startEnd[0]=T,this.startEnd[1]=L;return}p&&ze.reverseCounters(o),T+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,A--}else A++;o[A]=1,v=!v}throw new U}static reverseCounters(a){let s=a.length;for(let n=0;n<s/2;++n){let o=a[n];a[n]=a[s-n-1],a[s-n-1]=o}}parseFoundFinderPattern(a,s,n){let o,u,x;if(n){let A=this.startEnd[0]-1;for(;A>=0&&!a.get(A);)A--;A++,o=this.startEnd[0]-A,u=A,x=this.startEnd[1]}else u=this.startEnd[0],x=a.getNextUnset(this.startEnd[1]+1),o=x-this.startEnd[1];let p=this.getDecodeFinderCounters();_.arraycopy(p,0,p,1,p.length-1),p[0]=o;let v;try{v=this.parseFinderValue(p,ze.FINDER_PATTERNS)}catch{return null}return new Dl(v,[u,x],u,x,s)}decodeDataCharacter(a,s,n,o){let u=this.getDataCharacterCounters();for(let Jt=0;Jt<u.length;Jt++)u[Jt]=0;if(o)ze.recordPatternInReverse(a,s.getStartEnd()[0],u);else{ze.recordPattern(a,s.getStartEnd()[1],u);for(let Jt=0,Ya=u.length-1;Jt<Ya;Jt++,Ya--){let cr=u[Jt];u[Jt]=u[Ya],u[Ya]=cr}}let x=17,p=Me.sum(new Int32Array(u))/x,v=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(p-v)/v>.3)throw new U;let A=this.getOddCounts(),T=this.getEvenCounts(),L=this.getOddRoundingErrors(),q=this.getEvenRoundingErrors();for(let Jt=0;Jt<u.length;Jt++){let Ya=1*u[Jt]/p,cr=Ya+.5;if(cr<1){if(Ya<.3)throw new U;cr=1}else if(cr>8){if(Ya>8.7)throw new U;cr=8}let $s=Jt/2;(Jt&1)==0?(A[$s]=cr,L[$s]=Ya-cr):(T[$s]=cr,q[$s]=Ya-cr)}this.adjustOddEvenCounts(x);let te=4*s.getValue()+(n?0:2)+(o?0:1)-1,ce=0,ue=0;for(let Jt=A.length-1;Jt>=0;Jt--){if(ze.isNotA1left(s,n,o)){let Ya=ze.WEIGHTS[te][2*Jt];ue+=A[Jt]*Ya}ce+=A[Jt]}let Ne=0;for(let Jt=T.length-1;Jt>=0;Jt--)if(ze.isNotA1left(s,n,o)){let Ya=ze.WEIGHTS[te][2*Jt+1];Ne+=T[Jt]*Ya}let Te=ue+Ne;if((ce&1)!=0||ce>13||ce<4)throw new U;let He=(13-ce)/2,Ve=ze.SYMBOL_WIDEST[He],Ue=9-Ve,vt=Ua.getRSSvalue(A,Ve,!0),bt=Ua.getRSSvalue(T,Ue,!1),tr=ze.EVEN_TOTAL_SUBSET[He],Ar=ze.GSUM[He],or=vt*tr+bt+Ar;return new Gs(or,Te)}static isNotA1left(a,s,n){return!(a.getValue()==0&&s&&n)}adjustOddEvenCounts(a){let s=Me.sum(new Int32Array(this.getOddCounts())),n=Me.sum(new Int32Array(this.getEvenCounts())),o=!1,u=!1;s>13?u=!0:s<4&&(o=!0);let x=!1,p=!1;n>13?p=!0:n<4&&(x=!0);let v=s+n-a,A=(s&1)==1,T=(n&1)==0;if(v==1)if(A){if(T)throw new U;u=!0}else{if(!T)throw new U;p=!0}else if(v==-1)if(A){if(T)throw new U;o=!0}else{if(!T)throw new U;x=!0}else if(v==0){if(A){if(!T)throw new U;s<n?(o=!0,p=!0):(u=!0,x=!0)}else if(T)throw new U}else throw new U;if(o){if(u)throw new U;ze.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ze.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(p)throw new U;ze.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&ze.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ze.SYMBOL_WIDEST=[7,5,4,3,1],ze.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ze.GSUM=[0,348,1388,2948,3988],ze.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ze.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ze.FINDER_PAT_A=0,ze.FINDER_PAT_B=1,ze.FINDER_PAT_C=2,ze.FINDER_PAT_D=3,ze.FINDER_PAT_E=4,ze.FINDER_PAT_F=5,ze.FINDER_PATTERN_SEQUENCES=[[ze.FINDER_PAT_A,ze.FINDER_PAT_A],[ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B],[ze.FINDER_PAT_A,ze.FINDER_PAT_C,ze.FINDER_PAT_B,ze.FINDER_PAT_D],[ze.FINDER_PAT_A,ze.FINDER_PAT_E,ze.FINDER_PAT_B,ze.FINDER_PAT_D,ze.FINDER_PAT_C],[ze.FINDER_PAT_A,ze.FINDER_PAT_E,ze.FINDER_PAT_B,ze.FINDER_PAT_D,ze.FINDER_PAT_D,ze.FINDER_PAT_F],[ze.FINDER_PAT_A,ze.FINDER_PAT_E,ze.FINDER_PAT_B,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_F,ze.FINDER_PAT_F],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_D],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_E],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_F,ze.FINDER_PAT_F],[ze.FINDER_PAT_A,ze.FINDER_PAT_A,ze.FINDER_PAT_B,ze.FINDER_PAT_B,ze.FINDER_PAT_C,ze.FINDER_PAT_D,ze.FINDER_PAT_D,ze.FINDER_PAT_E,ze.FINDER_PAT_E,ze.FINDER_PAT_F,ze.FINDER_PAT_F]],ze.MAX_PAIRS=11;class Rl extends Gs{constructor(a,s,n){super(a,s),this.count=0,this.finderPattern=n}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ut extends La{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(a,s,n){const o=this.decodePair(s,!1,a,n);Ut.addOrTally(this.possibleLeftPairs,o),s.reverse();let u=this.decodePair(s,!0,a,n);Ut.addOrTally(this.possibleRightPairs,u),s.reverse();for(let x of this.possibleLeftPairs)if(x.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&Ut.checkChecksum(x,p))return Ut.constructResult(x,p)}throw new U}static addOrTally(a,s){if(s==null)return;let n=!1;for(let o of a)if(o.getValue()===s.getValue()){o.incrementCount(),n=!0;break}n||a.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(a,s){let n=4537077*a.getValue()+s.getValue(),o=new String(n).toString(),u=new le;for(let A=13-o.length;A>0;A--)u.append("0");u.append(o);let x=0;for(let A=0;A<13;A++){let T=u.charAt(A).charCodeAt(0)-48;x+=(A&1)===0?3*T:T}x=10-x%10,x===10&&(x=0),u.append(x.toString());let p=a.getFinderPattern().getResultPoints(),v=s.getFinderPattern().getResultPoints();return new ve(u.toString(),null,0,[p[0],p[1],v[0],v[1]],ie.RSS_14,new Date().getTime())}static checkChecksum(a,s){let n=(a.getChecksumPortion()+16*s.getChecksumPortion())%79,o=9*a.getFinderPattern().getValue()+s.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,n===o}decodePair(a,s,n,o){try{let u=this.findFinderPattern(a,s),x=this.parseFoundFinderPattern(a,n,s,u),p=o==null?null:o.get($.NEED_RESULT_POINT_CALLBACK);if(p!=null){let T=(u[0]+u[1])/2;s&&(T=a.getSize()-1-T),p.foundPossibleResultPoint(new je(T,n))}let v=this.decodeDataCharacter(a,x,!0),A=this.decodeDataCharacter(a,x,!1);return new Rl(1597*v.getValue()+A.getValue(),v.getChecksumPortion()+4*A.getChecksumPortion(),x)}catch{return null}}decodeDataCharacter(a,s,n){let o=this.getDataCharacterCounters();for(let Ne=0;Ne<o.length;Ne++)o[Ne]=0;if(n)$e.recordPatternInReverse(a,s.getStartEnd()[0],o);else{$e.recordPattern(a,s.getStartEnd()[1]+1,o);for(let Ne=0,Te=o.length-1;Ne<Te;Ne++,Te--){let He=o[Ne];o[Ne]=o[Te],o[Te]=He}}let u=n?16:15,x=Me.sum(new Int32Array(o))/u,p=this.getOddCounts(),v=this.getEvenCounts(),A=this.getOddRoundingErrors(),T=this.getEvenRoundingErrors();for(let Ne=0;Ne<o.length;Ne++){let Te=o[Ne]/x,He=Math.floor(Te+.5);He<1?He=1:He>8&&(He=8);let Ve=Math.floor(Ne/2);(Ne&1)===0?(p[Ve]=He,A[Ve]=Te-He):(v[Ve]=He,T[Ve]=Te-He)}this.adjustOddEvenCounts(n,u);let L=0,q=0;for(let Ne=p.length-1;Ne>=0;Ne--)q*=9,q+=p[Ne],L+=p[Ne];let te=0,ce=0;for(let Ne=v.length-1;Ne>=0;Ne--)te*=9,te+=v[Ne],ce+=v[Ne];let ue=q+3*te;if(n){if((L&1)!==0||L>12||L<4)throw new U;let Ne=(12-L)/2,Te=Ut.OUTSIDE_ODD_WIDEST[Ne],He=9-Te,Ve=Ua.getRSSvalue(p,Te,!1),Ue=Ua.getRSSvalue(v,He,!0),vt=Ut.OUTSIDE_EVEN_TOTAL_SUBSET[Ne],bt=Ut.OUTSIDE_GSUM[Ne];return new Gs(Ve*vt+Ue+bt,ue)}else{if((ce&1)!==0||ce>10||ce<4)throw new U;let Ne=(10-ce)/2,Te=Ut.INSIDE_ODD_WIDEST[Ne],He=9-Te,Ve=Ua.getRSSvalue(p,Te,!0),Ue=Ua.getRSSvalue(v,He,!1),vt=Ut.INSIDE_ODD_TOTAL_SUBSET[Ne],bt=Ut.INSIDE_GSUM[Ne];return new Gs(Ue*vt+Ve+bt,ue)}}findFinderPattern(a,s){let n=this.getDecodeFinderCounters();n[0]=0,n[1]=0,n[2]=0,n[3]=0;let o=a.getSize(),u=!1,x=0;for(;x<o&&(u=!a.get(x),s!==u);)x++;let p=0,v=x;for(let A=x;A<o;A++)if(a.get(A)!==u)n[p]++;else{if(p===3){if(La.isFinderPattern(n))return[v,A];v+=n[0]+n[1],n[0]=n[2],n[1]=n[3],n[2]=0,n[3]=0,p--}else p++;n[p]=1,u=!u}throw new U}parseFoundFinderPattern(a,s,n,o){let u=a.get(o[0]),x=o[0]-1;for(;x>=0&&u!==a.get(x);)x--;x++;const p=o[0]-x,v=this.getDecodeFinderCounters(),A=new Int32Array(v.length);_.arraycopy(v,0,A,1,v.length-1),A[0]=p;const T=this.parseFinderValue(A,Ut.FINDER_PATTERNS);let L=x,q=o[1];return n&&(L=a.getSize()-1-L,q=a.getSize()-1-q),new Dl(T,[x,o[1]],L,q,s)}adjustOddEvenCounts(a,s){let n=Me.sum(new Int32Array(this.getOddCounts())),o=Me.sum(new Int32Array(this.getEvenCounts())),u=!1,x=!1,p=!1,v=!1;a?(n>12?x=!0:n<4&&(u=!0),o>12?v=!0:o<4&&(p=!0)):(n>11?x=!0:n<5&&(u=!0),o>10?v=!0:o<4&&(p=!0));let A=n+o-s,T=(n&1)===(a?1:0),L=(o&1)===1;if(A===1)if(T){if(L)throw new U;x=!0}else{if(!L)throw new U;v=!0}else if(A===-1)if(T){if(L)throw new U;u=!0}else{if(!L)throw new U;p=!0}else if(A===0){if(T){if(!L)throw new U;n<o?(u=!0,v=!0):(x=!0,p=!0)}else if(L)throw new U}else throw new U;if(u){if(x)throw new U;La.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(x&&La.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(v)throw new U;La.increment(this.getEvenCounts(),this.getOddRoundingErrors())}v&&La.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ut.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ut.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ut.OUTSIDE_GSUM=[0,161,961,2015,2715],Ut.INSIDE_GSUM=[0,336,1036,1516],Ut.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ut.INSIDE_ODD_WIDEST=[2,4,6,8],Ut.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class bs extends $e{constructor(a,s){super(),this.readers=[],this.verbose=s===!0;const n=a?a.get($.POSSIBLE_FORMATS):null,o=a&&a.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;n?((n.includes(ie.EAN_13)||n.includes(ie.UPC_A)||n.includes(ie.EAN_8)||n.includes(ie.UPC_E))&&this.readers.push(new Jn(a)),n.includes(ie.CODE_39)&&this.readers.push(new $t(o)),n.includes(ie.CODE_128)&&this.readers.push(new qe),n.includes(ie.ITF)&&this.readers.push(new ut),n.includes(ie.RSS_14)&&this.readers.push(new Ut),n.includes(ie.RSS_EXPANDED)&&this.readers.push(new ze(this.verbose))):(this.readers.push(new Jn(a)),this.readers.push(new $t),this.readers.push(new Jn(a)),this.readers.push(new qe),this.readers.push(new ut),this.readers.push(new Ut),this.readers.push(new ze(this.verbose)))}decodeRow(a,s,n){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(a,s,n)}catch{}throw new U}reset(){this.readers.forEach(a=>a.reset())}}class Zo extends xe{constructor(a=500,s){super(new bs(s),a,s)}}class Dt{constructor(a,s,n){this.ecCodewords=a,this.ecBlocks=[s],n&&this.ecBlocks.push(n)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ft{constructor(a,s){this.count=a,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class St{constructor(a,s,n,o,u,x){this.versionNumber=a,this.symbolSizeRows=s,this.symbolSizeColumns=n,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=u,this.ecBlocks=x;let p=0;const v=x.getECCodewords(),A=x.getECBlocks();for(let T of A)p+=T.getCount()*(T.getDataCodewords()+v);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(a,s){if((a&1)!==0||(s&1)!==0)throw new P;for(let n of St.VERSIONS)if(n.symbolSizeRows===a&&n.symbolSizeColumns===s)return n;throw new P}toString(){return""+this.versionNumber}static buildVersions(){return[new St(1,10,10,8,8,new Dt(5,new Ft(1,3))),new St(2,12,12,10,10,new Dt(7,new Ft(1,5))),new St(3,14,14,12,12,new Dt(10,new Ft(1,8))),new St(4,16,16,14,14,new Dt(12,new Ft(1,12))),new St(5,18,18,16,16,new Dt(14,new Ft(1,18))),new St(6,20,20,18,18,new Dt(18,new Ft(1,22))),new St(7,22,22,20,20,new Dt(20,new Ft(1,30))),new St(8,24,24,22,22,new Dt(24,new Ft(1,36))),new St(9,26,26,24,24,new Dt(28,new Ft(1,44))),new St(10,32,32,14,14,new Dt(36,new Ft(1,62))),new St(11,36,36,16,16,new Dt(42,new Ft(1,86))),new St(12,40,40,18,18,new Dt(48,new Ft(1,114))),new St(13,44,44,20,20,new Dt(56,new Ft(1,144))),new St(14,48,48,22,22,new Dt(68,new Ft(1,174))),new St(15,52,52,24,24,new Dt(42,new Ft(2,102))),new St(16,64,64,14,14,new Dt(56,new Ft(2,140))),new St(17,72,72,16,16,new Dt(36,new Ft(4,92))),new St(18,80,80,18,18,new Dt(48,new Ft(4,114))),new St(19,88,88,20,20,new Dt(56,new Ft(4,144))),new St(20,96,96,22,22,new Dt(68,new Ft(4,174))),new St(21,104,104,24,24,new Dt(56,new Ft(6,136))),new St(22,120,120,18,18,new Dt(68,new Ft(6,175))),new St(23,132,132,20,20,new Dt(62,new Ft(8,163))),new St(24,144,144,22,22,new Dt(62,new Ft(8,156),new Ft(2,155))),new St(25,8,18,6,16,new Dt(7,new Ft(1,5))),new St(26,8,32,6,14,new Dt(11,new Ft(1,10))),new St(27,12,26,10,24,new Dt(14,new Ft(1,16))),new St(28,12,36,10,16,new Dt(18,new Ft(1,22))),new St(29,16,36,14,16,new Dt(24,new Ft(1,32))),new St(30,16,48,14,22,new Dt(28,new Ft(1,49)))]}}St.VERSIONS=St.buildVersions();class Ti{constructor(a){const s=a.getHeight();if(s<8||s>144||(s&1)!==0)throw new P;this.version=Ti.readVersion(a),this.mappingBitMatrix=this.extractDataRegion(a),this.readMappingMatrix=new W(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(a){const s=a.getHeight(),n=a.getWidth();return St.getVersionForDimensions(s,n)}readCodewords(){const a=new Int8Array(this.version.getTotalCodewords());let s=0,n=4,o=0;const u=this.mappingBitMatrix.getHeight(),x=this.mappingBitMatrix.getWidth();let p=!1,v=!1,A=!1,T=!1;do if(n===u&&o===0&&!p)a[s++]=this.readCorner1(u,x)&255,n-=2,o+=2,p=!0;else if(n===u-2&&o===0&&(x&3)!==0&&!v)a[s++]=this.readCorner2(u,x)&255,n-=2,o+=2,v=!0;else if(n===u+4&&o===2&&(x&7)===0&&!A)a[s++]=this.readCorner3(u,x)&255,n-=2,o+=2,A=!0;else if(n===u-2&&o===0&&(x&7)===4&&!T)a[s++]=this.readCorner4(u,x)&255,n-=2,o+=2,T=!0;else{do n<u&&o>=0&&!this.readMappingMatrix.get(o,n)&&(a[s++]=this.readUtah(n,o,u,x)&255),n-=2,o+=2;while(n>=0&&o<x);n+=1,o+=3;do n>=0&&o<x&&!this.readMappingMatrix.get(o,n)&&(a[s++]=this.readUtah(n,o,u,x)&255),n+=2,o-=2;while(n<u&&o>=0);n+=3,o+=1}while(n<u||o<x);if(s!==this.version.getTotalCodewords())throw new P;return a}readModule(a,s,n,o){return a<0&&(a+=n,s+=4-(n+4&7)),s<0&&(s+=o,a+=4-(o+4&7)),this.readMappingMatrix.set(s,a),this.mappingBitMatrix.get(s,a)}readUtah(a,s,n,o){let u=0;return this.readModule(a-2,s-2,n,o)&&(u|=1),u<<=1,this.readModule(a-2,s-1,n,o)&&(u|=1),u<<=1,this.readModule(a-1,s-2,n,o)&&(u|=1),u<<=1,this.readModule(a-1,s-1,n,o)&&(u|=1),u<<=1,this.readModule(a-1,s,n,o)&&(u|=1),u<<=1,this.readModule(a,s-2,n,o)&&(u|=1),u<<=1,this.readModule(a,s-1,n,o)&&(u|=1),u<<=1,this.readModule(a,s,n,o)&&(u|=1),u}readCorner1(a,s){let n=0;return this.readModule(a-1,0,a,s)&&(n|=1),n<<=1,this.readModule(a-1,1,a,s)&&(n|=1),n<<=1,this.readModule(a-1,2,a,s)&&(n|=1),n<<=1,this.readModule(0,s-2,a,s)&&(n|=1),n<<=1,this.readModule(0,s-1,a,s)&&(n|=1),n<<=1,this.readModule(1,s-1,a,s)&&(n|=1),n<<=1,this.readModule(2,s-1,a,s)&&(n|=1),n<<=1,this.readModule(3,s-1,a,s)&&(n|=1),n}readCorner2(a,s){let n=0;return this.readModule(a-3,0,a,s)&&(n|=1),n<<=1,this.readModule(a-2,0,a,s)&&(n|=1),n<<=1,this.readModule(a-1,0,a,s)&&(n|=1),n<<=1,this.readModule(0,s-4,a,s)&&(n|=1),n<<=1,this.readModule(0,s-3,a,s)&&(n|=1),n<<=1,this.readModule(0,s-2,a,s)&&(n|=1),n<<=1,this.readModule(0,s-1,a,s)&&(n|=1),n<<=1,this.readModule(1,s-1,a,s)&&(n|=1),n}readCorner3(a,s){let n=0;return this.readModule(a-1,0,a,s)&&(n|=1),n<<=1,this.readModule(a-1,s-1,a,s)&&(n|=1),n<<=1,this.readModule(0,s-3,a,s)&&(n|=1),n<<=1,this.readModule(0,s-2,a,s)&&(n|=1),n<<=1,this.readModule(0,s-1,a,s)&&(n|=1),n<<=1,this.readModule(1,s-3,a,s)&&(n|=1),n<<=1,this.readModule(1,s-2,a,s)&&(n|=1),n<<=1,this.readModule(1,s-1,a,s)&&(n|=1),n}readCorner4(a,s){let n=0;return this.readModule(a-3,0,a,s)&&(n|=1),n<<=1,this.readModule(a-2,0,a,s)&&(n|=1),n<<=1,this.readModule(a-1,0,a,s)&&(n|=1),n<<=1,this.readModule(0,s-2,a,s)&&(n|=1),n<<=1,this.readModule(0,s-1,a,s)&&(n|=1),n<<=1,this.readModule(1,s-1,a,s)&&(n|=1),n<<=1,this.readModule(2,s-1,a,s)&&(n|=1),n<<=1,this.readModule(3,s-1,a,s)&&(n|=1),n}extractDataRegion(a){const s=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(a.getHeight()!==s)throw new E("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),x=s/o|0,p=n/u|0,v=x*o,A=p*u,T=new W(A,v);for(let L=0;L<x;++L){const q=L*o;for(let te=0;te<p;++te){const ce=te*u;for(let ue=0;ue<o;++ue){const Ne=L*(o+2)+1+ue,Te=q+ue;for(let He=0;He<u;++He){const Ve=te*(u+2)+1+He;if(a.get(Ve,Ne)){const Ue=ce+He;T.set(Ue,Te)}}}}}return T}}class Il{constructor(a,s){this.numDataCodewords=a,this.codewords=s}static getDataBlocks(a,s){const n=s.getECBlocks();let o=0;const u=n.getECBlocks();for(let ue of u)o+=ue.getCount();const x=new Array(o);let p=0;for(let ue of u)for(let Ne=0;Ne<ue.getCount();Ne++){const Te=ue.getDataCodewords(),He=n.getECCodewords()+Te;x[p++]=new Il(Te,new Uint8Array(He))}const A=x[0].codewords.length-n.getECCodewords(),T=A-1;let L=0;for(let ue=0;ue<T;ue++)for(let Ne=0;Ne<p;Ne++)x[Ne].codewords[ue]=a[L++];const q=s.getVersionNumber()===24,te=q?8:p;for(let ue=0;ue<te;ue++)x[ue].codewords[A-1]=a[L++];const ce=x[0].codewords.length;for(let ue=A;ue<ce;ue++)for(let Ne=0;Ne<p;Ne++){const Te=q?(Ne+8)%p:Ne,He=q&&Te>7?ue-1:ue;x[Te].codewords[He]=a[L++]}if(L!==a.length)throw new E;return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class nr{constructor(a){this.bytes=a,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(a){if(a<1||a>32||a>this.available())throw new E(""+a);let s=0,n=this.bitOffset,o=this.byteOffset;const u=this.bytes;if(n>0){const x=8-n,p=a<x?a:x,v=x-p,A=255>>8-p<<v;s=(u[o]&A)>>v,a-=p,n+=p,n===8&&(n=0,o++)}if(a>0){for(;a>=8;)s=s<<8|u[o]&255,o++,a-=8;if(a>0){const x=8-a,p=255>>x<<x;s=s<<a|(u[o]&p)>>x,n+=a}}return this.bitOffset=n,this.byteOffset=o,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ka;(function(O){O[O.PAD_ENCODE=0]="PAD_ENCODE",O[O.ASCII_ENCODE=1]="ASCII_ENCODE",O[O.C40_ENCODE=2]="C40_ENCODE",O[O.TEXT_ENCODE=3]="TEXT_ENCODE",O[O.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",O[O.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",O[O.BASE256_ENCODE=6]="BASE256_ENCODE"})(ka||(ka={}));class ws{static decode(a){const s=new nr(a),n=new le,o=new le,u=new Array;let x=ka.ASCII_ENCODE;do if(x===ka.ASCII_ENCODE)x=this.decodeAsciiSegment(s,n,o);else{switch(x){case ka.C40_ENCODE:this.decodeC40Segment(s,n);break;case ka.TEXT_ENCODE:this.decodeTextSegment(s,n);break;case ka.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,n);break;case ka.EDIFACT_ENCODE:this.decodeEdifactSegment(s,n);break;case ka.BASE256_ENCODE:this.decodeBase256Segment(s,n,u);break;default:throw new P}x=ka.ASCII_ENCODE}while(x!==ka.PAD_ENCODE&&s.available()>0);return o.length()>0&&n.append(o.toString()),new dt(a,n.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(a,s,n){let o=!1;do{let u=a.readBits(8);if(u===0)throw new P;if(u<=128)return o&&(u+=128),s.append(String.fromCharCode(u-1)),ka.ASCII_ENCODE;if(u===129)return ka.PAD_ENCODE;if(u<=229){const x=u-130;x<10&&s.append("0"),s.append(""+x)}else switch(u){case 230:return ka.C40_ENCODE;case 231:return ka.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:s.append("[)>05"),n.insert(0,"");break;case 237:s.append("[)>06"),n.insert(0,"");break;case 238:return ka.ANSIX12_ENCODE;case 239:return ka.TEXT_ENCODE;case 240:return ka.EDIFACT_ENCODE;case 241:break;default:if(u!==254||a.available()!==0)throw new P;break}}while(a.available()>0);return ka.ASCII_ENCODE}static decodeC40Segment(a,s){let n=!1;const o=[];let u=0;do{if(a.available()===8)return;const x=a.readBits(8);if(x===254)return;this.parseTwoBytes(x,a.readBits(8),o);for(let p=0;p<3;p++){const v=o[p];switch(u){case 0:if(v<3)u=v+1;else if(v<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[v];n?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),n=!1):s.append(A)}else throw new P;break;case 1:n?(s.append(String.fromCharCode(v+128)),n=!1):s.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[v];n?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),n=!1):s.append(A)}else switch(v){case 27:s.append("");break;case 30:n=!0;break;default:throw new P}u=0;break;case 3:n?(s.append(String.fromCharCode(v+224)),n=!1):s.append(String.fromCharCode(v+96)),u=0;break;default:throw new P}}}while(a.available()>0)}static decodeTextSegment(a,s){let n=!1,o=[],u=0;do{if(a.available()===8)return;const x=a.readBits(8);if(x===254)return;this.parseTwoBytes(x,a.readBits(8),o);for(let p=0;p<3;p++){const v=o[p];switch(u){case 0:if(v<3)u=v+1;else if(v<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[v];n?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),n=!1):s.append(A)}else throw new P;break;case 1:n?(s.append(String.fromCharCode(v+128)),n=!1):s.append(String.fromCharCode(v)),u=0;break;case 2:if(v<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[v];n?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),n=!1):s.append(A)}else switch(v){case 27:s.append("");break;case 30:n=!0;break;default:throw new P}u=0;break;case 3:if(v<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[v];n?(s.append(String.fromCharCode(A.charCodeAt(0)+128)),n=!1):s.append(A),u=0}else throw new P;break;default:throw new P}}}while(a.available()>0)}static decodeAnsiX12Segment(a,s){const n=[];do{if(a.available()===8)return;const o=a.readBits(8);if(o===254)return;this.parseTwoBytes(o,a.readBits(8),n);for(let u=0;u<3;u++){const x=n[u];switch(x){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(x<14)s.append(String.fromCharCode(x+44));else if(x<40)s.append(String.fromCharCode(x+51));else throw new P;break}}}while(a.available()>0)}static parseTwoBytes(a,s,n){let o=(a<<8)+s-1,u=Math.floor(o/1600);n[0]=u,o-=u*1600,u=Math.floor(o/40),n[1]=u,n[2]=o-u*40}static decodeEdifactSegment(a,s){do{if(a.available()<=16)return;for(let n=0;n<4;n++){let o=a.readBits(6);if(o===31){const u=8-a.getBitOffset();u!==8&&a.readBits(u);return}(o&32)===0&&(o|=64),s.append(String.fromCharCode(o))}}while(a.available()>0)}static decodeBase256Segment(a,s,n){let o=1+a.getByteOffset();const u=this.unrandomize255State(a.readBits(8),o++);let x;if(u===0?x=a.available()/8|0:u<250?x=u:x=250*(u-249)+this.unrandomize255State(a.readBits(8),o++),x<0)throw new P;const p=new Uint8Array(x);for(let v=0;v<x;v++){if(a.available()<8)throw new P;p[v]=this.unrandomize255State(a.readBits(8),o++)}n.push(p);try{s.append(he.decode(p,re.ISO88591))}catch(v){throw new Ye("Platform does not support required encoding: "+v.message)}}static unrandomize255State(a,s){const n=149*s%255+1,o=a-n;return o>=0?o:o+256}}ws.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ws.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ws.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ws.TEXT_SHIFT2_SET_CHARS=ws.C40_SHIFT2_SET_CHARS,ws.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ol{constructor(){this.rsDecoder=new Ae(Je.DATA_MATRIX_FIELD_256)}decode(a){const s=new Ti(a),n=s.getVersion(),o=s.readCodewords(),u=Il.getDataBlocks(o,n);let x=0;for(let A of u)x+=A.getNumDataCodewords();const p=new Uint8Array(x),v=u.length;for(let A=0;A<v;A++){const T=u[A],L=T.getCodewords(),q=T.getNumDataCodewords();this.correctErrors(L,q);for(let te=0;te<q;te++)p[te*v+A]=L[te]}return ws.decode(p)}correctErrors(a,s){const n=new Int32Array(a);try{this.rsDecoder.decode(n,a.length-s)}catch{throw new D}for(let o=0;o<s;o++)a[o]=n[o]}}class ga{constructor(a){this.image=a,this.rectangleDetector=new Mt(this.image)}detect(){const a=this.rectangleDetector.detect();let s=this.detectSolid1(a);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new U;s=this.shiftToModuleCenter(s);const n=s[0],o=s[1],u=s[2],x=s[3];let p=this.transitionsBetween(n,x)+1,v=this.transitionsBetween(u,x)+1;(p&1)===1&&(p+=1),(v&1)===1&&(v+=1),4*p<7*v&&4*v<7*p&&(p=v=Math.max(p,v));let A=ga.sampleGrid(this.image,n,o,u,x,p,v);return new We(A,[n,o,u,x])}static shiftPoint(a,s,n){let o=(s.getX()-a.getX())/(n+1),u=(s.getY()-a.getY())/(n+1);return new je(a.getX()+o,a.getY()+u)}static moveAway(a,s,n){let o=a.getX(),u=a.getY();return o<s?o-=1:o+=1,u<n?u-=1:u+=1,new je(o,u)}detectSolid1(a){let s=a[0],n=a[1],o=a[3],u=a[2],x=this.transitionsBetween(s,n),p=this.transitionsBetween(n,o),v=this.transitionsBetween(o,u),A=this.transitionsBetween(u,s),T=x,L=[u,s,n,o];return T>p&&(T=p,L[0]=s,L[1]=n,L[2]=o,L[3]=u),T>v&&(T=v,L[0]=n,L[1]=o,L[2]=u,L[3]=s),T>A&&(L[0]=o,L[1]=u,L[2]=s,L[3]=n),L}detectSolid2(a){let s=a[0],n=a[1],o=a[2],u=a[3],x=this.transitionsBetween(s,u),p=ga.shiftPoint(n,o,(x+1)*4),v=ga.shiftPoint(o,n,(x+1)*4),A=this.transitionsBetween(p,s),T=this.transitionsBetween(v,u);return A<T?(a[0]=s,a[1]=n,a[2]=o,a[3]=u):(a[0]=n,a[1]=o,a[2]=u,a[3]=s),a}correctTopRight(a){let s=a[0],n=a[1],o=a[2],u=a[3],x=this.transitionsBetween(s,u),p=this.transitionsBetween(n,u),v=ga.shiftPoint(s,n,(p+1)*4),A=ga.shiftPoint(o,n,(x+1)*4);x=this.transitionsBetween(v,u),p=this.transitionsBetween(A,u);let T=new je(u.getX()+(o.getX()-n.getX())/(x+1),u.getY()+(o.getY()-n.getY())/(x+1)),L=new je(u.getX()+(s.getX()-n.getX())/(p+1),u.getY()+(s.getY()-n.getY())/(p+1));if(!this.isValid(T))return this.isValid(L)?L:null;if(!this.isValid(L))return T;let q=this.transitionsBetween(v,T)+this.transitionsBetween(A,T),te=this.transitionsBetween(v,L)+this.transitionsBetween(A,L);return q>te?T:L}shiftToModuleCenter(a){let s=a[0],n=a[1],o=a[2],u=a[3],x=this.transitionsBetween(s,u)+1,p=this.transitionsBetween(o,u)+1,v=ga.shiftPoint(s,n,p*4),A=ga.shiftPoint(o,n,x*4);x=this.transitionsBetween(v,u)+1,p=this.transitionsBetween(A,u)+1,(x&1)===1&&(x+=1),(p&1)===1&&(p+=1);let T=(s.getX()+n.getX()+o.getX()+u.getX())/4,L=(s.getY()+n.getY()+o.getY()+u.getY())/4;s=ga.moveAway(s,T,L),n=ga.moveAway(n,T,L),o=ga.moveAway(o,T,L),u=ga.moveAway(u,T,L);let q,te;return v=ga.shiftPoint(s,n,p*4),v=ga.shiftPoint(v,u,x*4),q=ga.shiftPoint(n,s,p*4),q=ga.shiftPoint(q,o,x*4),A=ga.shiftPoint(o,u,p*4),A=ga.shiftPoint(A,n,x*4),te=ga.shiftPoint(u,o,p*4),te=ga.shiftPoint(te,s,x*4),[v,q,A,te]}isValid(a){return a.getX()>=0&&a.getX()<this.image.getWidth()&&a.getY()>0&&a.getY()<this.image.getHeight()}static sampleGrid(a,s,n,o,u,x,p){return At.getInstance().sampleGrid(a,x,p,.5,.5,x-.5,.5,x-.5,p-.5,.5,p-.5,s.getX(),s.getY(),u.getX(),u.getY(),o.getX(),o.getY(),n.getX(),n.getY())}transitionsBetween(a,s){let n=Math.trunc(a.getX()),o=Math.trunc(a.getY()),u=Math.trunc(s.getX()),x=Math.trunc(s.getY()),p=Math.abs(x-o)>Math.abs(u-n);if(p){let ue=n;n=o,o=ue,ue=u,u=x,x=ue}let v=Math.abs(u-n),A=Math.abs(x-o),T=-v/2,L=o<x?1:-1,q=n<u?1:-1,te=0,ce=this.image.get(p?o:n,p?n:o);for(let ue=n,Ne=o;ue!==u;ue+=q){let Te=this.image.get(p?Ne:ue,p?ue:Ne);if(Te!==ce&&(te++,ce=Te),T+=A,T>0){if(Ne===x)break;Ne+=L,T-=v}}return te}}class Ir{constructor(){this.decoder=new Ol}decode(a,s=null){let n,o;if(s!=null&&s.has($.PURE_BARCODE)){const A=Ir.extractPureBits(a.getBlackMatrix());n=this.decoder.decode(A),o=Ir.NO_POINTS}else{const A=new ga(a.getBlackMatrix()).detect();n=this.decoder.decode(A.getBits()),o=A.getPoints()}const u=n.getRawBytes(),x=new ve(n.getText(),u,8*u.length,o,ie.DATA_MATRIX,_.currentTimeMillis()),p=n.getByteSegments();p!=null&&x.putMetadata(ye.BYTE_SEGMENTS,p);const v=n.getECLevel();return v!=null&&x.putMetadata(ye.ERROR_CORRECTION_LEVEL,v),x}reset(){}static extractPureBits(a){const s=a.getTopLeftOnBit(),n=a.getBottomRightOnBit();if(s==null||n==null)throw new U;const o=this.moduleSize(s,a);let u=s[1];const x=n[1];let p=s[0];const A=(n[0]-p+1)/o,T=(x-u+1)/o;if(A<=0||T<=0)throw new U;const L=o/2;u+=L,p+=L;const q=new W(A,T);for(let te=0;te<T;te++){const ce=u+te*o;for(let ue=0;ue<A;ue++)a.get(p+ue*o,ce)&&q.set(ue,te)}return q}static moduleSize(a,s){const n=s.getWidth();let o=a[0];const u=a[1];for(;o<n&&s.get(o,u);)o++;if(o===n)throw new U;const x=o-a[0];if(x===0)throw new U;return x}}Ir.NO_POINTS=[];class Id extends xe{constructor(a=500){super(new Ir,a)}}var Ha;(function(O){O[O.L=0]="L",O[O.M=1]="M",O[O.Q=2]="Q",O[O.H=3]="H"})(Ha||(Ha={}));class Xt{constructor(a,s,n){this.value=a,this.stringValue=s,this.bits=n,Xt.FOR_BITS.set(n,this),Xt.FOR_VALUE.set(a,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(a){switch(a){case"L":return Xt.L;case"M":return Xt.M;case"Q":return Xt.Q;case"H":return Xt.H;default:throw new S(a+"not available")}}toString(){return this.stringValue}equals(a){if(!(a instanceof Xt))return!1;const s=a;return this.value===s.value}static forBits(a){if(a<0||a>=Xt.FOR_BITS.size)throw new E;return Xt.FOR_BITS.get(a)}}Xt.FOR_BITS=new Map,Xt.FOR_VALUE=new Map,Xt.L=new Xt(Ha.L,"L",1),Xt.M=new Xt(Ha.M,"M",0),Xt.Q=new Xt(Ha.Q,"Q",3),Xt.H=new Xt(Ha.H,"H",2);class Va{constructor(a){this.errorCorrectionLevel=Xt.forBits(a>>3&3),this.dataMask=a&7}static numBitsDiffering(a,s){return F.bitCount(a^s)}static decodeFormatInformation(a,s){const n=Va.doDecodeFormatInformation(a,s);return n!==null?n:Va.doDecodeFormatInformation(a^Va.FORMAT_INFO_MASK_QR,s^Va.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(a,s){let n=Number.MAX_SAFE_INTEGER,o=0;for(const u of Va.FORMAT_INFO_DECODE_LOOKUP){const x=u[0];if(x===a||x===s)return new Va(u[1]);let p=Va.numBitsDiffering(a,x);p<n&&(o=u[1],n=p),a!==s&&(p=Va.numBitsDiffering(s,x),p<n&&(o=u[1],n=p))}return n<=3?new Va(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(a){if(!(a instanceof Va))return!1;const s=a;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Va.FORMAT_INFO_MASK_QR=21522,Va.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ce{constructor(a,...s){this.ecCodewordsPerBlock=a,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let a=0;const s=this.ecBlocks;for(const n of s)a+=n.getCount();return a}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class J{constructor(a,s){this.count=a,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class it{constructor(a,s,...n){this.versionNumber=a,this.alignmentPatternCenters=s,this.ecBlocks=n;let o=0;const u=n[0].getECCodewordsPerBlock(),x=n[0].getECBlocks();for(const p of x)o+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(a){return this.ecBlocks[a.getValue()]}static getProvisionalVersionForDimension(a){if(a%4!==1)throw new P;try{return this.getVersionForNumber((a-17)/4)}catch{throw new P}}static getVersionForNumber(a){if(a<1||a>40)throw new E;return it.VERSIONS[a-1]}static decodeVersionInformation(a){let s=Number.MAX_SAFE_INTEGER,n=0;for(let o=0;o<it.VERSION_DECODE_INFO.length;o++){const u=it.VERSION_DECODE_INFO[o];if(u===a)return it.getVersionForNumber(o+7);const x=Va.numBitsDiffering(a,u);x<s&&(n=o+7,s=x)}return s<=3?it.getVersionForNumber(n):null}buildFunctionPattern(){const a=this.getDimensionForVersion(),s=new W(a);s.setRegion(0,0,9,9),s.setRegion(a-8,0,8,9),s.setRegion(0,a-8,9,8);const n=this.alignmentPatternCenters.length;for(let o=0;o<n;o++){const u=this.alignmentPatternCenters[o]-2;for(let x=0;x<n;x++)o===0&&(x===0||x===n-1)||o===n-1&&x===0||s.setRegion(this.alignmentPatternCenters[x]-2,u,5,5)}return s.setRegion(6,9,1,a-17),s.setRegion(9,6,a-17,1),this.versionNumber>6&&(s.setRegion(a-11,0,3,6),s.setRegion(0,a-11,6,3)),s}toString(){return""+this.versionNumber}}it.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),it.VERSIONS=[new it(1,new Int32Array(0),new Ce(7,new J(1,19)),new Ce(10,new J(1,16)),new Ce(13,new J(1,13)),new Ce(17,new J(1,9))),new it(2,Int32Array.from([6,18]),new Ce(10,new J(1,34)),new Ce(16,new J(1,28)),new Ce(22,new J(1,22)),new Ce(28,new J(1,16))),new it(3,Int32Array.from([6,22]),new Ce(15,new J(1,55)),new Ce(26,new J(1,44)),new Ce(18,new J(2,17)),new Ce(22,new J(2,13))),new it(4,Int32Array.from([6,26]),new Ce(20,new J(1,80)),new Ce(18,new J(2,32)),new Ce(26,new J(2,24)),new Ce(16,new J(4,9))),new it(5,Int32Array.from([6,30]),new Ce(26,new J(1,108)),new Ce(24,new J(2,43)),new Ce(18,new J(2,15),new J(2,16)),new Ce(22,new J(2,11),new J(2,12))),new it(6,Int32Array.from([6,34]),new Ce(18,new J(2,68)),new Ce(16,new J(4,27)),new Ce(24,new J(4,19)),new Ce(28,new J(4,15))),new it(7,Int32Array.from([6,22,38]),new Ce(20,new J(2,78)),new Ce(18,new J(4,31)),new Ce(18,new J(2,14),new J(4,15)),new Ce(26,new J(4,13),new J(1,14))),new it(8,Int32Array.from([6,24,42]),new Ce(24,new J(2,97)),new Ce(22,new J(2,38),new J(2,39)),new Ce(22,new J(4,18),new J(2,19)),new Ce(26,new J(4,14),new J(2,15))),new it(9,Int32Array.from([6,26,46]),new Ce(30,new J(2,116)),new Ce(22,new J(3,36),new J(2,37)),new Ce(20,new J(4,16),new J(4,17)),new Ce(24,new J(4,12),new J(4,13))),new it(10,Int32Array.from([6,28,50]),new Ce(18,new J(2,68),new J(2,69)),new Ce(26,new J(4,43),new J(1,44)),new Ce(24,new J(6,19),new J(2,20)),new Ce(28,new J(6,15),new J(2,16))),new it(11,Int32Array.from([6,30,54]),new Ce(20,new J(4,81)),new Ce(30,new J(1,50),new J(4,51)),new Ce(28,new J(4,22),new J(4,23)),new Ce(24,new J(3,12),new J(8,13))),new it(12,Int32Array.from([6,32,58]),new Ce(24,new J(2,92),new J(2,93)),new Ce(22,new J(6,36),new J(2,37)),new Ce(26,new J(4,20),new J(6,21)),new Ce(28,new J(7,14),new J(4,15))),new it(13,Int32Array.from([6,34,62]),new Ce(26,new J(4,107)),new Ce(22,new J(8,37),new J(1,38)),new Ce(24,new J(8,20),new J(4,21)),new Ce(22,new J(12,11),new J(4,12))),new it(14,Int32Array.from([6,26,46,66]),new Ce(30,new J(3,115),new J(1,116)),new Ce(24,new J(4,40),new J(5,41)),new Ce(20,new J(11,16),new J(5,17)),new Ce(24,new J(11,12),new J(5,13))),new it(15,Int32Array.from([6,26,48,70]),new Ce(22,new J(5,87),new J(1,88)),new Ce(24,new J(5,41),new J(5,42)),new Ce(30,new J(5,24),new J(7,25)),new Ce(24,new J(11,12),new J(7,13))),new it(16,Int32Array.from([6,26,50,74]),new Ce(24,new J(5,98),new J(1,99)),new Ce(28,new J(7,45),new J(3,46)),new Ce(24,new J(15,19),new J(2,20)),new Ce(30,new J(3,15),new J(13,16))),new it(17,Int32Array.from([6,30,54,78]),new Ce(28,new J(1,107),new J(5,108)),new Ce(28,new J(10,46),new J(1,47)),new Ce(28,new J(1,22),new J(15,23)),new Ce(28,new J(2,14),new J(17,15))),new it(18,Int32Array.from([6,30,56,82]),new Ce(30,new J(5,120),new J(1,121)),new Ce(26,new J(9,43),new J(4,44)),new Ce(28,new J(17,22),new J(1,23)),new Ce(28,new J(2,14),new J(19,15))),new it(19,Int32Array.from([6,30,58,86]),new Ce(28,new J(3,113),new J(4,114)),new Ce(26,new J(3,44),new J(11,45)),new Ce(26,new J(17,21),new J(4,22)),new Ce(26,new J(9,13),new J(16,14))),new it(20,Int32Array.from([6,34,62,90]),new Ce(28,new J(3,107),new J(5,108)),new Ce(26,new J(3,41),new J(13,42)),new Ce(30,new J(15,24),new J(5,25)),new Ce(28,new J(15,15),new J(10,16))),new it(21,Int32Array.from([6,28,50,72,94]),new Ce(28,new J(4,116),new J(4,117)),new Ce(26,new J(17,42)),new Ce(28,new J(17,22),new J(6,23)),new Ce(30,new J(19,16),new J(6,17))),new it(22,Int32Array.from([6,26,50,74,98]),new Ce(28,new J(2,111),new J(7,112)),new Ce(28,new J(17,46)),new Ce(30,new J(7,24),new J(16,25)),new Ce(24,new J(34,13))),new it(23,Int32Array.from([6,30,54,78,102]),new Ce(30,new J(4,121),new J(5,122)),new Ce(28,new J(4,47),new J(14,48)),new Ce(30,new J(11,24),new J(14,25)),new Ce(30,new J(16,15),new J(14,16))),new it(24,Int32Array.from([6,28,54,80,106]),new Ce(30,new J(6,117),new J(4,118)),new Ce(28,new J(6,45),new J(14,46)),new Ce(30,new J(11,24),new J(16,25)),new Ce(30,new J(30,16),new J(2,17))),new it(25,Int32Array.from([6,32,58,84,110]),new Ce(26,new J(8,106),new J(4,107)),new Ce(28,new J(8,47),new J(13,48)),new Ce(30,new J(7,24),new J(22,25)),new Ce(30,new J(22,15),new J(13,16))),new it(26,Int32Array.from([6,30,58,86,114]),new Ce(28,new J(10,114),new J(2,115)),new Ce(28,new J(19,46),new J(4,47)),new Ce(28,new J(28,22),new J(6,23)),new Ce(30,new J(33,16),new J(4,17))),new it(27,Int32Array.from([6,34,62,90,118]),new Ce(30,new J(8,122),new J(4,123)),new Ce(28,new J(22,45),new J(3,46)),new Ce(30,new J(8,23),new J(26,24)),new Ce(30,new J(12,15),new J(28,16))),new it(28,Int32Array.from([6,26,50,74,98,122]),new Ce(30,new J(3,117),new J(10,118)),new Ce(28,new J(3,45),new J(23,46)),new Ce(30,new J(4,24),new J(31,25)),new Ce(30,new J(11,15),new J(31,16))),new it(29,Int32Array.from([6,30,54,78,102,126]),new Ce(30,new J(7,116),new J(7,117)),new Ce(28,new J(21,45),new J(7,46)),new Ce(30,new J(1,23),new J(37,24)),new Ce(30,new J(19,15),new J(26,16))),new it(30,Int32Array.from([6,26,52,78,104,130]),new Ce(30,new J(5,115),new J(10,116)),new Ce(28,new J(19,47),new J(10,48)),new Ce(30,new J(15,24),new J(25,25)),new Ce(30,new J(23,15),new J(25,16))),new it(31,Int32Array.from([6,30,56,82,108,134]),new Ce(30,new J(13,115),new J(3,116)),new Ce(28,new J(2,46),new J(29,47)),new Ce(30,new J(42,24),new J(1,25)),new Ce(30,new J(23,15),new J(28,16))),new it(32,Int32Array.from([6,34,60,86,112,138]),new Ce(30,new J(17,115)),new Ce(28,new J(10,46),new J(23,47)),new Ce(30,new J(10,24),new J(35,25)),new Ce(30,new J(19,15),new J(35,16))),new it(33,Int32Array.from([6,30,58,86,114,142]),new Ce(30,new J(17,115),new J(1,116)),new Ce(28,new J(14,46),new J(21,47)),new Ce(30,new J(29,24),new J(19,25)),new Ce(30,new J(11,15),new J(46,16))),new it(34,Int32Array.from([6,34,62,90,118,146]),new Ce(30,new J(13,115),new J(6,116)),new Ce(28,new J(14,46),new J(23,47)),new Ce(30,new J(44,24),new J(7,25)),new Ce(30,new J(59,16),new J(1,17))),new it(35,Int32Array.from([6,30,54,78,102,126,150]),new Ce(30,new J(12,121),new J(7,122)),new Ce(28,new J(12,47),new J(26,48)),new Ce(30,new J(39,24),new J(14,25)),new Ce(30,new J(22,15),new J(41,16))),new it(36,Int32Array.from([6,24,50,76,102,128,154]),new Ce(30,new J(6,121),new J(14,122)),new Ce(28,new J(6,47),new J(34,48)),new Ce(30,new J(46,24),new J(10,25)),new Ce(30,new J(2,15),new J(64,16))),new it(37,Int32Array.from([6,28,54,80,106,132,158]),new Ce(30,new J(17,122),new J(4,123)),new Ce(28,new J(29,46),new J(14,47)),new Ce(30,new J(49,24),new J(10,25)),new Ce(30,new J(24,15),new J(46,16))),new it(38,Int32Array.from([6,32,58,84,110,136,162]),new Ce(30,new J(4,122),new J(18,123)),new Ce(28,new J(13,46),new J(32,47)),new Ce(30,new J(48,24),new J(14,25)),new Ce(30,new J(42,15),new J(32,16))),new it(39,Int32Array.from([6,26,54,82,110,138,166]),new Ce(30,new J(20,117),new J(4,118)),new Ce(28,new J(40,47),new J(7,48)),new Ce(30,new J(43,24),new J(22,25)),new Ce(30,new J(10,15),new J(67,16))),new it(40,Int32Array.from([6,30,58,86,114,142,170]),new Ce(30,new J(19,118),new J(6,119)),new Ce(28,new J(18,47),new J(31,48)),new Ce(30,new J(34,24),new J(34,25)),new Ce(30,new J(20,15),new J(61,16)))];var Ma;(function(O){O[O.DATA_MASK_000=0]="DATA_MASK_000",O[O.DATA_MASK_001=1]="DATA_MASK_001",O[O.DATA_MASK_010=2]="DATA_MASK_010",O[O.DATA_MASK_011=3]="DATA_MASK_011",O[O.DATA_MASK_100=4]="DATA_MASK_100",O[O.DATA_MASK_101=5]="DATA_MASK_101",O[O.DATA_MASK_110=6]="DATA_MASK_110",O[O.DATA_MASK_111=7]="DATA_MASK_111"})(Ma||(Ma={}));class Ga{constructor(a,s){this.value=a,this.isMasked=s}unmaskBitMatrix(a,s){for(let n=0;n<s;n++)for(let o=0;o<s;o++)this.isMasked(n,o)&&a.flip(o,n)}}Ga.values=new Map([[Ma.DATA_MASK_000,new Ga(Ma.DATA_MASK_000,(O,a)=>(O+a&1)===0)],[Ma.DATA_MASK_001,new Ga(Ma.DATA_MASK_001,(O,a)=>(O&1)===0)],[Ma.DATA_MASK_010,new Ga(Ma.DATA_MASK_010,(O,a)=>a%3===0)],[Ma.DATA_MASK_011,new Ga(Ma.DATA_MASK_011,(O,a)=>(O+a)%3===0)],[Ma.DATA_MASK_100,new Ga(Ma.DATA_MASK_100,(O,a)=>(Math.floor(O/2)+Math.floor(a/3)&1)===0)],[Ma.DATA_MASK_101,new Ga(Ma.DATA_MASK_101,(O,a)=>O*a%6===0)],[Ma.DATA_MASK_110,new Ga(Ma.DATA_MASK_110,(O,a)=>O*a%6<3)],[Ma.DATA_MASK_111,new Ga(Ma.DATA_MASK_111,(O,a)=>(O+a+O*a%3&1)===0)]]);class Od{constructor(a){const s=a.getHeight();if(s<21||(s&3)!==1)throw new P;this.bitMatrix=a}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let a=0;for(let u=0;u<6;u++)a=this.copyBit(u,8,a);a=this.copyBit(7,8,a),a=this.copyBit(8,8,a),a=this.copyBit(8,7,a);for(let u=5;u>=0;u--)a=this.copyBit(8,u,a);const s=this.bitMatrix.getHeight();let n=0;const o=s-7;for(let u=s-1;u>=o;u--)n=this.copyBit(8,u,n);for(let u=s-8;u<s;u++)n=this.copyBit(u,8,n);if(this.parsedFormatInfo=Va.decodeFormatInformation(a,n),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new P}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const a=this.bitMatrix.getHeight(),s=Math.floor((a-17)/4);if(s<=6)return it.getVersionForNumber(s);let n=0;const o=a-11;for(let x=5;x>=0;x--)for(let p=a-9;p>=o;p--)n=this.copyBit(p,x,n);let u=it.decodeVersionInformation(n);if(u!==null&&u.getDimensionForVersion()===a)return this.parsedVersion=u,u;n=0;for(let x=5;x>=0;x--)for(let p=a-9;p>=o;p--)n=this.copyBit(x,p,n);if(u=it.decodeVersionInformation(n),u!==null&&u.getDimensionForVersion()===a)return this.parsedVersion=u,u;throw new P}copyBit(a,s,n){return(this.isMirror?this.bitMatrix.get(s,a):this.bitMatrix.get(a,s))?n<<1|1:n<<1}readCodewords(){const a=this.readFormatInformation(),s=this.readVersion(),n=Ga.values.get(a.getDataMask()),o=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,o);const u=s.buildFunctionPattern();let x=!0;const p=new Uint8Array(s.getTotalCodewords());let v=0,A=0,T=0;for(let L=o-1;L>0;L-=2){L===6&&L--;for(let q=0;q<o;q++){const te=x?o-1-q:q;for(let ce=0;ce<2;ce++)u.get(L-ce,te)||(T++,A<<=1,this.bitMatrix.get(L-ce,te)&&(A|=1),T===8&&(p[v++]=A,T=0,A=0))}x=!x}if(v!==s.getTotalCodewords())throw new P;return p}remask(){if(this.parsedFormatInfo===null)return;const a=Ga.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,s)}setMirror(a){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=a}mirror(){const a=this.bitMatrix;for(let s=0,n=a.getWidth();s<n;s++)for(let o=s+1,u=a.getHeight();o<u;o++)a.get(s,o)!==a.get(o,s)&&(a.flip(o,s),a.flip(s,o))}}class Bl{constructor(a,s){this.numDataCodewords=a,this.codewords=s}static getDataBlocks(a,s,n){if(a.length!==s.getTotalCodewords())throw new E;const o=s.getECBlocksForLevel(n);let u=0;const x=o.getECBlocks();for(const ce of x)u+=ce.getCount();const p=new Array(u);let v=0;for(const ce of x)for(let ue=0;ue<ce.getCount();ue++){const Ne=ce.getDataCodewords(),Te=o.getECCodewordsPerBlock()+Ne;p[v++]=new Bl(Ne,new Uint8Array(Te))}const A=p[0].codewords.length;let T=p.length-1;for(;T>=0&&p[T].codewords.length!==A;)T--;T++;const L=A-o.getECCodewordsPerBlock();let q=0;for(let ce=0;ce<L;ce++)for(let ue=0;ue<v;ue++)p[ue].codewords[ce]=a[q++];for(let ce=T;ce<v;ce++)p[ce].codewords[L]=a[q++];const te=p[0].codewords.length;for(let ce=L;ce<te;ce++)for(let ue=0;ue<v;ue++){const Ne=ue<T?ce:ce+1;p[ue].codewords[Ne]=a[q++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hr;(function(O){O[O.TERMINATOR=0]="TERMINATOR",O[O.NUMERIC=1]="NUMERIC",O[O.ALPHANUMERIC=2]="ALPHANUMERIC",O[O.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",O[O.BYTE=4]="BYTE",O[O.ECI=5]="ECI",O[O.KANJI=6]="KANJI",O[O.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",O[O.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",O[O.HANZI=9]="HANZI"})(hr||(hr={}));class ot{constructor(a,s,n,o){this.value=a,this.stringValue=s,this.characterCountBitsForVersions=n,this.bits=o,ot.FOR_BITS.set(o,this),ot.FOR_VALUE.set(a,this)}static forBits(a){const s=ot.FOR_BITS.get(a);if(s===void 0)throw new E;return s}getCharacterCountBits(a){const s=a.getVersionNumber();let n;return s<=9?n=0:s<=26?n=1:n=2,this.characterCountBitsForVersions[n]}getValue(){return this.value}getBits(){return this.bits}equals(a){if(!(a instanceof ot))return!1;const s=a;return this.value===s.value}toString(){return this.stringValue}}ot.FOR_BITS=new Map,ot.FOR_VALUE=new Map,ot.TERMINATOR=new ot(hr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),ot.NUMERIC=new ot(hr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),ot.ALPHANUMERIC=new ot(hr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),ot.STRUCTURED_APPEND=new ot(hr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),ot.BYTE=new ot(hr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),ot.ECI=new ot(hr.ECI,"ECI",Int32Array.from([0,0,0]),7),ot.KANJI=new ot(hr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),ot.FNC1_FIRST_POSITION=new ot(hr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),ot.FNC1_SECOND_POSITION=new ot(hr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),ot.HANZI=new ot(hr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class fa{static decode(a,s,n,o){const u=new nr(a);let x=new le;const p=new Array;let v=-1,A=-1;try{let T=null,L=!1,q;do{if(u.available()<4)q=ot.TERMINATOR;else{const te=u.readBits(4);q=ot.forBits(te)}switch(q){case ot.TERMINATOR:break;case ot.FNC1_FIRST_POSITION:case ot.FNC1_SECOND_POSITION:L=!0;break;case ot.STRUCTURED_APPEND:if(u.available()<16)throw new P;v=u.readBits(8),A=u.readBits(8);break;case ot.ECI:const te=fa.parseECIValue(u);if(T=Z.getCharacterSetECIByValue(te),T===null)throw new P;break;case ot.HANZI:const ce=u.readBits(4),ue=u.readBits(q.getCharacterCountBits(s));ce===fa.GB2312_SUBSET&&fa.decodeHanziSegment(u,x,ue);break;default:const Ne=u.readBits(q.getCharacterCountBits(s));switch(q){case ot.NUMERIC:fa.decodeNumericSegment(u,x,Ne);break;case ot.ALPHANUMERIC:fa.decodeAlphanumericSegment(u,x,Ne,L);break;case ot.BYTE:fa.decodeByteSegment(u,x,Ne,T,p,o);break;case ot.KANJI:fa.decodeKanjiSegment(u,x,Ne);break;default:throw new P}break}}while(q!==ot.TERMINATOR)}catch{throw new P}return new dt(a,x.toString(),p.length===0?null:p,n===null?null:n.toString(),v,A)}static decodeHanziSegment(a,s,n){if(n*13>a.available())throw new P;const o=new Uint8Array(2*n);let u=0;for(;n>0;){const x=a.readBits(13);let p=x/96<<8&4294967295|x%96;p<959?p+=41377:p+=42657,o[u]=p>>8&255,o[u+1]=p&255,u+=2,n--}try{s.append(he.decode(o,re.GB2312))}catch(x){throw new P(x)}}static decodeKanjiSegment(a,s,n){if(n*13>a.available())throw new P;const o=new Uint8Array(2*n);let u=0;for(;n>0;){const x=a.readBits(13);let p=x/192<<8&4294967295|x%192;p<7936?p+=33088:p+=49472,o[u]=p>>8,o[u+1]=p,u+=2,n--}try{s.append(he.decode(o,re.SHIFT_JIS))}catch(x){throw new P(x)}}static decodeByteSegment(a,s,n,o,u,x){if(8*n>a.available())throw new P;const p=new Uint8Array(n);for(let A=0;A<n;A++)p[A]=a.readBits(8);let v;o===null?v=re.guessEncoding(p,x):v=o.getName();try{s.append(he.decode(p,v))}catch(A){throw new P(A)}u.push(p)}static toAlphaNumericChar(a){if(a>=fa.ALPHANUMERIC_CHARS.length)throw new P;return fa.ALPHANUMERIC_CHARS[a]}static decodeAlphanumericSegment(a,s,n,o){const u=s.length();for(;n>1;){if(a.available()<11)throw new P;const x=a.readBits(11);s.append(fa.toAlphaNumericChar(Math.floor(x/45))),s.append(fa.toAlphaNumericChar(x%45)),n-=2}if(n===1){if(a.available()<6)throw new P;s.append(fa.toAlphaNumericChar(a.readBits(6)))}if(o)for(let x=u;x<s.length();x++)s.charAt(x)==="%"&&(x<s.length()-1&&s.charAt(x+1)==="%"?s.deleteCharAt(x+1):s.setCharAt(x,""))}static decodeNumericSegment(a,s,n){for(;n>=3;){if(a.available()<10)throw new P;const o=a.readBits(10);if(o>=1e3)throw new P;s.append(fa.toAlphaNumericChar(Math.floor(o/100))),s.append(fa.toAlphaNumericChar(Math.floor(o/10)%10)),s.append(fa.toAlphaNumericChar(o%10)),n-=3}if(n===2){if(a.available()<7)throw new P;const o=a.readBits(7);if(o>=100)throw new P;s.append(fa.toAlphaNumericChar(Math.floor(o/10))),s.append(fa.toAlphaNumericChar(o%10))}else if(n===1){if(a.available()<4)throw new P;const o=a.readBits(4);if(o>=10)throw new P;s.append(fa.toAlphaNumericChar(o))}}static parseECIValue(a){const s=a.readBits(8);if((s&128)===0)return s&127;if((s&192)===128){const n=a.readBits(8);return(s&63)<<8&4294967295|n}if((s&224)===192){const n=a.readBits(16);return(s&31)<<16&4294967295|n}throw new P}}fa.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",fa.GB2312_SUBSET=1;class Qo{constructor(a){this.mirrored=a}isMirrored(){return this.mirrored}applyMirroredCorrection(a){if(!this.mirrored||a===null||a.length<3)return;const s=a[0];a[0]=a[2],a[2]=s}}class Ll{constructor(){this.rsDecoder=new Ae(Je.QR_CODE_FIELD_256)}decodeBooleanArray(a,s){return this.decodeBitMatrix(W.parseFromBooleanArray(a),s)}decodeBitMatrix(a,s){const n=new Od(a);let o=null;try{return this.decodeBitMatrixParser(n,s)}catch(u){o=u}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();const u=this.decodeBitMatrixParser(n,s);return u.setOther(new Qo(!0)),u}catch(u){throw o!==null?o:u}}decodeBitMatrixParser(a,s){const n=a.readVersion(),o=a.readFormatInformation().getErrorCorrectionLevel(),u=a.readCodewords(),x=Bl.getDataBlocks(u,n,o);let p=0;for(const T of x)p+=T.getNumDataCodewords();const v=new Uint8Array(p);let A=0;for(const T of x){const L=T.getCodewords(),q=T.getNumDataCodewords();this.correctErrors(L,q);for(let te=0;te<q;te++)v[A++]=L[te]}return fa.decode(v,n,o,s)}correctErrors(a,s){const n=new Int32Array(a);try{this.rsDecoder.decode(n,a.length-s)}catch{throw new D}for(let o=0;o<s;o++)a[o]=n[o]}}class tl extends je{constructor(a,s,n){super(a,s),this.estimatedModuleSize=n}aboutEquals(a,s,n){if(Math.abs(s-this.getY())<=a&&Math.abs(n-this.getX())<=a){const o=Math.abs(a-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(a,s,n){const o=(this.getX()+s)/2,u=(this.getY()+a)/2,x=(this.estimatedModuleSize+n)/2;return new tl(o,u,x)}}class mn{constructor(a,s,n,o,u,x,p){this.image=a,this.startX=s,this.startY=n,this.width=o,this.height=u,this.moduleSize=x,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const a=this.startX,s=this.height,n=this.width,o=a+n,u=this.startY+s/2,x=new Int32Array(3),p=this.image;for(let v=0;v<s;v++){const A=u+((v&1)===0?Math.floor((v+1)/2):-Math.floor((v+1)/2));x[0]=0,x[1]=0,x[2]=0;let T=a;for(;T<o&&!p.get(T,A);)T++;let L=0;for(;T<o;){if(p.get(T,A))if(L===1)x[1]++;else if(L===2){if(this.foundPatternCross(x)){const q=this.handlePossibleCenter(x,A,T);if(q!==null)return q}x[0]=x[2],x[1]=1,x[2]=0,L=1}else x[++L]++;else L===1&&L++,x[L]++;T++}if(this.foundPatternCross(x)){const q=this.handlePossibleCenter(x,A,o);if(q!==null)return q}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new U}static centerFromEnd(a,s){return s-a[2]-a[1]/2}foundPatternCross(a){const s=this.moduleSize,n=s/2;for(let o=0;o<3;o++)if(Math.abs(s-a[o])>=n)return!1;return!0}crossCheckVertical(a,s,n,o){const u=this.image,x=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let v=a;for(;v>=0&&u.get(s,v)&&p[1]<=n;)p[1]++,v--;if(v<0||p[1]>n)return NaN;for(;v>=0&&!u.get(s,v)&&p[0]<=n;)p[0]++,v--;if(p[0]>n)return NaN;for(v=a+1;v<x&&u.get(s,v)&&p[1]<=n;)p[1]++,v++;if(v===x||p[1]>n)return NaN;for(;v<x&&!u.get(s,v)&&p[2]<=n;)p[2]++,v++;if(p[2]>n)return NaN;const A=p[0]+p[1]+p[2];return 5*Math.abs(A-o)>=2*o?NaN:this.foundPatternCross(p)?mn.centerFromEnd(p,v):NaN}handlePossibleCenter(a,s,n){const o=a[0]+a[1]+a[2],u=mn.centerFromEnd(a,n),x=this.crossCheckVertical(s,u,2*a[1],o);if(!isNaN(x)){const p=(a[0]+a[1]+a[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(p,x,u))return A.combineEstimate(x,u,p);const v=new tl(u,x,p);this.possibleCenters.push(v),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(v)}return null}}class vs extends je{constructor(a,s,n,o){super(a,s),this.estimatedModuleSize=n,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(a,s,n){if(Math.abs(s-this.getY())<=a&&Math.abs(n-this.getX())<=a){const o=Math.abs(a-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(a,s,n){const o=this.count+1,u=(this.count*this.getX()+s)/o,x=(this.count*this.getY()+a)/o,p=(this.count*this.estimatedModuleSize+n)/o;return new vs(u,x,p,o)}}class pn{constructor(a){this.bottomLeft=a[0],this.topLeft=a[1],this.topRight=a[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Da{constructor(a,s){this.image=a,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(a){const s=a!=null&&a.get($.TRY_HARDER)!==void 0,n=a!=null&&a.get($.PURE_BARCODE)!==void 0,o=this.image,u=o.getHeight(),x=o.getWidth();let p=Math.floor(3*u/(4*Da.MAX_MODULES));(p<Da.MIN_SKIP||s)&&(p=Da.MIN_SKIP);let v=!1;const A=new Int32Array(5);for(let L=p-1;L<u&&!v;L+=p){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let q=0;for(let te=0;te<x;te++)if(o.get(te,L))(q&1)===1&&q++,A[q]++;else if((q&1)===0)if(q===4)if(Da.foundPatternCross(A)){if(this.handlePossibleCenter(A,L,te,n)===!0)if(p=2,this.hasSkipped===!0)v=this.haveMultiplyConfirmedCenters();else{const ue=this.findRowSkip();ue>A[2]&&(L+=ue-A[2]-p,te=x-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,q=3;continue}q=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,q=3;else A[++q]++;else A[q]++;Da.foundPatternCross(A)&&this.handlePossibleCenter(A,L,x,n)===!0&&(p=A[0],this.hasSkipped&&(v=this.haveMultiplyConfirmedCenters()))}const T=this.selectBestPatterns();return je.orderBestPatterns(T),new pn(T)}static centerFromEnd(a,s){return s-a[4]-a[3]-a[2]/2}static foundPatternCross(a){let s=0;for(let u=0;u<5;u++){const x=a[u];if(x===0)return!1;s+=x}if(s<7)return!1;const n=s/7,o=n/2;return Math.abs(n-a[0])<o&&Math.abs(n-a[1])<o&&Math.abs(3*n-a[2])<3*o&&Math.abs(n-a[3])<o&&Math.abs(n-a[4])<o}getCrossCheckStateCount(){const a=this.crossCheckStateCount;return a[0]=0,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a}crossCheckDiagonal(a,s,n,o){const u=this.getCrossCheckStateCount();let x=0;const p=this.image;for(;a>=x&&s>=x&&p.get(s-x,a-x);)u[2]++,x++;if(a<x||s<x)return!1;for(;a>=x&&s>=x&&!p.get(s-x,a-x)&&u[1]<=n;)u[1]++,x++;if(a<x||s<x||u[1]>n)return!1;for(;a>=x&&s>=x&&p.get(s-x,a-x)&&u[0]<=n;)u[0]++,x++;if(u[0]>n)return!1;const v=p.getHeight(),A=p.getWidth();for(x=1;a+x<v&&s+x<A&&p.get(s+x,a+x);)u[2]++,x++;if(a+x>=v||s+x>=A)return!1;for(;a+x<v&&s+x<A&&!p.get(s+x,a+x)&&u[3]<n;)u[3]++,x++;if(a+x>=v||s+x>=A||u[3]>=n)return!1;for(;a+x<v&&s+x<A&&p.get(s+x,a+x)&&u[4]<n;)u[4]++,x++;if(u[4]>=n)return!1;const T=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(T-o)<2*o&&Da.foundPatternCross(u)}crossCheckVertical(a,s,n,o){const u=this.image,x=u.getHeight(),p=this.getCrossCheckStateCount();let v=a;for(;v>=0&&u.get(s,v);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(s,v)&&p[1]<=n;)p[1]++,v--;if(v<0||p[1]>n)return NaN;for(;v>=0&&u.get(s,v)&&p[0]<=n;)p[0]++,v--;if(p[0]>n)return NaN;for(v=a+1;v<x&&u.get(s,v);)p[2]++,v++;if(v===x)return NaN;for(;v<x&&!u.get(s,v)&&p[3]<n;)p[3]++,v++;if(v===x||p[3]>=n)return NaN;for(;v<x&&u.get(s,v)&&p[4]<n;)p[4]++,v++;if(p[4]>=n)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-o)>=2*o?NaN:Da.foundPatternCross(p)?Da.centerFromEnd(p,v):NaN}crossCheckHorizontal(a,s,n,o){const u=this.image,x=u.getWidth(),p=this.getCrossCheckStateCount();let v=a;for(;v>=0&&u.get(v,s);)p[2]++,v--;if(v<0)return NaN;for(;v>=0&&!u.get(v,s)&&p[1]<=n;)p[1]++,v--;if(v<0||p[1]>n)return NaN;for(;v>=0&&u.get(v,s)&&p[0]<=n;)p[0]++,v--;if(p[0]>n)return NaN;for(v=a+1;v<x&&u.get(v,s);)p[2]++,v++;if(v===x)return NaN;for(;v<x&&!u.get(v,s)&&p[3]<n;)p[3]++,v++;if(v===x||p[3]>=n)return NaN;for(;v<x&&u.get(v,s)&&p[4]<n;)p[4]++,v++;if(p[4]>=n)return NaN;const A=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(A-o)>=o?NaN:Da.foundPatternCross(p)?Da.centerFromEnd(p,v):NaN}handlePossibleCenter(a,s,n,o){const u=a[0]+a[1]+a[2]+a[3]+a[4];let x=Da.centerFromEnd(a,n),p=this.crossCheckVertical(s,Math.floor(x),a[2],u);if(!isNaN(p)&&(x=this.crossCheckHorizontal(Math.floor(x),Math.floor(p),a[2],u),!isNaN(x)&&(!o||this.crossCheckDiagonal(Math.floor(p),Math.floor(x),a[2],u)))){const v=u/7;let A=!1;const T=this.possibleCenters;for(let L=0,q=T.length;L<q;L++){const te=T[L];if(te.aboutEquals(v,p,x)){T[L]=te.combineEstimate(p,x,v),A=!0;break}}if(!A){const L=new vs(x,p,v);T.push(L),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(L)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const n of this.possibleCenters)if(n.getCount()>=Da.CENTER_QUORUM)if(s==null)s=n;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-n.getX())-Math.abs(s.getY()-n.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let a=0,s=0;const n=this.possibleCenters.length;for(const x of this.possibleCenters)x.getCount()>=Da.CENTER_QUORUM&&(a++,s+=x.getEstimatedModuleSize());if(a<3)return!1;const o=s/n;let u=0;for(const x of this.possibleCenters)u+=Math.abs(x.getEstimatedModuleSize()-o);return u<=.05*s}selectBestPatterns(){const a=this.possibleCenters.length;if(a<3)throw new U;const s=this.possibleCenters;let n;if(a>3){let o=0,u=0;for(const v of this.possibleCenters){const A=v.getEstimatedModuleSize();o+=A,u+=A*A}n=o/a;let x=Math.sqrt(u/a-n*n);s.sort((v,A)=>{const T=Math.abs(A.getEstimatedModuleSize()-n),L=Math.abs(v.getEstimatedModuleSize()-n);return T<L?-1:T>L?1:0});const p=Math.max(.2*n,x);for(let v=0;v<s.length&&s.length>3;v++){const A=s[v];Math.abs(A.getEstimatedModuleSize()-n)>p&&(s.splice(v,1),v--)}}if(s.length>3){let o=0;for(const u of s)o+=u.getEstimatedModuleSize();n=o/s.length,s.sort((u,x)=>{if(x.getCount()===u.getCount()){const p=Math.abs(x.getEstimatedModuleSize()-n),v=Math.abs(u.getEstimatedModuleSize()-n);return p<v?1:p>v?-1:0}else return x.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}Da.CENTER_QUORUM=2,Da.MIN_SKIP=3,Da.MAX_MODULES=57;class Ys{constructor(a){this.image=a}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(a){this.resultPointCallback=a==null?null:a.get($.NEED_RESULT_POINT_CALLBACK);const n=new Da(this.image,this.resultPointCallback).find(a);return this.processFinderPatternInfo(n)}processFinderPatternInfo(a){const s=a.getTopLeft(),n=a.getTopRight(),o=a.getBottomLeft(),u=this.calculateModuleSize(s,n,o);if(u<1)throw new U("No pattern found in proccess finder.");const x=Ys.computeDimension(s,n,o,u),p=it.getProvisionalVersionForDimension(x),v=p.getDimensionForVersion()-7;let A=null;if(p.getAlignmentPatternCenters().length>0){const te=n.getX()-s.getX()+o.getX(),ce=n.getY()-s.getY()+o.getY(),ue=1-3/v,Ne=Math.floor(s.getX()+ue*(te-s.getX())),Te=Math.floor(s.getY()+ue*(ce-s.getY()));for(let He=4;He<=16;He<<=1)try{A=this.findAlignmentInRegion(u,Ne,Te,He);break}catch(Ve){if(!(Ve instanceof U))throw Ve}}const T=Ys.createTransform(s,n,o,A,x),L=Ys.sampleGrid(this.image,T,x);let q;return A===null?q=[o,s,n]:q=[o,s,n,A],new We(L,q)}static createTransform(a,s,n,o,u){const x=u-3.5;let p,v,A,T;return o!==null?(p=o.getX(),v=o.getY(),A=x-3,T=A):(p=s.getX()-a.getX()+n.getX(),v=s.getY()-a.getY()+n.getY(),A=x,T=x),Re.quadrilateralToQuadrilateral(3.5,3.5,x,3.5,A,T,3.5,x,a.getX(),a.getY(),s.getX(),s.getY(),p,v,n.getX(),n.getY())}static sampleGrid(a,s,n){return At.getInstance().sampleGridWithTransform(a,n,n,s)}static computeDimension(a,s,n,o){const u=Me.round(je.distance(a,s)/o),x=Me.round(je.distance(a,n)/o);let p=Math.floor((u+x)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new U("Dimensions could be not found.")}return p}calculateModuleSize(a,s,n){return(this.calculateModuleSizeOneWay(a,s)+this.calculateModuleSizeOneWay(a,n))/2}calculateModuleSizeOneWay(a,s){const n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(a.getX()),Math.floor(a.getY()),Math.floor(s.getX()),Math.floor(s.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(a.getX()),Math.floor(a.getY()));return isNaN(n)?o/7:isNaN(o)?n/7:(n+o)/14}sizeOfBlackWhiteBlackRunBothWays(a,s,n,o){let u=this.sizeOfBlackWhiteBlackRun(a,s,n,o),x=1,p=a-(n-a);p<0?(x=a/(a-p),p=0):p>=this.image.getWidth()&&(x=(this.image.getWidth()-1-a)/(p-a),p=this.image.getWidth()-1);let v=Math.floor(s-(o-s)*x);return x=1,v<0?(x=s/(s-v),v=0):v>=this.image.getHeight()&&(x=(this.image.getHeight()-1-s)/(v-s),v=this.image.getHeight()-1),p=Math.floor(a+(p-a)*x),u+=this.sizeOfBlackWhiteBlackRun(a,s,p,v),u-1}sizeOfBlackWhiteBlackRun(a,s,n,o){const u=Math.abs(o-s)>Math.abs(n-a);if(u){let te=a;a=s,s=te,te=n,n=o,o=te}const x=Math.abs(n-a),p=Math.abs(o-s);let v=-x/2;const A=a<n?1:-1,T=s<o?1:-1;let L=0;const q=n+A;for(let te=a,ce=s;te!==q;te+=A){const ue=u?ce:te,Ne=u?te:ce;if(L===1===this.image.get(ue,Ne)){if(L===2)return Me.distance(te,ce,a,s);L++}if(v+=p,v>0){if(ce===o)break;ce+=T,v-=x}}return L===2?Me.distance(n+A,o,a,s):NaN}findAlignmentInRegion(a,s,n,o){const u=Math.floor(o*a),x=Math.max(0,s-u),p=Math.min(this.image.getWidth()-1,s+u);if(p-x<a*3)throw new U("Alignment top exceeds estimated module size.");const v=Math.max(0,n-u),A=Math.min(this.image.getHeight()-1,n+u);if(A-v<a*3)throw new U("Alignment bottom exceeds estimated module size.");return new mn(this.image,x,v,p-x,A-v,a,this.resultPointCallback).find()}}class as{constructor(){this.decoder=new Ll}getDecoder(){return this.decoder}decode(a,s){let n,o;if(s!=null&&s.get($.PURE_BARCODE)!==void 0){const v=as.extractPureBits(a.getBlackMatrix());n=this.decoder.decodeBitMatrix(v,s),o=as.NO_POINTS}else{const v=new Ys(a.getBlackMatrix()).detect(s);n=this.decoder.decodeBitMatrix(v.getBits(),s),o=v.getPoints()}n.getOther()instanceof Qo&&n.getOther().applyMirroredCorrection(o);const u=new ve(n.getText(),n.getRawBytes(),void 0,o,ie.QR_CODE,void 0),x=n.getByteSegments();x!==null&&u.putMetadata(ye.BYTE_SEGMENTS,x);const p=n.getECLevel();return p!==null&&u.putMetadata(ye.ERROR_CORRECTION_LEVEL,p),n.hasStructuredAppend()&&(u.putMetadata(ye.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),u.putMetadata(ye.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),u}reset(){}static extractPureBits(a){const s=a.getTopLeftOnBit(),n=a.getBottomRightOnBit();if(s===null||n===null)throw new U;const o=this.moduleSize(s,a);let u=s[1],x=n[1],p=s[0],v=n[0];if(p>=v||u>=x)throw new U;if(x-u!==v-p&&(v=p+(x-u),v>=a.getWidth()))throw new U;const A=Math.round((v-p+1)/o),T=Math.round((x-u+1)/o);if(A<=0||T<=0)throw new U;if(T!==A)throw new U;const L=Math.floor(o/2);u+=L,p+=L;const q=p+Math.floor((A-1)*o)-v;if(q>0){if(q>L)throw new U;p-=q}const te=u+Math.floor((T-1)*o)-x;if(te>0){if(te>L)throw new U;u-=te}const ce=new W(A,T);for(let ue=0;ue<T;ue++){const Ne=u+Math.floor(ue*o);for(let Te=0;Te<A;Te++)a.get(p+Math.floor(Te*o),Ne)&&ce.set(Te,ue)}return ce}static moduleSize(a,s){const n=s.getHeight(),o=s.getWidth();let u=a[0],x=a[1],p=!0,v=0;for(;u<o&&x<n;){if(p!==s.get(u,x)){if(++v===5)break;p=!p}u++,x++}if(u===o||x===n)throw new U;return(u-a[0])/7}}as.NO_POINTS=new Array;class ft{PDF417Common(){}static getBitCountSum(a){return Me.sum(a)}static toIntArray(a){if(a==null||!a.length)return ft.EMPTY_INT_ARRAY;const s=new Int32Array(a.length);let n=0;for(const o of a)s[n++]=o;return s}static getCodeword(a){const s=z.binarySearch(ft.SYMBOL_TABLE,a&262143);return s<0?-1:(ft.CODEWORD_TABLE[s]-1)%ft.NUMBER_OF_CODEWORDS}}ft.NUMBER_OF_CODEWORDS=929,ft.MAX_CODEWORDS_IN_BARCODE=ft.NUMBER_OF_CODEWORDS-1,ft.MIN_ROWS_IN_BARCODE=3,ft.MAX_ROWS_IN_BARCODE=90,ft.MODULES_IN_CODEWORD=17,ft.MODULES_IN_STOP_PATTERN=18,ft.BARS_IN_MODULE=8,ft.EMPTY_INT_ARRAY=new Int32Array([]),ft.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ft.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class rs{constructor(a,s){this.bits=a,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class wt{static detectMultiple(a,s,n){let o=a.getBlackMatrix(),u=wt.detect(n,o);return u.length||(o=o.clone(),o.rotate180(),u=wt.detect(n,o)),new rs(o,u)}static detect(a,s){const n=new Array;let o=0,u=0,x=!1;for(;o<s.getHeight();){const p=wt.findVertices(s,o,u);if(p[0]==null&&p[3]==null){if(!x)break;x=!1,u=0;for(const v of n)v[1]!=null&&(o=Math.trunc(Math.max(o,v[1].getY()))),v[3]!=null&&(o=Math.max(o,Math.trunc(v[3].getY())));o+=wt.ROW_STEP;continue}if(x=!0,n.push(p),!a)break;p[2]!=null?(u=Math.trunc(p[2].getX()),o=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),o=Math.trunc(p[4].getY()))}return n}static findVertices(a,s,n){const o=a.getHeight(),u=a.getWidth(),x=new Array(8);return wt.copyToResult(x,wt.findRowsWithPattern(a,o,u,s,n,wt.START_PATTERN),wt.INDEXES_START_PATTERN),x[4]!=null&&(n=Math.trunc(x[4].getX()),s=Math.trunc(x[4].getY())),wt.copyToResult(x,wt.findRowsWithPattern(a,o,u,s,n,wt.STOP_PATTERN),wt.INDEXES_STOP_PATTERN),x}static copyToResult(a,s,n){for(let o=0;o<n.length;o++)a[n[o]]=s[o]}static findRowsWithPattern(a,s,n,o,u,x){const p=new Array(4);let v=!1;const A=new Int32Array(x.length);for(;o<s;o+=wt.ROW_STEP){let L=wt.findGuardPattern(a,u,o,n,!1,x,A);if(L!=null){for(;o>0;){const q=wt.findGuardPattern(a,u,--o,n,!1,x,A);if(q!=null)L=q;else{o++;break}}p[0]=new je(L[0],o),p[1]=new je(L[1],o),v=!0;break}}let T=o+1;if(v){let L=0,q=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;T<s;T++){const te=wt.findGuardPattern(a,q[0],T,n,!1,x,A);if(te!=null&&Math.abs(q[0]-te[0])<wt.MAX_PATTERN_DRIFT&&Math.abs(q[1]-te[1])<wt.MAX_PATTERN_DRIFT)q=te,L=0;else{if(L>wt.SKIPPED_ROW_COUNT_MAX)break;L++}}T-=L+1,p[2]=new je(q[0],T),p[3]=new je(q[1],T)}return T-o<wt.BARCODE_MIN_HEIGHT&&z.fill(p,null),p}static findGuardPattern(a,s,n,o,u,x,p){z.fillWithin(p,0,p.length,0);let v=s,A=0;for(;a.get(v,n)&&v>0&&A++<wt.MAX_PIXEL_DRIFT;)v--;let T=v,L=0,q=x.length;for(let te=u;T<o;T++)if(a.get(T,n)!==te)p[L]++;else{if(L===q-1){if(wt.patternMatchVariance(p,x,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return new Int32Array([v,T]);v+=p[0]+p[1],_.arraycopy(p,2,p,0,L-1),p[L-1]=0,p[L]=0,L--}else L++;p[L]=1,te=!te}return L===q-1&&wt.patternMatchVariance(p,x,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE?new Int32Array([v,T-1]):null}static patternMatchVariance(a,s,n){let o=a.length,u=0,x=0;for(let A=0;A<o;A++)u+=a[A],x+=s[A];if(u<x)return 1/0;let p=u/x;n*=p;let v=0;for(let A=0;A<o;A++){let T=a[A],L=s[A]*p,q=T>L?T-L:L-T;if(q>n)return 1/0;v+=q}return v/u}}wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),wt.MAX_AVG_VARIANCE=.42,wt.MAX_INDIVIDUAL_VARIANCE=.8,wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),wt.MAX_PIXEL_DRIFT=3,wt.MAX_PATTERN_DRIFT=5,wt.SKIPPED_ROW_COUNT_MAX=25,wt.ROW_STEP=5,wt.BARCODE_MIN_HEIGHT=10;class ba{constructor(a,s){if(s.length===0)throw new E;this.field=a;let n=s.length;if(n>1&&s[0]===0){let o=1;for(;o<n&&s[o]===0;)o++;o===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-o),_.arraycopy(s,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(a){return this.coefficients[this.coefficients.length-1-a]}evaluateAt(a){if(a===0)return this.getCoefficient(0);if(a===1){let o=0;for(let u of this.coefficients)o=this.field.add(o,u);return o}let s=this.coefficients[0],n=this.coefficients.length;for(let o=1;o<n;o++)s=this.field.add(this.field.multiply(a,s),this.coefficients[o]);return s}add(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return a;if(a.isZero())return this;let s=this.coefficients,n=a.coefficients;if(s.length>n.length){let x=s;s=n,n=x}let o=new Int32Array(n.length),u=n.length-s.length;_.arraycopy(n,0,o,0,u);for(let x=u;x<n.length;x++)o[x]=this.field.add(s[x-u],n[x]);return new ba(this.field,o)}subtract(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");return a.isZero()?this:this.add(a.negative())}multiply(a){return a instanceof ba?this.multiplyOther(a):this.multiplyScalar(a)}multiplyOther(a){if(!this.field.equals(a.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||a.isZero())return new ba(this.field,new Int32Array([0]));let s=this.coefficients,n=s.length,o=a.coefficients,u=o.length,x=new Int32Array(n+u-1);for(let p=0;p<n;p++){let v=s[p];for(let A=0;A<u;A++)x[p+A]=this.field.add(x[p+A],this.field.multiply(v,o[A]))}return new ba(this.field,x)}negative(){let a=this.coefficients.length,s=new Int32Array(a);for(let n=0;n<a;n++)s[n]=this.field.subtract(0,this.coefficients[n]);return new ba(this.field,s)}multiplyScalar(a){if(a===0)return new ba(this.field,new Int32Array([0]));if(a===1)return this;let s=this.coefficients.length,n=new Int32Array(s);for(let o=0;o<s;o++)n[o]=this.field.multiply(this.coefficients[o],a);return new ba(this.field,n)}multiplyByMonomial(a,s){if(a<0)throw new E;if(s===0)return new ba(this.field,new Int32Array([0]));let n=this.coefficients.length,o=new Int32Array(n+a);for(let u=0;u<n;u++)o[u]=this.field.multiply(this.coefficients[u],s);return new ba(this.field,o)}toString(){let a=new le;for(let s=this.getDegree();s>=0;s--){let n=this.getCoefficient(s);n!==0&&(n<0?(a.append(" - "),n=-n):a.length()>0&&a.append(" + "),(s===0||n!==1)&&a.append(n),s!==0&&(s===1?a.append("x"):(a.append("x^"),a.append(s))))}return a.toString()}}class Ns{add(a,s){return(a+s)%this.modulus}subtract(a,s){return(this.modulus+a-s)%this.modulus}exp(a){return this.expTable[a]}log(a){if(a===0)throw new E;return this.logTable[a]}inverse(a){if(a===0)throw new Ze;return this.expTable[this.modulus-this.logTable[a]-1]}multiply(a,s){return a===0||s===0?0:this.expTable[(this.logTable[a]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(a){return a===this}}class al extends Ns{constructor(a,s){super(),this.modulus=a,this.expTable=new Int32Array(a),this.logTable=new Int32Array(a);let n=1;for(let o=0;o<a;o++)this.expTable[o]=n,n=n*s%a;for(let o=0;o<a-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new ba(this,new Int32Array([0])),this.one=new ba(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(a,s){if(a<0)throw new E;if(s===0)return this.zero;let n=new Int32Array(a+1);return n[0]=s,new ba(this,n)}}al.PDF417_GF=new al(ft.NUMBER_OF_CODEWORDS,3);class rl{constructor(){this.field=al.PDF417_GF}decode(a,s,n){let o=new ba(this.field,a),u=new Int32Array(s),x=!1;for(let ce=s;ce>0;ce--){let ue=o.evaluateAt(this.field.exp(ce));u[s-ce]=ue,ue!==0&&(x=!0)}if(!x)return 0;let p=this.field.getOne();if(n!=null)for(const ce of n){let ue=this.field.exp(a.length-1-ce),Ne=new ba(this.field,new Int32Array([this.field.subtract(0,ue),1]));p=p.multiply(Ne)}let v=new ba(this.field,u),A=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),v,s),T=A[0],L=A[1],q=this.findErrorLocations(T),te=this.findErrorMagnitudes(L,T,q);for(let ce=0;ce<q.length;ce++){let ue=a.length-1-this.field.log(q[ce]);if(ue<0)throw D.getChecksumInstance();a[ue]=this.field.subtract(a[ue],te[ce])}return q.length}runEuclideanAlgorithm(a,s,n){if(a.getDegree()<s.getDegree()){let q=a;a=s,s=q}let o=a,u=s,x=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(n/2);){let q=o,te=x;if(o=u,x=p,o.isZero())throw D.getChecksumInstance();u=q;let ce=this.field.getZero(),ue=o.getCoefficient(o.getDegree()),Ne=this.field.inverse(ue);for(;u.getDegree()>=o.getDegree()&&!u.isZero();){let Te=u.getDegree()-o.getDegree(),He=this.field.multiply(u.getCoefficient(u.getDegree()),Ne);ce=ce.add(this.field.buildMonomial(Te,He)),u=u.subtract(o.multiplyByMonomial(Te,He))}p=ce.multiply(x).subtract(te).negative()}let v=p.getCoefficient(0);if(v===0)throw D.getChecksumInstance();let A=this.field.inverse(v),T=p.multiply(A),L=u.multiply(A);return[T,L]}findErrorLocations(a){let s=a.getDegree(),n=new Int32Array(s),o=0;for(let u=1;u<this.field.getSize()&&o<s;u++)a.evaluateAt(u)===0&&(n[o]=this.field.inverse(u),o++);if(o!==s)throw D.getChecksumInstance();return n}findErrorMagnitudes(a,s,n){let o=s.getDegree(),u=new Int32Array(o);for(let A=1;A<=o;A++)u[o-A]=this.field.multiply(A,s.getCoefficient(A));let x=new ba(this.field,u),p=n.length,v=new Int32Array(p);for(let A=0;A<p;A++){let T=this.field.inverse(n[A]),L=this.field.subtract(0,a.evaluateAt(T)),q=this.field.inverse(x.evaluateAt(T));v[A]=this.field.multiply(L,q)}return v}}class js{constructor(a,s,n,o,u){a instanceof js?this.constructor_2(a):this.constructor_1(a,s,n,o,u)}constructor_1(a,s,n,o,u){const x=s==null||n==null,p=o==null||u==null;if(x&&p)throw new U;x?(s=new je(0,o.getY()),n=new je(0,u.getY())):p&&(o=new je(a.getWidth()-1,s.getY()),u=new je(a.getWidth()-1,n.getY())),this.image=a,this.topLeft=s,this.bottomLeft=n,this.topRight=o,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),n.getX())),this.maxX=Math.trunc(Math.max(o.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),o.getY())),this.maxY=Math.trunc(Math.max(n.getY(),u.getY()))}constructor_2(a){this.image=a.image,this.topLeft=a.getTopLeft(),this.bottomLeft=a.getBottomLeft(),this.topRight=a.getTopRight(),this.bottomRight=a.getBottomRight(),this.minX=a.getMinX(),this.maxX=a.getMaxX(),this.minY=a.getMinY(),this.maxY=a.getMaxY()}static merge(a,s){return a==null?s:s==null?a:new js(a.image,a.topLeft,a.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(a,s,n){let o=this.topLeft,u=this.bottomLeft,x=this.topRight,p=this.bottomRight;if(a>0){let v=n?this.topLeft:this.topRight,A=Math.trunc(v.getY()-a);A<0&&(A=0);let T=new je(v.getX(),A);n?o=T:x=T}if(s>0){let v=n?this.bottomLeft:this.bottomRight,A=Math.trunc(v.getY()+s);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let T=new je(v.getX(),A);n?u=T:p=T}return new js(this.image,o,u,x,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Fl{constructor(a,s,n,o){this.columnCount=a,this.errorCorrectionLevel=o,this.rowCountUpperPart=s,this.rowCountLowerPart=n,this.rowCount=s+n}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Cs{constructor(){this.buffer=""}static form(a,s){let n=-1;function o(x,p,v,A,T,L){if(x==="%%")return"%";if(s[++n]===void 0)return;x=A?parseInt(A.substr(1)):void 0;let q=T?parseInt(T.substr(1)):void 0,te;switch(L){case"s":te=s[n];break;case"c":te=s[n][0];break;case"f":te=parseFloat(s[n]).toFixed(x);break;case"p":te=parseFloat(s[n]).toPrecision(x);break;case"e":te=parseFloat(s[n]).toExponential(x);break;case"x":te=parseInt(s[n]).toString(q||16);break;case"d":te=parseFloat(parseInt(s[n],q||10).toPrecision(x)).toFixed(0);break}te=typeof te=="object"?JSON.stringify(te):(+te).toString(q);let ce=parseInt(v),ue=v&&v[0]+""=="0"?"0":" ";for(;te.length<ce;)te=p!==void 0?te+ue:ue+te;return te}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return a.replace(u,o)}format(a,...s){this.buffer+=Cs.form(a,s)}toString(){return this.buffer}}class yn{constructor(a){this.boundingBox=new js(a),this.codewords=new Array(a.getMaxY()-a.getMinY()+1)}getCodewordNearby(a){let s=this.getCodeword(a);if(s!=null)return s;for(let n=1;n<yn.MAX_NEARBY_DISTANCE;n++){let o=this.imageRowToCodewordIndex(a)-n;if(o>=0&&(s=this.codewords[o],s!=null)||(o=this.imageRowToCodewordIndex(a)+n,o<this.codewords.length&&(s=this.codewords[o],s!=null)))return s}return null}imageRowToCodewordIndex(a){return a-this.boundingBox.getMinY()}setCodeword(a,s){this.codewords[this.imageRowToCodewordIndex(a)]=s}getCodeword(a){return this.codewords[this.imageRowToCodewordIndex(a)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const a=new Cs;let s=0;for(const n of this.codewords){if(n==null){a.format("%3d:    |   %n",s++);continue}a.format("%3d: %3d|%3d%n",s++,n.getRowNumber(),n.getValue())}return a.toString()}}yn.MAX_NEARBY_DISTANCE=5;class Fa{constructor(){this.values=new Map}setValue(a){a=Math.trunc(a);let s=this.values.get(a);s==null&&(s=0),s++,this.values.set(a,s)}getValue(){let a=-1,s=new Array;for(const[n,o]of this.values.entries()){const u={getKey:()=>n,getValue:()=>o};u.getValue()>a?(a=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===a&&s.push(u.getKey())}return ft.toIntArray(s)}getConfidence(a){return this.values.get(a)}}class ks extends yn{constructor(a,s){super(a),this._isLeft=s}setRowNumbers(){for(let a of this.getCodewords())a?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(a){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,a);let n=this.getBoundingBox(),o=this._isLeft?n.getTopLeft():n.getTopRight(),u=this._isLeft?n.getBottomLeft():n.getBottomRight(),x=this.imageRowToCodewordIndex(Math.trunc(o.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=-1,A=1,T=0;for(let L=x;L<p;L++){if(s[L]==null)continue;let q=s[L],te=q.getRowNumber()-v;if(te===0)T++;else if(te===1)A=Math.max(A,T),T=1,v=q.getRowNumber();else if(te<0||q.getRowNumber()>=a.getRowCount()||te>L)s[L]=null;else{let ce;A>2?ce=(A-2)*te:ce=te;let ue=ce>=L;for(let Ne=1;Ne<=ce&&!ue;Ne++)ue=s[L-Ne]!=null;ue?s[L]=null:(v=q.getRowNumber(),T=1)}}}getRowHeights(){let a=this.getBarcodeMetadata();if(a==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(a);let s=new Int32Array(a.getRowCount());for(let n of this.getCodewords())if(n!=null){let o=n.getRowNumber();if(o>=s.length)continue;s[o]++}return s}adjustIncompleteIndicatorColumnRowNumbers(a){let s=this.getBoundingBox(),n=this._isLeft?s.getTopLeft():s.getTopRight(),o=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(n.getY())),x=this.imageRowToCodewordIndex(Math.trunc(o.getY())),p=this.getCodewords(),v=-1;for(let A=u;A<x;A++){if(p[A]==null)continue;let T=p[A];T.setRowNumberAsRowIndicatorColumn();let L=T.getRowNumber()-v;L===0||(L===1?v=T.getRowNumber():T.getRowNumber()>=a.getRowCount()?p[A]=null:v=T.getRowNumber())}}getBarcodeMetadata(){let a=this.getCodewords(),s=new Fa,n=new Fa,o=new Fa,u=new Fa;for(let p of a){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let v=p.getValue()%30,A=p.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:n.setValue(v*3+1);break;case 1:u.setValue(v/3),o.setValue(v%3);break;case 2:s.setValue(v+1);break}}if(s.getValue().length===0||n.getValue().length===0||o.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||n.getValue()[0]+o.getValue()[0]<ft.MIN_ROWS_IN_BARCODE||n.getValue()[0]+o.getValue()[0]>ft.MAX_ROWS_IN_BARCODE)return null;let x=new Fl(s.getValue()[0],n.getValue()[0],o.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(a,x),x}removeIncorrectCodewords(a,s){for(let n=0;n<a.length;n++){let o=a[n];if(a[n]==null)continue;let u=o.getValue()%30,x=o.getRowNumber();if(x>s.getRowCount()){a[n]=null;continue}switch(this._isLeft||(x+=2),x%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(a[n]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(a[n]=null);break;case 2:u+1!==s.getColumnCount()&&(a[n]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class As{constructor(a,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=a,this.barcodeColumnCount=a.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let a=ft.MAX_CODEWORDS_IN_BARCODE,s;do s=a,a=this.adjustRowNumbersAndGetCount();while(a>0&&a<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(a){a?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let a=this.adjustRowNumbersByRow();if(a===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let n=this.detectionResultColumns[s].getCodewords();for(let o=0;o<n.length;o++)n[o]!=null&&(n[o].hasValidRowNumber()||this.adjustRowNumbers(s,o,n))}return a}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let a=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<a.length;n++)if(a[n]!=null&&s[n]!=null&&a[n].getRowNumber()===s[n].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let u=this.detectionResultColumns[o].getCodewords()[n];u!=null&&(u.setRowNumber(a[n].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[n]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let a=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let n=0;n<s.length;n++){if(s[n]==null)continue;let o=s[n].getRowNumber(),u=0;for(let x=this.barcodeColumnCount+1;x>0&&u<this.ADJUST_ROW_NUMBER_SKIP;x--){let p=this.detectionResultColumns[x].getCodewords()[n];p!=null&&(u=As.adjustRowNumberIfValid(o,u,p),p.hasValidRowNumber()||a++)}}return a}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let a=0,s=this.detectionResultColumns[0].getCodewords();for(let n=0;n<s.length;n++){if(s[n]==null)continue;let o=s[n].getRowNumber(),u=0;for(let x=1;x<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;x++){let p=this.detectionResultColumns[x].getCodewords()[n];p!=null&&(u=As.adjustRowNumberIfValid(o,u,p),p.hasValidRowNumber()||a++)}}return a}static adjustRowNumberIfValid(a,s,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(a)?(n.setRowNumber(a),s=0):++s),s}adjustRowNumbers(a,s,n){if(!this.detectionResultColumns[a-1])return;let o=n[s],u=this.detectionResultColumns[a-1].getCodewords(),x=u;this.detectionResultColumns[a+1]!=null&&(x=this.detectionResultColumns[a+1].getCodewords());let p=new Array(14);p[2]=u[s],p[3]=x[s],s>0&&(p[0]=n[s-1],p[4]=u[s-1],p[5]=x[s-1]),s>1&&(p[8]=n[s-2],p[10]=u[s-2],p[11]=x[s-2]),s<n.length-1&&(p[1]=n[s+1],p[6]=u[s+1],p[7]=x[s+1]),s<n.length-2&&(p[9]=n[s+2],p[12]=u[s+2],p[13]=x[s+2]);for(let v of p)if(As.adjustRowNumber(o,v))return}static adjustRowNumber(a,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===a.getBucket()?(a.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(a){this.boundingBox=a}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(a,s){this.detectionResultColumns[a]=s}getDetectionResultColumn(a){return this.detectionResultColumns[a]}toString(){let a=this.detectionResultColumns[0];a==null&&(a=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new Cs;for(let n=0;n<a.getCodewords().length;n++){s.format("CW %3d:",n);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[o].getCodewords()[n];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class ss{constructor(a,s,n,o){this.rowNumber=ss.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(a),this.endX=Math.trunc(s),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(a){return a!==ss.BARCODE_ROW_UNKNOWN&&this.bucket===a%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(a){this.rowNumber=a}toString(){return this.rowNumber+"|"+this.value}}ss.BARCODE_ROW_UNKNOWN=-1;class lr{static initialize(){for(let a=0;a<ft.SYMBOL_TABLE.length;a++){let s=ft.SYMBOL_TABLE[a],n=s&1;for(let o=0;o<ft.BARS_IN_MODULE;o++){let u=0;for(;(s&1)===n;)u+=1,s>>=1;n=s&1,lr.RATIOS_TABLE[a]||(lr.RATIOS_TABLE[a]=new Array(ft.BARS_IN_MODULE)),lr.RATIOS_TABLE[a][ft.BARS_IN_MODULE-o-1]=Math.fround(u/ft.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(a){let s=lr.getDecodedCodewordValue(lr.sampleBitCounts(a));return s!==-1?s:lr.getClosestDecodedValue(a)}static sampleBitCounts(a){let s=Me.sum(a),n=new Int32Array(ft.BARS_IN_MODULE),o=0,u=0;for(let x=0;x<ft.MODULES_IN_CODEWORD;x++){let p=s/(2*ft.MODULES_IN_CODEWORD)+x*s/ft.MODULES_IN_CODEWORD;u+a[o]<=p&&(u+=a[o],o++),n[o]++}return n}static getDecodedCodewordValue(a){let s=lr.getBitValue(a);return ft.getCodeword(s)===-1?-1:s}static getBitValue(a){let s=0;for(let n=0;n<a.length;n++)for(let o=0;o<a[n];o++)s=s<<1|(n%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(a){let s=Me.sum(a),n=new Array(ft.BARS_IN_MODULE);if(s>1)for(let x=0;x<n.length;x++)n[x]=Math.fround(a[x]/s);let o=ae.MAX_VALUE,u=-1;this.bSymbolTableReady||lr.initialize();for(let x=0;x<lr.RATIOS_TABLE.length;x++){let p=0,v=lr.RATIOS_TABLE[x];for(let A=0;A<ft.BARS_IN_MODULE;A++){let T=Math.fround(v[A]-n[A]);if(p+=Math.fround(T*T),p>=o)break}p<o&&(o=p,u=ft.SYMBOL_TABLE[x])}return u}}lr.bSymbolTableReady=!1,lr.RATIOS_TABLE=new Array(ft.SYMBOL_TABLE.length).map(O=>new Array(ft.BARS_IN_MODULE));class Pl{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(a){this.segmentIndex=a}getFileId(){return this.fileId}setFileId(a){this.fileId=a}getOptionalData(){return this.optionalData}setOptionalData(a){this.optionalData=a}isLastSegment(){return this.lastSegment}setLastSegment(a){this.lastSegment=a}getSegmentCount(){return this.segmentCount}setSegmentCount(a){this.segmentCount=a}getSender(){return this.sender||null}setSender(a){this.sender=a}getAddressee(){return this.addressee||null}setAddressee(a){this.addressee=a}getFileName(){return this.fileName}setFileName(a){this.fileName=a}getFileSize(){return this.fileSize}setFileSize(a){this.fileSize=a}getChecksum(){return this.checksum}setChecksum(a){this.checksum=a}getTimestamp(){return this.timestamp}setTimestamp(a){this.timestamp=a}}class zl{static parseLong(a,s=void 0){return parseInt(a,s)}}class bn extends b{}bn.kind="NullPointerException";class Ul{writeBytes(a){this.writeBytesOffset(a,0,a.length)}writeBytesOffset(a,s,n){if(a==null)throw new bn;if(s<0||s>a.length||n<0||s+n>a.length||s+n<0)throw new G;if(n===0)return;for(let o=0;o<n;o++)this.write(a[s+o])}flush(){}close(){}}class $o extends b{}class Bd extends Ul{constructor(a=32){if(super(),this.count=0,a<0)throw new E("Negative initial size: "+a);this.buf=new Uint8Array(a)}ensureCapacity(a){a-this.buf.length>0&&this.grow(a)}grow(a){let n=this.buf.length<<1;if(n-a<0&&(n=a),n<0){if(a<0)throw new $o;n=F.MAX_VALUE}this.buf=z.copyOfUint8Array(this.buf,n)}write(a){this.ensureCapacity(this.count+1),this.buf[this.count]=a,this.count+=1}writeBytesOffset(a,s,n){if(s<0||s>a.length||n<0||s+n-a.length>0)throw new G;this.ensureCapacity(this.count+n),_.arraycopy(a,s,this.buf,this.count,n),this.count+=n}writeTo(a){a.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return z.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(a){return a?typeof a=="string"?this.toString_string(a):this.toString_number(a):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(a){return new String(this.buf).toString()}toString_number(a){return new String(this.buf).toString()}close(){}}var Zt;(function(O){O[O.ALPHA=0]="ALPHA",O[O.LOWER=1]="LOWER",O[O.MIXED=2]="MIXED",O[O.PUNCT=3]="PUNCT",O[O.ALPHA_SHIFT=4]="ALPHA_SHIFT",O[O.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Zt||(Zt={}));function Wo(){if(typeof window<"u")return window.BigInt||null;if(typeof td<"u")return td.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let wn;function Ss(O){if(typeof wn>"u"&&(wn=Wo()),wn===null)throw new Error("BigInt is not supported!");return wn(O)}function Ld(){let O=[];O[0]=Ss(1);let a=Ss(900);O[1]=a;for(let s=2;s<16;s++)O[s]=O[s-1]*a;return O}class De{static decode(a,s){let n=new le(""),o=Z.ISO8859_1;n.enableDecoding(o);let u=1,x=a[u++],p=new Pl;for(;u<a[0];){switch(x){case De.TEXT_COMPACTION_MODE_LATCH:u=De.textCompaction(a,u,n);break;case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:u=De.byteCompaction(x,a,o,u,n);break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(a[u++]);break;case De.NUMERIC_COMPACTION_MODE_LATCH:u=De.numericCompaction(a,u,n);break;case De.ECI_CHARSET:Z.getCharacterSetECIByValue(a[u++]);break;case De.ECI_GENERAL_PURPOSE:u+=2;break;case De.ECI_USER_DEFINED:u++;break;case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=De.decodeMacroBlock(a,u,p);break;case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:throw new P;default:u--,u=De.textCompaction(a,u,n);break}if(u<a.length)x=a[u++];else throw P.getFormatInstance()}if(n.length()===0)throw P.getFormatInstance();let v=new dt(null,n.toString(),null,s);return v.setOther(p),v}static decodeMacroBlock(a,s,n){if(s+De.NUMBER_OF_SEQUENCE_CODEWORDS>a[0])throw P.getFormatInstance();let o=new Int32Array(De.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<De.NUMBER_OF_SEQUENCE_CODEWORDS;p++,s++)o[p]=a[s];n.setSegmentIndex(F.parseInt(De.decodeBase900toBase10(o,De.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new le;s=De.textCompaction(a,s,u),n.setFileId(u.toString());let x=-1;for(a[s]===De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(x=s+1);s<a[0];)switch(a[s]){case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,a[s]){case De.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new le;s=De.textCompaction(a,s+1,p),n.setFileName(p.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let v=new le;s=De.textCompaction(a,s+1,v),n.setSender(v.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new le;s=De.textCompaction(a,s+1,A),n.setAddressee(A.toString());break;case De.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let T=new le;s=De.numericCompaction(a,s+1,T),n.setSegmentCount(F.parseInt(T.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let L=new le;s=De.numericCompaction(a,s+1,L),n.setTimestamp(zl.parseLong(L.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let q=new le;s=De.numericCompaction(a,s+1,q),n.setChecksum(F.parseInt(q.toString()));break;case De.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let te=new le;s=De.numericCompaction(a,s+1,te),n.setFileSize(zl.parseLong(te.toString()));break;default:throw P.getFormatInstance()}break;case De.MACRO_PDF417_TERMINATOR:s++,n.setLastSegment(!0);break;default:throw P.getFormatInstance()}if(x!==-1){let p=s-x;n.isLastSegment()&&p--,n.setOptionalData(z.copyOfRange(a,x,x+p))}return s}static textCompaction(a,s,n){let o=new Int32Array((a[0]-s)*2),u=new Int32Array((a[0]-s)*2),x=0,p=!1;for(;s<a[0]&&!p;){let v=a[s++];if(v<De.TEXT_COMPACTION_MODE_LATCH)o[x]=v/30,o[x+1]=v%30,x+=2;else switch(v){case De.TEXT_COMPACTION_MODE_LATCH:o[x++]=De.TEXT_COMPACTION_MODE_LATCH;break;case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:s--,p=!0;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[x]=De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,v=a[s++],u[x]=v,x++;break}}return De.decodeTextCompaction(o,u,x,n),s}static decodeTextCompaction(a,s,n,o){let u=Zt.ALPHA,x=Zt.ALPHA,p=0;for(;p<n;){let v=a[p],A="";switch(u){case Zt.ALPHA:if(v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case De.LL:u=Zt.LOWER;break;case De.ML:u=Zt.MIXED;break;case De.PS:x=u,u=Zt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Zt.ALPHA;break}break;case Zt.LOWER:if(v<26)A=String.fromCharCode(97+v);else switch(v){case 26:A=" ";break;case De.AS:x=u,u=Zt.ALPHA_SHIFT;break;case De.ML:u=Zt.MIXED;break;case De.PS:x=u,u=Zt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Zt.ALPHA;break}break;case Zt.MIXED:if(v<De.PL)A=De.MIXED_CHARS[v];else switch(v){case De.PL:u=Zt.PUNCT;break;case 26:A=" ";break;case De.LL:u=Zt.LOWER;break;case De.AL:u=Zt.ALPHA;break;case De.PS:x=u,u=Zt.PUNCT_SHIFT;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Zt.ALPHA;break}break;case Zt.PUNCT:if(v<De.PAL)A=De.PUNCT_CHARS[v];else switch(v){case De.PAL:u=Zt.ALPHA;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Zt.ALPHA;break}break;case Zt.ALPHA_SHIFT:if(u=x,v<26)A=String.fromCharCode(65+v);else switch(v){case 26:A=" ";break;case De.TEXT_COMPACTION_MODE_LATCH:u=Zt.ALPHA;break}break;case Zt.PUNCT_SHIFT:if(u=x,v<De.PAL)A=De.PUNCT_CHARS[v];else switch(v){case De.PAL:u=Zt.ALPHA;break;case De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(s[p]);break;case De.TEXT_COMPACTION_MODE_LATCH:u=Zt.ALPHA;break}break}A!==""&&o.append(A),p++}}static byteCompaction(a,s,n,o,u){let x=new Bd,p=0,v=0,A=!1;switch(a){case De.BYTE_COMPACTION_MODE_LATCH:let T=new Int32Array(6),L=s[o++];for(;o<s[0]&&!A;)switch(T[p++]=L,v=900*v+L,L=s[o++],L){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:o--,A=!0;break;default:if(p%5===0&&p>0){for(let q=0;q<6;++q)x.write(Number(Ss(v)>>Ss(8*(5-q))));v=0,p=0}break}o===s[0]&&L<De.TEXT_COMPACTION_MODE_LATCH&&(T[p++]=L);for(let q=0;q<p;q++)x.write(T[q]);break;case De.BYTE_COMPACTION_MODE_LATCH_6:for(;o<s[0]&&!A;){let q=s[o++];if(q<De.TEXT_COMPACTION_MODE_LATCH)p++,v=900*v+q;else switch(q){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.NUMERIC_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:o--,A=!0;break}if(p%5===0&&p>0){for(let te=0;te<6;++te)x.write(Number(Ss(v)>>Ss(8*(5-te))));v=0,p=0}}break}return u.append(he.decode(x.toByteArray(),n)),o}static numericCompaction(a,s,n){let o=0,u=!1,x=new Int32Array(De.MAX_NUMERIC_CODEWORDS);for(;s<a[0]&&!u;){let p=a[s++];if(s===a[0]&&(u=!0),p<De.TEXT_COMPACTION_MODE_LATCH)x[o]=p,o++;else switch(p){case De.TEXT_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH:case De.BYTE_COMPACTION_MODE_LATCH_6:case De.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case De.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(o%De.MAX_NUMERIC_CODEWORDS===0||p===De.NUMERIC_COMPACTION_MODE_LATCH||u)&&o>0&&(n.append(De.decodeBase900toBase10(x,o)),o=0)}return s}static decodeBase900toBase10(a,s){let n=Ss(0);for(let u=0;u<s;u++)n+=De.EXP900[s-u-1]*Ss(a[u]);let o=n.toString();if(o.charAt(0)!=="1")throw new P;return o.substring(1)}}De.TEXT_COMPACTION_MODE_LATCH=900,De.BYTE_COMPACTION_MODE_LATCH=901,De.NUMERIC_COMPACTION_MODE_LATCH=902,De.BYTE_COMPACTION_MODE_LATCH_6=924,De.ECI_USER_DEFINED=925,De.ECI_GENERAL_PURPOSE=926,De.ECI_CHARSET=927,De.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,De.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,De.MACRO_PDF417_TERMINATOR=922,De.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,De.MAX_NUMERIC_CODEWORDS=15,De.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,De.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,De.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,De.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,De.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,De.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,De.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,De.PL=25,De.LL=27,De.AS=27,De.ML=28,De.AL=28,De.PS=29,De.PAL=29,De.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,De.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",De.EXP900=Wo()?Ld():[],De.NUMBER_OF_SEQUENCE_CODEWORDS=2;class jt{constructor(){}static decode(a,s,n,o,u,x,p){let v=new js(a,s,n,o,u),A=null,T=null,L;for(let ce=!0;;ce=!1){if(s!=null&&(A=jt.getRowIndicatorColumn(a,v,s,!0,x,p)),o!=null&&(T=jt.getRowIndicatorColumn(a,v,o,!1,x,p)),L=jt.merge(A,T),L==null)throw U.getNotFoundInstance();let ue=L.getBoundingBox();if(ce&&ue!=null&&(ue.getMinY()<v.getMinY()||ue.getMaxY()>v.getMaxY()))v=ue;else break}L.setBoundingBox(v);let q=L.getBarcodeColumnCount()+1;L.setDetectionResultColumn(0,A),L.setDetectionResultColumn(q,T);let te=A!=null;for(let ce=1;ce<=q;ce++){let ue=te?ce:q-ce;if(L.getDetectionResultColumn(ue)!==void 0)continue;let Ne;ue===0||ue===q?Ne=new ks(v,ue===0):Ne=new yn(v),L.setDetectionResultColumn(ue,Ne);let Te=-1,He=Te;for(let Ve=v.getMinY();Ve<=v.getMaxY();Ve++){if(Te=jt.getStartColumn(L,ue,Ve,te),Te<0||Te>v.getMaxX()){if(He===-1)continue;Te=He}let Ue=jt.detectCodeword(a,v.getMinX(),v.getMaxX(),te,Te,Ve,x,p);Ue!=null&&(Ne.setCodeword(Ve,Ue),He=Te,x=Math.min(x,Ue.getWidth()),p=Math.max(p,Ue.getWidth()))}}return jt.createDecoderResult(L)}static merge(a,s){if(a==null&&s==null)return null;let n=jt.getBarcodeMetadata(a,s);if(n==null)return null;let o=js.merge(jt.adjustBoundingBox(a),jt.adjustBoundingBox(s));return new As(n,o)}static adjustBoundingBox(a){if(a==null)return null;let s=a.getRowHeights();if(s==null)return null;let n=jt.getMax(s),o=0;for(let p of s)if(o+=n-p,p>0)break;let u=a.getCodewords();for(let p=0;o>0&&u[p]==null;p++)o--;let x=0;for(let p=s.length-1;p>=0&&(x+=n-s[p],!(s[p]>0));p--);for(let p=u.length-1;x>0&&u[p]==null;p--)x--;return a.getBoundingBox().addMissingRows(o,x,a.isLeft())}static getMax(a){let s=-1;for(let n of a)s=Math.max(s,n);return s}static getBarcodeMetadata(a,s){let n;if(a==null||(n=a.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let o;return s==null||(o=s.getBarcodeMetadata())==null?n:n.getColumnCount()!==o.getColumnCount()&&n.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&n.getRowCount()!==o.getRowCount()?null:n}static getRowIndicatorColumn(a,s,n,o,u,x){let p=new ks(s,o);for(let v=0;v<2;v++){let A=v===0?1:-1,T=Math.trunc(Math.trunc(n.getX()));for(let L=Math.trunc(Math.trunc(n.getY()));L<=s.getMaxY()&&L>=s.getMinY();L+=A){let q=jt.detectCodeword(a,0,a.getWidth(),o,T,L,u,x);q!=null&&(p.setCodeword(L,q),o?T=q.getStartX():T=q.getEndX())}}return p}static adjustCodewordCount(a,s){let n=s[0][1],o=n.getValue(),u=a.getBarcodeColumnCount()*a.getBarcodeRowCount()-jt.getNumberOfECCodeWords(a.getBarcodeECLevel());if(o.length===0){if(u<1||u>ft.MAX_CODEWORDS_IN_BARCODE)throw U.getNotFoundInstance();n.setValue(u)}else o[0]!==u&&n.setValue(u)}static createDecoderResult(a){let s=jt.createBarcodeMatrix(a);jt.adjustCodewordCount(a,s);let n=new Array,o=new Int32Array(a.getBarcodeRowCount()*a.getBarcodeColumnCount()),u=[],x=new Array;for(let v=0;v<a.getBarcodeRowCount();v++)for(let A=0;A<a.getBarcodeColumnCount();A++){let T=s[v][A+1].getValue(),L=v*a.getBarcodeColumnCount()+A;T.length===0?n.push(L):T.length===1?o[L]=T[0]:(x.push(L),u.push(T))}let p=new Array(u.length);for(let v=0;v<p.length;v++)p[v]=u[v];return jt.createDecoderResultFromAmbiguousValues(a.getBarcodeECLevel(),o,ft.toIntArray(n),ft.toIntArray(x),p)}static createDecoderResultFromAmbiguousValues(a,s,n,o,u){let x=new Int32Array(o.length),p=100;for(;p-- >0;){for(let v=0;v<x.length;v++)s[o[v]]=u[v][x[v]];try{return jt.decodeCodewords(s,a,n)}catch(v){if(!(v instanceof D))throw v}if(x.length===0)throw D.getChecksumInstance();for(let v=0;v<x.length;v++)if(x[v]<u[v].length-1){x[v]++;break}else if(x[v]=0,v===x.length-1)throw D.getChecksumInstance()}throw D.getChecksumInstance()}static createBarcodeMatrix(a){let s=Array.from({length:a.getBarcodeRowCount()},()=>new Array(a.getBarcodeColumnCount()+2));for(let o=0;o<s.length;o++)for(let u=0;u<s[o].length;u++)s[o][u]=new Fa;let n=0;for(let o of a.getDetectionResultColumns()){if(o!=null){for(let u of o.getCodewords())if(u!=null){let x=u.getRowNumber();if(x>=0){if(x>=s.length)continue;s[x][n].setValue(u.getValue())}}}n++}return s}static isValidBarcodeColumn(a,s){return s>=0&&s<=a.getBarcodeColumnCount()+1}static getStartColumn(a,s,n,o){let u=o?1:-1,x=null;if(jt.isValidBarcodeColumn(a,s-u)&&(x=a.getDetectionResultColumn(s-u).getCodeword(n)),x!=null)return o?x.getEndX():x.getStartX();if(x=a.getDetectionResultColumn(s).getCodewordNearby(n),x!=null)return o?x.getStartX():x.getEndX();if(jt.isValidBarcodeColumn(a,s-u)&&(x=a.getDetectionResultColumn(s-u).getCodewordNearby(n)),x!=null)return o?x.getEndX():x.getStartX();let p=0;for(;jt.isValidBarcodeColumn(a,s-u);){s-=u;for(let v of a.getDetectionResultColumn(s).getCodewords())if(v!=null)return(o?v.getEndX():v.getStartX())+u*p*(v.getEndX()-v.getStartX());p++}return o?a.getBoundingBox().getMinX():a.getBoundingBox().getMaxX()}static detectCodeword(a,s,n,o,u,x,p,v){u=jt.adjustCodewordStartColumn(a,s,n,o,u,x);let A=jt.getModuleBitCount(a,s,n,o,u,x);if(A==null)return null;let T,L=Me.sum(A);if(o)T=u+L;else{for(let ce=0;ce<A.length/2;ce++){let ue=A[ce];A[ce]=A[A.length-1-ce],A[A.length-1-ce]=ue}T=u,u=T-L}if(!jt.checkCodewordSkew(L,p,v))return null;let q=lr.getDecodedValue(A),te=ft.getCodeword(q);return te===-1?null:new ss(u,T,jt.getCodewordBucketNumber(q),te)}static getModuleBitCount(a,s,n,o,u,x){let p=u,v=new Int32Array(8),A=0,T=o?1:-1,L=o;for(;(o?p<n:p>=s)&&A<v.length;)a.get(p,x)===L?(v[A]++,p+=T):(A++,L=!L);return A===v.length||p===(o?n:s)&&A===v.length-1?v:null}static getNumberOfECCodeWords(a){return 2<<a}static adjustCodewordStartColumn(a,s,n,o,u,x){let p=u,v=o?-1:1;for(let A=0;A<2;A++){for(;(o?p>=s:p<n)&&o===a.get(p,x);){if(Math.abs(u-p)>jt.CODEWORD_SKEW_SIZE)return u;p+=v}v=-v,o=!o}return p}static checkCodewordSkew(a,s,n){return s-jt.CODEWORD_SKEW_SIZE<=a&&a<=n+jt.CODEWORD_SKEW_SIZE}static decodeCodewords(a,s,n){if(a.length===0)throw P.getFormatInstance();let o=1<<s+1,u=jt.correctErrors(a,n,o);jt.verifyCodewordCount(a,o);let x=De.decode(a,""+s);return x.setErrorsCorrected(u),x.setErasures(n.length),x}static correctErrors(a,s,n){if(s!=null&&s.length>n/2+jt.MAX_ERRORS||n<0||n>jt.MAX_EC_CODEWORDS)throw D.getChecksumInstance();return jt.errorCorrection.decode(a,n,s)}static verifyCodewordCount(a,s){if(a.length<4)throw P.getFormatInstance();let n=a[0];if(n>a.length)throw P.getFormatInstance();if(n===0)if(s<a.length)a[0]=a.length-s;else throw P.getFormatInstance()}static getBitCountForCodeword(a){let s=new Int32Array(8),n=0,o=s.length-1;for(;!((a&1)!==n&&(n=a&1,o--,o<0));)s[o]++,a>>=1;return s}static getCodewordBucketNumber(a){return a instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(a):this.getCodewordBucketNumber_number(a)}static getCodewordBucketNumber_number(a){return jt.getCodewordBucketNumber(jt.getBitCountForCodeword(a))}static getCodewordBucketNumber_Int32Array(a){return(a[0]-a[2]+a[4]-a[6]+9)%9}static toString(a){let s=new Cs;for(let n=0;n<a.length;n++){s.format("Row %2d: ",n);for(let o=0;o<a[n].length;o++){let u=a[n][o];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}jt.CODEWORD_SKEW_SIZE=2,jt.MAX_ERRORS=3,jt.MAX_EC_CODEWORDS=512,jt.errorCorrection=new rl;class qa{decode(a,s=null){let n=qa.decode(a,s,!1);if(n==null||n.length===0||n[0]==null)throw U.getNotFoundInstance();return n[0]}decodeMultiple(a,s=null){try{return qa.decode(a,s,!0)}catch(n){throw n instanceof P||n instanceof D?U.getNotFoundInstance():n}}static decode(a,s,n){const o=new Array,u=wt.detectMultiple(a,s,n);for(const x of u.getPoints()){const p=jt.decode(u.getBits(),x[4],x[5],x[6],x[7],qa.getMinCodewordWidth(x),qa.getMaxCodewordWidth(x)),v=new ve(p.getText(),p.getRawBytes(),void 0,x,ie.PDF_417);v.putMetadata(ye.ERROR_CORRECTION_LEVEL,p.getECLevel());const A=p.getOther();A!=null&&v.putMetadata(ye.PDF417_EXTRA_METADATA,A),o.push(v)}return o.map(x=>x)}static getMaxWidth(a,s){return a==null||s==null?0:Math.trunc(Math.abs(a.getX()-s.getX()))}static getMinWidth(a,s){return a==null||s==null?F.MAX_VALUE:Math.trunc(Math.abs(a.getX()-s.getX()))}static getMaxCodewordWidth(a){return Math.floor(Math.max(Math.max(qa.getMaxWidth(a[0],a[4]),qa.getMaxWidth(a[6],a[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.max(qa.getMaxWidth(a[1],a[5]),qa.getMaxWidth(a[7],a[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(a){return Math.floor(Math.min(Math.min(qa.getMinWidth(a[0],a[4]),qa.getMinWidth(a[6],a[2])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN),Math.min(qa.getMinWidth(a[1],a[5]),qa.getMinWidth(a[7],a[3])*ft.MODULES_IN_CODEWORD/ft.MODULES_IN_STOP_PATTERN)))}reset(){}}class sl extends b{}sl.kind="ReaderException";class Ko{constructor(a,s){this.verbose=a===!0,s&&this.setHints(s)}decode(a,s){return s&&this.setHints(s),this.decodeInternal(a)}decodeWithState(a){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(a)}setHints(a){this.hints=a;const s=!f(a)&&a.get($.TRY_HARDER)===!0,n=f(a)?null:a.get($.POSSIBLE_FORMATS),o=new Array;if(!f(n)){const u=n.some(x=>x===ie.UPC_A||x===ie.UPC_E||x===ie.EAN_13||x===ie.EAN_8||x===ie.CODABAR||x===ie.CODE_39||x===ie.CODE_93||x===ie.CODE_128||x===ie.ITF||x===ie.RSS_14||x===ie.RSS_EXPANDED);u&&!s&&o.push(new bs(a,this.verbose)),n.includes(ie.QR_CODE)&&o.push(new as),n.includes(ie.DATA_MATRIX)&&o.push(new Ir),n.includes(ie.AZTEC)&&o.push(new Tt),n.includes(ie.PDF_417)&&o.push(new qa),u&&s&&o.push(new bs(a,this.verbose))}o.length===0&&(s||o.push(new bs(a,this.verbose)),o.push(new as),o.push(new Ir),o.push(new Tt),o.push(new qa),s&&o.push(new bs(a,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const a of this.readers)a.reset()}decodeInternal(a){if(this.readers===null)throw new sl("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(a,this.hints)}catch(n){if(n instanceof sl)continue}throw new U("No MultiFormat Readers were able to detect the code.")}}class Fd extends xe{constructor(a=null,s=500){const n=new Ko;n.setHints(a),super(n,s)}decodeBitmap(a){return this.reader.decodeWithState(a)}}class Pd extends xe{constructor(a=500){super(new qa,a)}}class zd extends xe{constructor(a=500){super(new as,a)}}var nl;(function(O){O[O.ERROR_CORRECTION=0]="ERROR_CORRECTION",O[O.CHARACTER_SET=1]="CHARACTER_SET",O[O.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",O[O.MIN_SIZE=3]="MIN_SIZE",O[O.MAX_SIZE=4]="MAX_SIZE",O[O.MARGIN=5]="MARGIN",O[O.PDF417_COMPACT=6]="PDF417_COMPACT",O[O.PDF417_COMPACTION=7]="PDF417_COMPACTION",O[O.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",O[O.AZTEC_LAYERS=9]="AZTEC_LAYERS",O[O.QR_VERSION=10]="QR_VERSION"})(nl||(nl={}));var Ra=nl;class _i{constructor(a){this.field=a,this.cachedGenerators=[],this.cachedGenerators.push(new lt(a,Int32Array.from([1])))}buildGenerator(a){const s=this.cachedGenerators;if(a>=s.length){let n=s[s.length-1];const o=this.field;for(let u=s.length;u<=a;u++){const x=n.multiply(new lt(o,Int32Array.from([1,o.exp(u-1+o.getGeneratorBase())])));s.push(x),n=x}}return s[a]}encode(a,s){if(s===0)throw new E("No error correction bytes");const n=a.length-s;if(n<=0)throw new E("No data bytes provided");const o=this.buildGenerator(s),u=new Int32Array(n);_.arraycopy(a,0,u,0,n);let x=new lt(this.field,u);x=x.multiplyByMonomial(s,1);const v=x.divide(o)[1].getCoefficients(),A=s-v.length;for(let T=0;T<A;T++)a[n+T]=0;_.arraycopy(v,0,a,n+A,v.length)}}class ma{constructor(){}static applyMaskPenaltyRule1(a){return ma.applyMaskPenaltyRule1Internal(a,!0)+ma.applyMaskPenaltyRule1Internal(a,!1)}static applyMaskPenaltyRule2(a){let s=0;const n=a.getArray(),o=a.getWidth(),u=a.getHeight();for(let x=0;x<u-1;x++){const p=n[x];for(let v=0;v<o-1;v++){const A=p[v];A===p[v+1]&&A===n[x+1][v]&&A===n[x+1][v+1]&&s++}}return ma.N2*s}static applyMaskPenaltyRule3(a){let s=0;const n=a.getArray(),o=a.getWidth(),u=a.getHeight();for(let x=0;x<u;x++)for(let p=0;p<o;p++){const v=n[x];p+6<o&&v[p]===1&&v[p+1]===0&&v[p+2]===1&&v[p+3]===1&&v[p+4]===1&&v[p+5]===0&&v[p+6]===1&&(ma.isWhiteHorizontal(v,p-4,p)||ma.isWhiteHorizontal(v,p+7,p+11))&&s++,x+6<u&&n[x][p]===1&&n[x+1][p]===0&&n[x+2][p]===1&&n[x+3][p]===1&&n[x+4][p]===1&&n[x+5][p]===0&&n[x+6][p]===1&&(ma.isWhiteVertical(n,p,x-4,x)||ma.isWhiteVertical(n,p,x+7,x+11))&&s++}return s*ma.N3}static isWhiteHorizontal(a,s,n){s=Math.max(s,0),n=Math.min(n,a.length);for(let o=s;o<n;o++)if(a[o]===1)return!1;return!0}static isWhiteVertical(a,s,n,o){n=Math.max(n,0),o=Math.min(o,a.length);for(let u=n;u<o;u++)if(a[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(a){let s=0;const n=a.getArray(),o=a.getWidth(),u=a.getHeight();for(let v=0;v<u;v++){const A=n[v];for(let T=0;T<o;T++)A[T]===1&&s++}const x=a.getHeight()*a.getWidth();return Math.floor(Math.abs(s*2-x)*10/x)*ma.N4}static getDataMaskBit(a,s,n){let o,u;switch(a){case 0:o=n+s&1;break;case 1:o=n&1;break;case 2:o=s%3;break;case 3:o=(n+s)%3;break;case 4:o=Math.floor(n/2)+Math.floor(s/3)&1;break;case 5:u=n*s,o=(u&1)+u%3;break;case 6:u=n*s,o=(u&1)+u%3&1;break;case 7:u=n*s,o=u%3+(n+s&1)&1;break;default:throw new E("Invalid mask pattern: "+a)}return o===0}static applyMaskPenaltyRule1Internal(a,s){let n=0;const o=s?a.getHeight():a.getWidth(),u=s?a.getWidth():a.getHeight(),x=a.getArray();for(let p=0;p<o;p++){let v=0,A=-1;for(let T=0;T<u;T++){const L=s?x[p][T]:x[T][p];L===A?v++:(v>=5&&(n+=ma.N1+(v-5)),v=1,A=L)}v>=5&&(n+=ma.N1+(v-5))}return n}}ma.N1=3,ma.N2=3,ma.N3=40,ma.N4=10;class ll{constructor(a,s){this.width=a,this.height=s;const n=new Array(s);for(let o=0;o!==s;o++)n[o]=new Uint8Array(a);this.bytes=n}getHeight(){return this.height}getWidth(){return this.width}get(a,s){return this.bytes[s][a]}getArray(){return this.bytes}setNumber(a,s,n){this.bytes[s][a]=n}setBoolean(a,s,n){this.bytes[s][a]=n?1:0}clear(a){for(const s of this.bytes)z.fill(s,a)}equals(a){if(!(a instanceof ll))return!1;const s=a;if(this.width!==s.width||this.height!==s.height)return!1;for(let n=0,o=this.height;n<o;++n){const u=this.bytes[n],x=s.bytes[n];for(let p=0,v=this.width;p<v;++p)if(u[p]!==x[p])return!1}return!0}toString(){const a=new le;for(let s=0,n=this.height;s<n;++s){const o=this.bytes[s];for(let u=0,x=this.width;u<x;++u)switch(o[u]){case 0:a.append(" 0");break;case 1:a.append(" 1");break;default:a.append("  ");break}a.append(`
`)}return a.toString()}}class Xs{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const a=new le;return a.append(`<<
`),a.append(" mode: "),a.append(this.mode?this.mode.toString():"null"),a.append(`
 ecLevel: `),a.append(this.ecLevel?this.ecLevel.toString():"null"),a.append(`
 version: `),a.append(this.version?this.version.toString():"null"),a.append(`
 maskPattern: `),a.append(this.maskPattern.toString()),this.matrix?(a.append(`
 matrix:
`),a.append(this.matrix.toString())):a.append(`
 matrix: null
`),a.append(`>>
`),a.toString()}setMode(a){this.mode=a}setECLevel(a){this.ecLevel=a}setVersion(a){this.version=a}setMaskPattern(a){this.maskPattern=a}setMatrix(a){this.matrix=a}static isValidMaskPattern(a){return a>=0&&a<Xs.NUM_MASK_PATTERNS}}Xs.NUM_MASK_PATTERNS=8;class Kt extends b{}Kt.kind="WriterException";class ht{constructor(){}static clearMatrix(a){a.clear(255)}static buildMatrix(a,s,n,o,u){ht.clearMatrix(u),ht.embedBasicPatterns(n,u),ht.embedTypeInfo(s,o,u),ht.maybeEmbedVersionInfo(n,u),ht.embedDataBits(a,o,u)}static embedBasicPatterns(a,s){ht.embedPositionDetectionPatternsAndSeparators(s),ht.embedDarkDotAtLeftBottomCorner(s),ht.maybeEmbedPositionAdjustmentPatterns(a,s),ht.embedTimingPatterns(s)}static embedTypeInfo(a,s,n){const o=new V;ht.makeTypeInfoBits(a,s,o);for(let u=0,x=o.getSize();u<x;++u){const p=o.get(o.getSize()-1-u),v=ht.TYPE_INFO_COORDINATES[u],A=v[0],T=v[1];if(n.setBoolean(A,T,p),u<8){const L=n.getWidth()-u-1;n.setBoolean(L,8,p)}else{const q=n.getHeight()-7+(u-8);n.setBoolean(8,q,p)}}}static maybeEmbedVersionInfo(a,s){if(a.getVersionNumber()<7)return;const n=new V;ht.makeVersionInfoBits(a,n);let o=17;for(let u=0;u<6;++u)for(let x=0;x<3;++x){const p=n.get(o);o--,s.setBoolean(u,s.getHeight()-11+x,p),s.setBoolean(s.getHeight()-11+x,u,p)}}static embedDataBits(a,s,n){let o=0,u=-1,x=n.getWidth()-1,p=n.getHeight()-1;for(;x>0;){for(x===6&&(x-=1);p>=0&&p<n.getHeight();){for(let v=0;v<2;++v){const A=x-v;if(!ht.isEmpty(n.get(A,p)))continue;let T;o<a.getSize()?(T=a.get(o),++o):T=!1,s!==255&&ma.getDataMaskBit(s,A,p)&&(T=!T),n.setBoolean(A,p,T)}p+=u}u=-u,p+=u,x-=2}if(o!==a.getSize())throw new Kt("Not all bits consumed: "+o+"/"+a.getSize())}static findMSBSet(a){return 32-F.numberOfLeadingZeros(a)}static calculateBCHCode(a,s){if(s===0)throw new E("0 polynomial");const n=ht.findMSBSet(s);for(a<<=n-1;ht.findMSBSet(a)>=n;)a^=s<<ht.findMSBSet(a)-n;return a}static makeTypeInfoBits(a,s,n){if(!Xs.isValidMaskPattern(s))throw new Kt("Invalid mask pattern");const o=a.getBits()<<3|s;n.appendBits(o,5);const u=ht.calculateBCHCode(o,ht.TYPE_INFO_POLY);n.appendBits(u,10);const x=new V;if(x.appendBits(ht.TYPE_INFO_MASK_PATTERN,15),n.xor(x),n.getSize()!==15)throw new Kt("should not happen but we got: "+n.getSize())}static makeVersionInfoBits(a,s){s.appendBits(a.getVersionNumber(),6);const n=ht.calculateBCHCode(a.getVersionNumber(),ht.VERSION_INFO_POLY);if(s.appendBits(n,12),s.getSize()!==18)throw new Kt("should not happen but we got: "+s.getSize())}static isEmpty(a){return a===255}static embedTimingPatterns(a){for(let s=8;s<a.getWidth()-8;++s){const n=(s+1)%2;ht.isEmpty(a.get(s,6))&&a.setNumber(s,6,n),ht.isEmpty(a.get(6,s))&&a.setNumber(6,s,n)}}static embedDarkDotAtLeftBottomCorner(a){if(a.get(8,a.getHeight()-8)===0)throw new Kt;a.setNumber(8,a.getHeight()-8,1)}static embedHorizontalSeparationPattern(a,s,n){for(let o=0;o<8;++o){if(!ht.isEmpty(n.get(a+o,s)))throw new Kt;n.setNumber(a+o,s,0)}}static embedVerticalSeparationPattern(a,s,n){for(let o=0;o<7;++o){if(!ht.isEmpty(n.get(a,s+o)))throw new Kt;n.setNumber(a,s+o,0)}}static embedPositionAdjustmentPattern(a,s,n){for(let o=0;o<5;++o){const u=ht.POSITION_ADJUSTMENT_PATTERN[o];for(let x=0;x<5;++x)n.setNumber(a+x,s+o,u[x])}}static embedPositionDetectionPattern(a,s,n){for(let o=0;o<7;++o){const u=ht.POSITION_DETECTION_PATTERN[o];for(let x=0;x<7;++x)n.setNumber(a+x,s+o,u[x])}}static embedPositionDetectionPatternsAndSeparators(a){const s=ht.POSITION_DETECTION_PATTERN[0].length;ht.embedPositionDetectionPattern(0,0,a),ht.embedPositionDetectionPattern(a.getWidth()-s,0,a),ht.embedPositionDetectionPattern(0,a.getWidth()-s,a);const n=8;ht.embedHorizontalSeparationPattern(0,n-1,a),ht.embedHorizontalSeparationPattern(a.getWidth()-n,n-1,a),ht.embedHorizontalSeparationPattern(0,a.getWidth()-n,a);const o=7;ht.embedVerticalSeparationPattern(o,0,a),ht.embedVerticalSeparationPattern(a.getHeight()-o-1,0,a),ht.embedVerticalSeparationPattern(o,a.getHeight()-o,a)}static maybeEmbedPositionAdjustmentPatterns(a,s){if(a.getVersionNumber()<2)return;const n=a.getVersionNumber()-1,o=ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n];for(let u=0,x=o.length;u!==x;u++){const p=o[u];if(p>=0)for(let v=0;v!==x;v++){const A=o[v];A>=0&&ht.isEmpty(s.get(A,p))&&ht.embedPositionAdjustmentPattern(A-2,p-2,s)}}}}ht.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ht.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ht.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ht.VERSION_INFO_POLY=7973,ht.TYPE_INFO_POLY=1335,ht.TYPE_INFO_MASK_PATTERN=21522;class Ud{constructor(a,s){this.dataBytes=a,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class oa{constructor(){}static calculateMaskPenalty(a){return ma.applyMaskPenaltyRule1(a)+ma.applyMaskPenaltyRule2(a)+ma.applyMaskPenaltyRule3(a)+ma.applyMaskPenaltyRule4(a)}static encode(a,s,n=null){let o=oa.DEFAULT_BYTE_MODE_ENCODING;const u=n!==null&&n.get(Ra.CHARACTER_SET)!==void 0;u&&(o=n.get(Ra.CHARACTER_SET).toString());const x=this.chooseMode(a,o),p=new V;if(x===ot.BYTE&&(u||oa.DEFAULT_BYTE_MODE_ENCODING!==o)){const Ve=Z.getCharacterSetECIByName(o);Ve!==void 0&&this.appendECI(Ve,p)}this.appendModeInfo(x,p);const v=new V;this.appendBytes(a,x,v,o);let A;if(n!==null&&n.get(Ra.QR_VERSION)!==void 0){const Ve=Number.parseInt(n.get(Ra.QR_VERSION).toString(),10);A=it.getVersionForNumber(Ve);const Ue=this.calculateBitsNeeded(x,p,v,A);if(!this.willFit(Ue,A,s))throw new Kt("Data too big for requested version")}else A=this.recommendVersion(s,x,p,v);const T=new V;T.appendBitArray(p);const L=x===ot.BYTE?v.getSizeInBytes():a.length;this.appendLengthInfo(L,A,x,T),T.appendBitArray(v);const q=A.getECBlocksForLevel(s),te=A.getTotalCodewords()-q.getTotalECCodewords();this.terminateBits(te,T);const ce=this.interleaveWithECBytes(T,A.getTotalCodewords(),te,q.getNumBlocks()),ue=new Xs;ue.setECLevel(s),ue.setMode(x),ue.setVersion(A);const Ne=A.getDimensionForVersion(),Te=new ll(Ne,Ne),He=this.chooseMaskPattern(ce,s,A,Te);return ue.setMaskPattern(He),ht.buildMatrix(ce,s,A,He,Te),ue.setMatrix(Te),ue}static recommendVersion(a,s,n,o){const u=this.calculateBitsNeeded(s,n,o,it.getVersionForNumber(1)),x=this.chooseVersion(u,a),p=this.calculateBitsNeeded(s,n,o,x);return this.chooseVersion(p,a)}static calculateBitsNeeded(a,s,n,o){return s.getSize()+a.getCharacterCountBits(o)+n.getSize()}static getAlphanumericCode(a){return a<oa.ALPHANUMERIC_TABLE.length?oa.ALPHANUMERIC_TABLE[a]:-1}static chooseMode(a,s=null){if(Z.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(a))return ot.KANJI;let n=!1,o=!1;for(let u=0,x=a.length;u<x;++u){const p=a.charAt(u);if(oa.isDigit(p))n=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)o=!0;else return ot.BYTE}return o?ot.ALPHANUMERIC:n?ot.NUMERIC:ot.BYTE}static isOnlyDoubleByteKanji(a){let s;try{s=he.encode(a,Z.SJIS)}catch{return!1}const n=s.length;if(n%2!==0)return!1;for(let o=0;o<n;o+=2){const u=s[o]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(a,s,n,o){let u=Number.MAX_SAFE_INTEGER,x=-1;for(let p=0;p<Xs.NUM_MASK_PATTERNS;p++){ht.buildMatrix(a,s,n,p,o);let v=this.calculateMaskPenalty(o);v<u&&(u=v,x=p)}return x}static chooseVersion(a,s){for(let n=1;n<=40;n++){const o=it.getVersionForNumber(n);if(oa.willFit(a,o,s))return o}throw new Kt("Data too big")}static willFit(a,s,n){const o=s.getTotalCodewords(),x=s.getECBlocksForLevel(n).getTotalECCodewords(),p=o-x,v=(a+7)/8;return p>=v}static terminateBits(a,s){const n=a*8;if(s.getSize()>n)throw new Kt("data bits cannot fit in the QR Code"+s.getSize()+" > "+n);for(let x=0;x<4&&s.getSize()<n;++x)s.appendBit(!1);const o=s.getSize()&7;if(o>0)for(let x=o;x<8;x++)s.appendBit(!1);const u=a-s.getSizeInBytes();for(let x=0;x<u;++x)s.appendBits((x&1)===0?236:17,8);if(s.getSize()!==n)throw new Kt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(a,s,n,o,u,x){if(o>=n)throw new Kt("Block ID too large");const p=a%n,v=n-p,A=Math.floor(a/n),T=A+1,L=Math.floor(s/n),q=L+1,te=A-L,ce=T-q;if(te!==ce)throw new Kt("EC bytes mismatch");if(n!==v+p)throw new Kt("RS blocks mismatch");if(a!==(L+te)*v+(q+ce)*p)throw new Kt("Total bytes mismatch");o<v?(u[0]=L,x[0]=te):(u[0]=q,x[0]=ce)}static interleaveWithECBytes(a,s,n,o){if(a.getSizeInBytes()!==n)throw new Kt("Number of bits and data bytes does not match");let u=0,x=0,p=0;const v=new Array;for(let T=0;T<o;++T){const L=new Int32Array(1),q=new Int32Array(1);oa.getNumDataBytesAndNumECBytesForBlockID(s,n,o,T,L,q);const te=L[0],ce=new Uint8Array(te);a.toBytes(8*u,ce,0,te);const ue=oa.generateECBytes(ce,q[0]);v.push(new Ud(ce,ue)),x=Math.max(x,te),p=Math.max(p,ue.length),u+=L[0]}if(n!==u)throw new Kt("Data bytes does not match offset");const A=new V;for(let T=0;T<x;++T)for(const L of v){const q=L.getDataBytes();T<q.length&&A.appendBits(q[T],8)}for(let T=0;T<p;++T)for(const L of v){const q=L.getErrorCorrectionBytes();T<q.length&&A.appendBits(q[T],8)}if(s!==A.getSizeInBytes())throw new Kt("Interleaving error: "+s+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(a,s){const n=a.length,o=new Int32Array(n+s);for(let x=0;x<n;x++)o[x]=a[x]&255;new _i(Je.QR_CODE_FIELD_256).encode(o,s);const u=new Uint8Array(s);for(let x=0;x<s;x++)u[x]=o[n+x];return u}static appendModeInfo(a,s){s.appendBits(a.getBits(),4)}static appendLengthInfo(a,s,n,o){const u=n.getCharacterCountBits(s);if(a>=1<<u)throw new Kt(a+" is bigger than "+((1<<u)-1));o.appendBits(a,u)}static appendBytes(a,s,n,o){switch(s){case ot.NUMERIC:oa.appendNumericBytes(a,n);break;case ot.ALPHANUMERIC:oa.appendAlphanumericBytes(a,n);break;case ot.BYTE:oa.append8BitBytes(a,n,o);break;case ot.KANJI:oa.appendKanjiBytes(a,n);break;default:throw new Kt("Invalid mode: "+s)}}static getDigit(a){return a.charCodeAt(0)-48}static isDigit(a){const s=oa.getDigit(a);return s>=0&&s<=9}static appendNumericBytes(a,s){const n=a.length;let o=0;for(;o<n;){const u=oa.getDigit(a.charAt(o));if(o+2<n){const x=oa.getDigit(a.charAt(o+1)),p=oa.getDigit(a.charAt(o+2));s.appendBits(u*100+x*10+p,10),o+=3}else if(o+1<n){const x=oa.getDigit(a.charAt(o+1));s.appendBits(u*10+x,7),o+=2}else s.appendBits(u,4),o++}}static appendAlphanumericBytes(a,s){const n=a.length;let o=0;for(;o<n;){const u=oa.getAlphanumericCode(a.charCodeAt(o));if(u===-1)throw new Kt;if(o+1<n){const x=oa.getAlphanumericCode(a.charCodeAt(o+1));if(x===-1)throw new Kt;s.appendBits(u*45+x,11),o+=2}else s.appendBits(u,6),o++}}static append8BitBytes(a,s,n){let o;try{o=he.encode(a,n)}catch(u){throw new Kt(u)}for(let u=0,x=o.length;u!==x;u++){const p=o[u];s.appendBits(p,8)}}static appendKanjiBytes(a,s){let n;try{n=he.encode(a,Z.SJIS)}catch(u){throw new Kt(u)}const o=n.length;for(let u=0;u<o;u+=2){const x=n[u]&255,p=n[u+1]&255,v=x<<8&4294967295|p;let A=-1;if(v>=33088&&v<=40956?A=v-33088:v>=57408&&v<=60351&&(A=v-49472),A===-1)throw new Kt("Invalid byte sequence");const T=(A>>8)*192+(A&255);s.appendBits(T,13)}}static appendECI(a,s){s.appendBits(ot.ECI.getBits(),4),s.appendBits(a.getValue(),8)}}oa.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),oa.DEFAULT_BYTE_MODE_ENCODING=Z.UTF8.getName();class Zs{write(a,s,n,o=null){if(a.length===0)throw new E("Found empty contents");if(s<0||n<0)throw new E("Requested dimensions are too small: "+s+"x"+n);let u=Xt.L,x=Zs.QUIET_ZONE_SIZE;o!==null&&(o.get(Ra.ERROR_CORRECTION)!==void 0&&(u=Xt.fromString(o.get(Ra.ERROR_CORRECTION).toString())),o.get(Ra.MARGIN)!==void 0&&(x=Number.parseInt(o.get(Ra.MARGIN).toString(),10)));const p=oa.encode(a,u,o);return this.renderResult(p,s,n,x)}writeToDom(a,s,n,o,u=null){typeof a=="string"&&(a=document.querySelector(a));const x=this.write(s,n,o,u);a&&a.appendChild(x)}renderResult(a,s,n,o){const u=a.getMatrix();if(u===null)throw new Ye;const x=u.getWidth(),p=u.getHeight(),v=x+o*2,A=p+o*2,T=Math.max(s,v),L=Math.max(n,A),q=Math.min(Math.floor(T/v),Math.floor(L/A)),te=Math.floor((T-x*q)/2),ce=Math.floor((L-p*q)/2),ue=this.createSVGElement(T,L);for(let Ne=0,Te=ce;Ne<p;Ne++,Te+=q)for(let He=0,Ve=te;He<x;He++,Ve+=q)if(u.get(He,Ne)===1){const Ue=this.createSvgRectElement(Ve,Te,q,q);ue.appendChild(Ue)}return ue}createSVGElement(a,s){const n=document.createElementNS(Zs.SVG_NS,"svg");return n.setAttributeNS(null,"height",a.toString()),n.setAttributeNS(null,"width",s.toString()),n}createSvgRectElement(a,s,n,o){const u=document.createElementNS(Zs.SVG_NS,"rect");return u.setAttributeNS(null,"x",a.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",n.toString()),u.setAttributeNS(null,"width",o.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Zs.QUIET_ZONE_SIZE=4,Zs.SVG_NS="http://www.w3.org/2000/svg";class vn{encode(a,s,n,o,u){if(a.length===0)throw new E("Found empty contents");if(s!==ie.QR_CODE)throw new E("Can only encode QR_CODE, but got "+s);if(n<0||o<0)throw new E(`Requested dimensions are too small: ${n}x${o}`);let x=Xt.L,p=vn.QUIET_ZONE_SIZE;u!==null&&(u.get(Ra.ERROR_CORRECTION)!==void 0&&(x=Xt.fromString(u.get(Ra.ERROR_CORRECTION).toString())),u.get(Ra.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Ra.MARGIN).toString(),10)));const v=oa.encode(a,x,u);return vn.renderResult(v,n,o,p)}static renderResult(a,s,n,o){const u=a.getMatrix();if(u===null)throw new Ye;const x=u.getWidth(),p=u.getHeight(),v=x+o*2,A=p+o*2,T=Math.max(s,v),L=Math.max(n,A),q=Math.min(Math.floor(T/v),Math.floor(L/A)),te=Math.floor((T-x*q)/2),ce=Math.floor((L-p*q)/2),ue=new W(T,L);for(let Ne=0,Te=ce;Ne<p;Ne++,Te+=q)for(let He=0,Ve=te;He<x;He++,Ve+=q)u.get(He,Ne)===1&&ue.setRegion(Ve,Te,q,q);return ue}}vn.QUIET_ZONE_SIZE=4;class Hd{encode(a,s,n,o,u){let x;switch(s){case ie.QR_CODE:x=new vn;break;default:throw new E("No encoder available for format "+s)}return x.encode(a,s,n,o,u)}}class Yr extends oe{constructor(a,s,n,o,u,x,p,v){if(super(x,p),this.yuvData=a,this.dataWidth=s,this.dataHeight=n,this.left=o,this.top=u,o+x>s||u+p>n)throw new E("Crop rectangle does not fit within image data.");v&&this.reverseHorizontal(x,p)}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const n=this.getWidth();(s==null||s.length<n)&&(s=new Uint8ClampedArray(n));const o=(a+this.top)*this.dataWidth+this.left;return _.arraycopy(this.yuvData,o,s,0,n),s}getMatrix(){const a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.yuvData;const n=a*s,o=new Uint8ClampedArray(n);let u=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return _.arraycopy(this.yuvData,u,o,0,n),o;for(let x=0;x<s;x++){const p=x*a;_.arraycopy(this.yuvData,u,o,p,a),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(a,s,n,o){return new Yr(this.yuvData,this.dataWidth,this.dataHeight,this.left+a,this.top+s,n,o,!1)}renderThumbnail(){const a=this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR,n=new Int32Array(a*s),o=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let x=0;x<s;x++){const p=x*a;for(let v=0;v<a;v++){const A=o[u+v*Yr.THUMBNAIL_SCALE_FACTOR]&255;n[p+v]=4278190080|A*65793}u+=this.dataWidth*Yr.THUMBNAIL_SCALE_FACTOR}return n}getThumbnailWidth(){return this.getWidth()/Yr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Yr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(a,s){const n=this.yuvData;for(let o=0,u=this.top*this.dataWidth+this.left;o<s;o++,u+=this.dataWidth){const x=u+a/2;for(let p=u,v=u+a-1;p<x;p++,v--){const A=n[p];n[p]=n[v],n[v]=A}}}invert(){return new we(this)}}Yr.THUMBNAIL_SCALE_FACTOR=2;class il extends oe{constructor(a,s,n,o,u,x,p){if(super(s,n),this.dataWidth=o,this.dataHeight=u,this.left=x,this.top=p,a.BYTES_PER_ELEMENT===4){const v=s*n,A=new Uint8ClampedArray(v);for(let T=0;T<v;T++){const L=a[T],q=L>>16&255,te=L>>7&510,ce=L&255;A[T]=(q+te+ce)/4&255}this.luminances=A}else this.luminances=a;if(o===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=n),x===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+n>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(a,s){if(a<0||a>=this.getHeight())throw new E("Requested row is outside the image: "+a);const n=this.getWidth();(s==null||s.length<n)&&(s=new Uint8ClampedArray(n));const o=(a+this.top)*this.dataWidth+this.left;return _.arraycopy(this.luminances,o,s,0,n),s}getMatrix(){const a=this.getWidth(),s=this.getHeight();if(a===this.dataWidth&&s===this.dataHeight)return this.luminances;const n=a*s,o=new Uint8ClampedArray(n);let u=this.top*this.dataWidth+this.left;if(a===this.dataWidth)return _.arraycopy(this.luminances,u,o,0,n),o;for(let x=0;x<s;x++){const p=x*a;_.arraycopy(this.luminances,u,o,p,a),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(a,s,n,o){return new il(this.luminances,n,o,this.dataWidth,this.dataHeight,this.left+a,this.top+s)}invert(){return new we(this)}}class Nn extends Z{static forName(a){return this.getCharacterSetECIByName(a)}}class Mi{}Mi.ISO_8859_1=Z.ISO8859_1;class Di{isCompact(){return this.compact}setCompact(a){this.compact=a}getSize(){return this.size}setSize(a){this.size=a}getLayers(){return this.layers}setLayers(a){this.layers=a}getCodeWords(){return this.codeWords}setCodeWords(a){this.codeWords=a}getMatrix(){return this.matrix}setMatrix(a){this.matrix=a}}class Ri{static singletonList(a){return[a]}static min(a,s){return a.sort(s)[0]}}class Jo{constructor(a){this.previous=a}getPrevious(){return this.previous}}class Qs extends Jo{constructor(a,s,n){super(a),this.value=s,this.bitCount=n}appendTo(a,s){a.appendBits(this.value,this.bitCount)}add(a,s){return new Qs(this,a,s)}addBinaryShift(a,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Qs(this,a,s)}toString(){let a=this.value&(1<<this.bitCount)-1;return a|=1<<this.bitCount,"<"+F.toBinaryString(a|1<<this.bitCount).substring(1)+">"}}class Hl extends Qs{constructor(a,s,n){super(a,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=n}appendTo(a,s){for(let n=0;n<this.binaryShiftByteCount;n++)(n===0||n===31&&this.binaryShiftByteCount<=62)&&(a.appendBits(31,5),this.binaryShiftByteCount>62?a.appendBits(this.binaryShiftByteCount-31,16):n===0?a.appendBits(Math.min(this.binaryShiftByteCount,31),5):a.appendBits(this.binaryShiftByteCount-31,5)),a.appendBits(s[this.binaryShiftStart+n],8)}addBinaryShift(a,s){return new Hl(this,a,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function jn(O,a,s){return new Hl(O,a,s)}function ol(O,a,s){return new Qs(O,a,s)}const Vd=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Es=0,cl=1,xr=2,Cn=3,ir=4,Gd=new Qs(null,0,0),kn=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function ec(O){for(let a of O)z.fill(a,-1);return O[Es][ir]=0,O[cl][ir]=0,O[cl][Es]=28,O[Cn][ir]=0,O[xr][ir]=0,O[xr][Es]=15,O}const Ii=ec(z.createInt32Array(6,6));class kr{constructor(a,s,n,o){this.token=a,this.mode=s,this.binaryShiftByteCount=n,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(a,s){let n=this.bitCount,o=this.token;if(a!==this.mode){let x=kn[this.mode][a];o=ol(o,x&65535,x>>16),n+=x>>16}let u=a===xr?4:5;return o=ol(o,s,u),new kr(o,a,0,n+u)}shiftAndAppend(a,s){let n=this.token,o=this.mode===xr?4:5;return n=ol(n,Ii[this.mode][a],o),n=ol(n,s,5),new kr(n,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(a){let s=this.token,n=this.mode,o=this.bitCount;if(this.mode===ir||this.mode===xr){let p=kn[n][Es];s=ol(s,p&65535,p>>16),o+=p>>16,n=Es}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,x=new kr(s,n,this.binaryShiftByteCount+1,o+u);return x.binaryShiftByteCount===2078&&(x=x.endBinaryShift(a+1)),x}endBinaryShift(a){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=jn(s,a-this.binaryShiftByteCount,this.binaryShiftByteCount),new kr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(a){let s=this.bitCount+(kn[this.mode][a.mode]>>16);return this.binaryShiftByteCount<a.binaryShiftByteCount?s+=kr.calculateBinaryShiftCost(a)-kr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>a.binaryShiftByteCount&&a.binaryShiftByteCount>0&&(s+=10),s<=a.bitCount}toBitArray(a){let s=[];for(let o=this.endBinaryShift(a.length).token;o!==null;o=o.getPrevious())s.unshift(o);let n=new V;for(const o of s)o.appendTo(n,a);return n}toString(){return re.format("%s bits=%d bytes=%d",Vd[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(a){return a.binaryShiftByteCount>62?21:a.binaryShiftByteCount>31?20:a.binaryShiftByteCount>0?10:0}}kr.INITIAL_STATE=new kr(Gd,Es,0,0);function Oi(O){const a=re.getCharCode(" "),s=re.getCharCode("."),n=re.getCharCode(",");O[Es][a]=1;const o=re.getCharCode("Z"),u=re.getCharCode("A");for(let q=u;q<=o;q++)O[Es][q]=q-u+2;O[cl][a]=1;const x=re.getCharCode("z"),p=re.getCharCode("a");for(let q=p;q<=x;q++)O[cl][q]=q-p+2;O[xr][a]=1;const v=re.getCharCode("9"),A=re.getCharCode("0");for(let q=A;q<=v;q++)O[xr][q]=q-A+2;O[xr][n]=12,O[xr][s]=13;const T=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let q=0;q<T.length;q++)O[Cn][re.getCharCode(T[q])]=q;const L=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let q=0;q<L.length;q++)re.getCharCode(L[q])>0&&(O[ir][re.getCharCode(L[q])]=q);return O}const Vl=Oi(z.createInt32Array(5,256));class An{constructor(a){this.text=a}encode(){const a=re.getCharCode(" "),s=re.getCharCode(`
`);let n=Ri.singletonList(kr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let x,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case re.getCharCode("\r"):x=p===s?2:0;break;case re.getCharCode("."):x=p===a?3:0;break;case re.getCharCode(","):x=p===a?4:0;break;case re.getCharCode(":"):x=p===a?5:0;break;default:x=0}x>0?(n=An.updateStateListForPair(n,u,x),u++):n=this.updateStateListForChar(n,u)}return Ri.min(n,(u,x)=>u.getBitCount()-x.getBitCount()).toBitArray(this.text)}updateStateListForChar(a,s){const n=[];for(let o of a)this.updateStateForChar(o,s,n);return An.simplifyStates(n)}updateStateForChar(a,s,n){let o=this.text[s]&255,u=Vl[a.getMode()][o]>0,x=null;for(let p=0;p<=ir;p++){let v=Vl[p][o];if(v>0){if(x==null&&(x=a.endBinaryShift(s)),!u||p===a.getMode()||p===xr){const A=x.latchAndAppend(p,v);n.push(A)}if(!u&&Ii[a.getMode()][p]>=0){const A=x.shiftAndAppend(p,v);n.push(A)}}}if(a.getBinaryShiftByteCount()>0||Vl[a.getMode()][o]===0){let p=a.addBinaryShiftChar(s);n.push(p)}}static updateStateListForPair(a,s,n){const o=[];for(let u of a)this.updateStateForPair(u,s,n,o);return this.simplifyStates(o)}static updateStateForPair(a,s,n,o){let u=a.endBinaryShift(s);if(o.push(u.latchAndAppend(ir,n)),a.getMode()!==ir&&o.push(u.shiftAndAppend(ir,n)),n===3||n===4){let x=u.latchAndAppend(xr,16-n).latchAndAppend(xr,1);o.push(x)}if(a.getBinaryShiftByteCount()>0){let x=a.addBinaryShiftChar(s).addBinaryShiftChar(s+1);o.push(x)}}static simplifyStates(a){let s=[];for(const n of a){let o=!0;for(const u of s){if(u.isBetterThanOrEqualTo(n)){o=!1;break}n.isBetterThanOrEqualTo(u)&&(s=s.filter(x=>x!==u))}o&&s.push(n)}return s}}class Ot{constructor(){}static encodeBytes(a){return Ot.encode(a,Ot.DEFAULT_EC_PERCENT,Ot.DEFAULT_AZTEC_LAYERS)}static encode(a,s,n){let o=new An(a).encode(),u=F.truncDivision(o.getSize()*s,100)+11,x=o.getSize()+u,p,v,A,T,L;if(n!==Ot.DEFAULT_AZTEC_LAYERS){if(p=n<0,v=Math.abs(n),v>(p?Ot.MAX_NB_BITS_COMPACT:Ot.MAX_NB_BITS))throw new E(re.format("Illegal value %s for layers",n));A=Ot.totalBitsInLayer(v,p),T=Ot.WORD_SIZE[v];let Ue=A-A%T;if(L=Ot.stuffBits(o,T),L.getSize()+u>Ue)throw new E("Data to large for user specified layer");if(p&&L.getSize()>T*64)throw new E("Data to large for user specified layer")}else{T=0,L=null;for(let Ue=0;;Ue++){if(Ue>Ot.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(p=Ue<=3,v=p?Ue+1:Ue,A=Ot.totalBitsInLayer(v,p),x>A)continue;(L==null||T!==Ot.WORD_SIZE[v])&&(T=Ot.WORD_SIZE[v],L=Ot.stuffBits(o,T));let vt=A-A%T;if(!(p&&L.getSize()>T*64)&&L.getSize()+u<=vt)break}}let q=Ot.generateCheckWords(L,A,T),te=L.getSize()/T,ce=Ot.generateModeMessage(p,v,te),ue=(p?11:14)+v*4,Ne=new Int32Array(ue),Te;if(p){Te=ue;for(let Ue=0;Ue<Ne.length;Ue++)Ne[Ue]=Ue}else{Te=ue+1+2*F.truncDivision(F.truncDivision(ue,2)-1,15);let Ue=F.truncDivision(ue,2),vt=F.truncDivision(Te,2);for(let bt=0;bt<Ue;bt++){let tr=bt+F.truncDivision(bt,15);Ne[Ue-bt-1]=vt-tr-1,Ne[Ue+bt]=vt+tr+1}}let He=new W(Te);for(let Ue=0,vt=0;Ue<v;Ue++){let bt=(v-Ue)*4+(p?9:12);for(let tr=0;tr<bt;tr++){let Ar=tr*2;for(let or=0;or<2;or++)q.get(vt+Ar+or)&&He.set(Ne[Ue*2+or],Ne[Ue*2+tr]),q.get(vt+bt*2+Ar+or)&&He.set(Ne[Ue*2+tr],Ne[ue-1-Ue*2-or]),q.get(vt+bt*4+Ar+or)&&He.set(Ne[ue-1-Ue*2-or],Ne[ue-1-Ue*2-tr]),q.get(vt+bt*6+Ar+or)&&He.set(Ne[ue-1-Ue*2-tr],Ne[Ue*2+or])}vt+=bt*8}if(Ot.drawModeMessage(He,p,Te,ce),p)Ot.drawBullsEye(He,F.truncDivision(Te,2),5);else{Ot.drawBullsEye(He,F.truncDivision(Te,2),7);for(let Ue=0,vt=0;Ue<F.truncDivision(ue,2)-1;Ue+=15,vt+=16)for(let bt=F.truncDivision(Te,2)&1;bt<Te;bt+=2)He.set(F.truncDivision(Te,2)-vt,bt),He.set(F.truncDivision(Te,2)+vt,bt),He.set(bt,F.truncDivision(Te,2)-vt),He.set(bt,F.truncDivision(Te,2)+vt)}let Ve=new Di;return Ve.setCompact(p),Ve.setSize(Te),Ve.setLayers(v),Ve.setCodeWords(te),Ve.setMatrix(He),Ve}static drawBullsEye(a,s,n){for(let o=0;o<n;o+=2)for(let u=s-o;u<=s+o;u++)a.set(u,s-o),a.set(u,s+o),a.set(s-o,u),a.set(s+o,u);a.set(s-n,s-n),a.set(s-n+1,s-n),a.set(s-n,s-n+1),a.set(s+n,s-n),a.set(s+n,s-n+1),a.set(s+n,s+n-1)}static generateModeMessage(a,s,n){let o=new V;return a?(o.appendBits(s-1,2),o.appendBits(n-1,6),o=Ot.generateCheckWords(o,28,4)):(o.appendBits(s-1,5),o.appendBits(n-1,11),o=Ot.generateCheckWords(o,40,4)),o}static drawModeMessage(a,s,n,o){let u=F.truncDivision(n,2);if(s)for(let x=0;x<7;x++){let p=u-3+x;o.get(x)&&a.set(p,u-5),o.get(x+7)&&a.set(u+5,p),o.get(20-x)&&a.set(p,u+5),o.get(27-x)&&a.set(u-5,p)}else for(let x=0;x<10;x++){let p=u-5+x+F.truncDivision(x,5);o.get(x)&&a.set(p,u-7),o.get(x+10)&&a.set(u+7,p),o.get(29-x)&&a.set(p,u+7),o.get(39-x)&&a.set(u-7,p)}}static generateCheckWords(a,s,n){let o=a.getSize()/n,u=new _i(Ot.getGF(n)),x=F.truncDivision(s,n),p=Ot.bitsToWords(a,n,x);u.encode(p,x-o);let v=s%n,A=new V;A.appendBits(0,v);for(const T of Array.from(p))A.appendBits(T,n);return A}static bitsToWords(a,s,n){let o=new Int32Array(n),u,x;for(u=0,x=a.getSize()/s;u<x;u++){let p=0;for(let v=0;v<s;v++)p|=a.get(u*s+v)?1<<s-v-1:0;o[u]=p}return o}static getGF(a){switch(a){case 4:return Je.AZTEC_PARAM;case 6:return Je.AZTEC_DATA_6;case 8:return Je.AZTEC_DATA_8;case 10:return Je.AZTEC_DATA_10;case 12:return Je.AZTEC_DATA_12;default:throw new E("Unsupported word size "+a)}}static stuffBits(a,s){let n=new V,o=a.getSize(),u=(1<<s)-2;for(let x=0;x<o;x+=s){let p=0;for(let v=0;v<s;v++)(x+v>=o||a.get(x+v))&&(p|=1<<s-1-v);(p&u)===u?(n.appendBits(p&u,s),x--):(p&u)===0?(n.appendBits(p|1,s),x--):n.appendBits(p,s)}return n}static totalBitsInLayer(a,s){return((s?88:112)+16*a)*a}}Ot.DEFAULT_EC_PERCENT=33,Ot.DEFAULT_AZTEC_LAYERS=0,Ot.MAX_NB_BITS=32,Ot.MAX_NB_BITS_COMPACT=4,Ot.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Gl{encode(a,s,n,o){return this.encodeWithHints(a,s,n,o,null)}encodeWithHints(a,s,n,o,u){let x=Mi.ISO_8859_1,p=Ot.DEFAULT_EC_PERCENT,v=Ot.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Ra.CHARACTER_SET)&&(x=Nn.forName(u.get(Ra.CHARACTER_SET).toString())),u.has(Ra.ERROR_CORRECTION)&&(p=F.parseInt(u.get(Ra.ERROR_CORRECTION).toString())),u.has(Ra.AZTEC_LAYERS)&&(v=F.parseInt(u.get(Ra.AZTEC_LAYERS).toString()))),Gl.encodeLayers(a,s,n,o,x,p,v)}static encodeLayers(a,s,n,o,u,x,p){if(s!==ie.AZTEC)throw new E("Can only encode AZTEC, but got "+s);let v=Ot.encode(re.getBytes(a,u),x,p);return Gl.renderResult(v,n,o)}static renderResult(a,s,n){let o=a.getMatrix();if(o==null)throw new Ye;let u=o.getWidth(),x=o.getHeight(),p=Math.max(s,u),v=Math.max(n,x),A=Math.min(p/u,v/x),T=(p-u*A)/2,L=(v-x*A)/2,q=new W(p,v);for(let te=0,ce=L;te<x;te++,ce+=A)for(let ue=0,Ne=T;ue<u;ue++,Ne+=A)o.get(ue,te)&&q.setRegion(Ne,ce,A,A);return q}}d.AbstractExpandedDecoder=el,d.ArgumentException=S,d.ArithmeticException=Ze,d.AztecCode=Di,d.AztecCodeReader=Tt,d.AztecCodeWriter=Gl,d.AztecDecoder=Ge,d.AztecDetector=Yt,d.AztecDetectorResult=xt,d.AztecEncoder=Ot,d.AztecHighLevelEncoder=An,d.AztecPoint=pt,d.BarcodeFormat=ie,d.Binarizer=B,d.BinaryBitmap=M,d.BitArray=V,d.BitMatrix=W,d.BitSource=nr,d.BrowserAztecCodeReader=st,d.BrowserBarcodeReader=Zo,d.BrowserCodeReader=xe,d.BrowserDatamatrixCodeReader=Id,d.BrowserMultiFormatReader=Fd,d.BrowserPDF417Reader=Pd,d.BrowserQRCodeReader=zd,d.BrowserQRCodeSvgWriter=Zs,d.CharacterSetECI=Z,d.ChecksumException=D,d.Code128Reader=qe,d.Code39Reader=$t,d.DataMatrixDecodedBitStreamParser=ws,d.DataMatrixReader=Ir,d.DecodeHintType=$,d.DecoderResult=dt,d.DefaultGridSampler=et,d.DetectorResult=We,d.EAN13Reader=Dr,d.EncodeHintType=Ra,d.Exception=b,d.FormatException=P,d.GenericGF=Je,d.GenericGFPoly=lt,d.GlobalHistogramBinarizer=H,d.GridSampler=Vt,d.GridSamplerInstance=At,d.HTMLCanvasElementLuminanceSource=K,d.HybridBinarizer=ee,d.ITFReader=ut,d.IllegalArgumentException=E,d.IllegalStateException=Ye,d.InvertedLuminanceSource=we,d.LuminanceSource=oe,d.MathUtils=Me,d.MultiFormatOneDReader=bs,d.MultiFormatReader=Ko,d.MultiFormatWriter=Hd,d.NotFoundException=U,d.OneDReader=$e,d.PDF417DecodedBitStreamParser=De,d.PDF417DecoderErrorCorrection=rl,d.PDF417Reader=qa,d.PDF417ResultMetadata=Pl,d.PerspectiveTransform=Re,d.PlanarYUVLuminanceSource=Yr,d.QRCodeByteMatrix=ll,d.QRCodeDataMask=Ga,d.QRCodeDecodedBitStreamParser=fa,d.QRCodeDecoderErrorCorrectionLevel=Xt,d.QRCodeDecoderFormatInformation=Va,d.QRCodeEncoder=oa,d.QRCodeEncoderQRCode=Xs,d.QRCodeMaskUtil=ma,d.QRCodeMatrixUtil=ht,d.QRCodeMode=ot,d.QRCodeReader=as,d.QRCodeVersion=it,d.QRCodeWriter=vn,d.RGBLuminanceSource=il,d.RSS14Reader=Ut,d.RSSExpandedReader=ze,d.ReaderException=sl,d.ReedSolomonDecoder=Ae,d.ReedSolomonEncoder=_i,d.ReedSolomonException=be,d.Result=ve,d.ResultMetadataType=ye,d.ResultPoint=je,d.StringUtils=re,d.UnsupportedOperationException=de,d.VideoInputDevice=ge,d.WhiteRectangleDetector=Mt,d.WriterException=Kt,d.ZXingArrays=z,d.ZXingCharset=Nn,d.ZXingInteger=F,d.ZXingStandardCharsets=Mi,d.ZXingStringBuilder=le,d.ZXingStringEncoding=he,d.ZXingSystem=_,d.createAbstractExpandedDecoder=Si,Object.defineProperty(d,"__esModule",{value:!0})})}(ko,ko.exports)),ko.exports}var ha=W4();const K4=md(ha),J4=Hy({__proto__:null,default:K4},[ha]);var Qm=function(){function l(c,d,f){if(this.formatMap=new Map([[at.QR_CODE,ha.BarcodeFormat.QR_CODE],[at.AZTEC,ha.BarcodeFormat.AZTEC],[at.CODABAR,ha.BarcodeFormat.CODABAR],[at.CODE_39,ha.BarcodeFormat.CODE_39],[at.CODE_93,ha.BarcodeFormat.CODE_93],[at.CODE_128,ha.BarcodeFormat.CODE_128],[at.DATA_MATRIX,ha.BarcodeFormat.DATA_MATRIX],[at.MAXICODE,ha.BarcodeFormat.MAXICODE],[at.ITF,ha.BarcodeFormat.ITF],[at.EAN_13,ha.BarcodeFormat.EAN_13],[at.EAN_8,ha.BarcodeFormat.EAN_8],[at.PDF_417,ha.BarcodeFormat.PDF_417],[at.RSS_14,ha.BarcodeFormat.RSS_14],[at.RSS_EXPANDED,ha.BarcodeFormat.RSS_EXPANDED],[at.UPC_A,ha.BarcodeFormat.UPC_A],[at.UPC_E,ha.BarcodeFormat.UPC_E],[at.UPC_EAN_EXTENSION,ha.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!J4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=d,this.logger=f;var g=this.createZXingFormats(c),m=new Map;m.set(ha.DecodeHintType.POSSIBLE_FORMATS,g),m.set(ha.DecodeHintType.TRY_HARDER,!1),this.hints=m}return l.prototype.decodeAsync=function(c){var d=this;return new Promise(function(f,g){try{f(d.decode(c))}catch(m){g(m)}})},l.prototype.decode=function(c){var d=new ha.MultiFormatReader(this.verbose,this.hints),f=new ha.HTMLCanvasElementLuminanceSource(c),g=new ha.BinaryBitmap(new ha.HybridBinarizer(f)),m=d.decode(g);return{text:m.text,format:bp.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},l.prototype.createReverseFormatMap=function(){var c=new Map;return this.formatMap.forEach(function(d,f,g){c.set(d,f)}),c},l.prototype.toHtml5QrcodeSupportedFormats=function(c){if(!this.reverseFormatMap.has(c))throw"reverseFormatMap doesn't have ".concat(c);return this.reverseFormatMap.get(c)},l.prototype.createZXingFormats=function(c){for(var d=[],f=0,g=c;f<g.length;f++){var m=g[f];this.formatMap.has(m)?d.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return d},l.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},l}(),ej=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},tj=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},$m=function(){function l(c,d,f){if(this.formatMap=new Map([[at.QR_CODE,"qr_code"],[at.AZTEC,"aztec"],[at.CODABAR,"codabar"],[at.CODE_39,"code_39"],[at.CODE_93,"code_93"],[at.CODE_128,"code_128"],[at.DATA_MATRIX,"data_matrix"],[at.ITF,"itf"],[at.EAN_13,"ean_13"],[at.EAN_8,"ean_8"],[at.PDF_417,"pdf417"],[at.UPC_A,"upc_a"],[at.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!l.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=d,this.logger=f;var g=this.createBarcodeDetectorFormats(c);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return l.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var c=new BarcodeDetector({formats:["qr_code"]});return typeof c<"u"},l.prototype.decodeAsync=function(c){return ej(this,void 0,void 0,function(){var d,f;return tj(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(c)];case 1:if(d=g.sent(),!d||d.length===0)throw"No barcode or QR code detected.";return f=this.selectLargestBarcode(d),[2,{text:f.rawValue,format:bp.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}]}})})},l.prototype.selectLargestBarcode=function(c){for(var d=null,f=0,g=0,m=c;g<m.length;g++){var w=m[g],N=w.boundingBox.width*w.boundingBox.height;N>f&&(f=N,d=w)}if(!d)throw"No largest barcode found";return d},l.prototype.createBarcodeDetectorFormats=function(c){for(var d=[],f=0,g=c;f<g.length;f++){var m=g[f];this.formatMap.has(m)?d.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:d}},l.prototype.toHtml5QrcodeSupportedFormats=function(c){if(!this.reverseFormatMap.has(c))throw"reverseFormatMap doesn't have ".concat(c);return this.reverseFormatMap.get(c)},l.prototype.createReverseFormatMap=function(){var c=new Map;return this.formatMap.forEach(function(d,f,g){c.set(d,f)}),c},l.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},l}(),Wm=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},Km=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},aj=function(){function l(c,d,f,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=f,d&&$m.isSupported()?(this.primaryDecoder=new $m(c,f,g),this.secondaryDecoder=new Qm(c,f,g)):this.primaryDecoder=new Qm(c,f,g)}return l.prototype.decodeAsync=function(c){return Wm(this,void 0,void 0,function(){var d;return Km(this,function(f){switch(f.label){case 0:d=performance.now(),f.label=1;case 1:return f.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(c)];case 2:return[2,f.sent()];case 3:return this.possiblyLogPerformance(d),[7];case 4:return[2]}})})},l.prototype.decodeRobustlyAsync=function(c){return Wm(this,void 0,void 0,function(){var d,f;return Km(this,function(g){switch(g.label){case 0:d=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(c)];case 2:return[2,g.sent()];case 3:if(f=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(c)];throw f;case 4:return this.possiblyLogPerformance(d),[7];case 5:return[2]}})})},l.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},l.prototype.possiblyLogPerformance=function(c){if(this.verbose){var d=performance.now()-c;this.executionResults.push(d),this.executions++,this.possiblyFlushPerformanceReport()}},l.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var c=0,d=0,f=this.executionResults;d<f.length;d++){var g=f[d];c+=g}var m=c/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},l}(),zf=function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}(),xd=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},gd=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},jp=function(){function l(c,d){this.name=c,this.track=d}return l.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},l.prototype.apply=function(c){var d={};d[this.name]=c;var f={advanced:[d]};return this.track.applyConstraints(f)},l.prototype.value=function(){var c=this.track.getSettings();if(this.name in c){var d=c[this.name];return d}return null},l}(),rj=function(l){zf(c,l);function c(d,f){return l.call(this,d,f)||this}return c.prototype.min=function(){return this.getCapabilities().min},c.prototype.max=function(){return this.getCapabilities().max},c.prototype.step=function(){return this.getCapabilities().step},c.prototype.apply=function(d){var f={};f[this.name]=d;var g={advanced:[f]};return this.track.applyConstraints(g)},c.prototype.getCapabilities=function(){this.failIfNotSupported();var d=this.track.getCapabilities(),f=d[this.name];return{min:f.min,max:f.max,step:f.step}},c.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},c}(jp),sj=function(l){zf(c,l);function c(d){return l.call(this,"zoom",d)||this}return c}(rj),nj=function(l){zf(c,l);function c(d){return l.call(this,"torch",d)||this}return c}(jp),lj=function(){function l(c){this.track=c}return l.prototype.zoomFeature=function(){return new sj(this.track)},l.prototype.torchFeature=function(){return new nj(this.track)},l}(),ij=function(){function l(c,d,f){this.isClosed=!1,this.parentElement=c,this.mediaStream=d,this.callbacks=f,this.surface=this.createVideoElement(this.parentElement.clientWidth),c.append(this.surface)}return l.prototype.createVideoElement=function(c){var d=document.createElement("video");return d.style.width="".concat(c,"px"),d.style.display="block",d.muted=!0,d.setAttribute("muted","true"),d.playsInline=!0,d},l.prototype.setupSurface=function(){var c=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var d=function(){var f=c.surface.clientWidth,g=c.surface.clientHeight;c.callbacks.onRenderSurfaceReady(f,g),c.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.srcObject=this.mediaStream,this.surface.play()},l.create=function(c,d,f,g){return xd(this,void 0,void 0,function(){var m,w;return gd(this,function(N){switch(N.label){case 0:return m=new l(c,d,g),f.aspectRatio?(w={aspectRatio:f.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(w)]):[3,2];case 1:N.sent(),N.label=2;case 2:return m.setupSurface(),[2,m]}})})},l.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},l.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},l.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},l.prototype.resume=function(c){this.failIfClosed();var d=this,f=function(){setTimeout(c,200),d.surface.removeEventListener("playing",f)};this.surface.addEventListener("playing",f),this.surface.play()},l.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},l.prototype.getSurface=function(){return this.failIfClosed(),this.surface},l.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},l.prototype.applyVideoConstraints=function(c){return xd(this,void 0,void 0,function(){return gd(this,function(d){if("aspectRatio"in c)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(c)]})})},l.prototype.close=function(){if(this.isClosed)return Promise.resolve();var c=this;return new Promise(function(d,f){var g=c.mediaStream.getVideoTracks(),m=g.length,w=0;c.mediaStream.getVideoTracks().forEach(function(N){c.mediaStream.removeTrack(N),N.stop(),++w,w>=m&&(c.isClosed=!0,c.parentElement.removeChild(c.surface),d())})})},l.prototype.getCapabilities=function(){return new lj(this.getFirstTrackOrFail())},l}(),oj=function(){function l(c){this.mediaStream=c}return l.prototype.render=function(c,d,f){return xd(this,void 0,void 0,function(){return gd(this,function(g){return[2,ij.create(c,this.mediaStream,d,f)]})})},l.create=function(c){return xd(this,void 0,void 0,function(){var d,f;return gd(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return d={audio:!1,video:c},[4,navigator.mediaDevices.getUserMedia(d)];case 1:return f=g.sent(),[2,new l(f)]}})})},l}(),Jm=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},e1=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},cj=function(){function l(){}return l.failIfNotSupported=function(){return Jm(this,void 0,void 0,function(){return e1(this,function(c){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new l]})})},l.prototype.create=function(c){return Jm(this,void 0,void 0,function(){return e1(this,function(d){return[2,oj.create(c)]})})},l}(),dj=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},uj=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},fj=function(){function l(){}return l.retrieve=function(){if(navigator.mediaDevices)return l.getCamerasFromMediaDevices();var c=MediaStreamTrack;return MediaStreamTrack&&c.getSources?l.getCamerasFromMediaStreamTrack():l.rejectWithError()},l.rejectWithError=function(){var c=bi.unableToQuerySupportedDevices();return l.isHttpsOrLocalhost()||(c=bi.insecureContextCameraQueryError()),Promise.reject(c)},l.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var c=location.host.split(":")[0];return c==="127.0.0.1"||c==="localhost"},l.getCamerasFromMediaDevices=function(){return dj(this,void 0,void 0,function(){var c,d,f,g,m,w,N;return uj(this,function(C){switch(C.label){case 0:return c=function(b){for(var S=b.getVideoTracks(),E=0,M=S;E<M.length;E++){var D=M[E];D.enabled=!1,D.stop(),b.removeTrack(D)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return d=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(f=C.sent(),g=[],m=0,w=f;m<w.length;m++)N=w[m],N.kind==="videoinput"&&g.push({id:N.deviceId,label:N.label});return c(d),[2,g]}})})},l.getCamerasFromMediaStreamTrack=function(){return new Promise(function(c,d){var f=function(m){for(var w=[],N=0,C=m;N<C.length;N++){var b=C[N];b.kind==="video"&&w.push({id:b.id,label:b.label})}c(w)},g=MediaStreamTrack;g.getSources(f)})},l}(),Ea;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.NOT_STARTED=1]="NOT_STARTED",l[l.SCANNING=2]="SCANNING",l[l.PAUSED=3]="PAUSED"})(Ea||(Ea={}));var hj=function(){function l(){this.state=Ea.NOT_STARTED,this.onGoingTransactionNewState=Ea.UNKNOWN}return l.prototype.directTransition=function(c){this.failIfTransitionOngoing(),this.validateTransition(c),this.state=c},l.prototype.startTransition=function(c){return this.failIfTransitionOngoing(),this.validateTransition(c),this.onGoingTransactionNewState=c,this},l.prototype.execute=function(){if(this.onGoingTransactionNewState===Ea.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var c=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Ea.UNKNOWN,this.directTransition(c)},l.prototype.cancel=function(){if(this.onGoingTransactionNewState===Ea.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Ea.UNKNOWN},l.prototype.getState=function(){return this.state},l.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Ea.UNKNOWN)throw"Cannot transition to a new state, already under transition"},l.prototype.validateTransition=function(c){switch(this.state){case Ea.UNKNOWN:throw"Transition from unknown is not allowed";case Ea.NOT_STARTED:this.failIfNewStateIs(c,[Ea.PAUSED]);break;case Ea.SCANNING:break;case Ea.PAUSED:break}},l.prototype.failIfNewStateIs=function(c,d){for(var f=0,g=d;f<g.length;f++){var m=g[f];if(c===m)throw"Cannot transition from ".concat(this.state," to ").concat(c)}},l}(),xj=function(){function l(c){this.stateManager=c}return l.prototype.startTransition=function(c){return this.stateManager.startTransition(c)},l.prototype.directTransition=function(c){this.stateManager.directTransition(c)},l.prototype.getState=function(){return this.stateManager.getState()},l.prototype.canScanFile=function(){return this.stateManager.getState()===Ea.NOT_STARTED},l.prototype.isScanning=function(){return this.stateManager.getState()!==Ea.NOT_STARTED},l.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Ea.SCANNING},l.prototype.isPaused=function(){return this.stateManager.getState()===Ea.PAUSED},l}(),gj=function(){function l(){}return l.create=function(){return new xj(new hj)},l}(),mj=function(){var l=function(c,d){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,g){f.__proto__=g}||function(f,g){for(var m in g)Object.prototype.hasOwnProperty.call(g,m)&&(f[m]=g[m])},l(c,d)};return function(c,d){if(typeof d!="function"&&d!==null)throw new TypeError("Class extends value "+String(d)+" is not a constructor or null");l(c,d);function f(){this.constructor=c}c.prototype=d===null?Object.create(d):(f.prototype=d.prototype,new f)}}(),Hr=function(l){mj(c,l);function c(){return l!==null&&l.apply(this,arguments)||this}return c.DEFAULT_WIDTH=300,c.DEFAULT_WIDTH_OFFSET=2,c.FILE_SCAN_MIN_HEIGHT=300,c.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,c.MIN_QR_BOX_SIZE=50,c.SHADED_LEFT=1,c.SHADED_RIGHT=2,c.SHADED_TOP=3,c.SHADED_BOTTOM=4,c.SHADED_REGION_ELEMENT_ID="qr-shaded-region",c.VERBOSE=!1,c.BORDER_SHADER_DEFAULT_COLOR="#ffffff",c.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",c}(is),pj=function(){function l(c,d){this.logger=d,this.fps=Hr.SCAN_DEFAULT_FPS,c?(c.fps&&(this.fps=c.fps),this.disableFlip=c.disableFlip===!0,this.qrbox=c.qrbox,this.aspectRatio=c.aspectRatio,this.videoConstraints=c.videoConstraints):this.disableFlip=Hr.DEFAULT_DISABLE_FLIP}return l.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Np.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},l.prototype.isShadedBoxEnabled=function(){return!Ls(this.qrbox)},l.create=function(c,d){return new l(c,d)},l}(),t1=function(){function l(c,d){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(c))throw"HTML Element with id=".concat(c," not found");this.elementId=c,this.verbose=!1;var f;typeof d=="boolean"?this.verbose=d===!0:d&&(f=d,this.verbose=f.verbose===!0,f.experimentalFeatures),this.logger=new vp(this.verbose),this.qrcode=new aj(this.getSupportedFormats(d),this.getUseBarCodeDetectorIfSupported(f),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=gj.create()}return l.prototype.start=function(c,d,f,g){var m=this;if(!c)throw"cameraIdOrConfig is required";if(!f||typeof f!="function")throw"qrCodeSuccessCallback is required and should be a function.";var w;g?w=g:w=this.verbose?this.logger.log:function(){};var N=pj.create(d,this.logger);this.clearElement();var C=!1;N.videoConstraints&&(N.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var b=C,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:Hr.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var E=this,M=this.stateManagerProxy.startTransition(Ea.SCANNING);return new Promise(function(D,B){var _=b?N.videoConstraints:E.createVideoConstraints(c);if(!_){M.cancel(),B("videoConstraints should be defined");return}var G={};(!b||N.aspectRatio)&&(G.aspectRatio=N.aspectRatio);var R={onRenderSurfaceReady:function(z,F){E.setupUi(z,F,N),E.isScanning=!0,E.foreverScan(N,f,w)}};cj.failIfNotSupported().then(function(z){z.create(_).then(function(F){return F.render(m.element,G,R).then(function(V){E.renderedCamera=V,M.execute(),D(null)}).catch(function(V){M.cancel(),B(V)})}).catch(function(F){M.cancel(),B(bi.errorGettingUserMedia(F))})}).catch(function(z){M.cancel(),B(bi.cameraStreamingNotSupported())})})},l.prototype.pause=function(c){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Ea.PAUSED),this.showPausedState(),(Ls(c)||c!==!0)&&(c=!1),c&&this.renderedCamera&&this.renderedCamera.pause()},l.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var c=this,d=function(){c.stateManagerProxy.directTransition(Ea.SCANNING),c.hidePausedState()};if(!this.renderedCamera.isPaused()){d();return}this.renderedCamera.resume(function(){d()})},l.prototype.getState=function(){return this.stateManagerProxy.getState()},l.prototype.stop=function(){var c=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var d=this.stateManagerProxy.startTransition(Ea.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var f=function(){if(c.element){var m=document.getElementById(Hr.SHADED_REGION_ELEMENT_ID);m&&c.element.removeChild(m)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),f(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),d.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},l.prototype.scanFile=function(c,d){return this.scanFileV2(c,d).then(function(f){return f.decodedText})},l.prototype.scanFileV2=function(c,d){var f=this;if(!c||!(c instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ls(d)&&(d=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,m){f.possiblyCloseLastScanImageFile(),f.clearElement(),f.lastScanImageFile=URL.createObjectURL(c);var w=new Image;w.onload=function(){var N=w.width,C=w.height,b=document.getElementById(f.elementId),S=b.clientWidth?b.clientWidth:Hr.DEFAULT_WIDTH,E=Math.max(b.clientHeight?b.clientHeight:C,Hr.FILE_SCAN_MIN_HEIGHT),M=f.computeCanvasDrawConfig(N,C,S,E);if(d){var D=f.createCanvasElement(S,E,"qr-canvas-visible");D.style.display="inline-block",b.appendChild(D);var B=D.getContext("2d");if(!B)throw"Unable to get 2d context from canvas";B.canvas.width=S,B.canvas.height=E,B.drawImage(w,0,0,N,C,M.x,M.y,M.width,M.height)}var _=Hr.FILE_SCAN_HIDDEN_CANVAS_PADDING,G=Math.max(w.width,M.width),R=Math.max(w.height,M.height),z=G+2*_,F=R+2*_,V=f.createCanvasElement(z,F);b.appendChild(V);var Q=V.getContext("2d");if(!Q)throw"Unable to get 2d context from canvas";Q.canvas.width=z,Q.canvas.height=F,Q.drawImage(w,0,0,N,C,_,_,G,R);try{f.qrcode.decodeRobustlyAsync(V).then(function($){g(Ym.createFromQrcodeResult($))}).catch(m)}catch($){m("QR code parse error, error = ".concat($))}},w.onerror=m,w.onabort=m,w.onstalled=m,w.onsuspend=m,w.src=URL.createObjectURL(c)})},l.prototype.clear=function(){this.clearElement()},l.getCameras=function(){return fj.retrieve()},l.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},l.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},l.prototype.applyVideoConstraints=function(c){if(c){if(!Np.isMediaStreamConstraintsValid(c,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(c)},l.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},l.prototype.getSupportedFormats=function(c){var d=[at.QR_CODE,at.AZTEC,at.CODABAR,at.CODE_39,at.CODE_93,at.CODE_128,at.DATA_MATRIX,at.MAXICODE,at.ITF,at.EAN_13,at.EAN_8,at.PDF_417,at.RSS_14,at.RSS_EXPANDED,at.UPC_A,at.UPC_E,at.UPC_EAN_EXTENSION];if(!c||typeof c=="boolean"||!c.formatsToSupport)return d;if(!Array.isArray(c.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(c.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var f=[],g=0,m=c.formatsToSupport;g<m.length;g++){var w=m[g];Z4(w)?f.push(w):this.logger.warn("Invalid format: ".concat(w," passed in config, ignoring."))}if(f.length===0)throw"None of formatsToSupport match supported values.";return f},l.prototype.getUseBarCodeDetectorIfSupported=function(c){if(Ls(c))return!0;if(!Ls(c.useBarCodeDetectorIfSupported))return c.useBarCodeDetectorIfSupported!==!1;if(Ls(c.experimentalFeatures))return!0;var d=c.experimentalFeatures;return Ls(d.useBarCodeDetectorIfSupported)?!0:d.useBarCodeDetectorIfSupported!==!1},l.prototype.validateQrboxSize=function(c,d,f){var g=this,m=f.qrbox;this.validateQrboxConfig(m);var w=this.toQrdimensions(c,d,m),N=function(b){if(b<Hr.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Hr.MIN_QR_BOX_SIZE,"px.")},C=function(b){return b>c&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),b=c),b};N(w.width),N(w.height),w.width=C(w.width)},l.prototype.validateQrboxConfig=function(c){if(typeof c!="number"&&typeof c!="function"&&(c.width===void 0||c.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},l.prototype.toQrdimensions=function(c,d,f){if(typeof f=="number")return{width:f,height:f};if(typeof f=="function")try{return f(c,d)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return f},l.prototype.setupUi=function(c,d,f){f.isShadedBoxEnabled()&&this.validateQrboxSize(c,d,f);var g=Ls(f.qrbox)?{width:c,height:d}:f.qrbox;this.validateQrboxConfig(g);var m=this.toQrdimensions(c,d,g);m.height>d&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var w=f.isShadedBoxEnabled()&&m.height<=d,N={x:0,y:0,width:c,height:d},C=w?this.getShadedRegionBounds(c,d,m):N,b=this.createCanvasElement(C.width,C.height),S={willReadFrequently:!0},E=b.getContext("2d",S);E.canvas.width=C.width,E.canvas.height=C.height,this.element.append(b),w&&this.possiblyInsertShadingElement(this.element,c,d,m),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=E,this.canvasElement=b},l.prototype.createScannerPausedUiElement=function(c){var d=document.createElement("div");d.innerText=bi.scannerPaused(),d.style.display="none",d.style.position="absolute",d.style.top="0px",d.style.zIndex="1",d.style.background="rgba(9, 9, 9, 0.46)",d.style.color="#FFECEC",d.style.textAlign="center",d.style.width="100%",c.appendChild(d),this.scannerPausedUiElement=d},l.prototype.scanContext=function(c,d){var f=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return c(g.text,Ym.createFromQrcodeResult(g)),f.possiblyUpdateShaders(!0),!0}).catch(function(g){f.possiblyUpdateShaders(!1);var m=bi.codeParseError(g);return d(m,wp.createFrom(m)),!1})},l.prototype.foreverScan=function(c,d,f){var g=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),w=m.videoWidth/m.clientWidth,N=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*w,b=this.qrRegion.height*N,S=this.qrRegion.x*w,E=this.qrRegion.y*N;this.context.drawImage(m,S,E,C,b,0,0,this.qrRegion.width,this.qrRegion.height);var M=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(c,d,f)},g.getTimeoutFps(c.fps))};this.scanContext(d,f).then(function(D){!D&&c.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(d,f).finally(function(){M()})):M()}).catch(function(D){g.logger.logError("Error happend while scanning context",D),M()})}},l.prototype.createVideoConstraints=function(c){if(typeof c=="string")return{deviceId:{exact:c}};if(typeof c=="object"){var d="facingMode",f="deviceId",g={user:!0,environment:!0},m="exact",w=function(B){if(B in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(B,"'")},N=Object.keys(c);if(N.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(N.length," keys");var C=Object.keys(c)[0];if(C!==d&&C!==f)throw"Only '".concat(d,"' and '").concat(f,"' ")+" are supported for 'cameraIdOrConfig'";if(C===d){var b=c.facingMode;if(typeof b=="string"){if(w(b))return{facingMode:b}}else if(typeof b=="object")if(m in b){if(w(b["".concat(m)]))return{facingMode:{exact:b["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var S=typeof b;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var E=c.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(m in E)return{deviceId:{exact:E["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var M=typeof E;throw"Invalid type of 'deviceId' = ".concat(M)}}}var D=typeof c;throw"Invalid type of 'cameraIdOrConfig' = ".concat(D)},l.prototype.computeCanvasDrawConfig=function(c,d,f,g){if(c<=f&&d<=g){var m=(f-c)/2,w=(g-d)/2;return{x:m,y:w,width:c,height:d}}else{var N=c,C=d;return c>f&&(d=f/c*d,c=f),d>g&&(c=g/d*c,d=g),this.logger.log("Image downsampled from "+"".concat(N,"X").concat(C)+" to ".concat(c,"X").concat(d,".")),this.computeCanvasDrawConfig(c,d,f,g)}},l.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var c=document.getElementById(this.elementId);c&&(c.innerHTML="")},l.prototype.possiblyUpdateShaders=function(c){this.qrMatch!==c&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(d){d.style.backgroundColor=c?Hr.BORDER_SHADER_MATCH_COLOR:Hr.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=c)},l.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},l.prototype.createCanvasElement=function(c,d,f){var g=c,m=d,w=document.createElement("canvas");return w.style.width="".concat(g,"px"),w.style.height="".concat(m,"px"),w.style.display="none",w.id=Ls(f)?"qr-canvas":f,w},l.prototype.getShadedRegionBounds=function(c,d,f){if(f.width>c||f.height>d)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(c-f.width)/2,y:(d-f.height)/2,width:f.width,height:f.height}},l.prototype.possiblyInsertShadingElement=function(c,d,f,g){if(!(d-g.width<1||f-g.height<1)){var m=document.createElement("div");m.style.position="absolute";var w=(d-g.width)/2,N=(f-g.height)/2;if(m.style.borderLeft="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(w,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(N,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(Hr.SHADED_REGION_ELEMENT_ID),d-g.width<11||f-g.height<11)this.hasBorderShaders=!1;else{var C=5,b=40;this.insertShaderBorders(m,b,C,-C,null,0,!0),this.insertShaderBorders(m,b,C,-C,null,0,!1),this.insertShaderBorders(m,b,C,null,-C,0,!0),this.insertShaderBorders(m,b,C,null,-C,0,!1),this.insertShaderBorders(m,C,b+C,-C,null,-C,!0),this.insertShaderBorders(m,C,b+C,null,-C,-C,!0),this.insertShaderBorders(m,C,b+C,-C,null,-C,!1),this.insertShaderBorders(m,C,b+C,null,-C,-C,!1),this.hasBorderShaders=!0}c.append(m)}},l.prototype.insertShaderBorders=function(c,d,f,g,m,w,N){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=Hr.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(d,"px"),C.style.height="".concat(f,"px"),g!==null&&(C.style.top="".concat(g,"px")),m!==null&&(C.style.bottom="".concat(m,"px")),N?C.style.left="".concat(w,"px"):C.style.right="".concat(w,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),c.appendChild(C)},l.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},l.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},l.prototype.getTimeoutFps=function(c){return 1e3/c},l}(),Uf="data:image/svg+xml;base64,",yj=Uf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",bj=Uf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",a1=Uf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",wj="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",r1=function(){function l(){}return l.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},l}(),vj=function(){function l(){this.data=r1.createDefault();var c=localStorage.getItem(l.LOCAL_STORAGE_KEY);c?this.data=JSON.parse(c):this.reset()}return l.prototype.hasCameraPermissions=function(){return this.data.hasPermission},l.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},l.prototype.setHasPermission=function(c){this.data.hasPermission=c,this.flush()},l.prototype.setLastUsedCameraId=function(c){this.data.lastUsedCameraId=c,this.flush()},l.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},l.prototype.reset=function(){this.data=r1.createDefault(),this.flush()},l.prototype.flush=function(){localStorage.setItem(l.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},l.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",l}(),Nj=function(){function l(){this.infoDiv=document.createElement("div")}return l.prototype.renderInto=function(c){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Xm.poweredBy();var d=document.createElement("a");d.innerText="ScanApp",d.href="https://scanapp.org",d.target="new",d.style.color="white",this.infoDiv.appendChild(d);var f=document.createElement("br"),g=document.createElement("br");this.infoDiv.appendChild(f),this.infoDiv.appendChild(g);var m=document.createElement("a");m.innerText=Xm.reportIssues(),m.href="https://github.com/mebjas/html5-qrcode/issues",m.target="new",m.style.color="white",this.infoDiv.appendChild(m),c.appendChild(this.infoDiv)},l.prototype.show=function(){this.infoDiv.style.display="block"},l.prototype.hide=function(){this.infoDiv.style.display="none"},l}(),jj=function(){function l(c,d){this.isShowingInfoIcon=!0,this.onTapIn=c,this.onTapOut=d,this.infoIcon=document.createElement("img")}return l.prototype.renderInto=function(c){var d=this;this.infoIcon.alt="Info icon",this.infoIcon.src=a1,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(f){return d.onHoverIn()},this.infoIcon.onmouseout=function(f){return d.onHoverOut()},this.infoIcon.onclick=function(f){return d.onClick()},c.appendChild(this.infoIcon)},l.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},l.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},l.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=wj,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=a1,this.infoIcon.style.opacity="0.6")},l}(),Cj=function(){function l(){var c=this;this.infoDiv=new Nj,this.infoIcon=new jj(function(){c.infoDiv.show()},function(){c.infoDiv.hide()})}return l.prototype.renderInto=function(c){this.infoDiv.renderInto(c),this.infoIcon.renderInto(c)},l}(),kj=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},Aj=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},s1=function(){function l(){}return l.hasPermissions=function(){return kj(this,void 0,void 0,function(){var c,d,f,g;return Aj(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(c=m.sent(),d=0,f=c;d<f.length;d++)if(g=f[d],g.kind==="videoinput"&&g.label)return[2,!0];return[2,!1]}})})},l}(),Qn=function(){function l(c){this.supportedScanTypes=this.validateAndReturnScanTypes(c)}return l.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},l.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},l.prototype.isCameraScanRequired=function(){for(var c=0,d=this.supportedScanTypes;c<d.length;c++){var f=d[c];if(l.isCameraScanType(f))return!0}return!1},l.isCameraScanType=function(c){return c===Kn.SCAN_TYPE_CAMERA},l.isFileScanType=function(c){return c===Kn.SCAN_TYPE_FILE},l.prototype.validateAndReturnScanTypes=function(c){if(!c||c.length===0)return is.DEFAULT_SUPPORTED_SCAN_TYPE;var d=is.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(c.length>d)throw"Max ".concat(d," values expected for ")+"supportedScanTypes";for(var f=0,g=c;f<g.length;f++){var m=g[f];if(!is.DEFAULT_SUPPORTED_SCAN_TYPE.includes(m))throw"Unsupported scan type ".concat(m)}return c},l}(),Gr=function(){function l(){}return l.ALL_ELEMENT_CLASS="html5-qrcode-element",l.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",l.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",l.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",l.TORCH_BUTTON_ID="html5-qrcode-button-torch",l.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",l.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",l.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",l.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",l.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",l.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",l}(),un=function(){function l(){}return l.createElement=function(c,d){var f=document.createElement(c);return f.id=d,f.classList.add(Gr.ALL_ELEMENT_CLASS),c==="button"&&f.setAttribute("type","button"),f},l}(),Cp=function(l,c,d,f){function g(m){return m instanceof d?m:new d(function(w){w(m)})}return new(d||(d=Promise))(function(m,w){function N(S){try{b(f.next(S))}catch(E){w(E)}}function C(S){try{b(f.throw(S))}catch(E){w(E)}}function b(S){S.done?m(S.value):g(S.value).then(N,C)}b((f=f.apply(l,c||[])).next())})},kp=function(l,c){var d={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},f,g,m,w;return w={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(w[Symbol.iterator]=function(){return this}),w;function N(b){return function(S){return C([b,S])}}function C(b){if(f)throw new TypeError("Generator is already executing.");for(;w&&(w=0,b[0]&&(d=0)),d;)try{if(f=1,g&&(m=b[0]&2?g.return:b[0]?g.throw||((m=g.return)&&m.call(g),0):g.next)&&!(m=m.call(g,b[1])).done)return m;switch(g=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return d.label++,{value:b[1],done:!1};case 5:d.label++,g=b[1],b=[0];continue;case 7:b=d.ops.pop(),d.trys.pop();continue;default:if(m=d.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){d=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){d.label=b[1];break}if(b[0]===6&&d.label<m[1]){d.label=m[1],m=b;break}if(m&&d.label<m[2]){d.label=m[2],d.ops.push(b);break}m[2]&&d.ops.pop(),d.trys.pop();continue}b=c.call(l,d)}catch(S){b=[6,S],g=0}finally{f=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},n1=function(){function l(c,d,f){this.isTorchOn=!1,this.torchCapability=c,this.buttonController=d,this.onTorchActionFailureCallback=f}return l.prototype.isTorchEnabled=function(){return this.isTorchOn},l.prototype.flipState=function(){return Cp(this,void 0,void 0,function(){var c,d;return kp(this,function(f){switch(f.label){case 0:this.buttonController.disable(),c=!this.isTorchOn,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.torchCapability.apply(c)];case 2:return f.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),c),[3,4];case 3:return d=f.sent(),this.propagateFailure(c,d),this.buttonController.enable(),[3,4];case 4:return[2]}})})},l.prototype.updateUiBasedOnLatestSettings=function(c,d){c===d?(this.buttonController.setText(d?aa.torchOffButton():aa.torchOnButton()),this.isTorchOn=d):this.propagateFailure(d),this.buttonController.enable()},l.prototype.propagateFailure=function(c,d){var f=c?aa.torchOnFailedMessage():aa.torchOffFailedMessage();d&&(f+="; Error = "+d),this.onTorchActionFailureCallback(f)},l.prototype.reset=function(){this.isTorchOn=!1},l}(),Sj=function(){function l(c,d){this.onTorchActionFailureCallback=d,this.torchButton=un.createElement("button",Gr.TORCH_BUTTON_ID),this.torchController=new n1(c,this,d)}return l.prototype.render=function(c,d){var f=this;this.torchButton.innerText=aa.torchOnButton(),this.torchButton.style.display=d.display,this.torchButton.style.marginLeft=d.marginLeft;var g=this;this.torchButton.addEventListener("click",function(m){return Cp(f,void 0,void 0,function(){return kp(this,function(w){switch(w.label){case 0:return[4,g.torchController.flipState()];case 1:return w.sent(),g.torchController.isTorchEnabled()?(g.torchButton.classList.remove(Gr.TORCH_BUTTON_CLASS_TORCH_OFF),g.torchButton.classList.add(Gr.TORCH_BUTTON_CLASS_TORCH_ON)):(g.torchButton.classList.remove(Gr.TORCH_BUTTON_CLASS_TORCH_ON),g.torchButton.classList.add(Gr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),c.appendChild(this.torchButton)},l.prototype.updateTorchCapability=function(c){this.torchController=new n1(c,this,this.onTorchActionFailureCallback)},l.prototype.getTorchButton=function(){return this.torchButton},l.prototype.hide=function(){this.torchButton.style.display="none"},l.prototype.show=function(){this.torchButton.style.display="inline-block"},l.prototype.disable=function(){this.torchButton.disabled=!0},l.prototype.enable=function(){this.torchButton.disabled=!1},l.prototype.setText=function(c){this.torchButton.innerText=c},l.prototype.reset=function(){this.torchButton.innerText=aa.torchOnButton(),this.torchController.reset()},l.create=function(c,d,f,g){var m=new l(d,g);return m.render(c,f),m},l}(),Ej=function(){function l(c,d,f){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=d?"block":"none",c.appendChild(this.fileBasedScanRegion);var g=document.createElement("label");g.setAttribute("for",this.getFileScanInputId()),g.style.display="inline-block",this.fileBasedScanRegion.appendChild(g),this.fileSelectionButton=un.createElement("button",Gr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(N){g.click()}),g.append(this.fileSelectionButton),this.fileScanInput=un.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",g.appendChild(this.fileScanInput);var m=this;this.fileScanInput.addEventListener("change",function(N){if(!(N==null||N.target==null)){var C=N.target;if(!(C.files&&C.files.length===0)){var b=C.files,S=b[0],E=S.name;m.setImageNameToButton(E),f(S)}}});var w=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(w),this.fileBasedScanRegion.addEventListener("dragenter",function(N){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),N.stopPropagation(),N.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(N){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder(),N.stopPropagation(),N.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(N){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),N.stopPropagation(),N.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(N){N.stopPropagation(),N.preventDefault(),m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder();var C=N.dataTransfer;if(C){var b=C.files;if(!b||b.length===0)return;for(var S=!1,E=0;E<b.length;++E){var M=b.item(E);if(M){var D=/image.*/;if(M.type.match(D)){S=!0;var B=M.name;m.setImageNameToButton(B),f(M),w.innerText=aa.dragAndDropMessage();break}}}S||(w.innerText=aa.dragAndDropMessageOnlyImages())}})}return l.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},l.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},l.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},l.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},l.prototype.createFileBasedScanRegion=function(){var c=document.createElement("div");return c.style.textAlign="center",c.style.margin="auto",c.style.width="80%",c.style.maxWidth="600px",c.style.border=this.fileBasedScanRegionDefaultBorder(),c.style.padding="10px",c.style.marginBottom="10px",c},l.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},l.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},l.prototype.createDragAndDropMessage=function(){var c=document.createElement("div");return c.innerText=aa.dragAndDropMessage(),c.style.fontWeight="400",c},l.prototype.setImageNameToButton=function(c){var d=20;if(c.length>d){var f=c.substring(0,8),g=c.length,m=c.substring(g-8,g);c="".concat(f,"....").concat(m)}var w=aa.fileSelectionChooseAnother()+" - "+c;this.fileSelectionButton.innerText=w},l.prototype.setInitialValueToButton=function(){var c=aa.fileSelectionChooseImage()+" - "+aa.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=c},l.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},l.create=function(c,d,f){var g=new l(c,d,f);return g},l}(),Tj=function(){function l(c){this.selectElement=un.createElement("select",Gr.CAMERA_SELECTION_SELECT_ID),this.cameras=c,this.options=[]}return l.prototype.render=function(c){var d=document.createElement("span");d.style.marginRight="10px";var f=this.cameras.length;if(f===0)throw new Error("No cameras found");if(f===1)d.style.display="none";else{var g=aa.selectCamera();d.innerText="".concat(g," (").concat(this.cameras.length,")  ")}for(var m=1,w=0,N=this.cameras;w<N.length;w++){var C=N[w],b=C.id,S=C.label==null?b:C.label;(!S||S==="")&&(S=[aa.anonymousCameraPrefix(),m++].join(" "));var E=document.createElement("option");E.value=b,E.innerText=S,this.options.push(E),this.selectElement.appendChild(E)}d.appendChild(this.selectElement),c.appendChild(d)},l.prototype.disable=function(){this.selectElement.disabled=!0},l.prototype.isDisabled=function(){return this.selectElement.disabled===!0},l.prototype.enable=function(){this.selectElement.disabled=!1},l.prototype.getValue=function(){return this.selectElement.value},l.prototype.hasValue=function(c){for(var d=0,f=this.options;d<f.length;d++){var g=f[d];if(g.value===c)return!0}return!1},l.prototype.setValue=function(c){if(!this.hasValue(c))throw new Error("".concat(c," is not present in the camera list."));this.selectElement.value=c},l.prototype.hasSingleItem=function(){return this.cameras.length===1},l.prototype.numCameras=function(){return this.cameras.length},l.create=function(c,d){var f=new l(d);return f.render(c),f},l}(),_j=function(){function l(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=un.createElement("input",Gr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return l.prototype.render=function(c,d){this.zoomElementContainer.style.display=d?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",c.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var f=aa.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(f),this.rangeText.style.marginRight="10px";var g=this;this.rangeInput.addEventListener("input",function(){return g.onValueChange()}),this.rangeInput.addEventListener("change",function(){return g.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},l.prototype.onValueChange=function(){var c=aa.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(c),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},l.prototype.setValues=function(c,d,f,g){this.rangeInput.min=c.toString(),this.rangeInput.max=d.toString(),this.rangeInput.step=g.toString(),this.rangeInput.value=f.toString(),this.onValueChange()},l.prototype.show=function(){this.zoomElementContainer.style.display="block"},l.prototype.hide=function(){this.zoomElementContainer.style.display="none"},l.prototype.setOnCameraZoomValueChangeCallback=function(c){this.onChangeCallback=c},l.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},l.create=function(c,d){var f=new l;return f.render(c,d),f},l}(),Vr;(function(l){l[l.STATUS_DEFAULT=0]="STATUS_DEFAULT",l[l.STATUS_SUCCESS=1]="STATUS_SUCCESS",l[l.STATUS_WARNING=2]="STATUS_WARNING",l[l.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Vr||(Vr={}));function Mj(l){return{fps:l.fps,qrbox:l.qrbox,aspectRatio:l.aspectRatio,disableFlip:l.disableFlip,videoConstraints:l.videoConstraints}}function Dj(l,c){return{formatsToSupport:l.formatsToSupport,useBarCodeDetectorIfSupported:l.useBarCodeDetectorIfSupported,experimentalFeatures:l.experimentalFeatures,verbose:c}}var Rj=function(){function l(c,d,f){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=c,this.config=this.createConfig(d),this.verbose=f===!0,!document.getElementById(c))throw"HTML Element with id=".concat(c," not found");this.scanTypeSelector=new Qn(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new vp(this.verbose),this.persistedDataManager=new vj,d.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return l.prototype.render=function(c,d){var f=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(m,w){if(c)c(m,w);else{if(f.lastMatchFound===m)return;f.lastMatchFound=m,f.setHeaderMessage(aa.lastMatch(m),Vr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(m,w){d&&d(m,w)};var g=document.getElementById(this.elementId);if(!g)throw"HTML Element with id=".concat(this.elementId," not found");g.innerHTML="",this.createBasicLayout(g),this.html5Qrcode=new t1(this.getScanRegionId(),Dj(this.config,this.verbose))},l.prototype.pause=function(c){(Ls(c)||c!==!0)&&(c=!1),this.getHtml5QrcodeOrFail().pause(c)},l.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},l.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},l.prototype.clear=function(){var c=this,d=function(){var f=document.getElementById(c.elementId);f&&(f.innerHTML="",c.resetBasicLayout(f))};return this.html5Qrcode?new Promise(function(f,g){if(!c.html5Qrcode){f();return}c.html5Qrcode.isScanning?c.html5Qrcode.stop().then(function(m){if(!c.html5Qrcode){f();return}c.html5Qrcode.clear(),d(),f()}).catch(function(m){c.verbose&&c.logger.logError("Unable to stop qrcode scanner",m),g(m)}):(c.html5Qrcode.clear(),d(),f())}):Promise.resolve()},l.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},l.prototype.applyVideoConstraints=function(c){return this.getHtml5QrcodeOrFail().applyVideoConstraints(c)},l.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},l.prototype.createConfig=function(c){return c?(c.fps||(c.fps=is.SCAN_DEFAULT_FPS),c.rememberLastUsedCamera!==!is.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(c.rememberLastUsedCamera=is.DEFAULT_REMEMBER_LAST_CAMERA_USED),c.supportedScanTypes||(c.supportedScanTypes=is.DEFAULT_SUPPORTED_SCAN_TYPE),c):{fps:is.SCAN_DEFAULT_FPS,rememberLastUsedCamera:is.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:is.DEFAULT_SUPPORTED_SCAN_TYPE}},l.prototype.createBasicLayout=function(c){c.style.position="relative",c.style.padding="0px",c.style.border="1px solid silver",this.createHeader(c);var d=document.createElement("div"),f=this.getScanRegionId();d.id=f,d.style.width="100%",d.style.minHeight="100px",d.style.textAlign="center",c.appendChild(d),Qn.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var g=document.createElement("div"),m=this.getDashboardId();g.id=m,g.style.width="100%",c.appendChild(g),this.setupInitialDashboard(g)},l.prototype.resetBasicLayout=function(c){c.style.border="none"},l.prototype.setupInitialDashboard=function(c){this.createSection(c),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},l.prototype.createHeader=function(c){var d=document.createElement("div");d.style.textAlign="left",d.style.margin="0px",c.appendChild(d);var f=new Cj;f.renderInto(d);var g=document.createElement("div");g.id=this.getHeaderMessageContainerId(),g.style.display="none",g.style.textAlign="center",g.style.fontSize="14px",g.style.padding="2px 10px",g.style.margin="4px",g.style.borderTop="1px solid #f6f6f6",d.appendChild(g)},l.prototype.createSection=function(c){var d=document.createElement("div");d.id=this.getDashboardSectionId(),d.style.width="100%",d.style.padding="10px 0px 10px 0px",d.style.textAlign="left",c.appendChild(d)},l.prototype.createCameraListUi=function(c,d,f){var g=this;g.showHideScanTypeSwapLink(!1),g.setHeaderMessage(aa.cameraPermissionRequesting());var m=function(){f||g.createPermissionButton(c,d)};t1.getCameras().then(function(w){g.persistedDataManager.setHasPermission(!0),g.showHideScanTypeSwapLink(!0),g.resetHeaderMessage(),w&&w.length>0?(c.removeChild(d),g.renderCameraSelection(w)):(g.setHeaderMessage(aa.noCameraFound(),Vr.STATUS_WARNING),m())}).catch(function(w){g.persistedDataManager.setHasPermission(!1),f?f.disabled=!1:m(),g.setHeaderMessage(w,Vr.STATUS_WARNING),g.showHideScanTypeSwapLink(!0)})},l.prototype.createPermissionButton=function(c,d){var f=this,g=un.createElement("button",this.getCameraPermissionButtonId());g.innerText=aa.cameraPermissionTitle(),g.addEventListener("click",function(){g.disabled=!0,f.createCameraListUi(c,d,g)}),d.appendChild(g)},l.prototype.createPermissionsUi=function(c,d){var f=this;if(Qn.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){s1.hasPermissions().then(function(g){g?f.createCameraListUi(c,d):(f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(c,d))}).catch(function(g){f.persistedDataManager.setHasPermission(!1),f.createPermissionButton(c,d)});return}this.createPermissionButton(c,d)},l.prototype.createSectionControlPanel=function(){var c=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");c.appendChild(d);var f=document.createElement("div");f.id=this.getDashboardSectionCameraScanRegionId(),f.style.display=Qn.isCameraScanType(this.currentScanType)?"block":"none",d.appendChild(f);var g=document.createElement("div");g.style.textAlign="center",f.appendChild(g),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(f,g),this.renderFileScanUi(d)},l.prototype.renderFileScanUi=function(c){var d=Qn.isFileScanType(this.currentScanType),f=this,g=function(m){if(!f.html5Qrcode)throw"html5Qrcode not defined";Qn.isFileScanType(f.currentScanType)&&(f.setHeaderMessage(aa.loadingImage()),f.html5Qrcode.scanFileV2(m,!0).then(function(w){f.resetHeaderMessage(),f.qrCodeSuccessCallback(w.decodedText,w)}).catch(function(w){f.setHeaderMessage(w,Vr.STATUS_WARNING),f.qrCodeErrorCallback(w,wp.createFrom(w))}))};this.fileSelectionUi=Ej.create(c,d,g)},l.prototype.renderCameraSelection=function(c){var d=this,f=this,g=document.getElementById(this.getDashboardSectionCameraScanRegionId());g.style.textAlign="center";var m=_j.create(g,!1),w=function(_){var G=_.zoomFeature();if(G.isSupported()){m.setOnCameraZoomValueChangeCallback(function(z){G.apply(z)});var R=1;d.config.defaultZoomValueIfSupported&&(R=d.config.defaultZoomValueIfSupported),R=Q4(R,G.min(),G.max()),m.setValues(G.min(),G.max(),R,G.step()),m.show()}},N=Tj.create(g,c),C=document.createElement("span"),b=un.createElement("button",Gr.CAMERA_START_BUTTON_ID);b.innerText=aa.scanButtonStartScanningText(),C.appendChild(b);var S=un.createElement("button",Gr.CAMERA_STOP_BUTTON_ID);S.innerText=aa.scanButtonStopScanningText(),S.style.display="none",S.disabled=!0,C.appendChild(S);var E,M=function(_){if(!_.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(_.torchFeature()):E=Sj.create(C,_.torchFeature(),{display:"none",marginLeft:"5px"},function(G){f.setHeaderMessage(G,Vr.STATUS_WARNING)}),E.show()};g.appendChild(C);var D=function(_){_||(b.style.display="none"),b.innerText=aa.scanButtonStartScanningText(),b.style.opacity="1",b.disabled=!1,_&&(b.style.display="inline-block")};if(b.addEventListener("click",function(_){b.innerText=aa.scanButtonScanningStarting(),N.disable(),b.disabled=!0,b.style.opacity="0.5",d.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!1),f.resetHeaderMessage();var G=N.getValue();f.persistedDataManager.setLastUsedCameraId(G),f.html5Qrcode.start(G,Mj(f.config),f.qrCodeSuccessCallback,f.qrCodeErrorCallback).then(function(R){S.disabled=!1,S.style.display="inline-block",D(!1);var z=f.html5Qrcode.getRunningTrackCameraCapabilities();d.config.showTorchButtonIfSupported===!0&&M(z),d.config.showZoomSliderIfSupported===!0&&w(z)}).catch(function(R){f.showHideScanTypeSwapLink(!0),N.enable(),D(!0),f.setHeaderMessage(R,Vr.STATUS_WARNING)})}),N.hasSingleItem()&&b.click(),S.addEventListener("click",function(_){if(!f.html5Qrcode)throw"html5Qrcode not defined";S.disabled=!0,f.html5Qrcode.stop().then(function(G){d.scanTypeSelector.hasMoreThanOneScanType()&&f.showHideScanTypeSwapLink(!0),N.enable(),b.disabled=!1,S.style.display="none",b.style.display="inline-block",E&&(E.reset(),E.hide()),m.removeOnCameraZoomValueChangeCallback(),m.hide(),f.insertCameraScanImageToScanRegion()}).catch(function(G){S.disabled=!1,f.setHeaderMessage(G,Vr.STATUS_WARNING)})}),f.persistedDataManager.getLastUsedCameraId()){var B=f.persistedDataManager.getLastUsedCameraId();N.hasValue(B)?(N.setValue(B),b.click()):f.persistedDataManager.resetLastUsedCameraId()}},l.prototype.createSectionSwap=function(){var c=this,d=aa.textIfCameraScanSelected(),f=aa.textIfFileScanSelected(),g=document.getElementById(this.getDashboardSectionId()),m=document.createElement("div");m.style.textAlign="center";var w=un.createElement("span",this.getDashboardSectionSwapLinkId());w.style.textDecoration="underline",w.style.cursor="pointer",w.innerText=Qn.isCameraScanType(this.currentScanType)?d:f,w.addEventListener("click",function(){if(!c.sectionSwapAllowed){c.verbose&&c.logger.logError("Section swap called when not allowed");return}c.resetHeaderMessage(),c.fileSelectionUi.resetValue(),c.sectionSwapAllowed=!1,Qn.isCameraScanType(c.currentScanType)?(c.clearScanRegion(),c.getCameraScanRegion().style.display="none",c.fileSelectionUi.show(),w.innerText=f,c.currentScanType=Kn.SCAN_TYPE_FILE,c.insertFileScanImageToScanRegion()):(c.clearScanRegion(),c.getCameraScanRegion().style.display="block",c.fileSelectionUi.hide(),w.innerText=d,c.currentScanType=Kn.SCAN_TYPE_CAMERA,c.insertCameraScanImageToScanRegion(),c.startCameraScanIfPermissionExistsOnSwap()),c.sectionSwapAllowed=!0}),m.appendChild(w),g.appendChild(m)},l.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var c=this,d=this;if(this.persistedDataManager.hasCameraPermissions()){s1.hasPermissions().then(function(f){if(f){var g=document.getElementById(d.getCameraPermissionButtonId());if(!g)throw c.logger.logError("Permission button not found, fail;"),"Permission button not found";g.click()}else d.persistedDataManager.setHasPermission(!1)}).catch(function(f){d.persistedDataManager.setHasPermission(!1)});return}},l.prototype.resetHeaderMessage=function(){var c=document.getElementById(this.getHeaderMessageContainerId());c.style.display="none"},l.prototype.setHeaderMessage=function(c,d){d||(d=Vr.STATUS_DEFAULT);var f=this.getHeaderMessageDiv();switch(f.innerText=c,f.style.display="block",d){case Vr.STATUS_SUCCESS:f.style.background="rgba(106, 175, 80, 0.26)",f.style.color="#477735";break;case Vr.STATUS_WARNING:f.style.background="rgba(203, 36, 49, 0.14)",f.style.color="#cb2431";break;case Vr.STATUS_DEFAULT:default:f.style.background="rgba(0, 0, 0, 0)",f.style.color="rgb(17, 17, 17)";break}},l.prototype.showHideScanTypeSwapLink=function(c){this.scanTypeSelector.hasMoreThanOneScanType()&&(c!==!0&&(c=!1),this.sectionSwapAllowed=c,this.getDashboardSectionSwapLink().style.display=c?"inline-block":"none")},l.prototype.insertCameraScanImageToScanRegion=function(){var c=this,d=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){d.innerHTML="<br>",d.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(f){d.innerHTML="<br>",d.appendChild(c.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=yj,this.cameraScanImage.alt=aa.cameraScanAltText()},l.prototype.insertFileScanImageToScanRegion=function(){var c=this,d=document.getElementById(this.getScanRegionId());if(this.fileScanImage){d.innerHTML="<br>",d.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(f){d.innerHTML="<br>",d.appendChild(c.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=bj,this.fileScanImage.alt=aa.fileScanAltText()},l.prototype.clearScanRegion=function(){var c=document.getElementById(this.getScanRegionId());c.innerHTML=""},l.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},l.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},l.prototype.getDashboardSectionSwapLinkId=function(){return Gr.SCAN_TYPE_CHANGE_ANCHOR_ID},l.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},l.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},l.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},l.prototype.getCameraPermissionButtonId=function(){return Gr.CAMERA_PERMISSION_BUTTON_ID},l.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},l.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},l.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},l}();function Ap(){const{bill_id:l}=xs(),[c,d]=k.useState(!1),[f,g]=k.useState(null),[m,w]=k.useState(!1),[N,C]=k.useState(null),[b,S]=k.useState([]),[E,M]=k.useState(!1),[D,B]=k.useState(""),[_,G]=k.useState(null),[R,z]=k.useState(""),F=k.useRef(null),V=ia(),{auth:Q}=k.useContext(br),$=async()=>{try{if(!l)return;const ee=await pe.get(`/user-bills/users/${Q.user.id}/bills`);if(ee.data.success&&Array.isArray(ee.data.data)){const oe=ee.data.data.find(we=>we.id===l);oe?C(oe):(se.error("You are not assigned to this bill"),V("/my-bills"))}}catch(ee){console.error("Error fetching bill details:",ee),se.error("Error loading bill information")}},P=async()=>{try{const ee=await pe.get(`/user-apartments/users/${Q.user.id}/apartments`);return ee.data.success&&Array.isArray(ee.data.data)?(S(ee.data.data),ee.data.data):[]}catch(ee){return console.error("Error fetching user apartments:",ee),se.error("Error loading your assigned apartments"),[]}},X=async(ee,oe)=>{try{if(console.log("Checking access for house ID:",ee),!ee)return{access:!1,reason:"Invalid house ID"};const we=await pe.get(`/houses/${ee}`);if(!we.data.success||!we.data.data)return{access:!1,reason:"House not found in the system"};const K=we.data.data;let ge=null;if(K.apartment_id)try{const ie=await pe.get(`/apartments/${K.apartment_id}`);ie.data.success&&(ge=ie.data.data)}catch(ie){console.error("Error fetching apartment:",ie)}let Oe=null;if(K.floor_id)try{const ie=await pe.get(`/floors/${K.floor_id}`);ie.data.success&&(Oe=ie.data.data)}catch(ie){console.error("Error fetching floor:",ie)}const xe={...K,apartment:ge,floor:Oe};if(G(xe),!oe.some(ie=>ie.id===K.apartment_id))return{access:!1,reason:`You are not assigned to "${ge?.name||"this apartment"}"`};let Fe=!1;try{const ie=await pe.get(`/bill-assignments/house-details?house_id=${ee}&apartment_id=${K.apartment_id}`);ie.data.success&&(Fe=(Array.isArray(ie.data.data)?ie.data.data:ie.data.data?.bills||[]).some(ye=>ye.bill_id===l||ye.id===l))}catch(ie){console.error("Error checking bill assignments:",ie);try{const Qe=await pe.get(`/user-bills/users/${Q.user.id}/bills`);Qe.data.success&&Array.isArray(Qe.data.data)&&Qe.data.data.find(dt=>dt.id===l)&&(Fe=!0)}catch(Qe){console.error("Alternative check failed:",Qe)}}return Fe?N?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${N?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:xe,apartmentId:K.apartment_id,floorId:K.floor_id,houseId:K.id}:{access:!1,reason:`This house does not have "${N?.bill_name||"the selected bill"}" assigned`}}catch(we){if(console.error("Error checking house access:",we),we.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const K=we.response?.status;return K===401?{access:!1,reason:"Session expired. Please login again."}:K===403?{access:!1,reason:"Access denied to this resource."}:K===404?{access:!1,reason:"House not found."}:K===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},Z=async()=>{if(!R.trim()){se.error("Please enter a house ID");return}try{w(!0),F.current&&F.current.clear().catch(K=>{console.log("Scanner clear error:",K)}),d(!1);const ee=R.trim();g({houseId:ee,source:"manual"});const oe=await P(),we=await X(ee,oe);we.access?(M(!0),se.success(`Access granted! House ${_?.house_id||ee} has ${N?.bill_name} bill.`)):(M(!1),B(we.reason||"Access denied"),se.error(we.reason||"Access denied"))}catch(ee){console.error("Error processing manual input:",ee),se.error(ee.message||"Invalid house ID. Please enter a valid house ID.")}finally{w(!1)}},de=ee=>{z(ee.target.value)},he=ee=>{ee.key==="Enter"&&Z()},re=()=>{d(!0),g(null),M(!1),B(""),G(null),z(""),setTimeout(()=>{try{F.current&&F.current.clear().catch(ee=>{console.log("Scanner clear error:",ee)}),F.current=new Rj("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1},!1),F.current.render(ee=>{le(ee)},ee=>{console.log("QR Scan error:",ee)})}catch(ee){console.error("Scanner initialization error:",ee),se.error("Failed to initialize scanner. Please refresh and try again.")}},100)},le=async ee=>{try{w(!0),F.current&&await F.current.clear(),d(!1),z(""),console.log("Scanned house ID:",ee);const oe=ee.trim();g({houseId:oe,source:"qr"});const we=await P(),K=await X(oe,we);K.access?(M(!0),se.success(`Access granted! House ${_?.house_id||oe} has ${N?.bill_name} bill.`)):(M(!1),B(K.reason||"Access denied"),se.error(K.reason||"Access denied"))}catch(oe){console.error("Error processing QR code:",oe),se.error(oe.message||"Invalid QR code. Please scan a valid house QR code."),d(!1)}finally{w(!1)}},W=()=>{F.current&&F.current.clear().catch(ee=>{console.log("Scanner clear error on reset:",ee)}),d(!1),g(null),M(!1),B(""),G(null),z("")},U=()=>{V("/my-bills")},H=()=>{if(!_||!f){se.error("House data not available");return}V(`/calculate-measurable-bill/${l}`,{state:{scannedData:f,billData:N,actualBillId:l,houseData:_,houseId:_.id,source:f.source}})};return k.useEffect(()=>()=>{F.current&&F.current.clear().catch(ee=>{console.log("Scanner clear error on unmount:",ee)})},[]),k.useEffect(()=>{Q?.user?.id&&l&&($(),P())},[Q?.user?.id,l]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(xa,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:[e.jsx(Qt,{size:16}),e.jsx("span",{children:"Cancel"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsx("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:"Position QR code within frame"})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",N?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),m&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(kt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),f&&!m&&!c&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:W,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(Ad,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),E?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(Ed,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",N?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:H,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(ya,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Q1,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:D}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",N?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',N?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!f&&!c&&!m&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:R,onChange:de,onKeyPress:he,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:Z,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(ya,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Lf,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:N?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:re,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Ev,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:U,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function Ij(){const{bill_id:l}=xs(),c=ia(),d=Vs(),{auth:f}=k.useContext(br),g=d.state?.scannedData||null,m=d.state?.billData||null,w=d.state?.houseData||null,N=d.state?.actualBillId||l,C=d.state?.source||"qr";console.log(" CalculateMeasurableBill Data:",{bill_id:l,actualBillId:N,source:C,scannedData:g,houseDetails:w,billData:m});const[b,S]=k.useState(!1),[E,M]=k.useState(null),[D,B]=k.useState([]),[_,G]=k.useState([]),[R,z]=k.useState(null),[F,V]=k.useState(null),[Q,$]=k.useState(""),[P,X]=k.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[Z,de]=k.useState(null),[he,re]=k.useState([]),[le,W]=k.useState(!1),[U,H]=k.useState(!1),ee=ra.useRef(P.month),oe=ra.useRef(P.year),we=be=>["January","February","March","April","May","June","July","August","September","October","November","December"][be-1]||"";k.useEffect(()=>{if(!l||!N){se.error("Bill ID is missing"),c("/my-bills");return}if(!g||!w||!m){se.error("House data is incomplete. Please go back and try again."),c(`/measurable-bills/${l}`);return}console.log(" Data validated:",{bill_id:l,actualBillId:N,source:C,scannedData:g,houseDetails:w,billData:m})},[l,N,g,w,m,c]);const K=async()=>{try{console.log("Loading bill ranges for bill_id:",N);const be=await pe.get(`/billranges/bills/${N}`);console.log("Bill ranges API response FULL:",be);let Ye=[];if(Array.isArray(be.data))Ye=be.data;else if(be.data.data&&Array.isArray(be.data.data))Ye=be.data.data;else if(be.data.success&&be.data.data)Array.isArray(be.data.data)?Ye=be.data.data:typeof be.data.data=="object"&&(Ye=Object.values(be.data.data));else if(typeof be.data=="object"){for(const Ae in be.data)if(Array.isArray(be.data[Ae])){Ye=be.data[Ae];break}}if(console.log("Extracted rangesData:",Ye),Ye.length>0){const Ae=Ye.sort((Xe,Ge)=>parseFloat(Xe.fromRange||Xe.from_range||Xe.from||0)-parseFloat(Ge.fromRange||Ge.from_range||Ge.from||0));B(Ae),Ae.length>0&&z(Ae[0])}else B([]),se.warning("No bill ranges data available in response")}catch(be){console.error("Error loading bill ranges:",be),se.error("Failed to load bill ranges."),B([])}},ge=async()=>{try{const be=we(P.month),Ye=P.month;console.log(" Loading prices for:",{monthNumber:Ye,monthName:be,year:P.year,bill_id:N}),G([]),V(null);let Ae=null,Xe=null;try{Ae=await pe.get("/billprice",{params:{bill_id:N,month:be,year:P.year}})}catch(ae){Xe=ae;try{Ae=await pe.get("/billprice",{params:{bill_id:N,month:Ye,year:P.year}})}catch(je){Xe=je;try{Ae=await pe.get(`/billprice/${N}/${be}/${P.year}`)}catch(We){Xe=We;try{Ae=await pe.get(`/billprice/${N}/${Ye}/${P.year}`)}catch(xt){Xe=xt;try{Ae=await pe.get("/api/billprice",{params:{bill_id:N,month:be,year:P.year}})}catch(Mt){throw Xe=Mt,new Error("All API attempts failed")}}}}}let Ge=[];if(Ae.data?.success)Array.isArray(Ae.data.data)?Ge=Ae.data.data:Ae.data.data&&typeof Ae.data.data=="object"?Ge=Object.values(Ae.data.data):Ge=[];else if(Array.isArray(Ae.data))Ge=Ae.data;else if(Ae.data?.data&&Array.isArray(Ae.data.data))Ge=Ae.data.data;else if(Ae.data&&typeof Ae.data=="object"){for(const ae in Ae.data)if(Array.isArray(Ae.data[ae])){Ge=Ae.data[ae];break}}console.log(" Processed bill prices:",Ge);const Me=Ge.filter(ae=>{const je=ae.month,We=ae.year,xt=je===be||je===Ye.toString(),Mt=We===P.year||We===P.year.toString();return xt&&Mt});console.log("Filtered prices for current month/year:",Me),Me.length>0?(G(Me),R&&Oe(Me)):Ge.length>0?(G(Ge),R&&Oe(Ge),se.success(`Loaded ${Ge.length} price(s) for ${be}`)):(G([]),se.info(`No prices found for ${be} ${P.year}. Please set prices first.`))}catch(be){console.error("Error loading bill prices:",be),G([]),V(null),se.error(`Failed to load prices for ${we(P.month)}. Check console.`)}},Oe=(be=_)=>{if(!R||!be||be.length===0){V(null);return}const Ye=be.find(Ae=>{const Xe=Ae.billrange_id||Ae.range_id||Ae.id,Ge=R.id||R._id;return Xe&&Xe.toString()===Ge.toString()});V(Ye||null)},xe=async()=>{let be=null;if(be=g?.houseId||g?.hse,!be||!N){console.log("Missing houseId or bill_id"),X(Ye=>({...Ye,previous_reading:"0"}));return}try{W(!0),console.log(" Loading previous reading for:",{houseId:be,bill_id:N,source:C});const Ye=await pe.get("/generate-measurable-bills/previous-reading",{params:{house_id:be,bill_id:N}});if(console.log(" API Response:",Ye.data),Ye.data.success){const Ae=Ye.data.data?.current_reading||0;X(Xe=>({...Xe,previous_reading:Ae.toString()})),console.log(` Previous reading set to: ${Ae}`)}}catch(Ye){console.error(" Error loading previous reading:",Ye),Ye.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),X(Ae=>({...Ae,previous_reading:"0"}))):(se.error("Could not load previous reading"),X(Ae=>({...Ae,previous_reading:"0"})))}finally{W(!1)}},ve=async(be,Ye)=>{const Ae={...P,[be]:parseInt(Ye)};X(Ae);const Xe=be==="month"&&Ye!==ee.current,Ge=be==="year"&&Ye!==oe.current;(Xe||Ge)&&(be==="month"&&(ee.current=Ye),be==="year"&&(oe.current=Ye),G([]),V(null),de(null),re([]),X(Me=>({...Me,[be]:parseInt(Ye),total_amount:"",used_units:""})),ge(),xe())},Fe=be=>{const{name:Ye,value:Ae}=be.target;if(Ye==="month"||Ye==="year"){ve(Ye,Ae);return}const Xe={...P,[Ye]:Ae};if(X(Xe),Ye==="current_reading"){const Ge=parseFloat(Ae)||0,Me=parseFloat(P.previous_reading)||0,ae=Ge-Me;if(ae>=0)if(Xe.used_units=ae.toString(),Xe.total_amount="",ae>0&&D.length>0&&_.length>0){const{totalAmount:je,details:We}=ie(ae);Xe.total_amount=je.toFixed(2),Qe(ae,je,We)}else de(null),re([]);else se.error("Current reading cannot be less than previous reading")}X(Xe)},ie=be=>{if(console.log("=== SEQUENTIAL CALCULATION ==="),console.log("Used units:",be),!D.length||!_.length)return console.log("Missing ranges or prices"),{totalAmount:0,details:[]};const Ye=[...D].sort((Me,ae)=>parseFloat(Me.fromRange||Me.from_range||Me.from||0)-parseFloat(ae.fromRange||ae.from_range||ae.from||0));let Ae=parseFloat(be),Xe=0;const Ge=[];for(let Me=0;Me<Ye.length&&Ae>0;Me++){const ae=Ye[Me],je=_.find(et=>{const At=et.billrange_id||et.range_id||et.id,pt=ae.id||ae._id;return At&&At.toString()===pt.toString()});if(!je){console.warn(`No price found for range ${ae.id}`);continue}const We=parseFloat(ae.fromRange||ae.from_range||ae.from||0),xt=ae.toRange?parseFloat(ae.toRange||ae.to_range||ae.to):1/0,Mt=parseFloat(je.unitprice||je.uniprice||0),Vt=parseFloat(je.fixedamount||0);let Re=0;if(xt===1/0)Re=Ae,Ae=0;else{const et=xt-We+1;Me===0?be<=et?Re=be:Re=et:Re=Math.min(et,Ae),Ae-=Re}if(Re>0){const et=Re*Mt+Vt;Xe+=et,Ge.push({range:`${We} - ${xt===1/0?"":xt}`,units:Re,unitPrice:Mt,fixedAmount:Vt,rangeAmount:et,calculation:`${Re}  ${Mt} + ${Vt} = ${et.toFixed(2)}`})}}return console.log("=== FINAL CALCULATION ==="),console.log("Total amount:",Xe.toFixed(2)),{totalAmount:Xe,details:Ge}},Qe=(be,Ye,Ae)=>{de({used_units:be,total_amount:Ye,calculated_at:new Date().toISOString()}),re(Ae)},ye=async()=>{if(!Z){se.error("Please calculate the bill first");return}const be=g?.houseId||g?.hse,Ye=w?.apartment_id,Ae=w?.floor_id;if(console.log(" DEBUG - Extracted IDs:",{houseId:be,apartmentId:Ye,floorId:Ae,source:C,scannedData:g,houseDetails:w}),!be||!Ye||!Ae){se.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:be,apartmentId:Ye,floorId:Ae,source:C,scannedData:g,houseDetails:w});return}try{H(!0);const Xe={house_id:be,apartment_id:Ye,floor_id:Ae,bill_id:N,year:parseInt(P.year),month:we(parseInt(P.month)),previous_reading:parseFloat(P.previous_reading)||0,current_reading:parseFloat(P.current_reading)||0,used_units:parseFloat(P.used_units)||Z.used_units,totalAmount:parseFloat(P.total_amount)||Z.total_amount,due_date:Q||null,source:C};console.log(" Generating bill with payload:",Xe);const Ge=await pe.post("/generate-measurable-bills/from-calculation",Xe);console.log("API Response:",Ge.data),Ge.data.success?(se.success("Bill generated successfully!"),X({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:P.current_reading,current_reading:"",used_units:"",total_amount:""}),de(null),re([]),setTimeout(()=>{c(`/house-bill-meter/${l}`)},2e3)):se.error(Ge.data.message||"Failed to generate bill")}catch(Xe){console.error("Error generating bill:",Xe);let Ge="Failed to generate bill";Xe.response?.data?.message?Ge=Xe.response.data.message:Xe.message&&(Ge=Xe.message),se.error(Ge)}finally{H(!1)}},dt=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],rt=new Date().getFullYear(),lt=[rt-1,rt,rt+1];k.useEffect(()=>{if(P.used_units&&parseFloat(P.used_units)>0&&D.length>0&&_.length>0){const be=parseFloat(P.used_units),{totalAmount:Ye,details:Ae}=ie(be);X(Xe=>({...Xe,total_amount:Ye.toFixed(2)})),Qe(be,Ye,Ae)}},[D,_]),k.useEffect(()=>{R&&_.length>0&&Oe()},[R,_]),k.useEffect(()=>{K(),xe(),ee.current=P.month,oe.current=P.year},[N,g]),k.useEffect(()=>{N&&P.month&&P.year&&D.length>0&&ge()},[N,P.month,P.year,D.length]);const Ze=we(P.month);return{houseId:w?.house_id||g?.houseId,apartment:w?.apartment?.name||"N/A",floor:w?.floor?.floor_id||"N/A",houseDatabaseId:w?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(xa,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Ta,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>c(`/house-bill-meter/${l}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",m?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:C==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${C==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:C==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{K(),ge(),xe(),se.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:P.month,onChange:Fe,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0,children:dt.map(be=>e.jsx("option",{value:be.value,children:be.label},be.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("select",{name:"year",value:P.year,onChange:Fe,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0,children:lt.map(be=>e.jsx("option",{value:be,children:be},be))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:Q,onChange:be=>$(be.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:P.previous_reading,onChange:Fe,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0,readOnly:!0}),le&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-blue-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:P.current_reading,onChange:Fe,placeholder:"Enter current reading",min:P.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",Ze," ",P.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:P.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),P.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(P.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>c(`/measurable-bills/${l}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:ye,disabled:!Z||U,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:U?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function Oj(){const[l,c]=k.useState([]),[d,f]=k.useState(!0),[g,m]=k.useState(""),[w,N]=k.useState(!1),[C,b]=k.useState(!1),{auth:S}=k.useContext(br),E=ia(),M=async()=>{try{f(!0);const z=await pe.get(`/user-bills/users/${S.user.id}/bills`);z.data.success?c(z.data.data||[]):(se.error("Failed to load bills"),c([]))}catch(z){console.error("Error fetching bills:",z),se.error("Error loading your bills"),c([])}finally{f(!1)}};k.useEffect(()=>{S?.user?.id&&M()},[S?.user?.id]);const D=l.filter(z=>z.bill_name?.toLowerCase().includes(g.toLowerCase())||z.billtype?.toLowerCase().includes(g.toLowerCase())),B=z=>{try{return new Date(z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},_=z=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(cd,{size:12,className:"inline mr-1"})}})[z?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(ya,{size:12,className:"inline mr-1"})},G={totalBills:l.length,measurableBills:l.filter(z=>z.billtype?.toLowerCase()==="measurable").length},R=z=>{E(`/house-bill-meter/${z}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(xa,{onCollapse:N})}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>b(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${C?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(xa,{onCollapse:N})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${w?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:G.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:G.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(fs,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:g,onChange:z=>m(z.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(kt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):D.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mr,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:g?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:g?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:D.map(z=>{const F=_(z.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(mr,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:z.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F.class}`,children:[F.icon,z.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[z.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(cd,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>R(z.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(dm,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",B(z.assigned_at)]})})]},z.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:D.map(z=>{const F=_(z.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(mr,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:z.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${F.class}`,children:[F.icon,z.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[z.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(cd,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>R(z.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(dm,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",B(z.assigned_at)]})})]},z.id)})})]})}),D.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(fs,{size:20})})})]})})]}),e.jsx(qt,{position:"top-right",autoClose:3e3})]})}function Bj(){const[l,c]=k.useState(!1),[d,f]=k.useState(!1),[g,m]=k.useState("manual"),w=ia(),{bill_id:N}=xs(),C=()=>{w("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(xa,{onCollapse:c})}),d&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>f(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${d?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(xa,{onCollapse:c})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${l?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:C,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Fs,{size:16})}),e.jsx(mr,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:C,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Fs,{size:16})}),e.jsx(mr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(Ap,{})})]})})]}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function Lj(){const[l,c]=k.useState([]),[d,f]=k.useState([]),[g,m]=k.useState(0),[w,N]=k.useState(0),[C,b]=k.useState(!1),[S,E]=k.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[M,D]=k.useState([]),[B,_]=k.useState([]),[G,R]=k.useState([]),[z,F]=k.useState(null),[V,Q]=k.useState(!1),[$,P]=k.useState(!1),[X,Z]=k.useState(!1),[de,he]=k.useState(null),[re,le]=k.useState(!1),[W,U]=k.useState(!1),[H,ee]=k.useState(!1),[oe,we]=k.useState(!1),[K,ge]=k.useState(0),[Oe,xe]=k.useState(""),ve=["","January","February","March","April","May","June","July","August","September","October","November","December"],Fe=new Date().getFullYear();Array.from({length:10},(Re,et)=>(Fe-5+et).toString());const ie=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];k.useEffect(()=>{Qe()},[]);const Qe=async()=>{try{Q(!0);const Re=await pe.get("/apartments");Re.data.success?D(Re.data.data||[]):D([])}catch(Re){console.error("Error loading apartments:",Re),se.error("Failed to load apartments"),D([])}finally{Q(!1)}};k.useEffect(()=>{S.apartment_id?ye(S.apartment_id):(_([]),R([]),E(Re=>({...Re,floor_id:"",house_id:""})))},[S.apartment_id]),k.useEffect(()=>{S.floor_id&&S.apartment_id?dt(S.floor_id):(R([]),E(Re=>({...Re,house_id:""})))},[S.floor_id,S.apartment_id]);const ye=async Re=>{try{P(!0);const et=await pe.get(`/floors?apartment_id=${Re}`);et.data.success?_(et.data.data||[]):_([])}catch(et){console.error("Error loading floors:",et),se.error("Failed to load floors"),_([])}finally{P(!1)}},dt=async Re=>{try{Z(!0);const et=await pe.get(`/houses?floor_id=${Re}&apartment_id=${S.apartment_id}`);et.data.success?R(et.data.data||[]):R([])}catch(et){console.error("Error loading houses:",et),se.error("Failed to load houses"),R([])}finally{Z(!1)}};k.useEffect(()=>{if(S.house_id){const Re=setTimeout(()=>{rt(S.house_id)},100);return()=>clearTimeout(Re)}},[S.house_id,S.year,S.month,S.payment_status]);const rt=async Re=>{if(!(!Re||!S.apartment_id||!S.floor_id||!S.year))try{b(!0);const et=G.find(ut=>ut.id===Re),At=M.find(ut=>ut.id===S.apartment_id),pt=B.find(ut=>ut.id===S.floor_id);et&&At&&pt&&F({houseNumber:et.house_id,apartmentName:At.name,floorNumber:pt.floor_id,houseId:et.id});const Yt=S.payment_status.split(",");let Tt=[];for(const ut of Yt){const Bt=new URLSearchParams({house_id:Re,apartment_id:S.apartment_id,floor_id:S.floor_id,year:S.year,payment_status:ut.trim()});S.month&&Bt.append("month",S.month);const ms=await pe.get(`/bill-payments?${Bt}`);ms.data.success&&(Tt=[...Tt,...ms.data.data||[]])}c(Tt),lt(Tt);const st=Tt.filter(ut=>ut.payment_status==="Pending").reduce((ut,Bt)=>ut+(parseFloat(Bt.pendingAmount)||0),0),$e=Tt.filter(ut=>ut.payment_status==="Partial").reduce((ut,Bt)=>ut+(parseFloat(Bt.pendingAmount)||0),0);m(st),N($e),ge(0),xe("");const qe=Tt.filter(ut=>ut.payment_status==="Pending").length,$t=Tt.filter(ut=>ut.payment_status==="Partial").length;if(Tt.length>0){let ut=`Found ${qe} pending and ${$t} partial bills for House ${et?.house_id}`;S.month?ut+=` (${S.month} ${S.year})`:ut+=` (Year: ${S.year})`,se.success(ut)}else se.info("No bills found for the selected criteria")}catch(et){console.error("Error loading bills:",et),se.error("Failed to load bills"),c([]),f([]),m(0),N(0)}finally{b(!1)}},lt=(Re=l)=>{const et=S.payment_status.split(","),At=Re.filter(pt=>et.includes(pt.payment_status));f(At)},Ze=Re=>{E(Tt=>({...Tt,payment_status:Re})),lt();const et=Re.split(","),At=l.filter(Tt=>et.includes(Tt.payment_status)),pt=At.filter(Tt=>Tt.payment_status==="Pending").reduce((Tt,st)=>Tt+(parseFloat(st.pendingAmount)||0),0),Yt=At.filter(Tt=>Tt.payment_status==="Partial").reduce((Tt,st)=>Tt+(parseFloat(st.pendingAmount)||0),0);m(pt),N(Yt)},Je=(Re,et)=>{E(At=>{const pt={...At,[Re]:et};return Re==="apartment_id"?(pt.floor_id="",pt.house_id=""):Re==="floor_id"&&(pt.house_id=""),pt})},be=()=>{E({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),D([]),_([]),R([]),c([]),f([]),m(0),N(0),F(null),ge(0),xe(""),Qe()},Ye=Re=>{he(Re),le(!0)},Ae=()=>{U(!0)},Xe=()=>{const Re=((g+w)*.5).toFixed(2);ge(Re),xe(new Date().toISOString().split("T")[0]),ee(!0)},Ge=()=>{le(!1),U(!1),ee(!1),he(null)},Me=Re=>{const et=l.map(Yt=>Yt.id===Re.id?Re:Yt);c(et),lt(et);const At=et.filter(Yt=>Yt.payment_status==="Pending").reduce((Yt,Tt)=>Yt+(parseFloat(Tt.pendingAmount)||0),0),pt=et.filter(Yt=>Yt.payment_status==="Partial").reduce((Yt,Tt)=>Yt+(parseFloat(Tt.pendingAmount)||0),0);m(At),N(pt),Ge(),Re.payment_status==="Paid"&&se.success("Payment completed successfully!")},ae=Re=>{const et=typeof Re=="string"?parseFloat(Re):Re;return isNaN(et)?"0.00":et.toFixed(2)},je=async()=>{try{b(!0);const Re=d.map(At=>pe.patch(`/bill-payments/${At.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(At.paidAmount)+parseFloat(At.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all(Re);const et=g+w;se.success(`Successfully paid ${d.length} bills totaling $${et.toFixed(2)}`),await rt(S.house_id),U(!1)}catch(Re){console.error("Error processing total payment:",Re),se.error("Failed to process total payment")}finally{b(!1)}},We=async()=>{try{b(!0);const Re=g+w,et=parseFloat(K);if(et<=0){se.error("Payment amount must be greater than 0");return}if(et>Re){se.error(`Payment amount cannot exceed total amount of $${ae(Re)}`);return}const pt=d.map(Yt=>{const st=(parseFloat(Yt.pendingAmount)||0)/Re,$e=et*st;return{...Yt,additionalPayment:$e}}).map(Yt=>{const Tt=parseFloat(Yt.paidAmount)+Yt.additionalPayment,st=parseFloat(Yt.pendingAmount)-Yt.additionalPayment;let $e="Partial";return st<=.01?$e="Paid":Tt>0&&($e="Partial"),pe.patch(`/bill-payments/${Yt.id}/status`,{payment_status:$e,paidAmount:Tt,paid_at:Oe||new Date().toISOString().split("T")[0]})});await Promise.all(pt),se.success(`Successfully paid $${ae(et)} across ${d.length} bills`),await rt(S.house_id),ee(!1)}catch(Re){console.error("Error processing partial payment:",Re),se.error("Failed to process partial payment")}finally{b(!1)}},xt=Re=>{switch(Re){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Mt=Re=>{switch(Re){case"Paid":return e.jsx($n,{size:16,className:"text-green-600"});case"Partial":return e.jsx(bf,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(bf,{size:16,className:"text-yellow-600"});default:return null}},Vt=g+w;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(xa,{onCollapse:we}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${oe?"ml-20":"ml-64"}`,children:[e.jsx(Ta,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:be,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:S.year,onChange:Re=>Je("year",Re.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:S.month,onChange:Re=>Je("month",Re.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),ve.slice(1).map(Re=>e.jsx("option",{value:Re,children:Re},Re))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:S.apartment_id,onChange:Re=>Je("apartment_id",Re.target.value),disabled:V,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),M.map(Re=>e.jsx("option",{value:Re.id,children:Re.name},Re.id))]}),V&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:S.floor_id,onChange:Re=>Je("floor_id",Re.target.value),disabled:!S.apartment_id||$,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),B.map(Re=>e.jsxs("option",{value:Re.id,children:["Floor ",Re.floor_id]},Re.id))]}),$&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:S.house_id,onChange:Re=>Je("house_id",Re.target.value),disabled:!S.floor_id||X,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),G.map(Re=>e.jsxs("option",{value:Re.id,children:["House ",Re.house_id]},Re.id))]}),X&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.map(Re=>e.jsxs("button",{type:"button",onClick:()=>Ze(Re.value),className:`px-3 py-1 text-sm rounded-lg border ${S.payment_status===Re.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Re.color}`}),Re.label]},Re.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>S.house_id&&rt(S.house_id),disabled:!S.house_id||!S.year||!S.apartment_id||!S.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(wf,{size:16}),"Load Bills"]})})]}),z&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(wr,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",z.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[z.apartmentName,"  Floor ",z.floorNumber,S.month?`  ${S.month} ${S.year}`:`  Year: ${S.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",S.payment_status==="Pending,Partial"?"Pending & Partial Bills":S.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Pending Bills"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",ae(g)]}),e.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:[l.filter(Re=>Re.payment_status==="Pending").length," bills"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Partial Bills"})]}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-300 font-bold text-2xl",children:["$",ae(w)]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[l.filter(Re=>Re.payment_status==="Partial").length," bills"]})]})]}),C?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($n,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>Ze("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:Xe,disabled:d.length===0||Vt<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(os,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:Ae,disabled:d.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(os,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:d.map(Re=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${xt(Re.payment_status)}`,children:[Mt(Re.payment_status),Re.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:Re.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:Re.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[Re.month," ",Re.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",ae(Re.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",ae(Re.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Ye(Re),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx(os,{size:18})})})})]},Re.id))})]})})]})]})]})})]}),re&&e.jsx(yp,{payment:de,onClose:Ge,onUpdate:Me}),W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx(os,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",d.length," selected bills for House ",z?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[d.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",ae(g)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",ae(w)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[z?.apartmentName," - House ",z?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:S.month?`${S.month} ${S.year}`:`Year: ${S.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",ae(Vt)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>U(!1),disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:je,disabled:C,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${ae(Vt)}`})]})]})})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx(os,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",d.length," bills for House ",z?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[d.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",ae(Vt)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[z?.apartmentName," - House ",z?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:Re=>{Re.preventDefault(),We()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(os,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Vt,value:K,onChange:Re=>ge(Re.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",ae(Vt)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",ae(Vt-parseFloat(K||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(wi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:Oe,onChange:Re=>xe(Re.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",ae(K)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",ae(Vt-parseFloat(K||0))]})]}),parseFloat(K||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",d.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>ee(!1),disabled:C,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:C||!K||parseFloat(K)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:C?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${ae(K)}`})]})]})]})})}),e.jsx(qt,{position:"top-center",autoClose:3e3})]})}function Fj(){return e.jsx(h2,{children:e.jsx(ev,{children:e.jsxs(Vb,{children:[e.jsx(zt,{path:"/",element:e.jsx(j2,{})}),e.jsx(zt,{path:"/login",element:e.jsx(w3,{})}),e.jsx(zt,{path:"/register",element:e.jsx(v3,{})}),e.jsx(zt,{path:"/verify",element:e.jsx(N3,{})}),e.jsx(zt,{path:"/sidebar",element:e.jsx(cN,{})}),e.jsx(zt,{path:"/navbar",element:e.jsx(Ta,{})}),e.jsx(zt,{path:"/admindashboard",element:e.jsx(j3,{})}),e.jsx(zt,{path:"/apartmentview",element:e.jsx(E3,{})}),e.jsx(zt,{path:"/userview",element:e.jsx(R3,{})}),e.jsx(zt,{path:"/floors/:id",element:e.jsx(L3,{})}),e.jsx(zt,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(N4,{})}),e.jsx(zt,{path:"/housetype/:apartment_id",element:e.jsx(dp,{})}),e.jsx(zt,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(V3,{})}),e.jsx(zt,{path:"/bills/:apartment_id",element:e.jsx(hp,{})}),e.jsx(zt,{path:"/forgot-password",element:e.jsx(j4,{})}),e.jsx(zt,{path:"/reset-password",element:e.jsx(C4,{})}),e.jsx(zt,{path:"/complete-registration",element:e.jsx(k4,{})}),e.jsx(zt,{path:"/manage-bills",element:e.jsx(A4,{})}),e.jsx(zt,{path:"/bills-and-calculations",element:e.jsx(M4,{})}),e.jsx(zt,{path:"/billranges/:bill_id",element:e.jsx(I4,{})}),e.jsx(zt,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(L4,{})}),e.jsx(zt,{path:"/employee-dashboard",element:e.jsx(H4,{})}),e.jsx(zt,{path:"/role",element:e.jsx(U4,{})}),e.jsx(zt,{path:"/profile-page",element:e.jsx(V4,{})}),e.jsx(zt,{path:"/my-apartments",element:e.jsx(G4,{})}),e.jsx(zt,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(Y4,{})}),e.jsx(zt,{path:"/bill-payments",element:e.jsx(X4,{})}),e.jsx(zt,{path:"/measurable-bills",element:e.jsx(Ap,{})}),e.jsx(zt,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(Ij,{})}),e.jsx(zt,{path:"/my-bills",element:e.jsx(Oj,{})}),e.jsx(zt,{path:"/house-bill-meter/:bill_id",element:e.jsx(Bj,{})}),e.jsx(zt,{path:"/bill-payment-settle",element:e.jsx(Lj,{})})]})})})}function Pj(){const[l,c]=k.useState(null);return e.jsx(br.Provider,{value:{auth:l,setAuth:c},children:e.jsx(Fj,{})})}Jy.createRoot(document.getElementById("root")).render(e.jsx(Pj,{}));export{W3 as _,td as c,md as g};
