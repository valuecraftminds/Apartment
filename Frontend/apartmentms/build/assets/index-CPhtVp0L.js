function jk(t,a){for(var r=0;r<a.length;r++){const n=a[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in t)){const d=Object.getOwnPropertyDescriptor(n,l);d&&Object.defineProperty(t,l,d.get?d:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var Eu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sh={exports:{}},j0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function Ck(){if(_y)return j0;_y=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(n,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var h in l)h!=="key"&&(d[h]=l[h])}else d=l;return l=d.ref,{$$typeof:t,type:n,key:f,ref:l!==void 0?l:null,props:d}}return j0.Fragment=a,j0.jsx=r,j0.jsxs=r,j0}var Ty;function Ek(){return Ty||(Ty=1,Sh.exports=Ck()),Sh.exports}var e=Ek(),Ah={exports:{}},sr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function Sk(){if(Dy)return sr;Dy=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.iterator;function C(xe){return xe===null||typeof xe!="object"?null:(xe=k&&xe[k]||xe["@@iterator"],typeof xe=="function"?xe:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,A={};function M(xe,ae,q){this.props=xe,this.context=ae,this.refs=A,this.updater=q||S}M.prototype.isReactComponent={},M.prototype.setState=function(xe,ae){if(typeof xe!="object"&&typeof xe!="function"&&xe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,xe,ae,"setState")},M.prototype.forceUpdate=function(xe){this.updater.enqueueForceUpdate(this,xe,"forceUpdate")};function I(){}I.prototype=M.prototype;function F(xe,ae,q){this.props=xe,this.context=ae,this.refs=A,this.updater=q||S}var T=F.prototype=new I;T.constructor=F,D(T,M.prototype),T.isPureReactComponent=!0;var B=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function L(xe,ae,q,K,se,re){return q=re.ref,{$$typeof:t,type:xe,key:ae,ref:q!==void 0?q:null,props:re}}function P(xe,ae){return L(xe.type,ae,void 0,void 0,void 0,xe.props)}function z(xe){return typeof xe=="object"&&xe!==null&&xe.$$typeof===t}function W(xe){var ae={"=":"=0",":":"=2"};return"$"+xe.replace(/[=:]/g,function(q){return ae[q]})}var ee=/\/+/g;function G(xe,ae){return typeof xe=="object"&&xe!==null&&xe.key!=null?W(""+xe.key):ae.toString(36)}function ne(){}function le(xe){switch(xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason;default:switch(typeof xe.status=="string"?xe.then(ne,ne):(xe.status="pending",xe.then(function(ae){xe.status==="pending"&&(xe.status="fulfilled",xe.value=ae)},function(ae){xe.status==="pending"&&(xe.status="rejected",xe.reason=ae)})),xe.status){case"fulfilled":return xe.value;case"rejected":throw xe.reason}}throw xe}function Y(xe,ae,q,K,se){var re=typeof xe;(re==="undefined"||re==="boolean")&&(xe=null);var te=!1;if(xe===null)te=!0;else switch(re){case"bigint":case"string":case"number":te=!0;break;case"object":switch(xe.$$typeof){case t:case a:te=!0;break;case w:return te=xe._init,Y(te(xe._payload),ae,q,K,se)}}if(te)return se=se(xe),te=K===""?"."+G(xe,0):K,B(se)?(q="",te!=null&&(q=te.replace(ee,"$&/")+"/"),Y(se,ae,q,"",function(Ve){return Ve})):se!=null&&(z(se)&&(se=P(se,q+(se.key==null||xe&&xe.key===se.key?"":(""+se.key).replace(ee,"$&/")+"/")+te)),ae.push(se)),1;te=0;var Re=K===""?".":K+":";if(B(xe))for(var ke=0;ke<xe.length;ke++)K=xe[ke],re=Re+G(K,ke),te+=Y(K,ae,q,re,se);else if(ke=C(xe),typeof ke=="function")for(xe=ke.call(xe),ke=0;!(K=xe.next()).done;)K=K.value,re=Re+G(K,ke++),te+=Y(K,ae,q,re,se);else if(re==="object"){if(typeof xe.then=="function")return Y(le(xe),ae,q,K,se);throw ae=String(xe),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(xe).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.")}return te}function X(xe,ae,q){if(xe==null)return xe;var K=[],se=0;return Y(xe,K,"","",function(re){return ae.call(q,re,se++)}),K}function de(xe){if(xe._status===-1){var ae=xe._result;ae=ae(),ae.then(function(q){(xe._status===0||xe._status===-1)&&(xe._status=1,xe._result=q)},function(q){(xe._status===0||xe._status===-1)&&(xe._status=2,xe._result=q)}),xe._status===-1&&(xe._status=0,xe._result=ae)}if(xe._status===1)return xe._result.default;throw xe._result}var ye=typeof reportError=="function"?reportError:function(xe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ae=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof xe=="object"&&xe!==null&&typeof xe.message=="string"?String(xe.message):String(xe),error:xe});if(!window.dispatchEvent(ae))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",xe);return}console.error(xe)};function oe(){}return sr.Children={map:X,forEach:function(xe,ae,q){X(xe,function(){ae.apply(this,arguments)},q)},count:function(xe){var ae=0;return X(xe,function(){ae++}),ae},toArray:function(xe){return X(xe,function(ae){return ae})||[]},only:function(xe){if(!z(xe))throw Error("React.Children.only expected to receive a single React element child.");return xe}},sr.Component=M,sr.Fragment=r,sr.Profiler=l,sr.PureComponent=F,sr.StrictMode=n,sr.Suspense=b,sr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,sr.__COMPILER_RUNTIME={__proto__:null,c:function(xe){return H.H.useMemoCache(xe)}},sr.cache=function(xe){return function(){return xe.apply(null,arguments)}},sr.cloneElement=function(xe,ae,q){if(xe==null)throw Error("The argument must be a React element, but you passed "+xe+".");var K=D({},xe.props),se=xe.key,re=void 0;if(ae!=null)for(te in ae.ref!==void 0&&(re=void 0),ae.key!==void 0&&(se=""+ae.key),ae)!U.call(ae,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&ae.ref===void 0||(K[te]=ae[te]);var te=arguments.length-2;if(te===1)K.children=q;else if(1<te){for(var Re=Array(te),ke=0;ke<te;ke++)Re[ke]=arguments[ke+2];K.children=Re}return L(xe.type,se,void 0,void 0,re,K)},sr.createContext=function(xe){return xe={$$typeof:f,_currentValue:xe,_currentValue2:xe,_threadCount:0,Provider:null,Consumer:null},xe.Provider=xe,xe.Consumer={$$typeof:d,_context:xe},xe},sr.createElement=function(xe,ae,q){var K,se={},re=null;if(ae!=null)for(K in ae.key!==void 0&&(re=""+ae.key),ae)U.call(ae,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(se[K]=ae[K]);var te=arguments.length-2;if(te===1)se.children=q;else if(1<te){for(var Re=Array(te),ke=0;ke<te;ke++)Re[ke]=arguments[ke+2];se.children=Re}if(xe&&xe.defaultProps)for(K in te=xe.defaultProps,te)se[K]===void 0&&(se[K]=te[K]);return L(xe,re,void 0,void 0,null,se)},sr.createRef=function(){return{current:null}},sr.forwardRef=function(xe){return{$$typeof:h,render:xe}},sr.isValidElement=z,sr.lazy=function(xe){return{$$typeof:w,_payload:{_status:-1,_result:xe},_init:de}},sr.memo=function(xe,ae){return{$$typeof:g,type:xe,compare:ae===void 0?null:ae}},sr.startTransition=function(xe){var ae=H.T,q={};H.T=q;try{var K=xe(),se=H.S;se!==null&&se(q,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(oe,ye)}catch(re){ye(re)}finally{H.T=ae}},sr.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},sr.use=function(xe){return H.H.use(xe)},sr.useActionState=function(xe,ae,q){return H.H.useActionState(xe,ae,q)},sr.useCallback=function(xe,ae){return H.H.useCallback(xe,ae)},sr.useContext=function(xe){return H.H.useContext(xe)},sr.useDebugValue=function(){},sr.useDeferredValue=function(xe,ae){return H.H.useDeferredValue(xe,ae)},sr.useEffect=function(xe,ae,q){var K=H.H;if(typeof q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(xe,ae)},sr.useId=function(){return H.H.useId()},sr.useImperativeHandle=function(xe,ae,q){return H.H.useImperativeHandle(xe,ae,q)},sr.useInsertionEffect=function(xe,ae){return H.H.useInsertionEffect(xe,ae)},sr.useLayoutEffect=function(xe,ae){return H.H.useLayoutEffect(xe,ae)},sr.useMemo=function(xe,ae){return H.H.useMemo(xe,ae)},sr.useOptimistic=function(xe,ae){return H.H.useOptimistic(xe,ae)},sr.useReducer=function(xe,ae,q){return H.H.useReducer(xe,ae,q)},sr.useRef=function(xe){return H.H.useRef(xe)},sr.useState=function(xe){return H.H.useState(xe)},sr.useSyncExternalStore=function(xe,ae,q){return H.H.useSyncExternalStore(xe,ae,q)},sr.useTransition=function(){return H.H.useTransition()},sr.version="19.1.1",sr}var Ry;function Km(){return Ry||(Ry=1,Ah.exports=Sk()),Ah.exports}var E=Km();const Dr=hf(E);var _h={exports:{}},C0={},Th={exports:{}},Dh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var My;function Ak(){return My||(My=1,function(t){function a(X,de){var ye=X.length;X.push(de);e:for(;0<ye;){var oe=ye-1>>>1,xe=X[oe];if(0<l(xe,de))X[oe]=de,X[ye]=xe,ye=oe;else break e}}function r(X){return X.length===0?null:X[0]}function n(X){if(X.length===0)return null;var de=X[0],ye=X.pop();if(ye!==de){X[0]=ye;e:for(var oe=0,xe=X.length,ae=xe>>>1;oe<ae;){var q=2*(oe+1)-1,K=X[q],se=q+1,re=X[se];if(0>l(K,ye))se<xe&&0>l(re,K)?(X[oe]=re,X[se]=ye,oe=se):(X[oe]=K,X[q]=ye,oe=q);else if(se<xe&&0>l(re,ye))X[oe]=re,X[se]=ye,oe=se;else break e}}return de}function l(X,de){var ye=X.sortIndex-de.sortIndex;return ye!==0?ye:X.id-de.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var b=[],g=[],w=1,k=null,C=3,S=!1,D=!1,A=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function B(X){for(var de=r(g);de!==null;){if(de.callback===null)n(g);else if(de.startTime<=X)n(g),de.sortIndex=de.expirationTime,a(b,de);else break;de=r(g)}}function H(X){if(A=!1,B(X),!D)if(r(b)!==null)D=!0,U||(U=!0,G());else{var de=r(g);de!==null&&Y(H,de.startTime-X)}}var U=!1,L=-1,P=5,z=-1;function W(){return M?!0:!(t.unstable_now()-z<P)}function ee(){if(M=!1,U){var X=t.unstable_now();z=X;var de=!0;try{e:{D=!1,A&&(A=!1,F(L),L=-1),S=!0;var ye=C;try{t:{for(B(X),k=r(b);k!==null&&!(k.expirationTime>X&&W());){var oe=k.callback;if(typeof oe=="function"){k.callback=null,C=k.priorityLevel;var xe=oe(k.expirationTime<=X);if(X=t.unstable_now(),typeof xe=="function"){k.callback=xe,B(X),de=!0;break t}k===r(b)&&n(b),B(X)}else n(b);k=r(b)}if(k!==null)de=!0;else{var ae=r(g);ae!==null&&Y(H,ae.startTime-X),de=!1}}break e}finally{k=null,C=ye,S=!1}de=void 0}}finally{de?G():U=!1}}}var G;if(typeof T=="function")G=function(){T(ee)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,le=ne.port2;ne.port1.onmessage=ee,G=function(){le.postMessage(null)}}else G=function(){I(ee,0)};function Y(X,de){L=I(function(){X(t.unstable_now())},de)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(X){switch(C){case 1:case 2:case 3:var de=3;break;default:de=C}var ye=C;C=de;try{return X()}finally{C=ye}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(X,de){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ye=C;C=X;try{return de()}finally{C=ye}},t.unstable_scheduleCallback=function(X,de,ye){var oe=t.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?oe+ye:oe):ye=oe,X){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=ye+xe,X={id:w++,callback:de,priorityLevel:X,startTime:ye,expirationTime:xe,sortIndex:-1},ye>oe?(X.sortIndex=ye,a(g,X),r(b)===null&&X===r(g)&&(A?(F(L),L=-1):A=!0,Y(H,ye-oe))):(X.sortIndex=xe,a(b,X),D||S||(D=!0,U||(U=!0,G()))),X},t.unstable_shouldYield=W,t.unstable_wrapCallback=function(X){var de=C;return function(){var ye=C;C=de;try{return X.apply(this,arguments)}finally{C=ye}}}}(Dh)),Dh}var Iy;function _k(){return Iy||(Iy=1,Th.exports=Ak()),Th.exports}var Rh={exports:{}},ns={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oy;function Tk(){if(Oy)return ns;Oy=1;var t=Km();function a(b){var g="https://react.dev/errors/"+b;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,g,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:b,containerInfo:g,implementation:w}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(b,g){if(b==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ns.createPortal=function(b,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return d(b,g,null,w)},ns.flushSync=function(b){var g=f.T,w=n.p;try{if(f.T=null,n.p=2,b)return b()}finally{f.T=g,n.p=w,n.d.f()}},ns.preconnect=function(b,g){typeof b=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(b,g))},ns.prefetchDNS=function(b){typeof b=="string"&&n.d.D(b)},ns.preinit=function(b,g){if(typeof b=="string"&&g&&typeof g.as=="string"){var w=g.as,k=h(w,g.crossOrigin),C=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;w==="style"?n.d.S(b,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:k,integrity:C,fetchPriority:S}):w==="script"&&n.d.X(b,{crossOrigin:k,integrity:C,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ns.preinitModule=function(b,g){if(typeof b=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var w=h(g.as,g.crossOrigin);n.d.M(b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(b)},ns.preload=function(b,g){if(typeof b=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var w=g.as,k=h(w,g.crossOrigin);n.d.L(b,w,{crossOrigin:k,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ns.preloadModule=function(b,g){if(typeof b=="string")if(g){var w=h(g.as,g.crossOrigin);n.d.m(b,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(b)},ns.requestFormReset=function(b){n.d.r(b)},ns.unstable_batchedUpdates=function(b,g){return b(g)},ns.useFormState=function(b,g,w){return f.H.useFormState(b,g,w)},ns.useFormStatus=function(){return f.H.useHostTransitionStatus()},ns.version="19.1.1",ns}var Fy;function Dk(){if(Fy)return Rh.exports;Fy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Rh.exports=Tk(),Rh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function Rk(){if(By)return C0;By=1;var t=_k(),a=Km(),r=Dk();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)o+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var o=s,x=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(x=o.return),s=o.return;while(s)}return o.tag===3?x:null}function f(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(d(s)!==s)throw Error(n(188))}function b(s){var o=s.alternate;if(!o){if(o=d(s),o===null)throw Error(n(188));return o!==s?null:s}for(var x=s,y=o;;){var j=x.return;if(j===null)break;var R=j.alternate;if(R===null){if(y=j.return,y!==null){x=y;continue}break}if(j.child===R.child){for(R=j.child;R;){if(R===x)return h(j),s;if(R===y)return h(j),o;R=R.sibling}throw Error(n(188))}if(x.return!==y.return)x=j,y=R;else{for(var Z=!1,he=j.child;he;){if(he===x){Z=!0,x=j,y=R;break}if(he===y){Z=!0,y=j,x=R;break}he=he.sibling}if(!Z){for(he=R.child;he;){if(he===x){Z=!0,x=R,y=j;break}if(he===y){Z=!0,y=R,x=j;break}he=he.sibling}if(!Z)throw Error(n(189))}}if(x.alternate!==y)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),T=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),W=Symbol.for("react.memo_cache_sentinel"),ee=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=ee&&s[ee]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function le(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case U:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case T:return(s.displayName||"Context")+".Provider";case F:return(s._context.displayName||"Context")+".Consumer";case B:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return o=s.displayName||null,o!==null?o:le(s.type)||"Memo";case P:o=s._payload,s=s._init;try{return le(s(o))}catch{}}return null}var Y=Array.isArray,X=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,de=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},oe=[],xe=-1;function ae(s){return{current:s}}function q(s){0>xe||(s.current=oe[xe],oe[xe]=null,xe--)}function K(s,o){xe++,oe[xe]=s.current,s.current=o}var se=ae(null),re=ae(null),te=ae(null),Re=ae(null);function ke(s,o){switch(K(te,o),K(re,s),K(se,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?ay(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=ay(o),s=sy(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}q(se),K(se,s)}function Ve(){q(se),q(re),q(te)}function Oe(s){s.memoizedState!==null&&K(Re,s);var o=se.current,x=sy(o,s.type);o!==x&&(K(re,s),K(se,x))}function et(s){re.current===s&&(q(se),q(re)),Re.current===s&&(q(Re),b0._currentValue=ye)}var be=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,Ce=t.unstable_shouldYield,Je=t.unstable_requestPaint,ve=t.unstable_now,Le=t.unstable_getCurrentPriorityLevel,fe=t.unstable_ImmediatePriority,st=t.unstable_UserBlockingPriority,Ee=t.unstable_NormalPriority,wt=t.unstable_LowPriority,ut=t.unstable_IdlePriority,Et=t.log,Mt=t.unstable_setDisableYieldValue,qt=null,ur=null;function Ut(s){if(typeof Et=="function"&&Mt(s),ur&&typeof ur.setStrictMode=="function")try{ur.setStrictMode(qt,s)}catch{}}var Yt=Math.clz32?Math.clz32:jt,It=Math.log,$e=Math.LN2;function jt(s){return s>>>=0,s===0?32:31-(It(s)/$e|0)|0}var Nt=256,lt=4194304;function At(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function vt(s,o,x){var y=s.pendingLanes;if(y===0)return 0;var j=0,R=s.suspendedLanes,Z=s.pingedLanes;s=s.warmLanes;var he=y&134217727;return he!==0?(y=he&~R,y!==0?j=At(y):(Z&=he,Z!==0?j=At(Z):x||(x=he&~s,x!==0&&(j=At(x))))):(he=y&~R,he!==0?j=At(he):Z!==0?j=At(Z):x||(x=y&~s,x!==0&&(j=At(x)))),j===0?0:o!==0&&o!==j&&(o&R)===0&&(R=j&-j,x=o&-o,R>=x||R===32&&(x&4194048)!==0)?o:j}function nt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function kt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Os(){var s=Nt;return Nt<<=1,(Nt&4194048)===0&&(Nt=256),s}function Bn(){var s=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),s}function _t(s){for(var o=[],x=0;31>x;x++)o.push(s);return o}function Jr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function en(s,o,x,y,j,R){var Z=s.pendingLanes;s.pendingLanes=x,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=x,s.entangledLanes&=x,s.errorRecoveryDisabledLanes&=x,s.shellSuspendCounter=0;var he=s.entanglements,_e=s.expirationTimes,Ye=s.hiddenUpdates;for(x=Z&~x;0<x;){var it=31-Yt(x),dt=1<<it;he[it]=0,_e[it]=-1;var qe=Ye[it];if(qe!==null)for(Ye[it]=null,it=0;it<qe.length;it++){var Ze=qe[it];Ze!==null&&(Ze.lane&=-536870913)}x&=~dt}y!==0&&Ol(s,y,0),R!==0&&j===0&&s.tag!==0&&(s.suspendedLanes|=R&~(Z&~o))}function Ol(s,o,x){s.pendingLanes|=o,s.suspendedLanes&=~o;var y=31-Yt(o);s.entangledLanes|=o,s.entanglements[y]=s.entanglements[y]|1073741824|x&4194090}function Za(s,o){var x=s.entangledLanes|=o;for(s=s.entanglements;x;){var y=31-Yt(x),j=1<<y;j&o|s[y]&o&&(s[y]|=o),x&=~j}}function ui(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ea(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function yn(){var s=de.p;return s!==0?s:(s=window.event,s===void 0?32:ky(s.type))}function Vi(s,o){var x=de.p;try{return de.p=s,o()}finally{de.p=x}}var oa=Math.random().toString(36).slice(2),ga="__reactFiber$"+oa,Pr="__reactProps$"+oa,tn="__reactContainer$"+oa,pa="__reactEvents$"+oa,bn="__reactListeners$"+oa,ce="__reactHandles$"+oa,me="__reactResources$"+oa,ge="__reactMarker$"+oa;function we(s){delete s[ga],delete s[Pr],delete s[pa],delete s[bn],delete s[ce]}function Ne(s){var o=s[ga];if(o)return o;for(var x=s.parentNode;x;){if(o=x[tn]||x[ga]){if(x=o.alternate,o.child!==null||x!==null&&x.child!==null)for(s=oy(s);s!==null;){if(x=s[ga])return x;s=oy(s)}return o}s=x,x=s.parentNode}return null}function Se(s){if(s=s[ga]||s[tn]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Ge(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function at(s){var o=s[me];return o||(o=s[me]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Be(s){s[ge]=!0}var Xe=new Set,We={};function ct(s,o){xt(s,o),xt(s+"Capture",o)}function xt(s,o){for(We[s]=o,s=0;s<o.length;s++)Xe.add(o[s])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pt={},bt={};function Pt(s){return be.call(bt,s)?!0:be.call(pt,s)?!1:mt.test(s)?bt[s]=!0:(pt[s]=!0,!1)}function rt(s,o,x){if(Pt(o))if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var y=o.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+x)}}function kr(s,o,x){if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+x)}}function zt(s,o,x,y){if(y===null)s.removeAttribute(x);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(x);return}s.setAttributeNS(o,x,""+y)}}var Qa,Ln;function Qt(s){if(Qa===void 0)try{throw Error()}catch(x){var o=x.stack.trim().match(/\n( *(at )?)/);Qa=o&&o[1]||"",Ln=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qa+s+Ln}var Jt=!1;function er(s,o){if(!s||Jt)return"";Jt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(o){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Ze){var qe=Ze}Reflect.construct(s,[],dt)}else{try{dt.call()}catch(Ze){qe=Ze}s.call(dt.prototype)}}else{try{throw Error()}catch(Ze){qe=Ze}(dt=s())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Ze){if(Ze&&qe&&typeof Ze.stack=="string")return[Ze.stack,qe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=y.DetermineComponentFrameRoot(),Z=R[0],he=R[1];if(Z&&he){var _e=Z.split(`
`),Ye=he.split(`
`);for(j=y=0;y<_e.length&&!_e[y].includes("DetermineComponentFrameRoot");)y++;for(;j<Ye.length&&!Ye[j].includes("DetermineComponentFrameRoot");)j++;if(y===_e.length||j===Ye.length)for(y=_e.length-1,j=Ye.length-1;1<=y&&0<=j&&_e[y]!==Ye[j];)j--;for(;1<=y&&0<=j;y--,j--)if(_e[y]!==Ye[j]){if(y!==1||j!==1)do if(y--,j--,0>j||_e[y]!==Ye[j]){var it=`
`+_e[y].replace(" at new "," at ");return s.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",s.displayName)),it}while(1<=y&&0<=j);break}}}finally{Jt=!1,Error.prepareStackTrace=x}return(x=s?s.displayName||s.name:"")?Qt(x):""}function ms(s){switch(s.tag){case 26:case 27:case 5:return Qt(s.type);case 16:return Qt("Lazy");case 13:return Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return er(s.type,!1);case 11:return er(s.type.render,!1);case 1:return er(s.type,!0);case 31:return Qt("Activity");default:return""}}function To(s){try{var o="";do o+=ms(s),s=s.return;while(s);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function Ja(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ta(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Pn(s){var o=ta(s)?"checked":"value",x=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),y=""+s[o];if(!s.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var j=x.get,R=x.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return j.call(this)},set:function(Z){y=""+Z,R.call(this,Z)}}),Object.defineProperty(s,o,{enumerable:x.enumerable}),{getValue:function(){return y},setValue:function(Z){y=""+Z},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Do(s){s._valueTracker||(s._valueTracker=Pn(s))}function Xr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var x=o.getValue(),y="";return s&&(y=ta(s)?s.checked?"true":"false":s.value),s=y,s!==x?(o.setValue(s),!0):!1}function Fs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Mf=/[\n"\\]/g;function Sa(s){return s.replace(Mf,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function jr(s,o,x,y,j,R,Z,he){s.name="",Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"?s.type=Z:s.removeAttribute("type"),o!=null?Z==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Ja(o)):s.value!==""+Ja(o)&&(s.value=""+Ja(o)):Z!=="submit"&&Z!=="reset"||s.removeAttribute("value"),o!=null?Ue(s,Z,Ja(o)):x!=null?Ue(s,Z,Ja(x)):y!=null&&s.removeAttribute("value"),j==null&&R!=null&&(s.defaultChecked=!!R),j!=null&&(s.checked=j&&typeof j!="function"&&typeof j!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?s.name=""+Ja(he):s.removeAttribute("name")}function Aa(s,o,x,y,j,R,Z,he){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),o!=null||x!=null){if(!(R!=="submit"&&R!=="reset"||o!=null))return;x=x!=null?""+Ja(x):"",o=o!=null?""+Ja(o):x,he||o===s.value||(s.value=o),s.defaultValue=o}y=y??j,y=typeof y!="function"&&typeof y!="symbol"&&!!y,s.checked=he?s.checked:!!y,s.defaultChecked=!!y,Z!=null&&typeof Z!="function"&&typeof Z!="symbol"&&typeof Z!="boolean"&&(s.name=Z)}function Ue(s,o,x){o==="number"&&Fs(s.ownerDocument)===s||s.defaultValue===""+x||(s.defaultValue=""+x)}function pe(s,o,x,y){if(s=s.options,o){o={};for(var j=0;j<x.length;j++)o["$"+x[j]]=!0;for(x=0;x<s.length;x++)j=o.hasOwnProperty("$"+s[x].value),s[x].selected!==j&&(s[x].selected=j),j&&y&&(s[x].defaultSelected=!0)}else{for(x=""+Ja(x),o=null,j=0;j<s.length;j++){if(s[j].value===x){s[j].selected=!0,y&&(s[j].defaultSelected=!0);return}o!==null||s[j].disabled||(o=s[j])}o!==null&&(o.selected=!0)}}function Tt(s,o,x){if(o!=null&&(o=""+Ja(o),o!==s.value&&(s.value=o),x==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=x!=null?""+Ja(x):""}function ca(s,o,x,y){if(o==null){if(y!=null){if(x!=null)throw Error(n(92));if(Y(y)){if(1<y.length)throw Error(n(93));y=y[0]}x=y}x==null&&(x=""),o=x}x=Ja(o),s.defaultValue=x,y=s.textContent,y===x&&y!==""&&y!==null&&(s.value=y)}function _a(s,o){if(o){var x=s.firstChild;if(x&&x===s.lastChild&&x.nodeType===3){x.nodeValue=o;return}}s.textContent=o}var If=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ro(s,o,x){var y=o.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?y?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":y?s.setProperty(o,x):typeof x!="number"||x===0||If.has(o)?o==="float"?s.cssFloat=x:s[o]=(""+x).trim():s[o]=x+"px"}function gs(s,o,x){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,x!=null){for(var y in x)!x.hasOwnProperty(y)||o!=null&&o.hasOwnProperty(y)||(y.indexOf("--")===0?s.setProperty(y,""):y==="float"?s.cssFloat="":s[y]="");for(var j in o)y=o[j],o.hasOwnProperty(j)&&x[j]!==y&&Ro(s,j,y)}else for(var R in o)o.hasOwnProperty(R)&&Ro(s,R,o[R])}function Dt(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Mo(s){return vd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Fl=null;function Gi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var zn=null,Yi=null;function da(s){var o=Se(s);if(o&&(s=o.stateNode)){var x=s[Pr]||null;e:switch(s=o.stateNode,o.type){case"input":if(jr(s,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),o=x.name,x.type==="radio"&&o!=null){for(x=s;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Sa(""+o)+'"][type="radio"]'),o=0;o<x.length;o++){var y=x[o];if(y!==s&&y.form===s.form){var j=y[Pr]||null;if(!j)throw Error(n(90));jr(y,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(o=0;o<x.length;o++)y=x[o],y.form===s.form&&Xr(y)}break e;case"textarea":Tt(s,x.value,x.defaultValue);break e;case"select":o=x.value,o!=null&&pe(s,!!x.multiple,o,!1)}}}var fi=!1;function vn(s,o,x){if(fi)return s(o,x);fi=!0;try{var y=s(o);return y}finally{if(fi=!1,(zn!==null||Yi!==null)&&(nu(),zn&&(o=zn,s=Yi,Yi=zn=null,da(o),s)))for(o=0;o<s.length;o++)da(s[o])}}function Ot(s,o){var x=s.stateNode;if(x===null)return null;var y=x[Pr]||null;if(y===null)return null;x=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(x&&typeof x!="function")throw Error(n(231,o,typeof x));return x}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wt=!1;if(wn)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Wt=!1}var Un=null,Bl=null,Ll=null;function Hn(){if(Ll)return Ll;var s,o=Bl,x=o.length,y,j="value"in Un?Un.value:Un.textContent,R=j.length;for(s=0;s<x&&o[s]===j[s];s++);var Z=x-s;for(y=1;y<=Z&&o[x-y]===j[R-y];y++);return Ll=j.slice(s,1<y?1-y:void 0)}function Io(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Vn(){return!0}function Xi(){return!1}function ya(s){function o(x,y,j,R,Z){this._reactName=x,this._targetInst=j,this.type=y,this.nativeEvent=R,this.target=Z,this.currentTarget=null;for(var he in s)s.hasOwnProperty(he)&&(x=s[he],this[he]=x?x(R):R[he]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Vn:Xi,this.isPropagationStopped=Xi,this}return w(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Vn)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Vn)},persist:function(){},isPersistent:Vn}),o}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yn=ya(Gn),Nn=w({},Gn,{view:0,detail:0}),es=ya(Nn),Oo,Fo,qi,Bo=w({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==qi&&(qi&&s.type==="mousemove"?(Oo=s.screenX-qi.screenX,Fo=s.screenY-qi.screenY):Fo=Oo=0,qi=s),Oo)},movementY:function(s){return"movementY"in s?s.movementY:Fo}}),wd=ya(Bo),Of=w({},Bo,{dataTransfer:0}),Cr=ya(Of),Nd=w({},Nn,{relatedTarget:0}),$i=ya(Nd),Xn=w({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),Ff=ya(Xn),Qe=w({},Gn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ar=ya(Qe),Ta=w({},Gn,{data:0}),Pl=ya(Ta),kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Lf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pf(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Lf[s])?!!o[s]:!1}function zl(){return Pf}var ua=w({},Nn,{key:function(s){if(s.key){var o=kd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Io(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Bf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zl,charCode:function(s){return s.type==="keypress"?Io(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Io(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Oc=ya(ua),qr=w({},Bo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ul=ya(qr),xi=w({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zl}),Er=ya(xi),Ft=w({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),zf=ya(Ft),Fr=w({},Bo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),hi=ya(Fr),Wi=w({},Gn,{newState:0,oldState:0}),Uf=ya(Wi),rn=[9,13,27,32],Hl=wn&&"CompositionEvent"in window,Ki=null;wn&&"documentMode"in document&&(Ki=document.documentMode);var Fc=wn&&"TextEvent"in window&&!Ki,Bc=wn&&(!Hl||Ki&&8<Ki&&11>=Ki),Lc=" ",jd=!1;function mi(s,o){switch(s){case"keyup":return rn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zi=!1;function Vl(s,o){switch(s){case"compositionend":return Lo(o);case"keypress":return o.which!==32?null:(jd=!0,Lc);case"textInput":return s=o.data,s===Lc&&jd?null:s;default:return null}}function Hf(s,o){if(Zi)return s==="compositionend"||!Hl&&mi(s,o)?(s=Hn(),Ll=Bl=Un=null,Zi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Bc&&o.locale!=="ko"?null:o.data;default:return null}}var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gl(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!qn[s.type]:o==="textarea"}function ps(s,o,x,y){zn?Yi?Yi.push(y):Yi=[y]:zn=y,o=uu(o,"onChange"),0<o.length&&(x=new Yn("onChange","change",null,x,y),s.push({event:x,listeners:o}))}var Qi=null,ts=null;function Vf(s){Qp(s,0)}function Ji(s){var o=Ge(s);if(Xr(o))return s}function Cd(s,o){if(s==="change")return o}var Pc=!1;if(wn){var Es;if(wn){var zc="oninput"in document;if(!zc){var Po=document.createElement("div");Po.setAttribute("oninput","return;"),zc=typeof Po.oninput=="function"}Es=zc}else Es=!1;Pc=Es&&(!document.documentMode||9<document.documentMode)}function el(){Qi&&(Qi.detachEvent("onpropertychange",dr),ts=Qi=null)}function dr(s){if(s.propertyName==="value"&&Ji(ts)){var o=[];ps(o,ts,s,Gi(s)),vn(Vf,o)}}function zo(s,o,x){s==="focusin"?(el(),Qi=o,ts=x,Qi.attachEvent("onpropertychange",dr)):s==="focusout"&&el()}function Q(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ji(ts)}function i(s,o){if(s==="click")return Ji(o)}function c(s,o){if(s==="input"||s==="change")return Ji(o)}function u(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var m=typeof Object.is=="function"?Object.is:u;function p(s,o){if(m(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var x=Object.keys(s),y=Object.keys(o);if(x.length!==y.length)return!1;for(y=0;y<x.length;y++){var j=x[y];if(!be.call(o,j)||!m(s[j],o[j]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function N(s,o){var x=v(s);s=0;for(var y;x;){if(x.nodeType===3){if(y=s+x.textContent.length,s<=o&&y>=o)return{node:x,offset:o-s};s=y}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=v(x)}}function _(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?_(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function O(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Fs(s.document);o instanceof s.HTMLIFrameElement;){try{var x=typeof o.contentWindow.location.href=="string"}catch{x=!1}if(x)s=o.contentWindow;else break;o=Fs(s.document)}return o}function V(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var J=wn&&"documentMode"in document&&11>=document.documentMode,ue=null,je=null,De=null,Me=!1;function ze(s,o,x){var y=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Me||ue==null||ue!==Fs(y)||(y=ue,"selectionStart"in y&&V(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),De&&p(De,y)||(De=y,y=uu(je,"onSelect"),0<y.length&&(o=new Yn("onSelect","select",null,o,x),s.push({event:o,listeners:y}),o.target=ue)))}function Ke(s,o){var x={};return x[s.toLowerCase()]=o.toLowerCase(),x["Webkit"+s]="webkit"+o,x["Moz"+s]="moz"+o,x}var ht={animationend:Ke("Animation","AnimationEnd"),animationiteration:Ke("Animation","AnimationIteration"),animationstart:Ke("Animation","AnimationStart"),transitionrun:Ke("Transition","TransitionRun"),transitionstart:Ke("Transition","TransitionStart"),transitioncancel:Ke("Transition","TransitionCancel"),transitionend:Ke("Transition","TransitionEnd")},gt={},ft={};wn&&(ft=document.createElement("div").style,"AnimationEvent"in window||(delete ht.animationend.animation,delete ht.animationiteration.animation,delete ht.animationstart.animation),"TransitionEvent"in window||delete ht.transitionend.transition);function Kt(s){if(gt[s])return gt[s];if(!ht[s])return s;var o=ht[s],x;for(x in o)if(o.hasOwnProperty(x)&&x in ft)return gt[s]=o[x];return s}var $t=Kt("animationend"),Ga=Kt("animationiteration"),Ss=Kt("animationstart"),rs=Kt("transitionrun"),Sr=Kt("transitionstart"),Da=Kt("transitioncancel"),as=Kt("transitionend"),gi=new Map,$n="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$n.push("scrollEnd");function Bs(s,o){gi.set(s,o),ct(o,[s])}var Ed=new WeakMap;function an(s,o){if(typeof s=="object"&&s!==null){var x=Ed.get(s);return x!==void 0?x:(o={value:s,source:o,stack:To(o)},Ed.set(s,o),o)}return{value:s,source:o,stack:To(o)}}var sn=[],Uo=0,Gf=0;function Sd(){for(var s=Uo,o=Gf=Uo=0;o<s;){var x=sn[o];sn[o++]=null;var y=sn[o];sn[o++]=null;var j=sn[o];sn[o++]=null;var R=sn[o];if(sn[o++]=null,y!==null&&j!==null){var Z=y.pending;Z===null?j.next=j:(j.next=Z.next,Z.next=j),y.pending=j}R!==0&&Fg(x,j,R)}}function Ad(s,o,x,y){sn[Uo++]=s,sn[Uo++]=o,sn[Uo++]=x,sn[Uo++]=y,Gf|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Yf(s,o,x,y){return Ad(s,o,x,y),_d(s)}function Ho(s,o){return Ad(s,null,null,o),_d(s)}function Fg(s,o,x){s.lanes|=x;var y=s.alternate;y!==null&&(y.lanes|=x);for(var j=!1,R=s.return;R!==null;)R.childLanes|=x,y=R.alternate,y!==null&&(y.childLanes|=x),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(j=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,j&&o!==null&&(j=31-Yt(x),s=R.hiddenUpdates,y=s[j],y===null?s[j]=[o]:y.push(o),o.lane=x|536870912),R):null}function _d(s){if(50<u0)throw u0=0,Zx=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Vo={};function cN(s,o,x,y){this.tag=s,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(s,o,x,y){return new cN(s,o,x,y)}function Xf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function pi(s,o){var x=s.alternate;return x===null?(x=Ls(s.tag,o,s.key,s.mode),x.elementType=s.elementType,x.type=s.type,x.stateNode=s.stateNode,x.alternate=s,s.alternate=x):(x.pendingProps=o,x.type=s.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=s.flags&65011712,x.childLanes=s.childLanes,x.lanes=s.lanes,x.child=s.child,x.memoizedProps=s.memoizedProps,x.memoizedState=s.memoizedState,x.updateQueue=s.updateQueue,o=s.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},x.sibling=s.sibling,x.index=s.index,x.ref=s.ref,x.refCleanup=s.refCleanup,x}function Bg(s,o){s.flags&=65011714;var x=s.alternate;return x===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=x.childLanes,s.lanes=x.lanes,s.child=x.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=x.memoizedProps,s.memoizedState=x.memoizedState,s.updateQueue=x.updateQueue,s.type=x.type,o=x.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Td(s,o,x,y,j,R){var Z=0;if(y=s,typeof s=="function")Xf(s)&&(Z=1);else if(typeof s=="string")Z=uk(s,x,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=Ls(31,x,o,j),s.elementType=z,s.lanes=R,s;case D:return Yl(x.children,j,R,o);case A:Z=8,j|=24;break;case M:return s=Ls(12,x,o,j|2),s.elementType=M,s.lanes=R,s;case H:return s=Ls(13,x,o,j),s.elementType=H,s.lanes=R,s;case U:return s=Ls(19,x,o,j),s.elementType=U,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case T:Z=10;break e;case F:Z=9;break e;case B:Z=11;break e;case L:Z=14;break e;case P:Z=16,y=null;break e}Z=29,x=Error(n(130,s===null?"null":typeof s,"")),y=null}return o=Ls(Z,x,o,j),o.elementType=s,o.type=y,o.lanes=R,o}function Yl(s,o,x,y){return s=Ls(7,s,y,o),s.lanes=x,s}function qf(s,o,x){return s=Ls(6,s,null,o),s.lanes=x,s}function $f(s,o,x){return o=Ls(4,s.children!==null?s.children:[],s.key,o),o.lanes=x,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Go=[],Yo=0,Dd=null,Rd=0,nn=[],ln=0,Xl=null,yi=1,bi="";function ql(s,o){Go[Yo++]=Rd,Go[Yo++]=Dd,Dd=s,Rd=o}function Lg(s,o,x){nn[ln++]=yi,nn[ln++]=bi,nn[ln++]=Xl,Xl=s;var y=yi;s=bi;var j=32-Yt(y)-1;y&=~(1<<j),x+=1;var R=32-Yt(o)+j;if(30<R){var Z=j-j%5;R=(y&(1<<Z)-1).toString(32),y>>=Z,j-=Z,yi=1<<32-Yt(o)+j|x<<j|y,bi=R+s}else yi=1<<R|x<<j|y,bi=s}function Wf(s){s.return!==null&&(ql(s,1),Lg(s,1,0))}function Kf(s){for(;s===Dd;)Dd=Go[--Yo],Go[Yo]=null,Rd=Go[--Yo],Go[Yo]=null;for(;s===Xl;)Xl=nn[--ln],nn[ln]=null,bi=nn[--ln],nn[ln]=null,yi=nn[--ln],nn[ln]=null}var ys=null,ra=null,Nr=!1,$l=null,Wn=!1,Zf=Error(n(519));function Wl(s){var o=Error(n(418,""));throw Vc(an(o,s)),Zf}function Pg(s){var o=s.stateNode,x=s.type,y=s.memoizedProps;switch(o[ga]=s,o[Pr]=y,x){case"dialog":cr("cancel",o),cr("close",o);break;case"iframe":case"object":case"embed":cr("load",o);break;case"video":case"audio":for(x=0;x<x0.length;x++)cr(x0[x],o);break;case"source":cr("error",o);break;case"img":case"image":case"link":cr("error",o),cr("load",o);break;case"details":cr("toggle",o);break;case"input":cr("invalid",o),Aa(o,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Do(o);break;case"select":cr("invalid",o);break;case"textarea":cr("invalid",o),ca(o,y.value,y.defaultValue,y.children),Do(o)}x=y.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||o.textContent===""+x||y.suppressHydrationWarning===!0||ry(o.textContent,x)?(y.popover!=null&&(cr("beforetoggle",o),cr("toggle",o)),y.onScroll!=null&&cr("scroll",o),y.onScrollEnd!=null&&cr("scrollend",o),y.onClick!=null&&(o.onclick=fu),o=!0):o=!1,o||Wl(s)}function zg(s){for(ys=s.return;ys;)switch(ys.tag){case 5:case 13:Wn=!1;return;case 27:case 3:Wn=!0;return;default:ys=ys.return}}function Uc(s){if(s!==ys)return!1;if(!Nr)return zg(s),Nr=!0,!1;var o=s.tag,x;if((x=o!==3&&o!==27)&&((x=o===5)&&(x=s.type,x=!(x!=="form"&&x!=="button")||xh(s.type,s.memoizedProps)),x=!x),x&&ra&&Wl(s),zg(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(x=s.data,x==="/$"){if(o===0){ra=jn(s.nextSibling);break e}o--}else x!=="$"&&x!=="$!"&&x!=="$?"||o++;s=s.nextSibling}ra=null}}else o===27?(o=ra,gl(s.type)?(s=ph,ph=null,ra=s):ra=o):ra=ys?jn(s.stateNode.nextSibling):null;return!0}function Hc(){ra=ys=null,Nr=!1}function Ug(){var s=$l;return s!==null&&(Ts===null?Ts=s:Ts.push.apply(Ts,s),$l=null),s}function Vc(s){$l===null?$l=[s]:$l.push(s)}var Qf=ae(null),Kl=null,vi=null;function tl(s,o,x){K(Qf,o._currentValue),o._currentValue=x}function wi(s){s._currentValue=Qf.current,q(Qf)}function Jf(s,o,x){for(;s!==null;){var y=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),s===x)break;s=s.return}}function ex(s,o,x,y){var j=s.child;for(j!==null&&(j.return=s);j!==null;){var R=j.dependencies;if(R!==null){var Z=j.child;R=R.firstContext;e:for(;R!==null;){var he=R;R=j;for(var _e=0;_e<o.length;_e++)if(he.context===o[_e]){R.lanes|=x,he=R.alternate,he!==null&&(he.lanes|=x),Jf(R.return,x,s),y||(Z=null);break e}R=he.next}}else if(j.tag===18){if(Z=j.return,Z===null)throw Error(n(341));Z.lanes|=x,R=Z.alternate,R!==null&&(R.lanes|=x),Jf(Z,x,s),Z=null}else Z=j.child;if(Z!==null)Z.return=j;else for(Z=j;Z!==null;){if(Z===s){Z=null;break}if(j=Z.sibling,j!==null){j.return=Z.return,Z=j;break}Z=Z.return}j=Z}}function Gc(s,o,x,y){s=null;for(var j=o,R=!1;j!==null;){if(!R){if((j.flags&524288)!==0)R=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var Z=j.alternate;if(Z===null)throw Error(n(387));if(Z=Z.memoizedProps,Z!==null){var he=j.type;m(j.pendingProps.value,Z.value)||(s!==null?s.push(he):s=[he])}}else if(j===Re.current){if(Z=j.alternate,Z===null)throw Error(n(387));Z.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(s!==null?s.push(b0):s=[b0])}j=j.return}s!==null&&ex(o,s,x,y),o.flags|=262144}function Md(s){for(s=s.firstContext;s!==null;){if(!m(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Zl(s){Kl=s,vi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ss(s){return Hg(Kl,s)}function Id(s,o){return Kl===null&&Zl(s),Hg(s,o)}function Hg(s,o){var x=o._currentValue;if(o={context:o,memoizedValue:x,next:null},vi===null){if(s===null)throw Error(n(308));vi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else vi=vi.next=o;return x}var dN=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(x,y){s.push(y)}};this.abort=function(){o.aborted=!0,s.forEach(function(x){return x()})}},uN=t.unstable_scheduleCallback,fN=t.unstable_NormalPriority,Ra={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tx(){return{controller:new dN,data:new Map,refCount:0}}function Yc(s){s.refCount--,s.refCount===0&&uN(fN,function(){s.controller.abort()})}var Xc=null,rx=0,Xo=0,qo=null;function xN(s,o){if(Xc===null){var x=Xc=[];rx=0,Xo=sh(),qo={status:"pending",value:void 0,then:function(y){x.push(y)}}}return rx++,o.then(Vg,Vg),o}function Vg(){if(--rx===0&&Xc!==null){qo!==null&&(qo.status="fulfilled");var s=Xc;Xc=null,Xo=0,qo=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function hN(s,o){var x=[],y={status:"pending",value:null,reason:null,then:function(j){x.push(j)}};return s.then(function(){y.status="fulfilled",y.value=o;for(var j=0;j<x.length;j++)(0,x[j])(o)},function(j){for(y.status="rejected",y.reason=j,j=0;j<x.length;j++)(0,x[j])(void 0)}),y}var Gg=X.S;X.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&xN(s,o),Gg!==null&&Gg(s,o)};var Ql=ae(null);function ax(){var s=Ql.current;return s!==null?s:zr.pooledCache}function Od(s,o){o===null?K(Ql,Ql.current):K(Ql,o.pool)}function Yg(){var s=ax();return s===null?null:{parent:Ra._currentValue,pool:s}}var qc=Error(n(460)),Xg=Error(n(474)),Fd=Error(n(542)),sx={then:function(){}};function qg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Bd(){}function $g(s,o,x){switch(x=s[x],x===void 0?s.push(o):x!==o&&(o.then(Bd,Bd),o=x),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Kg(s),s;default:if(typeof o.status=="string")o.then(Bd,Bd);else{if(s=zr,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(y){if(o.status==="pending"){var j=o;j.status="fulfilled",j.value=y}},function(y){if(o.status==="pending"){var j=o;j.status="rejected",j.reason=y}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Kg(s),s}throw $c=o,qc}}var $c=null;function Wg(){if($c===null)throw Error(n(459));var s=$c;return $c=null,s}function Kg(s){if(s===qc||s===Fd)throw Error(n(483))}var rl=!1;function nx(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ix(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function al(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function sl(s,o,x){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Ar&2)!==0){var j=y.pending;return j===null?o.next=o:(o.next=j.next,j.next=o),y.pending=o,o=_d(s),Fg(s,null,x),o}return Ad(s,y,o,x),_d(s)}function Wc(s,o,x){if(o=o.updateQueue,o!==null&&(o=o.shared,(x&4194048)!==0)){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,Za(s,x)}}function lx(s,o){var x=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,x===y)){var j=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var Z={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};R===null?j=R=Z:R=R.next=Z,x=x.next}while(x!==null);R===null?j=R=o:R=R.next=o}else j=R=o;x={baseState:y.baseState,firstBaseUpdate:j,lastBaseUpdate:R,shared:y.shared,callbacks:y.callbacks},s.updateQueue=x;return}s=x.lastBaseUpdate,s===null?x.firstBaseUpdate=o:s.next=o,x.lastBaseUpdate=o}var ox=!1;function Kc(){if(ox){var s=qo;if(s!==null)throw s}}function Zc(s,o,x,y){ox=!1;var j=s.updateQueue;rl=!1;var R=j.firstBaseUpdate,Z=j.lastBaseUpdate,he=j.shared.pending;if(he!==null){j.shared.pending=null;var _e=he,Ye=_e.next;_e.next=null,Z===null?R=Ye:Z.next=Ye,Z=_e;var it=s.alternate;it!==null&&(it=it.updateQueue,he=it.lastBaseUpdate,he!==Z&&(he===null?it.firstBaseUpdate=Ye:he.next=Ye,it.lastBaseUpdate=_e))}if(R!==null){var dt=j.baseState;Z=0,it=Ye=_e=null,he=R;do{var qe=he.lane&-536870913,Ze=qe!==he.lane;if(Ze?(mr&qe)===qe:(y&qe)===qe){qe!==0&&qe===Xo&&(ox=!0),it!==null&&(it=it.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Ht=s,Bt=he;qe=o;var Ir=x;switch(Bt.tag){case 1:if(Ht=Bt.payload,typeof Ht=="function"){dt=Ht.call(Ir,dt,qe);break e}dt=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Bt.payload,qe=typeof Ht=="function"?Ht.call(Ir,dt,qe):Ht,qe==null)break e;dt=w({},dt,qe);break e;case 2:rl=!0}}qe=he.callback,qe!==null&&(s.flags|=64,Ze&&(s.flags|=8192),Ze=j.callbacks,Ze===null?j.callbacks=[qe]:Ze.push(qe))}else Ze={lane:qe,tag:he.tag,payload:he.payload,callback:he.callback,next:null},it===null?(Ye=it=Ze,_e=dt):it=it.next=Ze,Z|=qe;if(he=he.next,he===null){if(he=j.shared.pending,he===null)break;Ze=he,he=Ze.next,Ze.next=null,j.lastBaseUpdate=Ze,j.shared.pending=null}}while(!0);it===null&&(_e=dt),j.baseState=_e,j.firstBaseUpdate=Ye,j.lastBaseUpdate=it,R===null&&(j.shared.lanes=0),fl|=Z,s.lanes=Z,s.memoizedState=dt}}function Zg(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function Qg(s,o){var x=s.callbacks;if(x!==null)for(s.callbacks=null,s=0;s<x.length;s++)Zg(x[s],o)}var $o=ae(null),Ld=ae(0);function Jg(s,o){s=Ai,K(Ld,s),K($o,o),Ai=s|o.baseLanes}function cx(){K(Ld,Ai),K($o,$o.current)}function dx(){Ai=Ld.current,q($o),q(Ld)}var nl=0,ir=null,Rr=null,ba=null,Pd=!1,Wo=!1,Jl=!1,zd=0,Qc=0,Ko=null,mN=0;function fa(){throw Error(n(321))}function ux(s,o){if(o===null)return!1;for(var x=0;x<o.length&&x<s.length;x++)if(!m(s[x],o[x]))return!1;return!0}function fx(s,o,x,y,j,R){return nl=R,ir=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,X.H=s===null||s.memoizedState===null?F1:B1,Jl=!1,R=x(y,j),Jl=!1,Wo&&(R=t1(o,x,y,j)),e1(s),R}function e1(s){X.H=Xd;var o=Rr!==null&&Rr.next!==null;if(nl=0,ba=Rr=ir=null,Pd=!1,Qc=0,Ko=null,o)throw Error(n(300));s===null||La||(s=s.dependencies,s!==null&&Md(s)&&(La=!0))}function t1(s,o,x,y){ir=s;var j=0;do{if(Wo&&(Ko=null),Qc=0,Wo=!1,25<=j)throw Error(n(301));if(j+=1,ba=Rr=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}X.H=NN,R=o(x,y)}while(Wo);return R}function gN(){var s=X.H,o=s.useState()[0];return o=typeof o.then=="function"?Jc(o):o,s=s.useState()[0],(Rr!==null?Rr.memoizedState:null)!==s&&(ir.flags|=1024),o}function xx(){var s=zd!==0;return zd=0,s}function hx(s,o,x){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x}function mx(s){if(Pd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Pd=!1}nl=0,ba=Rr=ir=null,Wo=!1,Qc=zd=0,Ko=null}function As(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ba===null?ir.memoizedState=ba=s:ba=ba.next=s,ba}function va(){if(Rr===null){var s=ir.alternate;s=s!==null?s.memoizedState:null}else s=Rr.next;var o=ba===null?ir.memoizedState:ba.next;if(o!==null)ba=o,Rr=s;else{if(s===null)throw ir.alternate===null?Error(n(467)):Error(n(310));Rr=s,s={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},ba===null?ir.memoizedState=ba=s:ba=ba.next=s}return ba}function gx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Jc(s){var o=Qc;return Qc+=1,Ko===null&&(Ko=[]),s=$g(Ko,s,o),o=ir,(ba===null?o.memoizedState:ba.next)===null&&(o=o.alternate,X.H=o===null||o.memoizedState===null?F1:B1),s}function Ud(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Jc(s);if(s.$$typeof===T)return ss(s)}throw Error(n(438,String(s)))}function px(s){var o=null,x=ir.updateQueue;if(x!==null&&(o=x.memoCache),o==null){var y=ir.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(o={data:y.data.map(function(j){return j.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),x===null&&(x=gx(),ir.updateQueue=x),x.memoCache=o,x=o.data[o.index],x===void 0)for(x=o.data[o.index]=Array(s),y=0;y<s;y++)x[y]=W;return o.index++,x}function Ni(s,o){return typeof o=="function"?o(s):o}function Hd(s){var o=va();return yx(o,Rr,s)}function yx(s,o,x){var y=s.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=x;var j=s.baseQueue,R=y.pending;if(R!==null){if(j!==null){var Z=j.next;j.next=R.next,R.next=Z}o.baseQueue=j=R,y.pending=null}if(R=s.baseState,j===null)s.memoizedState=R;else{o=j.next;var he=Z=null,_e=null,Ye=o,it=!1;do{var dt=Ye.lane&-536870913;if(dt!==Ye.lane?(mr&dt)===dt:(nl&dt)===dt){var qe=Ye.revertLane;if(qe===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),dt===Xo&&(it=!0);else if((nl&qe)===qe){Ye=Ye.next,qe===Xo&&(it=!0);continue}else dt={lane:0,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},_e===null?(he=_e=dt,Z=R):_e=_e.next=dt,ir.lanes|=qe,fl|=qe;dt=Ye.action,Jl&&x(R,dt),R=Ye.hasEagerState?Ye.eagerState:x(R,dt)}else qe={lane:dt,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},_e===null?(he=_e=qe,Z=R):_e=_e.next=qe,ir.lanes|=dt,fl|=dt;Ye=Ye.next}while(Ye!==null&&Ye!==o);if(_e===null?Z=R:_e.next=he,!m(R,s.memoizedState)&&(La=!0,it&&(x=qo,x!==null)))throw x;s.memoizedState=R,s.baseState=Z,s.baseQueue=_e,y.lastRenderedState=R}return j===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function bx(s){var o=va(),x=o.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=s;var y=x.dispatch,j=x.pending,R=o.memoizedState;if(j!==null){x.pending=null;var Z=j=j.next;do R=s(R,Z.action),Z=Z.next;while(Z!==j);m(R,o.memoizedState)||(La=!0),o.memoizedState=R,o.baseQueue===null&&(o.baseState=R),x.lastRenderedState=R}return[R,y]}function r1(s,o,x){var y=ir,j=va(),R=Nr;if(R){if(x===void 0)throw Error(n(407));x=x()}else x=o();var Z=!m((Rr||j).memoizedState,x);Z&&(j.memoizedState=x,La=!0),j=j.queue;var he=n1.bind(null,y,j,s);if(e0(2048,8,he,[s]),j.getSnapshot!==o||Z||ba!==null&&ba.memoizedState.tag&1){if(y.flags|=2048,Zo(9,Vd(),s1.bind(null,y,j,x,o),null),zr===null)throw Error(n(349));R||(nl&124)!==0||a1(y,o,x)}return x}function a1(s,o,x){s.flags|=16384,s={getSnapshot:o,value:x},o=ir.updateQueue,o===null?(o=gx(),ir.updateQueue=o,o.stores=[s]):(x=o.stores,x===null?o.stores=[s]:x.push(s))}function s1(s,o,x,y){o.value=x,o.getSnapshot=y,i1(o)&&l1(s)}function n1(s,o,x){return x(function(){i1(o)&&l1(s)})}function i1(s){var o=s.getSnapshot;s=s.value;try{var x=o();return!m(s,x)}catch{return!0}}function l1(s){var o=Ho(s,2);o!==null&&Vs(o,s,2)}function vx(s){var o=As();if(typeof s=="function"){var x=s;if(s=x(),Jl){Ut(!0);try{x()}finally{Ut(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:s},o}function o1(s,o,x,y){return s.baseState=x,yx(s,Rr,typeof y=="function"?y:Ni)}function pN(s,o,x,y,j){if(Yd(s))throw Error(n(485));if(s=o.action,s!==null){var R={payload:j,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Z){R.listeners.push(Z)}};X.T!==null?x(!0):R.isTransition=!1,y(R),x=o.pending,x===null?(R.next=o.pending=R,c1(o,R)):(R.next=x.next,o.pending=x.next=R)}}function c1(s,o){var x=o.action,y=o.payload,j=s.state;if(o.isTransition){var R=X.T,Z={};X.T=Z;try{var he=x(j,y),_e=X.S;_e!==null&&_e(Z,he),d1(s,o,he)}catch(Ye){wx(s,o,Ye)}finally{X.T=R}}else try{R=x(j,y),d1(s,o,R)}catch(Ye){wx(s,o,Ye)}}function d1(s,o,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(y){u1(s,o,y)},function(y){return wx(s,o,y)}):u1(s,o,x)}function u1(s,o,x){o.status="fulfilled",o.value=x,f1(o),s.state=x,o=s.pending,o!==null&&(x=o.next,x===o?s.pending=null:(x=x.next,o.next=x,c1(s,x)))}function wx(s,o,x){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do o.status="rejected",o.reason=x,f1(o),o=o.next;while(o!==y)}s.action=null}function f1(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function x1(s,o){return o}function h1(s,o){if(Nr){var x=zr.formState;if(x!==null){e:{var y=ir;if(Nr){if(ra){t:{for(var j=ra,R=Wn;j.nodeType!==8;){if(!R){j=null;break t}if(j=jn(j.nextSibling),j===null){j=null;break t}}R=j.data,j=R==="F!"||R==="F"?j:null}if(j){ra=jn(j.nextSibling),y=j.data==="F!";break e}}Wl(y)}y=!1}y&&(o=x[0])}}return x=As(),x.memoizedState=x.baseState=o,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:x1,lastRenderedState:o},x.queue=y,x=M1.bind(null,ir,y),y.dispatch=x,y=vx(!1),R=Ex.bind(null,ir,!1,y.queue),y=As(),j={state:o,dispatch:null,action:s,pending:null},y.queue=j,x=pN.bind(null,ir,j,R,x),j.dispatch=x,y.memoizedState=s,[o,x,!1]}function m1(s){var o=va();return g1(o,Rr,s)}function g1(s,o,x){if(o=yx(s,o,x1)[0],s=Hd(Ni)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var y=Jc(o)}catch(Z){throw Z===qc?Fd:Z}else y=o;o=va();var j=o.queue,R=j.dispatch;return x!==o.memoizedState&&(ir.flags|=2048,Zo(9,Vd(),yN.bind(null,j,x),null)),[y,R,s]}function yN(s,o){s.action=o}function p1(s){var o=va(),x=Rr;if(x!==null)return g1(o,x,s);va(),o=o.memoizedState,x=va();var y=x.queue.dispatch;return x.memoizedState=s,[o,y,!1]}function Zo(s,o,x,y){return s={tag:s,create:x,deps:y,inst:o,next:null},o=ir.updateQueue,o===null&&(o=gx(),ir.updateQueue=o),x=o.lastEffect,x===null?o.lastEffect=s.next=s:(y=x.next,x.next=s,s.next=y,o.lastEffect=s),s}function Vd(){return{destroy:void 0,resource:void 0}}function y1(){return va().memoizedState}function Gd(s,o,x,y){var j=As();y=y===void 0?null:y,ir.flags|=s,j.memoizedState=Zo(1|o,Vd(),x,y)}function e0(s,o,x,y){var j=va();y=y===void 0?null:y;var R=j.memoizedState.inst;Rr!==null&&y!==null&&ux(y,Rr.memoizedState.deps)?j.memoizedState=Zo(o,R,x,y):(ir.flags|=s,j.memoizedState=Zo(1|o,R,x,y))}function b1(s,o){Gd(8390656,8,s,o)}function v1(s,o){e0(2048,8,s,o)}function w1(s,o){return e0(4,2,s,o)}function N1(s,o){return e0(4,4,s,o)}function k1(s,o){if(typeof o=="function"){s=s();var x=o(s);return function(){typeof x=="function"?x():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function j1(s,o,x){x=x!=null?x.concat([s]):null,e0(4,4,k1.bind(null,o,s),x)}function Nx(){}function C1(s,o){var x=va();o=o===void 0?null:o;var y=x.memoizedState;return o!==null&&ux(o,y[1])?y[0]:(x.memoizedState=[s,o],s)}function E1(s,o){var x=va();o=o===void 0?null:o;var y=x.memoizedState;if(o!==null&&ux(o,y[1]))return y[0];if(y=s(),Jl){Ut(!0);try{s()}finally{Ut(!1)}}return x.memoizedState=[y,o],y}function kx(s,o,x){return x===void 0||(nl&1073741824)!==0?s.memoizedState=o:(s.memoizedState=x,s=_p(),ir.lanes|=s,fl|=s,x)}function S1(s,o,x,y){return m(x,o)?x:$o.current!==null?(s=kx(s,x,y),m(s,o)||(La=!0),s):(nl&42)===0?(La=!0,s.memoizedState=x):(s=_p(),ir.lanes|=s,fl|=s,o)}function A1(s,o,x,y,j){var R=de.p;de.p=R!==0&&8>R?R:8;var Z=X.T,he={};X.T=he,Ex(s,!1,o,x);try{var _e=j(),Ye=X.S;if(Ye!==null&&Ye(he,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var it=hN(_e,y);t0(s,o,it,Hs(s))}else t0(s,o,y,Hs(s))}catch(dt){t0(s,o,{then:function(){},status:"rejected",reason:dt},Hs())}finally{de.p=R,X.T=Z}}function bN(){}function jx(s,o,x,y){if(s.tag!==5)throw Error(n(476));var j=_1(s).queue;A1(s,j,o,ye,x===null?bN:function(){return T1(s),x(y)})}function _1(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:ye},next:null};var x={};return o.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:x},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function T1(s){var o=_1(s).next.queue;t0(s,o,{},Hs())}function Cx(){return ss(b0)}function D1(){return va().memoizedState}function R1(){return va().memoizedState}function vN(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var x=Hs();s=al(x);var y=sl(o,s,x);y!==null&&(Vs(y,o,x),Wc(y,o,x)),o={cache:tx()},s.payload=o;return}o=o.return}}function wN(s,o,x){var y=Hs();x={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Yd(s)?I1(o,x):(x=Yf(s,o,x,y),x!==null&&(Vs(x,s,y),O1(x,o,y)))}function M1(s,o,x){var y=Hs();t0(s,o,x,y)}function t0(s,o,x,y){var j={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Yd(s))I1(o,j);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=o.lastRenderedReducer,R!==null))try{var Z=o.lastRenderedState,he=R(Z,x);if(j.hasEagerState=!0,j.eagerState=he,m(he,Z))return Ad(s,o,j,0),zr===null&&Sd(),!1}catch{}finally{}if(x=Yf(s,o,j,y),x!==null)return Vs(x,s,y),O1(x,o,y),!0}return!1}function Ex(s,o,x,y){if(y={lane:2,revertLane:sh(),action:y,hasEagerState:!1,eagerState:null,next:null},Yd(s)){if(o)throw Error(n(479))}else o=Yf(s,x,y,2),o!==null&&Vs(o,s,2)}function Yd(s){var o=s.alternate;return s===ir||o!==null&&o===ir}function I1(s,o){Wo=Pd=!0;var x=s.pending;x===null?o.next=o:(o.next=x.next,x.next=o),s.pending=o}function O1(s,o,x){if((x&4194048)!==0){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,Za(s,x)}}var Xd={readContext:ss,use:Ud,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useLayoutEffect:fa,useInsertionEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useSyncExternalStore:fa,useId:fa,useHostTransitionStatus:fa,useFormState:fa,useActionState:fa,useOptimistic:fa,useMemoCache:fa,useCacheRefresh:fa},F1={readContext:ss,use:Ud,useCallback:function(s,o){return As().memoizedState=[s,o===void 0?null:o],s},useContext:ss,useEffect:b1,useImperativeHandle:function(s,o,x){x=x!=null?x.concat([s]):null,Gd(4194308,4,k1.bind(null,o,s),x)},useLayoutEffect:function(s,o){return Gd(4194308,4,s,o)},useInsertionEffect:function(s,o){Gd(4,2,s,o)},useMemo:function(s,o){var x=As();o=o===void 0?null:o;var y=s();if(Jl){Ut(!0);try{s()}finally{Ut(!1)}}return x.memoizedState=[y,o],y},useReducer:function(s,o,x){var y=As();if(x!==void 0){var j=x(o);if(Jl){Ut(!0);try{x(o)}finally{Ut(!1)}}}else j=o;return y.memoizedState=y.baseState=j,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:j},y.queue=s,s=s.dispatch=wN.bind(null,ir,s),[y.memoizedState,s]},useRef:function(s){var o=As();return s={current:s},o.memoizedState=s},useState:function(s){s=vx(s);var o=s.queue,x=M1.bind(null,ir,o);return o.dispatch=x,[s.memoizedState,x]},useDebugValue:Nx,useDeferredValue:function(s,o){var x=As();return kx(x,s,o)},useTransition:function(){var s=vx(!1);return s=A1.bind(null,ir,s.queue,!0,!1),As().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,x){var y=ir,j=As();if(Nr){if(x===void 0)throw Error(n(407));x=x()}else{if(x=o(),zr===null)throw Error(n(349));(mr&124)!==0||a1(y,o,x)}j.memoizedState=x;var R={value:x,getSnapshot:o};return j.queue=R,b1(n1.bind(null,y,R,s),[s]),y.flags|=2048,Zo(9,Vd(),s1.bind(null,y,R,x,o),null),x},useId:function(){var s=As(),o=zr.identifierPrefix;if(Nr){var x=bi,y=yi;x=(y&~(1<<32-Yt(y)-1)).toString(32)+x,o=""+o+"R"+x,x=zd++,0<x&&(o+="H"+x.toString(32)),o+=""}else x=mN++,o=""+o+"r"+x.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:Cx,useFormState:h1,useActionState:h1,useOptimistic:function(s){var o=As();o.memoizedState=o.baseState=s;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=x,o=Ex.bind(null,ir,!0,x),x.dispatch=o,[s,o]},useMemoCache:px,useCacheRefresh:function(){return As().memoizedState=vN.bind(null,ir)}},B1={readContext:ss,use:Ud,useCallback:C1,useContext:ss,useEffect:v1,useImperativeHandle:j1,useInsertionEffect:w1,useLayoutEffect:N1,useMemo:E1,useReducer:Hd,useRef:y1,useState:function(){return Hd(Ni)},useDebugValue:Nx,useDeferredValue:function(s,o){var x=va();return S1(x,Rr.memoizedState,s,o)},useTransition:function(){var s=Hd(Ni)[0],o=va().memoizedState;return[typeof s=="boolean"?s:Jc(s),o]},useSyncExternalStore:r1,useId:D1,useHostTransitionStatus:Cx,useFormState:m1,useActionState:m1,useOptimistic:function(s,o){var x=va();return o1(x,Rr,s,o)},useMemoCache:px,useCacheRefresh:R1},NN={readContext:ss,use:Ud,useCallback:C1,useContext:ss,useEffect:v1,useImperativeHandle:j1,useInsertionEffect:w1,useLayoutEffect:N1,useMemo:E1,useReducer:bx,useRef:y1,useState:function(){return bx(Ni)},useDebugValue:Nx,useDeferredValue:function(s,o){var x=va();return Rr===null?kx(x,s,o):S1(x,Rr.memoizedState,s,o)},useTransition:function(){var s=bx(Ni)[0],o=va().memoizedState;return[typeof s=="boolean"?s:Jc(s),o]},useSyncExternalStore:r1,useId:D1,useHostTransitionStatus:Cx,useFormState:p1,useActionState:p1,useOptimistic:function(s,o){var x=va();return Rr!==null?o1(x,Rr,s,o):(x.baseState=s,[s,x.queue.dispatch])},useMemoCache:px,useCacheRefresh:R1},Qo=null,r0=0;function qd(s){var o=r0;return r0+=1,Qo===null&&(Qo=[]),$g(Qo,s,o)}function a0(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function $d(s,o){throw o.$$typeof===k?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function L1(s){var o=s._init;return o(s._payload)}function P1(s){function o(Pe,Ie){if(s){var He=Pe.deletions;He===null?(Pe.deletions=[Ie],Pe.flags|=16):He.push(Ie)}}function x(Pe,Ie){if(!s)return null;for(;Ie!==null;)o(Pe,Ie),Ie=Ie.sibling;return null}function y(Pe){for(var Ie=new Map;Pe!==null;)Pe.key!==null?Ie.set(Pe.key,Pe):Ie.set(Pe.index,Pe),Pe=Pe.sibling;return Ie}function j(Pe,Ie){return Pe=pi(Pe,Ie),Pe.index=0,Pe.sibling=null,Pe}function R(Pe,Ie,He){return Pe.index=He,s?(He=Pe.alternate,He!==null?(He=He.index,He<Ie?(Pe.flags|=67108866,Ie):He):(Pe.flags|=67108866,Ie)):(Pe.flags|=1048576,Ie)}function Z(Pe){return s&&Pe.alternate===null&&(Pe.flags|=67108866),Pe}function he(Pe,Ie,He,ot){return Ie===null||Ie.tag!==6?(Ie=qf(He,Pe.mode,ot),Ie.return=Pe,Ie):(Ie=j(Ie,He),Ie.return=Pe,Ie)}function _e(Pe,Ie,He,ot){var St=He.type;return St===D?it(Pe,Ie,He.props.children,ot,He.key):Ie!==null&&(Ie.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===P&&L1(St)===Ie.type)?(Ie=j(Ie,He.props),a0(Ie,He),Ie.return=Pe,Ie):(Ie=Td(He.type,He.key,He.props,null,Pe.mode,ot),a0(Ie,He),Ie.return=Pe,Ie)}function Ye(Pe,Ie,He,ot){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==He.containerInfo||Ie.stateNode.implementation!==He.implementation?(Ie=$f(He,Pe.mode,ot),Ie.return=Pe,Ie):(Ie=j(Ie,He.children||[]),Ie.return=Pe,Ie)}function it(Pe,Ie,He,ot,St){return Ie===null||Ie.tag!==7?(Ie=Yl(He,Pe.mode,ot,St),Ie.return=Pe,Ie):(Ie=j(Ie,He),Ie.return=Pe,Ie)}function dt(Pe,Ie,He){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=qf(""+Ie,Pe.mode,He),Ie.return=Pe,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return He=Td(Ie.type,Ie.key,Ie.props,null,Pe.mode,He),a0(He,Ie),He.return=Pe,He;case S:return Ie=$f(Ie,Pe.mode,He),Ie.return=Pe,Ie;case P:var ot=Ie._init;return Ie=ot(Ie._payload),dt(Pe,Ie,He)}if(Y(Ie)||G(Ie))return Ie=Yl(Ie,Pe.mode,He,null),Ie.return=Pe,Ie;if(typeof Ie.then=="function")return dt(Pe,qd(Ie),He);if(Ie.$$typeof===T)return dt(Pe,Id(Pe,Ie),He);$d(Pe,Ie)}return null}function qe(Pe,Ie,He,ot){var St=Ie!==null?Ie.key:null;if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return St!==null?null:he(Pe,Ie,""+He,ot);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case C:return He.key===St?_e(Pe,Ie,He,ot):null;case S:return He.key===St?Ye(Pe,Ie,He,ot):null;case P:return St=He._init,He=St(He._payload),qe(Pe,Ie,He,ot)}if(Y(He)||G(He))return St!==null?null:it(Pe,Ie,He,ot,null);if(typeof He.then=="function")return qe(Pe,Ie,qd(He),ot);if(He.$$typeof===T)return qe(Pe,Ie,Id(Pe,He),ot);$d(Pe,He)}return null}function Ze(Pe,Ie,He,ot,St){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return Pe=Pe.get(He)||null,he(Ie,Pe,""+ot,St);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case C:return Pe=Pe.get(ot.key===null?He:ot.key)||null,_e(Ie,Pe,ot,St);case S:return Pe=Pe.get(ot.key===null?He:ot.key)||null,Ye(Ie,Pe,ot,St);case P:var lr=ot._init;return ot=lr(ot._payload),Ze(Pe,Ie,He,ot,St)}if(Y(ot)||G(ot))return Pe=Pe.get(He)||null,it(Ie,Pe,ot,St,null);if(typeof ot.then=="function")return Ze(Pe,Ie,He,qd(ot),St);if(ot.$$typeof===T)return Ze(Pe,Ie,He,Id(Ie,ot),St);$d(Ie,ot)}return null}function Ht(Pe,Ie,He,ot){for(var St=null,lr=null,Rt=Ie,Lt=Ie=0,za=null;Rt!==null&&Lt<He.length;Lt++){Rt.index>Lt?(za=Rt,Rt=null):za=Rt.sibling;var wr=qe(Pe,Rt,He[Lt],ot);if(wr===null){Rt===null&&(Rt=za);break}s&&Rt&&wr.alternate===null&&o(Pe,Rt),Ie=R(wr,Ie,Lt),lr===null?St=wr:lr.sibling=wr,lr=wr,Rt=za}if(Lt===He.length)return x(Pe,Rt),Nr&&ql(Pe,Lt),St;if(Rt===null){for(;Lt<He.length;Lt++)Rt=dt(Pe,He[Lt],ot),Rt!==null&&(Ie=R(Rt,Ie,Lt),lr===null?St=Rt:lr.sibling=Rt,lr=Rt);return Nr&&ql(Pe,Lt),St}for(Rt=y(Rt);Lt<He.length;Lt++)za=Ze(Rt,Pe,Lt,He[Lt],ot),za!==null&&(s&&za.alternate!==null&&Rt.delete(za.key===null?Lt:za.key),Ie=R(za,Ie,Lt),lr===null?St=za:lr.sibling=za,lr=za);return s&&Rt.forEach(function(wl){return o(Pe,wl)}),Nr&&ql(Pe,Lt),St}function Bt(Pe,Ie,He,ot){if(He==null)throw Error(n(151));for(var St=null,lr=null,Rt=Ie,Lt=Ie=0,za=null,wr=He.next();Rt!==null&&!wr.done;Lt++,wr=He.next()){Rt.index>Lt?(za=Rt,Rt=null):za=Rt.sibling;var wl=qe(Pe,Rt,wr.value,ot);if(wl===null){Rt===null&&(Rt=za);break}s&&Rt&&wl.alternate===null&&o(Pe,Rt),Ie=R(wl,Ie,Lt),lr===null?St=wl:lr.sibling=wl,lr=wl,Rt=za}if(wr.done)return x(Pe,Rt),Nr&&ql(Pe,Lt),St;if(Rt===null){for(;!wr.done;Lt++,wr=He.next())wr=dt(Pe,wr.value,ot),wr!==null&&(Ie=R(wr,Ie,Lt),lr===null?St=wr:lr.sibling=wr,lr=wr);return Nr&&ql(Pe,Lt),St}for(Rt=y(Rt);!wr.done;Lt++,wr=He.next())wr=Ze(Rt,Pe,Lt,wr.value,ot),wr!==null&&(s&&wr.alternate!==null&&Rt.delete(wr.key===null?Lt:wr.key),Ie=R(wr,Ie,Lt),lr===null?St=wr:lr.sibling=wr,lr=wr);return s&&Rt.forEach(function(kk){return o(Pe,kk)}),Nr&&ql(Pe,Lt),St}function Ir(Pe,Ie,He,ot){if(typeof He=="object"&&He!==null&&He.type===D&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case C:e:{for(var St=He.key;Ie!==null;){if(Ie.key===St){if(St=He.type,St===D){if(Ie.tag===7){x(Pe,Ie.sibling),ot=j(Ie,He.props.children),ot.return=Pe,Pe=ot;break e}}else if(Ie.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===P&&L1(St)===Ie.type){x(Pe,Ie.sibling),ot=j(Ie,He.props),a0(ot,He),ot.return=Pe,Pe=ot;break e}x(Pe,Ie);break}else o(Pe,Ie);Ie=Ie.sibling}He.type===D?(ot=Yl(He.props.children,Pe.mode,ot,He.key),ot.return=Pe,Pe=ot):(ot=Td(He.type,He.key,He.props,null,Pe.mode,ot),a0(ot,He),ot.return=Pe,Pe=ot)}return Z(Pe);case S:e:{for(St=He.key;Ie!==null;){if(Ie.key===St)if(Ie.tag===4&&Ie.stateNode.containerInfo===He.containerInfo&&Ie.stateNode.implementation===He.implementation){x(Pe,Ie.sibling),ot=j(Ie,He.children||[]),ot.return=Pe,Pe=ot;break e}else{x(Pe,Ie);break}else o(Pe,Ie);Ie=Ie.sibling}ot=$f(He,Pe.mode,ot),ot.return=Pe,Pe=ot}return Z(Pe);case P:return St=He._init,He=St(He._payload),Ir(Pe,Ie,He,ot)}if(Y(He))return Ht(Pe,Ie,He,ot);if(G(He)){if(St=G(He),typeof St!="function")throw Error(n(150));return He=St.call(He),Bt(Pe,Ie,He,ot)}if(typeof He.then=="function")return Ir(Pe,Ie,qd(He),ot);if(He.$$typeof===T)return Ir(Pe,Ie,Id(Pe,He),ot);$d(Pe,He)}return typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint"?(He=""+He,Ie!==null&&Ie.tag===6?(x(Pe,Ie.sibling),ot=j(Ie,He),ot.return=Pe,Pe=ot):(x(Pe,Ie),ot=qf(He,Pe.mode,ot),ot.return=Pe,Pe=ot),Z(Pe)):x(Pe,Ie)}return function(Pe,Ie,He,ot){try{r0=0;var St=Ir(Pe,Ie,He,ot);return Qo=null,St}catch(Rt){if(Rt===qc||Rt===Fd)throw Rt;var lr=Ls(29,Rt,null,Pe.mode);return lr.lanes=ot,lr.return=Pe,lr}finally{}}}var Jo=P1(!0),z1=P1(!1),on=ae(null),Kn=null;function il(s){var o=s.alternate;K(Ma,Ma.current&1),K(on,s),Kn===null&&(o===null||$o.current!==null||o.memoizedState!==null)&&(Kn=s)}function U1(s){if(s.tag===22){if(K(Ma,Ma.current),K(on,s),Kn===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Kn=s)}}else ll()}function ll(){K(Ma,Ma.current),K(on,on.current)}function ki(s){q(on),Kn===s&&(Kn=null),q(Ma)}var Ma=ae(0);function Wd(s){for(var o=s;o!==null;){if(o.tag===13){var x=o.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||gh(x)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Sx(s,o,x,y){o=s.memoizedState,x=x(y,o),x=x==null?o:w({},o,x),s.memoizedState=x,s.lanes===0&&(s.updateQueue.baseState=x)}var Ax={enqueueSetState:function(s,o,x){s=s._reactInternals;var y=Hs(),j=al(y);j.payload=o,x!=null&&(j.callback=x),o=sl(s,j,y),o!==null&&(Vs(o,s,y),Wc(o,s,y))},enqueueReplaceState:function(s,o,x){s=s._reactInternals;var y=Hs(),j=al(y);j.tag=1,j.payload=o,x!=null&&(j.callback=x),o=sl(s,j,y),o!==null&&(Vs(o,s,y),Wc(o,s,y))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var x=Hs(),y=al(x);y.tag=2,o!=null&&(y.callback=o),o=sl(s,y,x),o!==null&&(Vs(o,s,x),Wc(o,s,x))}};function H1(s,o,x,y,j,R,Z){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,R,Z):o.prototype&&o.prototype.isPureReactComponent?!p(x,y)||!p(j,R):!0}function V1(s,o,x,y){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(x,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(x,y),o.state!==s&&Ax.enqueueReplaceState(o,o.state,null)}function eo(s,o){var x=o;if("ref"in o){x={};for(var y in o)y!=="ref"&&(x[y]=o[y])}if(s=s.defaultProps){x===o&&(x=w({},x));for(var j in s)x[j]===void 0&&(x[j]=s[j])}return x}var Kd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function G1(s){Kd(s)}function Y1(s){console.error(s)}function X1(s){Kd(s)}function Zd(s,o){try{var x=s.onUncaughtError;x(o.value,{componentStack:o.stack})}catch(y){setTimeout(function(){throw y})}}function q1(s,o,x){try{var y=s.onCaughtError;y(x.value,{componentStack:x.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function _x(s,o,x){return x=al(x),x.tag=3,x.payload={element:null},x.callback=function(){Zd(s,o)},x}function $1(s){return s=al(s),s.tag=3,s}function W1(s,o,x,y){var j=x.type.getDerivedStateFromError;if(typeof j=="function"){var R=y.value;s.payload=function(){return j(R)},s.callback=function(){q1(o,x,y)}}var Z=x.stateNode;Z!==null&&typeof Z.componentDidCatch=="function"&&(s.callback=function(){q1(o,x,y),typeof j!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var he=y.stack;this.componentDidCatch(y.value,{componentStack:he!==null?he:""})})}function kN(s,o,x,y,j){if(x.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(o=x.alternate,o!==null&&Gc(o,x,j,!0),x=on.current,x!==null){switch(x.tag){case 13:return Kn===null?Jx():x.alternate===null&&aa===0&&(aa=3),x.flags&=-257,x.flags|=65536,x.lanes=j,y===sx?x.flags|=16384:(o=x.updateQueue,o===null?x.updateQueue=new Set([y]):o.add(y),th(s,y,j)),!1;case 22:return x.flags|=65536,y===sx?x.flags|=16384:(o=x.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([y])},x.updateQueue=o):(x=o.retryQueue,x===null?o.retryQueue=new Set([y]):x.add(y)),th(s,y,j)),!1}throw Error(n(435,x.tag))}return th(s,y,j),Jx(),!1}if(Nr)return o=on.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=j,y!==Zf&&(s=Error(n(422),{cause:y}),Vc(an(s,x)))):(y!==Zf&&(o=Error(n(423),{cause:y}),Vc(an(o,x))),s=s.current.alternate,s.flags|=65536,j&=-j,s.lanes|=j,y=an(y,x),j=_x(s.stateNode,y,j),lx(s,j),aa!==4&&(aa=2)),!1;var R=Error(n(520),{cause:y});if(R=an(R,x),d0===null?d0=[R]:d0.push(R),aa!==4&&(aa=2),o===null)return!0;y=an(y,x),x=o;do{switch(x.tag){case 3:return x.flags|=65536,s=j&-j,x.lanes|=s,s=_x(x.stateNode,y,s),lx(x,s),!1;case 1:if(o=x.type,R=x.stateNode,(x.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(xl===null||!xl.has(R))))return x.flags|=65536,j&=-j,x.lanes|=j,j=$1(j),W1(j,s,x,y),lx(x,j),!1}x=x.return}while(x!==null);return!1}var K1=Error(n(461)),La=!1;function Ya(s,o,x,y){o.child=s===null?z1(o,null,x,y):Jo(o,s.child,x,y)}function Z1(s,o,x,y,j){x=x.render;var R=o.ref;if("ref"in y){var Z={};for(var he in y)he!=="ref"&&(Z[he]=y[he])}else Z=y;return Zl(o),y=fx(s,o,x,Z,R,j),he=xx(),s!==null&&!La?(hx(s,o,j),ji(s,o,j)):(Nr&&he&&Wf(o),o.flags|=1,Ya(s,o,y,j),o.child)}function Q1(s,o,x,y,j){if(s===null){var R=x.type;return typeof R=="function"&&!Xf(R)&&R.defaultProps===void 0&&x.compare===null?(o.tag=15,o.type=R,J1(s,o,R,y,j)):(s=Td(x.type,null,y,o,o.mode,j),s.ref=o.ref,s.return=o,o.child=s)}if(R=s.child,!Bx(s,j)){var Z=R.memoizedProps;if(x=x.compare,x=x!==null?x:p,x(Z,y)&&s.ref===o.ref)return ji(s,o,j)}return o.flags|=1,s=pi(R,y),s.ref=o.ref,s.return=o,o.child=s}function J1(s,o,x,y,j){if(s!==null){var R=s.memoizedProps;if(p(R,y)&&s.ref===o.ref)if(La=!1,o.pendingProps=y=R,Bx(s,j))(s.flags&131072)!==0&&(La=!0);else return o.lanes=s.lanes,ji(s,o,j)}return Tx(s,o,x,y,j)}function ep(s,o,x){var y=o.pendingProps,j=y.children,R=s!==null?s.memoizedState:null;if(y.mode==="hidden"){if((o.flags&128)!==0){if(y=R!==null?R.baseLanes|x:x,s!==null){for(j=o.child=s.child,R=0;j!==null;)R=R|j.lanes|j.childLanes,j=j.sibling;o.childLanes=R&~y}else o.childLanes=0,o.child=null;return tp(s,o,y,x)}if((x&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Od(o,R!==null?R.cachePool:null),R!==null?Jg(o,R):cx(),U1(o);else return o.lanes=o.childLanes=536870912,tp(s,o,R!==null?R.baseLanes|x:x,x)}else R!==null?(Od(o,R.cachePool),Jg(o,R),ll(),o.memoizedState=null):(s!==null&&Od(o,null),cx(),ll());return Ya(s,o,j,x),o.child}function tp(s,o,x,y){var j=ax();return j=j===null?null:{parent:Ra._currentValue,pool:j},o.memoizedState={baseLanes:x,cachePool:j},s!==null&&Od(o,null),cx(),U1(o),s!==null&&Gc(s,o,y,!0),null}function Qd(s,o){var x=o.ref;if(x===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(s===null||s.ref!==x)&&(o.flags|=4194816)}}function Tx(s,o,x,y,j){return Zl(o),x=fx(s,o,x,y,void 0,j),y=xx(),s!==null&&!La?(hx(s,o,j),ji(s,o,j)):(Nr&&y&&Wf(o),o.flags|=1,Ya(s,o,x,j),o.child)}function rp(s,o,x,y,j,R){return Zl(o),o.updateQueue=null,x=t1(o,y,x,j),e1(s),y=xx(),s!==null&&!La?(hx(s,o,R),ji(s,o,R)):(Nr&&y&&Wf(o),o.flags|=1,Ya(s,o,x,R),o.child)}function ap(s,o,x,y,j){if(Zl(o),o.stateNode===null){var R=Vo,Z=x.contextType;typeof Z=="object"&&Z!==null&&(R=ss(Z)),R=new x(y,R),o.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Ax,o.stateNode=R,R._reactInternals=o,R=o.stateNode,R.props=y,R.state=o.memoizedState,R.refs={},nx(o),Z=x.contextType,R.context=typeof Z=="object"&&Z!==null?ss(Z):Vo,R.state=o.memoizedState,Z=x.getDerivedStateFromProps,typeof Z=="function"&&(Sx(o,x,Z,y),R.state=o.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Z=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Z!==R.state&&Ax.enqueueReplaceState(R,R.state,null),Zc(o,y,R,j),Kc(),R.state=o.memoizedState),typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!0}else if(s===null){R=o.stateNode;var he=o.memoizedProps,_e=eo(x,he);R.props=_e;var Ye=R.context,it=x.contextType;Z=Vo,typeof it=="object"&&it!==null&&(Z=ss(it));var dt=x.getDerivedStateFromProps;it=typeof dt=="function"||typeof R.getSnapshotBeforeUpdate=="function",he=o.pendingProps!==he,it||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(he||Ye!==Z)&&V1(o,R,y,Z),rl=!1;var qe=o.memoizedState;R.state=qe,Zc(o,y,R,j),Kc(),Ye=o.memoizedState,he||qe!==Ye||rl?(typeof dt=="function"&&(Sx(o,x,dt,y),Ye=o.memoizedState),(_e=rl||H1(o,x,_e,y,qe,Ye,Z))?(it||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=Ye),R.props=y,R.state=Ye,R.context=Z,y=_e):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{R=o.stateNode,ix(s,o),Z=o.memoizedProps,it=eo(x,Z),R.props=it,dt=o.pendingProps,qe=R.context,Ye=x.contextType,_e=Vo,typeof Ye=="object"&&Ye!==null&&(_e=ss(Ye)),he=x.getDerivedStateFromProps,(Ye=typeof he=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Z!==dt||qe!==_e)&&V1(o,R,y,_e),rl=!1,qe=o.memoizedState,R.state=qe,Zc(o,y,R,j),Kc();var Ze=o.memoizedState;Z!==dt||qe!==Ze||rl||s!==null&&s.dependencies!==null&&Md(s.dependencies)?(typeof he=="function"&&(Sx(o,x,he,y),Ze=o.memoizedState),(it=rl||H1(o,x,it,y,qe,Ze,_e)||s!==null&&s.dependencies!==null&&Md(s.dependencies))?(Ye||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Ze,_e),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Ze,_e)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||Z===s.memoizedProps&&qe===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Z===s.memoizedProps&&qe===s.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Ze),R.props=y,R.state=Ze,R.context=_e,y=it):(typeof R.componentDidUpdate!="function"||Z===s.memoizedProps&&qe===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Z===s.memoizedProps&&qe===s.memoizedState||(o.flags|=1024),y=!1)}return R=y,Qd(s,o),y=(o.flags&128)!==0,R||y?(R=o.stateNode,x=y&&typeof x.getDerivedStateFromError!="function"?null:R.render(),o.flags|=1,s!==null&&y?(o.child=Jo(o,s.child,null,j),o.child=Jo(o,null,x,j)):Ya(s,o,x,j),o.memoizedState=R.state,s=o.child):s=ji(s,o,j),s}function sp(s,o,x,y){return Hc(),o.flags|=256,Ya(s,o,x,y),o.child}var Dx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Rx(s){return{baseLanes:s,cachePool:Yg()}}function Mx(s,o,x){return s=s!==null?s.childLanes&~x:0,o&&(s|=cn),s}function np(s,o,x){var y=o.pendingProps,j=!1,R=(o.flags&128)!==0,Z;if((Z=R)||(Z=s!==null&&s.memoizedState===null?!1:(Ma.current&2)!==0),Z&&(j=!0,o.flags&=-129),Z=(o.flags&32)!==0,o.flags&=-33,s===null){if(Nr){if(j?il(o):ll(),Nr){var he=ra,_e;if(_e=he){e:{for(_e=he,he=Wn;_e.nodeType!==8;){if(!he){he=null;break e}if(_e=jn(_e.nextSibling),_e===null){he=null;break e}}he=_e}he!==null?(o.memoizedState={dehydrated:he,treeContext:Xl!==null?{id:yi,overflow:bi}:null,retryLane:536870912,hydrationErrors:null},_e=Ls(18,null,null,0),_e.stateNode=he,_e.return=o,o.child=_e,ys=o,ra=null,_e=!0):_e=!1}_e||Wl(o)}if(he=o.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return gh(he)?o.lanes=32:o.lanes=536870912,null;ki(o)}return he=y.children,y=y.fallback,j?(ll(),j=o.mode,he=Jd({mode:"hidden",children:he},j),y=Yl(y,j,x,null),he.return=o,y.return=o,he.sibling=y,o.child=he,j=o.child,j.memoizedState=Rx(x),j.childLanes=Mx(s,Z,x),o.memoizedState=Dx,y):(il(o),Ix(o,he))}if(_e=s.memoizedState,_e!==null&&(he=_e.dehydrated,he!==null)){if(R)o.flags&256?(il(o),o.flags&=-257,o=Ox(s,o,x)):o.memoizedState!==null?(ll(),o.child=s.child,o.flags|=128,o=null):(ll(),j=y.fallback,he=o.mode,y=Jd({mode:"visible",children:y.children},he),j=Yl(j,he,x,null),j.flags|=2,y.return=o,j.return=o,y.sibling=j,o.child=y,Jo(o,s.child,null,x),y=o.child,y.memoizedState=Rx(x),y.childLanes=Mx(s,Z,x),o.memoizedState=Dx,o=j);else if(il(o),gh(he)){if(Z=he.nextSibling&&he.nextSibling.dataset,Z)var Ye=Z.dgst;Z=Ye,y=Error(n(419)),y.stack="",y.digest=Z,Vc({value:y,source:null,stack:null}),o=Ox(s,o,x)}else if(La||Gc(s,o,x,!1),Z=(x&s.childLanes)!==0,La||Z){if(Z=zr,Z!==null&&(y=x&-x,y=(y&42)!==0?1:ui(y),y=(y&(Z.suspendedLanes|x))!==0?0:y,y!==0&&y!==_e.retryLane))throw _e.retryLane=y,Ho(s,y),Vs(Z,s,y),K1;he.data==="$?"||Jx(),o=Ox(s,o,x)}else he.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=_e.treeContext,ra=jn(he.nextSibling),ys=o,Nr=!0,$l=null,Wn=!1,s!==null&&(nn[ln++]=yi,nn[ln++]=bi,nn[ln++]=Xl,yi=s.id,bi=s.overflow,Xl=o),o=Ix(o,y.children),o.flags|=4096);return o}return j?(ll(),j=y.fallback,he=o.mode,_e=s.child,Ye=_e.sibling,y=pi(_e,{mode:"hidden",children:y.children}),y.subtreeFlags=_e.subtreeFlags&65011712,Ye!==null?j=pi(Ye,j):(j=Yl(j,he,x,null),j.flags|=2),j.return=o,y.return=o,y.sibling=j,o.child=y,y=j,j=o.child,he=s.child.memoizedState,he===null?he=Rx(x):(_e=he.cachePool,_e!==null?(Ye=Ra._currentValue,_e=_e.parent!==Ye?{parent:Ye,pool:Ye}:_e):_e=Yg(),he={baseLanes:he.baseLanes|x,cachePool:_e}),j.memoizedState=he,j.childLanes=Mx(s,Z,x),o.memoizedState=Dx,y):(il(o),x=s.child,s=x.sibling,x=pi(x,{mode:"visible",children:y.children}),x.return=o,x.sibling=null,s!==null&&(Z=o.deletions,Z===null?(o.deletions=[s],o.flags|=16):Z.push(s)),o.child=x,o.memoizedState=null,x)}function Ix(s,o){return o=Jd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Jd(s,o){return s=Ls(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ox(s,o,x){return Jo(o,s.child,null,x),s=Ix(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function ip(s,o,x){s.lanes|=o;var y=s.alternate;y!==null&&(y.lanes|=o),Jf(s.return,o,x)}function Fx(s,o,x,y,j){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:x,tailMode:j}:(R.isBackwards=o,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=x,R.tailMode=j)}function lp(s,o,x){var y=o.pendingProps,j=y.revealOrder,R=y.tail;if(Ya(s,o,y.children,x),y=Ma.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ip(s,x,o);else if(s.tag===19)ip(s,x,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(K(Ma,y),j){case"forwards":for(x=o.child,j=null;x!==null;)s=x.alternate,s!==null&&Wd(s)===null&&(j=x),x=x.sibling;x=j,x===null?(j=o.child,o.child=null):(j=x.sibling,x.sibling=null),Fx(o,!1,j,x,R);break;case"backwards":for(x=null,j=o.child,o.child=null;j!==null;){if(s=j.alternate,s!==null&&Wd(s)===null){o.child=j;break}s=j.sibling,j.sibling=x,x=j,j=s}Fx(o,!0,x,null,R);break;case"together":Fx(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ji(s,o,x){if(s!==null&&(o.dependencies=s.dependencies),fl|=o.lanes,(x&o.childLanes)===0)if(s!==null){if(Gc(s,o,x,!1),(x&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,x=pi(s,s.pendingProps),o.child=x,x.return=o;s.sibling!==null;)s=s.sibling,x=x.sibling=pi(s,s.pendingProps),x.return=o;x.sibling=null}return o.child}function Bx(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Md(s)))}function jN(s,o,x){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),tl(o,Ra,s.memoizedState.cache),Hc();break;case 27:case 5:Oe(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:tl(o,o.type,o.memoizedProps.value);break;case 13:var y=o.memoizedState;if(y!==null)return y.dehydrated!==null?(il(o),o.flags|=128,null):(x&o.child.childLanes)!==0?np(s,o,x):(il(o),s=ji(s,o,x),s!==null?s.sibling:null);il(o);break;case 19:var j=(s.flags&128)!==0;if(y=(x&o.childLanes)!==0,y||(Gc(s,o,x,!1),y=(x&o.childLanes)!==0),j){if(y)return lp(s,o,x);o.flags|=128}if(j=o.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),K(Ma,Ma.current),y)break;return null;case 22:case 23:return o.lanes=0,ep(s,o,x);case 24:tl(o,Ra,s.memoizedState.cache)}return ji(s,o,x)}function op(s,o,x){if(s!==null)if(s.memoizedProps!==o.pendingProps)La=!0;else{if(!Bx(s,x)&&(o.flags&128)===0)return La=!1,jN(s,o,x);La=(s.flags&131072)!==0}else La=!1,Nr&&(o.flags&1048576)!==0&&Lg(o,Rd,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var y=o.elementType,j=y._init;if(y=j(y._payload),o.type=y,typeof y=="function")Xf(y)?(s=eo(y,s),o.tag=1,o=ap(null,o,y,s,x)):(o.tag=0,o=Tx(null,o,y,s,x));else{if(y!=null){if(j=y.$$typeof,j===B){o.tag=11,o=Z1(null,o,y,s,x);break e}else if(j===L){o.tag=14,o=Q1(null,o,y,s,x);break e}}throw o=le(y)||y,Error(n(306,o,""))}}return o;case 0:return Tx(s,o,o.type,o.pendingProps,x);case 1:return y=o.type,j=eo(y,o.pendingProps),ap(s,o,y,j,x);case 3:e:{if(ke(o,o.stateNode.containerInfo),s===null)throw Error(n(387));y=o.pendingProps;var R=o.memoizedState;j=R.element,ix(s,o),Zc(o,y,null,x);var Z=o.memoizedState;if(y=Z.cache,tl(o,Ra,y),y!==R.cache&&ex(o,[Ra],x,!0),Kc(),y=Z.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:Z.cache},o.updateQueue.baseState=R,o.memoizedState=R,o.flags&256){o=sp(s,o,y,x);break e}else if(y!==j){j=an(Error(n(424)),o),Vc(j),o=sp(s,o,y,x);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ra=jn(s.firstChild),ys=o,Nr=!0,$l=null,Wn=!0,x=z1(o,null,y,x),o.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Hc(),y===j){o=ji(s,o,x);break e}Ya(s,o,y,x)}o=o.child}return o;case 26:return Qd(s,o),s===null?(x=fy(o.type,null,o.pendingProps,null))?o.memoizedState=x:Nr||(x=o.type,s=o.pendingProps,y=xu(te.current).createElement(x),y[ga]=o,y[Pr]=s,qa(y,x,s),Be(y),o.stateNode=y):o.memoizedState=fy(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Oe(o),s===null&&Nr&&(y=o.stateNode=cy(o.type,o.pendingProps,te.current),ys=o,Wn=!0,j=ra,gl(o.type)?(ph=j,ra=jn(y.firstChild)):ra=j),Ya(s,o,o.pendingProps.children,x),Qd(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Nr&&((j=y=ra)&&(y=QN(y,o.type,o.pendingProps,Wn),y!==null?(o.stateNode=y,ys=o,ra=jn(y.firstChild),Wn=!1,j=!0):j=!1),j||Wl(o)),Oe(o),j=o.type,R=o.pendingProps,Z=s!==null?s.memoizedProps:null,y=R.children,xh(j,R)?y=null:Z!==null&&xh(j,Z)&&(o.flags|=32),o.memoizedState!==null&&(j=fx(s,o,gN,null,null,x),b0._currentValue=j),Qd(s,o),Ya(s,o,y,x),o.child;case 6:return s===null&&Nr&&((s=x=ra)&&(x=JN(x,o.pendingProps,Wn),x!==null?(o.stateNode=x,ys=o,ra=null,s=!0):s=!1),s||Wl(o)),null;case 13:return np(s,o,x);case 4:return ke(o,o.stateNode.containerInfo),y=o.pendingProps,s===null?o.child=Jo(o,null,y,x):Ya(s,o,y,x),o.child;case 11:return Z1(s,o,o.type,o.pendingProps,x);case 7:return Ya(s,o,o.pendingProps,x),o.child;case 8:return Ya(s,o,o.pendingProps.children,x),o.child;case 12:return Ya(s,o,o.pendingProps.children,x),o.child;case 10:return y=o.pendingProps,tl(o,o.type,y.value),Ya(s,o,y.children,x),o.child;case 9:return j=o.type._context,y=o.pendingProps.children,Zl(o),j=ss(j),y=y(j),o.flags|=1,Ya(s,o,y,x),o.child;case 14:return Q1(s,o,o.type,o.pendingProps,x);case 15:return J1(s,o,o.type,o.pendingProps,x);case 19:return lp(s,o,x);case 31:return y=o.pendingProps,x=o.mode,y={mode:y.mode,children:y.children},s===null?(x=Jd(y,x),x.ref=o.ref,o.child=x,x.return=o,o=x):(x=pi(s.child,y),x.ref=o.ref,o.child=x,x.return=o,o=x),o;case 22:return ep(s,o,x);case 24:return Zl(o),y=ss(Ra),s===null?(j=ax(),j===null&&(j=zr,R=tx(),j.pooledCache=R,R.refCount++,R!==null&&(j.pooledCacheLanes|=x),j=R),o.memoizedState={parent:y,cache:j},nx(o),tl(o,Ra,j)):((s.lanes&x)!==0&&(ix(s,o),Zc(o,null,null,x),Kc()),j=s.memoizedState,R=o.memoizedState,j.parent!==y?(j={parent:y,cache:y},o.memoizedState=j,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=j),tl(o,Ra,y)):(y=R.cache,tl(o,Ra,y),y!==j.cache&&ex(o,[Ra],x,!0))),Ya(s,o,o.pendingProps.children,x),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Ci(s){s.flags|=4}function cp(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!py(o)){if(o=on.current,o!==null&&((mr&4194048)===mr?Kn!==null:(mr&62914560)!==mr&&(mr&536870912)===0||o!==Kn))throw $c=sx,Xg;s.flags|=8192}}function eu(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Bn():536870912,s.lanes|=o,ac|=o)}function s0(s,o){if(!Nr)switch(s.tailMode){case"hidden":o=s.tail;for(var x=null;o!==null;)o.alternate!==null&&(x=o),o=o.sibling;x===null?s.tail=null:x.sibling=null;break;case"collapsed":x=s.tail;for(var y=null;x!==null;)x.alternate!==null&&(y=x),x=x.sibling;y===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Zr(s){var o=s.alternate!==null&&s.alternate.child===s.child,x=0,y=0;if(o)for(var j=s.child;j!==null;)x|=j.lanes|j.childLanes,y|=j.subtreeFlags&65011712,y|=j.flags&65011712,j.return=s,j=j.sibling;else for(j=s.child;j!==null;)x|=j.lanes|j.childLanes,y|=j.subtreeFlags,y|=j.flags,j.return=s,j=j.sibling;return s.subtreeFlags|=y,s.childLanes=x,o}function CN(s,o,x){var y=o.pendingProps;switch(Kf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(o),null;case 1:return Zr(o),null;case 3:return x=o.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),o.memoizedState.cache!==y&&(o.flags|=2048),wi(Ra),Ve(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(s===null||s.child===null)&&(Uc(o)?Ci(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ug())),Zr(o),null;case 26:return x=o.memoizedState,s===null?(Ci(o),x!==null?(Zr(o),cp(o,x)):(Zr(o),o.flags&=-16777217)):x?x!==s.memoizedState?(Ci(o),Zr(o),cp(o,x)):(Zr(o),o.flags&=-16777217):(s.memoizedProps!==y&&Ci(o),Zr(o),o.flags&=-16777217),null;case 27:et(o),x=te.current;var j=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==y&&Ci(o);else{if(!y){if(o.stateNode===null)throw Error(n(166));return Zr(o),null}s=se.current,Uc(o)?Pg(o):(s=cy(j,y,x),o.stateNode=s,Ci(o))}return Zr(o),null;case 5:if(et(o),x=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==y&&Ci(o);else{if(!y){if(o.stateNode===null)throw Error(n(166));return Zr(o),null}if(s=se.current,Uc(o))Pg(o);else{switch(j=xu(te.current),s){case 1:s=j.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:s=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":s=j.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":s=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof y.is=="string"?j.createElement("select",{is:y.is}):j.createElement("select"),y.multiple?s.multiple=!0:y.size&&(s.size=y.size);break;default:s=typeof y.is=="string"?j.createElement(x,{is:y.is}):j.createElement(x)}}s[ga]=o,s[Pr]=y;e:for(j=o.child;j!==null;){if(j.tag===5||j.tag===6)s.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===o)break e;for(;j.sibling===null;){if(j.return===null||j.return===o)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}o.stateNode=s;e:switch(qa(s,x,y),x){case"button":case"input":case"select":case"textarea":s=!!y.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ci(o)}}return Zr(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==y&&Ci(o);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(s=te.current,Uc(o)){if(s=o.stateNode,x=o.memoizedProps,y=null,j=ys,j!==null)switch(j.tag){case 27:case 5:y=j.memoizedProps}s[ga]=o,s=!!(s.nodeValue===x||y!==null&&y.suppressHydrationWarning===!0||ry(s.nodeValue,x)),s||Wl(o)}else s=xu(s).createTextNode(y),s[ga]=o,o.stateNode=s}return Zr(o),null;case 13:if(y=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(j=Uc(o),y!==null&&y.dehydrated!==null){if(s===null){if(!j)throw Error(n(318));if(j=o.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[ga]=o}else Hc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Zr(o),j=!1}else j=Ug(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=j),j=!0;if(!j)return o.flags&256?(ki(o),o):(ki(o),null)}if(ki(o),(o.flags&128)!==0)return o.lanes=x,o;if(x=y!==null,s=s!==null&&s.memoizedState!==null,x){y=o.child,j=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(j=y.alternate.memoizedState.cachePool.pool);var R=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==j&&(y.flags|=2048)}return x!==s&&x&&(o.child.flags|=8192),eu(o,o.updateQueue),Zr(o),null;case 4:return Ve(),s===null&&oh(o.stateNode.containerInfo),Zr(o),null;case 10:return wi(o.type),Zr(o),null;case 19:if(q(Ma),j=o.memoizedState,j===null)return Zr(o),null;if(y=(o.flags&128)!==0,R=j.rendering,R===null)if(y)s0(j,!1);else{if(aa!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(R=Wd(s),R!==null){for(o.flags|=128,s0(j,!1),s=R.updateQueue,o.updateQueue=s,eu(o,s),o.subtreeFlags=0,s=x,x=o.child;x!==null;)Bg(x,s),x=x.sibling;return K(Ma,Ma.current&1|2),o.child}s=s.sibling}j.tail!==null&&ve()>au&&(o.flags|=128,y=!0,s0(j,!1),o.lanes=4194304)}else{if(!y)if(s=Wd(R),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,eu(o,s),s0(j,!0),j.tail===null&&j.tailMode==="hidden"&&!R.alternate&&!Nr)return Zr(o),null}else 2*ve()-j.renderingStartTime>au&&x!==536870912&&(o.flags|=128,y=!0,s0(j,!1),o.lanes=4194304);j.isBackwards?(R.sibling=o.child,o.child=R):(s=j.last,s!==null?s.sibling=R:o.child=R,j.last=R)}return j.tail!==null?(o=j.tail,j.rendering=o,j.tail=o.sibling,j.renderingStartTime=ve(),o.sibling=null,s=Ma.current,K(Ma,y?s&1|2:s&1),o):(Zr(o),null);case 22:case 23:return ki(o),dx(),y=o.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(o.flags|=8192):y&&(o.flags|=8192),y?(x&536870912)!==0&&(o.flags&128)===0&&(Zr(o),o.subtreeFlags&6&&(o.flags|=8192)):Zr(o),x=o.updateQueue,x!==null&&eu(o,x.retryQueue),x=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),y=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),y!==x&&(o.flags|=2048),s!==null&&q(Ql),null;case 24:return x=null,s!==null&&(x=s.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),wi(Ra),Zr(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function EN(s,o){switch(Kf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return wi(Ra),Ve(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return et(o),null;case 13:if(ki(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Hc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return q(Ma),null;case 4:return Ve(),null;case 10:return wi(o.type),null;case 22:case 23:return ki(o),dx(),s!==null&&q(Ql),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return wi(Ra),null;case 25:return null;default:return null}}function dp(s,o){switch(Kf(o),o.tag){case 3:wi(Ra),Ve();break;case 26:case 27:case 5:et(o);break;case 4:Ve();break;case 13:ki(o);break;case 19:q(Ma);break;case 10:wi(o.type);break;case 22:case 23:ki(o),dx(),s!==null&&q(Ql);break;case 24:wi(Ra)}}function n0(s,o){try{var x=o.updateQueue,y=x!==null?x.lastEffect:null;if(y!==null){var j=y.next;x=j;do{if((x.tag&s)===s){y=void 0;var R=x.create,Z=x.inst;y=R(),Z.destroy=y}x=x.next}while(x!==j)}}catch(he){Br(o,o.return,he)}}function ol(s,o,x){try{var y=o.updateQueue,j=y!==null?y.lastEffect:null;if(j!==null){var R=j.next;y=R;do{if((y.tag&s)===s){var Z=y.inst,he=Z.destroy;if(he!==void 0){Z.destroy=void 0,j=o;var _e=x,Ye=he;try{Ye()}catch(it){Br(j,_e,it)}}}y=y.next}while(y!==R)}}catch(it){Br(o,o.return,it)}}function up(s){var o=s.updateQueue;if(o!==null){var x=s.stateNode;try{Qg(o,x)}catch(y){Br(s,s.return,y)}}}function fp(s,o,x){x.props=eo(s.type,s.memoizedProps),x.state=s.memoizedState;try{x.componentWillUnmount()}catch(y){Br(s,o,y)}}function i0(s,o){try{var x=s.ref;if(x!==null){switch(s.tag){case 26:case 27:case 5:var y=s.stateNode;break;case 30:y=s.stateNode;break;default:y=s.stateNode}typeof x=="function"?s.refCleanup=x(y):x.current=y}}catch(j){Br(s,o,j)}}function Zn(s,o){var x=s.ref,y=s.refCleanup;if(x!==null)if(typeof y=="function")try{y()}catch(j){Br(s,o,j)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(j){Br(s,o,j)}else x.current=null}function xp(s){var o=s.type,x=s.memoizedProps,y=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":x.autoFocus&&y.focus();break e;case"img":x.src?y.src=x.src:x.srcSet&&(y.srcset=x.srcSet)}}catch(j){Br(s,s.return,j)}}function Lx(s,o,x){try{var y=s.stateNode;qN(y,s.type,x,o),y[Pr]=o}catch(j){Br(s,s.return,j)}}function hp(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&gl(s.type)||s.tag===4}function Px(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||hp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&gl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zx(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(s,o):(o=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,o.appendChild(s),x=x._reactRootContainer,x!=null||o.onclick!==null||(o.onclick=fu));else if(y!==4&&(y===27&&gl(s.type)&&(x=s.stateNode,o=null),s=s.child,s!==null))for(zx(s,o,x),s=s.sibling;s!==null;)zx(s,o,x),s=s.sibling}function tu(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?x.insertBefore(s,o):x.appendChild(s);else if(y!==4&&(y===27&&gl(s.type)&&(x=s.stateNode),s=s.child,s!==null))for(tu(s,o,x),s=s.sibling;s!==null;)tu(s,o,x),s=s.sibling}function mp(s){var o=s.stateNode,x=s.memoizedProps;try{for(var y=s.type,j=o.attributes;j.length;)o.removeAttributeNode(j[0]);qa(o,y,x),o[ga]=s,o[Pr]=x}catch(R){Br(s,s.return,R)}}var Ei=!1,xa=!1,Ux=!1,gp=typeof WeakSet=="function"?WeakSet:Set,Pa=null;function SN(s,o){if(s=s.containerInfo,uh=bu,s=O(s),V(s)){if("selectionStart"in s)var x={start:s.selectionStart,end:s.selectionEnd};else e:{x=(x=s.ownerDocument)&&x.defaultView||window;var y=x.getSelection&&x.getSelection();if(y&&y.rangeCount!==0){x=y.anchorNode;var j=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{x.nodeType,R.nodeType}catch{x=null;break e}var Z=0,he=-1,_e=-1,Ye=0,it=0,dt=s,qe=null;t:for(;;){for(var Ze;dt!==x||j!==0&&dt.nodeType!==3||(he=Z+j),dt!==R||y!==0&&dt.nodeType!==3||(_e=Z+y),dt.nodeType===3&&(Z+=dt.nodeValue.length),(Ze=dt.firstChild)!==null;)qe=dt,dt=Ze;for(;;){if(dt===s)break t;if(qe===x&&++Ye===j&&(he=Z),qe===R&&++it===y&&(_e=Z),(Ze=dt.nextSibling)!==null)break;dt=qe,qe=dt.parentNode}dt=Ze}x=he===-1||_e===-1?null:{start:he,end:_e}}else x=null}x=x||{start:0,end:0}}else x=null;for(fh={focusedElem:s,selectionRange:x},bu=!1,Pa=o;Pa!==null;)if(o=Pa,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Pa=s;else for(;Pa!==null;){switch(o=Pa,R=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,x=o,j=R.memoizedProps,R=R.memoizedState,y=x.stateNode;try{var Ht=eo(x.type,j,x.elementType===x.type);s=y.getSnapshotBeforeUpdate(Ht,R),y.__reactInternalSnapshotBeforeUpdate=s}catch(Bt){Br(x,x.return,Bt)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,x=s.nodeType,x===9)mh(s);else if(x===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,Pa=s;break}Pa=o.return}}function pp(s,o,x){var y=x.flags;switch(x.tag){case 0:case 11:case 15:cl(s,x),y&4&&n0(5,x);break;case 1:if(cl(s,x),y&4)if(s=x.stateNode,o===null)try{s.componentDidMount()}catch(Z){Br(x,x.return,Z)}else{var j=eo(x.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(j,o,s.__reactInternalSnapshotBeforeUpdate)}catch(Z){Br(x,x.return,Z)}}y&64&&up(x),y&512&&i0(x,x.return);break;case 3:if(cl(s,x),y&64&&(s=x.updateQueue,s!==null)){if(o=null,x.child!==null)switch(x.child.tag){case 27:case 5:o=x.child.stateNode;break;case 1:o=x.child.stateNode}try{Qg(s,o)}catch(Z){Br(x,x.return,Z)}}break;case 27:o===null&&y&4&&mp(x);case 26:case 5:cl(s,x),o===null&&y&4&&xp(x),y&512&&i0(x,x.return);break;case 12:cl(s,x);break;case 13:cl(s,x),y&4&&vp(s,x),y&64&&(s=x.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(x=FN.bind(null,x),ek(s,x))));break;case 22:if(y=x.memoizedState!==null||Ei,!y){o=o!==null&&o.memoizedState!==null||xa,j=Ei;var R=xa;Ei=y,(xa=o)&&!R?dl(s,x,(x.subtreeFlags&8772)!==0):cl(s,x),Ei=j,xa=R}break;case 30:break;default:cl(s,x)}}function yp(s){var o=s.alternate;o!==null&&(s.alternate=null,yp(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&we(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var $r=null,_s=!1;function Si(s,o,x){for(x=x.child;x!==null;)bp(s,o,x),x=x.sibling}function bp(s,o,x){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(qt,x)}catch{}switch(x.tag){case 26:xa||Zn(x,o),Si(s,o,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:xa||Zn(x,o);var y=$r,j=_s;gl(x.type)&&($r=x.stateNode,_s=!1),Si(s,o,x),m0(x.stateNode),$r=y,_s=j;break;case 5:xa||Zn(x,o);case 6:if(y=$r,j=_s,$r=null,Si(s,o,x),$r=y,_s=j,$r!==null)if(_s)try{($r.nodeType===9?$r.body:$r.nodeName==="HTML"?$r.ownerDocument.body:$r).removeChild(x.stateNode)}catch(R){Br(x,o,R)}else try{$r.removeChild(x.stateNode)}catch(R){Br(x,o,R)}break;case 18:$r!==null&&(_s?(s=$r,ly(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,x.stateNode),k0(s)):ly($r,x.stateNode));break;case 4:y=$r,j=_s,$r=x.stateNode.containerInfo,_s=!0,Si(s,o,x),$r=y,_s=j;break;case 0:case 11:case 14:case 15:xa||ol(2,x,o),xa||ol(4,x,o),Si(s,o,x);break;case 1:xa||(Zn(x,o),y=x.stateNode,typeof y.componentWillUnmount=="function"&&fp(x,o,y)),Si(s,o,x);break;case 21:Si(s,o,x);break;case 22:xa=(y=xa)||x.memoizedState!==null,Si(s,o,x),xa=y;break;default:Si(s,o,x)}}function vp(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{k0(s)}catch(x){Br(o,o.return,x)}}function AN(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new gp),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new gp),o;default:throw Error(n(435,s.tag))}}function Hx(s,o){var x=AN(s);o.forEach(function(y){var j=BN.bind(null,s,y);x.has(y)||(x.add(y),y.then(j,j))})}function Ps(s,o){var x=o.deletions;if(x!==null)for(var y=0;y<x.length;y++){var j=x[y],R=s,Z=o,he=Z;e:for(;he!==null;){switch(he.tag){case 27:if(gl(he.type)){$r=he.stateNode,_s=!1;break e}break;case 5:$r=he.stateNode,_s=!1;break e;case 3:case 4:$r=he.stateNode.containerInfo,_s=!0;break e}he=he.return}if($r===null)throw Error(n(160));bp(R,Z,j),$r=null,_s=!1,R=j.alternate,R!==null&&(R.return=null),j.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)wp(o,s),o=o.sibling}var kn=null;function wp(s,o){var x=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ps(o,s),zs(s),y&4&&(ol(3,s,s.return),n0(3,s),ol(5,s,s.return));break;case 1:Ps(o,s),zs(s),y&512&&(xa||x===null||Zn(x,x.return)),y&64&&Ei&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(x=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=x===null?y:x.concat(y))));break;case 26:var j=kn;if(Ps(o,s),zs(s),y&512&&(xa||x===null||Zn(x,x.return)),y&4){var R=x!==null?x.memoizedState:null;if(y=s.memoizedState,x===null)if(y===null)if(s.stateNode===null){e:{y=s.type,x=s.memoizedProps,j=j.ownerDocument||j;t:switch(y){case"title":R=j.getElementsByTagName("title")[0],(!R||R[ge]||R[ga]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=j.createElement(y),j.head.insertBefore(R,j.querySelector("head > title"))),qa(R,y,x),R[ga]=s,Be(R),y=R;break e;case"link":var Z=my("link","href",j).get(y+(x.href||""));if(Z){for(var he=0;he<Z.length;he++)if(R=Z[he],R.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&R.getAttribute("rel")===(x.rel==null?null:x.rel)&&R.getAttribute("title")===(x.title==null?null:x.title)&&R.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){Z.splice(he,1);break t}}R=j.createElement(y),qa(R,y,x),j.head.appendChild(R);break;case"meta":if(Z=my("meta","content",j).get(y+(x.content||""))){for(he=0;he<Z.length;he++)if(R=Z[he],R.getAttribute("content")===(x.content==null?null:""+x.content)&&R.getAttribute("name")===(x.name==null?null:x.name)&&R.getAttribute("property")===(x.property==null?null:x.property)&&R.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&R.getAttribute("charset")===(x.charSet==null?null:x.charSet)){Z.splice(he,1);break t}}R=j.createElement(y),qa(R,y,x),j.head.appendChild(R);break;default:throw Error(n(468,y))}R[ga]=s,Be(R),y=R}s.stateNode=y}else gy(j,s.type,s.stateNode);else s.stateNode=hy(j,y,s.memoizedProps);else R!==y?(R===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):R.count--,y===null?gy(j,s.type,s.stateNode):hy(j,y,s.memoizedProps)):y===null&&s.stateNode!==null&&Lx(s,s.memoizedProps,x.memoizedProps)}break;case 27:Ps(o,s),zs(s),y&512&&(xa||x===null||Zn(x,x.return)),x!==null&&y&4&&Lx(s,s.memoizedProps,x.memoizedProps);break;case 5:if(Ps(o,s),zs(s),y&512&&(xa||x===null||Zn(x,x.return)),s.flags&32){j=s.stateNode;try{_a(j,"")}catch(Ze){Br(s,s.return,Ze)}}y&4&&s.stateNode!=null&&(j=s.memoizedProps,Lx(s,j,x!==null?x.memoizedProps:j)),y&1024&&(Ux=!0);break;case 6:if(Ps(o,s),zs(s),y&4){if(s.stateNode===null)throw Error(n(162));y=s.memoizedProps,x=s.stateNode;try{x.nodeValue=y}catch(Ze){Br(s,s.return,Ze)}}break;case 3:if(gu=null,j=kn,kn=hu(o.containerInfo),Ps(o,s),kn=j,zs(s),y&4&&x!==null&&x.memoizedState.isDehydrated)try{k0(o.containerInfo)}catch(Ze){Br(s,s.return,Ze)}Ux&&(Ux=!1,Np(s));break;case 4:y=kn,kn=hu(s.stateNode.containerInfo),Ps(o,s),zs(s),kn=y;break;case 12:Ps(o,s),zs(s);break;case 13:Ps(o,s),zs(s),s.child.flags&8192&&s.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&($x=ve()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Hx(s,y)));break;case 22:j=s.memoizedState!==null;var _e=x!==null&&x.memoizedState!==null,Ye=Ei,it=xa;if(Ei=Ye||j,xa=it||_e,Ps(o,s),xa=it,Ei=Ye,zs(s),y&8192)e:for(o=s.stateNode,o._visibility=j?o._visibility&-2:o._visibility|1,j&&(x===null||_e||Ei||xa||to(s)),x=null,o=s;;){if(o.tag===5||o.tag===26){if(x===null){_e=x=o;try{if(R=_e.stateNode,j)Z=R.style,typeof Z.setProperty=="function"?Z.setProperty("display","none","important"):Z.display="none";else{he=_e.stateNode;var dt=_e.memoizedProps.style,qe=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;he.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(Ze){Br(_e,_e.return,Ze)}}}else if(o.tag===6){if(x===null){_e=o;try{_e.stateNode.nodeValue=j?"":_e.memoizedProps}catch(Ze){Br(_e,_e.return,Ze)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;x===o&&(x=null),o=o.return}x===o&&(x=null),o.sibling.return=o.return,o=o.sibling}y&4&&(y=s.updateQueue,y!==null&&(x=y.retryQueue,x!==null&&(y.retryQueue=null,Hx(s,x))));break;case 19:Ps(o,s),zs(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Hx(s,y)));break;case 30:break;case 21:break;default:Ps(o,s),zs(s)}}function zs(s){var o=s.flags;if(o&2){try{for(var x,y=s.return;y!==null;){if(hp(y)){x=y;break}y=y.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var j=x.stateNode,R=Px(s);tu(s,R,j);break;case 5:var Z=x.stateNode;x.flags&32&&(_a(Z,""),x.flags&=-33);var he=Px(s);tu(s,he,Z);break;case 3:case 4:var _e=x.stateNode.containerInfo,Ye=Px(s);zx(s,Ye,_e);break;default:throw Error(n(161))}}catch(it){Br(s,s.return,it)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function Np(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;Np(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function cl(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)pp(s,o.alternate,o),o=o.sibling}function to(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:ol(4,o,o.return),to(o);break;case 1:Zn(o,o.return);var x=o.stateNode;typeof x.componentWillUnmount=="function"&&fp(o,o.return,x),to(o);break;case 27:m0(o.stateNode);case 26:case 5:Zn(o,o.return),to(o);break;case 22:o.memoizedState===null&&to(o);break;case 30:to(o);break;default:to(o)}s=s.sibling}}function dl(s,o,x){for(x=x&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var y=o.alternate,j=s,R=o,Z=R.flags;switch(R.tag){case 0:case 11:case 15:dl(j,R,x),n0(4,R);break;case 1:if(dl(j,R,x),y=R,j=y.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Ye){Br(y,y.return,Ye)}if(y=R,j=y.updateQueue,j!==null){var he=y.stateNode;try{var _e=j.shared.hiddenCallbacks;if(_e!==null)for(j.shared.hiddenCallbacks=null,j=0;j<_e.length;j++)Zg(_e[j],he)}catch(Ye){Br(y,y.return,Ye)}}x&&Z&64&&up(R),i0(R,R.return);break;case 27:mp(R);case 26:case 5:dl(j,R,x),x&&y===null&&Z&4&&xp(R),i0(R,R.return);break;case 12:dl(j,R,x);break;case 13:dl(j,R,x),x&&Z&4&&vp(j,R);break;case 22:R.memoizedState===null&&dl(j,R,x),i0(R,R.return);break;case 30:break;default:dl(j,R,x)}o=o.sibling}}function Vx(s,o){var x=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==x&&(s!=null&&s.refCount++,x!=null&&Yc(x))}function Gx(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Yc(s))}function Qn(s,o,x,y){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)kp(s,o,x,y),o=o.sibling}function kp(s,o,x,y){var j=o.flags;switch(o.tag){case 0:case 11:case 15:Qn(s,o,x,y),j&2048&&n0(9,o);break;case 1:Qn(s,o,x,y);break;case 3:Qn(s,o,x,y),j&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Yc(s)));break;case 12:if(j&2048){Qn(s,o,x,y),s=o.stateNode;try{var R=o.memoizedProps,Z=R.id,he=R.onPostCommit;typeof he=="function"&&he(Z,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(_e){Br(o,o.return,_e)}}else Qn(s,o,x,y);break;case 13:Qn(s,o,x,y);break;case 23:break;case 22:R=o.stateNode,Z=o.alternate,o.memoizedState!==null?R._visibility&2?Qn(s,o,x,y):l0(s,o):R._visibility&2?Qn(s,o,x,y):(R._visibility|=2,ec(s,o,x,y,(o.subtreeFlags&10256)!==0)),j&2048&&Vx(Z,o);break;case 24:Qn(s,o,x,y),j&2048&&Gx(o.alternate,o);break;default:Qn(s,o,x,y)}}function ec(s,o,x,y,j){for(j=j&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var R=s,Z=o,he=x,_e=y,Ye=Z.flags;switch(Z.tag){case 0:case 11:case 15:ec(R,Z,he,_e,j),n0(8,Z);break;case 23:break;case 22:var it=Z.stateNode;Z.memoizedState!==null?it._visibility&2?ec(R,Z,he,_e,j):l0(R,Z):(it._visibility|=2,ec(R,Z,he,_e,j)),j&&Ye&2048&&Vx(Z.alternate,Z);break;case 24:ec(R,Z,he,_e,j),j&&Ye&2048&&Gx(Z.alternate,Z);break;default:ec(R,Z,he,_e,j)}o=o.sibling}}function l0(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var x=s,y=o,j=y.flags;switch(y.tag){case 22:l0(x,y),j&2048&&Vx(y.alternate,y);break;case 24:l0(x,y),j&2048&&Gx(y.alternate,y);break;default:l0(x,y)}o=o.sibling}}var o0=8192;function tc(s){if(s.subtreeFlags&o0)for(s=s.child;s!==null;)jp(s),s=s.sibling}function jp(s){switch(s.tag){case 26:tc(s),s.flags&o0&&s.memoizedState!==null&&xk(kn,s.memoizedState,s.memoizedProps);break;case 5:tc(s);break;case 3:case 4:var o=kn;kn=hu(s.stateNode.containerInfo),tc(s),kn=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=o0,o0=16777216,tc(s),o0=o):tc(s));break;default:tc(s)}}function Cp(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function c0(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Pa=y,Sp(y,s)}Cp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ep(s),s=s.sibling}function Ep(s){switch(s.tag){case 0:case 11:case 15:c0(s),s.flags&2048&&ol(9,s,s.return);break;case 3:c0(s);break;case 12:c0(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,ru(s)):c0(s);break;default:c0(s)}}function ru(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Pa=y,Sp(y,s)}Cp(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:ol(8,o,o.return),ru(o);break;case 22:x=o.stateNode,x._visibility&2&&(x._visibility&=-3,ru(o));break;default:ru(o)}s=s.sibling}}function Sp(s,o){for(;Pa!==null;){var x=Pa;switch(x.tag){case 0:case 11:case 15:ol(8,x,o);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var y=x.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Yc(x.memoizedState.cache)}if(y=x.child,y!==null)y.return=x,Pa=y;else e:for(x=s;Pa!==null;){y=Pa;var j=y.sibling,R=y.return;if(yp(y),y===x){Pa=null;break e}if(j!==null){j.return=R,Pa=j;break e}Pa=R}}}var _N={getCacheForType:function(s){var o=ss(Ra),x=o.data.get(s);return x===void 0&&(x=s(),o.data.set(s,x)),x}},TN=typeof WeakMap=="function"?WeakMap:Map,Ar=0,zr=null,or=null,mr=0,_r=0,Us=null,ul=!1,rc=!1,Yx=!1,Ai=0,aa=0,fl=0,ro=0,Xx=0,cn=0,ac=0,d0=null,Ts=null,qx=!1,$x=0,au=1/0,su=null,xl=null,Xa=0,hl=null,sc=null,nc=0,Wx=0,Kx=null,Ap=null,u0=0,Zx=null;function Hs(){if((Ar&2)!==0&&mr!==0)return mr&-mr;if(X.T!==null){var s=Xo;return s!==0?s:sh()}return yn()}function _p(){cn===0&&(cn=(mr&536870912)===0||Nr?Os():536870912);var s=on.current;return s!==null&&(s.flags|=32),cn}function Vs(s,o,x){(s===zr&&(_r===2||_r===9)||s.cancelPendingCommit!==null)&&(ic(s,0),ml(s,mr,cn,!1)),Jr(s,x),((Ar&2)===0||s!==zr)&&(s===zr&&((Ar&2)===0&&(ro|=x),aa===4&&ml(s,mr,cn,!1)),Jn(s))}function Tp(s,o,x){if((Ar&6)!==0)throw Error(n(327));var y=!x&&(o&124)===0&&(o&s.expiredLanes)===0||nt(s,o),j=y?MN(s,o):eh(s,o,!0),R=y;do{if(j===0){rc&&!y&&ml(s,o,0,!1);break}else{if(x=s.current.alternate,R&&!DN(x)){j=eh(s,o,!1),R=!1;continue}if(j===2){if(R=o,s.errorRecoveryDisabledLanes&R)var Z=0;else Z=s.pendingLanes&-536870913,Z=Z!==0?Z:Z&536870912?536870912:0;if(Z!==0){o=Z;e:{var he=s;j=d0;var _e=he.current.memoizedState.isDehydrated;if(_e&&(ic(he,Z).flags|=256),Z=eh(he,Z,!1),Z!==2){if(Yx&&!_e){he.errorRecoveryDisabledLanes|=R,ro|=R,j=4;break e}R=Ts,Ts=j,R!==null&&(Ts===null?Ts=R:Ts.push.apply(Ts,R))}j=Z}if(R=!1,j!==2)continue}}if(j===1){ic(s,0),ml(s,o,0,!0);break}e:{switch(y=s,R=j,R){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ml(y,o,cn,!ul);break e;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(j=$x+300-ve(),10<j)){if(ml(y,o,cn,!ul),vt(y,0,!0)!==0)break e;y.timeoutHandle=ny(Dp.bind(null,y,x,Ts,su,qx,o,cn,ro,ac,ul,R,2,-0,0),j);break e}Dp(y,x,Ts,su,qx,o,cn,ro,ac,ul,R,0,-0,0)}}break}while(!0);Jn(s)}function Dp(s,o,x,y,j,R,Z,he,_e,Ye,it,dt,qe,Ze){if(s.timeoutHandle=-1,dt=o.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&(y0={stylesheets:null,count:0,unsuspend:fk},jp(o),dt=hk(),dt!==null)){s.cancelPendingCommit=dt(Lp.bind(null,s,o,R,x,y,j,Z,he,_e,it,1,qe,Ze)),ml(s,R,Z,!Ye);return}Lp(s,o,R,x,y,j,Z,he,_e)}function DN(s){for(var o=s;;){var x=o.tag;if((x===0||x===11||x===15)&&o.flags&16384&&(x=o.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var y=0;y<x.length;y++){var j=x[y],R=j.getSnapshot;j=j.value;try{if(!m(R(),j))return!1}catch{return!1}}if(x=o.child,o.subtreeFlags&16384&&x!==null)x.return=o,o=x;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ml(s,o,x,y){o&=~Xx,o&=~ro,s.suspendedLanes|=o,s.pingedLanes&=~o,y&&(s.warmLanes|=o),y=s.expirationTimes;for(var j=o;0<j;){var R=31-Yt(j),Z=1<<R;y[R]=-1,j&=~Z}x!==0&&Ol(s,x,o)}function nu(){return(Ar&6)===0?(f0(0),!1):!0}function Qx(){if(or!==null){if(_r===0)var s=or.return;else s=or,vi=Kl=null,mx(s),Qo=null,r0=0,s=or;for(;s!==null;)dp(s.alternate,s),s=s.return;or=null}}function ic(s,o){var x=s.timeoutHandle;x!==-1&&(s.timeoutHandle=-1,WN(x)),x=s.cancelPendingCommit,x!==null&&(s.cancelPendingCommit=null,x()),Qx(),zr=s,or=x=pi(s.current,null),mr=o,_r=0,Us=null,ul=!1,rc=nt(s,o),Yx=!1,ac=cn=Xx=ro=fl=aa=0,Ts=d0=null,qx=!1,(o&8)!==0&&(o|=o&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=o;0<y;){var j=31-Yt(y),R=1<<j;o|=s[j],y&=~R}return Ai=o,Sd(),x}function Rp(s,o){ir=null,X.H=Xd,o===qc||o===Fd?(o=Wg(),_r=3):o===Xg?(o=Wg(),_r=4):_r=o===K1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Us=o,or===null&&(aa=1,Zd(s,an(o,s.current)))}function Mp(){var s=X.H;return X.H=Xd,s===null?Xd:s}function Ip(){var s=X.A;return X.A=_N,s}function Jx(){aa=4,ul||(mr&4194048)!==mr&&on.current!==null||(rc=!0),(fl&134217727)===0&&(ro&134217727)===0||zr===null||ml(zr,mr,cn,!1)}function eh(s,o,x){var y=Ar;Ar|=2;var j=Mp(),R=Ip();(zr!==s||mr!==o)&&(su=null,ic(s,o)),o=!1;var Z=aa;e:do try{if(_r!==0&&or!==null){var he=or,_e=Us;switch(_r){case 8:Qx(),Z=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(o=!0);var Ye=_r;if(_r=0,Us=null,lc(s,he,_e,Ye),x&&rc){Z=0;break e}break;default:Ye=_r,_r=0,Us=null,lc(s,he,_e,Ye)}}RN(),Z=aa;break}catch(it){Rp(s,it)}while(!0);return o&&s.shellSuspendCounter++,vi=Kl=null,Ar=y,X.H=j,X.A=R,or===null&&(zr=null,mr=0,Sd()),Z}function RN(){for(;or!==null;)Op(or)}function MN(s,o){var x=Ar;Ar|=2;var y=Mp(),j=Ip();zr!==s||mr!==o?(su=null,au=ve()+500,ic(s,o)):rc=nt(s,o);e:do try{if(_r!==0&&or!==null){o=or;var R=Us;t:switch(_r){case 1:_r=0,Us=null,lc(s,o,R,1);break;case 2:case 9:if(qg(R)){_r=0,Us=null,Fp(o);break}o=function(){_r!==2&&_r!==9||zr!==s||(_r=7),Jn(s)},R.then(o,o);break e;case 3:_r=7;break e;case 4:_r=5;break e;case 7:qg(R)?(_r=0,Us=null,Fp(o)):(_r=0,Us=null,lc(s,o,R,7));break;case 5:var Z=null;switch(or.tag){case 26:Z=or.memoizedState;case 5:case 27:var he=or;if(!Z||py(Z)){_r=0,Us=null;var _e=he.sibling;if(_e!==null)or=_e;else{var Ye=he.return;Ye!==null?(or=Ye,iu(Ye)):or=null}break t}}_r=0,Us=null,lc(s,o,R,5);break;case 6:_r=0,Us=null,lc(s,o,R,6);break;case 8:Qx(),aa=6;break e;default:throw Error(n(462))}}IN();break}catch(it){Rp(s,it)}while(!0);return vi=Kl=null,X.H=y,X.A=j,Ar=x,or!==null?0:(zr=null,mr=0,Sd(),aa)}function IN(){for(;or!==null&&!Ce();)Op(or)}function Op(s){var o=op(s.alternate,s,Ai);s.memoizedProps=s.pendingProps,o===null?iu(s):or=o}function Fp(s){var o=s,x=o.alternate;switch(o.tag){case 15:case 0:o=rp(x,o,o.pendingProps,o.type,void 0,mr);break;case 11:o=rp(x,o,o.pendingProps,o.type.render,o.ref,mr);break;case 5:mx(o);default:dp(x,o),o=or=Bg(o,Ai),o=op(x,o,Ai)}s.memoizedProps=s.pendingProps,o===null?iu(s):or=o}function lc(s,o,x,y){vi=Kl=null,mx(o),Qo=null,r0=0;var j=o.return;try{if(kN(s,j,o,x,mr)){aa=1,Zd(s,an(x,s.current)),or=null;return}}catch(R){if(j!==null)throw or=j,R;aa=1,Zd(s,an(x,s.current)),or=null;return}o.flags&32768?(Nr||y===1?s=!0:rc||(mr&536870912)!==0?s=!1:(ul=s=!0,(y===2||y===9||y===3||y===6)&&(y=on.current,y!==null&&y.tag===13&&(y.flags|=16384))),Bp(o,s)):iu(o)}function iu(s){var o=s;do{if((o.flags&32768)!==0){Bp(o,ul);return}s=o.return;var x=CN(o.alternate,o,Ai);if(x!==null){or=x;return}if(o=o.sibling,o!==null){or=o;return}or=o=s}while(o!==null);aa===0&&(aa=5)}function Bp(s,o){do{var x=EN(s.alternate,s);if(x!==null){x.flags&=32767,or=x;return}if(x=s.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!o&&(s=s.sibling,s!==null)){or=s;return}or=s=x}while(s!==null);aa=6,or=null}function Lp(s,o,x,y,j,R,Z,he,_e){s.cancelPendingCommit=null;do lu();while(Xa!==0);if((Ar&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(R=o.lanes|o.childLanes,R|=Gf,en(s,x,R,Z,he,_e),s===zr&&(or=zr=null,mr=0),sc=o,hl=s,nc=x,Wx=R,Kx=j,Ap=y,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,LN(Ee,function(){return Vp(),null})):(s.callbackNode=null,s.callbackPriority=0),y=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||y){y=X.T,X.T=null,j=de.p,de.p=2,Z=Ar,Ar|=4;try{SN(s,o,x)}finally{Ar=Z,de.p=j,X.T=y}}Xa=1,Pp(),zp(),Up()}}function Pp(){if(Xa===1){Xa=0;var s=hl,o=sc,x=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||x){x=X.T,X.T=null;var y=de.p;de.p=2;var j=Ar;Ar|=4;try{wp(o,s);var R=fh,Z=O(s.containerInfo),he=R.focusedElem,_e=R.selectionRange;if(Z!==he&&he&&he.ownerDocument&&_(he.ownerDocument.documentElement,he)){if(_e!==null&&V(he)){var Ye=_e.start,it=_e.end;if(it===void 0&&(it=Ye),"selectionStart"in he)he.selectionStart=Ye,he.selectionEnd=Math.min(it,he.value.length);else{var dt=he.ownerDocument||document,qe=dt&&dt.defaultView||window;if(qe.getSelection){var Ze=qe.getSelection(),Ht=he.textContent.length,Bt=Math.min(_e.start,Ht),Ir=_e.end===void 0?Bt:Math.min(_e.end,Ht);!Ze.extend&&Bt>Ir&&(Z=Ir,Ir=Bt,Bt=Z);var Pe=N(he,Bt),Ie=N(he,Ir);if(Pe&&Ie&&(Ze.rangeCount!==1||Ze.anchorNode!==Pe.node||Ze.anchorOffset!==Pe.offset||Ze.focusNode!==Ie.node||Ze.focusOffset!==Ie.offset)){var He=dt.createRange();He.setStart(Pe.node,Pe.offset),Ze.removeAllRanges(),Bt>Ir?(Ze.addRange(He),Ze.extend(Ie.node,Ie.offset)):(He.setEnd(Ie.node,Ie.offset),Ze.addRange(He))}}}}for(dt=[],Ze=he;Ze=Ze.parentNode;)Ze.nodeType===1&&dt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<dt.length;he++){var ot=dt[he];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}bu=!!uh,fh=uh=null}finally{Ar=j,de.p=y,X.T=x}}s.current=o,Xa=2}}function zp(){if(Xa===2){Xa=0;var s=hl,o=sc,x=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||x){x=X.T,X.T=null;var y=de.p;de.p=2;var j=Ar;Ar|=4;try{pp(s,o.alternate,o)}finally{Ar=j,de.p=y,X.T=x}}Xa=3}}function Up(){if(Xa===4||Xa===3){Xa=0,Je();var s=hl,o=sc,x=nc,y=Ap;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Xa=5:(Xa=0,sc=hl=null,Hp(s,s.pendingLanes));var j=s.pendingLanes;if(j===0&&(xl=null),ea(x),o=o.stateNode,ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(qt,o,void 0,(o.current.flags&128)===128)}catch{}if(y!==null){o=X.T,j=de.p,de.p=2,X.T=null;try{for(var R=s.onRecoverableError,Z=0;Z<y.length;Z++){var he=y[Z];R(he.value,{componentStack:he.stack})}}finally{X.T=o,de.p=j}}(nc&3)!==0&&lu(),Jn(s),j=s.pendingLanes,(x&4194090)!==0&&(j&42)!==0?s===Zx?u0++:(u0=0,Zx=s):u0=0,f0(0)}}function Hp(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Yc(o)))}function lu(s){return Pp(),zp(),Up(),Vp()}function Vp(){if(Xa!==5)return!1;var s=hl,o=Wx;Wx=0;var x=ea(nc),y=X.T,j=de.p;try{de.p=32>x?32:x,X.T=null,x=Kx,Kx=null;var R=hl,Z=nc;if(Xa=0,sc=hl=null,nc=0,(Ar&6)!==0)throw Error(n(331));var he=Ar;if(Ar|=4,Ep(R.current),kp(R,R.current,Z,x),Ar=he,f0(0,!1),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(qt,R)}catch{}return!0}finally{de.p=j,X.T=y,Hp(s,o)}}function Gp(s,o,x){o=an(x,o),o=_x(s.stateNode,o,2),s=sl(s,o,2),s!==null&&(Jr(s,2),Jn(s))}function Br(s,o,x){if(s.tag===3)Gp(s,s,x);else for(;o!==null;){if(o.tag===3){Gp(o,s,x);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(xl===null||!xl.has(y))){s=an(x,s),x=$1(2),y=sl(o,x,2),y!==null&&(W1(x,y,o,s),Jr(y,2),Jn(y));break}}o=o.return}}function th(s,o,x){var y=s.pingCache;if(y===null){y=s.pingCache=new TN;var j=new Set;y.set(o,j)}else j=y.get(o),j===void 0&&(j=new Set,y.set(o,j));j.has(x)||(Yx=!0,j.add(x),s=ON.bind(null,s,o,x),o.then(s,s))}function ON(s,o,x){var y=s.pingCache;y!==null&&y.delete(o),s.pingedLanes|=s.suspendedLanes&x,s.warmLanes&=~x,zr===s&&(mr&x)===x&&(aa===4||aa===3&&(mr&62914560)===mr&&300>ve()-$x?(Ar&2)===0&&ic(s,0):Xx|=x,ac===mr&&(ac=0)),Jn(s)}function Yp(s,o){o===0&&(o=Bn()),s=Ho(s,o),s!==null&&(Jr(s,o),Jn(s))}function FN(s){var o=s.memoizedState,x=0;o!==null&&(x=o.retryLane),Yp(s,x)}function BN(s,o){var x=0;switch(s.tag){case 13:var y=s.stateNode,j=s.memoizedState;j!==null&&(x=j.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(o),Yp(s,x)}function LN(s,o){return Ae(s,o)}var ou=null,oc=null,rh=!1,cu=!1,ah=!1,ao=0;function Jn(s){s!==oc&&s.next===null&&(oc===null?ou=oc=s:oc=oc.next=s),cu=!0,rh||(rh=!0,zN())}function f0(s,o){if(!ah&&cu){ah=!0;do for(var x=!1,y=ou;y!==null;){if(s!==0){var j=y.pendingLanes;if(j===0)var R=0;else{var Z=y.suspendedLanes,he=y.pingedLanes;R=(1<<31-Yt(42|s)+1)-1,R&=j&~(Z&~he),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(x=!0,Wp(y,R))}else R=mr,R=vt(y,y===zr?R:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(R&3)===0||nt(y,R)||(x=!0,Wp(y,R));y=y.next}while(x);ah=!1}}function PN(){Xp()}function Xp(){cu=rh=!1;var s=0;ao!==0&&($N()&&(s=ao),ao=0);for(var o=ve(),x=null,y=ou;y!==null;){var j=y.next,R=qp(y,o);R===0?(y.next=null,x===null?ou=j:x.next=j,j===null&&(oc=x)):(x=y,(s!==0||(R&3)!==0)&&(cu=!0)),y=j}f0(s)}function qp(s,o){for(var x=s.suspendedLanes,y=s.pingedLanes,j=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var Z=31-Yt(R),he=1<<Z,_e=j[Z];_e===-1?((he&x)===0||(he&y)!==0)&&(j[Z]=kt(he,o)):_e<=o&&(s.expiredLanes|=he),R&=~he}if(o=zr,x=mr,x=vt(s,s===o?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y=s.callbackNode,x===0||s===o&&(_r===2||_r===9)||s.cancelPendingCommit!==null)return y!==null&&y!==null&&Fe(y),s.callbackNode=null,s.callbackPriority=0;if((x&3)===0||nt(s,x)){if(o=x&-x,o===s.callbackPriority)return o;switch(y!==null&&Fe(y),ea(x)){case 2:case 8:x=st;break;case 32:x=Ee;break;case 268435456:x=ut;break;default:x=Ee}return y=$p.bind(null,s),x=Ae(x,y),s.callbackPriority=o,s.callbackNode=x,o}return y!==null&&y!==null&&Fe(y),s.callbackPriority=2,s.callbackNode=null,2}function $p(s,o){if(Xa!==0&&Xa!==5)return s.callbackNode=null,s.callbackPriority=0,null;var x=s.callbackNode;if(lu()&&s.callbackNode!==x)return null;var y=mr;return y=vt(s,s===zr?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y===0?null:(Tp(s,y,o),qp(s,ve()),s.callbackNode!=null&&s.callbackNode===x?$p.bind(null,s):null)}function Wp(s,o){if(lu())return null;Tp(s,o,!0)}function zN(){KN(function(){(Ar&6)!==0?Ae(fe,PN):Xp()})}function sh(){return ao===0&&(ao=Os()),ao}function Kp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Mo(""+s)}function Zp(s,o){var x=o.ownerDocument.createElement("input");return x.name=o.name,x.value=o.value,s.id&&x.setAttribute("form",s.id),o.parentNode.insertBefore(x,o),s=new FormData(s),x.parentNode.removeChild(x),s}function UN(s,o,x,y,j){if(o==="submit"&&x&&x.stateNode===j){var R=Kp((j[Pr]||null).action),Z=y.submitter;Z&&(o=(o=Z[Pr]||null)?Kp(o.formAction):Z.getAttribute("formAction"),o!==null&&(R=o,Z=null));var he=new Yn("action","action",null,y,j);s.push({event:he,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(ao!==0){var _e=Z?Zp(j,Z):new FormData(j);jx(x,{pending:!0,data:_e,method:j.method,action:R},null,_e)}}else typeof R=="function"&&(he.preventDefault(),_e=Z?Zp(j,Z):new FormData(j),jx(x,{pending:!0,data:_e,method:j.method,action:R},R,_e))},currentTarget:j}]})}}for(var nh=0;nh<$n.length;nh++){var ih=$n[nh],HN=ih.toLowerCase(),VN=ih[0].toUpperCase()+ih.slice(1);Bs(HN,"on"+VN)}Bs($t,"onAnimationEnd"),Bs(Ga,"onAnimationIteration"),Bs(Ss,"onAnimationStart"),Bs("dblclick","onDoubleClick"),Bs("focusin","onFocus"),Bs("focusout","onBlur"),Bs(rs,"onTransitionRun"),Bs(Sr,"onTransitionStart"),Bs(Da,"onTransitionCancel"),Bs(as,"onTransitionEnd"),xt("onMouseEnter",["mouseout","mouseover"]),xt("onMouseLeave",["mouseout","mouseover"]),xt("onPointerEnter",["pointerout","pointerover"]),xt("onPointerLeave",["pointerout","pointerover"]),ct("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ct("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ct("onBeforeInput",["compositionend","keypress","textInput","paste"]),ct("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ct("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ct("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var x0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(x0));function Qp(s,o){o=(o&4)!==0;for(var x=0;x<s.length;x++){var y=s[x],j=y.event;y=y.listeners;e:{var R=void 0;if(o)for(var Z=y.length-1;0<=Z;Z--){var he=y[Z],_e=he.instance,Ye=he.currentTarget;if(he=he.listener,_e!==R&&j.isPropagationStopped())break e;R=he,j.currentTarget=Ye;try{R(j)}catch(it){Kd(it)}j.currentTarget=null,R=_e}else for(Z=0;Z<y.length;Z++){if(he=y[Z],_e=he.instance,Ye=he.currentTarget,he=he.listener,_e!==R&&j.isPropagationStopped())break e;R=he,j.currentTarget=Ye;try{R(j)}catch(it){Kd(it)}j.currentTarget=null,R=_e}}}}function cr(s,o){var x=o[pa];x===void 0&&(x=o[pa]=new Set);var y=s+"__bubble";x.has(y)||(Jp(o,s,2,!1),x.add(y))}function lh(s,o,x){var y=0;o&&(y|=4),Jp(x,s,y,o)}var du="_reactListening"+Math.random().toString(36).slice(2);function oh(s){if(!s[du]){s[du]=!0,Xe.forEach(function(x){x!=="selectionchange"&&(GN.has(x)||lh(x,!1,s),lh(x,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[du]||(o[du]=!0,lh("selectionchange",!1,o))}}function Jp(s,o,x,y){switch(ky(o)){case 2:var j=pk;break;case 8:j=yk;break;default:j=Nh}x=j.bind(null,o,x,s),j=void 0,!Wt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(j=!0),y?j!==void 0?s.addEventListener(o,x,{capture:!0,passive:j}):s.addEventListener(o,x,!0):j!==void 0?s.addEventListener(o,x,{passive:j}):s.addEventListener(o,x,!1)}function ch(s,o,x,y,j){var R=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var Z=y.tag;if(Z===3||Z===4){var he=y.stateNode.containerInfo;if(he===j)break;if(Z===4)for(Z=y.return;Z!==null;){var _e=Z.tag;if((_e===3||_e===4)&&Z.stateNode.containerInfo===j)return;Z=Z.return}for(;he!==null;){if(Z=Ne(he),Z===null)return;if(_e=Z.tag,_e===5||_e===6||_e===26||_e===27){y=R=Z;continue e}he=he.parentNode}}y=y.return}vn(function(){var Ye=R,it=Gi(x),dt=[];e:{var qe=gi.get(s);if(qe!==void 0){var Ze=Yn,Ht=s;switch(s){case"keypress":if(Io(x)===0)break e;case"keydown":case"keyup":Ze=Oc;break;case"focusin":Ht="focus",Ze=$i;break;case"focusout":Ht="blur",Ze=$i;break;case"beforeblur":case"afterblur":Ze=$i;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=Er;break;case $t:case Ga:case Ss:Ze=Ff;break;case as:Ze=zf;break;case"scroll":case"scrollend":Ze=es;break;case"wheel":Ze=hi;break;case"copy":case"cut":case"paste":Ze=ar;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Ul;break;case"toggle":case"beforetoggle":Ze=Uf}var Bt=(o&4)!==0,Ir=!Bt&&(s==="scroll"||s==="scrollend"),Pe=Bt?qe!==null?qe+"Capture":null:qe;Bt=[];for(var Ie=Ye,He;Ie!==null;){var ot=Ie;if(He=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||He===null||Pe===null||(ot=Ot(Ie,Pe),ot!=null&&Bt.push(h0(Ie,ot,He))),Ir)break;Ie=Ie.return}0<Bt.length&&(qe=new Ze(qe,Ht,null,x,it),dt.push({event:qe,listeners:Bt}))}}if((o&7)===0){e:{if(qe=s==="mouseover"||s==="pointerover",Ze=s==="mouseout"||s==="pointerout",qe&&x!==Fl&&(Ht=x.relatedTarget||x.fromElement)&&(Ne(Ht)||Ht[tn]))break e;if((Ze||qe)&&(qe=it.window===it?it:(qe=it.ownerDocument)?qe.defaultView||qe.parentWindow:window,Ze?(Ht=x.relatedTarget||x.toElement,Ze=Ye,Ht=Ht?Ne(Ht):null,Ht!==null&&(Ir=d(Ht),Bt=Ht.tag,Ht!==Ir||Bt!==5&&Bt!==27&&Bt!==6)&&(Ht=null)):(Ze=null,Ht=Ye),Ze!==Ht)){if(Bt=wd,ot="onMouseLeave",Pe="onMouseEnter",Ie="mouse",(s==="pointerout"||s==="pointerover")&&(Bt=Ul,ot="onPointerLeave",Pe="onPointerEnter",Ie="pointer"),Ir=Ze==null?qe:Ge(Ze),He=Ht==null?qe:Ge(Ht),qe=new Bt(ot,Ie+"leave",Ze,x,it),qe.target=Ir,qe.relatedTarget=He,ot=null,Ne(it)===Ye&&(Bt=new Bt(Pe,Ie+"enter",Ht,x,it),Bt.target=He,Bt.relatedTarget=Ir,ot=Bt),Ir=ot,Ze&&Ht)t:{for(Bt=Ze,Pe=Ht,Ie=0,He=Bt;He;He=cc(He))Ie++;for(He=0,ot=Pe;ot;ot=cc(ot))He++;for(;0<Ie-He;)Bt=cc(Bt),Ie--;for(;0<He-Ie;)Pe=cc(Pe),He--;for(;Ie--;){if(Bt===Pe||Pe!==null&&Bt===Pe.alternate)break t;Bt=cc(Bt),Pe=cc(Pe)}Bt=null}else Bt=null;Ze!==null&&ey(dt,qe,Ze,Bt,!1),Ht!==null&&Ir!==null&&ey(dt,Ir,Ht,Bt,!0)}}e:{if(qe=Ye?Ge(Ye):window,Ze=qe.nodeName&&qe.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&qe.type==="file")var St=Cd;else if(Gl(qe))if(Pc)St=c;else{St=Q;var lr=zo}else Ze=qe.nodeName,!Ze||Ze.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Ye&&Dt(Ye.elementType)&&(St=Cd):St=i;if(St&&(St=St(s,Ye))){ps(dt,St,x,it);break e}lr&&lr(s,qe,Ye),s==="focusout"&&Ye&&qe.type==="number"&&Ye.memoizedProps.value!=null&&Ue(qe,"number",qe.value)}switch(lr=Ye?Ge(Ye):window,s){case"focusin":(Gl(lr)||lr.contentEditable==="true")&&(ue=lr,je=Ye,De=null);break;case"focusout":De=je=ue=null;break;case"mousedown":Me=!0;break;case"contextmenu":case"mouseup":case"dragend":Me=!1,ze(dt,x,it);break;case"selectionchange":if(J)break;case"keydown":case"keyup":ze(dt,x,it)}var Rt;if(Hl)e:{switch(s){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Zi?mi(s,x)&&(Lt="onCompositionEnd"):s==="keydown"&&x.keyCode===229&&(Lt="onCompositionStart");Lt&&(Bc&&x.locale!=="ko"&&(Zi||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Zi&&(Rt=Hn()):(Un=it,Bl="value"in Un?Un.value:Un.textContent,Zi=!0)),lr=uu(Ye,Lt),0<lr.length&&(Lt=new Pl(Lt,s,null,x,it),dt.push({event:Lt,listeners:lr}),Rt?Lt.data=Rt:(Rt=Lo(x),Rt!==null&&(Lt.data=Rt)))),(Rt=Fc?Vl(s,x):Hf(s,x))&&(Lt=uu(Ye,"onBeforeInput"),0<Lt.length&&(lr=new Pl("onBeforeInput","beforeinput",null,x,it),dt.push({event:lr,listeners:Lt}),lr.data=Rt)),UN(dt,s,Ye,x,it)}Qp(dt,o)})}function h0(s,o,x){return{instance:s,listener:o,currentTarget:x}}function uu(s,o){for(var x=o+"Capture",y=[];s!==null;){var j=s,R=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||R===null||(j=Ot(s,x),j!=null&&y.unshift(h0(s,j,R)),j=Ot(s,o),j!=null&&y.push(h0(s,j,R))),s.tag===3)return y;s=s.return}return[]}function cc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ey(s,o,x,y,j){for(var R=o._reactName,Z=[];x!==null&&x!==y;){var he=x,_e=he.alternate,Ye=he.stateNode;if(he=he.tag,_e!==null&&_e===y)break;he!==5&&he!==26&&he!==27||Ye===null||(_e=Ye,j?(Ye=Ot(x,R),Ye!=null&&Z.unshift(h0(x,Ye,_e))):j||(Ye=Ot(x,R),Ye!=null&&Z.push(h0(x,Ye,_e)))),x=x.return}Z.length!==0&&s.push({event:o,listeners:Z})}var YN=/\r\n?/g,XN=/\u0000|\uFFFD/g;function ty(s){return(typeof s=="string"?s:""+s).replace(YN,`
`).replace(XN,"")}function ry(s,o){return o=ty(o),ty(s)===o}function fu(){}function Mr(s,o,x,y,j,R){switch(x){case"children":typeof y=="string"?o==="body"||o==="textarea"&&y===""||_a(s,y):(typeof y=="number"||typeof y=="bigint")&&o!=="body"&&_a(s,""+y);break;case"className":kr(s,"class",y);break;case"tabIndex":kr(s,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(s,x,y);break;case"style":gs(s,y,R);break;case"data":if(o!=="object"){kr(s,"data",y);break}case"src":case"href":if(y===""&&(o!=="a"||x!=="href")){s.removeAttribute(x);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=Mo(""+y),s.setAttribute(x,y);break;case"action":case"formAction":if(typeof y=="function"){s.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(x==="formAction"?(o!=="input"&&Mr(s,o,"name",j.name,j,null),Mr(s,o,"formEncType",j.formEncType,j,null),Mr(s,o,"formMethod",j.formMethod,j,null),Mr(s,o,"formTarget",j.formTarget,j,null)):(Mr(s,o,"encType",j.encType,j,null),Mr(s,o,"method",j.method,j,null),Mr(s,o,"target",j.target,j,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=Mo(""+y),s.setAttribute(x,y);break;case"onClick":y!=null&&(s.onclick=fu);break;case"onScroll":y!=null&&cr("scroll",s);break;case"onScrollEnd":y!=null&&cr("scrollend",s);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(x=y.__html,x!=null){if(j.children!=null)throw Error(n(60));s.innerHTML=x}}break;case"multiple":s.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":s.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){s.removeAttribute("xlink:href");break}x=Mo(""+y),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""+y):s.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""):s.removeAttribute(x);break;case"capture":case"download":y===!0?s.setAttribute(x,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,y):s.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?s.setAttribute(x,y):s.removeAttribute(x);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?s.removeAttribute(x):s.setAttribute(x,y);break;case"popover":cr("beforetoggle",s),cr("toggle",s),rt(s,"popover",y);break;case"xlinkActuate":zt(s,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":zt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":zt(s,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":zt(s,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":zt(s,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":zt(s,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":zt(s,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":zt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":zt(s,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":rt(s,"is",y);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Gr.get(x)||x,rt(s,x,y))}}function dh(s,o,x,y,j,R){switch(x){case"style":gs(s,y,R);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(x=y.__html,x!=null){if(j.children!=null)throw Error(n(60));s.innerHTML=x}}break;case"children":typeof y=="string"?_a(s,y):(typeof y=="number"||typeof y=="bigint")&&_a(s,""+y);break;case"onScroll":y!=null&&cr("scroll",s);break;case"onScrollEnd":y!=null&&cr("scrollend",s);break;case"onClick":y!=null&&(s.onclick=fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!We.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(j=x.endsWith("Capture"),o=x.slice(2,j?x.length-7:void 0),R=s[Pr]||null,R=R!=null?R[x]:null,typeof R=="function"&&s.removeEventListener(o,R,j),typeof y=="function")){typeof R!="function"&&R!==null&&(x in s?s[x]=null:s.hasAttribute(x)&&s.removeAttribute(x)),s.addEventListener(o,y,j);break e}x in s?s[x]=y:y===!0?s.setAttribute(x,""):rt(s,x,y)}}}function qa(s,o,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cr("error",s),cr("load",s);var y=!1,j=!1,R;for(R in x)if(x.hasOwnProperty(R)){var Z=x[R];if(Z!=null)switch(R){case"src":y=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Mr(s,o,R,Z,x,null)}}j&&Mr(s,o,"srcSet",x.srcSet,x,null),y&&Mr(s,o,"src",x.src,x,null);return;case"input":cr("invalid",s);var he=R=Z=j=null,_e=null,Ye=null;for(y in x)if(x.hasOwnProperty(y)){var it=x[y];if(it!=null)switch(y){case"name":j=it;break;case"type":Z=it;break;case"checked":_e=it;break;case"defaultChecked":Ye=it;break;case"value":R=it;break;case"defaultValue":he=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,o));break;default:Mr(s,o,y,it,x,null)}}Aa(s,R,he,_e,Ye,Z,j,!1),Do(s);return;case"select":cr("invalid",s),y=Z=R=null;for(j in x)if(x.hasOwnProperty(j)&&(he=x[j],he!=null))switch(j){case"value":R=he;break;case"defaultValue":Z=he;break;case"multiple":y=he;default:Mr(s,o,j,he,x,null)}o=R,x=Z,s.multiple=!!y,o!=null?pe(s,!!y,o,!1):x!=null&&pe(s,!!y,x,!0);return;case"textarea":cr("invalid",s),R=j=y=null;for(Z in x)if(x.hasOwnProperty(Z)&&(he=x[Z],he!=null))switch(Z){case"value":y=he;break;case"defaultValue":j=he;break;case"children":R=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(n(91));break;default:Mr(s,o,Z,he,x,null)}ca(s,y,j,R),Do(s);return;case"option":for(_e in x)if(x.hasOwnProperty(_e)&&(y=x[_e],y!=null))switch(_e){case"selected":s.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Mr(s,o,_e,y,x,null)}return;case"dialog":cr("beforetoggle",s),cr("toggle",s),cr("cancel",s),cr("close",s);break;case"iframe":case"object":cr("load",s);break;case"video":case"audio":for(y=0;y<x0.length;y++)cr(x0[y],s);break;case"image":cr("error",s),cr("load",s);break;case"details":cr("toggle",s);break;case"embed":case"source":case"link":cr("error",s),cr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in x)if(x.hasOwnProperty(Ye)&&(y=x[Ye],y!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Mr(s,o,Ye,y,x,null)}return;default:if(Dt(o)){for(it in x)x.hasOwnProperty(it)&&(y=x[it],y!==void 0&&dh(s,o,it,y,x,void 0));return}}for(he in x)x.hasOwnProperty(he)&&(y=x[he],y!=null&&Mr(s,o,he,y,x,null))}function qN(s,o,x,y){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,R=null,Z=null,he=null,_e=null,Ye=null,it=null;for(Ze in x){var dt=x[Ze];if(x.hasOwnProperty(Ze)&&dt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":_e=dt;default:y.hasOwnProperty(Ze)||Mr(s,o,Ze,null,y,dt)}}for(var qe in y){var Ze=y[qe];if(dt=x[qe],y.hasOwnProperty(qe)&&(Ze!=null||dt!=null))switch(qe){case"type":R=Ze;break;case"name":j=Ze;break;case"checked":Ye=Ze;break;case"defaultChecked":it=Ze;break;case"value":Z=Ze;break;case"defaultValue":he=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(n(137,o));break;default:Ze!==dt&&Mr(s,o,qe,Ze,y,dt)}}jr(s,Z,he,_e,Ye,it,R,j);return;case"select":Ze=Z=he=qe=null;for(R in x)if(_e=x[R],x.hasOwnProperty(R)&&_e!=null)switch(R){case"value":break;case"multiple":Ze=_e;default:y.hasOwnProperty(R)||Mr(s,o,R,null,y,_e)}for(j in y)if(R=y[j],_e=x[j],y.hasOwnProperty(j)&&(R!=null||_e!=null))switch(j){case"value":qe=R;break;case"defaultValue":he=R;break;case"multiple":Z=R;default:R!==_e&&Mr(s,o,j,R,y,_e)}o=he,x=Z,y=Ze,qe!=null?pe(s,!!x,qe,!1):!!y!=!!x&&(o!=null?pe(s,!!x,o,!0):pe(s,!!x,x?[]:"",!1));return;case"textarea":Ze=qe=null;for(he in x)if(j=x[he],x.hasOwnProperty(he)&&j!=null&&!y.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:Mr(s,o,he,null,y,j)}for(Z in y)if(j=y[Z],R=x[Z],y.hasOwnProperty(Z)&&(j!=null||R!=null))switch(Z){case"value":qe=j;break;case"defaultValue":Ze=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:j!==R&&Mr(s,o,Z,j,y,R)}Tt(s,qe,Ze);return;case"option":for(var Ht in x)if(qe=x[Ht],x.hasOwnProperty(Ht)&&qe!=null&&!y.hasOwnProperty(Ht))switch(Ht){case"selected":s.selected=!1;break;default:Mr(s,o,Ht,null,y,qe)}for(_e in y)if(qe=y[_e],Ze=x[_e],y.hasOwnProperty(_e)&&qe!==Ze&&(qe!=null||Ze!=null))switch(_e){case"selected":s.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Mr(s,o,_e,qe,y,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in x)qe=x[Bt],x.hasOwnProperty(Bt)&&qe!=null&&!y.hasOwnProperty(Bt)&&Mr(s,o,Bt,null,y,qe);for(Ye in y)if(qe=y[Ye],Ze=x[Ye],y.hasOwnProperty(Ye)&&qe!==Ze&&(qe!=null||Ze!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,o));break;default:Mr(s,o,Ye,qe,y,Ze)}return;default:if(Dt(o)){for(var Ir in x)qe=x[Ir],x.hasOwnProperty(Ir)&&qe!==void 0&&!y.hasOwnProperty(Ir)&&dh(s,o,Ir,void 0,y,qe);for(it in y)qe=y[it],Ze=x[it],!y.hasOwnProperty(it)||qe===Ze||qe===void 0&&Ze===void 0||dh(s,o,it,qe,y,Ze);return}}for(var Pe in x)qe=x[Pe],x.hasOwnProperty(Pe)&&qe!=null&&!y.hasOwnProperty(Pe)&&Mr(s,o,Pe,null,y,qe);for(dt in y)qe=y[dt],Ze=x[dt],!y.hasOwnProperty(dt)||qe===Ze||qe==null&&Ze==null||Mr(s,o,dt,qe,y,Ze)}var uh=null,fh=null;function xu(s){return s.nodeType===9?s:s.ownerDocument}function ay(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sy(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function xh(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var hh=null;function $N(){var s=window.event;return s&&s.type==="popstate"?s===hh?!1:(hh=s,!0):(hh=null,!1)}var ny=typeof setTimeout=="function"?setTimeout:void 0,WN=typeof clearTimeout=="function"?clearTimeout:void 0,iy=typeof Promise=="function"?Promise:void 0,KN=typeof queueMicrotask=="function"?queueMicrotask:typeof iy<"u"?function(s){return iy.resolve(null).then(s).catch(ZN)}:ny;function ZN(s){setTimeout(function(){throw s})}function gl(s){return s==="head"}function ly(s,o){var x=o,y=0,j=0;do{var R=x.nextSibling;if(s.removeChild(x),R&&R.nodeType===8)if(x=R.data,x==="/$"){if(0<y&&8>y){x=y;var Z=s.ownerDocument;if(x&1&&m0(Z.documentElement),x&2&&m0(Z.body),x&4)for(x=Z.head,m0(x),Z=x.firstChild;Z;){var he=Z.nextSibling,_e=Z.nodeName;Z[ge]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&Z.rel.toLowerCase()==="stylesheet"||x.removeChild(Z),Z=he}}if(j===0){s.removeChild(R),k0(o);return}j--}else x==="$"||x==="$?"||x==="$!"?j++:y=x.charCodeAt(0)-48;else y=0;x=R}while(x);k0(o)}function mh(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var x=o;switch(o=o.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":mh(x),we(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}s.removeChild(x)}}function QN(s,o,x,y){for(;s.nodeType===1;){var j=x;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!y&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(y){if(!s[ge])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==j.rel||s.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||s.getAttribute("title")!==(j.title==null?null:j.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(j.src==null?null:j.src)||s.getAttribute("type")!==(j.type==null?null:j.type)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var R=j.name==null?null:""+j.name;if(j.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=jn(s.nextSibling),s===null)break}return null}function JN(s,o,x){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!x||(s=jn(s.nextSibling),s===null))return null;return s}function gh(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function ek(s,o){var x=s.ownerDocument;if(s.data!=="$?"||x.readyState==="complete")o();else{var y=function(){o(),x.removeEventListener("DOMContentLoaded",y)};x.addEventListener("DOMContentLoaded",y),s._reactRetry=y}}function jn(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var ph=null;function oy(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var x=s.data;if(x==="$"||x==="$!"||x==="$?"){if(o===0)return s;o--}else x==="/$"&&o++}s=s.previousSibling}return null}function cy(s,o,x){switch(o=xu(x),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function m0(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);we(s)}var dn=new Map,dy=new Set;function hu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _i=de.d;de.d={f:tk,r:rk,D:ak,C:sk,L:nk,m:ik,X:ok,S:lk,M:ck};function tk(){var s=_i.f(),o=nu();return s||o}function rk(s){var o=Se(s);o!==null&&o.tag===5&&o.type==="form"?T1(o):_i.r(s)}var dc=typeof document>"u"?null:document;function uy(s,o,x){var y=dc;if(y&&typeof o=="string"&&o){var j=Sa(o);j='link[rel="'+s+'"][href="'+j+'"]',typeof x=="string"&&(j+='[crossorigin="'+x+'"]'),dy.has(j)||(dy.add(j),s={rel:s,crossOrigin:x,href:o},y.querySelector(j)===null&&(o=y.createElement("link"),qa(o,"link",s),Be(o),y.head.appendChild(o)))}}function ak(s){_i.D(s),uy("dns-prefetch",s,null)}function sk(s,o){_i.C(s,o),uy("preconnect",s,o)}function nk(s,o,x){_i.L(s,o,x);var y=dc;if(y&&s&&o){var j='link[rel="preload"][as="'+Sa(o)+'"]';o==="image"&&x&&x.imageSrcSet?(j+='[imagesrcset="'+Sa(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(j+='[imagesizes="'+Sa(x.imageSizes)+'"]')):j+='[href="'+Sa(s)+'"]';var R=j;switch(o){case"style":R=uc(s);break;case"script":R=fc(s)}dn.has(R)||(s=w({rel:"preload",href:o==="image"&&x&&x.imageSrcSet?void 0:s,as:o},x),dn.set(R,s),y.querySelector(j)!==null||o==="style"&&y.querySelector(g0(R))||o==="script"&&y.querySelector(p0(R))||(o=y.createElement("link"),qa(o,"link",s),Be(o),y.head.appendChild(o)))}}function ik(s,o){_i.m(s,o);var x=dc;if(x&&s){var y=o&&typeof o.as=="string"?o.as:"script",j='link[rel="modulepreload"][as="'+Sa(y)+'"][href="'+Sa(s)+'"]',R=j;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=fc(s)}if(!dn.has(R)&&(s=w({rel:"modulepreload",href:s},o),dn.set(R,s),x.querySelector(j)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(p0(R)))return}y=x.createElement("link"),qa(y,"link",s),Be(y),x.head.appendChild(y)}}}function lk(s,o,x){_i.S(s,o,x);var y=dc;if(y&&s){var j=at(y).hoistableStyles,R=uc(s);o=o||"default";var Z=j.get(R);if(!Z){var he={loading:0,preload:null};if(Z=y.querySelector(g0(R)))he.loading=5;else{s=w({rel:"stylesheet",href:s,"data-precedence":o},x),(x=dn.get(R))&&yh(s,x);var _e=Z=y.createElement("link");Be(_e),qa(_e,"link",s),_e._p=new Promise(function(Ye,it){_e.onload=Ye,_e.onerror=it}),_e.addEventListener("load",function(){he.loading|=1}),_e.addEventListener("error",function(){he.loading|=2}),he.loading|=4,mu(Z,o,y)}Z={type:"stylesheet",instance:Z,count:1,state:he},j.set(R,Z)}}}function ok(s,o){_i.X(s,o);var x=dc;if(x&&s){var y=at(x).hoistableScripts,j=fc(s),R=y.get(j);R||(R=x.querySelector(p0(j)),R||(s=w({src:s,async:!0},o),(o=dn.get(j))&&bh(s,o),R=x.createElement("script"),Be(R),qa(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(j,R))}}function ck(s,o){_i.M(s,o);var x=dc;if(x&&s){var y=at(x).hoistableScripts,j=fc(s),R=y.get(j);R||(R=x.querySelector(p0(j)),R||(s=w({src:s,async:!0,type:"module"},o),(o=dn.get(j))&&bh(s,o),R=x.createElement("script"),Be(R),qa(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(j,R))}}function fy(s,o,x,y){var j=(j=te.current)?hu(j):null;if(!j)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(o=uc(x.href),x=at(j).hoistableStyles,y=x.get(o),y||(y={type:"style",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){s=uc(x.href);var R=at(j).hoistableStyles,Z=R.get(s);if(Z||(j=j.ownerDocument||j,Z={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,Z),(R=j.querySelector(g0(s)))&&!R._p&&(Z.instance=R,Z.state.loading=5),dn.has(s)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},dn.set(s,x),R||dk(j,s,x,Z.state))),o&&y===null)throw Error(n(528,""));return Z}if(o&&y!==null)throw Error(n(529,""));return null;case"script":return o=x.async,x=x.src,typeof x=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=fc(x),x=at(j).hoistableScripts,y=x.get(o),y||(y={type:"script",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function uc(s){return'href="'+Sa(s)+'"'}function g0(s){return'link[rel="stylesheet"]['+s+"]"}function xy(s){return w({},s,{"data-precedence":s.precedence,precedence:null})}function dk(s,o,x,y){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?y.loading=1:(o=s.createElement("link"),y.preload=o,o.addEventListener("load",function(){return y.loading|=1}),o.addEventListener("error",function(){return y.loading|=2}),qa(o,"link",x),Be(o),s.head.appendChild(o))}function fc(s){return'[src="'+Sa(s)+'"]'}function p0(s){return"script[async]"+s}function hy(s,o,x){if(o.count++,o.instance===null)switch(o.type){case"style":var y=s.querySelector('style[data-href~="'+Sa(x.href)+'"]');if(y)return o.instance=y,Be(y),y;var j=w({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return y=(s.ownerDocument||s).createElement("style"),Be(y),qa(y,"style",j),mu(y,x.precedence,s),o.instance=y;case"stylesheet":j=uc(x.href);var R=s.querySelector(g0(j));if(R)return o.state.loading|=4,o.instance=R,Be(R),R;y=xy(x),(j=dn.get(j))&&yh(y,j),R=(s.ownerDocument||s).createElement("link"),Be(R);var Z=R;return Z._p=new Promise(function(he,_e){Z.onload=he,Z.onerror=_e}),qa(R,"link",y),o.state.loading|=4,mu(R,x.precedence,s),o.instance=R;case"script":return R=fc(x.src),(j=s.querySelector(p0(R)))?(o.instance=j,Be(j),j):(y=x,(j=dn.get(R))&&(y=w({},x),bh(y,j)),s=s.ownerDocument||s,j=s.createElement("script"),Be(j),qa(j,"link",y),s.head.appendChild(j),o.instance=j);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(y=o.instance,o.state.loading|=4,mu(y,x.precedence,s));return o.instance}function mu(s,o,x){for(var y=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=y.length?y[y.length-1]:null,R=j,Z=0;Z<y.length;Z++){var he=y[Z];if(he.dataset.precedence===o)R=he;else if(R!==j)break}R?R.parentNode.insertBefore(s,R.nextSibling):(o=x.nodeType===9?x.head:x,o.insertBefore(s,o.firstChild))}function yh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function bh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var gu=null;function my(s,o,x){if(gu===null){var y=new Map,j=gu=new Map;j.set(x,y)}else j=gu,y=j.get(x),y||(y=new Map,j.set(x,y));if(y.has(s))return y;for(y.set(s,null),x=x.getElementsByTagName(s),j=0;j<x.length;j++){var R=x[j];if(!(R[ge]||R[ga]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Z=R.getAttribute(o)||"";Z=s+Z;var he=y.get(Z);he?he.push(R):y.set(Z,[R])}}return y}function gy(s,o,x){s=s.ownerDocument||s,s.head.insertBefore(x,o==="title"?s.querySelector("head > title"):null)}function uk(s,o,x){if(x===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function py(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var y0=null;function fk(){}function xk(s,o,x){if(y0===null)throw Error(n(475));var y=y0;if(o.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var j=uc(x.href),R=s.querySelector(g0(j));if(R){s=R._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(y.count++,y=pu.bind(y),s.then(y,y)),o.state.loading|=4,o.instance=R,Be(R);return}R=s.ownerDocument||s,x=xy(x),(j=dn.get(j))&&yh(x,j),R=R.createElement("link"),Be(R);var Z=R;Z._p=new Promise(function(he,_e){Z.onload=he,Z.onerror=_e}),qa(R,"link",x),o.instance=R}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(y.count++,o=pu.bind(y),s.addEventListener("load",o),s.addEventListener("error",o))}}function hk(){if(y0===null)throw Error(n(475));var s=y0;return s.stylesheets&&s.count===0&&vh(s,s.stylesheets),0<s.count?function(o){var x=setTimeout(function(){if(s.stylesheets&&vh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(x)}}:null}function pu(){if(this.count--,this.count===0){if(this.stylesheets)vh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var yu=null;function vh(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,yu=new Map,o.forEach(mk,s),yu=null,pu.call(s))}function mk(s,o){if(!(o.state.loading&4)){var x=yu.get(s);if(x)var y=x.get(null);else{x=new Map,yu.set(s,x);for(var j=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<j.length;R++){var Z=j[R];(Z.nodeName==="LINK"||Z.getAttribute("media")!=="not all")&&(x.set(Z.dataset.precedence,Z),y=Z)}y&&x.set(null,y)}j=o.instance,Z=j.getAttribute("data-precedence"),R=x.get(Z)||y,R===y&&x.set(null,j),x.set(Z,j),this.count++,y=pu.bind(this),j.addEventListener("load",y),j.addEventListener("error",y),R?R.parentNode.insertBefore(j,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(j,s.firstChild)),o.state.loading|=4}}var b0={$$typeof:T,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function gk(s,o,x,y,j,R,Z,he){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.hiddenUpdates=_t(null),this.identifierPrefix=y,this.onUncaughtError=j,this.onCaughtError=R,this.onRecoverableError=Z,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function yy(s,o,x,y,j,R,Z,he,_e,Ye,it,dt){return s=new gk(s,o,x,Z,he,_e,Ye,dt),o=1,R===!0&&(o|=24),R=Ls(3,null,null,o),s.current=R,R.stateNode=s,o=tx(),o.refCount++,s.pooledCache=o,o.refCount++,R.memoizedState={element:y,isDehydrated:x,cache:o},nx(R),s}function by(s){return s?(s=Vo,s):Vo}function vy(s,o,x,y,j,R){j=by(j),y.context===null?y.context=j:y.pendingContext=j,y=al(o),y.payload={element:x},R=R===void 0?null:R,R!==null&&(y.callback=R),x=sl(s,y,o),x!==null&&(Vs(x,s,o),Wc(x,s,o))}function wy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var x=s.retryLane;s.retryLane=x!==0&&x<o?x:o}}function wh(s,o){wy(s,o),(s=s.alternate)&&wy(s,o)}function Ny(s){if(s.tag===13){var o=Ho(s,67108864);o!==null&&Vs(o,s,67108864),wh(s,67108864)}}var bu=!0;function pk(s,o,x,y){var j=X.T;X.T=null;var R=de.p;try{de.p=2,Nh(s,o,x,y)}finally{de.p=R,X.T=j}}function yk(s,o,x,y){var j=X.T;X.T=null;var R=de.p;try{de.p=8,Nh(s,o,x,y)}finally{de.p=R,X.T=j}}function Nh(s,o,x,y){if(bu){var j=kh(y);if(j===null)ch(s,o,y,vu,x),jy(s,y);else if(vk(j,s,o,x,y))y.stopPropagation();else if(jy(s,y),o&4&&-1<bk.indexOf(s)){for(;j!==null;){var R=Se(j);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Z=At(R.pendingLanes);if(Z!==0){var he=R;for(he.pendingLanes|=2,he.entangledLanes|=2;Z;){var _e=1<<31-Yt(Z);he.entanglements[1]|=_e,Z&=~_e}Jn(R),(Ar&6)===0&&(au=ve()+500,f0(0))}}break;case 13:he=Ho(R,2),he!==null&&Vs(he,R,2),nu(),wh(R,2)}if(R=kh(y),R===null&&ch(s,o,y,vu,x),R===j)break;j=R}j!==null&&y.stopPropagation()}else ch(s,o,y,null,x)}}function kh(s){return s=Gi(s),jh(s)}var vu=null;function jh(s){if(vu=null,s=Ne(s),s!==null){var o=d(s);if(o===null)s=null;else{var x=o.tag;if(x===13){if(s=f(o),s!==null)return s;s=null}else if(x===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return vu=s,null}function ky(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Le()){case fe:return 2;case st:return 8;case Ee:case wt:return 32;case ut:return 268435456;default:return 32}default:return 32}}var Ch=!1,pl=null,yl=null,bl=null,v0=new Map,w0=new Map,vl=[],bk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jy(s,o){switch(s){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":v0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":w0.delete(o.pointerId)}}function N0(s,o,x,y,j,R){return s===null||s.nativeEvent!==R?(s={blockedOn:o,domEventName:x,eventSystemFlags:y,nativeEvent:R,targetContainers:[j]},o!==null&&(o=Se(o),o!==null&&Ny(o)),s):(s.eventSystemFlags|=y,o=s.targetContainers,j!==null&&o.indexOf(j)===-1&&o.push(j),s)}function vk(s,o,x,y,j){switch(o){case"focusin":return pl=N0(pl,s,o,x,y,j),!0;case"dragenter":return yl=N0(yl,s,o,x,y,j),!0;case"mouseover":return bl=N0(bl,s,o,x,y,j),!0;case"pointerover":var R=j.pointerId;return v0.set(R,N0(v0.get(R)||null,s,o,x,y,j)),!0;case"gotpointercapture":return R=j.pointerId,w0.set(R,N0(w0.get(R)||null,s,o,x,y,j)),!0}return!1}function Cy(s){var o=Ne(s.target);if(o!==null){var x=d(o);if(x!==null){if(o=x.tag,o===13){if(o=f(x),o!==null){s.blockedOn=o,Vi(s.priority,function(){if(x.tag===13){var y=Hs();y=ui(y);var j=Ho(x,y);j!==null&&Vs(j,x,y),wh(x,y)}});return}}else if(o===3&&x.stateNode.current.memoizedState.isDehydrated){s.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}s.blockedOn=null}function wu(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var x=kh(s.nativeEvent);if(x===null){x=s.nativeEvent;var y=new x.constructor(x.type,x);Fl=y,x.target.dispatchEvent(y),Fl=null}else return o=Se(x),o!==null&&Ny(o),s.blockedOn=x,!1;o.shift()}return!0}function Ey(s,o,x){wu(s)&&x.delete(o)}function wk(){Ch=!1,pl!==null&&wu(pl)&&(pl=null),yl!==null&&wu(yl)&&(yl=null),bl!==null&&wu(bl)&&(bl=null),v0.forEach(Ey),w0.forEach(Ey)}function Nu(s,o){s.blockedOn===o&&(s.blockedOn=null,Ch||(Ch=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wk)))}var ku=null;function Sy(s){ku!==s&&(ku=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ku===s&&(ku=null);for(var o=0;o<s.length;o+=3){var x=s[o],y=s[o+1],j=s[o+2];if(typeof y!="function"){if(jh(y||x)===null)continue;break}var R=Se(x);R!==null&&(s.splice(o,3),o-=3,jx(R,{pending:!0,data:j,method:x.method,action:y},y,j))}}))}function k0(s){function o(_e){return Nu(_e,s)}pl!==null&&Nu(pl,s),yl!==null&&Nu(yl,s),bl!==null&&Nu(bl,s),v0.forEach(o),w0.forEach(o);for(var x=0;x<vl.length;x++){var y=vl[x];y.blockedOn===s&&(y.blockedOn=null)}for(;0<vl.length&&(x=vl[0],x.blockedOn===null);)Cy(x),x.blockedOn===null&&vl.shift();if(x=(s.ownerDocument||s).$$reactFormReplay,x!=null)for(y=0;y<x.length;y+=3){var j=x[y],R=x[y+1],Z=j[Pr]||null;if(typeof R=="function")Z||Sy(x);else if(Z){var he=null;if(R&&R.hasAttribute("formAction")){if(j=R,Z=R[Pr]||null)he=Z.formAction;else if(jh(j)!==null)continue}else he=Z.action;typeof he=="function"?x[y+1]=he:(x.splice(y,3),y-=3),Sy(x)}}}function Eh(s){this._internalRoot=s}ju.prototype.render=Eh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var x=o.current,y=Hs();vy(x,y,s,o,null,null)},ju.prototype.unmount=Eh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;vy(s.current,2,null,s,null,null),nu(),o[tn]=null}};function ju(s){this._internalRoot=s}ju.prototype.unstable_scheduleHydration=function(s){if(s){var o=yn();s={blockedOn:null,target:s,priority:o};for(var x=0;x<vl.length&&o!==0&&o<vl[x].priority;x++);vl.splice(x,0,s),x===0&&Cy(s)}};var Ay=a.version;if(Ay!=="19.1.1")throw Error(n(527,Ay,"19.1.1"));de.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=b(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var Nk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cu.isDisabled&&Cu.supportsFiber)try{qt=Cu.inject(Nk),ur=Cu}catch{}}return C0.createRoot=function(s,o){if(!l(s))throw Error(n(299));var x=!1,y="",j=G1,R=Y1,Z=X1,he=null;return o!=null&&(o.unstable_strictMode===!0&&(x=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(j=o.onUncaughtError),o.onCaughtError!==void 0&&(R=o.onCaughtError),o.onRecoverableError!==void 0&&(Z=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(he=o.unstable_transitionCallbacks)),o=yy(s,1,!1,null,null,x,y,j,R,Z,he,null),s[tn]=o.current,oh(s),new Eh(o)},C0.hydrateRoot=function(s,o,x){if(!l(s))throw Error(n(299));var y=!1,j="",R=G1,Z=Y1,he=X1,_e=null,Ye=null;return x!=null&&(x.unstable_strictMode===!0&&(y=!0),x.identifierPrefix!==void 0&&(j=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(Z=x.onCaughtError),x.onRecoverableError!==void 0&&(he=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(_e=x.unstable_transitionCallbacks),x.formState!==void 0&&(Ye=x.formState)),o=yy(s,1,!0,o,x??null,y,j,R,Z,he,_e,Ye),o.context=by(null),x=o.current,y=Hs(),y=ui(y),j=al(y),j.callback=null,sl(x,j,y),x=y,o.current.lanes=x,Jr(o,x),Jn(o),s[tn]=o.current,oh(s),new ju(o)},C0.version="19.1.1",C0}var Ly;function Mk(){if(Ly)return _h.exports;Ly=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),_h.exports=Rk(),_h.exports}var Ik=Mk();const Ok=hf(Ik);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Py="popstate";function Fk(t={}){function a(n,l){let{pathname:d,search:f,hash:h}=n.location;return bm("",{pathname:d,search:f,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:V0(l)}return Lk(a,r,null,t)}function Qr(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Rn(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Bk(){return Math.random().toString(36).substring(2,10)}function zy(t,a){return{usr:t.state,key:t.key,idx:a}}function bm(t,a,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Ec(a):a,state:r,key:a&&a.key||n||Bk()}}function V0({pathname:t="/",search:a="",hash:r=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ec(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(a.search=t.substring(n),t=t.substring(0,n)),t&&(a.pathname=t)}return a}function Lk(t,a,r,n={}){let{window:l=document.defaultView,v5Compat:d=!1}=n,f=l.history,h="POP",b=null,g=w();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function w(){return(f.state||{idx:null}).idx}function k(){h="POP";let M=w(),I=M==null?null:M-g;g=M,b&&b({action:h,location:A.location,delta:I})}function C(M,I){h="PUSH";let F=bm(A.location,M,I);g=w()+1;let T=zy(F,g),B=A.createHref(F);try{f.pushState(T,"",B)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;l.location.assign(B)}d&&b&&b({action:h,location:A.location,delta:1})}function S(M,I){h="REPLACE";let F=bm(A.location,M,I);g=w();let T=zy(F,g),B=A.createHref(F);f.replaceState(T,"",B),d&&b&&b({action:h,location:A.location,delta:0})}function D(M){return Pk(M)}let A={get action(){return h},get location(){return t(l,f)},listen(M){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(Py,k),b=M,()=>{l.removeEventListener(Py,k),b=null}},createHref(M){return a(l,M)},createURL:D,encodeLocation(M){let I=D(M);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:C,replace:S,go(M){return f.go(M)}};return A}function Pk(t,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Qr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:V0(t);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function nv(t,a,r="/"){return zk(t,a,r,!1)}function zk(t,a,r,n){let l=typeof a=="string"?Ec(a):a,d=Oi(l.pathname||"/",r);if(d==null)return null;let f=iv(t);Uk(f);let h=null;for(let b=0;h==null&&b<f.length;++b){let g=Qk(d);h=Kk(f[b],g,n)}return h}function iv(t,a=[],r=[],n=""){let l=(d,f,h)=>{let b={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};b.relativePath.startsWith("/")&&(Qr(b.relativePath.startsWith(n),`Absolute route path "${b.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(n.length));let g=Ri([n,b.relativePath]),w=r.concat(b);d.children&&d.children.length>0&&(Qr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),iv(d.children,a,w,g)),!(d.path==null&&!d.index)&&a.push({path:g,score:$k(g,d.index),routesMeta:w})};return t.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))l(d,f);else for(let h of lv(d.path))l(d,f,h)}),a}function lv(t){let a=t.split("/");if(a.length===0)return[];let[r,...n]=a,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return l?[d,""]:[d];let f=lv(n.join("/")),h=[];return h.push(...f.map(b=>b===""?d:[d,b].join("/"))),l&&h.push(...f),h.map(b=>t.startsWith("/")&&b===""?"/":b)}function Uk(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:Wk(a.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Hk=/^:[\w-]+$/,Vk=3,Gk=2,Yk=1,Xk=10,qk=-2,Uy=t=>t==="*";function $k(t,a){let r=t.split("/"),n=r.length;return r.some(Uy)&&(n+=qk),a&&(n+=Gk),r.filter(l=>!Uy(l)).reduce((l,d)=>l+(Hk.test(d)?Vk:d===""?Yk:Xk),n)}function Wk(t,a){return t.length===a.length&&t.slice(0,-1).every((n,l)=>n===a[l])?t[t.length-1]-a[a.length-1]:0}function Kk(t,a,r=!1){let{routesMeta:n}=t,l={},d="/",f=[];for(let h=0;h<n.length;++h){let b=n[h],g=h===n.length-1,w=d==="/"?a:a.slice(d.length)||"/",k=Yu({path:b.relativePath,caseSensitive:b.caseSensitive,end:g},w),C=b.route;if(!k&&g&&r&&!n[n.length-1].route.index&&(k=Yu({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},w)),!k)return null;Object.assign(l,k.params),f.push({params:l,pathname:Ri([d,k.pathname]),pathnameBase:r3(Ri([d,k.pathnameBase])),route:C}),k.pathnameBase!=="/"&&(d=Ri([d,k.pathnameBase]))}return f}function Yu(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Zk(t.path,t.caseSensitive,t.end),l=a.match(r);if(!l)return null;let d=l[0],f=d.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:n.reduce((g,{paramName:w,isOptional:k},C)=>{if(w==="*"){let D=h[C]||"";f=d.slice(0,d.length-D.length).replace(/(.)\/+$/,"$1")}const S=h[C];return k&&!S?g[w]=void 0:g[w]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:f,pattern:t}}function Zk(t,a=!1,r=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,b)=>(n.push({paramName:h,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),n]}function Qk(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function Oi(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function Jk(t,a="/"){let{pathname:r,search:n="",hash:l=""}=typeof t=="string"?Ec(t):t;return{pathname:r?r.startsWith("/")?r:e3(r,a):a,search:a3(n),hash:s3(l)}}function e3(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Mh(t,a,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function t3(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function ov(t){let a=t3(t);return a.map((r,n)=>n===a.length-1?r.pathname:r.pathnameBase)}function cv(t,a,r,n=!1){let l;typeof t=="string"?l=Ec(t):(l={...t},Qr(!l.pathname||!l.pathname.includes("?"),Mh("?","pathname","search",l)),Qr(!l.pathname||!l.pathname.includes("#"),Mh("#","pathname","hash",l)),Qr(!l.search||!l.search.includes("#"),Mh("#","search","hash",l)));let d=t===""||l.pathname==="",f=d?"/":l.pathname,h;if(f==null)h=r;else{let k=a.length-1;if(!n&&f.startsWith("..")){let C=f.split("/");for(;C[0]==="..";)C.shift(),k-=1;l.pathname=C.join("/")}h=k>=0?a[k]:"/"}let b=Jk(l,h),g=f&&f!=="/"&&f.endsWith("/"),w=(d||f===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(g||w)&&(b.pathname+="/"),b}var Ri=t=>t.join("/").replace(/\/\/+/g,"/"),r3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),a3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,s3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function n3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var dv=["POST","PUT","PATCH","DELETE"];new Set(dv);var i3=["GET",...dv];new Set(i3);var Sc=E.createContext(null);Sc.displayName="DataRouter";var mf=E.createContext(null);mf.displayName="DataRouterState";E.createContext(!1);var uv=E.createContext({isTransitioning:!1});uv.displayName="ViewTransition";var l3=E.createContext(new Map);l3.displayName="Fetchers";var o3=E.createContext(null);o3.displayName="Await";var li=E.createContext(null);li.displayName="Navigation";var sd=E.createContext(null);sd.displayName="Location";var oi=E.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var Zm=E.createContext(null);Zm.displayName="RouteError";function c3(t,{relative:a}={}){Qr(nd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=E.useContext(li),{hash:l,pathname:d,search:f}=id(t,{relative:a}),h=d;return r!=="/"&&(h=d==="/"?r:Ri([r,d])),n.createHref({pathname:h,search:f,hash:l})}function nd(){return E.useContext(sd)!=null}function On(){return Qr(nd(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(sd).location}var fv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xv(t){E.useContext(li).static||E.useLayoutEffect(t)}function hr(){let{isDataRoute:t}=E.useContext(oi);return t?N3():d3()}function d3(){Qr(nd(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(Sc),{basename:a,navigator:r}=E.useContext(li),{matches:n}=E.useContext(oi),{pathname:l}=On(),d=JSON.stringify(ov(n)),f=E.useRef(!1);return xv(()=>{f.current=!0}),E.useCallback((b,g={})=>{if(Rn(f.current,fv),!f.current)return;if(typeof b=="number"){r.go(b);return}let w=cv(b,JSON.parse(d),l,g.relative==="path");t==null&&a!=="/"&&(w.pathname=w.pathname==="/"?a:Ri([a,w.pathname])),(g.replace?r.replace:r.push)(w,g.state,g)},[a,r,d,l,t])}E.createContext(null);function gn(){let{matches:t}=E.useContext(oi),a=t[t.length-1];return a?a.params:{}}function id(t,{relative:a}={}){let{matches:r}=E.useContext(oi),{pathname:n}=On(),l=JSON.stringify(ov(r));return E.useMemo(()=>cv(t,JSON.parse(l),n,a==="path"),[t,l,n,a])}function u3(t,a){return hv(t,a)}function hv(t,a,r,n){Qr(nd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=E.useContext(li),{matches:d}=E.useContext(oi),f=d[d.length-1],h=f?f.params:{},b=f?f.pathname:"/",g=f?f.pathnameBase:"/",w=f&&f.route;{let I=w&&w.path||"";mv(b,!w||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let k=On(),C;if(a){let I=typeof a=="string"?Ec(a):a;Qr(g==="/"||I.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),C=I}else C=k;let S=C.pathname||"/",D=S;if(g!=="/"){let I=g.replace(/^\//,"").split("/");D="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=nv(t,{pathname:D});Rn(w||A!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),Rn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=g3(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},h,I.params),pathname:Ri([g,l.encodeLocation?l.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:Ri([g,l.encodeLocation?l.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),d,r,n);return a&&M?E.createElement(sd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},M):M}function f3(){let t=w3(),a=n3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},d={padding:"2px 4px",backgroundColor:n},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:d},"ErrorBoundary")," or"," ",E.createElement("code",{style:d},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},a),r?E.createElement("pre",{style:l},r):null,f)}var x3=E.createElement(f3,null),h3=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?E.createElement(oi.Provider,{value:this.props.routeContext},E.createElement(Zm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function m3({routeContext:t,match:a,children:r}){let n=E.useContext(Sc);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),E.createElement(oi.Provider,{value:t},r)}function g3(t,a=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,d=r?.errors;if(d!=null){let b=l.findIndex(g=>g.route.id&&d?.[g.route.id]!==void 0);Qr(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let f=!1,h=-1;if(r)for(let b=0;b<l.length;b++){let g=l[b];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=b),g.route.id){let{loaderData:w,errors:k}=r,C=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!k||k[g.route.id]===void 0);if(g.route.lazy||C){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((b,g,w)=>{let k,C=!1,S=null,D=null;r&&(k=d&&g.route.id?d[g.route.id]:void 0,S=g.route.errorElement||x3,f&&(h<0&&w===0?(mv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,D=null):h===w&&(C=!0,D=g.route.hydrateFallbackElement||null)));let A=a.concat(l.slice(0,w+1)),M=()=>{let I;return k?I=S:C?I=D:g.route.Component?I=E.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=b,E.createElement(m3,{match:g,routeContext:{outlet:b,matches:A,isDataRoute:r!=null},children:I})};return r&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?E.createElement(h3,{location:r.location,revalidation:r.revalidation,component:S,error:k,children:M(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):M()},null)}function Qm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function p3(t){let a=E.useContext(Sc);return Qr(a,Qm(t)),a}function y3(t){let a=E.useContext(mf);return Qr(a,Qm(t)),a}function b3(t){let a=E.useContext(oi);return Qr(a,Qm(t)),a}function Jm(t){let a=b3(t),r=a.matches[a.matches.length-1];return Qr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function v3(){return Jm("useRouteId")}function w3(){let t=E.useContext(Zm),a=y3("useRouteError"),r=Jm("useRouteError");return t!==void 0?t:a.errors?.[r]}function N3(){let{router:t}=p3("useNavigate"),a=Jm("useNavigate"),r=E.useRef(!1);return xv(()=>{r.current=!0}),E.useCallback(async(l,d={})=>{Rn(r.current,fv),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:a,...d}))},[t,a])}var Hy={};function mv(t,a,r){!a&&!Hy[t]&&(Hy[t]=!0,Rn(!1,r))}E.memo(k3);function k3({routes:t,future:a,state:r}){return hv(t,void 0,r,a)}function Xt(t){Qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function j3({basename:t="/",children:a=null,location:r,navigationType:n="POP",navigator:l,static:d=!1}){Qr(!nd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:f,navigator:l,static:d,future:{}}),[f,l,d]);typeof r=="string"&&(r=Ec(r));let{pathname:b="/",search:g="",hash:w="",state:k=null,key:C="default"}=r,S=E.useMemo(()=>{let D=Oi(b,f);return D==null?null:{location:{pathname:D,search:g,hash:w,state:k,key:C},navigationType:n}},[f,b,g,w,k,C,n]);return Rn(S!=null,`<Router basename="${f}"> is not able to match the URL "${b}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:E.createElement(li.Provider,{value:h},E.createElement(sd.Provider,{children:a,value:S}))}function C3({children:t,location:a}){return u3(vm(t),a)}function vm(t,a=[]){let r=[];return E.Children.forEach(t,(n,l)=>{if(!E.isValidElement(n))return;let d=[...a,l];if(n.type===E.Fragment){r.push.apply(r,vm(n.props.children,d));return}Qr(n.type===Xt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let f={id:n.props.id||d.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(f.children=vm(n.props.children,d)),r.push(f)}),r}var Pu="get",zu="application/x-www-form-urlencoded";function gf(t){return t!=null&&typeof t.tagName=="string"}function E3(t){return gf(t)&&t.tagName.toLowerCase()==="button"}function S3(t){return gf(t)&&t.tagName.toLowerCase()==="form"}function A3(t){return gf(t)&&t.tagName.toLowerCase()==="input"}function _3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T3(t,a){return t.button===0&&(!a||a==="_self")&&!_3(t)}function wm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let n=t[r];return a.concat(Array.isArray(n)?n.map(l=>[r,l]):[[r,n]])},[]))}function D3(t,a){let r=wm(t);return a&&a.forEach((n,l)=>{r.has(l)||a.getAll(l).forEach(d=>{r.append(l,d)})}),r}var Su=null;function R3(){if(Su===null)try{new FormData(document.createElement("form"),0),Su=!1}catch{Su=!0}return Su}var M3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ih(t){return t!=null&&!M3.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zu}"`),null):t}function I3(t,a){let r,n,l,d,f;if(S3(t)){let h=t.getAttribute("action");n=h?Oi(h,a):null,r=t.getAttribute("method")||Pu,l=Ih(t.getAttribute("enctype"))||zu,d=new FormData(t)}else if(E3(t)||A3(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||h.getAttribute("action");if(n=b?Oi(b,a):null,r=t.getAttribute("formmethod")||h.getAttribute("method")||Pu,l=Ih(t.getAttribute("formenctype"))||Ih(h.getAttribute("enctype"))||zu,d=new FormData(h,t),!R3()){let{name:g,type:w,value:k}=t;if(w==="image"){let C=g?`${g}.`:"";d.append(`${C}x`,"0"),d.append(`${C}y`,"0")}else g&&d.append(g,k)}}else{if(gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pu,n=null,l=zu,f=t}return d&&l==="text/plain"&&(f=d,d=void 0),{action:n,method:r.toLowerCase(),encType:l,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function eg(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function O3(t,a,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:a&&Oi(n.pathname,a)==="/"?n.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function F3(t,a){if(t.id in a)return a[t.id];try{let r=await import(t.module);return a[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function B3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function L3(t,a,r){let n=await Promise.all(t.map(async l=>{let d=a.routes[l.route.id];if(d){let f=await F3(d,r);return f.links?f.links():[]}return[]}));return H3(n.flat(1).filter(B3).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Vy(t,a,r,n,l,d){let f=(b,g)=>r[g]?b.route.id!==r[g].route.id:!0,h=(b,g)=>r[g].pathname!==b.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==b.params["*"];return d==="assets"?a.filter((b,g)=>f(b,g)||h(b,g)):d==="data"?a.filter((b,g)=>{let w=n.routes[b.route.id];if(!w||!w.hasLoader)return!1;if(f(b,g)||h(b,g))return!0;if(b.route.shouldRevalidate){let k=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function P3(t,a,{includeHydrateFallback:r}={}){return z3(t.map(n=>{let l=a.routes[n.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function z3(t){return[...new Set(t)]}function U3(t){let a={},r=Object.keys(t).sort();for(let n of r)a[n]=t[n];return a}function H3(t,a){let r=new Set;return new Set(a),t.reduce((n,l)=>{let d=JSON.stringify(U3(l));return r.has(d)||(r.add(d),n.push({key:d,link:l})),n},[])}function gv(){let t=E.useContext(Sc);return eg(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function V3(){let t=E.useContext(mf);return eg(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var tg=E.createContext(void 0);tg.displayName="FrameworkContext";function pv(){let t=E.useContext(tg);return eg(t,"You must render this element inside a <HydratedRouter> element"),t}function G3(t,a){let r=E.useContext(tg),[n,l]=E.useState(!1),[d,f]=E.useState(!1),{onFocus:h,onBlur:b,onMouseEnter:g,onMouseLeave:w,onTouchStart:k}=a,C=E.useRef(null);E.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=I=>{I.forEach(F=>{f(F.isIntersecting)})},M=new IntersectionObserver(A,{threshold:.5});return C.current&&M.observe(C.current),()=>{M.disconnect()}}},[t]),E.useEffect(()=>{if(n){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[n]);let S=()=>{l(!0)},D=()=>{l(!1),f(!1)};return r?t!=="intent"?[d,C,{}]:[d,C,{onFocus:E0(h,S),onBlur:E0(b,D),onMouseEnter:E0(g,S),onMouseLeave:E0(w,D),onTouchStart:E0(k,S)}]:[!1,C,{}]}function E0(t,a){return r=>{t&&t(r),r.defaultPrevented||a(r)}}function Y3({page:t,...a}){let{router:r}=gv(),n=E.useMemo(()=>nv(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?E.createElement(q3,{page:t,matches:n,...a}):null}function X3(t){let{manifest:a,routeModules:r}=pv(),[n,l]=E.useState([]);return E.useEffect(()=>{let d=!1;return L3(t,a,r).then(f=>{d||l(f)}),()=>{d=!0}},[t,a,r]),n}function q3({page:t,matches:a,...r}){let n=On(),{manifest:l,routeModules:d}=pv(),{basename:f}=gv(),{loaderData:h,matches:b}=V3(),g=E.useMemo(()=>Vy(t,a,b,l,n,"data"),[t,a,b,l,n]),w=E.useMemo(()=>Vy(t,a,b,l,n,"assets"),[t,a,b,l,n]),k=E.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let D=new Set,A=!1;if(a.forEach(I=>{let F=l.routes[I.route.id];!F||!F.hasLoader||(!g.some(T=>T.route.id===I.route.id)&&I.route.id in h&&d[I.route.id]?.shouldRevalidate||F.hasClientLoader?A=!0:D.add(I.route.id))}),D.size===0)return[];let M=O3(t,f,"data");return A&&D.size>0&&M.searchParams.set("_routes",a.filter(I=>D.has(I.route.id)).map(I=>I.route.id).join(",")),[M.pathname+M.search]},[f,h,n,l,g,a,t,d]),C=E.useMemo(()=>P3(w,l),[w,l]),S=X3(w);return E.createElement(E.Fragment,null,k.map(D=>E.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),C.map(D=>E.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),S.map(({key:D,link:A})=>E.createElement("link",{key:D,nonce:r.nonce,...A})))}function $3(...t){return a=>{t.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yv&&(window.__reactRouterVersion="7.8.0")}catch{}function W3({basename:t,children:a,window:r}){let n=E.useRef();n.current==null&&(n.current=Fk({window:r,v5Compat:!0}));let l=n.current,[d,f]=E.useState({action:l.action,location:l.location}),h=E.useCallback(b=>{E.startTransition(()=>f(b))},[f]);return E.useLayoutEffect(()=>l.listen(h),[l,h]),E.createElement(j3,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:l})}var bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,no=E.forwardRef(function({onClick:a,discover:r="render",prefetch:n="none",relative:l,reloadDocument:d,replace:f,state:h,target:b,to:g,preventScrollReset:w,viewTransition:k,...C},S){let{basename:D}=E.useContext(li),A=typeof g=="string"&&bv.test(g),M,I=!1;if(typeof g=="string"&&A&&(M=g,yv))try{let z=new URL(window.location.href),W=g.startsWith("//")?new URL(z.protocol+g):new URL(g),ee=Oi(W.pathname,D);W.origin===z.origin&&ee!=null?g=ee+W.search+W.hash:I=!0}catch{Rn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=c3(g,{relative:l}),[T,B,H]=G3(n,C),U=Q3(g,{replace:f,state:h,target:b,preventScrollReset:w,relative:l,viewTransition:k});function L(z){a&&a(z),z.defaultPrevented||U(z)}let P=E.createElement("a",{...C,...H,href:M||F,onClick:I||d?a:L,ref:$3(S,B),target:b,"data-discover":!A&&r==="render"?"true":void 0});return T&&!A?E.createElement(E.Fragment,null,P,E.createElement(Y3,{page:F})):P});no.displayName="Link";var Nm=E.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:n="",end:l=!1,style:d,to:f,viewTransition:h,children:b,...g},w){let k=id(f,{relative:g.relative}),C=On(),S=E.useContext(mf),{navigator:D,basename:A}=E.useContext(li),M=S!=null&&aj(k)&&h===!0,I=D.encodeLocation?D.encodeLocation(k).pathname:k.pathname,F=C.pathname,T=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(F=F.toLowerCase(),T=T?T.toLowerCase():null,I=I.toLowerCase()),T&&A&&(T=Oi(T,A)||T);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let H=F===I||!l&&F.startsWith(I)&&F.charAt(B)==="/",U=T!=null&&(T===I||!l&&T.startsWith(I)&&T.charAt(I.length)==="/"),L={isActive:H,isPending:U,isTransitioning:M},P=H?a:void 0,z;typeof n=="function"?z=n(L):z=[n,H?"active":null,U?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let W=typeof d=="function"?d(L):d;return E.createElement(no,{...g,"aria-current":P,className:z,ref:w,style:W,to:f,viewTransition:h},typeof b=="function"?b(L):b)});Nm.displayName="NavLink";var K3=E.forwardRef(({discover:t="render",fetcherKey:a,navigate:r,reloadDocument:n,replace:l,state:d,method:f=Pu,action:h,onSubmit:b,relative:g,preventScrollReset:w,viewTransition:k,...C},S)=>{let D=tj(),A=rj(h,{relative:g}),M=f.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&bv.test(h),F=T=>{if(b&&b(T),T.defaultPrevented)return;T.preventDefault();let B=T.nativeEvent.submitter,H=B?.getAttribute("formmethod")||f;D(B||T.currentTarget,{fetcherKey:a,method:H,navigate:r,replace:l,state:d,relative:g,preventScrollReset:w,viewTransition:k})};return E.createElement("form",{ref:S,method:M,action:A,onSubmit:n?b:F,...C,"data-discover":!I&&t==="render"?"true":void 0})});K3.displayName="Form";function Z3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vv(t){let a=E.useContext(Sc);return Qr(a,Z3(t)),a}function Q3(t,{target:a,replace:r,state:n,preventScrollReset:l,relative:d,viewTransition:f}={}){let h=hr(),b=On(),g=id(t,{relative:d});return E.useCallback(w=>{if(T3(w,a)){w.preventDefault();let k=r!==void 0?r:V0(b)===V0(g);h(t,{replace:k,state:n,preventScrollReset:l,relative:d,viewTransition:f})}},[b,h,g,r,n,a,t,l,d,f])}function ld(t){Rn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=E.useRef(wm(t)),r=E.useRef(!1),n=On(),l=E.useMemo(()=>D3(n.search,r.current?null:a.current),[n.search]),d=hr(),f=E.useCallback((h,b)=>{const g=wm(typeof h=="function"?h(new URLSearchParams(l)):h);r.current=!0,d("?"+g,b)},[d,l]);return[l,f]}var J3=0,ej=()=>`__${String(++J3)}__`;function tj(){let{router:t}=vv("useSubmit"),{basename:a}=E.useContext(li),r=v3();return E.useCallback(async(n,l={})=>{let{action:d,method:f,encType:h,formData:b,body:g}=I3(n,a);if(l.navigate===!1){let w=l.fetcherKey||ej();await t.fetch(w,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:g,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await t.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:g,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,a,r])}function rj(t,{relative:a}={}){let{basename:r}=E.useContext(li),n=E.useContext(oi);Qr(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),d={...id(t||".",{relative:a})},f=On();if(t==null){d.search=f.search;let h=new URLSearchParams(d.search),b=h.getAll("index");if(b.some(w=>w==="")){h.delete("index"),b.filter(k=>k).forEach(k=>h.append("index",k));let w=h.toString();d.search=w?`?${w}`:""}}return(!t||t===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:Ri([r,d.pathname])),V0(d)}function aj(t,{relative:a}={}){let r=E.useContext(uv);Qr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vv("useViewTransitionState"),l=id(t,{relative:a});if(!r.isTransitioning)return!1;let d=Oi(r.currentLocation.pathname,n)||r.currentLocation.pathname,f=Oi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Yu(l.pathname,f)!=null||Yu(l.pathname,d)!=null}function sj(){const t=hr(),a=()=>{t("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 md:top-6 md:right-6 flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 z-10",children:e.jsx("button",{onClick:()=>t("/login"),className:"signInSignUp text-xs sm:text-sm md:text-base px-3 py-2 sm:px-4 sm:py-2 md:px-6 md:py-3 whitespace-nowrap",children:"Login In"})}),e.jsxs("div",{className:"welcomeCard mx-3 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-20 h-20 sm:w-28 sm:h-28 md:w-36 md:h-36 lg:w-44 lg:h-44 mx-auto mb-4 sm:mb-5 md:mb-6"}),e.jsxs("h1",{className:"welcomeTitle text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl mb-3 sm:mb-4 md:mb-5",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300 block sm:inline",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-7 md:mb-8 px-2 sm:px-4 md:px-0",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8 md:mb-10",children:[e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Resident Records"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Role Management"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Maintenance Requests"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Announcements"})]})]}),e.jsx("button",{className:"welcomeButton text-sm sm:text-base md:text-lg font-bold py-3 px-6 sm:py-3 sm:px-8 md:py-4 md:px-10 rounded-lg shadow-lg hover:scale-105 transition-transform duration-300",onClick:a,children:" Get Started"}),e.jsx("div",{className:"mt-4 sm:mt-6 text-xs sm:text-sm text-white/70 text-center block sm:hidden",children:" Tap buttons above to sign in or create account"})]}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/20 pointer-events-none"})]})}function wv(t,a){return function(){return t.apply(a,arguments)}}const{toString:nj}=Object.prototype,{getPrototypeOf:rg}=Object,{iterator:pf,toStringTag:Nv}=Symbol,yf=(t=>a=>{const r=nj.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Fn=t=>(t=t.toLowerCase(),a=>yf(a)===t),bf=t=>a=>typeof a===t,{isArray:Ac}=Array,G0=bf("undefined");function od(t){return t!==null&&!G0(t)&&t.constructor!==null&&!G0(t.constructor)&&Rs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kv=Fn("ArrayBuffer");function ij(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&kv(t.buffer),a}const lj=bf("string"),Rs=bf("function"),jv=bf("number"),cd=t=>t!==null&&typeof t=="object",oj=t=>t===!0||t===!1,Uu=t=>{if(yf(t)!=="object")return!1;const a=rg(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Nv in t)&&!(pf in t)},cj=t=>{if(!cd(t)||od(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},dj=Fn("Date"),uj=Fn("File"),fj=Fn("Blob"),xj=Fn("FileList"),hj=t=>cd(t)&&Rs(t.pipe),mj=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Rs(t.append)&&((a=yf(t))==="formdata"||a==="object"&&Rs(t.toString)&&t.toString()==="[object FormData]"))},gj=Fn("URLSearchParams"),[pj,yj,bj,vj]=["ReadableStream","Request","Response","Headers"].map(Fn),wj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dd(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,l;if(typeof t!="object"&&(t=[t]),Ac(t))for(n=0,l=t.length;n<l;n++)a.call(null,t[n],n,t);else{if(od(t))return;const d=r?Object.getOwnPropertyNames(t):Object.keys(t),f=d.length;let h;for(n=0;n<f;n++)h=d[n],a.call(null,t[h],h,t)}}function Cv(t,a){if(od(t))return null;a=a.toLowerCase();const r=Object.keys(t);let n=r.length,l;for(;n-- >0;)if(l=r[n],a===l.toLowerCase())return l;return null}const io=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ev=t=>!G0(t)&&t!==io;function km(){const{caseless:t}=Ev(this)&&this||{},a={},r=(n,l)=>{const d=t&&Cv(a,l)||l;Uu(a[d])&&Uu(n)?a[d]=km(a[d],n):Uu(n)?a[d]=km({},n):Ac(n)?a[d]=n.slice():a[d]=n};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&dd(arguments[n],r);return a}const Nj=(t,a,r,{allOwnKeys:n}={})=>(dd(a,(l,d)=>{r&&Rs(l)?t[d]=wv(l,r):t[d]=l},{allOwnKeys:n}),t),kj=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),jj=(t,a,r,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},Cj=(t,a,r,n)=>{let l,d,f;const h={};if(a=a||{},t==null)return a;do{for(l=Object.getOwnPropertyNames(t),d=l.length;d-- >0;)f=l[d],(!n||n(f,t,a))&&!h[f]&&(a[f]=t[f],h[f]=!0);t=r!==!1&&rg(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},Ej=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const n=t.indexOf(a,r);return n!==-1&&n===r},Sj=t=>{if(!t)return null;if(Ac(t))return t;let a=t.length;if(!jv(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},Aj=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&rg(Uint8Array)),_j=(t,a)=>{const n=(t&&t[pf]).call(t);let l;for(;(l=n.next())&&!l.done;){const d=l.value;a.call(t,d[0],d[1])}},Tj=(t,a)=>{let r;const n=[];for(;(r=t.exec(a))!==null;)n.push(r);return n},Dj=Fn("HTMLFormElement"),Rj=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,l){return n.toUpperCase()+l}),Gy=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),Mj=Fn("RegExp"),Sv=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),n={};dd(r,(l,d)=>{let f;(f=a(l,d,t))!==!1&&(n[d]=f||l)}),Object.defineProperties(t,n)},Ij=t=>{Sv(t,(a,r)=>{if(Rs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Rs(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Oj=(t,a)=>{const r={},n=l=>{l.forEach(d=>{r[d]=!0})};return Ac(t)?n(t):n(String(t).split(a)),r},Fj=()=>{},Bj=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function Lj(t){return!!(t&&Rs(t.append)&&t[Nv]==="FormData"&&t[pf])}const Pj=t=>{const a=new Array(10),r=(n,l)=>{if(cd(n)){if(a.indexOf(n)>=0)return;if(od(n))return n;if(!("toJSON"in n)){a[l]=n;const d=Ac(n)?[]:{};return dd(n,(f,h)=>{const b=r(f,l+1);!G0(b)&&(d[h]=b)}),a[l]=void 0,d}}return n};return r(t,0)},zj=Fn("AsyncFunction"),Uj=t=>t&&(cd(t)||Rs(t))&&Rs(t.then)&&Rs(t.catch),Av=((t,a)=>t?setImmediate:a?((r,n)=>(io.addEventListener("message",({source:l,data:d})=>{l===io&&d===r&&n.length&&n.shift()()},!1),l=>{n.push(l),io.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rs(io.postMessage)),Hj=typeof queueMicrotask<"u"?queueMicrotask.bind(io):typeof process<"u"&&process.nextTick||Av,Vj=t=>t!=null&&Rs(t[pf]),tt={isArray:Ac,isArrayBuffer:kv,isBuffer:od,isFormData:mj,isArrayBufferView:ij,isString:lj,isNumber:jv,isBoolean:oj,isObject:cd,isPlainObject:Uu,isEmptyObject:cj,isReadableStream:pj,isRequest:yj,isResponse:bj,isHeaders:vj,isUndefined:G0,isDate:dj,isFile:uj,isBlob:fj,isRegExp:Mj,isFunction:Rs,isStream:hj,isURLSearchParams:gj,isTypedArray:Aj,isFileList:xj,forEach:dd,merge:km,extend:Nj,trim:wj,stripBOM:kj,inherits:jj,toFlatObject:Cj,kindOf:yf,kindOfTest:Fn,endsWith:Ej,toArray:Sj,forEachEntry:_j,matchAll:Tj,isHTMLForm:Dj,hasOwnProperty:Gy,hasOwnProp:Gy,reduceDescriptors:Sv,freezeMethods:Ij,toObjectSet:Oj,toCamelCase:Rj,noop:Fj,toFiniteNumber:Bj,findKey:Cv,global:io,isContextDefined:Ev,isSpecCompliantForm:Lj,toJSONObject:Pj,isAsyncFn:zj,isThenable:Uj,setImmediate:Av,asap:Hj,isIterable:Vj};function rr(t,a,r,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),n&&(this.request=n),l&&(this.response=l,this.status=l.status?l.status:null)}tt.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:tt.toJSONObject(this.config),code:this.code,status:this.status}}});const _v=rr.prototype,Tv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tv[t]={value:t}});Object.defineProperties(rr,Tv);Object.defineProperty(_v,"isAxiosError",{value:!0});rr.from=(t,a,r,n,l,d)=>{const f=Object.create(_v);return tt.toFlatObject(t,f,function(b){return b!==Error.prototype},h=>h!=="isAxiosError"),rr.call(f,t.message,a,r,n,l),f.cause=t,f.name=t.name,d&&Object.assign(f,d),f};const Gj=null;function jm(t){return tt.isPlainObject(t)||tt.isArray(t)}function Dv(t){return tt.endsWith(t,"[]")?t.slice(0,-2):t}function Yy(t,a,r){return t?t.concat(a).map(function(l,d){return l=Dv(l),!r&&d?"["+l+"]":l}).join(r?".":""):a}function Yj(t){return tt.isArray(t)&&!t.some(jm)}const Xj=tt.toFlatObject(tt,{},null,function(a){return/^is[A-Z]/.test(a)});function vf(t,a,r){if(!tt.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=tt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,M){return!tt.isUndefined(M[A])});const n=r.metaTokens,l=r.visitor||w,d=r.dots,f=r.indexes,b=(r.Blob||typeof Blob<"u"&&Blob)&&tt.isSpecCompliantForm(a);if(!tt.isFunction(l))throw new TypeError("visitor must be a function");function g(D){if(D===null)return"";if(tt.isDate(D))return D.toISOString();if(tt.isBoolean(D))return D.toString();if(!b&&tt.isBlob(D))throw new rr("Blob is not supported. Use a Buffer instead.");return tt.isArrayBuffer(D)||tt.isTypedArray(D)?b&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function w(D,A,M){let I=D;if(D&&!M&&typeof D=="object"){if(tt.endsWith(A,"{}"))A=n?A:A.slice(0,-2),D=JSON.stringify(D);else if(tt.isArray(D)&&Yj(D)||(tt.isFileList(D)||tt.endsWith(A,"[]"))&&(I=tt.toArray(D)))return A=Dv(A),I.forEach(function(T,B){!(tt.isUndefined(T)||T===null)&&a.append(f===!0?Yy([A],B,d):f===null?A:A+"[]",g(T))}),!1}return jm(D)?!0:(a.append(Yy(M,A,d),g(D)),!1)}const k=[],C=Object.assign(Xj,{defaultVisitor:w,convertValue:g,isVisitable:jm});function S(D,A){if(!tt.isUndefined(D)){if(k.indexOf(D)!==-1)throw Error("Circular reference detected in "+A.join("."));k.push(D),tt.forEach(D,function(I,F){(!(tt.isUndefined(I)||I===null)&&l.call(a,I,tt.isString(F)?F.trim():F,A,C))===!0&&S(I,A?A.concat(F):[F])}),k.pop()}}if(!tt.isObject(t))throw new TypeError("data must be an object");return S(t),a}function Xy(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function ag(t,a){this._pairs=[],t&&vf(t,this,a)}const Rv=ag.prototype;Rv.append=function(a,r){this._pairs.push([a,r])};Rv.toString=function(a){const r=a?function(n){return a.call(this,n,Xy)}:Xy;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function qj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mv(t,a,r){if(!a)return t;const n=r&&r.encode||qj;tt.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let d;if(l?d=l(a,r):d=tt.isURLSearchParams(a)?a.toString():new ag(a,r).toString(n),d){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class qy{constructor(){this.handlers=[]}use(a,r,n){return this.handlers.push({fulfilled:a,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){tt.forEach(this.handlers,function(n){n!==null&&a(n)})}}const Iv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},$j=typeof URLSearchParams<"u"?URLSearchParams:ag,Wj=typeof FormData<"u"?FormData:null,Kj=typeof Blob<"u"?Blob:null,Zj={isBrowser:!0,classes:{URLSearchParams:$j,FormData:Wj,Blob:Kj},protocols:["http","https","file","blob","url","data"]},sg=typeof window<"u"&&typeof document<"u",Cm=typeof navigator=="object"&&navigator||void 0,Qj=sg&&(!Cm||["ReactNative","NativeScript","NS"].indexOf(Cm.product)<0),Jj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",e6=sg&&window.location.href||"http://localhost",t6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:sg,hasStandardBrowserEnv:Qj,hasStandardBrowserWebWorkerEnv:Jj,navigator:Cm,origin:e6},Symbol.toStringTag,{value:"Module"})),os={...t6,...Zj};function r6(t,a){return vf(t,new os.classes.URLSearchParams,{visitor:function(r,n,l,d){return os.isNode&&tt.isBuffer(r)?(this.append(n,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function a6(t){return tt.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function s6(t){const a={},r=Object.keys(t);let n;const l=r.length;let d;for(n=0;n<l;n++)d=r[n],a[d]=t[d];return a}function Ov(t){function a(r,n,l,d){let f=r[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),b=d>=r.length;return f=!f&&tt.isArray(l)?l.length:f,b?(tt.hasOwnProp(l,f)?l[f]=[l[f],n]:l[f]=n,!h):((!l[f]||!tt.isObject(l[f]))&&(l[f]=[]),a(r,n,l[f],d)&&tt.isArray(l[f])&&(l[f]=s6(l[f])),!h)}if(tt.isFormData(t)&&tt.isFunction(t.entries)){const r={};return tt.forEachEntry(t,(n,l)=>{a(a6(n),l,r,0)}),r}return null}function n6(t,a,r){if(tt.isString(t))try{return(a||JSON.parse)(t),tt.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const ud={transitional:Iv,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const n=r.getContentType()||"",l=n.indexOf("application/json")>-1,d=tt.isObject(a);if(d&&tt.isHTMLForm(a)&&(a=new FormData(a)),tt.isFormData(a))return l?JSON.stringify(Ov(a)):a;if(tt.isArrayBuffer(a)||tt.isBuffer(a)||tt.isStream(a)||tt.isFile(a)||tt.isBlob(a)||tt.isReadableStream(a))return a;if(tt.isArrayBufferView(a))return a.buffer;if(tt.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(n.indexOf("application/x-www-form-urlencoded")>-1)return r6(a,this.formSerializer).toString();if((h=tt.isFileList(a))||n.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return vf(h?{"files[]":a}:a,b&&new b,this.formSerializer)}}return d||l?(r.setContentType("application/json",!1),n6(a)):a}],transformResponse:[function(a){const r=this.transitional||ud.transitional,n=r&&r.forcedJSONParsing,l=this.responseType==="json";if(tt.isResponse(a)||tt.isReadableStream(a))return a;if(a&&tt.isString(a)&&(n&&!this.responseType||l)){const f=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(a)}catch(h){if(f)throw h.name==="SyntaxError"?rr.from(h,rr.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:os.classes.FormData,Blob:os.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};tt.forEach(["delete","get","head","post","put","patch"],t=>{ud.headers[t]={}});const i6=tt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),l6=t=>{const a={};let r,n,l;return t&&t.split(`
`).forEach(function(f){l=f.indexOf(":"),r=f.substring(0,l).trim().toLowerCase(),n=f.substring(l+1).trim(),!(!r||a[r]&&i6[r])&&(r==="set-cookie"?a[r]?a[r].push(n):a[r]=[n]:a[r]=a[r]?a[r]+", "+n:n)}),a},$y=Symbol("internals");function S0(t){return t&&String(t).trim().toLowerCase()}function Hu(t){return t===!1||t==null?t:tt.isArray(t)?t.map(Hu):String(t)}function o6(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)a[n[1]]=n[2];return a}const c6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Oh(t,a,r,n,l){if(tt.isFunction(n))return n.call(this,a,r);if(l&&(a=r),!!tt.isString(a)){if(tt.isString(n))return a.indexOf(n)!==-1;if(tt.isRegExp(n))return n.test(a)}}function d6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,n)=>r.toUpperCase()+n)}function u6(t,a){const r=tt.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(l,d,f){return this[n].call(this,a,l,d,f)},configurable:!0})})}let Ms=class{constructor(a){a&&this.set(a)}set(a,r,n){const l=this;function d(h,b,g){const w=S0(b);if(!w)throw new Error("header name must be a non-empty string");const k=tt.findKey(l,w);(!k||l[k]===void 0||g===!0||g===void 0&&l[k]!==!1)&&(l[k||b]=Hu(h))}const f=(h,b)=>tt.forEach(h,(g,w)=>d(g,w,b));if(tt.isPlainObject(a)||a instanceof this.constructor)f(a,r);else if(tt.isString(a)&&(a=a.trim())&&!c6(a))f(l6(a),r);else if(tt.isObject(a)&&tt.isIterable(a)){let h={},b,g;for(const w of a){if(!tt.isArray(w))throw TypeError("Object iterator must return a key-value pair");h[g=w[0]]=(b=h[g])?tt.isArray(b)?[...b,w[1]]:[b,w[1]]:w[1]}f(h,r)}else a!=null&&d(r,a,n);return this}get(a,r){if(a=S0(a),a){const n=tt.findKey(this,a);if(n){const l=this[n];if(!r)return l;if(r===!0)return o6(l);if(tt.isFunction(r))return r.call(this,l,n);if(tt.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=S0(a),a){const n=tt.findKey(this,a);return!!(n&&this[n]!==void 0&&(!r||Oh(this,this[n],n,r)))}return!1}delete(a,r){const n=this;let l=!1;function d(f){if(f=S0(f),f){const h=tt.findKey(n,f);h&&(!r||Oh(n,n[h],h,r))&&(delete n[h],l=!0)}}return tt.isArray(a)?a.forEach(d):d(a),l}clear(a){const r=Object.keys(this);let n=r.length,l=!1;for(;n--;){const d=r[n];(!a||Oh(this,this[d],d,a,!0))&&(delete this[d],l=!0)}return l}normalize(a){const r=this,n={};return tt.forEach(this,(l,d)=>{const f=tt.findKey(n,d);if(f){r[f]=Hu(l),delete r[d];return}const h=a?d6(d):String(d).trim();h!==d&&delete r[d],r[h]=Hu(l),n[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return tt.forEach(this,(n,l)=>{n!=null&&n!==!1&&(r[l]=a&&tt.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const n=new this(a);return r.forEach(l=>n.set(l)),n}static accessor(a){const n=(this[$y]=this[$y]={accessors:{}}).accessors,l=this.prototype;function d(f){const h=S0(f);n[h]||(u6(l,f),n[h]=!0)}return tt.isArray(a)?a.forEach(d):d(a),this}};Ms.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);tt.reduceDescriptors(Ms.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[r]=n}}});tt.freezeMethods(Ms);function Fh(t,a){const r=this||ud,n=a||r,l=Ms.from(n.headers);let d=n.data;return tt.forEach(t,function(h){d=h.call(r,d,l.normalize(),a?a.status:void 0)}),l.normalize(),d}function Fv(t){return!!(t&&t.__CANCEL__)}function _c(t,a,r){rr.call(this,t??"canceled",rr.ERR_CANCELED,a,r),this.name="CanceledError"}tt.inherits(_c,rr,{__CANCEL__:!0});function Bv(t,a,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):a(new rr("Request failed with status code "+r.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function f6(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function x6(t,a){t=t||10;const r=new Array(t),n=new Array(t);let l=0,d=0,f;return a=a!==void 0?a:1e3,function(b){const g=Date.now(),w=n[d];f||(f=g),r[l]=b,n[l]=g;let k=d,C=0;for(;k!==l;)C+=r[k++],k=k%t;if(l=(l+1)%t,l===d&&(d=(d+1)%t),g-f<a)return;const S=w&&g-w;return S?Math.round(C*1e3/S):void 0}}function h6(t,a){let r=0,n=1e3/a,l,d;const f=(g,w=Date.now())=>{r=w,l=null,d&&(clearTimeout(d),d=null),t(...g)};return[(...g)=>{const w=Date.now(),k=w-r;k>=n?f(g,w):(l=g,d||(d=setTimeout(()=>{d=null,f(l)},n-k)))},()=>l&&f(l)]}const Xu=(t,a,r=3)=>{let n=0;const l=x6(50,250);return h6(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,b=f-n,g=l(b),w=f<=h;n=f;const k={loaded:f,total:h,progress:h?f/h:void 0,bytes:b,rate:g||void 0,estimated:g&&h&&w?(h-f)/g:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};t(k)},r)},Wy=(t,a)=>{const r=t!=null;return[n=>a[0]({lengthComputable:r,total:t,loaded:n}),a[1]]},Ky=t=>(...a)=>tt.asap(()=>t(...a)),m6=os.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,os.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(os.origin),os.navigator&&/(msie|trident)/i.test(os.navigator.userAgent)):()=>!0,g6=os.hasStandardBrowserEnv?{write(t,a,r,n,l,d){const f=[t+"="+encodeURIComponent(a)];tt.isNumber(r)&&f.push("expires="+new Date(r).toGMTString()),tt.isString(n)&&f.push("path="+n),tt.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function p6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function y6(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function Lv(t,a,r){let n=!p6(a);return t&&(n||r==!1)?y6(t,a):a}const Zy=t=>t instanceof Ms?{...t}:t;function xo(t,a){a=a||{};const r={};function n(g,w,k,C){return tt.isPlainObject(g)&&tt.isPlainObject(w)?tt.merge.call({caseless:C},g,w):tt.isPlainObject(w)?tt.merge({},w):tt.isArray(w)?w.slice():w}function l(g,w,k,C){if(tt.isUndefined(w)){if(!tt.isUndefined(g))return n(void 0,g,k,C)}else return n(g,w,k,C)}function d(g,w){if(!tt.isUndefined(w))return n(void 0,w)}function f(g,w){if(tt.isUndefined(w)){if(!tt.isUndefined(g))return n(void 0,g)}else return n(void 0,w)}function h(g,w,k){if(k in a)return n(g,w);if(k in t)return n(void 0,g)}const b={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(g,w,k)=>l(Zy(g),Zy(w),k,!0)};return tt.forEach(Object.keys({...t,...a}),function(w){const k=b[w]||l,C=k(t[w],a[w],w);tt.isUndefined(C)&&k!==h||(r[w]=C)}),r}const Pv=t=>{const a=xo({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:d,headers:f,auth:h}=a;a.headers=f=Ms.from(f),a.url=Mv(Lv(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let b;if(tt.isFormData(r)){if(os.hasStandardBrowserEnv||os.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((b=f.getContentType())!==!1){const[g,...w]=b?b.split(";").map(k=>k.trim()).filter(Boolean):[];f.setContentType([g||"multipart/form-data",...w].join("; "))}}if(os.hasStandardBrowserEnv&&(n&&tt.isFunction(n)&&(n=n(a)),n||n!==!1&&m6(a.url))){const g=l&&d&&g6.read(d);g&&f.set(l,g)}return a},b6=typeof XMLHttpRequest<"u",v6=b6&&function(t){return new Promise(function(r,n){const l=Pv(t);let d=l.data;const f=Ms.from(l.headers).normalize();let{responseType:h,onUploadProgress:b,onDownloadProgress:g}=l,w,k,C,S,D;function A(){S&&S(),D&&D(),l.cancelToken&&l.cancelToken.unsubscribe(w),l.signal&&l.signal.removeEventListener("abort",w)}let M=new XMLHttpRequest;M.open(l.method.toUpperCase(),l.url,!0),M.timeout=l.timeout;function I(){if(!M)return;const T=Ms.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),H={data:!h||h==="text"||h==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:T,config:t,request:M};Bv(function(L){r(L),A()},function(L){n(L),A()},H),M=null}"onloadend"in M?M.onloadend=I:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(I)},M.onabort=function(){M&&(n(new rr("Request aborted",rr.ECONNABORTED,t,M)),M=null)},M.onerror=function(){n(new rr("Network Error",rr.ERR_NETWORK,t,M)),M=null},M.ontimeout=function(){let B=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const H=l.transitional||Iv;l.timeoutErrorMessage&&(B=l.timeoutErrorMessage),n(new rr(B,H.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,t,M)),M=null},d===void 0&&f.setContentType(null),"setRequestHeader"in M&&tt.forEach(f.toJSON(),function(B,H){M.setRequestHeader(H,B)}),tt.isUndefined(l.withCredentials)||(M.withCredentials=!!l.withCredentials),h&&h!=="json"&&(M.responseType=l.responseType),g&&([C,D]=Xu(g,!0),M.addEventListener("progress",C)),b&&M.upload&&([k,S]=Xu(b),M.upload.addEventListener("progress",k),M.upload.addEventListener("loadend",S)),(l.cancelToken||l.signal)&&(w=T=>{M&&(n(!T||T.type?new _c(null,t,M):T),M.abort(),M=null)},l.cancelToken&&l.cancelToken.subscribe(w),l.signal&&(l.signal.aborted?w():l.signal.addEventListener("abort",w)));const F=f6(l.url);if(F&&os.protocols.indexOf(F)===-1){n(new rr("Unsupported protocol "+F+":",rr.ERR_BAD_REQUEST,t));return}M.send(d||null)})},w6=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let n=new AbortController,l;const d=function(g){if(!l){l=!0,h();const w=g instanceof Error?g:this.reason;n.abort(w instanceof rr?w:new _c(w instanceof Error?w.message:w))}};let f=a&&setTimeout(()=>{f=null,d(new rr(`timeout ${a} of ms exceeded`,rr.ETIMEDOUT))},a);const h=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(d):g.removeEventListener("abort",d)}),t=null)};t.forEach(g=>g.addEventListener("abort",d));const{signal:b}=n;return b.unsubscribe=()=>tt.asap(h),b}},N6=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let n=0,l;for(;n<r;)l=n+a,yield t.slice(n,l),n=l},k6=async function*(t,a){for await(const r of j6(t))yield*N6(r,a)},j6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:n}=await a.read();if(r)break;yield n}}finally{await a.cancel()}},Qy=(t,a,r,n)=>{const l=k6(t,a);let d=0,f,h=b=>{f||(f=!0,n&&n(b))};return new ReadableStream({async pull(b){try{const{done:g,value:w}=await l.next();if(g){h(),b.close();return}let k=w.byteLength;if(r){let C=d+=k;r(C)}b.enqueue(new Uint8Array(w))}catch(g){throw h(g),g}},cancel(b){return h(b),l.return()}},{highWaterMark:2})},wf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zv=wf&&typeof ReadableStream=="function",C6=wf&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Uv=(t,...a)=>{try{return!!t(...a)}catch{return!1}},E6=zv&&Uv(()=>{let t=!1;const a=new Request(os.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),Jy=64*1024,Em=zv&&Uv(()=>tt.isReadableStream(new Response("").body)),qu={stream:Em&&(t=>t.body)};wf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!qu[a]&&(qu[a]=tt.isFunction(t[a])?r=>r[a]():(r,n)=>{throw new rr(`Response type '${a}' is not supported`,rr.ERR_NOT_SUPPORT,n)})})})(new Response);const S6=async t=>{if(t==null)return 0;if(tt.isBlob(t))return t.size;if(tt.isSpecCompliantForm(t))return(await new Request(os.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(tt.isArrayBufferView(t)||tt.isArrayBuffer(t))return t.byteLength;if(tt.isURLSearchParams(t)&&(t=t+""),tt.isString(t))return(await C6(t)).byteLength},A6=async(t,a)=>{const r=tt.toFiniteNumber(t.getContentLength());return r??S6(a)},_6=wf&&(async t=>{let{url:a,method:r,data:n,signal:l,cancelToken:d,timeout:f,onDownloadProgress:h,onUploadProgress:b,responseType:g,headers:w,withCredentials:k="same-origin",fetchOptions:C}=Pv(t);g=g?(g+"").toLowerCase():"text";let S=w6([l,d&&d.toAbortSignal()],f),D;const A=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let M;try{if(b&&E6&&r!=="get"&&r!=="head"&&(M=await A6(w,n))!==0){let H=new Request(a,{method:"POST",body:n,duplex:"half"}),U;if(tt.isFormData(n)&&(U=H.headers.get("content-type"))&&w.setContentType(U),H.body){const[L,P]=Wy(M,Xu(Ky(b)));n=Qy(H.body,Jy,L,P)}}tt.isString(k)||(k=k?"include":"omit");const I="credentials"in Request.prototype;D=new Request(a,{...C,signal:S,method:r.toUpperCase(),headers:w.normalize().toJSON(),body:n,duplex:"half",credentials:I?k:void 0});let F=await fetch(D,C);const T=Em&&(g==="stream"||g==="response");if(Em&&(h||T&&A)){const H={};["status","statusText","headers"].forEach(z=>{H[z]=F[z]});const U=tt.toFiniteNumber(F.headers.get("content-length")),[L,P]=h&&Wy(U,Xu(Ky(h),!0))||[];F=new Response(Qy(F.body,Jy,L,()=>{P&&P(),A&&A()}),H)}g=g||"text";let B=await qu[tt.findKey(qu,g)||"text"](F,t);return!T&&A&&A(),await new Promise((H,U)=>{Bv(H,U,{data:B,headers:Ms.from(F.headers),status:F.status,statusText:F.statusText,config:t,request:D})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new rr("Network Error",rr.ERR_NETWORK,t,D),{cause:I.cause||I}):rr.from(I,I&&I.code,t,D)}}),Sm={http:Gj,xhr:v6,fetch:_6};tt.forEach(Sm,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const eb=t=>`- ${t}`,T6=t=>tt.isFunction(t)||t===null||t===!1,Hv={getAdapter:t=>{t=tt.isArray(t)?t:[t];const{length:a}=t;let r,n;const l={};for(let d=0;d<a;d++){r=t[d];let f;if(n=r,!T6(r)&&(n=Sm[(f=String(r)).toLowerCase()],n===void 0))throw new rr(`Unknown adapter '${f}'`);if(n)break;l[f||"#"+d]=n}if(!n){const d=Object.entries(l).map(([h,b])=>`adapter ${h} `+(b===!1?"is not supported by the environment":"is not available in the build"));let f=a?d.length>1?`since :
`+d.map(eb).join(`
`):" "+eb(d[0]):"as no adapter specified";throw new rr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return n},adapters:Sm};function Bh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new _c(null,t)}function tb(t){return Bh(t),t.headers=Ms.from(t.headers),t.data=Fh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Hv.getAdapter(t.adapter||ud.adapter)(t).then(function(n){return Bh(t),n.data=Fh.call(t,t.transformResponse,n),n.headers=Ms.from(n.headers),n},function(n){return Fv(n)||(Bh(t),n&&n.response&&(n.response.data=Fh.call(t,t.transformResponse,n.response),n.response.headers=Ms.from(n.response.headers))),Promise.reject(n)})}const Vv="1.11.0",Nf={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{Nf[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});const rb={};Nf.transitional=function(a,r,n){function l(d,f){return"[Axios v"+Vv+"] Transitional option '"+d+"'"+f+(n?". "+n:"")}return(d,f,h)=>{if(a===!1)throw new rr(l(f," has been removed"+(r?" in "+r:"")),rr.ERR_DEPRECATED);return r&&!rb[f]&&(rb[f]=!0,console.warn(l(f," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(d,f,h):!0}};Nf.spelling=function(a){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${a}`),!0)};function D6(t,a,r){if(typeof t!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let l=n.length;for(;l-- >0;){const d=n[l],f=a[d];if(f){const h=t[d],b=h===void 0||f(h,d,t);if(b!==!0)throw new rr("option "+d+" must be "+b,rr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new rr("Unknown option "+d,rr.ERR_BAD_OPTION)}}const Vu={assertOptions:D6,validators:Nf},ei=Vu.validators;let oo=class{constructor(a){this.defaults=a||{},this.interceptors={request:new qy,response:new qy}}async request(a,r){try{return await this._request(a,r)}catch(n){if(n instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{n.stack?d&&!String(n.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+d):n.stack=d}catch{}}throw n}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=xo(this.defaults,r);const{transitional:n,paramsSerializer:l,headers:d}=r;n!==void 0&&Vu.assertOptions(n,{silentJSONParsing:ei.transitional(ei.boolean),forcedJSONParsing:ei.transitional(ei.boolean),clarifyTimeoutError:ei.transitional(ei.boolean)},!1),l!=null&&(tt.isFunction(l)?r.paramsSerializer={serialize:l}:Vu.assertOptions(l,{encode:ei.function,serialize:ei.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Vu.assertOptions(r,{baseUrl:ei.spelling("baseURL"),withXsrfToken:ei.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let f=d&&tt.merge(d.common,d[r.method]);d&&tt.forEach(["delete","get","head","post","put","patch","common"],D=>{delete d[D]}),r.headers=Ms.concat(f,d);const h=[];let b=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(r)===!1||(b=b&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const g=[];this.interceptors.response.forEach(function(A){g.push(A.fulfilled,A.rejected)});let w,k=0,C;if(!b){const D=[tb.bind(this),void 0];for(D.unshift(...h),D.push(...g),C=D.length,w=Promise.resolve(r);k<C;)w=w.then(D[k++],D[k++]);return w}C=h.length;let S=r;for(k=0;k<C;){const D=h[k++],A=h[k++];try{S=D(S)}catch(M){A.call(this,M);break}}try{w=tb.call(this,S)}catch(D){return Promise.reject(D)}for(k=0,C=g.length;k<C;)w=w.then(g[k++],g[k++]);return w}getUri(a){a=xo(this.defaults,a);const r=Lv(a.baseURL,a.url,a.allowAbsoluteUrls);return Mv(r,a.params,a.paramsSerializer)}};tt.forEach(["delete","get","head","options"],function(a){oo.prototype[a]=function(r,n){return this.request(xo(n||{},{method:a,url:r,data:(n||{}).data}))}});tt.forEach(["post","put","patch"],function(a){function r(n){return function(d,f,h){return this.request(xo(h||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}oo.prototype[a]=r(),oo.prototype[a+"Form"]=r(!0)});let R6=class Gv{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const n=this;this.promise.then(l=>{if(!n._listeners)return;let d=n._listeners.length;for(;d-- >0;)n._listeners[d](l);n._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(h=>{n.subscribe(h),d=h}).then(l);return f.cancel=function(){n.unsubscribe(d)},f},a(function(d,f,h){n.reason||(n.reason=new _c(d,f,h),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=n=>{a.abort(n)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new Gv(function(l){a=l}),cancel:a}}};function M6(t){return function(r){return t.apply(null,r)}}function I6(t){return tt.isObject(t)&&t.isAxiosError===!0}const Am={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Am).forEach(([t,a])=>{Am[a]=t});function Yv(t){const a=new oo(t),r=wv(oo.prototype.request,a);return tt.extend(r,oo.prototype,a,{allOwnKeys:!0}),tt.extend(r,a,null,{allOwnKeys:!0}),r.create=function(l){return Yv(xo(t,l))},r}const ia=Yv(ud);ia.Axios=oo;ia.CanceledError=_c;ia.CancelToken=R6;ia.isCancel=Fv;ia.VERSION=Vv;ia.toFormData=vf;ia.AxiosError=rr;ia.Cancel=ia.CanceledError;ia.all=function(a){return Promise.all(a)};ia.spread=M6;ia.isAxiosError=I6;ia.mergeConfig=xo;ia.AxiosHeaders=Ms;ia.formToJSON=t=>Ov(tt.isHTMLForm(t)?new FormData(t):t);ia.getAdapter=Hv.getAdapter;ia.HttpStatusCode=Am;ia.default=ia;const{Axios:rO,AxiosError:aO,CanceledError:sO,isCancel:nO,CancelToken:iO,VERSION:lO,all:oO,Cancel:cO,isAxiosError:dO,spread:uO,toFormData:fO,AxiosHeaders:xO,HttpStatusCode:hO,formToJSON:mO,getAdapter:gO,mergeConfig:pO}=ia,Te=ia.create({baseURL:"https://apmt.apivcm.shop/api",withCredentials:!0});let Lh=!1,_m=[];const ab=(t,a=null)=>{_m.forEach(r=>{t?r.reject(t):r.resolve(a)}),_m=[]};Te.interceptors.request.use(t=>{const a=["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries","/auth/verify","/auth/resend","/auth/forgot-password-unified","/auth/reset-password-unified","/auth/check-reset-token","/auth/verify-invite-link","/auth/complete-registration"],r=t.url||"";if(a.some(l=>r?r.includes(l)||t.baseURL&&(t.baseURL+r).includes(l):!1))return t.withCredentials=!1,t.headers&&t.headers.Authorization&&delete t.headers.Authorization,t;try{const l=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");l&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${l}`),t.withCredentials=!0}catch{}return t},t=>Promise.reject(t));Te.interceptors.response.use(t=>t,async t=>{const a=t.config,r=a.url||"";if(["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries"].some(d=>r.includes(d)))return Promise.reject(t);if(t.response&&t.response.status===401&&!a._retry){if(a._retry=!0,Lh)return new Promise((d,f)=>{_m.push({resolve:d,reject:f})}).then(d=>(a.headers.Authorization=`Bearer ${d}`,Te(a))).catch(d=>Promise.reject(d));Lh=!0;try{const d=await ia.post("https://apmt.apivcm.shop/api/auth/refresh",{},{withCredentials:!0,validateStatus:f=>f<500});if(d.status===200&&d.data?.accessToken){const f=d.data.accessToken;return localStorage.setItem("accessToken",f),sessionStorage.setItem("accessToken",f),Te.defaults.headers.common.Authorization=`Bearer ${f}`,a.headers.Authorization=`Bearer ${f}`,ab(null,f),Te(a)}else throw new Error("Refresh failed")}catch(d){return console.log("Token refresh failed, clearing tokens"),localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),delete Te.defaults.headers.common.Authorization,ab(d,null),typeof window<"u"&&(window.location.href="/login?session=expired"),Promise.reject(d)}finally{Lh=!1}}return t.response&&t.response.status===429&&console.error("Rate limited. Please wait before trying again."),Promise.reject(t)});const Or=E.createContext(null);function O6({children:t}){const[a,r]=E.useState(()=>{const C=localStorage.getItem("houseOwnerToken"),S=localStorage.getItem("houseOwnerData"),D=localStorage.getItem("userType");if(C&&S&&D==="houseowner")return{accessToken:C,user:JSON.parse(S),userType:"houseowner"};const A=localStorage.getItem("auth");return A?{...JSON.parse(A),userType:localStorage.getItem("userType")||"admin"}:{accessToken:null,user:null,userType:null}}),n=hr(),l=E.useRef(null),d=600*1e3,f=E.useCallback(()=>{r({accessToken:null,user:null,userType:null}),localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("houseOwnerToken"),localStorage.removeItem("houseOwnerData"),localStorage.removeItem("lastActivity"),l.current&&clearTimeout(l.current),n("/login")},[n]),h=E.useCallback(()=>{l.current&&clearTimeout(l.current),localStorage.setItem("lastActivity",Date.now().toString()),l.current=setTimeout(()=>{f()},d)},[f,d]),b=E.useCallback(()=>{const C=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],S=()=>{h()};C.forEach(A=>{window.addEventListener(A,S,{passive:!0})});const D=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",D),()=>{C.forEach(A=>{window.removeEventListener(A,S)}),document.removeEventListener("visibilitychange",D),l.current&&clearTimeout(l.current)}},[h]);E.useEffect(()=>{if(a&&a.accessToken){const C=localStorage.getItem("lastActivity");if(C){const D=parseInt(C,10),A=Date.now()-D;if(A>d){f();return}const M=d-A;l.current=setTimeout(f,M)}else h();return b()}else l.current&&clearTimeout(l.current)},[a,h,b,f,d]);const g=E.useCallback(C=>{const S=C.user?.isHouseOwner?"houseowner":"admin",D={...C,userType:S};r(D),C&&C.accessToken?(S==="houseowner"?(localStorage.setItem("houseOwnerToken",C.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(C.user))):(localStorage.setItem("auth",JSON.stringify(C)),localStorage.setItem("accessToken",C.accessToken),localStorage.setItem("user",JSON.stringify(C.user))),localStorage.setItem("userType",S),h()):f()},[h,f]),w=E.useCallback(async()=>{try{a.userType==="houseowner"?await Te.post("/houseowner-auth/logout",{},{credentials:"include"}):await Te.post("/auth/logout",{},{credentials:"include"})}catch(C){console.error("Logout error:",C)}finally{f()}},[f,a.userType]),k={auth:a,setAuth:g,logout:w,resetActivityTimer:h};return e.jsx(Or.Provider,{value:k,children:t})}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),B6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,n)=>n?n.toUpperCase():r.toLowerCase()),sb=t=>{const a=B6(t);return a.charAt(0).toUpperCase()+a.slice(1)},Xv=(...t)=>t.filter((a,r,n)=>!!a&&a.trim()!==""&&n.indexOf(a)===r).join(" ").trim(),L6=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var P6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=E.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:d,iconNode:f,...h},b)=>E.createElement("svg",{ref:b,...P6,width:a,height:a,stroke:t,strokeWidth:n?Number(r)*24/Number(a):r,className:Xv("lucide",l),...!d&&!L6(h)&&{"aria-hidden":"true"},...h},[...f.map(([g,w])=>E.createElement(g,w)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,a)=>{const r=E.forwardRef(({className:n,...l},d)=>E.createElement(z6,{ref:d,iconNode:a,className:Xv(`lucide-${F6(sb(t))}`,`lucide-${t}`,n),...l}));return r.displayName=sb(t),r};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],nb=yt("arrow-big-right",U6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],wc=yt("arrow-left",H6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],G6=yt("arrow-right",V6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Au=yt("arrow-up-right",Y6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],q6=yt("award",X6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],W6=yt("banknote-arrow-down",$6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],Z6=yt("bath",K6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],J6=yt("bed",Q6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ph=yt("bell",eC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],$u=yt("briefcase",tC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Oa=yt("building-2",rC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Fi=yt("building",aC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],nC=yt("calendar-clock",sC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],_l=yt("calendar",iC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],qv=yt("camera",lC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Gu=yt("chart-no-axes-column-increasing",oC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hn=yt("check",cC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Tl=yt("chevron-down",dC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Mn=yt("chevron-left",uC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Y0=yt("chevron-right",fC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Nc=yt("chevron-up",xC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ma=yt("circle-alert",hC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ha=yt("circle-check-big",mC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],pC=yt("circle-play",gC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],bC=yt("circle-stop",yC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Wu=yt("circle-x",vC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],ib=yt("clipboard-list",wC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ks=yt("clock",NC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],ng=yt("credit-card",kC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Xs=yt("dollar-sign",jC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ml=yt("download",CC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],In=yt("eye-off",EC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qs=yt("eye",SC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],_C=yt("file-spreadsheet",AC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xr=yt("file-text",TC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kf=yt("funnel",DC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$v=yt("globe",RC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],IC=yt("hash",MC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Hr=yt("house",OC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Wv=yt("id-card",FC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Zs=yt("image",BC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],PC=yt("key",LC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z",key:"15q6uc"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845",key:"byia6g"}]],UC=yt("layers-2",zC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],jf=yt("layers",HC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],GC=yt("layout-dashboard",VC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Gt=yt("loader",YC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Tm=yt("log-out",XC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],ho=yt("mail",qC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mo=yt("map-pin",$C);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Tc=yt("menu",WC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Dm=yt("moon",KC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],QC=yt("palette",ZC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],eE=yt("pause",JC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],rE=yt("phone-call",tE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Dc=yt("phone",aE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Kv=yt("play",sE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Ca=yt("plus",nE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],X0=yt("qr-code",iE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ja=yt("receipt",lE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Rm=yt("refresh-cw",oE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Zv=yt("rotate-cw",cE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Cf=yt("save",dE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],js=yt("search",uE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Qv=yt("send",fE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ku=yt("settings",xE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],lb=yt("shield-check",hE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],kc=yt("shield",mE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],pE=yt("square-check-big",gE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Ea=yt("square-pen",yE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],q0=yt("square",bE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],wE=yt("star",vE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Mm=yt("sun",NE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Jv=yt("tag",kE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],ew=yt("timer",jE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],go=yt("toggle-left",CE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],po=yt("toggle-right",EE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Lr=yt("trash-2",SE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_E=yt("triangle-alert",AE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Is=yt("upload",TE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],RE=yt("user-check",DE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Zu=yt("user-plus",ME);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],us=yt("user",IE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ni=yt("users",OE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],ob=yt("workflow",FE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Qu=yt("wrench",BE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gr=yt("x",LE);function tw(t){var a,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(r=tw(t[a]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function co(){for(var t,a,r=0,n="",l=arguments.length;r<l;r++)(t=arguments[r])&&(a=tw(t))&&(n&&(n+=" "),n+=a);return n}function PE(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}PE(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var fd=t=>typeof t=="number"&&!isNaN(t),yo=t=>typeof t=="string",Bi=t=>typeof t=="function",zE=t=>yo(t)||fd(t),Im=t=>yo(t)||Bi(t)?t:null,UE=(t,a)=>t===!1||fd(t)&&t>0?t:a,Om=t=>E.isValidElement(t)||yo(t)||Bi(t)||fd(t);function HE(t,a,r=300){let{scrollHeight:n,style:l}=t;requestAnimationFrame(()=>{l.minHeight="initial",l.height=n+"px",l.transition=`all ${r}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(a,r)})})}function VE({enter:t,exit:a,appendPosition:r=!1,collapse:n=!0,collapseDuration:l=300}){return function({children:d,position:f,preventExitTransition:h,done:b,nodeRef:g,isIn:w,playToast:k}){let C=r?`${t}--${f}`:t,S=r?`${a}--${f}`:a,D=E.useRef(0);return E.useLayoutEffect(()=>{let A=g.current,M=C.split(" "),I=F=>{F.target===g.current&&(k(),A.removeEventListener("animationend",I),A.removeEventListener("animationcancel",I),D.current===0&&F.type!=="animationcancel"&&A.classList.remove(...M))};A.classList.add(...M),A.addEventListener("animationend",I),A.addEventListener("animationcancel",I)},[]),E.useEffect(()=>{let A=g.current,M=()=>{A.removeEventListener("animationend",M),n?HE(A,b,l):b()};w||(h?M():(D.current=1,A.className+=` ${S}`,A.addEventListener("animationend",M)))},[w]),Dr.createElement(Dr.Fragment,null,d)}}function cb(t,a){return{content:rw(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:a}}function rw(t,a,r=!1){return E.isValidElement(t)&&!yo(t.type)?E.cloneElement(t,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):Bi(t)?t({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):t}function GE({closeToast:t,theme:a,ariaLabel:r="close"}){return Dr.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:n=>{n.stopPropagation(),t(!0)},"aria-label":r},Dr.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Dr.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function YE({delay:t,isRunning:a,closeToast:r,type:n="default",hide:l,className:d,controlledProgress:f,progress:h,rtl:b,isIn:g,theme:w}){let k=l||f&&h===0,C={animationDuration:`${t}ms`,animationPlayState:a?"running":"paused"};f&&(C.transform=`scaleX(${h})`);let S=co("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${w}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":b}),D=Bi(d)?d({rtl:b,type:n,defaultClassName:S}):co(S,d),A={[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]:f&&h<1?null:()=>{g&&r()}};return Dr.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":k},Dr.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${w} Toastify__progress-bar--${n}`}),Dr.createElement("div",{role:"progressbar","aria-hidden":k?"true":"false","aria-label":"notification timer",className:D,style:C,...A}))}var XE=1,aw=()=>`${XE++}`;function qE(t,a,r){let n=1,l=0,d=[],f=[],h=a,b=new Map,g=new Set,w=F=>(g.add(F),()=>g.delete(F)),k=()=>{f=Array.from(b.values()),g.forEach(F=>F())},C=({containerId:F,toastId:T,updateId:B})=>{let H=F?F!==t:t!==1,U=b.has(T)&&B==null;return H||U},S=(F,T)=>{b.forEach(B=>{var H;(T==null||T===B.props.toastId)&&((H=B.toggle)==null||H.call(B,F))})},D=F=>{var T,B;(B=(T=F.props)==null?void 0:T.onClose)==null||B.call(T,F.removalReason),F.isActive=!1},A=F=>{if(F==null)b.forEach(D);else{let T=b.get(F);T&&D(T)}k()},M=()=>{l-=d.length,d=[]},I=F=>{var T,B;let{toastId:H,updateId:U}=F.props,L=U==null;F.staleId&&b.delete(F.staleId),F.isActive=!0,b.set(H,F),k(),r(cb(F,L?"added":"updated")),L&&((B=(T=F.props).onOpen)==null||B.call(T))};return{id:t,props:h,observe:w,toggle:S,removeToast:A,toasts:b,clearQueue:M,buildToast:(F,T)=>{if(C(T))return;let{toastId:B,updateId:H,data:U,staleId:L,delay:P}=T,z=H==null;z&&l++;let W={...h,style:h.toastStyle,key:n++,...Object.fromEntries(Object.entries(T).filter(([G,ne])=>ne!=null)),toastId:B,updateId:H,data:U,isIn:!1,className:Im(T.className||h.toastClassName),progressClassName:Im(T.progressClassName||h.progressClassName),autoClose:T.isLoading?!1:UE(T.autoClose,h.autoClose),closeToast(G){b.get(B).removalReason=G,A(B)},deleteToast(){let G=b.get(B);if(G!=null){if(r(cb(G,"removed")),b.delete(B),l--,l<0&&(l=0),d.length>0){I(d.shift());return}k()}}};W.closeButton=h.closeButton,T.closeButton===!1||Om(T.closeButton)?W.closeButton=T.closeButton:T.closeButton===!0&&(W.closeButton=Om(h.closeButton)?h.closeButton:!0);let ee={content:F,props:W,staleId:L};h.limit&&h.limit>0&&l>h.limit&&z?d.push(ee):fd(P)?setTimeout(()=>{I(ee)},P):I(ee)},setProps(F){h=F},setToggle:(F,T)=>{let B=b.get(F);B&&(B.toggle=T)},isToastActive:F=>{var T;return(T=b.get(F))==null?void 0:T.isActive},getSnapshot:()=>f}}var ws=new Map,$0=[],Fm=new Set,$E=t=>Fm.forEach(a=>a(t)),sw=()=>ws.size>0;function WE(){$0.forEach(t=>iw(t.content,t.options)),$0=[]}var KE=(t,{containerId:a})=>{var r;return(r=ws.get(a||1))==null?void 0:r.toasts.get(t)};function nw(t,a){var r;if(a)return!!((r=ws.get(a))!=null&&r.isToastActive(t));let n=!1;return ws.forEach(l=>{l.isToastActive(t)&&(n=!0)}),n}function ZE(t){if(!sw()){$0=$0.filter(a=>t!=null&&a.options.toastId!==t);return}if(t==null||zE(t))ws.forEach(a=>{a.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let a=ws.get(t.containerId);a?a.removeToast(t.id):ws.forEach(r=>{r.removeToast(t.id)})}}var QE=(t={})=>{ws.forEach(a=>{a.props.limit&&(!t.containerId||a.id===t.containerId)&&a.clearQueue()})};function iw(t,a){Om(t)&&(sw()||$0.push({content:t,options:a}),ws.forEach(r=>{r.buildToast(t,a)}))}function JE(t){var a;(a=ws.get(t.containerId||1))==null||a.setToggle(t.id,t.fn)}function lw(t,a){ws.forEach(r=>{(a==null||!(a!=null&&a.containerId)||a?.containerId===r.id)&&r.toggle(t,a?.id)})}function eS(t){let a=t.containerId||1;return{subscribe(r){let n=qE(a,t,$E);ws.set(a,n);let l=n.observe(r);return WE(),()=>{l(),ws.delete(a)}},setProps(r){var n;(n=ws.get(a))==null||n.setProps(r)},getSnapshot(){var r;return(r=ws.get(a))==null?void 0:r.getSnapshot()}}}function tS(t){return Fm.add(t),()=>{Fm.delete(t)}}function rS(t){return t&&(yo(t.toastId)||fd(t.toastId))?t.toastId:aw()}function xd(t,a){return iw(t,a),a.toastId}function Ef(t,a){return{...a,type:a&&a.type||t,toastId:rS(a)}}function Sf(t){return(a,r)=>xd(a,Ef(t,r))}function ie(t,a){return xd(t,Ef("default",a))}ie.loading=(t,a)=>xd(t,Ef("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function aS(t,{pending:a,error:r,success:n},l){let d;a&&(d=yo(a)?ie.loading(a,l):ie.loading(a.render,{...l,...a}));let f={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(g,w,k)=>{if(w==null){ie.dismiss(d);return}let C={type:g,...f,...l,data:k},S=yo(w)?{render:w}:w;return d?ie.update(d,{...C,...S}):ie(S.render,{...C,...S}),k},b=Bi(t)?t():t;return b.then(g=>h("success",n,g)).catch(g=>h("error",r,g)),b}ie.promise=aS;ie.success=Sf("success");ie.info=Sf("info");ie.error=Sf("error");ie.warning=Sf("warning");ie.warn=ie.warning;ie.dark=(t,a)=>xd(t,Ef("default",{theme:"dark",...a}));function sS(t){ZE(t)}ie.dismiss=sS;ie.clearWaitingQueue=QE;ie.isActive=nw;ie.update=(t,a={})=>{let r=KE(t,a);if(r){let{props:n,content:l}=r,d={delay:100,...n,...a,toastId:a.toastId||t,updateId:aw()};d.toastId!==t&&(d.staleId=t);let f=d.render||l;delete d.render,xd(f,d)}};ie.done=t=>{ie.update(t,{progress:1})};ie.onChange=tS;ie.play=t=>lw(!0,t);ie.pause=t=>lw(!1,t);function nS(t){var a;let{subscribe:r,getSnapshot:n,setProps:l}=E.useRef(eS(t)).current;l(t);let d=(a=E.useSyncExternalStore(r,n,n))==null?void 0:a.slice();function f(h){if(!d)return[];let b=new Map;return t.newestOnTop&&d.reverse(),d.forEach(g=>{let{position:w}=g.props;b.has(w)||b.set(w,[]),b.get(w).push(g)}),Array.from(b,g=>h(g[0],g[1]))}return{getToastToRender:f,isToastActive:nw,count:d?.length}}function iS(t){let[a,r]=E.useState(!1),[n,l]=E.useState(!1),d=E.useRef(null),f=E.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:b,closeToast:g,onClick:w,closeOnClick:k}=t;JE({id:t.toastId,containerId:t.containerId,fn:r}),E.useEffect(()=>{if(t.pauseOnFocusLoss)return C(),()=>{S()}},[t.pauseOnFocusLoss]);function C(){document.hasFocus()||I(),window.addEventListener("focus",M),window.addEventListener("blur",I)}function S(){window.removeEventListener("focus",M),window.removeEventListener("blur",I)}function D(L){if(t.draggable===!0||t.draggable===L.pointerType){F();let P=d.current;f.canCloseOnClick=!0,f.canDrag=!0,P.style.transition="none",t.draggableDirection==="x"?(f.start=L.clientX,f.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(f.start=L.clientY,f.removalDistance=P.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function A(L){let{top:P,bottom:z,left:W,right:ee}=d.current.getBoundingClientRect();L.nativeEvent.type!=="touchend"&&t.pauseOnHover&&L.clientX>=W&&L.clientX<=ee&&L.clientY>=P&&L.clientY<=z?I():M()}function M(){r(!0)}function I(){r(!1)}function F(){f.didMove=!1,document.addEventListener("pointermove",B),document.addEventListener("pointerup",H)}function T(){document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",H)}function B(L){let P=d.current;if(f.canDrag&&P){f.didMove=!0,a&&I(),t.draggableDirection==="x"?f.delta=L.clientX-f.start:f.delta=L.clientY-f.start,f.start!==L.clientX&&(f.canCloseOnClick=!1);let z=t.draggableDirection==="x"?`${f.delta}px, var(--y)`:`0, calc(${f.delta}px + var(--y))`;P.style.transform=`translate3d(${z},0)`,P.style.opacity=`${1-Math.abs(f.delta/f.removalDistance)}`}}function H(){T();let L=d.current;if(f.canDrag&&f.didMove&&L){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance){l(!0),t.closeToast(!0),t.collapseAll();return}L.style.transition="transform 0.2s, opacity 0.2s",L.style.removeProperty("transform"),L.style.removeProperty("opacity")}}let U={onPointerDown:D,onPointerUp:A};return h&&b&&(U.onMouseEnter=I,t.stacked||(U.onMouseLeave=M)),k&&(U.onClick=L=>{w&&w(L),f.canCloseOnClick&&g(!0)}),{playToast:M,pauseToast:I,isRunning:a,preventExitTransition:n,toastRef:d,eventHandlers:U}}var lS=typeof window<"u"?E.useLayoutEffect:E.useEffect,Af=({theme:t,type:a,isLoading:r,...n})=>Dr.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...n});function oS(t){return Dr.createElement(Af,{...t},Dr.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function cS(t){return Dr.createElement(Af,{...t},Dr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function dS(t){return Dr.createElement(Af,{...t},Dr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function uS(t){return Dr.createElement(Af,{...t},Dr.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function fS(){return Dr.createElement("div",{className:"Toastify__spinner"})}var Bm={info:cS,warning:oS,success:dS,error:uS,spinner:fS},xS=t=>t in Bm;function hS({theme:t,type:a,isLoading:r,icon:n}){let l=null,d={theme:t,type:a};return n===!1||(Bi(n)?l=n({...d,isLoading:r}):E.isValidElement(n)?l=E.cloneElement(n,d):r?l=Bm.spinner():xS(a)&&(l=Bm[a](d))),l}var mS=t=>{let{isRunning:a,preventExitTransition:r,toastRef:n,eventHandlers:l,playToast:d}=iS(t),{closeButton:f,children:h,autoClose:b,onClick:g,type:w,hideProgressBar:k,closeToast:C,transition:S,position:D,className:A,style:M,progressClassName:I,updateId:F,role:T,progress:B,rtl:H,toastId:U,deleteToast:L,isIn:P,isLoading:z,closeOnClick:W,theme:ee,ariaLabel:G}=t,ne=co("Toastify__toast",`Toastify__toast-theme--${ee}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":W}),le=Bi(A)?A({rtl:H,position:D,type:w,defaultClassName:ne}):co(ne,A),Y=hS(t),X=!!B||!b,de={closeToast:C,type:w,theme:ee},ye=null;return f===!1||(Bi(f)?ye=f(de):E.isValidElement(f)?ye=E.cloneElement(f,de):ye=GE(de)),Dr.createElement(S,{isIn:P,done:L,position:D,preventExitTransition:r,nodeRef:n,playToast:d},Dr.createElement("div",{id:U,tabIndex:0,onClick:g,"data-in":P,className:le,...l,style:M,ref:n,...P&&{role:T,"aria-label":G}},Y!=null&&Dr.createElement("div",{className:co("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},Y),rw(h,t,!a),ye,!t.customProgressBar&&Dr.createElement(YE,{...F&&!X?{key:`p-${F}`}:{},rtl:H,theme:ee,delay:b,isRunning:a,isIn:P,closeToast:C,hide:k,type:w,className:I,controlledProgress:X,progress:B||0})))},gS=(t,a=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:a}),pS=VE(gS("bounce",!0)),yS={position:"top-right",transition:pS,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function nr(t){let a={...yS,...t},r=t.stacked,[n,l]=E.useState(!0),d=E.useRef(null),{getToastToRender:f,isToastActive:h,count:b}=nS(a),{className:g,style:w,rtl:k,containerId:C,hotKeys:S}=a;function D(M){let I=co("Toastify__toast-container",`Toastify__toast-container--${M}`,{"Toastify__toast-container--rtl":k});return Bi(g)?g({position:M,rtl:k,defaultClassName:I}):co(I,Im(g))}function A(){r&&(l(!0),ie.play())}return lS(()=>{var M;if(r){let I=d.current.querySelectorAll('[data-in="true"]'),F=12,T=(M=a.position)==null?void 0:M.includes("top"),B=0,H=0;Array.from(I).reverse().forEach((U,L)=>{let P=U;P.classList.add("Toastify__toast--stacked"),L>0&&(P.dataset.collapsed=`${n}`),P.dataset.pos||(P.dataset.pos=T?"top":"bot");let z=B*(n?.2:1)+(n?0:F*L);P.style.setProperty("--y",`${T?z:z*-1}px`),P.style.setProperty("--g",`${F}`),P.style.setProperty("--s",`${1-(n?H:0)}`),B+=P.offsetHeight,H+=.025})}},[n,b,r]),E.useEffect(()=>{function M(I){var F;let T=d.current;S(I)&&((F=T.querySelector('[tabIndex="0"]'))==null||F.focus(),l(!1),ie.pause()),I.key==="Escape"&&(document.activeElement===T||T!=null&&T.contains(document.activeElement))&&(l(!0),ie.play())}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[S]),Dr.createElement("section",{ref:d,className:"Toastify",id:C,onMouseEnter:()=>{r&&(l(!1),ie.pause())},onMouseLeave:A,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},f((M,I)=>{let F=I.length?{...w}:{...w,pointerEvents:"none"};return Dr.createElement("div",{tabIndex:-1,className:D(M),"data-stacked":r,style:F,key:`c-${M}`},I.map(({content:T,props:B})=>Dr.createElement(mS,{...B,stacked:r,collapseAll:A,isIn:h(B.toastId,B.containerId),key:`t-${B.key}`},T)))}))}function bS(){const{setAuth:t}=E.useContext(Or),[a,r]=E.useState(""),[n,l]=E.useState(""),[d,f]=E.useState(!1),[h,b]=E.useState(null),[g,w]=E.useState(!1),[k,C]=E.useState(!1),[S,D]=E.useState(!1),[A,M]=E.useState(0),[I,F]=E.useState("admin"),T=hr();let[B,H]=ld();E.useEffect(()=>{const X=B.get("token"),de=B.get("id"),ye=B.get("type");X&&de&&(ye==="houseowner"?L(X,de):U(X,de))},[B]);const U=async(X,de)=>{w(!0),b(null);try{await Te.post("/auth/verify",{token:X,id:de}),ie.success("Email verified successfully! You can now log in."),H({})}catch(ye){ie.error(ye.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}},L=async(X,de)=>{w(!0),b(null);try{const ye=await Te.post("/houseowner-auth/verify",{token:X,id:de});ye.data.success&&(ye.data.requires_password?(ie.success("Email verified! Please set your password."),T(`/houseowner/set-password?token=${X}&id=${de}`)):(ie.success("Email verified successfully! You can now log in."),H({})))}catch(ye){ie.error(ye.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}};async function P(X){if(X.preventDefault(),!(g||S)){b(null),w(!0);try{const de=await Te.post("/auth/login-unified",{email:a,password:n});if(de.data.accessToken){t({accessToken:de.data.accessToken,user:de.data.user}),ie.success("Login Successful!");try{localStorage.setItem("accessToken",de.data.accessToken),localStorage.setItem("user",JSON.stringify(de.data.user)),localStorage.setItem("userType",de.data.user.user_type)}catch(ye){console.warn("Could not save to localStorage:",ye)}z(de.data.user);return}}catch(de){W(de)}finally{w(!1)}}}const z=X=>{X.user_type==="houseowner"?T("/houseowner/dashboard"):X.role==="Admin"?T("/admindashboard"):T("/employee-dashboard")},W=X=>{if(X.response?.status===429)ee(X);else{const ye=X.response?.data?.message||"Login failed";b(ye),ie.error(ye),(ye.includes("verify")||ye.includes("verified"))&&G()}},ee=X=>{const de=X.response?.headers?.["retry-after"],ye=de?Math.max(1,Number(de)):60;ie.error(`Too many requests. Please wait ${ye}s before trying again.`),D(!0),M(ye);try{localStorage.setItem("rateLimitedUntil",Date.now()+ye*1e3)}catch(ae){console.warn("Could not save rate limit info:",ae)}let oe=ye;const xe=setInterval(()=>{if(oe-=1,M(oe),oe<=0){clearInterval(xe),D(!1),M(0);try{localStorage.removeItem("rateLimitedUntil")}catch(ae){console.warn("Could not clear rate limit info:",ae)}}},1e3)},G=()=>{ie.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:ne,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:k,children:k?"Sending...":"Resend Verification"})]}),{autoClose:5e3})},ne=async X=>{if(X.preventDefault(),!a){ie.error("Please enter your email first");return}C(!0);try{I==="houseowner"?await Te.post("/houseowner-auth/resend-verification",{email:a}):await Te.post("/auth/resend",{email:a}),ie.success("Verification email sent! Please check your inbox.")}catch(de){ie.error(de.response?.data?.message||"Failed to resend verification email")}finally{C(!1)}},le=()=>{T("/forgot-password")},Y=()=>{T("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),g&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:P,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:a,onChange:X=>r(X.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:n,onChange:X=>l(X.target.value),placeholder:"Password",type:d?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>f(!d),className:"passwordToggle","aria-label":d?"Hide password":"Show password",children:d?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:g||S,children:S?`Try again in ${A}s`:g?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:Y,disabled:g,children:"Cancel"})]})]}),h&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:h}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:le,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),I==="admin"&&e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email?"," ",e.jsx("button",{type:"button",onClick:ne,disabled:k,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:k?"Sending...":"Resend"})]}),I==="houseowner"&&e.jsx("p",{className:"mt-4 text-sm text-center text-gray-600",children:"Need help? Contact your apartment administrator."})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function vS(){const[t,a]=E.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[r,n]=E.useState({regNo:"",name:"",address:""}),[l,d]=E.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[f,h]=E.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[b,g]=E.useState(1),[w,k]=E.useState(!1),[C,S]=E.useState(!1),[D,A]=E.useState([]);E.useEffect(()=>{(async()=>{try{const X=await(await fetch("https://general.apivcm.shop/countries")).json();A(X.data)}catch(Y){console.error("Error fetching countries:",Y)}})()},[]);const M=le=>{const Y=le.target.value,X=D.find(de=>de.country===Y);if(a(de=>({...de,country:Y,mobile:X?X.international_dialing+" ":de.mobile})),f.country){const de=T("country",Y);d(ye=>({...ye,country:de}))}},I=hr(),F=3,T=(le,Y)=>{let X="";switch(le){case"firstname":Y.trim()?Y.length<3?X="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(Y)?Y.length>20&&(X="First name cannot exceed 20 characters"):X="First name can only contain letters, and numbers":X="First name is required";break;case"lastname":Y.trim()?Y.length<3?X="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(Y)?Y.length>20&&(X="Last name cannot exceed 20 characters"):X="Last name can only contain letters, and numbers":X="Last name is required";break;case"country":Y.trim()||(X="Country is required");break;case"mobile":Y.trim()?/^\+\d{1,4} \d{9,10}$/.test(Y)?Y.length>20&&(X="Mobile cannot exceed 20 digits"):X="Mobile must be in format +XXX XXXXXXXXXX (country code followed by 9-10 digits)":X="Mobile Number is required";break;case"email":Y.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y)||(X="Please enter a valid email address"):X="Email is required";break;case"password":Y?Y.length<8?X="Password must be at least 8 characters":/(?=.*[a-z])/.test(Y)?/(?=.*[A-Z])/.test(Y)?/(?=.*\d)/.test(Y)?/(?=.*[@$!%*?&])/.test(Y)||(X="Password must contain at least one special character (@$!%*?&)"):X="Password must contain at least one number":X="Password must contain at least one uppercase letter":X="Password must contain at least one lowercase letter":X="Password is required";break;case"confirmPassword":Y?Y!==t.password&&(X="Passwords do not match"):X="Please confirm your password";break;case"regNo":Y.trim()?Y.length<2&&(X="Business REgistration No must be at least 2 characters"):X="Business Registration No is required";break;case"name":Y.trim()?Y.length<2&&(X="Company name must be at least 2 characters"):X="Company name is required";break;case"address":Y.trim()?Y.length<3&&(X="Company address must be at least 3 characters"):X="Company address is required";break}return X},B=(le,Y=!1)=>{const{name:X,value:de}=le.target;if(Y?n(ye=>({...ye,[X]:de})):a(ye=>({...ye,[X]:de})),f[X]){const ye=T(X,de);d(oe=>({...oe,[X]:ye}))}},H=(le,Y=!1)=>{const{name:X}=le.target;h(oe=>({...oe,[X]:!0}));const de=Y?r[X]:t[X],ye=T(X,de);d(oe=>({...oe,[X]:ye}))},U=le=>{if(a(Y=>({...Y,confirmPassword:le})),f.confirmPassword){const Y=T("confirmPassword",le);d(X=>({...X,confirmPassword:Y}))}},L=le=>{const Y={},X={};let de=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[le].forEach(oe=>{X[oe]=!0;const xe=oe in r?r[oe]:t[oe],ae=T(oe,xe);Y[oe]=ae,ae&&(de=!1)}),h(oe=>({...oe,...X})),d(oe=>({...oe,...Y})),de},P=()=>{L(b)?g(b+1):ie.warn("Please fix the validation errors before proceeding")},z=()=>{g(b-1)};async function W(le){le.preventDefault();let Y=!0;for(let X=1;X<=F;X++)if(!L(X)){Y=!1,X!==b&&g(X);break}if(!Y){ie.warn("Please fix all validation errors before submitting");return}try{const X={regNo:r.regNo,name:r.name,address:r.address},ye=(await Te.post("/tenants",X)).data.data.id,oe=await Te.post("/auth/register",{firstname:t.firstname,lastname:t.lastname,country:t.country,mobile:t.mobile,email:t.email,password:t.password,company_id:ye});ie.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>I("/login"),3e3)}catch(X){console.error("Registration error:",X),X.response?.status===403?ie.error("Access denied. Please try registering again."):X.response?.data?.message?ie.error(X.response.data.message):ie.error("Registration failed. Please try again.")}}const G=(()=>{if(!t.password)return{strength:0,label:""};let le=0;return t.password.length>=8&&le++,/(?=.*[a-z])/.test(t.password)&&le++,/(?=.*[A-Z])/.test(t.password)&&le++,/(?=.*\d)/.test(t.password)&&le++,/(?=.*[@$!%*?&])/.test(t.password)&&le++,{strength:le,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][le]}})(),ne=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:ne.map(le=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b>=le.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:le.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:le.title})]},le.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(b-1)/(F-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:W,className:"loginForm",children:[b===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:r.regNo,onChange:le=>B(le,!0),onBlur:le=>H(le,!0),placeholder:"Company Registration No *",className:`loginInput ${l.regNo?"border-red-500":f.regNo&&"border-green-500"}`}),f.regNo&&l.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:r.name,onChange:le=>B(le,!0),onBlur:le=>H(le,!0),placeholder:"Company Name *",className:`loginInput ${l.name?"border-red-500":f.name&&"border-green-500"}`}),f.name&&l.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:r.address,onChange:le=>B(le,!0),onBlur:le=>H(le,!0),placeholder:"Company Address *",className:`loginInput ${l.address?"border-red-500":f.address&&"border-green-500"}`}),f.businessInfo&&l.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.businessInfo]})]})]}),b===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:t.firstname,onChange:le=>B(le,!1),onBlur:le=>H(le,!1),placeholder:"First Name *",className:`loginInput ${l.firstname?"border-red-500":f.firstname&&"border-green-500"}`}),f.firstname&&l.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:t.lastname,onChange:le=>B(le,!1),onBlur:le=>H(le,!1),placeholder:"Last Name *",className:`loginInput ${l.lastname?"border-red-500":f.lastname&&"border-green-500"}`}),f.lastname&&l.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.lastname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"country",list:"country-list",value:t.country||"",onChange:M,onBlur:le=>H(le,!1),placeholder:"Select or type country *",className:`loginInput ${l.country?"border-red-500":f.country&&"border-green-500"}`}),e.jsx("datalist",{id:"country-list",children:D.map(le=>e.jsx("option",{value:le.country},le.country))}),f.country&&l.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:t.mobile,onChange:le=>{const Y=t.mobile.split(" ")[0]||"",X=le.target.value.replace(Y+" ",""),ye={target:{name:"mobile",value:Y+(X?" "+X.replace(/\D/g,""):"")}};B(ye,!1)},onBlur:le=>H(le,!1),placeholder:"Mobile * (e.g., +94 771234567)",className:`loginInput ${l.mobile?"border-red-500":f.mobile&&"border-green-500"}`}),f.mobile&&l.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:t.email,onChange:le=>B(le,!1),onBlur:le=>H(le,!1),placeholder:"Email *",className:`loginInput ${l.email?"border-red-500":f.email&&"border-green-500"}`}),f.email&&l.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.email]})]})]}),b===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:t.password,onChange:le=>B(le,!1),onBlur:le=>H(le,!1),placeholder:"Password *",type:w?"text":"password",className:`loginInput ${l.password?"border-red-500":f.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>k(!w),className:"passwordToggle","aria-label":w?"Hide password":"Show password",children:w?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),f.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",G.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${G.strength<2?"bg-red-500":G.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${G.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),f.password&&l.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:t.confirmPassword,onChange:le=>U(le.target.value),onBlur:()=>h(le=>({...le,confirmPassword:!0})),placeholder:"Confirm Password *",type:C?"text":"password",className:`loginInput ${l.confirmPassword?"border-red-500":f.confirmPassword&&t.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>S(!C),className:"passwordToggle","aria-label":C?"Hide password":"Show password",children:C?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),f.confirmPassword&&l.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.confirmPassword]}),f.confirmPassword&&!l.confirmPassword&&t.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(hn,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[b>1&&e.jsxs("button",{type:"button",onClick:z,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(Mn,{size:18,className:"mr-1"}),"Back"]}),b<F?e.jsxs("button",{type:"button",onClick:P,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(Y0,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>I("/"),children:"Cancel"})]})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function wS(){const[t]=ld(),a=hr(),[r,n]=E.useState(!1),[l,d]=E.useState("");E.useEffect(()=>{const h=t.get("token"),b=t.get("id");h&&b&&f(h,b)},[t]);const f=async(h,b)=>{try{n(!0);const g=await Te.post("/auth/verify",{token:h,id:b});d(g.data.message),ie.success("Email verified successfully!"),setTimeout(()=>{a("/login")},3e3)}catch(g){console.error("Verification error:",g),d(g.response?.data?.message||"Verification failed"),ie.error("Email verification failed")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),r?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):l?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:l}),e.jsx("button",{onClick:()=>a("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function Vr(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),{auth:l,setAuth:d}=E.useContext(Or),{logout:f,resetActivityTimer:h}=E.useContext(Or),b=hr(),[g,w]=E.useState(!1);E.useEffect(()=>{const A=localStorage.getItem("theme"),M=window.matchMedia("(prefers-color-scheme: dark)").matches;A==="dark"||!A&&M?(n(!0),document.documentElement.classList.add("dark")):(n(!1),document.documentElement.classList.remove("dark"))},[]),E.useEffect(()=>{if(!l.accessToken)return;const A=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],M=()=>h();A.forEach(F=>window.addEventListener(F,M,{passive:!0}));const I=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",I),()=>{A.forEach(F=>window.removeEventListener(F,M)),document.removeEventListener("visibilitychange",I)}},[l.accessToken,h]);const k=async()=>{try{await Te.post("/auth/logout"),f(),ie.success("Logged out successfully"),b("/")}catch(A){console.error("Logout error:",A),f(),ie.success("Logged out successfully"),b("/")}},C=()=>{w(!0)},S=()=>{w(!1)},D=()=>{const A=!r;n(A),A?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:D,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:r?"Switch to light mode":"Switch to dark mode",children:r?e.jsx(Mm,{size:20}):e.jsx(Dm,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:l?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:l?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:l?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:C,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Tm,{size:20})})})]})]})}),t&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(js,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:D,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[r?e.jsx(Mm,{size:18,className:"mr-2"}):e.jsx(Dm,{size:18,className:"mr-2"}),r?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:C,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(Tm,{size:18,className:"mr-2"}),"Logout"]})})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function vr(){const{auth:t}=E.useContext(Or),a=On(),[r,n]=E.useState(!1),[l,d]=E.useState(null),[f,h]=E.useState([]),[b,g]=E.useState(!0),[w,k]=E.useState(Date.now()),[C,S]=E.useState(!1),[D,A]=E.useState(!1),M=t?.user?.role||"Admin",I=t?.user?.id;E.useEffect(()=>{const Y=()=>{A(window.innerWidth<1024)};return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]),E.useEffect(()=>{S(!1)},[a.pathname]);const F=["employee_dashboard","profile"],T={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:Hr,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:Ku,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:Hr,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:Ku,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:ni,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:Oa,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:W6,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},complaint_management:{id:"complaint_management",name:"Complaints",icon:ib,isConstant:!1,children:[{name:"Complaint Categories",path:"/complaint-categories"},{name:"All Complaints",path:"/view-complaints"}]},company_management:{id:"company_management",name:"Company Set up",icon:Fi,isConstant:!1,children:[{name:"Import House owner",path:"/bulk-import-houseowner"}]},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:ni,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:Oa,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:ng,isConstant:!1},my_complaints:{id:"my_complaints",name:"My Complaints",path:"/my-complaints",icon:ib,isConstant:!1}},B=()=>["admin_dashboard","users_management","apartments_management","expenses_management","complaint_management","company_management","admin_profile"],H=async()=>{try{if(g(!0),M==="Admin"){h(B()),g(!1);return}try{const Y=await Te.get("/role-components/user/components");if(Y.data.success){const de=(Y.data.data||[]).filter(oe=>!F.includes(oe)),ye=[...F,...de];h(ye)}else console.error("API returned error:",Y.data.message),h([...F])}catch(Y){console.error("Error fetching user components",Y),h([...F])}}catch(Y){console.error("Error in fetchUserComponents",Y),h(M==="Admin"?B():[...F])}finally{g(!1)}};E.useEffect(()=>{H()},[M,I,w]);const U=()=>{k(Date.now())},P=f.map(X=>T[X]).filter(Boolean),z=Y=>a.pathname===Y,W=Y=>d(l===Y?null:Y),ee=()=>S(!C),G=()=>e.jsx("button",{onClick:ee,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:C?e.jsx(gr,{size:24}):e.jsx(Tc,{size:24})}),ne=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${r?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!r&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(Rm,{size:16})})]}),r&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!r&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(Y=>{if(!Y)return null;const X=Y.icon;if(Y.children){const de=Y.children.some(ye=>ye.path&&z(ye.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>W(Y.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===Y.name||de?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:Y.name})]}),!r&&Y.children&&Y.children.length>0&&(l===Y.name?e.jsx(Nc,{size:16}):e.jsx(Tl,{size:16}))]}),l===Y.name&&!r&&Y.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:Y.children.map(ye=>e.jsx(no,{to:ye.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${z(ye.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:ye.name},ye.name))})]},Y.id)}return e.jsxs(no,{to:Y.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${z(Y.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(X,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:Y.name})]},Y.id)})})]}),le=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:C?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(Rm,{size:16})}),e.jsx("button",{onClick:ee,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx(gr,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(Y=>{if(!Y)return null;const X=Y.icon;if(Y.children){const de=Y.children.some(ye=>ye.path&&z(ye.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>W(Y.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===Y.name||de?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(X,{size:20,className:"mr-3"}),e.jsx("span",{children:Y.name})]}),Y.children&&Y.children.length>0&&(l===Y.name?e.jsx(Nc,{size:16}):e.jsx(Tl,{size:16}))]}),l===Y.name&&Y.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:Y.children.map(ye=>e.jsx(no,{to:ye.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${z(ye.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:ye.name},ye.name))})]},Y.id)}return e.jsxs(no,{to:Y.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${z(Y.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(X,{size:20,className:"mr-3"}),e.jsx("span",{children:Y.name})]},Y.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(G,{}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:ee}),e.jsx(le,{}),e.jsx(ne,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function ow({onClose:t,onCreated:a}){const[r,n]=E.useState({apartment_id:"",name:"",address:"",city:"",image:null}),[l,d]=E.useState(!1),[f,h]=E.useState(""),b=k=>{const{name:C,value:S,files:D}=k.target;n(A=>({...A,[C]:D?D[0]:S}))},g=async()=>{try{const S=(await Te.get("/apartments")).data.data[0],D=S?parseInt(S.apartment_id.slice(3)):0,A=`A${String(D+1).padStart(3,"0")}`;n(M=>({...M,apartment_id:A}))}catch(k){console.error("Error fetching last apartment id:",k)}};E.useEffect(()=>{g()},[]);const w=async k=>{k.preventDefault(),h(""),d(!0);try{const C=new FormData;C.append("apartment_id",r.apartment_id),C.append("name",r.name),C.append("address",r.address),C.append("city",r.city),r.image&&C.append("picture",r.image);const S=await Te.post("/apartments",C,{headers:{"Content-Type":"multipart/form-data"}});d(!1),a&&a(),t&&t()}catch(C){ie.error("Failed to create apartment"),console.error(C),d(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[f&&e.jsx("p",{className:"text-red-500",children:f}),e.jsx("input",{type:"text",name:"apartment_id",value:r.apartment_id,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:r.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:r.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:l?"Saving...":"Save"})]})]})}function NS(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),l=hr(),[d,f]=E.useState([]),[h,b]=E.useState({}),[g,w]=E.useState({}),[k,C]=E.useState(!0),[S,D]=E.useState(null),[A,M]=E.useState(null),[I,F]=E.useState(!1),[T,B]=E.useState(null),[H,U]=E.useState(null),[L,P]=E.useState(!1),[z,W]=E.useState({name:"",address:"",description:"",contact_number:""}),ee=()=>P(!1),G=oe=>{P(!1),oe&&(ie.success("Apartment created"),ne())};E.useEffect(()=>{const oe=()=>{n(window.innerWidth<768)};return oe(),window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)},[]);const ne=async()=>{try{const oe=await Te.get("/apartments");oe.data.success&&Array.isArray(oe.data.data)?(f(oe.data.data),await Promise.all(oe.data.data.map(xe=>le(xe.id)))):Array.isArray(oe.data)?(f(oe.data),await Promise.all(oe.data.map(xe=>le(xe.id)))):f([])}catch(oe){console.error("Error loading apartments:",oe),oe.response?.status===401?(D("Unauthorized. Please login."),l("/login")):oe.response?.status===400?D("Company info missing."):D("Failed to load apartments.")}finally{C(!1)}},le=async oe=>{try{const xe=await Te.get(`/floors?apartment_id=${oe}`);xe.data.success&&Array.isArray(xe.data.data)&&(b(ae=>({...ae,[oe]:xe.data.data})),xe.data.data.forEach(ae=>{Y(oe,ae.id)}))}catch(xe){console.error("Error loading floors:",xe),ie.error("Failed to load floors")}},Y=async(oe,xe)=>{try{const ae=await Te.get(`/houses?apartment_id=${oe}&floor_id=${xe}`);ae.data.success&&Array.isArray(ae.data.data)&&w(q=>({...q,[xe]:ae.data.data}))}catch(ae){console.error("Error loading houses:",ae)}},X=async oe=>{M(oe),F(!0),await le(oe.id)},de=oe=>{B(oe),U(H===oe?null:oe)},ye=oe=>{switch(oe){case"occupied":return"bg-green-500 hover:bg-green-600";case"vacant":return"bg-gray-400 hover:bg-gray-400 dark:bg-gray-300 dark:hover:bg-gray-600";case"maintenance":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-gray-300 hover:bg-gray-400"}};return E.useEffect(()=>{ne()},[]),k?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Loading Apartments..."})})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 shadow-sm",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oa,{size:r?28:32,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})})]})})}),S&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300",children:S})})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"All Apartments"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[d.map(oe=>{const xe=h[oe.id]||[],ae=xe.flatMap(se=>g[se.id]||[]),q=ae.filter(se=>se.status==="occupied").length,K=ae.length?Math.round(q/ae.length*100):0;return e.jsxs("div",{onClick:()=>X(oe),className:"bg-white dark:bg-gray-800 rounded-xl shadow p-5 cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oa,{size:20,className:"text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:oe.name})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:oe.address||"No address provided"})]}),e.jsx(Y0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:xe.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Floors"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:ae.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Houses"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Occupied"}),e.jsxs("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:[K,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 dark:bg-green-400",style:{width:`${K}%`}})})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${oe.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:oe.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ha,{size:12,className:"mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Wu,{size:12,className:"mr-1"}),"Inactive"]})})})]},oe.id)}),e.jsxs("div",{onClick:()=>P(!0),className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-800 dark:to-gray-700 border-2 border-dashed border-purple-300 dark:border-gray-600 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-gray-500 transition-all duration-200 min-h-[200px] group",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/50 transition-colors",children:e.jsx(Ca,{size:32,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"Add New Apartment"}),e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 text-center",children:"Click to create a new apartment complex"})]})]})]})]})})]}),I&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(Oa,{size:28}),A.name]}),e.jsx("p",{className:"text-purple-100 mt-1",children:A.address})]}),e.jsx("button",{onClick:()=>F(!1),className:"text-white hover:text-gray-200 text-2xl",children:""})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 dark:bg-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Vacant"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Maintenance"})]})]}),e.jsx("div",{className:"space-y-8",children:h[A.id]?.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Oa,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No floors added yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add floors to start managing houses"})]}):h[A.id]?.map(oe=>{const xe=g[oe.id]||[],ae=xe.filter(q=>q.status==="occupied").length;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[e.jsxs("div",{onClick:()=>de(oe.id),className:"flex items-center justify-between mb-4 cursor-pointer p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Floor ",oe.floor_id]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[ae," occupied  ",xe.length," total houses"]})]})}),e.jsx(Y0,{size:24,className:`text-gray-500 transition-transform ${H===oe.id?"rotate-90":""}`})]}),H===oe.id&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-1",children:xe.length===0?e.jsxs("div",{className:"col-span-full text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(q0,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No houses added to this floor"})]}):xe.map(q=>e.jsx("div",{className:"relative",title:`${q.house_id||q.house_number} - ${q.status}`,children:e.jsx("div",{className:`${ye(q.status)} w-14 h-14 rounded-md flex items-center justify-center cursor-pointer transition-all duration-200 transform hover:scale-105 shadow hover:shadow-md`,children:e.jsx("span",{className:"font-bold text-white dark:text-gray-900 text-sm",children:q.house_id||q.house_number})})},q.id))})})]},oe.id)})})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:ee,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(ow,{onClose:ee,onCreated:G})]})})})]})}function kS({onClose:t,onEdited:a,apartment:r}){const[n,l]=E.useState({name:"",address:"",city:"",image:null}),[d,f]=E.useState(!1),[h,b]=E.useState("");E.useEffect(()=>{r&&l({name:r.name||"",address:r.address||"",city:r.city||"",image:null})},[r]);const g=k=>{const{name:C,value:S,files:D}=k.target;l(A=>({...A,[C]:D?D[0]:S}))},w=async k=>{k.preventDefault(),b(""),f(!0);try{const C=new FormData;C.append("name",n.name),C.append("address",n.address),C.append("city",n.city),n.image&&C.append("picture",n.image);const S=await Te.put(`/apartments/${r.id}`,C,{headers:{"Content-Type":"multipart/form-data"}});f(!1),a&&a(),t&&t()}catch(C){console.error("Update error:",C),ie.error(C.response?.data?.message||"Failed to update apartment"),f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:n.name,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:n.address,onChange:g,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:n.city,onChange:g,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Updating...":"Update"})]})]})}function jS({isOpen:t,onClose:a,onImportSuccess:r}){const[n,l]=E.useState(null),[d,f]=E.useState(!1),[h,b]=E.useState(!1),[g,w]=E.useState(null),k=B=>{B.preventDefault(),f(!0)},C=B=>{B.preventDefault(),f(!1)},S=B=>{B.preventDefault(),f(!1);const H=B.dataTransfer.files[0];H&&A(H)},D=B=>{const H=B.target.files[0];H&&A(H)},A=B=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(B.type)){ie.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(B.size>10*1024*1024){ie.error("File size must be less than 10MB");return}l(B),w(null)},M=async()=>{if(!n){ie.error("Please select a file first");return}b(!0);const B=new FormData;B.append("excelFile",n);try{const H=await Te.post("/bulk-import/import",B,{headers:{"Content-Type":"multipart/form-data"}});w(H.data.data),r&&r()}catch(H){console.error("Import error:",H),ie.error(H.response?.data?.message||"Failed to import data")}finally{b(!1)}},I=async()=>{try{const B=await Te.get("/bulk-import/template",{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([B.data])),U=document.createElement("a");U.href=H,U.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(H),ie.success("Template downloaded successfully!")}catch(B){console.error("Download error:",B),ie.error("Failed to download template")}},F=()=>{l(null),w(null)},T=()=>{F(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(gr,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!g&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ml,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:k,onDragLeave:C,onDrop:S,children:[e.jsx(Is,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:n?n.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:D})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{onClick:M,disabled:!n||h,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:16}),"Import Data"]})})]})]}),g&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ha,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",g.created.houses," houses from ",g.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Fi,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(jf,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:g.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(Hr,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx(IC,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:g.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),g.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ma,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[g.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:g.errors.map((B,H)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(Wu,{size:14}),B]},H))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:F,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function CS({apartment:t,onClose:a,onUploadSuccess:r}){const[n,l]=E.useState(!1),[d,f]=E.useState([]),[h,b]=E.useState([]),[g,w]=E.useState(!0),k=E.useRef(null);E.useEffect(()=>{A()},[t.id]);const C=T=>{const B=Array.from(T.target.files);b(H=>[...H,...B])},S=T=>{b(B=>B.filter((H,U)=>U!==T))},D=async()=>{if(h.length===0){ie.error("Please select at least one file");return}try{l(!0);const T=new FormData;h.forEach(H=>{T.append("documents",H)}),T.append("apartmentId",t.id),(await Te.post("/apartment-documents/upload",T,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),r?.(),A(),k.current&&(k.current.value=""))}catch(T){console.error("Upload error:",T);const B=T.response?.data?.message||"Failed to upload documents";ie.error(B)}finally{l(!1)}},A=async()=>{try{w(!0);const T=await Te.get(`/apartment-documents/apartments/${t.id}/documents`);T.data.success&&f(T.data.data)}catch(T){console.error("Error loading documents:",T);const B=T.response?.data?.message||"Failed to load documents";ie.error(B)}finally{w(!1)}},M=async T=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Te.delete(`/apartment-documents/documents/${T}`),ie.success("Document deleted successfully"),A()}catch(B){console.error("Delete error:",B);const H=B.response?.data?.message||"Failed to delete document";ie.error(H)}},I=async T=>{try{const B=await Te.get(`/apartment-documents/documents/${T.id}/download`,{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([B.data])),U=document.createElement("a");U.href=H,U.setAttribute("download",T.original_name||T.file_name),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(H)}catch(B){console.error("Download error:",B);const H=B.response?.data?.message||"Failed to download document";ie.error(H)}},F=T=>{if(T===0)return"0 Bytes";const B=1024,H=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(T)/Math.log(B));return parseFloat((T/Math.pow(B,U)).toFixed(2))+" "+H[U]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",t.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:k,onChange:C,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>k.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),h.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:h.map((T,B)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:F(T.size)})]})]}),e.jsx("button",{onClick:()=>S(B),className:"text-red-500 hover:text-red-700",children:e.jsx(gr,{size:16})})]},B))})]}),h.length>0&&e.jsx("button",{onClick:D,disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:20}),"Upload ",h.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:d.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T.original_name||T.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[F(T.file_size),"  Uploaded on ",new Date(T.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(T),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ml,{size:18})}),e.jsx("button",{onClick:()=>M(T.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:18})})]})]},T.id))})]})]})}function ES(){const{auth:t}=E.useContext(Or),a=hr(),[r,n]=E.useState(!1),[l,d]=E.useState(!1),[f,h]=E.useState(window.innerWidth<768),[b,g]=E.useState([]),[w,k]=E.useState(!0),[C,S]=E.useState(null),[D,A]=E.useState(!1),[M,I]=E.useState(!1),[F,T]=E.useState(null),[B,H]=E.useState(!1),[U,L]=E.useState(null),[P,z]=E.useState(!1),[W,ee]=E.useState(!1),[G,ne]=E.useState(null),[le,Y]=E.useState(!1),[X,de]=E.useState(null);E.useEffect(()=>{const fe=()=>{h(window.innerWidth<768)};return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[]);const ye=()=>{A(!0)},oe=()=>{z(!0)},xe=()=>{z(!1)},ae=fe=>{T(fe),I(!0)},q=fe=>{a(`/floors/${fe.id}`)},K=()=>{A(!1)},se=()=>{I(!1),T(null)},re=()=>{Oe(),A(!1),ie.success("Apartment created successfully!")},te=()=>{Oe(),I(!1),T(null),ie.success("Apartment updated successfully!")},Re=()=>{Oe(),ie.success("Bulk import completed successfully!")},ke=fe=>{L(fe),H(!0)},Ve=()=>{H(!1)},Oe=async()=>{try{k(!0),S(null);const fe=await Te.get("/apartments");fe.data.success&&Array.isArray(fe.data.data)?g(fe.data.data):Array.isArray(fe.data)?g(fe.data):(console.warn("Unexpected response format:",fe.data),g([]))}catch(fe){console.error("Error loading apartments:",fe),fe.response?.status===401?(S("Unauthorized. Please login again."),a("/login")):fe.response?.status===400?S("Company information missing. Please contact support."):S("Failed to load apartments. Please try again.")}finally{k(!1)}};E.useEffect(()=>{Oe()},[]);const et=async fe=>{try{const st=await Te.patch(`/apartments/${fe.id}/toggle`);ie.success(st.data.message),Oe()}catch(st){console.error("Error toggling apartment:",st),ie.error("Failed to toggle apartment status")}},be=fe=>{ne(fe),ee(!0)},Ae=async()=>{try{if(!G)return;await Te.delete(`/apartments/${G.id}`),ie.success("Apartment deleted successfully"),ee(!1),ne(null),Oe()}catch(fe){console.error("Delete apartment error:",fe),ie.error("Failed to delete apartment")}},Fe=()=>{ee(!1),ne(null)},Ce=fe=>{de(fe),Y(!0)},Je=()=>{Y(!1),de(null)},ve=()=>{ie.success("Document uploaded successfully!")},Le=()=>e.jsx("button",{onClick:()=>d(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Tc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Le,{}),e.jsx(vr,{onCollapse:n,isMobileOpen:l,onMobileClose:()=>d(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${r?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>d(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oa,{size:f?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Apartments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your apartment buildings"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:oe,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Is,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Upload Excel"})]}),e.jsxs("button",{onClick:ye,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Ca,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:w?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading apartments..."})]}):C?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:C}),e.jsx("button",{onClick:Oe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):b.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No apartments found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first apartment"}),e.jsx("button",{onClick:ye,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Apartment"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Apartments: ",b.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[b.length," items"]})]})}),b.map((fe,st)=>e.jsxs("div",{onClick:()=>fe.is_active&&q(fe),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${fe.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[fe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${fe.picture}`,alt:fe.name,className:"w-12 h-12 object-cover rounded-lg mr-3",onError:Ee=>{console.error("Image failed to load:",fe.picture),Ee.target.style.display="none";const wt=Ee.target.parentNode.querySelector(".image-fallback");wt&&(wt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Zs,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:fe.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:fe.city||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),Ce(fe)},className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(xr,{size:16})}),e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),ae(fe)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Ea,{size:16})}),e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),ke(fe)},className:`p-2 rounded-lg ${fe.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:fe.is_active?"Deactivate":"Activate",children:fe.is_active?e.jsx(po,{size:16}):e.jsx(go,{size:16})}),e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),be(fe)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Lr,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mt-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Address:"}),e.jsx("span",{className:"truncate",children:fe.address})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Floors:"}),e.jsx("span",{children:fe.floors})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Units:"}),e.jsx("span",{children:fe.houses})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${fe.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:fe.is_active?"Active":"Inactive"})]})]})]},fe.id||st))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Apartments"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[b.length," apartments"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((fe,st)=>e.jsxs("tr",{onClick:()=>fe.is_active&&q(fe),className:`transition-colors cursor-pointer ${fe.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${fe.picture}`,alt:fe.name,className:"w-12 h-12 object-cover rounded-lg",onError:Ee=>{console.error("Image failed to load:",fe.picture),Ee.target.style.display="none";const wt=Ee.target.parentNode.querySelector(".image-fallback");wt&&(wt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(Zs,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:fe.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),Ce(fe)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(xr,{size:20})}),e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),ae(fe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),ke(fe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:fe.is_active?"Deactivate":"Activate",children:fe.is_active?e.jsx(po,{size:25}):e.jsx(go,{size:25})}),e.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),be(fe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},fe.id||st))})]})]})})})]})})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:K,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(ow,{onClose:K,onCreated:re})]})})}),M&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx("button",{onClick:se,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(kS,{onClose:se,onEdited:te,apartment:F})]})})}),e.jsx(jS,{isOpen:P,onClose:xe,onImportSuccess:Re}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:U?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:U?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Ve,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{U&&(et(U),H(!1),L(null))},className:`flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors ${U?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:U?.is_active?"Deactivate":"Activate"})]})]})}),W&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.name,'"?']}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Fe,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ae,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),le&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:["Documents - ",X.name]}),e.jsx("button",{onClick:Je,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(CS,{apartment:X,onClose:Je,onUploadSuccess:ve})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function SS({onClose:t,onCreated:a,roles:r,rolesLoading:n}){const[l,d]=E.useState({email:"",role_id:""}),[f,h]=E.useState(!1),[b,g]=E.useState(""),w=C=>{const{name:S,value:D}=C.target;d(A=>({...A,[S]:D}))},k=async C=>{C.preventDefault(),g(""),h(!0);try{const S=await Te.post("/auth/invite",{email:l.email,role_id:l.role_id});ie.success("Invitation sent successfully!"),a&&a(),t&&t()}catch(S){console.error("Invite error:",S);const D=S.response?.data?.message||"Failed to send invitation. Try again.";g(D),ie.error(D)}finally{h(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4 text-black dark:text-white",children:[b&&e.jsx("p",{className:"text-red-500",children:b}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:l.email,onChange:w,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:l.role_id,onChange:w,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Select Role"}),n?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):r.map(C=>e.jsx("option",{value:C.id,children:C.role_name},C.id))]}),n&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Gt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||n,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function AS({user:t,onClose:a,onUpdated:r,roles:n,rolesLoading:l}){const[d,f]=E.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[h,b]=E.useState(!1),[g,w]=E.useState(""),[k,C]=E.useState(!1),[S,D]=E.useState(!1),[A,M]=E.useState(!1),[I,F]=E.useState("");E.useEffect(()=>{t&&(f({firstname:t.firstname||"",lastname:t.lastname||"",email:t.email||"",country:t.country||"",mobile:t.mobile||"",role_id:t.role_id||"",password:"",confirmPassword:""}),F(t.email||""))},[t]);const T=U=>{const{name:L,value:P}=U.target;f(z=>({...z,[L]:P})),L==="email"&&M(P!==I)},B=async()=>{try{b(!0),await Te.post("/auth/resend",{email:d.email}),ie.success("Verification email sent successfully!"),M(!1)}catch(U){console.error("Error sending verification email:",U),ie.error(U.response?.data?.message||"Failed to send verification email")}finally{b(!1)}},H=async U=>{if(U.preventDefault(),b(!0),w(""),d.password&&d.password!==d.confirmPassword){w("Passwords do not match"),b(!1);return}if(d.password&&d.password.length<8){w("Password must be at least 8 characters long"),b(!1);return}try{const L={firstname:d.firstname,lastname:d.lastname,email:d.email,country:d.country,mobile:d.mobile,role_id:d.role_id};d.password&&(L.password=d.password);const P=await Te.put(`/auth/users/${t.id}`,L);P.data.success?(ie.success("User updated successfully!"),P.data.data.requires_verification&&await B(),r?.(P.data.data)):w(P.data.message||"Failed to update user")}catch(L){console.error("Error updating user:",L),w(L.response?.data?.message||"Failed to update user")}finally{b(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),g&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:g}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:d.firstname,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:d.lastname,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:d.email,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),A&&e.jsx("button",{type:"button",onClick:B,disabled:h,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(Qv,{size:16})})]}),A&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:d.country,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:d.mobile,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:d.role_id,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Select Role"}),l?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):n.map(U=>e.jsx("option",{value:U.id,children:U.role_name},U.id))]}),l&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Gt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:k?"text":"password",name:"password",value:d.password,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>C(!k),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:k?e.jsx(In,{size:16}):e.jsx(Qs,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:S?"text":"password",name:"confirmPassword",value:d.confirmPassword,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>D(!S),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:S?e.jsx(In,{size:16}):e.jsx(Qs,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||l,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function _S({user:t,onClose:a,onAssignSuccess:r}){const[n,l]=E.useState([]),[d,f]=E.useState([]),[h,b]=E.useState(!0),[g,w]=E.useState(!1),[k,C]=E.useState(""),[S,D]=E.useState(new Set);E.useEffect(()=>{t&&(async()=>{try{b(!0);const z=await Te.get("/bills");if(z.data.success){const ee=(z.data.data||[]).filter(G=>G.billtype?.toLowerCase()==="measurable");l(ee)}const W=await Te.get(`/user-bills/users/${t.id}/bills`);if(W.data.success){const G=(W.data.data||[]).filter(le=>le.billtype?.toLowerCase()==="measurable");f(G);const ne=new Set(G.map(le=>le.id));D(ne)}}catch(z){console.error("Error loading bill data:",z),ie.error("Failed to load bill data")}finally{b(!1)}})()},[t]);const A=n.filter(P=>P.bill_name?.toLowerCase().includes(k.toLowerCase())),M=P=>d.some(z=>z.id===P),I=P=>S.has(P),F=P=>{D(z=>{const W=new Set(z);return W.has(P)?W.delete(P):W.add(P),W})},T=()=>{const P=new Set(n.map(z=>z.id));D(P)},B=()=>{D(new Set)},H=async()=>{try{w(!0);const P=Array.from(S);await Te.post(`/user-bills/users/${t.id}/bills`,{bill_ids:P}),ie.success("Measurable bills assigned successfully!"),r?.(),a()}catch(P){console.error("Error assigning bills:",P),ie.error(P.response?.data?.message||"Failed to assign bills")}finally{w(!1)}},U=P=>d.find(z=>z.id===P),L=P=>{try{return new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:k,onChange:P=>C(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:B,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Gu,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:k?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:A.map(P=>{const z=I(P.id),W=M(P.id),ee=U(P.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${z?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>F(P.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ja,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:P.bill_name}),W&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(xr,{size:14}),e.jsx("span",{className:"capitalize",children:P.billtype}),P.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",L(P.created_at)]})}),ee&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",L(ee.assigned_at||ee.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:z?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(hn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},P.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[S.size," measurable bill(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:g,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:H,disabled:g,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Saving...":"Save Assignments"})]})]})]})]})}function TS({user:t,onClose:a,onAssignSuccess:r}){const[n,l]=E.useState([]),[d,f]=E.useState([]),[h,b]=E.useState(!0),[g,w]=E.useState(!1),[k,C]=E.useState(""),[S,D]=E.useState(new Set),[A,M]=E.useState("categories");E.useEffect(()=>{t&&(async()=>{try{b(!0);const ee=await Te.get("/categories");if(ee.data.success){const ne=(ee.data.data||[]).filter(le=>le.is_active!==!1);l(ne)}const G=await Te.get(`/technician-categories/technicians/${t.id}/categories`);if(G.data.success){const ne=G.data.data||[];f(ne);const le=new Set(ne.map(Y=>Y.category_id));D(le)}}catch(ee){console.error("Error loading category data:",ee),ie.error("Failed to load category data")}finally{b(!1)}})()},[t]);const I=n.filter(W=>W.name?.toLowerCase().includes(k.toLowerCase())||W.description?.toLowerCase().includes(k.toLowerCase())),F=W=>d.some(ee=>ee.category_id===W),T=W=>S.has(W),B=W=>{D(ee=>{const G=new Set(ee);return G.has(W)?G.delete(W):G.add(W),G})},H=()=>{const W=new Set(n.map(ee=>ee.id));D(W)},U=()=>{D(new Set)},L=async()=>{try{w(!0);const W=Array.from(S);await Te.post(`/technician-categories/technicians/${t.id}/categories`,{category_ids:W}),ie.success("Categories assigned successfully!"),r?.(),a()}catch(W){console.error("Error assigning categories:",W),ie.error(W.response?.data?.message||"Failed to assign categories")}finally{w(!1)}},P=W=>d.find(ee=>ee.category_id===W),z=W=>{try{return new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:k,onChange:W=>C(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading categories..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Jv,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No categories found"}),e.jsx("p",{className:"text-sm",children:k?"Try adjusting your search terms":"No categories available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Only active categories are shown here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(W=>{const ee=T(W.id),G=F(W.id),ne=P(W.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${ee?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(W.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(UC,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:W.name}),G&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Assigned"}),W.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:"Inactive"})]}),W.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:W.description}),e.jsx("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(q6,{size:12}),e.jsx("span",{children:"Service Category"})]})}),ne&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-1",children:[e.jsx(Ks,{size:12}),e.jsxs("span",{children:["Assigned: ",z(ne.assigned_at)]})]})]}),e.jsx("div",{className:"flex items-center ml-4",children:ee?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(hn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},W.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[S.size," category(ies) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:g,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:L,disabled:g,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Saving...":"Save Assignments"})]})]})]})]})}function DS({user:t,onClose:a,onAssignSuccess:r}){const[n,l]=E.useState([]),[d,f]=E.useState([]),[h,b]=E.useState(!0),[g,w]=E.useState(!1),[k,C]=E.useState(""),[S,D]=E.useState(new Set),[A,M]=E.useState("apartments");E.useEffect(()=>{t&&(async()=>{try{b(!0);const ee=await Te.get("/apartments");ee.data.success&&l(ee.data.data||[]);const G=await Te.get(`/user-apartments/users/${t.id}/apartments`);if(G.data.success){const ne=G.data.data||[];f(ne);const le=new Set(ne.map(Y=>Y.id));D(le)}}catch(ee){console.error("Error loading apartment data:",ee),ie.error("Failed to load apartment data")}finally{b(!1)}})()},[t]);const I=n.filter(W=>W.name?.toLowerCase().includes(k.toLowerCase())||W.address?.toLowerCase().includes(k.toLowerCase())||W.city?.toLowerCase().includes(k.toLowerCase())),F=W=>d.some(ee=>ee.id===W),T=W=>S.has(W),B=W=>{D(ee=>{const G=new Set(ee);return G.has(W)?G.delete(W):G.add(W),G})},H=()=>{const W=new Set(n.map(ee=>ee.id));D(W)},U=()=>{D(new Set)},L=async()=>{try{w(!0);const W=Array.from(S);await Te.post(`/user-apartments/users/${t.id}/apartments`,{apartment_ids:W}),r?.(),a()}catch(W){console.error("Error assigning apartments:",W),ie.error(W.response?.data?.message||"Failed to assign apartments")}finally{w(!1)}},P=W=>d.find(ee=>ee.id===W),z=W=>{try{return new Date(W).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Oa,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.firstname," ",t.lastname]})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(gr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>M("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${A==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>M("bills"),className:`px-4 py-2 font-semibold 
                ${A==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"}),e.jsx("button",{onClick:()=>M("complaint_categories"),className:`px-4 py-2 font-semibold 
                ${A==="complaint_categories"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Service Categories"})]}),A==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:k,onChange:W=>C(W.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Oa,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:k?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(W=>{const ee=T(W.id),G=F(W.id),ne=P(W.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${ee?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(W.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Hr,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:W.name}),G&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(mo,{size:14}),e.jsxs("span",{children:[W.address,", ",W.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[W.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[W.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:W.is_active?"Active":"Inactive"})]}),ne&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",z(ne.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:ee?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(hn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},W.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[S.size," apartment(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:g,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:L,disabled:g,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Saving...":"Save Assignments"})]})]})]})]}):A==="bills"?e.jsx(_S,{user:t,onClose:a,onAssignSuccess:r}):e.jsx(TS,{user:t,onClose:a,onAssignSuccess:r})]})})}function RS({onClose:t,onCreated:a}){const[r,n]=E.useState({role_name:""}),[l,d]=E.useState(!1),[f,h]=E.useState(""),[b,g]=E.useState([]),w=C=>{const{name:S,value:D}=C.target;n(A=>({...A,[S]:D})),S==="role_name"&&f&&h("")},k=async C=>{if(C.preventDefault(),d(!0),h(""),!r.role_name.trim()){h("Please fill in all required fields"),d(!1);return}try{const S=await Te.post("/roles",{role_name:r.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});S.data.success?(a?.(S.data.data),ie.success("Role created successfully"),t()):h(S.data.message||"Failed to save role")}catch(S){console.error("Error saving role:",S);const D=S.response?.data?.message||"Error saving role. Please try again.";h(D),S.response?.status===409&&ie.error(D)}finally{d(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:r.role_name,onChange:w,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}const MS=({role:t,onClose:a,onAssign:r})=>{const[n,l]=E.useState([]),[d,f]=E.useState(!1),[h,b]=E.useState(!1),w=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"},{id:"my_complaints",name:"My Complaints",description:"View and manage your complaints",category:"Personal",icon:"ClipboardList"}].reduce((I,F)=>{const T=F.category;return I[T]||(I[T]=[]),I[T].push(F),I},{});E.useEffect(()=>{t&&k()},[t]);const k=async()=>{try{f(!0);const I=await Te.get(`/role-components/role/${t.id}`);if(I.data.success){const F=I.data.data||[];l(F)}}catch(I){console.error("Error loading role components:",I),l([])}finally{f(!1)}},C=I=>{l(F=>F.includes(I)?F.filter(T=>T!==I):[...F,I])},S=I=>{const F=w[I].map(T=>T.id);l(T=>{const B=[...T];return F.forEach(H=>{B.includes(H)||B.push(H)}),B})},D=I=>{const F=w[I].map(T=>T.id);l(T=>T.filter(B=>!F.includes(B)))},A=async()=>{try{b(!0);const I=["employee_dashboard","profile"],F=n.filter(B=>!I.includes(B));(await Te.post(`/role-components/role/${t.id}`,{components:F})).data.success&&(ie.success("Components assigned successfully! The sidebar will refresh for affected users."),r(t.id,n),a())}catch(I){console.error("Error saving role components:",I),alert("Failed to save component assignments. Please try again.")}finally{b(!1)}},M=I=>{const T={Core:us,Management:kc,Financial:ng,Personal:Hr}[I]||q0;return e.jsx(T,{size:16})};return t?t.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(kc,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:t.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx(gr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(w).map(([I,F])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[M(I),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[I," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",F.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(I),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>D(I),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:F.map(T=>e.jsxs("div",{onClick:()=>C(T.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${n.includes(T.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:n.includes(T.id)?e.jsx(pE,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(q0,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:T.description})]})]},T.id))})]},I))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:h||d,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cf,{size:20}),"Save Assignments"]})})]})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):null};function IS({role:t,onClose:a,onUpdated:r}){const[n,l]=E.useState({role_name:""}),[d,f]=E.useState(!1),[h,b]=E.useState({});E.useEffect(()=>{t&&l({role_name:t.role_name||""})},[t]);const g=C=>{const{name:S,value:D}=C.target;l(A=>({...A,[S]:D})),h[S]&&b(A=>({...A,[S]:""}))},w=()=>{const C={};return n.role_name.trim()?n.role_name.trim().length<2?C.role_name="Role name must be at least 2 characters long":n.role_name.trim().length>50&&(C.role_name="Role name must be less than 50 characters"):C.role_name="Role name is required",b(C),Object.keys(C).length===0},k=async C=>{if(C.preventDefault(),!!w())try{f(!0);const S=await Te.put(`/roles/${t.id}`,{role_name:n.role_name.trim()});S.data.success?(r?.(S.data.data),a()):ie.error(S.data.message||"Failed to update role")}catch(S){console.error("Error updating role:",S),S.response?.status===409?(ie.error("A role with this name already exists"),b({role_name:"A role with this name already exists"})):S.response?.data?.message?ie.error(S.response.data.message):ie.error("Failed to update role. Please try again.")}finally{f(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:a,disabled:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(gr,{size:20})})]}),e.jsxs("form",{onSubmit:k,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:n.role_name,onChange:g,disabled:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${h.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),h.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",t.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${t.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:t.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,disabled:d,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[d&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Updating...":"Update Role"})]})]})]})]})}):null}function cw(){const[t,a]=E.useState(!1),[r,n]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(null),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(null),[D,A]=E.useState(!1),[M,I]=E.useState(null),[F,T]=E.useState(!1),[B,H]=E.useState(null),U=async()=>{try{d(!0),h(null);const oe=await Te.get("/roles");oe.data.success&&Array.isArray(oe.data.data)?n(oe.data.data):n([])}catch(oe){console.error("Error loading roles:",oe),h("Failed to load Roles. Please try again.")}finally{d(!1)}};E.useEffect(()=>{U()},[]);const L=()=>{g(!0)},P=()=>{g(!1)},z=()=>{U(),g(!1)},W=oe=>{S(oe),k(!0)},ee=()=>{k(!1),S(null)},G=()=>{ie.success("Role updated successfully!"),U(),k(!1),S(null)},ne=oe=>{I(oe),A(!0)},le=async()=>{try{if(!M)return;const oe=await Te.delete(`/roles/${M.id}`);oe.data.success?(ie.success("Role deleted successfully"),A(!1),I(null),U()):ie.error(oe.data.message||"Failed to delete role")}catch(oe){console.error("Delete role error:",oe),oe.response?.data?.message?.includes("users assigned")||oe.response?.data?.message?.includes("Cannot delete role")||oe.response?.data?.message?ie.error(oe.response.data.message):ie.error("Failed to delete role. Please try again."),A(!1),I(null)}},Y=()=>{A(!1),I(null)},X=oe=>{H(oe),T(!0)},de=(oe,xe)=>{ie.success("Components assigned successfully!")},ye=oe=>{try{return new Date(oe).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"Add Role"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((oe,xe)=>e.jsxs("tr",{onClick:()=>X(oe),className:`transition-colors cursor-pointer ${oe.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:xe+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:oe.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:ye(oe.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ae=>{ae.stopPropagation(),W(oe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),ne(oe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),X(oe)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(Ku,{size:20})})]})})]},oe.id||xe))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:P,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(RS,{onClose:P,onCreated:z})]})}),F&&e.jsx(MS,{role:B,onClose:()=>T(!1),onAssign:de}),w&&C&&e.jsx(IS,{role:C,onClose:ee,onUpdated:G}),D&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function OS(){const[t,a]=E.useState(!1),[r,n]=E.useState([]),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(null),[D,A]=E.useState(null),[M,I]=E.useState(!0),[F,T]=E.useState(!0),[B,H]=E.useState(null),{auth:U}=E.useContext(Or),[L,P]=E.useState(!1),[z,W]=E.useState(null),[ee,G]=E.useState(!1),[ne,le]=E.useState(null),[Y,X]=E.useState("users"),de=async()=>{try{I(!0),H(null);const ve=await Te.get("/auth/users");ve.data.success&&Array.isArray(ve.data.data)?n(ve.data.data):(console.warn("Unexpected response format:",ve.data),n([]))}catch(ve){console.error("Error in fetching users:",ve),H("Failed to load users. Please try again."),ie.error("Failed to fetch users")}finally{I(!1)}},ye=async()=>{try{T(!0);const ve=await Te.get("/roles");ve.data.success&&Array.isArray(ve.data.data)?d(ve.data.data):d([])}catch(ve){console.error("Error loading roles:",ve),ie.error("Failed to load roles")}finally{T(!1)}};E.useEffect(()=>{de(),ye()},[]);const oe=()=>h(!0),xe=()=>h(!1),ae=ve=>{S(ve),g(!0)},q=()=>{g(!1),S(null)},K=ve=>{A(ve),k(!0)},se=()=>{k(!1),A(null)},re=()=>{de(),h(!1),ie.success("User created successfully!")},te=()=>{de(),g(!1),S(null)},[Re,ke]=E.useState(!1),Ve=async ve=>{try{ke(!0),await Te.post("/auth/resend",{email:ve.email}),ie.success("Verification email sent successfully!")}catch(Le){console.error("Error sending verification email:",Le),ie.error(Le.response?.data?.message||"Failed to send verification email")}finally{ke(!1)}},Oe=async()=>{if(D)try{await Te.patch(`/auth/users/${D.id}/toggle`),ie.success(`User ${D.is_active?"deactivated":"activated"} successfully!`),de(),se()}catch(ve){console.error("Error toggling user:",ve),ie.error("Failed to update user status")}},et=ve=>{W(ve),P(!0)},be=async()=>{try{if(!z)return;await Te.delete(`/auth/users/${z.id}`),ie.success("User deleted successfully"),P(!1),W(null),de()}catch(ve){console.error("Delete user error:",ve),ve.response?.data?.message?ie.error(ve.response.data.message):ie.error("Failed to delete user")}},Ae=()=>{P(!1),W(null)},Fe=ve=>{le(ve),G(!0)},Ce=()=>{G(!1),le(null)},Je=()=>{ie.success("Apartments assigned successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ni,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Users Management"})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>X("users"),className:`px-4 py-2 font-semibold 
                      ${Y==="users"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Info"}),e.jsx("button",{onClick:()=>X("roles"),className:`px-4 py-2 font-semibold 
                      ${Y==="roles"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Roles"})]}),Y==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"Add User"})]})}),M?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Users..."})]}):B?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[B,e.jsx("button",{onClick:de,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first user"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((ve,Le)=>{const fe=ve.email===U?.user?.email||ve.id===U?.user?.id;return e.jsxs("tr",{className:`transition-colors ${ve.is_active?fe?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ve.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:ve.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:ve.email}),!ve.is_verified&&e.jsx("button",{onClick:()=>Ve(ve),disabled:fe||!ve.is_active||Re,className:`ml-2 p-1 rounded ${fe||!ve.is_active||Re?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:Re?e.jsx(Gt,{size:14,className:"animate-spin"}):e.jsx(Qv,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:ve.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:ve.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:ve.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ve.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:ve.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ve.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:ve.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:st=>{st.stopPropagation(),Fe(ve)},disabled:fe||!ve.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${fe||!ve.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:fe?"You can't assign to your own account":ve.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(Oa,{size:20})}),e.jsx("button",{onClick:()=>ae(ve),disabled:fe||!ve.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${fe||!ve.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:fe?"You can't edit your own account":ve.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:()=>K(ve),disabled:fe,className:`flex items-center justify-center w-8 h-8 rounded ${fe?"text-gray-400 cursor-not-allowed bg-transparent":ve.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:fe?"You can't modify your own account":ve.is_active?"Deactivate":"Activate",children:ve.is_active?e.jsx(po,{size:20}):e.jsx(go,{size:20})}),e.jsx("button",{onClick:st=>{st.stopPropagation(),et(ve)},disabled:fe||!ve.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${fe||!ve.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:fe?"You can't delete your own account":ve.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(Lr,{size:20})})]})})]},ve.id??Le)})})]})})]}),Y==="roles"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:e.jsx(cw,{})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:xe,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New User"}),e.jsx(SS,{onClose:xe,onCreated:re,roles:l,rolesLoading:F})]})}),b&&C&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:q,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit User"}),e.jsx(AS,{user:C,onClose:q,onUpdated:te,roles:l,rolesLoading:F})]})}),w&&D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:D.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:D.is_active?`Are you sure you want to deactivate ${D.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${D.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:se,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Oe,className:`px-4 py-2 rounded-md text-white transition-colors ${D.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:D.is_active?"Deactivate":"Activate"})]})]})}),L&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',z.firstname||z.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ae,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:be,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),ee&&ne&&e.jsx(DS,{user:ne,onClose:Ce,onAssignSuccess:Je}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function FS({onClose:t,apartment_id:a}){const[r,n]=E.useState(1),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,g]=E.useState(0),[w,k]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const M=await Te.get(`/floors/apartment/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(M.data&&M.data.length>0){const I=Math.max(...M.data.map(F=>{const T=F.floor_id.match(/\d+/);return T?parseInt(T[0]):0}));g(I)}}catch(M){console.error("Error fetching existing floors:",M)}finally{k(!1)}})()},[a]);const C=()=>{const A=Array.from({length:r},(M,I)=>({floor_id:`F${b+I+1}`}));d(A)},S=(A,M,I)=>{const F=[...l];F[A][M]=I,d(F)},D=async A=>{A.preventDefault(),h(!0);try{const M=await Te.post("/floors/batch",{apartment_id:a,floors:l},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});t()}catch(M){console.error("Error creating floors:",M)}finally{h(!1)}};return w?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:D,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:r,min:"1",onChange:A=>n(parseInt(A.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:C,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:l.map((A,M)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",b+M+1]}),e.jsx("input",{type:"text",value:A.floor_id,onChange:I=>S(M,"floor_id",I.target.value),className:"border rounded p-1 mr-2"})]},M))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 rounded bg-purple-600 text-white",children:f?"Saving...":"Save All"})]})]})}function BS({floor:t,onClose:a,onUpdated:r}){const[n,l]=E.useState({floor_id:t.floor_id||"",status:t.status||"active"}),d=b=>{const{name:g,value:w}=b.target;l({...n,[g]:w})},f=localStorage.getItem("token"),h=async b=>{b.preventDefault();try{(await Te.put(`/floors/${t.id}`,n,{headers:{Authorization:`Bearer ${f}`}})).data.success?r():ie.error("Failed to update floor")}catch(g){console.error("Error updating floor:",g),ie.error("Error updating floor")}};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:n.floor_id,onChange:d,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:d,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function LS({floor:t,apartment:a,onClose:r,onUploadSuccess:n}){const[l,d]=E.useState(!1),[f,h]=E.useState([]),[b,g]=E.useState([]),[w,k]=E.useState(!0),C=E.useRef(null);E.useEffect(()=>{M()},[t.id]);const S=B=>{const H=Array.from(B.target.files);g(U=>[...U,...H])},D=B=>{g(H=>H.filter((U,L)=>L!==B))},A=async()=>{if(b.length===0){ie.error("Please select at least one file");return}try{d(!0);const B=new FormData;b.forEach(U=>{B.append("documents",U)}),B.append("apartmentId",a.id),B.append("floorId",t.id),(await Te.post("/floor-documents/upload",B,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(g([]),n?.(),M(),C.current&&(C.current.value=""))}catch(B){console.error("Upload error:",B);const H=B.response?.data?.message||"Failed to upload floor documents";ie.error(H)}finally{d(!1)}},M=async()=>{try{k(!0);const B=await Te.get(`/floor-documents/${t.id}/documents`);B.data.success&&h(B.data.data)}catch(B){console.error("Error loading floor documents:",B);const H=B.response?.data?.message||"Failed to load floor documents";ie.error(H)}finally{k(!1)}},I=async B=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Te.delete(`/floor-documents/documents/${B}`),ie.success("Floor document deleted successfully"),M()}catch(H){console.error("Delete error:",H);const U=H.response?.data?.message||"Failed to delete floor document";ie.error(U)}},F=async B=>{try{const H=await Te.get(`/floor-documents/documents/${B.id}/download`,{responseType:"blob"}),U=window.URL.createObjectURL(new Blob([H.data])),L=document.createElement("a");L.href=U,L.setAttribute("download",B.original_name||B.file_name),document.body.appendChild(L),L.click(),L.remove(),window.URL.revokeObjectURL(U)}catch(H){console.error("Download error:",H);const U=H.response?.data?.message||"Failed to download floor document";ie.error(U)}},T=B=>{if(B===0)return"0 Bytes";const H=1024,U=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(B)/Math.log(H));return parseFloat((B/Math.pow(H,L)).toFixed(2))+" "+U[L]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",t.floor_id]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",t.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:C,onChange:S,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>C.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((B,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:B.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:T(B.size)})]})]}),e.jsx("button",{onClick:()=>D(H),className:"text-red-500 hover:text-red-700",children:e.jsx(gr,{size:16})})]},H))})]}),b.length>0&&e.jsx("button",{onClick:A,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),w?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:f.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:B.original_name||B.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[T(B.file_size),"  Uploaded on ",new Date(B.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(B),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ml,{size:18})}),e.jsx("button",{onClick:()=>I(B.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:18})})]})]},B.id))})]})]})}function PS(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),[l,d]=E.useState(window.innerWidth<768),{id:f}=gn(),[h,b]=E.useState(null),g=hr(),[w,k]=E.useState([]),[C,S]=E.useState(null),[D,A]=E.useState(!0),[M,I]=E.useState(!1),[F,T]=E.useState(!1),[B,H]=E.useState(null),[U,L]=E.useState(!1),[P,z]=E.useState(null),[W,ee]=E.useState(!1),[G,ne]=E.useState(null),[le,Y]=E.useState(!1),[X,de]=E.useState(null);E.useEffect(()=>{const ve=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",ve),()=>window.removeEventListener("resize",ve)},[]),E.useEffect(()=>{f&&(async()=>{try{const Le=await Te.get(`/apartments/${f}`);Le.data.success&&b(Le.data.data)}catch(Le){console.error("Error fetching apartment:",Le)}})()},[f]);const ye=()=>{g("/apartmentview")},oe=async()=>{try{A(!0),S(null);const ve=await Te.get(`/floors?apartment_id=${f}`);ve.data.success&&Array.isArray(ve.data.data)?k(ve.data.data):k([])}catch(ve){console.error("Error loading floors:",ve),S("Failed to load floors. Please try again.")}finally{A(!1)}};E.useEffect(()=>{oe()},[f]);const xe=ve=>{g(`/houses/${f}/${ve.id}`)},ae=ve=>{z(ve),L(!0)},q=()=>{L(!1),z(null)},K=async ve=>{try{const Le=await Te.patch(`/floors/${ve.id}/toggle`);ie.success(Le.data.message),oe()}catch(Le){console.error("Error toggling floor:",Le),ie.error("Failed to toggle floor status")}},se=()=>{I(!0)},re=()=>{I(!1)},te=()=>{oe(),I(!1),ie.success("Floor created successfully!")},Re=ve=>{H(ve),T(!0)},ke=()=>{T(!1),H(null)},Ve=()=>{oe(),T(!1),ie.success("Floor updated successfully!")},Oe=ve=>{ne(ve),ee(!0)},et=async()=>{try{if(!G)return;await Te.delete(`/floors/${G.id}`),ie.success("Floor deleted successfully"),ee(!1),ne(null),oe()}catch(ve){console.error("Delete floor error:",ve),ie.error("Failed to delete floor")}},be=()=>{ee(!1),ne(null)},Ae=ve=>{de(ve),Y(!0)},Fe=()=>{Y(!1),de(null)},Ce=()=>{ie.success("Floor documents uploaded successfully!")},Je=()=>e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Tc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Je,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>n(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>n(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ye,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(Mn,{size:l?20:25})}),e.jsx(Fi,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Floors"}),h&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Apartment: ",h.name]})]})]}),e.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Ca,{size:l?16:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading floors..."})]}):C?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:C}),e.jsx("button",{onClick:oe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No floors found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding floors"}),e.jsx("button",{onClick:se,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First Floor"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Floors: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map((ve,Le)=>e.jsxs("div",{onClick:()=>ve.is_active&&xe(ve),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${ve.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["Floor ",ve.floor_id]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-3",children:[e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Houses:"})," ",ve.house_count]}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full 
                                                                ${ve.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ve.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":ve.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:ve.status.charAt(0).toUpperCase()+ve.status.slice(1)})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Ae(ve)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(xr,{size:14})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Re(ve)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Ea,{size:14})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),ae(ve)},className:`p-1.5 rounded-lg ${ve.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:ve.is_active?"Deactivate":"Activate",children:ve.is_active?e.jsx(po,{size:14}):e.jsx(go,{size:14})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Oe(ve)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Lr,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex justify-between",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded ${ve.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:ve.is_active?"Active":"Inactive"}),e.jsx("span",{children:"Click to view houses"})]})]},ve.id||Le))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Floors Management"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," floors"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((ve,Le)=>e.jsxs("tr",{onClick:()=>ve.is_active&&xe(ve),className:`transition-colors cursor-pointer ${ve.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ve.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ve.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${ve.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ve.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":ve.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:ve.status.charAt(0).toUpperCase()+ve.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Ae(ve)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(xr,{size:20})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Re(ve)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),ae(ve)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:ve.is_active?"Deactivate":"Activate",children:ve.is_active?e.jsx(po,{size:25}):e.jsx(go,{size:25})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Oe(ve)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},ve.id||Le))})]})]})})})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx("button",{onClick:re,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(FS,{onClose:re,onCreated:te,apartment_id:f})]})})}),F&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx("button",{onClick:ke,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(BS,{onClose:ke,onUpdated:Ve,floor:B})]})})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:P?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:P?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:q,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{P&&(K(P),L(!1),z(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${P?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:P?.is_active?"Deactivate":"Activate"})]})]})}),W&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.floor_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:be,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:et,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),le&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(LS,{floor:X,apartment:h,onClose:Fe,onUploadSuccess:Ce})})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function zS({onClose:t,apartment_id:a,onCreated:r}){const[n,l]=E.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),g=k=>{const{name:C,value:S}=k.target;l(D=>({...D,[C]:S}))},w=async k=>{k.preventDefault(),f(!0),b("");try{const C=await Te.post("/housetype",{...n,apartment_id:a},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});C.data.success?(r?.(C.data.data),t()):b("Failed to save house type")}catch(C){console.error("Error saving house type:",C),b("Error saving house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,placeholder:"House Type Name"}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:n.sqrfeet,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:n.rooms,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:n.bathrooms,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function US({housetype:t,onClose:a,onUpdated:r}){const[n,l]=E.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),g=localStorage.getItem("token");E.useEffect(()=>{t&&l({name:t.name||"",sqrfeet:t.sqrfeet||"",rooms:t.rooms||"",bathrooms:t.bathrooms||""})},[t]);const w=C=>{const{name:S,value:D}=C.target;l(A=>({...A,[S]:D}))},k=async C=>{C.preventDefault(),f(!0),b("");try{const S=await Te.put(`/housetype/${t.id}`,n,{headers:{Authorization:`Bearer ${g}`}});S.data.success?(r&&r(S.data.data),a&&a()):b(S.data.message||"Failed to update house type")}catch(S){console.error("Update error:",S),b("Error updating house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:n.sqrfeet,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:n.rooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:n.bathrooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function dw(){const{apartment_id:t}=gn(),[a,r]=E.useState(!1),[n,l]=E.useState(null),[d,f]=E.useState([]),[h,b]=E.useState(!1),[g,w]=E.useState(!1),[k,C]=E.useState(null),[S,D]=E.useState(!1),[A,M]=E.useState(null),I=async()=>{try{r(!0),l(null);const ee=await Te.get(`/housetype?apartment_id=${t}`);ee.data.success&&Array.isArray(ee.data.data)?f(ee.data.data):f([])}catch(ee){console.error("Error loading houses:",ee),l("Failed to load houses. Please try again.")}finally{r(!1)}};E.useEffect(()=>{I()},[t]);const F=()=>{b(!0)},T=()=>{b(!1)},B=()=>{I(),b(!1),ie.success("House Type Created Successfully")},H=ee=>{C(ee),w(!0)},U=()=>{w(!1),C(null)},L=()=>{I(),w(!1),ie.success("House Type updated successfully!")},P=ee=>{M(ee),D(!0)},z=async()=>{try{if(!A)return;await Te.delete(`/houseType/${A.id}`),ie.success("House type deleted successfully"),D(!1),M(null),I()}catch(ee){console.error("Delete house type error:",ee),ie.error("Failed to delete house type")}},W=()=>{D(!1),M(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:F,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"New House Type"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):n?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[n,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(ee=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ee.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ee.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ee.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ee.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:G=>{G.stopPropagation(),H(ee)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:G=>{G.stopPropagation(),P(ee)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},ee.id))})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:T,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(zS,{onClose:T,onCreated:B,apartment_id:t})]})}),g&&k&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:U,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx(US,{onClose:U,onUpdated:L,housetype:k})]})}),S&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',A.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:W,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function HS({houseowner:t,onClose:a,onUpdated:r}){const[n,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState(null),[g,w]=E.useState(null),[k,C]=E.useState([]),[S,D]=E.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});E.useEffect(()=>{t&&(D({name:t.name||"",occupation:t.occupation||"",country:t.country||"",mobile:t.mobile||"",email:t.email||"",occupied_way:t.occupied_way||"own",proof:t.proof||""}),t.proof&&w(t.proof))},[t]),E.useEffect(()=>{(async()=>{try{const L=await Te.get("/countries");C(L.data.data||[])}catch(L){console.error("Error fetching countries:",L)}})()},[]);const A=U=>{const{name:L,value:P}=U.target;D(z=>({...z,[L]:P}))},M=U=>{const L=U.target.files[0];if(L)if(b(L),L.type.startsWith("image/")){const P=new FileReader;P.onloadend=()=>{w(P.result)},P.readAsDataURL(L)}else w(null)},I=U=>{const L=U.target.value,P=k.find(z=>z.id.toString()===L);D(P?z=>({...z,country:P.country_name,mobile:P.phone_code+" "+z.mobile.replace(/^\+\d+\s?/,"")}):z=>({...z,country:"",mobile:z.mobile.replace(/^\+\d+\s?/,"")}))},F=U=>{const L=U.target.value;if(S.mobile&&S.mobile.includes("+")){const P=S.mobile.match(/^(\+\d+)(?:\s|$)/);if(P){const z=P[1];L.startsWith(z)?D(W=>({...W,mobile:L})):D(W=>({...W,mobile:z+" "+L.replace(/^\+\d+\s?/,"")}));return}}D(P=>({...P,mobile:L}))},T=async U=>{U.preventDefault(),f(!0);try{const L=new FormData;Object.keys(S).forEach(z=>{z!=="proof"&&L.append(z,S[z])}),h&&L.append("proof",h);const P=await Te.put(`/houseowner/${t.id}`,L,{headers:{"Content-Type":"multipart/form-data"}});P.data.success&&(r(P.data.data),a())}catch(L){console.error("Error updating house owner:",L),alert("Error updating house owner. Please try again.")}finally{f(!1)}},H=k.find(U=>U.country_name===S.country)?.phone_code||"";return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Gt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(gr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(us,{size:16,className:"inline mr-2"}),"Name *"]}),e.jsx("input",{type:"text",name:"name",value:S.name,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx($u,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:S.occupation,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx($v,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:k.find(U=>U.country_name===S.country)?.id||"",onChange:I,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),k.map(U=>e.jsxs("option",{value:U.id,children:[U.country_name," (",U.phone_code,")"]},U.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Dc,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[H&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:H}),e.jsx("input",{type:"tel",name:"mobile",value:S.mobile.replace(/^\+\d+\s?/,""),onChange:F,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${H?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ho,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:S.email,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:S.occupied_way,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Is,{size:16,className:"inline mr-2"}),"Proof Document"]}),g&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(xr,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:S.proof.split("/").pop()})}),e.jsx("a",{href:`${Te.defaults.baseURL}/houseowner/view-proof/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:M,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(Is,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),h&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",h.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function VS({houseownerId:t,onClose:a,onSuccess:r}){const[n,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState({name:"",nic:"",email:"",phone:"",houseowner_id:t}),[g,w]=E.useState({});E.useEffect(()=>{b({name:"",nic:"",email:"",phone:"",houseowner_id:t}),w({})},[t]);const k=()=>{const A={};return h.name.trim()||(A.name="Name is required"),h.nic.trim()||(A.nic="NIC is required"),h.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)&&(A.email="Invalid email address"),h.phone&&!/^[0-9+\-\s()]{10,}$/.test(h.phone.replace(/\s/g,""))&&(A.phone="Invalid phone number"),w(A),Object.keys(A).length===0},C=A=>{const{name:M,value:I}=A.target;b(F=>({...F,[M]:I})),g[M]&&w(F=>({...F,[M]:""}))},S=async A=>{if(A.preventDefault(),!!k()){f(!0);try{const M=await Te.post("/family",{...h,houseowner_id:t});M.data.success&&(r(M.data.data),a())}catch(M){console.error("Error adding family member:",M),M.response?.data?.error?w(I=>({...I,general:M.response.data.message||"Failed to add family member"})):w(I=>({...I,general:"Failed to add family member. Please try again."}))}finally{f(!1)}}},D=A=>{const I=A.target.value.replace(/[^\d+\-\s]/g,"");b(F=>({...F,phone:I})),g.phone&&w(F=>({...F,phone:""}))};return n?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Gt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zu,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(gr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[g.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:g.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(us,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:d}),g.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Wv,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:d}),g.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ho,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:d}),g.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Dc,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:D,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:d}),g.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Zu,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function GS({member:t,onClose:a,onUpdated:r}){const[n,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState({}),[g,w]=E.useState({name:"",email:"",phone:""});E.useEffect(()=>{t&&w({name:t.name||"",email:t.email||"",phone:t.phone||""})},[t]);const k=()=>{const D={};return g.name.trim()||(D.name="Name is required"),g.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)&&(D.email="Invalid email address"),g.phone&&!/^[0-9+\-\s()]{10,}$/.test(g.phone.replace(/\s/g,""))&&(D.phone="Invalid phone number"),b(D),Object.keys(D).length===0},C=D=>{const{name:A,value:M}=D.target;w(I=>({...I,[A]:M})),h[A]&&b(I=>({...I,[A]:""}))},S=async D=>{if(D.preventDefault(),!!k()){f(!0);try{const A=await Te.put(`/family/${t.id}`,g);A.data.success&&(r(A.data.data),a())}catch(A){console.error("Error updating family member:",A),b(M=>({...M,general:A.response?.data?.message||"Failed to update family member"}))}finally{f(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(gr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[h.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(us,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:g.name,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:d}),h.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(ho,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:g.email,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Dc,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:g.phone,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cf,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function YS(){const[t,a]=E.useState(!1),[r,n]=E.useState("type"),{apartment_id:l,floor_id:d,id:f}=gn(),[h,b]=E.useState(null),[g,w]=E.useState(null),[k,C]=E.useState(null),[S,D]=E.useState(null),[A,M]=E.useState(null),[I,F]=E.useState([]),[T,B]=E.useState(!1),[H,U]=E.useState([]),[L,P]=E.useState(!1),[z,W]=E.useState(!1),[ee,G]=E.useState(!1),[ne,le]=E.useState(!1),[Y,X]=E.useState(!1),[de,ye]=E.useState(null),oe=hr();E.useEffect(()=>{l&&Te.get(`/apartments/${l}`).then(ke=>ke.data.success&&b(ke.data.data)).catch(ke=>console.error("Error fetching apartment:",ke))},[l]),E.useEffect(()=>{d&&Te.get(`/floors/${d}`).then(ke=>ke.data.success&&w(ke.data.data)).catch(ke=>console.error("Error fetching floor:",ke))},[d]),E.useEffect(()=>{f&&Te.get(`/houses/${f}`).then(ke=>ke.data.success&&C(ke.data.data)).catch(ke=>console.error("Error fetching house:",ke))},[f]),E.useEffect(()=>{k?.housetype_id&&Te.get(`/housetype/${k.housetype_id}`).then(ke=>ke.data.success&&D(ke.data.data)).catch(ke=>console.error("Error fetching house type:",ke))},[k]),E.useEffect(()=>{k?.houseowner_id&&Te.get(`/houseowner/${k.houseowner_id}`).then(ke=>ke.data.success&&M(ke.data.data)).catch(ke=>console.error("Error fetching house owner: ",ke))},[k]),E.useEffect(()=>{k?.houseowner_id&&xe(k.houseowner_id)},[k]);const xe=async ke=>{try{B(!0);const Ve=await Te.get(`/family/houseowner/${ke}`);Ve.data.success&&F(Ve.data.data||[])}catch(Ve){console.error("Error fetching family members: ",Ve),F([])}finally{B(!1)}};E.useEffect(()=>{f&&ae()},[f]);const ae=async()=>{try{P(!0);const ke=await Te.get(`/bill-assignments/house/${f}`);ke.data.success&&U(ke.data.data||[])}catch(ke){console.error("Error fetching assigned bills:",ke),U([])}finally{P(!1)}},q=()=>{oe(`/houses/${l}/${d}`)},K=ke=>new Date(ke).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),se=async()=>{if(!A?.id){ie.warning("House owner information not available");return}try{W(!0);try{const Fe=await Te.head(`/houseowner/download-proof/${A.id}`);ie.info("Proof document found, starting download...")}catch(Fe){console.error("HEAD request failed:",Fe.response?.status||Fe.message)}const ke=await Te.get(`/houseowner/download-proof/${A.id}`,{responseType:"blob"});if(ie.info(`Download response status: ${ke.status}`),ke.status!==200){const Fe=await ke.data.text();ie.error(`Error response: ${Fe}`);let Ce=`Download failed with status ${ke.status}`;try{const Je=JSON.parse(Fe);Je.message&&(Ce=Je.message)}catch{Fe&&(Ce=Fe)}throw new Error(Ce)}const Ve=new Blob([ke.data]),Oe=window.URL.createObjectURL(Ve),et=document.createElement("a");et.href=Oe;const be=ke.headers["content-disposition"];let Ae="owner_proof.jpg";if(be){const Fe=be.match(/filename="?([^"]+)"?/);Fe&&(Ae=Fe[1],ie.info(`Filename from header: ${Ae}`))}else if(A.proof){const Fe=A.proof.split("/");Ae=Fe[Fe.length-1]||Ae}et.download=Ae,document.body.appendChild(et),et.click(),document.body.removeChild(et),setTimeout(()=>{window.URL.revokeObjectURL(Oe)},100),ie.success("Download successful")}catch(ke){ie.error("Error downloading proof"),console.error("Error details:",{name:ke.name,message:ke.message,stack:ke.stack,response:ke.response?.data}),ke.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):ke.response?.status===500?alert("Server error occurred. Please check server logs."):ke.message?alert(`Download failed: ${ke.message}`):alert("Failed to download proof document. Please try again.")}finally{W(!1)}},re=()=>{k?.houseowner_id?le(!0):ie.warning("House owner information is required before adding family members.")},te=ke=>{ye(ke),X(!0)},Re=async ke=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await Te.delete(`/family/${ke}`),k?.houseowner_id&&xe(k.houseowner_id)}catch{ie.error("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:q,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:25})}),e.jsx(Hr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),h&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",h.name]}),g&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",g.floor_id]}),k&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",k.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>n("type"),className:`px-4 py-2 font-semibold 
                                    ${r==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>n("owner"),className:`px-4 py-2 font-semibold 
                                    ${r==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>n("residents"),className:`px-4 py-2 font-semibold 
                                    ${r==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",I.length,")"]}),e.jsx("button",{onClick:()=>n("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${r==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),r==="type"&&S&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(Hr,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(q0,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:S.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(q0,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[S.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(J6,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:S.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Z6,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:S.bathrooms})]})]})})]})]}),r==="owner"&&A&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(us,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:A.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:A.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),A.houseowner_id&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," House Owner"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>G(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Ea,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ng,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx($u,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:A.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:K(k.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($v,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Dc,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(ho,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:A.email||"N/A"})]})]}),A.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:se,disabled:z,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:z?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ml,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:A.proof.split("/").pop()})]})]})]})]})]})]}),r==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(ni,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:re,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(Zu,{size:18,className:"mr-2"}),"Add Family Member"]})]}),T?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):I.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(ni,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:re,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(Zu,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(ke=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:ke.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:ke.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Wv,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:ke.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>te(ke),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Ea,{size:18})}),e.jsx("button",{onClick:()=>Re(ke.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(Lr,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[ke.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx($u,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:ke.occupation})]})]}),ke.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(ho,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:ke.email})]})]}),ke.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(rE,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:ke.phone})]})]}),ke.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(_l,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:K(ke.moved_at)})]})]})]})]},ke.id))})]}),r==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(xr,{className:"mr-2",size:20}),"Assigned Bills"]}),L?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(Gt,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:H.map(ke=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Xs,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:ke.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:ke.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(_l,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:K(ke.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ke.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:ke.status||"active"})})]})},ke.id))})]})]})})]}),ee&&A&&e.jsx(HS,{houseowner:A,onClose:()=>G(!1),onUpdated:ke=>{M(ke),G(!1)}}),ne&&k?.houseowner_id&&e.jsx(VS,{houseownerId:k.houseowner_id,onClose:()=>le(!1),onSuccess:ke=>{F(Ve=>[ke,...Ve]),le(!1)}}),Y&&de&&e.jsx(GS,{member:de,onClose:()=>{X(!1),ye(null)},onUpdated:ke=>{xe(),F(Ve=>Ve.map(Oe=>Oe.id===ke.id?ke:Oe)),X(!1),ye(null)}}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function XS({onClose:t,onCreated:a,apartment_id:r,floor_id:n}){const[l,d]=E.useState([{numHouses:1,housetype_id:""}]),[f,h]=E.useState(""),[b,g]=E.useState([]),[w,k]=E.useState([]),[C,S]=E.useState([]),[D,A]=E.useState(!1),[M,I]=E.useState(!0),[F,T]=E.useState("");E.useEffect(()=>{(async()=>{try{const le=await Te.get(`/houses?apartment_id=${r}&floor_id=${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});le.data?.data?.length>0&&S(le.data.data)}catch(le){console.error("Error fetching existing houses:",le)}finally{I(!1)}})()},[r,n]),E.useEffect(()=>{(async()=>{try{const le=await Te.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});k(le.data.data||[])}catch(le){console.error("Error fetching house types:",le)}})()},[r]);const B=ne=>{if(!ne||C.length===0)return 0;const le=C.filter(X=>X.house_id&&X.house_id.startsWith(ne)).map(X=>{const ye=X.house_id.slice(ne.length).match(/^\d+$/);return ye?parseInt(ye[0]):0}).filter(X=>X>0);return le.length===0?0:Math.max(...le)},H=()=>{d(ne=>[...ne,{numHouses:1,housetype_id:""}])},U=ne=>{if(l.length===1){T("At least one house type row is required");return}d(le=>le.filter((Y,X)=>X!==ne))},L=(ne,le,Y)=>{d(X=>X.map((de,ye)=>ye===ne?{...de,[le]:Y}:de))},P=()=>{if(!f.trim()){T("Please enter a key letter/prefix");return}if(l.filter(ye=>!ye.housetype_id||ye.numHouses<1).length>0){T("Please select house type and ensure number of houses is at least 1 for all rows");return}T("");const le=f.trim().toUpperCase();let X=B(le)+1;const de=[];l.forEach(ye=>{const oe=w.find(xe=>xe.id===ye.housetype_id);for(let xe=0;xe<ye.numHouses;xe++)de.push({house_id:`${le}${X}`,housetype_id:ye.housetype_id,house_type_name:oe?.name||""}),X++}),g(de)},z=(ne,le)=>{const Y=[...b];Y[ne].housetype_id=le;const X=w.find(de=>de.id===le);Y[ne].house_type_name=X?.name||"",g(Y)},W=async ne=>{if(ne.preventDefault(),T(""),A(!0),b.filter(Y=>!Y.housetype_id).length>0){T("Please select house type for all houses"),A(!1);return}try{const Y={apartment_id:r,floor_id:n,houses:b.map(de=>({house_id:de.house_id,housetype_id:de.housetype_id}))},X=await Te.post("/houses/batch",Y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a&&a(),t&&t()}catch(Y){console.error("Error creating houses:",Y),T(Y.response?.data?.message||"Server error while creating houses.")}finally{A(!1)}},ee=ne=>{h(ne.target.value),g([])},G=l.reduce((ne,le)=>ne+(le.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[F&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:F}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:f,onChange:ee,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(Ca,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:l.map((ne,le)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:ne.numHouses,onChange:Y=>L(le,"numHouses",parseInt(Y.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:ne.housetype_id,onChange:Y=>L(le,"housetype_id",Y.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>U(le),disabled:l.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(Lr,{size:16})})})]},le))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:G})]})})]}),f.trim()&&C.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',f.toUpperCase(),'":']})," Found ",B(f.trim().toUpperCase())," existing houses.",B(f.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${B(f.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:P,disabled:!f.trim()||M||G===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:M?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",G," House",G!==1?"s":"",e.jsx(G6,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),b.length>0?e.jsxs("form",{onSubmit:W,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",b.length," house",b.length!==1?"s":"",' with prefix "',f.toUpperCase(),'"']}),b.map((ne,le)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:ne.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:ne.housetype_id,onChange:Y=>z(le,Y.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]})]}),ne.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",ne.house_type_name]})]},le))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:t,disabled:D,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${b.length} House${b.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function qS({isOpen:t,onClose:a,onImportSuccess:r,apartment_id:n,floor_id:l,house_id:d}){const[f,h]=E.useState(null),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(null),[D,A]=E.useState(n||""),M=z=>{z.preventDefault(),g(!0)},I=z=>{z.preventDefault(),g(!1)},F=z=>{z.preventDefault(),g(!1);const W=z.dataTransfer.files[0];W&&B(W)},T=z=>{const W=z.target.files[0];W&&B(W)},B=z=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(z.type)){ie.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(z.size>10*1024*1024){ie.error("File size must be less than 10MB");return}h(z),S(null)},H=()=>{const z=`name,nic,occupation,country,mobile,email,occupied_way
John Doe,123456789V,Software Engineer,Sri Lanka,+94 771234567,john.doe@example.com,own

Instructions:
1. Fill in the house owner details in the second row
2. Keep the column headers as shown in the first row
3. Save the file and upload it here
4. The system will extract the information automatically

Important:
- Fill only one row (single house owner)
- Email is required for verification
- Mobile should include country code
- occupied_way can be "own" or "For rent"`,W=new Blob([z],{type:"text/csv"}),ee=window.URL.createObjectURL(W),G=document.createElement("a");G.href=ee,G.download="house_owner_template.csv",document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(ee),ie.success("Template downloaded successfully!")},U=async()=>{if(!f){ie.error("Please select a file first");return}if(!n){ie.error("Apartment information is missing");return}k(!0);const z=new FormData;z.append("excelFile",f),z.append("apartment_id",n),d&&z.append("house_id",d);try{const W=await Te.post("/houseowner/import-from-excel",z,{headers:{"Content-Type":"multipart/form-data"}});W.data.success&&(S(W.data.data),r&&r(W.data.data.houseOwner),ie.success("House owner imported successfully!"))}catch(W){console.error("Import error:",W),ie.error(W.response?.data?.message||"Failed to import house owner")}finally{k(!1)}},L=()=>{h(null),S(null)},P=()=>{L(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Import House Owner from Excel"}),e.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(gr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:C?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ha,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"House Owner Imported Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Verification email has been sent to ",C.houseOwner.email]})]})]})}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"Imported House Owner Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"NIC/Passport"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.nic})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.occupation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"House Owner ID"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.id})]})]}),C.house&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Linked to House:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"House ID:"}),e.jsx("p",{className:"font-medium",children:C.house.house_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),e.jsx("p",{className:"font-medium text-green-600",children:"Occupied"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:L,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another"}),e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our template to ensure proper formatting"})]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ml,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${b?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:M,onDragLeave:I,onDrop:F,children:[e.jsx(_C,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:f?f.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:T})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"File Format Requirements:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Column Name"}),e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t pt-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"name"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Full name of house owner"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"nic"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"NIC or passport number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"email"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Email address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupation"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Occupation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"country"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Country name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"mobile"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Mobile number with country code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupied_way"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:'"own" or "For rent"'})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("strong",{children:"Note:"})," Only the first row of the Excel file will be imported."]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:w,children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!f||w,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:16}),"Import House Owner"]})})]})]})})]})}):null}function $S({house:t,onClose:a,onUpdated:r,apartment_id:n,floor_id:l}){const[d,f]=E.useState({house_id:t.house_id,status:t.status,housetype_id:t.housetype_id,houseowner_id:t.houseowner_id}),[h,b]=E.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[g,w]=E.useState([]),[k,C]=E.useState(!1),[S,D]=E.useState(!1),[A,M]=E.useState(null),[I,F]=E.useState([]),[T,B]=E.useState(!0),[H,U]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const ye=await(await fetch("https://general.apivcm.shop/countries")).json();F(ye.data)}catch(de){console.error("Error fetching countries:",de)}})()},[]),E.useEffect(()=>{const X=async()=>{try{const de=await Te.get("/auth/me");if(de.data?.success&&de.data.data&&de.data.data.length>0){const ye=de.data.data[0],oe=ye.country||ye.country_name||"";if(oe){const xe=(I||[]).find(ae=>ae.country===oe||ae.country_name===oe);b(ae=>({...ae,country:ae.country||oe,mobile:ae.mobile||(xe?xe.international_dialing+" ":ae.mobile)}))}}}catch(de){console.error("Error fetching admin profile for prefill:",de)}};I&&I.length>0&&X()},[I]);const L=X=>{const de=X.target.value,ye=I.find(oe=>oe.country===de);b(oe=>({...oe,country:de,mobile:ye?ye.international_dialing+" ":oe.mobile}))},P=X=>{const de=X.target.value;if(ne){const ye=de.replace(/\D/g,""),oe=ne.international_dialing.replace(/\D/g,""),xe=ye.startsWith(oe)?ye.slice(oe.length):ye;b(ae=>({...ae,mobile:ne.international_dialing+(xe?" "+xe:"")}))}else b(ye=>({...ye,mobile:de}))};E.useEffect(()=>{(async()=>{try{const de=await Te.get(`/housetype?apartment_id=${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});w(de.data.data||[])}catch(de){console.error("Error fetching house types:",de)}})()},[n]),E.useEffect(()=>{d.status==="occupied"&&t.status!=="occupied"?(D(!0),B(!0)):d.status!=="occupied"&&D(!1)},[d.status,t.status]);const z=X=>{f({...d,[X.target.name]:X.target.value})},W=X=>{b({...h,[X.target.name]:X.target.value})},ee=X=>{M(X.target.files[0])},G=async X=>{X.preventDefault(),C(!0);try{let de=d.houseowner_id,ye=!1;if(d.status==="occupied"&&!de){const ae=new FormData;ae.append("name",h.name),ae.append("nic",h.nic),ae.append("occupation",h.occupation),ae.append("country",h.country),ae.append("mobile",h.mobile),ae.append("email",h.email),ae.append("occupied_way",h.occupied_way),ae.append("apartment_id",n),A&&ae.append("proof",A);const q=await Te.post("/houseowner",ae,{headers:{"Content-Type":"multipart/form-data"}});q.data.success&&(de=q.data.data.id,ye=!0,f(K=>({...K,houseowner_id:de})))}const oe={...d,house_owner_id:de||de};if((await Te.put(`/houses/${t.id}`,oe)).data.success)return ye?(r(),ie.success("House owner saved successfully! You can now setup login.")):r(),de}catch(de){console.error("Error updating house:",de),ie.error("Error updating house. Please try again.")}finally{C(!1)}},ne=I.find(X=>X.country===h.country),le=async()=>{try{C(!0);const X=d.houseowner_id;if(!X){ie.error("House owner ID not found. Please save the house owner first.");return}const de=h.email;if(!de||!de.includes("@")){ie.error("Please enter a valid email address for the house owner");return}if(!window.confirm(`Send verification email to ${de}?

The house owner will receive an email with verification link.`)){C(!1);return}const oe=await Te.post("/houseowner-auth/admin/setup",{houseowner_id:X,send_email:!0});oe.data.success?(ie.success("Verification email sent. Check your inbox "),r()):ie.error(oe.data.message||"Failed to set up house owner")}catch(X){console.error("Error setting up house owner:",X),ie.error("Error setting up house owner. Please try again.")}finally{C(!1)}},Y=X=>{b({name:X.name||"",nic:X.nic||"",occupation:X.occupation||"",country:X.country||"",mobile:X.mobile||"",email:X.email||"",occupied_way:X.occupied_way||"own",proof:null}),X.id&&f(de=>({...de,houseowner_id:X.id})),U(!1)};return e.jsxs("form",{onSubmit:G,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 pl-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:d.house_id,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:d.housetype_id,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),g&&g.length>0?g.map(X=>e.jsx("option",{value:X.id,children:X.name||X.type_name||"Unnamed Type"},X.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:d.status,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),S&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{type:"button",onClick:()=>B(!T),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),T?e.jsx(Nc,{size:20,className:"text-gray-500"}):e.jsx(Tl,{size:20,className:"text-gray-500"})]}),e.jsxs("button",{type:"button",onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Is,{size:16}),"Import from Excel"]})]}),T&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:W,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:W,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:h.occupation,onChange:W,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsx("input",{name:"country",list:"owner-country-list",value:h.country||"",onChange:L,placeholder:"Select or type country *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0}),e.jsx("datalist",{id:"owner-country-list",children:I.map(X=>e.jsx("option",{value:X.country},X.country))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{name:"mobile",value:h.mobile,onChange:P,placeholder:ne?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${ne?"rounded-l-none":""}`,required:!0,disabled:!ne})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",ne?.international_dialing||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:h.email,onChange:W,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:h.occupied_way,onChange:W,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:ee,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]}),e.jsx("div",{className:"text-center pt-2 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Or"," ",e.jsx("button",{type:"button",onClick:()=>U(!0),className:"text-purple-600 hover:text-purple-700 underline",children:"import from Excel file"})," ","instead of manual entry"]})})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[k&&e.jsx(Gt,{size:16,className:"animate-spin"}),S?"Save House & Owner":"Save Changes"]}),(d.houseowner_id||S&&h.email)&&e.jsx("button",{type:"button",onClick:le,disabled:k||!h.email,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",title:h.email?"Setup login for house owner":"Enter email first",children:"Setup Auth"})]})}),e.jsx(qS,{isOpen:H,onClose:()=>U(!1),onImportSuccess:Y,apartment_id:n,house_id:t.id,floor_id:l})]})}function WS({onClose:t,onCreated:a}){const[r,n]=E.useState({bill_name:"",billtype:""}),[l,d]=E.useState(!1),[f,h]=E.useState(""),[b,g]=E.useState([]),w=C=>{const{name:S,value:D}=C.target;n(A=>({...A,[S]:D})),S==="bill_name"&&f&&h("")},k=async C=>{if(C.preventDefault(),d(!0),h(""),!r.bill_name.trim()||!r.billtype){h("Please fill in all required fields"),d(!1);return}try{const S=await Te.post("/bills",{bill_name:r.bill_name.trim(),billtype:r.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});S.data.success?(a?.(S.data.data),ie.success("Bill type created successfully"),t()):h(S.data.message||"Failed to save bill type")}catch(S){console.error("Error saving bill type:",S);const D=S.response?.data?.message||"Error saving bill type. Please try again.";h(D),S.response?.status===409&&ie.error(D)}finally{d(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:r.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:r.bill_name,onChange:w,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.bill_name.trim()||!r.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.bill_name.trim()||!r.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function uw({bills:t,onClose:a,onUpdated:r}){const[n,l]=E.useState({bill_name:"",billtype:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),g=localStorage.getItem("token");E.useEffect(()=>{t&&l({bill_name:t.bill_name||"",billtype:t.billtype||""})},[t]);const w=C=>{const{name:S,value:D}=C.target;l(A=>({...A,[S]:D}))},k=async C=>{C.preventDefault(),f(!0),b("");try{const S=await Te.put(`/bills/${t.id}`,n,{headers:{Authorization:`Bearer ${g}`}});S.data.success?(r&&r(S.data.data),a&&a()):b(S.data.message||"Failed to update bill type")}catch(S){console.error("Update error:",S),b("Error updating bill type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:n.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:n.bill_name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function fw({isOpen:t,onClose:a,selectedBill:r,onAssignSuccess:n}){const[l,d]=E.useState([]),[f,h]=E.useState({}),[b,g]=E.useState({}),[w,k]=E.useState(""),[C,S]=E.useState(""),[D,A]=E.useState([]),[M,I]=E.useState({}),[F,T]=E.useState({}),[B,H]=E.useState(!1),[U,L]=E.useState({}),[P,z]=E.useState({}),[W,ee]=E.useState(!1),G=async()=>{try{H(!0);const K=await Te.get("/apartments");K.data.success&&d(K.data.data||[])}catch(K){console.error("Error loading apartments:",K),ie.error("Failed to load apartments")}finally{H(!1)}},ne=async K=>{if(K)try{L(re=>({...re,[K]:!0}));const se=await Te.get(`/floors?apartment_id=${K}`);if(se.data.success){const re=se.data.data||[];h(te=>({...te,[K]:re}))}}catch(se){console.error("Error loading floors:",se),ie.error("Failed to load floors")}finally{L(se=>({...se,[K]:!1}))}},le=async(K,se)=>{if(!(!K||!se))try{z(te=>({...te,[se]:!0}));const re=await Te.get(`/houses?apartment_id=${K}&floor_id=${se}`);if(re.data.success){const te=re.data.data||[];g(Re=>({...Re,[se]:te}))}}catch(re){console.error("Error loading houses:",re),ie.error("Failed to load houses")}finally{z(re=>({...re,[se]:!1}))}},Y=async K=>{const se=M[K.id];!se&&!f[K.id]&&await ne(K.id),I(re=>({...re,[K.id]:!se})),se||(k(K.id),S(""),A([]))},X=async(K,se)=>{const re=`${K}-${se.id}`,te=F[re];!te&&!b[se.id]&&await le(K,se.id),T(Re=>({...Re,[re]:!te})),te||(S(se.id),A([]))},de=K=>{A(se=>se.includes(K)?se.filter(re=>re!==K):[...se,K])},ye=()=>{if(!C)return;const se=(b[C]||[]).map(te=>te.id),re=se.every(te=>D.includes(te));A(re?te=>te.filter(Re=>!se.includes(Re)):te=>{const Re=[...te];return se.forEach(ke=>{Re.includes(ke)||Re.push(ke)}),Re})},oe=()=>{if(!C)return!1;const K=b[C]||[];return K.length===0?!1:K.every(se=>D.includes(se.id))},xe=()=>{if(!C)return!1;const K=b[C]||[];return K.length===0?!1:K.some(se=>D.includes(se.id))&&!oe()},ae=async()=>{if(!w||!C||D.length===0){ie.error("Please select apartment, floor, and at least one house");return}ee(!0);try{const K={bill_id:r.id,apartment_id:w,floor_id:C,house_ids:D};await Te.post("/bill-assignments/assign",K),ie.success("Bill assign successfully"),n(),q()}catch(K){console.error("Error assigning bill:",K),ie.error(K.response?.data?.message||"Failed to assign bill")}finally{ee(!1)}},q=()=>{k(""),S(""),h({}),g({}),A([]),I({}),T({}),a()};return E.useEffect(()=>{t&&G()},[t]),t?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:q,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:r?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),B?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Gt,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:l.map(K=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${w===K.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>Y(K),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:K.name}),e.jsx("button",{onClick:se=>{se.stopPropagation(),Y(K)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:M[K.id]?e.jsx(Nc,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(Tl,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),M[K.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:U[K.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(Gt,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(f[K.id]||[]).map(se=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${C===se.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>X(K.id,se),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:se.floor_id}),e.jsx("button",{onClick:re=>{re.stopPropagation(),X(K.id,se)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:F[`${K.id}-${se.id}`]?e.jsx(Nc,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(Tl,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),F[`${K.id}-${se.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:P[se.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(Gt,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:oe(),ref:re=>{re&&(re.indeterminate=xe())},onChange:ye,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(b[se.id]||[]).map(re=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:D.includes(re.id),onChange:()=>de(re.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:re.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",re.status,")"]})]})]},re.id))})]})})]},se.id))})})]},K.id))})]}),D.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:D.length})," house",D.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:q,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:ae,disabled:!w||!C||D.length===0||W,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:W?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${D.length} House${D.length!==1?"s":""}`})]})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):null}function KS(){const[t,a]=E.useState(!1),[r,n]=E.useState(null),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(null),[D,A]=E.useState(null),[M,I]=E.useState(!1),[F,T]=E.useState(null);hr();const B=async()=>{try{a(!0),n(null);const Y=await Te.get("/bills");Y.data.success&&Array.isArray(Y.data.data)?d(Y.data.data):d([])}catch(Y){console.error("Error loading bills:",Y),n("Failed to load bills. Please try again.")}finally{a(!1)}};E.useEffect(()=>{B()},[]);const H=l.filter(Y=>Y.billtype==="Shared"),U=Y=>{A(Y),k(!0)},L=()=>{k(!1),A(null)},P=()=>{ie.success("Bill assigned successfully!")},z=Y=>{S(Y),g(!0)},W=()=>{g(!1),S(null)},ee=()=>{B(),g(!1),ie.success("Bill Type updated successfully!")},G=Y=>{T(Y),I(!0)},ne=async()=>{try{if(!F)return;await Te.delete(`/bills/${F.id}`),ie.success("Bill type deleted successfully"),I(!1),T(null),B()}catch(Y){console.error("Delete bill type error:",Y),ie.error("Failed to delete bill type")}},le=()=>{I(!1),T(null)};return e.jsxs("div",{children:[t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:B,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):H.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map((Y,X)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:X+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Y.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:de=>{de.stopPropagation(),U(Y)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(Ca,{size:20})}),e.jsx("span",{children:Y.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:de=>{de.stopPropagation(),z(Y)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:de=>{de.stopPropagation(),G(Y)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},Y.id))})]})}),b&&C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:W,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(uw,{onClose:W,onUpdated:ee,bills:C})]})}),e.jsx(fw,{isOpen:w,onClose:L,selectedBill:D,onAssignSuccess:P}),M&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',F.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function xw(){const[t,a]=E.useState(!1),[r,n]=E.useState(null),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(null),[D,A]=E.useState(null),[M,I]=E.useState(!1),[F,T]=E.useState(null),[B,H]=E.useState("bills"),U=hr(),L=async()=>{try{a(!0),n(null);const ae=await Te.get("/bills");ae.data.success&&Array.isArray(ae.data.data)?d(ae.data.data):d([])}catch(ae){console.error("Error loading bills:",ae),n("Failed to load bills. Please try again.")}finally{a(!1)}};E.useEffect(()=>{L()},[]);const P=l.filter(ae=>ae.billtype==="Measurable"),z=ae=>{A(ae),k(!0)},W=()=>{k(!1),A(null)},ee=()=>{ie.success("Bill assigned successfully!")},G=()=>{h(!0)},ne=()=>{h(!1)},le=()=>{L(),h(!1)},Y=ae=>{S(ae),g(!0)},X=()=>{g(!1),S(null)},de=()=>{L(),g(!1),ie.success("Bill Type updated successfully!")},ye=ae=>{T(ae),I(!0)},oe=async()=>{try{if(!F)return;await Te.delete(`/bills/${F.id}`),ie.success("Bill type deleted successfully"),I(!1),T(null),L()}catch(ae){console.error("Delete bill type error:",ae),ie.error("Failed to delete bill type")}},xe=()=>{I(!1),T(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:G,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>H("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${B==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",P.length,")"]}),e.jsx("button",{onClick:()=>H("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${B==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),B==="bills"&&e.jsx(e.Fragment,{children:t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:L,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):P.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:P.map((ae,q)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>U(`/billranges/${ae.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:q+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ae.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:K=>{K.stopPropagation(),z(ae)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(Ca,{size:20})}),e.jsx("span",{children:ae.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:K=>{K.stopPropagation(),Y(ae)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:K=>{K.stopPropagation(),ye(ae)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},ae.id))})]})})}),B==="sharedValueBills"&&e.jsx(KS,{}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ne,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(WS,{onClose:ne,onCreated:le})]})}),b&&C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:X,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(uw,{onClose:X,onUpdated:de,bills:C})]})}),e.jsx(fw,{isOpen:w,onClose:W,selectedBill:D,onAssignSuccess:ee}),M&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',F.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:xe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function ZS({house:t,apartment:a,floor:r,onClose:n,onUploadSuccess:l}){const[d,f]=E.useState(!1),[h,b]=E.useState([]),[g,w]=E.useState([]),[k,C]=E.useState(!0),S=E.useRef(null);E.useEffect(()=>{I()},[t.id]);const D=H=>{const U=Array.from(H.target.files);w(L=>[...L,...U])},A=H=>{w(U=>U.filter((L,P)=>P!==H))},M=async()=>{if(g.length===0){ie.error("Please select at least one file");return}try{f(!0);const H=new FormData;g.forEach(L=>{H.append("documents",L)}),H.append("apartmentId",a.id),H.append("floorId",r.id),H.append("houseId",t.id),(await Te.post("/house-documents/upload",H,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(ie.success("House documents uploaded successfully!"),w([]),l?.(),I(),S.current&&(S.current.value=""))}catch(H){console.error("Upload error:",H);const U=H.response?.data?.message||"Failed to upload house documents";ie.error(U)}finally{f(!1)}},I=async()=>{try{C(!0);const H=await Te.get(`/house-documents/${t.id}/documents`);H.data.success?b(H.data.data):console.error("API response not successful:",H.data)}catch(H){console.error("Error loading house documents:",H);const U=H.response?.data?.message||"Failed to load house documents";ie.error(U),H.response&&(console.error("Error response:",H.response.data),console.error("Error status:",H.response.status))}finally{C(!1)}},F=async H=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Te.delete(`/house-documents/documents/${H}`),ie.success("House document deleted successfully"),I()}catch(U){console.error("Delete error:",U);const L=U.response?.data?.message||"Failed to delete house document";ie.error(L)}},T=async H=>{try{const U=await Te.get(`/house-documents/documents/${H.id}/download`,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([U.data])),P=document.createElement("a");P.href=L,P.setAttribute("download",H.original_name||H.file_name),document.body.appendChild(P),P.click(),P.remove(),window.URL.revokeObjectURL(L)}catch(U){console.error("Download error:",U);const L=U.response?.data?.message||"Failed to download house document";ie.error(L)}},B=H=>{if(H===0)return"0 Bytes";const U=1024,L=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(H)/Math.log(U));return parseFloat((H/Math.pow(U,P)).toFixed(2))+" "+L[P]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",t.house_id]}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&r&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",r.floor_id," |",e.jsx("strong",{children:" House:"})," ",t.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:S,onChange:D,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>S.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),g.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:g.map((H,U)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:H.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:B(H.size)})]})]}),e.jsx("button",{onClick:()=>A(U),className:"text-red-500 hover:text-red-700",children:e.jsx(gr,{size:16})})]},U))})]}),g.length>0&&e.jsx("button",{onClick:M,disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:20}),"Upload ",g.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:h.map(H=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:H.original_name||H.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[B(H.file_size),"  Uploaded on ",new Date(H.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(H),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ml,{size:18})}),e.jsx("button",{onClick:()=>F(H.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:18})})]})]},H.id))})]})]})}const QS="modulepreload",JS=function(t){return"/"+t},db={},hw=function(a,r,n){let l=Promise.resolve();if(r&&r.length>0){let b=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");l=b(r.map(g=>{if(g=JS(g),g in db)return;db[g]=!0;const w=g.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${k}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":QS,w||(C.as="script"),C.crossOrigin="",C.href=g,h&&C.setAttribute("nonce",h),document.head.appendChild(C),w)return new Promise((S,D)=>{C.addEventListener("load",S),C.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&d(h.reason);return a().catch(d)})};var xc={},zh,ub;function eA(){return ub||(ub=1,zh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),zh}var Uh={},Nl={},fb;function No(){if(fb)return Nl;fb=1;let t;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Nl.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Nl.getSymbolTotalCodewords=function(n){return a[n]},Nl.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},Nl.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');t=n},Nl.isKanjiModeEnabled=function(){return typeof t<"u"},Nl.toSJIS=function(n){return t(n)},Nl}var Hh={},xb;function ig(){return xb||(xb=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function a(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,l){if(t.isValid(n))return n;try{return a(n)}catch{return l}}}(Hh)),Hh}var Vh,hb;function tA(){if(hb)return Vh;hb=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(a){const r=Math.floor(a/8);return(this.buffer[r]>>>7-a%8&1)===1},put:function(a,r){for(let n=0;n<r;n++)this.putBit((a>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),a&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Vh=t,Vh}var Gh,mb;function rA(){if(mb)return Gh;mb=1;function t(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return t.prototype.set=function(a,r,n,l){const d=a*this.size+r;this.data[d]=n,l&&(this.reservedBit[d]=!0)},t.prototype.get=function(a,r){return this.data[a*this.size+r]},t.prototype.xor=function(a,r,n){this.data[a*this.size+r]^=n},t.prototype.isReserved=function(a,r){return this.reservedBit[a*this.size+r]},Gh=t,Gh}var Yh={},gb;function aA(){return gb||(gb=1,function(t){const a=No().getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const l=Math.floor(n/7)+2,d=a(n),f=d===145?26:Math.ceil((d-13)/(2*l-2))*2,h=[d-7];for(let b=1;b<l-1;b++)h[b]=h[b-1]-f;return h.push(6),h.reverse()},t.getPositions=function(n){const l=[],d=t.getRowColCoords(n),f=d.length;for(let h=0;h<f;h++)for(let b=0;b<f;b++)h===0&&b===0||h===0&&b===f-1||h===f-1&&b===0||l.push([d[h],d[b]]);return l}}(Yh)),Yh}var Xh={},pb;function sA(){if(pb)return Xh;pb=1;const t=No().getSymbolSize,a=7;return Xh.getPositions=function(n){const l=t(n);return[[0,0],[l-a,0],[0,l-a]]},Xh}var qh={},yb;function nA(){return yb||(yb=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const d=l.size;let f=0,h=0,b=0,g=null,w=null;for(let k=0;k<d;k++){h=b=0,g=w=null;for(let C=0;C<d;C++){let S=l.get(k,C);S===g?h++:(h>=5&&(f+=a.N1+(h-5)),g=S,h=1),S=l.get(C,k),S===w?b++:(b>=5&&(f+=a.N1+(b-5)),w=S,b=1)}h>=5&&(f+=a.N1+(h-5)),b>=5&&(f+=a.N1+(b-5))}return f},t.getPenaltyN2=function(l){const d=l.size;let f=0;for(let h=0;h<d-1;h++)for(let b=0;b<d-1;b++){const g=l.get(h,b)+l.get(h,b+1)+l.get(h+1,b)+l.get(h+1,b+1);(g===4||g===0)&&f++}return f*a.N2},t.getPenaltyN3=function(l){const d=l.size;let f=0,h=0,b=0;for(let g=0;g<d;g++){h=b=0;for(let w=0;w<d;w++)h=h<<1&2047|l.get(g,w),w>=10&&(h===1488||h===93)&&f++,b=b<<1&2047|l.get(w,g),w>=10&&(b===1488||b===93)&&f++}return f*a.N3},t.getPenaltyN4=function(l){let d=0;const f=l.data.length;for(let b=0;b<f;b++)d+=l.data[b];return Math.abs(Math.ceil(d*100/f/5)-10)*a.N4};function r(n,l,d){switch(n){case t.Patterns.PATTERN000:return(l+d)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return d%3===0;case t.Patterns.PATTERN011:return(l+d)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(d/3))%2===0;case t.Patterns.PATTERN101:return l*d%2+l*d%3===0;case t.Patterns.PATTERN110:return(l*d%2+l*d%3)%2===0;case t.Patterns.PATTERN111:return(l*d%3+(l+d)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(l,d){const f=d.size;for(let h=0;h<f;h++)for(let b=0;b<f;b++)d.isReserved(b,h)||d.xor(b,h,r(l,b,h))},t.getBestMask=function(l,d){const f=Object.keys(t.Patterns).length;let h=0,b=1/0;for(let g=0;g<f;g++){d(g),t.applyMask(g,l);const w=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(g,l),w<b&&(b=w,h=g)}return h}}(qh)),qh}var _u={},bb;function mw(){if(bb)return _u;bb=1;const t=ig(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return _u.getBlocksCount=function(l,d){switch(d){case t.L:return a[(l-1)*4+0];case t.M:return a[(l-1)*4+1];case t.Q:return a[(l-1)*4+2];case t.H:return a[(l-1)*4+3];default:return}},_u.getTotalCodewordsCount=function(l,d){switch(d){case t.L:return r[(l-1)*4+0];case t.M:return r[(l-1)*4+1];case t.Q:return r[(l-1)*4+2];case t.H:return r[(l-1)*4+3];default:return}},_u}var $h={},A0={},vb;function iA(){if(vb)return A0;vb=1;const t=new Uint8Array(512),a=new Uint8Array(256);return function(){let n=1;for(let l=0;l<255;l++)t[l]=n,a[n]=l,n<<=1,n&256&&(n^=285);for(let l=255;l<512;l++)t[l]=t[l-255]}(),A0.log=function(n){if(n<1)throw new Error("log("+n+")");return a[n]},A0.exp=function(n){return t[n]},A0.mul=function(n,l){return n===0||l===0?0:t[a[n]+a[l]]},A0}var wb;function lA(){return wb||(wb=1,function(t){const a=iA();t.mul=function(n,l){const d=new Uint8Array(n.length+l.length-1);for(let f=0;f<n.length;f++)for(let h=0;h<l.length;h++)d[f+h]^=a.mul(n[f],l[h]);return d},t.mod=function(n,l){let d=new Uint8Array(n);for(;d.length-l.length>=0;){const f=d[0];for(let b=0;b<l.length;b++)d[b]^=a.mul(l[b],f);let h=0;for(;h<d.length&&d[h]===0;)h++;d=d.slice(h)}return d},t.generateECPolynomial=function(n){let l=new Uint8Array([1]);for(let d=0;d<n;d++)l=t.mul(l,new Uint8Array([1,a.exp(d)]));return l}}($h)),$h}var Wh,Nb;function oA(){if(Nb)return Wh;Nb=1;const t=lA();function a(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(n){this.degree=n,this.genPoly=t.generateECPolynomial(this.degree)},a.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(n.length+this.degree);l.set(n);const d=t.mod(l,this.genPoly),f=this.degree-d.length;if(f>0){const h=new Uint8Array(this.degree);return h.set(d,f),h}return d},Wh=a,Wh}var Kh={},Zh={},Qh={},kb;function gw(){return kb||(kb=1,Qh.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),Qh}var ti={},jb;function pw(){if(jb)return ti;jb=1;const t="[0-9]+",a="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;ti.KANJI=new RegExp(r,"g"),ti.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ti.BYTE=new RegExp(n,"g"),ti.NUMERIC=new RegExp(t,"g"),ti.ALPHANUMERIC=new RegExp(a,"g");const l=new RegExp("^"+r+"$"),d=new RegExp("^"+t+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ti.testKanji=function(b){return l.test(b)},ti.testNumeric=function(b){return d.test(b)},ti.testAlphanumeric=function(b){return f.test(b)},ti}var Cb;function ko(){return Cb||(Cb=1,function(t){const a=gw(),r=pw();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(d,f){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!a.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?d.ccBits[0]:f<27?d.ccBits[1]:d.ccBits[2]},t.getBestModeForData=function(d){return r.testNumeric(d)?t.NUMERIC:r.testAlphanumeric(d)?t.ALPHANUMERIC:r.testKanji(d)?t.KANJI:t.BYTE},t.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},t.isValid=function(d){return d&&d.bit&&d.ccBits};function n(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(d,f){if(t.isValid(d))return d;try{return n(d)}catch{return f}}}(Zh)),Zh}var Eb;function cA(){return Eb||(Eb=1,function(t){const a=No(),r=mw(),n=ig(),l=ko(),d=gw(),f=7973,h=a.getBCHDigit(f);function b(C,S,D){for(let A=1;A<=40;A++)if(S<=t.getCapacity(A,D,C))return A}function g(C,S){return l.getCharCountIndicator(C,S)+4}function w(C,S){let D=0;return C.forEach(function(A){const M=g(A.mode,S);D+=M+A.getBitsLength()}),D}function k(C,S){for(let D=1;D<=40;D++)if(w(C,D)<=t.getCapacity(D,S,l.MIXED))return D}t.from=function(S,D){return d.isValid(S)?parseInt(S,10):D},t.getCapacity=function(S,D,A){if(!d.isValid(S))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=l.BYTE);const M=a.getSymbolTotalCodewords(S),I=r.getTotalCodewordsCount(S,D),F=(M-I)*8;if(A===l.MIXED)return F;const T=F-g(A,S);switch(A){case l.NUMERIC:return Math.floor(T/10*3);case l.ALPHANUMERIC:return Math.floor(T/11*2);case l.KANJI:return Math.floor(T/13);case l.BYTE:default:return Math.floor(T/8)}},t.getBestVersionForData=function(S,D){let A;const M=n.from(D,n.M);if(Array.isArray(S)){if(S.length>1)return k(S,M);if(S.length===0)return 1;A=S[0]}else A=S;return b(A.mode,A.getLength(),M)},t.getEncodedBits=function(S){if(!d.isValid(S)||S<7)throw new Error("Invalid QR Code version");let D=S<<12;for(;a.getBCHDigit(D)-h>=0;)D^=f<<a.getBCHDigit(D)-h;return S<<12|D}}(Kh)),Kh}var Jh={},Sb;function dA(){if(Sb)return Jh;Sb=1;const t=No(),a=1335,r=21522,n=t.getBCHDigit(a);return Jh.getEncodedBits=function(d,f){const h=d.bit<<3|f;let b=h<<10;for(;t.getBCHDigit(b)-n>=0;)b^=a<<t.getBCHDigit(b)-n;return(h<<10|b)^r},Jh}var em={},tm,Ab;function uA(){if(Ab)return tm;Ab=1;const t=ko();function a(r){this.mode=t.NUMERIC,this.data=r.toString()}return a.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(n){let l,d,f;for(l=0;l+3<=this.data.length;l+=3)d=this.data.substr(l,3),f=parseInt(d,10),n.put(f,10);const h=this.data.length-l;h>0&&(d=this.data.substr(l),f=parseInt(d,10),n.put(f,h*3+1))},tm=a,tm}var rm,_b;function fA(){if(_b)return rm;_b=1;const t=ko(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=t.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){let d;for(d=0;d+2<=this.data.length;d+=2){let f=a.indexOf(this.data[d])*45;f+=a.indexOf(this.data[d+1]),l.put(f,11)}this.data.length%2&&l.put(a.indexOf(this.data[d]),6)},rm=r,rm}var am,Tb;function xA(){if(Tb)return am;Tb=1;const t=ko();function a(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return a.getBitsLength=function(n){return n*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){for(let n=0,l=this.data.length;n<l;n++)r.put(this.data[n],8)},am=a,am}var sm,Db;function hA(){if(Db)return sm;Db=1;const t=ko(),a=No();function r(n){this.mode=t.KANJI,this.data=n}return r.getBitsLength=function(l){return l*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let l;for(l=0;l<this.data.length;l++){let d=a.toSJIS(this.data[l]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);d=(d>>>8&255)*192+(d&255),n.put(d,13)}},sm=r,sm}var nm={exports:{}},Rb;function mA(){return Rb||(Rb=1,function(t){var a={single_source_shortest_paths:function(r,n,l){var d={},f={};f[n]=0;var h=a.PriorityQueue.make();h.push(n,0);for(var b,g,w,k,C,S,D,A,M;!h.empty();){b=h.pop(),g=b.value,k=b.cost,C=r[g]||{};for(w in C)C.hasOwnProperty(w)&&(S=C[w],D=k+S,A=f[w],M=typeof f[w]>"u",(M||A>D)&&(f[w]=D,h.push(w,D),d[w]=g))}if(typeof l<"u"&&typeof f[l]>"u"){var I=["Could not find a path from ",n," to ",l,"."].join("");throw new Error(I)}return d},extract_shortest_path_from_predecessor_list:function(r,n){for(var l=[],d=n;d;)l.push(d),r[d],d=r[d];return l.reverse(),l},find_path:function(r,n,l){var d=a.single_source_shortest_paths(r,n,l);return a.extract_shortest_path_from_predecessor_list(d,l)},PriorityQueue:{make:function(r){var n=a.PriorityQueue,l={},d;r=r||{};for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);return l.queue=[],l.sorter=r.sorter||n.default_sorter,l},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var l={value:r,cost:n};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=a}(nm)),nm.exports}var Mb;function gA(){return Mb||(Mb=1,function(t){const a=ko(),r=uA(),n=fA(),l=xA(),d=hA(),f=pw(),h=No(),b=mA();function g(I){return unescape(encodeURIComponent(I)).length}function w(I,F,T){const B=[];let H;for(;(H=I.exec(T))!==null;)B.push({data:H[0],index:H.index,mode:F,length:H[0].length});return B}function k(I){const F=w(f.NUMERIC,a.NUMERIC,I),T=w(f.ALPHANUMERIC,a.ALPHANUMERIC,I);let B,H;return h.isKanjiModeEnabled()?(B=w(f.BYTE,a.BYTE,I),H=w(f.KANJI,a.KANJI,I)):(B=w(f.BYTE_KANJI,a.BYTE,I),H=[]),F.concat(T,B,H).sort(function(L,P){return L.index-P.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function C(I,F){switch(F){case a.NUMERIC:return r.getBitsLength(I);case a.ALPHANUMERIC:return n.getBitsLength(I);case a.KANJI:return d.getBitsLength(I);case a.BYTE:return l.getBitsLength(I)}}function S(I){return I.reduce(function(F,T){const B=F.length-1>=0?F[F.length-1]:null;return B&&B.mode===T.mode?(F[F.length-1].data+=T.data,F):(F.push(T),F)},[])}function D(I){const F=[];for(let T=0;T<I.length;T++){const B=I[T];switch(B.mode){case a.NUMERIC:F.push([B,{data:B.data,mode:a.ALPHANUMERIC,length:B.length},{data:B.data,mode:a.BYTE,length:B.length}]);break;case a.ALPHANUMERIC:F.push([B,{data:B.data,mode:a.BYTE,length:B.length}]);break;case a.KANJI:F.push([B,{data:B.data,mode:a.BYTE,length:g(B.data)}]);break;case a.BYTE:F.push([{data:B.data,mode:a.BYTE,length:g(B.data)}])}}return F}function A(I,F){const T={},B={start:{}};let H=["start"];for(let U=0;U<I.length;U++){const L=I[U],P=[];for(let z=0;z<L.length;z++){const W=L[z],ee=""+U+z;P.push(ee),T[ee]={node:W,lastCount:0},B[ee]={};for(let G=0;G<H.length;G++){const ne=H[G];T[ne]&&T[ne].node.mode===W.mode?(B[ne][ee]=C(T[ne].lastCount+W.length,W.mode)-C(T[ne].lastCount,W.mode),T[ne].lastCount+=W.length):(T[ne]&&(T[ne].lastCount=W.length),B[ne][ee]=C(W.length,W.mode)+4+a.getCharCountIndicator(W.mode,F))}}H=P}for(let U=0;U<H.length;U++)B[H[U]].end=0;return{map:B,table:T}}function M(I,F){let T;const B=a.getBestModeForData(I);if(T=a.from(F,B),T!==a.BYTE&&T.bit<B.bit)throw new Error('"'+I+'" cannot be encoded with mode '+a.toString(T)+`.
 Suggested mode is: `+a.toString(B));switch(T===a.KANJI&&!h.isKanjiModeEnabled()&&(T=a.BYTE),T){case a.NUMERIC:return new r(I);case a.ALPHANUMERIC:return new n(I);case a.KANJI:return new d(I);case a.BYTE:return new l(I)}}t.fromArray=function(F){return F.reduce(function(T,B){return typeof B=="string"?T.push(M(B,null)):B.data&&T.push(M(B.data,B.mode)),T},[])},t.fromString=function(F,T){const B=k(F,h.isKanjiModeEnabled()),H=D(B),U=A(H,T),L=b.find_path(U.map,"start","end"),P=[];for(let z=1;z<L.length-1;z++)P.push(U.table[L[z]].node);return t.fromArray(S(P))},t.rawSplit=function(F){return t.fromArray(k(F,h.isKanjiModeEnabled()))}}(em)),em}var Ib;function pA(){if(Ib)return Uh;Ib=1;const t=No(),a=ig(),r=tA(),n=rA(),l=aA(),d=sA(),f=nA(),h=mw(),b=oA(),g=cA(),w=dA(),k=ko(),C=gA();function S(U,L){const P=U.size,z=d.getPositions(L);for(let W=0;W<z.length;W++){const ee=z[W][0],G=z[W][1];for(let ne=-1;ne<=7;ne++)if(!(ee+ne<=-1||P<=ee+ne))for(let le=-1;le<=7;le++)G+le<=-1||P<=G+le||(ne>=0&&ne<=6&&(le===0||le===6)||le>=0&&le<=6&&(ne===0||ne===6)||ne>=2&&ne<=4&&le>=2&&le<=4?U.set(ee+ne,G+le,!0,!0):U.set(ee+ne,G+le,!1,!0))}}function D(U){const L=U.size;for(let P=8;P<L-8;P++){const z=P%2===0;U.set(P,6,z,!0),U.set(6,P,z,!0)}}function A(U,L){const P=l.getPositions(L);for(let z=0;z<P.length;z++){const W=P[z][0],ee=P[z][1];for(let G=-2;G<=2;G++)for(let ne=-2;ne<=2;ne++)G===-2||G===2||ne===-2||ne===2||G===0&&ne===0?U.set(W+G,ee+ne,!0,!0):U.set(W+G,ee+ne,!1,!0)}}function M(U,L){const P=U.size,z=g.getEncodedBits(L);let W,ee,G;for(let ne=0;ne<18;ne++)W=Math.floor(ne/3),ee=ne%3+P-8-3,G=(z>>ne&1)===1,U.set(W,ee,G,!0),U.set(ee,W,G,!0)}function I(U,L,P){const z=U.size,W=w.getEncodedBits(L,P);let ee,G;for(ee=0;ee<15;ee++)G=(W>>ee&1)===1,ee<6?U.set(ee,8,G,!0):ee<8?U.set(ee+1,8,G,!0):U.set(z-15+ee,8,G,!0),ee<8?U.set(8,z-ee-1,G,!0):ee<9?U.set(8,15-ee-1+1,G,!0):U.set(8,15-ee-1,G,!0);U.set(z-8,8,1,!0)}function F(U,L){const P=U.size;let z=-1,W=P-1,ee=7,G=0;for(let ne=P-1;ne>0;ne-=2)for(ne===6&&ne--;;){for(let le=0;le<2;le++)if(!U.isReserved(W,ne-le)){let Y=!1;G<L.length&&(Y=(L[G]>>>ee&1)===1),U.set(W,ne-le,Y),ee--,ee===-1&&(G++,ee=7)}if(W+=z,W<0||P<=W){W-=z,z=-z;break}}}function T(U,L,P){const z=new r;P.forEach(function(le){z.put(le.mode.bit,4),z.put(le.getLength(),k.getCharCountIndicator(le.mode,U)),le.write(z)});const W=t.getSymbolTotalCodewords(U),ee=h.getTotalCodewordsCount(U,L),G=(W-ee)*8;for(z.getLengthInBits()+4<=G&&z.put(0,4);z.getLengthInBits()%8!==0;)z.putBit(0);const ne=(G-z.getLengthInBits())/8;for(let le=0;le<ne;le++)z.put(le%2?17:236,8);return B(z,U,L)}function B(U,L,P){const z=t.getSymbolTotalCodewords(L),W=h.getTotalCodewordsCount(L,P),ee=z-W,G=h.getBlocksCount(L,P),ne=z%G,le=G-ne,Y=Math.floor(z/G),X=Math.floor(ee/G),de=X+1,ye=Y-X,oe=new b(ye);let xe=0;const ae=new Array(G),q=new Array(G);let K=0;const se=new Uint8Array(U.buffer);for(let Ve=0;Ve<G;Ve++){const Oe=Ve<le?X:de;ae[Ve]=se.slice(xe,xe+Oe),q[Ve]=oe.encode(ae[Ve]),xe+=Oe,K=Math.max(K,Oe)}const re=new Uint8Array(z);let te=0,Re,ke;for(Re=0;Re<K;Re++)for(ke=0;ke<G;ke++)Re<ae[ke].length&&(re[te++]=ae[ke][Re]);for(Re=0;Re<ye;Re++)for(ke=0;ke<G;ke++)re[te++]=q[ke][Re];return re}function H(U,L,P,z){let W;if(Array.isArray(U))W=C.fromArray(U);else if(typeof U=="string"){let Y=L;if(!Y){const X=C.rawSplit(U);Y=g.getBestVersionForData(X,P)}W=C.fromString(U,Y||40)}else throw new Error("Invalid data");const ee=g.getBestVersionForData(W,P);if(!ee)throw new Error("The amount of data is too big to be stored in a QR Code");if(!L)L=ee;else if(L<ee)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ee+`.
`);const G=T(L,P,W),ne=t.getSymbolSize(L),le=new n(ne);return S(le,L),D(le),A(le,L),I(le,P,0),L>=7&&M(le,L),F(le,G),isNaN(z)&&(z=f.getBestMask(le,I.bind(null,le,P))),f.applyMask(z,le),I(le,P,z),{modules:le,version:L,errorCorrectionLevel:P,maskPattern:z,segments:W}}return Uh.create=function(L,P){if(typeof L>"u"||L==="")throw new Error("No input text");let z=a.M,W,ee;return typeof P<"u"&&(z=a.from(P.errorCorrectionLevel,a.M),W=g.from(P.version),ee=f.from(P.maskPattern),P.toSJISFunc&&t.setToSJISFunction(P.toSJISFunc)),H(L,W,z,ee)},Uh}var im={},lm={},Ob;function yw(){return Ob||(Ob=1,function(t){function a(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(d){return[d,d]}))),n.length===6&&n.push("F","F");const l=parseInt(n.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const l=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,d=n.width&&n.width>=21?n.width:void 0,f=n.scale||4;return{width:d,scale:d?4:f,margin:l,color:{dark:a(n.color.dark||"#000000ff"),light:a(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,l){return l.width&&l.width>=n+l.margin*2?l.width/(n+l.margin*2):l.scale},t.getImageWidth=function(n,l){const d=t.getScale(n,l);return Math.floor((n+l.margin*2)*d)},t.qrToImageData=function(n,l,d){const f=l.modules.size,h=l.modules.data,b=t.getScale(f,d),g=Math.floor((f+d.margin*2)*b),w=d.margin*b,k=[d.color.light,d.color.dark];for(let C=0;C<g;C++)for(let S=0;S<g;S++){let D=(C*g+S)*4,A=d.color.light;if(C>=w&&S>=w&&C<g-w&&S<g-w){const M=Math.floor((C-w)/b),I=Math.floor((S-w)/b);A=k[h[M*f+I]?1:0]}n[D++]=A.r,n[D++]=A.g,n[D++]=A.b,n[D]=A.a}}}(lm)),lm}var Fb;function yA(){return Fb||(Fb=1,function(t){const a=yw();function r(l,d,f){l.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=f,d.width=f,d.style.height=f+"px",d.style.width=f+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(d,f,h){let b=h,g=f;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),f||(g=n()),b=a.getOptions(b);const w=a.getImageWidth(d.modules.size,b),k=g.getContext("2d"),C=k.createImageData(w,w);return a.qrToImageData(C.data,d,b),r(k,g,w),k.putImageData(C,0,0),g},t.renderToDataURL=function(d,f,h){let b=h;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),b||(b={});const g=t.render(d,f,b),w=b.type||"image/png",k=b.rendererOpts||{};return g.toDataURL(w,k.quality)}}(im)),im}var om={},Bb;function bA(){if(Bb)return om;Bb=1;const t=yw();function a(l,d){const f=l.a/255,h=d+'="'+l.hex+'"';return f<1?h+" "+d+'-opacity="'+f.toFixed(2).slice(1)+'"':h}function r(l,d,f){let h=l+d;return typeof f<"u"&&(h+=" "+f),h}function n(l,d,f){let h="",b=0,g=!1,w=0;for(let k=0;k<l.length;k++){const C=Math.floor(k%d),S=Math.floor(k/d);!C&&!g&&(g=!0),l[k]?(w++,k>0&&C>0&&l[k-1]||(h+=g?r("M",C+f,.5+S+f):r("m",b,0),b=0,g=!1),C+1<d&&l[k+1]||(h+=r("h",w),w=0)):b++}return h}return om.render=function(d,f,h){const b=t.getOptions(f),g=d.modules.size,w=d.modules.data,k=g+b.margin*2,C=b.color.light.a?"<path "+a(b.color.light,"fill")+' d="M0 0h'+k+"v"+k+'H0z"/>':"",S="<path "+a(b.color.dark,"stroke")+' d="'+n(w,g,b.margin)+'"/>',D='viewBox="0 0 '+k+" "+k+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+D+' shape-rendering="crispEdges">'+C+S+`</svg>
`;return typeof h=="function"&&h(null,M),M},om}var Lb;function vA(){if(Lb)return xc;Lb=1;const t=eA(),a=pA(),r=yA(),n=bA();function l(d,f,h,b,g){const w=[].slice.call(arguments,1),k=w.length,C=typeof w[k-1]=="function";if(!C&&!t())throw new Error("Callback required as last argument");if(C){if(k<2)throw new Error("Too few arguments provided");k===2?(g=h,h=f,f=b=void 0):k===3&&(f.getContext&&typeof g>"u"?(g=b,b=void 0):(g=b,b=h,h=f,f=void 0))}else{if(k<1)throw new Error("Too few arguments provided");return k===1?(h=f,f=b=void 0):k===2&&!f.getContext&&(b=h,h=f,f=void 0),new Promise(function(S,D){try{const A=a.create(h,b);S(d(A,f,b))}catch(A){D(A)}})}try{const S=a.create(h,b);g(null,d(S,f,b))}catch(S){g(S)}}return xc.create=a.create,xc.toCanvas=l.bind(null,r.render),xc.toDataURL=l.bind(null,r.renderToDataURL),xc.toString=l.bind(null,function(d,f,h){return n.render(d,h)}),xc}var wA=vA();const NA=hf(wA);function kA({houses:t,apartment:a,floor:r,onClose:n}){const[l,d]=E.useState(!1),[f,h]=E.useState(!1),[b,g]=E.useState({}),[w,k]=E.useState(!1),C=I=>`${I.id}`,S=I=>I.split("|")[0];E.useEffect(()=>{(async()=>{if(t.length){d(!0);try{const F={};for(const T of t){const B=C(T);try{F[T.id]=await NA.toDataURL(B,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(H){console.error("QR Generation Error:",H),F[T.id]="",ie.error(`Failed to generate QR for house ${T.house_id}`)}}g(F)}catch(F){console.error("Error generating QR codes",F),ie.error("Failed to generate QR codes")}d(!1)}})()},[t,a,r]);const D=async()=>{h(!0);try{const{jsPDF:I}=await hw(async()=>{const{jsPDF:ne}=await import("./jspdf.es.min-DP3h-qo0.js").then(le=>le.j);return{jsPDF:ne}},[]),F=new I("p","mm","a4"),T=12,B=F.internal.pageSize.getWidth(),H=F.internal.pageSize.getHeight();let U=2,L=85,P=70,z=40;t.length===1?(U=1,L=B-T*2,P=H-T*2-30,z=Math.min(L,P)*.5):t.length===2?(U=2,L=(B-T*3)/2,P=Math.max(90,(H-T*3)/2),z=Math.min(80,L*.6)):(U=2,L=85,P=70,z=40);let W=T,ee=0;for(let ne=0;ne<t.length;ne++){const le=t[ne],Y=ne%U;let X=T+Y*(L+T);t.length===1&&(X=(B-L)/2),W+P>H-T&&(F.addPage(),W=T,ee=0),F.setDrawColor(200,200,200),F.rect(X,W,L,P),F.setFontSize(t.length===1?18:12),F.setFont(void 0,"bold"),F.text(a.name,X+L/2,W+(t.length===1?12:5),{align:"center"}),F.setFontSize(t.length===1?10:7),F.setTextColor(100,100,100),F.text(`Floor: ${r.floor_id}`,X+L/2,W+(t.length===1?18:9),{align:"center"}),F.setFontSize(t.length===1?24:12),F.setFont(void 0,"bold"),F.setTextColor(0,0,0),F.text(`${le.house_id}`,X+L/2,W+(t.length===1?30:15),{align:"center"}),w&&(F.setFontSize(t.length===1?10:7),F.setFont(void 0,"bold"),F.setTextColor(0,0,0),F.text(`${le.id}`,X+L/2,W+(t.length===1?36:18),{align:"center"})),b[le.id]&&F.addImage(b[le.id],"PNG",X+(L-z)/2,W+(t.length===1?(P-z)/2:20),z,z),ee++,ee===U&&(W+=P+T,ee=0),ne===t.length-1&&ee>0&&(W+=P+T)}const G=`QR_Codes_${a.name.replace(/\s+/g,"_")}_Floor_${r.floor_id}.pdf`;F.save(G),ie.success("PDF Generated Successfully!")}catch(I){console.error("PDF Generation Error:",I),ie.error("Failed to generate PDF")}h(!1)},A=({house:I})=>{const F=b[I.id];return C(I),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",I.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[a.name,"  Floor ",r.floor_id]}),F?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:F,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${I.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:I.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(Gt,{size:24,className:"animate-spin text-gray-400"})})]})})},M=I=>{const F=b[I];if(F){const T=t.find(U=>U.id===I);if(!T)return;const B=C(T);S(B),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${T.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${F}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(PC,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.name,"  Floor ",r.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(kc,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",t.length," house",t.length!==1?"s":""]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(I=>e.jsxs("div",{className:"relative",children:[e.jsx(A,{house:I}),e.jsx("button",{onClick:()=>M(I.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},I.id))})]})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:I=>k(I.target.checked),className:"h-4 w-4 rounded border-gray-300 text-purple-600"}),e.jsx("span",{children:"Include House No in PDF"}),e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Only check to print internal DB id)"})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(b).length," QR code",Object.keys(b).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:l||f||!Object.keys(b).length,onClick:D,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X0,{size:16}),"Download PDF"]})})]})]})})]})})}function jA(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),[l,d]=E.useState(window.innerWidth<768),{apartment_id:f,floor_id:h}=gn(),[b,g]=E.useState(null),[w,k]=E.useState(null),[C,S]=E.useState([]),[D,A]=E.useState([]),[M,I]=E.useState(null),F=hr(),[T,B]=E.useState(!1),[H,U]=E.useState(!1),[L,P]=E.useState(!1),[z,W]=E.useState(!1),[ee,G]=E.useState(!1),[ne,le]=E.useState(null),[Y,X]=E.useState(!1),[de,ye]=E.useState(null),[oe,xe]=E.useState("houses"),[ae,q]=E.useState(null),[K,se]=E.useState(!1),[re,te]=E.useState(null),[Re,ke]=E.useState([]),[Ve,Oe]=E.useState(!1),[et,be]=E.useState(!1);E.useEffect(()=>{const nt=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",nt),()=>window.removeEventListener("resize",nt)},[]),E.useEffect(()=>{f&&(async()=>{try{const kt=await Te.get(`/apartments/${f}`);kt.data.success&&g(kt.data.data)}catch(kt){console.error("Error fetching apartment:",kt)}})()},[f]),E.useEffect(()=>{h&&(async()=>{try{const kt=await Te.get(`/floors/${h}`);kt.data.success&&k(kt.data.data)}catch(kt){console.error("Error fetching floors:",kt)}})()},[h]);const Ae=async()=>{try{U(!0),I(null);const nt=await Te.get(`/housetype?apartment_id=${f}`);nt.data.success&&Array.isArray(nt.data.data)?A(nt.data.data):A([])}catch(nt){console.error("Error loading houses:",nt),I("Failed to load houses. Please try again.")}finally{U(!1)}};E.useEffect(()=>{Ae()},[f]);const Fe=()=>{F(`/floors/${b.id}`)},Ce=async nt=>{try{B(!0),I(null);const kt=await Te.get(`/houses?apartment_id=${f}&floor_id=${nt}`);kt.data.success&&Array.isArray(kt.data.data)?(S(kt.data.data),ke([]),Oe(!1)):S([])}catch(kt){console.error("Error loading houses:",kt),I("Failed to load houses. Please try again.")}finally{B(!1)}};E.useEffect(()=>{h&&f&&Ce(h)},[h,f]);const Je=nt=>{F(`/viewhouse/${f}/${h}/${nt.id}`)},ve=()=>{P(!0)},Le=()=>{P(!1)},fe=()=>{Ce(h),P(!1),ie.success("House created successfully!")},st=nt=>{q(nt),W(!0)},Ee=()=>{W(!1),q(null)},wt=()=>{Ce(h),ie.success("House updated successfully!")},ut=nt=>{le(nt),G(!0)},Et=()=>{G(!1),le(null)},Mt=async nt=>{try{const kt=await Te.patch(`/houses/${nt.id}/toggle`);ie.success(kt.data.message),Ce(h)}catch(kt){console.error("Error toggling house:",kt),ie.error("Failed to toggle house status")}},qt=nt=>{ye(nt),X(!0)},ur=async()=>{try{if(!de)return;await Te.delete(`/houses/${de.id}`),ie.success("House deleted successfully"),X(!1),ye(null),Ce(h)}catch(nt){console.error("Delete house error:",nt),ie.error("Failed to delete house")}},Ut=()=>{X(!1),ye(null)},Yt=nt=>{te(nt),se(!0)},It=()=>{se(!1),te(null)},$e=()=>{ie.success("House documents uploaded successfully!")},jt=nt=>{ke(kt=>kt.includes(nt)?kt.filter(Os=>Os!==nt):[...kt,nt])},Nt=()=>{if(Ve)ke([]);else{const nt=C.map(kt=>kt.id);ke(nt)}Oe(!Ve)};E.useEffect(()=>{C.length>0&&Re.length===C.length?Oe(!0):Oe(!1)},[Re,C]),Re.length;const lt=()=>{if(Re.length===0){ie.error("Please select at least one house to generate QR codes");return}C.filter(nt=>Re.includes(nt.id)),be(!0)},At=nt=>{try{return new Date(nt).toLocaleDateString()}catch{return"N/A"}},vt=()=>e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Tc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vt,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>n(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>n(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Fe,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(Mn,{size:l?20:25})}),e.jsx(Hr,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Houses"}),b&&w&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:[e.jsx("span",{className:"font-medium",children:b.name}),"  Floor ",w.floor_id]})]})]}),l&&Re.length>0&&e.jsxs("button",{onClick:lt,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700",children:[e.jsx(X0,{size:16}),e.jsxs("span",{className:"text-xs",children:["QR (",Re.length,")"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 md:mb-6",children:[e.jsx("button",{onClick:()=>xe("houses"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${oe==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>xe("houseTypes"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${oe==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),oe==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:[e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"gap-3 mb-4"}`,children:[e.jsxs("button",{onClick:ve,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base ${l?"w-full":""}`,children:[e.jsx(Ca,{size:l?16:20}),e.jsx("span",{children:"New House"})]}),!l&&e.jsxs("button",{onClick:lt,disabled:Re.length===0,className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(X0,{size:l?16:20}),e.jsxs("span",{children:["Generate QR Code (",Re.length,")"]})]})]}),Re.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[Re.length," house",Re.length!==1?"s":""," selected"]}),l?e.jsx("button",{onClick:lt,className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Generate QR"}):null]})}),T?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading Houses..."})]}):M?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:M}),e.jsx("button",{onClick:()=>Ce(h),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):C.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No houses found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding houses"}),e.jsx("button",{onClick:ve,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First House"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Houses: ",C.length]}),e.jsx("button",{onClick:Nt,className:"text-xs text-purple-600 dark:text-purple-400",children:Ve?"Deselect All":"Select All"})]})}),C.map(nt=>e.jsxs("div",{onClick:()=>nt.is_active&&Je(nt),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${nt.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:Re.includes(nt.id),onChange:kt=>{kt.stopPropagation(),jt(nt.id)},onClick:kt=>kt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["House ",nt.house_id]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${nt.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:nt.status})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:D.find(kt=>kt.id===nt.housetype_id)?.name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Yt(nt)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(xr,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),st(nt)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Ea,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ut(nt)},className:`p-1.5 rounded-lg ${nt.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:nt.is_active?"Deactivate":"Activate",children:nt.is_active?e.jsx(po,{size:14}):e.jsx(go,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),qt(nt)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Lr,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex justify-between mt-2",children:[e.jsxs("span",{children:["Created: ",At(nt.created_at)]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${nt.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:nt.is_active?"Active":"Inactive"})]})]},nt.id))]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Ve,onChange:Nt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:C.map(nt=>e.jsxs("tr",{onClick:()=>nt.is_active&&Je(nt),className:`transition-colors cursor-pointer ${nt.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:Re.includes(nt.id),onChange:kt=>{kt.stopPropagation(),jt(nt.id)},onClick:kt=>kt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:nt.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:D.find(kt=>kt.id===nt.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:nt.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:At(nt.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Yt(nt)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(xr,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),st(nt)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ut(nt)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:nt.is_active?"Deactivate":"Activate",children:nt.is_active?e.jsx(po,{size:25}):e.jsx(go,{size:25})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),qt(nt)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},nt.id))})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",C.length," house",C.length!==1?"s":""]})})]})})]}):e.jsx(dw,{})]})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx("button",{onClick:Le,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(XS,{onClose:Le,onCreated:fe,apartment_id:f,floor_id:h})]})})}),z&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit House"}),e.jsx("button",{onClick:Ee,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx($S,{onClose:Ee,onUpdated:wt,house:ae,apartment_id:f,floor_id:h})]})})}),ee&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:ne?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:ne?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Et,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{ne&&(Mt(ne),G(!1),le(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${ne?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:ne?.is_active?"Deactivate":"Activate"})]})]})}),Y&&de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',de.house_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Ut,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:ur,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),K&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(ZS,{house:re,apartment:b,floor:w,onClose:It,onUploadSuccess:$e})})})}),et&&b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(kA,{houses:C.filter(nt=>Re.includes(nt.id)),apartment:b,floor:w,onClose:()=>be(!1)})})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function CA(){const[t,a]=E.useState(""),[r,n]=E.useState(!1),l=hr(),d=async h=>{if(h.preventDefault(),!t){ie.error("Please enter your email address");return}n(!0);try{await Te.post("/auth/forgot-password-unified",{email:t}),ie.success(" Password reset link sent! Check your inbox."),a("")}catch(b){const g=b.response?.data?.message||"Something went wrong";ie.error(g)}finally{n(!1)}},f=()=>{l("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-3 mt-5",children:[e.jsx("button",{onClick:f,className:"flex items-center gap-2 text-white hover:text-gray-300 transition-colors",title:"Back to Login",children:e.jsx(wc,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-10 h-10"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"font-bold text-xl text-center mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm text-center",children:"Enter your email address and we'll send you a password reset link."}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email address",className:"loginInput w-full",value:t,onChange:h=>a(h.target.value),required:!0,autoComplete:"email",disabled:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll check if you're an admin, employee, or house owner automatically."})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full flex items-center justify-center py-3",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):"Send Password Reset Link"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:f,className:"text-purple-700 dark:text-purple-400 hover:underline text-center font-medium py-2",children:" Back to Login"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center",children:"Don't have an account? Contact your apartment administrator."})]})})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function EA(){const[t,a]=E.useState(""),[r,n]=E.useState(""),[l,d]=E.useState(!1),[f,h]=E.useState(!1),[b,g]=E.useState(!1),[w]=ld(),k=hr(),[C,S]=E.useState(null),[D,A]=E.useState(null),[M,I]=E.useState(null),[F,T]=E.useState(!0),[B,H]=E.useState(!0),[U,L]=E.useState(""),[P,z]=E.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1,match:!1});E.useEffect(()=>{const Y=w.get("token"),X=w.get("id"),de=w.get("user_type");if(!Y||!X){T(!1),H(!1),ie.error("Invalid or missing reset link parameters");return}S(Y),A(X),I(de||"user"),(async()=>{try{const oe=await Te.post("/auth/check-reset-token",{token:Y,id:X});oe.data.success?(I(oe.data.user_type),L(oe.data.email||""),T(!0)):(T(!1),ie.error(oe.data.message||"Invalid reset token"))}catch(oe){console.error("Error verifying token:",oe),T(!1),ie.error("Unable to verify reset token")}finally{H(!1)}})()},[w]),E.useEffect(()=>{if(t){const Y=/[A-Z]/.test(t),X=/[a-z]/.test(t),de=/\d/.test(t),ye=/[!@#$%^&*(),.?":{}|<>]/.test(t),oe=t.length>=6;z(xe=>({...xe,length:oe,uppercase:Y,lowercase:X,number:de,special:ye}))}},[t]),E.useEffect(()=>{z(Y=>({...Y,match:t===r&&r.length>0}))},[t,r]);const W=()=>{k("/login")},G=(()=>{if(!t)return{strength:0,label:"Very Weak",color:"bg-red-500"};let Y=0;t.length>=8&&Y++,/(?=.*[a-z])/.test(t)&&Y++,/(?=.*[A-Z])/.test(t)&&Y++,/(?=.*\d)/.test(t)&&Y++,/(?=.*[@$!%*?&])/.test(t)&&Y++;const X=["Very Weak","Weak","Fair","Good","Strong","Very Strong"],de=["bg-red-500","bg-red-400","bg-yellow-500","bg-green-400","bg-green-500","bg-green-600"];return{strength:Y,label:X[Y]||"Very Weak",color:de[Y]||"bg-red-500"}})(),ne=({isValid:Y,text:X})=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[Y?e.jsx(Ha,{size:12,className:"text-green-500 flex-shrink-0"}):e.jsx(Wu,{size:12,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:`truncate ${Y?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:X})]}),le=async Y=>{if(Y.preventDefault(),!Object.values(P).every(de=>de===!0)){ie.error("Please meet all password requirements");return}if(!M){ie.error("Unable to determine account type. Please request a new reset link.");return}g(!0);try{await Te.post("/auth/reset-password-unified",{token:C,id:D,password:t,user_type:M}),ie.success(" Password reset successful! Redirecting to login..."),setTimeout(()=>k("/login"),2e3)}catch(de){const ye=de.response?.data?.message||"Reset failed. The link may have expired.";de.response?.status===400?ye.includes("expired")?ie.error("Reset link has expired. Please request a new one."):ye.includes("Invalid")||ye.includes("invalid")?ie.error("Invalid reset link. Please request a new one."):ye.includes("already used")?ie.error("This reset link has already been used. Please request a new one."):ie.error(ye):de.response?.status===404?ie.error("Account not found. The link may be invalid."):ie.error(ye)}finally{g(!1)}};return B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Please wait while we verify your reset link..."})]})})})}):F?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs("button",{onClick:W,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(wc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/apartment.png",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AptSync"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-5 sm:p-8",children:[M&&e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm ${M==="houseowner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:[e.jsx(lb,{size:14,className:"flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:M==="houseowner"?"House Owner Account":"Admin/Employee Account"}),U&&e.jsxs("span",{className:"hidden sm:inline text-xs opacity-75 ml-1 truncate",children:["(",U,")"]})]})}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Create a strong password for your account"})]}),e.jsxs("form",{onSubmit:le,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:t,onChange:Y=>a(Y.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),t&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strength:"}),e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${G.strength<2?"text-red-500":G.strength<4?"text-yellow-500":"text-green-500"}`,children:G.label})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-1.5 sm:h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${G.color}`,style:{width:`${G.strength/5*100}%`}})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3 text-sm",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2",children:[e.jsx(ne,{isValid:P.length,text:"Min 6 characters"}),e.jsx(ne,{isValid:P.uppercase,text:"Uppercase letter"}),e.jsx(ne,{isValid:P.lowercase,text:"Lowercase letter"}),e.jsx(ne,{isValid:P.number,text:"Number"}),e.jsx(ne,{isValid:P.special,text:"Special character"}),e.jsx(ne,{isValid:P.match,text:"Passwords match"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:r,onChange:Y=>n(Y.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":f?"Hide password":"Show password",children:f?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-3.5 sm:py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm sm:text-base transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:b||!Object.values(P).every(Y=>Y===!0),children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(lb,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:W,className:"text-purple-600 dark:text-purple-400 hover:underline text-center text-sm py-2",children:" Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Having trouble?"," ",e.jsx("button",{type:"button",onClick:()=>k("/forgot-password"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium text-xs",children:"Request a new reset link"})]})})]})})]})}),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," AptSync. All rights reserved."]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,toastClassName:"!text-sm"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("button",{onClick:W,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(wc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(Wu,{size:64,className:"text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm sm:text-base",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full mt-4",children:[e.jsx("button",{onClick:()=>k("/forgot-password"),className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex-1",children:"Request New Reset Link"}),e.jsx("button",{onClick:W,className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors flex-1",children:"Back to Login"})]})]})})]})})}function SA(){const[t]=ld(),a=hr(),[r,n]=E.useState(""),[l,d]=E.useState(""),[f,h]=E.useState(""),[b,g]=E.useState(!0),[w,k]=E.useState(!0),[C,S]=E.useState(!1),[D,A]=E.useState(!1),[M,I]=E.useState(!1),[F,T]=E.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});E.useEffect(()=>{const z=t.get("token"),W=t.get("id");if(!z||!W){g(!1),k(!1),ie.error("Invalid registration link - missing parameters");return}n(z),d(W),(async()=>{try{const G=await Te.post("/auth/verify-invite-link",{token:z,id:W});G.data.success&&(h(G.data.email),g(!0))}catch(G){console.error("Link verification failed:",G),g(!1),ie.error(G.response?.data?.message||"This invitation link is invalid or expired.")}finally{k(!1)}})()},[t]);const[B,H]=E.useState([]);E.useEffect(()=>{(async()=>{try{const ee=await(await fetch("https://general.apivcm.shop/countries")).json();H(ee.data)}catch(W){console.error("Error fetching countries:",W)}})()},[]);const U=z=>{const W=z.target.value,ee=B.find(G=>G.country===W);ee&&T(G=>({...G,country:ee.country,mobile:ee.international_dialing+" "}))},L=z=>{const{name:W,value:ee}=z.target;T(G=>({...G,[W]:ee}))},P=async z=>{if(z.preventDefault(),F.password!==F.confirmPassword){ie.error("Passwords do not match");return}if(F.password.length<8){ie.error("Password must be at least 8 characters long");return}I(!0);try{const W=await Te.post("/auth/verify",{token:r,id:l});await Te.post("/auth/complete-registration",{email:f,firstname:F.firstname,lastname:F.lastname,country:F.country,mobile:F.mobile,password:F.password}),ie.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>a("/login"),2e3)}catch(W){console.error("Registration error:",W),ie.error(W.response?.data?.message||"Failed to complete registration")}finally{I(!1)}};return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):b?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>a("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(wc,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",f]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:F.firstname,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:F.lastname,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsxs("select",{name:"country",value:F.country||"",onChange:U,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select country *"}),B.map(z=>e.jsx("option",{value:z.country,children:z.country},z.country))]})}),e.jsx("div",{children:e.jsx("input",{name:"mobile",value:F.mobile,onChange:z=>{const W=F.mobile.split(" ")[0]||"",ee=z.target.value.replace(W+" ",""),ne={target:{name:"mobile",value:W+(ee?" "+ee.replace(/\D/g,""):"")}};L(ne)},placeholder:"Mobile * (e.g., +94 771234567)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:C?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:F.password,onChange:L,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>S(!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:C?e.jsx(In,{size:18}):e.jsx(Qs,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:D?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:F.confirmPassword,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>A(!D),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:D?e.jsx(In,{size:18}):e.jsx(Qs,{size:18})})]}),e.jsx("button",{type:"submit",disabled:M,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>a("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function AA(){const{auth:t}=E.useContext(Or),a=hr(),[r,n]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(null),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(null),[D,A]=E.useState(!1),[M,I]=E.useState(null),F=B=>{a(`/bills-and-calculations/${B.id}`)},T=async()=>{try{d(!0),h(null);const B=await Te.get("/apartments");B.data.success&&Array.isArray(B.data.data)?n(B.data.data):Array.isArray(B.data)?n(B.data):n([])}catch(B){console.error("Error loading apartments:",B),B.response?.status===401?(h("Unauthorized. Please login again."),a("/login")):B.response?.status===400?h("Company information missing. Please contact support."):h("Failed to load apartments. Please try again.")}finally{d(!1)}};return E.useEffect(()=>{T()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:T,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((B,H)=>e.jsxs("tr",{onClick:()=>B.is_active&&F(B),className:`transition-colors cursor-pointer ${B.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.picture?e.jsx("img",{src:`http://localhost:2500${B.picture}`,alt:B.name,className:"w-12 h-12 object-cover rounded-lg",onError:U=>{console.error("Image failed to load:",B.picture),U.target.style.display="none";const L=U.target.parentNode.querySelector(".image-fallback");L&&(L.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(Zs,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:B.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.houses})]},B.id||H))})]})]})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}const Pb=(t,a=2,r="standard")=>{if(r==="ten")return Math.ceil(t/10)*10;if(r==="hundred")return Math.ceil(t/100)*100;{const n=Math.pow(10,a);return Math.ceil(t*n)/n}};function _A({onClose:t,onCreated:a,apartment_id:r}){const[n,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState(null),[g,w]=E.useState([]),[k,C]=E.useState(""),[S,D]=E.useState(""),[A,M]=E.useState(new Date().getFullYear()),[I,F]=E.useState(new Date().toLocaleString("default",{month:"long"})),[T,B]=E.useState(0),[H,U]=E.useState(0),[L,P]=E.useState(!1),[z,W]=E.useState([]),[ee,G]=E.useState(!1),[ne,le]=E.useState(""),Y=E.useMemo(()=>{const Ce=new Date;return Ce.setDate(Ce.getDate()+10),Ce.toISOString().split("T")[0]},[]);E.useEffect(()=>{ne||le(Y)},[Y]);const[X,de]=E.useState([]),[ye,oe]=E.useState(""),[xe,ae]=E.useState([]),[q,K]=E.useState([]),[se,re]=E.useState("house_count"),te=async()=>{try{l(!0),b(null);const Ce=await Te.get("/bills");if(Ce.data.success&&Array.isArray(Ce.data.data)){const Je=Ce.data.data.filter(ve=>ve.billtype==="Shared");w(Je)}else w([])}catch(Ce){console.error("Error loading bills:",Ce),b("Failed to load bills. Please try again.")}finally{l(!1)}},Re=async()=>{try{G(!0);const Ce=await Te.get("/apartments");Ce.data.success&&W(Ce.data.data||[])}catch(Ce){console.error("Error loading apartments:",Ce)}finally{G(!1)}},ke=async(Ce,Je)=>{if(!Ce||!Je){ae([]),K([]),B(0);return}try{P(!0);const ve=await Te.get(`/generate-bills/assigned-houses/details?bill_id=${Ce}&apartment_id=${Je}`);if(ve.data.success)if(ae(ve.data.data.houses||[]),K(ve.data.data.floors||[]),B(ve.data.data.houses.length),S&&ve.data.data.houses.length>0){const Le=parseFloat(S)/ve.data.data.houses.length;U(Le)}else U(0)}catch(ve){console.error("Error fetching assigned houses details:",ve),ae([]),K([]),B(0)}finally{P(!1)}};E.useEffect(()=>{te(),Re()},[]);const Ve=Ce=>{oe(Ce),Ce&&k?ke(k,Ce):(ae([]),K([]),B(0))},Oe=Ce=>{C(Ce),Ce&&ye?ke(Ce,ye):(ae([]),K([]),B(0))},et=Ce=>{D(Ce);const Je=xe;if(Ce&&Je.length>0)if(se==="square_footage"){const ve=parseFloat(Ce)/Je.length,Le=Pb(ve,2,"ten");U(Le)}else{const ve=parseFloat(Ce)/Je.length,Le=Pb(ve,2,"ten");U(Le)}else U(0)},be=async()=>{if(!k){b("Please select a bill.");return}if(!ye){b("Please select an apartment.");return}if(!S||parseFloat(S)<=0){b("Please enter a valid total amount.");return}if(T===0){b("No houses are assigned to this bill for the selected apartment.");return}try{f(!0),b(null);const Ce={bill_id:k,year:A,month:I,totalAmount:parseFloat(S),apartment_id:ye,selected_floors:[],selected_houses:[],calculation_method:se,due_date:ne||new Date(Date.now()+14400*60*1e3).toISOString().split("T")[0]},Je=await Te.post("/generate-bills/multiple",Ce);Je.data.success?(ie.success(`Successfully generated ${Je.data.data?.length||0} bills!`),a(Je.data.data)):b(Je.data.message||"Failed to generate bill")}catch(Ce){console.error("Error generating bill:",Ce),console.error("Error details:",Ce.response?.data);let Je="Failed to generate bill. Please try again.";Ce.response?.data.message?Je=Ce.response.data.message:Ce.message&&(Je=Ce.message),ie.error(Je)}finally{f(!1)}},Ae=()=>{const Ce=g.find(Je=>Je.id===k);return Ce?Ce.bill_name:""},Fe=()=>{const Ce=z.find(Je=>Je.id===ye);return Ce?Ce.name:""};return E.useEffect(()=>{(async()=>{try{const Je=await Te.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});de(Je.data.data||[])}catch(Je){console.error("Error fetching house types:",Je)}})()},[r]),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 pl-1",children:[h&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:h}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("input",{type:"number",value:A,onChange:Ce=>M(parseInt(Ce.target.value)),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:I,onChange:Ce=>F(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(Ce=>e.jsx("option",{value:Ce,children:Ce},Ce))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:ne,onChange:Ce=>le(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),!ne&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Default due date: ",Y," (10 days from today)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:k,onChange:Ce=>Oe(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:n,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),g.map(Ce=>e.jsx("option",{value:Ce.id,children:Ce.bill_name},Ce.id))]}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:ye,onChange:Ce=>Ve(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:ee,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),z.map(Ce=>e.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]}),ee&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Calculation Method *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"house_count",name:"calculation_method",value:"house_count",checked:se==="house_count",onChange:Ce=>re(Ce.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"house_count",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by House Count (Equal division)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"square_footage",name:"calculation_method",value:"square_footage",checked:se==="square_footage",onChange:Ce=>re(Ce.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"square_footage",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by Square Footage (Proportional)"})]})]}),se==="square_footage"&&e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Total amount will be divided proportionally based on each house's square footage"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:S,onChange:Ce=>et(Ce.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),k&&ye&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Assigned Houses Information"}),L&&e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Assigned Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Floors:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:q.length})]})]}),q.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Houses by Floor:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto pr-2",children:q.map(Ce=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Floor ",Ce.floor_id,":"]}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[Ce.assigned_houses_count," houses"]})]},Ce.id))})]})]}),k&&ye&&T>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Calculation Method:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:se==="house_count"?"House Count (Equal)":"Square Footage (Proportional)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ae()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Apartment:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Fe()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T})]})]}),S&&T>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[se==="house_count"?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(S).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",H.toFixed(2),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Rounded up to nearest 10)"})]})]})]}):e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amounts will be calculated proportionally based on each house's square footage and rounded up to the nearest 10"})}),se==="house_count"&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",S,"  ",T," houses =",e.jsxs("span",{className:"font-medium",children:[" $",(parseFloat(S)/T).toFixed(6)]}),e.jsx("span",{className:"mx-2",children:""}),"Rounded up to: ",e.jsxs("span",{className:"font-medium",children:["$",H.toFixed(2)]})," per house"]})]})]}),k&&ye&&!L&&T===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:" No houses are assigned to this bill for the selected apartment. Please assign houses to this bill first."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{onClick:be,disabled:!k||!ye||!S||T===0||d,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs("span",{children:["Generate ",T," Bills"]})})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function TA({bill:t,onClose:a,getApartmentName:r,getFloorName:n,getHouseName:l,getLocationScope:d,getLocationDisplay:f}){if(!t)return null;const h=g=>{if(!g)return"0.00";const w=typeof g=="string"?parseFloat(g):g;return isNaN(w)?"0.00":w.toFixed(2)},b=g=>{switch(g){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ja,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(gr,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(ja,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:t.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(_l,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${b(d(t))}`,children:[d(t)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(mo,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Fi,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r(t.apartment_id)})]})]}),t.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(jf,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n(t.floor_id)})]})]}),t.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Hr,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:f(t)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Xs,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",h(t.totalAmount)]})]}),t.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",h(t.unitPrice)]})]}),t.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(ni,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${t.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:t.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function DA(){const[t,a]=E.useState(!1),[r,n]=E.useState([]),[l,d]=E.useState(!1),[f,h]=E.useState(""),[b,g]=E.useState(""),[w,k]=E.useState([]),[C,S]=E.useState({}),[D,A]=E.useState({}),[M,I]=E.useState(!1),[F,T]=E.useState({}),[B,H]=E.useState({}),[U,L]=E.useState({}),[P,z]=E.useState({}),[W,ee]=E.useState({}),[G,ne]=E.useState(!1),[le,Y]=E.useState(null),[X,de]=E.useState(!1),[ye,oe]=E.useState(!1),[xe,ae]=E.useState(null),q=async()=>{try{d(!0);const fe=await Te.get("/generate-bills");fe.data.success&&(n(fe.data.data),K(fe.data.data))}catch(fe){console.error("Error loading generated bills:",fe),ie.error("Failed to load generated bills")}finally{d(!1)}},K=async fe=>{const st=[...new Set(fe.map(ut=>ut.apartment_id).filter(Boolean))],Ee=[...new Set(fe.map(ut=>ut.floor_id).filter(Boolean))],wt=[...new Set(fe.map(ut=>ut.house_id).filter(Boolean))];if(st.length>0)try{const ut=await Te.get("/apartments");if(ut.data.success){const Et={};ut.data.data.forEach(Mt=>{Et[Mt.id]=Mt.name}),L(Et)}}catch(ut){console.error("Error loading apartments:",ut)}for(const ut of Ee)if(ut&&!P[ut])try{const Et=await Te.get(`/floors/${ut}`);Et.data.success&&z(Mt=>({...Mt,[ut]:Et.data.data.floor_id}))}catch(Et){console.error("Error loading floor:",Et)}for(const ut of wt)if(ut&&!W[ut])try{const Et=await Te.get(`/houses/${ut}`);Et.data.success&&ee(Mt=>({...Mt,[ut]:Et.data.data.house_id}))}catch(Et){console.error("Error loading house:",Et)}},se=fe=>U[fe]||fe||"All Apartments",re=fe=>P[fe]||fe||"All Floors",te=fe=>W[fe]||fe||"All Houses",Re=fe=>fe.house_id?"House":fe.floor_id?"Floor":fe.apartment_id?"Apartment":"Global",ke=fe=>{switch(Re(fe)){case"House":return`${se(fe.apartment_id)}  ${re(fe.floor_id)}  ${te(fe.house_id)}`;case"Floor":return`${se(fe.apartment_id)}  ${re(fe.floor_id)}`;case"Apartment":return se(fe.apartment_id);default:return"All Locations"}};E.useEffect(()=>{q(),ve()},[]);const Ve=()=>{a(!0)},Oe=()=>{a(!1)},et=fe=>{fe&&fe.length>0&&(n(st=>[...fe,...st]),K(fe)),q(),a(!1)},be=fe=>{ae(fe),oe(!0)},Ae=()=>{oe(!1),ae(null)},Fe=fe=>{Y(fe),ne(!0)},Ce=async()=>{if(le)try{de(!0),(await Te.delete(`/generate-bills/${le.id}`)).data.success&&(ie.success("Generated bill deleted successfully"),n(st=>st.filter(Ee=>Ee.id!==le.id)))}catch(fe){console.error("Error deleting generated bill:",fe),ie.error(fe.response?.data?.message||"Failed to delete generated bill")}finally{de(!1),ne(!1),Y(null)}},Je=()=>{ne(!1),Y(null)},ve=async()=>{try{I(!0);const fe=await Te.get("/apartments");if(fe.data.success){k(fe.data.data||[]);const st={};fe.data.data.forEach(Ee=>{st[Ee.id]=Ee.name}),L(st)}}catch(fe){console.error("Error loading apartments:",fe),ie.error("Failed to load apartments")}finally{I(!1)}},Le=r.filter(fe=>{const st=fe.bill_name?.toLowerCase().includes(f.toLowerCase())||fe.month?.toLowerCase().includes(f.toLowerCase())||fe.year?.toString().includes(f)||se(fe.apartment_id)?.toLowerCase().includes(f.toLowerCase())||re(fe.floor_id)?.toLowerCase().includes(f.toLowerCase())||te(fe.house_id)?.toLowerCase().includes(f.toLowerCase()),Ee=!b||fe.billtype===b;return st&&Ee});return[...new Set(r.map(fe=>fe.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:f,onChange:fe=>h(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:Ve,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",Le.length,")"]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):Le.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ca,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Le.map(fe=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:fe.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:fe.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[fe.month," ",fe.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${fe.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:fe.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(fe.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>be(fe),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(Qs,{size:16})}),e.jsx("button",{onClick:()=>Fe(fe),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(Lr,{size:16})})]})]})]})})},fe.id))})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:Oe,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(_A,{onClose:Oe,onCreated:et})]})}),ye&&xe&&e.jsx(TA,{bill:xe,onClose:Ae,getApartmentName:se,getFloorName:re,getHouseName:te,getLocationScope:Re,getLocationDisplay:ke}),G&&le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Lr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",le.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",le.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:le.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:le.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[le.month," ",le.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Je,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:X,children:"Cancel"}),e.jsx("button",{onClick:Ce,disabled:X,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function RA(){const[t,a]=E.useState([]),[r,n]=E.useState(!1),[l,d]=E.useState(""),[f,h]=E.useState(""),[b,g]=E.useState([]),[w,k]=E.useState({}),[C,S]=E.useState({}),[D,A]=E.useState({}),[M,I]=E.useState({}),[F,T]=E.useState({}),[B,H]=E.useState(!1),[U,L]=E.useState(null),[P,z]=E.useState(!1),[W,ee]=E.useState(null),[G,ne]=E.useState(!1),le=async()=>{try{n(!0);const te=await Te.get("/generate-measurable-bills");te.data.success&&(a(te.data.data),Y(te.data.data))}catch(te){console.error("Error loading measurable bills:",te),ie.error("Failed to load measurable bills")}finally{n(!1)}},Y=async te=>{const Re=[...new Set(te.map(Oe=>Oe.apartment_id).filter(Boolean))],ke=[...new Set(te.map(Oe=>Oe.floor_id).filter(Boolean))],Ve=[...new Set(te.map(Oe=>Oe.house_id).filter(Boolean))];if(Re.length>0)try{const Oe=await Te.get("/apartments");if(Oe.data.success){const et={};Oe.data.data.forEach(be=>{et[be.id]=be.name}),A(et)}}catch(Oe){console.error("Error loading apartments:",Oe)}for(const Oe of ke)if(Oe&&!M[Oe])try{const et=await Te.get(`/floors/${Oe}`);et.data.success&&I(be=>({...be,[Oe]:et.data.data.floor_id}))}catch(et){console.error("Error loading floor:",et)}for(const Oe of Ve)if(Oe&&!F[Oe])try{const et=await Te.get(`/houses/${Oe}`);et.data.success&&T(be=>({...be,[Oe]:et.data.data.house_id}))}catch(et){console.error("Error loading house:",et)}},X=te=>D[te]||te||"N/A",de=te=>M[te]||te||"N/A",ye=te=>F[te]||te||"N/A",oe=te=>te.house_id?`${X(te.apartment_id)}  ${de(te.floor_id)}  ${ye(te.house_id)}`:te.floor_id?`${X(te.apartment_id)}  ${de(te.floor_id)}`:te.apartment_id?X(te.apartment_id):"Global";E.useEffect(()=>{le()},[]);const xe=te=>{ee(te),ne(!0)},ae=()=>{ne(!1),ee(null)},q=te=>{L(te),H(!0)},K=async()=>{if(U)try{z(!0),(await Te.delete(`/generate-measurable-bills/${U.id}`)).data.success&&(ie.success("Measurable bill deleted successfully"),a(Re=>Re.filter(ke=>ke.id!==U.id)))}catch(te){console.error("Error deleting measurable bill:",te),ie.error(te.response?.data?.message||"Failed to delete measurable bill")}finally{z(!1),H(!1),L(null)}},se=()=>{H(!1),L(null)},re=t.filter(te=>{const Re=te.bill_name?.toLowerCase().includes(l.toLowerCase())||te.month?.toLowerCase().includes(l.toLowerCase())||te.year?.toString().includes(l)||X(te.apartment_id)?.toLowerCase().includes(l.toLowerCase())||de(te.floor_id)?.toLowerCase().includes(l.toLowerCase())||ye(te.house_id)?.toLowerCase().includes(l.toLowerCase()),ke=!f||te.billtype===f;return Re&&ke});return[...new Set(t.map(te=>te.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:l,onChange:te=>d(te.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",re.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",re.length," of ",t.length," bills"]})]}),r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):re.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(js,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:re.map(te=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:te.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:te.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[te.month," ",te.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(te.created_at).toLocaleDateString()," at ",new Date(te.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>xe(te),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(Qs,{size:16})}),e.jsx("button",{onClick:()=>q(te),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:te.payment_status==="Paid",children:e.jsx(Lr,{size:16})})]})]})]})})},te.id))})]})]}),G&&W&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:ae,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:W.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:W.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[W.month," ",W.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:oe(W)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:W.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:W.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[W.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",W.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:W.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(W.created_at).toLocaleString()})]}),W.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(W.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),B&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Lr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:U.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:U.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U.month," ",U.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",U.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:K,disabled:P,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function MA(){const[t,a]=E.useState(!1),[r,n]=E.useState("bills");hr();const{apartment_id:l}=gn(),[d,f]=E.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ja,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>n("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${r==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>n("generateBill"),className:`px-4 py-2 font-semibold 
                                ${r==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>n("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${r==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),r==="bills"&&e.jsx(xw,{}),r==="generateBill"&&e.jsx(DA,{}),r==="measurableBill"&&e.jsx(RA,{})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function IA({show:t,onClose:a,onSave:r}){const[n,l]=E.useState({fromRange:"",toRange:""});if(!t)return null;const d=h=>{const{name:b,value:g}=h.target;l(w=>({...w,[b]:g}))},f=()=>{if(!n.fromRange||!n.toRange){ie.error("Please fill all fields.");return}r(n)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(gr,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:n.fromRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:n.toRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:f,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function OA({range:t,onClose:a,onUpdated:r}){const[n,l]=E.useState({fromRange:"",toRange:"",unitPrice:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),g=localStorage.getItem("token");E.useEffect(()=>{t&&l({fromRange:t.fromRange??"",toRange:t.toRange??"",unitPrice:t.unitPrice??""})},[t]);const w=C=>{const{name:S,value:D}=C.target;l(A=>({...A,[S]:D}))},k=async C=>{C.preventDefault(),f(!0),b("");try{const S=await Te.put(`/billranges/${t.id}`,n,{headers:{Authorization:`Bearer ${g}`}});S.data.success?(r&&r(S.data.data),a&&a()):b(S.data.message||"Failed to update bill range")}catch(S){console.error("Update error:",S),b("Error updating bill range")}finally{f(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:n.fromRange,onChange:w,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:n.toRange,onChange:w,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})]})})}function FA(){const{bill_id:t}=gn(),[a,r]=E.useState(!1),[n,l]=E.useState(null),[d,f]=E.useState([]),[h,b]=E.useState(!1),g=hr(),[w,k]=E.useState([]),[C,S]=E.useState(!1),[D,A]=E.useState(!1),[M,I]=E.useState(!1),[F,T]=E.useState(null),[B,H]=E.useState(null),[U,L]=E.useState(!1),P=async()=>{try{r(!0),l(null);const le=await Te.get(`/billranges?bill_id=${t}`);if(le.data.success&&Array.isArray(le.data.data)){const Y=le.data.data.filter(X=>X.bill_id===t);f(Y)}else f([])}catch(le){console.error("Error loading bill ranges:",le),l("Failed to load bill ranges. Please try again.")}finally{r(!1)}};E.useEffect(()=>{P()},[t]);const z=()=>{g("/bills-and-calculations")},W=async()=>{try{S(!0),l(null);const le=await Te.get("/bills");le.data.success&&Array.isArray(le.data.data)?k(le.data.data):k([])}catch(le){console.error("Error loading bills:",le),l("Failed to load bills. Please try again.")}finally{S(!1)}};E.useEffect(()=>{W()},[]);const ee=le=>{H(le),L(!0)},G=async()=>{try{if(!B)return;await Te.delete(`/billranges/${B.id}`),ie.success("Bill range deleted successfully"),L(!1),H(null),P()}catch(le){console.error("Delete bill range error:",le),ie.error("Failed to delete bill range")}},ne=()=>{L(!1),H(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:b}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${h?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:z,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:25})}),e.jsx(ja,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const le=w.find(Y=>Y.id===t);return le?le.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):n?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[n,e.jsx("button",{onClick:P,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((le,Y)=>e.jsxs("tr",{onClick:()=>g(`/billprice/${t}/${le.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:Y+1}),e.jsx("td",{className:"px-4 py-4",children:le.fromRange}),e.jsx("td",{className:"px-4 py-4",children:le.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:X=>{X.stopPropagation(),T(le),I(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:X=>{X.stopPropagation(),ee(le)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},le.id))})]})})]})]})})]}),e.jsx(IA,{show:D,onClose:()=>A(!1),onSave:async le=>{try{(await Te.post("/billranges",{...le,bill_id:t})).data.success?(ie.success("Bill range added successfully!"),A(!1),P()):ie.error("Failed to add bill range.")}catch(Y){console.error("Error adding bill range:",Y),ie.error("Error adding bill range.")}}}),M&&e.jsx(OA,{range:F,onClose:()=>I(!1),onUpdated:()=>{ie.success("Bill range updated!"),P()}}),U&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:G,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function BA({bill_id:t,billrange_id:a,onClose:r,onCreated:n}){const[l,d]=E.useState({year:"",month:"",unitprice:"",fixedamount:""}),[f,h]=E.useState(!1),[b,g]=E.useState("");Dr.useEffect(()=>{},[t,a]);const w=C=>{const{name:S,value:D}=C.target;d(A=>({...A,[S]:D}))},k=async C=>{C.preventDefault(),h(!0),g("");const S={...l,bill_id:t,billrange_id:a};try{const D=await Te.post("/billprice",S,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});D.data.success?(n?.(D.data.data),d({year:"",month:"",unitprice:"",fixedamount:""}),r()):g(D.data.message||"Failed to save bill price")}catch(D){console.error("Error saving bill price:",D),console.error("Error response:",D.response?.data),D.response?.status===400?g(D.response.data?.message||"Bad request. Please check all required fields."):D.response?.status===403?g("Access denied. Please check your login or permissions."):g("Error saving bill price. Please try again.")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(gr,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:l.year,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2025",max:"2030"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:l.month,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:l.unitprice,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:l.fixedamount,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!t||!a,className:`px-4 py-2 rounded-lg text-white transition ${f||!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:f?"Saving...":"Save"})]})]})]})})}function LA({bill_id:t,billrange_id:a,billPrice:r,onClose:n,onUpdated:l}){const[d,f]=E.useState({year:"",month:"",unitprice:"",fixedamount:""}),[h,b]=E.useState(!1),[g,w]=E.useState("");E.useEffect(()=>{r&&f({year:r.year||"",month:r.month||"",unitprice:r.unitprice||"",fixedamount:r.fixedamount||""})},[r]),E.useEffect(()=>{},[t,a,r,d]);const k=S=>{const{name:D,value:A}=S.target;f(M=>({...M,[D]:A}))},C=async S=>{if(S.preventDefault(),b(!0),w(""),!r||!r.id){w("No bill price selected for editing"),b(!1);return}const D={...d,bill_id:t,billrange_id:a,id:r.id};try{const A=await Te.put(`/billprice/${r.id}`,D,{headers:{"Content-Type":"application/json"}});A.data.success?(l?.(A.data.data),n()):w(A.data.message||"Failed to update bill price")}catch(A){console.error("Error updating bill price:",A),console.error("Error response:",A.response?.data),A.response?.status===400?w(A.response.data?.message||"Bad request. Please check all required fields."):A.response?.status===403?w("Access denied. Please check your login or permissions."):A.response?.status===404?w("Bill price not found. It may have been deleted."):w("Error updating bill price. Please try again.")}finally{b(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(gr,{size:20})})]}),g&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:g}),e.jsxs("form",{onSubmit:C,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:d.year,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:d.month,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:d.unitprice,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:d.fixedamount,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!t||!a||!r,className:`px-4 py-2 rounded-lg text-white transition ${h||!t||!a||!r?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:h?"Updating...":"Update"})]})]})]})})}function PA(){const{bill_id:t,billrange_id:a}=gn(),r=hr(),[n,l]=E.useState([]),[d,f]=E.useState(!1),[h,b]=E.useState(null),[g,w]=E.useState(!1),[k,C]=E.useState(!1),[S,D]=E.useState(!1),[A,M]=E.useState(null);Dr.useEffect(()=>{},[t,a]);const I=async()=>{try{f(!0),b(null);const P=await Te.get(`/billprice?bill_id=${t}&billrange_id=${a}`);P.data.success?l(P.data.data||[]):(l([]),b(P.data.message||"Failed to load bill prices"))}catch(P){console.error("Error loading bill prices:",P),b(P.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{f(!1)}};E.useEffect(()=>{t&&a?I():b("Missing bill_id or billrange_id in URL parameters")},[t,a]);const F=()=>{r(-1)},T=()=>{I(),C(!1),ie.success("Bill price created successfully!")},B=P=>{M(P),D(!0)},H=()=>{I(),D(!1),M(null),ie.success("Updated!")},U=()=>{D(!1),M(null)},L=async P=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await Te.delete(`/billprice/${P}`),ie.success("Bill price deleted successfully"),I()}catch(z){console.error("Error deleting bill price:",z),ie.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:w}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${g?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:F,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(Mn,{size:25})}),e.jsx(xr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>C(!0),disabled:!t||!a,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):h?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[h,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.map((P,z)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:z+1}),e.jsx("td",{className:"px-4 py-4",children:P.year}),e.jsx("td",{className:"px-4 py-4",children:P.month}),e.jsx("td",{className:"px-4 py-4",children:P.unitprice}),e.jsx("td",{className:"px-4 py-4",children:P.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(P),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Ea,{size:20})}),e.jsx("button",{onClick:()=>L(P.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Lr,{size:20})})]})})]},P.id))})]})})]})]})})]}),k&&e.jsx(BA,{onClose:()=>C(!1),onCreated:T,billrange_id:a,bill_id:t}),S&&A&&e.jsx(LA,{onClose:U,onUpdated:H,billrange_id:a,bill_id:t,billPrice:A}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function zA(){const[t,a]=E.useState(!1),[r,n]=E.useState(0),[l,d]=E.useState(!0),[f,h]=E.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0}),{auth:b}=E.useContext(Or);E.useEffect(()=>{b?.user?.id&&(g(),w())},[b?.user?.id]);const g=async()=>{try{d(!0);const C=await Te.get(`/user-apartments/users/${b.user.id}/apartments`);if(C.data.success){const S=C.data.data||[];n(S.length),h(D=>({...D,assignedApartments:S.length}))}else ie.error("Failed to load assigned apartments")}catch(C){console.error("Error fetching assigned apartments:",C),ie.error("Error loading assigned apartments")}finally{d(!1)}},w=async()=>{try{const C={pendingTasks:12,completedTasks:45,maintenanceRequests:8};h(S=>({...S,...C}))}catch(C){console.error("Error fetching dashboard stats:",C)}},k=C=>C.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Hr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Ha,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:k(r)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(Au,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assigned Apartments Summary"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View Details"})]}),r===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Oa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Apartments Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't been assigned to any apartments yet."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:k(r)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Apartments"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:k(r)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Status"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:k(f.pendingTasks)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Tasks"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:k(f.maintenanceRequests)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maintenance"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4 mt-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ha,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["You are responsible for ",r," apartments"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ha,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Regular inspections ensure tenant satisfaction"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx(Ha,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Keep track of pending tasks and maintenance requests"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 lg:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:r===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity. Start by getting assigned to apartments."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Ha,{size:16,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Assigned to ",r," apartments"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today  All apartments active"})]})]}),e.jsx(Au,{size:16,className:"text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Ks,{size:16,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[f.pendingTasks," pending tasks"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Requires your attention"})]})]}),e.jsx(Au,{size:16,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(ni,{size:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[f.maintenanceRequests," maintenance requests"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Scheduled for this week"})]})]}),e.jsx(Au,{size:16,className:"text-blue-500"})]})]})})]})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function UA(){const[t,a]=E.useState(!1),[r,n]=E.useState(null),[l,d]=E.useState(!0),[f,h]=E.useState(!1),[b,g]=E.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:w}=E.useContext(Or);E.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const I=await Te.get("/auth/me");if(I.data.success&&I.data.data&&I.data.data.length>0){const F=I.data.data[0];n(F),g({firstname:F.firstname||"",lastname:F.lastname||"",country:F.country||"",mobile:F.mobile||""})}else ie.error("No profile data found")}catch(I){console.error("Error fetching profile:",I),ie.error("Failed to load profile")}finally{d(!1)}},C=()=>{h(!0)},S=()=>{h(!1),r&&g({firstname:r.firstname||"",lastname:r.lastname||"",country:r.country||"",mobile:r.mobile||""})},D=async()=>{try{const I=await Te.put(`/auth/users/${r.id}`,b);I.data.success&&(n(F=>({...F,...I.data.data})),h(!1),ie.success("Profile updated successfully"),k())}catch(I){console.error("Error updating profile:",I),ie.error(I.response?.data?.message||"Failed to update profile")}},A=I=>{const{name:F,value:T}=I.target;g(B=>({...B,[F]:T}))},M=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return l?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):r?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:S,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(gr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:D,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(Cf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Ea,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[r.firstname?.charAt(0)?.toUpperCase(),r.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[r.firstname," ",r.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:r.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(_l,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",M(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),f?e.jsx("input",{type:"text",name:"firstname",value:b.firstname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),f?e.jsx("input",{type:"text",name:"lastname",value:b.lastname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(mo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Dc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(ho,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(kc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:r.role})]})]})]})})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function HA(){const[t,a]=E.useState([]),[r,n]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState(!1),[b,g]=E.useState(!1),{auth:w}=E.useContext(Or),k=hr(),C=async()=>{try{n(!0);const I=await Te.get(`/user-apartments/users/${w.user.id}/apartments`);I.data.success?a(I.data.data||[]):(ie.error("Failed to load apartments"),a([]))}catch(I){console.error("Error fetching apartments:",I),ie.error("Error loading your apartments"),a([])}finally{n(!1)}};E.useEffect(()=>{w?.user?.id&&C()},[w?.user?.id]);const S=t.filter(I=>I.name?.toLowerCase().includes(l.toLowerCase())||I.address?.toLowerCase().includes(l.toLowerCase())||I.city?.toLowerCase().includes(l.toLowerCase())),D=I=>{try{return new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=I=>I?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",M=I=>{k(`/floors/${I}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>g(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:l,onChange:I=>d(I.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Oa,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:S.map(I=>e.jsxs("div",{onClick:()=>M(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Hr,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(mo,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(ni,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(Oa,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",D(I.assigned_at)]})})]},I.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(I=>e.jsxs("div",{onClick:()=>M(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Hr,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(mo,{size:16}),e.jsxs("span",{className:"text-sm",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(ni,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(Oa,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",D(I.assigned_at)]})})]},I.id))})]})}),S.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(js,{size:20})})})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function VA({bill_id:t,onClose:a,onSuccess:r}){const[n,l]=E.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[d,f]=E.useState(!1),[h,b]=E.useState({}),g=S=>{const{name:D,value:A}=S.target;l(M=>({...M,[D]:A})),h[D]&&b(M=>({...M,[D]:""}))},w=()=>{const S={};return(!n.year||n.year<2e3||n.year>2100)&&(S.year="Please enter a valid year (2000-2100)"),(!n.month||n.month<1||n.month>12)&&(S.month="Please select a valid month (1-12)"),(!n.amount||parseFloat(n.amount)<=0)&&(S.amount="Please enter a valid amount"),b(S),Object.keys(S).length===0},k=async S=>{if(S.preventDefault(),!!w())try{f(!0);const D=await Te.post("/shared-value-prices",{bill_id:t,year:parseInt(n.year),month:parseInt(n.month),amount:parseFloat(n.amount)});D.data.success?r():ie.error(D.data.message||"Failed to create shared value price")}catch(D){console.error("Error creating shared value price:",D),D.response?.data?.message?ie.error(D.response.data.message):ie.error("Failed to create shared value price")}finally{f(!1)}},C=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:n.year,onChange:g,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),h.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:n.month,onChange:g,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:C.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))}),h.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:n.amount,onChange:g,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),h.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[d&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Creating...":"Create"})]})]})]})]})})}function GA(){const{bill_id:t}=gn(),a=hr(),[r,n]=E.useState([]),[l,d]=E.useState(null),[f,h]=E.useState(!1),[b,g]=E.useState(!1),[w,k]=E.useState(null),[C,S]=E.useState(!1),[D,A]=E.useState(!1),[M,I]=E.useState(!1),[F,T]=E.useState(null),[B,H]=E.useState(!1),[U,L]=E.useState(null),P=async()=>{try{g(!0);const ye=await Te.get(`/bills/${t}`);ye.data.success&&d(ye.data.data)}catch(ye){console.error("Error loading bill info:",ye)}finally{g(!1)}},z=async()=>{try{if(h(!0),k(null),!t){k("Bill ID is required");return}const ye=await Te.get(`/shared-value-prices/bill/${t}`);ye.data.success?n(ye.data.data||[]):(k("Failed to load shared value prices"),n([]))}catch(ye){console.error("Error loading shared value prices:",ye),k("Failed to load shared value prices. Please try again."),n([])}finally{h(!1)}};E.useEffect(()=>{t&&(P(),z())},[t]);const W=()=>{a(-1)},ee=()=>{A(!1),ie.success("Shared value price created successfully"),z()};E.useEffect(()=>{t&&(P(),z())},[t]);const G=()=>{z(),I(!1),T(null),ie.success("Shared value price updated successfully")},ne=ye=>{T(ye),I(!0)},le=ye=>{L(ye),H(!0)},Y=async()=>{try{if(!U)return;await Te.delete(`/shared-value-prices/${U.id}`),ie.success("Shared value price deleted successfully"),H(!1),L(null),z()}catch(ye){console.error("Delete shared value price error:",ye),ie.error("Failed to delete shared value price")}},X=()=>{H(!1),L(null)},de=ye=>["January","February","March","April","May","June","July","August","September","October","November","December"][ye-1]||ye;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:S}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${C?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:W,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(Mn,{size:25})}),e.jsx(xr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),l&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[l.bill_name," - ",l.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),disabled:!t,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${t?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:z,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((ye,oe)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:oe+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ye.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:de(ye.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:ye.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(ye.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ne(ye),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(Ea,{size:18})}),e.jsx("button",{onClick:()=>le(ye),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(Lr,{size:18})})]})})]},ye.id))})]})})]})]})})]}),D&&e.jsx(VA,{bill_id:t,onClose:()=>A(!1),onSuccess:ee}),M&&F&&e.jsx(EditSharedValuePriceModal,{price:F,onClose:()=>{I(!1),T(null)},onSuccess:G}),B&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",de(U.month)," ",U.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:X,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function bw({payment:t,onClose:a,onUpdate:r}){const[n,l]=E.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[d,f]=E.useState(!1),h=!!t?.generateMeasurable_bills_id;if(E.useEffect(()=>{t&&l({additionalAmount:0,payment_status:t.payment_status||"Pending",paid_at:t.paid_at?new Date(t.paid_at).toISOString().split("T")[0]:""})},[t,h]),!t)return null;const g=h?parseFloat(t.generated_total_amount)||parseFloat(t.unitPrice)||0:parseFloat(t.unitPrice)||0,w=parseFloat(t.paidAmount)||0,k=parseFloat(t.pendingAmount)||0,C=w+parseFloat(n.additionalAmount||0),S=g-C,D=F=>{const T=typeof F=="string"?parseFloat(F):F;return isNaN(T)?"0.00":T.toFixed(2)},A=async F=>{F.preventDefault();const T=parseFloat(n.additionalAmount||0);if(T<0){ie.error("Payment amount cannot be negative");return}if(T>k){ie.error(`Payment amount cannot exceed pending amount of $${D(k)}`);return}let B=n.payment_status;C>=g?B="Paid":C>0?B="Partial":B="Pending";try{f(!0);const H={payment_status:B,paidAmount:C};B==="Paid"&&n.paid_at?H.paid_at=n.paid_at:B==="Paid"&&!n.paid_at&&(H.paid_at=new Date().toISOString().split("T")[0]);const U=await Te.patch(`/bill-payments/${t.id}/status`,H);U.data.success&&(ie.success("Payment updated successfully"),r(U.data.data))}catch(H){console.error("Error updating payment:",H),console.error("Error details:",H.response?.data),ie.error(`Failed to update payment: ${H.response?.data?.message||H.message}`)}finally{f(!1)}},M=F=>{const T=parseFloat(F)||0,H=Math.min(T,k),U=w+H;let L="Pending";U>=g?L="Paid":U>0&&(L="Partial"),l(P=>({...P,additionalAmount:H,payment_status:L}))},I=S<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ja,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),h&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(gr,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.bill_name," (",t.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.apartment_name," - Floor ",t.floor_id," - House ",t.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",D(w)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",D(k)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${h?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${h?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:h?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${h?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",D(g)]}),h&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:k,value:n.additionalAmount,onChange:F=>M(F.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",D(k)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",D(n.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",D(C)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",D(n.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${S>0&&S<k?"bg-orange-50 dark:bg-orange-900/20":I?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${S>0&&S<k?"text-orange-800 dark:text-orange-300":I?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${S>0&&S<k?"text-orange-600 dark:text-orange-400":I?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",D(S)]}),I?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):S<k?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",D(k-S)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${n.payment_status==="Paid"?"text-green-600 dark:text-green-400":n.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:n.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(n.payment_status==="Paid"||I)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:n.paid_at,onChange:F=>l(T=>({...T,paid_at:F.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:n.payment_status==="Paid"||I})]}),!n.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||n.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{size:16}),e.jsxs("span",{children:["Pay $",D(n.additionalAmount)]})]})})]})]})]})]})})}function YA(){const[t,a]=E.useState([]),[r,n]=E.useState(!1),[l,d]=E.useState({}),[f,h]=E.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[b,g]=E.useState([]),[w,k]=E.useState([]),[C,S]=E.useState([]),[D,A]=E.useState([]),[M,I]=E.useState(""),[F,T]=E.useState(!1),[B,H]=E.useState(!1),[U,L]=E.useState(!1),[P,z]=E.useState(!1),[W,ee]=E.useState(null),[G,ne]=E.useState(!1),[le,Y]=E.useState(null),[X,de]=E.useState(!1),[ye,oe]=E.useState(null),xe=async()=>{try{const Ee=await Te.get("/bills");Ee.data.success&&A(Ee.data.data||[])}catch(Ee){console.error("Error loading bills:",Ee),ie.error("Failed to load bills")}},ae=async()=>{try{H(!0);const Ee=await Te.get("/apartments");Ee.data.success?g(Ee.data.data||[]):g([])}catch(Ee){console.error("Error loading apartments:",Ee),ie.error("Failed to load apartments"),g([])}finally{H(!1)}},q=async Ee=>{if(!Ee){k([]),S([]);return}try{L(!0);const wt=await Te.get(`/floors?apartment_id=${Ee}`);wt.data.success?k(wt.data.data||[]):k([])}catch(wt){console.error("Error loading floors:",wt),ie.error("Failed to load floors"),k([])}finally{L(!1)}},K=async Ee=>{if(!Ee||!f.apartment_id){S([]);return}try{z(!0);const wt=await Te.get(`/houses?floor_id=${Ee}&apartment_id=${f.apartment_id}`);wt.data.success?S(wt.data.data||[]):S([])}catch(wt){console.error("Error loading houses:",wt),ie.error("Failed to load houses"),S([])}finally{z(!1)}},se=async()=>{try{n(!0);const Ee=new URLSearchParams;Object.entries(f).forEach(([ut,Et])=>{Et&&Ee.append(ut,Et)});const wt=await Te.get(`/bill-payments?${Ee}`);wt.data.success&&a(wt.data.data)}catch(Ee){console.error("Error loading payments:",Ee),console.error("Payment loading error details:",Ee.response?.data),ie.error("Failed to load payments. Check console for details.")}finally{n(!1)}},re=async()=>{try{const Ee=await Te.get("/bill-payments/summary");if(Ee.data.success){const wt={};Ee.data.data.forEach(ut=>{wt[ut.payment_status]=ut}),d(wt)}}catch(Ee){console.error("Error loading summary:",Ee)}};E.useEffect(()=>{xe(),ae(),re(),se()},[]),E.useEffect(()=>{se()},[f]);const te=Ee=>{h({billtype:Ee,apartment_id:"",floor_id:"",house_id:"",payment_status:f.payment_status,month:f.month,year:f.year})},Re=Ee=>{h(wt=>({...wt,apartment_id:Ee,floor_id:"",house_id:""})),q(Ee)},ke=Ee=>{h(wt=>({...wt,floor_id:Ee,house_id:""})),K(Ee)},Ve=Ee=>{h(wt=>({...wt,house_id:Ee}))},Oe=(Ee,wt)=>{h(ut=>({...ut,[Ee]:wt}))},et=Ee=>{oe(Ee),de(!0)},be=async()=>{if(ye)try{Y(ye.id),(await Te.delete(`/bill-payments/${ye.id}`)).data.success&&(ie.success("Payment deleted successfully"),a(wt=>wt.filter(ut=>ut.id!==ye.id)),re())}catch(Ee){console.error("Error deleting payment:",Ee),ie.error(Ee.response?.data?.message||"Failed to delete payment")}finally{Y(null),de(!1),oe(null)}},Ae=async Ee=>{try{const{jsPDF:wt}=await hw(async()=>{const{jsPDF:At}=await import("./jspdf.es.min-DP3h-qo0.js").then(vt=>vt.j);return{jsPDF:At}},[]),ut=new wt("p","mm","a4"),Et=ut.internal.pageSize.getWidth();ut.setFontSize(18),ut.setFont(void 0,"bold"),ut.text("INVOICE",Et/2,20,{align:"center"});const Mt=String(new Date().getTime()%1e3).padStart(3,"0"),qt=new Date().toISOString().split("T")[0];ut.setFontSize(10),ut.setFont(void 0,"normal"),ut.text(`Invoice No: ${Mt}`,15,32),ut.text(`Print Date: ${qt}`,Et-15,32,{align:"right"}),ut.setFontSize(11),ut.text(`Apartment: ${Ee.apartment_name||""}`,15,44),Ee.floor_id&&ut.text(`Floor: ${Ee.floor_id}`,15,52),Ee.house_number&&ut.text(`House: ${Ee.house_number}`,15,60);const ur=74,Ut=[15,110,150];ut.setDrawColor(0),ut.setFillColor(240,240,240),ut.rect(15,ur-8,Et-30,8,"F"),ut.setFontSize(11),ut.setTextColor(40),ut.text("Description",Ut[0],ur-2),ut.text("Due Amount",Ut[1],ur-2),ut.text("Paid Amount",Ut[2],ur-2);const Yt=Ee.bill_name||Ee.bill_id||"Charge",It=Number(Ee.unitPrice??Number(Ee.paidAmount||0)+Number(Ee.pendingAmount||0)),$e=Number(Ee.paidAmount||0),jt=ur+8;ut.setFontSize(10),ut.setTextColor(0),ut.text(String(Yt),Ut[0],jt),ut.text(It.toFixed(2),Ut[1],jt),ut.text($e.toFixed(2),Ut[2],jt);const Nt=jt+18;ut.setFont(void 0,"bold"),ut.text("Total Paid:",Ut[1],Nt),ut.text($e.toFixed(2),Ut[2],Nt),ut.setFont(void 0,"normal"),ut.setFontSize(10),ut.text("Thank you for your business!",15,Nt+18);const lt=`INVOICE_${Mt}_${(Ee.apartment_name||"apartment").replace(/\s+/g,"_")}_${Ee.month||""}_${Ee.year||""}.pdf`;ut.save(lt),ie.success("Invoice downloaded")}catch(wt){console.error("Invoice generation failed",wt),ie.error("Failed to generate invoice")}},Fe=()=>{h({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),I(""),k([]),S([])},Ce=t.filter(Ee=>{const wt=M.toLowerCase();return Ee.bill_name?.toLowerCase().includes(wt)||Ee.apartment_name?.toLowerCase().includes(wt)||Ee.house_number?.toString().includes(M)||Ee.month?.toLowerCase().includes(wt)}),Je=Ee=>{switch(Ee){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},ve=["January","February","March","April","May","June","July","August","September","October","November","December"],Le=[...new Set(D.map(Ee=>Ee.billtype))].filter(Ee=>Ee),fe=()=>{ne(!1),ee(null)},st=Ee=>{a(wt=>wt.map(ut=>ut.id===Ee.id?Ee:ut)),fe(),re()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:T}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${F?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ja,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:M,onChange:Ee=>I(Ee.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.billtype,onChange:Ee=>te(Ee.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),Le.map(Ee=>e.jsx("option",{value:Ee,children:Ee},Ee))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:f.apartment_id,onChange:Ee=>Re(Ee.target.value),disabled:B,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),b.map(Ee=>e.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))]}),B&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.floor_id,onChange:Ee=>ke(Ee.target.value),disabled:!f.apartment_id||U,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),w.map(Ee=>e.jsxs("option",{value:Ee.id,children:["Floor ",Ee.floor_id]},Ee.id))]}),U&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.house_id,onChange:Ee=>Ve(Ee.target.value),disabled:!f.floor_id||P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),C.map(Ee=>e.jsxs("option",{value:Ee.id,children:["House ",Ee.house_id]},Ee.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:f.payment_status,onChange:Ee=>Oe("payment_status",Ee.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.month,onChange:Ee=>Oe("month",Ee.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),ve.map(Ee=>e.jsx("option",{value:Ee,children:Ee},Ee))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:f.year,onChange:Ee=>Oe("year",Ee.target.value),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:Fe,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",Ce.length," of ",t.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(kf,{size:16}),e.jsxs("span",{children:[Ce.length," payments found"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):Ce.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ce.map(Ee=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Ee.bill_name," (",Ee.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Fi,{size:12,className:"inline mr-1"}),Ee.apartment_name,e.jsx(Hr,{size:12,className:"inline mx-1"}),"Floor ",Ee.floor_id," - House ",Ee.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[Ee.month," ",Ee.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",Ee.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",Ee.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",Ee.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Je(Ee.payment_status)}`,children:Ee.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Ee.paid_at?new Date(Ee.paid_at).toLocaleDateString():new Date(Ee.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>Ae(Ee),className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-all duration-200",title:"Download Invoice",children:e.jsx(Ml,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Download Invoice",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>et(Ee),disabled:le===Ee.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:le===Ee.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Lr,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})]})})]},Ee.id))})]})})})]})})]}),G&&e.jsx(bw,{payment:W,onClose:fe,onUpdate:st}),X&&ye&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Lr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[ye.bill_name," (",ye.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[ye.apartment_name," - House ",ye.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",ye.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${ye.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:ye.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{de(!1),oe(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:le===ye.id,children:"Cancel"}),e.jsx("button",{onClick:be,disabled:le===ye.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:le===ye.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}var Ct;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ct||(Ct={}));var zb=new Map([[Ct.QR_CODE,"QR_CODE"],[Ct.AZTEC,"AZTEC"],[Ct.CODABAR,"CODABAR"],[Ct.CODE_39,"CODE_39"],[Ct.CODE_93,"CODE_93"],[Ct.CODE_128,"CODE_128"],[Ct.DATA_MATRIX,"DATA_MATRIX"],[Ct.MAXICODE,"MAXICODE"],[Ct.ITF,"ITF"],[Ct.EAN_13,"EAN_13"],[Ct.EAN_8,"EAN_8"],[Ct.PDF_417,"PDF_417"],[Ct.RSS_14,"RSS_14"],[Ct.RSS_EXPANDED,"RSS_EXPANDED"],[Ct.UPC_A,"UPC_A"],[Ct.UPC_E,"UPC_E"],[Ct.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Ub;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Ub||(Ub={}));function XA(t){return Object.values(Ct).includes(t)}var Li;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Li||(Li={}));var Sn=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Li.SCAN_TYPE_CAMERA,Li.SCAN_TYPE_FILE],t}(),vw=function(){function t(a,r){this.format=a,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(a){if(!zb.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new t(a,zb.get(a))},t}(),Hb=function(){function t(){}return t.createFromText=function(a){var r={text:a};return{decodedText:a,result:r}},t.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},t}(),Lm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Lm||(Lm={}));var ww=function(){function t(){}return t.createFrom=function(a){return{errorMessage:a,type:Lm.UNKWOWN_ERROR}},t}(),Nw=function(){function t(a){this.verbose=a}return t.prototype.log=function(a){this.verbose&&console.log(a)},t.prototype.warn=function(a){this.verbose&&console.warn(a)},t.prototype.logError=function(a,r){(this.verbose||r===!0)&&console.error(a)},t.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},t}();function si(t){return typeof t>"u"||t===null}function qA(t,a,r){return t>r?r:t<a?a:t}var gc=function(){function t(){}return t.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},t.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Tr=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(a){return"Last Match: ".concat(a)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Vb=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),kw=function(){function t(){}return t.isMediaStreamConstraintsValid=function(a,r){if(typeof a!="object"){var n=typeof a;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(l),f=Object.keys(a),h=0,b=f;h<b.length;h++){var g=b[h];if(d.has(g))return r.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),_0={exports:{}},$A=_0.exports,Gb;function WA(){return Gb||(Gb=1,function(t,a){(function(r,n){n(a)})($A,function(r){function n(Q){return Q==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Q,i){Q.__proto__=i}||function(Q,i){for(var c in i)i.hasOwnProperty(c)&&(Q[c]=i[c])};function d(Q,i){l(Q,i);function c(){this.constructor=Q}Q.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}function f(Q,i){var c=Object.setPrototypeOf;c?c(Q,i):Q.__proto__=i}function h(Q,i){i===void 0&&(i=Q.constructor);var c=Error.captureStackTrace;c&&c(Q,i)}var b=function(Q){d(i,Q);function i(c){var u=this.constructor,m=Q.call(this,c)||this;return Object.defineProperty(m,"name",{value:u.name,enumerable:!1}),f(m,u.prototype),h(m),m}return i}(Error);class g extends b{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class k extends g{}k.kind="IllegalArgumentException";class C{constructor(i){if(this.binarizer=i,i===null)throw new k("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,c){return this.binarizer.getBlackRow(i,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,c,u,m){const p=this.binarizer.getLuminanceSource().crop(i,c,u,m);return new C(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class S extends g{static getChecksumInstance(){return new S}}S.kind="ChecksumException";class D{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(i,c,u,m,p){for(;p--;)u[m++]=i[c++]}static currentTimeMillis(){return Date.now()}}class M extends g{}M.kind="IndexOutOfBoundsException";class I extends M{constructor(i=void 0,c=void 0){super(c),this.index=i,this.message=c}}I.kind="ArrayIndexOutOfBoundsException";class F{static fill(i,c){for(let u=0,m=i.length;u<m;u++)i[u]=c}static fillWithin(i,c,u,m){F.rangeCheck(i.length,c,u);for(let p=c;p<u;p++)i[p]=m}static rangeCheck(i,c,u){if(c>u)throw new k("fromIndex("+c+") > toIndex("+u+")");if(c<0)throw new I(c);if(u>i)throw new I(u)}static asList(...i){return i}static create(i,c,u){return Array.from({length:i}).map(p=>Array.from({length:c}).fill(u))}static createInt32Array(i,c,u){return Array.from({length:i}).map(p=>Int32Array.from({length:c}).fill(u))}static equals(i,c){if(!i||!c||!i.length||!c.length||i.length!==c.length)return!1;for(let u=0,m=i.length;u<m;u++)if(i[u]!==c[u])return!1;return!0}static hashCode(i){if(i===null)return 0;let c=1;for(const u of i)c=31*c+u;return c}static fillUint8Array(i,c){for(let u=0;u!==i.length;u++)i[u]=c}static copyOf(i,c){return i.slice(0,c)}static copyOfUint8Array(i,c){if(i.length<=c){const u=new Uint8Array(c);return u.set(i),u}return i.slice(0,c)}static copyOfRange(i,c,u){const m=u-c,p=new Int32Array(m);return A.arraycopy(i,c,p,0,m),p}static binarySearch(i,c,u){u===void 0&&(u=F.numberComparator);let m=0,p=i.length-1;for(;m<=p;){const v=p+m>>1,N=u(c,i[v]);if(N>0)m=v+1;else if(N<0)p=v-1;else return v}return-m-1}static numberComparator(i,c){return i-c}}class T{static numberOfTrailingZeros(i){let c;if(i===0)return 32;let u=31;return c=i<<16,c!==0&&(u-=16,i=c),c=i<<8,c!==0&&(u-=8,i=c),c=i<<4,c!==0&&(u-=4,i=c),c=i<<2,c!==0&&(u-=2,i=c),u-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let c=1;return i>>>16||(c+=16,i<<=16),i>>>24||(c+=8,i<<=8),i>>>28||(c+=4,i<<=4),i>>>30||(c+=2,i<<=2),c-=i>>>31,c}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,c){return Math.trunc(i/c)}static parseInt(i,c=void 0){return parseInt(i,c)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(i,c){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,c==null?this.bits=B.makeArray(i):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const c=B.makeArray(i);A.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const c=this.size;if(i>=c)return c;const u=this.bits;let m=Math.floor(i/32),p=u[m];p&=~((1<<(i&31))-1);const v=u.length;for(;p===0;){if(++m===v)return c;p=u[m]}const N=m*32+T.numberOfTrailingZeros(p);return N>c?c:N}getNextUnset(i){const c=this.size;if(i>=c)return c;const u=this.bits;let m=Math.floor(i/32),p=~u[m];p&=~((1<<(i&31))-1);const v=u.length;for(;p===0;){if(++m===v)return c;p=~u[m]}const N=m*32+T.numberOfTrailingZeros(p);return N>c?c:N}setBulk(i,c){this.bits[Math.floor(i/32)]=c}setRange(i,c){if(c<i||i<0||c>this.size)throw new k;if(c===i)return;c--;const u=Math.floor(i/32),m=Math.floor(c/32),p=this.bits;for(let v=u;v<=m;v++){const N=v>u?0:i&31,O=(2<<(v<m?31:c&31))-(1<<N);p[v]|=O}}clear(){const i=this.bits.length,c=this.bits;for(let u=0;u<i;u++)c[u]=0}isRange(i,c,u){if(c<i||i<0||c>this.size)throw new k;if(c===i)return!0;c--;const m=Math.floor(i/32),p=Math.floor(c/32),v=this.bits;for(let N=m;N<=p;N++){const _=N>m?0:i&31,V=(2<<(N<p?31:c&31))-(1<<_)&4294967295;if((v[N]&V)!==(u?V:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,c){if(c<0||c>32)throw new k("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let u=c;u>0;u--)this.appendBit((i>>u-1&1)===1)}appendBitArray(i){const c=i.size;this.ensureCapacity(this.size+c);for(let u=0;u<c;u++)this.appendBit(i.get(u))}xor(i){if(this.size!==i.size)throw new k("Sizes don't match");const c=this.bits;for(let u=0,m=c.length;u<m;u++)c[u]^=i.bits[u]}toBytes(i,c,u,m){for(let p=0;p<m;p++){let v=0;for(let N=0;N<8;N++)this.get(i)&&(v|=1<<7-N),i++;c[u+p]=v}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),u=c+1,m=this.bits;for(let p=0;p<u;p++){let v=m[p];v=v>>1&1431655765|(v&1431655765)<<1,v=v>>2&858993459|(v&858993459)<<2,v=v>>4&252645135|(v&252645135)<<4,v=v>>8&16711935|(v&16711935)<<8,v=v>>16&65535|(v&65535)<<16,i[c-p]=v}if(this.size!==u*32){const p=u*32-this.size;let v=i[0]>>>p;for(let N=1;N<u;N++){const _=i[N];v|=_<<32-p,i[N-1]=v,v=_>>>p}i[u-1]=v}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof B))return!1;const c=i;return this.size===c.size&&F.equals(this.bits,c.bits)}hashCode(){return 31*this.size+F.hashCode(this.bits)}toString(){let i="";for(let c=0,u=this.size;c<u;c++)(c&7)===0&&(i+=" "),i+=this.get(c)?"X":".";return i}clone(){return new B(this.size,this.bits.slice())}}var H;(function(Q){Q[Q.OTHER=0]="OTHER",Q[Q.PURE_BARCODE=1]="PURE_BARCODE",Q[Q.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",Q[Q.TRY_HARDER=3]="TRY_HARDER",Q[Q.CHARACTER_SET=4]="CHARACTER_SET",Q[Q.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",Q[Q.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",Q[Q.ASSUME_GS1=7]="ASSUME_GS1",Q[Q.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",Q[Q.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",Q[Q.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var U=H;class L extends g{static getFormatInstance(){return new L}}L.kind="FormatException";var P;(function(Q){Q[Q.Cp437=0]="Cp437",Q[Q.ISO8859_1=1]="ISO8859_1",Q[Q.ISO8859_2=2]="ISO8859_2",Q[Q.ISO8859_3=3]="ISO8859_3",Q[Q.ISO8859_4=4]="ISO8859_4",Q[Q.ISO8859_5=5]="ISO8859_5",Q[Q.ISO8859_6=6]="ISO8859_6",Q[Q.ISO8859_7=7]="ISO8859_7",Q[Q.ISO8859_8=8]="ISO8859_8",Q[Q.ISO8859_9=9]="ISO8859_9",Q[Q.ISO8859_10=10]="ISO8859_10",Q[Q.ISO8859_11=11]="ISO8859_11",Q[Q.ISO8859_13=12]="ISO8859_13",Q[Q.ISO8859_14=13]="ISO8859_14",Q[Q.ISO8859_15=14]="ISO8859_15",Q[Q.ISO8859_16=15]="ISO8859_16",Q[Q.SJIS=16]="SJIS",Q[Q.Cp1250=17]="Cp1250",Q[Q.Cp1251=18]="Cp1251",Q[Q.Cp1252=19]="Cp1252",Q[Q.Cp1256=20]="Cp1256",Q[Q.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",Q[Q.UTF8=22]="UTF8",Q[Q.ASCII=23]="ASCII",Q[Q.Big5=24]="Big5",Q[Q.GB18030=25]="GB18030",Q[Q.EUC_KR=26]="EUC_KR"})(P||(P={}));class z{constructor(i,c,u,...m){this.valueIdentifier=i,this.name=u,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=m,z.VALUE_IDENTIFIER_TO_ECI.set(i,this),z.NAME_TO_ECI.set(u,this);const p=this.values;for(let v=0,N=p.length;v!==N;v++){const _=p[v];z.VALUES_TO_ECI.set(_,this)}for(const v of m)z.NAME_TO_ECI.set(v,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new L("incorect value");const c=z.VALUES_TO_ECI.get(i);if(c===void 0)throw new L("incorect value");return c}static getCharacterSetECIByName(i){const c=z.NAME_TO_ECI.get(i);if(c===void 0)throw new L("incorect value");return c}equals(i){if(!(i instanceof z))return!1;const c=i;return this.getName()===c.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(P.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(P.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(P.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(P.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(P.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(P.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(P.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(P.Big5,28,"Big5"),z.GB18030=new z(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(P.EUC_KR,30,"EUC_KR","EUC-KR");class W extends g{}W.kind="UnsupportedOperationException";class ee{static decode(i,c){const u=this.encodingName(c);return this.customDecoder?this.customDecoder(i,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(i,u):new TextDecoder(u).decode(i)}static shouldDecodeOnFallback(i){return!ee.isBrowser()&&i==="ISO-8859-1"}static encode(i,c){const u=this.encodingName(c);return this.customEncoder?this.customEncoder(i,u):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof z?i:z.getCharacterSetECIByName(i)}static decodeFallback(i,c){const u=this.encodingCharacterSet(c);if(ee.isDecodeFallbackSupported(u)){let m="";for(let p=0,v=i.length;p<v;p++){let N=i[p].toString(16);N.length<2&&(N="0"+N),m+="%"+N}return decodeURIComponent(m)}if(u.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new W(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(z.UTF8)||i.equals(z.ISO8859_1)||i.equals(z.ASCII)}static encodeFallback(i){const u=btoa(unescape(encodeURIComponent(i))).split(""),m=[];for(let p=0;p<u.length;p++)m.push(u[p].charCodeAt(0));return new Uint8Array(m)}}class G{static castAsNonUtf8Char(i,c=null){const u=c?c.getName():this.ISO88591;return ee.decode(new Uint8Array([i]),u)}static guessEncoding(i,c){if(c!=null&&c.get(U.CHARACTER_SET)!==void 0)return c.get(U.CHARACTER_SET).toString();const u=i.length;let m=!0,p=!0,v=!0,N=0,_=0,O=0,V=0,J=0,ue=0,je=0,De=0,Me=0,ze=0,Ke=0;const ht=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let gt=0;gt<u&&(m||p||v);gt++){const ft=i[gt]&255;v&&(N>0?(ft&128)===0?v=!1:N--:(ft&128)!==0&&((ft&64)===0?v=!1:(N++,(ft&32)===0?_++:(N++,(ft&16)===0?O++:(N++,(ft&8)===0?V++:v=!1))))),m&&(ft>127&&ft<160?m=!1:ft>159&&(ft<192||ft===215||ft===247)&&Ke++),p&&(J>0?ft<64||ft===127||ft>252?p=!1:J--:ft===128||ft===160||ft>239?p=!1:ft>160&&ft<224?(ue++,De=0,je++,je>Me&&(Me=je)):ft>127?(J++,je=0,De++,De>ze&&(ze=De)):(je=0,De=0))}return v&&N>0&&(v=!1),p&&J>0&&(p=!1),v&&(ht||_+O+V>0)?G.UTF8:p&&(G.ASSUME_SHIFT_JIS||Me>=3||ze>=3)?G.SHIFT_JIS:m&&p?Me===2&&ue===2||Ke*10>=u?G.SHIFT_JIS:G.ISO88591:m?G.ISO88591:p?G.SHIFT_JIS:v?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(i,...c){let u=-1;function m(v,N,_,O,V,J){if(v==="%%")return"%";if(c[++u]===void 0)return;v=O?parseInt(O.substr(1)):void 0;let ue=V?parseInt(V.substr(1)):void 0,je;switch(J){case"s":je=c[u];break;case"c":je=c[u][0];break;case"f":je=parseFloat(c[u]).toFixed(v);break;case"p":je=parseFloat(c[u]).toPrecision(v);break;case"e":je=parseFloat(c[u]).toExponential(v);break;case"x":je=parseInt(c[u]).toString(ue||16);break;case"d":je=parseFloat(parseInt(c[u],ue||10).toPrecision(v)).toFixed(0);break}je=typeof je=="object"?JSON.stringify(je):(+je).toString(ue);let De=parseInt(_),Me=_&&_[0]+""=="0"?"0":" ";for(;je.length<De;)je=N!==void 0?je+Me:Me+je;return je}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(p,m)}static getBytes(i,c){return ee.encode(i,c)}static getCharCode(i,c=0){return i.charCodeAt(c)}static getCharAt(i){return String.fromCharCode(i)}}G.SHIFT_JIS=z.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=z.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=z.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class ne{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=G.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,c,u){for(let m=c;c<c+u;m++)this.append(i[m]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,c){this.value=this.value.substr(0,i)+c+this.value.substr(i+1)}substring(i,c){return this.value.substring(i,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,c){this.value=this.value.substr(0,i)+c+this.value.substr(i+c.length)}}class le{constructor(i,c,u,m){if(this.width=i,this.height=c,this.rowSize=u,this.bits=m,c==null&&(c=i),this.height=c,i<1||c<1)throw new k("Both dimensions must be greater than 0");u==null&&(u=Math.floor((i+31)/32)),this.rowSize=u,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const c=i.length,u=i[0].length,m=new le(u,c);for(let p=0;p<c;p++){const v=i[p];for(let N=0;N<u;N++)v[N]&&m.set(N,p)}return m}static parseFromString(i,c,u){if(i===null)throw new k("stringRepresentation cannot be null");const m=new Array(i.length);let p=0,v=0,N=-1,_=0,O=0;for(;O<i.length;)if(i.charAt(O)===`
`||i.charAt(O)==="\r"){if(p>v){if(N===-1)N=p-v;else if(p-v!==N)throw new k("row lengths do not match");v=p,_++}O++}else if(i.substring(O,O+c.length)===c)O+=c.length,m[p]=!0,p++;else if(i.substring(O,O+u.length)===u)O+=u.length,m[p]=!1,p++;else throw new k("illegal character encountered: "+i.substring(O));if(p>v){if(N===-1)N=p-v;else if(p-v!==N)throw new k("row lengths do not match");_++}const V=new le(N,_);for(let J=0;J<p;J++)m[J]&&V.set(Math.floor(J%N),Math.floor(J/N));return V}get(i,c){const u=c*this.rowSize+Math.floor(i/32);return(this.bits[u]>>>(i&31)&1)!==0}set(i,c){const u=c*this.rowSize+Math.floor(i/32);this.bits[u]|=1<<(i&31)&4294967295}unset(i,c){const u=c*this.rowSize+Math.floor(i/32);this.bits[u]&=~(1<<(i&31)&4294967295)}flip(i,c){const u=c*this.rowSize+Math.floor(i/32);this.bits[u]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new k("input matrix dimensions do not match");const c=new B(Math.floor(this.width/32)+1),u=this.rowSize,m=this.bits;for(let p=0,v=this.height;p<v;p++){const N=p*u,_=i.getRow(p,c).getBitArray();for(let O=0;O<u;O++)m[N+O]^=_[O]}}clear(){const i=this.bits,c=i.length;for(let u=0;u<c;u++)i[u]=0}setRegion(i,c,u,m){if(c<0||i<0)throw new k("Left and top must be nonnegative");if(m<1||u<1)throw new k("Height and width must be at least 1");const p=i+u,v=c+m;if(v>this.height||p>this.width)throw new k("The region must fit inside the matrix");const N=this.rowSize,_=this.bits;for(let O=c;O<v;O++){const V=O*N;for(let J=i;J<p;J++)_[V+Math.floor(J/32)]|=1<<(J&31)&4294967295}}getRow(i,c){c==null||c.getSize()<this.width?c=new B(this.width):c.clear();const u=this.rowSize,m=this.bits,p=i*u;for(let v=0;v<u;v++)c.setBulk(v*32,m[p+v]);return c}setRow(i,c){A.arraycopy(c.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),c=this.getHeight();let u=new B(i),m=new B(i);for(let p=0,v=Math.floor((c+1)/2);p<v;p++)u=this.getRow(p,u),m=this.getRow(c-1-p,m),u.reverse(),m.reverse(),this.setRow(p,m),this.setRow(c-1-p,u)}getEnclosingRectangle(){const i=this.width,c=this.height,u=this.rowSize,m=this.bits;let p=i,v=c,N=-1,_=-1;for(let O=0;O<c;O++)for(let V=0;V<u;V++){const J=m[O*u+V];if(J!==0){if(O<v&&(v=O),O>_&&(_=O),V*32<p){let ue=0;for(;(J<<31-ue&4294967295)===0;)ue++;V*32+ue<p&&(p=V*32+ue)}if(V*32+31>N){let ue=31;for(;!(J>>>ue);)ue--;V*32+ue>N&&(N=V*32+ue)}}}return N<p||_<v?null:Int32Array.from([p,v,N-p+1,_-v+1])}getTopLeftOnBit(){const i=this.rowSize,c=this.bits;let u=0;for(;u<c.length&&c[u]===0;)u++;if(u===c.length)return null;const m=u/i;let p=u%i*32;const v=c[u];let N=0;for(;(v<<31-N&4294967295)===0;)N++;return p+=N,Int32Array.from([p,m])}getBottomRightOnBit(){const i=this.rowSize,c=this.bits;let u=c.length-1;for(;u>=0&&c[u]===0;)u--;if(u<0)return null;const m=Math.floor(u/i);let p=Math.floor(u%i)*32;const v=c[u];let N=31;for(;!(v>>>N);)N--;return p+=N,Int32Array.from([p,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof le))return!1;const c=i;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&F.equals(this.bits,c.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+F.hashCode(this.bits),i}toString(i="X ",c="  ",u=`
`){return this.buildToString(i,c,u)}buildToString(i,c,u){let m=new ne;for(let p=0,v=this.height;p<v;p++){for(let N=0,_=this.width;N<_;N++)m.append(this.get(N,p)?i:c);m.append(u)}return m.toString()}clone(){return new le(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends g{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class X extends D{constructor(i){super(i),this.luminances=X.EMPTY,this.buckets=new Int32Array(X.LUMINANCE_BUCKETS)}getBlackRow(i,c){const u=this.getLuminanceSource(),m=u.getWidth();c==null||c.getSize()<m?c=new B(m):c.clear(),this.initArrays(m);const p=u.getRow(i,this.luminances),v=this.buckets;for(let _=0;_<m;_++)v[(p[_]&255)>>X.LUMINANCE_SHIFT]++;const N=X.estimateBlackPoint(v);if(m<3)for(let _=0;_<m;_++)(p[_]&255)<N&&c.set(_);else{let _=p[0]&255,O=p[1]&255;for(let V=1;V<m-1;V++){const J=p[V+1]&255;(O*4-_-J)/2<N&&c.set(V),_=O,O=J}}return c}getBlackMatrix(){const i=this.getLuminanceSource(),c=i.getWidth(),u=i.getHeight(),m=new le(c,u);this.initArrays(c);const p=this.buckets;for(let _=1;_<5;_++){const O=Math.floor(u*_/5),V=i.getRow(O,this.luminances),J=Math.floor(c*4/5);for(let ue=Math.floor(c/5);ue<J;ue++){const je=V[ue]&255;p[je>>X.LUMINANCE_SHIFT]++}}const v=X.estimateBlackPoint(p),N=i.getMatrix();for(let _=0;_<u;_++){const O=_*c;for(let V=0;V<c;V++)(N[O+V]&255)<v&&m.set(V,_)}return m}createBinarizer(i){return new X(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const c=this.buckets;for(let u=0;u<X.LUMINANCE_BUCKETS;u++)c[u]=0}static estimateBlackPoint(i){const c=i.length;let u=0,m=0,p=0;for(let V=0;V<c;V++)i[V]>p&&(m=V,p=i[V]),i[V]>u&&(u=i[V]);let v=0,N=0;for(let V=0;V<c;V++){const J=V-m,ue=i[V]*J*J;ue>N&&(v=V,N=ue)}if(m>v){const V=m;m=v,v=V}if(v-m<=c/16)throw new Y;let _=v-1,O=-1;for(let V=v-1;V>m;V--){const J=V-m,ue=J*J*(v-V)*(u-i[V]);ue>O&&(_=V,O=ue)}return _<<X.LUMINANCE_SHIFT}}X.LUMINANCE_BITS=5,X.LUMINANCE_SHIFT=8-X.LUMINANCE_BITS,X.LUMINANCE_BUCKETS=1<<X.LUMINANCE_BITS,X.EMPTY=Uint8ClampedArray.from([0]);class de extends X{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),c=i.getWidth(),u=i.getHeight();if(c>=de.MINIMUM_DIMENSION&&u>=de.MINIMUM_DIMENSION){const m=i.getMatrix();let p=c>>de.BLOCK_SIZE_POWER;(c&de.BLOCK_SIZE_MASK)!==0&&p++;let v=u>>de.BLOCK_SIZE_POWER;(u&de.BLOCK_SIZE_MASK)!==0&&v++;const N=de.calculateBlackPoints(m,p,v,c,u),_=new le(c,u);de.calculateThresholdForBlock(m,p,v,c,u,N,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new de(i)}static calculateThresholdForBlock(i,c,u,m,p,v,N){const _=p-de.BLOCK_SIZE,O=m-de.BLOCK_SIZE;for(let V=0;V<u;V++){let J=V<<de.BLOCK_SIZE_POWER;J>_&&(J=_);const ue=de.cap(V,2,u-3);for(let je=0;je<c;je++){let De=je<<de.BLOCK_SIZE_POWER;De>O&&(De=O);const Me=de.cap(je,2,c-3);let ze=0;for(let ht=-2;ht<=2;ht++){const gt=v[ue+ht];ze+=gt[Me-2]+gt[Me-1]+gt[Me]+gt[Me+1]+gt[Me+2]}const Ke=ze/25;de.thresholdBlock(i,De,J,Ke,m,N)}}}static cap(i,c,u){return i<c?c:i>u?u:i}static thresholdBlock(i,c,u,m,p,v){for(let N=0,_=u*p+c;N<de.BLOCK_SIZE;N++,_+=p)for(let O=0;O<de.BLOCK_SIZE;O++)(i[_+O]&255)<=m&&v.set(c+O,u+N)}static calculateBlackPoints(i,c,u,m,p){const v=p-de.BLOCK_SIZE,N=m-de.BLOCK_SIZE,_=new Array(u);for(let O=0;O<u;O++){_[O]=new Int32Array(c);let V=O<<de.BLOCK_SIZE_POWER;V>v&&(V=v);for(let J=0;J<c;J++){let ue=J<<de.BLOCK_SIZE_POWER;ue>N&&(ue=N);let je=0,De=255,Me=0;for(let Ke=0,ht=V*m+ue;Ke<de.BLOCK_SIZE;Ke++,ht+=m){for(let gt=0;gt<de.BLOCK_SIZE;gt++){const ft=i[ht+gt]&255;je+=ft,ft<De&&(De=ft),ft>Me&&(Me=ft)}if(Me-De>de.MIN_DYNAMIC_RANGE)for(Ke++,ht+=m;Ke<de.BLOCK_SIZE;Ke++,ht+=m)for(let gt=0;gt<de.BLOCK_SIZE;gt++)je+=i[ht+gt]&255}let ze=je>>de.BLOCK_SIZE_POWER*2;if(Me-De<=de.MIN_DYNAMIC_RANGE&&(ze=De/2,O>0&&J>0)){const Ke=(_[O-1][J]+2*_[O][J-1]+_[O-1][J-1])/4;De<Ke&&(ze=Ke)}_[O][J]=ze}}return _}}de.BLOCK_SIZE_POWER=3,de.BLOCK_SIZE=1<<de.BLOCK_SIZE_POWER,de.BLOCK_SIZE_MASK=de.BLOCK_SIZE-1,de.MINIMUM_DIMENSION=de.BLOCK_SIZE*5,de.MIN_DYNAMIC_RANGE=24;class ye{constructor(i,c){this.width=i,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,c,u,m){throw new W("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new W("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new W("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let c=new ne;for(let u=0;u<this.height;u++){const m=this.getRow(u,i);for(let p=0;p<this.width;p++){const v=m[p]&255;let N;v<64?N="#":v<128?N="+":v<192?N=".":N=" ",c.append(N)}c.append(`
`)}return c.toString()}}class oe extends ye{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,c){const u=this.delegate.getRow(i,c),m=this.getWidth();for(let p=0;p<m;p++)u[p]=255-(u[p]&255);return u}getMatrix(){const i=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(c);for(let m=0;m<c;m++)u[m]=255-(i[m]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(i,c,u,m){return new oe(this.delegate.crop(i,c,u,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new oe(this.delegate.rotateCounterClockwise45())}}class xe extends ye{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=xe.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const c=i.getContext("2d").getImageData(0,0,i.width,i.height);return xe.toGrayscaleBuffer(c.data,i.width,i.height)}static toGrayscaleBuffer(i,c,u){const m=new Uint8ClampedArray(c*u);for(let p=0,v=0,N=i.length;p<N;p+=4,v++){let _;if(i[p+3]===0)_=255;else{const V=i[p],J=i[p+1],ue=i[p+2];_=306*V+601*J+117*ue+512>>10}m[v]=_}return m}getRow(i,c){if(i<0||i>=this.getHeight())throw new k("Requested row is outside the image: "+i);const u=this.getWidth(),m=i*u;return c===null?c=this.buffer.slice(m,m+u):(c.length<u&&(c=new Uint8ClampedArray(u)),c.set(this.buffer.slice(m,m+u))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,c,u,m){return super.crop(i,c,u,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const c=this.getTempCanvasElement(),u=c.getContext("2d"),m=i*xe.DEGREE_TO_RADIANS,p=this.canvas.width,v=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(m))*p+Math.abs(Math.sin(m))*v),_=Math.ceil(Math.abs(Math.sin(m))*p+Math.abs(Math.cos(m))*v);return c.width=N,c.height=_,u.translate(N/2,_/2),u.rotate(m),u.drawImage(this.canvas,p/-2,v/-2),this.buffer=xe.makeBufferFromCanvasImageData(c),this}invert(){return new oe(this)}}xe.DEGREE_TO_RADIANS=Math.PI/180;class ae{constructor(i,c,u){this.deviceId=i,this.label=c,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var q=(globalThis||Eu||self||window||void 0)&&(globalThis||Eu||self||window||void 0).__awaiter||function(Q,i,c,u){function m(p){return p instanceof c?p:new c(function(v){v(p)})}return new(c||(c=Promise))(function(p,v){function N(V){try{O(u.next(V))}catch(J){v(J)}}function _(V){try{O(u.throw(V))}catch(J){v(J)}}function O(V){V.done?p(V.value):m(V.value).then(N,_)}O((u=u.apply(Q,i||[])).next())})};class K{constructor(i,c=500,u){this.reader=i,this.timeBetweenScansMillis=c,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const u of i){const m=u.kind==="video"?"videoinput":u.kind;if(m!=="videoinput")continue;const p=u.deviceId||u.id,v=u.label||`Video device ${c.length+1}`,N=u.groupId,_={deviceId:p,label:v,kind:m,groupId:N};c.push(_)}return c})}getVideoInputDevices(){return q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new ae(c.deviceId,c.label))})}findDeviceById(i){return q(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(u=>u.deviceId===i):null})}decodeFromInputVideoDevice(i,c){return q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,c)})}decodeOnceFromVideoDevice(i,c){return q(this,void 0,void 0,function*(){this.reset();let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const m={video:u};return yield this.decodeOnceFromConstraints(m,c)})}decodeOnceFromConstraints(i,c){return q(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(u,c)})}decodeOnceFromStream(i,c){return q(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,c);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(i,c,u){return q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,c,u)})}decodeFromVideoDevice(i,c,u){return q(this,void 0,void 0,function*(){let m;i?m={deviceId:{exact:i}}:m={facingMode:"environment"};const p={video:m};return yield this.decodeFromConstraints(p,c,u)})}decodeFromConstraints(i,c,u){return q(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(m,c,u)})}decodeFromStream(i,c,u){return q(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(i,c);return yield this.decodeContinuously(m,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,c){return q(this,void 0,void 0,function*(){const u=this.prepareVideoElement(c);return this.addVideoSource(u,i),this.videoElement=u,this.stream=i,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(i){return new Promise((c,u)=>this.playVideoOnLoad(i,()=>c()))}playVideoOnLoad(i,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",c),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return q(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,c){const u=document.getElementById(i);if(!u)throw new w(`element with id '${i}' not found`);if(u.nodeName.toLowerCase()!==c.toLowerCase())throw new w(`element with id '${i}' must be an ${c} element`);return u}decodeFromImage(i,c){if(!i&&!c)throw new w("either imageElement with a src set or an url must be provided");return c&&!i?this.decodeFromImageUrl(c):this.decodeFromImageElement(i)}decodeFromVideo(i,c){if(!i&&!c)throw new w("Either an element with a src set or an URL must be provided");return c&&!i?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,c,u){if(i===void 0&&c===void 0)throw new w("Either an element with a src set or an URL must be provided");return c&&!i?this.decodeFromVideoUrlContinuously(c,u):this.decodeFromVideoElementContinuously(i,u)}decodeFromImageElement(i){if(!i)throw new w("An image element must be provided.");this.reset();const c=this.prepareImageElement(i);this.imageElement=c;let u;return this.isImageLoaded(c)?u=this.decodeOnce(c,!1,!0):u=this._decodeOnLoadImage(c),u}decodeFromVideoElement(i){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(i,c){const u=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(u,c)}_decodeFromVideoElementSetup(i){if(!i)throw new w("A video element must be provided.");this.reset();const c=this.prepareVideoElement(i);return this.videoElement=c,c}decodeFromImageUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const u=this._decodeOnLoadImage(c);return c.src=i,u}decodeFromVideoUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),u=this.decodeFromVideoElement(c);return c.src=i,u}decodeFromVideoUrlContinuously(i,c){if(!i)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(u,c);return u.src=i,m}_decodeOnLoadImage(i){return new Promise((c,u)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(c,u),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,c){return q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,c)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let c;return typeof i>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof i=="string"&&(c=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(c=i),c}prepareVideoElement(i){let c;return!i&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof i=="string"&&(c=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(c=i),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(i,c=!0,u=!0){this._stopAsyncDecode=!1;const m=(p,v)=>{if(this._stopAsyncDecode){v(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(i);p(N)}catch(N){const _=c&&N instanceof Y,V=(N instanceof S||N instanceof L)&&u;if(_||V)return setTimeout(m,this._timeBetweenDecodingAttempts,p,v);v(N)}};return new Promise((p,v)=>m(p,v))}decodeContinuously(i,c){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(i);c(m,null),setTimeout(u,this.timeBetweenScansMillis)}catch(m){c(null,m);const p=m instanceof S||m instanceof L,v=m instanceof Y;(p||v)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(i){const c=this.createBinaryBitmap(i);return this.decodeBitmap(c)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,c,u){c||(c={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(i,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(i,c,u=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(i,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const c=this.getCaptureCanvas(i),u=new xe(c),m=new de(u);return new C(m)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const c=this.createCaptureCanvas(i);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let u,m;return typeof i<"u"&&(i instanceof HTMLVideoElement?(u=i.videoWidth,m=i.videoHeight):i instanceof HTMLImageElement&&(u=i.naturalWidth||i.width,m=i.naturalHeight||i.height)),c.style.width=u+"px",c.style.height=m+"px",c.width=u,c.height=m,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,c){try{i.srcObject=c}catch{i.src=URL.createObjectURL(c)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class se{constructor(i,c,u=c==null?0:8*c.length,m,p,v=A.currentTimeMillis()){this.text=i,this.rawBytes=c,this.numBits=u,this.resultPoints=m,this.format=p,this.timestamp=v,this.text=i,this.rawBytes=c,u==null?this.numBits=c==null?0:8*c.length:this.numBits=u,this.resultPoints=m,this.format=p,this.resultMetadata=null,v==null?this.timestamp=A.currentTimeMillis():this.timestamp=v}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,c)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const c=this.resultPoints;if(c===null)this.resultPoints=i;else if(i!==null&&i.length>0){const u=new Array(c.length+i.length);A.arraycopy(c,0,u,0,c.length),A.arraycopy(i,0,u,c.length,i.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var re;(function(Q){Q[Q.AZTEC=0]="AZTEC",Q[Q.CODABAR=1]="CODABAR",Q[Q.CODE_39=2]="CODE_39",Q[Q.CODE_93=3]="CODE_93",Q[Q.CODE_128=4]="CODE_128",Q[Q.DATA_MATRIX=5]="DATA_MATRIX",Q[Q.EAN_8=6]="EAN_8",Q[Q.EAN_13=7]="EAN_13",Q[Q.ITF=8]="ITF",Q[Q.MAXICODE=9]="MAXICODE",Q[Q.PDF_417=10]="PDF_417",Q[Q.QR_CODE=11]="QR_CODE",Q[Q.RSS_14=12]="RSS_14",Q[Q.RSS_EXPANDED=13]="RSS_EXPANDED",Q[Q.UPC_A=14]="UPC_A",Q[Q.UPC_E=15]="UPC_E",Q[Q.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(re||(re={}));var te=re,Re;(function(Q){Q[Q.OTHER=0]="OTHER",Q[Q.ORIENTATION=1]="ORIENTATION",Q[Q.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",Q[Q.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",Q[Q.ISSUE_NUMBER=4]="ISSUE_NUMBER",Q[Q.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",Q[Q.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",Q[Q.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",Q[Q.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",Q[Q.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",Q[Q.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var ke=Re;class Ve{constructor(i,c,u,m,p=-1,v=-1){this.rawBytes=i,this.text=c,this.byteSegments=u,this.ecLevel=m,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=v,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Oe{exp(i){return this.expTable[i]}log(i){if(i===0)throw new k;return this.logTable[i]}static addOrSubtract(i,c){return i^c}}class et{constructor(i,c){if(c.length===0)throw new k;this.field=i;const u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const c=this.coefficients;let u;if(i===1){u=0;for(let v=0,N=c.length;v!==N;v++){const _=c[v];u=Oe.addOrSubtract(u,_)}return u}u=c[0];const m=c.length,p=this.field;for(let v=1;v<m;v++)u=Oe.addOrSubtract(p.multiply(i,u),c[v]);return u}addOrSubtract(i){if(!this.field.equals(i.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let c=this.coefficients,u=i.coefficients;if(c.length>u.length){const v=c;c=u,u=v}let m=new Int32Array(u.length);const p=u.length-c.length;A.arraycopy(u,0,m,0,p);for(let v=p;v<u.length;v++)m[v]=Oe.addOrSubtract(c[v-p],u[v]);return new et(this.field,m)}multiply(i){if(!this.field.equals(i.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const c=this.coefficients,u=c.length,m=i.coefficients,p=m.length,v=new Int32Array(u+p-1),N=this.field;for(let _=0;_<u;_++){const O=c[_];for(let V=0;V<p;V++)v[_+V]=Oe.addOrSubtract(v[_+V],N.multiply(O,m[V]))}return new et(N,v)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const c=this.coefficients.length,u=this.field,m=new Int32Array(c),p=this.coefficients;for(let v=0;v<c;v++)m[v]=u.multiply(p[v],i);return new et(u,m)}multiplyByMonomial(i,c){if(i<0)throw new k;if(c===0)return this.field.getZero();const u=this.coefficients,m=u.length,p=new Int32Array(m+i),v=this.field;for(let N=0;N<m;N++)p[N]=v.multiply(u[N],c);return new et(v,p)}divide(i){if(!this.field.equals(i.field))throw new k("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new k("Divide by 0");const c=this.field;let u=c.getZero(),m=this;const p=i.getCoefficient(i.getDegree()),v=c.inverse(p);for(;m.getDegree()>=i.getDegree()&&!m.isZero();){const N=m.getDegree()-i.getDegree(),_=c.multiply(m.getCoefficient(m.getDegree()),v),O=i.multiplyByMonomial(N,_),V=c.buildMonomial(N,_);u=u.addOrSubtract(V),m=m.addOrSubtract(O)}return[u,m]}toString(){let i="";for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);if(u!==0){if(u<0?(i+=" - ",u=-u):i.length>0&&(i+=" + "),c===0||u!==1){const m=this.field.log(u);m===0?i+="1":m===1?i+="a":(i+="a^",i+=m)}c!==0&&(c===1?i+="x":(i+="x^",i+=c))}}return i}}class be extends g{}be.kind="ArithmeticException";class Ae extends Oe{constructor(i,c,u){super(),this.primitive=i,this.size=c,this.generatorBase=u;const m=new Int32Array(c);let p=1;for(let N=0;N<c;N++)m[N]=p,p*=2,p>=c&&(p^=i,p&=c-1);this.expTable=m;const v=new Int32Array(c);for(let N=0;N<c-1;N++)v[m[N]]=N;this.logTable=v,this.zero=new et(this,Int32Array.from([0])),this.one=new et(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,c){if(i<0)throw new k;if(c===0)return this.zero;const u=new Int32Array(i+1);return u[0]=c,new et(this,u)}inverse(i){if(i===0)throw new be;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,c){return i===0||c===0?0:this.expTable[(this.logTable[i]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class Fe extends g{}Fe.kind="ReedSolomonException";class Ce extends g{}Ce.kind="IllegalStateException";class Je{constructor(i){this.field=i}decode(i,c){const u=this.field,m=new et(u,i),p=new Int32Array(c);let v=!0;for(let je=0;je<c;je++){const De=m.evaluateAt(u.exp(je+u.getGeneratorBase()));p[p.length-1-je]=De,De!==0&&(v=!1)}if(v)return;const N=new et(u,p),_=this.runEuclideanAlgorithm(u.buildMonomial(c,1),N,c),O=_[0],V=_[1],J=this.findErrorLocations(O),ue=this.findErrorMagnitudes(V,J);for(let je=0;je<J.length;je++){const De=i.length-1-u.log(J[je]);if(De<0)throw new Fe("Bad error location");i[De]=Ae.addOrSubtract(i[De],ue[je])}}runEuclideanAlgorithm(i,c,u){if(i.getDegree()<c.getDegree()){const je=i;i=c,c=je}const m=this.field;let p=i,v=c,N=m.getZero(),_=m.getOne();for(;v.getDegree()>=(u/2|0);){let je=p,De=N;if(p=v,N=_,p.isZero())throw new Fe("r_{i-1} was zero");v=je;let Me=m.getZero();const ze=p.getCoefficient(p.getDegree()),Ke=m.inverse(ze);for(;v.getDegree()>=p.getDegree()&&!v.isZero();){const ht=v.getDegree()-p.getDegree(),gt=m.multiply(v.getCoefficient(v.getDegree()),Ke);Me=Me.addOrSubtract(m.buildMonomial(ht,gt)),v=v.addOrSubtract(p.multiplyByMonomial(ht,gt))}if(_=Me.multiply(N).addOrSubtract(De),v.getDegree()>=p.getDegree())throw new Ce("Division algorithm failed to reduce polynomial?")}const O=_.getCoefficient(0);if(O===0)throw new Fe("sigmaTilde(0) was zero");const V=m.inverse(O),J=_.multiplyScalar(V),ue=v.multiplyScalar(V);return[J,ue]}findErrorLocations(i){const c=i.getDegree();if(c===1)return Int32Array.from([i.getCoefficient(1)]);const u=new Int32Array(c);let m=0;const p=this.field;for(let v=1;v<p.getSize()&&m<c;v++)i.evaluateAt(v)===0&&(u[m]=p.inverse(v),m++);if(m!==c)throw new Fe("Error locator degree does not match number of roots");return u}findErrorMagnitudes(i,c){const u=c.length,m=new Int32Array(u),p=this.field;for(let v=0;v<u;v++){const N=p.inverse(c[v]);let _=1;for(let O=0;O<u;O++)if(v!==O){const V=p.multiply(c[O],N),J=(V&1)===0?V|1:V&-2;_=p.multiply(_,J)}m[v]=p.multiply(i.evaluateAt(N),p.inverse(_)),p.getGeneratorBase()!==0&&(m[v]=p.multiply(m[v],N))}return m}}var ve;(function(Q){Q[Q.UPPER=0]="UPPER",Q[Q.LOWER=1]="LOWER",Q[Q.MIXED=2]="MIXED",Q[Q.DIGIT=3]="DIGIT",Q[Q.PUNCT=4]="PUNCT",Q[Q.BINARY=5]="BINARY"})(ve||(ve={}));class Le{decode(i){this.ddata=i;let c=i.getBits(),u=this.extractBits(c),m=this.correctBits(u),p=Le.convertBoolArrayToByteArray(m),v=Le.getEncodedData(m),N=new Ve(p,v,null,null);return N.setNumBits(m.length),N}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let c=i.length,u=ve.UPPER,m=ve.UPPER,p="",v=0;for(;v<c;)if(m===ve.BINARY){if(c-v<5)break;let N=Le.readCode(i,v,5);if(v+=5,N===0){if(c-v<11)break;N=Le.readCode(i,v,11)+31,v+=11}for(let _=0;_<N;_++){if(c-v<8){v=c;break}const O=Le.readCode(i,v,8);p+=G.castAsNonUtf8Char(O),v+=8}m=u}else{let N=m===ve.DIGIT?4:5;if(c-v<N)break;let _=Le.readCode(i,v,N);v+=N;let O=Le.getCharacter(m,_);O.startsWith("CTRL_")?(u=m,m=Le.getTable(O.charAt(5)),O.charAt(6)==="L"&&(u=m)):(p+=O,m=u)}return p}static getTable(i){switch(i){case"L":return ve.LOWER;case"P":return ve.PUNCT;case"M":return ve.MIXED;case"D":return ve.DIGIT;case"B":return ve.BINARY;case"U":default:return ve.UPPER}}static getCharacter(i,c){switch(i){case ve.UPPER:return Le.UPPER_TABLE[c];case ve.LOWER:return Le.LOWER_TABLE[c];case ve.MIXED:return Le.MIXED_TABLE[c];case ve.PUNCT:return Le.PUNCT_TABLE[c];case ve.DIGIT:return Le.DIGIT_TABLE[c];default:throw new Ce("Bad table")}}correctBits(i){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=Ae.AZTEC_DATA_10):(u=12,c=Ae.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),p=i.length/u;if(p<m)throw new L;let v=i.length%u,N=new Int32Array(p);for(let ue=0;ue<p;ue++,v+=u)N[ue]=Le.readCode(i,v,u);try{new Je(c).decode(N,p-m)}catch(ue){throw new L(ue)}let _=(1<<u)-1,O=0;for(let ue=0;ue<m;ue++){let je=N[ue];if(je===0||je===_)throw new L;(je===1||je===_-1)&&O++}let V=new Array(m*u-O),J=0;for(let ue=0;ue<m;ue++){let je=N[ue];if(je===1||je===_-1)V.fill(je>1,J,J+u-1),J+=u-1;else for(let De=u-1;De>=0;--De)V[J++]=(je&1<<De)!==0}return V}extractBits(i){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),m=(c?11:14)+u*4,p=new Int32Array(m),v=new Array(this.totalBitsInLayer(u,c));if(c)for(let N=0;N<p.length;N++)p[N]=N;else{let N=m+1+2*T.truncDivision(T.truncDivision(m,2)-1,15),_=m/2,O=T.truncDivision(N,2);for(let V=0;V<_;V++){let J=V+T.truncDivision(V,15);p[_-V-1]=O-J-1,p[_+V]=O+J+1}}for(let N=0,_=0;N<u;N++){let O=(u-N)*4+(c?9:12),V=N*2,J=m-1-V;for(let ue=0;ue<O;ue++){let je=ue*2;for(let De=0;De<2;De++)v[_+je+De]=i.get(p[V+De],p[V+ue]),v[_+2*O+je+De]=i.get(p[V+ue],p[J-De]),v[_+4*O+je+De]=i.get(p[J-De],p[J-ue]),v[_+6*O+je+De]=i.get(p[J-ue],p[V+De])}_+=O*8}return v}static readCode(i,c,u){let m=0;for(let p=c;p<c+u;p++)m<<=1,i[p]&&(m|=1);return m}static readByte(i,c){let u=i.length-c;return u>=8?Le.readCode(i,c,8):Le.readCode(i,c,u)<<8-u}static convertBoolArrayToByteArray(i){let c=new Uint8Array((i.length+7)/8);for(let u=0;u<c.length;u++)c[u]=Le.readByte(i,8*u);return c}totalBitsInLayer(i,c){return((c?88:112)+16*i)*i}}Le.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Le.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Le.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Le.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Le.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class fe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,c,u,m){const p=i-u,v=c-m;return Math.sqrt(p*p+v*v)}static sum(i){let c=0;for(let u=0,m=i.length;u!==m;u++){const p=i[u];c+=p}return c}}class st{static floatToIntBits(i){return i}}st.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ee{constructor(i,c){this.x=i,this.y=c}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ee){const c=i;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*st.floatToIntBits(this.x)+st.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const c=this.distance(i[0],i[1]),u=this.distance(i[1],i[2]),m=this.distance(i[0],i[2]);let p,v,N;if(u>=c&&u>=m?(v=i[0],p=i[1],N=i[2]):m>=u&&m>=c?(v=i[1],p=i[0],N=i[2]):(v=i[2],p=i[0],N=i[1]),this.crossProductZ(p,v,N)<0){const _=p;p=N,N=_}i[0]=p,i[1]=v,i[2]=N}static distance(i,c){return fe.distance(i.x,i.y,c.x,c.y)}static crossProductZ(i,c,u){const m=c.x,p=c.y;return(u.x-m)*(i.y-p)-(u.y-p)*(i.x-m)}}class wt{constructor(i,c){this.bits=i,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class ut extends wt{constructor(i,c,u,m,p){super(i,c),this.compact=u,this.nbDatablocks=m,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Et{constructor(i,c,u,m){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),c==null&&(c=Et.INIT_SIZE),u==null&&(u=i.getWidth()/2|0),m==null&&(m=i.getHeight()/2|0);const p=c/2|0;if(this.leftInit=u-p,this.rightInit=u+p,this.upInit=m-p,this.downInit=m+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let i=this.leftInit,c=this.rightInit,u=this.upInit,m=this.downInit,p=!1,v=!0,N=!1,_=!1,O=!1,V=!1,J=!1;const ue=this.width,je=this.height;for(;v;){v=!1;let De=!0;for(;(De||!_)&&c<ue;)De=this.containsBlackPoint(u,m,c,!1),De?(c++,v=!0,_=!0):_||c++;if(c>=ue){p=!0;break}let Me=!0;for(;(Me||!O)&&m<je;)Me=this.containsBlackPoint(i,c,m,!0),Me?(m++,v=!0,O=!0):O||m++;if(m>=je){p=!0;break}let ze=!0;for(;(ze||!V)&&i>=0;)ze=this.containsBlackPoint(u,m,i,!1),ze?(i--,v=!0,V=!0):V||i--;if(i<0){p=!0;break}let Ke=!0;for(;(Ke||!J)&&u>=0;)Ke=this.containsBlackPoint(i,c,u,!0),Ke?(u--,v=!0,J=!0):J||u--;if(u<0){p=!0;break}v&&(N=!0)}if(!p&&N){const De=c-i;let Me=null;for(let gt=1;Me===null&&gt<De;gt++)Me=this.getBlackPointOnSegment(i,m-gt,i+gt,m);if(Me==null)throw new Y;let ze=null;for(let gt=1;ze===null&&gt<De;gt++)ze=this.getBlackPointOnSegment(i,u+gt,i+gt,u);if(ze==null)throw new Y;let Ke=null;for(let gt=1;Ke===null&&gt<De;gt++)Ke=this.getBlackPointOnSegment(c,u+gt,c-gt,u);if(Ke==null)throw new Y;let ht=null;for(let gt=1;ht===null&&gt<De;gt++)ht=this.getBlackPointOnSegment(c,m-gt,c-gt,m);if(ht==null)throw new Y;return this.centerEdges(ht,Me,Ke,ze)}else throw new Y}getBlackPointOnSegment(i,c,u,m){const p=fe.round(fe.distance(i,c,u,m)),v=(u-i)/p,N=(m-c)/p,_=this.image;for(let O=0;O<p;O++){const V=fe.round(i+O*v),J=fe.round(c+O*N);if(_.get(V,J))return new Ee(V,J)}return null}centerEdges(i,c,u,m){const p=i.getX(),v=i.getY(),N=c.getX(),_=c.getY(),O=u.getX(),V=u.getY(),J=m.getX(),ue=m.getY(),je=Et.CORR;return p<this.width/2?[new Ee(J-je,ue+je),new Ee(N+je,_+je),new Ee(O-je,V-je),new Ee(p+je,v-je)]:[new Ee(J+je,ue+je),new Ee(N+je,_-je),new Ee(O-je,V+je),new Ee(p-je,v-je)]}containsBlackPoint(i,c,u,m){const p=this.image;if(m){for(let v=i;v<=c;v++)if(p.get(v,u))return!0}else for(let v=i;v<=c;v++)if(p.get(u,v))return!0;return!1}}Et.INIT_SIZE=10,Et.CORR=1;class Mt{static checkAndNudgePoints(i,c){const u=i.getWidth(),m=i.getHeight();let p=!0;for(let v=0;v<c.length&&p;v+=2){const N=Math.floor(c[v]),_=Math.floor(c[v+1]);if(N<-1||N>u||_<-1||_>m)throw new Y;p=!1,N===-1?(c[v]=0,p=!0):N===u&&(c[v]=u-1,p=!0),_===-1?(c[v+1]=0,p=!0):_===m&&(c[v+1]=m-1,p=!0)}p=!0;for(let v=c.length-2;v>=0&&p;v-=2){const N=Math.floor(c[v]),_=Math.floor(c[v+1]);if(N<-1||N>u||_<-1||_>m)throw new Y;p=!1,N===-1?(c[v]=0,p=!0):N===u&&(c[v]=u-1,p=!0),_===-1?(c[v+1]=0,p=!0):_===m&&(c[v+1]=m-1,p=!0)}}}class qt{constructor(i,c,u,m,p,v,N,_,O){this.a11=i,this.a21=c,this.a31=u,this.a12=m,this.a22=p,this.a32=v,this.a13=N,this.a23=_,this.a33=O}static quadrilateralToQuadrilateral(i,c,u,m,p,v,N,_,O,V,J,ue,je,De,Me,ze){const Ke=qt.quadrilateralToSquare(i,c,u,m,p,v,N,_);return qt.squareToQuadrilateral(O,V,J,ue,je,De,Me,ze).times(Ke)}transformPoints(i){const c=i.length,u=this.a11,m=this.a12,p=this.a13,v=this.a21,N=this.a22,_=this.a23,O=this.a31,V=this.a32,J=this.a33;for(let ue=0;ue<c;ue+=2){const je=i[ue],De=i[ue+1],Me=p*je+_*De+J;i[ue]=(u*je+v*De+O)/Me,i[ue+1]=(m*je+N*De+V)/Me}}transformPointsWithValues(i,c){const u=this.a11,m=this.a12,p=this.a13,v=this.a21,N=this.a22,_=this.a23,O=this.a31,V=this.a32,J=this.a33,ue=i.length;for(let je=0;je<ue;je++){const De=i[je],Me=c[je],ze=p*De+_*Me+J;i[je]=(u*De+v*Me+O)/ze,c[je]=(m*De+N*Me+V)/ze}}static squareToQuadrilateral(i,c,u,m,p,v,N,_){const O=i-u+p-N,V=c-m+v-_;if(O===0&&V===0)return new qt(u-i,p-u,i,m-c,v-m,c,0,0,1);{const J=u-p,ue=N-p,je=m-v,De=_-v,Me=J*De-ue*je,ze=(O*De-ue*V)/Me,Ke=(J*V-O*je)/Me;return new qt(u-i+ze*u,N-i+Ke*N,i,m-c+ze*m,_-c+Ke*_,c,ze,Ke,1)}}static quadrilateralToSquare(i,c,u,m,p,v,N,_){return qt.squareToQuadrilateral(i,c,u,m,p,v,N,_).buildAdjoint()}buildAdjoint(){return new qt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new qt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class ur extends Mt{sampleGrid(i,c,u,m,p,v,N,_,O,V,J,ue,je,De,Me,ze,Ke,ht,gt){const ft=qt.quadrilateralToQuadrilateral(m,p,v,N,_,O,V,J,ue,je,De,Me,ze,Ke,ht,gt);return this.sampleGridWithTransform(i,c,u,ft)}sampleGridWithTransform(i,c,u,m){if(c<=0||u<=0)throw new Y;const p=new le(c,u),v=new Float32Array(2*c);for(let N=0;N<u;N++){const _=v.length,O=N+.5;for(let V=0;V<_;V+=2)v[V]=V/2+.5,v[V+1]=O;m.transformPoints(v),Mt.checkAndNudgePoints(i,v);try{for(let V=0;V<_;V+=2)i.get(Math.floor(v[V]),Math.floor(v[V+1]))&&p.set(V/2,N)}catch{throw new Y}}return p}}class Ut{static setGridSampler(i){Ut.gridSampler=i}static getInstance(){return Ut.gridSampler}}Ut.gridSampler=new ur;class Yt{constructor(i,c){this.x=i,this.y=c}toResultPoint(){return new Ee(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class It{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let c=this.getMatrixCenter(),u=this.getBullsEyeCorners(c);if(i){let v=u[0];u[0]=u[2],u[2]=v}this.extractParameters(u);let m=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),p=this.getMatrixCornerPoints(u);return new ut(m,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new Y;let c=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(i[0],i[1],c),this.sampleLine(i[1],i[2],c),this.sampleLine(i[2],i[3],c),this.sampleLine(i[3],i[0],c)]);this.shift=this.getRotation(u,c);let m=0;for(let v=0;v<4;v++){let N=u[(this.shift+v)%4];this.compact?(m<<=7,m+=N>>1&127):(m<<=10,m+=(N>>2&992)+(N>>1&31))}let p=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(i,c){let u=0;i.forEach((m,p,v)=>{let N=(m>>c-2<<1)+(m&1);u=(u<<3)+N}),u=((u&1)<<11)+(u>>1);for(let m=0;m<4;m++)if(T.bitCount(u^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new Y}getCorrectedParameterData(i,c){let u,m;c?(u=7,m=2):(u=10,m=4);let p=u-m,v=new Int32Array(u);for(let _=u-1;_>=0;--_)v[_]=i&15,i>>=4;try{new Je(Ae.AZTEC_PARAM).decode(v,p)}catch{throw new Y}let N=0;for(let _=0;_<m;_++)N=(N<<4)+v[_];return N}getBullsEyeCorners(i){let c=i,u=i,m=i,p=i,v=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let J=this.getFirstDifferent(c,v,1,-1),ue=this.getFirstDifferent(u,v,1,1),je=this.getFirstDifferent(m,v,-1,1),De=this.getFirstDifferent(p,v,-1,-1);if(this.nbCenterLayers>2){let Me=this.distancePoint(De,J)*this.nbCenterLayers/(this.distancePoint(p,c)*(this.nbCenterLayers+2));if(Me<.75||Me>1.25||!this.isWhiteOrBlackRectangle(J,ue,je,De))break}c=J,u=ue,m=je,p=De,v=!v}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let N=new Ee(c.getX()+.5,c.getY()-.5),_=new Ee(u.getX()+.5,u.getY()+.5),O=new Ee(m.getX()-.5,m.getY()+.5),V=new Ee(p.getX()-.5,p.getY()-.5);return this.expandSquare([N,_,O,V],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,c,u,m;try{let N=new Et(this.image).detect();i=N[0],c=N[1],u=N[2],m=N[3]}catch{let _=this.image.getWidth()/2,O=this.image.getHeight()/2;i=this.getFirstDifferent(new Yt(_+7,O-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Yt(_+7,O+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Yt(_-7,O+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new Yt(_-7,O-7),!1,-1,-1).toResultPoint()}let p=fe.round((i.getX()+m.getX()+c.getX()+u.getX())/4),v=fe.round((i.getY()+m.getY()+c.getY()+u.getY())/4);try{let N=new Et(this.image,15,p,v).detect();i=N[0],c=N[1],u=N[2],m=N[3]}catch{i=this.getFirstDifferent(new Yt(p+7,v-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Yt(p+7,v+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Yt(p-7,v+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new Yt(p-7,v-7),!1,-1,-1).toResultPoint()}return p=fe.round((i.getX()+m.getX()+c.getX()+u.getX())/4),v=fe.round((i.getY()+m.getY()+c.getY()+u.getY())/4),new Yt(p,v)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,c,u,m,p){let v=Ut.getInstance(),N=this.getDimension(),_=N/2-this.nbCenterLayers,O=N/2+this.nbCenterLayers;return v.sampleGrid(i,N,N,_,_,O,_,O,O,_,O,c.getX(),c.getY(),u.getX(),u.getY(),m.getX(),m.getY(),p.getX(),p.getY())}sampleLine(i,c,u){let m=0,p=this.distanceResultPoint(i,c),v=p/u,N=i.getX(),_=i.getY(),O=v*(c.getX()-i.getX())/p,V=v*(c.getY()-i.getY())/p;for(let J=0;J<u;J++)this.image.get(fe.round(N+J*O),fe.round(_+J*V))&&(m|=1<<u-J-1);return m}isWhiteOrBlackRectangle(i,c,u,m){let p=3;i=new Yt(i.getX()-p,i.getY()+p),c=new Yt(c.getX()-p,c.getY()-p),u=new Yt(u.getX()+p,u.getY()-p),m=new Yt(m.getX()+p,m.getY()+p);let v=this.getColor(m,i);if(v===0)return!1;let N=this.getColor(i,c);return N!==v||(N=this.getColor(c,u),N!==v)?!1:(N=this.getColor(u,m),N===v)}getColor(i,c){let u=this.distancePoint(i,c),m=(c.getX()-i.getX())/u,p=(c.getY()-i.getY())/u,v=0,N=i.getX(),_=i.getY(),O=this.image.get(i.getX(),i.getY()),V=Math.ceil(u);for(let ue=0;ue<V;ue++)N+=m,_+=p,this.image.get(fe.round(N),fe.round(_))!==O&&v++;let J=v/u;return J>.1&&J<.9?0:J<=.1===O?1:-1}getFirstDifferent(i,c,u,m){let p=i.getX()+u,v=i.getY()+m;for(;this.isValid(p,v)&&this.image.get(p,v)===c;)p+=u,v+=m;for(p-=u,v-=m;this.isValid(p,v)&&this.image.get(p,v)===c;)p+=u;for(p-=u;this.isValid(p,v)&&this.image.get(p,v)===c;)v+=m;return v-=m,new Yt(p,v)}expandSquare(i,c,u){let m=u/(2*c),p=i[0].getX()-i[2].getX(),v=i[0].getY()-i[2].getY(),N=(i[0].getX()+i[2].getX())/2,_=(i[0].getY()+i[2].getY())/2,O=new Ee(N+m*p,_+m*v),V=new Ee(N-m*p,_-m*v);p=i[1].getX()-i[3].getX(),v=i[1].getY()-i[3].getY(),N=(i[1].getX()+i[3].getX())/2,_=(i[1].getY()+i[3].getY())/2;let J=new Ee(N+m*p,_+m*v),ue=new Ee(N-m*p,_-m*v);return[O,J,V,ue]}isValid(i,c){return i>=0&&i<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(i){let c=fe.round(i.getX()),u=fe.round(i.getY());return this.isValid(c,u)}distancePoint(i,c){return fe.distance(i.getX(),i.getY(),c.getX(),c.getY())}distanceResultPoint(i,c){return fe.distance(i.getX(),i.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class $e{decode(i,c=null){let u=null,m=new It(i.getBlackMatrix()),p=null,v=null;try{let V=m.detectMirror(!1);p=V.getPoints(),this.reportFoundResultPoints(c,p),v=new Le().decode(V)}catch(V){u=V}if(v==null)try{let V=m.detectMirror(!0);p=V.getPoints(),this.reportFoundResultPoints(c,p),v=new Le().decode(V)}catch(V){throw u??V}let N=new se(v.getText(),v.getRawBytes(),v.getNumBits(),p,te.AZTEC,A.currentTimeMillis()),_=v.getByteSegments();_!=null&&N.putMetadata(ke.BYTE_SEGMENTS,_);let O=v.getECLevel();return O!=null&&N.putMetadata(ke.ERROR_CORRECTION_LEVEL,O),N}reportFoundResultPoints(i,c){if(i!=null){let u=i.get(U.NEED_RESULT_POINT_CALLBACK);u!=null&&c.forEach((m,p,v)=>{u.foundPossibleResultPoint(m)})}}reset(){}}class jt extends K{constructor(i=500){super(new $e,i)}}class Nt{decode(i,c){try{return this.doDecode(i,c)}catch{if(c&&c.get(U.TRY_HARDER)===!0&&i.isRotateSupported()){const p=i.rotateCounterClockwise(),v=this.doDecode(p,c),N=v.getResultMetadata();let _=270;N!==null&&N.get(ke.ORIENTATION)===!0&&(_=_+N.get(ke.ORIENTATION)%360),v.putMetadata(ke.ORIENTATION,_);const O=v.getResultPoints();if(O!==null){const V=p.getHeight();for(let J=0;J<O.length;J++)O[J]=new Ee(V-O[J].getY()-1,O[J].getX())}return v}else throw new Y}}reset(){}doDecode(i,c){const u=i.getWidth(),m=i.getHeight();let p=new B(u);const v=c&&c.get(U.TRY_HARDER)===!0,N=Math.max(1,m>>(v?8:5));let _;v?_=m:_=15;const O=Math.trunc(m/2);for(let V=0;V<_;V++){const J=Math.trunc((V+1)/2),ue=(V&1)===0,je=O+N*(ue?J:-J);if(je<0||je>=m)break;try{p=i.getBlackRow(je,p)}catch{continue}for(let De=0;De<2;De++){if(De===1&&(p.reverse(),c&&c.get(U.NEED_RESULT_POINT_CALLBACK)===!0)){const Me=new Map;c.forEach((ze,Ke)=>Me.set(Ke,ze)),Me.delete(U.NEED_RESULT_POINT_CALLBACK),c=Me}try{const Me=this.decodeRow(je,p,c);if(De===1){Me.putMetadata(ke.ORIENTATION,180);const ze=Me.getResultPoints();ze!==null&&(ze[0]=new Ee(u-ze[0].getX()-1,ze[0].getY()),ze[1]=new Ee(u-ze[1].getX()-1,ze[1].getY()))}return Me}catch{}}}throw new Y}static recordPattern(i,c,u){const m=u.length;for(let O=0;O<m;O++)u[O]=0;const p=i.getSize();if(c>=p)throw new Y;let v=!i.get(c),N=0,_=c;for(;_<p;){if(i.get(_)!==v)u[N]++;else{if(++N===m)break;u[N]=1,v=!v}_++}if(!(N===m||N===m-1&&_===p))throw new Y}static recordPatternInReverse(i,c,u){let m=u.length,p=i.get(c);for(;c>0&&m>=0;)i.get(--c)!==p&&(m--,p=!p);if(m>=0)throw new Y;Nt.recordPattern(i,c+1,u)}static patternMatchVariance(i,c,u){const m=i.length;let p=0,v=0;for(let O=0;O<m;O++)p+=i[O],v+=c[O];if(p<v)return Number.POSITIVE_INFINITY;const N=p/v;u*=N;let _=0;for(let O=0;O<m;O++){const V=i[O],J=c[O]*N,ue=V>J?V-J:J-V;if(ue>u)return Number.POSITIVE_INFINITY;_+=ue}return _/p}}class lt extends Nt{static findStartPattern(i){const c=i.getSize(),u=i.getNextSet(0);let m=0,p=Int32Array.from([0,0,0,0,0,0]),v=u,N=!1;const _=6;for(let O=u;O<c;O++)if(i.get(O)!==N)p[m]++;else{if(m===_-1){let V=lt.MAX_AVG_VARIANCE,J=-1;for(let ue=lt.CODE_START_A;ue<=lt.CODE_START_C;ue++){const je=Nt.patternMatchVariance(p,lt.CODE_PATTERNS[ue],lt.MAX_INDIVIDUAL_VARIANCE);je<V&&(V=je,J=ue)}if(J>=0&&i.isRange(Math.max(0,v-(O-v)/2),v,!1))return Int32Array.from([v,O,J]);v+=p[0]+p[1],p=p.slice(2,p.length-1),p[m-1]=0,p[m]=0,m--}else m++;p[m]=1,N=!N}throw new Y}static decodeCode(i,c,u){Nt.recordPattern(i,u,c);let m=lt.MAX_AVG_VARIANCE,p=-1;for(let v=0;v<lt.CODE_PATTERNS.length;v++){const N=lt.CODE_PATTERNS[v],_=this.patternMatchVariance(c,N,lt.MAX_INDIVIDUAL_VARIANCE);_<m&&(m=_,p=v)}if(p>=0)return p;throw new Y}decodeRow(i,c,u){const m=u&&u.get(U.ASSUME_GS1)===!0,p=lt.findStartPattern(c),v=p[2];let N=0;const _=new Uint8Array(20);_[N++]=v;let O;switch(v){case lt.CODE_START_A:O=lt.CODE_CODE_A;break;case lt.CODE_START_B:O=lt.CODE_CODE_B;break;case lt.CODE_START_C:O=lt.CODE_CODE_C;break;default:throw new L}let V=!1,J=!1,ue="",je=p[0],De=p[1];const Me=Int32Array.from([0,0,0,0,0,0]);let ze=0,Ke=0,ht=v,gt=0,ft=!0,Kt=!1,$t=!1;for(;!V;){const $n=J;switch(J=!1,ze=Ke,Ke=lt.decodeCode(c,Me,De),_[N++]=Ke,Ke!==lt.CODE_STOP&&(ft=!0),Ke!==lt.CODE_STOP&&(gt++,ht+=gt*Ke),je=De,De+=Me.reduce((Bs,Ed)=>Bs+Ed,0),Ke){case lt.CODE_START_A:case lt.CODE_START_B:case lt.CODE_START_C:throw new L}switch(O){case lt.CODE_CODE_A:if(Ke<64)$t===Kt?ue+=String.fromCharCode(32+Ke):ue+=String.fromCharCode(32+Ke+128),$t=!1;else if(Ke<96)$t===Kt?ue+=String.fromCharCode(Ke-64):ue+=String.fromCharCode(Ke+64),$t=!1;else switch(Ke!==lt.CODE_STOP&&(ft=!1),Ke){case lt.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_A:!Kt&&$t?(Kt=!0,$t=!1):Kt&&$t?(Kt=!1,$t=!1):$t=!0;break;case lt.CODE_SHIFT:J=!0,O=lt.CODE_CODE_B;break;case lt.CODE_CODE_B:O=lt.CODE_CODE_B;break;case lt.CODE_CODE_C:O=lt.CODE_CODE_C;break;case lt.CODE_STOP:V=!0;break}break;case lt.CODE_CODE_B:if(Ke<96)$t===Kt?ue+=String.fromCharCode(32+Ke):ue+=String.fromCharCode(32+Ke+128),$t=!1;else switch(Ke!==lt.CODE_STOP&&(ft=!1),Ke){case lt.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_B:!Kt&&$t?(Kt=!0,$t=!1):Kt&&$t?(Kt=!1,$t=!1):$t=!0;break;case lt.CODE_SHIFT:J=!0,O=lt.CODE_CODE_A;break;case lt.CODE_CODE_A:O=lt.CODE_CODE_A;break;case lt.CODE_CODE_C:O=lt.CODE_CODE_C;break;case lt.CODE_STOP:V=!0;break}break;case lt.CODE_CODE_C:if(Ke<100)Ke<10&&(ue+="0"),ue+=Ke;else switch(Ke!==lt.CODE_STOP&&(ft=!1),Ke){case lt.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case lt.CODE_CODE_A:O=lt.CODE_CODE_A;break;case lt.CODE_CODE_B:O=lt.CODE_CODE_B;break;case lt.CODE_STOP:V=!0;break}break}$n&&(O=O===lt.CODE_CODE_A?lt.CODE_CODE_B:lt.CODE_CODE_A)}const Ga=De-je;if(De=c.getNextUnset(De),!c.isRange(De,Math.min(c.getSize(),De+(De-je)/2),!1))throw new Y;if(ht-=gt*ze,ht%103!==ze)throw new S;const Ss=ue.length;if(Ss===0)throw new Y;Ss>0&&ft&&(O===lt.CODE_CODE_C?ue=ue.substring(0,Ss-2):ue=ue.substring(0,Ss-1));const rs=(p[1]+p[0])/2,Sr=je+Ga/2,Da=_.length,as=new Uint8Array(Da);for(let $n=0;$n<Da;$n++)as[$n]=_[$n];const gi=[new Ee(rs,i),new Ee(Sr,i)];return new se(ue,as,0,gi,te.CODE_128,new Date().getTime())}}lt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],lt.MAX_AVG_VARIANCE=.25,lt.MAX_INDIVIDUAL_VARIANCE=.7,lt.CODE_SHIFT=98,lt.CODE_CODE_C=99,lt.CODE_CODE_B=100,lt.CODE_CODE_A=101,lt.CODE_FNC_1=102,lt.CODE_FNC_2=97,lt.CODE_FNC_3=96,lt.CODE_FNC_4_A=101,lt.CODE_FNC_4_B=100,lt.CODE_START_A=103,lt.CODE_START_B=104,lt.CODE_START_C=105,lt.CODE_STOP=106;class At extends Nt{constructor(i=!1,c=!1){super(),this.usingCheckDigit=i,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,c,u){let m=this.counters;m.fill(0),this.decodeRowResult="";let p=At.findAsteriskPattern(c,m),v=c.getNextSet(p[1]),N=c.getSize(),_,O;do{At.recordPattern(c,v,m);let Me=At.toNarrowWidePattern(m);if(Me<0)throw new Y;_=At.patternToChar(Me),this.decodeRowResult+=_,O=v;for(let ze of m)v+=ze;v=c.getNextSet(v)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let V=0;for(let Me of m)V+=Me;let J=v-O-V;if(v!==N&&J*2<V)throw new Y;if(this.usingCheckDigit){let Me=this.decodeRowResult.length-1,ze=0;for(let Ke=0;Ke<Me;Ke++)ze+=At.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ke));if(this.decodeRowResult.charAt(Me)!==At.ALPHABET_STRING.charAt(ze%43))throw new S;this.decodeRowResult=this.decodeRowResult.substring(0,Me)}if(this.decodeRowResult.length===0)throw new Y;let ue;this.extendedMode?ue=At.decodeExtended(this.decodeRowResult):ue=this.decodeRowResult;let je=(p[1]+p[0])/2,De=O+V/2;return new se(ue,null,0,[new Ee(je,i),new Ee(De,i)],te.CODE_39,new Date().getTime())}static findAsteriskPattern(i,c){let u=i.getSize(),m=i.getNextSet(0),p=0,v=m,N=!1,_=c.length;for(let O=m;O<u;O++)if(i.get(O)!==N)c[p]++;else{if(p===_-1){if(this.toNarrowWidePattern(c)===At.ASTERISK_ENCODING&&i.isRange(Math.max(0,v-Math.floor((O-v)/2)),v,!1))return[v,O];v+=c[0]+c[1],c.copyWithin(0,2,2+p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,N=!N}throw new Y}static toNarrowWidePattern(i){let c=i.length,u=0,m;do{let p=2147483647;for(let _ of i)_<p&&_>u&&(p=_);u=p,m=0;let v=0,N=0;for(let _=0;_<c;_++){let O=i[_];O>u&&(N|=1<<c-1-_,m++,v+=O)}if(m===3){for(let _=0;_<c&&m>0;_++){let O=i[_];if(O>u&&(m--,O*2>=v))return-1}return N}}while(m>3);return-1}static patternToChar(i){for(let c=0;c<At.CHARACTER_ENCODINGS.length;c++)if(At.CHARACTER_ENCODINGS[c]===i)return At.ALPHABET_STRING.charAt(c);if(i===At.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(i){let c=i.length,u="";for(let m=0;m<c;m++){let p=i.charAt(m);if(p==="+"||p==="$"||p==="%"||p==="/"){let v=i.charAt(m+1),N="\0";switch(p){case"+":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)+32);else throw new L;break;case"$":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)-64);else throw new L;break;case"%":if(v>="A"&&v<="E")N=String.fromCharCode(v.charCodeAt(0)-38);else if(v>="F"&&v<="J")N=String.fromCharCode(v.charCodeAt(0)-11);else if(v>="K"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)+16);else if(v>="P"&&v<="T")N=String.fromCharCode(v.charCodeAt(0)+43);else if(v==="U")N="\0";else if(v==="V")N="@";else if(v==="W")N="`";else if(v==="X"||v==="Y"||v==="Z")N="";else throw new L;break;case"/":if(v>="A"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)-32);else if(v==="Z")N=":";else throw new L;break}u+=N,m++}else u+=p}return u}}At.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",At.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],At.ASTERISK_ENCODING=148;class vt extends Nt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,c,u){let m=this.decodeStart(c),p=this.decodeEnd(c),v=new ne;vt.decodeMiddle(c,m[1],p[0],v);let N=v.toString(),_=null;u!=null&&(_=u.get(U.ALLOWED_LENGTHS)),_==null&&(_=vt.DEFAULT_ALLOWED_LENGTHS);let O=N.length,V=!1,J=0;for(let De of _){if(O===De){V=!0;break}De>J&&(J=De)}if(!V&&O>J&&(V=!0),!V)throw new L;const ue=[new Ee(m[1],i),new Ee(p[0],i)];return new se(N,null,0,ue,te.ITF,new Date().getTime())}static decodeMiddle(i,c,u,m){let p=new Int32Array(10),v=new Int32Array(5),N=new Int32Array(5);for(p.fill(0),v.fill(0),N.fill(0);c<u;){Nt.recordPattern(i,c,p);for(let O=0;O<5;O++){let V=2*O;v[O]=p[V],N[O]=p[V+1]}let _=vt.decodeDigit(v);m.append(_.toString()),_=this.decodeDigit(N),m.append(_.toString()),p.forEach(function(O){c+=O})}}decodeStart(i){let c=vt.skipWhiteSpace(i),u=vt.findGuardPattern(i,c,vt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(i,u[0]),u}validateQuietZone(i,c){let u=this.narrowLineWidth*10;u=u<c?u:c;for(let m=c-1;u>0&&m>=0&&!i.get(m);m--)u--;if(u!==0)throw new Y}static skipWhiteSpace(i){const c=i.getSize(),u=i.getNextSet(0);if(u===c)throw new Y;return u}decodeEnd(i){i.reverse();try{let c=vt.skipWhiteSpace(i),u;try{u=vt.findGuardPattern(i,c,vt.END_PATTERN_REVERSED[0])}catch(p){p instanceof Y&&(u=vt.findGuardPattern(i,c,vt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,u[0]);let m=u[0];return u[0]=i.getSize()-u[1],u[1]=i.getSize()-m,u}finally{i.reverse()}}static findGuardPattern(i,c,u){let m=u.length,p=new Int32Array(m),v=i.getSize(),N=!1,_=0,O=c;p.fill(0);for(let V=c;V<v;V++)if(i.get(V)!==N)p[_]++;else{if(_===m-1){if(Nt.patternMatchVariance(p,u,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return[O,V];O+=p[0]+p[1],A.arraycopy(p,2,p,0,_-1),p[_-1]=0,p[_]=0,_--}else _++;p[_]=1,N=!N}throw new Y}static decodeDigit(i){let c=vt.MAX_AVG_VARIANCE,u=-1,m=vt.PATTERNS.length;for(let p=0;p<m;p++){let v=vt.PATTERNS[p],N=Nt.patternMatchVariance(i,v,vt.MAX_INDIVIDUAL_VARIANCE);N<c?(c=N,u=p):N===c&&(u=-1)}if(u>=0)return u%10;throw new Y}}vt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],vt.MAX_AVG_VARIANCE=.38,vt.MAX_INDIVIDUAL_VARIANCE=.5,vt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],vt.START_PATTERN=Int32Array.from([1,1,1,1]),vt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nt extends Nt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let c=!1,u,m=0,p=Int32Array.from([0,0,0]);for(;!c;){p=Int32Array.from([0,0,0]),u=nt.findGuardPattern(i,m,!1,this.START_END_PATTERN,p);let v=u[0];m=u[1];let N=v-(m-v);N>=0&&(c=i.isRange(N,v,!1))}return u}static checkChecksum(i){return nt.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let c=i.length;if(c===0)return!1;let u=parseInt(i.charAt(c-1),10);return nt.getStandardUPCEANChecksum(i.substring(0,c-1))===u}static getStandardUPCEANChecksum(i){let c=i.length,u=0;for(let m=c-1;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new L;u+=p}u*=3;for(let m=c-2;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new L;u+=p}return(1e3-u)%10}static decodeEnd(i,c){return nt.findGuardPattern(i,c,!1,nt.START_END_PATTERN,new Int32Array(nt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,c,u,m){return this.findGuardPattern(i,c,u,m,new Int32Array(m.length))}static findGuardPattern(i,c,u,m,p){let v=i.getSize();c=u?i.getNextUnset(c):i.getNextSet(c);let N=0,_=c,O=m.length,V=u;for(let J=c;J<v;J++)if(i.get(J)!==V)p[N]++;else{if(N===O-1){if(Nt.patternMatchVariance(p,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return Int32Array.from([_,J]);_+=p[0]+p[1];let ue=p.slice(2,p.length-1);for(let je=0;je<N-1;je++)p[je]=ue[je];p[N-1]=0,p[N]=0,N--}else N++;p[N]=1,V=!V}throw new Y}static decodeDigit(i,c,u,m){this.recordPattern(i,u,c);let p=this.MAX_AVG_VARIANCE,v=-1,N=m.length;for(let _=0;_<N;_++){let O=m[_],V=Nt.patternMatchVariance(c,O,nt.MAX_INDIVIDUAL_VARIANCE);V<p&&(p=V,v=_)}if(v>=0)return v;throw new Y}}nt.MAX_AVG_VARIANCE=.48,nt.MAX_INDIVIDUAL_VARIANCE=.7,nt.START_END_PATTERN=Int32Array.from([1,1,1]),nt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class kt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,c,u){let m=this.decodeRowStringBuffer,p=this.decodeMiddle(c,u,m),v=m.toString(),N=kt.parseExtensionString(v),_=[new Ee((u[0]+u[1])/2,i),new Ee(p,i)],O=new se(v,null,0,_,te.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&O.putAllMetadata(N),O}decodeMiddle(i,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1],N=0;for(let O=0;O<5&&v<p;O++){let V=nt.decodeDigit(i,m,v,nt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let J of m)v+=J;V>=10&&(N|=1<<4-O),O!==4&&(v=i.getNextSet(v),v=i.getNextUnset(v))}if(u.length!==5)throw new Y;let _=this.determineCheckDigit(N);if(kt.extensionChecksum(u.toString())!==_)throw new Y;return v}static extensionChecksum(i){let c=i.length,u=0;for(let m=c-2;m>=0;m-=2)u+=i.charAt(m).charCodeAt(0)-48;u*=3;for(let m=c-1;m>=0;m-=2)u+=i.charAt(m).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(i){for(let c=0;c<10;c++)if(i===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new Y}static parseExtensionString(i){if(i.length!==5)return null;let c=kt.parseExtension5String(i);return c==null?null:new Map([[ke.SUGGESTED_PRICE,c]])}static parseExtension5String(i){let c;switch(i.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let u=parseInt(i.substring(1)),m=(u/100).toString(),p=u%100,v=p<10?"0"+p:p.toString();return c+m+"."+v}}class Os{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,c,u){let m=this.decodeRowStringBuffer,p=this.decodeMiddle(c,u,m),v=m.toString(),N=Os.parseExtensionString(v),_=[new Ee((u[0]+u[1])/2,i),new Ee(p,i)],O=new se(v,null,0,_,te.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&O.putAllMetadata(N),O}decodeMiddle(i,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1],N=0;for(let _=0;_<2&&v<p;_++){let O=nt.decodeDigit(i,m,v,nt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let V of m)v+=V;O>=10&&(N|=1<<1-_),_!==1&&(v=i.getNextSet(v),v=i.getNextUnset(v))}if(u.length!==2)throw new Y;if(parseInt(u.toString())%4!==N)throw new Y;return v}static parseExtensionString(i){return i.length!==2?null:new Map([[ke.ISSUE_NUMBER,parseInt(i)]])}}class Bn{static decodeRow(i,c,u){let m=nt.findGuardPattern(c,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new kt().decodeRow(i,c,m)}catch{return new Os().decodeRow(i,c,m)}}}Bn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _t extends nt{constructor(){super(),this.decodeRowStringBuffer="",_t.L_AND_G_PATTERNS=_t.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let c=_t.L_PATTERNS[i-10],u=new Int32Array(c.length);for(let m=0;m<c.length;m++)u[m]=c[c.length-m-1];_t.L_AND_G_PATTERNS[i]=u}}decodeRow(i,c,u){let m=_t.findStartGuardPattern(c),p=u==null?null:u.get(U.NEED_RESULT_POINT_CALLBACK);if(p!=null){const ft=new Ee((m[0]+m[1])/2,i);p.foundPossibleResultPoint(ft)}let v=this.decodeMiddle(c,m,this.decodeRowStringBuffer),N=v.rowOffset,_=v.resultString;if(p!=null){const ft=new Ee(N,i);p.foundPossibleResultPoint(ft)}let O=this.decodeEnd(c,N);if(p!=null){const ft=new Ee((O[0]+O[1])/2,i);p.foundPossibleResultPoint(ft)}let V=O[1],J=V+(V-O[0]);if(J>=c.getSize()||!c.isRange(V,J,!1))throw new Y;let ue=_.toString();if(ue.length<8)throw new L;if(!_t.checkChecksum(ue))throw new S;let je=(m[1]+m[0])/2,De=(O[1]+O[0])/2,Me=this.getBarcodeFormat(),ze=[new Ee(je,i),new Ee(De,i)],Ke=new se(ue,null,0,ze,Me,new Date().getTime()),ht=0;try{let ft=Bn.decodeRow(i,c,O[1]);Ke.putMetadata(ke.UPC_EAN_EXTENSION,ft.getText()),Ke.putAllMetadata(ft.getResultMetadata()),Ke.addResultPoints(ft.getResultPoints()),ht=ft.getText().length}catch{}let gt=u==null?null:u.get(U.ALLOWED_EAN_EXTENSIONS);if(gt!=null){let ft=!1;for(let Kt in gt)if(ht.toString()===Kt){ft=!0;break}if(!ft)throw new Y}return Ke}decodeEnd(i,c){return _t.findGuardPattern(i,c,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return _t.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let c=i.length;if(c===0)return!1;let u=parseInt(i.charAt(c-1),10);return _t.getStandardUPCEANChecksum(i.substring(0,c-1))===u}static getStandardUPCEANChecksum(i){let c=i.length,u=0;for(let m=c-1;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new L;u+=p}u*=3;for(let m=c-2;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new L;u+=p}return(1e3-u)%10}}class Jr extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1],N=0;for(let O=0;O<6&&v<p;O++){let V=_t.decodeDigit(i,m,v,_t.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let J of m)v+=J;V>=10&&(N|=1<<5-O)}u=Jr.determineFirstDigit(u,N),v=_t.findGuardPattern(i,v,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<6&&v<p;O++){let V=_t.decodeDigit(i,m,v,_t.L_PATTERNS);u+=String.fromCharCode(48+V);for(let J of m)v+=J}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return te.EAN_13}static determineFirstDigit(i,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return i=String.fromCharCode(48+u)+i,i;throw new Y}}Jr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class en extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,c,u){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1];for(let _=0;_<4&&v<p;_++){let O=_t.decodeDigit(i,m,v,_t.L_PATTERNS);u+=String.fromCharCode(48+O);for(let V of m)v+=V}v=_t.findGuardPattern(i,v,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&v<p;_++){let O=_t.decodeDigit(i,m,v,_t.L_PATTERNS);u+=String.fromCharCode(48+O);for(let V of m)v+=V}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return te.EAN_8}}class Ol extends _t{constructor(){super(...arguments),this.ean13Reader=new Jr}getBarcodeFormat(){return te.UPC_A}decode(i,c){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,c,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,c,u))}decodeMiddle(i,c,u){return this.ean13Reader.decodeMiddle(i,c,u)}maybeReturnResult(i){let c=i.getText();if(c.charAt(0)==="0"){let u=new se(c.substring(1),null,null,i.getResultPoints(),te.UPC_A);return i.getResultMetadata()!=null&&u.putAllMetadata(i.getResultMetadata()),u}else throw new Y}reset(){this.ean13Reader.reset()}}class Za extends _t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,c,u){const m=this.decodeMiddleCounters.map(O=>O);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const p=i.getSize();let v=c[1],N=0;for(let O=0;O<6&&v<p;O++){const V=Za.decodeDigit(i,m,v,Za.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let J of m)v+=J;V>=10&&(N|=1<<5-O)}let _=Za.determineNumSysAndCheckDigit(u,N);return{rowOffset:v,resultString:_}}decodeEnd(i,c){return Za.findGuardPatternWithoutCounters(i,c,!0,Za.MIDDLE_END_PATTERN)}checkChecksum(i){return _t.checkChecksum(Za.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,c){for(let u=0;u<=1;u++)for(let m=0;m<10;m++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][m]){let p=String.fromCharCode(48+u),v=String.fromCharCode(48+m);return p+i+v}throw Y.getNotFoundInstance()}getBarcodeFormat(){return te.UPC_E}static convertUPCEtoUPCA(i){const c=i.slice(1,7).split("").map(p=>p.charCodeAt(0)),u=new ne;u.append(i.charAt(0));let m=c[5];switch(m){case 0:case 1:case 2:u.appendChars(c,0,2),u.append(m),u.append("0000"),u.appendChars(c,2,3);break;case 3:u.appendChars(c,0,3),u.append("00000"),u.appendChars(c,3,2);break;case 4:u.appendChars(c,0,4),u.append("00000"),u.append(c[4]);break;default:u.appendChars(c,0,5),u.append("0000"),u.append(m);break}return i.length>=8&&u.append(i.charAt(7)),u.toString()}}Za.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Za.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ui extends Nt{constructor(i){super();let c=i==null?null:i.get(U.POSSIBLE_FORMATS),u=[];n(c)?(u.push(new Jr),u.push(new Ol),u.push(new en),u.push(new Za)):(c.indexOf(te.EAN_13)>-1&&u.push(new Jr),c.indexOf(te.UPC_A)>-1&&u.push(new Ol),c.indexOf(te.EAN_8)>-1&&u.push(new en),c.indexOf(te.UPC_E)>-1&&u.push(new Za)),this.readers=u}decodeRow(i,c,u){for(let m of this.readers)try{const p=m.decodeRow(i,c,u),v=p.getBarcodeFormat()===te.EAN_13&&p.getText().charAt(0)==="0",N=u==null?null:u.get(U.POSSIBLE_FORMATS),_=N==null||N.includes(te.UPC_A);if(v&&_){const O=p.getRawBytes(),V=new se(p.getText().substring(1),O,O?O.length:null,p.getResultPoints(),te.UPC_A);return V.putAllMetadata(p.getResultMetadata()),V}return p}catch{}throw new Y}reset(){for(let i of this.readers)i.reset()}}class ea extends Nt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,c){for(let u=0;u<c.length;u++)if(Nt.patternMatchVariance(i,c[u],ea.MAX_INDIVIDUAL_VARIANCE)<ea.MAX_AVG_VARIANCE)return u;throw new Y}static count(i){return fe.sum(new Int32Array(i))}static increment(i,c){let u=0,m=c[0];for(let p=1;p<i.length;p++)c[p]>m&&(m=c[p],u=p);i[u]++}static decrement(i,c){let u=0,m=c[0];for(let p=1;p<i.length;p++)c[p]<m&&(m=c[p],u=p);i[u]--}static isFinderPattern(i){let c=i[0]+i[1],u=c+i[2]+i[3],m=c/u;if(m>=ea.MIN_FINDER_PATTERN_RATIO&&m<=ea.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;for(let N of i)N>v&&(v=N),N<p&&(p=N);return v<10*p}return!1}}ea.MAX_AVG_VARIANCE=.2,ea.MAX_INDIVIDUAL_VARIANCE=.45,ea.MIN_FINDER_PATTERN_RATIO=9.5/12,ea.MAX_FINDER_PATTERN_RATIO=12.5/14;class yn{constructor(i,c){this.value=i,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof yn))return!1;const c=i;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vi{constructor(i,c,u,m,p){this.value=i,this.startEnd=c,this.value=i,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new Ee(u,p)),this.resultPoints.push(new Ee(m,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Vi))return!1;const c=i;return this.value===c.value}hashCode(){return this.value}}class oa{constructor(){}static getRSSvalue(i,c,u){let m=0;for(let _ of i)m+=_;let p=0,v=0,N=i.length;for(let _=0;_<N-1;_++){let O;for(O=1,v|=1<<_;O<i[_];O++,v&=~(1<<_)){let V=oa.combins(m-O-1,N-_-2);if(u&&v===0&&m-O-(N-_-1)>=N-_-1&&(V-=oa.combins(m-O-(N-_),N-_-2)),N-_-1>1){let J=0;for(let ue=m-O-(N-_-2);ue>c;ue--)J+=oa.combins(m-O-ue-1,N-_-3);V-=J*(N-1-_)}else m-O>c&&V--;p+=V}m-=O}return p}static combins(i,c){let u,m;i-c>c?(m=c,u=i-c):(m=i-c,u=c);let p=1,v=1;for(let N=i;N>u;N--)p*=N,v<=m&&(p/=v,v++);for(;v<=m;)p/=v,v++;return p}}class ga{static buildBitArray(i){let c=i.length*2-1;i[i.length-1].getRightChar()==null&&(c-=1);let u=12*c,m=new B(u),p=0,N=i[0].getRightChar().getValue();for(let _=11;_>=0;--_)(N&1<<_)!=0&&m.set(p),p++;for(let _=1;_<i.length;++_){let O=i[_],V=O.getLeftChar().getValue();for(let J=11;J>=0;--J)(V&1<<J)!=0&&m.set(p),p++;if(O.getRightChar()!=null){let J=O.getRightChar().getValue();for(let ue=11;ue>=0;--ue)(J&1<<ue)!=0&&m.set(p),p++}}return m}}class Pr{constructor(i,c){c?this.decodedInformation=null:(this.finished=i,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class tn{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class pa extends tn{constructor(i,c){super(i),this.value=c}getValue(){return this.value}isFNC1(){return this.value===pa.FNC1}}pa.FNC1="$";class bn extends tn{constructor(i,c,u){super(i),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ce extends tn{constructor(i,c,u){if(super(i),c<0||c>10||u<0||u>10)throw new L;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ce.FNC1}isSecondDigitFNC1(){return this.secondDigit===ce.FNC1}isAnyFNC1(){return this.firstDigit===ce.FNC1||this.secondDigit===ce.FNC1}}ce.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new Y;let c=i.substring(0,2);for(let p of me.TWO_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,p[2],i):me.processFixedAI(2,p[1],i);if(i.length<3)throw new Y;let u=i.substring(0,3);for(let p of me.THREE_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,p[2],i):me.processFixedAI(3,p[1],i);for(let p of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,p[2],i):me.processFixedAI(4,p[1],i);if(i.length<4)throw new Y;let m=i.substring(0,4);for(let p of me.FOUR_DIGIT_DATA_LENGTH)if(p[0]===m)return p[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,p[2],i):me.processFixedAI(4,p[1],i);throw new Y}static processFixedAI(i,c,u){if(u.length<i)throw new Y;let m=u.substring(0,i);if(u.length<i+c)throw new Y;let p=u.substring(i,i+c),v=u.substring(i+c),N="("+m+")"+p,_=me.parseFieldsInGeneralPurpose(v);return _==null?N:N+_}static processVariableAI(i,c,u){let m=u.substring(0,i),p;u.length<i+c?p=u.length:p=i+c;let v=u.substring(i,p),N=u.substring(p),_="("+m+")"+v,O=me.parseFieldsInGeneralPurpose(N);return O==null?_:_+O}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class ge{constructor(i){this.buffer=new ne,this.information=i}decodeAllCodes(i,c){let u=c,m=null;do{let p=this.decodeGeneralPurposeField(u,m),v=me.parseFieldsInGeneralPurpose(p.getNewString());if(v!=null&&i.append(v),p.isRemaining()?m=""+p.getRemainingValue():m=null,u===p.getNewPosition())break;u=p.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let c=i;c<i+3;++c)if(this.information.get(c))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(i,4);return p===0?new ce(this.information.getSize(),ce.FNC1,ce.FNC1):new ce(this.information.getSize(),p-1,ce.FNC1)}let c=this.extractNumericValueFromBitArray(i,7),u=(c-8)/11,m=(c-8)%11;return new ce(i+7,u,m)}extractNumericValueFromBitArray(i,c){return ge.extractNumericValueFromBitArray(this.information,i,c)}static extractNumericValueFromBitArray(i,c,u){let m=0;for(let p=0;p<u;++p)i.get(c+p)&&(m|=1<<u-p-1);return m}decodeGeneralPurposeField(i,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(i);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new bn(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new bn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,c;do{let u=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),i=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),i=c.isFinished()):(c=this.parseNumericBlock(),i=c.isFinished()),!(u!==this.current.getPosition())&&!i)break}while(!i);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let c;return i.isSecondDigitFNC1()?c=new bn(this.current.getPosition(),this.buffer.toString()):c=new bn(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new Pr(!0,c)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let c=new bn(this.current.getPosition(),this.buffer.toString());return new Pr(!0,c)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Pr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let c=new bn(this.current.getPosition(),this.buffer.toString());return new Pr(!0,c)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Pr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let c=new bn(this.current.getPosition(),this.buffer.toString());return new Pr(!0,c)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Pr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,5);if(c>=5&&c<16)return!0;if(i+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,7);if(u>=64&&u<116)return!0;if(i+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(i,8);return m>=232&&m<253}decodeIsoIec646(i){let c=this.extractNumericValueFromBitArray(i,5);if(c===15)return new pa(i+5,pa.FNC1);if(c>=5&&c<15)return new pa(i+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(i,7);if(u>=64&&u<90)return new pa(i+7,""+(u+1));if(u>=90&&u<116)return new pa(i+7,""+(u+7));let m=this.extractNumericValueFromBitArray(i,8),p;switch(m){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new L}return new pa(i+8,p)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,5);if(c>=5&&c<16)return!0;if(i+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,6);return u>=16&&u<63}decodeAlphanumeric(i){let c=this.extractNumericValueFromBitArray(i,5);if(c===15)return new pa(i+5,pa.FNC1);if(c>=5&&c<15)return new pa(i+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(i,6);if(u>=32&&u<58)return new pa(i+6,""+(u+33));let m;switch(u){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new Ce("Decoding invalid alphanumeric value: "+u)}return new pa(i+6,m)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let c=0;c<5&&c+i<this.information.getSize();++c)if(c===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+c))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let c=i;c<i+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let c=0;c<4&&c+i<this.information.getSize();++c)if(this.information.get(i+c))return!1;return!0}}class we{constructor(i){this.information=i,this.generalDecoder=new ge(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ne extends we{constructor(i){super(i)}encodeCompressedGtin(i,c){i.append("(01)");let u=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,c,u)}encodeCompressedGtinWithoutAI(i,c,u){for(let m=0;m<4;++m){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*m,10);p/100===0&&i.append("0"),p/10===0&&i.append("0"),i.append(p)}Ne.appendCheckDigit(i,u)}static appendCheckDigit(i,c){let u=0;for(let m=0;m<13;m++){let p=i.charAt(m+c).charCodeAt(0)-48;u+=(m&1)===0?3*p:p}u=10-u%10,u===10&&(u=0),i.append(u)}}Ne.GTIN_SIZE=40;class Se extends Ne{constructor(i){super(i)}parseInformation(){let i=new ne;i.append("(01)");let c=i.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Se.HEADER_SIZE,4);return i.append(u),this.encodeCompressedGtinWithoutAI(i,Se.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(i,Se.HEADER_SIZE+44)}}Se.HEADER_SIZE=4;class Ge extends we{constructor(i){super(i)}parseInformation(){let i=new ne;return this.getGeneralDecoder().decodeAllCodes(i,Ge.HEADER_SIZE)}}Ge.HEADER_SIZE=5;class at extends Ne{constructor(i){super(i)}encodeCompressedWeight(i,c,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(c,u);this.addWeightCode(i,m);let p=this.checkWeight(m),v=1e5;for(let N=0;N<5;++N)p/v===0&&i.append("0"),v/=10;i.append(p)}}class Be extends at{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Be.HEADER_SIZE+at.GTIN_SIZE+Be.WEIGHT_SIZE)throw new Y;let i=new ne;return this.encodeCompressedGtin(i,Be.HEADER_SIZE),this.encodeCompressedWeight(i,Be.HEADER_SIZE+at.GTIN_SIZE,Be.WEIGHT_SIZE),i.toString()}}Be.HEADER_SIZE=5,Be.WEIGHT_SIZE=15;class Xe extends Be{constructor(i){super(i)}addWeightCode(i,c){i.append("(3103)")}checkWeight(i){return i}}class We extends Be{constructor(i){super(i)}addWeightCode(i,c){c<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ct extends Ne{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ct.HEADER_SIZE+Ne.GTIN_SIZE)throw new Y;let i=new ne;this.encodeCompressedGtin(i,ct.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(ct.HEADER_SIZE+Ne.GTIN_SIZE,ct.LAST_DIGIT_SIZE);i.append("(392"),i.append(c),i.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(ct.HEADER_SIZE+Ne.GTIN_SIZE+ct.LAST_DIGIT_SIZE,null);return i.append(u.getNewString()),i.toString()}}ct.HEADER_SIZE=8,ct.LAST_DIGIT_SIZE=2;class xt extends Ne{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<xt.HEADER_SIZE+Ne.GTIN_SIZE)throw new Y;let i=new ne;this.encodeCompressedGtin(i,xt.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(xt.HEADER_SIZE+Ne.GTIN_SIZE,xt.LAST_DIGIT_SIZE);i.append("(393"),i.append(c),i.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(xt.HEADER_SIZE+Ne.GTIN_SIZE+xt.LAST_DIGIT_SIZE,xt.FIRST_THREE_DIGITS_SIZE);u/100==0&&i.append("0"),u/10==0&&i.append("0"),i.append(u);let m=this.getGeneralDecoder().decodeGeneralPurposeField(xt.HEADER_SIZE+Ne.GTIN_SIZE+xt.LAST_DIGIT_SIZE+xt.FIRST_THREE_DIGITS_SIZE,null);return i.append(m.getNewString()),i.toString()}}xt.HEADER_SIZE=8,xt.LAST_DIGIT_SIZE=2,xt.FIRST_THREE_DIGITS_SIZE=10;class mt extends at{constructor(i,c,u){super(i),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE+mt.DATE_SIZE)throw new Y;let i=new ne;return this.encodeCompressedGtin(i,mt.HEADER_SIZE),this.encodeCompressedWeight(i,mt.HEADER_SIZE+mt.GTIN_SIZE,mt.WEIGHT_SIZE),this.encodeCompressedDate(i,mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,mt.DATE_SIZE);if(u==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let m=u%32;u/=32;let p=u%12+1;u/=12;let v=u;v/10==0&&i.append("0"),i.append(v),p/10==0&&i.append("0"),i.append(p),m/10==0&&i.append("0"),i.append(m)}addWeightCode(i,c){i.append("("),i.append(this.firstAIdigits),i.append(c/1e5),i.append(")")}checkWeight(i){return i%1e5}}mt.HEADER_SIZE=8,mt.WEIGHT_SIZE=20,mt.DATE_SIZE=16;function pt(Q){try{if(Q.get(1))return new Se(Q);if(!Q.get(2))return new Ge(Q);switch(ge.extractNumericValueFromBitArray(Q,1,4)){case 4:return new Xe(Q);case 5:return new We(Q)}switch(ge.extractNumericValueFromBitArray(Q,1,5)){case 12:return new ct(Q);case 13:return new xt(Q)}switch(ge.extractNumericValueFromBitArray(Q,1,7)){case 56:return new mt(Q,"310","11");case 57:return new mt(Q,"320","11");case 58:return new mt(Q,"310","13");case 59:return new mt(Q,"320","13");case 60:return new mt(Q,"310","15");case 61:return new mt(Q,"320","15");case 62:return new mt(Q,"310","17");case 63:return new mt(Q,"320","17")}}catch(i){throw console.log(i),new Ce("unknown decoder: "+Q)}}class bt{constructor(i,c,u,m){this.leftchar=i,this.rightchar=c,this.finderpattern=u,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,c){return i instanceof bt?bt.equalsOrNull(i.leftchar,c.leftchar)&&bt.equalsOrNull(i.rightchar,c.rightchar)&&bt.equalsOrNull(i.finderpattern,c.finderpattern):!1}static equalsOrNull(i,c){return i===null?c===null:bt.equals(i,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pt{constructor(i,c,u){this.pairs=i,this.rowNumber=c,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,c){return i instanceof Pt?this.checkEqualitity(i,c)&&i.wasReversed===c.wasReversed:!1}checkEqualitity(i,c){if(!i||!c)return;let u;return i.forEach((m,p)=>{c.forEach(v=>{m.getLeftChar().getValue()===v.getLeftChar().getValue()&&m.getRightChar().getValue()===v.getRightChar().getValue()&&m.getFinderPatter().getValue()===v.getFinderPatter().getValue()&&(u=!0)})}),u}}class rt extends ea{constructor(i){super(...arguments),this.pairs=new Array(rt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,c,u){this.pairs.length=0,this.startFromEven=!1;try{return rt.constructResult(this.decodeRow2pairs(i,c))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,rt.constructResult(this.decodeRow2pairs(i,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,c){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,i))}catch(p){if(p instanceof Y){if(!this.pairs.length)throw new Y;u=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(i,!1),m){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new Y}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return i&&(this.rows=this.rows.reverse()),c}checkRows(i,c){for(let u=c;u<this.rows.length;u++){let m=this.rows[u];this.pairs.length=0;for(let v of i)this.pairs.push(v.getPairs());if(this.pairs.push(m.getPairs()),!rt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(i);p.push(m);try{return this.checkRows(p,u+1)}catch(v){this.verbose&&console.log(v)}}throw new Y}static isValidSequence(i){for(let c of rt.FINDER_PATTERN_SEQUENCES){if(i.length>c.length)continue;let u=!0;for(let m=0;m<i.length;m++)if(i[m].getFinderPattern().getValue()!=c[m]){u=!1;break}if(u)return!0}return!1}storeRow(i,c){let u=0,m=!1,p=!1;for(;u<this.rows.length;){let v=this.rows[u];if(v.getRowNumber()>i){p=v.isEquivalent(this.pairs);break}m=v.isEquivalent(this.pairs),u++}p||m||rt.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Pt(this.pairs,i,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,c){for(let u of c)if(u.getPairs().length!==i.length){for(let m of u.getPairs())for(let p of i)if(bt.equals(m,p))break}}static isPartialRow(i,c){for(let u of c){let m=!0;for(let p of i){let v=!1;for(let N of u.getPairs())if(p.equals(N)){v=!0;break}if(!v){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(i){let c=ga.buildBitArray(i),m=pt(c).parseInformation(),p=i[0].getFinderPattern().getResultPoints(),v=i[i.length-1].getFinderPattern().getResultPoints(),N=[p[0],p[1],v[0],v[1]];return new se(m,null,null,N,te.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),c=i.getLeftChar(),u=i.getRightChar();if(u==null)return!1;let m=u.getChecksumPortion(),p=2;for(let N=1;N<this.pairs.size();++N){let _=this.pairs.get(N);m+=_.getLeftChar().getChecksumPortion(),p++;let O=_.getRightChar();O!=null&&(m+=O.getChecksumPortion(),p++)}return m%=211,211*(p-4)+m==c.getValue()}static getNextSecondBar(i,c){let u;return i.get(c)?(u=i.getNextUnset(c),u=i.getNextSet(u)):(u=i.getNextSet(c),u=i.getNextUnset(u)),u}retrieveNextPair(i,c,u){let m=c.length%2==0;this.startFromEven&&(m=!m);let p,v=!0,N=-1;do this.findNextPair(i,c,N),p=this.parseFoundFinderPattern(i,u,m),p==null?N=rt.getNextSecondBar(i,this.startEnd[0]):v=!1;while(v);let _=this.decodeDataCharacter(i,p,m,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new Y;let O;try{O=this.decodeDataCharacter(i,p,m,!1)}catch(V){O=null,this.verbose&&console.log(V)}return new bt(_,O,p,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,c,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v;u>=0?v=u:this.isEmptyPair(c)?v=0:v=c[c.length-1].getFinderPattern().getStartEnd()[1];let N=c.length%2!=0;this.startFromEven&&(N=!N);let _=!1;for(;v<p&&(_=!i.get(v),!!_);)v++;let O=0,V=v;for(let J=v;J<p;J++)if(i.get(J)!=_)m[O]++;else{if(O==3){if(N&&rt.reverseCounters(m),rt.isFinderPattern(m)){this.startEnd[0]=V,this.startEnd[1]=J;return}N&&rt.reverseCounters(m),V+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,O--}else O++;m[O]=1,_=!_}throw new Y}static reverseCounters(i){let c=i.length;for(let u=0;u<c/2;++u){let m=i[u];i[u]=i[c-u-1],i[c-u-1]=m}}parseFoundFinderPattern(i,c,u){let m,p,v;if(u){let O=this.startEnd[0]-1;for(;O>=0&&!i.get(O);)O--;O++,m=this.startEnd[0]-O,p=O,v=this.startEnd[1]}else p=this.startEnd[0],v=i.getNextUnset(this.startEnd[1]+1),m=v-this.startEnd[1];let N=this.getDecodeFinderCounters();A.arraycopy(N,0,N,1,N.length-1),N[0]=m;let _;try{_=this.parseFinderValue(N,rt.FINDER_PATTERNS)}catch{return null}return new Vi(_,[p,v],p,v,c)}decodeDataCharacter(i,c,u,m){let p=this.getDataCharacterCounters();for(let Sr=0;Sr<p.length;Sr++)p[Sr]=0;if(m)rt.recordPatternInReverse(i,c.getStartEnd()[0],p);else{rt.recordPattern(i,c.getStartEnd()[1],p);for(let Sr=0,Da=p.length-1;Sr<Da;Sr++,Da--){let as=p[Sr];p[Sr]=p[Da],p[Da]=as}}let v=17,N=fe.sum(new Int32Array(p))/v,_=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(N-_)/_>.3)throw new Y;let O=this.getOddCounts(),V=this.getEvenCounts(),J=this.getOddRoundingErrors(),ue=this.getEvenRoundingErrors();for(let Sr=0;Sr<p.length;Sr++){let Da=1*p[Sr]/N,as=Da+.5;if(as<1){if(Da<.3)throw new Y;as=1}else if(as>8){if(Da>8.7)throw new Y;as=8}let gi=Sr/2;(Sr&1)==0?(O[gi]=as,J[gi]=Da-as):(V[gi]=as,ue[gi]=Da-as)}this.adjustOddEvenCounts(v);let je=4*c.getValue()+(u?0:2)+(m?0:1)-1,De=0,Me=0;for(let Sr=O.length-1;Sr>=0;Sr--){if(rt.isNotA1left(c,u,m)){let Da=rt.WEIGHTS[je][2*Sr];Me+=O[Sr]*Da}De+=O[Sr]}let ze=0;for(let Sr=V.length-1;Sr>=0;Sr--)if(rt.isNotA1left(c,u,m)){let Da=rt.WEIGHTS[je][2*Sr+1];ze+=V[Sr]*Da}let Ke=Me+ze;if((De&1)!=0||De>13||De<4)throw new Y;let ht=(13-De)/2,gt=rt.SYMBOL_WIDEST[ht],ft=9-gt,Kt=oa.getRSSvalue(O,gt,!0),$t=oa.getRSSvalue(V,ft,!1),Ga=rt.EVEN_TOTAL_SUBSET[ht],Ss=rt.GSUM[ht],rs=Kt*Ga+$t+Ss;return new yn(rs,Ke)}static isNotA1left(i,c,u){return!(i.getValue()==0&&c&&u)}adjustOddEvenCounts(i){let c=fe.sum(new Int32Array(this.getOddCounts())),u=fe.sum(new Int32Array(this.getEvenCounts())),m=!1,p=!1;c>13?p=!0:c<4&&(m=!0);let v=!1,N=!1;u>13?N=!0:u<4&&(v=!0);let _=c+u-i,O=(c&1)==1,V=(u&1)==0;if(_==1)if(O){if(V)throw new Y;p=!0}else{if(!V)throw new Y;N=!0}else if(_==-1)if(O){if(V)throw new Y;m=!0}else{if(!V)throw new Y;v=!0}else if(_==0){if(O){if(!V)throw new Y;c<u?(m=!0,N=!0):(p=!0,v=!0)}else if(V)throw new Y}else throw new Y;if(m){if(p)throw new Y;rt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&rt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(N)throw new Y;rt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&rt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}rt.SYMBOL_WIDEST=[7,5,4,3,1],rt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],rt.GSUM=[0,348,1388,2948,3988],rt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],rt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],rt.FINDER_PAT_A=0,rt.FINDER_PAT_B=1,rt.FINDER_PAT_C=2,rt.FINDER_PAT_D=3,rt.FINDER_PAT_E=4,rt.FINDER_PAT_F=5,rt.FINDER_PATTERN_SEQUENCES=[[rt.FINDER_PAT_A,rt.FINDER_PAT_A],[rt.FINDER_PAT_A,rt.FINDER_PAT_B,rt.FINDER_PAT_B],[rt.FINDER_PAT_A,rt.FINDER_PAT_C,rt.FINDER_PAT_B,rt.FINDER_PAT_D],[rt.FINDER_PAT_A,rt.FINDER_PAT_E,rt.FINDER_PAT_B,rt.FINDER_PAT_D,rt.FINDER_PAT_C],[rt.FINDER_PAT_A,rt.FINDER_PAT_E,rt.FINDER_PAT_B,rt.FINDER_PAT_D,rt.FINDER_PAT_D,rt.FINDER_PAT_F],[rt.FINDER_PAT_A,rt.FINDER_PAT_E,rt.FINDER_PAT_B,rt.FINDER_PAT_D,rt.FINDER_PAT_E,rt.FINDER_PAT_F,rt.FINDER_PAT_F],[rt.FINDER_PAT_A,rt.FINDER_PAT_A,rt.FINDER_PAT_B,rt.FINDER_PAT_B,rt.FINDER_PAT_C,rt.FINDER_PAT_C,rt.FINDER_PAT_D,rt.FINDER_PAT_D],[rt.FINDER_PAT_A,rt.FINDER_PAT_A,rt.FINDER_PAT_B,rt.FINDER_PAT_B,rt.FINDER_PAT_C,rt.FINDER_PAT_C,rt.FINDER_PAT_D,rt.FINDER_PAT_E,rt.FINDER_PAT_E],[rt.FINDER_PAT_A,rt.FINDER_PAT_A,rt.FINDER_PAT_B,rt.FINDER_PAT_B,rt.FINDER_PAT_C,rt.FINDER_PAT_C,rt.FINDER_PAT_D,rt.FINDER_PAT_E,rt.FINDER_PAT_F,rt.FINDER_PAT_F],[rt.FINDER_PAT_A,rt.FINDER_PAT_A,rt.FINDER_PAT_B,rt.FINDER_PAT_B,rt.FINDER_PAT_C,rt.FINDER_PAT_D,rt.FINDER_PAT_D,rt.FINDER_PAT_E,rt.FINDER_PAT_E,rt.FINDER_PAT_F,rt.FINDER_PAT_F]],rt.MAX_PAIRS=11;class kr extends yn{constructor(i,c,u){super(i,c),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class zt extends ea{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,c,u){const m=this.decodePair(c,!1,i,u);zt.addOrTally(this.possibleLeftPairs,m),c.reverse();let p=this.decodePair(c,!0,i,u);zt.addOrTally(this.possibleRightPairs,p),c.reverse();for(let v of this.possibleLeftPairs)if(v.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&zt.checkChecksum(v,N))return zt.constructResult(v,N)}throw new Y}static addOrTally(i,c){if(c==null)return;let u=!1;for(let m of i)if(m.getValue()===c.getValue()){m.incrementCount(),u=!0;break}u||i.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,c){let u=4537077*i.getValue()+c.getValue(),m=new String(u).toString(),p=new ne;for(let O=13-m.length;O>0;O--)p.append("0");p.append(m);let v=0;for(let O=0;O<13;O++){let V=p.charAt(O).charCodeAt(0)-48;v+=(O&1)===0?3*V:V}v=10-v%10,v===10&&(v=0),p.append(v.toString());let N=i.getFinderPattern().getResultPoints(),_=c.getFinderPattern().getResultPoints();return new se(p.toString(),null,0,[N[0],N[1],_[0],_[1]],te.RSS_14,new Date().getTime())}static checkChecksum(i,c){let u=(i.getChecksumPortion()+16*c.getChecksumPortion())%79,m=9*i.getFinderPattern().getValue()+c.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,u===m}decodePair(i,c,u,m){try{let p=this.findFinderPattern(i,c),v=this.parseFoundFinderPattern(i,u,c,p),N=m==null?null:m.get(U.NEED_RESULT_POINT_CALLBACK);if(N!=null){let V=(p[0]+p[1])/2;c&&(V=i.getSize()-1-V),N.foundPossibleResultPoint(new Ee(V,u))}let _=this.decodeDataCharacter(i,v,!0),O=this.decodeDataCharacter(i,v,!1);return new kr(1597*_.getValue()+O.getValue(),_.getChecksumPortion()+4*O.getChecksumPortion(),v)}catch{return null}}decodeDataCharacter(i,c,u){let m=this.getDataCharacterCounters();for(let ze=0;ze<m.length;ze++)m[ze]=0;if(u)Nt.recordPatternInReverse(i,c.getStartEnd()[0],m);else{Nt.recordPattern(i,c.getStartEnd()[1]+1,m);for(let ze=0,Ke=m.length-1;ze<Ke;ze++,Ke--){let ht=m[ze];m[ze]=m[Ke],m[Ke]=ht}}let p=u?16:15,v=fe.sum(new Int32Array(m))/p,N=this.getOddCounts(),_=this.getEvenCounts(),O=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let ze=0;ze<m.length;ze++){let Ke=m[ze]/v,ht=Math.floor(Ke+.5);ht<1?ht=1:ht>8&&(ht=8);let gt=Math.floor(ze/2);(ze&1)===0?(N[gt]=ht,O[gt]=Ke-ht):(_[gt]=ht,V[gt]=Ke-ht)}this.adjustOddEvenCounts(u,p);let J=0,ue=0;for(let ze=N.length-1;ze>=0;ze--)ue*=9,ue+=N[ze],J+=N[ze];let je=0,De=0;for(let ze=_.length-1;ze>=0;ze--)je*=9,je+=_[ze],De+=_[ze];let Me=ue+3*je;if(u){if((J&1)!==0||J>12||J<4)throw new Y;let ze=(12-J)/2,Ke=zt.OUTSIDE_ODD_WIDEST[ze],ht=9-Ke,gt=oa.getRSSvalue(N,Ke,!1),ft=oa.getRSSvalue(_,ht,!0),Kt=zt.OUTSIDE_EVEN_TOTAL_SUBSET[ze],$t=zt.OUTSIDE_GSUM[ze];return new yn(gt*Kt+ft+$t,Me)}else{if((De&1)!==0||De>10||De<4)throw new Y;let ze=(10-De)/2,Ke=zt.INSIDE_ODD_WIDEST[ze],ht=9-Ke,gt=oa.getRSSvalue(N,Ke,!0),ft=oa.getRSSvalue(_,ht,!1),Kt=zt.INSIDE_ODD_TOTAL_SUBSET[ze],$t=zt.INSIDE_GSUM[ze];return new yn(ft*Kt+gt+$t,Me)}}findFinderPattern(i,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let m=i.getSize(),p=!1,v=0;for(;v<m&&(p=!i.get(v),c!==p);)v++;let N=0,_=v;for(let O=v;O<m;O++)if(i.get(O)!==p)u[N]++;else{if(N===3){if(ea.isFinderPattern(u))return[_,O];_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,N--}else N++;u[N]=1,p=!p}throw new Y}parseFoundFinderPattern(i,c,u,m){let p=i.get(m[0]),v=m[0]-1;for(;v>=0&&p!==i.get(v);)v--;v++;const N=m[0]-v,_=this.getDecodeFinderCounters(),O=new Int32Array(_.length);A.arraycopy(_,0,O,1,_.length-1),O[0]=N;const V=this.parseFinderValue(O,zt.FINDER_PATTERNS);let J=v,ue=m[1];return u&&(J=i.getSize()-1-J,ue=i.getSize()-1-ue),new Vi(V,[v,m[1]],J,ue,c)}adjustOddEvenCounts(i,c){let u=fe.sum(new Int32Array(this.getOddCounts())),m=fe.sum(new Int32Array(this.getEvenCounts())),p=!1,v=!1,N=!1,_=!1;i?(u>12?v=!0:u<4&&(p=!0),m>12?_=!0:m<4&&(N=!0)):(u>11?v=!0:u<5&&(p=!0),m>10?_=!0:m<4&&(N=!0));let O=u+m-c,V=(u&1)===(i?1:0),J=(m&1)===1;if(O===1)if(V){if(J)throw new Y;v=!0}else{if(!J)throw new Y;_=!0}else if(O===-1)if(V){if(J)throw new Y;p=!0}else{if(!J)throw new Y;N=!0}else if(O===0){if(V){if(!J)throw new Y;u<m?(p=!0,_=!0):(v=!0,N=!0)}else if(J)throw new Y}else throw new Y;if(p){if(v)throw new Y;ea.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&ea.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(_)throw new Y;ea.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&ea.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}zt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],zt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],zt.OUTSIDE_GSUM=[0,161,961,2015,2715],zt.INSIDE_GSUM=[0,336,1036,1516],zt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],zt.INSIDE_ODD_WIDEST=[2,4,6,8],zt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Qa extends Nt{constructor(i,c){super(),this.readers=[],this.verbose=c===!0;const u=i?i.get(U.POSSIBLE_FORMATS):null,m=i&&i.get(U.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(te.EAN_13)||u.includes(te.UPC_A)||u.includes(te.EAN_8)||u.includes(te.UPC_E))&&this.readers.push(new ui(i)),u.includes(te.CODE_39)&&this.readers.push(new At(m)),u.includes(te.CODE_128)&&this.readers.push(new lt),u.includes(te.ITF)&&this.readers.push(new vt),u.includes(te.RSS_14)&&this.readers.push(new zt),u.includes(te.RSS_EXPANDED)&&this.readers.push(new rt(this.verbose))):(this.readers.push(new ui(i)),this.readers.push(new At),this.readers.push(new ui(i)),this.readers.push(new lt),this.readers.push(new vt),this.readers.push(new zt),this.readers.push(new rt(this.verbose)))}decodeRow(i,c,u){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(i,c,u)}catch{}throw new Y}reset(){this.readers.forEach(i=>i.reset())}}class Ln extends K{constructor(i=500,c){super(new Qa(c),i,c)}}class Qt{constructor(i,c,u){this.ecCodewords=i,this.ecBlocks=[c],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Jt{constructor(i,c){this.count=i,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class er{constructor(i,c,u,m,p,v){this.versionNumber=i,this.symbolSizeRows=c,this.symbolSizeColumns=u,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=p,this.ecBlocks=v;let N=0;const _=v.getECCodewords(),O=v.getECBlocks();for(let V of O)N+=V.getCount()*(V.getDataCodewords()+_);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,c){if((i&1)!==0||(c&1)!==0)throw new L;for(let u of er.VERSIONS)if(u.symbolSizeRows===i&&u.symbolSizeColumns===c)return u;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new er(1,10,10,8,8,new Qt(5,new Jt(1,3))),new er(2,12,12,10,10,new Qt(7,new Jt(1,5))),new er(3,14,14,12,12,new Qt(10,new Jt(1,8))),new er(4,16,16,14,14,new Qt(12,new Jt(1,12))),new er(5,18,18,16,16,new Qt(14,new Jt(1,18))),new er(6,20,20,18,18,new Qt(18,new Jt(1,22))),new er(7,22,22,20,20,new Qt(20,new Jt(1,30))),new er(8,24,24,22,22,new Qt(24,new Jt(1,36))),new er(9,26,26,24,24,new Qt(28,new Jt(1,44))),new er(10,32,32,14,14,new Qt(36,new Jt(1,62))),new er(11,36,36,16,16,new Qt(42,new Jt(1,86))),new er(12,40,40,18,18,new Qt(48,new Jt(1,114))),new er(13,44,44,20,20,new Qt(56,new Jt(1,144))),new er(14,48,48,22,22,new Qt(68,new Jt(1,174))),new er(15,52,52,24,24,new Qt(42,new Jt(2,102))),new er(16,64,64,14,14,new Qt(56,new Jt(2,140))),new er(17,72,72,16,16,new Qt(36,new Jt(4,92))),new er(18,80,80,18,18,new Qt(48,new Jt(4,114))),new er(19,88,88,20,20,new Qt(56,new Jt(4,144))),new er(20,96,96,22,22,new Qt(68,new Jt(4,174))),new er(21,104,104,24,24,new Qt(56,new Jt(6,136))),new er(22,120,120,18,18,new Qt(68,new Jt(6,175))),new er(23,132,132,20,20,new Qt(62,new Jt(8,163))),new er(24,144,144,22,22,new Qt(62,new Jt(8,156),new Jt(2,155))),new er(25,8,18,6,16,new Qt(7,new Jt(1,5))),new er(26,8,32,6,14,new Qt(11,new Jt(1,10))),new er(27,12,26,10,24,new Qt(14,new Jt(1,16))),new er(28,12,36,10,16,new Qt(18,new Jt(1,22))),new er(29,16,36,14,16,new Qt(24,new Jt(1,32))),new er(30,16,48,14,22,new Qt(28,new Jt(1,49)))]}}er.VERSIONS=er.buildVersions();class ms{constructor(i){const c=i.getHeight();if(c<8||c>144||(c&1)!==0)throw new L;this.version=ms.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new le(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const c=i.getHeight(),u=i.getWidth();return er.getVersionForDimensions(c,u)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let c=0,u=4,m=0;const p=this.mappingBitMatrix.getHeight(),v=this.mappingBitMatrix.getWidth();let N=!1,_=!1,O=!1,V=!1;do if(u===p&&m===0&&!N)i[c++]=this.readCorner1(p,v)&255,u-=2,m+=2,N=!0;else if(u===p-2&&m===0&&(v&3)!==0&&!_)i[c++]=this.readCorner2(p,v)&255,u-=2,m+=2,_=!0;else if(u===p+4&&m===2&&(v&7)===0&&!O)i[c++]=this.readCorner3(p,v)&255,u-=2,m+=2,O=!0;else if(u===p-2&&m===0&&(v&7)===4&&!V)i[c++]=this.readCorner4(p,v)&255,u-=2,m+=2,V=!0;else{do u<p&&m>=0&&!this.readMappingMatrix.get(m,u)&&(i[c++]=this.readUtah(u,m,p,v)&255),u-=2,m+=2;while(u>=0&&m<v);u+=1,m+=3;do u>=0&&m<v&&!this.readMappingMatrix.get(m,u)&&(i[c++]=this.readUtah(u,m,p,v)&255),u+=2,m-=2;while(u<p&&m>=0);u+=3,m+=1}while(u<p||m<v);if(c!==this.version.getTotalCodewords())throw new L;return i}readModule(i,c,u,m){return i<0&&(i+=u,c+=4-(u+4&7)),c<0&&(c+=m,i+=4-(m+4&7)),this.readMappingMatrix.set(c,i),this.mappingBitMatrix.get(c,i)}readUtah(i,c,u,m){let p=0;return this.readModule(i-2,c-2,u,m)&&(p|=1),p<<=1,this.readModule(i-2,c-1,u,m)&&(p|=1),p<<=1,this.readModule(i-1,c-2,u,m)&&(p|=1),p<<=1,this.readModule(i-1,c-1,u,m)&&(p|=1),p<<=1,this.readModule(i-1,c,u,m)&&(p|=1),p<<=1,this.readModule(i,c-2,u,m)&&(p|=1),p<<=1,this.readModule(i,c-1,u,m)&&(p|=1),p<<=1,this.readModule(i,c,u,m)&&(p|=1),p}readCorner1(i,c){let u=0;return this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,1,i,c)&&(u|=1),u<<=1,this.readModule(i-1,2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u<<=1,this.readModule(2,c-1,i,c)&&(u|=1),u<<=1,this.readModule(3,c-1,i,c)&&(u|=1),u}readCorner2(i,c){let u=0;return this.readModule(i-3,0,i,c)&&(u|=1),u<<=1,this.readModule(i-2,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(0,c-4,i,c)&&(u|=1),u<<=1,this.readModule(0,c-3,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u}readCorner3(i,c){let u=0;return this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,c-1,i,c)&&(u|=1),u<<=1,this.readModule(0,c-3,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-3,i,c)&&(u|=1),u<<=1,this.readModule(1,c-2,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u}readCorner4(i,c){let u=0;return this.readModule(i-3,0,i,c)&&(u|=1),u<<=1,this.readModule(i-2,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u<<=1,this.readModule(2,c-1,i,c)&&(u|=1),u<<=1,this.readModule(3,c-1,i,c)&&(u|=1),u}extractDataRegion(i){const c=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(i.getHeight()!==c)throw new k("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),v=c/m|0,N=u/p|0,_=v*m,O=N*p,V=new le(O,_);for(let J=0;J<v;++J){const ue=J*m;for(let je=0;je<N;++je){const De=je*p;for(let Me=0;Me<m;++Me){const ze=J*(m+2)+1+Me,Ke=ue+Me;for(let ht=0;ht<p;++ht){const gt=je*(p+2)+1+ht;if(i.get(gt,ze)){const ft=De+ht;V.set(ft,Ke)}}}}}return V}}class To{constructor(i,c){this.numDataCodewords=i,this.codewords=c}static getDataBlocks(i,c){const u=c.getECBlocks();let m=0;const p=u.getECBlocks();for(let Me of p)m+=Me.getCount();const v=new Array(m);let N=0;for(let Me of p)for(let ze=0;ze<Me.getCount();ze++){const Ke=Me.getDataCodewords(),ht=u.getECCodewords()+Ke;v[N++]=new To(Ke,new Uint8Array(ht))}const O=v[0].codewords.length-u.getECCodewords(),V=O-1;let J=0;for(let Me=0;Me<V;Me++)for(let ze=0;ze<N;ze++)v[ze].codewords[Me]=i[J++];const ue=c.getVersionNumber()===24,je=ue?8:N;for(let Me=0;Me<je;Me++)v[Me].codewords[O-1]=i[J++];const De=v[0].codewords.length;for(let Me=O;Me<De;Me++)for(let ze=0;ze<N;ze++){const Ke=ue?(ze+8)%N:ze,ht=ue&&Ke>7?Me-1:Me;v[Ke].codewords[ht]=i[J++]}if(J!==i.length)throw new k;return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ja{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new k(""+i);let c=0,u=this.bitOffset,m=this.byteOffset;const p=this.bytes;if(u>0){const v=8-u,N=i<v?i:v,_=v-N,O=255>>8-N<<_;c=(p[m]&O)>>_,i-=N,u+=N,u===8&&(u=0,m++)}if(i>0){for(;i>=8;)c=c<<8|p[m]&255,m++,i-=8;if(i>0){const v=8-i,N=255>>v<<v;c=c<<i|(p[m]&N)>>v,u+=i}}return this.bitOffset=u,this.byteOffset=m,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ta;(function(Q){Q[Q.PAD_ENCODE=0]="PAD_ENCODE",Q[Q.ASCII_ENCODE=1]="ASCII_ENCODE",Q[Q.C40_ENCODE=2]="C40_ENCODE",Q[Q.TEXT_ENCODE=3]="TEXT_ENCODE",Q[Q.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",Q[Q.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",Q[Q.BASE256_ENCODE=6]="BASE256_ENCODE"})(ta||(ta={}));class Pn{static decode(i){const c=new Ja(i),u=new ne,m=new ne,p=new Array;let v=ta.ASCII_ENCODE;do if(v===ta.ASCII_ENCODE)v=this.decodeAsciiSegment(c,u,m);else{switch(v){case ta.C40_ENCODE:this.decodeC40Segment(c,u);break;case ta.TEXT_ENCODE:this.decodeTextSegment(c,u);break;case ta.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,u);break;case ta.EDIFACT_ENCODE:this.decodeEdifactSegment(c,u);break;case ta.BASE256_ENCODE:this.decodeBase256Segment(c,u,p);break;default:throw new L}v=ta.ASCII_ENCODE}while(v!==ta.PAD_ENCODE&&c.available()>0);return m.length()>0&&u.append(m.toString()),new Ve(i,u.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(i,c,u){let m=!1;do{let p=i.readBits(8);if(p===0)throw new L;if(p<=128)return m&&(p+=128),c.append(String.fromCharCode(p-1)),ta.ASCII_ENCODE;if(p===129)return ta.PAD_ENCODE;if(p<=229){const v=p-130;v<10&&c.append("0"),c.append(""+v)}else switch(p){case 230:return ta.C40_ENCODE;case 231:return ta.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:c.append("[)>05"),u.insert(0,"");break;case 237:c.append("[)>06"),u.insert(0,"");break;case 238:return ta.ANSIX12_ENCODE;case 239:return ta.TEXT_ENCODE;case 240:return ta.EDIFACT_ENCODE;case 241:break;default:if(p!==254||i.available()!==0)throw new L;break}}while(i.available()>0);return ta.ASCII_ENCODE}static decodeC40Segment(i,c){let u=!1;const m=[];let p=0;do{if(i.available()===8)return;const v=i.readBits(8);if(v===254)return;this.parseTwoBytes(v,i.readBits(8),m);for(let N=0;N<3;N++){const _=m[N];switch(p){case 0:if(_<3)p=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const O=this.C40_BASIC_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else throw new L;break;case 1:u?(c.append(String.fromCharCode(_+128)),u=!1):c.append(String.fromCharCode(_)),p=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const O=this.C40_SHIFT2_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else switch(_){case 27:c.append("");break;case 30:u=!0;break;default:throw new L}p=0;break;case 3:u?(c.append(String.fromCharCode(_+224)),u=!1):c.append(String.fromCharCode(_+96)),p=0;break;default:throw new L}}}while(i.available()>0)}static decodeTextSegment(i,c){let u=!1,m=[],p=0;do{if(i.available()===8)return;const v=i.readBits(8);if(v===254)return;this.parseTwoBytes(v,i.readBits(8),m);for(let N=0;N<3;N++){const _=m[N];switch(p){case 0:if(_<3)p=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const O=this.TEXT_BASIC_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else throw new L;break;case 1:u?(c.append(String.fromCharCode(_+128)),u=!1):c.append(String.fromCharCode(_)),p=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const O=this.TEXT_SHIFT2_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else switch(_){case 27:c.append("");break;case 30:u=!0;break;default:throw new L}p=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const O=this.TEXT_SHIFT3_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O),p=0}else throw new L;break;default:throw new L}}}while(i.available()>0)}static decodeAnsiX12Segment(i,c){const u=[];do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),u);for(let p=0;p<3;p++){const v=u[p];switch(v){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(v<14)c.append(String.fromCharCode(v+44));else if(v<40)c.append(String.fromCharCode(v+51));else throw new L;break}}}while(i.available()>0)}static parseTwoBytes(i,c,u){let m=(i<<8)+c-1,p=Math.floor(m/1600);u[0]=p,m-=p*1600,p=Math.floor(m/40),u[1]=p,u[2]=m-p*40}static decodeEdifactSegment(i,c){do{if(i.available()<=16)return;for(let u=0;u<4;u++){let m=i.readBits(6);if(m===31){const p=8-i.getBitOffset();p!==8&&i.readBits(p);return}(m&32)===0&&(m|=64),c.append(String.fromCharCode(m))}}while(i.available()>0)}static decodeBase256Segment(i,c,u){let m=1+i.getByteOffset();const p=this.unrandomize255State(i.readBits(8),m++);let v;if(p===0?v=i.available()/8|0:p<250?v=p:v=250*(p-249)+this.unrandomize255State(i.readBits(8),m++),v<0)throw new L;const N=new Uint8Array(v);for(let _=0;_<v;_++){if(i.available()<8)throw new L;N[_]=this.unrandomize255State(i.readBits(8),m++)}u.push(N);try{c.append(ee.decode(N,G.ISO88591))}catch(_){throw new Ce("Platform does not support required encoding: "+_.message)}}static unrandomize255State(i,c){const u=149*c%255+1,m=i-u;return m>=0?m:m+256}}Pn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Pn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Pn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Pn.TEXT_SHIFT2_SET_CHARS=Pn.C40_SHIFT2_SET_CHARS,Pn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Do{constructor(){this.rsDecoder=new Je(Ae.DATA_MATRIX_FIELD_256)}decode(i){const c=new ms(i),u=c.getVersion(),m=c.readCodewords(),p=To.getDataBlocks(m,u);let v=0;for(let O of p)v+=O.getNumDataCodewords();const N=new Uint8Array(v),_=p.length;for(let O=0;O<_;O++){const V=p[O],J=V.getCodewords(),ue=V.getNumDataCodewords();this.correctErrors(J,ue);for(let je=0;je<ue;je++)N[je*_+O]=J[je]}return Pn.decode(N)}correctErrors(i,c){const u=new Int32Array(i);try{this.rsDecoder.decode(u,i.length-c)}catch{throw new S}for(let m=0;m<c;m++)i[m]=u[m]}}class Xr{constructor(i){this.image=i,this.rectangleDetector=new Et(this.image)}detect(){const i=this.rectangleDetector.detect();let c=this.detectSolid1(i);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new Y;c=this.shiftToModuleCenter(c);const u=c[0],m=c[1],p=c[2],v=c[3];let N=this.transitionsBetween(u,v)+1,_=this.transitionsBetween(p,v)+1;(N&1)===1&&(N+=1),(_&1)===1&&(_+=1),4*N<7*_&&4*_<7*N&&(N=_=Math.max(N,_));let O=Xr.sampleGrid(this.image,u,m,p,v,N,_);return new wt(O,[u,m,p,v])}static shiftPoint(i,c,u){let m=(c.getX()-i.getX())/(u+1),p=(c.getY()-i.getY())/(u+1);return new Ee(i.getX()+m,i.getY()+p)}static moveAway(i,c,u){let m=i.getX(),p=i.getY();return m<c?m-=1:m+=1,p<u?p-=1:p+=1,new Ee(m,p)}detectSolid1(i){let c=i[0],u=i[1],m=i[3],p=i[2],v=this.transitionsBetween(c,u),N=this.transitionsBetween(u,m),_=this.transitionsBetween(m,p),O=this.transitionsBetween(p,c),V=v,J=[p,c,u,m];return V>N&&(V=N,J[0]=c,J[1]=u,J[2]=m,J[3]=p),V>_&&(V=_,J[0]=u,J[1]=m,J[2]=p,J[3]=c),V>O&&(J[0]=m,J[1]=p,J[2]=c,J[3]=u),J}detectSolid2(i){let c=i[0],u=i[1],m=i[2],p=i[3],v=this.transitionsBetween(c,p),N=Xr.shiftPoint(u,m,(v+1)*4),_=Xr.shiftPoint(m,u,(v+1)*4),O=this.transitionsBetween(N,c),V=this.transitionsBetween(_,p);return O<V?(i[0]=c,i[1]=u,i[2]=m,i[3]=p):(i[0]=u,i[1]=m,i[2]=p,i[3]=c),i}correctTopRight(i){let c=i[0],u=i[1],m=i[2],p=i[3],v=this.transitionsBetween(c,p),N=this.transitionsBetween(u,p),_=Xr.shiftPoint(c,u,(N+1)*4),O=Xr.shiftPoint(m,u,(v+1)*4);v=this.transitionsBetween(_,p),N=this.transitionsBetween(O,p);let V=new Ee(p.getX()+(m.getX()-u.getX())/(v+1),p.getY()+(m.getY()-u.getY())/(v+1)),J=new Ee(p.getX()+(c.getX()-u.getX())/(N+1),p.getY()+(c.getY()-u.getY())/(N+1));if(!this.isValid(V))return this.isValid(J)?J:null;if(!this.isValid(J))return V;let ue=this.transitionsBetween(_,V)+this.transitionsBetween(O,V),je=this.transitionsBetween(_,J)+this.transitionsBetween(O,J);return ue>je?V:J}shiftToModuleCenter(i){let c=i[0],u=i[1],m=i[2],p=i[3],v=this.transitionsBetween(c,p)+1,N=this.transitionsBetween(m,p)+1,_=Xr.shiftPoint(c,u,N*4),O=Xr.shiftPoint(m,u,v*4);v=this.transitionsBetween(_,p)+1,N=this.transitionsBetween(O,p)+1,(v&1)===1&&(v+=1),(N&1)===1&&(N+=1);let V=(c.getX()+u.getX()+m.getX()+p.getX())/4,J=(c.getY()+u.getY()+m.getY()+p.getY())/4;c=Xr.moveAway(c,V,J),u=Xr.moveAway(u,V,J),m=Xr.moveAway(m,V,J),p=Xr.moveAway(p,V,J);let ue,je;return _=Xr.shiftPoint(c,u,N*4),_=Xr.shiftPoint(_,p,v*4),ue=Xr.shiftPoint(u,c,N*4),ue=Xr.shiftPoint(ue,m,v*4),O=Xr.shiftPoint(m,p,N*4),O=Xr.shiftPoint(O,u,v*4),je=Xr.shiftPoint(p,m,N*4),je=Xr.shiftPoint(je,c,v*4),[_,ue,O,je]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,c,u,m,p,v,N){return Ut.getInstance().sampleGrid(i,v,N,.5,.5,v-.5,.5,v-.5,N-.5,.5,N-.5,c.getX(),c.getY(),p.getX(),p.getY(),m.getX(),m.getY(),u.getX(),u.getY())}transitionsBetween(i,c){let u=Math.trunc(i.getX()),m=Math.trunc(i.getY()),p=Math.trunc(c.getX()),v=Math.trunc(c.getY()),N=Math.abs(v-m)>Math.abs(p-u);if(N){let Me=u;u=m,m=Me,Me=p,p=v,v=Me}let _=Math.abs(p-u),O=Math.abs(v-m),V=-_/2,J=m<v?1:-1,ue=u<p?1:-1,je=0,De=this.image.get(N?m:u,N?u:m);for(let Me=u,ze=m;Me!==p;Me+=ue){let Ke=this.image.get(N?ze:Me,N?Me:ze);if(Ke!==De&&(je++,De=Ke),V+=O,V>0){if(ze===v)break;ze+=J,V-=_}}return je}}class Fs{constructor(){this.decoder=new Do}decode(i,c=null){let u,m;if(c!=null&&c.has(U.PURE_BARCODE)){const O=Fs.extractPureBits(i.getBlackMatrix());u=this.decoder.decode(O),m=Fs.NO_POINTS}else{const O=new Xr(i.getBlackMatrix()).detect();u=this.decoder.decode(O.getBits()),m=O.getPoints()}const p=u.getRawBytes(),v=new se(u.getText(),p,8*p.length,m,te.DATA_MATRIX,A.currentTimeMillis()),N=u.getByteSegments();N!=null&&v.putMetadata(ke.BYTE_SEGMENTS,N);const _=u.getECLevel();return _!=null&&v.putMetadata(ke.ERROR_CORRECTION_LEVEL,_),v}reset(){}static extractPureBits(i){const c=i.getTopLeftOnBit(),u=i.getBottomRightOnBit();if(c==null||u==null)throw new Y;const m=this.moduleSize(c,i);let p=c[1];const v=u[1];let N=c[0];const O=(u[0]-N+1)/m,V=(v-p+1)/m;if(O<=0||V<=0)throw new Y;const J=m/2;p+=J,N+=J;const ue=new le(O,V);for(let je=0;je<V;je++){const De=p+je*m;for(let Me=0;Me<O;Me++)i.get(N+Me*m,De)&&ue.set(Me,je)}return ue}static moduleSize(i,c){const u=c.getWidth();let m=i[0];const p=i[1];for(;m<u&&c.get(m,p);)m++;if(m===u)throw new Y;const v=m-i[0];if(v===0)throw new Y;return v}}Fs.NO_POINTS=[];class Mf extends K{constructor(i=500){super(new Fs,i)}}var Sa;(function(Q){Q[Q.L=0]="L",Q[Q.M=1]="M",Q[Q.Q=2]="Q",Q[Q.H=3]="H"})(Sa||(Sa={}));class jr{constructor(i,c,u){this.value=i,this.stringValue=c,this.bits=u,jr.FOR_BITS.set(u,this),jr.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return jr.L;case"M":return jr.M;case"Q":return jr.Q;case"H":return jr.H;default:throw new w(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof jr))return!1;const c=i;return this.value===c.value}static forBits(i){if(i<0||i>=jr.FOR_BITS.size)throw new k;return jr.FOR_BITS.get(i)}}jr.FOR_BITS=new Map,jr.FOR_VALUE=new Map,jr.L=new jr(Sa.L,"L",1),jr.M=new jr(Sa.M,"M",0),jr.Q=new jr(Sa.Q,"Q",3),jr.H=new jr(Sa.H,"H",2);class Aa{constructor(i){this.errorCorrectionLevel=jr.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,c){return T.bitCount(i^c)}static decodeFormatInformation(i,c){const u=Aa.doDecodeFormatInformation(i,c);return u!==null?u:Aa.doDecodeFormatInformation(i^Aa.FORMAT_INFO_MASK_QR,c^Aa.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,c){let u=Number.MAX_SAFE_INTEGER,m=0;for(const p of Aa.FORMAT_INFO_DECODE_LOOKUP){const v=p[0];if(v===i||v===c)return new Aa(p[1]);let N=Aa.numBitsDiffering(i,v);N<u&&(m=p[1],u=N),i!==c&&(N=Aa.numBitsDiffering(c,v),N<u&&(m=p[1],u=N))}return u<=3?new Aa(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Aa))return!1;const c=i;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Aa.FORMAT_INFO_MASK_QR=21522,Aa.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Ue{constructor(i,...c){this.ecCodewordsPerBlock=i,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const c=this.ecBlocks;for(const u of c)i+=u.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class pe{constructor(i,c){this.count=i,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(i,c,...u){this.versionNumber=i,this.alignmentPatternCenters=c,this.ecBlocks=u;let m=0;const p=u[0].getECCodewordsPerBlock(),v=u[0].getECBlocks();for(const N of v)m+=N.getCount()*(N.getDataCodewords()+p);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new L;try{return this.getVersionForNumber((i-17)/4)}catch{throw new L}}static getVersionForNumber(i){if(i<1||i>40)throw new k;return Tt.VERSIONS[i-1]}static decodeVersionInformation(i){let c=Number.MAX_SAFE_INTEGER,u=0;for(let m=0;m<Tt.VERSION_DECODE_INFO.length;m++){const p=Tt.VERSION_DECODE_INFO[m];if(p===i)return Tt.getVersionForNumber(m+7);const v=Aa.numBitsDiffering(i,p);v<c&&(u=m+7,c=v)}return c<=3?Tt.getVersionForNumber(u):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),c=new le(i);c.setRegion(0,0,9,9),c.setRegion(i-8,0,8,9),c.setRegion(0,i-8,9,8);const u=this.alignmentPatternCenters.length;for(let m=0;m<u;m++){const p=this.alignmentPatternCenters[m]-2;for(let v=0;v<u;v++)m===0&&(v===0||v===u-1)||m===u-1&&v===0||c.setRegion(this.alignmentPatternCenters[v]-2,p,5,5)}return c.setRegion(6,9,1,i-17),c.setRegion(9,6,i-17,1),this.versionNumber>6&&(c.setRegion(i-11,0,3,6),c.setRegion(0,i-11,6,3)),c}toString(){return""+this.versionNumber}}Tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Tt.VERSIONS=[new Tt(1,new Int32Array(0),new Ue(7,new pe(1,19)),new Ue(10,new pe(1,16)),new Ue(13,new pe(1,13)),new Ue(17,new pe(1,9))),new Tt(2,Int32Array.from([6,18]),new Ue(10,new pe(1,34)),new Ue(16,new pe(1,28)),new Ue(22,new pe(1,22)),new Ue(28,new pe(1,16))),new Tt(3,Int32Array.from([6,22]),new Ue(15,new pe(1,55)),new Ue(26,new pe(1,44)),new Ue(18,new pe(2,17)),new Ue(22,new pe(2,13))),new Tt(4,Int32Array.from([6,26]),new Ue(20,new pe(1,80)),new Ue(18,new pe(2,32)),new Ue(26,new pe(2,24)),new Ue(16,new pe(4,9))),new Tt(5,Int32Array.from([6,30]),new Ue(26,new pe(1,108)),new Ue(24,new pe(2,43)),new Ue(18,new pe(2,15),new pe(2,16)),new Ue(22,new pe(2,11),new pe(2,12))),new Tt(6,Int32Array.from([6,34]),new Ue(18,new pe(2,68)),new Ue(16,new pe(4,27)),new Ue(24,new pe(4,19)),new Ue(28,new pe(4,15))),new Tt(7,Int32Array.from([6,22,38]),new Ue(20,new pe(2,78)),new Ue(18,new pe(4,31)),new Ue(18,new pe(2,14),new pe(4,15)),new Ue(26,new pe(4,13),new pe(1,14))),new Tt(8,Int32Array.from([6,24,42]),new Ue(24,new pe(2,97)),new Ue(22,new pe(2,38),new pe(2,39)),new Ue(22,new pe(4,18),new pe(2,19)),new Ue(26,new pe(4,14),new pe(2,15))),new Tt(9,Int32Array.from([6,26,46]),new Ue(30,new pe(2,116)),new Ue(22,new pe(3,36),new pe(2,37)),new Ue(20,new pe(4,16),new pe(4,17)),new Ue(24,new pe(4,12),new pe(4,13))),new Tt(10,Int32Array.from([6,28,50]),new Ue(18,new pe(2,68),new pe(2,69)),new Ue(26,new pe(4,43),new pe(1,44)),new Ue(24,new pe(6,19),new pe(2,20)),new Ue(28,new pe(6,15),new pe(2,16))),new Tt(11,Int32Array.from([6,30,54]),new Ue(20,new pe(4,81)),new Ue(30,new pe(1,50),new pe(4,51)),new Ue(28,new pe(4,22),new pe(4,23)),new Ue(24,new pe(3,12),new pe(8,13))),new Tt(12,Int32Array.from([6,32,58]),new Ue(24,new pe(2,92),new pe(2,93)),new Ue(22,new pe(6,36),new pe(2,37)),new Ue(26,new pe(4,20),new pe(6,21)),new Ue(28,new pe(7,14),new pe(4,15))),new Tt(13,Int32Array.from([6,34,62]),new Ue(26,new pe(4,107)),new Ue(22,new pe(8,37),new pe(1,38)),new Ue(24,new pe(8,20),new pe(4,21)),new Ue(22,new pe(12,11),new pe(4,12))),new Tt(14,Int32Array.from([6,26,46,66]),new Ue(30,new pe(3,115),new pe(1,116)),new Ue(24,new pe(4,40),new pe(5,41)),new Ue(20,new pe(11,16),new pe(5,17)),new Ue(24,new pe(11,12),new pe(5,13))),new Tt(15,Int32Array.from([6,26,48,70]),new Ue(22,new pe(5,87),new pe(1,88)),new Ue(24,new pe(5,41),new pe(5,42)),new Ue(30,new pe(5,24),new pe(7,25)),new Ue(24,new pe(11,12),new pe(7,13))),new Tt(16,Int32Array.from([6,26,50,74]),new Ue(24,new pe(5,98),new pe(1,99)),new Ue(28,new pe(7,45),new pe(3,46)),new Ue(24,new pe(15,19),new pe(2,20)),new Ue(30,new pe(3,15),new pe(13,16))),new Tt(17,Int32Array.from([6,30,54,78]),new Ue(28,new pe(1,107),new pe(5,108)),new Ue(28,new pe(10,46),new pe(1,47)),new Ue(28,new pe(1,22),new pe(15,23)),new Ue(28,new pe(2,14),new pe(17,15))),new Tt(18,Int32Array.from([6,30,56,82]),new Ue(30,new pe(5,120),new pe(1,121)),new Ue(26,new pe(9,43),new pe(4,44)),new Ue(28,new pe(17,22),new pe(1,23)),new Ue(28,new pe(2,14),new pe(19,15))),new Tt(19,Int32Array.from([6,30,58,86]),new Ue(28,new pe(3,113),new pe(4,114)),new Ue(26,new pe(3,44),new pe(11,45)),new Ue(26,new pe(17,21),new pe(4,22)),new Ue(26,new pe(9,13),new pe(16,14))),new Tt(20,Int32Array.from([6,34,62,90]),new Ue(28,new pe(3,107),new pe(5,108)),new Ue(26,new pe(3,41),new pe(13,42)),new Ue(30,new pe(15,24),new pe(5,25)),new Ue(28,new pe(15,15),new pe(10,16))),new Tt(21,Int32Array.from([6,28,50,72,94]),new Ue(28,new pe(4,116),new pe(4,117)),new Ue(26,new pe(17,42)),new Ue(28,new pe(17,22),new pe(6,23)),new Ue(30,new pe(19,16),new pe(6,17))),new Tt(22,Int32Array.from([6,26,50,74,98]),new Ue(28,new pe(2,111),new pe(7,112)),new Ue(28,new pe(17,46)),new Ue(30,new pe(7,24),new pe(16,25)),new Ue(24,new pe(34,13))),new Tt(23,Int32Array.from([6,30,54,78,102]),new Ue(30,new pe(4,121),new pe(5,122)),new Ue(28,new pe(4,47),new pe(14,48)),new Ue(30,new pe(11,24),new pe(14,25)),new Ue(30,new pe(16,15),new pe(14,16))),new Tt(24,Int32Array.from([6,28,54,80,106]),new Ue(30,new pe(6,117),new pe(4,118)),new Ue(28,new pe(6,45),new pe(14,46)),new Ue(30,new pe(11,24),new pe(16,25)),new Ue(30,new pe(30,16),new pe(2,17))),new Tt(25,Int32Array.from([6,32,58,84,110]),new Ue(26,new pe(8,106),new pe(4,107)),new Ue(28,new pe(8,47),new pe(13,48)),new Ue(30,new pe(7,24),new pe(22,25)),new Ue(30,new pe(22,15),new pe(13,16))),new Tt(26,Int32Array.from([6,30,58,86,114]),new Ue(28,new pe(10,114),new pe(2,115)),new Ue(28,new pe(19,46),new pe(4,47)),new Ue(28,new pe(28,22),new pe(6,23)),new Ue(30,new pe(33,16),new pe(4,17))),new Tt(27,Int32Array.from([6,34,62,90,118]),new Ue(30,new pe(8,122),new pe(4,123)),new Ue(28,new pe(22,45),new pe(3,46)),new Ue(30,new pe(8,23),new pe(26,24)),new Ue(30,new pe(12,15),new pe(28,16))),new Tt(28,Int32Array.from([6,26,50,74,98,122]),new Ue(30,new pe(3,117),new pe(10,118)),new Ue(28,new pe(3,45),new pe(23,46)),new Ue(30,new pe(4,24),new pe(31,25)),new Ue(30,new pe(11,15),new pe(31,16))),new Tt(29,Int32Array.from([6,30,54,78,102,126]),new Ue(30,new pe(7,116),new pe(7,117)),new Ue(28,new pe(21,45),new pe(7,46)),new Ue(30,new pe(1,23),new pe(37,24)),new Ue(30,new pe(19,15),new pe(26,16))),new Tt(30,Int32Array.from([6,26,52,78,104,130]),new Ue(30,new pe(5,115),new pe(10,116)),new Ue(28,new pe(19,47),new pe(10,48)),new Ue(30,new pe(15,24),new pe(25,25)),new Ue(30,new pe(23,15),new pe(25,16))),new Tt(31,Int32Array.from([6,30,56,82,108,134]),new Ue(30,new pe(13,115),new pe(3,116)),new Ue(28,new pe(2,46),new pe(29,47)),new Ue(30,new pe(42,24),new pe(1,25)),new Ue(30,new pe(23,15),new pe(28,16))),new Tt(32,Int32Array.from([6,34,60,86,112,138]),new Ue(30,new pe(17,115)),new Ue(28,new pe(10,46),new pe(23,47)),new Ue(30,new pe(10,24),new pe(35,25)),new Ue(30,new pe(19,15),new pe(35,16))),new Tt(33,Int32Array.from([6,30,58,86,114,142]),new Ue(30,new pe(17,115),new pe(1,116)),new Ue(28,new pe(14,46),new pe(21,47)),new Ue(30,new pe(29,24),new pe(19,25)),new Ue(30,new pe(11,15),new pe(46,16))),new Tt(34,Int32Array.from([6,34,62,90,118,146]),new Ue(30,new pe(13,115),new pe(6,116)),new Ue(28,new pe(14,46),new pe(23,47)),new Ue(30,new pe(44,24),new pe(7,25)),new Ue(30,new pe(59,16),new pe(1,17))),new Tt(35,Int32Array.from([6,30,54,78,102,126,150]),new Ue(30,new pe(12,121),new pe(7,122)),new Ue(28,new pe(12,47),new pe(26,48)),new Ue(30,new pe(39,24),new pe(14,25)),new Ue(30,new pe(22,15),new pe(41,16))),new Tt(36,Int32Array.from([6,24,50,76,102,128,154]),new Ue(30,new pe(6,121),new pe(14,122)),new Ue(28,new pe(6,47),new pe(34,48)),new Ue(30,new pe(46,24),new pe(10,25)),new Ue(30,new pe(2,15),new pe(64,16))),new Tt(37,Int32Array.from([6,28,54,80,106,132,158]),new Ue(30,new pe(17,122),new pe(4,123)),new Ue(28,new pe(29,46),new pe(14,47)),new Ue(30,new pe(49,24),new pe(10,25)),new Ue(30,new pe(24,15),new pe(46,16))),new Tt(38,Int32Array.from([6,32,58,84,110,136,162]),new Ue(30,new pe(4,122),new pe(18,123)),new Ue(28,new pe(13,46),new pe(32,47)),new Ue(30,new pe(48,24),new pe(14,25)),new Ue(30,new pe(42,15),new pe(32,16))),new Tt(39,Int32Array.from([6,26,54,82,110,138,166]),new Ue(30,new pe(20,117),new pe(4,118)),new Ue(28,new pe(40,47),new pe(7,48)),new Ue(30,new pe(43,24),new pe(22,25)),new Ue(30,new pe(10,15),new pe(67,16))),new Tt(40,Int32Array.from([6,30,58,86,114,142,170]),new Ue(30,new pe(19,118),new pe(6,119)),new Ue(28,new pe(18,47),new pe(31,48)),new Ue(30,new pe(34,24),new pe(34,25)),new Ue(30,new pe(20,15),new pe(61,16)))];var ca;(function(Q){Q[Q.DATA_MASK_000=0]="DATA_MASK_000",Q[Q.DATA_MASK_001=1]="DATA_MASK_001",Q[Q.DATA_MASK_010=2]="DATA_MASK_010",Q[Q.DATA_MASK_011=3]="DATA_MASK_011",Q[Q.DATA_MASK_100=4]="DATA_MASK_100",Q[Q.DATA_MASK_101=5]="DATA_MASK_101",Q[Q.DATA_MASK_110=6]="DATA_MASK_110",Q[Q.DATA_MASK_111=7]="DATA_MASK_111"})(ca||(ca={}));class _a{constructor(i,c){this.value=i,this.isMasked=c}unmaskBitMatrix(i,c){for(let u=0;u<c;u++)for(let m=0;m<c;m++)this.isMasked(u,m)&&i.flip(m,u)}}_a.values=new Map([[ca.DATA_MASK_000,new _a(ca.DATA_MASK_000,(Q,i)=>(Q+i&1)===0)],[ca.DATA_MASK_001,new _a(ca.DATA_MASK_001,(Q,i)=>(Q&1)===0)],[ca.DATA_MASK_010,new _a(ca.DATA_MASK_010,(Q,i)=>i%3===0)],[ca.DATA_MASK_011,new _a(ca.DATA_MASK_011,(Q,i)=>(Q+i)%3===0)],[ca.DATA_MASK_100,new _a(ca.DATA_MASK_100,(Q,i)=>(Math.floor(Q/2)+Math.floor(i/3)&1)===0)],[ca.DATA_MASK_101,new _a(ca.DATA_MASK_101,(Q,i)=>Q*i%6===0)],[ca.DATA_MASK_110,new _a(ca.DATA_MASK_110,(Q,i)=>Q*i%6<3)],[ca.DATA_MASK_111,new _a(ca.DATA_MASK_111,(Q,i)=>(Q+i+Q*i%3&1)===0)]]);class If{constructor(i){const c=i.getHeight();if(c<21||(c&3)!==1)throw new L;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let p=0;p<6;p++)i=this.copyBit(p,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let p=5;p>=0;p--)i=this.copyBit(8,p,i);const c=this.bitMatrix.getHeight();let u=0;const m=c-7;for(let p=c-1;p>=m;p--)u=this.copyBit(8,p,u);for(let p=c-8;p<c;p++)u=this.copyBit(p,8,u);if(this.parsedFormatInfo=Aa.decodeFormatInformation(i,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),c=Math.floor((i-17)/4);if(c<=6)return Tt.getVersionForNumber(c);let u=0;const m=i-11;for(let v=5;v>=0;v--)for(let N=i-9;N>=m;N--)u=this.copyBit(N,v,u);let p=Tt.decodeVersionInformation(u);if(p!==null&&p.getDimensionForVersion()===i)return this.parsedVersion=p,p;u=0;for(let v=5;v>=0;v--)for(let N=i-9;N>=m;N--)u=this.copyBit(v,N,u);if(p=Tt.decodeVersionInformation(u),p!==null&&p.getDimensionForVersion()===i)return this.parsedVersion=p,p;throw new L}copyBit(i,c,u){return(this.isMirror?this.bitMatrix.get(c,i):this.bitMatrix.get(i,c))?u<<1|1:u<<1}readCodewords(){const i=this.readFormatInformation(),c=this.readVersion(),u=_a.values.get(i.getDataMask()),m=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,m);const p=c.buildFunctionPattern();let v=!0;const N=new Uint8Array(c.getTotalCodewords());let _=0,O=0,V=0;for(let J=m-1;J>0;J-=2){J===6&&J--;for(let ue=0;ue<m;ue++){const je=v?m-1-ue:ue;for(let De=0;De<2;De++)p.get(J-De,je)||(V++,O<<=1,this.bitMatrix.get(J-De,je)&&(O|=1),V===8&&(N[_++]=O,V=0,O=0))}v=!v}if(_!==c.getTotalCodewords())throw new L;return N}remask(){if(this.parsedFormatInfo===null)return;const i=_a.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,c)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let c=0,u=i.getWidth();c<u;c++)for(let m=c+1,p=i.getHeight();m<p;m++)i.get(c,m)!==i.get(m,c)&&(i.flip(m,c),i.flip(c,m))}}class Ro{constructor(i,c){this.numDataCodewords=i,this.codewords=c}static getDataBlocks(i,c,u){if(i.length!==c.getTotalCodewords())throw new k;const m=c.getECBlocksForLevel(u);let p=0;const v=m.getECBlocks();for(const De of v)p+=De.getCount();const N=new Array(p);let _=0;for(const De of v)for(let Me=0;Me<De.getCount();Me++){const ze=De.getDataCodewords(),Ke=m.getECCodewordsPerBlock()+ze;N[_++]=new Ro(ze,new Uint8Array(Ke))}const O=N[0].codewords.length;let V=N.length-1;for(;V>=0&&N[V].codewords.length!==O;)V--;V++;const J=O-m.getECCodewordsPerBlock();let ue=0;for(let De=0;De<J;De++)for(let Me=0;Me<_;Me++)N[Me].codewords[De]=i[ue++];for(let De=V;De<_;De++)N[De].codewords[J]=i[ue++];const je=N[0].codewords.length;for(let De=J;De<je;De++)for(let Me=0;Me<_;Me++){const ze=Me<V?De:De+1;N[Me].codewords[ze]=i[ue++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var gs;(function(Q){Q[Q.TERMINATOR=0]="TERMINATOR",Q[Q.NUMERIC=1]="NUMERIC",Q[Q.ALPHANUMERIC=2]="ALPHANUMERIC",Q[Q.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",Q[Q.BYTE=4]="BYTE",Q[Q.ECI=5]="ECI",Q[Q.KANJI=6]="KANJI",Q[Q.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",Q[Q.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",Q[Q.HANZI=9]="HANZI"})(gs||(gs={}));class Dt{constructor(i,c,u,m){this.value=i,this.stringValue=c,this.characterCountBitsForVersions=u,this.bits=m,Dt.FOR_BITS.set(m,this),Dt.FOR_VALUE.set(i,this)}static forBits(i){const c=Dt.FOR_BITS.get(i);if(c===void 0)throw new k;return c}getCharacterCountBits(i){const c=i.getVersionNumber();let u;return c<=9?u=0:c<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Dt))return!1;const c=i;return this.value===c.value}toString(){return this.stringValue}}Dt.FOR_BITS=new Map,Dt.FOR_VALUE=new Map,Dt.TERMINATOR=new Dt(gs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Dt.NUMERIC=new Dt(gs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Dt.ALPHANUMERIC=new Dt(gs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Dt.STRUCTURED_APPEND=new Dt(gs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Dt.BYTE=new Dt(gs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Dt.ECI=new Dt(gs.ECI,"ECI",Int32Array.from([0,0,0]),7),Dt.KANJI=new Dt(gs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Dt.FNC1_FIRST_POSITION=new Dt(gs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Dt.FNC1_SECOND_POSITION=new Dt(gs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Dt.HANZI=new Dt(gs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Gr{static decode(i,c,u,m){const p=new Ja(i);let v=new ne;const N=new Array;let _=-1,O=-1;try{let V=null,J=!1,ue;do{if(p.available()<4)ue=Dt.TERMINATOR;else{const je=p.readBits(4);ue=Dt.forBits(je)}switch(ue){case Dt.TERMINATOR:break;case Dt.FNC1_FIRST_POSITION:case Dt.FNC1_SECOND_POSITION:J=!0;break;case Dt.STRUCTURED_APPEND:if(p.available()<16)throw new L;_=p.readBits(8),O=p.readBits(8);break;case Dt.ECI:const je=Gr.parseECIValue(p);if(V=z.getCharacterSetECIByValue(je),V===null)throw new L;break;case Dt.HANZI:const De=p.readBits(4),Me=p.readBits(ue.getCharacterCountBits(c));De===Gr.GB2312_SUBSET&&Gr.decodeHanziSegment(p,v,Me);break;default:const ze=p.readBits(ue.getCharacterCountBits(c));switch(ue){case Dt.NUMERIC:Gr.decodeNumericSegment(p,v,ze);break;case Dt.ALPHANUMERIC:Gr.decodeAlphanumericSegment(p,v,ze,J);break;case Dt.BYTE:Gr.decodeByteSegment(p,v,ze,V,N,m);break;case Dt.KANJI:Gr.decodeKanjiSegment(p,v,ze);break;default:throw new L}break}}while(ue!==Dt.TERMINATOR)}catch{throw new L}return new Ve(i,v.toString(),N.length===0?null:N,u===null?null:u.toString(),_,O)}static decodeHanziSegment(i,c,u){if(u*13>i.available())throw new L;const m=new Uint8Array(2*u);let p=0;for(;u>0;){const v=i.readBits(13);let N=v/96<<8&4294967295|v%96;N<959?N+=41377:N+=42657,m[p]=N>>8&255,m[p+1]=N&255,p+=2,u--}try{c.append(ee.decode(m,G.GB2312))}catch(v){throw new L(v)}}static decodeKanjiSegment(i,c,u){if(u*13>i.available())throw new L;const m=new Uint8Array(2*u);let p=0;for(;u>0;){const v=i.readBits(13);let N=v/192<<8&4294967295|v%192;N<7936?N+=33088:N+=49472,m[p]=N>>8,m[p+1]=N,p+=2,u--}try{c.append(ee.decode(m,G.SHIFT_JIS))}catch(v){throw new L(v)}}static decodeByteSegment(i,c,u,m,p,v){if(8*u>i.available())throw new L;const N=new Uint8Array(u);for(let O=0;O<u;O++)N[O]=i.readBits(8);let _;m===null?_=G.guessEncoding(N,v):_=m.getName();try{c.append(ee.decode(N,_))}catch(O){throw new L(O)}p.push(N)}static toAlphaNumericChar(i){if(i>=Gr.ALPHANUMERIC_CHARS.length)throw new L;return Gr.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,c,u,m){const p=c.length();for(;u>1;){if(i.available()<11)throw new L;const v=i.readBits(11);c.append(Gr.toAlphaNumericChar(Math.floor(v/45))),c.append(Gr.toAlphaNumericChar(v%45)),u-=2}if(u===1){if(i.available()<6)throw new L;c.append(Gr.toAlphaNumericChar(i.readBits(6)))}if(m)for(let v=p;v<c.length();v++)c.charAt(v)==="%"&&(v<c.length()-1&&c.charAt(v+1)==="%"?c.deleteCharAt(v+1):c.setCharAt(v,""))}static decodeNumericSegment(i,c,u){for(;u>=3;){if(i.available()<10)throw new L;const m=i.readBits(10);if(m>=1e3)throw new L;c.append(Gr.toAlphaNumericChar(Math.floor(m/100))),c.append(Gr.toAlphaNumericChar(Math.floor(m/10)%10)),c.append(Gr.toAlphaNumericChar(m%10)),u-=3}if(u===2){if(i.available()<7)throw new L;const m=i.readBits(7);if(m>=100)throw new L;c.append(Gr.toAlphaNumericChar(Math.floor(m/10))),c.append(Gr.toAlphaNumericChar(m%10))}else if(u===1){if(i.available()<4)throw new L;const m=i.readBits(4);if(m>=10)throw new L;c.append(Gr.toAlphaNumericChar(m))}}static parseECIValue(i){const c=i.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const u=i.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){const u=i.readBits(16);return(c&31)<<16&4294967295|u}throw new L}}Gr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Gr.GB2312_SUBSET=1;class vd{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const c=i[0];i[0]=i[2],i[2]=c}}class Mo{constructor(){this.rsDecoder=new Je(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(i,c){return this.decodeBitMatrix(le.parseFromBooleanArray(i),c)}decodeBitMatrix(i,c){const u=new If(i);let m=null;try{return this.decodeBitMatrixParser(u,c)}catch(p){m=p}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const p=this.decodeBitMatrixParser(u,c);return p.setOther(new vd(!0)),p}catch(p){throw m!==null?m:p}}decodeBitMatrixParser(i,c){const u=i.readVersion(),m=i.readFormatInformation().getErrorCorrectionLevel(),p=i.readCodewords(),v=Ro.getDataBlocks(p,u,m);let N=0;for(const V of v)N+=V.getNumDataCodewords();const _=new Uint8Array(N);let O=0;for(const V of v){const J=V.getCodewords(),ue=V.getNumDataCodewords();this.correctErrors(J,ue);for(let je=0;je<ue;je++)_[O++]=J[je]}return Gr.decode(_,u,m,c)}correctErrors(i,c){const u=new Int32Array(i);try{this.rsDecoder.decode(u,i.length-c)}catch{throw new S}for(let m=0;m<c;m++)i[m]=u[m]}}class Fl extends Ee{constructor(i,c,u){super(i,c),this.estimatedModuleSize=u}aboutEquals(i,c,u){if(Math.abs(c-this.getY())<=i&&Math.abs(u-this.getX())<=i){const m=Math.abs(i-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(i,c,u){const m=(this.getX()+c)/2,p=(this.getY()+i)/2,v=(this.estimatedModuleSize+u)/2;return new Fl(m,p,v)}}class Gi{constructor(i,c,u,m,p,v,N){this.image=i,this.startX=c,this.startY=u,this.width=m,this.height=p,this.moduleSize=v,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,c=this.height,u=this.width,m=i+u,p=this.startY+c/2,v=new Int32Array(3),N=this.image;for(let _=0;_<c;_++){const O=p+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));v[0]=0,v[1]=0,v[2]=0;let V=i;for(;V<m&&!N.get(V,O);)V++;let J=0;for(;V<m;){if(N.get(V,O))if(J===1)v[1]++;else if(J===2){if(this.foundPatternCross(v)){const ue=this.handlePossibleCenter(v,O,V);if(ue!==null)return ue}v[0]=v[2],v[1]=1,v[2]=0,J=1}else v[++J]++;else J===1&&J++,v[J]++;V++}if(this.foundPatternCross(v)){const ue=this.handlePossibleCenter(v,O,m);if(ue!==null)return ue}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(i,c){return c-i[2]-i[1]/2}foundPatternCross(i){const c=this.moduleSize,u=c/2;for(let m=0;m<3;m++)if(Math.abs(c-i[m])>=u)return!1;return!0}crossCheckVertical(i,c,u,m){const p=this.image,v=p.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let _=i;for(;_>=0&&p.get(c,_)&&N[1]<=u;)N[1]++,_--;if(_<0||N[1]>u)return NaN;for(;_>=0&&!p.get(c,_)&&N[0]<=u;)N[0]++,_--;if(N[0]>u)return NaN;for(_=i+1;_<v&&p.get(c,_)&&N[1]<=u;)N[1]++,_++;if(_===v||N[1]>u)return NaN;for(;_<v&&!p.get(c,_)&&N[2]<=u;)N[2]++,_++;if(N[2]>u)return NaN;const O=N[0]+N[1]+N[2];return 5*Math.abs(O-m)>=2*m?NaN:this.foundPatternCross(N)?Gi.centerFromEnd(N,_):NaN}handlePossibleCenter(i,c,u){const m=i[0]+i[1]+i[2],p=Gi.centerFromEnd(i,u),v=this.crossCheckVertical(c,p,2*i[1],m);if(!isNaN(v)){const N=(i[0]+i[1]+i[2])/3;for(const O of this.possibleCenters)if(O.aboutEquals(N,v,p))return O.combineEstimate(v,p,N);const _=new Fl(p,v,N);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class zn extends Ee{constructor(i,c,u,m){super(i,c),this.estimatedModuleSize=u,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,c,u){if(Math.abs(c-this.getY())<=i&&Math.abs(u-this.getX())<=i){const m=Math.abs(i-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(i,c,u){const m=this.count+1,p=(this.count*this.getX()+c)/m,v=(this.count*this.getY()+i)/m,N=(this.count*this.estimatedModuleSize+u)/m;return new zn(p,v,N,m)}}class Yi{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class da{constructor(i,c){this.image=i,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const c=i!=null&&i.get(U.TRY_HARDER)!==void 0,u=i!=null&&i.get(U.PURE_BARCODE)!==void 0,m=this.image,p=m.getHeight(),v=m.getWidth();let N=Math.floor(3*p/(4*da.MAX_MODULES));(N<da.MIN_SKIP||c)&&(N=da.MIN_SKIP);let _=!1;const O=new Int32Array(5);for(let J=N-1;J<p&&!_;J+=N){O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0;let ue=0;for(let je=0;je<v;je++)if(m.get(je,J))(ue&1)===1&&ue++,O[ue]++;else if((ue&1)===0)if(ue===4)if(da.foundPatternCross(O)){if(this.handlePossibleCenter(O,J,je,u)===!0)if(N=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const Me=this.findRowSkip();Me>O[2]&&(J+=Me-O[2]-N,je=v-1)}else{O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,ue=3;continue}ue=0,O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}else O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,ue=3;else O[++ue]++;else O[ue]++;da.foundPatternCross(O)&&this.handlePossibleCenter(O,J,v,u)===!0&&(N=O[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const V=this.selectBestPatterns();return Ee.orderBestPatterns(V),new Yi(V)}static centerFromEnd(i,c){return c-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let c=0;for(let p=0;p<5;p++){const v=i[p];if(v===0)return!1;c+=v}if(c<7)return!1;const u=c/7,m=u/2;return Math.abs(u-i[0])<m&&Math.abs(u-i[1])<m&&Math.abs(3*u-i[2])<3*m&&Math.abs(u-i[3])<m&&Math.abs(u-i[4])<m}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,c,u,m){const p=this.getCrossCheckStateCount();let v=0;const N=this.image;for(;i>=v&&c>=v&&N.get(c-v,i-v);)p[2]++,v++;if(i<v||c<v)return!1;for(;i>=v&&c>=v&&!N.get(c-v,i-v)&&p[1]<=u;)p[1]++,v++;if(i<v||c<v||p[1]>u)return!1;for(;i>=v&&c>=v&&N.get(c-v,i-v)&&p[0]<=u;)p[0]++,v++;if(p[0]>u)return!1;const _=N.getHeight(),O=N.getWidth();for(v=1;i+v<_&&c+v<O&&N.get(c+v,i+v);)p[2]++,v++;if(i+v>=_||c+v>=O)return!1;for(;i+v<_&&c+v<O&&!N.get(c+v,i+v)&&p[3]<u;)p[3]++,v++;if(i+v>=_||c+v>=O||p[3]>=u)return!1;for(;i+v<_&&c+v<O&&N.get(c+v,i+v)&&p[4]<u;)p[4]++,v++;if(p[4]>=u)return!1;const V=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(V-m)<2*m&&da.foundPatternCross(p)}crossCheckVertical(i,c,u,m){const p=this.image,v=p.getHeight(),N=this.getCrossCheckStateCount();let _=i;for(;_>=0&&p.get(c,_);)N[2]++,_--;if(_<0)return NaN;for(;_>=0&&!p.get(c,_)&&N[1]<=u;)N[1]++,_--;if(_<0||N[1]>u)return NaN;for(;_>=0&&p.get(c,_)&&N[0]<=u;)N[0]++,_--;if(N[0]>u)return NaN;for(_=i+1;_<v&&p.get(c,_);)N[2]++,_++;if(_===v)return NaN;for(;_<v&&!p.get(c,_)&&N[3]<u;)N[3]++,_++;if(_===v||N[3]>=u)return NaN;for(;_<v&&p.get(c,_)&&N[4]<u;)N[4]++,_++;if(N[4]>=u)return NaN;const O=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(O-m)>=2*m?NaN:da.foundPatternCross(N)?da.centerFromEnd(N,_):NaN}crossCheckHorizontal(i,c,u,m){const p=this.image,v=p.getWidth(),N=this.getCrossCheckStateCount();let _=i;for(;_>=0&&p.get(_,c);)N[2]++,_--;if(_<0)return NaN;for(;_>=0&&!p.get(_,c)&&N[1]<=u;)N[1]++,_--;if(_<0||N[1]>u)return NaN;for(;_>=0&&p.get(_,c)&&N[0]<=u;)N[0]++,_--;if(N[0]>u)return NaN;for(_=i+1;_<v&&p.get(_,c);)N[2]++,_++;if(_===v)return NaN;for(;_<v&&!p.get(_,c)&&N[3]<u;)N[3]++,_++;if(_===v||N[3]>=u)return NaN;for(;_<v&&p.get(_,c)&&N[4]<u;)N[4]++,_++;if(N[4]>=u)return NaN;const O=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(O-m)>=m?NaN:da.foundPatternCross(N)?da.centerFromEnd(N,_):NaN}handlePossibleCenter(i,c,u,m){const p=i[0]+i[1]+i[2]+i[3]+i[4];let v=da.centerFromEnd(i,u),N=this.crossCheckVertical(c,Math.floor(v),i[2],p);if(!isNaN(N)&&(v=this.crossCheckHorizontal(Math.floor(v),Math.floor(N),i[2],p),!isNaN(v)&&(!m||this.crossCheckDiagonal(Math.floor(N),Math.floor(v),i[2],p)))){const _=p/7;let O=!1;const V=this.possibleCenters;for(let J=0,ue=V.length;J<ue;J++){const je=V[J];if(je.aboutEquals(_,N,v)){V[J]=je.combineEstimate(N,v,_),O=!0;break}}if(!O){const J=new zn(v,N,_);V.push(J),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(J)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const u of this.possibleCenters)if(u.getCount()>=da.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,c=0;const u=this.possibleCenters.length;for(const v of this.possibleCenters)v.getCount()>=da.CENTER_QUORUM&&(i++,c+=v.getEstimatedModuleSize());if(i<3)return!1;const m=c/u;let p=0;for(const v of this.possibleCenters)p+=Math.abs(v.getEstimatedModuleSize()-m);return p<=.05*c}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new Y;const c=this.possibleCenters;let u;if(i>3){let m=0,p=0;for(const _ of this.possibleCenters){const O=_.getEstimatedModuleSize();m+=O,p+=O*O}u=m/i;let v=Math.sqrt(p/i-u*u);c.sort((_,O)=>{const V=Math.abs(O.getEstimatedModuleSize()-u),J=Math.abs(_.getEstimatedModuleSize()-u);return V<J?-1:V>J?1:0});const N=Math.max(.2*u,v);for(let _=0;_<c.length&&c.length>3;_++){const O=c[_];Math.abs(O.getEstimatedModuleSize()-u)>N&&(c.splice(_,1),_--)}}if(c.length>3){let m=0;for(const p of c)m+=p.getEstimatedModuleSize();u=m/c.length,c.sort((p,v)=>{if(v.getCount()===p.getCount()){const N=Math.abs(v.getEstimatedModuleSize()-u),_=Math.abs(p.getEstimatedModuleSize()-u);return N<_?1:N>_?-1:0}else return v.getCount()-p.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}da.CENTER_QUORUM=2,da.MIN_SKIP=3,da.MAX_MODULES=57;class fi{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(U.NEED_RESULT_POINT_CALLBACK);const u=new da(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(u)}processFinderPatternInfo(i){const c=i.getTopLeft(),u=i.getTopRight(),m=i.getBottomLeft(),p=this.calculateModuleSize(c,u,m);if(p<1)throw new Y("No pattern found in proccess finder.");const v=fi.computeDimension(c,u,m,p),N=Tt.getProvisionalVersionForDimension(v),_=N.getDimensionForVersion()-7;let O=null;if(N.getAlignmentPatternCenters().length>0){const je=u.getX()-c.getX()+m.getX(),De=u.getY()-c.getY()+m.getY(),Me=1-3/_,ze=Math.floor(c.getX()+Me*(je-c.getX())),Ke=Math.floor(c.getY()+Me*(De-c.getY()));for(let ht=4;ht<=16;ht<<=1)try{O=this.findAlignmentInRegion(p,ze,Ke,ht);break}catch(gt){if(!(gt instanceof Y))throw gt}}const V=fi.createTransform(c,u,m,O,v),J=fi.sampleGrid(this.image,V,v);let ue;return O===null?ue=[m,c,u]:ue=[m,c,u,O],new wt(J,ue)}static createTransform(i,c,u,m,p){const v=p-3.5;let N,_,O,V;return m!==null?(N=m.getX(),_=m.getY(),O=v-3,V=O):(N=c.getX()-i.getX()+u.getX(),_=c.getY()-i.getY()+u.getY(),O=v,V=v),qt.quadrilateralToQuadrilateral(3.5,3.5,v,3.5,O,V,3.5,v,i.getX(),i.getY(),c.getX(),c.getY(),N,_,u.getX(),u.getY())}static sampleGrid(i,c,u){return Ut.getInstance().sampleGridWithTransform(i,u,u,c)}static computeDimension(i,c,u,m){const p=fe.round(Ee.distance(i,c)/m),v=fe.round(Ee.distance(i,u)/m);let N=Math.floor((p+v)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new Y("Dimensions could be not found.")}return N}calculateModuleSize(i,c,u){return(this.calculateModuleSizeOneWay(i,c)+this.calculateModuleSizeOneWay(i,u))/2}calculateModuleSizeOneWay(i,c){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(c.getX()),Math.floor(c.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(u)?m/7:isNaN(m)?u/7:(u+m)/14}sizeOfBlackWhiteBlackRunBothWays(i,c,u,m){let p=this.sizeOfBlackWhiteBlackRun(i,c,u,m),v=1,N=i-(u-i);N<0?(v=i/(i-N),N=0):N>=this.image.getWidth()&&(v=(this.image.getWidth()-1-i)/(N-i),N=this.image.getWidth()-1);let _=Math.floor(c-(m-c)*v);return v=1,_<0?(v=c/(c-_),_=0):_>=this.image.getHeight()&&(v=(this.image.getHeight()-1-c)/(_-c),_=this.image.getHeight()-1),N=Math.floor(i+(N-i)*v),p+=this.sizeOfBlackWhiteBlackRun(i,c,N,_),p-1}sizeOfBlackWhiteBlackRun(i,c,u,m){const p=Math.abs(m-c)>Math.abs(u-i);if(p){let je=i;i=c,c=je,je=u,u=m,m=je}const v=Math.abs(u-i),N=Math.abs(m-c);let _=-v/2;const O=i<u?1:-1,V=c<m?1:-1;let J=0;const ue=u+O;for(let je=i,De=c;je!==ue;je+=O){const Me=p?De:je,ze=p?je:De;if(J===1===this.image.get(Me,ze)){if(J===2)return fe.distance(je,De,i,c);J++}if(_+=N,_>0){if(De===m)break;De+=V,_-=v}}return J===2?fe.distance(u+O,m,i,c):NaN}findAlignmentInRegion(i,c,u,m){const p=Math.floor(m*i),v=Math.max(0,c-p),N=Math.min(this.image.getWidth()-1,c+p);if(N-v<i*3)throw new Y("Alignment top exceeds estimated module size.");const _=Math.max(0,u-p),O=Math.min(this.image.getHeight()-1,u+p);if(O-_<i*3)throw new Y("Alignment bottom exceeds estimated module size.");return new Gi(this.image,v,_,N-v,O-_,i,this.resultPointCallback).find()}}class vn{constructor(){this.decoder=new Mo}getDecoder(){return this.decoder}decode(i,c){let u,m;if(c!=null&&c.get(U.PURE_BARCODE)!==void 0){const _=vn.extractPureBits(i.getBlackMatrix());u=this.decoder.decodeBitMatrix(_,c),m=vn.NO_POINTS}else{const _=new fi(i.getBlackMatrix()).detect(c);u=this.decoder.decodeBitMatrix(_.getBits(),c),m=_.getPoints()}u.getOther()instanceof vd&&u.getOther().applyMirroredCorrection(m);const p=new se(u.getText(),u.getRawBytes(),void 0,m,te.QR_CODE,void 0),v=u.getByteSegments();v!==null&&p.putMetadata(ke.BYTE_SEGMENTS,v);const N=u.getECLevel();return N!==null&&p.putMetadata(ke.ERROR_CORRECTION_LEVEL,N),u.hasStructuredAppend()&&(p.putMetadata(ke.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),p.putMetadata(ke.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),p}reset(){}static extractPureBits(i){const c=i.getTopLeftOnBit(),u=i.getBottomRightOnBit();if(c===null||u===null)throw new Y;const m=this.moduleSize(c,i);let p=c[1],v=u[1],N=c[0],_=u[0];if(N>=_||p>=v)throw new Y;if(v-p!==_-N&&(_=N+(v-p),_>=i.getWidth()))throw new Y;const O=Math.round((_-N+1)/m),V=Math.round((v-p+1)/m);if(O<=0||V<=0)throw new Y;if(V!==O)throw new Y;const J=Math.floor(m/2);p+=J,N+=J;const ue=N+Math.floor((O-1)*m)-_;if(ue>0){if(ue>J)throw new Y;N-=ue}const je=p+Math.floor((V-1)*m)-v;if(je>0){if(je>J)throw new Y;p-=je}const De=new le(O,V);for(let Me=0;Me<V;Me++){const ze=p+Math.floor(Me*m);for(let Ke=0;Ke<O;Ke++)i.get(N+Math.floor(Ke*m),ze)&&De.set(Ke,Me)}return De}static moduleSize(i,c){const u=c.getHeight(),m=c.getWidth();let p=i[0],v=i[1],N=!0,_=0;for(;p<m&&v<u;){if(N!==c.get(p,v)){if(++_===5)break;N=!N}p++,v++}if(p===m||v===u)throw new Y;return(p-i[0])/7}}vn.NO_POINTS=new Array;class Ot{PDF417Common(){}static getBitCountSum(i){return fe.sum(i)}static toIntArray(i){if(i==null||!i.length)return Ot.EMPTY_INT_ARRAY;const c=new Int32Array(i.length);let u=0;for(const m of i)c[u++]=m;return c}static getCodeword(i){const c=F.binarySearch(Ot.SYMBOL_TABLE,i&262143);return c<0?-1:(Ot.CODEWORD_TABLE[c]-1)%Ot.NUMBER_OF_CODEWORDS}}Ot.NUMBER_OF_CODEWORDS=929,Ot.MAX_CODEWORDS_IN_BARCODE=Ot.NUMBER_OF_CODEWORDS-1,Ot.MIN_ROWS_IN_BARCODE=3,Ot.MAX_ROWS_IN_BARCODE=90,Ot.MODULES_IN_CODEWORD=17,Ot.MODULES_IN_STOP_PATTERN=18,Ot.BARS_IN_MODULE=8,Ot.EMPTY_INT_ARRAY=new Int32Array([]),Ot.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ot.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wn{constructor(i,c){this.bits=i,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Wt{static detectMultiple(i,c,u){let m=i.getBlackMatrix(),p=Wt.detect(u,m);return p.length||(m=m.clone(),m.rotate180(),p=Wt.detect(u,m)),new wn(m,p)}static detect(i,c){const u=new Array;let m=0,p=0,v=!1;for(;m<c.getHeight();){const N=Wt.findVertices(c,m,p);if(N[0]==null&&N[3]==null){if(!v)break;v=!1,p=0;for(const _ of u)_[1]!=null&&(m=Math.trunc(Math.max(m,_[1].getY()))),_[3]!=null&&(m=Math.max(m,Math.trunc(_[3].getY())));m+=Wt.ROW_STEP;continue}if(v=!0,u.push(N),!i)break;N[2]!=null?(p=Math.trunc(N[2].getX()),m=Math.trunc(N[2].getY())):(p=Math.trunc(N[4].getX()),m=Math.trunc(N[4].getY()))}return u}static findVertices(i,c,u){const m=i.getHeight(),p=i.getWidth(),v=new Array(8);return Wt.copyToResult(v,Wt.findRowsWithPattern(i,m,p,c,u,Wt.START_PATTERN),Wt.INDEXES_START_PATTERN),v[4]!=null&&(u=Math.trunc(v[4].getX()),c=Math.trunc(v[4].getY())),Wt.copyToResult(v,Wt.findRowsWithPattern(i,m,p,c,u,Wt.STOP_PATTERN),Wt.INDEXES_STOP_PATTERN),v}static copyToResult(i,c,u){for(let m=0;m<u.length;m++)i[u[m]]=c[m]}static findRowsWithPattern(i,c,u,m,p,v){const N=new Array(4);let _=!1;const O=new Int32Array(v.length);for(;m<c;m+=Wt.ROW_STEP){let J=Wt.findGuardPattern(i,p,m,u,!1,v,O);if(J!=null){for(;m>0;){const ue=Wt.findGuardPattern(i,p,--m,u,!1,v,O);if(ue!=null)J=ue;else{m++;break}}N[0]=new Ee(J[0],m),N[1]=new Ee(J[1],m),_=!0;break}}let V=m+1;if(_){let J=0,ue=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;V<c;V++){const je=Wt.findGuardPattern(i,ue[0],V,u,!1,v,O);if(je!=null&&Math.abs(ue[0]-je[0])<Wt.MAX_PATTERN_DRIFT&&Math.abs(ue[1]-je[1])<Wt.MAX_PATTERN_DRIFT)ue=je,J=0;else{if(J>Wt.SKIPPED_ROW_COUNT_MAX)break;J++}}V-=J+1,N[2]=new Ee(ue[0],V),N[3]=new Ee(ue[1],V)}return V-m<Wt.BARCODE_MIN_HEIGHT&&F.fill(N,null),N}static findGuardPattern(i,c,u,m,p,v,N){F.fillWithin(N,0,N.length,0);let _=c,O=0;for(;i.get(_,u)&&_>0&&O++<Wt.MAX_PIXEL_DRIFT;)_--;let V=_,J=0,ue=v.length;for(let je=p;V<m;V++)if(i.get(V,u)!==je)N[J]++;else{if(J===ue-1){if(Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return new Int32Array([_,V]);_+=N[0]+N[1],A.arraycopy(N,2,N,0,J-1),N[J-1]=0,N[J]=0,J--}else J++;N[J]=1,je=!je}return J===ue-1&&Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE?new Int32Array([_,V-1]):null}static patternMatchVariance(i,c,u){let m=i.length,p=0,v=0;for(let O=0;O<m;O++)p+=i[O],v+=c[O];if(p<v)return 1/0;let N=p/v;u*=N;let _=0;for(let O=0;O<m;O++){let V=i[O],J=c[O]*N,ue=V>J?V-J:J-V;if(ue>u)return 1/0;_+=ue}return _/p}}Wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wt.MAX_AVG_VARIANCE=.42,Wt.MAX_INDIVIDUAL_VARIANCE=.8,Wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wt.MAX_PIXEL_DRIFT=3,Wt.MAX_PATTERN_DRIFT=5,Wt.SKIPPED_ROW_COUNT_MAX=25,Wt.ROW_STEP=5,Wt.BARCODE_MIN_HEIGHT=10;class Kr{constructor(i,c){if(c.length===0)throw new k;this.field=i;let u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let m=0;for(let p of this.coefficients)m=this.field.add(m,p);return m}let c=this.coefficients[0],u=this.coefficients.length;for(let m=1;m<u;m++)c=this.field.add(this.field.multiply(i,c),this.coefficients[m]);return c}add(i){if(!this.field.equals(i.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let c=this.coefficients,u=i.coefficients;if(c.length>u.length){let v=c;c=u,u=v}let m=new Int32Array(u.length),p=u.length-c.length;A.arraycopy(u,0,m,0,p);for(let v=p;v<u.length;v++)m[v]=this.field.add(c[v-p],u[v]);return new Kr(this.field,m)}subtract(i){if(!this.field.equals(i.field))throw new k("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Kr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Kr(this.field,new Int32Array([0]));let c=this.coefficients,u=c.length,m=i.coefficients,p=m.length,v=new Int32Array(u+p-1);for(let N=0;N<u;N++){let _=c[N];for(let O=0;O<p;O++)v[N+O]=this.field.add(v[N+O],this.field.multiply(_,m[O]))}return new Kr(this.field,v)}negative(){let i=this.coefficients.length,c=new Int32Array(i);for(let u=0;u<i;u++)c[u]=this.field.subtract(0,this.coefficients[u]);return new Kr(this.field,c)}multiplyScalar(i){if(i===0)return new Kr(this.field,new Int32Array([0]));if(i===1)return this;let c=this.coefficients.length,u=new Int32Array(c);for(let m=0;m<c;m++)u[m]=this.field.multiply(this.coefficients[m],i);return new Kr(this.field,u)}multiplyByMonomial(i,c){if(i<0)throw new k;if(c===0)return new Kr(this.field,new Int32Array([0]));let u=this.coefficients.length,m=new Int32Array(u+i);for(let p=0;p<u;p++)m[p]=this.field.multiply(this.coefficients[p],c);return new Kr(this.field,m)}toString(){let i=new ne;for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);u!==0&&(u<0?(i.append(" - "),u=-u):i.length()>0&&i.append(" + "),(c===0||u!==1)&&i.append(u),c!==0&&(c===1?i.append("x"):(i.append("x^"),i.append(c))))}return i.toString()}}class Un{add(i,c){return(i+c)%this.modulus}subtract(i,c){return(this.modulus+i-c)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new k;return this.logTable[i]}inverse(i){if(i===0)throw new be;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,c){return i===0||c===0?0:this.expTable[(this.logTable[i]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Bl extends Un{constructor(i,c){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let u=1;for(let m=0;m<i;m++)this.expTable[m]=u,u=u*c%i;for(let m=0;m<i-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new Kr(this,new Int32Array([0])),this.one=new Kr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,c){if(i<0)throw new k;if(c===0)return this.zero;let u=new Int32Array(i+1);return u[0]=c,new Kr(this,u)}}Bl.PDF417_GF=new Bl(Ot.NUMBER_OF_CODEWORDS,3);class Ll{constructor(){this.field=Bl.PDF417_GF}decode(i,c,u){let m=new Kr(this.field,i),p=new Int32Array(c),v=!1;for(let De=c;De>0;De--){let Me=m.evaluateAt(this.field.exp(De));p[c-De]=Me,Me!==0&&(v=!0)}if(!v)return 0;let N=this.field.getOne();if(u!=null)for(const De of u){let Me=this.field.exp(i.length-1-De),ze=new Kr(this.field,new Int32Array([this.field.subtract(0,Me),1]));N=N.multiply(ze)}let _=new Kr(this.field,p),O=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),_,c),V=O[0],J=O[1],ue=this.findErrorLocations(V),je=this.findErrorMagnitudes(J,V,ue);for(let De=0;De<ue.length;De++){let Me=i.length-1-this.field.log(ue[De]);if(Me<0)throw S.getChecksumInstance();i[Me]=this.field.subtract(i[Me],je[De])}return ue.length}runEuclideanAlgorithm(i,c,u){if(i.getDegree()<c.getDegree()){let ue=i;i=c,c=ue}let m=i,p=c,v=this.field.getZero(),N=this.field.getOne();for(;p.getDegree()>=Math.round(u/2);){let ue=m,je=v;if(m=p,v=N,m.isZero())throw S.getChecksumInstance();p=ue;let De=this.field.getZero(),Me=m.getCoefficient(m.getDegree()),ze=this.field.inverse(Me);for(;p.getDegree()>=m.getDegree()&&!p.isZero();){let Ke=p.getDegree()-m.getDegree(),ht=this.field.multiply(p.getCoefficient(p.getDegree()),ze);De=De.add(this.field.buildMonomial(Ke,ht)),p=p.subtract(m.multiplyByMonomial(Ke,ht))}N=De.multiply(v).subtract(je).negative()}let _=N.getCoefficient(0);if(_===0)throw S.getChecksumInstance();let O=this.field.inverse(_),V=N.multiply(O),J=p.multiply(O);return[V,J]}findErrorLocations(i){let c=i.getDegree(),u=new Int32Array(c),m=0;for(let p=1;p<this.field.getSize()&&m<c;p++)i.evaluateAt(p)===0&&(u[m]=this.field.inverse(p),m++);if(m!==c)throw S.getChecksumInstance();return u}findErrorMagnitudes(i,c,u){let m=c.getDegree(),p=new Int32Array(m);for(let O=1;O<=m;O++)p[m-O]=this.field.multiply(O,c.getCoefficient(O));let v=new Kr(this.field,p),N=u.length,_=new Int32Array(N);for(let O=0;O<N;O++){let V=this.field.inverse(u[O]),J=this.field.subtract(0,i.evaluateAt(V)),ue=this.field.inverse(v.evaluateAt(V));_[O]=this.field.multiply(J,ue)}return _}}class Hn{constructor(i,c,u,m,p){i instanceof Hn?this.constructor_2(i):this.constructor_1(i,c,u,m,p)}constructor_1(i,c,u,m,p){const v=c==null||u==null,N=m==null||p==null;if(v&&N)throw new Y;v?(c=new Ee(0,m.getY()),u=new Ee(0,p.getY())):N&&(m=new Ee(i.getWidth()-1,c.getY()),p=new Ee(i.getWidth()-1,u.getY())),this.image=i,this.topLeft=c,this.bottomLeft=u,this.topRight=m,this.bottomRight=p,this.minX=Math.trunc(Math.min(c.getX(),u.getX())),this.maxX=Math.trunc(Math.max(m.getX(),p.getX())),this.minY=Math.trunc(Math.min(c.getY(),m.getY())),this.maxY=Math.trunc(Math.max(u.getY(),p.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,c){return i==null?c:c==null?i:new Hn(i.image,i.topLeft,i.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(i,c,u){let m=this.topLeft,p=this.bottomLeft,v=this.topRight,N=this.bottomRight;if(i>0){let _=u?this.topLeft:this.topRight,O=Math.trunc(_.getY()-i);O<0&&(O=0);let V=new Ee(_.getX(),O);u?m=V:v=V}if(c>0){let _=u?this.bottomLeft:this.bottomRight,O=Math.trunc(_.getY()+c);O>=this.image.getHeight()&&(O=this.image.getHeight()-1);let V=new Ee(_.getX(),O);u?p=V:N=V}return new Hn(this.image,m,p,v,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Io{constructor(i,c,u,m){this.columnCount=i,this.errorCorrectionLevel=m,this.rowCountUpperPart=c,this.rowCountLowerPart=u,this.rowCount=c+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Vn{constructor(){this.buffer=""}static form(i,c){let u=-1;function m(v,N,_,O,V,J){if(v==="%%")return"%";if(c[++u]===void 0)return;v=O?parseInt(O.substr(1)):void 0;let ue=V?parseInt(V.substr(1)):void 0,je;switch(J){case"s":je=c[u];break;case"c":je=c[u][0];break;case"f":je=parseFloat(c[u]).toFixed(v);break;case"p":je=parseFloat(c[u]).toPrecision(v);break;case"e":je=parseFloat(c[u]).toExponential(v);break;case"x":je=parseInt(c[u]).toString(ue||16);break;case"d":je=parseFloat(parseInt(c[u],ue||10).toPrecision(v)).toFixed(0);break}je=typeof je=="object"?JSON.stringify(je):(+je).toString(ue);let De=parseInt(_),Me=_&&_[0]+""=="0"?"0":" ";for(;je.length<De;)je=N!==void 0?je+Me:Me+je;return je}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(p,m)}format(i,...c){this.buffer+=Vn.form(i,c)}toString(){return this.buffer}}class Xi{constructor(i){this.boundingBox=new Hn(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let c=this.getCodeword(i);if(c!=null)return c;for(let u=1;u<Xi.MAX_NEARBY_DISTANCE;u++){let m=this.imageRowToCodewordIndex(i)-u;if(m>=0&&(c=this.codewords[m],c!=null)||(m=this.imageRowToCodewordIndex(i)+u,m<this.codewords.length&&(c=this.codewords[m],c!=null)))return c}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,c){this.codewords[this.imageRowToCodewordIndex(i)]=c}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Vn;let c=0;for(const u of this.codewords){if(u==null){i.format("%3d:    |   %n",c++);continue}i.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return i.toString()}}Xi.MAX_NEARBY_DISTANCE=5;class ya{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let c=this.values.get(i);c==null&&(c=0),c++,this.values.set(i,c)}getValue(){let i=-1,c=new Array;for(const[u,m]of this.values.entries()){const p={getKey:()=>u,getValue:()=>m};p.getValue()>i?(i=p.getValue(),c=[],c.push(p.getKey())):p.getValue()===i&&c.push(p.getKey())}return Ot.toIntArray(c)}getConfidence(i){return this.values.get(i)}}class Gn extends Xi{constructor(i,c){super(i),this._isLeft=c}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,i);let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),p=this._isLeft?u.getBottomLeft():u.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.imageRowToCodewordIndex(Math.trunc(p.getY())),_=-1,O=1,V=0;for(let J=v;J<N;J++){if(c[J]==null)continue;let ue=c[J],je=ue.getRowNumber()-_;if(je===0)V++;else if(je===1)O=Math.max(O,V),V=1,_=ue.getRowNumber();else if(je<0||ue.getRowNumber()>=i.getRowCount()||je>J)c[J]=null;else{let De;O>2?De=(O-2)*je:De=je;let Me=De>=J;for(let ze=1;ze<=De&&!Me;ze++)Me=c[J-ze]!=null;Me?c[J]=null:(_=ue.getRowNumber(),V=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let c=new Int32Array(i.getRowCount());for(let u of this.getCodewords())if(u!=null){let m=u.getRowNumber();if(m>=c.length)continue;c[m]++}return c}adjustIncompleteIndicatorColumnRowNumbers(i){let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.getCodewords(),_=-1;for(let O=p;O<v;O++){if(N[O]==null)continue;let V=N[O];V.setRowNumberAsRowIndicatorColumn();let J=V.getRowNumber()-_;J===0||(J===1?_=V.getRowNumber():V.getRowNumber()>=i.getRowCount()?N[O]=null:_=V.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),c=new ya,u=new ya,m=new ya,p=new ya;for(let N of i){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let _=N.getValue()%30,O=N.getRowNumber();switch(this._isLeft||(O+=2),O%3){case 0:u.setValue(_*3+1);break;case 1:p.setValue(_/3),m.setValue(_%3);break;case 2:c.setValue(_+1);break}}if(c.getValue().length===0||u.getValue().length===0||m.getValue().length===0||p.getValue().length===0||c.getValue()[0]<1||u.getValue()[0]+m.getValue()[0]<Ot.MIN_ROWS_IN_BARCODE||u.getValue()[0]+m.getValue()[0]>Ot.MAX_ROWS_IN_BARCODE)return null;let v=new Io(c.getValue()[0],u.getValue()[0],m.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(i,v),v}removeIncorrectCodewords(i,c){for(let u=0;u<i.length;u++){let m=i[u];if(i[u]==null)continue;let p=m.getValue()%30,v=m.getRowNumber();if(v>c.getRowCount()){i[u]=null;continue}switch(this._isLeft||(v+=2),v%3){case 0:p*3+1!==c.getRowCountUpperPart()&&(i[u]=null);break;case 1:(Math.trunc(p/3)!==c.getErrorCorrectionLevel()||p%3!==c.getRowCountLowerPart())&&(i[u]=null);break;case 2:p+1!==c.getColumnCount()&&(i[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yn{constructor(i,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Ot.MAX_CODEWORDS_IN_BARCODE,c;do c=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let u=this.detectionResultColumns[c].getCodewords();for(let m=0;m<u.length;m++)u[m]!=null&&(u[m].hasValidRowNumber()||this.adjustRowNumbers(c,m,u))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<i.length;u++)if(i[u]!=null&&c[u]!=null&&i[u].getRowNumber()===c[u].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let p=this.detectionResultColumns[m].getCodewords()[u];p!=null&&(p.setRowNumber(i[u].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),p=0;for(let v=this.barcodeColumnCount+1;v>0&&p<this.ADJUST_ROW_NUMBER_SKIP;v--){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(p=Yn.adjustRowNumberIfValid(m,p,N),N.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,c=this.detectionResultColumns[0].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),p=0;for(let v=1;v<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;v++){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(p=Yn.adjustRowNumberIfValid(m,p,N),N.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,c,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(i)?(u.setRowNumber(i),c=0):++c),c}adjustRowNumbers(i,c,u){if(!this.detectionResultColumns[i-1])return;let m=u[c],p=this.detectionResultColumns[i-1].getCodewords(),v=p;this.detectionResultColumns[i+1]!=null&&(v=this.detectionResultColumns[i+1].getCodewords());let N=new Array(14);N[2]=p[c],N[3]=v[c],c>0&&(N[0]=u[c-1],N[4]=p[c-1],N[5]=v[c-1]),c>1&&(N[8]=u[c-2],N[10]=p[c-2],N[11]=v[c-2]),c<u.length-1&&(N[1]=u[c+1],N[6]=p[c+1],N[7]=v[c+1]),c<u.length-2&&(N[9]=u[c+2],N[12]=p[c+2],N[13]=v[c+2]);for(let _ of N)if(Yn.adjustRowNumber(m,_))return}static adjustRowNumber(i,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===i.getBucket()?(i.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,c){this.detectionResultColumns[i]=c}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Vn;for(let u=0;u<i.getCodewords().length;u++){c.format("CW %3d:",u);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){c.format("    |   ");continue}let p=this.detectionResultColumns[m].getCodewords()[u];if(p==null){c.format("    |   ");continue}c.format(" %3d|%3d",p.getRowNumber(),p.getValue())}c.format("%n")}return c.toString()}}class Nn{constructor(i,c,u,m){this.rowNumber=Nn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Nn.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Nn.BARCODE_ROW_UNKNOWN=-1;class es{static initialize(){for(let i=0;i<Ot.SYMBOL_TABLE.length;i++){let c=Ot.SYMBOL_TABLE[i],u=c&1;for(let m=0;m<Ot.BARS_IN_MODULE;m++){let p=0;for(;(c&1)===u;)p+=1,c>>=1;u=c&1,es.RATIOS_TABLE[i]||(es.RATIOS_TABLE[i]=new Array(Ot.BARS_IN_MODULE)),es.RATIOS_TABLE[i][Ot.BARS_IN_MODULE-m-1]=Math.fround(p/Ot.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let c=es.getDecodedCodewordValue(es.sampleBitCounts(i));return c!==-1?c:es.getClosestDecodedValue(i)}static sampleBitCounts(i){let c=fe.sum(i),u=new Int32Array(Ot.BARS_IN_MODULE),m=0,p=0;for(let v=0;v<Ot.MODULES_IN_CODEWORD;v++){let N=c/(2*Ot.MODULES_IN_CODEWORD)+v*c/Ot.MODULES_IN_CODEWORD;p+i[m]<=N&&(p+=i[m],m++),u[m]++}return u}static getDecodedCodewordValue(i){let c=es.getBitValue(i);return Ot.getCodeword(c)===-1?-1:c}static getBitValue(i){let c=0;for(let u=0;u<i.length;u++)for(let m=0;m<i[u];m++)c=c<<1|(u%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(i){let c=fe.sum(i),u=new Array(Ot.BARS_IN_MODULE);if(c>1)for(let v=0;v<u.length;v++)u[v]=Math.fround(i[v]/c);let m=st.MAX_VALUE,p=-1;this.bSymbolTableReady||es.initialize();for(let v=0;v<es.RATIOS_TABLE.length;v++){let N=0,_=es.RATIOS_TABLE[v];for(let O=0;O<Ot.BARS_IN_MODULE;O++){let V=Math.fround(_[O]-u[O]);if(N+=Math.fround(V*V),N>=m)break}N<m&&(m=N,p=Ot.SYMBOL_TABLE[v])}return p}}es.bSymbolTableReady=!1,es.RATIOS_TABLE=new Array(Ot.SYMBOL_TABLE.length).map(Q=>new Array(Ot.BARS_IN_MODULE));class Oo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Fo{static parseLong(i,c=void 0){return parseInt(i,c)}}class qi extends g{}qi.kind="NullPointerException";class Bo{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,c,u){if(i==null)throw new qi;if(c<0||c>i.length||u<0||c+u>i.length||c+u<0)throw new M;if(u===0)return;for(let m=0;m<u;m++)this.write(i[c+m])}flush(){}close(){}}class wd extends g{}class Of extends Bo{constructor(i=32){if(super(),this.count=0,i<0)throw new k("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let u=this.buf.length<<1;if(u-i<0&&(u=i),u<0){if(i<0)throw new wd;u=T.MAX_VALUE}this.buf=F.copyOfUint8Array(this.buf,u)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,c,u){if(c<0||c>i.length||u<0||c+u-i.length>0)throw new M;this.ensureCapacity(this.count+u),A.arraycopy(i,c,this.buf,this.count,u),this.count+=u}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return F.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Cr;(function(Q){Q[Q.ALPHA=0]="ALPHA",Q[Q.LOWER=1]="LOWER",Q[Q.MIXED=2]="MIXED",Q[Q.PUNCT=3]="PUNCT",Q[Q.ALPHA_SHIFT=4]="ALPHA_SHIFT",Q[Q.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Cr||(Cr={}));function Nd(){if(typeof window<"u")return window.BigInt||null;if(typeof Eu<"u")return Eu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $i;function Xn(Q){if(typeof $i>"u"&&($i=Nd()),$i===null)throw new Error("BigInt is not supported!");return $i(Q)}function Ff(){let Q=[];Q[0]=Xn(1);let i=Xn(900);Q[1]=i;for(let c=2;c<16;c++)Q[c]=Q[c-1]*i;return Q}class Qe{static decode(i,c){let u=new ne(""),m=z.ISO8859_1;u.enableDecoding(m);let p=1,v=i[p++],N=new Oo;for(;p<i[0];){switch(v){case Qe.TEXT_COMPACTION_MODE_LATCH:p=Qe.textCompaction(i,p,u);break;case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:p=Qe.byteCompaction(v,i,m,p,u);break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p++]);break;case Qe.NUMERIC_COMPACTION_MODE_LATCH:p=Qe.numericCompaction(i,p,u);break;case Qe.ECI_CHARSET:z.getCharacterSetECIByValue(i[p++]);break;case Qe.ECI_GENERAL_PURPOSE:p+=2;break;case Qe.ECI_USER_DEFINED:p++;break;case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=Qe.decodeMacroBlock(i,p,N);break;case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:throw new L;default:p--,p=Qe.textCompaction(i,p,u);break}if(p<i.length)v=i[p++];else throw L.getFormatInstance()}if(u.length()===0)throw L.getFormatInstance();let _=new Ve(null,u.toString(),null,c);return _.setOther(N),_}static decodeMacroBlock(i,c,u){if(c+Qe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw L.getFormatInstance();let m=new Int32Array(Qe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<Qe.NUMBER_OF_SEQUENCE_CODEWORDS;N++,c++)m[N]=i[c];u.setSegmentIndex(T.parseInt(Qe.decodeBase900toBase10(m,Qe.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new ne;c=Qe.textCompaction(i,c,p),u.setFileId(p.toString());let v=-1;for(i[c]===Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(v=c+1);c<i[0];)switch(i[c]){case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,i[c]){case Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new ne;c=Qe.textCompaction(i,c+1,N),u.setFileName(N.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new ne;c=Qe.textCompaction(i,c+1,_),u.setSender(_.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let O=new ne;c=Qe.textCompaction(i,c+1,O),u.setAddressee(O.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let V=new ne;c=Qe.numericCompaction(i,c+1,V),u.setSegmentCount(T.parseInt(V.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let J=new ne;c=Qe.numericCompaction(i,c+1,J),u.setTimestamp(Fo.parseLong(J.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ue=new ne;c=Qe.numericCompaction(i,c+1,ue),u.setChecksum(T.parseInt(ue.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let je=new ne;c=Qe.numericCompaction(i,c+1,je),u.setFileSize(Fo.parseLong(je.toString()));break;default:throw L.getFormatInstance()}break;case Qe.MACRO_PDF417_TERMINATOR:c++,u.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(v!==-1){let N=c-v;u.isLastSegment()&&N--,u.setOptionalData(F.copyOfRange(i,v,v+N))}return c}static textCompaction(i,c,u){let m=new Int32Array((i[0]-c)*2),p=new Int32Array((i[0]-c)*2),v=0,N=!1;for(;c<i[0]&&!N;){let _=i[c++];if(_<Qe.TEXT_COMPACTION_MODE_LATCH)m[v]=_/30,m[v+1]=_%30,v+=2;else switch(_){case Qe.TEXT_COMPACTION_MODE_LATCH:m[v++]=Qe.TEXT_COMPACTION_MODE_LATCH;break;case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:c--,N=!0;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[v]=Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=i[c++],p[v]=_,v++;break}}return Qe.decodeTextCompaction(m,p,v,u),c}static decodeTextCompaction(i,c,u,m){let p=Cr.ALPHA,v=Cr.ALPHA,N=0;for(;N<u;){let _=i[N],O="";switch(p){case Cr.ALPHA:if(_<26)O=String.fromCharCode(65+_);else switch(_){case 26:O=" ";break;case Qe.LL:p=Cr.LOWER;break;case Qe.ML:p=Cr.MIXED;break;case Qe.PS:v=p,p=Cr.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Cr.ALPHA;break}break;case Cr.LOWER:if(_<26)O=String.fromCharCode(97+_);else switch(_){case 26:O=" ";break;case Qe.AS:v=p,p=Cr.ALPHA_SHIFT;break;case Qe.ML:p=Cr.MIXED;break;case Qe.PS:v=p,p=Cr.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Cr.ALPHA;break}break;case Cr.MIXED:if(_<Qe.PL)O=Qe.MIXED_CHARS[_];else switch(_){case Qe.PL:p=Cr.PUNCT;break;case 26:O=" ";break;case Qe.LL:p=Cr.LOWER;break;case Qe.AL:p=Cr.ALPHA;break;case Qe.PS:v=p,p=Cr.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Cr.ALPHA;break}break;case Cr.PUNCT:if(_<Qe.PAL)O=Qe.PUNCT_CHARS[_];else switch(_){case Qe.PAL:p=Cr.ALPHA;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Cr.ALPHA;break}break;case Cr.ALPHA_SHIFT:if(p=v,_<26)O=String.fromCharCode(65+_);else switch(_){case 26:O=" ";break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Cr.ALPHA;break}break;case Cr.PUNCT_SHIFT:if(p=v,_<Qe.PAL)O=Qe.PUNCT_CHARS[_];else switch(_){case Qe.PAL:p=Cr.ALPHA;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Cr.ALPHA;break}break}O!==""&&m.append(O),N++}}static byteCompaction(i,c,u,m,p){let v=new Of,N=0,_=0,O=!1;switch(i){case Qe.BYTE_COMPACTION_MODE_LATCH:let V=new Int32Array(6),J=c[m++];for(;m<c[0]&&!O;)switch(V[N++]=J,_=900*_+J,J=c[m++],J){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:m--,O=!0;break;default:if(N%5===0&&N>0){for(let ue=0;ue<6;++ue)v.write(Number(Xn(_)>>Xn(8*(5-ue))));_=0,N=0}break}m===c[0]&&J<Qe.TEXT_COMPACTION_MODE_LATCH&&(V[N++]=J);for(let ue=0;ue<N;ue++)v.write(V[ue]);break;case Qe.BYTE_COMPACTION_MODE_LATCH_6:for(;m<c[0]&&!O;){let ue=c[m++];if(ue<Qe.TEXT_COMPACTION_MODE_LATCH)N++,_=900*_+ue;else switch(ue){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:m--,O=!0;break}if(N%5===0&&N>0){for(let je=0;je<6;++je)v.write(Number(Xn(_)>>Xn(8*(5-je))));_=0,N=0}}break}return p.append(ee.decode(v.toByteArray(),u)),m}static numericCompaction(i,c,u){let m=0,p=!1,v=new Int32Array(Qe.MAX_NUMERIC_CODEWORDS);for(;c<i[0]&&!p;){let N=i[c++];if(c===i[0]&&(p=!0),N<Qe.TEXT_COMPACTION_MODE_LATCH)v[m]=N,m++;else switch(N){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:c--,p=!0;break}(m%Qe.MAX_NUMERIC_CODEWORDS===0||N===Qe.NUMERIC_COMPACTION_MODE_LATCH||p)&&m>0&&(u.append(Qe.decodeBase900toBase10(v,m)),m=0)}return c}static decodeBase900toBase10(i,c){let u=Xn(0);for(let p=0;p<c;p++)u+=Qe.EXP900[c-p-1]*Xn(i[p]);let m=u.toString();if(m.charAt(0)!=="1")throw new L;return m.substring(1)}}Qe.TEXT_COMPACTION_MODE_LATCH=900,Qe.BYTE_COMPACTION_MODE_LATCH=901,Qe.NUMERIC_COMPACTION_MODE_LATCH=902,Qe.BYTE_COMPACTION_MODE_LATCH_6=924,Qe.ECI_USER_DEFINED=925,Qe.ECI_GENERAL_PURPOSE=926,Qe.ECI_CHARSET=927,Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Qe.MACRO_PDF417_TERMINATOR=922,Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Qe.MAX_NUMERIC_CODEWORDS=15,Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Qe.PL=25,Qe.LL=27,Qe.AS=27,Qe.ML=28,Qe.AL=28,Qe.PS=29,Qe.PAL=29,Qe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Qe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Qe.EXP900=Nd()?Ff():[],Qe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ar{constructor(){}static decode(i,c,u,m,p,v,N){let _=new Hn(i,c,u,m,p),O=null,V=null,J;for(let De=!0;;De=!1){if(c!=null&&(O=ar.getRowIndicatorColumn(i,_,c,!0,v,N)),m!=null&&(V=ar.getRowIndicatorColumn(i,_,m,!1,v,N)),J=ar.merge(O,V),J==null)throw Y.getNotFoundInstance();let Me=J.getBoundingBox();if(De&&Me!=null&&(Me.getMinY()<_.getMinY()||Me.getMaxY()>_.getMaxY()))_=Me;else break}J.setBoundingBox(_);let ue=J.getBarcodeColumnCount()+1;J.setDetectionResultColumn(0,O),J.setDetectionResultColumn(ue,V);let je=O!=null;for(let De=1;De<=ue;De++){let Me=je?De:ue-De;if(J.getDetectionResultColumn(Me)!==void 0)continue;let ze;Me===0||Me===ue?ze=new Gn(_,Me===0):ze=new Xi(_),J.setDetectionResultColumn(Me,ze);let Ke=-1,ht=Ke;for(let gt=_.getMinY();gt<=_.getMaxY();gt++){if(Ke=ar.getStartColumn(J,Me,gt,je),Ke<0||Ke>_.getMaxX()){if(ht===-1)continue;Ke=ht}let ft=ar.detectCodeword(i,_.getMinX(),_.getMaxX(),je,Ke,gt,v,N);ft!=null&&(ze.setCodeword(gt,ft),ht=Ke,v=Math.min(v,ft.getWidth()),N=Math.max(N,ft.getWidth()))}}return ar.createDecoderResult(J)}static merge(i,c){if(i==null&&c==null)return null;let u=ar.getBarcodeMetadata(i,c);if(u==null)return null;let m=Hn.merge(ar.adjustBoundingBox(i),ar.adjustBoundingBox(c));return new Yn(u,m)}static adjustBoundingBox(i){if(i==null)return null;let c=i.getRowHeights();if(c==null)return null;let u=ar.getMax(c),m=0;for(let N of c)if(m+=u-N,N>0)break;let p=i.getCodewords();for(let N=0;m>0&&p[N]==null;N++)m--;let v=0;for(let N=c.length-1;N>=0&&(v+=u-c[N],!(c[N]>0));N--);for(let N=p.length-1;v>0&&p[N]==null;N--)v--;return i.getBoundingBox().addMissingRows(m,v,i.isLeft())}static getMax(i){let c=-1;for(let u of i)c=Math.max(c,u);return c}static getBarcodeMetadata(i,c){let u;if(i==null||(u=i.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let m;return c==null||(m=c.getBarcodeMetadata())==null?u:u.getColumnCount()!==m.getColumnCount()&&u.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&u.getRowCount()!==m.getRowCount()?null:u}static getRowIndicatorColumn(i,c,u,m,p,v){let N=new Gn(c,m);for(let _=0;_<2;_++){let O=_===0?1:-1,V=Math.trunc(Math.trunc(u.getX()));for(let J=Math.trunc(Math.trunc(u.getY()));J<=c.getMaxY()&&J>=c.getMinY();J+=O){let ue=ar.detectCodeword(i,0,i.getWidth(),m,V,J,p,v);ue!=null&&(N.setCodeword(J,ue),m?V=ue.getStartX():V=ue.getEndX())}}return N}static adjustCodewordCount(i,c){let u=c[0][1],m=u.getValue(),p=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ar.getNumberOfECCodeWords(i.getBarcodeECLevel());if(m.length===0){if(p<1||p>Ot.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();u.setValue(p)}else m[0]!==p&&u.setValue(p)}static createDecoderResult(i){let c=ar.createBarcodeMatrix(i);ar.adjustCodewordCount(i,c);let u=new Array,m=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),p=[],v=new Array;for(let _=0;_<i.getBarcodeRowCount();_++)for(let O=0;O<i.getBarcodeColumnCount();O++){let V=c[_][O+1].getValue(),J=_*i.getBarcodeColumnCount()+O;V.length===0?u.push(J):V.length===1?m[J]=V[0]:(v.push(J),p.push(V))}let N=new Array(p.length);for(let _=0;_<N.length;_++)N[_]=p[_];return ar.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),m,Ot.toIntArray(u),Ot.toIntArray(v),N)}static createDecoderResultFromAmbiguousValues(i,c,u,m,p){let v=new Int32Array(m.length),N=100;for(;N-- >0;){for(let _=0;_<v.length;_++)c[m[_]]=p[_][v[_]];try{return ar.decodeCodewords(c,i,u)}catch(_){if(!(_ instanceof S))throw _}if(v.length===0)throw S.getChecksumInstance();for(let _=0;_<v.length;_++)if(v[_]<p[_].length-1){v[_]++;break}else if(v[_]=0,_===v.length-1)throw S.getChecksumInstance()}throw S.getChecksumInstance()}static createBarcodeMatrix(i){let c=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let m=0;m<c.length;m++)for(let p=0;p<c[m].length;p++)c[m][p]=new ya;let u=0;for(let m of i.getDetectionResultColumns()){if(m!=null){for(let p of m.getCodewords())if(p!=null){let v=p.getRowNumber();if(v>=0){if(v>=c.length)continue;c[v][u].setValue(p.getValue())}}}u++}return c}static isValidBarcodeColumn(i,c){return c>=0&&c<=i.getBarcodeColumnCount()+1}static getStartColumn(i,c,u,m){let p=m?1:-1,v=null;if(ar.isValidBarcodeColumn(i,c-p)&&(v=i.getDetectionResultColumn(c-p).getCodeword(u)),v!=null)return m?v.getEndX():v.getStartX();if(v=i.getDetectionResultColumn(c).getCodewordNearby(u),v!=null)return m?v.getStartX():v.getEndX();if(ar.isValidBarcodeColumn(i,c-p)&&(v=i.getDetectionResultColumn(c-p).getCodewordNearby(u)),v!=null)return m?v.getEndX():v.getStartX();let N=0;for(;ar.isValidBarcodeColumn(i,c-p);){c-=p;for(let _ of i.getDetectionResultColumn(c).getCodewords())if(_!=null)return(m?_.getEndX():_.getStartX())+p*N*(_.getEndX()-_.getStartX());N++}return m?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,c,u,m,p,v,N,_){p=ar.adjustCodewordStartColumn(i,c,u,m,p,v);let O=ar.getModuleBitCount(i,c,u,m,p,v);if(O==null)return null;let V,J=fe.sum(O);if(m)V=p+J;else{for(let De=0;De<O.length/2;De++){let Me=O[De];O[De]=O[O.length-1-De],O[O.length-1-De]=Me}V=p,p=V-J}if(!ar.checkCodewordSkew(J,N,_))return null;let ue=es.getDecodedValue(O),je=Ot.getCodeword(ue);return je===-1?null:new Nn(p,V,ar.getCodewordBucketNumber(ue),je)}static getModuleBitCount(i,c,u,m,p,v){let N=p,_=new Int32Array(8),O=0,V=m?1:-1,J=m;for(;(m?N<u:N>=c)&&O<_.length;)i.get(N,v)===J?(_[O]++,N+=V):(O++,J=!J);return O===_.length||N===(m?u:c)&&O===_.length-1?_:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,c,u,m,p,v){let N=p,_=m?-1:1;for(let O=0;O<2;O++){for(;(m?N>=c:N<u)&&m===i.get(N,v);){if(Math.abs(p-N)>ar.CODEWORD_SKEW_SIZE)return p;N+=_}_=-_,m=!m}return N}static checkCodewordSkew(i,c,u){return c-ar.CODEWORD_SKEW_SIZE<=i&&i<=u+ar.CODEWORD_SKEW_SIZE}static decodeCodewords(i,c,u){if(i.length===0)throw L.getFormatInstance();let m=1<<c+1,p=ar.correctErrors(i,u,m);ar.verifyCodewordCount(i,m);let v=Qe.decode(i,""+c);return v.setErrorsCorrected(p),v.setErasures(u.length),v}static correctErrors(i,c,u){if(c!=null&&c.length>u/2+ar.MAX_ERRORS||u<0||u>ar.MAX_EC_CODEWORDS)throw S.getChecksumInstance();return ar.errorCorrection.decode(i,u,c)}static verifyCodewordCount(i,c){if(i.length<4)throw L.getFormatInstance();let u=i[0];if(u>i.length)throw L.getFormatInstance();if(u===0)if(c<i.length)i[0]=i.length-c;else throw L.getFormatInstance()}static getBitCountForCodeword(i){let c=new Int32Array(8),u=0,m=c.length-1;for(;!((i&1)!==u&&(u=i&1,m--,m<0));)c[m]++,i>>=1;return c}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ar.getCodewordBucketNumber(ar.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let c=new Vn;for(let u=0;u<i.length;u++){c.format("Row %2d: ",u);for(let m=0;m<i[u].length;m++){let p=i[u][m];p.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}c.format("%n")}return c.toString()}}ar.CODEWORD_SKEW_SIZE=2,ar.MAX_ERRORS=3,ar.MAX_EC_CODEWORDS=512,ar.errorCorrection=new Ll;class Ta{decode(i,c=null){let u=Ta.decode(i,c,!1);if(u==null||u.length===0||u[0]==null)throw Y.getNotFoundInstance();return u[0]}decodeMultiple(i,c=null){try{return Ta.decode(i,c,!0)}catch(u){throw u instanceof L||u instanceof S?Y.getNotFoundInstance():u}}static decode(i,c,u){const m=new Array,p=Wt.detectMultiple(i,c,u);for(const v of p.getPoints()){const N=ar.decode(p.getBits(),v[4],v[5],v[6],v[7],Ta.getMinCodewordWidth(v),Ta.getMaxCodewordWidth(v)),_=new se(N.getText(),N.getRawBytes(),void 0,v,te.PDF_417);_.putMetadata(ke.ERROR_CORRECTION_LEVEL,N.getECLevel());const O=N.getOther();O!=null&&_.putMetadata(ke.PDF417_EXTRA_METADATA,O),m.push(_)}return m.map(v=>v)}static getMaxWidth(i,c){return i==null||c==null?0:Math.trunc(Math.abs(i.getX()-c.getX()))}static getMinWidth(i,c){return i==null||c==null?T.MAX_VALUE:Math.trunc(Math.abs(i.getX()-c.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(Ta.getMaxWidth(i[0],i[4]),Ta.getMaxWidth(i[6],i[2])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN),Math.max(Ta.getMaxWidth(i[1],i[5]),Ta.getMaxWidth(i[7],i[3])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(Ta.getMinWidth(i[0],i[4]),Ta.getMinWidth(i[6],i[2])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN),Math.min(Ta.getMinWidth(i[1],i[5]),Ta.getMinWidth(i[7],i[3])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN)))}reset(){}}class Pl extends g{}Pl.kind="ReaderException";class kd{constructor(i,c){this.verbose=i===!0,c&&this.setHints(c)}decode(i,c){return c&&this.setHints(c),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const c=!n(i)&&i.get(U.TRY_HARDER)===!0,u=n(i)?null:i.get(U.POSSIBLE_FORMATS),m=new Array;if(!n(u)){const p=u.some(v=>v===te.UPC_A||v===te.UPC_E||v===te.EAN_13||v===te.EAN_8||v===te.CODABAR||v===te.CODE_39||v===te.CODE_93||v===te.CODE_128||v===te.ITF||v===te.RSS_14||v===te.RSS_EXPANDED);p&&!c&&m.push(new Qa(i,this.verbose)),u.includes(te.QR_CODE)&&m.push(new vn),u.includes(te.DATA_MATRIX)&&m.push(new Fs),u.includes(te.AZTEC)&&m.push(new $e),u.includes(te.PDF_417)&&m.push(new Ta),p&&c&&m.push(new Qa(i,this.verbose))}m.length===0&&(c||m.push(new Qa(i,this.verbose)),m.push(new vn),m.push(new Fs),m.push(new $e),m.push(new Ta),c&&m.push(new Qa(i,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Pl("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(i,this.hints)}catch(u){if(u instanceof Pl)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class Bf extends K{constructor(i=null,c=500){const u=new kd;u.setHints(i),super(u,c)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Lf extends K{constructor(i=500){super(new Ta,i)}}class Pf extends K{constructor(i=500){super(new vn,i)}}var zl;(function(Q){Q[Q.ERROR_CORRECTION=0]="ERROR_CORRECTION",Q[Q.CHARACTER_SET=1]="CHARACTER_SET",Q[Q.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",Q[Q.MIN_SIZE=3]="MIN_SIZE",Q[Q.MAX_SIZE=4]="MAX_SIZE",Q[Q.MARGIN=5]="MARGIN",Q[Q.PDF417_COMPACT=6]="PDF417_COMPACT",Q[Q.PDF417_COMPACTION=7]="PDF417_COMPACTION",Q[Q.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",Q[Q.AZTEC_LAYERS=9]="AZTEC_LAYERS",Q[Q.QR_VERSION=10]="QR_VERSION"})(zl||(zl={}));var ua=zl;class Oc{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new et(i,Int32Array.from([1])))}buildGenerator(i){const c=this.cachedGenerators;if(i>=c.length){let u=c[c.length-1];const m=this.field;for(let p=c.length;p<=i;p++){const v=u.multiply(new et(m,Int32Array.from([1,m.exp(p-1+m.getGeneratorBase())])));c.push(v),u=v}}return c[i]}encode(i,c){if(c===0)throw new k("No error correction bytes");const u=i.length-c;if(u<=0)throw new k("No data bytes provided");const m=this.buildGenerator(c),p=new Int32Array(u);A.arraycopy(i,0,p,0,u);let v=new et(this.field,p);v=v.multiplyByMonomial(c,1);const _=v.divide(m)[1].getCoefficients(),O=c-_.length;for(let V=0;V<O;V++)i[u+V]=0;A.arraycopy(_,0,i,u+O,_.length)}}class qr{constructor(){}static applyMaskPenaltyRule1(i){return qr.applyMaskPenaltyRule1Internal(i,!0)+qr.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let c=0;const u=i.getArray(),m=i.getWidth(),p=i.getHeight();for(let v=0;v<p-1;v++){const N=u[v];for(let _=0;_<m-1;_++){const O=N[_];O===N[_+1]&&O===u[v+1][_]&&O===u[v+1][_+1]&&c++}}return qr.N2*c}static applyMaskPenaltyRule3(i){let c=0;const u=i.getArray(),m=i.getWidth(),p=i.getHeight();for(let v=0;v<p;v++)for(let N=0;N<m;N++){const _=u[v];N+6<m&&_[N]===1&&_[N+1]===0&&_[N+2]===1&&_[N+3]===1&&_[N+4]===1&&_[N+5]===0&&_[N+6]===1&&(qr.isWhiteHorizontal(_,N-4,N)||qr.isWhiteHorizontal(_,N+7,N+11))&&c++,v+6<p&&u[v][N]===1&&u[v+1][N]===0&&u[v+2][N]===1&&u[v+3][N]===1&&u[v+4][N]===1&&u[v+5][N]===0&&u[v+6][N]===1&&(qr.isWhiteVertical(u,N,v-4,v)||qr.isWhiteVertical(u,N,v+7,v+11))&&c++}return c*qr.N3}static isWhiteHorizontal(i,c,u){c=Math.max(c,0),u=Math.min(u,i.length);for(let m=c;m<u;m++)if(i[m]===1)return!1;return!0}static isWhiteVertical(i,c,u,m){u=Math.max(u,0),m=Math.min(m,i.length);for(let p=u;p<m;p++)if(i[p][c]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let c=0;const u=i.getArray(),m=i.getWidth(),p=i.getHeight();for(let _=0;_<p;_++){const O=u[_];for(let V=0;V<m;V++)O[V]===1&&c++}const v=i.getHeight()*i.getWidth();return Math.floor(Math.abs(c*2-v)*10/v)*qr.N4}static getDataMaskBit(i,c,u){let m,p;switch(i){case 0:m=u+c&1;break;case 1:m=u&1;break;case 2:m=c%3;break;case 3:m=(u+c)%3;break;case 4:m=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:p=u*c,m=(p&1)+p%3;break;case 6:p=u*c,m=(p&1)+p%3&1;break;case 7:p=u*c,m=p%3+(u+c&1)&1;break;default:throw new k("Invalid mask pattern: "+i)}return m===0}static applyMaskPenaltyRule1Internal(i,c){let u=0;const m=c?i.getHeight():i.getWidth(),p=c?i.getWidth():i.getHeight(),v=i.getArray();for(let N=0;N<m;N++){let _=0,O=-1;for(let V=0;V<p;V++){const J=c?v[N][V]:v[V][N];J===O?_++:(_>=5&&(u+=qr.N1+(_-5)),_=1,O=J)}_>=5&&(u+=qr.N1+(_-5))}return u}}qr.N1=3,qr.N2=3,qr.N3=40,qr.N4=10;class Ul{constructor(i,c){this.width=i,this.height=c;const u=new Array(c);for(let m=0;m!==c;m++)u[m]=new Uint8Array(i);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(i,c){return this.bytes[c][i]}getArray(){return this.bytes}setNumber(i,c,u){this.bytes[c][i]=u}setBoolean(i,c,u){this.bytes[c][i]=u?1:0}clear(i){for(const c of this.bytes)F.fill(c,i)}equals(i){if(!(i instanceof Ul))return!1;const c=i;if(this.width!==c.width||this.height!==c.height)return!1;for(let u=0,m=this.height;u<m;++u){const p=this.bytes[u],v=c.bytes[u];for(let N=0,_=this.width;N<_;++N)if(p[N]!==v[N])return!1}return!0}toString(){const i=new ne;for(let c=0,u=this.height;c<u;++c){const m=this.bytes[c];for(let p=0,v=this.width;p<v;++p)switch(m[p]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class xi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new ne;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<xi.NUM_MASK_PATTERNS}}xi.NUM_MASK_PATTERNS=8;class Er extends g{}Er.kind="WriterException";class Ft{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,c,u,m,p){Ft.clearMatrix(p),Ft.embedBasicPatterns(u,p),Ft.embedTypeInfo(c,m,p),Ft.maybeEmbedVersionInfo(u,p),Ft.embedDataBits(i,m,p)}static embedBasicPatterns(i,c){Ft.embedPositionDetectionPatternsAndSeparators(c),Ft.embedDarkDotAtLeftBottomCorner(c),Ft.maybeEmbedPositionAdjustmentPatterns(i,c),Ft.embedTimingPatterns(c)}static embedTypeInfo(i,c,u){const m=new B;Ft.makeTypeInfoBits(i,c,m);for(let p=0,v=m.getSize();p<v;++p){const N=m.get(m.getSize()-1-p),_=Ft.TYPE_INFO_COORDINATES[p],O=_[0],V=_[1];if(u.setBoolean(O,V,N),p<8){const J=u.getWidth()-p-1;u.setBoolean(J,8,N)}else{const ue=u.getHeight()-7+(p-8);u.setBoolean(8,ue,N)}}}static maybeEmbedVersionInfo(i,c){if(i.getVersionNumber()<7)return;const u=new B;Ft.makeVersionInfoBits(i,u);let m=17;for(let p=0;p<6;++p)for(let v=0;v<3;++v){const N=u.get(m);m--,c.setBoolean(p,c.getHeight()-11+v,N),c.setBoolean(c.getHeight()-11+v,p,N)}}static embedDataBits(i,c,u){let m=0,p=-1,v=u.getWidth()-1,N=u.getHeight()-1;for(;v>0;){for(v===6&&(v-=1);N>=0&&N<u.getHeight();){for(let _=0;_<2;++_){const O=v-_;if(!Ft.isEmpty(u.get(O,N)))continue;let V;m<i.getSize()?(V=i.get(m),++m):V=!1,c!==255&&qr.getDataMaskBit(c,O,N)&&(V=!V),u.setBoolean(O,N,V)}N+=p}p=-p,N+=p,v-=2}if(m!==i.getSize())throw new Er("Not all bits consumed: "+m+"/"+i.getSize())}static findMSBSet(i){return 32-T.numberOfLeadingZeros(i)}static calculateBCHCode(i,c){if(c===0)throw new k("0 polynomial");const u=Ft.findMSBSet(c);for(i<<=u-1;Ft.findMSBSet(i)>=u;)i^=c<<Ft.findMSBSet(i)-u;return i}static makeTypeInfoBits(i,c,u){if(!xi.isValidMaskPattern(c))throw new Er("Invalid mask pattern");const m=i.getBits()<<3|c;u.appendBits(m,5);const p=Ft.calculateBCHCode(m,Ft.TYPE_INFO_POLY);u.appendBits(p,10);const v=new B;if(v.appendBits(Ft.TYPE_INFO_MASK_PATTERN,15),u.xor(v),u.getSize()!==15)throw new Er("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(i,c){c.appendBits(i.getVersionNumber(),6);const u=Ft.calculateBCHCode(i.getVersionNumber(),Ft.VERSION_INFO_POLY);if(c.appendBits(u,12),c.getSize()!==18)throw new Er("should not happen but we got: "+c.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let c=8;c<i.getWidth()-8;++c){const u=(c+1)%2;Ft.isEmpty(i.get(c,6))&&i.setNumber(c,6,u),Ft.isEmpty(i.get(6,c))&&i.setNumber(6,c,u)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Er;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,c,u){for(let m=0;m<8;++m){if(!Ft.isEmpty(u.get(i+m,c)))throw new Er;u.setNumber(i+m,c,0)}}static embedVerticalSeparationPattern(i,c,u){for(let m=0;m<7;++m){if(!Ft.isEmpty(u.get(i,c+m)))throw new Er;u.setNumber(i,c+m,0)}}static embedPositionAdjustmentPattern(i,c,u){for(let m=0;m<5;++m){const p=Ft.POSITION_ADJUSTMENT_PATTERN[m];for(let v=0;v<5;++v)u.setNumber(i+v,c+m,p[v])}}static embedPositionDetectionPattern(i,c,u){for(let m=0;m<7;++m){const p=Ft.POSITION_DETECTION_PATTERN[m];for(let v=0;v<7;++v)u.setNumber(i+v,c+m,p[v])}}static embedPositionDetectionPatternsAndSeparators(i){const c=Ft.POSITION_DETECTION_PATTERN[0].length;Ft.embedPositionDetectionPattern(0,0,i),Ft.embedPositionDetectionPattern(i.getWidth()-c,0,i),Ft.embedPositionDetectionPattern(0,i.getWidth()-c,i);const u=8;Ft.embedHorizontalSeparationPattern(0,u-1,i),Ft.embedHorizontalSeparationPattern(i.getWidth()-u,u-1,i),Ft.embedHorizontalSeparationPattern(0,i.getWidth()-u,i);const m=7;Ft.embedVerticalSeparationPattern(m,0,i),Ft.embedVerticalSeparationPattern(i.getHeight()-m-1,0,i),Ft.embedVerticalSeparationPattern(m,i.getHeight()-m,i)}static maybeEmbedPositionAdjustmentPatterns(i,c){if(i.getVersionNumber()<2)return;const u=i.getVersionNumber()-1,m=Ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let p=0,v=m.length;p!==v;p++){const N=m[p];if(N>=0)for(let _=0;_!==v;_++){const O=m[_];O>=0&&Ft.isEmpty(c.get(O,N))&&Ft.embedPositionAdjustmentPattern(O-2,N-2,c)}}}}Ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ft.VERSION_INFO_POLY=7973,Ft.TYPE_INFO_POLY=1335,Ft.TYPE_INFO_MASK_PATTERN=21522;class zf{constructor(i,c){this.dataBytes=i,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Fr{constructor(){}static calculateMaskPenalty(i){return qr.applyMaskPenaltyRule1(i)+qr.applyMaskPenaltyRule2(i)+qr.applyMaskPenaltyRule3(i)+qr.applyMaskPenaltyRule4(i)}static encode(i,c,u=null){let m=Fr.DEFAULT_BYTE_MODE_ENCODING;const p=u!==null&&u.get(ua.CHARACTER_SET)!==void 0;p&&(m=u.get(ua.CHARACTER_SET).toString());const v=this.chooseMode(i,m),N=new B;if(v===Dt.BYTE&&(p||Fr.DEFAULT_BYTE_MODE_ENCODING!==m)){const gt=z.getCharacterSetECIByName(m);gt!==void 0&&this.appendECI(gt,N)}this.appendModeInfo(v,N);const _=new B;this.appendBytes(i,v,_,m);let O;if(u!==null&&u.get(ua.QR_VERSION)!==void 0){const gt=Number.parseInt(u.get(ua.QR_VERSION).toString(),10);O=Tt.getVersionForNumber(gt);const ft=this.calculateBitsNeeded(v,N,_,O);if(!this.willFit(ft,O,c))throw new Er("Data too big for requested version")}else O=this.recommendVersion(c,v,N,_);const V=new B;V.appendBitArray(N);const J=v===Dt.BYTE?_.getSizeInBytes():i.length;this.appendLengthInfo(J,O,v,V),V.appendBitArray(_);const ue=O.getECBlocksForLevel(c),je=O.getTotalCodewords()-ue.getTotalECCodewords();this.terminateBits(je,V);const De=this.interleaveWithECBytes(V,O.getTotalCodewords(),je,ue.getNumBlocks()),Me=new xi;Me.setECLevel(c),Me.setMode(v),Me.setVersion(O);const ze=O.getDimensionForVersion(),Ke=new Ul(ze,ze),ht=this.chooseMaskPattern(De,c,O,Ke);return Me.setMaskPattern(ht),Ft.buildMatrix(De,c,O,ht,Ke),Me.setMatrix(Ke),Me}static recommendVersion(i,c,u,m){const p=this.calculateBitsNeeded(c,u,m,Tt.getVersionForNumber(1)),v=this.chooseVersion(p,i),N=this.calculateBitsNeeded(c,u,m,v);return this.chooseVersion(N,i)}static calculateBitsNeeded(i,c,u,m){return c.getSize()+i.getCharacterCountBits(m)+u.getSize()}static getAlphanumericCode(i){return i<Fr.ALPHANUMERIC_TABLE.length?Fr.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,c=null){if(z.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(i))return Dt.KANJI;let u=!1,m=!1;for(let p=0,v=i.length;p<v;++p){const N=i.charAt(p);if(Fr.isDigit(N))u=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)m=!0;else return Dt.BYTE}return m?Dt.ALPHANUMERIC:u?Dt.NUMERIC:Dt.BYTE}static isOnlyDoubleByteKanji(i){let c;try{c=ee.encode(i,z.SJIS)}catch{return!1}const u=c.length;if(u%2!==0)return!1;for(let m=0;m<u;m+=2){const p=c[m]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(i,c,u,m){let p=Number.MAX_SAFE_INTEGER,v=-1;for(let N=0;N<xi.NUM_MASK_PATTERNS;N++){Ft.buildMatrix(i,c,u,N,m);let _=this.calculateMaskPenalty(m);_<p&&(p=_,v=N)}return v}static chooseVersion(i,c){for(let u=1;u<=40;u++){const m=Tt.getVersionForNumber(u);if(Fr.willFit(i,m,c))return m}throw new Er("Data too big")}static willFit(i,c,u){const m=c.getTotalCodewords(),v=c.getECBlocksForLevel(u).getTotalECCodewords(),N=m-v,_=(i+7)/8;return N>=_}static terminateBits(i,c){const u=i*8;if(c.getSize()>u)throw new Er("data bits cannot fit in the QR Code"+c.getSize()+" > "+u);for(let v=0;v<4&&c.getSize()<u;++v)c.appendBit(!1);const m=c.getSize()&7;if(m>0)for(let v=m;v<8;v++)c.appendBit(!1);const p=i-c.getSizeInBytes();for(let v=0;v<p;++v)c.appendBits((v&1)===0?236:17,8);if(c.getSize()!==u)throw new Er("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,c,u,m,p,v){if(m>=u)throw new Er("Block ID too large");const N=i%u,_=u-N,O=Math.floor(i/u),V=O+1,J=Math.floor(c/u),ue=J+1,je=O-J,De=V-ue;if(je!==De)throw new Er("EC bytes mismatch");if(u!==_+N)throw new Er("RS blocks mismatch");if(i!==(J+je)*_+(ue+De)*N)throw new Er("Total bytes mismatch");m<_?(p[0]=J,v[0]=je):(p[0]=ue,v[0]=De)}static interleaveWithECBytes(i,c,u,m){if(i.getSizeInBytes()!==u)throw new Er("Number of bits and data bytes does not match");let p=0,v=0,N=0;const _=new Array;for(let V=0;V<m;++V){const J=new Int32Array(1),ue=new Int32Array(1);Fr.getNumDataBytesAndNumECBytesForBlockID(c,u,m,V,J,ue);const je=J[0],De=new Uint8Array(je);i.toBytes(8*p,De,0,je);const Me=Fr.generateECBytes(De,ue[0]);_.push(new zf(De,Me)),v=Math.max(v,je),N=Math.max(N,Me.length),p+=J[0]}if(u!==p)throw new Er("Data bytes does not match offset");const O=new B;for(let V=0;V<v;++V)for(const J of _){const ue=J.getDataBytes();V<ue.length&&O.appendBits(ue[V],8)}for(let V=0;V<N;++V)for(const J of _){const ue=J.getErrorCorrectionBytes();V<ue.length&&O.appendBits(ue[V],8)}if(c!==O.getSizeInBytes())throw new Er("Interleaving error: "+c+" and "+O.getSizeInBytes()+" differ.");return O}static generateECBytes(i,c){const u=i.length,m=new Int32Array(u+c);for(let v=0;v<u;v++)m[v]=i[v]&255;new Oc(Ae.QR_CODE_FIELD_256).encode(m,c);const p=new Uint8Array(c);for(let v=0;v<c;v++)p[v]=m[u+v];return p}static appendModeInfo(i,c){c.appendBits(i.getBits(),4)}static appendLengthInfo(i,c,u,m){const p=u.getCharacterCountBits(c);if(i>=1<<p)throw new Er(i+" is bigger than "+((1<<p)-1));m.appendBits(i,p)}static appendBytes(i,c,u,m){switch(c){case Dt.NUMERIC:Fr.appendNumericBytes(i,u);break;case Dt.ALPHANUMERIC:Fr.appendAlphanumericBytes(i,u);break;case Dt.BYTE:Fr.append8BitBytes(i,u,m);break;case Dt.KANJI:Fr.appendKanjiBytes(i,u);break;default:throw new Er("Invalid mode: "+c)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const c=Fr.getDigit(i);return c>=0&&c<=9}static appendNumericBytes(i,c){const u=i.length;let m=0;for(;m<u;){const p=Fr.getDigit(i.charAt(m));if(m+2<u){const v=Fr.getDigit(i.charAt(m+1)),N=Fr.getDigit(i.charAt(m+2));c.appendBits(p*100+v*10+N,10),m+=3}else if(m+1<u){const v=Fr.getDigit(i.charAt(m+1));c.appendBits(p*10+v,7),m+=2}else c.appendBits(p,4),m++}}static appendAlphanumericBytes(i,c){const u=i.length;let m=0;for(;m<u;){const p=Fr.getAlphanumericCode(i.charCodeAt(m));if(p===-1)throw new Er;if(m+1<u){const v=Fr.getAlphanumericCode(i.charCodeAt(m+1));if(v===-1)throw new Er;c.appendBits(p*45+v,11),m+=2}else c.appendBits(p,6),m++}}static append8BitBytes(i,c,u){let m;try{m=ee.encode(i,u)}catch(p){throw new Er(p)}for(let p=0,v=m.length;p!==v;p++){const N=m[p];c.appendBits(N,8)}}static appendKanjiBytes(i,c){let u;try{u=ee.encode(i,z.SJIS)}catch(p){throw new Er(p)}const m=u.length;for(let p=0;p<m;p+=2){const v=u[p]&255,N=u[p+1]&255,_=v<<8&4294967295|N;let O=-1;if(_>=33088&&_<=40956?O=_-33088:_>=57408&&_<=60351&&(O=_-49472),O===-1)throw new Er("Invalid byte sequence");const V=(O>>8)*192+(O&255);c.appendBits(V,13)}}static appendECI(i,c){c.appendBits(Dt.ECI.getBits(),4),c.appendBits(i.getValue(),8)}}Fr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Fr.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class hi{write(i,c,u,m=null){if(i.length===0)throw new k("Found empty contents");if(c<0||u<0)throw new k("Requested dimensions are too small: "+c+"x"+u);let p=jr.L,v=hi.QUIET_ZONE_SIZE;m!==null&&(m.get(ua.ERROR_CORRECTION)!==void 0&&(p=jr.fromString(m.get(ua.ERROR_CORRECTION).toString())),m.get(ua.MARGIN)!==void 0&&(v=Number.parseInt(m.get(ua.MARGIN).toString(),10)));const N=Fr.encode(i,p,m);return this.renderResult(N,c,u,v)}writeToDom(i,c,u,m,p=null){typeof i=="string"&&(i=document.querySelector(i));const v=this.write(c,u,m,p);i&&i.appendChild(v)}renderResult(i,c,u,m){const p=i.getMatrix();if(p===null)throw new Ce;const v=p.getWidth(),N=p.getHeight(),_=v+m*2,O=N+m*2,V=Math.max(c,_),J=Math.max(u,O),ue=Math.min(Math.floor(V/_),Math.floor(J/O)),je=Math.floor((V-v*ue)/2),De=Math.floor((J-N*ue)/2),Me=this.createSVGElement(V,J);for(let ze=0,Ke=De;ze<N;ze++,Ke+=ue)for(let ht=0,gt=je;ht<v;ht++,gt+=ue)if(p.get(ht,ze)===1){const ft=this.createSvgRectElement(gt,Ke,ue,ue);Me.appendChild(ft)}return Me}createSVGElement(i,c){const u=document.createElementNS(hi.SVG_NS,"svg");return u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(i,c,u,m){const p=document.createElementNS(hi.SVG_NS,"rect");return p.setAttributeNS(null,"x",i.toString()),p.setAttributeNS(null,"y",c.toString()),p.setAttributeNS(null,"height",u.toString()),p.setAttributeNS(null,"width",m.toString()),p.setAttributeNS(null,"fill","#000000"),p}}hi.QUIET_ZONE_SIZE=4,hi.SVG_NS="http://www.w3.org/2000/svg";class Wi{encode(i,c,u,m,p){if(i.length===0)throw new k("Found empty contents");if(c!==te.QR_CODE)throw new k("Can only encode QR_CODE, but got "+c);if(u<0||m<0)throw new k(`Requested dimensions are too small: ${u}x${m}`);let v=jr.L,N=Wi.QUIET_ZONE_SIZE;p!==null&&(p.get(ua.ERROR_CORRECTION)!==void 0&&(v=jr.fromString(p.get(ua.ERROR_CORRECTION).toString())),p.get(ua.MARGIN)!==void 0&&(N=Number.parseInt(p.get(ua.MARGIN).toString(),10)));const _=Fr.encode(i,v,p);return Wi.renderResult(_,u,m,N)}static renderResult(i,c,u,m){const p=i.getMatrix();if(p===null)throw new Ce;const v=p.getWidth(),N=p.getHeight(),_=v+m*2,O=N+m*2,V=Math.max(c,_),J=Math.max(u,O),ue=Math.min(Math.floor(V/_),Math.floor(J/O)),je=Math.floor((V-v*ue)/2),De=Math.floor((J-N*ue)/2),Me=new le(V,J);for(let ze=0,Ke=De;ze<N;ze++,Ke+=ue)for(let ht=0,gt=je;ht<v;ht++,gt+=ue)p.get(ht,ze)===1&&Me.setRegion(gt,Ke,ue,ue);return Me}}Wi.QUIET_ZONE_SIZE=4;class Uf{encode(i,c,u,m,p){let v;switch(c){case te.QR_CODE:v=new Wi;break;default:throw new k("No encoder available for format "+c)}return v.encode(i,c,u,m,p)}}class rn extends ye{constructor(i,c,u,m,p,v,N,_){if(super(v,N),this.yuvData=i,this.dataWidth=c,this.dataHeight=u,this.left=m,this.top=p,m+v>c||p+N>u)throw new k("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(v,N)}getRow(i,c){if(i<0||i>=this.getHeight())throw new k("Requested row is outside the image: "+i);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(i+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,m,c,0,u),c}getMatrix(){const i=this.getWidth(),c=this.getHeight();if(i===this.dataWidth&&c===this.dataHeight)return this.yuvData;const u=i*c,m=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return A.arraycopy(this.yuvData,p,m,0,u),m;for(let v=0;v<c;v++){const N=v*i;A.arraycopy(this.yuvData,p,m,N,i),p+=this.dataWidth}return m}isCropSupported(){return!0}crop(i,c,u,m){return new rn(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+c,u,m,!1)}renderThumbnail(){const i=this.getWidth()/rn.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/rn.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(i*c),m=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let v=0;v<c;v++){const N=v*i;for(let _=0;_<i;_++){const O=m[p+_*rn.THUMBNAIL_SCALE_FACTOR]&255;u[N+_]=4278190080|O*65793}p+=this.dataWidth*rn.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/rn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,c){const u=this.yuvData;for(let m=0,p=this.top*this.dataWidth+this.left;m<c;m++,p+=this.dataWidth){const v=p+i/2;for(let N=p,_=p+i-1;N<v;N++,_--){const O=u[N];u[N]=u[_],u[_]=O}}}invert(){return new oe(this)}}rn.THUMBNAIL_SCALE_FACTOR=2;class Hl extends ye{constructor(i,c,u,m,p,v,N){if(super(c,u),this.dataWidth=m,this.dataHeight=p,this.left=v,this.top=N,i.BYTES_PER_ELEMENT===4){const _=c*u,O=new Uint8ClampedArray(_);for(let V=0;V<_;V++){const J=i[V],ue=J>>16&255,je=J>>7&510,De=J&255;O[V]=(ue+je+De)/4&255}this.luminances=O}else this.luminances=i;if(m===void 0&&(this.dataWidth=c),p===void 0&&(this.dataHeight=u),v===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+u>this.dataHeight)throw new k("Crop rectangle does not fit within image data.")}getRow(i,c){if(i<0||i>=this.getHeight())throw new k("Requested row is outside the image: "+i);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(i+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,m,c,0,u),c}getMatrix(){const i=this.getWidth(),c=this.getHeight();if(i===this.dataWidth&&c===this.dataHeight)return this.luminances;const u=i*c,m=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return A.arraycopy(this.luminances,p,m,0,u),m;for(let v=0;v<c;v++){const N=v*i;A.arraycopy(this.luminances,p,m,N,i),p+=this.dataWidth}return m}isCropSupported(){return!0}crop(i,c,u,m){return new Hl(this.luminances,u,m,this.dataWidth,this.dataHeight,this.left+i,this.top+c)}invert(){return new oe(this)}}class Ki extends z{static forName(i){return this.getCharacterSetECIByName(i)}}class Fc{}Fc.ISO_8859_1=z.ISO8859_1;class Bc{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Lc{static singletonList(i){return[i]}static min(i,c){return i.sort(c)[0]}}class jd{constructor(i){this.previous=i}getPrevious(){return this.previous}}class mi extends jd{constructor(i,c,u){super(i),this.value=c,this.bitCount=u}appendTo(i,c){i.appendBits(this.value,this.bitCount)}add(i,c){return new mi(this,i,c)}addBinaryShift(i,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new mi(this,i,c)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+T.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class Lo extends mi{constructor(i,c,u){super(i,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=u}appendTo(i,c){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):u===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(c[this.binaryShiftStart+u],8)}addBinaryShift(i,c){return new Lo(this,i,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Zi(Q,i,c){return new Lo(Q,i,c)}function Vl(Q,i,c){return new mi(Q,i,c)}const Hf=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qn=0,Gl=1,ps=2,Qi=3,ts=4,Vf=new mi(null,0,0),Ji=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Cd(Q){for(let i of Q)F.fill(i,-1);return Q[qn][ts]=0,Q[Gl][ts]=0,Q[Gl][qn]=28,Q[Qi][ts]=0,Q[ps][ts]=0,Q[ps][qn]=15,Q}const Pc=Cd(F.createInt32Array(6,6));class Es{constructor(i,c,u,m){this.token=i,this.mode=c,this.binaryShiftByteCount=u,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,c){let u=this.bitCount,m=this.token;if(i!==this.mode){let v=Ji[this.mode][i];m=Vl(m,v&65535,v>>16),u+=v>>16}let p=i===ps?4:5;return m=Vl(m,c,p),new Es(m,i,0,u+p)}shiftAndAppend(i,c){let u=this.token,m=this.mode===ps?4:5;return u=Vl(u,Pc[this.mode][i],m),u=Vl(u,c,5),new Es(u,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(i){let c=this.token,u=this.mode,m=this.bitCount;if(this.mode===ts||this.mode===ps){let N=Ji[u][qn];c=Vl(c,N&65535,N>>16),m+=N>>16,u=qn}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,v=new Es(c,u,this.binaryShiftByteCount+1,m+p);return v.binaryShiftByteCount===2078&&(v=v.endBinaryShift(i+1)),v}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=Zi(c,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Es(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let c=this.bitCount+(Ji[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?c+=Es.calculateBinaryShiftCost(i)-Es.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(c+=10),c<=i.bitCount}toBitArray(i){let c=[];for(let m=this.endBinaryShift(i.length).token;m!==null;m=m.getPrevious())c.unshift(m);let u=new B;for(const m of c)m.appendTo(u,i);return u}toString(){return G.format("%s bits=%d bytes=%d",Hf[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Es.INITIAL_STATE=new Es(Vf,qn,0,0);function zc(Q){const i=G.getCharCode(" "),c=G.getCharCode("."),u=G.getCharCode(",");Q[qn][i]=1;const m=G.getCharCode("Z"),p=G.getCharCode("A");for(let ue=p;ue<=m;ue++)Q[qn][ue]=ue-p+2;Q[Gl][i]=1;const v=G.getCharCode("z"),N=G.getCharCode("a");for(let ue=N;ue<=v;ue++)Q[Gl][ue]=ue-N+2;Q[ps][i]=1;const _=G.getCharCode("9"),O=G.getCharCode("0");for(let ue=O;ue<=_;ue++)Q[ps][ue]=ue-O+2;Q[ps][u]=12,Q[ps][c]=13;const V=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ue=0;ue<V.length;ue++)Q[Qi][G.getCharCode(V[ue])]=ue;const J=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ue=0;ue<J.length;ue++)G.getCharCode(J[ue])>0&&(Q[ts][G.getCharCode(J[ue])]=ue);return Q}const Po=zc(F.createInt32Array(5,256));class el{constructor(i){this.text=i}encode(){const i=G.getCharCode(" "),c=G.getCharCode(`
`);let u=Lc.singletonList(Es.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let v,N=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case G.getCharCode("\r"):v=N===c?2:0;break;case G.getCharCode("."):v=N===i?3:0;break;case G.getCharCode(","):v=N===i?4:0;break;case G.getCharCode(":"):v=N===i?5:0;break;default:v=0}v>0?(u=el.updateStateListForPair(u,p,v),p++):u=this.updateStateListForChar(u,p)}return Lc.min(u,(p,v)=>p.getBitCount()-v.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,c){const u=[];for(let m of i)this.updateStateForChar(m,c,u);return el.simplifyStates(u)}updateStateForChar(i,c,u){let m=this.text[c]&255,p=Po[i.getMode()][m]>0,v=null;for(let N=0;N<=ts;N++){let _=Po[N][m];if(_>0){if(v==null&&(v=i.endBinaryShift(c)),!p||N===i.getMode()||N===ps){const O=v.latchAndAppend(N,_);u.push(O)}if(!p&&Pc[i.getMode()][N]>=0){const O=v.shiftAndAppend(N,_);u.push(O)}}}if(i.getBinaryShiftByteCount()>0||Po[i.getMode()][m]===0){let N=i.addBinaryShiftChar(c);u.push(N)}}static updateStateListForPair(i,c,u){const m=[];for(let p of i)this.updateStateForPair(p,c,u,m);return this.simplifyStates(m)}static updateStateForPair(i,c,u,m){let p=i.endBinaryShift(c);if(m.push(p.latchAndAppend(ts,u)),i.getMode()!==ts&&m.push(p.shiftAndAppend(ts,u)),u===3||u===4){let v=p.latchAndAppend(ps,16-u).latchAndAppend(ps,1);m.push(v)}if(i.getBinaryShiftByteCount()>0){let v=i.addBinaryShiftChar(c).addBinaryShiftChar(c+1);m.push(v)}}static simplifyStates(i){let c=[];for(const u of i){let m=!0;for(const p of c){if(p.isBetterThanOrEqualTo(u)){m=!1;break}u.isBetterThanOrEqualTo(p)&&(c=c.filter(v=>v!==p))}m&&c.push(u)}return c}}class dr{constructor(){}static encodeBytes(i){return dr.encode(i,dr.DEFAULT_EC_PERCENT,dr.DEFAULT_AZTEC_LAYERS)}static encode(i,c,u){let m=new el(i).encode(),p=T.truncDivision(m.getSize()*c,100)+11,v=m.getSize()+p,N,_,O,V,J;if(u!==dr.DEFAULT_AZTEC_LAYERS){if(N=u<0,_=Math.abs(u),_>(N?dr.MAX_NB_BITS_COMPACT:dr.MAX_NB_BITS))throw new k(G.format("Illegal value %s for layers",u));O=dr.totalBitsInLayer(_,N),V=dr.WORD_SIZE[_];let ft=O-O%V;if(J=dr.stuffBits(m,V),J.getSize()+p>ft)throw new k("Data to large for user specified layer");if(N&&J.getSize()>V*64)throw new k("Data to large for user specified layer")}else{V=0,J=null;for(let ft=0;;ft++){if(ft>dr.MAX_NB_BITS)throw new k("Data too large for an Aztec code");if(N=ft<=3,_=N?ft+1:ft,O=dr.totalBitsInLayer(_,N),v>O)continue;(J==null||V!==dr.WORD_SIZE[_])&&(V=dr.WORD_SIZE[_],J=dr.stuffBits(m,V));let Kt=O-O%V;if(!(N&&J.getSize()>V*64)&&J.getSize()+p<=Kt)break}}let ue=dr.generateCheckWords(J,O,V),je=J.getSize()/V,De=dr.generateModeMessage(N,_,je),Me=(N?11:14)+_*4,ze=new Int32Array(Me),Ke;if(N){Ke=Me;for(let ft=0;ft<ze.length;ft++)ze[ft]=ft}else{Ke=Me+1+2*T.truncDivision(T.truncDivision(Me,2)-1,15);let ft=T.truncDivision(Me,2),Kt=T.truncDivision(Ke,2);for(let $t=0;$t<ft;$t++){let Ga=$t+T.truncDivision($t,15);ze[ft-$t-1]=Kt-Ga-1,ze[ft+$t]=Kt+Ga+1}}let ht=new le(Ke);for(let ft=0,Kt=0;ft<_;ft++){let $t=(_-ft)*4+(N?9:12);for(let Ga=0;Ga<$t;Ga++){let Ss=Ga*2;for(let rs=0;rs<2;rs++)ue.get(Kt+Ss+rs)&&ht.set(ze[ft*2+rs],ze[ft*2+Ga]),ue.get(Kt+$t*2+Ss+rs)&&ht.set(ze[ft*2+Ga],ze[Me-1-ft*2-rs]),ue.get(Kt+$t*4+Ss+rs)&&ht.set(ze[Me-1-ft*2-rs],ze[Me-1-ft*2-Ga]),ue.get(Kt+$t*6+Ss+rs)&&ht.set(ze[Me-1-ft*2-Ga],ze[ft*2+rs])}Kt+=$t*8}if(dr.drawModeMessage(ht,N,Ke,De),N)dr.drawBullsEye(ht,T.truncDivision(Ke,2),5);else{dr.drawBullsEye(ht,T.truncDivision(Ke,2),7);for(let ft=0,Kt=0;ft<T.truncDivision(Me,2)-1;ft+=15,Kt+=16)for(let $t=T.truncDivision(Ke,2)&1;$t<Ke;$t+=2)ht.set(T.truncDivision(Ke,2)-Kt,$t),ht.set(T.truncDivision(Ke,2)+Kt,$t),ht.set($t,T.truncDivision(Ke,2)-Kt),ht.set($t,T.truncDivision(Ke,2)+Kt)}let gt=new Bc;return gt.setCompact(N),gt.setSize(Ke),gt.setLayers(_),gt.setCodeWords(je),gt.setMatrix(ht),gt}static drawBullsEye(i,c,u){for(let m=0;m<u;m+=2)for(let p=c-m;p<=c+m;p++)i.set(p,c-m),i.set(p,c+m),i.set(c-m,p),i.set(c+m,p);i.set(c-u,c-u),i.set(c-u+1,c-u),i.set(c-u,c-u+1),i.set(c+u,c-u),i.set(c+u,c-u+1),i.set(c+u,c+u-1)}static generateModeMessage(i,c,u){let m=new B;return i?(m.appendBits(c-1,2),m.appendBits(u-1,6),m=dr.generateCheckWords(m,28,4)):(m.appendBits(c-1,5),m.appendBits(u-1,11),m=dr.generateCheckWords(m,40,4)),m}static drawModeMessage(i,c,u,m){let p=T.truncDivision(u,2);if(c)for(let v=0;v<7;v++){let N=p-3+v;m.get(v)&&i.set(N,p-5),m.get(v+7)&&i.set(p+5,N),m.get(20-v)&&i.set(N,p+5),m.get(27-v)&&i.set(p-5,N)}else for(let v=0;v<10;v++){let N=p-5+v+T.truncDivision(v,5);m.get(v)&&i.set(N,p-7),m.get(v+10)&&i.set(p+7,N),m.get(29-v)&&i.set(N,p+7),m.get(39-v)&&i.set(p-7,N)}}static generateCheckWords(i,c,u){let m=i.getSize()/u,p=new Oc(dr.getGF(u)),v=T.truncDivision(c,u),N=dr.bitsToWords(i,u,v);p.encode(N,v-m);let _=c%u,O=new B;O.appendBits(0,_);for(const V of Array.from(N))O.appendBits(V,u);return O}static bitsToWords(i,c,u){let m=new Int32Array(u),p,v;for(p=0,v=i.getSize()/c;p<v;p++){let N=0;for(let _=0;_<c;_++)N|=i.get(p*c+_)?1<<c-_-1:0;m[p]=N}return m}static getGF(i){switch(i){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new k("Unsupported word size "+i)}}static stuffBits(i,c){let u=new B,m=i.getSize(),p=(1<<c)-2;for(let v=0;v<m;v+=c){let N=0;for(let _=0;_<c;_++)(v+_>=m||i.get(v+_))&&(N|=1<<c-1-_);(N&p)===p?(u.appendBits(N&p,c),v--):(N&p)===0?(u.appendBits(N|1,c),v--):u.appendBits(N,c)}return u}static totalBitsInLayer(i,c){return((c?88:112)+16*i)*i}}dr.DEFAULT_EC_PERCENT=33,dr.DEFAULT_AZTEC_LAYERS=0,dr.MAX_NB_BITS=32,dr.MAX_NB_BITS_COMPACT=4,dr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zo{encode(i,c,u,m){return this.encodeWithHints(i,c,u,m,null)}encodeWithHints(i,c,u,m,p){let v=Fc.ISO_8859_1,N=dr.DEFAULT_EC_PERCENT,_=dr.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(ua.CHARACTER_SET)&&(v=Ki.forName(p.get(ua.CHARACTER_SET).toString())),p.has(ua.ERROR_CORRECTION)&&(N=T.parseInt(p.get(ua.ERROR_CORRECTION).toString())),p.has(ua.AZTEC_LAYERS)&&(_=T.parseInt(p.get(ua.AZTEC_LAYERS).toString()))),zo.encodeLayers(i,c,u,m,v,N,_)}static encodeLayers(i,c,u,m,p,v,N){if(c!==te.AZTEC)throw new k("Can only encode AZTEC, but got "+c);let _=dr.encode(G.getBytes(i,p),v,N);return zo.renderResult(_,u,m)}static renderResult(i,c,u){let m=i.getMatrix();if(m==null)throw new Ce;let p=m.getWidth(),v=m.getHeight(),N=Math.max(c,p),_=Math.max(u,v),O=Math.min(N/p,_/v),V=(N-p*O)/2,J=(_-v*O)/2,ue=new le(N,_);for(let je=0,De=J;je<v;je++,De+=O)for(let Me=0,ze=V;Me<p;Me++,ze+=O)m.get(Me,je)&&ue.setRegion(ze,De,O,O);return ue}}r.AbstractExpandedDecoder=we,r.ArgumentException=w,r.ArithmeticException=be,r.AztecCode=Bc,r.AztecCodeReader=$e,r.AztecCodeWriter=zo,r.AztecDecoder=Le,r.AztecDetector=It,r.AztecDetectorResult=ut,r.AztecEncoder=dr,r.AztecHighLevelEncoder=el,r.AztecPoint=Yt,r.BarcodeFormat=te,r.Binarizer=D,r.BinaryBitmap=C,r.BitArray=B,r.BitMatrix=le,r.BitSource=Ja,r.BrowserAztecCodeReader=jt,r.BrowserBarcodeReader=Ln,r.BrowserCodeReader=K,r.BrowserDatamatrixCodeReader=Mf,r.BrowserMultiFormatReader=Bf,r.BrowserPDF417Reader=Lf,r.BrowserQRCodeReader=Pf,r.BrowserQRCodeSvgWriter=hi,r.CharacterSetECI=z,r.ChecksumException=S,r.Code128Reader=lt,r.Code39Reader=At,r.DataMatrixDecodedBitStreamParser=Pn,r.DataMatrixReader=Fs,r.DecodeHintType=U,r.DecoderResult=Ve,r.DefaultGridSampler=ur,r.DetectorResult=wt,r.EAN13Reader=Jr,r.EncodeHintType=ua,r.Exception=g,r.FormatException=L,r.GenericGF=Ae,r.GenericGFPoly=et,r.GlobalHistogramBinarizer=X,r.GridSampler=Mt,r.GridSamplerInstance=Ut,r.HTMLCanvasElementLuminanceSource=xe,r.HybridBinarizer=de,r.ITFReader=vt,r.IllegalArgumentException=k,r.IllegalStateException=Ce,r.InvertedLuminanceSource=oe,r.LuminanceSource=ye,r.MathUtils=fe,r.MultiFormatOneDReader=Qa,r.MultiFormatReader=kd,r.MultiFormatWriter=Uf,r.NotFoundException=Y,r.OneDReader=Nt,r.PDF417DecodedBitStreamParser=Qe,r.PDF417DecoderErrorCorrection=Ll,r.PDF417Reader=Ta,r.PDF417ResultMetadata=Oo,r.PerspectiveTransform=qt,r.PlanarYUVLuminanceSource=rn,r.QRCodeByteMatrix=Ul,r.QRCodeDataMask=_a,r.QRCodeDecodedBitStreamParser=Gr,r.QRCodeDecoderErrorCorrectionLevel=jr,r.QRCodeDecoderFormatInformation=Aa,r.QRCodeEncoder=Fr,r.QRCodeEncoderQRCode=xi,r.QRCodeMaskUtil=qr,r.QRCodeMatrixUtil=Ft,r.QRCodeMode=Dt,r.QRCodeReader=vn,r.QRCodeVersion=Tt,r.QRCodeWriter=Wi,r.RGBLuminanceSource=Hl,r.RSS14Reader=zt,r.RSSExpandedReader=rt,r.ReaderException=Pl,r.ReedSolomonDecoder=Je,r.ReedSolomonEncoder=Oc,r.ReedSolomonException=Fe,r.Result=se,r.ResultMetadataType=ke,r.ResultPoint=Ee,r.StringUtils=G,r.UnsupportedOperationException=W,r.VideoInputDevice=ae,r.WhiteRectangleDetector=Et,r.WriterException=Er,r.ZXingArrays=F,r.ZXingCharset=Ki,r.ZXingInteger=T,r.ZXingStandardCharsets=Fc,r.ZXingStringBuilder=ne,r.ZXingStringEncoding=ee,r.ZXingSystem=A,r.createAbstractExpandedDecoder=pt,Object.defineProperty(r,"__esModule",{value:!0})})}(_0,_0.exports)),_0.exports}var Yr=WA();const KA=hf(Yr),ZA=jk({__proto__:null,default:KA},[Yr]);var Yb=function(){function t(a,r,n){if(this.formatMap=new Map([[Ct.QR_CODE,Yr.BarcodeFormat.QR_CODE],[Ct.AZTEC,Yr.BarcodeFormat.AZTEC],[Ct.CODABAR,Yr.BarcodeFormat.CODABAR],[Ct.CODE_39,Yr.BarcodeFormat.CODE_39],[Ct.CODE_93,Yr.BarcodeFormat.CODE_93],[Ct.CODE_128,Yr.BarcodeFormat.CODE_128],[Ct.DATA_MATRIX,Yr.BarcodeFormat.DATA_MATRIX],[Ct.MAXICODE,Yr.BarcodeFormat.MAXICODE],[Ct.ITF,Yr.BarcodeFormat.ITF],[Ct.EAN_13,Yr.BarcodeFormat.EAN_13],[Ct.EAN_8,Yr.BarcodeFormat.EAN_8],[Ct.PDF_417,Yr.BarcodeFormat.PDF_417],[Ct.RSS_14,Yr.BarcodeFormat.RSS_14],[Ct.RSS_EXPANDED,Yr.BarcodeFormat.RSS_EXPANDED],[Ct.UPC_A,Yr.BarcodeFormat.UPC_A],[Ct.UPC_E,Yr.BarcodeFormat.UPC_E],[Ct.UPC_EAN_EXTENSION,Yr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!ZA)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var l=this.createZXingFormats(a),d=new Map;d.set(Yr.DecodeHintType.POSSIBLE_FORMATS,l),d.set(Yr.DecodeHintType.TRY_HARDER,!1),this.hints=d}return t.prototype.decodeAsync=function(a){var r=this;return new Promise(function(n,l){try{n(r.decode(a))}catch(d){l(d)}})},t.prototype.decode=function(a){var r=new Yr.MultiFormatReader(this.verbose,this.hints),n=new Yr.HTMLCanvasElementLuminanceSource(a),l=new Yr.BinaryBitmap(new Yr.HybridBinarizer(n)),d=r.decode(l);return{text:d.text,format:vw.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,n,l){a.set(r,n)}),a},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createZXingFormats=function(a){for(var r=[],n=0,l=a;n<l.length;n++){var d=l[n];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),QA=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},JA=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Xb=function(){function t(a,r,n){if(this.formatMap=new Map([[Ct.QR_CODE,"qr_code"],[Ct.AZTEC,"aztec"],[Ct.CODABAR,"codabar"],[Ct.CODE_39,"code_39"],[Ct.CODE_93,"code_93"],[Ct.CODE_128,"code_128"],[Ct.DATA_MATRIX,"data_matrix"],[Ct.ITF,"itf"],[Ct.EAN_13,"ean_13"],[Ct.EAN_8,"ean_8"],[Ct.PDF_417,"pdf417"],[Ct.UPC_A,"upc_a"],[Ct.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var l=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},t.prototype.decodeAsync=function(a){return QA(this,void 0,void 0,function(){var r,n;return JA(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(a)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:vw.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(a){for(var r=null,n=0,l=0,d=a;l<d.length;l++){var f=d[l],h=f.boundingBox.width*f.boundingBox.height;h>n&&(n=h,r=f)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(a){for(var r=[],n=0,l=a;n<l.length;n++){var d=l[n];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,n,l){a.set(r,n)}),a},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),qb=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},$b=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},e_=function(){function t(a,r,n,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Xb.isSupported()?(this.primaryDecoder=new Xb(a,n,l),this.secondaryDecoder=new Yb(a,n,l)):this.primaryDecoder=new Yb(a,n,l)}return t.prototype.decodeAsync=function(a){return qb(this,void 0,void 0,function(){var r;return $b(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(a){return qb(this,void 0,void 0,function(){var r,n;return $b(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,l.sent()];case 3:if(n=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(a){if(this.verbose){var r=performance.now()-a;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,r=0,n=this.executionResults;r<n.length;r++){var l=n[r];a+=l}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),lg=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(n[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function n(){this.constructor=a}a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Ju=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},ef=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},jw=function(){function t(a,r){this.name=a,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(a){var r={};r[this.name]=a;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var r=a[this.name];return r}return null},t}(),t_=function(t){lg(a,t);function a(r,n){return t.call(this,r,n)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(r){var n={};n[this.name]=r;var l={advanced:[n]};return this.track.applyConstraints(l)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(jw),r_=function(t){lg(a,t);function a(r){return t.call(this,"zoom",r)||this}return a}(t_),a_=function(t){lg(a,t);function a(r){return t.call(this,"torch",r)||this}return a}(jw),s_=function(){function t(a){this.track=a}return t.prototype.zoomFeature=function(){return new r_(this.track)},t.prototype.torchFeature=function(){return new a_(this.track)},t}(),n_=function(){function t(a,r,n){this.isClosed=!1,this.parentElement=a,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return t.prototype.createVideoElement=function(a){var r=document.createElement("video");return r.style.width="".concat(a,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=a.surface.clientWidth,l=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(n,l),a.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(a,r,n,l){return Ju(this,void 0,void 0,function(){var d,f;return ef(this,function(h){switch(h.label){case 0:return d=new t(a,r,l),n.aspectRatio?(f={aspectRatio:n.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:h.sent(),h.label=2;case 2:return d.setupSurface(),[2,d]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(a){this.failIfClosed();var r=this,n=function(){setTimeout(a,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(a){return Ju(this,void 0,void 0,function(){return ef(this,function(r){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(r,n){var l=a.mediaStream.getVideoTracks(),d=l.length,f=0;a.mediaStream.getVideoTracks().forEach(function(h){a.mediaStream.removeTrack(h),h.stop(),++f,f>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),r())})})},t.prototype.getCapabilities=function(){return new s_(this.getFirstTrackOrFail())},t}(),i_=function(){function t(a){this.mediaStream=a}return t.prototype.render=function(a,r,n){return Ju(this,void 0,void 0,function(){return ef(this,function(l){return[2,n_.create(a,this.mediaStream,r,n)]})})},t.create=function(a){return Ju(this,void 0,void 0,function(){var r,n;return ef(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=l.sent(),[2,new t(n)]}})})},t}(),Wb=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},Kb=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},l_=function(){function t(){}return t.failIfNotSupported=function(){return Wb(this,void 0,void 0,function(){return Kb(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(a){return Wb(this,void 0,void 0,function(){return Kb(this,function(r){return[2,i_.create(a)]})})},t}(),o_=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},c_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},d_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var a=gc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(a=gc.insecureContextCameraQueryError()),Promise.reject(a)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},t.getCamerasFromMediaDevices=function(){return o_(this,void 0,void 0,function(){var a,r,n,l,d,f,h;return c_(this,function(b){switch(b.label){case 0:return a=function(g){for(var w=g.getVideoTracks(),k=0,C=w;k<C.length;k++){var S=C[k];S.enabled=!1,S.stop(),g.removeTrack(S)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=b.sent(),l=[],d=0,f=n;d<f.length;d++)h=f[d],h.kind==="videoinput"&&l.push({id:h.deviceId,label:h.label});return a(r),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,r){var n=function(d){for(var f=[],h=0,b=d;h<b.length;h++){var g=b[h];g.kind==="video"&&f.push({id:g.id,label:g.label})}a(f)},l=MediaStreamTrack;l.getSources(n)})},t}(),sa;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(sa||(sa={}));var u_=function(){function t(){this.state=sa.NOT_STARTED,this.onGoingTransactionNewState=sa.UNKNOWN}return t.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},t.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===sa.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=sa.UNKNOWN,this.directTransition(a)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===sa.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=sa.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==sa.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(a){switch(this.state){case sa.UNKNOWN:throw"Transition from unknown is not allowed";case sa.NOT_STARTED:this.failIfNewStateIs(a,[sa.PAUSED]);break;case sa.SCANNING:break;case sa.PAUSED:break}},t.prototype.failIfNewStateIs=function(a,r){for(var n=0,l=r;n<l.length;n++){var d=l[n];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},t}(),f_=function(){function t(a){this.stateManager=a}return t.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},t.prototype.directTransition=function(a){this.stateManager.directTransition(a)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===sa.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==sa.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===sa.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===sa.PAUSED},t}(),x_=function(){function t(){}return t.create=function(){return new f_(new u_)},t}(),h_=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(n[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function n(){this.constructor=a}a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gs=function(t){h_(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(Sn),m_=function(){function t(a,r){this.logger=r,this.fps=Gs.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=Gs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?kw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!si(this.qrbox)},t.create=function(a,r){return new t(a,r)},t}(),tf=function(){function t(a,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new Nw(this.verbose),this.qrcode=new e_(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=x_.create()}return t.prototype.start=function(a,r,n,l){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var h=m_.create(r,this.logger);this.clearElement();var b=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=b,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Gs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var k=this,C=this.stateManagerProxy.startTransition(sa.SCANNING);return new Promise(function(S,D){var A=g?h.videoConstraints:k.createVideoConstraints(a);if(!A){C.cancel(),D("videoConstraints should be defined");return}var M={};(!g||h.aspectRatio)&&(M.aspectRatio=h.aspectRatio);var I={onRenderSurfaceReady:function(F,T){k.setupUi(F,T,h),k.isScanning=!0,k.foreverScan(h,n,f)}};l_.failIfNotSupported().then(function(F){F.create(A).then(function(T){return T.render(d.element,M,I).then(function(B){k.renderedCamera=B,C.execute(),S(null)}).catch(function(B){C.cancel(),D(B)})}).catch(function(T){C.cancel(),D(gc.errorGettingUserMedia(T))})}).catch(function(F){C.cancel(),D(gc.cameraStreamingNotSupported())})})},t.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(sa.PAUSED),this.showPausedState(),(si(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,r=function(){a.stateManagerProxy.directTransition(sa.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(sa.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(a.element){var d=document.getElementById(Gs.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),n(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(a,r){return this.scanFileV2(a,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(a,r){var n=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(si(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,d){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(a);var f=new Image;f.onload=function(){var h=f.width,b=f.height,g=document.getElementById(n.elementId),w=g.clientWidth?g.clientWidth:Gs.DEFAULT_WIDTH,k=Math.max(g.clientHeight?g.clientHeight:b,Gs.FILE_SCAN_MIN_HEIGHT),C=n.computeCanvasDrawConfig(h,b,w,k);if(r){var S=n.createCanvasElement(w,k,"qr-canvas-visible");S.style.display="inline-block",g.appendChild(S);var D=S.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=w,D.canvas.height=k,D.drawImage(f,0,0,h,b,C.x,C.y,C.width,C.height)}var A=Gs.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(f.width,C.width),I=Math.max(f.height,C.height),F=M+2*A,T=I+2*A,B=n.createCanvasElement(F,T);g.appendChild(B);var H=B.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=F,H.canvas.height=T,H.drawImage(f,0,0,h,b,A,A,M,I);try{n.qrcode.decodeRobustlyAsync(B).then(function(U){l(Hb.createFromQrcodeResult(U))}).catch(d)}catch(U){d("QR code parse error, error = ".concat(U))}},f.onerror=d,f.onabort=d,f.onstalled=d,f.onsuspend=d,f.src=URL.createObjectURL(a)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return d_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(a){if(a){if(!kw.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(a){var r=[Ct.QR_CODE,Ct.AZTEC,Ct.CODABAR,Ct.CODE_39,Ct.CODE_93,Ct.CODE_128,Ct.DATA_MATRIX,Ct.MAXICODE,Ct.ITF,Ct.EAN_13,Ct.EAN_8,Ct.PDF_417,Ct.RSS_14,Ct.RSS_EXPANDED,Ct.UPC_A,Ct.UPC_E,Ct.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return r;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],l=0,d=a.formatsToSupport;l<d.length;l++){var f=d[l];XA(f)?n.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(a){if(si(a))return!0;if(!si(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(si(a.experimentalFeatures))return!0;var r=a.experimentalFeatures;return si(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(a,r,n){var l=this,d=n.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(a,r,d),h=function(g){if(g<Gs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Gs.MIN_QR_BOX_SIZE,"px.")},b=function(g){return g>a&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=a),g};h(f.width),h(f.height),f.width=b(f.width)},t.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(a,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(a,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return n},t.prototype.setupUi=function(a,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(a,r,n);var l=si(n.qrbox)?{width:a,height:r}:n.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(a,r,l);d.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=n.isShadedBoxEnabled()&&d.height<=r,h={x:0,y:0,width:a,height:r},b=f?this.getShadedRegionBounds(a,r,d):h,g=this.createCanvasElement(b.width,b.height),w={willReadFrequently:!0},k=g.getContext("2d",w);k.canvas.width=b.width,k.canvas.height=b.height,this.element.append(g),f&&this.possiblyInsertShadingElement(this.element,a,r,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=k,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(a){var r=document.createElement("div");r.innerText=gc.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",a.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(a,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return a(l.text,Hb.createFromQrcodeResult(l)),n.possiblyUpdateShaders(!0),!0}).catch(function(l){n.possiblyUpdateShaders(!1);var d=gc.codeParseError(l);return r(d,ww.createFrom(d)),!1})},t.prototype.foreverScan=function(a,r,n){var l=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),f=d.videoWidth/d.clientWidth,h=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*f,g=this.qrRegion.height*h,w=this.qrRegion.x*f,k=this.qrRegion.y*h;this.context.drawImage(d,w,k,b,g,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(a,r,n)},l.getTimeoutFps(a.fps))};this.scanContext(r,n).then(function(S){!S&&a.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,n).finally(function(){C()})):C()}).catch(function(S){l.logger.logError("Error happend while scanning context",S),C()})}},t.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var r="facingMode",n="deviceId",l={user:!0,environment:!0},d="exact",f=function(D){if(D in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},h=Object.keys(a);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var b=Object.keys(a)[0];if(b!==r&&b!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(b===r){var g=a.facingMode;if(typeof g=="string"){if(f(g))return{facingMode:g}}else if(typeof g=="object")if(d in g){if(f(g["".concat(d)]))return{facingMode:{exact:g["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var k=a.deviceId;if(typeof k=="string")return{deviceId:k};if(typeof k=="object"){if(d in k)return{deviceId:{exact:k["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var C=typeof k;throw"Invalid type of 'deviceId' = ".concat(C)}}}var S=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(S)},t.prototype.computeCanvasDrawConfig=function(a,r,n,l){if(a<=n&&r<=l){var d=(n-a)/2,f=(l-r)/2;return{x:d,y:f,width:a,height:r}}else{var h=a,b=r;return a>n&&(r=n/a*r,a=n),r>l&&(a=l/r*a,r=l),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(b)+" to ".concat(a,"X").concat(r,".")),this.computeCanvasDrawConfig(a,r,n,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},t.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=a?Gs.BORDER_SHADER_MATCH_COLOR:Gs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(a,r,n){var l=a,d=r,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(d,"px"),f.style.display="none",f.id=si(n)?"qr-canvas":n,f},t.prototype.getShadedRegionBounds=function(a,r,n){if(n.width>a||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(a,r,n,l){if(!(r-l.width<1||n-l.height<1)){var d=document.createElement("div");d.style.position="absolute";var f=(r-l.width)/2,h=(n-l.height)/2;if(d.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Gs.SHADED_REGION_ELEMENT_ID),r-l.width<11||n-l.height<11)this.hasBorderShaders=!1;else{var b=5,g=40;this.insertShaderBorders(d,g,b,-b,null,0,!0),this.insertShaderBorders(d,g,b,-b,null,0,!1),this.insertShaderBorders(d,g,b,null,-b,0,!0),this.insertShaderBorders(d,g,b,null,-b,0,!1),this.insertShaderBorders(d,b,g+b,-b,null,-b,!0),this.insertShaderBorders(d,b,g+b,null,-b,-b,!0),this.insertShaderBorders(d,b,g+b,-b,null,-b,!1),this.insertShaderBorders(d,b,g+b,null,-b,-b,!1),this.hasBorderShaders=!0}a.append(d)}},t.prototype.insertShaderBorders=function(a,r,n,l,d,f,h){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Gs.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(r,"px"),b.style.height="".concat(n,"px"),l!==null&&(b.style.top="".concat(l,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),h?b.style.left="".concat(f,"px"):b.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),a.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(a){return 1e3/a},t}(),og="data:image/svg+xml;base64,",g_=og+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",p_=og+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Zb=og+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",y_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Qb=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),b_=function(){function t(){this.data=Qb.createDefault();var a=localStorage.getItem(t.LOCAL_STORAGE_KEY);a?this.data=JSON.parse(a):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(a){this.data.hasPermission=a,this.flush()},t.prototype.setLastUsedCameraId=function(a){this.data.lastUsedCameraId=a,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Qb.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),v_=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(a){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Vb.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(l);var d=document.createElement("a");d.innerText=Vb.reportIssues(),d.href="https://github.com/mebjas/html5-qrcode/issues",d.target="new",d.style.color="white",this.infoDiv.appendChild(d),a.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),w_=function(){function t(a,r){this.isShowingInfoIcon=!0,this.onTapIn=a,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(a){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Zb,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},a.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=y_,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Zb,this.infoIcon.style.opacity="0.6")},t}(),N_=function(){function t(){var a=this;this.infoDiv=new v_,this.infoIcon=new w_(function(){a.infoDiv.show()},function(){a.infoDiv.hide()})}return t.prototype.renderInto=function(a){this.infoDiv.renderInto(a),this.infoIcon.renderInto(a)},t}(),k_=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},j_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Jb=function(){function t(){}return t.hasPermissions=function(){return k_(this,void 0,void 0,function(){var a,r,n,l;return j_(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(a=d.sent(),r=0,n=a;r<n.length;r++)if(l=n[r],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),kl=function(){function t(a){this.supportedScanTypes=this.validateAndReturnScanTypes(a)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var a=0,r=this.supportedScanTypes;a<r.length;a++){var n=r[a];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(a){return a===Li.SCAN_TYPE_CAMERA},t.isFileScanType=function(a){return a===Li.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(a){if(!a||a.length===0)return Sn.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Sn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(a.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,l=a;n<l.length;n++){var d=l[n];if(!Sn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(d))throw"Unsupported scan type ".concat(d)}return a},t}(),$s=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Ti=function(){function t(){}return t.createElement=function(a,r){var n=document.createElement(a);return n.id=r,n.classList.add($s.ALL_ELEMENT_CLASS),a==="button"&&n.setAttribute("type","button"),n},t}(),Cw=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},Ew=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},e2=function(){function t(a,r,n){this.isTorchOn=!1,this.torchCapability=a,this.buttonController=r,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return Cw(this,void 0,void 0,function(){var a,r;return Ew(this,function(n){switch(n.label){case 0:this.buttonController.disable(),a=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(a)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),a),[3,4];case 3:return r=n.sent(),this.propagateFailure(a,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(a,r){a===r?(this.buttonController.setText(r?Tr.torchOffButton():Tr.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(a,r){var n=a?Tr.torchOnFailedMessage():Tr.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),C_=function(){function t(a,r){this.onTorchActionFailureCallback=r,this.torchButton=Ti.createElement("button",$s.TORCH_BUTTON_ID),this.torchController=new e2(a,this,r)}return t.prototype.render=function(a,r){var n=this;this.torchButton.innerText=Tr.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var l=this;this.torchButton.addEventListener("click",function(d){return Cw(n,void 0,void 0,function(){return Ew(this,function(f){switch(f.label){case 0:return[4,l.torchController.flipState()];case 1:return f.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove($s.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add($s.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove($s.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add($s.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),a.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(a){this.torchController=new e2(a,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(a){this.torchButton.innerText=a},t.prototype.reset=function(){this.torchButton.innerText=Tr.torchOnButton(),this.torchController.reset()},t.create=function(a,r,n,l){var d=new t(r,l);return d.render(a,n),d},t}(),E_=function(){function t(a,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",a.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Ti.createElement("button",$s.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Ti.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var d=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var b=h.target;if(!(b.files&&b.files.length===0)){var g=b.files,w=g[0],k=w.name;d.setImageNameToButton(k),n(w)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(h){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder();var b=h.dataTransfer;if(b){var g=b.files;if(!g||g.length===0)return;for(var w=!1,k=0;k<g.length;++k){var C=g.item(k);if(C){var S=/image.*/;if(C.type.match(S)){w=!0;var D=C.name;d.setImageNameToButton(D),n(C),f.innerText=Tr.dragAndDropMessage();break}}}w||(f.innerText=Tr.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var a=document.createElement("div");return a.style.textAlign="center",a.style.margin="auto",a.style.width="80%",a.style.maxWidth="600px",a.style.border=this.fileBasedScanRegionDefaultBorder(),a.style.padding="10px",a.style.marginBottom="10px",a},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var a=document.createElement("div");return a.innerText=Tr.dragAndDropMessage(),a.style.fontWeight="400",a},t.prototype.setImageNameToButton=function(a){var r=20;if(a.length>r){var n=a.substring(0,8),l=a.length,d=a.substring(l-8,l);a="".concat(n,"....").concat(d)}var f=Tr.fileSelectionChooseAnother()+" - "+a;this.fileSelectionButton.innerText=f},t.prototype.setInitialValueToButton=function(){var a=Tr.fileSelectionChooseImage()+" - "+Tr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=a},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(a,r,n){var l=new t(a,r,n);return l},t}(),S_=function(){function t(a){this.selectElement=Ti.createElement("select",$s.CAMERA_SELECTION_SELECT_ID),this.cameras=a,this.options=[]}return t.prototype.render=function(a){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var l=Tr.selectCamera();r.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var d=1,f=0,h=this.cameras;f<h.length;f++){var b=h[f],g=b.id,w=b.label==null?g:b.label;(!w||w==="")&&(w=[Tr.anonymousCameraPrefix(),d++].join(" "));var k=document.createElement("option");k.value=g,k.innerText=w,this.options.push(k),this.selectElement.appendChild(k)}r.appendChild(this.selectElement),a.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(a){for(var r=0,n=this.options;r<n.length;r++){var l=n[r];if(l.value===a)return!0}return!1},t.prototype.setValue=function(a){if(!this.hasValue(a))throw new Error("".concat(a," is not present in the camera list."));this.selectElement.value=a},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(a,r){var n=new t(r);return n.render(a),n},t}(),A_=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Ti.createElement("input",$s.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(a,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",a.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Tr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var a=Tr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(a,r,n,l){this.rangeInput.min=a.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(a){this.onChangeCallback=a},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(a,r){var n=new t;return n.render(a,r),n},t}(),Ys;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ys||(Ys={}));function __(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function T_(t,a){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:a}}var D_=function(){function t(a,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=a,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.scanTypeSelector=new kl(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Nw(this.verbose),this.persistedDataManager=new b_,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(a,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(d,f){if(a)a(d,f);else{if(n.lastMatchFound===d)return;n.lastMatchFound=d,n.setHeaderMessage(Tr.lastMatch(d),Ys.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(d,f){r&&r(d,f)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new tf(this.getScanRegionId(),T_(this.config,this.verbose))},t.prototype.pause=function(a){(si(a)||a!==!0)&&(a=!1),this.getHtml5QrcodeOrFail().pause(a)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var a=this,r=function(){var n=document.getElementById(a.elementId);n&&(n.innerHTML="",a.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,l){if(!a.html5Qrcode){n();return}a.html5Qrcode.isScanning?a.html5Qrcode.stop().then(function(d){if(!a.html5Qrcode){n();return}a.html5Qrcode.clear(),r(),n()}).catch(function(d){a.verbose&&a.logger.logError("Unable to stop qrcode scanner",d),l(d)}):(a.html5Qrcode.clear(),r(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(a){return this.getHtml5QrcodeOrFail().applyVideoConstraints(a)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(a){return a?(a.fps||(a.fps=Sn.SCAN_DEFAULT_FPS),a.rememberLastUsedCamera!==!Sn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(a.rememberLastUsedCamera=Sn.DEFAULT_REMEMBER_LAST_CAMERA_USED),a.supportedScanTypes||(a.supportedScanTypes=Sn.DEFAULT_SUPPORTED_SCAN_TYPE),a):{fps:Sn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Sn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Sn.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(a){a.style.position="relative",a.style.padding="0px",a.style.border="1px solid silver",this.createHeader(a);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",a.appendChild(r),kl.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),d=this.getDashboardId();l.id=d,l.style.width="100%",a.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(a){a.style.border="none"},t.prototype.setupInitialDashboard=function(a){this.createSection(a),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(a){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",a.appendChild(r);var n=new N_;n.renderInto(r);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",r.appendChild(l)},t.prototype.createSection=function(a){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",a.appendChild(r)},t.prototype.createCameraListUi=function(a,r,n){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(Tr.cameraPermissionRequesting());var d=function(){n||l.createPermissionButton(a,r)};tf.getCameras().then(function(f){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),f&&f.length>0?(a.removeChild(r),l.renderCameraSelection(f)):(l.setHeaderMessage(Tr.noCameraFound(),Ys.STATUS_WARNING),d())}).catch(function(f){l.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:d(),l.setHeaderMessage(f,Ys.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(a,r){var n=this,l=Ti.createElement("button",this.getCameraPermissionButtonId());l.innerText=Tr.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,n.createCameraListUi(a,r,l)}),r.appendChild(l)},t.prototype.createPermissionsUi=function(a,r){var n=this;if(kl.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Jb.hasPermissions().then(function(l){l?n.createCameraListUi(a,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(a,r))}).catch(function(l){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(a,r)});return}this.createPermissionButton(a,r)},t.prototype.createSectionControlPanel=function(){var a=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");a.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=kl.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var l=document.createElement("div");l.style.textAlign="center",n.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,l),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(a){var r=kl.isFileScanType(this.currentScanType),n=this,l=function(d){if(!n.html5Qrcode)throw"html5Qrcode not defined";kl.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Tr.loadingImage()),n.html5Qrcode.scanFileV2(d,!0).then(function(f){n.resetHeaderMessage(),n.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){n.setHeaderMessage(f,Ys.STATUS_WARNING),n.qrCodeErrorCallback(f,ww.createFrom(f))}))};this.fileSelectionUi=E_.create(a,r,l)},t.prototype.renderCameraSelection=function(a){var r=this,n=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var d=A_.create(l,!1),f=function(A){var M=A.zoomFeature();if(M.isSupported()){d.setOnCameraZoomValueChangeCallback(function(F){M.apply(F)});var I=1;r.config.defaultZoomValueIfSupported&&(I=r.config.defaultZoomValueIfSupported),I=qA(I,M.min(),M.max()),d.setValues(M.min(),M.max(),I,M.step()),d.show()}},h=S_.create(l,a),b=document.createElement("span"),g=Ti.createElement("button",$s.CAMERA_START_BUTTON_ID);g.innerText=Tr.scanButtonStartScanningText(),b.appendChild(g);var w=Ti.createElement("button",$s.CAMERA_STOP_BUTTON_ID);w.innerText=Tr.scanButtonStopScanningText(),w.style.display="none",w.disabled=!0,b.appendChild(w);var k,C=function(A){if(!A.torchFeature().isSupported()){k&&k.hide();return}k?k.updateTorchCapability(A.torchFeature()):k=C_.create(b,A.torchFeature(),{display:"none",marginLeft:"5px"},function(M){n.setHeaderMessage(M,Ys.STATUS_WARNING)}),k.show()};l.appendChild(b);var S=function(A){A||(g.style.display="none"),g.innerText=Tr.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,A&&(g.style.display="inline-block")};if(g.addEventListener("click",function(A){g.innerText=Tr.scanButtonScanningStarting(),h.disable(),g.disabled=!0,g.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var M=h.getValue();n.persistedDataManager.setLastUsedCameraId(M),n.html5Qrcode.start(M,__(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(I){w.disabled=!1,w.style.display="inline-block",S(!1);var F=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&C(F),r.config.showZoomSliderIfSupported===!0&&f(F)}).catch(function(I){n.showHideScanTypeSwapLink(!0),h.enable(),S(!0),n.setHeaderMessage(I,Ys.STATUS_WARNING)})}),h.hasSingleItem()&&g.click(),w.addEventListener("click",function(A){if(!n.html5Qrcode)throw"html5Qrcode not defined";w.disabled=!0,n.html5Qrcode.stop().then(function(M){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),h.enable(),g.disabled=!1,w.style.display="none",g.style.display="inline-block",k&&(k.reset(),k.hide()),d.removeOnCameraZoomValueChangeCallback(),d.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(M){w.disabled=!1,n.setHeaderMessage(M,Ys.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var D=n.persistedDataManager.getLastUsedCameraId();h.hasValue(D)?(h.setValue(D),g.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var a=this,r=Tr.textIfCameraScanSelected(),n=Tr.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");d.style.textAlign="center";var f=Ti.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=kl.isCameraScanType(this.currentScanType)?r:n,f.addEventListener("click",function(){if(!a.sectionSwapAllowed){a.verbose&&a.logger.logError("Section swap called when not allowed");return}a.resetHeaderMessage(),a.fileSelectionUi.resetValue(),a.sectionSwapAllowed=!1,kl.isCameraScanType(a.currentScanType)?(a.clearScanRegion(),a.getCameraScanRegion().style.display="none",a.fileSelectionUi.show(),f.innerText=n,a.currentScanType=Li.SCAN_TYPE_FILE,a.insertFileScanImageToScanRegion()):(a.clearScanRegion(),a.getCameraScanRegion().style.display="block",a.fileSelectionUi.hide(),f.innerText=r,a.currentScanType=Li.SCAN_TYPE_CAMERA,a.insertCameraScanImageToScanRegion(),a.startCameraScanIfPermissionExistsOnSwap()),a.sectionSwapAllowed=!0}),d.appendChild(f),l.appendChild(d)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var a=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){Jb.hasPermissions().then(function(n){if(n){var l=document.getElementById(r.getCameraPermissionButtonId());if(!l)throw a.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var a=document.getElementById(this.getHeaderMessageContainerId());a.style.display="none"},t.prototype.setHeaderMessage=function(a,r){r||(r=Ys.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=a,n.style.display="block",r){case Ys.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Ys.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Ys.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(a){this.scanTypeSelector.hasMoreThanOneScanType()&&(a!==!0&&(a=!1),this.sectionSwapAllowed=a,this.getDashboardSectionSwapLink().style.display=a?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var a=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(a.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=g_,this.cameraScanImage.alt=Tr.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var a=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(a.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=p_,this.fileScanImage.alt=Tr.fileScanAltText()},t.prototype.clearScanRegion=function(){var a=document.getElementById(this.getScanRegionId());a.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return $s.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return $s.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function Sw(){const{bill_id:t}=gn(),[a,r]=E.useState(!1),[n,l]=E.useState(null),[d,f]=E.useState(!1),[h,b]=E.useState(null),[g,w]=E.useState([]),[k,C]=E.useState(!1),[S,D]=E.useState(""),[A,M]=E.useState(null),[I,F]=E.useState(""),T=E.useRef(null),B=E.useRef(null),H=hr(),{auth:U}=E.useContext(Or),[L,P]=E.useState("environment"),z=async()=>{try{if(!t)return;const q=await Te.get(`/user-bills/users/${U.user.id}/bills`);if(q.data.success&&Array.isArray(q.data.data)){const K=q.data.data.find(se=>se.id===t);K?b(K):(ie.error("You are not assigned to this bill"),H("/my-bills"))}}catch(q){console.error("Error fetching bill details:",q),ie.error("Error loading bill information")}},W=async()=>{try{const q=await Te.get(`/user-apartments/users/${U.user.id}/apartments`);return q.data.success&&Array.isArray(q.data.data)?(w(q.data.data),q.data.data):[]}catch(q){return console.error("Error fetching user apartments:",q),ie.error("Error loading your assigned apartments"),[]}},ee=async(q,K)=>{try{if(!q)return{access:!1,reason:"Invalid house ID"};const se=await Te.get(`/houses/${q}`);if(!se.data.success||!se.data.data)return{access:!1,reason:"House not found in the system"};const re=se.data.data;let te=null;if(re.apartment_id)try{const et=await Te.get(`/apartments/${re.apartment_id}`);et.data.success&&(te=et.data.data)}catch(et){console.error("Error fetching apartment:",et)}let Re=null;if(re.floor_id)try{const et=await Te.get(`/floors/${re.floor_id}`);et.data.success&&(Re=et.data.data)}catch(et){console.error("Error fetching floor:",et)}const ke={...re,apartment:te,floor:Re};if(M(ke),!K.some(et=>et.id===re.apartment_id))return{access:!1,reason:`You are not assigned to "${te?.name||"this apartment"}"`};let Oe=!1;try{const et=await Te.get(`/bill-assignments/house-details?house_id=${q}&apartment_id=${re.apartment_id}`);et.data.success&&(Oe=(Array.isArray(et.data.data)?et.data.data:et.data.data?.bills||[]).some(Ae=>Ae.bill_id===t||Ae.id===t))}catch(et){console.error("Error checking bill assignments:",et);try{const be=await Te.get(`/user-bills/users/${U.user.id}/bills`);be.data.success&&Array.isArray(be.data.data)&&be.data.data.find(Fe=>Fe.id===t)&&(Oe=!0)}catch(be){console.error("Alternative check failed:",be)}}return Oe?h?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${h?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:ke,apartmentId:re.apartment_id,floorId:re.floor_id,houseId:re.id}:{access:!1,reason:`This house does not have "${h?.bill_name||"the selected bill"}" assigned`}}catch(se){if(console.error("Error checking house access:",se),se.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const re=se.response?.status;return re===401?{access:!1,reason:"Session expired. Please login again."}:re===403?{access:!1,reason:"Access denied to this resource."}:re===404?{access:!1,reason:"House not found."}:re===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},G=async()=>{if(!I.trim()){ie.error("Please enter a house ID");return}try{f(!0),T.current&&T.current.clear().catch(re=>{console.log("Scanner clear error:",re)}),r(!1);const q=I.trim();l({houseId:q,source:"manual"});const K=await W(),se=await ee(q,K);se.access?(C(!0),ie.success(`Access granted! House ${A?.house_id||q} has ${h?.bill_name} bill.`)):(C(!1),D(se.reason||"Access denied"),ie.error(se.reason||"Access denied"))}catch(q){console.error("Error processing manual input:",q),ie.error(q.message||"Invalid house ID. Please enter a valid house ID.")}finally{f(!1)}},ne=q=>{F(q.target.value)},le=q=>{q.key==="Enter"&&G()},Y=(q,K)=>{if(!q||q.length===0)return null;const se=re=>(re||"").toLowerCase();if(K==="environment"){const re=q.find(te=>/back|rear|environment/.test(se(te.label)));return re?re.id:q[q.length-1].id}else{const re=q.find(te=>/front|user|face/.test(se(te.label)));return re?re.id:q[0].id}},X=async q=>{const K=q||L;if(r(!0),l(null),C(!1),D(""),M(null),F(""),T.current){try{await T.current.stop()}catch{}try{T.current.clear()}catch{}T.current=null}const se=document.getElementById("qr-reader");se&&(se.innerHTML="");try{const re=await tf.getCameras(),te=Y(re,K)||re[0]&&re[0].id,Re=new tf("qr-reader");T.current=Re;const ke={fps:10,qrbox:{width:250,height:250}};await Re.start({deviceId:{exact:te}},ke,Ve=>{ye(Ve)},Ve=>{}),console.log("Scanner started with camera id:",te,"direction:",K)}catch(re){console.error("Scanner initialization error:",re),ie.error("Failed to initialize scanner. Please refresh and try again."),r(!1)}},de=async()=>{const q=L==="environment"?"user":"environment";if(T.current){try{await T.current.stop()}catch{}try{T.current.clear()}catch{}T.current=null}P(q),a&&setTimeout(()=>X(q),250)},ye=async q=>{try{if(f(!0),T.current){try{await T.current.stop()}catch{}try{T.current.clear()}catch{}T.current=null}r(!1),F("");const K=q.trim();l({houseId:K,source:"qr"});const se=await W(),re=await ee(K,se);re.access?(C(!0),ie.success("Access granted! House")):(C(!1),D(re.reason||"Access denied"),ie.error(re.reason||"Access denied"))}catch(K){console.error("Error processing QR code:",K),ie.error(K.message||"Invalid QR code. Please scan a valid house QR code."),r(!1)}finally{f(!1)}},oe=async()=>{if(T.current){try{try{await T.current.stop()}catch{}try{T.current.clear()}catch{}console.log("Scanner stopped and cleared on reset")}catch(q){console.log("Scanner clear error on reset:",q)}T.current=null}B.current&&(clearInterval(B.current),B.current=null),r(!1),l(null),C(!1),D(""),M(null),F("")},xe=()=>{H("/my-bills")},ae=()=>{if(!A||!n){ie.error("House data not available");return}H(`/calculate-measurable-bill/${t}`,{state:{scannedData:n,billData:h,actualBillId:t,houseData:A,houseId:A.id,source:n.source}})};return E.useEffect(()=>()=>{if(T.current){try{T.current.stop().catch?.(()=>{})}catch{}try{T.current.clear()}catch{}}},[]),E.useEffect(()=>{U?.user?.id&&t&&(z(),W())},[U?.user?.id,t]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(vr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:de,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${L==="environment"?"Front":"Back"} Camera`,children:e.jsx(Zv,{size:16})}),e.jsx("button",{onClick:oe,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(gr,{size:16})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Position QR code within frame ",L==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",h?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Gt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),n&&!d&&!a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(wc,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),k?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(hn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",h?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:ae,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(xr,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ma,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:S}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",h?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',h?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!n&&!a&&!d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:I,onChange:ne,onKeyPress:le,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:G,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(xr,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(X0,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:h?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:X,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(qv,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:xe,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function R_(){const{bill_id:t}=gn(),a=hr(),r=On(),{auth:n}=E.useContext(Or),l=r.state?.scannedData||null,d=r.state?.billData||null,f=r.state?.houseData||null,h=r.state?.actualBillId||t,b=r.state?.source||"qr",[g,w]=E.useState(!1),[k,C]=E.useState(null),[S,D]=E.useState([]),[A,M]=E.useState([]),[I,F]=E.useState(null),[T,B]=E.useState(null),[H,U]=E.useState(""),L=E.useMemo(()=>{const Ae=new Date;return Ae.setDate(Ae.getDate()+10),Ae.toISOString().split("T")[0]},[]);E.useEffect(()=>{H||U(L)},[L]);const[P,z]=E.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[W,ee]=E.useState(null),[G,ne]=E.useState([]),[le,Y]=E.useState(!1),[X,de]=E.useState(!1),ye=Dr.useRef(P.month),oe=Dr.useRef(P.year),xe=Ae=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ae-1]||"";E.useEffect(()=>{if(!t||!h){ie.error("Bill ID is missing"),a("/my-bills");return}if(!l||!f||!d){ie.error("House data is incomplete. Please go back and try again."),a(`/measurable-bills/${t}`);return}},[t,h,l,f,d,a]);const ae=async()=>{try{const Ae=await Te.get(`/billranges/bills/${h}`);let Fe=[];if(Array.isArray(Ae.data))Fe=Ae.data;else if(Ae.data.data&&Array.isArray(Ae.data.data))Fe=Ae.data.data;else if(Ae.data.success&&Ae.data.data)Array.isArray(Ae.data.data)?Fe=Ae.data.data:typeof Ae.data.data=="object"&&(Fe=Object.values(Ae.data.data));else if(typeof Ae.data=="object"){for(const Ce in Ae.data)if(Array.isArray(Ae.data[Ce])){Fe=Ae.data[Ce];break}}if(Fe.length>0){const Ce=Fe.sort((Je,ve)=>parseFloat(Je.fromRange||Je.from_range||Je.from||0)-parseFloat(ve.fromRange||ve.from_range||ve.from||0));D(Ce),Ce.length>0&&F(Ce[0])}else D([]),ie.warning("No bill ranges data available in response")}catch(Ae){console.error("Error loading bill ranges:",Ae),ie.error("Failed to load bill ranges."),D([])}},q=async()=>{try{const Ae=xe(P.month),Fe=P.month;M([]),B(null);let Ce=null,Je=null;try{Ce=await Te.get("/billprice",{params:{bill_id:h,month:Ae,year:P.year}})}catch(fe){Je=fe;try{Ce=await Te.get("/billprice",{params:{bill_id:h,month:Fe,year:P.year}})}catch(st){Je=st;try{Ce=await Te.get(`/billprice/${h}/${Ae}/${P.year}`)}catch(Ee){Je=Ee;try{Ce=await Te.get(`/billprice/${h}/${Fe}/${P.year}`)}catch(wt){Je=wt;try{Ce=await Te.get("/api/billprice",{params:{bill_id:h,month:Ae,year:P.year}})}catch(ut){throw Je=ut,new Error("All API attempts failed")}}}}}let ve=[];if(Ce.data?.success)Array.isArray(Ce.data.data)?ve=Ce.data.data:Ce.data.data&&typeof Ce.data.data=="object"?ve=Object.values(Ce.data.data):ve=[];else if(Array.isArray(Ce.data))ve=Ce.data;else if(Ce.data?.data&&Array.isArray(Ce.data.data))ve=Ce.data.data;else if(Ce.data&&typeof Ce.data=="object"){for(const fe in Ce.data)if(Array.isArray(Ce.data[fe])){ve=Ce.data[fe];break}}const Le=ve.filter(fe=>{const st=fe.month,Ee=fe.year,wt=st===Ae||st===Fe.toString(),ut=Ee===P.year||Ee===P.year.toString();return wt&&ut});Le.length>0?(M(Le),I&&K(Le)):ve.length>0?(M(ve),I&&K(ve),ie.success(`Loaded ${ve.length} price(s) for ${Ae}`)):(M([]),ie.info(`No prices found for ${Ae} ${P.year}. Please set prices first.`))}catch(Ae){console.error("Error loading bill prices:",Ae),M([]),B(null),ie.error(`Failed to load prices for ${xe(P.month)}. Check console.`)}},K=(Ae=A)=>{if(!I||!Ae||Ae.length===0){B(null);return}const Fe=Ae.find(Ce=>{const Je=Ce.billrange_id||Ce.range_id||Ce.id,ve=I.id||I._id;return Je&&Je.toString()===ve.toString()});B(Fe||null)},se=async()=>{let Ae=null;if(Ae=l?.houseId||l?.hse,!Ae||!h){z(Fe=>({...Fe,previous_reading:"0"}));return}try{Y(!0);const Fe=await Te.get("/generate-measurable-bills/previous-reading",{params:{house_id:Ae,bill_id:h}});if(Fe.data.success){const Ce=Fe.data.data?.current_reading||0;z(Je=>({...Je,previous_reading:Ce.toString()}))}}catch(Fe){console.error(" Error loading previous reading:",Fe),Fe.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),z(Ce=>({...Ce,previous_reading:"0"}))):(ie.error("Could not load previous reading"),z(Ce=>({...Ce,previous_reading:"0"})))}finally{Y(!1)}},re=async(Ae,Fe)=>{const Ce={...P,[Ae]:parseInt(Fe)};z(Ce);const Je=Ae==="month"&&Fe!==ye.current,ve=Ae==="year"&&Fe!==oe.current;(Je||ve)&&(Ae==="month"&&(ye.current=Fe),Ae==="year"&&(oe.current=Fe),M([]),B(null),ee(null),ne([]),z(Le=>({...Le,[Ae]:parseInt(Fe),total_amount:"",used_units:""})),q(),se())},te=Ae=>{const{name:Fe,value:Ce}=Ae.target;if(Fe==="month"||Fe==="year"){re(Fe,Ce);return}const Je={...P,[Fe]:Ce};if(z(Je),Fe==="current_reading"){const ve=parseFloat(Ce)||0,Le=parseFloat(P.previous_reading)||0,fe=ve-Le;if(fe>=0)if(Je.used_units=fe.toString(),Je.total_amount="",fe>0&&S.length>0&&A.length>0){const{totalAmount:st,details:Ee}=Re(fe);Je.total_amount=st.toFixed(2),ke(fe,st,Ee)}else ee(null),ne([]);else ie.error("Current reading cannot be less than previous reading")}z(Je)},Re=Ae=>{if(!S.length||!A.length)return{totalAmount:0,details:[]};const Fe=[...S].sort((Le,fe)=>parseFloat(Le.fromRange||Le.from_range||Le.from||0)-parseFloat(fe.fromRange||fe.from_range||fe.from||0));let Ce=parseFloat(Ae),Je=0;const ve=[];for(let Le=0;Le<Fe.length&&Ce>0;Le++){const fe=Fe[Le],st=A.find(qt=>{const ur=qt.billrange_id||qt.range_id||qt.id,Ut=fe.id||fe._id;return ur&&ur.toString()===Ut.toString()});if(!st){console.warn(`No price found for range ${fe.id}`);continue}const Ee=parseFloat(fe.fromRange||fe.from_range||fe.from||0),wt=fe.toRange?parseFloat(fe.toRange||fe.to_range||fe.to):1/0,ut=parseFloat(st.unitprice||st.uniprice||0),Et=parseFloat(st.fixedamount||0);let Mt=0;if(wt===1/0)Mt=Ce,Ce=0;else{const qt=wt-Ee+1;Le===0?Ae<=qt?Mt=Ae:Mt=qt:Mt=Math.min(qt,Ce),Ce-=Mt}if(Mt>0){const qt=Mt*ut+Et;Je+=qt,ve.push({range:`${Ee} - ${wt===1/0?"":wt}`,units:Mt,unitPrice:ut,fixedAmount:Et,rangeAmount:qt,calculation:`${Mt}  ${ut} + ${Et} = ${qt.toFixed(2)}`})}}return{totalAmount:Je,details:ve}},ke=(Ae,Fe,Ce)=>{ee({used_units:Ae,total_amount:Fe,calculated_at:new Date().toISOString()}),ne(Ce)},Ve=async()=>{if(!W){ie.error("Please calculate the bill first");return}const Ae=l?.houseId||l?.hse,Fe=f?.apartment_id,Ce=f?.floor_id;if(!Ae||!Fe||!Ce){ie.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:Ae,apartmentId:Fe,floorId:Ce,source:b,scannedData:l,houseDetails:f});return}try{de(!0);const Je={house_id:Ae,apartment_id:Fe,floor_id:Ce,bill_id:h,year:parseInt(P.year),month:xe(parseInt(P.month)),previous_reading:parseFloat(P.previous_reading)||0,current_reading:parseFloat(P.current_reading)||0,used_units:parseFloat(P.used_units)||W.used_units,totalAmount:parseFloat(P.total_amount)||W.total_amount,due_date:H||null,source:b},ve=await Te.post("/generate-measurable-bills/from-calculation",Je);ve.data.success?(ie.success("Bill generated successfully!"),z({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:P.current_reading,current_reading:"",used_units:"",total_amount:""}),ee(null),ne([]),setTimeout(()=>{a(`/house-bill-meter/${t}`)},2e3)):ie.error(ve.data.message||"Failed to generate bill")}catch(Je){console.error("Error generating bill:",Je);let ve="Failed to generate bill";Je.response?.data?.message?ve=Je.response.data.message:Je.message&&(ve=Je.message),ie.error(ve)}finally{de(!1)}},Oe=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];new Date().getFullYear(),E.useEffect(()=>{if(P.used_units&&parseFloat(P.used_units)>0&&S.length>0&&A.length>0){const Ae=parseFloat(P.used_units),{totalAmount:Fe,details:Ce}=Re(Ae);z(Je=>({...Je,total_amount:Fe.toFixed(2)})),ke(Ae,Fe,Ce)}},[S,A]),E.useEffect(()=>{I&&A.length>0&&K()},[I,A]),E.useEffect(()=>{ae(),se(),ye.current=P.month,oe.current=P.year},[h,l]),E.useEffect(()=>{h&&P.month&&P.year&&S.length>0&&q()},[h,P.month,P.year,S.length]);const et=xe(P.month);return{houseId:f?.house_id||l?.houseId,apartment:f?.apartment?.name||"N/A",floor:f?.floor?.floor_id||"N/A",houseDatabaseId:f?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(vr,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Vr,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>a(`/house-bill-meter/${t}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",d?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:b==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${b==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:b==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{ae(),q(),se(),ie.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:P.month,onChange:te,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,children:Oe.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:P.year,onChange:te,min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:H,onChange:Ae=>U(Ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:P.previous_reading,onChange:te,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,readOnly:!0}),le&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-purple-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:P.current_reading,onChange:te,placeholder:"Enter current reading",min:P.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",et," ",P.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:P.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),P.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(P.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>a(`/measurable-bills/${t}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:Ve,disabled:!W||X,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:X?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function M_(){const[t,a]=E.useState([]),[r,n]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState(!1),[b,g]=E.useState(!1),{auth:w}=E.useContext(Or),k=hr(),C=async()=>{try{n(!0);const F=await Te.get(`/user-bills/users/${w.user.id}/bills`);F.data.success?a(F.data.data||[]):(ie.error("Failed to load bills"),a([]))}catch(F){console.error("Error fetching bills:",F),ie.error("Error loading your bills"),a([])}finally{n(!1)}};E.useEffect(()=>{w?.user?.id&&C()},[w?.user?.id]);const S=t.filter(F=>F.bill_name?.toLowerCase().includes(l.toLowerCase())||F.billtype?.toLowerCase().includes(l.toLowerCase())),D=F=>{try{return new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=F=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(Gu,{size:12,className:"inline mr-1"})}})[F?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(xr,{size:12,className:"inline mr-1"})},M={totalBills:t.length,measurableBills:t.filter(F=>F.billtype?.toLowerCase()==="measurable").length},I=F=>{k(`/house-bill-meter/${F}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>g(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ja,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:M.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ja,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:M.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:l,onChange:F=>d(F.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ja,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:S.map(F=>{const T=A(F.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ja,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:F.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.class}`,children:[T.icon,F.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[F.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Gu,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>I(F.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(nb,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",D(F.assigned_at)]})})]},F.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(F=>{const T=A(F.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ja,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:F.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.class}`,children:[T.icon,F.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[F.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Gu,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>I(F.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(nb,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",D(F.assigned_at)]})})]},F.id)})})]})}),S.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(js,{size:20})})})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function I_(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),[l,d]=E.useState("manual"),f=hr(),{bill_id:h}=gn(),b=()=>{f("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>n(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${r?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(vr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(ja,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(ja,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(Sw,{})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function O_(){const[t,a]=E.useState([]),[r,n]=E.useState([]),[l,d]=E.useState(0),[f,h]=E.useState(0),[b,g]=E.useState(!1),[w,k]=E.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[C,S]=E.useState([]),[D,A]=E.useState([]),[M,I]=E.useState([]),[F,T]=E.useState(""),[B,H]=E.useState(""),[U,L]=E.useState(null),[P,z]=E.useState(!1),[W,ee]=E.useState(!1),[G,ne]=E.useState(!1),[le,Y]=E.useState(null),[X,de]=E.useState(!1),[ye,oe]=E.useState(!1),[xe,ae]=E.useState(!1),[q,K]=E.useState(!1),[se,re]=E.useState(0),[te,Re]=E.useState(""),ke=["","January","February","March","April","May","June","July","August","September","October","November","December"],Ve=new Date().getFullYear();Array.from({length:10},($e,jt)=>(Ve-5+jt).toString());const Oe=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];E.useEffect(()=>{et()},[]);const et=async()=>{try{z(!0);const $e=await Te.get("/apartments");$e.data.success?S($e.data.data||[]):S([])}catch($e){console.error("Error loading apartments:",$e),ie.error("Failed to load apartments"),S([])}finally{z(!1)}};E.useEffect(()=>{w.apartment_id?be(w.apartment_id):(A([]),I([]),k($e=>({...$e,floor_id:"",house_id:""})))},[w.apartment_id]),E.useEffect(()=>{w.floor_id&&w.apartment_id?Ae(w.floor_id):(I([]),k($e=>({...$e,house_id:""})))},[w.floor_id,w.apartment_id]);const be=async $e=>{try{ee(!0);const jt=await Te.get(`/floors?apartment_id=${$e}`);jt.data.success?A(jt.data.data||[]):A([])}catch(jt){console.error("Error loading floors:",jt),ie.error("Failed to load floors"),A([])}finally{ee(!1)}},Ae=async $e=>{try{ne(!0);const jt=await Te.get(`/houses?floor_id=${$e}&apartment_id=${w.apartment_id}`);jt.data.success?I(jt.data.data||[]):I([])}catch(jt){console.error("Error loading houses:",jt),ie.error("Failed to load houses"),I([])}finally{ne(!1)}},Fe=async()=>{const $e=(B||"").trim();if(!$e){ie.info("Please enter an internal House PK to lookup");return}try{g(!0);const jt=w.payment_status.split(",");let Nt=[];for(const vt of jt){const nt=new URLSearchParams({house_id:$e,year:w.year,payment_status:vt.trim()});w.month&&nt.append("month",w.month);const kt=await Te.get(`/bill-payments?${nt}`);kt.data&&kt.data.success&&(Nt=[...Nt,...kt.data.data||[]])}a(Nt),Je(Nt);const lt=Nt.filter(vt=>vt.payment_status==="Pending").reduce((vt,nt)=>vt+(parseFloat(nt.pendingAmount)||0),0),At=Nt.filter(vt=>vt.payment_status==="Partial").reduce((vt,nt)=>vt+(parseFloat(nt.pendingAmount)||0),0);d(lt),h(At),L({houseNumber:$e,apartmentName:"",floorNumber:"",houseId:$e}),k(vt=>({...vt,house_id:$e})),Nt.length>0?ie.success(`Found ${Nt.length} bill(s) for house PK ${$e}`):ie.info("No bills found for the given house PK")}catch(jt){console.error("House PK lookup failed",jt),ie.error("Failed to lookup bills by house PK")}finally{g(!1)}};E.useEffect(()=>{if(w.house_id){const $e=setTimeout(()=>{Ce(w.house_id)},100);return()=>clearTimeout($e)}},[w.house_id,w.year,w.month,w.payment_status]);const Ce=async $e=>{if(!(!$e||!w.apartment_id||!w.floor_id||!w.year))try{g(!0);const jt=M.find(_t=>_t.id===$e),Nt=C.find(_t=>_t.id===w.apartment_id),lt=D.find(_t=>_t.id===w.floor_id);jt&&Nt&&lt&&L({houseNumber:jt.house_id,apartmentName:Nt.name,floorNumber:lt.floor_id,houseId:jt.id});const At=w.payment_status.split(",");let vt=[];for(const _t of At){const Jr=new URLSearchParams({house_id:$e,apartment_id:w.apartment_id,floor_id:w.floor_id,year:w.year,payment_status:_t.trim()});w.month&&Jr.append("month",w.month);const en=await Te.get(`/bill-payments?${Jr}`);en.data.success&&(vt=[...vt,...en.data.data||[]])}a(vt),Je(vt);const nt=vt.filter(_t=>_t.payment_status==="Pending").reduce((_t,Jr)=>_t+(parseFloat(Jr.pendingAmount)||0),0),kt=vt.filter(_t=>_t.payment_status==="Partial").reduce((_t,Jr)=>_t+(parseFloat(Jr.pendingAmount)||0),0);d(nt),h(kt),re(0),Re("");const Os=vt.filter(_t=>_t.payment_status==="Pending").length,Bn=vt.filter(_t=>_t.payment_status==="Partial").length;if(vt.length>0){let _t=`Found ${Os} pending and ${Bn} partial bills for House ${jt?.house_id}`;w.month?_t+=` (${w.month} ${w.year})`:_t+=` (Year: ${w.year})`,ie.success(_t)}else ie.info("No bills found for the selected criteria")}catch(jt){console.error("Error loading bills:",jt),ie.error("Failed to load bills"),a([]),n([]),d(0),h(0)}finally{g(!1)}},Je=($e=t)=>{const jt=w.payment_status.split(","),Nt=$e.filter(lt=>jt.includes(lt.payment_status));n(Nt)},ve=$e=>{k(vt=>({...vt,payment_status:$e})),Je();const jt=$e.split(","),Nt=t.filter(vt=>jt.includes(vt.payment_status)),lt=Nt.filter(vt=>vt.payment_status==="Pending").reduce((vt,nt)=>vt+(parseFloat(nt.pendingAmount)||0),0),At=Nt.filter(vt=>vt.payment_status==="Partial").reduce((vt,nt)=>vt+(parseFloat(nt.pendingAmount)||0),0);d(lt),h(At)},Le=($e,jt)=>{k(Nt=>{const lt={...Nt,[$e]:jt};return $e==="apartment_id"?(lt.floor_id="",lt.house_id=""):$e==="floor_id"&&(lt.house_id=""),lt})},fe=()=>{k({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),S([]),A([]),I([]),a([]),n([]),d(0),h(0),L(null),re(0),Re(""),et()},st=$e=>{Y($e),de(!0)},Ee=()=>{oe(!0)},wt=()=>{const $e=((l+f)*.5).toFixed(2);re($e),Re(new Date().toISOString().split("T")[0]),ae(!0)},ut=()=>{de(!1),oe(!1),ae(!1),Y(null)},Et=$e=>{const jt=t.map(At=>At.id===$e.id?$e:At);a(jt),Je(jt);const Nt=jt.filter(At=>At.payment_status==="Pending").reduce((At,vt)=>At+(parseFloat(vt.pendingAmount)||0),0),lt=jt.filter(At=>At.payment_status==="Partial").reduce((At,vt)=>At+(parseFloat(vt.pendingAmount)||0),0);d(Nt),h(lt),ut(),$e.payment_status==="Paid"&&ie.success("Payment completed successfully!")},Mt=$e=>{const jt=typeof $e=="string"?parseFloat($e):$e;return isNaN(jt)?"0.00":jt.toFixed(2)},qt=async()=>{try{g(!0);const $e=r.map(Nt=>Te.patch(`/bill-payments/${Nt.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(Nt.paidAmount)+parseFloat(Nt.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all($e);const jt=l+f;ie.success(`Successfully paid ${r.length} bills totaling $${jt.toFixed(2)}`),await Ce(w.house_id),oe(!1)}catch($e){console.error("Error processing total payment:",$e),ie.error("Failed to process total payment")}finally{g(!1)}},ur=async()=>{try{g(!0);const $e=l+f,jt=parseFloat(se);if(jt<=0){ie.error("Payment amount must be greater than 0");return}if(jt>$e){ie.error(`Payment amount cannot exceed total amount of $${Mt($e)}`);return}const lt=r.map(At=>{const nt=(parseFloat(At.pendingAmount)||0)/$e,kt=jt*nt;return{...At,additionalPayment:kt}}).map(At=>{const vt=parseFloat(At.paidAmount)+At.additionalPayment,nt=parseFloat(At.pendingAmount)-At.additionalPayment;let kt="Partial";return nt<=.01?kt="Paid":vt>0&&(kt="Partial"),Te.patch(`/bill-payments/${At.id}/status`,{payment_status:kt,paidAmount:vt,paid_at:te||new Date().toISOString().split("T")[0]})});await Promise.all(lt),ie.success(`Successfully paid $${Mt(jt)} across ${r.length} bills`),await Ce(w.house_id),ae(!1)}catch($e){console.error("Error processing partial payment:",$e),ie.error("Failed to process partial payment")}finally{g(!1)}},Ut=$e=>{switch($e){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Yt=$e=>{switch($e){case"Paid":return e.jsx(Ha,{size:16,className:"text-green-600"});case"Partial":return e.jsx(Ks,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(Ks,{size:16,className:"text-yellow-600"});default:return null}},It=l+f;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:K}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${q?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ja,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:fe,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:w.year,onChange:$e=>Le("year",$e.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:w.month,onChange:$e=>Le("month",$e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),ke.slice(1).map($e=>e.jsx("option",{value:$e,children:$e},$e))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:w.apartment_id,onChange:$e=>Le("apartment_id",$e.target.value),disabled:P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),C.map($e=>e.jsx("option",{value:$e.id,children:$e.name},$e.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:w.floor_id,onChange:$e=>Le("floor_id",$e.target.value),disabled:!w.apartment_id||W,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),D.map($e=>e.jsxs("option",{value:$e.id,children:["Floor ",$e.floor_id]},$e.id))]}),W&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:w.house_id,onChange:$e=>Le("house_id",$e.target.value),disabled:!w.floor_id||G,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),M.map($e=>e.jsxs("option",{value:$e.id,children:["House ",$e.house_id]},$e.id))]}),G&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or enter House ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:B,onChange:$e=>H($e.target.value),placeholder:"e.g. house-abc123",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:Fe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Lookup"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the internal House ID to fetch all bill payments directly."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Oe.map($e=>e.jsxs("button",{type:"button",onClick:()=>ve($e.value),className:`px-3 py-1 text-sm rounded-lg border ${w.payment_status===$e.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${$e.color}`}),$e.label]},$e.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>w.house_id&&Ce(w.house_id),disabled:!w.house_id||!w.year||!w.apartment_id||!w.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(Rm,{size:16}),"Load Bills"]})})]}),U&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(Hr,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",U.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[U.apartmentName,"  Floor ",U.floorNumber,w.month?`  ${w.month} ${w.year}`:`  Year: ${w.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",w.payment_status==="Pending,Partial"?"Pending & Partial Bills":w.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Pending Bills"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",Mt(l)]}),e.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:[t.filter($e=>$e.payment_status==="Pending").length," bills"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Partial Bills"})]}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-300 font-bold text-2xl",children:["$",Mt(f)]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[t.filter($e=>$e.payment_status==="Partial").length," bills"]})]})]}),b?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ha,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>ve("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:wt,disabled:r.length===0||It<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Xs,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:Ee,disabled:r.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Xs,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map($e=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${Ut($e.payment_status)}`,children:[Yt($e.payment_status),$e.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:$e.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:$e.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[$e.month," ",$e.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",Mt($e.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",Mt($e.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>st($e),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx(Xs,{size:18})})})})]},$e.id))})]})})]})]})]})})]}),X&&e.jsx(bw,{payment:le,onClose:ut,onUpdate:Et}),ye&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx(Xs,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",r.length," selected bills for House ",U?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",Mt(l)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",Mt(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U?.apartmentName," - House ",U?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:w.month?`${w.month} ${w.year}`:`Year: ${w.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",Mt(It)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>oe(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:qt,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${Mt(It)}`})]})]})})}),xe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx(Xs,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",r.length," bills for House ",U?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",Mt(It)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U?.apartmentName," - House ",U?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:$e=>{$e.preventDefault(),ur()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:It,value:se,onChange:$e=>re($e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",Mt(It)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",Mt(It-parseFloat(se||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:te,onChange:$e=>Re($e.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",Mt(se)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",Mt(It-parseFloat(se||0))]})]}),parseFloat(se||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",r.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>ae(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!se||parseFloat(se)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${Mt(se)}`})]})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function F_(){const[t,a]=E.useState(""),[r,n]=E.useState(""),[l,d]=E.useState(!1),[f,h]=E.useState(""),b=hr(),g=async w=>{w.preventDefault(),d(!0),h("");try{const k=await Te.post("/houseowner-auth/login",{email:t,password:r});k.data.success&&(localStorage.setItem("houseOwnerToken",k.data.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(k.data.owner)),b("/houseowner/dashboard"))}catch(k){h(k.response?.data?.message||"Login failed")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"House Owner Login"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Access your apartment management portal"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[f&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:t,onChange:w=>a(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:r,onChange:w=>n(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx(no,{to:"/houseowner/forgot-password",className:"text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? Contact your apartment administrator."})})]})})}function Pi({onCollapse:t}){const[a,r]=E.useState(!0),[n,l]=E.useState(!1),[d,f]=E.useState(null),h=[{title:"Dashboard",icon:e.jsx(GC,{size:20}),path:"/houseowner/dashboard",exact:!0},{title:"My House",icon:e.jsx(Hr,{size:20}),path:"/houseowner/houseowner-houseview",exact:!1},{title:"My Bills",icon:e.jsx(ja,{size:20}),path:"/houseowner/houseowner-billview",exact:!1},{title:"Complaints",icon:e.jsx(ja,{size:20}),path:"/houseowner/complaints",exact:!1},{title:"Profile",icon:e.jsx(us,{size:20}),path:"/houseowner/houseowner-profile",exact:!1}],b=C=>{f(d===C?null:C)},g=({item:C})=>{const S=C.exact?location.pathname===C.path:location.pathname.startsWith(C.path);return e.jsx("div",{className:"mb-1",children:C.subItems?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(C.title),className:`flex items-center justify-between w-full p-3 rounded-lg transition-colors ${S?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C.icon,e.jsx("span",{className:"font-medium",children:C.title})]}),d===C.title?e.jsx(Nc,{size:16}):e.jsx(Tl,{size:16})]}),d===C.title&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:C.subItems.map((D,A)=>e.jsx(Nm,{to:D.path,className:({isActive:M})=>`block p-2 rounded-lg transition-colors ${M?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>l(!1),children:e.jsx("span",{className:"text-sm",children:D.title})},A))})]}):e.jsxs(Nm,{to:C.path,className:({isActive:D})=>`flex items-center gap-3 p-3 rounded-lg transition-colors ${D?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>l(!1),children:[C.icon,e.jsx("span",{className:"font-medium",children:C.title})]})})},w=()=>e.jsx("button",{onClick:()=>l(!n),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white text-gray-800 dark:bg-gray-800  dark:text-gray-300 rounded-lg shadow-lg",children:n?e.jsx(gr,{size:24}):e.jsx(Tc,{size:24})}),k=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(Hr,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"AptSync"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"House Owner Portal"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:h.map((C,S)=>e.jsx(g,{item:C},S))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),n&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>l(!1)}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:e.jsx(k,{})}),e.jsx("aside",{className:`hidden lg:flex flex-col w-64 bg-white dark:bg-gray-900 border-r dark:border-gray-800 transition-all duration-300 fixed left-0 top-0 h-full z-30 ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(k,{})})]})}function zi(){const[t,a]=E.useState(!1),{auth:r,logout:n,resetActivityTimer:l}=E.useContext(Or),d=hr(),[f,h]=E.useState(!1);E.useEffect(()=>{const C=localStorage.getItem("theme"),S=window.matchMedia("(prefers-color-scheme: dark)").matches;C==="dark"||!C&&S?(a(!0),document.documentElement.classList.add("dark")):(a(!1),document.documentElement.classList.remove("dark"))},[]),E.useEffect(()=>{if(!r.accessToken)return;const C=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],S=()=>l();C.forEach(A=>window.addEventListener(A,S,{passive:!0}));const D=()=>{document.hidden||l()};return document.addEventListener("visibilitychange",D),()=>{C.forEach(A=>window.removeEventListener(A,S)),document.removeEventListener("visibilitychange",D)}},[r.accessToken,l]);const b=async()=>{try{await Te.post("/auth/logout"),n(),ie.success("Logged out successfully"),d("/")}catch(C){console.error("Logout error:",C),n(),ie.success("Logged out successfully"),d("/")}finally{h(!1)}},g=()=>{h(!0)},w=()=>{h(!1)},k=()=>{const C=!t;a(C),C?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:k,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:t?"Switch to light mode":"Switch to dark mode",children:t?e.jsx(Mm,{size:20}):e.jsx(Dm,{size:20})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate max-w-[120px]",children:r?.user?.name||"House Owner"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[120px]",children:r?.user?.email||"user@example.com"})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:g,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Tm,{size:20})})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out from the House Owner Portal?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function B_(){const[t,a]=E.useState(!1),[r,n]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState({total:0,pending:0,resolved:0}),[b,g]=E.useState([]),[w,k]=E.useState([]),[C,S]=E.useState(!1),{auth:D}=E.useContext(Or);E.useEffect(()=>{const T=()=>{S(window.innerWidth<1024)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),E.useEffect(()=>{A()},[D.accessToken]);const A=async()=>{try{n(!0),d(""),await M(),k([{id:1,message:"Maintenance scheduled for tomorrow",time:"2 hours ago",type:"info"},{id:2,message:"New community notice posted",time:"1 day ago",type:"info"}])}catch(T){console.error("Failed to fetch dashboard data:",T),d("Failed to load dashboard data")}finally{n(!1)}},M=async()=>{try{if(D.accessToken){const T=await Te.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${D.accessToken}`}});if(T.data.success)if(T.data.statistics)h({total:T.data.statistics.total||0,pending:T.data.statistics.pending||0,resolved:T.data.statistics.resolved||0});else{const B=T.data.data||[],H=B.length,U=B.filter(P=>P.status==="Pending").length,L=B.filter(P=>P.status==="Resolved"||P.status==="Closed").length;h({total:H,pending:U,resolved:L})}}}catch(T){console.error("Failed to fetch complaint stats:",T)}},I=()=>{window.location.href="/complaints"},F=()=>{window.location.href="/complaints"};return r?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Pi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?C?"ml-0":"ml-20":C?"ml-0":"ml-64"}`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Pi,{onCollapse:a}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${t?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Hr,{size:C?32:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:`${C?"text-xl":"text-2xl"} font-bold text-gray-800 dark:text-white`,children:"House Owner Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",D.user?.name||"House Owner","!"]})]})]}),e.jsxs("button",{onClick:F,className:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"New Complaint"})]})]}),l&&e.jsx("div",{className:"mb-4 md:mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ma,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l}),e.jsx("button",{onClick:A,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Complaints"}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(xr,{size:C?18:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:f.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"All time complaints"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Pending"}),e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Ks,{size:C?18:24,className:"text-yellow-600 dark:text-yellow-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-yellow-600 dark:text-yellow-400`,children:f.pending}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Awaiting resolution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Resolved"}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Ha,{size:C?18:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-green-600 dark:text-green-400`,children:f.resolved}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Issues fixed"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Notifications"}),e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(Ph,{size:C?18:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:w.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Unread notifications"})]})]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("button",{onClick:F,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500",children:[e.jsx(Ca,{className:"mx-auto text-purple-600 dark:text-purple-400 mb-2",size:C?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"New Complaint"})]}),e.jsxs("button",{onClick:I,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500",children:[e.jsx(xr,{className:"mx-auto text-blue-600 dark:text-blue-400 mb-2",size:C?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"View Complaints"})]}),e.jsxs("button",{onClick:()=>window.location.href="/profile",className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-green-400 dark:hover:border-green-500",children:[e.jsx(us,{className:"mx-auto text-green-600 dark:text-green-400 mb-2",size:C?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"Profile"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200 mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Complaints Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-white dark:from-purple-900/20 dark:to-gray-800 border border-purple-100 dark:border-purple-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-purple-100 dark:bg-purple-900/40 rounded-full mb-3",children:e.jsx(xr,{size:24,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:f.total}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Complaints"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-yellow-50 to-white dark:from-yellow-900/20 dark:to-gray-800 border border-yellow-100 dark:border-yellow-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-yellow-100 dark:bg-yellow-900/40 rounded-full mb-3",children:e.jsx(Ks,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:f.pending}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-white dark:from-green-900/20 dark:to-gray-800 border border-green-100 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-green-100 dark:bg-green-900/40 rounded-full mb-3",children:e.jsx(Ha,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:f.resolved}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Notifications"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View all"})]}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(T=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 flex-shrink-0 ${T.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:T.type==="warning"?e.jsx(ma,{size:C?14:16,className:"text-yellow-600 dark:text-yellow-400"}):e.jsx(Ph,{size:C?14:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:T.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.time})]})]})},T.id))}):e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(Ph,{size:C?36:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-3 md:mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Notifications will appear here"})]})]}),C&&e.jsx("div",{className:"h-16"})]})})]})]})}function L_(){const[t]=ld(),a=hr(),[r,n]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState(""),[b,g]=E.useState(!1),[w,k]=E.useState(""),[C,S]=E.useState(""),[D,A]=E.useState(""),[M,I]=E.useState(""),[F,T]=E.useState(""),[B,H]=E.useState(!1),[U,L]=E.useState(!1);E.useEffect(()=>{const G=t.get("token"),ne=t.get("id");G&&ne?(I(G),A(ne),P(G,ne)):(h("Invalid verification link"),n(!1))},[]);const P=async(G,ne)=>{try{const le=await Te.post("/houseowner-auth/verify",{token:G,id:ne});le.data.success&&(d(le.data.message),le.data.requires_password?g(!0):setTimeout(()=>{a("/login")},2e3))}catch(le){h(le.response?.data?.message||"Verification failed")}finally{n(!1)}},z=async()=>{if(T(""),w.length<6){T("Password must be at least 6 characters");return}if(w!==C){T("Passwords do not match");return}const G=/[A-Z]/.test(w),ne=/[a-z]/.test(w),le=/\d/.test(w),Y=/[!@#$%^&*(),.?":{}|<>]/.test(w);if(!G||!ne||!le||!Y){T("Password must contain uppercase, lowercase, numbers, and special characters");return}try{n(!0);const X=await Te.post("/houseowner-auth/setup-password",{token:M,id:D,password:w});X.data.success&&(d(X.data.message),g(!1),setTimeout(()=>{a("/login")},3e3))}catch(X){T(X.response?.data?.message||"Failed to set password")}finally{n(!1)}},W=G=>{k(G.target.value),F&&T("")},ee=G=>{S(G.target.value),F&&T("")};return r&&!b?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying your email..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-md w-full p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:f?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f}),e.jsx("button",{onClick:()=>a("/"),className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Homepage"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:b?"Set Your Password":"Email Verified Successfully!"}),l&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l}),b?e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:B?"text":"password",placeholder:"Enter password",value:w,onChange:W,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>H(!B),className:"passwordToggle bottom-0","aria-label":B?"Hide password":"Show password",children:B?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"Must be at least 6 characters with uppercase, lowercase, numbers, and special characters"})]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:U?"text":"password",placeholder:"Confirm password",value:C,onChange:ee,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>L(!U),className:"passwordToggle","aria-label":U?"Hide password":"Show password",children:U?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),F&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:F})}),e.jsx("button",{onClick:z,disabled:r,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Setting Password..."]}):"Set Password"})]})}):e.jsx("button",{onClick:()=>a("/login"),className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Login"})]})})})}function P_(){const[t,a]=E.useState({}),[r,n]=E.useState({}),[l,d]=E.useState([]),[f,h]=E.useState(null),[b,g]=E.useState(null),[w,k]=E.useState([]),[C,S]=E.useState(!0),[D,A]=E.useState(null),[M,I]=E.useState(!1),{auth:F}=E.useContext(Or),T=async()=>{try{if(S(!0),A(null),F.accessToken){const P=await Te.get("/houses/owner/me",{headers:{Authorization:`Bearer ${F.accessToken}`,"Content-Type":"application/json"}});if(P.data.success){const z=P.data.data||[];d(z);const W={},ee={},G={};z.forEach(ne=>{ne.apartment_id&&(W[ne.apartment_id]={id:ne.apartment_id,name:ne.apartment_name,address:ne.apartment_address,city:ne.apartment_city}),ne.floor_id&&(ee[ne.floor_id]={id:ne.floor_id,floor_id:ne.floor_id,floor_number:ne.floor_number}),ne.housetype_id&&(G[ne.housetype_id]={id:ne.housetype_id,name:ne.house_type_name,sqrfeet:ne.house_type_sqrfeet,rooms:ne.house_type_rooms,bathrooms:ne.house_type_bathrooms})}),a(W),n(ee),k(Object.values(G)),z.length>0?h(z[0]):h(null)}else A(P.data.message||"Failed to fetch houses")}else A("No authentication token found. Please log in.")}catch(P){console.error("Failed to fetch house data:",P),ie.error("Failed to fetch house data"),P.response?(console.error("Error response:",P.response.data),console.error("Error status:",P.response.status),P.response.status===401?A("Session expired. Please log in again."):P.response.status===403?A("Access denied. You are not authorized as a house owner."):P.response.status===404?A("No houses found for your account."):A(P.response.data?.message||"Failed to load house data")):P.request?A("Network error. Please check your internet connection."):A("An unexpected error occurred.")}finally{S(!1)}};E.useEffect(()=>{T()},[F.accessToken]);const B=P=>{if(!P)return"N/A";const z=w.find(ee=>ee.id===P);return z?z.name:l.find(ee=>ee.housetype_id===P)?.house_type_name||"N/A"},H=P=>{if(!P)return"N/A";const z=t[P];return z?z.name:l.find(ee=>ee.apartment_id===P)?.apartment_name||"N/A"},U=P=>{if(!P)return"N/A";const z=r[P];return z&&z.floor_number?z.floor_number:l.find(ee=>ee.floor_id===P)?.floor_number||"N/A"},L=P=>{h(P)};return C?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:I}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${M?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your house details..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:I}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${M?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6",children:[e.jsx(Hr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Houses"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your properties"})]})]}),D&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ma,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:D})]})}),l.length>1&&e.jsxs("div",{className:"mb-4 md:mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-3",children:"Select a House"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((P,z)=>e.jsxs("button",{onClick:()=>L(P),className:`px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base rounded-lg transition-colors ${f?.id===P.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",z+1,": ",P.house_id]},P.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"House Information"}),e.jsx("span",{className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${f.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":f.status==="available"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:f.status?.charAt(0).toUpperCase()+f.status?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Number"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Hr,{className:"text-purple-600 dark:text-purple-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_id||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oa,{className:"text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_type_name||B(f.housetype_id)})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Floor"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(jf,{className:"text-green-600 dark:text-green-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white",children:f.floor_number||U(f.floor_id)})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Apartment Complex"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment Name"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white break-words",children:f.apartment_name||H(f.apartment_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200 break-words",children:f.apartment_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"City"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.apartment_city||"N/A"})]})]}),f.house_type_name&&e.jsxs("div",{className:"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"House Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Square Feet"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:[f.house_type_sqrfeet||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_rooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Bathrooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_bathrooms||"N/A"})]})]})]})]})]}),l.length===0&&!D&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(Hr,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function z_(){const[t,a]=E.useState({}),[r,n]=E.useState({}),[l,d]=E.useState([]),[f,h]=E.useState(null),[b,g]=E.useState([]),[w,k]=E.useState([]),[C,S]=E.useState([]),[D,A]=E.useState(!0),[M,I]=E.useState(!1),[F,T]=E.useState(null),[B,H]=E.useState(!1),[U,L]=E.useState({totalBills:0,totalPaid:0,totalPending:0,totalAmount:0}),[P,z]=E.useState({status:"all",month:"all",year:new Date().getFullYear(),house_id:"all"}),{auth:W}=E.useContext(Or),ee=async()=>{try{if(A(!0),T(null),W.accessToken){const ae=await Te.get("/houses/owner/me",{headers:{Authorization:`Bearer ${W.accessToken}`,"Content-Type":"application/json"}});if(ae.data.success){const q=ae.data.data||[];d(q);const K={},se={},re={};q.forEach(te=>{te.apartment_id&&(K[te.apartment_id]={id:te.apartment_id,name:te.apartment_name,address:te.apartment_address,city:te.apartment_city}),te.floor_id&&(se[te.floor_id]={id:te.floor_id,floor_id:te.floor_id,floor_number:te.floor_number}),te.housetype_id&&(re[te.housetype_id]={id:te.housetype_id,name:te.house_type_name,sqrfeet:te.house_type_sqrfeet,rooms:te.house_type_rooms,bathrooms:te.house_type_bathrooms})}),a(K),n(se),g(Object.values(re)),q.length>0?(h(q[0]),G()):h(null)}else T(ae.data.message||"Failed to fetch houses")}else T("No authentication token found. Please log in.")}catch(ae){console.error("Failed to fetch house data:",ae),ae.response?.status===401?T("Session expired. Please log in again."):ae.response?.status===403?T("Access denied. Please contact administrator."):ae.response?.status===404?T("No houses found for your account."):ae.request?T("Network error. Please check your internet connection."):T("An unexpected error occurred.")}finally{A(!1)}},G=async()=>{try{I(!0),T(null);const ae={},q=await Te.get("/bill-payments/house-owner/me",{headers:{Authorization:`Bearer ${W.accessToken}`,"Content-Type":"application/json"},params:ae});if(q.data.success){const K=q.data.data||[],se=q.data.houses||l;k(K),S(K),q.data.houses&&d(se),q.data.summary&&L(q.data.summary),se.length>0&&!f&&h(se[0])}else console.error("[Frontend] API error:",q.data.message),T(q.data.message||"Failed to fetch bills"),k([]),S([])}catch(ae){console.error("[Frontend] Failed to fetch bill payments:",ae);try{const q=await Te.get("/bill-payments/debug/database-state",{headers:{Authorization:`Bearer ${W.accessToken}`,"Content-Type":"application/json"}})}catch(q){console.error(" [Frontend] Debug endpoint failed:",q)}ae.response?(console.error("[Frontend] Error response:",{status:ae.response.status,data:ae.response.data,headers:ae.response.headers}),ae.response.status===401?T("Session expired. Please log in again."):ae.response.status===403?T("Access denied. Please contact administrator."):ae.response.status===404?(T("No bill payments found for your account."),k([]),S([])):ae.response.data?.message?T(ae.response.data.message):T(`Server error: ${ae.response.status}`)):ae.request?(console.error("[Frontend] No response received:",ae.request),T("Network error. Please check your internet connection.")):(console.error("[Frontend] Request setup error:",ae.message),T("An unexpected error occurred: "+ae.message))}finally{I(!1)}};E.useEffect(()=>{ee()},[W.accessToken]),E.useEffect(()=>{f&&G()},[f,P]),E.useEffect(()=>{if(!w.length){S([]);return}let ae=[...w];P.status!=="all"&&(ae=ae.filter(q=>q.payment_status===P.status)),P.month!=="all"&&(ae=ae.filter(q=>q.month===P.month)),P.year!=="all"&&(ae=ae.filter(q=>q.year.toString()===P.year.toString())),P.house_id!=="all"&&(ae=ae.filter(q=>q.house_id===P.house_id)),S(ae)},[w,P]);const ne=ae=>{h(ae),z({status:"all",month:"all",year:"all",house_id:ae.id})},le=(ae,q)=>{z(K=>({...K,[ae]:q}))},Y=()=>{z({status:"all",month:"all",year:"all",house_id:f?.id||"all"})},X=ae=>{switch(ae){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},de=ae=>{switch(ae){case"Paid":return e.jsx(Ha,{size:16,className:"text-green-600 dark:text-green-400"});case"Partial":return e.jsx(Xs,{size:16,className:"text-blue-600 dark:text-blue-400"});case"Pending":return e.jsx(Ks,{size:16,className:"text-yellow-600 dark:text-yellow-400"});default:return e.jsx(Ks,{size:16,className:"text-gray-600 dark:text-gray-400"})}},ye=["January","February","March","April","May","June","July","August","September","October","November","December"];[...new Set(w.map(ae=>ae.year))].filter(Boolean).sort((ae,q)=>q-ae);const xe=(()=>{const ae=C.length,q=C.reduce((re,te)=>re+(parseFloat(te.totalAmount)||0),0),K=C.reduce((re,te)=>re+(parseFloat(te.paidAmount)||0),0),se=C.reduce((re,te)=>re+(parseFloat(te.pendingAmount)||0),0);return{totalBills:ae,totalAmount:q,paidAmount:K,pendingAmount:se}})();return D?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:H}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${B?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:H}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${B?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ja,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Bills"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your bills"})]})]})}),F&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ma,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:F})]})}),l.length>1&&e.jsxs("div",{className:"lg:hidden mb-4 bg-white dark:bg-gray-800 rounded-lg shadow p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-white mb-2",children:"Select House to View Bills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((ae,q)=>e.jsxs("button",{onClick:()=>ne(ae),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${f?.id===ae.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",ae.house_id||q+1]},ae.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Current House Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Oa,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.apartment_name}),e.jsx(Hr,{size:18,className:"text-gray-500 dark:text-gray-400 ml-2"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["House ",f.house_id,", Floor ",f.floor_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:xe.totalBills})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ja,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:["$",xe.totalAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Xs,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:["$",xe.paidAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Ha,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:["$",xe.pendingAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ks,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Bills"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kf,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[C.length," of ",w.length," bills"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Payment Status"}),e.jsxs("select",{value:P.status,onChange:ae=>le("status",ae.target.value),className:"w-full px-3 text-gray-600 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Month"}),e.jsxs("select",{value:P.month,onChange:ae=>le("month",ae.target.value),className:"w-full px-3 py-2 text-gray-600 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Months"}),ye.map(ae=>e.jsx("option",{value:ae,children:ae},ae))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Year"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:P.year,onChange:ae=>le("year",ae.target.value),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:M?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ja,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:w.length===0?"No bills have been generated for your houses yet.":"No bills match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map((ae,q)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:ae.bill_name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Type: ",ae.billtype]}),ae.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:ae.description})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[ae.month," ",ae.year]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",ae.due_date?new Date(ae.due_date).toLocaleDateString():"Not set"]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Total: $",(parseFloat(ae.totalAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",(parseFloat(ae.paidAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",(parseFloat(ae.pendingAmount)||0).toFixed(2)]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[de(ae.payment_status),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${X(ae.payment_status)}`,children:ae.payment_status})]})})]},ae.id||q))})]})})})]}),l.length===0&&!F&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(Hr,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function U_(){const[t,a]=E.useState([]),[r,n]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(!1),[b,g]=E.useState(!1),[w,k]=E.useState(null),[C,S]=E.useState([]),[D,A]=E.useState({title:"",description:"",category_id:"",apartment_id:"",floor_id:"",house_id:""}),[M,I]=E.useState({}),[F,T]=E.useState({status:"all"}),[B,H]=E.useState({total:0,pending:0,resolved:0}),{auth:U}=E.useContext(Or),[L,P]=E.useState(!1),[z,W]=E.useState(null),[ee,G]=E.useState(!1),[ne,le]=E.useState({rating:0,feedback:""}),[Y,X]=E.useState(""),[de,ye]=E.useState(!1),[oe,xe]=E.useState(null),ae=async()=>{try{const Ae=await Te.get("/categories",{headers:{Authorization:`Bearer ${U.accessToken}`}});Ae.data.success&&S(Ae.data.data||[]);const Fe=await Te.get("/houses/owner/me",{headers:{Authorization:`Bearer ${U.accessToken}`}});if(Fe.data.success&&Fe.data.data.length>0){const Ce=Fe.data.data[0];W(Ce),A(Je=>({...Je,apartment_id:Ce.apartment_id,floor_id:Ce.floor_id,house_id:Ce.id}))}else ie.warning("No house information found. Please contact your apartment administrator.")}catch(Ae){console.error("Failed to fetch house owner info:",Ae),ie.error("Failed to load your information. Please try again.")}},q=async()=>{try{d(!0);const Ae=await Te.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${U.accessToken}`},params:F});Ae.data.success&&(a(Ae.data.data||[]),n(Ae.data.data||[]),H(Ae.data.statistics||{total:0,pending:0,resolved:0}))}catch(Ae){console.error("Failed to fetch complaints:",Ae),ie.error("Failed to load complaints. Please try again.")}finally{d(!1)}};E.useEffect(()=>{U.accessToken&&(ae(),q())},[U.accessToken,F]),E.useEffect(()=>{if(!t.length){n([]);return}let Ae=[...t];F.status!=="all"&&(Ae=Ae.filter(Fe=>Fe.status===F.status)),n(Ae)},[t,F]);const K=async Ae=>{Ae.preventDefault();const Fe={};if(D.title.trim()||(Fe.title="Title is required"),D.description.trim()||(Fe.description="Description is required"),D.category_id||(Fe.category_id="Please select a category"),Object.keys(Fe).length>0){I(Fe);return}if(!D.house_id){ie.error("No house information found. Please contact your apartment administrator.");return}try{(await Te.post("/complaints",{title:D.title,description:D.description,category_id:D.category_id,apartment_id:D.apartment_id,floor_id:D.floor_id,house_id:D.house_id},{headers:{Authorization:`Bearer ${U.accessToken}`,"Content-Type":"application/json"}})).data.success&&(ie.success("Complaint filed successfully!"),h(!1),se(),q())}catch(Ce){ie.error("Failed to create complaint");const Je=Ce.response?.data?.message||"Failed to create complaint";ie.error(Je)}},se=()=>{A({title:"",description:"",category_id:"",apartment_id:z?.apartment_id||"",floor_id:z?.floor_id||"",house_id:z?.id||""}),I({})},re=Ae=>{switch(Ae){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},te=Ae=>{switch(Ae){case"Pending":return e.jsx(Ks,{className:"text-yellow-600 dark:text-yellow-400 mr-2",size:16});case"In Progress":return e.jsx(Qu,{className:"text-blue-600 dark:text-blue-400 mr-2",size:16});case"Resolved":return e.jsx(Ha,{className:"text-green-600 dark:text-green-400 mr-2",size:16});case"Closed":return e.jsx(kc,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16});case"Rejected":return e.jsx(_E,{className:"text-red-600 dark:text-red-400 mr-2",size:16});default:return e.jsx(xr,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16})}},Re=async Ae=>{if(k(Ae),g(!0),Ae.status==="Closed")try{const Fe=await Te.get(`/complaints/${Ae.id}/rating-status`,{headers:{Authorization:`Bearer ${U.accessToken}`}});Fe.data.success&&Fe.data.canRate&&(xe(Ae),ye(!0))}catch(Fe){console.error("Error checking rating status:",Fe)}},ke=async Ae=>{try{const Fe=await Te.post(`/complaints/${Ae}/close`,{},{headers:{Authorization:`Bearer ${U.accessToken}`}});Fe.data.success&&(ie.success("Complaint closed successfully!"),Fe.data.requiresRating&&(xe(w),G(!0)),q(),g(!1))}catch(Fe){console.error("Failed to close complaint:",Fe),ie.error(Fe.response?.data?.message||"Failed to close complaint")}},Ve=async Ae=>{try{(await Te.post(`/complaints/${Ae}/reopen`,{},{headers:{Authorization:`Bearer ${U.accessToken}`}})).data.success&&(ie.success("Complaint reopened successfully!"),q(),g(!1))}catch(Fe){console.error("Failed to reopen complaint:",Fe),ie.error(Fe.response?.data?.message||"Failed to reopen complaint")}},Oe=async Ae=>{if(Ae.preventDefault(),!ne.rating){X("Please select a rating");return}try{(await Te.post(`/ratings/complaints/${oe.id}/rate`,{rating:ne.rating,feedback:ne.feedback},{headers:{Authorization:`Bearer ${U.accessToken}`}})).data.success&&(ie.success("Thank you for your feedback!"),G(!1),ye(!1),le({rating:0,feedback:""}),X(""),q())}catch(Fe){console.error("Failed to submit rating:",Fe),ie.error(Fe.response?.data?.message||"Failed to submit rating")}},et=Ae=>{const Fe=C.find(Ce=>Ce.id===Ae);return Fe?Fe.color:"gray"},be=Ae=>new Date(Ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l&&!t.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:P}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${L?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:P}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${L?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ma,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Report and track maintenance issues"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z,children:[e.jsx(Ca,{size:20}),e.jsx("span",{children:"File New Complaint"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:B.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:B.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ks,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:B.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Ha,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kf,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.length," of ",t.length," complaints"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:F.status,onChange:Ae=>T(Fe=>({...Fe,status:Ae.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ma,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t.length===0?"You haven't filed any complaints yet.":"No complaints match your filter criteria."}),t.length===0&&e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z,children:"File Your First Complaint"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(Ae=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:Ae.complaint_number}),Ae.category_name&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${et(Ae.category_id)}20`,color:et(Ae.category_id)},children:Ae.category_name})]}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-2",children:Ae.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:Ae.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[e.jsx(Oa,{size:12,className:"mr-1"}),Ae.apartment_name,"  Floor ",Ae.floor_number,"  House ",Ae.house_number]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[te(Ae.status),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${re(Ae.status)}`,children:Ae.status})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:be(Ae.created_at)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Re(Ae),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Details",children:e.jsx(xr,{size:16})})})})]},Ae.id))})]})})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"File New Complaint"}),e.jsx("button",{onClick:()=>{h(!1),se()},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),z?e.jsxs("form",{onSubmit:K,children:[e.jsx("div",{className:"mb-6"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Category *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:D.category_id,onChange:Ae=>{A(Fe=>({...Fe,category_id:Ae.target.value})),M.category_id&&I(Fe=>({...Fe,category_id:""}))},className:"w-full px-3 py-2 pl-10 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white appearance-none",children:[e.jsx("option",{value:"",children:"Select a category"}),C.map(Ae=>e.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]}),e.jsx(Jv,{className:"absolute left-3 top-2.5 text-gray-400",size:16})]}),M.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:M.category_id}),C.length===0&&e.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"No categories available. Please contact your administrator."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Title *"}),e.jsx("input",{type:"text",value:D.title,onChange:Ae=>{A(Fe=>({...Fe,title:Ae.target.value})),M.title&&I(Fe=>({...Fe,title:""}))},className:"w-full px-3 py-2 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief description of the issue"}),M.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:M.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Detailed Description *"}),e.jsx("textarea",{value:D.description,onChange:Ae=>{A(Fe=>({...Fe,description:Ae.target.value})),M.description&&I(Fe=>({...Fe,description:""}))},rows:4,className:"w-full px-3 py-2 border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed information about the issue..."}),M.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:M.description}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Be specific about the issue. Include details like location, severity, and any photos if possible."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),se()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Complaint"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Hr,{className:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:40}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No House Information Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please contact your apartment administrator to assign a house to your account."}),e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})]})})}),b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Complaint Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:w.complaint_number}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${re(w.status)}`,children:w.status}),w.category_name&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${et(w.category_id)}20`,color:et(w.category_id)},children:w.category_name})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-3",children:w.title})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Filed:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:be(w.created_at)})]}),w.assigned_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Assigned:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:be(w.assigned_at)})]}),w.resolved_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:be(w.resolved_at)})]}),w.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:be(w.updated_at)})]})]})})]})}),w.assigned_to_name&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx(ni,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:w.assigned_to_name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:w.assigned_to_role}),w.assignment_notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 italic border-l-2 border-blue-500 pl-2",children:["Note: ",w.assignment_notes]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Description"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:w.description})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Update Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.status==="Resolved"&&e.jsx("button",{onClick:()=>ke(w.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Verified & Close"}),w.status==="Resolved"&&e.jsx("button",{onClick:()=>Ve(w.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"Reopen - Issue Not Resolved"}),w.status==="Closed"&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:"This complaint is closed and cannot be reopened."})]})]}),ee&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Rate Your Experience"}),e.jsx("button",{onClick:()=>{G(!1),le({rating:0,feedback:""}),X("")},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:oe.complaint_number})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:oe.title})]})}),e.jsxs("form",{onSubmit:Oe,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"How would you rate the service? *"}),e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(Ae=>e.jsx("button",{type:"button",onClick:()=>{le(Fe=>({...Fe,rating:Ae})),Y&&X("")},className:`text-3xl ${Ae<=ne.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`,children:""},Ae))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("span",{children:"Poor"}),e.jsx("span",{children:"Excellent"})]}),Y&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:Y})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:ne.feedback,onChange:Ae=>le(Fe=>({...Fe,feedback:Ae.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about your experience..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{G(!1),le({rating:0,feedback:""}),X("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Skip"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Rating"})]})]})]})})}),de&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-purple-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(wE,{size:24,className:"text-yellow-300"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold",children:"Rate Your Experience"}),e.jsxs("p",{className:"text-sm mt-1",children:["Please rate the service for complaint ",oe?.complaint_number]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{G(!0),ye(!1)},className:"px-3 py-1 bg-white text-purple-600 rounded text-sm font-medium hover:bg-gray-100 transition-colors",children:"Rate Now"}),e.jsx("button",{onClick:()=>ye(!1),className:"px-3 py-1 bg-transparent border border-white rounded text-sm hover:bg-purple-700 transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>ye(!1),className:"ml-4 text-white hover:text-gray-200",children:""})]})}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function H_(){const[t,a]=E.useState(!1),[r,n]=E.useState([]),[l,d]=E.useState([]),[f,h]=E.useState(!0),[b,g]=E.useState(""),[w,k]=E.useState({status:"all",apartment_id:"all",category:"all"}),[C,S]=E.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:D}=E.useContext(Or),[A,M]=E.useState([]),[I,F]=E.useState([]),T=async()=>{try{const G=await Te.get("/apartments");G.data.success&&F(G.data.data||[])}catch(G){console.error("Error loading apartments:",G),ie.error("Failed to load apartments")}},B=async()=>{try{h(!0);const G=await Te.get("/complaints",{headers:{Authorization:`Bearer ${D.accessToken}`},params:w});if(G.data.success){const ne=G.data.data||[];if(n(ne),d(ne),H(ne),ne.length>0){const le=[...new Set(ne.map(Y=>Y.category).filter(Y=>Y&&Y.trim()!=="").sort())];le.includes("General")||le.unshift("General"),M(le)}}}catch(G){console.error("Failed to fetch complaints:",G),ie.error("Failed to load complaints")}finally{h(!1)}};E.useEffect(()=>{D.accessToken&&(T(),B())},[D.accessToken,w]),E.useEffect(()=>{if(!r.length){d([]);return}let G=[...r];if(b){const ne=b.toLowerCase();G=G.filter(le=>le.complaint_number?.toLowerCase().includes(ne)||le.title?.toLowerCase().includes(ne)||le.houseowner_name&&le.houseowner_name.toLowerCase().includes(ne)||le.apartment_name&&le.apartment_name.toLowerCase().includes(ne))}w.status!=="all"&&(G=G.filter(ne=>ne.status===w.status)),w.apartment_id!=="all"&&(G=G.filter(ne=>ne.apartment_id===w.apartment_id)),w.category!=="all"&&(G=G.filter(ne=>ne.category===w.category)),d(G)},[r,b,w]);const H=G=>{const ne=G.length,le=G.filter(de=>de.status==="Pending").length,Y=G.filter(de=>de.status==="In Progress").length,X=G.filter(de=>de.status==="Resolved"||de.status==="Closed").length;S({total:ne,pending:le,in_progress:Y,resolved:X})},U=G=>{switch(G){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},L=G=>{switch((G||"").toLowerCase()){case"water":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"electricity":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"gas":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"plumbing":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300";case"carpentry":return"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300";case"general":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},P=G=>{if(!G)return"N/A";try{return new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},z=(G,ne)=>{if(!G||!ne)return"N/A";try{const le=new Date(G),X=(ne==="now"?new Date:new Date(ne))-le,de=Math.floor(X/(1e3*60*60*24)),ye=Math.floor(X%(1e3*60*60*24)/(1e3*60*60)),oe=Math.floor(X%(1e3*60*60)/(1e3*60));return de>0?`${de}d ${ye}h`:ye>0?`${ye}h ${oe}m`:oe>0?`${oe}m`:"Just now"}catch{return"N/A"}},W=G=>{if(!G||G===0)return"N/A";const ne=Math.floor(G/3600),le=Math.floor(G%3600/60);return ne>0?`${ne}h ${le}m`:`${le}m`},ee=()=>{g(""),k({status:"all",apartment_id:"all",category:"all"})};return f?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ma,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"All Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and manage all complaints"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:C.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:C.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ks,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:C.in_progress})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Qu,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved/Closed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:C.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Ha,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter & Search Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(kf,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.length," of ",r.length," complaints"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:b,onChange:G=>g(G.target.value),placeholder:"Search by complaint number, title, or house owner...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),e.jsx("div",{children:e.jsxs("select",{value:w.status,onChange:G=>k(ne=>({...ne,status:G.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsxs("select",{value:w.apartment_id,onChange:G=>k(ne=>({...ne,apartment_id:G.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Apartments"}),I.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:w.category_id||"all",onChange:G=>k(ne=>({...ne,category_id:G.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),A.map(G=>e.jsx("option",{value:G.category_id,children:G.category_name},G.category_id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:ee,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ma,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:r.length===0?"No complaints have been filed yet.":"No complaints match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Timeline & Rating"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.map(G=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:G.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:G.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:G.description}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${L(G.category)}`,children:G.category||"General"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["By: ",G.houseowner_name||"Unknown"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",P(G.created_at)]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:G.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",G.floor_number,"  House ",G.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${U(G.status)}`,children:G.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[G.resolved_at?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[e.jsx(nC,{size:14,className:"mr-1"}),"Resolved: ",P(G.resolved_at)]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Duration: ",z(G.created_at,G.resolved_at)]})]}):e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Open for: ",z(G.created_at,"now")]}),G.total_work_time>0&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center",children:[e.jsx(ew,{size:12,className:"mr-1"}),"Work Time: ",W(G.total_work_time)]})]})})]},G.id))})]})})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function V_(){const[t,a]=E.useState([]),[r,n]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(""),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState({status:"all"}),[D,A]=E.useState({total:0,pending:0,in_progress:0,resolved:0}),[M,I]=E.useState({}),{auth:F}=E.useContext(Or),T=hr(),[B,H]=E.useState([]),[U,L]=E.useState([]),[P,z]=E.useState(!1),[W,ee]=E.useState("pending"),G=async()=>{try{const K=await Te.get(`/user-apartments/users/${F.user.id}/apartments`);K.data.success?H(K.data.data||[]):(ie.error("Failed to load apartments"),H([]))}catch(K){console.error("Error fetching apartments:",K),ie.error("Error loading your apartments"),H([])}},ne=async()=>{try{z(!0);const K=await Te.get(`/technician-categories/technicians/${F.user.id}/categories`,{headers:{Authorization:`Bearer ${F.accessToken}`}});K.data.success?L(K.data.data||[]):(console.error("Failed to load assigned categories:",K.data.message),L([]))}catch(K){console.error("Error fetching assigned categories:",K),L([])}finally{z(!1)}},le=async()=>{try{d(!0);const K=await Te.get("/complaints/my-complaints/technician",{headers:{Authorization:`Bearer ${F.accessToken}`},params:C});if(K.data.success){const se=K.data.data||[];a(se),n(se),K.data.statistics&&A(K.data.statistics)}else console.error("Failed to load complaints:",K.data.message),a([]),n([])}catch(K){console.error("Error fetching complaints:",K),a([]),n([])}finally{d(!1)}};E.useEffect(()=>{F?.user?.id&&(async()=>(await Promise.all([G(),ne()]),F?.accessToken&&le()))()},[F?.user?.id]);const Y=async K=>{try{T(`/my-work/${K.id}`,{state:{complaint:K}})}catch(se){console.error("Error navigating to my work:",se),ie.error("Failed to start work")}};E.useEffect(()=>{F?.accessToken&&B.length>0&&le()},[F?.accessToken,B,C]),E.useEffect(()=>{if(!t.length){n([]);return}let K=t.filter(se=>se.complaint_number?.toLowerCase().includes(f.toLowerCase())||se.title?.toLowerCase().includes(f.toLowerCase())||se.description?.toLowerCase().includes(f.toLowerCase())||se.houseowner_name?.toLowerCase().includes(f.toLowerCase())||se.apartment_name?.toLowerCase().includes(f.toLowerCase()));n(K)},[t,f]);const X=K=>{try{return new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},de=K=>{switch(K){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},ye=K=>{if(!K.category_name&&!K.category_id)return null;const se=U.find(re=>re.category_id===K.category_id);return se?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${se.category_color}20`,color:se.category_color},children:K.category_name||"Uncategorized"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:K.category_name||"Uncategorized"})},oe=(K,se)=>{S(re=>({...re,[K]:se}))},xe=()=>{S({status:"all"}),h("")},ae=K=>K.status==="Resolved"||K.status==="Closed"?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"})}):K.status==="Pending"||K.status==="In Progress"||K.is_on_hold?e.jsxs("button",{onClick:()=>Y(K),className:"flex items-center justify-center gap-1 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors w-full",title:K.is_on_hold?"Resume from Hold":"Start Work",children:[e.jsx(Kv,{size:16}),e.jsx("span",{children:K.is_on_hold?"Resume Work":"Start Work"})]}):null,q=()=>P?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Loading your assigned categories..."})]}):B.length===0&&U.length===0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ma,{className:"text-yellow-600 dark:text-yellow-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No assignments found"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:"You need to be assigned to apartments and categories to see complaints."})]})]})}):e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:["Assigned Categories: ",U.length]})}),U.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[U.slice(0,3).map(K=>e.jsx("span",{className:"px-4 py-2 text-xs rounded-full font-medium bg-gray-400 dark:bg-gray-300",style:{color:K.category_color},children:K.category_name},K.category_id)),U.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400",children:["+",U.length-3," more"]})]})]});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:g})}),w&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>k(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${w?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:g})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>k(!0)}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ma,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Complaints assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:D.total})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ma,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View complaints from your assigned apartments and categories"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6",children:q()}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints by number, title, or house owner...",value:f,onChange:K=>h(K.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{children:e.jsxs("select",{value:C.status,onChange:K=>oe("status",K.target.value),className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.length," of ",t.length," complaints"]}),(C.status!=="all"||f)&&e.jsx("button",{onClick:xe,className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:"Clear filters"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ma,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:f?"No matching complaints found":"No complaints available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:f?"Try adjusting your search terms":B.length===0?"You are not assigned to any apartments":U.length===0?"You are not assigned to any complaint categories":"No complaints match your assigned apartments and categories"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:r.map(K=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ma,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base",children:K.complaint_number}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 truncate",children:K.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${de(K.status)}`,children:[K.status,K.is_on_hold&&" (On Hold)"]}),ye(K)]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Oa,{size:14,className:"mr-2"}),e.jsx("span",{className:"truncate",children:K.apartment_name||"Unknown"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(mo,{size:14,className:"mr-2"}),e.jsxs("span",{children:["Floor ",K.floor_number,"  House ",K.house_number]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(us,{size:14,className:"mr-2"}),e.jsxs("span",{className:"truncate",children:["House Owner: ",K.houseowner_name||"Unknown"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:K.description})}),e.jsx("div",{className:"mb-4",children:ae(K)}),e.jsx("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",X(K.created_at)]}),K.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",X(K.assigned_at)]})]})})]},K.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Hold Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(K=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:K.complaint_number}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mt-1",children:K.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:K.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["House Owner: ",K.houseowner_name||"Unknown"]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:K.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",K.floor_number,"  House ",K.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:ye(K)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${de(K.status)}`,children:K.status}),K.is_on_hold&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"On Hold"})})]}),e.jsx("td",{className:"px-4 py-4",children:ae(K)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:X(K.created_at)}),K.assigned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",X(K.assigned_at)]})]})]},K.id))})]})})]})}),r.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(js,{size:20})})})]})})]})]})}function G_(){const[t,a]=E.useState(!1),[r,n]=E.useState(null),[l,d]=E.useState(!0),[f,h]=E.useState(!1),[b,g]=E.useState({name:"",country:"",mobile:"",nic:"",occupation:""}),{auth:w}=E.useContext(Or);E.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const F=await Te.get("/auth/me");if(F.data.success&&F.data.data&&F.data.data.length>0){const T=F.data.data[0];n(T),g({name:T.name||`${T.firstname||""} ${T.lastname||""}`.trim(),country:T.country||"",mobile:T.mobile||"",nic:T.nic||"",occupation:T.occupation||""})}else ie.error("No profile data found")}catch(F){console.error("Error fetching house owner profile:",F),ie.error("Failed to load profile")}finally{d(!1)}},C=()=>{h(!0)},S=()=>{h(!1),r&&g({name:r.name||`${r.firstname||""} ${r.lastname||""}`.trim(),country:r.country||"",mobile:r.mobile||"",nic:r.nic||"",occupation:r.occupation||""})},D=async()=>{try{console.log("Updating house owner profile:",b);const F=await Te.put(`/auth/users/${r.id}`,b);F.data.success?(n(T=>({...T,...F.data.data,name:b.name})),h(!1),ie.success("Profile updated successfully"),k()):ie.error(F.data.message||"Failed to update profile")}catch(F){console.error("Error updating house owner profile:",F),ie.error(F.response?.data?.message||"Failed to update profile")}},A=F=>{const{name:T,value:B}=F.target;g(H=>({...H,[T]:B}))},M=F=>{if(!F)return"Not available";try{return new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!r)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"}),e.jsx("button",{onClick:k,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]})});const I=()=>{if(r.name){const F=r.name.split(" ");return F.length>=2?(F[0].charAt(0)+F[1].charAt(0)).toUpperCase():r.name.charAt(0).toUpperCase()}return r.firstname?.charAt(0)?.toUpperCase()||"H"};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(Pi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(zi,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"My Profile"}),e.jsx("span",{className:"ml-3 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded-full",children:"House Owner"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:S,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(gr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:D,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(Cf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save Changes"})]})]}):e.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Ea,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsx("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:I()})}),e.jsx("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:"House Owner"}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(_l,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",M(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]})]}),(r.apartment_name||r.house_number||r.floor_number)&&e.jsxs("div",{className:"mt-4 md:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 mb-2 md:mb-3 flex items-center",children:[e.jsx(Hr,{size:16,className:"md:size-4 mr-2"}),"Property Information"]}),e.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[r.apartment_name&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Fi,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Apartment: ",r.apartment_name]})]}),r.house_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Hr,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["House No: ",r.house_number]})]}),r.floor_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Fi,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["Floor: ",r.floor_number]})]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(us,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Full Name"]}),f?e.jsx("input",{type:"text",name:"name",value:b.name,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(xr,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"NIC Number"]}),f?e.jsx("input",{type:"text",name:"nic",value:b.nic,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter NIC number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.nic||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx($u,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Occupation"]}),f?e.jsx("input",{type:"text",name:"occupation",value:b.occupation,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your occupation"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.occupation||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(mo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your country"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Dc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter mobile number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(ho,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email Address"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(kc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Account Type"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:"House Owner"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6 mt-4 md:mt-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Verification Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Account Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:M(r.created_at)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Profile Update"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:r.updated_at?M(r.updated_at):"Not updated yet"})]})]})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function Y_({complaint:t,onClose:a,onHoldSuccess:r}){const[n,l]=E.useState(""),[d,f]=E.useState(""),[h,b]=E.useState(!1),[g,w]=E.useState(""),{auth:k}=E.useContext(Or),C=["Waiting for parts/equipment","Need specialist assistance","Material shortage","Weather conditions","Safety concerns","Access issues","Waiting for approval","Other"],S=async M=>{if(M.preventDefault(),!n.trim()){ie.error("Please provide a reason for placing the complaint on hold");return}try{b(!0);const I=await Te.post(`/complaints/${t.id}/hold`,{reason:n,expected_resolution_date:d||null},{headers:{Authorization:`Bearer ${k.accessToken}`}});I.data.success?(ie.success("Complaint placed on hold successfully"),r(),a()):ie.error(I.data.message||"Failed to place complaint on hold")}catch(I){console.error("Error holding complaint:",I),ie.error(I.response?.data?.message||"Failed to place complaint on hold")}finally{b(!1)}},D=M=>{w(M),l(M==="Other"?"":M)},A=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg mr-3",children:e.jsx(ma,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Hold Complaint"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(gr,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:t.complaint_number})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-6 ",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Common Reasons"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(M=>e.jsx("button",{type:"button",onClick:()=>D(M),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${g===M?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900 dark:text-purple-300 dark:border-purple-700":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,children:M},M))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hold Reason Details"}),e.jsx("textarea",{value:n,onChange:M=>{l(M.target.value),M.target.value!==g&&w("")},rows:"4",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Describe why you need to hold this complaint...",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Resolution Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",value:d,onChange:M=>f(M.target.value),min:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"When do you expect to resume work on this complaint?"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ma,{size:18,className:"text-yellow-600 dark:text-yellow-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," The complaint timer will be paused while on hold. You will need to resume the complaint before completing the work."]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!n.trim(),className:"px-4 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ma,{size:18}),"Place on Hold"]})})]})]})]})]})})}function Aw(){const{complaintId:t}=gn(),a=On(),[r,n]=E.useState(a.state?.complaint||null),[l,d]=E.useState(!1),[f,h]=E.useState(null),[b,g]=E.useState(!1),[w,k]=E.useState(!1),[C,S]=E.useState(""),[D,A]=E.useState(null),[M,I]=E.useState(""),[F,T]=E.useState(!1),[B,H]=E.useState(0),[U,L]=E.useState("environment"),P=E.useRef(null),z=hr(),{auth:W}=E.useContext(Or),ee=E.useRef(null),[G,ne]=E.useState(!1),[le,Y]=E.useState(!1),[X,de]=E.useState(!1),[ye,oe]=E.useState(!1),[xe,ae]=E.useState(null),[q,K]=E.useState(!1);E.useEffect(()=>{const Le=async()=>{if(!r&&t)try{g(!0);const fe=await Te.get(`/complaints/${t}`,{headers:{Authorization:`Bearer ${W.accessToken}`}});fe.data.success?n(fe.data.data):(ie.error("Failed to load complaint details"),z("/my-complaints"))}catch(fe){console.error("Error fetching complaint:",fe),ie.error("Error loading complaint information"),z("/my-complaints")}finally{g(!1)}};W?.accessToken&&t&&Le()},[t,W?.accessToken,r,z]);const se=async Le=>{try{if(!Le)return{access:!1,reason:"Invalid house ID"};const fe=await Te.get(`/houses/${Le}`);if(!fe.data.success||!fe.data.data)return{access:!1,reason:"House not found in the system"};const st=fe.data.data;if(r&&r.house_id!==st.id)return{access:!1,reason:`This house (${st.house_id}) does not match the complaint's house (House ${r.house_number})`};let Ee=null;if(st.apartment_id)try{const Et=await Te.get(`/apartments/${st.apartment_id}`);Et.data.success&&(Ee=Et.data.data)}catch(Et){console.error("Error fetching apartment:",Et)}let wt=null;if(st.floor_id)try{const Et=await Te.get(`/floors/${st.floor_id}`);Et.data.success&&(wt=Et.data.data)}catch(Et){console.error("Error fetching floor:",Et)}const ut={...st,apartment:Ee,floor:wt};return A(ut),{access:!0,houseData:ut,apartmentId:st.apartment_id,floorId:st.floor_id,houseId:st.id}}catch(fe){if(console.error("Error checking house access:",fe),fe.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const st=fe.response?.status;return st===401?{access:!1,reason:"Session expired. Please login again."}:st===403?{access:!1,reason:"Access denied to this resource."}:st===404?{access:!1,reason:"House not found."}:st===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},re=async()=>{try{const Le=await Te.post(`/complaints/${t}/timer/start`,{},{headers:{Authorization:`Bearer ${W.accessToken}`}});if(Le.data.success){const fe=Le.data.data;return T(!0),ne(!0),H(fe.currentElapsedTime||0),ee.current&&clearInterval(ee.current),ee.current=setInterval(()=>{H(st=>st+1)},1e3),ie.success("Work started! Timer is now running."),n(st=>({...st,status:"In Progress",is_timer_running:!0,work_started_at:new Date().toISOString()})),!0}else return ie.error(Le.data.message||"Failed to start timer"),!1}catch(Le){return console.error("Error starting timer:",Le),ie.error(Le.response?.data?.message||"Failed to start timer"),!1}},te=async()=>{try{const Le=await Te.post(`/complaints/${t}/timer/stop`,{},{headers:{Authorization:`Bearer ${W.accessToken}`}});return Le.data.success?(T(!1),ne(!1),ee.current&&(clearInterval(ee.current),ee.current=null),Le.data.data&&Le.data.data.currentElapsedTime&&H(Le.data.data.currentElapsedTime),ie.success("Work completed! Timer stopped."),n(fe=>({...fe,status:"Resolved",is_timer_running:!1,work_paused_at:new Date().toISOString()})),setTimeout(()=>{z("/my-complaints")},3e3),!0):(ie.error(Le.data.message||"Failed to stop timer"),!1)}catch(Le){return console.error("Error stopping timer:",Le),ie.error(Le.response?.data?.message||"Failed to stop timer"),!1}},Re=async()=>{try{const Le=await Te.post(`/complaints/${t}/timer/pause`,{},{headers:{Authorization:`Bearer ${W.accessToken}`}});return Le.data.success?(T(!1),ee.current&&(clearInterval(ee.current),ee.current=null),Le.data.data&&Le.data.data.currentElapsedTime&&H(Le.data.data.currentElapsedTime),ie.success("Timer paused"),!0):(ie.error(Le.data.message||"Failed to pause timer"),!1)}catch(Le){return console.error("Error pausing timer:",Le),ie.error(Le.response?.data?.message||"Failed to pause timer"),!1}},ke=async()=>{try{const Le=await Te.post(`/complaints/${t}/timer/resume`,{},{headers:{Authorization:`Bearer ${W.accessToken}`}});return Le.data.success?(T(!0),ee.current||(ee.current=setInterval(()=>{H(fe=>fe+1)},1e3)),ie.success("Timer resumed"),!0):(ie.error(Le.data.message||"Failed to resume timer"),!1)}catch(Le){return console.error("Error resuming timer:",Le),ie.error(Le.response?.data?.message||"Failed to resume timer"),!1}},Ve=()=>{d(!0),h(null),k(!1),S(""),A(null),I(""),P.current&&(P.current.clear().catch(Le=>{console.log("Scanner clear error on start:",Le)}),P.current=null),setTimeout(()=>{try{const Le=document.getElementById("qr-reader");Le&&(Le.innerHTML=""),P.current=new D_("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,supportedScanTypes:[Li.SCAN_TYPE_CAMERA],facingMode:U},!1),P.current.render(fe=>{Oe(fe)},fe=>{console.log("QR Scan error:",fe)}),console.log("Scanner started with camera:",U)}catch(Le){console.error("Scanner initialization error:",Le),ie.error("Failed to initialize scanner. Please refresh and try again."),d(!1)}},300)},Oe=async Le=>{try{g(!0),P.current&&await P.current.clear(),d(!1),I("");const fe=Le.trim();if(h({houseId:fe,source:"qr"}),xe?.is_on_hold){const st=await se(fe);st.access?(ie.success("Location verified! Ready to resume from hold."),k(!0)):(k(!1),S(st.reason||"Access denied"),ie.error(st.reason||"Access denied"))}else{const st=await se(fe);if(st.access){k(!0),ie.success("Access granted! This is the correct house.");try{await re()&&(T(!0),ne(!0),n(wt=>({...wt,status:"In Progress",is_timer_running:!0})))}catch(Ee){ie.error("Failed to start timer: "+Ee.message)}}else k(!1),S(st.reason||"Access denied"),ie.error(st.reason||"Access denied")}}catch(fe){console.error("Error processing QR code:",fe),ie.error(fe.message||"Invalid QR code. Please scan a valid house QR code."),d(!1)}finally{g(!1)}},et=async()=>{const Le=U==="environment"?"user":"environment";if(P.current)try{await P.current.clear(),console.log("Scanner cleared for camera switch")}catch(fe){console.log("Error clearing scanner:",fe)}L(Le),l&&setTimeout(()=>{Ve()},500)},be=Le=>{const fe=Math.floor(Le/3600),st=Math.floor(Le%3600/60),Ee=Le%60;return`${fe.toString().padStart(2,"0")}:${st.toString().padStart(2,"0")}:${Ee.toString().padStart(2,"0")}`},Ae=async()=>{if(P.current){try{await P.current.clear()}catch(Le){console.log("Scanner clear error on reset:",Le)}P.current=null}ee.current&&(clearInterval(ee.current),ee.current=null),d(!1),h(null),k(!1),S(""),A(null),I(""),T(!1),H(0),ne(!1)};E.useEffect(()=>()=>{P.current&&P.current.clear().catch(Le=>{console.log("Scanner clear error on unmount:",Le)}),ee.current&&clearInterval(ee.current)},[]),E.useEffect(()=>((async()=>{if(t&&W?.accessToken)try{const fe=await Te.get(`/complaints/${t}/timer/status`,{headers:{Authorization:`Bearer ${W.accessToken}`}});if(fe.data.success&&fe.data.data){const st=fe.data.data;st.is_timer_running&&(T(!0),ne(!0),H(st.currentElapsedTime||0),ee.current=setInterval(()=>{H(Ee=>Ee+1)},1e3))}}catch{console.log("No active timer found")}})(),()=>{ee.current&&clearInterval(ee.current)}),[t,W?.accessToken]);const Fe=Le=>{try{return new Date(Le).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},Ce=async()=>{try{K(!0);const Le=await Te.get(`/complaints/${t}/hold-status`,{headers:{Authorization:`Bearer ${W.accessToken}`}});Le.data.success&&ae(Le.data.data)}catch(Le){console.error("Error fetching hold status:",Le)}finally{K(!1)}};E.useEffect(()=>{t&&W?.accessToken&&Ce()},[t,W?.accessToken]);const Je=async()=>{try{g(!0);const Le=await Te.post(`/complaints/${t}/resume`,{},{headers:{Authorization:`Bearer ${W.accessToken}`}});Le.data.success?(ie.success("Complaint resumed from hold"),ae(null),T(!0),ne(!0),n(fe=>({...fe,status:"In Progress",is_timer_running:!0,is_on_hold:!1})),ee.current&&clearInterval(ee.current),ee.current=setInterval(()=>{H(fe=>fe+1)},1e3)):ie.error(Le.data.message||"Failed to resume complaint")}catch(Le){console.error("Error resuming from hold:",Le),ie.error(Le.response?.data?.message||"Failed to resume complaint")}finally{g(!1)}},ve=()=>{Ce(),T(!1),ee.current&&(clearInterval(ee.current),ee.current=null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(vr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Complaint: ",r.complaint_number]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.title})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${r.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r.status==="In Progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:r.status})}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Created: ",Fe(r.created_at)]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.description})]})]}),G&&!xe?.is_on_hold&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-800 rounded-lg mr-4",children:e.jsx(ew,{size:24,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Work In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-200 mt-2",children:be(B)}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Elapsed Time"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[F?e.jsx("button",{onClick:Re,className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors min-w-[70px]",children:e.jsx(eE,{size:16})}):e.jsx("button",{onClick:ke,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors min-w-[70px]",children:e.jsx(Kv,{size:16})}),e.jsx("button",{onClick:()=>oe(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors min-w-[70px]",children:e.jsx(ma,{size:16})}),e.jsx("button",{onClick:te,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors min-w-[70px]",children:e.jsx(bC,{size:16})})]})]})}),xe?.is_on_hold&&!G&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx(ma,{size:24,className:"text-orange-600 dark:text-orange-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300",children:"Complaint On Hold"}),e.jsxs("p",{className:"text-orange-700 dark:text-orange-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",xe.reason]}),xe.expected_resolution_date&&e.jsxs("p",{className:"text-orange-700 dark:text-orange-400",children:[e.jsx("span",{className:"font-medium",children:"Expected Resolution:"})," ",new Date(xe.expected_resolution_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"To resume work:"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"Verify your location (scan QR or enter House ID)"}),e.jsx("li",{children:'Click "Resume from Hold" button'}),e.jsx("li",{children:"The timer will resume from where it was paused"})]})]}),w?e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(hn,{size:20,className:"text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Location verified! You can now resume work."})]}),e.jsxs("button",{onClick:Je,className:"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",disabled:b,children:[e.jsx(pC,{size:20}),"Resume from Hold"]})]}):e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"Please verify your location first to resume work"})]}),l&&!G&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:et,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${U==="environment"?"Front":"Back"} Camera`,children:[e.jsx(Zv,{size:16}),e.jsx("span",{children:"Switch Camera"})]}),e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/40",children:[e.jsx(gr,{size:16}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 text-black dark:text-white"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Scanning ",U==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Scan the house QR code to verify location and start work"}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Gt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processing..."})]}),f&&!b&&!l&&!G&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Verification"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[f.source==="manual"?"Manual Entry":"QR Scan"," Result"]})]}),e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(wc,{size:16}),e.jsx("span",{children:"Try Again"})]})]}),w?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(hn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Location Verified "}),e.jsx("p",{className:"text-green-700 dark:text-green-400",children:"Timer has been started automatically"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center justify-center bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx(Ks,{size:24,className:"text-green-600 dark:text-green-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:"Running..."})]})]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ma,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:C}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsx("p",{children:"Requirements to start work:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House ID must match the complaint's house"}),e.jsx("li",{children:"House must exist in the system"}),e.jsx("li",{children:"You must be at the correct location"})]})]})]})]})})]}),!f&&!l&&!b&&!G&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Qu,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Start Work"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Verify the house location to start working on this complaint"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"You must verify that you are at the correct house before starting work"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),e.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]})}),e.jsxs("div",{children:[e.jsx(X0,{size:48,className:"mx-auto text-purple-400 mb-4"}),e.jsxs("button",{onClick:Ve,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(qv,{size:20}),"Scan House QR Code"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"QR scanning will automatically verify and start timer"})]})]})}),G&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(Qu,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Work Started Successfully"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are now working on complaint: ",e.jsx("strong",{children:r?.complaint_number})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Remember to stop the timer when you finish your work"}),e.jsx("p",{className:"mt-1",children:"The complaint will be marked as completed automatically"})]})]})})]})})]}),ye&&r&&e.jsx(Y_,{complaint:r,onClose:()=>oe(!1),onHoldSuccess:ve}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function X_(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),l=hr(),d=()=>{l("/my-complaints")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>n(!1)}),e.jsx("div",{className:`
            lg:hidden fixed left-0 top-0 h-full z-50
            transform transition-transform duration-300 ease-in-out
            ${r?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(vr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(ob,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"My Service"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(ob,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Service Management"})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(Aw,{})})]})})]})]})}function q_({onClose:t,onCreated:a}){const{auth:r}=E.useContext(Or),[n,l]=E.useState(!1),[d,f]=E.useState({}),[h,b]=E.useState({name:"",description:"",color:"Purple"}),g=[{name:"Purple",value:"#667eea",displayName:"Purple"},{name:"Blue",value:"#3b82f6",displayName:"Blue"},{name:"Green",value:"#10b981",displayName:"Green"},{name:"Yellow",value:"#f59e0b",displayName:"Yellow"},{name:"Red",value:"#ef4444",displayName:"Red"},{name:"Pink",value:"#ec4899",displayName:"Pink"},{name:"Indigo",value:"#6366f1",displayName:"Indigo"},{name:"Teal",value:"#14b8a6",displayName:"Teal"},{name:"Orange",value:"#f97316",displayName:"Orange"},{name:"Gray",value:"#6b7280",displayName:"Gray"}],w=B=>{const H=g.find(U=>U.name===B);return H?H.value:"#667eea"},k=B=>{const H=g.find(U=>U.name===B);return H?`${H.displayName} (${H.value})`:`Custom (${w(B)})`},C=B=>!g.some(H=>H.name===B),S=()=>C(h.color)?h.color.startsWith("#")?h.color:"#667eea":w(h.color),D=()=>{const B={};return h.name.trim()?h.name.trim().length<2?B.name="Category name must be at least 2 characters":h.name.trim().length>50&&(B.name="Category name cannot exceed 50 characters"):B.name="Category name is required",h.description&&h.description.length>500&&(B.description="Description cannot exceed 500 characters"),h.color||(B.color="Please select a color"),B},A=B=>{const{name:H,value:U}=B.target;b(L=>({...L,[H]:U})),d[H]&&f(L=>({...L,[H]:""}))},M=B=>{b(H=>({...H,color:B})),d.color&&f(H=>({...H,color:""}))},I=B=>{b(H=>({...H,color:B})),d.color&&f(H=>({...H,color:""}))},F=async B=>{B.preventDefault();const H=D();if(Object.keys(H).length>0){f(H);return}try{l(!0);const U={name:h.name.trim(),description:h.description.trim(),color:h.color},L=await Te.post("/categories",U,{headers:{Authorization:`Bearer ${r.accessToken}`}});if(L.data.success)a&&a(),t();else throw new Error(L.data.message||"Failed to create category")}catch(U){console.error("Create category error:",U),U.response?.status===409?(f(L=>({...L,name:"A category with this name already exists"})),ie.error("A category with this name already exists")):U.response?.status===401?(ie.error("Session expired. Please login again."),t()):ie.error(U.response?.data?.message||"Failed to create service category")}finally{l(!1)}},T=()=>{b({name:"",description:"",color:"Purple"}),f({})};return e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:A,className:`w-full px-3 py-2 border  text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Plumbing, Electrical, Carpentry",disabled:n}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required. Will be used for complaint categorization."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:h.description,onChange:A,rows:3,className:`w-full px-3 py-2 text-gray-700 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.description?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Brief description of what this category includes...",disabled:n}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Optional. Helps technicians understand the category scope."}),e.jsxs("p",{className:`text-xs ${h.description.length>500?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[h.description.length,"/500"]})]}),d.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Color *"}),e.jsxs("div",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg mr-3 border-2 border-gray-300 dark:border-gray-600 flex-shrink-0",style:{backgroundColor:S()}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:C(h.color)?"Custom Color":h.color}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:e.jsx("span",{className:"truncate",children:k(h.color)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select from predefined colors:"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:g.map(B=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{type:"button",onClick:()=>M(B.name),className:`relative w-full aspect-square rounded-lg border-2 transition-all hover:scale-105 mb-1 ${h.color===B.name?"border-purple-500 dark:border-purple-400 scale-105 shadow-md":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,title:`${B.displayName} (${B.value})`,disabled:n,children:[e.jsx("div",{className:"w-full h-full rounded",style:{backgroundColor:B.value}}),h.color===B.name&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded",children:e.jsx(hn,{className:"text-white",size:14})})]}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center",children:B.name})]},B.name))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Custom Color"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Or create your own"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(QC,{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:18}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Color Picker"}),e.jsx("input",{type:"color",value:S(),onChange:B=>I(B.target.value),className:"w-full h-10 cursor-pointer rounded border border-gray-300 dark:border-gray-600",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Hex Code"}),e.jsx("input",{type:"text",value:S(),onChange:B=>I(B.target.value),className:"w-full px-3 py-2  text-gray-700 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-800 dark:text-white",placeholder:"#RRGGBB",pattern:"^#[0-9A-Fa-f]{6}$",disabled:n})]})]})]}),C(h.color)&&e.jsx("div",{className:"mt-3 p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:S()}}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Custom Color Selected"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:S()})]})})]}),d.color&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:d.color}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Color helps visually identify this category in lists and charts."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:"Reset Form"}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"flex items-center justify-center px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"animate-spin mr-2",size:16}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hn,{className:"mr-2",size:16}),"Create Category"]})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Tips for creating categories:"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:'Use clear, descriptive names (e.g., "Electrical Repair" instead of "Electricity")'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Keep descriptions concise but informative"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Choose distinct colors for easy visual differentiation"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Categories can be assigned to technicians for specialization"})]})]})]})]})}function $_({onClose:t,onEdited:a,serviceCategory:r}){const{auth:n}=E.useContext(Or),[l,d]=E.useState(!1),[f,h]=E.useState(!1),[b,g]=E.useState({name:"",description:"",color:"#6b46c1"}),[w,k]=E.useState({}),[C,S]=E.useState(window.innerWidth<768);E.useEffect(()=>{const T=()=>{S(window.innerWidth<768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),E.useEffect(()=>{r&&g({name:r.name||"",description:r.description||"",color:r.color||"#6b46c1"})},[r]);const D=()=>{const T={};return b.name.trim()?b.name.length>100&&(T.name="Name must be less than 100 characters"):T.name="Category name is required",b.description&&b.description.length>500&&(T.description="Description must be less than 500 characters"),b.color||(T.color="Color is required"),k(T),Object.keys(T).length===0},A=T=>{const{name:B,value:H}=T.target;g(U=>({...U,[B]:H})),w[B]&&k(U=>({...U,[B]:""}))},M=T=>{g(B=>({...B,color:T.target.value})),w.color&&k(B=>({...B,color:""}))},I=async T=>{if(T.preventDefault(),!!D()){h(!0);try{const B={name:b.name.trim(),color:b.color};b.description.trim()&&(B.description=b.description.trim());const H=await Te.put(`/categories/${r.id}`,B);H.data.success?a():ie.error(H.data.message||"Failed to update category")}catch(B){if(console.error("Update category error:",B),B.response)switch(B.response.status){case 400:ie.error("Invalid data provided");break;case 401:ie.error("Session expired. Please login again.");break;case 403:ie.error("You do not have permission to update this category");break;case 404:ie.error("Category not found"),t();break;case 409:ie.error(B.response.data?.message||"Category with this name already exists");break;default:ie.error("Failed to update service category")}else B.request?ie.error("No response from server. Please check your connection."):ie.error("An error occurred while updating the category")}finally{h(!1)}}},F=[{value:"#6b46c1",label:"Purple",color:"bg-purple-500"},{value:"#4299e1",label:"Blue",color:"bg-blue-500"},{value:"#38a169",label:"Green",color:"bg-green-500"},{value:"#e53e3e",label:"Red",color:"bg-red-500"},{value:"#ed8936",label:"Orange",color:"bg-orange-500"},{value:"#d69e2e",label:"Yellow",color:"bg-yellow-500"},{value:"#4fd1c7",label:"Teal",color:"bg-teal-500"},{value:"#9f7aea",label:"Indigo",color:"bg-indigo-500"},{value:"#f687b3",label:"Pink",color:"bg-pink-500"}];return e.jsxs("form",{onSubmit:I,className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:b.name,onChange:A,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.name?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter category name",disabled:f,maxLength:100}),w.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.name}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:A,rows:C?3:4,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.description?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none`,placeholder:"Enter category description",disabled:f,maxLength:500}),w.description&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.description}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color *"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Quick select:"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-9 gap-2",children:F.map(T=>e.jsx("button",{type:"button",onClick:()=>{g(B=>({...B,color:T.value})),w.color&&k(B=>({...B,color:""}))},className:`relative w-8 h-8 rounded-full flex items-center justify-center ${T.color} border-2 ${b.color===T.value?"border-gray-800 dark:border-white":"border-transparent"} hover:border-gray-400 dark:hover:border-gray-300 transition-colors`,title:T.label,disabled:f,children:b.color===T.value&&e.jsx(hn,{size:14,className:"text-white"})},T.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Custom color:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300 dark:border-gray-600",style:{backgroundColor:b.color}}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",id:"color",name:"color",value:b.color,onChange:M,className:"w-full h-10 cursor-pointer",disabled:f})}),e.jsx("div",{className:"w-24",children:e.jsx("input",{type:"text",value:b.color,onChange:M,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#000000",disabled:f,maxLength:7})})]}),w.color&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.color})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Current Category Information:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.updated_at).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:`flex ${C?"flex-col space-y-3":"space-x-3"} pt-4 border-t border-gray-200 dark:border-gray-700`,children:[e.jsx("button",{type:"button",onClick:t,disabled:f,className:`flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${C?"":"order-2"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:`flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center justify-center ${f?"opacity-70 cursor-not-allowed":""} ${C?"":"order-1"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hn,{size:18,className:"mr-2"}),"Update Category"]})})]}),Object.keys(w).length>0&&e.jsxs("div",{className:"sr-only",role:"alert",children:["Form has ",Object.keys(w).length," error(s). Please fix them before submitting."]})]})}function W_(){const[t,a]=E.useState(!1),[r,n]=E.useState(!1),[l,d]=E.useState(window.innerWidth<768),{auth:f}=E.useContext(Or),h=hr(),[b,g]=E.useState(!1),[w,k]=E.useState([]),[C,S]=E.useState(null),[D,A]=E.useState(!1),[M,I]=E.useState(!1),[F,T]=E.useState(!1),[B,H]=E.useState(null),[U,L]=E.useState(!1),[P,z]=E.useState(null);E.useEffect(()=>{const ae=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",ae),()=>window.removeEventListener("resize",ae)},[]);const W=async()=>{try{g(!0),S(null);const ae=await Te.get("/categories");ae.data.success&&Array.isArray(ae.data.data)?k(ae.data.data):Array.isArray(ae.data)?k(ae.data):(console.warn("Unexpected response format:",ae.data),k([]))}catch(ae){console.error("Failed to load service categories:",ae),ie.error("Failed to load service categories. Please try again."),ae.response?.status===401?(S("Unauthorized. Please login again."),h("/login")):ae.response?.status===400?S("Company information missing. Please contact support."):S("Failed to load service categories. Please try again.")}finally{g(!1)}};E.useEffect(()=>{W()},[]);const ee=()=>{I(!0)},G=()=>{I(!1)},ne=()=>{W(),I(!1),ie.success("Service category created successfully!")},le=ae=>{H(ae),T(!0)},Y=()=>{T(!1),H(null)},X=()=>{W(),T(!1),H(null),ie.success("Service category updated successfully!")},de=ae=>{z(ae),L(!0)},ye=async()=>{try{if(!P)return;await Te.delete(`/categories/${P.id}`),ie.success("Category deleted successfully"),L(!1),z(null),W()}catch(ae){console.error("Delete category error:",ae),ie.error("Failed to delete category. Please try again.")}},oe=()=>{L(!1),z(null)},xe=()=>e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Tc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(xe,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>n(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>n(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ku,{size:l?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Service Categories"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your service categories"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:ee,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Ca,{size:l?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading service categories..."})]}):C?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:C}),e.jsx("button",{onClick:W,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No service categories found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first service category"}),e.jsx("button",{onClick:ee,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Category"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Categories: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map(ae=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:ae.name}),ae.description&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:ae.description})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),le(ae)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Ea,{size:16})}),e.jsx("button",{onClick:q=>{q.stopPropagation(),de(ae)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Lr,{size:16})})]})]}),ae.color&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:ae.color}}),e.jsxs("span",{children:["Color: ",ae.color]})]})]},ae.id))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Service Categories"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," categories"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(ae=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ae.name}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 dark:text-white max-w-[300px] truncate",children:ae.description||"No description"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:ae.color?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:ae.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:ae.color})]}):e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"No color"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),le(ae)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(Ea,{size:18})}),e.jsx("button",{onClick:q=>{q.stopPropagation(),de(ae)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(Lr,{size:18})})]})})]},ae.id))})]})]})})})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Service Category"}),e.jsx("button",{onClick:G,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(q_,{onClose:G,onCreated:ne})]})})}),F&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Service Category"}),e.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx($_,{onClose:Y,onEdited:X,serviceCategory:B})]})})}),U&&P&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',P.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ye,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var _w=1252,K_=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],cg={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},dg=function(t){K_.indexOf(t)!=-1&&(_w=cg[0]=t)};function Z_(){dg(1252)}var _n=function(t){dg(t)};function Tw(){_n(1200),Z_()}function t2(t){for(var a=[],r=0,n=t.length;r<n;++r)a[r]=t.charCodeAt(r);return a}function Q_(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return a.join("")}function Dw(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return a.join("")}var T0=function(t){var a=t.charCodeAt(0),r=t.charCodeAt(1);return a==255&&r==254?Q_(t.slice(2)):a==254&&r==255?Dw(t.slice(2)):a==65279?t.slice(1):t},Tu=function(a){return String.fromCharCode(a)},r2=function(a){return String.fromCharCode(a)},W0,El="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a2(t){for(var a="",r=0,n=0,l=0,d=0,f=0,h=0,b=0,g=0;g<t.length;)r=t.charCodeAt(g++),d=r>>2,n=t.charCodeAt(g++),f=(r&3)<<4|n>>4,l=t.charCodeAt(g++),h=(n&15)<<2|l>>6,b=l&63,isNaN(n)?h=b=64:isNaN(l)&&(b=64),a+=El.charAt(d)+El.charAt(f)+El.charAt(h)+El.charAt(b);return a}function Js(t){var a="",r=0,n=0,l=0,d=0,f=0,h=0,b=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var g=0;g<t.length;)d=El.indexOf(t.charAt(g++)),f=El.indexOf(t.charAt(g++)),r=d<<2|f>>4,a+=String.fromCharCode(r),h=El.indexOf(t.charAt(g++)),n=(f&15)<<4|h>>2,h!==64&&(a+=String.fromCharCode(n)),b=El.indexOf(t.charAt(g++)),l=(h&3)<<6|b,b!==64&&(a+=String.fromCharCode(l));return a}var fr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),jo=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(a,r){return r?new Buffer(a,r):new Buffer(a)}:Buffer.from.bind(Buffer)}return function(){}}();function Dl(t){return fr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function s2(t){return fr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var An=function(a){return fr?jo(a,"binary"):a.split("").map(function(r){return r.charCodeAt(0)&255})};function Co(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var a=[],r=0;r<t.length;++r)a[r]=String.fromCharCode(t[r]);return a.join("")}function ug(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ug(new Uint8Array(t));for(var a=new Array(t.length),r=0;r<t.length;++r)a[r]=t[r];return a}var Cl=fr?function(t){return Buffer.concat(t.map(function(a){return Buffer.isBuffer(a)?a:jo(a)}))}:function(t){if(typeof Uint8Array<"u"){var a=0,r=0;for(a=0;a<t.length;++a)r+=t[a].length;var n=new Uint8Array(r),l=0;for(a=0,r=0;a<t.length;r+=l,++a)if(l=t[a].length,t[a]instanceof Uint8Array)n.set(t[a],r);else{if(typeof t[a]=="string")throw"wtf";n.set(new Uint8Array(t[a]),r)}return n}return[].concat.apply([],t.map(function(d){return Array.isArray(d)?d:[].slice.call(d)}))};function J_(t){for(var a=[],r=0,n=t.length+250,l=Dl(t.length+255),d=0;d<t.length;++d){var f=t.charCodeAt(d);if(f<128)l[r++]=f;else if(f<2048)l[r++]=192|f>>6&31,l[r++]=128|f&63;else if(f>=55296&&f<57344){f=(f&1023)+64;var h=t.charCodeAt(++d)&1023;l[r++]=240|f>>8&7,l[r++]=128|f>>2&63,l[r++]=128|h>>6&15|(f&3)<<4,l[r++]=128|h&63}else l[r++]=224|f>>12&15,l[r++]=128|f>>6&63,l[r++]=128|f&63;r>n&&(a.push(l.slice(0,r)),r=0,l=Dl(65535),n=65530)}return a.push(l.slice(0,r)),Cl(a)}var ks=/\u0000/g,D0=/[\u0001-\u0006]/g;function yc(t){for(var a="",r=t.length-1;r>=0;)a+=t.charAt(r--);return a}function Tn(t,a){var r=""+t;return r.length>=a?r:na("0",a-r.length)+r}function fg(t,a){var r=""+t;return r.length>=a?r:na(" ",a-r.length)+r}function rf(t,a){var r=""+t;return r.length>=a?r:r+na(" ",a-r.length)}function e8(t,a){var r=""+Math.round(t);return r.length>=a?r:na("0",a-r.length)+r}function t8(t,a){var r=""+t;return r.length>=a?r:na("0",a-r.length)+r}var n2=Math.pow(2,32);function hc(t,a){if(t>n2||t<-n2)return e8(t,a);var r=Math.round(t);return t8(r,a)}function af(t,a){return a=a||0,t.length>=7+a&&(t.charCodeAt(a)|32)===103&&(t.charCodeAt(a+1)|32)===101&&(t.charCodeAt(a+2)|32)===110&&(t.charCodeAt(a+3)|32)===101&&(t.charCodeAt(a+4)|32)===114&&(t.charCodeAt(a+5)|32)===97&&(t.charCodeAt(a+6)|32)===108}var i2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],cm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function r8(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},l2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},a8={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function sf(t,a,r){for(var n=t<0?-1:1,l=t*n,d=0,f=1,h=0,b=1,g=0,w=0,k=Math.floor(l);g<a&&(k=Math.floor(l),h=k*f+d,w=k*g+b,!(l-k<5e-8));)l=1/(l-k),d=f,f=h,b=g,g=w;if(w>a&&(g>a?(w=b,h=d):(w=g,h=f)),!r)return[0,n*h,w];var C=Math.floor(n*h/w);return[C,n*h-C*w,w]}function lo(t,a,r){if(t>2958465||t<0)return null;var n=t|0,l=Math.floor(86400*(t-n)),d=0,f=[],h={D:n,T:l,u:86400*(t-n)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),a&&a.date1904&&(n+=1462),h.u>.9999&&(h.u=0,++l==86400&&(h.T=l=0,++n,++h.D)),n===60)f=r?[1317,10,29]:[1900,2,29],d=3;else if(n===0)f=r?[1317,8,29]:[1900,1,0],d=6;else{n>60&&--n;var b=new Date(1900,0,1);b.setDate(b.getDate()+n-1),f=[b.getFullYear(),b.getMonth()+1,b.getDate()],d=b.getDay(),n<60&&(d=(d+6)%7),r&&(d=c8(b,f))}return h.y=f[0],h.m=f[1],h.d=f[2],h.S=l%60,l=Math.floor(l/60),h.M=l%60,l=Math.floor(l/60),h.H=l,h.q=d,h}var Rw=new Date(1899,11,31,0,0,0),s8=Rw.getTime(),n8=new Date(1900,2,1,0,0,0);function Mw(t,a){var r=t.getTime();return a?r-=1461*24*60*60*1e3:t>=n8&&(r+=1440*60*1e3),(r-(s8+(t.getTimezoneOffset()-Rw.getTimezoneOffset())*6e4))/(1440*60*1e3)}function xg(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function i8(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function l8(t){var a=t<0?12:11,r=xg(t.toFixed(12));return r.length<=a||(r=t.toPrecision(10),r.length<=a)?r:t.toExponential(5)}function o8(t){var a=xg(t.toFixed(11));return a.length>(t<0?12:11)||a==="0"||a==="-0"?t.toPrecision(6):a}function K0(t){var a=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return a>=-4&&a<=-1?r=t.toPrecision(10+a):Math.abs(a)<=9?r=l8(t):a===10?r=t.toFixed(10).substr(0,12):r=o8(t),xg(i8(r.toUpperCase()))}function bo(t,a){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):K0(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return mn(14,Mw(t,a&&a.date1904),a)}throw new Error("unsupported value in General format: "+t)}function c8(t,a){a[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function d8(t,a,r,n){var l="",d=0,f=0,h=r.y,b,g=0;switch(t){case 98:h=r.y+543;case 121:switch(a.length){case 1:case 2:b=h%100,g=2;break;default:b=h%1e4,g=4;break}break;case 109:switch(a.length){case 1:case 2:b=r.m,g=a.length;break;case 3:return cm[r.m-1][1];case 5:return cm[r.m-1][0];default:return cm[r.m-1][2]}break;case 100:switch(a.length){case 1:case 2:b=r.d,g=a.length;break;case 3:return i2[r.q][0];default:return i2[r.q][1]}break;case 104:switch(a.length){case 1:case 2:b=1+(r.H+11)%12,g=a.length;break;default:throw"bad hour format: "+a}break;case 72:switch(a.length){case 1:case 2:b=r.H,g=a.length;break;default:throw"bad hour format: "+a}break;case 77:switch(a.length){case 1:case 2:b=r.M,g=a.length;break;default:throw"bad minute format: "+a}break;case 115:if(a!="s"&&a!="ss"&&a!=".0"&&a!=".00"&&a!=".000")throw"bad second format: "+a;return r.u===0&&(a=="s"||a=="ss")?Tn(r.S,a.length):(n>=2?f=n===3?1e3:100:f=n===1?10:1,d=Math.round(f*(r.S+r.u)),d>=60*f&&(d=0),a==="s"?d===0?"0":""+d/f:(l=Tn(d,2+n),a==="ss"?l.substr(0,2):"."+l.substr(2,a.length-1)));case 90:switch(a){case"[h]":case"[hh]":b=r.D*24+r.H;break;case"[m]":case"[mm]":b=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":b=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+a}g=a.length===3?1:2;break;case 101:b=h,g=1;break}var w=g>0?Tn(b,g):"";return w}function Sl(t){var a=3;if(t.length<=a)return t;for(var r=t.length%a,n=t.substr(0,r);r!=t.length;r+=a)n+=(n.length>0?",":"")+t.substr(r,a);return n}var Iw=/%/g;function u8(t,a,r){var n=a.replace(Iw,""),l=a.length-n.length;return Mi(t,n,r*Math.pow(10,2*l))+na("%",l)}function f8(t,a,r){for(var n=a.length-1;a.charCodeAt(n-1)===44;)--n;return Mi(t,a.substr(0,n),r/Math.pow(10,3*(a.length-n)))}function Ow(t,a){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+Ow(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(n+1+(l+d)%l),r.indexOf("e")===-1){var f=Math.floor(Math.log(a)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,l)+"."+r.substr(2+l),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,g,w){return b+g+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Fw=/# (\?+)( ?)\/( ?)(\d+)/;function x8(t,a,r){var n=parseInt(t[4],10),l=Math.round(a*n),d=Math.floor(l/n),f=l-d*n,h=n;return r+(d===0?"":""+d)+" "+(f===0?na(" ",t[1].length+1+t[4].length):fg(f,t[1].length)+t[2]+"/"+t[3]+Tn(h,t[4].length))}function h8(t,a,r){return r+(a===0?"":""+a)+na(" ",t[1].length+2+t[4].length)}var Bw=/^#*0*\.([0#]+)/,Lw=/\).*[0#]/,Pw=/\(###\) ###\\?-####/;function bs(t){for(var a="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:a+=" ";break;case 48:a+="0";break;default:a+=String.fromCharCode(r)}return a}function o2(t,a){var r=Math.pow(10,a);return""+Math.round(t*r)/r}function c2(t,a){var r=t-Math.floor(t),n=Math.pow(10,a);return a<(""+Math.round(r*n)).length?0:Math.round(r*n)}function m8(t,a){return a<(""+Math.round((t-Math.floor(t))*Math.pow(10,a))).length?1:0}function g8(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function fn(t,a,r){if(t.charCodeAt(0)===40&&!a.match(Lw)){var n=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fn("n",n,r):"("+fn("n",n,-r)+")"}if(a.charCodeAt(a.length-1)===44)return f8(t,a,r);if(a.indexOf("%")!==-1)return u8(t,a,r);if(a.indexOf("E")!==-1)return Ow(a,r);if(a.charCodeAt(0)===36)return"$"+fn(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),g=r<0?"-":"";if(a.match(/^00+$/))return g+hc(b,a.length);if(a.match(/^[#?]+$/))return l=hc(r,0),l==="0"&&(l=""),l.length>a.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(Fw))return x8(d,b,g);if(a.match(/^#+0+$/))return g+hc(b,a.length-a.indexOf("0"));if(d=a.match(Bw))return l=o2(r,d[1].length).replace(/^([^\.]+)$/,"$1."+bs(d[1])).replace(/\.$/,"."+bs(d[1])).replace(/\.(\d*)$/,function(D,A){return"."+A+na("0",bs(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return g+o2(b,d[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return g+Sl(hc(b,0));if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fn(t,a,-r):Sl(""+(Math.floor(r)+m8(r,d[1].length)))+"."+Tn(c2(r,d[1].length),d[1].length);if(d=a.match(/^#,#*,#0/))return fn(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=yc(fn(t,a.replace(/[\\-]/g,""),r)),f=0,yc(yc(a.replace(/\\/g,"")).replace(/[0#]/g,function(D){return f<l.length?l.charAt(f++):D==="0"?"0":""}));if(a.match(Pw))return l=fn(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=sf(b,Math.pow(10,f)-1,!1),l=""+g,w=Mi("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=rf(h[2],f),w.length<d[4].length&&(w=bs(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=sf(b,Math.pow(10,f)-1,!0),g+(h[0]||(h[1]?"":"0"))+" "+(h[1]?fg(h[1],f)+d[2]+"/"+d[3]+rf(h[2],f):na(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=hc(r,0),a.length<=l.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0?]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var k=a.indexOf(".")-f,C=a.length-l.length-k;return bs(a.substr(0,k)+l+a.substr(a.length-C))}if(d=a.match(/^00,000\.([#0]*0)$/))return f=c2(r,d[1].length),r<0?"-"+fn(t,a,-r):Sl(g8(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(D){return"00,"+(D.length<3?Tn(0,3-D.length):"")+D})+"."+Tn(f,d[1].length);switch(a){case"###,##0.00":return fn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var S=Sl(hc(b,0));return S!=="0"?g+S:"";case"###,###.00":return fn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+a+"|")}function p8(t,a,r){for(var n=a.length-1;a.charCodeAt(n-1)===44;)--n;return Mi(t,a.substr(0,n),r/Math.pow(10,3*(a.length-n)))}function y8(t,a,r){var n=a.replace(Iw,""),l=a.length-n.length;return Mi(t,n,r*Math.pow(10,2*l))+na("%",l)}function zw(t,a){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+zw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(n+1+(l+d)%l),!r.match(/[Ee]/)){var f=Math.floor(Math.log(a)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,g,w){return b+g+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ai(t,a,r){if(t.charCodeAt(0)===40&&!a.match(Lw)){var n=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ai("n",n,r):"("+ai("n",n,-r)+")"}if(a.charCodeAt(a.length-1)===44)return p8(t,a,r);if(a.indexOf("%")!==-1)return y8(t,a,r);if(a.indexOf("E")!==-1)return zw(a,r);if(a.charCodeAt(0)===36)return"$"+ai(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),g=r<0?"-":"";if(a.match(/^00+$/))return g+Tn(b,a.length);if(a.match(/^[#?]+$/))return l=""+r,r===0&&(l=""),l.length>a.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(Fw))return h8(d,b,g);if(a.match(/^#+0+$/))return g+Tn(b,a.length-a.indexOf("0"));if(d=a.match(Bw))return l=(""+r).replace(/^([^\.]+)$/,"$1."+bs(d[1])).replace(/\.$/,"."+bs(d[1])),l=l.replace(/\.(\d*)$/,function(D,A){return"."+A+na("0",bs(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return g+(""+b).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return g+Sl(""+b);if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ai(t,a,-r):Sl(""+r)+"."+na("0",d[1].length);if(d=a.match(/^#,#*,#0/))return ai(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=yc(ai(t,a.replace(/[\\-]/g,""),r)),f=0,yc(yc(a.replace(/\\/g,"")).replace(/[0#]/g,function(D){return f<l.length?l.charAt(f++):D==="0"?"0":""}));if(a.match(Pw))return l=ai(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=sf(b,Math.pow(10,f)-1,!1),l=""+g,w=Mi("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=rf(h[2],f),w.length<d[4].length&&(w=bs(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=sf(b,Math.pow(10,f)-1,!0),g+(h[0]||(h[1]?"":"0"))+" "+(h[1]?fg(h[1],f)+d[2]+"/"+d[3]+rf(h[2],f):na(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=""+r,a.length<=l.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var k=a.indexOf(".")-f,C=a.length-l.length-k;return bs(a.substr(0,k)+l+a.substr(a.length-C))}if(d=a.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ai(t,a,-r):Sl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(D){return"00,"+(D.length<3?Tn(0,3-D.length):"")+D})+"."+Tn(0,d[1].length);switch(a){case"###,###":case"##,###":case"#,###":var S=Sl(""+b);return S!=="0"?g+S:"";default:if(a.match(/\.[0#?]*$/))return ai(t,a.slice(0,a.lastIndexOf(".")),r)+bs(a.slice(a.lastIndexOf(".")))}throw new Error("unsupported format |"+a+"|")}function Mi(t,a,r){return(r|0)===r?ai(t,a,r):fn(t,a,r)}function b8(t){for(var a=[],r=!1,n=0,l=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:a[a.length]=t.substr(l,n-l),l=n+1}if(a[a.length]=t.substr(l),r===!0)throw new Error("Format |"+t+"| unterminated string ");return a}var Uw=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Rc(t){for(var a=0,r="",n="";a<t.length;)switch(r=t.charAt(a)){case"G":af(t,a)&&(a+=6),a++;break;case'"':for(;t.charCodeAt(++a)!==34&&a<t.length;);++a;break;case"\\":a+=2;break;case"_":a+=2;break;case"@":++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(a,3).toUpperCase()==="A/P"||t.substr(a,5).toUpperCase()==="AM/PM"||t.substr(a,5).toUpperCase()==="/")return!0;++a;break;case"[":for(n=r;t.charAt(a++)!=="]"&&a<t.length;)n+=t.charAt(a);if(n.match(Uw))return!0;break;case".":case"0":case"#":for(;a<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++a))>-1||r=="\\"&&t.charAt(a+1)=="-"&&"0#".indexOf(t.charAt(a+2))>-1););break;case"?":for(;t.charAt(++a)===r;);break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;);break;case" ":++a;break;default:++a;break}return!1}function v8(t,a,r,n){for(var l=[],d="",f=0,h="",b="t",g,w,k,C="H";f<t.length;)switch(h=t.charAt(f)){case"G":if(!af(t,f))throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"G",v:"General"},f+=7;break;case'"':for(d="";(k=t.charCodeAt(++f))!==34&&f<t.length;)d+=String.fromCharCode(k);l[l.length]={t:"t",v:d},++f;break;case"\\":var S=t.charAt(++f),D=S==="("||S===")"?S:"t";l[l.length]={t:D,v:S},++f;break;case"_":l[l.length]={t:"t",v:" "},f+=2;break;case"@":l[l.length]={t:"T",v:a},++f;break;case"B":case"b":if(t.charAt(f+1)==="1"||t.charAt(f+1)==="2"){if(g==null&&(g=lo(a,r,t.charAt(f+1)==="2"),g==null))return"";l[l.length]={t:"X",v:t.substr(f,2)},b=h,f+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(a<0||g==null&&(g=lo(a,r),g==null))return"";for(d=h;++f<t.length&&t.charAt(f).toLowerCase()===h;)d+=h;h==="m"&&b.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=C),l[l.length]={t:h,v:d},b=h;break;case"A":case"a":case"":var A={t:h,v:h};if(g==null&&(g=lo(a,r)),t.substr(f,3).toUpperCase()==="A/P"?(g!=null&&(A.v=g.H>=12?"P":"A"),A.t="T",C="h",f+=3):t.substr(f,5).toUpperCase()==="AM/PM"?(g!=null&&(A.v=g.H>=12?"PM":"AM"),A.t="T",f+=5,C="h"):t.substr(f,5).toUpperCase()==="/"?(g!=null&&(A.v=g.H>=12?"":""),A.t="T",f+=5,C="h"):(A.t="t",++f),g==null&&A.t==="T")return"";l[l.length]=A,b=h;break;case"[":for(d=h;t.charAt(f++)!=="]"&&f<t.length;)d+=t.charAt(f);if(d.slice(-1)!=="]")throw'unterminated "[" block: |'+d+"|";if(d.match(Uw)){if(g==null&&(g=lo(a,r),g==null))return"";l[l.length]={t:"Z",v:d.toLowerCase()},b=d.charAt(1)}else d.indexOf("$")>-1&&(d=(d.match(/\$([^-\[\]]*)/)||[])[1]||"$",Rc(t)||(l[l.length]={t:"t",v:d}));break;case".":if(g!=null){for(d=h;++f<t.length&&(h=t.charAt(f))==="0";)d+=h;l[l.length]={t:"s",v:d};break}case"0":case"#":for(d=h;++f<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(f))>-1;)d+=h;l[l.length]={t:"n",v:d};break;case"?":for(d=h;t.charAt(++f)===h;)d+=h;l[l.length]={t:h,v:d},b=h;break;case"*":++f,(t.charAt(f)==" "||t.charAt(f)=="*")&&++f;break;case"(":case")":l[l.length]={t:n===1?"t":h,v:h},++f;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(d=h;f<t.length&&"0123456789".indexOf(t.charAt(++f))>-1;)d+=t.charAt(f);l[l.length]={t:"D",v:d};break;case" ":l[l.length]={t:h,v:h},++f;break;case"$":l[l.length]={t:"t",v:"$"},++f;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"t",v:h},++f;break}var M=0,I=0,F;for(f=l.length-1,b="t";f>=0;--f)switch(l[f].t){case"h":case"H":l[f].t=C,b="h",M<1&&(M=1);break;case"s":(F=l[f].v.match(/\.0+$/))&&(I=Math.max(I,F[0].length-1)),M<3&&(M=3);case"d":case"y":case"M":case"e":b=l[f].t;break;case"m":b==="s"&&(l[f].t="M",M<2&&(M=2));break;case"X":break;case"Z":M<1&&l[f].v.match(/[Hh]/)&&(M=1),M<2&&l[f].v.match(/[Mm]/)&&(M=2),M<3&&l[f].v.match(/[Ss]/)&&(M=3)}switch(M){case 0:break;case 1:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M),g.M>=60&&(g.M=0,++g.H);break;case 2:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M);break}var T="",B;for(f=0;f<l.length;++f)switch(l[f].t){case"t":case"T":case" ":case"D":break;case"X":l[f].v="",l[f].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[f].v=d8(l[f].t.charCodeAt(0),l[f].v,g,I),l[f].t="t";break;case"n":case"?":for(B=f+1;l[B]!=null&&((h=l[B].t)==="?"||h==="D"||(h===" "||h==="t")&&l[B+1]!=null&&(l[B+1].t==="?"||l[B+1].t==="t"&&l[B+1].v==="/")||l[f].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(l[B].v==="/"||l[B].v===" "&&l[B+1]!=null&&l[B+1].t=="?"));)l[f].v+=l[B].v,l[B]={v:"",t:";"},++B;T+=l[f].v,f=B-1;break;case"G":l[f].t="t",l[f].v=bo(a,r);break}var H="",U,L;if(T.length>0){T.charCodeAt(0)==40?(U=a<0&&T.charCodeAt(0)===45?-a:a,L=Mi("n",T,U)):(U=a<0&&n>1?-a:a,L=Mi("n",T,U),U<0&&l[0]&&l[0].t=="t"&&(L=L.substr(1),l[0].v="-"+l[0].v)),B=L.length-1;var P=l.length;for(f=0;f<l.length;++f)if(l[f]!=null&&l[f].t!="t"&&l[f].v.indexOf(".")>-1){P=f;break}var z=l.length;if(P===l.length&&L.indexOf("E")===-1){for(f=l.length-1;f>=0;--f)l[f]==null||"n?".indexOf(l[f].t)===-1||(B>=l[f].v.length-1?(B-=l[f].v.length,l[f].v=L.substr(B+1,l[f].v.length)):B<0?l[f].v="":(l[f].v=L.substr(0,B+1),B=-1),l[f].t="t",z=f);B>=0&&z<l.length&&(l[z].v=L.substr(0,B+1)+l[z].v)}else if(P!==l.length&&L.indexOf("E")===-1){for(B=L.indexOf(".")-1,f=P;f>=0;--f)if(!(l[f]==null||"n?".indexOf(l[f].t)===-1)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")-1:l[f].v.length-1,H=l[f].v.substr(w+1);w>=0;--w)B>=0&&(l[f].v.charAt(w)==="0"||l[f].v.charAt(w)==="#")&&(H=L.charAt(B--)+H);l[f].v=H,l[f].t="t",z=f}for(B>=0&&z<l.length&&(l[z].v=L.substr(0,B+1)+l[z].v),B=L.indexOf(".")+1,f=P;f<l.length;++f)if(!(l[f]==null||"n?(".indexOf(l[f].t)===-1&&f!==P)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")+1:0,H=l[f].v.substr(0,w);w<l[f].v.length;++w)B<L.length&&(H+=L.charAt(B++));l[f].v=H,l[f].t="t",z=f}}}for(f=0;f<l.length;++f)l[f]!=null&&"n?".indexOf(l[f].t)>-1&&(U=n>1&&a<0&&f>0&&l[f-1].v==="-"?-a:a,l[f].v=Mi(l[f].t,l[f].v,U),l[f].t="t");var W="";for(f=0;f!==l.length;++f)l[f]!=null&&(W+=l[f].v);return W}var d2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function u2(t,a){if(a==null)return!1;var r=parseFloat(a[2]);switch(a[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function w8(t,a){var r=b8(t),n=r.length,l=r[n-1].indexOf("@");if(n<4&&l>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof a!="number")return[4,r.length===4||l>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=l>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=l>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=l>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var d=a>0?r[0]:a<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,d];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var f=r[0].match(d2),h=r[1].match(d2);return u2(a,f)?[n,r[0]]:u2(a,h)?[n,r[1]]:[n,r[f!=null&&h!=null?2:1]]}return[n,d]}function mn(t,a,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:tr)[t],n==null&&(n=r.table&&r.table[l2[t]]||tr[l2[t]]),n==null&&(n=a8[t]||"General");break}if(af(n,0))return bo(a,r);a instanceof Date&&(a=Mw(a,r.date1904));var l=w8(n,a);if(af(l[1]))return bo(a,r);if(a===!0)a="TRUE";else if(a===!1)a="FALSE";else if(a===""||a==null)return"";return v8(l[1],a,r,l[0])}function uo(t,a){if(typeof a!="number"){a=+a||-1;for(var r=0;r<392;++r){if(tr[r]==null){a<0&&(a=r);continue}if(tr[r]==t){a=r;break}}a<0&&(a=391)}return tr[a]=t,a}function Hw(){tr=r8()}var N8={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Vw=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function k8(t){var a=typeof t=="number"?tr[t]:t;return a=a.replace(Vw,"(\\d+)"),new RegExp("^"+a+"$")}function j8(t,a,r){var n=-1,l=-1,d=-1,f=-1,h=-1,b=-1;(a.match(Vw)||[]).forEach(function(k,C){var S=parseInt(r[C+1],10);switch(k.toLowerCase().charAt(0)){case"y":n=S;break;case"d":d=S;break;case"h":f=S;break;case"s":b=S;break;case"m":f>=0?h=S:l=S;break}}),b>=0&&h==-1&&l>=0&&(h=l,l=-1);var g=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(d>=1?d:1)).slice(-2);g.length==7&&(g="0"+g),g.length==8&&(g="20"+g);var w=("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(b>=0?b:0)).slice(-2);return f==-1&&h==-1&&b==-1?g:n==-1&&l==-1&&d==-1?w:g+"T"+w}var C8=function(){var t={};t.version="1.2.0";function a(){for(var L=0,P=new Array(256),z=0;z!=256;++z)L=z,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,P[z]=L;return typeof Int32Array<"u"?new Int32Array(P):P}var r=a();function n(L){var P=0,z=0,W=0,ee=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(W=0;W!=256;++W)ee[W]=L[W];for(W=0;W!=256;++W)for(z=L[W],P=256+W;P<4096;P+=256)z=ee[P]=z>>>8^L[z&255];var G=[];for(W=1;W!=16;++W)G[W-1]=typeof Int32Array<"u"?ee.subarray(W*256,W*256+256):ee.slice(W*256,W*256+256);return G}var l=n(r),d=l[0],f=l[1],h=l[2],b=l[3],g=l[4],w=l[5],k=l[6],C=l[7],S=l[8],D=l[9],A=l[10],M=l[11],I=l[12],F=l[13],T=l[14];function B(L,P){for(var z=P^-1,W=0,ee=L.length;W<ee;)z=z>>>8^r[(z^L.charCodeAt(W++))&255];return~z}function H(L,P){for(var z=P^-1,W=L.length-15,ee=0;ee<W;)z=T[L[ee++]^z&255]^F[L[ee++]^z>>8&255]^I[L[ee++]^z>>16&255]^M[L[ee++]^z>>>24]^A[L[ee++]]^D[L[ee++]]^S[L[ee++]]^C[L[ee++]]^k[L[ee++]]^w[L[ee++]]^g[L[ee++]]^b[L[ee++]]^h[L[ee++]]^f[L[ee++]]^d[L[ee++]]^r[L[ee++]];for(W+=15;ee<W;)z=z>>>8^r[(z^L[ee++])&255];return~z}function U(L,P){for(var z=P^-1,W=0,ee=L.length,G=0,ne=0;W<ee;)G=L.charCodeAt(W++),G<128?z=z>>>8^r[(z^G)&255]:G<2048?(z=z>>>8^r[(z^(192|G>>6&31))&255],z=z>>>8^r[(z^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,ne=L.charCodeAt(W++)&1023,z=z>>>8^r[(z^(240|G>>8&7))&255],z=z>>>8^r[(z^(128|G>>2&63))&255],z=z>>>8^r[(z^(128|ne>>6&15|(G&3)<<4))&255],z=z>>>8^r[(z^(128|ne&63))&255]):(z=z>>>8^r[(z^(224|G>>12&15))&255],z=z>>>8^r[(z^(128|G>>6&63))&255],z=z>>>8^r[(z^(128|G&63))&255]);return~z}return t.table=r,t.bstr=B,t.buf=H,t.str=U,t}(),pr=function(){var a={};a.version="1.2.1";function r(ce,me){for(var ge=ce.split("/"),we=me.split("/"),Ne=0,Se=0,Ge=Math.min(ge.length,we.length);Ne<Ge;++Ne){if(Se=ge[Ne].length-we[Ne].length)return Se;if(ge[Ne]!=we[Ne])return ge[Ne]<we[Ne]?-1:1}return ge.length-we.length}function n(ce){if(ce.charAt(ce.length-1)=="/")return ce.slice(0,-1).indexOf("/")===-1?ce:n(ce.slice(0,-1));var me=ce.lastIndexOf("/");return me===-1?ce:ce.slice(0,me+1)}function l(ce){if(ce.charAt(ce.length-1)=="/")return l(ce.slice(0,-1));var me=ce.lastIndexOf("/");return me===-1?ce:ce.slice(me+1)}function d(ce,me){typeof me=="string"&&(me=new Date(me));var ge=me.getHours();ge=ge<<6|me.getMinutes(),ge=ge<<5|me.getSeconds()>>>1,ce.write_shift(2,ge);var we=me.getFullYear()-1980;we=we<<4|me.getMonth()+1,we=we<<5|me.getDate(),ce.write_shift(2,we)}function f(ce){var me=ce.read_shift(2)&65535,ge=ce.read_shift(2)&65535,we=new Date,Ne=ge&31;ge>>>=5;var Se=ge&15;ge>>>=4,we.setMilliseconds(0),we.setFullYear(ge+1980),we.setMonth(Se-1),we.setDate(Ne);var Ge=me&31;me>>>=5;var at=me&63;return me>>>=6,we.setHours(me),we.setMinutes(at),we.setSeconds(Ge<<1),we}function h(ce){$a(ce,0);for(var me={},ge=0;ce.l<=ce.length-4;){var we=ce.read_shift(2),Ne=ce.read_shift(2),Se=ce.l+Ne,Ge={};switch(we){case 21589:ge=ce.read_shift(1),ge&1&&(Ge.mtime=ce.read_shift(4)),Ne>5&&(ge&2&&(Ge.atime=ce.read_shift(4)),ge&4&&(Ge.ctime=ce.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}ce.l=Se,me[we]=Ge}return me}var b;function g(){return b||(b={})}function w(ce,me){if(ce[0]==80&&ce[1]==75)return Bn(ce,me);if((ce[0]|32)==109&&(ce[1]|32)==105)return Vi(ce,me);if(ce.length<512)throw new Error("CFB file size "+ce.length+" < 512");var ge=3,we=512,Ne=0,Se=0,Ge=0,at=0,Be=0,Xe=[],We=ce.slice(0,512);$a(We,0);var ct=k(We);switch(ge=ct[0],ge){case 3:we=512;break;case 4:we=4096;break;case 0:if(ct[1]==0)return Bn(ce,me);default:throw new Error("Major Version: Expected 3 or 4 saw "+ge)}we!==512&&(We=ce.slice(0,we),$a(We,28));var xt=ce.slice(0,we);C(We,ge);var mt=We.read_shift(4,"i");if(ge===3&&mt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mt);We.l+=4,Ge=We.read_shift(4,"i"),We.l+=4,We.chk("00100000","Mini Stream Cutoff Size: "),at=We.read_shift(4,"i"),Ne=We.read_shift(4,"i"),Be=We.read_shift(4,"i"),Se=We.read_shift(4,"i");for(var pt=-1,bt=0;bt<109&&(pt=We.read_shift(4,"i"),!(pt<0));++bt)Xe[bt]=pt;var Pt=S(ce,we);M(Be,Se,Pt,we,Xe);var rt=F(Pt,Ge,Xe,we);rt[Ge].name="!Directory",Ne>0&&at!==ne&&(rt[at].name="!MiniFAT"),rt[Xe[0]].name="!FAT",rt.fat_addrs=Xe,rt.ssz=we;var kr={},zt=[],Qa=[],Ln=[];T(Ge,rt,Pt,zt,Ne,kr,Qa,at),D(Qa,Ln,zt),zt.shift();var Qt={FileIndex:Qa,FullPaths:Ln};return me&&me.raw&&(Qt.raw={header:xt,sectors:Pt}),Qt}function k(ce){if(ce[ce.l]==80&&ce[ce.l+1]==75)return[0,0];ce.chk(le,"Header Signature: "),ce.l+=16;var me=ce.read_shift(2,"u");return[ce.read_shift(2,"u"),me]}function C(ce,me){var ge=9;switch(ce.l+=2,ge=ce.read_shift(2)){case 9:if(me!=3)throw new Error("Sector Shift: Expected 9 saw "+ge);break;case 12:if(me!=4)throw new Error("Sector Shift: Expected 12 saw "+ge);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ge)}ce.chk("0600","Mini Sector Shift: "),ce.chk("000000000000","Reserved: ")}function S(ce,me){for(var ge=Math.ceil(ce.length/me)-1,we=[],Ne=1;Ne<ge;++Ne)we[Ne-1]=ce.slice(Ne*me,(Ne+1)*me);return we[ge-1]=ce.slice(ge*me),we}function D(ce,me,ge){for(var we=0,Ne=0,Se=0,Ge=0,at=0,Be=ge.length,Xe=[],We=[];we<Be;++we)Xe[we]=We[we]=we,me[we]=ge[we];for(;at<We.length;++at)we=We[at],Ne=ce[we].L,Se=ce[we].R,Ge=ce[we].C,Xe[we]===we&&(Ne!==-1&&Xe[Ne]!==Ne&&(Xe[we]=Xe[Ne]),Se!==-1&&Xe[Se]!==Se&&(Xe[we]=Xe[Se])),Ge!==-1&&(Xe[Ge]=we),Ne!==-1&&we!=Xe[we]&&(Xe[Ne]=Xe[we],We.lastIndexOf(Ne)<at&&We.push(Ne)),Se!==-1&&we!=Xe[we]&&(Xe[Se]=Xe[we],We.lastIndexOf(Se)<at&&We.push(Se));for(we=1;we<Be;++we)Xe[we]===we&&(Se!==-1&&Xe[Se]!==Se?Xe[we]=Xe[Se]:Ne!==-1&&Xe[Ne]!==Ne&&(Xe[we]=Xe[Ne]));for(we=1;we<Be;++we)if(ce[we].type!==0){if(at=we,at!=Xe[at])do at=Xe[at],me[we]=me[at]+"/"+me[we];while(at!==0&&Xe[at]!==-1&&at!=Xe[at]);Xe[we]=-1}for(me[0]+="/",we=1;we<Be;++we)ce[we].type!==2&&(me[we]+="/")}function A(ce,me,ge){for(var we=ce.start,Ne=ce.size,Se=[],Ge=we;ge&&Ne>0&&Ge>=0;)Se.push(me.slice(Ge*G,Ge*G+G)),Ne-=G,Ge=so(ge,Ge*4);return Se.length===0?Ia(0):Cl(Se).slice(0,ce.size)}function M(ce,me,ge,we,Ne){var Se=ne;if(ce===ne){if(me!==0)throw new Error("DIFAT chain shorter than expected")}else if(ce!==-1){var Ge=ge[ce],at=(we>>>2)-1;if(!Ge)return;for(var Be=0;Be<at&&(Se=so(Ge,Be*4))!==ne;++Be)Ne.push(Se);M(so(Ge,we-4),me-1,ge,we,Ne)}}function I(ce,me,ge,we,Ne){var Se=[],Ge=[];Ne||(Ne=[]);var at=we-1,Be=0,Xe=0;for(Be=me;Be>=0;){Ne[Be]=!0,Se[Se.length]=Be,Ge.push(ce[Be]);var We=ge[Math.floor(Be*4/we)];if(Xe=Be*4&at,we<4+Xe)throw new Error("FAT boundary crossed: "+Be+" 4 "+we);if(!ce[We])break;Be=so(ce[We],Xe)}return{nodes:Se,data:w2([Ge])}}function F(ce,me,ge,we){var Ne=ce.length,Se=[],Ge=[],at=[],Be=[],Xe=we-1,We=0,ct=0,xt=0,mt=0;for(We=0;We<Ne;++We)if(at=[],xt=We+me,xt>=Ne&&(xt-=Ne),!Ge[xt]){Be=[];var pt=[];for(ct=xt;ct>=0;){pt[ct]=!0,Ge[ct]=!0,at[at.length]=ct,Be.push(ce[ct]);var bt=ge[Math.floor(ct*4/we)];if(mt=ct*4&Xe,we<4+mt)throw new Error("FAT boundary crossed: "+ct+" 4 "+we);if(!ce[bt]||(ct=so(ce[bt],mt),pt[ct]))break}Se[xt]={nodes:at,data:w2([Be])}}return Se}function T(ce,me,ge,we,Ne,Se,Ge,at){for(var Be=0,Xe=we.length?2:0,We=me[ce].data,ct=0,xt=0,mt;ct<We.length;ct+=128){var pt=We.slice(ct,ct+128);$a(pt,64),xt=pt.read_shift(2),mt=yg(pt,0,xt-Xe),we.push(mt);var bt={name:mt,type:pt.read_shift(1),color:pt.read_shift(1),L:pt.read_shift(4,"i"),R:pt.read_shift(4,"i"),C:pt.read_shift(4,"i"),clsid:pt.read_shift(16),state:pt.read_shift(4,"i"),start:0,size:0},Pt=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Pt!==0&&(bt.ct=B(pt,pt.l-8));var rt=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);rt!==0&&(bt.mt=B(pt,pt.l-8)),bt.start=pt.read_shift(4,"i"),bt.size=pt.read_shift(4,"i"),bt.size<0&&bt.start<0&&(bt.size=bt.type=0,bt.start=ne,bt.name=""),bt.type===5?(Be=bt.start,Ne>0&&Be!==ne&&(me[Be].name="!StreamData")):bt.size>=4096?(bt.storage="fat",me[bt.start]===void 0&&(me[bt.start]=I(ge,bt.start,me.fat_addrs,me.ssz)),me[bt.start].name=bt.name,bt.content=me[bt.start].data.slice(0,bt.size)):(bt.storage="minifat",bt.size<0?bt.size=0:Be!==ne&&bt.start!==ne&&me[Be]&&(bt.content=A(bt,me[Be].data,(me[at]||{}).data))),bt.content&&$a(bt.content,0),Se[mt]=bt,Ge.push(bt)}}function B(ce,me){return new Date((qs(ce,me+4)/1e7*Math.pow(2,32)+qs(ce,me)/1e7-11644473600)*1e3)}function H(ce,me){return g(),w(b.readFileSync(ce),me)}function U(ce,me){var ge=me&&me.type;switch(ge||fr&&Buffer.isBuffer(ce)&&(ge="buffer"),ge||"base64"){case"file":return H(ce,me);case"base64":return w(An(Js(ce)),me);case"binary":return w(An(ce),me)}return w(ce,me)}function L(ce,me){var ge=me||{},we=ge.root||"Root Entry";if(ce.FullPaths||(ce.FullPaths=[]),ce.FileIndex||(ce.FileIndex=[]),ce.FullPaths.length!==ce.FileIndex.length)throw new Error("inconsistent CFB structure");ce.FullPaths.length===0&&(ce.FullPaths[0]=we+"/",ce.FileIndex[0]={name:we,type:5}),ge.CLSID&&(ce.FileIndex[0].clsid=ge.CLSID),P(ce)}function P(ce){var me="Sh33tJ5";if(!pr.find(ce,"/"+me)){var ge=Ia(4);ge[0]=55,ge[1]=ge[3]=50,ge[2]=54,ce.FileIndex.push({name:me,type:2,content:ge,size:4,L:69,R:69,C:69}),ce.FullPaths.push(ce.FullPaths[0]+me),z(ce)}}function z(ce,me){L(ce);for(var ge=!1,we=!1,Ne=ce.FullPaths.length-1;Ne>=0;--Ne){var Se=ce.FileIndex[Ne];switch(Se.type){case 0:we?ge=!0:(ce.FileIndex.pop(),ce.FullPaths.pop());break;case 1:case 2:case 5:we=!0,isNaN(Se.R*Se.L*Se.C)&&(ge=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(ge=!0);break;default:ge=!0;break}}if(!(!ge&&!me)){var Ge=new Date(1987,1,19),at=0,Be=Object.create?Object.create(null):{},Xe=[];for(Ne=0;Ne<ce.FullPaths.length;++Ne)Be[ce.FullPaths[Ne]]=!0,ce.FileIndex[Ne].type!==0&&Xe.push([ce.FullPaths[Ne],ce.FileIndex[Ne]]);for(Ne=0;Ne<Xe.length;++Ne){var We=n(Xe[Ne][0]);we=Be[We],we||(Xe.push([We,{name:l(We).replace("/",""),type:1,clsid:X,ct:Ge,mt:Ge,content:null}]),Be[We]=!0)}for(Xe.sort(function(mt,pt){return r(mt[0],pt[0])}),ce.FullPaths=[],ce.FileIndex=[],Ne=0;Ne<Xe.length;++Ne)ce.FullPaths[Ne]=Xe[Ne][0],ce.FileIndex[Ne]=Xe[Ne][1];for(Ne=0;Ne<Xe.length;++Ne){var ct=ce.FileIndex[Ne],xt=ce.FullPaths[Ne];if(ct.name=l(xt).replace("/",""),ct.L=ct.R=ct.C=-(ct.color=1),ct.size=ct.content?ct.content.length:0,ct.start=0,ct.clsid=ct.clsid||X,Ne===0)ct.C=Xe.length>1?1:-1,ct.size=0,ct.type=5;else if(xt.slice(-1)=="/"){for(at=Ne+1;at<Xe.length&&n(ce.FullPaths[at])!=xt;++at);for(ct.C=at>=Xe.length?-1:at,at=Ne+1;at<Xe.length&&n(ce.FullPaths[at])!=n(xt);++at);ct.R=at>=Xe.length?-1:at,ct.type=1}else n(ce.FullPaths[Ne+1]||"")==n(xt)&&(ct.R=Ne+1),ct.type=2}}}function W(ce,me){var ge=me||{};if(ge.fileType=="mad")return oa(ce,ge);switch(z(ce),ge.fileType){case"zip":return Jr(ce,ge)}var we=function(mt){for(var pt=0,bt=0,Pt=0;Pt<mt.FileIndex.length;++Pt){var rt=mt.FileIndex[Pt];if(rt.content){var kr=rt.content.length;kr>0&&(kr<4096?pt+=kr+63>>6:bt+=kr+511>>9)}}for(var zt=mt.FullPaths.length+3>>2,Qa=pt+7>>3,Ln=pt+127>>7,Qt=Qa+bt+zt+Ln,Jt=Qt+127>>7,er=Jt<=109?0:Math.ceil((Jt-109)/127);Qt+Jt+er+127>>7>Jt;)er=++Jt<=109?0:Math.ceil((Jt-109)/127);var ms=[1,er,Jt,Ln,zt,bt,pt,0];return mt.FileIndex[0].size=pt<<6,ms[7]=(mt.FileIndex[0].start=ms[0]+ms[1]+ms[2]+ms[3]+ms[4]+ms[5])+(ms[6]+7>>3),ms}(ce),Ne=Ia(we[7]<<9),Se=0,Ge=0;{for(Se=0;Se<8;++Se)Ne.write_shift(1,Y[Se]);for(Se=0;Se<8;++Se)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Se=0;Se<3;++Se)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,we[2]),Ne.write_shift(4,we[0]+we[1]+we[2]+we[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,we[3]?we[0]+we[1]+we[2]-1:ne),Ne.write_shift(4,we[3]),Ne.write_shift(-4,we[1]?we[0]-1:ne),Ne.write_shift(4,we[1]),Se=0;Se<109;++Se)Ne.write_shift(-4,Se<we[2]?we[1]+Se:-1)}if(we[1])for(Ge=0;Ge<we[1];++Ge){for(;Se<236+Ge*127;++Se)Ne.write_shift(-4,Se<we[2]?we[1]+Se:-1);Ne.write_shift(-4,Ge===we[1]-1?ne:Ge+1)}var at=function(mt){for(Ge+=mt;Se<Ge-1;++Se)Ne.write_shift(-4,Se+1);mt&&(++Se,Ne.write_shift(-4,ne))};for(Ge=Se=0,Ge+=we[1];Se<Ge;++Se)Ne.write_shift(-4,de.DIFSECT);for(Ge+=we[2];Se<Ge;++Se)Ne.write_shift(-4,de.FATSECT);at(we[3]),at(we[4]);for(var Be=0,Xe=0,We=ce.FileIndex[0];Be<ce.FileIndex.length;++Be)We=ce.FileIndex[Be],We.content&&(Xe=We.content.length,!(Xe<4096)&&(We.start=Ge,at(Xe+511>>9)));for(at(we[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,de.ENDOFCHAIN);for(Ge=Se=0,Be=0;Be<ce.FileIndex.length;++Be)We=ce.FileIndex[Be],We.content&&(Xe=We.content.length,!(!Xe||Xe>=4096)&&(We.start=Ge,at(Xe+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,de.ENDOFCHAIN);for(Se=0;Se<we[4]<<2;++Se){var ct=ce.FullPaths[Se];if(!ct||ct.length===0){for(Be=0;Be<17;++Be)Ne.write_shift(4,0);for(Be=0;Be<3;++Be)Ne.write_shift(4,-1);for(Be=0;Be<12;++Be)Ne.write_shift(4,0);continue}We=ce.FileIndex[Se],Se===0&&(We.start=We.size?We.start-1:ne);var xt=Se===0&&ge.root||We.name;if(Xe=2*(xt.length+1),Ne.write_shift(64,xt,"utf16le"),Ne.write_shift(2,Xe),Ne.write_shift(1,We.type),Ne.write_shift(1,We.color),Ne.write_shift(-4,We.L),Ne.write_shift(-4,We.R),Ne.write_shift(-4,We.C),We.clsid)Ne.write_shift(16,We.clsid,"hex");else for(Be=0;Be<4;++Be)Ne.write_shift(4,0);Ne.write_shift(4,We.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,We.start),Ne.write_shift(4,We.size),Ne.write_shift(4,0)}for(Se=1;Se<ce.FileIndex.length;++Se)if(We=ce.FileIndex[Se],We.size>=4096)if(Ne.l=We.start+1<<9,fr&&Buffer.isBuffer(We.content))We.content.copy(Ne,Ne.l,0,We.size),Ne.l+=We.size+511&-512;else{for(Be=0;Be<We.size;++Be)Ne.write_shift(1,We.content[Be]);for(;Be&511;++Be)Ne.write_shift(1,0)}for(Se=1;Se<ce.FileIndex.length;++Se)if(We=ce.FileIndex[Se],We.size>0&&We.size<4096)if(fr&&Buffer.isBuffer(We.content))We.content.copy(Ne,Ne.l,0,We.size),Ne.l+=We.size+63&-64;else{for(Be=0;Be<We.size;++Be)Ne.write_shift(1,We.content[Be]);for(;Be&63;++Be)Ne.write_shift(1,0)}if(fr)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function ee(ce,me){var ge=ce.FullPaths.map(function(Be){return Be.toUpperCase()}),we=ge.map(function(Be){var Xe=Be.split("/");return Xe[Xe.length-(Be.slice(-1)=="/"?2:1)]}),Ne=!1;me.charCodeAt(0)===47?(Ne=!0,me=ge[0].slice(0,-1)+me):Ne=me.indexOf("/")!==-1;var Se=me.toUpperCase(),Ge=Ne===!0?ge.indexOf(Se):we.indexOf(Se);if(Ge!==-1)return ce.FileIndex[Ge];var at=!Se.match(D0);for(Se=Se.replace(ks,""),at&&(Se=Se.replace(D0,"!")),Ge=0;Ge<ge.length;++Ge)if((at?ge[Ge].replace(D0,"!"):ge[Ge]).replace(ks,"")==Se||(at?we[Ge].replace(D0,"!"):we[Ge]).replace(ks,"")==Se)return ce.FileIndex[Ge];return null}var G=64,ne=-2,le="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],X="00000000000000000000000000000000",de={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ne,FREESECT:-1,HEADER_SIGNATURE:le,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:X,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ye(ce,me,ge){g();var we=W(ce,ge);b.writeFileSync(me,we)}function oe(ce){for(var me=new Array(ce.length),ge=0;ge<ce.length;++ge)me[ge]=String.fromCharCode(ce[ge]);return me.join("")}function xe(ce,me){var ge=W(ce,me);switch(me&&me.type||"buffer"){case"file":return g(),b.writeFileSync(me.filename,ge),ge;case"binary":return typeof ge=="string"?ge:oe(ge);case"base64":return a2(typeof ge=="string"?ge:oe(ge));case"buffer":if(fr)return Buffer.isBuffer(ge)?ge:jo(ge);case"array":return typeof ge=="string"?An(ge):ge}return ge}var ae;function q(ce){try{var me=ce.InflateRaw,ge=new me;if(ge._processChunk(new Uint8Array([3,0]),ge._finishFlushFlag),ge.bytesRead)ae=ce;else throw new Error("zlib does not expose bytesRead")}catch(we){console.error("cannot use native zlib: "+(we.message||we))}}function K(ce,me){if(!ae)return kt(ce,me);var ge=ae.InflateRaw,we=new ge,Ne=we._processChunk(ce.slice(ce.l),we._finishFlushFlag);return ce.l+=we.bytesRead,Ne}function se(ce){return ae?ae.deflateRawSync(ce):It(ce)}var re=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],te=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ke(ce){var me=(ce<<1|ce<<11)&139536|(ce<<5|ce<<15)&558144;return(me>>16|me>>8|me)&255}for(var Ve=typeof Uint8Array<"u",Oe=Ve?new Uint8Array(256):[],et=0;et<256;++et)Oe[et]=ke(et);function be(ce,me){var ge=Oe[ce&255];return me<=8?ge>>>8-me:(ge=ge<<8|Oe[ce>>8&255],me<=16?ge>>>16-me:(ge=ge<<8|Oe[ce>>16&255],ge>>>24-me))}function Ae(ce,me){var ge=me&7,we=me>>>3;return(ce[we]|(ge<=6?0:ce[we+1]<<8))>>>ge&3}function Fe(ce,me){var ge=me&7,we=me>>>3;return(ce[we]|(ge<=5?0:ce[we+1]<<8))>>>ge&7}function Ce(ce,me){var ge=me&7,we=me>>>3;return(ce[we]|(ge<=4?0:ce[we+1]<<8))>>>ge&15}function Je(ce,me){var ge=me&7,we=me>>>3;return(ce[we]|(ge<=3?0:ce[we+1]<<8))>>>ge&31}function ve(ce,me){var ge=me&7,we=me>>>3;return(ce[we]|(ge<=1?0:ce[we+1]<<8))>>>ge&127}function Le(ce,me,ge){var we=me&7,Ne=me>>>3,Se=(1<<ge)-1,Ge=ce[Ne]>>>we;return ge<8-we||(Ge|=ce[Ne+1]<<8-we,ge<16-we)||(Ge|=ce[Ne+2]<<16-we,ge<24-we)||(Ge|=ce[Ne+3]<<24-we),Ge&Se}function fe(ce,me,ge){var we=me&7,Ne=me>>>3;return we<=5?ce[Ne]|=(ge&7)<<we:(ce[Ne]|=ge<<we&255,ce[Ne+1]=(ge&7)>>8-we),me+3}function st(ce,me,ge){var we=me&7,Ne=me>>>3;return ge=(ge&1)<<we,ce[Ne]|=ge,me+1}function Ee(ce,me,ge){var we=me&7,Ne=me>>>3;return ge<<=we,ce[Ne]|=ge&255,ge>>>=8,ce[Ne+1]=ge,me+8}function wt(ce,me,ge){var we=me&7,Ne=me>>>3;return ge<<=we,ce[Ne]|=ge&255,ge>>>=8,ce[Ne+1]=ge&255,ce[Ne+2]=ge>>>8,me+16}function ut(ce,me){var ge=ce.length,we=2*ge>me?2*ge:me+5,Ne=0;if(ge>=me)return ce;if(fr){var Se=s2(we);if(ce.copy)ce.copy(Se);else for(;Ne<ce.length;++Ne)Se[Ne]=ce[Ne];return Se}else if(Ve){var Ge=new Uint8Array(we);if(Ge.set)Ge.set(ce);else for(;Ne<ge;++Ne)Ge[Ne]=ce[Ne];return Ge}return ce.length=we,ce}function Et(ce){for(var me=new Array(ce),ge=0;ge<ce;++ge)me[ge]=0;return me}function Mt(ce,me,ge){var we=1,Ne=0,Se=0,Ge=0,at=0,Be=ce.length,Xe=Ve?new Uint16Array(32):Et(32);for(Se=0;Se<32;++Se)Xe[Se]=0;for(Se=Be;Se<ge;++Se)ce[Se]=0;Be=ce.length;var We=Ve?new Uint16Array(Be):Et(Be);for(Se=0;Se<Be;++Se)Xe[Ne=ce[Se]]++,we<Ne&&(we=Ne),We[Se]=0;for(Xe[0]=0,Se=1;Se<=we;++Se)Xe[Se+16]=at=at+Xe[Se-1]<<1;for(Se=0;Se<Be;++Se)at=ce[Se],at!=0&&(We[Se]=Xe[at+16]++);var ct=0;for(Se=0;Se<Be;++Se)if(ct=ce[Se],ct!=0)for(at=be(We[Se],we)>>we-ct,Ge=(1<<we+4-ct)-1;Ge>=0;--Ge)me[at|Ge<<ct]=ct&15|Se<<4;return we}var qt=Ve?new Uint16Array(512):Et(512),ur=Ve?new Uint16Array(32):Et(32);if(!Ve){for(var Ut=0;Ut<512;++Ut)qt[Ut]=0;for(Ut=0;Ut<32;++Ut)ur[Ut]=0}(function(){for(var ce=[],me=0;me<32;me++)ce.push(5);Mt(ce,ur,32);var ge=[];for(me=0;me<=143;me++)ge.push(8);for(;me<=255;me++)ge.push(9);for(;me<=279;me++)ge.push(7);for(;me<=287;me++)ge.push(8);Mt(ge,qt,288)})();var Yt=function(){for(var me=Ve?new Uint8Array(32768):[],ge=0,we=0;ge<Re.length-1;++ge)for(;we<Re[ge+1];++we)me[we]=ge;for(;we<32768;++we)me[we]=29;var Ne=Ve?new Uint8Array(259):[];for(ge=0,we=0;ge<te.length-1;++ge)for(;we<te[ge+1];++we)Ne[we]=ge;function Se(at,Be){for(var Xe=0;Xe<at.length;){var We=Math.min(65535,at.length-Xe),ct=Xe+We==at.length;for(Be.write_shift(1,+ct),Be.write_shift(2,We),Be.write_shift(2,~We&65535);We-- >0;)Be[Be.l++]=at[Xe++]}return Be.l}function Ge(at,Be){for(var Xe=0,We=0,ct=Ve?new Uint16Array(32768):[];We<at.length;){var xt=Math.min(65535,at.length-We);if(xt<10){for(Xe=fe(Be,Xe,+(We+xt==at.length)),Xe&7&&(Xe+=8-(Xe&7)),Be.l=Xe/8|0,Be.write_shift(2,xt),Be.write_shift(2,~xt&65535);xt-- >0;)Be[Be.l++]=at[We++];Xe=Be.l*8;continue}Xe=fe(Be,Xe,+(We+xt==at.length)+2);for(var mt=0;xt-- >0;){var pt=at[We];mt=(mt<<5^pt)&32767;var bt=-1,Pt=0;if((bt=ct[mt])&&(bt|=We&-32768,bt>We&&(bt-=32768),bt<We))for(;at[bt+Pt]==at[We+Pt]&&Pt<250;)++Pt;if(Pt>2){pt=Ne[Pt],pt<=22?Xe=Ee(Be,Xe,Oe[pt+1]>>1)-1:(Ee(Be,Xe,3),Xe+=5,Ee(Be,Xe,Oe[pt-23]>>5),Xe+=3);var rt=pt<8?0:pt-4>>2;rt>0&&(wt(Be,Xe,Pt-te[pt]),Xe+=rt),pt=me[We-bt],Xe=Ee(Be,Xe,Oe[pt]>>3),Xe-=3;var kr=pt<4?0:pt-2>>1;kr>0&&(wt(Be,Xe,We-bt-Re[pt]),Xe+=kr);for(var zt=0;zt<Pt;++zt)ct[mt]=We&32767,mt=(mt<<5^at[We])&32767,++We;xt-=Pt-1}else pt<=143?pt=pt+48:Xe=st(Be,Xe,1),Xe=Ee(Be,Xe,Oe[pt]),ct[mt]=We&32767,++We}Xe=Ee(Be,Xe,0)-1}return Be.l=(Xe+7)/8|0,Be.l}return function(Be,Xe){return Be.length<8?Se(Be,Xe):Ge(Be,Xe)}}();function It(ce){var me=Ia(50+Math.floor(ce.length*1.1)),ge=Yt(ce,me);return me.slice(0,ge)}var $e=Ve?new Uint16Array(32768):Et(32768),jt=Ve?new Uint16Array(32768):Et(32768),Nt=Ve?new Uint16Array(128):Et(128),lt=1,At=1;function vt(ce,me){var ge=Je(ce,me)+257;me+=5;var we=Je(ce,me)+1;me+=5;var Ne=Ce(ce,me)+4;me+=4;for(var Se=0,Ge=Ve?new Uint8Array(19):Et(19),at=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Be=1,Xe=Ve?new Uint8Array(8):Et(8),We=Ve?new Uint8Array(8):Et(8),ct=Ge.length,xt=0;xt<Ne;++xt)Ge[re[xt]]=Se=Fe(ce,me),Be<Se&&(Be=Se),Xe[Se]++,me+=3;var mt=0;for(Xe[0]=0,xt=1;xt<=Be;++xt)We[xt]=mt=mt+Xe[xt-1]<<1;for(xt=0;xt<ct;++xt)(mt=Ge[xt])!=0&&(at[xt]=We[mt]++);var pt=0;for(xt=0;xt<ct;++xt)if(pt=Ge[xt],pt!=0){mt=Oe[at[xt]]>>8-pt;for(var bt=(1<<7-pt)-1;bt>=0;--bt)Nt[mt|bt<<pt]=pt&7|xt<<3}var Pt=[];for(Be=1;Pt.length<ge+we;)switch(mt=Nt[ve(ce,me)],me+=mt&7,mt>>>=3){case 16:for(Se=3+Ae(ce,me),me+=2,mt=Pt[Pt.length-1];Se-- >0;)Pt.push(mt);break;case 17:for(Se=3+Fe(ce,me),me+=3;Se-- >0;)Pt.push(0);break;case 18:for(Se=11+ve(ce,me),me+=7;Se-- >0;)Pt.push(0);break;default:Pt.push(mt),Be<mt&&(Be=mt);break}var rt=Pt.slice(0,ge),kr=Pt.slice(ge);for(xt=ge;xt<286;++xt)rt[xt]=0;for(xt=we;xt<30;++xt)kr[xt]=0;return lt=Mt(rt,$e,286),At=Mt(kr,jt,30),me}function nt(ce,me){if(ce[0]==3&&!(ce[1]&3))return[Dl(me),2];for(var ge=0,we=0,Ne=s2(me||1<<18),Se=0,Ge=Ne.length>>>0,at=0,Be=0;(we&1)==0;){if(we=Fe(ce,ge),ge+=3,we>>>1)we>>1==1?(at=9,Be=5):(ge=vt(ce,ge),at=lt,Be=At);else{ge&7&&(ge+=8-(ge&7));var Xe=ce[ge>>>3]|ce[(ge>>>3)+1]<<8;if(ge+=32,Xe>0)for(!me&&Ge<Se+Xe&&(Ne=ut(Ne,Se+Xe),Ge=Ne.length);Xe-- >0;)Ne[Se++]=ce[ge>>>3],ge+=8;continue}for(;;){!me&&Ge<Se+32767&&(Ne=ut(Ne,Se+32767),Ge=Ne.length);var We=Le(ce,ge,at),ct=we>>>1==1?qt[We]:$e[We];if(ge+=ct&15,ct>>>=4,(ct>>>8&255)===0)Ne[Se++]=ct;else{if(ct==256)break;ct-=257;var xt=ct<8?0:ct-4>>2;xt>5&&(xt=0);var mt=Se+te[ct];xt>0&&(mt+=Le(ce,ge,xt),ge+=xt),We=Le(ce,ge,Be),ct=we>>>1==1?ur[We]:jt[We],ge+=ct&15,ct>>>=4;var pt=ct<4?0:ct-2>>1,bt=Re[ct];for(pt>0&&(bt+=Le(ce,ge,pt),ge+=pt),!me&&Ge<mt&&(Ne=ut(Ne,mt+100),Ge=Ne.length);Se<mt;)Ne[Se]=Ne[Se-bt],++Se}}}return me?[Ne,ge+7>>>3]:[Ne.slice(0,Se),ge+7>>>3]}function kt(ce,me){var ge=ce.slice(ce.l||0),we=nt(ge,me);return ce.l+=we[1],we[0]}function Os(ce,me){if(ce)typeof console<"u"&&console.error(me);else throw new Error(me)}function Bn(ce,me){var ge=ce;$a(ge,0);var we=[],Ne=[],Se={FileIndex:we,FullPaths:Ne};L(Se,{root:me.root});for(var Ge=ge.length-4;(ge[Ge]!=80||ge[Ge+1]!=75||ge[Ge+2]!=5||ge[Ge+3]!=6)&&Ge>=0;)--Ge;ge.l=Ge+4,ge.l+=4;var at=ge.read_shift(2);ge.l+=6;var Be=ge.read_shift(4);for(ge.l=Be,Ge=0;Ge<at;++Ge){ge.l+=20;var Xe=ge.read_shift(4),We=ge.read_shift(4),ct=ge.read_shift(2),xt=ge.read_shift(2),mt=ge.read_shift(2);ge.l+=8;var pt=ge.read_shift(4),bt=h(ge.slice(ge.l+ct,ge.l+ct+xt));ge.l+=ct+xt+mt;var Pt=ge.l;ge.l=pt+4,_t(ge,Xe,We,Se,bt),ge.l=Pt}return Se}function _t(ce,me,ge,we,Ne){ce.l+=2;var Se=ce.read_shift(2),Ge=ce.read_shift(2),at=f(ce);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var Be=ce.read_shift(4),Xe=ce.read_shift(4),We=ce.read_shift(4),ct=ce.read_shift(2),xt=ce.read_shift(2),mt="",pt=0;pt<ct;++pt)mt+=String.fromCharCode(ce[ce.l++]);if(xt){var bt=h(ce.slice(ce.l,ce.l+xt));(bt[21589]||{}).mt&&(at=bt[21589].mt),((Ne||{})[21589]||{}).mt&&(at=Ne[21589].mt)}ce.l+=xt;var Pt=ce.slice(ce.l,ce.l+Xe);switch(Ge){case 8:Pt=K(ce,We);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var rt=!1;Se&8&&(Be=ce.read_shift(4),Be==134695760&&(Be=ce.read_shift(4),rt=!0),Xe=ce.read_shift(4),We=ce.read_shift(4)),Xe!=me&&Os(rt,"Bad compressed size: "+me+" != "+Xe),We!=ge&&Os(rt,"Bad uncompressed size: "+ge+" != "+We),Pr(we,mt,Pt,{unsafe:!0,mt:at})}function Jr(ce,me){var ge=me||{},we=[],Ne=[],Se=Ia(1),Ge=ge.compression?8:0,at=0,Be=0,Xe=0,We=0,ct=0,xt=ce.FullPaths[0],mt=xt,pt=ce.FileIndex[0],bt=[],Pt=0;for(Be=1;Be<ce.FullPaths.length;++Be)if(mt=ce.FullPaths[Be].slice(xt.length),pt=ce.FileIndex[Be],!(!pt.size||!pt.content||mt=="Sh33tJ5")){var rt=We,kr=Ia(mt.length);for(Xe=0;Xe<mt.length;++Xe)kr.write_shift(1,mt.charCodeAt(Xe)&127);kr=kr.slice(0,kr.l),bt[ct]=C8.buf(pt.content,0);var zt=pt.content;Ge==8&&(zt=se(zt)),Se=Ia(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,at),Se.write_shift(2,Ge),pt.mt?d(Se,pt.mt):Se.write_shift(4,0),Se.write_shift(-4,bt[ct]),Se.write_shift(4,zt.length),Se.write_shift(4,pt.content.length),Se.write_shift(2,kr.length),Se.write_shift(2,0),We+=Se.length,we.push(Se),We+=kr.length,we.push(kr),We+=zt.length,we.push(zt),Se=Ia(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,at),Se.write_shift(2,Ge),Se.write_shift(4,0),Se.write_shift(-4,bt[ct]),Se.write_shift(4,zt.length),Se.write_shift(4,pt.content.length),Se.write_shift(2,kr.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,rt),Pt+=Se.l,Ne.push(Se),Pt+=kr.length,Ne.push(kr),++ct}return Se=Ia(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,ct),Se.write_shift(2,ct),Se.write_shift(4,Pt),Se.write_shift(4,We),Se.write_shift(2,0),Cl([Cl(we),Cl(Ne),Se])}var en={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ol(ce,me){if(ce.ctype)return ce.ctype;var ge=ce.name||"",we=ge.match(/\.([^\.]+)$/);return we&&en[we[1]]||me&&(we=(ge=me).match(/[\.\\]([^\.\\])+$/),we&&en[we[1]])?en[we[1]]:"application/octet-stream"}function Za(ce){for(var me=a2(ce),ge=[],we=0;we<me.length;we+=76)ge.push(me.slice(we,we+76));return ge.join(`\r
`)+`\r
`}function ui(ce){var me=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var We=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(We.length==1?"0"+We:We)});me=me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),me.charAt(0)==`
`&&(me="=0D"+me.slice(1)),me=me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ge=[],we=me.split(`\r
`),Ne=0;Ne<we.length;++Ne){var Se=we[Ne];if(Se.length==0){ge.push("");continue}for(var Ge=0;Ge<Se.length;){var at=76,Be=Se.slice(Ge,Ge+at);Be.charAt(at-1)=="="?at--:Be.charAt(at-2)=="="?at-=2:Be.charAt(at-3)=="="&&(at-=3),Be=Se.slice(Ge,Ge+at),Ge+=at,Ge<Se.length&&(Be+="="),ge.push(Be)}}return ge.join(`\r
`)}function ea(ce){for(var me=[],ge=0;ge<ce.length;++ge){for(var we=ce[ge];ge<=ce.length&&we.charAt(we.length-1)=="=";)we=we.slice(0,we.length-1)+ce[++ge];me.push(we)}for(var Ne=0;Ne<me.length;++Ne)me[Ne]=me[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return An(me.join(`\r
`))}function yn(ce,me,ge){for(var we="",Ne="",Se="",Ge,at=0;at<10;++at){var Be=me[at];if(!Be||Be.match(/^\s*$/))break;var Xe=Be.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":we=Xe[2].trim();break;case"content-type":Se=Xe[2].trim();break;case"content-transfer-encoding":Ne=Xe[2].trim();break}}switch(++at,Ne.toLowerCase()){case"base64":Ge=An(Js(me.slice(at).join("")));break;case"quoted-printable":Ge=ea(me.slice(at));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var We=Pr(ce,we.slice(ge.length),Ge,{unsafe:!0});Se&&(We.ctype=Se)}function Vi(ce,me){if(oe(ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ge=me&&me.root||"",we=(fr&&Buffer.isBuffer(ce)?ce.toString("binary"):oe(ce)).split(`\r
`),Ne=0,Se="";for(Ne=0;Ne<we.length;++Ne)if(Se=we[Ne],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),ge||(ge=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,ge.length)!=ge))for(;ge.length>0&&(ge=ge.slice(0,ge.length-1),ge=ge.slice(0,ge.lastIndexOf("/")+1),Se.slice(0,ge.length)!=ge););var Ge=(we[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var at="--"+(Ge[1]||""),Be=[],Xe=[],We={FileIndex:Be,FullPaths:Xe};L(We);var ct,xt=0;for(Ne=0;Ne<we.length;++Ne){var mt=we[Ne];mt!==at&&mt!==at+"--"||(xt++&&yn(We,we.slice(ct,Ne),ge),ct=Ne)}return We}function oa(ce,me){var ge=me||{},we=ge.boundary||"SheetJS";we="------="+we;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+we.slice(2)+'"',"","",""],Se=ce.FullPaths[0],Ge=Se,at=ce.FileIndex[0],Be=1;Be<ce.FullPaths.length;++Be)if(Ge=ce.FullPaths[Be].slice(Se.length),at=ce.FileIndex[Be],!(!at.size||!at.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var Xe=at.content,We=fr&&Buffer.isBuffer(Xe)?Xe.toString("binary"):oe(Xe),ct=0,xt=Math.min(1024,We.length),mt=0,pt=0;pt<=xt;++pt)(mt=We.charCodeAt(pt))>=32&&mt<128&&++ct;var bt=ct>=xt*4/5;Ne.push(we),Ne.push("Content-Location: "+(ge.root||"file:///C:/SheetJS/")+Ge),Ne.push("Content-Transfer-Encoding: "+(bt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Ol(at,Ge)),Ne.push(""),Ne.push(bt?ui(We):Za(We))}return Ne.push(we+`--\r
`),Ne.join(`\r
`)}function ga(ce){var me={};return L(me,ce),me}function Pr(ce,me,ge,we){var Ne=we&&we.unsafe;Ne||L(ce);var Se=!Ne&&pr.find(ce,me);if(!Se){var Ge=ce.FullPaths[0];me.slice(0,Ge.length)==Ge?Ge=me:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+me).replace("//","/")),Se={name:l(me),type:2},ce.FileIndex.push(Se),ce.FullPaths.push(Ge),Ne||pr.utils.cfb_gc(ce)}return Se.content=ge,Se.size=ge?ge.length:0,we&&(we.CLSID&&(Se.clsid=we.CLSID),we.mt&&(Se.mt=we.mt),we.ct&&(Se.ct=we.ct)),Se}function tn(ce,me){L(ce);var ge=pr.find(ce,me);if(ge){for(var we=0;we<ce.FileIndex.length;++we)if(ce.FileIndex[we]==ge)return ce.FileIndex.splice(we,1),ce.FullPaths.splice(we,1),!0}return!1}function pa(ce,me,ge){L(ce);var we=pr.find(ce,me);if(we){for(var Ne=0;Ne<ce.FileIndex.length;++Ne)if(ce.FileIndex[Ne]==we)return ce.FileIndex[Ne].name=l(ge),ce.FullPaths[Ne]=ge,!0}return!1}function bn(ce){z(ce,!0)}return a.find=ee,a.read=U,a.parse=w,a.write=xe,a.writeFile=ye,a.utils={cfb_new:ga,cfb_add:Pr,cfb_del:tn,cfb_mov:pa,cfb_gc:bn,ReadShift:I0,CheckField:u4,prep_blob:$a,bconcat:Cl,use_zlib:q,_deflateRaw:It,_inflateRaw:kt,consts:de},a}();function E8(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);a.open("r"),a.encoding="binary";var r=a.read();return a.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function ii(t){for(var a=Object.keys(t),r=[],n=0;n<a.length;++n)Object.prototype.hasOwnProperty.call(t,a[n])&&r.push(a[n]);return r}function hg(t){for(var a=[],r=ii(t),n=0;n!==r.length;++n)a[t[r[n]]]=r[n];return a}var nf=new Date(1899,11,30,0,0,0);function Cs(t,a){var r=t.getTime(),n=nf.getTime()+(t.getTimezoneOffset()-nf.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Gw=new Date,S8=nf.getTime()+(Gw.getTimezoneOffset()-nf.getTimezoneOffset())*6e4,f2=Gw.getTimezoneOffset();function _f(t){var a=new Date;return a.setTime(t*24*60*60*1e3+S8),a.getTimezoneOffset()!==f2&&a.setTime(a.getTime()+(a.getTimezoneOffset()-f2)*6e4),a}function A8(t){var a=0,r=0,n=!1,l=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!l)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var d=1;d!=l.length;++d)if(l[d]){switch(r=1,d>3&&(n=!0),l[d].slice(l[d].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+l[d].slice(l[d].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}a+=r*parseInt(l[d],10)}return a}var x2=new Date("2017-02-19T19:06:09.000Z"),Yw=isNaN(x2.getFullYear())?new Date("2/19/17"):x2,_8=Yw.getFullYear()==2017;function Va(t,a){var r=new Date(t);if(_8)return a>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):a<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Yw.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var l=t.match(/\d+/g)||["2017","2","19","0","0","0"],d=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return t.indexOf("Z")>-1&&(d=new Date(d.getTime()-d.getTimezoneOffset()*60*1e3)),d}function vo(t,a){if(fr&&Buffer.isBuffer(t)){if(a){if(t[0]==255&&t[1]==254)return M0(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return M0(Dw(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(a){if(t[0]==255&&t[1]==254)return M0(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return M0(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(d){return r[d]||d})}catch{}for(var n=[],l=0;l!=t.length;++l)n.push(String.fromCharCode(t[l]));return n.join("")}function Wa(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=Wa(t[r]));return a}function na(t,a){for(var r="";r.length<a;)r+=t;return r}function Dn(t){var a=Number(t);if(!isNaN(a))return isFinite(a)?a:NaN;if(!/\d/.test(t))return a;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(a=Number(n))||(n=n.replace(/[(](.*)[)]/,function(l,d){return r=-r,d}),!isNaN(a=Number(n)))?a/r:a}var T8=["january","february","march","april","may","june","july","august","september","october","november","december"];function jc(t){var a=new Date(t),r=new Date(NaN),n=a.getYear(),l=a.getMonth(),d=a.getDate();if(isNaN(d))return r;var f=t.toLowerCase();if(f.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(f=f.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),f.length>3&&T8.indexOf(f)==-1)return r}else if(f.match(/[a-z]/))return r;return n<0||n>8099?r:(l>0||d>1)&&n!=101?a:t.match(/[^-0-9:,\/\\]/)?r:a}var D8=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,l){if(t||typeof n=="string")return r.split(n);for(var d=r.split(n),f=[d[0]],h=1;h<d.length;++h)f.push(l),f.push(d[h]);return f}}();function Xw(t){return t?t.content&&t.type?vo(t.content,!0):t.data?T0(t.data):t.asNodeBuffer&&fr?T0(t.asNodeBuffer().toString("binary")):t.asBinary?T0(t.asBinary()):t._data&&t._data.getContent?T0(vo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function qw(t){if(!t)return null;if(t.data)return t2(t.data);if(t.asNodeBuffer&&fr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var a=t._data.getContent();return typeof a=="string"?t2(a):Array.prototype.slice.call(a)}return t.content&&t.type?t.content:null}function R8(t){return t&&t.name.slice(-4)===".bin"?qw(t):Xw(t)}function xn(t,a){for(var r=t.FullPaths||ii(t.files),n=a.toLowerCase().replace(/[\/]/g,"\\"),l=n.replace(/\\/g,"/"),d=0;d<r.length;++d){var f=r[d].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==f||l==f)return t.files?t.files[r[d]]:t.FileIndex[d]}return null}function mg(t,a){var r=xn(t,a);if(r==null)throw new Error("Cannot find file "+a+" in zip");return r}function Na(t,a,r){if(!r)return R8(mg(t,a));if(!a)return null;try{return Na(t,a)}catch{return null}}function Ws(t,a,r){if(!r)return Xw(mg(t,a));if(!a)return null;try{return Ws(t,a)}catch{return null}}function M8(t,a,r){return qw(mg(t,a))}function h2(t){for(var a=t.FullPaths||ii(t.files),r=[],n=0;n<a.length;++n)a[n].slice(-1)!="/"&&r.push(a[n].replace(/^Root Entry[\/]/,""));return r.sort()}function I8(t,a,r){if(t.FullPaths){if(typeof r=="string"){var n;return fr?n=jo(r):n=J_(r),pr.utils.cfb_add(t,a,n)}pr.utils.cfb_add(t,a,r)}else t.file(a,r)}function $w(t,a){switch(a.type){case"base64":return pr.read(t,{type:"base64"});case"binary":return pr.read(t,{type:"binary"});case"buffer":case"array":return pr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+a.type)}function R0(t,a){if(t.charAt(0)=="/")return t.slice(1);var r=a.split("/");a.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var l=n.shift();l===".."?r.pop():l!=="."&&r.push(l)}return r.join("/")}var Ww=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,O8=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,m2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,F8=/<[^>]*>/g,hs=Ww.match(m2)?m2:F8,B8=/<\w*:/,L8=/<(\/?)\w+:/;function Vt(t,a,r){for(var n={},l=0,d=0;l!==t.length&&!((d=t.charCodeAt(l))===32||d===10||d===13);++l);if(a||(n[0]=t.slice(0,l)),l===t.length)return n;var f=t.match(O8),h=0,b="",g=0,w="",k="",C=1;if(f)for(g=0;g!=f.length;++g){for(k=f[g],d=0;d!=k.length&&k.charCodeAt(d)!==61;++d);for(w=k.slice(0,d).trim();k.charCodeAt(d+1)==32;)++d;for(C=(l=k.charCodeAt(d+1))==34||l==39?1:0,b=k.slice(d+1+C,k.length-C),h=0;h!=w.length&&w.charCodeAt(h)!==58;++h);if(h===w.length)w.indexOf("_")>0&&(w=w.slice(0,w.indexOf("_"))),n[w]=b,n[w.toLowerCase()]=b;else{var S=(h===5&&w.slice(0,5)==="xmlns"?"xmlns":"")+w.slice(h+1);if(n[S]&&w.slice(h-3,h)=="ext")continue;n[S]=b,n[S.toLowerCase()]=b}}return n}function ci(t){return t.replace(L8,"<$1")}var Kw={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},P8=hg(Kw),br=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,a=/_x([\da-fA-F]{4})_/ig;return function r(n){var l=n+"",d=l.indexOf("<![CDATA[");if(d==-1)return l.replace(t,function(h,b){return Kw[h]||String.fromCharCode(parseInt(b,h.indexOf("x")>-1?16:10))||h}).replace(a,function(h,b){return String.fromCharCode(parseInt(b,16))});var f=l.indexOf("]]>");return r(l.slice(0,d))+l.slice(d+9,f)+r(l.slice(f+3))}}(),z8=/[&<>'"]/g,U8=/[\u0000-\u001f]/g;function gg(t){var a=t+"";return a.replace(z8,function(r){return P8[r]}).replace(/\n/g,"<br/>").replace(U8,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var g2=function(){var t=/&#(\d+);/g;function a(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,a)}}();function Wr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function dm(t){for(var a="",r=0,n=0,l=0,d=0,f=0,h=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){a+=String.fromCharCode(n);continue}if(l=t.charCodeAt(r++),n>191&&n<224){f=(n&31)<<6,f|=l&63,a+=String.fromCharCode(f);continue}if(d=t.charCodeAt(r++),n<240){a+=String.fromCharCode((n&15)<<12|(l&63)<<6|d&63);continue}f=t.charCodeAt(r++),h=((n&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536,a+=String.fromCharCode(55296+(h>>>10&1023)),a+=String.fromCharCode(56320+(h&1023))}return a}function p2(t){var a=Dl(2*t.length),r,n,l=1,d=0,f=0,h;for(n=0;n<t.length;n+=l)l=1,(h=t.charCodeAt(n))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(n+1)&63),l=2):h<240?(r=(h&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),l=3):(l=4,r=(h&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,f=55296+(r>>>10&1023),r=56320+(r&1023)),f!==0&&(a[d++]=f&255,a[d++]=f>>>8,f=0),a[d++]=r%256,a[d++]=r>>>8;return a.slice(0,d).toString("ucs2")}function y2(t){return jo(t,"binary").toString("utf8")}var Du="foo bar baz",Ur=fr&&(y2(Du)==dm(Du)&&y2||p2(Du)==dm(Du)&&p2)||dm,M0=fr?function(t){return jo(t,"utf8").toString("binary")}:function(t){for(var a=[],r=0,n=0,l=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:a.push(String.fromCharCode(n));break;case n<2048:a.push(String.fromCharCode(192+(n>>6))),a.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,l=t.charCodeAt(r++)-56320+(n<<10),a.push(String.fromCharCode(240+(l>>18&7))),a.push(String.fromCharCode(144+(l>>12&63))),a.push(String.fromCharCode(128+(l>>6&63))),a.push(String.fromCharCode(128+(l&63)));break;default:a.push(String.fromCharCode(224+(n>>12))),a.push(String.fromCharCode(128+(n>>6&63))),a.push(String.fromCharCode(128+(n&63)))}return a.join("")},Z0=function(){var t={};return function(r,n){var l=r+"|"+(n||"");return t[l]?t[l]:t[l]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Zw=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(a){return[new RegExp("&"+a[0]+";","ig"),a[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<t.length;++l)n=n.replace(t[l][0],t[l][1]);return n}}(),H8=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),V8=/<\/?(?:vt:)?variant>/g,G8=/<(?:vt:)([^>]*)>([\s\S]*)</;function b2(t,a){var r=Vt(t),n=t.match(H8(r.baseType))||[],l=[];if(n.length!=r.size){if(a.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return l}return n.forEach(function(d){var f=d.replace(V8,"").match(G8);f&&l.push({v:Ur(f[2]),t:f[1]})}),l}var Y8=/(^\s|\s$|\n)/;function X8(t){return ii(t).map(function(a){return" "+a+'="'+t[a]+'"'}).join("")}function q8(t,a,r){return"<"+t+(r!=null?X8(r):"")+(a!=null?(a.match(Y8)?' xml:space="preserve"':"")+">"+a+"</"+t:"/")+">"}function pg(t){if(fr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ur(Co(ug(t)));throw new Error("Bad input format: expected Buffer or string")}var Q0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,$8={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},W8=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function K8(t,a){for(var r=1-2*(t[a+7]>>>7),n=((t[a+7]&127)<<4)+(t[a+6]>>>4&15),l=t[a+6]&15,d=5;d>=0;--d)l=l*256+t[a+d];return n==2047?l==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,l+=Math.pow(2,52)),r*Math.pow(2,n-52)*l)}function Z8(t,a,r){var n=(a<0||1/a==-1/0?1:0)<<7,l=0,d=0,f=n?-a:a;isFinite(f)?f==0?l=d=0:(l=Math.floor(Math.log(f)/Math.LN2),d=f*Math.pow(2,52-l),l<=-1023&&(!isFinite(d)||d<Math.pow(2,52))?l=-1022:(d-=Math.pow(2,52),l+=1023)):(l=2047,d=isNaN(a)?26985:0);for(var h=0;h<=5;++h,d/=256)t[r+h]=d&255;t[r+6]=(l&15)<<4|d&15,t[r+7]=l>>4|n}var v2=function(t){for(var a=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var l=0,d=t[0][n].length;l<d;l+=r)a.push.apply(a,t[0][n].slice(l,l+r));return a},w2=fr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(a){return Buffer.isBuffer(a)?a:jo(a)})):v2(t)}:v2,N2=function(t,a,r){for(var n=[],l=a;l<r;l+=2)n.push(String.fromCharCode(Di(t,l)));return n.join("").replace(ks,"")},yg=fr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("utf16le",a,r).replace(ks,""):N2(t,a,r)}:N2,k2=function(t,a,r){for(var n=[],l=a;l<a+r;++l)n.push(("0"+t[l].toString(16)).slice(-2));return n.join("")},Qw=fr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("hex",a,a+r):k2(t,a,r)}:k2,j2=function(t,a,r){for(var n=[],l=a;l<r;l++)n.push(String.fromCharCode(mc(t,l)));return n.join("")},hd=fr?function(a,r,n){return Buffer.isBuffer(a)?a.toString("utf8",r,n):j2(a,r,n)}:j2,Jw=function(t,a){var r=qs(t,a);return r>0?hd(t,a+4,a+4+r-1):""},e4=Jw,t4=function(t,a){var r=qs(t,a);return r>0?hd(t,a+4,a+4+r-1):""},r4=t4,a4=function(t,a){var r=2*qs(t,a);return r>0?hd(t,a+4,a+4+r-1):""},s4=a4,n4=function(a,r){var n=qs(a,r);return n>0?yg(a,r+4,r+4+n):""},i4=n4,l4=function(t,a){var r=qs(t,a);return r>0?hd(t,a+4,a+4+r):""},o4=l4,c4=function(t,a){return K8(t,a)},lf=c4,d4=function(a){return Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array};fr&&(e4=function(a,r){if(!Buffer.isBuffer(a))return Jw(a,r);var n=a.readUInt32LE(r);return n>0?a.toString("utf8",r+4,r+4+n-1):""},r4=function(a,r){if(!Buffer.isBuffer(a))return t4(a,r);var n=a.readUInt32LE(r);return n>0?a.toString("utf8",r+4,r+4+n-1):""},s4=function(a,r){if(!Buffer.isBuffer(a))return a4(a,r);var n=2*a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+n-1)},i4=function(a,r){if(!Buffer.isBuffer(a))return n4(a,r);var n=a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+n)},o4=function(a,r){if(!Buffer.isBuffer(a))return l4(a,r);var n=a.readUInt32LE(r);return a.toString("utf8",r+4,r+4+n)},lf=function(a,r){return Buffer.isBuffer(a)?a.readDoubleLE(r):c4(a,r)},d4=function(a){return Buffer.isBuffer(a)||Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array});var mc=function(t,a){return t[a]},Di=function(t,a){return t[a+1]*256+t[a]},Q8=function(t,a){var r=t[a+1]*256+t[a];return r<32768?r:(65535-r+1)*-1},qs=function(t,a){return t[a+3]*(1<<24)+(t[a+2]<<16)+(t[a+1]<<8)+t[a]},so=function(t,a){return t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a]},J8=function(t,a){return t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]};function I0(t,a){var r="",n,l,d=[],f,h,b,g;switch(a){case"dbcs":if(g=this.l,fr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(b=0;b<t;++b)r+=String.fromCharCode(Di(this,g)),g+=2;t*=2;break;case"utf8":r=hd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=yg(this,this.l,this.l+t);break;case"wstr":return I0.call(this,t,"dbcs");case"lpstr-ansi":r=e4(this,this.l),t=4+qs(this,this.l);break;case"lpstr-cp":r=r4(this,this.l),t=4+qs(this,this.l);break;case"lpwstr":r=s4(this,this.l),t=4+2*qs(this,this.l);break;case"lpp4":t=4+qs(this,this.l),r=i4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+qs(this,this.l),r=o4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(f=mc(this,this.l+t++))!==0;)d.push(Tu(f));r=d.join("");break;case"_wstr":for(t=0,r="";(f=Di(this,this.l+t))!==0;)d.push(Tu(f)),t+=2;t+=2,r=d.join("");break;case"dbcs-cont":for(r="",g=this.l,b=0;b<t;++b){if(this.lens&&this.lens.indexOf(g)!==-1)return f=mc(this,g),this.l=g+1,h=I0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(Tu(Di(this,g))),g+=2}r=d.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",g=this.l,b=0;b!=t;++b){if(this.lens&&this.lens.indexOf(g)!==-1)return f=mc(this,g),this.l=g+1,h=I0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(Tu(mc(this,g))),g+=1}r=d.join("");break;default:switch(t){case 1:return n=mc(this,this.l),this.l++,n;case 2:return n=(a==="i"?Q8:Di)(this,this.l),this.l+=2,n;case 4:case-4:return a==="i"||(this[this.l+3]&128)===0?(n=(t>0?so:J8)(this,this.l),this.l+=4,n):(l=qs(this,this.l),this.l+=4,l);case 8:case-8:if(a==="f")return t==8?l=lf(this,this.l):l=lf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;t=8;case 16:r=Qw(this,this.l,t);break}}return this.l+=t,r}var eT=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255,t[r+2]=a>>>16&255,t[r+3]=a>>>24&255},tT=function(t,a,r){t[r]=a&255,t[r+1]=a>>8&255,t[r+2]=a>>16&255,t[r+3]=a>>24&255},rT=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255};function aT(t,a,r){var n=0,l=0;if(r==="dbcs"){for(l=0;l!=a.length;++l)rT(this,a.charCodeAt(l),this.l+2*l);n=2*a.length}else if(r==="sbcs"){for(a=a.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=a.length;++l)this[this.l+l]=a.charCodeAt(l)&255;n=a.length}else if(r==="hex"){for(;l<t;++l)this[this.l++]=parseInt(a.slice(2*l,2*l+2),16)||0;return this}else if(r==="utf16le"){var d=Math.min(this.l+t,this.length);for(l=0;l<Math.min(a.length,t);++l){var f=a.charCodeAt(l);this[this.l++]=f&255,this[this.l++]=f>>8}for(;this.l<d;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=a&255;break;case 2:n=2,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255;break;case 3:n=3,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255,a>>>=8,this[this.l+2]=a&255;break;case 4:n=4,eT(this,a,this.l);break;case 8:if(n=8,r==="f"){Z8(this,a,this.l);break}case 16:break;case-4:n=4,tT(this,a,this.l);break}return this.l+=n,this}function u4(t,a){var r=Qw(this,this.l,t.length>>1);if(r!==t)throw new Error(a+"Expected "+t+" saw "+r);this.l+=t.length>>1}function $a(t,a){t.l=a,t.read_shift=I0,t.chk=u4,t.write_shift=aT}function xs(t,a){t.l+=a}function Ia(t){var a=Dl(t);return $a(a,0),a}function Hi(t,a,r){if(t){var n,l,d;$a(t,t.l||0);for(var f=t.length,h=0,b=0;t.l<f;){h=t.read_shift(1),h&128&&(h=(h&127)+((t.read_shift(1)&127)<<7));var g=xf[h]||xf[65535];for(n=t.read_shift(1),d=n&127,l=1;l<4&&n&128;++l)d+=((n=t.read_shift(1))&127)<<7*l;b=t.l+d;var w=g.f&&g.f(t,d,r);if(t.l=b,a(w,g,h))return}}}function Pm(){var t=[],a=fr?256:2048,r=function(g){var w=Ia(g);return $a(w,0),w},n=r(a),l=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},d=function(g){return n&&g<n.length-n.l?n:(l(),n=r(Math.max(g+1,a)))},f=function(){return l(),Cl(t)},h=function(g){l(),n=g,n.l==null&&(n.l=n.length),d(a)};return{next:d,push:h,end:f,_bufs:t}}function O0(t,a,r){var n=Wa(t);if(a.s?(n.cRel&&(n.c+=a.s.c),n.rRel&&(n.r+=a.s.r)):(n.cRel&&(n.c+=a.c),n.rRel&&(n.r+=a.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function C2(t,a,r){var n=Wa(t);return n.s=O0(n.s,a.s,r),n.e=O0(n.e,a.s,r),n}function F0(t,a){if(t.cRel&&t.c<0)for(t=Wa(t);t.c<0;)t.c+=a>8?16384:256;if(t.rRel&&t.r<0)for(t=Wa(t);t.r<0;)t.r+=a>8?1048576:a>5?65536:16384;var r=Zt(t);return!t.cRel&&t.cRel!=null&&(r=iT(r)),!t.rRel&&t.rRel!=null&&(r=sT(r)),r}function um(t,a){return t.s.r==0&&!t.s.rRel&&t.e.r==(a.biff>=12?1048575:a.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Fa(t.s.c)+":"+(t.e.cRel?"":"$")+Fa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(a.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ka(t.s.r)+":"+(t.e.rRel?"":"$")+Ka(t.e.r):F0(t.s,a.biff)+":"+F0(t.e,a.biff)}function bg(t){return parseInt(nT(t),10)-1}function Ka(t){return""+(t+1)}function sT(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function nT(t){return t.replace(/\$(\d+)$/,"$1")}function vg(t){for(var a=lT(t),r=0,n=0;n!==a.length;++n)r=26*r+a.charCodeAt(n)-64;return r-1}function Fa(t){if(t<0)throw new Error("invalid column "+t);var a="";for(++t;t;t=Math.floor((t-1)/26))a=String.fromCharCode((t-1)%26+65)+a;return a}function iT(t){return t.replace(/^([A-Z])/,"$$$1")}function lT(t){return t.replace(/^\$([A-Z])/,"$1")}function oT(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ns(t){for(var a=0,r=0,n=0;n<t.length;++n){var l=t.charCodeAt(n);l>=48&&l<=57?a=10*a+(l-48):l>=65&&l<=90&&(r=26*r+(l-64))}return{c:r-1,r:a-1}}function Zt(t){for(var a=t.c+1,r="";a;a=(a-1)/26|0)r=String.fromCharCode((a-1)%26+65)+r;return r+(t.r+1)}function Mc(t){var a=t.indexOf(":");return a==-1?{s:Ns(t),e:Ns(t)}:{s:Ns(t.slice(0,a)),e:Ns(t.slice(a+1))}}function yr(t,a){return typeof a>"u"||typeof a=="number"?yr(t.s,t.e):(typeof t!="string"&&(t=Zt(t)),typeof a!="string"&&(a=Zt(a)),t==a?t:t+":"+a)}function la(t){var a={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,l=0,d=t.length;for(r=0;n<d&&!((l=t.charCodeAt(n)-64)<1||l>26);++n)r=26*r+l;for(a.s.c=--r,r=0;n<d&&!((l=t.charCodeAt(n)-48)<0||l>9);++n)r=10*r+l;if(a.s.r=--r,n===d||l!=10)return a.e.c=a.s.c,a.e.r=a.s.r,a;for(++n,r=0;n!=d&&!((l=t.charCodeAt(n)-64)<1||l>26);++n)r=26*r+l;for(a.e.c=--r,r=0;n!=d&&!((l=t.charCodeAt(n)-48)<0||l>9);++n)r=10*r+l;return a.e.r=--r,a}function E2(t,a){var r=t.t=="d"&&a instanceof Date;if(t.z!=null)try{return t.w=mn(t.z,r?Cs(a):a)}catch{}try{return t.w=mn((t.XF||{}).numFmtId||(r?14:0),r?Cs(a):a)}catch{return""+a}}function Ui(t,a,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Ao[t.v]||t.v:a==null?E2(t,t.v):E2(t,a))}function Il(t,a){var r=a&&a.sheet?a.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function f4(t,a,r){var n=r||{},l=t?Array.isArray(t):n.dense,d=t||(l?[]:{}),f=0,h=0;if(d&&n.origin!=null){if(typeof n.origin=="number")f=n.origin;else{var b=typeof n.origin=="string"?Ns(n.origin):n.origin;f=b.r,h=b.c}d["!ref"]||(d["!ref"]="A1:A1")}var g={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(d["!ref"]){var w=la(d["!ref"]);g.s.c=w.s.c,g.s.r=w.s.r,g.e.c=Math.max(g.e.c,w.e.c),g.e.r=Math.max(g.e.r,w.e.r),f==-1&&(g.e.r=f=w.e.r+1)}for(var k=0;k!=a.length;++k)if(a[k]){if(!Array.isArray(a[k]))throw new Error("aoa_to_sheet expects an array of arrays");for(var C=0;C!=a[k].length;++C)if(!(typeof a[k][C]>"u")){var S={v:a[k][C]},D=f+k,A=h+C;if(g.s.r>D&&(g.s.r=D),g.s.c>A&&(g.s.c=A),g.e.r<D&&(g.e.r=D),g.e.c<A&&(g.e.c=A),a[k][C]&&typeof a[k][C]=="object"&&!Array.isArray(a[k][C])&&!(a[k][C]instanceof Date))S=a[k][C];else if(Array.isArray(S.v)&&(S.f=a[k][C][1],S.v=S.v[0]),S.v===null)if(S.f)S.t="n";else if(n.nullError)S.t="e",S.v=0;else if(n.sheetStubs)S.t="z";else continue;else typeof S.v=="number"?S.t="n":typeof S.v=="boolean"?S.t="b":S.v instanceof Date?(S.z=n.dateNF||tr[14],n.cellDates?(S.t="d",S.w=mn(S.z,Cs(S.v))):(S.t="n",S.v=Cs(S.v),S.w=mn(S.z,S.v))):S.t="s";if(l)d[D]||(d[D]=[]),d[D][A]&&d[D][A].z&&(S.z=d[D][A].z),d[D][A]=S;else{var M=Zt({c:A,r:D});d[M]&&d[M].z&&(S.z=d[M].z),d[M]=S}}}return g.s.c<1e7&&(d["!ref"]=yr(g)),d}function Ic(t,a){return f4(null,t,a)}function cT(t){return t.read_shift(4,"i")}function fs(t){var a=t.read_shift(4);return a===0?"":t.read_shift(a,"dbcs")}function dT(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function wg(t,a){var r=t.l,n=t.read_shift(1),l=fs(t),d=[],f={t:l,h:l};if((n&1)!==0){for(var h=t.read_shift(4),b=0;b!=h;++b)d.push(dT(t));f.r=d}else f.r=[{ich:0,ifnt:0}];return t.l=r+a,f}var uT=wg;function pn(t){var a=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:a,iStyleRef:r}}function Eo(t){var a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:a}}var fT=fs;function Ng(t){var a=t.read_shift(4);return a===0||a===4294967295?"":t.read_shift(a,"dbcs")}var xT=fs,zm=Ng;function kg(t){var a=t.slice(t.l,t.l+4),r=a[0]&1,n=a[0]&2;t.l+=4;var l=n===0?lf([0,0,0,0,a[0]&252,a[1],a[2],a[3]],0):so(a,0)>>2;return r?l/100:l}function x4(t){var a={s:{},e:{}};return a.s.r=t.read_shift(4),a.e.r=t.read_shift(4),a.s.c=t.read_shift(4),a.e.c=t.read_shift(4),a}var So=x4;function cs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function hT(t){var a={},r=t.read_shift(1),n=r>>>1,l=t.read_shift(1),d=t.read_shift(2,"i"),f=t.read_shift(1),h=t.read_shift(1),b=t.read_shift(1);switch(t.l++,n){case 0:a.auto=1;break;case 1:a.index=l;var g=fo[l];g&&(a.rgb=ed(g));break;case 2:a.rgb=ed([f,h,b]);break;case 3:a.theme=l;break}return d!=0&&(a.tint=d>0?d/32767:d/32768),a}function mT(t){var a=t.read_shift(1);t.l++;var r={fBold:a&1,fItalic:a&2,fUnderline:a&4,fStrikeout:a&8,fOutline:a&16,fShadow:a&32,fCondense:a&64,fExtend:a&128};return r}function h4(t,a){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,a==1?"lpstr":"lpwstr")}function gT(t){return h4(t,1)}function pT(t){return h4(t,2)}var jg=2,Ds=3,Ru=11,S2=12,of=19,Mu=64,yT=65,bT=71,vT=4108,wT=4126,Ua=80,m4=81,NT=[Ua,m4],kT={1:{n:"CodePage",t:jg},2:{n:"Category",t:Ua},3:{n:"PresentationFormat",t:Ua},4:{n:"ByteCount",t:Ds},5:{n:"LineCount",t:Ds},6:{n:"ParagraphCount",t:Ds},7:{n:"SlideCount",t:Ds},8:{n:"NoteCount",t:Ds},9:{n:"HiddenCount",t:Ds},10:{n:"MultimediaClipCount",t:Ds},11:{n:"ScaleCrop",t:Ru},12:{n:"HeadingPairs",t:vT},13:{n:"TitlesOfParts",t:wT},14:{n:"Manager",t:Ua},15:{n:"Company",t:Ua},16:{n:"LinksUpToDate",t:Ru},17:{n:"CharacterCount",t:Ds},19:{n:"SharedDoc",t:Ru},22:{n:"HyperlinksChanged",t:Ru},23:{n:"AppVersion",t:Ds,p:"version"},24:{n:"DigSig",t:yT},26:{n:"ContentType",t:Ua},27:{n:"ContentStatus",t:Ua},28:{n:"Language",t:Ua},29:{n:"Version",t:Ua},255:{},2147483648:{n:"Locale",t:of},2147483651:{n:"Behavior",t:of},1919054434:{}},jT={1:{n:"CodePage",t:jg},2:{n:"Title",t:Ua},3:{n:"Subject",t:Ua},4:{n:"Author",t:Ua},5:{n:"Keywords",t:Ua},6:{n:"Comments",t:Ua},7:{n:"Template",t:Ua},8:{n:"LastAuthor",t:Ua},9:{n:"RevNumber",t:Ua},10:{n:"EditTime",t:Mu},11:{n:"LastPrinted",t:Mu},12:{n:"CreatedDate",t:Mu},13:{n:"ModifiedDate",t:Mu},14:{n:"PageCount",t:Ds},15:{n:"WordCount",t:Ds},16:{n:"CharCount",t:Ds},17:{n:"Thumbnail",t:bT},18:{n:"Application",t:Ua},19:{n:"DocSecurity",t:Ds},255:{},2147483648:{n:"Locale",t:of},2147483651:{n:"Behavior",t:of},1919054434:{}},A2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},CT=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ET(t){return t.map(function(a){return[a>>16&255,a>>8&255,a&255]})}var ST=ET([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),fo=Wa(ST),Ao={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},g4={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},_2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function AT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function _T(t){var a=AT();if(!t||!t.match)return a;var r={};if((t.match(hs)||[]).forEach(function(n){var l=Vt(n);switch(l[0].replace(B8,"<")){case"<?xml":break;case"<Types":a.xmlns=l["xmlns"+(l[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[l.Extension]=l.ContentType;break;case"<Override":a[_2[l.ContentType]]!==void 0&&a[_2[l.ContentType]].push(l.PartName);break}}),a.xmlns!==$8.CT)throw new Error("Unknown Namespace: "+a.xmlns);return a.calcchain=a.calcchains.length>0?a.calcchains[0]:"",a.sst=a.strs.length>0?a.strs[0]:"",a.style=a.styles.length>0?a.styles[0]:"",a.defaults=r,delete a.calcchains,a}var pc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Um(t){var a=t.lastIndexOf("/");return t.slice(0,a+1)+"_rels/"+t.slice(a+1)+".rels"}function B0(t,a){var r={"!id":{}};if(!t)return r;a.charAt(0)!=="/"&&(a="/"+a);var n={};return(t.match(hs)||[]).forEach(function(l){var d=Vt(l);if(d[0]==="<Relationship"){var f={};f.Type=d.Type,f.Target=d.Target,f.Id=d.Id,d.TargetMode&&(f.TargetMode=d.TargetMode);var h=d.TargetMode==="External"?d.Target:R0(d.Target,a);r[h]=f,n[d.Id]=f}}),r["!id"]=n,r}var TT="application/vnd.oasis.opendocument.spreadsheet";function DT(t,a){for(var r=pg(t),n,l;n=Q0.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(l=Vt(n[0],!1),l.path=="/"&&l.type!==TT)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(a&&a.WTF)throw n}}var L0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],RT=function(){for(var t=new Array(L0.length),a=0;a<L0.length;++a){var r=L0[a],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[a]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function p4(t){var a={};t=Ur(t);for(var r=0;r<L0.length;++r){var n=L0[r],l=t.match(RT[r]);l!=null&&l.length>0&&(a[n[1]]=br(l[1])),n[2]==="date"&&a[n[1]]&&(a[n[1]]=Va(a[n[1]]))}return a}var MT=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function y4(t,a,r,n){var l=[];if(typeof t=="string")l=b2(t,n);else for(var d=0;d<t.length;++d)l=l.concat(t[d].map(function(w){return{v:w}}));var f=typeof a=="string"?b2(a,n).map(function(w){return w.v}):a,h=0,b=0;if(f.length>0)for(var g=0;g!==l.length;g+=2){switch(b=+l[g+1].v,l[g].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=b,r.SheetNames=f.slice(h,h+b);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=b,r.DefinedNames=f.slice(h,h+b);break;case"Charts":case"Diagramme":r.Chartsheets=b,r.ChartNames=f.slice(h,h+b);break}h+=b}}function IT(t,a,r){var n={};return a||(a={}),t=Ur(t),MT.forEach(function(l){var d=(t.match(Z0(l[0]))||[])[1];switch(l[2]){case"string":d&&(a[l[1]]=br(d));break;case"bool":a[l[1]]=d==="true";break;case"raw":var f=t.match(new RegExp("<"+l[0]+"[^>]*>([\\s\\S]*?)</"+l[0]+">"));f&&f.length>0&&(n[l[1]]=f[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&y4(n.HeadingPairs,n.TitlesOfParts,a,r),a}var OT=/<[^>]+>[^<]*/g;function FT(t,a){var r={},n="",l=t.match(OT);if(l)for(var d=0;d!=l.length;++d){var f=l[d],h=Vt(f);switch(h[0]){case"<?xml":break;case"<Properties":break;case"<property":n=br(h.name);break;case"</property>":n=null;break;default:if(f.indexOf("<vt:")===0){var b=f.split(">"),g=b[0].slice(4),w=b[1];switch(g){case"lpstr":case"bstr":case"lpwstr":r[n]=br(w);break;case"bool":r[n]=Wr(w);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(w,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(w);break;case"filetime":case"date":r[n]=Va(w);break;case"cy":case"error":r[n]=br(w);break;default:if(g.slice(-1)=="/")break;a.WTF&&typeof console<"u"&&console.warn("Unexpected",f,g,b)}}else if(f.slice(0,2)!=="</"){if(a.WTF)throw new Error(f)}}}return r}var BT={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},fm;function LT(t,a,r){fm||(fm=hg(BT)),a=fm[a]||a,t[a]=r}function Cg(t){var a=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+a/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function b4(t,a,r){var n=t.l,l=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return l}function v4(t,a,r){var n=t.read_shift(0,"lpwstr");return n}function w4(t,a,r){return a===31?v4(t):b4(t,a,r)}function Hm(t,a,r){return w4(t,a,r===!1?0:4)}function PT(t,a){if(!a)throw new Error("VtUnalignedString must have positive length");return w4(t,a,0)}function zT(t){for(var a=t.read_shift(4),r=[],n=0;n!=a;++n){var l=t.l;r[n]=t.read_shift(0,"lpwstr").replace(ks,""),t.l-l&2&&(t.l+=2)}return r}function UT(t){for(var a=t.read_shift(4),r=[],n=0;n!=a;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(ks,"");return r}function HT(t){var a=t.l,r=cf(t,m4);t[t.l]==0&&t[t.l+1]==0&&t.l-a&2&&(t.l+=2);var n=cf(t,Ds);return[r,n]}function VT(t){for(var a=t.read_shift(4),r=[],n=0;n<a/2;++n)r.push(HT(t));return r}function T2(t,a){for(var r=t.read_shift(4),n={},l=0;l!=r;++l){var d=t.read_shift(4),f=t.read_shift(4);n[d]=t.read_shift(f,a===1200?"utf16le":"utf8").replace(ks,"").replace(D0,"!"),a===1200&&f%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function N4(t){var a=t.read_shift(4),r=t.slice(t.l,t.l+a);return t.l+=a,(a&3)>0&&(t.l+=4-(a&3)&3),r}function GT(t){var a={};return a.Size=t.read_shift(4),t.l+=a.Size+3-(a.Size-1)%4,a}function cf(t,a,r){var n=t.read_shift(2),l,d=r||{};if(t.l+=2,a!==S2&&n!==a&&NT.indexOf(a)===-1&&!((a&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+a+" saw "+n);switch(a===S2?n:a){case 2:return l=t.read_shift(2,"i"),d.raw||(t.l+=2),l;case 3:return l=t.read_shift(4,"i"),l;case 11:return t.read_shift(4)!==0;case 19:return l=t.read_shift(4),l;case 30:return b4(t,n,4).replace(ks,"");case 31:return v4(t);case 64:return Cg(t);case 65:return N4(t);case 71:return GT(t);case 80:return Hm(t,n,!d.raw).replace(ks,"");case 81:return PT(t,n).replace(ks,"");case 4108:return VT(t);case 4126:case 4127:return n==4127?zT(t):UT(t);default:throw new Error("TypedPropertyValue unrecognized type "+a+" "+n)}}function D2(t,a){var r=t.l,n=t.read_shift(4),l=t.read_shift(4),d=[],f=0,h=0,b=-1,g={};for(f=0;f!=l;++f){var w=t.read_shift(4),k=t.read_shift(4);d[f]=[w,k+r]}d.sort(function(F,T){return F[1]-T[1]});var C={};for(f=0;f!=l;++f){if(t.l!==d[f][1]){var S=!0;if(f>0&&a)switch(a[d[f-1][0]].t){case 2:t.l+2===d[f][1]&&(t.l+=2,S=!1);break;case 80:t.l<=d[f][1]&&(t.l=d[f][1],S=!1);break;case 4108:t.l<=d[f][1]&&(t.l=d[f][1],S=!1);break}if((!a||f==0)&&t.l<=d[f][1]&&(S=!1,t.l=d[f][1]),S)throw new Error("Read Error: Expected address "+d[f][1]+" at "+t.l+" :"+f)}if(a){var D=a[d[f][0]];if(C[D.n]=cf(t,D.t,{raw:!0}),D.p==="version"&&(C[D.n]=String(C[D.n]>>16)+"."+("0000"+String(C[D.n]&65535)).slice(-4)),D.n=="CodePage")switch(C[D.n]){case 0:C[D.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:_n(h=C[D.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+C[D.n])}}else if(d[f][0]===1){if(h=C.CodePage=cf(t,jg),_n(h),b!==-1){var A=t.l;t.l=d[b][1],g=T2(t,h),t.l=A}}else if(d[f][0]===0){if(h===0){b=f,t.l=d[f+1][1];continue}g=T2(t,h)}else{var M=g[d[f][0]],I;switch(t[t.l]){case 65:t.l+=4,I=N4(t);break;case 30:t.l+=4,I=Hm(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,I=Hm(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,I=t.read_shift(4,"i");break;case 19:t.l+=4,I=t.read_shift(4);break;case 5:t.l+=4,I=t.read_shift(8,"f");break;case 11:t.l+=4,I=ha(t,4);break;case 64:t.l+=4,I=Va(Cg(t));break;default:throw new Error("unparsed value: "+t[t.l])}C[M]=I}}return t.l=r+n,C}function R2(t,a,r){var n=t.content;if(!n)return{};$a(n,0);var l,d,f,h,b=0;n.chk("feff","Byte Order: "),n.read_shift(2);var g=n.read_shift(4),w=n.read_shift(16);if(w!==pr.utils.consts.HEADER_CLSID&&w!==r)throw new Error("Bad PropertySet CLSID "+w);if(l=n.read_shift(4),l!==1&&l!==2)throw new Error("Unrecognized #Sets: "+l);if(d=n.read_shift(16),h=n.read_shift(4),l===1&&h!==n.l)throw new Error("Length mismatch: "+h+" !== "+n.l);l===2&&(f=n.read_shift(16),b=n.read_shift(4));var k=D2(n,a),C={SystemIdentifier:g};for(var S in k)C[S]=k[S];if(C.FMTID=d,l===1)return C;if(b-n.l==2&&(n.l+=2),n.l!==b)throw new Error("Length mismatch 2: "+n.l+" !== "+b);var D;try{D=D2(n,null)}catch{}for(S in D)C[S]=D[S];return C.FMTID=[d,f],C}function jl(t,a){return t.read_shift(a),null}function YT(t,a,r){for(var n=[],l=t.l+a;t.l<l;)n.push(r(t,l-t.l));if(l!==t.l)throw new Error("Slurp error");return n}function ha(t,a){return t.read_shift(a)===1}function ka(t){return t.read_shift(2,"u")}function k4(t,a){return YT(t,a,ka)}function XT(t){var a=t.read_shift(1),r=t.read_shift(1);return r===1?a:a===1}function md(t,a,r){var n=t.read_shift(r&&r.biff>=12?2:1),l="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var d=t.read_shift(1);d&&(l="dbcs-cont")}else r.biff==12&&(l="wstr");r.biff>=2&&r.biff<=5&&(l="cpstr");var f=n?t.read_shift(n,l):"";return f}function qT(t){var a=t.read_shift(2),r=t.read_shift(1),n=r&4,l=r&8,d=1+(r&1),f=0,h,b={};l&&(f=t.read_shift(2)),n&&(h=t.read_shift(4));var g=d==2?"dbcs-cont":"sbcs-cont",w=a===0?"":t.read_shift(a,g);return l&&(t.l+=4*f),n&&(t.l+=h),b.t=w,l||(b.raw="<t>"+b.t+"</t>",b.r=b.t),b}function wo(t,a,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(a,"cpstr");if(r.biff>=12)return t.read_shift(a,"dbcs-cont")}var l=t.read_shift(1);return l===0?n=t.read_shift(a,"sbcs-cont"):n=t.read_shift(a,"dbcs-cont"),n}function gd(t,a,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):wo(t,n,r)}function _o(t,a,r){if(r.biff>5)return gd(t,a,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function $T(t){var a=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[a,r]}function WT(t){var a=t.read_shift(4),r=t.l,n=!1;a>24&&(t.l+=a-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var l=t.read_shift((n?a-24:a)>>1,"utf16le").replace(ks,"");return n&&(t.l+=24),l}function KT(t){for(var a=t.read_shift(2),r="";a-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var l=t.read_shift(4);if(l===0)return r+n.replace(/\\/g,"/");var d=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var f=t.read_shift(d>>1,"utf16le").replace(ks,"");return r+f}function ZT(t,a){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return WT(t);case"0303000000000000c000000000000046":return KT(t);default:throw new Error("Unsupported Moniker "+r)}}function Iu(t){var a=t.read_shift(4),r=a>0?t.read_shift(a,"utf16le").replace(ks,""):"";return r}function QT(t,a){var r=t.l+a,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var l=t.read_shift(2);t.l+=2;var d,f,h,b,g="",w,k;l&16&&(d=Iu(t,r-t.l)),l&128&&(f=Iu(t,r-t.l)),(l&257)===257&&(h=Iu(t,r-t.l)),(l&257)===1&&(b=ZT(t,r-t.l)),l&8&&(g=Iu(t,r-t.l)),l&32&&(w=t.read_shift(16)),l&64&&(k=Cg(t)),t.l=r;var C=f||h||b||"";C&&g&&(C+="#"+g),C||(C="#"+g),l&2&&C.charAt(0)=="/"&&C.charAt(1)!="/"&&(C="file://"+C);var S={Target:C};return w&&(S.guid=w),k&&(S.time=k),d&&(S.Tooltip=d),S}function j4(t){var a=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),l=t.read_shift(1);return[a,r,n,l]}function C4(t,a){var r=j4(t);return r[3]=0,r}function di(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:a,c:r,ixfe:n}}function JT(t){var a=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:a,flags:r}}function e5(t,a,r){return a===0?"":_o(t,a,r)}function t5(t,a,r){var n=r.biff>8?4:2,l=t.read_shift(n),d=t.read_shift(n,"i"),f=t.read_shift(n,"i");return[l,d,f]}function E4(t){var a=t.read_shift(2),r=kg(t);return[a,r]}function r5(t,a,r){t.l+=4,a-=4;var n=t.l+a,l=md(t,a,r),d=t.read_shift(2);if(n-=t.l,d!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+d);return t.l+=d,l}function Tf(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),l=t.read_shift(2);return{s:{c:n,r:a},e:{c:l,r}}}function S4(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),l=t.read_shift(1);return{s:{c:n,r:a},e:{c:l,r}}}var a5=S4;function A4(t){t.l+=4;var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,a,n]}function s5(t){var a={};return t.l+=4,t.l+=16,a.fSharedNote=t.read_shift(2),t.l+=4,a}function n5(t){var a={};return t.l+=4,t.cf=t.read_shift(2),a}function is(t){t.l+=2,t.l+=t.read_shift(2)}var i5={0:is,4:is,5:is,6:is,7:n5,8:is,9:is,10:is,11:is,12:is,13:s5,14:is,15:is,16:is,17:is,18:is,19:is,20:is,21:A4};function l5(t,a){for(var r=t.l+a,n=[];t.l<r;){var l=t.read_shift(2);t.l-=2;try{n.push(i5[l](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Ou(t,a){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),a-=2,a>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(a>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(a),r}function o5(t,a){return a===0||t.read_shift(2),1200}function c5(t,a,r){if(r.enc)return t.l+=a,"";var n=t.l,l=_o(t,0,r);return t.read_shift(a+n-t.l),l}function d5(t,a,r){var n=r&&r.biff==8||a==2?t.read_shift(2):(t.l+=a,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function u5(t,a,r){var n=t.read_shift(4),l=t.read_shift(1)&3,d=t.read_shift(1);switch(d){case 0:d="Worksheet";break;case 1:d="Macrosheet";break;case 2:d="Chartsheet";break;case 6:d="VBAModule";break}var f=md(t,0,r);return f.length===0&&(f="Sheet1"),{pos:n,hs:l,dt:d,name:f}}function f5(t,a){for(var r=t.l+a,n=t.read_shift(4),l=t.read_shift(4),d=[],f=0;f!=l&&t.l<r;++f)d.push(qT(t));return d.Count=n,d.Unique=l,d}function x5(t,a){var r={};return r.dsst=t.read_shift(2),t.l+=a-2,r}function h5(t){var a={};a.r=t.read_shift(2),a.c=t.read_shift(2),a.cnt=t.read_shift(2)-a.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(a.level=n&7),n&32&&(a.hidden=!0),n&64&&(a.hpt=r/20),a}function m5(t){var a=JT(t);if(a.type!=2211)throw new Error("Invalid Future Record "+a.type);var r=t.read_shift(4);return r!==0}function g5(t){return t.read_shift(2),t.read_shift(4)}function M2(t,a,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var l=t.read_shift(2);r&&r.biff==2&&(n=1-(l>>15),l&=32767);var d={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[d,l]}function p5(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=t.read_shift(2),b=t.read_shift(2),g=t.read_shift(2);return{Pos:[a,r],Dim:[n,l],Flags:d,CurTab:f,FirstTab:h,Selected:b,TabRatio:g}}function y5(t,a,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function b5(){}function v5(t,a,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=md(t,0,r),n}function w5(t){var a=di(t);return a.isst=t.read_shift(4),a}function N5(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+a,l=di(t);r.biff==2&&t.l++;var d=gd(t,n-t.l,r);return l.val=d,l}function k5(t,a,r){var n=t.read_shift(2),l=_o(t,0,r);return[n,l]}var j5=_o;function I2(t,a,r){var n=t.l+a,l=r.biff==8||!r.biff?4:2,d=t.read_shift(l),f=t.read_shift(l),h=t.read_shift(2),b=t.read_shift(2);return t.l=n,{s:{r:d,c:h},e:{r:f,c:b}}}function C5(t){var a=t.read_shift(2),r=t.read_shift(2),n=E4(t);return{r:a,c:r,ixfe:n[0],rknum:n[1]}}function E5(t,a){for(var r=t.l+a-2,n=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(E4(t));if(t.l!==r)throw new Error("MulRK read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulRK length mismatch");return{r:n,c:l,C:f,rkrec:d}}function S5(t,a){for(var r=t.l+a-2,n=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulBlank length mismatch");return{r:n,c:l,C:f,ixfe:d}}function A5(t,a,r,n){var l={},d=t.read_shift(4),f=t.read_shift(4),h=t.read_shift(4),b=t.read_shift(2);return l.patternType=CT[h>>26],n.cellStyles&&(l.alc=d&7,l.fWrap=d>>3&1,l.alcV=d>>4&7,l.fJustLast=d>>7&1,l.trot=d>>8&255,l.cIndent=d>>16&15,l.fShrinkToFit=d>>20&1,l.iReadOrder=d>>22&2,l.fAtrNum=d>>26&1,l.fAtrFnt=d>>27&1,l.fAtrAlc=d>>28&1,l.fAtrBdr=d>>29&1,l.fAtrPat=d>>30&1,l.fAtrProt=d>>31&1,l.dgLeft=f&15,l.dgRight=f>>4&15,l.dgTop=f>>8&15,l.dgBottom=f>>12&15,l.icvLeft=f>>16&127,l.icvRight=f>>23&127,l.grbitDiag=f>>30&3,l.icvTop=h&127,l.icvBottom=h>>7&127,l.icvDiag=h>>14&127,l.dgDiag=h>>21&15,l.icvFore=b&127,l.icvBack=b>>7&127,l.fsxButton=b>>14&1),l}function _5(t,a,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,a-=6,n.data=A5(t,a,n.fStyle,r),n}function T5(t){t.l+=4;var a=[t.read_shift(2),t.read_shift(2)];if(a[0]!==0&&a[0]--,a[1]!==0&&a[1]--,a[0]>7||a[1]>7)throw new Error("Bad Gutters: "+a.join("|"));return a}function O2(t,a,r){var n=di(t);(r.biff==2||a==9)&&++t.l;var l=XT(t);return n.val=l,n.t=l===!0||l===!1?"b":"e",n}function D5(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=di(t),l=cs(t);return n.val=l,n}var F2=e5;function R5(t,a,r){var n=t.l+a,l=t.read_shift(2),d=t.read_shift(2);if(r.sbcch=d,d==1025||d==14849)return[d,l];if(d<1||d>255)throw new Error("Unexpected SupBook type: "+d);for(var f=wo(t,d),h=[];n>t.l;)h.push(gd(t));return[d,l,f,h]}function B2(t,a,r){var n=t.read_shift(2),l,d={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(l=r5(t,a-2,r)),d.body=l||t.read_shift(a-2),typeof l=="string"&&(d.Name=l),d}var M5=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function L2(t,a,r){var n=t.l+a,l=t.read_shift(2),d=t.read_shift(1),f=t.read_shift(1),h=t.read_shift(r&&r.biff==2?1:2),b=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),b=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var g=wo(t,f,r);l&32&&(g=M5[g.charCodeAt(0)]);var w=n-t.l;r&&r.biff==2&&--w;var k=n==t.l||h===0||!(w>0)?[]:h9(t,w,r,h);return{chKey:d,Name:g,itab:b,rgce:k}}function _4(t,a,r){if(r.biff<8)return I5(t,a,r);for(var n=[],l=t.l+a,d=t.read_shift(r.biff>8?4:2);d--!==0;)n.push(t5(t,r.biff>8?12:6,r));if(t.l!=l)throw new Error("Bad ExternSheet: "+t.l+" != "+l);return n}function I5(t,a,r){t[t.l+1]==3&&t[t.l]++;var n=md(t,a,r);return n.charCodeAt(0)==3?n.slice(1):n}function O5(t,a,r){if(r.biff<8){t.l+=a;return}var n=t.read_shift(2),l=t.read_shift(2),d=wo(t,n,r),f=wo(t,l,r);return[d,f]}function F5(t,a,r){var n=S4(t);t.l++;var l=t.read_shift(1);return a-=8,[m9(t,a,r),l,n]}function P2(t,a,r){var n=a5(t);switch(r.biff){case 2:t.l++,a-=7;break;case 3:case 4:t.l+=2,a-=8;break;default:t.l+=6,a-=12}return[n,f9(t,a,r)]}function B5(t){var a=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[a,r,n]}function L5(t,a,r){if(!(r.biff<8)){var n=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=_o(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:l},h,f,d]}}function P5(t,a,r){return L5(t,a,r)}function z5(t,a){for(var r=[],n=t.read_shift(2);n--;)r.push(Tf(t));return r}function U5(t,a,r){if(r&&r.biff<8)return V5(t,a,r);var n=A4(t),l=l5(t,a-22,n[1]);return{cmo:n,ft:l}}var H5={8:function(t,a){var r=t.l+a;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var l=t.read_shift(1);return t.l+=l,t.l=r,{fmt:n}}};function V5(t,a,r){t.l+=4;var n=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,a-=36;var f=[];return f.push((H5[n]||xs)(t,a,r)),{cmo:[l,n,d],ft:f}}function G5(t,a,r){var n=t.l,l="";try{t.l+=4;var d=(r.lastobj||{cmo:[0,0]}).cmo[1],f;[0,5,7,11,12,14].indexOf(d)==-1?t.l+=6:f=$T(t,6,r);var h=t.read_shift(2);t.read_shift(2),ka(t,2);var b=t.read_shift(2);t.l+=b;for(var g=1;g<t.lens.length-1;++g){if(t.l-n!=t.lens[g])throw new Error("TxO: bad continue record");var w=t[t.l],k=wo(t,t.lens[g+1]-t.lens[g]-1);if(l+=k,l.length>=(w?h:2*h))break}if(l.length!==h&&l.length!==h*2)throw new Error("cchText: "+h+" != "+l.length);return t.l=n+a,{t:l}}catch{return t.l=n+a,{t:l}}}function Y5(t,a){var r=Tf(t);t.l+=16;var n=QT(t,a-24);return[r,n]}function X5(t,a){t.read_shift(2);var r=Tf(t),n=t.read_shift((a-10)/2,"dbcs-cont");return n=n.replace(ks,""),[r,n]}function q5(t){var a=[0,0],r;return r=t.read_shift(2),a[0]=A2[r]||r,r=t.read_shift(2),a[1]=A2[r]||r,a}function $5(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(C4(t));return r}function W5(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(C4(t));return r}function K5(t){t.l+=2;var a={cxfs:0,crc:0};return a.cxfs=t.read_shift(2),a.crc=t.read_shift(4),a}function T4(t,a,r){if(!r.cellStyles)return xs(t,a);var n=r&&r.biff>=12?4:2,l=t.read_shift(n),d=t.read_shift(n),f=t.read_shift(n),h=t.read_shift(n),b=t.read_shift(2);n==2&&(t.l+=2);var g={s:l,e:d,w:f,ixfe:h,flags:b};return(r.biff>=5||!r.biff)&&(g.level=b>>8&7),g}function Z5(t,a){var r={};return a<32||(t.l+=16,r.header=cs(t),r.footer=cs(t),t.l+=2),r}function Q5(t,a,r){var n={area:!1};if(r.biff!=5)return t.l+=a,n;var l=t.read_shift(1);return t.l+=3,l&16&&(n.area=!0),n}var J5=di,e7=k4,t7=gd;function r7(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),l={fmt:a,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,l}function a7(t,a,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=di(t);++t.l;var l=_o(t,a-7,r);return n.t="str",n.val=l,n}function s7(t){var a=di(t);++t.l;var r=cs(t);return a.t="n",a.val=r,a}function n7(t){var a=di(t);++t.l;var r=t.read_shift(2);return a.t="n",a.val=r,a}function i7(t){var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,"sbcs-cont")}function l7(t,a){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=a-13}function o7(t,a,r){var n=t.l+a,l=di(t),d=t.read_shift(2),f=wo(t,d,r);return t.l=n,l.t="str",l.val=f,l}var c7=[2,3,48,49,131,139,140,245],z2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},a=hg({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,b){var g=[],w=Dl(1);switch(b.type){case"base64":w=An(Js(h));break;case"binary":w=An(h);break;case"buffer":case"array":w=h;break}$a(w,0);var k=w.read_shift(1),C=!!(k&136),S=!1,D=!1;switch(k){case 2:break;case 3:break;case 48:S=!0,C=!0;break;case 49:S=!0,C=!0;break;case 131:break;case 139:break;case 140:D=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+k.toString(16))}var A=0,M=521;k==2&&(A=w.read_shift(2)),w.l+=3,k!=2&&(A=w.read_shift(4)),A>1048576&&(A=1e6),k!=2&&(M=w.read_shift(2));var I=w.read_shift(2),F=b.codepage||1252;k!=2&&(w.l+=16,w.read_shift(1),w[w.l]!==0&&(F=t[w[w.l]]),w.l+=1,w.l+=2),D&&(w.l+=36);for(var T=[],B={},H=Math.min(w.length,k==2?521:M-10-(S?264:0)),U=D?32:11;w.l<H&&w[w.l]!=13;)switch(B={},B.name=W0.utils.decode(F,w.slice(w.l,w.l+U)).replace(/[\u0000\r\n].*$/g,""),w.l+=U,B.type=String.fromCharCode(w.read_shift(1)),k!=2&&!D&&(B.offset=w.read_shift(4)),B.len=w.read_shift(1),k==2&&(B.offset=w.read_shift(2)),B.dec=w.read_shift(1),B.name.length&&T.push(B),k!=2&&(w.l+=D?13:14),B.type){case"B":(!S||B.len!=8)&&b.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":b.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(w[w.l]!==13&&(w.l=M-1),w.read_shift(1)!==13)throw new Error("DBF Terminator not found "+w.l+" "+w[w.l]);w.l=M;var L=0,P=0;for(g[0]=[],P=0;P!=T.length;++P)g[0][P]=T[P].name;for(;A-- >0;){if(w[w.l]===42){w.l+=I;continue}for(++w.l,g[++L]=[],P=0,P=0;P!=T.length;++P){var z=w.slice(w.l,w.l+T[P].len);w.l+=T[P].len,$a(z,0);var W=W0.utils.decode(F,z);switch(T[P].type){case"C":W.trim().length&&(g[L][P]=W.replace(/\s+$/,""));break;case"D":W.length===8?g[L][P]=new Date(+W.slice(0,4),+W.slice(4,6)-1,+W.slice(6,8)):g[L][P]=W;break;case"F":g[L][P]=parseFloat(W.trim());break;case"+":case"I":g[L][P]=D?z.read_shift(-4,"i")^2147483648:z.read_shift(4,"i");break;case"L":switch(W.trim().toUpperCase()){case"Y":case"T":g[L][P]=!0;break;case"N":case"F":g[L][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+W+"|")}break;case"M":if(!C)throw new Error("DBF Unexpected MEMO for type "+k.toString(16));g[L][P]="##MEMO##"+(D?parseInt(W.trim(),10):z.read_shift(4));break;case"N":W=W.replace(/\u0000/g,"").trim(),W&&W!="."&&(g[L][P]=+W||0);break;case"@":g[L][P]=new Date(z.read_shift(-8,"f")-621356832e5);break;case"T":g[L][P]=new Date((z.read_shift(4)-2440588)*864e5+z.read_shift(4));break;case"Y":g[L][P]=z.read_shift(4,"i")/1e4+z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":g[L][P]=-z.read_shift(-8,"f");break;case"B":if(S&&T[P].len==8){g[L][P]=z.read_shift(8,"f");break}case"G":case"P":z.l+=T[P].len;break;case"0":if(T[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[P].type)}}}if(k!=2&&w.l<w.length&&w[w.l++]!=26)throw new Error("DBF EOF Marker missing "+(w.l-1)+" of "+w.length+" "+w[w.l-1].toString(16));return b&&b.sheetRows&&(g=g.slice(0,b.sheetRows)),b.DBF=T,g}function n(h,b){var g=b||{};g.dateNF||(g.dateNF="yyyymmdd");var w=Ic(r(h,g),g);return w["!cols"]=g.DBF.map(function(k){return{wch:k.len,DBF:k}}),delete g.DBF,w}function l(h,b){try{return Il(n(h,b),b)}catch(g){if(b&&b.WTF)throw g}return{SheetNames:[],Sheets:{}}}var d={B:8,C:250,L:1,D:8,"?":0,"":0};function f(h,b){var g=b||{};if(+g.codepage>=0&&_n(+g.codepage),g.type=="string")throw new Error("Cannot write DBF to JS string");var w=Pm(),k=Wm(h,{header:1,raw:!0,cellDates:!0}),C=k[0],S=k.slice(1),D=h["!cols"]||[],A=0,M=0,I=0,F=1;for(A=0;A<C.length;++A){if(((D[A]||{}).DBF||{}).name){C[A]=D[A].DBF.name,++I;continue}if(C[A]!=null){if(++I,typeof C[A]=="number"&&(C[A]=C[A].toString(10)),typeof C[A]!="string")throw new Error("DBF Invalid column name "+C[A]+" |"+typeof C[A]+"|");if(C.indexOf(C[A])!==A){for(M=0;M<1024;++M)if(C.indexOf(C[A]+"_"+M)==-1){C[A]+="_"+M;break}}}}var T=la(h["!ref"]),B=[],H=[],U=[];for(A=0;A<=T.e.c-T.s.c;++A){var L="",P="",z=0,W=[];for(M=0;M<S.length;++M)S[M][A]!=null&&W.push(S[M][A]);if(W.length==0||C[A]==null){B[A]="?";continue}for(M=0;M<W.length;++M){switch(typeof W[M]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=W[M]instanceof Date?"D":"C";break;default:P="C"}z=Math.max(z,String(W[M]).length),L=L&&L!=P?"C":P}z>250&&(z=250),P=((D[A]||{}).DBF||{}).type,P=="C"&&D[A].DBF.len>z&&(z=D[A].DBF.len),L=="B"&&P=="N"&&(L="N",U[A]=D[A].DBF.dec,z=D[A].DBF.len),H[A]=L=="C"||P=="N"?z:d[L]||0,F+=H[A],B[A]=L}var ee=w.next(32);for(ee.write_shift(4,318902576),ee.write_shift(4,S.length),ee.write_shift(2,296+32*I),ee.write_shift(2,F),A=0;A<4;++A)ee.write_shift(4,0);for(ee.write_shift(4,0|(+a[_w]||3)<<8),A=0,M=0;A<C.length;++A)if(C[A]!=null){var G=w.next(32),ne=(C[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,ne,"sbcs"),G.write_shift(1,B[A]=="?"?"C":B[A],"sbcs"),G.write_shift(4,M),G.write_shift(1,H[A]||d[B[A]]||0),G.write_shift(1,U[A]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),M+=H[A]||d[B[A]]||0}var le=w.next(264);for(le.write_shift(4,13),A=0;A<65;++A)le.write_shift(4,0);for(A=0;A<S.length;++A){var Y=w.next(F);for(Y.write_shift(1,0),M=0;M<C.length;++M)if(C[M]!=null)switch(B[M]){case"L":Y.write_shift(1,S[A][M]==null?63:S[A][M]?84:70);break;case"B":Y.write_shift(8,S[A][M]||0,"f");break;case"N":var X="0";for(typeof S[A][M]=="number"&&(X=S[A][M].toFixed(U[M]||0)),I=0;I<H[M]-X.length;++I)Y.write_shift(1,32);Y.write_shift(1,X,"sbcs");break;case"D":S[A][M]?(Y.write_shift(4,("0000"+S[A][M].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(S[A][M].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+S[A][M].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var de=String(S[A][M]!=null?S[A][M]:"").slice(0,H[M]);for(Y.write_shift(1,de,"sbcs"),I=0;I<H[M]-de.length;++I)Y.write_shift(1,32);break}}return w.next(1).write_shift(1,26),w.end()}return{to_workbook:l,to_sheet:n,from_sheet:f}}(),d7=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},a=new RegExp("\x1BN("+ii(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(C,S){var D=t[S];return typeof D=="number"?r2(D):D},n=function(C,S,D){var A=S.charCodeAt(0)-32<<4|D.charCodeAt(0)-48;return A==59?C:r2(A)};t["|"]=254;function l(C,S){switch(S.type){case"base64":return d(Js(C),S);case"binary":return d(C,S);case"buffer":return d(fr&&Buffer.isBuffer(C)?C.toString("binary"):Co(C),S);case"array":return d(vo(C),S)}throw new Error("Unrecognized type "+S.type)}function d(C,S){var D=C.split(/[\n\r]+/),A=-1,M=-1,I=0,F=0,T=[],B=[],H=null,U={},L=[],P=[],z=[],W=0,ee;for(+S.codepage>=0&&_n(+S.codepage);I!==D.length;++I){W=0;var G=D[I].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(a,r),ne=G.replace(/;;/g,"\0").split(";").map(function(re){return re.replace(/\u0000/g,";")}),le=ne[0],Y;if(G.length>0)switch(le){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ne[1].charAt(0)=="P"&&B.push(G.slice(3).replace(/;;/g,";"));break;case"C":var X=!1,de=!1,ye=!1,oe=!1,xe=-1,ae=-1;for(F=1;F<ne.length;++F)switch(ne[F].charAt(0)){case"A":break;case"X":M=parseInt(ne[F].slice(1))-1,de=!0;break;case"Y":for(A=parseInt(ne[F].slice(1))-1,de||(M=0),ee=T.length;ee<=A;++ee)T[ee]=[];break;case"K":Y=ne[F].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(Dn(Y))?isNaN(jc(Y).getDate())||(Y=Va(Y)):(Y=Dn(Y),H!==null&&Rc(H)&&(Y=_f(Y))),X=!0;break;case"E":oe=!0;var q=bc(ne[F].slice(1),{r:A,c:M});T[A][M]=[T[A][M],q];break;case"S":ye=!0,T[A][M]=[T[A][M],"S5S"];break;case"G":break;case"R":xe=parseInt(ne[F].slice(1))-1;break;case"C":ae=parseInt(ne[F].slice(1))-1;break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+G)}if(X&&(T[A][M]&&T[A][M].length==2?T[A][M][0]=Y:T[A][M]=Y,H=null),ye){if(oe)throw new Error("SYLK shared formula cannot have own formula");var K=xe>-1&&T[xe][ae];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");T[A][M][1]=z4(K[1],{r:A-xe,c:M-ae})}break;case"F":var se=0;for(F=1;F<ne.length;++F)switch(ne[F].charAt(0)){case"X":M=parseInt(ne[F].slice(1))-1,++se;break;case"Y":for(A=parseInt(ne[F].slice(1))-1,ee=T.length;ee<=A;++ee)T[ee]=[];break;case"M":W=parseInt(ne[F].slice(1))/20;break;case"F":break;case"G":break;case"P":H=B[parseInt(ne[F].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(z=ne[F].slice(1).split(" "),ee=parseInt(z[0],10);ee<=parseInt(z[1],10);++ee)W=parseInt(z[2],10),P[ee-1]=W===0?{hidden:!0}:{wch:W},Cc(P[ee-1]);break;case"C":M=parseInt(ne[F].slice(1))-1,P[M]||(P[M]={});break;case"R":A=parseInt(ne[F].slice(1))-1,L[A]||(L[A]={}),W>0?(L[A].hpt=W,L[A].hpx=td(W)):W===0&&(L[A].hidden=!0);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+G)}se<1&&(H=null);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+G)}}return L.length>0&&(U["!rows"]=L),P.length>0&&(U["!cols"]=P),S&&S.sheetRows&&(T=T.slice(0,S.sheetRows)),[T,U]}function f(C,S){var D=l(C,S),A=D[0],M=D[1],I=Ic(A,S);return ii(M).forEach(function(F){I[F]=M[F]}),I}function h(C,S){return Il(f(C,S),S)}function b(C,S,D,A){var M="C;Y"+(D+1)+";X"+(A+1)+";K";switch(C.t){case"n":M+=C.v||0,C.f&&!C.F&&(M+=";E"+KD(C.f,{r:D,c:A}));break;case"b":M+=C.v?"TRUE":"FALSE";break;case"e":M+=C.w||C.v;break;case"d":M+='"'+(C.w||C.v)+'"';break;case"s":M+='"'+C.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return M}function g(C,S){S.forEach(function(D,A){var M="F;W"+(A+1)+" "+(A+1)+" ";D.hidden?M+="0":(typeof D.width=="number"&&!D.wpx&&(D.wpx=uf(D.width)),typeof D.wpx=="number"&&!D.wch&&(D.wch=ff(D.wpx)),typeof D.wch=="number"&&(M+=Math.round(D.wch))),M.charAt(M.length-1)!=" "&&C.push(M)})}function w(C,S){S.forEach(function(D,A){var M="F;";D.hidden?M+="M0;":D.hpt?M+="M"+20*D.hpt+";":D.hpx&&(M+="M"+20*B4(D.hpx)+";"),M.length>2&&C.push(M+"R"+(A+1))})}function k(C,S){var D=["ID;PWXL;N;E"],A=[],M=la(C["!ref"]),I,F=Array.isArray(C),T=`\r
`;D.push("P;PGeneral"),D.push("F;P0;DG0G8;M255"),C["!cols"]&&g(D,C["!cols"]),C["!rows"]&&w(D,C["!rows"]),D.push("B;Y"+(M.e.r-M.s.r+1)+";X"+(M.e.c-M.s.c+1)+";D"+[M.s.c,M.s.r,M.e.c,M.e.r].join(" "));for(var B=M.s.r;B<=M.e.r;++B)for(var H=M.s.c;H<=M.e.c;++H){var U=Zt({r:B,c:H});I=F?(C[B]||[])[H]:C[U],!(!I||I.v==null&&(!I.f||I.F))&&A.push(b(I,C,B,H))}return D.join(T)+T+A.join(T)+T+"E"+T}return{to_workbook:h,to_sheet:f,from_sheet:k}}(),u7=function(){function t(d,f){switch(f.type){case"base64":return a(Js(d),f);case"binary":return a(d,f);case"buffer":return a(fr&&Buffer.isBuffer(d)?d.toString("binary"):Co(d),f);case"array":return a(vo(d),f)}throw new Error("Unrecognized type "+f.type)}function a(d,f){for(var h=d.split(`
`),b=-1,g=-1,w=0,k=[];w!==h.length;++w){if(h[w].trim()==="BOT"){k[++b]=[],g=0;continue}if(!(b<0)){var C=h[w].trim().split(","),S=C[0],D=C[1];++w;for(var A=h[w]||"";(A.match(/["]/g)||[]).length&1&&w<h.length-1;)A+=`
`+h[++w];switch(A=A.trim(),+S){case-1:if(A==="BOT"){k[++b]=[],g=0;continue}else if(A!=="EOD")throw new Error("Unrecognized DIF special command "+A);break;case 0:A==="TRUE"?k[b][g]=!0:A==="FALSE"?k[b][g]=!1:isNaN(Dn(D))?isNaN(jc(D).getDate())?k[b][g]=D:k[b][g]=Va(D):k[b][g]=Dn(D),++g;break;case 1:A=A.slice(1,A.length-1),A=A.replace(/""/g,'"'),A&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),k[b][g++]=A!==""?A:null;break}if(A==="EOD")break}}return f&&f.sheetRows&&(k=k.slice(0,f.sheetRows)),k}function r(d,f){return Ic(t(d,f),f)}function n(d,f){return Il(r(d,f),f)}var l=function(){var d=function(b,g,w,k,C){b.push(g),b.push(w+","+k),b.push('"'+C.replace(/"/g,'""')+'"')},f=function(b,g,w,k){b.push(g+","+w),b.push(g==1?'"'+k.replace(/"/g,'""')+'"':k)};return function(b){var g=[],w=la(b["!ref"]),k,C=Array.isArray(b);d(g,"TABLE",0,1,"sheetjs"),d(g,"VECTORS",0,w.e.r-w.s.r+1,""),d(g,"TUPLES",0,w.e.c-w.s.c+1,""),d(g,"DATA",0,0,"");for(var S=w.s.r;S<=w.e.r;++S){f(g,-1,0,"BOT");for(var D=w.s.c;D<=w.e.c;++D){var A=Zt({r:S,c:D});if(k=C?(b[S]||[])[D]:b[A],!k){f(g,1,0,"");continue}switch(k.t){case"n":var M=k.w;!M&&k.v!=null&&(M=k.v),M==null?k.f&&!k.F?f(g,1,0,"="+k.f):f(g,1,0,""):f(g,0,M,"V");break;case"b":f(g,0,k.v?1:0,k.v?"TRUE":"FALSE");break;case"s":f(g,1,0,isNaN(k.v)?k.v:'="'+k.v+'"');break;case"d":k.w||(k.w=mn(k.z||tr[14],Cs(Va(k.v)))),f(g,0,k.w,"V");break;default:f(g,1,0,"")}}}f(g,-1,0,"EOD");var I=`\r
`,F=g.join(I);return F}}();return{to_workbook:n,to_sheet:r,from_sheet:l}}(),f7=function(){function t(k){return k.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function a(k){return k.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(k,C){for(var S=k.split(`
`),D=-1,A=-1,M=0,I=[];M!==S.length;++M){var F=S[M].trim().split(":");if(F[0]==="cell"){var T=Ns(F[1]);if(I.length<=T.r)for(D=I.length;D<=T.r;++D)I[D]||(I[D]=[]);switch(D=T.r,A=T.c,F[2]){case"t":I[D][A]=t(F[3]);break;case"v":I[D][A]=+F[3];break;case"vtf":var B=F[F.length-1];case"vtc":switch(F[3]){case"nl":I[D][A]=!!+F[4];break;default:I[D][A]=+F[4];break}F[2]=="vtf"&&(I[D][A]=[I[D][A],B])}}}return C&&C.sheetRows&&(I=I.slice(0,C.sheetRows)),I}function n(k,C){return Ic(r(k,C),C)}function l(k,C){return Il(n(k,C),C)}var d=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),f=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),b="--SocialCalcSpreadsheetControlSave--";function g(k){if(!k||!k["!ref"])return"";for(var C=[],S=[],D,A="",M=Mc(k["!ref"]),I=Array.isArray(k),F=M.s.r;F<=M.e.r;++F)for(var T=M.s.c;T<=M.e.c;++T)if(A=Zt({r:F,c:T}),D=I?(k[F]||[])[T]:k[A],!(!D||D.v==null||D.t==="z")){switch(S=["cell",A,"t"],D.t){case"s":case"str":S.push(a(D.v));break;case"n":D.f?(S[2]="vtf",S[3]="n",S[4]=D.v,S[5]=a(D.f)):(S[2]="v",S[3]=D.v);break;case"b":S[2]="vt"+(D.f?"f":"c"),S[3]="nl",S[4]=D.v?"1":"0",S[5]=a(D.f||(D.v?"TRUE":"FALSE"));break;case"d":var B=Cs(Va(D.v));S[2]="vtc",S[3]="nd",S[4]=""+B,S[5]=D.w||mn(D.z||tr[14],B);break;case"e":continue}C.push(S.join(":"))}return C.push("sheet:c:"+(M.e.c-M.s.c+1)+":r:"+(M.e.r-M.s.r+1)+":tvf:1"),C.push("valueformat:1:text-wiki"),C.join(`
`)}function w(k){return[d,f,h,f,g(k),b].join(`
`)}return{to_workbook:l,to_sheet:n,from_sheet:w}}(),J0=function(){function t(w,k,C,S,D){D.raw?k[C][S]=w:w===""||(w==="TRUE"?k[C][S]=!0:w==="FALSE"?k[C][S]=!1:isNaN(Dn(w))?isNaN(jc(w).getDate())?k[C][S]=w:k[C][S]=Va(w):k[C][S]=Dn(w))}function a(w,k){var C=k||{},S=[];if(!w||w.length===0)return S;for(var D=w.split(/[\r\n]/),A=D.length-1;A>=0&&D[A].length===0;)--A;for(var M=10,I=0,F=0;F<=A;++F)I=D[F].indexOf(" "),I==-1?I=D[F].length:I++,M=Math.max(M,I);for(F=0;F<=A;++F){S[F]=[];var T=0;for(t(D[F].slice(0,M).trim(),S,F,T,C),T=1;T<=(D[F].length-M)/10+1;++T)t(D[F].slice(M+(T-1)*10,M+T*10).trim(),S,F,T,C)}return C.sheetRows&&(S=S.slice(0,C.sheetRows)),S}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function l(w){for(var k={},C=!1,S=0,D=0;S<w.length;++S)(D=w.charCodeAt(S))==34?C=!C:!C&&D in r&&(k[D]=(k[D]||0)+1);D=[];for(S in k)Object.prototype.hasOwnProperty.call(k,S)&&D.push([k[S],S]);if(!D.length){k=n;for(S in k)Object.prototype.hasOwnProperty.call(k,S)&&D.push([k[S],S])}return D.sort(function(A,M){return A[0]-M[0]||n[A[1]]-n[M[1]]}),r[D.pop()[1]]||44}function d(w,k){var C=k||{},S="",D=C.dense?[]:{},A={s:{c:0,r:0},e:{c:0,r:0}};w.slice(0,4)=="sep="?w.charCodeAt(5)==13&&w.charCodeAt(6)==10?(S=w.charAt(4),w=w.slice(7)):w.charCodeAt(5)==13||w.charCodeAt(5)==10?(S=w.charAt(4),w=w.slice(6)):S=l(w.slice(0,1024)):C&&C.FS?S=C.FS:S=l(w.slice(0,1024));var M=0,I=0,F=0,T=0,B=0,H=S.charCodeAt(0),U=!1,L=0,P=w.charCodeAt(0);w=w.replace(/\r\n/mg,`
`);var z=C.dateNF!=null?k8(C.dateNF):null;function W(){var ee=w.slice(T,B),G={};if(ee.charAt(0)=='"'&&ee.charAt(ee.length-1)=='"'&&(ee=ee.slice(1,-1).replace(/""/g,'"')),ee.length===0)G.t="z";else if(C.raw)G.t="s",G.v=ee;else if(ee.trim().length===0)G.t="s",G.v=ee;else if(ee.charCodeAt(0)==61)ee.charCodeAt(1)==34&&ee.charCodeAt(ee.length-1)==34?(G.t="s",G.v=ee.slice(2,-1).replace(/""/g,'"')):QD(ee)?(G.t="n",G.f=ee.slice(1)):(G.t="s",G.v=ee);else if(ee=="TRUE")G.t="b",G.v=!0;else if(ee=="FALSE")G.t="b",G.v=!1;else if(!isNaN(F=Dn(ee)))G.t="n",C.cellText!==!1&&(G.w=ee),G.v=F;else if(!isNaN(jc(ee).getDate())||z&&ee.match(z)){G.z=C.dateNF||tr[14];var ne=0;z&&ee.match(z)&&(ee=j8(ee,C.dateNF,ee.match(z)||[]),ne=1),C.cellDates?(G.t="d",G.v=Va(ee,ne)):(G.t="n",G.v=Cs(Va(ee,ne))),C.cellText!==!1&&(G.w=mn(G.z,G.v instanceof Date?Cs(G.v):G.v)),C.cellNF||delete G.z}else G.t="s",G.v=ee;if(G.t=="z"||(C.dense?(D[M]||(D[M]=[]),D[M][I]=G):D[Zt({c:I,r:M})]=G),T=B+1,P=w.charCodeAt(T),A.e.c<I&&(A.e.c=I),A.e.r<M&&(A.e.r=M),L==H)++I;else if(I=0,++M,C.sheetRows&&C.sheetRows<=M)return!0}e:for(;B<w.length;++B)switch(L=w.charCodeAt(B)){case 34:P===34&&(U=!U);break;case H:case 10:case 13:if(!U&&W())break e;break}return B-T>0&&W(),D["!ref"]=yr(A),D}function f(w,k){return!(k&&k.PRN)||k.FS||w.slice(0,4)=="sep="||w.indexOf("	")>=0||w.indexOf(",")>=0||w.indexOf(";")>=0?d(w,k):Ic(a(w,k),k)}function h(w,k){var C="",S=k.type=="string"?[0,0,0,0]:Mg(w,k);switch(k.type){case"base64":C=Js(w);break;case"binary":C=w;break;case"buffer":k.codepage==65001?C=w.toString("utf8"):k.codepage&&typeof W0<"u"||(C=fr&&Buffer.isBuffer(w)?w.toString("binary"):Co(w));break;case"array":C=vo(w);break;case"string":C=w;break;default:throw new Error("Unrecognized type "+k.type)}return S[0]==239&&S[1]==187&&S[2]==191?C=Ur(C.slice(3)):k.type!="string"&&k.type!="buffer"&&k.codepage==65001?C=Ur(C):k.type=="binary"&&typeof W0<"u",C.slice(0,19)=="socialcalc:version:"?f7.to_sheet(k.type=="string"?C:Ur(C),k):f(C,k)}function b(w,k){return Il(h(w,k),k)}function g(w){for(var k=[],C=la(w["!ref"]),S,D=Array.isArray(w),A=C.s.r;A<=C.e.r;++A){for(var M=[],I=C.s.c;I<=C.e.c;++I){var F=Zt({r:A,c:I});if(S=D?(w[A]||[])[I]:w[F],!S||S.v==null){M.push("          ");continue}for(var T=(S.w||(Ui(S),S.w)||"").slice(0,10);T.length<10;)T+=" ";M.push(T+(I===0?" ":""))}k.push(M.join(""))}return k.join(`
`)}return{to_workbook:b,to_sheet:h,from_sheet:g}}();function x7(t,a){var r=a||{},n=!!r.WTF;r.WTF=!0;try{var l=d7.to_workbook(t,r);return r.WTF=n,l}catch(d){if(r.WTF=n,!d.message.match(/SYLK bad record ID/)&&n)throw d;return J0.to_workbook(t,a)}}var P0=function(){function t(q,K,se){if(q){$a(q,q.l||0);for(var re=se.Enum||xe;q.l<q.length;){var te=q.read_shift(2),Re=re[te]||re[65535],ke=q.read_shift(2),Ve=q.l+ke,Oe=Re.f&&Re.f(q,ke,se);if(q.l=Ve,K(Oe,Re,te))return}}}function a(q,K){switch(K.type){case"base64":return r(An(Js(q)),K);case"binary":return r(An(q),K);case"buffer":case"array":return r(q,K)}throw"Unsupported type "+K.type}function r(q,K){if(!q)return q;var se=K||{},re=se.dense?[]:{},te="Sheet1",Re="",ke=0,Ve={},Oe=[],et=[],be={s:{r:0,c:0},e:{r:0,c:0}},Ae=se.sheetRows||0;if(q[2]==0&&(q[3]==8||q[3]==9)&&q.length>=16&&q[14]==5&&q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(q[2]==2)se.Enum=xe,t(q,function(ve,Le,fe){switch(fe){case 0:se.vers=ve,ve>=4096&&(se.qpro=!0);break;case 6:be=ve;break;case 204:ve&&(Re=ve);break;case 222:Re=ve;break;case 15:case 51:se.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:fe==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=se.dateNF||tr[14],se.cellDates&&(ve[1].t="d",ve[1].v=_f(ve[1].v))),se.qpro&&ve[3]>ke&&(re["!ref"]=yr(be),Ve[te]=re,Oe.push(te),re=se.dense?[]:{},be={s:{r:0,c:0},e:{r:0,c:0}},ke=ve[3],te=Re||"Sheet"+(ke+1),Re="");var st=se.dense?(re[ve[0].r]||[])[ve[0].c]:re[Zt(ve[0])];if(st){st.t=ve[1].t,st.v=ve[1].v,ve[1].z!=null&&(st.z=ve[1].z),ve[1].f!=null&&(st.f=ve[1].f);break}se.dense?(re[ve[0].r]||(re[ve[0].r]=[]),re[ve[0].r][ve[0].c]=ve[1]):re[Zt(ve[0])]=ve[1];break}},se);else if(q[2]==26||q[2]==14)se.Enum=ae,q[2]==14&&(se.qpro=!0,q.l=0),t(q,function(ve,Le,fe){switch(fe){case 204:te=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>ke&&(re["!ref"]=yr(be),Ve[te]=re,Oe.push(te),re=se.dense?[]:{},be={s:{r:0,c:0},e:{r:0,c:0}},ke=ve[3],te="Sheet"+(ke+1)),Ae>0&&ve[0].r>=Ae)break;se.dense?(re[ve[0].r]||(re[ve[0].r]=[]),re[ve[0].r][ve[0].c]=ve[1]):re[Zt(ve[0])]=ve[1],be.e.c<ve[0].c&&(be.e.c=ve[0].c),be.e.r<ve[0].r&&(be.e.r=ve[0].r);break;case 27:ve[14e3]&&(et[ve[14e3][0]]=ve[14e3][1]);break;case 1537:et[ve[0]]=ve[1],ve[0]==ke&&(te=ve[1]);break}},se);else throw new Error("Unrecognized LOTUS BOF "+q[2]);if(re["!ref"]=yr(be),Ve[Re||te]=re,Oe.push(Re||te),!et.length)return{SheetNames:Oe,Sheets:Ve};for(var Fe={},Ce=[],Je=0;Je<et.length;++Je)Ve[Oe[Je]]?(Ce.push(et[Je]||Oe[Je]),Fe[et[Je]]=Ve[et[Je]]||Ve[Oe[Je]]):(Ce.push(et[Je]),Fe[et[Je]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:Fe}}function n(q,K){var se=K||{};if(+se.codepage>=0&&_n(+se.codepage),se.type=="string")throw new Error("Cannot write WK1 to JS string");var re=Pm(),te=la(q["!ref"]),Re=Array.isArray(q),ke=[];En(re,0,d(1030)),En(re,6,b(te));for(var Ve=Math.min(te.e.r,8191),Oe=te.s.r;Oe<=Ve;++Oe)for(var et=Ka(Oe),be=te.s.c;be<=te.e.c;++be){Oe===te.s.r&&(ke[be]=Fa(be));var Ae=ke[be]+et,Fe=Re?(q[Oe]||[])[be]:q[Ae];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")(Fe.v|0)==Fe.v&&Fe.v>=-32768&&Fe.v<=32767?En(re,13,S(Oe,be,Fe.v)):En(re,14,A(Oe,be,Fe.v));else{var Ce=Ui(Fe);En(re,15,k(Oe,be,Ce.slice(0,239)))}}return En(re,1),re.end()}function l(q,K){var se=K||{};if(+se.codepage>=0&&_n(+se.codepage),se.type=="string")throw new Error("Cannot write WK3 to JS string");var re=Pm();En(re,0,f(q));for(var te=0,Re=0;te<q.SheetNames.length;++te)(q.Sheets[q.SheetNames[te]]||{})["!ref"]&&En(re,27,oe(q.SheetNames[te],Re++));var ke=0;for(te=0;te<q.SheetNames.length;++te){var Ve=q.Sheets[q.SheetNames[te]];if(!(!Ve||!Ve["!ref"])){for(var Oe=la(Ve["!ref"]),et=Array.isArray(Ve),be=[],Ae=Math.min(Oe.e.r,8191),Fe=Oe.s.r;Fe<=Ae;++Fe)for(var Ce=Ka(Fe),Je=Oe.s.c;Je<=Oe.e.c;++Je){Fe===Oe.s.r&&(be[Je]=Fa(Je));var ve=be[Je]+Ce,Le=et?(Ve[Fe]||[])[Je]:Ve[ve];if(!(!Le||Le.t=="z"))if(Le.t=="n")En(re,23,W(Fe,Je,ke,Le.v));else{var fe=Ui(Le);En(re,22,L(Fe,Je,ke,fe.slice(0,239)))}}++ke}}return En(re,1),re.end()}function d(q){var K=Ia(2);return K.write_shift(2,q),K}function f(q){var K=Ia(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var se=0,re=0,te=0,Re=0;Re<q.SheetNames.length;++Re){var ke=q.SheetNames[Re],Ve=q.Sheets[ke];if(!(!Ve||!Ve["!ref"])){++te;var Oe=Mc(Ve["!ref"]);se<Oe.e.r&&(se=Oe.e.r),re<Oe.e.c&&(re=Oe.e.c)}}return se>8191&&(se=8191),K.write_shift(2,se),K.write_shift(1,te),K.write_shift(1,re),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function h(q,K,se){var re={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&se.qpro?(re.s.c=q.read_shift(1),q.l++,re.s.r=q.read_shift(2),re.e.c=q.read_shift(1),q.l++,re.e.r=q.read_shift(2),re):(re.s.c=q.read_shift(2),re.s.r=q.read_shift(2),K==12&&se.qpro&&(q.l+=2),re.e.c=q.read_shift(2),re.e.r=q.read_shift(2),K==12&&se.qpro&&(q.l+=2),re.s.c==65535&&(re.s.c=re.e.c=re.s.r=re.e.r=0),re)}function b(q){var K=Ia(8);return K.write_shift(2,q.s.c),K.write_shift(2,q.s.r),K.write_shift(2,q.e.c),K.write_shift(2,q.e.r),K}function g(q,K,se){var re=[{c:0,r:0},{t:"n",v:0},0,0];return se.qpro&&se.vers!=20768?(re[0].c=q.read_shift(1),re[3]=q.read_shift(1),re[0].r=q.read_shift(2),q.l+=2):(re[2]=q.read_shift(1),re[0].c=q.read_shift(2),re[0].r=q.read_shift(2)),re}function w(q,K,se){var re=q.l+K,te=g(q,K,se);if(te[1].t="s",se.vers==20768){q.l++;var Re=q.read_shift(1);return te[1].v=q.read_shift(Re,"utf8"),te}return se.qpro&&q.l++,te[1].v=q.read_shift(re-q.l,"cstr"),te}function k(q,K,se){var re=Ia(7+se.length);re.write_shift(1,255),re.write_shift(2,K),re.write_shift(2,q),re.write_shift(1,39);for(var te=0;te<re.length;++te){var Re=se.charCodeAt(te);re.write_shift(1,Re>=128?95:Re)}return re.write_shift(1,0),re}function C(q,K,se){var re=g(q,K,se);return re[1].v=q.read_shift(2,"i"),re}function S(q,K,se){var re=Ia(7);return re.write_shift(1,255),re.write_shift(2,K),re.write_shift(2,q),re.write_shift(2,se,"i"),re}function D(q,K,se){var re=g(q,K,se);return re[1].v=q.read_shift(8,"f"),re}function A(q,K,se){var re=Ia(13);return re.write_shift(1,255),re.write_shift(2,K),re.write_shift(2,q),re.write_shift(8,se,"f"),re}function M(q,K,se){var re=q.l+K,te=g(q,K,se);if(te[1].v=q.read_shift(8,"f"),se.qpro)q.l=re;else{var Re=q.read_shift(2);B(q.slice(q.l,q.l+Re),te),q.l+=Re}return te}function I(q,K,se){var re=K&32768;return K&=-32769,K=(re?q:0)+(K>=8192?K-16384:K),(re?"":"$")+(se?Fa(K):Ka(K))}var F={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(q,K){$a(q,0);for(var se=[],re=0,te="",Re="",ke="",Ve="";q.l<q.length;){var Oe=q[q.l++];switch(Oe){case 0:se.push(q.read_shift(8,"f"));break;case 1:Re=I(K[0].c,q.read_shift(2),!0),te=I(K[0].r,q.read_shift(2),!1),se.push(Re+te);break;case 2:{var et=I(K[0].c,q.read_shift(2),!0),be=I(K[0].r,q.read_shift(2),!1);Re=I(K[0].c,q.read_shift(2),!0),te=I(K[0].r,q.read_shift(2),!1),se.push(et+be+":"+Re+te)}break;case 3:if(q.l<q.length){console.error("WK1 premature formula end");return}break;case 4:se.push("("+se.pop()+")");break;case 5:se.push(q.read_shift(2));break;case 6:{for(var Ae="";Oe=q[q.l++];)Ae+=String.fromCharCode(Oe);se.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:se.push("-"+se.pop());break;case 23:se.push("+"+se.pop());break;case 22:se.push("NOT("+se.pop()+")");break;case 20:case 21:Ve=se.pop(),ke=se.pop(),se.push(["AND","OR"][Oe-20]+"("+ke+","+Ve+")");break;default:if(Oe<32&&T[Oe])Ve=se.pop(),ke=se.pop(),se.push(ke+T[Oe]+Ve);else if(F[Oe]){if(re=F[Oe][1],re==69&&(re=q[q.l++]),re>se.length){console.error("WK1 bad formula parse 0x"+Oe.toString(16)+":|"+se.join("|")+"|");return}var Fe=se.slice(-re);se.length-=re,se.push(F[Oe][0]+"("+Fe.join(",")+")")}else return Oe<=7?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=24?console.error("WK1 unsupported op "+Oe.toString(16)):Oe<=30?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=115?console.error("WK1 unsupported function opcode "+Oe.toString(16)):console.error("WK1 unrecognized opcode "+Oe.toString(16))}}se.length==1?K[1].f=""+se[0]:console.error("WK1 bad formula parse |"+se.join("|")+"|")}function H(q){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=q.read_shift(2),K[3]=q[q.l++],K[0].c=q[q.l++],K}function U(q,K){var se=H(q);return se[1].t="s",se[1].v=q.read_shift(K-4,"cstr"),se}function L(q,K,se,re){var te=Ia(6+re.length);te.write_shift(2,q),te.write_shift(1,se),te.write_shift(1,K),te.write_shift(1,39);for(var Re=0;Re<re.length;++Re){var ke=re.charCodeAt(Re);te.write_shift(1,ke>=128?95:ke)}return te.write_shift(1,0),te}function P(q,K){var se=H(q);se[1].v=q.read_shift(2);var re=se[1].v>>1;if(se[1].v&1)switch(re&7){case 0:re=(re>>3)*5e3;break;case 1:re=(re>>3)*500;break;case 2:re=(re>>3)/20;break;case 3:re=(re>>3)/200;break;case 4:re=(re>>3)/2e3;break;case 5:re=(re>>3)/2e4;break;case 6:re=(re>>3)/16;break;case 7:re=(re>>3)/64;break}return se[1].v=re,se}function z(q,K){var se=H(q),re=q.read_shift(4),te=q.read_shift(4),Re=q.read_shift(2);if(Re==65535)return re===0&&te===3221225472?(se[1].t="e",se[1].v=15):re===0&&te===3489660928?(se[1].t="e",se[1].v=42):se[1].v=0,se;var ke=Re&32768;return Re=(Re&32767)-16446,se[1].v=(1-ke*2)*(te*Math.pow(2,Re+32)+re*Math.pow(2,Re)),se}function W(q,K,se,re){var te=Ia(14);if(te.write_shift(2,q),te.write_shift(1,se),te.write_shift(1,K),re==0)return te.write_shift(4,0),te.write_shift(4,0),te.write_shift(2,65535),te;var Re=0,ke=0,Ve=0,Oe=0;return re<0&&(Re=1,re=-re),ke=Math.log2(re)|0,re/=Math.pow(2,ke-31),Oe=re>>>0,(Oe&2147483648)==0&&(re/=2,++ke,Oe=re>>>0),re-=Oe,Oe|=2147483648,Oe>>>=0,re*=Math.pow(2,32),Ve=re>>>0,te.write_shift(4,Ve),te.write_shift(4,Oe),ke+=16383+(Re?32768:0),te.write_shift(2,ke),te}function ee(q,K){var se=z(q);return q.l+=K-14,se}function G(q,K){var se=H(q),re=q.read_shift(4);return se[1].v=re>>6,se}function ne(q,K){var se=H(q),re=q.read_shift(8,"f");return se[1].v=re,se}function le(q,K){var se=ne(q);return q.l+=K-10,se}function Y(q,K){return q[q.l+K-1]==0?q.read_shift(K,"cstr"):""}function X(q,K){var se=q[q.l++];se>K-1&&(se=K-1);for(var re="";re.length<se;)re+=String.fromCharCode(q[q.l++]);return re}function de(q,K,se){if(!(!se.qpro||K<21)){var re=q.read_shift(1);q.l+=17,q.l+=1,q.l+=2;var te=q.read_shift(K-21,"cstr");return[re,te]}}function ye(q,K){for(var se={},re=q.l+K;q.l<re;){var te=q.read_shift(2);if(te==14e3){for(se[te]=[0,""],se[te][0]=q.read_shift(2);q[q.l];)se[te][1]+=String.fromCharCode(q[q.l]),q.l++;q.l++}}return se}function oe(q,K){var se=Ia(5+q.length);se.write_shift(2,14e3),se.write_shift(2,K);for(var re=0;re<q.length;++re){var te=q.charCodeAt(re);se[se.l++]=te>127?95:te}return se[se.l++]=0,se}var xe={0:{n:"BOF",f:ka},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:C},14:{n:"NUMBER",f:D},15:{n:"LABEL",f:w},16:{n:"FORMULA",f:M},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:w},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:X},65535:{n:""}},ae={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:U},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:ee},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ye},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:ne},40:{n:"FORMULA28",f:le},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:de},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:l,to_workbook:a}}();function h7(t){var a={},r=t.match(hs),n=0,l=!1;if(r)for(;n!=r.length;++n){var d=Vt(r[n]);switch(d[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!d.val)break;case"<shadow>":case"<shadow/>":a.shadow=1;break;case"</shadow>":break;case"<charset":if(d.val=="1")break;a.cp=cg[parseInt(d.val,10)];break;case"<outline":if(!d.val)break;case"<outline>":case"<outline/>":a.outline=1;break;case"</outline>":break;case"<rFont":a.name=d.val;break;case"<sz":a.sz=d.val;break;case"<strike":if(!d.val)break;case"<strike>":case"<strike/>":a.strike=1;break;case"</strike>":break;case"<u":if(!d.val)break;switch(d.val){case"double":a.uval="double";break;case"singleAccounting":a.uval="single-accounting";break;case"doubleAccounting":a.uval="double-accounting";break}case"<u>":case"<u/>":a.u=1;break;case"</u>":break;case"<b":if(d.val=="0")break;case"<b>":case"<b/>":a.b=1;break;case"</b>":break;case"<i":if(d.val=="0")break;case"<i>":case"<i/>":a.i=1;break;case"</i>":break;case"<color":d.rgb&&(a.color=d.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":a.family=d.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":a.valign=d.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(d[0].charCodeAt(1)!==47&&!l)throw new Error("Unrecognized rich format "+d[0])}}return a}var m7=function(){var t=Z0("t"),a=Z0("rPr");function r(d){var f=d.match(t);if(!f)return{t:"s",v:""};var h={t:"s",v:br(f[1])},b=d.match(a);return b&&(h.s=h7(b[1])),h}var n=/<(?:\w+:)?r>/g,l=/<\/(?:\w+:)?r>/;return function(f){return f.replace(n,"").split(l).map(r).filter(function(h){return h.v})}}(),g7=function(){var a=/(\r\n|\n)/g;function r(l,d,f){var h=[];l.u&&h.push("text-decoration: underline;"),l.uval&&h.push("text-underline-style:"+l.uval+";"),l.sz&&h.push("font-size:"+l.sz+"pt;"),l.outline&&h.push("text-effect: outline;"),l.shadow&&h.push("text-shadow: auto;"),d.push('<span style="'+h.join("")+'">'),l.b&&(d.push("<b>"),f.push("</b>")),l.i&&(d.push("<i>"),f.push("</i>")),l.strike&&(d.push("<s>"),f.push("</s>"));var b=l.valign||"";return b=="superscript"||b=="super"?b="sup":b=="subscript"&&(b="sub"),b!=""&&(d.push("<"+b+">"),f.push("</"+b+">")),f.push("</span>"),l}function n(l){var d=[[],l.v,[]];return l.v?(l.s&&r(l.s,d[0],d[2]),d[0].join("")+d[1].replace(a,"<br/>")+d[2].join("")):""}return function(d){return d.map(n).join("")}}(),p7=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,y7=/<(?:\w+:)?r>/,b7=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Eg(t,a){var r=a?a.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=br(Ur(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ur(t),r&&(n.h=gg(n.t))):t.match(y7)&&(n.r=Ur(t),n.t=br(Ur((t.replace(b7,"").match(p7)||[]).join("").replace(hs,""))),r&&(n.h=g7(m7(n.r)))),n):{t:""}}var v7=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,w7=/<(?:\w+:)?(?:si|sstItem)>/g,N7=/<\/(?:\w+:)?(?:si|sstItem)>/;function k7(t,a){var r=[],n="";if(!t)return r;var l=t.match(v7);if(l){n=l[2].replace(w7,"").split(N7);for(var d=0;d!=n.length;++d){var f=Eg(n[d].trim(),a);f!=null&&(r[r.length]=f)}l=Vt(l[1]),r.Count=l.count,r.Unique=l.uniqueCount}return r}function j7(t){return[t.read_shift(4),t.read_shift(4)]}function C7(t,a){var r=[],n=!1;return Hi(t,function(d,f,h){switch(h){case 159:r.Count=d[0],r.Unique=d[1];break;case 19:r.push(d);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(f.T,!n||a.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function D4(t){for(var a=[],r=t.split(""),n=0;n<r.length;++n)a[n]=r[n].charCodeAt(0);return a}function Ii(t,a){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),a>=4&&(t.l+=a-4),r}function E7(t){var a={};return a.id=t.read_shift(0,"lpp4"),a.R=Ii(t,4),a.U=Ii(t,4),a.W=Ii(t,4),a}function S7(t){for(var a=t.read_shift(4),r=t.l+a-4,n={},l=t.read_shift(4),d=[];l-- >0;)d.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=d,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function A7(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(S7(t));return a}function _7(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(t.read_shift(0,"lpp4"));return a}function T7(t){var a={};return t.read_shift(4),t.l+=4,a.id=t.read_shift(0,"lpp4"),a.name=t.read_shift(0,"lpp4"),a.R=Ii(t,4),a.U=Ii(t,4),a.W=Ii(t,4),a}function D7(t){var a=T7(t);if(a.ename=t.read_shift(0,"8lpp4"),a.blksz=t.read_shift(4),a.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return a}function R4(t,a){var r=t.l+a,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var l=!1;switch(n.AlgID){case 26126:case 26127:case 26128:l=n.Flags==36;break;case 26625:l=n.Flags==4;break;case 0:l=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!l)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function M4(t,a){var r={},n=t.l+a;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function R7(t){var a=Ii(t);switch(a.Minor){case 2:return[a.Minor,M7(t)];case 3:return[a.Minor,I7()];case 4:return[a.Minor,O7(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+a.Minor)}function M7(t){var a=t.read_shift(4);if((a&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=R4(t,r),l=M4(t,t.length-t.l);return{t:"Std",h:n,v:l}}function I7(){throw new Error("File is password-protected: ECMA-376 Extensible")}function O7(t){var a=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(hs,function(d){var f=Vt(d);switch(ci(f[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":a.forEach(function(h){n[h]=f[h]});break;case"<dataIntegrity":n.encryptedHmacKey=f.encryptedHmacKey,n.encryptedHmacValue=f.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=f.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(f);break;default:throw f[0]}}),n}function F7(t,a){var r={},n=r.EncryptionVersionInfo=Ii(t,4);if(a-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),a-=4;var l=t.read_shift(4);return a-=4,r.EncryptionHeader=R4(t,l),a-=l,r.EncryptionVerifier=M4(t,a),r}function B7(t){var a={},r=a.EncryptionVersionInfo=Ii(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return a.Salt=t.read_shift(16),a.EncryptedVerifier=t.read_shift(16),a.EncryptedVerifierHash=t.read_shift(16),a}function L7(t){var a=0,r,n=D4(t),l=n.length+1,d,f,h,b,g;for(r=Dl(l),r[0]=n.length,d=1;d!=l;++d)r[d]=n[d-1];for(d=l-1;d>=0;--d)f=r[d],h=(a&16384)===0?0:1,b=a<<1&32767,g=h|b,a=g^f;return a^52811}var I4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],a=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(f){return(f/2|f*128)&255},l=function(f,h){return n(f^h)},d=function(f){for(var h=a[f.length-1],b=104,g=f.length-1;g>=0;--g)for(var w=f[g],k=0;k!=7;++k)w&64&&(h^=r[b]),w*=2,--b;return h};return function(f){for(var h=D4(f),b=d(h),g=h.length,w=Dl(16),k=0;k!=16;++k)w[k]=0;var C,S,D;for((g&1)===1&&(C=b>>8,w[g]=l(t[0],C),--g,C=b&255,S=h[h.length-1],w[g]=l(S,C));g>0;)--g,C=b>>8,w[g]=l(h[g],C),--g,C=b&255,w[g]=l(h[g],C);for(g=15,D=15-h.length;D>0;)C=b>>8,w[g]=l(t[D],C),--g,--D,C=b&255,w[g]=l(h[g],C),--g,--D;return w}}(),P7=function(t,a,r,n,l){l||(l=a),n||(n=I4(t));var d,f;for(d=0;d!=a.length;++d)f=a[d],f^=n[r],f=(f>>5|f<<3)&255,l[d]=f,++r;return[l,r,n]},z7=function(t){var a=0,r=I4(t);return function(n){var l=P7("",n,a,r);return a=l[1],l[0]}};function U7(t,a,r,n){var l={key:ka(t),verificationBytes:ka(t)};return r.password&&(l.verifier=L7(r.password)),n.valid=l.verificationBytes===l.verifier,n.valid&&(n.insitu=z7(r.password)),l}function H7(t,a,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=B7(t):n.Data=F7(t,a),n}function V7(t,a,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?H7(t,a-2,n):U7(t,r.biff>=8?a:a-2,r,n),n}var G7=function(){function t(l,d){switch(d.type){case"base64":return a(Js(l),d);case"binary":return a(l,d);case"buffer":return a(fr&&Buffer.isBuffer(l)?l.toString("binary"):Co(l),d);case"array":return a(vo(l),d)}throw new Error("Unrecognized type "+d.type)}function a(l,d){var f=d||{},h=f.dense?[]:{},b=l.match(/\\trowd.*?\\row\b/g);if(!b.length)throw new Error("RTF missing table");var g={s:{c:0,r:0},e:{c:0,r:b.length-1}};return b.forEach(function(w,k){Array.isArray(h)&&(h[k]=[]);for(var C=/\\\w+\b/g,S=0,D,A=-1;D=C.exec(w);){switch(D[0]){case"\\cell":var M=w.slice(S,C.lastIndex-D[0].length);if(M[0]==" "&&(M=M.slice(1)),++A,M.length){var I={v:M,t:"s"};Array.isArray(h)?h[k][A]=I:h[Zt({r:k,c:A})]=I}break}S=C.lastIndex}A>g.e.c&&(g.e.c=A)}),h["!ref"]=yr(g),h}function r(l,d){return Il(t(l,d),d)}function n(l){for(var d=["{\\rtf1\\ansi"],f=la(l["!ref"]),h,b=Array.isArray(l),g=f.s.r;g<=f.e.r;++g){d.push("\\trowd\\trautofit1");for(var w=f.s.c;w<=f.e.c;++w)d.push("\\cellx"+(w+1));for(d.push("\\pard\\intbl"),w=f.s.c;w<=f.e.c;++w){var k=Zt({r:g,c:w});h=b?(l[g]||[])[w]:l[k],!(!h||h.v==null&&(!h.f||h.F))&&(d.push(" "+(h.w||(Ui(h),h.w))),d.push("\\cell"))}d.push("\\pard\\intbl\\row")}return d.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Y7(t){var a=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(a.slice(0,2),16),parseInt(a.slice(2,4),16),parseInt(a.slice(4,6),16)]}function ed(t){for(var a=0,r=1;a!=3;++a)r=r*256+(t[a]>255?255:t[a]<0?0:t[a]);return r.toString(16).toUpperCase().slice(1)}function X7(t){var a=t[0]/255,r=t[1]/255,n=t[2]/255,l=Math.max(a,r,n),d=Math.min(a,r,n),f=l-d;if(f===0)return[0,0,a];var h=0,b=0,g=l+d;switch(b=f/(g>1?2-g:g),l){case a:h=((r-n)/f+6)%6;break;case r:h=(n-a)/f+2;break;case n:h=(a-r)/f+4;break}return[h/6,b,g/2]}function q7(t){var a=t[0],r=t[1],n=t[2],l=r*2*(n<.5?n:1-n),d=n-l/2,f=[d,d,d],h=6*a,b;if(r!==0)switch(h|0){case 0:case 6:b=l*h,f[0]+=l,f[1]+=b;break;case 1:b=l*(2-h),f[0]+=b,f[1]+=l;break;case 2:b=l*(h-2),f[1]+=l,f[2]+=b;break;case 3:b=l*(4-h),f[1]+=b,f[2]+=l;break;case 4:b=l*(h-4),f[2]+=l,f[0]+=b;break;case 5:b=l*(6-h),f[2]+=b,f[0]+=l;break}for(var g=0;g!=3;++g)f[g]=Math.round(f[g]*255);return f}function df(t,a){if(a===0)return t;var r=X7(Y7(t));return a<0?r[2]=r[2]*(1+a):r[2]=1-(1-r[2])*(1-a),ed(q7(r))}var O4=6,$7=15,W7=1,vs=O4;function uf(t){return Math.floor((t+Math.round(128/vs)/256)*vs)}function ff(t){return Math.floor((t-5)/vs*100+.5)/100}function Vm(t){return Math.round((t*vs+5)/vs*256)/256}function xm(t){return Vm(ff(uf(t)))}function Sg(t){var a=Math.abs(t-xm(t)),r=vs;if(a>.005)for(vs=W7;vs<$7;++vs)Math.abs(t-xm(t))<=a&&(a=Math.abs(t-xm(t)),r=vs);vs=r}function Cc(t){t.width?(t.wpx=uf(t.width),t.wch=ff(t.wpx),t.MDW=vs):t.wpx?(t.wch=ff(t.wpx),t.width=Vm(t.wch),t.MDW=vs):typeof t.wch=="number"&&(t.width=Vm(t.wch),t.wpx=uf(t.width),t.MDW=vs),t.customWidth&&delete t.customWidth}var K7=96,F4=K7;function B4(t){return t*96/F4}function td(t){return t*F4/96}var Z7={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Q7(t,a,r,n){a.Borders=[];var l={},d=!1;(t[0].match(hs)||[]).forEach(function(f){var h=Vt(f);switch(ci(h[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":l={},h.diagonalUp&&(l.diagonalUp=Wr(h.diagonalUp)),h.diagonalDown&&(l.diagonalDown=Wr(h.diagonalDown)),a.Borders.push(l);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(n&&n.WTF&&!d)throw new Error("unrecognized "+h[0]+" in borders")}})}function J7(t,a,r,n){a.Fills=[];var l={},d=!1;(t[0].match(hs)||[]).forEach(function(f){var h=Vt(f);switch(ci(h[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":l={},a.Fills.push(l);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":a.Fills.push(l),l={};break;case"<patternFill":case"<patternFill>":h.patternType&&(l.patternType=h.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":l.bgColor||(l.bgColor={}),h.indexed&&(l.bgColor.indexed=parseInt(h.indexed,10)),h.theme&&(l.bgColor.theme=parseInt(h.theme,10)),h.tint&&(l.bgColor.tint=parseFloat(h.tint)),h.rgb&&(l.bgColor.rgb=h.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":l.fgColor||(l.fgColor={}),h.theme&&(l.fgColor.theme=parseInt(h.theme,10)),h.tint&&(l.fgColor.tint=parseFloat(h.tint)),h.rgb!=null&&(l.fgColor.rgb=h.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(n&&n.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fills")}})}function eD(t,a,r,n){a.Fonts=[];var l={},d=!1;(t[0].match(hs)||[]).forEach(function(f){var h=Vt(f);switch(ci(h[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":a.Fonts.push(l),l={};break;case"<name":h.val&&(l.name=Ur(h.val));break;case"<name/>":case"</name>":break;case"<b":l.bold=h.val?Wr(h.val):1;break;case"<b/>":l.bold=1;break;case"<i":l.italic=h.val?Wr(h.val):1;break;case"<i/>":l.italic=1;break;case"<u":switch(h.val){case"none":l.underline=0;break;case"single":l.underline=1;break;case"double":l.underline=2;break;case"singleAccounting":l.underline=33;break;case"doubleAccounting":l.underline=34;break}break;case"<u/>":l.underline=1;break;case"<strike":l.strike=h.val?Wr(h.val):1;break;case"<strike/>":l.strike=1;break;case"<outline":l.outline=h.val?Wr(h.val):1;break;case"<outline/>":l.outline=1;break;case"<shadow":l.shadow=h.val?Wr(h.val):1;break;case"<shadow/>":l.shadow=1;break;case"<condense":l.condense=h.val?Wr(h.val):1;break;case"<condense/>":l.condense=1;break;case"<extend":l.extend=h.val?Wr(h.val):1;break;case"<extend/>":l.extend=1;break;case"<sz":h.val&&(l.sz=+h.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":h.val&&(l.vertAlign=h.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":h.val&&(l.family=parseInt(h.val,10));break;case"<family/>":case"</family>":break;case"<scheme":h.val&&(l.scheme=h.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(h.val=="1")break;h.codepage=cg[parseInt(h.val,10)];break;case"<color":if(l.color||(l.color={}),h.auto&&(l.color.auto=Wr(h.auto)),h.rgb)l.color.rgb=h.rgb.slice(-6);else if(h.indexed){l.color.index=parseInt(h.indexed,10);var b=fo[l.color.index];l.color.index==81&&(b=fo[1]),b||(b=fo[1]),l.color.rgb=b[0].toString(16)+b[1].toString(16)+b[2].toString(16)}else h.theme&&(l.color.theme=parseInt(h.theme,10),h.tint&&(l.color.tint=parseFloat(h.tint)),h.theme&&r.themeElements&&r.themeElements.clrScheme&&(l.color.rgb=df(r.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":d=!0;break;case"</AlternateContent>":d=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(n&&n.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fonts")}})}function tD(t,a,r){a.NumberFmt=[];for(var n=ii(tr),l=0;l<n.length;++l)a.NumberFmt[n[l]]=tr[n[l]];var d=t[0].match(hs);if(d)for(l=0;l<d.length;++l){var f=Vt(d[l]);switch(ci(f[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var h=br(Ur(f.formatCode)),b=parseInt(f.numFmtId,10);if(a.NumberFmt[b]=h,b>0){if(b>392){for(b=392;b>60&&a.NumberFmt[b]!=null;--b);a.NumberFmt[b]=h}uo(h,b)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+f[0]+" in numFmts")}}}var Fu=["numFmtId","fillId","fontId","borderId","xfId"],Bu=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function rD(t,a,r){a.CellXf=[];var n,l=!1;(t[0].match(hs)||[]).forEach(function(d){var f=Vt(d),h=0;switch(ci(f[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=f,delete n[0],h=0;h<Fu.length;++h)n[Fu[h]]&&(n[Fu[h]]=parseInt(n[Fu[h]],10));for(h=0;h<Bu.length;++h)n[Bu[h]]&&(n[Bu[h]]=Wr(n[Bu[h]]));if(a.NumberFmt&&n.numFmtId>392){for(h=392;h>60;--h)if(a.NumberFmt[n.numFmtId]==a.NumberFmt[h]){n.numFmtId=h;break}}a.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var b={};f.vertical&&(b.vertical=f.vertical),f.horizontal&&(b.horizontal=f.horizontal),f.textRotation!=null&&(b.textRotation=f.textRotation),f.indent&&(b.indent=f.indent),f.wrapText&&(b.wrapText=Wr(f.wrapText)),n.alignment=b;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(r&&r.WTF&&!l)throw new Error("unrecognized "+f[0]+" in cellXfs")}})}var aD=function(){var a=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,l=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,d=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(h,b,g){var w={};if(!h)return w;h=h.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var k;return(k=h.match(a))&&tD(k,w,g),(k=h.match(l))&&eD(k,w,b,g),(k=h.match(n))&&J7(k,w,b,g),(k=h.match(d))&&Q7(k,w,b,g),(k=h.match(r))&&rD(k,w,g),w}}();function sD(t,a){var r=t.read_shift(2),n=fs(t);return[r,n]}function nD(t,a,r){var n={};n.sz=t.read_shift(2)/20;var l=mT(t);l.fItalic&&(n.italic=1),l.fCondense&&(n.condense=1),l.fExtend&&(n.extend=1),l.fShadow&&(n.shadow=1),l.fOutline&&(n.outline=1),l.fStrikeout&&(n.strike=1);var d=t.read_shift(2);switch(d===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var f=t.read_shift(1);f!=0&&(n.underline=f);var h=t.read_shift(1);h>0&&(n.family=h);var b=t.read_shift(1);switch(b>0&&(n.charset=b),t.l++,n.color=hT(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=fs(t),n}var iD=xs;function lD(t,a){var r=t.l+a,n=t.read_shift(2),l=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:l}}var oD=xs;function cD(t,a,r){var n={};n.NumberFmt=[];for(var l in tr)n.NumberFmt[l]=tr[l];n.CellXf=[],n.Fonts=[];var d=[],f=!1;return Hi(t,function(b,g,w){switch(w){case 44:n.NumberFmt[b[0]]=b[1],uo(b[1],b[0]);break;case 43:n.Fonts.push(b),b.color.theme!=null&&a&&a.themeElements&&a.themeElements.clrScheme&&(b.color.rgb=df(a.themeElements.clrScheme[b.color.theme].rgb,b.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:d[d.length-1]==617&&n.CellXf.push(b);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:d.push(w),f=!0;break;case 38:d.pop(),f=!1;break;default:if(g.T>0)d.push(w);else if(g.T<0)d.pop();else if(!f||r.WTF&&d[d.length-1]!=37)throw new Error("Unexpected record 0x"+w.toString(16))}}),n}var dD=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function uD(t,a,r){a.themeElements.clrScheme=[];var n={};(t[0].match(hs)||[]).forEach(function(l){var d=Vt(l);switch(d[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=d.val;break;case"<a:sysClr":n.rgb=d.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":d[0].charAt(1)==="/"?(a.themeElements.clrScheme[dD.indexOf(d[0])]=n,n={}):n.name=d[0].slice(3,d[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+d[0]+" in clrScheme")}})}function fD(){}function xD(){}var hD=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,mD=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,gD=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function pD(t,a,r){a.themeElements={};var n;[["clrScheme",hD,uD],["fontScheme",mD,fD],["fmtScheme",gD,xD]].forEach(function(l){if(!(n=t.match(l[1])))throw new Error(l[0]+" not found in themeElements");l[2](n,a,r)})}var yD=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function L4(t,a){(!t||t.length===0)&&(t=bD());var r,n={};if(!(r=t.match(yD)))throw new Error("themeElements not found in theme");return pD(r[0],n,a),n.raw=t,n}function bD(t,a){var r=[Ww];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function vD(t,a,r){var n=t.l+a,l=t.read_shift(4);if(l!==124226){if(!r.cellStyles){t.l=n;return}var d=t.slice(t.l);t.l=n;var f;try{f=$w(d,{type:"array"})}catch{return}var h=Ws(f,"theme/theme/theme1.xml",!0);if(h)return L4(h,r)}}function wD(t){return t.read_shift(4)}function ND(t){var a={};switch(a.xclrType=t.read_shift(2),a.nTintShade=t.read_shift(2),a.xclrType){case 0:t.l+=4;break;case 1:a.xclrValue=kD(t,4);break;case 2:a.xclrValue=j4(t);break;case 3:a.xclrValue=wD(t);break;case 4:t.l+=4;break}return t.l+=8,a}function kD(t,a){return xs(t,a)}function jD(t,a){return xs(t,a)}function CD(t){var a=t.read_shift(2),r=t.read_shift(2)-4,n=[a];switch(a){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=ND(t);break;case 6:n[1]=jD(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+a+" "+r)}return n}function ED(t,a){var r=t.l+a;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var l=t.read_shift(2),d=[];l-- >0;)d.push(CD(t,r-t.l));return{ixfe:n,ext:d}}function SD(t,a){a.forEach(function(r){r[0]})}function AD(t,a){return{flags:t.read_shift(4),version:t.read_shift(4),name:fs(t)}}function _D(t){for(var a=[],r=t.read_shift(4);r-- >0;)a.push([t.read_shift(4),t.read_shift(4)]);return a}function TD(t){return t.l+=4,t.read_shift(4)!=0}function DD(t,a,r){var n={Types:[],Cell:[],Value:[]},l=r||{},d=[],f=!1,h=2;return Hi(t,function(b,g,w){switch(w){case 335:n.Types.push({name:b.name});break;case 51:b.forEach(function(k){h==1?n.Cell.push({type:n.Types[k[0]-1].name,index:k[1]}):h==0&&n.Value.push({type:n.Types[k[0]-1].name,index:k[1]})});break;case 337:h=b?1:0;break;case 338:h=2;break;case 35:d.push(w),f=!0;break;case 36:d.pop(),f=!1;break;default:if(!g.T){if(!f||l.WTF&&d[d.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}}),n}function RD(t,a,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var l=!1,d=2,f;return t.replace(hs,function(h){var b=Vt(h);switch(ci(b[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:b.name});break;case"</metadataType>":break;case"<futureMetadata":for(var g=0;g<n.Types.length;++g)n.Types[g].name==b.name&&(f=n.Types[g]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":d==1?n.Cell.push({type:n.Types[b.t-1].name,index:+b.v}):d==0&&n.Value.push({type:n.Types[b.t-1].name,index:+b.v});break;case"</rc>":break;case"<cellMetadata":d=1;break;case"</cellMetadata>":d=2;break;case"<valueMetadata":d=0;break;case"</valueMetadata>":d=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;case"<rvb":if(!f)break;f.offsets||(f.offsets=[]),f.offsets.push(+b.i);break;default:if(!l&&r.WTF)throw new Error("unrecognized "+b[0]+" in metadata")}return h}),n}function MD(t){var a=[];if(!t)return a;var r=1;return(t.match(hs)||[]).forEach(function(n){var l=Vt(n);switch(l[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete l[0],l.i?r=l.i:l.i=r,a.push(l);break}}),a}function ID(t){var a={};a.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),a.r=Zt(r);var n=t.read_shift(1);return n&2&&(a.l="1"),n&8&&(a.a="1"),a}function OD(t,a,r){var n=[];return Hi(t,function(d,f,h){switch(h){case 63:n.push(d);break;default:if(!f.T)throw new Error("Unexpected record 0x"+h.toString(16))}}),n}function FD(t,a,r,n){if(!t)return t;var l=n||{},d=!1;Hi(t,function(h,b,g){switch(g){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:d=!0;break;case 36:d=!1;break;default:if(!b.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}},l)}function BD(t,a){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return a["!id"][r].Target}function U2(t,a,r,n){var l=Array.isArray(t),d;a.forEach(function(f){var h=Ns(f.ref);if(l?(t[h.r]||(t[h.r]=[]),d=t[h.r][h.c]):d=t[f.ref],!d){d={t:"z"},l?t[h.r][h.c]=d:t[f.ref]=d;var b=la(t["!ref"]||"BDWGO1000001:A1");b.s.r>h.r&&(b.s.r=h.r),b.e.r<h.r&&(b.e.r=h.r),b.s.c>h.c&&(b.s.c=h.c),b.e.c<h.c&&(b.e.c=h.c);var g=yr(b);g!==t["!ref"]&&(t["!ref"]=g)}d.c||(d.c=[]);var w={a:f.author,t:f.t,r:f.r,T:r};f.h&&(w.h=f.h);for(var k=d.c.length-1;k>=0;--k){if(!r&&d.c[k].T)return;r&&!d.c[k].T&&d.c.splice(k,1)}if(r&&n){for(k=0;k<n.length;++k)if(w.a==n[k].id){w.a=n[k].name||w.a;break}}d.c.push(w)})}function LD(t,a){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],l=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);l&&l[1]&&l[1].split(/<\/\w*:?author>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?author[^>]*>(.*)/);h&&r.push(h[1])}});var d=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return d&&d[1]&&d[1].split(/<\/\w*:?comment>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?comment[^>]*>/);if(h){var b=Vt(h[0]),g={author:b.authorId&&r[b.authorId]||"sheetjsghost",ref:b.ref,guid:b.guid},w=Ns(b.ref);if(!(a.sheetRows&&a.sheetRows<=w.r)){var k=f.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),C=!!k&&!!k[1]&&Eg(k[1])||{r:"",t:"",h:""};g.r=C.r,C.r=="<t></t>"&&(C.t=C.h=""),g.t=(C.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),a.cellHTML&&(g.h=C.h),n.push(g)}}}}),n}function PD(t,a){var r=[],n=!1,l={},d=0;return t.replace(hs,function(h,b){var g=Vt(h);switch(ci(g[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":l={author:g.personId,guid:g.id,ref:g.ref,T:1};break;case"</threadedComment>":l.t!=null&&r.push(l);break;case"<text>":case"<text":d=b+h.length;break;case"</text>":l.t=t.slice(d,b).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&a.WTF)throw new Error("unrecognized "+g[0]+" in threaded comments")}return h}),r}function zD(t,a){var r=[],n=!1;return t.replace(hs,function(d){var f=Vt(d);switch(ci(f[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:f.displayname,id:f.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&a.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return d}),r}function UD(t){var a={};a.iauthor=t.read_shift(4);var r=So(t);return a.rfx=r.s,a.ref=Zt(r.s),t.l+=16,a}var HD=fs;function VD(t,a){var r=[],n=[],l={},d=!1;return Hi(t,function(h,b,g){switch(g){case 632:n.push(h);break;case 635:l=h;break;case 637:l.t=h.t,l.h=h.h,l.r=h.r;break;case 636:if(l.author=n[l.iauthor],delete l.iauthor,a.sheetRows&&l.rfx&&a.sheetRows<=l.rfx.r)break;l.t||(l.t=""),delete l.rfx,r.push(l);break;case 3072:break;case 35:d=!0;break;case 36:d=!1;break;case 37:break;case 38:break;default:if(!b.T){if(!d||a.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}}),r}var GD="application/vnd.ms-office.vbaProject";function YD(t){var a=pr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var l=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");pr.utils.cfb_add(a,l,t.FileIndex[n].content)}}),pr.write(a)}function XD(){return{"!type":"dialog"}}function qD(){return{"!type":"dialog"}}function $D(){return{"!type":"macro"}}function WD(){return{"!type":"macro"}}var bc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,a={r:0,c:0};function r(n,l,d,f){var h=!1,b=!1;d.length==0?b=!0:d.charAt(0)=="["&&(b=!0,d=d.slice(1,-1)),f.length==0?h=!0:f.charAt(0)=="["&&(h=!0,f=f.slice(1,-1));var g=d.length>0?parseInt(d,10)|0:0,w=f.length>0?parseInt(f,10)|0:0;return h?w+=a.c:--w,b?g+=a.r:--g,l+(h?"":"$")+Fa(w)+(b?"":"$")+Ka(g)}return function(l,d){return a=d,l.replace(t,r)}}(),P4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,KD=function(){return function(a,r){return a.replace(P4,function(n,l,d,f,h,b){var g=vg(f)-(d?0:r.c),w=bg(b)-(h?0:r.r),k=w==0?"":h?w+1:"["+w+"]",C=g==0?"":d?g+1:"["+g+"]";return l+"R"+k+"C"+C})}}();function z4(t,a){return t.replace(P4,function(r,n,l,d,f,h){return n+(l=="$"?l+d:Fa(vg(d)+a.c))+(f=="$"?f+h:Ka(bg(h)+a.r))})}function ZD(t,a,r){var n=Mc(a),l=n.s,d=Ns(r),f={r:d.r-l.r,c:d.c-l.c};return z4(t,f)}function QD(t){return t.length!=1}function H2(t){return t.replace(/_xlfn\./g,"")}function wa(t){t.l+=1}function Rl(t,a){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function U4(t,a,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return H4(t);r.biff==12&&(n=4)}var l=t.read_shift(n),d=t.read_shift(n),f=Rl(t),h=Rl(t);return{s:{r:l,c:f[0],cRel:f[1],rRel:f[2]},e:{r:d,c:h[0],cRel:h[1],rRel:h[2]}}}function H4(t){var a=Rl(t),r=Rl(t),n=t.read_shift(1),l=t.read_shift(1);return{s:{r:a[0],c:n,cRel:a[1],rRel:a[2]},e:{r:r[0],c:l,cRel:r[1],rRel:r[2]}}}function JD(t,a,r){if(r.biff<8)return H4(t);var n=t.read_shift(r.biff==12?4:2),l=t.read_shift(r.biff==12?4:2),d=Rl(t),f=Rl(t);return{s:{r:n,c:d[0],cRel:d[1],rRel:d[2]},e:{r:l,c:f[0],cRel:f[1],rRel:f[2]}}}function V4(t,a,r){if(r&&r.biff>=2&&r.biff<=5)return eR(t);var n=t.read_shift(r&&r.biff==12?4:2),l=Rl(t);return{r:n,c:l[0],cRel:l[1],rRel:l[2]}}function eR(t){var a=Rl(t),r=t.read_shift(1);return{r:a[0],c:r,cRel:a[1],rRel:a[2]}}function tR(t){var a=t.read_shift(2),r=t.read_shift(2);return{r:a,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function rR(t,a,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return aR(t);var l=t.read_shift(n>=12?4:2),d=t.read_shift(2),f=(d&16384)>>14,h=(d&32768)>>15;if(d&=16383,h==1)for(;l>524287;)l-=1048576;if(f==1)for(;d>8191;)d=d-16384;return{r:l,c:d,cRel:f,rRel:h}}function aR(t){var a=t.read_shift(2),r=t.read_shift(1),n=(a&32768)>>15,l=(a&16384)>>14;return a&=16383,n==1&&a>=8192&&(a=a-16384),l==1&&r>=128&&(r=r-256),{r:a,c:r,cRel:l,rRel:n}}function sR(t,a,r){var n=(t[t.l++]&96)>>5,l=U4(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,l]}function nR(t,a,r){var n=(t[t.l++]&96)>>5,l=t.read_shift(2,"i"),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}var f=U4(t,d,r);return[n,l,f]}function iR(t,a,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function lR(t,a,r){var n=(t[t.l++]&96)>>5,l=t.read_shift(2),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}return t.l+=d,[n,l]}function oR(t,a,r){var n=(t[t.l++]&96)>>5,l=JD(t,a-1,r);return[n,l]}function cR(t,a,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function V2(t){var a=t[t.l+1]&1,r=1;return t.l+=4,[a,r]}function dR(t,a,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),l=[],d=0;d<=n;++d)l.push(t.read_shift(r&&r.biff==2?1:2));return l}function uR(t,a,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function fR(t,a,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function xR(t){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(2)]}function hR(t,a,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function G4(t){var a=t.read_shift(1),r=t.read_shift(1);return[a,r]}function mR(t){return t.read_shift(2),G4(t)}function gR(t){return t.read_shift(2),G4(t)}function pR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=V4(t,0,r);return[n,l]}function yR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=rR(t,0,r);return[n,l]}function bR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var d=V4(t,0,r);return[n,l,d]}function vR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(r&&r.biff<=3?1:2);return[w9[l],q4[l],n]}function wR(t,a,r){var n=t[t.l++],l=t.read_shift(1),d=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:NR(t);return[l,(d[0]===0?q4:v9)[d[1]]]}function NR(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function kR(t,a,r){t.l+=r&&r.biff==2?3:4}function jR(t,a,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),l=t.read_shift(r&&r.biff==2?1:2);return[n,l]}function CR(t){return t.l++,Ao[t.read_shift(1)]}function ER(t){return t.l++,t.read_shift(2)}function SR(t){return t.l++,t.read_shift(1)!==0}function AR(t){return t.l++,cs(t)}function _R(t,a,r){return t.l++,md(t,a-1,r)}function TR(t,a){var r=[t.read_shift(1)];if(a==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ha(t,1)?"TRUE":"FALSE",a!=12&&(t.l+=7);break;case 37:case 16:r[1]=Ao[t[t.l]],t.l+=a==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=cs(t);break;case 2:r[1]=_o(t,0,{biff:a>0&&a<8?2:a});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function DR(t,a,r){for(var n=t.read_shift(r.biff==12?4:2),l=[],d=0;d!=n;++d)l.push((r.biff==12?So:Tf)(t));return l}function RR(t,a,r){var n=0,l=0;r.biff==12?(n=t.read_shift(4),l=t.read_shift(4)):(l=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--l==0&&(l=256));for(var d=0,f=[];d!=n&&(f[d]=[]);++d)for(var h=0;h!=l;++h)f[d][h]=TR(t,r.biff);return f}function MR(t,a,r){var n=t.read_shift(1)>>>5&3,l=!r||r.biff>=8?4:2,d=t.read_shift(l);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,d]}function IR(t,a,r){if(r.biff==5)return OR(t);var n=t.read_shift(1)>>>5&3,l=t.read_shift(2),d=t.read_shift(4);return[n,l,d]}function OR(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[a,r,n]}function FR(t,a,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var l=t.read_shift(r&&r.biff==2?1:2);return[n,l]}function BR(t,a,r){var n=t.read_shift(1)>>>5&3,l=t.read_shift(r&&r.biff==2?1:2);return[n,l]}function LR(t,a,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function PR(t,a,r){var n=(t[t.l++]&96)>>5,l=t.read_shift(2),d=4;if(r)switch(r.biff){case 5:d=15;break;case 12:d=6;break}return t.l+=d,[n,l]}var zR=xs,UR=xs,HR=xs;function pd(t,a,r){return t.l+=2,[tR(t)]}function Ag(t){return t.l+=6,[]}var VR=pd,GR=Ag,YR=Ag,XR=pd;function Y4(t){return t.l+=2,[ka(t),t.read_shift(2)&1]}var qR=pd,$R=Y4,WR=Ag,KR=pd,ZR=pd,QR=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function JR(t){t.l+=2;var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),l=t.read_shift(2),d=t.read_shift(2),f=QR[r>>2&31];return{ixti:a,coltype:r&3,rt:f,idx:n,c:l,C:d}}function e9(t){return t.l+=2,[t.read_shift(4)]}function t9(t,a,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function r9(t,a,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function a9(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function s9(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function n9(t){return t.l+=4,[0,0]}var G2={1:{n:"PtgExp",f:jR},2:{n:"PtgTbl",f:HR},3:{n:"PtgAdd",f:wa},4:{n:"PtgSub",f:wa},5:{n:"PtgMul",f:wa},6:{n:"PtgDiv",f:wa},7:{n:"PtgPower",f:wa},8:{n:"PtgConcat",f:wa},9:{n:"PtgLt",f:wa},10:{n:"PtgLe",f:wa},11:{n:"PtgEq",f:wa},12:{n:"PtgGe",f:wa},13:{n:"PtgGt",f:wa},14:{n:"PtgNe",f:wa},15:{n:"PtgIsect",f:wa},16:{n:"PtgUnion",f:wa},17:{n:"PtgRange",f:wa},18:{n:"PtgUplus",f:wa},19:{n:"PtgUminus",f:wa},20:{n:"PtgPercent",f:wa},21:{n:"PtgParen",f:wa},22:{n:"PtgMissArg",f:wa},23:{n:"PtgStr",f:_R},26:{n:"PtgSheet",f:t9},27:{n:"PtgEndSheet",f:r9},28:{n:"PtgErr",f:CR},29:{n:"PtgBool",f:SR},30:{n:"PtgInt",f:ER},31:{n:"PtgNum",f:AR},32:{n:"PtgArray",f:cR},33:{n:"PtgFunc",f:vR},34:{n:"PtgFuncVar",f:wR},35:{n:"PtgName",f:MR},36:{n:"PtgRef",f:pR},37:{n:"PtgArea",f:sR},38:{n:"PtgMemArea",f:FR},39:{n:"PtgMemErr",f:zR},40:{n:"PtgMemNoMem",f:UR},41:{n:"PtgMemFunc",f:BR},42:{n:"PtgRefErr",f:LR},43:{n:"PtgAreaErr",f:iR},44:{n:"PtgRefN",f:yR},45:{n:"PtgAreaN",f:oR},46:{n:"PtgMemAreaN",f:a9},47:{n:"PtgMemNoMemN",f:s9},57:{n:"PtgNameX",f:IR},58:{n:"PtgRef3d",f:bR},59:{n:"PtgArea3d",f:nR},60:{n:"PtgRefErr3d",f:PR},61:{n:"PtgAreaErr3d",f:lR},255:{}},i9={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},l9={1:{n:"PtgElfLel",f:Y4},2:{n:"PtgElfRw",f:KR},3:{n:"PtgElfCol",f:VR},6:{n:"PtgElfRwV",f:ZR},7:{n:"PtgElfColV",f:XR},10:{n:"PtgElfRadical",f:qR},11:{n:"PtgElfRadicalS",f:WR},13:{n:"PtgElfColS",f:GR},15:{n:"PtgElfColSV",f:YR},16:{n:"PtgElfRadicalLel",f:$R},25:{n:"PtgList",f:JR},29:{n:"PtgSxName",f:e9},255:{}},o9={0:{n:"PtgAttrNoop",f:n9},1:{n:"PtgAttrSemi",f:hR},2:{n:"PtgAttrIf",f:fR},4:{n:"PtgAttrChoose",f:dR},8:{n:"PtgAttrGoto",f:uR},16:{n:"PtgAttrSum",f:kR},32:{n:"PtgAttrBaxcel",f:V2},33:{n:"PtgAttrBaxcel",f:V2},64:{n:"PtgAttrSpace",f:mR},65:{n:"PtgAttrSpaceSemi",f:gR},128:{n:"PtgAttrIfError",f:xR},255:{}};function yd(t,a,r,n){if(n.biff<8)return xs(t,a);for(var l=t.l+a,d=[],f=0;f!==r.length;++f)switch(r[f][0]){case"PtgArray":r[f][1]=RR(t,0,n),d.push(r[f][1]);break;case"PtgMemArea":r[f][2]=DR(t,r[f][1],n),d.push(r[f][2]);break;case"PtgExp":n&&n.biff==12&&(r[f][1][1]=t.read_shift(4),d.push(r[f][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[f][0]}return a=l-t.l,a!==0&&d.push(xs(t,a)),d}function bd(t,a,r){for(var n=t.l+a,l,d,f=[];n!=t.l;)a=n-t.l,d=t[t.l],l=G2[d]||G2[i9[d]],(d===24||d===25)&&(l=(d===24?l9:o9)[t[t.l+1]]),!l||!l.f?xs(t,a):f.push([l.n,l.f(t,a,r)]);return f}function c9(t){for(var a=[],r=0;r<t.length;++r){for(var n=t[r],l=[],d=0;d<n.length;++d){var f=n[d];if(f)switch(f[0]){case 2:l.push('"'+f[1].replace(/"/g,'""')+'"');break;default:l.push(f[1])}else l.push("")}a.push(l.join(","))}return a.join(";")}var d9={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function u9(t,a){if(!t&&!(a&&a.biff<=5&&a.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function X4(t,a,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[a]))return t.SheetNames[a];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[a];if(r.biff<8)return a>1e4&&(a-=65536),a<0&&(a=-a),a==0?"":t.XTI[a-1];if(!n)return"SH33TJSERR1";var l="";if(r.biff>8)switch(t[n[0]][0]){case 357:return l=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?l:l+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return l=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?l:l+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(d){return d.Name}).join(";;");default:return t[n[0]][0][3]?(l=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?l:l+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Y2(t,a,r){var n=X4(t,a,r);return n=="#REF"?n:u9(n,r)}function ls(t,a,r,n,l){var d=l&&l.biff||8,f={s:{c:0,r:0}},h=[],b,g,w,k=0,C=0,S,D="";if(!t[0]||!t[0][0])return"";for(var A=-1,M="",I=0,F=t[0].length;I<F;++I){var T=t[0][I];switch(T[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(b=h.pop(),g=h.pop(),A>=0){switch(t[0][A][1][0]){case 0:M=na(" ",t[0][A][1][1]);break;case 1:M=na("\r",t[0][A][1][1]);break;default:if(M="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}g=g+M,A=-1}h.push(g+d9[T[0]]+b);break;case"PtgIsect":b=h.pop(),g=h.pop(),h.push(g+" "+b);break;case"PtgUnion":b=h.pop(),g=h.pop(),h.push(g+","+b);break;case"PtgRange":b=h.pop(),g=h.pop(),h.push(g+":"+b);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":w=O0(T[1][1],f,l),h.push(F0(w,d));break;case"PtgRefN":w=r?O0(T[1][1],r,l):T[1][1],h.push(F0(w,d));break;case"PtgRef3d":k=T[1][1],w=O0(T[1][2],f,l),D=Y2(n,k,l),h.push(D+"!"+F0(w,d));break;case"PtgFunc":case"PtgFuncVar":var B=T[1][0],H=T[1][1];B||(B=0),B&=127;var U=B==0?[]:h.slice(-B);h.length-=B,H==="User"&&(H=U.shift()),h.push(H+"("+U.join(",")+")");break;case"PtgBool":h.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(T[1]);break;case"PtgNum":h.push(String(T[1]));break;case"PtgStr":h.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(T[1]);break;case"PtgAreaN":S=C2(T[1][1],r?{s:r}:f,l),h.push(um(S,l));break;case"PtgArea":S=C2(T[1][1],f,l),h.push(um(S,l));break;case"PtgArea3d":k=T[1][1],S=T[1][2],D=Y2(n,k,l),h.push(D+"!"+um(S,l));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":C=T[1][2];var L=(n.names||[])[C-1]||(n[0]||[])[C],P=L?L.Name:"SH33TJSNAME"+String(C);P&&P.slice(0,6)=="_xlfn."&&!l.xlfn&&(P=P.slice(6)),h.push(P);break;case"PtgNameX":var z=T[1][1];C=T[1][2];var W;if(l.biff<=5)z<0&&(z=-z),n[z]&&(W=n[z][C]);else{var ee="";if(((n[z]||[])[0]||[])[0]==14849||(((n[z]||[])[0]||[])[0]==1025?n[z][C]&&n[z][C].itab>0&&(ee=n.SheetNames[n[z][C].itab-1]+"!"):ee=n.SheetNames[C-1]+"!"),n[z]&&n[z][C])ee+=n[z][C].Name;else if(n[0]&&n[0][C])ee+=n[0][C].Name;else{var G=(X4(n,z,l)||"").split(";;");G[C-1]?ee=G[C-1]:ee+="SH33TJSERRX"}h.push(ee);break}W||(W={Name:"SH33TJSERRY"}),h.push(W.Name);break;case"PtgParen":var ne="(",le=")";if(A>=0){switch(M="",t[0][A][1][0]){case 2:ne=na(" ",t[0][A][1][1])+ne;break;case 3:ne=na("\r",t[0][A][1][1])+ne;break;case 4:le=na(" ",t[0][A][1][1])+le;break;case 5:le=na("\r",t[0][A][1][1])+le;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}A=-1}h.push(ne+h.pop()+le);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":w={c:T[1][1],r:T[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Zt(w)]){var X=n.sharedf[Zt(w)];h.push(ls(X,f,Y,n,l))}else{var de=!1;for(b=0;b!=n.arrayf.length;++b)if(g=n.arrayf[b],!(w.c<g[0].s.c||w.c>g[0].e.c)&&!(w.r<g[0].s.r||w.r>g[0].e.r)){h.push(ls(g[1],f,Y,n,l)),de=!0;break}de||h.push(T[1])}break;case"PtgArray":h.push("{"+c9(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":A=I;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var ye=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&A>=0&&ye.indexOf(t[0][I][0])==-1){T=t[0][A];var oe=!0;switch(T[1][0]){case 4:oe=!1;case 0:M=na(" ",T[1][1]);break;case 5:oe=!1;case 1:M=na("\r",T[1][1]);break;default:if(M="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}h.push((oe?M:"")+h.pop()+(oe?"":M)),A=-1}}if(h.length>1&&l.WTF)throw new Error("bad formula stack");return h[0]}function f9(t,a,r){var n=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],xs(t,a-2)];var h=bd(t,f,r);return a!==f+l&&(d=yd(t,a-f-l,h,r)),t.l=n,[h,d]}function x9(t,a,r){var n=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],xs(t,a-2)];var h=bd(t,f,r);return a!==f+l&&(d=yd(t,a-f-l,h,r)),t.l=n,[h,d]}function h9(t,a,r,n){var l=t.l+a,d=bd(t,n,r),f;return l!==t.l&&(f=yd(t,l-t.l,d,r)),[d,f]}function m9(t,a,r){var n=t.l+a,l,d=t.read_shift(2),f=bd(t,d,r);return d==65535?[[],xs(t,a-2)]:(a!==d+2&&(l=yd(t,n-d-2,f,r)),[f,l])}function g9(t){var a;if(Di(t,t.l+6)!==65535)return[cs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return a=t[t.l+2]===1,t.l+=8,[a,"b"];case 2:return a=t[t.l+2],t.l+=8,[a,"e"];case 3:return t.l+=8,["","s"]}return[]}function hm(t,a,r){var n=t.l+a,l=di(t);r.biff==2&&++t.l;var d=g9(t),f=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var h=x9(t,n-t.l,r);return{cell:l,val:d[0],formula:h,shared:f>>3&1,tt:d[1]}}function Df(t,a,r){var n=t.read_shift(4),l=bd(t,n,r),d=t.read_shift(4),f=d>0?yd(t,d,l,r):null;return[l,f]}var p9=Df,Rf=Df,y9=Df,b9=Df,v9={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},q4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},w9={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function X2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(a,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function mm(t){var a=t.split(":"),r=a[0].split(".")[0];return[r,a[0].split(".")[1]+(a.length>1?":"+(a[1].split(".")[1]||a[1].split(".")[0]):"")]}var z0={},vc={};function U0(t,a){if(t){var r=[.7,.7,.75,.75,.3,.3];a=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function $4(t,a,r,n,l,d){try{n.cellNF&&(t.z=tr[a])}catch(h){if(n.WTF)throw h}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Va(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(tr[a]==null&&uo(N8[a]||"General",a),t.t==="e")t.w=t.w||Ao[t.v];else if(a===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K0(t.v);else if(t.t==="d"){var f=Cs(t.v);(f|0)===f?t.w=f.toString(10):t.w=K0(f)}else{if(t.v===void 0)return"";t.w=bo(t.v,vc)}else t.t==="d"?t.w=mn(a,Cs(t.v),vc):t.w=mn(a,t.v,vc)}catch(h){if(n.WTF)throw h}if(n.cellStyles&&r!=null)try{t.s=d.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=df(l.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=l.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=df(l.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=l.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(h){if(n.WTF&&d.Fills)throw h}}}function N9(t,a){var r=la(a);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=yr(r))}var k9=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,j9=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,C9=/<(?:\w:)?hyperlink [^>]*>/mg,E9=/"(\w*:\w*)"/,S9=/<(?:\w:)?col\b[^>]*[\/]?>/g,A9=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,_9=/<(?:\w:)?pageMargins[^>]*\/>/g,W4=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,T9=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,D9=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function R9(t,a,r,n,l,d,f){if(!t)return t;n||(n={"!id":{}});var h=a.dense?[]:{},b={s:{r:2e6,c:2e6},e:{r:0,c:0}},g="",w="",k=t.match(j9);k?(g=t.slice(0,k.index),w=t.slice(k.index+k[0].length)):g=w=t;var C=g.match(W4);C?_g(C[0],h,l,r):(C=g.match(T9))&&M9(C[0],C[1]||"",h,l,r);var S=(g.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(S>0){var D=g.slice(S,S+50).match(E9);D&&N9(h,D[1])}var A=g.match(D9);A&&A[1]&&P9(A[1],l);var M=[];if(a.cellStyles){var I=g.match(S9);I&&F9(M,I)}k&&z9(k[1],h,a,b,d,f);var F=w.match(A9);F&&(h["!autofilter"]=B9(F[0]));var T=[],B=w.match(k9);if(B)for(S=0;S!=B.length;++S)T[S]=la(B[S].slice(B[S].indexOf('"')+1));var H=w.match(C9);H&&I9(h,H,n);var U=w.match(_9);if(U&&(h["!margins"]=O9(Vt(U[0]))),!h["!ref"]&&b.e.c>=b.s.c&&b.e.r>=b.s.r&&(h["!ref"]=yr(b)),a.sheetRows>0&&h["!ref"]){var L=la(h["!ref"]);a.sheetRows<=+L.e.r&&(L.e.r=a.sheetRows-1,L.e.r>b.e.r&&(L.e.r=b.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>b.e.c&&(L.e.c=b.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),h["!fullref"]=h["!ref"],h["!ref"]=yr(L))}return M.length>0&&(h["!cols"]=M),T.length>0&&(h["!merges"]=T),h}function _g(t,a,r,n){var l=Vt(t);r.Sheets[n]||(r.Sheets[n]={}),l.codeName&&(r.Sheets[n].CodeName=br(Ur(l.codeName)))}function M9(t,a,r,n,l){_g(t.slice(0,t.indexOf(">")),r,n,l)}function I9(t,a,r){for(var n=Array.isArray(t),l=0;l!=a.length;++l){var d=Vt(Ur(a[l]),!0);if(!d.ref)return;var f=((r||{})["!id"]||[])[d.id];f?(d.Target=f.Target,d.location&&(d.Target+="#"+br(d.location))):(d.Target="#"+br(d.location),f={Target:d.Target,TargetMode:"Internal"}),d.Rel=f,d.tooltip&&(d.Tooltip=d.tooltip,delete d.tooltip);for(var h=la(d.ref),b=h.s.r;b<=h.e.r;++b)for(var g=h.s.c;g<=h.e.c;++g){var w=Zt({c:g,r:b});n?(t[b]||(t[b]=[]),t[b][g]||(t[b][g]={t:"z",v:void 0}),t[b][g].l=d):(t[w]||(t[w]={t:"z",v:void 0}),t[w].l=d)}}}function O9(t){var a={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(a[r]=parseFloat(t[r]))}),a}function F9(t,a){for(var r=!1,n=0;n!=a.length;++n){var l=Vt(a[n],!0);l.hidden&&(l.hidden=Wr(l.hidden));var d=parseInt(l.min,10)-1,f=parseInt(l.max,10)-1;for(l.outlineLevel&&(l.level=+l.outlineLevel||0),delete l.min,delete l.max,l.width=+l.width,!r&&l.width&&(r=!0,Sg(l.width)),Cc(l);d<=f;)t[d++]=Wa(l)}}function B9(t){var a={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return a}var L9=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function P9(t,a){a.Views||(a.Views=[{}]),(t.match(L9)||[]).forEach(function(r,n){var l=Vt(r);a.Views[n]||(a.Views[n]={}),+l.zoomScale&&(a.Views[n].zoom=+l.zoomScale),Wr(l.rightToLeft)&&(a.Views[n].RTL=!0)})}var z9=function(){var t=/<(?:\w+:)?c[ \/>]/,a=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,l=/ref=["']([^"']*)["']/,d=Z0("v"),f=Z0("f");return function(b,g,w,k,C,S){for(var D=0,A="",M=[],I=[],F=0,T=0,B=0,H="",U,L,P=0,z=0,W,ee,G=0,ne=0,le=Array.isArray(S.CellXf),Y,X=[],de=[],ye=Array.isArray(g),oe=[],xe={},ae=!1,q=!!w.sheetStubs,K=b.split(a),se=0,re=K.length;se!=re;++se){A=K[se].trim();var te=A.length;if(te!==0){var Re=0;e:for(D=0;D<te;++D)switch(A[D]){case">":if(A[D-1]!="/"){++D;break e}if(w&&w.cellStyles){if(L=Vt(A.slice(Re,D),!0),P=L.r!=null?parseInt(L.r,10):P+1,z=-1,w.sheetRows&&w.sheetRows<P)continue;xe={},ae=!1,L.ht&&(ae=!0,xe.hpt=parseFloat(L.ht),xe.hpx=td(xe.hpt)),L.hidden=="1"&&(ae=!0,xe.hidden=!0),L.outlineLevel!=null&&(ae=!0,xe.level=+L.outlineLevel),ae&&(oe[P-1]=xe)}break;case"<":Re=D;break}if(Re>=D)break;if(L=Vt(A.slice(Re,D),!0),P=L.r!=null?parseInt(L.r,10):P+1,z=-1,!(w.sheetRows&&w.sheetRows<P)){k.s.r>P-1&&(k.s.r=P-1),k.e.r<P-1&&(k.e.r=P-1),w&&w.cellStyles&&(xe={},ae=!1,L.ht&&(ae=!0,xe.hpt=parseFloat(L.ht),xe.hpx=td(xe.hpt)),L.hidden=="1"&&(ae=!0,xe.hidden=!0),L.outlineLevel!=null&&(ae=!0,xe.level=+L.outlineLevel),ae&&(oe[P-1]=xe)),M=A.slice(D).split(t);for(var ke=0;ke!=M.length&&M[ke].trim().charAt(0)=="<";++ke);for(M=M.slice(ke),D=0;D!=M.length;++D)if(A=M[D].trim(),A.length!==0){if(I=A.match(r),F=D,T=0,B=0,A="<c "+(A.slice(0,1)=="<"?">":"")+A,I!=null&&I.length===2){for(F=0,H=I[1],T=0;T!=H.length&&!((B=H.charCodeAt(T)-64)<1||B>26);++T)F=26*F+B;--F,z=F}else++z;for(T=0;T!=A.length&&A.charCodeAt(T)!==62;++T);if(++T,L=Vt(A.slice(0,T),!0),L.r||(L.r=Zt({r:P-1,c:z})),H=A.slice(T),U={t:""},(I=H.match(d))!=null&&I[1]!==""&&(U.v=br(I[1])),w.cellFormula){if((I=H.match(f))!=null&&I[1]!==""){if(U.f=br(Ur(I[1])).replace(/\r\n/g,`
`),w.xlfn||(U.f=H2(U.f)),I[0].indexOf('t="array"')>-1)U.F=(H.match(l)||[])[1],U.F.indexOf(":")>-1&&X.push([la(U.F),U.F]);else if(I[0].indexOf('t="shared"')>-1){ee=Vt(I[0]);var Ve=br(Ur(I[1]));w.xlfn||(Ve=H2(Ve)),de[parseInt(ee.si,10)]=[ee,Ve,L.r]}}else(I=H.match(/<f[^>]*\/>/))&&(ee=Vt(I[0]),de[ee.si]&&(U.f=ZD(de[ee.si][1],de[ee.si][2],L.r)));var Oe=Ns(L.r);for(T=0;T<X.length;++T)Oe.r>=X[T][0].s.r&&Oe.r<=X[T][0].e.r&&Oe.c>=X[T][0].s.c&&Oe.c<=X[T][0].e.c&&(U.F=X[T][1])}if(L.t==null&&U.v===void 0)if(U.f||U.F)U.v=0,U.t="n";else if(q)U.t="z";else continue;else U.t=L.t||"n";switch(k.s.c>z&&(k.s.c=z),k.e.c<z&&(k.e.c=z),U.t){case"n":if(U.v==""||U.v==null){if(!q)continue;U.t="z"}else U.v=parseFloat(U.v);break;case"s":if(typeof U.v>"u"){if(!q)continue;U.t="z"}else W=z0[parseInt(U.v,10)],U.v=W.t,U.r=W.r,w.cellHTML&&(U.h=W.h);break;case"str":U.t="s",U.v=U.v!=null?Ur(U.v):"",w.cellHTML&&(U.h=gg(U.v));break;case"inlineStr":I=H.match(n),U.t="s",I!=null&&(W=Eg(I[1]))?(U.v=W.t,w.cellHTML&&(U.h=W.h)):U.v="";break;case"b":U.v=Wr(U.v);break;case"d":w.cellDates?U.v=Va(U.v,1):(U.v=Cs(Va(U.v,1)),U.t="n");break;case"e":(!w||w.cellText!==!1)&&(U.w=U.v),U.v=g4[U.v];break}if(G=ne=0,Y=null,le&&L.s!==void 0&&(Y=S.CellXf[L.s],Y!=null&&(Y.numFmtId!=null&&(G=Y.numFmtId),w.cellStyles&&Y.fillId!=null&&(ne=Y.fillId))),$4(U,G,ne,w,C,S),w.cellDates&&le&&U.t=="n"&&Rc(tr[G])&&(U.t="d",U.v=_f(U.v)),L.cm&&w.xlmeta){var et=(w.xlmeta.Cell||[])[+L.cm-1];et&&et.type=="XLDAPR"&&(U.D=!0)}if(ye){var be=Ns(L.r);g[be.r]||(g[be.r]=[]),g[be.r][be.c]=U}else g[L.r]=U}}}}oe.length>0&&(g["!rows"]=oe)}}();function U9(t,a){var r={},n=t.l+a;r.r=t.read_shift(4),t.l+=4;var l=t.read_shift(2);t.l+=1;var d=t.read_shift(1);return t.l=n,d&7&&(r.level=d&7),d&16&&(r.hidden=!0),d&32&&(r.hpt=l/20),r}var H9=So;function V9(){}function G9(t,a){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=fT(t),r}function Y9(t){var a=pn(t);return[a]}function X9(t){var a=Eo(t);return[a]}function q9(t){var a=pn(t),r=t.read_shift(1);return[a,r,"b"]}function $9(t){var a=Eo(t),r=t.read_shift(1);return[a,r,"b"]}function W9(t){var a=pn(t),r=t.read_shift(1);return[a,r,"e"]}function K9(t){var a=Eo(t),r=t.read_shift(1);return[a,r,"e"]}function Z9(t){var a=pn(t),r=t.read_shift(4);return[a,r,"s"]}function Q9(t){var a=Eo(t),r=t.read_shift(4);return[a,r,"s"]}function J9(t){var a=pn(t),r=cs(t);return[a,r,"n"]}function K4(t){var a=Eo(t),r=cs(t);return[a,r,"n"]}function eM(t){var a=pn(t),r=kg(t);return[a,r,"n"]}function tM(t){var a=Eo(t),r=kg(t);return[a,r,"n"]}function rM(t){var a=pn(t),r=wg(t);return[a,r,"is"]}function aM(t){var a=pn(t),r=fs(t);return[a,r,"str"]}function sM(t){var a=Eo(t),r=fs(t);return[a,r,"str"]}function nM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"b"];if(r.cellFormula){t.l+=2;var h=Rf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}function iM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"e"];if(r.cellFormula){t.l+=2;var h=Rf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}function lM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=cs(t),f=[l,d,"n"];if(r.cellFormula){t.l+=2;var h=Rf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}function oM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=fs(t),f=[l,d,"str"];if(r.cellFormula){t.l+=2;var h=Rf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}var cM=So;function dM(t,a){var r=t.l+a,n=So(t),l=Ng(t),d=fs(t),f=fs(t),h=fs(t);t.l=r;var b={rfx:n,relId:l,loc:d,display:h};return f&&(b.Tooltip=f),b}function uM(){}function fM(t,a,r){var n=t.l+a,l=x4(t),d=t.read_shift(1),f=[l];if(f[2]=d,r.cellFormula){var h=p9(t,n-t.l,r);f[1]=h}else t.l=n;return f}function xM(t,a,r){var n=t.l+a,l=So(t),d=[l];if(r.cellFormula){var f=b9(t,n-t.l,r);d[1]=f,t.l=n}else t.l=n;return d}var hM=["left","right","top","bottom","header","footer"];function mM(t){var a={};return hM.forEach(function(r){a[r]=cs(t)}),a}function gM(t){var a=t.read_shift(2);return t.l+=28,{RTL:a&32}}function pM(){}function yM(){}function bM(t,a,r,n,l,d,f){if(!t)return t;var h=a||{};n||(n={"!id":{}});var b=h.dense?[]:{},g,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=!1,C=!1,S,D,A,M,I,F,T,B,H,U=[];h.biff=12,h["!row"]=0;var L=0,P=!1,z=[],W={},ee=h.supbooks||l.supbooks||[[]];if(ee.sharedf=W,ee.arrayf=z,ee.SheetNames=l.SheetNames||l.Sheets.map(function(ye){return ye.name}),!h.supbooks&&(h.supbooks=ee,l.Names))for(var G=0;G<l.Names.length;++G)ee[0][G+1]=l.Names[G];var ne=[],le=[],Y=!1;xf[16]={n:"BrtShortReal",f:K4};var X;if(Hi(t,function(oe,xe,ae){if(!C)switch(ae){case 148:g=oe;break;case 0:S=oe,h.sheetRows&&h.sheetRows<=S.r&&(C=!0),B=Ka(M=S.r),h["!row"]=S.r,(oe.hidden||oe.hpt||oe.level!=null)&&(oe.hpt&&(oe.hpx=td(oe.hpt)),le[oe.r]=oe);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(D={t:oe[2]},oe[2]){case"n":D.v=oe[1];break;case"s":T=z0[oe[1]],D.v=T.t,D.r=T.r;break;case"b":D.v=!!oe[1];break;case"e":D.v=oe[1],h.cellText!==!1&&(D.w=Ao[D.v]);break;case"str":D.t="s",D.v=oe[1];break;case"is":D.t="s",D.v=oe[1].t;break}if((A=f.CellXf[oe[0].iStyleRef])&&$4(D,A.numFmtId,null,h,d,f),I=oe[0].c==-1?I+1:oe[0].c,h.dense?(b[M]||(b[M]=[]),b[M][I]=D):b[Fa(I)+B]=D,h.cellFormula){for(P=!1,L=0;L<z.length;++L){var q=z[L];S.r>=q[0].s.r&&S.r<=q[0].e.r&&I>=q[0].s.c&&I<=q[0].e.c&&(D.F=yr(q[0]),P=!0)}!P&&oe.length>3&&(D.f=oe[3])}if(w.s.r>S.r&&(w.s.r=S.r),w.s.c>I&&(w.s.c=I),w.e.r<S.r&&(w.e.r=S.r),w.e.c<I&&(w.e.c=I),h.cellDates&&A&&D.t=="n"&&Rc(tr[A.numFmtId])){var K=lo(D.v);K&&(D.t="d",D.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}X&&(X.type=="XLDAPR"&&(D.D=!0),X=void 0);break;case 1:case 12:if(!h.sheetStubs||k)break;D={t:"z",v:void 0},I=oe[0].c==-1?I+1:oe[0].c,h.dense?(b[M]||(b[M]=[]),b[M][I]=D):b[Fa(I)+B]=D,w.s.r>S.r&&(w.s.r=S.r),w.s.c>I&&(w.s.c=I),w.e.r<S.r&&(w.e.r=S.r),w.e.c<I&&(w.e.c=I),X&&(X.type=="XLDAPR"&&(D.D=!0),X=void 0);break;case 176:U.push(oe);break;case 49:X=((h.xlmeta||{}).Cell||[])[oe-1];break;case 494:var se=n["!id"][oe.relId];for(se?(oe.Target=se.Target,oe.loc&&(oe.Target+="#"+oe.loc),oe.Rel=se):oe.relId==""&&(oe.Target="#"+oe.loc),M=oe.rfx.s.r;M<=oe.rfx.e.r;++M)for(I=oe.rfx.s.c;I<=oe.rfx.e.c;++I)h.dense?(b[M]||(b[M]=[]),b[M][I]||(b[M][I]={t:"z",v:void 0}),b[M][I].l=oe):(F=Zt({c:I,r:M}),b[F]||(b[F]={t:"z",v:void 0}),b[F].l=oe);break;case 426:if(!h.cellFormula)break;z.push(oe),H=h.dense?b[M][I]:b[Fa(I)+B],H.f=ls(oe[1],w,{r:S.r,c:I},ee,h),H.F=yr(oe[0]);break;case 427:if(!h.cellFormula)break;W[Zt(oe[0].s)]=oe[1],H=h.dense?b[M][I]:b[Fa(I)+B],H.f=ls(oe[1],w,{r:S.r,c:I},ee,h);break;case 60:if(!h.cellStyles)break;for(;oe.e>=oe.s;)ne[oe.e--]={width:oe.w/256,hidden:!!(oe.flags&1),level:oe.level},Y||(Y=!0,Sg(oe.w/256)),Cc(ne[oe.e+1]);break;case 161:b["!autofilter"]={ref:yr(oe)};break;case 476:b["!margins"]=oe;break;case 147:l.Sheets[r]||(l.Sheets[r]={}),oe.name&&(l.Sheets[r].CodeName=oe.name),(oe.above||oe.left)&&(b["!outline"]={above:oe.above,left:oe.left});break;case 137:l.Views||(l.Views=[{}]),l.Views[0]||(l.Views[0]={}),oe.RTL&&(l.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:k=!0;break;case 36:k=!1;break;case 37:k=!0;break;case 38:k=!1;break;default:if(!xe.T){if(!k||h.WTF)throw new Error("Unexpected record 0x"+ae.toString(16))}}},h),delete h.supbooks,delete h["!row"],!b["!ref"]&&(w.s.r<2e6||g&&(g.e.r>0||g.e.c>0||g.s.r>0||g.s.c>0))&&(b["!ref"]=yr(g||w)),h.sheetRows&&b["!ref"]){var de=la(b["!ref"]);h.sheetRows<=+de.e.r&&(de.e.r=h.sheetRows-1,de.e.r>w.e.r&&(de.e.r=w.e.r),de.e.r<de.s.r&&(de.s.r=de.e.r),de.e.c>w.e.c&&(de.e.c=w.e.c),de.e.c<de.s.c&&(de.s.c=de.e.c),b["!fullref"]=b["!ref"],b["!ref"]=yr(de))}return U.length>0&&(b["!merges"]=U),ne.length>0&&(b["!cols"]=ne),le.length>0&&(b["!rows"]=le),b}function vM(t){var a=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(d){var f=d.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);f&&(a[+f[1]]=r?+f[2]:f[2])});var l=br((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(d){n=d.replace(/<.*?>/g,"")}),[a,l,n]}function wM(t,a,r,n,l,d){var f=d||{"!type":"chart"};if(!t)return d;var h=0,b=0,g="A",w={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(k){var C=vM(k);w.s.r=w.s.c=0,w.e.c=h,g=Fa(h),C[0].forEach(function(S,D){f[g+Ka(D)]={t:"n",v:S,z:C[1]},b=D}),w.e.r<b&&(w.e.r=b),++h}),h>0&&(f["!ref"]=yr(w)),f}function NM(t,a,r,n,l){if(!t)return t;n||(n={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f,h=t.match(W4);return h&&_g(h[0],d,l,r),(f=t.match(/drawing r:id="(.*?)"/))&&(d["!rel"]=f[1]),n["!id"][d["!rel"]]&&(d["!drawel"]=n["!id"][d["!rel"]]),d}function kM(t,a){t.l+=10;var r=fs(t);return{name:r}}function jM(t,a,r,n,l){if(!t)return t;n||(n={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f=!1;return Hi(t,function(b,g,w){switch(w){case 550:d["!rel"]=b;break;case 651:l.Sheets[r]||(l.Sheets[r]={}),b.name&&(l.Sheets[r].CodeName=b.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:break;case 38:break;default:if(!(g.T>0)){if(!(g.T<0)){if(!f||a.WTF)throw new Error("Unexpected record 0x"+w.toString(16))}}}},a),n["!id"][d["!rel"]]&&(d["!drawel"]=n["!id"][d["!rel"]]),d}var Z4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],CM=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],EM=[],SM=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function q2(t,a){for(var r=0;r!=t.length;++r)for(var n=t[r],l=0;l!=a.length;++l){var d=a[l];if(n[d[0]]==null)n[d[0]]=d[1];else switch(d[2]){case"bool":typeof n[d[0]]=="string"&&(n[d[0]]=Wr(n[d[0]]));break;case"int":typeof n[d[0]]=="string"&&(n[d[0]]=parseInt(n[d[0]],10));break}}}function $2(t,a){for(var r=0;r!=a.length;++r){var n=a[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Wr(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function Q4(t){$2(t.WBProps,Z4),$2(t.CalcPr,SM),q2(t.WBView,CM),q2(t.Sheets,EM),vc.date1904=Wr(t.WBProps.date1904)}var AM="][*?/\\".split("");function _M(t,a){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return AM.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var TM=/<\w+:workbook/;function DM(t,a){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,l="xmlns",d={},f=0;if(t.replace(hs,function(b,g){var w=Vt(b);switch(ci(w[0])){case"<?xml":break;case"<workbook":b.match(TM)&&(l="xmlns"+b.match(/<(\w+):/)[1]),r.xmlns=w[l];break;case"</workbook>":break;case"<fileVersion":delete w[0],r.AppVersion=w;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Z4.forEach(function(k){if(w[k[0]]!=null)switch(k[2]){case"bool":r.WBProps[k[0]]=Wr(w[k[0]]);break;case"int":r.WBProps[k[0]]=parseInt(w[k[0]],10);break;default:r.WBProps[k[0]]=w[k[0]]}}),w.codeName&&(r.WBProps.CodeName=Ur(w.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete w[0],r.WBView.push(w);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(w.state){case"hidden":w.Hidden=1;break;case"veryHidden":w.Hidden=2;break;default:w.Hidden=0}delete w.state,w.name=br(Ur(w.name)),delete w[0],r.Sheets.push(w);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":d={},d.Name=Ur(w.name),w.comment&&(d.Comment=w.comment),w.localSheetId&&(d.Sheet=+w.localSheetId),Wr(w.hidden||"0")&&(d.Hidden=!0),f=g+b.length;break;case"</definedName>":d.Ref=br(Ur(t.slice(f,g))),r.Names.push(d);break;case"<definedName/>":break;case"<calcPr":delete w[0],r.CalcPr=w;break;case"<calcPr/>":delete w[0],r.CalcPr=w;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&a.WTF)throw new Error("unrecognized "+w[0]+" in workbook")}return b}),W8.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Q4(r),r}function RM(t,a){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=zm(t),r.name=fs(t),r}function MM(t,a){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var l=a>8?fs(t):"";return l.length>0&&(r.CodeName=l),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function IM(t,a){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=a-8,r}function OM(t,a,r){var n=t.l+a;t.l+=4,t.l+=1;var l=t.read_shift(4),d=xT(t),f=y9(t,0,r),h=Ng(t);t.l=n;var b={Name:d,Ptg:f};return l<268435455&&(b.Sheet=l),h&&(b.Comment=h),b}function FM(t,a){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],l=!1;a||(a={}),a.biff=12;var d=[],f=[[]];return f.SheetNames=[],f.XTI=[],xf[16]={n:"BrtFRTArchID$",f:IM},Hi(t,function(b,g,w){switch(w){case 156:f.SheetNames.push(b.name),r.Sheets.push(b);break;case 153:r.WBProps=b;break;case 39:b.Sheet!=null&&(a.SID=b.Sheet),b.Ref=ls(b.Ptg,null,null,f,a),delete a.SID,delete b.Ptg,d.push(b);break;case 1036:break;case 357:case 358:case 355:case 667:f[0].length?f.push([w,b]):f[0]=[w,b],f[f.length-1].XTI=[];break;case 362:f.length===0&&(f[0]=[],f[0].XTI=[]),f[f.length-1].XTI=f[f.length-1].XTI.concat(b),f.XTI=f.XTI.concat(b);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(w),l=!0;break;case 36:n.pop(),l=!1;break;case 37:n.push(w),l=!0;break;case 38:n.pop(),l=!1;break;case 16:break;default:if(!g.T){if(!l||a.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}},a),Q4(r),r.Names=d,r.supbooks=f,r}function BM(t,a,r){return a.slice(-4)===".bin"?FM(t,r):DM(t,r)}function LM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?bM(t,n,r,l,d,f,h):R9(t,n,r,l,d,f,h)}function PM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?jM(t,n,r,l,d):NM(t,n,r,l,d)}function zM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?$D():WD()}function UM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?XD():qD()}function HM(t,a,r,n){return a.slice(-4)===".bin"?cD(t,r,n):aD(t,r,n)}function VM(t,a,r){return L4(t,r)}function GM(t,a,r){return a.slice(-4)===".bin"?C7(t,r):k7(t,r)}function YM(t,a,r){return a.slice(-4)===".bin"?VD(t,r):LD(t,r)}function XM(t,a,r){return a.slice(-4)===".bin"?OD(t):MD(t)}function qM(t,a,r,n){return r.slice(-4)===".bin"?FD(t,a,r,n):void 0}function $M(t,a,r){return a.slice(-4)===".bin"?DD(t,a,r):RD(t,a,r)}var J4=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,eN=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Cn(t,a){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var l=t.match(J4),d,f,h,b;if(l)for(b=0;b!=l.length;++b)d=l[b].match(eN),(f=d[1].indexOf(":"))===-1?n[d[1]]=d[2].slice(1,d[2].length-1):(d[1].slice(0,6)==="xmlns:"?h="xmlns"+d[1].slice(6):h=d[1].slice(f+1),n[h]=d[2].slice(1,d[2].length-1));return n}function WM(t){var a=t.split(/\s+/),r={};if(a.length===1)return r;var n=t.match(J4),l,d,f,h;if(n)for(h=0;h!=n.length;++h)l=n[h].match(eN),(d=l[1].indexOf(":"))===-1?r[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?f="xmlns"+l[1].slice(6):f=l[1].slice(d+1),r[f]=l[2].slice(1,l[2].length-1));return r}var H0;function KM(t,a){var r=H0[t]||br(t);return r==="General"?bo(a):mn(r,a)}function ZM(t,a,r,n){var l=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":l=Wr(n);break;case"i2":case"int":l=parseInt(n,10);break;case"r4":case"float":l=parseFloat(n);break;case"date":case"dateTime.tz":l=Va(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[br(a)]=l}function QM(t,a,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Ao[t.v]:a==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K0(t.v):t.w=bo(t.v):t.w=KM(a||"General",t.v)}catch(d){if(r.WTF)throw d}try{var n=H0[a]||a||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Rc(n)){var l=lo(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}catch(d){if(r.WTF)throw d}}}function JM(t,a,r){if(r.cellStyles&&a.Interior){var n=a.Interior;n.Pattern&&(n.patternType=Z7[n.Pattern]||n.Pattern)}t[a.ID]=a}function eI(t,a,r,n,l,d,f,h,b,g){var w="General",k=n.StyleID,C={};g=g||{};var S=[],D=0;for(k===void 0&&h&&(k=h.StyleID),k===void 0&&f&&(k=f.StyleID);d[k]!==void 0&&(d[k].nf&&(w=d[k].nf),d[k].Interior&&S.push(d[k].Interior),!!d[k].Parent);)k=d[k].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Wr(t);break;case"String":n.t="s",n.r=g2(br(t)),n.v=t.indexOf("<")>-1?br(a||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Va(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=br(t):n.v<60&&(n.v=n.v-1),(!w||w=="General")&&(w="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=g4[t],g.cellText!==!1&&(n.w=t);break;default:t==""&&a==""?n.t="z":(n.t="s",n.v=g2(a||t));break}if(QM(n,w,g),g.cellFormula!==!1)if(n.Formula){var A=br(n.Formula);A.charCodeAt(0)==61&&(A=A.slice(1)),n.f=bc(A,l),delete n.Formula,n.ArrayRange=="RC"?n.F=bc("RC:RC",l):n.ArrayRange&&(n.F=bc(n.ArrayRange,l),b.push([la(n.F),n.F]))}else for(D=0;D<b.length;++D)l.r>=b[D][0].s.r&&l.r<=b[D][0].e.r&&l.c>=b[D][0].s.c&&l.c<=b[D][0].e.c&&(n.F=b[D][1]);g.cellStyles&&(S.forEach(function(M){!C.patternType&&M.patternType&&(C.patternType=M.patternType)}),n.s=C),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function tI(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function gm(t,a){var r=a||{};Hw();var n=T0(pg(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ur(n));var l=n.slice(0,1024).toLowerCase(),d=!1;if(l=l.replace(/".*?"/g,""),(l.indexOf(">")&1023)>Math.min(l.indexOf(",")&1023,l.indexOf(";")&1023)){var f=Wa(r);return f.type="string",J0.to_workbook(n,f)}if(l.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Le){l.indexOf("<"+Le)>=0&&(d=!0)}),d)return dI(n,r);H0={"General Number":"General","General Date":tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tr[15],"Short Date":tr[14],"Long Time":tr[19],"Medium Time":tr[18],"Short Time":tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tr[2],Standard:tr[4],Percent:tr[10],Scientific:tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var h,b=[],g,w={},k=[],C=r.dense?[]:{},S="",D={},A={},M=Cn('<Data ss:Type="String">'),I=0,F=0,T=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},U={},L="",P=0,z=[],W={},ee={},G=0,ne=[],le=[],Y={},X=[],de,ye=!1,oe=[],xe=[],ae={},q=0,K=0,se={Sheets:[],WBProps:{date1904:!1}},re={};Q0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var te="";h=Q0.exec(n);)switch(h[3]=(te=h[3]).toLowerCase()){case"data":if(te=="data"){if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break}if(b[b.length-1][1])break;h[1]==="/"?eI(n.slice(I,h.index),L,M,b[b.length-1][0]=="comment"?Y:D,{c:F,r:T},H,X[F],A,oe,r):(L="",M=Cn(h[0]),I=h.index+h[0].length);break;case"cell":if(h[1]==="/")if(le.length>0&&(D.c=le),(!r.sheetRows||r.sheetRows>T)&&D.v!==void 0&&(r.dense?(C[T]||(C[T]=[]),C[T][F]=D):C[Fa(F)+Ka(T)]=D),D.HRef&&(D.l={Target:br(D.HRef)},D.HRefScreenTip&&(D.l.Tooltip=D.HRefScreenTip),delete D.HRef,delete D.HRefScreenTip),(D.MergeAcross||D.MergeDown)&&(q=F+(parseInt(D.MergeAcross,10)|0),K=T+(parseInt(D.MergeDown,10)|0),z.push({s:{c:F,r:T},e:{c:q,r:K}})),!r.sheetStubs)D.MergeAcross?F=q+1:++F;else if(D.MergeAcross||D.MergeDown){for(var Re=F;Re<=q;++Re)for(var ke=T;ke<=K;++ke)(Re>F||ke>T)&&(r.dense?(C[ke]||(C[ke]=[]),C[ke][Re]={t:"z"}):C[Fa(Re)+Ka(ke)]={t:"z"});F=q+1}else++F;else D=WM(h[0]),D.Index&&(F=+D.Index-1),F<B.s.c&&(B.s.c=F),F>B.e.c&&(B.e.c=F),h[0].slice(-2)==="/>"&&++F,le=[];break;case"row":h[1]==="/"||h[0].slice(-2)==="/>"?(T<B.s.r&&(B.s.r=T),T>B.e.r&&(B.e.r=T),h[0].slice(-2)==="/>"&&(A=Cn(h[0]),A.Index&&(T=+A.Index-1)),F=0,++T):(A=Cn(h[0]),A.Index&&(T=+A.Index-1),ae={},(A.AutoFitHeight=="0"||A.Height)&&(ae.hpx=parseInt(A.Height,10),ae.hpt=B4(ae.hpx),xe[T]=ae),A.Hidden=="1"&&(ae.hidden=!0,xe[T]=ae));break;case"worksheet":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"));k.push(S),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(C["!ref"]=yr(B),r.sheetRows&&r.sheetRows<=B.e.r&&(C["!fullref"]=C["!ref"],B.e.r=r.sheetRows-1,C["!ref"]=yr(B))),z.length&&(C["!merges"]=z),X.length>0&&(C["!cols"]=X),xe.length>0&&(C["!rows"]=xe),w[S]=C}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=F=0,b.push([h[3],!1]),g=Cn(h[0]),S=br(g.Name),C=r.dense?[]:{},z=[],oe=[],xe=[],re={name:S,Hidden:0},se.Sheets.push(re);break;case"table":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else{if(h[0].slice(-2)=="/>")break;b.push([h[3],!1]),X=[],ye=!1}break;case"style":h[1]==="/"?JM(H,U,r):U=Cn(h[0]);break;case"numberformat":U.nf=br(Cn(h[0]).Format||"General"),H0[U.nf]&&(U.nf=H0[U.nf]);for(var Ve=0;Ve!=392&&tr[Ve]!=U.nf;++Ve);if(Ve==392){for(Ve=57;Ve!=392;++Ve)if(tr[Ve]==null){uo(U.nf,Ve);break}}break;case"column":if(b[b.length-1][0]!=="table")break;if(de=Cn(h[0]),de.Hidden&&(de.hidden=!0,delete de.Hidden),de.Width&&(de.wpx=parseInt(de.Width,10)),!ye&&de.wpx>10){ye=!0,vs=O4;for(var Oe=0;Oe<X.length;++Oe)X[Oe]&&Cc(X[Oe])}ye&&Cc(de),X[de.Index-1||X.length]=de;for(var et=0;et<+de.Span;++et)X[X.length]=Wa(de);break;case"namedrange":if(h[1]==="/")break;se.Names||(se.Names=[]);var be=Vt(h[0]),Ae={Name:be.Name,Ref:bc(be.RefersTo.slice(1),{r:0,c:0})};se.Sheets.length>0&&(Ae.Sheet=se.Sheets.length-1),se.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(h[0].slice(-2)==="/>")break;h[1]==="/"?L+=n.slice(P,h.index):P=h.index+h[0].length;break;case"interior":if(!r.cellStyles)break;U.Interior=Cn(h[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(h[0].slice(-2)==="/>")break;h[1]==="/"?LT(W,te,n.slice(G,h.index)):G=h.index+h[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else b.push([h[3],!1]);break;case"comment":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"));tI(Y),le.push(Y)}else b.push([h[3],!1]),g=Cn(h[0]),Y={a:g.Author};break;case"autofilter":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else if(h[0].charAt(h[0].length-2)!=="/"){var Fe=Cn(h[0]);C["!autofilter"]={ref:bc(Fe.Range).replace(/\$/g,"")},b.push([h[3],!0])}break;case"name":break;case"datavalidation":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"null":break;default:if(b.length==0&&h[3]=="document"||b.length==0&&h[3]=="uof")return ev(n,r);var Ce=!0;switch(b[b.length-1][0]){case"officedocumentsettings":switch(h[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ce=!1}break;case"componentoptions":switch(h[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ce=!1}break;case"excelworkbook":switch(h[3]){case"date1904":se.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ce=!1}break;case"workbookoptions":switch(h[3]){case"owcversion":break;case"height":break;case"width":break;default:Ce=!1}break;case"worksheetoptions":switch(h[3]){case"visible":if(h[0].slice(-2)!=="/>")if(h[1]==="/")switch(n.slice(G,h.index)){case"SheetHidden":re.Hidden=1;break;case"SheetVeryHidden":re.Hidden=2;break}else G=h.index+h[0].length;break;case"header":C["!margins"]||U0(C["!margins"]={},"xlml"),isNaN(+Vt(h[0]).Margin)||(C["!margins"].header=+Vt(h[0]).Margin);break;case"footer":C["!margins"]||U0(C["!margins"]={},"xlml"),isNaN(+Vt(h[0]).Margin)||(C["!margins"].footer=+Vt(h[0]).Margin);break;case"pagemargins":var Je=Vt(h[0]);C["!margins"]||U0(C["!margins"]={},"xlml"),isNaN(+Je.Top)||(C["!margins"].top=+Je.Top),isNaN(+Je.Left)||(C["!margins"].left=+Je.Left),isNaN(+Je.Right)||(C["!margins"].right=+Je.Right),isNaN(+Je.Bottom)||(C["!margins"].bottom=+Je.Bottom);break;case"displayrighttoleft":se.Views||(se.Views=[]),se.Views[0]||(se.Views[0]={}),se.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":C["!outline"]||(C["!outline"]={}),C["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":C["!outline"]||(C["!outline"]={}),C["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ce=!1}break;case"pivottable":case"pivotcache":switch(h[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ce=!1}break;case"pagebreaks":switch(h[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ce=!1}break;case"autofilter":switch(h[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ce=!1}break;case"querytable":switch(h[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ce=!1}break;case"datavalidation":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ce=!1}break;case"sorting":case"conditionalformatting":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ce=!1}break;case"mapinfo":case"schema":case"data":switch(h[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ce=!1}break;case"smarttags":break;default:Ce=!1;break}if(Ce||h[3].match(/!\[CDATA/))break;if(!b[b.length-1][1])throw"Unrecognized tag: "+h[3]+"|"+b.join("|");if(b[b.length-1][0]==="customdocumentproperties"){if(h[0].slice(-2)==="/>")break;h[1]==="/"?ZM(ee,te,ne,n.slice(G,h.index)):(ne=h,G=h.index+h[0].length);break}if(r.WTF)throw"Unrecognized tag: "+h[3]+"|"+b.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=w),ve.SheetNames=k,ve.Workbook=se,ve.SSF=Wa(tr),ve.Props=W,ve.Custprops=ee,ve}function Gm(t,a){switch(Rg(a=a||{}),a.type||"base64"){case"base64":return gm(Js(t),a);case"binary":case"buffer":case"file":return gm(t,a);case"array":return gm(Co(t),a)}}function rI(t){var a={},r=t.content;if(r.l=28,a.AnsiUserType=r.read_shift(0,"lpstr-ansi"),a.AnsiClipboardFormat=gT(r),r.length-r.l<=4)return a;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,a.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(a.UnicodeClipboardFormat=pT(r),n=r.read_shift(4),n==0||n>40))return a;r.l-=4,a.Reserved2=r.read_shift(0,"lpwstr")}var aI=[60,1084,2066,2165,2175];function sI(t,a,r,n,l){var d=n,f=[],h=r.slice(r.l,r.l+d);if(l&&l.enc&&l.enc.insitu&&h.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:l.enc.insitu(h)}f.push(h),r.l+=d;for(var b=Di(r,r.l),g=Ym[b],w=0;g!=null&&aI.indexOf(b)>-1;)d=Di(r,r.l+2),w=r.l+4,b==2066?w+=4:(b==2165||b==2175)&&(w+=12),h=r.slice(w,r.l+4+d),f.push(h),r.l+=4+d,g=Ym[b=Di(r,r.l)];var k=Cl(f);$a(k,0);var C=0;k.lens=[];for(var S=0;S<f.length;++S)k.lens.push(C),C+=f[S].length;if(k.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+k.length+" < "+n;return a.f(k,k.length,l)}function ri(t,a,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,a.cellNF&&(t.z=tr[n])}catch(d){if(a.WTF)throw d}if(!a||a.cellText!==!1)try{t.t==="e"?t.w=t.w||Ao[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K0(t.v):t.w=bo(t.v):t.w=mn(n,t.v,{date1904:!!r,dateNF:a&&a.dateNF})}catch(d){if(a.WTF)throw d}if(a.cellDates&&n&&t.t=="n"&&Rc(tr[n]||String(n))){var l=lo(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}}function Lu(t,a,r){return{v:t,ixfe:a,t:r}}function nI(t,a){var r={opts:{}},n={},l=a.dense?[]:{},d={},f={},h=null,b=[],g="",w={},k,C="",S,D,A,M,I={},F=[],T,B,H=[],U=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},z=function(It){return It<8?fo[It]:It<64&&U[It-8]||fo[It]},W=function(It,$e,jt){var Nt=$e.XF.data;if(!(!Nt||!Nt.patternType||!jt||!jt.cellStyles)){$e.s={},$e.s.patternType=Nt.patternType;var lt;(lt=ed(z(Nt.icvFore)))&&($e.s.fgColor={rgb:lt}),(lt=ed(z(Nt.icvBack)))&&($e.s.bgColor={rgb:lt})}},ee=function(It,$e,jt){if(!(ae>1)&&!(jt.sheetRows&&It.r>=jt.sheetRows)){if(jt.cellStyles&&$e.XF&&$e.XF.data&&W(It,$e,jt),delete $e.ixfe,delete $e.XF,k=It,C=Zt(It),(!f||!f.s||!f.e)&&(f={s:{r:0,c:0},e:{r:0,c:0}}),It.r<f.s.r&&(f.s.r=It.r),It.c<f.s.c&&(f.s.c=It.c),It.r+1>f.e.r&&(f.e.r=It.r+1),It.c+1>f.e.c&&(f.e.c=It.c+1),jt.cellFormula&&$e.f){for(var Nt=0;Nt<F.length;++Nt)if(!(F[Nt][0].s.c>It.c||F[Nt][0].s.r>It.r)&&!(F[Nt][0].e.c<It.c||F[Nt][0].e.r<It.r)){$e.F=yr(F[Nt][0]),(F[Nt][0].s.c!=It.c||F[Nt][0].s.r!=It.r)&&delete $e.f,$e.f&&($e.f=""+ls(F[Nt][1],f,It,oe,G));break}}jt.dense?(l[It.r]||(l[It.r]=[]),l[It.r][It.c]=$e):l[C]=$e}},G={enc:!1,sbcch:0,snames:[],sharedf:I,arrayf:F,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!a&&!!a.cellStyles,WTF:!!a&&!!a.wtf};a.password&&(G.password=a.password);var ne,le=[],Y=[],X=[],de=[],ye=!1,oe=[];oe.SheetNames=G.snames,oe.sharedf=G.sharedf,oe.arrayf=G.arrayf,oe.names=[],oe.XTI=[];var xe=0,ae=0,q=0,K=[],se=[],re;G.codepage=1200,_n(1200);for(var te=!1;t.l<t.length-1;){var Re=t.l,ke=t.read_shift(2);if(ke===0&&xe===10)break;var Ve=t.l===t.length?0:t.read_shift(2),Oe=Ym[ke];if(Oe&&Oe.f){if(a.bookSheets&&xe===133&&ke!==133)break;if(xe=ke,Oe.r===2||Oe.r==12){var et=t.read_shift(2);if(Ve-=2,!G.enc&&et!==ke&&((et&255)<<8|et>>8)!==ke)throw new Error("rt mismatch: "+et+"!="+ke);Oe.r==12&&(t.l+=10,Ve-=10)}var be={};if(ke===10?be=Oe.f(t,Ve,G):be=sI(ke,Oe,t,Ve,G),ae==0&&[9,521,1033,2057].indexOf(xe)===-1)continue;switch(ke){case 34:r.opts.Date1904=L.WBProps.date1904=be;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(G.enc||(t.l=0),G.enc=be,!a.password)throw new Error("File is password-protected");if(be.valid==null)throw new Error("Encryption scheme unsupported");if(!be.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=be;break;case 66:var Ae=Number(be);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}_n(G.codepage=Ae),te=!0;break;case 317:G.rrtabid=be;break;case 25:G.winlocked=be;break;case 439:r.opts.RefreshAll=be;break;case 12:r.opts.CalcCount=be;break;case 16:r.opts.CalcDelta=be;break;case 17:r.opts.CalcIter=be;break;case 13:r.opts.CalcMode=be;break;case 14:r.opts.CalcPrecision=be;break;case 95:r.opts.CalcSaveRecalc=be;break;case 15:G.CalcRefMode=be;break;case 2211:r.opts.FullCalc=be;break;case 129:be.fDialog&&(l["!type"]="dialog"),be.fBelow||((l["!outline"]||(l["!outline"]={})).above=!0),be.fRight||((l["!outline"]||(l["!outline"]={})).left=!0);break;case 224:H.push(be);break;case 430:oe.push([be]),oe[oe.length-1].XTI=[];break;case 35:case 547:oe[oe.length-1].push(be);break;case 24:case 536:re={Name:be.Name,Ref:ls(be.rgce,f,null,oe,G)},be.itab>0&&(re.Sheet=be.itab-1),oe.names.push(re),oe[0]||(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].push(be),be.Name=="_xlnm._FilterDatabase"&&be.itab>0&&be.rgce&&be.rgce[0]&&be.rgce[0][0]&&be.rgce[0][0][0]=="PtgArea3d"&&(se[be.itab-1]={ref:yr(be.rgce[0][0][1][2])});break;case 22:G.ExternCount=be;break;case 23:oe.length==0&&(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].XTI=oe[oe.length-1].XTI.concat(be),oe.XTI=oe.XTI.concat(be);break;case 2196:if(G.biff<8)break;re!=null&&(re.Comment=be[1]);break;case 18:l["!protect"]=be;break;case 19:be!==0&&G.WTF&&console.error("Password verifier: "+be);break;case 133:d[be.pos]=be,G.snames.push(be.name);break;case 10:{if(--ae)break;if(f.e){if(f.e.r>0&&f.e.c>0){if(f.e.r--,f.e.c--,l["!ref"]=yr(f),a.sheetRows&&a.sheetRows<=f.e.r){var Fe=f.e.r;f.e.r=a.sheetRows-1,l["!fullref"]=l["!ref"],l["!ref"]=yr(f),f.e.r=Fe}f.e.r++,f.e.c++}le.length>0&&(l["!merges"]=le),Y.length>0&&(l["!objects"]=Y),X.length>0&&(l["!cols"]=X),de.length>0&&(l["!rows"]=de),L.Sheets.push(P)}g===""?w=l:n[g]=l,l=a.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[ke]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[be.BIFFVer]||8),G.biffguess=be.BIFFVer==0,be.BIFFVer==0&&be.dt==4096&&(G.biff=5,te=!0,_n(G.codepage=28591)),G.biff==8&&be.BIFFVer==0&&be.dt==16&&(G.biff=2),ae++)break;if(l=a.dense?[]:{},G.biff<8&&!te&&(te=!0,_n(G.codepage=a.codepage||1252)),G.biff<5||be.BIFFVer==0&&be.dt==4096){g===""&&(g="Sheet1"),f={s:{r:0,c:0},e:{r:0,c:0}};var Ce={pos:t.l-Ve,name:g};d[Ce.pos]=Ce,G.snames.push(g)}else g=(d[Re]||{name:""}).name;be.dt==32&&(l["!type"]="chart"),be.dt==64&&(l["!type"]="macro"),le=[],Y=[],G.arrayf=F=[],X=[],de=[],ye=!1,P={Hidden:(d[Re]||{hs:0}).hs,name:g}}break;case 515:case 3:case 2:l["!type"]=="chart"&&(a.dense?(l[be.r]||[])[be.c]:l[Zt({c:be.c,r:be.r})])&&++be.c,T={ixfe:be.ixfe,XF:H[be.ixfe]||{},v:be.val,t:"n"},q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:be.c,r:be.r},T,a);break;case 5:case 517:T={ixfe:be.ixfe,XF:H[be.ixfe],v:be.val,t:be.t},q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:be.c,r:be.r},T,a);break;case 638:T={ixfe:be.ixfe,XF:H[be.ixfe],v:be.rknum,t:"n"},q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:be.c,r:be.r},T,a);break;case 189:for(var Je=be.c;Je<=be.C;++Je){var ve=be.rkrec[Je-be.c][0];T={ixfe:ve,XF:H[ve],v:be.rkrec[Je-be.c][1],t:"n"},q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:Je,r:be.r},T,a)}break;case 6:case 518:case 1030:{if(be.val=="String"){h=be;break}if(T=Lu(be.val,be.cell.ixfe,be.tt),T.XF=H[T.ixfe],a.cellFormula){var Le=be.formula;if(Le&&Le[0]&&Le[0][0]&&Le[0][0][0]=="PtgExp"){var fe=Le[0][0][1][0],st=Le[0][0][1][1],Ee=Zt({r:fe,c:st});I[Ee]?T.f=""+ls(be.formula,f,be.cell,oe,G):T.F=((a.dense?(l[fe]||[])[st]:l[Ee])||{}).F}else T.f=""+ls(be.formula,f,be.cell,oe,G)}q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee(be.cell,T,a),h=be}break;case 7:case 519:if(h)h.val=be,T=Lu(be,h.cell.ixfe,"s"),T.XF=H[T.ixfe],a.cellFormula&&(T.f=""+ls(h.formula,f,h.cell,oe,G)),q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee(h.cell,T,a),h=null;else throw new Error("String record expects Formula");break;case 33:case 545:{F.push(be);var wt=Zt(be[0].s);if(S=a.dense?(l[be[0].s.r]||[])[be[0].s.c]:l[wt],a.cellFormula&&S){if(!h||!wt||!S)break;S.f=""+ls(be[1],f,be[0],oe,G),S.F=yr(be[0])}}break;case 1212:{if(!a.cellFormula)break;if(C){if(!h)break;I[Zt(h.cell)]=be[0],S=a.dense?(l[h.cell.r]||[])[h.cell.c]:l[Zt(h.cell)],(S||{}).f=""+ls(be[0],f,k,oe,G)}}break;case 253:T=Lu(b[be.isst].t,be.ixfe,"s"),b[be.isst].h&&(T.h=b[be.isst].h),T.XF=H[T.ixfe],q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:be.c,r:be.r},T,a);break;case 513:a.sheetStubs&&(T={ixfe:be.ixfe,XF:H[be.ixfe],t:"z"},q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:be.c,r:be.r},T,a));break;case 190:if(a.sheetStubs)for(var ut=be.c;ut<=be.C;++ut){var Et=be.ixfe[ut-be.c];T={ixfe:Et,XF:H[Et],t:"z"},q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:ut,r:be.r},T,a)}break;case 214:case 516:case 4:T=Lu(be.val,be.ixfe,"s"),T.XF=H[T.ixfe],q>0&&(T.z=K[T.ixfe>>8&63]),ri(T,a,r.opts.Date1904),ee({c:be.c,r:be.r},T,a);break;case 0:case 512:ae===1&&(f=be);break;case 252:b=be;break;case 1054:if(G.biff==4){K[q++]=be[1];for(var Mt=0;Mt<q+163&&tr[Mt]!=be[1];++Mt);Mt>=163&&uo(be[1],q+163)}else uo(be[1],be[0]);break;case 30:{K[q++]=be;for(var qt=0;qt<q+163&&tr[qt]!=be;++qt);qt>=163&&uo(be,q+163)}break;case 229:le=le.concat(be);break;case 93:Y[be.cmo[0]]=G.lastobj=be;break;case 438:G.lastobj.TxO=be;break;case 127:G.lastobj.ImData=be;break;case 440:for(M=be[0].s.r;M<=be[0].e.r;++M)for(A=be[0].s.c;A<=be[0].e.c;++A)S=a.dense?(l[M]||[])[A]:l[Zt({c:A,r:M})],S&&(S.l=be[1]);break;case 2048:for(M=be[0].s.r;M<=be[0].e.r;++M)for(A=be[0].s.c;A<=be[0].e.c;++A)S=a.dense?(l[M]||[])[A]:l[Zt({c:A,r:M})],S&&S.l&&(S.l.Tooltip=be[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;S=a.dense?(l[be[0].r]||[])[be[0].c]:l[Zt(be[0])];var ur=Y[be[2]];S||(a.dense?(l[be[0].r]||(l[be[0].r]=[]),S=l[be[0].r][be[0].c]={t:"z"}):S=l[Zt(be[0])]={t:"z"},f.e.r=Math.max(f.e.r,be[0].r),f.s.r=Math.min(f.s.r,be[0].r),f.e.c=Math.max(f.e.c,be[0].c),f.s.c=Math.min(f.s.c,be[0].c)),S.c||(S.c=[]),D={a:be[1],t:ur.TxO.t},S.c.push(D)}break;case 2173:SD(H[be.ixfe],be.ext);break;case 125:{if(!G.cellStyles)break;for(;be.e>=be.s;)X[be.e--]={width:be.w/256,level:be.level||0,hidden:!!(be.flags&1)},ye||(ye=!0,Sg(be.w/256)),Cc(X[be.e+1])}break;case 520:{var Ut={};be.level!=null&&(de[be.r]=Ut,Ut.level=be.level),be.hidden&&(de[be.r]=Ut,Ut.hidden=!0),be.hpt&&(de[be.r]=Ut,Ut.hpt=be.hpt,Ut.hpx=td(be.hpt))}break;case 38:case 39:case 40:case 41:l["!margins"]||U0(l["!margins"]={}),l["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ke]]=be;break;case 161:l["!margins"]||U0(l["!margins"]={}),l["!margins"].header=be.header,l["!margins"].footer=be.footer;break;case 574:be.RTL&&(L.Views[0].RTL=!0);break;case 146:U=be;break;case 2198:ne=be;break;case 140:B=be;break;case 442:g?P.CodeName=be||P.name:L.WBProps.CodeName=be||"ThisWorkbook";break}}else Oe||console.error("Missing Info for XLS Record 0x"+ke.toString(16)),t.l+=Ve}return r.SheetNames=ii(d).sort(function(Yt,It){return Number(Yt)-Number(It)}).map(function(Yt){return d[Yt].name}),a.bookSheets||(r.Sheets=n),!r.SheetNames.length&&w["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=w)):r.Preamble=w,r.Sheets&&se.forEach(function(Yt,It){r.Sheets[r.SheetNames[It]]["!autofilter"]=Yt}),r.Strings=b,r.SSF=Wa(tr),G.enc&&(r.Encryption=G.enc),ne&&(r.Themes=ne),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),oe.names.length>0&&(L.Names=oe.names),r.Workbook=L,r}var W2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function iI(t,a,r){var n=pr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var l=R2(n,kT,W2.DSI);for(var d in l)a[d]=l[d]}catch(g){if(r.WTF)throw g}var f=pr.find(t,"/!SummaryInformation");if(f&&f.size>0)try{var h=R2(f,jT,W2.SI);for(var b in h)a[b]==null&&(a[b]=h[b])}catch(g){if(r.WTF)throw g}a.HeadingPairs&&a.TitlesOfParts&&(y4(a.HeadingPairs,a.TitlesOfParts,a,r),delete a.HeadingPairs,delete a.TitlesOfParts)}function tN(t,a){a||(a={}),Rg(a),Tw(),a.codepage&&dg(a.codepage);var r,n;if(t.FullPaths){if(pr.find(t,"/encryption"))throw new Error("File is password-protected");r=pr.find(t,"!CompObj"),n=pr.find(t,"/Workbook")||pr.find(t,"/Book")}else{switch(a.type){case"base64":t=An(Js(t));break;case"binary":t=An(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}$a(t,0),n={content:t}}var l,d;if(r&&rI(r),a.bookProps&&!a.bookSheets)l={};else{var f=fr?"buffer":"array";if(n&&n.content)l=nI(n.content,a);else if((d=pr.find(t,"PerfectOffice_MAIN"))&&d.content)l=P0.to_workbook(d.content,(a.type=f,a));else if((d=pr.find(t,"NativeContent_MAIN"))&&d.content)l=P0.to_workbook(d.content,(a.type=f,a));else throw(d=pr.find(t,"MN0"))&&d.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a.bookVBA&&t.FullPaths&&pr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(l.vbaraw=YD(t))}var h={};return t.FullPaths&&iI(t,h,a),l.Props=l.Custprops=h,a.bookFiles&&(l.cfb=t),l}var xf={0:{f:U9},1:{f:Y9},2:{f:eM},3:{f:W9},4:{f:q9},5:{f:J9},6:{f:aM},7:{f:Z9},8:{f:oM},9:{f:lM},10:{f:nM},11:{f:iM},12:{f:X9},13:{f:tM},14:{f:K9},15:{f:$9},16:{f:K4},17:{f:sM},18:{f:Q9},19:{f:wg},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:OM},40:{},42:{},43:{f:nD},44:{f:sD},45:{f:iD},46:{f:oD},47:{f:lD},48:{},49:{f:cT},50:{},51:{f:_D},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:T4},62:{f:rM},63:{f:ID},64:{f:pM},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:gM},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:G9},148:{f:H9,p:16},151:{f:uM},152:{},153:{f:MM},154:{},155:{},156:{f:RM},157:{},158:{},159:{T:1,f:j7},160:{T:-1},161:{T:1,f:So},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:cM},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:AD},336:{T:-1},337:{f:TD,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:zm},357:{},358:{},359:{},360:{T:1},361:{},362:{f:_4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:fM},427:{f:xM},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:mM},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:V9},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:dM},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:zm},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:HD},633:{T:1},634:{T:-1},635:{T:1,f:UD},636:{T:-1},637:{f:uT},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:kM},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:yM},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Ym={6:{f:hm},10:{f:jl},12:{f:ka},13:{f:ka},14:{f:ha},15:{f:ha},16:{f:cs},17:{f:ha},18:{f:ha},19:{f:ka},20:{f:F2},21:{f:F2},23:{f:_4},24:{f:L2},25:{f:ha},26:{},27:{},28:{f:P5},29:{},34:{f:ha},35:{f:B2},38:{f:cs},39:{f:cs},40:{f:cs},41:{f:cs},42:{f:ha},43:{f:ha},47:{f:V7},49:{f:v5},51:{f:ka},60:{},61:{f:p5},64:{f:ha},65:{f:b5},66:{f:ka},77:{},80:{},81:{},82:{},85:{f:ka},89:{},90:{},91:{},92:{f:c5},93:{f:U5},94:{},95:{f:ha},96:{},97:{},99:{f:ha},125:{f:T4},128:{f:T5},129:{f:d5},130:{f:ka},131:{f:ha},132:{f:ha},133:{f:u5},134:{},140:{f:q5},141:{f:ka},144:{},146:{f:W5},151:{},152:{},153:{},154:{},155:{},156:{f:ka},157:{},158:{},160:{f:e7},161:{f:Z5},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:E5},190:{f:S5},193:{f:jl},197:{},198:{},199:{},200:{},201:{},202:{f:ha},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ka},220:{},221:{f:ha},222:{},224:{f:_5},225:{f:o5},226:{f:jl},227:{},229:{f:z5},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:f5},253:{f:w5},255:{f:x5},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:k4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ha},353:{f:jl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:R5},431:{f:ha},432:{},433:{},434:{},437:{},438:{f:G5},439:{f:ha},440:{f:Y5},441:{},442:{f:gd},443:{},444:{f:ka},445:{},446:{},448:{f:jl},449:{f:g5,r:2},450:{f:jl},512:{f:I2},513:{f:J5},515:{f:D5},516:{f:N5},517:{f:O2},519:{f:t7},520:{f:h5},523:{},545:{f:P2},549:{f:M2},566:{},574:{f:y5},638:{f:C5},659:{},1048:{},1054:{f:k5},1084:{},1212:{f:F5},2048:{f:X5},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ou},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:jl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:K5,r:12},2173:{f:ED,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ha,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:O5,r:12},2197:{},2198:{f:vD,r:12},2199:{},2200:{},2201:{},2202:{f:B5,r:12},2203:{f:jl},2204:{},2205:{},2206:{},2207:{},2211:{f:m5},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ka},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Q5},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:$5},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:I2},1:{},2:{f:n7},3:{f:s7},4:{f:a7},5:{f:O2},7:{f:i7},8:{},9:{f:Ou},11:{},22:{f:ka},30:{f:j5},31:{},32:{},33:{f:P2},36:{},37:{f:M2},50:{f:l7},62:{},52:{},67:{},68:{f:ka},69:{},86:{},126:{},127:{f:r7},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:o7},223:{},234:{},354:{},421:{},518:{f:hm},521:{f:Ou},536:{f:L2},547:{f:B2},561:{},579:{},1030:{f:hm},1033:{f:Ou},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function En(t,a,r,n){var l=a;if(!isNaN(l)){var d=(r||[]).length||0,f=t.next(4);f.write_shift(2,l),f.write_shift(2,d),d>0&&d4(r)&&t.push(r)}}function K2(t,a){var r=a||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var d=t.match(/<\/table/i),f=l.index,h=d&&d.index||t.length,b=D8(t.slice(f,h),/(:?<tr[^>]*>)/i,"<tr>"),g=-1,w=0,k=0,C=0,S={s:{r:1e7,c:1e7},e:{r:0,c:0}},D=[];for(f=0;f<b.length;++f){var A=b[f].trim(),M=A.slice(0,3).toLowerCase();if(M=="<tr"){if(++g,r.sheetRows&&r.sheetRows<=g){--g;break}w=0;continue}if(!(M!="<td"&&M!="<th")){var I=A.split(/<\/t[dh]>/i);for(h=0;h<I.length;++h){var F=I[h].trim();if(F.match(/<t[dh]/i)){for(var T=F,B=0;T.charAt(0)=="<"&&(B=T.indexOf(">"))>-1;)T=T.slice(B+1);for(var H=0;H<D.length;++H){var U=D[H];U.s.c==w&&U.s.r<g&&g<=U.e.r&&(w=U.e.c+1,H=-1)}var L=Vt(F.slice(0,F.indexOf(">")));C=L.colspan?+L.colspan:1,((k=+L.rowspan)>1||C>1)&&D.push({s:{r:g,c:w},e:{r:g+(k||1)-1,c:w+C-1}});var P=L.t||L["data-t"]||"";if(!T.length){w+=C;continue}if(T=Zw(T),S.s.r>g&&(S.s.r=g),S.e.r<g&&(S.e.r=g),S.s.c>w&&(S.s.c=w),S.e.c<w&&(S.e.c=w),!T.length){w+=C;continue}var z={t:"s",v:T};r.raw||!T.trim().length||P=="s"||(T==="TRUE"?z={t:"b",v:!0}:T==="FALSE"?z={t:"b",v:!1}:isNaN(Dn(T))?isNaN(jc(T).getDate())||(z={t:"d",v:Va(T)},r.cellDates||(z={t:"n",v:Cs(z.v)}),z.z=r.dateNF||tr[14]):z={t:"n",v:Dn(T)}),r.dense?(n[g]||(n[g]=[]),n[g][w]=z):n[Zt({r:g,c:w})]=z,w+=C}}}}return n["!ref"]=yr(S),D.length&&(n["!merges"]=D),n}function lI(t,a,r,n){for(var l=t["!merges"]||[],d=[],f=a.s.c;f<=a.e.c;++f){for(var h=0,b=0,g=0;g<l.length;++g)if(!(l[g].s.r>r||l[g].s.c>f)&&!(l[g].e.r<r||l[g].e.c<f)){if(l[g].s.r<r||l[g].s.c<f){h=-1;break}h=l[g].e.r-l[g].s.r+1,b=l[g].e.c-l[g].s.c+1;break}if(!(h<0)){var w=Zt({r,c:f}),k=n.dense?(t[r]||[])[f]:t[w],C=k&&k.v!=null&&(k.h||gg(k.w||(Ui(k),k.w)||""))||"",S={};h>1&&(S.rowspan=h),b>1&&(S.colspan=b),n.editable?C='<span contenteditable="true">'+C+"</span>":k&&(S["data-t"]=k&&k.t||"z",k.v!=null&&(S["data-v"]=k.v),k.z!=null&&(S["data-z"]=k.z),k.l&&(k.l.Target||"#").charAt(0)!="#"&&(C='<a href="'+k.l.Target+'">'+C+"</a>")),S.id=(n.id||"sjs")+"-"+w,d.push(q8("td",C,S))}}var D="<tr>";return D+d.join("")+"</tr>"}var oI='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',cI="</body></html>";function dI(t,a){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Il(K2(r[0],a),a);var n=Ig();return r.forEach(function(l,d){Og(n,K2(l,a),"Sheet"+(d+1))}),n}function uI(t,a,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function fI(t,a){var r=a||{},n=r.header!=null?r.header:oI,l=r.footer!=null?r.footer:cI,d=[n],f=Mc(t["!ref"]);r.dense=Array.isArray(t),d.push(uI(t,f,r));for(var h=f.s.r;h<=f.e.r;++h)d.push(lI(t,f,h,r));return d.push("</table>"+l),d.join("")}function rN(t,a,r){var n=r||{},l=0,d=0;if(n.origin!=null)if(typeof n.origin=="number")l=n.origin;else{var f=typeof n.origin=="string"?Ns(n.origin):n.origin;l=f.r,d=f.c}var h=a.getElementsByTagName("tr"),b=Math.min(n.sheetRows||1e7,h.length),g={s:{r:0,c:0},e:{r:l,c:d}};if(t["!ref"]){var w=Mc(t["!ref"]);g.s.r=Math.min(g.s.r,w.s.r),g.s.c=Math.min(g.s.c,w.s.c),g.e.r=Math.max(g.e.r,w.e.r),g.e.c=Math.max(g.e.c,w.e.c),l==-1&&(g.e.r=l=w.e.r+1)}var k=[],C=0,S=t["!rows"]||(t["!rows"]=[]),D=0,A=0,M=0,I=0,F=0,T=0;for(t["!cols"]||(t["!cols"]=[]);D<h.length&&A<b;++D){var B=h[D];if(Z2(B)){if(n.display)continue;S[A]={hidden:!0}}var H=B.children;for(M=I=0;M<H.length;++M){var U=H[M];if(!(n.display&&Z2(U))){var L=U.hasAttribute("data-v")?U.getAttribute("data-v"):U.hasAttribute("v")?U.getAttribute("v"):Zw(U.innerHTML),P=U.getAttribute("data-z")||U.getAttribute("z");for(C=0;C<k.length;++C){var z=k[C];z.s.c==I+d&&z.s.r<A+l&&A+l<=z.e.r&&(I=z.e.c+1-d,C=-1)}T=+U.getAttribute("colspan")||1,((F=+U.getAttribute("rowspan")||1)>1||T>1)&&k.push({s:{r:A+l,c:I+d},e:{r:A+l+(F||1)-1,c:I+d+(T||1)-1}});var W={t:"s",v:L},ee=U.getAttribute("data-t")||U.getAttribute("t")||"";L!=null&&(L.length==0?W.t=ee||"z":n.raw||L.trim().length==0||ee=="s"||(L==="TRUE"?W={t:"b",v:!0}:L==="FALSE"?W={t:"b",v:!1}:isNaN(Dn(L))?isNaN(jc(L).getDate())||(W={t:"d",v:Va(L)},n.cellDates||(W={t:"n",v:Cs(W.v)}),W.z=n.dateNF||tr[14]):W={t:"n",v:Dn(L)})),W.z===void 0&&P!=null&&(W.z=P);var G="",ne=U.getElementsByTagName("A");if(ne&&ne.length)for(var le=0;le<ne.length&&!(ne[le].hasAttribute("href")&&(G=ne[le].getAttribute("href"),G.charAt(0)!="#"));++le);G&&G.charAt(0)!="#"&&(W.l={Target:G}),n.dense?(t[A+l]||(t[A+l]=[]),t[A+l][I+d]=W):t[Zt({c:I+d,r:A+l})]=W,g.e.c<I+d&&(g.e.c=I+d),I+=T}}++A}return k.length&&(t["!merges"]=(t["!merges"]||[]).concat(k)),g.e.r=Math.max(g.e.r,A-1+l),t["!ref"]=yr(g),A>=b&&(t["!fullref"]=yr((g.e.r=h.length-D+A-1+l,g))),t}function aN(t,a){var r=a||{},n=r.dense?[]:{};return rN(n,t,a)}function xI(t,a){return Il(aN(t,a),a)}function Z2(t){var a="",r=hI(t);return r&&(a=r(t).getPropertyValue("display")),a||(a=t.style&&t.style.display),a==="none"}function hI(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function mI(t){var a=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,l){return Array(parseInt(l,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=br(a.replace(/<[^>]*>/g,""));return[r]}var Q2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function sN(t,a){var r=a||{},n=pg(t),l=[],d,f,h={name:""},b="",g=0,w,k,C={},S=[],D=r.dense?[]:{},A,M,I={value:""},F="",T=0,B=[],H=-1,U=-1,L={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,z={},W=[],ee={},G=0,ne=0,le=[],Y=1,X=1,de=[],ye={Names:[]},oe={},xe=["",""],ae=[],q={},K="",se=0,re=!1,te=!1,Re=0;for(Q0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");A=Q0.exec(n);)switch(A[3]=A[3].replace(/_.*$/,"")){case"table":case"":A[1]==="/"?(L.e.c>=L.s.c&&L.e.r>=L.s.r?D["!ref"]=yr(L):D["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=L.e.r&&(D["!fullref"]=D["!ref"],L.e.r=r.sheetRows-1,D["!ref"]=yr(L)),W.length&&(D["!merges"]=W),le.length&&(D["!rows"]=le),w.name=w.||w.name,typeof JSON<"u"&&JSON.stringify(w),S.push(w.name),C[w.name]=D,te=!1):A[0].charAt(A[0].length-2)!=="/"&&(w=Vt(A[0],!1),H=U=-1,L.s.r=L.s.c=1e7,L.e.r=L.e.c=0,D=r.dense?[]:{},W=[],le=[],te=!0);break;case"table-row-group":A[1]==="/"?--P:++P;break;case"table-row":case"":if(A[1]==="/"){H+=Y,Y=1;break}if(k=Vt(A[0],!1),k.?H=k.-1:H==-1&&(H=0),Y=+k["number-rows-repeated"]||1,Y<10)for(Re=0;Re<Y;++Re)P>0&&(le[H+Re]={level:P});U=-1;break;case"covered-table-cell":A[1]!=="/"&&++U,r.sheetStubs&&(r.dense?(D[H]||(D[H]=[]),D[H][U]={t:"z"}):D[Zt({r:H,c:U})]={t:"z"}),F="",B=[];break;case"table-cell":case"":if(A[0].charAt(A[0].length-2)==="/")++U,I=Vt(A[0],!1),X=parseInt(I["number-columns-repeated"]||"1",10),M={t:"z",v:null},I.formula&&r.cellFormula!=!1&&(M.f=X2(br(I.formula))),(I.||I["value-type"])=="string"&&(M.t="s",M.v=br(I["string-value"]||""),r.dense?(D[H]||(D[H]=[]),D[H][U]=M):D[Zt({r:H,c:U})]=M),U+=X-1;else if(A[1]!=="/"){++U,F="",T=0,B=[],X=1;var ke=Y?H+Y-1:H;if(U>L.e.c&&(L.e.c=U),U<L.s.c&&(L.s.c=U),H<L.s.r&&(L.s.r=H),ke>L.e.r&&(L.e.r=ke),I=Vt(A[0],!1),ae=[],q={},M={t:I.||I["value-type"],v:null},r.cellFormula)if(I.formula&&(I.formula=br(I.formula)),I["number-matrix-columns-spanned"]&&I["number-matrix-rows-spanned"]&&(G=parseInt(I["number-matrix-rows-spanned"],10)||0,ne=parseInt(I["number-matrix-columns-spanned"],10)||0,ee={s:{r:H,c:U},e:{r:H+G-1,c:U+ne-1}},M.F=yr(ee),de.push([ee,M.F])),I.formula)M.f=X2(I.formula);else for(Re=0;Re<de.length;++Re)H>=de[Re][0].s.r&&H<=de[Re][0].e.r&&U>=de[Re][0].s.c&&U<=de[Re][0].e.c&&(M.F=de[Re][1]);switch((I["number-columns-spanned"]||I["number-rows-spanned"])&&(G=parseInt(I["number-rows-spanned"],10)||0,ne=parseInt(I["number-columns-spanned"],10)||0,ee={s:{r:H,c:U},e:{r:H+G-1,c:U+ne-1}},W.push(ee)),I["number-columns-repeated"]&&(X=parseInt(I["number-columns-repeated"],10)),M.t){case"boolean":M.t="b",M.v=Wr(I["boolean-value"]);break;case"float":M.t="n",M.v=parseFloat(I.value);break;case"percentage":M.t="n",M.v=parseFloat(I.value);break;case"currency":M.t="n",M.v=parseFloat(I.value);break;case"date":M.t="d",M.v=Va(I["date-value"]),r.cellDates||(M.t="n",M.v=Cs(M.v)),M.z="m/d/yy";break;case"time":M.t="n",M.v=A8(I["time-value"])/86400,r.cellDates&&(M.t="d",M.v=_f(M.v)),M.z="HH:MM:SS";break;case"number":M.t="n",M.v=parseFloat(I.);break;default:if(M.t==="string"||M.t==="text"||!M.t)M.t="s",I["string-value"]!=null&&(F=br(I["string-value"]),B=[]);else throw new Error("Unsupported value type "+M.t)}}else{if(re=!1,M.t==="s"&&(M.v=F||"",B.length&&(M.R=B),re=T==0),oe.Target&&(M.l=oe),ae.length>0&&(M.c=ae,ae=[]),F&&r.cellText!==!1&&(M.w=F),re&&(M.t="z",delete M.v),(!re||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var Ve=0;Ve<Y;++Ve){if(X=parseInt(I["number-columns-repeated"]||"1",10),r.dense)for(D[H+Ve]||(D[H+Ve]=[]),D[H+Ve][U]=Ve==0?M:Wa(M);--X>0;)D[H+Ve][U+X]=Wa(M);else for(D[Zt({r:H+Ve,c:U})]=M;--X>0;)D[Zt({r:H+Ve,c:U+X})]=Wa(M);L.e.c<=U&&(L.e.c=U)}X=parseInt(I["number-columns-repeated"]||"1",10),U+=X-1,X=0,M={},F="",B=[]}oe={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!0]);break;case"annotation":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d;q.t=F,B.length&&(q.R=B),q.a=K,ae.push(q)}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);K="",se=0,F="",T=0,B=[];break;case"creator":A[1]==="/"?K=n.slice(se,A.index):se=A.index+A[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);F="",T=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(A[1]==="/"){if(z[h.name]=b,(d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&(b="",h=Vt(A[0],!1),l.push([A[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Vt(A[0],!1),b+=Q2[A[3]][f.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Vt(A[0],!1),b+=Q2[A[3]][f.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(A[0].slice(-2)==="/>")break;if(A[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":b+=n.slice(g,A.index);break}else g=A.index+A[0].length;break;case"named-range":f=Vt(A[0],!1),xe=mm(f["cell-range-address"]);var Oe={Name:f.name,Ref:xe[0]+"!"+xe[1]};te&&(Oe.Sheet=S.length),ye.Names.push(Oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(A[1]==="/"&&(!I||!I["string-value"])){var et=mI(n.slice(T,A.index));F=(F.length>0?F+`
`:"")+et[0]}else Vt(A[0],!1),T=A.index+A[0].length;break;case"s":break;case"database-range":if(A[1]==="/")break;try{xe=mm(Vt(A[0])["target-range-address"]),C[xe[0]]["!autofilter"]={ref:xe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(A[1]!=="/"){if(oe=Vt(A[0],!1),!oe.href)break;oe.Target=br(oe.href),delete oe.href,oe.Target.charAt(0)=="#"&&oe.Target.indexOf(".")>-1?(xe=mm(oe.Target.slice(1)),oe.Target="#"+xe[0]+"!"+xe[1]):oe.Target.match(/^\.\.[\\\/]/)&&(oe.Target=oe.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(A[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(A)}}var be={Sheets:C,SheetNames:S,Workbook:ye};return r.bookSheets&&delete be.Sheets,be}function J2(t,a){a=a||{},xn(t,"META-INF/manifest.xml")&&DT(Na(t,"META-INF/manifest.xml"),a);var r=Ws(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=sN(Ur(r),a);return xn(t,"meta.xml")&&(n.Props=p4(Na(t,"meta.xml"))),n}function ev(t,a){return sN(t,a)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function Tg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Xm(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ur(Co(t))}function qm(t){var a=t.reduce(function(l,d){return l+d.length},0),r=new Uint8Array(a),n=0;return t.forEach(function(l){r.set(l,n),n+=l.length}),r}function tv(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function gI(t,a){for(var r=(t[a+15]&127)<<7|t[a+14]>>1,n=t[a+14]&1,l=a+13;l>=a;--l)n=n*256+t[l];return(t[a+15]&128?-n:n)*Math.pow(10,r-6176)}function rd(t,a){var r=a?a[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return a&&(a[0]=r),n}function Ba(t){var a=0,r=t[a]&127;e:if(t[a++]>=128){if(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128))break e;r|=(t[a]&127)<<28}return r}function ds(t){for(var a=[],r=[0];r[0]<t.length;){var n=r[0],l=rd(t,r),d=l&7;l=Math.floor(l/8);var f=0,h;if(l==0)break;switch(d){case 0:{for(var b=r[0];t[r[0]++]>=128;);h=t.slice(b,r[0])}break;case 5:f=4,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 1:f=8,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 2:f=rd(t,r),h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 3:case 4:default:throw new Error("PB Type ".concat(d," for Field ").concat(l," at offset ").concat(n))}var g={data:h,type:d};a[l]==null?a[l]=[g]:a[l].push(g)}return a}function Dg(t,a){return t?.map(function(r){return a(r.data)})||[]}function pI(t){for(var a,r=[],n=[0];n[0]<t.length;){var l=rd(t,n),d=ds(t.slice(n[0],n[0]+l));n[0]+=l;var f={id:Ba(d[1][0].data),messages:[]};d[2].forEach(function(h){var b=ds(h.data),g=Ba(b[3][0].data);f.messages.push({meta:b,data:t.slice(n[0],n[0]+g)}),n[0]+=g}),(a=d[3])!=null&&a[0]&&(f.merge=Ba(d[3][0].data)>>>0>0),r.push(f)}return r}function yI(t,a){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=rd(a,r),l=[];r[0]<a.length;){var d=a[r[0]]&3;if(d==0){var f=a[r[0]++]>>2;if(f<60)++f;else{var h=f-59;f=a[r[0]],h>1&&(f|=a[r[0]+1]<<8),h>2&&(f|=a[r[0]+2]<<16),h>3&&(f|=a[r[0]+3]<<24),f>>>=0,f++,r[0]+=h}l.push(a.slice(r[0],r[0]+f)),r[0]+=f;continue}else{var b=0,g=0;if(d==1?(g=(a[r[0]]>>2&7)+4,b=(a[r[0]++]&224)<<3,b|=a[r[0]++]):(g=(a[r[0]++]>>2)+1,d==2?(b=a[r[0]]|a[r[0]+1]<<8,r[0]+=2):(b=(a[r[0]]|a[r[0]+1]<<8|a[r[0]+2]<<16|a[r[0]+3]<<24)>>>0,r[0]+=4)),l=[qm(l)],b==0)throw new Error("Invalid offset 0");if(b>l[0].length)throw new Error("Invalid offset beyond length");if(g>=b)for(l.push(l[0].slice(-b)),g-=b;g>=l[l.length-1].length;)l.push(l[l.length-1]),g-=l[l.length-1].length;l.push(l[0].slice(-b,-b+g))}}var w=qm(l);if(w.length!=n)throw new Error("Unexpected length: ".concat(w.length," != ").concat(n));return w}function bI(t){for(var a=[],r=0;r<t.length;){var n=t[r++],l=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,a.push(yI(n,t.slice(r,r+l))),r+=l}if(r!==t.length)throw new Error("data is not a valid framed stream!");return qm(a)}function vI(t,a,r,n){var l=Tg(t),d=l.getUint32(4,!0),f=(n>1?12:8)+tv(d&(n>1?3470:398))*4,h=-1,b=-1,g=NaN,w=new Date(2001,0,1);d&512&&(h=l.getUint32(f,!0),f+=4),f+=tv(d&(n>1?12288:4096))*4,d&16&&(b=l.getUint32(f,!0),f+=4),d&32&&(g=l.getFloat64(f,!0),f+=8),d&64&&(w.setTime(w.getTime()+l.getFloat64(f,!0)*1e3),f+=8);var k;switch(t[2]){case 0:break;case 2:k={t:"n",v:g};break;case 3:k={t:"s",v:a[b]};break;case 5:k={t:"d",v:w};break;case 6:k={t:"b",v:g>0};break;case 7:k={t:"n",v:g/86400};break;case 8:k={t:"e",v:0};break;case 9:if(h>-1)k={t:"s",v:r[h]};else if(b>-1)k={t:"s",v:a[b]};else if(!isNaN(g))k={t:"n",v:g};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return k}function wI(t,a,r){var n=Tg(t),l=n.getUint32(8,!0),d=12,f=-1,h=-1,b=NaN,g=NaN,w=new Date(2001,0,1);l&1&&(b=gI(t,d),d+=16),l&2&&(g=n.getFloat64(d,!0),d+=8),l&4&&(w.setTime(w.getTime()+n.getFloat64(d,!0)*1e3),d+=8),l&8&&(h=n.getUint32(d,!0),d+=4),l&16&&(f=n.getUint32(d,!0),d+=4);var k;switch(t[1]){case 0:break;case 2:k={t:"n",v:b};break;case 3:k={t:"s",v:a[h]};break;case 5:k={t:"d",v:w};break;case 6:k={t:"b",v:g>0};break;case 7:k={t:"n",v:g/86400};break;case 8:k={t:"e",v:0};break;case 9:if(f>-1)k={t:"s",v:r[f]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)));break;case 10:k={t:"n",v:b};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)))}return k}function NI(t,a,r){switch(t[0]){case 0:case 1:case 2:case 3:return vI(t,a,r,t[0]);case 5:return wI(t,a,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Al(t){var a=ds(t);return rd(a[1][0].data)}function rv(t,a){var r=ds(a.data),n=Ba(r[1][0].data),l=r[3],d=[];return(l||[]).forEach(function(f){var h=ds(f.data),b=Ba(h[1][0].data)>>>0;switch(n){case 1:d[b]=Xm(h[3][0].data);break;case 8:{var g=t[Al(h[9][0].data)][0],w=ds(g.data),k=t[Al(w[1][0].data)][0],C=Ba(k.meta[1][0].data);if(C!=2001)throw new Error("2000 unexpected reference to ".concat(C));var S=ds(k.data);d[b]=S[3].map(function(D){return Xm(D.data)}).join("")}break}}),d}function kI(t,a){var r,n,l,d,f,h,b,g,w,k,C,S,D,A,M=ds(t),I=Ba(M[1][0].data)>>>0,F=Ba(M[2][0].data)>>>0,T=((n=(r=M[8])==null?void 0:r[0])==null?void 0:n.data)&&Ba(M[8][0].data)>0||!1,B,H;if((d=(l=M[7])==null?void 0:l[0])!=null&&d.data&&a!=0)B=(h=(f=M[7])==null?void 0:f[0])==null?void 0:h.data,H=(g=(b=M[6])==null?void 0:b[0])==null?void 0:g.data;else if((k=(w=M[4])==null?void 0:w[0])!=null&&k.data&&a!=1)B=(S=(C=M[4])==null?void 0:C[0])==null?void 0:S.data,H=(A=(D=M[3])==null?void 0:D[0])==null?void 0:A.data;else throw"NUMBERS Tile missing ".concat(a," cell storage");for(var U=T?4:1,L=Tg(B),P=[],z=0;z<B.length/2;++z){var W=L.getUint16(z*2,!0);W<65535&&P.push([z,W])}if(P.length!=F)throw"Expected ".concat(F," cells, found ").concat(P.length);var ee=[];for(z=0;z<P.length-1;++z)ee[P[z][0]]=H.subarray(P[z][1]*U,P[z+1][1]*U);return P.length>=1&&(ee[P[P.length-1][0]]=H.subarray(P[P.length-1][1]*U)),{R:I,cells:ee}}function jI(t,a){var r,n=ds(a.data),l=(r=n?.[7])!=null&&r[0]?Ba(n[7][0].data)>>>0>0?1:0:-1,d=Dg(n[5],function(f){return kI(f,l)});return{nrows:Ba(n[4][0].data)>>>0,data:d.reduce(function(f,h){return f[h.R]||(f[h.R]=[]),h.cells.forEach(function(b,g){if(f[h.R][g])throw new Error("Duplicate cell r=".concat(h.R," c=").concat(g));f[h.R][g]=b}),f},[])}}function CI(t,a,r){var n,l=ds(a.data),d={s:{r:0,c:0},e:{r:0,c:0}};if(d.e.r=(Ba(l[6][0].data)>>>0)-1,d.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(d.e.c=(Ba(l[7][0].data)>>>0)-1,d.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=yr(d);var f=ds(l[4][0].data),h=rv(t,t[Al(f[4][0].data)][0]),b=(n=f[17])!=null&&n[0]?rv(t,t[Al(f[17][0].data)][0]):[],g=ds(f[3][0].data),w=0;g[1].forEach(function(k){var C=ds(k.data),S=t[Al(C[2][0].data)][0],D=Ba(S.meta[1][0].data);if(D!=6002)throw new Error("6001 unexpected reference to ".concat(D));var A=jI(t,S);A.data.forEach(function(M,I){M.forEach(function(F,T){var B=Zt({r:w+I,c:T}),H=NI(F,h,b);H&&(r[B]=H)})}),w+=A.nrows})}function EI(t,a){var r=ds(a.data),n={"!ref":"A1"},l=t[Al(r[2][0].data)],d=Ba(l[0].meta[1][0].data);if(d!=6001)throw new Error("6000 unexpected reference to ".concat(d));return CI(t,l[0],n),n}function SI(t,a){var r,n=ds(a.data),l={name:(r=n[1])!=null&&r[0]?Xm(n[1][0].data):"",sheets:[]},d=Dg(n[2],Al);return d.forEach(function(f){t[f].forEach(function(h){var b=Ba(h.meta[1][0].data);b==6e3&&l.sheets.push(EI(t,h))})}),l}function AI(t,a){var r=Ig(),n=ds(a.data),l=Dg(n[1],Al);if(l.forEach(function(d){t[d].forEach(function(f){var h=Ba(f.meta[1][0].data);if(h==2){var b=SI(t,f);b.sheets.forEach(function(g,w){Og(r,g,w==0?b.name:b.name+"_"+w,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function pm(t){var a,r,n,l,d={},f=[];if(t.FullPaths.forEach(function(b){if(b.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(b){if(b.name.match(/\.iwa$/)){var g;try{g=bI(b.content)}catch(k){return console.log("?? "+b.content.length+" "+(k.message||k))}var w;try{w=pI(g)}catch(k){return console.log("## "+(k.message||k))}w.forEach(function(k){d[k.id]=k.messages,f.push(k.id)})}}),!f.length)throw new Error("File has no messages");var h=((l=(n=(r=(a=d?.[1])==null?void 0:a[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:l[0].data)&&Ba(d[1][0].meta[1][0].data)==1&&d[1][0];if(h||f.forEach(function(b){d[b].forEach(function(g){var w=Ba(g.meta[1][0].data)>>>0;if(w==1)if(!h)h=g;else throw new Error("Document has multiple roots")})}),!h)throw new Error("Cannot find Document root");return AI(d,h)}function _I(t){return function(r){for(var n=0;n!=t.length;++n){var l=t[n];r[l[0]]===void 0&&(r[l[0]]=l[1]),l[2]==="n"&&(r[l[0]]=Number(r[l[0]]))}}}function Rg(t){_I([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function TI(t){return pc.WS.indexOf(t)>-1?"sheet":t==pc.CS?"chart":t==pc.DS?"dialog":t==pc.MS?"macro":t&&t.length?t:"sheet"}function DI(t,a){if(!t)return 0;try{t=a.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,TI(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function RI(t,a,r,n,l,d,f,h,b,g,w,k){try{d[n]=B0(Ws(t,r,!0),a);var C=Na(t,a),S;switch(h){case"sheet":S=LM(C,a,l,b,d[n],g,w,k);break;case"chart":if(S=PM(C,a,l,b,d[n],g,w,k),!S||!S["!drawel"])break;var D=R0(S["!drawel"].Target,a),A=Um(D),M=BD(Ws(t,D,!0),B0(Ws(t,A,!0),D)),I=R0(M,D),F=Um(I);S=wM(Ws(t,I,!0),I,b,B0(Ws(t,F,!0),I),g,S);break;case"macro":S=zM(C,a,l,b,d[n],g,w,k);break;case"dialog":S=UM(C,a,l,b,d[n],g,w,k);break;default:throw new Error("Unrecognized sheet type "+h)}f[n]=S;var T=[];d&&d[n]&&ii(d[n]).forEach(function(B){var H="";if(d[n][B].Type==pc.CMNT){H=R0(d[n][B].Target,a);var U=YM(Na(t,H,!0),H,b);if(!U||!U.length)return;U2(S,U,!1)}d[n][B].Type==pc.TCMNT&&(H=R0(d[n][B].Target,a),T=T.concat(PD(Na(t,H,!0),b)))}),T&&T.length&&U2(S,T,!0,b.people||[])}catch(B){if(b.WTF)throw B}}function un(t){return t.charAt(0)=="/"?t.slice(1):t}function MI(t,a){if(Hw(),a=a||{},Rg(a),xn(t,"META-INF/manifest.xml")||xn(t,"objectdata.xml"))return J2(t,a);if(xn(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof pm<"u"){if(t.FileIndex)return pm(t);var r=pr.utils.cfb_new();return h2(t).forEach(function(le){I8(r,le,M8(t,le))}),pm(r)}throw new Error("Unsupported NUMBERS file")}if(!xn(t,"[Content_Types].xml"))throw xn(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):xn(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=h2(t),l=_T(Ws(t,"[Content_Types].xml")),d=!1,f,h;if(l.workbooks.length===0&&(h="xl/workbook.xml",Na(t,h,!0)&&l.workbooks.push(h)),l.workbooks.length===0){if(h="xl/workbook.bin",!Na(t,h,!0))throw new Error("Could not find workbook");l.workbooks.push(h),d=!0}l.workbooks[0].slice(-3)=="bin"&&(d=!0);var b={},g={};if(!a.bookSheets&&!a.bookProps){if(z0=[],l.sst)try{z0=GM(Na(t,un(l.sst)),l.sst,a)}catch(le){if(a.WTF)throw le}a.cellStyles&&l.themes.length&&(b=VM(Ws(t,l.themes[0].replace(/^\//,""),!0)||"",l.themes[0],a)),l.style&&(g=HM(Na(t,un(l.style)),l.style,b,a))}l.links.map(function(le){try{var Y=B0(Ws(t,Um(un(le))),le);return qM(Na(t,un(le)),Y,le,a)}catch{}});var w=BM(Na(t,un(l.workbooks[0])),l.workbooks[0],a),k={},C="";l.coreprops.length&&(C=Na(t,un(l.coreprops[0]),!0),C&&(k=p4(C)),l.extprops.length!==0&&(C=Na(t,un(l.extprops[0]),!0),C&&IT(C,k,a)));var S={};(!a.bookSheets||a.bookProps)&&l.custprops.length!==0&&(C=Ws(t,un(l.custprops[0]),!0),C&&(S=FT(C,a)));var D={};if((a.bookSheets||a.bookProps)&&(w.Sheets?f=w.Sheets.map(function(Y){return Y.name}):k.Worksheets&&k.SheetNames.length>0&&(f=k.SheetNames),a.bookProps&&(D.Props=k,D.Custprops=S),a.bookSheets&&typeof f<"u"&&(D.SheetNames=f),a.bookSheets?D.SheetNames:a.bookProps))return D;f={};var A={};a.bookDeps&&l.calcchain&&(A=XM(Na(t,un(l.calcchain)),l.calcchain));var M=0,I={},F,T;{var B=w.Sheets;k.Worksheets=B.length,k.SheetNames=[];for(var H=0;H!=B.length;++H)k.SheetNames[H]=B[H].name}var U=d?"bin":"xml",L=l.workbooks[0].lastIndexOf("/"),P=(l.workbooks[0].slice(0,L+1)+"_rels/"+l.workbooks[0].slice(L+1)+".rels").replace(/^\//,"");xn(t,P)||(P="xl/_rels/workbook."+U+".rels");var z=B0(Ws(t,P,!0),P.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(a.xlmeta=$M(Na(t,un(l.metadata[0])),l.metadata[0],a)),(l.people||[]).length>=1&&(a.people=zD(Na(t,un(l.people[0])),a)),z&&(z=DI(z,w.Sheets));var W=Na(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(M=0;M!=k.Worksheets;++M){var ee="sheet";if(z&&z[M]?(F="xl/"+z[M][1].replace(/[\/]?xl\//,""),xn(t,F)||(F=z[M][1]),xn(t,F)||(F=P.replace(/_rels\/.*$/,"")+z[M][1]),ee=z[M][2]):(F="xl/worksheets/sheet"+(M+1-W)+"."+U,F=F.replace(/sheet0\./,"sheet.")),T=F.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),a&&a.sheets!=null)switch(typeof a.sheets){case"number":if(M!=a.sheets)continue e;break;case"string":if(k.SheetNames[M].toLowerCase()!=a.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(a.sheets)){for(var G=!1,ne=0;ne!=a.sheets.length;++ne)typeof a.sheets[ne]=="number"&&a.sheets[ne]==M&&(G=1),typeof a.sheets[ne]=="string"&&a.sheets[ne].toLowerCase()==k.SheetNames[M].toLowerCase()&&(G=1);if(!G)continue e}}RI(t,F,T,k.SheetNames[M],M,I,f,ee,a,w,b,g)}return D={Directory:l,Workbook:w,Props:k,Custprops:S,Deps:A,Sheets:f,SheetNames:k.SheetNames,Strings:z0,Styles:g,Themes:b,SSF:Wa(tr)},a&&a.bookFiles&&(t.files?(D.keys=n,D.files=t.files):(D.keys=[],D.files={},t.FullPaths.forEach(function(le,Y){le=le.replace(/^Root Entry[\/]/,""),D.keys.push(le),D.files[le]=t.FileIndex[Y]}))),a&&a.bookVBA&&(l.vba.length>0?D.vbaraw=Na(t,un(l.vba[0]),!0):l.defaults&&l.defaults.bin===GD&&(D.vbaraw=Na(t,"xl/vbaProject.bin",!0))),D}function II(t,a){var r=a||{},n="Workbook",l=pr.find(t,n);try{if(n="/!DataSpaces/Version",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(E7(l.content),n="/!DataSpaces/DataSpaceMap",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);var d=A7(l.content);if(d.length!==1||d[0].comps.length!==1||d[0].comps[0].t!==0||d[0].name!=="StrongEncryptionDataSpace"||d[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);var f=_7(l.content);if(f.length!=1||f[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);D7(l.content)}catch{}if(n="/EncryptionInfo",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);var h=R7(l.content);if(n="/EncryptedPackage",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(h[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(h[1],l.content,r.password||"",r);if(h[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(h[1],l.content,r.password||"",r);throw new Error("File is password-protected")}function Mg(t,a){var r="";switch((a||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Js(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(a&&a.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function OI(t,a){return pr.find(t,"EncryptedPackage")?II(t,a):tN(t,a)}function FI(t,a){var r,n=t,l=a||{};return l.type||(l.type=fr&&Buffer.isBuffer(t)?"buffer":"base64"),r=$w(n,l),MI(r,l)}function nN(t,a){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Gm(t.slice(r),a);default:break e}return J0.to_workbook(t,a)}function BI(t,a){var r="",n=Mg(t,a);switch(a.type){case"base64":r=Js(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=vo(t);break;default:throw new Error("Unrecognized type "+a.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ur(r)),a.type="binary",nN(r,a)}function LI(t,a){var r=t;return a.type=="base64"&&(r=Js(r)),r=W0.utils.decode(1200,r.slice(2),"str"),a.type="binary",nN(r,a)}function PI(t){return t.match(/[^\x00-\x7F]/)?M0(t):t}function ym(t,a,r,n){return n?(r.type="string",J0.to_workbook(t,r)):J0.to_workbook(a,r)}function $m(t,a){Tw();var r=a||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return $m(new Uint8Array(t),(r=Wa(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,l=[0,0,0,0],d=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),vc={},r.dateNF&&(vc.dateNF=r.dateNF),r.type||(r.type=fr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=fr?"buffer":"binary",n=E8(t),typeof Uint8Array<"u"&&!fr&&(r.type="array")),r.type=="string"&&(d=!0,r.type="binary",r.codepage=65001,n=PI(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var f=new ArrayBuffer(3),h=new Uint8Array(f);if(h.foo="bar",!h.foo)return r=Wa(r),r.type="array",$m(ug(n),r)}switch((l=Mg(n,r))[0]){case 208:if(l[1]===207&&l[2]===17&&l[3]===224&&l[4]===161&&l[5]===177&&l[6]===26&&l[7]===225)return OI(pr.read(n,r),r);break;case 9:if(l[1]<=8)return tN(n,r);break;case 60:return Gm(n,r);case 73:if(l[1]===73&&l[2]===42&&l[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(l[1]===68)return x7(n,r);break;case 84:if(l[1]===65&&l[2]===66&&l[3]===76)return u7.to_workbook(n,r);break;case 80:return l[1]===75&&l[2]<9&&l[3]<9?FI(n,r):ym(t,n,r,d);case 239:return l[3]===60?Gm(n,r):ym(t,n,r,d);case 255:if(l[1]===254)return LI(n,r);if(l[1]===0&&l[2]===2&&l[3]===0)return P0.to_workbook(n,r);break;case 0:if(l[1]===0&&(l[2]>=2&&l[3]===0||l[2]===0&&(l[3]===8||l[3]===9)))return P0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return z2.to_workbook(n,r);case 123:if(l[1]===92&&l[2]===114&&l[3]===116)return G7.to_workbook(n,r);break;case 10:case 13:case 32:return BI(n,r);case 137:if(l[1]===80&&l[2]===78&&l[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return c7.indexOf(l[0])>-1&&l[2]<=12&&l[3]<=31?z2.to_workbook(n,r):ym(t,n,r,d)}function zI(t,a,r,n,l,d,f,h){var b=Ka(r),g=h.defval,w=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),k=!0,C=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(C,"__rowNum__",{value:r,enumerable:!1})}catch{C.__rowNum__=r}else C.__rowNum__=r;if(!f||t[r])for(var S=a.s.c;S<=a.e.c;++S){var D=f?t[r][S]:t[n[S]+b];if(D===void 0||D.t===void 0){if(g===void 0)continue;d[S]!=null&&(C[d[S]]=g);continue}var A=D.v;switch(D.t){case"z":if(A==null)break;continue;case"e":A=A==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+D.t)}if(d[S]!=null){if(A==null)if(D.t=="e"&&A===null)C[d[S]]=null;else if(g!==void 0)C[d[S]]=g;else if(w&&A===null)C[d[S]]=null;else continue;else C[d[S]]=w&&(D.t!=="n"||D.t==="n"&&h.rawNumbers!==!1)?A:Ui(D,A,h);A!=null&&(k=!1)}}return{row:C,isempty:k}}function Wm(t,a){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,l=1,d=[],f=0,h="",b={s:{r:0,c:0},e:{r:0,c:0}},g=a||{},w=g.range!=null?g.range:t["!ref"];switch(g.header===1?n=1:g.header==="A"?n=2:Array.isArray(g.header)?n=3:g.header==null&&(n=0),typeof w){case"string":b=la(w);break;case"number":b=la(t["!ref"]),b.s.r=w;break;default:b=w}n>0&&(l=0);var k=Ka(b.s.r),C=[],S=[],D=0,A=0,M=Array.isArray(t),I=b.s.r,F=0,T={};M&&!t[I]&&(t[I]=[]);var B=g.skipHidden&&t["!cols"]||[],H=g.skipHidden&&t["!rows"]||[];for(F=b.s.c;F<=b.e.c;++F)if(!(B[F]||{}).hidden)switch(C[F]=Fa(F),r=M?t[I][F]:t[C[F]+k],n){case 1:d[F]=F-b.s.c;break;case 2:d[F]=C[F];break;case 3:d[F]=g.header[F-b.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=f=Ui(r,null,g),A=T[f]||0,!A)T[f]=1;else{do h=f+"_"+A++;while(T[h]);T[f]=A,T[h]=1}d[F]=h}for(I=b.s.r+l;I<=b.e.r;++I)if(!(H[I]||{}).hidden){var U=zI(t,b,I,C,n,d,M,g);(U.isempty===!1||(n===1?g.blankrows!==!1:g.blankrows))&&(S[D++]=U.row)}return S.length=D,S}var av=/"/g;function UI(t,a,r,n,l,d,f,h){for(var b=!0,g=[],w="",k=Ka(r),C=a.s.c;C<=a.e.c;++C)if(n[C]){var S=h.dense?(t[r]||[])[C]:t[n[C]+k];if(S==null)w="";else if(S.v!=null){b=!1,w=""+(h.rawNumbers&&S.t=="n"?S.v:Ui(S,null,h));for(var D=0,A=0;D!==w.length;++D)if((A=w.charCodeAt(D))===l||A===d||A===34||h.forceQuotes){w='"'+w.replace(av,'""')+'"';break}w=="ID"&&(w='"ID"')}else S.f!=null&&!S.F?(b=!1,w="="+S.f,w.indexOf(",")>=0&&(w='"'+w.replace(av,'""')+'"')):w="";g.push(w)}return h.blankrows===!1&&b?null:g.join(f)}function iN(t,a){var r=[],n=a??{};if(t==null||t["!ref"]==null)return"";var l=la(t["!ref"]),d=n.FS!==void 0?n.FS:",",f=d.charCodeAt(0),h=n.RS!==void 0?n.RS:`
`,b=h.charCodeAt(0),g=new RegExp((d=="|"?"\\|":d)+"+$"),w="",k=[];n.dense=Array.isArray(t);for(var C=n.skipHidden&&t["!cols"]||[],S=n.skipHidden&&t["!rows"]||[],D=l.s.c;D<=l.e.c;++D)(C[D]||{}).hidden||(k[D]=Fa(D));for(var A=0,M=l.s.r;M<=l.e.r;++M)(S[M]||{}).hidden||(w=UI(t,l,M,k,f,b,d,n),w!=null&&(n.strip&&(w=w.replace(g,"")),(w||n.blankrows!==!1)&&r.push((A++?h:"")+w)));return delete n.dense,r.join("")}function HI(t,a){a||(a={}),a.FS="	",a.RS=`
`;var r=iN(t,a);return r}function VI(t){var a="",r,n="";if(t==null||t["!ref"]==null)return[];var l=la(t["!ref"]),d="",f=[],h,b=[],g=Array.isArray(t);for(h=l.s.c;h<=l.e.c;++h)f[h]=Fa(h);for(var w=l.s.r;w<=l.e.r;++w)for(d=Ka(w),h=l.s.c;h<=l.e.c;++h)if(a=f[h]+d,r=g?(t[w]||[])[h]:t[a],n="",r!==void 0){if(r.F!=null){if(a=r.F,!r.f)continue;n=r.f,a.indexOf(":")==-1&&(a=a+":"+a)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}b[b.length]=a+"="+n}return b}function lN(t,a,r){var n=r||{},l=+!n.skipHeader,d=t||{},f=0,h=0;if(d&&n.origin!=null)if(typeof n.origin=="number")f=n.origin;else{var b=typeof n.origin=="string"?Ns(n.origin):n.origin;f=b.r,h=b.c}var g,w={s:{c:0,r:0},e:{c:h,r:f+a.length-1+l}};if(d["!ref"]){var k=la(d["!ref"]);w.e.c=Math.max(w.e.c,k.e.c),w.e.r=Math.max(w.e.r,k.e.r),f==-1&&(f=k.e.r+1,w.e.r=f+a.length-1+l)}else f==-1&&(f=0,w.e.r=a.length-1+l);var C=n.header||[],S=0;a.forEach(function(A,M){ii(A).forEach(function(I){(S=C.indexOf(I))==-1&&(C[S=C.length]=I);var F=A[I],T="z",B="",H=Zt({c:h+S,r:f+M+l});g=ad(d,H),F&&typeof F=="object"&&!(F instanceof Date)?d[H]=F:(typeof F=="number"?T="n":typeof F=="boolean"?T="b":typeof F=="string"?T="s":F instanceof Date?(T="d",n.cellDates||(T="n",F=Cs(F)),B=n.dateNF||tr[14]):F===null&&n.nullError&&(T="e",F=0),g?(g.t=T,g.v=F,delete g.w,delete g.R,B&&(g.z=B)):d[H]=g={t:T,v:F},B&&(g.z=B))})}),w.e.c=Math.max(w.e.c,h+C.length-1);var D=Ka(f);if(l)for(S=0;S<C.length;++S)d[Fa(S+h)+D]={t:"s",v:C[S]};return d["!ref"]=yr(w),d}function GI(t,a){return lN(null,t,a)}function ad(t,a,r){if(typeof a=="string"){if(Array.isArray(t)){var n=Ns(a);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[a]||(t[a]={t:"z"})}return typeof a!="number"?ad(t,Zt(a)):ad(t,Zt({r:a,c:r||0}))}function YI(t,a){if(typeof a=="number"){if(a>=0&&t.SheetNames.length>a)return a;throw new Error("Cannot find sheet # "+a)}else if(typeof a=="string"){var r=t.SheetNames.indexOf(a);if(r>-1)return r;throw new Error("Cannot find sheet name |"+a+"|")}else throw new Error("Cannot find sheet |"+a+"|")}function Ig(){return{SheetNames:[],Sheets:{}}}function Og(t,a,r,n){var l=1;if(!r)for(;l<=65535&&t.SheetNames.indexOf(r="Sheet"+l)!=-1;++l,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var d=r.match(/(^.*?)(\d+)$/);l=d&&+d[2]||0;var f=d&&d[1]||r;for(++l;l<=65535&&t.SheetNames.indexOf(r=f+l)!=-1;++l);}if(_M(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=a,r}function XI(t,a,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=YI(t,a);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function qI(t,a){return t.z=a,t}function oN(t,a,r){return a?(t.l={Target:a},r&&(t.l.Tooltip=r)):delete t.l,t}function $I(t,a,r){return oN(t,"#"+a,r)}function WI(t,a,r){t.c||(t.c=[]),t.c.push({t:a,a:r||"SheetJS"})}function KI(t,a,r,n){for(var l=typeof a!="string"?a:la(a),d=typeof a=="string"?a:yr(a),f=l.s.r;f<=l.e.r;++f)for(var h=l.s.c;h<=l.e.c;++h){var b=ad(t,f,h);b.t="n",b.F=d,delete b.v,f==l.s.r&&h==l.s.c&&(b.f=r,n&&(b.D=!0))}return t}var sv={encode_col:Fa,encode_row:Ka,encode_cell:Zt,encode_range:yr,decode_col:vg,decode_row:bg,split_cell:oT,decode_cell:Ns,decode_range:Mc,format_cell:Ui,sheet_add_aoa:f4,sheet_add_json:lN,sheet_add_dom:rN,aoa_to_sheet:Ic,json_to_sheet:GI,table_to_sheet:aN,table_to_book:xI,sheet_to_csv:iN,sheet_to_txt:HI,sheet_to_json:Wm,sheet_to_html:fI,sheet_to_formulae:VI,sheet_to_row_object_array:Wm,sheet_get_cell:ad,book_new:Ig,book_append_sheet:Og,book_set_sheet_visibility:XI,cell_set_number_format:qI,cell_set_hyperlink:oN,cell_set_internal_link:$I,cell_add_comment:WI,sheet_set_array_formula:KI,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function ZI(){const[t,a]=E.useState(!1),[r,n]=E.useState([]),[l,d]=E.useState({}),[f,h]=E.useState({}),[b,g]=E.useState({}),[w,k]=E.useState({}),[C,S]=E.useState({}),[D,A]=E.useState({}),[M,I]=E.useState({}),[F,T]=E.useState(!1),[B,H]=E.useState(!1),[U,L]=E.useState(null),[P,z]=E.useState(null);E.useEffect(()=>{W()},[]);const W=async()=>{try{T(!0);const re=await Te.get("/apartments");re.data.success&&n(re.data.data||[])}catch(re){console.error("Error loading apartments:",re),ie.error("Failed to load apartments")}finally{T(!1)}},ee=async re=>{if(re)try{const te=await Te.get(`/floors?apartment_id=${re}`);if(te.data.success){const Re=te.data.data||[];d(ke=>({...ke,[re]:Re})),Re.forEach(ke=>{G(re,ke.id)})}}catch(te){console.error("Error loading floors:",te),ie.error("Failed to load floors")}},G=async(re,te)=>{if(!(!re||!te))try{const Re=await Te.get(`/houses?apartment_id=${re}&floor_id=${te}&status=vacant`);if(Re.data.success){const ke=Re.data.data||[];h(Ve=>({...Ve,[te]:ke}))}}catch(Re){console.error("Error loading houses:",Re),ie.error("Failed to load houses")}},ne=re=>{A(te=>({...te,[re]:!te[re]})),D[re]||ee(re)},le=(re,te)=>{const Re=`${re}_${te}`;I(ke=>({...ke,[Re]:!ke[Re]}))},Y=(re,te)=>{g(ke=>({...ke,[re]:te})),(l[re]||[]).forEach(ke=>{k(Oe=>({...Oe,[ke.id]:te})),(f[ke.id]||[]).forEach(Oe=>{S(et=>({...et,[Oe.id]:te}))})})},X=(re,te,Re)=>{k(et=>({...et,[te]:Re})),(f[te]||[]).forEach(et=>{S(be=>({...be,[et.id]:Re}))});const Oe=(l[re]||[]).every(et=>et.id===te?Re:w[et.id]);g(et=>({...et,[re]:Oe}))},de=(re,te,Re,ke)=>{S(Ae=>({...Ae,[Re]:ke}));const Oe=(f[te]||[]).every(Ae=>Ae.id===Re?ke:C[Ae.id]);k(Ae=>({...Ae,[te]:Oe}));const be=(l[re]||[]).every(Ae=>Ae.id===te?Oe:w[Ae.id]);g(Ae=>({...Ae,[re]:be}))},ye=re=>{const te={};if(r.forEach(Re=>{te[Re.id]=re}),g(te),re){const Re={},ke={};r.forEach(Ve=>{(l[Ve.id]||[]).forEach(et=>{Re[et.id]=re,(f[et.id]||[]).forEach(Ae=>{ke[Ae.id]=re})})}),k(Re),S(ke)}else k({}),S({})},oe=async()=>{try{const re=Object.keys(C).filter(Oe=>C[Oe]);if(re.length===0){ie.error("Please select at least one house");return}T(!0);const te=await Te.post("/house-owners/bulk/generate-template",{house_ids:re},{responseType:"arraybuffer"}),Re=new Blob([te.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ke=window.URL.createObjectURL(Re),Ve=document.createElement("a");Ve.href=ke,Ve.download=`House_Owners_Template_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(Ve),Ve.click(),Ve.remove(),window.URL.revokeObjectURL(ke),ie.success("Excel template downloaded successfully")}catch(re){console.error("Error downloading template:",re),ie.error("Failed to download template")}finally{T(!1)}},xe=async re=>{const te=re.target.files[0];if(te){if(!te.name.match(/\.(xlsx|xls|csv)$/i)){ie.error("Please upload an Excel file");return}try{H(!0);const Re=await te.arrayBuffer(),ke=$m(Re,{type:"array"});let Ve=ke.SheetNames.find(fe=>fe==="House Owners Template"||/house owners/i.test(fe));if(!Ve)for(const fe of ke.SheetNames){const st=sv.sheet_to_json(ke.Sheets[fe],{header:1,range:0,defval:""}),Ee=st&&st[0]?st[0].map(wt=>(""+wt).toString().trim().toLowerCase()):[];if(Ee.includes("house id")||Ee.includes("house_id")||Ee.includes("house number")){Ve=fe;break}}Ve||(Ve=ke.SheetNames[0]);const Oe=ke.Sheets[Ve],et=sv.sheet_to_json(Oe,{header:1,defval:""});if(!et||et.length<2){ie.error("No data found in Excel file");return}const be=et[0].map(fe=>(""+fe).trim()),Ae=fe=>(""+(fe||"")).toLowerCase().replace(/[^a-z0-9 ]/g," ").replace(/\s+/g," ").trim(),Fe=be.map(fe=>Ae(fe)),Ce={},Je=[];if(Fe.forEach((fe,st)=>{/house/.test(fe)&&/(id|number|no)/.test(fe)&&(Ce.house_id=Ce.house_id??st),/house\s*pk|house_pk|house\s*primary|house\s*id\s*pk/.test(fe)&&(Ce.house_pk=Ce.house_pk??st),/apartment/.test(fe)&&/(id|name)/.test(fe)&&(/id/.test(fe)?Ce.apartment_id=Ce.apartment_id??st:Ce.apartment_name=Ce.apartment_name??st),/floor/.test(fe)&&(Ce.floor_id=Ce.floor_id??st),/owner/.test(fe)&&/name/.test(fe)&&(Ce.owner_name=Ce.owner_name??st),fe==="name"&&Je.push(st),/email/.test(fe)&&(Ce.email=Ce.email??st),(/nic/.test(fe)||/id ?no/.test(fe))&&(Ce.nic=Ce.nic??st),/mobile|phone|contact/.test(fe)&&(Ce.mobile=Ce.mobile??st),/occupation/.test(fe)&&(Ce.occupation=Ce.occupation??st),/country/.test(fe)&&(Ce.country=Ce.country??st),/occupied/.test(fe)&&(Ce.occupied=Ce.occupied??st)}),!Ce.owner_name&&Je.length>0)if(Ce.apartment_name){const fe=Je.find(st=>st!==Ce.apartment_name);Ce.owner_name=fe??Je[Je.length-1]}else Ce.owner_name=Je[Je.length-1];if(!Ce.house_id){const fe=Fe.find((st,Ee)=>/(house|house number|house no|house_no)/.test(st));fe&&(Ce.house_id=Fe.indexOf(fe))}const ve=et.slice(1).map((fe,st)=>({_row:st+2,house_pk:Ce.house_pk!==void 0?fe[Ce.house_pk]:void 0,house_id:Ce.house_id!==void 0?fe[Ce.house_id]:void 0,apartment_id:Ce.apartment_id!==void 0?fe[Ce.apartment_id]:void 0,floor_id:Ce.floor_id!==void 0?fe[Ce.floor_id]:void 0,name:Ce.owner_name!==void 0?fe[Ce.owner_name]:void 0,nic:Ce.nic!==void 0?fe[Ce.nic]:void 0,occupation:Ce.occupation!==void 0?fe[Ce.occupation]:void 0,country:Ce.country!==void 0?fe[Ce.country]:void 0,mobile:Ce.mobile!==void 0?fe[Ce.mobile]:void 0,email:Ce.email!==void 0?fe[Ce.email]:void 0,occupied_raw:Ce.occupied!==void 0?fe[Ce.occupied]:void 0})).filter(fe=>Object.values(fe).some(st=>st!==void 0&&st!==""));if(ve.length===0){ie.error("No data rows found in template");return}const Le=ve.map(fe=>{const st=fe._row,Ee=fe.house_pk||fe.house_id,wt=fe.name,ut=fe.email;if(!Ee||!wt||!ut)throw new Error(`Row ${st}: House ID, Owner Name, and Email are required`);if(typeof ut=="string"&&!ut.includes("@"))throw new Error(`Row ${st}: Invalid email format`);const Et=(fe.occupied_raw||"own").toString().trim();if(!["own","for rent","For rent","Own"].map(Mt=>Mt.toLowerCase()).includes(Et.toLowerCase()))throw new Error(`Row ${st}: Occupied Type must be "own" or "For rent"`);return{house_id:Ee,apartment_id:fe.apartment_id,floor_id:fe.floor_id,name:wt,nic:fe.nic||"",occupation:fe.occupation||"",country:fe.country||"",mobile:fe.mobile||"",email:ut,occupied_way:Et.toLowerCase()==="for rent"?"For rent":"own"}});L({fileName:te.name,totalRows:Le.length,data:Le}),z(te),ie.success(`Successfully parsed ${Le.length} records`)}catch(Re){console.error("Error parsing Excel file:",Re),ie.error(Re.message||"Failed to parse Excel file")}finally{H(!1),re.target.value=""}}},ae=async()=>{if(!U||U.data.length===0){ie.error("No data to import");return}try{if(H(!0),!P){ie.error("Original file not found. Please upload the Excel file again.");return}const re=new FormData;re.append("excelFile",P,P.name);const te=await Te.post("/house-owners/bulk/bulk-import",re,{headers:{"Content-Type":"multipart/form-data"}});te.data.success?(ie.success(`Import completed: ${te.data.data?.success||0} successful, ${te.data.data?.failed||0} failed`),te.data.data?.errors&&te.data.data.errors.length>0&&(console.error("Import errors:",te.data.data.errors),ie.error(`Some rows failed:
${te.data.data.errors.map(Re=>`Row ${Re.row}: ${Re.error}`).join(`
`)}`))):ie.error(te.data.message||"Import failed"),L(null),W()}catch(re){console.error("Import error:",re),ie.error(re.response?.data?.message||"Failed to import data")}finally{H(!1)}},q=()=>{const re=Object.values(b).filter(Boolean).length,te=Object.values(w).filter(Boolean).length,Re=Object.values(C).filter(Boolean).length;return{apartmentCount:re,floorCount:te,houseCount:Re}},{apartmentCount:K,houseCount:se}=q();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(RE,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bulk Import House Owners"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Select apartments, floors, and houses to create Excel template"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Select Houses"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:()=>ye(K!==r.length),className:"px-4 py-2 text-sm bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-lg font-medium hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors",children:K===r.length?"Deselect All":"Select All"})})]}),F&&r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fi,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No apartments found"})]}):e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:r.map(re=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-900 rounded-t-lg",children:[e.jsx("input",{type:"checkbox",checked:!!b[re.id],onChange:te=>Y(re.id,te.target.checked),className:"h-5 w-5 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>ne(re.id),className:"ml-3 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fi,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-3"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:re.name})]}),D[re.id]?e.jsx(Tl,{className:"h-5 w-5 text-gray-500"}):e.jsx(Y0,{className:"h-5 w-5 text-gray-500"})]})]}),D[re.id]&&e.jsx("div",{className:"p-4 pt-0",children:l[re.id]?l[re.id].length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm py-4 text-center",children:"No floors found"}):l[re.id].map(te=>e.jsxs("div",{className:"ml-6 mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:!!w[te.id],onChange:Re=>X(re.id,te.id,Re.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>le(re.id,te.id),className:"ml-2 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(jf,{className:"h-4 w-4 text-gray-500 dark:text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Floor ",te.floor_id]})]}),M[`${re.id}_${te.id}`]?e.jsx(Tl,{className:"h-4 w-4 text-gray-500"}):e.jsx(Y0,{className:"h-4 w-4 text-gray-500"})]})]}),M[`${re.id}_${te.id}`]&&e.jsx("div",{className:"ml-8 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:f[te.id]?f[te.id].length===0?e.jsx("p",{className:"col-span-full text-gray-500 dark:text-gray-400 text-sm py-2",children:"No houses found"}):f[te.id].map(Re=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!!C[Re.id],onChange:ke=>de(re.id,te.id,Re.id,ke.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("label",{className:"ml-2 flex items-center",children:[e.jsx(Hr,{className:"h-3 w-3 text-gray-500 dark:text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:Re.house_id||Re.house_number})]})]},Re.id)):e.jsx("div",{className:"col-span-full text-center py-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 mx-auto"})})})]},te.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"})})})]},re.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Download Excel Template"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Download a pre-filled Excel template with the selected houses."}),e.jsx("button",{onClick:oe,disabled:F||se===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Preparing Template..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ml,{className:"h-5 w-5"}),e.jsxs("span",{children:["Download Template (",se," houses)"]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upload & Import"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Upload the filled Excel sheet to import house owners in bulk. Verification emails will be sent automatically."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Excel File"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:xe,disabled:B,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900 dark:file:text-purple-300"})]}),U&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(hn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-300",children:"Ready to Import"})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:[U.fileName," - ",U.totalRows," records loaded"]}),e.jsxs("div",{className:"mt-3 text-xs text-green-600 dark:text-green-400 space-y-1",children:[e.jsx("p",{children:" File parsed successfully"}),e.jsx("p",{children:" Data validated"}),e.jsx("p",{children:" Ready for bulk import"})]})]}),e.jsx("button",{onClick:ae,disabled:B||!U,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Importing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Bulk Import"})]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"Instructions"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"1."}),e.jsx("span",{children:"Select apartments, floors, and houses using checkboxes"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"2."}),e.jsx("span",{children:'Click "Download Template" to get Excel file'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"3."}),e.jsx("span",{children:"Fill owner details in Excel (don't add/delete rows)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"4."}),e.jsx("span",{children:"Upload the filled Excel file"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"5."}),e.jsx("span",{children:'Click "Start Bulk Import"'})]})]})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function QI(){return e.jsx(W3,{children:e.jsx(O6,{children:e.jsxs(C3,{children:[e.jsx(Xt,{path:"/",element:e.jsx(sj,{})}),e.jsx(Xt,{path:"/login",element:e.jsx(bS,{})}),e.jsx(Xt,{path:"/register",element:e.jsx(vS,{})}),e.jsx(Xt,{path:"/verify",element:e.jsx(wS,{})}),e.jsx(Xt,{path:"/sidebar",element:e.jsx(vr,{})}),e.jsx(Xt,{path:"/navbar",element:e.jsx(Vr,{})}),e.jsx(Xt,{path:"/admindashboard",element:e.jsx(NS,{})}),e.jsx(Xt,{path:"/apartmentview",element:e.jsx(ES,{})}),e.jsx(Xt,{path:"/userview",element:e.jsx(OS,{})}),e.jsx(Xt,{path:"/floors/:id",element:e.jsx(PS,{})}),e.jsx(Xt,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(jA,{})}),e.jsx(Xt,{path:"/housetype/:apartment_id",element:e.jsx(dw,{})}),e.jsx(Xt,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(YS,{})}),e.jsx(Xt,{path:"/bills/:apartment_id",element:e.jsx(xw,{})}),e.jsx(Xt,{path:"/reset-password",element:e.jsx(EA,{})}),e.jsx(Xt,{path:"/forgot-password",element:e.jsx(CA,{})}),e.jsx(Xt,{path:"/complete-registration",element:e.jsx(SA,{})}),e.jsx(Xt,{path:"/manage-bills",element:e.jsx(AA,{})}),e.jsx(Xt,{path:"/bills-and-calculations",element:e.jsx(MA,{})}),e.jsx(Xt,{path:"/billranges/:bill_id",element:e.jsx(FA,{})}),e.jsx(Xt,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(PA,{})}),e.jsx(Xt,{path:"/employee-dashboard",element:e.jsx(zA,{})}),e.jsx(Xt,{path:"/role",element:e.jsx(cw,{})}),e.jsx(Xt,{path:"/profile-page",element:e.jsx(UA,{})}),e.jsx(Xt,{path:"/my-apartments",element:e.jsx(HA,{})}),e.jsx(Xt,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(GA,{})}),e.jsx(Xt,{path:"/bill-payments",element:e.jsx(YA,{})}),e.jsx(Xt,{path:"/measurable-bills",element:e.jsx(Sw,{})}),e.jsx(Xt,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(R_,{})}),e.jsx(Xt,{path:"/my-bills",element:e.jsx(M_,{})}),e.jsx(Xt,{path:"/house-bill-meter/:bill_id",element:e.jsx(I_,{})}),e.jsx(Xt,{path:"/bill-payment-settle",element:e.jsx(O_,{})}),e.jsx(Xt,{path:"/houseowner/login",element:e.jsx(F_,{})}),e.jsx(Xt,{path:"/houseowner/verify",element:e.jsx(L_,{})}),e.jsx(Xt,{path:"/houseowner/dashboard",element:e.jsx(B_,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-houseview",element:e.jsx(P_,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-billview",element:e.jsx(z_,{})}),e.jsx(Xt,{path:"/houseowner/complaints",element:e.jsx(U_,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-profile",element:e.jsx(G_,{})}),e.jsx(Xt,{path:"/view-complaints",element:e.jsx(H_,{})}),e.jsx(Xt,{path:"/my-complaints",element:e.jsx(V_,{})}),e.jsx(Xt,{path:"/my-work/:complaintId",element:e.jsx(X_,{})}),e.jsx(Xt,{path:"/start-work",element:e.jsx(Aw,{})}),e.jsx(Xt,{path:"/complaint-categories",element:e.jsx(W_,{})}),e.jsx(Xt,{path:"/bulk-import-houseowner",element:e.jsx(ZI,{})})]})})})}function JI(){const[t,a]=E.useState(null);return e.jsx(Or.Provider,{value:{auth:t,setAuth:a},children:e.jsx(QI,{})})}Ok.createRoot(document.getElementById("root")).render(e.jsx(JI,{}));export{hw as _,Eu as c,hf as g};
