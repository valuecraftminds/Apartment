function Ck(t,a){for(var r=0;r<a.length;r++){const n=a[r];if(typeof n!="string"&&!Array.isArray(n)){for(const l in n)if(l!=="default"&&!(l in t)){const d=Object.getOwnPropertyDescriptor(n,l);d&&Object.defineProperty(t,l,d.get?d:{enumerable:!0,get:()=>n[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))n(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var Cu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ff(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Eh={exports:{}},E0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function Sk(){if(Ay)return E0;Ay=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(n,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var h in l)h!=="key"&&(d[h]=l[h])}else d=l;return l=d.ref,{$$typeof:t,type:n,key:f,ref:l!==void 0?l:null,props:d}}return E0.Fragment=a,E0.jsx=r,E0.jsxs=r,E0}var _y;function Ak(){return _y||(_y=1,Eh.exports=Sk()),Eh.exports}var e=Ak(),Ch={exports:{}},sr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ty;function _k(){if(Ty)return sr;Ty=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),k=Symbol.iterator;function E(le){return le===null||typeof le!="object"?null:(le=k&&le[k]||le["@@iterator"],typeof le=="function"?le:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D=Object.assign,A={};function M(le,X,W){this.props=le,this.context=X,this.refs=A,this.updater=W||S}M.prototype.isReactComponent={},M.prototype.setState=function(le,X){if(typeof le!="object"&&typeof le!="function"&&le!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,le,X,"setState")},M.prototype.forceUpdate=function(le){this.updater.enqueueForceUpdate(this,le,"forceUpdate")};function I(){}I.prototype=M.prototype;function F(le,X,W){this.props=le,this.context=X,this.refs=A,this.updater=W||S}var T=F.prototype=new I;T.constructor=F,D(T,M.prototype),T.isPureReactComponent=!0;var L=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function B(le,X,W,K,ae,oe){return W=oe.ref,{$$typeof:t,type:le,key:X,ref:W!==void 0?W:null,props:oe}}function P(le,X){return B(le.type,X,void 0,void 0,void 0,le.props)}function z(le){return typeof le=="object"&&le!==null&&le.$$typeof===t}function Z(le){var X={"=":"=0",":":"=2"};return"$"+le.replace(/[=:]/g,function(W){return X[W]})}var te=/\/+/g;function G(le,X){return typeof le=="object"&&le!==null&&le.key!=null?Z(""+le.key):X.toString(36)}function se(){}function ie(le){switch(le.status){case"fulfilled":return le.value;case"rejected":throw le.reason;default:switch(typeof le.status=="string"?le.then(se,se):(le.status="pending",le.then(function(X){le.status==="pending"&&(le.status="fulfilled",le.value=X)},function(X){le.status==="pending"&&(le.status="rejected",le.reason=X)})),le.status){case"fulfilled":return le.value;case"rejected":throw le.reason}}throw le}function Y(le,X,W,K,ae){var oe=typeof le;(oe==="undefined"||oe==="boolean")&&(le=null);var re=!1;if(le===null)re=!0;else switch(oe){case"bigint":case"string":case"number":re=!0;break;case"object":switch(le.$$typeof){case t:case a:re=!0;break;case w:return re=le._init,Y(re(le._payload),X,W,K,ae)}}if(re)return ae=ae(le),re=K===""?"."+G(le,0):K,L(ae)?(W="",re!=null&&(W=re.replace(te,"$&/")+"/"),Y(ae,X,W,"",function(Pe){return Pe})):ae!=null&&(z(ae)&&(ae=P(ae,W+(ae.key==null||le&&le.key===ae.key?"":(""+ae.key).replace(te,"$&/")+"/")+re)),X.push(ae)),1;re=0;var Re=K===""?".":K+":";if(L(le))for(var ke=0;ke<le.length;ke++)K=le[ke],oe=Re+G(K,ke),re+=Y(K,X,W,oe,ae);else if(ke=E(le),typeof ke=="function")for(le=ke.call(le),ke=0;!(K=le.next()).done;)K=K.value,oe=Re+G(K,ke++),re+=Y(K,X,W,oe,ae);else if(oe==="object"){if(typeof le.then=="function")return Y(ie(le),X,W,K,ae);throw X=String(le),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(le).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return re}function q(le,X,W){if(le==null)return le;var K=[],ae=0;return Y(le,K,"","",function(oe){return X.call(W,oe,ae++)}),K}function ce(le){if(le._status===-1){var X=le._result;X=X(),X.then(function(W){(le._status===0||le._status===-1)&&(le._status=1,le._result=W)},function(W){(le._status===0||le._status===-1)&&(le._status=2,le._result=W)}),le._status===-1&&(le._status=0,le._result=X)}if(le._status===1)return le._result.default;throw le._result}var pe=typeof reportError=="function"?reportError:function(le){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof le=="object"&&le!==null&&typeof le.message=="string"?String(le.message):String(le),error:le});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",le);return}console.error(le)};function me(){}return sr.Children={map:q,forEach:function(le,X,W){q(le,function(){X.apply(this,arguments)},W)},count:function(le){var X=0;return q(le,function(){X++}),X},toArray:function(le){return q(le,function(X){return X})||[]},only:function(le){if(!z(le))throw Error("React.Children.only expected to receive a single React element child.");return le}},sr.Component=M,sr.Fragment=r,sr.Profiler=l,sr.PureComponent=F,sr.StrictMode=n,sr.Suspense=b,sr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,sr.__COMPILER_RUNTIME={__proto__:null,c:function(le){return H.H.useMemoCache(le)}},sr.cache=function(le){return function(){return le.apply(null,arguments)}},sr.cloneElement=function(le,X,W){if(le==null)throw Error("The argument must be a React element, but you passed "+le+".");var K=D({},le.props),ae=le.key,oe=void 0;if(X!=null)for(re in X.ref!==void 0&&(oe=void 0),X.key!==void 0&&(ae=""+X.key),X)!U.call(X,re)||re==="key"||re==="__self"||re==="__source"||re==="ref"&&X.ref===void 0||(K[re]=X[re]);var re=arguments.length-2;if(re===1)K.children=W;else if(1<re){for(var Re=Array(re),ke=0;ke<re;ke++)Re[ke]=arguments[ke+2];K.children=Re}return B(le.type,ae,void 0,void 0,oe,K)},sr.createContext=function(le){return le={$$typeof:f,_currentValue:le,_currentValue2:le,_threadCount:0,Provider:null,Consumer:null},le.Provider=le,le.Consumer={$$typeof:d,_context:le},le},sr.createElement=function(le,X,W){var K,ae={},oe=null;if(X!=null)for(K in X.key!==void 0&&(oe=""+X.key),X)U.call(X,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(ae[K]=X[K]);var re=arguments.length-2;if(re===1)ae.children=W;else if(1<re){for(var Re=Array(re),ke=0;ke<re;ke++)Re[ke]=arguments[ke+2];ae.children=Re}if(le&&le.defaultProps)for(K in re=le.defaultProps,re)ae[K]===void 0&&(ae[K]=re[K]);return B(le,oe,void 0,void 0,null,ae)},sr.createRef=function(){return{current:null}},sr.forwardRef=function(le){return{$$typeof:h,render:le}},sr.isValidElement=z,sr.lazy=function(le){return{$$typeof:w,_payload:{_status:-1,_result:le},_init:ce}},sr.memo=function(le,X){return{$$typeof:g,type:le,compare:X===void 0?null:X}},sr.startTransition=function(le){var X=H.T,W={};H.T=W;try{var K=le(),ae=H.S;ae!==null&&ae(W,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(me,pe)}catch(oe){pe(oe)}finally{H.T=X}},sr.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},sr.use=function(le){return H.H.use(le)},sr.useActionState=function(le,X,W){return H.H.useActionState(le,X,W)},sr.useCallback=function(le,X){return H.H.useCallback(le,X)},sr.useContext=function(le){return H.H.useContext(le)},sr.useDebugValue=function(){},sr.useDeferredValue=function(le,X){return H.H.useDeferredValue(le,X)},sr.useEffect=function(le,X,W){var K=H.H;if(typeof W=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return K.useEffect(le,X)},sr.useId=function(){return H.H.useId()},sr.useImperativeHandle=function(le,X,W){return H.H.useImperativeHandle(le,X,W)},sr.useInsertionEffect=function(le,X){return H.H.useInsertionEffect(le,X)},sr.useLayoutEffect=function(le,X){return H.H.useLayoutEffect(le,X)},sr.useMemo=function(le,X){return H.H.useMemo(le,X)},sr.useOptimistic=function(le,X){return H.H.useOptimistic(le,X)},sr.useReducer=function(le,X,W){return H.H.useReducer(le,X,W)},sr.useRef=function(le){return H.H.useRef(le)},sr.useState=function(le){return H.H.useState(le)},sr.useSyncExternalStore=function(le,X,W){return H.H.useSyncExternalStore(le,X,W)},sr.useTransition=function(){return H.H.useTransition()},sr.version="19.1.1",sr}var Dy;function Wm(){return Dy||(Dy=1,Ch.exports=_k()),Ch.exports}var C=Wm();const Dr=ff(C);var Sh={exports:{}},C0={},Ah={exports:{}},_h={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ry;function Tk(){return Ry||(Ry=1,function(t){function a(q,ce){var pe=q.length;q.push(ce);e:for(;0<pe;){var me=pe-1>>>1,le=q[me];if(0<l(le,ce))q[me]=ce,q[pe]=le,pe=me;else break e}}function r(q){return q.length===0?null:q[0]}function n(q){if(q.length===0)return null;var ce=q[0],pe=q.pop();if(pe!==ce){q[0]=pe;e:for(var me=0,le=q.length,X=le>>>1;me<X;){var W=2*(me+1)-1,K=q[W],ae=W+1,oe=q[ae];if(0>l(K,pe))ae<le&&0>l(oe,K)?(q[me]=oe,q[ae]=pe,me=ae):(q[me]=K,q[W]=pe,me=W);else if(ae<le&&0>l(oe,pe))q[me]=oe,q[ae]=pe,me=ae;else break e}}return ce}function l(q,ce){var pe=q.sortIndex-ce.sortIndex;return pe!==0?pe:q.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var b=[],g=[],w=1,k=null,E=3,S=!1,D=!1,A=!1,M=!1,I=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function L(q){for(var ce=r(g);ce!==null;){if(ce.callback===null)n(g);else if(ce.startTime<=q)n(g),ce.sortIndex=ce.expirationTime,a(b,ce);else break;ce=r(g)}}function H(q){if(A=!1,L(q),!D)if(r(b)!==null)D=!0,U||(U=!0,G());else{var ce=r(g);ce!==null&&Y(H,ce.startTime-q)}}var U=!1,B=-1,P=5,z=-1;function Z(){return M?!0:!(t.unstable_now()-z<P)}function te(){if(M=!1,U){var q=t.unstable_now();z=q;var ce=!0;try{e:{D=!1,A&&(A=!1,F(B),B=-1),S=!0;var pe=E;try{t:{for(L(q),k=r(b);k!==null&&!(k.expirationTime>q&&Z());){var me=k.callback;if(typeof me=="function"){k.callback=null,E=k.priorityLevel;var le=me(k.expirationTime<=q);if(q=t.unstable_now(),typeof le=="function"){k.callback=le,L(q),ce=!0;break t}k===r(b)&&n(b),L(q)}else n(b);k=r(b)}if(k!==null)ce=!0;else{var X=r(g);X!==null&&Y(H,X.startTime-q),ce=!1}}break e}finally{k=null,E=pe,S=!1}ce=void 0}}finally{ce?G():U=!1}}}var G;if(typeof T=="function")G=function(){T(te)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,ie=se.port2;se.port1.onmessage=te,G=function(){ie.postMessage(null)}}else G=function(){I(te,0)};function Y(q,ce){B=I(function(){q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var pe=E;E=ce;try{return q()}finally{E=pe}},t.unstable_requestPaint=function(){M=!0},t.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var pe=E;E=q;try{return ce()}finally{E=pe}},t.unstable_scheduleCallback=function(q,ce,pe){var me=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?me+pe:me):pe=me,q){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=pe+le,q={id:w++,callback:ce,priorityLevel:q,startTime:pe,expirationTime:le,sortIndex:-1},pe>me?(q.sortIndex=pe,a(g,q),r(b)===null&&q===r(g)&&(A?(F(B),B=-1):A=!0,Y(H,pe-me))):(q.sortIndex=le,a(b,q),D||S||(D=!0,U||(U=!0,G()))),q},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(q){var ce=E;return function(){var pe=E;E=ce;try{return q.apply(this,arguments)}finally{E=pe}}}}(_h)),_h}var My;function Dk(){return My||(My=1,Ah.exports=Tk()),Ah.exports}var Th={exports:{}},ns={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function Rk(){if(Iy)return ns;Iy=1;var t=Wm();function a(b){var g="https://react.dev/errors/"+b;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)g+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+b+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var n={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,g,w){var k=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:k==null?null:""+k,children:b,containerInfo:g,implementation:w}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(b,g){if(b==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ns.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,ns.createPortal=function(b,g){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(a(299));return d(b,g,null,w)},ns.flushSync=function(b){var g=f.T,w=n.p;try{if(f.T=null,n.p=2,b)return b()}finally{f.T=g,n.p=w,n.d.f()}},ns.preconnect=function(b,g){typeof b=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,n.d.C(b,g))},ns.prefetchDNS=function(b){typeof b=="string"&&n.d.D(b)},ns.preinit=function(b,g){if(typeof b=="string"&&g&&typeof g.as=="string"){var w=g.as,k=h(w,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;w==="style"?n.d.S(b,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:k,integrity:E,fetchPriority:S}):w==="script"&&n.d.X(b,{crossOrigin:k,integrity:E,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ns.preinitModule=function(b,g){if(typeof b=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var w=h(g.as,g.crossOrigin);n.d.M(b,{crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&n.d.M(b)},ns.preload=function(b,g){if(typeof b=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var w=g.as,k=h(w,g.crossOrigin);n.d.L(b,w,{crossOrigin:k,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ns.preloadModule=function(b,g){if(typeof b=="string")if(g){var w=h(g.as,g.crossOrigin);n.d.m(b,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:w,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else n.d.m(b)},ns.requestFormReset=function(b){n.d.r(b)},ns.unstable_batchedUpdates=function(b,g){return b(g)},ns.useFormState=function(b,g,w){return f.H.useFormState(b,g,w)},ns.useFormStatus=function(){return f.H.useHostTransitionStatus()},ns.version="19.1.1",ns}var Oy;function Mk(){if(Oy)return Th.exports;Oy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Th.exports=Rk(),Th.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function Ik(){if(Fy)return C0;Fy=1;var t=Dk(),a=Wm(),r=Mk();function n(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)o+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var o=s,x=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(x=o.return),s=o.return;while(s)}return o.tag===3?x:null}function f(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(d(s)!==s)throw Error(n(188))}function b(s){var o=s.alternate;if(!o){if(o=d(s),o===null)throw Error(n(188));return o!==s?null:s}for(var x=s,y=o;;){var j=x.return;if(j===null)break;var R=j.alternate;if(R===null){if(y=j.return,y!==null){x=y;continue}break}if(j.child===R.child){for(R=j.child;R;){if(R===x)return h(j),s;if(R===y)return h(j),o;R=R.sibling}throw Error(n(188))}if(x.return!==y.return)x=j,y=R;else{for(var Q=!1,xe=j.child;xe;){if(xe===x){Q=!0,x=j,y=R;break}if(xe===y){Q=!0,y=j,x=R;break}xe=xe.sibling}if(!Q){for(xe=R.child;xe;){if(xe===x){Q=!0,x=R,y=j;break}if(xe===y){Q=!0,y=R,x=j;break}xe=xe.sibling}if(!Q)throw Error(n(189))}}if(x.alternate!==y)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?s:o}function g(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=g(s),o!==null)return o;s=s.sibling}return null}var w=Object.assign,k=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),T=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=te&&s[te]||s["@@iterator"],typeof s=="function"?s:null)}var se=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===se?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case D:return"Fragment";case M:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case U:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case S:return"Portal";case T:return(s.displayName||"Context")+".Provider";case F:return(s._context.displayName||"Context")+".Consumer";case L:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case B:return o=s.displayName||null,o!==null?o:ie(s.type)||"Memo";case P:o=s._payload,s=s._init;try{return ie(s(o))}catch{}}return null}var Y=Array.isArray,q=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe={pending:!1,data:null,method:null,action:null},me=[],le=-1;function X(s){return{current:s}}function W(s){0>le||(s.current=me[le],me[le]=null,le--)}function K(s,o){le++,me[le]=s.current,s.current=o}var ae=X(null),oe=X(null),re=X(null),Re=X(null);function ke(s,o){switch(K(re,o),K(oe,s),K(ae,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?ry(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=ry(o),s=ay(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}W(ae),K(ae,s)}function Pe(){W(ae),W(oe),W(re)}function Oe(s){s.memoizedState!==null&&K(Re,s);var o=ae.current,x=ay(o,s.type);o!==x&&(K(oe,s),K(ae,x))}function nt(s){oe.current===s&&(W(ae),W(oe)),Re.current===s&&(W(Re),v0._currentValue=pe)}var we=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,Le=t.unstable_cancelCallback,Ee=t.unstable_shouldYield,Je=t.unstable_requestPaint,be=t.unstable_now,Be=t.unstable_getCurrentPriorityLevel,fe=t.unstable_ImmediatePriority,at=t.unstable_UserBlockingPriority,Ce=t.unstable_NormalPriority,wt=t.unstable_LowPriority,ut=t.unstable_IdlePriority,Ct=t.log,Mt=t.unstable_setDisableYieldValue,qt=null,ur=null;function Ut(s){if(typeof Ct=="function"&&Mt(s),ur&&typeof ur.setStrictMode=="function")try{ur.setStrictMode(qt,s)}catch{}}var Yt=Math.clz32?Math.clz32:jt,It=Math.log,$e=Math.LN2;function jt(s){return s>>>=0,s===0?32:31-(It(s)/$e|0)|0}var Nt=256,lt=4194304;function At(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function vt(s,o,x){var y=s.pendingLanes;if(y===0)return 0;var j=0,R=s.suspendedLanes,Q=s.pingedLanes;s=s.warmLanes;var xe=y&134217727;return xe!==0?(y=xe&~R,y!==0?j=At(y):(Q&=xe,Q!==0?j=At(Q):x||(x=xe&~s,x!==0&&(j=At(x))))):(xe=y&~R,xe!==0?j=At(xe):Q!==0?j=At(Q):x||(x=y&~s,x!==0&&(j=At(x)))),j===0?0:o!==0&&o!==j&&(o&R)===0&&(R=j&-j,x=o&-o,R>=x||R===32&&(x&4194048)!==0)?o:j}function st(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function kt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Os(){var s=Nt;return Nt<<=1,(Nt&4194048)===0&&(Nt=256),s}function Bn(){var s=lt;return lt<<=1,(lt&62914560)===0&&(lt=4194304),s}function _t(s){for(var o=[],x=0;31>x;x++)o.push(s);return o}function Jr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function en(s,o,x,y,j,R){var Q=s.pendingLanes;s.pendingLanes=x,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=x,s.entangledLanes&=x,s.errorRecoveryDisabledLanes&=x,s.shellSuspendCounter=0;var xe=s.entanglements,_e=s.expirationTimes,Ye=s.hiddenUpdates;for(x=Q&~x;0<x;){var it=31-Yt(x),dt=1<<it;xe[it]=0,_e[it]=-1;var qe=Ye[it];if(qe!==null)for(Ye[it]=null,it=0;it<qe.length;it++){var Ze=qe[it];Ze!==null&&(Ze.lane&=-536870913)}x&=~dt}y!==0&&Ll(s,y,0),R!==0&&j===0&&s.tag!==0&&(s.suspendedLanes|=R&~(Q&~o))}function Ll(s,o,x){s.pendingLanes|=o,s.suspendedLanes&=~o;var y=31-Yt(o);s.entangledLanes|=o,s.entanglements[y]=s.entanglements[y]|1073741824|x&4194090}function Za(s,o){var x=s.entangledLanes|=o;for(s=s.entanglements;x;){var y=31-Yt(x),j=1<<y;j&o|s[y]&o&&(s[y]|=o),x&=~j}}function fi(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ea(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function yn(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:Ny(s.type))}function Vi(s,o){var x=ce.p;try{return ce.p=s,o()}finally{ce.p=x}}var ca=Math.random().toString(36).slice(2),pa="__reactFiber$"+ca,zr="__reactProps$"+ca,tn="__reactContainer$"+ca,ya="__reactEvents$"+ca,bn="__reactListeners$"+ca,de="__reactHandles$"+ca,he="__reactResources$"+ca,ge="__reactMarker$"+ca;function ve(s){delete s[pa],delete s[zr],delete s[ya],delete s[bn],delete s[de]}function Ne(s){var o=s[pa];if(o)return o;for(var x=s.parentNode;x;){if(o=x[tn]||x[pa]){if(x=o.alternate,o.child!==null||x!==null&&x.child!==null)for(s=ly(s);s!==null;){if(x=s[pa])return x;s=ly(s)}return o}s=x,x=s.parentNode}return null}function Se(s){if(s=s[pa]||s[tn]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Ge(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(n(33))}function rt(s){var o=s[he];return o||(o=s[he]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Fe(s){s[ge]=!0}var Xe=new Set,We={};function ct(s,o){xt(s,o),xt(s+"Capture",o)}function xt(s,o){for(We[s]=o,s=0;s<o.length;s++)Xe.add(o[s])}var mt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pt={},bt={};function Pt(s){return we.call(bt,s)?!0:we.call(pt,s)?!1:mt.test(s)?bt[s]=!0:(pt[s]=!0,!1)}function tt(s,o,x){if(Pt(o))if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var y=o.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+x)}}function kr(s,o,x){if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+x)}}function zt(s,o,x,y){if(y===null)s.removeAttribute(x);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(x);return}s.setAttributeNS(o,x,""+y)}}var Qa,Pn;function Qt(s){if(Qa===void 0)try{throw Error()}catch(x){var o=x.stack.trim().match(/\n( *(at )?)/);Qa=o&&o[1]||"",Pn=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Qa+s+Pn}var Jt=!1;function er(s,o){if(!s||Jt)return"";Jt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(o){var dt=function(){throw Error()};if(Object.defineProperty(dt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(dt,[])}catch(Ze){var qe=Ze}Reflect.construct(s,[],dt)}else{try{dt.call()}catch(Ze){qe=Ze}s.call(dt.prototype)}}else{try{throw Error()}catch(Ze){qe=Ze}(dt=s())&&typeof dt.catch=="function"&&dt.catch(function(){})}}catch(Ze){if(Ze&&qe&&typeof Ze.stack=="string")return[Ze.stack,qe.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var j=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");j&&j.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=y.DetermineComponentFrameRoot(),Q=R[0],xe=R[1];if(Q&&xe){var _e=Q.split(`
`),Ye=xe.split(`
`);for(j=y=0;y<_e.length&&!_e[y].includes("DetermineComponentFrameRoot");)y++;for(;j<Ye.length&&!Ye[j].includes("DetermineComponentFrameRoot");)j++;if(y===_e.length||j===Ye.length)for(y=_e.length-1,j=Ye.length-1;1<=y&&0<=j&&_e[y]!==Ye[j];)j--;for(;1<=y&&0<=j;y--,j--)if(_e[y]!==Ye[j]){if(y!==1||j!==1)do if(y--,j--,0>j||_e[y]!==Ye[j]){var it=`
`+_e[y].replace(" at new "," at ");return s.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",s.displayName)),it}while(1<=y&&0<=j);break}}}finally{Jt=!1,Error.prepareStackTrace=x}return(x=s?s.displayName||s.name:"")?Qt(x):""}function ms(s){switch(s.tag){case 26:case 27:case 5:return Qt(s.type);case 16:return Qt("Lazy");case 13:return Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return er(s.type,!1);case 11:return er(s.type.render,!1);case 1:return er(s.type,!0);case 31:return Qt("Activity");default:return""}}function Ro(s){try{var o="";do o+=ms(s),s=s.return;while(s);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function Ja(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ta(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function zn(s){var o=ta(s)?"checked":"value",x=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),y=""+s[o];if(!s.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var j=x.get,R=x.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return j.call(this)},set:function(Q){y=""+Q,R.call(this,Q)}}),Object.defineProperty(s,o,{enumerable:x.enumerable}),{getValue:function(){return y},setValue:function(Q){y=""+Q},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function Mo(s){s._valueTracker||(s._valueTracker=zn(s))}function Xr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var x=o.getValue(),y="";return s&&(y=ta(s)?s.checked?"true":"false":s.value),s=y,s!==x?(o.setValue(s),!0):!1}function Fs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Df=/[\n"\\]/g;function Ca(s){return s.replace(Df,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function jr(s,o,x,y,j,R,Q,xe){s.name="",Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"?s.type=Q:s.removeAttribute("type"),o!=null?Q==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Ja(o)):s.value!==""+Ja(o)&&(s.value=""+Ja(o)):Q!=="submit"&&Q!=="reset"||s.removeAttribute("value"),o!=null?He(s,Q,Ja(o)):x!=null?He(s,Q,Ja(x)):y!=null&&s.removeAttribute("value"),j==null&&R!=null&&(s.defaultChecked=!!R),j!=null&&(s.checked=j&&typeof j!="function"&&typeof j!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?s.name=""+Ja(xe):s.removeAttribute("name")}function Sa(s,o,x,y,j,R,Q,xe){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),o!=null||x!=null){if(!(R!=="submit"&&R!=="reset"||o!=null))return;x=x!=null?""+Ja(x):"",o=o!=null?""+Ja(o):x,xe||o===s.value||(s.value=o),s.defaultValue=o}y=y??j,y=typeof y!="function"&&typeof y!="symbol"&&!!y,s.checked=xe?s.checked:!!y,s.defaultChecked=!!y,Q!=null&&typeof Q!="function"&&typeof Q!="symbol"&&typeof Q!="boolean"&&(s.name=Q)}function He(s,o,x){o==="number"&&Fs(s.ownerDocument)===s||s.defaultValue===""+x||(s.defaultValue=""+x)}function ye(s,o,x,y){if(s=s.options,o){o={};for(var j=0;j<x.length;j++)o["$"+x[j]]=!0;for(x=0;x<s.length;x++)j=o.hasOwnProperty("$"+s[x].value),s[x].selected!==j&&(s[x].selected=j),j&&y&&(s[x].defaultSelected=!0)}else{for(x=""+Ja(x),o=null,j=0;j<s.length;j++){if(s[j].value===x){s[j].selected=!0,y&&(s[j].defaultSelected=!0);return}o!==null||s[j].disabled||(o=s[j])}o!==null&&(o.selected=!0)}}function Tt(s,o,x){if(o!=null&&(o=""+Ja(o),o!==s.value&&(s.value=o),x==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=x!=null?""+Ja(x):""}function da(s,o,x,y){if(o==null){if(y!=null){if(x!=null)throw Error(n(92));if(Y(y)){if(1<y.length)throw Error(n(93));y=y[0]}x=y}x==null&&(x=""),o=x}x=Ja(o),s.defaultValue=x,y=s.textContent,y===x&&y!==""&&y!==null&&(s.value=y)}function Aa(s,o){if(o){var x=s.firstChild;if(x&&x===s.lastChild&&x.nodeType===3){x.nodeValue=o;return}}s.textContent=o}var Rf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Io(s,o,x){var y=o.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?y?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":y?s.setProperty(o,x):typeof x!="number"||x===0||Rf.has(o)?o==="float"?s.cssFloat=x:s[o]=(""+x).trim():s[o]=x+"px"}function gs(s,o,x){if(o!=null&&typeof o!="object")throw Error(n(62));if(s=s.style,x!=null){for(var y in x)!x.hasOwnProperty(y)||o!=null&&o.hasOwnProperty(y)||(y.indexOf("--")===0?s.setProperty(y,""):y==="float"?s.cssFloat="":s[y]="");for(var j in o)y=o[j],o.hasOwnProperty(j)&&x[j]!==y&&Io(s,j,y)}else for(var R in o)o.hasOwnProperty(R)&&Io(s,R,o[R])}function Dt(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),vd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Oo(s){return vd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Bl=null;function Gi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Un=null,Yi=null;function ua(s){var o=Se(s);if(o&&(s=o.stateNode)){var x=s[zr]||null;e:switch(s=o.stateNode,o.type){case"input":if(jr(s,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),o=x.name,x.type==="radio"&&o!=null){for(x=s;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Ca(""+o)+'"][type="radio"]'),o=0;o<x.length;o++){var y=x[o];if(y!==s&&y.form===s.form){var j=y[zr]||null;if(!j)throw Error(n(90));jr(y,j.value,j.defaultValue,j.defaultValue,j.checked,j.defaultChecked,j.type,j.name)}}for(o=0;o<x.length;o++)y=x[o],y.form===s.form&&Xr(y)}break e;case"textarea":Tt(s,x.value,x.defaultValue);break e;case"select":o=x.value,o!=null&&ye(s,!!x.multiple,o,!1)}}}var xi=!1;function vn(s,o,x){if(xi)return s(o,x);xi=!0;try{var y=s(o);return y}finally{if(xi=!1,(Un!==null||Yi!==null)&&(nu(),Un&&(o=Un,s=Yi,Yi=Un=null,ua(o),s)))for(o=0;o<s.length;o++)ua(s[o])}}function Ot(s,o){var x=s.stateNode;if(x===null)return null;var y=x[zr]||null;if(y===null)return null;x=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(x&&typeof x!="function")throw Error(n(231,o,typeof x));return x}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wt=!1;if(wn)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{Wt=!1}var Hn=null,Pl=null,zl=null;function Vn(){if(zl)return zl;var s,o=Pl,x=o.length,y,j="value"in Hn?Hn.value:Hn.textContent,R=j.length;for(s=0;s<x&&o[s]===j[s];s++);var Q=x-s;for(y=1;y<=Q&&o[x-y]===j[R-y];y++);return zl=j.slice(s,1<y?1-y:void 0)}function Fo(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Gn(){return!0}function Xi(){return!1}function ba(s){function o(x,y,j,R,Q){this._reactName=x,this._targetInst=j,this.type=y,this.nativeEvent=R,this.target=Q,this.currentTarget=null;for(var xe in s)s.hasOwnProperty(xe)&&(x=s[xe],this[xe]=x?x(R):R[xe]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Gn:Xi,this.isPropagationStopped=Xi,this}return w(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Gn)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Gn)},persist:function(){},isPersistent:Gn}),o}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xn=ba(Yn),Nn=w({},Yn,{view:0,detail:0}),es=ba(Nn),Lo,Bo,qi,Po=w({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==qi&&(qi&&s.type==="mousemove"?(Lo=s.screenX-qi.screenX,Bo=s.screenY-qi.screenY):Bo=Lo=0,qi=s),Lo)},movementY:function(s){return"movementY"in s?s.movementY:Bo}}),wd=ba(Po),Mf=w({},Po,{dataTransfer:0}),Er=ba(Mf),Nd=w({},Nn,{relatedTarget:0}),$i=ba(Nd),qn=w({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),If=ba(qn),Qe=w({},Yn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ar=ba(Qe),_a=w({},Yn,{data:0}),Ul=ba(_a),kd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Of={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lf(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Ff[s])?!!o[s]:!1}function Hl(){return Lf}var fa=w({},Nn,{key:function(s){if(s.key){var o=kd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Fo(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Of[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hl,charCode:function(s){return s.type==="keypress"?Fo(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Fo(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Fc=ba(fa),qr=w({},Po,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=ba(qr),hi=w({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hl}),Cr=ba(hi),Ft=w({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bf=ba(Ft),Lr=w({},Po,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),mi=ba(Lr),Wi=w({},Yn,{newState:0,oldState:0}),Pf=ba(Wi),rn=[9,13,27,32],Gl=wn&&"CompositionEvent"in window,Ki=null;wn&&"documentMode"in document&&(Ki=document.documentMode);var Lc=wn&&"TextEvent"in window&&!Ki,Bc=wn&&(!Gl||Ki&&8<Ki&&11>=Ki),Pc=" ",jd=!1;function gi(s,o){switch(s){case"keyup":return rn.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zo(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Zi=!1;function Yl(s,o){switch(s){case"compositionend":return zo(o);case"keypress":return o.which!==32?null:(jd=!0,Pc);case"textInput":return s=o.data,s===Pc&&jd?null:s;default:return null}}function zf(s,o){if(Zi)return s==="compositionend"||!Gl&&gi(s,o)?(s=Vn(),zl=Pl=Hn=null,Zi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Bc&&o.locale!=="ko"?null:o.data;default:return null}}var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xl(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!$n[s.type]:o==="textarea"}function ps(s,o,x,y){Un?Yi?Yi.push(y):Yi=[y]:Un=y,o=uu(o,"onChange"),0<o.length&&(x=new Xn("onChange","change",null,x,y),s.push({event:x,listeners:o}))}var Qi=null,ts=null;function Uf(s){Zp(s,0)}function Ji(s){var o=Ge(s);if(Xr(o))return s}function Ed(s,o){if(s==="change")return o}var zc=!1;if(wn){var Cs;if(wn){var Uc="oninput"in document;if(!Uc){var Uo=document.createElement("div");Uo.setAttribute("oninput","return;"),Uc=typeof Uo.oninput=="function"}Cs=Uc}else Cs=!1;zc=Cs&&(!document.documentMode||9<document.documentMode)}function el(){Qi&&(Qi.detachEvent("onpropertychange",dr),ts=Qi=null)}function dr(s){if(s.propertyName==="value"&&Ji(ts)){var o=[];ps(o,ts,s,Gi(s)),vn(Uf,o)}}function Ho(s,o,x){s==="focusin"?(el(),Qi=o,ts=x,Qi.attachEvent("onpropertychange",dr)):s==="focusout"&&el()}function J(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ji(ts)}function i(s,o){if(s==="click")return Ji(o)}function c(s,o){if(s==="input"||s==="change")return Ji(o)}function u(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var m=typeof Object.is=="function"?Object.is:u;function p(s,o){if(m(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var x=Object.keys(s),y=Object.keys(o);if(x.length!==y.length)return!1;for(y=0;y<x.length;y++){var j=x[y];if(!we.call(o,j)||!m(s[j],o[j]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function N(s,o){var x=v(s);s=0;for(var y;x;){if(x.nodeType===3){if(y=s+x.textContent.length,s<=o&&y>=o)return{node:x,offset:o-s};s=y}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=v(x)}}function _(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?_(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function O(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Fs(s.document);o instanceof s.HTMLIFrameElement;){try{var x=typeof o.contentWindow.location.href=="string"}catch{x=!1}if(x)s=o.contentWindow;else break;o=Fs(s.document)}return o}function V(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var ee=wn&&"documentMode"in document&&11>=document.documentMode,ue=null,je=null,De=null,Me=!1;function Ue(s,o,x){var y=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Me||ue==null||ue!==Fs(y)||(y=ue,"selectionStart"in y&&V(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),De&&p(De,y)||(De=y,y=uu(je,"onSelect"),0<y.length&&(o=new Xn("onSelect","select",null,o,x),s.push({event:o,listeners:y}),o.target=ue)))}function Ke(s,o){var x={};return x[s.toLowerCase()]=o.toLowerCase(),x["Webkit"+s]="webkit"+o,x["Moz"+s]="moz"+o,x}var ht={animationend:Ke("Animation","AnimationEnd"),animationiteration:Ke("Animation","AnimationIteration"),animationstart:Ke("Animation","AnimationStart"),transitionrun:Ke("Transition","TransitionRun"),transitionstart:Ke("Transition","TransitionStart"),transitioncancel:Ke("Transition","TransitionCancel"),transitionend:Ke("Transition","TransitionEnd")},gt={},ft={};wn&&(ft=document.createElement("div").style,"AnimationEvent"in window||(delete ht.animationend.animation,delete ht.animationiteration.animation,delete ht.animationstart.animation),"TransitionEvent"in window||delete ht.transitionend.transition);function Kt(s){if(gt[s])return gt[s];if(!ht[s])return s;var o=ht[s],x;for(x in o)if(o.hasOwnProperty(x)&&x in ft)return gt[s]=o[x];return s}var $t=Kt("animationend"),Va=Kt("animationiteration"),Ss=Kt("animationstart"),rs=Kt("transitionrun"),Sr=Kt("transitionstart"),Ta=Kt("transitioncancel"),as=Kt("transitionend"),pi=new Map,Wn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wn.push("scrollEnd");function Ls(s,o){pi.set(s,o),ct(o,[s])}var Cd=new WeakMap;function an(s,o){if(typeof s=="object"&&s!==null){var x=Cd.get(s);return x!==void 0?x:(o={value:s,source:o,stack:Ro(o)},Cd.set(s,o),o)}return{value:s,source:o,stack:Ro(o)}}var sn=[],Vo=0,Hf=0;function Sd(){for(var s=Vo,o=Hf=Vo=0;o<s;){var x=sn[o];sn[o++]=null;var y=sn[o];sn[o++]=null;var j=sn[o];sn[o++]=null;var R=sn[o];if(sn[o++]=null,y!==null&&j!==null){var Q=y.pending;Q===null?j.next=j:(j.next=Q.next,Q.next=j),y.pending=j}R!==0&&Og(x,j,R)}}function Ad(s,o,x,y){sn[Vo++]=s,sn[Vo++]=o,sn[Vo++]=x,sn[Vo++]=y,Hf|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Vf(s,o,x,y){return Ad(s,o,x,y),_d(s)}function Go(s,o){return Ad(s,null,null,o),_d(s)}function Og(s,o,x){s.lanes|=x;var y=s.alternate;y!==null&&(y.lanes|=x);for(var j=!1,R=s.return;R!==null;)R.childLanes|=x,y=R.alternate,y!==null&&(y.childLanes|=x),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(j=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,j&&o!==null&&(j=31-Yt(x),s=R.hiddenUpdates,y=s[j],y===null?s[j]=[o]:y.push(o),o.lane=x|536870912),R):null}function _d(s){if(50<f0)throw f0=0,Wx=null,Error(n(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Yo={};function uN(s,o,x,y){this.tag=s,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(s,o,x,y){return new uN(s,o,x,y)}function Gf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function yi(s,o){var x=s.alternate;return x===null?(x=Bs(s.tag,o,s.key,s.mode),x.elementType=s.elementType,x.type=s.type,x.stateNode=s.stateNode,x.alternate=s,s.alternate=x):(x.pendingProps=o,x.type=s.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=s.flags&65011712,x.childLanes=s.childLanes,x.lanes=s.lanes,x.child=s.child,x.memoizedProps=s.memoizedProps,x.memoizedState=s.memoizedState,x.updateQueue=s.updateQueue,o=s.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},x.sibling=s.sibling,x.index=s.index,x.ref=s.ref,x.refCleanup=s.refCleanup,x}function Fg(s,o){s.flags&=65011714;var x=s.alternate;return x===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=x.childLanes,s.lanes=x.lanes,s.child=x.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=x.memoizedProps,s.memoizedState=x.memoizedState,s.updateQueue=x.updateQueue,s.type=x.type,o=x.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Td(s,o,x,y,j,R){var Q=0;if(y=s,typeof s=="function")Gf(s)&&(Q=1);else if(typeof s=="string")Q=xk(s,x,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=Bs(31,x,o,j),s.elementType=z,s.lanes=R,s;case D:return ql(x.children,j,R,o);case A:Q=8,j|=24;break;case M:return s=Bs(12,x,o,j|2),s.elementType=M,s.lanes=R,s;case H:return s=Bs(13,x,o,j),s.elementType=H,s.lanes=R,s;case U:return s=Bs(19,x,o,j),s.elementType=U,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case T:Q=10;break e;case F:Q=9;break e;case L:Q=11;break e;case B:Q=14;break e;case P:Q=16,y=null;break e}Q=29,x=Error(n(130,s===null?"null":typeof s,"")),y=null}return o=Bs(Q,x,o,j),o.elementType=s,o.type=y,o.lanes=R,o}function ql(s,o,x,y){return s=Bs(7,s,y,o),s.lanes=x,s}function Yf(s,o,x){return s=Bs(6,s,null,o),s.lanes=x,s}function Xf(s,o,x){return o=Bs(4,s.children!==null?s.children:[],s.key,o),o.lanes=x,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Xo=[],qo=0,Dd=null,Rd=0,nn=[],ln=0,$l=null,bi=1,vi="";function Wl(s,o){Xo[qo++]=Rd,Xo[qo++]=Dd,Dd=s,Rd=o}function Lg(s,o,x){nn[ln++]=bi,nn[ln++]=vi,nn[ln++]=$l,$l=s;var y=bi;s=vi;var j=32-Yt(y)-1;y&=~(1<<j),x+=1;var R=32-Yt(o)+j;if(30<R){var Q=j-j%5;R=(y&(1<<Q)-1).toString(32),y>>=Q,j-=Q,bi=1<<32-Yt(o)+j|x<<j|y,vi=R+s}else bi=1<<R|x<<j|y,vi=s}function qf(s){s.return!==null&&(Wl(s,1),Lg(s,1,0))}function $f(s){for(;s===Dd;)Dd=Xo[--qo],Xo[qo]=null,Rd=Xo[--qo],Xo[qo]=null;for(;s===$l;)$l=nn[--ln],nn[ln]=null,vi=nn[--ln],nn[ln]=null,bi=nn[--ln],nn[ln]=null}var ys=null,ra=null,Nr=!1,Kl=null,Kn=!1,Wf=Error(n(519));function Zl(s){var o=Error(n(418,""));throw Gc(an(o,s)),Wf}function Bg(s){var o=s.stateNode,x=s.type,y=s.memoizedProps;switch(o[pa]=s,o[zr]=y,x){case"dialog":cr("cancel",o),cr("close",o);break;case"iframe":case"object":case"embed":cr("load",o);break;case"video":case"audio":for(x=0;x<h0.length;x++)cr(h0[x],o);break;case"source":cr("error",o);break;case"img":case"image":case"link":cr("error",o),cr("load",o);break;case"details":cr("toggle",o);break;case"input":cr("invalid",o),Sa(o,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),Mo(o);break;case"select":cr("invalid",o);break;case"textarea":cr("invalid",o),da(o,y.value,y.defaultValue,y.children),Mo(o)}x=y.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||o.textContent===""+x||y.suppressHydrationWarning===!0||ty(o.textContent,x)?(y.popover!=null&&(cr("beforetoggle",o),cr("toggle",o)),y.onScroll!=null&&cr("scroll",o),y.onScrollEnd!=null&&cr("scrollend",o),y.onClick!=null&&(o.onclick=fu),o=!0):o=!1,o||Zl(s)}function Pg(s){for(ys=s.return;ys;)switch(ys.tag){case 5:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:ys=ys.return}}function Hc(s){if(s!==ys)return!1;if(!Nr)return Pg(s),Nr=!0,!1;var o=s.tag,x;if((x=o!==3&&o!==27)&&((x=o===5)&&(x=s.type,x=!(x!=="form"&&x!=="button")||uh(s.type,s.memoizedProps)),x=!x),x&&ra&&Zl(s),Pg(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(x=s.data,x==="/$"){if(o===0){ra=jn(s.nextSibling);break e}o--}else x!=="$"&&x!=="$!"&&x!=="$?"||o++;s=s.nextSibling}ra=null}}else o===27?(o=ra,gl(s.type)?(s=mh,mh=null,ra=s):ra=o):ra=ys?jn(s.stateNode.nextSibling):null;return!0}function Vc(){ra=ys=null,Nr=!1}function zg(){var s=Kl;return s!==null&&(Ts===null?Ts=s:Ts.push.apply(Ts,s),Kl=null),s}function Gc(s){Kl===null?Kl=[s]:Kl.push(s)}var Kf=X(null),Ql=null,wi=null;function tl(s,o,x){K(Kf,o._currentValue),o._currentValue=x}function Ni(s){s._currentValue=Kf.current,W(Kf)}function Zf(s,o,x){for(;s!==null;){var y=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),s===x)break;s=s.return}}function Qf(s,o,x,y){var j=s.child;for(j!==null&&(j.return=s);j!==null;){var R=j.dependencies;if(R!==null){var Q=j.child;R=R.firstContext;e:for(;R!==null;){var xe=R;R=j;for(var _e=0;_e<o.length;_e++)if(xe.context===o[_e]){R.lanes|=x,xe=R.alternate,xe!==null&&(xe.lanes|=x),Zf(R.return,x,s),y||(Q=null);break e}R=xe.next}}else if(j.tag===18){if(Q=j.return,Q===null)throw Error(n(341));Q.lanes|=x,R=Q.alternate,R!==null&&(R.lanes|=x),Zf(Q,x,s),Q=null}else Q=j.child;if(Q!==null)Q.return=j;else for(Q=j;Q!==null;){if(Q===s){Q=null;break}if(j=Q.sibling,j!==null){j.return=Q.return,Q=j;break}Q=Q.return}j=Q}}function Yc(s,o,x,y){s=null;for(var j=o,R=!1;j!==null;){if(!R){if((j.flags&524288)!==0)R=!0;else if((j.flags&262144)!==0)break}if(j.tag===10){var Q=j.alternate;if(Q===null)throw Error(n(387));if(Q=Q.memoizedProps,Q!==null){var xe=j.type;m(j.pendingProps.value,Q.value)||(s!==null?s.push(xe):s=[xe])}}else if(j===Re.current){if(Q=j.alternate,Q===null)throw Error(n(387));Q.memoizedState.memoizedState!==j.memoizedState.memoizedState&&(s!==null?s.push(v0):s=[v0])}j=j.return}s!==null&&Qf(o,s,x,y),o.flags|=262144}function Md(s){for(s=s.firstContext;s!==null;){if(!m(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Jl(s){Ql=s,wi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ss(s){return Ug(Ql,s)}function Id(s,o){return Ql===null&&Jl(s),Ug(s,o)}function Ug(s,o){var x=o._currentValue;if(o={context:o,memoizedValue:x,next:null},wi===null){if(s===null)throw Error(n(308));wi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else wi=wi.next=o;return x}var fN=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(x,y){s.push(y)}};this.abort=function(){o.aborted=!0,s.forEach(function(x){return x()})}},xN=t.unstable_scheduleCallback,hN=t.unstable_NormalPriority,Da={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new fN,data:new Map,refCount:0}}function Xc(s){s.refCount--,s.refCount===0&&xN(hN,function(){s.controller.abort()})}var qc=null,ex=0,$o=0,Wo=null;function mN(s,o){if(qc===null){var x=qc=[];ex=0,$o=rh(),Wo={status:"pending",value:void 0,then:function(y){x.push(y)}}}return ex++,o.then(Hg,Hg),o}function Hg(){if(--ex===0&&qc!==null){Wo!==null&&(Wo.status="fulfilled");var s=qc;qc=null,$o=0,Wo=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function gN(s,o){var x=[],y={status:"pending",value:null,reason:null,then:function(j){x.push(j)}};return s.then(function(){y.status="fulfilled",y.value=o;for(var j=0;j<x.length;j++)(0,x[j])(o)},function(j){for(y.status="rejected",y.reason=j,j=0;j<x.length;j++)(0,x[j])(void 0)}),y}var Vg=q.S;q.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&mN(s,o),Vg!==null&&Vg(s,o)};var eo=X(null);function tx(){var s=eo.current;return s!==null?s:Ur.pooledCache}function Od(s,o){o===null?K(eo,eo.current):K(eo,o.pool)}function Gg(){var s=tx();return s===null?null:{parent:Da._currentValue,pool:s}}var $c=Error(n(460)),Yg=Error(n(474)),Fd=Error(n(542)),rx={then:function(){}};function Xg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Ld(){}function qg(s,o,x){switch(x=s[x],x===void 0?s.push(o):x!==o&&(o.then(Ld,Ld),o=x),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Wg(s),s;default:if(typeof o.status=="string")o.then(Ld,Ld);else{if(s=Ur,s!==null&&100<s.shellSuspendCounter)throw Error(n(482));s=o,s.status="pending",s.then(function(y){if(o.status==="pending"){var j=o;j.status="fulfilled",j.value=y}},function(y){if(o.status==="pending"){var j=o;j.status="rejected",j.reason=y}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Wg(s),s}throw Wc=o,$c}}var Wc=null;function $g(){if(Wc===null)throw Error(n(459));var s=Wc;return Wc=null,s}function Wg(s){if(s===$c||s===Fd)throw Error(n(483))}var rl=!1;function ax(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sx(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function al(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function sl(s,o,x){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Ar&2)!==0){var j=y.pending;return j===null?o.next=o:(o.next=j.next,j.next=o),y.pending=o,o=_d(s),Og(s,null,x),o}return Ad(s,y,o,x),_d(s)}function Kc(s,o,x){if(o=o.updateQueue,o!==null&&(o=o.shared,(x&4194048)!==0)){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,Za(s,x)}}function nx(s,o){var x=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,x===y)){var j=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var Q={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};R===null?j=R=Q:R=R.next=Q,x=x.next}while(x!==null);R===null?j=R=o:R=R.next=o}else j=R=o;x={baseState:y.baseState,firstBaseUpdate:j,lastBaseUpdate:R,shared:y.shared,callbacks:y.callbacks},s.updateQueue=x;return}s=x.lastBaseUpdate,s===null?x.firstBaseUpdate=o:s.next=o,x.lastBaseUpdate=o}var ix=!1;function Zc(){if(ix){var s=Wo;if(s!==null)throw s}}function Qc(s,o,x,y){ix=!1;var j=s.updateQueue;rl=!1;var R=j.firstBaseUpdate,Q=j.lastBaseUpdate,xe=j.shared.pending;if(xe!==null){j.shared.pending=null;var _e=xe,Ye=_e.next;_e.next=null,Q===null?R=Ye:Q.next=Ye,Q=_e;var it=s.alternate;it!==null&&(it=it.updateQueue,xe=it.lastBaseUpdate,xe!==Q&&(xe===null?it.firstBaseUpdate=Ye:xe.next=Ye,it.lastBaseUpdate=_e))}if(R!==null){var dt=j.baseState;Q=0,it=Ye=_e=null,xe=R;do{var qe=xe.lane&-536870913,Ze=qe!==xe.lane;if(Ze?(mr&qe)===qe:(y&qe)===qe){qe!==0&&qe===$o&&(ix=!0),it!==null&&(it=it.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var Ht=s,Lt=xe;qe=o;var Ir=x;switch(Lt.tag){case 1:if(Ht=Lt.payload,typeof Ht=="function"){dt=Ht.call(Ir,dt,qe);break e}dt=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Lt.payload,qe=typeof Ht=="function"?Ht.call(Ir,dt,qe):Ht,qe==null)break e;dt=w({},dt,qe);break e;case 2:rl=!0}}qe=xe.callback,qe!==null&&(s.flags|=64,Ze&&(s.flags|=8192),Ze=j.callbacks,Ze===null?j.callbacks=[qe]:Ze.push(qe))}else Ze={lane:qe,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},it===null?(Ye=it=Ze,_e=dt):it=it.next=Ze,Q|=qe;if(xe=xe.next,xe===null){if(xe=j.shared.pending,xe===null)break;Ze=xe,xe=Ze.next,Ze.next=null,j.lastBaseUpdate=Ze,j.shared.pending=null}}while(!0);it===null&&(_e=dt),j.baseState=_e,j.firstBaseUpdate=Ye,j.lastBaseUpdate=it,R===null&&(j.shared.lanes=0),fl|=Q,s.lanes=Q,s.memoizedState=dt}}function Kg(s,o){if(typeof s!="function")throw Error(n(191,s));s.call(o)}function Zg(s,o){var x=s.callbacks;if(x!==null)for(s.callbacks=null,s=0;s<x.length;s++)Kg(x[s],o)}var Ko=X(null),Bd=X(0);function Qg(s,o){s=_i,K(Bd,s),K(Ko,o),_i=s|o.baseLanes}function lx(){K(Bd,_i),K(Ko,Ko.current)}function ox(){_i=Bd.current,W(Ko),W(Bd)}var nl=0,ir=null,Rr=null,va=null,Pd=!1,Zo=!1,to=!1,zd=0,Jc=0,Qo=null,pN=0;function xa(){throw Error(n(321))}function cx(s,o){if(o===null)return!1;for(var x=0;x<o.length&&x<s.length;x++)if(!m(s[x],o[x]))return!1;return!0}function dx(s,o,x,y,j,R){return nl=R,ir=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=s===null||s.memoizedState===null?O1:F1,to=!1,R=x(y,j),to=!1,Zo&&(R=e1(o,x,y,j)),Jg(s),R}function Jg(s){q.H=Xd;var o=Rr!==null&&Rr.next!==null;if(nl=0,va=Rr=ir=null,Pd=!1,Jc=0,Qo=null,o)throw Error(n(300));s===null||Ba||(s=s.dependencies,s!==null&&Md(s)&&(Ba=!0))}function e1(s,o,x,y){ir=s;var j=0;do{if(Zo&&(Qo=null),Jc=0,Zo=!1,25<=j)throw Error(n(301));if(j+=1,va=Rr=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=jN,R=o(x,y)}while(Zo);return R}function yN(){var s=q.H,o=s.useState()[0];return o=typeof o.then=="function"?e0(o):o,s=s.useState()[0],(Rr!==null?Rr.memoizedState:null)!==s&&(ir.flags|=1024),o}function ux(){var s=zd!==0;return zd=0,s}function fx(s,o,x){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x}function xx(s){if(Pd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Pd=!1}nl=0,va=Rr=ir=null,Zo=!1,Jc=zd=0,Qo=null}function As(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return va===null?ir.memoizedState=va=s:va=va.next=s,va}function wa(){if(Rr===null){var s=ir.alternate;s=s!==null?s.memoizedState:null}else s=Rr.next;var o=va===null?ir.memoizedState:va.next;if(o!==null)va=o,Rr=s;else{if(s===null)throw ir.alternate===null?Error(n(467)):Error(n(310));Rr=s,s={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},va===null?ir.memoizedState=va=s:va=va.next=s}return va}function hx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function e0(s){var o=Jc;return Jc+=1,Qo===null&&(Qo=[]),s=qg(Qo,s,o),o=ir,(va===null?o.memoizedState:va.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?O1:F1),s}function Ud(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return e0(s);if(s.$$typeof===T)return ss(s)}throw Error(n(438,String(s)))}function mx(s){var o=null,x=ir.updateQueue;if(x!==null&&(o=x.memoCache),o==null){var y=ir.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(o={data:y.data.map(function(j){return j.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),x===null&&(x=hx(),ir.updateQueue=x),x.memoCache=o,x=o.data[o.index],x===void 0)for(x=o.data[o.index]=Array(s),y=0;y<s;y++)x[y]=Z;return o.index++,x}function ki(s,o){return typeof o=="function"?o(s):o}function Hd(s){var o=wa();return gx(o,Rr,s)}function gx(s,o,x){var y=s.queue;if(y===null)throw Error(n(311));y.lastRenderedReducer=x;var j=s.baseQueue,R=y.pending;if(R!==null){if(j!==null){var Q=j.next;j.next=R.next,R.next=Q}o.baseQueue=j=R,y.pending=null}if(R=s.baseState,j===null)s.memoizedState=R;else{o=j.next;var xe=Q=null,_e=null,Ye=o,it=!1;do{var dt=Ye.lane&-536870913;if(dt!==Ye.lane?(mr&dt)===dt:(nl&dt)===dt){var qe=Ye.revertLane;if(qe===0)_e!==null&&(_e=_e.next={lane:0,revertLane:0,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null}),dt===$o&&(it=!0);else if((nl&qe)===qe){Ye=Ye.next,qe===$o&&(it=!0);continue}else dt={lane:0,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},_e===null?(xe=_e=dt,Q=R):_e=_e.next=dt,ir.lanes|=qe,fl|=qe;dt=Ye.action,to&&x(R,dt),R=Ye.hasEagerState?Ye.eagerState:x(R,dt)}else qe={lane:dt,revertLane:Ye.revertLane,action:Ye.action,hasEagerState:Ye.hasEagerState,eagerState:Ye.eagerState,next:null},_e===null?(xe=_e=qe,Q=R):_e=_e.next=qe,ir.lanes|=dt,fl|=dt;Ye=Ye.next}while(Ye!==null&&Ye!==o);if(_e===null?Q=R:_e.next=xe,!m(R,s.memoizedState)&&(Ba=!0,it&&(x=Wo,x!==null)))throw x;s.memoizedState=R,s.baseState=Q,s.baseQueue=_e,y.lastRenderedState=R}return j===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function px(s){var o=wa(),x=o.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=s;var y=x.dispatch,j=x.pending,R=o.memoizedState;if(j!==null){x.pending=null;var Q=j=j.next;do R=s(R,Q.action),Q=Q.next;while(Q!==j);m(R,o.memoizedState)||(Ba=!0),o.memoizedState=R,o.baseQueue===null&&(o.baseState=R),x.lastRenderedState=R}return[R,y]}function t1(s,o,x){var y=ir,j=wa(),R=Nr;if(R){if(x===void 0)throw Error(n(407));x=x()}else x=o();var Q=!m((Rr||j).memoizedState,x);Q&&(j.memoizedState=x,Ba=!0),j=j.queue;var xe=s1.bind(null,y,j,s);if(t0(2048,8,xe,[s]),j.getSnapshot!==o||Q||va!==null&&va.memoizedState.tag&1){if(y.flags|=2048,Jo(9,Vd(),a1.bind(null,y,j,x,o),null),Ur===null)throw Error(n(349));R||(nl&124)!==0||r1(y,o,x)}return x}function r1(s,o,x){s.flags|=16384,s={getSnapshot:o,value:x},o=ir.updateQueue,o===null?(o=hx(),ir.updateQueue=o,o.stores=[s]):(x=o.stores,x===null?o.stores=[s]:x.push(s))}function a1(s,o,x,y){o.value=x,o.getSnapshot=y,n1(o)&&i1(s)}function s1(s,o,x){return x(function(){n1(o)&&i1(s)})}function n1(s){var o=s.getSnapshot;s=s.value;try{var x=o();return!m(s,x)}catch{return!0}}function i1(s){var o=Go(s,2);o!==null&&Vs(o,s,2)}function yx(s){var o=As();if(typeof s=="function"){var x=s;if(s=x(),to){Ut(!0);try{x()}finally{Ut(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:s},o}function l1(s,o,x,y){return s.baseState=x,gx(s,Rr,typeof y=="function"?y:ki)}function bN(s,o,x,y,j){if(Yd(s))throw Error(n(485));if(s=o.action,s!==null){var R={payload:j,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Q){R.listeners.push(Q)}};q.T!==null?x(!0):R.isTransition=!1,y(R),x=o.pending,x===null?(R.next=o.pending=R,o1(o,R)):(R.next=x.next,o.pending=x.next=R)}}function o1(s,o){var x=o.action,y=o.payload,j=s.state;if(o.isTransition){var R=q.T,Q={};q.T=Q;try{var xe=x(j,y),_e=q.S;_e!==null&&_e(Q,xe),c1(s,o,xe)}catch(Ye){bx(s,o,Ye)}finally{q.T=R}}else try{R=x(j,y),c1(s,o,R)}catch(Ye){bx(s,o,Ye)}}function c1(s,o,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(y){d1(s,o,y)},function(y){return bx(s,o,y)}):d1(s,o,x)}function d1(s,o,x){o.status="fulfilled",o.value=x,u1(o),s.state=x,o=s.pending,o!==null&&(x=o.next,x===o?s.pending=null:(x=x.next,o.next=x,o1(s,x)))}function bx(s,o,x){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do o.status="rejected",o.reason=x,u1(o),o=o.next;while(o!==y)}s.action=null}function u1(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function f1(s,o){return o}function x1(s,o){if(Nr){var x=Ur.formState;if(x!==null){e:{var y=ir;if(Nr){if(ra){t:{for(var j=ra,R=Kn;j.nodeType!==8;){if(!R){j=null;break t}if(j=jn(j.nextSibling),j===null){j=null;break t}}R=j.data,j=R==="F!"||R==="F"?j:null}if(j){ra=jn(j.nextSibling),y=j.data==="F!";break e}}Zl(y)}y=!1}y&&(o=x[0])}}return x=As(),x.memoizedState=x.baseState=o,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:f1,lastRenderedState:o},x.queue=y,x=R1.bind(null,ir,y),y.dispatch=x,y=yx(!1),R=jx.bind(null,ir,!1,y.queue),y=As(),j={state:o,dispatch:null,action:s,pending:null},y.queue=j,x=bN.bind(null,ir,j,R,x),j.dispatch=x,y.memoizedState=s,[o,x,!1]}function h1(s){var o=wa();return m1(o,Rr,s)}function m1(s,o,x){if(o=gx(s,o,f1)[0],s=Hd(ki)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var y=e0(o)}catch(Q){throw Q===$c?Fd:Q}else y=o;o=wa();var j=o.queue,R=j.dispatch;return x!==o.memoizedState&&(ir.flags|=2048,Jo(9,Vd(),vN.bind(null,j,x),null)),[y,R,s]}function vN(s,o){s.action=o}function g1(s){var o=wa(),x=Rr;if(x!==null)return m1(o,x,s);wa(),o=o.memoizedState,x=wa();var y=x.queue.dispatch;return x.memoizedState=s,[o,y,!1]}function Jo(s,o,x,y){return s={tag:s,create:x,deps:y,inst:o,next:null},o=ir.updateQueue,o===null&&(o=hx(),ir.updateQueue=o),x=o.lastEffect,x===null?o.lastEffect=s.next=s:(y=x.next,x.next=s,s.next=y,o.lastEffect=s),s}function Vd(){return{destroy:void 0,resource:void 0}}function p1(){return wa().memoizedState}function Gd(s,o,x,y){var j=As();y=y===void 0?null:y,ir.flags|=s,j.memoizedState=Jo(1|o,Vd(),x,y)}function t0(s,o,x,y){var j=wa();y=y===void 0?null:y;var R=j.memoizedState.inst;Rr!==null&&y!==null&&cx(y,Rr.memoizedState.deps)?j.memoizedState=Jo(o,R,x,y):(ir.flags|=s,j.memoizedState=Jo(1|o,R,x,y))}function y1(s,o){Gd(8390656,8,s,o)}function b1(s,o){t0(2048,8,s,o)}function v1(s,o){return t0(4,2,s,o)}function w1(s,o){return t0(4,4,s,o)}function N1(s,o){if(typeof o=="function"){s=s();var x=o(s);return function(){typeof x=="function"?x():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function k1(s,o,x){x=x!=null?x.concat([s]):null,t0(4,4,N1.bind(null,o,s),x)}function vx(){}function j1(s,o){var x=wa();o=o===void 0?null:o;var y=x.memoizedState;return o!==null&&cx(o,y[1])?y[0]:(x.memoizedState=[s,o],s)}function E1(s,o){var x=wa();o=o===void 0?null:o;var y=x.memoizedState;if(o!==null&&cx(o,y[1]))return y[0];if(y=s(),to){Ut(!0);try{s()}finally{Ut(!1)}}return x.memoizedState=[y,o],y}function wx(s,o,x){return x===void 0||(nl&1073741824)!==0?s.memoizedState=o:(s.memoizedState=x,s=Ap(),ir.lanes|=s,fl|=s,x)}function C1(s,o,x,y){return m(x,o)?x:Ko.current!==null?(s=wx(s,x,y),m(s,o)||(Ba=!0),s):(nl&42)===0?(Ba=!0,s.memoizedState=x):(s=Ap(),ir.lanes|=s,fl|=s,o)}function S1(s,o,x,y,j){var R=ce.p;ce.p=R!==0&&8>R?R:8;var Q=q.T,xe={};q.T=xe,jx(s,!1,o,x);try{var _e=j(),Ye=q.S;if(Ye!==null&&Ye(xe,_e),_e!==null&&typeof _e=="object"&&typeof _e.then=="function"){var it=gN(_e,y);r0(s,o,it,Hs(s))}else r0(s,o,y,Hs(s))}catch(dt){r0(s,o,{then:function(){},status:"rejected",reason:dt},Hs())}finally{ce.p=R,q.T=Q}}function wN(){}function Nx(s,o,x,y){if(s.tag!==5)throw Error(n(476));var j=A1(s).queue;S1(s,j,o,pe,x===null?wN:function(){return _1(s),x(y)})}function A1(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:pe,baseState:pe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:pe},next:null};var x={};return o.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ki,lastRenderedState:x},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function _1(s){var o=A1(s).next.queue;r0(s,o,{},Hs())}function kx(){return ss(v0)}function T1(){return wa().memoizedState}function D1(){return wa().memoizedState}function NN(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var x=Hs();s=al(x);var y=sl(o,s,x);y!==null&&(Vs(y,o,x),Kc(y,o,x)),o={cache:Jf()},s.payload=o;return}o=o.return}}function kN(s,o,x){var y=Hs();x={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Yd(s)?M1(o,x):(x=Vf(s,o,x,y),x!==null&&(Vs(x,s,y),I1(x,o,y)))}function R1(s,o,x){var y=Hs();r0(s,o,x,y)}function r0(s,o,x,y){var j={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Yd(s))M1(o,j);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=o.lastRenderedReducer,R!==null))try{var Q=o.lastRenderedState,xe=R(Q,x);if(j.hasEagerState=!0,j.eagerState=xe,m(xe,Q))return Ad(s,o,j,0),Ur===null&&Sd(),!1}catch{}finally{}if(x=Vf(s,o,j,y),x!==null)return Vs(x,s,y),I1(x,o,y),!0}return!1}function jx(s,o,x,y){if(y={lane:2,revertLane:rh(),action:y,hasEagerState:!1,eagerState:null,next:null},Yd(s)){if(o)throw Error(n(479))}else o=Vf(s,x,y,2),o!==null&&Vs(o,s,2)}function Yd(s){var o=s.alternate;return s===ir||o!==null&&o===ir}function M1(s,o){Zo=Pd=!0;var x=s.pending;x===null?o.next=o:(o.next=x.next,x.next=o),s.pending=o}function I1(s,o,x){if((x&4194048)!==0){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,Za(s,x)}}var Xd={readContext:ss,use:Ud,useCallback:xa,useContext:xa,useEffect:xa,useImperativeHandle:xa,useLayoutEffect:xa,useInsertionEffect:xa,useMemo:xa,useReducer:xa,useRef:xa,useState:xa,useDebugValue:xa,useDeferredValue:xa,useTransition:xa,useSyncExternalStore:xa,useId:xa,useHostTransitionStatus:xa,useFormState:xa,useActionState:xa,useOptimistic:xa,useMemoCache:xa,useCacheRefresh:xa},O1={readContext:ss,use:Ud,useCallback:function(s,o){return As().memoizedState=[s,o===void 0?null:o],s},useContext:ss,useEffect:y1,useImperativeHandle:function(s,o,x){x=x!=null?x.concat([s]):null,Gd(4194308,4,N1.bind(null,o,s),x)},useLayoutEffect:function(s,o){return Gd(4194308,4,s,o)},useInsertionEffect:function(s,o){Gd(4,2,s,o)},useMemo:function(s,o){var x=As();o=o===void 0?null:o;var y=s();if(to){Ut(!0);try{s()}finally{Ut(!1)}}return x.memoizedState=[y,o],y},useReducer:function(s,o,x){var y=As();if(x!==void 0){var j=x(o);if(to){Ut(!0);try{x(o)}finally{Ut(!1)}}}else j=o;return y.memoizedState=y.baseState=j,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:j},y.queue=s,s=s.dispatch=kN.bind(null,ir,s),[y.memoizedState,s]},useRef:function(s){var o=As();return s={current:s},o.memoizedState=s},useState:function(s){s=yx(s);var o=s.queue,x=R1.bind(null,ir,o);return o.dispatch=x,[s.memoizedState,x]},useDebugValue:vx,useDeferredValue:function(s,o){var x=As();return wx(x,s,o)},useTransition:function(){var s=yx(!1);return s=S1.bind(null,ir,s.queue,!0,!1),As().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,x){var y=ir,j=As();if(Nr){if(x===void 0)throw Error(n(407));x=x()}else{if(x=o(),Ur===null)throw Error(n(349));(mr&124)!==0||r1(y,o,x)}j.memoizedState=x;var R={value:x,getSnapshot:o};return j.queue=R,y1(s1.bind(null,y,R,s),[s]),y.flags|=2048,Jo(9,Vd(),a1.bind(null,y,R,x,o),null),x},useId:function(){var s=As(),o=Ur.identifierPrefix;if(Nr){var x=vi,y=bi;x=(y&~(1<<32-Yt(y)-1)).toString(32)+x,o=""+o+"R"+x,x=zd++,0<x&&(o+="H"+x.toString(32)),o+=""}else x=pN++,o=""+o+"r"+x.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:kx,useFormState:x1,useActionState:x1,useOptimistic:function(s){var o=As();o.memoizedState=o.baseState=s;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=x,o=jx.bind(null,ir,!0,x),x.dispatch=o,[s,o]},useMemoCache:mx,useCacheRefresh:function(){return As().memoizedState=NN.bind(null,ir)}},F1={readContext:ss,use:Ud,useCallback:j1,useContext:ss,useEffect:b1,useImperativeHandle:k1,useInsertionEffect:v1,useLayoutEffect:w1,useMemo:E1,useReducer:Hd,useRef:p1,useState:function(){return Hd(ki)},useDebugValue:vx,useDeferredValue:function(s,o){var x=wa();return C1(x,Rr.memoizedState,s,o)},useTransition:function(){var s=Hd(ki)[0],o=wa().memoizedState;return[typeof s=="boolean"?s:e0(s),o]},useSyncExternalStore:t1,useId:T1,useHostTransitionStatus:kx,useFormState:h1,useActionState:h1,useOptimistic:function(s,o){var x=wa();return l1(x,Rr,s,o)},useMemoCache:mx,useCacheRefresh:D1},jN={readContext:ss,use:Ud,useCallback:j1,useContext:ss,useEffect:b1,useImperativeHandle:k1,useInsertionEffect:v1,useLayoutEffect:w1,useMemo:E1,useReducer:px,useRef:p1,useState:function(){return px(ki)},useDebugValue:vx,useDeferredValue:function(s,o){var x=wa();return Rr===null?wx(x,s,o):C1(x,Rr.memoizedState,s,o)},useTransition:function(){var s=px(ki)[0],o=wa().memoizedState;return[typeof s=="boolean"?s:e0(s),o]},useSyncExternalStore:t1,useId:T1,useHostTransitionStatus:kx,useFormState:g1,useActionState:g1,useOptimistic:function(s,o){var x=wa();return Rr!==null?l1(x,Rr,s,o):(x.baseState=s,[s,x.queue.dispatch])},useMemoCache:mx,useCacheRefresh:D1},ec=null,a0=0;function qd(s){var o=a0;return a0+=1,ec===null&&(ec=[]),qg(ec,s,o)}function s0(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function $d(s,o){throw o.$$typeof===k?Error(n(525)):(s=Object.prototype.toString.call(o),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function L1(s){var o=s._init;return o(s._payload)}function B1(s){function o(ze,Ie){if(s){var Ve=ze.deletions;Ve===null?(ze.deletions=[Ie],ze.flags|=16):Ve.push(Ie)}}function x(ze,Ie){if(!s)return null;for(;Ie!==null;)o(ze,Ie),Ie=Ie.sibling;return null}function y(ze){for(var Ie=new Map;ze!==null;)ze.key!==null?Ie.set(ze.key,ze):Ie.set(ze.index,ze),ze=ze.sibling;return Ie}function j(ze,Ie){return ze=yi(ze,Ie),ze.index=0,ze.sibling=null,ze}function R(ze,Ie,Ve){return ze.index=Ve,s?(Ve=ze.alternate,Ve!==null?(Ve=Ve.index,Ve<Ie?(ze.flags|=67108866,Ie):Ve):(ze.flags|=67108866,Ie)):(ze.flags|=1048576,Ie)}function Q(ze){return s&&ze.alternate===null&&(ze.flags|=67108866),ze}function xe(ze,Ie,Ve,ot){return Ie===null||Ie.tag!==6?(Ie=Yf(Ve,ze.mode,ot),Ie.return=ze,Ie):(Ie=j(Ie,Ve),Ie.return=ze,Ie)}function _e(ze,Ie,Ve,ot){var St=Ve.type;return St===D?it(ze,Ie,Ve.props.children,ot,Ve.key):Ie!==null&&(Ie.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===P&&L1(St)===Ie.type)?(Ie=j(Ie,Ve.props),s0(Ie,Ve),Ie.return=ze,Ie):(Ie=Td(Ve.type,Ve.key,Ve.props,null,ze.mode,ot),s0(Ie,Ve),Ie.return=ze,Ie)}function Ye(ze,Ie,Ve,ot){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ve.containerInfo||Ie.stateNode.implementation!==Ve.implementation?(Ie=Xf(Ve,ze.mode,ot),Ie.return=ze,Ie):(Ie=j(Ie,Ve.children||[]),Ie.return=ze,Ie)}function it(ze,Ie,Ve,ot,St){return Ie===null||Ie.tag!==7?(Ie=ql(Ve,ze.mode,ot,St),Ie.return=ze,Ie):(Ie=j(Ie,Ve),Ie.return=ze,Ie)}function dt(ze,Ie,Ve){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=Yf(""+Ie,ze.mode,Ve),Ie.return=ze,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case E:return Ve=Td(Ie.type,Ie.key,Ie.props,null,ze.mode,Ve),s0(Ve,Ie),Ve.return=ze,Ve;case S:return Ie=Xf(Ie,ze.mode,Ve),Ie.return=ze,Ie;case P:var ot=Ie._init;return Ie=ot(Ie._payload),dt(ze,Ie,Ve)}if(Y(Ie)||G(Ie))return Ie=ql(Ie,ze.mode,Ve,null),Ie.return=ze,Ie;if(typeof Ie.then=="function")return dt(ze,qd(Ie),Ve);if(Ie.$$typeof===T)return dt(ze,Id(ze,Ie),Ve);$d(ze,Ie)}return null}function qe(ze,Ie,Ve,ot){var St=Ie!==null?Ie.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return St!==null?null:xe(ze,Ie,""+Ve,ot);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case E:return Ve.key===St?_e(ze,Ie,Ve,ot):null;case S:return Ve.key===St?Ye(ze,Ie,Ve,ot):null;case P:return St=Ve._init,Ve=St(Ve._payload),qe(ze,Ie,Ve,ot)}if(Y(Ve)||G(Ve))return St!==null?null:it(ze,Ie,Ve,ot,null);if(typeof Ve.then=="function")return qe(ze,Ie,qd(Ve),ot);if(Ve.$$typeof===T)return qe(ze,Ie,Id(ze,Ve),ot);$d(ze,Ve)}return null}function Ze(ze,Ie,Ve,ot,St){if(typeof ot=="string"&&ot!==""||typeof ot=="number"||typeof ot=="bigint")return ze=ze.get(Ve)||null,xe(Ie,ze,""+ot,St);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case E:return ze=ze.get(ot.key===null?Ve:ot.key)||null,_e(Ie,ze,ot,St);case S:return ze=ze.get(ot.key===null?Ve:ot.key)||null,Ye(Ie,ze,ot,St);case P:var lr=ot._init;return ot=lr(ot._payload),Ze(ze,Ie,Ve,ot,St)}if(Y(ot)||G(ot))return ze=ze.get(Ve)||null,it(Ie,ze,ot,St,null);if(typeof ot.then=="function")return Ze(ze,Ie,Ve,qd(ot),St);if(ot.$$typeof===T)return Ze(ze,Ie,Ve,Id(Ie,ot),St);$d(Ie,ot)}return null}function Ht(ze,Ie,Ve,ot){for(var St=null,lr=null,Rt=Ie,Bt=Ie=0,za=null;Rt!==null&&Bt<Ve.length;Bt++){Rt.index>Bt?(za=Rt,Rt=null):za=Rt.sibling;var wr=qe(ze,Rt,Ve[Bt],ot);if(wr===null){Rt===null&&(Rt=za);break}s&&Rt&&wr.alternate===null&&o(ze,Rt),Ie=R(wr,Ie,Bt),lr===null?St=wr:lr.sibling=wr,lr=wr,Rt=za}if(Bt===Ve.length)return x(ze,Rt),Nr&&Wl(ze,Bt),St;if(Rt===null){for(;Bt<Ve.length;Bt++)Rt=dt(ze,Ve[Bt],ot),Rt!==null&&(Ie=R(Rt,Ie,Bt),lr===null?St=Rt:lr.sibling=Rt,lr=Rt);return Nr&&Wl(ze,Bt),St}for(Rt=y(Rt);Bt<Ve.length;Bt++)za=Ze(Rt,ze,Bt,Ve[Bt],ot),za!==null&&(s&&za.alternate!==null&&Rt.delete(za.key===null?Bt:za.key),Ie=R(za,Ie,Bt),lr===null?St=za:lr.sibling=za,lr=za);return s&&Rt.forEach(function(wl){return o(ze,wl)}),Nr&&Wl(ze,Bt),St}function Lt(ze,Ie,Ve,ot){if(Ve==null)throw Error(n(151));for(var St=null,lr=null,Rt=Ie,Bt=Ie=0,za=null,wr=Ve.next();Rt!==null&&!wr.done;Bt++,wr=Ve.next()){Rt.index>Bt?(za=Rt,Rt=null):za=Rt.sibling;var wl=qe(ze,Rt,wr.value,ot);if(wl===null){Rt===null&&(Rt=za);break}s&&Rt&&wl.alternate===null&&o(ze,Rt),Ie=R(wl,Ie,Bt),lr===null?St=wl:lr.sibling=wl,lr=wl,Rt=za}if(wr.done)return x(ze,Rt),Nr&&Wl(ze,Bt),St;if(Rt===null){for(;!wr.done;Bt++,wr=Ve.next())wr=dt(ze,wr.value,ot),wr!==null&&(Ie=R(wr,Ie,Bt),lr===null?St=wr:lr.sibling=wr,lr=wr);return Nr&&Wl(ze,Bt),St}for(Rt=y(Rt);!wr.done;Bt++,wr=Ve.next())wr=Ze(Rt,ze,Bt,wr.value,ot),wr!==null&&(s&&wr.alternate!==null&&Rt.delete(wr.key===null?Bt:wr.key),Ie=R(wr,Ie,Bt),lr===null?St=wr:lr.sibling=wr,lr=wr);return s&&Rt.forEach(function(Ek){return o(ze,Ek)}),Nr&&Wl(ze,Bt),St}function Ir(ze,Ie,Ve,ot){if(typeof Ve=="object"&&Ve!==null&&Ve.type===D&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case E:e:{for(var St=Ve.key;Ie!==null;){if(Ie.key===St){if(St=Ve.type,St===D){if(Ie.tag===7){x(ze,Ie.sibling),ot=j(Ie,Ve.props.children),ot.return=ze,ze=ot;break e}}else if(Ie.elementType===St||typeof St=="object"&&St!==null&&St.$$typeof===P&&L1(St)===Ie.type){x(ze,Ie.sibling),ot=j(Ie,Ve.props),s0(ot,Ve),ot.return=ze,ze=ot;break e}x(ze,Ie);break}else o(ze,Ie);Ie=Ie.sibling}Ve.type===D?(ot=ql(Ve.props.children,ze.mode,ot,Ve.key),ot.return=ze,ze=ot):(ot=Td(Ve.type,Ve.key,Ve.props,null,ze.mode,ot),s0(ot,Ve),ot.return=ze,ze=ot)}return Q(ze);case S:e:{for(St=Ve.key;Ie!==null;){if(Ie.key===St)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ve.containerInfo&&Ie.stateNode.implementation===Ve.implementation){x(ze,Ie.sibling),ot=j(Ie,Ve.children||[]),ot.return=ze,ze=ot;break e}else{x(ze,Ie);break}else o(ze,Ie);Ie=Ie.sibling}ot=Xf(Ve,ze.mode,ot),ot.return=ze,ze=ot}return Q(ze);case P:return St=Ve._init,Ve=St(Ve._payload),Ir(ze,Ie,Ve,ot)}if(Y(Ve))return Ht(ze,Ie,Ve,ot);if(G(Ve)){if(St=G(Ve),typeof St!="function")throw Error(n(150));return Ve=St.call(Ve),Lt(ze,Ie,Ve,ot)}if(typeof Ve.then=="function")return Ir(ze,Ie,qd(Ve),ot);if(Ve.$$typeof===T)return Ir(ze,Ie,Id(ze,Ve),ot);$d(ze,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,Ie!==null&&Ie.tag===6?(x(ze,Ie.sibling),ot=j(Ie,Ve),ot.return=ze,ze=ot):(x(ze,Ie),ot=Yf(Ve,ze.mode,ot),ot.return=ze,ze=ot),Q(ze)):x(ze,Ie)}return function(ze,Ie,Ve,ot){try{a0=0;var St=Ir(ze,Ie,Ve,ot);return ec=null,St}catch(Rt){if(Rt===$c||Rt===Fd)throw Rt;var lr=Bs(29,Rt,null,ze.mode);return lr.lanes=ot,lr.return=ze,lr}finally{}}}var tc=B1(!0),P1=B1(!1),on=X(null),Zn=null;function il(s){var o=s.alternate;K(Ra,Ra.current&1),K(on,s),Zn===null&&(o===null||Ko.current!==null||o.memoizedState!==null)&&(Zn=s)}function z1(s){if(s.tag===22){if(K(Ra,Ra.current),K(on,s),Zn===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Zn=s)}}else ll()}function ll(){K(Ra,Ra.current),K(on,on.current)}function ji(s){W(on),Zn===s&&(Zn=null),W(Ra)}var Ra=X(0);function Wd(s){for(var o=s;o!==null;){if(o.tag===13){var x=o.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||hh(x)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function Ex(s,o,x,y){o=s.memoizedState,x=x(y,o),x=x==null?o:w({},o,x),s.memoizedState=x,s.lanes===0&&(s.updateQueue.baseState=x)}var Cx={enqueueSetState:function(s,o,x){s=s._reactInternals;var y=Hs(),j=al(y);j.payload=o,x!=null&&(j.callback=x),o=sl(s,j,y),o!==null&&(Vs(o,s,y),Kc(o,s,y))},enqueueReplaceState:function(s,o,x){s=s._reactInternals;var y=Hs(),j=al(y);j.tag=1,j.payload=o,x!=null&&(j.callback=x),o=sl(s,j,y),o!==null&&(Vs(o,s,y),Kc(o,s,y))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var x=Hs(),y=al(x);y.tag=2,o!=null&&(y.callback=o),o=sl(s,y,x),o!==null&&(Vs(o,s,x),Kc(o,s,x))}};function U1(s,o,x,y,j,R,Q){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,R,Q):o.prototype&&o.prototype.isPureReactComponent?!p(x,y)||!p(j,R):!0}function H1(s,o,x,y){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(x,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(x,y),o.state!==s&&Cx.enqueueReplaceState(o,o.state,null)}function ro(s,o){var x=o;if("ref"in o){x={};for(var y in o)y!=="ref"&&(x[y]=o[y])}if(s=s.defaultProps){x===o&&(x=w({},x));for(var j in s)x[j]===void 0&&(x[j]=s[j])}return x}var Kd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function V1(s){Kd(s)}function G1(s){console.error(s)}function Y1(s){Kd(s)}function Zd(s,o){try{var x=s.onUncaughtError;x(o.value,{componentStack:o.stack})}catch(y){setTimeout(function(){throw y})}}function X1(s,o,x){try{var y=s.onCaughtError;y(x.value,{componentStack:x.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(j){setTimeout(function(){throw j})}}function Sx(s,o,x){return x=al(x),x.tag=3,x.payload={element:null},x.callback=function(){Zd(s,o)},x}function q1(s){return s=al(s),s.tag=3,s}function $1(s,o,x,y){var j=x.type.getDerivedStateFromError;if(typeof j=="function"){var R=y.value;s.payload=function(){return j(R)},s.callback=function(){X1(o,x,y)}}var Q=x.stateNode;Q!==null&&typeof Q.componentDidCatch=="function"&&(s.callback=function(){X1(o,x,y),typeof j!="function"&&(xl===null?xl=new Set([this]):xl.add(this));var xe=y.stack;this.componentDidCatch(y.value,{componentStack:xe!==null?xe:""})})}function EN(s,o,x,y,j){if(x.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(o=x.alternate,o!==null&&Yc(o,x,j,!0),x=on.current,x!==null){switch(x.tag){case 13:return Zn===null?Zx():x.alternate===null&&aa===0&&(aa=3),x.flags&=-257,x.flags|=65536,x.lanes=j,y===rx?x.flags|=16384:(o=x.updateQueue,o===null?x.updateQueue=new Set([y]):o.add(y),Jx(s,y,j)),!1;case 22:return x.flags|=65536,y===rx?x.flags|=16384:(o=x.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([y])},x.updateQueue=o):(x=o.retryQueue,x===null?o.retryQueue=new Set([y]):x.add(y)),Jx(s,y,j)),!1}throw Error(n(435,x.tag))}return Jx(s,y,j),Zx(),!1}if(Nr)return o=on.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=j,y!==Wf&&(s=Error(n(422),{cause:y}),Gc(an(s,x)))):(y!==Wf&&(o=Error(n(423),{cause:y}),Gc(an(o,x))),s=s.current.alternate,s.flags|=65536,j&=-j,s.lanes|=j,y=an(y,x),j=Sx(s.stateNode,y,j),nx(s,j),aa!==4&&(aa=2)),!1;var R=Error(n(520),{cause:y});if(R=an(R,x),u0===null?u0=[R]:u0.push(R),aa!==4&&(aa=2),o===null)return!0;y=an(y,x),x=o;do{switch(x.tag){case 3:return x.flags|=65536,s=j&-j,x.lanes|=s,s=Sx(x.stateNode,y,s),nx(x,s),!1;case 1:if(o=x.type,R=x.stateNode,(x.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(xl===null||!xl.has(R))))return x.flags|=65536,j&=-j,x.lanes|=j,j=q1(j),$1(j,s,x,y),nx(x,j),!1}x=x.return}while(x!==null);return!1}var W1=Error(n(461)),Ba=!1;function Ga(s,o,x,y){o.child=s===null?P1(o,null,x,y):tc(o,s.child,x,y)}function K1(s,o,x,y,j){x=x.render;var R=o.ref;if("ref"in y){var Q={};for(var xe in y)xe!=="ref"&&(Q[xe]=y[xe])}else Q=y;return Jl(o),y=dx(s,o,x,Q,R,j),xe=ux(),s!==null&&!Ba?(fx(s,o,j),Ei(s,o,j)):(Nr&&xe&&qf(o),o.flags|=1,Ga(s,o,y,j),o.child)}function Z1(s,o,x,y,j){if(s===null){var R=x.type;return typeof R=="function"&&!Gf(R)&&R.defaultProps===void 0&&x.compare===null?(o.tag=15,o.type=R,Q1(s,o,R,y,j)):(s=Td(x.type,null,y,o,o.mode,j),s.ref=o.ref,s.return=o,o.child=s)}if(R=s.child,!Ox(s,j)){var Q=R.memoizedProps;if(x=x.compare,x=x!==null?x:p,x(Q,y)&&s.ref===o.ref)return Ei(s,o,j)}return o.flags|=1,s=yi(R,y),s.ref=o.ref,s.return=o,o.child=s}function Q1(s,o,x,y,j){if(s!==null){var R=s.memoizedProps;if(p(R,y)&&s.ref===o.ref)if(Ba=!1,o.pendingProps=y=R,Ox(s,j))(s.flags&131072)!==0&&(Ba=!0);else return o.lanes=s.lanes,Ei(s,o,j)}return Ax(s,o,x,y,j)}function J1(s,o,x){var y=o.pendingProps,j=y.children,R=s!==null?s.memoizedState:null;if(y.mode==="hidden"){if((o.flags&128)!==0){if(y=R!==null?R.baseLanes|x:x,s!==null){for(j=o.child=s.child,R=0;j!==null;)R=R|j.lanes|j.childLanes,j=j.sibling;o.childLanes=R&~y}else o.childLanes=0,o.child=null;return ep(s,o,y,x)}if((x&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Od(o,R!==null?R.cachePool:null),R!==null?Qg(o,R):lx(),z1(o);else return o.lanes=o.childLanes=536870912,ep(s,o,R!==null?R.baseLanes|x:x,x)}else R!==null?(Od(o,R.cachePool),Qg(o,R),ll(),o.memoizedState=null):(s!==null&&Od(o,null),lx(),ll());return Ga(s,o,j,x),o.child}function ep(s,o,x,y){var j=tx();return j=j===null?null:{parent:Da._currentValue,pool:j},o.memoizedState={baseLanes:x,cachePool:j},s!==null&&Od(o,null),lx(),z1(o),s!==null&&Yc(s,o,y,!0),null}function Qd(s,o){var x=o.ref;if(x===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(s===null||s.ref!==x)&&(o.flags|=4194816)}}function Ax(s,o,x,y,j){return Jl(o),x=dx(s,o,x,y,void 0,j),y=ux(),s!==null&&!Ba?(fx(s,o,j),Ei(s,o,j)):(Nr&&y&&qf(o),o.flags|=1,Ga(s,o,x,j),o.child)}function tp(s,o,x,y,j,R){return Jl(o),o.updateQueue=null,x=e1(o,y,x,j),Jg(s),y=ux(),s!==null&&!Ba?(fx(s,o,R),Ei(s,o,R)):(Nr&&y&&qf(o),o.flags|=1,Ga(s,o,x,R),o.child)}function rp(s,o,x,y,j){if(Jl(o),o.stateNode===null){var R=Yo,Q=x.contextType;typeof Q=="object"&&Q!==null&&(R=ss(Q)),R=new x(y,R),o.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=Cx,o.stateNode=R,R._reactInternals=o,R=o.stateNode,R.props=y,R.state=o.memoizedState,R.refs={},ax(o),Q=x.contextType,R.context=typeof Q=="object"&&Q!==null?ss(Q):Yo,R.state=o.memoizedState,Q=x.getDerivedStateFromProps,typeof Q=="function"&&(Ex(o,x,Q,y),R.state=o.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(Q=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),Q!==R.state&&Cx.enqueueReplaceState(R,R.state,null),Qc(o,y,R,j),Zc(),R.state=o.memoizedState),typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!0}else if(s===null){R=o.stateNode;var xe=o.memoizedProps,_e=ro(x,xe);R.props=_e;var Ye=R.context,it=x.contextType;Q=Yo,typeof it=="object"&&it!==null&&(Q=ss(it));var dt=x.getDerivedStateFromProps;it=typeof dt=="function"||typeof R.getSnapshotBeforeUpdate=="function",xe=o.pendingProps!==xe,it||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(xe||Ye!==Q)&&H1(o,R,y,Q),rl=!1;var qe=o.memoizedState;R.state=qe,Qc(o,y,R,j),Zc(),Ye=o.memoizedState,xe||qe!==Ye||rl?(typeof dt=="function"&&(Ex(o,x,dt,y),Ye=o.memoizedState),(_e=rl||U1(o,x,_e,y,qe,Ye,Q))?(it||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=Ye),R.props=y,R.state=Ye,R.context=Q,y=_e):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{R=o.stateNode,sx(s,o),Q=o.memoizedProps,it=ro(x,Q),R.props=it,dt=o.pendingProps,qe=R.context,Ye=x.contextType,_e=Yo,typeof Ye=="object"&&Ye!==null&&(_e=ss(Ye)),xe=x.getDerivedStateFromProps,(Ye=typeof xe=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(Q!==dt||qe!==_e)&&H1(o,R,y,_e),rl=!1,qe=o.memoizedState,R.state=qe,Qc(o,y,R,j),Zc();var Ze=o.memoizedState;Q!==dt||qe!==Ze||rl||s!==null&&s.dependencies!==null&&Md(s.dependencies)?(typeof xe=="function"&&(Ex(o,x,xe,y),Ze=o.memoizedState),(it=rl||U1(o,x,it,y,qe,Ze,_e)||s!==null&&s.dependencies!==null&&Md(s.dependencies))?(Ye||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,Ze,_e),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,Ze,_e)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||Q===s.memoizedProps&&qe===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Q===s.memoizedProps&&qe===s.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Ze),R.props=y,R.state=Ze,R.context=_e,y=it):(typeof R.componentDidUpdate!="function"||Q===s.memoizedProps&&qe===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||Q===s.memoizedProps&&qe===s.memoizedState||(o.flags|=1024),y=!1)}return R=y,Qd(s,o),y=(o.flags&128)!==0,R||y?(R=o.stateNode,x=y&&typeof x.getDerivedStateFromError!="function"?null:R.render(),o.flags|=1,s!==null&&y?(o.child=tc(o,s.child,null,j),o.child=tc(o,null,x,j)):Ga(s,o,x,j),o.memoizedState=R.state,s=o.child):s=Ei(s,o,j),s}function ap(s,o,x,y){return Vc(),o.flags|=256,Ga(s,o,x,y),o.child}var _x={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Tx(s){return{baseLanes:s,cachePool:Gg()}}function Dx(s,o,x){return s=s!==null?s.childLanes&~x:0,o&&(s|=cn),s}function sp(s,o,x){var y=o.pendingProps,j=!1,R=(o.flags&128)!==0,Q;if((Q=R)||(Q=s!==null&&s.memoizedState===null?!1:(Ra.current&2)!==0),Q&&(j=!0,o.flags&=-129),Q=(o.flags&32)!==0,o.flags&=-33,s===null){if(Nr){if(j?il(o):ll(),Nr){var xe=ra,_e;if(_e=xe){e:{for(_e=xe,xe=Kn;_e.nodeType!==8;){if(!xe){xe=null;break e}if(_e=jn(_e.nextSibling),_e===null){xe=null;break e}}xe=_e}xe!==null?(o.memoizedState={dehydrated:xe,treeContext:$l!==null?{id:bi,overflow:vi}:null,retryLane:536870912,hydrationErrors:null},_e=Bs(18,null,null,0),_e.stateNode=xe,_e.return=o,o.child=_e,ys=o,ra=null,_e=!0):_e=!1}_e||Zl(o)}if(xe=o.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return hh(xe)?o.lanes=32:o.lanes=536870912,null;ji(o)}return xe=y.children,y=y.fallback,j?(ll(),j=o.mode,xe=Jd({mode:"hidden",children:xe},j),y=ql(y,j,x,null),xe.return=o,y.return=o,xe.sibling=y,o.child=xe,j=o.child,j.memoizedState=Tx(x),j.childLanes=Dx(s,Q,x),o.memoizedState=_x,y):(il(o),Rx(o,xe))}if(_e=s.memoizedState,_e!==null&&(xe=_e.dehydrated,xe!==null)){if(R)o.flags&256?(il(o),o.flags&=-257,o=Mx(s,o,x)):o.memoizedState!==null?(ll(),o.child=s.child,o.flags|=128,o=null):(ll(),j=y.fallback,xe=o.mode,y=Jd({mode:"visible",children:y.children},xe),j=ql(j,xe,x,null),j.flags|=2,y.return=o,j.return=o,y.sibling=j,o.child=y,tc(o,s.child,null,x),y=o.child,y.memoizedState=Tx(x),y.childLanes=Dx(s,Q,x),o.memoizedState=_x,o=j);else if(il(o),hh(xe)){if(Q=xe.nextSibling&&xe.nextSibling.dataset,Q)var Ye=Q.dgst;Q=Ye,y=Error(n(419)),y.stack="",y.digest=Q,Gc({value:y,source:null,stack:null}),o=Mx(s,o,x)}else if(Ba||Yc(s,o,x,!1),Q=(x&s.childLanes)!==0,Ba||Q){if(Q=Ur,Q!==null&&(y=x&-x,y=(y&42)!==0?1:fi(y),y=(y&(Q.suspendedLanes|x))!==0?0:y,y!==0&&y!==_e.retryLane))throw _e.retryLane=y,Go(s,y),Vs(Q,s,y),W1;xe.data==="$?"||Zx(),o=Mx(s,o,x)}else xe.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=_e.treeContext,ra=jn(xe.nextSibling),ys=o,Nr=!0,Kl=null,Kn=!1,s!==null&&(nn[ln++]=bi,nn[ln++]=vi,nn[ln++]=$l,bi=s.id,vi=s.overflow,$l=o),o=Rx(o,y.children),o.flags|=4096);return o}return j?(ll(),j=y.fallback,xe=o.mode,_e=s.child,Ye=_e.sibling,y=yi(_e,{mode:"hidden",children:y.children}),y.subtreeFlags=_e.subtreeFlags&65011712,Ye!==null?j=yi(Ye,j):(j=ql(j,xe,x,null),j.flags|=2),j.return=o,y.return=o,y.sibling=j,o.child=y,y=j,j=o.child,xe=s.child.memoizedState,xe===null?xe=Tx(x):(_e=xe.cachePool,_e!==null?(Ye=Da._currentValue,_e=_e.parent!==Ye?{parent:Ye,pool:Ye}:_e):_e=Gg(),xe={baseLanes:xe.baseLanes|x,cachePool:_e}),j.memoizedState=xe,j.childLanes=Dx(s,Q,x),o.memoizedState=_x,y):(il(o),x=s.child,s=x.sibling,x=yi(x,{mode:"visible",children:y.children}),x.return=o,x.sibling=null,s!==null&&(Q=o.deletions,Q===null?(o.deletions=[s],o.flags|=16):Q.push(s)),o.child=x,o.memoizedState=null,x)}function Rx(s,o){return o=Jd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Jd(s,o){return s=Bs(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Mx(s,o,x){return tc(o,s.child,null,x),s=Rx(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function np(s,o,x){s.lanes|=o;var y=s.alternate;y!==null&&(y.lanes|=o),Zf(s.return,o,x)}function Ix(s,o,x,y,j){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:x,tailMode:j}:(R.isBackwards=o,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=x,R.tailMode=j)}function ip(s,o,x){var y=o.pendingProps,j=y.revealOrder,R=y.tail;if(Ga(s,o,y.children,x),y=Ra.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&np(s,x,o);else if(s.tag===19)np(s,x,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(K(Ra,y),j){case"forwards":for(x=o.child,j=null;x!==null;)s=x.alternate,s!==null&&Wd(s)===null&&(j=x),x=x.sibling;x=j,x===null?(j=o.child,o.child=null):(j=x.sibling,x.sibling=null),Ix(o,!1,j,x,R);break;case"backwards":for(x=null,j=o.child,o.child=null;j!==null;){if(s=j.alternate,s!==null&&Wd(s)===null){o.child=j;break}s=j.sibling,j.sibling=x,x=j,j=s}Ix(o,!0,x,null,R);break;case"together":Ix(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ei(s,o,x){if(s!==null&&(o.dependencies=s.dependencies),fl|=o.lanes,(x&o.childLanes)===0)if(s!==null){if(Yc(s,o,x,!1),(x&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(n(153));if(o.child!==null){for(s=o.child,x=yi(s,s.pendingProps),o.child=x,x.return=o;s.sibling!==null;)s=s.sibling,x=x.sibling=yi(s,s.pendingProps),x.return=o;x.sibling=null}return o.child}function Ox(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Md(s)))}function CN(s,o,x){switch(o.tag){case 3:ke(o,o.stateNode.containerInfo),tl(o,Da,s.memoizedState.cache),Vc();break;case 27:case 5:Oe(o);break;case 4:ke(o,o.stateNode.containerInfo);break;case 10:tl(o,o.type,o.memoizedProps.value);break;case 13:var y=o.memoizedState;if(y!==null)return y.dehydrated!==null?(il(o),o.flags|=128,null):(x&o.child.childLanes)!==0?sp(s,o,x):(il(o),s=Ei(s,o,x),s!==null?s.sibling:null);il(o);break;case 19:var j=(s.flags&128)!==0;if(y=(x&o.childLanes)!==0,y||(Yc(s,o,x,!1),y=(x&o.childLanes)!==0),j){if(y)return ip(s,o,x);o.flags|=128}if(j=o.memoizedState,j!==null&&(j.rendering=null,j.tail=null,j.lastEffect=null),K(Ra,Ra.current),y)break;return null;case 22:case 23:return o.lanes=0,J1(s,o,x);case 24:tl(o,Da,s.memoizedState.cache)}return Ei(s,o,x)}function lp(s,o,x){if(s!==null)if(s.memoizedProps!==o.pendingProps)Ba=!0;else{if(!Ox(s,x)&&(o.flags&128)===0)return Ba=!1,CN(s,o,x);Ba=(s.flags&131072)!==0}else Ba=!1,Nr&&(o.flags&1048576)!==0&&Lg(o,Rd,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var y=o.elementType,j=y._init;if(y=j(y._payload),o.type=y,typeof y=="function")Gf(y)?(s=ro(y,s),o.tag=1,o=rp(null,o,y,s,x)):(o.tag=0,o=Ax(null,o,y,s,x));else{if(y!=null){if(j=y.$$typeof,j===L){o.tag=11,o=K1(null,o,y,s,x);break e}else if(j===B){o.tag=14,o=Z1(null,o,y,s,x);break e}}throw o=ie(y)||y,Error(n(306,o,""))}}return o;case 0:return Ax(s,o,o.type,o.pendingProps,x);case 1:return y=o.type,j=ro(y,o.pendingProps),rp(s,o,y,j,x);case 3:e:{if(ke(o,o.stateNode.containerInfo),s===null)throw Error(n(387));y=o.pendingProps;var R=o.memoizedState;j=R.element,sx(s,o),Qc(o,y,null,x);var Q=o.memoizedState;if(y=Q.cache,tl(o,Da,y),y!==R.cache&&Qf(o,[Da],x,!0),Zc(),y=Q.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:Q.cache},o.updateQueue.baseState=R,o.memoizedState=R,o.flags&256){o=ap(s,o,y,x);break e}else if(y!==j){j=an(Error(n(424)),o),Gc(j),o=ap(s,o,y,x);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ra=jn(s.firstChild),ys=o,Nr=!0,Kl=null,Kn=!0,x=P1(o,null,y,x),o.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Vc(),y===j){o=Ei(s,o,x);break e}Ga(s,o,y,x)}o=o.child}return o;case 26:return Qd(s,o),s===null?(x=uy(o.type,null,o.pendingProps,null))?o.memoizedState=x:Nr||(x=o.type,s=o.pendingProps,y=xu(re.current).createElement(x),y[pa]=o,y[zr]=s,Xa(y,x,s),Fe(y),o.stateNode=y):o.memoizedState=uy(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Oe(o),s===null&&Nr&&(y=o.stateNode=oy(o.type,o.pendingProps,re.current),ys=o,Kn=!0,j=ra,gl(o.type)?(mh=j,ra=jn(y.firstChild)):ra=j),Ga(s,o,o.pendingProps.children,x),Qd(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Nr&&((j=y=ra)&&(y=ek(y,o.type,o.pendingProps,Kn),y!==null?(o.stateNode=y,ys=o,ra=jn(y.firstChild),Kn=!1,j=!0):j=!1),j||Zl(o)),Oe(o),j=o.type,R=o.pendingProps,Q=s!==null?s.memoizedProps:null,y=R.children,uh(j,R)?y=null:Q!==null&&uh(j,Q)&&(o.flags|=32),o.memoizedState!==null&&(j=dx(s,o,yN,null,null,x),v0._currentValue=j),Qd(s,o),Ga(s,o,y,x),o.child;case 6:return s===null&&Nr&&((s=x=ra)&&(x=tk(x,o.pendingProps,Kn),x!==null?(o.stateNode=x,ys=o,ra=null,s=!0):s=!1),s||Zl(o)),null;case 13:return sp(s,o,x);case 4:return ke(o,o.stateNode.containerInfo),y=o.pendingProps,s===null?o.child=tc(o,null,y,x):Ga(s,o,y,x),o.child;case 11:return K1(s,o,o.type,o.pendingProps,x);case 7:return Ga(s,o,o.pendingProps,x),o.child;case 8:return Ga(s,o,o.pendingProps.children,x),o.child;case 12:return Ga(s,o,o.pendingProps.children,x),o.child;case 10:return y=o.pendingProps,tl(o,o.type,y.value),Ga(s,o,y.children,x),o.child;case 9:return j=o.type._context,y=o.pendingProps.children,Jl(o),j=ss(j),y=y(j),o.flags|=1,Ga(s,o,y,x),o.child;case 14:return Z1(s,o,o.type,o.pendingProps,x);case 15:return Q1(s,o,o.type,o.pendingProps,x);case 19:return ip(s,o,x);case 31:return y=o.pendingProps,x=o.mode,y={mode:y.mode,children:y.children},s===null?(x=Jd(y,x),x.ref=o.ref,o.child=x,x.return=o,o=x):(x=yi(s.child,y),x.ref=o.ref,o.child=x,x.return=o,o=x),o;case 22:return J1(s,o,x);case 24:return Jl(o),y=ss(Da),s===null?(j=tx(),j===null&&(j=Ur,R=Jf(),j.pooledCache=R,R.refCount++,R!==null&&(j.pooledCacheLanes|=x),j=R),o.memoizedState={parent:y,cache:j},ax(o),tl(o,Da,j)):((s.lanes&x)!==0&&(sx(s,o),Qc(o,null,null,x),Zc()),j=s.memoizedState,R=o.memoizedState,j.parent!==y?(j={parent:y,cache:y},o.memoizedState=j,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=j),tl(o,Da,y)):(y=R.cache,tl(o,Da,y),y!==j.cache&&Qf(o,[Da],x,!0))),Ga(s,o,o.pendingProps.children,x),o.child;case 29:throw o.pendingProps}throw Error(n(156,o.tag))}function Ci(s){s.flags|=4}function op(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!gy(o)){if(o=on.current,o!==null&&((mr&4194048)===mr?Zn!==null:(mr&62914560)!==mr&&(mr&536870912)===0||o!==Zn))throw Wc=rx,Yg;s.flags|=8192}}function eu(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Bn():536870912,s.lanes|=o,nc|=o)}function n0(s,o){if(!Nr)switch(s.tailMode){case"hidden":o=s.tail;for(var x=null;o!==null;)o.alternate!==null&&(x=o),o=o.sibling;x===null?s.tail=null:x.sibling=null;break;case"collapsed":x=s.tail;for(var y=null;x!==null;)x.alternate!==null&&(y=x),x=x.sibling;y===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Zr(s){var o=s.alternate!==null&&s.alternate.child===s.child,x=0,y=0;if(o)for(var j=s.child;j!==null;)x|=j.lanes|j.childLanes,y|=j.subtreeFlags&65011712,y|=j.flags&65011712,j.return=s,j=j.sibling;else for(j=s.child;j!==null;)x|=j.lanes|j.childLanes,y|=j.subtreeFlags,y|=j.flags,j.return=s,j=j.sibling;return s.subtreeFlags|=y,s.childLanes=x,o}function SN(s,o,x){var y=o.pendingProps;switch($f(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zr(o),null;case 1:return Zr(o),null;case 3:return x=o.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),o.memoizedState.cache!==y&&(o.flags|=2048),Ni(Da),Pe(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(s===null||s.child===null)&&(Hc(o)?Ci(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,zg())),Zr(o),null;case 26:return x=o.memoizedState,s===null?(Ci(o),x!==null?(Zr(o),op(o,x)):(Zr(o),o.flags&=-16777217)):x?x!==s.memoizedState?(Ci(o),Zr(o),op(o,x)):(Zr(o),o.flags&=-16777217):(s.memoizedProps!==y&&Ci(o),Zr(o),o.flags&=-16777217),null;case 27:nt(o),x=re.current;var j=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==y&&Ci(o);else{if(!y){if(o.stateNode===null)throw Error(n(166));return Zr(o),null}s=ae.current,Hc(o)?Bg(o):(s=oy(j,y,x),o.stateNode=s,Ci(o))}return Zr(o),null;case 5:if(nt(o),x=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==y&&Ci(o);else{if(!y){if(o.stateNode===null)throw Error(n(166));return Zr(o),null}if(s=ae.current,Hc(o))Bg(o);else{switch(j=xu(re.current),s){case 1:s=j.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:s=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":s=j.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":s=j.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":s=j.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof y.is=="string"?j.createElement("select",{is:y.is}):j.createElement("select"),y.multiple?s.multiple=!0:y.size&&(s.size=y.size);break;default:s=typeof y.is=="string"?j.createElement(x,{is:y.is}):j.createElement(x)}}s[pa]=o,s[zr]=y;e:for(j=o.child;j!==null;){if(j.tag===5||j.tag===6)s.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===o)break e;for(;j.sibling===null;){if(j.return===null||j.return===o)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}o.stateNode=s;e:switch(Xa(s,x,y),x){case"button":case"input":case"select":case"textarea":s=!!y.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Ci(o)}}return Zr(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==y&&Ci(o);else{if(typeof y!="string"&&o.stateNode===null)throw Error(n(166));if(s=re.current,Hc(o)){if(s=o.stateNode,x=o.memoizedProps,y=null,j=ys,j!==null)switch(j.tag){case 27:case 5:y=j.memoizedProps}s[pa]=o,s=!!(s.nodeValue===x||y!==null&&y.suppressHydrationWarning===!0||ty(s.nodeValue,x)),s||Zl(o)}else s=xu(s).createTextNode(y),s[pa]=o,o.stateNode=s}return Zr(o),null;case 13:if(y=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(j=Hc(o),y!==null&&y.dehydrated!==null){if(s===null){if(!j)throw Error(n(318));if(j=o.memoizedState,j=j!==null?j.dehydrated:null,!j)throw Error(n(317));j[pa]=o}else Vc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Zr(o),j=!1}else j=zg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=j),j=!0;if(!j)return o.flags&256?(ji(o),o):(ji(o),null)}if(ji(o),(o.flags&128)!==0)return o.lanes=x,o;if(x=y!==null,s=s!==null&&s.memoizedState!==null,x){y=o.child,j=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(j=y.alternate.memoizedState.cachePool.pool);var R=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==j&&(y.flags|=2048)}return x!==s&&x&&(o.child.flags|=8192),eu(o,o.updateQueue),Zr(o),null;case 4:return Pe(),s===null&&ih(o.stateNode.containerInfo),Zr(o),null;case 10:return Ni(o.type),Zr(o),null;case 19:if(W(Ra),j=o.memoizedState,j===null)return Zr(o),null;if(y=(o.flags&128)!==0,R=j.rendering,R===null)if(y)n0(j,!1);else{if(aa!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(R=Wd(s),R!==null){for(o.flags|=128,n0(j,!1),s=R.updateQueue,o.updateQueue=s,eu(o,s),o.subtreeFlags=0,s=x,x=o.child;x!==null;)Fg(x,s),x=x.sibling;return K(Ra,Ra.current&1|2),o.child}s=s.sibling}j.tail!==null&&be()>au&&(o.flags|=128,y=!0,n0(j,!1),o.lanes=4194304)}else{if(!y)if(s=Wd(R),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,eu(o,s),n0(j,!0),j.tail===null&&j.tailMode==="hidden"&&!R.alternate&&!Nr)return Zr(o),null}else 2*be()-j.renderingStartTime>au&&x!==536870912&&(o.flags|=128,y=!0,n0(j,!1),o.lanes=4194304);j.isBackwards?(R.sibling=o.child,o.child=R):(s=j.last,s!==null?s.sibling=R:o.child=R,j.last=R)}return j.tail!==null?(o=j.tail,j.rendering=o,j.tail=o.sibling,j.renderingStartTime=be(),o.sibling=null,s=Ra.current,K(Ra,y?s&1|2:s&1),o):(Zr(o),null);case 22:case 23:return ji(o),ox(),y=o.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(o.flags|=8192):y&&(o.flags|=8192),y?(x&536870912)!==0&&(o.flags&128)===0&&(Zr(o),o.subtreeFlags&6&&(o.flags|=8192)):Zr(o),x=o.updateQueue,x!==null&&eu(o,x.retryQueue),x=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),y=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),y!==x&&(o.flags|=2048),s!==null&&W(eo),null;case 24:return x=null,s!==null&&(x=s.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),Ni(Da),Zr(o),null;case 25:return null;case 30:return null}throw Error(n(156,o.tag))}function AN(s,o){switch($f(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ni(Da),Pe(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return nt(o),null;case 13:if(ji(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(n(340));Vc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return W(Ra),null;case 4:return Pe(),null;case 10:return Ni(o.type),null;case 22:case 23:return ji(o),ox(),s!==null&&W(eo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Ni(Da),null;case 25:return null;default:return null}}function cp(s,o){switch($f(o),o.tag){case 3:Ni(Da),Pe();break;case 26:case 27:case 5:nt(o);break;case 4:Pe();break;case 13:ji(o);break;case 19:W(Ra);break;case 10:Ni(o.type);break;case 22:case 23:ji(o),ox(),s!==null&&W(eo);break;case 24:Ni(Da)}}function i0(s,o){try{var x=o.updateQueue,y=x!==null?x.lastEffect:null;if(y!==null){var j=y.next;x=j;do{if((x.tag&s)===s){y=void 0;var R=x.create,Q=x.inst;y=R(),Q.destroy=y}x=x.next}while(x!==j)}}catch(xe){Br(o,o.return,xe)}}function ol(s,o,x){try{var y=o.updateQueue,j=y!==null?y.lastEffect:null;if(j!==null){var R=j.next;y=R;do{if((y.tag&s)===s){var Q=y.inst,xe=Q.destroy;if(xe!==void 0){Q.destroy=void 0,j=o;var _e=x,Ye=xe;try{Ye()}catch(it){Br(j,_e,it)}}}y=y.next}while(y!==R)}}catch(it){Br(o,o.return,it)}}function dp(s){var o=s.updateQueue;if(o!==null){var x=s.stateNode;try{Zg(o,x)}catch(y){Br(s,s.return,y)}}}function up(s,o,x){x.props=ro(s.type,s.memoizedProps),x.state=s.memoizedState;try{x.componentWillUnmount()}catch(y){Br(s,o,y)}}function l0(s,o){try{var x=s.ref;if(x!==null){switch(s.tag){case 26:case 27:case 5:var y=s.stateNode;break;case 30:y=s.stateNode;break;default:y=s.stateNode}typeof x=="function"?s.refCleanup=x(y):x.current=y}}catch(j){Br(s,o,j)}}function Qn(s,o){var x=s.ref,y=s.refCleanup;if(x!==null)if(typeof y=="function")try{y()}catch(j){Br(s,o,j)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(j){Br(s,o,j)}else x.current=null}function fp(s){var o=s.type,x=s.memoizedProps,y=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":x.autoFocus&&y.focus();break e;case"img":x.src?y.src=x.src:x.srcSet&&(y.srcset=x.srcSet)}}catch(j){Br(s,s.return,j)}}function Fx(s,o,x){try{var y=s.stateNode;WN(y,s.type,x,o),y[zr]=o}catch(j){Br(s,s.return,j)}}function xp(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&gl(s.type)||s.tag===4}function Lx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||xp(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&gl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Bx(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(s,o):(o=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,o.appendChild(s),x=x._reactRootContainer,x!=null||o.onclick!==null||(o.onclick=fu));else if(y!==4&&(y===27&&gl(s.type)&&(x=s.stateNode,o=null),s=s.child,s!==null))for(Bx(s,o,x),s=s.sibling;s!==null;)Bx(s,o,x),s=s.sibling}function tu(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?x.insertBefore(s,o):x.appendChild(s);else if(y!==4&&(y===27&&gl(s.type)&&(x=s.stateNode),s=s.child,s!==null))for(tu(s,o,x),s=s.sibling;s!==null;)tu(s,o,x),s=s.sibling}function hp(s){var o=s.stateNode,x=s.memoizedProps;try{for(var y=s.type,j=o.attributes;j.length;)o.removeAttributeNode(j[0]);Xa(o,y,x),o[pa]=s,o[zr]=x}catch(R){Br(s,s.return,R)}}var Si=!1,ha=!1,Px=!1,mp=typeof WeakSet=="function"?WeakSet:Set,Pa=null;function _N(s,o){if(s=s.containerInfo,ch=bu,s=O(s),V(s)){if("selectionStart"in s)var x={start:s.selectionStart,end:s.selectionEnd};else e:{x=(x=s.ownerDocument)&&x.defaultView||window;var y=x.getSelection&&x.getSelection();if(y&&y.rangeCount!==0){x=y.anchorNode;var j=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{x.nodeType,R.nodeType}catch{x=null;break e}var Q=0,xe=-1,_e=-1,Ye=0,it=0,dt=s,qe=null;t:for(;;){for(var Ze;dt!==x||j!==0&&dt.nodeType!==3||(xe=Q+j),dt!==R||y!==0&&dt.nodeType!==3||(_e=Q+y),dt.nodeType===3&&(Q+=dt.nodeValue.length),(Ze=dt.firstChild)!==null;)qe=dt,dt=Ze;for(;;){if(dt===s)break t;if(qe===x&&++Ye===j&&(xe=Q),qe===R&&++it===y&&(_e=Q),(Ze=dt.nextSibling)!==null)break;dt=qe,qe=dt.parentNode}dt=Ze}x=xe===-1||_e===-1?null:{start:xe,end:_e}}else x=null}x=x||{start:0,end:0}}else x=null;for(dh={focusedElem:s,selectionRange:x},bu=!1,Pa=o;Pa!==null;)if(o=Pa,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Pa=s;else for(;Pa!==null;){switch(o=Pa,R=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,x=o,j=R.memoizedProps,R=R.memoizedState,y=x.stateNode;try{var Ht=ro(x.type,j,x.elementType===x.type);s=y.getSnapshotBeforeUpdate(Ht,R),y.__reactInternalSnapshotBeforeUpdate=s}catch(Lt){Br(x,x.return,Lt)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,x=s.nodeType,x===9)xh(s);else if(x===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":xh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(n(163))}if(s=o.sibling,s!==null){s.return=o.return,Pa=s;break}Pa=o.return}}function gp(s,o,x){var y=x.flags;switch(x.tag){case 0:case 11:case 15:cl(s,x),y&4&&i0(5,x);break;case 1:if(cl(s,x),y&4)if(s=x.stateNode,o===null)try{s.componentDidMount()}catch(Q){Br(x,x.return,Q)}else{var j=ro(x.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(j,o,s.__reactInternalSnapshotBeforeUpdate)}catch(Q){Br(x,x.return,Q)}}y&64&&dp(x),y&512&&l0(x,x.return);break;case 3:if(cl(s,x),y&64&&(s=x.updateQueue,s!==null)){if(o=null,x.child!==null)switch(x.child.tag){case 27:case 5:o=x.child.stateNode;break;case 1:o=x.child.stateNode}try{Zg(s,o)}catch(Q){Br(x,x.return,Q)}}break;case 27:o===null&&y&4&&hp(x);case 26:case 5:cl(s,x),o===null&&y&4&&fp(x),y&512&&l0(x,x.return);break;case 12:cl(s,x);break;case 13:cl(s,x),y&4&&bp(s,x),y&64&&(s=x.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(x=BN.bind(null,x),rk(s,x))));break;case 22:if(y=x.memoizedState!==null||Si,!y){o=o!==null&&o.memoizedState!==null||ha,j=Si;var R=ha;Si=y,(ha=o)&&!R?dl(s,x,(x.subtreeFlags&8772)!==0):cl(s,x),Si=j,ha=R}break;case 30:break;default:cl(s,x)}}function pp(s){var o=s.alternate;o!==null&&(s.alternate=null,pp(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ve(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var $r=null,_s=!1;function Ai(s,o,x){for(x=x.child;x!==null;)yp(s,o,x),x=x.sibling}function yp(s,o,x){if(ur&&typeof ur.onCommitFiberUnmount=="function")try{ur.onCommitFiberUnmount(qt,x)}catch{}switch(x.tag){case 26:ha||Qn(x,o),Ai(s,o,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:ha||Qn(x,o);var y=$r,j=_s;gl(x.type)&&($r=x.stateNode,_s=!1),Ai(s,o,x),g0(x.stateNode),$r=y,_s=j;break;case 5:ha||Qn(x,o);case 6:if(y=$r,j=_s,$r=null,Ai(s,o,x),$r=y,_s=j,$r!==null)if(_s)try{($r.nodeType===9?$r.body:$r.nodeName==="HTML"?$r.ownerDocument.body:$r).removeChild(x.stateNode)}catch(R){Br(x,o,R)}else try{$r.removeChild(x.stateNode)}catch(R){Br(x,o,R)}break;case 18:$r!==null&&(_s?(s=$r,iy(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,x.stateNode),j0(s)):iy($r,x.stateNode));break;case 4:y=$r,j=_s,$r=x.stateNode.containerInfo,_s=!0,Ai(s,o,x),$r=y,_s=j;break;case 0:case 11:case 14:case 15:ha||ol(2,x,o),ha||ol(4,x,o),Ai(s,o,x);break;case 1:ha||(Qn(x,o),y=x.stateNode,typeof y.componentWillUnmount=="function"&&up(x,o,y)),Ai(s,o,x);break;case 21:Ai(s,o,x);break;case 22:ha=(y=ha)||x.memoizedState!==null,Ai(s,o,x),ha=y;break;default:Ai(s,o,x)}}function bp(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{j0(s)}catch(x){Br(o,o.return,x)}}function TN(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new mp),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new mp),o;default:throw Error(n(435,s.tag))}}function zx(s,o){var x=TN(s);o.forEach(function(y){var j=PN.bind(null,s,y);x.has(y)||(x.add(y),y.then(j,j))})}function Ps(s,o){var x=o.deletions;if(x!==null)for(var y=0;y<x.length;y++){var j=x[y],R=s,Q=o,xe=Q;e:for(;xe!==null;){switch(xe.tag){case 27:if(gl(xe.type)){$r=xe.stateNode,_s=!1;break e}break;case 5:$r=xe.stateNode,_s=!1;break e;case 3:case 4:$r=xe.stateNode.containerInfo,_s=!0;break e}xe=xe.return}if($r===null)throw Error(n(160));yp(R,Q,j),$r=null,_s=!1,R=j.alternate,R!==null&&(R.return=null),j.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)vp(o,s),o=o.sibling}var kn=null;function vp(s,o){var x=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ps(o,s),zs(s),y&4&&(ol(3,s,s.return),i0(3,s),ol(5,s,s.return));break;case 1:Ps(o,s),zs(s),y&512&&(ha||x===null||Qn(x,x.return)),y&64&&Si&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(x=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=x===null?y:x.concat(y))));break;case 26:var j=kn;if(Ps(o,s),zs(s),y&512&&(ha||x===null||Qn(x,x.return)),y&4){var R=x!==null?x.memoizedState:null;if(y=s.memoizedState,x===null)if(y===null)if(s.stateNode===null){e:{y=s.type,x=s.memoizedProps,j=j.ownerDocument||j;t:switch(y){case"title":R=j.getElementsByTagName("title")[0],(!R||R[ge]||R[pa]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=j.createElement(y),j.head.insertBefore(R,j.querySelector("head > title"))),Xa(R,y,x),R[pa]=s,Fe(R),y=R;break e;case"link":var Q=hy("link","href",j).get(y+(x.href||""));if(Q){for(var xe=0;xe<Q.length;xe++)if(R=Q[xe],R.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&R.getAttribute("rel")===(x.rel==null?null:x.rel)&&R.getAttribute("title")===(x.title==null?null:x.title)&&R.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){Q.splice(xe,1);break t}}R=j.createElement(y),Xa(R,y,x),j.head.appendChild(R);break;case"meta":if(Q=hy("meta","content",j).get(y+(x.content||""))){for(xe=0;xe<Q.length;xe++)if(R=Q[xe],R.getAttribute("content")===(x.content==null?null:""+x.content)&&R.getAttribute("name")===(x.name==null?null:x.name)&&R.getAttribute("property")===(x.property==null?null:x.property)&&R.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&R.getAttribute("charset")===(x.charSet==null?null:x.charSet)){Q.splice(xe,1);break t}}R=j.createElement(y),Xa(R,y,x),j.head.appendChild(R);break;default:throw Error(n(468,y))}R[pa]=s,Fe(R),y=R}s.stateNode=y}else my(j,s.type,s.stateNode);else s.stateNode=xy(j,y,s.memoizedProps);else R!==y?(R===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):R.count--,y===null?my(j,s.type,s.stateNode):xy(j,y,s.memoizedProps)):y===null&&s.stateNode!==null&&Fx(s,s.memoizedProps,x.memoizedProps)}break;case 27:Ps(o,s),zs(s),y&512&&(ha||x===null||Qn(x,x.return)),x!==null&&y&4&&Fx(s,s.memoizedProps,x.memoizedProps);break;case 5:if(Ps(o,s),zs(s),y&512&&(ha||x===null||Qn(x,x.return)),s.flags&32){j=s.stateNode;try{Aa(j,"")}catch(Ze){Br(s,s.return,Ze)}}y&4&&s.stateNode!=null&&(j=s.memoizedProps,Fx(s,j,x!==null?x.memoizedProps:j)),y&1024&&(Px=!0);break;case 6:if(Ps(o,s),zs(s),y&4){if(s.stateNode===null)throw Error(n(162));y=s.memoizedProps,x=s.stateNode;try{x.nodeValue=y}catch(Ze){Br(s,s.return,Ze)}}break;case 3:if(gu=null,j=kn,kn=hu(o.containerInfo),Ps(o,s),kn=j,zs(s),y&4&&x!==null&&x.memoizedState.isDehydrated)try{j0(o.containerInfo)}catch(Ze){Br(s,s.return,Ze)}Px&&(Px=!1,wp(s));break;case 4:y=kn,kn=hu(s.stateNode.containerInfo),Ps(o,s),zs(s),kn=y;break;case 12:Ps(o,s),zs(s);break;case 13:Ps(o,s),zs(s),s.child.flags&8192&&s.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Xx=be()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,zx(s,y)));break;case 22:j=s.memoizedState!==null;var _e=x!==null&&x.memoizedState!==null,Ye=Si,it=ha;if(Si=Ye||j,ha=it||_e,Ps(o,s),ha=it,Si=Ye,zs(s),y&8192)e:for(o=s.stateNode,o._visibility=j?o._visibility&-2:o._visibility|1,j&&(x===null||_e||Si||ha||ao(s)),x=null,o=s;;){if(o.tag===5||o.tag===26){if(x===null){_e=x=o;try{if(R=_e.stateNode,j)Q=R.style,typeof Q.setProperty=="function"?Q.setProperty("display","none","important"):Q.display="none";else{xe=_e.stateNode;var dt=_e.memoizedProps.style,qe=dt!=null&&dt.hasOwnProperty("display")?dt.display:null;xe.style.display=qe==null||typeof qe=="boolean"?"":(""+qe).trim()}}catch(Ze){Br(_e,_e.return,Ze)}}}else if(o.tag===6){if(x===null){_e=o;try{_e.stateNode.nodeValue=j?"":_e.memoizedProps}catch(Ze){Br(_e,_e.return,Ze)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;x===o&&(x=null),o=o.return}x===o&&(x=null),o.sibling.return=o.return,o=o.sibling}y&4&&(y=s.updateQueue,y!==null&&(x=y.retryQueue,x!==null&&(y.retryQueue=null,zx(s,x))));break;case 19:Ps(o,s),zs(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,zx(s,y)));break;case 30:break;case 21:break;default:Ps(o,s),zs(s)}}function zs(s){var o=s.flags;if(o&2){try{for(var x,y=s.return;y!==null;){if(xp(y)){x=y;break}y=y.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var j=x.stateNode,R=Lx(s);tu(s,R,j);break;case 5:var Q=x.stateNode;x.flags&32&&(Aa(Q,""),x.flags&=-33);var xe=Lx(s);tu(s,xe,Q);break;case 3:case 4:var _e=x.stateNode.containerInfo,Ye=Lx(s);Bx(s,Ye,_e);break;default:throw Error(n(161))}}catch(it){Br(s,s.return,it)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function wp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;wp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function cl(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)gp(s,o.alternate,o),o=o.sibling}function ao(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:ol(4,o,o.return),ao(o);break;case 1:Qn(o,o.return);var x=o.stateNode;typeof x.componentWillUnmount=="function"&&up(o,o.return,x),ao(o);break;case 27:g0(o.stateNode);case 26:case 5:Qn(o,o.return),ao(o);break;case 22:o.memoizedState===null&&ao(o);break;case 30:ao(o);break;default:ao(o)}s=s.sibling}}function dl(s,o,x){for(x=x&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var y=o.alternate,j=s,R=o,Q=R.flags;switch(R.tag){case 0:case 11:case 15:dl(j,R,x),i0(4,R);break;case 1:if(dl(j,R,x),y=R,j=y.stateNode,typeof j.componentDidMount=="function")try{j.componentDidMount()}catch(Ye){Br(y,y.return,Ye)}if(y=R,j=y.updateQueue,j!==null){var xe=y.stateNode;try{var _e=j.shared.hiddenCallbacks;if(_e!==null)for(j.shared.hiddenCallbacks=null,j=0;j<_e.length;j++)Kg(_e[j],xe)}catch(Ye){Br(y,y.return,Ye)}}x&&Q&64&&dp(R),l0(R,R.return);break;case 27:hp(R);case 26:case 5:dl(j,R,x),x&&y===null&&Q&4&&fp(R),l0(R,R.return);break;case 12:dl(j,R,x);break;case 13:dl(j,R,x),x&&Q&4&&bp(j,R);break;case 22:R.memoizedState===null&&dl(j,R,x),l0(R,R.return);break;case 30:break;default:dl(j,R,x)}o=o.sibling}}function Ux(s,o){var x=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==x&&(s!=null&&s.refCount++,x!=null&&Xc(x))}function Hx(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Xc(s))}function Jn(s,o,x,y){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Np(s,o,x,y),o=o.sibling}function Np(s,o,x,y){var j=o.flags;switch(o.tag){case 0:case 11:case 15:Jn(s,o,x,y),j&2048&&i0(9,o);break;case 1:Jn(s,o,x,y);break;case 3:Jn(s,o,x,y),j&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Xc(s)));break;case 12:if(j&2048){Jn(s,o,x,y),s=o.stateNode;try{var R=o.memoizedProps,Q=R.id,xe=R.onPostCommit;typeof xe=="function"&&xe(Q,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(_e){Br(o,o.return,_e)}}else Jn(s,o,x,y);break;case 13:Jn(s,o,x,y);break;case 23:break;case 22:R=o.stateNode,Q=o.alternate,o.memoizedState!==null?R._visibility&2?Jn(s,o,x,y):o0(s,o):R._visibility&2?Jn(s,o,x,y):(R._visibility|=2,rc(s,o,x,y,(o.subtreeFlags&10256)!==0)),j&2048&&Ux(Q,o);break;case 24:Jn(s,o,x,y),j&2048&&Hx(o.alternate,o);break;default:Jn(s,o,x,y)}}function rc(s,o,x,y,j){for(j=j&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var R=s,Q=o,xe=x,_e=y,Ye=Q.flags;switch(Q.tag){case 0:case 11:case 15:rc(R,Q,xe,_e,j),i0(8,Q);break;case 23:break;case 22:var it=Q.stateNode;Q.memoizedState!==null?it._visibility&2?rc(R,Q,xe,_e,j):o0(R,Q):(it._visibility|=2,rc(R,Q,xe,_e,j)),j&&Ye&2048&&Ux(Q.alternate,Q);break;case 24:rc(R,Q,xe,_e,j),j&&Ye&2048&&Hx(Q.alternate,Q);break;default:rc(R,Q,xe,_e,j)}o=o.sibling}}function o0(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var x=s,y=o,j=y.flags;switch(y.tag){case 22:o0(x,y),j&2048&&Ux(y.alternate,y);break;case 24:o0(x,y),j&2048&&Hx(y.alternate,y);break;default:o0(x,y)}o=o.sibling}}var c0=8192;function ac(s){if(s.subtreeFlags&c0)for(s=s.child;s!==null;)kp(s),s=s.sibling}function kp(s){switch(s.tag){case 26:ac(s),s.flags&c0&&s.memoizedState!==null&&mk(kn,s.memoizedState,s.memoizedProps);break;case 5:ac(s);break;case 3:case 4:var o=kn;kn=hu(s.stateNode.containerInfo),ac(s),kn=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=c0,c0=16777216,ac(s),c0=o):ac(s));break;default:ac(s)}}function jp(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function d0(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Pa=y,Cp(y,s)}jp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ep(s),s=s.sibling}function Ep(s){switch(s.tag){case 0:case 11:case 15:d0(s),s.flags&2048&&ol(9,s,s.return);break;case 3:d0(s);break;case 12:d0(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,ru(s)):d0(s);break;default:d0(s)}}function ru(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Pa=y,Cp(y,s)}jp(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:ol(8,o,o.return),ru(o);break;case 22:x=o.stateNode,x._visibility&2&&(x._visibility&=-3,ru(o));break;default:ru(o)}s=s.sibling}}function Cp(s,o){for(;Pa!==null;){var x=Pa;switch(x.tag){case 0:case 11:case 15:ol(8,x,o);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var y=x.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Xc(x.memoizedState.cache)}if(y=x.child,y!==null)y.return=x,Pa=y;else e:for(x=s;Pa!==null;){y=Pa;var j=y.sibling,R=y.return;if(pp(y),y===x){Pa=null;break e}if(j!==null){j.return=R,Pa=j;break e}Pa=R}}}var DN={getCacheForType:function(s){var o=ss(Da),x=o.data.get(s);return x===void 0&&(x=s(),o.data.set(s,x)),x}},RN=typeof WeakMap=="function"?WeakMap:Map,Ar=0,Ur=null,or=null,mr=0,_r=0,Us=null,ul=!1,sc=!1,Vx=!1,_i=0,aa=0,fl=0,so=0,Gx=0,cn=0,nc=0,u0=null,Ts=null,Yx=!1,Xx=0,au=1/0,su=null,xl=null,Ya=0,hl=null,ic=null,lc=0,qx=0,$x=null,Sp=null,f0=0,Wx=null;function Hs(){if((Ar&2)!==0&&mr!==0)return mr&-mr;if(q.T!==null){var s=$o;return s!==0?s:rh()}return yn()}function Ap(){cn===0&&(cn=(mr&536870912)===0||Nr?Os():536870912);var s=on.current;return s!==null&&(s.flags|=32),cn}function Vs(s,o,x){(s===Ur&&(_r===2||_r===9)||s.cancelPendingCommit!==null)&&(oc(s,0),ml(s,mr,cn,!1)),Jr(s,x),((Ar&2)===0||s!==Ur)&&(s===Ur&&((Ar&2)===0&&(so|=x),aa===4&&ml(s,mr,cn,!1)),ei(s))}function _p(s,o,x){if((Ar&6)!==0)throw Error(n(327));var y=!x&&(o&124)===0&&(o&s.expiredLanes)===0||st(s,o),j=y?ON(s,o):Qx(s,o,!0),R=y;do{if(j===0){sc&&!y&&ml(s,o,0,!1);break}else{if(x=s.current.alternate,R&&!MN(x)){j=Qx(s,o,!1),R=!1;continue}if(j===2){if(R=o,s.errorRecoveryDisabledLanes&R)var Q=0;else Q=s.pendingLanes&-536870913,Q=Q!==0?Q:Q&536870912?536870912:0;if(Q!==0){o=Q;e:{var xe=s;j=u0;var _e=xe.current.memoizedState.isDehydrated;if(_e&&(oc(xe,Q).flags|=256),Q=Qx(xe,Q,!1),Q!==2){if(Vx&&!_e){xe.errorRecoveryDisabledLanes|=R,so|=R,j=4;break e}R=Ts,Ts=j,R!==null&&(Ts===null?Ts=R:Ts.push.apply(Ts,R))}j=Q}if(R=!1,j!==2)continue}}if(j===1){oc(s,0),ml(s,o,0,!0);break}e:{switch(y=s,R=j,R){case 0:case 1:throw Error(n(345));case 4:if((o&4194048)!==o)break;case 6:ml(y,o,cn,!ul);break e;case 2:Ts=null;break;case 3:case 5:break;default:throw Error(n(329))}if((o&62914560)===o&&(j=Xx+300-be(),10<j)){if(ml(y,o,cn,!ul),vt(y,0,!0)!==0)break e;y.timeoutHandle=sy(Tp.bind(null,y,x,Ts,su,Yx,o,cn,so,nc,ul,R,2,-0,0),j);break e}Tp(y,x,Ts,su,Yx,o,cn,so,nc,ul,R,0,-0,0)}}break}while(!0);ei(s)}function Tp(s,o,x,y,j,R,Q,xe,_e,Ye,it,dt,qe,Ze){if(s.timeoutHandle=-1,dt=o.subtreeFlags,(dt&8192||(dt&16785408)===16785408)&&(b0={stylesheets:null,count:0,unsuspend:hk},kp(o),dt=gk(),dt!==null)){s.cancelPendingCommit=dt(Lp.bind(null,s,o,R,x,y,j,Q,xe,_e,it,1,qe,Ze)),ml(s,R,Q,!Ye);return}Lp(s,o,R,x,y,j,Q,xe,_e)}function MN(s){for(var o=s;;){var x=o.tag;if((x===0||x===11||x===15)&&o.flags&16384&&(x=o.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var y=0;y<x.length;y++){var j=x[y],R=j.getSnapshot;j=j.value;try{if(!m(R(),j))return!1}catch{return!1}}if(x=o.child,o.subtreeFlags&16384&&x!==null)x.return=o,o=x;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function ml(s,o,x,y){o&=~Gx,o&=~so,s.suspendedLanes|=o,s.pingedLanes&=~o,y&&(s.warmLanes|=o),y=s.expirationTimes;for(var j=o;0<j;){var R=31-Yt(j),Q=1<<R;y[R]=-1,j&=~Q}x!==0&&Ll(s,x,o)}function nu(){return(Ar&6)===0?(x0(0),!1):!0}function Kx(){if(or!==null){if(_r===0)var s=or.return;else s=or,wi=Ql=null,xx(s),ec=null,a0=0,s=or;for(;s!==null;)cp(s.alternate,s),s=s.return;or=null}}function oc(s,o){var x=s.timeoutHandle;x!==-1&&(s.timeoutHandle=-1,ZN(x)),x=s.cancelPendingCommit,x!==null&&(s.cancelPendingCommit=null,x()),Kx(),Ur=s,or=x=yi(s.current,null),mr=o,_r=0,Us=null,ul=!1,sc=st(s,o),Vx=!1,nc=cn=Gx=so=fl=aa=0,Ts=u0=null,Yx=!1,(o&8)!==0&&(o|=o&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=o;0<y;){var j=31-Yt(y),R=1<<j;o|=s[j],y&=~R}return _i=o,Sd(),x}function Dp(s,o){ir=null,q.H=Xd,o===$c||o===Fd?(o=$g(),_r=3):o===Yg?(o=$g(),_r=4):_r=o===W1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Us=o,or===null&&(aa=1,Zd(s,an(o,s.current)))}function Rp(){var s=q.H;return q.H=Xd,s===null?Xd:s}function Mp(){var s=q.A;return q.A=DN,s}function Zx(){aa=4,ul||(mr&4194048)!==mr&&on.current!==null||(sc=!0),(fl&134217727)===0&&(so&134217727)===0||Ur===null||ml(Ur,mr,cn,!1)}function Qx(s,o,x){var y=Ar;Ar|=2;var j=Rp(),R=Mp();(Ur!==s||mr!==o)&&(su=null,oc(s,o)),o=!1;var Q=aa;e:do try{if(_r!==0&&or!==null){var xe=or,_e=Us;switch(_r){case 8:Kx(),Q=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(o=!0);var Ye=_r;if(_r=0,Us=null,cc(s,xe,_e,Ye),x&&sc){Q=0;break e}break;default:Ye=_r,_r=0,Us=null,cc(s,xe,_e,Ye)}}IN(),Q=aa;break}catch(it){Dp(s,it)}while(!0);return o&&s.shellSuspendCounter++,wi=Ql=null,Ar=y,q.H=j,q.A=R,or===null&&(Ur=null,mr=0,Sd()),Q}function IN(){for(;or!==null;)Ip(or)}function ON(s,o){var x=Ar;Ar|=2;var y=Rp(),j=Mp();Ur!==s||mr!==o?(su=null,au=be()+500,oc(s,o)):sc=st(s,o);e:do try{if(_r!==0&&or!==null){o=or;var R=Us;t:switch(_r){case 1:_r=0,Us=null,cc(s,o,R,1);break;case 2:case 9:if(Xg(R)){_r=0,Us=null,Op(o);break}o=function(){_r!==2&&_r!==9||Ur!==s||(_r=7),ei(s)},R.then(o,o);break e;case 3:_r=7;break e;case 4:_r=5;break e;case 7:Xg(R)?(_r=0,Us=null,Op(o)):(_r=0,Us=null,cc(s,o,R,7));break;case 5:var Q=null;switch(or.tag){case 26:Q=or.memoizedState;case 5:case 27:var xe=or;if(!Q||gy(Q)){_r=0,Us=null;var _e=xe.sibling;if(_e!==null)or=_e;else{var Ye=xe.return;Ye!==null?(or=Ye,iu(Ye)):or=null}break t}}_r=0,Us=null,cc(s,o,R,5);break;case 6:_r=0,Us=null,cc(s,o,R,6);break;case 8:Kx(),aa=6;break e;default:throw Error(n(462))}}FN();break}catch(it){Dp(s,it)}while(!0);return wi=Ql=null,q.H=y,q.A=j,Ar=x,or!==null?0:(Ur=null,mr=0,Sd(),aa)}function FN(){for(;or!==null&&!Ee();)Ip(or)}function Ip(s){var o=lp(s.alternate,s,_i);s.memoizedProps=s.pendingProps,o===null?iu(s):or=o}function Op(s){var o=s,x=o.alternate;switch(o.tag){case 15:case 0:o=tp(x,o,o.pendingProps,o.type,void 0,mr);break;case 11:o=tp(x,o,o.pendingProps,o.type.render,o.ref,mr);break;case 5:xx(o);default:cp(x,o),o=or=Fg(o,_i),o=lp(x,o,_i)}s.memoizedProps=s.pendingProps,o===null?iu(s):or=o}function cc(s,o,x,y){wi=Ql=null,xx(o),ec=null,a0=0;var j=o.return;try{if(EN(s,j,o,x,mr)){aa=1,Zd(s,an(x,s.current)),or=null;return}}catch(R){if(j!==null)throw or=j,R;aa=1,Zd(s,an(x,s.current)),or=null;return}o.flags&32768?(Nr||y===1?s=!0:sc||(mr&536870912)!==0?s=!1:(ul=s=!0,(y===2||y===9||y===3||y===6)&&(y=on.current,y!==null&&y.tag===13&&(y.flags|=16384))),Fp(o,s)):iu(o)}function iu(s){var o=s;do{if((o.flags&32768)!==0){Fp(o,ul);return}s=o.return;var x=SN(o.alternate,o,_i);if(x!==null){or=x;return}if(o=o.sibling,o!==null){or=o;return}or=o=s}while(o!==null);aa===0&&(aa=5)}function Fp(s,o){do{var x=AN(s.alternate,s);if(x!==null){x.flags&=32767,or=x;return}if(x=s.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!o&&(s=s.sibling,s!==null)){or=s;return}or=s=x}while(s!==null);aa=6,or=null}function Lp(s,o,x,y,j,R,Q,xe,_e){s.cancelPendingCommit=null;do lu();while(Ya!==0);if((Ar&6)!==0)throw Error(n(327));if(o!==null){if(o===s.current)throw Error(n(177));if(R=o.lanes|o.childLanes,R|=Hf,en(s,x,R,Q,xe,_e),s===Ur&&(or=Ur=null,mr=0),ic=o,hl=s,lc=x,qx=R,$x=j,Sp=y,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,zN(Ce,function(){return Hp(),null})):(s.callbackNode=null,s.callbackPriority=0),y=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||y){y=q.T,q.T=null,j=ce.p,ce.p=2,Q=Ar,Ar|=4;try{_N(s,o,x)}finally{Ar=Q,ce.p=j,q.T=y}}Ya=1,Bp(),Pp(),zp()}}function Bp(){if(Ya===1){Ya=0;var s=hl,o=ic,x=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||x){x=q.T,q.T=null;var y=ce.p;ce.p=2;var j=Ar;Ar|=4;try{vp(o,s);var R=dh,Q=O(s.containerInfo),xe=R.focusedElem,_e=R.selectionRange;if(Q!==xe&&xe&&xe.ownerDocument&&_(xe.ownerDocument.documentElement,xe)){if(_e!==null&&V(xe)){var Ye=_e.start,it=_e.end;if(it===void 0&&(it=Ye),"selectionStart"in xe)xe.selectionStart=Ye,xe.selectionEnd=Math.min(it,xe.value.length);else{var dt=xe.ownerDocument||document,qe=dt&&dt.defaultView||window;if(qe.getSelection){var Ze=qe.getSelection(),Ht=xe.textContent.length,Lt=Math.min(_e.start,Ht),Ir=_e.end===void 0?Lt:Math.min(_e.end,Ht);!Ze.extend&&Lt>Ir&&(Q=Ir,Ir=Lt,Lt=Q);var ze=N(xe,Lt),Ie=N(xe,Ir);if(ze&&Ie&&(Ze.rangeCount!==1||Ze.anchorNode!==ze.node||Ze.anchorOffset!==ze.offset||Ze.focusNode!==Ie.node||Ze.focusOffset!==Ie.offset)){var Ve=dt.createRange();Ve.setStart(ze.node,ze.offset),Ze.removeAllRanges(),Lt>Ir?(Ze.addRange(Ve),Ze.extend(Ie.node,Ie.offset)):(Ve.setEnd(Ie.node,Ie.offset),Ze.addRange(Ve))}}}}for(dt=[],Ze=xe;Ze=Ze.parentNode;)Ze.nodeType===1&&dt.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<dt.length;xe++){var ot=dt[xe];ot.element.scrollLeft=ot.left,ot.element.scrollTop=ot.top}}bu=!!ch,dh=ch=null}finally{Ar=j,ce.p=y,q.T=x}}s.current=o,Ya=2}}function Pp(){if(Ya===2){Ya=0;var s=hl,o=ic,x=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||x){x=q.T,q.T=null;var y=ce.p;ce.p=2;var j=Ar;Ar|=4;try{gp(s,o.alternate,o)}finally{Ar=j,ce.p=y,q.T=x}}Ya=3}}function zp(){if(Ya===4||Ya===3){Ya=0,Je();var s=hl,o=ic,x=lc,y=Sp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ya=5:(Ya=0,ic=hl=null,Up(s,s.pendingLanes));var j=s.pendingLanes;if(j===0&&(xl=null),ea(x),o=o.stateNode,ur&&typeof ur.onCommitFiberRoot=="function")try{ur.onCommitFiberRoot(qt,o,void 0,(o.current.flags&128)===128)}catch{}if(y!==null){o=q.T,j=ce.p,ce.p=2,q.T=null;try{for(var R=s.onRecoverableError,Q=0;Q<y.length;Q++){var xe=y[Q];R(xe.value,{componentStack:xe.stack})}}finally{q.T=o,ce.p=j}}(lc&3)!==0&&lu(),ei(s),j=s.pendingLanes,(x&4194090)!==0&&(j&42)!==0?s===Wx?f0++:(f0=0,Wx=s):f0=0,x0(0)}}function Up(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Xc(o)))}function lu(s){return Bp(),Pp(),zp(),Hp()}function Hp(){if(Ya!==5)return!1;var s=hl,o=qx;qx=0;var x=ea(lc),y=q.T,j=ce.p;try{ce.p=32>x?32:x,q.T=null,x=$x,$x=null;var R=hl,Q=lc;if(Ya=0,ic=hl=null,lc=0,(Ar&6)!==0)throw Error(n(331));var xe=Ar;if(Ar|=4,Ep(R.current),Np(R,R.current,Q,x),Ar=xe,x0(0,!1),ur&&typeof ur.onPostCommitFiberRoot=="function")try{ur.onPostCommitFiberRoot(qt,R)}catch{}return!0}finally{ce.p=j,q.T=y,Up(s,o)}}function Vp(s,o,x){o=an(x,o),o=Sx(s.stateNode,o,2),s=sl(s,o,2),s!==null&&(Jr(s,2),ei(s))}function Br(s,o,x){if(s.tag===3)Vp(s,s,x);else for(;o!==null;){if(o.tag===3){Vp(o,s,x);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(xl===null||!xl.has(y))){s=an(x,s),x=q1(2),y=sl(o,x,2),y!==null&&($1(x,y,o,s),Jr(y,2),ei(y));break}}o=o.return}}function Jx(s,o,x){var y=s.pingCache;if(y===null){y=s.pingCache=new RN;var j=new Set;y.set(o,j)}else j=y.get(o),j===void 0&&(j=new Set,y.set(o,j));j.has(x)||(Vx=!0,j.add(x),s=LN.bind(null,s,o,x),o.then(s,s))}function LN(s,o,x){var y=s.pingCache;y!==null&&y.delete(o),s.pingedLanes|=s.suspendedLanes&x,s.warmLanes&=~x,Ur===s&&(mr&x)===x&&(aa===4||aa===3&&(mr&62914560)===mr&&300>be()-Xx?(Ar&2)===0&&oc(s,0):Gx|=x,nc===mr&&(nc=0)),ei(s)}function Gp(s,o){o===0&&(o=Bn()),s=Go(s,o),s!==null&&(Jr(s,o),ei(s))}function BN(s){var o=s.memoizedState,x=0;o!==null&&(x=o.retryLane),Gp(s,x)}function PN(s,o){var x=0;switch(s.tag){case 13:var y=s.stateNode,j=s.memoizedState;j!==null&&(x=j.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(n(314))}y!==null&&y.delete(o),Gp(s,x)}function zN(s,o){return Ae(s,o)}var ou=null,dc=null,eh=!1,cu=!1,th=!1,no=0;function ei(s){s!==dc&&s.next===null&&(dc===null?ou=dc=s:dc=dc.next=s),cu=!0,eh||(eh=!0,HN())}function x0(s,o){if(!th&&cu){th=!0;do for(var x=!1,y=ou;y!==null;){if(s!==0){var j=y.pendingLanes;if(j===0)var R=0;else{var Q=y.suspendedLanes,xe=y.pingedLanes;R=(1<<31-Yt(42|s)+1)-1,R&=j&~(Q&~xe),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(x=!0,$p(y,R))}else R=mr,R=vt(y,y===Ur?R:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(R&3)===0||st(y,R)||(x=!0,$p(y,R));y=y.next}while(x);th=!1}}function UN(){Yp()}function Yp(){cu=eh=!1;var s=0;no!==0&&(KN()&&(s=no),no=0);for(var o=be(),x=null,y=ou;y!==null;){var j=y.next,R=Xp(y,o);R===0?(y.next=null,x===null?ou=j:x.next=j,j===null&&(dc=x)):(x=y,(s!==0||(R&3)!==0)&&(cu=!0)),y=j}x0(s)}function Xp(s,o){for(var x=s.suspendedLanes,y=s.pingedLanes,j=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var Q=31-Yt(R),xe=1<<Q,_e=j[Q];_e===-1?((xe&x)===0||(xe&y)!==0)&&(j[Q]=kt(xe,o)):_e<=o&&(s.expiredLanes|=xe),R&=~xe}if(o=Ur,x=mr,x=vt(s,s===o?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y=s.callbackNode,x===0||s===o&&(_r===2||_r===9)||s.cancelPendingCommit!==null)return y!==null&&y!==null&&Le(y),s.callbackNode=null,s.callbackPriority=0;if((x&3)===0||st(s,x)){if(o=x&-x,o===s.callbackPriority)return o;switch(y!==null&&Le(y),ea(x)){case 2:case 8:x=at;break;case 32:x=Ce;break;case 268435456:x=ut;break;default:x=Ce}return y=qp.bind(null,s),x=Ae(x,y),s.callbackPriority=o,s.callbackNode=x,o}return y!==null&&y!==null&&Le(y),s.callbackPriority=2,s.callbackNode=null,2}function qp(s,o){if(Ya!==0&&Ya!==5)return s.callbackNode=null,s.callbackPriority=0,null;var x=s.callbackNode;if(lu()&&s.callbackNode!==x)return null;var y=mr;return y=vt(s,s===Ur?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y===0?null:(_p(s,y,o),Xp(s,be()),s.callbackNode!=null&&s.callbackNode===x?qp.bind(null,s):null)}function $p(s,o){if(lu())return null;_p(s,o,!0)}function HN(){QN(function(){(Ar&6)!==0?Ae(fe,UN):Yp()})}function rh(){return no===0&&(no=Os()),no}function Wp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Oo(""+s)}function Kp(s,o){var x=o.ownerDocument.createElement("input");return x.name=o.name,x.value=o.value,s.id&&x.setAttribute("form",s.id),o.parentNode.insertBefore(x,o),s=new FormData(s),x.parentNode.removeChild(x),s}function VN(s,o,x,y,j){if(o==="submit"&&x&&x.stateNode===j){var R=Wp((j[zr]||null).action),Q=y.submitter;Q&&(o=(o=Q[zr]||null)?Wp(o.formAction):Q.getAttribute("formAction"),o!==null&&(R=o,Q=null));var xe=new Xn("action","action",null,y,j);s.push({event:xe,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(no!==0){var _e=Q?Kp(j,Q):new FormData(j);Nx(x,{pending:!0,data:_e,method:j.method,action:R},null,_e)}}else typeof R=="function"&&(xe.preventDefault(),_e=Q?Kp(j,Q):new FormData(j),Nx(x,{pending:!0,data:_e,method:j.method,action:R},R,_e))},currentTarget:j}]})}}for(var ah=0;ah<Wn.length;ah++){var sh=Wn[ah],GN=sh.toLowerCase(),YN=sh[0].toUpperCase()+sh.slice(1);Ls(GN,"on"+YN)}Ls($t,"onAnimationEnd"),Ls(Va,"onAnimationIteration"),Ls(Ss,"onAnimationStart"),Ls("dblclick","onDoubleClick"),Ls("focusin","onFocus"),Ls("focusout","onBlur"),Ls(rs,"onTransitionRun"),Ls(Sr,"onTransitionStart"),Ls(Ta,"onTransitionCancel"),Ls(as,"onTransitionEnd"),xt("onMouseEnter",["mouseout","mouseover"]),xt("onMouseLeave",["mouseout","mouseover"]),xt("onPointerEnter",["pointerout","pointerover"]),xt("onPointerLeave",["pointerout","pointerover"]),ct("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ct("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ct("onBeforeInput",["compositionend","keypress","textInput","paste"]),ct("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ct("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ct("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var h0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),XN=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(h0));function Zp(s,o){o=(o&4)!==0;for(var x=0;x<s.length;x++){var y=s[x],j=y.event;y=y.listeners;e:{var R=void 0;if(o)for(var Q=y.length-1;0<=Q;Q--){var xe=y[Q],_e=xe.instance,Ye=xe.currentTarget;if(xe=xe.listener,_e!==R&&j.isPropagationStopped())break e;R=xe,j.currentTarget=Ye;try{R(j)}catch(it){Kd(it)}j.currentTarget=null,R=_e}else for(Q=0;Q<y.length;Q++){if(xe=y[Q],_e=xe.instance,Ye=xe.currentTarget,xe=xe.listener,_e!==R&&j.isPropagationStopped())break e;R=xe,j.currentTarget=Ye;try{R(j)}catch(it){Kd(it)}j.currentTarget=null,R=_e}}}}function cr(s,o){var x=o[ya];x===void 0&&(x=o[ya]=new Set);var y=s+"__bubble";x.has(y)||(Qp(o,s,2,!1),x.add(y))}function nh(s,o,x){var y=0;o&&(y|=4),Qp(x,s,y,o)}var du="_reactListening"+Math.random().toString(36).slice(2);function ih(s){if(!s[du]){s[du]=!0,Xe.forEach(function(x){x!=="selectionchange"&&(XN.has(x)||nh(x,!1,s),nh(x,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[du]||(o[du]=!0,nh("selectionchange",!1,o))}}function Qp(s,o,x,y){switch(Ny(o)){case 2:var j=bk;break;case 8:j=vk;break;default:j=vh}x=j.bind(null,o,x,s),j=void 0,!Wt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(j=!0),y?j!==void 0?s.addEventListener(o,x,{capture:!0,passive:j}):s.addEventListener(o,x,!0):j!==void 0?s.addEventListener(o,x,{passive:j}):s.addEventListener(o,x,!1)}function lh(s,o,x,y,j){var R=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var Q=y.tag;if(Q===3||Q===4){var xe=y.stateNode.containerInfo;if(xe===j)break;if(Q===4)for(Q=y.return;Q!==null;){var _e=Q.tag;if((_e===3||_e===4)&&Q.stateNode.containerInfo===j)return;Q=Q.return}for(;xe!==null;){if(Q=Ne(xe),Q===null)return;if(_e=Q.tag,_e===5||_e===6||_e===26||_e===27){y=R=Q;continue e}xe=xe.parentNode}}y=y.return}vn(function(){var Ye=R,it=Gi(x),dt=[];e:{var qe=pi.get(s);if(qe!==void 0){var Ze=Xn,Ht=s;switch(s){case"keypress":if(Fo(x)===0)break e;case"keydown":case"keyup":Ze=Fc;break;case"focusin":Ht="focus",Ze=$i;break;case"focusout":Ht="blur",Ze=$i;break;case"beforeblur":case"afterblur":Ze=$i;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=wd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=Cr;break;case $t:case Va:case Ss:Ze=If;break;case as:Ze=Bf;break;case"scroll":case"scrollend":Ze=es;break;case"wheel":Ze=mi;break;case"copy":case"cut":case"paste":Ze=ar;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Vl;break;case"toggle":case"beforetoggle":Ze=Pf}var Lt=(o&4)!==0,Ir=!Lt&&(s==="scroll"||s==="scrollend"),ze=Lt?qe!==null?qe+"Capture":null:qe;Lt=[];for(var Ie=Ye,Ve;Ie!==null;){var ot=Ie;if(Ve=ot.stateNode,ot=ot.tag,ot!==5&&ot!==26&&ot!==27||Ve===null||ze===null||(ot=Ot(Ie,ze),ot!=null&&Lt.push(m0(Ie,ot,Ve))),Ir)break;Ie=Ie.return}0<Lt.length&&(qe=new Ze(qe,Ht,null,x,it),dt.push({event:qe,listeners:Lt}))}}if((o&7)===0){e:{if(qe=s==="mouseover"||s==="pointerover",Ze=s==="mouseout"||s==="pointerout",qe&&x!==Bl&&(Ht=x.relatedTarget||x.fromElement)&&(Ne(Ht)||Ht[tn]))break e;if((Ze||qe)&&(qe=it.window===it?it:(qe=it.ownerDocument)?qe.defaultView||qe.parentWindow:window,Ze?(Ht=x.relatedTarget||x.toElement,Ze=Ye,Ht=Ht?Ne(Ht):null,Ht!==null&&(Ir=d(Ht),Lt=Ht.tag,Ht!==Ir||Lt!==5&&Lt!==27&&Lt!==6)&&(Ht=null)):(Ze=null,Ht=Ye),Ze!==Ht)){if(Lt=wd,ot="onMouseLeave",ze="onMouseEnter",Ie="mouse",(s==="pointerout"||s==="pointerover")&&(Lt=Vl,ot="onPointerLeave",ze="onPointerEnter",Ie="pointer"),Ir=Ze==null?qe:Ge(Ze),Ve=Ht==null?qe:Ge(Ht),qe=new Lt(ot,Ie+"leave",Ze,x,it),qe.target=Ir,qe.relatedTarget=Ve,ot=null,Ne(it)===Ye&&(Lt=new Lt(ze,Ie+"enter",Ht,x,it),Lt.target=Ve,Lt.relatedTarget=Ir,ot=Lt),Ir=ot,Ze&&Ht)t:{for(Lt=Ze,ze=Ht,Ie=0,Ve=Lt;Ve;Ve=uc(Ve))Ie++;for(Ve=0,ot=ze;ot;ot=uc(ot))Ve++;for(;0<Ie-Ve;)Lt=uc(Lt),Ie--;for(;0<Ve-Ie;)ze=uc(ze),Ve--;for(;Ie--;){if(Lt===ze||ze!==null&&Lt===ze.alternate)break t;Lt=uc(Lt),ze=uc(ze)}Lt=null}else Lt=null;Ze!==null&&Jp(dt,qe,Ze,Lt,!1),Ht!==null&&Ir!==null&&Jp(dt,Ir,Ht,Lt,!0)}}e:{if(qe=Ye?Ge(Ye):window,Ze=qe.nodeName&&qe.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&qe.type==="file")var St=Ed;else if(Xl(qe))if(zc)St=c;else{St=J;var lr=Ho}else Ze=qe.nodeName,!Ze||Ze.toLowerCase()!=="input"||qe.type!=="checkbox"&&qe.type!=="radio"?Ye&&Dt(Ye.elementType)&&(St=Ed):St=i;if(St&&(St=St(s,Ye))){ps(dt,St,x,it);break e}lr&&lr(s,qe,Ye),s==="focusout"&&Ye&&qe.type==="number"&&Ye.memoizedProps.value!=null&&He(qe,"number",qe.value)}switch(lr=Ye?Ge(Ye):window,s){case"focusin":(Xl(lr)||lr.contentEditable==="true")&&(ue=lr,je=Ye,De=null);break;case"focusout":De=je=ue=null;break;case"mousedown":Me=!0;break;case"contextmenu":case"mouseup":case"dragend":Me=!1,Ue(dt,x,it);break;case"selectionchange":if(ee)break;case"keydown":case"keyup":Ue(dt,x,it)}var Rt;if(Gl)e:{switch(s){case"compositionstart":var Bt="onCompositionStart";break e;case"compositionend":Bt="onCompositionEnd";break e;case"compositionupdate":Bt="onCompositionUpdate";break e}Bt=void 0}else Zi?gi(s,x)&&(Bt="onCompositionEnd"):s==="keydown"&&x.keyCode===229&&(Bt="onCompositionStart");Bt&&(Bc&&x.locale!=="ko"&&(Zi||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&Zi&&(Rt=Vn()):(Hn=it,Pl="value"in Hn?Hn.value:Hn.textContent,Zi=!0)),lr=uu(Ye,Bt),0<lr.length&&(Bt=new Ul(Bt,s,null,x,it),dt.push({event:Bt,listeners:lr}),Rt?Bt.data=Rt:(Rt=zo(x),Rt!==null&&(Bt.data=Rt)))),(Rt=Lc?Yl(s,x):zf(s,x))&&(Bt=uu(Ye,"onBeforeInput"),0<Bt.length&&(lr=new Ul("onBeforeInput","beforeinput",null,x,it),dt.push({event:lr,listeners:Bt}),lr.data=Rt)),VN(dt,s,Ye,x,it)}Zp(dt,o)})}function m0(s,o,x){return{instance:s,listener:o,currentTarget:x}}function uu(s,o){for(var x=o+"Capture",y=[];s!==null;){var j=s,R=j.stateNode;if(j=j.tag,j!==5&&j!==26&&j!==27||R===null||(j=Ot(s,x),j!=null&&y.unshift(m0(s,j,R)),j=Ot(s,o),j!=null&&y.push(m0(s,j,R))),s.tag===3)return y;s=s.return}return[]}function uc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Jp(s,o,x,y,j){for(var R=o._reactName,Q=[];x!==null&&x!==y;){var xe=x,_e=xe.alternate,Ye=xe.stateNode;if(xe=xe.tag,_e!==null&&_e===y)break;xe!==5&&xe!==26&&xe!==27||Ye===null||(_e=Ye,j?(Ye=Ot(x,R),Ye!=null&&Q.unshift(m0(x,Ye,_e))):j||(Ye=Ot(x,R),Ye!=null&&Q.push(m0(x,Ye,_e)))),x=x.return}Q.length!==0&&s.push({event:o,listeners:Q})}var qN=/\r\n?/g,$N=/\u0000|\uFFFD/g;function ey(s){return(typeof s=="string"?s:""+s).replace(qN,`
`).replace($N,"")}function ty(s,o){return o=ey(o),ey(s)===o}function fu(){}function Mr(s,o,x,y,j,R){switch(x){case"children":typeof y=="string"?o==="body"||o==="textarea"&&y===""||Aa(s,y):(typeof y=="number"||typeof y=="bigint")&&o!=="body"&&Aa(s,""+y);break;case"className":kr(s,"class",y);break;case"tabIndex":kr(s,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(s,x,y);break;case"style":gs(s,y,R);break;case"data":if(o!=="object"){kr(s,"data",y);break}case"src":case"href":if(y===""&&(o!=="a"||x!=="href")){s.removeAttribute(x);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=Oo(""+y),s.setAttribute(x,y);break;case"action":case"formAction":if(typeof y=="function"){s.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(x==="formAction"?(o!=="input"&&Mr(s,o,"name",j.name,j,null),Mr(s,o,"formEncType",j.formEncType,j,null),Mr(s,o,"formMethod",j.formMethod,j,null),Mr(s,o,"formTarget",j.formTarget,j,null)):(Mr(s,o,"encType",j.encType,j,null),Mr(s,o,"method",j.method,j,null),Mr(s,o,"target",j.target,j,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=Oo(""+y),s.setAttribute(x,y);break;case"onClick":y!=null&&(s.onclick=fu);break;case"onScroll":y!=null&&cr("scroll",s);break;case"onScrollEnd":y!=null&&cr("scrollend",s);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(x=y.__html,x!=null){if(j.children!=null)throw Error(n(60));s.innerHTML=x}}break;case"multiple":s.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":s.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){s.removeAttribute("xlink:href");break}x=Oo(""+y),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""+y):s.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""):s.removeAttribute(x);break;case"capture":case"download":y===!0?s.setAttribute(x,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,y):s.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?s.setAttribute(x,y):s.removeAttribute(x);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?s.removeAttribute(x):s.setAttribute(x,y);break;case"popover":cr("beforetoggle",s),cr("toggle",s),tt(s,"popover",y);break;case"xlinkActuate":zt(s,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":zt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":zt(s,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":zt(s,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":zt(s,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":zt(s,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":zt(s,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":zt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":zt(s,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":tt(s,"is",y);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Gr.get(x)||x,tt(s,x,y))}}function oh(s,o,x,y,j,R){switch(x){case"style":gs(s,y,R);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(n(61));if(x=y.__html,x!=null){if(j.children!=null)throw Error(n(60));s.innerHTML=x}}break;case"children":typeof y=="string"?Aa(s,y):(typeof y=="number"||typeof y=="bigint")&&Aa(s,""+y);break;case"onScroll":y!=null&&cr("scroll",s);break;case"onScrollEnd":y!=null&&cr("scrollend",s);break;case"onClick":y!=null&&(s.onclick=fu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!We.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(j=x.endsWith("Capture"),o=x.slice(2,j?x.length-7:void 0),R=s[zr]||null,R=R!=null?R[x]:null,typeof R=="function"&&s.removeEventListener(o,R,j),typeof y=="function")){typeof R!="function"&&R!==null&&(x in s?s[x]=null:s.hasAttribute(x)&&s.removeAttribute(x)),s.addEventListener(o,y,j);break e}x in s?s[x]=y:y===!0?s.setAttribute(x,""):tt(s,x,y)}}}function Xa(s,o,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":cr("error",s),cr("load",s);var y=!1,j=!1,R;for(R in x)if(x.hasOwnProperty(R)){var Q=x[R];if(Q!=null)switch(R){case"src":y=!0;break;case"srcSet":j=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Mr(s,o,R,Q,x,null)}}j&&Mr(s,o,"srcSet",x.srcSet,x,null),y&&Mr(s,o,"src",x.src,x,null);return;case"input":cr("invalid",s);var xe=R=Q=j=null,_e=null,Ye=null;for(y in x)if(x.hasOwnProperty(y)){var it=x[y];if(it!=null)switch(y){case"name":j=it;break;case"type":Q=it;break;case"checked":_e=it;break;case"defaultChecked":Ye=it;break;case"value":R=it;break;case"defaultValue":xe=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(n(137,o));break;default:Mr(s,o,y,it,x,null)}}Sa(s,R,xe,_e,Ye,Q,j,!1),Mo(s);return;case"select":cr("invalid",s),y=Q=R=null;for(j in x)if(x.hasOwnProperty(j)&&(xe=x[j],xe!=null))switch(j){case"value":R=xe;break;case"defaultValue":Q=xe;break;case"multiple":y=xe;default:Mr(s,o,j,xe,x,null)}o=R,x=Q,s.multiple=!!y,o!=null?ye(s,!!y,o,!1):x!=null&&ye(s,!!y,x,!0);return;case"textarea":cr("invalid",s),R=j=y=null;for(Q in x)if(x.hasOwnProperty(Q)&&(xe=x[Q],xe!=null))switch(Q){case"value":y=xe;break;case"defaultValue":j=xe;break;case"children":R=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(n(91));break;default:Mr(s,o,Q,xe,x,null)}da(s,y,j,R),Mo(s);return;case"option":for(_e in x)if(x.hasOwnProperty(_e)&&(y=x[_e],y!=null))switch(_e){case"selected":s.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Mr(s,o,_e,y,x,null)}return;case"dialog":cr("beforetoggle",s),cr("toggle",s),cr("cancel",s),cr("close",s);break;case"iframe":case"object":cr("load",s);break;case"video":case"audio":for(y=0;y<h0.length;y++)cr(h0[y],s);break;case"image":cr("error",s),cr("load",s);break;case"details":cr("toggle",s);break;case"embed":case"source":case"link":cr("error",s),cr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ye in x)if(x.hasOwnProperty(Ye)&&(y=x[Ye],y!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,o));default:Mr(s,o,Ye,y,x,null)}return;default:if(Dt(o)){for(it in x)x.hasOwnProperty(it)&&(y=x[it],y!==void 0&&oh(s,o,it,y,x,void 0));return}}for(xe in x)x.hasOwnProperty(xe)&&(y=x[xe],y!=null&&Mr(s,o,xe,y,x,null))}function WN(s,o,x,y){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var j=null,R=null,Q=null,xe=null,_e=null,Ye=null,it=null;for(Ze in x){var dt=x[Ze];if(x.hasOwnProperty(Ze)&&dt!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":_e=dt;default:y.hasOwnProperty(Ze)||Mr(s,o,Ze,null,y,dt)}}for(var qe in y){var Ze=y[qe];if(dt=x[qe],y.hasOwnProperty(qe)&&(Ze!=null||dt!=null))switch(qe){case"type":R=Ze;break;case"name":j=Ze;break;case"checked":Ye=Ze;break;case"defaultChecked":it=Ze;break;case"value":Q=Ze;break;case"defaultValue":xe=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(n(137,o));break;default:Ze!==dt&&Mr(s,o,qe,Ze,y,dt)}}jr(s,Q,xe,_e,Ye,it,R,j);return;case"select":Ze=Q=xe=qe=null;for(R in x)if(_e=x[R],x.hasOwnProperty(R)&&_e!=null)switch(R){case"value":break;case"multiple":Ze=_e;default:y.hasOwnProperty(R)||Mr(s,o,R,null,y,_e)}for(j in y)if(R=y[j],_e=x[j],y.hasOwnProperty(j)&&(R!=null||_e!=null))switch(j){case"value":qe=R;break;case"defaultValue":xe=R;break;case"multiple":Q=R;default:R!==_e&&Mr(s,o,j,R,y,_e)}o=xe,x=Q,y=Ze,qe!=null?ye(s,!!x,qe,!1):!!y!=!!x&&(o!=null?ye(s,!!x,o,!0):ye(s,!!x,x?[]:"",!1));return;case"textarea":Ze=qe=null;for(xe in x)if(j=x[xe],x.hasOwnProperty(xe)&&j!=null&&!y.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Mr(s,o,xe,null,y,j)}for(Q in y)if(j=y[Q],R=x[Q],y.hasOwnProperty(Q)&&(j!=null||R!=null))switch(Q){case"value":qe=j;break;case"defaultValue":Ze=j;break;case"children":break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(n(91));break;default:j!==R&&Mr(s,o,Q,j,y,R)}Tt(s,qe,Ze);return;case"option":for(var Ht in x)if(qe=x[Ht],x.hasOwnProperty(Ht)&&qe!=null&&!y.hasOwnProperty(Ht))switch(Ht){case"selected":s.selected=!1;break;default:Mr(s,o,Ht,null,y,qe)}for(_e in y)if(qe=y[_e],Ze=x[_e],y.hasOwnProperty(_e)&&qe!==Ze&&(qe!=null||Ze!=null))switch(_e){case"selected":s.selected=qe&&typeof qe!="function"&&typeof qe!="symbol";break;default:Mr(s,o,_e,qe,y,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Lt in x)qe=x[Lt],x.hasOwnProperty(Lt)&&qe!=null&&!y.hasOwnProperty(Lt)&&Mr(s,o,Lt,null,y,qe);for(Ye in y)if(qe=y[Ye],Ze=x[Ye],y.hasOwnProperty(Ye)&&qe!==Ze&&(qe!=null||Ze!=null))switch(Ye){case"children":case"dangerouslySetInnerHTML":if(qe!=null)throw Error(n(137,o));break;default:Mr(s,o,Ye,qe,y,Ze)}return;default:if(Dt(o)){for(var Ir in x)qe=x[Ir],x.hasOwnProperty(Ir)&&qe!==void 0&&!y.hasOwnProperty(Ir)&&oh(s,o,Ir,void 0,y,qe);for(it in y)qe=y[it],Ze=x[it],!y.hasOwnProperty(it)||qe===Ze||qe===void 0&&Ze===void 0||oh(s,o,it,qe,y,Ze);return}}for(var ze in x)qe=x[ze],x.hasOwnProperty(ze)&&qe!=null&&!y.hasOwnProperty(ze)&&Mr(s,o,ze,null,y,qe);for(dt in y)qe=y[dt],Ze=x[dt],!y.hasOwnProperty(dt)||qe===Ze||qe==null&&Ze==null||Mr(s,o,dt,qe,y,Ze)}var ch=null,dh=null;function xu(s){return s.nodeType===9?s:s.ownerDocument}function ry(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ay(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function uh(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fh=null;function KN(){var s=window.event;return s&&s.type==="popstate"?s===fh?!1:(fh=s,!0):(fh=null,!1)}var sy=typeof setTimeout=="function"?setTimeout:void 0,ZN=typeof clearTimeout=="function"?clearTimeout:void 0,ny=typeof Promise=="function"?Promise:void 0,QN=typeof queueMicrotask=="function"?queueMicrotask:typeof ny<"u"?function(s){return ny.resolve(null).then(s).catch(JN)}:sy;function JN(s){setTimeout(function(){throw s})}function gl(s){return s==="head"}function iy(s,o){var x=o,y=0,j=0;do{var R=x.nextSibling;if(s.removeChild(x),R&&R.nodeType===8)if(x=R.data,x==="/$"){if(0<y&&8>y){x=y;var Q=s.ownerDocument;if(x&1&&g0(Q.documentElement),x&2&&g0(Q.body),x&4)for(x=Q.head,g0(x),Q=x.firstChild;Q;){var xe=Q.nextSibling,_e=Q.nodeName;Q[ge]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&Q.rel.toLowerCase()==="stylesheet"||x.removeChild(Q),Q=xe}}if(j===0){s.removeChild(R),j0(o);return}j--}else x==="$"||x==="$?"||x==="$!"?j++:y=x.charCodeAt(0)-48;else y=0;x=R}while(x);j0(o)}function xh(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var x=o;switch(o=o.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":xh(x),ve(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}s.removeChild(x)}}function ek(s,o,x,y){for(;s.nodeType===1;){var j=x;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!y&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(y){if(!s[ge])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==j.rel||s.getAttribute("href")!==(j.href==null||j.href===""?null:j.href)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin)||s.getAttribute("title")!==(j.title==null?null:j.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(j.src==null?null:j.src)||s.getAttribute("type")!==(j.type==null?null:j.type)||s.getAttribute("crossorigin")!==(j.crossOrigin==null?null:j.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var R=j.name==null?null:""+j.name;if(j.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=jn(s.nextSibling),s===null)break}return null}function tk(s,o,x){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!x||(s=jn(s.nextSibling),s===null))return null;return s}function hh(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function rk(s,o){var x=s.ownerDocument;if(s.data!=="$?"||x.readyState==="complete")o();else{var y=function(){o(),x.removeEventListener("DOMContentLoaded",y)};x.addEventListener("DOMContentLoaded",y),s._reactRetry=y}}function jn(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var mh=null;function ly(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var x=s.data;if(x==="$"||x==="$!"||x==="$?"){if(o===0)return s;o--}else x==="/$"&&o++}s=s.previousSibling}return null}function oy(s,o,x){switch(o=xu(x),s){case"html":if(s=o.documentElement,!s)throw Error(n(452));return s;case"head":if(s=o.head,!s)throw Error(n(453));return s;case"body":if(s=o.body,!s)throw Error(n(454));return s;default:throw Error(n(451))}}function g0(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ve(s)}var dn=new Map,cy=new Set;function hu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Ti=ce.d;ce.d={f:ak,r:sk,D:nk,C:ik,L:lk,m:ok,X:dk,S:ck,M:uk};function ak(){var s=Ti.f(),o=nu();return s||o}function sk(s){var o=Se(s);o!==null&&o.tag===5&&o.type==="form"?_1(o):Ti.r(s)}var fc=typeof document>"u"?null:document;function dy(s,o,x){var y=fc;if(y&&typeof o=="string"&&o){var j=Ca(o);j='link[rel="'+s+'"][href="'+j+'"]',typeof x=="string"&&(j+='[crossorigin="'+x+'"]'),cy.has(j)||(cy.add(j),s={rel:s,crossOrigin:x,href:o},y.querySelector(j)===null&&(o=y.createElement("link"),Xa(o,"link",s),Fe(o),y.head.appendChild(o)))}}function nk(s){Ti.D(s),dy("dns-prefetch",s,null)}function ik(s,o){Ti.C(s,o),dy("preconnect",s,o)}function lk(s,o,x){Ti.L(s,o,x);var y=fc;if(y&&s&&o){var j='link[rel="preload"][as="'+Ca(o)+'"]';o==="image"&&x&&x.imageSrcSet?(j+='[imagesrcset="'+Ca(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(j+='[imagesizes="'+Ca(x.imageSizes)+'"]')):j+='[href="'+Ca(s)+'"]';var R=j;switch(o){case"style":R=xc(s);break;case"script":R=hc(s)}dn.has(R)||(s=w({rel:"preload",href:o==="image"&&x&&x.imageSrcSet?void 0:s,as:o},x),dn.set(R,s),y.querySelector(j)!==null||o==="style"&&y.querySelector(p0(R))||o==="script"&&y.querySelector(y0(R))||(o=y.createElement("link"),Xa(o,"link",s),Fe(o),y.head.appendChild(o)))}}function ok(s,o){Ti.m(s,o);var x=fc;if(x&&s){var y=o&&typeof o.as=="string"?o.as:"script",j='link[rel="modulepreload"][as="'+Ca(y)+'"][href="'+Ca(s)+'"]',R=j;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=hc(s)}if(!dn.has(R)&&(s=w({rel:"modulepreload",href:s},o),dn.set(R,s),x.querySelector(j)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(y0(R)))return}y=x.createElement("link"),Xa(y,"link",s),Fe(y),x.head.appendChild(y)}}}function ck(s,o,x){Ti.S(s,o,x);var y=fc;if(y&&s){var j=rt(y).hoistableStyles,R=xc(s);o=o||"default";var Q=j.get(R);if(!Q){var xe={loading:0,preload:null};if(Q=y.querySelector(p0(R)))xe.loading=5;else{s=w({rel:"stylesheet",href:s,"data-precedence":o},x),(x=dn.get(R))&&gh(s,x);var _e=Q=y.createElement("link");Fe(_e),Xa(_e,"link",s),_e._p=new Promise(function(Ye,it){_e.onload=Ye,_e.onerror=it}),_e.addEventListener("load",function(){xe.loading|=1}),_e.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,mu(Q,o,y)}Q={type:"stylesheet",instance:Q,count:1,state:xe},j.set(R,Q)}}}function dk(s,o){Ti.X(s,o);var x=fc;if(x&&s){var y=rt(x).hoistableScripts,j=hc(s),R=y.get(j);R||(R=x.querySelector(y0(j)),R||(s=w({src:s,async:!0},o),(o=dn.get(j))&&ph(s,o),R=x.createElement("script"),Fe(R),Xa(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(j,R))}}function uk(s,o){Ti.M(s,o);var x=fc;if(x&&s){var y=rt(x).hoistableScripts,j=hc(s),R=y.get(j);R||(R=x.querySelector(y0(j)),R||(s=w({src:s,async:!0,type:"module"},o),(o=dn.get(j))&&ph(s,o),R=x.createElement("script"),Fe(R),Xa(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(j,R))}}function uy(s,o,x,y){var j=(j=re.current)?hu(j):null;if(!j)throw Error(n(446));switch(s){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(o=xc(x.href),x=rt(j).hoistableStyles,y=x.get(o),y||(y={type:"style",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){s=xc(x.href);var R=rt(j).hoistableStyles,Q=R.get(s);if(Q||(j=j.ownerDocument||j,Q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,Q),(R=j.querySelector(p0(s)))&&!R._p&&(Q.instance=R,Q.state.loading=5),dn.has(s)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},dn.set(s,x),R||fk(j,s,x,Q.state))),o&&y===null)throw Error(n(528,""));return Q}if(o&&y!==null)throw Error(n(529,""));return null;case"script":return o=x.async,x=x.src,typeof x=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=hc(x),x=rt(j).hoistableScripts,y=x.get(o),y||(y={type:"script",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,s))}}function xc(s){return'href="'+Ca(s)+'"'}function p0(s){return'link[rel="stylesheet"]['+s+"]"}function fy(s){return w({},s,{"data-precedence":s.precedence,precedence:null})}function fk(s,o,x,y){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?y.loading=1:(o=s.createElement("link"),y.preload=o,o.addEventListener("load",function(){return y.loading|=1}),o.addEventListener("error",function(){return y.loading|=2}),Xa(o,"link",x),Fe(o),s.head.appendChild(o))}function hc(s){return'[src="'+Ca(s)+'"]'}function y0(s){return"script[async]"+s}function xy(s,o,x){if(o.count++,o.instance===null)switch(o.type){case"style":var y=s.querySelector('style[data-href~="'+Ca(x.href)+'"]');if(y)return o.instance=y,Fe(y),y;var j=w({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return y=(s.ownerDocument||s).createElement("style"),Fe(y),Xa(y,"style",j),mu(y,x.precedence,s),o.instance=y;case"stylesheet":j=xc(x.href);var R=s.querySelector(p0(j));if(R)return o.state.loading|=4,o.instance=R,Fe(R),R;y=fy(x),(j=dn.get(j))&&gh(y,j),R=(s.ownerDocument||s).createElement("link"),Fe(R);var Q=R;return Q._p=new Promise(function(xe,_e){Q.onload=xe,Q.onerror=_e}),Xa(R,"link",y),o.state.loading|=4,mu(R,x.precedence,s),o.instance=R;case"script":return R=hc(x.src),(j=s.querySelector(y0(R)))?(o.instance=j,Fe(j),j):(y=x,(j=dn.get(R))&&(y=w({},x),ph(y,j)),s=s.ownerDocument||s,j=s.createElement("script"),Fe(j),Xa(j,"link",y),s.head.appendChild(j),o.instance=j);case"void":return null;default:throw Error(n(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(y=o.instance,o.state.loading|=4,mu(y,x.precedence,s));return o.instance}function mu(s,o,x){for(var y=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),j=y.length?y[y.length-1]:null,R=j,Q=0;Q<y.length;Q++){var xe=y[Q];if(xe.dataset.precedence===o)R=xe;else if(R!==j)break}R?R.parentNode.insertBefore(s,R.nextSibling):(o=x.nodeType===9?x.head:x,o.insertBefore(s,o.firstChild))}function gh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function ph(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var gu=null;function hy(s,o,x){if(gu===null){var y=new Map,j=gu=new Map;j.set(x,y)}else j=gu,y=j.get(x),y||(y=new Map,j.set(x,y));if(y.has(s))return y;for(y.set(s,null),x=x.getElementsByTagName(s),j=0;j<x.length;j++){var R=x[j];if(!(R[ge]||R[pa]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var Q=R.getAttribute(o)||"";Q=s+Q;var xe=y.get(Q);xe?xe.push(R):y.set(Q,[R])}}return y}function my(s,o,x){s=s.ownerDocument||s,s.head.insertBefore(x,o==="title"?s.querySelector("head > title"):null)}function xk(s,o,x){if(x===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function gy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var b0=null;function hk(){}function mk(s,o,x){if(b0===null)throw Error(n(475));var y=b0;if(o.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var j=xc(x.href),R=s.querySelector(p0(j));if(R){s=R._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(y.count++,y=pu.bind(y),s.then(y,y)),o.state.loading|=4,o.instance=R,Fe(R);return}R=s.ownerDocument||s,x=fy(x),(j=dn.get(j))&&gh(x,j),R=R.createElement("link"),Fe(R);var Q=R;Q._p=new Promise(function(xe,_e){Q.onload=xe,Q.onerror=_e}),Xa(R,"link",x),o.instance=R}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(y.count++,o=pu.bind(y),s.addEventListener("load",o),s.addEventListener("error",o))}}function gk(){if(b0===null)throw Error(n(475));var s=b0;return s.stylesheets&&s.count===0&&yh(s,s.stylesheets),0<s.count?function(o){var x=setTimeout(function(){if(s.stylesheets&&yh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(x)}}:null}function pu(){if(this.count--,this.count===0){if(this.stylesheets)yh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var yu=null;function yh(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,yu=new Map,o.forEach(pk,s),yu=null,pu.call(s))}function pk(s,o){if(!(o.state.loading&4)){var x=yu.get(s);if(x)var y=x.get(null);else{x=new Map,yu.set(s,x);for(var j=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<j.length;R++){var Q=j[R];(Q.nodeName==="LINK"||Q.getAttribute("media")!=="not all")&&(x.set(Q.dataset.precedence,Q),y=Q)}y&&x.set(null,y)}j=o.instance,Q=j.getAttribute("data-precedence"),R=x.get(Q)||y,R===y&&x.set(null,j),x.set(Q,j),this.count++,y=pu.bind(this),j.addEventListener("load",y),j.addEventListener("error",y),R?R.parentNode.insertBefore(j,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(j,s.firstChild)),o.state.loading|=4}}var v0={$$typeof:T,Provider:null,Consumer:null,_currentValue:pe,_currentValue2:pe,_threadCount:0};function yk(s,o,x,y,j,R,Q,xe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=_t(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_t(0),this.hiddenUpdates=_t(null),this.identifierPrefix=y,this.onUncaughtError=j,this.onCaughtError=R,this.onRecoverableError=Q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function py(s,o,x,y,j,R,Q,xe,_e,Ye,it,dt){return s=new yk(s,o,x,Q,xe,_e,Ye,dt),o=1,R===!0&&(o|=24),R=Bs(3,null,null,o),s.current=R,R.stateNode=s,o=Jf(),o.refCount++,s.pooledCache=o,o.refCount++,R.memoizedState={element:y,isDehydrated:x,cache:o},ax(R),s}function yy(s){return s?(s=Yo,s):Yo}function by(s,o,x,y,j,R){j=yy(j),y.context===null?y.context=j:y.pendingContext=j,y=al(o),y.payload={element:x},R=R===void 0?null:R,R!==null&&(y.callback=R),x=sl(s,y,o),x!==null&&(Vs(x,s,o),Kc(x,s,o))}function vy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var x=s.retryLane;s.retryLane=x!==0&&x<o?x:o}}function bh(s,o){vy(s,o),(s=s.alternate)&&vy(s,o)}function wy(s){if(s.tag===13){var o=Go(s,67108864);o!==null&&Vs(o,s,67108864),bh(s,67108864)}}var bu=!0;function bk(s,o,x,y){var j=q.T;q.T=null;var R=ce.p;try{ce.p=2,vh(s,o,x,y)}finally{ce.p=R,q.T=j}}function vk(s,o,x,y){var j=q.T;q.T=null;var R=ce.p;try{ce.p=8,vh(s,o,x,y)}finally{ce.p=R,q.T=j}}function vh(s,o,x,y){if(bu){var j=wh(y);if(j===null)lh(s,o,y,vu,x),ky(s,y);else if(Nk(j,s,o,x,y))y.stopPropagation();else if(ky(s,y),o&4&&-1<wk.indexOf(s)){for(;j!==null;){var R=Se(j);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var Q=At(R.pendingLanes);if(Q!==0){var xe=R;for(xe.pendingLanes|=2,xe.entangledLanes|=2;Q;){var _e=1<<31-Yt(Q);xe.entanglements[1]|=_e,Q&=~_e}ei(R),(Ar&6)===0&&(au=be()+500,x0(0))}}break;case 13:xe=Go(R,2),xe!==null&&Vs(xe,R,2),nu(),bh(R,2)}if(R=wh(y),R===null&&lh(s,o,y,vu,x),R===j)break;j=R}j!==null&&y.stopPropagation()}else lh(s,o,y,null,x)}}function wh(s){return s=Gi(s),Nh(s)}var vu=null;function Nh(s){if(vu=null,s=Ne(s),s!==null){var o=d(s);if(o===null)s=null;else{var x=o.tag;if(x===13){if(s=f(o),s!==null)return s;s=null}else if(x===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return vu=s,null}function Ny(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Be()){case fe:return 2;case at:return 8;case Ce:case wt:return 32;case ut:return 268435456;default:return 32}default:return 32}}var kh=!1,pl=null,yl=null,bl=null,w0=new Map,N0=new Map,vl=[],wk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ky(s,o){switch(s){case"focusin":case"focusout":pl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":bl=null;break;case"pointerover":case"pointerout":w0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":N0.delete(o.pointerId)}}function k0(s,o,x,y,j,R){return s===null||s.nativeEvent!==R?(s={blockedOn:o,domEventName:x,eventSystemFlags:y,nativeEvent:R,targetContainers:[j]},o!==null&&(o=Se(o),o!==null&&wy(o)),s):(s.eventSystemFlags|=y,o=s.targetContainers,j!==null&&o.indexOf(j)===-1&&o.push(j),s)}function Nk(s,o,x,y,j){switch(o){case"focusin":return pl=k0(pl,s,o,x,y,j),!0;case"dragenter":return yl=k0(yl,s,o,x,y,j),!0;case"mouseover":return bl=k0(bl,s,o,x,y,j),!0;case"pointerover":var R=j.pointerId;return w0.set(R,k0(w0.get(R)||null,s,o,x,y,j)),!0;case"gotpointercapture":return R=j.pointerId,N0.set(R,k0(N0.get(R)||null,s,o,x,y,j)),!0}return!1}function jy(s){var o=Ne(s.target);if(o!==null){var x=d(o);if(x!==null){if(o=x.tag,o===13){if(o=f(x),o!==null){s.blockedOn=o,Vi(s.priority,function(){if(x.tag===13){var y=Hs();y=fi(y);var j=Go(x,y);j!==null&&Vs(j,x,y),bh(x,y)}});return}}else if(o===3&&x.stateNode.current.memoizedState.isDehydrated){s.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}s.blockedOn=null}function wu(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var x=wh(s.nativeEvent);if(x===null){x=s.nativeEvent;var y=new x.constructor(x.type,x);Bl=y,x.target.dispatchEvent(y),Bl=null}else return o=Se(x),o!==null&&wy(o),s.blockedOn=x,!1;o.shift()}return!0}function Ey(s,o,x){wu(s)&&x.delete(o)}function kk(){kh=!1,pl!==null&&wu(pl)&&(pl=null),yl!==null&&wu(yl)&&(yl=null),bl!==null&&wu(bl)&&(bl=null),w0.forEach(Ey),N0.forEach(Ey)}function Nu(s,o){s.blockedOn===o&&(s.blockedOn=null,kh||(kh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,kk)))}var ku=null;function Cy(s){ku!==s&&(ku=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){ku===s&&(ku=null);for(var o=0;o<s.length;o+=3){var x=s[o],y=s[o+1],j=s[o+2];if(typeof y!="function"){if(Nh(y||x)===null)continue;break}var R=Se(x);R!==null&&(s.splice(o,3),o-=3,Nx(R,{pending:!0,data:j,method:x.method,action:y},y,j))}}))}function j0(s){function o(_e){return Nu(_e,s)}pl!==null&&Nu(pl,s),yl!==null&&Nu(yl,s),bl!==null&&Nu(bl,s),w0.forEach(o),N0.forEach(o);for(var x=0;x<vl.length;x++){var y=vl[x];y.blockedOn===s&&(y.blockedOn=null)}for(;0<vl.length&&(x=vl[0],x.blockedOn===null);)jy(x),x.blockedOn===null&&vl.shift();if(x=(s.ownerDocument||s).$$reactFormReplay,x!=null)for(y=0;y<x.length;y+=3){var j=x[y],R=x[y+1],Q=j[zr]||null;if(typeof R=="function")Q||Cy(x);else if(Q){var xe=null;if(R&&R.hasAttribute("formAction")){if(j=R,Q=R[zr]||null)xe=Q.formAction;else if(Nh(j)!==null)continue}else xe=Q.action;typeof xe=="function"?x[y+1]=xe:(x.splice(y,3),y-=3),Cy(x)}}}function jh(s){this._internalRoot=s}ju.prototype.render=jh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(n(409));var x=o.current,y=Hs();by(x,y,s,o,null,null)},ju.prototype.unmount=jh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;by(s.current,2,null,s,null,null),nu(),o[tn]=null}};function ju(s){this._internalRoot=s}ju.prototype.unstable_scheduleHydration=function(s){if(s){var o=yn();s={blockedOn:null,target:s,priority:o};for(var x=0;x<vl.length&&o!==0&&o<vl[x].priority;x++);vl.splice(x,0,s),x===0&&jy(s)}};var Sy=a.version;if(Sy!=="19.1.1")throw Error(n(527,Sy,"19.1.1"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=b(o),s=s!==null?g(s):null,s=s===null?null:s.stateNode,s};var jk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{qt=Eu.inject(jk),ur=Eu}catch{}}return C0.createRoot=function(s,o){if(!l(s))throw Error(n(299));var x=!1,y="",j=V1,R=G1,Q=Y1,xe=null;return o!=null&&(o.unstable_strictMode===!0&&(x=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(j=o.onUncaughtError),o.onCaughtError!==void 0&&(R=o.onCaughtError),o.onRecoverableError!==void 0&&(Q=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(xe=o.unstable_transitionCallbacks)),o=py(s,1,!1,null,null,x,y,j,R,Q,xe,null),s[tn]=o.current,ih(s),new jh(o)},C0.hydrateRoot=function(s,o,x){if(!l(s))throw Error(n(299));var y=!1,j="",R=V1,Q=G1,xe=Y1,_e=null,Ye=null;return x!=null&&(x.unstable_strictMode===!0&&(y=!0),x.identifierPrefix!==void 0&&(j=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(Q=x.onCaughtError),x.onRecoverableError!==void 0&&(xe=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(_e=x.unstable_transitionCallbacks),x.formState!==void 0&&(Ye=x.formState)),o=py(s,1,!0,o,x??null,y,j,R,Q,xe,_e,Ye),o.context=yy(null),x=o.current,y=Hs(),y=fi(y),j=al(y),j.callback=null,sl(x,j,y),x=y,o.current.lanes=x,Jr(o,x),ei(o),s[tn]=o.current,ih(s),new ju(o)},C0.version="19.1.1",C0}var Ly;function Ok(){if(Ly)return Sh.exports;Ly=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Sh.exports=Ik(),Sh.exports}var Fk=Ok();const Lk=ff(Fk);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var By="popstate";function Bk(t={}){function a(n,l){let{pathname:d,search:f,hash:h}=n.location;return pm("",{pathname:d,search:f,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(n,l){return typeof l=="string"?l:G0(l)}return zk(a,r,null,t)}function Qr(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Rn(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function Pk(){return Math.random().toString(36).substring(2,10)}function Py(t,a){return{usr:t.state,key:t.key,idx:a}}function pm(t,a,r=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?Sc(a):a,state:r,key:a&&a.key||n||Pk()}}function G0({pathname:t="/",search:a="",hash:r=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Sc(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substring(r),t=t.substring(0,r));let n=t.indexOf("?");n>=0&&(a.search=t.substring(n),t=t.substring(0,n)),t&&(a.pathname=t)}return a}function zk(t,a,r,n={}){let{window:l=document.defaultView,v5Compat:d=!1}=n,f=l.history,h="POP",b=null,g=w();g==null&&(g=0,f.replaceState({...f.state,idx:g},""));function w(){return(f.state||{idx:null}).idx}function k(){h="POP";let M=w(),I=M==null?null:M-g;g=M,b&&b({action:h,location:A.location,delta:I})}function E(M,I){h="PUSH";let F=pm(A.location,M,I);g=w()+1;let T=Py(F,g),L=A.createHref(F);try{f.pushState(T,"",L)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;l.location.assign(L)}d&&b&&b({action:h,location:A.location,delta:1})}function S(M,I){h="REPLACE";let F=pm(A.location,M,I);g=w();let T=Py(F,g),L=A.createHref(F);f.replaceState(T,"",L),d&&b&&b({action:h,location:A.location,delta:0})}function D(M){return Uk(M)}let A={get action(){return h},get location(){return t(l,f)},listen(M){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(By,k),b=M,()=>{l.removeEventListener(By,k),b=null}},createHref(M){return a(l,M)},createURL:D,encodeLocation(M){let I=D(M);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:E,replace:S,go(M){return f.go(M)}};return A}function Uk(t,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Qr(r,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:G0(t);return n=n.replace(/ $/,"%20"),!a&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function nv(t,a,r="/"){return Hk(t,a,r,!1)}function Hk(t,a,r,n){let l=typeof a=="string"?Sc(a):a,d=Fi(l.pathname||"/",r);if(d==null)return null;let f=iv(t);Vk(f);let h=null;for(let b=0;h==null&&b<f.length;++b){let g=e3(d);h=Qk(f[b],g,n)}return h}function iv(t,a=[],r=[],n=""){let l=(d,f,h)=>{let b={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};b.relativePath.startsWith("/")&&(Qr(b.relativePath.startsWith(n),`Absolute route path "${b.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(n.length));let g=Mi([n,b.relativePath]),w=r.concat(b);d.children&&d.children.length>0&&(Qr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),iv(d.children,a,w,g)),!(d.path==null&&!d.index)&&a.push({path:g,score:Kk(g,d.index),routesMeta:w})};return t.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))l(d,f);else for(let h of lv(d.path))l(d,f,h)}),a}function lv(t){let a=t.split("/");if(a.length===0)return[];let[r,...n]=a,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(n.length===0)return l?[d,""]:[d];let f=lv(n.join("/")),h=[];return h.push(...f.map(b=>b===""?d:[d,b].join("/"))),l&&h.push(...f),h.map(b=>t.startsWith("/")&&b===""?"/":b)}function Vk(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:Zk(a.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var Gk=/^:[\w-]+$/,Yk=3,Xk=2,qk=1,$k=10,Wk=-2,zy=t=>t==="*";function Kk(t,a){let r=t.split("/"),n=r.length;return r.some(zy)&&(n+=Wk),a&&(n+=Xk),r.filter(l=>!zy(l)).reduce((l,d)=>l+(Gk.test(d)?Yk:d===""?qk:$k),n)}function Zk(t,a){return t.length===a.length&&t.slice(0,-1).every((n,l)=>n===a[l])?t[t.length-1]-a[a.length-1]:0}function Qk(t,a,r=!1){let{routesMeta:n}=t,l={},d="/",f=[];for(let h=0;h<n.length;++h){let b=n[h],g=h===n.length-1,w=d==="/"?a:a.slice(d.length)||"/",k=Gu({path:b.relativePath,caseSensitive:b.caseSensitive,end:g},w),E=b.route;if(!k&&g&&r&&!n[n.length-1].route.index&&(k=Gu({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},w)),!k)return null;Object.assign(l,k.params),f.push({params:l,pathname:Mi([d,k.pathname]),pathnameBase:s3(Mi([d,k.pathnameBase])),route:E}),k.pathnameBase!=="/"&&(d=Mi([d,k.pathnameBase]))}return f}function Gu(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=Jk(t.path,t.caseSensitive,t.end),l=a.match(r);if(!l)return null;let d=l[0],f=d.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:n.reduce((g,{paramName:w,isOptional:k},E)=>{if(w==="*"){let D=h[E]||"";f=d.slice(0,d.length-D.length).replace(/(.)\/+$/,"$1")}const S=h[E];return k&&!S?g[w]=void 0:g[w]=(S||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:f,pattern:t}}function Jk(t,a=!1,r=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,b)=>(n.push({paramName:h,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),n]}function e3(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function Fi(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function t3(t,a="/"){let{pathname:r,search:n="",hash:l=""}=typeof t=="string"?Sc(t):t;return{pathname:r?r.startsWith("/")?r:r3(r,a):a,search:n3(n),hash:i3(l)}}function r3(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Dh(t,a,r,n){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function a3(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function ov(t){let a=a3(t);return a.map((r,n)=>n===a.length-1?r.pathname:r.pathnameBase)}function cv(t,a,r,n=!1){let l;typeof t=="string"?l=Sc(t):(l={...t},Qr(!l.pathname||!l.pathname.includes("?"),Dh("?","pathname","search",l)),Qr(!l.pathname||!l.pathname.includes("#"),Dh("#","pathname","hash",l)),Qr(!l.search||!l.search.includes("#"),Dh("#","search","hash",l)));let d=t===""||l.pathname==="",f=d?"/":l.pathname,h;if(f==null)h=r;else{let k=a.length-1;if(!n&&f.startsWith("..")){let E=f.split("/");for(;E[0]==="..";)E.shift(),k-=1;l.pathname=E.join("/")}h=k>=0?a[k]:"/"}let b=t3(l,h),g=f&&f!=="/"&&f.endsWith("/"),w=(d||f===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(g||w)&&(b.pathname+="/"),b}var Mi=t=>t.join("/").replace(/\/\/+/g,"/"),s3=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),n3=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,i3=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function l3(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var dv=["POST","PUT","PATCH","DELETE"];new Set(dv);var o3=["GET",...dv];new Set(o3);var Ac=C.createContext(null);Ac.displayName="DataRouter";var xf=C.createContext(null);xf.displayName="DataRouterState";C.createContext(!1);var uv=C.createContext({isTransitioning:!1});uv.displayName="ViewTransition";var c3=C.createContext(new Map);c3.displayName="Fetchers";var d3=C.createContext(null);d3.displayName="Await";var oi=C.createContext(null);oi.displayName="Navigation";var sd=C.createContext(null);sd.displayName="Location";var ci=C.createContext({outlet:null,matches:[],isDataRoute:!1});ci.displayName="Route";var Km=C.createContext(null);Km.displayName="RouteError";function u3(t,{relative:a}={}){Qr(nd(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=C.useContext(oi),{hash:l,pathname:d,search:f}=id(t,{relative:a}),h=d;return r!=="/"&&(h=d==="/"?r:Mi([r,d])),n.createHref({pathname:h,search:f,hash:l})}function nd(){return C.useContext(sd)!=null}function Fn(){return Qr(nd(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(sd).location}var fv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xv(t){C.useContext(oi).static||C.useLayoutEffect(t)}function hr(){let{isDataRoute:t}=C.useContext(ci);return t?j3():f3()}function f3(){Qr(nd(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Ac),{basename:a,navigator:r}=C.useContext(oi),{matches:n}=C.useContext(ci),{pathname:l}=Fn(),d=JSON.stringify(ov(n)),f=C.useRef(!1);return xv(()=>{f.current=!0}),C.useCallback((b,g={})=>{if(Rn(f.current,fv),!f.current)return;if(typeof b=="number"){r.go(b);return}let w=cv(b,JSON.parse(d),l,g.relative==="path");t==null&&a!=="/"&&(w.pathname=w.pathname==="/"?a:Mi([a,w.pathname])),(g.replace?r.replace:r.push)(w,g.state,g)},[a,r,d,l,t])}C.createContext(null);function gn(){let{matches:t}=C.useContext(ci),a=t[t.length-1];return a?a.params:{}}function id(t,{relative:a}={}){let{matches:r}=C.useContext(ci),{pathname:n}=Fn(),l=JSON.stringify(ov(r));return C.useMemo(()=>cv(t,JSON.parse(l),n,a==="path"),[t,l,n,a])}function x3(t,a){return hv(t,a)}function hv(t,a,r,n){Qr(nd(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(oi),{matches:d}=C.useContext(ci),f=d[d.length-1],h=f?f.params:{},b=f?f.pathname:"/",g=f?f.pathnameBase:"/",w=f&&f.route;{let I=w&&w.path||"";mv(b,!w||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let k=Fn(),E;if(a){let I=typeof a=="string"?Sc(a):a;Qr(g==="/"||I.pathname?.startsWith(g),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${g}" but pathname "${I.pathname}" was given in the \`location\` prop.`),E=I}else E=k;let S=E.pathname||"/",D=S;if(g!=="/"){let I=g.replace(/^\//,"").split("/");D="/"+S.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=nv(t,{pathname:D});Rn(w||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Rn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=y3(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},h,I.params),pathname:Mi([g,l.encodeLocation?l.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?g:Mi([g,l.encodeLocation?l.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),d,r,n);return a&&M?C.createElement(sd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},M):M}function h3(){let t=k3(),a=l3(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:n},d={padding:"2px 4px",backgroundColor:n},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:d},"ErrorBoundary")," or"," ",C.createElement("code",{style:d},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},a),r?C.createElement("pre",{style:l},r):null,f)}var m3=C.createElement(h3,null),g3=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?C.createElement(ci.Provider,{value:this.props.routeContext},C.createElement(Km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function p3({routeContext:t,match:a,children:r}){let n=C.useContext(Ac);return n&&n.static&&n.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=a.route.id),C.createElement(ci.Provider,{value:t},r)}function y3(t,a=[],r=null,n=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,d=r?.errors;if(d!=null){let b=l.findIndex(g=>g.route.id&&d?.[g.route.id]!==void 0);Qr(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let f=!1,h=-1;if(r)for(let b=0;b<l.length;b++){let g=l[b];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(h=b),g.route.id){let{loaderData:w,errors:k}=r,E=g.route.loader&&!w.hasOwnProperty(g.route.id)&&(!k||k[g.route.id]===void 0);if(g.route.lazy||E){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((b,g,w)=>{let k,E=!1,S=null,D=null;r&&(k=d&&g.route.id?d[g.route.id]:void 0,S=g.route.errorElement||m3,f&&(h<0&&w===0?(mv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,D=null):h===w&&(E=!0,D=g.route.hydrateFallbackElement||null)));let A=a.concat(l.slice(0,w+1)),M=()=>{let I;return k?I=S:E?I=D:g.route.Component?I=C.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=b,C.createElement(p3,{match:g,routeContext:{outlet:b,matches:A,isDataRoute:r!=null},children:I})};return r&&(g.route.ErrorBoundary||g.route.errorElement||w===0)?C.createElement(g3,{location:r.location,revalidation:r.revalidation,component:S,error:k,children:M(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):M()},null)}function Zm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function b3(t){let a=C.useContext(Ac);return Qr(a,Zm(t)),a}function v3(t){let a=C.useContext(xf);return Qr(a,Zm(t)),a}function w3(t){let a=C.useContext(ci);return Qr(a,Zm(t)),a}function Qm(t){let a=w3(t),r=a.matches[a.matches.length-1];return Qr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function N3(){return Qm("useRouteId")}function k3(){let t=C.useContext(Km),a=v3("useRouteError"),r=Qm("useRouteError");return t!==void 0?t:a.errors?.[r]}function j3(){let{router:t}=b3("useNavigate"),a=Qm("useNavigate"),r=C.useRef(!1);return xv(()=>{r.current=!0}),C.useCallback(async(l,d={})=>{Rn(r.current,fv),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:a,...d}))},[t,a])}var Uy={};function mv(t,a,r){!a&&!Uy[t]&&(Uy[t]=!0,Rn(!1,r))}C.memo(E3);function E3({routes:t,future:a,state:r}){return hv(t,void 0,r,a)}function Xt(t){Qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function C3({basename:t="/",children:a=null,location:r,navigationType:n="POP",navigator:l,static:d=!1}){Qr(!nd(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),h=C.useMemo(()=>({basename:f,navigator:l,static:d,future:{}}),[f,l,d]);typeof r=="string"&&(r=Sc(r));let{pathname:b="/",search:g="",hash:w="",state:k=null,key:E="default"}=r,S=C.useMemo(()=>{let D=Fi(b,f);return D==null?null:{location:{pathname:D,search:g,hash:w,state:k,key:E},navigationType:n}},[f,b,g,w,k,E,n]);return Rn(S!=null,`<Router basename="${f}"> is not able to match the URL "${b}${g}${w}" because it does not start with the basename, so the <Router> won't render anything.`),S==null?null:C.createElement(oi.Provider,{value:h},C.createElement(sd.Provider,{children:a,value:S}))}function S3({children:t,location:a}){return x3(ym(t),a)}function ym(t,a=[]){let r=[];return C.Children.forEach(t,(n,l)=>{if(!C.isValidElement(n))return;let d=[...a,l];if(n.type===C.Fragment){r.push.apply(r,ym(n.props.children,d));return}Qr(n.type===Xt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qr(!n.props.index||!n.props.children,"An index route cannot have child routes.");let f={id:n.props.id||d.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(f.children=ym(n.props.children,d)),r.push(f)}),r}var Bu="get",Pu="application/x-www-form-urlencoded";function hf(t){return t!=null&&typeof t.tagName=="string"}function A3(t){return hf(t)&&t.tagName.toLowerCase()==="button"}function _3(t){return hf(t)&&t.tagName.toLowerCase()==="form"}function T3(t){return hf(t)&&t.tagName.toLowerCase()==="input"}function D3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function R3(t,a){return t.button===0&&(!a||a==="_self")&&!D3(t)}function bm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let n=t[r];return a.concat(Array.isArray(n)?n.map(l=>[r,l]):[[r,n]])},[]))}function M3(t,a){let r=bm(t);return a&&a.forEach((n,l)=>{r.has(l)||a.getAll(l).forEach(d=>{r.append(l,d)})}),r}var Su=null;function I3(){if(Su===null)try{new FormData(document.createElement("form"),0),Su=!1}catch{Su=!0}return Su}var O3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rh(t){return t!=null&&!O3.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pu}"`),null):t}function F3(t,a){let r,n,l,d,f;if(_3(t)){let h=t.getAttribute("action");n=h?Fi(h,a):null,r=t.getAttribute("method")||Bu,l=Rh(t.getAttribute("enctype"))||Pu,d=new FormData(t)}else if(A3(t)||T3(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||h.getAttribute("action");if(n=b?Fi(b,a):null,r=t.getAttribute("formmethod")||h.getAttribute("method")||Bu,l=Rh(t.getAttribute("formenctype"))||Rh(h.getAttribute("enctype"))||Pu,d=new FormData(h,t),!I3()){let{name:g,type:w,value:k}=t;if(w==="image"){let E=g?`${g}.`:"";d.append(`${E}x`,"0"),d.append(`${E}y`,"0")}else g&&d.append(g,k)}}else{if(hf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Bu,n=null,l=Pu,f=t}return d&&l==="text/plain"&&(f=d,d=void 0),{action:n,method:r.toLowerCase(),encType:l,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Jm(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function L3(t,a,r){let n=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n.pathname==="/"?n.pathname=`_root.${r}`:a&&Fi(n.pathname,a)==="/"?n.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function B3(t,a){if(t.id in a)return a[t.id];try{let r=await import(t.module);return a[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function z3(t,a,r){let n=await Promise.all(t.map(async l=>{let d=a.routes[l.route.id];if(d){let f=await B3(d,r);return f.links?f.links():[]}return[]}));return G3(n.flat(1).filter(P3).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Hy(t,a,r,n,l,d){let f=(b,g)=>r[g]?b.route.id!==r[g].route.id:!0,h=(b,g)=>r[g].pathname!==b.pathname||r[g].route.path?.endsWith("*")&&r[g].params["*"]!==b.params["*"];return d==="assets"?a.filter((b,g)=>f(b,g)||h(b,g)):d==="data"?a.filter((b,g)=>{let w=n.routes[b.route.id];if(!w||!w.hasLoader)return!1;if(f(b,g)||h(b,g))return!0;if(b.route.shouldRevalidate){let k=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof k=="boolean")return k}return!0}):[]}function U3(t,a,{includeHydrateFallback:r}={}){return H3(t.map(n=>{let l=a.routes[n.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function H3(t){return[...new Set(t)]}function V3(t){let a={},r=Object.keys(t).sort();for(let n of r)a[n]=t[n];return a}function G3(t,a){let r=new Set;return new Set(a),t.reduce((n,l)=>{let d=JSON.stringify(V3(l));return r.has(d)||(r.add(d),n.push({key:d,link:l})),n},[])}function gv(){let t=C.useContext(Ac);return Jm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function Y3(){let t=C.useContext(xf);return Jm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var eg=C.createContext(void 0);eg.displayName="FrameworkContext";function pv(){let t=C.useContext(eg);return Jm(t,"You must render this element inside a <HydratedRouter> element"),t}function X3(t,a){let r=C.useContext(eg),[n,l]=C.useState(!1),[d,f]=C.useState(!1),{onFocus:h,onBlur:b,onMouseEnter:g,onMouseLeave:w,onTouchStart:k}=a,E=C.useRef(null);C.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=I=>{I.forEach(F=>{f(F.isIntersecting)})},M=new IntersectionObserver(A,{threshold:.5});return E.current&&M.observe(E.current),()=>{M.disconnect()}}},[t]),C.useEffect(()=>{if(n){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[n]);let S=()=>{l(!0)},D=()=>{l(!1),f(!1)};return r?t!=="intent"?[d,E,{}]:[d,E,{onFocus:S0(h,S),onBlur:S0(b,D),onMouseEnter:S0(g,S),onMouseLeave:S0(w,D),onTouchStart:S0(k,S)}]:[!1,E,{}]}function S0(t,a){return r=>{t&&t(r),r.defaultPrevented||a(r)}}function q3({page:t,...a}){let{router:r}=gv(),n=C.useMemo(()=>nv(r.routes,t,r.basename),[r.routes,t,r.basename]);return n?C.createElement(W3,{page:t,matches:n,...a}):null}function $3(t){let{manifest:a,routeModules:r}=pv(),[n,l]=C.useState([]);return C.useEffect(()=>{let d=!1;return z3(t,a,r).then(f=>{d||l(f)}),()=>{d=!0}},[t,a,r]),n}function W3({page:t,matches:a,...r}){let n=Fn(),{manifest:l,routeModules:d}=pv(),{basename:f}=gv(),{loaderData:h,matches:b}=Y3(),g=C.useMemo(()=>Hy(t,a,b,l,n,"data"),[t,a,b,l,n]),w=C.useMemo(()=>Hy(t,a,b,l,n,"assets"),[t,a,b,l,n]),k=C.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let D=new Set,A=!1;if(a.forEach(I=>{let F=l.routes[I.route.id];!F||!F.hasLoader||(!g.some(T=>T.route.id===I.route.id)&&I.route.id in h&&d[I.route.id]?.shouldRevalidate||F.hasClientLoader?A=!0:D.add(I.route.id))}),D.size===0)return[];let M=L3(t,f,"data");return A&&D.size>0&&M.searchParams.set("_routes",a.filter(I=>D.has(I.route.id)).map(I=>I.route.id).join(",")),[M.pathname+M.search]},[f,h,n,l,g,a,t,d]),E=C.useMemo(()=>U3(w,l),[w,l]),S=$3(w);return C.createElement(C.Fragment,null,k.map(D=>C.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...r})),E.map(D=>C.createElement("link",{key:D,rel:"modulepreload",href:D,...r})),S.map(({key:D,link:A})=>C.createElement("link",{key:D,nonce:r.nonce,...A})))}function K3(...t){return a=>{t.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var yv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{yv&&(window.__reactRouterVersion="7.8.0")}catch{}function Z3({basename:t,children:a,window:r}){let n=C.useRef();n.current==null&&(n.current=Bk({window:r,v5Compat:!0}));let l=n.current,[d,f]=C.useState({action:l.action,location:l.location}),h=C.useCallback(b=>{C.startTransition(()=>f(b))},[f]);return C.useLayoutEffect(()=>l.listen(h),[l,h]),C.createElement(C3,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:l})}var bv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,lo=C.forwardRef(function({onClick:a,discover:r="render",prefetch:n="none",relative:l,reloadDocument:d,replace:f,state:h,target:b,to:g,preventScrollReset:w,viewTransition:k,...E},S){let{basename:D}=C.useContext(oi),A=typeof g=="string"&&bv.test(g),M,I=!1;if(typeof g=="string"&&A&&(M=g,yv))try{let z=new URL(window.location.href),Z=g.startsWith("//")?new URL(z.protocol+g):new URL(g),te=Fi(Z.pathname,D);Z.origin===z.origin&&te!=null?g=te+Z.search+Z.hash:I=!0}catch{Rn(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let F=u3(g,{relative:l}),[T,L,H]=X3(n,E),U=ej(g,{replace:f,state:h,target:b,preventScrollReset:w,relative:l,viewTransition:k});function B(z){a&&a(z),z.defaultPrevented||U(z)}let P=C.createElement("a",{...E,...H,href:M||F,onClick:I||d?a:B,ref:K3(S,L),target:b,"data-discover":!A&&r==="render"?"true":void 0});return T&&!A?C.createElement(C.Fragment,null,P,C.createElement(q3,{page:F})):P});lo.displayName="Link";var vm=C.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:n="",end:l=!1,style:d,to:f,viewTransition:h,children:b,...g},w){let k=id(f,{relative:g.relative}),E=Fn(),S=C.useContext(xf),{navigator:D,basename:A}=C.useContext(oi),M=S!=null&&nj(k)&&h===!0,I=D.encodeLocation?D.encodeLocation(k).pathname:k.pathname,F=E.pathname,T=S&&S.navigation&&S.navigation.location?S.navigation.location.pathname:null;r||(F=F.toLowerCase(),T=T?T.toLowerCase():null,I=I.toLowerCase()),T&&A&&(T=Fi(T,A)||T);const L=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let H=F===I||!l&&F.startsWith(I)&&F.charAt(L)==="/",U=T!=null&&(T===I||!l&&T.startsWith(I)&&T.charAt(I.length)==="/"),B={isActive:H,isPending:U,isTransitioning:M},P=H?a:void 0,z;typeof n=="function"?z=n(B):z=[n,H?"active":null,U?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let Z=typeof d=="function"?d(B):d;return C.createElement(lo,{...g,"aria-current":P,className:z,ref:w,style:Z,to:f,viewTransition:h},typeof b=="function"?b(B):b)});vm.displayName="NavLink";var Q3=C.forwardRef(({discover:t="render",fetcherKey:a,navigate:r,reloadDocument:n,replace:l,state:d,method:f=Bu,action:h,onSubmit:b,relative:g,preventScrollReset:w,viewTransition:k,...E},S)=>{let D=aj(),A=sj(h,{relative:g}),M=f.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&bv.test(h),F=T=>{if(b&&b(T),T.defaultPrevented)return;T.preventDefault();let L=T.nativeEvent.submitter,H=L?.getAttribute("formmethod")||f;D(L||T.currentTarget,{fetcherKey:a,method:H,navigate:r,replace:l,state:d,relative:g,preventScrollReset:w,viewTransition:k})};return C.createElement("form",{ref:S,method:M,action:A,onSubmit:n?b:F,...E,"data-discover":!I&&t==="render"?"true":void 0})});Q3.displayName="Form";function J3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vv(t){let a=C.useContext(Ac);return Qr(a,J3(t)),a}function ej(t,{target:a,replace:r,state:n,preventScrollReset:l,relative:d,viewTransition:f}={}){let h=hr(),b=Fn(),g=id(t,{relative:d});return C.useCallback(w=>{if(R3(w,a)){w.preventDefault();let k=r!==void 0?r:G0(b)===G0(g);h(t,{replace:k,state:n,preventScrollReset:l,relative:d,viewTransition:f})}},[b,h,g,r,n,a,t,l,d,f])}function ld(t){Rn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=C.useRef(bm(t)),r=C.useRef(!1),n=Fn(),l=C.useMemo(()=>M3(n.search,r.current?null:a.current),[n.search]),d=hr(),f=C.useCallback((h,b)=>{const g=bm(typeof h=="function"?h(new URLSearchParams(l)):h);r.current=!0,d("?"+g,b)},[d,l]);return[l,f]}var tj=0,rj=()=>`__${String(++tj)}__`;function aj(){let{router:t}=vv("useSubmit"),{basename:a}=C.useContext(oi),r=N3();return C.useCallback(async(n,l={})=>{let{action:d,method:f,encType:h,formData:b,body:g}=F3(n,a);if(l.navigate===!1){let w=l.fetcherKey||rj();await t.fetch(w,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:g,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await t.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:g,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,a,r])}function sj(t,{relative:a}={}){let{basename:r}=C.useContext(oi),n=C.useContext(ci);Qr(n,"useFormAction must be used inside a RouteContext");let[l]=n.matches.slice(-1),d={...id(t||".",{relative:a})},f=Fn();if(t==null){d.search=f.search;let h=new URLSearchParams(d.search),b=h.getAll("index");if(b.some(w=>w==="")){h.delete("index"),b.filter(k=>k).forEach(k=>h.append("index",k));let w=h.toString();d.search=w?`?${w}`:""}}return(!t||t===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:Mi([r,d.pathname])),G0(d)}function nj(t,{relative:a}={}){let r=C.useContext(uv);Qr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=vv("useViewTransitionState"),l=id(t,{relative:a});if(!r.isTransitioning)return!1;let d=Fi(r.currentLocation.pathname,n)||r.currentLocation.pathname,f=Fi(r.nextLocation.pathname,n)||r.nextLocation.pathname;return Gu(l.pathname,f)!=null||Gu(l.pathname,d)!=null}function ij(){const t=hr(),a=()=>{t("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 md:top-6 md:right-6 flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 z-10",children:e.jsx("button",{onClick:()=>t("/login"),className:"signInSignUp text-xs sm:text-sm md:text-base px-3 py-2 sm:px-4 sm:py-2 md:px-6 md:py-3 whitespace-nowrap",children:"Login In"})}),e.jsxs("div",{className:"welcomeCard mx-3 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-20 h-20 sm:w-28 sm:h-28 md:w-36 md:h-36 lg:w-44 lg:h-44 mx-auto mb-4 sm:mb-5 md:mb-6"}),e.jsxs("h1",{className:"welcomeTitle text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl mb-3 sm:mb-4 md:mb-5",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300 block sm:inline",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-7 md:mb-8 px-2 sm:px-4 md:px-0",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8 md:mb-10",children:[e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Resident Records"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Role Management"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Maintenance Requests"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Announcements"})]})]}),e.jsx("button",{className:"welcomeButton text-sm sm:text-base md:text-lg font-bold py-3 px-6 sm:py-3 sm:px-8 md:py-4 md:px-10 rounded-lg shadow-lg hover:scale-105 transition-transform duration-300",onClick:a,children:" Get Started"}),e.jsx("div",{className:"mt-4 sm:mt-6 text-xs sm:text-sm text-white/70 text-center block sm:hidden",children:" Tap buttons above to sign in or create account"})]}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/20 pointer-events-none"})]})}function wv(t,a){return function(){return t.apply(a,arguments)}}const{toString:lj}=Object.prototype,{getPrototypeOf:tg}=Object,{iterator:mf,toStringTag:Nv}=Symbol,gf=(t=>a=>{const r=lj.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Ln=t=>(t=t.toLowerCase(),a=>gf(a)===t),pf=t=>a=>typeof a===t,{isArray:_c}=Array,Y0=pf("undefined");function od(t){return t!==null&&!Y0(t)&&t.constructor!==null&&!Y0(t.constructor)&&Rs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const kv=Ln("ArrayBuffer");function oj(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&kv(t.buffer),a}const cj=pf("string"),Rs=pf("function"),jv=pf("number"),cd=t=>t!==null&&typeof t=="object",dj=t=>t===!0||t===!1,zu=t=>{if(gf(t)!=="object")return!1;const a=tg(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Nv in t)&&!(mf in t)},uj=t=>{if(!cd(t)||od(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},fj=Ln("Date"),xj=Ln("File"),hj=Ln("Blob"),mj=Ln("FileList"),gj=t=>cd(t)&&Rs(t.pipe),pj=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Rs(t.append)&&((a=gf(t))==="formdata"||a==="object"&&Rs(t.toString)&&t.toString()==="[object FormData]"))},yj=Ln("URLSearchParams"),[bj,vj,wj,Nj]=["ReadableStream","Request","Response","Headers"].map(Ln),kj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dd(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,l;if(typeof t!="object"&&(t=[t]),_c(t))for(n=0,l=t.length;n<l;n++)a.call(null,t[n],n,t);else{if(od(t))return;const d=r?Object.getOwnPropertyNames(t):Object.keys(t),f=d.length;let h;for(n=0;n<f;n++)h=d[n],a.call(null,t[h],h,t)}}function Ev(t,a){if(od(t))return null;a=a.toLowerCase();const r=Object.keys(t);let n=r.length,l;for(;n-- >0;)if(l=r[n],a===l.toLowerCase())return l;return null}const oo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Cv=t=>!Y0(t)&&t!==oo;function wm(){const{caseless:t}=Cv(this)&&this||{},a={},r=(n,l)=>{const d=t&&Ev(a,l)||l;zu(a[d])&&zu(n)?a[d]=wm(a[d],n):zu(n)?a[d]=wm({},n):_c(n)?a[d]=n.slice():a[d]=n};for(let n=0,l=arguments.length;n<l;n++)arguments[n]&&dd(arguments[n],r);return a}const jj=(t,a,r,{allOwnKeys:n}={})=>(dd(a,(l,d)=>{r&&Rs(l)?t[d]=wv(l,r):t[d]=l},{allOwnKeys:n}),t),Ej=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Cj=(t,a,r,n)=>{t.prototype=Object.create(a.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},Sj=(t,a,r,n)=>{let l,d,f;const h={};if(a=a||{},t==null)return a;do{for(l=Object.getOwnPropertyNames(t),d=l.length;d-- >0;)f=l[d],(!n||n(f,t,a))&&!h[f]&&(a[f]=t[f],h[f]=!0);t=r!==!1&&tg(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},Aj=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const n=t.indexOf(a,r);return n!==-1&&n===r},_j=t=>{if(!t)return null;if(_c(t))return t;let a=t.length;if(!jv(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},Tj=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&tg(Uint8Array)),Dj=(t,a)=>{const n=(t&&t[mf]).call(t);let l;for(;(l=n.next())&&!l.done;){const d=l.value;a.call(t,d[0],d[1])}},Rj=(t,a)=>{let r;const n=[];for(;(r=t.exec(a))!==null;)n.push(r);return n},Mj=Ln("HTMLFormElement"),Ij=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,l){return n.toUpperCase()+l}),Vy=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),Oj=Ln("RegExp"),Sv=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),n={};dd(r,(l,d)=>{let f;(f=a(l,d,t))!==!1&&(n[d]=f||l)}),Object.defineProperties(t,n)},Fj=t=>{Sv(t,(a,r)=>{if(Rs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Rs(n)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},Lj=(t,a)=>{const r={},n=l=>{l.forEach(d=>{r[d]=!0})};return _c(t)?n(t):n(String(t).split(a)),r},Bj=()=>{},Pj=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function zj(t){return!!(t&&Rs(t.append)&&t[Nv]==="FormData"&&t[mf])}const Uj=t=>{const a=new Array(10),r=(n,l)=>{if(cd(n)){if(a.indexOf(n)>=0)return;if(od(n))return n;if(!("toJSON"in n)){a[l]=n;const d=_c(n)?[]:{};return dd(n,(f,h)=>{const b=r(f,l+1);!Y0(b)&&(d[h]=b)}),a[l]=void 0,d}}return n};return r(t,0)},Hj=Ln("AsyncFunction"),Vj=t=>t&&(cd(t)||Rs(t))&&Rs(t.then)&&Rs(t.catch),Av=((t,a)=>t?setImmediate:a?((r,n)=>(oo.addEventListener("message",({source:l,data:d})=>{l===oo&&d===r&&n.length&&n.shift()()},!1),l=>{n.push(l),oo.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Rs(oo.postMessage)),Gj=typeof queueMicrotask<"u"?queueMicrotask.bind(oo):typeof process<"u"&&process.nextTick||Av,Yj=t=>t!=null&&Rs(t[mf]),et={isArray:_c,isArrayBuffer:kv,isBuffer:od,isFormData:pj,isArrayBufferView:oj,isString:cj,isNumber:jv,isBoolean:dj,isObject:cd,isPlainObject:zu,isEmptyObject:uj,isReadableStream:bj,isRequest:vj,isResponse:wj,isHeaders:Nj,isUndefined:Y0,isDate:fj,isFile:xj,isBlob:hj,isRegExp:Oj,isFunction:Rs,isStream:gj,isURLSearchParams:yj,isTypedArray:Tj,isFileList:mj,forEach:dd,merge:wm,extend:jj,trim:kj,stripBOM:Ej,inherits:Cj,toFlatObject:Sj,kindOf:gf,kindOfTest:Ln,endsWith:Aj,toArray:_j,forEachEntry:Dj,matchAll:Rj,isHTMLForm:Mj,hasOwnProperty:Vy,hasOwnProp:Vy,reduceDescriptors:Sv,freezeMethods:Fj,toObjectSet:Lj,toCamelCase:Ij,noop:Bj,toFiniteNumber:Pj,findKey:Ev,global:oo,isContextDefined:Cv,isSpecCompliantForm:zj,toJSONObject:Uj,isAsyncFn:Hj,isThenable:Vj,setImmediate:Av,asap:Gj,isIterable:Yj};function rr(t,a,r,n,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),n&&(this.request=n),l&&(this.response=l,this.status=l.status?l.status:null)}et.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.status}}});const _v=rr.prototype,Tv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Tv[t]={value:t}});Object.defineProperties(rr,Tv);Object.defineProperty(_v,"isAxiosError",{value:!0});rr.from=(t,a,r,n,l,d)=>{const f=Object.create(_v);return et.toFlatObject(t,f,function(b){return b!==Error.prototype},h=>h!=="isAxiosError"),rr.call(f,t.message,a,r,n,l),f.cause=t,f.name=t.name,d&&Object.assign(f,d),f};const Xj=null;function Nm(t){return et.isPlainObject(t)||et.isArray(t)}function Dv(t){return et.endsWith(t,"[]")?t.slice(0,-2):t}function Gy(t,a,r){return t?t.concat(a).map(function(l,d){return l=Dv(l),!r&&d?"["+l+"]":l}).join(r?".":""):a}function qj(t){return et.isArray(t)&&!t.some(Nm)}const $j=et.toFlatObject(et,{},null,function(a){return/^is[A-Z]/.test(a)});function yf(t,a,r){if(!et.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,M){return!et.isUndefined(M[A])});const n=r.metaTokens,l=r.visitor||w,d=r.dots,f=r.indexes,b=(r.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(a);if(!et.isFunction(l))throw new TypeError("visitor must be a function");function g(D){if(D===null)return"";if(et.isDate(D))return D.toISOString();if(et.isBoolean(D))return D.toString();if(!b&&et.isBlob(D))throw new rr("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(D)||et.isTypedArray(D)?b&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function w(D,A,M){let I=D;if(D&&!M&&typeof D=="object"){if(et.endsWith(A,"{}"))A=n?A:A.slice(0,-2),D=JSON.stringify(D);else if(et.isArray(D)&&qj(D)||(et.isFileList(D)||et.endsWith(A,"[]"))&&(I=et.toArray(D)))return A=Dv(A),I.forEach(function(T,L){!(et.isUndefined(T)||T===null)&&a.append(f===!0?Gy([A],L,d):f===null?A:A+"[]",g(T))}),!1}return Nm(D)?!0:(a.append(Gy(M,A,d),g(D)),!1)}const k=[],E=Object.assign($j,{defaultVisitor:w,convertValue:g,isVisitable:Nm});function S(D,A){if(!et.isUndefined(D)){if(k.indexOf(D)!==-1)throw Error("Circular reference detected in "+A.join("."));k.push(D),et.forEach(D,function(I,F){(!(et.isUndefined(I)||I===null)&&l.call(a,I,et.isString(F)?F.trim():F,A,E))===!0&&S(I,A?A.concat(F):[F])}),k.pop()}}if(!et.isObject(t))throw new TypeError("data must be an object");return S(t),a}function Yy(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return a[n]})}function rg(t,a){this._pairs=[],t&&yf(t,this,a)}const Rv=rg.prototype;Rv.append=function(a,r){this._pairs.push([a,r])};Rv.toString=function(a){const r=a?function(n){return a.call(this,n,Yy)}:Yy;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function Wj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Mv(t,a,r){if(!a)return t;const n=r&&r.encode||Wj;et.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let d;if(l?d=l(a,r):d=et.isURLSearchParams(a)?a.toString():new rg(a,r).toString(n),d){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class Xy{constructor(){this.handlers=[]}use(a,r,n){return this.handlers.push({fulfilled:a,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){et.forEach(this.handlers,function(n){n!==null&&a(n)})}}const Iv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kj=typeof URLSearchParams<"u"?URLSearchParams:rg,Zj=typeof FormData<"u"?FormData:null,Qj=typeof Blob<"u"?Blob:null,Jj={isBrowser:!0,classes:{URLSearchParams:Kj,FormData:Zj,Blob:Qj},protocols:["http","https","file","blob","url","data"]},ag=typeof window<"u"&&typeof document<"u",km=typeof navigator=="object"&&navigator||void 0,e6=ag&&(!km||["ReactNative","NativeScript","NS"].indexOf(km.product)<0),t6=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",r6=ag&&window.location.href||"http://localhost",a6=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ag,hasStandardBrowserEnv:e6,hasStandardBrowserWebWorkerEnv:t6,navigator:km,origin:r6},Symbol.toStringTag,{value:"Module"})),os={...a6,...Jj};function s6(t,a){return yf(t,new os.classes.URLSearchParams,{visitor:function(r,n,l,d){return os.isNode&&et.isBuffer(r)?(this.append(n,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function n6(t){return et.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function i6(t){const a={},r=Object.keys(t);let n;const l=r.length;let d;for(n=0;n<l;n++)d=r[n],a[d]=t[d];return a}function Ov(t){function a(r,n,l,d){let f=r[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),b=d>=r.length;return f=!f&&et.isArray(l)?l.length:f,b?(et.hasOwnProp(l,f)?l[f]=[l[f],n]:l[f]=n,!h):((!l[f]||!et.isObject(l[f]))&&(l[f]=[]),a(r,n,l[f],d)&&et.isArray(l[f])&&(l[f]=i6(l[f])),!h)}if(et.isFormData(t)&&et.isFunction(t.entries)){const r={};return et.forEachEntry(t,(n,l)=>{a(n6(n),l,r,0)}),r}return null}function l6(t,a,r){if(et.isString(t))try{return(a||JSON.parse)(t),et.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}const ud={transitional:Iv,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const n=r.getContentType()||"",l=n.indexOf("application/json")>-1,d=et.isObject(a);if(d&&et.isHTMLForm(a)&&(a=new FormData(a)),et.isFormData(a))return l?JSON.stringify(Ov(a)):a;if(et.isArrayBuffer(a)||et.isBuffer(a)||et.isStream(a)||et.isFile(a)||et.isBlob(a)||et.isReadableStream(a))return a;if(et.isArrayBufferView(a))return a.buffer;if(et.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(n.indexOf("application/x-www-form-urlencoded")>-1)return s6(a,this.formSerializer).toString();if((h=et.isFileList(a))||n.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return yf(h?{"files[]":a}:a,b&&new b,this.formSerializer)}}return d||l?(r.setContentType("application/json",!1),l6(a)):a}],transformResponse:[function(a){const r=this.transitional||ud.transitional,n=r&&r.forcedJSONParsing,l=this.responseType==="json";if(et.isResponse(a)||et.isReadableStream(a))return a;if(a&&et.isString(a)&&(n&&!this.responseType||l)){const f=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(a)}catch(h){if(f)throw h.name==="SyntaxError"?rr.from(h,rr.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:os.classes.FormData,Blob:os.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],t=>{ud.headers[t]={}});const o6=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c6=t=>{const a={};let r,n,l;return t&&t.split(`
`).forEach(function(f){l=f.indexOf(":"),r=f.substring(0,l).trim().toLowerCase(),n=f.substring(l+1).trim(),!(!r||a[r]&&o6[r])&&(r==="set-cookie"?a[r]?a[r].push(n):a[r]=[n]:a[r]=a[r]?a[r]+", "+n:n)}),a},qy=Symbol("internals");function A0(t){return t&&String(t).trim().toLowerCase()}function Uu(t){return t===!1||t==null?t:et.isArray(t)?t.map(Uu):String(t)}function d6(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)a[n[1]]=n[2];return a}const u6=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Mh(t,a,r,n,l){if(et.isFunction(n))return n.call(this,a,r);if(l&&(a=r),!!et.isString(a)){if(et.isString(n))return a.indexOf(n)!==-1;if(et.isRegExp(n))return n.test(a)}}function f6(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,n)=>r.toUpperCase()+n)}function x6(t,a){const r=et.toCamelCase(" "+a);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(l,d,f){return this[n].call(this,a,l,d,f)},configurable:!0})})}let Ms=class{constructor(a){a&&this.set(a)}set(a,r,n){const l=this;function d(h,b,g){const w=A0(b);if(!w)throw new Error("header name must be a non-empty string");const k=et.findKey(l,w);(!k||l[k]===void 0||g===!0||g===void 0&&l[k]!==!1)&&(l[k||b]=Uu(h))}const f=(h,b)=>et.forEach(h,(g,w)=>d(g,w,b));if(et.isPlainObject(a)||a instanceof this.constructor)f(a,r);else if(et.isString(a)&&(a=a.trim())&&!u6(a))f(c6(a),r);else if(et.isObject(a)&&et.isIterable(a)){let h={},b,g;for(const w of a){if(!et.isArray(w))throw TypeError("Object iterator must return a key-value pair");h[g=w[0]]=(b=h[g])?et.isArray(b)?[...b,w[1]]:[b,w[1]]:w[1]}f(h,r)}else a!=null&&d(r,a,n);return this}get(a,r){if(a=A0(a),a){const n=et.findKey(this,a);if(n){const l=this[n];if(!r)return l;if(r===!0)return d6(l);if(et.isFunction(r))return r.call(this,l,n);if(et.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=A0(a),a){const n=et.findKey(this,a);return!!(n&&this[n]!==void 0&&(!r||Mh(this,this[n],n,r)))}return!1}delete(a,r){const n=this;let l=!1;function d(f){if(f=A0(f),f){const h=et.findKey(n,f);h&&(!r||Mh(n,n[h],h,r))&&(delete n[h],l=!0)}}return et.isArray(a)?a.forEach(d):d(a),l}clear(a){const r=Object.keys(this);let n=r.length,l=!1;for(;n--;){const d=r[n];(!a||Mh(this,this[d],d,a,!0))&&(delete this[d],l=!0)}return l}normalize(a){const r=this,n={};return et.forEach(this,(l,d)=>{const f=et.findKey(n,d);if(f){r[f]=Uu(l),delete r[d];return}const h=a?f6(d):String(d).trim();h!==d&&delete r[d],r[h]=Uu(l),n[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return et.forEach(this,(n,l)=>{n!=null&&n!==!1&&(r[l]=a&&et.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const n=new this(a);return r.forEach(l=>n.set(l)),n}static accessor(a){const n=(this[qy]=this[qy]={accessors:{}}).accessors,l=this.prototype;function d(f){const h=A0(f);n[h]||(x6(l,f),n[h]=!0)}return et.isArray(a)?a.forEach(d):d(a),this}};Ms.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(Ms.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(n){this[r]=n}}});et.freezeMethods(Ms);function Ih(t,a){const r=this||ud,n=a||r,l=Ms.from(n.headers);let d=n.data;return et.forEach(t,function(h){d=h.call(r,d,l.normalize(),a?a.status:void 0)}),l.normalize(),d}function Fv(t){return!!(t&&t.__CANCEL__)}function Tc(t,a,r){rr.call(this,t??"canceled",rr.ERR_CANCELED,a,r),this.name="CanceledError"}et.inherits(Tc,rr,{__CANCEL__:!0});function Lv(t,a,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):a(new rr("Request failed with status code "+r.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function h6(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function m6(t,a){t=t||10;const r=new Array(t),n=new Array(t);let l=0,d=0,f;return a=a!==void 0?a:1e3,function(b){const g=Date.now(),w=n[d];f||(f=g),r[l]=b,n[l]=g;let k=d,E=0;for(;k!==l;)E+=r[k++],k=k%t;if(l=(l+1)%t,l===d&&(d=(d+1)%t),g-f<a)return;const S=w&&g-w;return S?Math.round(E*1e3/S):void 0}}function g6(t,a){let r=0,n=1e3/a,l,d;const f=(g,w=Date.now())=>{r=w,l=null,d&&(clearTimeout(d),d=null),t(...g)};return[(...g)=>{const w=Date.now(),k=w-r;k>=n?f(g,w):(l=g,d||(d=setTimeout(()=>{d=null,f(l)},n-k)))},()=>l&&f(l)]}const Yu=(t,a,r=3)=>{let n=0;const l=m6(50,250);return g6(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,b=f-n,g=l(b),w=f<=h;n=f;const k={loaded:f,total:h,progress:h?f/h:void 0,bytes:b,rate:g||void 0,estimated:g&&h&&w?(h-f)/g:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};t(k)},r)},$y=(t,a)=>{const r=t!=null;return[n=>a[0]({lengthComputable:r,total:t,loaded:n}),a[1]]},Wy=t=>(...a)=>et.asap(()=>t(...a)),p6=os.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,os.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(os.origin),os.navigator&&/(msie|trident)/i.test(os.navigator.userAgent)):()=>!0,y6=os.hasStandardBrowserEnv?{write(t,a,r,n,l,d){const f=[t+"="+encodeURIComponent(a)];et.isNumber(r)&&f.push("expires="+new Date(r).toGMTString()),et.isString(n)&&f.push("path="+n),et.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function b6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function v6(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function Bv(t,a,r){let n=!b6(a);return t&&(n||r==!1)?v6(t,a):a}const Ky=t=>t instanceof Ms?{...t}:t;function mo(t,a){a=a||{};const r={};function n(g,w,k,E){return et.isPlainObject(g)&&et.isPlainObject(w)?et.merge.call({caseless:E},g,w):et.isPlainObject(w)?et.merge({},w):et.isArray(w)?w.slice():w}function l(g,w,k,E){if(et.isUndefined(w)){if(!et.isUndefined(g))return n(void 0,g,k,E)}else return n(g,w,k,E)}function d(g,w){if(!et.isUndefined(w))return n(void 0,w)}function f(g,w){if(et.isUndefined(w)){if(!et.isUndefined(g))return n(void 0,g)}else return n(void 0,w)}function h(g,w,k){if(k in a)return n(g,w);if(k in t)return n(void 0,g)}const b={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(g,w,k)=>l(Ky(g),Ky(w),k,!0)};return et.forEach(Object.keys({...t,...a}),function(w){const k=b[w]||l,E=k(t[w],a[w],w);et.isUndefined(E)&&k!==h||(r[w]=E)}),r}const Pv=t=>{const a=mo({},t);let{data:r,withXSRFToken:n,xsrfHeaderName:l,xsrfCookieName:d,headers:f,auth:h}=a;a.headers=f=Ms.from(f),a.url=Mv(Bv(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let b;if(et.isFormData(r)){if(os.hasStandardBrowserEnv||os.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((b=f.getContentType())!==!1){const[g,...w]=b?b.split(";").map(k=>k.trim()).filter(Boolean):[];f.setContentType([g||"multipart/form-data",...w].join("; "))}}if(os.hasStandardBrowserEnv&&(n&&et.isFunction(n)&&(n=n(a)),n||n!==!1&&p6(a.url))){const g=l&&d&&y6.read(d);g&&f.set(l,g)}return a},w6=typeof XMLHttpRequest<"u",N6=w6&&function(t){return new Promise(function(r,n){const l=Pv(t);let d=l.data;const f=Ms.from(l.headers).normalize();let{responseType:h,onUploadProgress:b,onDownloadProgress:g}=l,w,k,E,S,D;function A(){S&&S(),D&&D(),l.cancelToken&&l.cancelToken.unsubscribe(w),l.signal&&l.signal.removeEventListener("abort",w)}let M=new XMLHttpRequest;M.open(l.method.toUpperCase(),l.url,!0),M.timeout=l.timeout;function I(){if(!M)return;const T=Ms.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),H={data:!h||h==="text"||h==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:T,config:t,request:M};Lv(function(B){r(B),A()},function(B){n(B),A()},H),M=null}"onloadend"in M?M.onloadend=I:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(I)},M.onabort=function(){M&&(n(new rr("Request aborted",rr.ECONNABORTED,t,M)),M=null)},M.onerror=function(){n(new rr("Network Error",rr.ERR_NETWORK,t,M)),M=null},M.ontimeout=function(){let L=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const H=l.transitional||Iv;l.timeoutErrorMessage&&(L=l.timeoutErrorMessage),n(new rr(L,H.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,t,M)),M=null},d===void 0&&f.setContentType(null),"setRequestHeader"in M&&et.forEach(f.toJSON(),function(L,H){M.setRequestHeader(H,L)}),et.isUndefined(l.withCredentials)||(M.withCredentials=!!l.withCredentials),h&&h!=="json"&&(M.responseType=l.responseType),g&&([E,D]=Yu(g,!0),M.addEventListener("progress",E)),b&&M.upload&&([k,S]=Yu(b),M.upload.addEventListener("progress",k),M.upload.addEventListener("loadend",S)),(l.cancelToken||l.signal)&&(w=T=>{M&&(n(!T||T.type?new Tc(null,t,M):T),M.abort(),M=null)},l.cancelToken&&l.cancelToken.subscribe(w),l.signal&&(l.signal.aborted?w():l.signal.addEventListener("abort",w)));const F=h6(l.url);if(F&&os.protocols.indexOf(F)===-1){n(new rr("Unsupported protocol "+F+":",rr.ERR_BAD_REQUEST,t));return}M.send(d||null)})},k6=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let n=new AbortController,l;const d=function(g){if(!l){l=!0,h();const w=g instanceof Error?g:this.reason;n.abort(w instanceof rr?w:new Tc(w instanceof Error?w.message:w))}};let f=a&&setTimeout(()=>{f=null,d(new rr(`timeout ${a} of ms exceeded`,rr.ETIMEDOUT))},a);const h=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(d):g.removeEventListener("abort",d)}),t=null)};t.forEach(g=>g.addEventListener("abort",d));const{signal:b}=n;return b.unsubscribe=()=>et.asap(h),b}},j6=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let n=0,l;for(;n<r;)l=n+a,yield t.slice(n,l),n=l},E6=async function*(t,a){for await(const r of C6(t))yield*j6(r,a)},C6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:n}=await a.read();if(r)break;yield n}}finally{await a.cancel()}},Zy=(t,a,r,n)=>{const l=E6(t,a);let d=0,f,h=b=>{f||(f=!0,n&&n(b))};return new ReadableStream({async pull(b){try{const{done:g,value:w}=await l.next();if(g){h(),b.close();return}let k=w.byteLength;if(r){let E=d+=k;r(E)}b.enqueue(new Uint8Array(w))}catch(g){throw h(g),g}},cancel(b){return h(b),l.return()}},{highWaterMark:2})},bf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zv=bf&&typeof ReadableStream=="function",S6=bf&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Uv=(t,...a)=>{try{return!!t(...a)}catch{return!1}},A6=zv&&Uv(()=>{let t=!1;const a=new Request(os.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),Qy=64*1024,jm=zv&&Uv(()=>et.isReadableStream(new Response("").body)),Xu={stream:jm&&(t=>t.body)};bf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!Xu[a]&&(Xu[a]=et.isFunction(t[a])?r=>r[a]():(r,n)=>{throw new rr(`Response type '${a}' is not supported`,rr.ERR_NOT_SUPPORT,n)})})})(new Response);const _6=async t=>{if(t==null)return 0;if(et.isBlob(t))return t.size;if(et.isSpecCompliantForm(t))return(await new Request(os.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(et.isArrayBufferView(t)||et.isArrayBuffer(t))return t.byteLength;if(et.isURLSearchParams(t)&&(t=t+""),et.isString(t))return(await S6(t)).byteLength},T6=async(t,a)=>{const r=et.toFiniteNumber(t.getContentLength());return r??_6(a)},D6=bf&&(async t=>{let{url:a,method:r,data:n,signal:l,cancelToken:d,timeout:f,onDownloadProgress:h,onUploadProgress:b,responseType:g,headers:w,withCredentials:k="same-origin",fetchOptions:E}=Pv(t);g=g?(g+"").toLowerCase():"text";let S=k6([l,d&&d.toAbortSignal()],f),D;const A=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let M;try{if(b&&A6&&r!=="get"&&r!=="head"&&(M=await T6(w,n))!==0){let H=new Request(a,{method:"POST",body:n,duplex:"half"}),U;if(et.isFormData(n)&&(U=H.headers.get("content-type"))&&w.setContentType(U),H.body){const[B,P]=$y(M,Yu(Wy(b)));n=Zy(H.body,Qy,B,P)}}et.isString(k)||(k=k?"include":"omit");const I="credentials"in Request.prototype;D=new Request(a,{...E,signal:S,method:r.toUpperCase(),headers:w.normalize().toJSON(),body:n,duplex:"half",credentials:I?k:void 0});let F=await fetch(D,E);const T=jm&&(g==="stream"||g==="response");if(jm&&(h||T&&A)){const H={};["status","statusText","headers"].forEach(z=>{H[z]=F[z]});const U=et.toFiniteNumber(F.headers.get("content-length")),[B,P]=h&&$y(U,Yu(Wy(h),!0))||[];F=new Response(Zy(F.body,Qy,B,()=>{P&&P(),A&&A()}),H)}g=g||"text";let L=await Xu[et.findKey(Xu,g)||"text"](F,t);return!T&&A&&A(),await new Promise((H,U)=>{Lv(H,U,{data:L,headers:Ms.from(F.headers),status:F.status,statusText:F.statusText,config:t,request:D})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new rr("Network Error",rr.ERR_NETWORK,t,D),{cause:I.cause||I}):rr.from(I,I&&I.code,t,D)}}),Em={http:Xj,xhr:N6,fetch:D6};et.forEach(Em,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const Jy=t=>`- ${t}`,R6=t=>et.isFunction(t)||t===null||t===!1,Hv={getAdapter:t=>{t=et.isArray(t)?t:[t];const{length:a}=t;let r,n;const l={};for(let d=0;d<a;d++){r=t[d];let f;if(n=r,!R6(r)&&(n=Em[(f=String(r)).toLowerCase()],n===void 0))throw new rr(`Unknown adapter '${f}'`);if(n)break;l[f||"#"+d]=n}if(!n){const d=Object.entries(l).map(([h,b])=>`adapter ${h} `+(b===!1?"is not supported by the environment":"is not available in the build"));let f=a?d.length>1?`since :
`+d.map(Jy).join(`
`):" "+Jy(d[0]):"as no adapter specified";throw new rr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return n},adapters:Em};function Oh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Tc(null,t)}function eb(t){return Oh(t),t.headers=Ms.from(t.headers),t.data=Ih.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Hv.getAdapter(t.adapter||ud.adapter)(t).then(function(n){return Oh(t),n.data=Ih.call(t,t.transformResponse,n),n.headers=Ms.from(n.headers),n},function(n){return Fv(n)||(Oh(t),n&&n.response&&(n.response.data=Ih.call(t,t.transformResponse,n.response),n.response.headers=Ms.from(n.response.headers))),Promise.reject(n)})}const Vv="1.11.0",vf={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{vf[t]=function(n){return typeof n===t||"a"+(a<1?"n ":" ")+t}});const tb={};vf.transitional=function(a,r,n){function l(d,f){return"[Axios v"+Vv+"] Transitional option '"+d+"'"+f+(n?". "+n:"")}return(d,f,h)=>{if(a===!1)throw new rr(l(f," has been removed"+(r?" in "+r:"")),rr.ERR_DEPRECATED);return r&&!tb[f]&&(tb[f]=!0,console.warn(l(f," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(d,f,h):!0}};vf.spelling=function(a){return(r,n)=>(console.warn(`${n} is likely a misspelling of ${a}`),!0)};function M6(t,a,r){if(typeof t!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let l=n.length;for(;l-- >0;){const d=n[l],f=a[d];if(f){const h=t[d],b=h===void 0||f(h,d,t);if(b!==!0)throw new rr("option "+d+" must be "+b,rr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new rr("Unknown option "+d,rr.ERR_BAD_OPTION)}}const Hu={assertOptions:M6,validators:vf},ti=Hu.validators;let uo=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Xy,response:new Xy}}async request(a,r){try{return await this._request(a,r)}catch(n){if(n instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{n.stack?d&&!String(n.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+d):n.stack=d}catch{}}throw n}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=mo(this.defaults,r);const{transitional:n,paramsSerializer:l,headers:d}=r;n!==void 0&&Hu.assertOptions(n,{silentJSONParsing:ti.transitional(ti.boolean),forcedJSONParsing:ti.transitional(ti.boolean),clarifyTimeoutError:ti.transitional(ti.boolean)},!1),l!=null&&(et.isFunction(l)?r.paramsSerializer={serialize:l}:Hu.assertOptions(l,{encode:ti.function,serialize:ti.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Hu.assertOptions(r,{baseUrl:ti.spelling("baseURL"),withXsrfToken:ti.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let f=d&&et.merge(d.common,d[r.method]);d&&et.forEach(["delete","get","head","post","put","patch","common"],D=>{delete d[D]}),r.headers=Ms.concat(f,d);const h=[];let b=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(r)===!1||(b=b&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const g=[];this.interceptors.response.forEach(function(A){g.push(A.fulfilled,A.rejected)});let w,k=0,E;if(!b){const D=[eb.bind(this),void 0];for(D.unshift(...h),D.push(...g),E=D.length,w=Promise.resolve(r);k<E;)w=w.then(D[k++],D[k++]);return w}E=h.length;let S=r;for(k=0;k<E;){const D=h[k++],A=h[k++];try{S=D(S)}catch(M){A.call(this,M);break}}try{w=eb.call(this,S)}catch(D){return Promise.reject(D)}for(k=0,E=g.length;k<E;)w=w.then(g[k++],g[k++]);return w}getUri(a){a=mo(this.defaults,a);const r=Bv(a.baseURL,a.url,a.allowAbsoluteUrls);return Mv(r,a.params,a.paramsSerializer)}};et.forEach(["delete","get","head","options"],function(a){uo.prototype[a]=function(r,n){return this.request(mo(n||{},{method:a,url:r,data:(n||{}).data}))}});et.forEach(["post","put","patch"],function(a){function r(n){return function(d,f,h){return this.request(mo(h||{},{method:a,headers:n?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}uo.prototype[a]=r(),uo.prototype[a+"Form"]=r(!0)});let I6=class Gv{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const n=this;this.promise.then(l=>{if(!n._listeners)return;let d=n._listeners.length;for(;d-- >0;)n._listeners[d](l);n._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(h=>{n.subscribe(h),d=h}).then(l);return f.cancel=function(){n.unsubscribe(d)},f},a(function(d,f,h){n.reason||(n.reason=new Tc(d,f,h),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=n=>{a.abort(n)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new Gv(function(l){a=l}),cancel:a}}};function O6(t){return function(r){return t.apply(null,r)}}function F6(t){return et.isObject(t)&&t.isAxiosError===!0}const Cm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Cm).forEach(([t,a])=>{Cm[a]=t});function Yv(t){const a=new uo(t),r=wv(uo.prototype.request,a);return et.extend(r,uo.prototype,a,{allOwnKeys:!0}),et.extend(r,a,null,{allOwnKeys:!0}),r.create=function(l){return Yv(mo(t,l))},r}const la=Yv(ud);la.Axios=uo;la.CanceledError=Tc;la.CancelToken=I6;la.isCancel=Fv;la.VERSION=Vv;la.toFormData=yf;la.AxiosError=rr;la.Cancel=la.CanceledError;la.all=function(a){return Promise.all(a)};la.spread=O6;la.isAxiosError=F6;la.mergeConfig=mo;la.AxiosHeaders=Ms;la.formToJSON=t=>Ov(et.isHTMLForm(t)?new FormData(t):t);la.getAdapter=Hv.getAdapter;la.HttpStatusCode=Cm;la.default=la;const{Axios:oO,AxiosError:cO,CanceledError:dO,isCancel:uO,CancelToken:fO,VERSION:xO,all:hO,Cancel:mO,isAxiosError:gO,spread:pO,toFormData:yO,AxiosHeaders:bO,HttpStatusCode:vO,formToJSON:wO,getAdapter:NO,mergeConfig:kO}=la,Te=la.create({baseURL:"https://apmt.apivcm.shop/api",withCredentials:!0});let Fh=!1,Sm=[];const rb=(t,a=null)=>{Sm.forEach(r=>{t?r.reject(t):r.resolve(a)}),Sm=[]};Te.interceptors.request.use(t=>{const a=["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries","/auth/verify","/auth/resend","/auth/forgot-password-unified","/auth/reset-password-unified","/auth/check-reset-token","/auth/verify-invite-link","/auth/complete-registration"],r=t.url||"";if(a.some(l=>r?r.includes(l)||t.baseURL&&(t.baseURL+r).includes(l):!1))return t.withCredentials=!1,t.headers&&t.headers.Authorization&&delete t.headers.Authorization,t;try{const l=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");l&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${l}`),t.withCredentials=!0}catch{}return t},t=>Promise.reject(t));Te.interceptors.response.use(t=>t,async t=>{const a=t.config,r=a.url||"";if(["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries"].some(d=>r.includes(d)))return Promise.reject(t);if(t.response&&t.response.status===401&&!a._retry){if(a._retry=!0,Fh)return new Promise((d,f)=>{Sm.push({resolve:d,reject:f})}).then(d=>(a.headers.Authorization=`Bearer ${d}`,Te(a))).catch(d=>Promise.reject(d));Fh=!0;try{const d=await la.post("https://apmt.apivcm.shop/api/auth/refresh",{},{withCredentials:!0,validateStatus:f=>f<500});if(d.status===200&&d.data?.accessToken){const f=d.data.accessToken;return localStorage.setItem("accessToken",f),sessionStorage.setItem("accessToken",f),Te.defaults.headers.common.Authorization=`Bearer ${f}`,a.headers.Authorization=`Bearer ${f}`,rb(null,f),Te(a)}else throw new Error("Refresh failed")}catch(d){return console.log("Token refresh failed, clearing tokens"),localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),delete Te.defaults.headers.common.Authorization,rb(d,null),typeof window<"u"&&(window.location.href="/login?session=expired"),Promise.reject(d)}finally{Fh=!1}}return t.response&&t.response.status===429&&console.error("Rate limited. Please wait before trying again."),Promise.reject(t)});const Or=C.createContext(null);function L6({children:t}){const[a,r]=C.useState(()=>{const E=localStorage.getItem("houseOwnerToken"),S=localStorage.getItem("houseOwnerData"),D=localStorage.getItem("userType");if(E&&S&&D==="houseowner")return{accessToken:E,user:JSON.parse(S),userType:"houseowner"};const A=localStorage.getItem("auth");return A?{...JSON.parse(A),userType:localStorage.getItem("userType")||"admin"}:{accessToken:null,user:null,userType:null}}),n=hr(),l=C.useRef(null),d=600*1e3,f=C.useCallback(()=>{r({accessToken:null,user:null,userType:null}),localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("houseOwnerToken"),localStorage.removeItem("houseOwnerData"),localStorage.removeItem("lastActivity"),l.current&&clearTimeout(l.current),n("/login")},[n]),h=C.useCallback(()=>{l.current&&clearTimeout(l.current),localStorage.setItem("lastActivity",Date.now().toString()),l.current=setTimeout(()=>{f()},d)},[f,d]),b=C.useCallback(()=>{const E=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],S=()=>{h()};E.forEach(A=>{window.addEventListener(A,S,{passive:!0})});const D=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",D),()=>{E.forEach(A=>{window.removeEventListener(A,S)}),document.removeEventListener("visibilitychange",D),l.current&&clearTimeout(l.current)}},[h]);C.useEffect(()=>{if(a&&a.accessToken){const E=localStorage.getItem("lastActivity");if(E){const D=parseInt(E,10),A=Date.now()-D;if(A>d){f();return}const M=d-A;l.current=setTimeout(f,M)}else h();return b()}else l.current&&clearTimeout(l.current)},[a,h,b,f,d]);const g=C.useCallback(E=>{const S=E.user?.isHouseOwner?"houseowner":"admin",D={...E,userType:S};r(D),E&&E.accessToken?(S==="houseowner"?(localStorage.setItem("houseOwnerToken",E.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(E.user))):(localStorage.setItem("auth",JSON.stringify(E)),localStorage.setItem("accessToken",E.accessToken),localStorage.setItem("user",JSON.stringify(E.user))),localStorage.setItem("userType",S),h()):f()},[h,f]),w=C.useCallback(async()=>{try{a.userType==="houseowner"?await Te.post("/houseowner-auth/logout",{},{credentials:"include"}):await Te.post("/auth/logout",{},{credentials:"include"})}catch(E){console.error("Logout error:",E)}finally{f()}},[f,a.userType]),k={auth:a,setAuth:g,logout:w,resetActivityTimer:h};return e.jsx(Or.Provider,{value:k,children:t})}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),P6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,n)=>n?n.toUpperCase():r.toLowerCase()),ab=t=>{const a=P6(t);return a.charAt(0).toUpperCase()+a.slice(1)},Xv=(...t)=>t.filter((a,r,n)=>!!a&&a.trim()!==""&&n.indexOf(a)===r).join(" ").trim(),z6=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var U6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=C.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:l="",children:d,iconNode:f,...h},b)=>C.createElement("svg",{ref:b,...U6,width:a,height:a,stroke:t,strokeWidth:n?Number(r)*24/Number(a):r,className:Xv("lucide",l),...!d&&!z6(h)&&{"aria-hidden":"true"},...h},[...f.map(([g,w])=>C.createElement(g,w)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=(t,a)=>{const r=C.forwardRef(({className:n,...l},d)=>C.createElement(H6,{ref:d,iconNode:a,className:Xv(`lucide-${B6(ab(t))}`,`lucide-${t}`,n),...l}));return r.displayName=ab(t),r};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],G6=yt("activity",V6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],sb=yt("arrow-big-right",Y6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],q6=yt("arrow-down-right",X6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],kc=yt("arrow-left",$6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],K6=yt("arrow-right",W6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],Cl=yt("arrow-up-right",Z6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],J6=yt("award",Q6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],tE=yt("banknote-arrow-down",eE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],aE=yt("bath",rE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],nE=yt("bed",sE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Lh=yt("bell",iE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],qu=yt("briefcase",lE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Ia=yt("building-2",oE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Li=yt("building",cE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],uE=yt("calendar-clock",dE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Tl=yt("calendar",fE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],qv=yt("camera",xE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Vu=yt("chart-no-axes-column-increasing",hE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],hn=yt("check",mE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Dl=yt("chevron-down",gE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pE=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Mn=yt("chevron-left",pE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Am=yt("chevron-right",yE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],jc=yt("chevron-up",bE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],ia=yt("circle-alert",vE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],$a=yt("circle-check-big",wE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kE=yt("circle-play",NE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],EE=yt("circle-stop",jE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],_m=yt("circle-x",CE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],nb=yt("clipboard-list",SE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Ks=yt("clock",AE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _E=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],sg=yt("credit-card",_E);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Xs=yt("dollar-sign",TE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ol=yt("download",DE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],In=yt("eye-off",RE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Qs=yt("eye",ME);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],OE=yt("file-spreadsheet",IE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],xr=yt("file-text",FE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],wf=yt("funnel",LE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],$v=yt("globe",BE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PE=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],zE=yt("hash",PE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UE=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Pr=yt("house",UE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Wv=yt("id-card",HE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Zs=yt("image",VE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Kv=yt("key",GE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z",key:"15q6uc"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845",key:"byia6g"}]],XE=yt("layers-2",YE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Nf=yt("layers",qE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],WE=yt("layout-dashboard",$E);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Gt=yt("loader",KE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Tm=yt("log-out",ZE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Rl=yt("mail",QE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],go=yt("map-pin",JE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Dc=yt("menu",eC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Dm=yt("moon",tC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],aC=yt("palette",rC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],nC=yt("pause",sC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],lC=yt("phone-call",iC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Rc=yt("phone",oC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Zv=yt("play",cC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],La=yt("plus",dC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],X0=yt("qr-code",uC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ea=yt("receipt",fC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$u=yt("refresh-cw",xC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Qv=yt("rotate-cw",hC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],kf=yt("save",mC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],js=yt("search",gC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Jv=yt("send",pC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Wu=yt("settings",yC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],ib=yt("shield-check",bC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],po=yt("shield",vC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],NC=yt("square-check-big",wC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ga=yt("square-pen",kC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],Ku=yt("square",jC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],CC=yt("star",EC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Rm=yt("sun",SC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],ew=yt("tag",AC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],tw=yt("timer",_C);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],yo=yt("toggle-left",TC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],bo=yt("toggle-right",DC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fr=yt("trash-2",RC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],IC=yt("triangle-alert",MC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Is=yt("upload",OC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],rw=yt("user-check",FC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],q0=yt("user-plus",LC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]],PC=yt("user-x",BC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],us=yt("user",zC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],On=yt("users",UC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],lb=yt("workflow",HC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],Zu=yt("wrench",VC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],gr=yt("x",GC);function aw(t){var a,r,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(r=aw(t[a]))&&(n&&(n+=" "),n+=r)}else for(r in t)t[r]&&(n&&(n+=" "),n+=r);return n}function fo(){for(var t,a,r=0,n="",l=arguments.length;r<l;r++)(t=arguments[r])&&(a=aw(t))&&(n&&(n+=" "),n+=a);return n}function YC(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}YC(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var fd=t=>typeof t=="number"&&!isNaN(t),vo=t=>typeof t=="string",Bi=t=>typeof t=="function",XC=t=>vo(t)||fd(t),Mm=t=>vo(t)||Bi(t)?t:null,qC=(t,a)=>t===!1||fd(t)&&t>0?t:a,Im=t=>C.isValidElement(t)||vo(t)||Bi(t)||fd(t);function $C(t,a,r=300){let{scrollHeight:n,style:l}=t;requestAnimationFrame(()=>{l.minHeight="initial",l.height=n+"px",l.transition=`all ${r}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(a,r)})})}function WC({enter:t,exit:a,appendPosition:r=!1,collapse:n=!0,collapseDuration:l=300}){return function({children:d,position:f,preventExitTransition:h,done:b,nodeRef:g,isIn:w,playToast:k}){let E=r?`${t}--${f}`:t,S=r?`${a}--${f}`:a,D=C.useRef(0);return C.useLayoutEffect(()=>{let A=g.current,M=E.split(" "),I=F=>{F.target===g.current&&(k(),A.removeEventListener("animationend",I),A.removeEventListener("animationcancel",I),D.current===0&&F.type!=="animationcancel"&&A.classList.remove(...M))};A.classList.add(...M),A.addEventListener("animationend",I),A.addEventListener("animationcancel",I)},[]),C.useEffect(()=>{let A=g.current,M=()=>{A.removeEventListener("animationend",M),n?$C(A,b,l):b()};w||(h?M():(D.current=1,A.className+=` ${S}`,A.addEventListener("animationend",M)))},[w]),Dr.createElement(Dr.Fragment,null,d)}}function ob(t,a){return{content:sw(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:a}}function sw(t,a,r=!1){return C.isValidElement(t)&&!vo(t.type)?C.cloneElement(t,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):Bi(t)?t({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):t}function KC({closeToast:t,theme:a,ariaLabel:r="close"}){return Dr.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:n=>{n.stopPropagation(),t(!0)},"aria-label":r},Dr.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Dr.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function ZC({delay:t,isRunning:a,closeToast:r,type:n="default",hide:l,className:d,controlledProgress:f,progress:h,rtl:b,isIn:g,theme:w}){let k=l||f&&h===0,E={animationDuration:`${t}ms`,animationPlayState:a?"running":"paused"};f&&(E.transform=`scaleX(${h})`);let S=fo("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${w}`,`Toastify__progress-bar--${n}`,{"Toastify__progress-bar--rtl":b}),D=Bi(d)?d({rtl:b,type:n,defaultClassName:S}):fo(S,d),A={[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]:f&&h<1?null:()=>{g&&r()}};return Dr.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":k},Dr.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${w} Toastify__progress-bar--${n}`}),Dr.createElement("div",{role:"progressbar","aria-hidden":k?"true":"false","aria-label":"notification timer",className:D,style:E,...A}))}var QC=1,nw=()=>`${QC++}`;function JC(t,a,r){let n=1,l=0,d=[],f=[],h=a,b=new Map,g=new Set,w=F=>(g.add(F),()=>g.delete(F)),k=()=>{f=Array.from(b.values()),g.forEach(F=>F())},E=({containerId:F,toastId:T,updateId:L})=>{let H=F?F!==t:t!==1,U=b.has(T)&&L==null;return H||U},S=(F,T)=>{b.forEach(L=>{var H;(T==null||T===L.props.toastId)&&((H=L.toggle)==null||H.call(L,F))})},D=F=>{var T,L;(L=(T=F.props)==null?void 0:T.onClose)==null||L.call(T,F.removalReason),F.isActive=!1},A=F=>{if(F==null)b.forEach(D);else{let T=b.get(F);T&&D(T)}k()},M=()=>{l-=d.length,d=[]},I=F=>{var T,L;let{toastId:H,updateId:U}=F.props,B=U==null;F.staleId&&b.delete(F.staleId),F.isActive=!0,b.set(H,F),k(),r(ob(F,B?"added":"updated")),B&&((L=(T=F.props).onOpen)==null||L.call(T))};return{id:t,props:h,observe:w,toggle:S,removeToast:A,toasts:b,clearQueue:M,buildToast:(F,T)=>{if(E(T))return;let{toastId:L,updateId:H,data:U,staleId:B,delay:P}=T,z=H==null;z&&l++;let Z={...h,style:h.toastStyle,key:n++,...Object.fromEntries(Object.entries(T).filter(([G,se])=>se!=null)),toastId:L,updateId:H,data:U,isIn:!1,className:Mm(T.className||h.toastClassName),progressClassName:Mm(T.progressClassName||h.progressClassName),autoClose:T.isLoading?!1:qC(T.autoClose,h.autoClose),closeToast(G){b.get(L).removalReason=G,A(L)},deleteToast(){let G=b.get(L);if(G!=null){if(r(ob(G,"removed")),b.delete(L),l--,l<0&&(l=0),d.length>0){I(d.shift());return}k()}}};Z.closeButton=h.closeButton,T.closeButton===!1||Im(T.closeButton)?Z.closeButton=T.closeButton:T.closeButton===!0&&(Z.closeButton=Im(h.closeButton)?h.closeButton:!0);let te={content:F,props:Z,staleId:B};h.limit&&h.limit>0&&l>h.limit&&z?d.push(te):fd(P)?setTimeout(()=>{I(te)},P):I(te)},setProps(F){h=F},setToggle:(F,T)=>{let L=b.get(F);L&&(L.toggle=T)},isToastActive:F=>{var T;return(T=b.get(F))==null?void 0:T.isActive},getSnapshot:()=>f}}var ws=new Map,$0=[],Om=new Set,eS=t=>Om.forEach(a=>a(t)),iw=()=>ws.size>0;function tS(){$0.forEach(t=>ow(t.content,t.options)),$0=[]}var rS=(t,{containerId:a})=>{var r;return(r=ws.get(a||1))==null?void 0:r.toasts.get(t)};function lw(t,a){var r;if(a)return!!((r=ws.get(a))!=null&&r.isToastActive(t));let n=!1;return ws.forEach(l=>{l.isToastActive(t)&&(n=!0)}),n}function aS(t){if(!iw()){$0=$0.filter(a=>t!=null&&a.options.toastId!==t);return}if(t==null||XC(t))ws.forEach(a=>{a.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let a=ws.get(t.containerId);a?a.removeToast(t.id):ws.forEach(r=>{r.removeToast(t.id)})}}var sS=(t={})=>{ws.forEach(a=>{a.props.limit&&(!t.containerId||a.id===t.containerId)&&a.clearQueue()})};function ow(t,a){Im(t)&&(iw()||$0.push({content:t,options:a}),ws.forEach(r=>{r.buildToast(t,a)}))}function nS(t){var a;(a=ws.get(t.containerId||1))==null||a.setToggle(t.id,t.fn)}function cw(t,a){ws.forEach(r=>{(a==null||!(a!=null&&a.containerId)||a?.containerId===r.id)&&r.toggle(t,a?.id)})}function iS(t){let a=t.containerId||1;return{subscribe(r){let n=JC(a,t,eS);ws.set(a,n);let l=n.observe(r);return tS(),()=>{l(),ws.delete(a)}},setProps(r){var n;(n=ws.get(a))==null||n.setProps(r)},getSnapshot(){var r;return(r=ws.get(a))==null?void 0:r.getSnapshot()}}}function lS(t){return Om.add(t),()=>{Om.delete(t)}}function oS(t){return t&&(vo(t.toastId)||fd(t.toastId))?t.toastId:nw()}function xd(t,a){return ow(t,a),a.toastId}function jf(t,a){return{...a,type:a&&a.type||t,toastId:oS(a)}}function Ef(t){return(a,r)=>xd(a,jf(t,r))}function ne(t,a){return xd(t,jf("default",a))}ne.loading=(t,a)=>xd(t,jf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function cS(t,{pending:a,error:r,success:n},l){let d;a&&(d=vo(a)?ne.loading(a,l):ne.loading(a.render,{...l,...a}));let f={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(g,w,k)=>{if(w==null){ne.dismiss(d);return}let E={type:g,...f,...l,data:k},S=vo(w)?{render:w}:w;return d?ne.update(d,{...E,...S}):ne(S.render,{...E,...S}),k},b=Bi(t)?t():t;return b.then(g=>h("success",n,g)).catch(g=>h("error",r,g)),b}ne.promise=cS;ne.success=Ef("success");ne.info=Ef("info");ne.error=Ef("error");ne.warning=Ef("warning");ne.warn=ne.warning;ne.dark=(t,a)=>xd(t,jf("default",{theme:"dark",...a}));function dS(t){aS(t)}ne.dismiss=dS;ne.clearWaitingQueue=sS;ne.isActive=lw;ne.update=(t,a={})=>{let r=rS(t,a);if(r){let{props:n,content:l}=r,d={delay:100,...n,...a,toastId:a.toastId||t,updateId:nw()};d.toastId!==t&&(d.staleId=t);let f=d.render||l;delete d.render,xd(f,d)}};ne.done=t=>{ne.update(t,{progress:1})};ne.onChange=lS;ne.play=t=>cw(!0,t);ne.pause=t=>cw(!1,t);function uS(t){var a;let{subscribe:r,getSnapshot:n,setProps:l}=C.useRef(iS(t)).current;l(t);let d=(a=C.useSyncExternalStore(r,n,n))==null?void 0:a.slice();function f(h){if(!d)return[];let b=new Map;return t.newestOnTop&&d.reverse(),d.forEach(g=>{let{position:w}=g.props;b.has(w)||b.set(w,[]),b.get(w).push(g)}),Array.from(b,g=>h(g[0],g[1]))}return{getToastToRender:f,isToastActive:lw,count:d?.length}}function fS(t){let[a,r]=C.useState(!1),[n,l]=C.useState(!1),d=C.useRef(null),f=C.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:b,closeToast:g,onClick:w,closeOnClick:k}=t;nS({id:t.toastId,containerId:t.containerId,fn:r}),C.useEffect(()=>{if(t.pauseOnFocusLoss)return E(),()=>{S()}},[t.pauseOnFocusLoss]);function E(){document.hasFocus()||I(),window.addEventListener("focus",M),window.addEventListener("blur",I)}function S(){window.removeEventListener("focus",M),window.removeEventListener("blur",I)}function D(B){if(t.draggable===!0||t.draggable===B.pointerType){F();let P=d.current;f.canCloseOnClick=!0,f.canDrag=!0,P.style.transition="none",t.draggableDirection==="x"?(f.start=B.clientX,f.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(f.start=B.clientY,f.removalDistance=P.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function A(B){let{top:P,bottom:z,left:Z,right:te}=d.current.getBoundingClientRect();B.nativeEvent.type!=="touchend"&&t.pauseOnHover&&B.clientX>=Z&&B.clientX<=te&&B.clientY>=P&&B.clientY<=z?I():M()}function M(){r(!0)}function I(){r(!1)}function F(){f.didMove=!1,document.addEventListener("pointermove",L),document.addEventListener("pointerup",H)}function T(){document.removeEventListener("pointermove",L),document.removeEventListener("pointerup",H)}function L(B){let P=d.current;if(f.canDrag&&P){f.didMove=!0,a&&I(),t.draggableDirection==="x"?f.delta=B.clientX-f.start:f.delta=B.clientY-f.start,f.start!==B.clientX&&(f.canCloseOnClick=!1);let z=t.draggableDirection==="x"?`${f.delta}px, var(--y)`:`0, calc(${f.delta}px + var(--y))`;P.style.transform=`translate3d(${z},0)`,P.style.opacity=`${1-Math.abs(f.delta/f.removalDistance)}`}}function H(){T();let B=d.current;if(f.canDrag&&f.didMove&&B){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance){l(!0),t.closeToast(!0),t.collapseAll();return}B.style.transition="transform 0.2s, opacity 0.2s",B.style.removeProperty("transform"),B.style.removeProperty("opacity")}}let U={onPointerDown:D,onPointerUp:A};return h&&b&&(U.onMouseEnter=I,t.stacked||(U.onMouseLeave=M)),k&&(U.onClick=B=>{w&&w(B),f.canCloseOnClick&&g(!0)}),{playToast:M,pauseToast:I,isRunning:a,preventExitTransition:n,toastRef:d,eventHandlers:U}}var xS=typeof window<"u"?C.useLayoutEffect:C.useEffect,Cf=({theme:t,type:a,isLoading:r,...n})=>Dr.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...n});function hS(t){return Dr.createElement(Cf,{...t},Dr.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function mS(t){return Dr.createElement(Cf,{...t},Dr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function gS(t){return Dr.createElement(Cf,{...t},Dr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function pS(t){return Dr.createElement(Cf,{...t},Dr.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function yS(){return Dr.createElement("div",{className:"Toastify__spinner"})}var Fm={info:mS,warning:hS,success:gS,error:pS,spinner:yS},bS=t=>t in Fm;function vS({theme:t,type:a,isLoading:r,icon:n}){let l=null,d={theme:t,type:a};return n===!1||(Bi(n)?l=n({...d,isLoading:r}):C.isValidElement(n)?l=C.cloneElement(n,d):r?l=Fm.spinner():bS(a)&&(l=Fm[a](d))),l}var wS=t=>{let{isRunning:a,preventExitTransition:r,toastRef:n,eventHandlers:l,playToast:d}=fS(t),{closeButton:f,children:h,autoClose:b,onClick:g,type:w,hideProgressBar:k,closeToast:E,transition:S,position:D,className:A,style:M,progressClassName:I,updateId:F,role:T,progress:L,rtl:H,toastId:U,deleteToast:B,isIn:P,isLoading:z,closeOnClick:Z,theme:te,ariaLabel:G}=t,se=fo("Toastify__toast",`Toastify__toast-theme--${te}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":Z}),ie=Bi(A)?A({rtl:H,position:D,type:w,defaultClassName:se}):fo(se,A),Y=vS(t),q=!!L||!b,ce={closeToast:E,type:w,theme:te},pe=null;return f===!1||(Bi(f)?pe=f(ce):C.isValidElement(f)?pe=C.cloneElement(f,ce):pe=KC(ce)),Dr.createElement(S,{isIn:P,done:B,position:D,preventExitTransition:r,nodeRef:n,playToast:d},Dr.createElement("div",{id:U,tabIndex:0,onClick:g,"data-in":P,className:ie,...l,style:M,ref:n,...P&&{role:T,"aria-label":G}},Y!=null&&Dr.createElement("div",{className:fo("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},Y),sw(h,t,!a),pe,!t.customProgressBar&&Dr.createElement(ZC,{...F&&!q?{key:`p-${F}`}:{},rtl:H,theme:te,delay:b,isRunning:a,isIn:P,closeToast:E,hide:k,type:w,className:I,controlledProgress:q,progress:L||0})))},NS=(t,a=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:a}),kS=WC(NS("bounce",!0)),jS={position:"top-right",transition:kS,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function nr(t){let a={...jS,...t},r=t.stacked,[n,l]=C.useState(!0),d=C.useRef(null),{getToastToRender:f,isToastActive:h,count:b}=uS(a),{className:g,style:w,rtl:k,containerId:E,hotKeys:S}=a;function D(M){let I=fo("Toastify__toast-container",`Toastify__toast-container--${M}`,{"Toastify__toast-container--rtl":k});return Bi(g)?g({position:M,rtl:k,defaultClassName:I}):fo(I,Mm(g))}function A(){r&&(l(!0),ne.play())}return xS(()=>{var M;if(r){let I=d.current.querySelectorAll('[data-in="true"]'),F=12,T=(M=a.position)==null?void 0:M.includes("top"),L=0,H=0;Array.from(I).reverse().forEach((U,B)=>{let P=U;P.classList.add("Toastify__toast--stacked"),B>0&&(P.dataset.collapsed=`${n}`),P.dataset.pos||(P.dataset.pos=T?"top":"bot");let z=L*(n?.2:1)+(n?0:F*B);P.style.setProperty("--y",`${T?z:z*-1}px`),P.style.setProperty("--g",`${F}`),P.style.setProperty("--s",`${1-(n?H:0)}`),L+=P.offsetHeight,H+=.025})}},[n,b,r]),C.useEffect(()=>{function M(I){var F;let T=d.current;S(I)&&((F=T.querySelector('[tabIndex="0"]'))==null||F.focus(),l(!1),ne.pause()),I.key==="Escape"&&(document.activeElement===T||T!=null&&T.contains(document.activeElement))&&(l(!0),ne.play())}return document.addEventListener("keydown",M),()=>{document.removeEventListener("keydown",M)}},[S]),Dr.createElement("section",{ref:d,className:"Toastify",id:E,onMouseEnter:()=>{r&&(l(!1),ne.pause())},onMouseLeave:A,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},f((M,I)=>{let F=I.length?{...w}:{...w,pointerEvents:"none"};return Dr.createElement("div",{tabIndex:-1,className:D(M),"data-stacked":r,style:F,key:`c-${M}`},I.map(({content:T,props:L})=>Dr.createElement(wS,{...L,stacked:r,collapseAll:A,isIn:h(L.toastId,L.containerId),key:`t-${L.key}`},T)))}))}function ES(){const{setAuth:t}=C.useContext(Or),[a,r]=C.useState(""),[n,l]=C.useState(""),[d,f]=C.useState(!1),[h,b]=C.useState(null),[g,w]=C.useState(!1),[k,E]=C.useState(!1),[S,D]=C.useState(!1),[A,M]=C.useState(0),[I,F]=C.useState("admin"),T=hr();let[L,H]=ld();C.useEffect(()=>{const q=L.get("token"),ce=L.get("id"),pe=L.get("type");q&&ce&&(pe==="houseowner"?B(q,ce):U(q,ce))},[L]);const U=async(q,ce)=>{w(!0),b(null);try{await Te.post("/auth/verify",{token:q,id:ce}),ne.success("Email verified successfully! You can now log in."),H({})}catch(pe){ne.error(pe.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}},B=async(q,ce)=>{w(!0),b(null);try{const pe=await Te.post("/houseowner-auth/verify",{token:q,id:ce});pe.data.success&&(pe.data.requires_password?(ne.success("Email verified! Please set your password."),T(`/houseowner/set-password?token=${q}&id=${ce}`)):(ne.success("Email verified successfully! You can now log in."),H({})))}catch(pe){ne.error(pe.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}};async function P(q){if(q.preventDefault(),!(g||S)){b(null),w(!0);try{const ce=await Te.post("/auth/login-unified",{email:a,password:n});if(ce.data.accessToken){t({accessToken:ce.data.accessToken,user:ce.data.user}),ne.success("Login Successful!");try{localStorage.setItem("accessToken",ce.data.accessToken),localStorage.setItem("user",JSON.stringify(ce.data.user)),localStorage.setItem("userType",ce.data.user.user_type)}catch(pe){console.warn("Could not save to localStorage:",pe)}z(ce.data.user);return}}catch(ce){Z(ce)}finally{w(!1)}}}const z=q=>{q.user_type==="houseowner"?T("/houseowner/dashboard"):q.role==="Admin"?T("/admindashboard"):T("/employee-dashboard")},Z=q=>{if(q.response?.status===429)te(q);else{const pe=q.response?.data?.message||"Login failed";b(pe),ne.error(pe),(pe.includes("verify")||pe.includes("verified"))&&G()}},te=q=>{const ce=q.response?.headers?.["retry-after"],pe=ce?Math.max(1,Number(ce)):60;ne.error(`Too many requests. Please wait ${pe}s before trying again.`),D(!0),M(pe);try{localStorage.setItem("rateLimitedUntil",Date.now()+pe*1e3)}catch(X){console.warn("Could not save rate limit info:",X)}let me=pe;const le=setInterval(()=>{if(me-=1,M(me),me<=0){clearInterval(le),D(!1),M(0);try{localStorage.removeItem("rateLimitedUntil")}catch(X){console.warn("Could not clear rate limit info:",X)}}},1e3)},G=()=>{ne.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:se,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:k,children:k?"Sending...":"Resend Verification"})]}),{autoClose:5e3})},se=async q=>{if(q.preventDefault(),!a){ne.error("Please enter your email first");return}E(!0);try{I==="houseowner"?await Te.post("/houseowner-auth/resend-verification",{email:a}):await Te.post("/auth/resend",{email:a}),ne.success("Verification email sent! Please check your inbox.")}catch(ce){ne.error(ce.response?.data?.message||"Failed to resend verification email")}finally{E(!1)}},ie=()=>{T("/forgot-password")},Y=()=>{T("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),g&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:P,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:a,onChange:q=>r(q.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:n,onChange:q=>l(q.target.value),placeholder:"Password",type:d?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>f(!d),className:"passwordToggle","aria-label":d?"Hide password":"Show password",children:d?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:g||S,children:S?`Try again in ${A}s`:g?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:Y,disabled:g,children:"Cancel"})]})]}),h&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:h}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:ie,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),I==="admin"&&e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email?"," ",e.jsx("button",{type:"button",onClick:se,disabled:k,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:k?"Sending...":"Resend"})]}),I==="houseowner"&&e.jsx("p",{className:"mt-4 text-sm text-center text-gray-600",children:"Need help? Contact your apartment administrator."})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function CS(){const[t,a]=C.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[r,n]=C.useState({regNo:"",name:"",address:""}),[l,d]=C.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[f,h]=C.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[b,g]=C.useState(1),[w,k]=C.useState(!1),[E,S]=C.useState(!1),[D,A]=C.useState([]);C.useEffect(()=>{(async()=>{try{const q=await(await fetch("https://general.apivcm.shop/countries")).json();A(q.data)}catch(Y){console.error("Error fetching countries:",Y)}})()},[]);const M=ie=>{const Y=ie.target.value,q=D.find(ce=>ce.country===Y);if(a(ce=>({...ce,country:Y,mobile:q?q.international_dialing+" ":ce.mobile})),f.country){const ce=T("country",Y);d(pe=>({...pe,country:ce}))}},I=hr(),F=3,T=(ie,Y)=>{let q="";switch(ie){case"firstname":Y.trim()?Y.length<3?q="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(Y)?Y.length>20&&(q="First name cannot exceed 20 characters"):q="First name can only contain letters, and numbers":q="First name is required";break;case"lastname":Y.trim()?Y.length<3?q="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(Y)?Y.length>20&&(q="Last name cannot exceed 20 characters"):q="Last name can only contain letters, and numbers":q="Last name is required";break;case"country":Y.trim()||(q="Country is required");break;case"mobile":Y.trim()?/^\+\d{1,4} \d{9,10}$/.test(Y)?Y.length>20&&(q="Mobile cannot exceed 20 digits"):q="Mobile must be in format +XXX XXXXXXXXXX (country code followed by 9-10 digits)":q="Mobile Number is required";break;case"email":Y.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Y)||(q="Please enter a valid email address"):q="Email is required";break;case"password":Y?Y.length<8?q="Password must be at least 8 characters":/(?=.*[a-z])/.test(Y)?/(?=.*[A-Z])/.test(Y)?/(?=.*\d)/.test(Y)?/(?=.*[@$!%*?&])/.test(Y)||(q="Password must contain at least one special character (@$!%*?&)"):q="Password must contain at least one number":q="Password must contain at least one uppercase letter":q="Password must contain at least one lowercase letter":q="Password is required";break;case"confirmPassword":Y?Y!==t.password&&(q="Passwords do not match"):q="Please confirm your password";break;case"regNo":Y.trim()?Y.length<2&&(q="Business REgistration No must be at least 2 characters"):q="Business Registration No is required";break;case"name":Y.trim()?Y.length<2&&(q="Company name must be at least 2 characters"):q="Company name is required";break;case"address":Y.trim()?Y.length<3&&(q="Company address must be at least 3 characters"):q="Company address is required";break}return q},L=(ie,Y=!1)=>{const{name:q,value:ce}=ie.target;if(Y?n(pe=>({...pe,[q]:ce})):a(pe=>({...pe,[q]:ce})),f[q]){const pe=T(q,ce);d(me=>({...me,[q]:pe}))}},H=(ie,Y=!1)=>{const{name:q}=ie.target;h(me=>({...me,[q]:!0}));const ce=Y?r[q]:t[q],pe=T(q,ce);d(me=>({...me,[q]:pe}))},U=ie=>{if(a(Y=>({...Y,confirmPassword:ie})),f.confirmPassword){const Y=T("confirmPassword",ie);d(q=>({...q,confirmPassword:Y}))}},B=ie=>{const Y={},q={};let ce=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[ie].forEach(me=>{q[me]=!0;const le=me in r?r[me]:t[me],X=T(me,le);Y[me]=X,X&&(ce=!1)}),h(me=>({...me,...q})),d(me=>({...me,...Y})),ce},P=()=>{B(b)?g(b+1):ne.warn("Please fix the validation errors before proceeding")},z=()=>{g(b-1)};async function Z(ie){ie.preventDefault();let Y=!0;for(let q=1;q<=F;q++)if(!B(q)){Y=!1,q!==b&&g(q);break}if(!Y){ne.warn("Please fix all validation errors before submitting");return}try{const q={regNo:r.regNo,name:r.name,address:r.address},pe=(await Te.post("/tenants",q)).data.data.id,me=await Te.post("/auth/register",{firstname:t.firstname,lastname:t.lastname,country:t.country,mobile:t.mobile,email:t.email,password:t.password,company_id:pe});ne.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>I("/login"),3e3)}catch(q){console.error("Registration error:",q),q.response?.status===403?ne.error("Access denied. Please try registering again."):q.response?.data?.message?ne.error(q.response.data.message):ne.error("Registration failed. Please try again.")}}const G=(()=>{if(!t.password)return{strength:0,label:""};let ie=0;return t.password.length>=8&&ie++,/(?=.*[a-z])/.test(t.password)&&ie++,/(?=.*[A-Z])/.test(t.password)&&ie++,/(?=.*\d)/.test(t.password)&&ie++,/(?=.*[@$!%*?&])/.test(t.password)&&ie++,{strength:ie,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][ie]}})(),se=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:se.map(ie=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b>=ie.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:ie.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:ie.title})]},ie.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(b-1)/(F-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:Z,className:"loginForm",children:[b===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:r.regNo,onChange:ie=>L(ie,!0),onBlur:ie=>H(ie,!0),placeholder:"Company Registration No *",className:`loginInput ${l.regNo?"border-red-500":f.regNo&&"border-green-500"}`}),f.regNo&&l.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:r.name,onChange:ie=>L(ie,!0),onBlur:ie=>H(ie,!0),placeholder:"Company Name *",className:`loginInput ${l.name?"border-red-500":f.name&&"border-green-500"}`}),f.name&&l.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:r.address,onChange:ie=>L(ie,!0),onBlur:ie=>H(ie,!0),placeholder:"Company Address *",className:`loginInput ${l.address?"border-red-500":f.address&&"border-green-500"}`}),f.businessInfo&&l.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.businessInfo]})]})]}),b===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:t.firstname,onChange:ie=>L(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"First Name *",className:`loginInput ${l.firstname?"border-red-500":f.firstname&&"border-green-500"}`}),f.firstname&&l.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:t.lastname,onChange:ie=>L(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"Last Name *",className:`loginInput ${l.lastname?"border-red-500":f.lastname&&"border-green-500"}`}),f.lastname&&l.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.lastname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"country",list:"country-list",value:t.country||"",onChange:M,onBlur:ie=>H(ie,!1),placeholder:"Select or type country *",className:`loginInput ${l.country?"border-red-500":f.country&&"border-green-500"}`}),e.jsx("datalist",{id:"country-list",children:D.map(ie=>e.jsx("option",{value:ie.country},ie.country))}),f.country&&l.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:t.mobile,onChange:ie=>{const Y=t.mobile.split(" ")[0]||"",q=ie.target.value.replace(Y+" ",""),pe={target:{name:"mobile",value:Y+(q?" "+q.replace(/\D/g,""):"")}};L(pe,!1)},onBlur:ie=>H(ie,!1),placeholder:"Mobile * (e.g., +94 771234567)",className:`loginInput ${l.mobile?"border-red-500":f.mobile&&"border-green-500"}`}),f.mobile&&l.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:t.email,onChange:ie=>L(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"Email *",className:`loginInput ${l.email?"border-red-500":f.email&&"border-green-500"}`}),f.email&&l.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.email]})]})]}),b===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:t.password,onChange:ie=>L(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"Password *",type:w?"text":"password",className:`loginInput ${l.password?"border-red-500":f.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>k(!w),className:"passwordToggle","aria-label":w?"Hide password":"Show password",children:w?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),f.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",G.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${G.strength<2?"bg-red-500":G.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${G.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),f.password&&l.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:t.confirmPassword,onChange:ie=>U(ie.target.value),onBlur:()=>h(ie=>({...ie,confirmPassword:!0})),placeholder:"Confirm Password *",type:E?"text":"password",className:`loginInput ${l.confirmPassword?"border-red-500":f.confirmPassword&&t.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>S(!E),className:"passwordToggle","aria-label":E?"Hide password":"Show password",children:E?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),f.confirmPassword&&l.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(gr,{size:14,className:"mr-1"})," ",l.confirmPassword]}),f.confirmPassword&&!l.confirmPassword&&t.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(hn,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[b>1&&e.jsxs("button",{type:"button",onClick:z,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(Mn,{size:18,className:"mr-1"}),"Back"]}),b<F?e.jsxs("button",{type:"button",onClick:P,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(Am,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>I("/"),children:"Cancel"})]})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function SS(){const[t]=ld(),a=hr(),[r,n]=C.useState(!1),[l,d]=C.useState("");C.useEffect(()=>{const h=t.get("token"),b=t.get("id");h&&b&&f(h,b)},[t]);const f=async(h,b)=>{try{n(!0);const g=await Te.post("/auth/verify",{token:h,id:b});d(g.data.message),ne.success("Email verified successfully!"),setTimeout(()=>{a("/login")},3e3)}catch(g){console.error("Verification error:",g),d(g.response?.data?.message||"Verification failed"),ne.error("Email verification failed")}finally{n(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),r?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):l?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:l}),e.jsx("button",{onClick:()=>a("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function Vr(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),{auth:l,setAuth:d}=C.useContext(Or),{logout:f,resetActivityTimer:h}=C.useContext(Or),b=hr(),[g,w]=C.useState(!1);C.useEffect(()=>{const A=localStorage.getItem("theme"),M=window.matchMedia("(prefers-color-scheme: dark)").matches;A==="dark"||!A&&M?(n(!0),document.documentElement.classList.add("dark")):(n(!1),document.documentElement.classList.remove("dark"))},[]),C.useEffect(()=>{if(!l.accessToken)return;const A=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],M=()=>h();A.forEach(F=>window.addEventListener(F,M,{passive:!0}));const I=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",I),()=>{A.forEach(F=>window.removeEventListener(F,M)),document.removeEventListener("visibilitychange",I)}},[l.accessToken,h]);const k=async()=>{try{await Te.post("/auth/logout"),f(),ne.success("Logged out successfully"),b("/")}catch(A){console.error("Logout error:",A),f(),ne.success("Logged out successfully"),b("/")}},E=()=>{w(!0)},S=()=>{w(!1)},D=()=>{const A=!r;n(A),A?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:D,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:r?"Switch to light mode":"Switch to dark mode",children:r?e.jsx(Rm,{size:20}):e.jsx(Dm,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:l?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:l?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:l?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:E,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Tm,{size:20})})})]})]})}),t&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(js,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:D,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[r?e.jsx(Rm,{size:18,className:"mr-2"}):e.jsx(Dm,{size:18,className:"mr-2"}),r?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:E,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(Tm,{size:18,className:"mr-2"}),"Logout"]})})]})}),g&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:S,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function vr(){const{auth:t}=C.useContext(Or),a=Fn(),[r,n]=C.useState(!1),[l,d]=C.useState(null),[f,h]=C.useState([]),[b,g]=C.useState(!0),[w,k]=C.useState(Date.now()),[E,S]=C.useState(!1),[D,A]=C.useState(!1),M=t?.user?.role||"Admin",I=t?.user?.id;C.useEffect(()=>{const Y=()=>{A(window.innerWidth<1024)};return Y(),window.addEventListener("resize",Y),()=>window.removeEventListener("resize",Y)},[]),C.useEffect(()=>{S(!1)},[a.pathname]);const F=["employee_dashboard","profile"],T={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:Pr,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:Wu,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:Pr,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:Wu,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:On,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:Ia,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:tE,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},complaint_management:{id:"complaint_management",name:"Complaints",icon:nb,isConstant:!1,children:[{name:"Complaint Categories",path:"/complaint-categories"},{name:"All Complaints",path:"/view-complaints"}]},company_management:{id:"company_management",name:"Company Set up",icon:Li,isConstant:!1,children:[{name:"Import House owner",path:"/bulk-import-houseowner"}]},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:On,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:Ia,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:sg,isConstant:!1},my_complaints:{id:"my_complaints",name:"My Complaints",path:"/my-complaints",icon:nb,isConstant:!1}},L=()=>["admin_dashboard","users_management","apartments_management","expenses_management","complaint_management","company_management","admin_profile"],H=async()=>{try{if(g(!0),M==="Admin"){h(L()),g(!1);return}try{const Y=await Te.get("/role-components/user/components");if(Y.data.success){const ce=(Y.data.data||[]).filter(me=>!F.includes(me)),pe=[...F,...ce];h(pe)}else console.error("API returned error:",Y.data.message),h([...F])}catch(Y){console.error("Error fetching user components",Y),h([...F])}}catch(Y){console.error("Error in fetchUserComponents",Y),h(M==="Admin"?L():[...F])}finally{g(!1)}};C.useEffect(()=>{H()},[M,I,w]);const U=()=>{k(Date.now())},P=f.map(q=>T[q]).filter(Boolean),z=Y=>a.pathname===Y,Z=Y=>d(l===Y?null:Y),te=()=>S(!E),G=()=>e.jsx("button",{onClick:te,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:E?e.jsx(gr,{size:24}):e.jsx(Dc,{size:24})}),se=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${r?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!r&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx($u,{size:16})})]}),r&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!r&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(Y=>{if(!Y)return null;const q=Y.icon;if(Y.children){const ce=Y.children.some(pe=>pe.path&&z(pe.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z(Y.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===Y.name||ce?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:Y.name})]}),!r&&Y.children&&Y.children.length>0&&(l===Y.name?e.jsx(jc,{size:16}):e.jsx(Dl,{size:16}))]}),l===Y.name&&!r&&Y.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:Y.children.map(pe=>e.jsx(lo,{to:pe.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${z(pe.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:pe.name},pe.name))})]},Y.id)}return e.jsxs(lo,{to:Y.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${z(Y.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(q,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:Y.name})]},Y.id)})})]}),ie=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:E?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx($u,{size:16})}),e.jsx("button",{onClick:te,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx(gr,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(Y=>{if(!Y)return null;const q=Y.icon;if(Y.children){const ce=Y.children.some(pe=>pe.path&&z(pe.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z(Y.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===Y.name||ce?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:"mr-3"}),e.jsx("span",{children:Y.name})]}),Y.children&&Y.children.length>0&&(l===Y.name?e.jsx(jc,{size:16}):e.jsx(Dl,{size:16}))]}),l===Y.name&&Y.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:Y.children.map(pe=>e.jsx(lo,{to:pe.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${z(pe.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:pe.name},pe.name))})]},Y.id)}return e.jsxs(lo,{to:Y.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${z(Y.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(q,{size:20,className:"mr-3"}),e.jsx("span",{children:Y.name})]},Y.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(G,{}),E&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:te}),e.jsx(ie,{}),e.jsx(se,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function AS(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),l=hr(),[d,f]=C.useState([]),[h,b]=C.useState([]),[g,w]=C.useState([]),[k,E]=C.useState([]),[S,D]=C.useState(!0),[A,M]=C.useState(null),[I,F]=C.useState(!1);C.useEffect(()=>{const X=()=>{n(window.innerWidth<768)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]);const T={USER_REGISTERED:{icon:q0,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_UPDATED:{icon:ga,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},USER_DELETED:{icon:Fr,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},USER_VERIFIED:{icon:rw,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900/30",trend:"up"},USER_DEACTIVATED:{icon:PC,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},APARTMENT_CREATED:{icon:Ia,color:"text-purple-600",bgColor:"bg-purple-100 dark:bg-purple-900/30",trend:"up"},APARTMENT_UPDATED:{icon:Ia,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900/30",trend:"up"},APARTMENT_DELETED:{icon:Ia,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900/30",trend:"down"},PASSWORD_RESET:{icon:Kv,color:"text-orange-600",bgColor:"bg-orange-100 dark:bg-orange-900/30",trend:"up"},EMAIL_SENT:{icon:Rl,color:"text-indigo-600",bgColor:"bg-indigo-100 dark:bg-indigo-900/30",trend:"up"}},L=(X,W)=>({USER_REGISTERED:`New user: ${W.email||"Unknown"}`,USER_UPDATED:`User updated: ${W.email||"Unknown"}`,USER_DELETED:`User deleted: ${W.email||"Unknown"}`,USER_VERIFIED:`User verified: ${W.email||"Unknown"}`,USER_DEACTIVATED:`User deactivated: ${W.email||"Unknown"}`,APARTMENT_CREATED:`New apartment: ${W.name||"Unknown"}`,APARTMENT_UPDATED:`Apartment updated: ${W.name||"Unknown"}`,APARTMENT_DELETED:`Apartment deleted: ${W.name||"Unknown"}`,PASSWORD_RESET:`Password reset: ${W.email||"Unknown"}`,EMAIL_SENT:`Email sent: ${W.email||"Unknown"}`})[X]||"Activity recorded",H=(X,W)=>{const K={id:Date.now(),type:X,action:L(X,W),time:"Just now",timestamp:new Date,...T[X]};E(ae=>[K,...ae.slice(0,7)])},U=(X,W=!1)=>{const ae=Math.floor((new Date-new Date(X))/1e3);return W?ae<60?"Now":ae<3600?`${Math.floor(ae/60)}m`:ae<86400?`${Math.floor(ae/3600)}h`:`${Math.floor(ae/86400)}d`:ae<60?"Just now":ae<3600?`${Math.floor(ae/60)} minutes ago`:ae<86400?`${Math.floor(ae/3600)} hours ago`:`${Math.floor(ae/86400)} days ago`};C.useEffect(()=>{const X=setInterval(()=>{E(W=>W.map(K=>({...K,time:U(K.timestamp,r)})))},6e4);return()=>clearInterval(X)},[r]);const B=async()=>{try{const X=await Te.get("/apartments");X.data.success&&Array.isArray(X.data.data)?(f(X.data.data),X.data.data.length>0&&H("APARTMENT_CREATED",{name:`${X.data.data.length} apartments`})):Array.isArray(X.data)?f(X.data):f([])}catch(X){console.error("Error loading apartments:",X),X.response?.status===401?(M("Unauthorized. Please login."),l("/login")):X.response?.status===400?M("Company info missing."):M("Failed to load apartments.")}},P=async()=>{try{const X=await Te.get("/auth/users");if(X.data.success&&Array.isArray(X.data.data)){const W=X.data.data;b(W),W.length>0&&H("USER_REGISTERED",{email:`${W.length} users`})}else b([])}catch(X){console.error("Error in fetching users:",X),M("Failed to load users.")}},z=async()=>{try{const X=await Te.get("/roles");X.data.success&&Array.isArray(X.data.data)?w(X.data.data):w([])}catch(X){console.error("Error loading roles:",X)}},Z=()=>{try{const X=localStorage.getItem("recentActivities");if(X){const K=JSON.parse(X).map(ae=>({...ae,time:U(ae.timestamp,r),...T[ae.type]}));E(K.slice(0,8))}}catch(X){console.error("Error loading recent activities:",X)}};C.useEffect(()=>{k.length>0&&localStorage.setItem("recentActivities",JSON.stringify(k.slice(0,20)))},[k]);const te=async(X=!1)=>{try{F(!0),M(null),Z(),await Promise.all([B(),P(),z()]),X&&ne.success("Dashboard refreshed successfully")}catch(W){console.error("Error loading dashboard data:",W),M("Failed to load dashboard data"),ne.error("Failed to refresh dashboard")}finally{D(!1),F(!1)}};C.useEffect(()=>{S||[{type:"USER_REGISTERED",data:{email:"demo@example.com"}},{type:"APARTMENT_CREATED",data:{name:"Demo Apartment"}},{type:"EMAIL_SENT",data:{email:"user@example.com"}}].forEach((W,K)=>{setTimeout(()=>{H(W.type,W.data)},(K+1)*5e3)})},[S]),C.useEffect(()=>{te()},[]);const G=h.length,se=d.length,ie=g.length,Y=h.filter(X=>X.is_active).length,q=h.filter(X=>X.is_verified).length,ce=d.filter(X=>X.is_active).length,pe=X=>X.toLocaleString("en-US"),me=()=>{E([]),localStorage.removeItem("recentActivities"),ne.success("Activities cleared")},le=()=>{te(!0)};return S?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Loading Dashboard..."}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:r?"Please wait":"Fetching latest data"})]})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pr,{size:r?28:32,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:le,disabled:I,className:"flex items-center gap-1 md:gap-2 px-3 py-1.5 md:py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-xs md:text-sm disabled:opacity-50",children:[e.jsx($u,{size:r?14:16,className:I?"animate-spin":""}),e.jsx("span",{className:"hidden sm:inline",children:I?"Refreshing...":"Refresh"})]}),r&&e.jsx("div",{className:"text-xs text-gray-500",children:new Date().toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]})}),A&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ia,{size:r?18:20,className:"text-red-500 mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300",children:A}),e.jsx("button",{onClick:le,className:"mt-2 px-3 py-1.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-xs md:text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 lg:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300",children:"Total Users"}),e.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:pe(G)}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1",children:[Y," active  ",q," verified"]})]}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(On,{size:r?20:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Cl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs md:text-sm text-green-500",children:G>0?"Active system":"No users yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300",children:"Total Apartments"}),e.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:pe(se)}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1",children:[ce," active"]})]}),e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(Ia,{size:r?20:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Cl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs md:text-sm text-green-500",children:se>0?"Properties managed":"No apartments yet"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm md:text-base font-semibold text-gray-700 dark:text-gray-300",children:"User Roles"}),e.jsx("p",{className:"text-xl md:text-2xl lg:text-3xl font-bold text-purple-600 dark:text-purple-400 mt-1",children:pe(ie)}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Role types in system"})]}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(po,{size:r?20:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(Cl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs md:text-sm text-green-500",children:ie>0?"Role system active":"No roles defined"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:me,className:"text-xs md:text-sm text-red-600 dark:text-red-400 hover:text-red-700 dark:hover:text-red-300 px-2 py-1",children:"Clear All"}),e.jsx("button",{className:"text-xs md:text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 px-2 py-1",children:"View all"})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:k.length===0?e.jsxs("div",{className:"text-center py-6 md:py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(G6,{size:r?32:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{className:"text-sm md:text-base",children:"No recent activities"}),e.jsx("p",{className:"text-xs md:text-sm mt-1",children:"Activities will appear here as they happen"})]}):k.map(X=>{const W=X.icon,K=X.trend==="up"?Cl:q6,ae=X.trend==="up"?"text-green-500":"text-red-500";return e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:`p-2 ${X.bgColor} rounded-full mr-3 flex-shrink-0`,children:e.jsx(W,{size:r?16:18,className:X.color})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200 truncate",children:r?X.action.substring(0,40)+(X.action.length>40?"...":""):X.action}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:X.time})]})]}),e.jsx(K,{size:r?14:16,className:`${ae} flex-shrink-0 ml-2`})]},X.id)})})]}),e.jsxs("div",{className:"mt-6 md:mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4 lg:gap-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"Users Summary"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:[{label:"Total Users",value:G,color:"text-purple-600 dark:text-purple-400"},{label:"Active Users",value:Y,color:"text-green-600 dark:text-green-400"},{label:"Verified Users",value:q,color:"text-blue-600 dark:text-blue-400"},{label:"Pending Verification",value:h.filter(X=>!X.is_verified).length,color:"text-yellow-600 dark:text-yellow-400"}].map((X,W)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[e.jsx("span",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:r&&X.label.length>15?X.label.substring(0,12)+"...":X.label}),e.jsx("span",{className:`font-semibold ${X.color} text-sm md:text-base`,children:pe(X.value)})]},W))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"Apartments Summary"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:[{label:"Total Apartments",value:se,color:"text-purple-600 dark:text-purple-400"},{label:"Active Apartments",value:ce,color:"text-green-600 dark:text-green-400"},{label:"Inactive Apartments",value:d.filter(X=>!X.is_active).length,color:"text-red-600 dark:text-red-400"}].map((X,W)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[e.jsx("span",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:r&&X.label.length>15?X.label.substring(0,12)+"...":X.label}),e.jsx("span",{className:`font-semibold ${X.color} text-sm md:text-base`,children:pe(X.value)})]},W))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg md:rounded-xl shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"Roles Summary"}),e.jsx("div",{className:"space-y-2 md:space-y-3",children:[{label:"Total Roles",value:ie,color:"text-purple-600 dark:text-purple-400"},{label:"Active Roles",value:g.filter(X=>X.is_active).length,color:"text-green-600 dark:text-green-400"},{label:"Inactive Roles",value:g.filter(X=>!X.is_active).length,color:"text-red-600 dark:text-red-400"}].map((X,W)=>e.jsxs("div",{className:"flex justify-between items-center py-1.5",children:[e.jsx("span",{className:"text-sm md:text-base text-gray-600 dark:text-gray-300",children:r&&X.label.length>15?X.label.substring(0,12)+"...":X.label}),e.jsx("span",{className:`font-semibold ${X.color} text-sm md:text-base`,children:pe(X.value)})]},W))})]})]}),r&&e.jsxs("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-800 dark:text-white mb-3",children:"Quick Stats"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:G}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Users"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:se}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Apartments"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:Y}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Active"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-red-600 dark:text-red-400",children:h.filter(X=>!X.is_verified).length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Pending"})]})]})]}),r&&e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:" Swipe or scroll to see more content"})})]})})]})]})}function _S({onClose:t,onCreated:a}){const[r,n]=C.useState({apartment_id:"",name:"",address:"",city:"",image:null}),[l,d]=C.useState(!1),[f,h]=C.useState(""),b=k=>{const{name:E,value:S,files:D}=k.target;n(A=>({...A,[E]:D?D[0]:S}))},g=async()=>{try{const S=(await Te.get("/apartments")).data.data[0],D=S?parseInt(S.apartment_id.slice(3)):0,A=`A${String(D+1).padStart(3,"0")}`;n(M=>({...M,apartment_id:A}))}catch(k){console.error("Error fetching last apartment id:",k)}};C.useEffect(()=>{g()},[]);const w=async k=>{k.preventDefault(),h(""),d(!0);try{const E=new FormData;E.append("apartment_id",r.apartment_id),E.append("name",r.name),E.append("address",r.address),E.append("city",r.city),r.image&&E.append("picture",r.image);const S=await Te.post("/apartments",E,{headers:{"Content-Type":"multipart/form-data"}});d(!1),a&&a(),t&&t()}catch(E){ne.error("Failed to create apartment"),console.error(E),d(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[f&&e.jsx("p",{className:"text-red-500",children:f}),e.jsx("input",{type:"text",name:"apartment_id",value:r.apartment_id,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:r.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:r.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:l?"Saving...":"Save"})]})]})}function TS({onClose:t,onEdited:a,apartment:r}){const[n,l]=C.useState({name:"",address:"",city:"",image:null}),[d,f]=C.useState(!1),[h,b]=C.useState("");C.useEffect(()=>{r&&l({name:r.name||"",address:r.address||"",city:r.city||"",image:null})},[r]);const g=k=>{const{name:E,value:S,files:D}=k.target;l(A=>({...A,[E]:D?D[0]:S}))},w=async k=>{k.preventDefault(),b(""),f(!0);try{const E=new FormData;E.append("name",n.name),E.append("address",n.address),E.append("city",n.city),n.image&&E.append("picture",n.image);const S=await Te.put(`/apartments/${r.id}`,E,{headers:{"Content-Type":"multipart/form-data"}});f(!1),a&&a(),t&&t()}catch(E){console.error("Update error:",E),ne.error(E.response?.data?.message||"Failed to update apartment"),f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:n.name,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:n.address,onChange:g,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:n.city,onChange:g,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Updating...":"Update"})]})]})}function DS({isOpen:t,onClose:a,onImportSuccess:r}){const[n,l]=C.useState(null),[d,f]=C.useState(!1),[h,b]=C.useState(!1),[g,w]=C.useState(null),k=L=>{L.preventDefault(),f(!0)},E=L=>{L.preventDefault(),f(!1)},S=L=>{L.preventDefault(),f(!1);const H=L.dataTransfer.files[0];H&&A(H)},D=L=>{const H=L.target.files[0];H&&A(H)},A=L=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(L.type)){ne.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(L.size>10*1024*1024){ne.error("File size must be less than 10MB");return}l(L),w(null)},M=async()=>{if(!n){ne.error("Please select a file first");return}b(!0);const L=new FormData;L.append("excelFile",n);try{const H=await Te.post("/bulk-import/import",L,{headers:{"Content-Type":"multipart/form-data"}});w(H.data.data),r&&r()}catch(H){console.error("Import error:",H),ne.error(H.response?.data?.message||"Failed to import data")}finally{b(!1)}},I=async()=>{try{const L=await Te.get("/bulk-import/template",{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([L.data])),U=document.createElement("a");U.href=H,U.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(H),ne.success("Template downloaded successfully!")}catch(L){console.error("Download error:",L),ne.error("Failed to download template")}},F=()=>{l(null),w(null)},T=()=>{F(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(gr,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!g&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ol,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:k,onDragLeave:E,onDrop:S,children:[e.jsx(Is,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:n?n.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:D})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{onClick:M,disabled:!n||h,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:16}),"Import Data"]})})]})]}),g&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($a,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",g.created.houses," houses from ",g.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Li,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:g.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(Nf,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:g.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(Pr,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:g.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx(zE,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:g.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),g.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(ia,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[g.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:g.errors.map((L,H)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(_m,{size:14}),L]},H))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:F,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function RS({apartment:t,onClose:a,onUploadSuccess:r}){const[n,l]=C.useState(!1),[d,f]=C.useState([]),[h,b]=C.useState([]),[g,w]=C.useState(!0),k=C.useRef(null);C.useEffect(()=>{A()},[t.id]);const E=T=>{const L=Array.from(T.target.files);b(H=>[...H,...L])},S=T=>{b(L=>L.filter((H,U)=>U!==T))},D=async()=>{if(h.length===0){ne.error("Please select at least one file");return}try{l(!0);const T=new FormData;h.forEach(H=>{T.append("documents",H)}),T.append("apartmentId",t.id),(await Te.post("/apartment-documents/upload",T,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),r?.(),A(),k.current&&(k.current.value=""))}catch(T){console.error("Upload error:",T);const L=T.response?.data?.message||"Failed to upload documents";ne.error(L)}finally{l(!1)}},A=async()=>{try{w(!0);const T=await Te.get(`/apartment-documents/apartments/${t.id}/documents`);T.data.success&&f(T.data.data)}catch(T){console.error("Error loading documents:",T);const L=T.response?.data?.message||"Failed to load documents";ne.error(L)}finally{w(!1)}},M=async T=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Te.delete(`/apartment-documents/documents/${T}`),ne.success("Document deleted successfully"),A()}catch(L){console.error("Delete error:",L);const H=L.response?.data?.message||"Failed to delete document";ne.error(H)}},I=async T=>{try{const L=await Te.get(`/apartment-documents/documents/${T.id}/download`,{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([L.data])),U=document.createElement("a");U.href=H,U.setAttribute("download",T.original_name||T.file_name),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(H)}catch(L){console.error("Download error:",L);const H=L.response?.data?.message||"Failed to download document";ne.error(H)}},F=T=>{if(T===0)return"0 Bytes";const L=1024,H=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(T)/Math.log(L));return parseFloat((T/Math.pow(L,U)).toFixed(2))+" "+H[U]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",t.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:k,onChange:E,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>k.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),h.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:h.map((T,L)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:F(T.size)})]})]}),e.jsx("button",{onClick:()=>S(L),className:"text-red-500 hover:text-red-700",children:e.jsx(gr,{size:16})})]},L))})]}),h.length>0&&e.jsx("button",{onClick:D,disabled:n,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:20}),"Upload ",h.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),g?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:d.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T.original_name||T.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[F(T.file_size),"  Uploaded on ",new Date(T.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(T),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ol,{size:18})}),e.jsx("button",{onClick:()=>M(T.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:18})})]})]},T.id))})]})]})}function MS(){const{auth:t}=C.useContext(Or),a=hr(),[r,n]=C.useState(!1),[l,d]=C.useState(!1),[f,h]=C.useState(window.innerWidth<768),[b,g]=C.useState([]),[w,k]=C.useState(!0),[E,S]=C.useState(null),[D,A]=C.useState(!1),[M,I]=C.useState(!1),[F,T]=C.useState(null),[L,H]=C.useState(!1),[U,B]=C.useState(null),[P,z]=C.useState(!1),[Z,te]=C.useState(!1),[G,se]=C.useState(null),[ie,Y]=C.useState(!1),[q,ce]=C.useState(null);C.useEffect(()=>{const fe=()=>{h(window.innerWidth<768)};return window.addEventListener("resize",fe),()=>window.removeEventListener("resize",fe)},[]);const pe=()=>{A(!0)},me=()=>{z(!0)},le=()=>{z(!1)},X=fe=>{T(fe),I(!0)},W=fe=>{a(`/floors/${fe.id}`)},K=()=>{A(!1)},ae=()=>{I(!1),T(null)},oe=()=>{Oe(),A(!1),ne.success("Apartment created successfully!")},re=()=>{Oe(),I(!1),T(null),ne.success("Apartment updated successfully!")},Re=()=>{Oe(),ne.success("Bulk import completed successfully!")},ke=fe=>{B(fe),H(!0)},Pe=()=>{H(!1)},Oe=async()=>{try{k(!0),S(null);const fe=await Te.get("/apartments");fe.data.success&&Array.isArray(fe.data.data)?g(fe.data.data):Array.isArray(fe.data)?g(fe.data):(console.warn("Unexpected response format:",fe.data),g([]))}catch(fe){console.error("Error loading apartments:",fe),fe.response?.status===401?(S("Unauthorized. Please login again."),a("/login")):fe.response?.status===400?S("Company information missing. Please contact support."):S("Failed to load apartments. Please try again.")}finally{k(!1)}};C.useEffect(()=>{Oe()},[]);const nt=async fe=>{try{const at=await Te.patch(`/apartments/${fe.id}/toggle`);ne.success(at.data.message),Oe()}catch(at){console.error("Error toggling apartment:",at),ne.error("Failed to toggle apartment status")}},we=fe=>{se(fe),te(!0)},Ae=async()=>{try{if(!G)return;await Te.delete(`/apartments/${G.id}`),ne.success("Apartment deleted successfully"),te(!1),se(null),Oe()}catch(fe){console.error("Delete apartment error:",fe),ne.error("Failed to delete apartment")}},Le=()=>{te(!1),se(null)},Ee=fe=>{ce(fe),Y(!0)},Je=()=>{Y(!1),ce(null)},be=()=>{ne.success("Document uploaded successfully!")},Be=()=>e.jsx("button",{onClick:()=>d(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Be,{}),e.jsx(vr,{onCollapse:n,isMobileOpen:l,onMobileClose:()=>d(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${r?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>d(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ia,{size:f?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Apartments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your apartment buildings"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:me,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Is,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Upload Excel"})]}),e.jsxs("button",{onClick:pe,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(La,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:w?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading apartments..."})]}):E?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:E}),e.jsx("button",{onClick:Oe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):b.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No apartments found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first apartment"}),e.jsx("button",{onClick:pe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Apartment"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Apartments: ",b.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[b.length," items"]})]})}),b.map((fe,at)=>e.jsxs("div",{onClick:()=>fe.is_active&&W(fe),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${fe.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[fe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${fe.picture}`,alt:fe.name,className:"w-12 h-12 object-cover rounded-lg mr-3",onError:Ce=>{console.error("Image failed to load:",fe.picture),Ce.target.style.display="none";const wt=Ce.target.parentNode.querySelector(".image-fallback");wt&&(wt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Zs,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:fe.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:fe.city||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),Ee(fe)},className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(xr,{size:16})}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),X(fe)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ga,{size:16})}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),ke(fe)},className:`p-2 rounded-lg ${fe.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:fe.is_active?"Deactivate":"Activate",children:fe.is_active?e.jsx(bo,{size:16}):e.jsx(yo,{size:16})}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),we(fe)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mt-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Address:"}),e.jsx("span",{className:"truncate",children:fe.address})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Floors:"}),e.jsx("span",{children:fe.floors})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Units:"}),e.jsx("span",{children:fe.houses})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${fe.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:fe.is_active?"Active":"Inactive"})]})]})]},fe.id||at))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Apartments"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[b.length," apartments"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((fe,at)=>e.jsxs("tr",{onClick:()=>fe.is_active&&W(fe),className:`transition-colors cursor-pointer ${fe.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${fe.picture}`,alt:fe.name,className:"w-12 h-12 object-cover rounded-lg",onError:Ce=>{console.error("Image failed to load:",fe.picture),Ce.target.style.display="none";const wt=Ce.target.parentNode.querySelector(".image-fallback");wt&&(wt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(Zs,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:fe.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:fe.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),Ee(fe)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(xr,{size:20})}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),X(fe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),ke(fe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:fe.is_active?"Deactivate":"Activate",children:fe.is_active?e.jsx(bo,{size:25}):e.jsx(yo,{size:25})}),e.jsx("button",{onClick:Ce=>{Ce.stopPropagation(),we(fe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},fe.id||at))})]})]})})})]})})]}),D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:K,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(_S,{onClose:K,onCreated:oe})]})})}),M&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx("button",{onClick:ae,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(TS,{onClose:ae,onEdited:re,apartment:F})]})})}),e.jsx(DS,{isOpen:P,onClose:le,onImportSuccess:Re}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:U?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:U?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Pe,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{U&&(nt(U),H(!1),B(null))},className:`flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors ${U?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:U?.is_active?"Deactivate":"Activate"})]})]})}),Z&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.name,'"?']}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Le,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ae,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),ie&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:["Documents - ",q.name]}),e.jsx("button",{onClick:Je,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(RS,{apartment:q,onClose:Je,onUploadSuccess:be})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function IS({onClose:t,onCreated:a,roles:r,rolesLoading:n}){const[l,d]=C.useState({email:"",role_id:""}),[f,h]=C.useState(!1),[b,g]=C.useState(""),w=E=>{const{name:S,value:D}=E.target;d(A=>({...A,[S]:D}))},k=async E=>{E.preventDefault(),g(""),h(!0);try{const S=await Te.post("/auth/invite",{email:l.email,role_id:l.role_id});ne.success("Invitation sent successfully!"),a&&a(),t&&t()}catch(S){console.error("Invite error:",S);const D=S.response?.data?.message||"Failed to send invitation. Try again.";g(D),ne.error(D)}finally{h(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4 text-black dark:text-white",children:[b&&e.jsx("p",{className:"text-red-500",children:b}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:l.email,onChange:w,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:l.role_id,onChange:w,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:n,children:[e.jsx("option",{value:"",children:"Select Role"}),n?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):r.map(E=>e.jsx("option",{value:E.id,children:E.role_name},E.id))]}),n&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Gt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||n,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function OS({user:t,onClose:a,onUpdated:r,roles:n,rolesLoading:l}){const[d,f]=C.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[h,b]=C.useState(!1),[g,w]=C.useState(""),[k,E]=C.useState(!1),[S,D]=C.useState(!1),[A,M]=C.useState(!1),[I,F]=C.useState("");C.useEffect(()=>{t&&(f({firstname:t.firstname||"",lastname:t.lastname||"",email:t.email||"",country:t.country||"",mobile:t.mobile||"",role_id:t.role_id||"",password:"",confirmPassword:""}),F(t.email||""))},[t]);const T=U=>{const{name:B,value:P}=U.target;f(z=>({...z,[B]:P})),B==="email"&&M(P!==I)},L=async()=>{try{b(!0),await Te.post("/auth/resend",{email:d.email}),ne.success("Verification email sent successfully!"),M(!1)}catch(U){console.error("Error sending verification email:",U),ne.error(U.response?.data?.message||"Failed to send verification email")}finally{b(!1)}},H=async U=>{if(U.preventDefault(),b(!0),w(""),d.password&&d.password!==d.confirmPassword){w("Passwords do not match"),b(!1);return}if(d.password&&d.password.length<8){w("Password must be at least 8 characters long"),b(!1);return}try{const B={firstname:d.firstname,lastname:d.lastname,email:d.email,country:d.country,mobile:d.mobile,role_id:d.role_id};d.password&&(B.password=d.password);const P=await Te.put(`/auth/users/${t.id}`,B);P.data.success?(ne.success("User updated successfully!"),P.data.data.requires_verification&&await L(),r?.(P.data.data)):w(P.data.message||"Failed to update user")}catch(B){console.error("Error updating user:",B),w(B.response?.data?.message||"Failed to update user")}finally{b(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),g&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:g}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:d.firstname,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:d.lastname,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:d.email,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),A&&e.jsx("button",{type:"button",onClick:L,disabled:h,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(Jv,{size:16})})]}),A&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:d.country,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:d.mobile,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:d.role_id,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Select Role"}),l?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):n.map(U=>e.jsx("option",{value:U.id,children:U.role_name},U.id))]}),l&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Gt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:k?"text":"password",name:"password",value:d.password,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>E(!k),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:k?e.jsx(In,{size:16}):e.jsx(Qs,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:S?"text":"password",name:"confirmPassword",value:d.confirmPassword,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>D(!S),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:S?e.jsx(In,{size:16}):e.jsx(Qs,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||l,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function FS({user:t,onClose:a,onAssignSuccess:r}){const[n,l]=C.useState([]),[d,f]=C.useState([]),[h,b]=C.useState(!0),[g,w]=C.useState(!1),[k,E]=C.useState(""),[S,D]=C.useState(new Set);C.useEffect(()=>{t&&(async()=>{try{b(!0);const z=await Te.get("/bills");if(z.data.success){const te=(z.data.data||[]).filter(G=>G.billtype?.toLowerCase()==="measurable");l(te)}const Z=await Te.get(`/user-bills/users/${t.id}/bills`);if(Z.data.success){const G=(Z.data.data||[]).filter(ie=>ie.billtype?.toLowerCase()==="measurable");f(G);const se=new Set(G.map(ie=>ie.id));D(se)}}catch(z){console.error("Error loading bill data:",z),ne.error("Failed to load bill data")}finally{b(!1)}})()},[t]);const A=n.filter(P=>P.bill_name?.toLowerCase().includes(k.toLowerCase())),M=P=>d.some(z=>z.id===P),I=P=>S.has(P),F=P=>{D(z=>{const Z=new Set(z);return Z.has(P)?Z.delete(P):Z.add(P),Z})},T=()=>{const P=new Set(n.map(z=>z.id));D(P)},L=()=>{D(new Set)},H=async()=>{try{w(!0);const P=Array.from(S);await Te.post(`/user-bills/users/${t.id}/bills`,{bill_ids:P}),ne.success("Measurable bills assigned successfully!"),r?.(),a()}catch(P){console.error("Error assigning bills:",P),ne.error(P.response?.data?.message||"Failed to assign bills")}finally{w(!1)}},U=P=>d.find(z=>z.id===P),B=P=>{try{return new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:k,onChange:P=>E(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:L,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Vu,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:k?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:A.map(P=>{const z=I(P.id),Z=M(P.id),te=U(P.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${z?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>F(P.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ea,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:P.bill_name}),Z&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(xr,{size:14}),e.jsx("span",{className:"capitalize",children:P.billtype}),P.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",B(P.created_at)]})}),te&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",B(te.assigned_at||te.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:z?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(hn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},P.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[S.size," measurable bill(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:g,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:H,disabled:g,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Saving...":"Save Assignments"})]})]})]})]})}function LS({user:t,onClose:a,onAssignSuccess:r}){const[n,l]=C.useState([]),[d,f]=C.useState([]),[h,b]=C.useState(!0),[g,w]=C.useState(!1),[k,E]=C.useState(""),[S,D]=C.useState(new Set),[A,M]=C.useState("categories");C.useEffect(()=>{t&&(async()=>{try{b(!0);const te=await Te.get("/categories");if(te.data.success){const se=(te.data.data||[]).filter(ie=>ie.is_active!==!1);l(se)}const G=await Te.get(`/technician-categories/technicians/${t.id}/categories`);if(G.data.success){const se=G.data.data||[];f(se);const ie=new Set(se.map(Y=>Y.category_id));D(ie)}}catch(te){console.error("Error loading category data:",te),ne.error("Failed to load category data")}finally{b(!1)}})()},[t]);const I=n.filter(Z=>Z.name?.toLowerCase().includes(k.toLowerCase())||Z.description?.toLowerCase().includes(k.toLowerCase())),F=Z=>d.some(te=>te.category_id===Z),T=Z=>S.has(Z),L=Z=>{D(te=>{const G=new Set(te);return G.has(Z)?G.delete(Z):G.add(Z),G})},H=()=>{const Z=new Set(n.map(te=>te.id));D(Z)},U=()=>{D(new Set)},B=async()=>{try{w(!0);const Z=Array.from(S);await Te.post(`/technician-categories/technicians/${t.id}/categories`,{category_ids:Z}),ne.success("Categories assigned successfully!"),r?.(),a()}catch(Z){console.error("Error assigning categories:",Z),ne.error(Z.response?.data?.message||"Failed to assign categories")}finally{w(!1)}},P=Z=>d.find(te=>te.category_id===Z),z=Z=>{try{return new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:k,onChange:Z=>E(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading categories..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(ew,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No categories found"}),e.jsx("p",{className:"text-sm",children:k?"Try adjusting your search terms":"No categories available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Only active categories are shown here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(Z=>{const te=T(Z.id),G=F(Z.id),se=P(Z.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${te?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>L(Z.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(XE,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:Z.name}),G&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Assigned"}),Z.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:"Inactive"})]}),Z.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:Z.description}),e.jsx("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(J6,{size:12}),e.jsx("span",{children:"Service Category"})]})}),se&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-1",children:[e.jsx(Ks,{size:12}),e.jsxs("span",{children:["Assigned: ",z(se.assigned_at)]})]})]}),e.jsx("div",{className:"flex items-center ml-4",children:te?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(hn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},Z.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[S.size," category(ies) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:g,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:B,disabled:g,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Saving...":"Save Assignments"})]})]})]})]})}function BS({user:t,onClose:a,onAssignSuccess:r}){const[n,l]=C.useState([]),[d,f]=C.useState([]),[h,b]=C.useState(!0),[g,w]=C.useState(!1),[k,E]=C.useState(""),[S,D]=C.useState(new Set),[A,M]=C.useState("apartments");C.useEffect(()=>{t&&(async()=>{try{b(!0);const te=await Te.get("/apartments");te.data.success&&l(te.data.data||[]);const G=await Te.get(`/user-apartments/users/${t.id}/apartments`);if(G.data.success){const se=G.data.data||[];f(se);const ie=new Set(se.map(Y=>Y.id));D(ie)}}catch(te){console.error("Error loading apartment data:",te),ne.error("Failed to load apartment data")}finally{b(!1)}})()},[t]);const I=n.filter(Z=>Z.name?.toLowerCase().includes(k.toLowerCase())||Z.address?.toLowerCase().includes(k.toLowerCase())||Z.city?.toLowerCase().includes(k.toLowerCase())),F=Z=>d.some(te=>te.id===Z),T=Z=>S.has(Z),L=Z=>{D(te=>{const G=new Set(te);return G.has(Z)?G.delete(Z):G.add(Z),G})},H=()=>{const Z=new Set(n.map(te=>te.id));D(Z)},U=()=>{D(new Set)},B=async()=>{try{w(!0);const Z=Array.from(S);await Te.post(`/user-apartments/users/${t.id}/apartments`,{apartment_ids:Z}),r?.(),a()}catch(Z){console.error("Error assigning apartments:",Z),ne.error(Z.response?.data?.message||"Failed to assign apartments")}finally{w(!1)}},P=Z=>d.find(te=>te.id===Z),z=Z=>{try{return new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ia,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.firstname," ",t.lastname]})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(gr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>M("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${A==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>M("bills"),className:`px-4 py-2 font-semibold 
                ${A==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"}),e.jsx("button",{onClick:()=>M("complaint_categories"),className:`px-4 py-2 font-semibold 
                ${A==="complaint_categories"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Service Categories"})]}),A==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:k,onChange:Z=>E(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Ia,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:k?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(Z=>{const te=T(Z.id),G=F(Z.id),se=P(Z.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${te?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>L(Z.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Pr,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:Z.name}),G&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(go,{size:14}),e.jsxs("span",{children:[Z.address,", ",Z.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[Z.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[Z.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:Z.is_active?"Active":"Inactive"})]}),se&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",z(se.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:te?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(hn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},Z.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[S.size," apartment(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:g,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:B,disabled:g,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[g&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:g?"Saving...":"Save Assignments"})]})]})]})]}):A==="bills"?e.jsx(FS,{user:t,onClose:a,onAssignSuccess:r}):e.jsx(LS,{user:t,onClose:a,onAssignSuccess:r})]})})}function PS({onClose:t,onCreated:a}){const[r,n]=C.useState({role_name:""}),[l,d]=C.useState(!1),[f,h]=C.useState(""),[b,g]=C.useState([]),w=E=>{const{name:S,value:D}=E.target;n(A=>({...A,[S]:D})),S==="role_name"&&f&&h("")},k=async E=>{if(E.preventDefault(),d(!0),h(""),!r.role_name.trim()){h("Please fill in all required fields"),d(!1);return}try{const S=await Te.post("/roles",{role_name:r.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});S.data.success?(a?.(S.data.data),ne.success("Role created successfully"),t()):h(S.data.message||"Failed to save role")}catch(S){console.error("Error saving role:",S);const D=S.response?.data?.message||"Error saving role. Please try again.";h(D),S.response?.status===409&&ne.error(D)}finally{d(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:r.role_name,onChange:w,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}const zS=({role:t,onClose:a,onAssign:r})=>{const[n,l]=C.useState([]),[d,f]=C.useState(!1),[h,b]=C.useState(!1),w=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"},{id:"my_complaints",name:"My Complaints",description:"View and manage your complaints",category:"Personal",icon:"ClipboardList"}].reduce((I,F)=>{const T=F.category;return I[T]||(I[T]=[]),I[T].push(F),I},{});C.useEffect(()=>{t&&k()},[t]);const k=async()=>{try{f(!0);const I=await Te.get(`/role-components/role/${t.id}`);if(I.data.success){const F=I.data.data||[];l(F)}}catch(I){console.error("Error loading role components:",I),l([])}finally{f(!1)}},E=I=>{l(F=>F.includes(I)?F.filter(T=>T!==I):[...F,I])},S=I=>{const F=w[I].map(T=>T.id);l(T=>{const L=[...T];return F.forEach(H=>{L.includes(H)||L.push(H)}),L})},D=I=>{const F=w[I].map(T=>T.id);l(T=>T.filter(L=>!F.includes(L)))},A=async()=>{try{b(!0);const I=["employee_dashboard","profile"],F=n.filter(L=>!I.includes(L));(await Te.post(`/role-components/role/${t.id}`,{components:F})).data.success&&(ne.success("Components assigned successfully! The sidebar will refresh for affected users."),r(t.id,n),a())}catch(I){console.error("Error saving role components:",I),alert("Failed to save component assignments. Please try again.")}finally{b(!1)}},M=I=>{const T={Core:us,Management:po,Financial:sg,Personal:Pr}[I]||Ku;return e.jsx(T,{size:16})};return t?t.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(po,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:t.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx(gr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(w).map(([I,F])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[M(I),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[I," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",F.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>S(I),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>D(I),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:F.map(T=>e.jsxs("div",{onClick:()=>E(T.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${n.includes(T.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:n.includes(T.id)?e.jsx(NC,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(Ku,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:T.description})]})]},T.id))})]},I))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[n.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:h||d,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(kf,{size:20}),"Save Assignments"]})})]})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):null};function US({role:t,onClose:a,onUpdated:r}){const[n,l]=C.useState({role_name:""}),[d,f]=C.useState(!1),[h,b]=C.useState({});C.useEffect(()=>{t&&l({role_name:t.role_name||""})},[t]);const g=E=>{const{name:S,value:D}=E.target;l(A=>({...A,[S]:D})),h[S]&&b(A=>({...A,[S]:""}))},w=()=>{const E={};return n.role_name.trim()?n.role_name.trim().length<2?E.role_name="Role name must be at least 2 characters long":n.role_name.trim().length>50&&(E.role_name="Role name must be less than 50 characters"):E.role_name="Role name is required",b(E),Object.keys(E).length===0},k=async E=>{if(E.preventDefault(),!!w())try{f(!0);const S=await Te.put(`/roles/${t.id}`,{role_name:n.role_name.trim()});S.data.success?(r?.(S.data.data),a()):ne.error(S.data.message||"Failed to update role")}catch(S){console.error("Error updating role:",S),S.response?.status===409?(ne.error("A role with this name already exists"),b({role_name:"A role with this name already exists"})):S.response?.data?.message?ne.error(S.response.data.message):ne.error("Failed to update role. Please try again.")}finally{f(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:a,disabled:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(gr,{size:20})})]}),e.jsxs("form",{onSubmit:k,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:n.role_name,onChange:g,disabled:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${h.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),h.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",t.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${t.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:t.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,disabled:d,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[d&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Updating...":"Update Role"})]})]})]})]})}):null}function dw(){const[t,a]=C.useState(!1),[r,n]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(null),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(null),[D,A]=C.useState(!1),[M,I]=C.useState(null),[F,T]=C.useState(!1),[L,H]=C.useState(null),U=async()=>{try{d(!0),h(null);const me=await Te.get("/roles");me.data.success&&Array.isArray(me.data.data)?n(me.data.data):n([])}catch(me){console.error("Error loading roles:",me),h("Failed to load Roles. Please try again.")}finally{d(!1)}};C.useEffect(()=>{U()},[]);const B=()=>{g(!0)},P=()=>{g(!1)},z=()=>{U(),g(!1)},Z=me=>{S(me),k(!0)},te=()=>{k(!1),S(null)},G=()=>{ne.success("Role updated successfully!"),U(),k(!1),S(null)},se=me=>{I(me),A(!0)},ie=async()=>{try{if(!M)return;const me=await Te.delete(`/roles/${M.id}`);me.data.success?(ne.success("Role deleted successfully"),A(!1),I(null),U()):ne.error(me.data.message||"Failed to delete role")}catch(me){console.error("Delete role error:",me),me.response?.data?.message?.includes("users assigned")||me.response?.data?.message?.includes("Cannot delete role")||me.response?.data?.message?ne.error(me.response.data.message):ne.error("Failed to delete role. Please try again."),A(!1),I(null)}},Y=()=>{A(!1),I(null)},q=me=>{H(me),T(!0)},ce=(me,le)=>{ne.success("Components assigned successfully!")},pe=me=>{try{return new Date(me).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:B,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"Add Role"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((me,le)=>e.jsxs("tr",{onClick:()=>q(me),className:`transition-colors cursor-pointer ${me.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:le+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:me.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:pe(me.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:X=>{X.stopPropagation(),Z(me)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:X=>{X.stopPropagation(),se(me)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})}),e.jsx("button",{onClick:X=>{X.stopPropagation(),q(me)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(Wu,{size:20})})]})})]},me.id||le))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:P,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(PS,{onClose:P,onCreated:z})]})}),F&&e.jsx(zS,{role:L,onClose:()=>T(!1),onAssign:ce}),w&&E&&e.jsx(US,{role:E,onClose:te,onUpdated:G}),D&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ie,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function HS(){const[t,a]=C.useState(!1),[r,n]=C.useState([]),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(null),[D,A]=C.useState(null),[M,I]=C.useState(!0),[F,T]=C.useState(!0),[L,H]=C.useState(null),{auth:U}=C.useContext(Or),[B,P]=C.useState(!1),[z,Z]=C.useState(null),[te,G]=C.useState(!1),[se,ie]=C.useState(null),[Y,q]=C.useState("users"),ce=async()=>{try{I(!0),H(null);const be=await Te.get("/auth/users");be.data.success&&Array.isArray(be.data.data)?n(be.data.data):(console.warn("Unexpected response format:",be.data),n([]))}catch(be){console.error("Error in fetching users:",be),H("Failed to load users. Please try again."),ne.error("Failed to fetch users")}finally{I(!1)}},pe=async()=>{try{T(!0);const be=await Te.get("/roles");be.data.success&&Array.isArray(be.data.data)?d(be.data.data):d([])}catch(be){console.error("Error loading roles:",be),ne.error("Failed to load roles")}finally{T(!1)}};C.useEffect(()=>{ce(),pe()},[]);const me=()=>h(!0),le=()=>h(!1),X=be=>{S(be),g(!0)},W=()=>{g(!1),S(null)},K=be=>{A(be),k(!0)},ae=()=>{k(!1),A(null)},oe=()=>{ce(),h(!1),ne.success("User created successfully!")},re=()=>{ce(),g(!1),S(null)},[Re,ke]=C.useState(!1),Pe=async be=>{try{ke(!0),await Te.post("/auth/resend",{email:be.email}),ne.success("Verification email sent successfully!")}catch(Be){console.error("Error sending verification email:",Be),ne.error(Be.response?.data?.message||"Failed to send verification email")}finally{ke(!1)}},Oe=async()=>{if(D)try{await Te.patch(`/auth/users/${D.id}/toggle`),ne.success(`User ${D.is_active?"deactivated":"activated"} successfully!`),ce(),ae()}catch(be){console.error("Error toggling user:",be),ne.error("Failed to update user status")}},nt=be=>{Z(be),P(!0)},we=async()=>{try{if(!z)return;await Te.delete(`/auth/users/${z.id}`),ne.success("User deleted successfully"),P(!1),Z(null),ce()}catch(be){console.error("Delete user error:",be),be.response?.data?.message?ne.error(be.response.data.message):ne.error("Failed to delete user")}},Ae=()=>{P(!1),Z(null)},Le=be=>{ie(be),G(!0)},Ee=()=>{G(!1),ie(null)},Je=()=>{ne.success("Apartments assigned successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(On,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Users Management"})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>q("users"),className:`px-4 py-2 font-semibold 
                      ${Y==="users"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Info"}),e.jsx("button",{onClick:()=>q("roles"),className:`px-4 py-2 font-semibold 
                      ${Y==="roles"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Roles"})]}),Y==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:me,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"Add User"})]})}),M?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Users..."})]}):L?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[L,e.jsx("button",{onClick:ce,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(us,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first user"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((be,Be)=>{const fe=be.email===U?.user?.email||be.id===U?.user?.id;return e.jsxs("tr",{className:`transition-colors ${be.is_active?fe?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:be.email}),!be.is_verified&&e.jsx("button",{onClick:()=>Pe(be),disabled:fe||!be.is_active||Re,className:`ml-2 p-1 rounded ${fe||!be.is_active||Re?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:Re?e.jsx(Gt,{size:14,className:"animate-spin"}):e.jsx(Jv,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${be.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:be.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${be.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:be.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:at=>{at.stopPropagation(),Le(be)},disabled:fe||!be.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${fe||!be.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:fe?"You can't assign to your own account":be.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(Ia,{size:20})}),e.jsx("button",{onClick:()=>X(be),disabled:fe||!be.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${fe||!be.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:fe?"You can't edit your own account":be.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:()=>K(be),disabled:fe,className:`flex items-center justify-center w-8 h-8 rounded ${fe?"text-gray-400 cursor-not-allowed bg-transparent":be.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:fe?"You can't modify your own account":be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(bo,{size:20}):e.jsx(yo,{size:20})}),e.jsx("button",{onClick:at=>{at.stopPropagation(),nt(be)},disabled:fe||!be.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${fe||!be.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:fe?"You can't delete your own account":be.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(Fr,{size:20})})]})})]},be.id??Be)})})]})})]}),Y==="roles"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:e.jsx(dw,{})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:le,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New User"}),e.jsx(IS,{onClose:le,onCreated:oe,roles:l,rolesLoading:F})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:W,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit User"}),e.jsx(OS,{user:E,onClose:W,onUpdated:re,roles:l,rolesLoading:F})]})}),w&&D&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:D.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:D.is_active?`Are you sure you want to deactivate ${D.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${D.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ae,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Oe,className:`px-4 py-2 rounded-md text-white transition-colors ${D.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:D.is_active?"Deactivate":"Activate"})]})]})}),B&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',z.firstname||z.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ae,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:we,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),te&&se&&e.jsx(BS,{user:se,onClose:Ee,onAssignSuccess:Je}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function VS({onClose:t,apartment_id:a}){const[r,n]=C.useState(1),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,g]=C.useState(0),[w,k]=C.useState(!0);C.useEffect(()=>{(async()=>{try{const M=await Te.get(`/floors/apartment/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(M.data&&M.data.length>0){const I=Math.max(...M.data.map(F=>{const T=F.floor_id.match(/\d+/);return T?parseInt(T[0]):0}));g(I)}}catch(M){console.error("Error fetching existing floors:",M)}finally{k(!1)}})()},[a]);const E=()=>{const A=Array.from({length:r},(M,I)=>({floor_id:`F${b+I+1}`}));d(A)},S=(A,M,I)=>{const F=[...l];F[A][M]=I,d(F)},D=async A=>{A.preventDefault(),h(!0);try{const M=await Te.post("/floors/batch",{apartment_id:a,floors:l},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});t()}catch(M){console.error("Error creating floors:",M)}finally{h(!1)}};return w?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:D,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:r,min:"1",onChange:A=>n(parseInt(A.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:E,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:l.map((A,M)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",b+M+1]}),e.jsx("input",{type:"text",value:A.floor_id,onChange:I=>S(M,"floor_id",I.target.value),className:"border rounded p-1 mr-2"})]},M))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 rounded bg-purple-600 text-white",children:f?"Saving...":"Save All"})]})]})}function GS({floor:t,onClose:a,onUpdated:r}){const[n,l]=C.useState({floor_id:t.floor_id||"",status:t.status||"active"}),d=b=>{const{name:g,value:w}=b.target;l({...n,[g]:w})},f=localStorage.getItem("token"),h=async b=>{b.preventDefault();try{(await Te.put(`/floors/${t.id}`,n,{headers:{Authorization:`Bearer ${f}`}})).data.success?r():ne.error("Failed to update floor")}catch(g){console.error("Error updating floor:",g),ne.error("Error updating floor")}};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:n.floor_id,onChange:d,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:n.status,onChange:d,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function YS({floor:t,apartment:a,onClose:r,onUploadSuccess:n}){const[l,d]=C.useState(!1),[f,h]=C.useState([]),[b,g]=C.useState([]),[w,k]=C.useState(!0),E=C.useRef(null);C.useEffect(()=>{M()},[t.id]);const S=L=>{const H=Array.from(L.target.files);g(U=>[...U,...H])},D=L=>{g(H=>H.filter((U,B)=>B!==L))},A=async()=>{if(b.length===0){ne.error("Please select at least one file");return}try{d(!0);const L=new FormData;b.forEach(U=>{L.append("documents",U)}),L.append("apartmentId",a.id),L.append("floorId",t.id),(await Te.post("/floor-documents/upload",L,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(g([]),n?.(),M(),E.current&&(E.current.value=""))}catch(L){console.error("Upload error:",L);const H=L.response?.data?.message||"Failed to upload floor documents";ne.error(H)}finally{d(!1)}},M=async()=>{try{k(!0);const L=await Te.get(`/floor-documents/${t.id}/documents`);L.data.success&&h(L.data.data)}catch(L){console.error("Error loading floor documents:",L);const H=L.response?.data?.message||"Failed to load floor documents";ne.error(H)}finally{k(!1)}},I=async L=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Te.delete(`/floor-documents/documents/${L}`),ne.success("Floor document deleted successfully"),M()}catch(H){console.error("Delete error:",H);const U=H.response?.data?.message||"Failed to delete floor document";ne.error(U)}},F=async L=>{try{const H=await Te.get(`/floor-documents/documents/${L.id}/download`,{responseType:"blob"}),U=window.URL.createObjectURL(new Blob([H.data])),B=document.createElement("a");B.href=U,B.setAttribute("download",L.original_name||L.file_name),document.body.appendChild(B),B.click(),B.remove(),window.URL.revokeObjectURL(U)}catch(H){console.error("Download error:",H);const U=H.response?.data?.message||"Failed to download floor document";ne.error(U)}},T=L=>{if(L===0)return"0 Bytes";const H=1024,U=["Bytes","KB","MB","GB"],B=Math.floor(Math.log(L)/Math.log(H));return parseFloat((L/Math.pow(H,B)).toFixed(2))+" "+U[B]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",t.floor_id]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",t.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:E,onChange:S,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>E.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((L,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:L.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:T(L.size)})]})]}),e.jsx("button",{onClick:()=>D(H),className:"text-red-500 hover:text-red-700",children:e.jsx(gr,{size:16})})]},H))})]}),b.length>0&&e.jsx("button",{onClick:A,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),w?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:f.map(L=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:L.original_name||L.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[T(L.file_size),"  Uploaded on ",new Date(L.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>F(L),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ol,{size:18})}),e.jsx("button",{onClick:()=>I(L.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:18})})]})]},L.id))})]})]})}function XS(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),{id:f}=gn(),[h,b]=C.useState(null),g=hr(),[w,k]=C.useState([]),[E,S]=C.useState(null),[D,A]=C.useState(!0),[M,I]=C.useState(!1),[F,T]=C.useState(!1),[L,H]=C.useState(null),[U,B]=C.useState(!1),[P,z]=C.useState(null),[Z,te]=C.useState(!1),[G,se]=C.useState(null),[ie,Y]=C.useState(!1),[q,ce]=C.useState(null);C.useEffect(()=>{const be=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",be),()=>window.removeEventListener("resize",be)},[]),C.useEffect(()=>{f&&(async()=>{try{const Be=await Te.get(`/apartments/${f}`);Be.data.success&&b(Be.data.data)}catch(Be){console.error("Error fetching apartment:",Be)}})()},[f]);const pe=()=>{g("/apartmentview")},me=async()=>{try{A(!0),S(null);const be=await Te.get(`/floors?apartment_id=${f}`);be.data.success&&Array.isArray(be.data.data)?k(be.data.data):k([])}catch(be){console.error("Error loading floors:",be),S("Failed to load floors. Please try again.")}finally{A(!1)}};C.useEffect(()=>{me()},[f]);const le=be=>{g(`/houses/${f}/${be.id}`)},X=be=>{z(be),B(!0)},W=()=>{B(!1),z(null)},K=async be=>{try{const Be=await Te.patch(`/floors/${be.id}/toggle`);ne.success(Be.data.message),me()}catch(Be){console.error("Error toggling floor:",Be),ne.error("Failed to toggle floor status")}},ae=()=>{I(!0)},oe=()=>{I(!1)},re=()=>{me(),I(!1),ne.success("Floor created successfully!")},Re=be=>{H(be),T(!0)},ke=()=>{T(!1),H(null)},Pe=()=>{me(),T(!1),ne.success("Floor updated successfully!")},Oe=be=>{se(be),te(!0)},nt=async()=>{try{if(!G)return;await Te.delete(`/floors/${G.id}`),ne.success("Floor deleted successfully"),te(!1),se(null),me()}catch(be){console.error("Delete floor error:",be),ne.error("Failed to delete floor")}},we=()=>{te(!1),se(null)},Ae=be=>{ce(be),Y(!0)},Le=()=>{Y(!1),ce(null)},Ee=()=>{ne.success("Floor documents uploaded successfully!")},Je=()=>e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Je,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>n(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>n(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:pe,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(Mn,{size:l?20:25})}),e.jsx(Li,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Floors"}),h&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Apartment: ",h.name]})]})]}),e.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(La,{size:l?16:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading floors..."})]}):E?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:E}),e.jsx("button",{onClick:me,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No floors found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding floors"}),e.jsx("button",{onClick:ae,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First Floor"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Floors: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map((be,Be)=>e.jsxs("div",{onClick:()=>be.is_active&&le(be),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${be.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["Floor ",be.floor_id]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-3",children:[e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Houses:"})," ",be.house_count]}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full 
                                                                ${be.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":be.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":be.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:be.status.charAt(0).toUpperCase()+be.status.slice(1)})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Ae(be)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(xr,{size:14})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Re(be)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ga,{size:14})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),X(be)},className:`p-1.5 rounded-lg ${be.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(bo,{size:14}):e.jsx(yo,{size:14})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Oe(be)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex justify-between",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded ${be.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:be.is_active?"Active":"Inactive"}),e.jsx("span",{children:"Click to view houses"})]})]},be.id||Be))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Floors Management"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," floors"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((be,Be)=>e.jsxs("tr",{onClick:()=>be.is_active&&le(be),className:`transition-colors cursor-pointer ${be.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${be.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":be.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":be.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:be.status.charAt(0).toUpperCase()+be.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Ae(be)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(xr,{size:20})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Re(be)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),X(be)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(bo,{size:25}):e.jsx(yo,{size:25})}),e.jsx("button",{onClick:fe=>{fe.stopPropagation(),Oe(be)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},be.id||Be))})]})]})})})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx("button",{onClick:oe,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(VS,{onClose:oe,onCreated:re,apartment_id:f})]})})}),F&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx("button",{onClick:ke,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(GS,{onClose:ke,onUpdated:Pe,floor:L})]})})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:P?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:P?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:W,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{P&&(K(P),B(!1),z(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${P?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:P?.is_active?"Deactivate":"Activate"})]})]})}),Z&&G&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',G.floor_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:we,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:nt,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),ie&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(YS,{floor:q,apartment:h,onClose:Le,onUploadSuccess:Ee})})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function qS({onClose:t,apartment_id:a,onCreated:r}){const[n,l]=C.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),g=k=>{const{name:E,value:S}=k.target;l(D=>({...D,[E]:S}))},w=async k=>{k.preventDefault(),f(!0),b("");try{const E=await Te.post("/housetype",{...n,apartment_id:a},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});E.data.success?(r?.(E.data.data),t()):b("Failed to save house type")}catch(E){console.error("Error saving house type:",E),b("Error saving house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,placeholder:"House Type Name"}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:n.sqrfeet,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:n.rooms,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:n.bathrooms,onChange:g,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function $S({housetype:t,onClose:a,onUpdated:r}){const[n,l]=C.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),g=localStorage.getItem("token");C.useEffect(()=>{t&&l({name:t.name||"",sqrfeet:t.sqrfeet||"",rooms:t.rooms||"",bathrooms:t.bathrooms||""})},[t]);const w=E=>{const{name:S,value:D}=E.target;l(A=>({...A,[S]:D}))},k=async E=>{E.preventDefault(),f(!0),b("");try{const S=await Te.put(`/housetype/${t.id}`,n,{headers:{Authorization:`Bearer ${g}`}});S.data.success?(r&&r(S.data.data),a&&a()):b(S.data.message||"Failed to update house type")}catch(S){console.error("Update error:",S),b("Error updating house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:n.name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:n.sqrfeet,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:n.rooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:n.bathrooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function uw(){const{apartment_id:t}=gn(),[a,r]=C.useState(!1),[n,l]=C.useState(null),[d,f]=C.useState([]),[h,b]=C.useState(!1),[g,w]=C.useState(!1),[k,E]=C.useState(null),[S,D]=C.useState(!1),[A,M]=C.useState(null),I=async()=>{try{r(!0),l(null);const te=await Te.get(`/housetype?apartment_id=${t}`);te.data.success&&Array.isArray(te.data.data)?f(te.data.data):f([])}catch(te){console.error("Error loading houses:",te),l("Failed to load houses. Please try again.")}finally{r(!1)}};C.useEffect(()=>{I()},[t]);const F=()=>{b(!0)},T=()=>{b(!1)},L=()=>{I(),b(!1),ne.success("House Type Created Successfully")},H=te=>{E(te),w(!0)},U=()=>{w(!1),E(null)},B=()=>{I(),w(!1),ne.success("House Type updated successfully!")},P=te=>{M(te),D(!0)},z=async()=>{try{if(!A)return;await Te.delete(`/houseType/${A.id}`),ne.success("House type deleted successfully"),D(!1),M(null),I()}catch(te){console.error("Delete house type error:",te),ne.error("Failed to delete house type")}},Z=()=>{D(!1),M(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:F,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"New House Type"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):n?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[n,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(te=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:G=>{G.stopPropagation(),H(te)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:G=>{G.stopPropagation(),P(te)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},te.id))})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:T,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(qS,{onClose:T,onCreated:L,apartment_id:t})]})}),g&&k&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:U,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx($S,{onClose:U,onUpdated:B,housetype:k})]})}),S&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',A.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Z,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function WS({houseowner:t,onClose:a,onUpdated:r}){const[n,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState(null),[g,w]=C.useState(null),[k,E]=C.useState([]),[S,D]=C.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});C.useEffect(()=>{t&&(D({name:t.name||"",occupation:t.occupation||"",country:t.country||"",mobile:t.mobile||"",email:t.email||"",occupied_way:t.occupied_way||"own",proof:t.proof||""}),t.proof&&w(t.proof))},[t]),C.useEffect(()=>{(async()=>{try{const B=await Te.get("/countries");E(B.data.data||[])}catch(B){console.error("Error fetching countries:",B)}})()},[]);const A=U=>{const{name:B,value:P}=U.target;D(z=>({...z,[B]:P}))},M=U=>{const B=U.target.files[0];if(B)if(b(B),B.type.startsWith("image/")){const P=new FileReader;P.onloadend=()=>{w(P.result)},P.readAsDataURL(B)}else w(null)},I=U=>{const B=U.target.value,P=k.find(z=>z.id.toString()===B);D(P?z=>({...z,country:P.country_name,mobile:P.phone_code+" "+z.mobile.replace(/^\+\d+\s?/,"")}):z=>({...z,country:"",mobile:z.mobile.replace(/^\+\d+\s?/,"")}))},F=U=>{const B=U.target.value;if(S.mobile&&S.mobile.includes("+")){const P=S.mobile.match(/^(\+\d+)(?:\s|$)/);if(P){const z=P[1];B.startsWith(z)?D(Z=>({...Z,mobile:B})):D(Z=>({...Z,mobile:z+" "+B.replace(/^\+\d+\s?/,"")}));return}}D(P=>({...P,mobile:B}))},T=async U=>{U.preventDefault(),f(!0);try{const B=new FormData;Object.keys(S).forEach(z=>{z!=="proof"&&B.append(z,S[z])}),h&&B.append("proof",h);const P=await Te.put(`/houseowner/${t.id}`,B,{headers:{"Content-Type":"multipart/form-data"}});P.data.success&&(r(P.data.data),a())}catch(B){console.error("Error updating house owner:",B),alert("Error updating house owner. Please try again.")}finally{f(!1)}},H=k.find(U=>U.country_name===S.country)?.phone_code||"";return n?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Gt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(gr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(us,{size:16,className:"inline mr-2"}),"Name *"]}),e.jsx("input",{type:"text",name:"name",value:S.name,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(qu,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:S.occupation,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx($v,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:k.find(U=>U.country_name===S.country)?.id||"",onChange:I,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),k.map(U=>e.jsxs("option",{value:U.id,children:[U.country_name," (",U.phone_code,")"]},U.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Rc,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[H&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:H}),e.jsx("input",{type:"tel",name:"mobile",value:S.mobile.replace(/^\+\d+\s?/,""),onChange:F,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${H?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Rl,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:S.email,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:S.occupied_way,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Is,{size:16,className:"inline mr-2"}),"Proof Document"]}),g&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(xr,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:S.proof.split("/").pop()})}),e.jsx("a",{href:`${Te.defaults.baseURL}/houseowner/view-proof/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:M,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(Is,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),h&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",h.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function KS({houseownerId:t,onClose:a,onSuccess:r}){const[n,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState({name:"",nic:"",email:"",phone:"",houseowner_id:t}),[g,w]=C.useState({});C.useEffect(()=>{b({name:"",nic:"",email:"",phone:"",houseowner_id:t}),w({})},[t]);const k=()=>{const A={};return h.name.trim()||(A.name="Name is required"),h.nic.trim()||(A.nic="NIC is required"),h.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)&&(A.email="Invalid email address"),h.phone&&!/^[0-9+\-\s()]{10,}$/.test(h.phone.replace(/\s/g,""))&&(A.phone="Invalid phone number"),w(A),Object.keys(A).length===0},E=A=>{const{name:M,value:I}=A.target;b(F=>({...F,[M]:I})),g[M]&&w(F=>({...F,[M]:""}))},S=async A=>{if(A.preventDefault(),!!k()){f(!0);try{const M=await Te.post("/family",{...h,houseowner_id:t});M.data.success&&(r(M.data.data),a())}catch(M){console.error("Error adding family member:",M),M.response?.data?.error?w(I=>({...I,general:M.response.data.message||"Failed to add family member"})):w(I=>({...I,general:"Failed to add family member. Please try again."}))}finally{f(!1)}}},D=A=>{const I=A.target.value.replace(/[^\d+\-\s]/g,"");b(F=>({...F,phone:I})),g.phone&&w(F=>({...F,phone:""}))};return n?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Gt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q0,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(gr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[g.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:g.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(us,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:d}),g.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Wv,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:d}),g.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Rl,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:d}),g.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Rc,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:D,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${g.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:d}),g.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:g.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(q0,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function ZS({member:t,onClose:a,onUpdated:r}){const[n,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState({}),[g,w]=C.useState({name:"",email:"",phone:""});C.useEffect(()=>{t&&w({name:t.name||"",email:t.email||"",phone:t.phone||""})},[t]);const k=()=>{const D={};return g.name.trim()||(D.name="Name is required"),g.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)&&(D.email="Invalid email address"),g.phone&&!/^[0-9+\-\s()]{10,}$/.test(g.phone.replace(/\s/g,""))&&(D.phone="Invalid phone number"),b(D),Object.keys(D).length===0},E=D=>{const{name:A,value:M}=D.target;w(I=>({...I,[A]:M})),h[A]&&b(I=>({...I,[A]:""}))},S=async D=>{if(D.preventDefault(),!!k()){f(!0);try{const A=await Te.put(`/family/${t.id}`,g);A.data.success&&(r(A.data.data),a())}catch(A){console.error("Error updating family member:",A),b(M=>({...M,general:A.response?.data?.message||"Failed to update family member"}))}finally{f(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(gr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:S,className:"p-6",children:[h.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(us,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:g.name,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:d}),h.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Rl,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:g.email,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Rc,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:g.phone,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(kf,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function QS(){const[t,a]=C.useState(!1),[r,n]=C.useState("type"),{apartment_id:l,floor_id:d,id:f}=gn(),[h,b]=C.useState(null),[g,w]=C.useState(null),[k,E]=C.useState(null),[S,D]=C.useState(null),[A,M]=C.useState(null),[I,F]=C.useState([]),[T,L]=C.useState(!1),[H,U]=C.useState([]),[B,P]=C.useState(!1),[z,Z]=C.useState(!1),[te,G]=C.useState(!1),[se,ie]=C.useState(!1),[Y,q]=C.useState(!1),[ce,pe]=C.useState(null),me=hr();C.useEffect(()=>{l&&Te.get(`/apartments/${l}`).then(ke=>ke.data.success&&b(ke.data.data)).catch(ke=>console.error("Error fetching apartment:",ke))},[l]),C.useEffect(()=>{d&&Te.get(`/floors/${d}`).then(ke=>ke.data.success&&w(ke.data.data)).catch(ke=>console.error("Error fetching floor:",ke))},[d]),C.useEffect(()=>{f&&Te.get(`/houses/${f}`).then(ke=>ke.data.success&&E(ke.data.data)).catch(ke=>console.error("Error fetching house:",ke))},[f]),C.useEffect(()=>{k?.housetype_id&&Te.get(`/housetype/${k.housetype_id}`).then(ke=>ke.data.success&&D(ke.data.data)).catch(ke=>console.error("Error fetching house type:",ke))},[k]),C.useEffect(()=>{k?.houseowner_id&&Te.get(`/houseowner/${k.houseowner_id}`).then(ke=>ke.data.success&&M(ke.data.data)).catch(ke=>console.error("Error fetching house owner: ",ke))},[k]),C.useEffect(()=>{k?.houseowner_id&&le(k.houseowner_id)},[k]);const le=async ke=>{try{L(!0);const Pe=await Te.get(`/family/houseowner/${ke}`);Pe.data.success&&F(Pe.data.data||[])}catch(Pe){console.error("Error fetching family members: ",Pe),F([])}finally{L(!1)}};C.useEffect(()=>{f&&X()},[f]);const X=async()=>{try{P(!0);const ke=await Te.get(`/bill-assignments/house/${f}`);ke.data.success&&U(ke.data.data||[])}catch(ke){console.error("Error fetching assigned bills:",ke),U([])}finally{P(!1)}},W=()=>{me(`/houses/${l}/${d}`)},K=ke=>new Date(ke).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ae=async()=>{if(!A?.id){ne.warning("House owner information not available");return}try{Z(!0);try{const Le=await Te.head(`/houseowner/download-proof/${A.id}`);ne.info("Proof document found, starting download...")}catch(Le){console.error("HEAD request failed:",Le.response?.status||Le.message)}const ke=await Te.get(`/houseowner/download-proof/${A.id}`,{responseType:"blob"});if(ne.info(`Download response status: ${ke.status}`),ke.status!==200){const Le=await ke.data.text();ne.error(`Error response: ${Le}`);let Ee=`Download failed with status ${ke.status}`;try{const Je=JSON.parse(Le);Je.message&&(Ee=Je.message)}catch{Le&&(Ee=Le)}throw new Error(Ee)}const Pe=new Blob([ke.data]),Oe=window.URL.createObjectURL(Pe),nt=document.createElement("a");nt.href=Oe;const we=ke.headers["content-disposition"];let Ae="owner_proof.jpg";if(we){const Le=we.match(/filename="?([^"]+)"?/);Le&&(Ae=Le[1],ne.info(`Filename from header: ${Ae}`))}else if(A.proof){const Le=A.proof.split("/");Ae=Le[Le.length-1]||Ae}nt.download=Ae,document.body.appendChild(nt),nt.click(),document.body.removeChild(nt),setTimeout(()=>{window.URL.revokeObjectURL(Oe)},100),ne.success("Download successful")}catch(ke){ne.error("Error downloading proof"),console.error("Error details:",{name:ke.name,message:ke.message,stack:ke.stack,response:ke.response?.data}),ke.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):ke.response?.status===500?alert("Server error occurred. Please check server logs."):ke.message?alert(`Download failed: ${ke.message}`):alert("Failed to download proof document. Please try again.")}finally{Z(!1)}},oe=()=>{k?.houseowner_id?ie(!0):ne.warning("House owner information is required before adding family members.")},re=ke=>{pe(ke),q(!0)},Re=async ke=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await Te.delete(`/family/${ke}`),k?.houseowner_id&&le(k.houseowner_id)}catch{ne.error("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:W,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:25})}),e.jsx(Pr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),h&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",h.name]}),g&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",g.floor_id]}),k&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",k.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>n("type"),className:`px-4 py-2 font-semibold 
                                    ${r==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>n("owner"),className:`px-4 py-2 font-semibold 
                                    ${r==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>n("residents"),className:`px-4 py-2 font-semibold 
                                    ${r==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",I.length,")"]}),e.jsx("button",{onClick:()=>n("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${r==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),r==="type"&&S&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(Pr,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ku,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:S.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(Ku,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[S.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(nE,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:S.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(aE,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:S.bathrooms})]})]})})]})]}),r==="owner"&&A&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(us,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:A.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:A.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),A.houseowner_id&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," House Owner"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>G(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(ga,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(sg,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(qu,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:A.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:K(k.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx($v,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rc,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Rl,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:A.email||"N/A"})]})]}),A.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(xr,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:ae,disabled:z,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:z?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ol,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:A.proof.split("/").pop()})]})]})]})]})]})]}),r==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(On,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:oe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(q0,{size:18,className:"mr-2"}),"Add Family Member"]})]}),T?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):I.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(On,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:oe,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(q0,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(ke=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:ke.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:ke.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Wv,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:ke.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>re(ke),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(ga,{size:18})}),e.jsx("button",{onClick:()=>Re(ke.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(Fr,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[ke.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(qu,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:ke.occupation})]})]}),ke.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Rl,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:ke.email})]})]}),ke.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(lC,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:ke.phone})]})]}),ke.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Tl,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:K(ke.moved_at)})]})]})]})]},ke.id))})]}),r==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(xr,{className:"mr-2",size:20}),"Assigned Bills"]}),B?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(Gt,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:H.map(ke=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Xs,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:ke.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:ke.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Tl,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:K(ke.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${ke.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:ke.status||"active"})})]})},ke.id))})]})]})})]}),te&&A&&e.jsx(WS,{houseowner:A,onClose:()=>G(!1),onUpdated:ke=>{M(ke),G(!1)}}),se&&k?.houseowner_id&&e.jsx(KS,{houseownerId:k.houseowner_id,onClose:()=>ie(!1),onSuccess:ke=>{F(Pe=>[ke,...Pe]),ie(!1)}}),Y&&ce&&e.jsx(ZS,{member:ce,onClose:()=>{q(!1),pe(null)},onUpdated:ke=>{le(),F(Pe=>Pe.map(Oe=>Oe.id===ke.id?ke:Oe)),q(!1),pe(null)}}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function JS({onClose:t,onCreated:a,apartment_id:r,floor_id:n}){const[l,d]=C.useState([{numHouses:1,housetype_id:""}]),[f,h]=C.useState(""),[b,g]=C.useState([]),[w,k]=C.useState([]),[E,S]=C.useState([]),[D,A]=C.useState(!1),[M,I]=C.useState(!0),[F,T]=C.useState("");C.useEffect(()=>{(async()=>{try{const ie=await Te.get(`/houses?apartment_id=${r}&floor_id=${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ie.data?.data?.length>0&&S(ie.data.data)}catch(ie){console.error("Error fetching existing houses:",ie)}finally{I(!1)}})()},[r,n]),C.useEffect(()=>{(async()=>{try{const ie=await Te.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});k(ie.data.data||[])}catch(ie){console.error("Error fetching house types:",ie)}})()},[r]);const L=se=>{if(!se||E.length===0)return 0;const ie=E.filter(q=>q.house_id&&q.house_id.startsWith(se)).map(q=>{const pe=q.house_id.slice(se.length).match(/^\d+$/);return pe?parseInt(pe[0]):0}).filter(q=>q>0);return ie.length===0?0:Math.max(...ie)},H=()=>{d(se=>[...se,{numHouses:1,housetype_id:""}])},U=se=>{if(l.length===1){T("At least one house type row is required");return}d(ie=>ie.filter((Y,q)=>q!==se))},B=(se,ie,Y)=>{d(q=>q.map((ce,pe)=>pe===se?{...ce,[ie]:Y}:ce))},P=()=>{if(!f.trim()){T("Please enter a key letter/prefix");return}if(l.filter(pe=>!pe.housetype_id||pe.numHouses<1).length>0){T("Please select house type and ensure number of houses is at least 1 for all rows");return}T("");const ie=f.trim().toUpperCase();let q=L(ie)+1;const ce=[];l.forEach(pe=>{const me=w.find(le=>le.id===pe.housetype_id);for(let le=0;le<pe.numHouses;le++)ce.push({house_id:`${ie}${q}`,housetype_id:pe.housetype_id,house_type_name:me?.name||""}),q++}),g(ce)},z=(se,ie)=>{const Y=[...b];Y[se].housetype_id=ie;const q=w.find(ce=>ce.id===ie);Y[se].house_type_name=q?.name||"",g(Y)},Z=async se=>{if(se.preventDefault(),T(""),A(!0),b.filter(Y=>!Y.housetype_id).length>0){T("Please select house type for all houses"),A(!1);return}try{const Y={apartment_id:r,floor_id:n,houses:b.map(ce=>({house_id:ce.house_id,housetype_id:ce.housetype_id}))},q=await Te.post("/houses/batch",Y,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a&&a(),t&&t()}catch(Y){console.error("Error creating houses:",Y),T(Y.response?.data?.message||"Server error while creating houses.")}finally{A(!1)}},te=se=>{h(se.target.value),g([])},G=l.reduce((se,ie)=>se+(ie.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[F&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:F}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:f,onChange:te,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(La,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:l.map((se,ie)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:se.numHouses,onChange:Y=>B(ie,"numHouses",parseInt(Y.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:se.housetype_id,onChange:Y=>B(ie,"housetype_id",Y.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>U(ie),disabled:l.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(Fr,{size:16})})})]},ie))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:G})]})})]}),f.trim()&&E.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',f.toUpperCase(),'":']})," Found ",L(f.trim().toUpperCase())," existing houses.",L(f.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${L(f.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:P,disabled:!f.trim()||M||G===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:M?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",G," House",G!==1?"s":"",e.jsx(K6,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),b.length>0?e.jsxs("form",{onSubmit:Z,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",b.length," house",b.length!==1?"s":"",' with prefix "',f.toUpperCase(),'"']}),b.map((se,ie)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:se.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:se.housetype_id,onChange:Y=>z(ie,Y.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]})]})]}),se.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",se.house_type_name]})]},ie))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:t,disabled:D,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:D,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:D?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${b.length} House${b.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function eA({isOpen:t,onClose:a,onImportSuccess:r,apartment_id:n,floor_id:l,house_id:d}){const[f,h]=C.useState(null),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(null),[D,A]=C.useState(n||""),M=z=>{z.preventDefault(),g(!0)},I=z=>{z.preventDefault(),g(!1)},F=z=>{z.preventDefault(),g(!1);const Z=z.dataTransfer.files[0];Z&&L(Z)},T=z=>{const Z=z.target.files[0];Z&&L(Z)},L=z=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(z.type)){ne.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(z.size>10*1024*1024){ne.error("File size must be less than 10MB");return}h(z),S(null)},H=()=>{const z=`name,nic,occupation,country,mobile,email,occupied_way
John Doe,123456789V,Software Engineer,Sri Lanka,+94 771234567,john.doe@example.com,own

Instructions:
1. Fill in the house owner details in the second row
2. Keep the column headers as shown in the first row
3. Save the file and upload it here
4. The system will extract the information automatically

Important:
- Fill only one row (single house owner)
- Email is required for verification
- Mobile should include country code
- occupied_way can be "own" or "For rent"`,Z=new Blob([z],{type:"text/csv"}),te=window.URL.createObjectURL(Z),G=document.createElement("a");G.href=te,G.download="house_owner_template.csv",document.body.appendChild(G),G.click(),document.body.removeChild(G),window.URL.revokeObjectURL(te),ne.success("Template downloaded successfully!")},U=async()=>{if(!f){ne.error("Please select a file first");return}if(!n){ne.error("Apartment information is missing");return}k(!0);const z=new FormData;z.append("excelFile",f),z.append("apartment_id",n),d&&z.append("house_id",d);try{const Z=await Te.post("/houseowner/import-from-excel",z,{headers:{"Content-Type":"multipart/form-data"}});Z.data.success&&(S(Z.data.data),r&&r(Z.data.data.houseOwner),ne.success("House owner imported successfully!"))}catch(Z){console.error("Import error:",Z),ne.error(Z.response?.data?.message||"Failed to import house owner")}finally{k(!1)}},B=()=>{h(null),S(null)},P=()=>{B(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Import House Owner from Excel"}),e.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(gr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:E?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($a,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"House Owner Imported Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Verification email has been sent to ",E.houseOwner.email]})]})]})}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"Imported House Owner Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"NIC/Passport"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.nic})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.occupation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"House Owner ID"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.id})]})]}),E.house&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Linked to House:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"House ID:"}),e.jsx("p",{className:"font-medium",children:E.house.house_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),e.jsx("p",{className:"font-medium text-green-600",children:"Occupied"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:B,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another"}),e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our template to ensure proper formatting"})]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ol,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${b?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:M,onDragLeave:I,onDrop:F,children:[e.jsx(OE,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:f?f.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:T})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"File Format Requirements:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Column Name"}),e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t pt-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"name"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Full name of house owner"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"nic"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"NIC or passport number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"email"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Email address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupation"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Occupation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"country"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Country name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"mobile"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Mobile number with country code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupied_way"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:'"own" or "For rent"'})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("strong",{children:"Note:"})," Only the first row of the Excel file will be imported."]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:w,children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!f||w,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:16}),"Import House Owner"]})})]})]})})]})}):null}function tA({house:t,onClose:a,onUpdated:r,apartment_id:n,floor_id:l}){const[d,f]=C.useState({house_id:t.house_id,status:t.status,housetype_id:t.housetype_id,houseowner_id:t.houseowner_id}),[h,b]=C.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[g,w]=C.useState([]),[k,E]=C.useState(!1),[S,D]=C.useState(!1),[A,M]=C.useState(null),[I,F]=C.useState([]),[T,L]=C.useState(!0),[H,U]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const pe=await(await fetch("https://general.apivcm.shop/countries")).json();F(pe.data)}catch(ce){console.error("Error fetching countries:",ce)}})()},[]),C.useEffect(()=>{const q=async()=>{try{const ce=await Te.get("/auth/me");if(ce.data?.success&&ce.data.data&&ce.data.data.length>0){const pe=ce.data.data[0],me=pe.country||pe.country_name||"";if(me){const le=(I||[]).find(X=>X.country===me||X.country_name===me);b(X=>({...X,country:X.country||me,mobile:X.mobile||(le?le.international_dialing+" ":X.mobile)}))}}}catch(ce){console.error("Error fetching admin profile for prefill:",ce)}};I&&I.length>0&&q()},[I]);const B=q=>{const ce=q.target.value,pe=I.find(me=>me.country===ce);b(me=>({...me,country:ce,mobile:pe?pe.international_dialing+" ":me.mobile}))},P=q=>{const ce=q.target.value;if(se){const pe=ce.replace(/\D/g,""),me=se.international_dialing.replace(/\D/g,""),le=pe.startsWith(me)?pe.slice(me.length):pe;b(X=>({...X,mobile:se.international_dialing+(le?" "+le:"")}))}else b(pe=>({...pe,mobile:ce}))};C.useEffect(()=>{(async()=>{try{const ce=await Te.get(`/housetype?apartment_id=${n}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});w(ce.data.data||[])}catch(ce){console.error("Error fetching house types:",ce)}})()},[n]),C.useEffect(()=>{d.status==="occupied"&&t.status!=="occupied"?(D(!0),L(!0)):d.status!=="occupied"&&D(!1)},[d.status,t.status]);const z=q=>{f({...d,[q.target.name]:q.target.value})},Z=q=>{b({...h,[q.target.name]:q.target.value})},te=q=>{M(q.target.files[0])},G=async q=>{q.preventDefault(),E(!0);try{let ce=d.houseowner_id,pe=!1;if(d.status==="occupied"&&!ce){const X=new FormData;X.append("name",h.name),X.append("nic",h.nic),X.append("occupation",h.occupation),X.append("country",h.country),X.append("mobile",h.mobile),X.append("email",h.email),X.append("occupied_way",h.occupied_way),X.append("apartment_id",n),A&&X.append("proof",A);const W=await Te.post("/houseowner",X,{headers:{"Content-Type":"multipart/form-data"}});W.data.success&&(ce=W.data.data.id,pe=!0,f(K=>({...K,houseowner_id:ce})))}const me={...d,house_owner_id:ce||ce};if((await Te.put(`/houses/${t.id}`,me)).data.success)return pe?(r(),ne.success("House owner saved successfully! You can now setup login.")):r(),ce}catch(ce){console.error("Error updating house:",ce),ne.error("Error updating house. Please try again.")}finally{E(!1)}},se=I.find(q=>q.country===h.country),ie=async()=>{try{E(!0);const q=d.houseowner_id;if(!q){ne.error("House owner ID not found. Please save the house owner first.");return}const ce=h.email;if(!ce||!ce.includes("@")){ne.error("Please enter a valid email address for the house owner");return}if(!window.confirm(`Send verification email to ${ce}?

The house owner will receive an email with verification link.`)){E(!1);return}const me=await Te.post("/houseowner-auth/admin/setup",{houseowner_id:q,send_email:!0});me.data.success?(ne.success("Verification email sent. Check your inbox "),r()):ne.error(me.data.message||"Failed to set up house owner")}catch(q){console.error("Error setting up house owner:",q),ne.error("Error setting up house owner. Please try again.")}finally{E(!1)}},Y=q=>{b({name:q.name||"",nic:q.nic||"",occupation:q.occupation||"",country:q.country||"",mobile:q.mobile||"",email:q.email||"",occupied_way:q.occupied_way||"own",proof:null}),q.id&&f(ce=>({...ce,houseowner_id:q.id})),U(!1)};return e.jsxs("form",{onSubmit:G,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 pl-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:d.house_id,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:d.housetype_id,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),g&&g.length>0?g.map(q=>e.jsx("option",{value:q.id,children:q.name||q.type_name||"Unnamed Type"},q.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:d.status,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),S&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{type:"button",onClick:()=>L(!T),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),T?e.jsx(jc,{size:20,className:"text-gray-500"}):e.jsx(Dl,{size:20,className:"text-gray-500"})]}),e.jsxs("button",{type:"button",onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Is,{size:16}),"Import from Excel"]})]}),T&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:h.occupation,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsx("input",{name:"country",list:"owner-country-list",value:h.country||"",onChange:B,placeholder:"Select or type country *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0}),e.jsx("datalist",{id:"owner-country-list",children:I.map(q=>e.jsx("option",{value:q.country},q.country))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{name:"mobile",value:h.mobile,onChange:P,placeholder:se?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${se?"rounded-l-none":""}`,required:!0,disabled:!se})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",se?.international_dialing||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:h.email,onChange:Z,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:h.occupied_way,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:te,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]}),e.jsx("div",{className:"text-center pt-2 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Or"," ",e.jsx("button",{type:"button",onClick:()=>U(!0),className:"text-purple-600 hover:text-purple-700 underline",children:"import from Excel file"})," ","instead of manual entry"]})})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:k,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[k&&e.jsx(Gt,{size:16,className:"animate-spin"}),S?"Save House & Owner":"Save Changes"]}),(d.houseowner_id||S&&h.email)&&e.jsx("button",{type:"button",onClick:ie,disabled:k||!h.email,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",title:h.email?"Setup login for house owner":"Enter email first",children:"Setup Auth"})]})}),e.jsx(eA,{isOpen:H,onClose:()=>U(!1),onImportSuccess:Y,apartment_id:n,house_id:t.id,floor_id:l})]})}function rA({onClose:t,onCreated:a}){const[r,n]=C.useState({bill_name:"",billtype:""}),[l,d]=C.useState(!1),[f,h]=C.useState(""),[b,g]=C.useState([]),w=E=>{const{name:S,value:D}=E.target;n(A=>({...A,[S]:D})),S==="bill_name"&&f&&h("")},k=async E=>{if(E.preventDefault(),d(!0),h(""),!r.bill_name.trim()||!r.billtype){h("Please fill in all required fields"),d(!1);return}try{const S=await Te.post("/bills",{bill_name:r.bill_name.trim(),billtype:r.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});S.data.success?(a?.(S.data.data),ne.success("Bill type created successfully"),t()):h(S.data.message||"Failed to save bill type")}catch(S){console.error("Error saving bill type:",S);const D=S.response?.data?.message||"Error saving bill type. Please try again.";h(D),S.response?.status===409&&ne.error(D)}finally{d(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:r.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:r.bill_name,onChange:w,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.bill_name.trim()||!r.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.bill_name.trim()||!r.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function fw({bills:t,onClose:a,onUpdated:r}){const[n,l]=C.useState({bill_name:"",billtype:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),g=localStorage.getItem("token");C.useEffect(()=>{t&&l({bill_name:t.bill_name||"",billtype:t.billtype||""})},[t]);const w=E=>{const{name:S,value:D}=E.target;l(A=>({...A,[S]:D}))},k=async E=>{E.preventDefault(),f(!0),b("");try{const S=await Te.put(`/bills/${t.id}`,n,{headers:{Authorization:`Bearer ${g}`}});S.data.success?(r&&r(S.data.data),a&&a()):b(S.data.message||"Failed to update bill type")}catch(S){console.error("Update error:",S),b("Error updating bill type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:n.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:n.bill_name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function xw({isOpen:t,onClose:a,selectedBill:r,onAssignSuccess:n}){const[l,d]=C.useState([]),[f,h]=C.useState({}),[b,g]=C.useState({}),[w,k]=C.useState(""),[E,S]=C.useState(""),[D,A]=C.useState([]),[M,I]=C.useState({}),[F,T]=C.useState({}),[L,H]=C.useState(!1),[U,B]=C.useState({}),[P,z]=C.useState({}),[Z,te]=C.useState(!1),G=async()=>{try{H(!0);const K=await Te.get("/apartments");K.data.success&&d(K.data.data||[])}catch(K){console.error("Error loading apartments:",K),ne.error("Failed to load apartments")}finally{H(!1)}},se=async K=>{if(K)try{B(oe=>({...oe,[K]:!0}));const ae=await Te.get(`/floors?apartment_id=${K}`);if(ae.data.success){const oe=ae.data.data||[];h(re=>({...re,[K]:oe}))}}catch(ae){console.error("Error loading floors:",ae),ne.error("Failed to load floors")}finally{B(ae=>({...ae,[K]:!1}))}},ie=async(K,ae)=>{if(!(!K||!ae))try{z(re=>({...re,[ae]:!0}));const oe=await Te.get(`/houses?apartment_id=${K}&floor_id=${ae}`);if(oe.data.success){const re=oe.data.data||[];g(Re=>({...Re,[ae]:re}))}}catch(oe){console.error("Error loading houses:",oe),ne.error("Failed to load houses")}finally{z(oe=>({...oe,[ae]:!1}))}},Y=async K=>{const ae=M[K.id];!ae&&!f[K.id]&&await se(K.id),I(oe=>({...oe,[K.id]:!ae})),ae||(k(K.id),S(""),A([]))},q=async(K,ae)=>{const oe=`${K}-${ae.id}`,re=F[oe];!re&&!b[ae.id]&&await ie(K,ae.id),T(Re=>({...Re,[oe]:!re})),re||(S(ae.id),A([]))},ce=K=>{A(ae=>ae.includes(K)?ae.filter(oe=>oe!==K):[...ae,K])},pe=()=>{if(!E)return;const ae=(b[E]||[]).map(re=>re.id),oe=ae.every(re=>D.includes(re));A(oe?re=>re.filter(Re=>!ae.includes(Re)):re=>{const Re=[...re];return ae.forEach(ke=>{Re.includes(ke)||Re.push(ke)}),Re})},me=()=>{if(!E)return!1;const K=b[E]||[];return K.length===0?!1:K.every(ae=>D.includes(ae.id))},le=()=>{if(!E)return!1;const K=b[E]||[];return K.length===0?!1:K.some(ae=>D.includes(ae.id))&&!me()},X=async()=>{if(!w||!E||D.length===0){ne.error("Please select apartment, floor, and at least one house");return}te(!0);try{const K={bill_id:r.id,apartment_id:w,floor_id:E,house_ids:D};await Te.post("/bill-assignments/assign",K),ne.success("Bill assign successfully"),n(),W()}catch(K){console.error("Error assigning bill:",K),ne.error(K.response?.data?.message||"Failed to assign bill")}finally{te(!1)}},W=()=>{k(""),S(""),h({}),g({}),A([]),I({}),T({}),a()};return C.useEffect(()=>{t&&G()},[t]),t?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:W,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:r?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),L?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Gt,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:l.map(K=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${w===K.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>Y(K),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:K.name}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),Y(K)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:M[K.id]?e.jsx(jc,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(Dl,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),M[K.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:U[K.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(Gt,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(f[K.id]||[]).map(ae=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${E===ae.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>q(K.id,ae),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ae.floor_id}),e.jsx("button",{onClick:oe=>{oe.stopPropagation(),q(K.id,ae)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:F[`${K.id}-${ae.id}`]?e.jsx(jc,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(Dl,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),F[`${K.id}-${ae.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:P[ae.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(Gt,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:me(),ref:oe=>{oe&&(oe.indeterminate=le())},onChange:pe,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(b[ae.id]||[]).map(oe=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:D.includes(oe.id),onChange:()=>ce(oe.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:oe.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",oe.status,")"]})]})]},oe.id))})]})})]},ae.id))})})]},K.id))})]}),D.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:D.length})," house",D.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:W,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:X,disabled:!w||!E||D.length===0||Z,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${D.length} House${D.length!==1?"s":""}`})]})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):null}function aA(){const[t,a]=C.useState(!1),[r,n]=C.useState(null),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(null),[D,A]=C.useState(null),[M,I]=C.useState(!1),[F,T]=C.useState(null);hr();const L=async()=>{try{a(!0),n(null);const Y=await Te.get("/bills");Y.data.success&&Array.isArray(Y.data.data)?d(Y.data.data):d([])}catch(Y){console.error("Error loading bills:",Y),n("Failed to load bills. Please try again.")}finally{a(!1)}};C.useEffect(()=>{L()},[]);const H=l.filter(Y=>Y.billtype==="Shared"),U=Y=>{A(Y),k(!0)},B=()=>{k(!1),A(null)},P=()=>{ne.success("Bill assigned successfully!")},z=Y=>{S(Y),g(!0)},Z=()=>{g(!1),S(null)},te=()=>{L(),g(!1),ne.success("Bill Type updated successfully!")},G=Y=>{T(Y),I(!0)},se=async()=>{try{if(!F)return;await Te.delete(`/bills/${F.id}`),ne.success("Bill type deleted successfully"),I(!1),T(null),L()}catch(Y){console.error("Delete bill type error:",Y),ne.error("Failed to delete bill type")}},ie=()=>{I(!1),T(null)};return e.jsxs("div",{children:[t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:L,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):H.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map((Y,q)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:q+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Y.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ce=>{ce.stopPropagation(),U(Y)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(La,{size:20})}),e.jsx("span",{children:Y.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ce=>{ce.stopPropagation(),z(Y)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:ce=>{ce.stopPropagation(),G(Y)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},Y.id))})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Z,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(fw,{onClose:Z,onUpdated:te,bills:E})]})}),e.jsx(xw,{isOpen:w,onClose:B,selectedBill:D,onAssignSuccess:P}),M&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',F.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ie,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:se,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function hw(){const[t,a]=C.useState(!1),[r,n]=C.useState(null),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(null),[D,A]=C.useState(null),[M,I]=C.useState(!1),[F,T]=C.useState(null),[L,H]=C.useState("bills"),U=hr(),B=async()=>{try{a(!0),n(null);const X=await Te.get("/bills");X.data.success&&Array.isArray(X.data.data)?d(X.data.data):d([])}catch(X){console.error("Error loading bills:",X),n("Failed to load bills. Please try again.")}finally{a(!1)}};C.useEffect(()=>{B()},[]);const P=l.filter(X=>X.billtype==="Measurable"),z=X=>{A(X),k(!0)},Z=()=>{k(!1),A(null)},te=()=>{ne.success("Bill assigned successfully!")},G=()=>{h(!0)},se=()=>{h(!1)},ie=()=>{B(),h(!1)},Y=X=>{S(X),g(!0)},q=()=>{g(!1),S(null)},ce=()=>{B(),g(!1),ne.success("Bill Type updated successfully!")},pe=X=>{T(X),I(!0)},me=async()=>{try{if(!F)return;await Te.delete(`/bills/${F.id}`),ne.success("Bill type deleted successfully"),I(!1),T(null),B()}catch(X){console.error("Delete bill type error:",X),ne.error("Failed to delete bill type")}},le=()=>{I(!1),T(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:G,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>H("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${L==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",P.length,")"]}),e.jsx("button",{onClick:()=>H("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${L==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),L==="bills"&&e.jsx(e.Fragment,{children:t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:B,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):P.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:P.map((X,W)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>U(`/billranges/${X.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:W+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:X.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:K=>{K.stopPropagation(),z(X)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(La,{size:20})}),e.jsx("span",{children:X.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:K=>{K.stopPropagation(),Y(X)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:K=>{K.stopPropagation(),pe(X)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},X.id))})]})})}),L==="sharedValueBills"&&e.jsx(aA,{}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:se,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(rA,{onClose:se,onCreated:ie})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:q,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(fw,{onClose:q,onUpdated:ce,bills:E})]})}),e.jsx(xw,{isOpen:w,onClose:Z,selectedBill:D,onAssignSuccess:te}),M&&F&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',F.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:me,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function sA({house:t,apartment:a,floor:r,onClose:n,onUploadSuccess:l}){const[d,f]=C.useState(!1),[h,b]=C.useState([]),[g,w]=C.useState([]),[k,E]=C.useState(!0),S=C.useRef(null);C.useEffect(()=>{I()},[t.id]);const D=H=>{const U=Array.from(H.target.files);w(B=>[...B,...U])},A=H=>{w(U=>U.filter((B,P)=>P!==H))},M=async()=>{if(g.length===0){ne.error("Please select at least one file");return}try{f(!0);const H=new FormData;g.forEach(B=>{H.append("documents",B)}),H.append("apartmentId",a.id),H.append("floorId",r.id),H.append("houseId",t.id),(await Te.post("/house-documents/upload",H,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(ne.success("House documents uploaded successfully!"),w([]),l?.(),I(),S.current&&(S.current.value=""))}catch(H){console.error("Upload error:",H);const U=H.response?.data?.message||"Failed to upload house documents";ne.error(U)}finally{f(!1)}},I=async()=>{try{E(!0);const H=await Te.get(`/house-documents/${t.id}/documents`);H.data.success?b(H.data.data):console.error("API response not successful:",H.data)}catch(H){console.error("Error loading house documents:",H);const U=H.response?.data?.message||"Failed to load house documents";ne.error(U),H.response&&(console.error("Error response:",H.response.data),console.error("Error status:",H.response.status))}finally{E(!1)}},F=async H=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Te.delete(`/house-documents/documents/${H}`),ne.success("House document deleted successfully"),I()}catch(U){console.error("Delete error:",U);const B=U.response?.data?.message||"Failed to delete house document";ne.error(B)}},T=async H=>{try{const U=await Te.get(`/house-documents/documents/${H.id}/download`,{responseType:"blob"}),B=window.URL.createObjectURL(new Blob([U.data])),P=document.createElement("a");P.href=B,P.setAttribute("download",H.original_name||H.file_name),document.body.appendChild(P),P.click(),P.remove(),window.URL.revokeObjectURL(B)}catch(U){console.error("Download error:",U);const B=U.response?.data?.message||"Failed to download house document";ne.error(B)}},L=H=>{if(H===0)return"0 Bytes";const U=1024,B=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(H)/Math.log(U));return parseFloat((H/Math.pow(U,P)).toFixed(2))+" "+B[P]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",t.house_id]}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&r&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",r.floor_id," |",e.jsx("strong",{children:" House:"})," ",t.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:S,onChange:D,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>S.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Is,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),g.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:g.map((H,U)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(xr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:H.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:L(H.size)})]})]}),e.jsx("button",{onClick:()=>A(U),className:"text-red-500 hover:text-red-700",children:e.jsx(gr,{size:16})})]},U))})]}),g.length>0&&e.jsx("button",{onClick:M,disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{size:20}),"Upload ",g.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),k?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:h.map(H=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(xr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:H.original_name||H.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[L(H.file_size),"  Uploaded on ",new Date(H.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(H),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Ol,{size:18})}),e.jsx("button",{onClick:()=>F(H.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:18})})]})]},H.id))})]})]})}const nA="modulepreload",iA=function(t){return"/"+t},cb={},mw=function(a,r,n){let l=Promise.resolve();if(r&&r.length>0){let b=function(g){return Promise.all(g.map(w=>Promise.resolve(w).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");l=b(r.map(g=>{if(g=iA(g),g in cb)return;cb[g]=!0;const w=g.endsWith(".css"),k=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${k}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":nA,w||(E.as="script"),E.crossOrigin="",E.href=g,h&&E.setAttribute("nonce",h),document.head.appendChild(E),w)return new Promise((S,D)=>{E.addEventListener("load",S),E.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${g}`)))})}))}function d(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&d(h.reason);return a().catch(d)})};var mc={},Bh,db;function lA(){return db||(db=1,Bh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Bh}var Ph={},Nl={},ub;function jo(){if(ub)return Nl;ub=1;let t;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Nl.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Nl.getSymbolTotalCodewords=function(n){return a[n]},Nl.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},Nl.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');t=n},Nl.isKanjiModeEnabled=function(){return typeof t<"u"},Nl.toSJIS=function(n){return t(n)},Nl}var zh={},fb;function ng(){return fb||(fb=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function a(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},t.from=function(n,l){if(t.isValid(n))return n;try{return a(n)}catch{return l}}}(zh)),zh}var Uh,xb;function oA(){if(xb)return Uh;xb=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(a){const r=Math.floor(a/8);return(this.buffer[r]>>>7-a%8&1)===1},put:function(a,r){for(let n=0;n<r;n++)this.putBit((a>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),a&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Uh=t,Uh}var Hh,hb;function cA(){if(hb)return Hh;hb=1;function t(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return t.prototype.set=function(a,r,n,l){const d=a*this.size+r;this.data[d]=n,l&&(this.reservedBit[d]=!0)},t.prototype.get=function(a,r){return this.data[a*this.size+r]},t.prototype.xor=function(a,r,n){this.data[a*this.size+r]^=n},t.prototype.isReserved=function(a,r){return this.reservedBit[a*this.size+r]},Hh=t,Hh}var Vh={},mb;function dA(){return mb||(mb=1,function(t){const a=jo().getSymbolSize;t.getRowColCoords=function(n){if(n===1)return[];const l=Math.floor(n/7)+2,d=a(n),f=d===145?26:Math.ceil((d-13)/(2*l-2))*2,h=[d-7];for(let b=1;b<l-1;b++)h[b]=h[b-1]-f;return h.push(6),h.reverse()},t.getPositions=function(n){const l=[],d=t.getRowColCoords(n),f=d.length;for(let h=0;h<f;h++)for(let b=0;b<f;b++)h===0&&b===0||h===0&&b===f-1||h===f-1&&b===0||l.push([d[h],d[b]]);return l}}(Vh)),Vh}var Gh={},gb;function uA(){if(gb)return Gh;gb=1;const t=jo().getSymbolSize,a=7;return Gh.getPositions=function(n){const l=t(n);return[[0,0],[l-a,0],[0,l-a]]},Gh}var Yh={},pb;function fA(){return pb||(pb=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const d=l.size;let f=0,h=0,b=0,g=null,w=null;for(let k=0;k<d;k++){h=b=0,g=w=null;for(let E=0;E<d;E++){let S=l.get(k,E);S===g?h++:(h>=5&&(f+=a.N1+(h-5)),g=S,h=1),S=l.get(E,k),S===w?b++:(b>=5&&(f+=a.N1+(b-5)),w=S,b=1)}h>=5&&(f+=a.N1+(h-5)),b>=5&&(f+=a.N1+(b-5))}return f},t.getPenaltyN2=function(l){const d=l.size;let f=0;for(let h=0;h<d-1;h++)for(let b=0;b<d-1;b++){const g=l.get(h,b)+l.get(h,b+1)+l.get(h+1,b)+l.get(h+1,b+1);(g===4||g===0)&&f++}return f*a.N2},t.getPenaltyN3=function(l){const d=l.size;let f=0,h=0,b=0;for(let g=0;g<d;g++){h=b=0;for(let w=0;w<d;w++)h=h<<1&2047|l.get(g,w),w>=10&&(h===1488||h===93)&&f++,b=b<<1&2047|l.get(w,g),w>=10&&(b===1488||b===93)&&f++}return f*a.N3},t.getPenaltyN4=function(l){let d=0;const f=l.data.length;for(let b=0;b<f;b++)d+=l.data[b];return Math.abs(Math.ceil(d*100/f/5)-10)*a.N4};function r(n,l,d){switch(n){case t.Patterns.PATTERN000:return(l+d)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return d%3===0;case t.Patterns.PATTERN011:return(l+d)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(d/3))%2===0;case t.Patterns.PATTERN101:return l*d%2+l*d%3===0;case t.Patterns.PATTERN110:return(l*d%2+l*d%3)%2===0;case t.Patterns.PATTERN111:return(l*d%3+(l+d)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}t.applyMask=function(l,d){const f=d.size;for(let h=0;h<f;h++)for(let b=0;b<f;b++)d.isReserved(b,h)||d.xor(b,h,r(l,b,h))},t.getBestMask=function(l,d){const f=Object.keys(t.Patterns).length;let h=0,b=1/0;for(let g=0;g<f;g++){d(g),t.applyMask(g,l);const w=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(g,l),w<b&&(b=w,h=g)}return h}}(Yh)),Yh}var Au={},yb;function gw(){if(yb)return Au;yb=1;const t=ng(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Au.getBlocksCount=function(l,d){switch(d){case t.L:return a[(l-1)*4+0];case t.M:return a[(l-1)*4+1];case t.Q:return a[(l-1)*4+2];case t.H:return a[(l-1)*4+3];default:return}},Au.getTotalCodewordsCount=function(l,d){switch(d){case t.L:return r[(l-1)*4+0];case t.M:return r[(l-1)*4+1];case t.Q:return r[(l-1)*4+2];case t.H:return r[(l-1)*4+3];default:return}},Au}var Xh={},_0={},bb;function xA(){if(bb)return _0;bb=1;const t=new Uint8Array(512),a=new Uint8Array(256);return function(){let n=1;for(let l=0;l<255;l++)t[l]=n,a[n]=l,n<<=1,n&256&&(n^=285);for(let l=255;l<512;l++)t[l]=t[l-255]}(),_0.log=function(n){if(n<1)throw new Error("log("+n+")");return a[n]},_0.exp=function(n){return t[n]},_0.mul=function(n,l){return n===0||l===0?0:t[a[n]+a[l]]},_0}var vb;function hA(){return vb||(vb=1,function(t){const a=xA();t.mul=function(n,l){const d=new Uint8Array(n.length+l.length-1);for(let f=0;f<n.length;f++)for(let h=0;h<l.length;h++)d[f+h]^=a.mul(n[f],l[h]);return d},t.mod=function(n,l){let d=new Uint8Array(n);for(;d.length-l.length>=0;){const f=d[0];for(let b=0;b<l.length;b++)d[b]^=a.mul(l[b],f);let h=0;for(;h<d.length&&d[h]===0;)h++;d=d.slice(h)}return d},t.generateECPolynomial=function(n){let l=new Uint8Array([1]);for(let d=0;d<n;d++)l=t.mul(l,new Uint8Array([1,a.exp(d)]));return l}}(Xh)),Xh}var qh,wb;function mA(){if(wb)return qh;wb=1;const t=hA();function a(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(n){this.degree=n,this.genPoly=t.generateECPolynomial(this.degree)},a.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(n.length+this.degree);l.set(n);const d=t.mod(l,this.genPoly),f=this.degree-d.length;if(f>0){const h=new Uint8Array(this.degree);return h.set(d,f),h}return d},qh=a,qh}var $h={},Wh={},Kh={},Nb;function pw(){return Nb||(Nb=1,Kh.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),Kh}var ri={},kb;function yw(){if(kb)return ri;kb=1;const t="[0-9]+",a="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;ri.KANJI=new RegExp(r,"g"),ri.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ri.BYTE=new RegExp(n,"g"),ri.NUMERIC=new RegExp(t,"g"),ri.ALPHANUMERIC=new RegExp(a,"g");const l=new RegExp("^"+r+"$"),d=new RegExp("^"+t+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ri.testKanji=function(b){return l.test(b)},ri.testNumeric=function(b){return d.test(b)},ri.testAlphanumeric=function(b){return f.test(b)},ri}var jb;function Eo(){return jb||(jb=1,function(t){const a=pw(),r=yw();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(d,f){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!a.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?d.ccBits[0]:f<27?d.ccBits[1]:d.ccBits[2]},t.getBestModeForData=function(d){return r.testNumeric(d)?t.NUMERIC:r.testAlphanumeric(d)?t.ALPHANUMERIC:r.testKanji(d)?t.KANJI:t.BYTE},t.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},t.isValid=function(d){return d&&d.bit&&d.ccBits};function n(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(d,f){if(t.isValid(d))return d;try{return n(d)}catch{return f}}}(Wh)),Wh}var Eb;function gA(){return Eb||(Eb=1,function(t){const a=jo(),r=gw(),n=ng(),l=Eo(),d=pw(),f=7973,h=a.getBCHDigit(f);function b(E,S,D){for(let A=1;A<=40;A++)if(S<=t.getCapacity(A,D,E))return A}function g(E,S){return l.getCharCountIndicator(E,S)+4}function w(E,S){let D=0;return E.forEach(function(A){const M=g(A.mode,S);D+=M+A.getBitsLength()}),D}function k(E,S){for(let D=1;D<=40;D++)if(w(E,D)<=t.getCapacity(D,S,l.MIXED))return D}t.from=function(S,D){return d.isValid(S)?parseInt(S,10):D},t.getCapacity=function(S,D,A){if(!d.isValid(S))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=l.BYTE);const M=a.getSymbolTotalCodewords(S),I=r.getTotalCodewordsCount(S,D),F=(M-I)*8;if(A===l.MIXED)return F;const T=F-g(A,S);switch(A){case l.NUMERIC:return Math.floor(T/10*3);case l.ALPHANUMERIC:return Math.floor(T/11*2);case l.KANJI:return Math.floor(T/13);case l.BYTE:default:return Math.floor(T/8)}},t.getBestVersionForData=function(S,D){let A;const M=n.from(D,n.M);if(Array.isArray(S)){if(S.length>1)return k(S,M);if(S.length===0)return 1;A=S[0]}else A=S;return b(A.mode,A.getLength(),M)},t.getEncodedBits=function(S){if(!d.isValid(S)||S<7)throw new Error("Invalid QR Code version");let D=S<<12;for(;a.getBCHDigit(D)-h>=0;)D^=f<<a.getBCHDigit(D)-h;return S<<12|D}}($h)),$h}var Zh={},Cb;function pA(){if(Cb)return Zh;Cb=1;const t=jo(),a=1335,r=21522,n=t.getBCHDigit(a);return Zh.getEncodedBits=function(d,f){const h=d.bit<<3|f;let b=h<<10;for(;t.getBCHDigit(b)-n>=0;)b^=a<<t.getBCHDigit(b)-n;return(h<<10|b)^r},Zh}var Qh={},Jh,Sb;function yA(){if(Sb)return Jh;Sb=1;const t=Eo();function a(r){this.mode=t.NUMERIC,this.data=r.toString()}return a.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(n){let l,d,f;for(l=0;l+3<=this.data.length;l+=3)d=this.data.substr(l,3),f=parseInt(d,10),n.put(f,10);const h=this.data.length-l;h>0&&(d=this.data.substr(l),f=parseInt(d,10),n.put(f,h*3+1))},Jh=a,Jh}var em,Ab;function bA(){if(Ab)return em;Ab=1;const t=Eo(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=t.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){let d;for(d=0;d+2<=this.data.length;d+=2){let f=a.indexOf(this.data[d])*45;f+=a.indexOf(this.data[d+1]),l.put(f,11)}this.data.length%2&&l.put(a.indexOf(this.data[d]),6)},em=r,em}var tm,_b;function vA(){if(_b)return tm;_b=1;const t=Eo();function a(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return a.getBitsLength=function(n){return n*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){for(let n=0,l=this.data.length;n<l;n++)r.put(this.data[n],8)},tm=a,tm}var rm,Tb;function wA(){if(Tb)return rm;Tb=1;const t=Eo(),a=jo();function r(n){this.mode=t.KANJI,this.data=n}return r.getBitsLength=function(l){return l*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let l;for(l=0;l<this.data.length;l++){let d=a.toSJIS(this.data[l]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);d=(d>>>8&255)*192+(d&255),n.put(d,13)}},rm=r,rm}var am={exports:{}},Db;function NA(){return Db||(Db=1,function(t){var a={single_source_shortest_paths:function(r,n,l){var d={},f={};f[n]=0;var h=a.PriorityQueue.make();h.push(n,0);for(var b,g,w,k,E,S,D,A,M;!h.empty();){b=h.pop(),g=b.value,k=b.cost,E=r[g]||{};for(w in E)E.hasOwnProperty(w)&&(S=E[w],D=k+S,A=f[w],M=typeof f[w]>"u",(M||A>D)&&(f[w]=D,h.push(w,D),d[w]=g))}if(typeof l<"u"&&typeof f[l]>"u"){var I=["Could not find a path from ",n," to ",l,"."].join("");throw new Error(I)}return d},extract_shortest_path_from_predecessor_list:function(r,n){for(var l=[],d=n;d;)l.push(d),r[d],d=r[d];return l.reverse(),l},find_path:function(r,n,l){var d=a.single_source_shortest_paths(r,n,l);return a.extract_shortest_path_from_predecessor_list(d,l)},PriorityQueue:{make:function(r){var n=a.PriorityQueue,l={},d;r=r||{};for(d in n)n.hasOwnProperty(d)&&(l[d]=n[d]);return l.queue=[],l.sorter=r.sorter||n.default_sorter,l},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var l={value:r,cost:n};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=a}(am)),am.exports}var Rb;function kA(){return Rb||(Rb=1,function(t){const a=Eo(),r=yA(),n=bA(),l=vA(),d=wA(),f=yw(),h=jo(),b=NA();function g(I){return unescape(encodeURIComponent(I)).length}function w(I,F,T){const L=[];let H;for(;(H=I.exec(T))!==null;)L.push({data:H[0],index:H.index,mode:F,length:H[0].length});return L}function k(I){const F=w(f.NUMERIC,a.NUMERIC,I),T=w(f.ALPHANUMERIC,a.ALPHANUMERIC,I);let L,H;return h.isKanjiModeEnabled()?(L=w(f.BYTE,a.BYTE,I),H=w(f.KANJI,a.KANJI,I)):(L=w(f.BYTE_KANJI,a.BYTE,I),H=[]),F.concat(T,L,H).sort(function(B,P){return B.index-P.index}).map(function(B){return{data:B.data,mode:B.mode,length:B.length}})}function E(I,F){switch(F){case a.NUMERIC:return r.getBitsLength(I);case a.ALPHANUMERIC:return n.getBitsLength(I);case a.KANJI:return d.getBitsLength(I);case a.BYTE:return l.getBitsLength(I)}}function S(I){return I.reduce(function(F,T){const L=F.length-1>=0?F[F.length-1]:null;return L&&L.mode===T.mode?(F[F.length-1].data+=T.data,F):(F.push(T),F)},[])}function D(I){const F=[];for(let T=0;T<I.length;T++){const L=I[T];switch(L.mode){case a.NUMERIC:F.push([L,{data:L.data,mode:a.ALPHANUMERIC,length:L.length},{data:L.data,mode:a.BYTE,length:L.length}]);break;case a.ALPHANUMERIC:F.push([L,{data:L.data,mode:a.BYTE,length:L.length}]);break;case a.KANJI:F.push([L,{data:L.data,mode:a.BYTE,length:g(L.data)}]);break;case a.BYTE:F.push([{data:L.data,mode:a.BYTE,length:g(L.data)}])}}return F}function A(I,F){const T={},L={start:{}};let H=["start"];for(let U=0;U<I.length;U++){const B=I[U],P=[];for(let z=0;z<B.length;z++){const Z=B[z],te=""+U+z;P.push(te),T[te]={node:Z,lastCount:0},L[te]={};for(let G=0;G<H.length;G++){const se=H[G];T[se]&&T[se].node.mode===Z.mode?(L[se][te]=E(T[se].lastCount+Z.length,Z.mode)-E(T[se].lastCount,Z.mode),T[se].lastCount+=Z.length):(T[se]&&(T[se].lastCount=Z.length),L[se][te]=E(Z.length,Z.mode)+4+a.getCharCountIndicator(Z.mode,F))}}H=P}for(let U=0;U<H.length;U++)L[H[U]].end=0;return{map:L,table:T}}function M(I,F){let T;const L=a.getBestModeForData(I);if(T=a.from(F,L),T!==a.BYTE&&T.bit<L.bit)throw new Error('"'+I+'" cannot be encoded with mode '+a.toString(T)+`.
 Suggested mode is: `+a.toString(L));switch(T===a.KANJI&&!h.isKanjiModeEnabled()&&(T=a.BYTE),T){case a.NUMERIC:return new r(I);case a.ALPHANUMERIC:return new n(I);case a.KANJI:return new d(I);case a.BYTE:return new l(I)}}t.fromArray=function(F){return F.reduce(function(T,L){return typeof L=="string"?T.push(M(L,null)):L.data&&T.push(M(L.data,L.mode)),T},[])},t.fromString=function(F,T){const L=k(F,h.isKanjiModeEnabled()),H=D(L),U=A(H,T),B=b.find_path(U.map,"start","end"),P=[];for(let z=1;z<B.length-1;z++)P.push(U.table[B[z]].node);return t.fromArray(S(P))},t.rawSplit=function(F){return t.fromArray(k(F,h.isKanjiModeEnabled()))}}(Qh)),Qh}var Mb;function jA(){if(Mb)return Ph;Mb=1;const t=jo(),a=ng(),r=oA(),n=cA(),l=dA(),d=uA(),f=fA(),h=gw(),b=mA(),g=gA(),w=pA(),k=Eo(),E=kA();function S(U,B){const P=U.size,z=d.getPositions(B);for(let Z=0;Z<z.length;Z++){const te=z[Z][0],G=z[Z][1];for(let se=-1;se<=7;se++)if(!(te+se<=-1||P<=te+se))for(let ie=-1;ie<=7;ie++)G+ie<=-1||P<=G+ie||(se>=0&&se<=6&&(ie===0||ie===6)||ie>=0&&ie<=6&&(se===0||se===6)||se>=2&&se<=4&&ie>=2&&ie<=4?U.set(te+se,G+ie,!0,!0):U.set(te+se,G+ie,!1,!0))}}function D(U){const B=U.size;for(let P=8;P<B-8;P++){const z=P%2===0;U.set(P,6,z,!0),U.set(6,P,z,!0)}}function A(U,B){const P=l.getPositions(B);for(let z=0;z<P.length;z++){const Z=P[z][0],te=P[z][1];for(let G=-2;G<=2;G++)for(let se=-2;se<=2;se++)G===-2||G===2||se===-2||se===2||G===0&&se===0?U.set(Z+G,te+se,!0,!0):U.set(Z+G,te+se,!1,!0)}}function M(U,B){const P=U.size,z=g.getEncodedBits(B);let Z,te,G;for(let se=0;se<18;se++)Z=Math.floor(se/3),te=se%3+P-8-3,G=(z>>se&1)===1,U.set(Z,te,G,!0),U.set(te,Z,G,!0)}function I(U,B,P){const z=U.size,Z=w.getEncodedBits(B,P);let te,G;for(te=0;te<15;te++)G=(Z>>te&1)===1,te<6?U.set(te,8,G,!0):te<8?U.set(te+1,8,G,!0):U.set(z-15+te,8,G,!0),te<8?U.set(8,z-te-1,G,!0):te<9?U.set(8,15-te-1+1,G,!0):U.set(8,15-te-1,G,!0);U.set(z-8,8,1,!0)}function F(U,B){const P=U.size;let z=-1,Z=P-1,te=7,G=0;for(let se=P-1;se>0;se-=2)for(se===6&&se--;;){for(let ie=0;ie<2;ie++)if(!U.isReserved(Z,se-ie)){let Y=!1;G<B.length&&(Y=(B[G]>>>te&1)===1),U.set(Z,se-ie,Y),te--,te===-1&&(G++,te=7)}if(Z+=z,Z<0||P<=Z){Z-=z,z=-z;break}}}function T(U,B,P){const z=new r;P.forEach(function(ie){z.put(ie.mode.bit,4),z.put(ie.getLength(),k.getCharCountIndicator(ie.mode,U)),ie.write(z)});const Z=t.getSymbolTotalCodewords(U),te=h.getTotalCodewordsCount(U,B),G=(Z-te)*8;for(z.getLengthInBits()+4<=G&&z.put(0,4);z.getLengthInBits()%8!==0;)z.putBit(0);const se=(G-z.getLengthInBits())/8;for(let ie=0;ie<se;ie++)z.put(ie%2?17:236,8);return L(z,U,B)}function L(U,B,P){const z=t.getSymbolTotalCodewords(B),Z=h.getTotalCodewordsCount(B,P),te=z-Z,G=h.getBlocksCount(B,P),se=z%G,ie=G-se,Y=Math.floor(z/G),q=Math.floor(te/G),ce=q+1,pe=Y-q,me=new b(pe);let le=0;const X=new Array(G),W=new Array(G);let K=0;const ae=new Uint8Array(U.buffer);for(let Pe=0;Pe<G;Pe++){const Oe=Pe<ie?q:ce;X[Pe]=ae.slice(le,le+Oe),W[Pe]=me.encode(X[Pe]),le+=Oe,K=Math.max(K,Oe)}const oe=new Uint8Array(z);let re=0,Re,ke;for(Re=0;Re<K;Re++)for(ke=0;ke<G;ke++)Re<X[ke].length&&(oe[re++]=X[ke][Re]);for(Re=0;Re<pe;Re++)for(ke=0;ke<G;ke++)oe[re++]=W[ke][Re];return oe}function H(U,B,P,z){let Z;if(Array.isArray(U))Z=E.fromArray(U);else if(typeof U=="string"){let Y=B;if(!Y){const q=E.rawSplit(U);Y=g.getBestVersionForData(q,P)}Z=E.fromString(U,Y||40)}else throw new Error("Invalid data");const te=g.getBestVersionForData(Z,P);if(!te)throw new Error("The amount of data is too big to be stored in a QR Code");if(!B)B=te;else if(B<te)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+te+`.
`);const G=T(B,P,Z),se=t.getSymbolSize(B),ie=new n(se);return S(ie,B),D(ie),A(ie,B),I(ie,P,0),B>=7&&M(ie,B),F(ie,G),isNaN(z)&&(z=f.getBestMask(ie,I.bind(null,ie,P))),f.applyMask(z,ie),I(ie,P,z),{modules:ie,version:B,errorCorrectionLevel:P,maskPattern:z,segments:Z}}return Ph.create=function(B,P){if(typeof B>"u"||B==="")throw new Error("No input text");let z=a.M,Z,te;return typeof P<"u"&&(z=a.from(P.errorCorrectionLevel,a.M),Z=g.from(P.version),te=f.from(P.maskPattern),P.toSJISFunc&&t.setToSJISFunction(P.toSJISFunc)),H(B,Z,z,te)},Ph}var sm={},nm={},Ib;function bw(){return Ib||(Ib=1,function(t){function a(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(d){return[d,d]}))),n.length===6&&n.push("F","F");const l=parseInt(n.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+n.slice(0,6).join("")}}t.getOptions=function(n){n||(n={}),n.color||(n.color={});const l=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,d=n.width&&n.width>=21?n.width:void 0,f=n.scale||4;return{width:d,scale:d?4:f,margin:l,color:{dark:a(n.color.dark||"#000000ff"),light:a(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},t.getScale=function(n,l){return l.width&&l.width>=n+l.margin*2?l.width/(n+l.margin*2):l.scale},t.getImageWidth=function(n,l){const d=t.getScale(n,l);return Math.floor((n+l.margin*2)*d)},t.qrToImageData=function(n,l,d){const f=l.modules.size,h=l.modules.data,b=t.getScale(f,d),g=Math.floor((f+d.margin*2)*b),w=d.margin*b,k=[d.color.light,d.color.dark];for(let E=0;E<g;E++)for(let S=0;S<g;S++){let D=(E*g+S)*4,A=d.color.light;if(E>=w&&S>=w&&E<g-w&&S<g-w){const M=Math.floor((E-w)/b),I=Math.floor((S-w)/b);A=k[h[M*f+I]?1:0]}n[D++]=A.r,n[D++]=A.g,n[D++]=A.b,n[D]=A.a}}}(nm)),nm}var Ob;function EA(){return Ob||(Ob=1,function(t){const a=bw();function r(l,d,f){l.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=f,d.width=f,d.style.height=f+"px",d.style.width=f+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(d,f,h){let b=h,g=f;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),f||(g=n()),b=a.getOptions(b);const w=a.getImageWidth(d.modules.size,b),k=g.getContext("2d"),E=k.createImageData(w,w);return a.qrToImageData(E.data,d,b),r(k,g,w),k.putImageData(E,0,0),g},t.renderToDataURL=function(d,f,h){let b=h;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),b||(b={});const g=t.render(d,f,b),w=b.type||"image/png",k=b.rendererOpts||{};return g.toDataURL(w,k.quality)}}(sm)),sm}var im={},Fb;function CA(){if(Fb)return im;Fb=1;const t=bw();function a(l,d){const f=l.a/255,h=d+'="'+l.hex+'"';return f<1?h+" "+d+'-opacity="'+f.toFixed(2).slice(1)+'"':h}function r(l,d,f){let h=l+d;return typeof f<"u"&&(h+=" "+f),h}function n(l,d,f){let h="",b=0,g=!1,w=0;for(let k=0;k<l.length;k++){const E=Math.floor(k%d),S=Math.floor(k/d);!E&&!g&&(g=!0),l[k]?(w++,k>0&&E>0&&l[k-1]||(h+=g?r("M",E+f,.5+S+f):r("m",b,0),b=0,g=!1),E+1<d&&l[k+1]||(h+=r("h",w),w=0)):b++}return h}return im.render=function(d,f,h){const b=t.getOptions(f),g=d.modules.size,w=d.modules.data,k=g+b.margin*2,E=b.color.light.a?"<path "+a(b.color.light,"fill")+' d="M0 0h'+k+"v"+k+'H0z"/>':"",S="<path "+a(b.color.dark,"stroke")+' d="'+n(w,g,b.margin)+'"/>',D='viewBox="0 0 '+k+" "+k+'"',M='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+D+' shape-rendering="crispEdges">'+E+S+`</svg>
`;return typeof h=="function"&&h(null,M),M},im}var Lb;function SA(){if(Lb)return mc;Lb=1;const t=lA(),a=jA(),r=EA(),n=CA();function l(d,f,h,b,g){const w=[].slice.call(arguments,1),k=w.length,E=typeof w[k-1]=="function";if(!E&&!t())throw new Error("Callback required as last argument");if(E){if(k<2)throw new Error("Too few arguments provided");k===2?(g=h,h=f,f=b=void 0):k===3&&(f.getContext&&typeof g>"u"?(g=b,b=void 0):(g=b,b=h,h=f,f=void 0))}else{if(k<1)throw new Error("Too few arguments provided");return k===1?(h=f,f=b=void 0):k===2&&!f.getContext&&(b=h,h=f,f=void 0),new Promise(function(S,D){try{const A=a.create(h,b);S(d(A,f,b))}catch(A){D(A)}})}try{const S=a.create(h,b);g(null,d(S,f,b))}catch(S){g(S)}}return mc.create=a.create,mc.toCanvas=l.bind(null,r.render),mc.toDataURL=l.bind(null,r.renderToDataURL),mc.toString=l.bind(null,function(d,f,h){return n.render(d,h)}),mc}var AA=SA();const _A=ff(AA);function TA({houses:t,apartment:a,floor:r,onClose:n}){const[l,d]=C.useState(!1),[f,h]=C.useState(!1),[b,g]=C.useState({}),[w,k]=C.useState(!1),E=I=>`${I.id}`,S=I=>I.split("|")[0];C.useEffect(()=>{(async()=>{if(t.length){d(!0);try{const F={};for(const T of t){const L=E(T);try{F[T.id]=await _A.toDataURL(L,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(H){console.error("QR Generation Error:",H),F[T.id]="",ne.error(`Failed to generate QR for house ${T.house_id}`)}}g(F)}catch(F){console.error("Error generating QR codes",F),ne.error("Failed to generate QR codes")}d(!1)}})()},[t,a,r]);const D=async()=>{h(!0);try{const{jsPDF:I}=await mw(async()=>{const{jsPDF:se}=await import("./jspdf.es.min-CXmwJWck.js").then(ie=>ie.j);return{jsPDF:se}},[]),F=new I("p","mm","a4"),T=12,L=F.internal.pageSize.getWidth(),H=F.internal.pageSize.getHeight();let U=2,B=85,P=70,z=40;t.length===1?(U=1,B=L-T*2,P=H-T*2-30,z=Math.min(B,P)*.5):t.length===2?(U=2,B=(L-T*3)/2,P=Math.max(90,(H-T*3)/2),z=Math.min(80,B*.6)):(U=2,B=85,P=70,z=40);let Z=T,te=0;for(let se=0;se<t.length;se++){const ie=t[se],Y=se%U;let q=T+Y*(B+T);t.length===1&&(q=(L-B)/2),Z+P>H-T&&(F.addPage(),Z=T,te=0),F.setDrawColor(200,200,200),F.rect(q,Z,B,P),F.setFontSize(t.length===1?18:12),F.setFont(void 0,"bold"),F.text(a.name,q+B/2,Z+(t.length===1?12:5),{align:"center"}),F.setFontSize(t.length===1?10:7),F.setTextColor(100,100,100),F.text(`Floor: ${r.floor_id}`,q+B/2,Z+(t.length===1?18:9),{align:"center"}),F.setFontSize(t.length===1?24:12),F.setFont(void 0,"bold"),F.setTextColor(0,0,0),F.text(`${ie.house_id}`,q+B/2,Z+(t.length===1?30:15),{align:"center"}),w&&(F.setFontSize(t.length===1?10:7),F.setFont(void 0,"bold"),F.setTextColor(0,0,0),F.text(`${ie.id}`,q+B/2,Z+(t.length===1?36:18),{align:"center"})),b[ie.id]&&F.addImage(b[ie.id],"PNG",q+(B-z)/2,Z+(t.length===1?(P-z)/2:20),z,z),te++,te===U&&(Z+=P+T,te=0),se===t.length-1&&te>0&&(Z+=P+T)}const G=`QR_Codes_${a.name.replace(/\s+/g,"_")}_Floor_${r.floor_id}.pdf`;F.save(G),ne.success("PDF Generated Successfully!")}catch(I){console.error("PDF Generation Error:",I),ne.error("Failed to generate PDF")}h(!1)},A=({house:I})=>{const F=b[I.id];return E(I),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",I.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[a.name,"  Floor ",r.floor_id]}),F?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:F,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${I.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:I.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(Gt,{size:24,className:"animate-spin text-gray-400"})})]})})},M=I=>{const F=b[I];if(F){const T=t.find(U=>U.id===I);if(!T)return;const L=E(T);S(L),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${T.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${F}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(Kv,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.name,"  Floor ",r.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(po,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:n,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",t.length," house",t.length!==1?"s":""]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(I=>e.jsxs("div",{className:"relative",children:[e.jsx(A,{house:I}),e.jsx("button",{onClick:()=>M(I.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},I.id))})]})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:I=>k(I.target.checked),className:"h-4 w-4 rounded border-gray-300 text-purple-600"}),e.jsx("span",{children:"Include House No in PDF"}),e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Only check to print internal DB id)"})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(b).length," QR code",Object.keys(b).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:l||f||!Object.keys(b).length,onClick:D,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(X0,{size:16}),"Download PDF"]})})]})]})})]})})}function DA(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),{apartment_id:f,floor_id:h}=gn(),[b,g]=C.useState(null),[w,k]=C.useState(null),[E,S]=C.useState([]),[D,A]=C.useState([]),[M,I]=C.useState(null),F=hr(),[T,L]=C.useState(!1),[H,U]=C.useState(!1),[B,P]=C.useState(!1),[z,Z]=C.useState(!1),[te,G]=C.useState(!1),[se,ie]=C.useState(null),[Y,q]=C.useState(!1),[ce,pe]=C.useState(null),[me,le]=C.useState("houses"),[X,W]=C.useState(null),[K,ae]=C.useState(!1),[oe,re]=C.useState(null),[Re,ke]=C.useState([]),[Pe,Oe]=C.useState(!1),[nt,we]=C.useState(!1);C.useEffect(()=>{const st=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",st),()=>window.removeEventListener("resize",st)},[]),C.useEffect(()=>{f&&(async()=>{try{const kt=await Te.get(`/apartments/${f}`);kt.data.success&&g(kt.data.data)}catch(kt){console.error("Error fetching apartment:",kt)}})()},[f]),C.useEffect(()=>{h&&(async()=>{try{const kt=await Te.get(`/floors/${h}`);kt.data.success&&k(kt.data.data)}catch(kt){console.error("Error fetching floors:",kt)}})()},[h]);const Ae=async()=>{try{U(!0),I(null);const st=await Te.get(`/housetype?apartment_id=${f}`);st.data.success&&Array.isArray(st.data.data)?A(st.data.data):A([])}catch(st){console.error("Error loading houses:",st),I("Failed to load houses. Please try again.")}finally{U(!1)}};C.useEffect(()=>{Ae()},[f]);const Le=()=>{F(`/floors/${b.id}`)},Ee=async st=>{try{L(!0),I(null);const kt=await Te.get(`/houses?apartment_id=${f}&floor_id=${st}`);kt.data.success&&Array.isArray(kt.data.data)?(S(kt.data.data),ke([]),Oe(!1)):S([])}catch(kt){console.error("Error loading houses:",kt),I("Failed to load houses. Please try again.")}finally{L(!1)}};C.useEffect(()=>{h&&f&&Ee(h)},[h,f]);const Je=st=>{F(`/viewhouse/${f}/${h}/${st.id}`)},be=()=>{P(!0)},Be=()=>{P(!1)},fe=()=>{Ee(h),P(!1),ne.success("House created successfully!")},at=st=>{W(st),Z(!0)},Ce=()=>{Z(!1),W(null)},wt=()=>{Ee(h),ne.success("House updated successfully!")},ut=st=>{ie(st),G(!0)},Ct=()=>{G(!1),ie(null)},Mt=async st=>{try{const kt=await Te.patch(`/houses/${st.id}/toggle`);ne.success(kt.data.message),Ee(h)}catch(kt){console.error("Error toggling house:",kt),ne.error("Failed to toggle house status")}},qt=st=>{pe(st),q(!0)},ur=async()=>{try{if(!ce)return;await Te.delete(`/houses/${ce.id}`),ne.success("House deleted successfully"),q(!1),pe(null),Ee(h)}catch(st){console.error("Delete house error:",st),ne.error("Failed to delete house")}},Ut=()=>{q(!1),pe(null)},Yt=st=>{re(st),ae(!0)},It=()=>{ae(!1),re(null)},$e=()=>{ne.success("House documents uploaded successfully!")},jt=st=>{ke(kt=>kt.includes(st)?kt.filter(Os=>Os!==st):[...kt,st])},Nt=()=>{if(Pe)ke([]);else{const st=E.map(kt=>kt.id);ke(st)}Oe(!Pe)};C.useEffect(()=>{E.length>0&&Re.length===E.length?Oe(!0):Oe(!1)},[Re,E]),Re.length;const lt=()=>{if(Re.length===0){ne.error("Please select at least one house to generate QR codes");return}E.filter(st=>Re.includes(st.id)),we(!0)},At=st=>{try{return new Date(st).toLocaleDateString()}catch{return"N/A"}},vt=()=>e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vt,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>n(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>n(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Le,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(Mn,{size:l?20:25})}),e.jsx(Pr,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Houses"}),b&&w&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:[e.jsx("span",{className:"font-medium",children:b.name}),"  Floor ",w.floor_id]})]})]}),l&&Re.length>0&&e.jsxs("button",{onClick:lt,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700",children:[e.jsx(X0,{size:16}),e.jsxs("span",{className:"text-xs",children:["QR (",Re.length,")"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 md:mb-6",children:[e.jsx("button",{onClick:()=>le("houses"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${me==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>le("houseTypes"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${me==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),me==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:[e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"gap-3 mb-4"}`,children:[e.jsxs("button",{onClick:be,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base ${l?"w-full":""}`,children:[e.jsx(La,{size:l?16:20}),e.jsx("span",{children:"New House"})]}),!l&&e.jsxs("button",{onClick:lt,disabled:Re.length===0,className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(X0,{size:l?16:20}),e.jsxs("span",{children:["Generate QR Code (",Re.length,")"]})]})]}),Re.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[Re.length," house",Re.length!==1?"s":""," selected"]}),l?e.jsx("button",{onClick:lt,className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Generate QR"}):null]})}),T?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading Houses..."})]}):M?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:M}),e.jsx("button",{onClick:()=>Ee(h),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):E.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No houses found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding houses"}),e.jsx("button",{onClick:be,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First House"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Houses: ",E.length]}),e.jsx("button",{onClick:Nt,className:"text-xs text-purple-600 dark:text-purple-400",children:Pe?"Deselect All":"Select All"})]})}),E.map(st=>e.jsxs("div",{onClick:()=>st.is_active&&Je(st),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${st.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:Re.includes(st.id),onChange:kt=>{kt.stopPropagation(),jt(st.id)},onClick:kt=>kt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["House ",st.house_id]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${st.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:st.status})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:D.find(kt=>kt.id===st.housetype_id)?.name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Yt(st)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(xr,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),at(st)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ga,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ut(st)},className:`p-1.5 rounded-lg ${st.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:st.is_active?"Deactivate":"Activate",children:st.is_active?e.jsx(bo,{size:14}):e.jsx(yo,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),qt(st)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex justify-between mt-2",children:[e.jsxs("span",{children:["Created: ",At(st.created_at)]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${st.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:st.is_active?"Active":"Inactive"})]})]},st.id))]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Pe,onChange:Nt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:E.map(st=>e.jsxs("tr",{onClick:()=>st.is_active&&Je(st),className:`transition-colors cursor-pointer ${st.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:Re.includes(st.id),onChange:kt=>{kt.stopPropagation(),jt(st.id)},onClick:kt=>kt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:st.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:D.find(kt=>kt.id===st.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:st.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:At(st.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Yt(st)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(xr,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),at(st)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ut(st)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:st.is_active?"Deactivate":"Activate",children:st.is_active?e.jsx(bo,{size:25}):e.jsx(yo,{size:25})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),qt(st)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},st.id))})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",E.length," house",E.length!==1?"s":""]})})]})})]}):e.jsx(uw,{})]})})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx("button",{onClick:Be,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(JS,{onClose:Be,onCreated:fe,apartment_id:f,floor_id:h})]})})}),z&&X&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit House"}),e.jsx("button",{onClick:Ce,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(tA,{onClose:Ce,onUpdated:wt,house:X,apartment_id:f,floor_id:h})]})})}),te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:se?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:se?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Ct,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{se&&(Mt(se),G(!1),ie(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${se?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:se?.is_active?"Deactivate":"Activate"})]})]})}),Y&&ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',ce.house_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Ut,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:ur,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),K&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(sA,{house:oe,apartment:b,floor:w,onClose:It,onUploadSuccess:$e})})})}),nt&&b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(TA,{houses:E.filter(st=>Re.includes(st.id)),apartment:b,floor:w,onClose:()=>we(!1)})})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function RA(){const[t,a]=C.useState(""),[r,n]=C.useState(!1),l=hr(),d=async h=>{if(h.preventDefault(),!t){ne.error("Please enter your email address");return}n(!0);try{await Te.post("/auth/forgot-password-unified",{email:t}),ne.success(" Password reset link sent! Check your inbox."),a("")}catch(b){const g=b.response?.data?.message||"Something went wrong";ne.error(g)}finally{n(!1)}},f=()=>{l("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-3 mt-5",children:[e.jsx("button",{onClick:f,className:"flex items-center gap-2 text-white hover:text-gray-300 transition-colors",title:"Back to Login",children:e.jsx(kc,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-10 h-10"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"font-bold text-xl text-center mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm text-center",children:"Enter your email address and we'll send you a password reset link."}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email address",className:"loginInput w-full",value:t,onChange:h=>a(h.target.value),required:!0,autoComplete:"email",disabled:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll check if you're an admin, employee, or house owner automatically."})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full flex items-center justify-center py-3",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):"Send Password Reset Link"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:f,className:"text-purple-700 dark:text-purple-400 hover:underline text-center font-medium py-2",children:" Back to Login"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center",children:"Don't have an account? Contact your apartment administrator."})]})})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function MA(){const[t,a]=C.useState(""),[r,n]=C.useState(""),[l,d]=C.useState(!1),[f,h]=C.useState(!1),[b,g]=C.useState(!1),[w]=ld(),k=hr(),[E,S]=C.useState(null),[D,A]=C.useState(null),[M,I]=C.useState(null),[F,T]=C.useState(!0),[L,H]=C.useState(!0),[U,B]=C.useState(""),[P,z]=C.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1,match:!1});C.useEffect(()=>{const Y=w.get("token"),q=w.get("id"),ce=w.get("user_type");if(!Y||!q){T(!1),H(!1),ne.error("Invalid or missing reset link parameters");return}S(Y),A(q),I(ce||"user"),(async()=>{try{const me=await Te.post("/auth/check-reset-token",{token:Y,id:q});me.data.success?(I(me.data.user_type),B(me.data.email||""),T(!0)):(T(!1),ne.error(me.data.message||"Invalid reset token"))}catch(me){console.error("Error verifying token:",me),T(!1),ne.error("Unable to verify reset token")}finally{H(!1)}})()},[w]),C.useEffect(()=>{if(t){const Y=/[A-Z]/.test(t),q=/[a-z]/.test(t),ce=/\d/.test(t),pe=/[!@#$%^&*(),.?":{}|<>]/.test(t),me=t.length>=6;z(le=>({...le,length:me,uppercase:Y,lowercase:q,number:ce,special:pe}))}},[t]),C.useEffect(()=>{z(Y=>({...Y,match:t===r&&r.length>0}))},[t,r]);const Z=()=>{k("/login")},G=(()=>{if(!t)return{strength:0,label:"Very Weak",color:"bg-red-500"};let Y=0;t.length>=8&&Y++,/(?=.*[a-z])/.test(t)&&Y++,/(?=.*[A-Z])/.test(t)&&Y++,/(?=.*\d)/.test(t)&&Y++,/(?=.*[@$!%*?&])/.test(t)&&Y++;const q=["Very Weak","Weak","Fair","Good","Strong","Very Strong"],ce=["bg-red-500","bg-red-400","bg-yellow-500","bg-green-400","bg-green-500","bg-green-600"];return{strength:Y,label:q[Y]||"Very Weak",color:ce[Y]||"bg-red-500"}})(),se=({isValid:Y,text:q})=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[Y?e.jsx($a,{size:12,className:"text-green-500 flex-shrink-0"}):e.jsx(_m,{size:12,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:`truncate ${Y?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:q})]}),ie=async Y=>{if(Y.preventDefault(),!Object.values(P).every(ce=>ce===!0)){ne.error("Please meet all password requirements");return}if(!M){ne.error("Unable to determine account type. Please request a new reset link.");return}g(!0);try{await Te.post("/auth/reset-password-unified",{token:E,id:D,password:t,user_type:M}),ne.success(" Password reset successful! Redirecting to login..."),setTimeout(()=>k("/login"),2e3)}catch(ce){const pe=ce.response?.data?.message||"Reset failed. The link may have expired.";ce.response?.status===400?pe.includes("expired")?ne.error("Reset link has expired. Please request a new one."):pe.includes("Invalid")||pe.includes("invalid")?ne.error("Invalid reset link. Please request a new one."):pe.includes("already used")?ne.error("This reset link has already been used. Please request a new one."):ne.error(pe):ce.response?.status===404?ne.error("Account not found. The link may be invalid."):ne.error(pe)}finally{g(!1)}};return L?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Please wait while we verify your reset link..."})]})})})}):F?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(kc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/apartment.png",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AptSync"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-5 sm:p-8",children:[M&&e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm ${M==="houseowner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:[e.jsx(ib,{size:14,className:"flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:M==="houseowner"?"House Owner Account":"Admin/Employee Account"}),U&&e.jsxs("span",{className:"hidden sm:inline text-xs opacity-75 ml-1 truncate",children:["(",U,")"]})]})}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Create a strong password for your account"})]}),e.jsxs("form",{onSubmit:ie,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:t,onChange:Y=>a(Y.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),t&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strength:"}),e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${G.strength<2?"text-red-500":G.strength<4?"text-yellow-500":"text-green-500"}`,children:G.label})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-1.5 sm:h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${G.color}`,style:{width:`${G.strength/5*100}%`}})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3 text-sm",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2",children:[e.jsx(se,{isValid:P.length,text:"Min 6 characters"}),e.jsx(se,{isValid:P.uppercase,text:"Uppercase letter"}),e.jsx(se,{isValid:P.lowercase,text:"Lowercase letter"}),e.jsx(se,{isValid:P.number,text:"Number"}),e.jsx(se,{isValid:P.special,text:"Special character"}),e.jsx(se,{isValid:P.match,text:"Passwords match"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:r,onChange:Y=>n(Y.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":f?"Hide password":"Show password",children:f?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-3.5 sm:py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm sm:text-base transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:b||!Object.values(P).every(Y=>Y===!0),children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ib,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:Z,className:"text-purple-600 dark:text-purple-400 hover:underline text-center text-sm py-2",children:" Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Having trouble?"," ",e.jsx("button",{type:"button",onClick:()=>k("/forgot-password"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium text-xs",children:"Request a new reset link"})]})})]})})]})}),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," AptSync. All rights reserved."]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,toastClassName:"!text-sm"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(kc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(_m,{size:64,className:"text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm sm:text-base",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full mt-4",children:[e.jsx("button",{onClick:()=>k("/forgot-password"),className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex-1",children:"Request New Reset Link"}),e.jsx("button",{onClick:Z,className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors flex-1",children:"Back to Login"})]})]})})]})})}function IA(){const[t]=ld(),a=hr(),[r,n]=C.useState(""),[l,d]=C.useState(""),[f,h]=C.useState(""),[b,g]=C.useState(!0),[w,k]=C.useState(!0),[E,S]=C.useState(!1),[D,A]=C.useState(!1),[M,I]=C.useState(!1),[F,T]=C.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});C.useEffect(()=>{const z=t.get("token"),Z=t.get("id");if(!z||!Z){g(!1),k(!1),ne.error("Invalid registration link - missing parameters");return}n(z),d(Z),(async()=>{try{const G=await Te.post("/auth/verify-invite-link",{token:z,id:Z});G.data.success&&(h(G.data.email),g(!0))}catch(G){console.error("Link verification failed:",G),g(!1),ne.error(G.response?.data?.message||"This invitation link is invalid or expired.")}finally{k(!1)}})()},[t]);const[L,H]=C.useState([]);C.useEffect(()=>{(async()=>{try{const te=await(await fetch("https://general.apivcm.shop/countries")).json();H(te.data)}catch(Z){console.error("Error fetching countries:",Z)}})()},[]);const U=z=>{const Z=z.target.value,te=L.find(G=>G.country===Z);te&&T(G=>({...G,country:te.country,mobile:te.international_dialing+" "}))},B=z=>{const{name:Z,value:te}=z.target;T(G=>({...G,[Z]:te}))},P=async z=>{if(z.preventDefault(),F.password!==F.confirmPassword){ne.error("Passwords do not match");return}if(F.password.length<8){ne.error("Password must be at least 8 characters long");return}I(!0);try{const Z=await Te.post("/auth/verify",{token:r,id:l});await Te.post("/auth/complete-registration",{email:f,firstname:F.firstname,lastname:F.lastname,country:F.country,mobile:F.mobile,password:F.password}),ne.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>a("/login"),2e3)}catch(Z){console.error("Registration error:",Z),ne.error(Z.response?.data?.message||"Failed to complete registration")}finally{I(!1)}};return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):b?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>a("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(kc,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",f]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:F.firstname,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:F.lastname,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsxs("select",{name:"country",value:F.country||"",onChange:U,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select country *"}),L.map(z=>e.jsx("option",{value:z.country,children:z.country},z.country))]})}),e.jsx("div",{children:e.jsx("input",{name:"mobile",value:F.mobile,onChange:z=>{const Z=F.mobile.split(" ")[0]||"",te=z.target.value.replace(Z+" ",""),se={target:{name:"mobile",value:Z+(te?" "+te.replace(/\D/g,""):"")}};B(se)},placeholder:"Mobile * (e.g., +94 771234567)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:E?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:F.password,onChange:B,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>S(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E?e.jsx(In,{size:18}):e.jsx(Qs,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:D?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:F.confirmPassword,onChange:B,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>A(!D),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:D?e.jsx(In,{size:18}):e.jsx(Qs,{size:18})})]}),e.jsx("button",{type:"submit",disabled:M,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>a("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function OA(){const{auth:t}=C.useContext(Or),a=hr(),[r,n]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(null),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(null),[D,A]=C.useState(!1),[M,I]=C.useState(null),F=L=>{a(`/bills-and-calculations/${L.id}`)},T=async()=>{try{d(!0),h(null);const L=await Te.get("/apartments");L.data.success&&Array.isArray(L.data.data)?n(L.data.data):Array.isArray(L.data)?n(L.data):n([])}catch(L){console.error("Error loading apartments:",L),L.response?.status===401?(h("Unauthorized. Please login again."),a("/login")):L.response?.status===400?h("Company information missing. Please contact support."):h("Failed to load apartments. Please try again.")}finally{d(!1)}};return C.useEffect(()=>{T()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:T,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((L,H)=>e.jsxs("tr",{onClick:()=>L.is_active&&F(L),className:`transition-colors cursor-pointer ${L.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:L.picture?e.jsx("img",{src:`http://localhost:2500${L.picture}`,alt:L.name,className:"w-12 h-12 object-cover rounded-lg",onError:U=>{console.error("Image failed to load:",L.picture),U.target.style.display="none";const B=U.target.parentNode.querySelector(".image-fallback");B&&(B.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(Zs,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:L.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:L.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:L.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:L.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:L.houses})]},L.id||H))})]})]})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}const Bb=(t,a=2,r="standard")=>{if(r==="ten")return Math.ceil(t/10)*10;if(r==="hundred")return Math.ceil(t/100)*100;{const n=Math.pow(10,a);return Math.ceil(t*n)/n}};function FA({onClose:t,onCreated:a,apartment_id:r}){const[n,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState(null),[g,w]=C.useState([]),[k,E]=C.useState(""),[S,D]=C.useState(""),[A,M]=C.useState(new Date().getFullYear()),[I,F]=C.useState(new Date().toLocaleString("default",{month:"long"})),[T,L]=C.useState(0),[H,U]=C.useState(0),[B,P]=C.useState(!1),[z,Z]=C.useState([]),[te,G]=C.useState(!1),[se,ie]=C.useState(""),Y=C.useMemo(()=>{const Ee=new Date;return Ee.setDate(Ee.getDate()+10),Ee.toISOString().split("T")[0]},[]);C.useEffect(()=>{se||ie(Y)},[Y]);const[q,ce]=C.useState([]),[pe,me]=C.useState(""),[le,X]=C.useState([]),[W,K]=C.useState([]),[ae,oe]=C.useState("house_count"),re=async()=>{try{l(!0),b(null);const Ee=await Te.get("/bills");if(Ee.data.success&&Array.isArray(Ee.data.data)){const Je=Ee.data.data.filter(be=>be.billtype==="Shared");w(Je)}else w([])}catch(Ee){console.error("Error loading bills:",Ee),b("Failed to load bills. Please try again.")}finally{l(!1)}},Re=async()=>{try{G(!0);const Ee=await Te.get("/apartments");Ee.data.success&&Z(Ee.data.data||[])}catch(Ee){console.error("Error loading apartments:",Ee)}finally{G(!1)}},ke=async(Ee,Je)=>{if(!Ee||!Je){X([]),K([]),L(0);return}try{P(!0);const be=await Te.get(`/generate-bills/assigned-houses/details?bill_id=${Ee}&apartment_id=${Je}`);if(be.data.success)if(X(be.data.data.houses||[]),K(be.data.data.floors||[]),L(be.data.data.houses.length),S&&be.data.data.houses.length>0){const Be=parseFloat(S)/be.data.data.houses.length;U(Be)}else U(0)}catch(be){console.error("Error fetching assigned houses details:",be),X([]),K([]),L(0)}finally{P(!1)}};C.useEffect(()=>{re(),Re()},[]);const Pe=Ee=>{me(Ee),Ee&&k?ke(k,Ee):(X([]),K([]),L(0))},Oe=Ee=>{E(Ee),Ee&&pe?ke(Ee,pe):(X([]),K([]),L(0))},nt=Ee=>{D(Ee);const Je=le;if(Ee&&Je.length>0)if(ae==="square_footage"){const be=parseFloat(Ee)/Je.length,Be=Bb(be,2,"ten");U(Be)}else{const be=parseFloat(Ee)/Je.length,Be=Bb(be,2,"ten");U(Be)}else U(0)},we=async()=>{if(!k){b("Please select a bill.");return}if(!pe){b("Please select an apartment.");return}if(!S||parseFloat(S)<=0){b("Please enter a valid total amount.");return}if(T===0){b("No houses are assigned to this bill for the selected apartment.");return}try{f(!0),b(null);const Ee={bill_id:k,year:A,month:I,totalAmount:parseFloat(S),apartment_id:pe,selected_floors:[],selected_houses:[],calculation_method:ae,due_date:se||new Date(Date.now()+14400*60*1e3).toISOString().split("T")[0]},Je=await Te.post("/generate-bills/multiple",Ee);Je.data.success?(ne.success(`Successfully generated ${Je.data.data?.length||0} bills!`),a(Je.data.data)):b(Je.data.message||"Failed to generate bill")}catch(Ee){console.error("Error generating bill:",Ee),console.error("Error details:",Ee.response?.data);let Je="Failed to generate bill. Please try again.";Ee.response?.data.message?Je=Ee.response.data.message:Ee.message&&(Je=Ee.message),ne.error(Je)}finally{f(!1)}},Ae=()=>{const Ee=g.find(Je=>Je.id===k);return Ee?Ee.bill_name:""},Le=()=>{const Ee=z.find(Je=>Je.id===pe);return Ee?Ee.name:""};return C.useEffect(()=>{(async()=>{try{const Je=await Te.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ce(Je.data.data||[])}catch(Je){console.error("Error fetching house types:",Je)}})()},[r]),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 pl-1",children:[h&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:h}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("input",{type:"number",value:A,onChange:Ee=>M(parseInt(Ee.target.value)),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:I,onChange:Ee=>F(Ee.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(Ee=>e.jsx("option",{value:Ee,children:Ee},Ee))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:se,onChange:Ee=>ie(Ee.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),!se&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Default due date: ",Y," (10 days from today)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:k,onChange:Ee=>Oe(Ee.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:n,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),g.map(Ee=>e.jsx("option",{value:Ee.id,children:Ee.bill_name},Ee.id))]}),n&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:pe,onChange:Ee=>Pe(Ee.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:te,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),z.map(Ee=>e.jsx("option",{value:Ee.id,children:Ee.name},Ee.id))]}),te&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Calculation Method *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"house_count",name:"calculation_method",value:"house_count",checked:ae==="house_count",onChange:Ee=>oe(Ee.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"house_count",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by House Count (Equal division)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"square_footage",name:"calculation_method",value:"square_footage",checked:ae==="square_footage",onChange:Ee=>oe(Ee.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"square_footage",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by Square Footage (Proportional)"})]})]}),ae==="square_footage"&&e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Total amount will be divided proportionally based on each house's square footage"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:S,onChange:Ee=>nt(Ee.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),k&&pe&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Assigned Houses Information"}),B&&e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Assigned Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Floors:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:W.length})]})]}),W.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Houses by Floor:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto pr-2",children:W.map(Ee=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Floor ",Ee.floor_id,":"]}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[Ee.assigned_houses_count," houses"]})]},Ee.id))})]})]}),k&&pe&&T>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Calculation Method:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:ae==="house_count"?"House Count (Equal)":"Square Footage (Proportional)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ae()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Apartment:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Le()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T})]})]}),S&&T>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[ae==="house_count"?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(S).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",H.toFixed(2),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Rounded up to nearest 10)"})]})]})]}):e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amounts will be calculated proportionally based on each house's square footage and rounded up to the nearest 10"})}),ae==="house_count"&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",S,"  ",T," houses =",e.jsxs("span",{className:"font-medium",children:[" $",(parseFloat(S)/T).toFixed(6)]}),e.jsx("span",{className:"mx-2",children:""}),"Rounded up to: ",e.jsxs("span",{className:"font-medium",children:["$",H.toFixed(2)]})," per house"]})]})]}),k&&pe&&!B&&T===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:" No houses are assigned to this bill for the selected apartment. Please assign houses to this bill first."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{onClick:we,disabled:!k||!pe||!S||T===0||d,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs("span",{children:["Generate ",T," Bills"]})})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function LA({bill:t,onClose:a,getApartmentName:r,getFloorName:n,getHouseName:l,getLocationScope:d,getLocationDisplay:f}){if(!t)return null;const h=g=>{if(!g)return"0.00";const w=typeof g=="string"?parseFloat(g):g;return isNaN(w)?"0.00":w.toFixed(2)},b=g=>{switch(g){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ea,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(gr,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Ea,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:t.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(Tl,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${b(d(t))}`,children:[d(t)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(go,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Li,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r(t.apartment_id)})]})]}),t.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Nf,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n(t.floor_id)})]})]}),t.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Pr,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:f(t)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Xs,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",h(t.totalAmount)]})]}),t.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",h(t.unitPrice)]})]}),t.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(On,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${t.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:t.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function BA(){const[t,a]=C.useState(!1),[r,n]=C.useState([]),[l,d]=C.useState(!1),[f,h]=C.useState(""),[b,g]=C.useState(""),[w,k]=C.useState([]),[E,S]=C.useState({}),[D,A]=C.useState({}),[M,I]=C.useState(!1),[F,T]=C.useState({}),[L,H]=C.useState({}),[U,B]=C.useState({}),[P,z]=C.useState({}),[Z,te]=C.useState({}),[G,se]=C.useState(!1),[ie,Y]=C.useState(null),[q,ce]=C.useState(!1),[pe,me]=C.useState(!1),[le,X]=C.useState(null),W=async()=>{try{d(!0);const fe=await Te.get("/generate-bills");fe.data.success&&(n(fe.data.data),K(fe.data.data))}catch(fe){console.error("Error loading generated bills:",fe),ne.error("Failed to load generated bills")}finally{d(!1)}},K=async fe=>{const at=[...new Set(fe.map(ut=>ut.apartment_id).filter(Boolean))],Ce=[...new Set(fe.map(ut=>ut.floor_id).filter(Boolean))],wt=[...new Set(fe.map(ut=>ut.house_id).filter(Boolean))];if(at.length>0)try{const ut=await Te.get("/apartments");if(ut.data.success){const Ct={};ut.data.data.forEach(Mt=>{Ct[Mt.id]=Mt.name}),B(Ct)}}catch(ut){console.error("Error loading apartments:",ut)}for(const ut of Ce)if(ut&&!P[ut])try{const Ct=await Te.get(`/floors/${ut}`);Ct.data.success&&z(Mt=>({...Mt,[ut]:Ct.data.data.floor_id}))}catch(Ct){console.error("Error loading floor:",Ct)}for(const ut of wt)if(ut&&!Z[ut])try{const Ct=await Te.get(`/houses/${ut}`);Ct.data.success&&te(Mt=>({...Mt,[ut]:Ct.data.data.house_id}))}catch(Ct){console.error("Error loading house:",Ct)}},ae=fe=>U[fe]||fe||"All Apartments",oe=fe=>P[fe]||fe||"All Floors",re=fe=>Z[fe]||fe||"All Houses",Re=fe=>fe.house_id?"House":fe.floor_id?"Floor":fe.apartment_id?"Apartment":"Global",ke=fe=>{switch(Re(fe)){case"House":return`${ae(fe.apartment_id)}  ${oe(fe.floor_id)}  ${re(fe.house_id)}`;case"Floor":return`${ae(fe.apartment_id)}  ${oe(fe.floor_id)}`;case"Apartment":return ae(fe.apartment_id);default:return"All Locations"}};C.useEffect(()=>{W(),be()},[]);const Pe=()=>{a(!0)},Oe=()=>{a(!1)},nt=fe=>{fe&&fe.length>0&&(n(at=>[...fe,...at]),K(fe)),W(),a(!1)},we=fe=>{X(fe),me(!0)},Ae=()=>{me(!1),X(null)},Le=fe=>{Y(fe),se(!0)},Ee=async()=>{if(ie)try{ce(!0),(await Te.delete(`/generate-bills/${ie.id}`)).data.success&&(ne.success("Generated bill deleted successfully"),n(at=>at.filter(Ce=>Ce.id!==ie.id)))}catch(fe){console.error("Error deleting generated bill:",fe),ne.error(fe.response?.data?.message||"Failed to delete generated bill")}finally{ce(!1),se(!1),Y(null)}},Je=()=>{se(!1),Y(null)},be=async()=>{try{I(!0);const fe=await Te.get("/apartments");if(fe.data.success){k(fe.data.data||[]);const at={};fe.data.data.forEach(Ce=>{at[Ce.id]=Ce.name}),B(at)}}catch(fe){console.error("Error loading apartments:",fe),ne.error("Failed to load apartments")}finally{I(!1)}},Be=r.filter(fe=>{const at=fe.bill_name?.toLowerCase().includes(f.toLowerCase())||fe.month?.toLowerCase().includes(f.toLowerCase())||fe.year?.toString().includes(f)||ae(fe.apartment_id)?.toLowerCase().includes(f.toLowerCase())||oe(fe.floor_id)?.toLowerCase().includes(f.toLowerCase())||re(fe.house_id)?.toLowerCase().includes(f.toLowerCase()),Ce=!b||fe.billtype===b;return at&&Ce});return[...new Set(r.map(fe=>fe.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:f,onChange:fe=>h(fe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:Pe,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",Be.length,")"]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):Be.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(La,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:Be.map(fe=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:fe.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:fe.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[fe.month," ",fe.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${fe.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:fe.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(fe.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>we(fe),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(Qs,{size:16})}),e.jsx("button",{onClick:()=>Le(fe),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(Fr,{size:16})})]})]})]})})},fe.id))})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:Oe,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(FA,{onClose:Oe,onCreated:nt})]})}),pe&&le&&e.jsx(LA,{bill:le,onClose:Ae,getApartmentName:ae,getFloorName:oe,getHouseName:re,getLocationScope:Re,getLocationDisplay:ke}),G&&ie&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Fr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",ie.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",ie.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:ie.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:ie.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[ie.month," ",ie.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Je,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:q,children:"Cancel"}),e.jsx("button",{onClick:Ee,disabled:q,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function PA(){const[t,a]=C.useState([]),[r,n]=C.useState(!1),[l,d]=C.useState(""),[f,h]=C.useState(""),[b,g]=C.useState([]),[w,k]=C.useState({}),[E,S]=C.useState({}),[D,A]=C.useState({}),[M,I]=C.useState({}),[F,T]=C.useState({}),[L,H]=C.useState(!1),[U,B]=C.useState(null),[P,z]=C.useState(!1),[Z,te]=C.useState(null),[G,se]=C.useState(!1),ie=async()=>{try{n(!0);const re=await Te.get("/generate-measurable-bills");re.data.success&&(a(re.data.data),Y(re.data.data))}catch(re){console.error("Error loading measurable bills:",re),ne.error("Failed to load measurable bills")}finally{n(!1)}},Y=async re=>{const Re=[...new Set(re.map(Oe=>Oe.apartment_id).filter(Boolean))],ke=[...new Set(re.map(Oe=>Oe.floor_id).filter(Boolean))],Pe=[...new Set(re.map(Oe=>Oe.house_id).filter(Boolean))];if(Re.length>0)try{const Oe=await Te.get("/apartments");if(Oe.data.success){const nt={};Oe.data.data.forEach(we=>{nt[we.id]=we.name}),A(nt)}}catch(Oe){console.error("Error loading apartments:",Oe)}for(const Oe of ke)if(Oe&&!M[Oe])try{const nt=await Te.get(`/floors/${Oe}`);nt.data.success&&I(we=>({...we,[Oe]:nt.data.data.floor_id}))}catch(nt){console.error("Error loading floor:",nt)}for(const Oe of Pe)if(Oe&&!F[Oe])try{const nt=await Te.get(`/houses/${Oe}`);nt.data.success&&T(we=>({...we,[Oe]:nt.data.data.house_id}))}catch(nt){console.error("Error loading house:",nt)}},q=re=>D[re]||re||"N/A",ce=re=>M[re]||re||"N/A",pe=re=>F[re]||re||"N/A",me=re=>re.house_id?`${q(re.apartment_id)}  ${ce(re.floor_id)}  ${pe(re.house_id)}`:re.floor_id?`${q(re.apartment_id)}  ${ce(re.floor_id)}`:re.apartment_id?q(re.apartment_id):"Global";C.useEffect(()=>{ie()},[]);const le=re=>{te(re),se(!0)},X=()=>{se(!1),te(null)},W=re=>{B(re),H(!0)},K=async()=>{if(U)try{z(!0),(await Te.delete(`/generate-measurable-bills/${U.id}`)).data.success&&(ne.success("Measurable bill deleted successfully"),a(Re=>Re.filter(ke=>ke.id!==U.id)))}catch(re){console.error("Error deleting measurable bill:",re),ne.error(re.response?.data?.message||"Failed to delete measurable bill")}finally{z(!1),H(!1),B(null)}},ae=()=>{H(!1),B(null)},oe=t.filter(re=>{const Re=re.bill_name?.toLowerCase().includes(l.toLowerCase())||re.month?.toLowerCase().includes(l.toLowerCase())||re.year?.toString().includes(l)||q(re.apartment_id)?.toLowerCase().includes(l.toLowerCase())||ce(re.floor_id)?.toLowerCase().includes(l.toLowerCase())||pe(re.house_id)?.toLowerCase().includes(l.toLowerCase()),ke=!f||re.billtype===f;return Re&&ke});return[...new Set(t.map(re=>re.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:l,onChange:re=>d(re.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",oe.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",oe.length," of ",t.length," bills"]})]}),r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):oe.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(js,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:oe.map(re=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:re.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:re.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[re.month," ",re.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(re.created_at).toLocaleDateString()," at ",new Date(re.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>le(re),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(Qs,{size:16})}),e.jsx("button",{onClick:()=>W(re),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:re.payment_status==="Paid",children:e.jsx(Fr,{size:16})})]})]})]})})},re.id))})]})]}),G&&Z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:X,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:Z.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:Z.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[Z.month," ",Z.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:me(Z)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:Z.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:Z.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[Z.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",Z.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:Z.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(Z.created_at).toLocaleString()})]}),Z.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(Z.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:X,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),L&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Fr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:U.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:U.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U.month," ",U.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",U.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:K,disabled:P,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function zA(){const[t,a]=C.useState(!1),[r,n]=C.useState("bills");hr();const{apartment_id:l}=gn(),[d,f]=C.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ea,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>n("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${r==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>n("generateBill"),className:`px-4 py-2 font-semibold 
                                ${r==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>n("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${r==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),r==="bills"&&e.jsx(hw,{}),r==="generateBill"&&e.jsx(BA,{}),r==="measurableBill"&&e.jsx(PA,{})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function UA({show:t,onClose:a,onSave:r}){const[n,l]=C.useState({fromRange:"",toRange:""});if(!t)return null;const d=h=>{const{name:b,value:g}=h.target;l(w=>({...w,[b]:g}))},f=()=>{if(!n.fromRange||!n.toRange){ne.error("Please fill all fields.");return}r(n)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(gr,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:n.fromRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:n.toRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:f,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function HA({range:t,onClose:a,onUpdated:r}){const[n,l]=C.useState({fromRange:"",toRange:"",unitPrice:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),g=localStorage.getItem("token");C.useEffect(()=>{t&&l({fromRange:t.fromRange??"",toRange:t.toRange??"",unitPrice:t.unitPrice??""})},[t]);const w=E=>{const{name:S,value:D}=E.target;l(A=>({...A,[S]:D}))},k=async E=>{E.preventDefault(),f(!0),b("");try{const S=await Te.put(`/billranges/${t.id}`,n,{headers:{Authorization:`Bearer ${g}`}});S.data.success?(r&&r(S.data.data),a&&a()):b(S.data.message||"Failed to update bill range")}catch(S){console.error("Update error:",S),b("Error updating bill range")}finally{f(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:n.fromRange,onChange:w,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:n.toRange,onChange:w,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})]})})}function VA(){const{bill_id:t}=gn(),[a,r]=C.useState(!1),[n,l]=C.useState(null),[d,f]=C.useState([]),[h,b]=C.useState(!1),g=hr(),[w,k]=C.useState([]),[E,S]=C.useState(!1),[D,A]=C.useState(!1),[M,I]=C.useState(!1),[F,T]=C.useState(null),[L,H]=C.useState(null),[U,B]=C.useState(!1),P=async()=>{try{r(!0),l(null);const ie=await Te.get(`/billranges?bill_id=${t}`);if(ie.data.success&&Array.isArray(ie.data.data)){const Y=ie.data.data.filter(q=>q.bill_id===t);f(Y)}else f([])}catch(ie){console.error("Error loading bill ranges:",ie),l("Failed to load bill ranges. Please try again.")}finally{r(!1)}};C.useEffect(()=>{P()},[t]);const z=()=>{g("/bills-and-calculations")},Z=async()=>{try{S(!0),l(null);const ie=await Te.get("/bills");ie.data.success&&Array.isArray(ie.data.data)?k(ie.data.data):k([])}catch(ie){console.error("Error loading bills:",ie),l("Failed to load bills. Please try again.")}finally{S(!1)}};C.useEffect(()=>{Z()},[]);const te=ie=>{H(ie),B(!0)},G=async()=>{try{if(!L)return;await Te.delete(`/billranges/${L.id}`),ne.success("Bill range deleted successfully"),B(!1),H(null),P()}catch(ie){console.error("Delete bill range error:",ie),ne.error("Failed to delete bill range")}},se=()=>{B(!1),H(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:b}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${h?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:z,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:25})}),e.jsx(Ea,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const ie=w.find(Y=>Y.id===t);return ie?ie.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):n?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[n,e.jsx("button",{onClick:P,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(Zs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((ie,Y)=>e.jsxs("tr",{onClick:()=>g(`/billprice/${t}/${ie.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:Y+1}),e.jsx("td",{className:"px-4 py-4",children:ie.fromRange}),e.jsx("td",{className:"px-4 py-4",children:ie.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),T(ie),I(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:q=>{q.stopPropagation(),te(ie)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},ie.id))})]})})]})]})})]}),e.jsx(UA,{show:D,onClose:()=>A(!1),onSave:async ie=>{try{(await Te.post("/billranges",{...ie,bill_id:t})).data.success?(ne.success("Bill range added successfully!"),A(!1),P()):ne.error("Failed to add bill range.")}catch(Y){console.error("Error adding bill range:",Y),ne.error("Error adding bill range.")}}}),M&&e.jsx(HA,{range:F,onClose:()=>I(!1),onUpdated:()=>{ne.success("Bill range updated!"),P()}}),U&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:se,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:G,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function GA({bill_id:t,billrange_id:a,onClose:r,onCreated:n}){const[l,d]=C.useState({year:"",month:"",unitprice:"",fixedamount:""}),[f,h]=C.useState(!1),[b,g]=C.useState("");Dr.useEffect(()=>{},[t,a]);const w=E=>{const{name:S,value:D}=E.target;d(A=>({...A,[S]:D}))},k=async E=>{E.preventDefault(),h(!0),g("");const S={...l,bill_id:t,billrange_id:a};try{const D=await Te.post("/billprice",S,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});D.data.success?(n?.(D.data.data),d({year:"",month:"",unitprice:"",fixedamount:""}),r()):g(D.data.message||"Failed to save bill price")}catch(D){console.error("Error saving bill price:",D),console.error("Error response:",D.response?.data),D.response?.status===400?g(D.response.data?.message||"Bad request. Please check all required fields."):D.response?.status===403?g("Access denied. Please check your login or permissions."):g("Error saving bill price. Please try again.")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(gr,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:k,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:l.year,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2025",max:"2030"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:l.month,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(E=>e.jsx("option",{value:E,children:E},E))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:l.unitprice,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:l.fixedamount,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!t||!a,className:`px-4 py-2 rounded-lg text-white transition ${f||!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:f?"Saving...":"Save"})]})]})]})})}function YA({bill_id:t,billrange_id:a,billPrice:r,onClose:n,onUpdated:l}){const[d,f]=C.useState({year:"",month:"",unitprice:"",fixedamount:""}),[h,b]=C.useState(!1),[g,w]=C.useState("");C.useEffect(()=>{r&&f({year:r.year||"",month:r.month||"",unitprice:r.unitprice||"",fixedamount:r.fixedamount||""})},[r]),C.useEffect(()=>{},[t,a,r,d]);const k=S=>{const{name:D,value:A}=S.target;f(M=>({...M,[D]:A}))},E=async S=>{if(S.preventDefault(),b(!0),w(""),!r||!r.id){w("No bill price selected for editing"),b(!1);return}const D={...d,bill_id:t,billrange_id:a,id:r.id};try{const A=await Te.put(`/billprice/${r.id}`,D,{headers:{"Content-Type":"application/json"}});A.data.success?(l?.(A.data.data),n()):w(A.data.message||"Failed to update bill price")}catch(A){console.error("Error updating bill price:",A),console.error("Error response:",A.response?.data),A.response?.status===400?w(A.response.data?.message||"Bad request. Please check all required fields."):A.response?.status===403?w("Access denied. Please check your login or permissions."):A.response?.status===404?w("Bill price not found. It may have been deleted."):w("Error updating bill price. Please try again.")}finally{b(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(gr,{size:20})})]}),g&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:g}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:d.year,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:d.month,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(S=>e.jsx("option",{value:S,children:S},S))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:d.unitprice,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:d.fixedamount,onChange:k,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!t||!a||!r,className:`px-4 py-2 rounded-lg text-white transition ${h||!t||!a||!r?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:h?"Updating...":"Update"})]})]})]})})}function XA(){const{bill_id:t,billrange_id:a}=gn(),r=hr(),[n,l]=C.useState([]),[d,f]=C.useState(!1),[h,b]=C.useState(null),[g,w]=C.useState(!1),[k,E]=C.useState(!1),[S,D]=C.useState(!1),[A,M]=C.useState(null);Dr.useEffect(()=>{},[t,a]);const I=async()=>{try{f(!0),b(null);const P=await Te.get(`/billprice?bill_id=${t}&billrange_id=${a}`);P.data.success?l(P.data.data||[]):(l([]),b(P.data.message||"Failed to load bill prices"))}catch(P){console.error("Error loading bill prices:",P),b(P.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{f(!1)}};C.useEffect(()=>{t&&a?I():b("Missing bill_id or billrange_id in URL parameters")},[t,a]);const F=()=>{r(-1)},T=()=>{I(),E(!1),ne.success("Bill price created successfully!")},L=P=>{M(P),D(!0)},H=()=>{I(),D(!1),M(null),ne.success("Updated!")},U=()=>{D(!1),M(null)},B=async P=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await Te.delete(`/billprice/${P}`),ne.success("Bill price deleted successfully"),I()}catch(z){console.error("Error deleting bill price:",z),ne.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:w}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${g?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:F,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(Mn,{size:25})}),e.jsx(xr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>E(!0),disabled:!t||!a,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(La,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):h?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[h,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):n.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.map((P,z)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:z+1}),e.jsx("td",{className:"px-4 py-4",children:P.year}),e.jsx("td",{className:"px-4 py-4",children:P.month}),e.jsx("td",{className:"px-4 py-4",children:P.unitprice}),e.jsx("td",{className:"px-4 py-4",children:P.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>L(P),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ga,{size:20})}),e.jsx("button",{onClick:()=>B(P.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},P.id))})]})})]})]})})]}),k&&e.jsx(GA,{onClose:()=>E(!1),onCreated:T,billrange_id:a,bill_id:t}),S&&A&&e.jsx(YA,{onClose:U,onUpdated:H,billrange_id:a,bill_id:t,billPrice:A}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function qA(){const[t,a]=C.useState(!1),[r,n]=C.useState(0),[l,d]=C.useState(!0),[f,h]=C.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0}),{auth:b}=C.useContext(Or);C.useEffect(()=>{b?.user?.id&&(g(),w())},[b?.user?.id]);const g=async()=>{try{d(!0);const E=await Te.get(`/user-apartments/users/${b.user.id}/apartments`);if(E.data.success){const S=E.data.data||[];n(S.length),h(D=>({...D,assignedApartments:S.length}))}else ne.error("Failed to load assigned apartments")}catch(E){console.error("Error fetching assigned apartments:",E),ne.error("Error loading assigned apartments")}finally{d(!1)}},w=async()=>{try{const E={pendingTasks:12,completedTasks:45,maintenanceRequests:8};h(S=>({...S,...E}))}catch(E){console.error("Error fetching dashboard stats:",E)}},k=E=>E.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx($a,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:k(r)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(Cl,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assigned Apartments Summary"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View Details"})]}),r===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ia,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Apartments Assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"You haven't been assigned to any apartments yet."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:k(r)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Apartments"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:k(r)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Active Status"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400",children:k(f.pendingTasks)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Tasks"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:k(f.maintenanceRequests)}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Maintenance"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-100 dark:border-blue-800 rounded-lg p-4 mt-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Quick Tips"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx($a,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("span",{children:["You are responsible for ",r," apartments"]})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx($a,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Regular inspections ensure tenant satisfaction"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx($a,{size:16,className:"mr-2 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Keep track of pending tasks and maintenance requests"})]})]})]})]})]}),e.jsxs("div",{className:"mt-6 lg:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Activity"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View All"})]}),e.jsx("div",{className:"space-y-4",children:r===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity. Start by getting assigned to apartments."}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx($a,{size:16,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:["Assigned to ",r," apartments"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Today  All apartments active"})]})]}),e.jsx(Cl,{size:16,className:"text-green-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Ks,{size:16,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[f.pendingTasks," pending tasks"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Requires your attention"})]})]}),e.jsx(Cl,{size:16,className:"text-yellow-500"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(On,{size:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium text-gray-800 dark:text-gray-200",children:[f.maintenanceRequests," maintenance requests"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Scheduled for this week"})]})]}),e.jsx(Cl,{size:16,className:"text-blue-500"})]})]})})]})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function $A(){const[t,a]=C.useState(!1),[r,n]=C.useState(null),[l,d]=C.useState(!0),[f,h]=C.useState(!1),[b,g]=C.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:w}=C.useContext(Or);C.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const I=await Te.get("/auth/me");if(I.data.success&&I.data.data&&I.data.data.length>0){const F=I.data.data[0];n(F),g({firstname:F.firstname||"",lastname:F.lastname||"",country:F.country||"",mobile:F.mobile||""})}else ne.error("No profile data found")}catch(I){console.error("Error fetching profile:",I),ne.error("Failed to load profile")}finally{d(!1)}},E=()=>{h(!0)},S=()=>{h(!1),r&&g({firstname:r.firstname||"",lastname:r.lastname||"",country:r.country||"",mobile:r.mobile||""})},D=async()=>{try{const I=await Te.put(`/auth/users/${r.id}`,b);I.data.success&&(n(F=>({...F,...I.data.data})),h(!1),ne.success("Profile updated successfully"),k())}catch(I){console.error("Error updating profile:",I),ne.error(I.response?.data?.message||"Failed to update profile")}},A=I=>{const{name:F,value:T}=I.target;g(L=>({...L,[F]:T}))},M=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return l?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):r?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:S,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(gr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:D,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(kf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(ga,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[r.firstname?.charAt(0)?.toUpperCase(),r.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[r.firstname," ",r.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:r.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Tl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",M(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),f?e.jsx("input",{type:"text",name:"firstname",value:b.firstname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),f?e.jsx("input",{type:"text",name:"lastname",value:b.lastname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(go,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Rc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Rl,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(po,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:r.role})]})]})]})})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function WA(){const[t,a]=C.useState([]),[r,n]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState(!1),[b,g]=C.useState(!1),{auth:w}=C.useContext(Or),k=hr(),E=async()=>{try{n(!0);const I=await Te.get(`/user-apartments/users/${w.user.id}/apartments`);I.data.success?a(I.data.data||[]):(ne.error("Failed to load apartments"),a([]))}catch(I){console.error("Error fetching apartments:",I),ne.error("Error loading your apartments"),a([])}finally{n(!1)}};C.useEffect(()=>{w?.user?.id&&E()},[w?.user?.id]);const S=t.filter(I=>I.name?.toLowerCase().includes(l.toLowerCase())||I.address?.toLowerCase().includes(l.toLowerCase())||I.city?.toLowerCase().includes(l.toLowerCase())),D=I=>{try{return new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=I=>I?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",M=I=>{k(`/floors/${I}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>g(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ia,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:l,onChange:I=>d(I.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ia,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:S.map(I=>e.jsxs("div",{onClick:()=>M(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Pr,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(go,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(On,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(Ia,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",D(I.assigned_at)]})})]},I.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(I=>e.jsxs("div",{onClick:()=>M(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Pr,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(go,{size:16}),e.jsxs("span",{className:"text-sm",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(On,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(Ia,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",D(I.assigned_at)]})})]},I.id))})]})}),S.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(js,{size:20})})})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function KA({bill_id:t,onClose:a,onSuccess:r}){const[n,l]=C.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[d,f]=C.useState(!1),[h,b]=C.useState({}),g=S=>{const{name:D,value:A}=S.target;l(M=>({...M,[D]:A})),h[D]&&b(M=>({...M,[D]:""}))},w=()=>{const S={};return(!n.year||n.year<2e3||n.year>2100)&&(S.year="Please enter a valid year (2000-2100)"),(!n.month||n.month<1||n.month>12)&&(S.month="Please select a valid month (1-12)"),(!n.amount||parseFloat(n.amount)<=0)&&(S.amount="Please enter a valid amount"),b(S),Object.keys(S).length===0},k=async S=>{if(S.preventDefault(),!!w())try{f(!0);const D=await Te.post("/shared-value-prices",{bill_id:t,year:parseInt(n.year),month:parseInt(n.month),amount:parseFloat(n.amount)});D.data.success?r():ne.error(D.data.message||"Failed to create shared value price")}catch(D){console.error("Error creating shared value price:",D),D.response?.data?.message?ne.error(D.response.data.message):ne.error("Failed to create shared value price")}finally{f(!1)}},E=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:n.year,onChange:g,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),h.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:n.month,onChange:g,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:E.map(S=>e.jsx("option",{value:S.value,children:S.label},S.value))}),h.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:n.amount,onChange:g,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),h.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[d&&e.jsx(Gt,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Creating...":"Create"})]})]})]})]})})}function ZA(){const{bill_id:t}=gn(),a=hr(),[r,n]=C.useState([]),[l,d]=C.useState(null),[f,h]=C.useState(!1),[b,g]=C.useState(!1),[w,k]=C.useState(null),[E,S]=C.useState(!1),[D,A]=C.useState(!1),[M,I]=C.useState(!1),[F,T]=C.useState(null),[L,H]=C.useState(!1),[U,B]=C.useState(null),P=async()=>{try{g(!0);const pe=await Te.get(`/bills/${t}`);pe.data.success&&d(pe.data.data)}catch(pe){console.error("Error loading bill info:",pe)}finally{g(!1)}},z=async()=>{try{if(h(!0),k(null),!t){k("Bill ID is required");return}const pe=await Te.get(`/shared-value-prices/bill/${t}`);pe.data.success?n(pe.data.data||[]):(k("Failed to load shared value prices"),n([]))}catch(pe){console.error("Error loading shared value prices:",pe),k("Failed to load shared value prices. Please try again."),n([])}finally{h(!1)}};C.useEffect(()=>{t&&(P(),z())},[t]);const Z=()=>{a(-1)},te=()=>{A(!1),ne.success("Shared value price created successfully"),z()};C.useEffect(()=>{t&&(P(),z())},[t]);const G=()=>{z(),I(!1),T(null),ne.success("Shared value price updated successfully")},se=pe=>{T(pe),I(!0)},ie=pe=>{B(pe),H(!0)},Y=async()=>{try{if(!U)return;await Te.delete(`/shared-value-prices/${U.id}`),ne.success("Shared value price deleted successfully"),H(!1),B(null),z()}catch(pe){console.error("Delete shared value price error:",pe),ne.error("Failed to delete shared value price")}},q=()=>{H(!1),B(null)},ce=pe=>["January","February","March","April","May","June","July","August","September","October","November","December"][pe-1]||pe;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:S}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${E?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Z,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(Mn,{size:25})}),e.jsx(xr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),l&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[l.bill_name," - ",l.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),disabled:!t,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${t?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(La,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:z,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(xr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((pe,me)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:me+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:pe.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ce(pe.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:pe.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(pe.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>se(pe),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(ga,{size:18})}),e.jsx("button",{onClick:()=>ie(pe),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(Fr,{size:18})})]})})]},pe.id))})]})})]})]})})]}),D&&e.jsx(KA,{bill_id:t,onClose:()=>A(!1),onSuccess:te}),M&&F&&e.jsx(EditSharedValuePriceModal,{price:F,onClose:()=>{I(!1),T(null)},onSuccess:G}),L&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",ce(U.month)," ",U.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function vw({payment:t,onClose:a,onUpdate:r}){const[n,l]=C.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[d,f]=C.useState(!1),h=!!t?.generateMeasurable_bills_id;if(C.useEffect(()=>{t&&l({additionalAmount:0,payment_status:t.payment_status||"Pending",paid_at:t.paid_at?new Date(t.paid_at).toISOString().split("T")[0]:""})},[t,h]),!t)return null;const g=h?parseFloat(t.generated_total_amount)||parseFloat(t.unitPrice)||0:parseFloat(t.unitPrice)||0,w=parseFloat(t.paidAmount)||0,k=parseFloat(t.pendingAmount)||0,E=w+parseFloat(n.additionalAmount||0),S=g-E,D=F=>{const T=typeof F=="string"?parseFloat(F):F;return isNaN(T)?"0.00":T.toFixed(2)},A=async F=>{F.preventDefault();const T=parseFloat(n.additionalAmount||0);if(T<0){ne.error("Payment amount cannot be negative");return}if(T>k){ne.error(`Payment amount cannot exceed pending amount of $${D(k)}`);return}let L=n.payment_status;E>=g?L="Paid":E>0?L="Partial":L="Pending";try{f(!0);const H={payment_status:L,paidAmount:E};L==="Paid"&&n.paid_at?H.paid_at=n.paid_at:L==="Paid"&&!n.paid_at&&(H.paid_at=new Date().toISOString().split("T")[0]);const U=await Te.patch(`/bill-payments/${t.id}/status`,H);U.data.success&&(ne.success("Payment updated successfully"),r(U.data.data))}catch(H){console.error("Error updating payment:",H),console.error("Error details:",H.response?.data),ne.error(`Failed to update payment: ${H.response?.data?.message||H.message}`)}finally{f(!1)}},M=F=>{const T=parseFloat(F)||0,H=Math.min(T,k),U=w+H;let B="Pending";U>=g?B="Paid":U>0&&(B="Partial"),l(P=>({...P,additionalAmount:H,payment_status:B}))},I=S<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ea,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),h&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(gr,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.bill_name," (",t.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.apartment_name," - Floor ",t.floor_id," - House ",t.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",D(w)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",D(k)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${h?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${h?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:h?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${h?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",D(g)]}),h&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:k,value:n.additionalAmount,onChange:F=>M(F.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",D(k)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",D(n.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",D(E)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",D(n.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${S>0&&S<k?"bg-orange-50 dark:bg-orange-900/20":I?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${S>0&&S<k?"text-orange-800 dark:text-orange-300":I?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${S>0&&S<k?"text-orange-600 dark:text-orange-400":I?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",D(S)]}),I?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):S<k?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",D(k-S)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${n.payment_status==="Paid"?"text-green-600 dark:text-green-400":n.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:n.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(n.payment_status==="Paid"||I)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:n.paid_at,onChange:F=>l(T=>({...T,paid_at:F.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:n.payment_status==="Paid"||I})]}),!n.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||n.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Xs,{size:16}),e.jsxs("span",{children:["Pay $",D(n.additionalAmount)]})]})})]})]})]})]})})}function QA(){const[t,a]=C.useState([]),[r,n]=C.useState(!1),[l,d]=C.useState({}),[f,h]=C.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[b,g]=C.useState([]),[w,k]=C.useState([]),[E,S]=C.useState([]),[D,A]=C.useState([]),[M,I]=C.useState(""),[F,T]=C.useState(!1),[L,H]=C.useState(!1),[U,B]=C.useState(!1),[P,z]=C.useState(!1),[Z,te]=C.useState(null),[G,se]=C.useState(!1),[ie,Y]=C.useState(null),[q,ce]=C.useState(!1),[pe,me]=C.useState(null),le=async()=>{try{const Ce=await Te.get("/bills");Ce.data.success&&A(Ce.data.data||[])}catch(Ce){console.error("Error loading bills:",Ce),ne.error("Failed to load bills")}},X=async()=>{try{H(!0);const Ce=await Te.get("/apartments");Ce.data.success?g(Ce.data.data||[]):g([])}catch(Ce){console.error("Error loading apartments:",Ce),ne.error("Failed to load apartments"),g([])}finally{H(!1)}},W=async Ce=>{if(!Ce){k([]),S([]);return}try{B(!0);const wt=await Te.get(`/floors?apartment_id=${Ce}`);wt.data.success?k(wt.data.data||[]):k([])}catch(wt){console.error("Error loading floors:",wt),ne.error("Failed to load floors"),k([])}finally{B(!1)}},K=async Ce=>{if(!Ce||!f.apartment_id){S([]);return}try{z(!0);const wt=await Te.get(`/houses?floor_id=${Ce}&apartment_id=${f.apartment_id}`);wt.data.success?S(wt.data.data||[]):S([])}catch(wt){console.error("Error loading houses:",wt),ne.error("Failed to load houses"),S([])}finally{z(!1)}},ae=async()=>{try{n(!0);const Ce=new URLSearchParams;Object.entries(f).forEach(([ut,Ct])=>{Ct&&Ce.append(ut,Ct)});const wt=await Te.get(`/bill-payments?${Ce}`);wt.data.success&&a(wt.data.data)}catch(Ce){console.error("Error loading payments:",Ce),console.error("Payment loading error details:",Ce.response?.data),ne.error("Failed to load payments. Check console for details.")}finally{n(!1)}},oe=async()=>{try{const Ce=await Te.get("/bill-payments/summary");if(Ce.data.success){const wt={};Ce.data.data.forEach(ut=>{wt[ut.payment_status]=ut}),d(wt)}}catch(Ce){console.error("Error loading summary:",Ce)}};C.useEffect(()=>{le(),X(),oe(),ae()},[]),C.useEffect(()=>{ae()},[f]);const re=Ce=>{h({billtype:Ce,apartment_id:"",floor_id:"",house_id:"",payment_status:f.payment_status,month:f.month,year:f.year})},Re=Ce=>{h(wt=>({...wt,apartment_id:Ce,floor_id:"",house_id:""})),W(Ce)},ke=Ce=>{h(wt=>({...wt,floor_id:Ce,house_id:""})),K(Ce)},Pe=Ce=>{h(wt=>({...wt,house_id:Ce}))},Oe=(Ce,wt)=>{h(ut=>({...ut,[Ce]:wt}))},nt=Ce=>{me(Ce),ce(!0)},we=async()=>{if(pe)try{Y(pe.id),(await Te.delete(`/bill-payments/${pe.id}`)).data.success&&(ne.success("Payment deleted successfully"),a(wt=>wt.filter(ut=>ut.id!==pe.id)),oe())}catch(Ce){console.error("Error deleting payment:",Ce),ne.error(Ce.response?.data?.message||"Failed to delete payment")}finally{Y(null),ce(!1),me(null)}},Ae=async Ce=>{try{const{jsPDF:wt}=await mw(async()=>{const{jsPDF:At}=await import("./jspdf.es.min-CXmwJWck.js").then(vt=>vt.j);return{jsPDF:At}},[]),ut=new wt("p","mm","a4"),Ct=ut.internal.pageSize.getWidth();ut.setFontSize(18),ut.setFont(void 0,"bold"),ut.text("INVOICE",Ct/2,20,{align:"center"});const Mt=String(new Date().getTime()%1e3).padStart(3,"0"),qt=new Date().toISOString().split("T")[0];ut.setFontSize(10),ut.setFont(void 0,"normal"),ut.text(`Invoice No: ${Mt}`,15,32),ut.text(`Print Date: ${qt}`,Ct-15,32,{align:"right"}),ut.setFontSize(11),ut.text(`Apartment: ${Ce.apartment_name||""}`,15,44),Ce.floor_id&&ut.text(`Floor: ${Ce.floor_id}`,15,52),Ce.house_number&&ut.text(`House: ${Ce.house_number}`,15,60);const ur=74,Ut=[15,110,150];ut.setDrawColor(0),ut.setFillColor(240,240,240),ut.rect(15,ur-8,Ct-30,8,"F"),ut.setFontSize(11),ut.setTextColor(40),ut.text("Description",Ut[0],ur-2),ut.text("Due Amount",Ut[1],ur-2),ut.text("Paid Amount",Ut[2],ur-2);const Yt=Ce.bill_name||Ce.bill_id||"Charge",It=Number(Ce.unitPrice??Number(Ce.paidAmount||0)+Number(Ce.pendingAmount||0)),$e=Number(Ce.paidAmount||0),jt=ur+8;ut.setFontSize(10),ut.setTextColor(0),ut.text(String(Yt),Ut[0],jt),ut.text(It.toFixed(2),Ut[1],jt),ut.text($e.toFixed(2),Ut[2],jt);const Nt=jt+18;ut.setFont(void 0,"bold"),ut.text("Total Paid:",Ut[1],Nt),ut.text($e.toFixed(2),Ut[2],Nt),ut.setFont(void 0,"normal"),ut.setFontSize(10),ut.text("Thank you for your business!",15,Nt+18);const lt=`INVOICE_${Mt}_${(Ce.apartment_name||"apartment").replace(/\s+/g,"_")}_${Ce.month||""}_${Ce.year||""}.pdf`;ut.save(lt),ne.success("Invoice downloaded")}catch(wt){console.error("Invoice generation failed",wt),ne.error("Failed to generate invoice")}},Le=()=>{h({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),I(""),k([]),S([])},Ee=t.filter(Ce=>{const wt=M.toLowerCase();return Ce.bill_name?.toLowerCase().includes(wt)||Ce.apartment_name?.toLowerCase().includes(wt)||Ce.house_number?.toString().includes(M)||Ce.month?.toLowerCase().includes(wt)}),Je=Ce=>{switch(Ce){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},be=["January","February","March","April","May","June","July","August","September","October","November","December"],Be=[...new Set(D.map(Ce=>Ce.billtype))].filter(Ce=>Ce),fe=()=>{se(!1),te(null)},at=Ce=>{a(wt=>wt.map(ut=>ut.id===Ce.id?Ce:ut)),fe(),oe()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:T}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${F?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ea,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:M,onChange:Ce=>I(Ce.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.billtype,onChange:Ce=>re(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),Be.map(Ce=>e.jsx("option",{value:Ce,children:Ce},Ce))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:f.apartment_id,onChange:Ce=>Re(Ce.target.value),disabled:L,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),b.map(Ce=>e.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]}),L&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.floor_id,onChange:Ce=>ke(Ce.target.value),disabled:!f.apartment_id||U,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),w.map(Ce=>e.jsxs("option",{value:Ce.id,children:["Floor ",Ce.floor_id]},Ce.id))]}),U&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.house_id,onChange:Ce=>Pe(Ce.target.value),disabled:!f.floor_id||P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),E.map(Ce=>e.jsxs("option",{value:Ce.id,children:["House ",Ce.house_id]},Ce.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:f.payment_status,onChange:Ce=>Oe("payment_status",Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.month,onChange:Ce=>Oe("month",Ce.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),be.map(Ce=>e.jsx("option",{value:Ce,children:Ce},Ce))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:f.year,onChange:Ce=>Oe("year",Ce.target.value),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:Le,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",Ee.length," of ",t.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(wf,{size:16}),e.jsxs("span",{children:[Ee.length," payments found"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):Ee.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Xs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ee.map(Ce=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Ce.bill_name," (",Ce.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Li,{size:12,className:"inline mr-1"}),Ce.apartment_name,e.jsx(Pr,{size:12,className:"inline mx-1"}),"Floor ",Ce.floor_id," - House ",Ce.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[Ce.month," ",Ce.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",Ce.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",Ce.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",Ce.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Je(Ce.payment_status)}`,children:Ce.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Ce.paid_at?new Date(Ce.paid_at).toLocaleDateString():new Date(Ce.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>Ae(Ce),className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-all duration-200",title:"Download Invoice",children:e.jsx(Ol,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Download Invoice",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>nt(Ce),disabled:ie===Ce.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:ie===Ce.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Fr,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})]})})]},Ce.id))})]})})})]})})]}),G&&e.jsx(vw,{payment:Z,onClose:fe,onUpdate:at}),q&&pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Fr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[pe.bill_name," (",pe.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[pe.apartment_name," - House ",pe.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",pe.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${pe.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:pe.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{ce(!1),me(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:ie===pe.id,children:"Cancel"}),e.jsx("button",{onClick:we,disabled:ie===pe.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:ie===pe.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}var Et;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Et||(Et={}));var Pb=new Map([[Et.QR_CODE,"QR_CODE"],[Et.AZTEC,"AZTEC"],[Et.CODABAR,"CODABAR"],[Et.CODE_39,"CODE_39"],[Et.CODE_93,"CODE_93"],[Et.CODE_128,"CODE_128"],[Et.DATA_MATRIX,"DATA_MATRIX"],[Et.MAXICODE,"MAXICODE"],[Et.ITF,"ITF"],[Et.EAN_13,"EAN_13"],[Et.EAN_8,"EAN_8"],[Et.PDF_417,"PDF_417"],[Et.RSS_14,"RSS_14"],[Et.RSS_EXPANDED,"RSS_EXPANDED"],[Et.UPC_A,"UPC_A"],[Et.UPC_E,"UPC_E"],[Et.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),zb;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(zb||(zb={}));function JA(t){return Object.values(Et).includes(t)}var ii;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(ii||(ii={}));var Sn=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[ii.SCAN_TYPE_CAMERA,ii.SCAN_TYPE_FILE],t}(),ww=function(){function t(a,r){this.format=a,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(a){if(!Pb.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new t(a,Pb.get(a))},t}(),Ub=function(){function t(){}return t.createFromText=function(a){var r={text:a};return{decodedText:a,result:r}},t.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},t}(),Lm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Lm||(Lm={}));var Nw=function(){function t(){}return t.createFrom=function(a){return{errorMessage:a,type:Lm.UNKWOWN_ERROR}},t}(),kw=function(){function t(a){this.verbose=a}return t.prototype.log=function(a){this.verbose&&console.log(a)},t.prototype.warn=function(a){this.verbose&&console.warn(a)},t.prototype.logError=function(a,r){(this.verbose||r===!0)&&console.error(a)},t.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},t}();function ni(t){return typeof t>"u"||t===null}function e_(t,a,r){return t>r?r:t<a?a:t}var yc=function(){function t(){}return t.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},t.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Tr=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(a){return"Last Match: ".concat(a)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),Hb=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),jw=function(){function t(){}return t.isMediaStreamConstraintsValid=function(a,r){if(typeof a!="object"){var n=typeof a;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(l),f=Object.keys(a),h=0,b=f;h<b.length;h++){var g=b[h];if(d.has(g))return r.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),T0={exports:{}},t_=T0.exports,Vb;function r_(){return Vb||(Vb=1,function(t,a){(function(r,n){n(a)})(t_,function(r){function n(J){return J==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,i){J.__proto__=i}||function(J,i){for(var c in i)i.hasOwnProperty(c)&&(J[c]=i[c])};function d(J,i){l(J,i);function c(){this.constructor=J}J.prototype=i===null?Object.create(i):(c.prototype=i.prototype,new c)}function f(J,i){var c=Object.setPrototypeOf;c?c(J,i):J.__proto__=i}function h(J,i){i===void 0&&(i=J.constructor);var c=Error.captureStackTrace;c&&c(J,i)}var b=function(J){d(i,J);function i(c){var u=this.constructor,m=J.call(this,c)||this;return Object.defineProperty(m,"name",{value:u.name,enumerable:!1}),f(m,u.prototype),h(m),m}return i}(Error);class g extends b{constructor(i=void 0){super(i),this.message=i}getKind(){return this.constructor.kind}}g.kind="Exception";class w extends g{}w.kind="ArgumentException";class k extends g{}k.kind="IllegalArgumentException";class E{constructor(i){if(this.binarizer=i,i===null)throw new k("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(i,c){return this.binarizer.getBlackRow(i,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(i,c,u,m){const p=this.binarizer.getLuminanceSource().crop(i,c,u,m);return new E(this.binarizer.createBinarizer(p))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(i))}rotateCounterClockwise45(){const i=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(i))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class S extends g{static getChecksumInstance(){return new S}}S.kind="ChecksumException";class D{constructor(i){this.source=i}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(i,c,u,m,p){for(;p--;)u[m++]=i[c++]}static currentTimeMillis(){return Date.now()}}class M extends g{}M.kind="IndexOutOfBoundsException";class I extends M{constructor(i=void 0,c=void 0){super(c),this.index=i,this.message=c}}I.kind="ArrayIndexOutOfBoundsException";class F{static fill(i,c){for(let u=0,m=i.length;u<m;u++)i[u]=c}static fillWithin(i,c,u,m){F.rangeCheck(i.length,c,u);for(let p=c;p<u;p++)i[p]=m}static rangeCheck(i,c,u){if(c>u)throw new k("fromIndex("+c+") > toIndex("+u+")");if(c<0)throw new I(c);if(u>i)throw new I(u)}static asList(...i){return i}static create(i,c,u){return Array.from({length:i}).map(p=>Array.from({length:c}).fill(u))}static createInt32Array(i,c,u){return Array.from({length:i}).map(p=>Int32Array.from({length:c}).fill(u))}static equals(i,c){if(!i||!c||!i.length||!c.length||i.length!==c.length)return!1;for(let u=0,m=i.length;u<m;u++)if(i[u]!==c[u])return!1;return!0}static hashCode(i){if(i===null)return 0;let c=1;for(const u of i)c=31*c+u;return c}static fillUint8Array(i,c){for(let u=0;u!==i.length;u++)i[u]=c}static copyOf(i,c){return i.slice(0,c)}static copyOfUint8Array(i,c){if(i.length<=c){const u=new Uint8Array(c);return u.set(i),u}return i.slice(0,c)}static copyOfRange(i,c,u){const m=u-c,p=new Int32Array(m);return A.arraycopy(i,c,p,0,m),p}static binarySearch(i,c,u){u===void 0&&(u=F.numberComparator);let m=0,p=i.length-1;for(;m<=p;){const v=p+m>>1,N=u(c,i[v]);if(N>0)m=v+1;else if(N<0)p=v-1;else return v}return-m-1}static numberComparator(i,c){return i-c}}class T{static numberOfTrailingZeros(i){let c;if(i===0)return 32;let u=31;return c=i<<16,c!==0&&(u-=16,i=c),c=i<<8,c!==0&&(u-=8,i=c),c=i<<4,c!==0&&(u-=4,i=c),c=i<<2,c!==0&&(u-=2,i=c),u-(i<<1>>>31)}static numberOfLeadingZeros(i){if(i===0)return 32;let c=1;return i>>>16||(c+=16,i<<=16),i>>>24||(c+=8,i<<=8),i>>>28||(c+=4,i<<=4),i>>>30||(c+=2,i<<=2),c-=i>>>31,c}static toHexString(i){return i.toString(16)}static toBinaryString(i){return String(parseInt(String(i),2))}static bitCount(i){return i=i-(i>>>1&1431655765),i=(i&858993459)+(i>>>2&858993459),i=i+(i>>>4)&252645135,i=i+(i>>>8),i=i+(i>>>16),i&63}static truncDivision(i,c){return Math.trunc(i/c)}static parseInt(i,c=void 0){return parseInt(i,c)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class L{constructor(i,c){i===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=i,c==null?this.bits=L.makeArray(i):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(i){if(i>this.bits.length*32){const c=L.makeArray(i);A.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(i){return(this.bits[Math.floor(i/32)]&1<<(i&31))!==0}set(i){this.bits[Math.floor(i/32)]|=1<<(i&31)}flip(i){this.bits[Math.floor(i/32)]^=1<<(i&31)}getNextSet(i){const c=this.size;if(i>=c)return c;const u=this.bits;let m=Math.floor(i/32),p=u[m];p&=~((1<<(i&31))-1);const v=u.length;for(;p===0;){if(++m===v)return c;p=u[m]}const N=m*32+T.numberOfTrailingZeros(p);return N>c?c:N}getNextUnset(i){const c=this.size;if(i>=c)return c;const u=this.bits;let m=Math.floor(i/32),p=~u[m];p&=~((1<<(i&31))-1);const v=u.length;for(;p===0;){if(++m===v)return c;p=~u[m]}const N=m*32+T.numberOfTrailingZeros(p);return N>c?c:N}setBulk(i,c){this.bits[Math.floor(i/32)]=c}setRange(i,c){if(c<i||i<0||c>this.size)throw new k;if(c===i)return;c--;const u=Math.floor(i/32),m=Math.floor(c/32),p=this.bits;for(let v=u;v<=m;v++){const N=v>u?0:i&31,O=(2<<(v<m?31:c&31))-(1<<N);p[v]|=O}}clear(){const i=this.bits.length,c=this.bits;for(let u=0;u<i;u++)c[u]=0}isRange(i,c,u){if(c<i||i<0||c>this.size)throw new k;if(c===i)return!0;c--;const m=Math.floor(i/32),p=Math.floor(c/32),v=this.bits;for(let N=m;N<=p;N++){const _=N>m?0:i&31,V=(2<<(N<p?31:c&31))-(1<<_)&4294967295;if((v[N]&V)!==(u?V:0))return!1}return!0}appendBit(i){this.ensureCapacity(this.size+1),i&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(i,c){if(c<0||c>32)throw new k("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let u=c;u>0;u--)this.appendBit((i>>u-1&1)===1)}appendBitArray(i){const c=i.size;this.ensureCapacity(this.size+c);for(let u=0;u<c;u++)this.appendBit(i.get(u))}xor(i){if(this.size!==i.size)throw new k("Sizes don't match");const c=this.bits;for(let u=0,m=c.length;u<m;u++)c[u]^=i.bits[u]}toBytes(i,c,u,m){for(let p=0;p<m;p++){let v=0;for(let N=0;N<8;N++)this.get(i)&&(v|=1<<7-N),i++;c[u+p]=v}}getBitArray(){return this.bits}reverse(){const i=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),u=c+1,m=this.bits;for(let p=0;p<u;p++){let v=m[p];v=v>>1&1431655765|(v&1431655765)<<1,v=v>>2&858993459|(v&858993459)<<2,v=v>>4&252645135|(v&252645135)<<4,v=v>>8&16711935|(v&16711935)<<8,v=v>>16&65535|(v&65535)<<16,i[c-p]=v}if(this.size!==u*32){const p=u*32-this.size;let v=i[0]>>>p;for(let N=1;N<u;N++){const _=i[N];v|=_<<32-p,i[N-1]=v,v=_>>>p}i[u-1]=v}this.bits=i}static makeArray(i){return new Int32Array(Math.floor((i+31)/32))}equals(i){if(!(i instanceof L))return!1;const c=i;return this.size===c.size&&F.equals(this.bits,c.bits)}hashCode(){return 31*this.size+F.hashCode(this.bits)}toString(){let i="";for(let c=0,u=this.size;c<u;c++)(c&7)===0&&(i+=" "),i+=this.get(c)?"X":".";return i}clone(){return new L(this.size,this.bits.slice())}}var H;(function(J){J[J.OTHER=0]="OTHER",J[J.PURE_BARCODE=1]="PURE_BARCODE",J[J.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",J[J.TRY_HARDER=3]="TRY_HARDER",J[J.CHARACTER_SET=4]="CHARACTER_SET",J[J.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",J[J.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",J[J.ASSUME_GS1=7]="ASSUME_GS1",J[J.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",J[J.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",J[J.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var U=H;class B extends g{static getFormatInstance(){return new B}}B.kind="FormatException";var P;(function(J){J[J.Cp437=0]="Cp437",J[J.ISO8859_1=1]="ISO8859_1",J[J.ISO8859_2=2]="ISO8859_2",J[J.ISO8859_3=3]="ISO8859_3",J[J.ISO8859_4=4]="ISO8859_4",J[J.ISO8859_5=5]="ISO8859_5",J[J.ISO8859_6=6]="ISO8859_6",J[J.ISO8859_7=7]="ISO8859_7",J[J.ISO8859_8=8]="ISO8859_8",J[J.ISO8859_9=9]="ISO8859_9",J[J.ISO8859_10=10]="ISO8859_10",J[J.ISO8859_11=11]="ISO8859_11",J[J.ISO8859_13=12]="ISO8859_13",J[J.ISO8859_14=13]="ISO8859_14",J[J.ISO8859_15=14]="ISO8859_15",J[J.ISO8859_16=15]="ISO8859_16",J[J.SJIS=16]="SJIS",J[J.Cp1250=17]="Cp1250",J[J.Cp1251=18]="Cp1251",J[J.Cp1252=19]="Cp1252",J[J.Cp1256=20]="Cp1256",J[J.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",J[J.UTF8=22]="UTF8",J[J.ASCII=23]="ASCII",J[J.Big5=24]="Big5",J[J.GB18030=25]="GB18030",J[J.EUC_KR=26]="EUC_KR"})(P||(P={}));class z{constructor(i,c,u,...m){this.valueIdentifier=i,this.name=u,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=m,z.VALUE_IDENTIFIER_TO_ECI.set(i,this),z.NAME_TO_ECI.set(u,this);const p=this.values;for(let v=0,N=p.length;v!==N;v++){const _=p[v];z.VALUES_TO_ECI.set(_,this)}for(const v of m)z.NAME_TO_ECI.set(v,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(i){if(i<0||i>=900)throw new B("incorect value");const c=z.VALUES_TO_ECI.get(i);if(c===void 0)throw new B("incorect value");return c}static getCharacterSetECIByName(i){const c=z.NAME_TO_ECI.get(i);if(c===void 0)throw new B("incorect value");return c}equals(i){if(!(i instanceof z))return!1;const c=i;return this.getName()===c.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(P.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(P.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(P.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(P.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(P.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(P.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(P.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(P.Big5,28,"Big5"),z.GB18030=new z(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(P.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends g{}Z.kind="UnsupportedOperationException";class te{static decode(i,c){const u=this.encodingName(c);return this.customDecoder?this.customDecoder(i,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(i,u):new TextDecoder(u).decode(i)}static shouldDecodeOnFallback(i){return!te.isBrowser()&&i==="ISO-8859-1"}static encode(i,c){const u=this.encodingName(c);return this.customEncoder?this.customEncoder(i,u):typeof TextEncoder>"u"?this.encodeFallback(i):new TextEncoder().encode(i)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(i){return typeof i=="string"?i:i.getName()}static encodingCharacterSet(i){return i instanceof z?i:z.getCharacterSetECIByName(i)}static decodeFallback(i,c){const u=this.encodingCharacterSet(c);if(te.isDecodeFallbackSupported(u)){let m="";for(let p=0,v=i.length;p<v;p++){let N=i[p].toString(16);N.length<2&&(N="0"+N),m+="%"+N}return decodeURIComponent(m)}if(u.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(i.buffer));throw new Z(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(i){return i.equals(z.UTF8)||i.equals(z.ISO8859_1)||i.equals(z.ASCII)}static encodeFallback(i){const u=btoa(unescape(encodeURIComponent(i))).split(""),m=[];for(let p=0;p<u.length;p++)m.push(u[p].charCodeAt(0));return new Uint8Array(m)}}class G{static castAsNonUtf8Char(i,c=null){const u=c?c.getName():this.ISO88591;return te.decode(new Uint8Array([i]),u)}static guessEncoding(i,c){if(c!=null&&c.get(U.CHARACTER_SET)!==void 0)return c.get(U.CHARACTER_SET).toString();const u=i.length;let m=!0,p=!0,v=!0,N=0,_=0,O=0,V=0,ee=0,ue=0,je=0,De=0,Me=0,Ue=0,Ke=0;const ht=i.length>3&&i[0]===239&&i[1]===187&&i[2]===191;for(let gt=0;gt<u&&(m||p||v);gt++){const ft=i[gt]&255;v&&(N>0?(ft&128)===0?v=!1:N--:(ft&128)!==0&&((ft&64)===0?v=!1:(N++,(ft&32)===0?_++:(N++,(ft&16)===0?O++:(N++,(ft&8)===0?V++:v=!1))))),m&&(ft>127&&ft<160?m=!1:ft>159&&(ft<192||ft===215||ft===247)&&Ke++),p&&(ee>0?ft<64||ft===127||ft>252?p=!1:ee--:ft===128||ft===160||ft>239?p=!1:ft>160&&ft<224?(ue++,De=0,je++,je>Me&&(Me=je)):ft>127?(ee++,je=0,De++,De>Ue&&(Ue=De)):(je=0,De=0))}return v&&N>0&&(v=!1),p&&ee>0&&(p=!1),v&&(ht||_+O+V>0)?G.UTF8:p&&(G.ASSUME_SHIFT_JIS||Me>=3||Ue>=3)?G.SHIFT_JIS:m&&p?Me===2&&ue===2||Ke*10>=u?G.SHIFT_JIS:G.ISO88591:m?G.ISO88591:p?G.SHIFT_JIS:v?G.UTF8:G.PLATFORM_DEFAULT_ENCODING}static format(i,...c){let u=-1;function m(v,N,_,O,V,ee){if(v==="%%")return"%";if(c[++u]===void 0)return;v=O?parseInt(O.substr(1)):void 0;let ue=V?parseInt(V.substr(1)):void 0,je;switch(ee){case"s":je=c[u];break;case"c":je=c[u][0];break;case"f":je=parseFloat(c[u]).toFixed(v);break;case"p":je=parseFloat(c[u]).toPrecision(v);break;case"e":je=parseFloat(c[u]).toExponential(v);break;case"x":je=parseInt(c[u]).toString(ue||16);break;case"d":je=parseFloat(parseInt(c[u],ue||10).toPrecision(v)).toFixed(0);break}je=typeof je=="object"?JSON.stringify(je):(+je).toString(ue);let De=parseInt(_),Me=_&&_[0]+""=="0"?"0":" ";for(;je.length<De;)je=N!==void 0?je+Me:Me+je;return je}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(p,m)}static getBytes(i,c){return te.encode(i,c)}static getCharCode(i,c=0){return i.charCodeAt(c)}static getCharAt(i){return String.fromCharCode(i)}}G.SHIFT_JIS=z.SJIS.getName(),G.GB2312="GB2312",G.ISO88591=z.ISO8859_1.getName(),G.EUC_JP="EUC_JP",G.UTF8=z.UTF8.getName(),G.PLATFORM_DEFAULT_ENCODING=G.UTF8,G.ASSUME_SHIFT_JIS=!1;class se{constructor(i=""){this.value=i}enableDecoding(i){return this.encoding=i,this}append(i){return typeof i=="string"?this.value+=i.toString():this.encoding?this.value+=G.castAsNonUtf8Char(i,this.encoding):this.value+=String.fromCharCode(i),this}appendChars(i,c,u){for(let m=c;c<c+u;m++)this.append(i[m]);return this}length(){return this.value.length}charAt(i){return this.value.charAt(i)}deleteCharAt(i){this.value=this.value.substr(0,i)+this.value.substring(i+1)}setCharAt(i,c){this.value=this.value.substr(0,i)+c+this.value.substr(i+1)}substring(i,c){return this.value.substring(i,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(i,c){this.value=this.value.substr(0,i)+c+this.value.substr(i+c.length)}}class ie{constructor(i,c,u,m){if(this.width=i,this.height=c,this.rowSize=u,this.bits=m,c==null&&(c=i),this.height=c,i<1||c<1)throw new k("Both dimensions must be greater than 0");u==null&&(u=Math.floor((i+31)/32)),this.rowSize=u,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(i){const c=i.length,u=i[0].length,m=new ie(u,c);for(let p=0;p<c;p++){const v=i[p];for(let N=0;N<u;N++)v[N]&&m.set(N,p)}return m}static parseFromString(i,c,u){if(i===null)throw new k("stringRepresentation cannot be null");const m=new Array(i.length);let p=0,v=0,N=-1,_=0,O=0;for(;O<i.length;)if(i.charAt(O)===`
`||i.charAt(O)==="\r"){if(p>v){if(N===-1)N=p-v;else if(p-v!==N)throw new k("row lengths do not match");v=p,_++}O++}else if(i.substring(O,O+c.length)===c)O+=c.length,m[p]=!0,p++;else if(i.substring(O,O+u.length)===u)O+=u.length,m[p]=!1,p++;else throw new k("illegal character encountered: "+i.substring(O));if(p>v){if(N===-1)N=p-v;else if(p-v!==N)throw new k("row lengths do not match");_++}const V=new ie(N,_);for(let ee=0;ee<p;ee++)m[ee]&&V.set(Math.floor(ee%N),Math.floor(ee/N));return V}get(i,c){const u=c*this.rowSize+Math.floor(i/32);return(this.bits[u]>>>(i&31)&1)!==0}set(i,c){const u=c*this.rowSize+Math.floor(i/32);this.bits[u]|=1<<(i&31)&4294967295}unset(i,c){const u=c*this.rowSize+Math.floor(i/32);this.bits[u]&=~(1<<(i&31)&4294967295)}flip(i,c){const u=c*this.rowSize+Math.floor(i/32);this.bits[u]^=1<<(i&31)&4294967295}xor(i){if(this.width!==i.getWidth()||this.height!==i.getHeight()||this.rowSize!==i.getRowSize())throw new k("input matrix dimensions do not match");const c=new L(Math.floor(this.width/32)+1),u=this.rowSize,m=this.bits;for(let p=0,v=this.height;p<v;p++){const N=p*u,_=i.getRow(p,c).getBitArray();for(let O=0;O<u;O++)m[N+O]^=_[O]}}clear(){const i=this.bits,c=i.length;for(let u=0;u<c;u++)i[u]=0}setRegion(i,c,u,m){if(c<0||i<0)throw new k("Left and top must be nonnegative");if(m<1||u<1)throw new k("Height and width must be at least 1");const p=i+u,v=c+m;if(v>this.height||p>this.width)throw new k("The region must fit inside the matrix");const N=this.rowSize,_=this.bits;for(let O=c;O<v;O++){const V=O*N;for(let ee=i;ee<p;ee++)_[V+Math.floor(ee/32)]|=1<<(ee&31)&4294967295}}getRow(i,c){c==null||c.getSize()<this.width?c=new L(this.width):c.clear();const u=this.rowSize,m=this.bits,p=i*u;for(let v=0;v<u;v++)c.setBulk(v*32,m[p+v]);return c}setRow(i,c){A.arraycopy(c.getBitArray(),0,this.bits,i*this.rowSize,this.rowSize)}rotate180(){const i=this.getWidth(),c=this.getHeight();let u=new L(i),m=new L(i);for(let p=0,v=Math.floor((c+1)/2);p<v;p++)u=this.getRow(p,u),m=this.getRow(c-1-p,m),u.reverse(),m.reverse(),this.setRow(p,m),this.setRow(c-1-p,u)}getEnclosingRectangle(){const i=this.width,c=this.height,u=this.rowSize,m=this.bits;let p=i,v=c,N=-1,_=-1;for(let O=0;O<c;O++)for(let V=0;V<u;V++){const ee=m[O*u+V];if(ee!==0){if(O<v&&(v=O),O>_&&(_=O),V*32<p){let ue=0;for(;(ee<<31-ue&4294967295)===0;)ue++;V*32+ue<p&&(p=V*32+ue)}if(V*32+31>N){let ue=31;for(;!(ee>>>ue);)ue--;V*32+ue>N&&(N=V*32+ue)}}}return N<p||_<v?null:Int32Array.from([p,v,N-p+1,_-v+1])}getTopLeftOnBit(){const i=this.rowSize,c=this.bits;let u=0;for(;u<c.length&&c[u]===0;)u++;if(u===c.length)return null;const m=u/i;let p=u%i*32;const v=c[u];let N=0;for(;(v<<31-N&4294967295)===0;)N++;return p+=N,Int32Array.from([p,m])}getBottomRightOnBit(){const i=this.rowSize,c=this.bits;let u=c.length-1;for(;u>=0&&c[u]===0;)u--;if(u<0)return null;const m=Math.floor(u/i);let p=Math.floor(u%i)*32;const v=c[u];let N=31;for(;!(v>>>N);)N--;return p+=N,Int32Array.from([p,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(i){if(!(i instanceof ie))return!1;const c=i;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&F.equals(this.bits,c.bits)}hashCode(){let i=this.width;return i=31*i+this.width,i=31*i+this.height,i=31*i+this.rowSize,i=31*i+F.hashCode(this.bits),i}toString(i="X ",c="  ",u=`
`){return this.buildToString(i,c,u)}buildToString(i,c,u){let m=new se;for(let p=0,v=this.height;p<v;p++){for(let N=0,_=this.width;N<_;N++)m.append(this.get(N,p)?i:c);m.append(u)}return m.toString()}clone(){return new ie(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends g{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class q extends D{constructor(i){super(i),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(i,c){const u=this.getLuminanceSource(),m=u.getWidth();c==null||c.getSize()<m?c=new L(m):c.clear(),this.initArrays(m);const p=u.getRow(i,this.luminances),v=this.buckets;for(let _=0;_<m;_++)v[(p[_]&255)>>q.LUMINANCE_SHIFT]++;const N=q.estimateBlackPoint(v);if(m<3)for(let _=0;_<m;_++)(p[_]&255)<N&&c.set(_);else{let _=p[0]&255,O=p[1]&255;for(let V=1;V<m-1;V++){const ee=p[V+1]&255;(O*4-_-ee)/2<N&&c.set(V),_=O,O=ee}}return c}getBlackMatrix(){const i=this.getLuminanceSource(),c=i.getWidth(),u=i.getHeight(),m=new ie(c,u);this.initArrays(c);const p=this.buckets;for(let _=1;_<5;_++){const O=Math.floor(u*_/5),V=i.getRow(O,this.luminances),ee=Math.floor(c*4/5);for(let ue=Math.floor(c/5);ue<ee;ue++){const je=V[ue]&255;p[je>>q.LUMINANCE_SHIFT]++}}const v=q.estimateBlackPoint(p),N=i.getMatrix();for(let _=0;_<u;_++){const O=_*c;for(let V=0;V<c;V++)(N[O+V]&255)<v&&m.set(V,_)}return m}createBinarizer(i){return new q(i)}initArrays(i){this.luminances.length<i&&(this.luminances=new Uint8ClampedArray(i));const c=this.buckets;for(let u=0;u<q.LUMINANCE_BUCKETS;u++)c[u]=0}static estimateBlackPoint(i){const c=i.length;let u=0,m=0,p=0;for(let V=0;V<c;V++)i[V]>p&&(m=V,p=i[V]),i[V]>u&&(u=i[V]);let v=0,N=0;for(let V=0;V<c;V++){const ee=V-m,ue=i[V]*ee*ee;ue>N&&(v=V,N=ue)}if(m>v){const V=m;m=v,v=V}if(v-m<=c/16)throw new Y;let _=v-1,O=-1;for(let V=v-1;V>m;V--){const ee=V-m,ue=ee*ee*(v-V)*(u-i[V]);ue>O&&(_=V,O=ue)}return _<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class ce extends q{constructor(i){super(i),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const i=this.getLuminanceSource(),c=i.getWidth(),u=i.getHeight();if(c>=ce.MINIMUM_DIMENSION&&u>=ce.MINIMUM_DIMENSION){const m=i.getMatrix();let p=c>>ce.BLOCK_SIZE_POWER;(c&ce.BLOCK_SIZE_MASK)!==0&&p++;let v=u>>ce.BLOCK_SIZE_POWER;(u&ce.BLOCK_SIZE_MASK)!==0&&v++;const N=ce.calculateBlackPoints(m,p,v,c,u),_=new ie(c,u);ce.calculateThresholdForBlock(m,p,v,c,u,N,_),this.matrix=_}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(i){return new ce(i)}static calculateThresholdForBlock(i,c,u,m,p,v,N){const _=p-ce.BLOCK_SIZE,O=m-ce.BLOCK_SIZE;for(let V=0;V<u;V++){let ee=V<<ce.BLOCK_SIZE_POWER;ee>_&&(ee=_);const ue=ce.cap(V,2,u-3);for(let je=0;je<c;je++){let De=je<<ce.BLOCK_SIZE_POWER;De>O&&(De=O);const Me=ce.cap(je,2,c-3);let Ue=0;for(let ht=-2;ht<=2;ht++){const gt=v[ue+ht];Ue+=gt[Me-2]+gt[Me-1]+gt[Me]+gt[Me+1]+gt[Me+2]}const Ke=Ue/25;ce.thresholdBlock(i,De,ee,Ke,m,N)}}}static cap(i,c,u){return i<c?c:i>u?u:i}static thresholdBlock(i,c,u,m,p,v){for(let N=0,_=u*p+c;N<ce.BLOCK_SIZE;N++,_+=p)for(let O=0;O<ce.BLOCK_SIZE;O++)(i[_+O]&255)<=m&&v.set(c+O,u+N)}static calculateBlackPoints(i,c,u,m,p){const v=p-ce.BLOCK_SIZE,N=m-ce.BLOCK_SIZE,_=new Array(u);for(let O=0;O<u;O++){_[O]=new Int32Array(c);let V=O<<ce.BLOCK_SIZE_POWER;V>v&&(V=v);for(let ee=0;ee<c;ee++){let ue=ee<<ce.BLOCK_SIZE_POWER;ue>N&&(ue=N);let je=0,De=255,Me=0;for(let Ke=0,ht=V*m+ue;Ke<ce.BLOCK_SIZE;Ke++,ht+=m){for(let gt=0;gt<ce.BLOCK_SIZE;gt++){const ft=i[ht+gt]&255;je+=ft,ft<De&&(De=ft),ft>Me&&(Me=ft)}if(Me-De>ce.MIN_DYNAMIC_RANGE)for(Ke++,ht+=m;Ke<ce.BLOCK_SIZE;Ke++,ht+=m)for(let gt=0;gt<ce.BLOCK_SIZE;gt++)je+=i[ht+gt]&255}let Ue=je>>ce.BLOCK_SIZE_POWER*2;if(Me-De<=ce.MIN_DYNAMIC_RANGE&&(Ue=De/2,O>0&&ee>0)){const Ke=(_[O-1][ee]+2*_[O][ee-1]+_[O-1][ee-1])/4;De<Ke&&(Ue=Ke)}_[O][ee]=Ue}}return _}}ce.BLOCK_SIZE_POWER=3,ce.BLOCK_SIZE=1<<ce.BLOCK_SIZE_POWER,ce.BLOCK_SIZE_MASK=ce.BLOCK_SIZE-1,ce.MINIMUM_DIMENSION=ce.BLOCK_SIZE*5,ce.MIN_DYNAMIC_RANGE=24;class pe{constructor(i,c){this.width=i,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(i,c,u,m){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const i=new Uint8ClampedArray(this.width);let c=new se;for(let u=0;u<this.height;u++){const m=this.getRow(u,i);for(let p=0;p<this.width;p++){const v=m[p]&255;let N;v<64?N="#":v<128?N="+":v<192?N=".":N=" ",c.append(N)}c.append(`
`)}return c.toString()}}class me extends pe{constructor(i){super(i.getWidth(),i.getHeight()),this.delegate=i}getRow(i,c){const u=this.delegate.getRow(i,c),m=this.getWidth();for(let p=0;p<m;p++)u[p]=255-(u[p]&255);return u}getMatrix(){const i=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(c);for(let m=0;m<c;m++)u[m]=255-(i[m]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(i,c,u,m){return new me(this.delegate.crop(i,c,u,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new me(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new me(this.delegate.rotateCounterClockwise45())}}class le extends pe{constructor(i){super(i.width,i.height),this.canvas=i,this.tempCanvasElement=null,this.buffer=le.makeBufferFromCanvasImageData(i)}static makeBufferFromCanvasImageData(i){const c=i.getContext("2d").getImageData(0,0,i.width,i.height);return le.toGrayscaleBuffer(c.data,i.width,i.height)}static toGrayscaleBuffer(i,c,u){const m=new Uint8ClampedArray(c*u);for(let p=0,v=0,N=i.length;p<N;p+=4,v++){let _;if(i[p+3]===0)_=255;else{const V=i[p],ee=i[p+1],ue=i[p+2];_=306*V+601*ee+117*ue+512>>10}m[v]=_}return m}getRow(i,c){if(i<0||i>=this.getHeight())throw new k("Requested row is outside the image: "+i);const u=this.getWidth(),m=i*u;return c===null?c=this.buffer.slice(m,m+u):(c.length<u&&(c=new Uint8ClampedArray(u)),c.set(this.buffer.slice(m,m+u))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(i,c,u,m){return super.crop(i,c,u,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const i=this.canvas.ownerDocument.createElement("canvas");i.width=this.canvas.width,i.height=this.canvas.height,this.tempCanvasElement=i}return this.tempCanvasElement}rotate(i){const c=this.getTempCanvasElement(),u=c.getContext("2d"),m=i*le.DEGREE_TO_RADIANS,p=this.canvas.width,v=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(m))*p+Math.abs(Math.sin(m))*v),_=Math.ceil(Math.abs(Math.sin(m))*p+Math.abs(Math.cos(m))*v);return c.width=N,c.height=_,u.translate(N/2,_/2),u.rotate(m),u.drawImage(this.canvas,p/-2,v/-2),this.buffer=le.makeBufferFromCanvasImageData(c),this}invert(){return new me(this)}}le.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(i,c,u){this.deviceId=i,this.label=c,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var W=(globalThis||Cu||self||window||void 0)&&(globalThis||Cu||self||window||void 0).__awaiter||function(J,i,c,u){function m(p){return p instanceof c?p:new c(function(v){v(p)})}return new(c||(c=Promise))(function(p,v){function N(V){try{O(u.next(V))}catch(ee){v(ee)}}function _(V){try{O(u.throw(V))}catch(ee){v(ee)}}function O(V){V.done?p(V.value):m(V.value).then(N,_)}O((u=u.apply(J,i||[])).next())})};class K{constructor(i,c=500,u){this.reader=i,this.timeBetweenScansMillis=c,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(i){this._timeBetweenDecodingAttempts=i<0?0:i}set hints(i){this._hints=i||null}get hints(){return this._hints}listVideoInputDevices(){return W(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const i=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const u of i){const m=u.kind==="video"?"videoinput":u.kind;if(m!=="videoinput")continue;const p=u.deviceId||u.id,v=u.label||`Video device ${c.length+1}`,N=u.groupId,_={deviceId:p,label:v,kind:m,groupId:N};c.push(_)}return c})}getVideoInputDevices(){return W(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new X(c.deviceId,c.label))})}findDeviceById(i){return W(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(u=>u.deviceId===i):null})}decodeFromInputVideoDevice(i,c){return W(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(i,c)})}decodeOnceFromVideoDevice(i,c){return W(this,void 0,void 0,function*(){this.reset();let u;i?u={deviceId:{exact:i}}:u={facingMode:"environment"};const m={video:u};return yield this.decodeOnceFromConstraints(m,c)})}decodeOnceFromConstraints(i,c){return W(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeOnceFromStream(u,c)})}decodeOnceFromStream(i,c){return W(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(i,c);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(i,c,u){return W(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(i,c,u)})}decodeFromVideoDevice(i,c,u){return W(this,void 0,void 0,function*(){let m;i?m={deviceId:{exact:i}}:m={facingMode:"environment"};const p={video:m};return yield this.decodeFromConstraints(p,c,u)})}decodeFromConstraints(i,c,u){return W(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(i);return yield this.decodeFromStream(m,c,u)})}decodeFromStream(i,c,u){return W(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(i,c);return yield this.decodeContinuously(m,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(i,c){return W(this,void 0,void 0,function*(){const u=this.prepareVideoElement(c);return this.addVideoSource(u,i),this.videoElement=u,this.stream=i,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(i){return new Promise((c,u)=>this.playVideoOnLoad(i,()=>c()))}playVideoOnLoad(i,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(i),i.addEventListener("ended",this.videoEndedListener),i.addEventListener("canplay",this.videoCanPlayListener),i.addEventListener("playing",c),this.tryPlayVideo(i)}isVideoPlaying(i){return i.currentTime>0&&!i.paused&&!i.ended&&i.readyState>2}tryPlayVideo(i){return W(this,void 0,void 0,function*(){if(this.isVideoPlaying(i)){console.warn("Trying to play video that is already playing.");return}try{yield i.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(i,c){const u=document.getElementById(i);if(!u)throw new w(`element with id '${i}' not found`);if(u.nodeName.toLowerCase()!==c.toLowerCase())throw new w(`element with id '${i}' must be an ${c} element`);return u}decodeFromImage(i,c){if(!i&&!c)throw new w("either imageElement with a src set or an url must be provided");return c&&!i?this.decodeFromImageUrl(c):this.decodeFromImageElement(i)}decodeFromVideo(i,c){if(!i&&!c)throw new w("Either an element with a src set or an URL must be provided");return c&&!i?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(i)}decodeFromVideoContinuously(i,c,u){if(i===void 0&&c===void 0)throw new w("Either an element with a src set or an URL must be provided");return c&&!i?this.decodeFromVideoUrlContinuously(c,u):this.decodeFromVideoElementContinuously(i,u)}decodeFromImageElement(i){if(!i)throw new w("An image element must be provided.");this.reset();const c=this.prepareImageElement(i);this.imageElement=c;let u;return this.isImageLoaded(c)?u=this.decodeOnce(c,!1,!0):u=this._decodeOnLoadImage(c),u}decodeFromVideoElement(i){const c=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(i,c){const u=this._decodeFromVideoElementSetup(i);return this._decodeOnLoadVideoContinuously(u,c)}_decodeFromVideoElementSetup(i){if(!i)throw new w("A video element must be provided.");this.reset();const c=this.prepareVideoElement(i);return this.videoElement=c,c}decodeFromImageUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const u=this._decodeOnLoadImage(c);return c.src=i,u}decodeFromVideoUrl(i){if(!i)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),u=this.decodeFromVideoElement(c);return c.src=i,u}decodeFromVideoUrlContinuously(i,c){if(!i)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(u,c);return u.src=i,m}_decodeOnLoadImage(i){return new Promise((c,u)=>{this.imageLoadedListener=()=>this.decodeOnce(i,!1,!0).then(c,u),i.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(i){return W(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(i),yield this.decodeOnce(i)})}_decodeOnLoadVideoContinuously(i,c){return W(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(i),this.decodeContinuously(i,c)})}isImageLoaded(i){return!(!i.complete||i.naturalWidth===0)}prepareImageElement(i){let c;return typeof i>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof i=="string"&&(c=this.getMediaElement(i,"img")),i instanceof HTMLImageElement&&(c=i),c}prepareVideoElement(i){let c;return!i&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof i=="string"&&(c=this.getMediaElement(i,"video")),i instanceof HTMLVideoElement&&(c=i),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(i,c=!0,u=!0){this._stopAsyncDecode=!1;const m=(p,v)=>{if(this._stopAsyncDecode){v(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(i);p(N)}catch(N){const _=c&&N instanceof Y,V=(N instanceof S||N instanceof B)&&u;if(_||V)return setTimeout(m,this._timeBetweenDecodingAttempts,p,v);v(N)}};return new Promise((p,v)=>m(p,v))}decodeContinuously(i,c){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(i);c(m,null),setTimeout(u,this.timeBetweenScansMillis)}catch(m){c(null,m);const p=m instanceof S||m instanceof B,v=m instanceof Y;(p||v)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(i){const c=this.createBinaryBitmap(i);return this.decodeBitmap(c)}_isHTMLVideoElement(i){return i.videoWidth!==0}drawFrameOnCanvas(i,c,u){c||(c={sx:0,sy:0,sWidth:i.videoWidth,sHeight:i.videoHeight,dx:0,dy:0,dWidth:i.videoWidth,dHeight:i.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(i,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(i,c,u=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:i.naturalWidth,sHeight:i.naturalHeight,dx:0,dy:0,dWidth:i.naturalWidth,dHeight:i.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(i,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(i){this.getCaptureCanvasContext(i),this._isHTMLVideoElement(i)?this.drawFrameOnCanvas(i):this.drawImageOnCanvas(i);const c=this.getCaptureCanvas(i),u=new le(c),m=new ce(u);return new E(m)}getCaptureCanvasContext(i){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(i).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(i){if(!this.captureCanvas){const c=this.createCaptureCanvas(i);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(i){return this.reader.decode(i,this._hints)}createCaptureCanvas(i){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let u,m;return typeof i<"u"&&(i instanceof HTMLVideoElement?(u=i.videoWidth,m=i.videoHeight):i instanceof HTMLImageElement&&(u=i.naturalWidth||i.width,m=i.naturalHeight||i.height)),c.style.width=u+"px",c.style.height=m+"px",c.width=u,c.height=m,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(i=>i.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(i,c){try{i.srcObject=c}catch{i.src=URL.createObjectURL(c)}}cleanVideoSource(i){try{i.srcObject=null}catch{i.src=""}this.videoElement.removeAttribute("src")}}class ae{constructor(i,c,u=c==null?0:8*c.length,m,p,v=A.currentTimeMillis()){this.text=i,this.rawBytes=c,this.numBits=u,this.resultPoints=m,this.format=p,this.timestamp=v,this.text=i,this.rawBytes=c,u==null?this.numBits=c==null?0:8*c.length:this.numBits=u,this.resultPoints=m,this.format=p,this.resultMetadata=null,v==null?this.timestamp=A.currentTimeMillis():this.timestamp=v}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(i,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(i,c)}putAllMetadata(i){i!==null&&(this.resultMetadata===null?this.resultMetadata=i:this.resultMetadata=new Map(i))}addResultPoints(i){const c=this.resultPoints;if(c===null)this.resultPoints=i;else if(i!==null&&i.length>0){const u=new Array(c.length+i.length);A.arraycopy(c,0,u,0,c.length),A.arraycopy(i,0,u,c.length,i.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var oe;(function(J){J[J.AZTEC=0]="AZTEC",J[J.CODABAR=1]="CODABAR",J[J.CODE_39=2]="CODE_39",J[J.CODE_93=3]="CODE_93",J[J.CODE_128=4]="CODE_128",J[J.DATA_MATRIX=5]="DATA_MATRIX",J[J.EAN_8=6]="EAN_8",J[J.EAN_13=7]="EAN_13",J[J.ITF=8]="ITF",J[J.MAXICODE=9]="MAXICODE",J[J.PDF_417=10]="PDF_417",J[J.QR_CODE=11]="QR_CODE",J[J.RSS_14=12]="RSS_14",J[J.RSS_EXPANDED=13]="RSS_EXPANDED",J[J.UPC_A=14]="UPC_A",J[J.UPC_E=15]="UPC_E",J[J.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(oe||(oe={}));var re=oe,Re;(function(J){J[J.OTHER=0]="OTHER",J[J.ORIENTATION=1]="ORIENTATION",J[J.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",J[J.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",J[J.ISSUE_NUMBER=4]="ISSUE_NUMBER",J[J.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",J[J.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",J[J.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",J[J.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",J[J.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",J[J.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var ke=Re;class Pe{constructor(i,c,u,m,p=-1,v=-1){this.rawBytes=i,this.text=c,this.byteSegments=u,this.ecLevel=m,this.structuredAppendSequenceNumber=p,this.structuredAppendParity=v,this.numBits=i==null?0:8*i.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(i){this.numBits=i}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(i){this.errorsCorrected=i}getErasures(){return this.erasures}setErasures(i){this.erasures=i}getOther(){return this.other}setOther(i){this.other=i}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Oe{exp(i){return this.expTable[i]}log(i){if(i===0)throw new k;return this.logTable[i]}static addOrSubtract(i,c){return i^c}}class nt{constructor(i,c){if(c.length===0)throw new k;this.field=i;const u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);const c=this.coefficients;let u;if(i===1){u=0;for(let v=0,N=c.length;v!==N;v++){const _=c[v];u=Oe.addOrSubtract(u,_)}return u}u=c[0];const m=c.length,p=this.field;for(let v=1;v<m;v++)u=Oe.addOrSubtract(p.multiply(i,u),c[v]);return u}addOrSubtract(i){if(!this.field.equals(i.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero())return i;if(i.isZero())return this;let c=this.coefficients,u=i.coefficients;if(c.length>u.length){const v=c;c=u,u=v}let m=new Int32Array(u.length);const p=u.length-c.length;A.arraycopy(u,0,m,0,p);for(let v=p;v<u.length;v++)m[v]=Oe.addOrSubtract(c[v-p],u[v]);return new nt(this.field,m)}multiply(i){if(!this.field.equals(i.field))throw new k("GenericGFPolys do not have same GenericGF field");if(this.isZero()||i.isZero())return this.field.getZero();const c=this.coefficients,u=c.length,m=i.coefficients,p=m.length,v=new Int32Array(u+p-1),N=this.field;for(let _=0;_<u;_++){const O=c[_];for(let V=0;V<p;V++)v[_+V]=Oe.addOrSubtract(v[_+V],N.multiply(O,m[V]))}return new nt(N,v)}multiplyScalar(i){if(i===0)return this.field.getZero();if(i===1)return this;const c=this.coefficients.length,u=this.field,m=new Int32Array(c),p=this.coefficients;for(let v=0;v<c;v++)m[v]=u.multiply(p[v],i);return new nt(u,m)}multiplyByMonomial(i,c){if(i<0)throw new k;if(c===0)return this.field.getZero();const u=this.coefficients,m=u.length,p=new Int32Array(m+i),v=this.field;for(let N=0;N<m;N++)p[N]=v.multiply(u[N],c);return new nt(v,p)}divide(i){if(!this.field.equals(i.field))throw new k("GenericGFPolys do not have same GenericGF field");if(i.isZero())throw new k("Divide by 0");const c=this.field;let u=c.getZero(),m=this;const p=i.getCoefficient(i.getDegree()),v=c.inverse(p);for(;m.getDegree()>=i.getDegree()&&!m.isZero();){const N=m.getDegree()-i.getDegree(),_=c.multiply(m.getCoefficient(m.getDegree()),v),O=i.multiplyByMonomial(N,_),V=c.buildMonomial(N,_);u=u.addOrSubtract(V),m=m.addOrSubtract(O)}return[u,m]}toString(){let i="";for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);if(u!==0){if(u<0?(i+=" - ",u=-u):i.length>0&&(i+=" + "),c===0||u!==1){const m=this.field.log(u);m===0?i+="1":m===1?i+="a":(i+="a^",i+=m)}c!==0&&(c===1?i+="x":(i+="x^",i+=c))}}return i}}class we extends g{}we.kind="ArithmeticException";class Ae extends Oe{constructor(i,c,u){super(),this.primitive=i,this.size=c,this.generatorBase=u;const m=new Int32Array(c);let p=1;for(let N=0;N<c;N++)m[N]=p,p*=2,p>=c&&(p^=i,p&=c-1);this.expTable=m;const v=new Int32Array(c);for(let N=0;N<c-1;N++)v[m[N]]=N;this.logTable=v,this.zero=new nt(this,Int32Array.from([0])),this.one=new nt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,c){if(i<0)throw new k;if(c===0)return this.zero;const u=new Int32Array(i+1);return u[0]=c,new nt(this,u)}inverse(i){if(i===0)throw new we;return this.expTable[this.size-this.logTable[i]-1]}multiply(i,c){return i===0||c===0?0:this.expTable[(this.logTable[i]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(i){return i===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class Le extends g{}Le.kind="ReedSolomonException";class Ee extends g{}Ee.kind="IllegalStateException";class Je{constructor(i){this.field=i}decode(i,c){const u=this.field,m=new nt(u,i),p=new Int32Array(c);let v=!0;for(let je=0;je<c;je++){const De=m.evaluateAt(u.exp(je+u.getGeneratorBase()));p[p.length-1-je]=De,De!==0&&(v=!1)}if(v)return;const N=new nt(u,p),_=this.runEuclideanAlgorithm(u.buildMonomial(c,1),N,c),O=_[0],V=_[1],ee=this.findErrorLocations(O),ue=this.findErrorMagnitudes(V,ee);for(let je=0;je<ee.length;je++){const De=i.length-1-u.log(ee[je]);if(De<0)throw new Le("Bad error location");i[De]=Ae.addOrSubtract(i[De],ue[je])}}runEuclideanAlgorithm(i,c,u){if(i.getDegree()<c.getDegree()){const je=i;i=c,c=je}const m=this.field;let p=i,v=c,N=m.getZero(),_=m.getOne();for(;v.getDegree()>=(u/2|0);){let je=p,De=N;if(p=v,N=_,p.isZero())throw new Le("r_{i-1} was zero");v=je;let Me=m.getZero();const Ue=p.getCoefficient(p.getDegree()),Ke=m.inverse(Ue);for(;v.getDegree()>=p.getDegree()&&!v.isZero();){const ht=v.getDegree()-p.getDegree(),gt=m.multiply(v.getCoefficient(v.getDegree()),Ke);Me=Me.addOrSubtract(m.buildMonomial(ht,gt)),v=v.addOrSubtract(p.multiplyByMonomial(ht,gt))}if(_=Me.multiply(N).addOrSubtract(De),v.getDegree()>=p.getDegree())throw new Ee("Division algorithm failed to reduce polynomial?")}const O=_.getCoefficient(0);if(O===0)throw new Le("sigmaTilde(0) was zero");const V=m.inverse(O),ee=_.multiplyScalar(V),ue=v.multiplyScalar(V);return[ee,ue]}findErrorLocations(i){const c=i.getDegree();if(c===1)return Int32Array.from([i.getCoefficient(1)]);const u=new Int32Array(c);let m=0;const p=this.field;for(let v=1;v<p.getSize()&&m<c;v++)i.evaluateAt(v)===0&&(u[m]=p.inverse(v),m++);if(m!==c)throw new Le("Error locator degree does not match number of roots");return u}findErrorMagnitudes(i,c){const u=c.length,m=new Int32Array(u),p=this.field;for(let v=0;v<u;v++){const N=p.inverse(c[v]);let _=1;for(let O=0;O<u;O++)if(v!==O){const V=p.multiply(c[O],N),ee=(V&1)===0?V|1:V&-2;_=p.multiply(_,ee)}m[v]=p.multiply(i.evaluateAt(N),p.inverse(_)),p.getGeneratorBase()!==0&&(m[v]=p.multiply(m[v],N))}return m}}var be;(function(J){J[J.UPPER=0]="UPPER",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.DIGIT=3]="DIGIT",J[J.PUNCT=4]="PUNCT",J[J.BINARY=5]="BINARY"})(be||(be={}));class Be{decode(i){this.ddata=i;let c=i.getBits(),u=this.extractBits(c),m=this.correctBits(u),p=Be.convertBoolArrayToByteArray(m),v=Be.getEncodedData(m),N=new Pe(p,v,null,null);return N.setNumBits(m.length),N}static highLevelDecode(i){return this.getEncodedData(i)}static getEncodedData(i){let c=i.length,u=be.UPPER,m=be.UPPER,p="",v=0;for(;v<c;)if(m===be.BINARY){if(c-v<5)break;let N=Be.readCode(i,v,5);if(v+=5,N===0){if(c-v<11)break;N=Be.readCode(i,v,11)+31,v+=11}for(let _=0;_<N;_++){if(c-v<8){v=c;break}const O=Be.readCode(i,v,8);p+=G.castAsNonUtf8Char(O),v+=8}m=u}else{let N=m===be.DIGIT?4:5;if(c-v<N)break;let _=Be.readCode(i,v,N);v+=N;let O=Be.getCharacter(m,_);O.startsWith("CTRL_")?(u=m,m=Be.getTable(O.charAt(5)),O.charAt(6)==="L"&&(u=m)):(p+=O,m=u)}return p}static getTable(i){switch(i){case"L":return be.LOWER;case"P":return be.PUNCT;case"M":return be.MIXED;case"D":return be.DIGIT;case"B":return be.BINARY;case"U":default:return be.UPPER}}static getCharacter(i,c){switch(i){case be.UPPER:return Be.UPPER_TABLE[c];case be.LOWER:return Be.LOWER_TABLE[c];case be.MIXED:return Be.MIXED_TABLE[c];case be.PUNCT:return Be.PUNCT_TABLE[c];case be.DIGIT:return Be.DIGIT_TABLE[c];default:throw new Ee("Bad table")}}correctBits(i){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=Ae.AZTEC_DATA_10):(u=12,c=Ae.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),p=i.length/u;if(p<m)throw new B;let v=i.length%u,N=new Int32Array(p);for(let ue=0;ue<p;ue++,v+=u)N[ue]=Be.readCode(i,v,u);try{new Je(c).decode(N,p-m)}catch(ue){throw new B(ue)}let _=(1<<u)-1,O=0;for(let ue=0;ue<m;ue++){let je=N[ue];if(je===0||je===_)throw new B;(je===1||je===_-1)&&O++}let V=new Array(m*u-O),ee=0;for(let ue=0;ue<m;ue++){let je=N[ue];if(je===1||je===_-1)V.fill(je>1,ee,ee+u-1),ee+=u-1;else for(let De=u-1;De>=0;--De)V[ee++]=(je&1<<De)!==0}return V}extractBits(i){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),m=(c?11:14)+u*4,p=new Int32Array(m),v=new Array(this.totalBitsInLayer(u,c));if(c)for(let N=0;N<p.length;N++)p[N]=N;else{let N=m+1+2*T.truncDivision(T.truncDivision(m,2)-1,15),_=m/2,O=T.truncDivision(N,2);for(let V=0;V<_;V++){let ee=V+T.truncDivision(V,15);p[_-V-1]=O-ee-1,p[_+V]=O+ee+1}}for(let N=0,_=0;N<u;N++){let O=(u-N)*4+(c?9:12),V=N*2,ee=m-1-V;for(let ue=0;ue<O;ue++){let je=ue*2;for(let De=0;De<2;De++)v[_+je+De]=i.get(p[V+De],p[V+ue]),v[_+2*O+je+De]=i.get(p[V+ue],p[ee-De]),v[_+4*O+je+De]=i.get(p[ee-De],p[ee-ue]),v[_+6*O+je+De]=i.get(p[ee-ue],p[V+De])}_+=O*8}return v}static readCode(i,c,u){let m=0;for(let p=c;p<c+u;p++)m<<=1,i[p]&&(m|=1);return m}static readByte(i,c){let u=i.length-c;return u>=8?Be.readCode(i,c,8):Be.readCode(i,c,u)<<8-u}static convertBoolArrayToByteArray(i){let c=new Uint8Array((i.length+7)/8);for(let u=0;u<c.length;u++)c[u]=Be.readByte(i,8*u);return c}totalBitsInLayer(i,c){return((c?88:112)+16*i)*i}}Be.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Be.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Be.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Be.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Be.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class fe{constructor(){}static round(i){return i===NaN?0:i<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:i>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:i+(i<0?-.5:.5)|0}static distance(i,c,u,m){const p=i-u,v=c-m;return Math.sqrt(p*p+v*v)}static sum(i){let c=0;for(let u=0,m=i.length;u!==m;u++){const p=i[u];c+=p}return c}}class at{static floatToIntBits(i){return i}}at.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ce{constructor(i,c){this.x=i,this.y=c}getX(){return this.x}getY(){return this.y}equals(i){if(i instanceof Ce){const c=i;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*at.floatToIntBits(this.x)+at.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(i){const c=this.distance(i[0],i[1]),u=this.distance(i[1],i[2]),m=this.distance(i[0],i[2]);let p,v,N;if(u>=c&&u>=m?(v=i[0],p=i[1],N=i[2]):m>=u&&m>=c?(v=i[1],p=i[0],N=i[2]):(v=i[2],p=i[0],N=i[1]),this.crossProductZ(p,v,N)<0){const _=p;p=N,N=_}i[0]=p,i[1]=v,i[2]=N}static distance(i,c){return fe.distance(i.x,i.y,c.x,c.y)}static crossProductZ(i,c,u){const m=c.x,p=c.y;return(u.x-m)*(i.y-p)-(u.y-p)*(i.x-m)}}class wt{constructor(i,c){this.bits=i,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class ut extends wt{constructor(i,c,u,m,p){super(i,c),this.compact=u,this.nbDatablocks=m,this.nbLayers=p}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ct{constructor(i,c,u,m){this.image=i,this.height=i.getHeight(),this.width=i.getWidth(),c==null&&(c=Ct.INIT_SIZE),u==null&&(u=i.getWidth()/2|0),m==null&&(m=i.getHeight()/2|0);const p=c/2|0;if(this.leftInit=u-p,this.rightInit=u+p,this.upInit=m-p,this.downInit=m+p,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let i=this.leftInit,c=this.rightInit,u=this.upInit,m=this.downInit,p=!1,v=!0,N=!1,_=!1,O=!1,V=!1,ee=!1;const ue=this.width,je=this.height;for(;v;){v=!1;let De=!0;for(;(De||!_)&&c<ue;)De=this.containsBlackPoint(u,m,c,!1),De?(c++,v=!0,_=!0):_||c++;if(c>=ue){p=!0;break}let Me=!0;for(;(Me||!O)&&m<je;)Me=this.containsBlackPoint(i,c,m,!0),Me?(m++,v=!0,O=!0):O||m++;if(m>=je){p=!0;break}let Ue=!0;for(;(Ue||!V)&&i>=0;)Ue=this.containsBlackPoint(u,m,i,!1),Ue?(i--,v=!0,V=!0):V||i--;if(i<0){p=!0;break}let Ke=!0;for(;(Ke||!ee)&&u>=0;)Ke=this.containsBlackPoint(i,c,u,!0),Ke?(u--,v=!0,ee=!0):ee||u--;if(u<0){p=!0;break}v&&(N=!0)}if(!p&&N){const De=c-i;let Me=null;for(let gt=1;Me===null&&gt<De;gt++)Me=this.getBlackPointOnSegment(i,m-gt,i+gt,m);if(Me==null)throw new Y;let Ue=null;for(let gt=1;Ue===null&&gt<De;gt++)Ue=this.getBlackPointOnSegment(i,u+gt,i+gt,u);if(Ue==null)throw new Y;let Ke=null;for(let gt=1;Ke===null&&gt<De;gt++)Ke=this.getBlackPointOnSegment(c,u+gt,c-gt,u);if(Ke==null)throw new Y;let ht=null;for(let gt=1;ht===null&&gt<De;gt++)ht=this.getBlackPointOnSegment(c,m-gt,c-gt,m);if(ht==null)throw new Y;return this.centerEdges(ht,Me,Ke,Ue)}else throw new Y}getBlackPointOnSegment(i,c,u,m){const p=fe.round(fe.distance(i,c,u,m)),v=(u-i)/p,N=(m-c)/p,_=this.image;for(let O=0;O<p;O++){const V=fe.round(i+O*v),ee=fe.round(c+O*N);if(_.get(V,ee))return new Ce(V,ee)}return null}centerEdges(i,c,u,m){const p=i.getX(),v=i.getY(),N=c.getX(),_=c.getY(),O=u.getX(),V=u.getY(),ee=m.getX(),ue=m.getY(),je=Ct.CORR;return p<this.width/2?[new Ce(ee-je,ue+je),new Ce(N+je,_+je),new Ce(O-je,V-je),new Ce(p+je,v-je)]:[new Ce(ee+je,ue+je),new Ce(N+je,_-je),new Ce(O-je,V+je),new Ce(p-je,v-je)]}containsBlackPoint(i,c,u,m){const p=this.image;if(m){for(let v=i;v<=c;v++)if(p.get(v,u))return!0}else for(let v=i;v<=c;v++)if(p.get(u,v))return!0;return!1}}Ct.INIT_SIZE=10,Ct.CORR=1;class Mt{static checkAndNudgePoints(i,c){const u=i.getWidth(),m=i.getHeight();let p=!0;for(let v=0;v<c.length&&p;v+=2){const N=Math.floor(c[v]),_=Math.floor(c[v+1]);if(N<-1||N>u||_<-1||_>m)throw new Y;p=!1,N===-1?(c[v]=0,p=!0):N===u&&(c[v]=u-1,p=!0),_===-1?(c[v+1]=0,p=!0):_===m&&(c[v+1]=m-1,p=!0)}p=!0;for(let v=c.length-2;v>=0&&p;v-=2){const N=Math.floor(c[v]),_=Math.floor(c[v+1]);if(N<-1||N>u||_<-1||_>m)throw new Y;p=!1,N===-1?(c[v]=0,p=!0):N===u&&(c[v]=u-1,p=!0),_===-1?(c[v+1]=0,p=!0):_===m&&(c[v+1]=m-1,p=!0)}}}class qt{constructor(i,c,u,m,p,v,N,_,O){this.a11=i,this.a21=c,this.a31=u,this.a12=m,this.a22=p,this.a32=v,this.a13=N,this.a23=_,this.a33=O}static quadrilateralToQuadrilateral(i,c,u,m,p,v,N,_,O,V,ee,ue,je,De,Me,Ue){const Ke=qt.quadrilateralToSquare(i,c,u,m,p,v,N,_);return qt.squareToQuadrilateral(O,V,ee,ue,je,De,Me,Ue).times(Ke)}transformPoints(i){const c=i.length,u=this.a11,m=this.a12,p=this.a13,v=this.a21,N=this.a22,_=this.a23,O=this.a31,V=this.a32,ee=this.a33;for(let ue=0;ue<c;ue+=2){const je=i[ue],De=i[ue+1],Me=p*je+_*De+ee;i[ue]=(u*je+v*De+O)/Me,i[ue+1]=(m*je+N*De+V)/Me}}transformPointsWithValues(i,c){const u=this.a11,m=this.a12,p=this.a13,v=this.a21,N=this.a22,_=this.a23,O=this.a31,V=this.a32,ee=this.a33,ue=i.length;for(let je=0;je<ue;je++){const De=i[je],Me=c[je],Ue=p*De+_*Me+ee;i[je]=(u*De+v*Me+O)/Ue,c[je]=(m*De+N*Me+V)/Ue}}static squareToQuadrilateral(i,c,u,m,p,v,N,_){const O=i-u+p-N,V=c-m+v-_;if(O===0&&V===0)return new qt(u-i,p-u,i,m-c,v-m,c,0,0,1);{const ee=u-p,ue=N-p,je=m-v,De=_-v,Me=ee*De-ue*je,Ue=(O*De-ue*V)/Me,Ke=(ee*V-O*je)/Me;return new qt(u-i+Ue*u,N-i+Ke*N,i,m-c+Ue*m,_-c+Ke*_,c,Ue,Ke,1)}}static quadrilateralToSquare(i,c,u,m,p,v,N,_){return qt.squareToQuadrilateral(i,c,u,m,p,v,N,_).buildAdjoint()}buildAdjoint(){return new qt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(i){return new qt(this.a11*i.a11+this.a21*i.a12+this.a31*i.a13,this.a11*i.a21+this.a21*i.a22+this.a31*i.a23,this.a11*i.a31+this.a21*i.a32+this.a31*i.a33,this.a12*i.a11+this.a22*i.a12+this.a32*i.a13,this.a12*i.a21+this.a22*i.a22+this.a32*i.a23,this.a12*i.a31+this.a22*i.a32+this.a32*i.a33,this.a13*i.a11+this.a23*i.a12+this.a33*i.a13,this.a13*i.a21+this.a23*i.a22+this.a33*i.a23,this.a13*i.a31+this.a23*i.a32+this.a33*i.a33)}}class ur extends Mt{sampleGrid(i,c,u,m,p,v,N,_,O,V,ee,ue,je,De,Me,Ue,Ke,ht,gt){const ft=qt.quadrilateralToQuadrilateral(m,p,v,N,_,O,V,ee,ue,je,De,Me,Ue,Ke,ht,gt);return this.sampleGridWithTransform(i,c,u,ft)}sampleGridWithTransform(i,c,u,m){if(c<=0||u<=0)throw new Y;const p=new ie(c,u),v=new Float32Array(2*c);for(let N=0;N<u;N++){const _=v.length,O=N+.5;for(let V=0;V<_;V+=2)v[V]=V/2+.5,v[V+1]=O;m.transformPoints(v),Mt.checkAndNudgePoints(i,v);try{for(let V=0;V<_;V+=2)i.get(Math.floor(v[V]),Math.floor(v[V+1]))&&p.set(V/2,N)}catch{throw new Y}}return p}}class Ut{static setGridSampler(i){Ut.gridSampler=i}static getInstance(){return Ut.gridSampler}}Ut.gridSampler=new ur;class Yt{constructor(i,c){this.x=i,this.y=c}toResultPoint(){return new Ce(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class It{constructor(i){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=i}detect(){return this.detectMirror(!1)}detectMirror(i){let c=this.getMatrixCenter(),u=this.getBullsEyeCorners(c);if(i){let v=u[0];u[0]=u[2],u[2]=v}this.extractParameters(u);let m=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),p=this.getMatrixCornerPoints(u);return new ut(m,p,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(i){if(!this.isValidPoint(i[0])||!this.isValidPoint(i[1])||!this.isValidPoint(i[2])||!this.isValidPoint(i[3]))throw new Y;let c=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(i[0],i[1],c),this.sampleLine(i[1],i[2],c),this.sampleLine(i[2],i[3],c),this.sampleLine(i[3],i[0],c)]);this.shift=this.getRotation(u,c);let m=0;for(let v=0;v<4;v++){let N=u[(this.shift+v)%4];this.compact?(m<<=7,m+=N>>1&127):(m<<=10,m+=(N>>2&992)+(N>>1&31))}let p=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(p>>6)+1,this.nbDataBlocks=(p&63)+1):(this.nbLayers=(p>>11)+1,this.nbDataBlocks=(p&2047)+1)}getRotation(i,c){let u=0;i.forEach((m,p,v)=>{let N=(m>>c-2<<1)+(m&1);u=(u<<3)+N}),u=((u&1)<<11)+(u>>1);for(let m=0;m<4;m++)if(T.bitCount(u^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new Y}getCorrectedParameterData(i,c){let u,m;c?(u=7,m=2):(u=10,m=4);let p=u-m,v=new Int32Array(u);for(let _=u-1;_>=0;--_)v[_]=i&15,i>>=4;try{new Je(Ae.AZTEC_PARAM).decode(v,p)}catch{throw new Y}let N=0;for(let _=0;_<m;_++)N=(N<<4)+v[_];return N}getBullsEyeCorners(i){let c=i,u=i,m=i,p=i,v=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ee=this.getFirstDifferent(c,v,1,-1),ue=this.getFirstDifferent(u,v,1,1),je=this.getFirstDifferent(m,v,-1,1),De=this.getFirstDifferent(p,v,-1,-1);if(this.nbCenterLayers>2){let Me=this.distancePoint(De,ee)*this.nbCenterLayers/(this.distancePoint(p,c)*(this.nbCenterLayers+2));if(Me<.75||Me>1.25||!this.isWhiteOrBlackRectangle(ee,ue,je,De))break}c=ee,u=ue,m=je,p=De,v=!v}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let N=new Ce(c.getX()+.5,c.getY()-.5),_=new Ce(u.getX()+.5,u.getY()+.5),O=new Ce(m.getX()-.5,m.getY()+.5),V=new Ce(p.getX()-.5,p.getY()-.5);return this.expandSquare([N,_,O,V],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let i,c,u,m;try{let N=new Ct(this.image).detect();i=N[0],c=N[1],u=N[2],m=N[3]}catch{let _=this.image.getWidth()/2,O=this.image.getHeight()/2;i=this.getFirstDifferent(new Yt(_+7,O-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Yt(_+7,O+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Yt(_-7,O+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new Yt(_-7,O-7),!1,-1,-1).toResultPoint()}let p=fe.round((i.getX()+m.getX()+c.getX()+u.getX())/4),v=fe.round((i.getY()+m.getY()+c.getY()+u.getY())/4);try{let N=new Ct(this.image,15,p,v).detect();i=N[0],c=N[1],u=N[2],m=N[3]}catch{i=this.getFirstDifferent(new Yt(p+7,v-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new Yt(p+7,v+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new Yt(p-7,v+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new Yt(p-7,v-7),!1,-1,-1).toResultPoint()}return p=fe.round((i.getX()+m.getX()+c.getX()+u.getX())/4),v=fe.round((i.getY()+m.getY()+c.getY()+u.getY())/4),new Yt(p,v)}getMatrixCornerPoints(i){return this.expandSquare(i,2*this.nbCenterLayers,this.getDimension())}sampleGrid(i,c,u,m,p){let v=Ut.getInstance(),N=this.getDimension(),_=N/2-this.nbCenterLayers,O=N/2+this.nbCenterLayers;return v.sampleGrid(i,N,N,_,_,O,_,O,O,_,O,c.getX(),c.getY(),u.getX(),u.getY(),m.getX(),m.getY(),p.getX(),p.getY())}sampleLine(i,c,u){let m=0,p=this.distanceResultPoint(i,c),v=p/u,N=i.getX(),_=i.getY(),O=v*(c.getX()-i.getX())/p,V=v*(c.getY()-i.getY())/p;for(let ee=0;ee<u;ee++)this.image.get(fe.round(N+ee*O),fe.round(_+ee*V))&&(m|=1<<u-ee-1);return m}isWhiteOrBlackRectangle(i,c,u,m){let p=3;i=new Yt(i.getX()-p,i.getY()+p),c=new Yt(c.getX()-p,c.getY()-p),u=new Yt(u.getX()+p,u.getY()-p),m=new Yt(m.getX()+p,m.getY()+p);let v=this.getColor(m,i);if(v===0)return!1;let N=this.getColor(i,c);return N!==v||(N=this.getColor(c,u),N!==v)?!1:(N=this.getColor(u,m),N===v)}getColor(i,c){let u=this.distancePoint(i,c),m=(c.getX()-i.getX())/u,p=(c.getY()-i.getY())/u,v=0,N=i.getX(),_=i.getY(),O=this.image.get(i.getX(),i.getY()),V=Math.ceil(u);for(let ue=0;ue<V;ue++)N+=m,_+=p,this.image.get(fe.round(N),fe.round(_))!==O&&v++;let ee=v/u;return ee>.1&&ee<.9?0:ee<=.1===O?1:-1}getFirstDifferent(i,c,u,m){let p=i.getX()+u,v=i.getY()+m;for(;this.isValid(p,v)&&this.image.get(p,v)===c;)p+=u,v+=m;for(p-=u,v-=m;this.isValid(p,v)&&this.image.get(p,v)===c;)p+=u;for(p-=u;this.isValid(p,v)&&this.image.get(p,v)===c;)v+=m;return v-=m,new Yt(p,v)}expandSquare(i,c,u){let m=u/(2*c),p=i[0].getX()-i[2].getX(),v=i[0].getY()-i[2].getY(),N=(i[0].getX()+i[2].getX())/2,_=(i[0].getY()+i[2].getY())/2,O=new Ce(N+m*p,_+m*v),V=new Ce(N-m*p,_-m*v);p=i[1].getX()-i[3].getX(),v=i[1].getY()-i[3].getY(),N=(i[1].getX()+i[3].getX())/2,_=(i[1].getY()+i[3].getY())/2;let ee=new Ce(N+m*p,_+m*v),ue=new Ce(N-m*p,_-m*v);return[O,ee,V,ue]}isValid(i,c){return i>=0&&i<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(i){let c=fe.round(i.getX()),u=fe.round(i.getY());return this.isValid(c,u)}distancePoint(i,c){return fe.distance(i.getX(),i.getY(),c.getX(),c.getY())}distanceResultPoint(i,c){return fe.distance(i.getX(),i.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class $e{decode(i,c=null){let u=null,m=new It(i.getBlackMatrix()),p=null,v=null;try{let V=m.detectMirror(!1);p=V.getPoints(),this.reportFoundResultPoints(c,p),v=new Be().decode(V)}catch(V){u=V}if(v==null)try{let V=m.detectMirror(!0);p=V.getPoints(),this.reportFoundResultPoints(c,p),v=new Be().decode(V)}catch(V){throw u??V}let N=new ae(v.getText(),v.getRawBytes(),v.getNumBits(),p,re.AZTEC,A.currentTimeMillis()),_=v.getByteSegments();_!=null&&N.putMetadata(ke.BYTE_SEGMENTS,_);let O=v.getECLevel();return O!=null&&N.putMetadata(ke.ERROR_CORRECTION_LEVEL,O),N}reportFoundResultPoints(i,c){if(i!=null){let u=i.get(U.NEED_RESULT_POINT_CALLBACK);u!=null&&c.forEach((m,p,v)=>{u.foundPossibleResultPoint(m)})}}reset(){}}class jt extends K{constructor(i=500){super(new $e,i)}}class Nt{decode(i,c){try{return this.doDecode(i,c)}catch{if(c&&c.get(U.TRY_HARDER)===!0&&i.isRotateSupported()){const p=i.rotateCounterClockwise(),v=this.doDecode(p,c),N=v.getResultMetadata();let _=270;N!==null&&N.get(ke.ORIENTATION)===!0&&(_=_+N.get(ke.ORIENTATION)%360),v.putMetadata(ke.ORIENTATION,_);const O=v.getResultPoints();if(O!==null){const V=p.getHeight();for(let ee=0;ee<O.length;ee++)O[ee]=new Ce(V-O[ee].getY()-1,O[ee].getX())}return v}else throw new Y}}reset(){}doDecode(i,c){const u=i.getWidth(),m=i.getHeight();let p=new L(u);const v=c&&c.get(U.TRY_HARDER)===!0,N=Math.max(1,m>>(v?8:5));let _;v?_=m:_=15;const O=Math.trunc(m/2);for(let V=0;V<_;V++){const ee=Math.trunc((V+1)/2),ue=(V&1)===0,je=O+N*(ue?ee:-ee);if(je<0||je>=m)break;try{p=i.getBlackRow(je,p)}catch{continue}for(let De=0;De<2;De++){if(De===1&&(p.reverse(),c&&c.get(U.NEED_RESULT_POINT_CALLBACK)===!0)){const Me=new Map;c.forEach((Ue,Ke)=>Me.set(Ke,Ue)),Me.delete(U.NEED_RESULT_POINT_CALLBACK),c=Me}try{const Me=this.decodeRow(je,p,c);if(De===1){Me.putMetadata(ke.ORIENTATION,180);const Ue=Me.getResultPoints();Ue!==null&&(Ue[0]=new Ce(u-Ue[0].getX()-1,Ue[0].getY()),Ue[1]=new Ce(u-Ue[1].getX()-1,Ue[1].getY()))}return Me}catch{}}}throw new Y}static recordPattern(i,c,u){const m=u.length;for(let O=0;O<m;O++)u[O]=0;const p=i.getSize();if(c>=p)throw new Y;let v=!i.get(c),N=0,_=c;for(;_<p;){if(i.get(_)!==v)u[N]++;else{if(++N===m)break;u[N]=1,v=!v}_++}if(!(N===m||N===m-1&&_===p))throw new Y}static recordPatternInReverse(i,c,u){let m=u.length,p=i.get(c);for(;c>0&&m>=0;)i.get(--c)!==p&&(m--,p=!p);if(m>=0)throw new Y;Nt.recordPattern(i,c+1,u)}static patternMatchVariance(i,c,u){const m=i.length;let p=0,v=0;for(let O=0;O<m;O++)p+=i[O],v+=c[O];if(p<v)return Number.POSITIVE_INFINITY;const N=p/v;u*=N;let _=0;for(let O=0;O<m;O++){const V=i[O],ee=c[O]*N,ue=V>ee?V-ee:ee-V;if(ue>u)return Number.POSITIVE_INFINITY;_+=ue}return _/p}}class lt extends Nt{static findStartPattern(i){const c=i.getSize(),u=i.getNextSet(0);let m=0,p=Int32Array.from([0,0,0,0,0,0]),v=u,N=!1;const _=6;for(let O=u;O<c;O++)if(i.get(O)!==N)p[m]++;else{if(m===_-1){let V=lt.MAX_AVG_VARIANCE,ee=-1;for(let ue=lt.CODE_START_A;ue<=lt.CODE_START_C;ue++){const je=Nt.patternMatchVariance(p,lt.CODE_PATTERNS[ue],lt.MAX_INDIVIDUAL_VARIANCE);je<V&&(V=je,ee=ue)}if(ee>=0&&i.isRange(Math.max(0,v-(O-v)/2),v,!1))return Int32Array.from([v,O,ee]);v+=p[0]+p[1],p=p.slice(2,p.length-1),p[m-1]=0,p[m]=0,m--}else m++;p[m]=1,N=!N}throw new Y}static decodeCode(i,c,u){Nt.recordPattern(i,u,c);let m=lt.MAX_AVG_VARIANCE,p=-1;for(let v=0;v<lt.CODE_PATTERNS.length;v++){const N=lt.CODE_PATTERNS[v],_=this.patternMatchVariance(c,N,lt.MAX_INDIVIDUAL_VARIANCE);_<m&&(m=_,p=v)}if(p>=0)return p;throw new Y}decodeRow(i,c,u){const m=u&&u.get(U.ASSUME_GS1)===!0,p=lt.findStartPattern(c),v=p[2];let N=0;const _=new Uint8Array(20);_[N++]=v;let O;switch(v){case lt.CODE_START_A:O=lt.CODE_CODE_A;break;case lt.CODE_START_B:O=lt.CODE_CODE_B;break;case lt.CODE_START_C:O=lt.CODE_CODE_C;break;default:throw new B}let V=!1,ee=!1,ue="",je=p[0],De=p[1];const Me=Int32Array.from([0,0,0,0,0,0]);let Ue=0,Ke=0,ht=v,gt=0,ft=!0,Kt=!1,$t=!1;for(;!V;){const Wn=ee;switch(ee=!1,Ue=Ke,Ke=lt.decodeCode(c,Me,De),_[N++]=Ke,Ke!==lt.CODE_STOP&&(ft=!0),Ke!==lt.CODE_STOP&&(gt++,ht+=gt*Ke),je=De,De+=Me.reduce((Ls,Cd)=>Ls+Cd,0),Ke){case lt.CODE_START_A:case lt.CODE_START_B:case lt.CODE_START_C:throw new B}switch(O){case lt.CODE_CODE_A:if(Ke<64)$t===Kt?ue+=String.fromCharCode(32+Ke):ue+=String.fromCharCode(32+Ke+128),$t=!1;else if(Ke<96)$t===Kt?ue+=String.fromCharCode(Ke-64):ue+=String.fromCharCode(Ke+64),$t=!1;else switch(Ke!==lt.CODE_STOP&&(ft=!1),Ke){case lt.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_A:!Kt&&$t?(Kt=!0,$t=!1):Kt&&$t?(Kt=!1,$t=!1):$t=!0;break;case lt.CODE_SHIFT:ee=!0,O=lt.CODE_CODE_B;break;case lt.CODE_CODE_B:O=lt.CODE_CODE_B;break;case lt.CODE_CODE_C:O=lt.CODE_CODE_C;break;case lt.CODE_STOP:V=!0;break}break;case lt.CODE_CODE_B:if(Ke<96)$t===Kt?ue+=String.fromCharCode(32+Ke):ue+=String.fromCharCode(32+Ke+128),$t=!1;else switch(Ke!==lt.CODE_STOP&&(ft=!1),Ke){case lt.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case lt.CODE_FNC_2:case lt.CODE_FNC_3:break;case lt.CODE_FNC_4_B:!Kt&&$t?(Kt=!0,$t=!1):Kt&&$t?(Kt=!1,$t=!1):$t=!0;break;case lt.CODE_SHIFT:ee=!0,O=lt.CODE_CODE_A;break;case lt.CODE_CODE_A:O=lt.CODE_CODE_A;break;case lt.CODE_CODE_C:O=lt.CODE_CODE_C;break;case lt.CODE_STOP:V=!0;break}break;case lt.CODE_CODE_C:if(Ke<100)Ke<10&&(ue+="0"),ue+=Ke;else switch(Ke!==lt.CODE_STOP&&(ft=!1),Ke){case lt.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case lt.CODE_CODE_A:O=lt.CODE_CODE_A;break;case lt.CODE_CODE_B:O=lt.CODE_CODE_B;break;case lt.CODE_STOP:V=!0;break}break}Wn&&(O=O===lt.CODE_CODE_A?lt.CODE_CODE_B:lt.CODE_CODE_A)}const Va=De-je;if(De=c.getNextUnset(De),!c.isRange(De,Math.min(c.getSize(),De+(De-je)/2),!1))throw new Y;if(ht-=gt*Ue,ht%103!==Ue)throw new S;const Ss=ue.length;if(Ss===0)throw new Y;Ss>0&&ft&&(O===lt.CODE_CODE_C?ue=ue.substring(0,Ss-2):ue=ue.substring(0,Ss-1));const rs=(p[1]+p[0])/2,Sr=je+Va/2,Ta=_.length,as=new Uint8Array(Ta);for(let Wn=0;Wn<Ta;Wn++)as[Wn]=_[Wn];const pi=[new Ce(rs,i),new Ce(Sr,i)];return new ae(ue,as,0,pi,re.CODE_128,new Date().getTime())}}lt.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],lt.MAX_AVG_VARIANCE=.25,lt.MAX_INDIVIDUAL_VARIANCE=.7,lt.CODE_SHIFT=98,lt.CODE_CODE_C=99,lt.CODE_CODE_B=100,lt.CODE_CODE_A=101,lt.CODE_FNC_1=102,lt.CODE_FNC_2=97,lt.CODE_FNC_3=96,lt.CODE_FNC_4_A=101,lt.CODE_FNC_4_B=100,lt.CODE_START_A=103,lt.CODE_START_B=104,lt.CODE_START_C=105,lt.CODE_STOP=106;class At extends Nt{constructor(i=!1,c=!1){super(),this.usingCheckDigit=i,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(i,c,u){let m=this.counters;m.fill(0),this.decodeRowResult="";let p=At.findAsteriskPattern(c,m),v=c.getNextSet(p[1]),N=c.getSize(),_,O;do{At.recordPattern(c,v,m);let Me=At.toNarrowWidePattern(m);if(Me<0)throw new Y;_=At.patternToChar(Me),this.decodeRowResult+=_,O=v;for(let Ue of m)v+=Ue;v=c.getNextSet(v)}while(_!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let V=0;for(let Me of m)V+=Me;let ee=v-O-V;if(v!==N&&ee*2<V)throw new Y;if(this.usingCheckDigit){let Me=this.decodeRowResult.length-1,Ue=0;for(let Ke=0;Ke<Me;Ke++)Ue+=At.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ke));if(this.decodeRowResult.charAt(Me)!==At.ALPHABET_STRING.charAt(Ue%43))throw new S;this.decodeRowResult=this.decodeRowResult.substring(0,Me)}if(this.decodeRowResult.length===0)throw new Y;let ue;this.extendedMode?ue=At.decodeExtended(this.decodeRowResult):ue=this.decodeRowResult;let je=(p[1]+p[0])/2,De=O+V/2;return new ae(ue,null,0,[new Ce(je,i),new Ce(De,i)],re.CODE_39,new Date().getTime())}static findAsteriskPattern(i,c){let u=i.getSize(),m=i.getNextSet(0),p=0,v=m,N=!1,_=c.length;for(let O=m;O<u;O++)if(i.get(O)!==N)c[p]++;else{if(p===_-1){if(this.toNarrowWidePattern(c)===At.ASTERISK_ENCODING&&i.isRange(Math.max(0,v-Math.floor((O-v)/2)),v,!1))return[v,O];v+=c[0]+c[1],c.copyWithin(0,2,2+p-1),c[p-1]=0,c[p]=0,p--}else p++;c[p]=1,N=!N}throw new Y}static toNarrowWidePattern(i){let c=i.length,u=0,m;do{let p=2147483647;for(let _ of i)_<p&&_>u&&(p=_);u=p,m=0;let v=0,N=0;for(let _=0;_<c;_++){let O=i[_];O>u&&(N|=1<<c-1-_,m++,v+=O)}if(m===3){for(let _=0;_<c&&m>0;_++){let O=i[_];if(O>u&&(m--,O*2>=v))return-1}return N}}while(m>3);return-1}static patternToChar(i){for(let c=0;c<At.CHARACTER_ENCODINGS.length;c++)if(At.CHARACTER_ENCODINGS[c]===i)return At.ALPHABET_STRING.charAt(c);if(i===At.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(i){let c=i.length,u="";for(let m=0;m<c;m++){let p=i.charAt(m);if(p==="+"||p==="$"||p==="%"||p==="/"){let v=i.charAt(m+1),N="\0";switch(p){case"+":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)+32);else throw new B;break;case"$":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)-64);else throw new B;break;case"%":if(v>="A"&&v<="E")N=String.fromCharCode(v.charCodeAt(0)-38);else if(v>="F"&&v<="J")N=String.fromCharCode(v.charCodeAt(0)-11);else if(v>="K"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)+16);else if(v>="P"&&v<="T")N=String.fromCharCode(v.charCodeAt(0)+43);else if(v==="U")N="\0";else if(v==="V")N="@";else if(v==="W")N="`";else if(v==="X"||v==="Y"||v==="Z")N="";else throw new B;break;case"/":if(v>="A"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)-32);else if(v==="Z")N=":";else throw new B;break}u+=N,m++}else u+=p}return u}}At.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",At.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],At.ASTERISK_ENCODING=148;class vt extends Nt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(i,c,u){let m=this.decodeStart(c),p=this.decodeEnd(c),v=new se;vt.decodeMiddle(c,m[1],p[0],v);let N=v.toString(),_=null;u!=null&&(_=u.get(U.ALLOWED_LENGTHS)),_==null&&(_=vt.DEFAULT_ALLOWED_LENGTHS);let O=N.length,V=!1,ee=0;for(let De of _){if(O===De){V=!0;break}De>ee&&(ee=De)}if(!V&&O>ee&&(V=!0),!V)throw new B;const ue=[new Ce(m[1],i),new Ce(p[0],i)];return new ae(N,null,0,ue,re.ITF,new Date().getTime())}static decodeMiddle(i,c,u,m){let p=new Int32Array(10),v=new Int32Array(5),N=new Int32Array(5);for(p.fill(0),v.fill(0),N.fill(0);c<u;){Nt.recordPattern(i,c,p);for(let O=0;O<5;O++){let V=2*O;v[O]=p[V],N[O]=p[V+1]}let _=vt.decodeDigit(v);m.append(_.toString()),_=this.decodeDigit(N),m.append(_.toString()),p.forEach(function(O){c+=O})}}decodeStart(i){let c=vt.skipWhiteSpace(i),u=vt.findGuardPattern(i,c,vt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(i,u[0]),u}validateQuietZone(i,c){let u=this.narrowLineWidth*10;u=u<c?u:c;for(let m=c-1;u>0&&m>=0&&!i.get(m);m--)u--;if(u!==0)throw new Y}static skipWhiteSpace(i){const c=i.getSize(),u=i.getNextSet(0);if(u===c)throw new Y;return u}decodeEnd(i){i.reverse();try{let c=vt.skipWhiteSpace(i),u;try{u=vt.findGuardPattern(i,c,vt.END_PATTERN_REVERSED[0])}catch(p){p instanceof Y&&(u=vt.findGuardPattern(i,c,vt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(i,u[0]);let m=u[0];return u[0]=i.getSize()-u[1],u[1]=i.getSize()-m,u}finally{i.reverse()}}static findGuardPattern(i,c,u){let m=u.length,p=new Int32Array(m),v=i.getSize(),N=!1,_=0,O=c;p.fill(0);for(let V=c;V<v;V++)if(i.get(V)!==N)p[_]++;else{if(_===m-1){if(Nt.patternMatchVariance(p,u,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return[O,V];O+=p[0]+p[1],A.arraycopy(p,2,p,0,_-1),p[_-1]=0,p[_]=0,_--}else _++;p[_]=1,N=!N}throw new Y}static decodeDigit(i){let c=vt.MAX_AVG_VARIANCE,u=-1,m=vt.PATTERNS.length;for(let p=0;p<m;p++){let v=vt.PATTERNS[p],N=Nt.patternMatchVariance(i,v,vt.MAX_INDIVIDUAL_VARIANCE);N<c?(c=N,u=p):N===c&&(u=-1)}if(u>=0)return u%10;throw new Y}}vt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],vt.MAX_AVG_VARIANCE=.38,vt.MAX_INDIVIDUAL_VARIANCE=.5,vt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],vt.START_PATTERN=Int32Array.from([1,1,1,1]),vt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class st extends Nt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(i){let c=!1,u,m=0,p=Int32Array.from([0,0,0]);for(;!c;){p=Int32Array.from([0,0,0]),u=st.findGuardPattern(i,m,!1,this.START_END_PATTERN,p);let v=u[0];m=u[1];let N=v-(m-v);N>=0&&(c=i.isRange(N,v,!1))}return u}static checkChecksum(i){return st.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let c=i.length;if(c===0)return!1;let u=parseInt(i.charAt(c-1),10);return st.getStandardUPCEANChecksum(i.substring(0,c-1))===u}static getStandardUPCEANChecksum(i){let c=i.length,u=0;for(let m=c-1;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new B;u+=p}u*=3;for(let m=c-2;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new B;u+=p}return(1e3-u)%10}static decodeEnd(i,c){return st.findGuardPattern(i,c,!1,st.START_END_PATTERN,new Int32Array(st.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(i,c,u,m){return this.findGuardPattern(i,c,u,m,new Int32Array(m.length))}static findGuardPattern(i,c,u,m,p){let v=i.getSize();c=u?i.getNextUnset(c):i.getNextSet(c);let N=0,_=c,O=m.length,V=u;for(let ee=c;ee<v;ee++)if(i.get(ee)!==V)p[N]++;else{if(N===O-1){if(Nt.patternMatchVariance(p,m,st.MAX_INDIVIDUAL_VARIANCE)<st.MAX_AVG_VARIANCE)return Int32Array.from([_,ee]);_+=p[0]+p[1];let ue=p.slice(2,p.length-1);for(let je=0;je<N-1;je++)p[je]=ue[je];p[N-1]=0,p[N]=0,N--}else N++;p[N]=1,V=!V}throw new Y}static decodeDigit(i,c,u,m){this.recordPattern(i,u,c);let p=this.MAX_AVG_VARIANCE,v=-1,N=m.length;for(let _=0;_<N;_++){let O=m[_],V=Nt.patternMatchVariance(c,O,st.MAX_INDIVIDUAL_VARIANCE);V<p&&(p=V,v=_)}if(v>=0)return v;throw new Y}}st.MAX_AVG_VARIANCE=.48,st.MAX_INDIVIDUAL_VARIANCE=.7,st.START_END_PATTERN=Int32Array.from([1,1,1]),st.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),st.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),st.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class kt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,c,u){let m=this.decodeRowStringBuffer,p=this.decodeMiddle(c,u,m),v=m.toString(),N=kt.parseExtensionString(v),_=[new Ce((u[0]+u[1])/2,i),new Ce(p,i)],O=new ae(v,null,0,_,re.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&O.putAllMetadata(N),O}decodeMiddle(i,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1],N=0;for(let O=0;O<5&&v<p;O++){let V=st.decodeDigit(i,m,v,st.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let ee of m)v+=ee;V>=10&&(N|=1<<4-O),O!==4&&(v=i.getNextSet(v),v=i.getNextUnset(v))}if(u.length!==5)throw new Y;let _=this.determineCheckDigit(N);if(kt.extensionChecksum(u.toString())!==_)throw new Y;return v}static extensionChecksum(i){let c=i.length,u=0;for(let m=c-2;m>=0;m-=2)u+=i.charAt(m).charCodeAt(0)-48;u*=3;for(let m=c-1;m>=0;m-=2)u+=i.charAt(m).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(i){for(let c=0;c<10;c++)if(i===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new Y}static parseExtensionString(i){if(i.length!==5)return null;let c=kt.parseExtension5String(i);return c==null?null:new Map([[ke.SUGGESTED_PRICE,c]])}static parseExtension5String(i){let c;switch(i.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(i){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let u=parseInt(i.substring(1)),m=(u/100).toString(),p=u%100,v=p<10?"0"+p:p.toString();return c+m+"."+v}}class Os{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(i,c,u){let m=this.decodeRowStringBuffer,p=this.decodeMiddle(c,u,m),v=m.toString(),N=Os.parseExtensionString(v),_=[new Ce((u[0]+u[1])/2,i),new Ce(p,i)],O=new ae(v,null,0,_,re.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&O.putAllMetadata(N),O}decodeMiddle(i,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1],N=0;for(let _=0;_<2&&v<p;_++){let O=st.decodeDigit(i,m,v,st.L_AND_G_PATTERNS);u+=String.fromCharCode(48+O%10);for(let V of m)v+=V;O>=10&&(N|=1<<1-_),_!==1&&(v=i.getNextSet(v),v=i.getNextUnset(v))}if(u.length!==2)throw new Y;if(parseInt(u.toString())%4!==N)throw new Y;return v}static parseExtensionString(i){return i.length!==2?null:new Map([[ke.ISSUE_NUMBER,parseInt(i)]])}}class Bn{static decodeRow(i,c,u){let m=st.findGuardPattern(c,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new kt().decodeRow(i,c,m)}catch{return new Os().decodeRow(i,c,m)}}}Bn.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class _t extends st{constructor(){super(),this.decodeRowStringBuffer="",_t.L_AND_G_PATTERNS=_t.L_PATTERNS.map(i=>Int32Array.from(i));for(let i=10;i<20;i++){let c=_t.L_PATTERNS[i-10],u=new Int32Array(c.length);for(let m=0;m<c.length;m++)u[m]=c[c.length-m-1];_t.L_AND_G_PATTERNS[i]=u}}decodeRow(i,c,u){let m=_t.findStartGuardPattern(c),p=u==null?null:u.get(U.NEED_RESULT_POINT_CALLBACK);if(p!=null){const ft=new Ce((m[0]+m[1])/2,i);p.foundPossibleResultPoint(ft)}let v=this.decodeMiddle(c,m,this.decodeRowStringBuffer),N=v.rowOffset,_=v.resultString;if(p!=null){const ft=new Ce(N,i);p.foundPossibleResultPoint(ft)}let O=this.decodeEnd(c,N);if(p!=null){const ft=new Ce((O[0]+O[1])/2,i);p.foundPossibleResultPoint(ft)}let V=O[1],ee=V+(V-O[0]);if(ee>=c.getSize()||!c.isRange(V,ee,!1))throw new Y;let ue=_.toString();if(ue.length<8)throw new B;if(!_t.checkChecksum(ue))throw new S;let je=(m[1]+m[0])/2,De=(O[1]+O[0])/2,Me=this.getBarcodeFormat(),Ue=[new Ce(je,i),new Ce(De,i)],Ke=new ae(ue,null,0,Ue,Me,new Date().getTime()),ht=0;try{let ft=Bn.decodeRow(i,c,O[1]);Ke.putMetadata(ke.UPC_EAN_EXTENSION,ft.getText()),Ke.putAllMetadata(ft.getResultMetadata()),Ke.addResultPoints(ft.getResultPoints()),ht=ft.getText().length}catch{}let gt=u==null?null:u.get(U.ALLOWED_EAN_EXTENSIONS);if(gt!=null){let ft=!1;for(let Kt in gt)if(ht.toString()===Kt){ft=!0;break}if(!ft)throw new Y}return Ke}decodeEnd(i,c){return _t.findGuardPattern(i,c,!1,_t.START_END_PATTERN,new Int32Array(_t.START_END_PATTERN.length).fill(0))}static checkChecksum(i){return _t.checkStandardUPCEANChecksum(i)}static checkStandardUPCEANChecksum(i){let c=i.length;if(c===0)return!1;let u=parseInt(i.charAt(c-1),10);return _t.getStandardUPCEANChecksum(i.substring(0,c-1))===u}static getStandardUPCEANChecksum(i){let c=i.length,u=0;for(let m=c-1;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new B;u+=p}u*=3;for(let m=c-2;m>=0;m-=2){let p=i.charAt(m).charCodeAt(0)-48;if(p<0||p>9)throw new B;u+=p}return(1e3-u)%10}}class Jr extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1],N=0;for(let O=0;O<6&&v<p;O++){let V=_t.decodeDigit(i,m,v,_t.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let ee of m)v+=ee;V>=10&&(N|=1<<5-O)}u=Jr.determineFirstDigit(u,N),v=_t.findGuardPattern(i,v,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let O=0;O<6&&v<p;O++){let V=_t.decodeDigit(i,m,v,_t.L_PATTERNS);u+=String.fromCharCode(48+V);for(let ee of m)v+=ee}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return re.EAN_13}static determineFirstDigit(i,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return i=String.fromCharCode(48+u)+i,i;throw new Y}}Jr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class en extends _t{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(i,c,u){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v=c[1];for(let _=0;_<4&&v<p;_++){let O=_t.decodeDigit(i,m,v,_t.L_PATTERNS);u+=String.fromCharCode(48+O);for(let V of m)v+=V}v=_t.findGuardPattern(i,v,!0,_t.MIDDLE_PATTERN,new Int32Array(_t.MIDDLE_PATTERN.length).fill(0))[1];for(let _=0;_<4&&v<p;_++){let O=_t.decodeDigit(i,m,v,_t.L_PATTERNS);u+=String.fromCharCode(48+O);for(let V of m)v+=V}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return re.EAN_8}}class Ll extends _t{constructor(){super(...arguments),this.ean13Reader=new Jr}getBarcodeFormat(){return re.UPC_A}decode(i,c){return this.maybeReturnResult(this.ean13Reader.decode(i))}decodeRow(i,c,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(i,c,u))}decodeMiddle(i,c,u){return this.ean13Reader.decodeMiddle(i,c,u)}maybeReturnResult(i){let c=i.getText();if(c.charAt(0)==="0"){let u=new ae(c.substring(1),null,null,i.getResultPoints(),re.UPC_A);return i.getResultMetadata()!=null&&u.putAllMetadata(i.getResultMetadata()),u}else throw new Y}reset(){this.ean13Reader.reset()}}class Za extends _t{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(i,c,u){const m=this.decodeMiddleCounters.map(O=>O);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const p=i.getSize();let v=c[1],N=0;for(let O=0;O<6&&v<p;O++){const V=Za.decodeDigit(i,m,v,Za.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let ee of m)v+=ee;V>=10&&(N|=1<<5-O)}let _=Za.determineNumSysAndCheckDigit(u,N);return{rowOffset:v,resultString:_}}decodeEnd(i,c){return Za.findGuardPatternWithoutCounters(i,c,!0,Za.MIDDLE_END_PATTERN)}checkChecksum(i){return _t.checkChecksum(Za.convertUPCEtoUPCA(i))}static determineNumSysAndCheckDigit(i,c){for(let u=0;u<=1;u++)for(let m=0;m<10;m++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][m]){let p=String.fromCharCode(48+u),v=String.fromCharCode(48+m);return p+i+v}throw Y.getNotFoundInstance()}getBarcodeFormat(){return re.UPC_E}static convertUPCEtoUPCA(i){const c=i.slice(1,7).split("").map(p=>p.charCodeAt(0)),u=new se;u.append(i.charAt(0));let m=c[5];switch(m){case 0:case 1:case 2:u.appendChars(c,0,2),u.append(m),u.append("0000"),u.appendChars(c,2,3);break;case 3:u.appendChars(c,0,3),u.append("00000"),u.appendChars(c,3,2);break;case 4:u.appendChars(c,0,4),u.append("00000"),u.append(c[4]);break;default:u.appendChars(c,0,5),u.append("0000"),u.append(m);break}return i.length>=8&&u.append(i.charAt(7)),u.toString()}}Za.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Za.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class fi extends Nt{constructor(i){super();let c=i==null?null:i.get(U.POSSIBLE_FORMATS),u=[];n(c)?(u.push(new Jr),u.push(new Ll),u.push(new en),u.push(new Za)):(c.indexOf(re.EAN_13)>-1&&u.push(new Jr),c.indexOf(re.UPC_A)>-1&&u.push(new Ll),c.indexOf(re.EAN_8)>-1&&u.push(new en),c.indexOf(re.UPC_E)>-1&&u.push(new Za)),this.readers=u}decodeRow(i,c,u){for(let m of this.readers)try{const p=m.decodeRow(i,c,u),v=p.getBarcodeFormat()===re.EAN_13&&p.getText().charAt(0)==="0",N=u==null?null:u.get(U.POSSIBLE_FORMATS),_=N==null||N.includes(re.UPC_A);if(v&&_){const O=p.getRawBytes(),V=new ae(p.getText().substring(1),O,O?O.length:null,p.getResultPoints(),re.UPC_A);return V.putAllMetadata(p.getResultMetadata()),V}return p}catch{}throw new Y}reset(){for(let i of this.readers)i.reset()}}class ea extends Nt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(i,c){for(let u=0;u<c.length;u++)if(Nt.patternMatchVariance(i,c[u],ea.MAX_INDIVIDUAL_VARIANCE)<ea.MAX_AVG_VARIANCE)return u;throw new Y}static count(i){return fe.sum(new Int32Array(i))}static increment(i,c){let u=0,m=c[0];for(let p=1;p<i.length;p++)c[p]>m&&(m=c[p],u=p);i[u]++}static decrement(i,c){let u=0,m=c[0];for(let p=1;p<i.length;p++)c[p]<m&&(m=c[p],u=p);i[u]--}static isFinderPattern(i){let c=i[0]+i[1],u=c+i[2]+i[3],m=c/u;if(m>=ea.MIN_FINDER_PATTERN_RATIO&&m<=ea.MAX_FINDER_PATTERN_RATIO){let p=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;for(let N of i)N>v&&(v=N),N<p&&(p=N);return v<10*p}return!1}}ea.MAX_AVG_VARIANCE=.2,ea.MAX_INDIVIDUAL_VARIANCE=.45,ea.MIN_FINDER_PATTERN_RATIO=9.5/12,ea.MAX_FINDER_PATTERN_RATIO=12.5/14;class yn{constructor(i,c){this.value=i,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(i){if(!(i instanceof yn))return!1;const c=i;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Vi{constructor(i,c,u,m,p){this.value=i,this.startEnd=c,this.value=i,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new Ce(u,p)),this.resultPoints.push(new Ce(m,p))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(i){if(!(i instanceof Vi))return!1;const c=i;return this.value===c.value}hashCode(){return this.value}}class ca{constructor(){}static getRSSvalue(i,c,u){let m=0;for(let _ of i)m+=_;let p=0,v=0,N=i.length;for(let _=0;_<N-1;_++){let O;for(O=1,v|=1<<_;O<i[_];O++,v&=~(1<<_)){let V=ca.combins(m-O-1,N-_-2);if(u&&v===0&&m-O-(N-_-1)>=N-_-1&&(V-=ca.combins(m-O-(N-_),N-_-2)),N-_-1>1){let ee=0;for(let ue=m-O-(N-_-2);ue>c;ue--)ee+=ca.combins(m-O-ue-1,N-_-3);V-=ee*(N-1-_)}else m-O>c&&V--;p+=V}m-=O}return p}static combins(i,c){let u,m;i-c>c?(m=c,u=i-c):(m=i-c,u=c);let p=1,v=1;for(let N=i;N>u;N--)p*=N,v<=m&&(p/=v,v++);for(;v<=m;)p/=v,v++;return p}}class pa{static buildBitArray(i){let c=i.length*2-1;i[i.length-1].getRightChar()==null&&(c-=1);let u=12*c,m=new L(u),p=0,N=i[0].getRightChar().getValue();for(let _=11;_>=0;--_)(N&1<<_)!=0&&m.set(p),p++;for(let _=1;_<i.length;++_){let O=i[_],V=O.getLeftChar().getValue();for(let ee=11;ee>=0;--ee)(V&1<<ee)!=0&&m.set(p),p++;if(O.getRightChar()!=null){let ee=O.getRightChar().getValue();for(let ue=11;ue>=0;--ue)(ee&1<<ue)!=0&&m.set(p),p++}}return m}}class zr{constructor(i,c){c?this.decodedInformation=null:(this.finished=i,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class tn{constructor(i){this.newPosition=i}getNewPosition(){return this.newPosition}}class ya extends tn{constructor(i,c){super(i),this.value=c}getValue(){return this.value}isFNC1(){return this.value===ya.FNC1}}ya.FNC1="$";class bn extends tn{constructor(i,c,u){super(i),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class de extends tn{constructor(i,c,u){if(super(i),c<0||c>10||u<0||u>10)throw new B;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===de.FNC1}isSecondDigitFNC1(){return this.secondDigit===de.FNC1}isAnyFNC1(){return this.firstDigit===de.FNC1||this.secondDigit===de.FNC1}}de.FNC1=10;class he{constructor(){}static parseFieldsInGeneralPurpose(i){if(!i)return null;if(i.length<2)throw new Y;let c=i.substring(0,2);for(let p of he.TWO_DIGIT_DATA_LENGTH)if(p[0]===c)return p[1]===he.VARIABLE_LENGTH?he.processVariableAI(2,p[2],i):he.processFixedAI(2,p[1],i);if(i.length<3)throw new Y;let u=i.substring(0,3);for(let p of he.THREE_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===he.VARIABLE_LENGTH?he.processVariableAI(3,p[2],i):he.processFixedAI(3,p[1],i);for(let p of he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(p[0]===u)return p[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,p[2],i):he.processFixedAI(4,p[1],i);if(i.length<4)throw new Y;let m=i.substring(0,4);for(let p of he.FOUR_DIGIT_DATA_LENGTH)if(p[0]===m)return p[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,p[2],i):he.processFixedAI(4,p[1],i);throw new Y}static processFixedAI(i,c,u){if(u.length<i)throw new Y;let m=u.substring(0,i);if(u.length<i+c)throw new Y;let p=u.substring(i,i+c),v=u.substring(i+c),N="("+m+")"+p,_=he.parseFieldsInGeneralPurpose(v);return _==null?N:N+_}static processVariableAI(i,c,u){let m=u.substring(0,i),p;u.length<i+c?p=u.length:p=i+c;let v=u.substring(i,p),N=u.substring(p),_="("+m+")"+v,O=he.parseFieldsInGeneralPurpose(N);return O==null?_:_+O}}he.VARIABLE_LENGTH=[],he.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",he.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",he.VARIABLE_LENGTH,20],["22",he.VARIABLE_LENGTH,29],["30",he.VARIABLE_LENGTH,8],["37",he.VARIABLE_LENGTH,8],["90",he.VARIABLE_LENGTH,30],["91",he.VARIABLE_LENGTH,30],["92",he.VARIABLE_LENGTH,30],["93",he.VARIABLE_LENGTH,30],["94",he.VARIABLE_LENGTH,30],["95",he.VARIABLE_LENGTH,30],["96",he.VARIABLE_LENGTH,30],["97",he.VARIABLE_LENGTH,3],["98",he.VARIABLE_LENGTH,30],["99",he.VARIABLE_LENGTH,30]],he.THREE_DIGIT_DATA_LENGTH=[["240",he.VARIABLE_LENGTH,30],["241",he.VARIABLE_LENGTH,30],["242",he.VARIABLE_LENGTH,6],["250",he.VARIABLE_LENGTH,30],["251",he.VARIABLE_LENGTH,30],["253",he.VARIABLE_LENGTH,17],["254",he.VARIABLE_LENGTH,20],["400",he.VARIABLE_LENGTH,30],["401",he.VARIABLE_LENGTH,30],["402",17],["403",he.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",he.VARIABLE_LENGTH,20],["421",he.VARIABLE_LENGTH,15],["422",3],["423",he.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",he.VARIABLE_LENGTH,15],["391",he.VARIABLE_LENGTH,18],["392",he.VARIABLE_LENGTH,15],["393",he.VARIABLE_LENGTH,18],["703",he.VARIABLE_LENGTH,30]],he.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",he.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",he.VARIABLE_LENGTH,20],["8003",he.VARIABLE_LENGTH,30],["8004",he.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",he.VARIABLE_LENGTH,30],["8008",he.VARIABLE_LENGTH,12],["8018",18],["8020",he.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",he.VARIABLE_LENGTH,70],["8200",he.VARIABLE_LENGTH,70]];class ge{constructor(i){this.buffer=new se,this.information=i}decodeAllCodes(i,c){let u=c,m=null;do{let p=this.decodeGeneralPurposeField(u,m),v=he.parseFieldsInGeneralPurpose(p.getNewString());if(v!=null&&i.append(v),p.isRemaining()?m=""+p.getRemainingValue():m=null,u===p.getNewPosition())break;u=p.getNewPosition()}while(!0);return i.toString()}isStillNumeric(i){if(i+7>this.information.getSize())return i+4<=this.information.getSize();for(let c=i;c<i+3;++c)if(this.information.get(c))return!0;return this.information.get(i+3)}decodeNumeric(i){if(i+7>this.information.getSize()){let p=this.extractNumericValueFromBitArray(i,4);return p===0?new de(this.information.getSize(),de.FNC1,de.FNC1):new de(this.information.getSize(),p-1,de.FNC1)}let c=this.extractNumericValueFromBitArray(i,7),u=(c-8)/11,m=(c-8)%11;return new de(i+7,u,m)}extractNumericValueFromBitArray(i,c){return ge.extractNumericValueFromBitArray(this.information,i,c)}static extractNumericValueFromBitArray(i,c,u){let m=0;for(let p=0;p<u;++p)i.get(c+p)&&(m|=1<<u-p-1);return m}decodeGeneralPurposeField(i,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(i);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new bn(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new bn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let i,c;do{let u=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),i=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),i=c.isFinished()):(c=this.parseNumericBlock(),i=c.isFinished()),!(u!==this.current.getPosition())&&!i)break}while(!i);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let i=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFirstDigitFNC1()){let c;return i.isSecondDigitFNC1()?c=new bn(this.current.getPosition(),this.buffer.toString()):c=new bn(this.current.getPosition(),this.buffer.toString(),i.getSecondDigit()),new zr(!0,c)}if(this.buffer.append(i.getFirstDigit()),i.isSecondDigitFNC1()){let c=new bn(this.current.getPosition(),this.buffer.toString());return new zr(!0,c)}this.buffer.append(i.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new zr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let i=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let c=new bn(this.current.getPosition(),this.buffer.toString());return new zr(!0,c)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new zr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let i=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(i.getNewPosition()),i.isFNC1()){let c=new bn(this.current.getPosition(),this.buffer.toString());return new zr(!0,c)}this.buffer.append(i.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new zr(!1)}isStillIsoIec646(i){if(i+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,5);if(c>=5&&c<16)return!0;if(i+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,7);if(u>=64&&u<116)return!0;if(i+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(i,8);return m>=232&&m<253}decodeIsoIec646(i){let c=this.extractNumericValueFromBitArray(i,5);if(c===15)return new ya(i+5,ya.FNC1);if(c>=5&&c<15)return new ya(i+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(i,7);if(u>=64&&u<90)return new ya(i+7,""+(u+1));if(u>=90&&u<116)return new ya(i+7,""+(u+7));let m=this.extractNumericValueFromBitArray(i,8),p;switch(m){case 232:p="!";break;case 233:p='"';break;case 234:p="%";break;case 235:p="&";break;case 236:p="'";break;case 237:p="(";break;case 238:p=")";break;case 239:p="*";break;case 240:p="+";break;case 241:p=",";break;case 242:p="-";break;case 243:p=".";break;case 244:p="/";break;case 245:p=":";break;case 246:p=";";break;case 247:p="<";break;case 248:p="=";break;case 249:p=">";break;case 250:p="?";break;case 251:p="_";break;case 252:p=" ";break;default:throw new B}return new ya(i+8,p)}isStillAlpha(i){if(i+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(i,5);if(c>=5&&c<16)return!0;if(i+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(i,6);return u>=16&&u<63}decodeAlphanumeric(i){let c=this.extractNumericValueFromBitArray(i,5);if(c===15)return new ya(i+5,ya.FNC1);if(c>=5&&c<15)return new ya(i+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(i,6);if(u>=32&&u<58)return new ya(i+6,""+(u+33));let m;switch(u){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new Ee("Decoding invalid alphanumeric value: "+u)}return new ya(i+6,m)}isAlphaTo646ToAlphaLatch(i){if(i+1>this.information.getSize())return!1;for(let c=0;c<5&&c+i<this.information.getSize();++c)if(c===2){if(!this.information.get(i+2))return!1}else if(this.information.get(i+c))return!1;return!0}isAlphaOr646ToNumericLatch(i){if(i+3>this.information.getSize())return!1;for(let c=i;c<i+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(i){if(i+1>this.information.getSize())return!1;for(let c=0;c<4&&c+i<this.information.getSize();++c)if(this.information.get(i+c))return!1;return!0}}class ve{constructor(i){this.information=i,this.generalDecoder=new ge(i)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ne extends ve{constructor(i){super(i)}encodeCompressedGtin(i,c){i.append("(01)");let u=i.length();i.append("9"),this.encodeCompressedGtinWithoutAI(i,c,u)}encodeCompressedGtinWithoutAI(i,c,u){for(let m=0;m<4;++m){let p=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*m,10);p/100===0&&i.append("0"),p/10===0&&i.append("0"),i.append(p)}Ne.appendCheckDigit(i,u)}static appendCheckDigit(i,c){let u=0;for(let m=0;m<13;m++){let p=i.charAt(m+c).charCodeAt(0)-48;u+=(m&1)===0?3*p:p}u=10-u%10,u===10&&(u=0),i.append(u)}}Ne.GTIN_SIZE=40;class Se extends Ne{constructor(i){super(i)}parseInformation(){let i=new se;i.append("(01)");let c=i.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Se.HEADER_SIZE,4);return i.append(u),this.encodeCompressedGtinWithoutAI(i,Se.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(i,Se.HEADER_SIZE+44)}}Se.HEADER_SIZE=4;class Ge extends ve{constructor(i){super(i)}parseInformation(){let i=new se;return this.getGeneralDecoder().decodeAllCodes(i,Ge.HEADER_SIZE)}}Ge.HEADER_SIZE=5;class rt extends Ne{constructor(i){super(i)}encodeCompressedWeight(i,c,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(c,u);this.addWeightCode(i,m);let p=this.checkWeight(m),v=1e5;for(let N=0;N<5;++N)p/v===0&&i.append("0"),v/=10;i.append(p)}}class Fe extends rt{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()!=Fe.HEADER_SIZE+rt.GTIN_SIZE+Fe.WEIGHT_SIZE)throw new Y;let i=new se;return this.encodeCompressedGtin(i,Fe.HEADER_SIZE),this.encodeCompressedWeight(i,Fe.HEADER_SIZE+rt.GTIN_SIZE,Fe.WEIGHT_SIZE),i.toString()}}Fe.HEADER_SIZE=5,Fe.WEIGHT_SIZE=15;class Xe extends Fe{constructor(i){super(i)}addWeightCode(i,c){i.append("(3103)")}checkWeight(i){return i}}class We extends Fe{constructor(i){super(i)}addWeightCode(i,c){c<1e4?i.append("(3202)"):i.append("(3203)")}checkWeight(i){return i<1e4?i:i-1e4}}class ct extends Ne{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<ct.HEADER_SIZE+Ne.GTIN_SIZE)throw new Y;let i=new se;this.encodeCompressedGtin(i,ct.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(ct.HEADER_SIZE+Ne.GTIN_SIZE,ct.LAST_DIGIT_SIZE);i.append("(392"),i.append(c),i.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(ct.HEADER_SIZE+Ne.GTIN_SIZE+ct.LAST_DIGIT_SIZE,null);return i.append(u.getNewString()),i.toString()}}ct.HEADER_SIZE=8,ct.LAST_DIGIT_SIZE=2;class xt extends Ne{constructor(i){super(i)}parseInformation(){if(this.getInformation().getSize()<xt.HEADER_SIZE+Ne.GTIN_SIZE)throw new Y;let i=new se;this.encodeCompressedGtin(i,xt.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(xt.HEADER_SIZE+Ne.GTIN_SIZE,xt.LAST_DIGIT_SIZE);i.append("(393"),i.append(c),i.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(xt.HEADER_SIZE+Ne.GTIN_SIZE+xt.LAST_DIGIT_SIZE,xt.FIRST_THREE_DIGITS_SIZE);u/100==0&&i.append("0"),u/10==0&&i.append("0"),i.append(u);let m=this.getGeneralDecoder().decodeGeneralPurposeField(xt.HEADER_SIZE+Ne.GTIN_SIZE+xt.LAST_DIGIT_SIZE+xt.FIRST_THREE_DIGITS_SIZE,null);return i.append(m.getNewString()),i.toString()}}xt.HEADER_SIZE=8,xt.LAST_DIGIT_SIZE=2,xt.FIRST_THREE_DIGITS_SIZE=10;class mt extends rt{constructor(i,c,u){super(i),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE+mt.DATE_SIZE)throw new Y;let i=new se;return this.encodeCompressedGtin(i,mt.HEADER_SIZE),this.encodeCompressedWeight(i,mt.HEADER_SIZE+mt.GTIN_SIZE,mt.WEIGHT_SIZE),this.encodeCompressedDate(i,mt.HEADER_SIZE+mt.GTIN_SIZE+mt.WEIGHT_SIZE),i.toString()}encodeCompressedDate(i,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,mt.DATE_SIZE);if(u==38400)return;i.append("("),i.append(this.dateCode),i.append(")");let m=u%32;u/=32;let p=u%12+1;u/=12;let v=u;v/10==0&&i.append("0"),i.append(v),p/10==0&&i.append("0"),i.append(p),m/10==0&&i.append("0"),i.append(m)}addWeightCode(i,c){i.append("("),i.append(this.firstAIdigits),i.append(c/1e5),i.append(")")}checkWeight(i){return i%1e5}}mt.HEADER_SIZE=8,mt.WEIGHT_SIZE=20,mt.DATE_SIZE=16;function pt(J){try{if(J.get(1))return new Se(J);if(!J.get(2))return new Ge(J);switch(ge.extractNumericValueFromBitArray(J,1,4)){case 4:return new Xe(J);case 5:return new We(J)}switch(ge.extractNumericValueFromBitArray(J,1,5)){case 12:return new ct(J);case 13:return new xt(J)}switch(ge.extractNumericValueFromBitArray(J,1,7)){case 56:return new mt(J,"310","11");case 57:return new mt(J,"320","11");case 58:return new mt(J,"310","13");case 59:return new mt(J,"320","13");case 60:return new mt(J,"310","15");case 61:return new mt(J,"320","15");case 62:return new mt(J,"310","17");case 63:return new mt(J,"320","17")}}catch(i){throw console.log(i),new Ee("unknown decoder: "+J)}}class bt{constructor(i,c,u,m){this.leftchar=i,this.rightchar=c,this.finderpattern=u,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(i,c){return i instanceof bt?bt.equalsOrNull(i.leftchar,c.leftchar)&&bt.equalsOrNull(i.rightchar,c.rightchar)&&bt.equalsOrNull(i.finderpattern,c.finderpattern):!1}static equalsOrNull(i,c){return i===null?c===null:bt.equals(i,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pt{constructor(i,c,u){this.pairs=i,this.rowNumber=c,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(i){return this.checkEqualitity(this,i)}toString(){return"{ "+this.pairs+" }"}equals(i,c){return i instanceof Pt?this.checkEqualitity(i,c)&&i.wasReversed===c.wasReversed:!1}checkEqualitity(i,c){if(!i||!c)return;let u;return i.forEach((m,p)=>{c.forEach(v=>{m.getLeftChar().getValue()===v.getLeftChar().getValue()&&m.getRightChar().getValue()===v.getRightChar().getValue()&&m.getFinderPatter().getValue()===v.getFinderPatter().getValue()&&(u=!0)})}),u}}class tt extends ea{constructor(i){super(...arguments),this.pairs=new Array(tt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=i===!0}decodeRow(i,c,u){this.pairs.length=0,this.startFromEven=!1;try{return tt.constructResult(this.decodeRow2pairs(i,c))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,tt.constructResult(this.decodeRow2pairs(i,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(i,c){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,i))}catch(p){if(p instanceof Y){if(!this.pairs.length)throw new Y;u=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(i,!1),m){let p=this.checkRowsBoolean(!1);if(p!=null||(p=this.checkRowsBoolean(!0),p!=null))return p}throw new Y}checkRowsBoolean(i){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,i&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return i&&(this.rows=this.rows.reverse()),c}checkRows(i,c){for(let u=c;u<this.rows.length;u++){let m=this.rows[u];this.pairs.length=0;for(let v of i)this.pairs.push(v.getPairs());if(this.pairs.push(m.getPairs()),!tt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let p=new Array(i);p.push(m);try{return this.checkRows(p,u+1)}catch(v){this.verbose&&console.log(v)}}throw new Y}static isValidSequence(i){for(let c of tt.FINDER_PATTERN_SEQUENCES){if(i.length>c.length)continue;let u=!0;for(let m=0;m<i.length;m++)if(i[m].getFinderPattern().getValue()!=c[m]){u=!1;break}if(u)return!0}return!1}storeRow(i,c){let u=0,m=!1,p=!1;for(;u<this.rows.length;){let v=this.rows[u];if(v.getRowNumber()>i){p=v.isEquivalent(this.pairs);break}m=v.isEquivalent(this.pairs),u++}p||m||tt.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Pt(this.pairs,i,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(i,c){for(let u of c)if(u.getPairs().length!==i.length){for(let m of u.getPairs())for(let p of i)if(bt.equals(m,p))break}}static isPartialRow(i,c){for(let u of c){let m=!0;for(let p of i){let v=!1;for(let N of u.getPairs())if(p.equals(N)){v=!0;break}if(!v){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(i){let c=pa.buildBitArray(i),m=pt(c).parseInformation(),p=i[0].getFinderPattern().getResultPoints(),v=i[i.length-1].getFinderPattern().getResultPoints(),N=[p[0],p[1],v[0],v[1]];return new ae(m,null,null,N,re.RSS_EXPANDED,null)}checkChecksum(){let i=this.pairs.get(0),c=i.getLeftChar(),u=i.getRightChar();if(u==null)return!1;let m=u.getChecksumPortion(),p=2;for(let N=1;N<this.pairs.size();++N){let _=this.pairs.get(N);m+=_.getLeftChar().getChecksumPortion(),p++;let O=_.getRightChar();O!=null&&(m+=O.getChecksumPortion(),p++)}return m%=211,211*(p-4)+m==c.getValue()}static getNextSecondBar(i,c){let u;return i.get(c)?(u=i.getNextUnset(c),u=i.getNextSet(u)):(u=i.getNextSet(c),u=i.getNextUnset(u)),u}retrieveNextPair(i,c,u){let m=c.length%2==0;this.startFromEven&&(m=!m);let p,v=!0,N=-1;do this.findNextPair(i,c,N),p=this.parseFoundFinderPattern(i,u,m),p==null?N=tt.getNextSecondBar(i,this.startEnd[0]):v=!1;while(v);let _=this.decodeDataCharacter(i,p,m,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new Y;let O;try{O=this.decodeDataCharacter(i,p,m,!1)}catch(V){O=null,this.verbose&&console.log(V)}return new bt(_,O,p,!0)}isEmptyPair(i){return i.length===0}findNextPair(i,c,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let p=i.getSize(),v;u>=0?v=u:this.isEmptyPair(c)?v=0:v=c[c.length-1].getFinderPattern().getStartEnd()[1];let N=c.length%2!=0;this.startFromEven&&(N=!N);let _=!1;for(;v<p&&(_=!i.get(v),!!_);)v++;let O=0,V=v;for(let ee=v;ee<p;ee++)if(i.get(ee)!=_)m[O]++;else{if(O==3){if(N&&tt.reverseCounters(m),tt.isFinderPattern(m)){this.startEnd[0]=V,this.startEnd[1]=ee;return}N&&tt.reverseCounters(m),V+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,O--}else O++;m[O]=1,_=!_}throw new Y}static reverseCounters(i){let c=i.length;for(let u=0;u<c/2;++u){let m=i[u];i[u]=i[c-u-1],i[c-u-1]=m}}parseFoundFinderPattern(i,c,u){let m,p,v;if(u){let O=this.startEnd[0]-1;for(;O>=0&&!i.get(O);)O--;O++,m=this.startEnd[0]-O,p=O,v=this.startEnd[1]}else p=this.startEnd[0],v=i.getNextUnset(this.startEnd[1]+1),m=v-this.startEnd[1];let N=this.getDecodeFinderCounters();A.arraycopy(N,0,N,1,N.length-1),N[0]=m;let _;try{_=this.parseFinderValue(N,tt.FINDER_PATTERNS)}catch{return null}return new Vi(_,[p,v],p,v,c)}decodeDataCharacter(i,c,u,m){let p=this.getDataCharacterCounters();for(let Sr=0;Sr<p.length;Sr++)p[Sr]=0;if(m)tt.recordPatternInReverse(i,c.getStartEnd()[0],p);else{tt.recordPattern(i,c.getStartEnd()[1],p);for(let Sr=0,Ta=p.length-1;Sr<Ta;Sr++,Ta--){let as=p[Sr];p[Sr]=p[Ta],p[Ta]=as}}let v=17,N=fe.sum(new Int32Array(p))/v,_=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(N-_)/_>.3)throw new Y;let O=this.getOddCounts(),V=this.getEvenCounts(),ee=this.getOddRoundingErrors(),ue=this.getEvenRoundingErrors();for(let Sr=0;Sr<p.length;Sr++){let Ta=1*p[Sr]/N,as=Ta+.5;if(as<1){if(Ta<.3)throw new Y;as=1}else if(as>8){if(Ta>8.7)throw new Y;as=8}let pi=Sr/2;(Sr&1)==0?(O[pi]=as,ee[pi]=Ta-as):(V[pi]=as,ue[pi]=Ta-as)}this.adjustOddEvenCounts(v);let je=4*c.getValue()+(u?0:2)+(m?0:1)-1,De=0,Me=0;for(let Sr=O.length-1;Sr>=0;Sr--){if(tt.isNotA1left(c,u,m)){let Ta=tt.WEIGHTS[je][2*Sr];Me+=O[Sr]*Ta}De+=O[Sr]}let Ue=0;for(let Sr=V.length-1;Sr>=0;Sr--)if(tt.isNotA1left(c,u,m)){let Ta=tt.WEIGHTS[je][2*Sr+1];Ue+=V[Sr]*Ta}let Ke=Me+Ue;if((De&1)!=0||De>13||De<4)throw new Y;let ht=(13-De)/2,gt=tt.SYMBOL_WIDEST[ht],ft=9-gt,Kt=ca.getRSSvalue(O,gt,!0),$t=ca.getRSSvalue(V,ft,!1),Va=tt.EVEN_TOTAL_SUBSET[ht],Ss=tt.GSUM[ht],rs=Kt*Va+$t+Ss;return new yn(rs,Ke)}static isNotA1left(i,c,u){return!(i.getValue()==0&&c&&u)}adjustOddEvenCounts(i){let c=fe.sum(new Int32Array(this.getOddCounts())),u=fe.sum(new Int32Array(this.getEvenCounts())),m=!1,p=!1;c>13?p=!0:c<4&&(m=!0);let v=!1,N=!1;u>13?N=!0:u<4&&(v=!0);let _=c+u-i,O=(c&1)==1,V=(u&1)==0;if(_==1)if(O){if(V)throw new Y;p=!0}else{if(!V)throw new Y;N=!0}else if(_==-1)if(O){if(V)throw new Y;m=!0}else{if(!V)throw new Y;v=!0}else if(_==0){if(O){if(!V)throw new Y;c<u?(m=!0,N=!0):(p=!0,v=!0)}else if(V)throw new Y}else throw new Y;if(m){if(p)throw new Y;tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(p&&tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(N)throw new Y;tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tt.SYMBOL_WIDEST=[7,5,4,3,1],tt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],tt.GSUM=[0,348,1388,2948,3988],tt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],tt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],tt.FINDER_PAT_A=0,tt.FINDER_PAT_B=1,tt.FINDER_PAT_C=2,tt.FINDER_PAT_D=3,tt.FINDER_PAT_E=4,tt.FINDER_PAT_F=5,tt.FINDER_PATTERN_SEQUENCES=[[tt.FINDER_PAT_A,tt.FINDER_PAT_A],[tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B],[tt.FINDER_PAT_A,tt.FINDER_PAT_C,tt.FINDER_PAT_B,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_C],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F]],tt.MAX_PAIRS=11;class kr extends yn{constructor(i,c,u){super(i,c),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class zt extends ea{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(i,c,u){const m=this.decodePair(c,!1,i,u);zt.addOrTally(this.possibleLeftPairs,m),c.reverse();let p=this.decodePair(c,!0,i,u);zt.addOrTally(this.possibleRightPairs,p),c.reverse();for(let v of this.possibleLeftPairs)if(v.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&zt.checkChecksum(v,N))return zt.constructResult(v,N)}throw new Y}static addOrTally(i,c){if(c==null)return;let u=!1;for(let m of i)if(m.getValue()===c.getValue()){m.incrementCount(),u=!0;break}u||i.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(i,c){let u=4537077*i.getValue()+c.getValue(),m=new String(u).toString(),p=new se;for(let O=13-m.length;O>0;O--)p.append("0");p.append(m);let v=0;for(let O=0;O<13;O++){let V=p.charAt(O).charCodeAt(0)-48;v+=(O&1)===0?3*V:V}v=10-v%10,v===10&&(v=0),p.append(v.toString());let N=i.getFinderPattern().getResultPoints(),_=c.getFinderPattern().getResultPoints();return new ae(p.toString(),null,0,[N[0],N[1],_[0],_[1]],re.RSS_14,new Date().getTime())}static checkChecksum(i,c){let u=(i.getChecksumPortion()+16*c.getChecksumPortion())%79,m=9*i.getFinderPattern().getValue()+c.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,u===m}decodePair(i,c,u,m){try{let p=this.findFinderPattern(i,c),v=this.parseFoundFinderPattern(i,u,c,p),N=m==null?null:m.get(U.NEED_RESULT_POINT_CALLBACK);if(N!=null){let V=(p[0]+p[1])/2;c&&(V=i.getSize()-1-V),N.foundPossibleResultPoint(new Ce(V,u))}let _=this.decodeDataCharacter(i,v,!0),O=this.decodeDataCharacter(i,v,!1);return new kr(1597*_.getValue()+O.getValue(),_.getChecksumPortion()+4*O.getChecksumPortion(),v)}catch{return null}}decodeDataCharacter(i,c,u){let m=this.getDataCharacterCounters();for(let Ue=0;Ue<m.length;Ue++)m[Ue]=0;if(u)Nt.recordPatternInReverse(i,c.getStartEnd()[0],m);else{Nt.recordPattern(i,c.getStartEnd()[1]+1,m);for(let Ue=0,Ke=m.length-1;Ue<Ke;Ue++,Ke--){let ht=m[Ue];m[Ue]=m[Ke],m[Ke]=ht}}let p=u?16:15,v=fe.sum(new Int32Array(m))/p,N=this.getOddCounts(),_=this.getEvenCounts(),O=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let Ue=0;Ue<m.length;Ue++){let Ke=m[Ue]/v,ht=Math.floor(Ke+.5);ht<1?ht=1:ht>8&&(ht=8);let gt=Math.floor(Ue/2);(Ue&1)===0?(N[gt]=ht,O[gt]=Ke-ht):(_[gt]=ht,V[gt]=Ke-ht)}this.adjustOddEvenCounts(u,p);let ee=0,ue=0;for(let Ue=N.length-1;Ue>=0;Ue--)ue*=9,ue+=N[Ue],ee+=N[Ue];let je=0,De=0;for(let Ue=_.length-1;Ue>=0;Ue--)je*=9,je+=_[Ue],De+=_[Ue];let Me=ue+3*je;if(u){if((ee&1)!==0||ee>12||ee<4)throw new Y;let Ue=(12-ee)/2,Ke=zt.OUTSIDE_ODD_WIDEST[Ue],ht=9-Ke,gt=ca.getRSSvalue(N,Ke,!1),ft=ca.getRSSvalue(_,ht,!0),Kt=zt.OUTSIDE_EVEN_TOTAL_SUBSET[Ue],$t=zt.OUTSIDE_GSUM[Ue];return new yn(gt*Kt+ft+$t,Me)}else{if((De&1)!==0||De>10||De<4)throw new Y;let Ue=(10-De)/2,Ke=zt.INSIDE_ODD_WIDEST[Ue],ht=9-Ke,gt=ca.getRSSvalue(N,Ke,!0),ft=ca.getRSSvalue(_,ht,!1),Kt=zt.INSIDE_ODD_TOTAL_SUBSET[Ue],$t=zt.INSIDE_GSUM[Ue];return new yn(ft*Kt+gt+$t,Me)}}findFinderPattern(i,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let m=i.getSize(),p=!1,v=0;for(;v<m&&(p=!i.get(v),c!==p);)v++;let N=0,_=v;for(let O=v;O<m;O++)if(i.get(O)!==p)u[N]++;else{if(N===3){if(ea.isFinderPattern(u))return[_,O];_+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,N--}else N++;u[N]=1,p=!p}throw new Y}parseFoundFinderPattern(i,c,u,m){let p=i.get(m[0]),v=m[0]-1;for(;v>=0&&p!==i.get(v);)v--;v++;const N=m[0]-v,_=this.getDecodeFinderCounters(),O=new Int32Array(_.length);A.arraycopy(_,0,O,1,_.length-1),O[0]=N;const V=this.parseFinderValue(O,zt.FINDER_PATTERNS);let ee=v,ue=m[1];return u&&(ee=i.getSize()-1-ee,ue=i.getSize()-1-ue),new Vi(V,[v,m[1]],ee,ue,c)}adjustOddEvenCounts(i,c){let u=fe.sum(new Int32Array(this.getOddCounts())),m=fe.sum(new Int32Array(this.getEvenCounts())),p=!1,v=!1,N=!1,_=!1;i?(u>12?v=!0:u<4&&(p=!0),m>12?_=!0:m<4&&(N=!0)):(u>11?v=!0:u<5&&(p=!0),m>10?_=!0:m<4&&(N=!0));let O=u+m-c,V=(u&1)===(i?1:0),ee=(m&1)===1;if(O===1)if(V){if(ee)throw new Y;v=!0}else{if(!ee)throw new Y;_=!0}else if(O===-1)if(V){if(ee)throw new Y;p=!0}else{if(!ee)throw new Y;N=!0}else if(O===0){if(V){if(!ee)throw new Y;u<m?(p=!0,_=!0):(v=!0,N=!0)}else if(ee)throw new Y}else throw new Y;if(p){if(v)throw new Y;ea.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&ea.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(_)throw new Y;ea.increment(this.getEvenCounts(),this.getOddRoundingErrors())}_&&ea.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}zt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],zt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],zt.OUTSIDE_GSUM=[0,161,961,2015,2715],zt.INSIDE_GSUM=[0,336,1036,1516],zt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],zt.INSIDE_ODD_WIDEST=[2,4,6,8],zt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Qa extends Nt{constructor(i,c){super(),this.readers=[],this.verbose=c===!0;const u=i?i.get(U.POSSIBLE_FORMATS):null,m=i&&i.get(U.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(re.EAN_13)||u.includes(re.UPC_A)||u.includes(re.EAN_8)||u.includes(re.UPC_E))&&this.readers.push(new fi(i)),u.includes(re.CODE_39)&&this.readers.push(new At(m)),u.includes(re.CODE_128)&&this.readers.push(new lt),u.includes(re.ITF)&&this.readers.push(new vt),u.includes(re.RSS_14)&&this.readers.push(new zt),u.includes(re.RSS_EXPANDED)&&this.readers.push(new tt(this.verbose))):(this.readers.push(new fi(i)),this.readers.push(new At),this.readers.push(new fi(i)),this.readers.push(new lt),this.readers.push(new vt),this.readers.push(new zt),this.readers.push(new tt(this.verbose)))}decodeRow(i,c,u){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(i,c,u)}catch{}throw new Y}reset(){this.readers.forEach(i=>i.reset())}}class Pn extends K{constructor(i=500,c){super(new Qa(c),i,c)}}class Qt{constructor(i,c,u){this.ecCodewords=i,this.ecBlocks=[c],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Jt{constructor(i,c){this.count=i,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class er{constructor(i,c,u,m,p,v){this.versionNumber=i,this.symbolSizeRows=c,this.symbolSizeColumns=u,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=p,this.ecBlocks=v;let N=0;const _=v.getECCodewords(),O=v.getECBlocks();for(let V of O)N+=V.getCount()*(V.getDataCodewords()+_);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(i,c){if((i&1)!==0||(c&1)!==0)throw new B;for(let u of er.VERSIONS)if(u.symbolSizeRows===i&&u.symbolSizeColumns===c)return u;throw new B}toString(){return""+this.versionNumber}static buildVersions(){return[new er(1,10,10,8,8,new Qt(5,new Jt(1,3))),new er(2,12,12,10,10,new Qt(7,new Jt(1,5))),new er(3,14,14,12,12,new Qt(10,new Jt(1,8))),new er(4,16,16,14,14,new Qt(12,new Jt(1,12))),new er(5,18,18,16,16,new Qt(14,new Jt(1,18))),new er(6,20,20,18,18,new Qt(18,new Jt(1,22))),new er(7,22,22,20,20,new Qt(20,new Jt(1,30))),new er(8,24,24,22,22,new Qt(24,new Jt(1,36))),new er(9,26,26,24,24,new Qt(28,new Jt(1,44))),new er(10,32,32,14,14,new Qt(36,new Jt(1,62))),new er(11,36,36,16,16,new Qt(42,new Jt(1,86))),new er(12,40,40,18,18,new Qt(48,new Jt(1,114))),new er(13,44,44,20,20,new Qt(56,new Jt(1,144))),new er(14,48,48,22,22,new Qt(68,new Jt(1,174))),new er(15,52,52,24,24,new Qt(42,new Jt(2,102))),new er(16,64,64,14,14,new Qt(56,new Jt(2,140))),new er(17,72,72,16,16,new Qt(36,new Jt(4,92))),new er(18,80,80,18,18,new Qt(48,new Jt(4,114))),new er(19,88,88,20,20,new Qt(56,new Jt(4,144))),new er(20,96,96,22,22,new Qt(68,new Jt(4,174))),new er(21,104,104,24,24,new Qt(56,new Jt(6,136))),new er(22,120,120,18,18,new Qt(68,new Jt(6,175))),new er(23,132,132,20,20,new Qt(62,new Jt(8,163))),new er(24,144,144,22,22,new Qt(62,new Jt(8,156),new Jt(2,155))),new er(25,8,18,6,16,new Qt(7,new Jt(1,5))),new er(26,8,32,6,14,new Qt(11,new Jt(1,10))),new er(27,12,26,10,24,new Qt(14,new Jt(1,16))),new er(28,12,36,10,16,new Qt(18,new Jt(1,22))),new er(29,16,36,14,16,new Qt(24,new Jt(1,32))),new er(30,16,48,14,22,new Qt(28,new Jt(1,49)))]}}er.VERSIONS=er.buildVersions();class ms{constructor(i){const c=i.getHeight();if(c<8||c>144||(c&1)!==0)throw new B;this.version=ms.readVersion(i),this.mappingBitMatrix=this.extractDataRegion(i),this.readMappingMatrix=new ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(i){const c=i.getHeight(),u=i.getWidth();return er.getVersionForDimensions(c,u)}readCodewords(){const i=new Int8Array(this.version.getTotalCodewords());let c=0,u=4,m=0;const p=this.mappingBitMatrix.getHeight(),v=this.mappingBitMatrix.getWidth();let N=!1,_=!1,O=!1,V=!1;do if(u===p&&m===0&&!N)i[c++]=this.readCorner1(p,v)&255,u-=2,m+=2,N=!0;else if(u===p-2&&m===0&&(v&3)!==0&&!_)i[c++]=this.readCorner2(p,v)&255,u-=2,m+=2,_=!0;else if(u===p+4&&m===2&&(v&7)===0&&!O)i[c++]=this.readCorner3(p,v)&255,u-=2,m+=2,O=!0;else if(u===p-2&&m===0&&(v&7)===4&&!V)i[c++]=this.readCorner4(p,v)&255,u-=2,m+=2,V=!0;else{do u<p&&m>=0&&!this.readMappingMatrix.get(m,u)&&(i[c++]=this.readUtah(u,m,p,v)&255),u-=2,m+=2;while(u>=0&&m<v);u+=1,m+=3;do u>=0&&m<v&&!this.readMappingMatrix.get(m,u)&&(i[c++]=this.readUtah(u,m,p,v)&255),u+=2,m-=2;while(u<p&&m>=0);u+=3,m+=1}while(u<p||m<v);if(c!==this.version.getTotalCodewords())throw new B;return i}readModule(i,c,u,m){return i<0&&(i+=u,c+=4-(u+4&7)),c<0&&(c+=m,i+=4-(m+4&7)),this.readMappingMatrix.set(c,i),this.mappingBitMatrix.get(c,i)}readUtah(i,c,u,m){let p=0;return this.readModule(i-2,c-2,u,m)&&(p|=1),p<<=1,this.readModule(i-2,c-1,u,m)&&(p|=1),p<<=1,this.readModule(i-1,c-2,u,m)&&(p|=1),p<<=1,this.readModule(i-1,c-1,u,m)&&(p|=1),p<<=1,this.readModule(i-1,c,u,m)&&(p|=1),p<<=1,this.readModule(i,c-2,u,m)&&(p|=1),p<<=1,this.readModule(i,c-1,u,m)&&(p|=1),p<<=1,this.readModule(i,c,u,m)&&(p|=1),p}readCorner1(i,c){let u=0;return this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,1,i,c)&&(u|=1),u<<=1,this.readModule(i-1,2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u<<=1,this.readModule(2,c-1,i,c)&&(u|=1),u<<=1,this.readModule(3,c-1,i,c)&&(u|=1),u}readCorner2(i,c){let u=0;return this.readModule(i-3,0,i,c)&&(u|=1),u<<=1,this.readModule(i-2,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(0,c-4,i,c)&&(u|=1),u<<=1,this.readModule(0,c-3,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u}readCorner3(i,c){let u=0;return this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,c-1,i,c)&&(u|=1),u<<=1,this.readModule(0,c-3,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-3,i,c)&&(u|=1),u<<=1,this.readModule(1,c-2,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u}readCorner4(i,c){let u=0;return this.readModule(i-3,0,i,c)&&(u|=1),u<<=1,this.readModule(i-2,0,i,c)&&(u|=1),u<<=1,this.readModule(i-1,0,i,c)&&(u|=1),u<<=1,this.readModule(0,c-2,i,c)&&(u|=1),u<<=1,this.readModule(0,c-1,i,c)&&(u|=1),u<<=1,this.readModule(1,c-1,i,c)&&(u|=1),u<<=1,this.readModule(2,c-1,i,c)&&(u|=1),u<<=1,this.readModule(3,c-1,i,c)&&(u|=1),u}extractDataRegion(i){const c=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(i.getHeight()!==c)throw new k("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),p=this.version.getDataRegionSizeColumns(),v=c/m|0,N=u/p|0,_=v*m,O=N*p,V=new ie(O,_);for(let ee=0;ee<v;++ee){const ue=ee*m;for(let je=0;je<N;++je){const De=je*p;for(let Me=0;Me<m;++Me){const Ue=ee*(m+2)+1+Me,Ke=ue+Me;for(let ht=0;ht<p;++ht){const gt=je*(p+2)+1+ht;if(i.get(gt,Ue)){const ft=De+ht;V.set(ft,Ke)}}}}}return V}}class Ro{constructor(i,c){this.numDataCodewords=i,this.codewords=c}static getDataBlocks(i,c){const u=c.getECBlocks();let m=0;const p=u.getECBlocks();for(let Me of p)m+=Me.getCount();const v=new Array(m);let N=0;for(let Me of p)for(let Ue=0;Ue<Me.getCount();Ue++){const Ke=Me.getDataCodewords(),ht=u.getECCodewords()+Ke;v[N++]=new Ro(Ke,new Uint8Array(ht))}const O=v[0].codewords.length-u.getECCodewords(),V=O-1;let ee=0;for(let Me=0;Me<V;Me++)for(let Ue=0;Ue<N;Ue++)v[Ue].codewords[Me]=i[ee++];const ue=c.getVersionNumber()===24,je=ue?8:N;for(let Me=0;Me<je;Me++)v[Me].codewords[O-1]=i[ee++];const De=v[0].codewords.length;for(let Me=O;Me<De;Me++)for(let Ue=0;Ue<N;Ue++){const Ke=ue?(Ue+8)%N:Ue,ht=ue&&Ke>7?Me-1:Me;v[Ke].codewords[ht]=i[ee++]}if(ee!==i.length)throw new k;return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Ja{constructor(i){this.bytes=i,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(i){if(i<1||i>32||i>this.available())throw new k(""+i);let c=0,u=this.bitOffset,m=this.byteOffset;const p=this.bytes;if(u>0){const v=8-u,N=i<v?i:v,_=v-N,O=255>>8-N<<_;c=(p[m]&O)>>_,i-=N,u+=N,u===8&&(u=0,m++)}if(i>0){for(;i>=8;)c=c<<8|p[m]&255,m++,i-=8;if(i>0){const v=8-i,N=255>>v<<v;c=c<<i|(p[m]&N)>>v,u+=i}}return this.bitOffset=u,this.byteOffset=m,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ta;(function(J){J[J.PAD_ENCODE=0]="PAD_ENCODE",J[J.ASCII_ENCODE=1]="ASCII_ENCODE",J[J.C40_ENCODE=2]="C40_ENCODE",J[J.TEXT_ENCODE=3]="TEXT_ENCODE",J[J.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",J[J.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",J[J.BASE256_ENCODE=6]="BASE256_ENCODE"})(ta||(ta={}));class zn{static decode(i){const c=new Ja(i),u=new se,m=new se,p=new Array;let v=ta.ASCII_ENCODE;do if(v===ta.ASCII_ENCODE)v=this.decodeAsciiSegment(c,u,m);else{switch(v){case ta.C40_ENCODE:this.decodeC40Segment(c,u);break;case ta.TEXT_ENCODE:this.decodeTextSegment(c,u);break;case ta.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,u);break;case ta.EDIFACT_ENCODE:this.decodeEdifactSegment(c,u);break;case ta.BASE256_ENCODE:this.decodeBase256Segment(c,u,p);break;default:throw new B}v=ta.ASCII_ENCODE}while(v!==ta.PAD_ENCODE&&c.available()>0);return m.length()>0&&u.append(m.toString()),new Pe(i,u.toString(),p.length===0?null:p,null)}static decodeAsciiSegment(i,c,u){let m=!1;do{let p=i.readBits(8);if(p===0)throw new B;if(p<=128)return m&&(p+=128),c.append(String.fromCharCode(p-1)),ta.ASCII_ENCODE;if(p===129)return ta.PAD_ENCODE;if(p<=229){const v=p-130;v<10&&c.append("0"),c.append(""+v)}else switch(p){case 230:return ta.C40_ENCODE;case 231:return ta.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:c.append("[)>05"),u.insert(0,"");break;case 237:c.append("[)>06"),u.insert(0,"");break;case 238:return ta.ANSIX12_ENCODE;case 239:return ta.TEXT_ENCODE;case 240:return ta.EDIFACT_ENCODE;case 241:break;default:if(p!==254||i.available()!==0)throw new B;break}}while(i.available()>0);return ta.ASCII_ENCODE}static decodeC40Segment(i,c){let u=!1;const m=[];let p=0;do{if(i.available()===8)return;const v=i.readBits(8);if(v===254)return;this.parseTwoBytes(v,i.readBits(8),m);for(let N=0;N<3;N++){const _=m[N];switch(p){case 0:if(_<3)p=_+1;else if(_<this.C40_BASIC_SET_CHARS.length){const O=this.C40_BASIC_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else throw new B;break;case 1:u?(c.append(String.fromCharCode(_+128)),u=!1):c.append(String.fromCharCode(_)),p=0;break;case 2:if(_<this.C40_SHIFT2_SET_CHARS.length){const O=this.C40_SHIFT2_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else switch(_){case 27:c.append("");break;case 30:u=!0;break;default:throw new B}p=0;break;case 3:u?(c.append(String.fromCharCode(_+224)),u=!1):c.append(String.fromCharCode(_+96)),p=0;break;default:throw new B}}}while(i.available()>0)}static decodeTextSegment(i,c){let u=!1,m=[],p=0;do{if(i.available()===8)return;const v=i.readBits(8);if(v===254)return;this.parseTwoBytes(v,i.readBits(8),m);for(let N=0;N<3;N++){const _=m[N];switch(p){case 0:if(_<3)p=_+1;else if(_<this.TEXT_BASIC_SET_CHARS.length){const O=this.TEXT_BASIC_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else throw new B;break;case 1:u?(c.append(String.fromCharCode(_+128)),u=!1):c.append(String.fromCharCode(_)),p=0;break;case 2:if(_<this.TEXT_SHIFT2_SET_CHARS.length){const O=this.TEXT_SHIFT2_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O)}else switch(_){case 27:c.append("");break;case 30:u=!0;break;default:throw new B}p=0;break;case 3:if(_<this.TEXT_SHIFT3_SET_CHARS.length){const O=this.TEXT_SHIFT3_SET_CHARS[_];u?(c.append(String.fromCharCode(O.charCodeAt(0)+128)),u=!1):c.append(O),p=0}else throw new B;break;default:throw new B}}}while(i.available()>0)}static decodeAnsiX12Segment(i,c){const u=[];do{if(i.available()===8)return;const m=i.readBits(8);if(m===254)return;this.parseTwoBytes(m,i.readBits(8),u);for(let p=0;p<3;p++){const v=u[p];switch(v){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(v<14)c.append(String.fromCharCode(v+44));else if(v<40)c.append(String.fromCharCode(v+51));else throw new B;break}}}while(i.available()>0)}static parseTwoBytes(i,c,u){let m=(i<<8)+c-1,p=Math.floor(m/1600);u[0]=p,m-=p*1600,p=Math.floor(m/40),u[1]=p,u[2]=m-p*40}static decodeEdifactSegment(i,c){do{if(i.available()<=16)return;for(let u=0;u<4;u++){let m=i.readBits(6);if(m===31){const p=8-i.getBitOffset();p!==8&&i.readBits(p);return}(m&32)===0&&(m|=64),c.append(String.fromCharCode(m))}}while(i.available()>0)}static decodeBase256Segment(i,c,u){let m=1+i.getByteOffset();const p=this.unrandomize255State(i.readBits(8),m++);let v;if(p===0?v=i.available()/8|0:p<250?v=p:v=250*(p-249)+this.unrandomize255State(i.readBits(8),m++),v<0)throw new B;const N=new Uint8Array(v);for(let _=0;_<v;_++){if(i.available()<8)throw new B;N[_]=this.unrandomize255State(i.readBits(8),m++)}u.push(N);try{c.append(te.decode(N,G.ISO88591))}catch(_){throw new Ee("Platform does not support required encoding: "+_.message)}}static unrandomize255State(i,c){const u=149*c%255+1,m=i-u;return m>=0?m:m+256}}zn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],zn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],zn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],zn.TEXT_SHIFT2_SET_CHARS=zn.C40_SHIFT2_SET_CHARS,zn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Mo{constructor(){this.rsDecoder=new Je(Ae.DATA_MATRIX_FIELD_256)}decode(i){const c=new ms(i),u=c.getVersion(),m=c.readCodewords(),p=Ro.getDataBlocks(m,u);let v=0;for(let O of p)v+=O.getNumDataCodewords();const N=new Uint8Array(v),_=p.length;for(let O=0;O<_;O++){const V=p[O],ee=V.getCodewords(),ue=V.getNumDataCodewords();this.correctErrors(ee,ue);for(let je=0;je<ue;je++)N[je*_+O]=ee[je]}return zn.decode(N)}correctErrors(i,c){const u=new Int32Array(i);try{this.rsDecoder.decode(u,i.length-c)}catch{throw new S}for(let m=0;m<c;m++)i[m]=u[m]}}class Xr{constructor(i){this.image=i,this.rectangleDetector=new Ct(this.image)}detect(){const i=this.rectangleDetector.detect();let c=this.detectSolid1(i);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new Y;c=this.shiftToModuleCenter(c);const u=c[0],m=c[1],p=c[2],v=c[3];let N=this.transitionsBetween(u,v)+1,_=this.transitionsBetween(p,v)+1;(N&1)===1&&(N+=1),(_&1)===1&&(_+=1),4*N<7*_&&4*_<7*N&&(N=_=Math.max(N,_));let O=Xr.sampleGrid(this.image,u,m,p,v,N,_);return new wt(O,[u,m,p,v])}static shiftPoint(i,c,u){let m=(c.getX()-i.getX())/(u+1),p=(c.getY()-i.getY())/(u+1);return new Ce(i.getX()+m,i.getY()+p)}static moveAway(i,c,u){let m=i.getX(),p=i.getY();return m<c?m-=1:m+=1,p<u?p-=1:p+=1,new Ce(m,p)}detectSolid1(i){let c=i[0],u=i[1],m=i[3],p=i[2],v=this.transitionsBetween(c,u),N=this.transitionsBetween(u,m),_=this.transitionsBetween(m,p),O=this.transitionsBetween(p,c),V=v,ee=[p,c,u,m];return V>N&&(V=N,ee[0]=c,ee[1]=u,ee[2]=m,ee[3]=p),V>_&&(V=_,ee[0]=u,ee[1]=m,ee[2]=p,ee[3]=c),V>O&&(ee[0]=m,ee[1]=p,ee[2]=c,ee[3]=u),ee}detectSolid2(i){let c=i[0],u=i[1],m=i[2],p=i[3],v=this.transitionsBetween(c,p),N=Xr.shiftPoint(u,m,(v+1)*4),_=Xr.shiftPoint(m,u,(v+1)*4),O=this.transitionsBetween(N,c),V=this.transitionsBetween(_,p);return O<V?(i[0]=c,i[1]=u,i[2]=m,i[3]=p):(i[0]=u,i[1]=m,i[2]=p,i[3]=c),i}correctTopRight(i){let c=i[0],u=i[1],m=i[2],p=i[3],v=this.transitionsBetween(c,p),N=this.transitionsBetween(u,p),_=Xr.shiftPoint(c,u,(N+1)*4),O=Xr.shiftPoint(m,u,(v+1)*4);v=this.transitionsBetween(_,p),N=this.transitionsBetween(O,p);let V=new Ce(p.getX()+(m.getX()-u.getX())/(v+1),p.getY()+(m.getY()-u.getY())/(v+1)),ee=new Ce(p.getX()+(c.getX()-u.getX())/(N+1),p.getY()+(c.getY()-u.getY())/(N+1));if(!this.isValid(V))return this.isValid(ee)?ee:null;if(!this.isValid(ee))return V;let ue=this.transitionsBetween(_,V)+this.transitionsBetween(O,V),je=this.transitionsBetween(_,ee)+this.transitionsBetween(O,ee);return ue>je?V:ee}shiftToModuleCenter(i){let c=i[0],u=i[1],m=i[2],p=i[3],v=this.transitionsBetween(c,p)+1,N=this.transitionsBetween(m,p)+1,_=Xr.shiftPoint(c,u,N*4),O=Xr.shiftPoint(m,u,v*4);v=this.transitionsBetween(_,p)+1,N=this.transitionsBetween(O,p)+1,(v&1)===1&&(v+=1),(N&1)===1&&(N+=1);let V=(c.getX()+u.getX()+m.getX()+p.getX())/4,ee=(c.getY()+u.getY()+m.getY()+p.getY())/4;c=Xr.moveAway(c,V,ee),u=Xr.moveAway(u,V,ee),m=Xr.moveAway(m,V,ee),p=Xr.moveAway(p,V,ee);let ue,je;return _=Xr.shiftPoint(c,u,N*4),_=Xr.shiftPoint(_,p,v*4),ue=Xr.shiftPoint(u,c,N*4),ue=Xr.shiftPoint(ue,m,v*4),O=Xr.shiftPoint(m,p,N*4),O=Xr.shiftPoint(O,u,v*4),je=Xr.shiftPoint(p,m,N*4),je=Xr.shiftPoint(je,c,v*4),[_,ue,O,je]}isValid(i){return i.getX()>=0&&i.getX()<this.image.getWidth()&&i.getY()>0&&i.getY()<this.image.getHeight()}static sampleGrid(i,c,u,m,p,v,N){return Ut.getInstance().sampleGrid(i,v,N,.5,.5,v-.5,.5,v-.5,N-.5,.5,N-.5,c.getX(),c.getY(),p.getX(),p.getY(),m.getX(),m.getY(),u.getX(),u.getY())}transitionsBetween(i,c){let u=Math.trunc(i.getX()),m=Math.trunc(i.getY()),p=Math.trunc(c.getX()),v=Math.trunc(c.getY()),N=Math.abs(v-m)>Math.abs(p-u);if(N){let Me=u;u=m,m=Me,Me=p,p=v,v=Me}let _=Math.abs(p-u),O=Math.abs(v-m),V=-_/2,ee=m<v?1:-1,ue=u<p?1:-1,je=0,De=this.image.get(N?m:u,N?u:m);for(let Me=u,Ue=m;Me!==p;Me+=ue){let Ke=this.image.get(N?Ue:Me,N?Me:Ue);if(Ke!==De&&(je++,De=Ke),V+=O,V>0){if(Ue===v)break;Ue+=ee,V-=_}}return je}}class Fs{constructor(){this.decoder=new Mo}decode(i,c=null){let u,m;if(c!=null&&c.has(U.PURE_BARCODE)){const O=Fs.extractPureBits(i.getBlackMatrix());u=this.decoder.decode(O),m=Fs.NO_POINTS}else{const O=new Xr(i.getBlackMatrix()).detect();u=this.decoder.decode(O.getBits()),m=O.getPoints()}const p=u.getRawBytes(),v=new ae(u.getText(),p,8*p.length,m,re.DATA_MATRIX,A.currentTimeMillis()),N=u.getByteSegments();N!=null&&v.putMetadata(ke.BYTE_SEGMENTS,N);const _=u.getECLevel();return _!=null&&v.putMetadata(ke.ERROR_CORRECTION_LEVEL,_),v}reset(){}static extractPureBits(i){const c=i.getTopLeftOnBit(),u=i.getBottomRightOnBit();if(c==null||u==null)throw new Y;const m=this.moduleSize(c,i);let p=c[1];const v=u[1];let N=c[0];const O=(u[0]-N+1)/m,V=(v-p+1)/m;if(O<=0||V<=0)throw new Y;const ee=m/2;p+=ee,N+=ee;const ue=new ie(O,V);for(let je=0;je<V;je++){const De=p+je*m;for(let Me=0;Me<O;Me++)i.get(N+Me*m,De)&&ue.set(Me,je)}return ue}static moduleSize(i,c){const u=c.getWidth();let m=i[0];const p=i[1];for(;m<u&&c.get(m,p);)m++;if(m===u)throw new Y;const v=m-i[0];if(v===0)throw new Y;return v}}Fs.NO_POINTS=[];class Df extends K{constructor(i=500){super(new Fs,i)}}var Ca;(function(J){J[J.L=0]="L",J[J.M=1]="M",J[J.Q=2]="Q",J[J.H=3]="H"})(Ca||(Ca={}));class jr{constructor(i,c,u){this.value=i,this.stringValue=c,this.bits=u,jr.FOR_BITS.set(u,this),jr.FOR_VALUE.set(i,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(i){switch(i){case"L":return jr.L;case"M":return jr.M;case"Q":return jr.Q;case"H":return jr.H;default:throw new w(i+"not available")}}toString(){return this.stringValue}equals(i){if(!(i instanceof jr))return!1;const c=i;return this.value===c.value}static forBits(i){if(i<0||i>=jr.FOR_BITS.size)throw new k;return jr.FOR_BITS.get(i)}}jr.FOR_BITS=new Map,jr.FOR_VALUE=new Map,jr.L=new jr(Ca.L,"L",1),jr.M=new jr(Ca.M,"M",0),jr.Q=new jr(Ca.Q,"Q",3),jr.H=new jr(Ca.H,"H",2);class Sa{constructor(i){this.errorCorrectionLevel=jr.forBits(i>>3&3),this.dataMask=i&7}static numBitsDiffering(i,c){return T.bitCount(i^c)}static decodeFormatInformation(i,c){const u=Sa.doDecodeFormatInformation(i,c);return u!==null?u:Sa.doDecodeFormatInformation(i^Sa.FORMAT_INFO_MASK_QR,c^Sa.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(i,c){let u=Number.MAX_SAFE_INTEGER,m=0;for(const p of Sa.FORMAT_INFO_DECODE_LOOKUP){const v=p[0];if(v===i||v===c)return new Sa(p[1]);let N=Sa.numBitsDiffering(i,v);N<u&&(m=p[1],u=N),i!==c&&(N=Sa.numBitsDiffering(c,v),N<u&&(m=p[1],u=N))}return u<=3?new Sa(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(i){if(!(i instanceof Sa))return!1;const c=i;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Sa.FORMAT_INFO_MASK_QR=21522,Sa.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class He{constructor(i,...c){this.ecCodewordsPerBlock=i,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let i=0;const c=this.ecBlocks;for(const u of c)i+=u.getCount();return i}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ye{constructor(i,c){this.count=i,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(i,c,...u){this.versionNumber=i,this.alignmentPatternCenters=c,this.ecBlocks=u;let m=0;const p=u[0].getECCodewordsPerBlock(),v=u[0].getECBlocks();for(const N of v)m+=N.getCount()*(N.getDataCodewords()+p);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(i){return this.ecBlocks[i.getValue()]}static getProvisionalVersionForDimension(i){if(i%4!==1)throw new B;try{return this.getVersionForNumber((i-17)/4)}catch{throw new B}}static getVersionForNumber(i){if(i<1||i>40)throw new k;return Tt.VERSIONS[i-1]}static decodeVersionInformation(i){let c=Number.MAX_SAFE_INTEGER,u=0;for(let m=0;m<Tt.VERSION_DECODE_INFO.length;m++){const p=Tt.VERSION_DECODE_INFO[m];if(p===i)return Tt.getVersionForNumber(m+7);const v=Sa.numBitsDiffering(i,p);v<c&&(u=m+7,c=v)}return c<=3?Tt.getVersionForNumber(u):null}buildFunctionPattern(){const i=this.getDimensionForVersion(),c=new ie(i);c.setRegion(0,0,9,9),c.setRegion(i-8,0,8,9),c.setRegion(0,i-8,9,8);const u=this.alignmentPatternCenters.length;for(let m=0;m<u;m++){const p=this.alignmentPatternCenters[m]-2;for(let v=0;v<u;v++)m===0&&(v===0||v===u-1)||m===u-1&&v===0||c.setRegion(this.alignmentPatternCenters[v]-2,p,5,5)}return c.setRegion(6,9,1,i-17),c.setRegion(9,6,i-17,1),this.versionNumber>6&&(c.setRegion(i-11,0,3,6),c.setRegion(0,i-11,6,3)),c}toString(){return""+this.versionNumber}}Tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Tt.VERSIONS=[new Tt(1,new Int32Array(0),new He(7,new ye(1,19)),new He(10,new ye(1,16)),new He(13,new ye(1,13)),new He(17,new ye(1,9))),new Tt(2,Int32Array.from([6,18]),new He(10,new ye(1,34)),new He(16,new ye(1,28)),new He(22,new ye(1,22)),new He(28,new ye(1,16))),new Tt(3,Int32Array.from([6,22]),new He(15,new ye(1,55)),new He(26,new ye(1,44)),new He(18,new ye(2,17)),new He(22,new ye(2,13))),new Tt(4,Int32Array.from([6,26]),new He(20,new ye(1,80)),new He(18,new ye(2,32)),new He(26,new ye(2,24)),new He(16,new ye(4,9))),new Tt(5,Int32Array.from([6,30]),new He(26,new ye(1,108)),new He(24,new ye(2,43)),new He(18,new ye(2,15),new ye(2,16)),new He(22,new ye(2,11),new ye(2,12))),new Tt(6,Int32Array.from([6,34]),new He(18,new ye(2,68)),new He(16,new ye(4,27)),new He(24,new ye(4,19)),new He(28,new ye(4,15))),new Tt(7,Int32Array.from([6,22,38]),new He(20,new ye(2,78)),new He(18,new ye(4,31)),new He(18,new ye(2,14),new ye(4,15)),new He(26,new ye(4,13),new ye(1,14))),new Tt(8,Int32Array.from([6,24,42]),new He(24,new ye(2,97)),new He(22,new ye(2,38),new ye(2,39)),new He(22,new ye(4,18),new ye(2,19)),new He(26,new ye(4,14),new ye(2,15))),new Tt(9,Int32Array.from([6,26,46]),new He(30,new ye(2,116)),new He(22,new ye(3,36),new ye(2,37)),new He(20,new ye(4,16),new ye(4,17)),new He(24,new ye(4,12),new ye(4,13))),new Tt(10,Int32Array.from([6,28,50]),new He(18,new ye(2,68),new ye(2,69)),new He(26,new ye(4,43),new ye(1,44)),new He(24,new ye(6,19),new ye(2,20)),new He(28,new ye(6,15),new ye(2,16))),new Tt(11,Int32Array.from([6,30,54]),new He(20,new ye(4,81)),new He(30,new ye(1,50),new ye(4,51)),new He(28,new ye(4,22),new ye(4,23)),new He(24,new ye(3,12),new ye(8,13))),new Tt(12,Int32Array.from([6,32,58]),new He(24,new ye(2,92),new ye(2,93)),new He(22,new ye(6,36),new ye(2,37)),new He(26,new ye(4,20),new ye(6,21)),new He(28,new ye(7,14),new ye(4,15))),new Tt(13,Int32Array.from([6,34,62]),new He(26,new ye(4,107)),new He(22,new ye(8,37),new ye(1,38)),new He(24,new ye(8,20),new ye(4,21)),new He(22,new ye(12,11),new ye(4,12))),new Tt(14,Int32Array.from([6,26,46,66]),new He(30,new ye(3,115),new ye(1,116)),new He(24,new ye(4,40),new ye(5,41)),new He(20,new ye(11,16),new ye(5,17)),new He(24,new ye(11,12),new ye(5,13))),new Tt(15,Int32Array.from([6,26,48,70]),new He(22,new ye(5,87),new ye(1,88)),new He(24,new ye(5,41),new ye(5,42)),new He(30,new ye(5,24),new ye(7,25)),new He(24,new ye(11,12),new ye(7,13))),new Tt(16,Int32Array.from([6,26,50,74]),new He(24,new ye(5,98),new ye(1,99)),new He(28,new ye(7,45),new ye(3,46)),new He(24,new ye(15,19),new ye(2,20)),new He(30,new ye(3,15),new ye(13,16))),new Tt(17,Int32Array.from([6,30,54,78]),new He(28,new ye(1,107),new ye(5,108)),new He(28,new ye(10,46),new ye(1,47)),new He(28,new ye(1,22),new ye(15,23)),new He(28,new ye(2,14),new ye(17,15))),new Tt(18,Int32Array.from([6,30,56,82]),new He(30,new ye(5,120),new ye(1,121)),new He(26,new ye(9,43),new ye(4,44)),new He(28,new ye(17,22),new ye(1,23)),new He(28,new ye(2,14),new ye(19,15))),new Tt(19,Int32Array.from([6,30,58,86]),new He(28,new ye(3,113),new ye(4,114)),new He(26,new ye(3,44),new ye(11,45)),new He(26,new ye(17,21),new ye(4,22)),new He(26,new ye(9,13),new ye(16,14))),new Tt(20,Int32Array.from([6,34,62,90]),new He(28,new ye(3,107),new ye(5,108)),new He(26,new ye(3,41),new ye(13,42)),new He(30,new ye(15,24),new ye(5,25)),new He(28,new ye(15,15),new ye(10,16))),new Tt(21,Int32Array.from([6,28,50,72,94]),new He(28,new ye(4,116),new ye(4,117)),new He(26,new ye(17,42)),new He(28,new ye(17,22),new ye(6,23)),new He(30,new ye(19,16),new ye(6,17))),new Tt(22,Int32Array.from([6,26,50,74,98]),new He(28,new ye(2,111),new ye(7,112)),new He(28,new ye(17,46)),new He(30,new ye(7,24),new ye(16,25)),new He(24,new ye(34,13))),new Tt(23,Int32Array.from([6,30,54,78,102]),new He(30,new ye(4,121),new ye(5,122)),new He(28,new ye(4,47),new ye(14,48)),new He(30,new ye(11,24),new ye(14,25)),new He(30,new ye(16,15),new ye(14,16))),new Tt(24,Int32Array.from([6,28,54,80,106]),new He(30,new ye(6,117),new ye(4,118)),new He(28,new ye(6,45),new ye(14,46)),new He(30,new ye(11,24),new ye(16,25)),new He(30,new ye(30,16),new ye(2,17))),new Tt(25,Int32Array.from([6,32,58,84,110]),new He(26,new ye(8,106),new ye(4,107)),new He(28,new ye(8,47),new ye(13,48)),new He(30,new ye(7,24),new ye(22,25)),new He(30,new ye(22,15),new ye(13,16))),new Tt(26,Int32Array.from([6,30,58,86,114]),new He(28,new ye(10,114),new ye(2,115)),new He(28,new ye(19,46),new ye(4,47)),new He(28,new ye(28,22),new ye(6,23)),new He(30,new ye(33,16),new ye(4,17))),new Tt(27,Int32Array.from([6,34,62,90,118]),new He(30,new ye(8,122),new ye(4,123)),new He(28,new ye(22,45),new ye(3,46)),new He(30,new ye(8,23),new ye(26,24)),new He(30,new ye(12,15),new ye(28,16))),new Tt(28,Int32Array.from([6,26,50,74,98,122]),new He(30,new ye(3,117),new ye(10,118)),new He(28,new ye(3,45),new ye(23,46)),new He(30,new ye(4,24),new ye(31,25)),new He(30,new ye(11,15),new ye(31,16))),new Tt(29,Int32Array.from([6,30,54,78,102,126]),new He(30,new ye(7,116),new ye(7,117)),new He(28,new ye(21,45),new ye(7,46)),new He(30,new ye(1,23),new ye(37,24)),new He(30,new ye(19,15),new ye(26,16))),new Tt(30,Int32Array.from([6,26,52,78,104,130]),new He(30,new ye(5,115),new ye(10,116)),new He(28,new ye(19,47),new ye(10,48)),new He(30,new ye(15,24),new ye(25,25)),new He(30,new ye(23,15),new ye(25,16))),new Tt(31,Int32Array.from([6,30,56,82,108,134]),new He(30,new ye(13,115),new ye(3,116)),new He(28,new ye(2,46),new ye(29,47)),new He(30,new ye(42,24),new ye(1,25)),new He(30,new ye(23,15),new ye(28,16))),new Tt(32,Int32Array.from([6,34,60,86,112,138]),new He(30,new ye(17,115)),new He(28,new ye(10,46),new ye(23,47)),new He(30,new ye(10,24),new ye(35,25)),new He(30,new ye(19,15),new ye(35,16))),new Tt(33,Int32Array.from([6,30,58,86,114,142]),new He(30,new ye(17,115),new ye(1,116)),new He(28,new ye(14,46),new ye(21,47)),new He(30,new ye(29,24),new ye(19,25)),new He(30,new ye(11,15),new ye(46,16))),new Tt(34,Int32Array.from([6,34,62,90,118,146]),new He(30,new ye(13,115),new ye(6,116)),new He(28,new ye(14,46),new ye(23,47)),new He(30,new ye(44,24),new ye(7,25)),new He(30,new ye(59,16),new ye(1,17))),new Tt(35,Int32Array.from([6,30,54,78,102,126,150]),new He(30,new ye(12,121),new ye(7,122)),new He(28,new ye(12,47),new ye(26,48)),new He(30,new ye(39,24),new ye(14,25)),new He(30,new ye(22,15),new ye(41,16))),new Tt(36,Int32Array.from([6,24,50,76,102,128,154]),new He(30,new ye(6,121),new ye(14,122)),new He(28,new ye(6,47),new ye(34,48)),new He(30,new ye(46,24),new ye(10,25)),new He(30,new ye(2,15),new ye(64,16))),new Tt(37,Int32Array.from([6,28,54,80,106,132,158]),new He(30,new ye(17,122),new ye(4,123)),new He(28,new ye(29,46),new ye(14,47)),new He(30,new ye(49,24),new ye(10,25)),new He(30,new ye(24,15),new ye(46,16))),new Tt(38,Int32Array.from([6,32,58,84,110,136,162]),new He(30,new ye(4,122),new ye(18,123)),new He(28,new ye(13,46),new ye(32,47)),new He(30,new ye(48,24),new ye(14,25)),new He(30,new ye(42,15),new ye(32,16))),new Tt(39,Int32Array.from([6,26,54,82,110,138,166]),new He(30,new ye(20,117),new ye(4,118)),new He(28,new ye(40,47),new ye(7,48)),new He(30,new ye(43,24),new ye(22,25)),new He(30,new ye(10,15),new ye(67,16))),new Tt(40,Int32Array.from([6,30,58,86,114,142,170]),new He(30,new ye(19,118),new ye(6,119)),new He(28,new ye(18,47),new ye(31,48)),new He(30,new ye(34,24),new ye(34,25)),new He(30,new ye(20,15),new ye(61,16)))];var da;(function(J){J[J.DATA_MASK_000=0]="DATA_MASK_000",J[J.DATA_MASK_001=1]="DATA_MASK_001",J[J.DATA_MASK_010=2]="DATA_MASK_010",J[J.DATA_MASK_011=3]="DATA_MASK_011",J[J.DATA_MASK_100=4]="DATA_MASK_100",J[J.DATA_MASK_101=5]="DATA_MASK_101",J[J.DATA_MASK_110=6]="DATA_MASK_110",J[J.DATA_MASK_111=7]="DATA_MASK_111"})(da||(da={}));class Aa{constructor(i,c){this.value=i,this.isMasked=c}unmaskBitMatrix(i,c){for(let u=0;u<c;u++)for(let m=0;m<c;m++)this.isMasked(u,m)&&i.flip(m,u)}}Aa.values=new Map([[da.DATA_MASK_000,new Aa(da.DATA_MASK_000,(J,i)=>(J+i&1)===0)],[da.DATA_MASK_001,new Aa(da.DATA_MASK_001,(J,i)=>(J&1)===0)],[da.DATA_MASK_010,new Aa(da.DATA_MASK_010,(J,i)=>i%3===0)],[da.DATA_MASK_011,new Aa(da.DATA_MASK_011,(J,i)=>(J+i)%3===0)],[da.DATA_MASK_100,new Aa(da.DATA_MASK_100,(J,i)=>(Math.floor(J/2)+Math.floor(i/3)&1)===0)],[da.DATA_MASK_101,new Aa(da.DATA_MASK_101,(J,i)=>J*i%6===0)],[da.DATA_MASK_110,new Aa(da.DATA_MASK_110,(J,i)=>J*i%6<3)],[da.DATA_MASK_111,new Aa(da.DATA_MASK_111,(J,i)=>(J+i+J*i%3&1)===0)]]);class Rf{constructor(i){const c=i.getHeight();if(c<21||(c&3)!==1)throw new B;this.bitMatrix=i}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let i=0;for(let p=0;p<6;p++)i=this.copyBit(p,8,i);i=this.copyBit(7,8,i),i=this.copyBit(8,8,i),i=this.copyBit(8,7,i);for(let p=5;p>=0;p--)i=this.copyBit(8,p,i);const c=this.bitMatrix.getHeight();let u=0;const m=c-7;for(let p=c-1;p>=m;p--)u=this.copyBit(8,p,u);for(let p=c-8;p<c;p++)u=this.copyBit(p,8,u);if(this.parsedFormatInfo=Sa.decodeFormatInformation(i,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new B}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const i=this.bitMatrix.getHeight(),c=Math.floor((i-17)/4);if(c<=6)return Tt.getVersionForNumber(c);let u=0;const m=i-11;for(let v=5;v>=0;v--)for(let N=i-9;N>=m;N--)u=this.copyBit(N,v,u);let p=Tt.decodeVersionInformation(u);if(p!==null&&p.getDimensionForVersion()===i)return this.parsedVersion=p,p;u=0;for(let v=5;v>=0;v--)for(let N=i-9;N>=m;N--)u=this.copyBit(v,N,u);if(p=Tt.decodeVersionInformation(u),p!==null&&p.getDimensionForVersion()===i)return this.parsedVersion=p,p;throw new B}copyBit(i,c,u){return(this.isMirror?this.bitMatrix.get(c,i):this.bitMatrix.get(i,c))?u<<1|1:u<<1}readCodewords(){const i=this.readFormatInformation(),c=this.readVersion(),u=Aa.values.get(i.getDataMask()),m=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,m);const p=c.buildFunctionPattern();let v=!0;const N=new Uint8Array(c.getTotalCodewords());let _=0,O=0,V=0;for(let ee=m-1;ee>0;ee-=2){ee===6&&ee--;for(let ue=0;ue<m;ue++){const je=v?m-1-ue:ue;for(let De=0;De<2;De++)p.get(ee-De,je)||(V++,O<<=1,this.bitMatrix.get(ee-De,je)&&(O|=1),V===8&&(N[_++]=O,V=0,O=0))}v=!v}if(_!==c.getTotalCodewords())throw new B;return N}remask(){if(this.parsedFormatInfo===null)return;const i=Aa.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,c)}setMirror(i){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=i}mirror(){const i=this.bitMatrix;for(let c=0,u=i.getWidth();c<u;c++)for(let m=c+1,p=i.getHeight();m<p;m++)i.get(c,m)!==i.get(m,c)&&(i.flip(m,c),i.flip(c,m))}}class Io{constructor(i,c){this.numDataCodewords=i,this.codewords=c}static getDataBlocks(i,c,u){if(i.length!==c.getTotalCodewords())throw new k;const m=c.getECBlocksForLevel(u);let p=0;const v=m.getECBlocks();for(const De of v)p+=De.getCount();const N=new Array(p);let _=0;for(const De of v)for(let Me=0;Me<De.getCount();Me++){const Ue=De.getDataCodewords(),Ke=m.getECCodewordsPerBlock()+Ue;N[_++]=new Io(Ue,new Uint8Array(Ke))}const O=N[0].codewords.length;let V=N.length-1;for(;V>=0&&N[V].codewords.length!==O;)V--;V++;const ee=O-m.getECCodewordsPerBlock();let ue=0;for(let De=0;De<ee;De++)for(let Me=0;Me<_;Me++)N[Me].codewords[De]=i[ue++];for(let De=V;De<_;De++)N[De].codewords[ee]=i[ue++];const je=N[0].codewords.length;for(let De=ee;De<je;De++)for(let Me=0;Me<_;Me++){const Ue=Me<V?De:De+1;N[Me].codewords[Ue]=i[ue++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var gs;(function(J){J[J.TERMINATOR=0]="TERMINATOR",J[J.NUMERIC=1]="NUMERIC",J[J.ALPHANUMERIC=2]="ALPHANUMERIC",J[J.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",J[J.BYTE=4]="BYTE",J[J.ECI=5]="ECI",J[J.KANJI=6]="KANJI",J[J.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",J[J.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",J[J.HANZI=9]="HANZI"})(gs||(gs={}));class Dt{constructor(i,c,u,m){this.value=i,this.stringValue=c,this.characterCountBitsForVersions=u,this.bits=m,Dt.FOR_BITS.set(m,this),Dt.FOR_VALUE.set(i,this)}static forBits(i){const c=Dt.FOR_BITS.get(i);if(c===void 0)throw new k;return c}getCharacterCountBits(i){const c=i.getVersionNumber();let u;return c<=9?u=0:c<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(i){if(!(i instanceof Dt))return!1;const c=i;return this.value===c.value}toString(){return this.stringValue}}Dt.FOR_BITS=new Map,Dt.FOR_VALUE=new Map,Dt.TERMINATOR=new Dt(gs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Dt.NUMERIC=new Dt(gs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Dt.ALPHANUMERIC=new Dt(gs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Dt.STRUCTURED_APPEND=new Dt(gs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Dt.BYTE=new Dt(gs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Dt.ECI=new Dt(gs.ECI,"ECI",Int32Array.from([0,0,0]),7),Dt.KANJI=new Dt(gs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Dt.FNC1_FIRST_POSITION=new Dt(gs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Dt.FNC1_SECOND_POSITION=new Dt(gs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Dt.HANZI=new Dt(gs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Gr{static decode(i,c,u,m){const p=new Ja(i);let v=new se;const N=new Array;let _=-1,O=-1;try{let V=null,ee=!1,ue;do{if(p.available()<4)ue=Dt.TERMINATOR;else{const je=p.readBits(4);ue=Dt.forBits(je)}switch(ue){case Dt.TERMINATOR:break;case Dt.FNC1_FIRST_POSITION:case Dt.FNC1_SECOND_POSITION:ee=!0;break;case Dt.STRUCTURED_APPEND:if(p.available()<16)throw new B;_=p.readBits(8),O=p.readBits(8);break;case Dt.ECI:const je=Gr.parseECIValue(p);if(V=z.getCharacterSetECIByValue(je),V===null)throw new B;break;case Dt.HANZI:const De=p.readBits(4),Me=p.readBits(ue.getCharacterCountBits(c));De===Gr.GB2312_SUBSET&&Gr.decodeHanziSegment(p,v,Me);break;default:const Ue=p.readBits(ue.getCharacterCountBits(c));switch(ue){case Dt.NUMERIC:Gr.decodeNumericSegment(p,v,Ue);break;case Dt.ALPHANUMERIC:Gr.decodeAlphanumericSegment(p,v,Ue,ee);break;case Dt.BYTE:Gr.decodeByteSegment(p,v,Ue,V,N,m);break;case Dt.KANJI:Gr.decodeKanjiSegment(p,v,Ue);break;default:throw new B}break}}while(ue!==Dt.TERMINATOR)}catch{throw new B}return new Pe(i,v.toString(),N.length===0?null:N,u===null?null:u.toString(),_,O)}static decodeHanziSegment(i,c,u){if(u*13>i.available())throw new B;const m=new Uint8Array(2*u);let p=0;for(;u>0;){const v=i.readBits(13);let N=v/96<<8&4294967295|v%96;N<959?N+=41377:N+=42657,m[p]=N>>8&255,m[p+1]=N&255,p+=2,u--}try{c.append(te.decode(m,G.GB2312))}catch(v){throw new B(v)}}static decodeKanjiSegment(i,c,u){if(u*13>i.available())throw new B;const m=new Uint8Array(2*u);let p=0;for(;u>0;){const v=i.readBits(13);let N=v/192<<8&4294967295|v%192;N<7936?N+=33088:N+=49472,m[p]=N>>8,m[p+1]=N,p+=2,u--}try{c.append(te.decode(m,G.SHIFT_JIS))}catch(v){throw new B(v)}}static decodeByteSegment(i,c,u,m,p,v){if(8*u>i.available())throw new B;const N=new Uint8Array(u);for(let O=0;O<u;O++)N[O]=i.readBits(8);let _;m===null?_=G.guessEncoding(N,v):_=m.getName();try{c.append(te.decode(N,_))}catch(O){throw new B(O)}p.push(N)}static toAlphaNumericChar(i){if(i>=Gr.ALPHANUMERIC_CHARS.length)throw new B;return Gr.ALPHANUMERIC_CHARS[i]}static decodeAlphanumericSegment(i,c,u,m){const p=c.length();for(;u>1;){if(i.available()<11)throw new B;const v=i.readBits(11);c.append(Gr.toAlphaNumericChar(Math.floor(v/45))),c.append(Gr.toAlphaNumericChar(v%45)),u-=2}if(u===1){if(i.available()<6)throw new B;c.append(Gr.toAlphaNumericChar(i.readBits(6)))}if(m)for(let v=p;v<c.length();v++)c.charAt(v)==="%"&&(v<c.length()-1&&c.charAt(v+1)==="%"?c.deleteCharAt(v+1):c.setCharAt(v,""))}static decodeNumericSegment(i,c,u){for(;u>=3;){if(i.available()<10)throw new B;const m=i.readBits(10);if(m>=1e3)throw new B;c.append(Gr.toAlphaNumericChar(Math.floor(m/100))),c.append(Gr.toAlphaNumericChar(Math.floor(m/10)%10)),c.append(Gr.toAlphaNumericChar(m%10)),u-=3}if(u===2){if(i.available()<7)throw new B;const m=i.readBits(7);if(m>=100)throw new B;c.append(Gr.toAlphaNumericChar(Math.floor(m/10))),c.append(Gr.toAlphaNumericChar(m%10))}else if(u===1){if(i.available()<4)throw new B;const m=i.readBits(4);if(m>=10)throw new B;c.append(Gr.toAlphaNumericChar(m))}}static parseECIValue(i){const c=i.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const u=i.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){const u=i.readBits(16);return(c&31)<<16&4294967295|u}throw new B}}Gr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Gr.GB2312_SUBSET=1;class vd{constructor(i){this.mirrored=i}isMirrored(){return this.mirrored}applyMirroredCorrection(i){if(!this.mirrored||i===null||i.length<3)return;const c=i[0];i[0]=i[2],i[2]=c}}class Oo{constructor(){this.rsDecoder=new Je(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(i,c){return this.decodeBitMatrix(ie.parseFromBooleanArray(i),c)}decodeBitMatrix(i,c){const u=new Rf(i);let m=null;try{return this.decodeBitMatrixParser(u,c)}catch(p){m=p}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const p=this.decodeBitMatrixParser(u,c);return p.setOther(new vd(!0)),p}catch(p){throw m!==null?m:p}}decodeBitMatrixParser(i,c){const u=i.readVersion(),m=i.readFormatInformation().getErrorCorrectionLevel(),p=i.readCodewords(),v=Io.getDataBlocks(p,u,m);let N=0;for(const V of v)N+=V.getNumDataCodewords();const _=new Uint8Array(N);let O=0;for(const V of v){const ee=V.getCodewords(),ue=V.getNumDataCodewords();this.correctErrors(ee,ue);for(let je=0;je<ue;je++)_[O++]=ee[je]}return Gr.decode(_,u,m,c)}correctErrors(i,c){const u=new Int32Array(i);try{this.rsDecoder.decode(u,i.length-c)}catch{throw new S}for(let m=0;m<c;m++)i[m]=u[m]}}class Bl extends Ce{constructor(i,c,u){super(i,c),this.estimatedModuleSize=u}aboutEquals(i,c,u){if(Math.abs(c-this.getY())<=i&&Math.abs(u-this.getX())<=i){const m=Math.abs(i-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(i,c,u){const m=(this.getX()+c)/2,p=(this.getY()+i)/2,v=(this.estimatedModuleSize+u)/2;return new Bl(m,p,v)}}class Gi{constructor(i,c,u,m,p,v,N){this.image=i,this.startX=c,this.startY=u,this.width=m,this.height=p,this.moduleSize=v,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const i=this.startX,c=this.height,u=this.width,m=i+u,p=this.startY+c/2,v=new Int32Array(3),N=this.image;for(let _=0;_<c;_++){const O=p+((_&1)===0?Math.floor((_+1)/2):-Math.floor((_+1)/2));v[0]=0,v[1]=0,v[2]=0;let V=i;for(;V<m&&!N.get(V,O);)V++;let ee=0;for(;V<m;){if(N.get(V,O))if(ee===1)v[1]++;else if(ee===2){if(this.foundPatternCross(v)){const ue=this.handlePossibleCenter(v,O,V);if(ue!==null)return ue}v[0]=v[2],v[1]=1,v[2]=0,ee=1}else v[++ee]++;else ee===1&&ee++,v[ee]++;V++}if(this.foundPatternCross(v)){const ue=this.handlePossibleCenter(v,O,m);if(ue!==null)return ue}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(i,c){return c-i[2]-i[1]/2}foundPatternCross(i){const c=this.moduleSize,u=c/2;for(let m=0;m<3;m++)if(Math.abs(c-i[m])>=u)return!1;return!0}crossCheckVertical(i,c,u,m){const p=this.image,v=p.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let _=i;for(;_>=0&&p.get(c,_)&&N[1]<=u;)N[1]++,_--;if(_<0||N[1]>u)return NaN;for(;_>=0&&!p.get(c,_)&&N[0]<=u;)N[0]++,_--;if(N[0]>u)return NaN;for(_=i+1;_<v&&p.get(c,_)&&N[1]<=u;)N[1]++,_++;if(_===v||N[1]>u)return NaN;for(;_<v&&!p.get(c,_)&&N[2]<=u;)N[2]++,_++;if(N[2]>u)return NaN;const O=N[0]+N[1]+N[2];return 5*Math.abs(O-m)>=2*m?NaN:this.foundPatternCross(N)?Gi.centerFromEnd(N,_):NaN}handlePossibleCenter(i,c,u){const m=i[0]+i[1]+i[2],p=Gi.centerFromEnd(i,u),v=this.crossCheckVertical(c,p,2*i[1],m);if(!isNaN(v)){const N=(i[0]+i[1]+i[2])/3;for(const O of this.possibleCenters)if(O.aboutEquals(N,v,p))return O.combineEstimate(v,p,N);const _=new Bl(p,v,N);this.possibleCenters.push(_),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(_)}return null}}class Un extends Ce{constructor(i,c,u,m){super(i,c),this.estimatedModuleSize=u,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(i,c,u){if(Math.abs(c-this.getY())<=i&&Math.abs(u-this.getX())<=i){const m=Math.abs(i-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(i,c,u){const m=this.count+1,p=(this.count*this.getX()+c)/m,v=(this.count*this.getY()+i)/m,N=(this.count*this.estimatedModuleSize+u)/m;return new Un(p,v,N,m)}}class Yi{constructor(i){this.bottomLeft=i[0],this.topLeft=i[1],this.topRight=i[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ua{constructor(i,c){this.image=i,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(i){const c=i!=null&&i.get(U.TRY_HARDER)!==void 0,u=i!=null&&i.get(U.PURE_BARCODE)!==void 0,m=this.image,p=m.getHeight(),v=m.getWidth();let N=Math.floor(3*p/(4*ua.MAX_MODULES));(N<ua.MIN_SKIP||c)&&(N=ua.MIN_SKIP);let _=!1;const O=new Int32Array(5);for(let ee=N-1;ee<p&&!_;ee+=N){O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0;let ue=0;for(let je=0;je<v;je++)if(m.get(je,ee))(ue&1)===1&&ue++,O[ue]++;else if((ue&1)===0)if(ue===4)if(ua.foundPatternCross(O)){if(this.handlePossibleCenter(O,ee,je,u)===!0)if(N=2,this.hasSkipped===!0)_=this.haveMultiplyConfirmedCenters();else{const Me=this.findRowSkip();Me>O[2]&&(ee+=Me-O[2]-N,je=v-1)}else{O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,ue=3;continue}ue=0,O[0]=0,O[1]=0,O[2]=0,O[3]=0,O[4]=0}else O[0]=O[2],O[1]=O[3],O[2]=O[4],O[3]=1,O[4]=0,ue=3;else O[++ue]++;else O[ue]++;ua.foundPatternCross(O)&&this.handlePossibleCenter(O,ee,v,u)===!0&&(N=O[0],this.hasSkipped&&(_=this.haveMultiplyConfirmedCenters()))}const V=this.selectBestPatterns();return Ce.orderBestPatterns(V),new Yi(V)}static centerFromEnd(i,c){return c-i[4]-i[3]-i[2]/2}static foundPatternCross(i){let c=0;for(let p=0;p<5;p++){const v=i[p];if(v===0)return!1;c+=v}if(c<7)return!1;const u=c/7,m=u/2;return Math.abs(u-i[0])<m&&Math.abs(u-i[1])<m&&Math.abs(3*u-i[2])<3*m&&Math.abs(u-i[3])<m&&Math.abs(u-i[4])<m}getCrossCheckStateCount(){const i=this.crossCheckStateCount;return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i}crossCheckDiagonal(i,c,u,m){const p=this.getCrossCheckStateCount();let v=0;const N=this.image;for(;i>=v&&c>=v&&N.get(c-v,i-v);)p[2]++,v++;if(i<v||c<v)return!1;for(;i>=v&&c>=v&&!N.get(c-v,i-v)&&p[1]<=u;)p[1]++,v++;if(i<v||c<v||p[1]>u)return!1;for(;i>=v&&c>=v&&N.get(c-v,i-v)&&p[0]<=u;)p[0]++,v++;if(p[0]>u)return!1;const _=N.getHeight(),O=N.getWidth();for(v=1;i+v<_&&c+v<O&&N.get(c+v,i+v);)p[2]++,v++;if(i+v>=_||c+v>=O)return!1;for(;i+v<_&&c+v<O&&!N.get(c+v,i+v)&&p[3]<u;)p[3]++,v++;if(i+v>=_||c+v>=O||p[3]>=u)return!1;for(;i+v<_&&c+v<O&&N.get(c+v,i+v)&&p[4]<u;)p[4]++,v++;if(p[4]>=u)return!1;const V=p[0]+p[1]+p[2]+p[3]+p[4];return Math.abs(V-m)<2*m&&ua.foundPatternCross(p)}crossCheckVertical(i,c,u,m){const p=this.image,v=p.getHeight(),N=this.getCrossCheckStateCount();let _=i;for(;_>=0&&p.get(c,_);)N[2]++,_--;if(_<0)return NaN;for(;_>=0&&!p.get(c,_)&&N[1]<=u;)N[1]++,_--;if(_<0||N[1]>u)return NaN;for(;_>=0&&p.get(c,_)&&N[0]<=u;)N[0]++,_--;if(N[0]>u)return NaN;for(_=i+1;_<v&&p.get(c,_);)N[2]++,_++;if(_===v)return NaN;for(;_<v&&!p.get(c,_)&&N[3]<u;)N[3]++,_++;if(_===v||N[3]>=u)return NaN;for(;_<v&&p.get(c,_)&&N[4]<u;)N[4]++,_++;if(N[4]>=u)return NaN;const O=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(O-m)>=2*m?NaN:ua.foundPatternCross(N)?ua.centerFromEnd(N,_):NaN}crossCheckHorizontal(i,c,u,m){const p=this.image,v=p.getWidth(),N=this.getCrossCheckStateCount();let _=i;for(;_>=0&&p.get(_,c);)N[2]++,_--;if(_<0)return NaN;for(;_>=0&&!p.get(_,c)&&N[1]<=u;)N[1]++,_--;if(_<0||N[1]>u)return NaN;for(;_>=0&&p.get(_,c)&&N[0]<=u;)N[0]++,_--;if(N[0]>u)return NaN;for(_=i+1;_<v&&p.get(_,c);)N[2]++,_++;if(_===v)return NaN;for(;_<v&&!p.get(_,c)&&N[3]<u;)N[3]++,_++;if(_===v||N[3]>=u)return NaN;for(;_<v&&p.get(_,c)&&N[4]<u;)N[4]++,_++;if(N[4]>=u)return NaN;const O=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(O-m)>=m?NaN:ua.foundPatternCross(N)?ua.centerFromEnd(N,_):NaN}handlePossibleCenter(i,c,u,m){const p=i[0]+i[1]+i[2]+i[3]+i[4];let v=ua.centerFromEnd(i,u),N=this.crossCheckVertical(c,Math.floor(v),i[2],p);if(!isNaN(N)&&(v=this.crossCheckHorizontal(Math.floor(v),Math.floor(N),i[2],p),!isNaN(v)&&(!m||this.crossCheckDiagonal(Math.floor(N),Math.floor(v),i[2],p)))){const _=p/7;let O=!1;const V=this.possibleCenters;for(let ee=0,ue=V.length;ee<ue;ee++){const je=V[ee];if(je.aboutEquals(_,N,v)){V[ee]=je.combineEstimate(N,v,_),O=!0;break}}if(!O){const ee=new Un(v,N,_);V.push(ee),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ee)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const u of this.possibleCenters)if(u.getCount()>=ua.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let i=0,c=0;const u=this.possibleCenters.length;for(const v of this.possibleCenters)v.getCount()>=ua.CENTER_QUORUM&&(i++,c+=v.getEstimatedModuleSize());if(i<3)return!1;const m=c/u;let p=0;for(const v of this.possibleCenters)p+=Math.abs(v.getEstimatedModuleSize()-m);return p<=.05*c}selectBestPatterns(){const i=this.possibleCenters.length;if(i<3)throw new Y;const c=this.possibleCenters;let u;if(i>3){let m=0,p=0;for(const _ of this.possibleCenters){const O=_.getEstimatedModuleSize();m+=O,p+=O*O}u=m/i;let v=Math.sqrt(p/i-u*u);c.sort((_,O)=>{const V=Math.abs(O.getEstimatedModuleSize()-u),ee=Math.abs(_.getEstimatedModuleSize()-u);return V<ee?-1:V>ee?1:0});const N=Math.max(.2*u,v);for(let _=0;_<c.length&&c.length>3;_++){const O=c[_];Math.abs(O.getEstimatedModuleSize()-u)>N&&(c.splice(_,1),_--)}}if(c.length>3){let m=0;for(const p of c)m+=p.getEstimatedModuleSize();u=m/c.length,c.sort((p,v)=>{if(v.getCount()===p.getCount()){const N=Math.abs(v.getEstimatedModuleSize()-u),_=Math.abs(p.getEstimatedModuleSize()-u);return N<_?1:N>_?-1:0}else return v.getCount()-p.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}ua.CENTER_QUORUM=2,ua.MIN_SKIP=3,ua.MAX_MODULES=57;class xi{constructor(i){this.image=i}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(i){this.resultPointCallback=i==null?null:i.get(U.NEED_RESULT_POINT_CALLBACK);const u=new ua(this.image,this.resultPointCallback).find(i);return this.processFinderPatternInfo(u)}processFinderPatternInfo(i){const c=i.getTopLeft(),u=i.getTopRight(),m=i.getBottomLeft(),p=this.calculateModuleSize(c,u,m);if(p<1)throw new Y("No pattern found in proccess finder.");const v=xi.computeDimension(c,u,m,p),N=Tt.getProvisionalVersionForDimension(v),_=N.getDimensionForVersion()-7;let O=null;if(N.getAlignmentPatternCenters().length>0){const je=u.getX()-c.getX()+m.getX(),De=u.getY()-c.getY()+m.getY(),Me=1-3/_,Ue=Math.floor(c.getX()+Me*(je-c.getX())),Ke=Math.floor(c.getY()+Me*(De-c.getY()));for(let ht=4;ht<=16;ht<<=1)try{O=this.findAlignmentInRegion(p,Ue,Ke,ht);break}catch(gt){if(!(gt instanceof Y))throw gt}}const V=xi.createTransform(c,u,m,O,v),ee=xi.sampleGrid(this.image,V,v);let ue;return O===null?ue=[m,c,u]:ue=[m,c,u,O],new wt(ee,ue)}static createTransform(i,c,u,m,p){const v=p-3.5;let N,_,O,V;return m!==null?(N=m.getX(),_=m.getY(),O=v-3,V=O):(N=c.getX()-i.getX()+u.getX(),_=c.getY()-i.getY()+u.getY(),O=v,V=v),qt.quadrilateralToQuadrilateral(3.5,3.5,v,3.5,O,V,3.5,v,i.getX(),i.getY(),c.getX(),c.getY(),N,_,u.getX(),u.getY())}static sampleGrid(i,c,u){return Ut.getInstance().sampleGridWithTransform(i,u,u,c)}static computeDimension(i,c,u,m){const p=fe.round(Ce.distance(i,c)/m),v=fe.round(Ce.distance(i,u)/m);let N=Math.floor((p+v)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new Y("Dimensions could be not found.")}return N}calculateModuleSize(i,c,u){return(this.calculateModuleSizeOneWay(i,c)+this.calculateModuleSizeOneWay(i,u))/2}calculateModuleSizeOneWay(i,c){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(c.getX()),Math.floor(c.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(i.getX()),Math.floor(i.getY()));return isNaN(u)?m/7:isNaN(m)?u/7:(u+m)/14}sizeOfBlackWhiteBlackRunBothWays(i,c,u,m){let p=this.sizeOfBlackWhiteBlackRun(i,c,u,m),v=1,N=i-(u-i);N<0?(v=i/(i-N),N=0):N>=this.image.getWidth()&&(v=(this.image.getWidth()-1-i)/(N-i),N=this.image.getWidth()-1);let _=Math.floor(c-(m-c)*v);return v=1,_<0?(v=c/(c-_),_=0):_>=this.image.getHeight()&&(v=(this.image.getHeight()-1-c)/(_-c),_=this.image.getHeight()-1),N=Math.floor(i+(N-i)*v),p+=this.sizeOfBlackWhiteBlackRun(i,c,N,_),p-1}sizeOfBlackWhiteBlackRun(i,c,u,m){const p=Math.abs(m-c)>Math.abs(u-i);if(p){let je=i;i=c,c=je,je=u,u=m,m=je}const v=Math.abs(u-i),N=Math.abs(m-c);let _=-v/2;const O=i<u?1:-1,V=c<m?1:-1;let ee=0;const ue=u+O;for(let je=i,De=c;je!==ue;je+=O){const Me=p?De:je,Ue=p?je:De;if(ee===1===this.image.get(Me,Ue)){if(ee===2)return fe.distance(je,De,i,c);ee++}if(_+=N,_>0){if(De===m)break;De+=V,_-=v}}return ee===2?fe.distance(u+O,m,i,c):NaN}findAlignmentInRegion(i,c,u,m){const p=Math.floor(m*i),v=Math.max(0,c-p),N=Math.min(this.image.getWidth()-1,c+p);if(N-v<i*3)throw new Y("Alignment top exceeds estimated module size.");const _=Math.max(0,u-p),O=Math.min(this.image.getHeight()-1,u+p);if(O-_<i*3)throw new Y("Alignment bottom exceeds estimated module size.");return new Gi(this.image,v,_,N-v,O-_,i,this.resultPointCallback).find()}}class vn{constructor(){this.decoder=new Oo}getDecoder(){return this.decoder}decode(i,c){let u,m;if(c!=null&&c.get(U.PURE_BARCODE)!==void 0){const _=vn.extractPureBits(i.getBlackMatrix());u=this.decoder.decodeBitMatrix(_,c),m=vn.NO_POINTS}else{const _=new xi(i.getBlackMatrix()).detect(c);u=this.decoder.decodeBitMatrix(_.getBits(),c),m=_.getPoints()}u.getOther()instanceof vd&&u.getOther().applyMirroredCorrection(m);const p=new ae(u.getText(),u.getRawBytes(),void 0,m,re.QR_CODE,void 0),v=u.getByteSegments();v!==null&&p.putMetadata(ke.BYTE_SEGMENTS,v);const N=u.getECLevel();return N!==null&&p.putMetadata(ke.ERROR_CORRECTION_LEVEL,N),u.hasStructuredAppend()&&(p.putMetadata(ke.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),p.putMetadata(ke.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),p}reset(){}static extractPureBits(i){const c=i.getTopLeftOnBit(),u=i.getBottomRightOnBit();if(c===null||u===null)throw new Y;const m=this.moduleSize(c,i);let p=c[1],v=u[1],N=c[0],_=u[0];if(N>=_||p>=v)throw new Y;if(v-p!==_-N&&(_=N+(v-p),_>=i.getWidth()))throw new Y;const O=Math.round((_-N+1)/m),V=Math.round((v-p+1)/m);if(O<=0||V<=0)throw new Y;if(V!==O)throw new Y;const ee=Math.floor(m/2);p+=ee,N+=ee;const ue=N+Math.floor((O-1)*m)-_;if(ue>0){if(ue>ee)throw new Y;N-=ue}const je=p+Math.floor((V-1)*m)-v;if(je>0){if(je>ee)throw new Y;p-=je}const De=new ie(O,V);for(let Me=0;Me<V;Me++){const Ue=p+Math.floor(Me*m);for(let Ke=0;Ke<O;Ke++)i.get(N+Math.floor(Ke*m),Ue)&&De.set(Ke,Me)}return De}static moduleSize(i,c){const u=c.getHeight(),m=c.getWidth();let p=i[0],v=i[1],N=!0,_=0;for(;p<m&&v<u;){if(N!==c.get(p,v)){if(++_===5)break;N=!N}p++,v++}if(p===m||v===u)throw new Y;return(p-i[0])/7}}vn.NO_POINTS=new Array;class Ot{PDF417Common(){}static getBitCountSum(i){return fe.sum(i)}static toIntArray(i){if(i==null||!i.length)return Ot.EMPTY_INT_ARRAY;const c=new Int32Array(i.length);let u=0;for(const m of i)c[u++]=m;return c}static getCodeword(i){const c=F.binarySearch(Ot.SYMBOL_TABLE,i&262143);return c<0?-1:(Ot.CODEWORD_TABLE[c]-1)%Ot.NUMBER_OF_CODEWORDS}}Ot.NUMBER_OF_CODEWORDS=929,Ot.MAX_CODEWORDS_IN_BARCODE=Ot.NUMBER_OF_CODEWORDS-1,Ot.MIN_ROWS_IN_BARCODE=3,Ot.MAX_ROWS_IN_BARCODE=90,Ot.MODULES_IN_CODEWORD=17,Ot.MODULES_IN_STOP_PATTERN=18,Ot.BARS_IN_MODULE=8,Ot.EMPTY_INT_ARRAY=new Int32Array([]),Ot.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ot.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wn{constructor(i,c){this.bits=i,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Wt{static detectMultiple(i,c,u){let m=i.getBlackMatrix(),p=Wt.detect(u,m);return p.length||(m=m.clone(),m.rotate180(),p=Wt.detect(u,m)),new wn(m,p)}static detect(i,c){const u=new Array;let m=0,p=0,v=!1;for(;m<c.getHeight();){const N=Wt.findVertices(c,m,p);if(N[0]==null&&N[3]==null){if(!v)break;v=!1,p=0;for(const _ of u)_[1]!=null&&(m=Math.trunc(Math.max(m,_[1].getY()))),_[3]!=null&&(m=Math.max(m,Math.trunc(_[3].getY())));m+=Wt.ROW_STEP;continue}if(v=!0,u.push(N),!i)break;N[2]!=null?(p=Math.trunc(N[2].getX()),m=Math.trunc(N[2].getY())):(p=Math.trunc(N[4].getX()),m=Math.trunc(N[4].getY()))}return u}static findVertices(i,c,u){const m=i.getHeight(),p=i.getWidth(),v=new Array(8);return Wt.copyToResult(v,Wt.findRowsWithPattern(i,m,p,c,u,Wt.START_PATTERN),Wt.INDEXES_START_PATTERN),v[4]!=null&&(u=Math.trunc(v[4].getX()),c=Math.trunc(v[4].getY())),Wt.copyToResult(v,Wt.findRowsWithPattern(i,m,p,c,u,Wt.STOP_PATTERN),Wt.INDEXES_STOP_PATTERN),v}static copyToResult(i,c,u){for(let m=0;m<u.length;m++)i[u[m]]=c[m]}static findRowsWithPattern(i,c,u,m,p,v){const N=new Array(4);let _=!1;const O=new Int32Array(v.length);for(;m<c;m+=Wt.ROW_STEP){let ee=Wt.findGuardPattern(i,p,m,u,!1,v,O);if(ee!=null){for(;m>0;){const ue=Wt.findGuardPattern(i,p,--m,u,!1,v,O);if(ue!=null)ee=ue;else{m++;break}}N[0]=new Ce(ee[0],m),N[1]=new Ce(ee[1],m),_=!0;break}}let V=m+1;if(_){let ee=0,ue=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;V<c;V++){const je=Wt.findGuardPattern(i,ue[0],V,u,!1,v,O);if(je!=null&&Math.abs(ue[0]-je[0])<Wt.MAX_PATTERN_DRIFT&&Math.abs(ue[1]-je[1])<Wt.MAX_PATTERN_DRIFT)ue=je,ee=0;else{if(ee>Wt.SKIPPED_ROW_COUNT_MAX)break;ee++}}V-=ee+1,N[2]=new Ce(ue[0],V),N[3]=new Ce(ue[1],V)}return V-m<Wt.BARCODE_MIN_HEIGHT&&F.fill(N,null),N}static findGuardPattern(i,c,u,m,p,v,N){F.fillWithin(N,0,N.length,0);let _=c,O=0;for(;i.get(_,u)&&_>0&&O++<Wt.MAX_PIXEL_DRIFT;)_--;let V=_,ee=0,ue=v.length;for(let je=p;V<m;V++)if(i.get(V,u)!==je)N[ee]++;else{if(ee===ue-1){if(Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return new Int32Array([_,V]);_+=N[0]+N[1],A.arraycopy(N,2,N,0,ee-1),N[ee-1]=0,N[ee]=0,ee--}else ee++;N[ee]=1,je=!je}return ee===ue-1&&Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE?new Int32Array([_,V-1]):null}static patternMatchVariance(i,c,u){let m=i.length,p=0,v=0;for(let O=0;O<m;O++)p+=i[O],v+=c[O];if(p<v)return 1/0;let N=p/v;u*=N;let _=0;for(let O=0;O<m;O++){let V=i[O],ee=c[O]*N,ue=V>ee?V-ee:ee-V;if(ue>u)return 1/0;_+=ue}return _/p}}Wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wt.MAX_AVG_VARIANCE=.42,Wt.MAX_INDIVIDUAL_VARIANCE=.8,Wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wt.MAX_PIXEL_DRIFT=3,Wt.MAX_PATTERN_DRIFT=5,Wt.SKIPPED_ROW_COUNT_MAX=25,Wt.ROW_STEP=5,Wt.BARCODE_MIN_HEIGHT=10;class Kr{constructor(i,c){if(c.length===0)throw new k;this.field=i;let u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(i){return this.coefficients[this.coefficients.length-1-i]}evaluateAt(i){if(i===0)return this.getCoefficient(0);if(i===1){let m=0;for(let p of this.coefficients)m=this.field.add(m,p);return m}let c=this.coefficients[0],u=this.coefficients.length;for(let m=1;m<u;m++)c=this.field.add(this.field.multiply(i,c),this.coefficients[m]);return c}add(i){if(!this.field.equals(i.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero())return i;if(i.isZero())return this;let c=this.coefficients,u=i.coefficients;if(c.length>u.length){let v=c;c=u,u=v}let m=new Int32Array(u.length),p=u.length-c.length;A.arraycopy(u,0,m,0,p);for(let v=p;v<u.length;v++)m[v]=this.field.add(c[v-p],u[v]);return new Kr(this.field,m)}subtract(i){if(!this.field.equals(i.field))throw new k("ModulusPolys do not have same ModulusGF field");return i.isZero()?this:this.add(i.negative())}multiply(i){return i instanceof Kr?this.multiplyOther(i):this.multiplyScalar(i)}multiplyOther(i){if(!this.field.equals(i.field))throw new k("ModulusPolys do not have same ModulusGF field");if(this.isZero()||i.isZero())return new Kr(this.field,new Int32Array([0]));let c=this.coefficients,u=c.length,m=i.coefficients,p=m.length,v=new Int32Array(u+p-1);for(let N=0;N<u;N++){let _=c[N];for(let O=0;O<p;O++)v[N+O]=this.field.add(v[N+O],this.field.multiply(_,m[O]))}return new Kr(this.field,v)}negative(){let i=this.coefficients.length,c=new Int32Array(i);for(let u=0;u<i;u++)c[u]=this.field.subtract(0,this.coefficients[u]);return new Kr(this.field,c)}multiplyScalar(i){if(i===0)return new Kr(this.field,new Int32Array([0]));if(i===1)return this;let c=this.coefficients.length,u=new Int32Array(c);for(let m=0;m<c;m++)u[m]=this.field.multiply(this.coefficients[m],i);return new Kr(this.field,u)}multiplyByMonomial(i,c){if(i<0)throw new k;if(c===0)return new Kr(this.field,new Int32Array([0]));let u=this.coefficients.length,m=new Int32Array(u+i);for(let p=0;p<u;p++)m[p]=this.field.multiply(this.coefficients[p],c);return new Kr(this.field,m)}toString(){let i=new se;for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);u!==0&&(u<0?(i.append(" - "),u=-u):i.length()>0&&i.append(" + "),(c===0||u!==1)&&i.append(u),c!==0&&(c===1?i.append("x"):(i.append("x^"),i.append(c))))}return i.toString()}}class Hn{add(i,c){return(i+c)%this.modulus}subtract(i,c){return(this.modulus+i-c)%this.modulus}exp(i){return this.expTable[i]}log(i){if(i===0)throw new k;return this.logTable[i]}inverse(i){if(i===0)throw new we;return this.expTable[this.modulus-this.logTable[i]-1]}multiply(i,c){return i===0||c===0?0:this.expTable[(this.logTable[i]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(i){return i===this}}class Pl extends Hn{constructor(i,c){super(),this.modulus=i,this.expTable=new Int32Array(i),this.logTable=new Int32Array(i);let u=1;for(let m=0;m<i;m++)this.expTable[m]=u,u=u*c%i;for(let m=0;m<i-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new Kr(this,new Int32Array([0])),this.one=new Kr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(i,c){if(i<0)throw new k;if(c===0)return this.zero;let u=new Int32Array(i+1);return u[0]=c,new Kr(this,u)}}Pl.PDF417_GF=new Pl(Ot.NUMBER_OF_CODEWORDS,3);class zl{constructor(){this.field=Pl.PDF417_GF}decode(i,c,u){let m=new Kr(this.field,i),p=new Int32Array(c),v=!1;for(let De=c;De>0;De--){let Me=m.evaluateAt(this.field.exp(De));p[c-De]=Me,Me!==0&&(v=!0)}if(!v)return 0;let N=this.field.getOne();if(u!=null)for(const De of u){let Me=this.field.exp(i.length-1-De),Ue=new Kr(this.field,new Int32Array([this.field.subtract(0,Me),1]));N=N.multiply(Ue)}let _=new Kr(this.field,p),O=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),_,c),V=O[0],ee=O[1],ue=this.findErrorLocations(V),je=this.findErrorMagnitudes(ee,V,ue);for(let De=0;De<ue.length;De++){let Me=i.length-1-this.field.log(ue[De]);if(Me<0)throw S.getChecksumInstance();i[Me]=this.field.subtract(i[Me],je[De])}return ue.length}runEuclideanAlgorithm(i,c,u){if(i.getDegree()<c.getDegree()){let ue=i;i=c,c=ue}let m=i,p=c,v=this.field.getZero(),N=this.field.getOne();for(;p.getDegree()>=Math.round(u/2);){let ue=m,je=v;if(m=p,v=N,m.isZero())throw S.getChecksumInstance();p=ue;let De=this.field.getZero(),Me=m.getCoefficient(m.getDegree()),Ue=this.field.inverse(Me);for(;p.getDegree()>=m.getDegree()&&!p.isZero();){let Ke=p.getDegree()-m.getDegree(),ht=this.field.multiply(p.getCoefficient(p.getDegree()),Ue);De=De.add(this.field.buildMonomial(Ke,ht)),p=p.subtract(m.multiplyByMonomial(Ke,ht))}N=De.multiply(v).subtract(je).negative()}let _=N.getCoefficient(0);if(_===0)throw S.getChecksumInstance();let O=this.field.inverse(_),V=N.multiply(O),ee=p.multiply(O);return[V,ee]}findErrorLocations(i){let c=i.getDegree(),u=new Int32Array(c),m=0;for(let p=1;p<this.field.getSize()&&m<c;p++)i.evaluateAt(p)===0&&(u[m]=this.field.inverse(p),m++);if(m!==c)throw S.getChecksumInstance();return u}findErrorMagnitudes(i,c,u){let m=c.getDegree(),p=new Int32Array(m);for(let O=1;O<=m;O++)p[m-O]=this.field.multiply(O,c.getCoefficient(O));let v=new Kr(this.field,p),N=u.length,_=new Int32Array(N);for(let O=0;O<N;O++){let V=this.field.inverse(u[O]),ee=this.field.subtract(0,i.evaluateAt(V)),ue=this.field.inverse(v.evaluateAt(V));_[O]=this.field.multiply(ee,ue)}return _}}class Vn{constructor(i,c,u,m,p){i instanceof Vn?this.constructor_2(i):this.constructor_1(i,c,u,m,p)}constructor_1(i,c,u,m,p){const v=c==null||u==null,N=m==null||p==null;if(v&&N)throw new Y;v?(c=new Ce(0,m.getY()),u=new Ce(0,p.getY())):N&&(m=new Ce(i.getWidth()-1,c.getY()),p=new Ce(i.getWidth()-1,u.getY())),this.image=i,this.topLeft=c,this.bottomLeft=u,this.topRight=m,this.bottomRight=p,this.minX=Math.trunc(Math.min(c.getX(),u.getX())),this.maxX=Math.trunc(Math.max(m.getX(),p.getX())),this.minY=Math.trunc(Math.min(c.getY(),m.getY())),this.maxY=Math.trunc(Math.max(u.getY(),p.getY()))}constructor_2(i){this.image=i.image,this.topLeft=i.getTopLeft(),this.bottomLeft=i.getBottomLeft(),this.topRight=i.getTopRight(),this.bottomRight=i.getBottomRight(),this.minX=i.getMinX(),this.maxX=i.getMaxX(),this.minY=i.getMinY(),this.maxY=i.getMaxY()}static merge(i,c){return i==null?c:c==null?i:new Vn(i.image,i.topLeft,i.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(i,c,u){let m=this.topLeft,p=this.bottomLeft,v=this.topRight,N=this.bottomRight;if(i>0){let _=u?this.topLeft:this.topRight,O=Math.trunc(_.getY()-i);O<0&&(O=0);let V=new Ce(_.getX(),O);u?m=V:v=V}if(c>0){let _=u?this.bottomLeft:this.bottomRight,O=Math.trunc(_.getY()+c);O>=this.image.getHeight()&&(O=this.image.getHeight()-1);let V=new Ce(_.getX(),O);u?p=V:N=V}return new Vn(this.image,m,p,v,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Fo{constructor(i,c,u,m){this.columnCount=i,this.errorCorrectionLevel=m,this.rowCountUpperPart=c,this.rowCountLowerPart=u,this.rowCount=c+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Gn{constructor(){this.buffer=""}static form(i,c){let u=-1;function m(v,N,_,O,V,ee){if(v==="%%")return"%";if(c[++u]===void 0)return;v=O?parseInt(O.substr(1)):void 0;let ue=V?parseInt(V.substr(1)):void 0,je;switch(ee){case"s":je=c[u];break;case"c":je=c[u][0];break;case"f":je=parseFloat(c[u]).toFixed(v);break;case"p":je=parseFloat(c[u]).toPrecision(v);break;case"e":je=parseFloat(c[u]).toExponential(v);break;case"x":je=parseInt(c[u]).toString(ue||16);break;case"d":je=parseFloat(parseInt(c[u],ue||10).toPrecision(v)).toFixed(0);break}je=typeof je=="object"?JSON.stringify(je):(+je).toString(ue);let De=parseInt(_),Me=_&&_[0]+""=="0"?"0":" ";for(;je.length<De;)je=N!==void 0?je+Me:Me+je;return je}let p=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return i.replace(p,m)}format(i,...c){this.buffer+=Gn.form(i,c)}toString(){return this.buffer}}class Xi{constructor(i){this.boundingBox=new Vn(i),this.codewords=new Array(i.getMaxY()-i.getMinY()+1)}getCodewordNearby(i){let c=this.getCodeword(i);if(c!=null)return c;for(let u=1;u<Xi.MAX_NEARBY_DISTANCE;u++){let m=this.imageRowToCodewordIndex(i)-u;if(m>=0&&(c=this.codewords[m],c!=null)||(m=this.imageRowToCodewordIndex(i)+u,m<this.codewords.length&&(c=this.codewords[m],c!=null)))return c}return null}imageRowToCodewordIndex(i){return i-this.boundingBox.getMinY()}setCodeword(i,c){this.codewords[this.imageRowToCodewordIndex(i)]=c}getCodeword(i){return this.codewords[this.imageRowToCodewordIndex(i)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const i=new Gn;let c=0;for(const u of this.codewords){if(u==null){i.format("%3d:    |   %n",c++);continue}i.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return i.toString()}}Xi.MAX_NEARBY_DISTANCE=5;class ba{constructor(){this.values=new Map}setValue(i){i=Math.trunc(i);let c=this.values.get(i);c==null&&(c=0),c++,this.values.set(i,c)}getValue(){let i=-1,c=new Array;for(const[u,m]of this.values.entries()){const p={getKey:()=>u,getValue:()=>m};p.getValue()>i?(i=p.getValue(),c=[],c.push(p.getKey())):p.getValue()===i&&c.push(p.getKey())}return Ot.toIntArray(c)}getConfidence(i){return this.values.get(i)}}class Yn extends Xi{constructor(i,c){super(i),this._isLeft=c}setRowNumbers(){for(let i of this.getCodewords())i?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(i){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,i);let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),p=this._isLeft?u.getBottomLeft():u.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.imageRowToCodewordIndex(Math.trunc(p.getY())),_=-1,O=1,V=0;for(let ee=v;ee<N;ee++){if(c[ee]==null)continue;let ue=c[ee],je=ue.getRowNumber()-_;if(je===0)V++;else if(je===1)O=Math.max(O,V),V=1,_=ue.getRowNumber();else if(je<0||ue.getRowNumber()>=i.getRowCount()||je>ee)c[ee]=null;else{let De;O>2?De=(O-2)*je:De=je;let Me=De>=ee;for(let Ue=1;Ue<=De&&!Me;Ue++)Me=c[ee-Ue]!=null;Me?c[ee]=null:(_=ue.getRowNumber(),V=1)}}}getRowHeights(){let i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);let c=new Int32Array(i.getRowCount());for(let u of this.getCodewords())if(u!=null){let m=u.getRowNumber();if(m>=c.length)continue;c[m]++}return c}adjustIncompleteIndicatorColumnRowNumbers(i){let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.getCodewords(),_=-1;for(let O=p;O<v;O++){if(N[O]==null)continue;let V=N[O];V.setRowNumberAsRowIndicatorColumn();let ee=V.getRowNumber()-_;ee===0||(ee===1?_=V.getRowNumber():V.getRowNumber()>=i.getRowCount()?N[O]=null:_=V.getRowNumber())}}getBarcodeMetadata(){let i=this.getCodewords(),c=new ba,u=new ba,m=new ba,p=new ba;for(let N of i){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let _=N.getValue()%30,O=N.getRowNumber();switch(this._isLeft||(O+=2),O%3){case 0:u.setValue(_*3+1);break;case 1:p.setValue(_/3),m.setValue(_%3);break;case 2:c.setValue(_+1);break}}if(c.getValue().length===0||u.getValue().length===0||m.getValue().length===0||p.getValue().length===0||c.getValue()[0]<1||u.getValue()[0]+m.getValue()[0]<Ot.MIN_ROWS_IN_BARCODE||u.getValue()[0]+m.getValue()[0]>Ot.MAX_ROWS_IN_BARCODE)return null;let v=new Fo(c.getValue()[0],u.getValue()[0],m.getValue()[0],p.getValue()[0]);return this.removeIncorrectCodewords(i,v),v}removeIncorrectCodewords(i,c){for(let u=0;u<i.length;u++){let m=i[u];if(i[u]==null)continue;let p=m.getValue()%30,v=m.getRowNumber();if(v>c.getRowCount()){i[u]=null;continue}switch(this._isLeft||(v+=2),v%3){case 0:p*3+1!==c.getRowCountUpperPart()&&(i[u]=null);break;case 1:(Math.trunc(p/3)!==c.getErrorCorrectionLevel()||p%3!==c.getRowCountLowerPart())&&(i[u]=null);break;case 2:p+1!==c.getColumnCount()&&(i[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Xn{constructor(i,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=i,this.barcodeColumnCount=i.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let i=Ot.MAX_CODEWORDS_IN_BARCODE,c;do c=i,i=this.adjustRowNumbersAndGetCount();while(i>0&&i<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(i){i?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let i=this.adjustRowNumbersByRow();if(i===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let u=this.detectionResultColumns[c].getCodewords();for(let m=0;m<u.length;m++)u[m]!=null&&(u[m].hasValidRowNumber()||this.adjustRowNumbers(c,m,u))}return i}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let i=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<i.length;u++)if(i[u]!=null&&c[u]!=null&&i[u].getRowNumber()===c[u].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let p=this.detectionResultColumns[m].getCodewords()[u];p!=null&&(p.setRowNumber(i[u].getRowNumber()),p.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let i=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),p=0;for(let v=this.barcodeColumnCount+1;v>0&&p<this.ADJUST_ROW_NUMBER_SKIP;v--){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(p=Xn.adjustRowNumberIfValid(m,p,N),N.hasValidRowNumber()||i++)}}return i}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let i=0,c=this.detectionResultColumns[0].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),p=0;for(let v=1;v<this.barcodeColumnCount+1&&p<this.ADJUST_ROW_NUMBER_SKIP;v++){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(p=Xn.adjustRowNumberIfValid(m,p,N),N.hasValidRowNumber()||i++)}}return i}static adjustRowNumberIfValid(i,c,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(i)?(u.setRowNumber(i),c=0):++c),c}adjustRowNumbers(i,c,u){if(!this.detectionResultColumns[i-1])return;let m=u[c],p=this.detectionResultColumns[i-1].getCodewords(),v=p;this.detectionResultColumns[i+1]!=null&&(v=this.detectionResultColumns[i+1].getCodewords());let N=new Array(14);N[2]=p[c],N[3]=v[c],c>0&&(N[0]=u[c-1],N[4]=p[c-1],N[5]=v[c-1]),c>1&&(N[8]=u[c-2],N[10]=p[c-2],N[11]=v[c-2]),c<u.length-1&&(N[1]=u[c+1],N[6]=p[c+1],N[7]=v[c+1]),c<u.length-2&&(N[9]=u[c+2],N[12]=p[c+2],N[13]=v[c+2]);for(let _ of N)if(Xn.adjustRowNumber(m,_))return}static adjustRowNumber(i,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===i.getBucket()?(i.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(i){this.boundingBox=i}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(i,c){this.detectionResultColumns[i]=c}getDetectionResultColumn(i){return this.detectionResultColumns[i]}toString(){let i=this.detectionResultColumns[0];i==null&&(i=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Gn;for(let u=0;u<i.getCodewords().length;u++){c.format("CW %3d:",u);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){c.format("    |   ");continue}let p=this.detectionResultColumns[m].getCodewords()[u];if(p==null){c.format("    |   ");continue}c.format(" %3d|%3d",p.getRowNumber(),p.getValue())}c.format("%n")}return c.toString()}}class Nn{constructor(i,c,u,m){this.rowNumber=Nn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(i),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(i){return i!==Nn.BARCODE_ROW_UNKNOWN&&this.bucket===i%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(i){this.rowNumber=i}toString(){return this.rowNumber+"|"+this.value}}Nn.BARCODE_ROW_UNKNOWN=-1;class es{static initialize(){for(let i=0;i<Ot.SYMBOL_TABLE.length;i++){let c=Ot.SYMBOL_TABLE[i],u=c&1;for(let m=0;m<Ot.BARS_IN_MODULE;m++){let p=0;for(;(c&1)===u;)p+=1,c>>=1;u=c&1,es.RATIOS_TABLE[i]||(es.RATIOS_TABLE[i]=new Array(Ot.BARS_IN_MODULE)),es.RATIOS_TABLE[i][Ot.BARS_IN_MODULE-m-1]=Math.fround(p/Ot.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(i){let c=es.getDecodedCodewordValue(es.sampleBitCounts(i));return c!==-1?c:es.getClosestDecodedValue(i)}static sampleBitCounts(i){let c=fe.sum(i),u=new Int32Array(Ot.BARS_IN_MODULE),m=0,p=0;for(let v=0;v<Ot.MODULES_IN_CODEWORD;v++){let N=c/(2*Ot.MODULES_IN_CODEWORD)+v*c/Ot.MODULES_IN_CODEWORD;p+i[m]<=N&&(p+=i[m],m++),u[m]++}return u}static getDecodedCodewordValue(i){let c=es.getBitValue(i);return Ot.getCodeword(c)===-1?-1:c}static getBitValue(i){let c=0;for(let u=0;u<i.length;u++)for(let m=0;m<i[u];m++)c=c<<1|(u%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(i){let c=fe.sum(i),u=new Array(Ot.BARS_IN_MODULE);if(c>1)for(let v=0;v<u.length;v++)u[v]=Math.fround(i[v]/c);let m=at.MAX_VALUE,p=-1;this.bSymbolTableReady||es.initialize();for(let v=0;v<es.RATIOS_TABLE.length;v++){let N=0,_=es.RATIOS_TABLE[v];for(let O=0;O<Ot.BARS_IN_MODULE;O++){let V=Math.fround(_[O]-u[O]);if(N+=Math.fround(V*V),N>=m)break}N<m&&(m=N,p=Ot.SYMBOL_TABLE[v])}return p}}es.bSymbolTableReady=!1,es.RATIOS_TABLE=new Array(Ot.SYMBOL_TABLE.length).map(J=>new Array(Ot.BARS_IN_MODULE));class Lo{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(i){this.segmentIndex=i}getFileId(){return this.fileId}setFileId(i){this.fileId=i}getOptionalData(){return this.optionalData}setOptionalData(i){this.optionalData=i}isLastSegment(){return this.lastSegment}setLastSegment(i){this.lastSegment=i}getSegmentCount(){return this.segmentCount}setSegmentCount(i){this.segmentCount=i}getSender(){return this.sender||null}setSender(i){this.sender=i}getAddressee(){return this.addressee||null}setAddressee(i){this.addressee=i}getFileName(){return this.fileName}setFileName(i){this.fileName=i}getFileSize(){return this.fileSize}setFileSize(i){this.fileSize=i}getChecksum(){return this.checksum}setChecksum(i){this.checksum=i}getTimestamp(){return this.timestamp}setTimestamp(i){this.timestamp=i}}class Bo{static parseLong(i,c=void 0){return parseInt(i,c)}}class qi extends g{}qi.kind="NullPointerException";class Po{writeBytes(i){this.writeBytesOffset(i,0,i.length)}writeBytesOffset(i,c,u){if(i==null)throw new qi;if(c<0||c>i.length||u<0||c+u>i.length||c+u<0)throw new M;if(u===0)return;for(let m=0;m<u;m++)this.write(i[c+m])}flush(){}close(){}}class wd extends g{}class Mf extends Po{constructor(i=32){if(super(),this.count=0,i<0)throw new k("Negative initial size: "+i);this.buf=new Uint8Array(i)}ensureCapacity(i){i-this.buf.length>0&&this.grow(i)}grow(i){let u=this.buf.length<<1;if(u-i<0&&(u=i),u<0){if(i<0)throw new wd;u=T.MAX_VALUE}this.buf=F.copyOfUint8Array(this.buf,u)}write(i){this.ensureCapacity(this.count+1),this.buf[this.count]=i,this.count+=1}writeBytesOffset(i,c,u){if(c<0||c>i.length||u<0||c+u-i.length>0)throw new M;this.ensureCapacity(this.count+u),A.arraycopy(i,c,this.buf,this.count,u),this.count+=u}writeTo(i){i.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return F.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(i){return i?typeof i=="string"?this.toString_string(i):this.toString_number(i):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(i){return new String(this.buf).toString()}toString_number(i){return new String(this.buf).toString()}close(){}}var Er;(function(J){J[J.ALPHA=0]="ALPHA",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.PUNCT=3]="PUNCT",J[J.ALPHA_SHIFT=4]="ALPHA_SHIFT",J[J.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Er||(Er={}));function Nd(){if(typeof window<"u")return window.BigInt||null;if(typeof Cu<"u")return Cu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let $i;function qn(J){if(typeof $i>"u"&&($i=Nd()),$i===null)throw new Error("BigInt is not supported!");return $i(J)}function If(){let J=[];J[0]=qn(1);let i=qn(900);J[1]=i;for(let c=2;c<16;c++)J[c]=J[c-1]*i;return J}class Qe{static decode(i,c){let u=new se(""),m=z.ISO8859_1;u.enableDecoding(m);let p=1,v=i[p++],N=new Lo;for(;p<i[0];){switch(v){case Qe.TEXT_COMPACTION_MODE_LATCH:p=Qe.textCompaction(i,p,u);break;case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:p=Qe.byteCompaction(v,i,m,p,u);break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(i[p++]);break;case Qe.NUMERIC_COMPACTION_MODE_LATCH:p=Qe.numericCompaction(i,p,u);break;case Qe.ECI_CHARSET:z.getCharacterSetECIByValue(i[p++]);break;case Qe.ECI_GENERAL_PURPOSE:p+=2;break;case Qe.ECI_USER_DEFINED:p++;break;case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:p=Qe.decodeMacroBlock(i,p,N);break;case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:throw new B;default:p--,p=Qe.textCompaction(i,p,u);break}if(p<i.length)v=i[p++];else throw B.getFormatInstance()}if(u.length()===0)throw B.getFormatInstance();let _=new Pe(null,u.toString(),null,c);return _.setOther(N),_}static decodeMacroBlock(i,c,u){if(c+Qe.NUMBER_OF_SEQUENCE_CODEWORDS>i[0])throw B.getFormatInstance();let m=new Int32Array(Qe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<Qe.NUMBER_OF_SEQUENCE_CODEWORDS;N++,c++)m[N]=i[c];u.setSegmentIndex(T.parseInt(Qe.decodeBase900toBase10(m,Qe.NUMBER_OF_SEQUENCE_CODEWORDS)));let p=new se;c=Qe.textCompaction(i,c,p),u.setFileId(p.toString());let v=-1;for(i[c]===Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(v=c+1);c<i[0];)switch(i[c]){case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,i[c]){case Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new se;c=Qe.textCompaction(i,c+1,N),u.setFileName(N.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let _=new se;c=Qe.textCompaction(i,c+1,_),u.setSender(_.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let O=new se;c=Qe.textCompaction(i,c+1,O),u.setAddressee(O.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let V=new se;c=Qe.numericCompaction(i,c+1,V),u.setSegmentCount(T.parseInt(V.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ee=new se;c=Qe.numericCompaction(i,c+1,ee),u.setTimestamp(Bo.parseLong(ee.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ue=new se;c=Qe.numericCompaction(i,c+1,ue),u.setChecksum(T.parseInt(ue.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let je=new se;c=Qe.numericCompaction(i,c+1,je),u.setFileSize(Bo.parseLong(je.toString()));break;default:throw B.getFormatInstance()}break;case Qe.MACRO_PDF417_TERMINATOR:c++,u.setLastSegment(!0);break;default:throw B.getFormatInstance()}if(v!==-1){let N=c-v;u.isLastSegment()&&N--,u.setOptionalData(F.copyOfRange(i,v,v+N))}return c}static textCompaction(i,c,u){let m=new Int32Array((i[0]-c)*2),p=new Int32Array((i[0]-c)*2),v=0,N=!1;for(;c<i[0]&&!N;){let _=i[c++];if(_<Qe.TEXT_COMPACTION_MODE_LATCH)m[v]=_/30,m[v+1]=_%30,v+=2;else switch(_){case Qe.TEXT_COMPACTION_MODE_LATCH:m[v++]=Qe.TEXT_COMPACTION_MODE_LATCH;break;case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:c--,N=!0;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[v]=Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,_=i[c++],p[v]=_,v++;break}}return Qe.decodeTextCompaction(m,p,v,u),c}static decodeTextCompaction(i,c,u,m){let p=Er.ALPHA,v=Er.ALPHA,N=0;for(;N<u;){let _=i[N],O="";switch(p){case Er.ALPHA:if(_<26)O=String.fromCharCode(65+_);else switch(_){case 26:O=" ";break;case Qe.LL:p=Er.LOWER;break;case Qe.ML:p=Er.MIXED;break;case Qe.PS:v=p,p=Er.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Er.ALPHA;break}break;case Er.LOWER:if(_<26)O=String.fromCharCode(97+_);else switch(_){case 26:O=" ";break;case Qe.AS:v=p,p=Er.ALPHA_SHIFT;break;case Qe.ML:p=Er.MIXED;break;case Qe.PS:v=p,p=Er.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Er.ALPHA;break}break;case Er.MIXED:if(_<Qe.PL)O=Qe.MIXED_CHARS[_];else switch(_){case Qe.PL:p=Er.PUNCT;break;case 26:O=" ";break;case Qe.LL:p=Er.LOWER;break;case Qe.AL:p=Er.ALPHA;break;case Qe.PS:v=p,p=Er.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Er.ALPHA;break}break;case Er.PUNCT:if(_<Qe.PAL)O=Qe.PUNCT_CHARS[_];else switch(_){case Qe.PAL:p=Er.ALPHA;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Er.ALPHA;break}break;case Er.ALPHA_SHIFT:if(p=v,_<26)O=String.fromCharCode(65+_);else switch(_){case 26:O=" ";break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Er.ALPHA;break}break;case Er.PUNCT_SHIFT:if(p=v,_<Qe.PAL)O=Qe.PUNCT_CHARS[_];else switch(_){case Qe.PAL:p=Er.ALPHA;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:p=Er.ALPHA;break}break}O!==""&&m.append(O),N++}}static byteCompaction(i,c,u,m,p){let v=new Mf,N=0,_=0,O=!1;switch(i){case Qe.BYTE_COMPACTION_MODE_LATCH:let V=new Int32Array(6),ee=c[m++];for(;m<c[0]&&!O;)switch(V[N++]=ee,_=900*_+ee,ee=c[m++],ee){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:m--,O=!0;break;default:if(N%5===0&&N>0){for(let ue=0;ue<6;++ue)v.write(Number(qn(_)>>qn(8*(5-ue))));_=0,N=0}break}m===c[0]&&ee<Qe.TEXT_COMPACTION_MODE_LATCH&&(V[N++]=ee);for(let ue=0;ue<N;ue++)v.write(V[ue]);break;case Qe.BYTE_COMPACTION_MODE_LATCH_6:for(;m<c[0]&&!O;){let ue=c[m++];if(ue<Qe.TEXT_COMPACTION_MODE_LATCH)N++,_=900*_+ue;else switch(ue){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:m--,O=!0;break}if(N%5===0&&N>0){for(let je=0;je<6;++je)v.write(Number(qn(_)>>qn(8*(5-je))));_=0,N=0}}break}return p.append(te.decode(v.toByteArray(),u)),m}static numericCompaction(i,c,u){let m=0,p=!1,v=new Int32Array(Qe.MAX_NUMERIC_CODEWORDS);for(;c<i[0]&&!p;){let N=i[c++];if(c===i[0]&&(p=!0),N<Qe.TEXT_COMPACTION_MODE_LATCH)v[m]=N,m++;else switch(N){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:c--,p=!0;break}(m%Qe.MAX_NUMERIC_CODEWORDS===0||N===Qe.NUMERIC_COMPACTION_MODE_LATCH||p)&&m>0&&(u.append(Qe.decodeBase900toBase10(v,m)),m=0)}return c}static decodeBase900toBase10(i,c){let u=qn(0);for(let p=0;p<c;p++)u+=Qe.EXP900[c-p-1]*qn(i[p]);let m=u.toString();if(m.charAt(0)!=="1")throw new B;return m.substring(1)}}Qe.TEXT_COMPACTION_MODE_LATCH=900,Qe.BYTE_COMPACTION_MODE_LATCH=901,Qe.NUMERIC_COMPACTION_MODE_LATCH=902,Qe.BYTE_COMPACTION_MODE_LATCH_6=924,Qe.ECI_USER_DEFINED=925,Qe.ECI_GENERAL_PURPOSE=926,Qe.ECI_CHARSET=927,Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Qe.MACRO_PDF417_TERMINATOR=922,Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Qe.MAX_NUMERIC_CODEWORDS=15,Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Qe.PL=25,Qe.LL=27,Qe.AS=27,Qe.ML=28,Qe.AL=28,Qe.PS=29,Qe.PAL=29,Qe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Qe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Qe.EXP900=Nd()?If():[],Qe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ar{constructor(){}static decode(i,c,u,m,p,v,N){let _=new Vn(i,c,u,m,p),O=null,V=null,ee;for(let De=!0;;De=!1){if(c!=null&&(O=ar.getRowIndicatorColumn(i,_,c,!0,v,N)),m!=null&&(V=ar.getRowIndicatorColumn(i,_,m,!1,v,N)),ee=ar.merge(O,V),ee==null)throw Y.getNotFoundInstance();let Me=ee.getBoundingBox();if(De&&Me!=null&&(Me.getMinY()<_.getMinY()||Me.getMaxY()>_.getMaxY()))_=Me;else break}ee.setBoundingBox(_);let ue=ee.getBarcodeColumnCount()+1;ee.setDetectionResultColumn(0,O),ee.setDetectionResultColumn(ue,V);let je=O!=null;for(let De=1;De<=ue;De++){let Me=je?De:ue-De;if(ee.getDetectionResultColumn(Me)!==void 0)continue;let Ue;Me===0||Me===ue?Ue=new Yn(_,Me===0):Ue=new Xi(_),ee.setDetectionResultColumn(Me,Ue);let Ke=-1,ht=Ke;for(let gt=_.getMinY();gt<=_.getMaxY();gt++){if(Ke=ar.getStartColumn(ee,Me,gt,je),Ke<0||Ke>_.getMaxX()){if(ht===-1)continue;Ke=ht}let ft=ar.detectCodeword(i,_.getMinX(),_.getMaxX(),je,Ke,gt,v,N);ft!=null&&(Ue.setCodeword(gt,ft),ht=Ke,v=Math.min(v,ft.getWidth()),N=Math.max(N,ft.getWidth()))}}return ar.createDecoderResult(ee)}static merge(i,c){if(i==null&&c==null)return null;let u=ar.getBarcodeMetadata(i,c);if(u==null)return null;let m=Vn.merge(ar.adjustBoundingBox(i),ar.adjustBoundingBox(c));return new Xn(u,m)}static adjustBoundingBox(i){if(i==null)return null;let c=i.getRowHeights();if(c==null)return null;let u=ar.getMax(c),m=0;for(let N of c)if(m+=u-N,N>0)break;let p=i.getCodewords();for(let N=0;m>0&&p[N]==null;N++)m--;let v=0;for(let N=c.length-1;N>=0&&(v+=u-c[N],!(c[N]>0));N--);for(let N=p.length-1;v>0&&p[N]==null;N--)v--;return i.getBoundingBox().addMissingRows(m,v,i.isLeft())}static getMax(i){let c=-1;for(let u of i)c=Math.max(c,u);return c}static getBarcodeMetadata(i,c){let u;if(i==null||(u=i.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let m;return c==null||(m=c.getBarcodeMetadata())==null?u:u.getColumnCount()!==m.getColumnCount()&&u.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&u.getRowCount()!==m.getRowCount()?null:u}static getRowIndicatorColumn(i,c,u,m,p,v){let N=new Yn(c,m);for(let _=0;_<2;_++){let O=_===0?1:-1,V=Math.trunc(Math.trunc(u.getX()));for(let ee=Math.trunc(Math.trunc(u.getY()));ee<=c.getMaxY()&&ee>=c.getMinY();ee+=O){let ue=ar.detectCodeword(i,0,i.getWidth(),m,V,ee,p,v);ue!=null&&(N.setCodeword(ee,ue),m?V=ue.getStartX():V=ue.getEndX())}}return N}static adjustCodewordCount(i,c){let u=c[0][1],m=u.getValue(),p=i.getBarcodeColumnCount()*i.getBarcodeRowCount()-ar.getNumberOfECCodeWords(i.getBarcodeECLevel());if(m.length===0){if(p<1||p>Ot.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();u.setValue(p)}else m[0]!==p&&u.setValue(p)}static createDecoderResult(i){let c=ar.createBarcodeMatrix(i);ar.adjustCodewordCount(i,c);let u=new Array,m=new Int32Array(i.getBarcodeRowCount()*i.getBarcodeColumnCount()),p=[],v=new Array;for(let _=0;_<i.getBarcodeRowCount();_++)for(let O=0;O<i.getBarcodeColumnCount();O++){let V=c[_][O+1].getValue(),ee=_*i.getBarcodeColumnCount()+O;V.length===0?u.push(ee):V.length===1?m[ee]=V[0]:(v.push(ee),p.push(V))}let N=new Array(p.length);for(let _=0;_<N.length;_++)N[_]=p[_];return ar.createDecoderResultFromAmbiguousValues(i.getBarcodeECLevel(),m,Ot.toIntArray(u),Ot.toIntArray(v),N)}static createDecoderResultFromAmbiguousValues(i,c,u,m,p){let v=new Int32Array(m.length),N=100;for(;N-- >0;){for(let _=0;_<v.length;_++)c[m[_]]=p[_][v[_]];try{return ar.decodeCodewords(c,i,u)}catch(_){if(!(_ instanceof S))throw _}if(v.length===0)throw S.getChecksumInstance();for(let _=0;_<v.length;_++)if(v[_]<p[_].length-1){v[_]++;break}else if(v[_]=0,_===v.length-1)throw S.getChecksumInstance()}throw S.getChecksumInstance()}static createBarcodeMatrix(i){let c=Array.from({length:i.getBarcodeRowCount()},()=>new Array(i.getBarcodeColumnCount()+2));for(let m=0;m<c.length;m++)for(let p=0;p<c[m].length;p++)c[m][p]=new ba;let u=0;for(let m of i.getDetectionResultColumns()){if(m!=null){for(let p of m.getCodewords())if(p!=null){let v=p.getRowNumber();if(v>=0){if(v>=c.length)continue;c[v][u].setValue(p.getValue())}}}u++}return c}static isValidBarcodeColumn(i,c){return c>=0&&c<=i.getBarcodeColumnCount()+1}static getStartColumn(i,c,u,m){let p=m?1:-1,v=null;if(ar.isValidBarcodeColumn(i,c-p)&&(v=i.getDetectionResultColumn(c-p).getCodeword(u)),v!=null)return m?v.getEndX():v.getStartX();if(v=i.getDetectionResultColumn(c).getCodewordNearby(u),v!=null)return m?v.getStartX():v.getEndX();if(ar.isValidBarcodeColumn(i,c-p)&&(v=i.getDetectionResultColumn(c-p).getCodewordNearby(u)),v!=null)return m?v.getEndX():v.getStartX();let N=0;for(;ar.isValidBarcodeColumn(i,c-p);){c-=p;for(let _ of i.getDetectionResultColumn(c).getCodewords())if(_!=null)return(m?_.getEndX():_.getStartX())+p*N*(_.getEndX()-_.getStartX());N++}return m?i.getBoundingBox().getMinX():i.getBoundingBox().getMaxX()}static detectCodeword(i,c,u,m,p,v,N,_){p=ar.adjustCodewordStartColumn(i,c,u,m,p,v);let O=ar.getModuleBitCount(i,c,u,m,p,v);if(O==null)return null;let V,ee=fe.sum(O);if(m)V=p+ee;else{for(let De=0;De<O.length/2;De++){let Me=O[De];O[De]=O[O.length-1-De],O[O.length-1-De]=Me}V=p,p=V-ee}if(!ar.checkCodewordSkew(ee,N,_))return null;let ue=es.getDecodedValue(O),je=Ot.getCodeword(ue);return je===-1?null:new Nn(p,V,ar.getCodewordBucketNumber(ue),je)}static getModuleBitCount(i,c,u,m,p,v){let N=p,_=new Int32Array(8),O=0,V=m?1:-1,ee=m;for(;(m?N<u:N>=c)&&O<_.length;)i.get(N,v)===ee?(_[O]++,N+=V):(O++,ee=!ee);return O===_.length||N===(m?u:c)&&O===_.length-1?_:null}static getNumberOfECCodeWords(i){return 2<<i}static adjustCodewordStartColumn(i,c,u,m,p,v){let N=p,_=m?-1:1;for(let O=0;O<2;O++){for(;(m?N>=c:N<u)&&m===i.get(N,v);){if(Math.abs(p-N)>ar.CODEWORD_SKEW_SIZE)return p;N+=_}_=-_,m=!m}return N}static checkCodewordSkew(i,c,u){return c-ar.CODEWORD_SKEW_SIZE<=i&&i<=u+ar.CODEWORD_SKEW_SIZE}static decodeCodewords(i,c,u){if(i.length===0)throw B.getFormatInstance();let m=1<<c+1,p=ar.correctErrors(i,u,m);ar.verifyCodewordCount(i,m);let v=Qe.decode(i,""+c);return v.setErrorsCorrected(p),v.setErasures(u.length),v}static correctErrors(i,c,u){if(c!=null&&c.length>u/2+ar.MAX_ERRORS||u<0||u>ar.MAX_EC_CODEWORDS)throw S.getChecksumInstance();return ar.errorCorrection.decode(i,u,c)}static verifyCodewordCount(i,c){if(i.length<4)throw B.getFormatInstance();let u=i[0];if(u>i.length)throw B.getFormatInstance();if(u===0)if(c<i.length)i[0]=i.length-c;else throw B.getFormatInstance()}static getBitCountForCodeword(i){let c=new Int32Array(8),u=0,m=c.length-1;for(;!((i&1)!==u&&(u=i&1,m--,m<0));)c[m]++,i>>=1;return c}static getCodewordBucketNumber(i){return i instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(i):this.getCodewordBucketNumber_number(i)}static getCodewordBucketNumber_number(i){return ar.getCodewordBucketNumber(ar.getBitCountForCodeword(i))}static getCodewordBucketNumber_Int32Array(i){return(i[0]-i[2]+i[4]-i[6]+9)%9}static toString(i){let c=new Gn;for(let u=0;u<i.length;u++){c.format("Row %2d: ",u);for(let m=0;m<i[u].length;m++){let p=i[u][m];p.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",p.getValue()[0],p.getConfidence(p.getValue()[0]))}c.format("%n")}return c.toString()}}ar.CODEWORD_SKEW_SIZE=2,ar.MAX_ERRORS=3,ar.MAX_EC_CODEWORDS=512,ar.errorCorrection=new zl;class _a{decode(i,c=null){let u=_a.decode(i,c,!1);if(u==null||u.length===0||u[0]==null)throw Y.getNotFoundInstance();return u[0]}decodeMultiple(i,c=null){try{return _a.decode(i,c,!0)}catch(u){throw u instanceof B||u instanceof S?Y.getNotFoundInstance():u}}static decode(i,c,u){const m=new Array,p=Wt.detectMultiple(i,c,u);for(const v of p.getPoints()){const N=ar.decode(p.getBits(),v[4],v[5],v[6],v[7],_a.getMinCodewordWidth(v),_a.getMaxCodewordWidth(v)),_=new ae(N.getText(),N.getRawBytes(),void 0,v,re.PDF_417);_.putMetadata(ke.ERROR_CORRECTION_LEVEL,N.getECLevel());const O=N.getOther();O!=null&&_.putMetadata(ke.PDF417_EXTRA_METADATA,O),m.push(_)}return m.map(v=>v)}static getMaxWidth(i,c){return i==null||c==null?0:Math.trunc(Math.abs(i.getX()-c.getX()))}static getMinWidth(i,c){return i==null||c==null?T.MAX_VALUE:Math.trunc(Math.abs(i.getX()-c.getX()))}static getMaxCodewordWidth(i){return Math.floor(Math.max(Math.max(_a.getMaxWidth(i[0],i[4]),_a.getMaxWidth(i[6],i[2])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN),Math.max(_a.getMaxWidth(i[1],i[5]),_a.getMaxWidth(i[7],i[3])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(i){return Math.floor(Math.min(Math.min(_a.getMinWidth(i[0],i[4]),_a.getMinWidth(i[6],i[2])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN),Math.min(_a.getMinWidth(i[1],i[5]),_a.getMinWidth(i[7],i[3])*Ot.MODULES_IN_CODEWORD/Ot.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ul extends g{}Ul.kind="ReaderException";class kd{constructor(i,c){this.verbose=i===!0,c&&this.setHints(c)}decode(i,c){return c&&this.setHints(c),this.decodeInternal(i)}decodeWithState(i){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(i)}setHints(i){this.hints=i;const c=!n(i)&&i.get(U.TRY_HARDER)===!0,u=n(i)?null:i.get(U.POSSIBLE_FORMATS),m=new Array;if(!n(u)){const p=u.some(v=>v===re.UPC_A||v===re.UPC_E||v===re.EAN_13||v===re.EAN_8||v===re.CODABAR||v===re.CODE_39||v===re.CODE_93||v===re.CODE_128||v===re.ITF||v===re.RSS_14||v===re.RSS_EXPANDED);p&&!c&&m.push(new Qa(i,this.verbose)),u.includes(re.QR_CODE)&&m.push(new vn),u.includes(re.DATA_MATRIX)&&m.push(new Fs),u.includes(re.AZTEC)&&m.push(new $e),u.includes(re.PDF_417)&&m.push(new _a),p&&c&&m.push(new Qa(i,this.verbose))}m.length===0&&(c||m.push(new Qa(i,this.verbose)),m.push(new vn),m.push(new Fs),m.push(new $e),m.push(new _a),c&&m.push(new Qa(i,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const i of this.readers)i.reset()}decodeInternal(i){if(this.readers===null)throw new Ul("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(i,this.hints)}catch(u){if(u instanceof Ul)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class Of extends K{constructor(i=null,c=500){const u=new kd;u.setHints(i),super(u,c)}decodeBitmap(i){return this.reader.decodeWithState(i)}}class Ff extends K{constructor(i=500){super(new _a,i)}}class Lf extends K{constructor(i=500){super(new vn,i)}}var Hl;(function(J){J[J.ERROR_CORRECTION=0]="ERROR_CORRECTION",J[J.CHARACTER_SET=1]="CHARACTER_SET",J[J.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",J[J.MIN_SIZE=3]="MIN_SIZE",J[J.MAX_SIZE=4]="MAX_SIZE",J[J.MARGIN=5]="MARGIN",J[J.PDF417_COMPACT=6]="PDF417_COMPACT",J[J.PDF417_COMPACTION=7]="PDF417_COMPACTION",J[J.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",J[J.AZTEC_LAYERS=9]="AZTEC_LAYERS",J[J.QR_VERSION=10]="QR_VERSION"})(Hl||(Hl={}));var fa=Hl;class Fc{constructor(i){this.field=i,this.cachedGenerators=[],this.cachedGenerators.push(new nt(i,Int32Array.from([1])))}buildGenerator(i){const c=this.cachedGenerators;if(i>=c.length){let u=c[c.length-1];const m=this.field;for(let p=c.length;p<=i;p++){const v=u.multiply(new nt(m,Int32Array.from([1,m.exp(p-1+m.getGeneratorBase())])));c.push(v),u=v}}return c[i]}encode(i,c){if(c===0)throw new k("No error correction bytes");const u=i.length-c;if(u<=0)throw new k("No data bytes provided");const m=this.buildGenerator(c),p=new Int32Array(u);A.arraycopy(i,0,p,0,u);let v=new nt(this.field,p);v=v.multiplyByMonomial(c,1);const _=v.divide(m)[1].getCoefficients(),O=c-_.length;for(let V=0;V<O;V++)i[u+V]=0;A.arraycopy(_,0,i,u+O,_.length)}}class qr{constructor(){}static applyMaskPenaltyRule1(i){return qr.applyMaskPenaltyRule1Internal(i,!0)+qr.applyMaskPenaltyRule1Internal(i,!1)}static applyMaskPenaltyRule2(i){let c=0;const u=i.getArray(),m=i.getWidth(),p=i.getHeight();for(let v=0;v<p-1;v++){const N=u[v];for(let _=0;_<m-1;_++){const O=N[_];O===N[_+1]&&O===u[v+1][_]&&O===u[v+1][_+1]&&c++}}return qr.N2*c}static applyMaskPenaltyRule3(i){let c=0;const u=i.getArray(),m=i.getWidth(),p=i.getHeight();for(let v=0;v<p;v++)for(let N=0;N<m;N++){const _=u[v];N+6<m&&_[N]===1&&_[N+1]===0&&_[N+2]===1&&_[N+3]===1&&_[N+4]===1&&_[N+5]===0&&_[N+6]===1&&(qr.isWhiteHorizontal(_,N-4,N)||qr.isWhiteHorizontal(_,N+7,N+11))&&c++,v+6<p&&u[v][N]===1&&u[v+1][N]===0&&u[v+2][N]===1&&u[v+3][N]===1&&u[v+4][N]===1&&u[v+5][N]===0&&u[v+6][N]===1&&(qr.isWhiteVertical(u,N,v-4,v)||qr.isWhiteVertical(u,N,v+7,v+11))&&c++}return c*qr.N3}static isWhiteHorizontal(i,c,u){c=Math.max(c,0),u=Math.min(u,i.length);for(let m=c;m<u;m++)if(i[m]===1)return!1;return!0}static isWhiteVertical(i,c,u,m){u=Math.max(u,0),m=Math.min(m,i.length);for(let p=u;p<m;p++)if(i[p][c]===1)return!1;return!0}static applyMaskPenaltyRule4(i){let c=0;const u=i.getArray(),m=i.getWidth(),p=i.getHeight();for(let _=0;_<p;_++){const O=u[_];for(let V=0;V<m;V++)O[V]===1&&c++}const v=i.getHeight()*i.getWidth();return Math.floor(Math.abs(c*2-v)*10/v)*qr.N4}static getDataMaskBit(i,c,u){let m,p;switch(i){case 0:m=u+c&1;break;case 1:m=u&1;break;case 2:m=c%3;break;case 3:m=(u+c)%3;break;case 4:m=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:p=u*c,m=(p&1)+p%3;break;case 6:p=u*c,m=(p&1)+p%3&1;break;case 7:p=u*c,m=p%3+(u+c&1)&1;break;default:throw new k("Invalid mask pattern: "+i)}return m===0}static applyMaskPenaltyRule1Internal(i,c){let u=0;const m=c?i.getHeight():i.getWidth(),p=c?i.getWidth():i.getHeight(),v=i.getArray();for(let N=0;N<m;N++){let _=0,O=-1;for(let V=0;V<p;V++){const ee=c?v[N][V]:v[V][N];ee===O?_++:(_>=5&&(u+=qr.N1+(_-5)),_=1,O=ee)}_>=5&&(u+=qr.N1+(_-5))}return u}}qr.N1=3,qr.N2=3,qr.N3=40,qr.N4=10;class Vl{constructor(i,c){this.width=i,this.height=c;const u=new Array(c);for(let m=0;m!==c;m++)u[m]=new Uint8Array(i);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(i,c){return this.bytes[c][i]}getArray(){return this.bytes}setNumber(i,c,u){this.bytes[c][i]=u}setBoolean(i,c,u){this.bytes[c][i]=u?1:0}clear(i){for(const c of this.bytes)F.fill(c,i)}equals(i){if(!(i instanceof Vl))return!1;const c=i;if(this.width!==c.width||this.height!==c.height)return!1;for(let u=0,m=this.height;u<m;++u){const p=this.bytes[u],v=c.bytes[u];for(let N=0,_=this.width;N<_;++N)if(p[N]!==v[N])return!1}return!0}toString(){const i=new se;for(let c=0,u=this.height;c<u;++c){const m=this.bytes[c];for(let p=0,v=this.width;p<v;++p)switch(m[p]){case 0:i.append(" 0");break;case 1:i.append(" 1");break;default:i.append("  ");break}i.append(`
`)}return i.toString()}}class hi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const i=new se;return i.append(`<<
`),i.append(" mode: "),i.append(this.mode?this.mode.toString():"null"),i.append(`
 ecLevel: `),i.append(this.ecLevel?this.ecLevel.toString():"null"),i.append(`
 version: `),i.append(this.version?this.version.toString():"null"),i.append(`
 maskPattern: `),i.append(this.maskPattern.toString()),this.matrix?(i.append(`
 matrix:
`),i.append(this.matrix.toString())):i.append(`
 matrix: null
`),i.append(`>>
`),i.toString()}setMode(i){this.mode=i}setECLevel(i){this.ecLevel=i}setVersion(i){this.version=i}setMaskPattern(i){this.maskPattern=i}setMatrix(i){this.matrix=i}static isValidMaskPattern(i){return i>=0&&i<hi.NUM_MASK_PATTERNS}}hi.NUM_MASK_PATTERNS=8;class Cr extends g{}Cr.kind="WriterException";class Ft{constructor(){}static clearMatrix(i){i.clear(255)}static buildMatrix(i,c,u,m,p){Ft.clearMatrix(p),Ft.embedBasicPatterns(u,p),Ft.embedTypeInfo(c,m,p),Ft.maybeEmbedVersionInfo(u,p),Ft.embedDataBits(i,m,p)}static embedBasicPatterns(i,c){Ft.embedPositionDetectionPatternsAndSeparators(c),Ft.embedDarkDotAtLeftBottomCorner(c),Ft.maybeEmbedPositionAdjustmentPatterns(i,c),Ft.embedTimingPatterns(c)}static embedTypeInfo(i,c,u){const m=new L;Ft.makeTypeInfoBits(i,c,m);for(let p=0,v=m.getSize();p<v;++p){const N=m.get(m.getSize()-1-p),_=Ft.TYPE_INFO_COORDINATES[p],O=_[0],V=_[1];if(u.setBoolean(O,V,N),p<8){const ee=u.getWidth()-p-1;u.setBoolean(ee,8,N)}else{const ue=u.getHeight()-7+(p-8);u.setBoolean(8,ue,N)}}}static maybeEmbedVersionInfo(i,c){if(i.getVersionNumber()<7)return;const u=new L;Ft.makeVersionInfoBits(i,u);let m=17;for(let p=0;p<6;++p)for(let v=0;v<3;++v){const N=u.get(m);m--,c.setBoolean(p,c.getHeight()-11+v,N),c.setBoolean(c.getHeight()-11+v,p,N)}}static embedDataBits(i,c,u){let m=0,p=-1,v=u.getWidth()-1,N=u.getHeight()-1;for(;v>0;){for(v===6&&(v-=1);N>=0&&N<u.getHeight();){for(let _=0;_<2;++_){const O=v-_;if(!Ft.isEmpty(u.get(O,N)))continue;let V;m<i.getSize()?(V=i.get(m),++m):V=!1,c!==255&&qr.getDataMaskBit(c,O,N)&&(V=!V),u.setBoolean(O,N,V)}N+=p}p=-p,N+=p,v-=2}if(m!==i.getSize())throw new Cr("Not all bits consumed: "+m+"/"+i.getSize())}static findMSBSet(i){return 32-T.numberOfLeadingZeros(i)}static calculateBCHCode(i,c){if(c===0)throw new k("0 polynomial");const u=Ft.findMSBSet(c);for(i<<=u-1;Ft.findMSBSet(i)>=u;)i^=c<<Ft.findMSBSet(i)-u;return i}static makeTypeInfoBits(i,c,u){if(!hi.isValidMaskPattern(c))throw new Cr("Invalid mask pattern");const m=i.getBits()<<3|c;u.appendBits(m,5);const p=Ft.calculateBCHCode(m,Ft.TYPE_INFO_POLY);u.appendBits(p,10);const v=new L;if(v.appendBits(Ft.TYPE_INFO_MASK_PATTERN,15),u.xor(v),u.getSize()!==15)throw new Cr("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(i,c){c.appendBits(i.getVersionNumber(),6);const u=Ft.calculateBCHCode(i.getVersionNumber(),Ft.VERSION_INFO_POLY);if(c.appendBits(u,12),c.getSize()!==18)throw new Cr("should not happen but we got: "+c.getSize())}static isEmpty(i){return i===255}static embedTimingPatterns(i){for(let c=8;c<i.getWidth()-8;++c){const u=(c+1)%2;Ft.isEmpty(i.get(c,6))&&i.setNumber(c,6,u),Ft.isEmpty(i.get(6,c))&&i.setNumber(6,c,u)}}static embedDarkDotAtLeftBottomCorner(i){if(i.get(8,i.getHeight()-8)===0)throw new Cr;i.setNumber(8,i.getHeight()-8,1)}static embedHorizontalSeparationPattern(i,c,u){for(let m=0;m<8;++m){if(!Ft.isEmpty(u.get(i+m,c)))throw new Cr;u.setNumber(i+m,c,0)}}static embedVerticalSeparationPattern(i,c,u){for(let m=0;m<7;++m){if(!Ft.isEmpty(u.get(i,c+m)))throw new Cr;u.setNumber(i,c+m,0)}}static embedPositionAdjustmentPattern(i,c,u){for(let m=0;m<5;++m){const p=Ft.POSITION_ADJUSTMENT_PATTERN[m];for(let v=0;v<5;++v)u.setNumber(i+v,c+m,p[v])}}static embedPositionDetectionPattern(i,c,u){for(let m=0;m<7;++m){const p=Ft.POSITION_DETECTION_PATTERN[m];for(let v=0;v<7;++v)u.setNumber(i+v,c+m,p[v])}}static embedPositionDetectionPatternsAndSeparators(i){const c=Ft.POSITION_DETECTION_PATTERN[0].length;Ft.embedPositionDetectionPattern(0,0,i),Ft.embedPositionDetectionPattern(i.getWidth()-c,0,i),Ft.embedPositionDetectionPattern(0,i.getWidth()-c,i);const u=8;Ft.embedHorizontalSeparationPattern(0,u-1,i),Ft.embedHorizontalSeparationPattern(i.getWidth()-u,u-1,i),Ft.embedHorizontalSeparationPattern(0,i.getWidth()-u,i);const m=7;Ft.embedVerticalSeparationPattern(m,0,i),Ft.embedVerticalSeparationPattern(i.getHeight()-m-1,0,i),Ft.embedVerticalSeparationPattern(m,i.getHeight()-m,i)}static maybeEmbedPositionAdjustmentPatterns(i,c){if(i.getVersionNumber()<2)return;const u=i.getVersionNumber()-1,m=Ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let p=0,v=m.length;p!==v;p++){const N=m[p];if(N>=0)for(let _=0;_!==v;_++){const O=m[_];O>=0&&Ft.isEmpty(c.get(O,N))&&Ft.embedPositionAdjustmentPattern(O-2,N-2,c)}}}}Ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ft.VERSION_INFO_POLY=7973,Ft.TYPE_INFO_POLY=1335,Ft.TYPE_INFO_MASK_PATTERN=21522;class Bf{constructor(i,c){this.dataBytes=i,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Lr{constructor(){}static calculateMaskPenalty(i){return qr.applyMaskPenaltyRule1(i)+qr.applyMaskPenaltyRule2(i)+qr.applyMaskPenaltyRule3(i)+qr.applyMaskPenaltyRule4(i)}static encode(i,c,u=null){let m=Lr.DEFAULT_BYTE_MODE_ENCODING;const p=u!==null&&u.get(fa.CHARACTER_SET)!==void 0;p&&(m=u.get(fa.CHARACTER_SET).toString());const v=this.chooseMode(i,m),N=new L;if(v===Dt.BYTE&&(p||Lr.DEFAULT_BYTE_MODE_ENCODING!==m)){const gt=z.getCharacterSetECIByName(m);gt!==void 0&&this.appendECI(gt,N)}this.appendModeInfo(v,N);const _=new L;this.appendBytes(i,v,_,m);let O;if(u!==null&&u.get(fa.QR_VERSION)!==void 0){const gt=Number.parseInt(u.get(fa.QR_VERSION).toString(),10);O=Tt.getVersionForNumber(gt);const ft=this.calculateBitsNeeded(v,N,_,O);if(!this.willFit(ft,O,c))throw new Cr("Data too big for requested version")}else O=this.recommendVersion(c,v,N,_);const V=new L;V.appendBitArray(N);const ee=v===Dt.BYTE?_.getSizeInBytes():i.length;this.appendLengthInfo(ee,O,v,V),V.appendBitArray(_);const ue=O.getECBlocksForLevel(c),je=O.getTotalCodewords()-ue.getTotalECCodewords();this.terminateBits(je,V);const De=this.interleaveWithECBytes(V,O.getTotalCodewords(),je,ue.getNumBlocks()),Me=new hi;Me.setECLevel(c),Me.setMode(v),Me.setVersion(O);const Ue=O.getDimensionForVersion(),Ke=new Vl(Ue,Ue),ht=this.chooseMaskPattern(De,c,O,Ke);return Me.setMaskPattern(ht),Ft.buildMatrix(De,c,O,ht,Ke),Me.setMatrix(Ke),Me}static recommendVersion(i,c,u,m){const p=this.calculateBitsNeeded(c,u,m,Tt.getVersionForNumber(1)),v=this.chooseVersion(p,i),N=this.calculateBitsNeeded(c,u,m,v);return this.chooseVersion(N,i)}static calculateBitsNeeded(i,c,u,m){return c.getSize()+i.getCharacterCountBits(m)+u.getSize()}static getAlphanumericCode(i){return i<Lr.ALPHANUMERIC_TABLE.length?Lr.ALPHANUMERIC_TABLE[i]:-1}static chooseMode(i,c=null){if(z.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(i))return Dt.KANJI;let u=!1,m=!1;for(let p=0,v=i.length;p<v;++p){const N=i.charAt(p);if(Lr.isDigit(N))u=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)m=!0;else return Dt.BYTE}return m?Dt.ALPHANUMERIC:u?Dt.NUMERIC:Dt.BYTE}static isOnlyDoubleByteKanji(i){let c;try{c=te.encode(i,z.SJIS)}catch{return!1}const u=c.length;if(u%2!==0)return!1;for(let m=0;m<u;m+=2){const p=c[m]&255;if((p<129||p>159)&&(p<224||p>235))return!1}return!0}static chooseMaskPattern(i,c,u,m){let p=Number.MAX_SAFE_INTEGER,v=-1;for(let N=0;N<hi.NUM_MASK_PATTERNS;N++){Ft.buildMatrix(i,c,u,N,m);let _=this.calculateMaskPenalty(m);_<p&&(p=_,v=N)}return v}static chooseVersion(i,c){for(let u=1;u<=40;u++){const m=Tt.getVersionForNumber(u);if(Lr.willFit(i,m,c))return m}throw new Cr("Data too big")}static willFit(i,c,u){const m=c.getTotalCodewords(),v=c.getECBlocksForLevel(u).getTotalECCodewords(),N=m-v,_=(i+7)/8;return N>=_}static terminateBits(i,c){const u=i*8;if(c.getSize()>u)throw new Cr("data bits cannot fit in the QR Code"+c.getSize()+" > "+u);for(let v=0;v<4&&c.getSize()<u;++v)c.appendBit(!1);const m=c.getSize()&7;if(m>0)for(let v=m;v<8;v++)c.appendBit(!1);const p=i-c.getSizeInBytes();for(let v=0;v<p;++v)c.appendBits((v&1)===0?236:17,8);if(c.getSize()!==u)throw new Cr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(i,c,u,m,p,v){if(m>=u)throw new Cr("Block ID too large");const N=i%u,_=u-N,O=Math.floor(i/u),V=O+1,ee=Math.floor(c/u),ue=ee+1,je=O-ee,De=V-ue;if(je!==De)throw new Cr("EC bytes mismatch");if(u!==_+N)throw new Cr("RS blocks mismatch");if(i!==(ee+je)*_+(ue+De)*N)throw new Cr("Total bytes mismatch");m<_?(p[0]=ee,v[0]=je):(p[0]=ue,v[0]=De)}static interleaveWithECBytes(i,c,u,m){if(i.getSizeInBytes()!==u)throw new Cr("Number of bits and data bytes does not match");let p=0,v=0,N=0;const _=new Array;for(let V=0;V<m;++V){const ee=new Int32Array(1),ue=new Int32Array(1);Lr.getNumDataBytesAndNumECBytesForBlockID(c,u,m,V,ee,ue);const je=ee[0],De=new Uint8Array(je);i.toBytes(8*p,De,0,je);const Me=Lr.generateECBytes(De,ue[0]);_.push(new Bf(De,Me)),v=Math.max(v,je),N=Math.max(N,Me.length),p+=ee[0]}if(u!==p)throw new Cr("Data bytes does not match offset");const O=new L;for(let V=0;V<v;++V)for(const ee of _){const ue=ee.getDataBytes();V<ue.length&&O.appendBits(ue[V],8)}for(let V=0;V<N;++V)for(const ee of _){const ue=ee.getErrorCorrectionBytes();V<ue.length&&O.appendBits(ue[V],8)}if(c!==O.getSizeInBytes())throw new Cr("Interleaving error: "+c+" and "+O.getSizeInBytes()+" differ.");return O}static generateECBytes(i,c){const u=i.length,m=new Int32Array(u+c);for(let v=0;v<u;v++)m[v]=i[v]&255;new Fc(Ae.QR_CODE_FIELD_256).encode(m,c);const p=new Uint8Array(c);for(let v=0;v<c;v++)p[v]=m[u+v];return p}static appendModeInfo(i,c){c.appendBits(i.getBits(),4)}static appendLengthInfo(i,c,u,m){const p=u.getCharacterCountBits(c);if(i>=1<<p)throw new Cr(i+" is bigger than "+((1<<p)-1));m.appendBits(i,p)}static appendBytes(i,c,u,m){switch(c){case Dt.NUMERIC:Lr.appendNumericBytes(i,u);break;case Dt.ALPHANUMERIC:Lr.appendAlphanumericBytes(i,u);break;case Dt.BYTE:Lr.append8BitBytes(i,u,m);break;case Dt.KANJI:Lr.appendKanjiBytes(i,u);break;default:throw new Cr("Invalid mode: "+c)}}static getDigit(i){return i.charCodeAt(0)-48}static isDigit(i){const c=Lr.getDigit(i);return c>=0&&c<=9}static appendNumericBytes(i,c){const u=i.length;let m=0;for(;m<u;){const p=Lr.getDigit(i.charAt(m));if(m+2<u){const v=Lr.getDigit(i.charAt(m+1)),N=Lr.getDigit(i.charAt(m+2));c.appendBits(p*100+v*10+N,10),m+=3}else if(m+1<u){const v=Lr.getDigit(i.charAt(m+1));c.appendBits(p*10+v,7),m+=2}else c.appendBits(p,4),m++}}static appendAlphanumericBytes(i,c){const u=i.length;let m=0;for(;m<u;){const p=Lr.getAlphanumericCode(i.charCodeAt(m));if(p===-1)throw new Cr;if(m+1<u){const v=Lr.getAlphanumericCode(i.charCodeAt(m+1));if(v===-1)throw new Cr;c.appendBits(p*45+v,11),m+=2}else c.appendBits(p,6),m++}}static append8BitBytes(i,c,u){let m;try{m=te.encode(i,u)}catch(p){throw new Cr(p)}for(let p=0,v=m.length;p!==v;p++){const N=m[p];c.appendBits(N,8)}}static appendKanjiBytes(i,c){let u;try{u=te.encode(i,z.SJIS)}catch(p){throw new Cr(p)}const m=u.length;for(let p=0;p<m;p+=2){const v=u[p]&255,N=u[p+1]&255,_=v<<8&4294967295|N;let O=-1;if(_>=33088&&_<=40956?O=_-33088:_>=57408&&_<=60351&&(O=_-49472),O===-1)throw new Cr("Invalid byte sequence");const V=(O>>8)*192+(O&255);c.appendBits(V,13)}}static appendECI(i,c){c.appendBits(Dt.ECI.getBits(),4),c.appendBits(i.getValue(),8)}}Lr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Lr.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class mi{write(i,c,u,m=null){if(i.length===0)throw new k("Found empty contents");if(c<0||u<0)throw new k("Requested dimensions are too small: "+c+"x"+u);let p=jr.L,v=mi.QUIET_ZONE_SIZE;m!==null&&(m.get(fa.ERROR_CORRECTION)!==void 0&&(p=jr.fromString(m.get(fa.ERROR_CORRECTION).toString())),m.get(fa.MARGIN)!==void 0&&(v=Number.parseInt(m.get(fa.MARGIN).toString(),10)));const N=Lr.encode(i,p,m);return this.renderResult(N,c,u,v)}writeToDom(i,c,u,m,p=null){typeof i=="string"&&(i=document.querySelector(i));const v=this.write(c,u,m,p);i&&i.appendChild(v)}renderResult(i,c,u,m){const p=i.getMatrix();if(p===null)throw new Ee;const v=p.getWidth(),N=p.getHeight(),_=v+m*2,O=N+m*2,V=Math.max(c,_),ee=Math.max(u,O),ue=Math.min(Math.floor(V/_),Math.floor(ee/O)),je=Math.floor((V-v*ue)/2),De=Math.floor((ee-N*ue)/2),Me=this.createSVGElement(V,ee);for(let Ue=0,Ke=De;Ue<N;Ue++,Ke+=ue)for(let ht=0,gt=je;ht<v;ht++,gt+=ue)if(p.get(ht,Ue)===1){const ft=this.createSvgRectElement(gt,Ke,ue,ue);Me.appendChild(ft)}return Me}createSVGElement(i,c){const u=document.createElementNS(mi.SVG_NS,"svg");return u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(i,c,u,m){const p=document.createElementNS(mi.SVG_NS,"rect");return p.setAttributeNS(null,"x",i.toString()),p.setAttributeNS(null,"y",c.toString()),p.setAttributeNS(null,"height",u.toString()),p.setAttributeNS(null,"width",m.toString()),p.setAttributeNS(null,"fill","#000000"),p}}mi.QUIET_ZONE_SIZE=4,mi.SVG_NS="http://www.w3.org/2000/svg";class Wi{encode(i,c,u,m,p){if(i.length===0)throw new k("Found empty contents");if(c!==re.QR_CODE)throw new k("Can only encode QR_CODE, but got "+c);if(u<0||m<0)throw new k(`Requested dimensions are too small: ${u}x${m}`);let v=jr.L,N=Wi.QUIET_ZONE_SIZE;p!==null&&(p.get(fa.ERROR_CORRECTION)!==void 0&&(v=jr.fromString(p.get(fa.ERROR_CORRECTION).toString())),p.get(fa.MARGIN)!==void 0&&(N=Number.parseInt(p.get(fa.MARGIN).toString(),10)));const _=Lr.encode(i,v,p);return Wi.renderResult(_,u,m,N)}static renderResult(i,c,u,m){const p=i.getMatrix();if(p===null)throw new Ee;const v=p.getWidth(),N=p.getHeight(),_=v+m*2,O=N+m*2,V=Math.max(c,_),ee=Math.max(u,O),ue=Math.min(Math.floor(V/_),Math.floor(ee/O)),je=Math.floor((V-v*ue)/2),De=Math.floor((ee-N*ue)/2),Me=new ie(V,ee);for(let Ue=0,Ke=De;Ue<N;Ue++,Ke+=ue)for(let ht=0,gt=je;ht<v;ht++,gt+=ue)p.get(ht,Ue)===1&&Me.setRegion(gt,Ke,ue,ue);return Me}}Wi.QUIET_ZONE_SIZE=4;class Pf{encode(i,c,u,m,p){let v;switch(c){case re.QR_CODE:v=new Wi;break;default:throw new k("No encoder available for format "+c)}return v.encode(i,c,u,m,p)}}class rn extends pe{constructor(i,c,u,m,p,v,N,_){if(super(v,N),this.yuvData=i,this.dataWidth=c,this.dataHeight=u,this.left=m,this.top=p,m+v>c||p+N>u)throw new k("Crop rectangle does not fit within image data.");_&&this.reverseHorizontal(v,N)}getRow(i,c){if(i<0||i>=this.getHeight())throw new k("Requested row is outside the image: "+i);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(i+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,m,c,0,u),c}getMatrix(){const i=this.getWidth(),c=this.getHeight();if(i===this.dataWidth&&c===this.dataHeight)return this.yuvData;const u=i*c,m=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return A.arraycopy(this.yuvData,p,m,0,u),m;for(let v=0;v<c;v++){const N=v*i;A.arraycopy(this.yuvData,p,m,N,i),p+=this.dataWidth}return m}isCropSupported(){return!0}crop(i,c,u,m){return new rn(this.yuvData,this.dataWidth,this.dataHeight,this.left+i,this.top+c,u,m,!1)}renderThumbnail(){const i=this.getWidth()/rn.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/rn.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(i*c),m=this.yuvData;let p=this.top*this.dataWidth+this.left;for(let v=0;v<c;v++){const N=v*i;for(let _=0;_<i;_++){const O=m[p+_*rn.THUMBNAIL_SCALE_FACTOR]&255;u[N+_]=4278190080|O*65793}p+=this.dataWidth*rn.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/rn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/rn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(i,c){const u=this.yuvData;for(let m=0,p=this.top*this.dataWidth+this.left;m<c;m++,p+=this.dataWidth){const v=p+i/2;for(let N=p,_=p+i-1;N<v;N++,_--){const O=u[N];u[N]=u[_],u[_]=O}}}invert(){return new me(this)}}rn.THUMBNAIL_SCALE_FACTOR=2;class Gl extends pe{constructor(i,c,u,m,p,v,N){if(super(c,u),this.dataWidth=m,this.dataHeight=p,this.left=v,this.top=N,i.BYTES_PER_ELEMENT===4){const _=c*u,O=new Uint8ClampedArray(_);for(let V=0;V<_;V++){const ee=i[V],ue=ee>>16&255,je=ee>>7&510,De=ee&255;O[V]=(ue+je+De)/4&255}this.luminances=O}else this.luminances=i;if(m===void 0&&(this.dataWidth=c),p===void 0&&(this.dataHeight=u),v===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+u>this.dataHeight)throw new k("Crop rectangle does not fit within image data.")}getRow(i,c){if(i<0||i>=this.getHeight())throw new k("Requested row is outside the image: "+i);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(i+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,m,c,0,u),c}getMatrix(){const i=this.getWidth(),c=this.getHeight();if(i===this.dataWidth&&c===this.dataHeight)return this.luminances;const u=i*c,m=new Uint8ClampedArray(u);let p=this.top*this.dataWidth+this.left;if(i===this.dataWidth)return A.arraycopy(this.luminances,p,m,0,u),m;for(let v=0;v<c;v++){const N=v*i;A.arraycopy(this.luminances,p,m,N,i),p+=this.dataWidth}return m}isCropSupported(){return!0}crop(i,c,u,m){return new Gl(this.luminances,u,m,this.dataWidth,this.dataHeight,this.left+i,this.top+c)}invert(){return new me(this)}}class Ki extends z{static forName(i){return this.getCharacterSetECIByName(i)}}class Lc{}Lc.ISO_8859_1=z.ISO8859_1;class Bc{isCompact(){return this.compact}setCompact(i){this.compact=i}getSize(){return this.size}setSize(i){this.size=i}getLayers(){return this.layers}setLayers(i){this.layers=i}getCodeWords(){return this.codeWords}setCodeWords(i){this.codeWords=i}getMatrix(){return this.matrix}setMatrix(i){this.matrix=i}}class Pc{static singletonList(i){return[i]}static min(i,c){return i.sort(c)[0]}}class jd{constructor(i){this.previous=i}getPrevious(){return this.previous}}class gi extends jd{constructor(i,c,u){super(i),this.value=c,this.bitCount=u}appendTo(i,c){i.appendBits(this.value,this.bitCount)}add(i,c){return new gi(this,i,c)}addBinaryShift(i,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new gi(this,i,c)}toString(){let i=this.value&(1<<this.bitCount)-1;return i|=1<<this.bitCount,"<"+T.toBinaryString(i|1<<this.bitCount).substring(1)+">"}}class zo extends gi{constructor(i,c,u){super(i,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=u}appendTo(i,c){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(i.appendBits(31,5),this.binaryShiftByteCount>62?i.appendBits(this.binaryShiftByteCount-31,16):u===0?i.appendBits(Math.min(this.binaryShiftByteCount,31),5):i.appendBits(this.binaryShiftByteCount-31,5)),i.appendBits(c[this.binaryShiftStart+u],8)}addBinaryShift(i,c){return new zo(this,i,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Zi(J,i,c){return new zo(J,i,c)}function Yl(J,i,c){return new gi(J,i,c)}const zf=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],$n=0,Xl=1,ps=2,Qi=3,ts=4,Uf=new gi(null,0,0),Ji=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ed(J){for(let i of J)F.fill(i,-1);return J[$n][ts]=0,J[Xl][ts]=0,J[Xl][$n]=28,J[Qi][ts]=0,J[ps][ts]=0,J[ps][$n]=15,J}const zc=Ed(F.createInt32Array(6,6));class Cs{constructor(i,c,u,m){this.token=i,this.mode=c,this.binaryShiftByteCount=u,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(i,c){let u=this.bitCount,m=this.token;if(i!==this.mode){let v=Ji[this.mode][i];m=Yl(m,v&65535,v>>16),u+=v>>16}let p=i===ps?4:5;return m=Yl(m,c,p),new Cs(m,i,0,u+p)}shiftAndAppend(i,c){let u=this.token,m=this.mode===ps?4:5;return u=Yl(u,zc[this.mode][i],m),u=Yl(u,c,5),new Cs(u,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(i){let c=this.token,u=this.mode,m=this.bitCount;if(this.mode===ts||this.mode===ps){let N=Ji[u][$n];c=Yl(c,N&65535,N>>16),m+=N>>16,u=$n}let p=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,v=new Cs(c,u,this.binaryShiftByteCount+1,m+p);return v.binaryShiftByteCount===2078&&(v=v.endBinaryShift(i+1)),v}endBinaryShift(i){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=Zi(c,i-this.binaryShiftByteCount,this.binaryShiftByteCount),new Cs(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(i){let c=this.bitCount+(Ji[this.mode][i.mode]>>16);return this.binaryShiftByteCount<i.binaryShiftByteCount?c+=Cs.calculateBinaryShiftCost(i)-Cs.calculateBinaryShiftCost(this):this.binaryShiftByteCount>i.binaryShiftByteCount&&i.binaryShiftByteCount>0&&(c+=10),c<=i.bitCount}toBitArray(i){let c=[];for(let m=this.endBinaryShift(i.length).token;m!==null;m=m.getPrevious())c.unshift(m);let u=new L;for(const m of c)m.appendTo(u,i);return u}toString(){return G.format("%s bits=%d bytes=%d",zf[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(i){return i.binaryShiftByteCount>62?21:i.binaryShiftByteCount>31?20:i.binaryShiftByteCount>0?10:0}}Cs.INITIAL_STATE=new Cs(Uf,$n,0,0);function Uc(J){const i=G.getCharCode(" "),c=G.getCharCode("."),u=G.getCharCode(",");J[$n][i]=1;const m=G.getCharCode("Z"),p=G.getCharCode("A");for(let ue=p;ue<=m;ue++)J[$n][ue]=ue-p+2;J[Xl][i]=1;const v=G.getCharCode("z"),N=G.getCharCode("a");for(let ue=N;ue<=v;ue++)J[Xl][ue]=ue-N+2;J[ps][i]=1;const _=G.getCharCode("9"),O=G.getCharCode("0");for(let ue=O;ue<=_;ue++)J[ps][ue]=ue-O+2;J[ps][u]=12,J[ps][c]=13;const V=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ue=0;ue<V.length;ue++)J[Qi][G.getCharCode(V[ue])]=ue;const ee=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ue=0;ue<ee.length;ue++)G.getCharCode(ee[ue])>0&&(J[ts][G.getCharCode(ee[ue])]=ue);return J}const Uo=Uc(F.createInt32Array(5,256));class el{constructor(i){this.text=i}encode(){const i=G.getCharCode(" "),c=G.getCharCode(`
`);let u=Pc.singletonList(Cs.INITIAL_STATE);for(let p=0;p<this.text.length;p++){let v,N=p+1<this.text.length?this.text[p+1]:0;switch(this.text[p]){case G.getCharCode("\r"):v=N===c?2:0;break;case G.getCharCode("."):v=N===i?3:0;break;case G.getCharCode(","):v=N===i?4:0;break;case G.getCharCode(":"):v=N===i?5:0;break;default:v=0}v>0?(u=el.updateStateListForPair(u,p,v),p++):u=this.updateStateListForChar(u,p)}return Pc.min(u,(p,v)=>p.getBitCount()-v.getBitCount()).toBitArray(this.text)}updateStateListForChar(i,c){const u=[];for(let m of i)this.updateStateForChar(m,c,u);return el.simplifyStates(u)}updateStateForChar(i,c,u){let m=this.text[c]&255,p=Uo[i.getMode()][m]>0,v=null;for(let N=0;N<=ts;N++){let _=Uo[N][m];if(_>0){if(v==null&&(v=i.endBinaryShift(c)),!p||N===i.getMode()||N===ps){const O=v.latchAndAppend(N,_);u.push(O)}if(!p&&zc[i.getMode()][N]>=0){const O=v.shiftAndAppend(N,_);u.push(O)}}}if(i.getBinaryShiftByteCount()>0||Uo[i.getMode()][m]===0){let N=i.addBinaryShiftChar(c);u.push(N)}}static updateStateListForPair(i,c,u){const m=[];for(let p of i)this.updateStateForPair(p,c,u,m);return this.simplifyStates(m)}static updateStateForPair(i,c,u,m){let p=i.endBinaryShift(c);if(m.push(p.latchAndAppend(ts,u)),i.getMode()!==ts&&m.push(p.shiftAndAppend(ts,u)),u===3||u===4){let v=p.latchAndAppend(ps,16-u).latchAndAppend(ps,1);m.push(v)}if(i.getBinaryShiftByteCount()>0){let v=i.addBinaryShiftChar(c).addBinaryShiftChar(c+1);m.push(v)}}static simplifyStates(i){let c=[];for(const u of i){let m=!0;for(const p of c){if(p.isBetterThanOrEqualTo(u)){m=!1;break}u.isBetterThanOrEqualTo(p)&&(c=c.filter(v=>v!==p))}m&&c.push(u)}return c}}class dr{constructor(){}static encodeBytes(i){return dr.encode(i,dr.DEFAULT_EC_PERCENT,dr.DEFAULT_AZTEC_LAYERS)}static encode(i,c,u){let m=new el(i).encode(),p=T.truncDivision(m.getSize()*c,100)+11,v=m.getSize()+p,N,_,O,V,ee;if(u!==dr.DEFAULT_AZTEC_LAYERS){if(N=u<0,_=Math.abs(u),_>(N?dr.MAX_NB_BITS_COMPACT:dr.MAX_NB_BITS))throw new k(G.format("Illegal value %s for layers",u));O=dr.totalBitsInLayer(_,N),V=dr.WORD_SIZE[_];let ft=O-O%V;if(ee=dr.stuffBits(m,V),ee.getSize()+p>ft)throw new k("Data to large for user specified layer");if(N&&ee.getSize()>V*64)throw new k("Data to large for user specified layer")}else{V=0,ee=null;for(let ft=0;;ft++){if(ft>dr.MAX_NB_BITS)throw new k("Data too large for an Aztec code");if(N=ft<=3,_=N?ft+1:ft,O=dr.totalBitsInLayer(_,N),v>O)continue;(ee==null||V!==dr.WORD_SIZE[_])&&(V=dr.WORD_SIZE[_],ee=dr.stuffBits(m,V));let Kt=O-O%V;if(!(N&&ee.getSize()>V*64)&&ee.getSize()+p<=Kt)break}}let ue=dr.generateCheckWords(ee,O,V),je=ee.getSize()/V,De=dr.generateModeMessage(N,_,je),Me=(N?11:14)+_*4,Ue=new Int32Array(Me),Ke;if(N){Ke=Me;for(let ft=0;ft<Ue.length;ft++)Ue[ft]=ft}else{Ke=Me+1+2*T.truncDivision(T.truncDivision(Me,2)-1,15);let ft=T.truncDivision(Me,2),Kt=T.truncDivision(Ke,2);for(let $t=0;$t<ft;$t++){let Va=$t+T.truncDivision($t,15);Ue[ft-$t-1]=Kt-Va-1,Ue[ft+$t]=Kt+Va+1}}let ht=new ie(Ke);for(let ft=0,Kt=0;ft<_;ft++){let $t=(_-ft)*4+(N?9:12);for(let Va=0;Va<$t;Va++){let Ss=Va*2;for(let rs=0;rs<2;rs++)ue.get(Kt+Ss+rs)&&ht.set(Ue[ft*2+rs],Ue[ft*2+Va]),ue.get(Kt+$t*2+Ss+rs)&&ht.set(Ue[ft*2+Va],Ue[Me-1-ft*2-rs]),ue.get(Kt+$t*4+Ss+rs)&&ht.set(Ue[Me-1-ft*2-rs],Ue[Me-1-ft*2-Va]),ue.get(Kt+$t*6+Ss+rs)&&ht.set(Ue[Me-1-ft*2-Va],Ue[ft*2+rs])}Kt+=$t*8}if(dr.drawModeMessage(ht,N,Ke,De),N)dr.drawBullsEye(ht,T.truncDivision(Ke,2),5);else{dr.drawBullsEye(ht,T.truncDivision(Ke,2),7);for(let ft=0,Kt=0;ft<T.truncDivision(Me,2)-1;ft+=15,Kt+=16)for(let $t=T.truncDivision(Ke,2)&1;$t<Ke;$t+=2)ht.set(T.truncDivision(Ke,2)-Kt,$t),ht.set(T.truncDivision(Ke,2)+Kt,$t),ht.set($t,T.truncDivision(Ke,2)-Kt),ht.set($t,T.truncDivision(Ke,2)+Kt)}let gt=new Bc;return gt.setCompact(N),gt.setSize(Ke),gt.setLayers(_),gt.setCodeWords(je),gt.setMatrix(ht),gt}static drawBullsEye(i,c,u){for(let m=0;m<u;m+=2)for(let p=c-m;p<=c+m;p++)i.set(p,c-m),i.set(p,c+m),i.set(c-m,p),i.set(c+m,p);i.set(c-u,c-u),i.set(c-u+1,c-u),i.set(c-u,c-u+1),i.set(c+u,c-u),i.set(c+u,c-u+1),i.set(c+u,c+u-1)}static generateModeMessage(i,c,u){let m=new L;return i?(m.appendBits(c-1,2),m.appendBits(u-1,6),m=dr.generateCheckWords(m,28,4)):(m.appendBits(c-1,5),m.appendBits(u-1,11),m=dr.generateCheckWords(m,40,4)),m}static drawModeMessage(i,c,u,m){let p=T.truncDivision(u,2);if(c)for(let v=0;v<7;v++){let N=p-3+v;m.get(v)&&i.set(N,p-5),m.get(v+7)&&i.set(p+5,N),m.get(20-v)&&i.set(N,p+5),m.get(27-v)&&i.set(p-5,N)}else for(let v=0;v<10;v++){let N=p-5+v+T.truncDivision(v,5);m.get(v)&&i.set(N,p-7),m.get(v+10)&&i.set(p+7,N),m.get(29-v)&&i.set(N,p+7),m.get(39-v)&&i.set(p-7,N)}}static generateCheckWords(i,c,u){let m=i.getSize()/u,p=new Fc(dr.getGF(u)),v=T.truncDivision(c,u),N=dr.bitsToWords(i,u,v);p.encode(N,v-m);let _=c%u,O=new L;O.appendBits(0,_);for(const V of Array.from(N))O.appendBits(V,u);return O}static bitsToWords(i,c,u){let m=new Int32Array(u),p,v;for(p=0,v=i.getSize()/c;p<v;p++){let N=0;for(let _=0;_<c;_++)N|=i.get(p*c+_)?1<<c-_-1:0;m[p]=N}return m}static getGF(i){switch(i){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new k("Unsupported word size "+i)}}static stuffBits(i,c){let u=new L,m=i.getSize(),p=(1<<c)-2;for(let v=0;v<m;v+=c){let N=0;for(let _=0;_<c;_++)(v+_>=m||i.get(v+_))&&(N|=1<<c-1-_);(N&p)===p?(u.appendBits(N&p,c),v--):(N&p)===0?(u.appendBits(N|1,c),v--):u.appendBits(N,c)}return u}static totalBitsInLayer(i,c){return((c?88:112)+16*i)*i}}dr.DEFAULT_EC_PERCENT=33,dr.DEFAULT_AZTEC_LAYERS=0,dr.MAX_NB_BITS=32,dr.MAX_NB_BITS_COMPACT=4,dr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ho{encode(i,c,u,m){return this.encodeWithHints(i,c,u,m,null)}encodeWithHints(i,c,u,m,p){let v=Lc.ISO_8859_1,N=dr.DEFAULT_EC_PERCENT,_=dr.DEFAULT_AZTEC_LAYERS;return p!=null&&(p.has(fa.CHARACTER_SET)&&(v=Ki.forName(p.get(fa.CHARACTER_SET).toString())),p.has(fa.ERROR_CORRECTION)&&(N=T.parseInt(p.get(fa.ERROR_CORRECTION).toString())),p.has(fa.AZTEC_LAYERS)&&(_=T.parseInt(p.get(fa.AZTEC_LAYERS).toString()))),Ho.encodeLayers(i,c,u,m,v,N,_)}static encodeLayers(i,c,u,m,p,v,N){if(c!==re.AZTEC)throw new k("Can only encode AZTEC, but got "+c);let _=dr.encode(G.getBytes(i,p),v,N);return Ho.renderResult(_,u,m)}static renderResult(i,c,u){let m=i.getMatrix();if(m==null)throw new Ee;let p=m.getWidth(),v=m.getHeight(),N=Math.max(c,p),_=Math.max(u,v),O=Math.min(N/p,_/v),V=(N-p*O)/2,ee=(_-v*O)/2,ue=new ie(N,_);for(let je=0,De=ee;je<v;je++,De+=O)for(let Me=0,Ue=V;Me<p;Me++,Ue+=O)m.get(Me,je)&&ue.setRegion(Ue,De,O,O);return ue}}r.AbstractExpandedDecoder=ve,r.ArgumentException=w,r.ArithmeticException=we,r.AztecCode=Bc,r.AztecCodeReader=$e,r.AztecCodeWriter=Ho,r.AztecDecoder=Be,r.AztecDetector=It,r.AztecDetectorResult=ut,r.AztecEncoder=dr,r.AztecHighLevelEncoder=el,r.AztecPoint=Yt,r.BarcodeFormat=re,r.Binarizer=D,r.BinaryBitmap=E,r.BitArray=L,r.BitMatrix=ie,r.BitSource=Ja,r.BrowserAztecCodeReader=jt,r.BrowserBarcodeReader=Pn,r.BrowserCodeReader=K,r.BrowserDatamatrixCodeReader=Df,r.BrowserMultiFormatReader=Of,r.BrowserPDF417Reader=Ff,r.BrowserQRCodeReader=Lf,r.BrowserQRCodeSvgWriter=mi,r.CharacterSetECI=z,r.ChecksumException=S,r.Code128Reader=lt,r.Code39Reader=At,r.DataMatrixDecodedBitStreamParser=zn,r.DataMatrixReader=Fs,r.DecodeHintType=U,r.DecoderResult=Pe,r.DefaultGridSampler=ur,r.DetectorResult=wt,r.EAN13Reader=Jr,r.EncodeHintType=fa,r.Exception=g,r.FormatException=B,r.GenericGF=Ae,r.GenericGFPoly=nt,r.GlobalHistogramBinarizer=q,r.GridSampler=Mt,r.GridSamplerInstance=Ut,r.HTMLCanvasElementLuminanceSource=le,r.HybridBinarizer=ce,r.ITFReader=vt,r.IllegalArgumentException=k,r.IllegalStateException=Ee,r.InvertedLuminanceSource=me,r.LuminanceSource=pe,r.MathUtils=fe,r.MultiFormatOneDReader=Qa,r.MultiFormatReader=kd,r.MultiFormatWriter=Pf,r.NotFoundException=Y,r.OneDReader=Nt,r.PDF417DecodedBitStreamParser=Qe,r.PDF417DecoderErrorCorrection=zl,r.PDF417Reader=_a,r.PDF417ResultMetadata=Lo,r.PerspectiveTransform=qt,r.PlanarYUVLuminanceSource=rn,r.QRCodeByteMatrix=Vl,r.QRCodeDataMask=Aa,r.QRCodeDecodedBitStreamParser=Gr,r.QRCodeDecoderErrorCorrectionLevel=jr,r.QRCodeDecoderFormatInformation=Sa,r.QRCodeEncoder=Lr,r.QRCodeEncoderQRCode=hi,r.QRCodeMaskUtil=qr,r.QRCodeMatrixUtil=Ft,r.QRCodeMode=Dt,r.QRCodeReader=vn,r.QRCodeVersion=Tt,r.QRCodeWriter=Wi,r.RGBLuminanceSource=Gl,r.RSS14Reader=zt,r.RSSExpandedReader=tt,r.ReaderException=Ul,r.ReedSolomonDecoder=Je,r.ReedSolomonEncoder=Fc,r.ReedSolomonException=Le,r.Result=ae,r.ResultMetadataType=ke,r.ResultPoint=Ce,r.StringUtils=G,r.UnsupportedOperationException=Z,r.VideoInputDevice=X,r.WhiteRectangleDetector=Ct,r.WriterException=Cr,r.ZXingArrays=F,r.ZXingCharset=Ki,r.ZXingInteger=T,r.ZXingStandardCharsets=Lc,r.ZXingStringBuilder=se,r.ZXingStringEncoding=te,r.ZXingSystem=A,r.createAbstractExpandedDecoder=pt,Object.defineProperty(r,"__esModule",{value:!0})})}(T0,T0.exports)),T0.exports}var Yr=r_();const a_=ff(Yr),s_=Ck({__proto__:null,default:a_},[Yr]);var Gb=function(){function t(a,r,n){if(this.formatMap=new Map([[Et.QR_CODE,Yr.BarcodeFormat.QR_CODE],[Et.AZTEC,Yr.BarcodeFormat.AZTEC],[Et.CODABAR,Yr.BarcodeFormat.CODABAR],[Et.CODE_39,Yr.BarcodeFormat.CODE_39],[Et.CODE_93,Yr.BarcodeFormat.CODE_93],[Et.CODE_128,Yr.BarcodeFormat.CODE_128],[Et.DATA_MATRIX,Yr.BarcodeFormat.DATA_MATRIX],[Et.MAXICODE,Yr.BarcodeFormat.MAXICODE],[Et.ITF,Yr.BarcodeFormat.ITF],[Et.EAN_13,Yr.BarcodeFormat.EAN_13],[Et.EAN_8,Yr.BarcodeFormat.EAN_8],[Et.PDF_417,Yr.BarcodeFormat.PDF_417],[Et.RSS_14,Yr.BarcodeFormat.RSS_14],[Et.RSS_EXPANDED,Yr.BarcodeFormat.RSS_EXPANDED],[Et.UPC_A,Yr.BarcodeFormat.UPC_A],[Et.UPC_E,Yr.BarcodeFormat.UPC_E],[Et.UPC_EAN_EXTENSION,Yr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!s_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=n;var l=this.createZXingFormats(a),d=new Map;d.set(Yr.DecodeHintType.POSSIBLE_FORMATS,l),d.set(Yr.DecodeHintType.TRY_HARDER,!1),this.hints=d}return t.prototype.decodeAsync=function(a){var r=this;return new Promise(function(n,l){try{n(r.decode(a))}catch(d){l(d)}})},t.prototype.decode=function(a){var r=new Yr.MultiFormatReader(this.verbose,this.hints),n=new Yr.HTMLCanvasElementLuminanceSource(a),l=new Yr.BinaryBitmap(new Yr.HybridBinarizer(n)),d=r.decode(l);return{text:d.text,format:ww.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,n,l){a.set(r,n)}),a},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createZXingFormats=function(a){for(var r=[],n=0,l=a;n<l.length;n++){var d=l[n];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),n_=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},i_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Yb=function(){function t(a,r,n){if(this.formatMap=new Map([[Et.QR_CODE,"qr_code"],[Et.AZTEC,"aztec"],[Et.CODABAR,"codabar"],[Et.CODE_39,"code_39"],[Et.CODE_93,"code_93"],[Et.CODE_128,"code_128"],[Et.DATA_MATRIX,"data_matrix"],[Et.ITF,"itf"],[Et.EAN_13,"ean_13"],[Et.EAN_8,"ean_8"],[Et.PDF_417,"pdf417"],[Et.UPC_A,"upc_a"],[Et.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=n;var l=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},t.prototype.decodeAsync=function(a){return n_(this,void 0,void 0,function(){var r,n;return i_(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(a)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return n=this.selectLargestBarcode(r),[2,{text:n.rawValue,format:ww.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(a){for(var r=null,n=0,l=0,d=a;l<d.length;l++){var f=d[l],h=f.boundingBox.width*f.boundingBox.height;h>n&&(n=h,r=f)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(a){for(var r=[],n=0,l=a;n<l.length;n++){var d=l[n];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,n,l){a.set(r,n)}),a},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Xb=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},qb=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},l_=function(){function t(a,r,n,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,r&&Yb.isSupported()?(this.primaryDecoder=new Yb(a,n,l),this.secondaryDecoder=new Gb(a,n,l)):this.primaryDecoder=new Gb(a,n,l)}return t.prototype.decodeAsync=function(a){return Xb(this,void 0,void 0,function(){var r;return qb(this,function(n){switch(n.label){case 0:r=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(a){return Xb(this,void 0,void 0,function(){var r,n;return qb(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,l.sent()];case 3:if(n=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw n;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(a){if(this.verbose){var r=performance.now()-a;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,r=0,n=this.executionResults;r<n.length;r++){var l=n[r];a+=l}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),ig=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(n[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function n(){this.constructor=a}a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qu=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},Ju=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Ew=function(){function t(a,r){this.name=a,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(a){var r={};r[this.name]=a;var n={advanced:[r]};return this.track.applyConstraints(n)},t.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var r=a[this.name];return r}return null},t}(),o_=function(t){ig(a,t);function a(r,n){return t.call(this,r,n)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(r){var n={};n[this.name]=r;var l={advanced:[n]};return this.track.applyConstraints(l)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),n=r[this.name];return{min:n.min,max:n.max,step:n.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(Ew),c_=function(t){ig(a,t);function a(r){return t.call(this,"zoom",r)||this}return a}(o_),d_=function(t){ig(a,t);function a(r){return t.call(this,"torch",r)||this}return a}(Ew),u_=function(){function t(a){this.track=a}return t.prototype.zoomFeature=function(){return new c_(this.track)},t.prototype.torchFeature=function(){return new d_(this.track)},t}(),f_=function(){function t(a,r,n){this.isClosed=!1,this.parentElement=a,this.mediaStream=r,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return t.prototype.createVideoElement=function(a){var r=document.createElement("video");return r.style.width="".concat(a,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var n=a.surface.clientWidth,l=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(n,l),a.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(a,r,n,l){return Qu(this,void 0,void 0,function(){var d,f;return Ju(this,function(h){switch(h.label){case 0:return d=new t(a,r,l),n.aspectRatio?(f={aspectRatio:n.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:h.sent(),h.label=2;case 2:return d.setupSurface(),[2,d]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(a){this.failIfClosed();var r=this,n=function(){setTimeout(a,200),r.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(a){return Qu(this,void 0,void 0,function(){return Ju(this,function(r){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(r,n){var l=a.mediaStream.getVideoTracks(),d=l.length,f=0;a.mediaStream.getVideoTracks().forEach(function(h){a.mediaStream.removeTrack(h),h.stop(),++f,f>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),r())})})},t.prototype.getCapabilities=function(){return new u_(this.getFirstTrackOrFail())},t}(),x_=function(){function t(a){this.mediaStream=a}return t.prototype.render=function(a,r,n){return Qu(this,void 0,void 0,function(){return Ju(this,function(l){return[2,f_.create(a,this.mediaStream,r,n)]})})},t.create=function(a){return Qu(this,void 0,void 0,function(){var r,n;return Ju(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return n=l.sent(),[2,new t(n)]}})})},t}(),$b=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},Wb=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},h_=function(){function t(){}return t.failIfNotSupported=function(){return $b(this,void 0,void 0,function(){return Wb(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(a){return $b(this,void 0,void 0,function(){return Wb(this,function(r){return[2,x_.create(a)]})})},t}(),m_=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},g_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},p_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var a=yc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(a=yc.insecureContextCameraQueryError()),Promise.reject(a)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},t.getCamerasFromMediaDevices=function(){return m_(this,void 0,void 0,function(){var a,r,n,l,d,f,h;return g_(this,function(b){switch(b.label){case 0:return a=function(g){for(var w=g.getVideoTracks(),k=0,E=w;k<E.length;k++){var S=E[k];S.enabled=!1,S.stop(),g.removeTrack(S)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(n=b.sent(),l=[],d=0,f=n;d<f.length;d++)h=f[d],h.kind==="videoinput"&&l.push({id:h.deviceId,label:h.label});return a(r),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,r){var n=function(d){for(var f=[],h=0,b=d;h<b.length;h++){var g=b[h];g.kind==="video"&&f.push({id:g.id,label:g.label})}a(f)},l=MediaStreamTrack;l.getSources(n)})},t}(),sa;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(sa||(sa={}));var y_=function(){function t(){this.state=sa.NOT_STARTED,this.onGoingTransactionNewState=sa.UNKNOWN}return t.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},t.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===sa.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=sa.UNKNOWN,this.directTransition(a)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===sa.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=sa.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==sa.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(a){switch(this.state){case sa.UNKNOWN:throw"Transition from unknown is not allowed";case sa.NOT_STARTED:this.failIfNewStateIs(a,[sa.PAUSED]);break;case sa.SCANNING:break;case sa.PAUSED:break}},t.prototype.failIfNewStateIs=function(a,r){for(var n=0,l=r;n<l.length;n++){var d=l[n];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},t}(),b_=function(){function t(a){this.stateManager=a}return t.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},t.prototype.directTransition=function(a){this.stateManager.directTransition(a)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===sa.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==sa.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===sa.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===sa.PAUSED},t}(),v_=function(){function t(){}return t.create=function(){return new b_(new y_)},t}(),w_=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,l){n.__proto__=l}||function(n,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(n[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function n(){this.constructor=a}a.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Gs=function(t){w_(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(Sn),N_=function(){function t(a,r){this.logger=r,this.fps=Gs.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=Gs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?jw.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ni(this.qrbox)},t.create=function(a,r){return new t(a,r)},t}(),Kb=function(){function t(a,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var n;typeof r=="boolean"?this.verbose=r===!0:r&&(n=r,this.verbose=n.verbose===!0,n.experimentalFeatures),this.logger=new kw(this.verbose),this.qrcode=new l_(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=v_.create()}return t.prototype.start=function(a,r,n,l){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!n||typeof n!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var h=N_.create(r,this.logger);this.clearElement();var b=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=b,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Gs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var k=this,E=this.stateManagerProxy.startTransition(sa.SCANNING);return new Promise(function(S,D){var A=g?h.videoConstraints:k.createVideoConstraints(a);if(!A){E.cancel(),D("videoConstraints should be defined");return}var M={};(!g||h.aspectRatio)&&(M.aspectRatio=h.aspectRatio);var I={onRenderSurfaceReady:function(F,T){k.setupUi(F,T,h),k.isScanning=!0,k.foreverScan(h,n,f)}};h_.failIfNotSupported().then(function(F){F.create(A).then(function(T){return T.render(d.element,M,I).then(function(L){k.renderedCamera=L,E.execute(),S(null)}).catch(function(L){E.cancel(),D(L)})}).catch(function(T){E.cancel(),D(yc.errorGettingUserMedia(T))})}).catch(function(F){E.cancel(),D(yc.cameraStreamingNotSupported())})})},t.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(sa.PAUSED),this.showPausedState(),(ni(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,r=function(){a.stateManagerProxy.directTransition(sa.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(sa.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(a.element){var d=document.getElementById(Gs.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),n(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(a,r){return this.scanFileV2(a,r).then(function(n){return n.decodedText})},t.prototype.scanFileV2=function(a,r){var n=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ni(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,d){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(a);var f=new Image;f.onload=function(){var h=f.width,b=f.height,g=document.getElementById(n.elementId),w=g.clientWidth?g.clientWidth:Gs.DEFAULT_WIDTH,k=Math.max(g.clientHeight?g.clientHeight:b,Gs.FILE_SCAN_MIN_HEIGHT),E=n.computeCanvasDrawConfig(h,b,w,k);if(r){var S=n.createCanvasElement(w,k,"qr-canvas-visible");S.style.display="inline-block",g.appendChild(S);var D=S.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=w,D.canvas.height=k,D.drawImage(f,0,0,h,b,E.x,E.y,E.width,E.height)}var A=Gs.FILE_SCAN_HIDDEN_CANVAS_PADDING,M=Math.max(f.width,E.width),I=Math.max(f.height,E.height),F=M+2*A,T=I+2*A,L=n.createCanvasElement(F,T);g.appendChild(L);var H=L.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=F,H.canvas.height=T,H.drawImage(f,0,0,h,b,A,A,M,I);try{n.qrcode.decodeRobustlyAsync(L).then(function(U){l(Ub.createFromQrcodeResult(U))}).catch(d)}catch(U){d("QR code parse error, error = ".concat(U))}},f.onerror=d,f.onabort=d,f.onstalled=d,f.onsuspend=d,f.src=URL.createObjectURL(a)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return p_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(a){if(a){if(!jw.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(a){var r=[Et.QR_CODE,Et.AZTEC,Et.CODABAR,Et.CODE_39,Et.CODE_93,Et.CODE_128,Et.DATA_MATRIX,Et.MAXICODE,Et.ITF,Et.EAN_13,Et.EAN_8,Et.PDF_417,Et.RSS_14,Et.RSS_EXPANDED,Et.UPC_A,Et.UPC_E,Et.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return r;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],l=0,d=a.formatsToSupport;l<d.length;l++){var f=d[l];JA(f)?n.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(n.length===0)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(a){if(ni(a))return!0;if(!ni(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(ni(a.experimentalFeatures))return!0;var r=a.experimentalFeatures;return ni(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(a,r,n){var l=this,d=n.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(a,r,d),h=function(g){if(g<Gs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Gs.MIN_QR_BOX_SIZE,"px.")},b=function(g){return g>a&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=a),g};h(f.width),h(f.height),f.width=b(f.width)},t.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(a,r,n){if(typeof n=="number")return{width:n,height:n};if(typeof n=="function")try{return n(a,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return n},t.prototype.setupUi=function(a,r,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(a,r,n);var l=ni(n.qrbox)?{width:a,height:r}:n.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(a,r,l);d.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=n.isShadedBoxEnabled()&&d.height<=r,h={x:0,y:0,width:a,height:r},b=f?this.getShadedRegionBounds(a,r,d):h,g=this.createCanvasElement(b.width,b.height),w={willReadFrequently:!0},k=g.getContext("2d",w);k.canvas.width=b.width,k.canvas.height=b.height,this.element.append(g),f&&this.possiblyInsertShadingElement(this.element,a,r,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=k,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(a){var r=document.createElement("div");r.innerText=yc.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",a.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(a,r){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return a(l.text,Ub.createFromQrcodeResult(l)),n.possiblyUpdateShaders(!0),!0}).catch(function(l){n.possiblyUpdateShaders(!1);var d=yc.codeParseError(l);return r(d,Nw.createFrom(d)),!1})},t.prototype.foreverScan=function(a,r,n){var l=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),f=d.videoWidth/d.clientWidth,h=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*f,g=this.qrRegion.height*h,w=this.qrRegion.x*f,k=this.qrRegion.y*h;this.context.drawImage(d,w,k,b,g,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(a,r,n)},l.getTimeoutFps(a.fps))};this.scanContext(r,n).then(function(S){!S&&a.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,n).finally(function(){E()})):E()}).catch(function(S){l.logger.logError("Error happend while scanning context",S),E()})}},t.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var r="facingMode",n="deviceId",l={user:!0,environment:!0},d="exact",f=function(D){if(D in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},h=Object.keys(a);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var b=Object.keys(a)[0];if(b!==r&&b!==n)throw"Only '".concat(r,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(b===r){var g=a.facingMode;if(typeof g=="string"){if(f(g))return{facingMode:g}}else if(typeof g=="object")if(d in g){if(f(g["".concat(d)]))return{facingMode:{exact:g["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var w=typeof g;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var k=a.deviceId;if(typeof k=="string")return{deviceId:k};if(typeof k=="object"){if(d in k)return{deviceId:{exact:k["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var E=typeof k;throw"Invalid type of 'deviceId' = ".concat(E)}}}var S=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(S)},t.prototype.computeCanvasDrawConfig=function(a,r,n,l){if(a<=n&&r<=l){var d=(n-a)/2,f=(l-r)/2;return{x:d,y:f,width:a,height:r}}else{var h=a,b=r;return a>n&&(r=n/a*r,a=n),r>l&&(a=l/r*a,r=l),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(b)+" to ".concat(a,"X").concat(r,".")),this.computeCanvasDrawConfig(a,r,n,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},t.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=a?Gs.BORDER_SHADER_MATCH_COLOR:Gs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(a,r,n){var l=a,d=r,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(d,"px"),f.style.display="none",f.id=ni(n)?"qr-canvas":n,f},t.prototype.getShadedRegionBounds=function(a,r,n){if(n.width>a||n.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-n.width)/2,y:(r-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(a,r,n,l){if(!(r-l.width<1||n-l.height<1)){var d=document.createElement("div");d.style.position="absolute";var f=(r-l.width)/2,h=(n-l.height)/2;if(d.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Gs.SHADED_REGION_ELEMENT_ID),r-l.width<11||n-l.height<11)this.hasBorderShaders=!1;else{var b=5,g=40;this.insertShaderBorders(d,g,b,-b,null,0,!0),this.insertShaderBorders(d,g,b,-b,null,0,!1),this.insertShaderBorders(d,g,b,null,-b,0,!0),this.insertShaderBorders(d,g,b,null,-b,0,!1),this.insertShaderBorders(d,b,g+b,-b,null,-b,!0),this.insertShaderBorders(d,b,g+b,null,-b,-b,!0),this.insertShaderBorders(d,b,g+b,-b,null,-b,!1),this.insertShaderBorders(d,b,g+b,null,-b,-b,!1),this.hasBorderShaders=!0}a.append(d)}},t.prototype.insertShaderBorders=function(a,r,n,l,d,f,h){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Gs.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(r,"px"),b.style.height="".concat(n,"px"),l!==null&&(b.style.top="".concat(l,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),h?b.style.left="".concat(f,"px"):b.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),a.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(a){return 1e3/a},t}(),lg="data:image/svg+xml;base64,",k_=lg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",j_=lg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Zb=lg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",E_="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Qb=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),C_=function(){function t(){this.data=Qb.createDefault();var a=localStorage.getItem(t.LOCAL_STORAGE_KEY);a?this.data=JSON.parse(a):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(a){this.data.hasPermission=a,this.flush()},t.prototype.setLastUsedCameraId=function(a){this.data.lastUsedCameraId=a,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=Qb.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),S_=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(a){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Hb.poweredBy();var r=document.createElement("a");r.innerText="ScanApp",r.href="https://scanapp.org",r.target="new",r.style.color="white",this.infoDiv.appendChild(r);var n=document.createElement("br"),l=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(l);var d=document.createElement("a");d.innerText=Hb.reportIssues(),d.href="https://github.com/mebjas/html5-qrcode/issues",d.target="new",d.style.color="white",this.infoDiv.appendChild(d),a.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),A_=function(){function t(a,r){this.isShowingInfoIcon=!0,this.onTapIn=a,this.onTapOut=r,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(a){var r=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Zb,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(n){return r.onHoverIn()},this.infoIcon.onmouseout=function(n){return r.onHoverOut()},this.infoIcon.onclick=function(n){return r.onClick()},a.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=E_,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Zb,this.infoIcon.style.opacity="0.6")},t}(),__=function(){function t(){var a=this;this.infoDiv=new S_,this.infoIcon=new A_(function(){a.infoDiv.show()},function(){a.infoDiv.hide()})}return t.prototype.renderInto=function(a){this.infoDiv.renderInto(a),this.infoIcon.renderInto(a)},t}(),T_=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},D_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Jb=function(){function t(){}return t.hasPermissions=function(){return T_(this,void 0,void 0,function(){var a,r,n,l;return D_(this,function(d){switch(d.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(a=d.sent(),r=0,n=a;r<n.length;r++)if(l=n[r],l.kind==="videoinput"&&l.label)return[2,!0];return[2,!1]}})})},t}(),kl=function(){function t(a){this.supportedScanTypes=this.validateAndReturnScanTypes(a)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var a=0,r=this.supportedScanTypes;a<r.length;a++){var n=r[a];if(t.isCameraScanType(n))return!0}return!1},t.isCameraScanType=function(a){return a===ii.SCAN_TYPE_CAMERA},t.isFileScanType=function(a){return a===ii.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(a){if(!a||a.length===0)return Sn.DEFAULT_SUPPORTED_SCAN_TYPE;var r=Sn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(a.length>r)throw"Max ".concat(r," values expected for ")+"supportedScanTypes";for(var n=0,l=a;n<l.length;n++){var d=l[n];if(!Sn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(d))throw"Unsupported scan type ".concat(d)}return a},t}(),$s=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Di=function(){function t(){}return t.createElement=function(a,r){var n=document.createElement(a);return n.id=r,n.classList.add($s.ALL_ELEMENT_CLASS),a==="button"&&n.setAttribute("type","button"),n},t}(),Cw=function(t,a,r,n){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{g(n.next(w))}catch(k){f(k)}}function b(w){try{g(n.throw(w))}catch(k){f(k)}}function g(w){w.done?d(w.value):l(w.value).then(h,b)}g((n=n.apply(t,a||[])).next())})},Sw=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},n,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(g){return function(w){return b([g,w])}}function b(g){if(n)throw new TypeError("Generator is already executing.");for(;f&&(f=0,g[0]&&(r=0)),r;)try{if(n=1,l&&(d=g[0]&2?l.return:g[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,g[1])).done)return d;switch(l=0,d&&(g=[g[0]&2,d.value]),g[0]){case 0:case 1:d=g;break;case 4:return r.label++,{value:g[1],done:!1};case 5:r.label++,l=g[1],g=[0];continue;case 7:g=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(g[0]===6||g[0]===2)){r=0;continue}if(g[0]===3&&(!d||g[1]>d[0]&&g[1]<d[3])){r.label=g[1];break}if(g[0]===6&&r.label<d[1]){r.label=d[1],d=g;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(g);break}d[2]&&r.ops.pop(),r.trys.pop();continue}g=a.call(t,r)}catch(w){g=[6,w],l=0}finally{n=d=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},e2=function(){function t(a,r,n){this.isTorchOn=!1,this.torchCapability=a,this.buttonController=r,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return Cw(this,void 0,void 0,function(){var a,r;return Sw(this,function(n){switch(n.label){case 0:this.buttonController.disable(),a=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(a)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),a),[3,4];case 3:return r=n.sent(),this.propagateFailure(a,r),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(a,r){a===r?(this.buttonController.setText(r?Tr.torchOffButton():Tr.torchOnButton()),this.isTorchOn=r):this.propagateFailure(r),this.buttonController.enable()},t.prototype.propagateFailure=function(a,r){var n=a?Tr.torchOnFailedMessage():Tr.torchOffFailedMessage();r&&(n+="; Error = "+r),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),R_=function(){function t(a,r){this.onTorchActionFailureCallback=r,this.torchButton=Di.createElement("button",$s.TORCH_BUTTON_ID),this.torchController=new e2(a,this,r)}return t.prototype.render=function(a,r){var n=this;this.torchButton.innerText=Tr.torchOnButton(),this.torchButton.style.display=r.display,this.torchButton.style.marginLeft=r.marginLeft;var l=this;this.torchButton.addEventListener("click",function(d){return Cw(n,void 0,void 0,function(){return Sw(this,function(f){switch(f.label){case 0:return[4,l.torchController.flipState()];case 1:return f.sent(),l.torchController.isTorchEnabled()?(l.torchButton.classList.remove($s.TORCH_BUTTON_CLASS_TORCH_OFF),l.torchButton.classList.add($s.TORCH_BUTTON_CLASS_TORCH_ON)):(l.torchButton.classList.remove($s.TORCH_BUTTON_CLASS_TORCH_ON),l.torchButton.classList.add($s.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),a.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(a){this.torchController=new e2(a,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(a){this.torchButton.innerText=a},t.prototype.reset=function(){this.torchButton.innerText=Tr.torchOnButton(),this.torchController.reset()},t.create=function(a,r,n,l){var d=new t(r,l);return d.render(a,n),d},t}(),M_=function(){function t(a,r,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=r?"block":"none",a.appendChild(this.fileBasedScanRegion);var l=document.createElement("label");l.setAttribute("for",this.getFileScanInputId()),l.style.display="inline-block",this.fileBasedScanRegion.appendChild(l),this.fileSelectionButton=Di.createElement("button",$s.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){l.click()}),l.append(this.fileSelectionButton),this.fileScanInput=Di.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",l.appendChild(this.fileScanInput);var d=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var b=h.target;if(!(b.files&&b.files.length===0)){var g=b.files,w=g[0],k=w.name;d.setImageNameToButton(k),n(w)}}});var f=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(f),this.fileBasedScanRegion.addEventListener("dragenter",function(h){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){d.fileBasedScanRegion.style.border=d.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),d.fileBasedScanRegion.style.border=d.fileBasedScanRegionDefaultBorder();var b=h.dataTransfer;if(b){var g=b.files;if(!g||g.length===0)return;for(var w=!1,k=0;k<g.length;++k){var E=g.item(k);if(E){var S=/image.*/;if(E.type.match(S)){w=!0;var D=E.name;d.setImageNameToButton(D),n(E),f.innerText=Tr.dragAndDropMessage();break}}}w||(f.innerText=Tr.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var a=document.createElement("div");return a.style.textAlign="center",a.style.margin="auto",a.style.width="80%",a.style.maxWidth="600px",a.style.border=this.fileBasedScanRegionDefaultBorder(),a.style.padding="10px",a.style.marginBottom="10px",a},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var a=document.createElement("div");return a.innerText=Tr.dragAndDropMessage(),a.style.fontWeight="400",a},t.prototype.setImageNameToButton=function(a){var r=20;if(a.length>r){var n=a.substring(0,8),l=a.length,d=a.substring(l-8,l);a="".concat(n,"....").concat(d)}var f=Tr.fileSelectionChooseAnother()+" - "+a;this.fileSelectionButton.innerText=f},t.prototype.setInitialValueToButton=function(){var a=Tr.fileSelectionChooseImage()+" - "+Tr.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=a},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(a,r,n){var l=new t(a,r,n);return l},t}(),I_=function(){function t(a){this.selectElement=Di.createElement("select",$s.CAMERA_SELECTION_SELECT_ID),this.cameras=a,this.options=[]}return t.prototype.render=function(a){var r=document.createElement("span");r.style.marginRight="10px";var n=this.cameras.length;if(n===0)throw new Error("No cameras found");if(n===1)r.style.display="none";else{var l=Tr.selectCamera();r.innerText="".concat(l," (").concat(this.cameras.length,")  ")}for(var d=1,f=0,h=this.cameras;f<h.length;f++){var b=h[f],g=b.id,w=b.label==null?g:b.label;(!w||w==="")&&(w=[Tr.anonymousCameraPrefix(),d++].join(" "));var k=document.createElement("option");k.value=g,k.innerText=w,this.options.push(k),this.selectElement.appendChild(k)}r.appendChild(this.selectElement),a.appendChild(r)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(a){for(var r=0,n=this.options;r<n.length;r++){var l=n[r];if(l.value===a)return!0}return!1},t.prototype.setValue=function(a){if(!this.hasValue(a))throw new Error("".concat(a," is not present in the camera list."));this.selectElement.value=a},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(a,r){var n=new t(r);return n.render(a),n},t}(),O_=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Di.createElement("input",$s.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(a,r){this.zoomElementContainer.style.display=r?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",a.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=Tr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var l=this;this.rangeInput.addEventListener("input",function(){return l.onValueChange()}),this.rangeInput.addEventListener("change",function(){return l.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var a=Tr.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(a),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(a,r,n,l){this.rangeInput.min=a.toString(),this.rangeInput.max=r.toString(),this.rangeInput.step=l.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(a){this.onChangeCallback=a},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(a,r){var n=new t;return n.render(a,r),n},t}(),Ys;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ys||(Ys={}));function F_(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function L_(t,a){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:a}}var Aw=function(){function t(a,r,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=a,this.config=this.createConfig(r),this.verbose=n===!0,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.scanTypeSelector=new kl(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new kw(this.verbose),this.persistedDataManager=new C_,r.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(a,r){var n=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(d,f){if(a)a(d,f);else{if(n.lastMatchFound===d)return;n.lastMatchFound=d,n.setHeaderMessage(Tr.lastMatch(d),Ys.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(d,f){r&&r(d,f)};var l=document.getElementById(this.elementId);if(!l)throw"HTML Element with id=".concat(this.elementId," not found");l.innerHTML="",this.createBasicLayout(l),this.html5Qrcode=new Kb(this.getScanRegionId(),L_(this.config,this.verbose))},t.prototype.pause=function(a){(ni(a)||a!==!0)&&(a=!1),this.getHtml5QrcodeOrFail().pause(a)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var a=this,r=function(){var n=document.getElementById(a.elementId);n&&(n.innerHTML="",a.resetBasicLayout(n))};return this.html5Qrcode?new Promise(function(n,l){if(!a.html5Qrcode){n();return}a.html5Qrcode.isScanning?a.html5Qrcode.stop().then(function(d){if(!a.html5Qrcode){n();return}a.html5Qrcode.clear(),r(),n()}).catch(function(d){a.verbose&&a.logger.logError("Unable to stop qrcode scanner",d),l(d)}):(a.html5Qrcode.clear(),r(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(a){return this.getHtml5QrcodeOrFail().applyVideoConstraints(a)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(a){return a?(a.fps||(a.fps=Sn.SCAN_DEFAULT_FPS),a.rememberLastUsedCamera!==!Sn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(a.rememberLastUsedCamera=Sn.DEFAULT_REMEMBER_LAST_CAMERA_USED),a.supportedScanTypes||(a.supportedScanTypes=Sn.DEFAULT_SUPPORTED_SCAN_TYPE),a):{fps:Sn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Sn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Sn.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(a){a.style.position="relative",a.style.padding="0px",a.style.border="1px solid silver",this.createHeader(a);var r=document.createElement("div"),n=this.getScanRegionId();r.id=n,r.style.width="100%",r.style.minHeight="100px",r.style.textAlign="center",a.appendChild(r),kl.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var l=document.createElement("div"),d=this.getDashboardId();l.id=d,l.style.width="100%",a.appendChild(l),this.setupInitialDashboard(l)},t.prototype.resetBasicLayout=function(a){a.style.border="none"},t.prototype.setupInitialDashboard=function(a){this.createSection(a),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(a){var r=document.createElement("div");r.style.textAlign="left",r.style.margin="0px",a.appendChild(r);var n=new __;n.renderInto(r);var l=document.createElement("div");l.id=this.getHeaderMessageContainerId(),l.style.display="none",l.style.textAlign="center",l.style.fontSize="14px",l.style.padding="2px 10px",l.style.margin="4px",l.style.borderTop="1px solid #f6f6f6",r.appendChild(l)},t.prototype.createSection=function(a){var r=document.createElement("div");r.id=this.getDashboardSectionId(),r.style.width="100%",r.style.padding="10px 0px 10px 0px",r.style.textAlign="left",a.appendChild(r)},t.prototype.createCameraListUi=function(a,r,n){var l=this;l.showHideScanTypeSwapLink(!1),l.setHeaderMessage(Tr.cameraPermissionRequesting());var d=function(){n||l.createPermissionButton(a,r)};Kb.getCameras().then(function(f){l.persistedDataManager.setHasPermission(!0),l.showHideScanTypeSwapLink(!0),l.resetHeaderMessage(),f&&f.length>0?(a.removeChild(r),l.renderCameraSelection(f)):(l.setHeaderMessage(Tr.noCameraFound(),Ys.STATUS_WARNING),d())}).catch(function(f){l.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:d(),l.setHeaderMessage(f,Ys.STATUS_WARNING),l.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(a,r){var n=this,l=Di.createElement("button",this.getCameraPermissionButtonId());l.innerText=Tr.cameraPermissionTitle(),l.addEventListener("click",function(){l.disabled=!0,n.createCameraListUi(a,r,l)}),r.appendChild(l)},t.prototype.createPermissionsUi=function(a,r){var n=this;if(kl.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Jb.hasPermissions().then(function(l){l?n.createCameraListUi(a,r):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(a,r))}).catch(function(l){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(a,r)});return}this.createPermissionButton(a,r)},t.prototype.createSectionControlPanel=function(){var a=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");a.appendChild(r);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=kl.isCameraScanType(this.currentScanType)?"block":"none",r.appendChild(n);var l=document.createElement("div");l.style.textAlign="center",n.appendChild(l),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,l),this.renderFileScanUi(r)},t.prototype.renderFileScanUi=function(a){var r=kl.isFileScanType(this.currentScanType),n=this,l=function(d){if(!n.html5Qrcode)throw"html5Qrcode not defined";kl.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(Tr.loadingImage()),n.html5Qrcode.scanFileV2(d,!0).then(function(f){n.resetHeaderMessage(),n.qrCodeSuccessCallback(f.decodedText,f)}).catch(function(f){n.setHeaderMessage(f,Ys.STATUS_WARNING),n.qrCodeErrorCallback(f,Nw.createFrom(f))}))};this.fileSelectionUi=M_.create(a,r,l)},t.prototype.renderCameraSelection=function(a){var r=this,n=this,l=document.getElementById(this.getDashboardSectionCameraScanRegionId());l.style.textAlign="center";var d=O_.create(l,!1),f=function(A){var M=A.zoomFeature();if(M.isSupported()){d.setOnCameraZoomValueChangeCallback(function(F){M.apply(F)});var I=1;r.config.defaultZoomValueIfSupported&&(I=r.config.defaultZoomValueIfSupported),I=e_(I,M.min(),M.max()),d.setValues(M.min(),M.max(),I,M.step()),d.show()}},h=I_.create(l,a),b=document.createElement("span"),g=Di.createElement("button",$s.CAMERA_START_BUTTON_ID);g.innerText=Tr.scanButtonStartScanningText(),b.appendChild(g);var w=Di.createElement("button",$s.CAMERA_STOP_BUTTON_ID);w.innerText=Tr.scanButtonStopScanningText(),w.style.display="none",w.disabled=!0,b.appendChild(w);var k,E=function(A){if(!A.torchFeature().isSupported()){k&&k.hide();return}k?k.updateTorchCapability(A.torchFeature()):k=R_.create(b,A.torchFeature(),{display:"none",marginLeft:"5px"},function(M){n.setHeaderMessage(M,Ys.STATUS_WARNING)}),k.show()};l.appendChild(b);var S=function(A){A||(g.style.display="none"),g.innerText=Tr.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,A&&(g.style.display="inline-block")};if(g.addEventListener("click",function(A){g.innerText=Tr.scanButtonScanningStarting(),h.disable(),g.disabled=!0,g.style.opacity="0.5",r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!1),n.resetHeaderMessage();var M=h.getValue();n.persistedDataManager.setLastUsedCameraId(M),n.html5Qrcode.start(M,F_(n.config),n.qrCodeSuccessCallback,n.qrCodeErrorCallback).then(function(I){w.disabled=!1,w.style.display="inline-block",S(!1);var F=n.html5Qrcode.getRunningTrackCameraCapabilities();r.config.showTorchButtonIfSupported===!0&&E(F),r.config.showZoomSliderIfSupported===!0&&f(F)}).catch(function(I){n.showHideScanTypeSwapLink(!0),h.enable(),S(!0),n.setHeaderMessage(I,Ys.STATUS_WARNING)})}),h.hasSingleItem()&&g.click(),w.addEventListener("click",function(A){if(!n.html5Qrcode)throw"html5Qrcode not defined";w.disabled=!0,n.html5Qrcode.stop().then(function(M){r.scanTypeSelector.hasMoreThanOneScanType()&&n.showHideScanTypeSwapLink(!0),h.enable(),g.disabled=!1,w.style.display="none",g.style.display="inline-block",k&&(k.reset(),k.hide()),d.removeOnCameraZoomValueChangeCallback(),d.hide(),n.insertCameraScanImageToScanRegion()}).catch(function(M){w.disabled=!1,n.setHeaderMessage(M,Ys.STATUS_WARNING)})}),n.persistedDataManager.getLastUsedCameraId()){var D=n.persistedDataManager.getLastUsedCameraId();h.hasValue(D)?(h.setValue(D),g.click()):n.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var a=this,r=Tr.textIfCameraScanSelected(),n=Tr.textIfFileScanSelected(),l=document.getElementById(this.getDashboardSectionId()),d=document.createElement("div");d.style.textAlign="center";var f=Di.createElement("span",this.getDashboardSectionSwapLinkId());f.style.textDecoration="underline",f.style.cursor="pointer",f.innerText=kl.isCameraScanType(this.currentScanType)?r:n,f.addEventListener("click",function(){if(!a.sectionSwapAllowed){a.verbose&&a.logger.logError("Section swap called when not allowed");return}a.resetHeaderMessage(),a.fileSelectionUi.resetValue(),a.sectionSwapAllowed=!1,kl.isCameraScanType(a.currentScanType)?(a.clearScanRegion(),a.getCameraScanRegion().style.display="none",a.fileSelectionUi.show(),f.innerText=n,a.currentScanType=ii.SCAN_TYPE_FILE,a.insertFileScanImageToScanRegion()):(a.clearScanRegion(),a.getCameraScanRegion().style.display="block",a.fileSelectionUi.hide(),f.innerText=r,a.currentScanType=ii.SCAN_TYPE_CAMERA,a.insertCameraScanImageToScanRegion(),a.startCameraScanIfPermissionExistsOnSwap()),a.sectionSwapAllowed=!0}),d.appendChild(f),l.appendChild(d)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var a=this,r=this;if(this.persistedDataManager.hasCameraPermissions()){Jb.hasPermissions().then(function(n){if(n){var l=document.getElementById(r.getCameraPermissionButtonId());if(!l)throw a.logger.logError("Permission button not found, fail;"),"Permission button not found";l.click()}else r.persistedDataManager.setHasPermission(!1)}).catch(function(n){r.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var a=document.getElementById(this.getHeaderMessageContainerId());a.style.display="none"},t.prototype.setHeaderMessage=function(a,r){r||(r=Ys.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=a,n.style.display="block",r){case Ys.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case Ys.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case Ys.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(a){this.scanTypeSelector.hasMoreThanOneScanType()&&(a!==!0&&(a=!1),this.sectionSwapAllowed=a,this.getDashboardSectionSwapLink().style.display=a?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var a=this,r=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){r.innerHTML="<br>",r.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(a.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=k_,this.cameraScanImage.alt=Tr.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var a=this,r=document.getElementById(this.getScanRegionId());if(this.fileScanImage){r.innerHTML="<br>",r.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){r.innerHTML="<br>",r.appendChild(a.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=j_,this.fileScanImage.alt=Tr.fileScanAltText()},t.prototype.clearScanRegion=function(){var a=document.getElementById(this.getScanRegionId());a.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return $s.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return $s.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function _w(){const{bill_id:t}=gn(),[a,r]=C.useState(!1),[n,l]=C.useState(null),[d,f]=C.useState(!1),[h,b]=C.useState(null),[g,w]=C.useState([]),[k,E]=C.useState(!1),[S,D]=C.useState(""),[A,M]=C.useState(null),[I,F]=C.useState(""),T=C.useRef(null),L=hr(),{auth:H}=C.useContext(Or),[U,B]=C.useState("environment"),P=async()=>{try{if(!t)return;const le=await Te.get(`/user-bills/users/${H.user.id}/bills`);if(le.data.success&&Array.isArray(le.data.data)){const X=le.data.data.find(W=>W.id===t);X?b(X):(ne.error("You are not assigned to this bill"),L("/my-bills"))}}catch(le){console.error("Error fetching bill details:",le),ne.error("Error loading bill information")}},z=async()=>{try{const le=await Te.get(`/user-apartments/users/${H.user.id}/apartments`);return le.data.success&&Array.isArray(le.data.data)?(w(le.data.data),le.data.data):[]}catch(le){return console.error("Error fetching user apartments:",le),ne.error("Error loading your assigned apartments"),[]}},Z=async(le,X)=>{try{if(!le)return{access:!1,reason:"Invalid house ID"};const W=await Te.get(`/houses/${le}`);if(!W.data.success||!W.data.data)return{access:!1,reason:"House not found in the system"};const K=W.data.data;let ae=null;if(K.apartment_id)try{const Pe=await Te.get(`/apartments/${K.apartment_id}`);Pe.data.success&&(ae=Pe.data.data)}catch(Pe){console.error("Error fetching apartment:",Pe)}let oe=null;if(K.floor_id)try{const Pe=await Te.get(`/floors/${K.floor_id}`);Pe.data.success&&(oe=Pe.data.data)}catch(Pe){console.error("Error fetching floor:",Pe)}const re={...K,apartment:ae,floor:oe};if(M(re),!X.some(Pe=>Pe.id===K.apartment_id))return{access:!1,reason:`You are not assigned to "${ae?.name||"this apartment"}"`};let ke=!1;try{const Pe=await Te.get(`/bill-assignments/house-details?house_id=${le}&apartment_id=${K.apartment_id}`);Pe.data.success&&(ke=(Array.isArray(Pe.data.data)?Pe.data.data:Pe.data.data?.bills||[]).some(nt=>nt.bill_id===t||nt.id===t))}catch(Pe){console.error("Error checking bill assignments:",Pe);try{const Oe=await Te.get(`/user-bills/users/${H.user.id}/bills`);Oe.data.success&&Array.isArray(Oe.data.data)&&Oe.data.data.find(we=>we.id===t)&&(ke=!0)}catch(Oe){console.error("Alternative check failed:",Oe)}}return ke?h?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${h?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:re,apartmentId:K.apartment_id,floorId:K.floor_id,houseId:K.id}:{access:!1,reason:`This house does not have "${h?.bill_name||"the selected bill"}" assigned`}}catch(W){if(console.error("Error checking house access:",W),W.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const K=W.response?.status;return K===401?{access:!1,reason:"Session expired. Please login again."}:K===403?{access:!1,reason:"Access denied to this resource."}:K===404?{access:!1,reason:"House not found."}:K===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},te=async()=>{if(!I.trim()){ne.error("Please enter a house ID");return}try{f(!0),T.current&&T.current.clear().catch(K=>{console.log("Scanner clear error:",K)}),r(!1);const le=I.trim();l({houseId:le,source:"manual"});const X=await z(),W=await Z(le,X);W.access?(E(!0),ne.success(`Access granted! House ${A?.house_id||le} has ${h?.bill_name} bill.`)):(E(!1),D(W.reason||"Access denied"),ne.error(W.reason||"Access denied"))}catch(le){console.error("Error processing manual input:",le),ne.error(le.message||"Invalid house ID. Please enter a valid house ID.")}finally{f(!1)}},G=le=>{F(le.target.value)},se=le=>{le.key==="Enter"&&te()},ie=()=>{r(!0),l(null),E(!1),D(""),M(null),F(""),T.current&&(T.current.clear().catch(le=>{console.log("Scanner clear error on start:",le)}),T.current=null),setTimeout(()=>{try{const le=document.getElementById("qr-reader");le&&(le.innerHTML=""),T.current=new Aw("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,supportedScanTypes:[ii.SCAN_TYPE_CAMERA],facingMode:U},!1),T.current.render(X=>{q(X)},X=>{console.log("QR Scan error:",X)})}catch(le){console.error("Scanner initialization error:",le),ne.error("Failed to initialize scanner. Please refresh and try again.")}},100)},Y=async()=>{const le=U==="environment"?"user":"environment";if(T.current)try{await T.current.clear()}catch(X){console.log("Error clearing scanner:",X)}B(le),a&&setTimeout(()=>{ie()},500)},q=async le=>{try{f(!0),T.current&&await T.current.clear(),r(!1),F("");const X=le.trim();l({houseId:X,source:"qr"});const W=await z(),K=await Z(X,W);K.access?(E(!0),ne.success(`Access granted! House ${A?.house_id||X} has ${h?.bill_name} bill.`)):(E(!1),D(K.reason||"Access denied"),ne.error(K.reason||"Access denied"))}catch(X){console.error("Error processing QR code:",X),ne.error(X.message||"Invalid QR code. Please scan a valid house QR code."),r(!1)}finally{f(!1)}},ce=async()=>{if(T.current){try{await T.current.clear(),console.log("Scanner cleared on reset")}catch(le){console.log("Scanner clear error on reset:",le)}T.current=null}timerIntervalRef.current&&(clearInterval(timerIntervalRef.current),timerIntervalRef.current=null),r(!1),l(null),E(!1),D(""),M(null),F("")},pe=()=>{L("/my-bills")},me=()=>{if(!A||!n){ne.error("House data not available");return}L(`/calculate-measurable-bill/${t}`,{state:{scannedData:n,billData:h,actualBillId:t,houseData:A,houseId:A.id,source:n.source}})};return C.useEffect(()=>()=>{T.current&&T.current.clear().catch(le=>{console.log("Scanner clear error on unmount:",le)})},[]),C.useEffect(()=>{H?.user?.id&&t&&(P(),z())},[H?.user?.id,t]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(vr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Y,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${U==="environment"?"Front":"Back"} Camera`,children:e.jsx(Qv,{size:16})}),e.jsx("button",{onClick:ce,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(gr,{size:16})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Position QR code within frame ",U==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",h?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Gt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),n&&!d&&!a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:ce,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(kc,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),k?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(hn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",h?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:me,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(xr,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ia,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:S}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",h?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',h?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!n&&!a&&!d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:I,onChange:G,onKeyPress:se,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:te,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(xr,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(X0,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:h?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ie,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(qv,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:pe,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function B_(){const{bill_id:t}=gn(),a=hr(),r=Fn(),{auth:n}=C.useContext(Or),l=r.state?.scannedData||null,d=r.state?.billData||null,f=r.state?.houseData||null,h=r.state?.actualBillId||t,b=r.state?.source||"qr",[g,w]=C.useState(!1),[k,E]=C.useState(null),[S,D]=C.useState([]),[A,M]=C.useState([]),[I,F]=C.useState(null),[T,L]=C.useState(null),[H,U]=C.useState(""),B=C.useMemo(()=>{const Ae=new Date;return Ae.setDate(Ae.getDate()+10),Ae.toISOString().split("T")[0]},[]);C.useEffect(()=>{H||U(B)},[B]);const[P,z]=C.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[Z,te]=C.useState(null),[G,se]=C.useState([]),[ie,Y]=C.useState(!1),[q,ce]=C.useState(!1),pe=Dr.useRef(P.month),me=Dr.useRef(P.year),le=Ae=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ae-1]||"";C.useEffect(()=>{if(!t||!h){ne.error("Bill ID is missing"),a("/my-bills");return}if(!l||!f||!d){ne.error("House data is incomplete. Please go back and try again."),a(`/measurable-bills/${t}`);return}},[t,h,l,f,d,a]);const X=async()=>{try{const Ae=await Te.get(`/billranges/bills/${h}`);let Le=[];if(Array.isArray(Ae.data))Le=Ae.data;else if(Ae.data.data&&Array.isArray(Ae.data.data))Le=Ae.data.data;else if(Ae.data.success&&Ae.data.data)Array.isArray(Ae.data.data)?Le=Ae.data.data:typeof Ae.data.data=="object"&&(Le=Object.values(Ae.data.data));else if(typeof Ae.data=="object"){for(const Ee in Ae.data)if(Array.isArray(Ae.data[Ee])){Le=Ae.data[Ee];break}}if(Le.length>0){const Ee=Le.sort((Je,be)=>parseFloat(Je.fromRange||Je.from_range||Je.from||0)-parseFloat(be.fromRange||be.from_range||be.from||0));D(Ee),Ee.length>0&&F(Ee[0])}else D([]),ne.warning("No bill ranges data available in response")}catch(Ae){console.error("Error loading bill ranges:",Ae),ne.error("Failed to load bill ranges."),D([])}},W=async()=>{try{const Ae=le(P.month),Le=P.month;M([]),L(null);let Ee=null,Je=null;try{Ee=await Te.get("/billprice",{params:{bill_id:h,month:Ae,year:P.year}})}catch(fe){Je=fe;try{Ee=await Te.get("/billprice",{params:{bill_id:h,month:Le,year:P.year}})}catch(at){Je=at;try{Ee=await Te.get(`/billprice/${h}/${Ae}/${P.year}`)}catch(Ce){Je=Ce;try{Ee=await Te.get(`/billprice/${h}/${Le}/${P.year}`)}catch(wt){Je=wt;try{Ee=await Te.get("/api/billprice",{params:{bill_id:h,month:Ae,year:P.year}})}catch(ut){throw Je=ut,new Error("All API attempts failed")}}}}}let be=[];if(Ee.data?.success)Array.isArray(Ee.data.data)?be=Ee.data.data:Ee.data.data&&typeof Ee.data.data=="object"?be=Object.values(Ee.data.data):be=[];else if(Array.isArray(Ee.data))be=Ee.data;else if(Ee.data?.data&&Array.isArray(Ee.data.data))be=Ee.data.data;else if(Ee.data&&typeof Ee.data=="object"){for(const fe in Ee.data)if(Array.isArray(Ee.data[fe])){be=Ee.data[fe];break}}const Be=be.filter(fe=>{const at=fe.month,Ce=fe.year,wt=at===Ae||at===Le.toString(),ut=Ce===P.year||Ce===P.year.toString();return wt&&ut});Be.length>0?(M(Be),I&&K(Be)):be.length>0?(M(be),I&&K(be),ne.success(`Loaded ${be.length} price(s) for ${Ae}`)):(M([]),ne.info(`No prices found for ${Ae} ${P.year}. Please set prices first.`))}catch(Ae){console.error("Error loading bill prices:",Ae),M([]),L(null),ne.error(`Failed to load prices for ${le(P.month)}. Check console.`)}},K=(Ae=A)=>{if(!I||!Ae||Ae.length===0){L(null);return}const Le=Ae.find(Ee=>{const Je=Ee.billrange_id||Ee.range_id||Ee.id,be=I.id||I._id;return Je&&Je.toString()===be.toString()});L(Le||null)},ae=async()=>{let Ae=null;if(Ae=l?.houseId||l?.hse,!Ae||!h){z(Le=>({...Le,previous_reading:"0"}));return}try{Y(!0);const Le=await Te.get("/generate-measurable-bills/previous-reading",{params:{house_id:Ae,bill_id:h}});if(Le.data.success){const Ee=Le.data.data?.current_reading||0;z(Je=>({...Je,previous_reading:Ee.toString()}))}}catch(Le){console.error(" Error loading previous reading:",Le),Le.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),z(Ee=>({...Ee,previous_reading:"0"}))):(ne.error("Could not load previous reading"),z(Ee=>({...Ee,previous_reading:"0"})))}finally{Y(!1)}},oe=async(Ae,Le)=>{const Ee={...P,[Ae]:parseInt(Le)};z(Ee);const Je=Ae==="month"&&Le!==pe.current,be=Ae==="year"&&Le!==me.current;(Je||be)&&(Ae==="month"&&(pe.current=Le),Ae==="year"&&(me.current=Le),M([]),L(null),te(null),se([]),z(Be=>({...Be,[Ae]:parseInt(Le),total_amount:"",used_units:""})),W(),ae())},re=Ae=>{const{name:Le,value:Ee}=Ae.target;if(Le==="month"||Le==="year"){oe(Le,Ee);return}const Je={...P,[Le]:Ee};if(z(Je),Le==="current_reading"){const be=parseFloat(Ee)||0,Be=parseFloat(P.previous_reading)||0,fe=be-Be;if(fe>=0)if(Je.used_units=fe.toString(),Je.total_amount="",fe>0&&S.length>0&&A.length>0){const{totalAmount:at,details:Ce}=Re(fe);Je.total_amount=at.toFixed(2),ke(fe,at,Ce)}else te(null),se([]);else ne.error("Current reading cannot be less than previous reading")}z(Je)},Re=Ae=>{if(!S.length||!A.length)return{totalAmount:0,details:[]};const Le=[...S].sort((Be,fe)=>parseFloat(Be.fromRange||Be.from_range||Be.from||0)-parseFloat(fe.fromRange||fe.from_range||fe.from||0));let Ee=parseFloat(Ae),Je=0;const be=[];for(let Be=0;Be<Le.length&&Ee>0;Be++){const fe=Le[Be],at=A.find(qt=>{const ur=qt.billrange_id||qt.range_id||qt.id,Ut=fe.id||fe._id;return ur&&ur.toString()===Ut.toString()});if(!at){console.warn(`No price found for range ${fe.id}`);continue}const Ce=parseFloat(fe.fromRange||fe.from_range||fe.from||0),wt=fe.toRange?parseFloat(fe.toRange||fe.to_range||fe.to):1/0,ut=parseFloat(at.unitprice||at.uniprice||0),Ct=parseFloat(at.fixedamount||0);let Mt=0;if(wt===1/0)Mt=Ee,Ee=0;else{const qt=wt-Ce+1;Be===0?Ae<=qt?Mt=Ae:Mt=qt:Mt=Math.min(qt,Ee),Ee-=Mt}if(Mt>0){const qt=Mt*ut+Ct;Je+=qt,be.push({range:`${Ce} - ${wt===1/0?"":wt}`,units:Mt,unitPrice:ut,fixedAmount:Ct,rangeAmount:qt,calculation:`${Mt}  ${ut} + ${Ct} = ${qt.toFixed(2)}`})}}return{totalAmount:Je,details:be}},ke=(Ae,Le,Ee)=>{te({used_units:Ae,total_amount:Le,calculated_at:new Date().toISOString()}),se(Ee)},Pe=async()=>{if(!Z){ne.error("Please calculate the bill first");return}const Ae=l?.houseId||l?.hse,Le=f?.apartment_id,Ee=f?.floor_id;if(!Ae||!Le||!Ee){ne.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:Ae,apartmentId:Le,floorId:Ee,source:b,scannedData:l,houseDetails:f});return}try{ce(!0);const Je={house_id:Ae,apartment_id:Le,floor_id:Ee,bill_id:h,year:parseInt(P.year),month:le(parseInt(P.month)),previous_reading:parseFloat(P.previous_reading)||0,current_reading:parseFloat(P.current_reading)||0,used_units:parseFloat(P.used_units)||Z.used_units,totalAmount:parseFloat(P.total_amount)||Z.total_amount,due_date:H||null,source:b},be=await Te.post("/generate-measurable-bills/from-calculation",Je);be.data.success?(ne.success("Bill generated successfully!"),z({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:P.current_reading,current_reading:"",used_units:"",total_amount:""}),te(null),se([]),setTimeout(()=>{a(`/house-bill-meter/${t}`)},2e3)):ne.error(be.data.message||"Failed to generate bill")}catch(Je){console.error("Error generating bill:",Je);let be="Failed to generate bill";Je.response?.data?.message?be=Je.response.data.message:Je.message&&(be=Je.message),ne.error(be)}finally{ce(!1)}},Oe=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];new Date().getFullYear(),C.useEffect(()=>{if(P.used_units&&parseFloat(P.used_units)>0&&S.length>0&&A.length>0){const Ae=parseFloat(P.used_units),{totalAmount:Le,details:Ee}=Re(Ae);z(Je=>({...Je,total_amount:Le.toFixed(2)})),ke(Ae,Le,Ee)}},[S,A]),C.useEffect(()=>{I&&A.length>0&&K()},[I,A]),C.useEffect(()=>{X(),ae(),pe.current=P.month,me.current=P.year},[h,l]),C.useEffect(()=>{h&&P.month&&P.year&&S.length>0&&W()},[h,P.month,P.year,S.length]);const nt=le(P.month);return{houseId:f?.house_id||l?.houseId,apartment:f?.apartment?.name||"N/A",floor:f?.floor?.floor_id||"N/A",houseDatabaseId:f?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(vr,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Vr,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>a(`/house-bill-meter/${t}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",d?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:b==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${b==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:b==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{X(),W(),ae(),ne.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:P.month,onChange:re,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,children:Oe.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:P.year,onChange:re,min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:H,onChange:Ae=>U(Ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:P.previous_reading,onChange:re,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,readOnly:!0}),ie&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-purple-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:P.current_reading,onChange:re,placeholder:"Enter current reading",min:P.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",nt," ",P.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:P.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),P.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(P.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>a(`/measurable-bills/${t}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:Pe,disabled:!Z||q,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function P_(){const[t,a]=C.useState([]),[r,n]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState(!1),[b,g]=C.useState(!1),{auth:w}=C.useContext(Or),k=hr(),E=async()=>{try{n(!0);const F=await Te.get(`/user-bills/users/${w.user.id}/bills`);F.data.success?a(F.data.data||[]):(ne.error("Failed to load bills"),a([]))}catch(F){console.error("Error fetching bills:",F),ne.error("Error loading your bills"),a([])}finally{n(!1)}};C.useEffect(()=>{w?.user?.id&&E()},[w?.user?.id]);const S=t.filter(F=>F.bill_name?.toLowerCase().includes(l.toLowerCase())||F.billtype?.toLowerCase().includes(l.toLowerCase())),D=F=>{try{return new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=F=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(Vu,{size:12,className:"inline mr-1"})}})[F?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(xr,{size:12,className:"inline mr-1"})},M={totalBills:t.length,measurableBills:t.filter(F=>F.billtype?.toLowerCase()==="measurable").length},I=F=>{k(`/house-bill-meter/${F}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>g(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ea,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:M.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ea,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:M.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:l,onChange:F=>d(F.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Gt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):S.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ea,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:S.map(F=>{const T=A(F.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ea,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:F.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.class}`,children:[T.icon,F.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[F.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Vu,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>I(F.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(sb,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",D(F.assigned_at)]})})]},F.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.map(F=>{const T=A(F.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ea,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:F.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.class}`,children:[T.icon,F.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[F.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Vu,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>I(F.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(sb,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",D(F.assigned_at)]})})]},F.id)})})]})}),S.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(js,{size:20})})})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function z_(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),[l,d]=C.useState("manual"),f=hr(),{bill_id:h}=gn(),b=()=>{f("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>n(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${r?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(vr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(Ea,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(Ea,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(_w,{})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function U_(){const[t,a]=C.useState([]),[r,n]=C.useState([]),[l,d]=C.useState(0),[f,h]=C.useState(0),[b,g]=C.useState(!1),[w,k]=C.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[E,S]=C.useState([]),[D,A]=C.useState([]),[M,I]=C.useState([]),[F,T]=C.useState(""),[L,H]=C.useState(""),[U,B]=C.useState(null),[P,z]=C.useState(!1),[Z,te]=C.useState(!1),[G,se]=C.useState(!1),[ie,Y]=C.useState(null),[q,ce]=C.useState(!1),[pe,me]=C.useState(!1),[le,X]=C.useState(!1),[W,K]=C.useState(!1),[ae,oe]=C.useState(0),[re,Re]=C.useState(""),ke=["","January","February","March","April","May","June","July","August","September","October","November","December"],Pe=new Date().getFullYear();Array.from({length:10},($e,jt)=>(Pe-5+jt).toString());const Oe=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];C.useEffect(()=>{nt()},[]);const nt=async()=>{try{z(!0);const $e=await Te.get("/apartments");$e.data.success?S($e.data.data||[]):S([])}catch($e){console.error("Error loading apartments:",$e),ne.error("Failed to load apartments"),S([])}finally{z(!1)}};C.useEffect(()=>{w.apartment_id?we(w.apartment_id):(A([]),I([]),k($e=>({...$e,floor_id:"",house_id:""})))},[w.apartment_id]),C.useEffect(()=>{w.floor_id&&w.apartment_id?Ae(w.floor_id):(I([]),k($e=>({...$e,house_id:""})))},[w.floor_id,w.apartment_id]);const we=async $e=>{try{te(!0);const jt=await Te.get(`/floors?apartment_id=${$e}`);jt.data.success?A(jt.data.data||[]):A([])}catch(jt){console.error("Error loading floors:",jt),ne.error("Failed to load floors"),A([])}finally{te(!1)}},Ae=async $e=>{try{se(!0);const jt=await Te.get(`/houses?floor_id=${$e}&apartment_id=${w.apartment_id}`);jt.data.success?I(jt.data.data||[]):I([])}catch(jt){console.error("Error loading houses:",jt),ne.error("Failed to load houses"),I([])}finally{se(!1)}},Le=async()=>{const $e=(L||"").trim();if(!$e){ne.info("Please enter an internal House PK to lookup");return}try{g(!0);const jt=w.payment_status.split(",");let Nt=[];for(const vt of jt){const st=new URLSearchParams({house_id:$e,year:w.year,payment_status:vt.trim()});w.month&&st.append("month",w.month);const kt=await Te.get(`/bill-payments?${st}`);kt.data&&kt.data.success&&(Nt=[...Nt,...kt.data.data||[]])}a(Nt),Je(Nt);const lt=Nt.filter(vt=>vt.payment_status==="Pending").reduce((vt,st)=>vt+(parseFloat(st.pendingAmount)||0),0),At=Nt.filter(vt=>vt.payment_status==="Partial").reduce((vt,st)=>vt+(parseFloat(st.pendingAmount)||0),0);d(lt),h(At),B({houseNumber:$e,apartmentName:"",floorNumber:"",houseId:$e}),k(vt=>({...vt,house_id:$e})),Nt.length>0?ne.success(`Found ${Nt.length} bill(s) for house PK ${$e}`):ne.info("No bills found for the given house PK")}catch(jt){console.error("House PK lookup failed",jt),ne.error("Failed to lookup bills by house PK")}finally{g(!1)}};C.useEffect(()=>{if(w.house_id){const $e=setTimeout(()=>{Ee(w.house_id)},100);return()=>clearTimeout($e)}},[w.house_id,w.year,w.month,w.payment_status]);const Ee=async $e=>{if(!(!$e||!w.apartment_id||!w.floor_id||!w.year))try{g(!0);const jt=M.find(_t=>_t.id===$e),Nt=E.find(_t=>_t.id===w.apartment_id),lt=D.find(_t=>_t.id===w.floor_id);jt&&Nt&&lt&&B({houseNumber:jt.house_id,apartmentName:Nt.name,floorNumber:lt.floor_id,houseId:jt.id});const At=w.payment_status.split(",");let vt=[];for(const _t of At){const Jr=new URLSearchParams({house_id:$e,apartment_id:w.apartment_id,floor_id:w.floor_id,year:w.year,payment_status:_t.trim()});w.month&&Jr.append("month",w.month);const en=await Te.get(`/bill-payments?${Jr}`);en.data.success&&(vt=[...vt,...en.data.data||[]])}a(vt),Je(vt);const st=vt.filter(_t=>_t.payment_status==="Pending").reduce((_t,Jr)=>_t+(parseFloat(Jr.pendingAmount)||0),0),kt=vt.filter(_t=>_t.payment_status==="Partial").reduce((_t,Jr)=>_t+(parseFloat(Jr.pendingAmount)||0),0);d(st),h(kt),oe(0),Re("");const Os=vt.filter(_t=>_t.payment_status==="Pending").length,Bn=vt.filter(_t=>_t.payment_status==="Partial").length;if(vt.length>0){let _t=`Found ${Os} pending and ${Bn} partial bills for House ${jt?.house_id}`;w.month?_t+=` (${w.month} ${w.year})`:_t+=` (Year: ${w.year})`,ne.success(_t)}else ne.info("No bills found for the selected criteria")}catch(jt){console.error("Error loading bills:",jt),ne.error("Failed to load bills"),a([]),n([]),d(0),h(0)}finally{g(!1)}},Je=($e=t)=>{const jt=w.payment_status.split(","),Nt=$e.filter(lt=>jt.includes(lt.payment_status));n(Nt)},be=$e=>{k(vt=>({...vt,payment_status:$e})),Je();const jt=$e.split(","),Nt=t.filter(vt=>jt.includes(vt.payment_status)),lt=Nt.filter(vt=>vt.payment_status==="Pending").reduce((vt,st)=>vt+(parseFloat(st.pendingAmount)||0),0),At=Nt.filter(vt=>vt.payment_status==="Partial").reduce((vt,st)=>vt+(parseFloat(st.pendingAmount)||0),0);d(lt),h(At)},Be=($e,jt)=>{k(Nt=>{const lt={...Nt,[$e]:jt};return $e==="apartment_id"?(lt.floor_id="",lt.house_id=""):$e==="floor_id"&&(lt.house_id=""),lt})},fe=()=>{k({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),S([]),A([]),I([]),a([]),n([]),d(0),h(0),B(null),oe(0),Re(""),nt()},at=$e=>{Y($e),ce(!0)},Ce=()=>{me(!0)},wt=()=>{const $e=((l+f)*.5).toFixed(2);oe($e),Re(new Date().toISOString().split("T")[0]),X(!0)},ut=()=>{ce(!1),me(!1),X(!1),Y(null)},Ct=$e=>{const jt=t.map(At=>At.id===$e.id?$e:At);a(jt),Je(jt);const Nt=jt.filter(At=>At.payment_status==="Pending").reduce((At,vt)=>At+(parseFloat(vt.pendingAmount)||0),0),lt=jt.filter(At=>At.payment_status==="Partial").reduce((At,vt)=>At+(parseFloat(vt.pendingAmount)||0),0);d(Nt),h(lt),ut(),$e.payment_status==="Paid"&&ne.success("Payment completed successfully!")},Mt=$e=>{const jt=typeof $e=="string"?parseFloat($e):$e;return isNaN(jt)?"0.00":jt.toFixed(2)},qt=async()=>{try{g(!0);const $e=r.map(Nt=>Te.patch(`/bill-payments/${Nt.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(Nt.paidAmount)+parseFloat(Nt.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all($e);const jt=l+f;ne.success(`Successfully paid ${r.length} bills totaling $${jt.toFixed(2)}`),await Ee(w.house_id),me(!1)}catch($e){console.error("Error processing total payment:",$e),ne.error("Failed to process total payment")}finally{g(!1)}},ur=async()=>{try{g(!0);const $e=l+f,jt=parseFloat(ae);if(jt<=0){ne.error("Payment amount must be greater than 0");return}if(jt>$e){ne.error(`Payment amount cannot exceed total amount of $${Mt($e)}`);return}const lt=r.map(At=>{const st=(parseFloat(At.pendingAmount)||0)/$e,kt=jt*st;return{...At,additionalPayment:kt}}).map(At=>{const vt=parseFloat(At.paidAmount)+At.additionalPayment,st=parseFloat(At.pendingAmount)-At.additionalPayment;let kt="Partial";return st<=.01?kt="Paid":vt>0&&(kt="Partial"),Te.patch(`/bill-payments/${At.id}/status`,{payment_status:kt,paidAmount:vt,paid_at:re||new Date().toISOString().split("T")[0]})});await Promise.all(lt),ne.success(`Successfully paid $${Mt(jt)} across ${r.length} bills`),await Ee(w.house_id),X(!1)}catch($e){console.error("Error processing partial payment:",$e),ne.error("Failed to process partial payment")}finally{g(!1)}},Ut=$e=>{switch($e){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Yt=$e=>{switch($e){case"Paid":return e.jsx($a,{size:16,className:"text-green-600"});case"Partial":return e.jsx(Ks,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(Ks,{size:16,className:"text-yellow-600"});default:return null}},It=l+f;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:K}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${W?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ea,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:fe,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:w.year,onChange:$e=>Be("year",$e.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:w.month,onChange:$e=>Be("month",$e.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),ke.slice(1).map($e=>e.jsx("option",{value:$e,children:$e},$e))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:w.apartment_id,onChange:$e=>Be("apartment_id",$e.target.value),disabled:P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),E.map($e=>e.jsx("option",{value:$e.id,children:$e.name},$e.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:w.floor_id,onChange:$e=>Be("floor_id",$e.target.value),disabled:!w.apartment_id||Z,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),D.map($e=>e.jsxs("option",{value:$e.id,children:["Floor ",$e.floor_id]},$e.id))]}),Z&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:w.house_id,onChange:$e=>Be("house_id",$e.target.value),disabled:!w.floor_id||G,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),M.map($e=>e.jsxs("option",{value:$e.id,children:["House ",$e.house_id]},$e.id))]}),G&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or enter House ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:L,onChange:$e=>H($e.target.value),placeholder:"e.g. house-abc123",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:Le,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Lookup"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the internal House ID to fetch all bill payments directly."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Oe.map($e=>e.jsxs("button",{type:"button",onClick:()=>be($e.value),className:`px-3 py-1 text-sm rounded-lg border ${w.payment_status===$e.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${$e.color}`}),$e.label]},$e.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>w.house_id&&Ee(w.house_id),disabled:!w.house_id||!w.year||!w.apartment_id||!w.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx($u,{size:16}),"Load Bills"]})})]}),U&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(Pr,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",U.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[U.apartmentName,"  Floor ",U.floorNumber,w.month?`  ${w.month} ${w.year}`:`  Year: ${w.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",w.payment_status==="Pending,Partial"?"Pending & Partial Bills":w.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Pending Bills"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",Mt(l)]}),e.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:[t.filter($e=>$e.payment_status==="Pending").length," bills"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Partial Bills"})]}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-300 font-bold text-2xl",children:["$",Mt(f)]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[t.filter($e=>$e.payment_status==="Partial").length," bills"]})]})]}),b?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($a,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>be("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:wt,disabled:r.length===0||It<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Xs,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:Ce,disabled:r.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Xs,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map($e=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${Ut($e.payment_status)}`,children:[Yt($e.payment_status),$e.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:$e.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:$e.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[$e.month," ",$e.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",Mt($e.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",Mt($e.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>at($e),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx(Xs,{size:18})})})})]},$e.id))})]})})]})]})]})})]}),q&&e.jsx(vw,{payment:ie,onClose:ut,onUpdate:Ct}),pe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx(Xs,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",r.length," selected bills for House ",U?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",Mt(l)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",Mt(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U?.apartmentName," - House ",U?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:w.month?`${w.month} ${w.year}`:`Year: ${w.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",Mt(It)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>me(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:qt,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${Mt(It)}`})]})]})})}),le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx(Xs,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",r.length," bills for House ",U?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",Mt(It)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U?.apartmentName," - House ",U?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:$e=>{$e.preventDefault(),ur()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Xs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:It,value:ae,onChange:$e=>oe($e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",Mt(It)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",Mt(It-parseFloat(ae||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:re,onChange:$e=>Re($e.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",Mt(ae)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",Mt(It-parseFloat(ae||0))]})]}),parseFloat(ae||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",r.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>X(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!ae||parseFloat(ae)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${Mt(ae)}`})]})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function H_(){const[t,a]=C.useState(""),[r,n]=C.useState(""),[l,d]=C.useState(!1),[f,h]=C.useState(""),b=hr(),g=async w=>{w.preventDefault(),d(!0),h("");try{const k=await Te.post("/houseowner-auth/login",{email:t,password:r});k.data.success&&(localStorage.setItem("houseOwnerToken",k.data.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(k.data.owner)),b("/houseowner/dashboard"))}catch(k){h(k.response?.data?.message||"Login failed")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"House Owner Login"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Access your apartment management portal"})]}),e.jsxs("form",{onSubmit:g,className:"space-y-6",children:[f&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:t,onChange:w=>a(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:r,onChange:w=>n(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx(lo,{to:"/houseowner/forgot-password",className:"text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? Contact your apartment administrator."})})]})})}function Pi({onCollapse:t}){const[a,r]=C.useState(!0),[n,l]=C.useState(!1),[d,f]=C.useState(null),h=[{title:"Dashboard",icon:e.jsx(WE,{size:20}),path:"/houseowner/dashboard",exact:!0},{title:"My House",icon:e.jsx(Pr,{size:20}),path:"/houseowner/houseowner-houseview",exact:!1},{title:"My Bills",icon:e.jsx(Ea,{size:20}),path:"/houseowner/houseowner-billview",exact:!1},{title:"Complaints",icon:e.jsx(Ea,{size:20}),path:"/houseowner/complaints",exact:!1},{title:"Profile",icon:e.jsx(us,{size:20}),path:"/houseowner/houseowner-profile",exact:!1}],b=E=>{f(d===E?null:E)},g=({item:E})=>{const S=E.exact?location.pathname===E.path:location.pathname.startsWith(E.path);return e.jsx("div",{className:"mb-1",children:E.subItems?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(E.title),className:`flex items-center justify-between w-full p-3 rounded-lg transition-colors ${S?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E.icon,e.jsx("span",{className:"font-medium",children:E.title})]}),d===E.title?e.jsx(jc,{size:16}):e.jsx(Dl,{size:16})]}),d===E.title&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:E.subItems.map((D,A)=>e.jsx(vm,{to:D.path,className:({isActive:M})=>`block p-2 rounded-lg transition-colors ${M?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>l(!1),children:e.jsx("span",{className:"text-sm",children:D.title})},A))})]}):e.jsxs(vm,{to:E.path,className:({isActive:D})=>`flex items-center gap-3 p-3 rounded-lg transition-colors ${D?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>l(!1),children:[E.icon,e.jsx("span",{className:"font-medium",children:E.title})]})})},w=()=>e.jsx("button",{onClick:()=>l(!n),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white text-gray-800 dark:bg-gray-800  dark:text-gray-300 rounded-lg shadow-lg",children:n?e.jsx(gr,{size:24}):e.jsx(Dc,{size:24})}),k=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(Pr,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"AptSync"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"House Owner Portal"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:h.map((E,S)=>e.jsx(g,{item:E},S))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),n&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>l(!1)}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 ${n?"translate-x-0":"-translate-x-full"}`,children:e.jsx(k,{})}),e.jsx("aside",{className:`hidden lg:flex flex-col w-64 bg-white dark:bg-gray-900 border-r dark:border-gray-800 transition-all duration-300 fixed left-0 top-0 h-full z-30 ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(k,{})})]})}function zi(){const[t,a]=C.useState(!1),{auth:r,logout:n,resetActivityTimer:l}=C.useContext(Or),d=hr(),[f,h]=C.useState(!1);C.useEffect(()=>{const E=localStorage.getItem("theme"),S=window.matchMedia("(prefers-color-scheme: dark)").matches;E==="dark"||!E&&S?(a(!0),document.documentElement.classList.add("dark")):(a(!1),document.documentElement.classList.remove("dark"))},[]),C.useEffect(()=>{if(!r.accessToken)return;const E=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],S=()=>l();E.forEach(A=>window.addEventListener(A,S,{passive:!0}));const D=()=>{document.hidden||l()};return document.addEventListener("visibilitychange",D),()=>{E.forEach(A=>window.removeEventListener(A,S)),document.removeEventListener("visibilitychange",D)}},[r.accessToken,l]);const b=async()=>{try{await Te.post("/auth/logout"),n(),ne.success("Logged out successfully"),d("/")}catch(E){console.error("Logout error:",E),n(),ne.success("Logged out successfully"),d("/")}finally{h(!1)}},g=()=>{h(!0)},w=()=>{h(!1)},k=()=>{const E=!t;a(E),E?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:k,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:t?"Switch to light mode":"Switch to dark mode",children:t?e.jsx(Rm,{size:20}):e.jsx(Dm,{size:20})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate max-w-[120px]",children:r?.user?.name||"House Owner"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[120px]",children:r?.user?.email||"user@example.com"})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:g,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Tm,{size:20})})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out from the House Owner Portal?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function V_(){const[t,a]=C.useState(!1),[r,n]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState({total:0,pending:0,resolved:0}),[b,g]=C.useState([]),[w,k]=C.useState([]),[E,S]=C.useState(!1),{auth:D}=C.useContext(Or);C.useEffect(()=>{const T=()=>{S(window.innerWidth<1024)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),C.useEffect(()=>{A()},[D.accessToken]);const A=async()=>{try{n(!0),d(""),await M(),k([{id:1,message:"Maintenance scheduled for tomorrow",time:"2 hours ago",type:"info"},{id:2,message:"New community notice posted",time:"1 day ago",type:"info"}])}catch(T){console.error("Failed to fetch dashboard data:",T),d("Failed to load dashboard data")}finally{n(!1)}},M=async()=>{try{if(D.accessToken){const T=await Te.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${D.accessToken}`}});if(T.data.success)if(T.data.statistics)h({total:T.data.statistics.total||0,pending:T.data.statistics.pending||0,resolved:T.data.statistics.resolved||0});else{const L=T.data.data||[],H=L.length,U=L.filter(P=>P.status==="Pending").length,B=L.filter(P=>P.status==="Resolved"||P.status==="Closed").length;h({total:H,pending:U,resolved:B})}}}catch(T){console.error("Failed to fetch complaint stats:",T)}},I=()=>{window.location.href="/complaints"},F=()=>{window.location.href="/complaints"};return r?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Pi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?E?"ml-0":"ml-20":E?"ml-0":"ml-64"}`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Pi,{onCollapse:a}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${t?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pr,{size:E?32:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:`${E?"text-xl":"text-2xl"} font-bold text-gray-800 dark:text-white`,children:"House Owner Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",D.user?.name||"House Owner","!"]})]})]}),e.jsxs("button",{onClick:F,className:"hidden md:flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(La,{size:20}),e.jsx("span",{children:"New Complaint"})]})]}),l&&e.jsx("div",{className:"mb-4 md:mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ia,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l}),e.jsx("button",{onClick:A,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Complaints"}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(xr,{size:E?18:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:f.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"All time complaints"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Pending"}),e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Ks,{size:E?18:24,className:"text-yellow-600 dark:text-yellow-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-yellow-600 dark:text-yellow-400`,children:f.pending}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Awaiting resolution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Resolved"}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx($a,{size:E?18:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-green-600 dark:text-green-400`,children:f.resolved}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Issues fixed"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Notifications"}),e.jsx("div",{className:"p-2 md:p-3 bg-blue-100 dark:bg-blue-900/30 rounded-full",children:e.jsx(Lh,{size:E?18:24,className:"text-blue-600 dark:text-blue-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:w.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Unread notifications"})]})]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("button",{onClick:F,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500",children:[e.jsx(La,{className:"mx-auto text-purple-600 dark:text-purple-400 mb-2",size:E?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"New Complaint"})]}),e.jsxs("button",{onClick:I,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500",children:[e.jsx(xr,{className:"mx-auto text-blue-600 dark:text-blue-400 mb-2",size:E?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"View Complaints"})]}),e.jsxs("button",{onClick:()=>window.location.href="/profile",className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-green-400 dark:hover:border-green-500",children:[e.jsx(us,{className:"mx-auto text-green-600 dark:text-green-400 mb-2",size:E?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"Profile"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200 mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Complaints Overview"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-purple-50 to-white dark:from-purple-900/20 dark:to-gray-800 border border-purple-100 dark:border-purple-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-purple-100 dark:bg-purple-900/40 rounded-full mb-3",children:e.jsx(xr,{size:24,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:f.total}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total Complaints"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-yellow-50 to-white dark:from-yellow-900/20 dark:to-gray-800 border border-yellow-100 dark:border-yellow-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-yellow-100 dark:bg-yellow-900/40 rounded-full mb-3",children:e.jsx(Ks,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:f.pending}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pending"})]}),e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-white dark:from-green-900/20 dark:to-gray-800 border border-green-100 dark:border-green-800 rounded-lg",children:[e.jsx("div",{className:"inline-block p-3 bg-green-100 dark:bg-green-900/40 rounded-full mb-3",children:e.jsx($a,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-1",children:f.resolved}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Resolved"})]})]})]}),e.jsxs("div",{className:"mt-6 md:mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 md:mb-6",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Recent Notifications"}),e.jsx("button",{className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300",children:"View all"})]}),w.length>0?e.jsx("div",{className:"space-y-3",children:w.map(T=>e.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:`p-2 rounded-full mr-3 flex-shrink-0 ${T.type==="warning"?"bg-yellow-100 dark:bg-yellow-900/30":"bg-blue-100 dark:bg-blue-900/30"}`,children:T.type==="warning"?e.jsx(ia,{size:E?14:16,className:"text-yellow-600 dark:text-yellow-400"}):e.jsx(Lh,{size:E?14:16,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",children:T.message}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.time})]})]})},T.id))}):e.jsxs("div",{className:"text-center py-6 md:py-8",children:[e.jsx(Lh,{size:E?36:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-3 md:mb-4"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No notifications yet"}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500 mt-1",children:"Notifications will appear here"})]})]}),E&&e.jsx("div",{className:"h-16"})]})})]})]})}function G_(){const[t]=ld(),a=hr(),[r,n]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState(""),[b,g]=C.useState(!1),[w,k]=C.useState(""),[E,S]=C.useState(""),[D,A]=C.useState(""),[M,I]=C.useState(""),[F,T]=C.useState(""),[L,H]=C.useState(!1),[U,B]=C.useState(!1);C.useEffect(()=>{const G=t.get("token"),se=t.get("id");G&&se?(I(G),A(se),P(G,se)):(h("Invalid verification link"),n(!1))},[]);const P=async(G,se)=>{try{const ie=await Te.post("/houseowner-auth/verify",{token:G,id:se});ie.data.success&&(d(ie.data.message),ie.data.requires_password?g(!0):setTimeout(()=>{a("/login")},2e3))}catch(ie){h(ie.response?.data?.message||"Verification failed")}finally{n(!1)}},z=async()=>{if(T(""),w.length<6){T("Password must be at least 6 characters");return}if(w!==E){T("Passwords do not match");return}const G=/[A-Z]/.test(w),se=/[a-z]/.test(w),ie=/\d/.test(w),Y=/[!@#$%^&*(),.?":{}|<>]/.test(w);if(!G||!se||!ie||!Y){T("Password must contain uppercase, lowercase, numbers, and special characters");return}try{n(!0);const q=await Te.post("/houseowner-auth/setup-password",{token:M,id:D,password:w});q.data.success&&(d(q.data.message),g(!1),setTimeout(()=>{a("/login")},3e3))}catch(q){T(q.response?.data?.message||"Failed to set password")}finally{n(!1)}},Z=G=>{k(G.target.value),F&&T("")},te=G=>{S(G.target.value),F&&T("")};return r&&!b?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying your email..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-md w-full p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:f?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f}),e.jsx("button",{onClick:()=>a("/"),className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Homepage"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:b?"Set Your Password":"Email Verified Successfully!"}),l&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l}),b?e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:L?"text":"password",placeholder:"Enter password",value:w,onChange:Z,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>H(!L),className:"passwordToggle bottom-0","aria-label":L?"Hide password":"Show password",children:L?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"Must be at least 6 characters with uppercase, lowercase, numbers, and special characters"})]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:U?"text":"password",placeholder:"Confirm password",value:E,onChange:te,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>B(!U),className:"passwordToggle","aria-label":U?"Hide password":"Show password",children:U?e.jsx(In,{size:20}):e.jsx(Qs,{size:20})})]}),F&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:F})}),e.jsx("button",{onClick:z,disabled:r,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Setting Password..."]}):"Set Password"})]})}):e.jsx("button",{onClick:()=>a("/login"),className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Login"})]})})})}function Y_(){const[t,a]=C.useState({}),[r,n]=C.useState({}),[l,d]=C.useState([]),[f,h]=C.useState(null),[b,g]=C.useState(null),[w,k]=C.useState([]),[E,S]=C.useState(!0),[D,A]=C.useState(null),[M,I]=C.useState(!1),{auth:F}=C.useContext(Or),T=async()=>{try{if(S(!0),A(null),F.accessToken){const P=await Te.get("/houses/owner/me",{headers:{Authorization:`Bearer ${F.accessToken}`,"Content-Type":"application/json"}});if(P.data.success){const z=P.data.data||[];d(z);const Z={},te={},G={};z.forEach(se=>{se.apartment_id&&(Z[se.apartment_id]={id:se.apartment_id,name:se.apartment_name,address:se.apartment_address,city:se.apartment_city}),se.floor_id&&(te[se.floor_id]={id:se.floor_id,floor_id:se.floor_id,floor_number:se.floor_number}),se.housetype_id&&(G[se.housetype_id]={id:se.housetype_id,name:se.house_type_name,sqrfeet:se.house_type_sqrfeet,rooms:se.house_type_rooms,bathrooms:se.house_type_bathrooms})}),a(Z),n(te),k(Object.values(G)),z.length>0?h(z[0]):h(null)}else A(P.data.message||"Failed to fetch houses")}else A("No authentication token found. Please log in.")}catch(P){console.error("Failed to fetch house data:",P),ne.error("Failed to fetch house data"),P.response?(console.error("Error response:",P.response.data),console.error("Error status:",P.response.status),P.response.status===401?A("Session expired. Please log in again."):P.response.status===403?A("Access denied. You are not authorized as a house owner."):P.response.status===404?A("No houses found for your account."):A(P.response.data?.message||"Failed to load house data")):P.request?A("Network error. Please check your internet connection."):A("An unexpected error occurred.")}finally{S(!1)}};C.useEffect(()=>{T()},[F.accessToken]);const L=P=>{if(!P)return"N/A";const z=w.find(te=>te.id===P);return z?z.name:l.find(te=>te.housetype_id===P)?.house_type_name||"N/A"},H=P=>{if(!P)return"N/A";const z=t[P];return z?z.name:l.find(te=>te.apartment_id===P)?.apartment_name||"N/A"},U=P=>{if(!P)return"N/A";const z=r[P];return z&&z.floor_number?z.floor_number:l.find(te=>te.floor_id===P)?.floor_number||"N/A"},B=P=>{h(P)};return E?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:I}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${M?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your house details..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:I}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${M?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6",children:[e.jsx(Pr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Houses"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your properties"})]})]}),D&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ia,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:D})]})}),l.length>1&&e.jsxs("div",{className:"mb-4 md:mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-3",children:"Select a House"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((P,z)=>e.jsxs("button",{onClick:()=>B(P),className:`px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base rounded-lg transition-colors ${f?.id===P.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",z+1,": ",P.house_id]},P.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"House Information"}),e.jsx("span",{className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${f.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":f.status==="available"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:f.status?.charAt(0).toUpperCase()+f.status?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Number"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Pr,{className:"text-purple-600 dark:text-purple-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_id||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ia,{className:"text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_type_name||L(f.housetype_id)})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Floor"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nf,{className:"text-green-600 dark:text-green-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white",children:f.floor_number||U(f.floor_id)})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Apartment Complex"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment Name"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white break-words",children:f.apartment_name||H(f.apartment_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200 break-words",children:f.apartment_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"City"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.apartment_city||"N/A"})]})]}),f.house_type_name&&e.jsxs("div",{className:"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"House Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Square Feet"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:[f.house_type_sqrfeet||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_rooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Bathrooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_bathrooms||"N/A"})]})]})]})]})]}),l.length===0&&!D&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(Pr,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function X_(){const[t,a]=C.useState({}),[r,n]=C.useState({}),[l,d]=C.useState([]),[f,h]=C.useState(null),[b,g]=C.useState([]),[w,k]=C.useState([]),[E,S]=C.useState([]),[D,A]=C.useState(!0),[M,I]=C.useState(!1),[F,T]=C.useState(null),[L,H]=C.useState(!1),[U,B]=C.useState({totalBills:0,totalPaid:0,totalPending:0,totalAmount:0}),[P,z]=C.useState({status:"all",month:"all",year:new Date().getFullYear(),house_id:"all"}),{auth:Z}=C.useContext(Or),te=async()=>{try{if(A(!0),T(null),Z.accessToken){const X=await Te.get("/houses/owner/me",{headers:{Authorization:`Bearer ${Z.accessToken}`,"Content-Type":"application/json"}});if(X.data.success){const W=X.data.data||[];d(W);const K={},ae={},oe={};W.forEach(re=>{re.apartment_id&&(K[re.apartment_id]={id:re.apartment_id,name:re.apartment_name,address:re.apartment_address,city:re.apartment_city}),re.floor_id&&(ae[re.floor_id]={id:re.floor_id,floor_id:re.floor_id,floor_number:re.floor_number}),re.housetype_id&&(oe[re.housetype_id]={id:re.housetype_id,name:re.house_type_name,sqrfeet:re.house_type_sqrfeet,rooms:re.house_type_rooms,bathrooms:re.house_type_bathrooms})}),a(K),n(ae),g(Object.values(oe)),W.length>0?(h(W[0]),G()):h(null)}else T(X.data.message||"Failed to fetch houses")}else T("No authentication token found. Please log in.")}catch(X){console.error("Failed to fetch house data:",X),X.response?.status===401?T("Session expired. Please log in again."):X.response?.status===403?T("Access denied. Please contact administrator."):X.response?.status===404?T("No houses found for your account."):X.request?T("Network error. Please check your internet connection."):T("An unexpected error occurred.")}finally{A(!1)}},G=async()=>{try{I(!0),T(null);const X={},W=await Te.get("/bill-payments/house-owner/me",{headers:{Authorization:`Bearer ${Z.accessToken}`,"Content-Type":"application/json"},params:X});if(W.data.success){const K=W.data.data||[],ae=W.data.houses||l;k(K),S(K),W.data.houses&&d(ae),W.data.summary&&B(W.data.summary),ae.length>0&&!f&&h(ae[0])}else console.error("[Frontend] API error:",W.data.message),T(W.data.message||"Failed to fetch bills"),k([]),S([])}catch(X){console.error("[Frontend] Failed to fetch bill payments:",X);try{const W=await Te.get("/bill-payments/debug/database-state",{headers:{Authorization:`Bearer ${Z.accessToken}`,"Content-Type":"application/json"}})}catch(W){console.error(" [Frontend] Debug endpoint failed:",W)}X.response?(console.error("[Frontend] Error response:",{status:X.response.status,data:X.response.data,headers:X.response.headers}),X.response.status===401?T("Session expired. Please log in again."):X.response.status===403?T("Access denied. Please contact administrator."):X.response.status===404?(T("No bill payments found for your account."),k([]),S([])):X.response.data?.message?T(X.response.data.message):T(`Server error: ${X.response.status}`)):X.request?(console.error("[Frontend] No response received:",X.request),T("Network error. Please check your internet connection.")):(console.error("[Frontend] Request setup error:",X.message),T("An unexpected error occurred: "+X.message))}finally{I(!1)}};C.useEffect(()=>{te()},[Z.accessToken]),C.useEffect(()=>{f&&G()},[f,P]),C.useEffect(()=>{if(!w.length){S([]);return}let X=[...w];P.status!=="all"&&(X=X.filter(W=>W.payment_status===P.status)),P.month!=="all"&&(X=X.filter(W=>W.month===P.month)),P.year!=="all"&&(X=X.filter(W=>W.year.toString()===P.year.toString())),P.house_id!=="all"&&(X=X.filter(W=>W.house_id===P.house_id)),S(X)},[w,P]);const se=X=>{h(X),z({status:"all",month:"all",year:"all",house_id:X.id})},ie=(X,W)=>{z(K=>({...K,[X]:W}))},Y=()=>{z({status:"all",month:"all",year:"all",house_id:f?.id||"all"})},q=X=>{switch(X){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},ce=X=>{switch(X){case"Paid":return e.jsx($a,{size:16,className:"text-green-600 dark:text-green-400"});case"Partial":return e.jsx(Xs,{size:16,className:"text-blue-600 dark:text-blue-400"});case"Pending":return e.jsx(Ks,{size:16,className:"text-yellow-600 dark:text-yellow-400"});default:return e.jsx(Ks,{size:16,className:"text-gray-600 dark:text-gray-400"})}},pe=["January","February","March","April","May","June","July","August","September","October","November","December"];[...new Set(w.map(X=>X.year))].filter(Boolean).sort((X,W)=>W-X);const le=(()=>{const X=E.length,W=E.reduce((oe,re)=>oe+(parseFloat(re.totalAmount)||0),0),K=E.reduce((oe,re)=>oe+(parseFloat(re.paidAmount)||0),0),ae=E.reduce((oe,re)=>oe+(parseFloat(re.pendingAmount)||0),0);return{totalBills:X,totalAmount:W,paidAmount:K,pendingAmount:ae}})();return D?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:H}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${L?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:H}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${L?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ea,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Bills"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your bills"})]})]})}),F&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ia,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:F})]})}),l.length>1&&e.jsxs("div",{className:"lg:hidden mb-4 bg-white dark:bg-gray-800 rounded-lg shadow p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-white mb-2",children:"Select House to View Bills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((X,W)=>e.jsxs("button",{onClick:()=>se(X),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${f?.id===X.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",X.house_id||W+1]},X.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Current House Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ia,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.apartment_name}),e.jsx(Pr,{size:18,className:"text-gray-500 dark:text-gray-400 ml-2"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["House ",f.house_id,", Floor ",f.floor_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:le.totalBills})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ea,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:["$",le.totalAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Xs,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:["$",le.paidAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx($a,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:["$",le.pendingAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ks,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Bills"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wf,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[E.length," of ",w.length," bills"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Payment Status"}),e.jsxs("select",{value:P.status,onChange:X=>ie("status",X.target.value),className:"w-full px-3 text-gray-600 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Month"}),e.jsxs("select",{value:P.month,onChange:X=>ie("month",X.target.value),className:"w-full px-3 py-2 text-gray-600 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Months"}),pe.map(X=>e.jsx("option",{value:X,children:X},X))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Year"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:P.year,onChange:X=>ie("year",X.target.value),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:Y,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:M?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ea,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:w.length===0?"No bills have been generated for your houses yet.":"No bills match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map((X,W)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:X.bill_name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Type: ",X.billtype]}),X.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:X.description})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[X.month," ",X.year]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",X.due_date?new Date(X.due_date).toLocaleDateString():"Not set"]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Total: $",(parseFloat(X.totalAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",(parseFloat(X.paidAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",(parseFloat(X.pendingAmount)||0).toFixed(2)]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[ce(X.payment_status),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${q(X.payment_status)}`,children:X.payment_status})]})})]},X.id||W))})]})})})]}),l.length===0&&!F&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(Pr,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function q_(){const[t,a]=C.useState([]),[r,n]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(!1),[b,g]=C.useState(!1),[w,k]=C.useState(null),[E,S]=C.useState([]),[D,A]=C.useState({title:"",description:"",category_id:"",apartment_id:"",floor_id:"",house_id:""}),[M,I]=C.useState({}),[F,T]=C.useState({status:"all"}),[L,H]=C.useState({total:0,pending:0,resolved:0}),{auth:U}=C.useContext(Or),[B,P]=C.useState(!1),[z,Z]=C.useState(null),[te,G]=C.useState(!1),[se,ie]=C.useState({rating:0,feedback:""}),[Y,q]=C.useState(""),[ce,pe]=C.useState(!1),[me,le]=C.useState(null),X=async()=>{try{const Ae=await Te.get("/categories",{headers:{Authorization:`Bearer ${U.accessToken}`}});Ae.data.success&&S(Ae.data.data||[]);const Le=await Te.get("/houses/owner/me",{headers:{Authorization:`Bearer ${U.accessToken}`}});if(Le.data.success&&Le.data.data.length>0){const Ee=Le.data.data[0];Z(Ee),A(Je=>({...Je,apartment_id:Ee.apartment_id,floor_id:Ee.floor_id,house_id:Ee.id}))}else ne.warning("No house information found. Please contact your apartment administrator.")}catch(Ae){console.error("Failed to fetch house owner info:",Ae),ne.error("Failed to load your information. Please try again.")}},W=async()=>{try{d(!0);const Ae=await Te.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${U.accessToken}`},params:F});Ae.data.success&&(a(Ae.data.data||[]),n(Ae.data.data||[]),H(Ae.data.statistics||{total:0,pending:0,resolved:0}))}catch(Ae){console.error("Failed to fetch complaints:",Ae),ne.error("Failed to load complaints. Please try again.")}finally{d(!1)}};C.useEffect(()=>{U.accessToken&&(X(),W())},[U.accessToken,F]),C.useEffect(()=>{if(!t.length){n([]);return}let Ae=[...t];F.status!=="all"&&(Ae=Ae.filter(Le=>Le.status===F.status)),n(Ae)},[t,F]);const K=async Ae=>{Ae.preventDefault();const Le={};if(D.title.trim()||(Le.title="Title is required"),D.description.trim()||(Le.description="Description is required"),D.category_id||(Le.category_id="Please select a category"),Object.keys(Le).length>0){I(Le);return}if(!D.house_id){ne.error("No house information found. Please contact your apartment administrator.");return}try{(await Te.post("/complaints",{title:D.title,description:D.description,category_id:D.category_id,apartment_id:D.apartment_id,floor_id:D.floor_id,house_id:D.house_id},{headers:{Authorization:`Bearer ${U.accessToken}`,"Content-Type":"application/json"}})).data.success&&(ne.success("Complaint filed successfully!"),h(!1),ae(),W())}catch(Ee){ne.error("Failed to create complaint");const Je=Ee.response?.data?.message||"Failed to create complaint";ne.error(Je)}},ae=()=>{A({title:"",description:"",category_id:"",apartment_id:z?.apartment_id||"",floor_id:z?.floor_id||"",house_id:z?.id||""}),I({})},oe=Ae=>{switch(Ae){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},re=Ae=>{switch(Ae){case"Pending":return e.jsx(Ks,{className:"text-yellow-600 dark:text-yellow-400 mr-2",size:16});case"In Progress":return e.jsx(Zu,{className:"text-blue-600 dark:text-blue-400 mr-2",size:16});case"Resolved":return e.jsx($a,{className:"text-green-600 dark:text-green-400 mr-2",size:16});case"Closed":return e.jsx(po,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16});case"Rejected":return e.jsx(IC,{className:"text-red-600 dark:text-red-400 mr-2",size:16});default:return e.jsx(xr,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16})}},Re=async Ae=>{if(k(Ae),g(!0),Ae.status==="Closed")try{const Le=await Te.get(`/complaints/${Ae.id}/rating-status`,{headers:{Authorization:`Bearer ${U.accessToken}`}});Le.data.success&&Le.data.canRate&&(le(Ae),pe(!0))}catch(Le){console.error("Error checking rating status:",Le)}},ke=async Ae=>{try{const Le=await Te.post(`/complaints/${Ae}/close`,{},{headers:{Authorization:`Bearer ${U.accessToken}`}});Le.data.success&&(ne.success("Complaint closed successfully!"),Le.data.requiresRating&&(le(w),G(!0)),W(),g(!1))}catch(Le){console.error("Failed to close complaint:",Le),ne.error(Le.response?.data?.message||"Failed to close complaint")}},Pe=async Ae=>{try{(await Te.post(`/complaints/${Ae}/reopen`,{},{headers:{Authorization:`Bearer ${U.accessToken}`}})).data.success&&(ne.success("Complaint reopened successfully!"),W(),g(!1))}catch(Le){console.error("Failed to reopen complaint:",Le),ne.error(Le.response?.data?.message||"Failed to reopen complaint")}},Oe=async Ae=>{if(Ae.preventDefault(),!se.rating){q("Please select a rating");return}try{(await Te.post(`/ratings/complaints/${me.id}/rate`,{rating:se.rating,feedback:se.feedback},{headers:{Authorization:`Bearer ${U.accessToken}`}})).data.success&&(ne.success("Thank you for your feedback!"),G(!1),pe(!1),ie({rating:0,feedback:""}),q(""),W())}catch(Le){console.error("Failed to submit rating:",Le),ne.error(Le.response?.data?.message||"Failed to submit rating")}},nt=Ae=>{const Le=E.find(Ee=>Ee.id===Ae);return Le?Le.color:"gray"},we=Ae=>new Date(Ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l&&!t.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:P}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${B?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Pi,{onCollapse:P}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${B?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(zi,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ia,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Report and track maintenance issues"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z,children:[e.jsx(La,{size:20}),e.jsx("span",{children:"File New Complaint"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:L.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:L.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ks,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:L.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx($a,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wf,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.length," of ",t.length," complaints"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:F.status,onChange:Ae=>T(Le=>({...Le,status:Ae.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ia,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t.length===0?"You haven't filed any complaints yet.":"No complaints match your filter criteria."}),t.length===0&&e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z,children:"File Your First Complaint"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(Ae=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:Ae.complaint_number}),Ae.category_name&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${nt(Ae.category_id)}20`,color:nt(Ae.category_id)},children:Ae.category_name})]}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-2",children:Ae.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:Ae.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[e.jsx(Ia,{size:12,className:"mr-1"}),Ae.apartment_name,"  Floor ",Ae.floor_number,"  House ",Ae.house_number]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[re(Ae.status),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${oe(Ae.status)}`,children:Ae.status})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:we(Ae.created_at)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Re(Ae),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Details",children:e.jsx(xr,{size:16})})})})]},Ae.id))})]})})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"File New Complaint"}),e.jsx("button",{onClick:()=>{h(!1),ae()},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),z?e.jsxs("form",{onSubmit:K,children:[e.jsx("div",{className:"mb-6"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Category *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:D.category_id,onChange:Ae=>{A(Le=>({...Le,category_id:Ae.target.value})),M.category_id&&I(Le=>({...Le,category_id:""}))},className:"w-full px-3 py-2 pl-10 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white appearance-none",children:[e.jsx("option",{value:"",children:"Select a category"}),E.map(Ae=>e.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]}),e.jsx(ew,{className:"absolute left-3 top-2.5 text-gray-400",size:16})]}),M.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:M.category_id}),E.length===0&&e.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"No categories available. Please contact your administrator."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Title *"}),e.jsx("input",{type:"text",value:D.title,onChange:Ae=>{A(Le=>({...Le,title:Ae.target.value})),M.title&&I(Le=>({...Le,title:""}))},className:"w-full px-3 py-2 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief description of the issue"}),M.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:M.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Detailed Description *"}),e.jsx("textarea",{value:D.description,onChange:Ae=>{A(Le=>({...Le,description:Ae.target.value})),M.description&&I(Le=>({...Le,description:""}))},rows:4,className:"w-full px-3 py-2 border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed information about the issue..."}),M.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:M.description}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Be specific about the issue. Include details like location, severity, and any photos if possible."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),ae()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Complaint"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Pr,{className:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:40}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No House Information Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please contact your apartment administrator to assign a house to your account."}),e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})]})})}),b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Complaint Details"}),e.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:w.complaint_number}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${oe(w.status)}`,children:w.status}),w.category_name&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${nt(w.category_id)}20`,color:nt(w.category_id)},children:w.category_name})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-3",children:w.title})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Filed:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:we(w.created_at)})]}),w.assigned_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Assigned:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:we(w.assigned_at)})]}),w.resolved_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:we(w.resolved_at)})]}),w.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:we(w.updated_at)})]})]})})]})}),w.assigned_to_name&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx(On,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:w.assigned_to_name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:w.assigned_to_role}),w.assignment_notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 italic border-l-2 border-blue-500 pl-2",children:["Note: ",w.assignment_notes]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Description"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:w.description})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Update Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.status==="Resolved"&&e.jsx("button",{onClick:()=>ke(w.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Verified & Close"}),w.status==="Resolved"&&e.jsx("button",{onClick:()=>Pe(w.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"Reopen - Issue Not Resolved"}),w.status==="Closed"&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:"This complaint is closed and cannot be reopened."})]})]}),te&&me&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Rate Your Experience"}),e.jsx("button",{onClick:()=>{G(!1),ie({rating:0,feedback:""}),q("")},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:me.complaint_number})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:me.title})]})}),e.jsxs("form",{onSubmit:Oe,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"How would you rate the service? *"}),e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(Ae=>e.jsx("button",{type:"button",onClick:()=>{ie(Le=>({...Le,rating:Ae})),Y&&q("")},className:`text-3xl ${Ae<=se.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`,children:""},Ae))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("span",{children:"Poor"}),e.jsx("span",{children:"Excellent"})]}),Y&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:Y})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:se.feedback,onChange:Ae=>ie(Le=>({...Le,feedback:Ae.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about your experience..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{G(!1),ie({rating:0,feedback:""}),q("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Skip"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Rating"})]})]})]})})}),ce&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-purple-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(CC,{size:24,className:"text-yellow-300"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold",children:"Rate Your Experience"}),e.jsxs("p",{className:"text-sm mt-1",children:["Please rate the service for complaint ",me?.complaint_number]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{G(!0),pe(!1)},className:"px-3 py-1 bg-white text-purple-600 rounded text-sm font-medium hover:bg-gray-100 transition-colors",children:"Rate Now"}),e.jsx("button",{onClick:()=>pe(!1),className:"px-3 py-1 bg-transparent border border-white rounded text-sm hover:bg-purple-700 transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>pe(!1),className:"ml-4 text-white hover:text-gray-200",children:""})]})}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function $_(){const[t,a]=C.useState(!1),[r,n]=C.useState([]),[l,d]=C.useState([]),[f,h]=C.useState(!0),[b,g]=C.useState(""),[w,k]=C.useState({status:"all",apartment_id:"all",category:"all"}),[E,S]=C.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:D}=C.useContext(Or),[A,M]=C.useState([]),[I,F]=C.useState([]),T=async()=>{try{const G=await Te.get("/apartments");G.data.success&&F(G.data.data||[])}catch(G){console.error("Error loading apartments:",G),ne.error("Failed to load apartments")}},L=async()=>{try{h(!0);const G=await Te.get("/complaints",{headers:{Authorization:`Bearer ${D.accessToken}`},params:w});if(G.data.success){const se=G.data.data||[];if(n(se),d(se),H(se),se.length>0){const ie=[...new Set(se.map(Y=>Y.category).filter(Y=>Y&&Y.trim()!=="").sort())];ie.includes("General")||ie.unshift("General"),M(ie)}}}catch(G){console.error("Failed to fetch complaints:",G),ne.error("Failed to load complaints")}finally{h(!1)}};C.useEffect(()=>{D.accessToken&&(T(),L())},[D.accessToken,w]),C.useEffect(()=>{if(!r.length){d([]);return}let G=[...r];if(b){const se=b.toLowerCase();G=G.filter(ie=>ie.complaint_number?.toLowerCase().includes(se)||ie.title?.toLowerCase().includes(se)||ie.houseowner_name&&ie.houseowner_name.toLowerCase().includes(se)||ie.apartment_name&&ie.apartment_name.toLowerCase().includes(se))}w.status!=="all"&&(G=G.filter(se=>se.status===w.status)),w.apartment_id!=="all"&&(G=G.filter(se=>se.apartment_id===w.apartment_id)),w.category!=="all"&&(G=G.filter(se=>se.category===w.category)),d(G)},[r,b,w]);const H=G=>{const se=G.length,ie=G.filter(ce=>ce.status==="Pending").length,Y=G.filter(ce=>ce.status==="In Progress").length,q=G.filter(ce=>ce.status==="Resolved"||ce.status==="Closed").length;S({total:se,pending:ie,in_progress:Y,resolved:q})},U=G=>{switch(G){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},B=G=>{switch((G||"").toLowerCase()){case"water":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"electricity":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"gas":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"plumbing":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300";case"carpentry":return"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300";case"general":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},P=G=>{if(!G)return"N/A";try{return new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},z=(G,se)=>{if(!G||!se)return"N/A";try{const ie=new Date(G),q=(se==="now"?new Date:new Date(se))-ie,ce=Math.floor(q/(1e3*60*60*24)),pe=Math.floor(q%(1e3*60*60*24)/(1e3*60*60)),me=Math.floor(q%(1e3*60*60)/(1e3*60));return ce>0?`${ce}d ${pe}h`:pe>0?`${pe}h ${me}m`:me>0?`${me}m`:"Just now"}catch{return"N/A"}},Z=G=>{if(!G||G===0)return"N/A";const se=Math.floor(G/3600),ie=Math.floor(G%3600/60);return se>0?`${se}h ${ie}m`:`${ie}m`},te=()=>{g(""),k({status:"all",apartment_id:"all",category:"all"})};return f?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ia,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"All Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and manage all complaints"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:E.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(xr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:E.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Ks,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:E.in_progress})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Zu,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved/Closed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:E.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx($a,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter & Search Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(wf,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.length," of ",r.length," complaints"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(js,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:b,onChange:G=>g(G.target.value),placeholder:"Search by complaint number, title, or house owner...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),e.jsx("div",{children:e.jsxs("select",{value:w.status,onChange:G=>k(se=>({...se,status:G.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsxs("select",{value:w.apartment_id,onChange:G=>k(se=>({...se,apartment_id:G.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Apartments"}),I.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:w.category_id||"all",onChange:G=>k(se=>({...se,category_id:G.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),A.map(G=>e.jsx("option",{value:G.category_id,children:G.category_name},G.category_id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:te,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ia,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:r.length===0?"No complaints have been filed yet.":"No complaints match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Timeline & Rating"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.map(G=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:G.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:G.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:G.description}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${B(G.category)}`,children:G.category||"General"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["By: ",G.houseowner_name||"Unknown"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",P(G.created_at)]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:G.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",G.floor_number,"  House ",G.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${U(G.status)}`,children:G.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[G.resolved_at?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[e.jsx(uE,{size:14,className:"mr-1"}),"Resolved: ",P(G.resolved_at)]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Duration: ",z(G.created_at,G.resolved_at)]})]}):e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Open for: ",z(G.created_at,"now")]}),G.total_work_time>0&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center",children:[e.jsx(tw,{size:12,className:"mr-1"}),"Work Time: ",Z(G.total_work_time)]})]})})]},G.id))})]})})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function W_(){const[t,a]=C.useState([]),[r,n]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(""),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState({status:"all"}),[D,A]=C.useState({total:0,pending:0,in_progress:0,resolved:0}),[M,I]=C.useState({}),{auth:F}=C.useContext(Or),T=hr(),[L,H]=C.useState([]),[U,B]=C.useState([]),[P,z]=C.useState(!1),[Z,te]=C.useState("pending"),G=async()=>{try{const K=await Te.get(`/user-apartments/users/${F.user.id}/apartments`);K.data.success?H(K.data.data||[]):(ne.error("Failed to load apartments"),H([]))}catch(K){console.error("Error fetching apartments:",K),ne.error("Error loading your apartments"),H([])}},se=async()=>{try{z(!0);const K=await Te.get(`/technician-categories/technicians/${F.user.id}/categories`,{headers:{Authorization:`Bearer ${F.accessToken}`}});K.data.success?B(K.data.data||[]):(console.error("Failed to load assigned categories:",K.data.message),B([]))}catch(K){console.error("Error fetching assigned categories:",K),B([])}finally{z(!1)}},ie=async()=>{try{d(!0);const K=await Te.get("/complaints/my-complaints/technician",{headers:{Authorization:`Bearer ${F.accessToken}`},params:E});if(K.data.success){const ae=K.data.data||[];a(ae),n(ae),K.data.statistics&&A(K.data.statistics)}else console.error("Failed to load complaints:",K.data.message),a([]),n([])}catch(K){console.error("Error fetching complaints:",K),a([]),n([])}finally{d(!1)}};C.useEffect(()=>{F?.user?.id&&(async()=>(await Promise.all([G(),se()]),F?.accessToken&&ie()))()},[F?.user?.id]);const Y=async K=>{try{T(`/my-work/${K.id}`,{state:{complaint:K}})}catch(ae){console.error("Error navigating to my work:",ae),ne.error("Failed to start work")}};C.useEffect(()=>{F?.accessToken&&L.length>0&&ie()},[F?.accessToken,L,E]),C.useEffect(()=>{if(!t.length){n([]);return}let K=t.filter(ae=>ae.complaint_number?.toLowerCase().includes(f.toLowerCase())||ae.title?.toLowerCase().includes(f.toLowerCase())||ae.description?.toLowerCase().includes(f.toLowerCase())||ae.houseowner_name?.toLowerCase().includes(f.toLowerCase())||ae.apartment_name?.toLowerCase().includes(f.toLowerCase()));n(K)},[t,f]);const q=K=>{try{return new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},ce=K=>{switch(K){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},pe=K=>{if(!K.category_name&&!K.category_id)return null;const ae=U.find(oe=>oe.category_id===K.category_id);return ae?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${ae.category_color}20`,color:ae.category_color},children:K.category_name||"Uncategorized"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:K.category_name||"Uncategorized"})},me=(K,ae)=>{S(oe=>({...oe,[K]:ae}))},le=()=>{S({status:"all"}),h("")},X=K=>K.status==="Resolved"||K.status==="Closed"?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"})}):K.status==="Pending"||K.status==="In Progress"||K.is_on_hold?e.jsxs("button",{onClick:()=>Y(K),className:"flex items-center justify-center gap-1 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors w-full",title:K.is_on_hold?"Resume from Hold":"Start Work",children:[e.jsx(Zv,{size:16}),e.jsx("span",{children:K.is_on_hold?"Resume Work":"Start Work"})]}):null,W=()=>P?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Loading your assigned categories..."})]}):L.length===0&&U.length===0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ia,{className:"text-yellow-600 dark:text-yellow-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No assignments found"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:"You need to be assigned to apartments and categories to see complaints."})]})]})}):e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:["Assigned Categories: ",U.length]})}),U.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[U.slice(0,3).map(K=>e.jsx("span",{className:"px-4 py-2 text-xs rounded-full font-medium bg-gray-400 dark:bg-gray-300",style:{color:K.category_color},children:K.category_name},K.category_id)),U.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400",children:["+",U.length-3," more"]})]})]});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:g})}),w&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>k(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${w?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:g})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>k(!0)}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ia,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Complaints assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:D.total})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ia,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View complaints from your assigned apartments and categories"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6",children:W()}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(js,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints by number, title, or house owner...",value:f,onChange:K=>h(K.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{children:e.jsxs("select",{value:E.status,onChange:K=>me("status",K.target.value),className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.length," of ",t.length," complaints"]}),(E.status!=="all"||f)&&e.jsx("button",{onClick:le,className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:"Clear filters"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ia,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:f?"No matching complaints found":"No complaints available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:f?"Try adjusting your search terms":L.length===0?"You are not assigned to any apartments":U.length===0?"You are not assigned to any complaint categories":"No complaints match your assigned apartments and categories"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:r.map(K=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ia,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base",children:K.complaint_number}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 truncate",children:K.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce(K.status)}`,children:[K.status,K.is_on_hold&&" (On Hold)"]}),pe(K)]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ia,{size:14,className:"mr-2"}),e.jsx("span",{className:"truncate",children:K.apartment_name||"Unknown"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(go,{size:14,className:"mr-2"}),e.jsxs("span",{children:["Floor ",K.floor_number,"  House ",K.house_number]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(us,{size:14,className:"mr-2"}),e.jsxs("span",{className:"truncate",children:["House Owner: ",K.houseowner_name||"Unknown"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:K.description})}),e.jsx("div",{className:"mb-4",children:X(K)}),e.jsx("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",q(K.created_at)]}),K.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",q(K.assigned_at)]})]})})]},K.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Hold Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(K=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:K.complaint_number}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mt-1",children:K.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:K.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["House Owner: ",K.houseowner_name||"Unknown"]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:K.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",K.floor_number,"  House ",K.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:pe(K)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ce(K.status)}`,children:K.status}),K.is_on_hold&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"On Hold"})})]}),e.jsx("td",{className:"px-4 py-4",children:X(K)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q(K.created_at)}),K.assigned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",q(K.assigned_at)]})]})]},K.id))})]})})]})}),r.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(js,{size:20})})})]})})]})]})}function K_(){const[t,a]=C.useState(!1),[r,n]=C.useState(null),[l,d]=C.useState(!0),[f,h]=C.useState(!1),[b,g]=C.useState({name:"",country:"",mobile:"",nic:"",occupation:""}),{auth:w}=C.useContext(Or);C.useEffect(()=>{k()},[]);const k=async()=>{try{d(!0);const F=await Te.get("/auth/me");if(F.data.success&&F.data.data&&F.data.data.length>0){const T=F.data.data[0];n(T),g({name:T.name||`${T.firstname||""} ${T.lastname||""}`.trim(),country:T.country||"",mobile:T.mobile||"",nic:T.nic||"",occupation:T.occupation||""})}else ne.error("No profile data found")}catch(F){console.error("Error fetching house owner profile:",F),ne.error("Failed to load profile")}finally{d(!1)}},E=()=>{h(!0)},S=()=>{h(!1),r&&g({name:r.name||`${r.firstname||""} ${r.lastname||""}`.trim(),country:r.country||"",mobile:r.mobile||"",nic:r.nic||"",occupation:r.occupation||""})},D=async()=>{try{console.log("Updating house owner profile:",b);const F=await Te.put(`/auth/users/${r.id}`,b);F.data.success?(n(T=>({...T,...F.data.data,name:b.name})),h(!1),ne.success("Profile updated successfully"),k()):ne.error(F.data.message||"Failed to update profile")}catch(F){console.error("Error updating house owner profile:",F),ne.error(F.response?.data?.message||"Failed to update profile")}},A=F=>{const{name:T,value:L}=F.target;g(H=>({...H,[T]:L}))},M=F=>{if(!F)return"Not available";try{return new Date(F).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!r)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(us,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"}),e.jsx("button",{onClick:k,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]})});const I=()=>{if(r.name){const F=r.name.split(" ");return F.length>=2?(F[0].charAt(0)+F[1].charAt(0)).toUpperCase():r.name.charAt(0).toUpperCase()}return r.firstname?.charAt(0)?.toUpperCase()||"H"};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(Pi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(zi,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(us,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"My Profile"}),e.jsx("span",{className:"ml-3 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded-full",children:"House Owner"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:S,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(gr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:D,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(kf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save Changes"})]})]}):e.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(ga,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsx("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:I()})}),e.jsx("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:"House Owner"}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Tl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",M(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]})]}),(r.apartment_name||r.house_number||r.floor_number)&&e.jsxs("div",{className:"mt-4 md:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 mb-2 md:mb-3 flex items-center",children:[e.jsx(Pr,{size:16,className:"md:size-4 mr-2"}),"Property Information"]}),e.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[r.apartment_name&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Li,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Apartment: ",r.apartment_name]})]}),r.house_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Pr,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["House No: ",r.house_number]})]}),r.floor_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Li,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["Floor: ",r.floor_number]})]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(us,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Full Name"]}),f?e.jsx("input",{type:"text",name:"name",value:b.name,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(xr,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"NIC Number"]}),f?e.jsx("input",{type:"text",name:"nic",value:b.nic,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter NIC number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.nic||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(qu,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Occupation"]}),f?e.jsx("input",{type:"text",name:"occupation",value:b.occupation,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your occupation"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.occupation||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(go,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your country"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Rc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter mobile number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Rl,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email Address"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(po,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Account Type"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:"House Owner"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6 mt-4 md:mt-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Verification Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Account Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:M(r.created_at)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Profile Update"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:r.updated_at?M(r.updated_at):"Not updated yet"})]})]})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function Z_({complaint:t,onClose:a,onHoldSuccess:r}){const[n,l]=C.useState(""),[d,f]=C.useState(""),[h,b]=C.useState(!1),[g,w]=C.useState(""),{auth:k}=C.useContext(Or),E=["Waiting for parts/equipment","Need specialist assistance","Material shortage","Weather conditions","Safety concerns","Access issues","Waiting for approval","Other"],S=async M=>{if(M.preventDefault(),!n.trim()){ne.error("Please provide a reason for placing the complaint on hold");return}try{b(!0);const I=await Te.post(`/complaints/${t.id}/hold`,{reason:n,expected_resolution_date:d||null},{headers:{Authorization:`Bearer ${k.accessToken}`}});I.data.success?(ne.success("Complaint placed on hold successfully"),r(),a()):ne.error(I.data.message||"Failed to place complaint on hold")}catch(I){console.error("Error holding complaint:",I),ne.error(I.response?.data?.message||"Failed to place complaint on hold")}finally{b(!1)}},D=M=>{w(M),l(M==="Other"?"":M)},A=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg mr-3",children:e.jsx(ia,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Hold Complaint"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(gr,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:t.complaint_number})]}),e.jsxs("form",{onSubmit:S,children:[e.jsxs("div",{className:"mb-6 ",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Common Reasons"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(M=>e.jsx("button",{type:"button",onClick:()=>D(M),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${g===M?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900 dark:text-purple-300 dark:border-purple-700":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,children:M},M))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hold Reason Details"}),e.jsx("textarea",{value:n,onChange:M=>{l(M.target.value),M.target.value!==g&&w("")},rows:"4",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Describe why you need to hold this complaint...",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Resolution Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Tl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",value:d,onChange:M=>f(M.target.value),min:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"When do you expect to resume work on this complaint?"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ia,{size:18,className:"text-yellow-600 dark:text-yellow-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," The complaint timer will be paused while on hold. You will need to resume the complaint before completing the work."]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!n.trim(),className:"px-4 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ia,{size:18}),"Place on Hold"]})})]})]})]})]})})}function Tw(){const{complaintId:t}=gn(),a=Fn(),[r,n]=C.useState(a.state?.complaint||null),[l,d]=C.useState(!1),[f,h]=C.useState(null),[b,g]=C.useState(!1),[w,k]=C.useState(!1),[E,S]=C.useState(""),[D,A]=C.useState(null),[M,I]=C.useState(""),[F,T]=C.useState(!1),[L,H]=C.useState(0),[U,B]=C.useState("environment"),P=C.useRef(null),z=hr(),{auth:Z}=C.useContext(Or),te=C.useRef(null),[G,se]=C.useState(!1),[ie,Y]=C.useState(!1),[q,ce]=C.useState(!1),[pe,me]=C.useState(!1),[le,X]=C.useState(null),[W,K]=C.useState(!1);C.useEffect(()=>{const Be=async()=>{if(!r&&t)try{g(!0);const fe=await Te.get(`/complaints/${t}`,{headers:{Authorization:`Bearer ${Z.accessToken}`}});fe.data.success?n(fe.data.data):(ne.error("Failed to load complaint details"),z("/my-complaints"))}catch(fe){console.error("Error fetching complaint:",fe),ne.error("Error loading complaint information"),z("/my-complaints")}finally{g(!1)}};Z?.accessToken&&t&&Be()},[t,Z?.accessToken,r,z]);const ae=async Be=>{try{if(!Be)return{access:!1,reason:"Invalid house ID"};const fe=await Te.get(`/houses/${Be}`);if(!fe.data.success||!fe.data.data)return{access:!1,reason:"House not found in the system"};const at=fe.data.data;if(r&&r.house_id!==at.id)return{access:!1,reason:`This house (${at.house_id}) does not match the complaint's house (House ${r.house_number})`};let Ce=null;if(at.apartment_id)try{const Ct=await Te.get(`/apartments/${at.apartment_id}`);Ct.data.success&&(Ce=Ct.data.data)}catch(Ct){console.error("Error fetching apartment:",Ct)}let wt=null;if(at.floor_id)try{const Ct=await Te.get(`/floors/${at.floor_id}`);Ct.data.success&&(wt=Ct.data.data)}catch(Ct){console.error("Error fetching floor:",Ct)}const ut={...at,apartment:Ce,floor:wt};return A(ut),{access:!0,houseData:ut,apartmentId:at.apartment_id,floorId:at.floor_id,houseId:at.id}}catch(fe){if(console.error("Error checking house access:",fe),fe.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const at=fe.response?.status;return at===401?{access:!1,reason:"Session expired. Please login again."}:at===403?{access:!1,reason:"Access denied to this resource."}:at===404?{access:!1,reason:"House not found."}:at===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},oe=async()=>{try{const Be=await Te.post(`/complaints/${t}/timer/start`,{},{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(Be.data.success){const fe=Be.data.data;return T(!0),se(!0),H(fe.currentElapsedTime||0),te.current&&clearInterval(te.current),te.current=setInterval(()=>{H(at=>at+1)},1e3),ne.success("Work started! Timer is now running."),n(at=>({...at,status:"In Progress",is_timer_running:!0,work_started_at:new Date().toISOString()})),!0}else return ne.error(Be.data.message||"Failed to start timer"),!1}catch(Be){return console.error("Error starting timer:",Be),ne.error(Be.response?.data?.message||"Failed to start timer"),!1}},re=async()=>{try{const Be=await Te.post(`/complaints/${t}/timer/stop`,{},{headers:{Authorization:`Bearer ${Z.accessToken}`}});return Be.data.success?(T(!1),se(!1),te.current&&(clearInterval(te.current),te.current=null),Be.data.data&&Be.data.data.currentElapsedTime&&H(Be.data.data.currentElapsedTime),ne.success("Work completed! Timer stopped."),n(fe=>({...fe,status:"Resolved",is_timer_running:!1,work_paused_at:new Date().toISOString()})),setTimeout(()=>{z("/my-complaints")},3e3),!0):(ne.error(Be.data.message||"Failed to stop timer"),!1)}catch(Be){return console.error("Error stopping timer:",Be),ne.error(Be.response?.data?.message||"Failed to stop timer"),!1}},Re=async()=>{try{const Be=await Te.post(`/complaints/${t}/timer/pause`,{},{headers:{Authorization:`Bearer ${Z.accessToken}`}});return Be.data.success?(T(!1),te.current&&(clearInterval(te.current),te.current=null),Be.data.data&&Be.data.data.currentElapsedTime&&H(Be.data.data.currentElapsedTime),ne.success("Timer paused"),!0):(ne.error(Be.data.message||"Failed to pause timer"),!1)}catch(Be){return console.error("Error pausing timer:",Be),ne.error(Be.response?.data?.message||"Failed to pause timer"),!1}},ke=async()=>{try{const Be=await Te.post(`/complaints/${t}/timer/resume`,{},{headers:{Authorization:`Bearer ${Z.accessToken}`}});return Be.data.success?(T(!0),te.current||(te.current=setInterval(()=>{H(fe=>fe+1)},1e3)),ne.success("Timer resumed"),!0):(ne.error(Be.data.message||"Failed to resume timer"),!1)}catch(Be){return console.error("Error resuming timer:",Be),ne.error(Be.response?.data?.message||"Failed to resume timer"),!1}},Pe=()=>{d(!0),h(null),k(!1),S(""),A(null),I(""),P.current&&(P.current.clear().catch(Be=>{console.log("Scanner clear error on start:",Be)}),P.current=null),setTimeout(()=>{try{const Be=document.getElementById("qr-reader");Be&&(Be.innerHTML=""),P.current=new Aw("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,supportedScanTypes:[ii.SCAN_TYPE_CAMERA],facingMode:U},!1),P.current.render(fe=>{Oe(fe)},fe=>{console.log("QR Scan error:",fe)}),console.log("Scanner started with camera:",U)}catch(Be){console.error("Scanner initialization error:",Be),ne.error("Failed to initialize scanner. Please refresh and try again."),d(!1)}},300)},Oe=async Be=>{try{g(!0),P.current&&await P.current.clear(),d(!1),I("");const fe=Be.trim();if(h({houseId:fe,source:"qr"}),le?.is_on_hold){const at=await ae(fe);at.access?(ne.success("Location verified! Ready to resume from hold."),k(!0)):(k(!1),S(at.reason||"Access denied"),ne.error(at.reason||"Access denied"))}else{const at=await ae(fe);if(at.access){k(!0),ne.success("Access granted! This is the correct house.");try{await oe()&&(T(!0),se(!0),n(wt=>({...wt,status:"In Progress",is_timer_running:!0})))}catch(Ce){ne.error("Failed to start timer: "+Ce.message)}}else k(!1),S(at.reason||"Access denied"),ne.error(at.reason||"Access denied")}}catch(fe){console.error("Error processing QR code:",fe),ne.error(fe.message||"Invalid QR code. Please scan a valid house QR code."),d(!1)}finally{g(!1)}},nt=async()=>{const Be=U==="environment"?"user":"environment";if(P.current)try{await P.current.clear(),console.log("Scanner cleared for camera switch")}catch(fe){console.log("Error clearing scanner:",fe)}B(Be),l&&setTimeout(()=>{Pe()},500)},we=Be=>{const fe=Math.floor(Be/3600),at=Math.floor(Be%3600/60),Ce=Be%60;return`${fe.toString().padStart(2,"0")}:${at.toString().padStart(2,"0")}:${Ce.toString().padStart(2,"0")}`},Ae=async()=>{if(P.current){try{await P.current.clear()}catch(Be){console.log("Scanner clear error on reset:",Be)}P.current=null}te.current&&(clearInterval(te.current),te.current=null),d(!1),h(null),k(!1),S(""),A(null),I(""),T(!1),H(0),se(!1)};C.useEffect(()=>()=>{P.current&&P.current.clear().catch(Be=>{console.log("Scanner clear error on unmount:",Be)}),te.current&&clearInterval(te.current)},[]),C.useEffect(()=>((async()=>{if(t&&Z?.accessToken)try{const fe=await Te.get(`/complaints/${t}/timer/status`,{headers:{Authorization:`Bearer ${Z.accessToken}`}});if(fe.data.success&&fe.data.data){const at=fe.data.data;at.is_timer_running&&(T(!0),se(!0),H(at.currentElapsedTime||0),te.current=setInterval(()=>{H(Ce=>Ce+1)},1e3))}}catch{console.log("No active timer found")}})(),()=>{te.current&&clearInterval(te.current)}),[t,Z?.accessToken]);const Le=Be=>{try{return new Date(Be).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},Ee=async()=>{try{K(!0);const Be=await Te.get(`/complaints/${t}/hold-status`,{headers:{Authorization:`Bearer ${Z.accessToken}`}});Be.data.success&&X(Be.data.data)}catch(Be){console.error("Error fetching hold status:",Be)}finally{K(!1)}};C.useEffect(()=>{t&&Z?.accessToken&&Ee()},[t,Z?.accessToken]);const Je=async()=>{try{g(!0);const Be=await Te.post(`/complaints/${t}/resume`,{},{headers:{Authorization:`Bearer ${Z.accessToken}`}});Be.data.success?(ne.success("Complaint resumed from hold"),X(null),T(!0),se(!0),n(fe=>({...fe,status:"In Progress",is_timer_running:!0,is_on_hold:!1})),te.current&&clearInterval(te.current),te.current=setInterval(()=>{H(fe=>fe+1)},1e3)):ne.error(Be.data.message||"Failed to resume complaint")}catch(Be){console.error("Error resuming from hold:",Be),ne.error(Be.response?.data?.message||"Failed to resume complaint")}finally{g(!1)}},be=()=>{Ee(),T(!1),te.current&&(clearInterval(te.current),te.current=null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(vr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Complaint: ",r.complaint_number]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.title})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${r.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r.status==="In Progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:r.status})}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Created: ",Le(r.created_at)]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.description})]})]}),G&&!le?.is_on_hold&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-800 rounded-lg mr-4",children:e.jsx(tw,{size:24,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Work In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-200 mt-2",children:we(L)}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Elapsed Time"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[F?e.jsx("button",{onClick:Re,className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors min-w-[70px]",children:e.jsx(nC,{size:16})}):e.jsx("button",{onClick:ke,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors min-w-[70px]",children:e.jsx(Zv,{size:16})}),e.jsx("button",{onClick:()=>me(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors min-w-[70px]",children:e.jsx(ia,{size:16})}),e.jsx("button",{onClick:re,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors min-w-[70px]",children:e.jsx(EE,{size:16})})]})]})}),le?.is_on_hold&&!G&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx(ia,{size:24,className:"text-orange-600 dark:text-orange-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300",children:"Complaint On Hold"}),e.jsxs("p",{className:"text-orange-700 dark:text-orange-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",le.reason]}),le.expected_resolution_date&&e.jsxs("p",{className:"text-orange-700 dark:text-orange-400",children:[e.jsx("span",{className:"font-medium",children:"Expected Resolution:"})," ",new Date(le.expected_resolution_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"To resume work:"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"Verify your location (scan QR or enter House ID)"}),e.jsx("li",{children:'Click "Resume from Hold" button'}),e.jsx("li",{children:"The timer will resume from where it was paused"})]})]}),w?e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(hn,{size:20,className:"text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Location verified! You can now resume work."})]}),e.jsxs("button",{onClick:Je,className:"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",disabled:b,children:[e.jsx(kE,{size:20}),"Resume from Hold"]})]}):e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"Please verify your location first to resume work"})]}),l&&!G&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:nt,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${U==="environment"?"Front":"Back"} Camera`,children:[e.jsx(Qv,{size:16}),e.jsx("span",{children:"Switch Camera"})]}),e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/40",children:[e.jsx(gr,{size:16}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 text-black dark:text-white"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Scanning ",U==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Scan the house QR code to verify location and start work"}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Gt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processing..."})]}),f&&!b&&!l&&!G&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Verification"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[f.source==="manual"?"Manual Entry":"QR Scan"," Result"]})]}),e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(kc,{size:16}),e.jsx("span",{children:"Try Again"})]})]}),w?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(hn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Location Verified "}),e.jsx("p",{className:"text-green-700 dark:text-green-400",children:"Timer has been started automatically"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center justify-center bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx(Ks,{size:24,className:"text-green-600 dark:text-green-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:"Running..."})]})]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ia,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:E}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsx("p",{children:"Requirements to start work:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House ID must match the complaint's house"}),e.jsx("li",{children:"House must exist in the system"}),e.jsx("li",{children:"You must be at the correct location"})]})]})]})]})})]}),!f&&!l&&!b&&!G&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(Zu,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Start Work"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Verify the house location to start working on this complaint"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"You must verify that you are at the correct house before starting work"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),e.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]})}),e.jsxs("div",{children:[e.jsx(X0,{size:48,className:"mx-auto text-purple-400 mb-4"}),e.jsxs("button",{onClick:Pe,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(qv,{size:20}),"Scan House QR Code"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"QR scanning will automatically verify and start timer"})]})]})}),G&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(Zu,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Work Started Successfully"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are now working on complaint: ",e.jsx("strong",{children:r?.complaint_number})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Remember to stop the timer when you finish your work"}),e.jsx("p",{className:"mt-1",children:"The complaint will be marked as completed automatically"})]})]})})]})})]}),pe&&r&&e.jsx(Z_,{complaint:r,onClose:()=>me(!1),onHoldSuccess:be}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function Q_(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),l=hr(),d=()=>{l("/my-complaints")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>n(!1)}),e.jsx("div",{className:`
            lg:hidden fixed left-0 top-0 h-full z-50
            transform transition-transform duration-300 ease-in-out
            ${r?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(vr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(lb,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"My Service"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Mn,{size:16})}),e.jsx(lb,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Service Management"})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(Tw,{})})]})})]})]})}function J_({onClose:t,onCreated:a}){const{auth:r}=C.useContext(Or),[n,l]=C.useState(!1),[d,f]=C.useState({}),[h,b]=C.useState({name:"",description:"",color:"Purple"}),g=[{name:"Purple",value:"#667eea",displayName:"Purple"},{name:"Blue",value:"#3b82f6",displayName:"Blue"},{name:"Green",value:"#10b981",displayName:"Green"},{name:"Yellow",value:"#f59e0b",displayName:"Yellow"},{name:"Red",value:"#ef4444",displayName:"Red"},{name:"Pink",value:"#ec4899",displayName:"Pink"},{name:"Indigo",value:"#6366f1",displayName:"Indigo"},{name:"Teal",value:"#14b8a6",displayName:"Teal"},{name:"Orange",value:"#f97316",displayName:"Orange"},{name:"Gray",value:"#6b7280",displayName:"Gray"}],w=L=>{const H=g.find(U=>U.name===L);return H?H.value:"#667eea"},k=L=>{const H=g.find(U=>U.name===L);return H?`${H.displayName} (${H.value})`:`Custom (${w(L)})`},E=L=>!g.some(H=>H.name===L),S=()=>E(h.color)?h.color.startsWith("#")?h.color:"#667eea":w(h.color),D=()=>{const L={};return h.name.trim()?h.name.trim().length<2?L.name="Category name must be at least 2 characters":h.name.trim().length>50&&(L.name="Category name cannot exceed 50 characters"):L.name="Category name is required",h.description&&h.description.length>500&&(L.description="Description cannot exceed 500 characters"),h.color||(L.color="Please select a color"),L},A=L=>{const{name:H,value:U}=L.target;b(B=>({...B,[H]:U})),d[H]&&f(B=>({...B,[H]:""}))},M=L=>{b(H=>({...H,color:L})),d.color&&f(H=>({...H,color:""}))},I=L=>{b(H=>({...H,color:L})),d.color&&f(H=>({...H,color:""}))},F=async L=>{L.preventDefault();const H=D();if(Object.keys(H).length>0){f(H);return}try{l(!0);const U={name:h.name.trim(),description:h.description.trim(),color:h.color},B=await Te.post("/categories",U,{headers:{Authorization:`Bearer ${r.accessToken}`}});if(B.data.success)a&&a(),t();else throw new Error(B.data.message||"Failed to create category")}catch(U){console.error("Create category error:",U),U.response?.status===409?(f(B=>({...B,name:"A category with this name already exists"})),ne.error("A category with this name already exists")):U.response?.status===401?(ne.error("Session expired. Please login again."),t()):ne.error(U.response?.data?.message||"Failed to create service category")}finally{l(!1)}},T=()=>{b({name:"",description:"",color:"Purple"}),f({})};return e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:A,className:`w-full px-3 py-2 border  text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Plumbing, Electrical, Carpentry",disabled:n}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required. Will be used for complaint categorization."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:h.description,onChange:A,rows:3,className:`w-full px-3 py-2 text-gray-700 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.description?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Brief description of what this category includes...",disabled:n}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Optional. Helps technicians understand the category scope."}),e.jsxs("p",{className:`text-xs ${h.description.length>500?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[h.description.length,"/500"]})]}),d.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Color *"}),e.jsxs("div",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg mr-3 border-2 border-gray-300 dark:border-gray-600 flex-shrink-0",style:{backgroundColor:S()}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:E(h.color)?"Custom Color":h.color}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:e.jsx("span",{className:"truncate",children:k(h.color)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select from predefined colors:"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:g.map(L=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{type:"button",onClick:()=>M(L.name),className:`relative w-full aspect-square rounded-lg border-2 transition-all hover:scale-105 mb-1 ${h.color===L.name?"border-purple-500 dark:border-purple-400 scale-105 shadow-md":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,title:`${L.displayName} (${L.value})`,disabled:n,children:[e.jsx("div",{className:"w-full h-full rounded",style:{backgroundColor:L.value}}),h.color===L.name&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded",children:e.jsx(hn,{className:"text-white",size:14})})]}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center",children:L.name})]},L.name))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Custom Color"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Or create your own"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(aC,{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:18}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Color Picker"}),e.jsx("input",{type:"color",value:S(),onChange:L=>I(L.target.value),className:"w-full h-10 cursor-pointer rounded border border-gray-300 dark:border-gray-600",disabled:n})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Hex Code"}),e.jsx("input",{type:"text",value:S(),onChange:L=>I(L.target.value),className:"w-full px-3 py-2  text-gray-700 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-800 dark:text-white",placeholder:"#RRGGBB",pattern:"^#[0-9A-Fa-f]{6}$",disabled:n})]})]})]}),E(h.color)&&e.jsx("div",{className:"mt-3 p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:S()}}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Custom Color Selected"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:S()})]})})]}),d.color&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:d.color}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Color helps visually identify this category in lists and charts."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:"Reset Form"}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:n,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:n,className:"flex items-center justify-center px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"animate-spin mr-2",size:16}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hn,{className:"mr-2",size:16}),"Create Category"]})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Tips for creating categories:"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:'Use clear, descriptive names (e.g., "Electrical Repair" instead of "Electricity")'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Keep descriptions concise but informative"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Choose distinct colors for easy visual differentiation"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Categories can be assigned to technicians for specialization"})]})]})]})]})}function e8({onClose:t,onEdited:a,serviceCategory:r}){const{auth:n}=C.useContext(Or),[l,d]=C.useState(!1),[f,h]=C.useState(!1),[b,g]=C.useState({name:"",description:"",color:"#6b46c1"}),[w,k]=C.useState({}),[E,S]=C.useState(window.innerWidth<768);C.useEffect(()=>{const T=()=>{S(window.innerWidth<768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),C.useEffect(()=>{r&&g({name:r.name||"",description:r.description||"",color:r.color||"#6b46c1"})},[r]);const D=()=>{const T={};return b.name.trim()?b.name.length>100&&(T.name="Name must be less than 100 characters"):T.name="Category name is required",b.description&&b.description.length>500&&(T.description="Description must be less than 500 characters"),b.color||(T.color="Color is required"),k(T),Object.keys(T).length===0},A=T=>{const{name:L,value:H}=T.target;g(U=>({...U,[L]:H})),w[L]&&k(U=>({...U,[L]:""}))},M=T=>{g(L=>({...L,color:T.target.value})),w.color&&k(L=>({...L,color:""}))},I=async T=>{if(T.preventDefault(),!!D()){h(!0);try{const L={name:b.name.trim(),color:b.color};b.description.trim()&&(L.description=b.description.trim());const H=await Te.put(`/categories/${r.id}`,L);H.data.success?a():ne.error(H.data.message||"Failed to update category")}catch(L){if(console.error("Update category error:",L),L.response)switch(L.response.status){case 400:ne.error("Invalid data provided");break;case 401:ne.error("Session expired. Please login again.");break;case 403:ne.error("You do not have permission to update this category");break;case 404:ne.error("Category not found"),t();break;case 409:ne.error(L.response.data?.message||"Category with this name already exists");break;default:ne.error("Failed to update service category")}else L.request?ne.error("No response from server. Please check your connection."):ne.error("An error occurred while updating the category")}finally{h(!1)}}},F=[{value:"#6b46c1",label:"Purple",color:"bg-purple-500"},{value:"#4299e1",label:"Blue",color:"bg-blue-500"},{value:"#38a169",label:"Green",color:"bg-green-500"},{value:"#e53e3e",label:"Red",color:"bg-red-500"},{value:"#ed8936",label:"Orange",color:"bg-orange-500"},{value:"#d69e2e",label:"Yellow",color:"bg-yellow-500"},{value:"#4fd1c7",label:"Teal",color:"bg-teal-500"},{value:"#9f7aea",label:"Indigo",color:"bg-indigo-500"},{value:"#f687b3",label:"Pink",color:"bg-pink-500"}];return e.jsxs("form",{onSubmit:I,className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:b.name,onChange:A,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.name?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter category name",disabled:f,maxLength:100}),w.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.name}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:A,rows:E?3:4,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.description?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none`,placeholder:"Enter category description",disabled:f,maxLength:500}),w.description&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.description}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color *"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Quick select:"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-9 gap-2",children:F.map(T=>e.jsx("button",{type:"button",onClick:()=>{g(L=>({...L,color:T.value})),w.color&&k(L=>({...L,color:""}))},className:`relative w-8 h-8 rounded-full flex items-center justify-center ${T.color} border-2 ${b.color===T.value?"border-gray-800 dark:border-white":"border-transparent"} hover:border-gray-400 dark:hover:border-gray-300 transition-colors`,title:T.label,disabled:f,children:b.color===T.value&&e.jsx(hn,{size:14,className:"text-white"})},T.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Custom color:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300 dark:border-gray-600",style:{backgroundColor:b.color}}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",id:"color",name:"color",value:b.color,onChange:M,className:"w-full h-10 cursor-pointer",disabled:f})}),e.jsx("div",{className:"w-24",children:e.jsx("input",{type:"text",value:b.color,onChange:M,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#000000",disabled:f,maxLength:7})})]}),w.color&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.color})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Current Category Information:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.updated_at).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:`flex ${E?"flex-col space-y-3":"space-x-3"} pt-4 border-t border-gray-200 dark:border-gray-700`,children:[e.jsx("button",{type:"button",onClick:t,disabled:f,className:`flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${E?"":"order-2"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:`flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center justify-center ${f?"opacity-70 cursor-not-allowed":""} ${E?"":"order-1"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(Gt,{size:18,className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hn,{size:18,className:"mr-2"}),"Update Category"]})})]}),Object.keys(w).length>0&&e.jsxs("div",{className:"sr-only",role:"alert",children:["Form has ",Object.keys(w).length," error(s). Please fix them before submitting."]})]})}function t8(){const[t,a]=C.useState(!1),[r,n]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),{auth:f}=C.useContext(Or),h=hr(),[b,g]=C.useState(!1),[w,k]=C.useState([]),[E,S]=C.useState(null),[D,A]=C.useState(!1),[M,I]=C.useState(!1),[F,T]=C.useState(!1),[L,H]=C.useState(null),[U,B]=C.useState(!1),[P,z]=C.useState(null);C.useEffect(()=>{const X=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]);const Z=async()=>{try{g(!0),S(null);const X=await Te.get("/categories");X.data.success&&Array.isArray(X.data.data)?k(X.data.data):Array.isArray(X.data)?k(X.data):(console.warn("Unexpected response format:",X.data),k([]))}catch(X){console.error("Failed to load service categories:",X),ne.error("Failed to load service categories. Please try again."),X.response?.status===401?(S("Unauthorized. Please login again."),h("/login")):X.response?.status===400?S("Company information missing. Please contact support."):S("Failed to load service categories. Please try again.")}finally{g(!1)}};C.useEffect(()=>{Z()},[]);const te=()=>{I(!0)},G=()=>{I(!1)},se=()=>{Z(),I(!1),ne.success("Service category created successfully!")},ie=X=>{H(X),T(!0)},Y=()=>{T(!1),H(null)},q=()=>{Z(),T(!1),H(null),ne.success("Service category updated successfully!")},ce=X=>{z(X),B(!0)},pe=async()=>{try{if(!P)return;await Te.delete(`/categories/${P.id}`),ne.success("Category deleted successfully"),B(!1),z(null),Z()}catch(X){console.error("Delete category error:",X),ne.error("Failed to delete category. Please try again.")}},me=()=>{B(!1),z(null)},le=()=>e.jsx("button",{onClick:()=>n(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(le,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>n(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Vr,{onMobileMenuClick:()=>n(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Wu,{size:l?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Service Categories"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your service categories"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:te,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(La,{size:l?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Gt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading service categories..."})]}):E?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:E}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Zs,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No service categories found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first service category"}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Category"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Categories: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map(X=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:X.name}),X.description&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:X.description})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),ie(X)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ga,{size:16})}),e.jsx("button",{onClick:W=>{W.stopPropagation(),ce(X)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:16})})]})]}),X.color&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:X.color}}),e.jsxs("span",{children:["Color: ",X.color]})]})]},X.id))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Service Categories"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," categories"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:X.name}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 dark:text-white max-w-[300px] truncate",children:X.description||"No description"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:X.color?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:X.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:X.color})]}):e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"No color"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:W=>{W.stopPropagation(),ie(X)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(ga,{size:18})}),e.jsx("button",{onClick:W=>{W.stopPropagation(),ce(X)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(Fr,{size:18})})]})})]},X.id))})]})]})})})]})})]}),M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Service Category"}),e.jsx("button",{onClick:G,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(J_,{onClose:G,onCreated:se})]})})}),F&&L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Service Category"}),e.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(e8,{onClose:Y,onEdited:q,serviceCategory:L})]})})}),U&&P&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',P.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:me,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:pe,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Dw=1252,r8=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],og={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},cg=function(t){r8.indexOf(t)!=-1&&(Dw=og[0]=t)};function a8(){cg(1252)}var _n=function(t){cg(t)};function Rw(){_n(1200),a8()}function t2(t){for(var a=[],r=0,n=t.length;r<n;++r)a[r]=t.charCodeAt(r);return a}function s8(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return a.join("")}function Mw(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return a.join("")}var D0=function(t){var a=t.charCodeAt(0),r=t.charCodeAt(1);return a==255&&r==254?s8(t.slice(2)):a==254&&r==255?Mw(t.slice(2)):a==65279?t.slice(1):t},_u=function(a){return String.fromCharCode(a)},r2=function(a){return String.fromCharCode(a)},W0,Sl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function a2(t){for(var a="",r=0,n=0,l=0,d=0,f=0,h=0,b=0,g=0;g<t.length;)r=t.charCodeAt(g++),d=r>>2,n=t.charCodeAt(g++),f=(r&3)<<4|n>>4,l=t.charCodeAt(g++),h=(n&15)<<2|l>>6,b=l&63,isNaN(n)?h=b=64:isNaN(l)&&(b=64),a+=Sl.charAt(d)+Sl.charAt(f)+Sl.charAt(h)+Sl.charAt(b);return a}function Js(t){var a="",r=0,n=0,l=0,d=0,f=0,h=0,b=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var g=0;g<t.length;)d=Sl.indexOf(t.charAt(g++)),f=Sl.indexOf(t.charAt(g++)),r=d<<2|f>>4,a+=String.fromCharCode(r),h=Sl.indexOf(t.charAt(g++)),n=(f&15)<<4|h>>2,h!==64&&(a+=String.fromCharCode(n)),b=Sl.indexOf(t.charAt(g++)),l=(h&3)<<6|b,b!==64&&(a+=String.fromCharCode(l));return a}var fr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Co=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(a,r){return r?new Buffer(a,r):new Buffer(a)}:Buffer.from.bind(Buffer)}return function(){}}();function Ml(t){return fr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function s2(t){return fr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var An=function(a){return fr?Co(a,"binary"):a.split("").map(function(r){return r.charCodeAt(0)&255})};function So(t){if(Array.isArray(t))return t.map(function(n){return String.fromCharCode(n)}).join("");for(var a=[],r=0;r<t.length;++r)a[r]=String.fromCharCode(t[r]);return a.join("")}function dg(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return dg(new Uint8Array(t));for(var a=new Array(t.length),r=0;r<t.length;++r)a[r]=t[r];return a}var El=fr?function(t){return Buffer.concat(t.map(function(a){return Buffer.isBuffer(a)?a:Co(a)}))}:function(t){if(typeof Uint8Array<"u"){var a=0,r=0;for(a=0;a<t.length;++a)r+=t[a].length;var n=new Uint8Array(r),l=0;for(a=0,r=0;a<t.length;r+=l,++a)if(l=t[a].length,t[a]instanceof Uint8Array)n.set(t[a],r);else{if(typeof t[a]=="string")throw"wtf";n.set(new Uint8Array(t[a]),r)}return n}return[].concat.apply([],t.map(function(d){return Array.isArray(d)?d:[].slice.call(d)}))};function n8(t){for(var a=[],r=0,n=t.length+250,l=Ml(t.length+255),d=0;d<t.length;++d){var f=t.charCodeAt(d);if(f<128)l[r++]=f;else if(f<2048)l[r++]=192|f>>6&31,l[r++]=128|f&63;else if(f>=55296&&f<57344){f=(f&1023)+64;var h=t.charCodeAt(++d)&1023;l[r++]=240|f>>8&7,l[r++]=128|f>>2&63,l[r++]=128|h>>6&15|(f&3)<<4,l[r++]=128|h&63}else l[r++]=224|f>>12&15,l[r++]=128|f>>6&63,l[r++]=128|f&63;r>n&&(a.push(l.slice(0,r)),r=0,l=Ml(65535),n=65530)}return a.push(l.slice(0,r)),El(a)}var ks=/\u0000/g,R0=/[\u0001-\u0006]/g;function vc(t){for(var a="",r=t.length-1;r>=0;)a+=t.charAt(r--);return a}function Tn(t,a){var r=""+t;return r.length>=a?r:na("0",a-r.length)+r}function ug(t,a){var r=""+t;return r.length>=a?r:na(" ",a-r.length)+r}function ef(t,a){var r=""+t;return r.length>=a?r:r+na(" ",a-r.length)}function i8(t,a){var r=""+Math.round(t);return r.length>=a?r:na("0",a-r.length)+r}function l8(t,a){var r=""+t;return r.length>=a?r:na("0",a-r.length)+r}var n2=Math.pow(2,32);function gc(t,a){if(t>n2||t<-n2)return i8(t,a);var r=Math.round(t);return l8(r,a)}function tf(t,a){return a=a||0,t.length>=7+a&&(t.charCodeAt(a)|32)===103&&(t.charCodeAt(a+1)|32)===101&&(t.charCodeAt(a+2)|32)===110&&(t.charCodeAt(a+3)|32)===101&&(t.charCodeAt(a+4)|32)===114&&(t.charCodeAt(a+5)|32)===97&&(t.charCodeAt(a+6)|32)===108}var i2=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],lm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function o8(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},l2={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},c8={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function rf(t,a,r){for(var n=t<0?-1:1,l=t*n,d=0,f=1,h=0,b=1,g=0,w=0,k=Math.floor(l);g<a&&(k=Math.floor(l),h=k*f+d,w=k*g+b,!(l-k<5e-8));)l=1/(l-k),d=f,f=h,b=g,g=w;if(w>a&&(g>a?(w=b,h=d):(w=g,h=f)),!r)return[0,n*h,w];var E=Math.floor(n*h/w);return[E,n*h-E*w,w]}function co(t,a,r){if(t>2958465||t<0)return null;var n=t|0,l=Math.floor(86400*(t-n)),d=0,f=[],h={D:n,T:l,u:86400*(t-n)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),a&&a.date1904&&(n+=1462),h.u>.9999&&(h.u=0,++l==86400&&(h.T=l=0,++n,++h.D)),n===60)f=r?[1317,10,29]:[1900,2,29],d=3;else if(n===0)f=r?[1317,8,29]:[1900,1,0],d=6;else{n>60&&--n;var b=new Date(1900,0,1);b.setDate(b.getDate()+n-1),f=[b.getFullYear(),b.getMonth()+1,b.getDate()],d=b.getDay(),n<60&&(d=(d+6)%7),r&&(d=m8(b,f))}return h.y=f[0],h.m=f[1],h.d=f[2],h.S=l%60,l=Math.floor(l/60),h.M=l%60,l=Math.floor(l/60),h.H=l,h.q=d,h}var Iw=new Date(1899,11,31,0,0,0),d8=Iw.getTime(),u8=new Date(1900,2,1,0,0,0);function Ow(t,a){var r=t.getTime();return a?r-=1461*24*60*60*1e3:t>=u8&&(r+=1440*60*1e3),(r-(d8+(t.getTimezoneOffset()-Iw.getTimezoneOffset())*6e4))/(1440*60*1e3)}function fg(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function f8(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function x8(t){var a=t<0?12:11,r=fg(t.toFixed(12));return r.length<=a||(r=t.toPrecision(10),r.length<=a)?r:t.toExponential(5)}function h8(t){var a=fg(t.toFixed(11));return a.length>(t<0?12:11)||a==="0"||a==="-0"?t.toPrecision(6):a}function K0(t){var a=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return a>=-4&&a<=-1?r=t.toPrecision(10+a):Math.abs(a)<=9?r=x8(t):a===10?r=t.toFixed(10).substr(0,12):r=h8(t),fg(f8(r.toUpperCase()))}function wo(t,a){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):K0(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return mn(14,Ow(t,a&&a.date1904),a)}throw new Error("unsupported value in General format: "+t)}function m8(t,a){a[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function g8(t,a,r,n){var l="",d=0,f=0,h=r.y,b,g=0;switch(t){case 98:h=r.y+543;case 121:switch(a.length){case 1:case 2:b=h%100,g=2;break;default:b=h%1e4,g=4;break}break;case 109:switch(a.length){case 1:case 2:b=r.m,g=a.length;break;case 3:return lm[r.m-1][1];case 5:return lm[r.m-1][0];default:return lm[r.m-1][2]}break;case 100:switch(a.length){case 1:case 2:b=r.d,g=a.length;break;case 3:return i2[r.q][0];default:return i2[r.q][1]}break;case 104:switch(a.length){case 1:case 2:b=1+(r.H+11)%12,g=a.length;break;default:throw"bad hour format: "+a}break;case 72:switch(a.length){case 1:case 2:b=r.H,g=a.length;break;default:throw"bad hour format: "+a}break;case 77:switch(a.length){case 1:case 2:b=r.M,g=a.length;break;default:throw"bad minute format: "+a}break;case 115:if(a!="s"&&a!="ss"&&a!=".0"&&a!=".00"&&a!=".000")throw"bad second format: "+a;return r.u===0&&(a=="s"||a=="ss")?Tn(r.S,a.length):(n>=2?f=n===3?1e3:100:f=n===1?10:1,d=Math.round(f*(r.S+r.u)),d>=60*f&&(d=0),a==="s"?d===0?"0":""+d/f:(l=Tn(d,2+n),a==="ss"?l.substr(0,2):"."+l.substr(2,a.length-1)));case 90:switch(a){case"[h]":case"[hh]":b=r.D*24+r.H;break;case"[m]":case"[mm]":b=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":b=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+a}g=a.length===3?1:2;break;case 101:b=h,g=1;break}var w=g>0?Tn(b,g):"";return w}function Al(t){var a=3;if(t.length<=a)return t;for(var r=t.length%a,n=t.substr(0,r);r!=t.length;r+=a)n+=(n.length>0?",":"")+t.substr(r,a);return n}var Fw=/%/g;function p8(t,a,r){var n=a.replace(Fw,""),l=a.length-n.length;return Ii(t,n,r*Math.pow(10,2*l))+na("%",l)}function y8(t,a,r){for(var n=a.length-1;a.charCodeAt(n-1)===44;)--n;return Ii(t,a.substr(0,n),r/Math.pow(10,3*(a.length-n)))}function Lw(t,a){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+Lw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(n+1+(l+d)%l),r.indexOf("e")===-1){var f=Math.floor(Math.log(a)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,l)+"."+r.substr(2+l),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,g,w){return b+g+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var Bw=/# (\?+)( ?)\/( ?)(\d+)/;function b8(t,a,r){var n=parseInt(t[4],10),l=Math.round(a*n),d=Math.floor(l/n),f=l-d*n,h=n;return r+(d===0?"":""+d)+" "+(f===0?na(" ",t[1].length+1+t[4].length):ug(f,t[1].length)+t[2]+"/"+t[3]+Tn(h,t[4].length))}function v8(t,a,r){return r+(a===0?"":""+a)+na(" ",t[1].length+2+t[4].length)}var Pw=/^#*0*\.([0#]+)/,zw=/\).*[0#]/,Uw=/\(###\) ###\\?-####/;function bs(t){for(var a="",r,n=0;n!=t.length;++n)switch(r=t.charCodeAt(n)){case 35:break;case 63:a+=" ";break;case 48:a+="0";break;default:a+=String.fromCharCode(r)}return a}function o2(t,a){var r=Math.pow(10,a);return""+Math.round(t*r)/r}function c2(t,a){var r=t-Math.floor(t),n=Math.pow(10,a);return a<(""+Math.round(r*n)).length?0:Math.round(r*n)}function w8(t,a){return a<(""+Math.round((t-Math.floor(t))*Math.pow(10,a))).length?1:0}function N8(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function fn(t,a,r){if(t.charCodeAt(0)===40&&!a.match(zw)){var n=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fn("n",n,r):"("+fn("n",n,-r)+")"}if(a.charCodeAt(a.length-1)===44)return y8(t,a,r);if(a.indexOf("%")!==-1)return p8(t,a,r);if(a.indexOf("E")!==-1)return Lw(a,r);if(a.charCodeAt(0)===36)return"$"+fn(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),g=r<0?"-":"";if(a.match(/^00+$/))return g+gc(b,a.length);if(a.match(/^[#?]+$/))return l=gc(r,0),l==="0"&&(l=""),l.length>a.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(Bw))return b8(d,b,g);if(a.match(/^#+0+$/))return g+gc(b,a.length-a.indexOf("0"));if(d=a.match(Pw))return l=o2(r,d[1].length).replace(/^([^\.]+)$/,"$1."+bs(d[1])).replace(/\.$/,"."+bs(d[1])).replace(/\.(\d*)$/,function(D,A){return"."+A+na("0",bs(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return g+o2(b,d[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return g+Al(gc(b,0));if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fn(t,a,-r):Al(""+(Math.floor(r)+w8(r,d[1].length)))+"."+Tn(c2(r,d[1].length),d[1].length);if(d=a.match(/^#,#*,#0/))return fn(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=vc(fn(t,a.replace(/[\\-]/g,""),r)),f=0,vc(vc(a.replace(/\\/g,"")).replace(/[0#]/g,function(D){return f<l.length?l.charAt(f++):D==="0"?"0":""}));if(a.match(Uw))return l=fn(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=rf(b,Math.pow(10,f)-1,!1),l=""+g,w=Ii("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=ef(h[2],f),w.length<d[4].length&&(w=bs(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=rf(b,Math.pow(10,f)-1,!0),g+(h[0]||(h[1]?"":"0"))+" "+(h[1]?ug(h[1],f)+d[2]+"/"+d[3]+ef(h[2],f):na(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=gc(r,0),a.length<=l.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0?]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var k=a.indexOf(".")-f,E=a.length-l.length-k;return bs(a.substr(0,k)+l+a.substr(a.length-E))}if(d=a.match(/^00,000\.([#0]*0)$/))return f=c2(r,d[1].length),r<0?"-"+fn(t,a,-r):Al(N8(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(D){return"00,"+(D.length<3?Tn(0,3-D.length):"")+D})+"."+Tn(f,d[1].length);switch(a){case"###,##0.00":return fn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var S=Al(gc(b,0));return S!=="0"?g+S:"";case"###,###.00":return fn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+a+"|")}function k8(t,a,r){for(var n=a.length-1;a.charCodeAt(n-1)===44;)--n;return Ii(t,a.substr(0,n),r/Math.pow(10,3*(a.length-n)))}function j8(t,a,r){var n=a.replace(Fw,""),l=a.length-n.length;return Ii(t,n,r*Math.pow(10,2*l))+na("%",l)}function Hw(t,a){var r,n=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+Hw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(n+1+(l+d)%l),!r.match(/[Ee]/)){var f=Math.floor(Math.log(a)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,g,w){return b+g+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(n);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function si(t,a,r){if(t.charCodeAt(0)===40&&!a.match(zw)){var n=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?si("n",n,r):"("+si("n",n,-r)+")"}if(a.charCodeAt(a.length-1)===44)return k8(t,a,r);if(a.indexOf("%")!==-1)return j8(t,a,r);if(a.indexOf("E")!==-1)return Hw(a,r);if(a.charCodeAt(0)===36)return"$"+si(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),g=r<0?"-":"";if(a.match(/^00+$/))return g+Tn(b,a.length);if(a.match(/^[#?]+$/))return l=""+r,r===0&&(l=""),l.length>a.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(Bw))return v8(d,b,g);if(a.match(/^#+0+$/))return g+Tn(b,a.length-a.indexOf("0"));if(d=a.match(Pw))return l=(""+r).replace(/^([^\.]+)$/,"$1."+bs(d[1])).replace(/\.$/,"."+bs(d[1])),l=l.replace(/\.(\d*)$/,function(D,A){return"."+A+na("0",bs(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return g+(""+b).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return g+Al(""+b);if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+si(t,a,-r):Al(""+r)+"."+na("0",d[1].length);if(d=a.match(/^#,#*,#0/))return si(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=vc(si(t,a.replace(/[\\-]/g,""),r)),f=0,vc(vc(a.replace(/\\/g,"")).replace(/[0#]/g,function(D){return f<l.length?l.charAt(f++):D==="0"?"0":""}));if(a.match(Uw))return l=si(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=rf(b,Math.pow(10,f)-1,!1),l=""+g,w=Ii("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=ef(h[2],f),w.length<d[4].length&&(w=bs(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=rf(b,Math.pow(10,f)-1,!0),g+(h[0]||(h[1]?"":"0"))+" "+(h[1]?ug(h[1],f)+d[2]+"/"+d[3]+ef(h[2],f):na(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=""+r,a.length<=l.length?l:bs(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var k=a.indexOf(".")-f,E=a.length-l.length-k;return bs(a.substr(0,k)+l+a.substr(a.length-E))}if(d=a.match(/^00,000\.([#0]*0)$/))return r<0?"-"+si(t,a,-r):Al(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(D){return"00,"+(D.length<3?Tn(0,3-D.length):"")+D})+"."+Tn(0,d[1].length);switch(a){case"###,###":case"##,###":case"#,###":var S=Al(""+b);return S!=="0"?g+S:"";default:if(a.match(/\.[0#?]*$/))return si(t,a.slice(0,a.lastIndexOf(".")),r)+bs(a.slice(a.lastIndexOf(".")))}throw new Error("unsupported format |"+a+"|")}function Ii(t,a,r){return(r|0)===r?si(t,a,r):fn(t,a,r)}function E8(t){for(var a=[],r=!1,n=0,l=0;n<t.length;++n)switch(t.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:a[a.length]=t.substr(l,n-l),l=n+1}if(a[a.length]=t.substr(l),r===!0)throw new Error("Format |"+t+"| unterminated string ");return a}var Vw=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Mc(t){for(var a=0,r="",n="";a<t.length;)switch(r=t.charAt(a)){case"G":tf(t,a)&&(a+=6),a++;break;case'"':for(;t.charCodeAt(++a)!==34&&a<t.length;);++a;break;case"\\":a+=2;break;case"_":a+=2;break;case"@":++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(a,3).toUpperCase()==="A/P"||t.substr(a,5).toUpperCase()==="AM/PM"||t.substr(a,5).toUpperCase()==="/")return!0;++a;break;case"[":for(n=r;t.charAt(a++)!=="]"&&a<t.length;)n+=t.charAt(a);if(n.match(Vw))return!0;break;case".":case"0":case"#":for(;a<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++a))>-1||r=="\\"&&t.charAt(a+1)=="-"&&"0#".indexOf(t.charAt(a+2))>-1););break;case"?":for(;t.charAt(++a)===r;);break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;);break;case" ":++a;break;default:++a;break}return!1}function C8(t,a,r,n){for(var l=[],d="",f=0,h="",b="t",g,w,k,E="H";f<t.length;)switch(h=t.charAt(f)){case"G":if(!tf(t,f))throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"G",v:"General"},f+=7;break;case'"':for(d="";(k=t.charCodeAt(++f))!==34&&f<t.length;)d+=String.fromCharCode(k);l[l.length]={t:"t",v:d},++f;break;case"\\":var S=t.charAt(++f),D=S==="("||S===")"?S:"t";l[l.length]={t:D,v:S},++f;break;case"_":l[l.length]={t:"t",v:" "},f+=2;break;case"@":l[l.length]={t:"T",v:a},++f;break;case"B":case"b":if(t.charAt(f+1)==="1"||t.charAt(f+1)==="2"){if(g==null&&(g=co(a,r,t.charAt(f+1)==="2"),g==null))return"";l[l.length]={t:"X",v:t.substr(f,2)},b=h,f+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(a<0||g==null&&(g=co(a,r),g==null))return"";for(d=h;++f<t.length&&t.charAt(f).toLowerCase()===h;)d+=h;h==="m"&&b.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=E),l[l.length]={t:h,v:d},b=h;break;case"A":case"a":case"":var A={t:h,v:h};if(g==null&&(g=co(a,r)),t.substr(f,3).toUpperCase()==="A/P"?(g!=null&&(A.v=g.H>=12?"P":"A"),A.t="T",E="h",f+=3):t.substr(f,5).toUpperCase()==="AM/PM"?(g!=null&&(A.v=g.H>=12?"PM":"AM"),A.t="T",f+=5,E="h"):t.substr(f,5).toUpperCase()==="/"?(g!=null&&(A.v=g.H>=12?"":""),A.t="T",f+=5,E="h"):(A.t="t",++f),g==null&&A.t==="T")return"";l[l.length]=A,b=h;break;case"[":for(d=h;t.charAt(f++)!=="]"&&f<t.length;)d+=t.charAt(f);if(d.slice(-1)!=="]")throw'unterminated "[" block: |'+d+"|";if(d.match(Vw)){if(g==null&&(g=co(a,r),g==null))return"";l[l.length]={t:"Z",v:d.toLowerCase()},b=d.charAt(1)}else d.indexOf("$")>-1&&(d=(d.match(/\$([^-\[\]]*)/)||[])[1]||"$",Mc(t)||(l[l.length]={t:"t",v:d}));break;case".":if(g!=null){for(d=h;++f<t.length&&(h=t.charAt(f))==="0";)d+=h;l[l.length]={t:"s",v:d};break}case"0":case"#":for(d=h;++f<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(f))>-1;)d+=h;l[l.length]={t:"n",v:d};break;case"?":for(d=h;t.charAt(++f)===h;)d+=h;l[l.length]={t:h,v:d},b=h;break;case"*":++f,(t.charAt(f)==" "||t.charAt(f)=="*")&&++f;break;case"(":case")":l[l.length]={t:n===1?"t":h,v:h},++f;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(d=h;f<t.length&&"0123456789".indexOf(t.charAt(++f))>-1;)d+=t.charAt(f);l[l.length]={t:"D",v:d};break;case" ":l[l.length]={t:h,v:h},++f;break;case"$":l[l.length]={t:"t",v:"$"},++f;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"t",v:h},++f;break}var M=0,I=0,F;for(f=l.length-1,b="t";f>=0;--f)switch(l[f].t){case"h":case"H":l[f].t=E,b="h",M<1&&(M=1);break;case"s":(F=l[f].v.match(/\.0+$/))&&(I=Math.max(I,F[0].length-1)),M<3&&(M=3);case"d":case"y":case"M":case"e":b=l[f].t;break;case"m":b==="s"&&(l[f].t="M",M<2&&(M=2));break;case"X":break;case"Z":M<1&&l[f].v.match(/[Hh]/)&&(M=1),M<2&&l[f].v.match(/[Mm]/)&&(M=2),M<3&&l[f].v.match(/[Ss]/)&&(M=3)}switch(M){case 0:break;case 1:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M),g.M>=60&&(g.M=0,++g.H);break;case 2:g.u>=.5&&(g.u=0,++g.S),g.S>=60&&(g.S=0,++g.M);break}var T="",L;for(f=0;f<l.length;++f)switch(l[f].t){case"t":case"T":case" ":case"D":break;case"X":l[f].v="",l[f].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[f].v=g8(l[f].t.charCodeAt(0),l[f].v,g,I),l[f].t="t";break;case"n":case"?":for(L=f+1;l[L]!=null&&((h=l[L].t)==="?"||h==="D"||(h===" "||h==="t")&&l[L+1]!=null&&(l[L+1].t==="?"||l[L+1].t==="t"&&l[L+1].v==="/")||l[f].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(l[L].v==="/"||l[L].v===" "&&l[L+1]!=null&&l[L+1].t=="?"));)l[f].v+=l[L].v,l[L]={v:"",t:";"},++L;T+=l[f].v,f=L-1;break;case"G":l[f].t="t",l[f].v=wo(a,r);break}var H="",U,B;if(T.length>0){T.charCodeAt(0)==40?(U=a<0&&T.charCodeAt(0)===45?-a:a,B=Ii("n",T,U)):(U=a<0&&n>1?-a:a,B=Ii("n",T,U),U<0&&l[0]&&l[0].t=="t"&&(B=B.substr(1),l[0].v="-"+l[0].v)),L=B.length-1;var P=l.length;for(f=0;f<l.length;++f)if(l[f]!=null&&l[f].t!="t"&&l[f].v.indexOf(".")>-1){P=f;break}var z=l.length;if(P===l.length&&B.indexOf("E")===-1){for(f=l.length-1;f>=0;--f)l[f]==null||"n?".indexOf(l[f].t)===-1||(L>=l[f].v.length-1?(L-=l[f].v.length,l[f].v=B.substr(L+1,l[f].v.length)):L<0?l[f].v="":(l[f].v=B.substr(0,L+1),L=-1),l[f].t="t",z=f);L>=0&&z<l.length&&(l[z].v=B.substr(0,L+1)+l[z].v)}else if(P!==l.length&&B.indexOf("E")===-1){for(L=B.indexOf(".")-1,f=P;f>=0;--f)if(!(l[f]==null||"n?".indexOf(l[f].t)===-1)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")-1:l[f].v.length-1,H=l[f].v.substr(w+1);w>=0;--w)L>=0&&(l[f].v.charAt(w)==="0"||l[f].v.charAt(w)==="#")&&(H=B.charAt(L--)+H);l[f].v=H,l[f].t="t",z=f}for(L>=0&&z<l.length&&(l[z].v=B.substr(0,L+1)+l[z].v),L=B.indexOf(".")+1,f=P;f<l.length;++f)if(!(l[f]==null||"n?(".indexOf(l[f].t)===-1&&f!==P)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")+1:0,H=l[f].v.substr(0,w);w<l[f].v.length;++w)L<B.length&&(H+=B.charAt(L++));l[f].v=H,l[f].t="t",z=f}}}for(f=0;f<l.length;++f)l[f]!=null&&"n?".indexOf(l[f].t)>-1&&(U=n>1&&a<0&&f>0&&l[f-1].v==="-"?-a:a,l[f].v=Ii(l[f].t,l[f].v,U),l[f].t="t");var Z="";for(f=0;f!==l.length;++f)l[f]!=null&&(Z+=l[f].v);return Z}var d2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function u2(t,a){if(a==null)return!1;var r=parseFloat(a[2]);switch(a[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function S8(t,a){var r=E8(t),n=r.length,l=r[n-1].indexOf("@");if(n<4&&l>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof a!="number")return[4,r.length===4||l>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=l>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=l>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=l>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var d=a>0?r[0]:a<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,d];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var f=r[0].match(d2),h=r[1].match(d2);return u2(a,f)?[n,r[0]]:u2(a,h)?[n,r[1]]:[n,r[f!=null&&h!=null?2:1]]}return[n,d]}function mn(t,a,r){r==null&&(r={});var n="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?n=r.dateNF:n=t;break;case"number":t==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:tr)[t],n==null&&(n=r.table&&r.table[l2[t]]||tr[l2[t]]),n==null&&(n=c8[t]||"General");break}if(tf(n,0))return wo(a,r);a instanceof Date&&(a=Ow(a,r.date1904));var l=S8(n,a);if(tf(l[1]))return wo(a,r);if(a===!0)a="TRUE";else if(a===!1)a="FALSE";else if(a===""||a==null)return"";return C8(l[1],a,r,l[0])}function xo(t,a){if(typeof a!="number"){a=+a||-1;for(var r=0;r<392;++r){if(tr[r]==null){a<0&&(a=r);continue}if(tr[r]==t){a=r;break}}a<0&&(a=391)}return tr[a]=t,a}function Gw(){tr=o8()}var A8={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Yw=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function _8(t){var a=typeof t=="number"?tr[t]:t;return a=a.replace(Yw,"(\\d+)"),new RegExp("^"+a+"$")}function T8(t,a,r){var n=-1,l=-1,d=-1,f=-1,h=-1,b=-1;(a.match(Yw)||[]).forEach(function(k,E){var S=parseInt(r[E+1],10);switch(k.toLowerCase().charAt(0)){case"y":n=S;break;case"d":d=S;break;case"h":f=S;break;case"s":b=S;break;case"m":f>=0?h=S:l=S;break}}),b>=0&&h==-1&&l>=0&&(h=l,l=-1);var g=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(d>=1?d:1)).slice(-2);g.length==7&&(g="0"+g),g.length==8&&(g="20"+g);var w=("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(b>=0?b:0)).slice(-2);return f==-1&&h==-1&&b==-1?g:n==-1&&l==-1&&d==-1?w:g+"T"+w}var D8=function(){var t={};t.version="1.2.0";function a(){for(var B=0,P=new Array(256),z=0;z!=256;++z)B=z,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,B=B&1?-306674912^B>>>1:B>>>1,P[z]=B;return typeof Int32Array<"u"?new Int32Array(P):P}var r=a();function n(B){var P=0,z=0,Z=0,te=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Z=0;Z!=256;++Z)te[Z]=B[Z];for(Z=0;Z!=256;++Z)for(z=B[Z],P=256+Z;P<4096;P+=256)z=te[P]=z>>>8^B[z&255];var G=[];for(Z=1;Z!=16;++Z)G[Z-1]=typeof Int32Array<"u"?te.subarray(Z*256,Z*256+256):te.slice(Z*256,Z*256+256);return G}var l=n(r),d=l[0],f=l[1],h=l[2],b=l[3],g=l[4],w=l[5],k=l[6],E=l[7],S=l[8],D=l[9],A=l[10],M=l[11],I=l[12],F=l[13],T=l[14];function L(B,P){for(var z=P^-1,Z=0,te=B.length;Z<te;)z=z>>>8^r[(z^B.charCodeAt(Z++))&255];return~z}function H(B,P){for(var z=P^-1,Z=B.length-15,te=0;te<Z;)z=T[B[te++]^z&255]^F[B[te++]^z>>8&255]^I[B[te++]^z>>16&255]^M[B[te++]^z>>>24]^A[B[te++]]^D[B[te++]]^S[B[te++]]^E[B[te++]]^k[B[te++]]^w[B[te++]]^g[B[te++]]^b[B[te++]]^h[B[te++]]^f[B[te++]]^d[B[te++]]^r[B[te++]];for(Z+=15;te<Z;)z=z>>>8^r[(z^B[te++])&255];return~z}function U(B,P){for(var z=P^-1,Z=0,te=B.length,G=0,se=0;Z<te;)G=B.charCodeAt(Z++),G<128?z=z>>>8^r[(z^G)&255]:G<2048?(z=z>>>8^r[(z^(192|G>>6&31))&255],z=z>>>8^r[(z^(128|G&63))&255]):G>=55296&&G<57344?(G=(G&1023)+64,se=B.charCodeAt(Z++)&1023,z=z>>>8^r[(z^(240|G>>8&7))&255],z=z>>>8^r[(z^(128|G>>2&63))&255],z=z>>>8^r[(z^(128|se>>6&15|(G&3)<<4))&255],z=z>>>8^r[(z^(128|se&63))&255]):(z=z>>>8^r[(z^(224|G>>12&15))&255],z=z>>>8^r[(z^(128|G>>6&63))&255],z=z>>>8^r[(z^(128|G&63))&255]);return~z}return t.table=r,t.bstr=L,t.buf=H,t.str=U,t}(),pr=function(){var a={};a.version="1.2.1";function r(de,he){for(var ge=de.split("/"),ve=he.split("/"),Ne=0,Se=0,Ge=Math.min(ge.length,ve.length);Ne<Ge;++Ne){if(Se=ge[Ne].length-ve[Ne].length)return Se;if(ge[Ne]!=ve[Ne])return ge[Ne]<ve[Ne]?-1:1}return ge.length-ve.length}function n(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:n(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(0,he+1)}function l(de){if(de.charAt(de.length-1)=="/")return l(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(he+1)}function d(de,he){typeof he=="string"&&(he=new Date(he));var ge=he.getHours();ge=ge<<6|he.getMinutes(),ge=ge<<5|he.getSeconds()>>>1,de.write_shift(2,ge);var ve=he.getFullYear()-1980;ve=ve<<4|he.getMonth()+1,ve=ve<<5|he.getDate(),de.write_shift(2,ve)}function f(de){var he=de.read_shift(2)&65535,ge=de.read_shift(2)&65535,ve=new Date,Ne=ge&31;ge>>>=5;var Se=ge&15;ge>>>=4,ve.setMilliseconds(0),ve.setFullYear(ge+1980),ve.setMonth(Se-1),ve.setDate(Ne);var Ge=he&31;he>>>=5;var rt=he&63;return he>>>=6,ve.setHours(he),ve.setMinutes(rt),ve.setSeconds(Ge<<1),ve}function h(de){qa(de,0);for(var he={},ge=0;de.l<=de.length-4;){var ve=de.read_shift(2),Ne=de.read_shift(2),Se=de.l+Ne,Ge={};switch(ve){case 21589:ge=de.read_shift(1),ge&1&&(Ge.mtime=de.read_shift(4)),Ne>5&&(ge&2&&(Ge.atime=de.read_shift(4)),ge&4&&(Ge.ctime=de.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}de.l=Se,he[ve]=Ge}return he}var b;function g(){return b||(b={})}function w(de,he){if(de[0]==80&&de[1]==75)return Bn(de,he);if((de[0]|32)==109&&(de[1]|32)==105)return Vi(de,he);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var ge=3,ve=512,Ne=0,Se=0,Ge=0,rt=0,Fe=0,Xe=[],We=de.slice(0,512);qa(We,0);var ct=k(We);switch(ge=ct[0],ge){case 3:ve=512;break;case 4:ve=4096;break;case 0:if(ct[1]==0)return Bn(de,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+ge)}ve!==512&&(We=de.slice(0,ve),qa(We,28));var xt=de.slice(0,ve);E(We,ge);var mt=We.read_shift(4,"i");if(ge===3&&mt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+mt);We.l+=4,Ge=We.read_shift(4,"i"),We.l+=4,We.chk("00100000","Mini Stream Cutoff Size: "),rt=We.read_shift(4,"i"),Ne=We.read_shift(4,"i"),Fe=We.read_shift(4,"i"),Se=We.read_shift(4,"i");for(var pt=-1,bt=0;bt<109&&(pt=We.read_shift(4,"i"),!(pt<0));++bt)Xe[bt]=pt;var Pt=S(de,ve);M(Fe,Se,Pt,ve,Xe);var tt=F(Pt,Ge,Xe,ve);tt[Ge].name="!Directory",Ne>0&&rt!==se&&(tt[rt].name="!MiniFAT"),tt[Xe[0]].name="!FAT",tt.fat_addrs=Xe,tt.ssz=ve;var kr={},zt=[],Qa=[],Pn=[];T(Ge,tt,Pt,zt,Ne,kr,Qa,rt),D(Qa,Pn,zt),zt.shift();var Qt={FileIndex:Qa,FullPaths:Pn};return he&&he.raw&&(Qt.raw={header:xt,sectors:Pt}),Qt}function k(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(ie,"Header Signature: "),de.l+=16;var he=de.read_shift(2,"u");return[de.read_shift(2,"u"),he]}function E(de,he){var ge=9;switch(de.l+=2,ge=de.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+ge);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+ge);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ge)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function S(de,he){for(var ge=Math.ceil(de.length/he)-1,ve=[],Ne=1;Ne<ge;++Ne)ve[Ne-1]=de.slice(Ne*he,(Ne+1)*he);return ve[ge-1]=de.slice(ge*he),ve}function D(de,he,ge){for(var ve=0,Ne=0,Se=0,Ge=0,rt=0,Fe=ge.length,Xe=[],We=[];ve<Fe;++ve)Xe[ve]=We[ve]=ve,he[ve]=ge[ve];for(;rt<We.length;++rt)ve=We[rt],Ne=de[ve].L,Se=de[ve].R,Ge=de[ve].C,Xe[ve]===ve&&(Ne!==-1&&Xe[Ne]!==Ne&&(Xe[ve]=Xe[Ne]),Se!==-1&&Xe[Se]!==Se&&(Xe[ve]=Xe[Se])),Ge!==-1&&(Xe[Ge]=ve),Ne!==-1&&ve!=Xe[ve]&&(Xe[Ne]=Xe[ve],We.lastIndexOf(Ne)<rt&&We.push(Ne)),Se!==-1&&ve!=Xe[ve]&&(Xe[Se]=Xe[ve],We.lastIndexOf(Se)<rt&&We.push(Se));for(ve=1;ve<Fe;++ve)Xe[ve]===ve&&(Se!==-1&&Xe[Se]!==Se?Xe[ve]=Xe[Se]:Ne!==-1&&Xe[Ne]!==Ne&&(Xe[ve]=Xe[Ne]));for(ve=1;ve<Fe;++ve)if(de[ve].type!==0){if(rt=ve,rt!=Xe[rt])do rt=Xe[rt],he[ve]=he[rt]+"/"+he[ve];while(rt!==0&&Xe[rt]!==-1&&rt!=Xe[rt]);Xe[ve]=-1}for(he[0]+="/",ve=1;ve<Fe;++ve)de[ve].type!==2&&(he[ve]+="/")}function A(de,he,ge){for(var ve=de.start,Ne=de.size,Se=[],Ge=ve;ge&&Ne>0&&Ge>=0;)Se.push(he.slice(Ge*G,Ge*G+G)),Ne-=G,Ge=io(ge,Ge*4);return Se.length===0?Ma(0):El(Se).slice(0,de.size)}function M(de,he,ge,ve,Ne){var Se=se;if(de===se){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var Ge=ge[de],rt=(ve>>>2)-1;if(!Ge)return;for(var Fe=0;Fe<rt&&(Se=io(Ge,Fe*4))!==se;++Fe)Ne.push(Se);M(io(Ge,ve-4),he-1,ge,ve,Ne)}}function I(de,he,ge,ve,Ne){var Se=[],Ge=[];Ne||(Ne=[]);var rt=ve-1,Fe=0,Xe=0;for(Fe=he;Fe>=0;){Ne[Fe]=!0,Se[Se.length]=Fe,Ge.push(de[Fe]);var We=ge[Math.floor(Fe*4/ve)];if(Xe=Fe*4&rt,ve<4+Xe)throw new Error("FAT boundary crossed: "+Fe+" 4 "+ve);if(!de[We])break;Fe=io(de[We],Xe)}return{nodes:Se,data:w2([Ge])}}function F(de,he,ge,ve){var Ne=de.length,Se=[],Ge=[],rt=[],Fe=[],Xe=ve-1,We=0,ct=0,xt=0,mt=0;for(We=0;We<Ne;++We)if(rt=[],xt=We+he,xt>=Ne&&(xt-=Ne),!Ge[xt]){Fe=[];var pt=[];for(ct=xt;ct>=0;){pt[ct]=!0,Ge[ct]=!0,rt[rt.length]=ct,Fe.push(de[ct]);var bt=ge[Math.floor(ct*4/ve)];if(mt=ct*4&Xe,ve<4+mt)throw new Error("FAT boundary crossed: "+ct+" 4 "+ve);if(!de[bt]||(ct=io(de[bt],mt),pt[ct]))break}Se[xt]={nodes:rt,data:w2([Fe])}}return Se}function T(de,he,ge,ve,Ne,Se,Ge,rt){for(var Fe=0,Xe=ve.length?2:0,We=he[de].data,ct=0,xt=0,mt;ct<We.length;ct+=128){var pt=We.slice(ct,ct+128);qa(pt,64),xt=pt.read_shift(2),mt=pg(pt,0,xt-Xe),ve.push(mt);var bt={name:mt,type:pt.read_shift(1),color:pt.read_shift(1),L:pt.read_shift(4,"i"),R:pt.read_shift(4,"i"),C:pt.read_shift(4,"i"),clsid:pt.read_shift(16),state:pt.read_shift(4,"i"),start:0,size:0},Pt=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);Pt!==0&&(bt.ct=L(pt,pt.l-8));var tt=pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2)+pt.read_shift(2);tt!==0&&(bt.mt=L(pt,pt.l-8)),bt.start=pt.read_shift(4,"i"),bt.size=pt.read_shift(4,"i"),bt.size<0&&bt.start<0&&(bt.size=bt.type=0,bt.start=se,bt.name=""),bt.type===5?(Fe=bt.start,Ne>0&&Fe!==se&&(he[Fe].name="!StreamData")):bt.size>=4096?(bt.storage="fat",he[bt.start]===void 0&&(he[bt.start]=I(ge,bt.start,he.fat_addrs,he.ssz)),he[bt.start].name=bt.name,bt.content=he[bt.start].data.slice(0,bt.size)):(bt.storage="minifat",bt.size<0?bt.size=0:Fe!==se&&bt.start!==se&&he[Fe]&&(bt.content=A(bt,he[Fe].data,(he[rt]||{}).data))),bt.content&&qa(bt.content,0),Se[mt]=bt,Ge.push(bt)}}function L(de,he){return new Date((qs(de,he+4)/1e7*Math.pow(2,32)+qs(de,he)/1e7-11644473600)*1e3)}function H(de,he){return g(),w(b.readFileSync(de),he)}function U(de,he){var ge=he&&he.type;switch(ge||fr&&Buffer.isBuffer(de)&&(ge="buffer"),ge||"base64"){case"file":return H(de,he);case"base64":return w(An(Js(de)),he);case"binary":return w(An(de),he)}return w(de,he)}function B(de,he){var ge=he||{},ve=ge.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=ve+"/",de.FileIndex[0]={name:ve,type:5}),ge.CLSID&&(de.FileIndex[0].clsid=ge.CLSID),P(de)}function P(de){var he="Sh33tJ5";if(!pr.find(de,"/"+he)){var ge=Ma(4);ge[0]=55,ge[1]=ge[3]=50,ge[2]=54,de.FileIndex.push({name:he,type:2,content:ge,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+he),z(de)}}function z(de,he){B(de);for(var ge=!1,ve=!1,Ne=de.FullPaths.length-1;Ne>=0;--Ne){var Se=de.FileIndex[Ne];switch(Se.type){case 0:ve?ge=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:ve=!0,isNaN(Se.R*Se.L*Se.C)&&(ge=!0),Se.R>-1&&Se.L>-1&&Se.R==Se.L&&(ge=!0);break;default:ge=!0;break}}if(!(!ge&&!he)){var Ge=new Date(1987,1,19),rt=0,Fe=Object.create?Object.create(null):{},Xe=[];for(Ne=0;Ne<de.FullPaths.length;++Ne)Fe[de.FullPaths[Ne]]=!0,de.FileIndex[Ne].type!==0&&Xe.push([de.FullPaths[Ne],de.FileIndex[Ne]]);for(Ne=0;Ne<Xe.length;++Ne){var We=n(Xe[Ne][0]);ve=Fe[We],ve||(Xe.push([We,{name:l(We).replace("/",""),type:1,clsid:q,ct:Ge,mt:Ge,content:null}]),Fe[We]=!0)}for(Xe.sort(function(mt,pt){return r(mt[0],pt[0])}),de.FullPaths=[],de.FileIndex=[],Ne=0;Ne<Xe.length;++Ne)de.FullPaths[Ne]=Xe[Ne][0],de.FileIndex[Ne]=Xe[Ne][1];for(Ne=0;Ne<Xe.length;++Ne){var ct=de.FileIndex[Ne],xt=de.FullPaths[Ne];if(ct.name=l(xt).replace("/",""),ct.L=ct.R=ct.C=-(ct.color=1),ct.size=ct.content?ct.content.length:0,ct.start=0,ct.clsid=ct.clsid||q,Ne===0)ct.C=Xe.length>1?1:-1,ct.size=0,ct.type=5;else if(xt.slice(-1)=="/"){for(rt=Ne+1;rt<Xe.length&&n(de.FullPaths[rt])!=xt;++rt);for(ct.C=rt>=Xe.length?-1:rt,rt=Ne+1;rt<Xe.length&&n(de.FullPaths[rt])!=n(xt);++rt);ct.R=rt>=Xe.length?-1:rt,ct.type=1}else n(de.FullPaths[Ne+1]||"")==n(xt)&&(ct.R=Ne+1),ct.type=2}}}function Z(de,he){var ge=he||{};if(ge.fileType=="mad")return ca(de,ge);switch(z(de),ge.fileType){case"zip":return Jr(de,ge)}var ve=function(mt){for(var pt=0,bt=0,Pt=0;Pt<mt.FileIndex.length;++Pt){var tt=mt.FileIndex[Pt];if(tt.content){var kr=tt.content.length;kr>0&&(kr<4096?pt+=kr+63>>6:bt+=kr+511>>9)}}for(var zt=mt.FullPaths.length+3>>2,Qa=pt+7>>3,Pn=pt+127>>7,Qt=Qa+bt+zt+Pn,Jt=Qt+127>>7,er=Jt<=109?0:Math.ceil((Jt-109)/127);Qt+Jt+er+127>>7>Jt;)er=++Jt<=109?0:Math.ceil((Jt-109)/127);var ms=[1,er,Jt,Pn,zt,bt,pt,0];return mt.FileIndex[0].size=pt<<6,ms[7]=(mt.FileIndex[0].start=ms[0]+ms[1]+ms[2]+ms[3]+ms[4]+ms[5])+(ms[6]+7>>3),ms}(de),Ne=Ma(ve[7]<<9),Se=0,Ge=0;{for(Se=0;Se<8;++Se)Ne.write_shift(1,Y[Se]);for(Se=0;Se<8;++Se)Ne.write_shift(2,0);for(Ne.write_shift(2,62),Ne.write_shift(2,3),Ne.write_shift(2,65534),Ne.write_shift(2,9),Ne.write_shift(2,6),Se=0;Se<3;++Se)Ne.write_shift(2,0);for(Ne.write_shift(4,0),Ne.write_shift(4,ve[2]),Ne.write_shift(4,ve[0]+ve[1]+ve[2]+ve[3]-1),Ne.write_shift(4,0),Ne.write_shift(4,4096),Ne.write_shift(4,ve[3]?ve[0]+ve[1]+ve[2]-1:se),Ne.write_shift(4,ve[3]),Ne.write_shift(-4,ve[1]?ve[0]-1:se),Ne.write_shift(4,ve[1]),Se=0;Se<109;++Se)Ne.write_shift(-4,Se<ve[2]?ve[1]+Se:-1)}if(ve[1])for(Ge=0;Ge<ve[1];++Ge){for(;Se<236+Ge*127;++Se)Ne.write_shift(-4,Se<ve[2]?ve[1]+Se:-1);Ne.write_shift(-4,Ge===ve[1]-1?se:Ge+1)}var rt=function(mt){for(Ge+=mt;Se<Ge-1;++Se)Ne.write_shift(-4,Se+1);mt&&(++Se,Ne.write_shift(-4,se))};for(Ge=Se=0,Ge+=ve[1];Se<Ge;++Se)Ne.write_shift(-4,ce.DIFSECT);for(Ge+=ve[2];Se<Ge;++Se)Ne.write_shift(-4,ce.FATSECT);rt(ve[3]),rt(ve[4]);for(var Fe=0,Xe=0,We=de.FileIndex[0];Fe<de.FileIndex.length;++Fe)We=de.FileIndex[Fe],We.content&&(Xe=We.content.length,!(Xe<4096)&&(We.start=Ge,rt(Xe+511>>9)));for(rt(ve[6]+7>>3);Ne.l&511;)Ne.write_shift(-4,ce.ENDOFCHAIN);for(Ge=Se=0,Fe=0;Fe<de.FileIndex.length;++Fe)We=de.FileIndex[Fe],We.content&&(Xe=We.content.length,!(!Xe||Xe>=4096)&&(We.start=Ge,rt(Xe+63>>6)));for(;Ne.l&511;)Ne.write_shift(-4,ce.ENDOFCHAIN);for(Se=0;Se<ve[4]<<2;++Se){var ct=de.FullPaths[Se];if(!ct||ct.length===0){for(Fe=0;Fe<17;++Fe)Ne.write_shift(4,0);for(Fe=0;Fe<3;++Fe)Ne.write_shift(4,-1);for(Fe=0;Fe<12;++Fe)Ne.write_shift(4,0);continue}We=de.FileIndex[Se],Se===0&&(We.start=We.size?We.start-1:se);var xt=Se===0&&ge.root||We.name;if(Xe=2*(xt.length+1),Ne.write_shift(64,xt,"utf16le"),Ne.write_shift(2,Xe),Ne.write_shift(1,We.type),Ne.write_shift(1,We.color),Ne.write_shift(-4,We.L),Ne.write_shift(-4,We.R),Ne.write_shift(-4,We.C),We.clsid)Ne.write_shift(16,We.clsid,"hex");else for(Fe=0;Fe<4;++Fe)Ne.write_shift(4,0);Ne.write_shift(4,We.state||0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,0),Ne.write_shift(4,We.start),Ne.write_shift(4,We.size),Ne.write_shift(4,0)}for(Se=1;Se<de.FileIndex.length;++Se)if(We=de.FileIndex[Se],We.size>=4096)if(Ne.l=We.start+1<<9,fr&&Buffer.isBuffer(We.content))We.content.copy(Ne,Ne.l,0,We.size),Ne.l+=We.size+511&-512;else{for(Fe=0;Fe<We.size;++Fe)Ne.write_shift(1,We.content[Fe]);for(;Fe&511;++Fe)Ne.write_shift(1,0)}for(Se=1;Se<de.FileIndex.length;++Se)if(We=de.FileIndex[Se],We.size>0&&We.size<4096)if(fr&&Buffer.isBuffer(We.content))We.content.copy(Ne,Ne.l,0,We.size),Ne.l+=We.size+63&-64;else{for(Fe=0;Fe<We.size;++Fe)Ne.write_shift(1,We.content[Fe]);for(;Fe&63;++Fe)Ne.write_shift(1,0)}if(fr)Ne.l=Ne.length;else for(;Ne.l<Ne.length;)Ne.write_shift(1,0);return Ne}function te(de,he){var ge=de.FullPaths.map(function(Fe){return Fe.toUpperCase()}),ve=ge.map(function(Fe){var Xe=Fe.split("/");return Xe[Xe.length-(Fe.slice(-1)=="/"?2:1)]}),Ne=!1;he.charCodeAt(0)===47?(Ne=!0,he=ge[0].slice(0,-1)+he):Ne=he.indexOf("/")!==-1;var Se=he.toUpperCase(),Ge=Ne===!0?ge.indexOf(Se):ve.indexOf(Se);if(Ge!==-1)return de.FileIndex[Ge];var rt=!Se.match(R0);for(Se=Se.replace(ks,""),rt&&(Se=Se.replace(R0,"!")),Ge=0;Ge<ge.length;++Ge)if((rt?ge[Ge].replace(R0,"!"):ge[Ge]).replace(ks,"")==Se||(rt?ve[Ge].replace(R0,"!"):ve[Ge]).replace(ks,"")==Se)return de.FileIndex[Ge];return null}var G=64,se=-2,ie="d0cf11e0a1b11ae1",Y=[208,207,17,224,161,177,26,225],q="00000000000000000000000000000000",ce={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:se,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function pe(de,he,ge){g();var ve=Z(de,ge);b.writeFileSync(he,ve)}function me(de){for(var he=new Array(de.length),ge=0;ge<de.length;++ge)he[ge]=String.fromCharCode(de[ge]);return he.join("")}function le(de,he){var ge=Z(de,he);switch(he&&he.type||"buffer"){case"file":return g(),b.writeFileSync(he.filename,ge),ge;case"binary":return typeof ge=="string"?ge:me(ge);case"base64":return a2(typeof ge=="string"?ge:me(ge));case"buffer":if(fr)return Buffer.isBuffer(ge)?ge:Co(ge);case"array":return typeof ge=="string"?An(ge):ge}return ge}var X;function W(de){try{var he=de.InflateRaw,ge=new he;if(ge._processChunk(new Uint8Array([3,0]),ge._finishFlushFlag),ge.bytesRead)X=de;else throw new Error("zlib does not expose bytesRead")}catch(ve){console.error("cannot use native zlib: "+(ve.message||ve))}}function K(de,he){if(!X)return kt(de,he);var ge=X.InflateRaw,ve=new ge,Ne=ve._processChunk(de.slice(de.l),ve._finishFlushFlag);return de.l+=ve.bytesRead,Ne}function ae(de){return X?X.deflateRawSync(de):It(de)}var oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ke(de){var he=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(he>>16|he>>8|he)&255}for(var Pe=typeof Uint8Array<"u",Oe=Pe?new Uint8Array(256):[],nt=0;nt<256;++nt)Oe[nt]=ke(nt);function we(de,he){var ge=Oe[de&255];return he<=8?ge>>>8-he:(ge=ge<<8|Oe[de>>8&255],he<=16?ge>>>16-he:(ge=ge<<8|Oe[de>>16&255],ge>>>24-he))}function Ae(de,he){var ge=he&7,ve=he>>>3;return(de[ve]|(ge<=6?0:de[ve+1]<<8))>>>ge&3}function Le(de,he){var ge=he&7,ve=he>>>3;return(de[ve]|(ge<=5?0:de[ve+1]<<8))>>>ge&7}function Ee(de,he){var ge=he&7,ve=he>>>3;return(de[ve]|(ge<=4?0:de[ve+1]<<8))>>>ge&15}function Je(de,he){var ge=he&7,ve=he>>>3;return(de[ve]|(ge<=3?0:de[ve+1]<<8))>>>ge&31}function be(de,he){var ge=he&7,ve=he>>>3;return(de[ve]|(ge<=1?0:de[ve+1]<<8))>>>ge&127}function Be(de,he,ge){var ve=he&7,Ne=he>>>3,Se=(1<<ge)-1,Ge=de[Ne]>>>ve;return ge<8-ve||(Ge|=de[Ne+1]<<8-ve,ge<16-ve)||(Ge|=de[Ne+2]<<16-ve,ge<24-ve)||(Ge|=de[Ne+3]<<24-ve),Ge&Se}function fe(de,he,ge){var ve=he&7,Ne=he>>>3;return ve<=5?de[Ne]|=(ge&7)<<ve:(de[Ne]|=ge<<ve&255,de[Ne+1]=(ge&7)>>8-ve),he+3}function at(de,he,ge){var ve=he&7,Ne=he>>>3;return ge=(ge&1)<<ve,de[Ne]|=ge,he+1}function Ce(de,he,ge){var ve=he&7,Ne=he>>>3;return ge<<=ve,de[Ne]|=ge&255,ge>>>=8,de[Ne+1]=ge,he+8}function wt(de,he,ge){var ve=he&7,Ne=he>>>3;return ge<<=ve,de[Ne]|=ge&255,ge>>>=8,de[Ne+1]=ge&255,de[Ne+2]=ge>>>8,he+16}function ut(de,he){var ge=de.length,ve=2*ge>he?2*ge:he+5,Ne=0;if(ge>=he)return de;if(fr){var Se=s2(ve);if(de.copy)de.copy(Se);else for(;Ne<de.length;++Ne)Se[Ne]=de[Ne];return Se}else if(Pe){var Ge=new Uint8Array(ve);if(Ge.set)Ge.set(de);else for(;Ne<ge;++Ne)Ge[Ne]=de[Ne];return Ge}return de.length=ve,de}function Ct(de){for(var he=new Array(de),ge=0;ge<de;++ge)he[ge]=0;return he}function Mt(de,he,ge){var ve=1,Ne=0,Se=0,Ge=0,rt=0,Fe=de.length,Xe=Pe?new Uint16Array(32):Ct(32);for(Se=0;Se<32;++Se)Xe[Se]=0;for(Se=Fe;Se<ge;++Se)de[Se]=0;Fe=de.length;var We=Pe?new Uint16Array(Fe):Ct(Fe);for(Se=0;Se<Fe;++Se)Xe[Ne=de[Se]]++,ve<Ne&&(ve=Ne),We[Se]=0;for(Xe[0]=0,Se=1;Se<=ve;++Se)Xe[Se+16]=rt=rt+Xe[Se-1]<<1;for(Se=0;Se<Fe;++Se)rt=de[Se],rt!=0&&(We[Se]=Xe[rt+16]++);var ct=0;for(Se=0;Se<Fe;++Se)if(ct=de[Se],ct!=0)for(rt=we(We[Se],ve)>>ve-ct,Ge=(1<<ve+4-ct)-1;Ge>=0;--Ge)he[rt|Ge<<ct]=ct&15|Se<<4;return ve}var qt=Pe?new Uint16Array(512):Ct(512),ur=Pe?new Uint16Array(32):Ct(32);if(!Pe){for(var Ut=0;Ut<512;++Ut)qt[Ut]=0;for(Ut=0;Ut<32;++Ut)ur[Ut]=0}(function(){for(var de=[],he=0;he<32;he++)de.push(5);Mt(de,ur,32);var ge=[];for(he=0;he<=143;he++)ge.push(8);for(;he<=255;he++)ge.push(9);for(;he<=279;he++)ge.push(7);for(;he<=287;he++)ge.push(8);Mt(ge,qt,288)})();var Yt=function(){for(var he=Pe?new Uint8Array(32768):[],ge=0,ve=0;ge<Re.length-1;++ge)for(;ve<Re[ge+1];++ve)he[ve]=ge;for(;ve<32768;++ve)he[ve]=29;var Ne=Pe?new Uint8Array(259):[];for(ge=0,ve=0;ge<re.length-1;++ge)for(;ve<re[ge+1];++ve)Ne[ve]=ge;function Se(rt,Fe){for(var Xe=0;Xe<rt.length;){var We=Math.min(65535,rt.length-Xe),ct=Xe+We==rt.length;for(Fe.write_shift(1,+ct),Fe.write_shift(2,We),Fe.write_shift(2,~We&65535);We-- >0;)Fe[Fe.l++]=rt[Xe++]}return Fe.l}function Ge(rt,Fe){for(var Xe=0,We=0,ct=Pe?new Uint16Array(32768):[];We<rt.length;){var xt=Math.min(65535,rt.length-We);if(xt<10){for(Xe=fe(Fe,Xe,+(We+xt==rt.length)),Xe&7&&(Xe+=8-(Xe&7)),Fe.l=Xe/8|0,Fe.write_shift(2,xt),Fe.write_shift(2,~xt&65535);xt-- >0;)Fe[Fe.l++]=rt[We++];Xe=Fe.l*8;continue}Xe=fe(Fe,Xe,+(We+xt==rt.length)+2);for(var mt=0;xt-- >0;){var pt=rt[We];mt=(mt<<5^pt)&32767;var bt=-1,Pt=0;if((bt=ct[mt])&&(bt|=We&-32768,bt>We&&(bt-=32768),bt<We))for(;rt[bt+Pt]==rt[We+Pt]&&Pt<250;)++Pt;if(Pt>2){pt=Ne[Pt],pt<=22?Xe=Ce(Fe,Xe,Oe[pt+1]>>1)-1:(Ce(Fe,Xe,3),Xe+=5,Ce(Fe,Xe,Oe[pt-23]>>5),Xe+=3);var tt=pt<8?0:pt-4>>2;tt>0&&(wt(Fe,Xe,Pt-re[pt]),Xe+=tt),pt=he[We-bt],Xe=Ce(Fe,Xe,Oe[pt]>>3),Xe-=3;var kr=pt<4?0:pt-2>>1;kr>0&&(wt(Fe,Xe,We-bt-Re[pt]),Xe+=kr);for(var zt=0;zt<Pt;++zt)ct[mt]=We&32767,mt=(mt<<5^rt[We])&32767,++We;xt-=Pt-1}else pt<=143?pt=pt+48:Xe=at(Fe,Xe,1),Xe=Ce(Fe,Xe,Oe[pt]),ct[mt]=We&32767,++We}Xe=Ce(Fe,Xe,0)-1}return Fe.l=(Xe+7)/8|0,Fe.l}return function(Fe,Xe){return Fe.length<8?Se(Fe,Xe):Ge(Fe,Xe)}}();function It(de){var he=Ma(50+Math.floor(de.length*1.1)),ge=Yt(de,he);return he.slice(0,ge)}var $e=Pe?new Uint16Array(32768):Ct(32768),jt=Pe?new Uint16Array(32768):Ct(32768),Nt=Pe?new Uint16Array(128):Ct(128),lt=1,At=1;function vt(de,he){var ge=Je(de,he)+257;he+=5;var ve=Je(de,he)+1;he+=5;var Ne=Ee(de,he)+4;he+=4;for(var Se=0,Ge=Pe?new Uint8Array(19):Ct(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Fe=1,Xe=Pe?new Uint8Array(8):Ct(8),We=Pe?new Uint8Array(8):Ct(8),ct=Ge.length,xt=0;xt<Ne;++xt)Ge[oe[xt]]=Se=Le(de,he),Fe<Se&&(Fe=Se),Xe[Se]++,he+=3;var mt=0;for(Xe[0]=0,xt=1;xt<=Fe;++xt)We[xt]=mt=mt+Xe[xt-1]<<1;for(xt=0;xt<ct;++xt)(mt=Ge[xt])!=0&&(rt[xt]=We[mt]++);var pt=0;for(xt=0;xt<ct;++xt)if(pt=Ge[xt],pt!=0){mt=Oe[rt[xt]]>>8-pt;for(var bt=(1<<7-pt)-1;bt>=0;--bt)Nt[mt|bt<<pt]=pt&7|xt<<3}var Pt=[];for(Fe=1;Pt.length<ge+ve;)switch(mt=Nt[be(de,he)],he+=mt&7,mt>>>=3){case 16:for(Se=3+Ae(de,he),he+=2,mt=Pt[Pt.length-1];Se-- >0;)Pt.push(mt);break;case 17:for(Se=3+Le(de,he),he+=3;Se-- >0;)Pt.push(0);break;case 18:for(Se=11+be(de,he),he+=7;Se-- >0;)Pt.push(0);break;default:Pt.push(mt),Fe<mt&&(Fe=mt);break}var tt=Pt.slice(0,ge),kr=Pt.slice(ge);for(xt=ge;xt<286;++xt)tt[xt]=0;for(xt=ve;xt<30;++xt)kr[xt]=0;return lt=Mt(tt,$e,286),At=Mt(kr,jt,30),he}function st(de,he){if(de[0]==3&&!(de[1]&3))return[Ml(he),2];for(var ge=0,ve=0,Ne=s2(he||1<<18),Se=0,Ge=Ne.length>>>0,rt=0,Fe=0;(ve&1)==0;){if(ve=Le(de,ge),ge+=3,ve>>>1)ve>>1==1?(rt=9,Fe=5):(ge=vt(de,ge),rt=lt,Fe=At);else{ge&7&&(ge+=8-(ge&7));var Xe=de[ge>>>3]|de[(ge>>>3)+1]<<8;if(ge+=32,Xe>0)for(!he&&Ge<Se+Xe&&(Ne=ut(Ne,Se+Xe),Ge=Ne.length);Xe-- >0;)Ne[Se++]=de[ge>>>3],ge+=8;continue}for(;;){!he&&Ge<Se+32767&&(Ne=ut(Ne,Se+32767),Ge=Ne.length);var We=Be(de,ge,rt),ct=ve>>>1==1?qt[We]:$e[We];if(ge+=ct&15,ct>>>=4,(ct>>>8&255)===0)Ne[Se++]=ct;else{if(ct==256)break;ct-=257;var xt=ct<8?0:ct-4>>2;xt>5&&(xt=0);var mt=Se+re[ct];xt>0&&(mt+=Be(de,ge,xt),ge+=xt),We=Be(de,ge,Fe),ct=ve>>>1==1?ur[We]:jt[We],ge+=ct&15,ct>>>=4;var pt=ct<4?0:ct-2>>1,bt=Re[ct];for(pt>0&&(bt+=Be(de,ge,pt),ge+=pt),!he&&Ge<mt&&(Ne=ut(Ne,mt+100),Ge=Ne.length);Se<mt;)Ne[Se]=Ne[Se-bt],++Se}}}return he?[Ne,ge+7>>>3]:[Ne.slice(0,Se),ge+7>>>3]}function kt(de,he){var ge=de.slice(de.l||0),ve=st(ge,he);return de.l+=ve[1],ve[0]}function Os(de,he){if(de)typeof console<"u"&&console.error(he);else throw new Error(he)}function Bn(de,he){var ge=de;qa(ge,0);var ve=[],Ne=[],Se={FileIndex:ve,FullPaths:Ne};B(Se,{root:he.root});for(var Ge=ge.length-4;(ge[Ge]!=80||ge[Ge+1]!=75||ge[Ge+2]!=5||ge[Ge+3]!=6)&&Ge>=0;)--Ge;ge.l=Ge+4,ge.l+=4;var rt=ge.read_shift(2);ge.l+=6;var Fe=ge.read_shift(4);for(ge.l=Fe,Ge=0;Ge<rt;++Ge){ge.l+=20;var Xe=ge.read_shift(4),We=ge.read_shift(4),ct=ge.read_shift(2),xt=ge.read_shift(2),mt=ge.read_shift(2);ge.l+=8;var pt=ge.read_shift(4),bt=h(ge.slice(ge.l+ct,ge.l+ct+xt));ge.l+=ct+xt+mt;var Pt=ge.l;ge.l=pt+4,_t(ge,Xe,We,Se,bt),ge.l=Pt}return Se}function _t(de,he,ge,ve,Ne){de.l+=2;var Se=de.read_shift(2),Ge=de.read_shift(2),rt=f(de);if(Se&8257)throw new Error("Unsupported ZIP encryption");for(var Fe=de.read_shift(4),Xe=de.read_shift(4),We=de.read_shift(4),ct=de.read_shift(2),xt=de.read_shift(2),mt="",pt=0;pt<ct;++pt)mt+=String.fromCharCode(de[de.l++]);if(xt){var bt=h(de.slice(de.l,de.l+xt));(bt[21589]||{}).mt&&(rt=bt[21589].mt),((Ne||{})[21589]||{}).mt&&(rt=Ne[21589].mt)}de.l+=xt;var Pt=de.slice(de.l,de.l+Xe);switch(Ge){case 8:Pt=K(de,We);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var tt=!1;Se&8&&(Fe=de.read_shift(4),Fe==134695760&&(Fe=de.read_shift(4),tt=!0),Xe=de.read_shift(4),We=de.read_shift(4)),Xe!=he&&Os(tt,"Bad compressed size: "+he+" != "+Xe),We!=ge&&Os(tt,"Bad uncompressed size: "+ge+" != "+We),zr(ve,mt,Pt,{unsafe:!0,mt:rt})}function Jr(de,he){var ge=he||{},ve=[],Ne=[],Se=Ma(1),Ge=ge.compression?8:0,rt=0,Fe=0,Xe=0,We=0,ct=0,xt=de.FullPaths[0],mt=xt,pt=de.FileIndex[0],bt=[],Pt=0;for(Fe=1;Fe<de.FullPaths.length;++Fe)if(mt=de.FullPaths[Fe].slice(xt.length),pt=de.FileIndex[Fe],!(!pt.size||!pt.content||mt=="Sh33tJ5")){var tt=We,kr=Ma(mt.length);for(Xe=0;Xe<mt.length;++Xe)kr.write_shift(1,mt.charCodeAt(Xe)&127);kr=kr.slice(0,kr.l),bt[ct]=D8.buf(pt.content,0);var zt=pt.content;Ge==8&&(zt=ae(zt)),Se=Ma(30),Se.write_shift(4,67324752),Se.write_shift(2,20),Se.write_shift(2,rt),Se.write_shift(2,Ge),pt.mt?d(Se,pt.mt):Se.write_shift(4,0),Se.write_shift(-4,bt[ct]),Se.write_shift(4,zt.length),Se.write_shift(4,pt.content.length),Se.write_shift(2,kr.length),Se.write_shift(2,0),We+=Se.length,ve.push(Se),We+=kr.length,ve.push(kr),We+=zt.length,ve.push(zt),Se=Ma(46),Se.write_shift(4,33639248),Se.write_shift(2,0),Se.write_shift(2,20),Se.write_shift(2,rt),Se.write_shift(2,Ge),Se.write_shift(4,0),Se.write_shift(-4,bt[ct]),Se.write_shift(4,zt.length),Se.write_shift(4,pt.content.length),Se.write_shift(2,kr.length),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(4,0),Se.write_shift(4,tt),Pt+=Se.l,Ne.push(Se),Pt+=kr.length,Ne.push(kr),++ct}return Se=Ma(22),Se.write_shift(4,101010256),Se.write_shift(2,0),Se.write_shift(2,0),Se.write_shift(2,ct),Se.write_shift(2,ct),Se.write_shift(4,Pt),Se.write_shift(4,We),Se.write_shift(2,0),El([El(ve),El(Ne),Se])}var en={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ll(de,he){if(de.ctype)return de.ctype;var ge=de.name||"",ve=ge.match(/\.([^\.]+)$/);return ve&&en[ve[1]]||he&&(ve=(ge=he).match(/[\.\\]([^\.\\])+$/),ve&&en[ve[1]])?en[ve[1]]:"application/octet-stream"}function Za(de){for(var he=a2(de),ge=[],ve=0;ve<he.length;ve+=76)ge.push(he.slice(ve,ve+76));return ge.join(`\r
`)+`\r
`}function fi(de){var he=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Xe){var We=Xe.charCodeAt(0).toString(16).toUpperCase();return"="+(We.length==1?"0"+We:We)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ge=[],ve=he.split(`\r
`),Ne=0;Ne<ve.length;++Ne){var Se=ve[Ne];if(Se.length==0){ge.push("");continue}for(var Ge=0;Ge<Se.length;){var rt=76,Fe=Se.slice(Ge,Ge+rt);Fe.charAt(rt-1)=="="?rt--:Fe.charAt(rt-2)=="="?rt-=2:Fe.charAt(rt-3)=="="&&(rt-=3),Fe=Se.slice(Ge,Ge+rt),Ge+=rt,Ge<Se.length&&(Fe+="="),ge.push(Fe)}}return ge.join(`\r
`)}function ea(de){for(var he=[],ge=0;ge<de.length;++ge){for(var ve=de[ge];ge<=de.length&&ve.charAt(ve.length-1)=="=";)ve=ve.slice(0,ve.length-1)+de[++ge];he.push(ve)}for(var Ne=0;Ne<he.length;++Ne)he[Ne]=he[Ne].replace(/[=][0-9A-Fa-f]{2}/g,function(Se){return String.fromCharCode(parseInt(Se.slice(1),16))});return An(he.join(`\r
`))}function yn(de,he,ge){for(var ve="",Ne="",Se="",Ge,rt=0;rt<10;++rt){var Fe=he[rt];if(!Fe||Fe.match(/^\s*$/))break;var Xe=Fe.match(/^(.*?):\s*([^\s].*)$/);if(Xe)switch(Xe[1].toLowerCase()){case"content-location":ve=Xe[2].trim();break;case"content-type":Se=Xe[2].trim();break;case"content-transfer-encoding":Ne=Xe[2].trim();break}}switch(++rt,Ne.toLowerCase()){case"base64":Ge=An(Js(he.slice(rt).join("")));break;case"quoted-printable":Ge=ea(he.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ne)}var We=zr(de,ve.slice(ge.length),Ge,{unsafe:!0});Se&&(We.ctype=Se)}function Vi(de,he){if(me(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ge=he&&he.root||"",ve=(fr&&Buffer.isBuffer(de)?de.toString("binary"):me(de)).split(`\r
`),Ne=0,Se="";for(Ne=0;Ne<ve.length;++Ne)if(Se=ve[Ne],!!/^Content-Location:/i.test(Se)&&(Se=Se.slice(Se.indexOf("file")),ge||(ge=Se.slice(0,Se.lastIndexOf("/")+1)),Se.slice(0,ge.length)!=ge))for(;ge.length>0&&(ge=ge.slice(0,ge.length-1),ge=ge.slice(0,ge.lastIndexOf("/")+1),Se.slice(0,ge.length)!=ge););var Ge=(ve[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var rt="--"+(Ge[1]||""),Fe=[],Xe=[],We={FileIndex:Fe,FullPaths:Xe};B(We);var ct,xt=0;for(Ne=0;Ne<ve.length;++Ne){var mt=ve[Ne];mt!==rt&&mt!==rt+"--"||(xt++&&yn(We,ve.slice(ct,Ne),ge),ct=Ne)}return We}function ca(de,he){var ge=he||{},ve=ge.boundary||"SheetJS";ve="------="+ve;for(var Ne=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ve.slice(2)+'"',"","",""],Se=de.FullPaths[0],Ge=Se,rt=de.FileIndex[0],Fe=1;Fe<de.FullPaths.length;++Fe)if(Ge=de.FullPaths[Fe].slice(Se.length),rt=de.FileIndex[Fe],!(!rt.size||!rt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var Xe=rt.content,We=fr&&Buffer.isBuffer(Xe)?Xe.toString("binary"):me(Xe),ct=0,xt=Math.min(1024,We.length),mt=0,pt=0;pt<=xt;++pt)(mt=We.charCodeAt(pt))>=32&&mt<128&&++ct;var bt=ct>=xt*4/5;Ne.push(ve),Ne.push("Content-Location: "+(ge.root||"file:///C:/SheetJS/")+Ge),Ne.push("Content-Transfer-Encoding: "+(bt?"quoted-printable":"base64")),Ne.push("Content-Type: "+Ll(rt,Ge)),Ne.push(""),Ne.push(bt?fi(We):Za(We))}return Ne.push(ve+`--\r
`),Ne.join(`\r
`)}function pa(de){var he={};return B(he,de),he}function zr(de,he,ge,ve){var Ne=ve&&ve.unsafe;Ne||B(de);var Se=!Ne&&pr.find(de,he);if(!Se){var Ge=de.FullPaths[0];he.slice(0,Ge.length)==Ge?Ge=he:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+he).replace("//","/")),Se={name:l(he),type:2},de.FileIndex.push(Se),de.FullPaths.push(Ge),Ne||pr.utils.cfb_gc(de)}return Se.content=ge,Se.size=ge?ge.length:0,ve&&(ve.CLSID&&(Se.clsid=ve.CLSID),ve.mt&&(Se.mt=ve.mt),ve.ct&&(Se.ct=ve.ct)),Se}function tn(de,he){B(de);var ge=pr.find(de,he);if(ge){for(var ve=0;ve<de.FileIndex.length;++ve)if(de.FileIndex[ve]==ge)return de.FileIndex.splice(ve,1),de.FullPaths.splice(ve,1),!0}return!1}function ya(de,he,ge){B(de);var ve=pr.find(de,he);if(ve){for(var Ne=0;Ne<de.FileIndex.length;++Ne)if(de.FileIndex[Ne]==ve)return de.FileIndex[Ne].name=l(ge),de.FullPaths[Ne]=ge,!0}return!1}function bn(de){z(de,!0)}return a.find=te,a.read=U,a.parse=w,a.write=le,a.writeFile=pe,a.utils={cfb_new:pa,cfb_add:zr,cfb_del:tn,cfb_mov:ya,cfb_gc:bn,ReadShift:O0,CheckField:x4,prep_blob:qa,bconcat:El,use_zlib:W,_deflateRaw:It,_inflateRaw:kt,consts:ce},a}();function R8(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);a.open("r"),a.encoding="binary";var r=a.read();return a.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+t)}function li(t){for(var a=Object.keys(t),r=[],n=0;n<a.length;++n)Object.prototype.hasOwnProperty.call(t,a[n])&&r.push(a[n]);return r}function xg(t){for(var a=[],r=li(t),n=0;n!==r.length;++n)a[t[r[n]]]=r[n];return a}var af=new Date(1899,11,30,0,0,0);function Es(t,a){var r=t.getTime(),n=af.getTime()+(t.getTimezoneOffset()-af.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var Xw=new Date,M8=af.getTime()+(Xw.getTimezoneOffset()-af.getTimezoneOffset())*6e4,f2=Xw.getTimezoneOffset();function Sf(t){var a=new Date;return a.setTime(t*24*60*60*1e3+M8),a.getTimezoneOffset()!==f2&&a.setTime(a.getTime()+(a.getTimezoneOffset()-f2)*6e4),a}function I8(t){var a=0,r=0,n=!1,l=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!l)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var d=1;d!=l.length;++d)if(l[d]){switch(r=1,d>3&&(n=!0),l[d].slice(l[d].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+l[d].slice(l[d].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}a+=r*parseInt(l[d],10)}return a}var x2=new Date("2017-02-19T19:06:09.000Z"),qw=isNaN(x2.getFullYear())?new Date("2/19/17"):x2,O8=qw.getFullYear()==2017;function Ha(t,a){var r=new Date(t);if(O8)return a>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):a<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(qw.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return t.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var l=t.match(/\d+/g)||["2017","2","19","0","0","0"],d=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return t.indexOf("Z")>-1&&(d=new Date(d.getTime()-d.getTimezoneOffset()*60*1e3)),d}function No(t,a){if(fr&&Buffer.isBuffer(t)){if(a){if(t[0]==255&&t[1]==254)return I0(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return I0(Mw(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(a){if(t[0]==255&&t[1]==254)return I0(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return I0(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(d){return r[d]||d})}catch{}for(var n=[],l=0;l!=t.length;++l)n.push(String.fromCharCode(t[l]));return n.join("")}function Wa(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=Wa(t[r]));return a}function na(t,a){for(var r="";r.length<a;)r+=t;return r}function Dn(t){var a=Number(t);if(!isNaN(a))return isFinite(a)?a:NaN;if(!/\d/.test(t))return a;var r=1,n=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(a=Number(n))||(n=n.replace(/[(](.*)[)]/,function(l,d){return r=-r,d}),!isNaN(a=Number(n)))?a/r:a}var F8=["january","february","march","april","may","june","july","august","september","october","november","december"];function Ec(t){var a=new Date(t),r=new Date(NaN),n=a.getYear(),l=a.getMonth(),d=a.getDate();if(isNaN(d))return r;var f=t.toLowerCase();if(f.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(f=f.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),f.length>3&&F8.indexOf(f)==-1)return r}else if(f.match(/[a-z]/))return r;return n<0||n>8099?r:(l>0||d>1)&&n!=101?a:t.match(/[^-0-9:,\/\\]/)?r:a}var L8=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,n,l){if(t||typeof n=="string")return r.split(n);for(var d=r.split(n),f=[d[0]],h=1;h<d.length;++h)f.push(l),f.push(d[h]);return f}}();function $w(t){return t?t.content&&t.type?No(t.content,!0):t.data?D0(t.data):t.asNodeBuffer&&fr?D0(t.asNodeBuffer().toString("binary")):t.asBinary?D0(t.asBinary()):t._data&&t._data.getContent?D0(No(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Ww(t){if(!t)return null;if(t.data)return t2(t.data);if(t.asNodeBuffer&&fr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var a=t._data.getContent();return typeof a=="string"?t2(a):Array.prototype.slice.call(a)}return t.content&&t.type?t.content:null}function B8(t){return t&&t.name.slice(-4)===".bin"?Ww(t):$w(t)}function xn(t,a){for(var r=t.FullPaths||li(t.files),n=a.toLowerCase().replace(/[\/]/g,"\\"),l=n.replace(/\\/g,"/"),d=0;d<r.length;++d){var f=r[d].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==f||l==f)return t.files?t.files[r[d]]:t.FileIndex[d]}return null}function hg(t,a){var r=xn(t,a);if(r==null)throw new Error("Cannot find file "+a+" in zip");return r}function ka(t,a,r){if(!r)return B8(hg(t,a));if(!a)return null;try{return ka(t,a)}catch{return null}}function Ws(t,a,r){if(!r)return $w(hg(t,a));if(!a)return null;try{return Ws(t,a)}catch{return null}}function P8(t,a,r){return Ww(hg(t,a))}function h2(t){for(var a=t.FullPaths||li(t.files),r=[],n=0;n<a.length;++n)a[n].slice(-1)!="/"&&r.push(a[n].replace(/^Root Entry[\/]/,""));return r.sort()}function z8(t,a,r){if(t.FullPaths){if(typeof r=="string"){var n;return fr?n=Co(r):n=n8(r),pr.utils.cfb_add(t,a,n)}pr.utils.cfb_add(t,a,r)}else t.file(a,r)}function Kw(t,a){switch(a.type){case"base64":return pr.read(t,{type:"base64"});case"binary":return pr.read(t,{type:"binary"});case"buffer":case"array":return pr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+a.type)}function M0(t,a){if(t.charAt(0)=="/")return t.slice(1);var r=a.split("/");a.slice(-1)!="/"&&r.pop();for(var n=t.split("/");n.length!==0;){var l=n.shift();l===".."?r.pop():l!=="."&&r.push(l)}return r.join("/")}var Zw=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,U8=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,m2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,H8=/<[^>]*>/g,hs=Zw.match(m2)?m2:H8,V8=/<\w*:/,G8=/<(\/?)\w+:/;function Vt(t,a,r){for(var n={},l=0,d=0;l!==t.length&&!((d=t.charCodeAt(l))===32||d===10||d===13);++l);if(a||(n[0]=t.slice(0,l)),l===t.length)return n;var f=t.match(U8),h=0,b="",g=0,w="",k="",E=1;if(f)for(g=0;g!=f.length;++g){for(k=f[g],d=0;d!=k.length&&k.charCodeAt(d)!==61;++d);for(w=k.slice(0,d).trim();k.charCodeAt(d+1)==32;)++d;for(E=(l=k.charCodeAt(d+1))==34||l==39?1:0,b=k.slice(d+1+E,k.length-E),h=0;h!=w.length&&w.charCodeAt(h)!==58;++h);if(h===w.length)w.indexOf("_")>0&&(w=w.slice(0,w.indexOf("_"))),n[w]=b,n[w.toLowerCase()]=b;else{var S=(h===5&&w.slice(0,5)==="xmlns"?"xmlns":"")+w.slice(h+1);if(n[S]&&w.slice(h-3,h)=="ext")continue;n[S]=b,n[S.toLowerCase()]=b}}return n}function di(t){return t.replace(G8,"<$1")}var Qw={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},Y8=xg(Qw),br=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,a=/_x([\da-fA-F]{4})_/ig;return function r(n){var l=n+"",d=l.indexOf("<![CDATA[");if(d==-1)return l.replace(t,function(h,b){return Qw[h]||String.fromCharCode(parseInt(b,h.indexOf("x")>-1?16:10))||h}).replace(a,function(h,b){return String.fromCharCode(parseInt(b,16))});var f=l.indexOf("]]>");return r(l.slice(0,d))+l.slice(d+9,f)+r(l.slice(f+3))}}(),X8=/[&<>'"]/g,q8=/[\u0000-\u001f]/g;function mg(t){var a=t+"";return a.replace(X8,function(r){return Y8[r]}).replace(/\n/g,"<br/>").replace(q8,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var g2=function(){var t=/&#(\d+);/g;function a(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(t,a)}}();function Wr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function om(t){for(var a="",r=0,n=0,l=0,d=0,f=0,h=0;r<t.length;){if(n=t.charCodeAt(r++),n<128){a+=String.fromCharCode(n);continue}if(l=t.charCodeAt(r++),n>191&&n<224){f=(n&31)<<6,f|=l&63,a+=String.fromCharCode(f);continue}if(d=t.charCodeAt(r++),n<240){a+=String.fromCharCode((n&15)<<12|(l&63)<<6|d&63);continue}f=t.charCodeAt(r++),h=((n&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536,a+=String.fromCharCode(55296+(h>>>10&1023)),a+=String.fromCharCode(56320+(h&1023))}return a}function p2(t){var a=Ml(2*t.length),r,n,l=1,d=0,f=0,h;for(n=0;n<t.length;n+=l)l=1,(h=t.charCodeAt(n))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(n+1)&63),l=2):h<240?(r=(h&15)*4096+(t.charCodeAt(n+1)&63)*64+(t.charCodeAt(n+2)&63),l=3):(l=4,r=(h&7)*262144+(t.charCodeAt(n+1)&63)*4096+(t.charCodeAt(n+2)&63)*64+(t.charCodeAt(n+3)&63),r-=65536,f=55296+(r>>>10&1023),r=56320+(r&1023)),f!==0&&(a[d++]=f&255,a[d++]=f>>>8,f=0),a[d++]=r%256,a[d++]=r>>>8;return a.slice(0,d).toString("ucs2")}function y2(t){return Co(t,"binary").toString("utf8")}var Tu="foo bar baz",Hr=fr&&(y2(Tu)==om(Tu)&&y2||p2(Tu)==om(Tu)&&p2)||om,I0=fr?function(t){return Co(t,"utf8").toString("binary")}:function(t){for(var a=[],r=0,n=0,l=0;r<t.length;)switch(n=t.charCodeAt(r++),!0){case n<128:a.push(String.fromCharCode(n));break;case n<2048:a.push(String.fromCharCode(192+(n>>6))),a.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,l=t.charCodeAt(r++)-56320+(n<<10),a.push(String.fromCharCode(240+(l>>18&7))),a.push(String.fromCharCode(144+(l>>12&63))),a.push(String.fromCharCode(128+(l>>6&63))),a.push(String.fromCharCode(128+(l&63)));break;default:a.push(String.fromCharCode(224+(n>>12))),a.push(String.fromCharCode(128+(n>>6&63))),a.push(String.fromCharCode(128+(n&63)))}return a.join("")},Z0=function(){var t={};return function(r,n){var l=r+"|"+(n||"");return t[l]?t[l]:t[l]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),Jw=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(a){return[new RegExp("&"+a[0]+";","ig"),a[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<t.length;++l)n=n.replace(t[l][0],t[l][1]);return n}}(),$8=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),W8=/<\/?(?:vt:)?variant>/g,K8=/<(?:vt:)([^>]*)>([\s\S]*)</;function b2(t,a){var r=Vt(t),n=t.match($8(r.baseType))||[],l=[];if(n.length!=r.size){if(a.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return l}return n.forEach(function(d){var f=d.replace(W8,"").match(K8);f&&l.push({v:Hr(f[2]),t:f[1]})}),l}var Z8=/(^\s|\s$|\n)/;function Q8(t){return li(t).map(function(a){return" "+a+'="'+t[a]+'"'}).join("")}function J8(t,a,r){return"<"+t+(r!=null?Q8(r):"")+(a!=null?(a.match(Z8)?' xml:space="preserve"':"")+">"+a+"</"+t:"/")+">"}function gg(t){if(fr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Hr(So(dg(t)));throw new Error("Bad input format: expected Buffer or string")}var Q0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,eT={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},tT=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function rT(t,a){for(var r=1-2*(t[a+7]>>>7),n=((t[a+7]&127)<<4)+(t[a+6]>>>4&15),l=t[a+6]&15,d=5;d>=0;--d)l=l*256+t[a+d];return n==2047?l==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,l+=Math.pow(2,52)),r*Math.pow(2,n-52)*l)}function aT(t,a,r){var n=(a<0||1/a==-1/0?1:0)<<7,l=0,d=0,f=n?-a:a;isFinite(f)?f==0?l=d=0:(l=Math.floor(Math.log(f)/Math.LN2),d=f*Math.pow(2,52-l),l<=-1023&&(!isFinite(d)||d<Math.pow(2,52))?l=-1022:(d-=Math.pow(2,52),l+=1023)):(l=2047,d=isNaN(a)?26985:0);for(var h=0;h<=5;++h,d/=256)t[r+h]=d&255;t[r+6]=(l&15)<<4|d&15,t[r+7]=l>>4|n}var v2=function(t){for(var a=[],r=10240,n=0;n<t[0].length;++n)if(t[0][n])for(var l=0,d=t[0][n].length;l<d;l+=r)a.push.apply(a,t[0][n].slice(l,l+r));return a},w2=fr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(a){return Buffer.isBuffer(a)?a:Co(a)})):v2(t)}:v2,N2=function(t,a,r){for(var n=[],l=a;l<r;l+=2)n.push(String.fromCharCode(Ri(t,l)));return n.join("").replace(ks,"")},pg=fr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("utf16le",a,r).replace(ks,""):N2(t,a,r)}:N2,k2=function(t,a,r){for(var n=[],l=a;l<a+r;++l)n.push(("0"+t[l].toString(16)).slice(-2));return n.join("")},e4=fr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("hex",a,a+r):k2(t,a,r)}:k2,j2=function(t,a,r){for(var n=[],l=a;l<r;l++)n.push(String.fromCharCode(pc(t,l)));return n.join("")},hd=fr?function(a,r,n){return Buffer.isBuffer(a)?a.toString("utf8",r,n):j2(a,r,n)}:j2,t4=function(t,a){var r=qs(t,a);return r>0?hd(t,a+4,a+4+r-1):""},r4=t4,a4=function(t,a){var r=qs(t,a);return r>0?hd(t,a+4,a+4+r-1):""},s4=a4,n4=function(t,a){var r=2*qs(t,a);return r>0?hd(t,a+4,a+4+r-1):""},i4=n4,l4=function(a,r){var n=qs(a,r);return n>0?pg(a,r+4,r+4+n):""},o4=l4,c4=function(t,a){var r=qs(t,a);return r>0?hd(t,a+4,a+4+r):""},d4=c4,u4=function(t,a){return rT(t,a)},sf=u4,f4=function(a){return Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array};fr&&(r4=function(a,r){if(!Buffer.isBuffer(a))return t4(a,r);var n=a.readUInt32LE(r);return n>0?a.toString("utf8",r+4,r+4+n-1):""},s4=function(a,r){if(!Buffer.isBuffer(a))return a4(a,r);var n=a.readUInt32LE(r);return n>0?a.toString("utf8",r+4,r+4+n-1):""},i4=function(a,r){if(!Buffer.isBuffer(a))return n4(a,r);var n=2*a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+n-1)},o4=function(a,r){if(!Buffer.isBuffer(a))return l4(a,r);var n=a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+n)},d4=function(a,r){if(!Buffer.isBuffer(a))return c4(a,r);var n=a.readUInt32LE(r);return a.toString("utf8",r+4,r+4+n)},sf=function(a,r){return Buffer.isBuffer(a)?a.readDoubleLE(r):u4(a,r)},f4=function(a){return Buffer.isBuffer(a)||Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array});var pc=function(t,a){return t[a]},Ri=function(t,a){return t[a+1]*256+t[a]},sT=function(t,a){var r=t[a+1]*256+t[a];return r<32768?r:(65535-r+1)*-1},qs=function(t,a){return t[a+3]*(1<<24)+(t[a+2]<<16)+(t[a+1]<<8)+t[a]},io=function(t,a){return t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a]},nT=function(t,a){return t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]};function O0(t,a){var r="",n,l,d=[],f,h,b,g;switch(a){case"dbcs":if(g=this.l,fr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(b=0;b<t;++b)r+=String.fromCharCode(Ri(this,g)),g+=2;t*=2;break;case"utf8":r=hd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=pg(this,this.l,this.l+t);break;case"wstr":return O0.call(this,t,"dbcs");case"lpstr-ansi":r=r4(this,this.l),t=4+qs(this,this.l);break;case"lpstr-cp":r=s4(this,this.l),t=4+qs(this,this.l);break;case"lpwstr":r=i4(this,this.l),t=4+2*qs(this,this.l);break;case"lpp4":t=4+qs(this,this.l),r=o4(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+qs(this,this.l),r=d4(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(f=pc(this,this.l+t++))!==0;)d.push(_u(f));r=d.join("");break;case"_wstr":for(t=0,r="";(f=Ri(this,this.l+t))!==0;)d.push(_u(f)),t+=2;t+=2,r=d.join("");break;case"dbcs-cont":for(r="",g=this.l,b=0;b<t;++b){if(this.lens&&this.lens.indexOf(g)!==-1)return f=pc(this,g),this.l=g+1,h=O0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(_u(Ri(this,g))),g+=2}r=d.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",g=this.l,b=0;b!=t;++b){if(this.lens&&this.lens.indexOf(g)!==-1)return f=pc(this,g),this.l=g+1,h=O0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(_u(pc(this,g))),g+=1}r=d.join("");break;default:switch(t){case 1:return n=pc(this,this.l),this.l++,n;case 2:return n=(a==="i"?sT:Ri)(this,this.l),this.l+=2,n;case 4:case-4:return a==="i"||(this[this.l+3]&128)===0?(n=(t>0?io:nT)(this,this.l),this.l+=4,n):(l=qs(this,this.l),this.l+=4,l);case 8:case-8:if(a==="f")return t==8?l=sf(this,this.l):l=sf([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;t=8;case 16:r=e4(this,this.l,t);break}}return this.l+=t,r}var iT=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255,t[r+2]=a>>>16&255,t[r+3]=a>>>24&255},lT=function(t,a,r){t[r]=a&255,t[r+1]=a>>8&255,t[r+2]=a>>16&255,t[r+3]=a>>24&255},oT=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255};function cT(t,a,r){var n=0,l=0;if(r==="dbcs"){for(l=0;l!=a.length;++l)oT(this,a.charCodeAt(l),this.l+2*l);n=2*a.length}else if(r==="sbcs"){for(a=a.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=a.length;++l)this[this.l+l]=a.charCodeAt(l)&255;n=a.length}else if(r==="hex"){for(;l<t;++l)this[this.l++]=parseInt(a.slice(2*l,2*l+2),16)||0;return this}else if(r==="utf16le"){var d=Math.min(this.l+t,this.length);for(l=0;l<Math.min(a.length,t);++l){var f=a.charCodeAt(l);this[this.l++]=f&255,this[this.l++]=f>>8}for(;this.l<d;)this[this.l++]=0;return this}else switch(t){case 1:n=1,this[this.l]=a&255;break;case 2:n=2,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255;break;case 3:n=3,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255,a>>>=8,this[this.l+2]=a&255;break;case 4:n=4,iT(this,a,this.l);break;case 8:if(n=8,r==="f"){aT(this,a,this.l);break}case 16:break;case-4:n=4,lT(this,a,this.l);break}return this.l+=n,this}function x4(t,a){var r=e4(this,this.l,t.length>>1);if(r!==t)throw new Error(a+"Expected "+t+" saw "+r);this.l+=t.length>>1}function qa(t,a){t.l=a,t.read_shift=O0,t.chk=x4,t.write_shift=cT}function xs(t,a){t.l+=a}function Ma(t){var a=Ml(t);return qa(a,0),a}function Hi(t,a,r){if(t){var n,l,d;qa(t,t.l||0);for(var f=t.length,h=0,b=0;t.l<f;){h=t.read_shift(1),h&128&&(h=(h&127)+((t.read_shift(1)&127)<<7));var g=uf[h]||uf[65535];for(n=t.read_shift(1),d=n&127,l=1;l<4&&n&128;++l)d+=((n=t.read_shift(1))&127)<<7*l;b=t.l+d;var w=g.f&&g.f(t,d,r);if(t.l=b,a(w,g,h))return}}}function Bm(){var t=[],a=fr?256:2048,r=function(g){var w=Ma(g);return qa(w,0),w},n=r(a),l=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&t.push(n),n=null)},d=function(g){return n&&g<n.length-n.l?n:(l(),n=r(Math.max(g+1,a)))},f=function(){return l(),El(t)},h=function(g){l(),n=g,n.l==null&&(n.l=n.length),d(a)};return{next:d,push:h,end:f,_bufs:t}}function F0(t,a,r){var n=Wa(t);if(a.s?(n.cRel&&(n.c+=a.s.c),n.rRel&&(n.r+=a.s.r)):(n.cRel&&(n.c+=a.c),n.rRel&&(n.r+=a.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function E2(t,a,r){var n=Wa(t);return n.s=F0(n.s,a.s,r),n.e=F0(n.e,a.s,r),n}function L0(t,a){if(t.cRel&&t.c<0)for(t=Wa(t);t.c<0;)t.c+=a>8?16384:256;if(t.rRel&&t.r<0)for(t=Wa(t);t.r<0;)t.r+=a>8?1048576:a>5?65536:16384;var r=Zt(t);return!t.cRel&&t.cRel!=null&&(r=fT(r)),!t.rRel&&t.rRel!=null&&(r=dT(r)),r}function cm(t,a){return t.s.r==0&&!t.s.rRel&&t.e.r==(a.biff>=12?1048575:a.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Oa(t.s.c)+":"+(t.e.cRel?"":"$")+Oa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(a.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ka(t.s.r)+":"+(t.e.rRel?"":"$")+Ka(t.e.r):L0(t.s,a.biff)+":"+L0(t.e,a.biff)}function yg(t){return parseInt(uT(t),10)-1}function Ka(t){return""+(t+1)}function dT(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function uT(t){return t.replace(/\$(\d+)$/,"$1")}function bg(t){for(var a=xT(t),r=0,n=0;n!==a.length;++n)r=26*r+a.charCodeAt(n)-64;return r-1}function Oa(t){if(t<0)throw new Error("invalid column "+t);var a="";for(++t;t;t=Math.floor((t-1)/26))a=String.fromCharCode((t-1)%26+65)+a;return a}function fT(t){return t.replace(/^([A-Z])/,"$$$1")}function xT(t){return t.replace(/^\$([A-Z])/,"$1")}function hT(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Ns(t){for(var a=0,r=0,n=0;n<t.length;++n){var l=t.charCodeAt(n);l>=48&&l<=57?a=10*a+(l-48):l>=65&&l<=90&&(r=26*r+(l-64))}return{c:r-1,r:a-1}}function Zt(t){for(var a=t.c+1,r="";a;a=(a-1)/26|0)r=String.fromCharCode((a-1)%26+65)+r;return r+(t.r+1)}function Ic(t){var a=t.indexOf(":");return a==-1?{s:Ns(t),e:Ns(t)}:{s:Ns(t.slice(0,a)),e:Ns(t.slice(a+1))}}function yr(t,a){return typeof a>"u"||typeof a=="number"?yr(t.s,t.e):(typeof t!="string"&&(t=Zt(t)),typeof a!="string"&&(a=Zt(a)),t==a?t:t+":"+a)}function oa(t){var a={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,l=0,d=t.length;for(r=0;n<d&&!((l=t.charCodeAt(n)-64)<1||l>26);++n)r=26*r+l;for(a.s.c=--r,r=0;n<d&&!((l=t.charCodeAt(n)-48)<0||l>9);++n)r=10*r+l;if(a.s.r=--r,n===d||l!=10)return a.e.c=a.s.c,a.e.r=a.s.r,a;for(++n,r=0;n!=d&&!((l=t.charCodeAt(n)-64)<1||l>26);++n)r=26*r+l;for(a.e.c=--r,r=0;n!=d&&!((l=t.charCodeAt(n)-48)<0||l>9);++n)r=10*r+l;return a.e.r=--r,a}function C2(t,a){var r=t.t=="d"&&a instanceof Date;if(t.z!=null)try{return t.w=mn(t.z,r?Es(a):a)}catch{}try{return t.w=mn((t.XF||{}).numFmtId||(r?14:0),r?Es(a):a)}catch{return""+a}}function Ui(t,a,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?To[t.v]||t.v:a==null?C2(t,t.v):C2(t,a))}function Fl(t,a){var r=a&&a.sheet?a.sheet:"Sheet1",n={};return n[r]=t,{SheetNames:[r],Sheets:n}}function h4(t,a,r){var n=r||{},l=t?Array.isArray(t):n.dense,d=t||(l?[]:{}),f=0,h=0;if(d&&n.origin!=null){if(typeof n.origin=="number")f=n.origin;else{var b=typeof n.origin=="string"?Ns(n.origin):n.origin;f=b.r,h=b.c}d["!ref"]||(d["!ref"]="A1:A1")}var g={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(d["!ref"]){var w=oa(d["!ref"]);g.s.c=w.s.c,g.s.r=w.s.r,g.e.c=Math.max(g.e.c,w.e.c),g.e.r=Math.max(g.e.r,w.e.r),f==-1&&(g.e.r=f=w.e.r+1)}for(var k=0;k!=a.length;++k)if(a[k]){if(!Array.isArray(a[k]))throw new Error("aoa_to_sheet expects an array of arrays");for(var E=0;E!=a[k].length;++E)if(!(typeof a[k][E]>"u")){var S={v:a[k][E]},D=f+k,A=h+E;if(g.s.r>D&&(g.s.r=D),g.s.c>A&&(g.s.c=A),g.e.r<D&&(g.e.r=D),g.e.c<A&&(g.e.c=A),a[k][E]&&typeof a[k][E]=="object"&&!Array.isArray(a[k][E])&&!(a[k][E]instanceof Date))S=a[k][E];else if(Array.isArray(S.v)&&(S.f=a[k][E][1],S.v=S.v[0]),S.v===null)if(S.f)S.t="n";else if(n.nullError)S.t="e",S.v=0;else if(n.sheetStubs)S.t="z";else continue;else typeof S.v=="number"?S.t="n":typeof S.v=="boolean"?S.t="b":S.v instanceof Date?(S.z=n.dateNF||tr[14],n.cellDates?(S.t="d",S.w=mn(S.z,Es(S.v))):(S.t="n",S.v=Es(S.v),S.w=mn(S.z,S.v))):S.t="s";if(l)d[D]||(d[D]=[]),d[D][A]&&d[D][A].z&&(S.z=d[D][A].z),d[D][A]=S;else{var M=Zt({c:A,r:D});d[M]&&d[M].z&&(S.z=d[M].z),d[M]=S}}}return g.s.c<1e7&&(d["!ref"]=yr(g)),d}function Oc(t,a){return h4(null,t,a)}function mT(t){return t.read_shift(4,"i")}function fs(t){var a=t.read_shift(4);return a===0?"":t.read_shift(a,"dbcs")}function gT(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function vg(t,a){var r=t.l,n=t.read_shift(1),l=fs(t),d=[],f={t:l,h:l};if((n&1)!==0){for(var h=t.read_shift(4),b=0;b!=h;++b)d.push(gT(t));f.r=d}else f.r=[{ich:0,ifnt:0}];return t.l=r+a,f}var pT=vg;function pn(t){var a=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:a,iStyleRef:r}}function Ao(t){var a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:a}}var yT=fs;function wg(t){var a=t.read_shift(4);return a===0||a===4294967295?"":t.read_shift(a,"dbcs")}var bT=fs,Pm=wg;function Ng(t){var a=t.slice(t.l,t.l+4),r=a[0]&1,n=a[0]&2;t.l+=4;var l=n===0?sf([0,0,0,0,a[0]&252,a[1],a[2],a[3]],0):io(a,0)>>2;return r?l/100:l}function m4(t){var a={s:{},e:{}};return a.s.r=t.read_shift(4),a.e.r=t.read_shift(4),a.s.c=t.read_shift(4),a.e.c=t.read_shift(4),a}var _o=m4;function cs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function vT(t){var a={},r=t.read_shift(1),n=r>>>1,l=t.read_shift(1),d=t.read_shift(2,"i"),f=t.read_shift(1),h=t.read_shift(1),b=t.read_shift(1);switch(t.l++,n){case 0:a.auto=1;break;case 1:a.index=l;var g=ho[l];g&&(a.rgb=ed(g));break;case 2:a.rgb=ed([f,h,b]);break;case 3:a.theme=l;break}return d!=0&&(a.tint=d>0?d/32767:d/32768),a}function wT(t){var a=t.read_shift(1);t.l++;var r={fBold:a&1,fItalic:a&2,fUnderline:a&4,fStrikeout:a&8,fOutline:a&16,fShadow:a&32,fCondense:a&64,fExtend:a&128};return r}function g4(t,a){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=t.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return t.l-=4,t.read_shift(0,a==1?"lpstr":"lpwstr")}function NT(t){return g4(t,1)}function kT(t){return g4(t,2)}var kg=2,Ds=3,Du=11,S2=12,nf=19,Ru=64,jT=65,ET=71,CT=4108,ST=4126,Ua=80,p4=81,AT=[Ua,p4],_T={1:{n:"CodePage",t:kg},2:{n:"Category",t:Ua},3:{n:"PresentationFormat",t:Ua},4:{n:"ByteCount",t:Ds},5:{n:"LineCount",t:Ds},6:{n:"ParagraphCount",t:Ds},7:{n:"SlideCount",t:Ds},8:{n:"NoteCount",t:Ds},9:{n:"HiddenCount",t:Ds},10:{n:"MultimediaClipCount",t:Ds},11:{n:"ScaleCrop",t:Du},12:{n:"HeadingPairs",t:CT},13:{n:"TitlesOfParts",t:ST},14:{n:"Manager",t:Ua},15:{n:"Company",t:Ua},16:{n:"LinksUpToDate",t:Du},17:{n:"CharacterCount",t:Ds},19:{n:"SharedDoc",t:Du},22:{n:"HyperlinksChanged",t:Du},23:{n:"AppVersion",t:Ds,p:"version"},24:{n:"DigSig",t:jT},26:{n:"ContentType",t:Ua},27:{n:"ContentStatus",t:Ua},28:{n:"Language",t:Ua},29:{n:"Version",t:Ua},255:{},2147483648:{n:"Locale",t:nf},2147483651:{n:"Behavior",t:nf},1919054434:{}},TT={1:{n:"CodePage",t:kg},2:{n:"Title",t:Ua},3:{n:"Subject",t:Ua},4:{n:"Author",t:Ua},5:{n:"Keywords",t:Ua},6:{n:"Comments",t:Ua},7:{n:"Template",t:Ua},8:{n:"LastAuthor",t:Ua},9:{n:"RevNumber",t:Ua},10:{n:"EditTime",t:Ru},11:{n:"LastPrinted",t:Ru},12:{n:"CreatedDate",t:Ru},13:{n:"ModifiedDate",t:Ru},14:{n:"PageCount",t:Ds},15:{n:"WordCount",t:Ds},16:{n:"CharCount",t:Ds},17:{n:"Thumbnail",t:ET},18:{n:"Application",t:Ua},19:{n:"DocSecurity",t:Ds},255:{},2147483648:{n:"Locale",t:nf},2147483651:{n:"Behavior",t:nf},1919054434:{}},A2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},DT=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function RT(t){return t.map(function(a){return[a>>16&255,a>>8&255,a&255]})}var MT=RT([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),ho=Wa(MT),To={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},y4={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},_2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function IT(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function OT(t){var a=IT();if(!t||!t.match)return a;var r={};if((t.match(hs)||[]).forEach(function(n){var l=Vt(n);switch(l[0].replace(V8,"<")){case"<?xml":break;case"<Types":a.xmlns=l["xmlns"+(l[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[l.Extension]=l.ContentType;break;case"<Override":a[_2[l.ContentType]]!==void 0&&a[_2[l.ContentType]].push(l.PartName);break}}),a.xmlns!==eT.CT)throw new Error("Unknown Namespace: "+a.xmlns);return a.calcchain=a.calcchains.length>0?a.calcchains[0]:"",a.sst=a.strs.length>0?a.strs[0]:"",a.style=a.styles.length>0?a.styles[0]:"",a.defaults=r,delete a.calcchains,a}var bc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function zm(t){var a=t.lastIndexOf("/");return t.slice(0,a+1)+"_rels/"+t.slice(a+1)+".rels"}function B0(t,a){var r={"!id":{}};if(!t)return r;a.charAt(0)!=="/"&&(a="/"+a);var n={};return(t.match(hs)||[]).forEach(function(l){var d=Vt(l);if(d[0]==="<Relationship"){var f={};f.Type=d.Type,f.Target=d.Target,f.Id=d.Id,d.TargetMode&&(f.TargetMode=d.TargetMode);var h=d.TargetMode==="External"?d.Target:M0(d.Target,a);r[h]=f,n[d.Id]=f}}),r["!id"]=n,r}var FT="application/vnd.oasis.opendocument.spreadsheet";function LT(t,a){for(var r=gg(t),n,l;n=Q0.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(l=Vt(n[0],!1),l.path=="/"&&l.type!==FT)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(a&&a.WTF)throw n}}var P0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],BT=function(){for(var t=new Array(P0.length),a=0;a<P0.length;++a){var r=P0[a],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[a]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return t}();function b4(t){var a={};t=Hr(t);for(var r=0;r<P0.length;++r){var n=P0[r],l=t.match(BT[r]);l!=null&&l.length>0&&(a[n[1]]=br(l[1])),n[2]==="date"&&a[n[1]]&&(a[n[1]]=Ha(a[n[1]]))}return a}var PT=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function v4(t,a,r,n){var l=[];if(typeof t=="string")l=b2(t,n);else for(var d=0;d<t.length;++d)l=l.concat(t[d].map(function(w){return{v:w}}));var f=typeof a=="string"?b2(a,n).map(function(w){return w.v}):a,h=0,b=0;if(f.length>0)for(var g=0;g!==l.length;g+=2){switch(b=+l[g+1].v,l[g].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=b,r.SheetNames=f.slice(h,h+b);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=b,r.DefinedNames=f.slice(h,h+b);break;case"Charts":case"Diagramme":r.Chartsheets=b,r.ChartNames=f.slice(h,h+b);break}h+=b}}function zT(t,a,r){var n={};return a||(a={}),t=Hr(t),PT.forEach(function(l){var d=(t.match(Z0(l[0]))||[])[1];switch(l[2]){case"string":d&&(a[l[1]]=br(d));break;case"bool":a[l[1]]=d==="true";break;case"raw":var f=t.match(new RegExp("<"+l[0]+"[^>]*>([\\s\\S]*?)</"+l[0]+">"));f&&f.length>0&&(n[l[1]]=f[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&v4(n.HeadingPairs,n.TitlesOfParts,a,r),a}var UT=/<[^>]+>[^<]*/g;function HT(t,a){var r={},n="",l=t.match(UT);if(l)for(var d=0;d!=l.length;++d){var f=l[d],h=Vt(f);switch(h[0]){case"<?xml":break;case"<Properties":break;case"<property":n=br(h.name);break;case"</property>":n=null;break;default:if(f.indexOf("<vt:")===0){var b=f.split(">"),g=b[0].slice(4),w=b[1];switch(g){case"lpstr":case"bstr":case"lpwstr":r[n]=br(w);break;case"bool":r[n]=Wr(w);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(w,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(w);break;case"filetime":case"date":r[n]=Ha(w);break;case"cy":case"error":r[n]=br(w);break;default:if(g.slice(-1)=="/")break;a.WTF&&typeof console<"u"&&console.warn("Unexpected",f,g,b)}}else if(f.slice(0,2)!=="</"){if(a.WTF)throw new Error(f)}}}return r}var VT={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},dm;function GT(t,a,r){dm||(dm=xg(VT)),a=dm[a]||a,t[a]=r}function jg(t){var a=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+a/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function w4(t,a,r){var n=t.l,l=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-n&3;)++t.l;return l}function N4(t,a,r){var n=t.read_shift(0,"lpwstr");return n}function k4(t,a,r){return a===31?N4(t):w4(t,a,r)}function Um(t,a,r){return k4(t,a,r===!1?0:4)}function YT(t,a){if(!a)throw new Error("VtUnalignedString must have positive length");return k4(t,a,0)}function XT(t){for(var a=t.read_shift(4),r=[],n=0;n!=a;++n){var l=t.l;r[n]=t.read_shift(0,"lpwstr").replace(ks,""),t.l-l&2&&(t.l+=2)}return r}function qT(t){for(var a=t.read_shift(4),r=[],n=0;n!=a;++n)r[n]=t.read_shift(0,"lpstr-cp").replace(ks,"");return r}function $T(t){var a=t.l,r=lf(t,p4);t[t.l]==0&&t[t.l+1]==0&&t.l-a&2&&(t.l+=2);var n=lf(t,Ds);return[r,n]}function WT(t){for(var a=t.read_shift(4),r=[],n=0;n<a/2;++n)r.push($T(t));return r}function T2(t,a){for(var r=t.read_shift(4),n={},l=0;l!=r;++l){var d=t.read_shift(4),f=t.read_shift(4);n[d]=t.read_shift(f,a===1200?"utf16le":"utf8").replace(ks,"").replace(R0,"!"),a===1200&&f%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),n}function j4(t){var a=t.read_shift(4),r=t.slice(t.l,t.l+a);return t.l+=a,(a&3)>0&&(t.l+=4-(a&3)&3),r}function KT(t){var a={};return a.Size=t.read_shift(4),t.l+=a.Size+3-(a.Size-1)%4,a}function lf(t,a,r){var n=t.read_shift(2),l,d=r||{};if(t.l+=2,a!==S2&&n!==a&&AT.indexOf(a)===-1&&!((a&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+a+" saw "+n);switch(a===S2?n:a){case 2:return l=t.read_shift(2,"i"),d.raw||(t.l+=2),l;case 3:return l=t.read_shift(4,"i"),l;case 11:return t.read_shift(4)!==0;case 19:return l=t.read_shift(4),l;case 30:return w4(t,n,4).replace(ks,"");case 31:return N4(t);case 64:return jg(t);case 65:return j4(t);case 71:return KT(t);case 80:return Um(t,n,!d.raw).replace(ks,"");case 81:return YT(t,n).replace(ks,"");case 4108:return WT(t);case 4126:case 4127:return n==4127?XT(t):qT(t);default:throw new Error("TypedPropertyValue unrecognized type "+a+" "+n)}}function D2(t,a){var r=t.l,n=t.read_shift(4),l=t.read_shift(4),d=[],f=0,h=0,b=-1,g={};for(f=0;f!=l;++f){var w=t.read_shift(4),k=t.read_shift(4);d[f]=[w,k+r]}d.sort(function(F,T){return F[1]-T[1]});var E={};for(f=0;f!=l;++f){if(t.l!==d[f][1]){var S=!0;if(f>0&&a)switch(a[d[f-1][0]].t){case 2:t.l+2===d[f][1]&&(t.l+=2,S=!1);break;case 80:t.l<=d[f][1]&&(t.l=d[f][1],S=!1);break;case 4108:t.l<=d[f][1]&&(t.l=d[f][1],S=!1);break}if((!a||f==0)&&t.l<=d[f][1]&&(S=!1,t.l=d[f][1]),S)throw new Error("Read Error: Expected address "+d[f][1]+" at "+t.l+" :"+f)}if(a){var D=a[d[f][0]];if(E[D.n]=lf(t,D.t,{raw:!0}),D.p==="version"&&(E[D.n]=String(E[D.n]>>16)+"."+("0000"+String(E[D.n]&65535)).slice(-4)),D.n=="CodePage")switch(E[D.n]){case 0:E[D.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:_n(h=E[D.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+E[D.n])}}else if(d[f][0]===1){if(h=E.CodePage=lf(t,kg),_n(h),b!==-1){var A=t.l;t.l=d[b][1],g=T2(t,h),t.l=A}}else if(d[f][0]===0){if(h===0){b=f,t.l=d[f+1][1];continue}g=T2(t,h)}else{var M=g[d[f][0]],I;switch(t[t.l]){case 65:t.l+=4,I=j4(t);break;case 30:t.l+=4,I=Um(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,I=Um(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,I=t.read_shift(4,"i");break;case 19:t.l+=4,I=t.read_shift(4);break;case 5:t.l+=4,I=t.read_shift(8,"f");break;case 11:t.l+=4,I=ma(t,4);break;case 64:t.l+=4,I=Ha(jg(t));break;default:throw new Error("unparsed value: "+t[t.l])}E[M]=I}}return t.l=r+n,E}function R2(t,a,r){var n=t.content;if(!n)return{};qa(n,0);var l,d,f,h,b=0;n.chk("feff","Byte Order: "),n.read_shift(2);var g=n.read_shift(4),w=n.read_shift(16);if(w!==pr.utils.consts.HEADER_CLSID&&w!==r)throw new Error("Bad PropertySet CLSID "+w);if(l=n.read_shift(4),l!==1&&l!==2)throw new Error("Unrecognized #Sets: "+l);if(d=n.read_shift(16),h=n.read_shift(4),l===1&&h!==n.l)throw new Error("Length mismatch: "+h+" !== "+n.l);l===2&&(f=n.read_shift(16),b=n.read_shift(4));var k=D2(n,a),E={SystemIdentifier:g};for(var S in k)E[S]=k[S];if(E.FMTID=d,l===1)return E;if(b-n.l==2&&(n.l+=2),n.l!==b)throw new Error("Length mismatch 2: "+n.l+" !== "+b);var D;try{D=D2(n,null)}catch{}for(S in D)E[S]=D[S];return E.FMTID=[d,f],E}function jl(t,a){return t.read_shift(a),null}function ZT(t,a,r){for(var n=[],l=t.l+a;t.l<l;)n.push(r(t,l-t.l));if(l!==t.l)throw new Error("Slurp error");return n}function ma(t,a){return t.read_shift(a)===1}function ja(t){return t.read_shift(2,"u")}function E4(t,a){return ZT(t,a,ja)}function QT(t){var a=t.read_shift(1),r=t.read_shift(1);return r===1?a:a===1}function md(t,a,r){var n=t.read_shift(r&&r.biff>=12?2:1),l="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var d=t.read_shift(1);d&&(l="dbcs-cont")}else r.biff==12&&(l="wstr");r.biff>=2&&r.biff<=5&&(l="cpstr");var f=n?t.read_shift(n,l):"";return f}function JT(t){var a=t.read_shift(2),r=t.read_shift(1),n=r&4,l=r&8,d=1+(r&1),f=0,h,b={};l&&(f=t.read_shift(2)),n&&(h=t.read_shift(4));var g=d==2?"dbcs-cont":"sbcs-cont",w=a===0?"":t.read_shift(a,g);return l&&(t.l+=4*f),n&&(t.l+=h),b.t=w,l||(b.raw="<t>"+b.t+"</t>",b.r=b.t),b}function ko(t,a,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(a,"cpstr");if(r.biff>=12)return t.read_shift(a,"dbcs-cont")}var l=t.read_shift(1);return l===0?n=t.read_shift(a,"sbcs-cont"):n=t.read_shift(a,"dbcs-cont"),n}function gd(t,a,r){var n=t.read_shift(r&&r.biff==2?1:2);return n===0?(t.l++,""):ko(t,n,r)}function Do(t,a,r){if(r.biff>5)return gd(t,a,r);var n=t.read_shift(1);return n===0?(t.l++,""):t.read_shift(n,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function e5(t){var a=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[a,r]}function t5(t){var a=t.read_shift(4),r=t.l,n=!1;a>24&&(t.l+=a-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),t.l=r);var l=t.read_shift((n?a-24:a)>>1,"utf16le").replace(ks,"");return n&&(t.l+=24),l}function r5(t){for(var a=t.read_shift(2),r="";a-- >0;)r+="../";var n=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var l=t.read_shift(4);if(l===0)return r+n.replace(/\\/g,"/");var d=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var f=t.read_shift(d>>1,"utf16le").replace(ks,"");return r+f}function a5(t,a){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return t5(t);case"0303000000000000c000000000000046":return r5(t);default:throw new Error("Unsupported Moniker "+r)}}function Mu(t){var a=t.read_shift(4),r=a>0?t.read_shift(a,"utf16le").replace(ks,""):"";return r}function s5(t,a){var r=t.l+a,n=t.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var l=t.read_shift(2);t.l+=2;var d,f,h,b,g="",w,k;l&16&&(d=Mu(t,r-t.l)),l&128&&(f=Mu(t,r-t.l)),(l&257)===257&&(h=Mu(t,r-t.l)),(l&257)===1&&(b=a5(t,r-t.l)),l&8&&(g=Mu(t,r-t.l)),l&32&&(w=t.read_shift(16)),l&64&&(k=jg(t)),t.l=r;var E=f||h||b||"";E&&g&&(E+="#"+g),E||(E="#"+g),l&2&&E.charAt(0)=="/"&&E.charAt(1)!="/"&&(E="file://"+E);var S={Target:E};return w&&(S.guid=w),k&&(S.time=k),d&&(S.Tooltip=d),S}function C4(t){var a=t.read_shift(1),r=t.read_shift(1),n=t.read_shift(1),l=t.read_shift(1);return[a,r,n,l]}function S4(t,a){var r=C4(t);return r[3]=0,r}function ui(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return{r:a,c:r,ixfe:n}}function n5(t){var a=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:a,flags:r}}function i5(t,a,r){return a===0?"":Do(t,a,r)}function l5(t,a,r){var n=r.biff>8?4:2,l=t.read_shift(n),d=t.read_shift(n,"i"),f=t.read_shift(n,"i");return[l,d,f]}function A4(t){var a=t.read_shift(2),r=Ng(t);return[a,r]}function o5(t,a,r){t.l+=4,a-=4;var n=t.l+a,l=md(t,a,r),d=t.read_shift(2);if(n-=t.l,d!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+d);return t.l+=d,l}function Af(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),l=t.read_shift(2);return{s:{c:n,r:a},e:{c:l,r}}}function _4(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(1),l=t.read_shift(1);return{s:{c:n,r:a},e:{c:l,r}}}var c5=_4;function T4(t){t.l+=4;var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2);return t.l+=12,[r,a,n]}function d5(t){var a={};return t.l+=4,t.l+=16,a.fSharedNote=t.read_shift(2),t.l+=4,a}function u5(t){var a={};return t.l+=4,t.cf=t.read_shift(2),a}function is(t){t.l+=2,t.l+=t.read_shift(2)}var f5={0:is,4:is,5:is,6:is,7:u5,8:is,9:is,10:is,11:is,12:is,13:d5,14:is,15:is,16:is,17:is,18:is,19:is,20:is,21:T4};function x5(t,a){for(var r=t.l+a,n=[];t.l<r;){var l=t.read_shift(2);t.l-=2;try{n.push(f5[l](t,r-t.l))}catch{return t.l=r,n}}return t.l!=r&&(t.l=r),n}function Iu(t,a){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),a-=2,a>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(a>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(a),r}function h5(t,a){return a===0||t.read_shift(2),1200}function m5(t,a,r){if(r.enc)return t.l+=a,"";var n=t.l,l=Do(t,0,r);return t.read_shift(a+n-t.l),l}function g5(t,a,r){var n=r&&r.biff==8||a==2?t.read_shift(2):(t.l+=a,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function p5(t,a,r){var n=t.read_shift(4),l=t.read_shift(1)&3,d=t.read_shift(1);switch(d){case 0:d="Worksheet";break;case 1:d="Macrosheet";break;case 2:d="Chartsheet";break;case 6:d="VBAModule";break}var f=md(t,0,r);return f.length===0&&(f="Sheet1"),{pos:n,hs:l,dt:d,name:f}}function y5(t,a){for(var r=t.l+a,n=t.read_shift(4),l=t.read_shift(4),d=[],f=0;f!=l&&t.l<r;++f)d.push(JT(t));return d.Count=n,d.Unique=l,d}function b5(t,a){var r={};return r.dsst=t.read_shift(2),t.l+=a-2,r}function v5(t){var a={};a.r=t.read_shift(2),a.c=t.read_shift(2),a.cnt=t.read_shift(2)-a.c;var r=t.read_shift(2);t.l+=4;var n=t.read_shift(1);return t.l+=3,n&7&&(a.level=n&7),n&32&&(a.hidden=!0),n&64&&(a.hpt=r/20),a}function w5(t){var a=n5(t);if(a.type!=2211)throw new Error("Invalid Future Record "+a.type);var r=t.read_shift(4);return r!==0}function N5(t){return t.read_shift(2),t.read_shift(4)}function M2(t,a,r){var n=0;r&&r.biff==2||(n=t.read_shift(2));var l=t.read_shift(2);r&&r.biff==2&&(n=1-(l>>15),l&=32767);var d={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[d,l]}function k5(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=t.read_shift(2),b=t.read_shift(2),g=t.read_shift(2);return{Pos:[a,r],Dim:[n,l],Flags:d,CurTab:f,FirstTab:h,Selected:b,TabRatio:g}}function j5(t,a,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=t.read_shift(2);return{RTL:n&64}}function E5(){}function C5(t,a,r){var n={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return n.name=md(t,0,r),n}function S5(t){var a=ui(t);return a.isst=t.read_shift(4),a}function A5(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=t.l+a,l=ui(t);r.biff==2&&t.l++;var d=gd(t,n-t.l,r);return l.val=d,l}function _5(t,a,r){var n=t.read_shift(2),l=Do(t,0,r);return[n,l]}var T5=Do;function I2(t,a,r){var n=t.l+a,l=r.biff==8||!r.biff?4:2,d=t.read_shift(l),f=t.read_shift(l),h=t.read_shift(2),b=t.read_shift(2);return t.l=n,{s:{r:d,c:h},e:{r:f,c:b}}}function D5(t){var a=t.read_shift(2),r=t.read_shift(2),n=A4(t);return{r:a,c:r,ixfe:n[0],rknum:n[1]}}function R5(t,a){for(var r=t.l+a-2,n=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(A4(t));if(t.l!==r)throw new Error("MulRK read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulRK length mismatch");return{r:n,c:l,C:f,rkrec:d}}function M5(t,a){for(var r=t.l+a-2,n=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulBlank length mismatch");return{r:n,c:l,C:f,ixfe:d}}function I5(t,a,r,n){var l={},d=t.read_shift(4),f=t.read_shift(4),h=t.read_shift(4),b=t.read_shift(2);return l.patternType=DT[h>>26],n.cellStyles&&(l.alc=d&7,l.fWrap=d>>3&1,l.alcV=d>>4&7,l.fJustLast=d>>7&1,l.trot=d>>8&255,l.cIndent=d>>16&15,l.fShrinkToFit=d>>20&1,l.iReadOrder=d>>22&2,l.fAtrNum=d>>26&1,l.fAtrFnt=d>>27&1,l.fAtrAlc=d>>28&1,l.fAtrBdr=d>>29&1,l.fAtrPat=d>>30&1,l.fAtrProt=d>>31&1,l.dgLeft=f&15,l.dgRight=f>>4&15,l.dgTop=f>>8&15,l.dgBottom=f>>12&15,l.icvLeft=f>>16&127,l.icvRight=f>>23&127,l.grbitDiag=f>>30&3,l.icvTop=h&127,l.icvBottom=h>>7&127,l.icvDiag=h>>14&127,l.dgDiag=h>>21&15,l.icvFore=b&127,l.icvBack=b>>7&127,l.fsxButton=b>>14&1),l}function O5(t,a,r){var n={};return n.ifnt=t.read_shift(2),n.numFmtId=t.read_shift(2),n.flags=t.read_shift(2),n.fStyle=n.flags>>2&1,a-=6,n.data=I5(t,a,n.fStyle,r),n}function F5(t){t.l+=4;var a=[t.read_shift(2),t.read_shift(2)];if(a[0]!==0&&a[0]--,a[1]!==0&&a[1]--,a[0]>7||a[1]>7)throw new Error("Bad Gutters: "+a.join("|"));return a}function O2(t,a,r){var n=ui(t);(r.biff==2||a==9)&&++t.l;var l=QT(t);return n.val=l,n.t=l===!0||l===!1?"b":"e",n}function L5(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=ui(t),l=cs(t);return n.val=l,n}var F2=i5;function B5(t,a,r){var n=t.l+a,l=t.read_shift(2),d=t.read_shift(2);if(r.sbcch=d,d==1025||d==14849)return[d,l];if(d<1||d>255)throw new Error("Unexpected SupBook type: "+d);for(var f=ko(t,d),h=[];n>t.l;)h.push(gd(t));return[d,l,f,h]}function L2(t,a,r){var n=t.read_shift(2),l,d={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(l=o5(t,a-2,r)),d.body=l||t.read_shift(a-2),typeof l=="string"&&(d.Name=l),d}var P5=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function B2(t,a,r){var n=t.l+a,l=t.read_shift(2),d=t.read_shift(1),f=t.read_shift(1),h=t.read_shift(r&&r.biff==2?1:2),b=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),b=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var g=ko(t,f,r);l&32&&(g=P5[g.charCodeAt(0)]);var w=n-t.l;r&&r.biff==2&&--w;var k=n==t.l||h===0||!(w>0)?[]:v9(t,w,r,h);return{chKey:d,Name:g,itab:b,rgce:k}}function D4(t,a,r){if(r.biff<8)return z5(t,a,r);for(var n=[],l=t.l+a,d=t.read_shift(r.biff>8?4:2);d--!==0;)n.push(l5(t,r.biff>8?12:6,r));if(t.l!=l)throw new Error("Bad ExternSheet: "+t.l+" != "+l);return n}function z5(t,a,r){t[t.l+1]==3&&t[t.l]++;var n=md(t,a,r);return n.charCodeAt(0)==3?n.slice(1):n}function U5(t,a,r){if(r.biff<8){t.l+=a;return}var n=t.read_shift(2),l=t.read_shift(2),d=ko(t,n,r),f=ko(t,l,r);return[d,f]}function H5(t,a,r){var n=_4(t);t.l++;var l=t.read_shift(1);return a-=8,[w9(t,a,r),l,n]}function P2(t,a,r){var n=c5(t);switch(r.biff){case 2:t.l++,a-=7;break;case 3:case 4:t.l+=2,a-=8;break;default:t.l+=6,a-=12}return[n,y9(t,a,r)]}function V5(t){var a=t.read_shift(4)!==0,r=t.read_shift(4)!==0,n=t.read_shift(4);return[a,r,n]}function G5(t,a,r){if(!(r.biff<8)){var n=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=Do(t,0,r);return r.biff<8&&t.read_shift(1),[{r:n,c:l},h,f,d]}}function Y5(t,a,r){return G5(t,a,r)}function X5(t,a){for(var r=[],n=t.read_shift(2);n--;)r.push(Af(t));return r}function q5(t,a,r){if(r&&r.biff<8)return W5(t,a,r);var n=T4(t),l=x5(t,a-22,n[1]);return{cmo:n,ft:l}}var $5={8:function(t,a){var r=t.l+a;t.l+=10;var n=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var l=t.read_shift(1);return t.l+=l,t.l=r,{fmt:n}}};function W5(t,a,r){t.l+=4;var n=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,a-=36;var f=[];return f.push(($5[n]||xs)(t,a,r)),{cmo:[l,n,d],ft:f}}function K5(t,a,r){var n=t.l,l="";try{t.l+=4;var d=(r.lastobj||{cmo:[0,0]}).cmo[1],f;[0,5,7,11,12,14].indexOf(d)==-1?t.l+=6:f=e5(t,6,r);var h=t.read_shift(2);t.read_shift(2),ja(t,2);var b=t.read_shift(2);t.l+=b;for(var g=1;g<t.lens.length-1;++g){if(t.l-n!=t.lens[g])throw new Error("TxO: bad continue record");var w=t[t.l],k=ko(t,t.lens[g+1]-t.lens[g]-1);if(l+=k,l.length>=(w?h:2*h))break}if(l.length!==h&&l.length!==h*2)throw new Error("cchText: "+h+" != "+l.length);return t.l=n+a,{t:l}}catch{return t.l=n+a,{t:l}}}function Z5(t,a){var r=Af(t);t.l+=16;var n=s5(t,a-24);return[r,n]}function Q5(t,a){t.read_shift(2);var r=Af(t),n=t.read_shift((a-10)/2,"dbcs-cont");return n=n.replace(ks,""),[r,n]}function J5(t){var a=[0,0],r;return r=t.read_shift(2),a[0]=A2[r]||r,r=t.read_shift(2),a[1]=A2[r]||r,a}function e7(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(S4(t));return r}function t7(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(S4(t));return r}function r7(t){t.l+=2;var a={cxfs:0,crc:0};return a.cxfs=t.read_shift(2),a.crc=t.read_shift(4),a}function R4(t,a,r){if(!r.cellStyles)return xs(t,a);var n=r&&r.biff>=12?4:2,l=t.read_shift(n),d=t.read_shift(n),f=t.read_shift(n),h=t.read_shift(n),b=t.read_shift(2);n==2&&(t.l+=2);var g={s:l,e:d,w:f,ixfe:h,flags:b};return(r.biff>=5||!r.biff)&&(g.level=b>>8&7),g}function a7(t,a){var r={};return a<32||(t.l+=16,r.header=cs(t),r.footer=cs(t),t.l+=2),r}function s7(t,a,r){var n={area:!1};if(r.biff!=5)return t.l+=a,n;var l=t.read_shift(1);return t.l+=3,l&16&&(n.area=!0),n}var n7=ui,i7=E4,l7=gd;function o7(t){var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),l={fmt:a,env:r,len:n,data:t.slice(t.l,t.l+n)};return t.l+=n,l}function c7(t,a,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=ui(t);++t.l;var l=Do(t,a-7,r);return n.t="str",n.val=l,n}function d7(t){var a=ui(t);++t.l;var r=cs(t);return a.t="n",a.val=r,a}function u7(t){var a=ui(t);++t.l;var r=t.read_shift(2);return a.t="n",a.val=r,a}function f7(t){var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,"sbcs-cont")}function x7(t,a){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=a-13}function h7(t,a,r){var n=t.l+a,l=ui(t),d=t.read_shift(2),f=ko(t,d,r);return t.l=n,l.t="str",l.val=f,l}var m7=[2,3,48,49,131,139,140,245],z2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},a=xg({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,b){var g=[],w=Ml(1);switch(b.type){case"base64":w=An(Js(h));break;case"binary":w=An(h);break;case"buffer":case"array":w=h;break}qa(w,0);var k=w.read_shift(1),E=!!(k&136),S=!1,D=!1;switch(k){case 2:break;case 3:break;case 48:S=!0,E=!0;break;case 49:S=!0,E=!0;break;case 131:break;case 139:break;case 140:D=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+k.toString(16))}var A=0,M=521;k==2&&(A=w.read_shift(2)),w.l+=3,k!=2&&(A=w.read_shift(4)),A>1048576&&(A=1e6),k!=2&&(M=w.read_shift(2));var I=w.read_shift(2),F=b.codepage||1252;k!=2&&(w.l+=16,w.read_shift(1),w[w.l]!==0&&(F=t[w[w.l]]),w.l+=1,w.l+=2),D&&(w.l+=36);for(var T=[],L={},H=Math.min(w.length,k==2?521:M-10-(S?264:0)),U=D?32:11;w.l<H&&w[w.l]!=13;)switch(L={},L.name=W0.utils.decode(F,w.slice(w.l,w.l+U)).replace(/[\u0000\r\n].*$/g,""),w.l+=U,L.type=String.fromCharCode(w.read_shift(1)),k!=2&&!D&&(L.offset=w.read_shift(4)),L.len=w.read_shift(1),k==2&&(L.offset=w.read_shift(2)),L.dec=w.read_shift(1),L.name.length&&T.push(L),k!=2&&(w.l+=D?13:14),L.type){case"B":(!S||L.len!=8)&&b.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"G":case"P":b.WTF&&console.log("Skipping "+L.name+":"+L.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+L.type)}if(w[w.l]!==13&&(w.l=M-1),w.read_shift(1)!==13)throw new Error("DBF Terminator not found "+w.l+" "+w[w.l]);w.l=M;var B=0,P=0;for(g[0]=[],P=0;P!=T.length;++P)g[0][P]=T[P].name;for(;A-- >0;){if(w[w.l]===42){w.l+=I;continue}for(++w.l,g[++B]=[],P=0,P=0;P!=T.length;++P){var z=w.slice(w.l,w.l+T[P].len);w.l+=T[P].len,qa(z,0);var Z=W0.utils.decode(F,z);switch(T[P].type){case"C":Z.trim().length&&(g[B][P]=Z.replace(/\s+$/,""));break;case"D":Z.length===8?g[B][P]=new Date(+Z.slice(0,4),+Z.slice(4,6)-1,+Z.slice(6,8)):g[B][P]=Z;break;case"F":g[B][P]=parseFloat(Z.trim());break;case"+":case"I":g[B][P]=D?z.read_shift(-4,"i")^2147483648:z.read_shift(4,"i");break;case"L":switch(Z.trim().toUpperCase()){case"Y":case"T":g[B][P]=!0;break;case"N":case"F":g[B][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Z+"|")}break;case"M":if(!E)throw new Error("DBF Unexpected MEMO for type "+k.toString(16));g[B][P]="##MEMO##"+(D?parseInt(Z.trim(),10):z.read_shift(4));break;case"N":Z=Z.replace(/\u0000/g,"").trim(),Z&&Z!="."&&(g[B][P]=+Z||0);break;case"@":g[B][P]=new Date(z.read_shift(-8,"f")-621356832e5);break;case"T":g[B][P]=new Date((z.read_shift(4)-2440588)*864e5+z.read_shift(4));break;case"Y":g[B][P]=z.read_shift(4,"i")/1e4+z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":g[B][P]=-z.read_shift(-8,"f");break;case"B":if(S&&T[P].len==8){g[B][P]=z.read_shift(8,"f");break}case"G":case"P":z.l+=T[P].len;break;case"0":if(T[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[P].type)}}}if(k!=2&&w.l<w.length&&w[w.l++]!=26)throw new Error("DBF EOF Marker missing "+(w.l-1)+" of "+w.length+" "+w[w.l-1].toString(16));return b&&b.sheetRows&&(g=g.slice(0,b.sheetRows)),b.DBF=T,g}function n(h,b){var g=b||{};g.dateNF||(g.dateNF="yyyymmdd");var w=Oc(r(h,g),g);return w["!cols"]=g.DBF.map(function(k){return{wch:k.len,DBF:k}}),delete g.DBF,w}function l(h,b){try{return Fl(n(h,b),b)}catch(g){if(b&&b.WTF)throw g}return{SheetNames:[],Sheets:{}}}var d={B:8,C:250,L:1,D:8,"?":0,"":0};function f(h,b){var g=b||{};if(+g.codepage>=0&&_n(+g.codepage),g.type=="string")throw new Error("Cannot write DBF to JS string");var w=Bm(),k=$m(h,{header:1,raw:!0,cellDates:!0}),E=k[0],S=k.slice(1),D=h["!cols"]||[],A=0,M=0,I=0,F=1;for(A=0;A<E.length;++A){if(((D[A]||{}).DBF||{}).name){E[A]=D[A].DBF.name,++I;continue}if(E[A]!=null){if(++I,typeof E[A]=="number"&&(E[A]=E[A].toString(10)),typeof E[A]!="string")throw new Error("DBF Invalid column name "+E[A]+" |"+typeof E[A]+"|");if(E.indexOf(E[A])!==A){for(M=0;M<1024;++M)if(E.indexOf(E[A]+"_"+M)==-1){E[A]+="_"+M;break}}}}var T=oa(h["!ref"]),L=[],H=[],U=[];for(A=0;A<=T.e.c-T.s.c;++A){var B="",P="",z=0,Z=[];for(M=0;M<S.length;++M)S[M][A]!=null&&Z.push(S[M][A]);if(Z.length==0||E[A]==null){L[A]="?";continue}for(M=0;M<Z.length;++M){switch(typeof Z[M]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=Z[M]instanceof Date?"D":"C";break;default:P="C"}z=Math.max(z,String(Z[M]).length),B=B&&B!=P?"C":P}z>250&&(z=250),P=((D[A]||{}).DBF||{}).type,P=="C"&&D[A].DBF.len>z&&(z=D[A].DBF.len),B=="B"&&P=="N"&&(B="N",U[A]=D[A].DBF.dec,z=D[A].DBF.len),H[A]=B=="C"||P=="N"?z:d[B]||0,F+=H[A],L[A]=B}var te=w.next(32);for(te.write_shift(4,318902576),te.write_shift(4,S.length),te.write_shift(2,296+32*I),te.write_shift(2,F),A=0;A<4;++A)te.write_shift(4,0);for(te.write_shift(4,0|(+a[Dw]||3)<<8),A=0,M=0;A<E.length;++A)if(E[A]!=null){var G=w.next(32),se=(E[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);G.write_shift(1,se,"sbcs"),G.write_shift(1,L[A]=="?"?"C":L[A],"sbcs"),G.write_shift(4,M),G.write_shift(1,H[A]||d[L[A]]||0),G.write_shift(1,U[A]||0),G.write_shift(1,2),G.write_shift(4,0),G.write_shift(1,0),G.write_shift(4,0),G.write_shift(4,0),M+=H[A]||d[L[A]]||0}var ie=w.next(264);for(ie.write_shift(4,13),A=0;A<65;++A)ie.write_shift(4,0);for(A=0;A<S.length;++A){var Y=w.next(F);for(Y.write_shift(1,0),M=0;M<E.length;++M)if(E[M]!=null)switch(L[M]){case"L":Y.write_shift(1,S[A][M]==null?63:S[A][M]?84:70);break;case"B":Y.write_shift(8,S[A][M]||0,"f");break;case"N":var q="0";for(typeof S[A][M]=="number"&&(q=S[A][M].toFixed(U[M]||0)),I=0;I<H[M]-q.length;++I)Y.write_shift(1,32);Y.write_shift(1,q,"sbcs");break;case"D":S[A][M]?(Y.write_shift(4,("0000"+S[A][M].getFullYear()).slice(-4),"sbcs"),Y.write_shift(2,("00"+(S[A][M].getMonth()+1)).slice(-2),"sbcs"),Y.write_shift(2,("00"+S[A][M].getDate()).slice(-2),"sbcs")):Y.write_shift(8,"00000000","sbcs");break;case"C":var ce=String(S[A][M]!=null?S[A][M]:"").slice(0,H[M]);for(Y.write_shift(1,ce,"sbcs"),I=0;I<H[M]-ce.length;++I)Y.write_shift(1,32);break}}return w.next(1).write_shift(1,26),w.end()}return{to_workbook:l,to_sheet:n,from_sheet:f}}(),g7=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},a=new RegExp("\x1BN("+li(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(E,S){var D=t[S];return typeof D=="number"?r2(D):D},n=function(E,S,D){var A=S.charCodeAt(0)-32<<4|D.charCodeAt(0)-48;return A==59?E:r2(A)};t["|"]=254;function l(E,S){switch(S.type){case"base64":return d(Js(E),S);case"binary":return d(E,S);case"buffer":return d(fr&&Buffer.isBuffer(E)?E.toString("binary"):So(E),S);case"array":return d(No(E),S)}throw new Error("Unrecognized type "+S.type)}function d(E,S){var D=E.split(/[\n\r]+/),A=-1,M=-1,I=0,F=0,T=[],L=[],H=null,U={},B=[],P=[],z=[],Z=0,te;for(+S.codepage>=0&&_n(+S.codepage);I!==D.length;++I){Z=0;var G=D[I].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(a,r),se=G.replace(/;;/g,"\0").split(";").map(function(oe){return oe.replace(/\u0000/g,";")}),ie=se[0],Y;if(G.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":se[1].charAt(0)=="P"&&L.push(G.slice(3).replace(/;;/g,";"));break;case"C":var q=!1,ce=!1,pe=!1,me=!1,le=-1,X=-1;for(F=1;F<se.length;++F)switch(se[F].charAt(0)){case"A":break;case"X":M=parseInt(se[F].slice(1))-1,ce=!0;break;case"Y":for(A=parseInt(se[F].slice(1))-1,ce||(M=0),te=T.length;te<=A;++te)T[te]=[];break;case"K":Y=se[F].slice(1),Y.charAt(0)==='"'?Y=Y.slice(1,Y.length-1):Y==="TRUE"?Y=!0:Y==="FALSE"?Y=!1:isNaN(Dn(Y))?isNaN(Ec(Y).getDate())||(Y=Ha(Y)):(Y=Dn(Y),H!==null&&Mc(H)&&(Y=Sf(Y))),q=!0;break;case"E":me=!0;var W=wc(se[F].slice(1),{r:A,c:M});T[A][M]=[T[A][M],W];break;case"S":pe=!0,T[A][M]=[T[A][M],"S5S"];break;case"G":break;case"R":le=parseInt(se[F].slice(1))-1;break;case"C":X=parseInt(se[F].slice(1))-1;break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+G)}if(q&&(T[A][M]&&T[A][M].length==2?T[A][M][0]=Y:T[A][M]=Y,H=null),pe){if(me)throw new Error("SYLK shared formula cannot have own formula");var K=le>-1&&T[le][X];if(!K||!K[1])throw new Error("SYLK shared formula cannot find base");T[A][M][1]=H4(K[1],{r:A-le,c:M-X})}break;case"F":var ae=0;for(F=1;F<se.length;++F)switch(se[F].charAt(0)){case"X":M=parseInt(se[F].slice(1))-1,++ae;break;case"Y":for(A=parseInt(se[F].slice(1))-1,te=T.length;te<=A;++te)T[te]=[];break;case"M":Z=parseInt(se[F].slice(1))/20;break;case"F":break;case"G":break;case"P":H=L[parseInt(se[F].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(z=se[F].slice(1).split(" "),te=parseInt(z[0],10);te<=parseInt(z[1],10);++te)Z=parseInt(z[2],10),P[te-1]=Z===0?{hidden:!0}:{wch:Z},Cc(P[te-1]);break;case"C":M=parseInt(se[F].slice(1))-1,P[M]||(P[M]={});break;case"R":A=parseInt(se[F].slice(1))-1,B[A]||(B[A]={}),Z>0?(B[A].hpt=Z,B[A].hpx=td(Z)):Z===0&&(B[A].hidden=!0);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+G)}ae<1&&(H=null);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+G)}}return B.length>0&&(U["!rows"]=B),P.length>0&&(U["!cols"]=P),S&&S.sheetRows&&(T=T.slice(0,S.sheetRows)),[T,U]}function f(E,S){var D=l(E,S),A=D[0],M=D[1],I=Oc(A,S);return li(M).forEach(function(F){I[F]=M[F]}),I}function h(E,S){return Fl(f(E,S),S)}function b(E,S,D,A){var M="C;Y"+(D+1)+";X"+(A+1)+";K";switch(E.t){case"n":M+=E.v||0,E.f&&!E.F&&(M+=";E"+rR(E.f,{r:D,c:A}));break;case"b":M+=E.v?"TRUE":"FALSE";break;case"e":M+=E.w||E.v;break;case"d":M+='"'+(E.w||E.v)+'"';break;case"s":M+='"'+E.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return M}function g(E,S){S.forEach(function(D,A){var M="F;W"+(A+1)+" "+(A+1)+" ";D.hidden?M+="0":(typeof D.width=="number"&&!D.wpx&&(D.wpx=cf(D.width)),typeof D.wpx=="number"&&!D.wch&&(D.wch=df(D.wpx)),typeof D.wch=="number"&&(M+=Math.round(D.wch))),M.charAt(M.length-1)!=" "&&E.push(M)})}function w(E,S){S.forEach(function(D,A){var M="F;";D.hidden?M+="M0;":D.hpt?M+="M"+20*D.hpt+";":D.hpx&&(M+="M"+20*P4(D.hpx)+";"),M.length>2&&E.push(M+"R"+(A+1))})}function k(E,S){var D=["ID;PWXL;N;E"],A=[],M=oa(E["!ref"]),I,F=Array.isArray(E),T=`\r
`;D.push("P;PGeneral"),D.push("F;P0;DG0G8;M255"),E["!cols"]&&g(D,E["!cols"]),E["!rows"]&&w(D,E["!rows"]),D.push("B;Y"+(M.e.r-M.s.r+1)+";X"+(M.e.c-M.s.c+1)+";D"+[M.s.c,M.s.r,M.e.c,M.e.r].join(" "));for(var L=M.s.r;L<=M.e.r;++L)for(var H=M.s.c;H<=M.e.c;++H){var U=Zt({r:L,c:H});I=F?(E[L]||[])[H]:E[U],!(!I||I.v==null&&(!I.f||I.F))&&A.push(b(I,E,L,H))}return D.join(T)+T+A.join(T)+T+"E"+T}return{to_workbook:h,to_sheet:f,from_sheet:k}}(),p7=function(){function t(d,f){switch(f.type){case"base64":return a(Js(d),f);case"binary":return a(d,f);case"buffer":return a(fr&&Buffer.isBuffer(d)?d.toString("binary"):So(d),f);case"array":return a(No(d),f)}throw new Error("Unrecognized type "+f.type)}function a(d,f){for(var h=d.split(`
`),b=-1,g=-1,w=0,k=[];w!==h.length;++w){if(h[w].trim()==="BOT"){k[++b]=[],g=0;continue}if(!(b<0)){var E=h[w].trim().split(","),S=E[0],D=E[1];++w;for(var A=h[w]||"";(A.match(/["]/g)||[]).length&1&&w<h.length-1;)A+=`
`+h[++w];switch(A=A.trim(),+S){case-1:if(A==="BOT"){k[++b]=[],g=0;continue}else if(A!=="EOD")throw new Error("Unrecognized DIF special command "+A);break;case 0:A==="TRUE"?k[b][g]=!0:A==="FALSE"?k[b][g]=!1:isNaN(Dn(D))?isNaN(Ec(D).getDate())?k[b][g]=D:k[b][g]=Ha(D):k[b][g]=Dn(D),++g;break;case 1:A=A.slice(1,A.length-1),A=A.replace(/""/g,'"'),A&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),k[b][g++]=A!==""?A:null;break}if(A==="EOD")break}}return f&&f.sheetRows&&(k=k.slice(0,f.sheetRows)),k}function r(d,f){return Oc(t(d,f),f)}function n(d,f){return Fl(r(d,f),f)}var l=function(){var d=function(b,g,w,k,E){b.push(g),b.push(w+","+k),b.push('"'+E.replace(/"/g,'""')+'"')},f=function(b,g,w,k){b.push(g+","+w),b.push(g==1?'"'+k.replace(/"/g,'""')+'"':k)};return function(b){var g=[],w=oa(b["!ref"]),k,E=Array.isArray(b);d(g,"TABLE",0,1,"sheetjs"),d(g,"VECTORS",0,w.e.r-w.s.r+1,""),d(g,"TUPLES",0,w.e.c-w.s.c+1,""),d(g,"DATA",0,0,"");for(var S=w.s.r;S<=w.e.r;++S){f(g,-1,0,"BOT");for(var D=w.s.c;D<=w.e.c;++D){var A=Zt({r:S,c:D});if(k=E?(b[S]||[])[D]:b[A],!k){f(g,1,0,"");continue}switch(k.t){case"n":var M=k.w;!M&&k.v!=null&&(M=k.v),M==null?k.f&&!k.F?f(g,1,0,"="+k.f):f(g,1,0,""):f(g,0,M,"V");break;case"b":f(g,0,k.v?1:0,k.v?"TRUE":"FALSE");break;case"s":f(g,1,0,isNaN(k.v)?k.v:'="'+k.v+'"');break;case"d":k.w||(k.w=mn(k.z||tr[14],Es(Ha(k.v)))),f(g,0,k.w,"V");break;default:f(g,1,0,"")}}}f(g,-1,0,"EOD");var I=`\r
`,F=g.join(I);return F}}();return{to_workbook:n,to_sheet:r,from_sheet:l}}(),y7=function(){function t(k){return k.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function a(k){return k.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(k,E){for(var S=k.split(`
`),D=-1,A=-1,M=0,I=[];M!==S.length;++M){var F=S[M].trim().split(":");if(F[0]==="cell"){var T=Ns(F[1]);if(I.length<=T.r)for(D=I.length;D<=T.r;++D)I[D]||(I[D]=[]);switch(D=T.r,A=T.c,F[2]){case"t":I[D][A]=t(F[3]);break;case"v":I[D][A]=+F[3];break;case"vtf":var L=F[F.length-1];case"vtc":switch(F[3]){case"nl":I[D][A]=!!+F[4];break;default:I[D][A]=+F[4];break}F[2]=="vtf"&&(I[D][A]=[I[D][A],L])}}}return E&&E.sheetRows&&(I=I.slice(0,E.sheetRows)),I}function n(k,E){return Oc(r(k,E),E)}function l(k,E){return Fl(n(k,E),E)}var d=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),f=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),b="--SocialCalcSpreadsheetControlSave--";function g(k){if(!k||!k["!ref"])return"";for(var E=[],S=[],D,A="",M=Ic(k["!ref"]),I=Array.isArray(k),F=M.s.r;F<=M.e.r;++F)for(var T=M.s.c;T<=M.e.c;++T)if(A=Zt({r:F,c:T}),D=I?(k[F]||[])[T]:k[A],!(!D||D.v==null||D.t==="z")){switch(S=["cell",A,"t"],D.t){case"s":case"str":S.push(a(D.v));break;case"n":D.f?(S[2]="vtf",S[3]="n",S[4]=D.v,S[5]=a(D.f)):(S[2]="v",S[3]=D.v);break;case"b":S[2]="vt"+(D.f?"f":"c"),S[3]="nl",S[4]=D.v?"1":"0",S[5]=a(D.f||(D.v?"TRUE":"FALSE"));break;case"d":var L=Es(Ha(D.v));S[2]="vtc",S[3]="nd",S[4]=""+L,S[5]=D.w||mn(D.z||tr[14],L);break;case"e":continue}E.push(S.join(":"))}return E.push("sheet:c:"+(M.e.c-M.s.c+1)+":r:"+(M.e.r-M.s.r+1)+":tvf:1"),E.push("valueformat:1:text-wiki"),E.join(`
`)}function w(k){return[d,f,h,f,g(k),b].join(`
`)}return{to_workbook:l,to_sheet:n,from_sheet:w}}(),J0=function(){function t(w,k,E,S,D){D.raw?k[E][S]=w:w===""||(w==="TRUE"?k[E][S]=!0:w==="FALSE"?k[E][S]=!1:isNaN(Dn(w))?isNaN(Ec(w).getDate())?k[E][S]=w:k[E][S]=Ha(w):k[E][S]=Dn(w))}function a(w,k){var E=k||{},S=[];if(!w||w.length===0)return S;for(var D=w.split(/[\r\n]/),A=D.length-1;A>=0&&D[A].length===0;)--A;for(var M=10,I=0,F=0;F<=A;++F)I=D[F].indexOf(" "),I==-1?I=D[F].length:I++,M=Math.max(M,I);for(F=0;F<=A;++F){S[F]=[];var T=0;for(t(D[F].slice(0,M).trim(),S,F,T,E),T=1;T<=(D[F].length-M)/10+1;++T)t(D[F].slice(M+(T-1)*10,M+T*10).trim(),S,F,T,E)}return E.sheetRows&&(S=S.slice(0,E.sheetRows)),S}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function l(w){for(var k={},E=!1,S=0,D=0;S<w.length;++S)(D=w.charCodeAt(S))==34?E=!E:!E&&D in r&&(k[D]=(k[D]||0)+1);D=[];for(S in k)Object.prototype.hasOwnProperty.call(k,S)&&D.push([k[S],S]);if(!D.length){k=n;for(S in k)Object.prototype.hasOwnProperty.call(k,S)&&D.push([k[S],S])}return D.sort(function(A,M){return A[0]-M[0]||n[A[1]]-n[M[1]]}),r[D.pop()[1]]||44}function d(w,k){var E=k||{},S="",D=E.dense?[]:{},A={s:{c:0,r:0},e:{c:0,r:0}};w.slice(0,4)=="sep="?w.charCodeAt(5)==13&&w.charCodeAt(6)==10?(S=w.charAt(4),w=w.slice(7)):w.charCodeAt(5)==13||w.charCodeAt(5)==10?(S=w.charAt(4),w=w.slice(6)):S=l(w.slice(0,1024)):E&&E.FS?S=E.FS:S=l(w.slice(0,1024));var M=0,I=0,F=0,T=0,L=0,H=S.charCodeAt(0),U=!1,B=0,P=w.charCodeAt(0);w=w.replace(/\r\n/mg,`
`);var z=E.dateNF!=null?_8(E.dateNF):null;function Z(){var te=w.slice(T,L),G={};if(te.charAt(0)=='"'&&te.charAt(te.length-1)=='"'&&(te=te.slice(1,-1).replace(/""/g,'"')),te.length===0)G.t="z";else if(E.raw)G.t="s",G.v=te;else if(te.trim().length===0)G.t="s",G.v=te;else if(te.charCodeAt(0)==61)te.charCodeAt(1)==34&&te.charCodeAt(te.length-1)==34?(G.t="s",G.v=te.slice(2,-1).replace(/""/g,'"')):sR(te)?(G.t="n",G.f=te.slice(1)):(G.t="s",G.v=te);else if(te=="TRUE")G.t="b",G.v=!0;else if(te=="FALSE")G.t="b",G.v=!1;else if(!isNaN(F=Dn(te)))G.t="n",E.cellText!==!1&&(G.w=te),G.v=F;else if(!isNaN(Ec(te).getDate())||z&&te.match(z)){G.z=E.dateNF||tr[14];var se=0;z&&te.match(z)&&(te=T8(te,E.dateNF,te.match(z)||[]),se=1),E.cellDates?(G.t="d",G.v=Ha(te,se)):(G.t="n",G.v=Es(Ha(te,se))),E.cellText!==!1&&(G.w=mn(G.z,G.v instanceof Date?Es(G.v):G.v)),E.cellNF||delete G.z}else G.t="s",G.v=te;if(G.t=="z"||(E.dense?(D[M]||(D[M]=[]),D[M][I]=G):D[Zt({c:I,r:M})]=G),T=L+1,P=w.charCodeAt(T),A.e.c<I&&(A.e.c=I),A.e.r<M&&(A.e.r=M),B==H)++I;else if(I=0,++M,E.sheetRows&&E.sheetRows<=M)return!0}e:for(;L<w.length;++L)switch(B=w.charCodeAt(L)){case 34:P===34&&(U=!U);break;case H:case 10:case 13:if(!U&&Z())break e;break}return L-T>0&&Z(),D["!ref"]=yr(A),D}function f(w,k){return!(k&&k.PRN)||k.FS||w.slice(0,4)=="sep="||w.indexOf("	")>=0||w.indexOf(",")>=0||w.indexOf(";")>=0?d(w,k):Oc(a(w,k),k)}function h(w,k){var E="",S=k.type=="string"?[0,0,0,0]:Rg(w,k);switch(k.type){case"base64":E=Js(w);break;case"binary":E=w;break;case"buffer":k.codepage==65001?E=w.toString("utf8"):k.codepage&&typeof W0<"u"||(E=fr&&Buffer.isBuffer(w)?w.toString("binary"):So(w));break;case"array":E=No(w);break;case"string":E=w;break;default:throw new Error("Unrecognized type "+k.type)}return S[0]==239&&S[1]==187&&S[2]==191?E=Hr(E.slice(3)):k.type!="string"&&k.type!="buffer"&&k.codepage==65001?E=Hr(E):k.type=="binary"&&typeof W0<"u",E.slice(0,19)=="socialcalc:version:"?y7.to_sheet(k.type=="string"?E:Hr(E),k):f(E,k)}function b(w,k){return Fl(h(w,k),k)}function g(w){for(var k=[],E=oa(w["!ref"]),S,D=Array.isArray(w),A=E.s.r;A<=E.e.r;++A){for(var M=[],I=E.s.c;I<=E.e.c;++I){var F=Zt({r:A,c:I});if(S=D?(w[A]||[])[I]:w[F],!S||S.v==null){M.push("          ");continue}for(var T=(S.w||(Ui(S),S.w)||"").slice(0,10);T.length<10;)T+=" ";M.push(T+(I===0?" ":""))}k.push(M.join(""))}return k.join(`
`)}return{to_workbook:b,to_sheet:h,from_sheet:g}}();function b7(t,a){var r=a||{},n=!!r.WTF;r.WTF=!0;try{var l=g7.to_workbook(t,r);return r.WTF=n,l}catch(d){if(r.WTF=n,!d.message.match(/SYLK bad record ID/)&&n)throw d;return J0.to_workbook(t,a)}}var z0=function(){function t(W,K,ae){if(W){qa(W,W.l||0);for(var oe=ae.Enum||le;W.l<W.length;){var re=W.read_shift(2),Re=oe[re]||oe[65535],ke=W.read_shift(2),Pe=W.l+ke,Oe=Re.f&&Re.f(W,ke,ae);if(W.l=Pe,K(Oe,Re,re))return}}}function a(W,K){switch(K.type){case"base64":return r(An(Js(W)),K);case"binary":return r(An(W),K);case"buffer":case"array":return r(W,K)}throw"Unsupported type "+K.type}function r(W,K){if(!W)return W;var ae=K||{},oe=ae.dense?[]:{},re="Sheet1",Re="",ke=0,Pe={},Oe=[],nt=[],we={s:{r:0,c:0},e:{r:0,c:0}},Ae=ae.sheetRows||0;if(W[2]==0&&(W[3]==8||W[3]==9)&&W.length>=16&&W[14]==5&&W[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(W[2]==2)ae.Enum=le,t(W,function(be,Be,fe){switch(fe){case 0:ae.vers=be,be>=4096&&(ae.qpro=!0);break;case 6:we=be;break;case 204:be&&(Re=be);break;case 222:Re=be;break;case 15:case 51:ae.qpro||(be[1].v=be[1].v.slice(1));case 13:case 14:case 16:fe==14&&(be[2]&112)==112&&(be[2]&15)>1&&(be[2]&15)<15&&(be[1].z=ae.dateNF||tr[14],ae.cellDates&&(be[1].t="d",be[1].v=Sf(be[1].v))),ae.qpro&&be[3]>ke&&(oe["!ref"]=yr(we),Pe[re]=oe,Oe.push(re),oe=ae.dense?[]:{},we={s:{r:0,c:0},e:{r:0,c:0}},ke=be[3],re=Re||"Sheet"+(ke+1),Re="");var at=ae.dense?(oe[be[0].r]||[])[be[0].c]:oe[Zt(be[0])];if(at){at.t=be[1].t,at.v=be[1].v,be[1].z!=null&&(at.z=be[1].z),be[1].f!=null&&(at.f=be[1].f);break}ae.dense?(oe[be[0].r]||(oe[be[0].r]=[]),oe[be[0].r][be[0].c]=be[1]):oe[Zt(be[0])]=be[1];break}},ae);else if(W[2]==26||W[2]==14)ae.Enum=X,W[2]==14&&(ae.qpro=!0,W.l=0),t(W,function(be,Be,fe){switch(fe){case 204:re=be;break;case 22:be[1].v=be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(be[3]>ke&&(oe["!ref"]=yr(we),Pe[re]=oe,Oe.push(re),oe=ae.dense?[]:{},we={s:{r:0,c:0},e:{r:0,c:0}},ke=be[3],re="Sheet"+(ke+1)),Ae>0&&be[0].r>=Ae)break;ae.dense?(oe[be[0].r]||(oe[be[0].r]=[]),oe[be[0].r][be[0].c]=be[1]):oe[Zt(be[0])]=be[1],we.e.c<be[0].c&&(we.e.c=be[0].c),we.e.r<be[0].r&&(we.e.r=be[0].r);break;case 27:be[14e3]&&(nt[be[14e3][0]]=be[14e3][1]);break;case 1537:nt[be[0]]=be[1],be[0]==ke&&(re=be[1]);break}},ae);else throw new Error("Unrecognized LOTUS BOF "+W[2]);if(oe["!ref"]=yr(we),Pe[Re||re]=oe,Oe.push(Re||re),!nt.length)return{SheetNames:Oe,Sheets:Pe};for(var Le={},Ee=[],Je=0;Je<nt.length;++Je)Pe[Oe[Je]]?(Ee.push(nt[Je]||Oe[Je]),Le[nt[Je]]=Pe[nt[Je]]||Pe[Oe[Je]]):(Ee.push(nt[Je]),Le[nt[Je]]={"!ref":"A1"});return{SheetNames:Ee,Sheets:Le}}function n(W,K){var ae=K||{};if(+ae.codepage>=0&&_n(+ae.codepage),ae.type=="string")throw new Error("Cannot write WK1 to JS string");var oe=Bm(),re=oa(W["!ref"]),Re=Array.isArray(W),ke=[];Cn(oe,0,d(1030)),Cn(oe,6,b(re));for(var Pe=Math.min(re.e.r,8191),Oe=re.s.r;Oe<=Pe;++Oe)for(var nt=Ka(Oe),we=re.s.c;we<=re.e.c;++we){Oe===re.s.r&&(ke[we]=Oa(we));var Ae=ke[we]+nt,Le=Re?(W[Oe]||[])[we]:W[Ae];if(!(!Le||Le.t=="z"))if(Le.t=="n")(Le.v|0)==Le.v&&Le.v>=-32768&&Le.v<=32767?Cn(oe,13,S(Oe,we,Le.v)):Cn(oe,14,A(Oe,we,Le.v));else{var Ee=Ui(Le);Cn(oe,15,k(Oe,we,Ee.slice(0,239)))}}return Cn(oe,1),oe.end()}function l(W,K){var ae=K||{};if(+ae.codepage>=0&&_n(+ae.codepage),ae.type=="string")throw new Error("Cannot write WK3 to JS string");var oe=Bm();Cn(oe,0,f(W));for(var re=0,Re=0;re<W.SheetNames.length;++re)(W.Sheets[W.SheetNames[re]]||{})["!ref"]&&Cn(oe,27,me(W.SheetNames[re],Re++));var ke=0;for(re=0;re<W.SheetNames.length;++re){var Pe=W.Sheets[W.SheetNames[re]];if(!(!Pe||!Pe["!ref"])){for(var Oe=oa(Pe["!ref"]),nt=Array.isArray(Pe),we=[],Ae=Math.min(Oe.e.r,8191),Le=Oe.s.r;Le<=Ae;++Le)for(var Ee=Ka(Le),Je=Oe.s.c;Je<=Oe.e.c;++Je){Le===Oe.s.r&&(we[Je]=Oa(Je));var be=we[Je]+Ee,Be=nt?(Pe[Le]||[])[Je]:Pe[be];if(!(!Be||Be.t=="z"))if(Be.t=="n")Cn(oe,23,Z(Le,Je,ke,Be.v));else{var fe=Ui(Be);Cn(oe,22,B(Le,Je,ke,fe.slice(0,239)))}}++ke}}return Cn(oe,1),oe.end()}function d(W){var K=Ma(2);return K.write_shift(2,W),K}function f(W){var K=Ma(26);K.write_shift(2,4096),K.write_shift(2,4),K.write_shift(4,0);for(var ae=0,oe=0,re=0,Re=0;Re<W.SheetNames.length;++Re){var ke=W.SheetNames[Re],Pe=W.Sheets[ke];if(!(!Pe||!Pe["!ref"])){++re;var Oe=Ic(Pe["!ref"]);ae<Oe.e.r&&(ae=Oe.e.r),oe<Oe.e.c&&(oe=Oe.e.c)}}return ae>8191&&(ae=8191),K.write_shift(2,ae),K.write_shift(1,re),K.write_shift(1,oe),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(1,1),K.write_shift(1,2),K.write_shift(4,0),K.write_shift(4,0),K}function h(W,K,ae){var oe={s:{c:0,r:0},e:{c:0,r:0}};return K==8&&ae.qpro?(oe.s.c=W.read_shift(1),W.l++,oe.s.r=W.read_shift(2),oe.e.c=W.read_shift(1),W.l++,oe.e.r=W.read_shift(2),oe):(oe.s.c=W.read_shift(2),oe.s.r=W.read_shift(2),K==12&&ae.qpro&&(W.l+=2),oe.e.c=W.read_shift(2),oe.e.r=W.read_shift(2),K==12&&ae.qpro&&(W.l+=2),oe.s.c==65535&&(oe.s.c=oe.e.c=oe.s.r=oe.e.r=0),oe)}function b(W){var K=Ma(8);return K.write_shift(2,W.s.c),K.write_shift(2,W.s.r),K.write_shift(2,W.e.c),K.write_shift(2,W.e.r),K}function g(W,K,ae){var oe=[{c:0,r:0},{t:"n",v:0},0,0];return ae.qpro&&ae.vers!=20768?(oe[0].c=W.read_shift(1),oe[3]=W.read_shift(1),oe[0].r=W.read_shift(2),W.l+=2):(oe[2]=W.read_shift(1),oe[0].c=W.read_shift(2),oe[0].r=W.read_shift(2)),oe}function w(W,K,ae){var oe=W.l+K,re=g(W,K,ae);if(re[1].t="s",ae.vers==20768){W.l++;var Re=W.read_shift(1);return re[1].v=W.read_shift(Re,"utf8"),re}return ae.qpro&&W.l++,re[1].v=W.read_shift(oe-W.l,"cstr"),re}function k(W,K,ae){var oe=Ma(7+ae.length);oe.write_shift(1,255),oe.write_shift(2,K),oe.write_shift(2,W),oe.write_shift(1,39);for(var re=0;re<oe.length;++re){var Re=ae.charCodeAt(re);oe.write_shift(1,Re>=128?95:Re)}return oe.write_shift(1,0),oe}function E(W,K,ae){var oe=g(W,K,ae);return oe[1].v=W.read_shift(2,"i"),oe}function S(W,K,ae){var oe=Ma(7);return oe.write_shift(1,255),oe.write_shift(2,K),oe.write_shift(2,W),oe.write_shift(2,ae,"i"),oe}function D(W,K,ae){var oe=g(W,K,ae);return oe[1].v=W.read_shift(8,"f"),oe}function A(W,K,ae){var oe=Ma(13);return oe.write_shift(1,255),oe.write_shift(2,K),oe.write_shift(2,W),oe.write_shift(8,ae,"f"),oe}function M(W,K,ae){var oe=W.l+K,re=g(W,K,ae);if(re[1].v=W.read_shift(8,"f"),ae.qpro)W.l=oe;else{var Re=W.read_shift(2);L(W.slice(W.l,W.l+Re),re),W.l+=Re}return re}function I(W,K,ae){var oe=K&32768;return K&=-32769,K=(oe?W:0)+(K>=8192?K-16384:K),(oe?"":"$")+(ae?Oa(K):Ka(K))}var F={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function L(W,K){qa(W,0);for(var ae=[],oe=0,re="",Re="",ke="",Pe="";W.l<W.length;){var Oe=W[W.l++];switch(Oe){case 0:ae.push(W.read_shift(8,"f"));break;case 1:Re=I(K[0].c,W.read_shift(2),!0),re=I(K[0].r,W.read_shift(2),!1),ae.push(Re+re);break;case 2:{var nt=I(K[0].c,W.read_shift(2),!0),we=I(K[0].r,W.read_shift(2),!1);Re=I(K[0].c,W.read_shift(2),!0),re=I(K[0].r,W.read_shift(2),!1),ae.push(nt+we+":"+Re+re)}break;case 3:if(W.l<W.length){console.error("WK1 premature formula end");return}break;case 4:ae.push("("+ae.pop()+")");break;case 5:ae.push(W.read_shift(2));break;case 6:{for(var Ae="";Oe=W[W.l++];)Ae+=String.fromCharCode(Oe);ae.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:ae.push("-"+ae.pop());break;case 23:ae.push("+"+ae.pop());break;case 22:ae.push("NOT("+ae.pop()+")");break;case 20:case 21:Pe=ae.pop(),ke=ae.pop(),ae.push(["AND","OR"][Oe-20]+"("+ke+","+Pe+")");break;default:if(Oe<32&&T[Oe])Pe=ae.pop(),ke=ae.pop(),ae.push(ke+T[Oe]+Pe);else if(F[Oe]){if(oe=F[Oe][1],oe==69&&(oe=W[W.l++]),oe>ae.length){console.error("WK1 bad formula parse 0x"+Oe.toString(16)+":|"+ae.join("|")+"|");return}var Le=ae.slice(-oe);ae.length-=oe,ae.push(F[Oe][0]+"("+Le.join(",")+")")}else return Oe<=7?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=24?console.error("WK1 unsupported op "+Oe.toString(16)):Oe<=30?console.error("WK1 invalid opcode "+Oe.toString(16)):Oe<=115?console.error("WK1 unsupported function opcode "+Oe.toString(16)):console.error("WK1 unrecognized opcode "+Oe.toString(16))}}ae.length==1?K[1].f=""+ae[0]:console.error("WK1 bad formula parse |"+ae.join("|")+"|")}function H(W){var K=[{c:0,r:0},{t:"n",v:0},0];return K[0].r=W.read_shift(2),K[3]=W[W.l++],K[0].c=W[W.l++],K}function U(W,K){var ae=H(W);return ae[1].t="s",ae[1].v=W.read_shift(K-4,"cstr"),ae}function B(W,K,ae,oe){var re=Ma(6+oe.length);re.write_shift(2,W),re.write_shift(1,ae),re.write_shift(1,K),re.write_shift(1,39);for(var Re=0;Re<oe.length;++Re){var ke=oe.charCodeAt(Re);re.write_shift(1,ke>=128?95:ke)}return re.write_shift(1,0),re}function P(W,K){var ae=H(W);ae[1].v=W.read_shift(2);var oe=ae[1].v>>1;if(ae[1].v&1)switch(oe&7){case 0:oe=(oe>>3)*5e3;break;case 1:oe=(oe>>3)*500;break;case 2:oe=(oe>>3)/20;break;case 3:oe=(oe>>3)/200;break;case 4:oe=(oe>>3)/2e3;break;case 5:oe=(oe>>3)/2e4;break;case 6:oe=(oe>>3)/16;break;case 7:oe=(oe>>3)/64;break}return ae[1].v=oe,ae}function z(W,K){var ae=H(W),oe=W.read_shift(4),re=W.read_shift(4),Re=W.read_shift(2);if(Re==65535)return oe===0&&re===3221225472?(ae[1].t="e",ae[1].v=15):oe===0&&re===3489660928?(ae[1].t="e",ae[1].v=42):ae[1].v=0,ae;var ke=Re&32768;return Re=(Re&32767)-16446,ae[1].v=(1-ke*2)*(re*Math.pow(2,Re+32)+oe*Math.pow(2,Re)),ae}function Z(W,K,ae,oe){var re=Ma(14);if(re.write_shift(2,W),re.write_shift(1,ae),re.write_shift(1,K),oe==0)return re.write_shift(4,0),re.write_shift(4,0),re.write_shift(2,65535),re;var Re=0,ke=0,Pe=0,Oe=0;return oe<0&&(Re=1,oe=-oe),ke=Math.log2(oe)|0,oe/=Math.pow(2,ke-31),Oe=oe>>>0,(Oe&2147483648)==0&&(oe/=2,++ke,Oe=oe>>>0),oe-=Oe,Oe|=2147483648,Oe>>>=0,oe*=Math.pow(2,32),Pe=oe>>>0,re.write_shift(4,Pe),re.write_shift(4,Oe),ke+=16383+(Re?32768:0),re.write_shift(2,ke),re}function te(W,K){var ae=z(W);return W.l+=K-14,ae}function G(W,K){var ae=H(W),oe=W.read_shift(4);return ae[1].v=oe>>6,ae}function se(W,K){var ae=H(W),oe=W.read_shift(8,"f");return ae[1].v=oe,ae}function ie(W,K){var ae=se(W);return W.l+=K-10,ae}function Y(W,K){return W[W.l+K-1]==0?W.read_shift(K,"cstr"):""}function q(W,K){var ae=W[W.l++];ae>K-1&&(ae=K-1);for(var oe="";oe.length<ae;)oe+=String.fromCharCode(W[W.l++]);return oe}function ce(W,K,ae){if(!(!ae.qpro||K<21)){var oe=W.read_shift(1);W.l+=17,W.l+=1,W.l+=2;var re=W.read_shift(K-21,"cstr");return[oe,re]}}function pe(W,K){for(var ae={},oe=W.l+K;W.l<oe;){var re=W.read_shift(2);if(re==14e3){for(ae[re]=[0,""],ae[re][0]=W.read_shift(2);W[W.l];)ae[re][1]+=String.fromCharCode(W[W.l]),W.l++;W.l++}}return ae}function me(W,K){var ae=Ma(5+W.length);ae.write_shift(2,14e3),ae.write_shift(2,K);for(var oe=0;oe<W.length;++oe){var re=W.charCodeAt(oe);ae[ae.l++]=re>127?95:re}return ae[ae.l++]=0,ae}var le={0:{n:"BOF",f:ja},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:E},14:{n:"NUMBER",f:D},15:{n:"LABEL",f:w},16:{n:"FORMULA",f:M},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:w},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Y},222:{n:"SHEETNAMELP",f:q},65535:{n:""}},X={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:U},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:te},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:pe},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:G},38:{n:"??"},39:{n:"NUMBER27",f:se},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Y},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ce},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:l,to_workbook:a}}();function v7(t){var a={},r=t.match(hs),n=0,l=!1;if(r)for(;n!=r.length;++n){var d=Vt(r[n]);switch(d[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!d.val)break;case"<shadow>":case"<shadow/>":a.shadow=1;break;case"</shadow>":break;case"<charset":if(d.val=="1")break;a.cp=og[parseInt(d.val,10)];break;case"<outline":if(!d.val)break;case"<outline>":case"<outline/>":a.outline=1;break;case"</outline>":break;case"<rFont":a.name=d.val;break;case"<sz":a.sz=d.val;break;case"<strike":if(!d.val)break;case"<strike>":case"<strike/>":a.strike=1;break;case"</strike>":break;case"<u":if(!d.val)break;switch(d.val){case"double":a.uval="double";break;case"singleAccounting":a.uval="single-accounting";break;case"doubleAccounting":a.uval="double-accounting";break}case"<u>":case"<u/>":a.u=1;break;case"</u>":break;case"<b":if(d.val=="0")break;case"<b>":case"<b/>":a.b=1;break;case"</b>":break;case"<i":if(d.val=="0")break;case"<i>":case"<i/>":a.i=1;break;case"</i>":break;case"<color":d.rgb&&(a.color=d.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":a.family=d.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":a.valign=d.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(d[0].charCodeAt(1)!==47&&!l)throw new Error("Unrecognized rich format "+d[0])}}return a}var w7=function(){var t=Z0("t"),a=Z0("rPr");function r(d){var f=d.match(t);if(!f)return{t:"s",v:""};var h={t:"s",v:br(f[1])},b=d.match(a);return b&&(h.s=v7(b[1])),h}var n=/<(?:\w+:)?r>/g,l=/<\/(?:\w+:)?r>/;return function(f){return f.replace(n,"").split(l).map(r).filter(function(h){return h.v})}}(),N7=function(){var a=/(\r\n|\n)/g;function r(l,d,f){var h=[];l.u&&h.push("text-decoration: underline;"),l.uval&&h.push("text-underline-style:"+l.uval+";"),l.sz&&h.push("font-size:"+l.sz+"pt;"),l.outline&&h.push("text-effect: outline;"),l.shadow&&h.push("text-shadow: auto;"),d.push('<span style="'+h.join("")+'">'),l.b&&(d.push("<b>"),f.push("</b>")),l.i&&(d.push("<i>"),f.push("</i>")),l.strike&&(d.push("<s>"),f.push("</s>"));var b=l.valign||"";return b=="superscript"||b=="super"?b="sup":b=="subscript"&&(b="sub"),b!=""&&(d.push("<"+b+">"),f.push("</"+b+">")),f.push("</span>"),l}function n(l){var d=[[],l.v,[]];return l.v?(l.s&&r(l.s,d[0],d[2]),d[0].join("")+d[1].replace(a,"<br/>")+d[2].join("")):""}return function(d){return d.map(n).join("")}}(),k7=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,j7=/<(?:\w+:)?r>/,E7=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function Eg(t,a){var r=a?a.cellHTML:!0,n={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=br(Hr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Hr(t),r&&(n.h=mg(n.t))):t.match(j7)&&(n.r=Hr(t),n.t=br(Hr((t.replace(E7,"").match(k7)||[]).join("").replace(hs,""))),r&&(n.h=N7(w7(n.r)))),n):{t:""}}var C7=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,S7=/<(?:\w+:)?(?:si|sstItem)>/g,A7=/<\/(?:\w+:)?(?:si|sstItem)>/;function _7(t,a){var r=[],n="";if(!t)return r;var l=t.match(C7);if(l){n=l[2].replace(S7,"").split(A7);for(var d=0;d!=n.length;++d){var f=Eg(n[d].trim(),a);f!=null&&(r[r.length]=f)}l=Vt(l[1]),r.Count=l.count,r.Unique=l.uniqueCount}return r}function T7(t){return[t.read_shift(4),t.read_shift(4)]}function D7(t,a){var r=[],n=!1;return Hi(t,function(d,f,h){switch(h){case 159:r.Count=d[0],r.Unique=d[1];break;case 19:r.push(d);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(f.T,!n||a.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function M4(t){for(var a=[],r=t.split(""),n=0;n<r.length;++n)a[n]=r[n].charCodeAt(0);return a}function Oi(t,a){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),a>=4&&(t.l+=a-4),r}function R7(t){var a={};return a.id=t.read_shift(0,"lpp4"),a.R=Oi(t,4),a.U=Oi(t,4),a.W=Oi(t,4),a}function M7(t){for(var a=t.read_shift(4),r=t.l+a-4,n={},l=t.read_shift(4),d=[];l-- >0;)d.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(n.name=t.read_shift(0,"lpp4"),n.comps=d,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return n}function I7(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(M7(t));return a}function O7(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(t.read_shift(0,"lpp4"));return a}function F7(t){var a={};return t.read_shift(4),t.l+=4,a.id=t.read_shift(0,"lpp4"),a.name=t.read_shift(0,"lpp4"),a.R=Oi(t,4),a.U=Oi(t,4),a.W=Oi(t,4),a}function L7(t){var a=F7(t);if(a.ename=t.read_shift(0,"8lpp4"),a.blksz=t.read_shift(4),a.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return a}function I4(t,a){var r=t.l+a,n={};n.Flags=t.read_shift(4)&63,t.l+=4,n.AlgID=t.read_shift(4);var l=!1;switch(n.AlgID){case 26126:case 26127:case 26128:l=n.Flags==36;break;case 26625:l=n.Flags==4;break;case 0:l=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!l)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=t.read_shift(4),n.KeySize=t.read_shift(4),n.ProviderType=t.read_shift(4),t.l+=8,n.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,n}function O4(t,a){var r={},n=t.l+a;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,n),t.l=n,r}function B7(t){var a=Oi(t);switch(a.Minor){case 2:return[a.Minor,P7(t)];case 3:return[a.Minor,z7()];case 4:return[a.Minor,U7(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+a.Minor)}function P7(t){var a=t.read_shift(4);if((a&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),n=I4(t,r),l=O4(t,t.length-t.l);return{t:"Std",h:n,v:l}}function z7(){throw new Error("File is password-protected: ECMA-376 Extensible")}function U7(t){var a=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),n={};return r.replace(hs,function(d){var f=Vt(d);switch(di(f[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":a.forEach(function(h){n[h]=f[h]});break;case"<dataIntegrity":n.encryptedHmacKey=f.encryptedHmacKey,n.encryptedHmacValue=f.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=f.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(f);break;default:throw f[0]}}),n}function H7(t,a){var r={},n=r.EncryptionVersionInfo=Oi(t,4);if(a-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=t.read_shift(4),a-=4;var l=t.read_shift(4);return a-=4,r.EncryptionHeader=I4(t,l),a-=l,r.EncryptionVerifier=O4(t,a),r}function V7(t){var a={},r=a.EncryptionVersionInfo=Oi(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return a.Salt=t.read_shift(16),a.EncryptedVerifier=t.read_shift(16),a.EncryptedVerifierHash=t.read_shift(16),a}function G7(t){var a=0,r,n=M4(t),l=n.length+1,d,f,h,b,g;for(r=Ml(l),r[0]=n.length,d=1;d!=l;++d)r[d]=n[d-1];for(d=l-1;d>=0;--d)f=r[d],h=(a&16384)===0?0:1,b=a<<1&32767,g=h|b,a=g^f;return a^52811}var F4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],a=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(f){return(f/2|f*128)&255},l=function(f,h){return n(f^h)},d=function(f){for(var h=a[f.length-1],b=104,g=f.length-1;g>=0;--g)for(var w=f[g],k=0;k!=7;++k)w&64&&(h^=r[b]),w*=2,--b;return h};return function(f){for(var h=M4(f),b=d(h),g=h.length,w=Ml(16),k=0;k!=16;++k)w[k]=0;var E,S,D;for((g&1)===1&&(E=b>>8,w[g]=l(t[0],E),--g,E=b&255,S=h[h.length-1],w[g]=l(S,E));g>0;)--g,E=b>>8,w[g]=l(h[g],E),--g,E=b&255,w[g]=l(h[g],E);for(g=15,D=15-h.length;D>0;)E=b>>8,w[g]=l(t[D],E),--g,--D,E=b&255,w[g]=l(h[g],E),--g,--D;return w}}(),Y7=function(t,a,r,n,l){l||(l=a),n||(n=F4(t));var d,f;for(d=0;d!=a.length;++d)f=a[d],f^=n[r],f=(f>>5|f<<3)&255,l[d]=f,++r;return[l,r,n]},X7=function(t){var a=0,r=F4(t);return function(n){var l=Y7("",n,a,r);return a=l[1],l[0]}};function q7(t,a,r,n){var l={key:ja(t),verificationBytes:ja(t)};return r.password&&(l.verifier=G7(r.password)),n.valid=l.verificationBytes===l.verifier,n.valid&&(n.insitu=X7(r.password)),l}function $7(t,a,r){var n=r||{};return n.Info=t.read_shift(2),t.l-=2,n.Info===1?n.Data=V7(t):n.Data=H7(t,a),n}function W7(t,a,r){var n={Type:r.biff>=8?t.read_shift(2):0};return n.Type?$7(t,a-2,n):q7(t,r.biff>=8?a:a-2,r,n),n}var K7=function(){function t(l,d){switch(d.type){case"base64":return a(Js(l),d);case"binary":return a(l,d);case"buffer":return a(fr&&Buffer.isBuffer(l)?l.toString("binary"):So(l),d);case"array":return a(No(l),d)}throw new Error("Unrecognized type "+d.type)}function a(l,d){var f=d||{},h=f.dense?[]:{},b=l.match(/\\trowd.*?\\row\b/g);if(!b.length)throw new Error("RTF missing table");var g={s:{c:0,r:0},e:{c:0,r:b.length-1}};return b.forEach(function(w,k){Array.isArray(h)&&(h[k]=[]);for(var E=/\\\w+\b/g,S=0,D,A=-1;D=E.exec(w);){switch(D[0]){case"\\cell":var M=w.slice(S,E.lastIndex-D[0].length);if(M[0]==" "&&(M=M.slice(1)),++A,M.length){var I={v:M,t:"s"};Array.isArray(h)?h[k][A]=I:h[Zt({r:k,c:A})]=I}break}S=E.lastIndex}A>g.e.c&&(g.e.c=A)}),h["!ref"]=yr(g),h}function r(l,d){return Fl(t(l,d),d)}function n(l){for(var d=["{\\rtf1\\ansi"],f=oa(l["!ref"]),h,b=Array.isArray(l),g=f.s.r;g<=f.e.r;++g){d.push("\\trowd\\trautofit1");for(var w=f.s.c;w<=f.e.c;++w)d.push("\\cellx"+(w+1));for(d.push("\\pard\\intbl"),w=f.s.c;w<=f.e.c;++w){var k=Zt({r:g,c:w});h=b?(l[g]||[])[w]:l[k],!(!h||h.v==null&&(!h.f||h.F))&&(d.push(" "+(h.w||(Ui(h),h.w))),d.push("\\cell"))}d.push("\\pard\\intbl\\row")}return d.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:n}}();function Z7(t){var a=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(a.slice(0,2),16),parseInt(a.slice(2,4),16),parseInt(a.slice(4,6),16)]}function ed(t){for(var a=0,r=1;a!=3;++a)r=r*256+(t[a]>255?255:t[a]<0?0:t[a]);return r.toString(16).toUpperCase().slice(1)}function Q7(t){var a=t[0]/255,r=t[1]/255,n=t[2]/255,l=Math.max(a,r,n),d=Math.min(a,r,n),f=l-d;if(f===0)return[0,0,a];var h=0,b=0,g=l+d;switch(b=f/(g>1?2-g:g),l){case a:h=((r-n)/f+6)%6;break;case r:h=(n-a)/f+2;break;case n:h=(a-r)/f+4;break}return[h/6,b,g/2]}function J7(t){var a=t[0],r=t[1],n=t[2],l=r*2*(n<.5?n:1-n),d=n-l/2,f=[d,d,d],h=6*a,b;if(r!==0)switch(h|0){case 0:case 6:b=l*h,f[0]+=l,f[1]+=b;break;case 1:b=l*(2-h),f[0]+=b,f[1]+=l;break;case 2:b=l*(h-2),f[1]+=l,f[2]+=b;break;case 3:b=l*(4-h),f[1]+=b,f[2]+=l;break;case 4:b=l*(h-4),f[2]+=l,f[0]+=b;break;case 5:b=l*(6-h),f[2]+=b,f[0]+=l;break}for(var g=0;g!=3;++g)f[g]=Math.round(f[g]*255);return f}function of(t,a){if(a===0)return t;var r=Q7(Z7(t));return a<0?r[2]=r[2]*(1+a):r[2]=1-(1-r[2])*(1-a),ed(J7(r))}var L4=6,eD=15,tD=1,vs=L4;function cf(t){return Math.floor((t+Math.round(128/vs)/256)*vs)}function df(t){return Math.floor((t-5)/vs*100+.5)/100}function Hm(t){return Math.round((t*vs+5)/vs*256)/256}function um(t){return Hm(df(cf(t)))}function Cg(t){var a=Math.abs(t-um(t)),r=vs;if(a>.005)for(vs=tD;vs<eD;++vs)Math.abs(t-um(t))<=a&&(a=Math.abs(t-um(t)),r=vs);vs=r}function Cc(t){t.width?(t.wpx=cf(t.width),t.wch=df(t.wpx),t.MDW=vs):t.wpx?(t.wch=df(t.wpx),t.width=Hm(t.wch),t.MDW=vs):typeof t.wch=="number"&&(t.width=Hm(t.wch),t.wpx=cf(t.width),t.MDW=vs),t.customWidth&&delete t.customWidth}var rD=96,B4=rD;function P4(t){return t*96/B4}function td(t){return t*B4/96}var aD={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function sD(t,a,r,n){a.Borders=[];var l={},d=!1;(t[0].match(hs)||[]).forEach(function(f){var h=Vt(f);switch(di(h[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":l={},h.diagonalUp&&(l.diagonalUp=Wr(h.diagonalUp)),h.diagonalDown&&(l.diagonalDown=Wr(h.diagonalDown)),a.Borders.push(l);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(n&&n.WTF&&!d)throw new Error("unrecognized "+h[0]+" in borders")}})}function nD(t,a,r,n){a.Fills=[];var l={},d=!1;(t[0].match(hs)||[]).forEach(function(f){var h=Vt(f);switch(di(h[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":l={},a.Fills.push(l);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":a.Fills.push(l),l={};break;case"<patternFill":case"<patternFill>":h.patternType&&(l.patternType=h.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":l.bgColor||(l.bgColor={}),h.indexed&&(l.bgColor.indexed=parseInt(h.indexed,10)),h.theme&&(l.bgColor.theme=parseInt(h.theme,10)),h.tint&&(l.bgColor.tint=parseFloat(h.tint)),h.rgb&&(l.bgColor.rgb=h.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":l.fgColor||(l.fgColor={}),h.theme&&(l.fgColor.theme=parseInt(h.theme,10)),h.tint&&(l.fgColor.tint=parseFloat(h.tint)),h.rgb!=null&&(l.fgColor.rgb=h.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(n&&n.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fills")}})}function iD(t,a,r,n){a.Fonts=[];var l={},d=!1;(t[0].match(hs)||[]).forEach(function(f){var h=Vt(f);switch(di(h[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":a.Fonts.push(l),l={};break;case"<name":h.val&&(l.name=Hr(h.val));break;case"<name/>":case"</name>":break;case"<b":l.bold=h.val?Wr(h.val):1;break;case"<b/>":l.bold=1;break;case"<i":l.italic=h.val?Wr(h.val):1;break;case"<i/>":l.italic=1;break;case"<u":switch(h.val){case"none":l.underline=0;break;case"single":l.underline=1;break;case"double":l.underline=2;break;case"singleAccounting":l.underline=33;break;case"doubleAccounting":l.underline=34;break}break;case"<u/>":l.underline=1;break;case"<strike":l.strike=h.val?Wr(h.val):1;break;case"<strike/>":l.strike=1;break;case"<outline":l.outline=h.val?Wr(h.val):1;break;case"<outline/>":l.outline=1;break;case"<shadow":l.shadow=h.val?Wr(h.val):1;break;case"<shadow/>":l.shadow=1;break;case"<condense":l.condense=h.val?Wr(h.val):1;break;case"<condense/>":l.condense=1;break;case"<extend":l.extend=h.val?Wr(h.val):1;break;case"<extend/>":l.extend=1;break;case"<sz":h.val&&(l.sz=+h.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":h.val&&(l.vertAlign=h.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":h.val&&(l.family=parseInt(h.val,10));break;case"<family/>":case"</family>":break;case"<scheme":h.val&&(l.scheme=h.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(h.val=="1")break;h.codepage=og[parseInt(h.val,10)];break;case"<color":if(l.color||(l.color={}),h.auto&&(l.color.auto=Wr(h.auto)),h.rgb)l.color.rgb=h.rgb.slice(-6);else if(h.indexed){l.color.index=parseInt(h.indexed,10);var b=ho[l.color.index];l.color.index==81&&(b=ho[1]),b||(b=ho[1]),l.color.rgb=b[0].toString(16)+b[1].toString(16)+b[2].toString(16)}else h.theme&&(l.color.theme=parseInt(h.theme,10),h.tint&&(l.color.tint=parseFloat(h.tint)),h.theme&&r.themeElements&&r.themeElements.clrScheme&&(l.color.rgb=of(r.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":d=!0;break;case"</AlternateContent>":d=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(n&&n.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fonts")}})}function lD(t,a,r){a.NumberFmt=[];for(var n=li(tr),l=0;l<n.length;++l)a.NumberFmt[n[l]]=tr[n[l]];var d=t[0].match(hs);if(d)for(l=0;l<d.length;++l){var f=Vt(d[l]);switch(di(f[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var h=br(Hr(f.formatCode)),b=parseInt(f.numFmtId,10);if(a.NumberFmt[b]=h,b>0){if(b>392){for(b=392;b>60&&a.NumberFmt[b]!=null;--b);a.NumberFmt[b]=h}xo(h,b)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+f[0]+" in numFmts")}}}var Ou=["numFmtId","fillId","fontId","borderId","xfId"],Fu=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function oD(t,a,r){a.CellXf=[];var n,l=!1;(t[0].match(hs)||[]).forEach(function(d){var f=Vt(d),h=0;switch(di(f[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=f,delete n[0],h=0;h<Ou.length;++h)n[Ou[h]]&&(n[Ou[h]]=parseInt(n[Ou[h]],10));for(h=0;h<Fu.length;++h)n[Fu[h]]&&(n[Fu[h]]=Wr(n[Fu[h]]));if(a.NumberFmt&&n.numFmtId>392){for(h=392;h>60;--h)if(a.NumberFmt[n.numFmtId]==a.NumberFmt[h]){n.numFmtId=h;break}}a.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var b={};f.vertical&&(b.vertical=f.vertical),f.horizontal&&(b.horizontal=f.horizontal),f.textRotation!=null&&(b.textRotation=f.textRotation),f.indent&&(b.indent=f.indent),f.wrapText&&(b.wrapText=Wr(f.wrapText)),n.alignment=b;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(r&&r.WTF&&!l)throw new Error("unrecognized "+f[0]+" in cellXfs")}})}var cD=function(){var a=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,l=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,d=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(h,b,g){var w={};if(!h)return w;h=h.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var k;return(k=h.match(a))&&lD(k,w,g),(k=h.match(l))&&iD(k,w,b,g),(k=h.match(n))&&nD(k,w,b,g),(k=h.match(d))&&sD(k,w,b,g),(k=h.match(r))&&oD(k,w,g),w}}();function dD(t,a){var r=t.read_shift(2),n=fs(t);return[r,n]}function uD(t,a,r){var n={};n.sz=t.read_shift(2)/20;var l=wT(t);l.fItalic&&(n.italic=1),l.fCondense&&(n.condense=1),l.fExtend&&(n.extend=1),l.fShadow&&(n.shadow=1),l.fOutline&&(n.outline=1),l.fStrikeout&&(n.strike=1);var d=t.read_shift(2);switch(d===700&&(n.bold=1),t.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var f=t.read_shift(1);f!=0&&(n.underline=f);var h=t.read_shift(1);h>0&&(n.family=h);var b=t.read_shift(1);switch(b>0&&(n.charset=b),t.l++,n.color=vT(t),t.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=fs(t),n}var fD=xs;function xD(t,a){var r=t.l+a,n=t.read_shift(2),l=t.read_shift(2);return t.l=r,{ixfe:n,numFmtId:l}}var hD=xs;function mD(t,a,r){var n={};n.NumberFmt=[];for(var l in tr)n.NumberFmt[l]=tr[l];n.CellXf=[],n.Fonts=[];var d=[],f=!1;return Hi(t,function(b,g,w){switch(w){case 44:n.NumberFmt[b[0]]=b[1],xo(b[1],b[0]);break;case 43:n.Fonts.push(b),b.color.theme!=null&&a&&a.themeElements&&a.themeElements.clrScheme&&(b.color.rgb=of(a.themeElements.clrScheme[b.color.theme].rgb,b.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:d[d.length-1]==617&&n.CellXf.push(b);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:d.push(w),f=!0;break;case 38:d.pop(),f=!1;break;default:if(g.T>0)d.push(w);else if(g.T<0)d.pop();else if(!f||r.WTF&&d[d.length-1]!=37)throw new Error("Unexpected record 0x"+w.toString(16))}}),n}var gD=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function pD(t,a,r){a.themeElements.clrScheme=[];var n={};(t[0].match(hs)||[]).forEach(function(l){var d=Vt(l);switch(d[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=d.val;break;case"<a:sysClr":n.rgb=d.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":d[0].charAt(1)==="/"?(a.themeElements.clrScheme[gD.indexOf(d[0])]=n,n={}):n.name=d[0].slice(3,d[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+d[0]+" in clrScheme")}})}function yD(){}function bD(){}var vD=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,wD=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,ND=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function kD(t,a,r){a.themeElements={};var n;[["clrScheme",vD,pD],["fontScheme",wD,yD],["fmtScheme",ND,bD]].forEach(function(l){if(!(n=t.match(l[1])))throw new Error(l[0]+" not found in themeElements");l[2](n,a,r)})}var jD=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function z4(t,a){(!t||t.length===0)&&(t=ED());var r,n={};if(!(r=t.match(jD)))throw new Error("themeElements not found in theme");return kD(r[0],n,a),n.raw=t,n}function ED(t,a){var r=[Zw];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function CD(t,a,r){var n=t.l+a,l=t.read_shift(4);if(l!==124226){if(!r.cellStyles){t.l=n;return}var d=t.slice(t.l);t.l=n;var f;try{f=Kw(d,{type:"array"})}catch{return}var h=Ws(f,"theme/theme/theme1.xml",!0);if(h)return z4(h,r)}}function SD(t){return t.read_shift(4)}function AD(t){var a={};switch(a.xclrType=t.read_shift(2),a.nTintShade=t.read_shift(2),a.xclrType){case 0:t.l+=4;break;case 1:a.xclrValue=_D(t,4);break;case 2:a.xclrValue=C4(t);break;case 3:a.xclrValue=SD(t);break;case 4:t.l+=4;break}return t.l+=8,a}function _D(t,a){return xs(t,a)}function TD(t,a){return xs(t,a)}function DD(t){var a=t.read_shift(2),r=t.read_shift(2)-4,n=[a];switch(a){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=AD(t);break;case 6:n[1]=TD(t,r);break;case 14:case 15:n[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+a+" "+r)}return n}function RD(t,a){var r=t.l+a;t.l+=2;var n=t.read_shift(2);t.l+=2;for(var l=t.read_shift(2),d=[];l-- >0;)d.push(DD(t,r-t.l));return{ixfe:n,ext:d}}function MD(t,a){a.forEach(function(r){r[0]})}function ID(t,a){return{flags:t.read_shift(4),version:t.read_shift(4),name:fs(t)}}function OD(t){for(var a=[],r=t.read_shift(4);r-- >0;)a.push([t.read_shift(4),t.read_shift(4)]);return a}function FD(t){return t.l+=4,t.read_shift(4)!=0}function LD(t,a,r){var n={Types:[],Cell:[],Value:[]},l=r||{},d=[],f=!1,h=2;return Hi(t,function(b,g,w){switch(w){case 335:n.Types.push({name:b.name});break;case 51:b.forEach(function(k){h==1?n.Cell.push({type:n.Types[k[0]-1].name,index:k[1]}):h==0&&n.Value.push({type:n.Types[k[0]-1].name,index:k[1]})});break;case 337:h=b?1:0;break;case 338:h=2;break;case 35:d.push(w),f=!0;break;case 36:d.pop(),f=!1;break;default:if(!g.T){if(!f||l.WTF&&d[d.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}}),n}function BD(t,a,r){var n={Types:[],Cell:[],Value:[]};if(!t)return n;var l=!1,d=2,f;return t.replace(hs,function(h){var b=Vt(h);switch(di(b[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:b.name});break;case"</metadataType>":break;case"<futureMetadata":for(var g=0;g<n.Types.length;++g)n.Types[g].name==b.name&&(f=n.Types[g]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":d==1?n.Cell.push({type:n.Types[b.t-1].name,index:+b.v}):d==0&&n.Value.push({type:n.Types[b.t-1].name,index:+b.v});break;case"</rc>":break;case"<cellMetadata":d=1;break;case"</cellMetadata>":d=2;break;case"<valueMetadata":d=0;break;case"</valueMetadata>":d=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;case"<rvb":if(!f)break;f.offsets||(f.offsets=[]),f.offsets.push(+b.i);break;default:if(!l&&r.WTF)throw new Error("unrecognized "+b[0]+" in metadata")}return h}),n}function PD(t){var a=[];if(!t)return a;var r=1;return(t.match(hs)||[]).forEach(function(n){var l=Vt(n);switch(l[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete l[0],l.i?r=l.i:l.i=r,a.push(l);break}}),a}function zD(t){var a={};a.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),a.r=Zt(r);var n=t.read_shift(1);return n&2&&(a.l="1"),n&8&&(a.a="1"),a}function UD(t,a,r){var n=[];return Hi(t,function(d,f,h){switch(h){case 63:n.push(d);break;default:if(!f.T)throw new Error("Unexpected record 0x"+h.toString(16))}}),n}function HD(t,a,r,n){if(!t)return t;var l=n||{},d=!1;Hi(t,function(h,b,g){switch(g){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:d=!0;break;case 36:d=!1;break;default:if(!b.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}},l)}function VD(t,a){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return a["!id"][r].Target}function U2(t,a,r,n){var l=Array.isArray(t),d;a.forEach(function(f){var h=Ns(f.ref);if(l?(t[h.r]||(t[h.r]=[]),d=t[h.r][h.c]):d=t[f.ref],!d){d={t:"z"},l?t[h.r][h.c]=d:t[f.ref]=d;var b=oa(t["!ref"]||"BDWGO1000001:A1");b.s.r>h.r&&(b.s.r=h.r),b.e.r<h.r&&(b.e.r=h.r),b.s.c>h.c&&(b.s.c=h.c),b.e.c<h.c&&(b.e.c=h.c);var g=yr(b);g!==t["!ref"]&&(t["!ref"]=g)}d.c||(d.c=[]);var w={a:f.author,t:f.t,r:f.r,T:r};f.h&&(w.h=f.h);for(var k=d.c.length-1;k>=0;--k){if(!r&&d.c[k].T)return;r&&!d.c[k].T&&d.c.splice(k,1)}if(r&&n){for(k=0;k<n.length;++k)if(w.a==n[k].id){w.a=n[k].name||w.a;break}}d.c.push(w)})}function GD(t,a){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],l=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);l&&l[1]&&l[1].split(/<\/\w*:?author>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?author[^>]*>(.*)/);h&&r.push(h[1])}});var d=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return d&&d[1]&&d[1].split(/<\/\w*:?comment>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?comment[^>]*>/);if(h){var b=Vt(h[0]),g={author:b.authorId&&r[b.authorId]||"sheetjsghost",ref:b.ref,guid:b.guid},w=Ns(b.ref);if(!(a.sheetRows&&a.sheetRows<=w.r)){var k=f.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),E=!!k&&!!k[1]&&Eg(k[1])||{r:"",t:"",h:""};g.r=E.r,E.r=="<t></t>"&&(E.t=E.h=""),g.t=(E.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),a.cellHTML&&(g.h=E.h),n.push(g)}}}}),n}function YD(t,a){var r=[],n=!1,l={},d=0;return t.replace(hs,function(h,b){var g=Vt(h);switch(di(g[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":l={author:g.personId,guid:g.id,ref:g.ref,T:1};break;case"</threadedComment>":l.t!=null&&r.push(l);break;case"<text>":case"<text":d=b+h.length;break;case"</text>":l.t=t.slice(d,b).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&a.WTF)throw new Error("unrecognized "+g[0]+" in threaded comments")}return h}),r}function XD(t,a){var r=[],n=!1;return t.replace(hs,function(d){var f=Vt(d);switch(di(f[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:f.displayname,id:f.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&a.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return d}),r}function qD(t){var a={};a.iauthor=t.read_shift(4);var r=_o(t);return a.rfx=r.s,a.ref=Zt(r.s),t.l+=16,a}var $D=fs;function WD(t,a){var r=[],n=[],l={},d=!1;return Hi(t,function(h,b,g){switch(g){case 632:n.push(h);break;case 635:l=h;break;case 637:l.t=h.t,l.h=h.h,l.r=h.r;break;case 636:if(l.author=n[l.iauthor],delete l.iauthor,a.sheetRows&&l.rfx&&a.sheetRows<=l.rfx.r)break;l.t||(l.t=""),delete l.rfx,r.push(l);break;case 3072:break;case 35:d=!0;break;case 36:d=!1;break;case 37:break;case 38:break;default:if(!b.T){if(!d||a.WTF)throw new Error("Unexpected record 0x"+g.toString(16))}}}),r}var KD="application/vnd.ms-office.vbaProject";function ZD(t){var a=pr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var l=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");pr.utils.cfb_add(a,l,t.FileIndex[n].content)}}),pr.write(a)}function QD(){return{"!type":"dialog"}}function JD(){return{"!type":"dialog"}}function eR(){return{"!type":"macro"}}function tR(){return{"!type":"macro"}}var wc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,a={r:0,c:0};function r(n,l,d,f){var h=!1,b=!1;d.length==0?b=!0:d.charAt(0)=="["&&(b=!0,d=d.slice(1,-1)),f.length==0?h=!0:f.charAt(0)=="["&&(h=!0,f=f.slice(1,-1));var g=d.length>0?parseInt(d,10)|0:0,w=f.length>0?parseInt(f,10)|0:0;return h?w+=a.c:--w,b?g+=a.r:--g,l+(h?"":"$")+Oa(w)+(b?"":"$")+Ka(g)}return function(l,d){return a=d,l.replace(t,r)}}(),U4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,rR=function(){return function(a,r){return a.replace(U4,function(n,l,d,f,h,b){var g=bg(f)-(d?0:r.c),w=yg(b)-(h?0:r.r),k=w==0?"":h?w+1:"["+w+"]",E=g==0?"":d?g+1:"["+g+"]";return l+"R"+k+"C"+E})}}();function H4(t,a){return t.replace(U4,function(r,n,l,d,f,h){return n+(l=="$"?l+d:Oa(bg(d)+a.c))+(f=="$"?f+h:Ka(yg(h)+a.r))})}function aR(t,a,r){var n=Ic(a),l=n.s,d=Ns(r),f={r:d.r-l.r,c:d.c-l.c};return H4(t,f)}function sR(t){return t.length!=1}function H2(t){return t.replace(/_xlfn\./g,"")}function Na(t){t.l+=1}function Il(t,a){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function V4(t,a,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return G4(t);r.biff==12&&(n=4)}var l=t.read_shift(n),d=t.read_shift(n),f=Il(t),h=Il(t);return{s:{r:l,c:f[0],cRel:f[1],rRel:f[2]},e:{r:d,c:h[0],cRel:h[1],rRel:h[2]}}}function G4(t){var a=Il(t),r=Il(t),n=t.read_shift(1),l=t.read_shift(1);return{s:{r:a[0],c:n,cRel:a[1],rRel:a[2]},e:{r:r[0],c:l,cRel:r[1],rRel:r[2]}}}function nR(t,a,r){if(r.biff<8)return G4(t);var n=t.read_shift(r.biff==12?4:2),l=t.read_shift(r.biff==12?4:2),d=Il(t),f=Il(t);return{s:{r:n,c:d[0],cRel:d[1],rRel:d[2]},e:{r:l,c:f[0],cRel:f[1],rRel:f[2]}}}function Y4(t,a,r){if(r&&r.biff>=2&&r.biff<=5)return iR(t);var n=t.read_shift(r&&r.biff==12?4:2),l=Il(t);return{r:n,c:l[0],cRel:l[1],rRel:l[2]}}function iR(t){var a=Il(t),r=t.read_shift(1);return{r:a[0],c:r,cRel:a[1],rRel:a[2]}}function lR(t){var a=t.read_shift(2),r=t.read_shift(2);return{r:a,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function oR(t,a,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return cR(t);var l=t.read_shift(n>=12?4:2),d=t.read_shift(2),f=(d&16384)>>14,h=(d&32768)>>15;if(d&=16383,h==1)for(;l>524287;)l-=1048576;if(f==1)for(;d>8191;)d=d-16384;return{r:l,c:d,cRel:f,rRel:h}}function cR(t){var a=t.read_shift(2),r=t.read_shift(1),n=(a&32768)>>15,l=(a&16384)>>14;return a&=16383,n==1&&a>=8192&&(a=a-16384),l==1&&r>=128&&(r=r-256),{r:a,c:r,cRel:l,rRel:n}}function dR(t,a,r){var n=(t[t.l++]&96)>>5,l=V4(t,r.biff>=2&&r.biff<=5?6:8,r);return[n,l]}function uR(t,a,r){var n=(t[t.l++]&96)>>5,l=t.read_shift(2,"i"),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}var f=V4(t,d,r);return[n,l,f]}function fR(t,a,r){var n=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function xR(t,a,r){var n=(t[t.l++]&96)>>5,l=t.read_shift(2),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}return t.l+=d,[n,l]}function hR(t,a,r){var n=(t[t.l++]&96)>>5,l=nR(t,a-1,r);return[n,l]}function mR(t,a,r){var n=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[n]}function V2(t){var a=t[t.l+1]&1,r=1;return t.l+=4,[a,r]}function gR(t,a,r){t.l+=2;for(var n=t.read_shift(r&&r.biff==2?1:2),l=[],d=0;d<=n;++d)l.push(t.read_shift(r&&r.biff==2?1:2));return l}function pR(t,a,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function yR(t,a,r){var n=t[t.l+1]&255?1:0;return t.l+=2,[n,t.read_shift(r&&r.biff==2?1:2)]}function bR(t){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(2)]}function vR(t,a,r){var n=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[n]}function X4(t){var a=t.read_shift(1),r=t.read_shift(1);return[a,r]}function wR(t){return t.read_shift(2),X4(t)}function NR(t){return t.read_shift(2),X4(t)}function kR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=Y4(t,0,r);return[n,l]}function jR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=oR(t,0,r);return[n,l]}function ER(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var d=Y4(t,0,r);return[n,l,d]}function CR(t,a,r){var n=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(r&&r.biff<=3?1:2);return[S9[l],W4[l],n]}function SR(t,a,r){var n=t[t.l++],l=t.read_shift(1),d=r&&r.biff<=3?[n==88?-1:0,t.read_shift(1)]:AR(t);return[l,(d[0]===0?W4:C9)[d[1]]]}function AR(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function _R(t,a,r){t.l+=r&&r.biff==2?3:4}function TR(t,a,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var n=t.read_shift(2),l=t.read_shift(r&&r.biff==2?1:2);return[n,l]}function DR(t){return t.l++,To[t.read_shift(1)]}function RR(t){return t.l++,t.read_shift(2)}function MR(t){return t.l++,t.read_shift(1)!==0}function IR(t){return t.l++,cs(t)}function OR(t,a,r){return t.l++,md(t,a-1,r)}function FR(t,a){var r=[t.read_shift(1)];if(a==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ma(t,1)?"TRUE":"FALSE",a!=12&&(t.l+=7);break;case 37:case 16:r[1]=To[t[t.l]],t.l+=a==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=cs(t);break;case 2:r[1]=Do(t,0,{biff:a>0&&a<8?2:a});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function LR(t,a,r){for(var n=t.read_shift(r.biff==12?4:2),l=[],d=0;d!=n;++d)l.push((r.biff==12?_o:Af)(t));return l}function BR(t,a,r){var n=0,l=0;r.biff==12?(n=t.read_shift(4),l=t.read_shift(4)):(l=1+t.read_shift(1),n=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--l==0&&(l=256));for(var d=0,f=[];d!=n&&(f[d]=[]);++d)for(var h=0;h!=l;++h)f[d][h]=FR(t,r.biff);return f}function PR(t,a,r){var n=t.read_shift(1)>>>5&3,l=!r||r.biff>=8?4:2,d=t.read_shift(l);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[n,0,d]}function zR(t,a,r){if(r.biff==5)return UR(t);var n=t.read_shift(1)>>>5&3,l=t.read_shift(2),d=t.read_shift(4);return[n,l,d]}function UR(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var n=t.read_shift(2);return t.l+=12,[a,r,n]}function HR(t,a,r){var n=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var l=t.read_shift(r&&r.biff==2?1:2);return[n,l]}function VR(t,a,r){var n=t.read_shift(1)>>>5&3,l=t.read_shift(r&&r.biff==2?1:2);return[n,l]}function GR(t,a,r){var n=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[n]}function YR(t,a,r){var n=(t[t.l++]&96)>>5,l=t.read_shift(2),d=4;if(r)switch(r.biff){case 5:d=15;break;case 12:d=6;break}return t.l+=d,[n,l]}var XR=xs,qR=xs,$R=xs;function pd(t,a,r){return t.l+=2,[lR(t)]}function Sg(t){return t.l+=6,[]}var WR=pd,KR=Sg,ZR=Sg,QR=pd;function q4(t){return t.l+=2,[ja(t),t.read_shift(2)&1]}var JR=pd,e9=q4,t9=Sg,r9=pd,a9=pd,s9=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function n9(t){t.l+=2;var a=t.read_shift(2),r=t.read_shift(2),n=t.read_shift(4),l=t.read_shift(2),d=t.read_shift(2),f=s9[r>>2&31];return{ixti:a,coltype:r&3,rt:f,idx:n,c:l,C:d}}function i9(t){return t.l+=2,[t.read_shift(4)]}function l9(t,a,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function o9(t,a,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function c9(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function d9(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function u9(t){return t.l+=4,[0,0]}var G2={1:{n:"PtgExp",f:TR},2:{n:"PtgTbl",f:$R},3:{n:"PtgAdd",f:Na},4:{n:"PtgSub",f:Na},5:{n:"PtgMul",f:Na},6:{n:"PtgDiv",f:Na},7:{n:"PtgPower",f:Na},8:{n:"PtgConcat",f:Na},9:{n:"PtgLt",f:Na},10:{n:"PtgLe",f:Na},11:{n:"PtgEq",f:Na},12:{n:"PtgGe",f:Na},13:{n:"PtgGt",f:Na},14:{n:"PtgNe",f:Na},15:{n:"PtgIsect",f:Na},16:{n:"PtgUnion",f:Na},17:{n:"PtgRange",f:Na},18:{n:"PtgUplus",f:Na},19:{n:"PtgUminus",f:Na},20:{n:"PtgPercent",f:Na},21:{n:"PtgParen",f:Na},22:{n:"PtgMissArg",f:Na},23:{n:"PtgStr",f:OR},26:{n:"PtgSheet",f:l9},27:{n:"PtgEndSheet",f:o9},28:{n:"PtgErr",f:DR},29:{n:"PtgBool",f:MR},30:{n:"PtgInt",f:RR},31:{n:"PtgNum",f:IR},32:{n:"PtgArray",f:mR},33:{n:"PtgFunc",f:CR},34:{n:"PtgFuncVar",f:SR},35:{n:"PtgName",f:PR},36:{n:"PtgRef",f:kR},37:{n:"PtgArea",f:dR},38:{n:"PtgMemArea",f:HR},39:{n:"PtgMemErr",f:XR},40:{n:"PtgMemNoMem",f:qR},41:{n:"PtgMemFunc",f:VR},42:{n:"PtgRefErr",f:GR},43:{n:"PtgAreaErr",f:fR},44:{n:"PtgRefN",f:jR},45:{n:"PtgAreaN",f:hR},46:{n:"PtgMemAreaN",f:c9},47:{n:"PtgMemNoMemN",f:d9},57:{n:"PtgNameX",f:zR},58:{n:"PtgRef3d",f:ER},59:{n:"PtgArea3d",f:uR},60:{n:"PtgRefErr3d",f:YR},61:{n:"PtgAreaErr3d",f:xR},255:{}},f9={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},x9={1:{n:"PtgElfLel",f:q4},2:{n:"PtgElfRw",f:r9},3:{n:"PtgElfCol",f:WR},6:{n:"PtgElfRwV",f:a9},7:{n:"PtgElfColV",f:QR},10:{n:"PtgElfRadical",f:JR},11:{n:"PtgElfRadicalS",f:t9},13:{n:"PtgElfColS",f:KR},15:{n:"PtgElfColSV",f:ZR},16:{n:"PtgElfRadicalLel",f:e9},25:{n:"PtgList",f:n9},29:{n:"PtgSxName",f:i9},255:{}},h9={0:{n:"PtgAttrNoop",f:u9},1:{n:"PtgAttrSemi",f:vR},2:{n:"PtgAttrIf",f:yR},4:{n:"PtgAttrChoose",f:gR},8:{n:"PtgAttrGoto",f:pR},16:{n:"PtgAttrSum",f:_R},32:{n:"PtgAttrBaxcel",f:V2},33:{n:"PtgAttrBaxcel",f:V2},64:{n:"PtgAttrSpace",f:wR},65:{n:"PtgAttrSpaceSemi",f:NR},128:{n:"PtgAttrIfError",f:bR},255:{}};function yd(t,a,r,n){if(n.biff<8)return xs(t,a);for(var l=t.l+a,d=[],f=0;f!==r.length;++f)switch(r[f][0]){case"PtgArray":r[f][1]=BR(t,0,n),d.push(r[f][1]);break;case"PtgMemArea":r[f][2]=LR(t,r[f][1],n),d.push(r[f][2]);break;case"PtgExp":n&&n.biff==12&&(r[f][1][1]=t.read_shift(4),d.push(r[f][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[f][0]}return a=l-t.l,a!==0&&d.push(xs(t,a)),d}function bd(t,a,r){for(var n=t.l+a,l,d,f=[];n!=t.l;)a=n-t.l,d=t[t.l],l=G2[d]||G2[f9[d]],(d===24||d===25)&&(l=(d===24?x9:h9)[t[t.l+1]]),!l||!l.f?xs(t,a):f.push([l.n,l.f(t,a,r)]);return f}function m9(t){for(var a=[],r=0;r<t.length;++r){for(var n=t[r],l=[],d=0;d<n.length;++d){var f=n[d];if(f)switch(f[0]){case 2:l.push('"'+f[1].replace(/"/g,'""')+'"');break;default:l.push(f[1])}else l.push("")}a.push(l.join(","))}return a.join(";")}var g9={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function p9(t,a){if(!t&&!(a&&a.biff<=5&&a.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function $4(t,a,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[a]))return t.SheetNames[a];if(!t.XTI)return"SH33TJSERR6";var n=t.XTI[a];if(r.biff<8)return a>1e4&&(a-=65536),a<0&&(a=-a),a==0?"":t.XTI[a-1];if(!n)return"SH33TJSERR1";var l="";if(r.biff>8)switch(t[n[0]][0]){case 357:return l=n[1]==-1?"#REF":t.SheetNames[n[1]],n[1]==n[2]?l:l+":"+t.SheetNames[n[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[n[0]][0];case 355:default:return"SH33TJSSRC"+t[n[0]][0]}switch(t[n[0]][0][0]){case 1025:return l=n[1]==-1?"#REF":t.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?l:l+":"+t.SheetNames[n[2]];case 14849:return t[n[0]].slice(1).map(function(d){return d.Name}).join(";;");default:return t[n[0]][0][3]?(l=n[1]==-1?"#REF":t[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?l:l+":"+t[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function Y2(t,a,r){var n=$4(t,a,r);return n=="#REF"?n:p9(n,r)}function ls(t,a,r,n,l){var d=l&&l.biff||8,f={s:{c:0,r:0}},h=[],b,g,w,k=0,E=0,S,D="";if(!t[0]||!t[0][0])return"";for(var A=-1,M="",I=0,F=t[0].length;I<F;++I){var T=t[0][I];switch(T[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(b=h.pop(),g=h.pop(),A>=0){switch(t[0][A][1][0]){case 0:M=na(" ",t[0][A][1][1]);break;case 1:M=na("\r",t[0][A][1][1]);break;default:if(M="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}g=g+M,A=-1}h.push(g+g9[T[0]]+b);break;case"PtgIsect":b=h.pop(),g=h.pop(),h.push(g+" "+b);break;case"PtgUnion":b=h.pop(),g=h.pop(),h.push(g+","+b);break;case"PtgRange":b=h.pop(),g=h.pop(),h.push(g+":"+b);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":w=F0(T[1][1],f,l),h.push(L0(w,d));break;case"PtgRefN":w=r?F0(T[1][1],r,l):T[1][1],h.push(L0(w,d));break;case"PtgRef3d":k=T[1][1],w=F0(T[1][2],f,l),D=Y2(n,k,l),h.push(D+"!"+L0(w,d));break;case"PtgFunc":case"PtgFuncVar":var L=T[1][0],H=T[1][1];L||(L=0),L&=127;var U=L==0?[]:h.slice(-L);h.length-=L,H==="User"&&(H=U.shift()),h.push(H+"("+U.join(",")+")");break;case"PtgBool":h.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(T[1]);break;case"PtgNum":h.push(String(T[1]));break;case"PtgStr":h.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(T[1]);break;case"PtgAreaN":S=E2(T[1][1],r?{s:r}:f,l),h.push(cm(S,l));break;case"PtgArea":S=E2(T[1][1],f,l),h.push(cm(S,l));break;case"PtgArea3d":k=T[1][1],S=T[1][2],D=Y2(n,k,l),h.push(D+"!"+cm(S,l));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":E=T[1][2];var B=(n.names||[])[E-1]||(n[0]||[])[E],P=B?B.Name:"SH33TJSNAME"+String(E);P&&P.slice(0,6)=="_xlfn."&&!l.xlfn&&(P=P.slice(6)),h.push(P);break;case"PtgNameX":var z=T[1][1];E=T[1][2];var Z;if(l.biff<=5)z<0&&(z=-z),n[z]&&(Z=n[z][E]);else{var te="";if(((n[z]||[])[0]||[])[0]==14849||(((n[z]||[])[0]||[])[0]==1025?n[z][E]&&n[z][E].itab>0&&(te=n.SheetNames[n[z][E].itab-1]+"!"):te=n.SheetNames[E-1]+"!"),n[z]&&n[z][E])te+=n[z][E].Name;else if(n[0]&&n[0][E])te+=n[0][E].Name;else{var G=($4(n,z,l)||"").split(";;");G[E-1]?te=G[E-1]:te+="SH33TJSERRX"}h.push(te);break}Z||(Z={Name:"SH33TJSERRY"}),h.push(Z.Name);break;case"PtgParen":var se="(",ie=")";if(A>=0){switch(M="",t[0][A][1][0]){case 2:se=na(" ",t[0][A][1][1])+se;break;case 3:se=na("\r",t[0][A][1][1])+se;break;case 4:ie=na(" ",t[0][A][1][1])+ie;break;case 5:ie=na("\r",t[0][A][1][1])+ie;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}A=-1}h.push(se+h.pop()+ie);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":w={c:T[1][1],r:T[1][0]};var Y={c:r.c,r:r.r};if(n.sharedf[Zt(w)]){var q=n.sharedf[Zt(w)];h.push(ls(q,f,Y,n,l))}else{var ce=!1;for(b=0;b!=n.arrayf.length;++b)if(g=n.arrayf[b],!(w.c<g[0].s.c||w.c>g[0].e.c)&&!(w.r<g[0].s.r||w.r>g[0].e.r)){h.push(ls(g[1],f,Y,n,l)),ce=!0;break}ce||h.push(T[1])}break;case"PtgArray":h.push("{"+m9(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":A=I;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var pe=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&A>=0&&pe.indexOf(t[0][I][0])==-1){T=t[0][A];var me=!0;switch(T[1][0]){case 4:me=!1;case 0:M=na(" ",T[1][1]);break;case 5:me=!1;case 1:M=na("\r",T[1][1]);break;default:if(M="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}h.push((me?M:"")+h.pop()+(me?"":M)),A=-1}}if(h.length>1&&l.WTF)throw new Error("bad formula stack");return h[0]}function y9(t,a,r){var n=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],xs(t,a-2)];var h=bd(t,f,r);return a!==f+l&&(d=yd(t,a-f-l,h,r)),t.l=n,[h,d]}function b9(t,a,r){var n=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],xs(t,a-2)];var h=bd(t,f,r);return a!==f+l&&(d=yd(t,a-f-l,h,r)),t.l=n,[h,d]}function v9(t,a,r,n){var l=t.l+a,d=bd(t,n,r),f;return l!==t.l&&(f=yd(t,l-t.l,d,r)),[d,f]}function w9(t,a,r){var n=t.l+a,l,d=t.read_shift(2),f=bd(t,d,r);return d==65535?[[],xs(t,a-2)]:(a!==d+2&&(l=yd(t,n-d-2,f,r)),[f,l])}function N9(t){var a;if(Ri(t,t.l+6)!==65535)return[cs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return a=t[t.l+2]===1,t.l+=8,[a,"b"];case 2:return a=t[t.l+2],t.l+=8,[a,"e"];case 3:return t.l+=8,["","s"]}return[]}function fm(t,a,r){var n=t.l+a,l=ui(t);r.biff==2&&++t.l;var d=N9(t),f=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var h=b9(t,n-t.l,r);return{cell:l,val:d[0],formula:h,shared:f>>3&1,tt:d[1]}}function _f(t,a,r){var n=t.read_shift(4),l=bd(t,n,r),d=t.read_shift(4),f=d>0?yd(t,d,l,r):null;return[l,f]}var k9=_f,Tf=_f,j9=_f,E9=_f,C9={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},W4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},S9={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function X2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(a,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function xm(t){var a=t.split(":"),r=a[0].split(".")[0];return[r,a[0].split(".")[1]+(a.length>1?":"+(a[1].split(".")[1]||a[1].split(".")[0]):"")]}var U0={},Nc={};function H0(t,a){if(t){var r=[.7,.7,.75,.75,.3,.3];a=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function K4(t,a,r,n,l,d){try{n.cellNF&&(t.z=tr[a])}catch(h){if(n.WTF)throw h}if(!(t.t==="z"&&!n.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Ha(t.v)),(!n||n.cellText!==!1)&&t.t!=="z")try{if(tr[a]==null&&xo(A8[a]||"General",a),t.t==="e")t.w=t.w||To[t.v];else if(a===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K0(t.v);else if(t.t==="d"){var f=Es(t.v);(f|0)===f?t.w=f.toString(10):t.w=K0(f)}else{if(t.v===void 0)return"";t.w=wo(t.v,Nc)}else t.t==="d"?t.w=mn(a,Es(t.v),Nc):t.w=mn(a,t.v,Nc)}catch(h){if(n.WTF)throw h}if(n.cellStyles&&r!=null)try{t.s=d.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=of(l.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),n.WTF&&(t.s.fgColor.raw_rgb=l.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=of(l.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),n.WTF&&(t.s.bgColor.raw_rgb=l.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(h){if(n.WTF&&d.Fills)throw h}}}function A9(t,a){var r=oa(a);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=yr(r))}var _9=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,T9=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,D9=/<(?:\w:)?hyperlink [^>]*>/mg,R9=/"(\w*:\w*)"/,M9=/<(?:\w:)?col\b[^>]*[\/]?>/g,I9=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,O9=/<(?:\w:)?pageMargins[^>]*\/>/g,Z4=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,F9=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,L9=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function B9(t,a,r,n,l,d,f){if(!t)return t;n||(n={"!id":{}});var h=a.dense?[]:{},b={s:{r:2e6,c:2e6},e:{r:0,c:0}},g="",w="",k=t.match(T9);k?(g=t.slice(0,k.index),w=t.slice(k.index+k[0].length)):g=w=t;var E=g.match(Z4);E?Ag(E[0],h,l,r):(E=g.match(F9))&&P9(E[0],E[1]||"",h,l,r);var S=(g.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(S>0){var D=g.slice(S,S+50).match(R9);D&&A9(h,D[1])}var A=g.match(L9);A&&A[1]&&Y9(A[1],l);var M=[];if(a.cellStyles){var I=g.match(M9);I&&H9(M,I)}k&&X9(k[1],h,a,b,d,f);var F=w.match(I9);F&&(h["!autofilter"]=V9(F[0]));var T=[],L=w.match(_9);if(L)for(S=0;S!=L.length;++S)T[S]=oa(L[S].slice(L[S].indexOf('"')+1));var H=w.match(D9);H&&z9(h,H,n);var U=w.match(O9);if(U&&(h["!margins"]=U9(Vt(U[0]))),!h["!ref"]&&b.e.c>=b.s.c&&b.e.r>=b.s.r&&(h["!ref"]=yr(b)),a.sheetRows>0&&h["!ref"]){var B=oa(h["!ref"]);a.sheetRows<=+B.e.r&&(B.e.r=a.sheetRows-1,B.e.r>b.e.r&&(B.e.r=b.e.r),B.e.r<B.s.r&&(B.s.r=B.e.r),B.e.c>b.e.c&&(B.e.c=b.e.c),B.e.c<B.s.c&&(B.s.c=B.e.c),h["!fullref"]=h["!ref"],h["!ref"]=yr(B))}return M.length>0&&(h["!cols"]=M),T.length>0&&(h["!merges"]=T),h}function Ag(t,a,r,n){var l=Vt(t);r.Sheets[n]||(r.Sheets[n]={}),l.codeName&&(r.Sheets[n].CodeName=br(Hr(l.codeName)))}function P9(t,a,r,n,l){Ag(t.slice(0,t.indexOf(">")),r,n,l)}function z9(t,a,r){for(var n=Array.isArray(t),l=0;l!=a.length;++l){var d=Vt(Hr(a[l]),!0);if(!d.ref)return;var f=((r||{})["!id"]||[])[d.id];f?(d.Target=f.Target,d.location&&(d.Target+="#"+br(d.location))):(d.Target="#"+br(d.location),f={Target:d.Target,TargetMode:"Internal"}),d.Rel=f,d.tooltip&&(d.Tooltip=d.tooltip,delete d.tooltip);for(var h=oa(d.ref),b=h.s.r;b<=h.e.r;++b)for(var g=h.s.c;g<=h.e.c;++g){var w=Zt({c:g,r:b});n?(t[b]||(t[b]=[]),t[b][g]||(t[b][g]={t:"z",v:void 0}),t[b][g].l=d):(t[w]||(t[w]={t:"z",v:void 0}),t[w].l=d)}}}function U9(t){var a={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(a[r]=parseFloat(t[r]))}),a}function H9(t,a){for(var r=!1,n=0;n!=a.length;++n){var l=Vt(a[n],!0);l.hidden&&(l.hidden=Wr(l.hidden));var d=parseInt(l.min,10)-1,f=parseInt(l.max,10)-1;for(l.outlineLevel&&(l.level=+l.outlineLevel||0),delete l.min,delete l.max,l.width=+l.width,!r&&l.width&&(r=!0,Cg(l.width)),Cc(l);d<=f;)t[d++]=Wa(l)}}function V9(t){var a={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return a}var G9=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function Y9(t,a){a.Views||(a.Views=[{}]),(t.match(G9)||[]).forEach(function(r,n){var l=Vt(r);a.Views[n]||(a.Views[n]={}),+l.zoomScale&&(a.Views[n].zoom=+l.zoomScale),Wr(l.rightToLeft)&&(a.Views[n].RTL=!0)})}var X9=function(){var t=/<(?:\w+:)?c[ \/>]/,a=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,l=/ref=["']([^"']*)["']/,d=Z0("v"),f=Z0("f");return function(b,g,w,k,E,S){for(var D=0,A="",M=[],I=[],F=0,T=0,L=0,H="",U,B,P=0,z=0,Z,te,G=0,se=0,ie=Array.isArray(S.CellXf),Y,q=[],ce=[],pe=Array.isArray(g),me=[],le={},X=!1,W=!!w.sheetStubs,K=b.split(a),ae=0,oe=K.length;ae!=oe;++ae){A=K[ae].trim();var re=A.length;if(re!==0){var Re=0;e:for(D=0;D<re;++D)switch(A[D]){case">":if(A[D-1]!="/"){++D;break e}if(w&&w.cellStyles){if(B=Vt(A.slice(Re,D),!0),P=B.r!=null?parseInt(B.r,10):P+1,z=-1,w.sheetRows&&w.sheetRows<P)continue;le={},X=!1,B.ht&&(X=!0,le.hpt=parseFloat(B.ht),le.hpx=td(le.hpt)),B.hidden=="1"&&(X=!0,le.hidden=!0),B.outlineLevel!=null&&(X=!0,le.level=+B.outlineLevel),X&&(me[P-1]=le)}break;case"<":Re=D;break}if(Re>=D)break;if(B=Vt(A.slice(Re,D),!0),P=B.r!=null?parseInt(B.r,10):P+1,z=-1,!(w.sheetRows&&w.sheetRows<P)){k.s.r>P-1&&(k.s.r=P-1),k.e.r<P-1&&(k.e.r=P-1),w&&w.cellStyles&&(le={},X=!1,B.ht&&(X=!0,le.hpt=parseFloat(B.ht),le.hpx=td(le.hpt)),B.hidden=="1"&&(X=!0,le.hidden=!0),B.outlineLevel!=null&&(X=!0,le.level=+B.outlineLevel),X&&(me[P-1]=le)),M=A.slice(D).split(t);for(var ke=0;ke!=M.length&&M[ke].trim().charAt(0)=="<";++ke);for(M=M.slice(ke),D=0;D!=M.length;++D)if(A=M[D].trim(),A.length!==0){if(I=A.match(r),F=D,T=0,L=0,A="<c "+(A.slice(0,1)=="<"?">":"")+A,I!=null&&I.length===2){for(F=0,H=I[1],T=0;T!=H.length&&!((L=H.charCodeAt(T)-64)<1||L>26);++T)F=26*F+L;--F,z=F}else++z;for(T=0;T!=A.length&&A.charCodeAt(T)!==62;++T);if(++T,B=Vt(A.slice(0,T),!0),B.r||(B.r=Zt({r:P-1,c:z})),H=A.slice(T),U={t:""},(I=H.match(d))!=null&&I[1]!==""&&(U.v=br(I[1])),w.cellFormula){if((I=H.match(f))!=null&&I[1]!==""){if(U.f=br(Hr(I[1])).replace(/\r\n/g,`
`),w.xlfn||(U.f=H2(U.f)),I[0].indexOf('t="array"')>-1)U.F=(H.match(l)||[])[1],U.F.indexOf(":")>-1&&q.push([oa(U.F),U.F]);else if(I[0].indexOf('t="shared"')>-1){te=Vt(I[0]);var Pe=br(Hr(I[1]));w.xlfn||(Pe=H2(Pe)),ce[parseInt(te.si,10)]=[te,Pe,B.r]}}else(I=H.match(/<f[^>]*\/>/))&&(te=Vt(I[0]),ce[te.si]&&(U.f=aR(ce[te.si][1],ce[te.si][2],B.r)));var Oe=Ns(B.r);for(T=0;T<q.length;++T)Oe.r>=q[T][0].s.r&&Oe.r<=q[T][0].e.r&&Oe.c>=q[T][0].s.c&&Oe.c<=q[T][0].e.c&&(U.F=q[T][1])}if(B.t==null&&U.v===void 0)if(U.f||U.F)U.v=0,U.t="n";else if(W)U.t="z";else continue;else U.t=B.t||"n";switch(k.s.c>z&&(k.s.c=z),k.e.c<z&&(k.e.c=z),U.t){case"n":if(U.v==""||U.v==null){if(!W)continue;U.t="z"}else U.v=parseFloat(U.v);break;case"s":if(typeof U.v>"u"){if(!W)continue;U.t="z"}else Z=U0[parseInt(U.v,10)],U.v=Z.t,U.r=Z.r,w.cellHTML&&(U.h=Z.h);break;case"str":U.t="s",U.v=U.v!=null?Hr(U.v):"",w.cellHTML&&(U.h=mg(U.v));break;case"inlineStr":I=H.match(n),U.t="s",I!=null&&(Z=Eg(I[1]))?(U.v=Z.t,w.cellHTML&&(U.h=Z.h)):U.v="";break;case"b":U.v=Wr(U.v);break;case"d":w.cellDates?U.v=Ha(U.v,1):(U.v=Es(Ha(U.v,1)),U.t="n");break;case"e":(!w||w.cellText!==!1)&&(U.w=U.v),U.v=y4[U.v];break}if(G=se=0,Y=null,ie&&B.s!==void 0&&(Y=S.CellXf[B.s],Y!=null&&(Y.numFmtId!=null&&(G=Y.numFmtId),w.cellStyles&&Y.fillId!=null&&(se=Y.fillId))),K4(U,G,se,w,E,S),w.cellDates&&ie&&U.t=="n"&&Mc(tr[G])&&(U.t="d",U.v=Sf(U.v)),B.cm&&w.xlmeta){var nt=(w.xlmeta.Cell||[])[+B.cm-1];nt&&nt.type=="XLDAPR"&&(U.D=!0)}if(pe){var we=Ns(B.r);g[we.r]||(g[we.r]=[]),g[we.r][we.c]=U}else g[B.r]=U}}}}me.length>0&&(g["!rows"]=me)}}();function q9(t,a){var r={},n=t.l+a;r.r=t.read_shift(4),t.l+=4;var l=t.read_shift(2);t.l+=1;var d=t.read_shift(1);return t.l=n,d&7&&(r.level=d&7),d&16&&(r.hidden=!0),d&32&&(r.hpt=l/20),r}var $9=_o;function W9(){}function K9(t,a){var r={},n=t[t.l];return++t.l,r.above=!(n&64),r.left=!(n&128),t.l+=18,r.name=yT(t),r}function Z9(t){var a=pn(t);return[a]}function Q9(t){var a=Ao(t);return[a]}function J9(t){var a=pn(t),r=t.read_shift(1);return[a,r,"b"]}function eM(t){var a=Ao(t),r=t.read_shift(1);return[a,r,"b"]}function tM(t){var a=pn(t),r=t.read_shift(1);return[a,r,"e"]}function rM(t){var a=Ao(t),r=t.read_shift(1);return[a,r,"e"]}function aM(t){var a=pn(t),r=t.read_shift(4);return[a,r,"s"]}function sM(t){var a=Ao(t),r=t.read_shift(4);return[a,r,"s"]}function nM(t){var a=pn(t),r=cs(t);return[a,r,"n"]}function Q4(t){var a=Ao(t),r=cs(t);return[a,r,"n"]}function iM(t){var a=pn(t),r=Ng(t);return[a,r,"n"]}function lM(t){var a=Ao(t),r=Ng(t);return[a,r,"n"]}function oM(t){var a=pn(t),r=vg(t);return[a,r,"is"]}function cM(t){var a=pn(t),r=fs(t);return[a,r,"str"]}function dM(t){var a=Ao(t),r=fs(t);return[a,r,"str"]}function uM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"b"];if(r.cellFormula){t.l+=2;var h=Tf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}function fM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"e"];if(r.cellFormula){t.l+=2;var h=Tf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}function xM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=cs(t),f=[l,d,"n"];if(r.cellFormula){t.l+=2;var h=Tf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}function hM(t,a,r){var n=t.l+a,l=pn(t);l.r=r["!row"];var d=fs(t),f=[l,d,"str"];if(r.cellFormula){t.l+=2;var h=Tf(t,n-t.l,r);f[3]=ls(h,null,l,r.supbooks,r)}else t.l=n;return f}var mM=_o;function gM(t,a){var r=t.l+a,n=_o(t),l=wg(t),d=fs(t),f=fs(t),h=fs(t);t.l=r;var b={rfx:n,relId:l,loc:d,display:h};return f&&(b.Tooltip=f),b}function pM(){}function yM(t,a,r){var n=t.l+a,l=m4(t),d=t.read_shift(1),f=[l];if(f[2]=d,r.cellFormula){var h=k9(t,n-t.l,r);f[1]=h}else t.l=n;return f}function bM(t,a,r){var n=t.l+a,l=_o(t),d=[l];if(r.cellFormula){var f=E9(t,n-t.l,r);d[1]=f,t.l=n}else t.l=n;return d}var vM=["left","right","top","bottom","header","footer"];function wM(t){var a={};return vM.forEach(function(r){a[r]=cs(t)}),a}function NM(t){var a=t.read_shift(2);return t.l+=28,{RTL:a&32}}function kM(){}function jM(){}function EM(t,a,r,n,l,d,f){if(!t)return t;var h=a||{};n||(n={"!id":{}});var b=h.dense?[]:{},g,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},k=!1,E=!1,S,D,A,M,I,F,T,L,H,U=[];h.biff=12,h["!row"]=0;var B=0,P=!1,z=[],Z={},te=h.supbooks||l.supbooks||[[]];if(te.sharedf=Z,te.arrayf=z,te.SheetNames=l.SheetNames||l.Sheets.map(function(pe){return pe.name}),!h.supbooks&&(h.supbooks=te,l.Names))for(var G=0;G<l.Names.length;++G)te[0][G+1]=l.Names[G];var se=[],ie=[],Y=!1;uf[16]={n:"BrtShortReal",f:Q4};var q;if(Hi(t,function(me,le,X){if(!E)switch(X){case 148:g=me;break;case 0:S=me,h.sheetRows&&h.sheetRows<=S.r&&(E=!0),L=Ka(M=S.r),h["!row"]=S.r,(me.hidden||me.hpt||me.level!=null)&&(me.hpt&&(me.hpx=td(me.hpt)),ie[me.r]=me);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(D={t:me[2]},me[2]){case"n":D.v=me[1];break;case"s":T=U0[me[1]],D.v=T.t,D.r=T.r;break;case"b":D.v=!!me[1];break;case"e":D.v=me[1],h.cellText!==!1&&(D.w=To[D.v]);break;case"str":D.t="s",D.v=me[1];break;case"is":D.t="s",D.v=me[1].t;break}if((A=f.CellXf[me[0].iStyleRef])&&K4(D,A.numFmtId,null,h,d,f),I=me[0].c==-1?I+1:me[0].c,h.dense?(b[M]||(b[M]=[]),b[M][I]=D):b[Oa(I)+L]=D,h.cellFormula){for(P=!1,B=0;B<z.length;++B){var W=z[B];S.r>=W[0].s.r&&S.r<=W[0].e.r&&I>=W[0].s.c&&I<=W[0].e.c&&(D.F=yr(W[0]),P=!0)}!P&&me.length>3&&(D.f=me[3])}if(w.s.r>S.r&&(w.s.r=S.r),w.s.c>I&&(w.s.c=I),w.e.r<S.r&&(w.e.r=S.r),w.e.c<I&&(w.e.c=I),h.cellDates&&A&&D.t=="n"&&Mc(tr[A.numFmtId])){var K=co(D.v);K&&(D.t="d",D.v=new Date(K.y,K.m-1,K.d,K.H,K.M,K.S,K.u))}q&&(q.type=="XLDAPR"&&(D.D=!0),q=void 0);break;case 1:case 12:if(!h.sheetStubs||k)break;D={t:"z",v:void 0},I=me[0].c==-1?I+1:me[0].c,h.dense?(b[M]||(b[M]=[]),b[M][I]=D):b[Oa(I)+L]=D,w.s.r>S.r&&(w.s.r=S.r),w.s.c>I&&(w.s.c=I),w.e.r<S.r&&(w.e.r=S.r),w.e.c<I&&(w.e.c=I),q&&(q.type=="XLDAPR"&&(D.D=!0),q=void 0);break;case 176:U.push(me);break;case 49:q=((h.xlmeta||{}).Cell||[])[me-1];break;case 494:var ae=n["!id"][me.relId];for(ae?(me.Target=ae.Target,me.loc&&(me.Target+="#"+me.loc),me.Rel=ae):me.relId==""&&(me.Target="#"+me.loc),M=me.rfx.s.r;M<=me.rfx.e.r;++M)for(I=me.rfx.s.c;I<=me.rfx.e.c;++I)h.dense?(b[M]||(b[M]=[]),b[M][I]||(b[M][I]={t:"z",v:void 0}),b[M][I].l=me):(F=Zt({c:I,r:M}),b[F]||(b[F]={t:"z",v:void 0}),b[F].l=me);break;case 426:if(!h.cellFormula)break;z.push(me),H=h.dense?b[M][I]:b[Oa(I)+L],H.f=ls(me[1],w,{r:S.r,c:I},te,h),H.F=yr(me[0]);break;case 427:if(!h.cellFormula)break;Z[Zt(me[0].s)]=me[1],H=h.dense?b[M][I]:b[Oa(I)+L],H.f=ls(me[1],w,{r:S.r,c:I},te,h);break;case 60:if(!h.cellStyles)break;for(;me.e>=me.s;)se[me.e--]={width:me.w/256,hidden:!!(me.flags&1),level:me.level},Y||(Y=!0,Cg(me.w/256)),Cc(se[me.e+1]);break;case 161:b["!autofilter"]={ref:yr(me)};break;case 476:b["!margins"]=me;break;case 147:l.Sheets[r]||(l.Sheets[r]={}),me.name&&(l.Sheets[r].CodeName=me.name),(me.above||me.left)&&(b["!outline"]={above:me.above,left:me.left});break;case 137:l.Views||(l.Views=[{}]),l.Views[0]||(l.Views[0]={}),me.RTL&&(l.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:k=!0;break;case 36:k=!1;break;case 37:k=!0;break;case 38:k=!1;break;default:if(!le.T){if(!k||h.WTF)throw new Error("Unexpected record 0x"+X.toString(16))}}},h),delete h.supbooks,delete h["!row"],!b["!ref"]&&(w.s.r<2e6||g&&(g.e.r>0||g.e.c>0||g.s.r>0||g.s.c>0))&&(b["!ref"]=yr(g||w)),h.sheetRows&&b["!ref"]){var ce=oa(b["!ref"]);h.sheetRows<=+ce.e.r&&(ce.e.r=h.sheetRows-1,ce.e.r>w.e.r&&(ce.e.r=w.e.r),ce.e.r<ce.s.r&&(ce.s.r=ce.e.r),ce.e.c>w.e.c&&(ce.e.c=w.e.c),ce.e.c<ce.s.c&&(ce.s.c=ce.e.c),b["!fullref"]=b["!ref"],b["!ref"]=yr(ce))}return U.length>0&&(b["!merges"]=U),se.length>0&&(b["!cols"]=se),ie.length>0&&(b["!rows"]=ie),b}function CM(t){var a=[],r=t.match(/^<c:numCache>/),n;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(d){var f=d.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);f&&(a[+f[1]]=r?+f[2]:f[2])});var l=br((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(d){n=d.replace(/<.*?>/g,"")}),[a,l,n]}function SM(t,a,r,n,l,d){var f=d||{"!type":"chart"};if(!t)return d;var h=0,b=0,g="A",w={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(k){var E=CM(k);w.s.r=w.s.c=0,w.e.c=h,g=Oa(h),E[0].forEach(function(S,D){f[g+Ka(D)]={t:"n",v:S,z:E[1]},b=D}),w.e.r<b&&(w.e.r=b),++h}),h>0&&(f["!ref"]=yr(w)),f}function AM(t,a,r,n,l){if(!t)return t;n||(n={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f,h=t.match(Z4);return h&&Ag(h[0],d,l,r),(f=t.match(/drawing r:id="(.*?)"/))&&(d["!rel"]=f[1]),n["!id"][d["!rel"]]&&(d["!drawel"]=n["!id"][d["!rel"]]),d}function _M(t,a){t.l+=10;var r=fs(t);return{name:r}}function TM(t,a,r,n,l){if(!t)return t;n||(n={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f=!1;return Hi(t,function(b,g,w){switch(w){case 550:d["!rel"]=b;break;case 651:l.Sheets[r]||(l.Sheets[r]={}),b.name&&(l.Sheets[r].CodeName=b.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:break;case 38:break;default:if(!(g.T>0)){if(!(g.T<0)){if(!f||a.WTF)throw new Error("Unexpected record 0x"+w.toString(16))}}}},a),n["!id"][d["!rel"]]&&(d["!drawel"]=n["!id"][d["!rel"]]),d}var J4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],DM=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],RM=[],MM=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function q2(t,a){for(var r=0;r!=t.length;++r)for(var n=t[r],l=0;l!=a.length;++l){var d=a[l];if(n[d[0]]==null)n[d[0]]=d[1];else switch(d[2]){case"bool":typeof n[d[0]]=="string"&&(n[d[0]]=Wr(n[d[0]]));break;case"int":typeof n[d[0]]=="string"&&(n[d[0]]=parseInt(n[d[0]],10));break}}}function $2(t,a){for(var r=0;r!=a.length;++r){var n=a[r];if(t[n[0]]==null)t[n[0]]=n[1];else switch(n[2]){case"bool":typeof t[n[0]]=="string"&&(t[n[0]]=Wr(t[n[0]]));break;case"int":typeof t[n[0]]=="string"&&(t[n[0]]=parseInt(t[n[0]],10));break}}}function eN(t){$2(t.WBProps,J4),$2(t.CalcPr,MM),q2(t.WBView,DM),q2(t.Sheets,RM),Nc.date1904=Wr(t.WBProps.date1904)}var IM="][*?/\\".split("");function OM(t,a){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return IM.forEach(function(n){if(t.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var FM=/<\w+:workbook/;function LM(t,a){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,l="xmlns",d={},f=0;if(t.replace(hs,function(b,g){var w=Vt(b);switch(di(w[0])){case"<?xml":break;case"<workbook":b.match(FM)&&(l="xmlns"+b.match(/<(\w+):/)[1]),r.xmlns=w[l];break;case"</workbook>":break;case"<fileVersion":delete w[0],r.AppVersion=w;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":J4.forEach(function(k){if(w[k[0]]!=null)switch(k[2]){case"bool":r.WBProps[k[0]]=Wr(w[k[0]]);break;case"int":r.WBProps[k[0]]=parseInt(w[k[0]],10);break;default:r.WBProps[k[0]]=w[k[0]]}}),w.codeName&&(r.WBProps.CodeName=Hr(w.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete w[0],r.WBView.push(w);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(w.state){case"hidden":w.Hidden=1;break;case"veryHidden":w.Hidden=2;break;default:w.Hidden=0}delete w.state,w.name=br(Hr(w.name)),delete w[0],r.Sheets.push(w);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":d={},d.Name=Hr(w.name),w.comment&&(d.Comment=w.comment),w.localSheetId&&(d.Sheet=+w.localSheetId),Wr(w.hidden||"0")&&(d.Hidden=!0),f=g+b.length;break;case"</definedName>":d.Ref=br(Hr(t.slice(f,g))),r.Names.push(d);break;case"<definedName/>":break;case"<calcPr":delete w[0],r.CalcPr=w;break;case"<calcPr/>":delete w[0],r.CalcPr=w;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&a.WTF)throw new Error("unrecognized "+w[0]+" in workbook")}return b}),tT.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return eN(r),r}function BM(t,a){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Pm(t),r.name=fs(t),r}function PM(t,a){var r={},n=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var l=a>8?fs(t):"";return l.length>0&&(r.CodeName=l),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function zM(t,a){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=a-8,r}function UM(t,a,r){var n=t.l+a;t.l+=4,t.l+=1;var l=t.read_shift(4),d=bT(t),f=j9(t,0,r),h=wg(t);t.l=n;var b={Name:d,Ptg:f};return l<268435455&&(b.Sheet=l),h&&(b.Comment=h),b}function HM(t,a){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],l=!1;a||(a={}),a.biff=12;var d=[],f=[[]];return f.SheetNames=[],f.XTI=[],uf[16]={n:"BrtFRTArchID$",f:zM},Hi(t,function(b,g,w){switch(w){case 156:f.SheetNames.push(b.name),r.Sheets.push(b);break;case 153:r.WBProps=b;break;case 39:b.Sheet!=null&&(a.SID=b.Sheet),b.Ref=ls(b.Ptg,null,null,f,a),delete a.SID,delete b.Ptg,d.push(b);break;case 1036:break;case 357:case 358:case 355:case 667:f[0].length?f.push([w,b]):f[0]=[w,b],f[f.length-1].XTI=[];break;case 362:f.length===0&&(f[0]=[],f[0].XTI=[]),f[f.length-1].XTI=f[f.length-1].XTI.concat(b),f.XTI=f.XTI.concat(b);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(w),l=!0;break;case 36:n.pop(),l=!1;break;case 37:n.push(w),l=!0;break;case 38:n.pop(),l=!1;break;case 16:break;default:if(!g.T){if(!l||a.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}},a),eN(r),r.Names=d,r.supbooks=f,r}function VM(t,a,r){return a.slice(-4)===".bin"?HM(t,r):LM(t,r)}function GM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?EM(t,n,r,l,d,f,h):B9(t,n,r,l,d,f,h)}function YM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?TM(t,n,r,l,d):AM(t,n,r,l,d)}function XM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?eR():tR()}function qM(t,a,r,n,l,d,f,h){return a.slice(-4)===".bin"?QD():JD()}function $M(t,a,r,n){return a.slice(-4)===".bin"?mD(t,r,n):cD(t,r,n)}function WM(t,a,r){return z4(t,r)}function KM(t,a,r){return a.slice(-4)===".bin"?D7(t,r):_7(t,r)}function ZM(t,a,r){return a.slice(-4)===".bin"?WD(t,r):GD(t,r)}function QM(t,a,r){return a.slice(-4)===".bin"?UD(t):PD(t)}function JM(t,a,r,n){return r.slice(-4)===".bin"?HD(t,a,r,n):void 0}function eI(t,a,r){return a.slice(-4)===".bin"?LD(t,a,r):BD(t,a,r)}var tN=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,rN=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function En(t,a){var r=t.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var l=t.match(tN),d,f,h,b;if(l)for(b=0;b!=l.length;++b)d=l[b].match(rN),(f=d[1].indexOf(":"))===-1?n[d[1]]=d[2].slice(1,d[2].length-1):(d[1].slice(0,6)==="xmlns:"?h="xmlns"+d[1].slice(6):h=d[1].slice(f+1),n[h]=d[2].slice(1,d[2].length-1));return n}function tI(t){var a=t.split(/\s+/),r={};if(a.length===1)return r;var n=t.match(tN),l,d,f,h;if(n)for(h=0;h!=n.length;++h)l=n[h].match(rN),(d=l[1].indexOf(":"))===-1?r[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?f="xmlns"+l[1].slice(6):f=l[1].slice(d+1),r[f]=l[2].slice(1,l[2].length-1));return r}var V0;function rI(t,a){var r=V0[t]||br(t);return r==="General"?wo(a):mn(r,a)}function aI(t,a,r,n){var l=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":l=Wr(n);break;case"i2":case"int":l=parseInt(n,10);break;case"r4":case"float":l=parseFloat(n);break;case"date":case"dateTime.tz":l=Ha(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[br(a)]=l}function sI(t,a,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||To[t.v]:a==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K0(t.v):t.w=wo(t.v):t.w=rI(a||"General",t.v)}catch(d){if(r.WTF)throw d}try{var n=V0[a]||a||"General";if(r.cellNF&&(t.z=n),r.cellDates&&t.t=="n"&&Mc(n)){var l=co(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}catch(d){if(r.WTF)throw d}}}function nI(t,a,r){if(r.cellStyles&&a.Interior){var n=a.Interior;n.Pattern&&(n.patternType=aD[n.Pattern]||n.Pattern)}t[a.ID]=a}function iI(t,a,r,n,l,d,f,h,b,g){var w="General",k=n.StyleID,E={};g=g||{};var S=[],D=0;for(k===void 0&&h&&(k=h.StyleID),k===void 0&&f&&(k=f.StyleID);d[k]!==void 0&&(d[k].nf&&(w=d[k].nf),d[k].Interior&&S.push(d[k].Interior),!!d[k].Parent);)k=d[k].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Wr(t);break;case"String":n.t="s",n.r=g2(br(t)),n.v=t.indexOf("<")>-1?br(a||t).replace(/<.*?>/g,""):n.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),n.v=(Ha(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=br(t):n.v<60&&(n.v=n.v-1),(!w||w=="General")&&(w="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+t),n.t||(n.t="n");break;case"Error":n.t="e",n.v=y4[t],g.cellText!==!1&&(n.w=t);break;default:t==""&&a==""?n.t="z":(n.t="s",n.v=g2(a||t));break}if(sI(n,w,g),g.cellFormula!==!1)if(n.Formula){var A=br(n.Formula);A.charCodeAt(0)==61&&(A=A.slice(1)),n.f=wc(A,l),delete n.Formula,n.ArrayRange=="RC"?n.F=wc("RC:RC",l):n.ArrayRange&&(n.F=wc(n.ArrayRange,l),b.push([oa(n.F),n.F]))}else for(D=0;D<b.length;++D)l.r>=b[D][0].s.r&&l.r<=b[D][0].e.r&&l.c>=b[D][0].s.c&&l.c<=b[D][0].e.c&&(n.F=b[D][1]);g.cellStyles&&(S.forEach(function(M){!E.patternType&&M.patternType&&(E.patternType=M.patternType)}),n.s=E),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function lI(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function hm(t,a){var r=a||{};Gw();var n=D0(gg(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Hr(n));var l=n.slice(0,1024).toLowerCase(),d=!1;if(l=l.replace(/".*?"/g,""),(l.indexOf(">")&1023)>Math.min(l.indexOf(",")&1023,l.indexOf(";")&1023)){var f=Wa(r);return f.type="string",J0.to_workbook(n,f)}if(l.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(Be){l.indexOf("<"+Be)>=0&&(d=!0)}),d)return gI(n,r);V0={"General Number":"General","General Date":tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tr[15],"Short Date":tr[14],"Long Time":tr[19],"Medium Time":tr[18],"Short Time":tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tr[2],Standard:tr[4],Percent:tr[10],Scientific:tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var h,b=[],g,w={},k=[],E=r.dense?[]:{},S="",D={},A={},M=En('<Data ss:Type="String">'),I=0,F=0,T=0,L={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},U={},B="",P=0,z=[],Z={},te={},G=0,se=[],ie=[],Y={},q=[],ce,pe=!1,me=[],le=[],X={},W=0,K=0,ae={Sheets:[],WBProps:{date1904:!1}},oe={};Q0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var re="";h=Q0.exec(n);)switch(h[3]=(re=h[3]).toLowerCase()){case"data":if(re=="data"){if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break}if(b[b.length-1][1])break;h[1]==="/"?iI(n.slice(I,h.index),B,M,b[b.length-1][0]=="comment"?Y:D,{c:F,r:T},H,q[F],A,me,r):(B="",M=En(h[0]),I=h.index+h[0].length);break;case"cell":if(h[1]==="/")if(ie.length>0&&(D.c=ie),(!r.sheetRows||r.sheetRows>T)&&D.v!==void 0&&(r.dense?(E[T]||(E[T]=[]),E[T][F]=D):E[Oa(F)+Ka(T)]=D),D.HRef&&(D.l={Target:br(D.HRef)},D.HRefScreenTip&&(D.l.Tooltip=D.HRefScreenTip),delete D.HRef,delete D.HRefScreenTip),(D.MergeAcross||D.MergeDown)&&(W=F+(parseInt(D.MergeAcross,10)|0),K=T+(parseInt(D.MergeDown,10)|0),z.push({s:{c:F,r:T},e:{c:W,r:K}})),!r.sheetStubs)D.MergeAcross?F=W+1:++F;else if(D.MergeAcross||D.MergeDown){for(var Re=F;Re<=W;++Re)for(var ke=T;ke<=K;++ke)(Re>F||ke>T)&&(r.dense?(E[ke]||(E[ke]=[]),E[ke][Re]={t:"z"}):E[Oa(Re)+Ka(ke)]={t:"z"});F=W+1}else++F;else D=tI(h[0]),D.Index&&(F=+D.Index-1),F<L.s.c&&(L.s.c=F),F>L.e.c&&(L.e.c=F),h[0].slice(-2)==="/>"&&++F,ie=[];break;case"row":h[1]==="/"||h[0].slice(-2)==="/>"?(T<L.s.r&&(L.s.r=T),T>L.e.r&&(L.e.r=T),h[0].slice(-2)==="/>"&&(A=En(h[0]),A.Index&&(T=+A.Index-1)),F=0,++T):(A=En(h[0]),A.Index&&(T=+A.Index-1),X={},(A.AutoFitHeight=="0"||A.Height)&&(X.hpx=parseInt(A.Height,10),X.hpt=P4(X.hpx),le[T]=X),A.Hidden=="1"&&(X.hidden=!0,le[T]=X));break;case"worksheet":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"));k.push(S),L.s.r<=L.e.r&&L.s.c<=L.e.c&&(E["!ref"]=yr(L),r.sheetRows&&r.sheetRows<=L.e.r&&(E["!fullref"]=E["!ref"],L.e.r=r.sheetRows-1,E["!ref"]=yr(L))),z.length&&(E["!merges"]=z),q.length>0&&(E["!cols"]=q),le.length>0&&(E["!rows"]=le),w[S]=E}else L={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=F=0,b.push([h[3],!1]),g=En(h[0]),S=br(g.Name),E=r.dense?[]:{},z=[],me=[],le=[],oe={name:S,Hidden:0},ae.Sheets.push(oe);break;case"table":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else{if(h[0].slice(-2)=="/>")break;b.push([h[3],!1]),q=[],pe=!1}break;case"style":h[1]==="/"?nI(H,U,r):U=En(h[0]);break;case"numberformat":U.nf=br(En(h[0]).Format||"General"),V0[U.nf]&&(U.nf=V0[U.nf]);for(var Pe=0;Pe!=392&&tr[Pe]!=U.nf;++Pe);if(Pe==392){for(Pe=57;Pe!=392;++Pe)if(tr[Pe]==null){xo(U.nf,Pe);break}}break;case"column":if(b[b.length-1][0]!=="table")break;if(ce=En(h[0]),ce.Hidden&&(ce.hidden=!0,delete ce.Hidden),ce.Width&&(ce.wpx=parseInt(ce.Width,10)),!pe&&ce.wpx>10){pe=!0,vs=L4;for(var Oe=0;Oe<q.length;++Oe)q[Oe]&&Cc(q[Oe])}pe&&Cc(ce),q[ce.Index-1||q.length]=ce;for(var nt=0;nt<+ce.Span;++nt)q[q.length]=Wa(ce);break;case"namedrange":if(h[1]==="/")break;ae.Names||(ae.Names=[]);var we=Vt(h[0]),Ae={Name:we.Name,Ref:wc(we.RefersTo.slice(1),{r:0,c:0})};ae.Sheets.length>0&&(Ae.Sheet=ae.Sheets.length-1),ae.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(h[0].slice(-2)==="/>")break;h[1]==="/"?B+=n.slice(P,h.index):P=h.index+h[0].length;break;case"interior":if(!r.cellStyles)break;U.Interior=En(h[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(h[0].slice(-2)==="/>")break;h[1]==="/"?GT(Z,re,n.slice(G,h.index)):G=h.index+h[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else b.push([h[3],!1]);break;case"comment":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"));lI(Y),ie.push(Y)}else b.push([h[3],!1]),g=En(h[0]),Y={a:g.Author};break;case"autofilter":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else if(h[0].charAt(h[0].length-2)!=="/"){var Le=En(h[0]);E["!autofilter"]={ref:wc(Le.Range).replace(/\$/g,"")},b.push([h[3],!0])}break;case"name":break;case"datavalidation":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(h[1]==="/"){if((g=b.pop())[0]!==h[3])throw new Error("Bad state: "+g.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"null":break;default:if(b.length==0&&h[3]=="document"||b.length==0&&h[3]=="uof")return ev(n,r);var Ee=!0;switch(b[b.length-1][0]){case"officedocumentsettings":switch(h[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ee=!1}break;case"componentoptions":switch(h[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ee=!1}break;case"excelworkbook":switch(h[3]){case"date1904":ae.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ee=!1}break;case"workbookoptions":switch(h[3]){case"owcversion":break;case"height":break;case"width":break;default:Ee=!1}break;case"worksheetoptions":switch(h[3]){case"visible":if(h[0].slice(-2)!=="/>")if(h[1]==="/")switch(n.slice(G,h.index)){case"SheetHidden":oe.Hidden=1;break;case"SheetVeryHidden":oe.Hidden=2;break}else G=h.index+h[0].length;break;case"header":E["!margins"]||H0(E["!margins"]={},"xlml"),isNaN(+Vt(h[0]).Margin)||(E["!margins"].header=+Vt(h[0]).Margin);break;case"footer":E["!margins"]||H0(E["!margins"]={},"xlml"),isNaN(+Vt(h[0]).Margin)||(E["!margins"].footer=+Vt(h[0]).Margin);break;case"pagemargins":var Je=Vt(h[0]);E["!margins"]||H0(E["!margins"]={},"xlml"),isNaN(+Je.Top)||(E["!margins"].top=+Je.Top),isNaN(+Je.Left)||(E["!margins"].left=+Je.Left),isNaN(+Je.Right)||(E["!margins"].right=+Je.Right),isNaN(+Je.Bottom)||(E["!margins"].bottom=+Je.Bottom);break;case"displayrighttoleft":ae.Views||(ae.Views=[]),ae.Views[0]||(ae.Views[0]={}),ae.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ee=!1}break;case"pivottable":case"pivotcache":switch(h[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ee=!1}break;case"pagebreaks":switch(h[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ee=!1}break;case"autofilter":switch(h[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ee=!1}break;case"querytable":switch(h[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ee=!1}break;case"datavalidation":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ee=!1}break;case"sorting":case"conditionalformatting":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ee=!1}break;case"mapinfo":case"schema":case"data":switch(h[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ee=!1}break;case"smarttags":break;default:Ee=!1;break}if(Ee||h[3].match(/!\[CDATA/))break;if(!b[b.length-1][1])throw"Unrecognized tag: "+h[3]+"|"+b.join("|");if(b[b.length-1][0]==="customdocumentproperties"){if(h[0].slice(-2)==="/>")break;h[1]==="/"?aI(te,re,se,n.slice(G,h.index)):(se=h,G=h.index+h[0].length);break}if(r.WTF)throw"Unrecognized tag: "+h[3]+"|"+b.join("|")}var be={};return!r.bookSheets&&!r.bookProps&&(be.Sheets=w),be.SheetNames=k,be.Workbook=ae,be.SSF=Wa(tr),be.Props=Z,be.Custprops=te,be}function Vm(t,a){switch(Dg(a=a||{}),a.type||"base64"){case"base64":return hm(Js(t),a);case"binary":case"buffer":case"file":return hm(t,a);case"array":return hm(So(t),a)}}function oI(t){var a={},r=t.content;if(r.l=28,a.AnsiUserType=r.read_shift(0,"lpstr-ansi"),a.AnsiClipboardFormat=NT(r),r.length-r.l<=4)return a;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,a.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(a.UnicodeClipboardFormat=kT(r),n=r.read_shift(4),n==0||n>40))return a;r.l-=4,a.Reserved2=r.read_shift(0,"lpwstr")}var cI=[60,1084,2066,2165,2175];function dI(t,a,r,n,l){var d=n,f=[],h=r.slice(r.l,r.l+d);if(l&&l.enc&&l.enc.insitu&&h.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:l.enc.insitu(h)}f.push(h),r.l+=d;for(var b=Ri(r,r.l),g=Gm[b],w=0;g!=null&&cI.indexOf(b)>-1;)d=Ri(r,r.l+2),w=r.l+4,b==2066?w+=4:(b==2165||b==2175)&&(w+=12),h=r.slice(w,r.l+4+d),f.push(h),r.l+=4+d,g=Gm[b=Ri(r,r.l)];var k=El(f);qa(k,0);var E=0;k.lens=[];for(var S=0;S<f.length;++S)k.lens.push(E),E+=f[S].length;if(k.length<n)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+k.length+" < "+n;return a.f(k,k.length,l)}function ai(t,a,r){if(t.t!=="z"&&t.XF){var n=0;try{n=t.z||t.XF.numFmtId||0,a.cellNF&&(t.z=tr[n])}catch(d){if(a.WTF)throw d}if(!a||a.cellText!==!1)try{t.t==="e"?t.w=t.w||To[t.v]:n===0||n=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=K0(t.v):t.w=wo(t.v):t.w=mn(n,t.v,{date1904:!!r,dateNF:a&&a.dateNF})}catch(d){if(a.WTF)throw d}if(a.cellDates&&n&&t.t=="n"&&Mc(tr[n]||String(n))){var l=co(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}}function Lu(t,a,r){return{v:t,ixfe:a,t:r}}function uI(t,a){var r={opts:{}},n={},l=a.dense?[]:{},d={},f={},h=null,b=[],g="",w={},k,E="",S,D,A,M,I={},F=[],T,L,H=[],U=[],B={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},z=function(It){return It<8?ho[It]:It<64&&U[It-8]||ho[It]},Z=function(It,$e,jt){var Nt=$e.XF.data;if(!(!Nt||!Nt.patternType||!jt||!jt.cellStyles)){$e.s={},$e.s.patternType=Nt.patternType;var lt;(lt=ed(z(Nt.icvFore)))&&($e.s.fgColor={rgb:lt}),(lt=ed(z(Nt.icvBack)))&&($e.s.bgColor={rgb:lt})}},te=function(It,$e,jt){if(!(X>1)&&!(jt.sheetRows&&It.r>=jt.sheetRows)){if(jt.cellStyles&&$e.XF&&$e.XF.data&&Z(It,$e,jt),delete $e.ixfe,delete $e.XF,k=It,E=Zt(It),(!f||!f.s||!f.e)&&(f={s:{r:0,c:0},e:{r:0,c:0}}),It.r<f.s.r&&(f.s.r=It.r),It.c<f.s.c&&(f.s.c=It.c),It.r+1>f.e.r&&(f.e.r=It.r+1),It.c+1>f.e.c&&(f.e.c=It.c+1),jt.cellFormula&&$e.f){for(var Nt=0;Nt<F.length;++Nt)if(!(F[Nt][0].s.c>It.c||F[Nt][0].s.r>It.r)&&!(F[Nt][0].e.c<It.c||F[Nt][0].e.r<It.r)){$e.F=yr(F[Nt][0]),(F[Nt][0].s.c!=It.c||F[Nt][0].s.r!=It.r)&&delete $e.f,$e.f&&($e.f=""+ls(F[Nt][1],f,It,me,G));break}}jt.dense?(l[It.r]||(l[It.r]=[]),l[It.r][It.c]=$e):l[E]=$e}},G={enc:!1,sbcch:0,snames:[],sharedf:I,arrayf:F,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!a&&!!a.cellStyles,WTF:!!a&&!!a.wtf};a.password&&(G.password=a.password);var se,ie=[],Y=[],q=[],ce=[],pe=!1,me=[];me.SheetNames=G.snames,me.sharedf=G.sharedf,me.arrayf=G.arrayf,me.names=[],me.XTI=[];var le=0,X=0,W=0,K=[],ae=[],oe;G.codepage=1200,_n(1200);for(var re=!1;t.l<t.length-1;){var Re=t.l,ke=t.read_shift(2);if(ke===0&&le===10)break;var Pe=t.l===t.length?0:t.read_shift(2),Oe=Gm[ke];if(Oe&&Oe.f){if(a.bookSheets&&le===133&&ke!==133)break;if(le=ke,Oe.r===2||Oe.r==12){var nt=t.read_shift(2);if(Pe-=2,!G.enc&&nt!==ke&&((nt&255)<<8|nt>>8)!==ke)throw new Error("rt mismatch: "+nt+"!="+ke);Oe.r==12&&(t.l+=10,Pe-=10)}var we={};if(ke===10?we=Oe.f(t,Pe,G):we=dI(ke,Oe,t,Pe,G),X==0&&[9,521,1033,2057].indexOf(le)===-1)continue;switch(ke){case 34:r.opts.Date1904=B.WBProps.date1904=we;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(G.enc||(t.l=0),G.enc=we,!a.password)throw new Error("File is password-protected");if(we.valid==null)throw new Error("Encryption scheme unsupported");if(!we.valid)throw new Error("Password is incorrect");break;case 92:G.lastuser=we;break;case 66:var Ae=Number(we);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}_n(G.codepage=Ae),re=!0;break;case 317:G.rrtabid=we;break;case 25:G.winlocked=we;break;case 439:r.opts.RefreshAll=we;break;case 12:r.opts.CalcCount=we;break;case 16:r.opts.CalcDelta=we;break;case 17:r.opts.CalcIter=we;break;case 13:r.opts.CalcMode=we;break;case 14:r.opts.CalcPrecision=we;break;case 95:r.opts.CalcSaveRecalc=we;break;case 15:G.CalcRefMode=we;break;case 2211:r.opts.FullCalc=we;break;case 129:we.fDialog&&(l["!type"]="dialog"),we.fBelow||((l["!outline"]||(l["!outline"]={})).above=!0),we.fRight||((l["!outline"]||(l["!outline"]={})).left=!0);break;case 224:H.push(we);break;case 430:me.push([we]),me[me.length-1].XTI=[];break;case 35:case 547:me[me.length-1].push(we);break;case 24:case 536:oe={Name:we.Name,Ref:ls(we.rgce,f,null,me,G)},we.itab>0&&(oe.Sheet=we.itab-1),me.names.push(oe),me[0]||(me[0]=[],me[0].XTI=[]),me[me.length-1].push(we),we.Name=="_xlnm._FilterDatabase"&&we.itab>0&&we.rgce&&we.rgce[0]&&we.rgce[0][0]&&we.rgce[0][0][0]=="PtgArea3d"&&(ae[we.itab-1]={ref:yr(we.rgce[0][0][1][2])});break;case 22:G.ExternCount=we;break;case 23:me.length==0&&(me[0]=[],me[0].XTI=[]),me[me.length-1].XTI=me[me.length-1].XTI.concat(we),me.XTI=me.XTI.concat(we);break;case 2196:if(G.biff<8)break;oe!=null&&(oe.Comment=we[1]);break;case 18:l["!protect"]=we;break;case 19:we!==0&&G.WTF&&console.error("Password verifier: "+we);break;case 133:d[we.pos]=we,G.snames.push(we.name);break;case 10:{if(--X)break;if(f.e){if(f.e.r>0&&f.e.c>0){if(f.e.r--,f.e.c--,l["!ref"]=yr(f),a.sheetRows&&a.sheetRows<=f.e.r){var Le=f.e.r;f.e.r=a.sheetRows-1,l["!fullref"]=l["!ref"],l["!ref"]=yr(f),f.e.r=Le}f.e.r++,f.e.c++}ie.length>0&&(l["!merges"]=ie),Y.length>0&&(l["!objects"]=Y),q.length>0&&(l["!cols"]=q),ce.length>0&&(l["!rows"]=ce),B.Sheets.push(P)}g===""?w=l:n[g]=l,l=a.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(G.biff===8&&(G.biff={9:2,521:3,1033:4}[ke]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[we.BIFFVer]||8),G.biffguess=we.BIFFVer==0,we.BIFFVer==0&&we.dt==4096&&(G.biff=5,re=!0,_n(G.codepage=28591)),G.biff==8&&we.BIFFVer==0&&we.dt==16&&(G.biff=2),X++)break;if(l=a.dense?[]:{},G.biff<8&&!re&&(re=!0,_n(G.codepage=a.codepage||1252)),G.biff<5||we.BIFFVer==0&&we.dt==4096){g===""&&(g="Sheet1"),f={s:{r:0,c:0},e:{r:0,c:0}};var Ee={pos:t.l-Pe,name:g};d[Ee.pos]=Ee,G.snames.push(g)}else g=(d[Re]||{name:""}).name;we.dt==32&&(l["!type"]="chart"),we.dt==64&&(l["!type"]="macro"),ie=[],Y=[],G.arrayf=F=[],q=[],ce=[],pe=!1,P={Hidden:(d[Re]||{hs:0}).hs,name:g}}break;case 515:case 3:case 2:l["!type"]=="chart"&&(a.dense?(l[we.r]||[])[we.c]:l[Zt({c:we.c,r:we.r})])&&++we.c,T={ixfe:we.ixfe,XF:H[we.ixfe]||{},v:we.val,t:"n"},W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:we.c,r:we.r},T,a);break;case 5:case 517:T={ixfe:we.ixfe,XF:H[we.ixfe],v:we.val,t:we.t},W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:we.c,r:we.r},T,a);break;case 638:T={ixfe:we.ixfe,XF:H[we.ixfe],v:we.rknum,t:"n"},W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:we.c,r:we.r},T,a);break;case 189:for(var Je=we.c;Je<=we.C;++Je){var be=we.rkrec[Je-we.c][0];T={ixfe:be,XF:H[be],v:we.rkrec[Je-we.c][1],t:"n"},W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:Je,r:we.r},T,a)}break;case 6:case 518:case 1030:{if(we.val=="String"){h=we;break}if(T=Lu(we.val,we.cell.ixfe,we.tt),T.XF=H[T.ixfe],a.cellFormula){var Be=we.formula;if(Be&&Be[0]&&Be[0][0]&&Be[0][0][0]=="PtgExp"){var fe=Be[0][0][1][0],at=Be[0][0][1][1],Ce=Zt({r:fe,c:at});I[Ce]?T.f=""+ls(we.formula,f,we.cell,me,G):T.F=((a.dense?(l[fe]||[])[at]:l[Ce])||{}).F}else T.f=""+ls(we.formula,f,we.cell,me,G)}W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te(we.cell,T,a),h=we}break;case 7:case 519:if(h)h.val=we,T=Lu(we,h.cell.ixfe,"s"),T.XF=H[T.ixfe],a.cellFormula&&(T.f=""+ls(h.formula,f,h.cell,me,G)),W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te(h.cell,T,a),h=null;else throw new Error("String record expects Formula");break;case 33:case 545:{F.push(we);var wt=Zt(we[0].s);if(S=a.dense?(l[we[0].s.r]||[])[we[0].s.c]:l[wt],a.cellFormula&&S){if(!h||!wt||!S)break;S.f=""+ls(we[1],f,we[0],me,G),S.F=yr(we[0])}}break;case 1212:{if(!a.cellFormula)break;if(E){if(!h)break;I[Zt(h.cell)]=we[0],S=a.dense?(l[h.cell.r]||[])[h.cell.c]:l[Zt(h.cell)],(S||{}).f=""+ls(we[0],f,k,me,G)}}break;case 253:T=Lu(b[we.isst].t,we.ixfe,"s"),b[we.isst].h&&(T.h=b[we.isst].h),T.XF=H[T.ixfe],W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:we.c,r:we.r},T,a);break;case 513:a.sheetStubs&&(T={ixfe:we.ixfe,XF:H[we.ixfe],t:"z"},W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:we.c,r:we.r},T,a));break;case 190:if(a.sheetStubs)for(var ut=we.c;ut<=we.C;++ut){var Ct=we.ixfe[ut-we.c];T={ixfe:Ct,XF:H[Ct],t:"z"},W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:ut,r:we.r},T,a)}break;case 214:case 516:case 4:T=Lu(we.val,we.ixfe,"s"),T.XF=H[T.ixfe],W>0&&(T.z=K[T.ixfe>>8&63]),ai(T,a,r.opts.Date1904),te({c:we.c,r:we.r},T,a);break;case 0:case 512:X===1&&(f=we);break;case 252:b=we;break;case 1054:if(G.biff==4){K[W++]=we[1];for(var Mt=0;Mt<W+163&&tr[Mt]!=we[1];++Mt);Mt>=163&&xo(we[1],W+163)}else xo(we[1],we[0]);break;case 30:{K[W++]=we;for(var qt=0;qt<W+163&&tr[qt]!=we;++qt);qt>=163&&xo(we,W+163)}break;case 229:ie=ie.concat(we);break;case 93:Y[we.cmo[0]]=G.lastobj=we;break;case 438:G.lastobj.TxO=we;break;case 127:G.lastobj.ImData=we;break;case 440:for(M=we[0].s.r;M<=we[0].e.r;++M)for(A=we[0].s.c;A<=we[0].e.c;++A)S=a.dense?(l[M]||[])[A]:l[Zt({c:A,r:M})],S&&(S.l=we[1]);break;case 2048:for(M=we[0].s.r;M<=we[0].e.r;++M)for(A=we[0].s.c;A<=we[0].e.c;++A)S=a.dense?(l[M]||[])[A]:l[Zt({c:A,r:M})],S&&S.l&&(S.l.Tooltip=we[1]);break;case 28:{if(G.biff<=5&&G.biff>=2)break;S=a.dense?(l[we[0].r]||[])[we[0].c]:l[Zt(we[0])];var ur=Y[we[2]];S||(a.dense?(l[we[0].r]||(l[we[0].r]=[]),S=l[we[0].r][we[0].c]={t:"z"}):S=l[Zt(we[0])]={t:"z"},f.e.r=Math.max(f.e.r,we[0].r),f.s.r=Math.min(f.s.r,we[0].r),f.e.c=Math.max(f.e.c,we[0].c),f.s.c=Math.min(f.s.c,we[0].c)),S.c||(S.c=[]),D={a:we[1],t:ur.TxO.t},S.c.push(D)}break;case 2173:MD(H[we.ixfe],we.ext);break;case 125:{if(!G.cellStyles)break;for(;we.e>=we.s;)q[we.e--]={width:we.w/256,level:we.level||0,hidden:!!(we.flags&1)},pe||(pe=!0,Cg(we.w/256)),Cc(q[we.e+1])}break;case 520:{var Ut={};we.level!=null&&(ce[we.r]=Ut,Ut.level=we.level),we.hidden&&(ce[we.r]=Ut,Ut.hidden=!0),we.hpt&&(ce[we.r]=Ut,Ut.hpt=we.hpt,Ut.hpx=td(we.hpt))}break;case 38:case 39:case 40:case 41:l["!margins"]||H0(l["!margins"]={}),l["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ke]]=we;break;case 161:l["!margins"]||H0(l["!margins"]={}),l["!margins"].header=we.header,l["!margins"].footer=we.footer;break;case 574:we.RTL&&(B.Views[0].RTL=!0);break;case 146:U=we;break;case 2198:se=we;break;case 140:L=we;break;case 442:g?P.CodeName=we||P.name:B.WBProps.CodeName=we||"ThisWorkbook";break}}else Oe||console.error("Missing Info for XLS Record 0x"+ke.toString(16)),t.l+=Pe}return r.SheetNames=li(d).sort(function(Yt,It){return Number(Yt)-Number(It)}).map(function(Yt){return d[Yt].name}),a.bookSheets||(r.Sheets=n),!r.SheetNames.length&&w["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=w)):r.Preamble=w,r.Sheets&&ae.forEach(function(Yt,It){r.Sheets[r.SheetNames[It]]["!autofilter"]=Yt}),r.Strings=b,r.SSF=Wa(tr),G.enc&&(r.Encryption=G.enc),se&&(r.Themes=se),r.Metadata={},L!==void 0&&(r.Metadata.Country=L),me.names.length>0&&(B.Names=me.names),r.Workbook=B,r}var W2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function fI(t,a,r){var n=pr.find(t,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var l=R2(n,_T,W2.DSI);for(var d in l)a[d]=l[d]}catch(g){if(r.WTF)throw g}var f=pr.find(t,"/!SummaryInformation");if(f&&f.size>0)try{var h=R2(f,TT,W2.SI);for(var b in h)a[b]==null&&(a[b]=h[b])}catch(g){if(r.WTF)throw g}a.HeadingPairs&&a.TitlesOfParts&&(v4(a.HeadingPairs,a.TitlesOfParts,a,r),delete a.HeadingPairs,delete a.TitlesOfParts)}function aN(t,a){a||(a={}),Dg(a),Rw(),a.codepage&&cg(a.codepage);var r,n;if(t.FullPaths){if(pr.find(t,"/encryption"))throw new Error("File is password-protected");r=pr.find(t,"!CompObj"),n=pr.find(t,"/Workbook")||pr.find(t,"/Book")}else{switch(a.type){case"base64":t=An(Js(t));break;case"binary":t=An(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}qa(t,0),n={content:t}}var l,d;if(r&&oI(r),a.bookProps&&!a.bookSheets)l={};else{var f=fr?"buffer":"array";if(n&&n.content)l=uI(n.content,a);else if((d=pr.find(t,"PerfectOffice_MAIN"))&&d.content)l=z0.to_workbook(d.content,(a.type=f,a));else if((d=pr.find(t,"NativeContent_MAIN"))&&d.content)l=z0.to_workbook(d.content,(a.type=f,a));else throw(d=pr.find(t,"MN0"))&&d.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a.bookVBA&&t.FullPaths&&pr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(l.vbaraw=ZD(t))}var h={};return t.FullPaths&&fI(t,h,a),l.Props=l.Custprops=h,a.bookFiles&&(l.cfb=t),l}var uf={0:{f:q9},1:{f:Z9},2:{f:iM},3:{f:tM},4:{f:J9},5:{f:nM},6:{f:cM},7:{f:aM},8:{f:hM},9:{f:xM},10:{f:uM},11:{f:fM},12:{f:Q9},13:{f:lM},14:{f:rM},15:{f:eM},16:{f:Q4},17:{f:dM},18:{f:sM},19:{f:vg},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:UM},40:{},42:{},43:{f:uD},44:{f:dD},45:{f:fD},46:{f:hD},47:{f:xD},48:{},49:{f:mT},50:{},51:{f:OD},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:R4},62:{f:oM},63:{f:zD},64:{f:kM},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:xs,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:NM},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:K9},148:{f:$9,p:16},151:{f:pM},152:{},153:{f:PM},154:{},155:{},156:{f:BM},157:{},158:{},159:{T:1,f:T7},160:{T:-1},161:{T:1,f:_o},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:mM},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:ID},336:{T:-1},337:{f:FD,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Pm},357:{},358:{},359:{},360:{T:1},361:{},362:{f:D4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:yM},427:{f:bM},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:wM},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:W9},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:gM},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Pm},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:$D},633:{T:1},634:{T:-1},635:{T:1,f:qD},636:{T:-1},637:{f:pT},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:_M},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:jM},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Gm={6:{f:fm},10:{f:jl},12:{f:ja},13:{f:ja},14:{f:ma},15:{f:ma},16:{f:cs},17:{f:ma},18:{f:ma},19:{f:ja},20:{f:F2},21:{f:F2},23:{f:D4},24:{f:B2},25:{f:ma},26:{},27:{},28:{f:Y5},29:{},34:{f:ma},35:{f:L2},38:{f:cs},39:{f:cs},40:{f:cs},41:{f:cs},42:{f:ma},43:{f:ma},47:{f:W7},49:{f:C5},51:{f:ja},60:{},61:{f:k5},64:{f:ma},65:{f:E5},66:{f:ja},77:{},80:{},81:{},82:{},85:{f:ja},89:{},90:{},91:{},92:{f:m5},93:{f:q5},94:{},95:{f:ma},96:{},97:{},99:{f:ma},125:{f:R4},128:{f:F5},129:{f:g5},130:{f:ja},131:{f:ma},132:{f:ma},133:{f:p5},134:{},140:{f:J5},141:{f:ja},144:{},146:{f:t7},151:{},152:{},153:{},154:{},155:{},156:{f:ja},157:{},158:{},160:{f:i7},161:{f:a7},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:R5},190:{f:M5},193:{f:jl},197:{},198:{},199:{},200:{},201:{},202:{f:ma},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ja},220:{},221:{f:ma},222:{},224:{f:O5},225:{f:h5},226:{f:jl},227:{},229:{f:X5},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:y5},253:{f:S5},255:{f:b5},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:E4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ma},353:{f:jl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:B5},431:{f:ma},432:{},433:{},434:{},437:{},438:{f:K5},439:{f:ma},440:{f:Z5},441:{},442:{f:gd},443:{},444:{f:ja},445:{},446:{},448:{f:jl},449:{f:N5,r:2},450:{f:jl},512:{f:I2},513:{f:n7},515:{f:L5},516:{f:A5},517:{f:O2},519:{f:l7},520:{f:v5},523:{},545:{f:P2},549:{f:M2},566:{},574:{f:j5},638:{f:D5},659:{},1048:{},1054:{f:_5},1084:{},1212:{f:H5},2048:{f:Q5},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Iu},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:jl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:r7,r:12},2173:{f:RD,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ma,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:U5,r:12},2197:{},2198:{f:CD,r:12},2199:{},2200:{},2201:{},2202:{f:V5,r:12},2203:{f:jl},2204:{},2205:{},2206:{},2207:{},2211:{f:w5},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ja},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:s7},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:e7},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:I2},1:{},2:{f:u7},3:{f:d7},4:{f:c7},5:{f:O2},7:{f:f7},8:{},9:{f:Iu},11:{},22:{f:ja},30:{f:T5},31:{},32:{},33:{f:P2},36:{},37:{f:M2},50:{f:x7},62:{},52:{},67:{},68:{f:ja},69:{},86:{},126:{},127:{f:o7},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:h7},223:{},234:{},354:{},421:{},518:{f:fm},521:{f:Iu},536:{f:B2},547:{f:L2},561:{},579:{},1030:{f:fm},1033:{f:Iu},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Cn(t,a,r,n){var l=a;if(!isNaN(l)){var d=(r||[]).length||0,f=t.next(4);f.write_shift(2,l),f.write_shift(2,d),d>0&&f4(r)&&t.push(r)}}function K2(t,a){var r=a||{},n=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var d=t.match(/<\/table/i),f=l.index,h=d&&d.index||t.length,b=L8(t.slice(f,h),/(:?<tr[^>]*>)/i,"<tr>"),g=-1,w=0,k=0,E=0,S={s:{r:1e7,c:1e7},e:{r:0,c:0}},D=[];for(f=0;f<b.length;++f){var A=b[f].trim(),M=A.slice(0,3).toLowerCase();if(M=="<tr"){if(++g,r.sheetRows&&r.sheetRows<=g){--g;break}w=0;continue}if(!(M!="<td"&&M!="<th")){var I=A.split(/<\/t[dh]>/i);for(h=0;h<I.length;++h){var F=I[h].trim();if(F.match(/<t[dh]/i)){for(var T=F,L=0;T.charAt(0)=="<"&&(L=T.indexOf(">"))>-1;)T=T.slice(L+1);for(var H=0;H<D.length;++H){var U=D[H];U.s.c==w&&U.s.r<g&&g<=U.e.r&&(w=U.e.c+1,H=-1)}var B=Vt(F.slice(0,F.indexOf(">")));E=B.colspan?+B.colspan:1,((k=+B.rowspan)>1||E>1)&&D.push({s:{r:g,c:w},e:{r:g+(k||1)-1,c:w+E-1}});var P=B.t||B["data-t"]||"";if(!T.length){w+=E;continue}if(T=Jw(T),S.s.r>g&&(S.s.r=g),S.e.r<g&&(S.e.r=g),S.s.c>w&&(S.s.c=w),S.e.c<w&&(S.e.c=w),!T.length){w+=E;continue}var z={t:"s",v:T};r.raw||!T.trim().length||P=="s"||(T==="TRUE"?z={t:"b",v:!0}:T==="FALSE"?z={t:"b",v:!1}:isNaN(Dn(T))?isNaN(Ec(T).getDate())||(z={t:"d",v:Ha(T)},r.cellDates||(z={t:"n",v:Es(z.v)}),z.z=r.dateNF||tr[14]):z={t:"n",v:Dn(T)}),r.dense?(n[g]||(n[g]=[]),n[g][w]=z):n[Zt({r:g,c:w})]=z,w+=E}}}}return n["!ref"]=yr(S),D.length&&(n["!merges"]=D),n}function xI(t,a,r,n){for(var l=t["!merges"]||[],d=[],f=a.s.c;f<=a.e.c;++f){for(var h=0,b=0,g=0;g<l.length;++g)if(!(l[g].s.r>r||l[g].s.c>f)&&!(l[g].e.r<r||l[g].e.c<f)){if(l[g].s.r<r||l[g].s.c<f){h=-1;break}h=l[g].e.r-l[g].s.r+1,b=l[g].e.c-l[g].s.c+1;break}if(!(h<0)){var w=Zt({r,c:f}),k=n.dense?(t[r]||[])[f]:t[w],E=k&&k.v!=null&&(k.h||mg(k.w||(Ui(k),k.w)||""))||"",S={};h>1&&(S.rowspan=h),b>1&&(S.colspan=b),n.editable?E='<span contenteditable="true">'+E+"</span>":k&&(S["data-t"]=k&&k.t||"z",k.v!=null&&(S["data-v"]=k.v),k.z!=null&&(S["data-z"]=k.z),k.l&&(k.l.Target||"#").charAt(0)!="#"&&(E='<a href="'+k.l.Target+'">'+E+"</a>")),S.id=(n.id||"sjs")+"-"+w,d.push(J8("td",E,S))}}var D="<tr>";return D+d.join("")+"</tr>"}var hI='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',mI="</body></html>";function gI(t,a){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Fl(K2(r[0],a),a);var n=Mg();return r.forEach(function(l,d){Ig(n,K2(l,a),"Sheet"+(d+1))}),n}function pI(t,a,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function yI(t,a){var r=a||{},n=r.header!=null?r.header:hI,l=r.footer!=null?r.footer:mI,d=[n],f=Ic(t["!ref"]);r.dense=Array.isArray(t),d.push(pI(t,f,r));for(var h=f.s.r;h<=f.e.r;++h)d.push(xI(t,f,h,r));return d.push("</table>"+l),d.join("")}function sN(t,a,r){var n=r||{},l=0,d=0;if(n.origin!=null)if(typeof n.origin=="number")l=n.origin;else{var f=typeof n.origin=="string"?Ns(n.origin):n.origin;l=f.r,d=f.c}var h=a.getElementsByTagName("tr"),b=Math.min(n.sheetRows||1e7,h.length),g={s:{r:0,c:0},e:{r:l,c:d}};if(t["!ref"]){var w=Ic(t["!ref"]);g.s.r=Math.min(g.s.r,w.s.r),g.s.c=Math.min(g.s.c,w.s.c),g.e.r=Math.max(g.e.r,w.e.r),g.e.c=Math.max(g.e.c,w.e.c),l==-1&&(g.e.r=l=w.e.r+1)}var k=[],E=0,S=t["!rows"]||(t["!rows"]=[]),D=0,A=0,M=0,I=0,F=0,T=0;for(t["!cols"]||(t["!cols"]=[]);D<h.length&&A<b;++D){var L=h[D];if(Z2(L)){if(n.display)continue;S[A]={hidden:!0}}var H=L.children;for(M=I=0;M<H.length;++M){var U=H[M];if(!(n.display&&Z2(U))){var B=U.hasAttribute("data-v")?U.getAttribute("data-v"):U.hasAttribute("v")?U.getAttribute("v"):Jw(U.innerHTML),P=U.getAttribute("data-z")||U.getAttribute("z");for(E=0;E<k.length;++E){var z=k[E];z.s.c==I+d&&z.s.r<A+l&&A+l<=z.e.r&&(I=z.e.c+1-d,E=-1)}T=+U.getAttribute("colspan")||1,((F=+U.getAttribute("rowspan")||1)>1||T>1)&&k.push({s:{r:A+l,c:I+d},e:{r:A+l+(F||1)-1,c:I+d+(T||1)-1}});var Z={t:"s",v:B},te=U.getAttribute("data-t")||U.getAttribute("t")||"";B!=null&&(B.length==0?Z.t=te||"z":n.raw||B.trim().length==0||te=="s"||(B==="TRUE"?Z={t:"b",v:!0}:B==="FALSE"?Z={t:"b",v:!1}:isNaN(Dn(B))?isNaN(Ec(B).getDate())||(Z={t:"d",v:Ha(B)},n.cellDates||(Z={t:"n",v:Es(Z.v)}),Z.z=n.dateNF||tr[14]):Z={t:"n",v:Dn(B)})),Z.z===void 0&&P!=null&&(Z.z=P);var G="",se=U.getElementsByTagName("A");if(se&&se.length)for(var ie=0;ie<se.length&&!(se[ie].hasAttribute("href")&&(G=se[ie].getAttribute("href"),G.charAt(0)!="#"));++ie);G&&G.charAt(0)!="#"&&(Z.l={Target:G}),n.dense?(t[A+l]||(t[A+l]=[]),t[A+l][I+d]=Z):t[Zt({c:I+d,r:A+l})]=Z,g.e.c<I+d&&(g.e.c=I+d),I+=T}}++A}return k.length&&(t["!merges"]=(t["!merges"]||[]).concat(k)),g.e.r=Math.max(g.e.r,A-1+l),t["!ref"]=yr(g),A>=b&&(t["!fullref"]=yr((g.e.r=h.length-D+A-1+l,g))),t}function nN(t,a){var r=a||{},n=r.dense?[]:{};return sN(n,t,a)}function bI(t,a){return Fl(nN(t,a),a)}function Z2(t){var a="",r=vI(t);return r&&(a=r(t).getPropertyValue("display")),a||(a=t.style&&t.style.display),a==="none"}function vI(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function wI(t){var a=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,l){return Array(parseInt(l,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=br(a.replace(/<[^>]*>/g,""));return[r]}var Q2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function iN(t,a){var r=a||{},n=gg(t),l=[],d,f,h={name:""},b="",g=0,w,k,E={},S=[],D=r.dense?[]:{},A,M,I={value:""},F="",T=0,L=[],H=-1,U=-1,B={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,z={},Z=[],te={},G=0,se=0,ie=[],Y=1,q=1,ce=[],pe={Names:[]},me={},le=["",""],X=[],W={},K="",ae=0,oe=!1,re=!1,Re=0;for(Q0.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");A=Q0.exec(n);)switch(A[3]=A[3].replace(/_.*$/,"")){case"table":case"":A[1]==="/"?(B.e.c>=B.s.c&&B.e.r>=B.s.r?D["!ref"]=yr(B):D["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=B.e.r&&(D["!fullref"]=D["!ref"],B.e.r=r.sheetRows-1,D["!ref"]=yr(B)),Z.length&&(D["!merges"]=Z),ie.length&&(D["!rows"]=ie),w.name=w.||w.name,typeof JSON<"u"&&JSON.stringify(w),S.push(w.name),E[w.name]=D,re=!1):A[0].charAt(A[0].length-2)!=="/"&&(w=Vt(A[0],!1),H=U=-1,B.s.r=B.s.c=1e7,B.e.r=B.e.c=0,D=r.dense?[]:{},Z=[],ie=[],re=!0);break;case"table-row-group":A[1]==="/"?--P:++P;break;case"table-row":case"":if(A[1]==="/"){H+=Y,Y=1;break}if(k=Vt(A[0],!1),k.?H=k.-1:H==-1&&(H=0),Y=+k["number-rows-repeated"]||1,Y<10)for(Re=0;Re<Y;++Re)P>0&&(ie[H+Re]={level:P});U=-1;break;case"covered-table-cell":A[1]!=="/"&&++U,r.sheetStubs&&(r.dense?(D[H]||(D[H]=[]),D[H][U]={t:"z"}):D[Zt({r:H,c:U})]={t:"z"}),F="",L=[];break;case"table-cell":case"":if(A[0].charAt(A[0].length-2)==="/")++U,I=Vt(A[0],!1),q=parseInt(I["number-columns-repeated"]||"1",10),M={t:"z",v:null},I.formula&&r.cellFormula!=!1&&(M.f=X2(br(I.formula))),(I.||I["value-type"])=="string"&&(M.t="s",M.v=br(I["string-value"]||""),r.dense?(D[H]||(D[H]=[]),D[H][U]=M):D[Zt({r:H,c:U})]=M),U+=q-1;else if(A[1]!=="/"){++U,F="",T=0,L=[],q=1;var ke=Y?H+Y-1:H;if(U>B.e.c&&(B.e.c=U),U<B.s.c&&(B.s.c=U),H<B.s.r&&(B.s.r=H),ke>B.e.r&&(B.e.r=ke),I=Vt(A[0],!1),X=[],W={},M={t:I.||I["value-type"],v:null},r.cellFormula)if(I.formula&&(I.formula=br(I.formula)),I["number-matrix-columns-spanned"]&&I["number-matrix-rows-spanned"]&&(G=parseInt(I["number-matrix-rows-spanned"],10)||0,se=parseInt(I["number-matrix-columns-spanned"],10)||0,te={s:{r:H,c:U},e:{r:H+G-1,c:U+se-1}},M.F=yr(te),ce.push([te,M.F])),I.formula)M.f=X2(I.formula);else for(Re=0;Re<ce.length;++Re)H>=ce[Re][0].s.r&&H<=ce[Re][0].e.r&&U>=ce[Re][0].s.c&&U<=ce[Re][0].e.c&&(M.F=ce[Re][1]);switch((I["number-columns-spanned"]||I["number-rows-spanned"])&&(G=parseInt(I["number-rows-spanned"],10)||0,se=parseInt(I["number-columns-spanned"],10)||0,te={s:{r:H,c:U},e:{r:H+G-1,c:U+se-1}},Z.push(te)),I["number-columns-repeated"]&&(q=parseInt(I["number-columns-repeated"],10)),M.t){case"boolean":M.t="b",M.v=Wr(I["boolean-value"]);break;case"float":M.t="n",M.v=parseFloat(I.value);break;case"percentage":M.t="n",M.v=parseFloat(I.value);break;case"currency":M.t="n",M.v=parseFloat(I.value);break;case"date":M.t="d",M.v=Ha(I["date-value"]),r.cellDates||(M.t="n",M.v=Es(M.v)),M.z="m/d/yy";break;case"time":M.t="n",M.v=I8(I["time-value"])/86400,r.cellDates&&(M.t="d",M.v=Sf(M.v)),M.z="HH:MM:SS";break;case"number":M.t="n",M.v=parseFloat(I.);break;default:if(M.t==="string"||M.t==="text"||!M.t)M.t="s",I["string-value"]!=null&&(F=br(I["string-value"]),L=[]);else throw new Error("Unsupported value type "+M.t)}}else{if(oe=!1,M.t==="s"&&(M.v=F||"",L.length&&(M.R=L),oe=T==0),me.Target&&(M.l=me),X.length>0&&(M.c=X,X=[]),F&&r.cellText!==!1&&(M.w=F),oe&&(M.t="z",delete M.v),(!oe||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var Pe=0;Pe<Y;++Pe){if(q=parseInt(I["number-columns-repeated"]||"1",10),r.dense)for(D[H+Pe]||(D[H+Pe]=[]),D[H+Pe][U]=Pe==0?M:Wa(M);--q>0;)D[H+Pe][U+q]=Wa(M);else for(D[Zt({r:H+Pe,c:U})]=M;--q>0;)D[Zt({r:H+Pe,c:U+q})]=Wa(M);B.e.c<=U&&(B.e.c=U)}q=parseInt(I["number-columns-repeated"]||"1",10),U+=q-1,q=0,M={},F="",L=[]}me={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!0]);break;case"annotation":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d;W.t=F,L.length&&(W.R=L),W.a=K,X.push(W)}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);K="",ae=0,F="",T=0,L=[];break;case"creator":A[1]==="/"?K=n.slice(ae,A.index):ae=A.index+A[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);F="",T=0,L=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(A[1]==="/"){if(z[h.name]=b,(d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&(b="",h=Vt(A[0],!1),l.push([A[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Vt(A[0],!1),b+=Q2[A[3]][f.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Vt(A[0],!1),b+=Q2[A[3]][f.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(A[0].slice(-2)==="/>")break;if(A[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":b+=n.slice(g,A.index);break}else g=A.index+A[0].length;break;case"named-range":f=Vt(A[0],!1),le=xm(f["cell-range-address"]);var Oe={Name:f.name,Ref:le[0]+"!"+le[1]};re&&(Oe.Sheet=S.length),pe.Names.push(Oe);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(A[1]==="/"&&(!I||!I["string-value"])){var nt=wI(n.slice(T,A.index));F=(F.length>0?F+`
`:"")+nt[0]}else Vt(A[0],!1),T=A.index+A[0].length;break;case"s":break;case"database-range":if(A[1]==="/")break;try{le=xm(Vt(A[0])["target-range-address"]),E[le[0]]["!autofilter"]={ref:le[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(A[1]!=="/"){if(me=Vt(A[0],!1),!me.href)break;me.Target=br(me.href),delete me.href,me.Target.charAt(0)=="#"&&me.Target.indexOf(".")>-1?(le=xm(me.Target.slice(1)),me.Target="#"+le[0]+"!"+le[1]):me.Target.match(/^\.\.[\\\/]/)&&(me.Target=me.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(A[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(A)}}var we={Sheets:E,SheetNames:S,Workbook:pe};return r.bookSheets&&delete we.Sheets,we}function J2(t,a){a=a||{},xn(t,"META-INF/manifest.xml")&&LT(ka(t,"META-INF/manifest.xml"),a);var r=Ws(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=iN(Hr(r),a);return xn(t,"meta.xml")&&(n.Props=b4(ka(t,"meta.xml"))),n}function ev(t,a){return iN(t,a)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function _g(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Ym(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Hr(So(t))}function Xm(t){var a=t.reduce(function(l,d){return l+d.length},0),r=new Uint8Array(a),n=0;return t.forEach(function(l){r.set(l,n),n+=l.length}),r}function tv(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function NI(t,a){for(var r=(t[a+15]&127)<<7|t[a+14]>>1,n=t[a+14]&1,l=a+13;l>=a;--l)n=n*256+t[l];return(t[a+15]&128?-n:n)*Math.pow(10,r-6176)}function rd(t,a){var r=a?a[0]:0,n=t[r]&127;e:if(t[r++]>=128&&(n|=(t[r]&127)<<7,t[r++]<128||(n|=(t[r]&127)<<14,t[r++]<128)||(n|=(t[r]&127)<<21,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(n+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return a&&(a[0]=r),n}function Fa(t){var a=0,r=t[a]&127;e:if(t[a++]>=128){if(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128))break e;r|=(t[a]&127)<<28}return r}function ds(t){for(var a=[],r=[0];r[0]<t.length;){var n=r[0],l=rd(t,r),d=l&7;l=Math.floor(l/8);var f=0,h;if(l==0)break;switch(d){case 0:{for(var b=r[0];t[r[0]++]>=128;);h=t.slice(b,r[0])}break;case 5:f=4,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 1:f=8,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 2:f=rd(t,r),h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 3:case 4:default:throw new Error("PB Type ".concat(d," for Field ").concat(l," at offset ").concat(n))}var g={data:h,type:d};a[l]==null?a[l]=[g]:a[l].push(g)}return a}function Tg(t,a){return t?.map(function(r){return a(r.data)})||[]}function kI(t){for(var a,r=[],n=[0];n[0]<t.length;){var l=rd(t,n),d=ds(t.slice(n[0],n[0]+l));n[0]+=l;var f={id:Fa(d[1][0].data),messages:[]};d[2].forEach(function(h){var b=ds(h.data),g=Fa(b[3][0].data);f.messages.push({meta:b,data:t.slice(n[0],n[0]+g)}),n[0]+=g}),(a=d[3])!=null&&a[0]&&(f.merge=Fa(d[3][0].data)>>>0>0),r.push(f)}return r}function jI(t,a){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],n=rd(a,r),l=[];r[0]<a.length;){var d=a[r[0]]&3;if(d==0){var f=a[r[0]++]>>2;if(f<60)++f;else{var h=f-59;f=a[r[0]],h>1&&(f|=a[r[0]+1]<<8),h>2&&(f|=a[r[0]+2]<<16),h>3&&(f|=a[r[0]+3]<<24),f>>>=0,f++,r[0]+=h}l.push(a.slice(r[0],r[0]+f)),r[0]+=f;continue}else{var b=0,g=0;if(d==1?(g=(a[r[0]]>>2&7)+4,b=(a[r[0]++]&224)<<3,b|=a[r[0]++]):(g=(a[r[0]++]>>2)+1,d==2?(b=a[r[0]]|a[r[0]+1]<<8,r[0]+=2):(b=(a[r[0]]|a[r[0]+1]<<8|a[r[0]+2]<<16|a[r[0]+3]<<24)>>>0,r[0]+=4)),l=[Xm(l)],b==0)throw new Error("Invalid offset 0");if(b>l[0].length)throw new Error("Invalid offset beyond length");if(g>=b)for(l.push(l[0].slice(-b)),g-=b;g>=l[l.length-1].length;)l.push(l[l.length-1]),g-=l[l.length-1].length;l.push(l[0].slice(-b,-b+g))}}var w=Xm(l);if(w.length!=n)throw new Error("Unexpected length: ".concat(w.length," != ").concat(n));return w}function EI(t){for(var a=[],r=0;r<t.length;){var n=t[r++],l=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,a.push(jI(n,t.slice(r,r+l))),r+=l}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Xm(a)}function CI(t,a,r,n){var l=_g(t),d=l.getUint32(4,!0),f=(n>1?12:8)+tv(d&(n>1?3470:398))*4,h=-1,b=-1,g=NaN,w=new Date(2001,0,1);d&512&&(h=l.getUint32(f,!0),f+=4),f+=tv(d&(n>1?12288:4096))*4,d&16&&(b=l.getUint32(f,!0),f+=4),d&32&&(g=l.getFloat64(f,!0),f+=8),d&64&&(w.setTime(w.getTime()+l.getFloat64(f,!0)*1e3),f+=8);var k;switch(t[2]){case 0:break;case 2:k={t:"n",v:g};break;case 3:k={t:"s",v:a[b]};break;case 5:k={t:"d",v:w};break;case 6:k={t:"b",v:g>0};break;case 7:k={t:"n",v:g/86400};break;case 8:k={t:"e",v:0};break;case 9:if(h>-1)k={t:"s",v:r[h]};else if(b>-1)k={t:"s",v:a[b]};else if(!isNaN(g))k={t:"n",v:g};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return k}function SI(t,a,r){var n=_g(t),l=n.getUint32(8,!0),d=12,f=-1,h=-1,b=NaN,g=NaN,w=new Date(2001,0,1);l&1&&(b=NI(t,d),d+=16),l&2&&(g=n.getFloat64(d,!0),d+=8),l&4&&(w.setTime(w.getTime()+n.getFloat64(d,!0)*1e3),d+=8),l&8&&(h=n.getUint32(d,!0),d+=4),l&16&&(f=n.getUint32(d,!0),d+=4);var k;switch(t[1]){case 0:break;case 2:k={t:"n",v:b};break;case 3:k={t:"s",v:a[h]};break;case 5:k={t:"d",v:w};break;case 6:k={t:"b",v:g>0};break;case 7:k={t:"n",v:g/86400};break;case 8:k={t:"e",v:0};break;case 9:if(f>-1)k={t:"s",v:r[f]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)));break;case 10:k={t:"n",v:b};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)))}return k}function AI(t,a,r){switch(t[0]){case 0:case 1:case 2:case 3:return CI(t,a,r,t[0]);case 5:return SI(t,a,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function _l(t){var a=ds(t);return rd(a[1][0].data)}function rv(t,a){var r=ds(a.data),n=Fa(r[1][0].data),l=r[3],d=[];return(l||[]).forEach(function(f){var h=ds(f.data),b=Fa(h[1][0].data)>>>0;switch(n){case 1:d[b]=Ym(h[3][0].data);break;case 8:{var g=t[_l(h[9][0].data)][0],w=ds(g.data),k=t[_l(w[1][0].data)][0],E=Fa(k.meta[1][0].data);if(E!=2001)throw new Error("2000 unexpected reference to ".concat(E));var S=ds(k.data);d[b]=S[3].map(function(D){return Ym(D.data)}).join("")}break}}),d}function _I(t,a){var r,n,l,d,f,h,b,g,w,k,E,S,D,A,M=ds(t),I=Fa(M[1][0].data)>>>0,F=Fa(M[2][0].data)>>>0,T=((n=(r=M[8])==null?void 0:r[0])==null?void 0:n.data)&&Fa(M[8][0].data)>0||!1,L,H;if((d=(l=M[7])==null?void 0:l[0])!=null&&d.data&&a!=0)L=(h=(f=M[7])==null?void 0:f[0])==null?void 0:h.data,H=(g=(b=M[6])==null?void 0:b[0])==null?void 0:g.data;else if((k=(w=M[4])==null?void 0:w[0])!=null&&k.data&&a!=1)L=(S=(E=M[4])==null?void 0:E[0])==null?void 0:S.data,H=(A=(D=M[3])==null?void 0:D[0])==null?void 0:A.data;else throw"NUMBERS Tile missing ".concat(a," cell storage");for(var U=T?4:1,B=_g(L),P=[],z=0;z<L.length/2;++z){var Z=B.getUint16(z*2,!0);Z<65535&&P.push([z,Z])}if(P.length!=F)throw"Expected ".concat(F," cells, found ").concat(P.length);var te=[];for(z=0;z<P.length-1;++z)te[P[z][0]]=H.subarray(P[z][1]*U,P[z+1][1]*U);return P.length>=1&&(te[P[P.length-1][0]]=H.subarray(P[P.length-1][1]*U)),{R:I,cells:te}}function TI(t,a){var r,n=ds(a.data),l=(r=n?.[7])!=null&&r[0]?Fa(n[7][0].data)>>>0>0?1:0:-1,d=Tg(n[5],function(f){return _I(f,l)});return{nrows:Fa(n[4][0].data)>>>0,data:d.reduce(function(f,h){return f[h.R]||(f[h.R]=[]),h.cells.forEach(function(b,g){if(f[h.R][g])throw new Error("Duplicate cell r=".concat(h.R," c=").concat(g));f[h.R][g]=b}),f},[])}}function DI(t,a,r){var n,l=ds(a.data),d={s:{r:0,c:0},e:{r:0,c:0}};if(d.e.r=(Fa(l[6][0].data)>>>0)-1,d.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(d.e.c=(Fa(l[7][0].data)>>>0)-1,d.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=yr(d);var f=ds(l[4][0].data),h=rv(t,t[_l(f[4][0].data)][0]),b=(n=f[17])!=null&&n[0]?rv(t,t[_l(f[17][0].data)][0]):[],g=ds(f[3][0].data),w=0;g[1].forEach(function(k){var E=ds(k.data),S=t[_l(E[2][0].data)][0],D=Fa(S.meta[1][0].data);if(D!=6002)throw new Error("6001 unexpected reference to ".concat(D));var A=TI(t,S);A.data.forEach(function(M,I){M.forEach(function(F,T){var L=Zt({r:w+I,c:T}),H=AI(F,h,b);H&&(r[L]=H)})}),w+=A.nrows})}function RI(t,a){var r=ds(a.data),n={"!ref":"A1"},l=t[_l(r[2][0].data)],d=Fa(l[0].meta[1][0].data);if(d!=6001)throw new Error("6000 unexpected reference to ".concat(d));return DI(t,l[0],n),n}function MI(t,a){var r,n=ds(a.data),l={name:(r=n[1])!=null&&r[0]?Ym(n[1][0].data):"",sheets:[]},d=Tg(n[2],_l);return d.forEach(function(f){t[f].forEach(function(h){var b=Fa(h.meta[1][0].data);b==6e3&&l.sheets.push(RI(t,h))})}),l}function II(t,a){var r=Mg(),n=ds(a.data),l=Tg(n[1],_l);if(l.forEach(function(d){t[d].forEach(function(f){var h=Fa(f.meta[1][0].data);if(h==2){var b=MI(t,f);b.sheets.forEach(function(g,w){Ig(r,g,w==0?b.name:b.name+"_"+w,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function mm(t){var a,r,n,l,d={},f=[];if(t.FullPaths.forEach(function(b){if(b.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(b){if(b.name.match(/\.iwa$/)){var g;try{g=EI(b.content)}catch(k){return console.log("?? "+b.content.length+" "+(k.message||k))}var w;try{w=kI(g)}catch(k){return console.log("## "+(k.message||k))}w.forEach(function(k){d[k.id]=k.messages,f.push(k.id)})}}),!f.length)throw new Error("File has no messages");var h=((l=(n=(r=(a=d?.[1])==null?void 0:a[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:l[0].data)&&Fa(d[1][0].meta[1][0].data)==1&&d[1][0];if(h||f.forEach(function(b){d[b].forEach(function(g){var w=Fa(g.meta[1][0].data)>>>0;if(w==1)if(!h)h=g;else throw new Error("Document has multiple roots")})}),!h)throw new Error("Cannot find Document root");return II(d,h)}function OI(t){return function(r){for(var n=0;n!=t.length;++n){var l=t[n];r[l[0]]===void 0&&(r[l[0]]=l[1]),l[2]==="n"&&(r[l[0]]=Number(r[l[0]]))}}}function Dg(t){OI([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function FI(t){return bc.WS.indexOf(t)>-1?"sheet":t==bc.CS?"chart":t==bc.DS?"dialog":t==bc.MS?"macro":t&&t.length?t:"sheet"}function LI(t,a){if(!t)return 0;try{t=a.map(function(n){return n.id||(n.id=n.strRelID),[n.name,t["!id"][n.id].Target,FI(t["!id"][n.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function BI(t,a,r,n,l,d,f,h,b,g,w,k){try{d[n]=B0(Ws(t,r,!0),a);var E=ka(t,a),S;switch(h){case"sheet":S=GM(E,a,l,b,d[n],g,w,k);break;case"chart":if(S=YM(E,a,l,b,d[n],g,w,k),!S||!S["!drawel"])break;var D=M0(S["!drawel"].Target,a),A=zm(D),M=VD(Ws(t,D,!0),B0(Ws(t,A,!0),D)),I=M0(M,D),F=zm(I);S=SM(Ws(t,I,!0),I,b,B0(Ws(t,F,!0),I),g,S);break;case"macro":S=XM(E,a,l,b,d[n],g,w,k);break;case"dialog":S=qM(E,a,l,b,d[n],g,w,k);break;default:throw new Error("Unrecognized sheet type "+h)}f[n]=S;var T=[];d&&d[n]&&li(d[n]).forEach(function(L){var H="";if(d[n][L].Type==bc.CMNT){H=M0(d[n][L].Target,a);var U=ZM(ka(t,H,!0),H,b);if(!U||!U.length)return;U2(S,U,!1)}d[n][L].Type==bc.TCMNT&&(H=M0(d[n][L].Target,a),T=T.concat(YD(ka(t,H,!0),b)))}),T&&T.length&&U2(S,T,!0,b.people||[])}catch(L){if(b.WTF)throw L}}function un(t){return t.charAt(0)=="/"?t.slice(1):t}function PI(t,a){if(Gw(),a=a||{},Dg(a),xn(t,"META-INF/manifest.xml")||xn(t,"objectdata.xml"))return J2(t,a);if(xn(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof mm<"u"){if(t.FileIndex)return mm(t);var r=pr.utils.cfb_new();return h2(t).forEach(function(ie){z8(r,ie,P8(t,ie))}),mm(r)}throw new Error("Unsupported NUMBERS file")}if(!xn(t,"[Content_Types].xml"))throw xn(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):xn(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=h2(t),l=OT(Ws(t,"[Content_Types].xml")),d=!1,f,h;if(l.workbooks.length===0&&(h="xl/workbook.xml",ka(t,h,!0)&&l.workbooks.push(h)),l.workbooks.length===0){if(h="xl/workbook.bin",!ka(t,h,!0))throw new Error("Could not find workbook");l.workbooks.push(h),d=!0}l.workbooks[0].slice(-3)=="bin"&&(d=!0);var b={},g={};if(!a.bookSheets&&!a.bookProps){if(U0=[],l.sst)try{U0=KM(ka(t,un(l.sst)),l.sst,a)}catch(ie){if(a.WTF)throw ie}a.cellStyles&&l.themes.length&&(b=WM(Ws(t,l.themes[0].replace(/^\//,""),!0)||"",l.themes[0],a)),l.style&&(g=$M(ka(t,un(l.style)),l.style,b,a))}l.links.map(function(ie){try{var Y=B0(Ws(t,zm(un(ie))),ie);return JM(ka(t,un(ie)),Y,ie,a)}catch{}});var w=VM(ka(t,un(l.workbooks[0])),l.workbooks[0],a),k={},E="";l.coreprops.length&&(E=ka(t,un(l.coreprops[0]),!0),E&&(k=b4(E)),l.extprops.length!==0&&(E=ka(t,un(l.extprops[0]),!0),E&&zT(E,k,a)));var S={};(!a.bookSheets||a.bookProps)&&l.custprops.length!==0&&(E=Ws(t,un(l.custprops[0]),!0),E&&(S=HT(E,a)));var D={};if((a.bookSheets||a.bookProps)&&(w.Sheets?f=w.Sheets.map(function(Y){return Y.name}):k.Worksheets&&k.SheetNames.length>0&&(f=k.SheetNames),a.bookProps&&(D.Props=k,D.Custprops=S),a.bookSheets&&typeof f<"u"&&(D.SheetNames=f),a.bookSheets?D.SheetNames:a.bookProps))return D;f={};var A={};a.bookDeps&&l.calcchain&&(A=QM(ka(t,un(l.calcchain)),l.calcchain));var M=0,I={},F,T;{var L=w.Sheets;k.Worksheets=L.length,k.SheetNames=[];for(var H=0;H!=L.length;++H)k.SheetNames[H]=L[H].name}var U=d?"bin":"xml",B=l.workbooks[0].lastIndexOf("/"),P=(l.workbooks[0].slice(0,B+1)+"_rels/"+l.workbooks[0].slice(B+1)+".rels").replace(/^\//,"");xn(t,P)||(P="xl/_rels/workbook."+U+".rels");var z=B0(Ws(t,P,!0),P.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(a.xlmeta=eI(ka(t,un(l.metadata[0])),l.metadata[0],a)),(l.people||[]).length>=1&&(a.people=XD(ka(t,un(l.people[0])),a)),z&&(z=LI(z,w.Sheets));var Z=ka(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(M=0;M!=k.Worksheets;++M){var te="sheet";if(z&&z[M]?(F="xl/"+z[M][1].replace(/[\/]?xl\//,""),xn(t,F)||(F=z[M][1]),xn(t,F)||(F=P.replace(/_rels\/.*$/,"")+z[M][1]),te=z[M][2]):(F="xl/worksheets/sheet"+(M+1-Z)+"."+U,F=F.replace(/sheet0\./,"sheet.")),T=F.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),a&&a.sheets!=null)switch(typeof a.sheets){case"number":if(M!=a.sheets)continue e;break;case"string":if(k.SheetNames[M].toLowerCase()!=a.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(a.sheets)){for(var G=!1,se=0;se!=a.sheets.length;++se)typeof a.sheets[se]=="number"&&a.sheets[se]==M&&(G=1),typeof a.sheets[se]=="string"&&a.sheets[se].toLowerCase()==k.SheetNames[M].toLowerCase()&&(G=1);if(!G)continue e}}BI(t,F,T,k.SheetNames[M],M,I,f,te,a,w,b,g)}return D={Directory:l,Workbook:w,Props:k,Custprops:S,Deps:A,Sheets:f,SheetNames:k.SheetNames,Strings:U0,Styles:g,Themes:b,SSF:Wa(tr)},a&&a.bookFiles&&(t.files?(D.keys=n,D.files=t.files):(D.keys=[],D.files={},t.FullPaths.forEach(function(ie,Y){ie=ie.replace(/^Root Entry[\/]/,""),D.keys.push(ie),D.files[ie]=t.FileIndex[Y]}))),a&&a.bookVBA&&(l.vba.length>0?D.vbaraw=ka(t,un(l.vba[0]),!0):l.defaults&&l.defaults.bin===KD&&(D.vbaraw=ka(t,"xl/vbaProject.bin",!0))),D}function zI(t,a){var r=a||{},n="Workbook",l=pr.find(t,n);try{if(n="/!DataSpaces/Version",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(R7(l.content),n="/!DataSpaces/DataSpaceMap",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);var d=I7(l.content);if(d.length!==1||d[0].comps.length!==1||d[0].comps[0].t!==0||d[0].name!=="StrongEncryptionDataSpace"||d[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);var f=O7(l.content);if(f.length!=1||f[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);L7(l.content)}catch{}if(n="/EncryptionInfo",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);var h=B7(l.content);if(n="/EncryptedPackage",l=pr.find(t,n),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(h[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(h[1],l.content,r.password||"",r);if(h[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(h[1],l.content,r.password||"",r);throw new Error("File is password-protected")}function Rg(t,a){var r="";switch((a||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Js(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(a&&a.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function UI(t,a){return pr.find(t,"EncryptedPackage")?zI(t,a):aN(t,a)}function HI(t,a){var r,n=t,l=a||{};return l.type||(l.type=fr&&Buffer.isBuffer(t)?"buffer":"base64"),r=Kw(n,l),PI(r,l)}function lN(t,a){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Vm(t.slice(r),a);default:break e}return J0.to_workbook(t,a)}function VI(t,a){var r="",n=Rg(t,a);switch(a.type){case"base64":r=Js(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=No(t);break;default:throw new Error("Unrecognized type "+a.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Hr(r)),a.type="binary",lN(r,a)}function GI(t,a){var r=t;return a.type=="base64"&&(r=Js(r)),r=W0.utils.decode(1200,r.slice(2),"str"),a.type="binary",lN(r,a)}function YI(t){return t.match(/[^\x00-\x7F]/)?I0(t):t}function gm(t,a,r,n){return n?(r.type="string",J0.to_workbook(t,r)):J0.to_workbook(a,r)}function qm(t,a){Rw();var r=a||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return qm(new Uint8Array(t),(r=Wa(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=t,l=[0,0,0,0],d=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Nc={},r.dateNF&&(Nc.dateNF=r.dateNF),r.type||(r.type=fr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=fr?"buffer":"binary",n=R8(t),typeof Uint8Array<"u"&&!fr&&(r.type="array")),r.type=="string"&&(d=!0,r.type="binary",r.codepage=65001,n=YI(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var f=new ArrayBuffer(3),h=new Uint8Array(f);if(h.foo="bar",!h.foo)return r=Wa(r),r.type="array",qm(dg(n),r)}switch((l=Rg(n,r))[0]){case 208:if(l[1]===207&&l[2]===17&&l[3]===224&&l[4]===161&&l[5]===177&&l[6]===26&&l[7]===225)return UI(pr.read(n,r),r);break;case 9:if(l[1]<=8)return aN(n,r);break;case 60:return Vm(n,r);case 73:if(l[1]===73&&l[2]===42&&l[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(l[1]===68)return b7(n,r);break;case 84:if(l[1]===65&&l[2]===66&&l[3]===76)return p7.to_workbook(n,r);break;case 80:return l[1]===75&&l[2]<9&&l[3]<9?HI(n,r):gm(t,n,r,d);case 239:return l[3]===60?Vm(n,r):gm(t,n,r,d);case 255:if(l[1]===254)return GI(n,r);if(l[1]===0&&l[2]===2&&l[3]===0)return z0.to_workbook(n,r);break;case 0:if(l[1]===0&&(l[2]>=2&&l[3]===0||l[2]===0&&(l[3]===8||l[3]===9)))return z0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return z2.to_workbook(n,r);case 123:if(l[1]===92&&l[2]===114&&l[3]===116)return K7.to_workbook(n,r);break;case 10:case 13:case 32:return VI(n,r);case 137:if(l[1]===80&&l[2]===78&&l[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return m7.indexOf(l[0])>-1&&l[2]<=12&&l[3]<=31?z2.to_workbook(n,r):gm(t,n,r,d)}function XI(t,a,r,n,l,d,f,h){var b=Ka(r),g=h.defval,w=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),k=!0,E=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(E,"__rowNum__",{value:r,enumerable:!1})}catch{E.__rowNum__=r}else E.__rowNum__=r;if(!f||t[r])for(var S=a.s.c;S<=a.e.c;++S){var D=f?t[r][S]:t[n[S]+b];if(D===void 0||D.t===void 0){if(g===void 0)continue;d[S]!=null&&(E[d[S]]=g);continue}var A=D.v;switch(D.t){case"z":if(A==null)break;continue;case"e":A=A==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+D.t)}if(d[S]!=null){if(A==null)if(D.t=="e"&&A===null)E[d[S]]=null;else if(g!==void 0)E[d[S]]=g;else if(w&&A===null)E[d[S]]=null;else continue;else E[d[S]]=w&&(D.t!=="n"||D.t==="n"&&h.rawNumbers!==!1)?A:Ui(D,A,h);A!=null&&(k=!1)}}return{row:E,isempty:k}}function $m(t,a){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},n=0,l=1,d=[],f=0,h="",b={s:{r:0,c:0},e:{r:0,c:0}},g=a||{},w=g.range!=null?g.range:t["!ref"];switch(g.header===1?n=1:g.header==="A"?n=2:Array.isArray(g.header)?n=3:g.header==null&&(n=0),typeof w){case"string":b=oa(w);break;case"number":b=oa(t["!ref"]),b.s.r=w;break;default:b=w}n>0&&(l=0);var k=Ka(b.s.r),E=[],S=[],D=0,A=0,M=Array.isArray(t),I=b.s.r,F=0,T={};M&&!t[I]&&(t[I]=[]);var L=g.skipHidden&&t["!cols"]||[],H=g.skipHidden&&t["!rows"]||[];for(F=b.s.c;F<=b.e.c;++F)if(!(L[F]||{}).hidden)switch(E[F]=Oa(F),r=M?t[I][F]:t[E[F]+k],n){case 1:d[F]=F-b.s.c;break;case 2:d[F]=E[F];break;case 3:d[F]=g.header[F-b.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=f=Ui(r,null,g),A=T[f]||0,!A)T[f]=1;else{do h=f+"_"+A++;while(T[h]);T[f]=A,T[h]=1}d[F]=h}for(I=b.s.r+l;I<=b.e.r;++I)if(!(H[I]||{}).hidden){var U=XI(t,b,I,E,n,d,M,g);(U.isempty===!1||(n===1?g.blankrows!==!1:g.blankrows))&&(S[D++]=U.row)}return S.length=D,S}var av=/"/g;function qI(t,a,r,n,l,d,f,h){for(var b=!0,g=[],w="",k=Ka(r),E=a.s.c;E<=a.e.c;++E)if(n[E]){var S=h.dense?(t[r]||[])[E]:t[n[E]+k];if(S==null)w="";else if(S.v!=null){b=!1,w=""+(h.rawNumbers&&S.t=="n"?S.v:Ui(S,null,h));for(var D=0,A=0;D!==w.length;++D)if((A=w.charCodeAt(D))===l||A===d||A===34||h.forceQuotes){w='"'+w.replace(av,'""')+'"';break}w=="ID"&&(w='"ID"')}else S.f!=null&&!S.F?(b=!1,w="="+S.f,w.indexOf(",")>=0&&(w='"'+w.replace(av,'""')+'"')):w="";g.push(w)}return h.blankrows===!1&&b?null:g.join(f)}function oN(t,a){var r=[],n=a??{};if(t==null||t["!ref"]==null)return"";var l=oa(t["!ref"]),d=n.FS!==void 0?n.FS:",",f=d.charCodeAt(0),h=n.RS!==void 0?n.RS:`
`,b=h.charCodeAt(0),g=new RegExp((d=="|"?"\\|":d)+"+$"),w="",k=[];n.dense=Array.isArray(t);for(var E=n.skipHidden&&t["!cols"]||[],S=n.skipHidden&&t["!rows"]||[],D=l.s.c;D<=l.e.c;++D)(E[D]||{}).hidden||(k[D]=Oa(D));for(var A=0,M=l.s.r;M<=l.e.r;++M)(S[M]||{}).hidden||(w=qI(t,l,M,k,f,b,d,n),w!=null&&(n.strip&&(w=w.replace(g,"")),(w||n.blankrows!==!1)&&r.push((A++?h:"")+w)));return delete n.dense,r.join("")}function $I(t,a){a||(a={}),a.FS="	",a.RS=`
`;var r=oN(t,a);return r}function WI(t){var a="",r,n="";if(t==null||t["!ref"]==null)return[];var l=oa(t["!ref"]),d="",f=[],h,b=[],g=Array.isArray(t);for(h=l.s.c;h<=l.e.c;++h)f[h]=Oa(h);for(var w=l.s.r;w<=l.e.r;++w)for(d=Ka(w),h=l.s.c;h<=l.e.c;++h)if(a=f[h]+d,r=g?(t[w]||[])[h]:t[a],n="",r!==void 0){if(r.F!=null){if(a=r.F,!r.f)continue;n=r.f,a.indexOf(":")==-1&&(a=a+":"+a)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}b[b.length]=a+"="+n}return b}function cN(t,a,r){var n=r||{},l=+!n.skipHeader,d=t||{},f=0,h=0;if(d&&n.origin!=null)if(typeof n.origin=="number")f=n.origin;else{var b=typeof n.origin=="string"?Ns(n.origin):n.origin;f=b.r,h=b.c}var g,w={s:{c:0,r:0},e:{c:h,r:f+a.length-1+l}};if(d["!ref"]){var k=oa(d["!ref"]);w.e.c=Math.max(w.e.c,k.e.c),w.e.r=Math.max(w.e.r,k.e.r),f==-1&&(f=k.e.r+1,w.e.r=f+a.length-1+l)}else f==-1&&(f=0,w.e.r=a.length-1+l);var E=n.header||[],S=0;a.forEach(function(A,M){li(A).forEach(function(I){(S=E.indexOf(I))==-1&&(E[S=E.length]=I);var F=A[I],T="z",L="",H=Zt({c:h+S,r:f+M+l});g=ad(d,H),F&&typeof F=="object"&&!(F instanceof Date)?d[H]=F:(typeof F=="number"?T="n":typeof F=="boolean"?T="b":typeof F=="string"?T="s":F instanceof Date?(T="d",n.cellDates||(T="n",F=Es(F)),L=n.dateNF||tr[14]):F===null&&n.nullError&&(T="e",F=0),g?(g.t=T,g.v=F,delete g.w,delete g.R,L&&(g.z=L)):d[H]=g={t:T,v:F},L&&(g.z=L))})}),w.e.c=Math.max(w.e.c,h+E.length-1);var D=Ka(f);if(l)for(S=0;S<E.length;++S)d[Oa(S+h)+D]={t:"s",v:E[S]};return d["!ref"]=yr(w),d}function KI(t,a){return cN(null,t,a)}function ad(t,a,r){if(typeof a=="string"){if(Array.isArray(t)){var n=Ns(a);return t[n.r]||(t[n.r]=[]),t[n.r][n.c]||(t[n.r][n.c]={t:"z"})}return t[a]||(t[a]={t:"z"})}return typeof a!="number"?ad(t,Zt(a)):ad(t,Zt({r:a,c:r||0}))}function ZI(t,a){if(typeof a=="number"){if(a>=0&&t.SheetNames.length>a)return a;throw new Error("Cannot find sheet # "+a)}else if(typeof a=="string"){var r=t.SheetNames.indexOf(a);if(r>-1)return r;throw new Error("Cannot find sheet name |"+a+"|")}else throw new Error("Cannot find sheet |"+a+"|")}function Mg(){return{SheetNames:[],Sheets:{}}}function Ig(t,a,r,n){var l=1;if(!r)for(;l<=65535&&t.SheetNames.indexOf(r="Sheet"+l)!=-1;++l,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&t.SheetNames.indexOf(r)>=0){var d=r.match(/(^.*?)(\d+)$/);l=d&&+d[2]||0;var f=d&&d[1]||r;for(++l;l<=65535&&t.SheetNames.indexOf(r=f+l)!=-1;++l);}if(OM(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=a,r}function QI(t,a,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var n=ZI(t,a);switch(t.Workbook.Sheets[n]||(t.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[n].Hidden=r}function JI(t,a){return t.z=a,t}function dN(t,a,r){return a?(t.l={Target:a},r&&(t.l.Tooltip=r)):delete t.l,t}function eO(t,a,r){return dN(t,"#"+a,r)}function tO(t,a,r){t.c||(t.c=[]),t.c.push({t:a,a:r||"SheetJS"})}function rO(t,a,r,n){for(var l=typeof a!="string"?a:oa(a),d=typeof a=="string"?a:yr(a),f=l.s.r;f<=l.e.r;++f)for(var h=l.s.c;h<=l.e.c;++h){var b=ad(t,f,h);b.t="n",b.F=d,delete b.v,f==l.s.r&&h==l.s.c&&(b.f=r,n&&(b.D=!0))}return t}var sv={encode_col:Oa,encode_row:Ka,encode_cell:Zt,encode_range:yr,decode_col:bg,decode_row:yg,split_cell:hT,decode_cell:Ns,decode_range:Ic,format_cell:Ui,sheet_add_aoa:h4,sheet_add_json:cN,sheet_add_dom:sN,aoa_to_sheet:Oc,json_to_sheet:KI,table_to_sheet:nN,table_to_book:bI,sheet_to_csv:oN,sheet_to_txt:$I,sheet_to_json:$m,sheet_to_html:yI,sheet_to_formulae:WI,sheet_to_row_object_array:$m,sheet_get_cell:ad,book_new:Mg,book_append_sheet:Ig,book_set_sheet_visibility:QI,cell_set_number_format:JI,cell_set_hyperlink:dN,cell_set_internal_link:eO,cell_add_comment:tO,sheet_set_array_formula:rO,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function aO(){const[t,a]=C.useState(!1),[r,n]=C.useState([]),[l,d]=C.useState({}),[f,h]=C.useState({}),[b,g]=C.useState({}),[w,k]=C.useState({}),[E,S]=C.useState({}),[D,A]=C.useState({}),[M,I]=C.useState({}),[F,T]=C.useState(!1),[L,H]=C.useState(!1),[U,B]=C.useState(null),[P,z]=C.useState(null);C.useEffect(()=>{Z()},[]);const Z=async()=>{try{T(!0);const oe=await Te.get("/apartments");oe.data.success&&n(oe.data.data||[])}catch(oe){console.error("Error loading apartments:",oe),ne.error("Failed to load apartments")}finally{T(!1)}},te=async oe=>{if(oe)try{const re=await Te.get(`/floors?apartment_id=${oe}`);if(re.data.success){const Re=re.data.data||[];d(ke=>({...ke,[oe]:Re})),Re.forEach(ke=>{G(oe,ke.id)})}}catch(re){console.error("Error loading floors:",re),ne.error("Failed to load floors")}},G=async(oe,re)=>{if(!(!oe||!re))try{const Re=await Te.get(`/houses?apartment_id=${oe}&floor_id=${re}&status=vacant`);if(Re.data.success){const ke=Re.data.data||[];h(Pe=>({...Pe,[re]:ke}))}}catch(Re){console.error("Error loading houses:",Re),ne.error("Failed to load houses")}},se=oe=>{A(re=>({...re,[oe]:!re[oe]})),D[oe]||te(oe)},ie=(oe,re)=>{const Re=`${oe}_${re}`;I(ke=>({...ke,[Re]:!ke[Re]}))},Y=(oe,re)=>{g(ke=>({...ke,[oe]:re})),(l[oe]||[]).forEach(ke=>{k(Oe=>({...Oe,[ke.id]:re})),(f[ke.id]||[]).forEach(Oe=>{S(nt=>({...nt,[Oe.id]:re}))})})},q=(oe,re,Re)=>{k(nt=>({...nt,[re]:Re})),(f[re]||[]).forEach(nt=>{S(we=>({...we,[nt.id]:Re}))});const Oe=(l[oe]||[]).every(nt=>nt.id===re?Re:w[nt.id]);g(nt=>({...nt,[oe]:Oe}))},ce=(oe,re,Re,ke)=>{S(Ae=>({...Ae,[Re]:ke}));const Oe=(f[re]||[]).every(Ae=>Ae.id===Re?ke:E[Ae.id]);k(Ae=>({...Ae,[re]:Oe}));const we=(l[oe]||[]).every(Ae=>Ae.id===re?Oe:w[Ae.id]);g(Ae=>({...Ae,[oe]:we}))},pe=oe=>{const re={};if(r.forEach(Re=>{re[Re.id]=oe}),g(re),oe){const Re={},ke={};r.forEach(Pe=>{(l[Pe.id]||[]).forEach(nt=>{Re[nt.id]=oe,(f[nt.id]||[]).forEach(Ae=>{ke[Ae.id]=oe})})}),k(Re),S(ke)}else k({}),S({})},me=async()=>{try{const oe=Object.keys(E).filter(Oe=>E[Oe]);if(oe.length===0){ne.error("Please select at least one house");return}T(!0);const re=await Te.post("/house-owners/bulk/generate-template",{house_ids:oe},{responseType:"arraybuffer"}),Re=new Blob([re.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),ke=window.URL.createObjectURL(Re),Pe=document.createElement("a");Pe.href=ke,Pe.download=`House_Owners_Template_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(Pe),Pe.click(),Pe.remove(),window.URL.revokeObjectURL(ke),ne.success("Excel template downloaded successfully")}catch(oe){console.error("Error downloading template:",oe),ne.error("Failed to download template")}finally{T(!1)}},le=async oe=>{const re=oe.target.files[0];if(re){if(!re.name.match(/\.(xlsx|xls|csv)$/i)){ne.error("Please upload an Excel file");return}try{H(!0);const Re=await re.arrayBuffer(),ke=qm(Re,{type:"array"});let Pe=ke.SheetNames.find(fe=>fe==="House Owners Template"||/house owners/i.test(fe));if(!Pe)for(const fe of ke.SheetNames){const at=sv.sheet_to_json(ke.Sheets[fe],{header:1,range:0,defval:""}),Ce=at&&at[0]?at[0].map(wt=>(""+wt).toString().trim().toLowerCase()):[];if(Ce.includes("house id")||Ce.includes("house_id")||Ce.includes("house number")){Pe=fe;break}}Pe||(Pe=ke.SheetNames[0]);const Oe=ke.Sheets[Pe],nt=sv.sheet_to_json(Oe,{header:1,defval:""});if(!nt||nt.length<2){ne.error("No data found in Excel file");return}const we=nt[0].map(fe=>(""+fe).trim()),Ae=fe=>(""+(fe||"")).toLowerCase().replace(/[^a-z0-9 ]/g," ").replace(/\s+/g," ").trim(),Le=we.map(fe=>Ae(fe)),Ee={},Je=[];if(Le.forEach((fe,at)=>{/house/.test(fe)&&/(id|number|no)/.test(fe)&&(Ee.house_id=Ee.house_id??at),/house\s*pk|house_pk|house\s*primary|house\s*id\s*pk/.test(fe)&&(Ee.house_pk=Ee.house_pk??at),/apartment/.test(fe)&&/(id|name)/.test(fe)&&(/id/.test(fe)?Ee.apartment_id=Ee.apartment_id??at:Ee.apartment_name=Ee.apartment_name??at),/floor/.test(fe)&&(Ee.floor_id=Ee.floor_id??at),/owner/.test(fe)&&/name/.test(fe)&&(Ee.owner_name=Ee.owner_name??at),fe==="name"&&Je.push(at),/email/.test(fe)&&(Ee.email=Ee.email??at),(/nic/.test(fe)||/id ?no/.test(fe))&&(Ee.nic=Ee.nic??at),/mobile|phone|contact/.test(fe)&&(Ee.mobile=Ee.mobile??at),/occupation/.test(fe)&&(Ee.occupation=Ee.occupation??at),/country/.test(fe)&&(Ee.country=Ee.country??at),/occupied/.test(fe)&&(Ee.occupied=Ee.occupied??at)}),!Ee.owner_name&&Je.length>0)if(Ee.apartment_name){const fe=Je.find(at=>at!==Ee.apartment_name);Ee.owner_name=fe??Je[Je.length-1]}else Ee.owner_name=Je[Je.length-1];if(!Ee.house_id){const fe=Le.find((at,Ce)=>/(house|house number|house no|house_no)/.test(at));fe&&(Ee.house_id=Le.indexOf(fe))}const be=nt.slice(1).map((fe,at)=>({_row:at+2,house_pk:Ee.house_pk!==void 0?fe[Ee.house_pk]:void 0,house_id:Ee.house_id!==void 0?fe[Ee.house_id]:void 0,apartment_id:Ee.apartment_id!==void 0?fe[Ee.apartment_id]:void 0,floor_id:Ee.floor_id!==void 0?fe[Ee.floor_id]:void 0,name:Ee.owner_name!==void 0?fe[Ee.owner_name]:void 0,nic:Ee.nic!==void 0?fe[Ee.nic]:void 0,occupation:Ee.occupation!==void 0?fe[Ee.occupation]:void 0,country:Ee.country!==void 0?fe[Ee.country]:void 0,mobile:Ee.mobile!==void 0?fe[Ee.mobile]:void 0,email:Ee.email!==void 0?fe[Ee.email]:void 0,occupied_raw:Ee.occupied!==void 0?fe[Ee.occupied]:void 0})).filter(fe=>Object.values(fe).some(at=>at!==void 0&&at!==""));if(be.length===0){ne.error("No data rows found in template");return}const Be=be.map(fe=>{const at=fe._row,Ce=fe.house_pk||fe.house_id,wt=fe.name,ut=fe.email;if(!Ce||!wt||!ut)throw new Error(`Row ${at}: House ID, Owner Name, and Email are required`);if(typeof ut=="string"&&!ut.includes("@"))throw new Error(`Row ${at}: Invalid email format`);const Ct=(fe.occupied_raw||"own").toString().trim();if(!["own","for rent","For rent","Own"].map(Mt=>Mt.toLowerCase()).includes(Ct.toLowerCase()))throw new Error(`Row ${at}: Occupied Type must be "own" or "For rent"`);return{house_id:Ce,apartment_id:fe.apartment_id,floor_id:fe.floor_id,name:wt,nic:fe.nic||"",occupation:fe.occupation||"",country:fe.country||"",mobile:fe.mobile||"",email:ut,occupied_way:Ct.toLowerCase()==="for rent"?"For rent":"own"}});B({fileName:re.name,totalRows:Be.length,data:Be}),z(re),ne.success(`Successfully parsed ${Be.length} records`)}catch(Re){console.error("Error parsing Excel file:",Re),ne.error(Re.message||"Failed to parse Excel file")}finally{H(!1),oe.target.value=""}}},X=async()=>{if(!U||U.data.length===0){ne.error("No data to import");return}try{if(H(!0),!P){ne.error("Original file not found. Please upload the Excel file again.");return}const oe=new FormData;oe.append("excelFile",P,P.name);const re=await Te.post("/house-owners/bulk/bulk-import",oe,{headers:{"Content-Type":"multipart/form-data"}});re.data.success?(ne.success(`Import completed: ${re.data.data?.success||0} successful, ${re.data.data?.failed||0} failed`),re.data.data?.errors&&re.data.data.errors.length>0&&(console.error("Import errors:",re.data.data.errors),ne.error(`Some rows failed:
${re.data.data.errors.map(Re=>`Row ${Re.row}: ${Re.error}`).join(`
`)}`))):ne.error(re.data.message||"Import failed"),B(null),Z()}catch(oe){console.error("Import error:",oe),ne.error(oe.response?.data?.message||"Failed to import data")}finally{H(!1)}},W=()=>{const oe=Object.values(b).filter(Boolean).length,re=Object.values(w).filter(Boolean).length,Re=Object.values(E).filter(Boolean).length;return{apartmentCount:oe,floorCount:re,houseCount:Re}},{apartmentCount:K,houseCount:ae}=W();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Vr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(rw,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bulk Import House Owners"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Select apartments, floors, and houses to create Excel template"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Select Houses"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:()=>pe(K!==r.length),className:"px-4 py-2 text-sm bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-lg font-medium hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors",children:K===r.length?"Deselect All":"Select All"})})]}),F&&r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Li,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No apartments found"})]}):e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:r.map(oe=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-900 rounded-t-lg",children:[e.jsx("input",{type:"checkbox",checked:!!b[oe.id],onChange:re=>Y(oe.id,re.target.checked),className:"h-5 w-5 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>se(oe.id),className:"ml-3 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Li,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-3"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:oe.name})]}),D[oe.id]?e.jsx(Dl,{className:"h-5 w-5 text-gray-500"}):e.jsx(Am,{className:"h-5 w-5 text-gray-500"})]})]}),D[oe.id]&&e.jsx("div",{className:"p-4 pt-0",children:l[oe.id]?l[oe.id].length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm py-4 text-center",children:"No floors found"}):l[oe.id].map(re=>e.jsxs("div",{className:"ml-6 mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:!!w[re.id],onChange:Re=>q(oe.id,re.id,Re.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>ie(oe.id,re.id),className:"ml-2 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nf,{className:"h-4 w-4 text-gray-500 dark:text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Floor ",re.floor_id]})]}),M[`${oe.id}_${re.id}`]?e.jsx(Dl,{className:"h-4 w-4 text-gray-500"}):e.jsx(Am,{className:"h-4 w-4 text-gray-500"})]})]}),M[`${oe.id}_${re.id}`]&&e.jsx("div",{className:"ml-8 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:f[re.id]?f[re.id].length===0?e.jsx("p",{className:"col-span-full text-gray-500 dark:text-gray-400 text-sm py-2",children:"No houses found"}):f[re.id].map(Re=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!!E[Re.id],onChange:ke=>ce(oe.id,re.id,Re.id,ke.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("label",{className:"ml-2 flex items-center",children:[e.jsx(Pr,{className:"h-3 w-3 text-gray-500 dark:text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:Re.house_id||Re.house_number})]})]},Re.id)):e.jsx("div",{className:"col-span-full text-center py-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 mx-auto"})})})]},re.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"})})})]},oe.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Download Excel Template"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Download a pre-filled Excel template with the selected houses."}),e.jsx("button",{onClick:me,disabled:F||ae===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Preparing Template..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ol,{className:"h-5 w-5"}),e.jsxs("span",{children:["Download Template (",ae," houses)"]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upload & Import"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Upload the filled Excel sheet to import house owners in bulk. Verification emails will be sent automatically."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Excel File"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:le,disabled:L,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900 dark:file:text-purple-300"})]}),U&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(hn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-300",children:"Ready to Import"})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:[U.fileName," - ",U.totalRows," records loaded"]}),e.jsxs("div",{className:"mt-3 text-xs text-green-600 dark:text-green-400 space-y-1",children:[e.jsx("p",{children:" File parsed successfully"}),e.jsx("p",{children:" Data validated"}),e.jsx("p",{children:" Ready for bulk import"})]})]}),e.jsx("button",{onClick:X,disabled:L||!U,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Importing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Bulk Import"})]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"Instructions"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"1."}),e.jsx("span",{children:"Select apartments, floors, and houses using checkboxes"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"2."}),e.jsx("span",{children:'Click "Download Template" to get Excel file'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"3."}),e.jsx("span",{children:"Fill owner details in Excel (don't add/delete rows)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"4."}),e.jsx("span",{children:"Upload the filled Excel file"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"5."}),e.jsx("span",{children:'Click "Start Bulk Import"'})]})]})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function sO(){return e.jsx(Z3,{children:e.jsx(L6,{children:e.jsxs(S3,{children:[e.jsx(Xt,{path:"/",element:e.jsx(ij,{})}),e.jsx(Xt,{path:"/login",element:e.jsx(ES,{})}),e.jsx(Xt,{path:"/register",element:e.jsx(CS,{})}),e.jsx(Xt,{path:"/verify",element:e.jsx(SS,{})}),e.jsx(Xt,{path:"/sidebar",element:e.jsx(vr,{})}),e.jsx(Xt,{path:"/navbar",element:e.jsx(Vr,{})}),e.jsx(Xt,{path:"/admindashboard",element:e.jsx(AS,{})}),e.jsx(Xt,{path:"/apartmentview",element:e.jsx(MS,{})}),e.jsx(Xt,{path:"/userview",element:e.jsx(HS,{})}),e.jsx(Xt,{path:"/floors/:id",element:e.jsx(XS,{})}),e.jsx(Xt,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(DA,{})}),e.jsx(Xt,{path:"/housetype/:apartment_id",element:e.jsx(uw,{})}),e.jsx(Xt,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(QS,{})}),e.jsx(Xt,{path:"/bills/:apartment_id",element:e.jsx(hw,{})}),e.jsx(Xt,{path:"/reset-password",element:e.jsx(MA,{})}),e.jsx(Xt,{path:"/forgot-password",element:e.jsx(RA,{})}),e.jsx(Xt,{path:"/complete-registration",element:e.jsx(IA,{})}),e.jsx(Xt,{path:"/manage-bills",element:e.jsx(OA,{})}),e.jsx(Xt,{path:"/bills-and-calculations",element:e.jsx(zA,{})}),e.jsx(Xt,{path:"/billranges/:bill_id",element:e.jsx(VA,{})}),e.jsx(Xt,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(XA,{})}),e.jsx(Xt,{path:"/employee-dashboard",element:e.jsx(qA,{})}),e.jsx(Xt,{path:"/role",element:e.jsx(dw,{})}),e.jsx(Xt,{path:"/profile-page",element:e.jsx($A,{})}),e.jsx(Xt,{path:"/my-apartments",element:e.jsx(WA,{})}),e.jsx(Xt,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(ZA,{})}),e.jsx(Xt,{path:"/bill-payments",element:e.jsx(QA,{})}),e.jsx(Xt,{path:"/measurable-bills",element:e.jsx(_w,{})}),e.jsx(Xt,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(B_,{})}),e.jsx(Xt,{path:"/my-bills",element:e.jsx(P_,{})}),e.jsx(Xt,{path:"/house-bill-meter/:bill_id",element:e.jsx(z_,{})}),e.jsx(Xt,{path:"/bill-payment-settle",element:e.jsx(U_,{})}),e.jsx(Xt,{path:"/houseowner/login",element:e.jsx(H_,{})}),e.jsx(Xt,{path:"/houseowner/verify",element:e.jsx(G_,{})}),e.jsx(Xt,{path:"/houseowner/dashboard",element:e.jsx(V_,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-houseview",element:e.jsx(Y_,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-billview",element:e.jsx(X_,{})}),e.jsx(Xt,{path:"/houseowner/complaints",element:e.jsx(q_,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-profile",element:e.jsx(K_,{})}),e.jsx(Xt,{path:"/view-complaints",element:e.jsx($_,{})}),e.jsx(Xt,{path:"/my-complaints",element:e.jsx(W_,{})}),e.jsx(Xt,{path:"/my-work/:complaintId",element:e.jsx(Q_,{})}),e.jsx(Xt,{path:"/start-work",element:e.jsx(Tw,{})}),e.jsx(Xt,{path:"/complaint-categories",element:e.jsx(t8,{})}),e.jsx(Xt,{path:"/bulk-import-houseowner",element:e.jsx(aO,{})})]})})})}function nO(){const[t,a]=C.useState(null);return e.jsx(Or.Provider,{value:{auth:t,setAuth:a},children:e.jsx(sO,{})})}Lk.createRoot(document.getElementById("root")).render(e.jsx(nO,{}));export{mw as _,Cu as c,ff as g};
