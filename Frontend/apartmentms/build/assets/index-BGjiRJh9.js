function lk(t,a){for(var r=0;r<a.length;r++){const i=a[r];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const d=Object.getOwnPropertyDescriptor(i,l);d&&Object.defineProperty(t,l,d.get?d:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var Nu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vh={exports:{}},y0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function ok(){if(ky)return y0;ky=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(i,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var h in l)h!=="key"&&(d[h]=l[h])}else d=l;return l=d.ref,{$$typeof:t,type:i,key:f,ref:l!==void 0?l:null,props:d}}return y0.Fragment=a,y0.jsx=r,y0.jsxs=r,y0}var jy;function ck(){return jy||(jy=1,vh.exports=ok()),vh.exports}var e=ck(),wh={exports:{}},ir={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function dk(){if(Cy)return ir;Cy=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),j=Symbol.iterator;function E(oe){return oe===null||typeof oe!="object"?null:(oe=j&&oe[j]||oe["@@iterator"],typeof oe=="function"?oe:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,A={};function I(oe,re,Q){this.props=oe,this.context=re,this.refs=A,this.updater=Q||_}I.prototype.isReactComponent={},I.prototype.setState=function(oe,re){if(typeof oe!="object"&&typeof oe!="function"&&oe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,oe,re,"setState")},I.prototype.forceUpdate=function(oe){this.updater.enqueueForceUpdate(this,oe,"forceUpdate")};function O(){}O.prototype=I.prototype;function M(oe,re,Q){this.props=oe,this.context=re,this.refs=A,this.updater=Q||_}var D=M.prototype=new O;D.constructor=M,T(D,I.prototype),D.isPureReactComponent=!0;var B=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},z=Object.prototype.hasOwnProperty;function L(oe,re,Q,X,se,ne){return Q=ne.ref,{$$typeof:t,type:oe,key:re,ref:Q!==void 0?Q:null,props:ne}}function P(oe,re){return L(oe.type,re,void 0,void 0,void 0,oe.props)}function U(oe){return typeof oe=="object"&&oe!==null&&oe.$$typeof===t}function Z(oe){var re={"=":"=0",":":"=2"};return"$"+oe.replace(/[=:]/g,function(Q){return re[Q]})}var ae=/\/+/g;function Y(oe,re){return typeof oe=="object"&&oe!==null&&oe.key!=null?Z(""+oe.key):re.toString(36)}function ue(){}function de(oe){switch(oe.status){case"fulfilled":return oe.value;case"rejected":throw oe.reason;default:switch(typeof oe.status=="string"?oe.then(ue,ue):(oe.status="pending",oe.then(function(re){oe.status==="pending"&&(oe.status="fulfilled",oe.value=re)},function(re){oe.status==="pending"&&(oe.status="rejected",oe.reason=re)})),oe.status){case"fulfilled":return oe.value;case"rejected":throw oe.reason}}throw oe}function G(oe,re,Q,X,se){var ne=typeof oe;(ne==="undefined"||ne==="boolean")&&(oe=null);var K=!1;if(oe===null)K=!0;else switch(ne){case"bigint":case"string":case"number":K=!0;break;case"object":switch(oe.$$typeof){case t:case a:K=!0;break;case w:return K=oe._init,G(K(oe._payload),re,Q,X,se)}}if(K)return se=se(oe),K=X===""?"."+Y(oe,0):X,B(se)?(Q="",K!=null&&(Q=K.replace(ae,"$&/")+"/"),G(se,re,Q,"",function(Ve){return Ve})):se!=null&&(U(se)&&(se=P(se,Q+(se.key==null||oe&&oe.key===se.key?"":(""+se.key).replace(ae,"$&/")+"/")+K)),re.push(se)),1;K=0;var Se=X===""?".":X+":";if(B(oe))for(var we=0;we<oe.length;we++)X=oe[we],ne=Se+Y(X,we),K+=G(X,re,Q,ne,se);else if(we=E(oe),typeof we=="function")for(oe=we.call(oe),we=0;!(X=oe.next()).done;)X=X.value,ne=Se+Y(X,we++),K+=G(X,re,Q,ne,se);else if(ne==="object"){if(typeof oe.then=="function")return G(de(oe),re,Q,X,se);throw re=String(oe),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(oe).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return K}function q(oe,re,Q){if(oe==null)return oe;var X=[],se=0;return G(oe,X,"","",function(ne){return re.call(Q,ne,se++)}),X}function xe(oe){if(oe._status===-1){var re=oe._result;re=re(),re.then(function(Q){(oe._status===0||oe._status===-1)&&(oe._status=1,oe._result=Q)},function(Q){(oe._status===0||oe._status===-1)&&(oe._status=2,oe._result=Q)}),oe._status===-1&&(oe._status=0,oe._result=re)}if(oe._status===1)return oe._result.default;throw oe._result}var Ce=typeof reportError=="function"?reportError:function(oe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof oe=="object"&&oe!==null&&typeof oe.message=="string"?String(oe.message):String(oe),error:oe});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",oe);return}console.error(oe)};function le(){}return ir.Children={map:q,forEach:function(oe,re,Q){q(oe,function(){re.apply(this,arguments)},Q)},count:function(oe){var re=0;return q(oe,function(){re++}),re},toArray:function(oe){return q(oe,function(re){return re})||[]},only:function(oe){if(!U(oe))throw Error("React.Children.only expected to receive a single React element child.");return oe}},ir.Component=I,ir.Fragment=r,ir.Profiler=l,ir.PureComponent=M,ir.StrictMode=i,ir.Suspense=b,ir.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,ir.__COMPILER_RUNTIME={__proto__:null,c:function(oe){return H.H.useMemoCache(oe)}},ir.cache=function(oe){return function(){return oe.apply(null,arguments)}},ir.cloneElement=function(oe,re,Q){if(oe==null)throw Error("The argument must be a React element, but you passed "+oe+".");var X=T({},oe.props),se=oe.key,ne=void 0;if(re!=null)for(K in re.ref!==void 0&&(ne=void 0),re.key!==void 0&&(se=""+re.key),re)!z.call(re,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&re.ref===void 0||(X[K]=re[K]);var K=arguments.length-2;if(K===1)X.children=Q;else if(1<K){for(var Se=Array(K),we=0;we<K;we++)Se[we]=arguments[we+2];X.children=Se}return L(oe.type,se,void 0,void 0,ne,X)},ir.createContext=function(oe){return oe={$$typeof:f,_currentValue:oe,_currentValue2:oe,_threadCount:0,Provider:null,Consumer:null},oe.Provider=oe,oe.Consumer={$$typeof:d,_context:oe},oe},ir.createElement=function(oe,re,Q){var X,se={},ne=null;if(re!=null)for(X in re.key!==void 0&&(ne=""+re.key),re)z.call(re,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(se[X]=re[X]);var K=arguments.length-2;if(K===1)se.children=Q;else if(1<K){for(var Se=Array(K),we=0;we<K;we++)Se[we]=arguments[we+2];se.children=Se}if(oe&&oe.defaultProps)for(X in K=oe.defaultProps,K)se[X]===void 0&&(se[X]=K[X]);return L(oe,ne,void 0,void 0,null,se)},ir.createRef=function(){return{current:null}},ir.forwardRef=function(oe){return{$$typeof:h,render:oe}},ir.isValidElement=U,ir.lazy=function(oe){return{$$typeof:w,_payload:{_status:-1,_result:oe},_init:xe}},ir.memo=function(oe,re){return{$$typeof:p,type:oe,compare:re===void 0?null:re}},ir.startTransition=function(oe){var re=H.T,Q={};H.T=Q;try{var X=oe(),se=H.S;se!==null&&se(Q,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(le,Ce)}catch(ne){Ce(ne)}finally{H.T=re}},ir.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},ir.use=function(oe){return H.H.use(oe)},ir.useActionState=function(oe,re,Q){return H.H.useActionState(oe,re,Q)},ir.useCallback=function(oe,re){return H.H.useCallback(oe,re)},ir.useContext=function(oe){return H.H.useContext(oe)},ir.useDebugValue=function(){},ir.useDeferredValue=function(oe,re){return H.H.useDeferredValue(oe,re)},ir.useEffect=function(oe,re,Q){var X=H.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(oe,re)},ir.useId=function(){return H.H.useId()},ir.useImperativeHandle=function(oe,re,Q){return H.H.useImperativeHandle(oe,re,Q)},ir.useInsertionEffect=function(oe,re){return H.H.useInsertionEffect(oe,re)},ir.useLayoutEffect=function(oe,re){return H.H.useLayoutEffect(oe,re)},ir.useMemo=function(oe,re){return H.H.useMemo(oe,re)},ir.useOptimistic=function(oe,re){return H.H.useOptimistic(oe,re)},ir.useReducer=function(oe,re,Q){return H.H.useReducer(oe,re,Q)},ir.useRef=function(oe){return H.H.useRef(oe)},ir.useState=function(oe){return H.H.useState(oe)},ir.useSyncExternalStore=function(oe,re,Q){return H.H.useSyncExternalStore(oe,re,Q)},ir.useTransition=function(){return H.H.useTransition()},ir.version="19.1.1",ir}var Ey;function Gm(){return Ey||(Ey=1,wh.exports=dk()),wh.exports}var C=Gm();const Fr=of(C);var Nh={exports:{}},b0={},kh={exports:{}},jh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function uk(){return _y||(_y=1,function(t){function a(q,xe){var Ce=q.length;q.push(xe);e:for(;0<Ce;){var le=Ce-1>>>1,oe=q[le];if(0<l(oe,xe))q[le]=xe,q[Ce]=oe,Ce=le;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var xe=q[0],Ce=q.pop();if(Ce!==xe){q[0]=Ce;e:for(var le=0,oe=q.length,re=oe>>>1;le<re;){var Q=2*(le+1)-1,X=q[Q],se=Q+1,ne=q[se];if(0>l(X,Ce))se<oe&&0>l(ne,X)?(q[le]=ne,q[se]=Ce,le=se):(q[le]=X,q[Q]=Ce,le=Q);else if(se<oe&&0>l(ne,Ce))q[le]=ne,q[se]=Ce,le=se;else break e}}return xe}function l(q,xe){var Ce=q.sortIndex-xe.sortIndex;return Ce!==0?Ce:q.id-xe.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var b=[],p=[],w=1,j=null,E=3,_=!1,T=!1,A=!1,I=!1,O=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function B(q){for(var xe=r(p);xe!==null;){if(xe.callback===null)i(p);else if(xe.startTime<=q)i(p),xe.sortIndex=xe.expirationTime,a(b,xe);else break;xe=r(p)}}function H(q){if(A=!1,B(q),!T)if(r(b)!==null)T=!0,z||(z=!0,Y());else{var xe=r(p);xe!==null&&G(H,xe.startTime-q)}}var z=!1,L=-1,P=5,U=-1;function Z(){return I?!0:!(t.unstable_now()-U<P)}function ae(){if(I=!1,z){var q=t.unstable_now();U=q;var xe=!0;try{e:{T=!1,A&&(A=!1,M(L),L=-1),_=!0;var Ce=E;try{t:{for(B(q),j=r(b);j!==null&&!(j.expirationTime>q&&Z());){var le=j.callback;if(typeof le=="function"){j.callback=null,E=j.priorityLevel;var oe=le(j.expirationTime<=q);if(q=t.unstable_now(),typeof oe=="function"){j.callback=oe,B(q),xe=!0;break t}j===r(b)&&i(b),B(q)}else i(b);j=r(b)}if(j!==null)xe=!0;else{var re=r(p);re!==null&&G(H,re.startTime-q),xe=!1}}break e}finally{j=null,E=Ce,_=!1}xe=void 0}}finally{xe?Y():z=!1}}}var Y;if(typeof D=="function")Y=function(){D(ae)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,de=ue.port2;ue.port1.onmessage=ae,Y=function(){de.postMessage(null)}}else Y=function(){O(ae,0)};function G(q,xe){L=O(function(){q(t.unstable_now())},xe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var xe=3;break;default:xe=E}var Ce=E;E=xe;try{return q()}finally{E=Ce}},t.unstable_requestPaint=function(){I=!0},t.unstable_runWithPriority=function(q,xe){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var Ce=E;E=q;try{return xe()}finally{E=Ce}},t.unstable_scheduleCallback=function(q,xe,Ce){var le=t.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?le+Ce:le):Ce=le,q){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=Ce+oe,q={id:w++,callback:xe,priorityLevel:q,startTime:Ce,expirationTime:oe,sortIndex:-1},Ce>le?(q.sortIndex=Ce,a(p,q),r(b)===null&&q===r(p)&&(A?(M(L),L=-1):A=!0,G(H,Ce-le))):(q.sortIndex=oe,a(b,q),T||_||(T=!0,z||(z=!0,Y()))),q},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(q){var xe=E;return function(){var Ce=E;E=xe;try{return q.apply(this,arguments)}finally{E=Ce}}}}(jh)),jh}var Ay;function fk(){return Ay||(Ay=1,kh.exports=uk()),kh.exports}var Ch={exports:{}},os={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sy;function xk(){if(Sy)return os;Sy=1;var t=Gm();function a(b){var p="https://react.dev/errors/"+b;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+b+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,p,w){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:j==null?null:""+j,children:b,containerInfo:p,implementation:w}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(b,p){if(b==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,os.createPortal=function(b,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(b,p,null,w)},os.flushSync=function(b){var p=f.T,w=i.p;try{if(f.T=null,i.p=2,b)return b()}finally{f.T=p,i.p=w,i.d.f()}},os.preconnect=function(b,p){typeof b=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(b,p))},os.prefetchDNS=function(b){typeof b=="string"&&i.d.D(b)},os.preinit=function(b,p){if(typeof b=="string"&&p&&typeof p.as=="string"){var w=p.as,j=h(w,p.crossOrigin),E=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;w==="style"?i.d.S(b,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:j,integrity:E,fetchPriority:_}):w==="script"&&i.d.X(b,{crossOrigin:j,integrity:E,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},os.preinitModule=function(b,p){if(typeof b=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var w=h(p.as,p.crossOrigin);i.d.M(b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(b)},os.preload=function(b,p){if(typeof b=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var w=p.as,j=h(w,p.crossOrigin);i.d.L(b,w,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},os.preloadModule=function(b,p){if(typeof b=="string")if(p){var w=h(p.as,p.crossOrigin);i.d.m(b,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(b)},os.requestFormReset=function(b){i.d.r(b)},os.unstable_batchedUpdates=function(b,p){return b(p)},os.useFormState=function(b,p,w){return f.H.useFormState(b,p,w)},os.useFormStatus=function(){return f.H.useHostTransitionStatus()},os.version="19.1.1",os}var Ty;function hk(){if(Ty)return Ch.exports;Ty=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Ch.exports=xk(),Ch.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function mk(){if(Dy)return b0;Dy=1;var t=fk(),a=Gm(),r=hk();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)o+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var o=s,x=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(x=o.return),s=o.return;while(s)}return o.tag===3?x:null}function f(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(d(s)!==s)throw Error(i(188))}function b(s){var o=s.alternate;if(!o){if(o=d(s),o===null)throw Error(i(188));return o!==s?null:s}for(var x=s,y=o;;){var k=x.return;if(k===null)break;var R=k.alternate;if(R===null){if(y=k.return,y!==null){x=y;continue}break}if(k.child===R.child){for(R=k.child;R;){if(R===x)return h(k),s;if(R===y)return h(k),o;R=R.sibling}throw Error(i(188))}if(x.return!==y.return)x=k,y=R;else{for(var W=!1,he=k.child;he;){if(he===x){W=!0,x=k,y=R;break}if(he===y){W=!0,y=k,x=R;break}he=he.sibling}if(!W){for(he=R.child;he;){if(he===x){W=!0,x=R,y=k;break}if(he===y){W=!0,y=R,x=k;break}he=he.sibling}if(!W)throw Error(i(189))}}if(x.alternate!==y)throw Error(i(190))}if(x.tag!==3)throw Error(i(188));return x.stateNode.current===x?s:o}function p(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=p(s),o!==null)return o;s=s.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),D=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),U=Symbol.for("react.activity"),Z=Symbol.for("react.memo_cache_sentinel"),ae=Symbol.iterator;function Y(s){return s===null||typeof s!="object"?null:(s=ae&&s[ae]||s["@@iterator"],typeof s=="function"?s:null)}var ue=Symbol.for("react.client.reference");function de(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ue?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case T:return"Fragment";case I:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case z:return"SuspenseList";case U:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case D:return(s.displayName||"Context")+".Provider";case M:return(s._context.displayName||"Context")+".Consumer";case B:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return o=s.displayName||null,o!==null?o:de(s.type)||"Memo";case P:o=s._payload,s=s._init;try{return de(s(o))}catch{}}return null}var G=Array.isArray,q=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,xe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ce={pending:!1,data:null,method:null,action:null},le=[],oe=-1;function re(s){return{current:s}}function Q(s){0>oe||(s.current=le[oe],le[oe]=null,oe--)}function X(s,o){oe++,le[oe]=s.current,s.current=o}var se=re(null),ne=re(null),K=re(null),Se=re(null);function we(s,o){switch(X(K,o),X(ne,s),X(se,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Zp(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Zp(o),s=Qp(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(se),X(se,s)}function Ve(){Q(se),Q(ne),Q(K)}function Le(s){s.memoizedState!==null&&X(Se,s);var o=se.current,x=Qp(o,s.type);o!==x&&(X(ne,s),X(se,x))}function ot(s){ne.current===s&&(Q(se),Q(ne)),Se.current===s&&(Q(Se),x0._currentValue=Ce)}var J=Object.prototype.hasOwnProperty,Ne=t.unstable_scheduleCallback,Ie=t.unstable_cancelCallback,ke=t.unstable_shouldYield,Qe=t.unstable_requestPaint,_e=t.unstable_now,ut=t.unstable_getCurrentPriorityLevel,pe=t.unstable_ImmediatePriority,Ge=t.unstable_UserBlockingPriority,ze=t.unstable_NormalPriority,Pe=t.unstable_LowPriority,Oe=t.unstable_IdlePriority,nt=t.log,kt=t.unstable_setDisableYieldValue,St=null,Nr=null;function tr(s){if(typeof nt=="function"&&kt(s),Nr&&typeof Nr.setStrictMode=="function")try{Nr.setStrictMode(St,s)}catch{}}var qt=Math.clz32?Math.clz32:at,Gt=Math.log,lr=Math.LN2;function at(s){return s>>>=0,s===0?32:31-(Gt(s)/lr|0)|0}var yt=256,Be=4194304;function Et(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Bt(s,o,x){var y=s.pendingLanes;if(y===0)return 0;var k=0,R=s.suspendedLanes,W=s.pingedLanes;s=s.warmLanes;var he=y&134217727;return he!==0?(y=he&~R,y!==0?k=Et(y):(W&=he,W!==0?k=Et(W):x||(x=he&~s,x!==0&&(k=Et(x))))):(he=y&~R,he!==0?k=Et(he):W!==0?k=Et(W):x||(x=y&~s,x!==0&&(k=Et(x)))),k===0?0:o!==0&&o!==k&&(o&R)===0&&(R=k&-k,x=o&-o,R>=x||R===32&&(x&4194048)!==0)?o:k}function Me(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function pt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Vr(){var s=yt;return yt<<=1,(yt&4194048)===0&&(yt=256),s}function Dt(){var s=Be;return Be<<=1,(Be&62914560)===0&&(Be=4194304),s}function Yt(s){for(var o=[],x=0;31>x;x++)o.push(s);return o}function sr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ta(s,o,x,y,k,R){var W=s.pendingLanes;s.pendingLanes=x,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=x,s.entangledLanes&=x,s.errorRecoveryDisabledLanes&=x,s.shellSuspendCounter=0;var he=s.entanglements,Te=s.expirationTimes,We=s.hiddenUpdates;for(x=W&~x;0<x;){var ct=31-qt(x),xt=1<<ct;he[ct]=0,Te[ct]=-1;var Ze=We[ct];if(Ze!==null)for(We[ct]=null,ct=0;ct<Ze.length;ct++){var tt=Ze[ct];tt!==null&&(tt.lane&=-536870913)}x&=~xt}y!==0&&Ts(s,y,0),R!==0&&k===0&&s.tag!==0&&(s.suspendedLanes|=R&~(W&~o))}function Ts(s,o,x){s.pendingLanes|=o,s.suspendedLanes&=~o;var y=31-qt(o);s.entangledLanes|=o,s.entanglements[y]=s.entanglements[y]|1073741824|x&4194090}function $r(s,o){var x=s.entangledLanes|=o;for(s=s.entanglements;x;){var y=31-qt(x),k=1<<y;k&o|s[y]&o&&(s[y]|=o),x&=~k}}function zs(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Yr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function ps(){var s=xe.p;return s!==0?s:(s=window.event,s===void 0?32:py(s.type))}function bn(s,o){var x=xe.p;try{return xe.p=s,o()}finally{xe.p=x}}var ta=Math.random().toString(36).slice(2),la="__reactFiber$"+ta,At="__reactProps$"+ta,ra="__reactContainer$"+ta,Tr="__reactEvents$"+ta,Us="__reactListeners$"+ta,ce="__reactHandles$"+ta,me="__reactResources$"+ta,ge="__reactMarker$"+ta;function ye(s){delete s[la],delete s[At],delete s[Tr],delete s[Us],delete s[ce]}function ve(s){var o=s[la];if(o)return o;for(var x=s.parentNode;x;){if(o=x[ra]||x[la]){if(x=o.alternate,o.child!==null||x!==null&&x.child!==null)for(s=ry(s);s!==null;){if(x=s[la])return x;s=ry(s)}return o}s=x,x=s.parentNode}return null}function Ee(s){if(s=s[la]||s[ra]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Ye(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function lt(s){var o=s[me];return o||(o=s[me]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ue(s){s[ge]=!0}var Ke=new Set,Je={};function ft(s,o){mt(s,o),mt(s+"Capture",o)}function mt(s,o){for(Je[s]=o,s=0;s<o.length;s++)Ke.add(o[s])}var bt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),wt={},jt={};function Pt(s){return J.call(jt,s)?!0:J.call(wt,s)?!1:bt.test(s)?jt[s]=!0:(wt[s]=!0,!1)}function it(s,o,x){if(Pt(o))if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var y=o.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+x)}}function _r(s,o,x){if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+x)}}function zt(s,o,x,y){if(y===null)s.removeAttribute(x);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(x);return}s.setAttributeNS(o,x,""+y)}}var ts,Bn;function Qt(s){if(ts===void 0)try{throw Error()}catch(x){var o=x.stack.trim().match(/\n( *(at )?)/);ts=o&&o[1]||"",Bn=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ts+s+Bn}var Jt=!1;function er(s,o){if(!s||Jt)return"";Jt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(o){var xt=function(){throw Error()};if(Object.defineProperty(xt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(xt,[])}catch(tt){var Ze=tt}Reflect.construct(s,[],xt)}else{try{xt.call()}catch(tt){Ze=tt}s.call(xt.prototype)}}else{try{throw Error()}catch(tt){Ze=tt}(xt=s())&&typeof xt.catch=="function"&&xt.catch(function(){})}}catch(tt){if(tt&&Ze&&typeof tt.stack=="string")return[tt.stack,Ze.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var R=y.DetermineComponentFrameRoot(),W=R[0],he=R[1];if(W&&he){var Te=W.split(`
`),We=he.split(`
`);for(k=y=0;y<Te.length&&!Te[y].includes("DetermineComponentFrameRoot");)y++;for(;k<We.length&&!We[k].includes("DetermineComponentFrameRoot");)k++;if(y===Te.length||k===We.length)for(y=Te.length-1,k=We.length-1;1<=y&&0<=k&&Te[y]!==We[k];)k--;for(;1<=y&&0<=k;y--,k--)if(Te[y]!==We[k]){if(y!==1||k!==1)do if(y--,k--,0>k||Te[y]!==We[k]){var ct=`
`+Te[y].replace(" at new "," at ");return s.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",s.displayName)),ct}while(1<=y&&0<=k);break}}}finally{Jt=!1,Error.prepareStackTrace=x}return(x=s?s.displayName||s.name:"")?Qt(x):""}function ys(s){switch(s.tag){case 26:case 27:case 5:return Qt(s.type);case 16:return Qt("Lazy");case 13:return Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return er(s.type,!1);case 11:return er(s.type.render,!1);case 1:return er(s.type,!0);case 31:return Qt("Activity");default:return""}}function Eo(s){try{var o="";do o+=ys(s),s=s.return;while(s);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function rs(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function oa(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Ln(s){var o=oa(s)?"checked":"value",x=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),y=""+s[o];if(!s.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var k=x.get,R=x.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return k.call(this)},set:function(W){y=""+W,R.call(this,W)}}),Object.defineProperty(s,o,{enumerable:x.enumerable}),{getValue:function(){return y},setValue:function(W){y=""+W},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function _o(s){s._valueTracker||(s._valueTracker=Ln(s))}function Zr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var x=o.getValue(),y="";return s&&(y=oa(s)?s.checked?"true":"false":s.value),s=y,s!==x?(o.setValue(s),!0):!1}function Hs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ef=/[\n"\\]/g;function Da(s){return s.replace(Ef,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Ar(s,o,x,y,k,R,W,he){s.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?s.type=W:s.removeAttribute("type"),o!=null?W==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+rs(o)):s.value!==""+rs(o)&&(s.value=""+rs(o)):W!=="submit"&&W!=="reset"||s.removeAttribute("value"),o!=null?qe(s,W,rs(o)):x!=null?qe(s,W,rs(x)):y!=null&&s.removeAttribute("value"),k==null&&R!=null&&(s.defaultChecked=!!R),k!=null&&(s.checked=k&&typeof k!="function"&&typeof k!="symbol"),he!=null&&typeof he!="function"&&typeof he!="symbol"&&typeof he!="boolean"?s.name=""+rs(he):s.removeAttribute("name")}function Ra(s,o,x,y,k,R,W,he){if(R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.type=R),o!=null||x!=null){if(!(R!=="submit"&&R!=="reset"||o!=null))return;x=x!=null?""+rs(x):"",o=o!=null?""+rs(o):x,he||o===s.value||(s.value=o),s.defaultValue=o}y=y??k,y=typeof y!="function"&&typeof y!="symbol"&&!!y,s.checked=he?s.checked:!!y,s.defaultChecked=!!y,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(s.name=W)}function qe(s,o,x){o==="number"&&Hs(s.ownerDocument)===s||s.defaultValue===""+x||(s.defaultValue=""+x)}function be(s,o,x,y){if(s=s.options,o){o={};for(var k=0;k<x.length;k++)o["$"+x[k]]=!0;for(x=0;x<s.length;x++)k=o.hasOwnProperty("$"+s[x].value),s[x].selected!==k&&(s[x].selected=k),k&&y&&(s[x].defaultSelected=!0)}else{for(x=""+rs(x),o=null,k=0;k<s.length;k++){if(s[k].value===x){s[k].selected=!0,y&&(s[k].defaultSelected=!0);return}o!==null||s[k].disabled||(o=s[k])}o!==null&&(o.selected=!0)}}function Tt(s,o,x){if(o!=null&&(o=""+rs(o),o!==s.value&&(s.value=o),x==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=x!=null?""+rs(x):""}function ga(s,o,x,y){if(o==null){if(y!=null){if(x!=null)throw Error(i(92));if(G(y)){if(1<y.length)throw Error(i(93));y=y[0]}x=y}x==null&&(x=""),o=x}x=rs(o),s.defaultValue=x,y=s.textContent,y===x&&y!==""&&y!==null&&(s.value=y)}function Oa(s,o){if(o){var x=s.firstChild;if(x&&x===s.lastChild&&x.nodeType===3){x.nodeValue=o;return}}s.textContent=o}var _f=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ao(s,o,x){var y=o.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?y?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":y?s.setProperty(o,x):typeof x!="number"||x===0||_f.has(o)?o==="float"?s.cssFloat=x:s[o]=(""+x).trim():s[o]=x+"px"}function bs(s,o,x){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,x!=null){for(var y in x)!x.hasOwnProperty(y)||o!=null&&o.hasOwnProperty(y)||(y.indexOf("--")===0?s.setProperty(y,""):y==="float"?s.cssFloat="":s[y]="");for(var k in o)y=o[k],o.hasOwnProperty(k)&&x[k]!==y&&Ao(s,k,y)}else for(var R in o)o.hasOwnProperty(R)&&Ao(s,R,o[R])}function Rt(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),gd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function So(s){return gd.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Ol=null;function Ui(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Pn=null,Hi=null;function pa(s){var o=Ee(s);if(o&&(s=o.stateNode)){var x=s[At]||null;e:switch(s=o.stateNode,o.type){case"input":if(Ar(s,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),o=x.name,x.type==="radio"&&o!=null){for(x=s;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Da(""+o)+'"][type="radio"]'),o=0;o<x.length;o++){var y=x[o];if(y!==s&&y.form===s.form){var k=y[At]||null;if(!k)throw Error(i(90));Ar(y,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(o=0;o<x.length;o++)y=x[o],y.form===s.form&&Zr(y)}break e;case"textarea":Tt(s,x.value,x.defaultValue);break e;case"select":o=x.value,o!=null&&be(s,!!x.multiple,o,!1)}}}var di=!1;function vn(s,o,x){if(di)return s(o,x);di=!0;try{var y=s(o);return y}finally{if(di=!1,(Pn!==null||Hi!==null)&&(tu(),Pn&&(o=Pn,s=Hi,Hi=Pn=null,pa(o),s)))for(o=0;o<s.length;o++)pa(s[o])}}function It(s,o){var x=s.stateNode;if(x===null)return null;var y=x[At]||null;if(y===null)return null;x=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(x&&typeof x!="function")throw Error(i(231,o,typeof x));return x}var wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wt=!1;if(wn)try{var aa={};Object.defineProperty(aa,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",aa,aa),window.removeEventListener("test",aa,aa)}catch{Wt=!1}var zn=null,Il=null,Fl=null;function Un(){if(Fl)return Fl;var s,o=Il,x=o.length,y,k="value"in zn?zn.value:zn.textContent,R=k.length;for(s=0;s<x&&o[s]===k[s];s++);var W=x-s;for(y=1;y<=W&&o[x-y]===k[R-y];y++);return Fl=k.slice(s,1<y?1-y:void 0)}function To(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Hn(){return!0}function Vi(){return!1}function ka(s){function o(x,y,k,R,W){this._reactName=x,this._targetInst=k,this.type=y,this.nativeEvent=R,this.target=W,this.currentTarget=null;for(var he in s)s.hasOwnProperty(he)&&(x=s[he],this[he]=x?x(R):R[he]);return this.isDefaultPrevented=(R.defaultPrevented!=null?R.defaultPrevented:R.returnValue===!1)?Hn:Vi,this.isPropagationStopped=Vi,this}return w(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Hn)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Hn)},persist:function(){},isPersistent:Hn}),o}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gn=ka(Vn),Nn=w({},Vn,{view:0,detail:0}),as=ka(Nn),Do,Ro,Gi,Oo=w({},Nn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bl,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Gi&&(Gi&&s.type==="mousemove"?(Do=s.screenX-Gi.screenX,Ro=s.screenY-Gi.screenY):Ro=Do=0,Gi=s),Do)},movementY:function(s){return"movementY"in s?s.movementY:Ro}}),pd=ka(Oo),Af=w({},Oo,{dataTransfer:0}),Sr=ka(Af),yd=w({},Nn,{relatedTarget:0}),Xi=ka(yd),Xn=w({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sf=ka(Xn),rt=w({},Vn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),nr=ka(rt),Ia=w({},Vn,{data:0}),Ml=ka(Ia),bd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Df={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Rf(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Df[s])?!!o[s]:!1}function Bl(){return Rf}var ya=w({},Nn,{key:function(s){if(s.key){var o=bd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=To(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Tf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bl,charCode:function(s){return s.type==="keypress"?To(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?To(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Sc=ka(ya),Qr=w({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ll=ka(Qr),ui=w({},Nn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bl}),Dr=ka(ui),Ft=w({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Of=ka(Ft),Ur=w({},Oo,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),fi=ka(Ur),qi=w({},Vn,{newState:0,oldState:0}),If=ka(qi),an=[9,13,27,32],Pl=wn&&"CompositionEvent"in window,$i=null;wn&&"documentMode"in document&&($i=document.documentMode);var Tc=wn&&"TextEvent"in window&&!$i,Dc=wn&&(!Pl||$i&&8<$i&&11>=$i),Rc=" ",vd=!1;function xi(s,o){switch(s){case"keyup":return an.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Io(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Yi=!1;function zl(s,o){switch(s){case"compositionend":return Io(o);case"keypress":return o.which!==32?null:(vd=!0,Rc);case"textInput":return s=o.data,s===Rc&&vd?null:s;default:return null}}function Ff(s,o){if(Yi)return s==="compositionend"||!Pl&&xi(s,o)?(s=Un(),Fl=Il=zn=null,Yi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Dc&&o.locale!=="ko"?null:o.data;default:return null}}var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ul(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!qn[s.type]:o==="textarea"}function vs(s,o,x,y){Pn?Hi?Hi.push(y):Hi=[y]:Pn=y,o=lu(o,"onChange"),0<o.length&&(x=new Gn("onChange","change",null,x,y),s.push({event:x,listeners:o}))}var Wi=null,ss=null;function Mf(s){qp(s,0)}function Ki(s){var o=Ye(s);if(Zr(o))return s}function wd(s,o){if(s==="change")return o}var Oc=!1;if(wn){var Ds;if(wn){var Ic="oninput"in document;if(!Ic){var Fo=document.createElement("div");Fo.setAttribute("oninput","return;"),Ic=typeof Fo.oninput=="function"}Ds=Ic}else Ds=!1;Oc=Ds&&(!document.documentMode||9<document.documentMode)}function Zi(){Wi&&(Wi.detachEvent("onpropertychange",xr),ss=Wi=null)}function xr(s){if(s.propertyName==="value"&&Ki(ss)){var o=[];vs(o,ss,s,Ui(s)),vn(Mf,o)}}function Mo(s,o,x){s==="focusin"?(Zi(),Wi=o,ss=x,Wi.attachEvent("onpropertychange",xr)):s==="focusout"&&Zi()}function ee(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Ki(ss)}function n(s,o){if(s==="click")return Ki(o)}function c(s,o){if(s==="input"||s==="change")return Ki(o)}function u(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var m=typeof Object.is=="function"?Object.is:u;function g(s,o){if(m(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var x=Object.keys(s),y=Object.keys(o);if(x.length!==y.length)return!1;for(y=0;y<x.length;y++){var k=x[y];if(!J.call(o,k)||!m(s[k],o[k]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function N(s,o){var x=v(s);s=0;for(var y;x;){if(x.nodeType===3){if(y=s+x.textContent.length,s<=o&&y>=o)return{node:x,offset:o-s};s=y}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=v(x)}}function S(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?S(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function F(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Hs(s.document);o instanceof s.HTMLIFrameElement;){try{var x=typeof o.contentWindow.location.href=="string"}catch{x=!1}if(x)s=o.contentWindow;else break;o=Hs(s.document)}return o}function V(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var te=wn&&"documentMode"in document&&11>=document.documentMode,fe=null,je=null,De=null,Re=!1;function Xe(s,o,x){var y=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Re||fe==null||fe!==Hs(y)||(y=fe,"selectionStart"in y&&V(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),De&&g(De,y)||(De=y,y=lu(je,"onSelect"),0<y.length&&(o=new Gn("onSelect","select",null,o,x),s.push({event:o,listeners:y}),o.target=fe)))}function et(s,o){var x={};return x[s.toLowerCase()]=o.toLowerCase(),x["Webkit"+s]="webkit"+o,x["Moz"+s]="moz"+o,x}var gt={animationend:et("Animation","AnimationEnd"),animationiteration:et("Animation","AnimationIteration"),animationstart:et("Animation","AnimationStart"),transitionrun:et("Transition","TransitionRun"),transitionstart:et("Transition","TransitionStart"),transitioncancel:et("Transition","TransitionCancel"),transitionend:et("Transition","TransitionEnd")},vt={},ht={};wn&&(ht=document.createElement("div").style,"AnimationEvent"in window||(delete gt.animationend.animation,delete gt.animationiteration.animation,delete gt.animationstart.animation),"TransitionEvent"in window||delete gt.transitionend.transition);function Kt(s){if(vt[s])return vt[s];if(!gt[s])return s;var o=gt[s],x;for(x in o)if(o.hasOwnProperty(x)&&x in ht)return vt[s]=o[x];return s}var $t=Kt("animationend"),$a=Kt("animationiteration"),Rs=Kt("animationstart"),ns=Kt("transitionrun"),Rr=Kt("transitionstart"),Fa=Kt("transitioncancel"),is=Kt("transitionend"),hi=new Map,$n="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");$n.push("scrollEnd");function Vs(s,o){hi.set(s,o),ft(o,[s])}var Nd=new WeakMap;function sn(s,o){if(typeof s=="object"&&s!==null){var x=Nd.get(s);return x!==void 0?x:(o={value:s,source:o,stack:Eo(o)},Nd.set(s,o),o)}return{value:s,source:o,stack:Eo(o)}}var nn=[],Bo=0,Bf=0;function kd(){for(var s=Bo,o=Bf=Bo=0;o<s;){var x=nn[o];nn[o++]=null;var y=nn[o];nn[o++]=null;var k=nn[o];nn[o++]=null;var R=nn[o];if(nn[o++]=null,y!==null&&k!==null){var W=y.pending;W===null?k.next=k:(k.next=W.next,W.next=k),y.pending=k}R!==0&&Tg(x,k,R)}}function jd(s,o,x,y){nn[Bo++]=s,nn[Bo++]=o,nn[Bo++]=x,nn[Bo++]=y,Bf|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Lf(s,o,x,y){return jd(s,o,x,y),Cd(s)}function Lo(s,o){return jd(s,null,null,o),Cd(s)}function Tg(s,o,x){s.lanes|=x;var y=s.alternate;y!==null&&(y.lanes|=x);for(var k=!1,R=s.return;R!==null;)R.childLanes|=x,y=R.alternate,y!==null&&(y.childLanes|=x),R.tag===22&&(s=R.stateNode,s===null||s._visibility&1||(k=!0)),s=R,R=R.return;return s.tag===3?(R=s.stateNode,k&&o!==null&&(k=31-qt(x),s=R.hiddenUpdates,y=s[k],y===null?s[k]=[o]:y.push(o),o.lane=x|536870912),R):null}function Cd(s){if(50<n0)throw n0=0,Gx=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Po={};function q4(s,o,x,y){this.tag=s,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(s,o,x,y){return new q4(s,o,x,y)}function Pf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function mi(s,o){var x=s.alternate;return x===null?(x=Gs(s.tag,o,s.key,s.mode),x.elementType=s.elementType,x.type=s.type,x.stateNode=s.stateNode,x.alternate=s,s.alternate=x):(x.pendingProps=o,x.type=s.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=s.flags&65011712,x.childLanes=s.childLanes,x.lanes=s.lanes,x.child=s.child,x.memoizedProps=s.memoizedProps,x.memoizedState=s.memoizedState,x.updateQueue=s.updateQueue,o=s.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},x.sibling=s.sibling,x.index=s.index,x.ref=s.ref,x.refCleanup=s.refCleanup,x}function Dg(s,o){s.flags&=65011714;var x=s.alternate;return x===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=x.childLanes,s.lanes=x.lanes,s.child=x.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=x.memoizedProps,s.memoizedState=x.memoizedState,s.updateQueue=x.updateQueue,s.type=x.type,o=x.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Ed(s,o,x,y,k,R){var W=0;if(y=s,typeof s=="function")Pf(s)&&(W=1);else if(typeof s=="string")W=YN(s,x,se.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case U:return s=Gs(31,x,o,k),s.elementType=U,s.lanes=R,s;case T:return Hl(x.children,k,R,o);case A:W=8,k|=24;break;case I:return s=Gs(12,x,o,k|2),s.elementType=I,s.lanes=R,s;case H:return s=Gs(13,x,o,k),s.elementType=H,s.lanes=R,s;case z:return s=Gs(19,x,o,k),s.elementType=z,s.lanes=R,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case O:case D:W=10;break e;case M:W=9;break e;case B:W=11;break e;case L:W=14;break e;case P:W=16,y=null;break e}W=29,x=Error(i(130,s===null?"null":typeof s,"")),y=null}return o=Gs(W,x,o,k),o.elementType=s,o.type=y,o.lanes=R,o}function Hl(s,o,x,y){return s=Gs(7,s,y,o),s.lanes=x,s}function zf(s,o,x){return s=Gs(6,s,null,o),s.lanes=x,s}function Uf(s,o,x){return o=Gs(4,s.children!==null?s.children:[],s.key,o),o.lanes=x,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var zo=[],Uo=0,_d=null,Ad=0,ln=[],on=0,Vl=null,gi=1,pi="";function Gl(s,o){zo[Uo++]=Ad,zo[Uo++]=_d,_d=s,Ad=o}function Rg(s,o,x){ln[on++]=gi,ln[on++]=pi,ln[on++]=Vl,Vl=s;var y=gi;s=pi;var k=32-qt(y)-1;y&=~(1<<k),x+=1;var R=32-qt(o)+k;if(30<R){var W=k-k%5;R=(y&(1<<W)-1).toString(32),y>>=W,k-=W,gi=1<<32-qt(o)+k|x<<k|y,pi=R+s}else gi=1<<R|x<<k|y,pi=s}function Hf(s){s.return!==null&&(Gl(s,1),Rg(s,1,0))}function Vf(s){for(;s===_d;)_d=zo[--Uo],zo[Uo]=null,Ad=zo[--Uo],zo[Uo]=null;for(;s===Vl;)Vl=ln[--on],ln[on]=null,pi=ln[--on],ln[on]=null,gi=ln[--on],ln[on]=null}var ws=null,ca=null,Cr=!1,Xl=null,Yn=!1,Gf=Error(i(519));function ql(s){var o=Error(i(418,""));throw Bc(sn(o,s)),Gf}function Og(s){var o=s.stateNode,x=s.type,y=s.memoizedProps;switch(o[la]=s,o[At]=y,x){case"dialog":fr("cancel",o),fr("close",o);break;case"iframe":case"object":case"embed":fr("load",o);break;case"video":case"audio":for(x=0;x<l0.length;x++)fr(l0[x],o);break;case"source":fr("error",o);break;case"img":case"image":case"link":fr("error",o),fr("load",o);break;case"details":fr("toggle",o);break;case"input":fr("invalid",o),Ra(o,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),_o(o);break;case"select":fr("invalid",o);break;case"textarea":fr("invalid",o),ga(o,y.value,y.defaultValue,y.children),_o(o)}x=y.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||o.textContent===""+x||y.suppressHydrationWarning===!0||Kp(o.textContent,x)?(y.popover!=null&&(fr("beforetoggle",o),fr("toggle",o)),y.onScroll!=null&&fr("scroll",o),y.onScrollEnd!=null&&fr("scrollend",o),y.onClick!=null&&(o.onclick=ou),o=!0):o=!1,o||ql(s)}function Ig(s){for(ws=s.return;ws;)switch(ws.tag){case 5:case 13:Yn=!1;return;case 27:case 3:Yn=!0;return;default:ws=ws.return}}function Fc(s){if(s!==ws)return!1;if(!Cr)return Ig(s),Cr=!0,!1;var o=s.tag,x;if((x=o!==3&&o!==27)&&((x=o===5)&&(x=s.type,x=!(x!=="form"&&x!=="button")||ih(s.type,s.memoizedProps)),x=!x),x&&ca&&ql(s),Ig(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(x=s.data,x==="/$"){if(o===0){ca=jn(s.nextSibling);break e}o--}else x!=="$"&&x!=="$!"&&x!=="$?"||o++;s=s.nextSibling}ca=null}}else o===27?(o=ca,xl(s.type)?(s=dh,dh=null,ca=s):ca=o):ca=ws?jn(s.stateNode.nextSibling):null;return!0}function Mc(){ca=ws=null,Cr=!1}function Fg(){var s=Xl;return s!==null&&(Fs===null?Fs=s:Fs.push.apply(Fs,s),Xl=null),s}function Bc(s){Xl===null?Xl=[s]:Xl.push(s)}var Xf=re(null),$l=null,yi=null;function Qi(s,o,x){X(Xf,o._currentValue),o._currentValue=x}function bi(s){s._currentValue=Xf.current,Q(Xf)}function qf(s,o,x){for(;s!==null;){var y=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),s===x)break;s=s.return}}function $f(s,o,x,y){var k=s.child;for(k!==null&&(k.return=s);k!==null;){var R=k.dependencies;if(R!==null){var W=k.child;R=R.firstContext;e:for(;R!==null;){var he=R;R=k;for(var Te=0;Te<o.length;Te++)if(he.context===o[Te]){R.lanes|=x,he=R.alternate,he!==null&&(he.lanes|=x),qf(R.return,x,s),y||(W=null);break e}R=he.next}}else if(k.tag===18){if(W=k.return,W===null)throw Error(i(341));W.lanes|=x,R=W.alternate,R!==null&&(R.lanes|=x),qf(W,x,s),W=null}else W=k.child;if(W!==null)W.return=k;else for(W=k;W!==null;){if(W===s){W=null;break}if(k=W.sibling,k!==null){k.return=W.return,W=k;break}W=W.return}k=W}}function Lc(s,o,x,y){s=null;for(var k=o,R=!1;k!==null;){if(!R){if((k.flags&524288)!==0)R=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var W=k.alternate;if(W===null)throw Error(i(387));if(W=W.memoizedProps,W!==null){var he=k.type;m(k.pendingProps.value,W.value)||(s!==null?s.push(he):s=[he])}}else if(k===Se.current){if(W=k.alternate,W===null)throw Error(i(387));W.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(s!==null?s.push(x0):s=[x0])}k=k.return}s!==null&&$f(o,s,x,y),o.flags|=262144}function Sd(s){for(s=s.firstContext;s!==null;){if(!m(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Yl(s){$l=s,yi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ls(s){return Mg($l,s)}function Td(s,o){return $l===null&&Yl(s),Mg(s,o)}function Mg(s,o){var x=o._currentValue;if(o={context:o,memoizedValue:x,next:null},yi===null){if(s===null)throw Error(i(308));yi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else yi=yi.next=o;return x}var $4=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(x,y){s.push(y)}};this.abort=function(){o.aborted=!0,s.forEach(function(x){return x()})}},Y4=t.unstable_scheduleCallback,W4=t.unstable_NormalPriority,Ma={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new $4,data:new Map,refCount:0}}function Pc(s){s.refCount--,s.refCount===0&&Y4(W4,function(){s.controller.abort()})}var zc=null,Wf=0,Ho=0,Vo=null;function K4(s,o){if(zc===null){var x=zc=[];Wf=0,Ho=Zx(),Vo={status:"pending",value:void 0,then:function(y){x.push(y)}}}return Wf++,o.then(Bg,Bg),o}function Bg(){if(--Wf===0&&zc!==null){Vo!==null&&(Vo.status="fulfilled");var s=zc;zc=null,Ho=0,Vo=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Z4(s,o){var x=[],y={status:"pending",value:null,reason:null,then:function(k){x.push(k)}};return s.then(function(){y.status="fulfilled",y.value=o;for(var k=0;k<x.length;k++)(0,x[k])(o)},function(k){for(y.status="rejected",y.reason=k,k=0;k<x.length;k++)(0,x[k])(void 0)}),y}var Lg=q.S;q.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&K4(s,o),Lg!==null&&Lg(s,o)};var Wl=re(null);function Kf(){var s=Wl.current;return s!==null?s:Gr.pooledCache}function Dd(s,o){o===null?X(Wl,Wl.current):X(Wl,o.pool)}function Pg(){var s=Kf();return s===null?null:{parent:Ma._currentValue,pool:s}}var Uc=Error(i(460)),zg=Error(i(474)),Rd=Error(i(542)),Zf={then:function(){}};function Ug(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Od(){}function Hg(s,o,x){switch(x=s[x],x===void 0?s.push(o):x!==o&&(o.then(Od,Od),o=x),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Gg(s),s;default:if(typeof o.status=="string")o.then(Od,Od);else{if(s=Gr,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(y){if(o.status==="pending"){var k=o;k.status="fulfilled",k.value=y}},function(y){if(o.status==="pending"){var k=o;k.status="rejected",k.reason=y}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Gg(s),s}throw Hc=o,Uc}}var Hc=null;function Vg(){if(Hc===null)throw Error(i(459));var s=Hc;return Hc=null,s}function Gg(s){if(s===Uc||s===Rd)throw Error(i(483))}var Ji=!1;function Qf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jf(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function el(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function tl(s,o,x){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Or&2)!==0){var k=y.pending;return k===null?o.next=o:(o.next=k.next,k.next=o),y.pending=o,o=Cd(s),Tg(s,null,x),o}return jd(s,y,o,x),Cd(s)}function Vc(s,o,x){if(o=o.updateQueue,o!==null&&(o=o.shared,(x&4194048)!==0)){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,$r(s,x)}}function ex(s,o){var x=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,x===y)){var k=null,R=null;if(x=x.firstBaseUpdate,x!==null){do{var W={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};R===null?k=R=W:R=R.next=W,x=x.next}while(x!==null);R===null?k=R=o:R=R.next=o}else k=R=o;x={baseState:y.baseState,firstBaseUpdate:k,lastBaseUpdate:R,shared:y.shared,callbacks:y.callbacks},s.updateQueue=x;return}s=x.lastBaseUpdate,s===null?x.firstBaseUpdate=o:s.next=o,x.lastBaseUpdate=o}var tx=!1;function Gc(){if(tx){var s=Vo;if(s!==null)throw s}}function Xc(s,o,x,y){tx=!1;var k=s.updateQueue;Ji=!1;var R=k.firstBaseUpdate,W=k.lastBaseUpdate,he=k.shared.pending;if(he!==null){k.shared.pending=null;var Te=he,We=Te.next;Te.next=null,W===null?R=We:W.next=We,W=Te;var ct=s.alternate;ct!==null&&(ct=ct.updateQueue,he=ct.lastBaseUpdate,he!==W&&(he===null?ct.firstBaseUpdate=We:he.next=We,ct.lastBaseUpdate=Te))}if(R!==null){var xt=k.baseState;W=0,ct=We=Te=null,he=R;do{var Ze=he.lane&-536870913,tt=Ze!==he.lane;if(tt?(pr&Ze)===Ze:(y&Ze)===Ze){Ze!==0&&Ze===Ho&&(tx=!0),ct!==null&&(ct=ct.next={lane:0,tag:he.tag,payload:he.payload,callback:null,next:null});e:{var Ht=s,Mt=he;Ze=o;var Pr=x;switch(Mt.tag){case 1:if(Ht=Mt.payload,typeof Ht=="function"){xt=Ht.call(Pr,xt,Ze);break e}xt=Ht;break e;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=Mt.payload,Ze=typeof Ht=="function"?Ht.call(Pr,xt,Ze):Ht,Ze==null)break e;xt=w({},xt,Ze);break e;case 2:Ji=!0}}Ze=he.callback,Ze!==null&&(s.flags|=64,tt&&(s.flags|=8192),tt=k.callbacks,tt===null?k.callbacks=[Ze]:tt.push(Ze))}else tt={lane:Ze,tag:he.tag,payload:he.payload,callback:he.callback,next:null},ct===null?(We=ct=tt,Te=xt):ct=ct.next=tt,W|=Ze;if(he=he.next,he===null){if(he=k.shared.pending,he===null)break;tt=he,he=tt.next,tt.next=null,k.lastBaseUpdate=tt,k.shared.pending=null}}while(!0);ct===null&&(Te=xt),k.baseState=Te,k.firstBaseUpdate=We,k.lastBaseUpdate=ct,R===null&&(k.shared.lanes=0),cl|=W,s.lanes=W,s.memoizedState=xt}}function Xg(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function qg(s,o){var x=s.callbacks;if(x!==null)for(s.callbacks=null,s=0;s<x.length;s++)Xg(x[s],o)}var Go=re(null),Id=re(0);function $g(s,o){s=Ei,X(Id,s),X(Go,o),Ei=s|o.baseLanes}function rx(){X(Id,Ei),X(Go,Go.current)}function ax(){Ei=Id.current,Q(Go),Q(Id)}var rl=0,cr=null,Br=null,ja=null,Fd=!1,Xo=!1,Kl=!1,Md=0,qc=0,qo=null,Q4=0;function ba(){throw Error(i(321))}function sx(s,o){if(o===null)return!1;for(var x=0;x<o.length&&x<s.length;x++)if(!m(s[x],o[x]))return!1;return!0}function nx(s,o,x,y,k,R){return rl=R,cr=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=s===null||s.memoizedState===null?T1:D1,Kl=!1,R=x(y,k),Kl=!1,Xo&&(R=Wg(o,x,y,k)),Yg(s),R}function Yg(s){q.H=Hd;var o=Br!==null&&Br.next!==null;if(rl=0,ja=Br=cr=null,Fd=!1,qc=0,qo=null,o)throw Error(i(300));s===null||Ua||(s=s.dependencies,s!==null&&Sd(s)&&(Ua=!0))}function Wg(s,o,x,y){cr=s;var k=0;do{if(Xo&&(qo=null),qc=0,Xo=!1,25<=k)throw Error(i(301));if(k+=1,ja=Br=null,s.updateQueue!=null){var R=s.updateQueue;R.lastEffect=null,R.events=null,R.stores=null,R.memoCache!=null&&(R.memoCache.index=0)}q.H=nN,R=o(x,y)}while(Xo);return R}function J4(){var s=q.H,o=s.useState()[0];return o=typeof o.then=="function"?$c(o):o,s=s.useState()[0],(Br!==null?Br.memoizedState:null)!==s&&(cr.flags|=1024),o}function ix(){var s=Md!==0;return Md=0,s}function lx(s,o,x){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x}function ox(s){if(Fd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Fd=!1}rl=0,ja=Br=cr=null,Xo=!1,qc=Md=0,qo=null}function Os(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ja===null?cr.memoizedState=ja=s:ja=ja.next=s,ja}function Ca(){if(Br===null){var s=cr.alternate;s=s!==null?s.memoizedState:null}else s=Br.next;var o=ja===null?cr.memoizedState:ja.next;if(o!==null)ja=o,Br=s;else{if(s===null)throw cr.alternate===null?Error(i(467)):Error(i(310));Br=s,s={memoizedState:Br.memoizedState,baseState:Br.baseState,baseQueue:Br.baseQueue,queue:Br.queue,next:null},ja===null?cr.memoizedState=ja=s:ja=ja.next=s}return ja}function cx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(s){var o=qc;return qc+=1,qo===null&&(qo=[]),s=Hg(qo,s,o),o=cr,(ja===null?o.memoizedState:ja.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?T1:D1),s}function Bd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return $c(s);if(s.$$typeof===D)return ls(s)}throw Error(i(438,String(s)))}function dx(s){var o=null,x=cr.updateQueue;if(x!==null&&(o=x.memoCache),o==null){var y=cr.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(o={data:y.data.map(function(k){return k.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),x===null&&(x=cx(),cr.updateQueue=x),x.memoCache=o,x=o.data[o.index],x===void 0)for(x=o.data[o.index]=Array(s),y=0;y<s;y++)x[y]=Z;return o.index++,x}function vi(s,o){return typeof o=="function"?o(s):o}function Ld(s){var o=Ca();return ux(o,Br,s)}function ux(s,o,x){var y=s.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=x;var k=s.baseQueue,R=y.pending;if(R!==null){if(k!==null){var W=k.next;k.next=R.next,R.next=W}o.baseQueue=k=R,y.pending=null}if(R=s.baseState,k===null)s.memoizedState=R;else{o=k.next;var he=W=null,Te=null,We=o,ct=!1;do{var xt=We.lane&-536870913;if(xt!==We.lane?(pr&xt)===xt:(rl&xt)===xt){var Ze=We.revertLane;if(Ze===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null}),xt===Ho&&(ct=!0);else if((rl&Ze)===Ze){We=We.next,Ze===Ho&&(ct=!0);continue}else xt={lane:0,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(he=Te=xt,W=R):Te=Te.next=xt,cr.lanes|=Ze,cl|=Ze;xt=We.action,Kl&&x(R,xt),R=We.hasEagerState?We.eagerState:x(R,xt)}else Ze={lane:xt,revertLane:We.revertLane,action:We.action,hasEagerState:We.hasEagerState,eagerState:We.eagerState,next:null},Te===null?(he=Te=Ze,W=R):Te=Te.next=Ze,cr.lanes|=xt,cl|=xt;We=We.next}while(We!==null&&We!==o);if(Te===null?W=R:Te.next=he,!m(R,s.memoizedState)&&(Ua=!0,ct&&(x=Vo,x!==null)))throw x;s.memoizedState=R,s.baseState=W,s.baseQueue=Te,y.lastRenderedState=R}return k===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function fx(s){var o=Ca(),x=o.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=s;var y=x.dispatch,k=x.pending,R=o.memoizedState;if(k!==null){x.pending=null;var W=k=k.next;do R=s(R,W.action),W=W.next;while(W!==k);m(R,o.memoizedState)||(Ua=!0),o.memoizedState=R,o.baseQueue===null&&(o.baseState=R),x.lastRenderedState=R}return[R,y]}function Kg(s,o,x){var y=cr,k=Ca(),R=Cr;if(R){if(x===void 0)throw Error(i(407));x=x()}else x=o();var W=!m((Br||k).memoizedState,x);W&&(k.memoizedState=x,Ua=!0),k=k.queue;var he=Jg.bind(null,y,k,s);if(Yc(2048,8,he,[s]),k.getSnapshot!==o||W||ja!==null&&ja.memoizedState.tag&1){if(y.flags|=2048,$o(9,Pd(),Qg.bind(null,y,k,x,o),null),Gr===null)throw Error(i(349));R||(rl&124)!==0||Zg(y,o,x)}return x}function Zg(s,o,x){s.flags|=16384,s={getSnapshot:o,value:x},o=cr.updateQueue,o===null?(o=cx(),cr.updateQueue=o,o.stores=[s]):(x=o.stores,x===null?o.stores=[s]:x.push(s))}function Qg(s,o,x,y){o.value=x,o.getSnapshot=y,e1(o)&&t1(s)}function Jg(s,o,x){return x(function(){e1(o)&&t1(s)})}function e1(s){var o=s.getSnapshot;s=s.value;try{var x=o();return!m(s,x)}catch{return!0}}function t1(s){var o=Lo(s,2);o!==null&&Ws(o,s,2)}function xx(s){var o=Os();if(typeof s=="function"){var x=s;if(s=x(),Kl){tr(!0);try{x()}finally{tr(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:s},o}function r1(s,o,x,y){return s.baseState=x,ux(s,Br,typeof y=="function"?y:vi)}function eN(s,o,x,y,k){if(Ud(s))throw Error(i(485));if(s=o.action,s!==null){var R={payload:k,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){R.listeners.push(W)}};q.T!==null?x(!0):R.isTransition=!1,y(R),x=o.pending,x===null?(R.next=o.pending=R,a1(o,R)):(R.next=x.next,o.pending=x.next=R)}}function a1(s,o){var x=o.action,y=o.payload,k=s.state;if(o.isTransition){var R=q.T,W={};q.T=W;try{var he=x(k,y),Te=q.S;Te!==null&&Te(W,he),s1(s,o,he)}catch(We){hx(s,o,We)}finally{q.T=R}}else try{R=x(k,y),s1(s,o,R)}catch(We){hx(s,o,We)}}function s1(s,o,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(y){n1(s,o,y)},function(y){return hx(s,o,y)}):n1(s,o,x)}function n1(s,o,x){o.status="fulfilled",o.value=x,i1(o),s.state=x,o=s.pending,o!==null&&(x=o.next,x===o?s.pending=null:(x=x.next,o.next=x,a1(s,x)))}function hx(s,o,x){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do o.status="rejected",o.reason=x,i1(o),o=o.next;while(o!==y)}s.action=null}function i1(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function l1(s,o){return o}function o1(s,o){if(Cr){var x=Gr.formState;if(x!==null){e:{var y=cr;if(Cr){if(ca){t:{for(var k=ca,R=Yn;k.nodeType!==8;){if(!R){k=null;break t}if(k=jn(k.nextSibling),k===null){k=null;break t}}R=k.data,k=R==="F!"||R==="F"?k:null}if(k){ca=jn(k.nextSibling),y=k.data==="F!";break e}}ql(y)}y=!1}y&&(o=x[0])}}return x=Os(),x.memoizedState=x.baseState=o,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l1,lastRenderedState:o},x.queue=y,x=_1.bind(null,cr,y),y.dispatch=x,y=xx(!1),R=bx.bind(null,cr,!1,y.queue),y=Os(),k={state:o,dispatch:null,action:s,pending:null},y.queue=k,x=eN.bind(null,cr,k,R,x),k.dispatch=x,y.memoizedState=s,[o,x,!1]}function c1(s){var o=Ca();return d1(o,Br,s)}function d1(s,o,x){if(o=ux(s,o,l1)[0],s=Ld(vi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var y=$c(o)}catch(W){throw W===Uc?Rd:W}else y=o;o=Ca();var k=o.queue,R=k.dispatch;return x!==o.memoizedState&&(cr.flags|=2048,$o(9,Pd(),tN.bind(null,k,x),null)),[y,R,s]}function tN(s,o){s.action=o}function u1(s){var o=Ca(),x=Br;if(x!==null)return d1(o,x,s);Ca(),o=o.memoizedState,x=Ca();var y=x.queue.dispatch;return x.memoizedState=s,[o,y,!1]}function $o(s,o,x,y){return s={tag:s,create:x,deps:y,inst:o,next:null},o=cr.updateQueue,o===null&&(o=cx(),cr.updateQueue=o),x=o.lastEffect,x===null?o.lastEffect=s.next=s:(y=x.next,x.next=s,s.next=y,o.lastEffect=s),s}function Pd(){return{destroy:void 0,resource:void 0}}function f1(){return Ca().memoizedState}function zd(s,o,x,y){var k=Os();y=y===void 0?null:y,cr.flags|=s,k.memoizedState=$o(1|o,Pd(),x,y)}function Yc(s,o,x,y){var k=Ca();y=y===void 0?null:y;var R=k.memoizedState.inst;Br!==null&&y!==null&&sx(y,Br.memoizedState.deps)?k.memoizedState=$o(o,R,x,y):(cr.flags|=s,k.memoizedState=$o(1|o,R,x,y))}function x1(s,o){zd(8390656,8,s,o)}function h1(s,o){Yc(2048,8,s,o)}function m1(s,o){return Yc(4,2,s,o)}function g1(s,o){return Yc(4,4,s,o)}function p1(s,o){if(typeof o=="function"){s=s();var x=o(s);return function(){typeof x=="function"?x():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function y1(s,o,x){x=x!=null?x.concat([s]):null,Yc(4,4,p1.bind(null,o,s),x)}function mx(){}function b1(s,o){var x=Ca();o=o===void 0?null:o;var y=x.memoizedState;return o!==null&&sx(o,y[1])?y[0]:(x.memoizedState=[s,o],s)}function v1(s,o){var x=Ca();o=o===void 0?null:o;var y=x.memoizedState;if(o!==null&&sx(o,y[1]))return y[0];if(y=s(),Kl){tr(!0);try{s()}finally{tr(!1)}}return x.memoizedState=[y,o],y}function gx(s,o,x){return x===void 0||(rl&1073741824)!==0?s.memoizedState=o:(s.memoizedState=x,s=kp(),cr.lanes|=s,cl|=s,x)}function w1(s,o,x,y){return m(x,o)?x:Go.current!==null?(s=gx(s,x,y),m(s,o)||(Ua=!0),s):(rl&42)===0?(Ua=!0,s.memoizedState=x):(s=kp(),cr.lanes|=s,cl|=s,o)}function N1(s,o,x,y,k){var R=xe.p;xe.p=R!==0&&8>R?R:8;var W=q.T,he={};q.T=he,bx(s,!1,o,x);try{var Te=k(),We=q.S;if(We!==null&&We(he,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var ct=Z4(Te,y);Wc(s,o,ct,Ys(s))}else Wc(s,o,y,Ys(s))}catch(xt){Wc(s,o,{then:function(){},status:"rejected",reason:xt},Ys())}finally{xe.p=R,q.T=W}}function rN(){}function px(s,o,x,y){if(s.tag!==5)throw Error(i(476));var k=k1(s).queue;N1(s,k,o,Ce,x===null?rN:function(){return j1(s),x(y)})}function k1(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:Ce,baseState:Ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:Ce},next:null};var x={};return o.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vi,lastRenderedState:x},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function j1(s){var o=k1(s).next.queue;Wc(s,o,{},Ys())}function yx(){return ls(x0)}function C1(){return Ca().memoizedState}function E1(){return Ca().memoizedState}function aN(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var x=Ys();s=el(x);var y=tl(o,s,x);y!==null&&(Ws(y,o,x),Vc(y,o,x)),o={cache:Yf()},s.payload=o;return}o=o.return}}function sN(s,o,x){var y=Ys();x={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},Ud(s)?A1(o,x):(x=Lf(s,o,x,y),x!==null&&(Ws(x,s,y),S1(x,o,y)))}function _1(s,o,x){var y=Ys();Wc(s,o,x,y)}function Wc(s,o,x,y){var k={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(Ud(s))A1(o,k);else{var R=s.alternate;if(s.lanes===0&&(R===null||R.lanes===0)&&(R=o.lastRenderedReducer,R!==null))try{var W=o.lastRenderedState,he=R(W,x);if(k.hasEagerState=!0,k.eagerState=he,m(he,W))return jd(s,o,k,0),Gr===null&&kd(),!1}catch{}finally{}if(x=Lf(s,o,k,y),x!==null)return Ws(x,s,y),S1(x,o,y),!0}return!1}function bx(s,o,x,y){if(y={lane:2,revertLane:Zx(),action:y,hasEagerState:!1,eagerState:null,next:null},Ud(s)){if(o)throw Error(i(479))}else o=Lf(s,x,y,2),o!==null&&Ws(o,s,2)}function Ud(s){var o=s.alternate;return s===cr||o!==null&&o===cr}function A1(s,o){Xo=Fd=!0;var x=s.pending;x===null?o.next=o:(o.next=x.next,x.next=o),s.pending=o}function S1(s,o,x){if((x&4194048)!==0){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,$r(s,x)}}var Hd={readContext:ls,use:Bd,useCallback:ba,useContext:ba,useEffect:ba,useImperativeHandle:ba,useLayoutEffect:ba,useInsertionEffect:ba,useMemo:ba,useReducer:ba,useRef:ba,useState:ba,useDebugValue:ba,useDeferredValue:ba,useTransition:ba,useSyncExternalStore:ba,useId:ba,useHostTransitionStatus:ba,useFormState:ba,useActionState:ba,useOptimistic:ba,useMemoCache:ba,useCacheRefresh:ba},T1={readContext:ls,use:Bd,useCallback:function(s,o){return Os().memoizedState=[s,o===void 0?null:o],s},useContext:ls,useEffect:x1,useImperativeHandle:function(s,o,x){x=x!=null?x.concat([s]):null,zd(4194308,4,p1.bind(null,o,s),x)},useLayoutEffect:function(s,o){return zd(4194308,4,s,o)},useInsertionEffect:function(s,o){zd(4,2,s,o)},useMemo:function(s,o){var x=Os();o=o===void 0?null:o;var y=s();if(Kl){tr(!0);try{s()}finally{tr(!1)}}return x.memoizedState=[y,o],y},useReducer:function(s,o,x){var y=Os();if(x!==void 0){var k=x(o);if(Kl){tr(!0);try{x(o)}finally{tr(!1)}}}else k=o;return y.memoizedState=y.baseState=k,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:k},y.queue=s,s=s.dispatch=sN.bind(null,cr,s),[y.memoizedState,s]},useRef:function(s){var o=Os();return s={current:s},o.memoizedState=s},useState:function(s){s=xx(s);var o=s.queue,x=_1.bind(null,cr,o);return o.dispatch=x,[s.memoizedState,x]},useDebugValue:mx,useDeferredValue:function(s,o){var x=Os();return gx(x,s,o)},useTransition:function(){var s=xx(!1);return s=N1.bind(null,cr,s.queue,!0,!1),Os().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,x){var y=cr,k=Os();if(Cr){if(x===void 0)throw Error(i(407));x=x()}else{if(x=o(),Gr===null)throw Error(i(349));(pr&124)!==0||Zg(y,o,x)}k.memoizedState=x;var R={value:x,getSnapshot:o};return k.queue=R,x1(Jg.bind(null,y,R,s),[s]),y.flags|=2048,$o(9,Pd(),Qg.bind(null,y,R,x,o),null),x},useId:function(){var s=Os(),o=Gr.identifierPrefix;if(Cr){var x=pi,y=gi;x=(y&~(1<<32-qt(y)-1)).toString(32)+x,o=""+o+"R"+x,x=Md++,0<x&&(o+="H"+x.toString(32)),o+=""}else x=Q4++,o=""+o+"r"+x.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:yx,useFormState:o1,useActionState:o1,useOptimistic:function(s){var o=Os();o.memoizedState=o.baseState=s;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=x,o=bx.bind(null,cr,!0,x),x.dispatch=o,[s,o]},useMemoCache:dx,useCacheRefresh:function(){return Os().memoizedState=aN.bind(null,cr)}},D1={readContext:ls,use:Bd,useCallback:b1,useContext:ls,useEffect:h1,useImperativeHandle:y1,useInsertionEffect:m1,useLayoutEffect:g1,useMemo:v1,useReducer:Ld,useRef:f1,useState:function(){return Ld(vi)},useDebugValue:mx,useDeferredValue:function(s,o){var x=Ca();return w1(x,Br.memoizedState,s,o)},useTransition:function(){var s=Ld(vi)[0],o=Ca().memoizedState;return[typeof s=="boolean"?s:$c(s),o]},useSyncExternalStore:Kg,useId:C1,useHostTransitionStatus:yx,useFormState:c1,useActionState:c1,useOptimistic:function(s,o){var x=Ca();return r1(x,Br,s,o)},useMemoCache:dx,useCacheRefresh:E1},nN={readContext:ls,use:Bd,useCallback:b1,useContext:ls,useEffect:h1,useImperativeHandle:y1,useInsertionEffect:m1,useLayoutEffect:g1,useMemo:v1,useReducer:fx,useRef:f1,useState:function(){return fx(vi)},useDebugValue:mx,useDeferredValue:function(s,o){var x=Ca();return Br===null?gx(x,s,o):w1(x,Br.memoizedState,s,o)},useTransition:function(){var s=fx(vi)[0],o=Ca().memoizedState;return[typeof s=="boolean"?s:$c(s),o]},useSyncExternalStore:Kg,useId:C1,useHostTransitionStatus:yx,useFormState:u1,useActionState:u1,useOptimistic:function(s,o){var x=Ca();return Br!==null?r1(x,Br,s,o):(x.baseState=s,[s,x.queue.dispatch])},useMemoCache:dx,useCacheRefresh:E1},Yo=null,Kc=0;function Vd(s){var o=Kc;return Kc+=1,Yo===null&&(Yo=[]),Hg(Yo,s,o)}function Zc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Gd(s,o){throw o.$$typeof===j?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function R1(s){var o=s._init;return o(s._payload)}function O1(s){function o(He,Fe){if(s){var $e=He.deletions;$e===null?(He.deletions=[Fe],He.flags|=16):$e.push(Fe)}}function x(He,Fe){if(!s)return null;for(;Fe!==null;)o(He,Fe),Fe=Fe.sibling;return null}function y(He){for(var Fe=new Map;He!==null;)He.key!==null?Fe.set(He.key,He):Fe.set(He.index,He),He=He.sibling;return Fe}function k(He,Fe){return He=mi(He,Fe),He.index=0,He.sibling=null,He}function R(He,Fe,$e){return He.index=$e,s?($e=He.alternate,$e!==null?($e=$e.index,$e<Fe?(He.flags|=67108866,Fe):$e):(He.flags|=67108866,Fe)):(He.flags|=1048576,Fe)}function W(He){return s&&He.alternate===null&&(He.flags|=67108866),He}function he(He,Fe,$e,dt){return Fe===null||Fe.tag!==6?(Fe=zf($e,He.mode,dt),Fe.return=He,Fe):(Fe=k(Fe,$e),Fe.return=He,Fe)}function Te(He,Fe,$e,dt){var _t=$e.type;return _t===T?ct(He,Fe,$e.props.children,dt,$e.key):Fe!==null&&(Fe.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===P&&R1(_t)===Fe.type)?(Fe=k(Fe,$e.props),Zc(Fe,$e),Fe.return=He,Fe):(Fe=Ed($e.type,$e.key,$e.props,null,He.mode,dt),Zc(Fe,$e),Fe.return=He,Fe)}function We(He,Fe,$e,dt){return Fe===null||Fe.tag!==4||Fe.stateNode.containerInfo!==$e.containerInfo||Fe.stateNode.implementation!==$e.implementation?(Fe=Uf($e,He.mode,dt),Fe.return=He,Fe):(Fe=k(Fe,$e.children||[]),Fe.return=He,Fe)}function ct(He,Fe,$e,dt,_t){return Fe===null||Fe.tag!==7?(Fe=Hl($e,He.mode,dt,_t),Fe.return=He,Fe):(Fe=k(Fe,$e),Fe.return=He,Fe)}function xt(He,Fe,$e){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Fe=zf(""+Fe,He.mode,$e),Fe.return=He,Fe;if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case E:return $e=Ed(Fe.type,Fe.key,Fe.props,null,He.mode,$e),Zc($e,Fe),$e.return=He,$e;case _:return Fe=Uf(Fe,He.mode,$e),Fe.return=He,Fe;case P:var dt=Fe._init;return Fe=dt(Fe._payload),xt(He,Fe,$e)}if(G(Fe)||Y(Fe))return Fe=Hl(Fe,He.mode,$e,null),Fe.return=He,Fe;if(typeof Fe.then=="function")return xt(He,Vd(Fe),$e);if(Fe.$$typeof===D)return xt(He,Td(He,Fe),$e);Gd(He,Fe)}return null}function Ze(He,Fe,$e,dt){var _t=Fe!==null?Fe.key:null;if(typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint")return _t!==null?null:he(He,Fe,""+$e,dt);if(typeof $e=="object"&&$e!==null){switch($e.$$typeof){case E:return $e.key===_t?Te(He,Fe,$e,dt):null;case _:return $e.key===_t?We(He,Fe,$e,dt):null;case P:return _t=$e._init,$e=_t($e._payload),Ze(He,Fe,$e,dt)}if(G($e)||Y($e))return _t!==null?null:ct(He,Fe,$e,dt,null);if(typeof $e.then=="function")return Ze(He,Fe,Vd($e),dt);if($e.$$typeof===D)return Ze(He,Fe,Td(He,$e),dt);Gd(He,$e)}return null}function tt(He,Fe,$e,dt,_t){if(typeof dt=="string"&&dt!==""||typeof dt=="number"||typeof dt=="bigint")return He=He.get($e)||null,he(Fe,He,""+dt,_t);if(typeof dt=="object"&&dt!==null){switch(dt.$$typeof){case E:return He=He.get(dt.key===null?$e:dt.key)||null,Te(Fe,He,dt,_t);case _:return He=He.get(dt.key===null?$e:dt.key)||null,We(Fe,He,dt,_t);case P:var dr=dt._init;return dt=dr(dt._payload),tt(He,Fe,$e,dt,_t)}if(G(dt)||Y(dt))return He=He.get($e)||null,ct(Fe,He,dt,_t,null);if(typeof dt.then=="function")return tt(He,Fe,$e,Vd(dt),_t);if(dt.$$typeof===D)return tt(He,Fe,$e,Td(Fe,dt),_t);Gd(Fe,dt)}return null}function Ht(He,Fe,$e,dt){for(var _t=null,dr=null,Ot=Fe,Lt=Fe=0,Va=null;Ot!==null&&Lt<$e.length;Lt++){Ot.index>Lt?(Va=Ot,Ot=null):Va=Ot.sibling;var jr=Ze(He,Ot,$e[Lt],dt);if(jr===null){Ot===null&&(Ot=Va);break}s&&Ot&&jr.alternate===null&&o(He,Ot),Fe=R(jr,Fe,Lt),dr===null?_t=jr:dr.sibling=jr,dr=jr,Ot=Va}if(Lt===$e.length)return x(He,Ot),Cr&&Gl(He,Lt),_t;if(Ot===null){for(;Lt<$e.length;Lt++)Ot=xt(He,$e[Lt],dt),Ot!==null&&(Fe=R(Ot,Fe,Lt),dr===null?_t=Ot:dr.sibling=Ot,dr=Ot);return Cr&&Gl(He,Lt),_t}for(Ot=y(Ot);Lt<$e.length;Lt++)Va=tt(Ot,He,Lt,$e[Lt],dt),Va!==null&&(s&&Va.alternate!==null&&Ot.delete(Va.key===null?Lt:Va.key),Fe=R(Va,Fe,Lt),dr===null?_t=Va:dr.sibling=Va,dr=Va);return s&&Ot.forEach(function(yl){return o(He,yl)}),Cr&&Gl(He,Lt),_t}function Mt(He,Fe,$e,dt){if($e==null)throw Error(i(151));for(var _t=null,dr=null,Ot=Fe,Lt=Fe=0,Va=null,jr=$e.next();Ot!==null&&!jr.done;Lt++,jr=$e.next()){Ot.index>Lt?(Va=Ot,Ot=null):Va=Ot.sibling;var yl=Ze(He,Ot,jr.value,dt);if(yl===null){Ot===null&&(Ot=Va);break}s&&Ot&&yl.alternate===null&&o(He,Ot),Fe=R(yl,Fe,Lt),dr===null?_t=yl:dr.sibling=yl,dr=yl,Ot=Va}if(jr.done)return x(He,Ot),Cr&&Gl(He,Lt),_t;if(Ot===null){for(;!jr.done;Lt++,jr=$e.next())jr=xt(He,jr.value,dt),jr!==null&&(Fe=R(jr,Fe,Lt),dr===null?_t=jr:dr.sibling=jr,dr=jr);return Cr&&Gl(He,Lt),_t}for(Ot=y(Ot);!jr.done;Lt++,jr=$e.next())jr=tt(Ot,He,Lt,jr.value,dt),jr!==null&&(s&&jr.alternate!==null&&Ot.delete(jr.key===null?Lt:jr.key),Fe=R(jr,Fe,Lt),dr===null?_t=jr:dr.sibling=jr,dr=jr);return s&&Ot.forEach(function(ik){return o(He,ik)}),Cr&&Gl(He,Lt),_t}function Pr(He,Fe,$e,dt){if(typeof $e=="object"&&$e!==null&&$e.type===T&&$e.key===null&&($e=$e.props.children),typeof $e=="object"&&$e!==null){switch($e.$$typeof){case E:e:{for(var _t=$e.key;Fe!==null;){if(Fe.key===_t){if(_t=$e.type,_t===T){if(Fe.tag===7){x(He,Fe.sibling),dt=k(Fe,$e.props.children),dt.return=He,He=dt;break e}}else if(Fe.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===P&&R1(_t)===Fe.type){x(He,Fe.sibling),dt=k(Fe,$e.props),Zc(dt,$e),dt.return=He,He=dt;break e}x(He,Fe);break}else o(He,Fe);Fe=Fe.sibling}$e.type===T?(dt=Hl($e.props.children,He.mode,dt,$e.key),dt.return=He,He=dt):(dt=Ed($e.type,$e.key,$e.props,null,He.mode,dt),Zc(dt,$e),dt.return=He,He=dt)}return W(He);case _:e:{for(_t=$e.key;Fe!==null;){if(Fe.key===_t)if(Fe.tag===4&&Fe.stateNode.containerInfo===$e.containerInfo&&Fe.stateNode.implementation===$e.implementation){x(He,Fe.sibling),dt=k(Fe,$e.children||[]),dt.return=He,He=dt;break e}else{x(He,Fe);break}else o(He,Fe);Fe=Fe.sibling}dt=Uf($e,He.mode,dt),dt.return=He,He=dt}return W(He);case P:return _t=$e._init,$e=_t($e._payload),Pr(He,Fe,$e,dt)}if(G($e))return Ht(He,Fe,$e,dt);if(Y($e)){if(_t=Y($e),typeof _t!="function")throw Error(i(150));return $e=_t.call($e),Mt(He,Fe,$e,dt)}if(typeof $e.then=="function")return Pr(He,Fe,Vd($e),dt);if($e.$$typeof===D)return Pr(He,Fe,Td(He,$e),dt);Gd(He,$e)}return typeof $e=="string"&&$e!==""||typeof $e=="number"||typeof $e=="bigint"?($e=""+$e,Fe!==null&&Fe.tag===6?(x(He,Fe.sibling),dt=k(Fe,$e),dt.return=He,He=dt):(x(He,Fe),dt=zf($e,He.mode,dt),dt.return=He,He=dt),W(He)):x(He,Fe)}return function(He,Fe,$e,dt){try{Kc=0;var _t=Pr(He,Fe,$e,dt);return Yo=null,_t}catch(Ot){if(Ot===Uc||Ot===Rd)throw Ot;var dr=Gs(29,Ot,null,He.mode);return dr.lanes=dt,dr.return=He,dr}finally{}}}var Wo=O1(!0),I1=O1(!1),cn=re(null),Wn=null;function al(s){var o=s.alternate;X(Ba,Ba.current&1),X(cn,s),Wn===null&&(o===null||Go.current!==null||o.memoizedState!==null)&&(Wn=s)}function F1(s){if(s.tag===22){if(X(Ba,Ba.current),X(cn,s),Wn===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(Wn=s)}}else sl()}function sl(){X(Ba,Ba.current),X(cn,cn.current)}function wi(s){Q(cn),Wn===s&&(Wn=null),Q(Ba)}var Ba=re(0);function Xd(s){for(var o=s;o!==null;){if(o.tag===13){var x=o.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||ch(x)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function vx(s,o,x,y){o=s.memoizedState,x=x(y,o),x=x==null?o:w({},o,x),s.memoizedState=x,s.lanes===0&&(s.updateQueue.baseState=x)}var wx={enqueueSetState:function(s,o,x){s=s._reactInternals;var y=Ys(),k=el(y);k.payload=o,x!=null&&(k.callback=x),o=tl(s,k,y),o!==null&&(Ws(o,s,y),Vc(o,s,y))},enqueueReplaceState:function(s,o,x){s=s._reactInternals;var y=Ys(),k=el(y);k.tag=1,k.payload=o,x!=null&&(k.callback=x),o=tl(s,k,y),o!==null&&(Ws(o,s,y),Vc(o,s,y))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var x=Ys(),y=el(x);y.tag=2,o!=null&&(y.callback=o),o=tl(s,y,x),o!==null&&(Ws(o,s,x),Vc(o,s,x))}};function M1(s,o,x,y,k,R,W){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,R,W):o.prototype&&o.prototype.isPureReactComponent?!g(x,y)||!g(k,R):!0}function B1(s,o,x,y){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(x,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(x,y),o.state!==s&&wx.enqueueReplaceState(o,o.state,null)}function Zl(s,o){var x=o;if("ref"in o){x={};for(var y in o)y!=="ref"&&(x[y]=o[y])}if(s=s.defaultProps){x===o&&(x=w({},x));for(var k in s)x[k]===void 0&&(x[k]=s[k])}return x}var qd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function L1(s){qd(s)}function P1(s){console.error(s)}function z1(s){qd(s)}function $d(s,o){try{var x=s.onUncaughtError;x(o.value,{componentStack:o.stack})}catch(y){setTimeout(function(){throw y})}}function U1(s,o,x){try{var y=s.onCaughtError;y(x.value,{componentStack:x.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function Nx(s,o,x){return x=el(x),x.tag=3,x.payload={element:null},x.callback=function(){$d(s,o)},x}function H1(s){return s=el(s),s.tag=3,s}function V1(s,o,x,y){var k=x.type.getDerivedStateFromError;if(typeof k=="function"){var R=y.value;s.payload=function(){return k(R)},s.callback=function(){U1(o,x,y)}}var W=x.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(s.callback=function(){U1(o,x,y),typeof k!="function"&&(dl===null?dl=new Set([this]):dl.add(this));var he=y.stack;this.componentDidCatch(y.value,{componentStack:he!==null?he:""})})}function iN(s,o,x,y,k){if(x.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(o=x.alternate,o!==null&&Lc(o,x,k,!0),x=cn.current,x!==null){switch(x.tag){case 13:return Wn===null?qx():x.alternate===null&&da===0&&(da=3),x.flags&=-257,x.flags|=65536,x.lanes=k,y===Zf?x.flags|=16384:(o=x.updateQueue,o===null?x.updateQueue=new Set([y]):o.add(y),Yx(s,y,k)),!1;case 22:return x.flags|=65536,y===Zf?x.flags|=16384:(o=x.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([y])},x.updateQueue=o):(x=o.retryQueue,x===null?o.retryQueue=new Set([y]):x.add(y)),Yx(s,y,k)),!1}throw Error(i(435,x.tag))}return Yx(s,y,k),qx(),!1}if(Cr)return o=cn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=k,y!==Gf&&(s=Error(i(422),{cause:y}),Bc(sn(s,x)))):(y!==Gf&&(o=Error(i(423),{cause:y}),Bc(sn(o,x))),s=s.current.alternate,s.flags|=65536,k&=-k,s.lanes|=k,y=sn(y,x),k=Nx(s.stateNode,y,k),ex(s,k),da!==4&&(da=2)),!1;var R=Error(i(520),{cause:y});if(R=sn(R,x),s0===null?s0=[R]:s0.push(R),da!==4&&(da=2),o===null)return!0;y=sn(y,x),x=o;do{switch(x.tag){case 3:return x.flags|=65536,s=k&-k,x.lanes|=s,s=Nx(x.stateNode,y,s),ex(x,s),!1;case 1:if(o=x.type,R=x.stateNode,(x.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||R!==null&&typeof R.componentDidCatch=="function"&&(dl===null||!dl.has(R))))return x.flags|=65536,k&=-k,x.lanes|=k,k=H1(k),V1(k,s,x,y),ex(x,k),!1}x=x.return}while(x!==null);return!1}var G1=Error(i(461)),Ua=!1;function Ya(s,o,x,y){o.child=s===null?I1(o,null,x,y):Wo(o,s.child,x,y)}function X1(s,o,x,y,k){x=x.render;var R=o.ref;if("ref"in y){var W={};for(var he in y)he!=="ref"&&(W[he]=y[he])}else W=y;return Yl(o),y=nx(s,o,x,W,R,k),he=ix(),s!==null&&!Ua?(lx(s,o,k),Ni(s,o,k)):(Cr&&he&&Hf(o),o.flags|=1,Ya(s,o,y,k),o.child)}function q1(s,o,x,y,k){if(s===null){var R=x.type;return typeof R=="function"&&!Pf(R)&&R.defaultProps===void 0&&x.compare===null?(o.tag=15,o.type=R,$1(s,o,R,y,k)):(s=Ed(x.type,null,y,o,o.mode,k),s.ref=o.ref,s.return=o,o.child=s)}if(R=s.child,!Tx(s,k)){var W=R.memoizedProps;if(x=x.compare,x=x!==null?x:g,x(W,y)&&s.ref===o.ref)return Ni(s,o,k)}return o.flags|=1,s=mi(R,y),s.ref=o.ref,s.return=o,o.child=s}function $1(s,o,x,y,k){if(s!==null){var R=s.memoizedProps;if(g(R,y)&&s.ref===o.ref)if(Ua=!1,o.pendingProps=y=R,Tx(s,k))(s.flags&131072)!==0&&(Ua=!0);else return o.lanes=s.lanes,Ni(s,o,k)}return kx(s,o,x,y,k)}function Y1(s,o,x){var y=o.pendingProps,k=y.children,R=s!==null?s.memoizedState:null;if(y.mode==="hidden"){if((o.flags&128)!==0){if(y=R!==null?R.baseLanes|x:x,s!==null){for(k=o.child=s.child,R=0;k!==null;)R=R|k.lanes|k.childLanes,k=k.sibling;o.childLanes=R&~y}else o.childLanes=0,o.child=null;return W1(s,o,y,x)}if((x&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Dd(o,R!==null?R.cachePool:null),R!==null?$g(o,R):rx(),F1(o);else return o.lanes=o.childLanes=536870912,W1(s,o,R!==null?R.baseLanes|x:x,x)}else R!==null?(Dd(o,R.cachePool),$g(o,R),sl(),o.memoizedState=null):(s!==null&&Dd(o,null),rx(),sl());return Ya(s,o,k,x),o.child}function W1(s,o,x,y){var k=Kf();return k=k===null?null:{parent:Ma._currentValue,pool:k},o.memoizedState={baseLanes:x,cachePool:k},s!==null&&Dd(o,null),rx(),F1(o),s!==null&&Lc(s,o,y,!0),null}function Yd(s,o){var x=o.ref;if(x===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(i(284));(s===null||s.ref!==x)&&(o.flags|=4194816)}}function kx(s,o,x,y,k){return Yl(o),x=nx(s,o,x,y,void 0,k),y=ix(),s!==null&&!Ua?(lx(s,o,k),Ni(s,o,k)):(Cr&&y&&Hf(o),o.flags|=1,Ya(s,o,x,k),o.child)}function K1(s,o,x,y,k,R){return Yl(o),o.updateQueue=null,x=Wg(o,y,x,k),Yg(s),y=ix(),s!==null&&!Ua?(lx(s,o,R),Ni(s,o,R)):(Cr&&y&&Hf(o),o.flags|=1,Ya(s,o,x,R),o.child)}function Z1(s,o,x,y,k){if(Yl(o),o.stateNode===null){var R=Po,W=x.contextType;typeof W=="object"&&W!==null&&(R=ls(W)),R=new x(y,R),o.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,R.updater=wx,o.stateNode=R,R._reactInternals=o,R=o.stateNode,R.props=y,R.state=o.memoizedState,R.refs={},Qf(o),W=x.contextType,R.context=typeof W=="object"&&W!==null?ls(W):Po,R.state=o.memoizedState,W=x.getDerivedStateFromProps,typeof W=="function"&&(vx(o,x,W,y),R.state=o.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(W=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),W!==R.state&&wx.enqueueReplaceState(R,R.state,null),Xc(o,y,R,k),Gc(),R.state=o.memoizedState),typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!0}else if(s===null){R=o.stateNode;var he=o.memoizedProps,Te=Zl(x,he);R.props=Te;var We=R.context,ct=x.contextType;W=Po,typeof ct=="object"&&ct!==null&&(W=ls(ct));var xt=x.getDerivedStateFromProps;ct=typeof xt=="function"||typeof R.getSnapshotBeforeUpdate=="function",he=o.pendingProps!==he,ct||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(he||We!==W)&&B1(o,R,y,W),Ji=!1;var Ze=o.memoizedState;R.state=Ze,Xc(o,y,R,k),Gc(),We=o.memoizedState,he||Ze!==We||Ji?(typeof xt=="function"&&(vx(o,x,xt,y),We=o.memoizedState),(Te=Ji||M1(o,x,Te,y,Ze,We,W))?(ct||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount()),typeof R.componentDidMount=="function"&&(o.flags|=4194308)):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=We),R.props=y,R.state=We,R.context=W,y=Te):(typeof R.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{R=o.stateNode,Jf(s,o),W=o.memoizedProps,ct=Zl(x,W),R.props=ct,xt=o.pendingProps,Ze=R.context,We=x.contextType,Te=Po,typeof We=="object"&&We!==null&&(Te=ls(We)),he=x.getDerivedStateFromProps,(We=typeof he=="function"||typeof R.getSnapshotBeforeUpdate=="function")||typeof R.UNSAFE_componentWillReceiveProps!="function"&&typeof R.componentWillReceiveProps!="function"||(W!==xt||Ze!==Te)&&B1(o,R,y,Te),Ji=!1,Ze=o.memoizedState,R.state=Ze,Xc(o,y,R,k),Gc();var tt=o.memoizedState;W!==xt||Ze!==tt||Ji||s!==null&&s.dependencies!==null&&Sd(s.dependencies)?(typeof he=="function"&&(vx(o,x,he,y),tt=o.memoizedState),(ct=Ji||M1(o,x,ct,y,Ze,tt,Te)||s!==null&&s.dependencies!==null&&Sd(s.dependencies))?(We||typeof R.UNSAFE_componentWillUpdate!="function"&&typeof R.componentWillUpdate!="function"||(typeof R.componentWillUpdate=="function"&&R.componentWillUpdate(y,tt,Te),typeof R.UNSAFE_componentWillUpdate=="function"&&R.UNSAFE_componentWillUpdate(y,tt,Te)),typeof R.componentDidUpdate=="function"&&(o.flags|=4),typeof R.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof R.componentDidUpdate!="function"||W===s.memoizedProps&&Ze===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&Ze===s.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=tt),R.props=y,R.state=tt,R.context=Te,y=ct):(typeof R.componentDidUpdate!="function"||W===s.memoizedProps&&Ze===s.memoizedState||(o.flags|=4),typeof R.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&Ze===s.memoizedState||(o.flags|=1024),y=!1)}return R=y,Yd(s,o),y=(o.flags&128)!==0,R||y?(R=o.stateNode,x=y&&typeof x.getDerivedStateFromError!="function"?null:R.render(),o.flags|=1,s!==null&&y?(o.child=Wo(o,s.child,null,k),o.child=Wo(o,null,x,k)):Ya(s,o,x,k),o.memoizedState=R.state,s=o.child):s=Ni(s,o,k),s}function Q1(s,o,x,y){return Mc(),o.flags|=256,Ya(s,o,x,y),o.child}var jx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Cx(s){return{baseLanes:s,cachePool:Pg()}}function Ex(s,o,x){return s=s!==null?s.childLanes&~x:0,o&&(s|=dn),s}function J1(s,o,x){var y=o.pendingProps,k=!1,R=(o.flags&128)!==0,W;if((W=R)||(W=s!==null&&s.memoizedState===null?!1:(Ba.current&2)!==0),W&&(k=!0,o.flags&=-129),W=(o.flags&32)!==0,o.flags&=-33,s===null){if(Cr){if(k?al(o):sl(),Cr){var he=ca,Te;if(Te=he){e:{for(Te=he,he=Yn;Te.nodeType!==8;){if(!he){he=null;break e}if(Te=jn(Te.nextSibling),Te===null){he=null;break e}}he=Te}he!==null?(o.memoizedState={dehydrated:he,treeContext:Vl!==null?{id:gi,overflow:pi}:null,retryLane:536870912,hydrationErrors:null},Te=Gs(18,null,null,0),Te.stateNode=he,Te.return=o,o.child=Te,ws=o,ca=null,Te=!0):Te=!1}Te||ql(o)}if(he=o.memoizedState,he!==null&&(he=he.dehydrated,he!==null))return ch(he)?o.lanes=32:o.lanes=536870912,null;wi(o)}return he=y.children,y=y.fallback,k?(sl(),k=o.mode,he=Wd({mode:"hidden",children:he},k),y=Hl(y,k,x,null),he.return=o,y.return=o,he.sibling=y,o.child=he,k=o.child,k.memoizedState=Cx(x),k.childLanes=Ex(s,W,x),o.memoizedState=jx,y):(al(o),_x(o,he))}if(Te=s.memoizedState,Te!==null&&(he=Te.dehydrated,he!==null)){if(R)o.flags&256?(al(o),o.flags&=-257,o=Ax(s,o,x)):o.memoizedState!==null?(sl(),o.child=s.child,o.flags|=128,o=null):(sl(),k=y.fallback,he=o.mode,y=Wd({mode:"visible",children:y.children},he),k=Hl(k,he,x,null),k.flags|=2,y.return=o,k.return=o,y.sibling=k,o.child=y,Wo(o,s.child,null,x),y=o.child,y.memoizedState=Cx(x),y.childLanes=Ex(s,W,x),o.memoizedState=jx,o=k);else if(al(o),ch(he)){if(W=he.nextSibling&&he.nextSibling.dataset,W)var We=W.dgst;W=We,y=Error(i(419)),y.stack="",y.digest=W,Bc({value:y,source:null,stack:null}),o=Ax(s,o,x)}else if(Ua||Lc(s,o,x,!1),W=(x&s.childLanes)!==0,Ua||W){if(W=Gr,W!==null&&(y=x&-x,y=(y&42)!==0?1:zs(y),y=(y&(W.suspendedLanes|x))!==0?0:y,y!==0&&y!==Te.retryLane))throw Te.retryLane=y,Lo(s,y),Ws(W,s,y),G1;he.data==="$?"||qx(),o=Ax(s,o,x)}else he.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=Te.treeContext,ca=jn(he.nextSibling),ws=o,Cr=!0,Xl=null,Yn=!1,s!==null&&(ln[on++]=gi,ln[on++]=pi,ln[on++]=Vl,gi=s.id,pi=s.overflow,Vl=o),o=_x(o,y.children),o.flags|=4096);return o}return k?(sl(),k=y.fallback,he=o.mode,Te=s.child,We=Te.sibling,y=mi(Te,{mode:"hidden",children:y.children}),y.subtreeFlags=Te.subtreeFlags&65011712,We!==null?k=mi(We,k):(k=Hl(k,he,x,null),k.flags|=2),k.return=o,y.return=o,y.sibling=k,o.child=y,y=k,k=o.child,he=s.child.memoizedState,he===null?he=Cx(x):(Te=he.cachePool,Te!==null?(We=Ma._currentValue,Te=Te.parent!==We?{parent:We,pool:We}:Te):Te=Pg(),he={baseLanes:he.baseLanes|x,cachePool:Te}),k.memoizedState=he,k.childLanes=Ex(s,W,x),o.memoizedState=jx,y):(al(o),x=s.child,s=x.sibling,x=mi(x,{mode:"visible",children:y.children}),x.return=o,x.sibling=null,s!==null&&(W=o.deletions,W===null?(o.deletions=[s],o.flags|=16):W.push(s)),o.child=x,o.memoizedState=null,x)}function _x(s,o){return o=Wd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Wd(s,o){return s=Gs(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ax(s,o,x){return Wo(o,s.child,null,x),s=_x(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function ep(s,o,x){s.lanes|=o;var y=s.alternate;y!==null&&(y.lanes|=o),qf(s.return,o,x)}function Sx(s,o,x,y,k){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:x,tailMode:k}:(R.isBackwards=o,R.rendering=null,R.renderingStartTime=0,R.last=y,R.tail=x,R.tailMode=k)}function tp(s,o,x){var y=o.pendingProps,k=y.revealOrder,R=y.tail;if(Ya(s,o,y.children,x),y=Ba.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&ep(s,x,o);else if(s.tag===19)ep(s,x,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(X(Ba,y),k){case"forwards":for(x=o.child,k=null;x!==null;)s=x.alternate,s!==null&&Xd(s)===null&&(k=x),x=x.sibling;x=k,x===null?(k=o.child,o.child=null):(k=x.sibling,x.sibling=null),Sx(o,!1,k,x,R);break;case"backwards":for(x=null,k=o.child,o.child=null;k!==null;){if(s=k.alternate,s!==null&&Xd(s)===null){o.child=k;break}s=k.sibling,k.sibling=x,x=k,k=s}Sx(o,!0,x,null,R);break;case"together":Sx(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Ni(s,o,x){if(s!==null&&(o.dependencies=s.dependencies),cl|=o.lanes,(x&o.childLanes)===0)if(s!==null){if(Lc(s,o,x,!1),(x&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,x=mi(s,s.pendingProps),o.child=x,x.return=o;s.sibling!==null;)s=s.sibling,x=x.sibling=mi(s,s.pendingProps),x.return=o;x.sibling=null}return o.child}function Tx(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Sd(s)))}function lN(s,o,x){switch(o.tag){case 3:we(o,o.stateNode.containerInfo),Qi(o,Ma,s.memoizedState.cache),Mc();break;case 27:case 5:Le(o);break;case 4:we(o,o.stateNode.containerInfo);break;case 10:Qi(o,o.type,o.memoizedProps.value);break;case 13:var y=o.memoizedState;if(y!==null)return y.dehydrated!==null?(al(o),o.flags|=128,null):(x&o.child.childLanes)!==0?J1(s,o,x):(al(o),s=Ni(s,o,x),s!==null?s.sibling:null);al(o);break;case 19:var k=(s.flags&128)!==0;if(y=(x&o.childLanes)!==0,y||(Lc(s,o,x,!1),y=(x&o.childLanes)!==0),k){if(y)return tp(s,o,x);o.flags|=128}if(k=o.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),X(Ba,Ba.current),y)break;return null;case 22:case 23:return o.lanes=0,Y1(s,o,x);case 24:Qi(o,Ma,s.memoizedState.cache)}return Ni(s,o,x)}function rp(s,o,x){if(s!==null)if(s.memoizedProps!==o.pendingProps)Ua=!0;else{if(!Tx(s,x)&&(o.flags&128)===0)return Ua=!1,lN(s,o,x);Ua=(s.flags&131072)!==0}else Ua=!1,Cr&&(o.flags&1048576)!==0&&Rg(o,Ad,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var y=o.elementType,k=y._init;if(y=k(y._payload),o.type=y,typeof y=="function")Pf(y)?(s=Zl(y,s),o.tag=1,o=Z1(null,o,y,s,x)):(o.tag=0,o=kx(null,o,y,s,x));else{if(y!=null){if(k=y.$$typeof,k===B){o.tag=11,o=X1(null,o,y,s,x);break e}else if(k===L){o.tag=14,o=q1(null,o,y,s,x);break e}}throw o=de(y)||y,Error(i(306,o,""))}}return o;case 0:return kx(s,o,o.type,o.pendingProps,x);case 1:return y=o.type,k=Zl(y,o.pendingProps),Z1(s,o,y,k,x);case 3:e:{if(we(o,o.stateNode.containerInfo),s===null)throw Error(i(387));y=o.pendingProps;var R=o.memoizedState;k=R.element,Jf(s,o),Xc(o,y,null,x);var W=o.memoizedState;if(y=W.cache,Qi(o,Ma,y),y!==R.cache&&$f(o,[Ma],x,!0),Gc(),y=W.element,R.isDehydrated)if(R={element:y,isDehydrated:!1,cache:W.cache},o.updateQueue.baseState=R,o.memoizedState=R,o.flags&256){o=Q1(s,o,y,x);break e}else if(y!==k){k=sn(Error(i(424)),o),Bc(k),o=Q1(s,o,y,x);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ca=jn(s.firstChild),ws=o,Cr=!0,Xl=null,Yn=!0,x=I1(o,null,y,x),o.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Mc(),y===k){o=Ni(s,o,x);break e}Ya(s,o,y,x)}o=o.child}return o;case 26:return Yd(s,o),s===null?(x=iy(o.type,null,o.pendingProps,null))?o.memoizedState=x:Cr||(x=o.type,s=o.pendingProps,y=cu(K.current).createElement(x),y[la]=o,y[At]=s,Ka(y,x,s),Ue(y),o.stateNode=y):o.memoizedState=iy(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Le(o),s===null&&Cr&&(y=o.stateNode=ay(o.type,o.pendingProps,K.current),ws=o,Yn=!0,k=ca,xl(o.type)?(dh=k,ca=jn(y.firstChild)):ca=k),Ya(s,o,o.pendingProps.children,x),Yd(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Cr&&((k=y=ca)&&(y=FN(y,o.type,o.pendingProps,Yn),y!==null?(o.stateNode=y,ws=o,ca=jn(y.firstChild),Yn=!1,k=!0):k=!1),k||ql(o)),Le(o),k=o.type,R=o.pendingProps,W=s!==null?s.memoizedProps:null,y=R.children,ih(k,R)?y=null:W!==null&&ih(k,W)&&(o.flags|=32),o.memoizedState!==null&&(k=nx(s,o,J4,null,null,x),x0._currentValue=k),Yd(s,o),Ya(s,o,y,x),o.child;case 6:return s===null&&Cr&&((s=x=ca)&&(x=MN(x,o.pendingProps,Yn),x!==null?(o.stateNode=x,ws=o,ca=null,s=!0):s=!1),s||ql(o)),null;case 13:return J1(s,o,x);case 4:return we(o,o.stateNode.containerInfo),y=o.pendingProps,s===null?o.child=Wo(o,null,y,x):Ya(s,o,y,x),o.child;case 11:return X1(s,o,o.type,o.pendingProps,x);case 7:return Ya(s,o,o.pendingProps,x),o.child;case 8:return Ya(s,o,o.pendingProps.children,x),o.child;case 12:return Ya(s,o,o.pendingProps.children,x),o.child;case 10:return y=o.pendingProps,Qi(o,o.type,y.value),Ya(s,o,y.children,x),o.child;case 9:return k=o.type._context,y=o.pendingProps.children,Yl(o),k=ls(k),y=y(k),o.flags|=1,Ya(s,o,y,x),o.child;case 14:return q1(s,o,o.type,o.pendingProps,x);case 15:return $1(s,o,o.type,o.pendingProps,x);case 19:return tp(s,o,x);case 31:return y=o.pendingProps,x=o.mode,y={mode:y.mode,children:y.children},s===null?(x=Wd(y,x),x.ref=o.ref,o.child=x,x.return=o,o=x):(x=mi(s.child,y),x.ref=o.ref,o.child=x,x.return=o,o=x),o;case 22:return Y1(s,o,x);case 24:return Yl(o),y=ls(Ma),s===null?(k=Kf(),k===null&&(k=Gr,R=Yf(),k.pooledCache=R,R.refCount++,R!==null&&(k.pooledCacheLanes|=x),k=R),o.memoizedState={parent:y,cache:k},Qf(o),Qi(o,Ma,k)):((s.lanes&x)!==0&&(Jf(s,o),Xc(o,null,null,x),Gc()),k=s.memoizedState,R=o.memoizedState,k.parent!==y?(k={parent:y,cache:y},o.memoizedState=k,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=k),Qi(o,Ma,y)):(y=R.cache,Qi(o,Ma,y),y!==k.cache&&$f(o,[Ma],x,!0))),Ya(s,o,o.pendingProps.children,x),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ki(s){s.flags|=4}function ap(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!uy(o)){if(o=cn.current,o!==null&&((pr&4194048)===pr?Wn!==null:(pr&62914560)!==pr&&(pr&536870912)===0||o!==Wn))throw Hc=Zf,zg;s.flags|=8192}}function Kd(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Dt():536870912,s.lanes|=o,Jo|=o)}function Qc(s,o){if(!Cr)switch(s.tailMode){case"hidden":o=s.tail;for(var x=null;o!==null;)o.alternate!==null&&(x=o),o=o.sibling;x===null?s.tail=null:x.sibling=null;break;case"collapsed":x=s.tail;for(var y=null;x!==null;)x.alternate!==null&&(y=x),x=x.sibling;y===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function sa(s){var o=s.alternate!==null&&s.alternate.child===s.child,x=0,y=0;if(o)for(var k=s.child;k!==null;)x|=k.lanes|k.childLanes,y|=k.subtreeFlags&65011712,y|=k.flags&65011712,k.return=s,k=k.sibling;else for(k=s.child;k!==null;)x|=k.lanes|k.childLanes,y|=k.subtreeFlags,y|=k.flags,k.return=s,k=k.sibling;return s.subtreeFlags|=y,s.childLanes=x,o}function oN(s,o,x){var y=o.pendingProps;switch(Vf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sa(o),null;case 1:return sa(o),null;case 3:return x=o.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),o.memoizedState.cache!==y&&(o.flags|=2048),bi(Ma),Ve(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(s===null||s.child===null)&&(Fc(o)?ki(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Fg())),sa(o),null;case 26:return x=o.memoizedState,s===null?(ki(o),x!==null?(sa(o),ap(o,x)):(sa(o),o.flags&=-16777217)):x?x!==s.memoizedState?(ki(o),sa(o),ap(o,x)):(sa(o),o.flags&=-16777217):(s.memoizedProps!==y&&ki(o),sa(o),o.flags&=-16777217),null;case 27:ot(o),x=K.current;var k=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==y&&ki(o);else{if(!y){if(o.stateNode===null)throw Error(i(166));return sa(o),null}s=se.current,Fc(o)?Og(o):(s=ay(k,y,x),o.stateNode=s,ki(o))}return sa(o),null;case 5:if(ot(o),x=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==y&&ki(o);else{if(!y){if(o.stateNode===null)throw Error(i(166));return sa(o),null}if(s=se.current,Fc(o))Og(o);else{switch(k=cu(K.current),s){case 1:s=k.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:s=k.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":s=k.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":s=k.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof y.is=="string"?k.createElement("select",{is:y.is}):k.createElement("select"),y.multiple?s.multiple=!0:y.size&&(s.size=y.size);break;default:s=typeof y.is=="string"?k.createElement(x,{is:y.is}):k.createElement(x)}}s[la]=o,s[At]=y;e:for(k=o.child;k!==null;){if(k.tag===5||k.tag===6)s.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===o)break e;for(;k.sibling===null;){if(k.return===null||k.return===o)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}o.stateNode=s;e:switch(Ka(s,x,y),x){case"button":case"input":case"select":case"textarea":s=!!y.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&ki(o)}}return sa(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==y&&ki(o);else{if(typeof y!="string"&&o.stateNode===null)throw Error(i(166));if(s=K.current,Fc(o)){if(s=o.stateNode,x=o.memoizedProps,y=null,k=ws,k!==null)switch(k.tag){case 27:case 5:y=k.memoizedProps}s[la]=o,s=!!(s.nodeValue===x||y!==null&&y.suppressHydrationWarning===!0||Kp(s.nodeValue,x)),s||ql(o)}else s=cu(s).createTextNode(y),s[la]=o,o.stateNode=s}return sa(o),null;case 13:if(y=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(k=Fc(o),y!==null&&y.dehydrated!==null){if(s===null){if(!k)throw Error(i(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(i(317));k[la]=o}else Mc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;sa(o),k=!1}else k=Fg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=k),k=!0;if(!k)return o.flags&256?(wi(o),o):(wi(o),null)}if(wi(o),(o.flags&128)!==0)return o.lanes=x,o;if(x=y!==null,s=s!==null&&s.memoizedState!==null,x){y=o.child,k=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(k=y.alternate.memoizedState.cachePool.pool);var R=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(R=y.memoizedState.cachePool.pool),R!==k&&(y.flags|=2048)}return x!==s&&x&&(o.child.flags|=8192),Kd(o,o.updateQueue),sa(o),null;case 4:return Ve(),s===null&&th(o.stateNode.containerInfo),sa(o),null;case 10:return bi(o.type),sa(o),null;case 19:if(Q(Ba),k=o.memoizedState,k===null)return sa(o),null;if(y=(o.flags&128)!==0,R=k.rendering,R===null)if(y)Qc(k,!1);else{if(da!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(R=Xd(s),R!==null){for(o.flags|=128,Qc(k,!1),s=R.updateQueue,o.updateQueue=s,Kd(o,s),o.subtreeFlags=0,s=x,x=o.child;x!==null;)Dg(x,s),x=x.sibling;return X(Ba,Ba.current&1|2),o.child}s=s.sibling}k.tail!==null&&_e()>Jd&&(o.flags|=128,y=!0,Qc(k,!1),o.lanes=4194304)}else{if(!y)if(s=Xd(R),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Kd(o,s),Qc(k,!0),k.tail===null&&k.tailMode==="hidden"&&!R.alternate&&!Cr)return sa(o),null}else 2*_e()-k.renderingStartTime>Jd&&x!==536870912&&(o.flags|=128,y=!0,Qc(k,!1),o.lanes=4194304);k.isBackwards?(R.sibling=o.child,o.child=R):(s=k.last,s!==null?s.sibling=R:o.child=R,k.last=R)}return k.tail!==null?(o=k.tail,k.rendering=o,k.tail=o.sibling,k.renderingStartTime=_e(),o.sibling=null,s=Ba.current,X(Ba,y?s&1|2:s&1),o):(sa(o),null);case 22:case 23:return wi(o),ax(),y=o.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(o.flags|=8192):y&&(o.flags|=8192),y?(x&536870912)!==0&&(o.flags&128)===0&&(sa(o),o.subtreeFlags&6&&(o.flags|=8192)):sa(o),x=o.updateQueue,x!==null&&Kd(o,x.retryQueue),x=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),y=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),y!==x&&(o.flags|=2048),s!==null&&Q(Wl),null;case 24:return x=null,s!==null&&(x=s.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),bi(Ma),sa(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function cN(s,o){switch(Vf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return bi(Ma),Ve(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return ot(o),null;case 13:if(wi(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Mc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Q(Ba),null;case 4:return Ve(),null;case 10:return bi(o.type),null;case 22:case 23:return wi(o),ax(),s!==null&&Q(Wl),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return bi(Ma),null;case 25:return null;default:return null}}function sp(s,o){switch(Vf(o),o.tag){case 3:bi(Ma),Ve();break;case 26:case 27:case 5:ot(o);break;case 4:Ve();break;case 13:wi(o);break;case 19:Q(Ba);break;case 10:bi(o.type);break;case 22:case 23:wi(o),ax(),s!==null&&Q(Wl);break;case 24:bi(Ma)}}function Jc(s,o){try{var x=o.updateQueue,y=x!==null?x.lastEffect:null;if(y!==null){var k=y.next;x=k;do{if((x.tag&s)===s){y=void 0;var R=x.create,W=x.inst;y=R(),W.destroy=y}x=x.next}while(x!==k)}}catch(he){Hr(o,o.return,he)}}function nl(s,o,x){try{var y=o.updateQueue,k=y!==null?y.lastEffect:null;if(k!==null){var R=k.next;y=R;do{if((y.tag&s)===s){var W=y.inst,he=W.destroy;if(he!==void 0){W.destroy=void 0,k=o;var Te=x,We=he;try{We()}catch(ct){Hr(k,Te,ct)}}}y=y.next}while(y!==R)}}catch(ct){Hr(o,o.return,ct)}}function np(s){var o=s.updateQueue;if(o!==null){var x=s.stateNode;try{qg(o,x)}catch(y){Hr(s,s.return,y)}}}function ip(s,o,x){x.props=Zl(s.type,s.memoizedProps),x.state=s.memoizedState;try{x.componentWillUnmount()}catch(y){Hr(s,o,y)}}function e0(s,o){try{var x=s.ref;if(x!==null){switch(s.tag){case 26:case 27:case 5:var y=s.stateNode;break;case 30:y=s.stateNode;break;default:y=s.stateNode}typeof x=="function"?s.refCleanup=x(y):x.current=y}}catch(k){Hr(s,o,k)}}function Kn(s,o){var x=s.ref,y=s.refCleanup;if(x!==null)if(typeof y=="function")try{y()}catch(k){Hr(s,o,k)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(k){Hr(s,o,k)}else x.current=null}function lp(s){var o=s.type,x=s.memoizedProps,y=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":x.autoFocus&&y.focus();break e;case"img":x.src?y.src=x.src:x.srcSet&&(y.srcset=x.srcSet)}}catch(k){Hr(s,s.return,k)}}function Dx(s,o,x){try{var y=s.stateNode;TN(y,s.type,x,o),y[At]=o}catch(k){Hr(s,s.return,k)}}function op(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&xl(s.type)||s.tag===4}function Rx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||op(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&xl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ox(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(s,o):(o=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,o.appendChild(s),x=x._reactRootContainer,x!=null||o.onclick!==null||(o.onclick=ou));else if(y!==4&&(y===27&&xl(s.type)&&(x=s.stateNode,o=null),s=s.child,s!==null))for(Ox(s,o,x),s=s.sibling;s!==null;)Ox(s,o,x),s=s.sibling}function Zd(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?x.insertBefore(s,o):x.appendChild(s);else if(y!==4&&(y===27&&xl(s.type)&&(x=s.stateNode),s=s.child,s!==null))for(Zd(s,o,x),s=s.sibling;s!==null;)Zd(s,o,x),s=s.sibling}function cp(s){var o=s.stateNode,x=s.memoizedProps;try{for(var y=s.type,k=o.attributes;k.length;)o.removeAttributeNode(k[0]);Ka(o,y,x),o[la]=s,o[At]=x}catch(R){Hr(s,s.return,R)}}var ji=!1,va=!1,Ix=!1,dp=typeof WeakSet=="function"?WeakSet:Set,Ha=null;function dN(s,o){if(s=s.containerInfo,sh=mu,s=F(s),V(s)){if("selectionStart"in s)var x={start:s.selectionStart,end:s.selectionEnd};else e:{x=(x=s.ownerDocument)&&x.defaultView||window;var y=x.getSelection&&x.getSelection();if(y&&y.rangeCount!==0){x=y.anchorNode;var k=y.anchorOffset,R=y.focusNode;y=y.focusOffset;try{x.nodeType,R.nodeType}catch{x=null;break e}var W=0,he=-1,Te=-1,We=0,ct=0,xt=s,Ze=null;t:for(;;){for(var tt;xt!==x||k!==0&&xt.nodeType!==3||(he=W+k),xt!==R||y!==0&&xt.nodeType!==3||(Te=W+y),xt.nodeType===3&&(W+=xt.nodeValue.length),(tt=xt.firstChild)!==null;)Ze=xt,xt=tt;for(;;){if(xt===s)break t;if(Ze===x&&++We===k&&(he=W),Ze===R&&++ct===y&&(Te=W),(tt=xt.nextSibling)!==null)break;xt=Ze,Ze=xt.parentNode}xt=tt}x=he===-1||Te===-1?null:{start:he,end:Te}}else x=null}x=x||{start:0,end:0}}else x=null;for(nh={focusedElem:s,selectionRange:x},mu=!1,Ha=o;Ha!==null;)if(o=Ha,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Ha=s;else for(;Ha!==null;){switch(o=Ha,R=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&R!==null){s=void 0,x=o,k=R.memoizedProps,R=R.memoizedState,y=x.stateNode;try{var Ht=Zl(x.type,k,x.elementType===x.type);s=y.getSnapshotBeforeUpdate(Ht,R),y.__reactInternalSnapshotBeforeUpdate=s}catch(Mt){Hr(x,x.return,Mt)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,x=s.nodeType,x===9)oh(s);else if(x===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":oh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Ha=s;break}Ha=o.return}}function up(s,o,x){var y=x.flags;switch(x.tag){case 0:case 11:case 15:il(s,x),y&4&&Jc(5,x);break;case 1:if(il(s,x),y&4)if(s=x.stateNode,o===null)try{s.componentDidMount()}catch(W){Hr(x,x.return,W)}else{var k=Zl(x.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(k,o,s.__reactInternalSnapshotBeforeUpdate)}catch(W){Hr(x,x.return,W)}}y&64&&np(x),y&512&&e0(x,x.return);break;case 3:if(il(s,x),y&64&&(s=x.updateQueue,s!==null)){if(o=null,x.child!==null)switch(x.child.tag){case 27:case 5:o=x.child.stateNode;break;case 1:o=x.child.stateNode}try{qg(s,o)}catch(W){Hr(x,x.return,W)}}break;case 27:o===null&&y&4&&cp(x);case 26:case 5:il(s,x),o===null&&y&4&&lp(x),y&512&&e0(x,x.return);break;case 12:il(s,x);break;case 13:il(s,x),y&4&&hp(s,x),y&64&&(s=x.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(x=bN.bind(null,x),BN(s,x))));break;case 22:if(y=x.memoizedState!==null||ji,!y){o=o!==null&&o.memoizedState!==null||va,k=ji;var R=va;ji=y,(va=o)&&!R?ll(s,x,(x.subtreeFlags&8772)!==0):il(s,x),ji=k,va=R}break;case 30:break;default:il(s,x)}}function fp(s){var o=s.alternate;o!==null&&(s.alternate=null,fp(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&ye(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Jr=null,Is=!1;function Ci(s,o,x){for(x=x.child;x!==null;)xp(s,o,x),x=x.sibling}function xp(s,o,x){if(Nr&&typeof Nr.onCommitFiberUnmount=="function")try{Nr.onCommitFiberUnmount(St,x)}catch{}switch(x.tag){case 26:va||Kn(x,o),Ci(s,o,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:va||Kn(x,o);var y=Jr,k=Is;xl(x.type)&&(Jr=x.stateNode,Is=!1),Ci(s,o,x),c0(x.stateNode),Jr=y,Is=k;break;case 5:va||Kn(x,o);case 6:if(y=Jr,k=Is,Jr=null,Ci(s,o,x),Jr=y,Is=k,Jr!==null)if(Is)try{(Jr.nodeType===9?Jr.body:Jr.nodeName==="HTML"?Jr.ownerDocument.body:Jr).removeChild(x.stateNode)}catch(R){Hr(x,o,R)}else try{Jr.removeChild(x.stateNode)}catch(R){Hr(x,o,R)}break;case 18:Jr!==null&&(Is?(s=Jr,ty(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,x.stateNode),p0(s)):ty(Jr,x.stateNode));break;case 4:y=Jr,k=Is,Jr=x.stateNode.containerInfo,Is=!0,Ci(s,o,x),Jr=y,Is=k;break;case 0:case 11:case 14:case 15:va||nl(2,x,o),va||nl(4,x,o),Ci(s,o,x);break;case 1:va||(Kn(x,o),y=x.stateNode,typeof y.componentWillUnmount=="function"&&ip(x,o,y)),Ci(s,o,x);break;case 21:Ci(s,o,x);break;case 22:va=(y=va)||x.memoizedState!==null,Ci(s,o,x),va=y;break;default:Ci(s,o,x)}}function hp(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{p0(s)}catch(x){Hr(o,o.return,x)}}function uN(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new dp),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new dp),o;default:throw Error(i(435,s.tag))}}function Fx(s,o){var x=uN(s);o.forEach(function(y){var k=vN.bind(null,s,y);x.has(y)||(x.add(y),y.then(k,k))})}function Xs(s,o){var x=o.deletions;if(x!==null)for(var y=0;y<x.length;y++){var k=x[y],R=s,W=o,he=W;e:for(;he!==null;){switch(he.tag){case 27:if(xl(he.type)){Jr=he.stateNode,Is=!1;break e}break;case 5:Jr=he.stateNode,Is=!1;break e;case 3:case 4:Jr=he.stateNode.containerInfo,Is=!0;break e}he=he.return}if(Jr===null)throw Error(i(160));xp(R,W,k),Jr=null,Is=!1,R=k.alternate,R!==null&&(R.return=null),k.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)mp(o,s),o=o.sibling}var kn=null;function mp(s,o){var x=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Xs(o,s),qs(s),y&4&&(nl(3,s,s.return),Jc(3,s),nl(5,s,s.return));break;case 1:Xs(o,s),qs(s),y&512&&(va||x===null||Kn(x,x.return)),y&64&&ji&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(x=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=x===null?y:x.concat(y))));break;case 26:var k=kn;if(Xs(o,s),qs(s),y&512&&(va||x===null||Kn(x,x.return)),y&4){var R=x!==null?x.memoizedState:null;if(y=s.memoizedState,x===null)if(y===null)if(s.stateNode===null){e:{y=s.type,x=s.memoizedProps,k=k.ownerDocument||k;t:switch(y){case"title":R=k.getElementsByTagName("title")[0],(!R||R[ge]||R[la]||R.namespaceURI==="http://www.w3.org/2000/svg"||R.hasAttribute("itemprop"))&&(R=k.createElement(y),k.head.insertBefore(R,k.querySelector("head > title"))),Ka(R,y,x),R[la]=s,Ue(R),y=R;break e;case"link":var W=cy("link","href",k).get(y+(x.href||""));if(W){for(var he=0;he<W.length;he++)if(R=W[he],R.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&R.getAttribute("rel")===(x.rel==null?null:x.rel)&&R.getAttribute("title")===(x.title==null?null:x.title)&&R.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){W.splice(he,1);break t}}R=k.createElement(y),Ka(R,y,x),k.head.appendChild(R);break;case"meta":if(W=cy("meta","content",k).get(y+(x.content||""))){for(he=0;he<W.length;he++)if(R=W[he],R.getAttribute("content")===(x.content==null?null:""+x.content)&&R.getAttribute("name")===(x.name==null?null:x.name)&&R.getAttribute("property")===(x.property==null?null:x.property)&&R.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&R.getAttribute("charset")===(x.charSet==null?null:x.charSet)){W.splice(he,1);break t}}R=k.createElement(y),Ka(R,y,x),k.head.appendChild(R);break;default:throw Error(i(468,y))}R[la]=s,Ue(R),y=R}s.stateNode=y}else dy(k,s.type,s.stateNode);else s.stateNode=oy(k,y,s.memoizedProps);else R!==y?(R===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):R.count--,y===null?dy(k,s.type,s.stateNode):oy(k,y,s.memoizedProps)):y===null&&s.stateNode!==null&&Dx(s,s.memoizedProps,x.memoizedProps)}break;case 27:Xs(o,s),qs(s),y&512&&(va||x===null||Kn(x,x.return)),x!==null&&y&4&&Dx(s,s.memoizedProps,x.memoizedProps);break;case 5:if(Xs(o,s),qs(s),y&512&&(va||x===null||Kn(x,x.return)),s.flags&32){k=s.stateNode;try{Oa(k,"")}catch(tt){Hr(s,s.return,tt)}}y&4&&s.stateNode!=null&&(k=s.memoizedProps,Dx(s,k,x!==null?x.memoizedProps:k)),y&1024&&(Ix=!0);break;case 6:if(Xs(o,s),qs(s),y&4){if(s.stateNode===null)throw Error(i(162));y=s.memoizedProps,x=s.stateNode;try{x.nodeValue=y}catch(tt){Hr(s,s.return,tt)}}break;case 3:if(fu=null,k=kn,kn=du(o.containerInfo),Xs(o,s),kn=k,qs(s),y&4&&x!==null&&x.memoizedState.isDehydrated)try{p0(o.containerInfo)}catch(tt){Hr(s,s.return,tt)}Ix&&(Ix=!1,gp(s));break;case 4:y=kn,kn=du(s.stateNode.containerInfo),Xs(o,s),qs(s),kn=y;break;case 12:Xs(o,s),qs(s);break;case 13:Xs(o,s),qs(s),s.child.flags&8192&&s.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Ux=_e()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Fx(s,y)));break;case 22:k=s.memoizedState!==null;var Te=x!==null&&x.memoizedState!==null,We=ji,ct=va;if(ji=We||k,va=ct||Te,Xs(o,s),va=ct,ji=We,qs(s),y&8192)e:for(o=s.stateNode,o._visibility=k?o._visibility&-2:o._visibility|1,k&&(x===null||Te||ji||va||Ql(s)),x=null,o=s;;){if(o.tag===5||o.tag===26){if(x===null){Te=x=o;try{if(R=Te.stateNode,k)W=R.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{he=Te.stateNode;var xt=Te.memoizedProps.style,Ze=xt!=null&&xt.hasOwnProperty("display")?xt.display:null;he.style.display=Ze==null||typeof Ze=="boolean"?"":(""+Ze).trim()}}catch(tt){Hr(Te,Te.return,tt)}}}else if(o.tag===6){if(x===null){Te=o;try{Te.stateNode.nodeValue=k?"":Te.memoizedProps}catch(tt){Hr(Te,Te.return,tt)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;x===o&&(x=null),o=o.return}x===o&&(x=null),o.sibling.return=o.return,o=o.sibling}y&4&&(y=s.updateQueue,y!==null&&(x=y.retryQueue,x!==null&&(y.retryQueue=null,Fx(s,x))));break;case 19:Xs(o,s),qs(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Fx(s,y)));break;case 30:break;case 21:break;default:Xs(o,s),qs(s)}}function qs(s){var o=s.flags;if(o&2){try{for(var x,y=s.return;y!==null;){if(op(y)){x=y;break}y=y.return}if(x==null)throw Error(i(160));switch(x.tag){case 27:var k=x.stateNode,R=Rx(s);Zd(s,R,k);break;case 5:var W=x.stateNode;x.flags&32&&(Oa(W,""),x.flags&=-33);var he=Rx(s);Zd(s,he,W);break;case 3:case 4:var Te=x.stateNode.containerInfo,We=Rx(s);Ox(s,We,Te);break;default:throw Error(i(161))}}catch(ct){Hr(s,s.return,ct)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function gp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;gp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function il(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)up(s,o.alternate,o),o=o.sibling}function Ql(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:nl(4,o,o.return),Ql(o);break;case 1:Kn(o,o.return);var x=o.stateNode;typeof x.componentWillUnmount=="function"&&ip(o,o.return,x),Ql(o);break;case 27:c0(o.stateNode);case 26:case 5:Kn(o,o.return),Ql(o);break;case 22:o.memoizedState===null&&Ql(o);break;case 30:Ql(o);break;default:Ql(o)}s=s.sibling}}function ll(s,o,x){for(x=x&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var y=o.alternate,k=s,R=o,W=R.flags;switch(R.tag){case 0:case 11:case 15:ll(k,R,x),Jc(4,R);break;case 1:if(ll(k,R,x),y=R,k=y.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(We){Hr(y,y.return,We)}if(y=R,k=y.updateQueue,k!==null){var he=y.stateNode;try{var Te=k.shared.hiddenCallbacks;if(Te!==null)for(k.shared.hiddenCallbacks=null,k=0;k<Te.length;k++)Xg(Te[k],he)}catch(We){Hr(y,y.return,We)}}x&&W&64&&np(R),e0(R,R.return);break;case 27:cp(R);case 26:case 5:ll(k,R,x),x&&y===null&&W&4&&lp(R),e0(R,R.return);break;case 12:ll(k,R,x);break;case 13:ll(k,R,x),x&&W&4&&hp(k,R);break;case 22:R.memoizedState===null&&ll(k,R,x),e0(R,R.return);break;case 30:break;default:ll(k,R,x)}o=o.sibling}}function Mx(s,o){var x=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==x&&(s!=null&&s.refCount++,x!=null&&Pc(x))}function Bx(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Pc(s))}function Zn(s,o,x,y){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)pp(s,o,x,y),o=o.sibling}function pp(s,o,x,y){var k=o.flags;switch(o.tag){case 0:case 11:case 15:Zn(s,o,x,y),k&2048&&Jc(9,o);break;case 1:Zn(s,o,x,y);break;case 3:Zn(s,o,x,y),k&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Pc(s)));break;case 12:if(k&2048){Zn(s,o,x,y),s=o.stateNode;try{var R=o.memoizedProps,W=R.id,he=R.onPostCommit;typeof he=="function"&&he(W,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Te){Hr(o,o.return,Te)}}else Zn(s,o,x,y);break;case 13:Zn(s,o,x,y);break;case 23:break;case 22:R=o.stateNode,W=o.alternate,o.memoizedState!==null?R._visibility&2?Zn(s,o,x,y):t0(s,o):R._visibility&2?Zn(s,o,x,y):(R._visibility|=2,Ko(s,o,x,y,(o.subtreeFlags&10256)!==0)),k&2048&&Mx(W,o);break;case 24:Zn(s,o,x,y),k&2048&&Bx(o.alternate,o);break;default:Zn(s,o,x,y)}}function Ko(s,o,x,y,k){for(k=k&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var R=s,W=o,he=x,Te=y,We=W.flags;switch(W.tag){case 0:case 11:case 15:Ko(R,W,he,Te,k),Jc(8,W);break;case 23:break;case 22:var ct=W.stateNode;W.memoizedState!==null?ct._visibility&2?Ko(R,W,he,Te,k):t0(R,W):(ct._visibility|=2,Ko(R,W,he,Te,k)),k&&We&2048&&Mx(W.alternate,W);break;case 24:Ko(R,W,he,Te,k),k&&We&2048&&Bx(W.alternate,W);break;default:Ko(R,W,he,Te,k)}o=o.sibling}}function t0(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var x=s,y=o,k=y.flags;switch(y.tag){case 22:t0(x,y),k&2048&&Mx(y.alternate,y);break;case 24:t0(x,y),k&2048&&Bx(y.alternate,y);break;default:t0(x,y)}o=o.sibling}}var r0=8192;function Zo(s){if(s.subtreeFlags&r0)for(s=s.child;s!==null;)yp(s),s=s.sibling}function yp(s){switch(s.tag){case 26:Zo(s),s.flags&r0&&s.memoizedState!==null&&KN(kn,s.memoizedState,s.memoizedProps);break;case 5:Zo(s);break;case 3:case 4:var o=kn;kn=du(s.stateNode.containerInfo),Zo(s),kn=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=r0,r0=16777216,Zo(s),r0=o):Zo(s));break;default:Zo(s)}}function bp(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function a0(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Ha=y,wp(y,s)}bp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)vp(s),s=s.sibling}function vp(s){switch(s.tag){case 0:case 11:case 15:a0(s),s.flags&2048&&nl(9,s,s.return);break;case 3:a0(s);break;case 12:a0(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Qd(s)):a0(s);break;default:a0(s)}}function Qd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Ha=y,wp(y,s)}bp(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:nl(8,o,o.return),Qd(o);break;case 22:x=o.stateNode,x._visibility&2&&(x._visibility&=-3,Qd(o));break;default:Qd(o)}s=s.sibling}}function wp(s,o){for(;Ha!==null;){var x=Ha;switch(x.tag){case 0:case 11:case 15:nl(8,x,o);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var y=x.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Pc(x.memoizedState.cache)}if(y=x.child,y!==null)y.return=x,Ha=y;else e:for(x=s;Ha!==null;){y=Ha;var k=y.sibling,R=y.return;if(fp(y),y===x){Ha=null;break e}if(k!==null){k.return=R,Ha=k;break e}Ha=R}}}var fN={getCacheForType:function(s){var o=ls(Ma),x=o.data.get(s);return x===void 0&&(x=s(),o.data.set(s,x)),x}},xN=typeof WeakMap=="function"?WeakMap:Map,Or=0,Gr=null,ur=null,pr=0,Ir=0,$s=null,ol=!1,Qo=!1,Lx=!1,Ei=0,da=0,cl=0,Jl=0,Px=0,dn=0,Jo=0,s0=null,Fs=null,zx=!1,Ux=0,Jd=1/0,eu=null,dl=null,Wa=0,ul=null,ec=null,tc=0,Hx=0,Vx=null,Np=null,n0=0,Gx=null;function Ys(){if((Or&2)!==0&&pr!==0)return pr&-pr;if(q.T!==null){var s=Ho;return s!==0?s:Zx()}return ps()}function kp(){dn===0&&(dn=(pr&536870912)===0||Cr?Vr():536870912);var s=cn.current;return s!==null&&(s.flags|=32),dn}function Ws(s,o,x){(s===Gr&&(Ir===2||Ir===9)||s.cancelPendingCommit!==null)&&(rc(s,0),fl(s,pr,dn,!1)),sr(s,x),((Or&2)===0||s!==Gr)&&(s===Gr&&((Or&2)===0&&(Jl|=x),da===4&&fl(s,pr,dn,!1)),Qn(s))}function jp(s,o,x){if((Or&6)!==0)throw Error(i(327));var y=!x&&(o&124)===0&&(o&s.expiredLanes)===0||Me(s,o),k=y?gN(s,o):$x(s,o,!0),R=y;do{if(k===0){Qo&&!y&&fl(s,o,0,!1);break}else{if(x=s.current.alternate,R&&!hN(x)){k=$x(s,o,!1),R=!1;continue}if(k===2){if(R=o,s.errorRecoveryDisabledLanes&R)var W=0;else W=s.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){o=W;e:{var he=s;k=s0;var Te=he.current.memoizedState.isDehydrated;if(Te&&(rc(he,W).flags|=256),W=$x(he,W,!1),W!==2){if(Lx&&!Te){he.errorRecoveryDisabledLanes|=R,Jl|=R,k=4;break e}R=Fs,Fs=k,R!==null&&(Fs===null?Fs=R:Fs.push.apply(Fs,R))}k=W}if(R=!1,k!==2)continue}}if(k===1){rc(s,0),fl(s,o,0,!0);break}e:{switch(y=s,R=k,R){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:fl(y,o,dn,!ol);break e;case 2:Fs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(k=Ux+300-_e(),10<k)){if(fl(y,o,dn,!ol),Bt(y,0,!0)!==0)break e;y.timeoutHandle=Jp(Cp.bind(null,y,x,Fs,eu,zx,o,dn,Jl,Jo,ol,R,2,-0,0),k);break e}Cp(y,x,Fs,eu,zx,o,dn,Jl,Jo,ol,R,0,-0,0)}}break}while(!0);Qn(s)}function Cp(s,o,x,y,k,R,W,he,Te,We,ct,xt,Ze,tt){if(s.timeoutHandle=-1,xt=o.subtreeFlags,(xt&8192||(xt&16785408)===16785408)&&(f0={stylesheets:null,count:0,unsuspend:WN},yp(o),xt=ZN(),xt!==null)){s.cancelPendingCommit=xt(Rp.bind(null,s,o,R,x,y,k,W,he,Te,ct,1,Ze,tt)),fl(s,R,W,!We);return}Rp(s,o,R,x,y,k,W,he,Te)}function hN(s){for(var o=s;;){var x=o.tag;if((x===0||x===11||x===15)&&o.flags&16384&&(x=o.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var y=0;y<x.length;y++){var k=x[y],R=k.getSnapshot;k=k.value;try{if(!m(R(),k))return!1}catch{return!1}}if(x=o.child,o.subtreeFlags&16384&&x!==null)x.return=o,o=x;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function fl(s,o,x,y){o&=~Px,o&=~Jl,s.suspendedLanes|=o,s.pingedLanes&=~o,y&&(s.warmLanes|=o),y=s.expirationTimes;for(var k=o;0<k;){var R=31-qt(k),W=1<<R;y[R]=-1,k&=~W}x!==0&&Ts(s,x,o)}function tu(){return(Or&6)===0?(i0(0),!1):!0}function Xx(){if(ur!==null){if(Ir===0)var s=ur.return;else s=ur,yi=$l=null,ox(s),Yo=null,Kc=0,s=ur;for(;s!==null;)sp(s.alternate,s),s=s.return;ur=null}}function rc(s,o){var x=s.timeoutHandle;x!==-1&&(s.timeoutHandle=-1,RN(x)),x=s.cancelPendingCommit,x!==null&&(s.cancelPendingCommit=null,x()),Xx(),Gr=s,ur=x=mi(s.current,null),pr=o,Ir=0,$s=null,ol=!1,Qo=Me(s,o),Lx=!1,Jo=dn=Px=Jl=cl=da=0,Fs=s0=null,zx=!1,(o&8)!==0&&(o|=o&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=o;0<y;){var k=31-qt(y),R=1<<k;o|=s[k],y&=~R}return Ei=o,kd(),x}function Ep(s,o){cr=null,q.H=Hd,o===Uc||o===Rd?(o=Vg(),Ir=3):o===zg?(o=Vg(),Ir=4):Ir=o===G1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,$s=o,ur===null&&(da=1,$d(s,sn(o,s.current)))}function _p(){var s=q.H;return q.H=Hd,s===null?Hd:s}function Ap(){var s=q.A;return q.A=fN,s}function qx(){da=4,ol||(pr&4194048)!==pr&&cn.current!==null||(Qo=!0),(cl&134217727)===0&&(Jl&134217727)===0||Gr===null||fl(Gr,pr,dn,!1)}function $x(s,o,x){var y=Or;Or|=2;var k=_p(),R=Ap();(Gr!==s||pr!==o)&&(eu=null,rc(s,o)),o=!1;var W=da;e:do try{if(Ir!==0&&ur!==null){var he=ur,Te=$s;switch(Ir){case 8:Xx(),W=6;break e;case 3:case 2:case 9:case 6:cn.current===null&&(o=!0);var We=Ir;if(Ir=0,$s=null,ac(s,he,Te,We),x&&Qo){W=0;break e}break;default:We=Ir,Ir=0,$s=null,ac(s,he,Te,We)}}mN(),W=da;break}catch(ct){Ep(s,ct)}while(!0);return o&&s.shellSuspendCounter++,yi=$l=null,Or=y,q.H=k,q.A=R,ur===null&&(Gr=null,pr=0,kd()),W}function mN(){for(;ur!==null;)Sp(ur)}function gN(s,o){var x=Or;Or|=2;var y=_p(),k=Ap();Gr!==s||pr!==o?(eu=null,Jd=_e()+500,rc(s,o)):Qo=Me(s,o);e:do try{if(Ir!==0&&ur!==null){o=ur;var R=$s;t:switch(Ir){case 1:Ir=0,$s=null,ac(s,o,R,1);break;case 2:case 9:if(Ug(R)){Ir=0,$s=null,Tp(o);break}o=function(){Ir!==2&&Ir!==9||Gr!==s||(Ir=7),Qn(s)},R.then(o,o);break e;case 3:Ir=7;break e;case 4:Ir=5;break e;case 7:Ug(R)?(Ir=0,$s=null,Tp(o)):(Ir=0,$s=null,ac(s,o,R,7));break;case 5:var W=null;switch(ur.tag){case 26:W=ur.memoizedState;case 5:case 27:var he=ur;if(!W||uy(W)){Ir=0,$s=null;var Te=he.sibling;if(Te!==null)ur=Te;else{var We=he.return;We!==null?(ur=We,ru(We)):ur=null}break t}}Ir=0,$s=null,ac(s,o,R,5);break;case 6:Ir=0,$s=null,ac(s,o,R,6);break;case 8:Xx(),da=6;break e;default:throw Error(i(462))}}pN();break}catch(ct){Ep(s,ct)}while(!0);return yi=$l=null,q.H=y,q.A=k,Or=x,ur!==null?0:(Gr=null,pr=0,kd(),da)}function pN(){for(;ur!==null&&!ke();)Sp(ur)}function Sp(s){var o=rp(s.alternate,s,Ei);s.memoizedProps=s.pendingProps,o===null?ru(s):ur=o}function Tp(s){var o=s,x=o.alternate;switch(o.tag){case 15:case 0:o=K1(x,o,o.pendingProps,o.type,void 0,pr);break;case 11:o=K1(x,o,o.pendingProps,o.type.render,o.ref,pr);break;case 5:ox(o);default:sp(x,o),o=ur=Dg(o,Ei),o=rp(x,o,Ei)}s.memoizedProps=s.pendingProps,o===null?ru(s):ur=o}function ac(s,o,x,y){yi=$l=null,ox(o),Yo=null,Kc=0;var k=o.return;try{if(iN(s,k,o,x,pr)){da=1,$d(s,sn(x,s.current)),ur=null;return}}catch(R){if(k!==null)throw ur=k,R;da=1,$d(s,sn(x,s.current)),ur=null;return}o.flags&32768?(Cr||y===1?s=!0:Qo||(pr&536870912)!==0?s=!1:(ol=s=!0,(y===2||y===9||y===3||y===6)&&(y=cn.current,y!==null&&y.tag===13&&(y.flags|=16384))),Dp(o,s)):ru(o)}function ru(s){var o=s;do{if((o.flags&32768)!==0){Dp(o,ol);return}s=o.return;var x=oN(o.alternate,o,Ei);if(x!==null){ur=x;return}if(o=o.sibling,o!==null){ur=o;return}ur=o=s}while(o!==null);da===0&&(da=5)}function Dp(s,o){do{var x=cN(s.alternate,s);if(x!==null){x.flags&=32767,ur=x;return}if(x=s.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!o&&(s=s.sibling,s!==null)){ur=s;return}ur=s=x}while(s!==null);da=6,ur=null}function Rp(s,o,x,y,k,R,W,he,Te){s.cancelPendingCommit=null;do au();while(Wa!==0);if((Or&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(R=o.lanes|o.childLanes,R|=Bf,Ta(s,x,R,W,he,Te),s===Gr&&(ur=Gr=null,pr=0),ec=o,ul=s,tc=x,Hx=R,Vx=k,Np=y,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,wN(ze,function(){return Bp(),null})):(s.callbackNode=null,s.callbackPriority=0),y=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||y){y=q.T,q.T=null,k=xe.p,xe.p=2,W=Or,Or|=4;try{dN(s,o,x)}finally{Or=W,xe.p=k,q.T=y}}Wa=1,Op(),Ip(),Fp()}}function Op(){if(Wa===1){Wa=0;var s=ul,o=ec,x=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||x){x=q.T,q.T=null;var y=xe.p;xe.p=2;var k=Or;Or|=4;try{mp(o,s);var R=nh,W=F(s.containerInfo),he=R.focusedElem,Te=R.selectionRange;if(W!==he&&he&&he.ownerDocument&&S(he.ownerDocument.documentElement,he)){if(Te!==null&&V(he)){var We=Te.start,ct=Te.end;if(ct===void 0&&(ct=We),"selectionStart"in he)he.selectionStart=We,he.selectionEnd=Math.min(ct,he.value.length);else{var xt=he.ownerDocument||document,Ze=xt&&xt.defaultView||window;if(Ze.getSelection){var tt=Ze.getSelection(),Ht=he.textContent.length,Mt=Math.min(Te.start,Ht),Pr=Te.end===void 0?Mt:Math.min(Te.end,Ht);!tt.extend&&Mt>Pr&&(W=Pr,Pr=Mt,Mt=W);var He=N(he,Mt),Fe=N(he,Pr);if(He&&Fe&&(tt.rangeCount!==1||tt.anchorNode!==He.node||tt.anchorOffset!==He.offset||tt.focusNode!==Fe.node||tt.focusOffset!==Fe.offset)){var $e=xt.createRange();$e.setStart(He.node,He.offset),tt.removeAllRanges(),Mt>Pr?(tt.addRange($e),tt.extend(Fe.node,Fe.offset)):($e.setEnd(Fe.node,Fe.offset),tt.addRange($e))}}}}for(xt=[],tt=he;tt=tt.parentNode;)tt.nodeType===1&&xt.push({element:tt,left:tt.scrollLeft,top:tt.scrollTop});for(typeof he.focus=="function"&&he.focus(),he=0;he<xt.length;he++){var dt=xt[he];dt.element.scrollLeft=dt.left,dt.element.scrollTop=dt.top}}mu=!!sh,nh=sh=null}finally{Or=k,xe.p=y,q.T=x}}s.current=o,Wa=2}}function Ip(){if(Wa===2){Wa=0;var s=ul,o=ec,x=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||x){x=q.T,q.T=null;var y=xe.p;xe.p=2;var k=Or;Or|=4;try{up(s,o.alternate,o)}finally{Or=k,xe.p=y,q.T=x}}Wa=3}}function Fp(){if(Wa===4||Wa===3){Wa=0,Qe();var s=ul,o=ec,x=tc,y=Np;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Wa=5:(Wa=0,ec=ul=null,Mp(s,s.pendingLanes));var k=s.pendingLanes;if(k===0&&(dl=null),Yr(x),o=o.stateNode,Nr&&typeof Nr.onCommitFiberRoot=="function")try{Nr.onCommitFiberRoot(St,o,void 0,(o.current.flags&128)===128)}catch{}if(y!==null){o=q.T,k=xe.p,xe.p=2,q.T=null;try{for(var R=s.onRecoverableError,W=0;W<y.length;W++){var he=y[W];R(he.value,{componentStack:he.stack})}}finally{q.T=o,xe.p=k}}(tc&3)!==0&&au(),Qn(s),k=s.pendingLanes,(x&4194090)!==0&&(k&42)!==0?s===Gx?n0++:(n0=0,Gx=s):n0=0,i0(0)}}function Mp(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Pc(o)))}function au(s){return Op(),Ip(),Fp(),Bp()}function Bp(){if(Wa!==5)return!1;var s=ul,o=Hx;Hx=0;var x=Yr(tc),y=q.T,k=xe.p;try{xe.p=32>x?32:x,q.T=null,x=Vx,Vx=null;var R=ul,W=tc;if(Wa=0,ec=ul=null,tc=0,(Or&6)!==0)throw Error(i(331));var he=Or;if(Or|=4,vp(R.current),pp(R,R.current,W,x),Or=he,i0(0,!1),Nr&&typeof Nr.onPostCommitFiberRoot=="function")try{Nr.onPostCommitFiberRoot(St,R)}catch{}return!0}finally{xe.p=k,q.T=y,Mp(s,o)}}function Lp(s,o,x){o=sn(x,o),o=Nx(s.stateNode,o,2),s=tl(s,o,2),s!==null&&(sr(s,2),Qn(s))}function Hr(s,o,x){if(s.tag===3)Lp(s,s,x);else for(;o!==null;){if(o.tag===3){Lp(o,s,x);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(dl===null||!dl.has(y))){s=sn(x,s),x=H1(2),y=tl(o,x,2),y!==null&&(V1(x,y,o,s),sr(y,2),Qn(y));break}}o=o.return}}function Yx(s,o,x){var y=s.pingCache;if(y===null){y=s.pingCache=new xN;var k=new Set;y.set(o,k)}else k=y.get(o),k===void 0&&(k=new Set,y.set(o,k));k.has(x)||(Lx=!0,k.add(x),s=yN.bind(null,s,o,x),o.then(s,s))}function yN(s,o,x){var y=s.pingCache;y!==null&&y.delete(o),s.pingedLanes|=s.suspendedLanes&x,s.warmLanes&=~x,Gr===s&&(pr&x)===x&&(da===4||da===3&&(pr&62914560)===pr&&300>_e()-Ux?(Or&2)===0&&rc(s,0):Px|=x,Jo===pr&&(Jo=0)),Qn(s)}function Pp(s,o){o===0&&(o=Dt()),s=Lo(s,o),s!==null&&(sr(s,o),Qn(s))}function bN(s){var o=s.memoizedState,x=0;o!==null&&(x=o.retryLane),Pp(s,x)}function vN(s,o){var x=0;switch(s.tag){case 13:var y=s.stateNode,k=s.memoizedState;k!==null&&(x=k.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(o),Pp(s,x)}function wN(s,o){return Ne(s,o)}var su=null,sc=null,Wx=!1,nu=!1,Kx=!1,eo=0;function Qn(s){s!==sc&&s.next===null&&(sc===null?su=sc=s:sc=sc.next=s),nu=!0,Wx||(Wx=!0,kN())}function i0(s,o){if(!Kx&&nu){Kx=!0;do for(var x=!1,y=su;y!==null;){if(s!==0){var k=y.pendingLanes;if(k===0)var R=0;else{var W=y.suspendedLanes,he=y.pingedLanes;R=(1<<31-qt(42|s)+1)-1,R&=k&~(W&~he),R=R&201326741?R&201326741|1:R?R|2:0}R!==0&&(x=!0,Vp(y,R))}else R=pr,R=Bt(y,y===Gr?R:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(R&3)===0||Me(y,R)||(x=!0,Vp(y,R));y=y.next}while(x);Kx=!1}}function NN(){zp()}function zp(){nu=Wx=!1;var s=0;eo!==0&&(DN()&&(s=eo),eo=0);for(var o=_e(),x=null,y=su;y!==null;){var k=y.next,R=Up(y,o);R===0?(y.next=null,x===null?su=k:x.next=k,k===null&&(sc=x)):(x=y,(s!==0||(R&3)!==0)&&(nu=!0)),y=k}i0(s)}function Up(s,o){for(var x=s.suspendedLanes,y=s.pingedLanes,k=s.expirationTimes,R=s.pendingLanes&-62914561;0<R;){var W=31-qt(R),he=1<<W,Te=k[W];Te===-1?((he&x)===0||(he&y)!==0)&&(k[W]=pt(he,o)):Te<=o&&(s.expiredLanes|=he),R&=~he}if(o=Gr,x=pr,x=Bt(s,s===o?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y=s.callbackNode,x===0||s===o&&(Ir===2||Ir===9)||s.cancelPendingCommit!==null)return y!==null&&y!==null&&Ie(y),s.callbackNode=null,s.callbackPriority=0;if((x&3)===0||Me(s,x)){if(o=x&-x,o===s.callbackPriority)return o;switch(y!==null&&Ie(y),Yr(x)){case 2:case 8:x=Ge;break;case 32:x=ze;break;case 268435456:x=Oe;break;default:x=ze}return y=Hp.bind(null,s),x=Ne(x,y),s.callbackPriority=o,s.callbackNode=x,o}return y!==null&&y!==null&&Ie(y),s.callbackPriority=2,s.callbackNode=null,2}function Hp(s,o){if(Wa!==0&&Wa!==5)return s.callbackNode=null,s.callbackPriority=0,null;var x=s.callbackNode;if(au()&&s.callbackNode!==x)return null;var y=pr;return y=Bt(s,s===Gr?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y===0?null:(jp(s,y,o),Up(s,_e()),s.callbackNode!=null&&s.callbackNode===x?Hp.bind(null,s):null)}function Vp(s,o){if(au())return null;jp(s,o,!0)}function kN(){ON(function(){(Or&6)!==0?Ne(pe,NN):zp()})}function Zx(){return eo===0&&(eo=Vr()),eo}function Gp(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:So(""+s)}function Xp(s,o){var x=o.ownerDocument.createElement("input");return x.name=o.name,x.value=o.value,s.id&&x.setAttribute("form",s.id),o.parentNode.insertBefore(x,o),s=new FormData(s),x.parentNode.removeChild(x),s}function jN(s,o,x,y,k){if(o==="submit"&&x&&x.stateNode===k){var R=Gp((k[At]||null).action),W=y.submitter;W&&(o=(o=W[At]||null)?Gp(o.formAction):W.getAttribute("formAction"),o!==null&&(R=o,W=null));var he=new Gn("action","action",null,y,k);s.push({event:he,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(eo!==0){var Te=W?Xp(k,W):new FormData(k);px(x,{pending:!0,data:Te,method:k.method,action:R},null,Te)}}else typeof R=="function"&&(he.preventDefault(),Te=W?Xp(k,W):new FormData(k),px(x,{pending:!0,data:Te,method:k.method,action:R},R,Te))},currentTarget:k}]})}}for(var Qx=0;Qx<$n.length;Qx++){var Jx=$n[Qx],CN=Jx.toLowerCase(),EN=Jx[0].toUpperCase()+Jx.slice(1);Vs(CN,"on"+EN)}Vs($t,"onAnimationEnd"),Vs($a,"onAnimationIteration"),Vs(Rs,"onAnimationStart"),Vs("dblclick","onDoubleClick"),Vs("focusin","onFocus"),Vs("focusout","onBlur"),Vs(ns,"onTransitionRun"),Vs(Rr,"onTransitionStart"),Vs(Fa,"onTransitionCancel"),Vs(is,"onTransitionEnd"),mt("onMouseEnter",["mouseout","mouseover"]),mt("onMouseLeave",["mouseout","mouseover"]),mt("onPointerEnter",["pointerout","pointerover"]),mt("onPointerLeave",["pointerout","pointerover"]),ft("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ft("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ft("onBeforeInput",["compositionend","keypress","textInput","paste"]),ft("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ft("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ft("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var l0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_N=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(l0));function qp(s,o){o=(o&4)!==0;for(var x=0;x<s.length;x++){var y=s[x],k=y.event;y=y.listeners;e:{var R=void 0;if(o)for(var W=y.length-1;0<=W;W--){var he=y[W],Te=he.instance,We=he.currentTarget;if(he=he.listener,Te!==R&&k.isPropagationStopped())break e;R=he,k.currentTarget=We;try{R(k)}catch(ct){qd(ct)}k.currentTarget=null,R=Te}else for(W=0;W<y.length;W++){if(he=y[W],Te=he.instance,We=he.currentTarget,he=he.listener,Te!==R&&k.isPropagationStopped())break e;R=he,k.currentTarget=We;try{R(k)}catch(ct){qd(ct)}k.currentTarget=null,R=Te}}}}function fr(s,o){var x=o[Tr];x===void 0&&(x=o[Tr]=new Set);var y=s+"__bubble";x.has(y)||($p(o,s,2,!1),x.add(y))}function eh(s,o,x){var y=0;o&&(y|=4),$p(x,s,y,o)}var iu="_reactListening"+Math.random().toString(36).slice(2);function th(s){if(!s[iu]){s[iu]=!0,Ke.forEach(function(x){x!=="selectionchange"&&(_N.has(x)||eh(x,!1,s),eh(x,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[iu]||(o[iu]=!0,eh("selectionchange",!1,o))}}function $p(s,o,x,y){switch(py(o)){case 2:var k=ek;break;case 8:k=tk;break;default:k=mh}x=k.bind(null,o,x,s),k=void 0,!Wt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(k=!0),y?k!==void 0?s.addEventListener(o,x,{capture:!0,passive:k}):s.addEventListener(o,x,!0):k!==void 0?s.addEventListener(o,x,{passive:k}):s.addEventListener(o,x,!1)}function rh(s,o,x,y,k){var R=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var W=y.tag;if(W===3||W===4){var he=y.stateNode.containerInfo;if(he===k)break;if(W===4)for(W=y.return;W!==null;){var Te=W.tag;if((Te===3||Te===4)&&W.stateNode.containerInfo===k)return;W=W.return}for(;he!==null;){if(W=ve(he),W===null)return;if(Te=W.tag,Te===5||Te===6||Te===26||Te===27){y=R=W;continue e}he=he.parentNode}}y=y.return}vn(function(){var We=R,ct=Ui(x),xt=[];e:{var Ze=hi.get(s);if(Ze!==void 0){var tt=Gn,Ht=s;switch(s){case"keypress":if(To(x)===0)break e;case"keydown":case"keyup":tt=Sc;break;case"focusin":Ht="focus",tt=Xi;break;case"focusout":Ht="blur",tt=Xi;break;case"beforeblur":case"afterblur":tt=Xi;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":tt=pd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":tt=Sr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":tt=Dr;break;case $t:case $a:case Rs:tt=Sf;break;case is:tt=Of;break;case"scroll":case"scrollend":tt=as;break;case"wheel":tt=fi;break;case"copy":case"cut":case"paste":tt=nr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":tt=Ll;break;case"toggle":case"beforetoggle":tt=If}var Mt=(o&4)!==0,Pr=!Mt&&(s==="scroll"||s==="scrollend"),He=Mt?Ze!==null?Ze+"Capture":null:Ze;Mt=[];for(var Fe=We,$e;Fe!==null;){var dt=Fe;if($e=dt.stateNode,dt=dt.tag,dt!==5&&dt!==26&&dt!==27||$e===null||He===null||(dt=It(Fe,He),dt!=null&&Mt.push(o0(Fe,dt,$e))),Pr)break;Fe=Fe.return}0<Mt.length&&(Ze=new tt(Ze,Ht,null,x,ct),xt.push({event:Ze,listeners:Mt}))}}if((o&7)===0){e:{if(Ze=s==="mouseover"||s==="pointerover",tt=s==="mouseout"||s==="pointerout",Ze&&x!==Ol&&(Ht=x.relatedTarget||x.fromElement)&&(ve(Ht)||Ht[ra]))break e;if((tt||Ze)&&(Ze=ct.window===ct?ct:(Ze=ct.ownerDocument)?Ze.defaultView||Ze.parentWindow:window,tt?(Ht=x.relatedTarget||x.toElement,tt=We,Ht=Ht?ve(Ht):null,Ht!==null&&(Pr=d(Ht),Mt=Ht.tag,Ht!==Pr||Mt!==5&&Mt!==27&&Mt!==6)&&(Ht=null)):(tt=null,Ht=We),tt!==Ht)){if(Mt=pd,dt="onMouseLeave",He="onMouseEnter",Fe="mouse",(s==="pointerout"||s==="pointerover")&&(Mt=Ll,dt="onPointerLeave",He="onPointerEnter",Fe="pointer"),Pr=tt==null?Ze:Ye(tt),$e=Ht==null?Ze:Ye(Ht),Ze=new Mt(dt,Fe+"leave",tt,x,ct),Ze.target=Pr,Ze.relatedTarget=$e,dt=null,ve(ct)===We&&(Mt=new Mt(He,Fe+"enter",Ht,x,ct),Mt.target=$e,Mt.relatedTarget=Pr,dt=Mt),Pr=dt,tt&&Ht)t:{for(Mt=tt,He=Ht,Fe=0,$e=Mt;$e;$e=nc($e))Fe++;for($e=0,dt=He;dt;dt=nc(dt))$e++;for(;0<Fe-$e;)Mt=nc(Mt),Fe--;for(;0<$e-Fe;)He=nc(He),$e--;for(;Fe--;){if(Mt===He||He!==null&&Mt===He.alternate)break t;Mt=nc(Mt),He=nc(He)}Mt=null}else Mt=null;tt!==null&&Yp(xt,Ze,tt,Mt,!1),Ht!==null&&Pr!==null&&Yp(xt,Pr,Ht,Mt,!0)}}e:{if(Ze=We?Ye(We):window,tt=Ze.nodeName&&Ze.nodeName.toLowerCase(),tt==="select"||tt==="input"&&Ze.type==="file")var _t=wd;else if(Ul(Ze))if(Oc)_t=c;else{_t=ee;var dr=Mo}else tt=Ze.nodeName,!tt||tt.toLowerCase()!=="input"||Ze.type!=="checkbox"&&Ze.type!=="radio"?We&&Rt(We.elementType)&&(_t=wd):_t=n;if(_t&&(_t=_t(s,We))){vs(xt,_t,x,ct);break e}dr&&dr(s,Ze,We),s==="focusout"&&We&&Ze.type==="number"&&We.memoizedProps.value!=null&&qe(Ze,"number",Ze.value)}switch(dr=We?Ye(We):window,s){case"focusin":(Ul(dr)||dr.contentEditable==="true")&&(fe=dr,je=We,De=null);break;case"focusout":De=je=fe=null;break;case"mousedown":Re=!0;break;case"contextmenu":case"mouseup":case"dragend":Re=!1,Xe(xt,x,ct);break;case"selectionchange":if(te)break;case"keydown":case"keyup":Xe(xt,x,ct)}var Ot;if(Pl)e:{switch(s){case"compositionstart":var Lt="onCompositionStart";break e;case"compositionend":Lt="onCompositionEnd";break e;case"compositionupdate":Lt="onCompositionUpdate";break e}Lt=void 0}else Yi?xi(s,x)&&(Lt="onCompositionEnd"):s==="keydown"&&x.keyCode===229&&(Lt="onCompositionStart");Lt&&(Dc&&x.locale!=="ko"&&(Yi||Lt!=="onCompositionStart"?Lt==="onCompositionEnd"&&Yi&&(Ot=Un()):(zn=ct,Il="value"in zn?zn.value:zn.textContent,Yi=!0)),dr=lu(We,Lt),0<dr.length&&(Lt=new Ml(Lt,s,null,x,ct),xt.push({event:Lt,listeners:dr}),Ot?Lt.data=Ot:(Ot=Io(x),Ot!==null&&(Lt.data=Ot)))),(Ot=Tc?zl(s,x):Ff(s,x))&&(Lt=lu(We,"onBeforeInput"),0<Lt.length&&(dr=new Ml("onBeforeInput","beforeinput",null,x,ct),xt.push({event:dr,listeners:Lt}),dr.data=Ot)),jN(xt,s,We,x,ct)}qp(xt,o)})}function o0(s,o,x){return{instance:s,listener:o,currentTarget:x}}function lu(s,o){for(var x=o+"Capture",y=[];s!==null;){var k=s,R=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||R===null||(k=It(s,x),k!=null&&y.unshift(o0(s,k,R)),k=It(s,o),k!=null&&y.push(o0(s,k,R))),s.tag===3)return y;s=s.return}return[]}function nc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Yp(s,o,x,y,k){for(var R=o._reactName,W=[];x!==null&&x!==y;){var he=x,Te=he.alternate,We=he.stateNode;if(he=he.tag,Te!==null&&Te===y)break;he!==5&&he!==26&&he!==27||We===null||(Te=We,k?(We=It(x,R),We!=null&&W.unshift(o0(x,We,Te))):k||(We=It(x,R),We!=null&&W.push(o0(x,We,Te)))),x=x.return}W.length!==0&&s.push({event:o,listeners:W})}var AN=/\r\n?/g,SN=/\u0000|\uFFFD/g;function Wp(s){return(typeof s=="string"?s:""+s).replace(AN,`
`).replace(SN,"")}function Kp(s,o){return o=Wp(o),Wp(s)===o}function ou(){}function Lr(s,o,x,y,k,R){switch(x){case"children":typeof y=="string"?o==="body"||o==="textarea"&&y===""||Oa(s,y):(typeof y=="number"||typeof y=="bigint")&&o!=="body"&&Oa(s,""+y);break;case"className":_r(s,"class",y);break;case"tabIndex":_r(s,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":_r(s,x,y);break;case"style":bs(s,y,R);break;case"data":if(o!=="object"){_r(s,"data",y);break}case"src":case"href":if(y===""&&(o!=="a"||x!=="href")){s.removeAttribute(x);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=So(""+y),s.setAttribute(x,y);break;case"action":case"formAction":if(typeof y=="function"){s.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof R=="function"&&(x==="formAction"?(o!=="input"&&Lr(s,o,"name",k.name,k,null),Lr(s,o,"formEncType",k.formEncType,k,null),Lr(s,o,"formMethod",k.formMethod,k,null),Lr(s,o,"formTarget",k.formTarget,k,null)):(Lr(s,o,"encType",k.encType,k,null),Lr(s,o,"method",k.method,k,null),Lr(s,o,"target",k.target,k,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=So(""+y),s.setAttribute(x,y);break;case"onClick":y!=null&&(s.onclick=ou);break;case"onScroll":y!=null&&fr("scroll",s);break;case"onScrollEnd":y!=null&&fr("scrollend",s);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(x=y.__html,x!=null){if(k.children!=null)throw Error(i(60));s.innerHTML=x}}break;case"multiple":s.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":s.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){s.removeAttribute("xlink:href");break}x=So(""+y),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""+y):s.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""):s.removeAttribute(x);break;case"capture":case"download":y===!0?s.setAttribute(x,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,y):s.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?s.setAttribute(x,y):s.removeAttribute(x);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?s.removeAttribute(x):s.setAttribute(x,y);break;case"popover":fr("beforetoggle",s),fr("toggle",s),it(s,"popover",y);break;case"xlinkActuate":zt(s,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":zt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":zt(s,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":zt(s,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":zt(s,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":zt(s,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":zt(s,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":zt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":zt(s,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":it(s,"is",y);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Wr.get(x)||x,it(s,x,y))}}function ah(s,o,x,y,k,R){switch(x){case"style":bs(s,y,R);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(x=y.__html,x!=null){if(k.children!=null)throw Error(i(60));s.innerHTML=x}}break;case"children":typeof y=="string"?Oa(s,y):(typeof y=="number"||typeof y=="bigint")&&Oa(s,""+y);break;case"onScroll":y!=null&&fr("scroll",s);break;case"onScrollEnd":y!=null&&fr("scrollend",s);break;case"onClick":y!=null&&(s.onclick=ou);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Je.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(k=x.endsWith("Capture"),o=x.slice(2,k?x.length-7:void 0),R=s[At]||null,R=R!=null?R[x]:null,typeof R=="function"&&s.removeEventListener(o,R,k),typeof y=="function")){typeof R!="function"&&R!==null&&(x in s?s[x]=null:s.hasAttribute(x)&&s.removeAttribute(x)),s.addEventListener(o,y,k);break e}x in s?s[x]=y:y===!0?s.setAttribute(x,""):it(s,x,y)}}}function Ka(s,o,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":fr("error",s),fr("load",s);var y=!1,k=!1,R;for(R in x)if(x.hasOwnProperty(R)){var W=x[R];if(W!=null)switch(R){case"src":y=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Lr(s,o,R,W,x,null)}}k&&Lr(s,o,"srcSet",x.srcSet,x,null),y&&Lr(s,o,"src",x.src,x,null);return;case"input":fr("invalid",s);var he=R=W=k=null,Te=null,We=null;for(y in x)if(x.hasOwnProperty(y)){var ct=x[y];if(ct!=null)switch(y){case"name":k=ct;break;case"type":W=ct;break;case"checked":Te=ct;break;case"defaultChecked":We=ct;break;case"value":R=ct;break;case"defaultValue":he=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,o));break;default:Lr(s,o,y,ct,x,null)}}Ra(s,R,he,Te,We,W,k,!1),_o(s);return;case"select":fr("invalid",s),y=W=R=null;for(k in x)if(x.hasOwnProperty(k)&&(he=x[k],he!=null))switch(k){case"value":R=he;break;case"defaultValue":W=he;break;case"multiple":y=he;default:Lr(s,o,k,he,x,null)}o=R,x=W,s.multiple=!!y,o!=null?be(s,!!y,o,!1):x!=null&&be(s,!!y,x,!0);return;case"textarea":fr("invalid",s),R=k=y=null;for(W in x)if(x.hasOwnProperty(W)&&(he=x[W],he!=null))switch(W){case"value":y=he;break;case"defaultValue":k=he;break;case"children":R=he;break;case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(91));break;default:Lr(s,o,W,he,x,null)}ga(s,y,k,R),_o(s);return;case"option":for(Te in x)if(x.hasOwnProperty(Te)&&(y=x[Te],y!=null))switch(Te){case"selected":s.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Lr(s,o,Te,y,x,null)}return;case"dialog":fr("beforetoggle",s),fr("toggle",s),fr("cancel",s),fr("close",s);break;case"iframe":case"object":fr("load",s);break;case"video":case"audio":for(y=0;y<l0.length;y++)fr(l0[y],s);break;case"image":fr("error",s),fr("load",s);break;case"details":fr("toggle",s);break;case"embed":case"source":case"link":fr("error",s),fr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(We in x)if(x.hasOwnProperty(We)&&(y=x[We],y!=null))switch(We){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Lr(s,o,We,y,x,null)}return;default:if(Rt(o)){for(ct in x)x.hasOwnProperty(ct)&&(y=x[ct],y!==void 0&&ah(s,o,ct,y,x,void 0));return}}for(he in x)x.hasOwnProperty(he)&&(y=x[he],y!=null&&Lr(s,o,he,y,x,null))}function TN(s,o,x,y){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,R=null,W=null,he=null,Te=null,We=null,ct=null;for(tt in x){var xt=x[tt];if(x.hasOwnProperty(tt)&&xt!=null)switch(tt){case"checked":break;case"value":break;case"defaultValue":Te=xt;default:y.hasOwnProperty(tt)||Lr(s,o,tt,null,y,xt)}}for(var Ze in y){var tt=y[Ze];if(xt=x[Ze],y.hasOwnProperty(Ze)&&(tt!=null||xt!=null))switch(Ze){case"type":R=tt;break;case"name":k=tt;break;case"checked":We=tt;break;case"defaultChecked":ct=tt;break;case"value":W=tt;break;case"defaultValue":he=tt;break;case"children":case"dangerouslySetInnerHTML":if(tt!=null)throw Error(i(137,o));break;default:tt!==xt&&Lr(s,o,Ze,tt,y,xt)}}Ar(s,W,he,Te,We,ct,R,k);return;case"select":tt=W=he=Ze=null;for(R in x)if(Te=x[R],x.hasOwnProperty(R)&&Te!=null)switch(R){case"value":break;case"multiple":tt=Te;default:y.hasOwnProperty(R)||Lr(s,o,R,null,y,Te)}for(k in y)if(R=y[k],Te=x[k],y.hasOwnProperty(k)&&(R!=null||Te!=null))switch(k){case"value":Ze=R;break;case"defaultValue":he=R;break;case"multiple":W=R;default:R!==Te&&Lr(s,o,k,R,y,Te)}o=he,x=W,y=tt,Ze!=null?be(s,!!x,Ze,!1):!!y!=!!x&&(o!=null?be(s,!!x,o,!0):be(s,!!x,x?[]:"",!1));return;case"textarea":tt=Ze=null;for(he in x)if(k=x[he],x.hasOwnProperty(he)&&k!=null&&!y.hasOwnProperty(he))switch(he){case"value":break;case"children":break;default:Lr(s,o,he,null,y,k)}for(W in y)if(k=y[W],R=x[W],y.hasOwnProperty(W)&&(k!=null||R!=null))switch(W){case"value":Ze=k;break;case"defaultValue":tt=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:k!==R&&Lr(s,o,W,k,y,R)}Tt(s,Ze,tt);return;case"option":for(var Ht in x)if(Ze=x[Ht],x.hasOwnProperty(Ht)&&Ze!=null&&!y.hasOwnProperty(Ht))switch(Ht){case"selected":s.selected=!1;break;default:Lr(s,o,Ht,null,y,Ze)}for(Te in y)if(Ze=y[Te],tt=x[Te],y.hasOwnProperty(Te)&&Ze!==tt&&(Ze!=null||tt!=null))switch(Te){case"selected":s.selected=Ze&&typeof Ze!="function"&&typeof Ze!="symbol";break;default:Lr(s,o,Te,Ze,y,tt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Mt in x)Ze=x[Mt],x.hasOwnProperty(Mt)&&Ze!=null&&!y.hasOwnProperty(Mt)&&Lr(s,o,Mt,null,y,Ze);for(We in y)if(Ze=y[We],tt=x[We],y.hasOwnProperty(We)&&Ze!==tt&&(Ze!=null||tt!=null))switch(We){case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,o));break;default:Lr(s,o,We,Ze,y,tt)}return;default:if(Rt(o)){for(var Pr in x)Ze=x[Pr],x.hasOwnProperty(Pr)&&Ze!==void 0&&!y.hasOwnProperty(Pr)&&ah(s,o,Pr,void 0,y,Ze);for(ct in y)Ze=y[ct],tt=x[ct],!y.hasOwnProperty(ct)||Ze===tt||Ze===void 0&&tt===void 0||ah(s,o,ct,Ze,y,tt);return}}for(var He in x)Ze=x[He],x.hasOwnProperty(He)&&Ze!=null&&!y.hasOwnProperty(He)&&Lr(s,o,He,null,y,Ze);for(xt in y)Ze=y[xt],tt=x[xt],!y.hasOwnProperty(xt)||Ze===tt||Ze==null&&tt==null||Lr(s,o,xt,Ze,y,tt)}var sh=null,nh=null;function cu(s){return s.nodeType===9?s:s.ownerDocument}function Zp(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Qp(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function ih(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var lh=null;function DN(){var s=window.event;return s&&s.type==="popstate"?s===lh?!1:(lh=s,!0):(lh=null,!1)}var Jp=typeof setTimeout=="function"?setTimeout:void 0,RN=typeof clearTimeout=="function"?clearTimeout:void 0,ey=typeof Promise=="function"?Promise:void 0,ON=typeof queueMicrotask=="function"?queueMicrotask:typeof ey<"u"?function(s){return ey.resolve(null).then(s).catch(IN)}:Jp;function IN(s){setTimeout(function(){throw s})}function xl(s){return s==="head"}function ty(s,o){var x=o,y=0,k=0;do{var R=x.nextSibling;if(s.removeChild(x),R&&R.nodeType===8)if(x=R.data,x==="/$"){if(0<y&&8>y){x=y;var W=s.ownerDocument;if(x&1&&c0(W.documentElement),x&2&&c0(W.body),x&4)for(x=W.head,c0(x),W=x.firstChild;W;){var he=W.nextSibling,Te=W.nodeName;W[ge]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&W.rel.toLowerCase()==="stylesheet"||x.removeChild(W),W=he}}if(k===0){s.removeChild(R),p0(o);return}k--}else x==="$"||x==="$?"||x==="$!"?k++:y=x.charCodeAt(0)-48;else y=0;x=R}while(x);p0(o)}function oh(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var x=o;switch(o=o.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":oh(x),ye(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}s.removeChild(x)}}function FN(s,o,x,y){for(;s.nodeType===1;){var k=x;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!y&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(y){if(!s[ge])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(R=s.getAttribute("rel"),R==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(R!==k.rel||s.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||s.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||s.getAttribute("title")!==(k.title==null?null:k.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(R=s.getAttribute("src"),(R!==(k.src==null?null:k.src)||s.getAttribute("type")!==(k.type==null?null:k.type)||s.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&R&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var R=k.name==null?null:""+k.name;if(k.type==="hidden"&&s.getAttribute("name")===R)return s}else return s;if(s=jn(s.nextSibling),s===null)break}return null}function MN(s,o,x){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!x||(s=jn(s.nextSibling),s===null))return null;return s}function ch(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function BN(s,o){var x=s.ownerDocument;if(s.data!=="$?"||x.readyState==="complete")o();else{var y=function(){o(),x.removeEventListener("DOMContentLoaded",y)};x.addEventListener("DOMContentLoaded",y),s._reactRetry=y}}function jn(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var dh=null;function ry(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var x=s.data;if(x==="$"||x==="$!"||x==="$?"){if(o===0)return s;o--}else x==="/$"&&o++}s=s.previousSibling}return null}function ay(s,o,x){switch(o=cu(x),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function c0(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);ye(s)}var un=new Map,sy=new Set;function du(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var _i=xe.d;xe.d={f:LN,r:PN,D:zN,C:UN,L:HN,m:VN,X:XN,S:GN,M:qN};function LN(){var s=_i.f(),o=tu();return s||o}function PN(s){var o=Ee(s);o!==null&&o.tag===5&&o.type==="form"?j1(o):_i.r(s)}var ic=typeof document>"u"?null:document;function ny(s,o,x){var y=ic;if(y&&typeof o=="string"&&o){var k=Da(o);k='link[rel="'+s+'"][href="'+k+'"]',typeof x=="string"&&(k+='[crossorigin="'+x+'"]'),sy.has(k)||(sy.add(k),s={rel:s,crossOrigin:x,href:o},y.querySelector(k)===null&&(o=y.createElement("link"),Ka(o,"link",s),Ue(o),y.head.appendChild(o)))}}function zN(s){_i.D(s),ny("dns-prefetch",s,null)}function UN(s,o){_i.C(s,o),ny("preconnect",s,o)}function HN(s,o,x){_i.L(s,o,x);var y=ic;if(y&&s&&o){var k='link[rel="preload"][as="'+Da(o)+'"]';o==="image"&&x&&x.imageSrcSet?(k+='[imagesrcset="'+Da(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(k+='[imagesizes="'+Da(x.imageSizes)+'"]')):k+='[href="'+Da(s)+'"]';var R=k;switch(o){case"style":R=lc(s);break;case"script":R=oc(s)}un.has(R)||(s=w({rel:"preload",href:o==="image"&&x&&x.imageSrcSet?void 0:s,as:o},x),un.set(R,s),y.querySelector(k)!==null||o==="style"&&y.querySelector(d0(R))||o==="script"&&y.querySelector(u0(R))||(o=y.createElement("link"),Ka(o,"link",s),Ue(o),y.head.appendChild(o)))}}function VN(s,o){_i.m(s,o);var x=ic;if(x&&s){var y=o&&typeof o.as=="string"?o.as:"script",k='link[rel="modulepreload"][as="'+Da(y)+'"][href="'+Da(s)+'"]',R=k;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":R=oc(s)}if(!un.has(R)&&(s=w({rel:"modulepreload",href:s},o),un.set(R,s),x.querySelector(k)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(u0(R)))return}y=x.createElement("link"),Ka(y,"link",s),Ue(y),x.head.appendChild(y)}}}function GN(s,o,x){_i.S(s,o,x);var y=ic;if(y&&s){var k=lt(y).hoistableStyles,R=lc(s);o=o||"default";var W=k.get(R);if(!W){var he={loading:0,preload:null};if(W=y.querySelector(d0(R)))he.loading=5;else{s=w({rel:"stylesheet",href:s,"data-precedence":o},x),(x=un.get(R))&&uh(s,x);var Te=W=y.createElement("link");Ue(Te),Ka(Te,"link",s),Te._p=new Promise(function(We,ct){Te.onload=We,Te.onerror=ct}),Te.addEventListener("load",function(){he.loading|=1}),Te.addEventListener("error",function(){he.loading|=2}),he.loading|=4,uu(W,o,y)}W={type:"stylesheet",instance:W,count:1,state:he},k.set(R,W)}}}function XN(s,o){_i.X(s,o);var x=ic;if(x&&s){var y=lt(x).hoistableScripts,k=oc(s),R=y.get(k);R||(R=x.querySelector(u0(k)),R||(s=w({src:s,async:!0},o),(o=un.get(k))&&fh(s,o),R=x.createElement("script"),Ue(R),Ka(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(k,R))}}function qN(s,o){_i.M(s,o);var x=ic;if(x&&s){var y=lt(x).hoistableScripts,k=oc(s),R=y.get(k);R||(R=x.querySelector(u0(k)),R||(s=w({src:s,async:!0,type:"module"},o),(o=un.get(k))&&fh(s,o),R=x.createElement("script"),Ue(R),Ka(R,"link",s),x.head.appendChild(R)),R={type:"script",instance:R,count:1,state:null},y.set(k,R))}}function iy(s,o,x,y){var k=(k=K.current)?du(k):null;if(!k)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(o=lc(x.href),x=lt(k).hoistableStyles,y=x.get(o),y||(y={type:"style",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){s=lc(x.href);var R=lt(k).hoistableStyles,W=R.get(s);if(W||(k=k.ownerDocument||k,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},R.set(s,W),(R=k.querySelector(d0(s)))&&!R._p&&(W.instance=R,W.state.loading=5),un.has(s)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},un.set(s,x),R||$N(k,s,x,W.state))),o&&y===null)throw Error(i(528,""));return W}if(o&&y!==null)throw Error(i(529,""));return null;case"script":return o=x.async,x=x.src,typeof x=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=oc(x),x=lt(k).hoistableScripts,y=x.get(o),y||(y={type:"script",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function lc(s){return'href="'+Da(s)+'"'}function d0(s){return'link[rel="stylesheet"]['+s+"]"}function ly(s){return w({},s,{"data-precedence":s.precedence,precedence:null})}function $N(s,o,x,y){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?y.loading=1:(o=s.createElement("link"),y.preload=o,o.addEventListener("load",function(){return y.loading|=1}),o.addEventListener("error",function(){return y.loading|=2}),Ka(o,"link",x),Ue(o),s.head.appendChild(o))}function oc(s){return'[src="'+Da(s)+'"]'}function u0(s){return"script[async]"+s}function oy(s,o,x){if(o.count++,o.instance===null)switch(o.type){case"style":var y=s.querySelector('style[data-href~="'+Da(x.href)+'"]');if(y)return o.instance=y,Ue(y),y;var k=w({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return y=(s.ownerDocument||s).createElement("style"),Ue(y),Ka(y,"style",k),uu(y,x.precedence,s),o.instance=y;case"stylesheet":k=lc(x.href);var R=s.querySelector(d0(k));if(R)return o.state.loading|=4,o.instance=R,Ue(R),R;y=ly(x),(k=un.get(k))&&uh(y,k),R=(s.ownerDocument||s).createElement("link"),Ue(R);var W=R;return W._p=new Promise(function(he,Te){W.onload=he,W.onerror=Te}),Ka(R,"link",y),o.state.loading|=4,uu(R,x.precedence,s),o.instance=R;case"script":return R=oc(x.src),(k=s.querySelector(u0(R)))?(o.instance=k,Ue(k),k):(y=x,(k=un.get(R))&&(y=w({},x),fh(y,k)),s=s.ownerDocument||s,k=s.createElement("script"),Ue(k),Ka(k,"link",y),s.head.appendChild(k),o.instance=k);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(y=o.instance,o.state.loading|=4,uu(y,x.precedence,s));return o.instance}function uu(s,o,x){for(var y=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=y.length?y[y.length-1]:null,R=k,W=0;W<y.length;W++){var he=y[W];if(he.dataset.precedence===o)R=he;else if(R!==k)break}R?R.parentNode.insertBefore(s,R.nextSibling):(o=x.nodeType===9?x.head:x,o.insertBefore(s,o.firstChild))}function uh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function fh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var fu=null;function cy(s,o,x){if(fu===null){var y=new Map,k=fu=new Map;k.set(x,y)}else k=fu,y=k.get(x),y||(y=new Map,k.set(x,y));if(y.has(s))return y;for(y.set(s,null),x=x.getElementsByTagName(s),k=0;k<x.length;k++){var R=x[k];if(!(R[ge]||R[la]||s==="link"&&R.getAttribute("rel")==="stylesheet")&&R.namespaceURI!=="http://www.w3.org/2000/svg"){var W=R.getAttribute(o)||"";W=s+W;var he=y.get(W);he?he.push(R):y.set(W,[R])}}return y}function dy(s,o,x){s=s.ownerDocument||s,s.head.insertBefore(x,o==="title"?s.querySelector("head > title"):null)}function YN(s,o,x){if(x===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function uy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var f0=null;function WN(){}function KN(s,o,x){if(f0===null)throw Error(i(475));var y=f0;if(o.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var k=lc(x.href),R=s.querySelector(d0(k));if(R){s=R._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(y.count++,y=xu.bind(y),s.then(y,y)),o.state.loading|=4,o.instance=R,Ue(R);return}R=s.ownerDocument||s,x=ly(x),(k=un.get(k))&&uh(x,k),R=R.createElement("link"),Ue(R);var W=R;W._p=new Promise(function(he,Te){W.onload=he,W.onerror=Te}),Ka(R,"link",x),o.instance=R}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(y.count++,o=xu.bind(y),s.addEventListener("load",o),s.addEventListener("error",o))}}function ZN(){if(f0===null)throw Error(i(475));var s=f0;return s.stylesheets&&s.count===0&&xh(s,s.stylesheets),0<s.count?function(o){var x=setTimeout(function(){if(s.stylesheets&&xh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(x)}}:null}function xu(){if(this.count--,this.count===0){if(this.stylesheets)xh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var hu=null;function xh(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,hu=new Map,o.forEach(QN,s),hu=null,xu.call(s))}function QN(s,o){if(!(o.state.loading&4)){var x=hu.get(s);if(x)var y=x.get(null);else{x=new Map,hu.set(s,x);for(var k=s.querySelectorAll("link[data-precedence],style[data-precedence]"),R=0;R<k.length;R++){var W=k[R];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(x.set(W.dataset.precedence,W),y=W)}y&&x.set(null,y)}k=o.instance,W=k.getAttribute("data-precedence"),R=x.get(W)||y,R===y&&x.set(null,k),x.set(W,k),this.count++,y=xu.bind(this),k.addEventListener("load",y),k.addEventListener("error",y),R?R.parentNode.insertBefore(k,R.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(k,s.firstChild)),o.state.loading|=4}}var x0={$$typeof:D,Provider:null,Consumer:null,_currentValue:Ce,_currentValue2:Ce,_threadCount:0};function JN(s,o,x,y,k,R,W,he){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yt(0),this.hiddenUpdates=Yt(null),this.identifierPrefix=y,this.onUncaughtError=k,this.onCaughtError=R,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=he,this.incompleteTransitions=new Map}function fy(s,o,x,y,k,R,W,he,Te,We,ct,xt){return s=new JN(s,o,x,W,he,Te,We,xt),o=1,R===!0&&(o|=24),R=Gs(3,null,null,o),s.current=R,R.stateNode=s,o=Yf(),o.refCount++,s.pooledCache=o,o.refCount++,R.memoizedState={element:y,isDehydrated:x,cache:o},Qf(R),s}function xy(s){return s?(s=Po,s):Po}function hy(s,o,x,y,k,R){k=xy(k),y.context===null?y.context=k:y.pendingContext=k,y=el(o),y.payload={element:x},R=R===void 0?null:R,R!==null&&(y.callback=R),x=tl(s,y,o),x!==null&&(Ws(x,s,o),Vc(x,s,o))}function my(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var x=s.retryLane;s.retryLane=x!==0&&x<o?x:o}}function hh(s,o){my(s,o),(s=s.alternate)&&my(s,o)}function gy(s){if(s.tag===13){var o=Lo(s,67108864);o!==null&&Ws(o,s,67108864),hh(s,67108864)}}var mu=!0;function ek(s,o,x,y){var k=q.T;q.T=null;var R=xe.p;try{xe.p=2,mh(s,o,x,y)}finally{xe.p=R,q.T=k}}function tk(s,o,x,y){var k=q.T;q.T=null;var R=xe.p;try{xe.p=8,mh(s,o,x,y)}finally{xe.p=R,q.T=k}}function mh(s,o,x,y){if(mu){var k=gh(y);if(k===null)rh(s,o,y,gu,x),yy(s,y);else if(ak(k,s,o,x,y))y.stopPropagation();else if(yy(s,y),o&4&&-1<rk.indexOf(s)){for(;k!==null;){var R=Ee(k);if(R!==null)switch(R.tag){case 3:if(R=R.stateNode,R.current.memoizedState.isDehydrated){var W=Et(R.pendingLanes);if(W!==0){var he=R;for(he.pendingLanes|=2,he.entangledLanes|=2;W;){var Te=1<<31-qt(W);he.entanglements[1]|=Te,W&=~Te}Qn(R),(Or&6)===0&&(Jd=_e()+500,i0(0))}}break;case 13:he=Lo(R,2),he!==null&&Ws(he,R,2),tu(),hh(R,2)}if(R=gh(y),R===null&&rh(s,o,y,gu,x),R===k)break;k=R}k!==null&&y.stopPropagation()}else rh(s,o,y,null,x)}}function gh(s){return s=Ui(s),ph(s)}var gu=null;function ph(s){if(gu=null,s=ve(s),s!==null){var o=d(s);if(o===null)s=null;else{var x=o.tag;if(x===13){if(s=f(o),s!==null)return s;s=null}else if(x===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return gu=s,null}function py(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ut()){case pe:return 2;case Ge:return 8;case ze:case Pe:return 32;case Oe:return 268435456;default:return 32}default:return 32}}var yh=!1,hl=null,ml=null,gl=null,h0=new Map,m0=new Map,pl=[],rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yy(s,o){switch(s){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":h0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":m0.delete(o.pointerId)}}function g0(s,o,x,y,k,R){return s===null||s.nativeEvent!==R?(s={blockedOn:o,domEventName:x,eventSystemFlags:y,nativeEvent:R,targetContainers:[k]},o!==null&&(o=Ee(o),o!==null&&gy(o)),s):(s.eventSystemFlags|=y,o=s.targetContainers,k!==null&&o.indexOf(k)===-1&&o.push(k),s)}function ak(s,o,x,y,k){switch(o){case"focusin":return hl=g0(hl,s,o,x,y,k),!0;case"dragenter":return ml=g0(ml,s,o,x,y,k),!0;case"mouseover":return gl=g0(gl,s,o,x,y,k),!0;case"pointerover":var R=k.pointerId;return h0.set(R,g0(h0.get(R)||null,s,o,x,y,k)),!0;case"gotpointercapture":return R=k.pointerId,m0.set(R,g0(m0.get(R)||null,s,o,x,y,k)),!0}return!1}function by(s){var o=ve(s.target);if(o!==null){var x=d(o);if(x!==null){if(o=x.tag,o===13){if(o=f(x),o!==null){s.blockedOn=o,bn(s.priority,function(){if(x.tag===13){var y=Ys();y=zs(y);var k=Lo(x,y);k!==null&&Ws(k,x,y),hh(x,y)}});return}}else if(o===3&&x.stateNode.current.memoizedState.isDehydrated){s.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}s.blockedOn=null}function pu(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var x=gh(s.nativeEvent);if(x===null){x=s.nativeEvent;var y=new x.constructor(x.type,x);Ol=y,x.target.dispatchEvent(y),Ol=null}else return o=Ee(x),o!==null&&gy(o),s.blockedOn=x,!1;o.shift()}return!0}function vy(s,o,x){pu(s)&&x.delete(o)}function sk(){yh=!1,hl!==null&&pu(hl)&&(hl=null),ml!==null&&pu(ml)&&(ml=null),gl!==null&&pu(gl)&&(gl=null),h0.forEach(vy),m0.forEach(vy)}function yu(s,o){s.blockedOn===o&&(s.blockedOn=null,yh||(yh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sk)))}var bu=null;function wy(s){bu!==s&&(bu=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){bu===s&&(bu=null);for(var o=0;o<s.length;o+=3){var x=s[o],y=s[o+1],k=s[o+2];if(typeof y!="function"){if(ph(y||x)===null)continue;break}var R=Ee(x);R!==null&&(s.splice(o,3),o-=3,px(R,{pending:!0,data:k,method:x.method,action:y},y,k))}}))}function p0(s){function o(Te){return yu(Te,s)}hl!==null&&yu(hl,s),ml!==null&&yu(ml,s),gl!==null&&yu(gl,s),h0.forEach(o),m0.forEach(o);for(var x=0;x<pl.length;x++){var y=pl[x];y.blockedOn===s&&(y.blockedOn=null)}for(;0<pl.length&&(x=pl[0],x.blockedOn===null);)by(x),x.blockedOn===null&&pl.shift();if(x=(s.ownerDocument||s).$$reactFormReplay,x!=null)for(y=0;y<x.length;y+=3){var k=x[y],R=x[y+1],W=k[At]||null;if(typeof R=="function")W||wy(x);else if(W){var he=null;if(R&&R.hasAttribute("formAction")){if(k=R,W=R[At]||null)he=W.formAction;else if(ph(k)!==null)continue}else he=W.action;typeof he=="function"?x[y+1]=he:(x.splice(y,3),y-=3),wy(x)}}}function bh(s){this._internalRoot=s}vu.prototype.render=bh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var x=o.current,y=Ys();hy(x,y,s,o,null,null)},vu.prototype.unmount=bh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;hy(s.current,2,null,s,null,null),tu(),o[ra]=null}};function vu(s){this._internalRoot=s}vu.prototype.unstable_scheduleHydration=function(s){if(s){var o=ps();s={blockedOn:null,target:s,priority:o};for(var x=0;x<pl.length&&o!==0&&o<pl[x].priority;x++);pl.splice(x,0,s),x===0&&by(s)}};var Ny=a.version;if(Ny!=="19.1.1")throw Error(i(527,Ny,"19.1.1"));xe.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=b(o),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var nk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wu.isDisabled&&wu.supportsFiber)try{St=wu.inject(nk),Nr=wu}catch{}}return b0.createRoot=function(s,o){if(!l(s))throw Error(i(299));var x=!1,y="",k=L1,R=P1,W=z1,he=null;return o!=null&&(o.unstable_strictMode===!0&&(x=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(k=o.onUncaughtError),o.onCaughtError!==void 0&&(R=o.onCaughtError),o.onRecoverableError!==void 0&&(W=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(he=o.unstable_transitionCallbacks)),o=fy(s,1,!1,null,null,x,y,k,R,W,he,null),s[ra]=o.current,th(s),new bh(o)},b0.hydrateRoot=function(s,o,x){if(!l(s))throw Error(i(299));var y=!1,k="",R=L1,W=P1,he=z1,Te=null,We=null;return x!=null&&(x.unstable_strictMode===!0&&(y=!0),x.identifierPrefix!==void 0&&(k=x.identifierPrefix),x.onUncaughtError!==void 0&&(R=x.onUncaughtError),x.onCaughtError!==void 0&&(W=x.onCaughtError),x.onRecoverableError!==void 0&&(he=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Te=x.unstable_transitionCallbacks),x.formState!==void 0&&(We=x.formState)),o=fy(s,1,!0,o,x??null,y,k,R,W,he,Te,We),o.context=xy(null),x=o.current,y=Ys(),y=zs(y),k=el(y),k.callback=null,tl(x,k,y),x=y,o.current.lanes=x,sr(o,x),Qn(o),s[ra]=o.current,th(s),new vu(o)},b0.version="19.1.1",b0}var Ry;function gk(){if(Ry)return Nh.exports;Ry=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Nh.exports=mk(),Nh.exports}var pk=gk();const yk=of(pk);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Oy="popstate";function bk(t={}){function a(i,l){let{pathname:d,search:f,hash:h}=i.location;return um("",{pathname:d,search:f,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(i,l){return typeof l=="string"?l:B0(l)}return wk(a,r,null,t)}function ia(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function Rn(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function vk(){return Math.random().toString(36).substring(2,10)}function Iy(t,a){return{usr:t.state,key:t.key,idx:a}}function um(t,a,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?wc(a):a,state:r,key:a&&a.key||i||vk()}}function B0({pathname:t="/",search:a="",hash:r=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function wc(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(a.search=t.substring(i),t=t.substring(0,i)),t&&(a.pathname=t)}return a}function wk(t,a,r,i={}){let{window:l=document.defaultView,v5Compat:d=!1}=i,f=l.history,h="POP",b=null,p=w();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function w(){return(f.state||{idx:null}).idx}function j(){h="POP";let I=w(),O=I==null?null:I-p;p=I,b&&b({action:h,location:A.location,delta:O})}function E(I,O){h="PUSH";let M=um(A.location,I,O);p=w()+1;let D=Iy(M,p),B=A.createHref(M);try{f.pushState(D,"",B)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;l.location.assign(B)}d&&b&&b({action:h,location:A.location,delta:1})}function _(I,O){h="REPLACE";let M=um(A.location,I,O);p=w();let D=Iy(M,p),B=A.createHref(M);f.replaceState(D,"",B),d&&b&&b({action:h,location:A.location,delta:0})}function T(I){return Nk(I)}let A={get action(){return h},get location(){return t(l,f)},listen(I){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(Oy,j),b=I,()=>{l.removeEventListener(Oy,j),b=null}},createHref(I){return a(l,I)},createURL:T,encodeLocation(I){let O=T(I);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:E,replace:_,go(I){return f.go(I)}};return A}function Nk(t,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),ia(r,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:B0(t);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function W2(t,a,r="/"){return kk(t,a,r,!1)}function kk(t,a,r,i){let l=typeof a=="string"?wc(a):a,d=Oi(l.pathname||"/",r);if(d==null)return null;let f=K2(t);jk(f);let h=null;for(let b=0;h==null&&b<f.length;++b){let p=Fk(d);h=Ok(f[b],p,i)}return h}function K2(t,a=[],r=[],i=""){let l=(d,f,h)=>{let b={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};b.relativePath.startsWith("/")&&(ia(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length));let p=Ti([i,b.relativePath]),w=r.concat(b);d.children&&d.children.length>0&&(ia(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),K2(d.children,a,w,p)),!(d.path==null&&!d.index)&&a.push({path:p,score:Dk(p,d.index),routesMeta:w})};return t.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))l(d,f);else for(let h of Z2(d.path))l(d,f,h)}),a}function Z2(t){let a=t.split("/");if(a.length===0)return[];let[r,...i]=a,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(i.length===0)return l?[d,""]:[d];let f=Z2(i.join("/")),h=[];return h.push(...f.map(b=>b===""?d:[d,b].join("/"))),l&&h.push(...f),h.map(b=>t.startsWith("/")&&b===""?"/":b)}function jk(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:Rk(a.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Ck=/^:[\w-]+$/,Ek=3,_k=2,Ak=1,Sk=10,Tk=-2,Fy=t=>t==="*";function Dk(t,a){let r=t.split("/"),i=r.length;return r.some(Fy)&&(i+=Tk),a&&(i+=_k),r.filter(l=>!Fy(l)).reduce((l,d)=>l+(Ck.test(d)?Ek:d===""?Ak:Sk),i)}function Rk(t,a){return t.length===a.length&&t.slice(0,-1).every((i,l)=>i===a[l])?t[t.length-1]-a[a.length-1]:0}function Ok(t,a,r=!1){let{routesMeta:i}=t,l={},d="/",f=[];for(let h=0;h<i.length;++h){let b=i[h],p=h===i.length-1,w=d==="/"?a:a.slice(d.length)||"/",j=zu({path:b.relativePath,caseSensitive:b.caseSensitive,end:p},w),E=b.route;if(!j&&p&&r&&!i[i.length-1].route.index&&(j=zu({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},w)),!j)return null;Object.assign(l,j.params),f.push({params:l,pathname:Ti([d,j.pathname]),pathnameBase:Pk(Ti([d,j.pathnameBase])),route:E}),j.pathnameBase!=="/"&&(d=Ti([d,j.pathnameBase]))}return f}function zu(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=Ik(t.path,t.caseSensitive,t.end),l=a.match(r);if(!l)return null;let d=l[0],f=d.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:i.reduce((p,{paramName:w,isOptional:j},E)=>{if(w==="*"){let T=h[E]||"";f=d.slice(0,d.length-T.length).replace(/(.)\/+$/,"$1")}const _=h[E];return j&&!_?p[w]=void 0:p[w]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:t}}function Ik(t,a=!1,r=!0){Rn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,b)=>(i.push({paramName:h,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),i]}function Fk(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return Rn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function Oi(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function Mk(t,a="/"){let{pathname:r,search:i="",hash:l=""}=typeof t=="string"?wc(t):t;return{pathname:r?r.startsWith("/")?r:Bk(r,a):a,search:zk(i),hash:Uk(l)}}function Bk(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Eh(t,a,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lk(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function Q2(t){let a=Lk(t);return a.map((r,i)=>i===a.length-1?r.pathname:r.pathnameBase)}function J2(t,a,r,i=!1){let l;typeof t=="string"?l=wc(t):(l={...t},ia(!l.pathname||!l.pathname.includes("?"),Eh("?","pathname","search",l)),ia(!l.pathname||!l.pathname.includes("#"),Eh("#","pathname","hash",l)),ia(!l.search||!l.search.includes("#"),Eh("#","search","hash",l)));let d=t===""||l.pathname==="",f=d?"/":l.pathname,h;if(f==null)h=r;else{let j=a.length-1;if(!i&&f.startsWith("..")){let E=f.split("/");for(;E[0]==="..";)E.shift(),j-=1;l.pathname=E.join("/")}h=j>=0?a[j]:"/"}let b=Mk(l,h),p=f&&f!=="/"&&f.endsWith("/"),w=(d||f===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(p||w)&&(b.pathname+="/"),b}var Ti=t=>t.join("/").replace(/\/\/+/g,"/"),Pk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var ev=["POST","PUT","PATCH","DELETE"];new Set(ev);var Vk=["GET",...ev];new Set(Vk);var Nc=C.createContext(null);Nc.displayName="DataRouter";var cf=C.createContext(null);cf.displayName="DataRouterState";C.createContext(!1);var tv=C.createContext({isTransitioning:!1});tv.displayName="ViewTransition";var Gk=C.createContext(new Map);Gk.displayName="Fetchers";var Xk=C.createContext(null);Xk.displayName="Await";var ii=C.createContext(null);ii.displayName="Navigation";var J0=C.createContext(null);J0.displayName="Location";var li=C.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var Xm=C.createContext(null);Xm.displayName="RouteError";function qk(t,{relative:a}={}){ia(ed(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=C.useContext(ii),{hash:l,pathname:d,search:f}=td(t,{relative:a}),h=d;return r!=="/"&&(h=d==="/"?r:Ti([r,d])),i.createHref({pathname:h,search:f,hash:l})}function ed(){return C.useContext(J0)!=null}function Fn(){return ia(ed(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(J0).location}var rv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function av(t){C.useContext(ii).static||C.useLayoutEffect(t)}function gr(){let{isDataRoute:t}=C.useContext(li);return t?n3():$k()}function $k(){ia(ed(),"useNavigate() may be used only in the context of a <Router> component.");let t=C.useContext(Nc),{basename:a,navigator:r}=C.useContext(ii),{matches:i}=C.useContext(li),{pathname:l}=Fn(),d=JSON.stringify(Q2(i)),f=C.useRef(!1);return av(()=>{f.current=!0}),C.useCallback((b,p={})=>{if(Rn(f.current,rv),!f.current)return;if(typeof b=="number"){r.go(b);return}let w=J2(b,JSON.parse(d),l,p.relative==="path");t==null&&a!=="/"&&(w.pathname=w.pathname==="/"?a:Ti([a,w.pathname])),(p.replace?r.replace:r.push)(w,p.state,p)},[a,r,d,l,t])}C.createContext(null);function pn(){let{matches:t}=C.useContext(li),a=t[t.length-1];return a?a.params:{}}function td(t,{relative:a}={}){let{matches:r}=C.useContext(li),{pathname:i}=Fn(),l=JSON.stringify(Q2(r));return C.useMemo(()=>J2(t,JSON.parse(l),i,a==="path"),[t,l,i,a])}function Yk(t,a){return sv(t,a)}function sv(t,a,r,i){ia(ed(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=C.useContext(ii),{matches:d}=C.useContext(li),f=d[d.length-1],h=f?f.params:{},b=f?f.pathname:"/",p=f?f.pathnameBase:"/",w=f&&f.route;{let O=w&&w.path||"";nv(b,!w||O.endsWith("*")||O.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${O}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${O}"> to <Route path="${O==="/"?"*":`${O}/*`}">.`)}let j=Fn(),E;if(a){let O=typeof a=="string"?wc(a):a;ia(p==="/"||O.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${O.pathname}" was given in the \`location\` prop.`),E=O}else E=j;let _=E.pathname||"/",T=_;if(p!=="/"){let O=p.replace(/^\//,"").split("/");T="/"+_.replace(/^\//,"").split("/").slice(O.length).join("/")}let A=W2(t,{pathname:T});Rn(w||A!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Rn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=Jk(A&&A.map(O=>Object.assign({},O,{params:Object.assign({},h,O.params),pathname:Ti([p,l.encodeLocation?l.encodeLocation(O.pathname).pathname:O.pathname]),pathnameBase:O.pathnameBase==="/"?p:Ti([p,l.encodeLocation?l.encodeLocation(O.pathnameBase).pathname:O.pathnameBase])})),d,r,i);return a&&I?C.createElement(J0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},I):I}function Wk(){let t=s3(),a=Hk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:d},"ErrorBoundary")," or"," ",C.createElement("code",{style:d},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},a),r?C.createElement("pre",{style:l},r):null,f)}var Kk=C.createElement(Wk,null),Zk=class extends C.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?C.createElement(li.Provider,{value:this.props.routeContext},C.createElement(Xm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qk({routeContext:t,match:a,children:r}){let i=C.useContext(Nc);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),C.createElement(li.Provider,{value:t},r)}function Jk(t,a=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,d=r?.errors;if(d!=null){let b=l.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);ia(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let f=!1,h=-1;if(r)for(let b=0;b<l.length;b++){let p=l[b];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=b),p.route.id){let{loaderData:w,errors:j}=r,E=p.route.loader&&!w.hasOwnProperty(p.route.id)&&(!j||j[p.route.id]===void 0);if(p.route.lazy||E){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((b,p,w)=>{let j,E=!1,_=null,T=null;r&&(j=d&&p.route.id?d[p.route.id]:void 0,_=p.route.errorElement||Kk,f&&(h<0&&w===0?(nv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,T=null):h===w&&(E=!0,T=p.route.hydrateFallbackElement||null)));let A=a.concat(l.slice(0,w+1)),I=()=>{let O;return j?O=_:E?O=T:p.route.Component?O=C.createElement(p.route.Component,null):p.route.element?O=p.route.element:O=b,C.createElement(Qk,{match:p,routeContext:{outlet:b,matches:A,isDataRoute:r!=null},children:O})};return r&&(p.route.ErrorBoundary||p.route.errorElement||w===0)?C.createElement(Zk,{location:r.location,revalidation:r.revalidation,component:_,error:j,children:I(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):I()},null)}function qm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e3(t){let a=C.useContext(Nc);return ia(a,qm(t)),a}function t3(t){let a=C.useContext(cf);return ia(a,qm(t)),a}function r3(t){let a=C.useContext(li);return ia(a,qm(t)),a}function $m(t){let a=r3(t),r=a.matches[a.matches.length-1];return ia(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function a3(){return $m("useRouteId")}function s3(){let t=C.useContext(Xm),a=t3("useRouteError"),r=$m("useRouteError");return t!==void 0?t:a.errors?.[r]}function n3(){let{router:t}=e3("useNavigate"),a=$m("useNavigate"),r=C.useRef(!1);return av(()=>{r.current=!0}),C.useCallback(async(l,d={})=>{Rn(r.current,rv),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:a,...d}))},[t,a])}var My={};function nv(t,a,r){!a&&!My[t]&&(My[t]=!0,Rn(!1,r))}C.memo(i3);function i3({routes:t,future:a,state:r}){return sv(t,void 0,r,a)}function Xt(t){ia(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l3({basename:t="/",children:a=null,location:r,navigationType:i="POP",navigator:l,static:d=!1}){ia(!ed(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),h=C.useMemo(()=>({basename:f,navigator:l,static:d,future:{}}),[f,l,d]);typeof r=="string"&&(r=wc(r));let{pathname:b="/",search:p="",hash:w="",state:j=null,key:E="default"}=r,_=C.useMemo(()=>{let T=Oi(b,f);return T==null?null:{location:{pathname:T,search:p,hash:w,state:j,key:E},navigationType:i}},[f,b,p,w,j,E,i]);return Rn(_!=null,`<Router basename="${f}"> is not able to match the URL "${b}${p}${w}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:C.createElement(ii.Provider,{value:h},C.createElement(J0.Provider,{children:a,value:_}))}function o3({children:t,location:a}){return Yk(fm(t),a)}function fm(t,a=[]){let r=[];return C.Children.forEach(t,(i,l)=>{if(!C.isValidElement(i))return;let d=[...a,l];if(i.type===C.Fragment){r.push.apply(r,fm(i.props.children,d));return}ia(i.type===Xt,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ia(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=fm(i.props.children,d)),r.push(f)}),r}var Iu="get",Fu="application/x-www-form-urlencoded";function df(t){return t!=null&&typeof t.tagName=="string"}function c3(t){return df(t)&&t.tagName.toLowerCase()==="button"}function d3(t){return df(t)&&t.tagName.toLowerCase()==="form"}function u3(t){return df(t)&&t.tagName.toLowerCase()==="input"}function f3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x3(t,a){return t.button===0&&(!a||a==="_self")&&!f3(t)}function xm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let i=t[r];return a.concat(Array.isArray(i)?i.map(l=>[r,l]):[[r,i]])},[]))}function h3(t,a){let r=xm(t);return a&&a.forEach((i,l)=>{r.has(l)||a.getAll(l).forEach(d=>{r.append(l,d)})}),r}var ku=null;function m3(){if(ku===null)try{new FormData(document.createElement("form"),0),ku=!1}catch{ku=!0}return ku}var g3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _h(t){return t!=null&&!g3.has(t)?(Rn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Fu}"`),null):t}function p3(t,a){let r,i,l,d,f;if(d3(t)){let h=t.getAttribute("action");i=h?Oi(h,a):null,r=t.getAttribute("method")||Iu,l=_h(t.getAttribute("enctype"))||Fu,d=new FormData(t)}else if(c3(t)||u3(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||h.getAttribute("action");if(i=b?Oi(b,a):null,r=t.getAttribute("formmethod")||h.getAttribute("method")||Iu,l=_h(t.getAttribute("formenctype"))||_h(h.getAttribute("enctype"))||Fu,d=new FormData(h,t),!m3()){let{name:p,type:w,value:j}=t;if(w==="image"){let E=p?`${p}.`:"";d.append(`${E}x`,"0"),d.append(`${E}y`,"0")}else p&&d.append(p,j)}}else{if(df(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Iu,i=null,l=Fu,f=t}return d&&l==="text/plain"&&(f=d,d=void 0),{action:i,method:r.toLowerCase(),encType:l,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ym(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function y3(t,a,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${r}`:a&&Oi(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function b3(t,a){if(t.id in a)return a[t.id];try{let r=await import(t.module);return a[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function v3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function w3(t,a,r){let i=await Promise.all(t.map(async l=>{let d=a.routes[l.route.id];if(d){let f=await b3(d,r);return f.links?f.links():[]}return[]}));return C3(i.flat(1).filter(v3).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function By(t,a,r,i,l,d){let f=(b,p)=>r[p]?b.route.id!==r[p].route.id:!0,h=(b,p)=>r[p].pathname!==b.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==b.params["*"];return d==="assets"?a.filter((b,p)=>f(b,p)||h(b,p)):d==="data"?a.filter((b,p)=>{let w=i.routes[b.route.id];if(!w||!w.hasLoader)return!1;if(f(b,p)||h(b,p))return!0;if(b.route.shouldRevalidate){let j=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function N3(t,a,{includeHydrateFallback:r}={}){return k3(t.map(i=>{let l=a.routes[i.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function k3(t){return[...new Set(t)]}function j3(t){let a={},r=Object.keys(t).sort();for(let i of r)a[i]=t[i];return a}function C3(t,a){let r=new Set;return new Set(a),t.reduce((i,l)=>{let d=JSON.stringify(j3(l));return r.has(d)||(r.add(d),i.push({key:d,link:l})),i},[])}function iv(){let t=C.useContext(Nc);return Ym(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function E3(){let t=C.useContext(cf);return Ym(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Wm=C.createContext(void 0);Wm.displayName="FrameworkContext";function lv(){let t=C.useContext(Wm);return Ym(t,"You must render this element inside a <HydratedRouter> element"),t}function _3(t,a){let r=C.useContext(Wm),[i,l]=C.useState(!1),[d,f]=C.useState(!1),{onFocus:h,onBlur:b,onMouseEnter:p,onMouseLeave:w,onTouchStart:j}=a,E=C.useRef(null);C.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=O=>{O.forEach(M=>{f(M.isIntersecting)})},I=new IntersectionObserver(A,{threshold:.5});return E.current&&I.observe(E.current),()=>{I.disconnect()}}},[t]),C.useEffect(()=>{if(i){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[i]);let _=()=>{l(!0)},T=()=>{l(!1),f(!1)};return r?t!=="intent"?[d,E,{}]:[d,E,{onFocus:v0(h,_),onBlur:v0(b,T),onMouseEnter:v0(p,_),onMouseLeave:v0(w,T),onTouchStart:v0(j,_)}]:[!1,E,{}]}function v0(t,a){return r=>{t&&t(r),r.defaultPrevented||a(r)}}function A3({page:t,...a}){let{router:r}=iv(),i=C.useMemo(()=>W2(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?C.createElement(T3,{page:t,matches:i,...a}):null}function S3(t){let{manifest:a,routeModules:r}=lv(),[i,l]=C.useState([]);return C.useEffect(()=>{let d=!1;return w3(t,a,r).then(f=>{d||l(f)}),()=>{d=!0}},[t,a,r]),i}function T3({page:t,matches:a,...r}){let i=Fn(),{manifest:l,routeModules:d}=lv(),{basename:f}=iv(),{loaderData:h,matches:b}=E3(),p=C.useMemo(()=>By(t,a,b,l,i,"data"),[t,a,b,l,i]),w=C.useMemo(()=>By(t,a,b,l,i,"assets"),[t,a,b,l,i]),j=C.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let T=new Set,A=!1;if(a.forEach(O=>{let M=l.routes[O.route.id];!M||!M.hasLoader||(!p.some(D=>D.route.id===O.route.id)&&O.route.id in h&&d[O.route.id]?.shouldRevalidate||M.hasClientLoader?A=!0:T.add(O.route.id))}),T.size===0)return[];let I=y3(t,f,"data");return A&&T.size>0&&I.searchParams.set("_routes",a.filter(O=>T.has(O.route.id)).map(O=>O.route.id).join(",")),[I.pathname+I.search]},[f,h,i,l,p,a,t,d]),E=C.useMemo(()=>N3(w,l),[w,l]),_=S3(w);return C.createElement(C.Fragment,null,j.map(T=>C.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...r})),E.map(T=>C.createElement("link",{key:T,rel:"modulepreload",href:T,...r})),_.map(({key:T,link:A})=>C.createElement("link",{key:T,nonce:r.nonce,...A})))}function D3(...t){return a=>{t.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var ov=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ov&&(window.__reactRouterVersion="7.8.0")}catch{}function R3({basename:t,children:a,window:r}){let i=C.useRef();i.current==null&&(i.current=bk({window:r,v5Compat:!0}));let l=i.current,[d,f]=C.useState({action:l.action,location:l.location}),h=C.useCallback(b=>{C.startTransition(()=>f(b))},[f]);return C.useLayoutEffect(()=>l.listen(h),[l,h]),C.createElement(l3,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:l})}var cv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ro=C.forwardRef(function({onClick:a,discover:r="render",prefetch:i="none",relative:l,reloadDocument:d,replace:f,state:h,target:b,to:p,preventScrollReset:w,viewTransition:j,...E},_){let{basename:T}=C.useContext(ii),A=typeof p=="string"&&cv.test(p),I,O=!1;if(typeof p=="string"&&A&&(I=p,ov))try{let U=new URL(window.location.href),Z=p.startsWith("//")?new URL(U.protocol+p):new URL(p),ae=Oi(Z.pathname,T);Z.origin===U.origin&&ae!=null?p=ae+Z.search+Z.hash:O=!0}catch{Rn(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=qk(p,{relative:l}),[D,B,H]=_3(i,E),z=F3(p,{replace:f,state:h,target:b,preventScrollReset:w,relative:l,viewTransition:j});function L(U){a&&a(U),U.defaultPrevented||z(U)}let P=C.createElement("a",{...E,...H,href:I||M,onClick:O||d?a:L,ref:D3(_,B),target:b,"data-discover":!A&&r==="render"?"true":void 0});return D&&!A?C.createElement(C.Fragment,null,P,C.createElement(A3,{page:M})):P});ro.displayName="Link";var hm=C.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:i="",end:l=!1,style:d,to:f,viewTransition:h,children:b,...p},w){let j=td(f,{relative:p.relative}),E=Fn(),_=C.useContext(cf),{navigator:T,basename:A}=C.useContext(ii),I=_!=null&&z3(j)&&h===!0,O=T.encodeLocation?T.encodeLocation(j).pathname:j.pathname,M=E.pathname,D=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(M=M.toLowerCase(),D=D?D.toLowerCase():null,O=O.toLowerCase()),D&&A&&(D=Oi(D,A)||D);const B=O!=="/"&&O.endsWith("/")?O.length-1:O.length;let H=M===O||!l&&M.startsWith(O)&&M.charAt(B)==="/",z=D!=null&&(D===O||!l&&D.startsWith(O)&&D.charAt(O.length)==="/"),L={isActive:H,isPending:z,isTransitioning:I},P=H?a:void 0,U;typeof i=="function"?U=i(L):U=[i,H?"active":null,z?"pending":null,I?"transitioning":null].filter(Boolean).join(" ");let Z=typeof d=="function"?d(L):d;return C.createElement(ro,{...p,"aria-current":P,className:U,ref:w,style:Z,to:f,viewTransition:h},typeof b=="function"?b(L):b)});hm.displayName="NavLink";var O3=C.forwardRef(({discover:t="render",fetcherKey:a,navigate:r,reloadDocument:i,replace:l,state:d,method:f=Iu,action:h,onSubmit:b,relative:p,preventScrollReset:w,viewTransition:j,...E},_)=>{let T=L3(),A=P3(h,{relative:p}),I=f.toLowerCase()==="get"?"get":"post",O=typeof h=="string"&&cv.test(h),M=D=>{if(b&&b(D),D.defaultPrevented)return;D.preventDefault();let B=D.nativeEvent.submitter,H=B?.getAttribute("formmethod")||f;T(B||D.currentTarget,{fetcherKey:a,method:H,navigate:r,replace:l,state:d,relative:p,preventScrollReset:w,viewTransition:j})};return C.createElement("form",{ref:_,method:I,action:A,onSubmit:i?b:M,...E,"data-discover":!O&&t==="render"?"true":void 0})});O3.displayName="Form";function I3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function dv(t){let a=C.useContext(Nc);return ia(a,I3(t)),a}function F3(t,{target:a,replace:r,state:i,preventScrollReset:l,relative:d,viewTransition:f}={}){let h=gr(),b=Fn(),p=td(t,{relative:d});return C.useCallback(w=>{if(x3(w,a)){w.preventDefault();let j=r!==void 0?r:B0(b)===B0(p);h(t,{replace:j,state:i,preventScrollReset:l,relative:d,viewTransition:f})}},[b,h,p,r,i,a,t,l,d,f])}function rd(t){Rn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=C.useRef(xm(t)),r=C.useRef(!1),i=Fn(),l=C.useMemo(()=>h3(i.search,r.current?null:a.current),[i.search]),d=gr(),f=C.useCallback((h,b)=>{const p=xm(typeof h=="function"?h(new URLSearchParams(l)):h);r.current=!0,d("?"+p,b)},[d,l]);return[l,f]}var M3=0,B3=()=>`__${String(++M3)}__`;function L3(){let{router:t}=dv("useSubmit"),{basename:a}=C.useContext(ii),r=a3();return C.useCallback(async(i,l={})=>{let{action:d,method:f,encType:h,formData:b,body:p}=p3(i,a);if(l.navigate===!1){let w=l.fetcherKey||B3();await t.fetch(w,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:p,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await t.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:p,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,a,r])}function P3(t,{relative:a}={}){let{basename:r}=C.useContext(ii),i=C.useContext(li);ia(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),d={...td(t||".",{relative:a})},f=Fn();if(t==null){d.search=f.search;let h=new URLSearchParams(d.search),b=h.getAll("index");if(b.some(w=>w==="")){h.delete("index"),b.filter(j=>j).forEach(j=>h.append("index",j));let w=h.toString();d.search=w?`?${w}`:""}}return(!t||t===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:Ti([r,d.pathname])),B0(d)}function z3(t,{relative:a}={}){let r=C.useContext(tv);ia(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=dv("useViewTransitionState"),l=td(t,{relative:a});if(!r.isTransitioning)return!1;let d=Oi(r.currentLocation.pathname,i)||r.currentLocation.pathname,f=Oi(r.nextLocation.pathname,i)||r.nextLocation.pathname;return zu(l.pathname,f)!=null||zu(l.pathname,d)!=null}function U3(){const t=gr(),a=()=>{t("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 md:top-6 md:right-6 flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 z-10",children:e.jsx("button",{onClick:()=>t("/login"),className:"signInSignUp text-xs sm:text-sm md:text-base px-3 py-2 sm:px-4 sm:py-2 md:px-6 md:py-3 whitespace-nowrap",children:"Login In"})}),e.jsxs("div",{className:"welcomeCard mx-3 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-20 h-20 sm:w-28 sm:h-28 md:w-36 md:h-36 lg:w-44 lg:h-44 mx-auto mb-4 sm:mb-5 md:mb-6"}),e.jsxs("h1",{className:"welcomeTitle text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl mb-3 sm:mb-4 md:mb-5",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300 block sm:inline",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-7 md:mb-8 px-2 sm:px-4 md:px-0",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8 md:mb-10",children:[e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Resident Records"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Role Management"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Maintenance Requests"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Announcements"})]})]}),e.jsx("button",{className:"welcomeButton text-sm sm:text-base md:text-lg font-bold py-3 px-6 sm:py-3 sm:px-8 md:py-4 md:px-10 rounded-lg shadow-lg hover:scale-105 transition-transform duration-300",onClick:a,children:" Get Started"}),e.jsx("div",{className:"mt-4 sm:mt-6 text-xs sm:text-sm text-white/70 text-center block sm:hidden",children:" Tap buttons above to sign in or create account"})]}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/20 pointer-events-none"})]})}function uv(t,a){return function(){return t.apply(a,arguments)}}const{toString:H3}=Object.prototype,{getPrototypeOf:Km}=Object,{iterator:uf,toStringTag:fv}=Symbol,ff=(t=>a=>{const r=H3.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Mn=t=>(t=t.toLowerCase(),a=>ff(a)===t),xf=t=>a=>typeof a===t,{isArray:kc}=Array,L0=xf("undefined");function ad(t){return t!==null&&!L0(t)&&t.constructor!==null&&!L0(t.constructor)&&Bs(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const xv=Mn("ArrayBuffer");function V3(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&xv(t.buffer),a}const G3=xf("string"),Bs=xf("function"),hv=xf("number"),sd=t=>t!==null&&typeof t=="object",X3=t=>t===!0||t===!1,Mu=t=>{if(ff(t)!=="object")return!1;const a=Km(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(fv in t)&&!(uf in t)},q3=t=>{if(!sd(t)||ad(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},$3=Mn("Date"),Y3=Mn("File"),W3=Mn("Blob"),K3=Mn("FileList"),Z3=t=>sd(t)&&Bs(t.pipe),Q3=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Bs(t.append)&&((a=ff(t))==="formdata"||a==="object"&&Bs(t.toString)&&t.toString()==="[object FormData]"))},J3=Mn("URLSearchParams"),[ej,tj,rj,aj]=["ReadableStream","Request","Response","Headers"].map(Mn),sj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function nd(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,l;if(typeof t!="object"&&(t=[t]),kc(t))for(i=0,l=t.length;i<l;i++)a.call(null,t[i],i,t);else{if(ad(t))return;const d=r?Object.getOwnPropertyNames(t):Object.keys(t),f=d.length;let h;for(i=0;i<f;i++)h=d[i],a.call(null,t[h],h,t)}}function mv(t,a){if(ad(t))return null;a=a.toLowerCase();const r=Object.keys(t);let i=r.length,l;for(;i-- >0;)if(l=r[i],a===l.toLowerCase())return l;return null}const ao=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gv=t=>!L0(t)&&t!==ao;function mm(){const{caseless:t}=gv(this)&&this||{},a={},r=(i,l)=>{const d=t&&mv(a,l)||l;Mu(a[d])&&Mu(i)?a[d]=mm(a[d],i):Mu(i)?a[d]=mm({},i):kc(i)?a[d]=i.slice():a[d]=i};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&nd(arguments[i],r);return a}const nj=(t,a,r,{allOwnKeys:i}={})=>(nd(a,(l,d)=>{r&&Bs(l)?t[d]=uv(l,r):t[d]=l},{allOwnKeys:i}),t),ij=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lj=(t,a,r,i)=>{t.prototype=Object.create(a.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},oj=(t,a,r,i)=>{let l,d,f;const h={};if(a=a||{},t==null)return a;do{for(l=Object.getOwnPropertyNames(t),d=l.length;d-- >0;)f=l[d],(!i||i(f,t,a))&&!h[f]&&(a[f]=t[f],h[f]=!0);t=r!==!1&&Km(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},cj=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const i=t.indexOf(a,r);return i!==-1&&i===r},dj=t=>{if(!t)return null;if(kc(t))return t;let a=t.length;if(!hv(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},uj=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Km(Uint8Array)),fj=(t,a)=>{const i=(t&&t[uf]).call(t);let l;for(;(l=i.next())&&!l.done;){const d=l.value;a.call(t,d[0],d[1])}},xj=(t,a)=>{let r;const i=[];for(;(r=t.exec(a))!==null;)i.push(r);return i},hj=Mn("HTMLFormElement"),mj=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,l){return i.toUpperCase()+l}),Ly=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),gj=Mn("RegExp"),pv=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),i={};nd(r,(l,d)=>{let f;(f=a(l,d,t))!==!1&&(i[d]=f||l)}),Object.defineProperties(t,i)},pj=t=>{pv(t,(a,r)=>{if(Bs(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(Bs(i)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},yj=(t,a)=>{const r={},i=l=>{l.forEach(d=>{r[d]=!0})};return kc(t)?i(t):i(String(t).split(a)),r},bj=()=>{},vj=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function wj(t){return!!(t&&Bs(t.append)&&t[fv]==="FormData"&&t[uf])}const Nj=t=>{const a=new Array(10),r=(i,l)=>{if(sd(i)){if(a.indexOf(i)>=0)return;if(ad(i))return i;if(!("toJSON"in i)){a[l]=i;const d=kc(i)?[]:{};return nd(i,(f,h)=>{const b=r(f,l+1);!L0(b)&&(d[h]=b)}),a[l]=void 0,d}}return i};return r(t,0)},kj=Mn("AsyncFunction"),jj=t=>t&&(sd(t)||Bs(t))&&Bs(t.then)&&Bs(t.catch),yv=((t,a)=>t?setImmediate:a?((r,i)=>(ao.addEventListener("message",({source:l,data:d})=>{l===ao&&d===r&&i.length&&i.shift()()},!1),l=>{i.push(l),ao.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Bs(ao.postMessage)),Cj=typeof queueMicrotask<"u"?queueMicrotask.bind(ao):typeof process<"u"&&process.nextTick||yv,Ej=t=>t!=null&&Bs(t[uf]),st={isArray:kc,isArrayBuffer:xv,isBuffer:ad,isFormData:Q3,isArrayBufferView:V3,isString:G3,isNumber:hv,isBoolean:X3,isObject:sd,isPlainObject:Mu,isEmptyObject:q3,isReadableStream:ej,isRequest:tj,isResponse:rj,isHeaders:aj,isUndefined:L0,isDate:$3,isFile:Y3,isBlob:W3,isRegExp:gj,isFunction:Bs,isStream:Z3,isURLSearchParams:J3,isTypedArray:uj,isFileList:K3,forEach:nd,merge:mm,extend:nj,trim:sj,stripBOM:ij,inherits:lj,toFlatObject:oj,kindOf:ff,kindOfTest:Mn,endsWith:cj,toArray:dj,forEachEntry:fj,matchAll:xj,isHTMLForm:hj,hasOwnProperty:Ly,hasOwnProp:Ly,reduceDescriptors:pv,freezeMethods:pj,toObjectSet:yj,toCamelCase:mj,noop:bj,toFiniteNumber:vj,findKey:mv,global:ao,isContextDefined:gv,isSpecCompliantForm:wj,toJSONObject:Nj,isAsyncFn:kj,isThenable:jj,setImmediate:yv,asap:Cj,isIterable:Ej};function ar(t,a,r,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}st.inherits(ar,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:st.toJSONObject(this.config),code:this.code,status:this.status}}});const bv=ar.prototype,vv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{vv[t]={value:t}});Object.defineProperties(ar,vv);Object.defineProperty(bv,"isAxiosError",{value:!0});ar.from=(t,a,r,i,l,d)=>{const f=Object.create(bv);return st.toFlatObject(t,f,function(b){return b!==Error.prototype},h=>h!=="isAxiosError"),ar.call(f,t.message,a,r,i,l),f.cause=t,f.name=t.name,d&&Object.assign(f,d),f};const _j=null;function gm(t){return st.isPlainObject(t)||st.isArray(t)}function wv(t){return st.endsWith(t,"[]")?t.slice(0,-2):t}function Py(t,a,r){return t?t.concat(a).map(function(l,d){return l=wv(l),!r&&d?"["+l+"]":l}).join(r?".":""):a}function Aj(t){return st.isArray(t)&&!t.some(gm)}const Sj=st.toFlatObject(st,{},null,function(a){return/^is[A-Z]/.test(a)});function hf(t,a,r){if(!st.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=st.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,I){return!st.isUndefined(I[A])});const i=r.metaTokens,l=r.visitor||w,d=r.dots,f=r.indexes,b=(r.Blob||typeof Blob<"u"&&Blob)&&st.isSpecCompliantForm(a);if(!st.isFunction(l))throw new TypeError("visitor must be a function");function p(T){if(T===null)return"";if(st.isDate(T))return T.toISOString();if(st.isBoolean(T))return T.toString();if(!b&&st.isBlob(T))throw new ar("Blob is not supported. Use a Buffer instead.");return st.isArrayBuffer(T)||st.isTypedArray(T)?b&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function w(T,A,I){let O=T;if(T&&!I&&typeof T=="object"){if(st.endsWith(A,"{}"))A=i?A:A.slice(0,-2),T=JSON.stringify(T);else if(st.isArray(T)&&Aj(T)||(st.isFileList(T)||st.endsWith(A,"[]"))&&(O=st.toArray(T)))return A=wv(A),O.forEach(function(D,B){!(st.isUndefined(D)||D===null)&&a.append(f===!0?Py([A],B,d):f===null?A:A+"[]",p(D))}),!1}return gm(T)?!0:(a.append(Py(I,A,d),p(T)),!1)}const j=[],E=Object.assign(Sj,{defaultVisitor:w,convertValue:p,isVisitable:gm});function _(T,A){if(!st.isUndefined(T)){if(j.indexOf(T)!==-1)throw Error("Circular reference detected in "+A.join("."));j.push(T),st.forEach(T,function(O,M){(!(st.isUndefined(O)||O===null)&&l.call(a,O,st.isString(M)?M.trim():M,A,E))===!0&&_(O,A?A.concat(M):[M])}),j.pop()}}if(!st.isObject(t))throw new TypeError("data must be an object");return _(t),a}function zy(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return a[i]})}function Zm(t,a){this._pairs=[],t&&hf(t,this,a)}const Nv=Zm.prototype;Nv.append=function(a,r){this._pairs.push([a,r])};Nv.toString=function(a){const r=a?function(i){return a.call(this,i,zy)}:zy;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function Tj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function kv(t,a,r){if(!a)return t;const i=r&&r.encode||Tj;st.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let d;if(l?d=l(a,r):d=st.isURLSearchParams(a)?a.toString():new Zm(a,r).toString(i),d){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class Uy{constructor(){this.handlers=[]}use(a,r,i){return this.handlers.push({fulfilled:a,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){st.forEach(this.handlers,function(i){i!==null&&a(i)})}}const jv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Dj=typeof URLSearchParams<"u"?URLSearchParams:Zm,Rj=typeof FormData<"u"?FormData:null,Oj=typeof Blob<"u"?Blob:null,Ij={isBrowser:!0,classes:{URLSearchParams:Dj,FormData:Rj,Blob:Oj},protocols:["http","https","file","blob","url","data"]},Qm=typeof window<"u"&&typeof document<"u",pm=typeof navigator=="object"&&navigator||void 0,Fj=Qm&&(!pm||["ReactNative","NativeScript","NS"].indexOf(pm.product)<0),Mj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bj=Qm&&window.location.href||"http://localhost",Lj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qm,hasStandardBrowserEnv:Fj,hasStandardBrowserWebWorkerEnv:Mj,navigator:pm,origin:Bj},Symbol.toStringTag,{value:"Module"})),us={...Lj,...Ij};function Pj(t,a){return hf(t,new us.classes.URLSearchParams,{visitor:function(r,i,l,d){return us.isNode&&st.isBuffer(r)?(this.append(i,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function zj(t){return st.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function Uj(t){const a={},r=Object.keys(t);let i;const l=r.length;let d;for(i=0;i<l;i++)d=r[i],a[d]=t[d];return a}function Cv(t){function a(r,i,l,d){let f=r[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),b=d>=r.length;return f=!f&&st.isArray(l)?l.length:f,b?(st.hasOwnProp(l,f)?l[f]=[l[f],i]:l[f]=i,!h):((!l[f]||!st.isObject(l[f]))&&(l[f]=[]),a(r,i,l[f],d)&&st.isArray(l[f])&&(l[f]=Uj(l[f])),!h)}if(st.isFormData(t)&&st.isFunction(t.entries)){const r={};return st.forEachEntry(t,(i,l)=>{a(zj(i),l,r,0)}),r}return null}function Hj(t,a,r){if(st.isString(t))try{return(a||JSON.parse)(t),st.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const id={transitional:jv,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const i=r.getContentType()||"",l=i.indexOf("application/json")>-1,d=st.isObject(a);if(d&&st.isHTMLForm(a)&&(a=new FormData(a)),st.isFormData(a))return l?JSON.stringify(Cv(a)):a;if(st.isArrayBuffer(a)||st.isBuffer(a)||st.isStream(a)||st.isFile(a)||st.isBlob(a)||st.isReadableStream(a))return a;if(st.isArrayBufferView(a))return a.buffer;if(st.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Pj(a,this.formSerializer).toString();if((h=st.isFileList(a))||i.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return hf(h?{"files[]":a}:a,b&&new b,this.formSerializer)}}return d||l?(r.setContentType("application/json",!1),Hj(a)):a}],transformResponse:[function(a){const r=this.transitional||id.transitional,i=r&&r.forcedJSONParsing,l=this.responseType==="json";if(st.isResponse(a)||st.isReadableStream(a))return a;if(a&&st.isString(a)&&(i&&!this.responseType||l)){const f=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(a)}catch(h){if(f)throw h.name==="SyntaxError"?ar.from(h,ar.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:us.classes.FormData,Blob:us.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};st.forEach(["delete","get","head","post","put","patch"],t=>{id.headers[t]={}});const Vj=st.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gj=t=>{const a={};let r,i,l;return t&&t.split(`
`).forEach(function(f){l=f.indexOf(":"),r=f.substring(0,l).trim().toLowerCase(),i=f.substring(l+1).trim(),!(!r||a[r]&&Vj[r])&&(r==="set-cookie"?a[r]?a[r].push(i):a[r]=[i]:a[r]=a[r]?a[r]+", "+i:i)}),a},Hy=Symbol("internals");function w0(t){return t&&String(t).trim().toLowerCase()}function Bu(t){return t===!1||t==null?t:st.isArray(t)?t.map(Bu):String(t)}function Xj(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)a[i[1]]=i[2];return a}const qj=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ah(t,a,r,i,l){if(st.isFunction(i))return i.call(this,a,r);if(l&&(a=r),!!st.isString(a)){if(st.isString(i))return a.indexOf(i)!==-1;if(st.isRegExp(i))return i.test(a)}}function $j(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,i)=>r.toUpperCase()+i)}function Yj(t,a){const r=st.toCamelCase(" "+a);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(l,d,f){return this[i].call(this,a,l,d,f)},configurable:!0})})}let Ls=class{constructor(a){a&&this.set(a)}set(a,r,i){const l=this;function d(h,b,p){const w=w0(b);if(!w)throw new Error("header name must be a non-empty string");const j=st.findKey(l,w);(!j||l[j]===void 0||p===!0||p===void 0&&l[j]!==!1)&&(l[j||b]=Bu(h))}const f=(h,b)=>st.forEach(h,(p,w)=>d(p,w,b));if(st.isPlainObject(a)||a instanceof this.constructor)f(a,r);else if(st.isString(a)&&(a=a.trim())&&!qj(a))f(Gj(a),r);else if(st.isObject(a)&&st.isIterable(a)){let h={},b,p;for(const w of a){if(!st.isArray(w))throw TypeError("Object iterator must return a key-value pair");h[p=w[0]]=(b=h[p])?st.isArray(b)?[...b,w[1]]:[b,w[1]]:w[1]}f(h,r)}else a!=null&&d(r,a,i);return this}get(a,r){if(a=w0(a),a){const i=st.findKey(this,a);if(i){const l=this[i];if(!r)return l;if(r===!0)return Xj(l);if(st.isFunction(r))return r.call(this,l,i);if(st.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=w0(a),a){const i=st.findKey(this,a);return!!(i&&this[i]!==void 0&&(!r||Ah(this,this[i],i,r)))}return!1}delete(a,r){const i=this;let l=!1;function d(f){if(f=w0(f),f){const h=st.findKey(i,f);h&&(!r||Ah(i,i[h],h,r))&&(delete i[h],l=!0)}}return st.isArray(a)?a.forEach(d):d(a),l}clear(a){const r=Object.keys(this);let i=r.length,l=!1;for(;i--;){const d=r[i];(!a||Ah(this,this[d],d,a,!0))&&(delete this[d],l=!0)}return l}normalize(a){const r=this,i={};return st.forEach(this,(l,d)=>{const f=st.findKey(i,d);if(f){r[f]=Bu(l),delete r[d];return}const h=a?$j(d):String(d).trim();h!==d&&delete r[d],r[h]=Bu(l),i[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return st.forEach(this,(i,l)=>{i!=null&&i!==!1&&(r[l]=a&&st.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const i=new this(a);return r.forEach(l=>i.set(l)),i}static accessor(a){const i=(this[Hy]=this[Hy]={accessors:{}}).accessors,l=this.prototype;function d(f){const h=w0(f);i[h]||(Yj(l,f),i[h]=!0)}return st.isArray(a)?a.forEach(d):d(a),this}};Ls.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);st.reduceDescriptors(Ls.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(i){this[r]=i}}});st.freezeMethods(Ls);function Sh(t,a){const r=this||id,i=a||r,l=Ls.from(i.headers);let d=i.data;return st.forEach(t,function(h){d=h.call(r,d,l.normalize(),a?a.status:void 0)}),l.normalize(),d}function Ev(t){return!!(t&&t.__CANCEL__)}function jc(t,a,r){ar.call(this,t??"canceled",ar.ERR_CANCELED,a,r),this.name="CanceledError"}st.inherits(jc,ar,{__CANCEL__:!0});function _v(t,a,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):a(new ar("Request failed with status code "+r.status,[ar.ERR_BAD_REQUEST,ar.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Wj(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function Kj(t,a){t=t||10;const r=new Array(t),i=new Array(t);let l=0,d=0,f;return a=a!==void 0?a:1e3,function(b){const p=Date.now(),w=i[d];f||(f=p),r[l]=b,i[l]=p;let j=d,E=0;for(;j!==l;)E+=r[j++],j=j%t;if(l=(l+1)%t,l===d&&(d=(d+1)%t),p-f<a)return;const _=w&&p-w;return _?Math.round(E*1e3/_):void 0}}function Zj(t,a){let r=0,i=1e3/a,l,d;const f=(p,w=Date.now())=>{r=w,l=null,d&&(clearTimeout(d),d=null),t(...p)};return[(...p)=>{const w=Date.now(),j=w-r;j>=i?f(p,w):(l=p,d||(d=setTimeout(()=>{d=null,f(l)},i-j)))},()=>l&&f(l)]}const Uu=(t,a,r=3)=>{let i=0;const l=Kj(50,250);return Zj(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,b=f-i,p=l(b),w=f<=h;i=f;const j={loaded:f,total:h,progress:h?f/h:void 0,bytes:b,rate:p||void 0,estimated:p&&h&&w?(h-f)/p:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};t(j)},r)},Vy=(t,a)=>{const r=t!=null;return[i=>a[0]({lengthComputable:r,total:t,loaded:i}),a[1]]},Gy=t=>(...a)=>st.asap(()=>t(...a)),Qj=us.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,us.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(us.origin),us.navigator&&/(msie|trident)/i.test(us.navigator.userAgent)):()=>!0,Jj=us.hasStandardBrowserEnv?{write(t,a,r,i,l,d){const f=[t+"="+encodeURIComponent(a)];st.isNumber(r)&&f.push("expires="+new Date(r).toGMTString()),st.isString(i)&&f.push("path="+i),st.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function e6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function t6(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function Av(t,a,r){let i=!e6(a);return t&&(i||r==!1)?t6(t,a):a}const Xy=t=>t instanceof Ls?{...t}:t;function co(t,a){a=a||{};const r={};function i(p,w,j,E){return st.isPlainObject(p)&&st.isPlainObject(w)?st.merge.call({caseless:E},p,w):st.isPlainObject(w)?st.merge({},w):st.isArray(w)?w.slice():w}function l(p,w,j,E){if(st.isUndefined(w)){if(!st.isUndefined(p))return i(void 0,p,j,E)}else return i(p,w,j,E)}function d(p,w){if(!st.isUndefined(w))return i(void 0,w)}function f(p,w){if(st.isUndefined(w)){if(!st.isUndefined(p))return i(void 0,p)}else return i(void 0,w)}function h(p,w,j){if(j in a)return i(p,w);if(j in t)return i(void 0,p)}const b={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(p,w,j)=>l(Xy(p),Xy(w),j,!0)};return st.forEach(Object.keys({...t,...a}),function(w){const j=b[w]||l,E=j(t[w],a[w],w);st.isUndefined(E)&&j!==h||(r[w]=E)}),r}const Sv=t=>{const a=co({},t);let{data:r,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:d,headers:f,auth:h}=a;a.headers=f=Ls.from(f),a.url=kv(Av(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let b;if(st.isFormData(r)){if(us.hasStandardBrowserEnv||us.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((b=f.getContentType())!==!1){const[p,...w]=b?b.split(";").map(j=>j.trim()).filter(Boolean):[];f.setContentType([p||"multipart/form-data",...w].join("; "))}}if(us.hasStandardBrowserEnv&&(i&&st.isFunction(i)&&(i=i(a)),i||i!==!1&&Qj(a.url))){const p=l&&d&&Jj.read(d);p&&f.set(l,p)}return a},r6=typeof XMLHttpRequest<"u",a6=r6&&function(t){return new Promise(function(r,i){const l=Sv(t);let d=l.data;const f=Ls.from(l.headers).normalize();let{responseType:h,onUploadProgress:b,onDownloadProgress:p}=l,w,j,E,_,T;function A(){_&&_(),T&&T(),l.cancelToken&&l.cancelToken.unsubscribe(w),l.signal&&l.signal.removeEventListener("abort",w)}let I=new XMLHttpRequest;I.open(l.method.toUpperCase(),l.url,!0),I.timeout=l.timeout;function O(){if(!I)return;const D=Ls.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),H={data:!h||h==="text"||h==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:D,config:t,request:I};_v(function(L){r(L),A()},function(L){i(L),A()},H),I=null}"onloadend"in I?I.onloadend=O:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(O)},I.onabort=function(){I&&(i(new ar("Request aborted",ar.ECONNABORTED,t,I)),I=null)},I.onerror=function(){i(new ar("Network Error",ar.ERR_NETWORK,t,I)),I=null},I.ontimeout=function(){let B=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const H=l.transitional||jv;l.timeoutErrorMessage&&(B=l.timeoutErrorMessage),i(new ar(B,H.clarifyTimeoutError?ar.ETIMEDOUT:ar.ECONNABORTED,t,I)),I=null},d===void 0&&f.setContentType(null),"setRequestHeader"in I&&st.forEach(f.toJSON(),function(B,H){I.setRequestHeader(H,B)}),st.isUndefined(l.withCredentials)||(I.withCredentials=!!l.withCredentials),h&&h!=="json"&&(I.responseType=l.responseType),p&&([E,T]=Uu(p,!0),I.addEventListener("progress",E)),b&&I.upload&&([j,_]=Uu(b),I.upload.addEventListener("progress",j),I.upload.addEventListener("loadend",_)),(l.cancelToken||l.signal)&&(w=D=>{I&&(i(!D||D.type?new jc(null,t,I):D),I.abort(),I=null)},l.cancelToken&&l.cancelToken.subscribe(w),l.signal&&(l.signal.aborted?w():l.signal.addEventListener("abort",w)));const M=Wj(l.url);if(M&&us.protocols.indexOf(M)===-1){i(new ar("Unsupported protocol "+M+":",ar.ERR_BAD_REQUEST,t));return}I.send(d||null)})},s6=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let i=new AbortController,l;const d=function(p){if(!l){l=!0,h();const w=p instanceof Error?p:this.reason;i.abort(w instanceof ar?w:new jc(w instanceof Error?w.message:w))}};let f=a&&setTimeout(()=>{f=null,d(new ar(`timeout ${a} of ms exceeded`,ar.ETIMEDOUT))},a);const h=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),t=null)};t.forEach(p=>p.addEventListener("abort",d));const{signal:b}=i;return b.unsubscribe=()=>st.asap(h),b}},n6=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let i=0,l;for(;i<r;)l=i+a,yield t.slice(i,l),i=l},i6=async function*(t,a){for await(const r of l6(t))yield*n6(r,a)},l6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:i}=await a.read();if(r)break;yield i}}finally{await a.cancel()}},qy=(t,a,r,i)=>{const l=i6(t,a);let d=0,f,h=b=>{f||(f=!0,i&&i(b))};return new ReadableStream({async pull(b){try{const{done:p,value:w}=await l.next();if(p){h(),b.close();return}let j=w.byteLength;if(r){let E=d+=j;r(E)}b.enqueue(new Uint8Array(w))}catch(p){throw h(p),p}},cancel(b){return h(b),l.return()}},{highWaterMark:2})},mf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Tv=mf&&typeof ReadableStream=="function",o6=mf&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Dv=(t,...a)=>{try{return!!t(...a)}catch{return!1}},c6=Tv&&Dv(()=>{let t=!1;const a=new Request(us.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),$y=64*1024,ym=Tv&&Dv(()=>st.isReadableStream(new Response("").body)),Hu={stream:ym&&(t=>t.body)};mf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!Hu[a]&&(Hu[a]=st.isFunction(t[a])?r=>r[a]():(r,i)=>{throw new ar(`Response type '${a}' is not supported`,ar.ERR_NOT_SUPPORT,i)})})})(new Response);const d6=async t=>{if(t==null)return 0;if(st.isBlob(t))return t.size;if(st.isSpecCompliantForm(t))return(await new Request(us.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(st.isArrayBufferView(t)||st.isArrayBuffer(t))return t.byteLength;if(st.isURLSearchParams(t)&&(t=t+""),st.isString(t))return(await o6(t)).byteLength},u6=async(t,a)=>{const r=st.toFiniteNumber(t.getContentLength());return r??d6(a)},f6=mf&&(async t=>{let{url:a,method:r,data:i,signal:l,cancelToken:d,timeout:f,onDownloadProgress:h,onUploadProgress:b,responseType:p,headers:w,withCredentials:j="same-origin",fetchOptions:E}=Sv(t);p=p?(p+"").toLowerCase():"text";let _=s6([l,d&&d.toAbortSignal()],f),T;const A=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let I;try{if(b&&c6&&r!=="get"&&r!=="head"&&(I=await u6(w,i))!==0){let H=new Request(a,{method:"POST",body:i,duplex:"half"}),z;if(st.isFormData(i)&&(z=H.headers.get("content-type"))&&w.setContentType(z),H.body){const[L,P]=Vy(I,Uu(Gy(b)));i=qy(H.body,$y,L,P)}}st.isString(j)||(j=j?"include":"omit");const O="credentials"in Request.prototype;T=new Request(a,{...E,signal:_,method:r.toUpperCase(),headers:w.normalize().toJSON(),body:i,duplex:"half",credentials:O?j:void 0});let M=await fetch(T,E);const D=ym&&(p==="stream"||p==="response");if(ym&&(h||D&&A)){const H={};["status","statusText","headers"].forEach(U=>{H[U]=M[U]});const z=st.toFiniteNumber(M.headers.get("content-length")),[L,P]=h&&Vy(z,Uu(Gy(h),!0))||[];M=new Response(qy(M.body,$y,L,()=>{P&&P(),A&&A()}),H)}p=p||"text";let B=await Hu[st.findKey(Hu,p)||"text"](M,t);return!D&&A&&A(),await new Promise((H,z)=>{_v(H,z,{data:B,headers:Ls.from(M.headers),status:M.status,statusText:M.statusText,config:t,request:T})})}catch(O){throw A&&A(),O&&O.name==="TypeError"&&/Load failed|fetch/i.test(O.message)?Object.assign(new ar("Network Error",ar.ERR_NETWORK,t,T),{cause:O.cause||O}):ar.from(O,O&&O.code,t,T)}}),bm={http:_j,xhr:a6,fetch:f6};st.forEach(bm,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const Yy=t=>`- ${t}`,x6=t=>st.isFunction(t)||t===null||t===!1,Rv={getAdapter:t=>{t=st.isArray(t)?t:[t];const{length:a}=t;let r,i;const l={};for(let d=0;d<a;d++){r=t[d];let f;if(i=r,!x6(r)&&(i=bm[(f=String(r)).toLowerCase()],i===void 0))throw new ar(`Unknown adapter '${f}'`);if(i)break;l[f||"#"+d]=i}if(!i){const d=Object.entries(l).map(([h,b])=>`adapter ${h} `+(b===!1?"is not supported by the environment":"is not available in the build"));let f=a?d.length>1?`since :
`+d.map(Yy).join(`
`):" "+Yy(d[0]):"as no adapter specified";throw new ar("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return i},adapters:bm};function Th(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new jc(null,t)}function Wy(t){return Th(t),t.headers=Ls.from(t.headers),t.data=Sh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Rv.getAdapter(t.adapter||id.adapter)(t).then(function(i){return Th(t),i.data=Sh.call(t,t.transformResponse,i),i.headers=Ls.from(i.headers),i},function(i){return Ev(i)||(Th(t),i&&i.response&&(i.response.data=Sh.call(t,t.transformResponse,i.response),i.response.headers=Ls.from(i.response.headers))),Promise.reject(i)})}const Ov="1.11.0",gf={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{gf[t]=function(i){return typeof i===t||"a"+(a<1?"n ":" ")+t}});const Ky={};gf.transitional=function(a,r,i){function l(d,f){return"[Axios v"+Ov+"] Transitional option '"+d+"'"+f+(i?". "+i:"")}return(d,f,h)=>{if(a===!1)throw new ar(l(f," has been removed"+(r?" in "+r:"")),ar.ERR_DEPRECATED);return r&&!Ky[f]&&(Ky[f]=!0,console.warn(l(f," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(d,f,h):!0}};gf.spelling=function(a){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${a}`),!0)};function h6(t,a,r){if(typeof t!="object")throw new ar("options must be an object",ar.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let l=i.length;for(;l-- >0;){const d=i[l],f=a[d];if(f){const h=t[d],b=h===void 0||f(h,d,t);if(b!==!0)throw new ar("option "+d+" must be "+b,ar.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ar("Unknown option "+d,ar.ERR_BAD_OPTION)}}const Lu={assertOptions:h6,validators:gf},Jn=Lu.validators;let no=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Uy,response:new Uy}}async request(a,r){try{return await this._request(a,r)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=co(this.defaults,r);const{transitional:i,paramsSerializer:l,headers:d}=r;i!==void 0&&Lu.assertOptions(i,{silentJSONParsing:Jn.transitional(Jn.boolean),forcedJSONParsing:Jn.transitional(Jn.boolean),clarifyTimeoutError:Jn.transitional(Jn.boolean)},!1),l!=null&&(st.isFunction(l)?r.paramsSerializer={serialize:l}:Lu.assertOptions(l,{encode:Jn.function,serialize:Jn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Lu.assertOptions(r,{baseUrl:Jn.spelling("baseURL"),withXsrfToken:Jn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let f=d&&st.merge(d.common,d[r.method]);d&&st.forEach(["delete","get","head","post","put","patch","common"],T=>{delete d[T]}),r.headers=Ls.concat(f,d);const h=[];let b=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(r)===!1||(b=b&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const p=[];this.interceptors.response.forEach(function(A){p.push(A.fulfilled,A.rejected)});let w,j=0,E;if(!b){const T=[Wy.bind(this),void 0];for(T.unshift(...h),T.push(...p),E=T.length,w=Promise.resolve(r);j<E;)w=w.then(T[j++],T[j++]);return w}E=h.length;let _=r;for(j=0;j<E;){const T=h[j++],A=h[j++];try{_=T(_)}catch(I){A.call(this,I);break}}try{w=Wy.call(this,_)}catch(T){return Promise.reject(T)}for(j=0,E=p.length;j<E;)w=w.then(p[j++],p[j++]);return w}getUri(a){a=co(this.defaults,a);const r=Av(a.baseURL,a.url,a.allowAbsoluteUrls);return kv(r,a.params,a.paramsSerializer)}};st.forEach(["delete","get","head","options"],function(a){no.prototype[a]=function(r,i){return this.request(co(i||{},{method:a,url:r,data:(i||{}).data}))}});st.forEach(["post","put","patch"],function(a){function r(i){return function(d,f,h){return this.request(co(h||{},{method:a,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}no.prototype[a]=r(),no.prototype[a+"Form"]=r(!0)});let m6=class Iv{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const i=this;this.promise.then(l=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](l);i._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(h=>{i.subscribe(h),d=h}).then(l);return f.cancel=function(){i.unsubscribe(d)},f},a(function(d,f,h){i.reason||(i.reason=new jc(d,f,h),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=i=>{a.abort(i)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new Iv(function(l){a=l}),cancel:a}}};function g6(t){return function(r){return t.apply(null,r)}}function p6(t){return st.isObject(t)&&t.isAxiosError===!0}const vm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vm).forEach(([t,a])=>{vm[a]=t});function Fv(t){const a=new no(t),r=uv(no.prototype.request,a);return st.extend(r,no.prototype,a,{allOwnKeys:!0}),st.extend(r,a,null,{allOwnKeys:!0}),r.create=function(l){return Fv(co(t,l))},r}const ha=Fv(id);ha.Axios=no;ha.CanceledError=jc;ha.CancelToken=m6;ha.isCancel=Ev;ha.VERSION=Ov;ha.toFormData=hf;ha.AxiosError=ar;ha.Cancel=ha.CanceledError;ha.all=function(a){return Promise.all(a)};ha.spread=g6;ha.isAxiosError=p6;ha.mergeConfig=co;ha.AxiosHeaders=Ls;ha.formToJSON=t=>Cv(st.isHTMLForm(t)?new FormData(t):t);ha.getAdapter=Rv.getAdapter;ha.HttpStatusCode=vm;ha.default=ha;const{Axios:AI,AxiosError:SI,CanceledError:TI,isCancel:DI,CancelToken:RI,VERSION:OI,all:II,Cancel:FI,isAxiosError:MI,spread:BI,toFormData:LI,AxiosHeaders:PI,HttpStatusCode:zI,formToJSON:UI,getAdapter:HI,mergeConfig:VI}=ha,Ae=ha.create({baseURL:"https://apmt.apivcm.shop/api",withCredentials:!0});let Dh=!1,wm=[];const Zy=(t,a=null)=>{wm.forEach(r=>{t?r.reject(t):r.resolve(a)}),wm=[]};Ae.interceptors.request.use(t=>{const a=["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries","/auth/verify","/auth/resend","/auth/forgot-password-unified","/auth/reset-password-unified","/auth/check-reset-token","/auth/verify-invite-link","/auth/complete-registration"],r=t.url||"";if(a.some(l=>r?r.includes(l)||t.baseURL&&(t.baseURL+r).includes(l):!1))return t.withCredentials=!1,t.headers&&t.headers.Authorization&&delete t.headers.Authorization,t;try{const l=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");l&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${l}`),t.withCredentials=!0}catch{}return t},t=>Promise.reject(t));Ae.interceptors.response.use(t=>t,async t=>{const a=t.config,r=a.url||"";if(["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries"].some(h=>r.includes(h)))return Promise.reject(t);const d=t.response?.status;if((t.response?.data?.requiresLogin||d===401||d===403)&&!a._retry){if(a._retry=!0,Dh)return new Promise((h,b)=>{wm.push({resolve:h,reject:b})}).then(h=>(a.headers.Authorization=`Bearer ${h}`,Ae(a))).catch(h=>Promise.reject(h));Dh=!0;try{const h=await ha.post("https://apmt.apivcm.shop/api/auth/refresh",{},{withCredentials:!0,validateStatus:b=>b<500});if(h.status===200&&h.data?.accessToken){const b=h.data.accessToken;return localStorage.setItem("accessToken",b),sessionStorage.setItem("accessToken",b),Ae.defaults.headers.common.Authorization=`Bearer ${b}`,a.headers.Authorization=`Bearer ${b}`,Zy(null,b),Ae(a)}else throw new Error("Refresh failed")}catch(h){return console.log("Token refresh failed, clearing tokens"),localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),delete Ae.defaults.headers.common.Authorization,Zy(h,null),typeof window<"u"&&(window.location.href="/login?session=expired"),Promise.reject(h)}finally{Dh=!1}}if(t.response&&t.response.data&&t.response.data.requiresLogin){try{localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken")}catch{}return delete Ae.defaults.headers.common.Authorization,typeof window<"u"&&(window.location.href="/login?session=expired"),Promise.reject(t)}return t.response&&t.response.status===429&&console.error("Rate limited. Please wait before trying again."),Promise.reject(t)});const zr=C.createContext(null);function y6({children:t}){const[a,r]=C.useState(()=>{const E=localStorage.getItem("houseOwnerToken"),_=localStorage.getItem("houseOwnerData"),T=localStorage.getItem("userType");if(E&&_&&T==="houseowner")return{accessToken:E,user:JSON.parse(_),userType:"houseowner"};const A=localStorage.getItem("auth");return A?{...JSON.parse(A),userType:localStorage.getItem("userType")||"admin"}:{accessToken:null,user:null,userType:null}}),i=gr(),l=C.useRef(null),d=600*1e3,f=C.useCallback(()=>{r({accessToken:null,user:null,userType:null}),localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("houseOwnerToken"),localStorage.removeItem("houseOwnerData"),localStorage.removeItem("lastActivity"),l.current&&(clearTimeout(l.current),l.current=null);try{localStorage.setItem("logout",Date.now().toString())}catch{}i("/login")},[i]),h=C.useCallback(()=>{l.current&&clearTimeout(l.current);try{localStorage.setItem("lastActivity",Date.now().toString())}catch{}l.current=setTimeout(()=>{f()},d)},[f,d]),b=C.useCallback(()=>{const E=["mousemove","mousedown","pointerdown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"];let _=0;const T=()=>{const I=Date.now();I-_>1e3&&(_=I,h())};E.forEach(I=>{document.addEventListener(I,T,{passive:!0,capture:!0})});const A=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",A),()=>{E.forEach(I=>{document.removeEventListener(I,T,{capture:!0})}),document.removeEventListener("visibilitychange",A),l.current&&(clearTimeout(l.current),l.current=null)}},[h]);C.useEffect(()=>{if(a&&a.accessToken){const E=localStorage.getItem("lastActivity");if(E){const A=parseInt(E,10),I=Date.now()-A;if(I>d){f();return}const O=d-I;l.current&&clearTimeout(l.current),l.current=setTimeout(f,O)}else h();const _=b(),T=A=>{try{if(A.key==="lastActivity"&&A.newValue){const I=parseInt(A.newValue,10),O=Date.now()-I;l.current&&clearTimeout(l.current);const M=d-O;M<=0?f():l.current=setTimeout(f,M)}A.key==="logout"&&f()}catch{}};return window.addEventListener("storage",T),()=>{window.removeEventListener("storage",T),_()}}else l.current&&clearTimeout(l.current)},[a,h,b,f,d]);const p=C.useCallback(E=>{const _=E.user?.isHouseOwner?"houseowner":"admin",T={...E,userType:_};r(T),E&&E.accessToken?(_==="houseowner"?(localStorage.setItem("houseOwnerToken",E.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(E.user))):(localStorage.setItem("auth",JSON.stringify(E)),localStorage.setItem("accessToken",E.accessToken),localStorage.setItem("user",JSON.stringify(E.user))),localStorage.setItem("userType",_),h()):f()},[h,f]),w=C.useCallback(async()=>{try{a.userType==="houseowner"?await Ae.post("/houseowner-auth/logout",{},{credentials:"include"}):await Ae.post("/auth/logout",{},{credentials:"include"})}catch(E){console.error("Logout error:",E)}finally{f()}},[f,a.userType]),j={auth:a,setAuth:p,logout:w,resetActivityTimer:h};return e.jsx(zr.Provider,{value:j,children:t})}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,i)=>i?i.toUpperCase():r.toLowerCase()),Qy=t=>{const a=v6(t);return a.charAt(0).toUpperCase()+a.slice(1)},Mv=(...t)=>t.filter((a,r,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===r).join(" ").trim(),w6=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=C.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:f,...h},b)=>C.createElement("svg",{ref:b,...N6,width:a,height:a,stroke:t,strokeWidth:i?Number(r)*24/Number(a):r,className:Mv("lucide",l),...!d&&!w6(h)&&{"aria-hidden":"true"},...h},[...f.map(([p,w])=>C.createElement(p,w)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=(t,a)=>{const r=C.forwardRef(({className:i,...l},d)=>C.createElement(k6,{ref:d,iconNode:a,className:Mv(`lucide-${b6(Qy(t))}`,`lucide-${t}`,i),...l}));return r.displayName=Qy(t),r};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],Jy=Nt("arrow-big-right",j6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],yc=Nt("arrow-left",C6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_6=Nt("arrow-right",E6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],S6=Nt("arrow-up-right",A6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],D6=Nt("award",T6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],O6=Nt("banknote-arrow-down",R6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],F6=Nt("bath",I6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],B6=Nt("bed",M6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Vu=Nt("briefcase",L6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],xa=Nt("building-2",P6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Ii=Nt("building",z6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],H6=Nt("calendar-clock",U6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Fi=Nt("calendar",V6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Bv=Nt("camera",G6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Pu=Nt("chart-no-axes-column-increasing",X6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],mn=Nt("check",q6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],ai=Nt("chevron-down",$6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],On=Nt("chevron-left",Y6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],P0=Nt("chevron-right",W6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Cl=Nt("chevron-up",K6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],na=Nt("circle-alert",Z6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],_s=Nt("circle-check-big",Q6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eC=Nt("circle-play",J6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],rC=Nt("circle-stop",tC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],z0=Nt("circle-x",aC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],eb=Nt("clipboard-list",sC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Tn=Nt("clock",nC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iC=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Jm=Nt("credit-card",iC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Zs=Nt("dollar-sign",lC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],po=Nt("download",oC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],In=Nt("eye-off",cC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],tn=Nt("eye",dC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],fC=Nt("file-spreadsheet",uC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],wr=Nt("file-text",xC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hC=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],ld=Nt("funnel",hC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],eg=Nt("globe",mC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],pC=Nt("hash",gC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],qr=Nt("house",yC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Lv=Nt("id-card",bC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],en=Nt("image",vC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],NC=Nt("key",wC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z",key:"15q6uc"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845",key:"byia6g"}]],jC=Nt("layers-2",kC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pf=Nt("layers",CC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EC=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],_C=Nt("layout-dashboard",EC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Ut=Nt("loader",AC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Nm=Nt("log-out",SC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TC=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],uo=Nt("mail",TC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DC=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],El=Nt("map-pin",DC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RC=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],OC=Nt("maximize-2",RC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IC=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Dl=Nt("menu",IC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FC=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],km=Nt("moon",FC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MC=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],BC=Nt("palette",MC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LC=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],PC=Nt("pause",LC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zC=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],UC=Nt("phone-call",zC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HC=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Cc=Nt("phone",HC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VC=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Pv=Nt("play",VC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GC=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],qa=Nt("plus",GC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XC=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],U0=Nt("qr-code",XC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qC=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Sa=Nt("receipt",qC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $C=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jm=Nt("refresh-cw",$C);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YC=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],zv=Nt("rotate-cw",YC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WC=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yf=Nt("save",WC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KC=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],As=Nt("search",KC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZC=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Cm=Nt("send",ZC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QC=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gu=Nt("settings",QC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],tb=Nt("shield-check",JC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],fo=Nt("shield",eE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rE=Nt("square-check-big",tE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Na=Nt("square-pen",aE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],H0=Nt("square",sE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],iE=Nt("star",nE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Em=Nt("sun",lE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Uv=Nt("tag",oE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],_m=Nt("timer",cE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],_l=Nt("toggle-left",dE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],Al=Nt("toggle-right",uE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fE=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Er=Nt("trash-2",fE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hE=Nt("triangle-alert",xE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Ps=Nt("upload",mE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pE=Nt("user-check",gE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Xu=Nt("user-plus",yE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Qa=Nt("user",bE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],si=Nt("users",vE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],rb=Nt("workflow",wE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NE=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],qu=Nt("wrench",NE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],yr=Nt("x",kE);function Hv(t){var a,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(r=Hv(t[a]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function io(){for(var t,a,r=0,i="",l=arguments.length;r<l;r++)(t=arguments[r])&&(a=Hv(t))&&(i&&(i+=" "),i+=a);return i}function jE(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}jE(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var od=t=>typeof t=="number"&&!isNaN(t),xo=t=>typeof t=="string",Mi=t=>typeof t=="function",CE=t=>xo(t)||od(t),Am=t=>xo(t)||Mi(t)?t:null,EE=(t,a)=>t===!1||od(t)&&t>0?t:a,Sm=t=>C.isValidElement(t)||xo(t)||Mi(t)||od(t);function _E(t,a,r=300){let{scrollHeight:i,style:l}=t;requestAnimationFrame(()=>{l.minHeight="initial",l.height=i+"px",l.transition=`all ${r}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(a,r)})})}function AE({enter:t,exit:a,appendPosition:r=!1,collapse:i=!0,collapseDuration:l=300}){return function({children:d,position:f,preventExitTransition:h,done:b,nodeRef:p,isIn:w,playToast:j}){let E=r?`${t}--${f}`:t,_=r?`${a}--${f}`:a,T=C.useRef(0);return C.useLayoutEffect(()=>{let A=p.current,I=E.split(" "),O=M=>{M.target===p.current&&(j(),A.removeEventListener("animationend",O),A.removeEventListener("animationcancel",O),T.current===0&&M.type!=="animationcancel"&&A.classList.remove(...I))};A.classList.add(...I),A.addEventListener("animationend",O),A.addEventListener("animationcancel",O)},[]),C.useEffect(()=>{let A=p.current,I=()=>{A.removeEventListener("animationend",I),i?_E(A,b,l):b()};w||(h?I():(T.current=1,A.className+=` ${_}`,A.addEventListener("animationend",I)))},[w]),Fr.createElement(Fr.Fragment,null,d)}}function ab(t,a){return{content:Vv(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:a}}function Vv(t,a,r=!1){return C.isValidElement(t)&&!xo(t.type)?C.cloneElement(t,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):Mi(t)?t({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):t}function SE({closeToast:t,theme:a,ariaLabel:r="close"}){return Fr.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:i=>{i.stopPropagation(),t(!0)},"aria-label":r},Fr.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Fr.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function TE({delay:t,isRunning:a,closeToast:r,type:i="default",hide:l,className:d,controlledProgress:f,progress:h,rtl:b,isIn:p,theme:w}){let j=l||f&&h===0,E={animationDuration:`${t}ms`,animationPlayState:a?"running":"paused"};f&&(E.transform=`scaleX(${h})`);let _=io("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${w}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":b}),T=Mi(d)?d({rtl:b,type:i,defaultClassName:_}):io(_,d),A={[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]:f&&h<1?null:()=>{p&&r()}};return Fr.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":j},Fr.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${w} Toastify__progress-bar--${i}`}),Fr.createElement("div",{role:"progressbar","aria-hidden":j?"true":"false","aria-label":"notification timer",className:T,style:E,...A}))}var DE=1,Gv=()=>`${DE++}`;function RE(t,a,r){let i=1,l=0,d=[],f=[],h=a,b=new Map,p=new Set,w=M=>(p.add(M),()=>p.delete(M)),j=()=>{f=Array.from(b.values()),p.forEach(M=>M())},E=({containerId:M,toastId:D,updateId:B})=>{let H=M?M!==t:t!==1,z=b.has(D)&&B==null;return H||z},_=(M,D)=>{b.forEach(B=>{var H;(D==null||D===B.props.toastId)&&((H=B.toggle)==null||H.call(B,M))})},T=M=>{var D,B;(B=(D=M.props)==null?void 0:D.onClose)==null||B.call(D,M.removalReason),M.isActive=!1},A=M=>{if(M==null)b.forEach(T);else{let D=b.get(M);D&&T(D)}j()},I=()=>{l-=d.length,d=[]},O=M=>{var D,B;let{toastId:H,updateId:z}=M.props,L=z==null;M.staleId&&b.delete(M.staleId),M.isActive=!0,b.set(H,M),j(),r(ab(M,L?"added":"updated")),L&&((B=(D=M.props).onOpen)==null||B.call(D))};return{id:t,props:h,observe:w,toggle:_,removeToast:A,toasts:b,clearQueue:I,buildToast:(M,D)=>{if(E(D))return;let{toastId:B,updateId:H,data:z,staleId:L,delay:P}=D,U=H==null;U&&l++;let Z={...h,style:h.toastStyle,key:i++,...Object.fromEntries(Object.entries(D).filter(([Y,ue])=>ue!=null)),toastId:B,updateId:H,data:z,isIn:!1,className:Am(D.className||h.toastClassName),progressClassName:Am(D.progressClassName||h.progressClassName),autoClose:D.isLoading?!1:EE(D.autoClose,h.autoClose),closeToast(Y){b.get(B).removalReason=Y,A(B)},deleteToast(){let Y=b.get(B);if(Y!=null){if(r(ab(Y,"removed")),b.delete(B),l--,l<0&&(l=0),d.length>0){O(d.shift());return}j()}}};Z.closeButton=h.closeButton,D.closeButton===!1||Sm(D.closeButton)?Z.closeButton=D.closeButton:D.closeButton===!0&&(Z.closeButton=Sm(h.closeButton)?h.closeButton:!0);let ae={content:M,props:Z,staleId:L};h.limit&&h.limit>0&&l>h.limit&&U?d.push(ae):od(P)?setTimeout(()=>{O(ae)},P):O(ae)},setProps(M){h=M},setToggle:(M,D)=>{let B=b.get(M);B&&(B.toggle=D)},isToastActive:M=>{var D;return(D=b.get(M))==null?void 0:D.isActive},getSnapshot:()=>f}}var js=new Map,V0=[],Tm=new Set,OE=t=>Tm.forEach(a=>a(t)),Xv=()=>js.size>0;function IE(){V0.forEach(t=>$v(t.content,t.options)),V0=[]}var FE=(t,{containerId:a})=>{var r;return(r=js.get(a||1))==null?void 0:r.toasts.get(t)};function qv(t,a){var r;if(a)return!!((r=js.get(a))!=null&&r.isToastActive(t));let i=!1;return js.forEach(l=>{l.isToastActive(t)&&(i=!0)}),i}function ME(t){if(!Xv()){V0=V0.filter(a=>t!=null&&a.options.toastId!==t);return}if(t==null||CE(t))js.forEach(a=>{a.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let a=js.get(t.containerId);a?a.removeToast(t.id):js.forEach(r=>{r.removeToast(t.id)})}}var BE=(t={})=>{js.forEach(a=>{a.props.limit&&(!t.containerId||a.id===t.containerId)&&a.clearQueue()})};function $v(t,a){Sm(t)&&(Xv()||V0.push({content:t,options:a}),js.forEach(r=>{r.buildToast(t,a)}))}function LE(t){var a;(a=js.get(t.containerId||1))==null||a.setToggle(t.id,t.fn)}function Yv(t,a){js.forEach(r=>{(a==null||!(a!=null&&a.containerId)||a?.containerId===r.id)&&r.toggle(t,a?.id)})}function PE(t){let a=t.containerId||1;return{subscribe(r){let i=RE(a,t,OE);js.set(a,i);let l=i.observe(r);return IE(),()=>{l(),js.delete(a)}},setProps(r){var i;(i=js.get(a))==null||i.setProps(r)},getSnapshot(){var r;return(r=js.get(a))==null?void 0:r.getSnapshot()}}}function zE(t){return Tm.add(t),()=>{Tm.delete(t)}}function UE(t){return t&&(xo(t.toastId)||od(t.toastId))?t.toastId:Gv()}function cd(t,a){return $v(t,a),a.toastId}function bf(t,a){return{...a,type:a&&a.type||t,toastId:UE(a)}}function vf(t){return(a,r)=>cd(a,bf(t,r))}function ie(t,a){return cd(t,bf("default",a))}ie.loading=(t,a)=>cd(t,bf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function HE(t,{pending:a,error:r,success:i},l){let d;a&&(d=xo(a)?ie.loading(a,l):ie.loading(a.render,{...l,...a}));let f={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(p,w,j)=>{if(w==null){ie.dismiss(d);return}let E={type:p,...f,...l,data:j},_=xo(w)?{render:w}:w;return d?ie.update(d,{...E,..._}):ie(_.render,{...E,..._}),j},b=Mi(t)?t():t;return b.then(p=>h("success",i,p)).catch(p=>h("error",r,p)),b}ie.promise=HE;ie.success=vf("success");ie.info=vf("info");ie.error=vf("error");ie.warning=vf("warning");ie.warn=ie.warning;ie.dark=(t,a)=>cd(t,bf("default",{theme:"dark",...a}));function VE(t){ME(t)}ie.dismiss=VE;ie.clearWaitingQueue=BE;ie.isActive=qv;ie.update=(t,a={})=>{let r=FE(t,a);if(r){let{props:i,content:l}=r,d={delay:100,...i,...a,toastId:a.toastId||t,updateId:Gv()};d.toastId!==t&&(d.staleId=t);let f=d.render||l;delete d.render,cd(f,d)}};ie.done=t=>{ie.update(t,{progress:1})};ie.onChange=zE;ie.play=t=>Yv(!0,t);ie.pause=t=>Yv(!1,t);function GE(t){var a;let{subscribe:r,getSnapshot:i,setProps:l}=C.useRef(PE(t)).current;l(t);let d=(a=C.useSyncExternalStore(r,i,i))==null?void 0:a.slice();function f(h){if(!d)return[];let b=new Map;return t.newestOnTop&&d.reverse(),d.forEach(p=>{let{position:w}=p.props;b.has(w)||b.set(w,[]),b.get(w).push(p)}),Array.from(b,p=>h(p[0],p[1]))}return{getToastToRender:f,isToastActive:qv,count:d?.length}}function XE(t){let[a,r]=C.useState(!1),[i,l]=C.useState(!1),d=C.useRef(null),f=C.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:b,closeToast:p,onClick:w,closeOnClick:j}=t;LE({id:t.toastId,containerId:t.containerId,fn:r}),C.useEffect(()=>{if(t.pauseOnFocusLoss)return E(),()=>{_()}},[t.pauseOnFocusLoss]);function E(){document.hasFocus()||O(),window.addEventListener("focus",I),window.addEventListener("blur",O)}function _(){window.removeEventListener("focus",I),window.removeEventListener("blur",O)}function T(L){if(t.draggable===!0||t.draggable===L.pointerType){M();let P=d.current;f.canCloseOnClick=!0,f.canDrag=!0,P.style.transition="none",t.draggableDirection==="x"?(f.start=L.clientX,f.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(f.start=L.clientY,f.removalDistance=P.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function A(L){let{top:P,bottom:U,left:Z,right:ae}=d.current.getBoundingClientRect();L.nativeEvent.type!=="touchend"&&t.pauseOnHover&&L.clientX>=Z&&L.clientX<=ae&&L.clientY>=P&&L.clientY<=U?O():I()}function I(){r(!0)}function O(){r(!1)}function M(){f.didMove=!1,document.addEventListener("pointermove",B),document.addEventListener("pointerup",H)}function D(){document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",H)}function B(L){let P=d.current;if(f.canDrag&&P){f.didMove=!0,a&&O(),t.draggableDirection==="x"?f.delta=L.clientX-f.start:f.delta=L.clientY-f.start,f.start!==L.clientX&&(f.canCloseOnClick=!1);let U=t.draggableDirection==="x"?`${f.delta}px, var(--y)`:`0, calc(${f.delta}px + var(--y))`;P.style.transform=`translate3d(${U},0)`,P.style.opacity=`${1-Math.abs(f.delta/f.removalDistance)}`}}function H(){D();let L=d.current;if(f.canDrag&&f.didMove&&L){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance){l(!0),t.closeToast(!0),t.collapseAll();return}L.style.transition="transform 0.2s, opacity 0.2s",L.style.removeProperty("transform"),L.style.removeProperty("opacity")}}let z={onPointerDown:T,onPointerUp:A};return h&&b&&(z.onMouseEnter=O,t.stacked||(z.onMouseLeave=I)),j&&(z.onClick=L=>{w&&w(L),f.canCloseOnClick&&p(!0)}),{playToast:I,pauseToast:O,isRunning:a,preventExitTransition:i,toastRef:d,eventHandlers:z}}var qE=typeof window<"u"?C.useLayoutEffect:C.useEffect,wf=({theme:t,type:a,isLoading:r,...i})=>Fr.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...i});function $E(t){return Fr.createElement(wf,{...t},Fr.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function YE(t){return Fr.createElement(wf,{...t},Fr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function WE(t){return Fr.createElement(wf,{...t},Fr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function KE(t){return Fr.createElement(wf,{...t},Fr.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function ZE(){return Fr.createElement("div",{className:"Toastify__spinner"})}var Dm={info:YE,warning:$E,success:WE,error:KE,spinner:ZE},QE=t=>t in Dm;function JE({theme:t,type:a,isLoading:r,icon:i}){let l=null,d={theme:t,type:a};return i===!1||(Mi(i)?l=i({...d,isLoading:r}):C.isValidElement(i)?l=C.cloneElement(i,d):r?l=Dm.spinner():QE(a)&&(l=Dm[a](d))),l}var e8=t=>{let{isRunning:a,preventExitTransition:r,toastRef:i,eventHandlers:l,playToast:d}=XE(t),{closeButton:f,children:h,autoClose:b,onClick:p,type:w,hideProgressBar:j,closeToast:E,transition:_,position:T,className:A,style:I,progressClassName:O,updateId:M,role:D,progress:B,rtl:H,toastId:z,deleteToast:L,isIn:P,isLoading:U,closeOnClick:Z,theme:ae,ariaLabel:Y}=t,ue=io("Toastify__toast",`Toastify__toast-theme--${ae}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":Z}),de=Mi(A)?A({rtl:H,position:T,type:w,defaultClassName:ue}):io(ue,A),G=JE(t),q=!!B||!b,xe={closeToast:E,type:w,theme:ae},Ce=null;return f===!1||(Mi(f)?Ce=f(xe):C.isValidElement(f)?Ce=C.cloneElement(f,xe):Ce=SE(xe)),Fr.createElement(_,{isIn:P,done:L,position:T,preventExitTransition:r,nodeRef:i,playToast:d},Fr.createElement("div",{id:z,tabIndex:0,onClick:p,"data-in":P,className:de,...l,style:I,ref:i,...P&&{role:D,"aria-label":Y}},G!=null&&Fr.createElement("div",{className:io("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!U})},G),Vv(h,t,!a),Ce,!t.customProgressBar&&Fr.createElement(TE,{...M&&!q?{key:`p-${M}`}:{},rtl:H,theme:ae,delay:b,isRunning:a,isIn:P,closeToast:E,hide:j,type:w,className:O,controlledProgress:q,progress:B||0})))},t8=(t,a=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:a}),r8=AE(t8("bounce",!0)),a8={position:"top-right",transition:r8,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function or(t){let a={...a8,...t},r=t.stacked,[i,l]=C.useState(!0),d=C.useRef(null),{getToastToRender:f,isToastActive:h,count:b}=GE(a),{className:p,style:w,rtl:j,containerId:E,hotKeys:_}=a;function T(I){let O=io("Toastify__toast-container",`Toastify__toast-container--${I}`,{"Toastify__toast-container--rtl":j});return Mi(p)?p({position:I,rtl:j,defaultClassName:O}):io(O,Am(p))}function A(){r&&(l(!0),ie.play())}return qE(()=>{var I;if(r){let O=d.current.querySelectorAll('[data-in="true"]'),M=12,D=(I=a.position)==null?void 0:I.includes("top"),B=0,H=0;Array.from(O).reverse().forEach((z,L)=>{let P=z;P.classList.add("Toastify__toast--stacked"),L>0&&(P.dataset.collapsed=`${i}`),P.dataset.pos||(P.dataset.pos=D?"top":"bot");let U=B*(i?.2:1)+(i?0:M*L);P.style.setProperty("--y",`${D?U:U*-1}px`),P.style.setProperty("--g",`${M}`),P.style.setProperty("--s",`${1-(i?H:0)}`),B+=P.offsetHeight,H+=.025})}},[i,b,r]),C.useEffect(()=>{function I(O){var M;let D=d.current;_(O)&&((M=D.querySelector('[tabIndex="0"]'))==null||M.focus(),l(!1),ie.pause()),O.key==="Escape"&&(document.activeElement===D||D!=null&&D.contains(document.activeElement))&&(l(!0),ie.play())}return document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}},[_]),Fr.createElement("section",{ref:d,className:"Toastify",id:E,onMouseEnter:()=>{r&&(l(!1),ie.pause())},onMouseLeave:A,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},f((I,O)=>{let M=O.length?{...w}:{...w,pointerEvents:"none"};return Fr.createElement("div",{tabIndex:-1,className:T(I),"data-stacked":r,style:M,key:`c-${I}`},O.map(({content:D,props:B})=>Fr.createElement(e8,{...B,stacked:r,collapseAll:A,isIn:h(B.toastId,B.containerId),key:`t-${B.key}`},D)))}))}function s8(){const{setAuth:t}=C.useContext(zr),[a,r]=C.useState(""),[i,l]=C.useState(""),[d,f]=C.useState(!1),[h,b]=C.useState(null),[p,w]=C.useState(!1),[j,E]=C.useState(!1),[_,T]=C.useState(!1),[A,I]=C.useState(0),[O,M]=C.useState("admin"),D=gr();let[B,H]=rd();C.useEffect(()=>{const q=B.get("token"),xe=B.get("id"),Ce=B.get("type");q&&xe&&(Ce==="houseowner"?L(q,xe):z(q,xe))},[B]);const z=async(q,xe)=>{w(!0),b(null);try{await Ae.post("/auth/verify",{token:q,id:xe}),ie.success("Email verified successfully! You can now log in."),H({})}catch(Ce){ie.error(Ce.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}},L=async(q,xe)=>{w(!0),b(null);try{const Ce=await Ae.post("/houseowner-auth/verify",{token:q,id:xe});Ce.data.success&&(Ce.data.requires_password?(ie.success("Email verified! Please set your password."),D(`/houseowner/set-password?token=${q}&id=${xe}`)):(ie.success("Email verified successfully! You can now log in."),H({})))}catch(Ce){ie.error(Ce.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}};async function P(q){if(q.preventDefault(),!(p||_)){b(null),w(!0);try{const xe=await Ae.post("/auth/login-unified",{email:a,password:i});if(xe.data.accessToken){t({accessToken:xe.data.accessToken,user:xe.data.user}),ie.success("Login Successful!");try{localStorage.setItem("accessToken",xe.data.accessToken),localStorage.setItem("user",JSON.stringify(xe.data.user)),localStorage.setItem("userType",xe.data.user.user_type)}catch(Ce){console.warn("Could not save to localStorage:",Ce)}U(xe.data.user);return}}catch(xe){Z(xe)}finally{w(!1)}}}const U=q=>{q.user_type==="houseowner"?D("/houseowner/dashboard"):q.role==="Admin"?D("/admindashboard"):D("/employee-dashboard")},Z=q=>{if(q.response?.status===429)ae(q);else{const Ce=q.response?.data?.message||"Login failed";b(Ce),ie.error(Ce),(Ce.includes("verify")||Ce.includes("verified"))&&Y()}},ae=q=>{const xe=q.response?.headers?.["retry-after"],Ce=xe?Math.max(1,Number(xe)):60;ie.error(`Too many requests. Please wait ${Ce}s before trying again.`),T(!0),I(Ce);try{localStorage.setItem("rateLimitedUntil",Date.now()+Ce*1e3)}catch(re){console.warn("Could not save rate limit info:",re)}let le=Ce;const oe=setInterval(()=>{if(le-=1,I(le),le<=0){clearInterval(oe),T(!1),I(0);try{localStorage.removeItem("rateLimitedUntil")}catch(re){console.warn("Could not clear rate limit info:",re)}}},1e3)},Y=()=>{ie.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:ue,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:j,children:j?"Sending...":"Resend Verification"})]}),{autoClose:5e3})},ue=async q=>{if(q.preventDefault(),!a){ie.error("Please enter your email first");return}E(!0);try{O==="houseowner"?await Ae.post("/houseowner-auth/resend-verification",{email:a}):await Ae.post("/auth/resend",{email:a}),ie.success("Verification email sent! Please check your inbox.")}catch(xe){ie.error(xe.response?.data?.message||"Failed to resend verification email")}finally{E(!1)}},de=()=>{D("/forgot-password")},G=()=>{D("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),p&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:P,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:a,onChange:q=>r(q.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:i,onChange:q=>l(q.target.value),placeholder:"Password",type:d?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>f(!d),className:"passwordToggle","aria-label":d?"Hide password":"Show password",children:d?e.jsx(In,{size:20}):e.jsx(tn,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:p||_,children:_?`Try again in ${A}s`:p?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:G,disabled:p,children:"Cancel"})]})]}),h&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:h}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:de,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),O==="admin"&&e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email?"," ",e.jsx("button",{type:"button",onClick:ue,disabled:j,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:j?"Sending...":"Resend"})]}),O==="houseowner"&&e.jsx("p",{className:"mt-4 text-sm text-center text-gray-600",children:"Need help? Contact your apartment administrator."})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function n8(){const[t,a]=C.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[r,i]=C.useState({regNo:"",name:"",address:""}),[l,d]=C.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[f,h]=C.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[b,p]=C.useState(1),[w,j]=C.useState(!1),[E,_]=C.useState(!1),[T,A]=C.useState([]);C.useEffect(()=>{(async()=>{try{const q=await(await fetch("https://general.apivcm.shop/countries")).json();A(q.data)}catch(G){console.error("Error fetching countries:",G)}})()},[]);const I=de=>{const G=de.target.value,q=T.find(xe=>xe.country===G);if(a(xe=>({...xe,country:G,mobile:q?q.international_dialing+" ":xe.mobile})),f.country){const xe=D("country",G);d(Ce=>({...Ce,country:xe}))}},O=gr(),M=3,D=(de,G)=>{let q="";switch(de){case"firstname":G.trim()?G.length<3?q="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(G)?G.length>20&&(q="First name cannot exceed 20 characters"):q="First name can only contain letters, and numbers":q="First name is required";break;case"lastname":G.trim()?G.length<3?q="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(G)?G.length>20&&(q="Last name cannot exceed 20 characters"):q="Last name can only contain letters, and numbers":q="Last name is required";break;case"country":G.trim()||(q="Country is required");break;case"mobile":G.trim()?/^\+\d{1,4} \d{9,10}$/.test(G)?G.length>20&&(q="Mobile cannot exceed 20 digits"):q="Mobile must be in format +XXX XXXXXXXXXX (country code followed by 9-10 digits)":q="Mobile Number is required";break;case"email":G.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(G)||(q="Please enter a valid email address"):q="Email is required";break;case"password":G?G.length<8?q="Password must be at least 8 characters":/(?=.*[a-z])/.test(G)?/(?=.*[A-Z])/.test(G)?/(?=.*\d)/.test(G)?/(?=.*[@$!%*?&])/.test(G)||(q="Password must contain at least one special character (@$!%*?&)"):q="Password must contain at least one number":q="Password must contain at least one uppercase letter":q="Password must contain at least one lowercase letter":q="Password is required";break;case"confirmPassword":G?G!==t.password&&(q="Passwords do not match"):q="Please confirm your password";break;case"regNo":G.trim()?G.length<2&&(q="Business REgistration No must be at least 2 characters"):q="Business Registration No is required";break;case"name":G.trim()?G.length<2&&(q="Company name must be at least 2 characters"):q="Company name is required";break;case"address":G.trim()?G.length<3&&(q="Company address must be at least 3 characters"):q="Company address is required";break}return q},B=(de,G=!1)=>{const{name:q,value:xe}=de.target;if(G?i(Ce=>({...Ce,[q]:xe})):a(Ce=>({...Ce,[q]:xe})),f[q]){const Ce=D(q,xe);d(le=>({...le,[q]:Ce}))}},H=(de,G=!1)=>{const{name:q}=de.target;h(le=>({...le,[q]:!0}));const xe=G?r[q]:t[q],Ce=D(q,xe);d(le=>({...le,[q]:Ce}))},z=de=>{if(a(G=>({...G,confirmPassword:de})),f.confirmPassword){const G=D("confirmPassword",de);d(q=>({...q,confirmPassword:G}))}},L=de=>{const G={},q={};let xe=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[de].forEach(le=>{q[le]=!0;const oe=le in r?r[le]:t[le],re=D(le,oe);G[le]=re,re&&(xe=!1)}),h(le=>({...le,...q})),d(le=>({...le,...G})),xe},P=()=>{L(b)?p(b+1):ie.warn("Please fix the validation errors before proceeding")},U=()=>{p(b-1)};async function Z(de){de.preventDefault();let G=!0;for(let q=1;q<=M;q++)if(!L(q)){G=!1,q!==b&&p(q);break}if(!G){ie.warn("Please fix all validation errors before submitting");return}try{const q={regNo:r.regNo,name:r.name,address:r.address},Ce=(await Ae.post("/tenants",q)).data.data.id,le=await Ae.post("/auth/register",{firstname:t.firstname,lastname:t.lastname,country:t.country,mobile:t.mobile,email:t.email,password:t.password,company_id:Ce});ie.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>O("/login"),3e3)}catch(q){console.error("Registration error:",q),q.response?.status===403?ie.error("Access denied. Please try registering again."):q.response?.data?.message?ie.error(q.response.data.message):ie.error("Registration failed. Please try again.")}}const Y=(()=>{if(!t.password)return{strength:0,label:""};let de=0;return t.password.length>=8&&de++,/(?=.*[a-z])/.test(t.password)&&de++,/(?=.*[A-Z])/.test(t.password)&&de++,/(?=.*\d)/.test(t.password)&&de++,/(?=.*[@$!%*?&])/.test(t.password)&&de++,{strength:de,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][de]}})(),ue=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:ue.map(de=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b>=de.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:de.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:de.title})]},de.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(b-1)/(M-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:Z,className:"loginForm",children:[b===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:r.regNo,onChange:de=>B(de,!0),onBlur:de=>H(de,!0),placeholder:"Company Registration No *",className:`loginInput ${l.regNo?"border-red-500":f.regNo&&"border-green-500"}`}),f.regNo&&l.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:r.name,onChange:de=>B(de,!0),onBlur:de=>H(de,!0),placeholder:"Company Name *",className:`loginInput ${l.name?"border-red-500":f.name&&"border-green-500"}`}),f.name&&l.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:r.address,onChange:de=>B(de,!0),onBlur:de=>H(de,!0),placeholder:"Company Address *",className:`loginInput ${l.address?"border-red-500":f.address&&"border-green-500"}`}),f.businessInfo&&l.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.businessInfo]})]})]}),b===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:t.firstname,onChange:de=>B(de,!1),onBlur:de=>H(de,!1),placeholder:"First Name *",className:`loginInput ${l.firstname?"border-red-500":f.firstname&&"border-green-500"}`}),f.firstname&&l.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:t.lastname,onChange:de=>B(de,!1),onBlur:de=>H(de,!1),placeholder:"Last Name *",className:`loginInput ${l.lastname?"border-red-500":f.lastname&&"border-green-500"}`}),f.lastname&&l.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.lastname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"country",list:"country-list",value:t.country||"",onChange:I,onBlur:de=>H(de,!1),placeholder:"Select or type country *",className:`loginInput ${l.country?"border-red-500":f.country&&"border-green-500"}`}),e.jsx("datalist",{id:"country-list",children:T.map(de=>e.jsx("option",{value:de.country},de.country))}),f.country&&l.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:t.mobile,onChange:de=>{const G=t.mobile.split(" ")[0]||"",q=de.target.value.replace(G+" ",""),Ce={target:{name:"mobile",value:G+(q?" "+q.replace(/\D/g,""):"")}};B(Ce,!1)},onBlur:de=>H(de,!1),placeholder:"Mobile * (e.g., +94 771234567)",className:`loginInput ${l.mobile?"border-red-500":f.mobile&&"border-green-500"}`}),f.mobile&&l.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:t.email,onChange:de=>B(de,!1),onBlur:de=>H(de,!1),placeholder:"Email *",className:`loginInput ${l.email?"border-red-500":f.email&&"border-green-500"}`}),f.email&&l.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.email]})]})]}),b===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:t.password,onChange:de=>B(de,!1),onBlur:de=>H(de,!1),placeholder:"Password *",type:w?"text":"password",className:`loginInput ${l.password?"border-red-500":f.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>j(!w),className:"passwordToggle","aria-label":w?"Hide password":"Show password",children:w?e.jsx(In,{size:20}):e.jsx(tn,{size:20})})]}),f.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",Y.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${Y.strength<2?"bg-red-500":Y.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Y.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),f.password&&l.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:t.confirmPassword,onChange:de=>z(de.target.value),onBlur:()=>h(de=>({...de,confirmPassword:!0})),placeholder:"Confirm Password *",type:E?"text":"password",className:`loginInput ${l.confirmPassword?"border-red-500":f.confirmPassword&&t.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>_(!E),className:"passwordToggle","aria-label":E?"Hide password":"Show password",children:E?e.jsx(In,{size:20}):e.jsx(tn,{size:20})})]}),f.confirmPassword&&l.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(yr,{size:14,className:"mr-1"})," ",l.confirmPassword]}),f.confirmPassword&&!l.confirmPassword&&t.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(mn,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[b>1&&e.jsxs("button",{type:"button",onClick:U,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(On,{size:18,className:"mr-1"}),"Back"]}),b<M?e.jsxs("button",{type:"button",onClick:P,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(P0,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>O("/"),children:"Cancel"})]})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function i8(){const[t]=rd(),a=gr(),[r,i]=C.useState(!1),[l,d]=C.useState("");C.useEffect(()=>{const h=t.get("token"),b=t.get("id");h&&b&&f(h,b)},[t]);const f=async(h,b)=>{try{i(!0);const p=await Ae.post("/auth/verify",{token:h,id:b});d(p.data.message),ie.success("Email verified successfully!"),setTimeout(()=>{a("/login")},3e3)}catch(p){console.error("Verification error:",p),d(p.response?.data?.message||"Verification failed"),ie.error("Email verification failed")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),r?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):l?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:l}),e.jsx("button",{onClick:()=>a("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function Mr(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),{auth:l,setAuth:d}=C.useContext(zr),{logout:f,resetActivityTimer:h}=C.useContext(zr),b=gr(),[p,w]=C.useState(!1);C.useEffect(()=>{const A=localStorage.getItem("theme"),I=window.matchMedia("(prefers-color-scheme: dark)").matches;A==="dark"||!A&&I?(i(!0),document.documentElement.classList.add("dark")):(i(!1),document.documentElement.classList.remove("dark"))},[]),C.useEffect(()=>{if(!l.accessToken)return;const A=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],I=()=>h();A.forEach(M=>window.addEventListener(M,I,{passive:!0}));const O=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",O),()=>{A.forEach(M=>window.removeEventListener(M,I)),document.removeEventListener("visibilitychange",O)}},[l.accessToken,h]);const j=async()=>{try{await Ae.post("/auth/logout"),f(),ie.success("Logged out successfully"),b("/")}catch(A){console.error("Logout error:",A),f(),ie.success("Logged out successfully"),b("/")}},E=()=>{w(!0)},_=()=>{w(!1)},T=()=>{const A=!r;i(A),A?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:T,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:r?"Switch to light mode":"Switch to dark mode",children:r?e.jsx(Em,{size:20}):e.jsx(km,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:l?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:l?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:l?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:E,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Nm,{size:20})})})]})]})}),t&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(As,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:T,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[r?e.jsx(Em,{size:18,className:"mr-2"}):e.jsx(km,{size:18,className:"mr-2"}),r?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:E,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(Nm,{size:18,className:"mr-2"}),"Logout"]})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:_,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function hr(){const{auth:t}=C.useContext(zr),a=Fn(),[r,i]=C.useState(!1),[l,d]=C.useState(null),[f,h]=C.useState([]),[b,p]=C.useState(!0),[w,j]=C.useState(Date.now()),[E,_]=C.useState(!1),[T,A]=C.useState(!1),I=t?.user?.role||"Admin",O=t?.user?.id;C.useEffect(()=>{const G=()=>{A(window.innerWidth<1024)};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]),C.useEffect(()=>{_(!1)},[a.pathname]);const M=["employee_dashboard","profile"],D={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:qr,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:Gu,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:qr,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:Gu,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:si,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:xa,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:O6,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},complaint_management:{id:"complaint_management",name:"Complaints",icon:eb,isConstant:!1,children:[{name:"Complaint Categories",path:"/complaint-categories"},{name:"All Complaints",path:"/view-complaints"}]},company_management:{id:"company_management",name:"Company Set up",icon:Ii,isConstant:!1,children:[{name:"Company View",path:"/company-setup"},{name:"Import House owner",path:"/bulk-import-houseowner"}]},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:si,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:xa,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:Jm,isConstant:!1},my_complaints:{id:"my_complaints",name:"My Complaints",path:"/my-complaints",icon:eb,isConstant:!1}},B=()=>["admin_dashboard","users_management","apartments_management","expenses_management","complaint_management","company_management","admin_profile"],H=async()=>{try{if(p(!0),I==="Admin"){h(B()),p(!1);return}try{const G=await Ae.get("/role-components/user/components");if(G.data.success){const xe=(G.data.data||[]).filter(le=>!M.includes(le)),Ce=[...M,...xe];h(Ce)}else console.error("API returned error:",G.data.message),h([...M])}catch(G){console.error("Error fetching user components",G),h([...M])}}catch(G){console.error("Error in fetchUserComponents",G),h(I==="Admin"?B():[...M])}finally{p(!1)}};C.useEffect(()=>{H()},[I,O,w]);const z=()=>{j(Date.now())},P=f.map(q=>D[q]).filter(Boolean),U=G=>a.pathname===G,Z=G=>d(l===G?null:G),ae=()=>_(!E),Y=()=>e.jsx("button",{onClick:ae,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:E?e.jsx(yr,{size:24}):e.jsx(Dl,{size:24})}),ue=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${r?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!r&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:z,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(jm,{size:16})})]}),r&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!r&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(G=>{if(!G)return null;const q=G.icon;if(G.children){const xe=G.children.some(Ce=>Ce.path&&U(Ce.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z(G.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===G.name||xe?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:G.name})]}),!r&&G.children&&G.children.length>0&&(l===G.name?e.jsx(Cl,{size:16}):e.jsx(ai,{size:16}))]}),l===G.name&&!r&&G.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:G.children.map(Ce=>e.jsx(ro,{to:Ce.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${U(Ce.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:Ce.name},Ce.name))})]},G.id)}return e.jsxs(ro,{to:G.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${U(G.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(q,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:G.name})]},G.id)})})]}),de=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:E?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:z,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(jm,{size:16})}),e.jsx("button",{onClick:ae,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx(yr,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(G=>{if(!G)return null;const q=G.icon;if(G.children){const xe=G.children.some(Ce=>Ce.path&&U(Ce.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>Z(G.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===G.name||xe?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:"mr-3"}),e.jsx("span",{children:G.name})]}),G.children&&G.children.length>0&&(l===G.name?e.jsx(Cl,{size:16}):e.jsx(ai,{size:16}))]}),l===G.name&&G.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:G.children.map(Ce=>e.jsx(ro,{to:Ce.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${U(Ce.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:Ce.name},Ce.name))})]},G.id)}return e.jsxs(ro,{to:G.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${U(G.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(q,{size:20,className:"mr-3"}),e.jsx("span",{children:G.name})]},G.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(Y,{}),E&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:ae}),e.jsx(de,{}),e.jsx(ue,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function Wv({onClose:t,onCreated:a}){const[r,i]=C.useState({name:"",address:"",city:"",image:null}),[l,d]=C.useState(!1),[f,h]=C.useState(""),b=w=>{const{name:j,value:E,files:_}=w.target;i(T=>({...T,[j]:_?_[0]:E}))},p=async w=>{w.preventDefault(),h(""),d(!0);try{const j=new FormData;j.append("name",r.name),j.append("address",r.address),j.append("city",r.city),r.image&&j.append("picture",r.image);const E=await Ae.post("/apartments",j,{headers:{"Content-Type":"multipart/form-data"}});d(!1),a&&a(),t&&t()}catch(j){ie.error("Failed to create apartment"),console.error(j),d(!1)}};return e.jsxs("form",{onSubmit:p,className:"flex flex-col gap-4",children:[f&&e.jsx("p",{className:"text-red-500",children:f}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:r.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:r.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:l?"Saving...":"Save"})]})]})}function l8(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),l=gr(),[d,f]=C.useState([]),[h,b]=C.useState({}),[p,w]=C.useState({}),[j,E]=C.useState(!0),[_,T]=C.useState(null),[A,I]=C.useState(null),[O,M]=C.useState(!1),[D,B]=C.useState(null),[H,z]=C.useState(null),[L,P]=C.useState(!1),[U,Z]=C.useState({name:"",address:"",description:"",contact_number:""}),ae=()=>P(!1),Y=le=>{P(!1),le&&(ie.success("Apartment created"),ue())};C.useEffect(()=>{const le=()=>{i(window.innerWidth<768)};return le(),window.addEventListener("resize",le),()=>window.removeEventListener("resize",le)},[]);const ue=async()=>{try{const le=await Ae.get("/apartments");le.data.success&&Array.isArray(le.data.data)?(f(le.data.data),await Promise.all(le.data.data.map(oe=>de(oe.id)))):Array.isArray(le.data)?(f(le.data),await Promise.all(le.data.map(oe=>de(oe.id)))):f([])}catch(le){console.error("Error loading apartments:",le),le.response?.status===401?(T("Unauthorized. Please login."),l("/login")):le.response?.status===400?T("Company info missing."):T("Failed to load apartments.")}finally{E(!1)}},de=async le=>{try{const oe=await Ae.get(`/floors?apartment_id=${le}`);oe.data.success&&Array.isArray(oe.data.data)&&(b(re=>({...re,[le]:oe.data.data})),oe.data.data.forEach(re=>{G(le,re.id)}))}catch(oe){console.error("Error loading floors:",oe),ie.error("Failed to load floors")}},G=async(le,oe)=>{try{const re=await Ae.get(`/houses?apartment_id=${le}&floor_id=${oe}`);re.data.success&&Array.isArray(re.data.data)&&w(Q=>({...Q,[oe]:re.data.data}))}catch(re){console.error("Error loading houses:",re)}},q=async le=>{I(le),M(!0),await de(le.id)},xe=le=>{B(le),z(H===le?null:le)},Ce=le=>{switch(le){case"occupied":return"bg-green-500 hover:bg-green-600";case"vacant":return"bg-gray-400 hover:bg-gray-400 dark:bg-gray-300 dark:hover:bg-gray-600";case"maintenance":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-gray-300 hover:bg-gray-400"}};return C.useEffect(()=>{ue()},[]),j?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Loading Apartments..."})})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 shadow-sm",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{size:r?28:32,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})})]})})}),_&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300",children:_})})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"All Apartments"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[d.map(le=>{const oe=h[le.id]||[],re=oe.flatMap(se=>p[se.id]||[]),Q=re.filter(se=>se.status==="occupied").length,X=re.length?Math.round(Q/re.length*100):0;return e.jsxs("div",{onClick:()=>q(le),className:"bg-white dark:bg-gray-800 rounded-xl shadow p-5 cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(xa,{size:20,className:"text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:le.name})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:le.address||"No address provided"})]}),e.jsx(P0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:oe.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Floors"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:re.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Houses"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Occupied"}),e.jsxs("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:[X,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 dark:bg-green-400",style:{width:`${X}%`}})})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${le.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:le.is_active?e.jsxs(e.Fragment,{children:[e.jsx(_s,{size:12,className:"mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(z0,{size:12,className:"mr-1"}),"Inactive"]})})})]},le.id)}),e.jsxs("div",{onClick:()=>P(!0),className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-800 dark:to-gray-700 border-2 border-dashed border-purple-300 dark:border-gray-600 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-gray-500 transition-all duration-200 min-h-[200px] group",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/50 transition-colors",children:e.jsx(qa,{size:32,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"Add New Apartment"}),e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 text-center",children:"Click to create a new apartment complex"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-5",children:[e.jsx("div",{onClick:()=>l("/userview"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsx(si,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Users"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage users"})]})]})}),e.jsx("div",{onClick:()=>l("/complaint-categories"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(ld,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Service Category"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage categories"})]})]})}),e.jsx("div",{onClick:()=>l("/bills-and-calculations"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(OC,{size:20,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Bills"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create or view bills"})]})]})}),e.jsx("div",{onClick:()=>l("/view-complaints"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 rounded-lg",children:e.jsx(Er,{size:20,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Complaints"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View reports"})]})]})}),e.jsx("div",{onClick:()=>l("/bill-payments"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(_s,{size:20,className:"text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Bill Reviews"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record payments"})]})]})})]})]})]})})]}),O&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(xa,{size:28}),A.name]}),e.jsx("p",{className:"text-purple-100 mt-1",children:A.address})]}),e.jsx("button",{onClick:()=>M(!1),className:"text-white hover:text-gray-200 text-2xl",children:""})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 dark:bg-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Vacant"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Maintenance"})]})]}),e.jsx("div",{className:"space-y-8",children:h[A.id]?.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(xa,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No floors added yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add floors to start managing houses"})]}):h[A.id]?.map(le=>{const oe=p[le.id]||[],re=oe.filter(Q=>Q.status==="occupied").length;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[e.jsxs("div",{onClick:()=>xe(le.id),className:"flex items-center justify-between mb-4 cursor-pointer p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Floor ",le.floor_id]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[re," occupied  ",oe.length," total houses"]})]})}),e.jsx(P0,{size:24,className:`text-gray-500 transition-transform ${H===le.id?"rotate-90":""}`})]}),H===le.id&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-1",children:oe.length===0?e.jsxs("div",{className:"col-span-full text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(H0,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No houses added to this floor"})]}):oe.map(Q=>e.jsx("div",{className:"relative",title:`${Q.house_id||Q.house_number} - ${Q.status}`,children:e.jsx("div",{className:`${Ce(Q.status)} w-14 h-14 rounded-md flex items-center justify-center cursor-pointer transition-all duration-200 transform hover:scale-105 shadow hover:shadow-md`,children:e.jsx("span",{className:"font-bold text-white dark:text-gray-900 text-sm",children:Q.house_id||Q.house_number})})},Q.id))})})]},le.id)})})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:ae,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(Wv,{onClose:ae,onCreated:Y})]})})})]})}function o8({onClose:t,onEdited:a,apartment:r}){const[i,l]=C.useState({name:"",address:"",city:"",image:null}),[d,f]=C.useState(!1),[h,b]=C.useState("");C.useEffect(()=>{r&&l({name:r.name||"",address:r.address||"",city:r.city||"",image:null})},[r]);const p=j=>{const{name:E,value:_,files:T}=j.target;l(A=>({...A,[E]:T?T[0]:_}))},w=async j=>{j.preventDefault(),b(""),f(!0);try{const E=new FormData;E.append("name",i.name),E.append("address",i.address),E.append("city",i.city),i.image&&E.append("picture",i.image);const _=await Ae.put(`/apartments/${r.id}`,E,{headers:{"Content-Type":"multipart/form-data"}});f(!1),a&&a(),t&&t()}catch(E){console.error("Update error:",E),ie.error(E.response?.data?.message||"Failed to update apartment"),f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:i.name,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:i.address,onChange:p,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:i.city,onChange:p,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Updating...":"Update"})]})]})}function c8({isOpen:t,onClose:a,onImportSuccess:r}){const[i,l]=C.useState(null),[d,f]=C.useState(!1),[h,b]=C.useState(!1),[p,w]=C.useState(null),j=B=>{B.preventDefault(),f(!0)},E=B=>{B.preventDefault(),f(!1)},_=B=>{B.preventDefault(),f(!1);const H=B.dataTransfer.files[0];H&&A(H)},T=B=>{const H=B.target.files[0];H&&A(H)},A=B=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(B.type)){ie.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(B.size>10*1024*1024){ie.error("File size must be less than 10MB");return}l(B),w(null)},I=async()=>{if(!i){ie.error("Please select a file first");return}b(!0);const B=new FormData;B.append("excelFile",i);try{const H=await Ae.post("/bulk-import/import",B,{headers:{"Content-Type":"multipart/form-data"}});w(H.data.data),r&&r()}catch(H){console.error("Import error:",H),ie.error(H.response?.data?.message||"Failed to import data")}finally{b(!1)}},O=async()=>{try{const B=await Ae.get("/bulk-import/template",{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([B.data])),z=document.createElement("a");z.href=H,z.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild(z),z.click(),z.remove(),window.URL.revokeObjectURL(H),ie.success("Template downloaded successfully!")}catch(B){console.error("Download error:",B),ie.error("Failed to download template")}},M=()=>{l(null),w(null)},D=()=>{M(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:D,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(yr,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!p&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(po,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:j,onDragLeave:E,onDrop:_,children:[e.jsx(Ps,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:i?i.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:T})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:D,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{onClick:I,disabled:!i||h,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{size:16}),"Import Data"]})})]})]}),p&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_s,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",p.created.houses," houses from ",p.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Ii,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:p.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(pf,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:p.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(qr,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:p.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx(pC,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:p.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),p.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(na,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[p.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:p.errors.map((B,H)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(z0,{size:14}),B]},H))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:M,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:D,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function d8({apartment:t,onClose:a,onUploadSuccess:r}){const[i,l]=C.useState(!1),[d,f]=C.useState([]),[h,b]=C.useState([]),[p,w]=C.useState(!0),j=C.useRef(null);C.useEffect(()=>{A()},[t.id]);const E=D=>{const B=Array.from(D.target.files);b(H=>[...H,...B])},_=D=>{b(B=>B.filter((H,z)=>z!==D))},T=async()=>{if(h.length===0){ie.error("Please select at least one file");return}try{l(!0);const D=new FormData;h.forEach(H=>{D.append("documents",H)}),D.append("apartmentId",t.id),(await Ae.post("/apartment-documents/upload",D,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),r?.(),A(),j.current&&(j.current.value=""))}catch(D){console.error("Upload error:",D);const B=D.response?.data?.message||"Failed to upload documents";ie.error(B)}finally{l(!1)}},A=async()=>{try{w(!0);const D=await Ae.get(`/apartment-documents/apartments/${t.id}/documents`);D.data.success&&f(D.data.data)}catch(D){console.error("Error loading documents:",D);const B=D.response?.data?.message||"Failed to load documents";ie.error(B)}finally{w(!1)}},I=async D=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Ae.delete(`/apartment-documents/documents/${D}`),ie.success("Document deleted successfully"),A()}catch(B){console.error("Delete error:",B);const H=B.response?.data?.message||"Failed to delete document";ie.error(H)}},O=async D=>{try{const B=await Ae.get(`/apartment-documents/documents/${D.id}/download`,{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([B.data])),z=document.createElement("a");z.href=H,z.setAttribute("download",D.original_name||D.file_name),document.body.appendChild(z),z.click(),z.remove(),window.URL.revokeObjectURL(H)}catch(B){console.error("Download error:",B);const H=B.response?.data?.message||"Failed to download document";ie.error(H)}},M=D=>{if(D===0)return"0 Bytes";const B=1024,H=["Bytes","KB","MB","GB"],z=Math.floor(Math.log(D)/Math.log(B));return parseFloat((D/Math.pow(B,z)).toFixed(2))+" "+H[z]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",t.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:j,onChange:E,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>j.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ps,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),h.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:h.map((D,B)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:D.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:M(D.size)})]})]}),e.jsx("button",{onClick:()=>_(B),className:"text-red-500 hover:text-red-700",children:e.jsx(yr,{size:16})})]},B))})]}),h.length>0&&e.jsx("button",{onClick:T,disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{size:20}),"Upload ",h.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),p?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(wr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:d.map(D=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(wr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D.original_name||D.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[M(D.file_size),"  Uploaded on ",new Date(D.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>O(D),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(po,{size:18})}),e.jsx("button",{onClick:()=>I(D.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:18})})]})]},D.id))})]})]})}function u8(){const{auth:t}=C.useContext(zr),a=gr(),[r,i]=C.useState(!1),[l,d]=C.useState(!1),[f,h]=C.useState(window.innerWidth<768),[b,p]=C.useState([]),[w,j]=C.useState(!0),[E,_]=C.useState(null),[T,A]=C.useState(!1),[I,O]=C.useState(!1),[M,D]=C.useState(null),[B,H]=C.useState(!1),[z,L]=C.useState(null),[P,U]=C.useState(!1),[Z,ae]=C.useState(!1),[Y,ue]=C.useState(null),[de,G]=C.useState(!1),[q,xe]=C.useState(null);C.useEffect(()=>{const pe=()=>{h(window.innerWidth<768)};return window.addEventListener("resize",pe),()=>window.removeEventListener("resize",pe)},[]);const Ce=()=>{A(!0)},le=()=>{U(!0)},oe=()=>{U(!1)},re=pe=>{D(pe),O(!0)},Q=pe=>{a(`/floors/${pe.id}`)},X=()=>{A(!1)},se=()=>{O(!1),D(null)},ne=()=>{Le(),A(!1),ie.success("Apartment created successfully!")},K=()=>{Le(),O(!1),D(null),ie.success("Apartment updated successfully!")},Se=()=>{Le(),ie.success("Bulk import completed successfully!")},we=pe=>{L(pe),H(!0)},Ve=()=>{H(!1)},Le=async()=>{try{j(!0),_(null);const pe=await Ae.get("/apartments");pe.data.success&&Array.isArray(pe.data.data)?p(pe.data.data):Array.isArray(pe.data)?p(pe.data):(console.warn("Unexpected response format:",pe.data),p([]))}catch(pe){console.error("Error loading apartments:",pe),pe.response?.status===401?(_("Unauthorized. Please login again."),a("/login")):pe.response?.status===400?_("Company information missing. Please contact support."):_("Failed to load apartments. Please try again.")}finally{j(!1)}};C.useEffect(()=>{Le()},[]);const ot=async pe=>{try{const Ge=await Ae.patch(`/apartments/${pe.id}/toggle`);ie.success(Ge.data.message),Le()}catch(Ge){console.error("Error toggling apartment:",Ge),ie.error("Failed to toggle apartment status")}},J=pe=>{ue(pe),ae(!0)},Ne=async()=>{try{if(!Y)return;await Ae.delete(`/apartments/${Y.id}`),ie.success("Apartment deleted successfully"),ae(!1),ue(null),Le()}catch(pe){console.error("Delete apartment error:",pe),ie.error("Failed to delete apartment")}},Ie=()=>{ae(!1),ue(null)},ke=pe=>{xe(pe),G(!0)},Qe=()=>{G(!1),xe(null)},_e=()=>{ie.success("Document uploaded successfully!")},ut=()=>e.jsx("button",{onClick:()=>d(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dl,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ut,{}),e.jsx(hr,{onCollapse:i,isMobileOpen:l,onMobileClose:()=>d(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${r?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>d(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{size:f?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Apartments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your apartment buildings"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:le,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Ps,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Upload Excel"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(qa,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:w?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Ut,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading apartments..."})]}):E?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:E}),e.jsx("button",{onClick:Le,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):b.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(en,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No apartments found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first apartment"}),e.jsx("button",{onClick:Ce,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Apartment"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Apartments: ",b.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[b.length," items"]})]})}),b.map((pe,Ge)=>e.jsxs("div",{onClick:()=>pe.is_active&&Q(pe),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${pe.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[pe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${pe.picture}`,alt:pe.name,className:"w-12 h-12 object-cover rounded-lg mr-3",onError:ze=>{console.error("Image failed to load:",pe.picture),ze.target.style.display="none";const Pe=ze.target.parentNode.querySelector(".image-fallback");Pe&&(Pe.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx(en,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:pe.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:pe.city||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:ze=>{ze.stopPropagation(),ke(pe)},className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(wr,{size:16})}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),re(pe)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Na,{size:16})}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),we(pe)},className:`p-2 rounded-lg ${pe.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:pe.is_active?"Deactivate":"Activate",children:pe.is_active?e.jsx(Al,{size:16}):e.jsx(_l,{size:16})}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),J(pe)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Er,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mt-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Address:"}),e.jsx("span",{className:"truncate",children:pe.address})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Floors:"}),e.jsx("span",{children:pe.floors})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Units:"}),e.jsx("span",{children:pe.houses})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${pe.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:pe.is_active?"Active":"Inactive"})]})]})]},pe.id||Ge))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Apartments"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[b.length," apartments"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((pe,Ge)=>e.jsxs("tr",{onClick:()=>pe.is_active&&Q(pe),className:`transition-colors cursor-pointer ${pe.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:pe.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${pe.picture}`,alt:pe.name,className:"w-12 h-12 object-cover rounded-lg",onError:ze=>{console.error("Image failed to load:",pe.picture),ze.target.style.display="none";const Pe=ze.target.parentNode.querySelector(".image-fallback");Pe&&(Pe.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(en,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:pe.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:pe.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:pe.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:pe.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:pe.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ze=>{ze.stopPropagation(),ke(pe)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(wr,{size:20})}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),re(pe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),we(pe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:pe.is_active?"Deactivate":"Activate",children:pe.is_active?e.jsx(Al,{size:25}):e.jsx(_l,{size:25})}),e.jsx("button",{onClick:ze=>{ze.stopPropagation(),J(pe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},pe.id||Ge))})]})]})})})]})})]}),T&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:X,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(Wv,{onClose:X,onCreated:ne})]})})}),I&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx("button",{onClick:se,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(o8,{onClose:se,onEdited:K,apartment:M})]})})}),e.jsx(c8,{isOpen:P,onClose:oe,onImportSuccess:Se}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:z?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:z?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Ve,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{z&&(ot(z),H(!1),L(null))},className:`flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors ${z?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:z?.is_active?"Deactivate":"Activate"})]})]})}),Z&&Y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',Y.name,'"?']}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Ie,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ne,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),de&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:["Documents - ",q.name]}),e.jsx("button",{onClick:Qe,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(d8,{apartment:q,onClose:Qe,onUploadSuccess:_e})]})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function f8({onClose:t,onCreated:a,roles:r,rolesLoading:i}){const[l,d]=C.useState({email:"",role_id:""}),[f,h]=C.useState(!1),[b,p]=C.useState(""),w=E=>{const{name:_,value:T}=E.target;d(A=>({...A,[_]:T}))},j=async E=>{E.preventDefault(),p(""),h(!0);try{const _=await Ae.post("/auth/invite",{email:l.email,role_id:l.role_id});ie.success("Invitation sent successfully!"),a&&a(),t&&t()}catch(_){console.error("Invite error:",_);const T=_.response?.data?.message||"Failed to send invitation. Try again.";p(T),ie.error(T)}finally{h(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4 text-black dark:text-white",children:[b&&e.jsx("p",{className:"text-red-500",children:b}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:l.email,onChange:w,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:l.role_id,onChange:w,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Select Role"}),i?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):r.map(E=>e.jsx("option",{value:E.id,children:E.role_name},E.id))]}),i&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Ut,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||i,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function x8({user:t,onClose:a,onUpdated:r,roles:i,rolesLoading:l}){const[d,f]=C.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[h,b]=C.useState(!1),[p,w]=C.useState(""),[j,E]=C.useState(!1),[_,T]=C.useState(!1),[A,I]=C.useState(!1),[O,M]=C.useState("");C.useEffect(()=>{t&&(f({firstname:t.firstname||"",lastname:t.lastname||"",email:t.email||"",country:t.country||"",mobile:t.mobile||"",role_id:t.role_id||"",password:"",confirmPassword:""}),M(t.email||""))},[t]);const D=z=>{const{name:L,value:P}=z.target;f(U=>({...U,[L]:P})),L==="email"&&I(P!==O)},B=async()=>{try{b(!0),await Ae.post("/auth/resend",{email:d.email}),ie.success("Verification email sent successfully!"),I(!1)}catch(z){console.error("Error sending verification email:",z),ie.error(z.response?.data?.message||"Failed to send verification email")}finally{b(!1)}},H=async z=>{if(z.preventDefault(),b(!0),w(""),d.password&&d.password!==d.confirmPassword){w("Passwords do not match"),b(!1);return}if(d.password&&d.password.length<8){w("Password must be at least 8 characters long"),b(!1);return}try{const L={firstname:d.firstname,lastname:d.lastname,email:d.email,country:d.country,mobile:d.mobile,role_id:d.role_id};d.password&&(L.password=d.password);const P=await Ae.put(`/auth/users/${t.id}`,L);P.data.success?(ie.success("User updated successfully!"),P.data.data.requires_verification&&await B(),r?.(P.data.data)):w(P.data.message||"Failed to update user")}catch(L){console.error("Error updating user:",L),w(L.response?.data?.message||"Failed to update user")}finally{b(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),p&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:p}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:d.firstname,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:d.lastname,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:d.email,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),A&&e.jsx("button",{type:"button",onClick:B,disabled:h,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(Cm,{size:16})})]}),A&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:d.country,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:d.mobile,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:d.role_id,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Select Role"}),l?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):i.map(z=>e.jsx("option",{value:z.id,children:z.role_name},z.id))]}),l&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Ut,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:j?"text":"password",name:"password",value:d.password,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>E(!j),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:j?e.jsx(In,{size:16}):e.jsx(tn,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:_?"text":"password",name:"confirmPassword",value:d.confirmPassword,onChange:D,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>T(!_),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_?e.jsx(In,{size:16}):e.jsx(tn,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||l,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function h8({user:t,onClose:a,onAssignSuccess:r}){const[i,l]=C.useState([]),[d,f]=C.useState([]),[h,b]=C.useState(!0),[p,w]=C.useState(!1),[j,E]=C.useState(""),[_,T]=C.useState(new Set);C.useEffect(()=>{t&&(async()=>{try{b(!0);const U=await Ae.get("/bills");if(U.data.success){const ae=(U.data.data||[]).filter(Y=>Y.billtype?.toLowerCase()==="measurable");l(ae)}const Z=await Ae.get(`/user-bills/users/${t.id}/bills`);if(Z.data.success){const Y=(Z.data.data||[]).filter(de=>de.billtype?.toLowerCase()==="measurable");f(Y);const ue=new Set(Y.map(de=>de.id));T(ue)}}catch(U){console.error("Error loading bill data:",U),ie.error("Failed to load bill data")}finally{b(!1)}})()},[t]);const A=i.filter(P=>P.bill_name?.toLowerCase().includes(j.toLowerCase())),I=P=>d.some(U=>U.id===P),O=P=>_.has(P),M=P=>{T(U=>{const Z=new Set(U);return Z.has(P)?Z.delete(P):Z.add(P),Z})},D=()=>{const P=new Set(i.map(U=>U.id));T(P)},B=()=>{T(new Set)},H=async()=>{try{w(!0);const P=Array.from(_);await Ae.post(`/user-bills/users/${t.id}/bills`,{bill_ids:P}),ie.success("Measurable bills assigned successfully!"),r?.(),a()}catch(P){console.error("Error assigning bills:",P),ie.error(P.response?.data?.message||"Failed to assign bills")}finally{w(!1)}},z=P=>d.find(U=>U.id===P),L=P=>{try{return new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(As,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:j,onChange:P=>E(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:D,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:B,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Pu,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:j?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:A.map(P=>{const U=O(P.id),Z=I(P.id),ae=z(P.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${U?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>M(P.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Sa,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:P.bill_name}),Z&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(wr,{size:14}),e.jsx("span",{className:"capitalize",children:P.billtype}),P.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",L(P.created_at)]})}),ae&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",L(ae.assigned_at||ae.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:U?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(mn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},P.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.size," measurable bill(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:p,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:H,disabled:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[p&&e.jsx(Ut,{size:16,className:"animate-spin"}),e.jsx("span",{children:p?"Saving...":"Save Assignments"})]})]})]})]})}function m8({user:t,onClose:a,onAssignSuccess:r}){const[i,l]=C.useState([]),[d,f]=C.useState([]),[h,b]=C.useState(!0),[p,w]=C.useState(!1),[j,E]=C.useState(""),[_,T]=C.useState(new Set),[A,I]=C.useState("categories");C.useEffect(()=>{t&&(async()=>{try{b(!0);const ae=await Ae.get("/categories");if(ae.data.success){const ue=(ae.data.data||[]).filter(de=>de.is_active!==!1);l(ue)}const Y=await Ae.get(`/technician-categories/technicians/${t.id}/categories`);if(Y.data.success){const ue=Y.data.data||[];f(ue);const de=new Set(ue.map(G=>G.category_id));T(de)}}catch(ae){console.error("Error loading category data:",ae),ie.error("Failed to load category data")}finally{b(!1)}})()},[t]);const O=i.filter(Z=>Z.name?.toLowerCase().includes(j.toLowerCase())||Z.description?.toLowerCase().includes(j.toLowerCase())),M=Z=>d.some(ae=>ae.category_id===Z),D=Z=>_.has(Z),B=Z=>{T(ae=>{const Y=new Set(ae);return Y.has(Z)?Y.delete(Z):Y.add(Z),Y})},H=()=>{const Z=new Set(i.map(ae=>ae.id));T(Z)},z=()=>{T(new Set)},L=async()=>{try{w(!0);const Z=Array.from(_);await Ae.post(`/technician-categories/technicians/${t.id}/categories`,{category_ids:Z}),ie.success("Categories assigned successfully!"),r?.(),a()}catch(Z){console.error("Error assigning categories:",Z),ie.error(Z.response?.data?.message||"Failed to assign categories")}finally{w(!1)}},P=Z=>d.find(ae=>ae.category_id===Z),U=Z=>{try{return new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(As,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:j,onChange:Z=>E(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:z,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading categories..."})]}):O.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Uv,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No categories found"}),e.jsx("p",{className:"text-sm",children:j?"Try adjusting your search terms":"No categories available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Only active categories are shown here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:O.map(Z=>{const ae=D(Z.id),Y=M(Z.id),ue=P(Z.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${ae?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(Z.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(jC,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:Z.name}),Y&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Assigned"}),Z.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:"Inactive"})]}),Z.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:Z.description}),e.jsx("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(D6,{size:12}),e.jsx("span",{children:"Service Category"})]})}),ue&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-1",children:[e.jsx(Tn,{size:12}),e.jsxs("span",{children:["Assigned: ",U(ue.assigned_at)]})]})]}),e.jsx("div",{className:"flex items-center ml-4",children:ae?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(mn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},Z.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.size," category(ies) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:p,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:L,disabled:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[p&&e.jsx(Ut,{size:16,className:"animate-spin"}),e.jsx("span",{children:p?"Saving...":"Save Assignments"})]})]})]})]})}function g8({user:t,onClose:a,onAssignSuccess:r}){const[i,l]=C.useState([]),[d,f]=C.useState([]),[h,b]=C.useState(!0),[p,w]=C.useState(!1),[j,E]=C.useState(""),[_,T]=C.useState(new Set),[A,I]=C.useState("apartments");C.useEffect(()=>{t&&(async()=>{try{b(!0);const ae=await Ae.get("/apartments");ae.data.success&&l(ae.data.data||[]);const Y=await Ae.get(`/user-apartments/users/${t.id}/apartments`);if(Y.data.success){const ue=Y.data.data||[];f(ue);const de=new Set(ue.map(G=>G.id));T(de)}}catch(ae){console.error("Error loading apartment data:",ae),ie.error("Failed to load apartment data")}finally{b(!1)}})()},[t]);const O=i.filter(Z=>Z.name?.toLowerCase().includes(j.toLowerCase())||Z.address?.toLowerCase().includes(j.toLowerCase())||Z.city?.toLowerCase().includes(j.toLowerCase())),M=Z=>d.some(ae=>ae.id===Z),D=Z=>_.has(Z),B=Z=>{T(ae=>{const Y=new Set(ae);return Y.has(Z)?Y.delete(Z):Y.add(Z),Y})},H=()=>{const Z=new Set(i.map(ae=>ae.id));T(Z)},z=()=>{T(new Set)},L=async()=>{try{w(!0);const Z=Array.from(_);await Ae.post(`/user-apartments/users/${t.id}/apartments`,{apartment_ids:Z}),r?.(),a()}catch(Z){console.error("Error assigning apartments:",Z),ie.error(Z.response?.data?.message||"Failed to assign apartments")}finally{w(!1)}},P=Z=>d.find(ae=>ae.id===Z),U=Z=>{try{return new Date(Z).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(xa,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.firstname," ",t.lastname]})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(yr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>I("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${A==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>I("bills"),className:`px-4 py-2 font-semibold 
                ${A==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"}),e.jsx("button",{onClick:()=>I("complaint_categories"),className:`px-4 py-2 font-semibold 
                ${A==="complaint_categories"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Service Categories"})]}),A==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(As,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:j,onChange:Z=>E(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:z,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):O.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(xa,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:j?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:O.map(Z=>{const ae=D(Z.id),Y=M(Z.id),ue=P(Z.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${ae?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(Z.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(qr,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:Z.name}),Y&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(El,{size:14}),e.jsxs("span",{children:[Z.address,", ",Z.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[Z.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[Z.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:Z.is_active?"Active":"Inactive"})]}),ue&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",U(ue.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:ae?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(mn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},Z.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.size," apartment(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:p,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:L,disabled:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[p&&e.jsx(Ut,{size:16,className:"animate-spin"}),e.jsx("span",{children:p?"Saving...":"Save Assignments"})]})]})]})]}):A==="bills"?e.jsx(h8,{user:t,onClose:a,onAssignSuccess:r}):e.jsx(m8,{user:t,onClose:a,onAssignSuccess:r})]})})}function p8({onClose:t,onCreated:a}){const[r,i]=C.useState({role_name:""}),[l,d]=C.useState(!1),[f,h]=C.useState(""),[b,p]=C.useState([]),w=E=>{const{name:_,value:T}=E.target;i(A=>({...A,[_]:T})),_==="role_name"&&f&&h("")},j=async E=>{if(E.preventDefault(),d(!0),h(""),!r.role_name.trim()){h("Please fill in all required fields"),d(!1);return}try{const _=await Ae.post("/roles",{role_name:r.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});_.data.success?(a?.(_.data.data),ie.success("Role created successfully"),t()):h(_.data.message||"Failed to save role")}catch(_){console.error("Error saving role:",_);const T=_.response?.data?.message||"Error saving role. Please try again.";h(T),_.response?.status===409&&ie.error(T)}finally{d(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:r.role_name,onChange:w,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}const y8=({role:t,onClose:a,onAssign:r})=>{const[i,l]=C.useState([]),[d,f]=C.useState(!1),[h,b]=C.useState(!1),w=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"},{id:"my_complaints",name:"My Complaints",description:"View and manage your complaints",category:"Personal",icon:"ClipboardList"}].reduce((O,M)=>{const D=M.category;return O[D]||(O[D]=[]),O[D].push(M),O},{});C.useEffect(()=>{t&&j()},[t]);const j=async()=>{try{f(!0);const O=await Ae.get(`/role-components/role/${t.id}`);if(O.data.success){const M=O.data.data||[];l(M)}}catch(O){console.error("Error loading role components:",O),l([])}finally{f(!1)}},E=O=>{l(M=>M.includes(O)?M.filter(D=>D!==O):[...M,O])},_=O=>{const M=w[O].map(D=>D.id);l(D=>{const B=[...D];return M.forEach(H=>{B.includes(H)||B.push(H)}),B})},T=O=>{const M=w[O].map(D=>D.id);l(D=>D.filter(B=>!M.includes(B)))},A=async()=>{try{b(!0);const O=["employee_dashboard","profile"],M=i.filter(B=>!O.includes(B));(await Ae.post(`/role-components/role/${t.id}`,{components:M})).data.success&&(ie.success("Components assigned successfully! The sidebar will refresh for affected users."),r(t.id,i),a())}catch(O){console.error("Error saving role components:",O),alert("Failed to save component assignments. Please try again.")}finally{b(!1)}},I=O=>{const D={Core:Qa,Management:fo,Financial:Jm,Personal:qr}[O]||H0;return e.jsx(D,{size:16})};return t?t.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(fo,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:t.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx(yr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(w).map(([O,M])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[I(O),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[O," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",M.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(O),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>T(O),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:M.map(D=>e.jsxs("div",{onClick:()=>E(D.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${i.includes(D.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:i.includes(D.id)?e.jsx(rE,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(H0,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:D.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D.description})]})]},D.id))})]},O))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:h||d,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yf,{size:20}),"Save Assignments"]})})]})]})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]}):null};function b8({role:t,onClose:a,onUpdated:r}){const[i,l]=C.useState({role_name:""}),[d,f]=C.useState(!1),[h,b]=C.useState({});C.useEffect(()=>{t&&l({role_name:t.role_name||""})},[t]);const p=E=>{const{name:_,value:T}=E.target;l(A=>({...A,[_]:T})),h[_]&&b(A=>({...A,[_]:""}))},w=()=>{const E={};return i.role_name.trim()?i.role_name.trim().length<2?E.role_name="Role name must be at least 2 characters long":i.role_name.trim().length>50&&(E.role_name="Role name must be less than 50 characters"):E.role_name="Role name is required",b(E),Object.keys(E).length===0},j=async E=>{if(E.preventDefault(),!!w())try{f(!0);const _=await Ae.put(`/roles/${t.id}`,{role_name:i.role_name.trim()});_.data.success?(r?.(_.data.data),a()):ie.error(_.data.message||"Failed to update role")}catch(_){console.error("Error updating role:",_),_.response?.status===409?(ie.error("A role with this name already exists"),b({role_name:"A role with this name already exists"})):_.response?.data?.message?ie.error(_.response.data.message):ie.error("Failed to update role. Please try again.")}finally{f(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:a,disabled:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(yr,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:i.role_name,onChange:p,disabled:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${h.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),h.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",t.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${t.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:t.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,disabled:d,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[d&&e.jsx(Ut,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Updating...":"Update Role"})]})]})]})]})}):null}function Kv(){const[t,a]=C.useState(!1),[r,i]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(null),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState(null),[T,A]=C.useState(!1),[I,O]=C.useState(null),[M,D]=C.useState(!1),[B,H]=C.useState(null),z=async()=>{try{d(!0),h(null);const le=await Ae.get("/roles");le.data.success&&Array.isArray(le.data.data)?i(le.data.data):i([])}catch(le){console.error("Error loading roles:",le),h("Failed to load Roles. Please try again.")}finally{d(!1)}};C.useEffect(()=>{z()},[]);const L=()=>{p(!0)},P=()=>{p(!1)},U=()=>{z(),p(!1)},Z=le=>{_(le),j(!0)},ae=()=>{j(!1),_(null)},Y=()=>{ie.success("Role updated successfully!"),z(),j(!1),_(null)},ue=le=>{O(le),A(!0)},de=async()=>{try{if(!I)return;const le=await Ae.delete(`/roles/${I.id}`);le.data.success?(ie.success("Role deleted successfully"),A(!1),O(null),z()):ie.error(le.data.message||"Failed to delete role")}catch(le){console.error("Delete role error:",le),le.response?.data?.message?.includes("users assigned")||le.response?.data?.message?.includes("Cannot delete role")||le.response?.data?.message?ie.error(le.response.data.message):ie.error("Failed to delete role. Please try again."),A(!1),O(null)}},G=()=>{A(!1),O(null)},q=le=>{H(le),D(!0)},xe=(le,oe)=>{ie.success("Components assigned successfully!")},Ce=le=>{try{return new Date(le).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Add Role"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:z,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(en,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((le,oe)=>e.jsxs("tr",{onClick:()=>q(le),className:`transition-colors cursor-pointer ${le.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:oe+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:le.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Ce(le.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:re=>{re.stopPropagation(),Z(le)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:re=>{re.stopPropagation(),ue(le)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})}),e.jsx("button",{onClick:re=>{re.stopPropagation(),q(le)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(Gu,{size:20})})]})})]},le.id||oe))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:P,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(p8,{onClose:P,onCreated:U})]})}),M&&e.jsx(y8,{role:B,onClose:()=>D(!1),onAssign:xe}),w&&E&&e.jsx(b8,{role:E,onClose:ae,onUpdated:Y}),T&&I&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',I.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:G,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:de,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function v8(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),[f,h]=C.useState([]),[b,p]=C.useState([]),[w,j]=C.useState(!1),[E,_]=C.useState(!1),[T,A]=C.useState(!1),[I,O]=C.useState(null),[M,D]=C.useState(null),[B,H]=C.useState(!0),[z,L]=C.useState(!0),[P,U]=C.useState(null),{auth:Z}=C.useContext(zr),[ae,Y]=C.useState(!1),[ue,de]=C.useState(null),[G,q]=C.useState(!1),[xe,Ce]=C.useState(null),[le,oe]=C.useState("users"),[re,Q]=C.useState(!1);C.useEffect(()=>{const Pe=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",Pe),()=>window.removeEventListener("resize",Pe)},[]);const X=async()=>{try{H(!0),U(null);const Pe=await Ae.get("/auth/users");Pe.data.success&&Array.isArray(Pe.data.data)?h(Pe.data.data):(console.warn("Unexpected response format:",Pe.data),h([]))}catch(Pe){console.error("Error in fetching users:",Pe),U("Failed to load users. Please try again."),ie.error("Failed to fetch users")}finally{H(!1)}},se=async()=>{try{L(!0);const Pe=await Ae.get("/roles");Pe.data.success&&Array.isArray(Pe.data.data)?p(Pe.data.data):p([])}catch(Pe){console.error("Error loading roles:",Pe),ie.error("Failed to load roles")}finally{L(!1)}};C.useEffect(()=>{X(),se()},[]);const ne=()=>j(!0),K=()=>j(!1),Se=Pe=>{O(Pe),_(!0)},we=()=>{_(!1),O(null)},Ve=Pe=>{D(Pe),A(!0)},Le=()=>{A(!1),D(null)},ot=()=>{X(),j(!1),ie.success("User created successfully!")},J=()=>{X(),_(!1),O(null)},Ne=async Pe=>{try{Q(!0),await Ae.post("/auth/resend",{email:Pe.email}),ie.success("Verification email sent successfully!")}catch(Oe){console.error("Error sending verification email:",Oe),ie.error(Oe.response?.data?.message||"Failed to send verification email")}finally{Q(!1)}},Ie=async()=>{if(M)try{await Ae.patch(`/auth/users/${M.id}/toggle`),ie.success(`User ${M.is_active?"deactivated":"activated"} successfully!`),X(),Le()}catch(Pe){console.error("Error toggling user:",Pe),ie.error("Failed to update user status")}},ke=Pe=>{de(Pe),Y(!0)},Qe=async()=>{try{if(!ue)return;await Ae.delete(`/auth/users/${ue.id}`),ie.success("User deleted successfully"),Y(!1),de(null),X()}catch(Pe){console.error("Delete user error:",Pe),Pe.response?.data?.message?ie.error(Pe.response.data.message):ie.error("Failed to delete user")}},_e=()=>{Y(!1),de(null)},ut=Pe=>{Ce(Pe),q(!0)},pe=()=>{q(!1),Ce(null)},Ge=()=>{ie.success("Apartments assigned successfully!")},ze=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dl,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ze,{}),e.jsx(hr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(si,{size:l?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Users Management"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage system users and permissions"})]})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 md:mb-6",children:[e.jsx("button",{onClick:()=>oe("users"),className:`px-3 md:px-4 py-2 font-semibold text-sm md:text-base ${le==="users"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Info"}),e.jsx("button",{onClick:()=>oe("roles"),className:`px-3 md:px-4 py-2 font-semibold text-sm md:text-base ${le==="roles"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Roles"})]}),le==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-4",children:e.jsxs("button",{onClick:ne,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(qa,{size:l?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add User"})]})}),B?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Ut,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading users..."})]}):P?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:P}),e.jsx("button",{onClick:X,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(Qa,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No users found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first user"}),e.jsx("button",{onClick:ne,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First User"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Users: ",f.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[f.length," items"]})]})}),f.map((Pe,Oe)=>{const nt=Pe.email===Z?.user?.email||Pe.id===Z?.user?.id;return e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mr-3",children:e.jsx(Qa,{size:16,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:[Pe.firstname," ",Pe.lastname]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:Pe.email})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ut(Pe)},disabled:nt||!Pe.is_active,className:`p-2 rounded-lg ${nt||!Pe.is_active?"text-gray-400 bg-gray-100 dark:bg-gray-800 cursor-not-allowed":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 bg-purple-50 dark:bg-purple-900/20"}`,title:nt?"You can't assign to your own account":Pe.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(xa,{size:16})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Se(Pe)},disabled:nt||!Pe.is_active,className:`p-2 rounded-lg ${nt||!Pe.is_active?"text-gray-400 bg-gray-100 dark:bg-gray-800 cursor-not-allowed":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:nt?"You can't edit your own account":Pe.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(Na,{size:16})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Ve(Pe)},disabled:nt,className:`p-2 rounded-lg ${nt?"text-gray-400 bg-gray-100 dark:bg-gray-800 cursor-not-allowed":Pe.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:nt?"You can't modify your own account":Pe.is_active?"Deactivate":"Activate",children:Pe.is_active?e.jsx(Al,{size:16}):e.jsx(_l,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mt-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Role:"}),e.jsx("span",{children:Pe.role||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Mobile:"}),e.jsx("span",{children:Pe.mobile||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Country:"}),e.jsx("span",{children:Pe.country||"N/A"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${Pe.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Pe.is_active?"Active":"Inactive"})]}),!Pe.is_verified&&e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Ne(Pe)},disabled:nt||!Pe.is_active||re,className:`ml-2 p-1 rounded ${nt||!Pe.is_active||re?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:re?e.jsx(Ut,{size:12,className:"animate-spin"}):e.jsx(Cm,{size:12})})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("button",{onClick:kt=>{kt.stopPropagation(),ke(Pe)},disabled:nt||!Pe.is_active,className:`w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg text-sm ${nt||!Pe.is_active?"text-gray-400 bg-gray-100 dark:bg-gray-800 cursor-not-allowed":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20"}`,title:nt?"You can't delete your own account":Pe.is_active?"Delete":"Cannot delete inactive user",children:[e.jsx(Er,{size:14}),e.jsx("span",{children:"Delete User"})]})})]},Pe.id||Oe)})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Users"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[f.length," users"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:f.map((Pe,Oe)=>{const nt=Pe.email===Z?.user?.email||Pe.id===Z?.user?.id;return e.jsxs("tr",{className:`transition-colors ${Pe.is_active?nt?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Pe.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Pe.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:Pe.email}),!Pe.is_verified&&e.jsx("button",{onClick:()=>Ne(Pe),disabled:nt||!Pe.is_active||re,className:`ml-2 p-1 rounded ${nt||!Pe.is_active||re?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:re?e.jsx(Ut,{size:14,className:"animate-spin"}):e.jsx(Cm,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Pe.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Pe.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:Pe.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Pe.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:Pe.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${Pe.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Pe.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ut(Pe)},disabled:nt||!Pe.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${nt||!Pe.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:nt?"You can't assign to your own account":Pe.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(xa,{size:20})}),e.jsx("button",{onClick:()=>Se(Pe),disabled:nt||!Pe.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${nt||!Pe.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:nt?"You can't edit your own account":Pe.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:()=>Ve(Pe),disabled:nt,className:`flex items-center justify-center w-8 h-8 rounded ${nt?"text-gray-400 cursor-not-allowed bg-transparent":Pe.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:nt?"You can't modify your own account":Pe.is_active?"Deactivate":"Activate",children:Pe.is_active?e.jsx(Al,{size:20}):e.jsx(_l,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),ke(Pe)},disabled:nt||!Pe.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${nt||!Pe.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:nt?"You can't delete your own account":Pe.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(Er,{size:20})})]})})]},Pe.id||Oe)})})]})]})})]}),le==="roles"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:e.jsx(Kv,{})})]})})]}),w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New User"}),e.jsx("button",{onClick:K,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(f8,{onClose:K,onCreated:ot,roles:b,rolesLoading:z})]})})}),E&&I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit User"}),e.jsx("button",{onClick:we,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(x8,{user:I,onClose:we,onUpdated:J,roles:b,rolesLoading:z})]})})}),T&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:M.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:M.is_active?`Are you sure you want to deactivate ${M.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${M.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Le,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ie,className:`flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors ${M.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:M.is_active?"Deactivate":"Activate"})]})]})}),ae&&ue&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',ue.firstname||ue.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:_e,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Qe,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),G&&xe&&e.jsx(g8,{user:xe,onClose:pe,onAssignSuccess:Ge}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function w8({onClose:t,apartment_id:a}){const[r,i]=C.useState(1),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,p]=C.useState(0),[w,j]=C.useState(!0);C.useEffect(()=>{(async()=>{try{const I=await Ae.get(`/floors/apartment/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(I.data&&I.data.length>0){const O=Math.max(...I.data.map(M=>{const D=M.floor_id.match(/\d+/);return D?parseInt(D[0]):0}));p(O)}}catch(I){console.error("Error fetching existing floors:",I)}finally{j(!1)}})()},[a]);const E=()=>{const A=Array.from({length:r},(I,O)=>({floor_id:`F${b+O+1}`}));d(A)},_=(A,I,O)=>{const M=[...l];M[A][I]=O,d(M)},T=async A=>{A.preventDefault(),h(!0);try{const I=await Ae.post("/floors/batch",{apartment_id:a,floors:l},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});t()}catch(I){console.error("Error creating floors:",I)}finally{h(!1)}};return w?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:T,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:r,min:"1",onChange:A=>i(parseInt(A.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:E,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:l.map((A,I)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",b+I+1]}),e.jsx("input",{type:"text",value:A.floor_id,onChange:O=>_(I,"floor_id",O.target.value),className:"border rounded p-1 mr-2"})]},I))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 rounded bg-purple-600 text-white",children:f?"Saving...":"Save All"})]})]})}function N8({floor:t,onClose:a,onUpdated:r}){const[i,l]=C.useState({floor_id:t.floor_id||"",status:t.status||"active"}),d=b=>{const{name:p,value:w}=b.target;l({...i,[p]:w})},f=localStorage.getItem("token"),h=async b=>{b.preventDefault();try{(await Ae.put(`/floors/${t.id}`,i,{headers:{Authorization:`Bearer ${f}`}})).data.success?r():ie.error("Failed to update floor")}catch(p){console.error("Error updating floor:",p),ie.error("Error updating floor")}};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:i.floor_id,onChange:d,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:i.status,onChange:d,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function k8({floor:t,apartment:a,onClose:r,onUploadSuccess:i}){const[l,d]=C.useState(!1),[f,h]=C.useState([]),[b,p]=C.useState([]),[w,j]=C.useState(!0),E=C.useRef(null);C.useEffect(()=>{I()},[t.id]);const _=B=>{const H=Array.from(B.target.files);p(z=>[...z,...H])},T=B=>{p(H=>H.filter((z,L)=>L!==B))},A=async()=>{if(b.length===0){ie.error("Please select at least one file");return}try{d(!0);const B=new FormData;b.forEach(z=>{B.append("documents",z)}),B.append("apartmentId",a.id),B.append("floorId",t.id),(await Ae.post("/floor-documents/upload",B,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(p([]),i?.(),I(),E.current&&(E.current.value=""))}catch(B){console.error("Upload error:",B);const H=B.response?.data?.message||"Failed to upload floor documents";ie.error(H)}finally{d(!1)}},I=async()=>{try{j(!0);const B=await Ae.get(`/floor-documents/${t.id}/documents`);B.data.success&&h(B.data.data)}catch(B){console.error("Error loading floor documents:",B);const H=B.response?.data?.message||"Failed to load floor documents";ie.error(H)}finally{j(!1)}},O=async B=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Ae.delete(`/floor-documents/documents/${B}`),ie.success("Floor document deleted successfully"),I()}catch(H){console.error("Delete error:",H);const z=H.response?.data?.message||"Failed to delete floor document";ie.error(z)}},M=async B=>{try{const H=await Ae.get(`/floor-documents/documents/${B.id}/download`,{responseType:"blob"}),z=window.URL.createObjectURL(new Blob([H.data])),L=document.createElement("a");L.href=z,L.setAttribute("download",B.original_name||B.file_name),document.body.appendChild(L),L.click(),L.remove(),window.URL.revokeObjectURL(z)}catch(H){console.error("Download error:",H);const z=H.response?.data?.message||"Failed to download floor document";ie.error(z)}},D=B=>{if(B===0)return"0 Bytes";const H=1024,z=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(B)/Math.log(H));return parseFloat((B/Math.pow(H,L)).toFixed(2))+" "+z[L]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",t.floor_id]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",t.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:E,onChange:_,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>E.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ps,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((B,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:B.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:D(B.size)})]})]}),e.jsx("button",{onClick:()=>T(H),className:"text-red-500 hover:text-red-700",children:e.jsx(yr,{size:16})})]},H))})]}),b.length>0&&e.jsx("button",{onClick:A,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),w?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(wr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:f.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(wr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:B.original_name||B.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[D(B.file_size),"  Uploaded on ",new Date(B.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M(B),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(po,{size:18})}),e.jsx("button",{onClick:()=>O(B.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:18})})]})]},B.id))})]})]})}function j8(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),{id:f}=pn(),[h,b]=C.useState(null),p=gr(),[w,j]=C.useState([]),[E,_]=C.useState(null),[T,A]=C.useState(!0),[I,O]=C.useState(!1),[M,D]=C.useState(!1),[B,H]=C.useState(null),[z,L]=C.useState(!1),[P,U]=C.useState(null),[Z,ae]=C.useState(!1),[Y,ue]=C.useState(null),[de,G]=C.useState(!1),[q,xe]=C.useState(null);C.useEffect(()=>{const _e=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",_e),()=>window.removeEventListener("resize",_e)},[]),C.useEffect(()=>{f&&(async()=>{try{const ut=await Ae.get(`/apartments/${f}`);ut.data.success&&b(ut.data.data)}catch(ut){console.error("Error fetching apartment:",ut)}})()},[f]);const Ce=()=>{p("/apartmentview")},le=async()=>{try{A(!0),_(null);const _e=await Ae.get(`/floors?apartment_id=${f}`);_e.data.success&&Array.isArray(_e.data.data)?j(_e.data.data):j([])}catch(_e){console.error("Error loading floors:",_e),_("Failed to load floors. Please try again.")}finally{A(!1)}};C.useEffect(()=>{le()},[f]);const oe=_e=>{p(`/houses/${f}/${_e.id}`)},re=_e=>{U(_e),L(!0)},Q=()=>{L(!1),U(null)},X=async _e=>{try{const ut=await Ae.patch(`/floors/${_e.id}/toggle`);ie.success(ut.data.message),le()}catch(ut){console.error("Error toggling floor:",ut),ie.error("Failed to toggle floor status")}},se=()=>{O(!0)},ne=()=>{O(!1)},K=()=>{le(),O(!1),ie.success("Floor created successfully!")},Se=_e=>{H(_e),D(!0)},we=()=>{D(!1),H(null)},Ve=()=>{le(),D(!1),ie.success("Floor updated successfully!")},Le=_e=>{ue(_e),ae(!0)},ot=async()=>{try{if(!Y)return;await Ae.delete(`/floors/${Y.id}`),ie.success("Floor deleted successfully"),ae(!1),ue(null),le()}catch(_e){console.error("Delete floor error:",_e),ie.error("Failed to delete floor")}},J=()=>{ae(!1),ue(null)},Ne=_e=>{xe(_e),G(!0)},Ie=()=>{G(!1),xe(null)},ke=()=>{ie.success("Floor documents uploaded successfully!")},Qe=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dl,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Qe,{}),e.jsx(hr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Ce,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(On,{size:l?20:25})}),e.jsx(Ii,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Floors"}),h&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Apartment: ",h.name]})]})]}),e.jsxs("button",{onClick:se,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(qa,{size:l?16:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:T?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Ut,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading floors..."})]}):E?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:E}),e.jsx("button",{onClick:le,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(en,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No floors found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding floors"}),e.jsx("button",{onClick:se,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First Floor"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Floors: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map((_e,ut)=>e.jsxs("div",{onClick:()=>_e.is_active&&oe(_e),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${_e.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["Floor ",_e.floor_id]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-3",children:[e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Houses:"})," ",_e.house_count]}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full 
                                                                ${_e.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":_e.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":_e.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:_e.status.charAt(0).toUpperCase()+_e.status.slice(1)})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ne(_e)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(wr,{size:14})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Se(_e)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Na,{size:14})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),re(_e)},className:`p-1.5 rounded-lg ${_e.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:_e.is_active?"Deactivate":"Activate",children:_e.is_active?e.jsx(Al,{size:14}):e.jsx(_l,{size:14})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Le(_e)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Er,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex justify-between",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded ${_e.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:_e.is_active?"Active":"Inactive"}),e.jsx("span",{children:"Click to view houses"})]})]},_e.id||ut))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Floors Management"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," floors"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((_e,ut)=>e.jsxs("tr",{onClick:()=>_e.is_active&&oe(_e),className:`transition-colors cursor-pointer ${_e.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:_e.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:_e.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${_e.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":_e.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":_e.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:_e.status.charAt(0).toUpperCase()+_e.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ne(_e)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(wr,{size:20})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Se(_e)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),re(_e)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:_e.is_active?"Deactivate":"Activate",children:_e.is_active?e.jsx(Al,{size:25}):e.jsx(_l,{size:25})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Le(_e)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},_e.id||ut))})]})]})})})]})})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx("button",{onClick:ne,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(w8,{onClose:ne,onCreated:K,apartment_id:f})]})})}),M&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx("button",{onClick:we,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(N8,{onClose:we,onUpdated:Ve,floor:B})]})})}),z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:P?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:P?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Q,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{P&&(X(P),L(!1),U(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${P?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:P?.is_active?"Deactivate":"Activate"})]})]})}),Z&&Y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',Y.floor_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:J,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:ot,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),de&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(k8,{floor:q,apartment:h,onClose:Ie,onUploadSuccess:ke})})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function C8({onClose:t,apartment_id:a,onCreated:r}){const[i,l]=C.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),p=j=>{const{name:E,value:_}=j.target;l(T=>({...T,[E]:_}))},w=async j=>{j.preventDefault(),f(!0),b("");try{const E=await Ae.post("/housetype",{...i,apartment_id:a},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});E.data.success?(r?.(E.data.data),t()):b("Failed to save house type")}catch(E){console.error("Error saving house type:",E),b("Error saving house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,placeholder:"House Type Name"}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:i.sqrfeet,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:i.rooms,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:i.bathrooms,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function E8({housetype:t,onClose:a,onUpdated:r}){const[i,l]=C.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),p=localStorage.getItem("token");C.useEffect(()=>{t&&l({name:t.name||"",sqrfeet:t.sqrfeet||"",rooms:t.rooms||"",bathrooms:t.bathrooms||""})},[t]);const w=E=>{const{name:_,value:T}=E.target;l(A=>({...A,[_]:T}))},j=async E=>{E.preventDefault(),f(!0),b("");try{const _=await Ae.put(`/housetype/${t.id}`,i,{headers:{Authorization:`Bearer ${p}`}});_.data.success?(r&&r(_.data.data),a&&a()):b(_.data.message||"Failed to update house type")}catch(_){console.error("Update error:",_),b("Error updating house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:i.sqrfeet,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:i.rooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:i.bathrooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function Zv(){const{apartment_id:t}=pn(),[a,r]=C.useState(!1),[i,l]=C.useState(null),[d,f]=C.useState([]),[h,b]=C.useState(!1),[p,w]=C.useState(!1),[j,E]=C.useState(null),[_,T]=C.useState(!1),[A,I]=C.useState(null),O=async()=>{try{r(!0),l(null);const ae=await Ae.get(`/housetype?apartment_id=${t}`);ae.data.success&&Array.isArray(ae.data.data)?f(ae.data.data):f([])}catch(ae){console.error("Error loading houses:",ae),l("Failed to load houses. Please try again.")}finally{r(!1)}};C.useEffect(()=>{O()},[t]);const M=()=>{b(!0)},D=()=>{b(!1)},B=()=>{O(),b(!1),ie.success("House Type Created Successfully")},H=ae=>{E(ae),w(!0)},z=()=>{w(!1),E(null)},L=()=>{O(),w(!1),ie.success("House Type updated successfully!")},P=ae=>{I(ae),T(!0)},U=async()=>{try{if(!A)return;await Ae.delete(`/houseType/${A.id}`),ie.success("House type deleted successfully"),T(!1),I(null),O()}catch(ae){console.error("Delete house type error:",ae),ie.error("Failed to delete house type")}},Z=()=>{T(!1),I(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:M,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"New House Type"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):i?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[i,e.jsx("button",{onClick:O,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(en,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(ae=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ae.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ae.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ae.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:ae.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Y=>{Y.stopPropagation(),H(ae)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:Y=>{Y.stopPropagation(),P(ae)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},ae.id))})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:D,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(C8,{onClose:D,onCreated:B,apartment_id:t})]})}),p&&j&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:z,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx(E8,{onClose:z,onUpdated:L,housetype:j})]})}),_&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',A.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Z,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:U,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function _8({houseowner:t,onClose:a,onUpdated:r}){const[i,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState(null),[p,w]=C.useState(null),[j,E]=C.useState([]),[_,T]=C.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});C.useEffect(()=>{t&&(T({name:t.name||"",occupation:t.occupation||"",country:t.country||"",mobile:t.mobile||"",email:t.email||"",occupied_way:t.occupied_way||"own",proof:t.proof||""}),t.proof&&w(t.proof))},[t]),C.useEffect(()=>{(async()=>{try{const L=await Ae.get("/countries");E(L.data.data||[])}catch(L){console.error("Error fetching countries:",L)}})()},[]);const A=z=>{const{name:L,value:P}=z.target;T(U=>({...U,[L]:P}))},I=z=>{const L=z.target.files[0];if(L)if(b(L),L.type.startsWith("image/")){const P=new FileReader;P.onloadend=()=>{w(P.result)},P.readAsDataURL(L)}else w(null)},O=z=>{const L=z.target.value,P=j.find(U=>U.id.toString()===L);T(P?U=>({...U,country:P.country_name,mobile:P.phone_code+" "+U.mobile.replace(/^\+\d+\s?/,"")}):U=>({...U,country:"",mobile:U.mobile.replace(/^\+\d+\s?/,"")}))},M=z=>{const L=z.target.value;if(_.mobile&&_.mobile.includes("+")){const P=_.mobile.match(/^(\+\d+)(?:\s|$)/);if(P){const U=P[1];L.startsWith(U)?T(Z=>({...Z,mobile:L})):T(Z=>({...Z,mobile:U+" "+L.replace(/^\+\d+\s?/,"")}));return}}T(P=>({...P,mobile:L}))},D=async z=>{z.preventDefault(),f(!0);try{const L=new FormData;Object.keys(_).forEach(U=>{U!=="proof"&&L.append(U,_[U])}),h&&L.append("proof",h);const P=await Ae.put(`/houseowner/${t.id}`,L,{headers:{"Content-Type":"multipart/form-data"}});P.data.success&&(r(P.data.data),a())}catch(L){console.error("Error updating house owner:",L),alert("Error updating house owner. Please try again.")}finally{f(!1)}},H=j.find(z=>z.country_name===_.country)?.phone_code||"";return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Ut,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(yr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:D,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Qa,{size:16,className:"inline mr-2"}),"Name *"]}),e.jsx("input",{type:"text",name:"name",value:_.name,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Vu,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:_.occupation,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(eg,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:j.find(z=>z.country_name===_.country)?.id||"",onChange:O,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),j.map(z=>e.jsxs("option",{value:z.id,children:[z.country_name," (",z.phone_code,")"]},z.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cc,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[H&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:H}),e.jsx("input",{type:"tel",name:"mobile",value:_.mobile.replace(/^\+\d+\s?/,""),onChange:M,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${H?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(uo,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:_.email,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:_.occupied_way,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ps,{size:16,className:"inline mr-2"}),"Proof Document"]}),p&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(wr,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:_.proof.split("/").pop()})}),e.jsx("a",{href:`${Ae.defaults.baseURL}/houseowner/view-proof/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:I,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(Ps,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),h&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",h.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function A8({houseownerId:t,onClose:a,onSuccess:r}){const[i,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState({name:"",nic:"",email:"",phone:"",houseowner_id:t}),[p,w]=C.useState({});C.useEffect(()=>{b({name:"",nic:"",email:"",phone:"",houseowner_id:t}),w({})},[t]);const j=()=>{const A={};return h.name.trim()||(A.name="Name is required"),h.nic.trim()||(A.nic="NIC is required"),h.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)&&(A.email="Invalid email address"),h.phone&&!/^[0-9+\-\s()]{10,}$/.test(h.phone.replace(/\s/g,""))&&(A.phone="Invalid phone number"),w(A),Object.keys(A).length===0},E=A=>{const{name:I,value:O}=A.target;b(M=>({...M,[I]:O})),p[I]&&w(M=>({...M,[I]:""}))},_=async A=>{if(A.preventDefault(),!!j()){f(!0);try{const I=await Ae.post("/family",{...h,houseowner_id:t});I.data.success&&(r(I.data.data),a())}catch(I){console.error("Error adding family member:",I),I.response?.data?.error?w(O=>({...O,general:I.response.data.message||"Failed to add family member"})):w(O=>({...O,general:"Failed to add family member. Please try again."}))}finally{f(!1)}}},T=A=>{const O=A.target.value.replace(/[^\d+\-\s]/g,"");b(M=>({...M,phone:O})),p.phone&&w(M=>({...M,phone:""}))};return i?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Ut,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xu,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(yr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6",children:[p.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:p.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Qa,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:d}),p.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Lv,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:d}),p.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(uo,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:d}),p.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cc,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:T,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:d}),p.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xu,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function S8({member:t,onClose:a,onUpdated:r}){const[i,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState({}),[p,w]=C.useState({name:"",email:"",phone:""});C.useEffect(()=>{t&&w({name:t.name||"",email:t.email||"",phone:t.phone||""})},[t]);const j=()=>{const T={};return p.name.trim()||(T.name="Name is required"),p.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)&&(T.email="Invalid email address"),p.phone&&!/^[0-9+\-\s()]{10,}$/.test(p.phone.replace(/\s/g,""))&&(T.phone="Invalid phone number"),b(T),Object.keys(T).length===0},E=T=>{const{name:A,value:I}=T.target;w(O=>({...O,[A]:I})),h[A]&&b(O=>({...O,[A]:""}))},_=async T=>{if(T.preventDefault(),!!j()){f(!0);try{const A=await Ae.put(`/family/${t.id}`,p);A.data.success&&(r(A.data.data),a())}catch(A){console.error("Error updating family member:",A),b(I=>({...I,general:A.response?.data?.message||"Failed to update family member"}))}finally{f(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(yr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6",children:[h.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Qa,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:p.name,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:d}),h.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(uo,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:p.email,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Cc,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:p.phone,onChange:E,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yf,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function T8(){const[t,a]=C.useState(!1),[r,i]=C.useState("type"),{apartment_id:l,floor_id:d,id:f}=pn(),[h,b]=C.useState(null),[p,w]=C.useState(null),[j,E]=C.useState(null),[_,T]=C.useState(null),[A,I]=C.useState(null),[O,M]=C.useState([]),[D,B]=C.useState(!1),[H,z]=C.useState([]),[L,P]=C.useState(!1),[U,Z]=C.useState(!1),[ae,Y]=C.useState(!1),[ue,de]=C.useState(!1),[G,q]=C.useState(!1),[xe,Ce]=C.useState(null),le=gr();C.useEffect(()=>{l&&Ae.get(`/apartments/${l}`).then(we=>we.data.success&&b(we.data.data)).catch(we=>console.error("Error fetching apartment:",we))},[l]),C.useEffect(()=>{d&&Ae.get(`/floors/${d}`).then(we=>we.data.success&&w(we.data.data)).catch(we=>console.error("Error fetching floor:",we))},[d]),C.useEffect(()=>{f&&Ae.get(`/houses/${f}`).then(we=>we.data.success&&E(we.data.data)).catch(we=>console.error("Error fetching house:",we))},[f]),C.useEffect(()=>{j?.housetype_id&&Ae.get(`/housetype/${j.housetype_id}`).then(we=>we.data.success&&T(we.data.data)).catch(we=>console.error("Error fetching house type:",we))},[j]),C.useEffect(()=>{j?.houseowner_id&&Ae.get(`/houseowner/${j.houseowner_id}`).then(we=>we.data.success&&I(we.data.data)).catch(we=>console.error("Error fetching house owner: ",we))},[j]),C.useEffect(()=>{j?.houseowner_id&&oe(j.houseowner_id)},[j]);const oe=async we=>{try{B(!0);const Ve=await Ae.get(`/family/houseowner/${we}`);Ve.data.success&&M(Ve.data.data||[])}catch(Ve){console.error("Error fetching family members: ",Ve),M([])}finally{B(!1)}};C.useEffect(()=>{f&&re()},[f]);const re=async()=>{try{P(!0);const we=await Ae.get(`/bill-assignments/house/${f}`);we.data.success&&z(we.data.data||[])}catch(we){console.error("Error fetching assigned bills:",we),z([])}finally{P(!1)}},Q=()=>{le(`/houses/${l}/${d}`)},X=we=>new Date(we).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),se=async()=>{if(!A?.id){ie.warning("House owner information not available");return}try{Z(!0);try{const Ie=await Ae.head(`/houseowner/download-proof/${A.id}`);ie.info("Proof document found, starting download...")}catch(Ie){console.error("HEAD request failed:",Ie.response?.status||Ie.message)}const we=await Ae.get(`/houseowner/download-proof/${A.id}`,{responseType:"blob"});if(ie.info(`Download response status: ${we.status}`),we.status!==200){const Ie=await we.data.text();ie.error(`Error response: ${Ie}`);let ke=`Download failed with status ${we.status}`;try{const Qe=JSON.parse(Ie);Qe.message&&(ke=Qe.message)}catch{Ie&&(ke=Ie)}throw new Error(ke)}const Ve=new Blob([we.data]),Le=window.URL.createObjectURL(Ve),ot=document.createElement("a");ot.href=Le;const J=we.headers["content-disposition"];let Ne="owner_proof.jpg";if(J){const Ie=J.match(/filename="?([^"]+)"?/);Ie&&(Ne=Ie[1],ie.info(`Filename from header: ${Ne}`))}else if(A.proof){const Ie=A.proof.split("/");Ne=Ie[Ie.length-1]||Ne}ot.download=Ne,document.body.appendChild(ot),ot.click(),document.body.removeChild(ot),setTimeout(()=>{window.URL.revokeObjectURL(Le)},100),ie.success("Download successful")}catch(we){ie.error("Error downloading proof"),console.error("Error details:",{name:we.name,message:we.message,stack:we.stack,response:we.response?.data}),we.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):we.response?.status===500?alert("Server error occurred. Please check server logs."):we.message?alert(`Download failed: ${we.message}`):alert("Failed to download proof document. Please try again.")}finally{Z(!1)}},ne=()=>{j?.houseowner_id?de(!0):ie.warning("House owner information is required before adding family members.")},K=we=>{Ce(we),q(!0)},Se=async we=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await Ae.delete(`/family/${we}`),j?.houseowner_id&&oe(j.houseowner_id)}catch{ie.error("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Q,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(On,{size:25})}),e.jsx(qr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),h&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",h.name]}),p&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",p.floor_id]}),j&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",j.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>i("type"),className:`px-4 py-2 font-semibold 
                                    ${r==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>i("owner"),className:`px-4 py-2 font-semibold 
                                    ${r==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>i("residents"),className:`px-4 py-2 font-semibold 
                                    ${r==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",O.length,")"]}),e.jsx("button",{onClick:()=>i("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${r==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),r==="type"&&_&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(qr,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(H0,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:_.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(H0,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[_.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(B6,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:_.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(F6,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:_.bathrooms})]})]})})]})]}),r==="owner"&&A&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(Qa,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:A.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:A.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),A.houseowner_id&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," House Owner"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Y(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Na,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Jm,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Vu,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:A.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:X(j.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(eg,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Cc,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(uo,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:A.email||"N/A"})]})]}),A.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(wr,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:se,disabled:U,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:U?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(po,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:A.proof.split("/").pop()})]})]})]})]})]})]}),r==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(si,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(Xu,{size:18,className:"mr-2"}),"Add Family Member"]})]}),D?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):O.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(si,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:ne,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(Xu,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(we=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:we.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:we.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Lv,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:we.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>K(we),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(Na,{size:18})}),e.jsx("button",{onClick:()=>Se(we.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(Er,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[we.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Vu,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:we.occupation})]})]}),we.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(uo,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:we.email})]})]}),we.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(UC,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:we.phone})]})]}),we.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Fi,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:X(we.moved_at)})]})]})]})]},we.id))})]}),r==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(wr,{className:"mr-2",size:20}),"Assigned Bills"]}),L?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(Ut,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(wr,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:H.map(we=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Zs,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:we.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:we.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fi,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:X(we.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${we.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:we.status||"active"})})]})},we.id))})]})]})})]}),ae&&A&&e.jsx(_8,{houseowner:A,onClose:()=>Y(!1),onUpdated:we=>{I(we),Y(!1)}}),ue&&j?.houseowner_id&&e.jsx(A8,{houseownerId:j.houseowner_id,onClose:()=>de(!1),onSuccess:we=>{M(Ve=>[we,...Ve]),de(!1)}}),G&&xe&&e.jsx(S8,{member:xe,onClose:()=>{q(!1),Ce(null)},onUpdated:we=>{oe(),M(Ve=>Ve.map(Le=>Le.id===we.id?we:Le)),q(!1),Ce(null)}}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function D8({onClose:t,onCreated:a,apartment_id:r,floor_id:i}){const[l,d]=C.useState([{numHouses:1,housetype_id:""}]),[f,h]=C.useState(""),[b,p]=C.useState([]),[w,j]=C.useState([]),[E,_]=C.useState([]),[T,A]=C.useState(!1),[I,O]=C.useState(!0),[M,D]=C.useState("");C.useEffect(()=>{(async()=>{try{const de=await Ae.get(`/houses?apartment_id=${r}&floor_id=${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});de.data?.data?.length>0&&_(de.data.data)}catch(de){console.error("Error fetching existing houses:",de)}finally{O(!1)}})()},[r,i]),C.useEffect(()=>{(async()=>{try{const de=await Ae.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});j(de.data.data||[])}catch(de){console.error("Error fetching house types:",de)}})()},[r]);const B=ue=>{if(!ue||E.length===0)return 0;const de=E.filter(q=>q.house_id&&q.house_id.startsWith(ue)).map(q=>{const Ce=q.house_id.slice(ue.length).match(/^\d+$/);return Ce?parseInt(Ce[0]):0}).filter(q=>q>0);return de.length===0?0:Math.max(...de)},H=()=>{d(ue=>[...ue,{numHouses:1,housetype_id:""}])},z=ue=>{if(l.length===1){D("At least one house type row is required");return}d(de=>de.filter((G,q)=>q!==ue))},L=(ue,de,G)=>{d(q=>q.map((xe,Ce)=>Ce===ue?{...xe,[de]:G}:xe))},P=()=>{if(!f.trim()){D("Please enter a key letter/prefix");return}if(l.filter(Ce=>!Ce.housetype_id||Ce.numHouses<1).length>0){D("Please select house type and ensure number of houses is at least 1 for all rows");return}D("");const de=f.trim().toUpperCase();let q=B(de)+1;const xe=[];l.forEach(Ce=>{const le=w.find(oe=>oe.id===Ce.housetype_id);for(let oe=0;oe<Ce.numHouses;oe++)xe.push({house_id:`${de}${q}`,housetype_id:Ce.housetype_id,house_type_name:le?.name||""}),q++}),p(xe)},U=(ue,de)=>{const G=[...b];G[ue].housetype_id=de;const q=w.find(xe=>xe.id===de);G[ue].house_type_name=q?.name||"",p(G)},Z=async ue=>{if(ue.preventDefault(),D(""),A(!0),b.filter(G=>!G.housetype_id).length>0){D("Please select house type for all houses"),A(!1);return}try{const G={apartment_id:r,floor_id:i,houses:b.map(xe=>({house_id:xe.house_id,housetype_id:xe.housetype_id}))},q=await Ae.post("/houses/batch",G,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a&&a(),t&&t()}catch(G){console.error("Error creating houses:",G),D(G.response?.data?.message||"Server error while creating houses.")}finally{A(!1)}},ae=ue=>{h(ue.target.value),p([])},Y=l.reduce((ue,de)=>ue+(de.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[M&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:M}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:f,onChange:ae,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(qa,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:l.map((ue,de)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:ue.numHouses,onChange:G=>L(de,"numHouses",parseInt(G.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:ue.housetype_id,onChange:G=>L(de,"housetype_id",G.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>z(de),disabled:l.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(Er,{size:16})})})]},de))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:Y})]})})]}),f.trim()&&E.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',f.toUpperCase(),'":']})," Found ",B(f.trim().toUpperCase())," existing houses.",B(f.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${B(f.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:P,disabled:!f.trim()||I||Y===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:I?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",Y," House",Y!==1?"s":"",e.jsx(_6,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),b.length>0?e.jsxs("form",{onSubmit:Z,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",b.length," house",b.length!==1?"s":"",' with prefix "',f.toUpperCase(),'"']}),b.map((ue,de)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:ue.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:ue.housetype_id,onChange:G=>U(de,G.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(G=>e.jsx("option",{value:G.id,children:G.name},G.id))]})]})]}),ue.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",ue.house_type_name]})]},de))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:t,disabled:T,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:T,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${b.length} House${b.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function R8({isOpen:t,onClose:a,onImportSuccess:r,apartment_id:i,floor_id:l,house_id:d}){const[f,h]=C.useState(null),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState(null),[T,A]=C.useState(i||""),I=U=>{U.preventDefault(),p(!0)},O=U=>{U.preventDefault(),p(!1)},M=U=>{U.preventDefault(),p(!1);const Z=U.dataTransfer.files[0];Z&&B(Z)},D=U=>{const Z=U.target.files[0];Z&&B(Z)},B=U=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(U.type)){ie.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(U.size>10*1024*1024){ie.error("File size must be less than 10MB");return}h(U),_(null)},H=()=>{const U=`name,nic,occupation,country,mobile,email,occupied_way
John Doe,123456789V,Software Engineer,Sri Lanka,+94 771234567,john.doe@example.com,own

Instructions:
1. Fill in the house owner details in the second row
2. Keep the column headers as shown in the first row
3. Save the file and upload it here
4. The system will extract the information automatically

Important:
- Fill only one row (single house owner)
- Email is required for verification
- Mobile should include country code
- occupied_way can be "own" or "For rent"`,Z=new Blob([U],{type:"text/csv"}),ae=window.URL.createObjectURL(Z),Y=document.createElement("a");Y.href=ae,Y.download="house_owner_template.csv",document.body.appendChild(Y),Y.click(),document.body.removeChild(Y),window.URL.revokeObjectURL(ae),ie.success("Template downloaded successfully!")},z=async()=>{if(!f){ie.error("Please select a file first");return}if(!i){ie.error("Apartment information is missing");return}j(!0);const U=new FormData;U.append("excelFile",f),U.append("apartment_id",i),d&&U.append("house_id",d);try{const Z=await Ae.post("/houseowner/import-from-excel",U,{headers:{"Content-Type":"multipart/form-data"}});Z.data.success&&(_(Z.data.data),r&&r(Z.data.data.houseOwner),ie.success("House owner imported successfully!"))}catch(Z){console.error("Import error:",Z),ie.error(Z.response?.data?.message||"Failed to import house owner")}finally{j(!1)}},L=()=>{h(null),_(null)},P=()=>{L(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Import House Owner from Excel"}),e.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(yr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:E?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_s,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"House Owner Imported Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Verification email has been sent to ",E.houseOwner.email]})]})]})}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"Imported House Owner Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"NIC/Passport"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.nic})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.occupation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"House Owner ID"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:E.houseOwner.id})]})]}),E.house&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Linked to House:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"House ID:"}),e.jsx("p",{className:"font-medium",children:E.house.house_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),e.jsx("p",{className:"font-medium text-green-600",children:"Occupied"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:L,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another"}),e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our template to ensure proper formatting"})]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(po,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${b?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:I,onDragLeave:O,onDrop:M,children:[e.jsx(fC,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:f?f.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:D})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"File Format Requirements:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Column Name"}),e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t pt-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"name"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Full name of house owner"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"nic"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"NIC or passport number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"email"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Email address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupation"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Occupation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"country"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Country name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"mobile"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Mobile number with country code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupied_way"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:'"own" or "For rent"'})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("strong",{children:"Note:"})," Only the first row of the Excel file will be imported."]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:w,children:"Cancel"}),e.jsx("button",{onClick:z,disabled:!f||w,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:16,className:"animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{size:16}),"Import House Owner"]})})]})]})})]})}):null}function O8({house:t,onClose:a,onUpdated:r,apartment_id:i,floor_id:l}){const[d,f]=C.useState({house_id:t.house_id,status:t.status,housetype_id:t.housetype_id,houseowner_id:t.houseowner_id}),[h,b]=C.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[p,w]=C.useState([]),[j,E]=C.useState(!1),[_,T]=C.useState(!1),[A,I]=C.useState(null),[O,M]=C.useState([]),[D,B]=C.useState(!0),[H,z]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const Ce=await(await fetch("https://general.apivcm.shop/countries")).json();M(Ce.data)}catch(xe){console.error("Error fetching countries:",xe)}})()},[]),C.useEffect(()=>{const q=async()=>{try{const xe=await Ae.get("/auth/me");if(xe.data?.success&&xe.data.data&&xe.data.data.length>0){const Ce=xe.data.data[0],le=Ce.country||Ce.country_name||"";if(le){const oe=(O||[]).find(re=>re.country===le||re.country_name===le);b(re=>({...re,country:re.country||le,mobile:re.mobile||(oe?oe.international_dialing+" ":re.mobile)}))}}}catch(xe){console.error("Error fetching admin profile for prefill:",xe)}};O&&O.length>0&&q()},[O]);const L=q=>{const xe=q.target.value,Ce=O.find(le=>le.country===xe);b(le=>({...le,country:xe,mobile:Ce?Ce.international_dialing+" ":le.mobile}))},P=q=>{const xe=q.target.value;if(ue){const Ce=xe.replace(/\D/g,""),le=ue.international_dialing.replace(/\D/g,""),oe=Ce.startsWith(le)?Ce.slice(le.length):Ce;b(re=>({...re,mobile:ue.international_dialing+(oe?" "+oe:"")}))}else b(Ce=>({...Ce,mobile:xe}))};C.useEffect(()=>{(async()=>{try{const xe=await Ae.get(`/housetype?apartment_id=${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});w(xe.data.data||[])}catch(xe){console.error("Error fetching house types:",xe)}})()},[i]),C.useEffect(()=>{d.status==="occupied"&&t.status!=="occupied"?(T(!0),B(!0)):d.status!=="occupied"&&T(!1)},[d.status,t.status]);const U=q=>{f({...d,[q.target.name]:q.target.value})},Z=q=>{b({...h,[q.target.name]:q.target.value})},ae=q=>{I(q.target.files[0])},Y=async q=>{q.preventDefault(),E(!0);try{let xe=d.houseowner_id,Ce=!1;if(d.status==="occupied"&&!xe){const re=new FormData;re.append("name",h.name),re.append("nic",h.nic),re.append("occupation",h.occupation),re.append("country",h.country),re.append("mobile",h.mobile),re.append("email",h.email),re.append("occupied_way",h.occupied_way),re.append("apartment_id",i),A&&re.append("proof",A);const Q=await Ae.post("/houseowner",re,{headers:{"Content-Type":"multipart/form-data"}});Q.data.success&&(xe=Q.data.data.id,Ce=!0,f(X=>({...X,houseowner_id:xe})))}const le={...d,house_owner_id:xe||xe};if((await Ae.put(`/houses/${t.id}`,le)).data.success)return Ce?(r(),ie.success("House owner saved successfully! You can now setup login.")):r(),xe}catch(xe){console.error("Error updating house:",xe),ie.error("Error updating house. Please try again.")}finally{E(!1)}},ue=O.find(q=>q.country===h.country),de=async()=>{try{E(!0);const q=d.houseowner_id;if(!q){ie.error("House owner ID not found. Please save the house owner first.");return}const xe=h.email;if(!xe||!xe.includes("@")){ie.error("Please enter a valid email address for the house owner");return}if(!window.confirm(`Send verification email to ${xe}?

The house owner will receive an email with verification link.`)){E(!1);return}const le=await Ae.post("/houseowner-auth/admin/setup",{houseowner_id:q,send_email:!0});le.data.success?(ie.success("Verification email sent. Check your inbox "),r()):ie.error(le.data.message||"Failed to set up house owner")}catch(q){console.error("Error setting up house owner:",q),ie.error("Error setting up house owner. Please try again.")}finally{E(!1)}},G=q=>{b({name:q.name||"",nic:q.nic||"",occupation:q.occupation||"",country:q.country||"",mobile:q.mobile||"",email:q.email||"",occupied_way:q.occupied_way||"own",proof:null}),q.id&&f(xe=>({...xe,houseowner_id:q.id})),z(!1)};return e.jsxs("form",{onSubmit:Y,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 pl-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:d.house_id,onChange:U,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:d.housetype_id,onChange:U,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),p&&p.length>0?p.map(q=>e.jsx("option",{value:q.id,children:q.name||q.type_name||"Unnamed Type"},q.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:d.status,onChange:U,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),_&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{type:"button",onClick:()=>B(!D),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),D?e.jsx(Cl,{size:20,className:"text-gray-500"}):e.jsx(ai,{size:20,className:"text-gray-500"})]}),e.jsxs("button",{type:"button",onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Ps,{size:16}),"Import from Excel"]})]}),D&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:h.occupation,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsx("input",{name:"country",list:"owner-country-list",value:h.country||"",onChange:L,placeholder:"Select or type country *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0}),e.jsx("datalist",{id:"owner-country-list",children:O.map(q=>e.jsx("option",{value:q.country},q.country))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{name:"mobile",value:h.mobile,onChange:P,placeholder:ue?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${ue?"rounded-l-none":""}`,required:!0,disabled:!ue})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",ue?.international_dialing||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:h.email,onChange:Z,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:h.occupied_way,onChange:Z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:ae,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]}),e.jsx("div",{className:"text-center pt-2 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Or"," ",e.jsx("button",{type:"button",onClick:()=>z(!0),className:"text-purple-600 hover:text-purple-700 underline",children:"import from Excel file"})," ","instead of manual entry"]})})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[j&&e.jsx(Ut,{size:16,className:"animate-spin"}),_?"Save House & Owner":"Save Changes"]}),(d.houseowner_id||_&&h.email)&&e.jsx("button",{type:"button",onClick:de,disabled:j||!h.email,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",title:h.email?"Setup login for house owner":"Enter email first",children:"Setup Auth"})]})}),e.jsx(R8,{isOpen:H,onClose:()=>z(!1),onImportSuccess:G,apartment_id:i,house_id:t.id,floor_id:l})]})}function I8({onClose:t,onCreated:a}){const[r,i]=C.useState({bill_name:"",billtype:""}),[l,d]=C.useState(!1),[f,h]=C.useState(""),[b,p]=C.useState([]),w=E=>{const{name:_,value:T}=E.target;i(A=>({...A,[_]:T})),_==="bill_name"&&f&&h("")},j=async E=>{if(E.preventDefault(),d(!0),h(""),!r.bill_name.trim()||!r.billtype){h("Please fill in all required fields"),d(!1);return}try{const _=await Ae.post("/bills",{bill_name:r.bill_name.trim(),billtype:r.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});_.data.success?(a?.(_.data.data),ie.success("Bill type created successfully"),t()):h(_.data.message||"Failed to save bill type")}catch(_){console.error("Error saving bill type:",_);const T=_.response?.data?.message||"Error saving bill type. Please try again.";h(T),_.response?.status===409&&ie.error(T)}finally{d(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:r.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:r.bill_name,onChange:w,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.bill_name.trim()||!r.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.bill_name.trim()||!r.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function Qv({bills:t,onClose:a,onUpdated:r}){const[i,l]=C.useState({bill_name:"",billtype:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),p=localStorage.getItem("token");C.useEffect(()=>{t&&l({bill_name:t.bill_name||"",billtype:t.billtype||""})},[t]);const w=E=>{const{name:_,value:T}=E.target;l(A=>({...A,[_]:T}))},j=async E=>{E.preventDefault(),f(!0),b("");try{const _=await Ae.put(`/bills/${t.id}`,i,{headers:{Authorization:`Bearer ${p}`}});_.data.success?(r&&r(_.data.data),a&&a()):b(_.data.message||"Failed to update bill type")}catch(_){console.error("Update error:",_),b("Error updating bill type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:i.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:i.bill_name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function Jv({isOpen:t,onClose:a,selectedBill:r,onAssignSuccess:i}){const[l,d]=C.useState([]),[f,h]=C.useState({}),[b,p]=C.useState({}),[w,j]=C.useState(""),[E,_]=C.useState(""),[T,A]=C.useState([]),[I,O]=C.useState({}),[M,D]=C.useState({}),[B,H]=C.useState(!1),[z,L]=C.useState({}),[P,U]=C.useState({}),[Z,ae]=C.useState(!1),Y=async()=>{try{H(!0);const X=await Ae.get("/apartments");X.data.success&&d(X.data.data||[])}catch(X){console.error("Error loading apartments:",X),ie.error("Failed to load apartments")}finally{H(!1)}},ue=async X=>{if(X)try{L(ne=>({...ne,[X]:!0}));const se=await Ae.get(`/floors?apartment_id=${X}`);if(se.data.success){const ne=se.data.data||[];h(K=>({...K,[X]:ne}))}}catch(se){console.error("Error loading floors:",se),ie.error("Failed to load floors")}finally{L(se=>({...se,[X]:!1}))}},de=async(X,se)=>{if(!(!X||!se))try{U(K=>({...K,[se]:!0}));const ne=await Ae.get(`/houses?apartment_id=${X}&floor_id=${se}`);if(ne.data.success){const K=ne.data.data||[];p(Se=>({...Se,[se]:K}))}}catch(ne){console.error("Error loading houses:",ne),ie.error("Failed to load houses")}finally{U(ne=>({...ne,[se]:!1}))}},G=async X=>{const se=I[X.id];!se&&!f[X.id]&&await ue(X.id),O(ne=>({...ne,[X.id]:!se})),se||(j(X.id),_(""),A([]))},q=async(X,se)=>{const ne=`${X}-${se.id}`,K=M[ne];!K&&!b[se.id]&&await de(X,se.id),D(Se=>({...Se,[ne]:!K})),K||(_(se.id),A([]))},xe=X=>{A(se=>se.includes(X)?se.filter(ne=>ne!==X):[...se,X])},Ce=()=>{if(!E)return;const se=(b[E]||[]).map(K=>K.id),ne=se.every(K=>T.includes(K));A(ne?K=>K.filter(Se=>!se.includes(Se)):K=>{const Se=[...K];return se.forEach(we=>{Se.includes(we)||Se.push(we)}),Se})},le=()=>{if(!E)return!1;const X=b[E]||[];return X.length===0?!1:X.every(se=>T.includes(se.id))},oe=()=>{if(!E)return!1;const X=b[E]||[];return X.length===0?!1:X.some(se=>T.includes(se.id))&&!le()},re=async()=>{if(!w||!E||T.length===0){ie.error("Please select apartment, floor, and at least one house");return}ae(!0);try{const X={bill_id:r.id,apartment_id:w,floor_id:E,house_ids:T};await Ae.post("/bill-assignments/assign",X),ie.success("Bill assign successfully"),i(),Q()}catch(X){console.error("Error assigning bill:",X),ie.error(X.response?.data?.message||"Failed to assign bill")}finally{ae(!1)}},Q=()=>{j(""),_(""),h({}),p({}),A([]),O({}),D({}),a()};return C.useEffect(()=>{t&&Y()},[t]),t?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:Q,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:r?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),B?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Ut,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:l.map(X=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${w===X.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>G(X),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:X.name}),e.jsx("button",{onClick:se=>{se.stopPropagation(),G(X)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:I[X.id]?e.jsx(Cl,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(ai,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),I[X.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:z[X.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(Ut,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(f[X.id]||[]).map(se=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${E===se.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>q(X.id,se),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:se.floor_id}),e.jsx("button",{onClick:ne=>{ne.stopPropagation(),q(X.id,se)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:M[`${X.id}-${se.id}`]?e.jsx(Cl,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(ai,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),M[`${X.id}-${se.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:P[se.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(Ut,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:le(),ref:ne=>{ne&&(ne.indeterminate=oe())},onChange:Ce,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(b[se.id]||[]).map(ne=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:T.includes(ne.id),onChange:()=>xe(ne.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:ne.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",ne.status,")"]})]})]},ne.id))})]})})]},se.id))})})]},X.id))})]}),T.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:T.length})," house",T.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:Q,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:!w||!E||T.length===0||Z,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:Z?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${T.length} House${T.length!==1?"s":""}`})]})]})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]}):null}function F8(){const[t,a]=C.useState(!1),[r,i]=C.useState(null),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState(null),[T,A]=C.useState(null),[I,O]=C.useState(!1),[M,D]=C.useState(null);gr();const B=async()=>{try{a(!0),i(null);const G=await Ae.get("/bills");G.data.success&&Array.isArray(G.data.data)?d(G.data.data):d([])}catch(G){console.error("Error loading bills:",G),i("Failed to load bills. Please try again.")}finally{a(!1)}};C.useEffect(()=>{B()},[]);const H=l.filter(G=>G.billtype==="Shared"),z=G=>{A(G),j(!0)},L=()=>{j(!1),A(null)},P=()=>{ie.success("Bill assigned successfully!")},U=G=>{_(G),p(!0)},Z=()=>{p(!1),_(null)},ae=()=>{B(),p(!1),ie.success("Bill Type updated successfully!")},Y=G=>{D(G),O(!0)},ue=async()=>{try{if(!M)return;await Ae.delete(`/bills/${M.id}`),ie.success("Bill type deleted successfully"),O(!1),D(null),B()}catch(G){console.error("Delete bill type error:",G),ie.error("Failed to delete bill type")}},de=()=>{O(!1),D(null)};return e.jsxs("div",{children:[t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:B,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):H.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(en,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map((G,q)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:q+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:G.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:xe=>{xe.stopPropagation(),z(G)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(qa,{size:20})}),e.jsx("span",{children:G.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:xe=>{xe.stopPropagation(),U(G)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:xe=>{xe.stopPropagation(),Y(G)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},G.id))})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Z,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(Qv,{onClose:Z,onUpdated:ae,bills:E})]})}),e.jsx(Jv,{isOpen:w,onClose:L,selectedBill:T,onAssignSuccess:P}),I&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:de,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ue,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function ew(){const[t,a]=C.useState(!1),[r,i]=C.useState(null),[l,d]=C.useState([]),[f,h]=C.useState(!1),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState(null),[T,A]=C.useState(null),[I,O]=C.useState(!1),[M,D]=C.useState(null),[B,H]=C.useState("bills"),z=gr(),L=async()=>{try{a(!0),i(null);const re=await Ae.get("/bills");re.data.success&&Array.isArray(re.data.data)?d(re.data.data):d([])}catch(re){console.error("Error loading bills:",re),i("Failed to load bills. Please try again.")}finally{a(!1)}};C.useEffect(()=>{L()},[]);const P=l.filter(re=>re.billtype==="Measurable"),U=re=>{A(re),j(!0)},Z=()=>{j(!1),A(null)},ae=()=>{ie.success("Bill assigned successfully!")},Y=()=>{h(!0)},ue=()=>{h(!1)},de=()=>{L(),h(!1)},G=re=>{_(re),p(!0)},q=()=>{p(!1),_(null)},xe=()=>{L(),p(!1),ie.success("Bill Type updated successfully!")},Ce=re=>{D(re),O(!0)},le=async()=>{try{if(!M)return;await Ae.delete(`/bills/${M.id}`),ie.success("Bill type deleted successfully"),O(!1),D(null),L()}catch(re){console.error("Delete bill type error:",re),ie.error("Failed to delete bill type")}},oe=()=>{O(!1),D(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:Y,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>H("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${B==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",P.length,")"]}),e.jsx("button",{onClick:()=>H("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${B==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),B==="bills"&&e.jsx(e.Fragment,{children:t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:L,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):P.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(en,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:P.map((re,Q)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>z(`/billranges/${re.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Q+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:re.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:X=>{X.stopPropagation(),U(re)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(qa,{size:20})}),e.jsx("span",{children:re.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:X=>{X.stopPropagation(),G(re)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:X=>{X.stopPropagation(),Ce(re)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},re.id))})]})})}),B==="sharedValueBills"&&e.jsx(F8,{}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ue,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(I8,{onClose:ue,onCreated:de})]})}),b&&E&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:q,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(Qv,{onClose:q,onUpdated:xe,bills:E})]})}),e.jsx(Jv,{isOpen:w,onClose:Z,selectedBill:T,onAssignSuccess:ae}),I&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function M8({house:t,apartment:a,floor:r,onClose:i,onUploadSuccess:l}){const[d,f]=C.useState(!1),[h,b]=C.useState([]),[p,w]=C.useState([]),[j,E]=C.useState(!0),_=C.useRef(null);C.useEffect(()=>{O()},[t.id]);const T=H=>{const z=Array.from(H.target.files);w(L=>[...L,...z])},A=H=>{w(z=>z.filter((L,P)=>P!==H))},I=async()=>{if(p.length===0){ie.error("Please select at least one file");return}try{f(!0);const H=new FormData;p.forEach(L=>{H.append("documents",L)}),H.append("apartmentId",a.id),H.append("floorId",r.id),H.append("houseId",t.id),(await Ae.post("/house-documents/upload",H,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(ie.success("House documents uploaded successfully!"),w([]),l?.(),O(),_.current&&(_.current.value=""))}catch(H){console.error("Upload error:",H);const z=H.response?.data?.message||"Failed to upload house documents";ie.error(z)}finally{f(!1)}},O=async()=>{try{E(!0);const H=await Ae.get(`/house-documents/${t.id}/documents`);H.data.success?b(H.data.data):console.error("API response not successful:",H.data)}catch(H){console.error("Error loading house documents:",H);const z=H.response?.data?.message||"Failed to load house documents";ie.error(z),H.response&&(console.error("Error response:",H.response.data),console.error("Error status:",H.response.status))}finally{E(!1)}},M=async H=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Ae.delete(`/house-documents/documents/${H}`),ie.success("House document deleted successfully"),O()}catch(z){console.error("Delete error:",z);const L=z.response?.data?.message||"Failed to delete house document";ie.error(L)}},D=async H=>{try{const z=await Ae.get(`/house-documents/documents/${H.id}/download`,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([z.data])),P=document.createElement("a");P.href=L,P.setAttribute("download",H.original_name||H.file_name),document.body.appendChild(P),P.click(),P.remove(),window.URL.revokeObjectURL(L)}catch(z){console.error("Download error:",z);const L=z.response?.data?.message||"Failed to download house document";ie.error(L)}},B=H=>{if(H===0)return"0 Bytes";const z=1024,L=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(H)/Math.log(z));return parseFloat((H/Math.pow(z,P)).toFixed(2))+" "+L[P]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",t.house_id]}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&r&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",r.floor_id," |",e.jsx("strong",{children:" House:"})," ",t.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:_,onChange:T,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>_.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Ps,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),p.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:p.map((H,z)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(wr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:H.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:B(H.size)})]})]}),e.jsx("button",{onClick:()=>A(z),className:"text-red-500 hover:text-red-700",children:e.jsx(yr,{size:16})})]},z))})]}),p.length>0&&e.jsx("button",{onClick:I,disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{size:20}),"Upload ",p.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),j?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(wr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:O,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:h.map(H=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(wr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:H.original_name||H.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[B(H.file_size),"  Uploaded on ",new Date(H.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>D(H),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(po,{size:18})}),e.jsx("button",{onClick:()=>M(H.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:18})})]})]},H.id))})]})]})}const B8="modulepreload",L8=function(t){return"/"+t},sb={},tw=function(a,r,i){let l=Promise.resolve();if(r&&r.length>0){let b=function(p){return Promise.all(p.map(w=>Promise.resolve(w).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");l=b(r.map(p=>{if(p=L8(p),p in sb)return;sb[p]=!0;const w=p.endsWith(".css"),j=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const E=document.createElement("link");if(E.rel=w?"stylesheet":B8,w||(E.as="script"),E.crossOrigin="",E.href=p,h&&E.setAttribute("nonce",h),document.head.appendChild(E),w)return new Promise((_,T)=>{E.addEventListener("load",_),E.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${p}`)))})}))}function d(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&d(h.reason);return a().catch(d)})};var cc={},Rh,nb;function P8(){return nb||(nb=1,Rh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Rh}var Oh={},bl={},ib;function yo(){if(ib)return bl;ib=1;let t;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return bl.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},bl.getSymbolTotalCodewords=function(i){return a[i]},bl.getBCHDigit=function(r){let i=0;for(;r!==0;)i++,r>>>=1;return i},bl.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},bl.isKanjiModeEnabled=function(){return typeof t<"u"},bl.toSJIS=function(i){return t(i)},bl}var Ih={},lb;function tg(){return lb||(lb=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function a(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,l){if(t.isValid(i))return i;try{return a(i)}catch{return l}}}(Ih)),Ih}var Fh,ob;function z8(){if(ob)return Fh;ob=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(a){const r=Math.floor(a/8);return(this.buffer[r]>>>7-a%8&1)===1},put:function(a,r){for(let i=0;i<r;i++)this.putBit((a>>>r-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),a&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Fh=t,Fh}var Mh,cb;function U8(){if(cb)return Mh;cb=1;function t(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return t.prototype.set=function(a,r,i,l){const d=a*this.size+r;this.data[d]=i,l&&(this.reservedBit[d]=!0)},t.prototype.get=function(a,r){return this.data[a*this.size+r]},t.prototype.xor=function(a,r,i){this.data[a*this.size+r]^=i},t.prototype.isReserved=function(a,r){return this.reservedBit[a*this.size+r]},Mh=t,Mh}var Bh={},db;function H8(){return db||(db=1,function(t){const a=yo().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const l=Math.floor(i/7)+2,d=a(i),f=d===145?26:Math.ceil((d-13)/(2*l-2))*2,h=[d-7];for(let b=1;b<l-1;b++)h[b]=h[b-1]-f;return h.push(6),h.reverse()},t.getPositions=function(i){const l=[],d=t.getRowColCoords(i),f=d.length;for(let h=0;h<f;h++)for(let b=0;b<f;b++)h===0&&b===0||h===0&&b===f-1||h===f-1&&b===0||l.push([d[h],d[b]]);return l}}(Bh)),Bh}var Lh={},ub;function V8(){if(ub)return Lh;ub=1;const t=yo().getSymbolSize,a=7;return Lh.getPositions=function(i){const l=t(i);return[[0,0],[l-a,0],[0,l-a]]},Lh}var Ph={},fb;function G8(){return fb||(fb=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const d=l.size;let f=0,h=0,b=0,p=null,w=null;for(let j=0;j<d;j++){h=b=0,p=w=null;for(let E=0;E<d;E++){let _=l.get(j,E);_===p?h++:(h>=5&&(f+=a.N1+(h-5)),p=_,h=1),_=l.get(E,j),_===w?b++:(b>=5&&(f+=a.N1+(b-5)),w=_,b=1)}h>=5&&(f+=a.N1+(h-5)),b>=5&&(f+=a.N1+(b-5))}return f},t.getPenaltyN2=function(l){const d=l.size;let f=0;for(let h=0;h<d-1;h++)for(let b=0;b<d-1;b++){const p=l.get(h,b)+l.get(h,b+1)+l.get(h+1,b)+l.get(h+1,b+1);(p===4||p===0)&&f++}return f*a.N2},t.getPenaltyN3=function(l){const d=l.size;let f=0,h=0,b=0;for(let p=0;p<d;p++){h=b=0;for(let w=0;w<d;w++)h=h<<1&2047|l.get(p,w),w>=10&&(h===1488||h===93)&&f++,b=b<<1&2047|l.get(w,p),w>=10&&(b===1488||b===93)&&f++}return f*a.N3},t.getPenaltyN4=function(l){let d=0;const f=l.data.length;for(let b=0;b<f;b++)d+=l.data[b];return Math.abs(Math.ceil(d*100/f/5)-10)*a.N4};function r(i,l,d){switch(i){case t.Patterns.PATTERN000:return(l+d)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return d%3===0;case t.Patterns.PATTERN011:return(l+d)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(d/3))%2===0;case t.Patterns.PATTERN101:return l*d%2+l*d%3===0;case t.Patterns.PATTERN110:return(l*d%2+l*d%3)%2===0;case t.Patterns.PATTERN111:return(l*d%3+(l+d)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(l,d){const f=d.size;for(let h=0;h<f;h++)for(let b=0;b<f;b++)d.isReserved(b,h)||d.xor(b,h,r(l,b,h))},t.getBestMask=function(l,d){const f=Object.keys(t.Patterns).length;let h=0,b=1/0;for(let p=0;p<f;p++){d(p),t.applyMask(p,l);const w=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(p,l),w<b&&(b=w,h=p)}return h}}(Ph)),Ph}var ju={},xb;function rw(){if(xb)return ju;xb=1;const t=tg(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ju.getBlocksCount=function(l,d){switch(d){case t.L:return a[(l-1)*4+0];case t.M:return a[(l-1)*4+1];case t.Q:return a[(l-1)*4+2];case t.H:return a[(l-1)*4+3];default:return}},ju.getTotalCodewordsCount=function(l,d){switch(d){case t.L:return r[(l-1)*4+0];case t.M:return r[(l-1)*4+1];case t.Q:return r[(l-1)*4+2];case t.H:return r[(l-1)*4+3];default:return}},ju}var zh={},N0={},hb;function X8(){if(hb)return N0;hb=1;const t=new Uint8Array(512),a=new Uint8Array(256);return function(){let i=1;for(let l=0;l<255;l++)t[l]=i,a[i]=l,i<<=1,i&256&&(i^=285);for(let l=255;l<512;l++)t[l]=t[l-255]}(),N0.log=function(i){if(i<1)throw new Error("log("+i+")");return a[i]},N0.exp=function(i){return t[i]},N0.mul=function(i,l){return i===0||l===0?0:t[a[i]+a[l]]},N0}var mb;function q8(){return mb||(mb=1,function(t){const a=X8();t.mul=function(i,l){const d=new Uint8Array(i.length+l.length-1);for(let f=0;f<i.length;f++)for(let h=0;h<l.length;h++)d[f+h]^=a.mul(i[f],l[h]);return d},t.mod=function(i,l){let d=new Uint8Array(i);for(;d.length-l.length>=0;){const f=d[0];for(let b=0;b<l.length;b++)d[b]^=a.mul(l[b],f);let h=0;for(;h<d.length&&d[h]===0;)h++;d=d.slice(h)}return d},t.generateECPolynomial=function(i){let l=new Uint8Array([1]);for(let d=0;d<i;d++)l=t.mul(l,new Uint8Array([1,a.exp(d)]));return l}}(zh)),zh}var Uh,gb;function $8(){if(gb)return Uh;gb=1;const t=q8();function a(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},a.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(i.length+this.degree);l.set(i);const d=t.mod(l,this.genPoly),f=this.degree-d.length;if(f>0){const h=new Uint8Array(this.degree);return h.set(d,f),h}return d},Uh=a,Uh}var Hh={},Vh={},Gh={},pb;function aw(){return pb||(pb=1,Gh.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),Gh}var ei={},yb;function sw(){if(yb)return ei;yb=1;const t="[0-9]+",a="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;ei.KANJI=new RegExp(r,"g"),ei.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),ei.BYTE=new RegExp(i,"g"),ei.NUMERIC=new RegExp(t,"g"),ei.ALPHANUMERIC=new RegExp(a,"g");const l=new RegExp("^"+r+"$"),d=new RegExp("^"+t+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return ei.testKanji=function(b){return l.test(b)},ei.testNumeric=function(b){return d.test(b)},ei.testAlphanumeric=function(b){return f.test(b)},ei}var bb;function bo(){return bb||(bb=1,function(t){const a=aw(),r=sw();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(d,f){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!a.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?d.ccBits[0]:f<27?d.ccBits[1]:d.ccBits[2]},t.getBestModeForData=function(d){return r.testNumeric(d)?t.NUMERIC:r.testAlphanumeric(d)?t.ALPHANUMERIC:r.testKanji(d)?t.KANJI:t.BYTE},t.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},t.isValid=function(d){return d&&d.bit&&d.ccBits};function i(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(d,f){if(t.isValid(d))return d;try{return i(d)}catch{return f}}}(Vh)),Vh}var vb;function Y8(){return vb||(vb=1,function(t){const a=yo(),r=rw(),i=tg(),l=bo(),d=aw(),f=7973,h=a.getBCHDigit(f);function b(E,_,T){for(let A=1;A<=40;A++)if(_<=t.getCapacity(A,T,E))return A}function p(E,_){return l.getCharCountIndicator(E,_)+4}function w(E,_){let T=0;return E.forEach(function(A){const I=p(A.mode,_);T+=I+A.getBitsLength()}),T}function j(E,_){for(let T=1;T<=40;T++)if(w(E,T)<=t.getCapacity(T,_,l.MIXED))return T}t.from=function(_,T){return d.isValid(_)?parseInt(_,10):T},t.getCapacity=function(_,T,A){if(!d.isValid(_))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=l.BYTE);const I=a.getSymbolTotalCodewords(_),O=r.getTotalCodewordsCount(_,T),M=(I-O)*8;if(A===l.MIXED)return M;const D=M-p(A,_);switch(A){case l.NUMERIC:return Math.floor(D/10*3);case l.ALPHANUMERIC:return Math.floor(D/11*2);case l.KANJI:return Math.floor(D/13);case l.BYTE:default:return Math.floor(D/8)}},t.getBestVersionForData=function(_,T){let A;const I=i.from(T,i.M);if(Array.isArray(_)){if(_.length>1)return j(_,I);if(_.length===0)return 1;A=_[0]}else A=_;return b(A.mode,A.getLength(),I)},t.getEncodedBits=function(_){if(!d.isValid(_)||_<7)throw new Error("Invalid QR Code version");let T=_<<12;for(;a.getBCHDigit(T)-h>=0;)T^=f<<a.getBCHDigit(T)-h;return _<<12|T}}(Hh)),Hh}var Xh={},wb;function W8(){if(wb)return Xh;wb=1;const t=yo(),a=1335,r=21522,i=t.getBCHDigit(a);return Xh.getEncodedBits=function(d,f){const h=d.bit<<3|f;let b=h<<10;for(;t.getBCHDigit(b)-i>=0;)b^=a<<t.getBCHDigit(b)-i;return(h<<10|b)^r},Xh}var qh={},$h,Nb;function K8(){if(Nb)return $h;Nb=1;const t=bo();function a(r){this.mode=t.NUMERIC,this.data=r.toString()}return a.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let l,d,f;for(l=0;l+3<=this.data.length;l+=3)d=this.data.substr(l,3),f=parseInt(d,10),i.put(f,10);const h=this.data.length-l;h>0&&(d=this.data.substr(l),f=parseInt(d,10),i.put(f,h*3+1))},$h=a,$h}var Yh,kb;function Z8(){if(kb)return Yh;kb=1;const t=bo(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(i){this.mode=t.ALPHANUMERIC,this.data=i}return r.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){let d;for(d=0;d+2<=this.data.length;d+=2){let f=a.indexOf(this.data[d])*45;f+=a.indexOf(this.data[d+1]),l.put(f,11)}this.data.length%2&&l.put(a.indexOf(this.data[d]),6)},Yh=r,Yh}var Wh,jb;function Q8(){if(jb)return Wh;jb=1;const t=bo();function a(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return a.getBitsLength=function(i){return i*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){for(let i=0,l=this.data.length;i<l;i++)r.put(this.data[i],8)},Wh=a,Wh}var Kh,Cb;function J8(){if(Cb)return Kh;Cb=1;const t=bo(),a=yo();function r(i){this.mode=t.KANJI,this.data=i}return r.getBitsLength=function(l){return l*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let l;for(l=0;l<this.data.length;l++){let d=a.toSJIS(this.data[l]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);d=(d>>>8&255)*192+(d&255),i.put(d,13)}},Kh=r,Kh}var Zh={exports:{}},Eb;function e_(){return Eb||(Eb=1,function(t){var a={single_source_shortest_paths:function(r,i,l){var d={},f={};f[i]=0;var h=a.PriorityQueue.make();h.push(i,0);for(var b,p,w,j,E,_,T,A,I;!h.empty();){b=h.pop(),p=b.value,j=b.cost,E=r[p]||{};for(w in E)E.hasOwnProperty(w)&&(_=E[w],T=j+_,A=f[w],I=typeof f[w]>"u",(I||A>T)&&(f[w]=T,h.push(w,T),d[w]=p))}if(typeof l<"u"&&typeof f[l]>"u"){var O=["Could not find a path from ",i," to ",l,"."].join("");throw new Error(O)}return d},extract_shortest_path_from_predecessor_list:function(r,i){for(var l=[],d=i;d;)l.push(d),r[d],d=r[d];return l.reverse(),l},find_path:function(r,i,l){var d=a.single_source_shortest_paths(r,i,l);return a.extract_shortest_path_from_predecessor_list(d,l)},PriorityQueue:{make:function(r){var i=a.PriorityQueue,l={},d;r=r||{};for(d in i)i.hasOwnProperty(d)&&(l[d]=i[d]);return l.queue=[],l.sorter=r.sorter||i.default_sorter,l},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var l={value:r,cost:i};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=a}(Zh)),Zh.exports}var _b;function t_(){return _b||(_b=1,function(t){const a=bo(),r=K8(),i=Z8(),l=Q8(),d=J8(),f=sw(),h=yo(),b=e_();function p(O){return unescape(encodeURIComponent(O)).length}function w(O,M,D){const B=[];let H;for(;(H=O.exec(D))!==null;)B.push({data:H[0],index:H.index,mode:M,length:H[0].length});return B}function j(O){const M=w(f.NUMERIC,a.NUMERIC,O),D=w(f.ALPHANUMERIC,a.ALPHANUMERIC,O);let B,H;return h.isKanjiModeEnabled()?(B=w(f.BYTE,a.BYTE,O),H=w(f.KANJI,a.KANJI,O)):(B=w(f.BYTE_KANJI,a.BYTE,O),H=[]),M.concat(D,B,H).sort(function(L,P){return L.index-P.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function E(O,M){switch(M){case a.NUMERIC:return r.getBitsLength(O);case a.ALPHANUMERIC:return i.getBitsLength(O);case a.KANJI:return d.getBitsLength(O);case a.BYTE:return l.getBitsLength(O)}}function _(O){return O.reduce(function(M,D){const B=M.length-1>=0?M[M.length-1]:null;return B&&B.mode===D.mode?(M[M.length-1].data+=D.data,M):(M.push(D),M)},[])}function T(O){const M=[];for(let D=0;D<O.length;D++){const B=O[D];switch(B.mode){case a.NUMERIC:M.push([B,{data:B.data,mode:a.ALPHANUMERIC,length:B.length},{data:B.data,mode:a.BYTE,length:B.length}]);break;case a.ALPHANUMERIC:M.push([B,{data:B.data,mode:a.BYTE,length:B.length}]);break;case a.KANJI:M.push([B,{data:B.data,mode:a.BYTE,length:p(B.data)}]);break;case a.BYTE:M.push([{data:B.data,mode:a.BYTE,length:p(B.data)}])}}return M}function A(O,M){const D={},B={start:{}};let H=["start"];for(let z=0;z<O.length;z++){const L=O[z],P=[];for(let U=0;U<L.length;U++){const Z=L[U],ae=""+z+U;P.push(ae),D[ae]={node:Z,lastCount:0},B[ae]={};for(let Y=0;Y<H.length;Y++){const ue=H[Y];D[ue]&&D[ue].node.mode===Z.mode?(B[ue][ae]=E(D[ue].lastCount+Z.length,Z.mode)-E(D[ue].lastCount,Z.mode),D[ue].lastCount+=Z.length):(D[ue]&&(D[ue].lastCount=Z.length),B[ue][ae]=E(Z.length,Z.mode)+4+a.getCharCountIndicator(Z.mode,M))}}H=P}for(let z=0;z<H.length;z++)B[H[z]].end=0;return{map:B,table:D}}function I(O,M){let D;const B=a.getBestModeForData(O);if(D=a.from(M,B),D!==a.BYTE&&D.bit<B.bit)throw new Error('"'+O+'" cannot be encoded with mode '+a.toString(D)+`.
 Suggested mode is: `+a.toString(B));switch(D===a.KANJI&&!h.isKanjiModeEnabled()&&(D=a.BYTE),D){case a.NUMERIC:return new r(O);case a.ALPHANUMERIC:return new i(O);case a.KANJI:return new d(O);case a.BYTE:return new l(O)}}t.fromArray=function(M){return M.reduce(function(D,B){return typeof B=="string"?D.push(I(B,null)):B.data&&D.push(I(B.data,B.mode)),D},[])},t.fromString=function(M,D){const B=j(M,h.isKanjiModeEnabled()),H=T(B),z=A(H,D),L=b.find_path(z.map,"start","end"),P=[];for(let U=1;U<L.length-1;U++)P.push(z.table[L[U]].node);return t.fromArray(_(P))},t.rawSplit=function(M){return t.fromArray(j(M,h.isKanjiModeEnabled()))}}(qh)),qh}var Ab;function r_(){if(Ab)return Oh;Ab=1;const t=yo(),a=tg(),r=z8(),i=U8(),l=H8(),d=V8(),f=G8(),h=rw(),b=$8(),p=Y8(),w=W8(),j=bo(),E=t_();function _(z,L){const P=z.size,U=d.getPositions(L);for(let Z=0;Z<U.length;Z++){const ae=U[Z][0],Y=U[Z][1];for(let ue=-1;ue<=7;ue++)if(!(ae+ue<=-1||P<=ae+ue))for(let de=-1;de<=7;de++)Y+de<=-1||P<=Y+de||(ue>=0&&ue<=6&&(de===0||de===6)||de>=0&&de<=6&&(ue===0||ue===6)||ue>=2&&ue<=4&&de>=2&&de<=4?z.set(ae+ue,Y+de,!0,!0):z.set(ae+ue,Y+de,!1,!0))}}function T(z){const L=z.size;for(let P=8;P<L-8;P++){const U=P%2===0;z.set(P,6,U,!0),z.set(6,P,U,!0)}}function A(z,L){const P=l.getPositions(L);for(let U=0;U<P.length;U++){const Z=P[U][0],ae=P[U][1];for(let Y=-2;Y<=2;Y++)for(let ue=-2;ue<=2;ue++)Y===-2||Y===2||ue===-2||ue===2||Y===0&&ue===0?z.set(Z+Y,ae+ue,!0,!0):z.set(Z+Y,ae+ue,!1,!0)}}function I(z,L){const P=z.size,U=p.getEncodedBits(L);let Z,ae,Y;for(let ue=0;ue<18;ue++)Z=Math.floor(ue/3),ae=ue%3+P-8-3,Y=(U>>ue&1)===1,z.set(Z,ae,Y,!0),z.set(ae,Z,Y,!0)}function O(z,L,P){const U=z.size,Z=w.getEncodedBits(L,P);let ae,Y;for(ae=0;ae<15;ae++)Y=(Z>>ae&1)===1,ae<6?z.set(ae,8,Y,!0):ae<8?z.set(ae+1,8,Y,!0):z.set(U-15+ae,8,Y,!0),ae<8?z.set(8,U-ae-1,Y,!0):ae<9?z.set(8,15-ae-1+1,Y,!0):z.set(8,15-ae-1,Y,!0);z.set(U-8,8,1,!0)}function M(z,L){const P=z.size;let U=-1,Z=P-1,ae=7,Y=0;for(let ue=P-1;ue>0;ue-=2)for(ue===6&&ue--;;){for(let de=0;de<2;de++)if(!z.isReserved(Z,ue-de)){let G=!1;Y<L.length&&(G=(L[Y]>>>ae&1)===1),z.set(Z,ue-de,G),ae--,ae===-1&&(Y++,ae=7)}if(Z+=U,Z<0||P<=Z){Z-=U,U=-U;break}}}function D(z,L,P){const U=new r;P.forEach(function(de){U.put(de.mode.bit,4),U.put(de.getLength(),j.getCharCountIndicator(de.mode,z)),de.write(U)});const Z=t.getSymbolTotalCodewords(z),ae=h.getTotalCodewordsCount(z,L),Y=(Z-ae)*8;for(U.getLengthInBits()+4<=Y&&U.put(0,4);U.getLengthInBits()%8!==0;)U.putBit(0);const ue=(Y-U.getLengthInBits())/8;for(let de=0;de<ue;de++)U.put(de%2?17:236,8);return B(U,z,L)}function B(z,L,P){const U=t.getSymbolTotalCodewords(L),Z=h.getTotalCodewordsCount(L,P),ae=U-Z,Y=h.getBlocksCount(L,P),ue=U%Y,de=Y-ue,G=Math.floor(U/Y),q=Math.floor(ae/Y),xe=q+1,Ce=G-q,le=new b(Ce);let oe=0;const re=new Array(Y),Q=new Array(Y);let X=0;const se=new Uint8Array(z.buffer);for(let Ve=0;Ve<Y;Ve++){const Le=Ve<de?q:xe;re[Ve]=se.slice(oe,oe+Le),Q[Ve]=le.encode(re[Ve]),oe+=Le,X=Math.max(X,Le)}const ne=new Uint8Array(U);let K=0,Se,we;for(Se=0;Se<X;Se++)for(we=0;we<Y;we++)Se<re[we].length&&(ne[K++]=re[we][Se]);for(Se=0;Se<Ce;Se++)for(we=0;we<Y;we++)ne[K++]=Q[we][Se];return ne}function H(z,L,P,U){let Z;if(Array.isArray(z))Z=E.fromArray(z);else if(typeof z=="string"){let G=L;if(!G){const q=E.rawSplit(z);G=p.getBestVersionForData(q,P)}Z=E.fromString(z,G||40)}else throw new Error("Invalid data");const ae=p.getBestVersionForData(Z,P);if(!ae)throw new Error("The amount of data is too big to be stored in a QR Code");if(!L)L=ae;else if(L<ae)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+ae+`.
`);const Y=D(L,P,Z),ue=t.getSymbolSize(L),de=new i(ue);return _(de,L),T(de),A(de,L),O(de,P,0),L>=7&&I(de,L),M(de,Y),isNaN(U)&&(U=f.getBestMask(de,O.bind(null,de,P))),f.applyMask(U,de),O(de,P,U),{modules:de,version:L,errorCorrectionLevel:P,maskPattern:U,segments:Z}}return Oh.create=function(L,P){if(typeof L>"u"||L==="")throw new Error("No input text");let U=a.M,Z,ae;return typeof P<"u"&&(U=a.from(P.errorCorrectionLevel,a.M),Z=p.from(P.version),ae=f.from(P.maskPattern),P.toSJISFunc&&t.setToSJISFunction(P.toSJISFunc)),H(L,Z,U,ae)},Oh}var Qh={},Jh={},Sb;function nw(){return Sb||(Sb=1,function(t){function a(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(d){return[d,d]}))),i.length===6&&i.push("F","F");const l=parseInt(i.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const l=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,d=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:d,scale:d?4:f,margin:l,color:{dark:a(i.color.dark||"#000000ff"),light:a(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,l){return l.width&&l.width>=i+l.margin*2?l.width/(i+l.margin*2):l.scale},t.getImageWidth=function(i,l){const d=t.getScale(i,l);return Math.floor((i+l.margin*2)*d)},t.qrToImageData=function(i,l,d){const f=l.modules.size,h=l.modules.data,b=t.getScale(f,d),p=Math.floor((f+d.margin*2)*b),w=d.margin*b,j=[d.color.light,d.color.dark];for(let E=0;E<p;E++)for(let _=0;_<p;_++){let T=(E*p+_)*4,A=d.color.light;if(E>=w&&_>=w&&E<p-w&&_<p-w){const I=Math.floor((E-w)/b),O=Math.floor((_-w)/b);A=j[h[I*f+O]?1:0]}i[T++]=A.r,i[T++]=A.g,i[T++]=A.b,i[T]=A.a}}}(Jh)),Jh}var Tb;function a_(){return Tb||(Tb=1,function(t){const a=nw();function r(l,d,f){l.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=f,d.width=f,d.style.height=f+"px",d.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(d,f,h){let b=h,p=f;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),f||(p=i()),b=a.getOptions(b);const w=a.getImageWidth(d.modules.size,b),j=p.getContext("2d"),E=j.createImageData(w,w);return a.qrToImageData(E.data,d,b),r(j,p,w),j.putImageData(E,0,0),p},t.renderToDataURL=function(d,f,h){let b=h;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),b||(b={});const p=t.render(d,f,b),w=b.type||"image/png",j=b.rendererOpts||{};return p.toDataURL(w,j.quality)}}(Qh)),Qh}var em={},Db;function s_(){if(Db)return em;Db=1;const t=nw();function a(l,d){const f=l.a/255,h=d+'="'+l.hex+'"';return f<1?h+" "+d+'-opacity="'+f.toFixed(2).slice(1)+'"':h}function r(l,d,f){let h=l+d;return typeof f<"u"&&(h+=" "+f),h}function i(l,d,f){let h="",b=0,p=!1,w=0;for(let j=0;j<l.length;j++){const E=Math.floor(j%d),_=Math.floor(j/d);!E&&!p&&(p=!0),l[j]?(w++,j>0&&E>0&&l[j-1]||(h+=p?r("M",E+f,.5+_+f):r("m",b,0),b=0,p=!1),E+1<d&&l[j+1]||(h+=r("h",w),w=0)):b++}return h}return em.render=function(d,f,h){const b=t.getOptions(f),p=d.modules.size,w=d.modules.data,j=p+b.margin*2,E=b.color.light.a?"<path "+a(b.color.light,"fill")+' d="M0 0h'+j+"v"+j+'H0z"/>':"",_="<path "+a(b.color.dark,"stroke")+' d="'+i(w,p,b.margin)+'"/>',T='viewBox="0 0 '+j+" "+j+'"',I='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+T+' shape-rendering="crispEdges">'+E+_+`</svg>
`;return typeof h=="function"&&h(null,I),I},em}var Rb;function n_(){if(Rb)return cc;Rb=1;const t=P8(),a=r_(),r=a_(),i=s_();function l(d,f,h,b,p){const w=[].slice.call(arguments,1),j=w.length,E=typeof w[j-1]=="function";if(!E&&!t())throw new Error("Callback required as last argument");if(E){if(j<2)throw new Error("Too few arguments provided");j===2?(p=h,h=f,f=b=void 0):j===3&&(f.getContext&&typeof p>"u"?(p=b,b=void 0):(p=b,b=h,h=f,f=void 0))}else{if(j<1)throw new Error("Too few arguments provided");return j===1?(h=f,f=b=void 0):j===2&&!f.getContext&&(b=h,h=f,f=void 0),new Promise(function(_,T){try{const A=a.create(h,b);_(d(A,f,b))}catch(A){T(A)}})}try{const _=a.create(h,b);p(null,d(_,f,b))}catch(_){p(_)}}return cc.create=a.create,cc.toCanvas=l.bind(null,r.render),cc.toDataURL=l.bind(null,r.renderToDataURL),cc.toString=l.bind(null,function(d,f,h){return i.render(d,h)}),cc}var i_=n_();const l_=of(i_);function o_({houses:t,apartment:a,floor:r,onClose:i}){const[l,d]=C.useState(!1),[f,h]=C.useState(!1),[b,p]=C.useState({}),[w,j]=C.useState(!1),E=O=>`${O.id}`,_=O=>O.split("|")[0];C.useEffect(()=>{(async()=>{if(t.length){d(!0);try{const M={};for(const D of t){const B=E(D);try{M[D.id]=await l_.toDataURL(B,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(H){console.error("QR Generation Error:",H),M[D.id]="",ie.error(`Failed to generate QR for house ${D.house_id}`)}}p(M)}catch(M){console.error("Error generating QR codes",M),ie.error("Failed to generate QR codes")}d(!1)}})()},[t,a,r]);const T=async()=>{h(!0);try{const{jsPDF:O}=await tw(async()=>{const{jsPDF:ue}=await import("./jspdf.es.min-CnxLNsEh.js").then(de=>de.j);return{jsPDF:ue}},[]),M=new O("p","mm","a4"),D=12,B=M.internal.pageSize.getWidth(),H=M.internal.pageSize.getHeight();let z=2,L=85,P=70,U=40;t.length===1?(z=1,L=B-D*2,P=H-D*2-30,U=Math.min(L,P)*.5):t.length===2?(z=2,L=(B-D*3)/2,P=Math.max(90,(H-D*3)/2),U=Math.min(80,L*.6)):(z=2,L=85,P=70,U=40);let Z=D,ae=0;for(let ue=0;ue<t.length;ue++){const de=t[ue],G=ue%z;let q=D+G*(L+D);t.length===1&&(q=(B-L)/2),Z+P>H-D&&(M.addPage(),Z=D,ae=0),M.setDrawColor(200,200,200),M.rect(q,Z,L,P),M.setFontSize(t.length===1?18:12),M.setFont(void 0,"bold"),M.text(a.name,q+L/2,Z+(t.length===1?12:5),{align:"center"}),M.setFontSize(t.length===1?10:7),M.setTextColor(100,100,100),M.text(`Floor: ${r.floor_id}`,q+L/2,Z+(t.length===1?18:9),{align:"center"}),M.setFontSize(t.length===1?24:12),M.setFont(void 0,"bold"),M.setTextColor(0,0,0),M.text(`${de.house_id}`,q+L/2,Z+(t.length===1?30:15),{align:"center"}),w&&(M.setFontSize(t.length===1?10:7),M.setFont(void 0,"bold"),M.setTextColor(0,0,0),M.text(`${de.id}`,q+L/2,Z+(t.length===1?36:18),{align:"center"})),b[de.id]&&M.addImage(b[de.id],"PNG",q+(L-U)/2,Z+(t.length===1?(P-U)/2:20),U,U),ae++,ae===z&&(Z+=P+D,ae=0),ue===t.length-1&&ae>0&&(Z+=P+D)}const Y=`QR_Codes_${a.name.replace(/\s+/g,"_")}_Floor_${r.floor_id}.pdf`;M.save(Y),ie.success("PDF Generated Successfully!")}catch(O){console.error("PDF Generation Error:",O),ie.error("Failed to generate PDF")}h(!1)},A=({house:O})=>{const M=b[O.id];return E(O),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",O.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[a.name,"  Floor ",r.floor_id]}),M?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:M,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${O.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:O.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(Ut,{size:24,className:"animate-spin text-gray-400"})})]})})},I=O=>{const M=b[O];if(M){const D=t.find(z=>z.id===O);if(!D)return;const B=E(D);_(B),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${D.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${M}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(NC,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.name,"  Floor ",r.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(fo,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",t.length," house",t.length!==1?"s":""]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(O=>e.jsxs("div",{className:"relative",children:[e.jsx(A,{house:O}),e.jsx("button",{onClick:()=>I(O.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},O.id))})]})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:O=>j(O.target.checked),className:"h-4 w-4 rounded border-gray-300 text-purple-600"}),e.jsx("span",{children:"Include House No in PDF"}),e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Only check to print internal DB id)"})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(b).length," QR code",Object.keys(b).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:l||f||!Object.keys(b).length,onClick:T,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(U0,{size:16}),"Download PDF"]})})]})]})})]})})}function c_(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),{apartment_id:f,floor_id:h}=pn(),[b,p]=C.useState(null),[w,j]=C.useState(null),[E,_]=C.useState([]),[T,A]=C.useState([]),[I,O]=C.useState(null),M=gr(),[D,B]=C.useState(!1),[H,z]=C.useState(!1),[L,P]=C.useState(!1),[U,Z]=C.useState(!1),[ae,Y]=C.useState(!1),[ue,de]=C.useState(null),[G,q]=C.useState(!1),[xe,Ce]=C.useState(null),[le,oe]=C.useState("houses"),[re,Q]=C.useState(null),[X,se]=C.useState(!1),[ne,K]=C.useState(null),[Se,we]=C.useState([]),[Ve,Le]=C.useState(!1),[ot,J]=C.useState(!1);C.useEffect(()=>{const Me=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",Me),()=>window.removeEventListener("resize",Me)},[]),C.useEffect(()=>{f&&(async()=>{try{const pt=await Ae.get(`/apartments/${f}`);pt.data.success&&p(pt.data.data)}catch(pt){console.error("Error fetching apartment:",pt)}})()},[f]),C.useEffect(()=>{h&&(async()=>{try{const pt=await Ae.get(`/floors/${h}`);pt.data.success&&j(pt.data.data)}catch(pt){console.error("Error fetching floors:",pt)}})()},[h]);const Ne=async()=>{try{z(!0),O(null);const Me=await Ae.get(`/housetype?apartment_id=${f}`);Me.data.success&&Array.isArray(Me.data.data)?A(Me.data.data):A([])}catch(Me){console.error("Error loading houses:",Me),O("Failed to load houses. Please try again.")}finally{z(!1)}};C.useEffect(()=>{Ne()},[f]);const Ie=()=>{M(`/floors/${b.id}`)},ke=async Me=>{try{B(!0),O(null);const pt=await Ae.get(`/houses?apartment_id=${f}&floor_id=${Me}`);pt.data.success&&Array.isArray(pt.data.data)?(_(pt.data.data),we([]),Le(!1)):_([])}catch(pt){console.error("Error loading houses:",pt),O("Failed to load houses. Please try again.")}finally{B(!1)}};C.useEffect(()=>{h&&f&&ke(h)},[h,f]);const Qe=Me=>{M(`/viewhouse/${f}/${h}/${Me.id}`)},_e=()=>{P(!0)},ut=()=>{P(!1)},pe=()=>{ke(h),P(!1),ie.success("House created successfully!")},Ge=Me=>{Q(Me),Z(!0)},ze=()=>{Z(!1),Q(null)},Pe=()=>{ke(h),ie.success("House updated successfully!")},Oe=Me=>{de(Me),Y(!0)},nt=()=>{Y(!1),de(null)},kt=async Me=>{try{const pt=await Ae.patch(`/houses/${Me.id}/toggle`);ie.success(pt.data.message),ke(h)}catch(pt){console.error("Error toggling house:",pt),ie.error("Failed to toggle house status")}},St=Me=>{Ce(Me),q(!0)},Nr=async()=>{try{if(!xe)return;await Ae.delete(`/houses/${xe.id}`),ie.success("House deleted successfully"),q(!1),Ce(null),ke(h)}catch(Me){console.error("Delete house error:",Me),ie.error("Failed to delete house")}},tr=()=>{q(!1),Ce(null)},qt=Me=>{K(Me),se(!0)},Gt=()=>{se(!1),K(null)},lr=()=>{ie.success("House documents uploaded successfully!")},at=Me=>{we(pt=>pt.includes(Me)?pt.filter(Vr=>Vr!==Me):[...pt,Me])},yt=()=>{if(Ve)we([]);else{const Me=E.map(pt=>pt.id);we(Me)}Le(!Ve)};C.useEffect(()=>{E.length>0&&Se.length===E.length?Le(!0):Le(!1)},[Se,E]),Se.length;const Be=()=>{if(Se.length===0){ie.error("Please select at least one house to generate QR codes");return}E.filter(Me=>Se.includes(Me.id)),J(!0)},Et=Me=>{try{return new Date(Me).toLocaleDateString()}catch{return"N/A"}},Bt=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dl,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Bt,{}),e.jsx(hr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Ie,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(On,{size:l?20:25})}),e.jsx(qr,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Houses"}),b&&w&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:[e.jsx("span",{className:"font-medium",children:b.name}),"  Floor ",w.floor_id]})]})]}),l&&Se.length>0&&e.jsxs("button",{onClick:Be,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700",children:[e.jsx(U0,{size:16}),e.jsxs("span",{className:"text-xs",children:["QR (",Se.length,")"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 md:mb-6",children:[e.jsx("button",{onClick:()=>oe("houses"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${le==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>oe("houseTypes"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${le==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),le==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:[e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"gap-3 mb-4"}`,children:[e.jsxs("button",{onClick:_e,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base ${l?"w-full":""}`,children:[e.jsx(qa,{size:l?16:20}),e.jsx("span",{children:"New House"})]}),!l&&e.jsxs("button",{onClick:Be,disabled:Se.length===0,className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(U0,{size:l?16:20}),e.jsxs("span",{children:["Generate QR Code (",Se.length,")"]})]})]}),Se.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[Se.length," house",Se.length!==1?"s":""," selected"]}),l?e.jsx("button",{onClick:Be,className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Generate QR"}):null]})}),D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Ut,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading Houses..."})]}):I?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:I}),e.jsx("button",{onClick:()=>ke(h),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):E.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(en,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No houses found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding houses"}),e.jsx("button",{onClick:_e,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First House"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Houses: ",E.length]}),e.jsx("button",{onClick:yt,className:"text-xs text-purple-600 dark:text-purple-400",children:Ve?"Deselect All":"Select All"})]})}),E.map(Me=>e.jsxs("div",{onClick:()=>Me.is_active&&Qe(Me),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${Me.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:Se.includes(Me.id),onChange:pt=>{pt.stopPropagation(),at(Me.id)},onClick:pt=>pt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["House ",Me.house_id]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${Me.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:Me.status})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:T.find(pt=>pt.id===Me.housetype_id)?.name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:pt=>{pt.stopPropagation(),qt(Me)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(wr,{size:14})}),e.jsx("button",{onClick:pt=>{pt.stopPropagation(),Ge(Me)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Na,{size:14})}),e.jsx("button",{onClick:pt=>{pt.stopPropagation(),Oe(Me)},className:`p-1.5 rounded-lg ${Me.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:Me.is_active?"Deactivate":"Activate",children:Me.is_active?e.jsx(Al,{size:14}):e.jsx(_l,{size:14})}),e.jsx("button",{onClick:pt=>{pt.stopPropagation(),St(Me)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Er,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex justify-between mt-2",children:[e.jsxs("span",{children:["Created: ",Et(Me.created_at)]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${Me.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:Me.is_active?"Active":"Inactive"})]})]},Me.id))]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Ve,onChange:yt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:E.map(Me=>e.jsxs("tr",{onClick:()=>Me.is_active&&Qe(Me),className:`transition-colors cursor-pointer ${Me.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:Se.includes(Me.id),onChange:pt=>{pt.stopPropagation(),at(Me.id)},onClick:pt=>pt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Me.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:T.find(pt=>pt.id===Me.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Me.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:Et(Me.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:pt=>{pt.stopPropagation(),qt(Me)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(wr,{size:20})}),e.jsx("button",{onClick:pt=>{pt.stopPropagation(),Ge(Me)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:pt=>{pt.stopPropagation(),Oe(Me)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:Me.is_active?"Deactivate":"Activate",children:Me.is_active?e.jsx(Al,{size:25}):e.jsx(_l,{size:25})}),e.jsx("button",{onClick:pt=>{pt.stopPropagation(),St(Me)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},Me.id))})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",E.length," house",E.length!==1?"s":""]})})]})})]}):e.jsx(Zv,{})]})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx("button",{onClick:ut,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(D8,{onClose:ut,onCreated:pe,apartment_id:f,floor_id:h})]})})}),U&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit House"}),e.jsx("button",{onClick:ze,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(O8,{onClose:ze,onUpdated:Pe,house:re,apartment_id:f,floor_id:h})]})})}),ae&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:ue?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:ue?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:nt,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{ue&&(kt(ue),Y(!1),de(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${ue?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:ue?.is_active?"Deactivate":"Activate"})]})]})}),G&&xe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',xe.house_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:tr,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:Nr,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),X&&ne&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(M8,{house:ne,apartment:b,floor:w,onClose:Gt,onUploadSuccess:lr})})})}),ot&&b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(o_,{houses:E.filter(Me=>Se.includes(Me.id)),apartment:b,floor:w,onClose:()=>J(!1)})})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function d_(){const[t,a]=C.useState(""),[r,i]=C.useState(!1),l=gr(),d=async h=>{if(h.preventDefault(),!t){ie.error("Please enter your email address");return}i(!0);try{await Ae.post("/auth/forgot-password-unified",{email:t}),ie.success(" Password reset link sent! Check your inbox."),a("")}catch(b){const p=b.response?.data?.message||"Something went wrong";ie.error(p)}finally{i(!1)}},f=()=>{l("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-3 mt-5",children:[e.jsx("button",{onClick:f,className:"flex items-center gap-2 text-white hover:text-gray-300 transition-colors",title:"Back to Login",children:e.jsx(yc,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-10 h-10"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"font-bold text-xl text-center mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm text-center",children:"Enter your email address and we'll send you a password reset link."}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email address",className:"loginInput w-full",value:t,onChange:h=>a(h.target.value),required:!0,autoComplete:"email",disabled:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll check if you're an admin, employee, or house owner automatically."})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full flex items-center justify-center py-3",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):"Send Password Reset Link"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:f,className:"text-purple-700 dark:text-purple-400 hover:underline text-center font-medium py-2",children:" Back to Login"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center",children:"Don't have an account? Contact your apartment administrator."})]})})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function u_(){const[t,a]=C.useState(""),[r,i]=C.useState(""),[l,d]=C.useState(!1),[f,h]=C.useState(!1),[b,p]=C.useState(!1),[w]=rd(),j=gr(),[E,_]=C.useState(null),[T,A]=C.useState(null),[I,O]=C.useState(null),[M,D]=C.useState(!0),[B,H]=C.useState(!0),[z,L]=C.useState(""),[P,U]=C.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1,match:!1});C.useEffect(()=>{const G=w.get("token"),q=w.get("id"),xe=w.get("user_type");if(!G||!q){D(!1),H(!1),ie.error("Invalid or missing reset link parameters");return}_(G),A(q),O(xe||"user"),(async()=>{try{const le=await Ae.post("/auth/check-reset-token",{token:G,id:q});le.data.success?(O(le.data.user_type),L(le.data.email||""),D(!0)):(D(!1),ie.error(le.data.message||"Invalid reset token"))}catch(le){console.error("Error verifying token:",le),D(!1),ie.error("Unable to verify reset token")}finally{H(!1)}})()},[w]),C.useEffect(()=>{if(t){const G=/[A-Z]/.test(t),q=/[a-z]/.test(t),xe=/\d/.test(t),Ce=/[!@#$%^&*(),.?":{}|<>]/.test(t),le=t.length>=6;U(oe=>({...oe,length:le,uppercase:G,lowercase:q,number:xe,special:Ce}))}},[t]),C.useEffect(()=>{U(G=>({...G,match:t===r&&r.length>0}))},[t,r]);const Z=()=>{j("/login")},Y=(()=>{if(!t)return{strength:0,label:"Very Weak",color:"bg-red-500"};let G=0;t.length>=8&&G++,/(?=.*[a-z])/.test(t)&&G++,/(?=.*[A-Z])/.test(t)&&G++,/(?=.*\d)/.test(t)&&G++,/(?=.*[@$!%*?&])/.test(t)&&G++;const q=["Very Weak","Weak","Fair","Good","Strong","Very Strong"],xe=["bg-red-500","bg-red-400","bg-yellow-500","bg-green-400","bg-green-500","bg-green-600"];return{strength:G,label:q[G]||"Very Weak",color:xe[G]||"bg-red-500"}})(),ue=({isValid:G,text:q})=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[G?e.jsx(_s,{size:12,className:"text-green-500 flex-shrink-0"}):e.jsx(z0,{size:12,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:`truncate ${G?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:q})]}),de=async G=>{if(G.preventDefault(),!Object.values(P).every(xe=>xe===!0)){ie.error("Please meet all password requirements");return}if(!I){ie.error("Unable to determine account type. Please request a new reset link.");return}p(!0);try{await Ae.post("/auth/reset-password-unified",{token:E,id:T,password:t,user_type:I}),ie.success(" Password reset successful! Redirecting to login..."),setTimeout(()=>j("/login"),2e3)}catch(xe){const Ce=xe.response?.data?.message||"Reset failed. The link may have expired.";xe.response?.status===400?Ce.includes("expired")?ie.error("Reset link has expired. Please request a new one."):Ce.includes("Invalid")||Ce.includes("invalid")?ie.error("Invalid reset link. Please request a new one."):Ce.includes("already used")?ie.error("This reset link has already been used. Please request a new one."):ie.error(Ce):xe.response?.status===404?ie.error("Account not found. The link may be invalid."):ie.error(Ce)}finally{p(!1)}};return B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Please wait while we verify your reset link..."})]})})})}):M?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(yc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/apartment.png",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AptSync"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-5 sm:p-8",children:[I&&e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm ${I==="houseowner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:[e.jsx(tb,{size:14,className:"flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:I==="houseowner"?"House Owner Account":"Admin/Employee Account"}),z&&e.jsxs("span",{className:"hidden sm:inline text-xs opacity-75 ml-1 truncate",children:["(",z,")"]})]})}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Create a strong password for your account"})]}),e.jsxs("form",{onSubmit:de,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:t,onChange:G=>a(G.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?e.jsx(In,{size:20}):e.jsx(tn,{size:20})})]}),t&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strength:"}),e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${Y.strength<2?"text-red-500":Y.strength<4?"text-yellow-500":"text-green-500"}`,children:Y.label})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-1.5 sm:h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${Y.color}`,style:{width:`${Y.strength/5*100}%`}})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3 text-sm",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2",children:[e.jsx(ue,{isValid:P.length,text:"Min 6 characters"}),e.jsx(ue,{isValid:P.uppercase,text:"Uppercase letter"}),e.jsx(ue,{isValid:P.lowercase,text:"Lowercase letter"}),e.jsx(ue,{isValid:P.number,text:"Number"}),e.jsx(ue,{isValid:P.special,text:"Special character"}),e.jsx(ue,{isValid:P.match,text:"Passwords match"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:r,onChange:G=>i(G.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":f?"Hide password":"Show password",children:f?e.jsx(In,{size:20}):e.jsx(tn,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-3.5 sm:py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm sm:text-base transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:b||!Object.values(P).every(G=>G===!0),children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(tb,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:Z,className:"text-purple-600 dark:text-purple-400 hover:underline text-center text-sm py-2",children:" Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Having trouble?"," ",e.jsx("button",{type:"button",onClick:()=>j("/forgot-password"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium text-xs",children:"Request a new reset link"})]})})]})})]})}),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," AptSync. All rights reserved."]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3,toastClassName:"!text-sm"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("button",{onClick:Z,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(yc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(z0,{size:64,className:"text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm sm:text-base",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full mt-4",children:[e.jsx("button",{onClick:()=>j("/forgot-password"),className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex-1",children:"Request New Reset Link"}),e.jsx("button",{onClick:Z,className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors flex-1",children:"Back to Login"})]})]})})]})})}function f_(){const[t]=rd(),a=gr(),[r,i]=C.useState(""),[l,d]=C.useState(""),[f,h]=C.useState(""),[b,p]=C.useState(!0),[w,j]=C.useState(!0),[E,_]=C.useState(!1),[T,A]=C.useState(!1),[I,O]=C.useState(!1),[M,D]=C.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});C.useEffect(()=>{const U=t.get("token"),Z=t.get("id");if(!U||!Z){p(!1),j(!1),ie.error("Invalid registration link - missing parameters");return}i(U),d(Z),(async()=>{try{const Y=await Ae.post("/auth/verify-invite-link",{token:U,id:Z});Y.data.success&&(h(Y.data.email),p(!0))}catch(Y){console.error("Link verification failed:",Y),p(!1),ie.error(Y.response?.data?.message||"This invitation link is invalid or expired.")}finally{j(!1)}})()},[t]);const[B,H]=C.useState([]);C.useEffect(()=>{(async()=>{try{const ae=await(await fetch("https://general.apivcm.shop/countries")).json();H(ae.data)}catch(Z){console.error("Error fetching countries:",Z)}})()},[]);const z=U=>{const Z=U.target.value,ae=B.find(Y=>Y.country===Z);D(Y=>({...Y,country:Z,mobile:ae?ae.international_dialing+" ":Y.mobile}))},L=U=>{const{name:Z,value:ae}=U.target;D(Y=>({...Y,[Z]:ae}))},P=async U=>{if(U.preventDefault(),M.password!==M.confirmPassword){ie.error("Passwords do not match");return}if(M.password.length<8){ie.error("Password must be at least 8 characters long");return}O(!0);try{const Z=await Ae.post("/auth/verify",{token:r,id:l});await Ae.post("/auth/complete-registration",{email:f,firstname:M.firstname,lastname:M.lastname,country:M.country,mobile:M.mobile,password:M.password}),ie.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>a("/login"),2e3)}catch(Z){console.error("Registration error:",Z),ie.error(Z.response?.data?.message||"Failed to complete registration")}finally{O(!1)}};return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):b?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>a("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(yc,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",f]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:M.firstname,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:M.lastname,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("input",{name:"country",list:"country-list",value:M.country||"",onChange:z,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Select or type country *",required:!0}),e.jsx("datalist",{id:"country-list",children:B.map(U=>e.jsx("option",{value:U.country},U.country))})]})}),e.jsx("div",{children:e.jsx("input",{name:"mobile",value:M.mobile,onChange:U=>{const Z=M.mobile.split(" ")[0]||"",ae=U.target.value.replace(Z+" ",""),ue={target:{name:"mobile",value:Z+(ae?" "+ae.replace(/\D/g,""):"")}};L(ue)},placeholder:"Mobile * (e.g., +94 771234567)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:E?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:M.password,onChange:L,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>_(!E),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:E?e.jsx(In,{size:18}):e.jsx(tn,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:T?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:M.confirmPassword,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>A(!T),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:T?e.jsx(In,{size:18}):e.jsx(tn,{size:18})})]}),e.jsx("button",{type:"submit",disabled:I,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>a("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function x_(){const{auth:t}=C.useContext(zr),a=gr(),[r,i]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(null),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState(null),[T,A]=C.useState(!1),[I,O]=C.useState(null),M=B=>{a(`/bills-and-calculations/${B.id}`)},D=async()=>{try{d(!0),h(null);const B=await Ae.get("/apartments");B.data.success&&Array.isArray(B.data.data)?i(B.data.data):Array.isArray(B.data)?i(B.data):i([])}catch(B){console.error("Error loading apartments:",B),B.response?.status===401?(h("Unauthorized. Please login again."),a("/login")):B.response?.status===400?h("Company information missing. Please contact support."):h("Failed to load apartments. Please try again.")}finally{d(!1)}};return C.useEffect(()=>{D()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:D,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(en,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((B,H)=>e.jsxs("tr",{onClick:()=>B.is_active&&M(B),className:`transition-colors cursor-pointer ${B.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.picture?e.jsx("img",{src:`http://localhost:2500${B.picture}`,alt:B.name,className:"w-12 h-12 object-cover rounded-lg",onError:z=>{console.error("Image failed to load:",B.picture),z.target.style.display="none";const L=z.target.parentNode.querySelector(".image-fallback");L&&(L.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx(en,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:B.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.houses})]},B.id||H))})]})]})})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}const Ob=(t,a=2,r="standard")=>{if(r==="ten")return Math.ceil(t/10)*10;if(r==="hundred")return Math.ceil(t/100)*100;{const i=Math.pow(10,a);return Math.ceil(t*i)/i}};function h_({onClose:t,onCreated:a,apartment_id:r}){const[i,l]=C.useState(!1),[d,f]=C.useState(!1),[h,b]=C.useState(null),[p,w]=C.useState([]),[j,E]=C.useState(""),[_,T]=C.useState(""),[A,I]=C.useState(new Date().getFullYear()),[O,M]=C.useState(new Date().toLocaleString("default",{month:"long"})),[D,B]=C.useState(0),[H,z]=C.useState(0),[L,P]=C.useState(!1),[U,Z]=C.useState([]),[ae,Y]=C.useState(!1),[ue,de]=C.useState(""),G=C.useMemo(()=>{const ke=new Date;return ke.setDate(ke.getDate()+10),ke.toISOString().split("T")[0]},[]);C.useEffect(()=>{ue||de(G)},[G]);const[q,xe]=C.useState([]),[Ce,le]=C.useState(""),[oe,re]=C.useState([]),[Q,X]=C.useState([]),[se,ne]=C.useState("house_count"),K=async()=>{try{l(!0),b(null);const ke=await Ae.get("/bills");if(ke.data.success&&Array.isArray(ke.data.data)){const Qe=ke.data.data.filter(_e=>_e.billtype==="Shared");w(Qe)}else w([])}catch(ke){console.error("Error loading bills:",ke),b("Failed to load bills. Please try again.")}finally{l(!1)}},Se=async()=>{try{Y(!0);const ke=await Ae.get("/apartments");ke.data.success&&Z(ke.data.data||[])}catch(ke){console.error("Error loading apartments:",ke)}finally{Y(!1)}},we=async(ke,Qe)=>{if(!ke||!Qe){re([]),X([]),B(0);return}try{P(!0);const _e=await Ae.get(`/generate-bills/assigned-houses/details?bill_id=${ke}&apartment_id=${Qe}`);if(_e.data.success)if(re(_e.data.data.houses||[]),X(_e.data.data.floors||[]),B(_e.data.data.houses.length),_&&_e.data.data.houses.length>0){const ut=parseFloat(_)/_e.data.data.houses.length;z(ut)}else z(0)}catch(_e){console.error("Error fetching assigned houses details:",_e),re([]),X([]),B(0)}finally{P(!1)}};C.useEffect(()=>{K(),Se()},[]);const Ve=ke=>{le(ke),ke&&j?we(j,ke):(re([]),X([]),B(0))},Le=ke=>{E(ke),ke&&Ce?we(ke,Ce):(re([]),X([]),B(0))},ot=ke=>{T(ke);const Qe=oe;if(ke&&Qe.length>0)if(se==="square_footage"){const _e=parseFloat(ke)/Qe.length,ut=Ob(_e,2,"ten");z(ut)}else{const _e=parseFloat(ke)/Qe.length,ut=Ob(_e,2,"ten");z(ut)}else z(0)},J=async()=>{if(!j){b("Please select a bill.");return}if(!Ce){b("Please select an apartment.");return}if(!_||parseFloat(_)<=0){b("Please enter a valid total amount.");return}if(D===0){b("No houses are assigned to this bill for the selected apartment.");return}try{f(!0),b(null);const ke={bill_id:j,year:A,month:O,totalAmount:parseFloat(_),apartment_id:Ce,selected_floors:[],selected_houses:[],calculation_method:se,due_date:ue||new Date(Date.now()+14400*60*1e3).toISOString().split("T")[0]},Qe=await Ae.post("/generate-bills/multiple",ke);Qe.data.success?(ie.success(`Successfully generated ${Qe.data.data?.length||0} bills!`),a(Qe.data.data)):b(Qe.data.message||"Failed to generate bill")}catch(ke){console.error("Error generating bill:",ke),console.error("Error details:",ke.response?.data);let Qe="Failed to generate bill. Please try again.";ke.response?.data.message?Qe=ke.response.data.message:ke.message&&(Qe=ke.message),ie.error(Qe)}finally{f(!1)}},Ne=()=>{const ke=p.find(Qe=>Qe.id===j);return ke?ke.bill_name:""},Ie=()=>{const ke=U.find(Qe=>Qe.id===Ce);return ke?ke.name:""};return C.useEffect(()=>{(async()=>{try{const Qe=await Ae.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});xe(Qe.data.data||[])}catch(Qe){console.error("Error fetching house types:",Qe)}})()},[r]),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 pl-1",children:[h&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:h}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("input",{type:"number",value:A,onChange:ke=>I(parseInt(ke.target.value)),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:O,onChange:ke=>M(ke.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(ke=>e.jsx("option",{value:ke,children:ke},ke))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:ue,onChange:ke=>de(ke.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),!ue&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Default due date: ",G," (10 days from today)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:j,onChange:ke=>Le(ke.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:i,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),p.map(ke=>e.jsx("option",{value:ke.id,children:ke.bill_name},ke.id))]}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:Ce,onChange:ke=>Ve(ke.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:ae,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),U.map(ke=>e.jsx("option",{value:ke.id,children:ke.name},ke.id))]}),ae&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Calculation Method *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"house_count",name:"calculation_method",value:"house_count",checked:se==="house_count",onChange:ke=>ne(ke.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"house_count",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by House Count (Equal division)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"square_footage",name:"calculation_method",value:"square_footage",checked:se==="square_footage",onChange:ke=>ne(ke.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"square_footage",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by Square Footage (Proportional)"})]})]}),se==="square_footage"&&e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Total amount will be divided proportionally based on each house's square footage"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:_,onChange:ke=>ot(ke.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),j&&Ce&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Assigned Houses Information"}),L&&e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Assigned Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Floors:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Q.length})]})]}),Q.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Houses by Floor:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto pr-2",children:Q.map(ke=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Floor ",ke.floor_id,":"]}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[ke.assigned_houses_count," houses"]})]},ke.id))})]})]}),j&&Ce&&D>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Calculation Method:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:se==="house_count"?"House Count (Equal)":"Square Footage (Proportional)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ne()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Apartment:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ie()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:D})]})]}),_&&D>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[se==="house_count"?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(_).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",H.toFixed(2),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Rounded up to nearest 10)"})]})]})]}):e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amounts will be calculated proportionally based on each house's square footage and rounded up to the nearest 10"})}),se==="house_count"&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",_,"  ",D," houses =",e.jsxs("span",{className:"font-medium",children:[" $",(parseFloat(_)/D).toFixed(6)]}),e.jsx("span",{className:"mx-2",children:""}),"Rounded up to: ",e.jsxs("span",{className:"font-medium",children:["$",H.toFixed(2)]})," per house"]})]})]}),j&&Ce&&!L&&D===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:" No houses are assigned to this bill for the selected apartment. Please assign houses to this bill first."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{onClick:J,disabled:!j||!Ce||!_||D===0||d,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs("span",{children:["Generate ",D," Bills"]})})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function m_({bill:t,onClose:a,getApartmentName:r,getFloorName:i,getHouseName:l,getLocationScope:d,getLocationDisplay:f}){if(!t)return null;const h=p=>{if(!p)return"0.00";const w=typeof p=="string"?parseFloat(p):p;return isNaN(w)?"0.00":w.toFixed(2)},b=p=>{switch(p){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sa,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(yr,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Sa,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:t.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(Fi,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${b(d(t))}`,children:[d(t)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(El,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ii,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r(t.apartment_id)})]})]}),t.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pf,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i(t.floor_id)})]})]}),t.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(qr,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:f(t)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Zs,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",h(t.totalAmount)]})]}),t.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",h(t.unitPrice)]})]}),t.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(si,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${t.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:t.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function g_(){const[t,a]=C.useState(!1),[r,i]=C.useState([]),[l,d]=C.useState(!1),[f,h]=C.useState(""),[b,p]=C.useState(""),[w,j]=C.useState([]),[E,_]=C.useState({}),[T,A]=C.useState({}),[I,O]=C.useState(!1),[M,D]=C.useState({}),[B,H]=C.useState({}),[z,L]=C.useState({}),[P,U]=C.useState({}),[Z,ae]=C.useState({}),[Y,ue]=C.useState(!1),[de,G]=C.useState(null),[q,xe]=C.useState(!1),[Ce,le]=C.useState(!1),[oe,re]=C.useState(null),Q=async()=>{try{d(!0);const pe=await Ae.get("/generate-bills");pe.data.success&&(i(pe.data.data),X(pe.data.data))}catch(pe){console.error("Error loading generated bills:",pe),ie.error("Failed to load generated bills")}finally{d(!1)}},X=async pe=>{const Ge=[...new Set(pe.map(Oe=>Oe.apartment_id).filter(Boolean))],ze=[...new Set(pe.map(Oe=>Oe.floor_id).filter(Boolean))],Pe=[...new Set(pe.map(Oe=>Oe.house_id).filter(Boolean))];if(Ge.length>0)try{const Oe=await Ae.get("/apartments");if(Oe.data.success){const nt={};Oe.data.data.forEach(kt=>{nt[kt.id]=kt.name}),L(nt)}}catch(Oe){console.error("Error loading apartments:",Oe)}for(const Oe of ze)if(Oe&&!P[Oe])try{const nt=await Ae.get(`/floors/${Oe}`);nt.data.success&&U(kt=>({...kt,[Oe]:nt.data.data.floor_id}))}catch(nt){console.error("Error loading floor:",nt)}for(const Oe of Pe)if(Oe&&!Z[Oe])try{const nt=await Ae.get(`/houses/${Oe}`);nt.data.success&&ae(kt=>({...kt,[Oe]:nt.data.data.house_id}))}catch(nt){console.error("Error loading house:",nt)}},se=pe=>z[pe]||pe||"All Apartments",ne=pe=>P[pe]||pe||"All Floors",K=pe=>Z[pe]||pe||"All Houses",Se=pe=>pe.house_id?"House":pe.floor_id?"Floor":pe.apartment_id?"Apartment":"Global",we=pe=>{switch(Se(pe)){case"House":return`${se(pe.apartment_id)}  ${ne(pe.floor_id)}  ${K(pe.house_id)}`;case"Floor":return`${se(pe.apartment_id)}  ${ne(pe.floor_id)}`;case"Apartment":return se(pe.apartment_id);default:return"All Locations"}};C.useEffect(()=>{Q(),_e()},[]);const Ve=()=>{a(!0)},Le=()=>{a(!1)},ot=pe=>{pe&&pe.length>0&&(i(Ge=>[...pe,...Ge]),X(pe)),Q(),a(!1)},J=pe=>{re(pe),le(!0)},Ne=()=>{le(!1),re(null)},Ie=pe=>{G(pe),ue(!0)},ke=async()=>{if(de)try{xe(!0),(await Ae.delete(`/generate-bills/${de.id}`)).data.success&&(ie.success("Generated bill deleted successfully"),i(Ge=>Ge.filter(ze=>ze.id!==de.id)))}catch(pe){console.error("Error deleting generated bill:",pe),ie.error(pe.response?.data?.message||"Failed to delete generated bill")}finally{xe(!1),ue(!1),G(null)}},Qe=()=>{ue(!1),G(null)},_e=async()=>{try{O(!0);const pe=await Ae.get("/apartments");if(pe.data.success){j(pe.data.data||[]);const Ge={};pe.data.data.forEach(ze=>{Ge[ze.id]=ze.name}),L(Ge)}}catch(pe){console.error("Error loading apartments:",pe),ie.error("Failed to load apartments")}finally{O(!1)}},ut=r.filter(pe=>{const Ge=pe.bill_name?.toLowerCase().includes(f.toLowerCase())||pe.month?.toLowerCase().includes(f.toLowerCase())||pe.year?.toString().includes(f)||se(pe.apartment_id)?.toLowerCase().includes(f.toLowerCase())||ne(pe.floor_id)?.toLowerCase().includes(f.toLowerCase())||K(pe.house_id)?.toLowerCase().includes(f.toLowerCase()),ze=!b||pe.billtype===b;return Ge&&ze});return[...new Set(r.map(pe=>pe.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:f,onChange:pe=>h(pe.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:Ve,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",ut.length,")"]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):ut.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(qa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:ut.map(pe=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:pe.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:pe.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[pe.month," ",pe.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${pe.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:pe.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(pe.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>J(pe),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(tn,{size:16})}),e.jsx("button",{onClick:()=>Ie(pe),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(Er,{size:16})})]})]})]})})},pe.id))})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:Le,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(h_,{onClose:Le,onCreated:ot})]})}),Ce&&oe&&e.jsx(m_,{bill:oe,onClose:Ne,getApartmentName:se,getFloorName:ne,getHouseName:K,getLocationScope:Se,getLocationDisplay:we}),Y&&de&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Er,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",de.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",de.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:de.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:de.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[de.month," ",de.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Qe,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:q,children:"Cancel"}),e.jsx("button",{onClick:ke,disabled:q,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function p_(){const[t,a]=C.useState([]),[r,i]=C.useState(!1),[l,d]=C.useState(""),[f,h]=C.useState(""),[b,p]=C.useState([]),[w,j]=C.useState({}),[E,_]=C.useState({}),[T,A]=C.useState({}),[I,O]=C.useState({}),[M,D]=C.useState({}),[B,H]=C.useState(!1),[z,L]=C.useState(null),[P,U]=C.useState(!1),[Z,ae]=C.useState(null),[Y,ue]=C.useState(!1),de=async()=>{try{i(!0);const K=await Ae.get("/generate-measurable-bills");K.data.success&&(a(K.data.data),G(K.data.data))}catch(K){console.error("Error loading measurable bills:",K),ie.error("Failed to load measurable bills")}finally{i(!1)}},G=async K=>{const Se=[...new Set(K.map(Le=>Le.apartment_id).filter(Boolean))],we=[...new Set(K.map(Le=>Le.floor_id).filter(Boolean))],Ve=[...new Set(K.map(Le=>Le.house_id).filter(Boolean))];if(Se.length>0)try{const Le=await Ae.get("/apartments");if(Le.data.success){const ot={};Le.data.data.forEach(J=>{ot[J.id]=J.name}),A(ot)}}catch(Le){console.error("Error loading apartments:",Le)}for(const Le of we)if(Le&&!I[Le])try{const ot=await Ae.get(`/floors/${Le}`);ot.data.success&&O(J=>({...J,[Le]:ot.data.data.floor_id}))}catch(ot){console.error("Error loading floor:",ot)}for(const Le of Ve)if(Le&&!M[Le])try{const ot=await Ae.get(`/houses/${Le}`);ot.data.success&&D(J=>({...J,[Le]:ot.data.data.house_id}))}catch(ot){console.error("Error loading house:",ot)}},q=K=>T[K]||K||"N/A",xe=K=>I[K]||K||"N/A",Ce=K=>M[K]||K||"N/A",le=K=>K.house_id?`${q(K.apartment_id)}  ${xe(K.floor_id)}  ${Ce(K.house_id)}`:K.floor_id?`${q(K.apartment_id)}  ${xe(K.floor_id)}`:K.apartment_id?q(K.apartment_id):"Global";C.useEffect(()=>{de()},[]);const oe=K=>{ae(K),ue(!0)},re=()=>{ue(!1),ae(null)},Q=K=>{L(K),H(!0)},X=async()=>{if(z)try{U(!0),(await Ae.delete(`/generate-measurable-bills/${z.id}`)).data.success&&(ie.success("Measurable bill deleted successfully"),a(Se=>Se.filter(we=>we.id!==z.id)))}catch(K){console.error("Error deleting measurable bill:",K),ie.error(K.response?.data?.message||"Failed to delete measurable bill")}finally{U(!1),H(!1),L(null)}},se=()=>{H(!1),L(null)},ne=t.filter(K=>{const Se=K.bill_name?.toLowerCase().includes(l.toLowerCase())||K.month?.toLowerCase().includes(l.toLowerCase())||K.year?.toString().includes(l)||q(K.apartment_id)?.toLowerCase().includes(l.toLowerCase())||xe(K.floor_id)?.toLowerCase().includes(l.toLowerCase())||Ce(K.house_id)?.toLowerCase().includes(l.toLowerCase()),we=!f||K.billtype===f;return Se&&we});return[...new Set(t.map(K=>K.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:l,onChange:K=>d(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",ne.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",ne.length," of ",t.length," bills"]})]}),r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):ne.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(As,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:ne.map(K=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:K.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:K.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[K.month," ",K.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(K.created_at).toLocaleDateString()," at ",new Date(K.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>oe(K),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(tn,{size:16})}),e.jsx("button",{onClick:()=>Q(K),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:K.payment_status==="Paid",children:e.jsx(Er,{size:16})})]})]})]})})},K.id))})]})]}),Y&&Z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:re,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:Z.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:Z.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[Z.month," ",Z.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:le(Z)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:Z.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:Z.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[Z.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",Z.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:Z.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(Z.created_at).toLocaleString()})]}),Z.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(Z.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:re,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),B&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Er,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:z.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:z.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[z.month," ",z.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",z.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:se,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:X,disabled:P,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function y_(){const[t,a]=C.useState(!1),[r,i]=C.useState("bills");gr();const{apartment_id:l}=pn(),[d,f]=C.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>i("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${r==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>i("generateBill"),className:`px-4 py-2 font-semibold 
                                ${r==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>i("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${r==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),r==="bills"&&e.jsx(ew,{}),r==="generateBill"&&e.jsx(g_,{}),r==="measurableBill"&&e.jsx(p_,{})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function b_({show:t,onClose:a,onSave:r}){const[i,l]=C.useState({fromRange:"",toRange:""});if(!t)return null;const d=h=>{const{name:b,value:p}=h.target;l(w=>({...w,[b]:p}))},f=()=>{if(!i.fromRange||!i.toRange){ie.error("Please fill all fields.");return}r(i)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(yr,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:i.fromRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:i.toRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:f,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function v_({range:t,onClose:a,onUpdated:r}){const[i,l]=C.useState({fromRange:"",toRange:"",unitPrice:""}),[d,f]=C.useState(!1),[h,b]=C.useState(""),p=localStorage.getItem("token");C.useEffect(()=>{t&&l({fromRange:t.fromRange??"",toRange:t.toRange??"",unitPrice:t.unitPrice??""})},[t]);const w=E=>{const{name:_,value:T}=E.target;l(A=>({...A,[_]:T}))},j=async E=>{E.preventDefault(),f(!0),b("");try{const _=await Ae.put(`/billranges/${t.id}`,i,{headers:{Authorization:`Bearer ${p}`}});_.data.success?(r&&r(_.data.data),a&&a()):b(_.data.message||"Failed to update bill range")}catch(_){console.error("Update error:",_),b("Error updating bill range")}finally{f(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:i.fromRange,onChange:w,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:i.toRange,onChange:w,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})]})})}function w_(){const{bill_id:t}=pn(),[a,r]=C.useState(!1),[i,l]=C.useState(null),[d,f]=C.useState([]),[h,b]=C.useState(!1),p=gr(),[w,j]=C.useState([]),[E,_]=C.useState(!1),[T,A]=C.useState(!1),[I,O]=C.useState(!1),[M,D]=C.useState(null),[B,H]=C.useState(null),[z,L]=C.useState(!1),P=async()=>{try{r(!0),l(null);const de=await Ae.get(`/billranges?bill_id=${t}`);if(de.data.success&&Array.isArray(de.data.data)){const G=de.data.data.filter(q=>q.bill_id===t);f(G)}else f([])}catch(de){console.error("Error loading bill ranges:",de),l("Failed to load bill ranges. Please try again.")}finally{r(!1)}};C.useEffect(()=>{P()},[t]);const U=()=>{p("/bills-and-calculations")},Z=async()=>{try{_(!0),l(null);const de=await Ae.get("/bills");de.data.success&&Array.isArray(de.data.data)?j(de.data.data):j([])}catch(de){console.error("Error loading bills:",de),l("Failed to load bills. Please try again.")}finally{_(!1)}};C.useEffect(()=>{Z()},[]);const ae=de=>{H(de),L(!0)},Y=async()=>{try{if(!B)return;await Ae.delete(`/billranges/${B.id}`),ie.success("Bill range deleted successfully"),L(!1),H(null),P()}catch(de){console.error("Delete bill range error:",de),ie.error("Failed to delete bill range")}},ue=()=>{L(!1),H(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:b}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${h?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(On,{size:25})}),e.jsx(Sa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const de=w.find(G=>G.id===t);return de?de.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):i?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[i,e.jsx("button",{onClick:P,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(en,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((de,G)=>e.jsxs("tr",{onClick:()=>p(`/billprice/${t}/${de.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:G+1}),e.jsx("td",{className:"px-4 py-4",children:de.fromRange}),e.jsx("td",{className:"px-4 py-4",children:de.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),D(de),O(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:q=>{q.stopPropagation(),ae(de)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},de.id))})]})})]})]})})]}),e.jsx(b_,{show:T,onClose:()=>A(!1),onSave:async de=>{try{(await Ae.post("/billranges",{...de,bill_id:t})).data.success?(ie.success("Bill range added successfully!"),A(!1),P()):ie.error("Failed to add bill range.")}catch(G){console.error("Error adding bill range:",G),ie.error("Error adding bill range.")}}}),I&&e.jsx(v_,{range:M,onClose:()=>O(!1),onUpdated:()=>{ie.success("Bill range updated!"),P()}}),z&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ue,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function N_({bill_id:t,billrange_id:a,onClose:r,onCreated:i}){const[l,d]=C.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,unitprice:"",fixedamount:""}),[f,h]=C.useState(!1),[b,p]=C.useState("");Fr.useEffect(()=>{},[t,a]);const w=E=>{const{name:_,value:T}=E.target;d(A=>({...A,[_]:T}))},j=async E=>{E.preventDefault(),h(!0),p("");const _={...l,bill_id:t,billrange_id:a};try{const T=await Ae.post("/billprice",_,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});T.data.success?(i?.(T.data.data),d({year:"",month:"",unitprice:"",fixedamount:""}),r()):p(T.data.message||"Failed to save bill price")}catch(T){console.error("Error saving bill price:",T),console.error("Error response:",T.response?.data),T.response?.status===400?p(T.response.data?.message||"Bad request. Please check all required fields."):T.response?.status===403?p("Access denied. Please check your login or permissions."):p("Error saving bill price. Please try again.")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(yr,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:l.year,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2025",max:"2030"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:l.month,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(E=>e.jsx("option",{value:E,children:E},E))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:l.unitprice,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:l.fixedamount,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!t||!a,className:`px-4 py-2 rounded-lg text-white transition ${f||!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:f?"Saving...":"Save"})]})]})]})})}function k_({bill_id:t,billrange_id:a,billPrice:r,onClose:i,onUpdated:l}){const[d,f]=C.useState({year:"",month:"",unitprice:"",fixedamount:""}),[h,b]=C.useState(!1),[p,w]=C.useState("");C.useEffect(()=>{r&&f({year:r.year||"",month:r.month||"",unitprice:r.unitprice||"",fixedamount:r.fixedamount||""})},[r]),C.useEffect(()=>{},[t,a,r,d]);const j=_=>{const{name:T,value:A}=_.target;f(I=>({...I,[T]:A}))},E=async _=>{if(_.preventDefault(),b(!0),w(""),!r||!r.id){w("No bill price selected for editing"),b(!1);return}const T={...d,bill_id:t,billrange_id:a,id:r.id};try{const A=await Ae.put(`/billprice/${r.id}`,T,{headers:{"Content-Type":"application/json"}});A.data.success?(l?.(A.data.data),i()):w(A.data.message||"Failed to update bill price")}catch(A){console.error("Error updating bill price:",A),console.error("Error response:",A.response?.data),A.response?.status===400?w(A.response.data?.message||"Bad request. Please check all required fields."):A.response?.status===403?w("Access denied. Please check your login or permissions."):A.response?.status===404?w("Bill price not found. It may have been deleted."):w("Error updating bill price. Please try again.")}finally{b(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(yr,{size:20})})]}),p&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:p}),e.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:d.year,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:d.month,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:d.unitprice,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:d.fixedamount,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!t||!a||!r,className:`px-4 py-2 rounded-lg text-white transition ${h||!t||!a||!r?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:h?"Updating...":"Update"})]})]})]})})}function j_(){const{bill_id:t,billrange_id:a}=pn(),r=gr(),[i,l]=C.useState([]),[d,f]=C.useState(!1),[h,b]=C.useState(null),[p,w]=C.useState(!1),[j,E]=C.useState(!1),[_,T]=C.useState(!1),[A,I]=C.useState(null);Fr.useEffect(()=>{},[t,a]);const O=async()=>{try{f(!0),b(null);const P=await Ae.get(`/billprice?bill_id=${t}&billrange_id=${a}`);P.data.success?l(P.data.data||[]):(l([]),b(P.data.message||"Failed to load bill prices"))}catch(P){console.error("Error loading bill prices:",P),b(P.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{f(!1)}};C.useEffect(()=>{t&&a?O():b("Missing bill_id or billrange_id in URL parameters")},[t,a]);const M=()=>{r(-1)},D=()=>{O(),E(!1),ie.success("Bill price created successfully!")},B=P=>{I(P),T(!0)},H=()=>{O(),T(!1),I(null),ie.success("Updated!")},z=()=>{T(!1),I(null)},L=async P=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await Ae.delete(`/billprice/${P}`),ie.success("Bill price deleted successfully"),O()}catch(U){console.error("Error deleting bill price:",U),ie.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(hr,{onCollapse:w}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${p?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:M,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(On,{size:25})}),e.jsx(wr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>E(!0),disabled:!t||!a,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):h?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[h,e.jsx("button",{onClick:O,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(wr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map((P,U)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:U+1}),e.jsx("td",{className:"px-4 py-4",children:P.year}),e.jsx("td",{className:"px-4 py-4",children:P.month}),e.jsx("td",{className:"px-4 py-4",children:P.unitprice}),e.jsx("td",{className:"px-4 py-4",children:P.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(P),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(Na,{size:20})}),e.jsx("button",{onClick:()=>L(P.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Er,{size:20})})]})})]},P.id))})]})})]})]})})]}),j&&e.jsx(N_,{onClose:()=>E(!1),onCreated:D,billrange_id:a,bill_id:t}),_&&A&&e.jsx(k_,{onClose:z,onUpdated:H,billrange_id:a,bill_id:t,billPrice:A}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function C_(){const[t,a]=C.useState(!1),[r,i]=C.useState(0),[l,d]=C.useState(!0),[f,h]=C.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0,assignedBills:0,totalComplaints:0,complaintCategories:0}),{auth:b}=C.useContext(zr);C.useEffect(()=>{b?.user?.id&&(p(),w())},[b?.user?.id]);const p=async()=>{try{d(!0);const E=await Ae.get(`/user-apartments/users/${b.user.id}/apartments`);if(E.data.success){const _=E.data.data||[];i(_.length),h(T=>({...T,assignedApartments:_.length}))}else ie.error("Failed to load assigned apartments")}catch(E){console.error("Error fetching assigned apartments:",E),ie.error("Error loading assigned apartments")}finally{d(!1)}},w=async()=>{try{let E=12,_=45,T=8,A=0,I=0,O=0;try{let M=null;try{M=await Ae.get(`/complaints?assigned_to=${b.user.id}`)}catch{try{M=await Ae.get(`/complaints?user_id=${b.user.id}`)}catch{try{M=await Ae.get("/complaints")}catch{M=null}}}const D=M&&(Array.isArray(M.data.data)?M.data.data:Array.isArray(M.data)?M.data:[]);I=D.length;const B=new Set;D.forEach(H=>{H.category?B.add(H.category):H.category_id&&B.add(H.category_id)}),O=B.size}catch(M){console.error("Error fetching complaints:",M)}try{let M=null;try{M=await Ae.get(`/user-bills/users/${b.user.id}/bills`)}catch{try{M=await Ae.get(`/bills?assigned_to=${b.user.id}`)}catch{M=null}}A=(M&&(Array.isArray(M.data.data)?M.data.data:Array.isArray(M.data)?M.data:[])).length}catch(M){console.error("Error fetching assigned bills:",M)}h(M=>({...M,pendingTasks:E,completedTasks:_,maintenanceRequests:T,assignedBills:A,totalComplaints:I,complaintCategories:O}))}catch(E){console.error("Error fetching dashboard stats:",E)}},j=E=>E.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(_s,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:j(r)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(S6,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Your Assigned Totals"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Assigned Bills"}),e.jsx("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:j(f.assignedBills)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bills currently assigned to you"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Complaints"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-1",children:j(f.totalComplaints)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Complaints assigned to you"})]})]})]})]})})]}),e.jsx(or,{position:"top-right",autoClose:3e3})]})}function E_(){const[t,a]=C.useState(!1),[r,i]=C.useState(null),[l,d]=C.useState(!0),[f,h]=C.useState(!1),[b,p]=C.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:w}=C.useContext(zr);C.useEffect(()=>{j()},[]);const j=async()=>{try{d(!0);const O=await Ae.get("/auth/me");if(O.data.success&&O.data.data&&O.data.data.length>0){const M=O.data.data[0];i(M),p({firstname:M.firstname||"",lastname:M.lastname||"",country:M.country||"",mobile:M.mobile||""})}else ie.error("No profile data found")}catch(O){console.error("Error fetching profile:",O),ie.error("Failed to load profile")}finally{d(!1)}},E=()=>{h(!0)},_=()=>{h(!1),r&&p({firstname:r.firstname||"",lastname:r.lastname||"",country:r.country||"",mobile:r.mobile||""})},T=async()=>{try{const O=await Ae.put(`/auth/users/${r.id}`,b);O.data.success&&(i(M=>({...M,...O.data.data})),h(!1),ie.success("Profile updated successfully"),j())}catch(O){console.error("Error updating profile:",O),ie.error(O.response?.data?.message||"Failed to update profile")}},A=O=>{const{name:M,value:D}=O.target;p(B=>({...B,[M]:D}))},I=O=>new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return l?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):r?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:_,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(yr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(yf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Na,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[r.firstname?.charAt(0)?.toUpperCase(),r.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[r.firstname," ",r.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:r.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Fi,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",I(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),f?e.jsx("input",{type:"text",name:"firstname",value:b.firstname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),f?e.jsx("input",{type:"text",name:"lastname",value:b.lastname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(El,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Cc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(uo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(fo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:r.role})]})]})]})})]})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function __(){const[t,a]=C.useState([]),[r,i]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState(!1),[b,p]=C.useState(!1),{auth:w}=C.useContext(zr),j=gr(),E=async()=>{try{i(!0);const O=await Ae.get(`/user-apartments/users/${w.user.id}/apartments`);O.data.success?a(O.data.data||[]):(ie.error("Failed to load apartments"),a([]))}catch(O){console.error("Error fetching apartments:",O),ie.error("Error loading your apartments"),a([])}finally{i(!1)}};C.useEffect(()=>{w?.user?.id&&E()},[w?.user?.id]);const _=t.filter(O=>O.name?.toLowerCase().includes(l.toLowerCase())||O.address?.toLowerCase().includes(l.toLowerCase())||O.city?.toLowerCase().includes(l.toLowerCase())),T=O=>{try{return new Date(O).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=O=>O?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",I=O=>{j(`/floors/${O}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(hr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>p(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(hr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(As,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:l,onChange:O=>d(O.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xa,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:_.map(O=>e.jsxs("div",{onClick:()=>I(O.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(qr,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:O.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(O.is_active)}`,children:O.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(El,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[O.address,", ",O.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(si,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:O.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(xa,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:O.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",T(O.assigned_at)]})})]},O.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(O=>e.jsxs("div",{onClick:()=>I(O.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(qr,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:O.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(O.is_active)}`,children:O.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(El,{size:16}),e.jsxs("span",{className:"text-sm",children:[O.address,", ",O.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(si,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:O.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(xa,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:O.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",T(O.assigned_at)]})})]},O.id))})]})}),_.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(As,{size:20})})})]})})]}),e.jsx(or,{position:"top-right",autoClose:3e3})]})}function A_({bill_id:t,onClose:a,onSuccess:r}){const[i,l]=C.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[d,f]=C.useState(!1),[h,b]=C.useState({}),p=_=>{const{name:T,value:A}=_.target;l(I=>({...I,[T]:A})),h[T]&&b(I=>({...I,[T]:""}))},w=()=>{const _={};return(!i.year||i.year<2e3||i.year>2100)&&(_.year="Please enter a valid year (2000-2100)"),(!i.month||i.month<1||i.month>12)&&(_.month="Please select a valid month (1-12)"),(!i.amount||parseFloat(i.amount)<=0)&&(_.amount="Please enter a valid amount"),b(_),Object.keys(_).length===0},j=async _=>{if(_.preventDefault(),!!w())try{f(!0);const T=await Ae.post("/shared-value-prices",{bill_id:t,year:parseInt(i.year),month:parseInt(i.month),amount:parseFloat(i.amount)});T.data.success?r():ie.error(T.data.message||"Failed to create shared value price")}catch(T){console.error("Error creating shared value price:",T),T.response?.data?.message?ie.error(T.response.data.message):ie.error("Failed to create shared value price")}finally{f(!1)}},E=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:i.year,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),h.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:i.month,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:E.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))}),h.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:i.amount,onChange:p,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),h.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[d&&e.jsx(Ut,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Creating...":"Create"})]})]})]})]})})}function S_(){const{bill_id:t}=pn(),a=gr(),[r,i]=C.useState([]),[l,d]=C.useState(null),[f,h]=C.useState(!1),[b,p]=C.useState(!1),[w,j]=C.useState(null),[E,_]=C.useState(!1),[T,A]=C.useState(!1),[I,O]=C.useState(!1),[M,D]=C.useState(null),[B,H]=C.useState(!1),[z,L]=C.useState(null),P=async()=>{try{p(!0);const Ce=await Ae.get(`/bills/${t}`);Ce.data.success&&d(Ce.data.data)}catch(Ce){console.error("Error loading bill info:",Ce)}finally{p(!1)}},U=async()=>{try{if(h(!0),j(null),!t){j("Bill ID is required");return}const Ce=await Ae.get(`/shared-value-prices/bill/${t}`);Ce.data.success?i(Ce.data.data||[]):(j("Failed to load shared value prices"),i([]))}catch(Ce){console.error("Error loading shared value prices:",Ce),j("Failed to load shared value prices. Please try again."),i([])}finally{h(!1)}};C.useEffect(()=>{t&&(P(),U())},[t]);const Z=()=>{a(-1)},ae=()=>{A(!1),ie.success("Shared value price created successfully"),U()};C.useEffect(()=>{t&&(P(),U())},[t]);const Y=()=>{U(),O(!1),D(null),ie.success("Shared value price updated successfully")},ue=Ce=>{D(Ce),O(!0)},de=Ce=>{L(Ce),H(!0)},G=async()=>{try{if(!z)return;await Ae.delete(`/shared-value-prices/${z.id}`),ie.success("Shared value price deleted successfully"),H(!1),L(null),U()}catch(Ce){console.error("Delete shared value price error:",Ce),ie.error("Failed to delete shared value price")}},q=()=>{H(!1),L(null)},xe=Ce=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ce-1]||Ce;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(hr,{onCollapse:_}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${E?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Z,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(On,{size:25})}),e.jsx(wr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),l&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[l.bill_name," - ",l.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),disabled:!t,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${t?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(wr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((Ce,le)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:le+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Ce.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:xe(Ce.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:Ce.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(Ce.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ue(Ce),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(Na,{size:18})}),e.jsx("button",{onClick:()=>de(Ce),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(Er,{size:18})})]})})]},Ce.id))})]})})]})]})})]}),T&&e.jsx(A_,{bill_id:t,onClose:()=>A(!1),onSuccess:ae}),I&&M&&e.jsx(EditSharedValuePriceModal,{price:M,onClose:()=>{O(!1),D(null)},onSuccess:Y}),B&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",xe(z.month)," ",z.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:G,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function iw({payment:t,onClose:a,onUpdate:r}){const[i,l]=C.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[d,f]=C.useState(!1),h=!!t?.generateMeasurable_bills_id;if(C.useEffect(()=>{t&&l({additionalAmount:0,payment_status:t.payment_status||"Pending",paid_at:t.paid_at?new Date(t.paid_at).toISOString().split("T")[0]:""})},[t,h]),!t)return null;const p=h?parseFloat(t.generated_total_amount)||parseFloat(t.unitPrice)||0:parseFloat(t.unitPrice)||0,w=parseFloat(t.paidAmount)||0,j=parseFloat(t.pendingAmount)||0,E=w+parseFloat(i.additionalAmount||0),_=p-E,T=M=>{const D=typeof M=="string"?parseFloat(M):M;return isNaN(D)?"0.00":D.toFixed(2)},A=async M=>{M.preventDefault();const D=parseFloat(i.additionalAmount||0);if(D<0){ie.error("Payment amount cannot be negative");return}if(D>j){ie.error(`Payment amount cannot exceed pending amount of $${T(j)}`);return}let B=i.payment_status;E>=p?B="Paid":E>0?B="Partial":B="Pending";try{f(!0);const H={payment_status:B,paidAmount:E};B==="Paid"&&i.paid_at?H.paid_at=i.paid_at:B==="Paid"&&!i.paid_at&&(H.paid_at=new Date().toISOString().split("T")[0]);const z=await Ae.patch(`/bill-payments/${t.id}/status`,H);z.data.success&&(ie.success("Payment updated successfully"),r(z.data.data))}catch(H){console.error("Error updating payment:",H),console.error("Error details:",H.response?.data),ie.error(`Failed to update payment: ${H.response?.data?.message||H.message}`)}finally{f(!1)}},I=M=>{const D=parseFloat(M)||0,H=Math.min(D,j),z=w+H;let L="Pending";z>=p?L="Paid":z>0&&(L="Partial"),l(P=>({...P,additionalAmount:H,payment_status:L}))},O=_<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Sa,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),h&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(yr,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.bill_name," (",t.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.apartment_name," - Floor ",t.floor_id," - House ",t.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",T(w)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",T(j)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${h?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${h?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:h?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${h?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",T(p)]}),h&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:j,value:i.additionalAmount,onChange:M=>I(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",T(j)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",T(i.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",T(E)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",T(i.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${_>0&&_<j?"bg-orange-50 dark:bg-orange-900/20":O?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${_>0&&_<j?"text-orange-800 dark:text-orange-300":O?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${_>0&&_<j?"text-orange-600 dark:text-orange-400":O?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",T(_)]}),O?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):_<j?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",T(j-_)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${i.payment_status==="Paid"?"text-green-600 dark:text-green-400":i.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:i.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(i.payment_status==="Paid"||O)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:i.paid_at,onChange:M=>l(D=>({...D,paid_at:M.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:i.payment_status==="Paid"||O})]}),!i.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||i.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Zs,{size:16}),e.jsxs("span",{children:["Pay $",T(i.additionalAmount)]})]})})]})]})]})]})})}function T_(){const[t,a]=C.useState([]),[r,i]=C.useState(!1),[l,d]=C.useState({}),[f,h]=C.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[b,p]=C.useState([]),[w,j]=C.useState([]),[E,_]=C.useState([]),[T,A]=C.useState(""),[I,O]=C.useState([]),[M,D]=C.useState(""),[B,H]=C.useState(!1),[z,L]=C.useState(!1),[P,U]=C.useState(!1),[Z,ae]=C.useState(!1),[Y,ue]=C.useState(null),[de,G]=C.useState(!1),[q,xe]=C.useState(null),[Ce,le]=C.useState(!1),[oe,re]=C.useState(null),Q=async()=>{try{const Oe=await Ae.get("/bills");Oe.data.success&&O(Oe.data.data||[])}catch(Oe){console.error("Error loading bills:",Oe),ie.error("Failed to load bills")}},X=async()=>{try{L(!0);const Oe=await Ae.get("/apartments");Oe.data.success?p(Oe.data.data||[]):p([])}catch(Oe){console.error("Error loading apartments:",Oe),ie.error("Failed to load apartments"),p([])}finally{L(!1)}},se=async Oe=>{if(!Oe){j([]),_([]);return}try{U(!0);const nt=await Ae.get(`/floors?apartment_id=${Oe}`);nt.data.success?j(nt.data.data||[]):j([])}catch(nt){console.error("Error loading floors:",nt),ie.error("Failed to load floors"),j([])}finally{U(!1)}},ne=async Oe=>{if(!Oe||!f.apartment_id){_([]);return}try{ae(!0);const nt=await Ae.get(`/houses?floor_id=${Oe}&apartment_id=${f.apartment_id}`);nt.data.success?_(nt.data.data||[]):_([])}catch(nt){console.error("Error loading houses:",nt),ie.error("Failed to load houses"),_([])}finally{ae(!1)}},K=async()=>{try{i(!0);const Oe=new URLSearchParams;Object.entries(f).forEach(([kt,St])=>{St&&Oe.append(kt,St)});const nt=await Ae.get(`/bill-payments?${Oe}`);nt.data.success&&a(nt.data.data)}catch(Oe){console.error("Error loading payments:",Oe),console.error("Payment loading error details:",Oe.response?.data),ie.error("Failed to load payments. Check console for details.")}finally{i(!1)}},Se=async()=>{try{const Oe=await Ae.get("/bill-payments/summary");if(Oe.data.success){const nt={};Oe.data.data.forEach(kt=>{nt[kt.payment_status]=kt}),d(nt)}}catch(Oe){console.error("Error loading summary:",Oe)}};C.useEffect(()=>{Q(),X(),Se(),K()},[]),C.useEffect(()=>{K()},[f]);const we=Oe=>{h({billtype:Oe,apartment_id:"",floor_id:"",house_id:"",payment_status:f.payment_status,month:f.month,year:f.year})},Ve=Oe=>{h(nt=>({...nt,apartment_id:Oe,floor_id:"",house_id:""})),se(Oe)},Le=Oe=>{h(nt=>({...nt,floor_id:Oe,house_id:""})),ne(Oe)},ot=Oe=>{h(nt=>({...nt,house_id:Oe}))},J=async()=>{const Oe=(T||"").trim();if(!Oe){ie.info("Please enter an internal House ID to lookup");return}h(nt=>({...nt,house_id:Oe})),setTimeout(()=>{try{K(),ie.success("Loading bills for House")}catch(nt){console.error("Manual house lookup failed",nt),ie.error("Failed to load bills for the provided House ID")}},120)},Ne=(Oe,nt)=>{h(kt=>({...kt,[Oe]:nt}))},Ie=Oe=>{re(Oe),le(!0)},ke=async()=>{if(oe)try{xe(oe.id),(await Ae.delete(`/bill-payments/${oe.id}`)).data.success&&(ie.success("Payment deleted successfully"),a(nt=>nt.filter(kt=>kt.id!==oe.id)),Se())}catch(Oe){console.error("Error deleting payment:",Oe),ie.error(Oe.response?.data?.message||"Failed to delete payment")}finally{xe(null),le(!1),re(null)}},Qe=()=>{h({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),D(""),j([]),_([])},_e=t.filter(Oe=>{const nt=M.toLowerCase();return Oe.bill_name?.toLowerCase().includes(nt)||Oe.apartment_name?.toLowerCase().includes(nt)||Oe.house_number?.toString().includes(M)||Oe.month?.toLowerCase().includes(nt)}),ut=Oe=>{switch(Oe){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},pe=["January","February","March","April","May","June","July","August","September","October","November","December"],Ge=[...new Set(I.map(Oe=>Oe.billtype))].filter(Oe=>Oe),ze=()=>{G(!1),ue(null)},Pe=Oe=>{a(nt=>nt.map(kt=>kt.id===Oe.id?Oe:kt)),ze(),Se()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:H}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${B?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:M,onChange:Oe=>D(Oe.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.billtype,onChange:Oe=>we(Oe.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),Ge.map(Oe=>e.jsx("option",{value:Oe,children:Oe},Oe))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:f.apartment_id,onChange:Oe=>Ve(Oe.target.value),disabled:z,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),b.map(Oe=>e.jsx("option",{value:Oe.id,children:Oe.name},Oe.id))]}),z&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.floor_id,onChange:Oe=>Le(Oe.target.value),disabled:!f.apartment_id||P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),w.map(Oe=>e.jsxs("option",{value:Oe.id,children:["Floor ",Oe.floor_id]},Oe.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.house_id,onChange:Oe=>ot(Oe.target.value),disabled:!f.floor_id||Z,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),E.map(Oe=>e.jsxs("option",{value:Oe.id,children:["House ",Oe.house_id]},Oe.id))]}),Z&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:f.payment_status,onChange:Oe=>Ne("payment_status",Oe.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.month,onChange:Oe=>Ne("month",Oe.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),pe.map(Oe=>e.jsx("option",{value:Oe,children:Oe},Oe))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:f.year,onChange:Oe=>Ne("year",Oe.target.value),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:Qe,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",_e.length," of ",t.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ld,{size:16}),e.jsxs("span",{children:[_e.length," payments found"]})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or enter House ID to load bills"}),e.jsxs("div",{className:"flex gap-2 max-w-md",children:[e.jsx("input",{type:"text",value:T,onChange:Oe=>A(Oe.target.value),placeholder:"Enter internal House ID (e.g. house-abc123)",className:"flex-1 px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:J,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Lookup"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Lookup bills by internal House PK across the selected filters."})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):_e.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Zs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:_e.map(Oe=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[Oe.bill_name," (",Oe.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Ii,{size:12,className:"inline mr-1"}),Oe.apartment_name,e.jsx(qr,{size:12,className:"inline mx-1"}),"Floor ",Oe.floor_id," - House ",Oe.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[Oe.month," ",Oe.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",Oe.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",Oe.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",Oe.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${ut(Oe.payment_status)}`,children:Oe.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:Oe.paid_at?new Date(Oe.paid_at).toLocaleDateString():new Date(Oe.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex space-x-1",children:e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>Ie(Oe),disabled:q===Oe.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:q===Oe.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Er,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})})})]},Oe.id))})]})})})]})})]}),de&&e.jsx(iw,{payment:Y,onClose:ze,onUpdate:Pe}),Ce&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Er,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[oe.bill_name," (",oe.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[oe.apartment_name," - House ",oe.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",oe.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${oe.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:oe.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{le(!1),re(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:q===oe.id,children:"Cancel"}),e.jsx("button",{onClick:ke,disabled:q===oe.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:q===oe.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}var Ct;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ct||(Ct={}));var Ib=new Map([[Ct.QR_CODE,"QR_CODE"],[Ct.AZTEC,"AZTEC"],[Ct.CODABAR,"CODABAR"],[Ct.CODE_39,"CODE_39"],[Ct.CODE_93,"CODE_93"],[Ct.CODE_128,"CODE_128"],[Ct.DATA_MATRIX,"DATA_MATRIX"],[Ct.MAXICODE,"MAXICODE"],[Ct.ITF,"ITF"],[Ct.EAN_13,"EAN_13"],[Ct.EAN_8,"EAN_8"],[Ct.PDF_417,"PDF_417"],[Ct.RSS_14,"RSS_14"],[Ct.RSS_EXPANDED,"RSS_EXPANDED"],[Ct.UPC_A,"UPC_A"],[Ct.UPC_E,"UPC_E"],[Ct.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Fb;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Fb||(Fb={}));function D_(t){return Object.values(Ct).includes(t)}var $u;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})($u||($u={}));var R_=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[$u.SCAN_TYPE_CAMERA,$u.SCAN_TYPE_FILE],t}(),lw=function(){function t(a,r){this.format=a,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(a){if(!Ib.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new t(a,Ib.get(a))},t}(),Mb=function(){function t(){}return t.createFromText=function(a){var r={text:a};return{decodedText:a,result:r}},t.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},t}(),Rm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Rm||(Rm={}));var O_=function(){function t(){}return t.createFrom=function(a){return{errorMessage:a,type:Rm.UNKWOWN_ERROR}},t}(),I_=function(){function t(a){this.verbose=a}return t.prototype.log=function(a){this.verbose&&console.log(a)},t.prototype.warn=function(a){this.verbose&&console.warn(a)},t.prototype.logError=function(a,r){(this.verbose||r===!0)&&console.error(a)},t.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},t}();function Ai(t){return typeof t>"u"||t===null}var fc=function(){function t(){}return t.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},t.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),ow=function(){function t(){}return t.isMediaStreamConstraintsValid=function(a,r){if(typeof a!="object"){var i=typeof a;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(l),f=Object.keys(a),h=0,b=f;h<b.length;h++){var p=b[h];if(d.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),k0={exports:{}},F_=k0.exports,Bb;function M_(){return Bb||(Bb=1,function(t,a){(function(r,i){i(a)})(F_,function(r){function i(ee){return ee==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,n){ee.__proto__=n}||function(ee,n){for(var c in n)n.hasOwnProperty(c)&&(ee[c]=n[c])};function d(ee,n){l(ee,n);function c(){this.constructor=ee}ee.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)}function f(ee,n){var c=Object.setPrototypeOf;c?c(ee,n):ee.__proto__=n}function h(ee,n){n===void 0&&(n=ee.constructor);var c=Error.captureStackTrace;c&&c(ee,n)}var b=function(ee){d(n,ee);function n(c){var u=this.constructor,m=ee.call(this,c)||this;return Object.defineProperty(m,"name",{value:u.name,enumerable:!1}),f(m,u.prototype),h(m),m}return n}(Error);class p extends b{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}p.kind="Exception";class w extends p{}w.kind="ArgumentException";class j extends p{}j.kind="IllegalArgumentException";class E{constructor(n){if(this.binarizer=n,n===null)throw new j("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,c){return this.binarizer.getBlackRow(n,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,c,u,m){const g=this.binarizer.getLuminanceSource().crop(n,c,u,m);return new E(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class _ extends p{static getChecksumInstance(){return new _}}_.kind="ChecksumException";class T{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(n,c,u,m,g){for(;g--;)u[m++]=n[c++]}static currentTimeMillis(){return Date.now()}}class I extends p{}I.kind="IndexOutOfBoundsException";class O extends I{constructor(n=void 0,c=void 0){super(c),this.index=n,this.message=c}}O.kind="ArrayIndexOutOfBoundsException";class M{static fill(n,c){for(let u=0,m=n.length;u<m;u++)n[u]=c}static fillWithin(n,c,u,m){M.rangeCheck(n.length,c,u);for(let g=c;g<u;g++)n[g]=m}static rangeCheck(n,c,u){if(c>u)throw new j("fromIndex("+c+") > toIndex("+u+")");if(c<0)throw new O(c);if(u>n)throw new O(u)}static asList(...n){return n}static create(n,c,u){return Array.from({length:n}).map(g=>Array.from({length:c}).fill(u))}static createInt32Array(n,c,u){return Array.from({length:n}).map(g=>Int32Array.from({length:c}).fill(u))}static equals(n,c){if(!n||!c||!n.length||!c.length||n.length!==c.length)return!1;for(let u=0,m=n.length;u<m;u++)if(n[u]!==c[u])return!1;return!0}static hashCode(n){if(n===null)return 0;let c=1;for(const u of n)c=31*c+u;return c}static fillUint8Array(n,c){for(let u=0;u!==n.length;u++)n[u]=c}static copyOf(n,c){return n.slice(0,c)}static copyOfUint8Array(n,c){if(n.length<=c){const u=new Uint8Array(c);return u.set(n),u}return n.slice(0,c)}static copyOfRange(n,c,u){const m=u-c,g=new Int32Array(m);return A.arraycopy(n,c,g,0,m),g}static binarySearch(n,c,u){u===void 0&&(u=M.numberComparator);let m=0,g=n.length-1;for(;m<=g;){const v=g+m>>1,N=u(c,n[v]);if(N>0)m=v+1;else if(N<0)g=v-1;else return v}return-m-1}static numberComparator(n,c){return n-c}}class D{static numberOfTrailingZeros(n){let c;if(n===0)return 32;let u=31;return c=n<<16,c!==0&&(u-=16,n=c),c=n<<8,c!==0&&(u-=8,n=c),c=n<<4,c!==0&&(u-=4,n=c),c=n<<2,c!==0&&(u-=2,n=c),u-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let c=1;return n>>>16||(c+=16,n<<=16),n>>>24||(c+=8,n<<=8),n>>>28||(c+=4,n<<=4),n>>>30||(c+=2,n<<=2),c-=n>>>31,c}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,c){return Math.trunc(n/c)}static parseInt(n,c=void 0){return parseInt(n,c)}}D.MIN_VALUE_32_BITS=-2147483648,D.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(n,c){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,c==null?this.bits=B.makeArray(n):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const c=B.makeArray(n);A.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const c=this.size;if(n>=c)return c;const u=this.bits;let m=Math.floor(n/32),g=u[m];g&=~((1<<(n&31))-1);const v=u.length;for(;g===0;){if(++m===v)return c;g=u[m]}const N=m*32+D.numberOfTrailingZeros(g);return N>c?c:N}getNextUnset(n){const c=this.size;if(n>=c)return c;const u=this.bits;let m=Math.floor(n/32),g=~u[m];g&=~((1<<(n&31))-1);const v=u.length;for(;g===0;){if(++m===v)return c;g=~u[m]}const N=m*32+D.numberOfTrailingZeros(g);return N>c?c:N}setBulk(n,c){this.bits[Math.floor(n/32)]=c}setRange(n,c){if(c<n||n<0||c>this.size)throw new j;if(c===n)return;c--;const u=Math.floor(n/32),m=Math.floor(c/32),g=this.bits;for(let v=u;v<=m;v++){const N=v>u?0:n&31,F=(2<<(v<m?31:c&31))-(1<<N);g[v]|=F}}clear(){const n=this.bits.length,c=this.bits;for(let u=0;u<n;u++)c[u]=0}isRange(n,c,u){if(c<n||n<0||c>this.size)throw new j;if(c===n)return!0;c--;const m=Math.floor(n/32),g=Math.floor(c/32),v=this.bits;for(let N=m;N<=g;N++){const S=N>m?0:n&31,V=(2<<(N<g?31:c&31))-(1<<S)&4294967295;if((v[N]&V)!==(u?V:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,c){if(c<0||c>32)throw new j("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let u=c;u>0;u--)this.appendBit((n>>u-1&1)===1)}appendBitArray(n){const c=n.size;this.ensureCapacity(this.size+c);for(let u=0;u<c;u++)this.appendBit(n.get(u))}xor(n){if(this.size!==n.size)throw new j("Sizes don't match");const c=this.bits;for(let u=0,m=c.length;u<m;u++)c[u]^=n.bits[u]}toBytes(n,c,u,m){for(let g=0;g<m;g++){let v=0;for(let N=0;N<8;N++)this.get(n)&&(v|=1<<7-N),n++;c[u+g]=v}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),u=c+1,m=this.bits;for(let g=0;g<u;g++){let v=m[g];v=v>>1&1431655765|(v&1431655765)<<1,v=v>>2&858993459|(v&858993459)<<2,v=v>>4&252645135|(v&252645135)<<4,v=v>>8&16711935|(v&16711935)<<8,v=v>>16&65535|(v&65535)<<16,n[c-g]=v}if(this.size!==u*32){const g=u*32-this.size;let v=n[0]>>>g;for(let N=1;N<u;N++){const S=n[N];v|=S<<32-g,n[N-1]=v,v=S>>>g}n[u-1]=v}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof B))return!1;const c=n;return this.size===c.size&&M.equals(this.bits,c.bits)}hashCode(){return 31*this.size+M.hashCode(this.bits)}toString(){let n="";for(let c=0,u=this.size;c<u;c++)(c&7)===0&&(n+=" "),n+=this.get(c)?"X":".";return n}clone(){return new B(this.size,this.bits.slice())}}var H;(function(ee){ee[ee.OTHER=0]="OTHER",ee[ee.PURE_BARCODE=1]="PURE_BARCODE",ee[ee.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",ee[ee.TRY_HARDER=3]="TRY_HARDER",ee[ee.CHARACTER_SET=4]="CHARACTER_SET",ee[ee.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",ee[ee.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",ee[ee.ASSUME_GS1=7]="ASSUME_GS1",ee[ee.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",ee[ee.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",ee[ee.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var z=H;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var P;(function(ee){ee[ee.Cp437=0]="Cp437",ee[ee.ISO8859_1=1]="ISO8859_1",ee[ee.ISO8859_2=2]="ISO8859_2",ee[ee.ISO8859_3=3]="ISO8859_3",ee[ee.ISO8859_4=4]="ISO8859_4",ee[ee.ISO8859_5=5]="ISO8859_5",ee[ee.ISO8859_6=6]="ISO8859_6",ee[ee.ISO8859_7=7]="ISO8859_7",ee[ee.ISO8859_8=8]="ISO8859_8",ee[ee.ISO8859_9=9]="ISO8859_9",ee[ee.ISO8859_10=10]="ISO8859_10",ee[ee.ISO8859_11=11]="ISO8859_11",ee[ee.ISO8859_13=12]="ISO8859_13",ee[ee.ISO8859_14=13]="ISO8859_14",ee[ee.ISO8859_15=14]="ISO8859_15",ee[ee.ISO8859_16=15]="ISO8859_16",ee[ee.SJIS=16]="SJIS",ee[ee.Cp1250=17]="Cp1250",ee[ee.Cp1251=18]="Cp1251",ee[ee.Cp1252=19]="Cp1252",ee[ee.Cp1256=20]="Cp1256",ee[ee.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",ee[ee.UTF8=22]="UTF8",ee[ee.ASCII=23]="ASCII",ee[ee.Big5=24]="Big5",ee[ee.GB18030=25]="GB18030",ee[ee.EUC_KR=26]="EUC_KR"})(P||(P={}));class U{constructor(n,c,u,...m){this.valueIdentifier=n,this.name=u,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=m,U.VALUE_IDENTIFIER_TO_ECI.set(n,this),U.NAME_TO_ECI.set(u,this);const g=this.values;for(let v=0,N=g.length;v!==N;v++){const S=g[v];U.VALUES_TO_ECI.set(S,this)}for(const v of m)U.NAME_TO_ECI.set(v,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new L("incorect value");const c=U.VALUES_TO_ECI.get(n);if(c===void 0)throw new L("incorect value");return c}static getCharacterSetECIByName(n){const c=U.NAME_TO_ECI.get(n);if(c===void 0)throw new L("incorect value");return c}equals(n){if(!(n instanceof U))return!1;const c=n;return this.getName()===c.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(P.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(P.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(P.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(P.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(P.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(P.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(P.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(P.Big5,28,"Big5"),U.GB18030=new U(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(P.EUC_KR,30,"EUC_KR","EUC-KR");class Z extends p{}Z.kind="UnsupportedOperationException";class ae{static decode(n,c){const u=this.encodingName(c);return this.customDecoder?this.customDecoder(n,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(n,u):new TextDecoder(u).decode(n)}static shouldDecodeOnFallback(n){return!ae.isBrowser()&&n==="ISO-8859-1"}static encode(n,c){const u=this.encodingName(c);return this.customEncoder?this.customEncoder(n,u):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof U?n:U.getCharacterSetECIByName(n)}static decodeFallback(n,c){const u=this.encodingCharacterSet(c);if(ae.isDecodeFallbackSupported(u)){let m="";for(let g=0,v=n.length;g<v;g++){let N=n[g].toString(16);N.length<2&&(N="0"+N),m+="%"+N}return decodeURIComponent(m)}if(u.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new Z(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(U.UTF8)||n.equals(U.ISO8859_1)||n.equals(U.ASCII)}static encodeFallback(n){const u=btoa(unescape(encodeURIComponent(n))).split(""),m=[];for(let g=0;g<u.length;g++)m.push(u[g].charCodeAt(0));return new Uint8Array(m)}}class Y{static castAsNonUtf8Char(n,c=null){const u=c?c.getName():this.ISO88591;return ae.decode(new Uint8Array([n]),u)}static guessEncoding(n,c){if(c!=null&&c.get(z.CHARACTER_SET)!==void 0)return c.get(z.CHARACTER_SET).toString();const u=n.length;let m=!0,g=!0,v=!0,N=0,S=0,F=0,V=0,te=0,fe=0,je=0,De=0,Re=0,Xe=0,et=0;const gt=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let vt=0;vt<u&&(m||g||v);vt++){const ht=n[vt]&255;v&&(N>0?(ht&128)===0?v=!1:N--:(ht&128)!==0&&((ht&64)===0?v=!1:(N++,(ht&32)===0?S++:(N++,(ht&16)===0?F++:(N++,(ht&8)===0?V++:v=!1))))),m&&(ht>127&&ht<160?m=!1:ht>159&&(ht<192||ht===215||ht===247)&&et++),g&&(te>0?ht<64||ht===127||ht>252?g=!1:te--:ht===128||ht===160||ht>239?g=!1:ht>160&&ht<224?(fe++,De=0,je++,je>Re&&(Re=je)):ht>127?(te++,je=0,De++,De>Xe&&(Xe=De)):(je=0,De=0))}return v&&N>0&&(v=!1),g&&te>0&&(g=!1),v&&(gt||S+F+V>0)?Y.UTF8:g&&(Y.ASSUME_SHIFT_JIS||Re>=3||Xe>=3)?Y.SHIFT_JIS:m&&g?Re===2&&fe===2||et*10>=u?Y.SHIFT_JIS:Y.ISO88591:m?Y.ISO88591:g?Y.SHIFT_JIS:v?Y.UTF8:Y.PLATFORM_DEFAULT_ENCODING}static format(n,...c){let u=-1;function m(v,N,S,F,V,te){if(v==="%%")return"%";if(c[++u]===void 0)return;v=F?parseInt(F.substr(1)):void 0;let fe=V?parseInt(V.substr(1)):void 0,je;switch(te){case"s":je=c[u];break;case"c":je=c[u][0];break;case"f":je=parseFloat(c[u]).toFixed(v);break;case"p":je=parseFloat(c[u]).toPrecision(v);break;case"e":je=parseFloat(c[u]).toExponential(v);break;case"x":je=parseInt(c[u]).toString(fe||16);break;case"d":je=parseFloat(parseInt(c[u],fe||10).toPrecision(v)).toFixed(0);break}je=typeof je=="object"?JSON.stringify(je):(+je).toString(fe);let De=parseInt(S),Re=S&&S[0]+""=="0"?"0":" ";for(;je.length<De;)je=N!==void 0?je+Re:Re+je;return je}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(g,m)}static getBytes(n,c){return ae.encode(n,c)}static getCharCode(n,c=0){return n.charCodeAt(c)}static getCharAt(n){return String.fromCharCode(n)}}Y.SHIFT_JIS=U.SJIS.getName(),Y.GB2312="GB2312",Y.ISO88591=U.ISO8859_1.getName(),Y.EUC_JP="EUC_JP",Y.UTF8=U.UTF8.getName(),Y.PLATFORM_DEFAULT_ENCODING=Y.UTF8,Y.ASSUME_SHIFT_JIS=!1;class ue{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=Y.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,c,u){for(let m=c;c<c+u;m++)this.append(n[m]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,c){this.value=this.value.substr(0,n)+c+this.value.substr(n+1)}substring(n,c){return this.value.substring(n,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,c){this.value=this.value.substr(0,n)+c+this.value.substr(n+c.length)}}class de{constructor(n,c,u,m){if(this.width=n,this.height=c,this.rowSize=u,this.bits=m,c==null&&(c=n),this.height=c,n<1||c<1)throw new j("Both dimensions must be greater than 0");u==null&&(u=Math.floor((n+31)/32)),this.rowSize=u,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const c=n.length,u=n[0].length,m=new de(u,c);for(let g=0;g<c;g++){const v=n[g];for(let N=0;N<u;N++)v[N]&&m.set(N,g)}return m}static parseFromString(n,c,u){if(n===null)throw new j("stringRepresentation cannot be null");const m=new Array(n.length);let g=0,v=0,N=-1,S=0,F=0;for(;F<n.length;)if(n.charAt(F)===`
`||n.charAt(F)==="\r"){if(g>v){if(N===-1)N=g-v;else if(g-v!==N)throw new j("row lengths do not match");v=g,S++}F++}else if(n.substring(F,F+c.length)===c)F+=c.length,m[g]=!0,g++;else if(n.substring(F,F+u.length)===u)F+=u.length,m[g]=!1,g++;else throw new j("illegal character encountered: "+n.substring(F));if(g>v){if(N===-1)N=g-v;else if(g-v!==N)throw new j("row lengths do not match");S++}const V=new de(N,S);for(let te=0;te<g;te++)m[te]&&V.set(Math.floor(te%N),Math.floor(te/N));return V}get(n,c){const u=c*this.rowSize+Math.floor(n/32);return(this.bits[u]>>>(n&31)&1)!==0}set(n,c){const u=c*this.rowSize+Math.floor(n/32);this.bits[u]|=1<<(n&31)&4294967295}unset(n,c){const u=c*this.rowSize+Math.floor(n/32);this.bits[u]&=~(1<<(n&31)&4294967295)}flip(n,c){const u=c*this.rowSize+Math.floor(n/32);this.bits[u]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new j("input matrix dimensions do not match");const c=new B(Math.floor(this.width/32)+1),u=this.rowSize,m=this.bits;for(let g=0,v=this.height;g<v;g++){const N=g*u,S=n.getRow(g,c).getBitArray();for(let F=0;F<u;F++)m[N+F]^=S[F]}}clear(){const n=this.bits,c=n.length;for(let u=0;u<c;u++)n[u]=0}setRegion(n,c,u,m){if(c<0||n<0)throw new j("Left and top must be nonnegative");if(m<1||u<1)throw new j("Height and width must be at least 1");const g=n+u,v=c+m;if(v>this.height||g>this.width)throw new j("The region must fit inside the matrix");const N=this.rowSize,S=this.bits;for(let F=c;F<v;F++){const V=F*N;for(let te=n;te<g;te++)S[V+Math.floor(te/32)]|=1<<(te&31)&4294967295}}getRow(n,c){c==null||c.getSize()<this.width?c=new B(this.width):c.clear();const u=this.rowSize,m=this.bits,g=n*u;for(let v=0;v<u;v++)c.setBulk(v*32,m[g+v]);return c}setRow(n,c){A.arraycopy(c.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),c=this.getHeight();let u=new B(n),m=new B(n);for(let g=0,v=Math.floor((c+1)/2);g<v;g++)u=this.getRow(g,u),m=this.getRow(c-1-g,m),u.reverse(),m.reverse(),this.setRow(g,m),this.setRow(c-1-g,u)}getEnclosingRectangle(){const n=this.width,c=this.height,u=this.rowSize,m=this.bits;let g=n,v=c,N=-1,S=-1;for(let F=0;F<c;F++)for(let V=0;V<u;V++){const te=m[F*u+V];if(te!==0){if(F<v&&(v=F),F>S&&(S=F),V*32<g){let fe=0;for(;(te<<31-fe&4294967295)===0;)fe++;V*32+fe<g&&(g=V*32+fe)}if(V*32+31>N){let fe=31;for(;!(te>>>fe);)fe--;V*32+fe>N&&(N=V*32+fe)}}}return N<g||S<v?null:Int32Array.from([g,v,N-g+1,S-v+1])}getTopLeftOnBit(){const n=this.rowSize,c=this.bits;let u=0;for(;u<c.length&&c[u]===0;)u++;if(u===c.length)return null;const m=u/n;let g=u%n*32;const v=c[u];let N=0;for(;(v<<31-N&4294967295)===0;)N++;return g+=N,Int32Array.from([g,m])}getBottomRightOnBit(){const n=this.rowSize,c=this.bits;let u=c.length-1;for(;u>=0&&c[u]===0;)u--;if(u<0)return null;const m=Math.floor(u/n);let g=Math.floor(u%n)*32;const v=c[u];let N=31;for(;!(v>>>N);)N--;return g+=N,Int32Array.from([g,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof de))return!1;const c=n;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&M.equals(this.bits,c.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+M.hashCode(this.bits),n}toString(n="X ",c="  ",u=`
`){return this.buildToString(n,c,u)}buildToString(n,c,u){let m=new ue;for(let g=0,v=this.height;g<v;g++){for(let N=0,S=this.width;N<S;N++)m.append(this.get(N,g)?n:c);m.append(u)}return m.toString()}clone(){return new de(this.width,this.height,this.rowSize,this.bits.slice())}}class G extends p{static getNotFoundInstance(){return new G}}G.kind="NotFoundException";class q extends T{constructor(n){super(n),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(n,c){const u=this.getLuminanceSource(),m=u.getWidth();c==null||c.getSize()<m?c=new B(m):c.clear(),this.initArrays(m);const g=u.getRow(n,this.luminances),v=this.buckets;for(let S=0;S<m;S++)v[(g[S]&255)>>q.LUMINANCE_SHIFT]++;const N=q.estimateBlackPoint(v);if(m<3)for(let S=0;S<m;S++)(g[S]&255)<N&&c.set(S);else{let S=g[0]&255,F=g[1]&255;for(let V=1;V<m-1;V++){const te=g[V+1]&255;(F*4-S-te)/2<N&&c.set(V),S=F,F=te}}return c}getBlackMatrix(){const n=this.getLuminanceSource(),c=n.getWidth(),u=n.getHeight(),m=new de(c,u);this.initArrays(c);const g=this.buckets;for(let S=1;S<5;S++){const F=Math.floor(u*S/5),V=n.getRow(F,this.luminances),te=Math.floor(c*4/5);for(let fe=Math.floor(c/5);fe<te;fe++){const je=V[fe]&255;g[je>>q.LUMINANCE_SHIFT]++}}const v=q.estimateBlackPoint(g),N=n.getMatrix();for(let S=0;S<u;S++){const F=S*c;for(let V=0;V<c;V++)(N[F+V]&255)<v&&m.set(V,S)}return m}createBinarizer(n){return new q(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const c=this.buckets;for(let u=0;u<q.LUMINANCE_BUCKETS;u++)c[u]=0}static estimateBlackPoint(n){const c=n.length;let u=0,m=0,g=0;for(let V=0;V<c;V++)n[V]>g&&(m=V,g=n[V]),n[V]>u&&(u=n[V]);let v=0,N=0;for(let V=0;V<c;V++){const te=V-m,fe=n[V]*te*te;fe>N&&(v=V,N=fe)}if(m>v){const V=m;m=v,v=V}if(v-m<=c/16)throw new G;let S=v-1,F=-1;for(let V=v-1;V>m;V--){const te=V-m,fe=te*te*(v-V)*(u-n[V]);fe>F&&(S=V,F=fe)}return S<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class xe extends q{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),c=n.getWidth(),u=n.getHeight();if(c>=xe.MINIMUM_DIMENSION&&u>=xe.MINIMUM_DIMENSION){const m=n.getMatrix();let g=c>>xe.BLOCK_SIZE_POWER;(c&xe.BLOCK_SIZE_MASK)!==0&&g++;let v=u>>xe.BLOCK_SIZE_POWER;(u&xe.BLOCK_SIZE_MASK)!==0&&v++;const N=xe.calculateBlackPoints(m,g,v,c,u),S=new de(c,u);xe.calculateThresholdForBlock(m,g,v,c,u,N,S),this.matrix=S}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new xe(n)}static calculateThresholdForBlock(n,c,u,m,g,v,N){const S=g-xe.BLOCK_SIZE,F=m-xe.BLOCK_SIZE;for(let V=0;V<u;V++){let te=V<<xe.BLOCK_SIZE_POWER;te>S&&(te=S);const fe=xe.cap(V,2,u-3);for(let je=0;je<c;je++){let De=je<<xe.BLOCK_SIZE_POWER;De>F&&(De=F);const Re=xe.cap(je,2,c-3);let Xe=0;for(let gt=-2;gt<=2;gt++){const vt=v[fe+gt];Xe+=vt[Re-2]+vt[Re-1]+vt[Re]+vt[Re+1]+vt[Re+2]}const et=Xe/25;xe.thresholdBlock(n,De,te,et,m,N)}}}static cap(n,c,u){return n<c?c:n>u?u:n}static thresholdBlock(n,c,u,m,g,v){for(let N=0,S=u*g+c;N<xe.BLOCK_SIZE;N++,S+=g)for(let F=0;F<xe.BLOCK_SIZE;F++)(n[S+F]&255)<=m&&v.set(c+F,u+N)}static calculateBlackPoints(n,c,u,m,g){const v=g-xe.BLOCK_SIZE,N=m-xe.BLOCK_SIZE,S=new Array(u);for(let F=0;F<u;F++){S[F]=new Int32Array(c);let V=F<<xe.BLOCK_SIZE_POWER;V>v&&(V=v);for(let te=0;te<c;te++){let fe=te<<xe.BLOCK_SIZE_POWER;fe>N&&(fe=N);let je=0,De=255,Re=0;for(let et=0,gt=V*m+fe;et<xe.BLOCK_SIZE;et++,gt+=m){for(let vt=0;vt<xe.BLOCK_SIZE;vt++){const ht=n[gt+vt]&255;je+=ht,ht<De&&(De=ht),ht>Re&&(Re=ht)}if(Re-De>xe.MIN_DYNAMIC_RANGE)for(et++,gt+=m;et<xe.BLOCK_SIZE;et++,gt+=m)for(let vt=0;vt<xe.BLOCK_SIZE;vt++)je+=n[gt+vt]&255}let Xe=je>>xe.BLOCK_SIZE_POWER*2;if(Re-De<=xe.MIN_DYNAMIC_RANGE&&(Xe=De/2,F>0&&te>0)){const et=(S[F-1][te]+2*S[F][te-1]+S[F-1][te-1])/4;De<et&&(Xe=et)}S[F][te]=Xe}}return S}}xe.BLOCK_SIZE_POWER=3,xe.BLOCK_SIZE=1<<xe.BLOCK_SIZE_POWER,xe.BLOCK_SIZE_MASK=xe.BLOCK_SIZE-1,xe.MINIMUM_DIMENSION=xe.BLOCK_SIZE*5,xe.MIN_DYNAMIC_RANGE=24;class Ce{constructor(n,c){this.width=n,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,c,u,m){throw new Z("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Z("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Z("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let c=new ue;for(let u=0;u<this.height;u++){const m=this.getRow(u,n);for(let g=0;g<this.width;g++){const v=m[g]&255;let N;v<64?N="#":v<128?N="+":v<192?N=".":N=" ",c.append(N)}c.append(`
`)}return c.toString()}}class le extends Ce{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,c){const u=this.delegate.getRow(n,c),m=this.getWidth();for(let g=0;g<m;g++)u[g]=255-(u[g]&255);return u}getMatrix(){const n=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(c);for(let m=0;m<c;m++)u[m]=255-(n[m]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(n,c,u,m){return new le(this.delegate.crop(n,c,u,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new le(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new le(this.delegate.rotateCounterClockwise45())}}class oe extends Ce{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=oe.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const c=n.getContext("2d").getImageData(0,0,n.width,n.height);return oe.toGrayscaleBuffer(c.data,n.width,n.height)}static toGrayscaleBuffer(n,c,u){const m=new Uint8ClampedArray(c*u);for(let g=0,v=0,N=n.length;g<N;g+=4,v++){let S;if(n[g+3]===0)S=255;else{const V=n[g],te=n[g+1],fe=n[g+2];S=306*V+601*te+117*fe+512>>10}m[v]=S}return m}getRow(n,c){if(n<0||n>=this.getHeight())throw new j("Requested row is outside the image: "+n);const u=this.getWidth(),m=n*u;return c===null?c=this.buffer.slice(m,m+u):(c.length<u&&(c=new Uint8ClampedArray(u)),c.set(this.buffer.slice(m,m+u))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,c,u,m){return super.crop(n,c,u,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const c=this.getTempCanvasElement(),u=c.getContext("2d"),m=n*oe.DEGREE_TO_RADIANS,g=this.canvas.width,v=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(m))*g+Math.abs(Math.sin(m))*v),S=Math.ceil(Math.abs(Math.sin(m))*g+Math.abs(Math.cos(m))*v);return c.width=N,c.height=S,u.translate(N/2,S/2),u.rotate(m),u.drawImage(this.canvas,g/-2,v/-2),this.buffer=oe.makeBufferFromCanvasImageData(c),this}invert(){return new le(this)}}oe.DEGREE_TO_RADIANS=Math.PI/180;class re{constructor(n,c,u){this.deviceId=n,this.label=c,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Q=(globalThis||Nu||self||window||void 0)&&(globalThis||Nu||self||window||void 0).__awaiter||function(ee,n,c,u){function m(g){return g instanceof c?g:new c(function(v){v(g)})}return new(c||(c=Promise))(function(g,v){function N(V){try{F(u.next(V))}catch(te){v(te)}}function S(V){try{F(u.throw(V))}catch(te){v(te)}}function F(V){V.done?g(V.value):m(V.value).then(N,S)}F((u=u.apply(ee,n||[])).next())})};class X{constructor(n,c=500,u){this.reader=n,this.timeBetweenScansMillis=c,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return Q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const u of n){const m=u.kind==="video"?"videoinput":u.kind;if(m!=="videoinput")continue;const g=u.deviceId||u.id,v=u.label||`Video device ${c.length+1}`,N=u.groupId,S={deviceId:g,label:v,kind:m,groupId:N};c.push(S)}return c})}getVideoInputDevices(){return Q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new re(c.deviceId,c.label))})}findDeviceById(n){return Q(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(u=>u.deviceId===n):null})}decodeFromInputVideoDevice(n,c){return Q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,c)})}decodeOnceFromVideoDevice(n,c){return Q(this,void 0,void 0,function*(){this.reset();let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const m={video:u};return yield this.decodeOnceFromConstraints(m,c)})}decodeOnceFromConstraints(n,c){return Q(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(u,c)})}decodeOnceFromStream(n,c){return Q(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,c);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(n,c,u){return Q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,c,u)})}decodeFromVideoDevice(n,c,u){return Q(this,void 0,void 0,function*(){let m;n?m={deviceId:{exact:n}}:m={facingMode:"environment"};const g={video:m};return yield this.decodeFromConstraints(g,c,u)})}decodeFromConstraints(n,c,u){return Q(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(m,c,u)})}decodeFromStream(n,c,u){return Q(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(n,c);return yield this.decodeContinuously(m,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,c){return Q(this,void 0,void 0,function*(){const u=this.prepareVideoElement(c);return this.addVideoSource(u,n),this.videoElement=u,this.stream=n,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(n){return new Promise((c,u)=>this.playVideoOnLoad(n,()=>c()))}playVideoOnLoad(n,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",c),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return Q(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,c){const u=document.getElementById(n);if(!u)throw new w(`element with id '${n}' not found`);if(u.nodeName.toLowerCase()!==c.toLowerCase())throw new w(`element with id '${n}' must be an ${c} element`);return u}decodeFromImage(n,c){if(!n&&!c)throw new w("either imageElement with a src set or an url must be provided");return c&&!n?this.decodeFromImageUrl(c):this.decodeFromImageElement(n)}decodeFromVideo(n,c){if(!n&&!c)throw new w("Either an element with a src set or an URL must be provided");return c&&!n?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,c,u){if(n===void 0&&c===void 0)throw new w("Either an element with a src set or an URL must be provided");return c&&!n?this.decodeFromVideoUrlContinuously(c,u):this.decodeFromVideoElementContinuously(n,u)}decodeFromImageElement(n){if(!n)throw new w("An image element must be provided.");this.reset();const c=this.prepareImageElement(n);this.imageElement=c;let u;return this.isImageLoaded(c)?u=this.decodeOnce(c,!1,!0):u=this._decodeOnLoadImage(c),u}decodeFromVideoElement(n){const c=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(n,c){const u=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(u,c)}_decodeFromVideoElementSetup(n){if(!n)throw new w("A video element must be provided.");this.reset();const c=this.prepareVideoElement(n);return this.videoElement=c,c}decodeFromImageUrl(n){if(!n)throw new w("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const u=this._decodeOnLoadImage(c);return c.src=n,u}decodeFromVideoUrl(n){if(!n)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),u=this.decodeFromVideoElement(c);return c.src=n,u}decodeFromVideoUrlContinuously(n,c){if(!n)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(u,c);return u.src=n,m}_decodeOnLoadImage(n){return new Promise((c,u)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(c,u),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return Q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,c){return Q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,c)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let c;return typeof n>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof n=="string"&&(c=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(c=n),c}prepareVideoElement(n){let c;return!n&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof n=="string"&&(c=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(c=n),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(n,c=!0,u=!0){this._stopAsyncDecode=!1;const m=(g,v)=>{if(this._stopAsyncDecode){v(new G("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(n);g(N)}catch(N){const S=c&&N instanceof G,V=(N instanceof _||N instanceof L)&&u;if(S||V)return setTimeout(m,this._timeBetweenDecodingAttempts,g,v);v(N)}};return new Promise((g,v)=>m(g,v))}decodeContinuously(n,c){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(n);c(m,null),setTimeout(u,this.timeBetweenScansMillis)}catch(m){c(null,m);const g=m instanceof _||m instanceof L,v=m instanceof G;(g||v)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(n){const c=this.createBinaryBitmap(n);return this.decodeBitmap(c)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,c,u){c||(c={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(n,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(n,c,u=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(n,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const c=this.getCaptureCanvas(n),u=new oe(c),m=new xe(u);return new E(m)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const c=this.createCaptureCanvas(n);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let u,m;return typeof n<"u"&&(n instanceof HTMLVideoElement?(u=n.videoWidth,m=n.videoHeight):n instanceof HTMLImageElement&&(u=n.naturalWidth||n.width,m=n.naturalHeight||n.height)),c.style.width=u+"px",c.style.height=m+"px",c.width=u,c.height=m,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,c){try{n.srcObject=c}catch{n.src=URL.createObjectURL(c)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class se{constructor(n,c,u=c==null?0:8*c.length,m,g,v=A.currentTimeMillis()){this.text=n,this.rawBytes=c,this.numBits=u,this.resultPoints=m,this.format=g,this.timestamp=v,this.text=n,this.rawBytes=c,u==null?this.numBits=c==null?0:8*c.length:this.numBits=u,this.resultPoints=m,this.format=g,this.resultMetadata=null,v==null?this.timestamp=A.currentTimeMillis():this.timestamp=v}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,c)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const c=this.resultPoints;if(c===null)this.resultPoints=n;else if(n!==null&&n.length>0){const u=new Array(c.length+n.length);A.arraycopy(c,0,u,0,c.length),A.arraycopy(n,0,u,c.length,n.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ne;(function(ee){ee[ee.AZTEC=0]="AZTEC",ee[ee.CODABAR=1]="CODABAR",ee[ee.CODE_39=2]="CODE_39",ee[ee.CODE_93=3]="CODE_93",ee[ee.CODE_128=4]="CODE_128",ee[ee.DATA_MATRIX=5]="DATA_MATRIX",ee[ee.EAN_8=6]="EAN_8",ee[ee.EAN_13=7]="EAN_13",ee[ee.ITF=8]="ITF",ee[ee.MAXICODE=9]="MAXICODE",ee[ee.PDF_417=10]="PDF_417",ee[ee.QR_CODE=11]="QR_CODE",ee[ee.RSS_14=12]="RSS_14",ee[ee.RSS_EXPANDED=13]="RSS_EXPANDED",ee[ee.UPC_A=14]="UPC_A",ee[ee.UPC_E=15]="UPC_E",ee[ee.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ne||(ne={}));var K=ne,Se;(function(ee){ee[ee.OTHER=0]="OTHER",ee[ee.ORIENTATION=1]="ORIENTATION",ee[ee.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",ee[ee.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",ee[ee.ISSUE_NUMBER=4]="ISSUE_NUMBER",ee[ee.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",ee[ee.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",ee[ee.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",ee[ee.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",ee[ee.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",ee[ee.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Se||(Se={}));var we=Se;class Ve{constructor(n,c,u,m,g=-1,v=-1){this.rawBytes=n,this.text=c,this.byteSegments=u,this.ecLevel=m,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=v,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Le{exp(n){return this.expTable[n]}log(n){if(n===0)throw new j;return this.logTable[n]}static addOrSubtract(n,c){return n^c}}class ot{constructor(n,c){if(c.length===0)throw new j;this.field=n;const u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const c=this.coefficients;let u;if(n===1){u=0;for(let v=0,N=c.length;v!==N;v++){const S=c[v];u=Le.addOrSubtract(u,S)}return u}u=c[0];const m=c.length,g=this.field;for(let v=1;v<m;v++)u=Le.addOrSubtract(g.multiply(n,u),c[v]);return u}addOrSubtract(n){if(!this.field.equals(n.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let c=this.coefficients,u=n.coefficients;if(c.length>u.length){const v=c;c=u,u=v}let m=new Int32Array(u.length);const g=u.length-c.length;A.arraycopy(u,0,m,0,g);for(let v=g;v<u.length;v++)m[v]=Le.addOrSubtract(c[v-g],u[v]);return new ot(this.field,m)}multiply(n){if(!this.field.equals(n.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const c=this.coefficients,u=c.length,m=n.coefficients,g=m.length,v=new Int32Array(u+g-1),N=this.field;for(let S=0;S<u;S++){const F=c[S];for(let V=0;V<g;V++)v[S+V]=Le.addOrSubtract(v[S+V],N.multiply(F,m[V]))}return new ot(N,v)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const c=this.coefficients.length,u=this.field,m=new Int32Array(c),g=this.coefficients;for(let v=0;v<c;v++)m[v]=u.multiply(g[v],n);return new ot(u,m)}multiplyByMonomial(n,c){if(n<0)throw new j;if(c===0)return this.field.getZero();const u=this.coefficients,m=u.length,g=new Int32Array(m+n),v=this.field;for(let N=0;N<m;N++)g[N]=v.multiply(u[N],c);return new ot(v,g)}divide(n){if(!this.field.equals(n.field))throw new j("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new j("Divide by 0");const c=this.field;let u=c.getZero(),m=this;const g=n.getCoefficient(n.getDegree()),v=c.inverse(g);for(;m.getDegree()>=n.getDegree()&&!m.isZero();){const N=m.getDegree()-n.getDegree(),S=c.multiply(m.getCoefficient(m.getDegree()),v),F=n.multiplyByMonomial(N,S),V=c.buildMonomial(N,S);u=u.addOrSubtract(V),m=m.addOrSubtract(F)}return[u,m]}toString(){let n="";for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);if(u!==0){if(u<0?(n+=" - ",u=-u):n.length>0&&(n+=" + "),c===0||u!==1){const m=this.field.log(u);m===0?n+="1":m===1?n+="a":(n+="a^",n+=m)}c!==0&&(c===1?n+="x":(n+="x^",n+=c))}}return n}}class J extends p{}J.kind="ArithmeticException";class Ne extends Le{constructor(n,c,u){super(),this.primitive=n,this.size=c,this.generatorBase=u;const m=new Int32Array(c);let g=1;for(let N=0;N<c;N++)m[N]=g,g*=2,g>=c&&(g^=n,g&=c-1);this.expTable=m;const v=new Int32Array(c);for(let N=0;N<c-1;N++)v[m[N]]=N;this.logTable=v,this.zero=new ot(this,Int32Array.from([0])),this.one=new ot(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,c){if(n<0)throw new j;if(c===0)return this.zero;const u=new Int32Array(n+1);return u[0]=c,new ot(this,u)}inverse(n){if(n===0)throw new J;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,c){return n===0||c===0?0:this.expTable[(this.logTable[n]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+D.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Ne.AZTEC_DATA_12=new Ne(4201,4096,1),Ne.AZTEC_DATA_10=new Ne(1033,1024,1),Ne.AZTEC_DATA_6=new Ne(67,64,1),Ne.AZTEC_PARAM=new Ne(19,16,1),Ne.QR_CODE_FIELD_256=new Ne(285,256,0),Ne.DATA_MATRIX_FIELD_256=new Ne(301,256,1),Ne.AZTEC_DATA_8=Ne.DATA_MATRIX_FIELD_256,Ne.MAXICODE_FIELD_64=Ne.AZTEC_DATA_6;class Ie extends p{}Ie.kind="ReedSolomonException";class ke extends p{}ke.kind="IllegalStateException";class Qe{constructor(n){this.field=n}decode(n,c){const u=this.field,m=new ot(u,n),g=new Int32Array(c);let v=!0;for(let je=0;je<c;je++){const De=m.evaluateAt(u.exp(je+u.getGeneratorBase()));g[g.length-1-je]=De,De!==0&&(v=!1)}if(v)return;const N=new ot(u,g),S=this.runEuclideanAlgorithm(u.buildMonomial(c,1),N,c),F=S[0],V=S[1],te=this.findErrorLocations(F),fe=this.findErrorMagnitudes(V,te);for(let je=0;je<te.length;je++){const De=n.length-1-u.log(te[je]);if(De<0)throw new Ie("Bad error location");n[De]=Ne.addOrSubtract(n[De],fe[je])}}runEuclideanAlgorithm(n,c,u){if(n.getDegree()<c.getDegree()){const je=n;n=c,c=je}const m=this.field;let g=n,v=c,N=m.getZero(),S=m.getOne();for(;v.getDegree()>=(u/2|0);){let je=g,De=N;if(g=v,N=S,g.isZero())throw new Ie("r_{i-1} was zero");v=je;let Re=m.getZero();const Xe=g.getCoefficient(g.getDegree()),et=m.inverse(Xe);for(;v.getDegree()>=g.getDegree()&&!v.isZero();){const gt=v.getDegree()-g.getDegree(),vt=m.multiply(v.getCoefficient(v.getDegree()),et);Re=Re.addOrSubtract(m.buildMonomial(gt,vt)),v=v.addOrSubtract(g.multiplyByMonomial(gt,vt))}if(S=Re.multiply(N).addOrSubtract(De),v.getDegree()>=g.getDegree())throw new ke("Division algorithm failed to reduce polynomial?")}const F=S.getCoefficient(0);if(F===0)throw new Ie("sigmaTilde(0) was zero");const V=m.inverse(F),te=S.multiplyScalar(V),fe=v.multiplyScalar(V);return[te,fe]}findErrorLocations(n){const c=n.getDegree();if(c===1)return Int32Array.from([n.getCoefficient(1)]);const u=new Int32Array(c);let m=0;const g=this.field;for(let v=1;v<g.getSize()&&m<c;v++)n.evaluateAt(v)===0&&(u[m]=g.inverse(v),m++);if(m!==c)throw new Ie("Error locator degree does not match number of roots");return u}findErrorMagnitudes(n,c){const u=c.length,m=new Int32Array(u),g=this.field;for(let v=0;v<u;v++){const N=g.inverse(c[v]);let S=1;for(let F=0;F<u;F++)if(v!==F){const V=g.multiply(c[F],N),te=(V&1)===0?V|1:V&-2;S=g.multiply(S,te)}m[v]=g.multiply(n.evaluateAt(N),g.inverse(S)),g.getGeneratorBase()!==0&&(m[v]=g.multiply(m[v],N))}return m}}var _e;(function(ee){ee[ee.UPPER=0]="UPPER",ee[ee.LOWER=1]="LOWER",ee[ee.MIXED=2]="MIXED",ee[ee.DIGIT=3]="DIGIT",ee[ee.PUNCT=4]="PUNCT",ee[ee.BINARY=5]="BINARY"})(_e||(_e={}));class ut{decode(n){this.ddata=n;let c=n.getBits(),u=this.extractBits(c),m=this.correctBits(u),g=ut.convertBoolArrayToByteArray(m),v=ut.getEncodedData(m),N=new Ve(g,v,null,null);return N.setNumBits(m.length),N}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let c=n.length,u=_e.UPPER,m=_e.UPPER,g="",v=0;for(;v<c;)if(m===_e.BINARY){if(c-v<5)break;let N=ut.readCode(n,v,5);if(v+=5,N===0){if(c-v<11)break;N=ut.readCode(n,v,11)+31,v+=11}for(let S=0;S<N;S++){if(c-v<8){v=c;break}const F=ut.readCode(n,v,8);g+=Y.castAsNonUtf8Char(F),v+=8}m=u}else{let N=m===_e.DIGIT?4:5;if(c-v<N)break;let S=ut.readCode(n,v,N);v+=N;let F=ut.getCharacter(m,S);F.startsWith("CTRL_")?(u=m,m=ut.getTable(F.charAt(5)),F.charAt(6)==="L"&&(u=m)):(g+=F,m=u)}return g}static getTable(n){switch(n){case"L":return _e.LOWER;case"P":return _e.PUNCT;case"M":return _e.MIXED;case"D":return _e.DIGIT;case"B":return _e.BINARY;case"U":default:return _e.UPPER}}static getCharacter(n,c){switch(n){case _e.UPPER:return ut.UPPER_TABLE[c];case _e.LOWER:return ut.LOWER_TABLE[c];case _e.MIXED:return ut.MIXED_TABLE[c];case _e.PUNCT:return ut.PUNCT_TABLE[c];case _e.DIGIT:return ut.DIGIT_TABLE[c];default:throw new ke("Bad table")}}correctBits(n){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=Ne.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=Ne.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=Ne.AZTEC_DATA_10):(u=12,c=Ne.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),g=n.length/u;if(g<m)throw new L;let v=n.length%u,N=new Int32Array(g);for(let fe=0;fe<g;fe++,v+=u)N[fe]=ut.readCode(n,v,u);try{new Qe(c).decode(N,g-m)}catch(fe){throw new L(fe)}let S=(1<<u)-1,F=0;for(let fe=0;fe<m;fe++){let je=N[fe];if(je===0||je===S)throw new L;(je===1||je===S-1)&&F++}let V=new Array(m*u-F),te=0;for(let fe=0;fe<m;fe++){let je=N[fe];if(je===1||je===S-1)V.fill(je>1,te,te+u-1),te+=u-1;else for(let De=u-1;De>=0;--De)V[te++]=(je&1<<De)!==0}return V}extractBits(n){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),m=(c?11:14)+u*4,g=new Int32Array(m),v=new Array(this.totalBitsInLayer(u,c));if(c)for(let N=0;N<g.length;N++)g[N]=N;else{let N=m+1+2*D.truncDivision(D.truncDivision(m,2)-1,15),S=m/2,F=D.truncDivision(N,2);for(let V=0;V<S;V++){let te=V+D.truncDivision(V,15);g[S-V-1]=F-te-1,g[S+V]=F+te+1}}for(let N=0,S=0;N<u;N++){let F=(u-N)*4+(c?9:12),V=N*2,te=m-1-V;for(let fe=0;fe<F;fe++){let je=fe*2;for(let De=0;De<2;De++)v[S+je+De]=n.get(g[V+De],g[V+fe]),v[S+2*F+je+De]=n.get(g[V+fe],g[te-De]),v[S+4*F+je+De]=n.get(g[te-De],g[te-fe]),v[S+6*F+je+De]=n.get(g[te-fe],g[V+De])}S+=F*8}return v}static readCode(n,c,u){let m=0;for(let g=c;g<c+u;g++)m<<=1,n[g]&&(m|=1);return m}static readByte(n,c){let u=n.length-c;return u>=8?ut.readCode(n,c,8):ut.readCode(n,c,u)<<8-u}static convertBoolArrayToByteArray(n){let c=new Uint8Array((n.length+7)/8);for(let u=0;u<c.length;u++)c[u]=ut.readByte(n,8*u);return c}totalBitsInLayer(n,c){return((c?88:112)+16*n)*n}}ut.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],ut.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],ut.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],ut.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],ut.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class pe{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,c,u,m){const g=n-u,v=c-m;return Math.sqrt(g*g+v*v)}static sum(n){let c=0;for(let u=0,m=n.length;u!==m;u++){const g=n[u];c+=g}return c}}class Ge{static floatToIntBits(n){return n}}Ge.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ze{constructor(n,c){this.x=n,this.y=c}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof ze){const c=n;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*Ge.floatToIntBits(this.x)+Ge.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const c=this.distance(n[0],n[1]),u=this.distance(n[1],n[2]),m=this.distance(n[0],n[2]);let g,v,N;if(u>=c&&u>=m?(v=n[0],g=n[1],N=n[2]):m>=u&&m>=c?(v=n[1],g=n[0],N=n[2]):(v=n[2],g=n[0],N=n[1]),this.crossProductZ(g,v,N)<0){const S=g;g=N,N=S}n[0]=g,n[1]=v,n[2]=N}static distance(n,c){return pe.distance(n.x,n.y,c.x,c.y)}static crossProductZ(n,c,u){const m=c.x,g=c.y;return(u.x-m)*(n.y-g)-(u.y-g)*(n.x-m)}}class Pe{constructor(n,c){this.bits=n,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Oe extends Pe{constructor(n,c,u,m,g){super(n,c),this.compact=u,this.nbDatablocks=m,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class nt{constructor(n,c,u,m){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),c==null&&(c=nt.INIT_SIZE),u==null&&(u=n.getWidth()/2|0),m==null&&(m=n.getHeight()/2|0);const g=c/2|0;if(this.leftInit=u-g,this.rightInit=u+g,this.upInit=m-g,this.downInit=m+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new G}detect(){let n=this.leftInit,c=this.rightInit,u=this.upInit,m=this.downInit,g=!1,v=!0,N=!1,S=!1,F=!1,V=!1,te=!1;const fe=this.width,je=this.height;for(;v;){v=!1;let De=!0;for(;(De||!S)&&c<fe;)De=this.containsBlackPoint(u,m,c,!1),De?(c++,v=!0,S=!0):S||c++;if(c>=fe){g=!0;break}let Re=!0;for(;(Re||!F)&&m<je;)Re=this.containsBlackPoint(n,c,m,!0),Re?(m++,v=!0,F=!0):F||m++;if(m>=je){g=!0;break}let Xe=!0;for(;(Xe||!V)&&n>=0;)Xe=this.containsBlackPoint(u,m,n,!1),Xe?(n--,v=!0,V=!0):V||n--;if(n<0){g=!0;break}let et=!0;for(;(et||!te)&&u>=0;)et=this.containsBlackPoint(n,c,u,!0),et?(u--,v=!0,te=!0):te||u--;if(u<0){g=!0;break}v&&(N=!0)}if(!g&&N){const De=c-n;let Re=null;for(let vt=1;Re===null&&vt<De;vt++)Re=this.getBlackPointOnSegment(n,m-vt,n+vt,m);if(Re==null)throw new G;let Xe=null;for(let vt=1;Xe===null&&vt<De;vt++)Xe=this.getBlackPointOnSegment(n,u+vt,n+vt,u);if(Xe==null)throw new G;let et=null;for(let vt=1;et===null&&vt<De;vt++)et=this.getBlackPointOnSegment(c,u+vt,c-vt,u);if(et==null)throw new G;let gt=null;for(let vt=1;gt===null&&vt<De;vt++)gt=this.getBlackPointOnSegment(c,m-vt,c-vt,m);if(gt==null)throw new G;return this.centerEdges(gt,Re,et,Xe)}else throw new G}getBlackPointOnSegment(n,c,u,m){const g=pe.round(pe.distance(n,c,u,m)),v=(u-n)/g,N=(m-c)/g,S=this.image;for(let F=0;F<g;F++){const V=pe.round(n+F*v),te=pe.round(c+F*N);if(S.get(V,te))return new ze(V,te)}return null}centerEdges(n,c,u,m){const g=n.getX(),v=n.getY(),N=c.getX(),S=c.getY(),F=u.getX(),V=u.getY(),te=m.getX(),fe=m.getY(),je=nt.CORR;return g<this.width/2?[new ze(te-je,fe+je),new ze(N+je,S+je),new ze(F-je,V-je),new ze(g+je,v-je)]:[new ze(te+je,fe+je),new ze(N+je,S-je),new ze(F-je,V+je),new ze(g-je,v-je)]}containsBlackPoint(n,c,u,m){const g=this.image;if(m){for(let v=n;v<=c;v++)if(g.get(v,u))return!0}else for(let v=n;v<=c;v++)if(g.get(u,v))return!0;return!1}}nt.INIT_SIZE=10,nt.CORR=1;class kt{static checkAndNudgePoints(n,c){const u=n.getWidth(),m=n.getHeight();let g=!0;for(let v=0;v<c.length&&g;v+=2){const N=Math.floor(c[v]),S=Math.floor(c[v+1]);if(N<-1||N>u||S<-1||S>m)throw new G;g=!1,N===-1?(c[v]=0,g=!0):N===u&&(c[v]=u-1,g=!0),S===-1?(c[v+1]=0,g=!0):S===m&&(c[v+1]=m-1,g=!0)}g=!0;for(let v=c.length-2;v>=0&&g;v-=2){const N=Math.floor(c[v]),S=Math.floor(c[v+1]);if(N<-1||N>u||S<-1||S>m)throw new G;g=!1,N===-1?(c[v]=0,g=!0):N===u&&(c[v]=u-1,g=!0),S===-1?(c[v+1]=0,g=!0):S===m&&(c[v+1]=m-1,g=!0)}}}class St{constructor(n,c,u,m,g,v,N,S,F){this.a11=n,this.a21=c,this.a31=u,this.a12=m,this.a22=g,this.a32=v,this.a13=N,this.a23=S,this.a33=F}static quadrilateralToQuadrilateral(n,c,u,m,g,v,N,S,F,V,te,fe,je,De,Re,Xe){const et=St.quadrilateralToSquare(n,c,u,m,g,v,N,S);return St.squareToQuadrilateral(F,V,te,fe,je,De,Re,Xe).times(et)}transformPoints(n){const c=n.length,u=this.a11,m=this.a12,g=this.a13,v=this.a21,N=this.a22,S=this.a23,F=this.a31,V=this.a32,te=this.a33;for(let fe=0;fe<c;fe+=2){const je=n[fe],De=n[fe+1],Re=g*je+S*De+te;n[fe]=(u*je+v*De+F)/Re,n[fe+1]=(m*je+N*De+V)/Re}}transformPointsWithValues(n,c){const u=this.a11,m=this.a12,g=this.a13,v=this.a21,N=this.a22,S=this.a23,F=this.a31,V=this.a32,te=this.a33,fe=n.length;for(let je=0;je<fe;je++){const De=n[je],Re=c[je],Xe=g*De+S*Re+te;n[je]=(u*De+v*Re+F)/Xe,c[je]=(m*De+N*Re+V)/Xe}}static squareToQuadrilateral(n,c,u,m,g,v,N,S){const F=n-u+g-N,V=c-m+v-S;if(F===0&&V===0)return new St(u-n,g-u,n,m-c,v-m,c,0,0,1);{const te=u-g,fe=N-g,je=m-v,De=S-v,Re=te*De-fe*je,Xe=(F*De-fe*V)/Re,et=(te*V-F*je)/Re;return new St(u-n+Xe*u,N-n+et*N,n,m-c+Xe*m,S-c+et*S,c,Xe,et,1)}}static quadrilateralToSquare(n,c,u,m,g,v,N,S){return St.squareToQuadrilateral(n,c,u,m,g,v,N,S).buildAdjoint()}buildAdjoint(){return new St(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new St(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class Nr extends kt{sampleGrid(n,c,u,m,g,v,N,S,F,V,te,fe,je,De,Re,Xe,et,gt,vt){const ht=St.quadrilateralToQuadrilateral(m,g,v,N,S,F,V,te,fe,je,De,Re,Xe,et,gt,vt);return this.sampleGridWithTransform(n,c,u,ht)}sampleGridWithTransform(n,c,u,m){if(c<=0||u<=0)throw new G;const g=new de(c,u),v=new Float32Array(2*c);for(let N=0;N<u;N++){const S=v.length,F=N+.5;for(let V=0;V<S;V+=2)v[V]=V/2+.5,v[V+1]=F;m.transformPoints(v),kt.checkAndNudgePoints(n,v);try{for(let V=0;V<S;V+=2)n.get(Math.floor(v[V]),Math.floor(v[V+1]))&&g.set(V/2,N)}catch{throw new G}}return g}}class tr{static setGridSampler(n){tr.gridSampler=n}static getInstance(){return tr.gridSampler}}tr.gridSampler=new Nr;class qt{constructor(n,c){this.x=n,this.y=c}toResultPoint(){return new ze(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Gt{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let c=this.getMatrixCenter(),u=this.getBullsEyeCorners(c);if(n){let v=u[0];u[0]=u[2],u[2]=v}this.extractParameters(u);let m=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),g=this.getMatrixCornerPoints(u);return new Oe(m,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new G;let c=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(n[0],n[1],c),this.sampleLine(n[1],n[2],c),this.sampleLine(n[2],n[3],c),this.sampleLine(n[3],n[0],c)]);this.shift=this.getRotation(u,c);let m=0;for(let v=0;v<4;v++){let N=u[(this.shift+v)%4];this.compact?(m<<=7,m+=N>>1&127):(m<<=10,m+=(N>>2&992)+(N>>1&31))}let g=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(n,c){let u=0;n.forEach((m,g,v)=>{let N=(m>>c-2<<1)+(m&1);u=(u<<3)+N}),u=((u&1)<<11)+(u>>1);for(let m=0;m<4;m++)if(D.bitCount(u^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new G}getCorrectedParameterData(n,c){let u,m;c?(u=7,m=2):(u=10,m=4);let g=u-m,v=new Int32Array(u);for(let S=u-1;S>=0;--S)v[S]=n&15,n>>=4;try{new Qe(Ne.AZTEC_PARAM).decode(v,g)}catch{throw new G}let N=0;for(let S=0;S<m;S++)N=(N<<4)+v[S];return N}getBullsEyeCorners(n){let c=n,u=n,m=n,g=n,v=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let te=this.getFirstDifferent(c,v,1,-1),fe=this.getFirstDifferent(u,v,1,1),je=this.getFirstDifferent(m,v,-1,1),De=this.getFirstDifferent(g,v,-1,-1);if(this.nbCenterLayers>2){let Re=this.distancePoint(De,te)*this.nbCenterLayers/(this.distancePoint(g,c)*(this.nbCenterLayers+2));if(Re<.75||Re>1.25||!this.isWhiteOrBlackRectangle(te,fe,je,De))break}c=te,u=fe,m=je,g=De,v=!v}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new G;this.compact=this.nbCenterLayers===5;let N=new ze(c.getX()+.5,c.getY()-.5),S=new ze(u.getX()+.5,u.getY()+.5),F=new ze(m.getX()-.5,m.getY()+.5),V=new ze(g.getX()-.5,g.getY()-.5);return this.expandSquare([N,S,F,V],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,c,u,m;try{let N=new nt(this.image).detect();n=N[0],c=N[1],u=N[2],m=N[3]}catch{let S=this.image.getWidth()/2,F=this.image.getHeight()/2;n=this.getFirstDifferent(new qt(S+7,F-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new qt(S+7,F+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new qt(S-7,F+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new qt(S-7,F-7),!1,-1,-1).toResultPoint()}let g=pe.round((n.getX()+m.getX()+c.getX()+u.getX())/4),v=pe.round((n.getY()+m.getY()+c.getY()+u.getY())/4);try{let N=new nt(this.image,15,g,v).detect();n=N[0],c=N[1],u=N[2],m=N[3]}catch{n=this.getFirstDifferent(new qt(g+7,v-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new qt(g+7,v+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new qt(g-7,v+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new qt(g-7,v-7),!1,-1,-1).toResultPoint()}return g=pe.round((n.getX()+m.getX()+c.getX()+u.getX())/4),v=pe.round((n.getY()+m.getY()+c.getY()+u.getY())/4),new qt(g,v)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,c,u,m,g){let v=tr.getInstance(),N=this.getDimension(),S=N/2-this.nbCenterLayers,F=N/2+this.nbCenterLayers;return v.sampleGrid(n,N,N,S,S,F,S,F,F,S,F,c.getX(),c.getY(),u.getX(),u.getY(),m.getX(),m.getY(),g.getX(),g.getY())}sampleLine(n,c,u){let m=0,g=this.distanceResultPoint(n,c),v=g/u,N=n.getX(),S=n.getY(),F=v*(c.getX()-n.getX())/g,V=v*(c.getY()-n.getY())/g;for(let te=0;te<u;te++)this.image.get(pe.round(N+te*F),pe.round(S+te*V))&&(m|=1<<u-te-1);return m}isWhiteOrBlackRectangle(n,c,u,m){let g=3;n=new qt(n.getX()-g,n.getY()+g),c=new qt(c.getX()-g,c.getY()-g),u=new qt(u.getX()+g,u.getY()-g),m=new qt(m.getX()+g,m.getY()+g);let v=this.getColor(m,n);if(v===0)return!1;let N=this.getColor(n,c);return N!==v||(N=this.getColor(c,u),N!==v)?!1:(N=this.getColor(u,m),N===v)}getColor(n,c){let u=this.distancePoint(n,c),m=(c.getX()-n.getX())/u,g=(c.getY()-n.getY())/u,v=0,N=n.getX(),S=n.getY(),F=this.image.get(n.getX(),n.getY()),V=Math.ceil(u);for(let fe=0;fe<V;fe++)N+=m,S+=g,this.image.get(pe.round(N),pe.round(S))!==F&&v++;let te=v/u;return te>.1&&te<.9?0:te<=.1===F?1:-1}getFirstDifferent(n,c,u,m){let g=n.getX()+u,v=n.getY()+m;for(;this.isValid(g,v)&&this.image.get(g,v)===c;)g+=u,v+=m;for(g-=u,v-=m;this.isValid(g,v)&&this.image.get(g,v)===c;)g+=u;for(g-=u;this.isValid(g,v)&&this.image.get(g,v)===c;)v+=m;return v-=m,new qt(g,v)}expandSquare(n,c,u){let m=u/(2*c),g=n[0].getX()-n[2].getX(),v=n[0].getY()-n[2].getY(),N=(n[0].getX()+n[2].getX())/2,S=(n[0].getY()+n[2].getY())/2,F=new ze(N+m*g,S+m*v),V=new ze(N-m*g,S-m*v);g=n[1].getX()-n[3].getX(),v=n[1].getY()-n[3].getY(),N=(n[1].getX()+n[3].getX())/2,S=(n[1].getY()+n[3].getY())/2;let te=new ze(N+m*g,S+m*v),fe=new ze(N-m*g,S-m*v);return[F,te,V,fe]}isValid(n,c){return n>=0&&n<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(n){let c=pe.round(n.getX()),u=pe.round(n.getY());return this.isValid(c,u)}distancePoint(n,c){return pe.distance(n.getX(),n.getY(),c.getX(),c.getY())}distanceResultPoint(n,c){return pe.distance(n.getX(),n.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(D.truncDivision(this.nbLayers-4,8)+1)+15}}class lr{decode(n,c=null){let u=null,m=new Gt(n.getBlackMatrix()),g=null,v=null;try{let V=m.detectMirror(!1);g=V.getPoints(),this.reportFoundResultPoints(c,g),v=new ut().decode(V)}catch(V){u=V}if(v==null)try{let V=m.detectMirror(!0);g=V.getPoints(),this.reportFoundResultPoints(c,g),v=new ut().decode(V)}catch(V){throw u??V}let N=new se(v.getText(),v.getRawBytes(),v.getNumBits(),g,K.AZTEC,A.currentTimeMillis()),S=v.getByteSegments();S!=null&&N.putMetadata(we.BYTE_SEGMENTS,S);let F=v.getECLevel();return F!=null&&N.putMetadata(we.ERROR_CORRECTION_LEVEL,F),N}reportFoundResultPoints(n,c){if(n!=null){let u=n.get(z.NEED_RESULT_POINT_CALLBACK);u!=null&&c.forEach((m,g,v)=>{u.foundPossibleResultPoint(m)})}}reset(){}}class at extends X{constructor(n=500){super(new lr,n)}}class yt{decode(n,c){try{return this.doDecode(n,c)}catch{if(c&&c.get(z.TRY_HARDER)===!0&&n.isRotateSupported()){const g=n.rotateCounterClockwise(),v=this.doDecode(g,c),N=v.getResultMetadata();let S=270;N!==null&&N.get(we.ORIENTATION)===!0&&(S=S+N.get(we.ORIENTATION)%360),v.putMetadata(we.ORIENTATION,S);const F=v.getResultPoints();if(F!==null){const V=g.getHeight();for(let te=0;te<F.length;te++)F[te]=new ze(V-F[te].getY()-1,F[te].getX())}return v}else throw new G}}reset(){}doDecode(n,c){const u=n.getWidth(),m=n.getHeight();let g=new B(u);const v=c&&c.get(z.TRY_HARDER)===!0,N=Math.max(1,m>>(v?8:5));let S;v?S=m:S=15;const F=Math.trunc(m/2);for(let V=0;V<S;V++){const te=Math.trunc((V+1)/2),fe=(V&1)===0,je=F+N*(fe?te:-te);if(je<0||je>=m)break;try{g=n.getBlackRow(je,g)}catch{continue}for(let De=0;De<2;De++){if(De===1&&(g.reverse(),c&&c.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const Re=new Map;c.forEach((Xe,et)=>Re.set(et,Xe)),Re.delete(z.NEED_RESULT_POINT_CALLBACK),c=Re}try{const Re=this.decodeRow(je,g,c);if(De===1){Re.putMetadata(we.ORIENTATION,180);const Xe=Re.getResultPoints();Xe!==null&&(Xe[0]=new ze(u-Xe[0].getX()-1,Xe[0].getY()),Xe[1]=new ze(u-Xe[1].getX()-1,Xe[1].getY()))}return Re}catch{}}}throw new G}static recordPattern(n,c,u){const m=u.length;for(let F=0;F<m;F++)u[F]=0;const g=n.getSize();if(c>=g)throw new G;let v=!n.get(c),N=0,S=c;for(;S<g;){if(n.get(S)!==v)u[N]++;else{if(++N===m)break;u[N]=1,v=!v}S++}if(!(N===m||N===m-1&&S===g))throw new G}static recordPatternInReverse(n,c,u){let m=u.length,g=n.get(c);for(;c>0&&m>=0;)n.get(--c)!==g&&(m--,g=!g);if(m>=0)throw new G;yt.recordPattern(n,c+1,u)}static patternMatchVariance(n,c,u){const m=n.length;let g=0,v=0;for(let F=0;F<m;F++)g+=n[F],v+=c[F];if(g<v)return Number.POSITIVE_INFINITY;const N=g/v;u*=N;let S=0;for(let F=0;F<m;F++){const V=n[F],te=c[F]*N,fe=V>te?V-te:te-V;if(fe>u)return Number.POSITIVE_INFINITY;S+=fe}return S/g}}class Be extends yt{static findStartPattern(n){const c=n.getSize(),u=n.getNextSet(0);let m=0,g=Int32Array.from([0,0,0,0,0,0]),v=u,N=!1;const S=6;for(let F=u;F<c;F++)if(n.get(F)!==N)g[m]++;else{if(m===S-1){let V=Be.MAX_AVG_VARIANCE,te=-1;for(let fe=Be.CODE_START_A;fe<=Be.CODE_START_C;fe++){const je=yt.patternMatchVariance(g,Be.CODE_PATTERNS[fe],Be.MAX_INDIVIDUAL_VARIANCE);je<V&&(V=je,te=fe)}if(te>=0&&n.isRange(Math.max(0,v-(F-v)/2),v,!1))return Int32Array.from([v,F,te]);v+=g[0]+g[1],g=g.slice(2,g.length-1),g[m-1]=0,g[m]=0,m--}else m++;g[m]=1,N=!N}throw new G}static decodeCode(n,c,u){yt.recordPattern(n,u,c);let m=Be.MAX_AVG_VARIANCE,g=-1;for(let v=0;v<Be.CODE_PATTERNS.length;v++){const N=Be.CODE_PATTERNS[v],S=this.patternMatchVariance(c,N,Be.MAX_INDIVIDUAL_VARIANCE);S<m&&(m=S,g=v)}if(g>=0)return g;throw new G}decodeRow(n,c,u){const m=u&&u.get(z.ASSUME_GS1)===!0,g=Be.findStartPattern(c),v=g[2];let N=0;const S=new Uint8Array(20);S[N++]=v;let F;switch(v){case Be.CODE_START_A:F=Be.CODE_CODE_A;break;case Be.CODE_START_B:F=Be.CODE_CODE_B;break;case Be.CODE_START_C:F=Be.CODE_CODE_C;break;default:throw new L}let V=!1,te=!1,fe="",je=g[0],De=g[1];const Re=Int32Array.from([0,0,0,0,0,0]);let Xe=0,et=0,gt=v,vt=0,ht=!0,Kt=!1,$t=!1;for(;!V;){const $n=te;switch(te=!1,Xe=et,et=Be.decodeCode(c,Re,De),S[N++]=et,et!==Be.CODE_STOP&&(ht=!0),et!==Be.CODE_STOP&&(vt++,gt+=vt*et),je=De,De+=Re.reduce((Vs,Nd)=>Vs+Nd,0),et){case Be.CODE_START_A:case Be.CODE_START_B:case Be.CODE_START_C:throw new L}switch(F){case Be.CODE_CODE_A:if(et<64)$t===Kt?fe+=String.fromCharCode(32+et):fe+=String.fromCharCode(32+et+128),$t=!1;else if(et<96)$t===Kt?fe+=String.fromCharCode(et-64):fe+=String.fromCharCode(et+64),$t=!1;else switch(et!==Be.CODE_STOP&&(ht=!1),et){case Be.CODE_FNC_1:m&&(fe.length===0?fe+="]C1":fe+="");break;case Be.CODE_FNC_2:case Be.CODE_FNC_3:break;case Be.CODE_FNC_4_A:!Kt&&$t?(Kt=!0,$t=!1):Kt&&$t?(Kt=!1,$t=!1):$t=!0;break;case Be.CODE_SHIFT:te=!0,F=Be.CODE_CODE_B;break;case Be.CODE_CODE_B:F=Be.CODE_CODE_B;break;case Be.CODE_CODE_C:F=Be.CODE_CODE_C;break;case Be.CODE_STOP:V=!0;break}break;case Be.CODE_CODE_B:if(et<96)$t===Kt?fe+=String.fromCharCode(32+et):fe+=String.fromCharCode(32+et+128),$t=!1;else switch(et!==Be.CODE_STOP&&(ht=!1),et){case Be.CODE_FNC_1:m&&(fe.length===0?fe+="]C1":fe+="");break;case Be.CODE_FNC_2:case Be.CODE_FNC_3:break;case Be.CODE_FNC_4_B:!Kt&&$t?(Kt=!0,$t=!1):Kt&&$t?(Kt=!1,$t=!1):$t=!0;break;case Be.CODE_SHIFT:te=!0,F=Be.CODE_CODE_A;break;case Be.CODE_CODE_A:F=Be.CODE_CODE_A;break;case Be.CODE_CODE_C:F=Be.CODE_CODE_C;break;case Be.CODE_STOP:V=!0;break}break;case Be.CODE_CODE_C:if(et<100)et<10&&(fe+="0"),fe+=et;else switch(et!==Be.CODE_STOP&&(ht=!1),et){case Be.CODE_FNC_1:m&&(fe.length===0?fe+="]C1":fe+="");break;case Be.CODE_CODE_A:F=Be.CODE_CODE_A;break;case Be.CODE_CODE_B:F=Be.CODE_CODE_B;break;case Be.CODE_STOP:V=!0;break}break}$n&&(F=F===Be.CODE_CODE_A?Be.CODE_CODE_B:Be.CODE_CODE_A)}const $a=De-je;if(De=c.getNextUnset(De),!c.isRange(De,Math.min(c.getSize(),De+(De-je)/2),!1))throw new G;if(gt-=vt*Xe,gt%103!==Xe)throw new _;const Rs=fe.length;if(Rs===0)throw new G;Rs>0&&ht&&(F===Be.CODE_CODE_C?fe=fe.substring(0,Rs-2):fe=fe.substring(0,Rs-1));const ns=(g[1]+g[0])/2,Rr=je+$a/2,Fa=S.length,is=new Uint8Array(Fa);for(let $n=0;$n<Fa;$n++)is[$n]=S[$n];const hi=[new ze(ns,n),new ze(Rr,n)];return new se(fe,is,0,hi,K.CODE_128,new Date().getTime())}}Be.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Be.MAX_AVG_VARIANCE=.25,Be.MAX_INDIVIDUAL_VARIANCE=.7,Be.CODE_SHIFT=98,Be.CODE_CODE_C=99,Be.CODE_CODE_B=100,Be.CODE_CODE_A=101,Be.CODE_FNC_1=102,Be.CODE_FNC_2=97,Be.CODE_FNC_3=96,Be.CODE_FNC_4_A=101,Be.CODE_FNC_4_B=100,Be.CODE_START_A=103,Be.CODE_START_B=104,Be.CODE_START_C=105,Be.CODE_STOP=106;class Et extends yt{constructor(n=!1,c=!1){super(),this.usingCheckDigit=n,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,c,u){let m=this.counters;m.fill(0),this.decodeRowResult="";let g=Et.findAsteriskPattern(c,m),v=c.getNextSet(g[1]),N=c.getSize(),S,F;do{Et.recordPattern(c,v,m);let Re=Et.toNarrowWidePattern(m);if(Re<0)throw new G;S=Et.patternToChar(Re),this.decodeRowResult+=S,F=v;for(let Xe of m)v+=Xe;v=c.getNextSet(v)}while(S!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let V=0;for(let Re of m)V+=Re;let te=v-F-V;if(v!==N&&te*2<V)throw new G;if(this.usingCheckDigit){let Re=this.decodeRowResult.length-1,Xe=0;for(let et=0;et<Re;et++)Xe+=Et.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(et));if(this.decodeRowResult.charAt(Re)!==Et.ALPHABET_STRING.charAt(Xe%43))throw new _;this.decodeRowResult=this.decodeRowResult.substring(0,Re)}if(this.decodeRowResult.length===0)throw new G;let fe;this.extendedMode?fe=Et.decodeExtended(this.decodeRowResult):fe=this.decodeRowResult;let je=(g[1]+g[0])/2,De=F+V/2;return new se(fe,null,0,[new ze(je,n),new ze(De,n)],K.CODE_39,new Date().getTime())}static findAsteriskPattern(n,c){let u=n.getSize(),m=n.getNextSet(0),g=0,v=m,N=!1,S=c.length;for(let F=m;F<u;F++)if(n.get(F)!==N)c[g]++;else{if(g===S-1){if(this.toNarrowWidePattern(c)===Et.ASTERISK_ENCODING&&n.isRange(Math.max(0,v-Math.floor((F-v)/2)),v,!1))return[v,F];v+=c[0]+c[1],c.copyWithin(0,2,2+g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,N=!N}throw new G}static toNarrowWidePattern(n){let c=n.length,u=0,m;do{let g=2147483647;for(let S of n)S<g&&S>u&&(g=S);u=g,m=0;let v=0,N=0;for(let S=0;S<c;S++){let F=n[S];F>u&&(N|=1<<c-1-S,m++,v+=F)}if(m===3){for(let S=0;S<c&&m>0;S++){let F=n[S];if(F>u&&(m--,F*2>=v))return-1}return N}}while(m>3);return-1}static patternToChar(n){for(let c=0;c<Et.CHARACTER_ENCODINGS.length;c++)if(Et.CHARACTER_ENCODINGS[c]===n)return Et.ALPHABET_STRING.charAt(c);if(n===Et.ASTERISK_ENCODING)return"*";throw new G}static decodeExtended(n){let c=n.length,u="";for(let m=0;m<c;m++){let g=n.charAt(m);if(g==="+"||g==="$"||g==="%"||g==="/"){let v=n.charAt(m+1),N="\0";switch(g){case"+":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)+32);else throw new L;break;case"$":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)-64);else throw new L;break;case"%":if(v>="A"&&v<="E")N=String.fromCharCode(v.charCodeAt(0)-38);else if(v>="F"&&v<="J")N=String.fromCharCode(v.charCodeAt(0)-11);else if(v>="K"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)+16);else if(v>="P"&&v<="T")N=String.fromCharCode(v.charCodeAt(0)+43);else if(v==="U")N="\0";else if(v==="V")N="@";else if(v==="W")N="`";else if(v==="X"||v==="Y"||v==="Z")N="";else throw new L;break;case"/":if(v>="A"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)-32);else if(v==="Z")N=":";else throw new L;break}u+=N,m++}else u+=g}return u}}Et.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Et.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Et.ASTERISK_ENCODING=148;class Bt extends yt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,c,u){let m=this.decodeStart(c),g=this.decodeEnd(c),v=new ue;Bt.decodeMiddle(c,m[1],g[0],v);let N=v.toString(),S=null;u!=null&&(S=u.get(z.ALLOWED_LENGTHS)),S==null&&(S=Bt.DEFAULT_ALLOWED_LENGTHS);let F=N.length,V=!1,te=0;for(let De of S){if(F===De){V=!0;break}De>te&&(te=De)}if(!V&&F>te&&(V=!0),!V)throw new L;const fe=[new ze(m[1],n),new ze(g[0],n)];return new se(N,null,0,fe,K.ITF,new Date().getTime())}static decodeMiddle(n,c,u,m){let g=new Int32Array(10),v=new Int32Array(5),N=new Int32Array(5);for(g.fill(0),v.fill(0),N.fill(0);c<u;){yt.recordPattern(n,c,g);for(let F=0;F<5;F++){let V=2*F;v[F]=g[V],N[F]=g[V+1]}let S=Bt.decodeDigit(v);m.append(S.toString()),S=this.decodeDigit(N),m.append(S.toString()),g.forEach(function(F){c+=F})}}decodeStart(n){let c=Bt.skipWhiteSpace(n),u=Bt.findGuardPattern(n,c,Bt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(n,u[0]),u}validateQuietZone(n,c){let u=this.narrowLineWidth*10;u=u<c?u:c;for(let m=c-1;u>0&&m>=0&&!n.get(m);m--)u--;if(u!==0)throw new G}static skipWhiteSpace(n){const c=n.getSize(),u=n.getNextSet(0);if(u===c)throw new G;return u}decodeEnd(n){n.reverse();try{let c=Bt.skipWhiteSpace(n),u;try{u=Bt.findGuardPattern(n,c,Bt.END_PATTERN_REVERSED[0])}catch(g){g instanceof G&&(u=Bt.findGuardPattern(n,c,Bt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,u[0]);let m=u[0];return u[0]=n.getSize()-u[1],u[1]=n.getSize()-m,u}finally{n.reverse()}}static findGuardPattern(n,c,u){let m=u.length,g=new Int32Array(m),v=n.getSize(),N=!1,S=0,F=c;g.fill(0);for(let V=c;V<v;V++)if(n.get(V)!==N)g[S]++;else{if(S===m-1){if(yt.patternMatchVariance(g,u,Bt.MAX_INDIVIDUAL_VARIANCE)<Bt.MAX_AVG_VARIANCE)return[F,V];F+=g[0]+g[1],A.arraycopy(g,2,g,0,S-1),g[S-1]=0,g[S]=0,S--}else S++;g[S]=1,N=!N}throw new G}static decodeDigit(n){let c=Bt.MAX_AVG_VARIANCE,u=-1,m=Bt.PATTERNS.length;for(let g=0;g<m;g++){let v=Bt.PATTERNS[g],N=yt.patternMatchVariance(n,v,Bt.MAX_INDIVIDUAL_VARIANCE);N<c?(c=N,u=g):N===c&&(u=-1)}if(u>=0)return u%10;throw new G}}Bt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Bt.MAX_AVG_VARIANCE=.38,Bt.MAX_INDIVIDUAL_VARIANCE=.5,Bt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Bt.START_PATTERN=Int32Array.from([1,1,1,1]),Bt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Me extends yt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let c=!1,u,m=0,g=Int32Array.from([0,0,0]);for(;!c;){g=Int32Array.from([0,0,0]),u=Me.findGuardPattern(n,m,!1,this.START_END_PATTERN,g);let v=u[0];m=u[1];let N=v-(m-v);N>=0&&(c=n.isRange(N,v,!1))}return u}static checkChecksum(n){return Me.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let c=n.length;if(c===0)return!1;let u=parseInt(n.charAt(c-1),10);return Me.getStandardUPCEANChecksum(n.substring(0,c-1))===u}static getStandardUPCEANChecksum(n){let c=n.length,u=0;for(let m=c-1;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}u*=3;for(let m=c-2;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}return(1e3-u)%10}static decodeEnd(n,c){return Me.findGuardPattern(n,c,!1,Me.START_END_PATTERN,new Int32Array(Me.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,c,u,m){return this.findGuardPattern(n,c,u,m,new Int32Array(m.length))}static findGuardPattern(n,c,u,m,g){let v=n.getSize();c=u?n.getNextUnset(c):n.getNextSet(c);let N=0,S=c,F=m.length,V=u;for(let te=c;te<v;te++)if(n.get(te)!==V)g[N]++;else{if(N===F-1){if(yt.patternMatchVariance(g,m,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return Int32Array.from([S,te]);S+=g[0]+g[1];let fe=g.slice(2,g.length-1);for(let je=0;je<N-1;je++)g[je]=fe[je];g[N-1]=0,g[N]=0,N--}else N++;g[N]=1,V=!V}throw new G}static decodeDigit(n,c,u,m){this.recordPattern(n,u,c);let g=this.MAX_AVG_VARIANCE,v=-1,N=m.length;for(let S=0;S<N;S++){let F=m[S],V=yt.patternMatchVariance(c,F,Me.MAX_INDIVIDUAL_VARIANCE);V<g&&(g=V,v=S)}if(v>=0)return v;throw new G}}Me.MAX_AVG_VARIANCE=.48,Me.MAX_INDIVIDUAL_VARIANCE=.7,Me.START_END_PATTERN=Int32Array.from([1,1,1]),Me.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Me.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Me.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class pt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,c,u){let m=this.decodeRowStringBuffer,g=this.decodeMiddle(c,u,m),v=m.toString(),N=pt.parseExtensionString(v),S=[new ze((u[0]+u[1])/2,n),new ze(g,n)],F=new se(v,null,0,S,K.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&F.putAllMetadata(N),F}decodeMiddle(n,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1],N=0;for(let F=0;F<5&&v<g;F++){let V=Me.decodeDigit(n,m,v,Me.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let te of m)v+=te;V>=10&&(N|=1<<4-F),F!==4&&(v=n.getNextSet(v),v=n.getNextUnset(v))}if(u.length!==5)throw new G;let S=this.determineCheckDigit(N);if(pt.extensionChecksum(u.toString())!==S)throw new G;return v}static extensionChecksum(n){let c=n.length,u=0;for(let m=c-2;m>=0;m-=2)u+=n.charAt(m).charCodeAt(0)-48;u*=3;for(let m=c-1;m>=0;m-=2)u+=n.charAt(m).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(n){for(let c=0;c<10;c++)if(n===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new G}static parseExtensionString(n){if(n.length!==5)return null;let c=pt.parseExtension5String(n);return c==null?null:new Map([[we.SUGGESTED_PRICE,c]])}static parseExtension5String(n){let c;switch(n.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let u=parseInt(n.substring(1)),m=(u/100).toString(),g=u%100,v=g<10?"0"+g:g.toString();return c+m+"."+v}}class Vr{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,c,u){let m=this.decodeRowStringBuffer,g=this.decodeMiddle(c,u,m),v=m.toString(),N=Vr.parseExtensionString(v),S=[new ze((u[0]+u[1])/2,n),new ze(g,n)],F=new se(v,null,0,S,K.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&F.putAllMetadata(N),F}decodeMiddle(n,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1],N=0;for(let S=0;S<2&&v<g;S++){let F=Me.decodeDigit(n,m,v,Me.L_AND_G_PATTERNS);u+=String.fromCharCode(48+F%10);for(let V of m)v+=V;F>=10&&(N|=1<<1-S),S!==1&&(v=n.getNextSet(v),v=n.getNextUnset(v))}if(u.length!==2)throw new G;if(parseInt(u.toString())%4!==N)throw new G;return v}static parseExtensionString(n){return n.length!==2?null:new Map([[we.ISSUE_NUMBER,parseInt(n)]])}}class Dt{static decodeRow(n,c,u){let m=Me.findGuardPattern(c,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new pt().decodeRow(n,c,m)}catch{return new Vr().decodeRow(n,c,m)}}}Dt.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Yt extends Me{constructor(){super(),this.decodeRowStringBuffer="",Yt.L_AND_G_PATTERNS=Yt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let c=Yt.L_PATTERNS[n-10],u=new Int32Array(c.length);for(let m=0;m<c.length;m++)u[m]=c[c.length-m-1];Yt.L_AND_G_PATTERNS[n]=u}}decodeRow(n,c,u){let m=Yt.findStartGuardPattern(c),g=u==null?null:u.get(z.NEED_RESULT_POINT_CALLBACK);if(g!=null){const ht=new ze((m[0]+m[1])/2,n);g.foundPossibleResultPoint(ht)}let v=this.decodeMiddle(c,m,this.decodeRowStringBuffer),N=v.rowOffset,S=v.resultString;if(g!=null){const ht=new ze(N,n);g.foundPossibleResultPoint(ht)}let F=this.decodeEnd(c,N);if(g!=null){const ht=new ze((F[0]+F[1])/2,n);g.foundPossibleResultPoint(ht)}let V=F[1],te=V+(V-F[0]);if(te>=c.getSize()||!c.isRange(V,te,!1))throw new G;let fe=S.toString();if(fe.length<8)throw new L;if(!Yt.checkChecksum(fe))throw new _;let je=(m[1]+m[0])/2,De=(F[1]+F[0])/2,Re=this.getBarcodeFormat(),Xe=[new ze(je,n),new ze(De,n)],et=new se(fe,null,0,Xe,Re,new Date().getTime()),gt=0;try{let ht=Dt.decodeRow(n,c,F[1]);et.putMetadata(we.UPC_EAN_EXTENSION,ht.getText()),et.putAllMetadata(ht.getResultMetadata()),et.addResultPoints(ht.getResultPoints()),gt=ht.getText().length}catch{}let vt=u==null?null:u.get(z.ALLOWED_EAN_EXTENSIONS);if(vt!=null){let ht=!1;for(let Kt in vt)if(gt.toString()===Kt){ht=!0;break}if(!ht)throw new G}return et}decodeEnd(n,c){return Yt.findGuardPattern(n,c,!1,Yt.START_END_PATTERN,new Int32Array(Yt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Yt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let c=n.length;if(c===0)return!1;let u=parseInt(n.charAt(c-1),10);return Yt.getStandardUPCEANChecksum(n.substring(0,c-1))===u}static getStandardUPCEANChecksum(n){let c=n.length,u=0;for(let m=c-1;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}u*=3;for(let m=c-2;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}return(1e3-u)%10}}class sr extends Yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1],N=0;for(let F=0;F<6&&v<g;F++){let V=Yt.decodeDigit(n,m,v,Yt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let te of m)v+=te;V>=10&&(N|=1<<5-F)}u=sr.determineFirstDigit(u,N),v=Yt.findGuardPattern(n,v,!0,Yt.MIDDLE_PATTERN,new Int32Array(Yt.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<6&&v<g;F++){let V=Yt.decodeDigit(n,m,v,Yt.L_PATTERNS);u+=String.fromCharCode(48+V);for(let te of m)v+=te}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return K.EAN_13}static determineFirstDigit(n,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return n=String.fromCharCode(48+u)+n,n;throw new G}}sr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ta extends Yt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,c,u){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1];for(let S=0;S<4&&v<g;S++){let F=Yt.decodeDigit(n,m,v,Yt.L_PATTERNS);u+=String.fromCharCode(48+F);for(let V of m)v+=V}v=Yt.findGuardPattern(n,v,!0,Yt.MIDDLE_PATTERN,new Int32Array(Yt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<4&&v<g;S++){let F=Yt.decodeDigit(n,m,v,Yt.L_PATTERNS);u+=String.fromCharCode(48+F);for(let V of m)v+=V}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return K.EAN_8}}class Ts extends Yt{constructor(){super(...arguments),this.ean13Reader=new sr}getBarcodeFormat(){return K.UPC_A}decode(n,c){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,c,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,c,u))}decodeMiddle(n,c,u){return this.ean13Reader.decodeMiddle(n,c,u)}maybeReturnResult(n){let c=n.getText();if(c.charAt(0)==="0"){let u=new se(c.substring(1),null,null,n.getResultPoints(),K.UPC_A);return n.getResultMetadata()!=null&&u.putAllMetadata(n.getResultMetadata()),u}else throw new G}reset(){this.ean13Reader.reset()}}class $r extends Yt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,c,u){const m=this.decodeMiddleCounters.map(F=>F);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const g=n.getSize();let v=c[1],N=0;for(let F=0;F<6&&v<g;F++){const V=$r.decodeDigit(n,m,v,$r.L_AND_G_PATTERNS);u+=String.fromCharCode(48+V%10);for(let te of m)v+=te;V>=10&&(N|=1<<5-F)}let S=$r.determineNumSysAndCheckDigit(u,N);return{rowOffset:v,resultString:S}}decodeEnd(n,c){return $r.findGuardPatternWithoutCounters(n,c,!0,$r.MIDDLE_END_PATTERN)}checkChecksum(n){return Yt.checkChecksum($r.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,c){for(let u=0;u<=1;u++)for(let m=0;m<10;m++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][m]){let g=String.fromCharCode(48+u),v=String.fromCharCode(48+m);return g+n+v}throw G.getNotFoundInstance()}getBarcodeFormat(){return K.UPC_E}static convertUPCEtoUPCA(n){const c=n.slice(1,7).split("").map(g=>g.charCodeAt(0)),u=new ue;u.append(n.charAt(0));let m=c[5];switch(m){case 0:case 1:case 2:u.appendChars(c,0,2),u.append(m),u.append("0000"),u.appendChars(c,2,3);break;case 3:u.appendChars(c,0,3),u.append("00000"),u.appendChars(c,3,2);break;case 4:u.appendChars(c,0,4),u.append("00000"),u.append(c[4]);break;default:u.appendChars(c,0,5),u.append("0000"),u.append(m);break}return n.length>=8&&u.append(n.charAt(7)),u.toString()}}$r.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),$r.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class zs extends yt{constructor(n){super();let c=n==null?null:n.get(z.POSSIBLE_FORMATS),u=[];i(c)?(u.push(new sr),u.push(new Ts),u.push(new Ta),u.push(new $r)):(c.indexOf(K.EAN_13)>-1&&u.push(new sr),c.indexOf(K.UPC_A)>-1&&u.push(new Ts),c.indexOf(K.EAN_8)>-1&&u.push(new Ta),c.indexOf(K.UPC_E)>-1&&u.push(new $r)),this.readers=u}decodeRow(n,c,u){for(let m of this.readers)try{const g=m.decodeRow(n,c,u),v=g.getBarcodeFormat()===K.EAN_13&&g.getText().charAt(0)==="0",N=u==null?null:u.get(z.POSSIBLE_FORMATS),S=N==null||N.includes(K.UPC_A);if(v&&S){const F=g.getRawBytes(),V=new se(g.getText().substring(1),F,F?F.length:null,g.getResultPoints(),K.UPC_A);return V.putAllMetadata(g.getResultMetadata()),V}return g}catch{}throw new G}reset(){for(let n of this.readers)n.reset()}}class Yr extends yt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,c){for(let u=0;u<c.length;u++)if(yt.patternMatchVariance(n,c[u],Yr.MAX_INDIVIDUAL_VARIANCE)<Yr.MAX_AVG_VARIANCE)return u;throw new G}static count(n){return pe.sum(new Int32Array(n))}static increment(n,c){let u=0,m=c[0];for(let g=1;g<n.length;g++)c[g]>m&&(m=c[g],u=g);n[u]++}static decrement(n,c){let u=0,m=c[0];for(let g=1;g<n.length;g++)c[g]<m&&(m=c[g],u=g);n[u]--}static isFinderPattern(n){let c=n[0]+n[1],u=c+n[2]+n[3],m=c/u;if(m>=Yr.MIN_FINDER_PATTERN_RATIO&&m<=Yr.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;for(let N of n)N>v&&(v=N),N<g&&(g=N);return v<10*g}return!1}}Yr.MAX_AVG_VARIANCE=.2,Yr.MAX_INDIVIDUAL_VARIANCE=.45,Yr.MIN_FINDER_PATTERN_RATIO=9.5/12,Yr.MAX_FINDER_PATTERN_RATIO=12.5/14;class ps{constructor(n,c){this.value=n,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof ps))return!1;const c=n;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class bn{constructor(n,c,u,m,g){this.value=n,this.startEnd=c,this.value=n,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new ze(u,g)),this.resultPoints.push(new ze(m,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof bn))return!1;const c=n;return this.value===c.value}hashCode(){return this.value}}class ta{constructor(){}static getRSSvalue(n,c,u){let m=0;for(let S of n)m+=S;let g=0,v=0,N=n.length;for(let S=0;S<N-1;S++){let F;for(F=1,v|=1<<S;F<n[S];F++,v&=~(1<<S)){let V=ta.combins(m-F-1,N-S-2);if(u&&v===0&&m-F-(N-S-1)>=N-S-1&&(V-=ta.combins(m-F-(N-S),N-S-2)),N-S-1>1){let te=0;for(let fe=m-F-(N-S-2);fe>c;fe--)te+=ta.combins(m-F-fe-1,N-S-3);V-=te*(N-1-S)}else m-F>c&&V--;g+=V}m-=F}return g}static combins(n,c){let u,m;n-c>c?(m=c,u=n-c):(m=n-c,u=c);let g=1,v=1;for(let N=n;N>u;N--)g*=N,v<=m&&(g/=v,v++);for(;v<=m;)g/=v,v++;return g}}class la{static buildBitArray(n){let c=n.length*2-1;n[n.length-1].getRightChar()==null&&(c-=1);let u=12*c,m=new B(u),g=0,N=n[0].getRightChar().getValue();for(let S=11;S>=0;--S)(N&1<<S)!=0&&m.set(g),g++;for(let S=1;S<n.length;++S){let F=n[S],V=F.getLeftChar().getValue();for(let te=11;te>=0;--te)(V&1<<te)!=0&&m.set(g),g++;if(F.getRightChar()!=null){let te=F.getRightChar().getValue();for(let fe=11;fe>=0;--fe)(te&1<<fe)!=0&&m.set(g),g++}}return m}}class At{constructor(n,c){c?this.decodedInformation=null:(this.finished=n,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ra{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class Tr extends ra{constructor(n,c){super(n),this.value=c}getValue(){return this.value}isFNC1(){return this.value===Tr.FNC1}}Tr.FNC1="$";class Us extends ra{constructor(n,c,u){super(n),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class ce extends ra{constructor(n,c,u){if(super(n),c<0||c>10||u<0||u>10)throw new L;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===ce.FNC1}isSecondDigitFNC1(){return this.secondDigit===ce.FNC1}isAnyFNC1(){return this.firstDigit===ce.FNC1||this.secondDigit===ce.FNC1}}ce.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new G;let c=n.substring(0,2);for(let g of me.TWO_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,g[2],n):me.processFixedAI(2,g[1],n);if(n.length<3)throw new G;let u=n.substring(0,3);for(let g of me.THREE_DIGIT_DATA_LENGTH)if(g[0]===u)return g[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,g[2],n):me.processFixedAI(3,g[1],n);for(let g of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===u)return g[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,g[2],n):me.processFixedAI(4,g[1],n);if(n.length<4)throw new G;let m=n.substring(0,4);for(let g of me.FOUR_DIGIT_DATA_LENGTH)if(g[0]===m)return g[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,g[2],n):me.processFixedAI(4,g[1],n);throw new G}static processFixedAI(n,c,u){if(u.length<n)throw new G;let m=u.substring(0,n);if(u.length<n+c)throw new G;let g=u.substring(n,n+c),v=u.substring(n+c),N="("+m+")"+g,S=me.parseFieldsInGeneralPurpose(v);return S==null?N:N+S}static processVariableAI(n,c,u){let m=u.substring(0,n),g;u.length<n+c?g=u.length:g=n+c;let v=u.substring(n,g),N=u.substring(g),S="("+m+")"+v,F=me.parseFieldsInGeneralPurpose(N);return F==null?S:S+F}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class ge{constructor(n){this.buffer=new ue,this.information=n}decodeAllCodes(n,c){let u=c,m=null;do{let g=this.decodeGeneralPurposeField(u,m),v=me.parseFieldsInGeneralPurpose(g.getNewString());if(v!=null&&n.append(v),g.isRemaining()?m=""+g.getRemainingValue():m=null,u===g.getNewPosition())break;u=g.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let c=n;c<n+3;++c)if(this.information.get(c))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(n,4);return g===0?new ce(this.information.getSize(),ce.FNC1,ce.FNC1):new ce(this.information.getSize(),g-1,ce.FNC1)}let c=this.extractNumericValueFromBitArray(n,7),u=(c-8)/11,m=(c-8)%11;return new ce(n+7,u,m)}extractNumericValueFromBitArray(n,c){return ge.extractNumericValueFromBitArray(this.information,n,c)}static extractNumericValueFromBitArray(n,c,u){let m=0;for(let g=0;g<u;++g)n.get(c+g)&&(m|=1<<u-g-1);return m}decodeGeneralPurposeField(n,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(n);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new Us(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new Us(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,c;do{let u=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),n=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),n=c.isFinished()):(c=this.parseNumericBlock(),n=c.isFinished()),!(u!==this.current.getPosition())&&!n)break}while(!n);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let c;return n.isSecondDigitFNC1()?c=new Us(this.current.getPosition(),this.buffer.toString()):c=new Us(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new At(!0,c)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let c=new Us(this.current.getPosition(),this.buffer.toString());return new At(!0,c)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new At(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let c=new Us(this.current.getPosition(),this.buffer.toString());return new At(!0,c)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new At(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let c=new Us(this.current.getPosition(),this.buffer.toString());return new At(!0,c)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new At(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,5);if(c>=5&&c<16)return!0;if(n+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,7);if(u>=64&&u<116)return!0;if(n+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(n,8);return m>=232&&m<253}decodeIsoIec646(n){let c=this.extractNumericValueFromBitArray(n,5);if(c===15)return new Tr(n+5,Tr.FNC1);if(c>=5&&c<15)return new Tr(n+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(n,7);if(u>=64&&u<90)return new Tr(n+7,""+(u+1));if(u>=90&&u<116)return new Tr(n+7,""+(u+7));let m=this.extractNumericValueFromBitArray(n,8),g;switch(m){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new L}return new Tr(n+8,g)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,5);if(c>=5&&c<16)return!0;if(n+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,6);return u>=16&&u<63}decodeAlphanumeric(n){let c=this.extractNumericValueFromBitArray(n,5);if(c===15)return new Tr(n+5,Tr.FNC1);if(c>=5&&c<15)return new Tr(n+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(n,6);if(u>=32&&u<58)return new Tr(n+6,""+(u+33));let m;switch(u){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new ke("Decoding invalid alphanumeric value: "+u)}return new Tr(n+6,m)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let c=0;c<5&&c+n<this.information.getSize();++c)if(c===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+c))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let c=n;c<n+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let c=0;c<4&&c+n<this.information.getSize();++c)if(this.information.get(n+c))return!1;return!0}}class ye{constructor(n){this.information=n,this.generalDecoder=new ge(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ve extends ye{constructor(n){super(n)}encodeCompressedGtin(n,c){n.append("(01)");let u=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,c,u)}encodeCompressedGtinWithoutAI(n,c,u){for(let m=0;m<4;++m){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*m,10);g/100===0&&n.append("0"),g/10===0&&n.append("0"),n.append(g)}ve.appendCheckDigit(n,u)}static appendCheckDigit(n,c){let u=0;for(let m=0;m<13;m++){let g=n.charAt(m+c).charCodeAt(0)-48;u+=(m&1)===0?3*g:g}u=10-u%10,u===10&&(u=0),n.append(u)}}ve.GTIN_SIZE=40;class Ee extends ve{constructor(n){super(n)}parseInformation(){let n=new ue;n.append("(01)");let c=n.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Ee.HEADER_SIZE,4);return n.append(u),this.encodeCompressedGtinWithoutAI(n,Ee.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(n,Ee.HEADER_SIZE+44)}}Ee.HEADER_SIZE=4;class Ye extends ye{constructor(n){super(n)}parseInformation(){let n=new ue;return this.getGeneralDecoder().decodeAllCodes(n,Ye.HEADER_SIZE)}}Ye.HEADER_SIZE=5;class lt extends ve{constructor(n){super(n)}encodeCompressedWeight(n,c,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(c,u);this.addWeightCode(n,m);let g=this.checkWeight(m),v=1e5;for(let N=0;N<5;++N)g/v===0&&n.append("0"),v/=10;n.append(g)}}class Ue extends lt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Ue.HEADER_SIZE+lt.GTIN_SIZE+Ue.WEIGHT_SIZE)throw new G;let n=new ue;return this.encodeCompressedGtin(n,Ue.HEADER_SIZE),this.encodeCompressedWeight(n,Ue.HEADER_SIZE+lt.GTIN_SIZE,Ue.WEIGHT_SIZE),n.toString()}}Ue.HEADER_SIZE=5,Ue.WEIGHT_SIZE=15;class Ke extends Ue{constructor(n){super(n)}addWeightCode(n,c){n.append("(3103)")}checkWeight(n){return n}}class Je extends Ue{constructor(n){super(n)}addWeightCode(n,c){c<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class ft extends ve{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ft.HEADER_SIZE+ve.GTIN_SIZE)throw new G;let n=new ue;this.encodeCompressedGtin(n,ft.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(ft.HEADER_SIZE+ve.GTIN_SIZE,ft.LAST_DIGIT_SIZE);n.append("(392"),n.append(c),n.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(ft.HEADER_SIZE+ve.GTIN_SIZE+ft.LAST_DIGIT_SIZE,null);return n.append(u.getNewString()),n.toString()}}ft.HEADER_SIZE=8,ft.LAST_DIGIT_SIZE=2;class mt extends ve{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<mt.HEADER_SIZE+ve.GTIN_SIZE)throw new G;let n=new ue;this.encodeCompressedGtin(n,mt.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(mt.HEADER_SIZE+ve.GTIN_SIZE,mt.LAST_DIGIT_SIZE);n.append("(393"),n.append(c),n.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(mt.HEADER_SIZE+ve.GTIN_SIZE+mt.LAST_DIGIT_SIZE,mt.FIRST_THREE_DIGITS_SIZE);u/100==0&&n.append("0"),u/10==0&&n.append("0"),n.append(u);let m=this.getGeneralDecoder().decodeGeneralPurposeField(mt.HEADER_SIZE+ve.GTIN_SIZE+mt.LAST_DIGIT_SIZE+mt.FIRST_THREE_DIGITS_SIZE,null);return n.append(m.getNewString()),n.toString()}}mt.HEADER_SIZE=8,mt.LAST_DIGIT_SIZE=2,mt.FIRST_THREE_DIGITS_SIZE=10;class bt extends lt{constructor(n,c,u){super(n),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE+bt.DATE_SIZE)throw new G;let n=new ue;return this.encodeCompressedGtin(n,bt.HEADER_SIZE),this.encodeCompressedWeight(n,bt.HEADER_SIZE+bt.GTIN_SIZE,bt.WEIGHT_SIZE),this.encodeCompressedDate(n,bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,bt.DATE_SIZE);if(u==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let m=u%32;u/=32;let g=u%12+1;u/=12;let v=u;v/10==0&&n.append("0"),n.append(v),g/10==0&&n.append("0"),n.append(g),m/10==0&&n.append("0"),n.append(m)}addWeightCode(n,c){n.append("("),n.append(this.firstAIdigits),n.append(c/1e5),n.append(")")}checkWeight(n){return n%1e5}}bt.HEADER_SIZE=8,bt.WEIGHT_SIZE=20,bt.DATE_SIZE=16;function wt(ee){try{if(ee.get(1))return new Ee(ee);if(!ee.get(2))return new Ye(ee);switch(ge.extractNumericValueFromBitArray(ee,1,4)){case 4:return new Ke(ee);case 5:return new Je(ee)}switch(ge.extractNumericValueFromBitArray(ee,1,5)){case 12:return new ft(ee);case 13:return new mt(ee)}switch(ge.extractNumericValueFromBitArray(ee,1,7)){case 56:return new bt(ee,"310","11");case 57:return new bt(ee,"320","11");case 58:return new bt(ee,"310","13");case 59:return new bt(ee,"320","13");case 60:return new bt(ee,"310","15");case 61:return new bt(ee,"320","15");case 62:return new bt(ee,"310","17");case 63:return new bt(ee,"320","17")}}catch(n){throw console.log(n),new ke("unknown decoder: "+ee)}}class jt{constructor(n,c,u,m){this.leftchar=n,this.rightchar=c,this.finderpattern=u,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,c){return n instanceof jt?jt.equalsOrNull(n.leftchar,c.leftchar)&&jt.equalsOrNull(n.rightchar,c.rightchar)&&jt.equalsOrNull(n.finderpattern,c.finderpattern):!1}static equalsOrNull(n,c){return n===null?c===null:jt.equals(n,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Pt{constructor(n,c,u){this.pairs=n,this.rowNumber=c,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,c){return n instanceof Pt?this.checkEqualitity(n,c)&&n.wasReversed===c.wasReversed:!1}checkEqualitity(n,c){if(!n||!c)return;let u;return n.forEach((m,g)=>{c.forEach(v=>{m.getLeftChar().getValue()===v.getLeftChar().getValue()&&m.getRightChar().getValue()===v.getRightChar().getValue()&&m.getFinderPatter().getValue()===v.getFinderPatter().getValue()&&(u=!0)})}),u}}class it extends Yr{constructor(n){super(...arguments),this.pairs=new Array(it.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,c,u){this.pairs.length=0,this.startFromEven=!1;try{return it.constructResult(this.decodeRow2pairs(n,c))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,it.constructResult(this.decodeRow2pairs(n,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,c){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,n))}catch(g){if(g instanceof G){if(!this.pairs.length)throw new G;u=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(n,!1),m){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new G}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return n&&(this.rows=this.rows.reverse()),c}checkRows(n,c){for(let u=c;u<this.rows.length;u++){let m=this.rows[u];this.pairs.length=0;for(let v of n)this.pairs.push(v.getPairs());if(this.pairs.push(m.getPairs()),!it.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(n);g.push(m);try{return this.checkRows(g,u+1)}catch(v){this.verbose&&console.log(v)}}throw new G}static isValidSequence(n){for(let c of it.FINDER_PATTERN_SEQUENCES){if(n.length>c.length)continue;let u=!0;for(let m=0;m<n.length;m++)if(n[m].getFinderPattern().getValue()!=c[m]){u=!1;break}if(u)return!0}return!1}storeRow(n,c){let u=0,m=!1,g=!1;for(;u<this.rows.length;){let v=this.rows[u];if(v.getRowNumber()>n){g=v.isEquivalent(this.pairs);break}m=v.isEquivalent(this.pairs),u++}g||m||it.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Pt(this.pairs,n,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,c){for(let u of c)if(u.getPairs().length!==n.length){for(let m of u.getPairs())for(let g of n)if(jt.equals(m,g))break}}static isPartialRow(n,c){for(let u of c){let m=!0;for(let g of n){let v=!1;for(let N of u.getPairs())if(g.equals(N)){v=!0;break}if(!v){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(n){let c=la.buildBitArray(n),m=wt(c).parseInformation(),g=n[0].getFinderPattern().getResultPoints(),v=n[n.length-1].getFinderPattern().getResultPoints(),N=[g[0],g[1],v[0],v[1]];return new se(m,null,null,N,K.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),c=n.getLeftChar(),u=n.getRightChar();if(u==null)return!1;let m=u.getChecksumPortion(),g=2;for(let N=1;N<this.pairs.size();++N){let S=this.pairs.get(N);m+=S.getLeftChar().getChecksumPortion(),g++;let F=S.getRightChar();F!=null&&(m+=F.getChecksumPortion(),g++)}return m%=211,211*(g-4)+m==c.getValue()}static getNextSecondBar(n,c){let u;return n.get(c)?(u=n.getNextUnset(c),u=n.getNextSet(u)):(u=n.getNextSet(c),u=n.getNextUnset(u)),u}retrieveNextPair(n,c,u){let m=c.length%2==0;this.startFromEven&&(m=!m);let g,v=!0,N=-1;do this.findNextPair(n,c,N),g=this.parseFoundFinderPattern(n,u,m),g==null?N=it.getNextSecondBar(n,this.startEnd[0]):v=!1;while(v);let S=this.decodeDataCharacter(n,g,m,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new G;let F;try{F=this.decodeDataCharacter(n,g,m,!1)}catch(V){F=null,this.verbose&&console.log(V)}return new jt(S,F,g,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,c,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v;u>=0?v=u:this.isEmptyPair(c)?v=0:v=c[c.length-1].getFinderPattern().getStartEnd()[1];let N=c.length%2!=0;this.startFromEven&&(N=!N);let S=!1;for(;v<g&&(S=!n.get(v),!!S);)v++;let F=0,V=v;for(let te=v;te<g;te++)if(n.get(te)!=S)m[F]++;else{if(F==3){if(N&&it.reverseCounters(m),it.isFinderPattern(m)){this.startEnd[0]=V,this.startEnd[1]=te;return}N&&it.reverseCounters(m),V+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,F--}else F++;m[F]=1,S=!S}throw new G}static reverseCounters(n){let c=n.length;for(let u=0;u<c/2;++u){let m=n[u];n[u]=n[c-u-1],n[c-u-1]=m}}parseFoundFinderPattern(n,c,u){let m,g,v;if(u){let F=this.startEnd[0]-1;for(;F>=0&&!n.get(F);)F--;F++,m=this.startEnd[0]-F,g=F,v=this.startEnd[1]}else g=this.startEnd[0],v=n.getNextUnset(this.startEnd[1]+1),m=v-this.startEnd[1];let N=this.getDecodeFinderCounters();A.arraycopy(N,0,N,1,N.length-1),N[0]=m;let S;try{S=this.parseFinderValue(N,it.FINDER_PATTERNS)}catch{return null}return new bn(S,[g,v],g,v,c)}decodeDataCharacter(n,c,u,m){let g=this.getDataCharacterCounters();for(let Rr=0;Rr<g.length;Rr++)g[Rr]=0;if(m)it.recordPatternInReverse(n,c.getStartEnd()[0],g);else{it.recordPattern(n,c.getStartEnd()[1],g);for(let Rr=0,Fa=g.length-1;Rr<Fa;Rr++,Fa--){let is=g[Rr];g[Rr]=g[Fa],g[Fa]=is}}let v=17,N=pe.sum(new Int32Array(g))/v,S=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(N-S)/S>.3)throw new G;let F=this.getOddCounts(),V=this.getEvenCounts(),te=this.getOddRoundingErrors(),fe=this.getEvenRoundingErrors();for(let Rr=0;Rr<g.length;Rr++){let Fa=1*g[Rr]/N,is=Fa+.5;if(is<1){if(Fa<.3)throw new G;is=1}else if(is>8){if(Fa>8.7)throw new G;is=8}let hi=Rr/2;(Rr&1)==0?(F[hi]=is,te[hi]=Fa-is):(V[hi]=is,fe[hi]=Fa-is)}this.adjustOddEvenCounts(v);let je=4*c.getValue()+(u?0:2)+(m?0:1)-1,De=0,Re=0;for(let Rr=F.length-1;Rr>=0;Rr--){if(it.isNotA1left(c,u,m)){let Fa=it.WEIGHTS[je][2*Rr];Re+=F[Rr]*Fa}De+=F[Rr]}let Xe=0;for(let Rr=V.length-1;Rr>=0;Rr--)if(it.isNotA1left(c,u,m)){let Fa=it.WEIGHTS[je][2*Rr+1];Xe+=V[Rr]*Fa}let et=Re+Xe;if((De&1)!=0||De>13||De<4)throw new G;let gt=(13-De)/2,vt=it.SYMBOL_WIDEST[gt],ht=9-vt,Kt=ta.getRSSvalue(F,vt,!0),$t=ta.getRSSvalue(V,ht,!1),$a=it.EVEN_TOTAL_SUBSET[gt],Rs=it.GSUM[gt],ns=Kt*$a+$t+Rs;return new ps(ns,et)}static isNotA1left(n,c,u){return!(n.getValue()==0&&c&&u)}adjustOddEvenCounts(n){let c=pe.sum(new Int32Array(this.getOddCounts())),u=pe.sum(new Int32Array(this.getEvenCounts())),m=!1,g=!1;c>13?g=!0:c<4&&(m=!0);let v=!1,N=!1;u>13?N=!0:u<4&&(v=!0);let S=c+u-n,F=(c&1)==1,V=(u&1)==0;if(S==1)if(F){if(V)throw new G;g=!0}else{if(!V)throw new G;N=!0}else if(S==-1)if(F){if(V)throw new G;m=!0}else{if(!V)throw new G;v=!0}else if(S==0){if(F){if(!V)throw new G;c<u?(m=!0,N=!0):(g=!0,v=!0)}else if(V)throw new G}else throw new G;if(m){if(g)throw new G;it.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&it.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(N)throw new G;it.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&it.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}it.SYMBOL_WIDEST=[7,5,4,3,1],it.EVEN_TOTAL_SUBSET=[4,20,52,104,204],it.GSUM=[0,348,1388,2948,3988],it.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],it.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],it.FINDER_PAT_A=0,it.FINDER_PAT_B=1,it.FINDER_PAT_C=2,it.FINDER_PAT_D=3,it.FINDER_PAT_E=4,it.FINDER_PAT_F=5,it.FINDER_PATTERN_SEQUENCES=[[it.FINDER_PAT_A,it.FINDER_PAT_A],[it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B],[it.FINDER_PAT_A,it.FINDER_PAT_C,it.FINDER_PAT_B,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_C],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_E,it.FINDER_PAT_B,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F],[it.FINDER_PAT_A,it.FINDER_PAT_A,it.FINDER_PAT_B,it.FINDER_PAT_B,it.FINDER_PAT_C,it.FINDER_PAT_D,it.FINDER_PAT_D,it.FINDER_PAT_E,it.FINDER_PAT_E,it.FINDER_PAT_F,it.FINDER_PAT_F]],it.MAX_PAIRS=11;class _r extends ps{constructor(n,c,u){super(n,c),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class zt extends Yr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,c,u){const m=this.decodePair(c,!1,n,u);zt.addOrTally(this.possibleLeftPairs,m),c.reverse();let g=this.decodePair(c,!0,n,u);zt.addOrTally(this.possibleRightPairs,g),c.reverse();for(let v of this.possibleLeftPairs)if(v.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&zt.checkChecksum(v,N))return zt.constructResult(v,N)}throw new G}static addOrTally(n,c){if(c==null)return;let u=!1;for(let m of n)if(m.getValue()===c.getValue()){m.incrementCount(),u=!0;break}u||n.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,c){let u=4537077*n.getValue()+c.getValue(),m=new String(u).toString(),g=new ue;for(let F=13-m.length;F>0;F--)g.append("0");g.append(m);let v=0;for(let F=0;F<13;F++){let V=g.charAt(F).charCodeAt(0)-48;v+=(F&1)===0?3*V:V}v=10-v%10,v===10&&(v=0),g.append(v.toString());let N=n.getFinderPattern().getResultPoints(),S=c.getFinderPattern().getResultPoints();return new se(g.toString(),null,0,[N[0],N[1],S[0],S[1]],K.RSS_14,new Date().getTime())}static checkChecksum(n,c){let u=(n.getChecksumPortion()+16*c.getChecksumPortion())%79,m=9*n.getFinderPattern().getValue()+c.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,u===m}decodePair(n,c,u,m){try{let g=this.findFinderPattern(n,c),v=this.parseFoundFinderPattern(n,u,c,g),N=m==null?null:m.get(z.NEED_RESULT_POINT_CALLBACK);if(N!=null){let V=(g[0]+g[1])/2;c&&(V=n.getSize()-1-V),N.foundPossibleResultPoint(new ze(V,u))}let S=this.decodeDataCharacter(n,v,!0),F=this.decodeDataCharacter(n,v,!1);return new _r(1597*S.getValue()+F.getValue(),S.getChecksumPortion()+4*F.getChecksumPortion(),v)}catch{return null}}decodeDataCharacter(n,c,u){let m=this.getDataCharacterCounters();for(let Xe=0;Xe<m.length;Xe++)m[Xe]=0;if(u)yt.recordPatternInReverse(n,c.getStartEnd()[0],m);else{yt.recordPattern(n,c.getStartEnd()[1]+1,m);for(let Xe=0,et=m.length-1;Xe<et;Xe++,et--){let gt=m[Xe];m[Xe]=m[et],m[et]=gt}}let g=u?16:15,v=pe.sum(new Int32Array(m))/g,N=this.getOddCounts(),S=this.getEvenCounts(),F=this.getOddRoundingErrors(),V=this.getEvenRoundingErrors();for(let Xe=0;Xe<m.length;Xe++){let et=m[Xe]/v,gt=Math.floor(et+.5);gt<1?gt=1:gt>8&&(gt=8);let vt=Math.floor(Xe/2);(Xe&1)===0?(N[vt]=gt,F[vt]=et-gt):(S[vt]=gt,V[vt]=et-gt)}this.adjustOddEvenCounts(u,g);let te=0,fe=0;for(let Xe=N.length-1;Xe>=0;Xe--)fe*=9,fe+=N[Xe],te+=N[Xe];let je=0,De=0;for(let Xe=S.length-1;Xe>=0;Xe--)je*=9,je+=S[Xe],De+=S[Xe];let Re=fe+3*je;if(u){if((te&1)!==0||te>12||te<4)throw new G;let Xe=(12-te)/2,et=zt.OUTSIDE_ODD_WIDEST[Xe],gt=9-et,vt=ta.getRSSvalue(N,et,!1),ht=ta.getRSSvalue(S,gt,!0),Kt=zt.OUTSIDE_EVEN_TOTAL_SUBSET[Xe],$t=zt.OUTSIDE_GSUM[Xe];return new ps(vt*Kt+ht+$t,Re)}else{if((De&1)!==0||De>10||De<4)throw new G;let Xe=(10-De)/2,et=zt.INSIDE_ODD_WIDEST[Xe],gt=9-et,vt=ta.getRSSvalue(N,et,!0),ht=ta.getRSSvalue(S,gt,!1),Kt=zt.INSIDE_ODD_TOTAL_SUBSET[Xe],$t=zt.INSIDE_GSUM[Xe];return new ps(ht*Kt+vt+$t,Re)}}findFinderPattern(n,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let m=n.getSize(),g=!1,v=0;for(;v<m&&(g=!n.get(v),c!==g);)v++;let N=0,S=v;for(let F=v;F<m;F++)if(n.get(F)!==g)u[N]++;else{if(N===3){if(Yr.isFinderPattern(u))return[S,F];S+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,N--}else N++;u[N]=1,g=!g}throw new G}parseFoundFinderPattern(n,c,u,m){let g=n.get(m[0]),v=m[0]-1;for(;v>=0&&g!==n.get(v);)v--;v++;const N=m[0]-v,S=this.getDecodeFinderCounters(),F=new Int32Array(S.length);A.arraycopy(S,0,F,1,S.length-1),F[0]=N;const V=this.parseFinderValue(F,zt.FINDER_PATTERNS);let te=v,fe=m[1];return u&&(te=n.getSize()-1-te,fe=n.getSize()-1-fe),new bn(V,[v,m[1]],te,fe,c)}adjustOddEvenCounts(n,c){let u=pe.sum(new Int32Array(this.getOddCounts())),m=pe.sum(new Int32Array(this.getEvenCounts())),g=!1,v=!1,N=!1,S=!1;n?(u>12?v=!0:u<4&&(g=!0),m>12?S=!0:m<4&&(N=!0)):(u>11?v=!0:u<5&&(g=!0),m>10?S=!0:m<4&&(N=!0));let F=u+m-c,V=(u&1)===(n?1:0),te=(m&1)===1;if(F===1)if(V){if(te)throw new G;v=!0}else{if(!te)throw new G;S=!0}else if(F===-1)if(V){if(te)throw new G;g=!0}else{if(!te)throw new G;N=!0}else if(F===0){if(V){if(!te)throw new G;u<m?(g=!0,S=!0):(v=!0,N=!0)}else if(te)throw new G}else throw new G;if(g){if(v)throw new G;Yr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&Yr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(S)throw new G;Yr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&Yr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}zt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],zt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],zt.OUTSIDE_GSUM=[0,161,961,2015,2715],zt.INSIDE_GSUM=[0,336,1036,1516],zt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],zt.INSIDE_ODD_WIDEST=[2,4,6,8],zt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ts extends yt{constructor(n,c){super(),this.readers=[],this.verbose=c===!0;const u=n?n.get(z.POSSIBLE_FORMATS):null,m=n&&n.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(K.EAN_13)||u.includes(K.UPC_A)||u.includes(K.EAN_8)||u.includes(K.UPC_E))&&this.readers.push(new zs(n)),u.includes(K.CODE_39)&&this.readers.push(new Et(m)),u.includes(K.CODE_128)&&this.readers.push(new Be),u.includes(K.ITF)&&this.readers.push(new Bt),u.includes(K.RSS_14)&&this.readers.push(new zt),u.includes(K.RSS_EXPANDED)&&this.readers.push(new it(this.verbose))):(this.readers.push(new zs(n)),this.readers.push(new Et),this.readers.push(new zs(n)),this.readers.push(new Be),this.readers.push(new Bt),this.readers.push(new zt),this.readers.push(new it(this.verbose)))}decodeRow(n,c,u){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(n,c,u)}catch{}throw new G}reset(){this.readers.forEach(n=>n.reset())}}class Bn extends X{constructor(n=500,c){super(new ts(c),n,c)}}class Qt{constructor(n,c,u){this.ecCodewords=n,this.ecBlocks=[c],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Jt{constructor(n,c){this.count=n,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class er{constructor(n,c,u,m,g,v){this.versionNumber=n,this.symbolSizeRows=c,this.symbolSizeColumns=u,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=g,this.ecBlocks=v;let N=0;const S=v.getECCodewords(),F=v.getECBlocks();for(let V of F)N+=V.getCount()*(V.getDataCodewords()+S);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,c){if((n&1)!==0||(c&1)!==0)throw new L;for(let u of er.VERSIONS)if(u.symbolSizeRows===n&&u.symbolSizeColumns===c)return u;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new er(1,10,10,8,8,new Qt(5,new Jt(1,3))),new er(2,12,12,10,10,new Qt(7,new Jt(1,5))),new er(3,14,14,12,12,new Qt(10,new Jt(1,8))),new er(4,16,16,14,14,new Qt(12,new Jt(1,12))),new er(5,18,18,16,16,new Qt(14,new Jt(1,18))),new er(6,20,20,18,18,new Qt(18,new Jt(1,22))),new er(7,22,22,20,20,new Qt(20,new Jt(1,30))),new er(8,24,24,22,22,new Qt(24,new Jt(1,36))),new er(9,26,26,24,24,new Qt(28,new Jt(1,44))),new er(10,32,32,14,14,new Qt(36,new Jt(1,62))),new er(11,36,36,16,16,new Qt(42,new Jt(1,86))),new er(12,40,40,18,18,new Qt(48,new Jt(1,114))),new er(13,44,44,20,20,new Qt(56,new Jt(1,144))),new er(14,48,48,22,22,new Qt(68,new Jt(1,174))),new er(15,52,52,24,24,new Qt(42,new Jt(2,102))),new er(16,64,64,14,14,new Qt(56,new Jt(2,140))),new er(17,72,72,16,16,new Qt(36,new Jt(4,92))),new er(18,80,80,18,18,new Qt(48,new Jt(4,114))),new er(19,88,88,20,20,new Qt(56,new Jt(4,144))),new er(20,96,96,22,22,new Qt(68,new Jt(4,174))),new er(21,104,104,24,24,new Qt(56,new Jt(6,136))),new er(22,120,120,18,18,new Qt(68,new Jt(6,175))),new er(23,132,132,20,20,new Qt(62,new Jt(8,163))),new er(24,144,144,22,22,new Qt(62,new Jt(8,156),new Jt(2,155))),new er(25,8,18,6,16,new Qt(7,new Jt(1,5))),new er(26,8,32,6,14,new Qt(11,new Jt(1,10))),new er(27,12,26,10,24,new Qt(14,new Jt(1,16))),new er(28,12,36,10,16,new Qt(18,new Jt(1,22))),new er(29,16,36,14,16,new Qt(24,new Jt(1,32))),new er(30,16,48,14,22,new Qt(28,new Jt(1,49)))]}}er.VERSIONS=er.buildVersions();class ys{constructor(n){const c=n.getHeight();if(c<8||c>144||(c&1)!==0)throw new L;this.version=ys.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new de(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const c=n.getHeight(),u=n.getWidth();return er.getVersionForDimensions(c,u)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let c=0,u=4,m=0;const g=this.mappingBitMatrix.getHeight(),v=this.mappingBitMatrix.getWidth();let N=!1,S=!1,F=!1,V=!1;do if(u===g&&m===0&&!N)n[c++]=this.readCorner1(g,v)&255,u-=2,m+=2,N=!0;else if(u===g-2&&m===0&&(v&3)!==0&&!S)n[c++]=this.readCorner2(g,v)&255,u-=2,m+=2,S=!0;else if(u===g+4&&m===2&&(v&7)===0&&!F)n[c++]=this.readCorner3(g,v)&255,u-=2,m+=2,F=!0;else if(u===g-2&&m===0&&(v&7)===4&&!V)n[c++]=this.readCorner4(g,v)&255,u-=2,m+=2,V=!0;else{do u<g&&m>=0&&!this.readMappingMatrix.get(m,u)&&(n[c++]=this.readUtah(u,m,g,v)&255),u-=2,m+=2;while(u>=0&&m<v);u+=1,m+=3;do u>=0&&m<v&&!this.readMappingMatrix.get(m,u)&&(n[c++]=this.readUtah(u,m,g,v)&255),u+=2,m-=2;while(u<g&&m>=0);u+=3,m+=1}while(u<g||m<v);if(c!==this.version.getTotalCodewords())throw new L;return n}readModule(n,c,u,m){return n<0&&(n+=u,c+=4-(u+4&7)),c<0&&(c+=m,n+=4-(m+4&7)),this.readMappingMatrix.set(c,n),this.mappingBitMatrix.get(c,n)}readUtah(n,c,u,m){let g=0;return this.readModule(n-2,c-2,u,m)&&(g|=1),g<<=1,this.readModule(n-2,c-1,u,m)&&(g|=1),g<<=1,this.readModule(n-1,c-2,u,m)&&(g|=1),g<<=1,this.readModule(n-1,c-1,u,m)&&(g|=1),g<<=1,this.readModule(n-1,c,u,m)&&(g|=1),g<<=1,this.readModule(n,c-2,u,m)&&(g|=1),g<<=1,this.readModule(n,c-1,u,m)&&(g|=1),g<<=1,this.readModule(n,c,u,m)&&(g|=1),g}readCorner1(n,c){let u=0;return this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,1,n,c)&&(u|=1),u<<=1,this.readModule(n-1,2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u<<=1,this.readModule(2,c-1,n,c)&&(u|=1),u<<=1,this.readModule(3,c-1,n,c)&&(u|=1),u}readCorner2(n,c){let u=0;return this.readModule(n-3,0,n,c)&&(u|=1),u<<=1,this.readModule(n-2,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(0,c-4,n,c)&&(u|=1),u<<=1,this.readModule(0,c-3,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u}readCorner3(n,c){let u=0;return this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,c-1,n,c)&&(u|=1),u<<=1,this.readModule(0,c-3,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-3,n,c)&&(u|=1),u<<=1,this.readModule(1,c-2,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u}readCorner4(n,c){let u=0;return this.readModule(n-3,0,n,c)&&(u|=1),u<<=1,this.readModule(n-2,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u<<=1,this.readModule(2,c-1,n,c)&&(u|=1),u<<=1,this.readModule(3,c-1,n,c)&&(u|=1),u}extractDataRegion(n){const c=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(n.getHeight()!==c)throw new j("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),v=c/m|0,N=u/g|0,S=v*m,F=N*g,V=new de(F,S);for(let te=0;te<v;++te){const fe=te*m;for(let je=0;je<N;++je){const De=je*g;for(let Re=0;Re<m;++Re){const Xe=te*(m+2)+1+Re,et=fe+Re;for(let gt=0;gt<g;++gt){const vt=je*(g+2)+1+gt;if(n.get(vt,Xe)){const ht=De+gt;V.set(ht,et)}}}}}return V}}class Eo{constructor(n,c){this.numDataCodewords=n,this.codewords=c}static getDataBlocks(n,c){const u=c.getECBlocks();let m=0;const g=u.getECBlocks();for(let Re of g)m+=Re.getCount();const v=new Array(m);let N=0;for(let Re of g)for(let Xe=0;Xe<Re.getCount();Xe++){const et=Re.getDataCodewords(),gt=u.getECCodewords()+et;v[N++]=new Eo(et,new Uint8Array(gt))}const F=v[0].codewords.length-u.getECCodewords(),V=F-1;let te=0;for(let Re=0;Re<V;Re++)for(let Xe=0;Xe<N;Xe++)v[Xe].codewords[Re]=n[te++];const fe=c.getVersionNumber()===24,je=fe?8:N;for(let Re=0;Re<je;Re++)v[Re].codewords[F-1]=n[te++];const De=v[0].codewords.length;for(let Re=F;Re<De;Re++)for(let Xe=0;Xe<N;Xe++){const et=fe?(Xe+8)%N:Xe,gt=fe&&et>7?Re-1:Re;v[et].codewords[gt]=n[te++]}if(te!==n.length)throw new j;return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class rs{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new j(""+n);let c=0,u=this.bitOffset,m=this.byteOffset;const g=this.bytes;if(u>0){const v=8-u,N=n<v?n:v,S=v-N,F=255>>8-N<<S;c=(g[m]&F)>>S,n-=N,u+=N,u===8&&(u=0,m++)}if(n>0){for(;n>=8;)c=c<<8|g[m]&255,m++,n-=8;if(n>0){const v=8-n,N=255>>v<<v;c=c<<n|(g[m]&N)>>v,u+=n}}return this.bitOffset=u,this.byteOffset=m,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var oa;(function(ee){ee[ee.PAD_ENCODE=0]="PAD_ENCODE",ee[ee.ASCII_ENCODE=1]="ASCII_ENCODE",ee[ee.C40_ENCODE=2]="C40_ENCODE",ee[ee.TEXT_ENCODE=3]="TEXT_ENCODE",ee[ee.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",ee[ee.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",ee[ee.BASE256_ENCODE=6]="BASE256_ENCODE"})(oa||(oa={}));class Ln{static decode(n){const c=new rs(n),u=new ue,m=new ue,g=new Array;let v=oa.ASCII_ENCODE;do if(v===oa.ASCII_ENCODE)v=this.decodeAsciiSegment(c,u,m);else{switch(v){case oa.C40_ENCODE:this.decodeC40Segment(c,u);break;case oa.TEXT_ENCODE:this.decodeTextSegment(c,u);break;case oa.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,u);break;case oa.EDIFACT_ENCODE:this.decodeEdifactSegment(c,u);break;case oa.BASE256_ENCODE:this.decodeBase256Segment(c,u,g);break;default:throw new L}v=oa.ASCII_ENCODE}while(v!==oa.PAD_ENCODE&&c.available()>0);return m.length()>0&&u.append(m.toString()),new Ve(n,u.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(n,c,u){let m=!1;do{let g=n.readBits(8);if(g===0)throw new L;if(g<=128)return m&&(g+=128),c.append(String.fromCharCode(g-1)),oa.ASCII_ENCODE;if(g===129)return oa.PAD_ENCODE;if(g<=229){const v=g-130;v<10&&c.append("0"),c.append(""+v)}else switch(g){case 230:return oa.C40_ENCODE;case 231:return oa.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:c.append("[)>05"),u.insert(0,"");break;case 237:c.append("[)>06"),u.insert(0,"");break;case 238:return oa.ANSIX12_ENCODE;case 239:return oa.TEXT_ENCODE;case 240:return oa.EDIFACT_ENCODE;case 241:break;default:if(g!==254||n.available()!==0)throw new L;break}}while(n.available()>0);return oa.ASCII_ENCODE}static decodeC40Segment(n,c){let u=!1;const m=[];let g=0;do{if(n.available()===8)return;const v=n.readBits(8);if(v===254)return;this.parseTwoBytes(v,n.readBits(8),m);for(let N=0;N<3;N++){const S=m[N];switch(g){case 0:if(S<3)g=S+1;else if(S<this.C40_BASIC_SET_CHARS.length){const F=this.C40_BASIC_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else throw new L;break;case 1:u?(c.append(String.fromCharCode(S+128)),u=!1):c.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.C40_SHIFT2_SET_CHARS.length){const F=this.C40_SHIFT2_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else switch(S){case 27:c.append("");break;case 30:u=!0;break;default:throw new L}g=0;break;case 3:u?(c.append(String.fromCharCode(S+224)),u=!1):c.append(String.fromCharCode(S+96)),g=0;break;default:throw new L}}}while(n.available()>0)}static decodeTextSegment(n,c){let u=!1,m=[],g=0;do{if(n.available()===8)return;const v=n.readBits(8);if(v===254)return;this.parseTwoBytes(v,n.readBits(8),m);for(let N=0;N<3;N++){const S=m[N];switch(g){case 0:if(S<3)g=S+1;else if(S<this.TEXT_BASIC_SET_CHARS.length){const F=this.TEXT_BASIC_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else throw new L;break;case 1:u?(c.append(String.fromCharCode(S+128)),u=!1):c.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.TEXT_SHIFT2_SET_CHARS.length){const F=this.TEXT_SHIFT2_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else switch(S){case 27:c.append("");break;case 30:u=!0;break;default:throw new L}g=0;break;case 3:if(S<this.TEXT_SHIFT3_SET_CHARS.length){const F=this.TEXT_SHIFT3_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F),g=0}else throw new L;break;default:throw new L}}}while(n.available()>0)}static decodeAnsiX12Segment(n,c){const u=[];do{if(n.available()===8)return;const m=n.readBits(8);if(m===254)return;this.parseTwoBytes(m,n.readBits(8),u);for(let g=0;g<3;g++){const v=u[g];switch(v){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(v<14)c.append(String.fromCharCode(v+44));else if(v<40)c.append(String.fromCharCode(v+51));else throw new L;break}}}while(n.available()>0)}static parseTwoBytes(n,c,u){let m=(n<<8)+c-1,g=Math.floor(m/1600);u[0]=g,m-=g*1600,g=Math.floor(m/40),u[1]=g,u[2]=m-g*40}static decodeEdifactSegment(n,c){do{if(n.available()<=16)return;for(let u=0;u<4;u++){let m=n.readBits(6);if(m===31){const g=8-n.getBitOffset();g!==8&&n.readBits(g);return}(m&32)===0&&(m|=64),c.append(String.fromCharCode(m))}}while(n.available()>0)}static decodeBase256Segment(n,c,u){let m=1+n.getByteOffset();const g=this.unrandomize255State(n.readBits(8),m++);let v;if(g===0?v=n.available()/8|0:g<250?v=g:v=250*(g-249)+this.unrandomize255State(n.readBits(8),m++),v<0)throw new L;const N=new Uint8Array(v);for(let S=0;S<v;S++){if(n.available()<8)throw new L;N[S]=this.unrandomize255State(n.readBits(8),m++)}u.push(N);try{c.append(ae.decode(N,Y.ISO88591))}catch(S){throw new ke("Platform does not support required encoding: "+S.message)}}static unrandomize255State(n,c){const u=149*c%255+1,m=n-u;return m>=0?m:m+256}}Ln.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ln.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ln.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ln.TEXT_SHIFT2_SET_CHARS=Ln.C40_SHIFT2_SET_CHARS,Ln.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class _o{constructor(){this.rsDecoder=new Qe(Ne.DATA_MATRIX_FIELD_256)}decode(n){const c=new ys(n),u=c.getVersion(),m=c.readCodewords(),g=Eo.getDataBlocks(m,u);let v=0;for(let F of g)v+=F.getNumDataCodewords();const N=new Uint8Array(v),S=g.length;for(let F=0;F<S;F++){const V=g[F],te=V.getCodewords(),fe=V.getNumDataCodewords();this.correctErrors(te,fe);for(let je=0;je<fe;je++)N[je*S+F]=te[je]}return Ln.decode(N)}correctErrors(n,c){const u=new Int32Array(n);try{this.rsDecoder.decode(u,n.length-c)}catch{throw new _}for(let m=0;m<c;m++)n[m]=u[m]}}class Zr{constructor(n){this.image=n,this.rectangleDetector=new nt(this.image)}detect(){const n=this.rectangleDetector.detect();let c=this.detectSolid1(n);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new G;c=this.shiftToModuleCenter(c);const u=c[0],m=c[1],g=c[2],v=c[3];let N=this.transitionsBetween(u,v)+1,S=this.transitionsBetween(g,v)+1;(N&1)===1&&(N+=1),(S&1)===1&&(S+=1),4*N<7*S&&4*S<7*N&&(N=S=Math.max(N,S));let F=Zr.sampleGrid(this.image,u,m,g,v,N,S);return new Pe(F,[u,m,g,v])}static shiftPoint(n,c,u){let m=(c.getX()-n.getX())/(u+1),g=(c.getY()-n.getY())/(u+1);return new ze(n.getX()+m,n.getY()+g)}static moveAway(n,c,u){let m=n.getX(),g=n.getY();return m<c?m-=1:m+=1,g<u?g-=1:g+=1,new ze(m,g)}detectSolid1(n){let c=n[0],u=n[1],m=n[3],g=n[2],v=this.transitionsBetween(c,u),N=this.transitionsBetween(u,m),S=this.transitionsBetween(m,g),F=this.transitionsBetween(g,c),V=v,te=[g,c,u,m];return V>N&&(V=N,te[0]=c,te[1]=u,te[2]=m,te[3]=g),V>S&&(V=S,te[0]=u,te[1]=m,te[2]=g,te[3]=c),V>F&&(te[0]=m,te[1]=g,te[2]=c,te[3]=u),te}detectSolid2(n){let c=n[0],u=n[1],m=n[2],g=n[3],v=this.transitionsBetween(c,g),N=Zr.shiftPoint(u,m,(v+1)*4),S=Zr.shiftPoint(m,u,(v+1)*4),F=this.transitionsBetween(N,c),V=this.transitionsBetween(S,g);return F<V?(n[0]=c,n[1]=u,n[2]=m,n[3]=g):(n[0]=u,n[1]=m,n[2]=g,n[3]=c),n}correctTopRight(n){let c=n[0],u=n[1],m=n[2],g=n[3],v=this.transitionsBetween(c,g),N=this.transitionsBetween(u,g),S=Zr.shiftPoint(c,u,(N+1)*4),F=Zr.shiftPoint(m,u,(v+1)*4);v=this.transitionsBetween(S,g),N=this.transitionsBetween(F,g);let V=new ze(g.getX()+(m.getX()-u.getX())/(v+1),g.getY()+(m.getY()-u.getY())/(v+1)),te=new ze(g.getX()+(c.getX()-u.getX())/(N+1),g.getY()+(c.getY()-u.getY())/(N+1));if(!this.isValid(V))return this.isValid(te)?te:null;if(!this.isValid(te))return V;let fe=this.transitionsBetween(S,V)+this.transitionsBetween(F,V),je=this.transitionsBetween(S,te)+this.transitionsBetween(F,te);return fe>je?V:te}shiftToModuleCenter(n){let c=n[0],u=n[1],m=n[2],g=n[3],v=this.transitionsBetween(c,g)+1,N=this.transitionsBetween(m,g)+1,S=Zr.shiftPoint(c,u,N*4),F=Zr.shiftPoint(m,u,v*4);v=this.transitionsBetween(S,g)+1,N=this.transitionsBetween(F,g)+1,(v&1)===1&&(v+=1),(N&1)===1&&(N+=1);let V=(c.getX()+u.getX()+m.getX()+g.getX())/4,te=(c.getY()+u.getY()+m.getY()+g.getY())/4;c=Zr.moveAway(c,V,te),u=Zr.moveAway(u,V,te),m=Zr.moveAway(m,V,te),g=Zr.moveAway(g,V,te);let fe,je;return S=Zr.shiftPoint(c,u,N*4),S=Zr.shiftPoint(S,g,v*4),fe=Zr.shiftPoint(u,c,N*4),fe=Zr.shiftPoint(fe,m,v*4),F=Zr.shiftPoint(m,g,N*4),F=Zr.shiftPoint(F,u,v*4),je=Zr.shiftPoint(g,m,N*4),je=Zr.shiftPoint(je,c,v*4),[S,fe,F,je]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,c,u,m,g,v,N){return tr.getInstance().sampleGrid(n,v,N,.5,.5,v-.5,.5,v-.5,N-.5,.5,N-.5,c.getX(),c.getY(),g.getX(),g.getY(),m.getX(),m.getY(),u.getX(),u.getY())}transitionsBetween(n,c){let u=Math.trunc(n.getX()),m=Math.trunc(n.getY()),g=Math.trunc(c.getX()),v=Math.trunc(c.getY()),N=Math.abs(v-m)>Math.abs(g-u);if(N){let Re=u;u=m,m=Re,Re=g,g=v,v=Re}let S=Math.abs(g-u),F=Math.abs(v-m),V=-S/2,te=m<v?1:-1,fe=u<g?1:-1,je=0,De=this.image.get(N?m:u,N?u:m);for(let Re=u,Xe=m;Re!==g;Re+=fe){let et=this.image.get(N?Xe:Re,N?Re:Xe);if(et!==De&&(je++,De=et),V+=F,V>0){if(Xe===v)break;Xe+=te,V-=S}}return je}}class Hs{constructor(){this.decoder=new _o}decode(n,c=null){let u,m;if(c!=null&&c.has(z.PURE_BARCODE)){const F=Hs.extractPureBits(n.getBlackMatrix());u=this.decoder.decode(F),m=Hs.NO_POINTS}else{const F=new Zr(n.getBlackMatrix()).detect();u=this.decoder.decode(F.getBits()),m=F.getPoints()}const g=u.getRawBytes(),v=new se(u.getText(),g,8*g.length,m,K.DATA_MATRIX,A.currentTimeMillis()),N=u.getByteSegments();N!=null&&v.putMetadata(we.BYTE_SEGMENTS,N);const S=u.getECLevel();return S!=null&&v.putMetadata(we.ERROR_CORRECTION_LEVEL,S),v}reset(){}static extractPureBits(n){const c=n.getTopLeftOnBit(),u=n.getBottomRightOnBit();if(c==null||u==null)throw new G;const m=this.moduleSize(c,n);let g=c[1];const v=u[1];let N=c[0];const F=(u[0]-N+1)/m,V=(v-g+1)/m;if(F<=0||V<=0)throw new G;const te=m/2;g+=te,N+=te;const fe=new de(F,V);for(let je=0;je<V;je++){const De=g+je*m;for(let Re=0;Re<F;Re++)n.get(N+Re*m,De)&&fe.set(Re,je)}return fe}static moduleSize(n,c){const u=c.getWidth();let m=n[0];const g=n[1];for(;m<u&&c.get(m,g);)m++;if(m===u)throw new G;const v=m-n[0];if(v===0)throw new G;return v}}Hs.NO_POINTS=[];class Ef extends X{constructor(n=500){super(new Hs,n)}}var Da;(function(ee){ee[ee.L=0]="L",ee[ee.M=1]="M",ee[ee.Q=2]="Q",ee[ee.H=3]="H"})(Da||(Da={}));class Ar{constructor(n,c,u){this.value=n,this.stringValue=c,this.bits=u,Ar.FOR_BITS.set(u,this),Ar.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return Ar.L;case"M":return Ar.M;case"Q":return Ar.Q;case"H":return Ar.H;default:throw new w(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof Ar))return!1;const c=n;return this.value===c.value}static forBits(n){if(n<0||n>=Ar.FOR_BITS.size)throw new j;return Ar.FOR_BITS.get(n)}}Ar.FOR_BITS=new Map,Ar.FOR_VALUE=new Map,Ar.L=new Ar(Da.L,"L",1),Ar.M=new Ar(Da.M,"M",0),Ar.Q=new Ar(Da.Q,"Q",3),Ar.H=new Ar(Da.H,"H",2);class Ra{constructor(n){this.errorCorrectionLevel=Ar.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,c){return D.bitCount(n^c)}static decodeFormatInformation(n,c){const u=Ra.doDecodeFormatInformation(n,c);return u!==null?u:Ra.doDecodeFormatInformation(n^Ra.FORMAT_INFO_MASK_QR,c^Ra.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,c){let u=Number.MAX_SAFE_INTEGER,m=0;for(const g of Ra.FORMAT_INFO_DECODE_LOOKUP){const v=g[0];if(v===n||v===c)return new Ra(g[1]);let N=Ra.numBitsDiffering(n,v);N<u&&(m=g[1],u=N),n!==c&&(N=Ra.numBitsDiffering(c,v),N<u&&(m=g[1],u=N))}return u<=3?new Ra(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Ra))return!1;const c=n;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Ra.FORMAT_INFO_MASK_QR=21522,Ra.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class qe{constructor(n,...c){this.ecCodewordsPerBlock=n,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const c=this.ecBlocks;for(const u of c)n+=u.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class be{constructor(n,c){this.count=n,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Tt{constructor(n,c,...u){this.versionNumber=n,this.alignmentPatternCenters=c,this.ecBlocks=u;let m=0;const g=u[0].getECCodewordsPerBlock(),v=u[0].getECBlocks();for(const N of v)m+=N.getCount()*(N.getDataCodewords()+g);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new L;try{return this.getVersionForNumber((n-17)/4)}catch{throw new L}}static getVersionForNumber(n){if(n<1||n>40)throw new j;return Tt.VERSIONS[n-1]}static decodeVersionInformation(n){let c=Number.MAX_SAFE_INTEGER,u=0;for(let m=0;m<Tt.VERSION_DECODE_INFO.length;m++){const g=Tt.VERSION_DECODE_INFO[m];if(g===n)return Tt.getVersionForNumber(m+7);const v=Ra.numBitsDiffering(n,g);v<c&&(u=m+7,c=v)}return c<=3?Tt.getVersionForNumber(u):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),c=new de(n);c.setRegion(0,0,9,9),c.setRegion(n-8,0,8,9),c.setRegion(0,n-8,9,8);const u=this.alignmentPatternCenters.length;for(let m=0;m<u;m++){const g=this.alignmentPatternCenters[m]-2;for(let v=0;v<u;v++)m===0&&(v===0||v===u-1)||m===u-1&&v===0||c.setRegion(this.alignmentPatternCenters[v]-2,g,5,5)}return c.setRegion(6,9,1,n-17),c.setRegion(9,6,n-17,1),this.versionNumber>6&&(c.setRegion(n-11,0,3,6),c.setRegion(0,n-11,6,3)),c}toString(){return""+this.versionNumber}}Tt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Tt.VERSIONS=[new Tt(1,new Int32Array(0),new qe(7,new be(1,19)),new qe(10,new be(1,16)),new qe(13,new be(1,13)),new qe(17,new be(1,9))),new Tt(2,Int32Array.from([6,18]),new qe(10,new be(1,34)),new qe(16,new be(1,28)),new qe(22,new be(1,22)),new qe(28,new be(1,16))),new Tt(3,Int32Array.from([6,22]),new qe(15,new be(1,55)),new qe(26,new be(1,44)),new qe(18,new be(2,17)),new qe(22,new be(2,13))),new Tt(4,Int32Array.from([6,26]),new qe(20,new be(1,80)),new qe(18,new be(2,32)),new qe(26,new be(2,24)),new qe(16,new be(4,9))),new Tt(5,Int32Array.from([6,30]),new qe(26,new be(1,108)),new qe(24,new be(2,43)),new qe(18,new be(2,15),new be(2,16)),new qe(22,new be(2,11),new be(2,12))),new Tt(6,Int32Array.from([6,34]),new qe(18,new be(2,68)),new qe(16,new be(4,27)),new qe(24,new be(4,19)),new qe(28,new be(4,15))),new Tt(7,Int32Array.from([6,22,38]),new qe(20,new be(2,78)),new qe(18,new be(4,31)),new qe(18,new be(2,14),new be(4,15)),new qe(26,new be(4,13),new be(1,14))),new Tt(8,Int32Array.from([6,24,42]),new qe(24,new be(2,97)),new qe(22,new be(2,38),new be(2,39)),new qe(22,new be(4,18),new be(2,19)),new qe(26,new be(4,14),new be(2,15))),new Tt(9,Int32Array.from([6,26,46]),new qe(30,new be(2,116)),new qe(22,new be(3,36),new be(2,37)),new qe(20,new be(4,16),new be(4,17)),new qe(24,new be(4,12),new be(4,13))),new Tt(10,Int32Array.from([6,28,50]),new qe(18,new be(2,68),new be(2,69)),new qe(26,new be(4,43),new be(1,44)),new qe(24,new be(6,19),new be(2,20)),new qe(28,new be(6,15),new be(2,16))),new Tt(11,Int32Array.from([6,30,54]),new qe(20,new be(4,81)),new qe(30,new be(1,50),new be(4,51)),new qe(28,new be(4,22),new be(4,23)),new qe(24,new be(3,12),new be(8,13))),new Tt(12,Int32Array.from([6,32,58]),new qe(24,new be(2,92),new be(2,93)),new qe(22,new be(6,36),new be(2,37)),new qe(26,new be(4,20),new be(6,21)),new qe(28,new be(7,14),new be(4,15))),new Tt(13,Int32Array.from([6,34,62]),new qe(26,new be(4,107)),new qe(22,new be(8,37),new be(1,38)),new qe(24,new be(8,20),new be(4,21)),new qe(22,new be(12,11),new be(4,12))),new Tt(14,Int32Array.from([6,26,46,66]),new qe(30,new be(3,115),new be(1,116)),new qe(24,new be(4,40),new be(5,41)),new qe(20,new be(11,16),new be(5,17)),new qe(24,new be(11,12),new be(5,13))),new Tt(15,Int32Array.from([6,26,48,70]),new qe(22,new be(5,87),new be(1,88)),new qe(24,new be(5,41),new be(5,42)),new qe(30,new be(5,24),new be(7,25)),new qe(24,new be(11,12),new be(7,13))),new Tt(16,Int32Array.from([6,26,50,74]),new qe(24,new be(5,98),new be(1,99)),new qe(28,new be(7,45),new be(3,46)),new qe(24,new be(15,19),new be(2,20)),new qe(30,new be(3,15),new be(13,16))),new Tt(17,Int32Array.from([6,30,54,78]),new qe(28,new be(1,107),new be(5,108)),new qe(28,new be(10,46),new be(1,47)),new qe(28,new be(1,22),new be(15,23)),new qe(28,new be(2,14),new be(17,15))),new Tt(18,Int32Array.from([6,30,56,82]),new qe(30,new be(5,120),new be(1,121)),new qe(26,new be(9,43),new be(4,44)),new qe(28,new be(17,22),new be(1,23)),new qe(28,new be(2,14),new be(19,15))),new Tt(19,Int32Array.from([6,30,58,86]),new qe(28,new be(3,113),new be(4,114)),new qe(26,new be(3,44),new be(11,45)),new qe(26,new be(17,21),new be(4,22)),new qe(26,new be(9,13),new be(16,14))),new Tt(20,Int32Array.from([6,34,62,90]),new qe(28,new be(3,107),new be(5,108)),new qe(26,new be(3,41),new be(13,42)),new qe(30,new be(15,24),new be(5,25)),new qe(28,new be(15,15),new be(10,16))),new Tt(21,Int32Array.from([6,28,50,72,94]),new qe(28,new be(4,116),new be(4,117)),new qe(26,new be(17,42)),new qe(28,new be(17,22),new be(6,23)),new qe(30,new be(19,16),new be(6,17))),new Tt(22,Int32Array.from([6,26,50,74,98]),new qe(28,new be(2,111),new be(7,112)),new qe(28,new be(17,46)),new qe(30,new be(7,24),new be(16,25)),new qe(24,new be(34,13))),new Tt(23,Int32Array.from([6,30,54,78,102]),new qe(30,new be(4,121),new be(5,122)),new qe(28,new be(4,47),new be(14,48)),new qe(30,new be(11,24),new be(14,25)),new qe(30,new be(16,15),new be(14,16))),new Tt(24,Int32Array.from([6,28,54,80,106]),new qe(30,new be(6,117),new be(4,118)),new qe(28,new be(6,45),new be(14,46)),new qe(30,new be(11,24),new be(16,25)),new qe(30,new be(30,16),new be(2,17))),new Tt(25,Int32Array.from([6,32,58,84,110]),new qe(26,new be(8,106),new be(4,107)),new qe(28,new be(8,47),new be(13,48)),new qe(30,new be(7,24),new be(22,25)),new qe(30,new be(22,15),new be(13,16))),new Tt(26,Int32Array.from([6,30,58,86,114]),new qe(28,new be(10,114),new be(2,115)),new qe(28,new be(19,46),new be(4,47)),new qe(28,new be(28,22),new be(6,23)),new qe(30,new be(33,16),new be(4,17))),new Tt(27,Int32Array.from([6,34,62,90,118]),new qe(30,new be(8,122),new be(4,123)),new qe(28,new be(22,45),new be(3,46)),new qe(30,new be(8,23),new be(26,24)),new qe(30,new be(12,15),new be(28,16))),new Tt(28,Int32Array.from([6,26,50,74,98,122]),new qe(30,new be(3,117),new be(10,118)),new qe(28,new be(3,45),new be(23,46)),new qe(30,new be(4,24),new be(31,25)),new qe(30,new be(11,15),new be(31,16))),new Tt(29,Int32Array.from([6,30,54,78,102,126]),new qe(30,new be(7,116),new be(7,117)),new qe(28,new be(21,45),new be(7,46)),new qe(30,new be(1,23),new be(37,24)),new qe(30,new be(19,15),new be(26,16))),new Tt(30,Int32Array.from([6,26,52,78,104,130]),new qe(30,new be(5,115),new be(10,116)),new qe(28,new be(19,47),new be(10,48)),new qe(30,new be(15,24),new be(25,25)),new qe(30,new be(23,15),new be(25,16))),new Tt(31,Int32Array.from([6,30,56,82,108,134]),new qe(30,new be(13,115),new be(3,116)),new qe(28,new be(2,46),new be(29,47)),new qe(30,new be(42,24),new be(1,25)),new qe(30,new be(23,15),new be(28,16))),new Tt(32,Int32Array.from([6,34,60,86,112,138]),new qe(30,new be(17,115)),new qe(28,new be(10,46),new be(23,47)),new qe(30,new be(10,24),new be(35,25)),new qe(30,new be(19,15),new be(35,16))),new Tt(33,Int32Array.from([6,30,58,86,114,142]),new qe(30,new be(17,115),new be(1,116)),new qe(28,new be(14,46),new be(21,47)),new qe(30,new be(29,24),new be(19,25)),new qe(30,new be(11,15),new be(46,16))),new Tt(34,Int32Array.from([6,34,62,90,118,146]),new qe(30,new be(13,115),new be(6,116)),new qe(28,new be(14,46),new be(23,47)),new qe(30,new be(44,24),new be(7,25)),new qe(30,new be(59,16),new be(1,17))),new Tt(35,Int32Array.from([6,30,54,78,102,126,150]),new qe(30,new be(12,121),new be(7,122)),new qe(28,new be(12,47),new be(26,48)),new qe(30,new be(39,24),new be(14,25)),new qe(30,new be(22,15),new be(41,16))),new Tt(36,Int32Array.from([6,24,50,76,102,128,154]),new qe(30,new be(6,121),new be(14,122)),new qe(28,new be(6,47),new be(34,48)),new qe(30,new be(46,24),new be(10,25)),new qe(30,new be(2,15),new be(64,16))),new Tt(37,Int32Array.from([6,28,54,80,106,132,158]),new qe(30,new be(17,122),new be(4,123)),new qe(28,new be(29,46),new be(14,47)),new qe(30,new be(49,24),new be(10,25)),new qe(30,new be(24,15),new be(46,16))),new Tt(38,Int32Array.from([6,32,58,84,110,136,162]),new qe(30,new be(4,122),new be(18,123)),new qe(28,new be(13,46),new be(32,47)),new qe(30,new be(48,24),new be(14,25)),new qe(30,new be(42,15),new be(32,16))),new Tt(39,Int32Array.from([6,26,54,82,110,138,166]),new qe(30,new be(20,117),new be(4,118)),new qe(28,new be(40,47),new be(7,48)),new qe(30,new be(43,24),new be(22,25)),new qe(30,new be(10,15),new be(67,16))),new Tt(40,Int32Array.from([6,30,58,86,114,142,170]),new qe(30,new be(19,118),new be(6,119)),new qe(28,new be(18,47),new be(31,48)),new qe(30,new be(34,24),new be(34,25)),new qe(30,new be(20,15),new be(61,16)))];var ga;(function(ee){ee[ee.DATA_MASK_000=0]="DATA_MASK_000",ee[ee.DATA_MASK_001=1]="DATA_MASK_001",ee[ee.DATA_MASK_010=2]="DATA_MASK_010",ee[ee.DATA_MASK_011=3]="DATA_MASK_011",ee[ee.DATA_MASK_100=4]="DATA_MASK_100",ee[ee.DATA_MASK_101=5]="DATA_MASK_101",ee[ee.DATA_MASK_110=6]="DATA_MASK_110",ee[ee.DATA_MASK_111=7]="DATA_MASK_111"})(ga||(ga={}));class Oa{constructor(n,c){this.value=n,this.isMasked=c}unmaskBitMatrix(n,c){for(let u=0;u<c;u++)for(let m=0;m<c;m++)this.isMasked(u,m)&&n.flip(m,u)}}Oa.values=new Map([[ga.DATA_MASK_000,new Oa(ga.DATA_MASK_000,(ee,n)=>(ee+n&1)===0)],[ga.DATA_MASK_001,new Oa(ga.DATA_MASK_001,(ee,n)=>(ee&1)===0)],[ga.DATA_MASK_010,new Oa(ga.DATA_MASK_010,(ee,n)=>n%3===0)],[ga.DATA_MASK_011,new Oa(ga.DATA_MASK_011,(ee,n)=>(ee+n)%3===0)],[ga.DATA_MASK_100,new Oa(ga.DATA_MASK_100,(ee,n)=>(Math.floor(ee/2)+Math.floor(n/3)&1)===0)],[ga.DATA_MASK_101,new Oa(ga.DATA_MASK_101,(ee,n)=>ee*n%6===0)],[ga.DATA_MASK_110,new Oa(ga.DATA_MASK_110,(ee,n)=>ee*n%6<3)],[ga.DATA_MASK_111,new Oa(ga.DATA_MASK_111,(ee,n)=>(ee+n+ee*n%3&1)===0)]]);class _f{constructor(n){const c=n.getHeight();if(c<21||(c&3)!==1)throw new L;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let g=0;g<6;g++)n=this.copyBit(g,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let g=5;g>=0;g--)n=this.copyBit(8,g,n);const c=this.bitMatrix.getHeight();let u=0;const m=c-7;for(let g=c-1;g>=m;g--)u=this.copyBit(8,g,u);for(let g=c-8;g<c;g++)u=this.copyBit(g,8,u);if(this.parsedFormatInfo=Ra.decodeFormatInformation(n,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),c=Math.floor((n-17)/4);if(c<=6)return Tt.getVersionForNumber(c);let u=0;const m=n-11;for(let v=5;v>=0;v--)for(let N=n-9;N>=m;N--)u=this.copyBit(N,v,u);let g=Tt.decodeVersionInformation(u);if(g!==null&&g.getDimensionForVersion()===n)return this.parsedVersion=g,g;u=0;for(let v=5;v>=0;v--)for(let N=n-9;N>=m;N--)u=this.copyBit(v,N,u);if(g=Tt.decodeVersionInformation(u),g!==null&&g.getDimensionForVersion()===n)return this.parsedVersion=g,g;throw new L}copyBit(n,c,u){return(this.isMirror?this.bitMatrix.get(c,n):this.bitMatrix.get(n,c))?u<<1|1:u<<1}readCodewords(){const n=this.readFormatInformation(),c=this.readVersion(),u=Oa.values.get(n.getDataMask()),m=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,m);const g=c.buildFunctionPattern();let v=!0;const N=new Uint8Array(c.getTotalCodewords());let S=0,F=0,V=0;for(let te=m-1;te>0;te-=2){te===6&&te--;for(let fe=0;fe<m;fe++){const je=v?m-1-fe:fe;for(let De=0;De<2;De++)g.get(te-De,je)||(V++,F<<=1,this.bitMatrix.get(te-De,je)&&(F|=1),V===8&&(N[S++]=F,V=0,F=0))}v=!v}if(S!==c.getTotalCodewords())throw new L;return N}remask(){if(this.parsedFormatInfo===null)return;const n=Oa.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,c)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let c=0,u=n.getWidth();c<u;c++)for(let m=c+1,g=n.getHeight();m<g;m++)n.get(c,m)!==n.get(m,c)&&(n.flip(m,c),n.flip(c,m))}}class Ao{constructor(n,c){this.numDataCodewords=n,this.codewords=c}static getDataBlocks(n,c,u){if(n.length!==c.getTotalCodewords())throw new j;const m=c.getECBlocksForLevel(u);let g=0;const v=m.getECBlocks();for(const De of v)g+=De.getCount();const N=new Array(g);let S=0;for(const De of v)for(let Re=0;Re<De.getCount();Re++){const Xe=De.getDataCodewords(),et=m.getECCodewordsPerBlock()+Xe;N[S++]=new Ao(Xe,new Uint8Array(et))}const F=N[0].codewords.length;let V=N.length-1;for(;V>=0&&N[V].codewords.length!==F;)V--;V++;const te=F-m.getECCodewordsPerBlock();let fe=0;for(let De=0;De<te;De++)for(let Re=0;Re<S;Re++)N[Re].codewords[De]=n[fe++];for(let De=V;De<S;De++)N[De].codewords[te]=n[fe++];const je=N[0].codewords.length;for(let De=te;De<je;De++)for(let Re=0;Re<S;Re++){const Xe=Re<V?De:De+1;N[Re].codewords[Xe]=n[fe++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var bs;(function(ee){ee[ee.TERMINATOR=0]="TERMINATOR",ee[ee.NUMERIC=1]="NUMERIC",ee[ee.ALPHANUMERIC=2]="ALPHANUMERIC",ee[ee.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",ee[ee.BYTE=4]="BYTE",ee[ee.ECI=5]="ECI",ee[ee.KANJI=6]="KANJI",ee[ee.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",ee[ee.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",ee[ee.HANZI=9]="HANZI"})(bs||(bs={}));class Rt{constructor(n,c,u,m){this.value=n,this.stringValue=c,this.characterCountBitsForVersions=u,this.bits=m,Rt.FOR_BITS.set(m,this),Rt.FOR_VALUE.set(n,this)}static forBits(n){const c=Rt.FOR_BITS.get(n);if(c===void 0)throw new j;return c}getCharacterCountBits(n){const c=n.getVersionNumber();let u;return c<=9?u=0:c<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Rt))return!1;const c=n;return this.value===c.value}toString(){return this.stringValue}}Rt.FOR_BITS=new Map,Rt.FOR_VALUE=new Map,Rt.TERMINATOR=new Rt(bs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Rt.NUMERIC=new Rt(bs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Rt.ALPHANUMERIC=new Rt(bs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Rt.STRUCTURED_APPEND=new Rt(bs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Rt.BYTE=new Rt(bs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Rt.ECI=new Rt(bs.ECI,"ECI",Int32Array.from([0,0,0]),7),Rt.KANJI=new Rt(bs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Rt.FNC1_FIRST_POSITION=new Rt(bs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Rt.FNC1_SECOND_POSITION=new Rt(bs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Rt.HANZI=new Rt(bs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Wr{static decode(n,c,u,m){const g=new rs(n);let v=new ue;const N=new Array;let S=-1,F=-1;try{let V=null,te=!1,fe;do{if(g.available()<4)fe=Rt.TERMINATOR;else{const je=g.readBits(4);fe=Rt.forBits(je)}switch(fe){case Rt.TERMINATOR:break;case Rt.FNC1_FIRST_POSITION:case Rt.FNC1_SECOND_POSITION:te=!0;break;case Rt.STRUCTURED_APPEND:if(g.available()<16)throw new L;S=g.readBits(8),F=g.readBits(8);break;case Rt.ECI:const je=Wr.parseECIValue(g);if(V=U.getCharacterSetECIByValue(je),V===null)throw new L;break;case Rt.HANZI:const De=g.readBits(4),Re=g.readBits(fe.getCharacterCountBits(c));De===Wr.GB2312_SUBSET&&Wr.decodeHanziSegment(g,v,Re);break;default:const Xe=g.readBits(fe.getCharacterCountBits(c));switch(fe){case Rt.NUMERIC:Wr.decodeNumericSegment(g,v,Xe);break;case Rt.ALPHANUMERIC:Wr.decodeAlphanumericSegment(g,v,Xe,te);break;case Rt.BYTE:Wr.decodeByteSegment(g,v,Xe,V,N,m);break;case Rt.KANJI:Wr.decodeKanjiSegment(g,v,Xe);break;default:throw new L}break}}while(fe!==Rt.TERMINATOR)}catch{throw new L}return new Ve(n,v.toString(),N.length===0?null:N,u===null?null:u.toString(),S,F)}static decodeHanziSegment(n,c,u){if(u*13>n.available())throw new L;const m=new Uint8Array(2*u);let g=0;for(;u>0;){const v=n.readBits(13);let N=v/96<<8&4294967295|v%96;N<959?N+=41377:N+=42657,m[g]=N>>8&255,m[g+1]=N&255,g+=2,u--}try{c.append(ae.decode(m,Y.GB2312))}catch(v){throw new L(v)}}static decodeKanjiSegment(n,c,u){if(u*13>n.available())throw new L;const m=new Uint8Array(2*u);let g=0;for(;u>0;){const v=n.readBits(13);let N=v/192<<8&4294967295|v%192;N<7936?N+=33088:N+=49472,m[g]=N>>8,m[g+1]=N,g+=2,u--}try{c.append(ae.decode(m,Y.SHIFT_JIS))}catch(v){throw new L(v)}}static decodeByteSegment(n,c,u,m,g,v){if(8*u>n.available())throw new L;const N=new Uint8Array(u);for(let F=0;F<u;F++)N[F]=n.readBits(8);let S;m===null?S=Y.guessEncoding(N,v):S=m.getName();try{c.append(ae.decode(N,S))}catch(F){throw new L(F)}g.push(N)}static toAlphaNumericChar(n){if(n>=Wr.ALPHANUMERIC_CHARS.length)throw new L;return Wr.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,c,u,m){const g=c.length();for(;u>1;){if(n.available()<11)throw new L;const v=n.readBits(11);c.append(Wr.toAlphaNumericChar(Math.floor(v/45))),c.append(Wr.toAlphaNumericChar(v%45)),u-=2}if(u===1){if(n.available()<6)throw new L;c.append(Wr.toAlphaNumericChar(n.readBits(6)))}if(m)for(let v=g;v<c.length();v++)c.charAt(v)==="%"&&(v<c.length()-1&&c.charAt(v+1)==="%"?c.deleteCharAt(v+1):c.setCharAt(v,""))}static decodeNumericSegment(n,c,u){for(;u>=3;){if(n.available()<10)throw new L;const m=n.readBits(10);if(m>=1e3)throw new L;c.append(Wr.toAlphaNumericChar(Math.floor(m/100))),c.append(Wr.toAlphaNumericChar(Math.floor(m/10)%10)),c.append(Wr.toAlphaNumericChar(m%10)),u-=3}if(u===2){if(n.available()<7)throw new L;const m=n.readBits(7);if(m>=100)throw new L;c.append(Wr.toAlphaNumericChar(Math.floor(m/10))),c.append(Wr.toAlphaNumericChar(m%10))}else if(u===1){if(n.available()<4)throw new L;const m=n.readBits(4);if(m>=10)throw new L;c.append(Wr.toAlphaNumericChar(m))}}static parseECIValue(n){const c=n.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const u=n.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){const u=n.readBits(16);return(c&31)<<16&4294967295|u}throw new L}}Wr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Wr.GB2312_SUBSET=1;class gd{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const c=n[0];n[0]=n[2],n[2]=c}}class So{constructor(){this.rsDecoder=new Qe(Ne.QR_CODE_FIELD_256)}decodeBooleanArray(n,c){return this.decodeBitMatrix(de.parseFromBooleanArray(n),c)}decodeBitMatrix(n,c){const u=new _f(n);let m=null;try{return this.decodeBitMatrixParser(u,c)}catch(g){m=g}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const g=this.decodeBitMatrixParser(u,c);return g.setOther(new gd(!0)),g}catch(g){throw m!==null?m:g}}decodeBitMatrixParser(n,c){const u=n.readVersion(),m=n.readFormatInformation().getErrorCorrectionLevel(),g=n.readCodewords(),v=Ao.getDataBlocks(g,u,m);let N=0;for(const V of v)N+=V.getNumDataCodewords();const S=new Uint8Array(N);let F=0;for(const V of v){const te=V.getCodewords(),fe=V.getNumDataCodewords();this.correctErrors(te,fe);for(let je=0;je<fe;je++)S[F++]=te[je]}return Wr.decode(S,u,m,c)}correctErrors(n,c){const u=new Int32Array(n);try{this.rsDecoder.decode(u,n.length-c)}catch{throw new _}for(let m=0;m<c;m++)n[m]=u[m]}}class Ol extends ze{constructor(n,c,u){super(n,c),this.estimatedModuleSize=u}aboutEquals(n,c,u){if(Math.abs(c-this.getY())<=n&&Math.abs(u-this.getX())<=n){const m=Math.abs(n-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(n,c,u){const m=(this.getX()+c)/2,g=(this.getY()+n)/2,v=(this.estimatedModuleSize+u)/2;return new Ol(m,g,v)}}class Ui{constructor(n,c,u,m,g,v,N){this.image=n,this.startX=c,this.startY=u,this.width=m,this.height=g,this.moduleSize=v,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,c=this.height,u=this.width,m=n+u,g=this.startY+c/2,v=new Int32Array(3),N=this.image;for(let S=0;S<c;S++){const F=g+((S&1)===0?Math.floor((S+1)/2):-Math.floor((S+1)/2));v[0]=0,v[1]=0,v[2]=0;let V=n;for(;V<m&&!N.get(V,F);)V++;let te=0;for(;V<m;){if(N.get(V,F))if(te===1)v[1]++;else if(te===2){if(this.foundPatternCross(v)){const fe=this.handlePossibleCenter(v,F,V);if(fe!==null)return fe}v[0]=v[2],v[1]=1,v[2]=0,te=1}else v[++te]++;else te===1&&te++,v[te]++;V++}if(this.foundPatternCross(v)){const fe=this.handlePossibleCenter(v,F,m);if(fe!==null)return fe}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new G}static centerFromEnd(n,c){return c-n[2]-n[1]/2}foundPatternCross(n){const c=this.moduleSize,u=c/2;for(let m=0;m<3;m++)if(Math.abs(c-n[m])>=u)return!1;return!0}crossCheckVertical(n,c,u,m){const g=this.image,v=g.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let S=n;for(;S>=0&&g.get(c,S)&&N[1]<=u;)N[1]++,S--;if(S<0||N[1]>u)return NaN;for(;S>=0&&!g.get(c,S)&&N[0]<=u;)N[0]++,S--;if(N[0]>u)return NaN;for(S=n+1;S<v&&g.get(c,S)&&N[1]<=u;)N[1]++,S++;if(S===v||N[1]>u)return NaN;for(;S<v&&!g.get(c,S)&&N[2]<=u;)N[2]++,S++;if(N[2]>u)return NaN;const F=N[0]+N[1]+N[2];return 5*Math.abs(F-m)>=2*m?NaN:this.foundPatternCross(N)?Ui.centerFromEnd(N,S):NaN}handlePossibleCenter(n,c,u){const m=n[0]+n[1]+n[2],g=Ui.centerFromEnd(n,u),v=this.crossCheckVertical(c,g,2*n[1],m);if(!isNaN(v)){const N=(n[0]+n[1]+n[2])/3;for(const F of this.possibleCenters)if(F.aboutEquals(N,v,g))return F.combineEstimate(v,g,N);const S=new Ol(g,v,N);this.possibleCenters.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return null}}class Pn extends ze{constructor(n,c,u,m){super(n,c),this.estimatedModuleSize=u,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,c,u){if(Math.abs(c-this.getY())<=n&&Math.abs(u-this.getX())<=n){const m=Math.abs(n-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(n,c,u){const m=this.count+1,g=(this.count*this.getX()+c)/m,v=(this.count*this.getY()+n)/m,N=(this.count*this.estimatedModuleSize+u)/m;return new Pn(g,v,N,m)}}class Hi{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class pa{constructor(n,c){this.image=n,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const c=n!=null&&n.get(z.TRY_HARDER)!==void 0,u=n!=null&&n.get(z.PURE_BARCODE)!==void 0,m=this.image,g=m.getHeight(),v=m.getWidth();let N=Math.floor(3*g/(4*pa.MAX_MODULES));(N<pa.MIN_SKIP||c)&&(N=pa.MIN_SKIP);let S=!1;const F=new Int32Array(5);for(let te=N-1;te<g&&!S;te+=N){F[0]=0,F[1]=0,F[2]=0,F[3]=0,F[4]=0;let fe=0;for(let je=0;je<v;je++)if(m.get(je,te))(fe&1)===1&&fe++,F[fe]++;else if((fe&1)===0)if(fe===4)if(pa.foundPatternCross(F)){if(this.handlePossibleCenter(F,te,je,u)===!0)if(N=2,this.hasSkipped===!0)S=this.haveMultiplyConfirmedCenters();else{const Re=this.findRowSkip();Re>F[2]&&(te+=Re-F[2]-N,je=v-1)}else{F[0]=F[2],F[1]=F[3],F[2]=F[4],F[3]=1,F[4]=0,fe=3;continue}fe=0,F[0]=0,F[1]=0,F[2]=0,F[3]=0,F[4]=0}else F[0]=F[2],F[1]=F[3],F[2]=F[4],F[3]=1,F[4]=0,fe=3;else F[++fe]++;else F[fe]++;pa.foundPatternCross(F)&&this.handlePossibleCenter(F,te,v,u)===!0&&(N=F[0],this.hasSkipped&&(S=this.haveMultiplyConfirmedCenters()))}const V=this.selectBestPatterns();return ze.orderBestPatterns(V),new Hi(V)}static centerFromEnd(n,c){return c-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let c=0;for(let g=0;g<5;g++){const v=n[g];if(v===0)return!1;c+=v}if(c<7)return!1;const u=c/7,m=u/2;return Math.abs(u-n[0])<m&&Math.abs(u-n[1])<m&&Math.abs(3*u-n[2])<3*m&&Math.abs(u-n[3])<m&&Math.abs(u-n[4])<m}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,c,u,m){const g=this.getCrossCheckStateCount();let v=0;const N=this.image;for(;n>=v&&c>=v&&N.get(c-v,n-v);)g[2]++,v++;if(n<v||c<v)return!1;for(;n>=v&&c>=v&&!N.get(c-v,n-v)&&g[1]<=u;)g[1]++,v++;if(n<v||c<v||g[1]>u)return!1;for(;n>=v&&c>=v&&N.get(c-v,n-v)&&g[0]<=u;)g[0]++,v++;if(g[0]>u)return!1;const S=N.getHeight(),F=N.getWidth();for(v=1;n+v<S&&c+v<F&&N.get(c+v,n+v);)g[2]++,v++;if(n+v>=S||c+v>=F)return!1;for(;n+v<S&&c+v<F&&!N.get(c+v,n+v)&&g[3]<u;)g[3]++,v++;if(n+v>=S||c+v>=F||g[3]>=u)return!1;for(;n+v<S&&c+v<F&&N.get(c+v,n+v)&&g[4]<u;)g[4]++,v++;if(g[4]>=u)return!1;const V=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(V-m)<2*m&&pa.foundPatternCross(g)}crossCheckVertical(n,c,u,m){const g=this.image,v=g.getHeight(),N=this.getCrossCheckStateCount();let S=n;for(;S>=0&&g.get(c,S);)N[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(c,S)&&N[1]<=u;)N[1]++,S--;if(S<0||N[1]>u)return NaN;for(;S>=0&&g.get(c,S)&&N[0]<=u;)N[0]++,S--;if(N[0]>u)return NaN;for(S=n+1;S<v&&g.get(c,S);)N[2]++,S++;if(S===v)return NaN;for(;S<v&&!g.get(c,S)&&N[3]<u;)N[3]++,S++;if(S===v||N[3]>=u)return NaN;for(;S<v&&g.get(c,S)&&N[4]<u;)N[4]++,S++;if(N[4]>=u)return NaN;const F=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(F-m)>=2*m?NaN:pa.foundPatternCross(N)?pa.centerFromEnd(N,S):NaN}crossCheckHorizontal(n,c,u,m){const g=this.image,v=g.getWidth(),N=this.getCrossCheckStateCount();let S=n;for(;S>=0&&g.get(S,c);)N[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(S,c)&&N[1]<=u;)N[1]++,S--;if(S<0||N[1]>u)return NaN;for(;S>=0&&g.get(S,c)&&N[0]<=u;)N[0]++,S--;if(N[0]>u)return NaN;for(S=n+1;S<v&&g.get(S,c);)N[2]++,S++;if(S===v)return NaN;for(;S<v&&!g.get(S,c)&&N[3]<u;)N[3]++,S++;if(S===v||N[3]>=u)return NaN;for(;S<v&&g.get(S,c)&&N[4]<u;)N[4]++,S++;if(N[4]>=u)return NaN;const F=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(F-m)>=m?NaN:pa.foundPatternCross(N)?pa.centerFromEnd(N,S):NaN}handlePossibleCenter(n,c,u,m){const g=n[0]+n[1]+n[2]+n[3]+n[4];let v=pa.centerFromEnd(n,u),N=this.crossCheckVertical(c,Math.floor(v),n[2],g);if(!isNaN(N)&&(v=this.crossCheckHorizontal(Math.floor(v),Math.floor(N),n[2],g),!isNaN(v)&&(!m||this.crossCheckDiagonal(Math.floor(N),Math.floor(v),n[2],g)))){const S=g/7;let F=!1;const V=this.possibleCenters;for(let te=0,fe=V.length;te<fe;te++){const je=V[te];if(je.aboutEquals(S,N,v)){V[te]=je.combineEstimate(N,v,S),F=!0;break}}if(!F){const te=new Pn(v,N,S);V.push(te),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(te)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const u of this.possibleCenters)if(u.getCount()>=pa.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,c=0;const u=this.possibleCenters.length;for(const v of this.possibleCenters)v.getCount()>=pa.CENTER_QUORUM&&(n++,c+=v.getEstimatedModuleSize());if(n<3)return!1;const m=c/u;let g=0;for(const v of this.possibleCenters)g+=Math.abs(v.getEstimatedModuleSize()-m);return g<=.05*c}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new G;const c=this.possibleCenters;let u;if(n>3){let m=0,g=0;for(const S of this.possibleCenters){const F=S.getEstimatedModuleSize();m+=F,g+=F*F}u=m/n;let v=Math.sqrt(g/n-u*u);c.sort((S,F)=>{const V=Math.abs(F.getEstimatedModuleSize()-u),te=Math.abs(S.getEstimatedModuleSize()-u);return V<te?-1:V>te?1:0});const N=Math.max(.2*u,v);for(let S=0;S<c.length&&c.length>3;S++){const F=c[S];Math.abs(F.getEstimatedModuleSize()-u)>N&&(c.splice(S,1),S--)}}if(c.length>3){let m=0;for(const g of c)m+=g.getEstimatedModuleSize();u=m/c.length,c.sort((g,v)=>{if(v.getCount()===g.getCount()){const N=Math.abs(v.getEstimatedModuleSize()-u),S=Math.abs(g.getEstimatedModuleSize()-u);return N<S?1:N>S?-1:0}else return v.getCount()-g.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}pa.CENTER_QUORUM=2,pa.MIN_SKIP=3,pa.MAX_MODULES=57;class di{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(z.NEED_RESULT_POINT_CALLBACK);const u=new pa(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(u)}processFinderPatternInfo(n){const c=n.getTopLeft(),u=n.getTopRight(),m=n.getBottomLeft(),g=this.calculateModuleSize(c,u,m);if(g<1)throw new G("No pattern found in proccess finder.");const v=di.computeDimension(c,u,m,g),N=Tt.getProvisionalVersionForDimension(v),S=N.getDimensionForVersion()-7;let F=null;if(N.getAlignmentPatternCenters().length>0){const je=u.getX()-c.getX()+m.getX(),De=u.getY()-c.getY()+m.getY(),Re=1-3/S,Xe=Math.floor(c.getX()+Re*(je-c.getX())),et=Math.floor(c.getY()+Re*(De-c.getY()));for(let gt=4;gt<=16;gt<<=1)try{F=this.findAlignmentInRegion(g,Xe,et,gt);break}catch(vt){if(!(vt instanceof G))throw vt}}const V=di.createTransform(c,u,m,F,v),te=di.sampleGrid(this.image,V,v);let fe;return F===null?fe=[m,c,u]:fe=[m,c,u,F],new Pe(te,fe)}static createTransform(n,c,u,m,g){const v=g-3.5;let N,S,F,V;return m!==null?(N=m.getX(),S=m.getY(),F=v-3,V=F):(N=c.getX()-n.getX()+u.getX(),S=c.getY()-n.getY()+u.getY(),F=v,V=v),St.quadrilateralToQuadrilateral(3.5,3.5,v,3.5,F,V,3.5,v,n.getX(),n.getY(),c.getX(),c.getY(),N,S,u.getX(),u.getY())}static sampleGrid(n,c,u){return tr.getInstance().sampleGridWithTransform(n,u,u,c)}static computeDimension(n,c,u,m){const g=pe.round(ze.distance(n,c)/m),v=pe.round(ze.distance(n,u)/m);let N=Math.floor((g+v)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new G("Dimensions could be not found.")}return N}calculateModuleSize(n,c,u){return(this.calculateModuleSizeOneWay(n,c)+this.calculateModuleSizeOneWay(n,u))/2}calculateModuleSizeOneWay(n,c){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(c.getX()),Math.floor(c.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(u)?m/7:isNaN(m)?u/7:(u+m)/14}sizeOfBlackWhiteBlackRunBothWays(n,c,u,m){let g=this.sizeOfBlackWhiteBlackRun(n,c,u,m),v=1,N=n-(u-n);N<0?(v=n/(n-N),N=0):N>=this.image.getWidth()&&(v=(this.image.getWidth()-1-n)/(N-n),N=this.image.getWidth()-1);let S=Math.floor(c-(m-c)*v);return v=1,S<0?(v=c/(c-S),S=0):S>=this.image.getHeight()&&(v=(this.image.getHeight()-1-c)/(S-c),S=this.image.getHeight()-1),N=Math.floor(n+(N-n)*v),g+=this.sizeOfBlackWhiteBlackRun(n,c,N,S),g-1}sizeOfBlackWhiteBlackRun(n,c,u,m){const g=Math.abs(m-c)>Math.abs(u-n);if(g){let je=n;n=c,c=je,je=u,u=m,m=je}const v=Math.abs(u-n),N=Math.abs(m-c);let S=-v/2;const F=n<u?1:-1,V=c<m?1:-1;let te=0;const fe=u+F;for(let je=n,De=c;je!==fe;je+=F){const Re=g?De:je,Xe=g?je:De;if(te===1===this.image.get(Re,Xe)){if(te===2)return pe.distance(je,De,n,c);te++}if(S+=N,S>0){if(De===m)break;De+=V,S-=v}}return te===2?pe.distance(u+F,m,n,c):NaN}findAlignmentInRegion(n,c,u,m){const g=Math.floor(m*n),v=Math.max(0,c-g),N=Math.min(this.image.getWidth()-1,c+g);if(N-v<n*3)throw new G("Alignment top exceeds estimated module size.");const S=Math.max(0,u-g),F=Math.min(this.image.getHeight()-1,u+g);if(F-S<n*3)throw new G("Alignment bottom exceeds estimated module size.");return new Ui(this.image,v,S,N-v,F-S,n,this.resultPointCallback).find()}}class vn{constructor(){this.decoder=new So}getDecoder(){return this.decoder}decode(n,c){let u,m;if(c!=null&&c.get(z.PURE_BARCODE)!==void 0){const S=vn.extractPureBits(n.getBlackMatrix());u=this.decoder.decodeBitMatrix(S,c),m=vn.NO_POINTS}else{const S=new di(n.getBlackMatrix()).detect(c);u=this.decoder.decodeBitMatrix(S.getBits(),c),m=S.getPoints()}u.getOther()instanceof gd&&u.getOther().applyMirroredCorrection(m);const g=new se(u.getText(),u.getRawBytes(),void 0,m,K.QR_CODE,void 0),v=u.getByteSegments();v!==null&&g.putMetadata(we.BYTE_SEGMENTS,v);const N=u.getECLevel();return N!==null&&g.putMetadata(we.ERROR_CORRECTION_LEVEL,N),u.hasStructuredAppend()&&(g.putMetadata(we.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),g.putMetadata(we.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),g}reset(){}static extractPureBits(n){const c=n.getTopLeftOnBit(),u=n.getBottomRightOnBit();if(c===null||u===null)throw new G;const m=this.moduleSize(c,n);let g=c[1],v=u[1],N=c[0],S=u[0];if(N>=S||g>=v)throw new G;if(v-g!==S-N&&(S=N+(v-g),S>=n.getWidth()))throw new G;const F=Math.round((S-N+1)/m),V=Math.round((v-g+1)/m);if(F<=0||V<=0)throw new G;if(V!==F)throw new G;const te=Math.floor(m/2);g+=te,N+=te;const fe=N+Math.floor((F-1)*m)-S;if(fe>0){if(fe>te)throw new G;N-=fe}const je=g+Math.floor((V-1)*m)-v;if(je>0){if(je>te)throw new G;g-=je}const De=new de(F,V);for(let Re=0;Re<V;Re++){const Xe=g+Math.floor(Re*m);for(let et=0;et<F;et++)n.get(N+Math.floor(et*m),Xe)&&De.set(et,Re)}return De}static moduleSize(n,c){const u=c.getHeight(),m=c.getWidth();let g=n[0],v=n[1],N=!0,S=0;for(;g<m&&v<u;){if(N!==c.get(g,v)){if(++S===5)break;N=!N}g++,v++}if(g===m||v===u)throw new G;return(g-n[0])/7}}vn.NO_POINTS=new Array;class It{PDF417Common(){}static getBitCountSum(n){return pe.sum(n)}static toIntArray(n){if(n==null||!n.length)return It.EMPTY_INT_ARRAY;const c=new Int32Array(n.length);let u=0;for(const m of n)c[u++]=m;return c}static getCodeword(n){const c=M.binarySearch(It.SYMBOL_TABLE,n&262143);return c<0?-1:(It.CODEWORD_TABLE[c]-1)%It.NUMBER_OF_CODEWORDS}}It.NUMBER_OF_CODEWORDS=929,It.MAX_CODEWORDS_IN_BARCODE=It.NUMBER_OF_CODEWORDS-1,It.MIN_ROWS_IN_BARCODE=3,It.MAX_ROWS_IN_BARCODE=90,It.MODULES_IN_CODEWORD=17,It.MODULES_IN_STOP_PATTERN=18,It.BARS_IN_MODULE=8,It.EMPTY_INT_ARRAY=new Int32Array([]),It.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),It.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class wn{constructor(n,c){this.bits=n,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Wt{static detectMultiple(n,c,u){let m=n.getBlackMatrix(),g=Wt.detect(u,m);return g.length||(m=m.clone(),m.rotate180(),g=Wt.detect(u,m)),new wn(m,g)}static detect(n,c){const u=new Array;let m=0,g=0,v=!1;for(;m<c.getHeight();){const N=Wt.findVertices(c,m,g);if(N[0]==null&&N[3]==null){if(!v)break;v=!1,g=0;for(const S of u)S[1]!=null&&(m=Math.trunc(Math.max(m,S[1].getY()))),S[3]!=null&&(m=Math.max(m,Math.trunc(S[3].getY())));m+=Wt.ROW_STEP;continue}if(v=!0,u.push(N),!n)break;N[2]!=null?(g=Math.trunc(N[2].getX()),m=Math.trunc(N[2].getY())):(g=Math.trunc(N[4].getX()),m=Math.trunc(N[4].getY()))}return u}static findVertices(n,c,u){const m=n.getHeight(),g=n.getWidth(),v=new Array(8);return Wt.copyToResult(v,Wt.findRowsWithPattern(n,m,g,c,u,Wt.START_PATTERN),Wt.INDEXES_START_PATTERN),v[4]!=null&&(u=Math.trunc(v[4].getX()),c=Math.trunc(v[4].getY())),Wt.copyToResult(v,Wt.findRowsWithPattern(n,m,g,c,u,Wt.STOP_PATTERN),Wt.INDEXES_STOP_PATTERN),v}static copyToResult(n,c,u){for(let m=0;m<u.length;m++)n[u[m]]=c[m]}static findRowsWithPattern(n,c,u,m,g,v){const N=new Array(4);let S=!1;const F=new Int32Array(v.length);for(;m<c;m+=Wt.ROW_STEP){let te=Wt.findGuardPattern(n,g,m,u,!1,v,F);if(te!=null){for(;m>0;){const fe=Wt.findGuardPattern(n,g,--m,u,!1,v,F);if(fe!=null)te=fe;else{m++;break}}N[0]=new ze(te[0],m),N[1]=new ze(te[1],m),S=!0;break}}let V=m+1;if(S){let te=0,fe=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;V<c;V++){const je=Wt.findGuardPattern(n,fe[0],V,u,!1,v,F);if(je!=null&&Math.abs(fe[0]-je[0])<Wt.MAX_PATTERN_DRIFT&&Math.abs(fe[1]-je[1])<Wt.MAX_PATTERN_DRIFT)fe=je,te=0;else{if(te>Wt.SKIPPED_ROW_COUNT_MAX)break;te++}}V-=te+1,N[2]=new ze(fe[0],V),N[3]=new ze(fe[1],V)}return V-m<Wt.BARCODE_MIN_HEIGHT&&M.fill(N,null),N}static findGuardPattern(n,c,u,m,g,v,N){M.fillWithin(N,0,N.length,0);let S=c,F=0;for(;n.get(S,u)&&S>0&&F++<Wt.MAX_PIXEL_DRIFT;)S--;let V=S,te=0,fe=v.length;for(let je=g;V<m;V++)if(n.get(V,u)!==je)N[te]++;else{if(te===fe-1){if(Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return new Int32Array([S,V]);S+=N[0]+N[1],A.arraycopy(N,2,N,0,te-1),N[te-1]=0,N[te]=0,te--}else te++;N[te]=1,je=!je}return te===fe-1&&Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE?new Int32Array([S,V-1]):null}static patternMatchVariance(n,c,u){let m=n.length,g=0,v=0;for(let F=0;F<m;F++)g+=n[F],v+=c[F];if(g<v)return 1/0;let N=g/v;u*=N;let S=0;for(let F=0;F<m;F++){let V=n[F],te=c[F]*N,fe=V>te?V-te:te-V;if(fe>u)return 1/0;S+=fe}return S/g}}Wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wt.MAX_AVG_VARIANCE=.42,Wt.MAX_INDIVIDUAL_VARIANCE=.8,Wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wt.MAX_PIXEL_DRIFT=3,Wt.MAX_PATTERN_DRIFT=5,Wt.SKIPPED_ROW_COUNT_MAX=25,Wt.ROW_STEP=5,Wt.BARCODE_MIN_HEIGHT=10;class aa{constructor(n,c){if(c.length===0)throw new j;this.field=n;let u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let m=0;for(let g of this.coefficients)m=this.field.add(m,g);return m}let c=this.coefficients[0],u=this.coefficients.length;for(let m=1;m<u;m++)c=this.field.add(this.field.multiply(n,c),this.coefficients[m]);return c}add(n){if(!this.field.equals(n.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let c=this.coefficients,u=n.coefficients;if(c.length>u.length){let v=c;c=u,u=v}let m=new Int32Array(u.length),g=u.length-c.length;A.arraycopy(u,0,m,0,g);for(let v=g;v<u.length;v++)m[v]=this.field.add(c[v-g],u[v]);return new aa(this.field,m)}subtract(n){if(!this.field.equals(n.field))throw new j("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof aa?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new aa(this.field,new Int32Array([0]));let c=this.coefficients,u=c.length,m=n.coefficients,g=m.length,v=new Int32Array(u+g-1);for(let N=0;N<u;N++){let S=c[N];for(let F=0;F<g;F++)v[N+F]=this.field.add(v[N+F],this.field.multiply(S,m[F]))}return new aa(this.field,v)}negative(){let n=this.coefficients.length,c=new Int32Array(n);for(let u=0;u<n;u++)c[u]=this.field.subtract(0,this.coefficients[u]);return new aa(this.field,c)}multiplyScalar(n){if(n===0)return new aa(this.field,new Int32Array([0]));if(n===1)return this;let c=this.coefficients.length,u=new Int32Array(c);for(let m=0;m<c;m++)u[m]=this.field.multiply(this.coefficients[m],n);return new aa(this.field,u)}multiplyByMonomial(n,c){if(n<0)throw new j;if(c===0)return new aa(this.field,new Int32Array([0]));let u=this.coefficients.length,m=new Int32Array(u+n);for(let g=0;g<u;g++)m[g]=this.field.multiply(this.coefficients[g],c);return new aa(this.field,m)}toString(){let n=new ue;for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);u!==0&&(u<0?(n.append(" - "),u=-u):n.length()>0&&n.append(" + "),(c===0||u!==1)&&n.append(u),c!==0&&(c===1?n.append("x"):(n.append("x^"),n.append(c))))}return n.toString()}}class zn{add(n,c){return(n+c)%this.modulus}subtract(n,c){return(this.modulus+n-c)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new j;return this.logTable[n]}inverse(n){if(n===0)throw new J;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,c){return n===0||c===0?0:this.expTable[(this.logTable[n]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Il extends zn{constructor(n,c){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let u=1;for(let m=0;m<n;m++)this.expTable[m]=u,u=u*c%n;for(let m=0;m<n-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new aa(this,new Int32Array([0])),this.one=new aa(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,c){if(n<0)throw new j;if(c===0)return this.zero;let u=new Int32Array(n+1);return u[0]=c,new aa(this,u)}}Il.PDF417_GF=new Il(It.NUMBER_OF_CODEWORDS,3);class Fl{constructor(){this.field=Il.PDF417_GF}decode(n,c,u){let m=new aa(this.field,n),g=new Int32Array(c),v=!1;for(let De=c;De>0;De--){let Re=m.evaluateAt(this.field.exp(De));g[c-De]=Re,Re!==0&&(v=!0)}if(!v)return 0;let N=this.field.getOne();if(u!=null)for(const De of u){let Re=this.field.exp(n.length-1-De),Xe=new aa(this.field,new Int32Array([this.field.subtract(0,Re),1]));N=N.multiply(Xe)}let S=new aa(this.field,g),F=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),S,c),V=F[0],te=F[1],fe=this.findErrorLocations(V),je=this.findErrorMagnitudes(te,V,fe);for(let De=0;De<fe.length;De++){let Re=n.length-1-this.field.log(fe[De]);if(Re<0)throw _.getChecksumInstance();n[Re]=this.field.subtract(n[Re],je[De])}return fe.length}runEuclideanAlgorithm(n,c,u){if(n.getDegree()<c.getDegree()){let fe=n;n=c,c=fe}let m=n,g=c,v=this.field.getZero(),N=this.field.getOne();for(;g.getDegree()>=Math.round(u/2);){let fe=m,je=v;if(m=g,v=N,m.isZero())throw _.getChecksumInstance();g=fe;let De=this.field.getZero(),Re=m.getCoefficient(m.getDegree()),Xe=this.field.inverse(Re);for(;g.getDegree()>=m.getDegree()&&!g.isZero();){let et=g.getDegree()-m.getDegree(),gt=this.field.multiply(g.getCoefficient(g.getDegree()),Xe);De=De.add(this.field.buildMonomial(et,gt)),g=g.subtract(m.multiplyByMonomial(et,gt))}N=De.multiply(v).subtract(je).negative()}let S=N.getCoefficient(0);if(S===0)throw _.getChecksumInstance();let F=this.field.inverse(S),V=N.multiply(F),te=g.multiply(F);return[V,te]}findErrorLocations(n){let c=n.getDegree(),u=new Int32Array(c),m=0;for(let g=1;g<this.field.getSize()&&m<c;g++)n.evaluateAt(g)===0&&(u[m]=this.field.inverse(g),m++);if(m!==c)throw _.getChecksumInstance();return u}findErrorMagnitudes(n,c,u){let m=c.getDegree(),g=new Int32Array(m);for(let F=1;F<=m;F++)g[m-F]=this.field.multiply(F,c.getCoefficient(F));let v=new aa(this.field,g),N=u.length,S=new Int32Array(N);for(let F=0;F<N;F++){let V=this.field.inverse(u[F]),te=this.field.subtract(0,n.evaluateAt(V)),fe=this.field.inverse(v.evaluateAt(V));S[F]=this.field.multiply(te,fe)}return S}}class Un{constructor(n,c,u,m,g){n instanceof Un?this.constructor_2(n):this.constructor_1(n,c,u,m,g)}constructor_1(n,c,u,m,g){const v=c==null||u==null,N=m==null||g==null;if(v&&N)throw new G;v?(c=new ze(0,m.getY()),u=new ze(0,g.getY())):N&&(m=new ze(n.getWidth()-1,c.getY()),g=new ze(n.getWidth()-1,u.getY())),this.image=n,this.topLeft=c,this.bottomLeft=u,this.topRight=m,this.bottomRight=g,this.minX=Math.trunc(Math.min(c.getX(),u.getX())),this.maxX=Math.trunc(Math.max(m.getX(),g.getX())),this.minY=Math.trunc(Math.min(c.getY(),m.getY())),this.maxY=Math.trunc(Math.max(u.getY(),g.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,c){return n==null?c:c==null?n:new Un(n.image,n.topLeft,n.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(n,c,u){let m=this.topLeft,g=this.bottomLeft,v=this.topRight,N=this.bottomRight;if(n>0){let S=u?this.topLeft:this.topRight,F=Math.trunc(S.getY()-n);F<0&&(F=0);let V=new ze(S.getX(),F);u?m=V:v=V}if(c>0){let S=u?this.bottomLeft:this.bottomRight,F=Math.trunc(S.getY()+c);F>=this.image.getHeight()&&(F=this.image.getHeight()-1);let V=new ze(S.getX(),F);u?g=V:N=V}return new Un(this.image,m,g,v,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class To{constructor(n,c,u,m){this.columnCount=n,this.errorCorrectionLevel=m,this.rowCountUpperPart=c,this.rowCountLowerPart=u,this.rowCount=c+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Hn{constructor(){this.buffer=""}static form(n,c){let u=-1;function m(v,N,S,F,V,te){if(v==="%%")return"%";if(c[++u]===void 0)return;v=F?parseInt(F.substr(1)):void 0;let fe=V?parseInt(V.substr(1)):void 0,je;switch(te){case"s":je=c[u];break;case"c":je=c[u][0];break;case"f":je=parseFloat(c[u]).toFixed(v);break;case"p":je=parseFloat(c[u]).toPrecision(v);break;case"e":je=parseFloat(c[u]).toExponential(v);break;case"x":je=parseInt(c[u]).toString(fe||16);break;case"d":je=parseFloat(parseInt(c[u],fe||10).toPrecision(v)).toFixed(0);break}je=typeof je=="object"?JSON.stringify(je):(+je).toString(fe);let De=parseInt(S),Re=S&&S[0]+""=="0"?"0":" ";for(;je.length<De;)je=N!==void 0?je+Re:Re+je;return je}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(g,m)}format(n,...c){this.buffer+=Hn.form(n,c)}toString(){return this.buffer}}class Vi{constructor(n){this.boundingBox=new Un(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let c=this.getCodeword(n);if(c!=null)return c;for(let u=1;u<Vi.MAX_NEARBY_DISTANCE;u++){let m=this.imageRowToCodewordIndex(n)-u;if(m>=0&&(c=this.codewords[m],c!=null)||(m=this.imageRowToCodewordIndex(n)+u,m<this.codewords.length&&(c=this.codewords[m],c!=null)))return c}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,c){this.codewords[this.imageRowToCodewordIndex(n)]=c}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Hn;let c=0;for(const u of this.codewords){if(u==null){n.format("%3d:    |   %n",c++);continue}n.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return n.toString()}}Vi.MAX_NEARBY_DISTANCE=5;class ka{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let c=this.values.get(n);c==null&&(c=0),c++,this.values.set(n,c)}getValue(){let n=-1,c=new Array;for(const[u,m]of this.values.entries()){const g={getKey:()=>u,getValue:()=>m};g.getValue()>n?(n=g.getValue(),c=[],c.push(g.getKey())):g.getValue()===n&&c.push(g.getKey())}return It.toIntArray(c)}getConfidence(n){return this.values.get(n)}}class Vn extends Vi{constructor(n,c){super(n),this._isLeft=c}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,n);let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),g=this._isLeft?u.getBottomLeft():u.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=-1,F=1,V=0;for(let te=v;te<N;te++){if(c[te]==null)continue;let fe=c[te],je=fe.getRowNumber()-S;if(je===0)V++;else if(je===1)F=Math.max(F,V),V=1,S=fe.getRowNumber();else if(je<0||fe.getRowNumber()>=n.getRowCount()||je>te)c[te]=null;else{let De;F>2?De=(F-2)*je:De=je;let Re=De>=te;for(let Xe=1;Xe<=De&&!Re;Xe++)Re=c[te-Xe]!=null;Re?c[te]=null:(S=fe.getRowNumber(),V=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let c=new Int32Array(n.getRowCount());for(let u of this.getCodewords())if(u!=null){let m=u.getRowNumber();if(m>=c.length)continue;c[m]++}return c}adjustIncompleteIndicatorColumnRowNumbers(n){let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.getCodewords(),S=-1;for(let F=g;F<v;F++){if(N[F]==null)continue;let V=N[F];V.setRowNumberAsRowIndicatorColumn();let te=V.getRowNumber()-S;te===0||(te===1?S=V.getRowNumber():V.getRowNumber()>=n.getRowCount()?N[F]=null:S=V.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),c=new ka,u=new ka,m=new ka,g=new ka;for(let N of n){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let S=N.getValue()%30,F=N.getRowNumber();switch(this._isLeft||(F+=2),F%3){case 0:u.setValue(S*3+1);break;case 1:g.setValue(S/3),m.setValue(S%3);break;case 2:c.setValue(S+1);break}}if(c.getValue().length===0||u.getValue().length===0||m.getValue().length===0||g.getValue().length===0||c.getValue()[0]<1||u.getValue()[0]+m.getValue()[0]<It.MIN_ROWS_IN_BARCODE||u.getValue()[0]+m.getValue()[0]>It.MAX_ROWS_IN_BARCODE)return null;let v=new To(c.getValue()[0],u.getValue()[0],m.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(n,v),v}removeIncorrectCodewords(n,c){for(let u=0;u<n.length;u++){let m=n[u];if(n[u]==null)continue;let g=m.getValue()%30,v=m.getRowNumber();if(v>c.getRowCount()){n[u]=null;continue}switch(this._isLeft||(v+=2),v%3){case 0:g*3+1!==c.getRowCountUpperPart()&&(n[u]=null);break;case 1:(Math.trunc(g/3)!==c.getErrorCorrectionLevel()||g%3!==c.getRowCountLowerPart())&&(n[u]=null);break;case 2:g+1!==c.getColumnCount()&&(n[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Gn{constructor(n,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=It.MAX_CODEWORDS_IN_BARCODE,c;do c=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let u=this.detectionResultColumns[c].getCodewords();for(let m=0;m<u.length;m++)u[m]!=null&&(u[m].hasValidRowNumber()||this.adjustRowNumbers(c,m,u))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<n.length;u++)if(n[u]!=null&&c[u]!=null&&n[u].getRowNumber()===c[u].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let g=this.detectionResultColumns[m].getCodewords()[u];g!=null&&(g.setRowNumber(n[u].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),g=0;for(let v=this.barcodeColumnCount+1;v>0&&g<this.ADJUST_ROW_NUMBER_SKIP;v--){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(g=Gn.adjustRowNumberIfValid(m,g,N),N.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,c=this.detectionResultColumns[0].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),g=0;for(let v=1;v<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;v++){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(g=Gn.adjustRowNumberIfValid(m,g,N),N.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,c,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(n)?(u.setRowNumber(n),c=0):++c),c}adjustRowNumbers(n,c,u){if(!this.detectionResultColumns[n-1])return;let m=u[c],g=this.detectionResultColumns[n-1].getCodewords(),v=g;this.detectionResultColumns[n+1]!=null&&(v=this.detectionResultColumns[n+1].getCodewords());let N=new Array(14);N[2]=g[c],N[3]=v[c],c>0&&(N[0]=u[c-1],N[4]=g[c-1],N[5]=v[c-1]),c>1&&(N[8]=u[c-2],N[10]=g[c-2],N[11]=v[c-2]),c<u.length-1&&(N[1]=u[c+1],N[6]=g[c+1],N[7]=v[c+1]),c<u.length-2&&(N[9]=u[c+2],N[12]=g[c+2],N[13]=v[c+2]);for(let S of N)if(Gn.adjustRowNumber(m,S))return}static adjustRowNumber(n,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===n.getBucket()?(n.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,c){this.detectionResultColumns[n]=c}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Hn;for(let u=0;u<n.getCodewords().length;u++){c.format("CW %3d:",u);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){c.format("    |   ");continue}let g=this.detectionResultColumns[m].getCodewords()[u];if(g==null){c.format("    |   ");continue}c.format(" %3d|%3d",g.getRowNumber(),g.getValue())}c.format("%n")}return c.toString()}}class Nn{constructor(n,c,u,m){this.rowNumber=Nn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==Nn.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}Nn.BARCODE_ROW_UNKNOWN=-1;class as{static initialize(){for(let n=0;n<It.SYMBOL_TABLE.length;n++){let c=It.SYMBOL_TABLE[n],u=c&1;for(let m=0;m<It.BARS_IN_MODULE;m++){let g=0;for(;(c&1)===u;)g+=1,c>>=1;u=c&1,as.RATIOS_TABLE[n]||(as.RATIOS_TABLE[n]=new Array(It.BARS_IN_MODULE)),as.RATIOS_TABLE[n][It.BARS_IN_MODULE-m-1]=Math.fround(g/It.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let c=as.getDecodedCodewordValue(as.sampleBitCounts(n));return c!==-1?c:as.getClosestDecodedValue(n)}static sampleBitCounts(n){let c=pe.sum(n),u=new Int32Array(It.BARS_IN_MODULE),m=0,g=0;for(let v=0;v<It.MODULES_IN_CODEWORD;v++){let N=c/(2*It.MODULES_IN_CODEWORD)+v*c/It.MODULES_IN_CODEWORD;g+n[m]<=N&&(g+=n[m],m++),u[m]++}return u}static getDecodedCodewordValue(n){let c=as.getBitValue(n);return It.getCodeword(c)===-1?-1:c}static getBitValue(n){let c=0;for(let u=0;u<n.length;u++)for(let m=0;m<n[u];m++)c=c<<1|(u%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(n){let c=pe.sum(n),u=new Array(It.BARS_IN_MODULE);if(c>1)for(let v=0;v<u.length;v++)u[v]=Math.fround(n[v]/c);let m=Ge.MAX_VALUE,g=-1;this.bSymbolTableReady||as.initialize();for(let v=0;v<as.RATIOS_TABLE.length;v++){let N=0,S=as.RATIOS_TABLE[v];for(let F=0;F<It.BARS_IN_MODULE;F++){let V=Math.fround(S[F]-u[F]);if(N+=Math.fround(V*V),N>=m)break}N<m&&(m=N,g=It.SYMBOL_TABLE[v])}return g}}as.bSymbolTableReady=!1,as.RATIOS_TABLE=new Array(It.SYMBOL_TABLE.length).map(ee=>new Array(It.BARS_IN_MODULE));class Do{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class Ro{static parseLong(n,c=void 0){return parseInt(n,c)}}class Gi extends p{}Gi.kind="NullPointerException";class Oo{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,c,u){if(n==null)throw new Gi;if(c<0||c>n.length||u<0||c+u>n.length||c+u<0)throw new I;if(u===0)return;for(let m=0;m<u;m++)this.write(n[c+m])}flush(){}close(){}}class pd extends p{}class Af extends Oo{constructor(n=32){if(super(),this.count=0,n<0)throw new j("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let u=this.buf.length<<1;if(u-n<0&&(u=n),u<0){if(n<0)throw new pd;u=D.MAX_VALUE}this.buf=M.copyOfUint8Array(this.buf,u)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,c,u){if(c<0||c>n.length||u<0||c+u-n.length>0)throw new I;this.ensureCapacity(this.count+u),A.arraycopy(n,c,this.buf,this.count,u),this.count+=u}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return M.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Sr;(function(ee){ee[ee.ALPHA=0]="ALPHA",ee[ee.LOWER=1]="LOWER",ee[ee.MIXED=2]="MIXED",ee[ee.PUNCT=3]="PUNCT",ee[ee.ALPHA_SHIFT=4]="ALPHA_SHIFT",ee[ee.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Sr||(Sr={}));function yd(){if(typeof window<"u")return window.BigInt||null;if(typeof Nu<"u")return Nu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xi;function Xn(ee){if(typeof Xi>"u"&&(Xi=yd()),Xi===null)throw new Error("BigInt is not supported!");return Xi(ee)}function Sf(){let ee=[];ee[0]=Xn(1);let n=Xn(900);ee[1]=n;for(let c=2;c<16;c++)ee[c]=ee[c-1]*n;return ee}class rt{static decode(n,c){let u=new ue(""),m=U.ISO8859_1;u.enableDecoding(m);let g=1,v=n[g++],N=new Do;for(;g<n[0];){switch(v){case rt.TEXT_COMPACTION_MODE_LATCH:g=rt.textCompaction(n,g,u);break;case rt.BYTE_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH_6:g=rt.byteCompaction(v,n,m,g,u);break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(n[g++]);break;case rt.NUMERIC_COMPACTION_MODE_LATCH:g=rt.numericCompaction(n,g,u);break;case rt.ECI_CHARSET:U.getCharacterSetECIByValue(n[g++]);break;case rt.ECI_GENERAL_PURPOSE:g+=2;break;case rt.ECI_USER_DEFINED:g++;break;case rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=rt.decodeMacroBlock(n,g,N);break;case rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case rt.MACRO_PDF417_TERMINATOR:throw new L;default:g--,g=rt.textCompaction(n,g,u);break}if(g<n.length)v=n[g++];else throw L.getFormatInstance()}if(u.length()===0)throw L.getFormatInstance();let S=new Ve(null,u.toString(),null,c);return S.setOther(N),S}static decodeMacroBlock(n,c,u){if(c+rt.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw L.getFormatInstance();let m=new Int32Array(rt.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<rt.NUMBER_OF_SEQUENCE_CODEWORDS;N++,c++)m[N]=n[c];u.setSegmentIndex(D.parseInt(rt.decodeBase900toBase10(m,rt.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new ue;c=rt.textCompaction(n,c,g),u.setFileId(g.toString());let v=-1;for(n[c]===rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(v=c+1);c<n[0];)switch(n[c]){case rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,n[c]){case rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new ue;c=rt.textCompaction(n,c+1,N),u.setFileName(N.toString());break;case rt.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let S=new ue;c=rt.textCompaction(n,c+1,S),u.setSender(S.toString());break;case rt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let F=new ue;c=rt.textCompaction(n,c+1,F),u.setAddressee(F.toString());break;case rt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let V=new ue;c=rt.numericCompaction(n,c+1,V),u.setSegmentCount(D.parseInt(V.toString()));break;case rt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let te=new ue;c=rt.numericCompaction(n,c+1,te),u.setTimestamp(Ro.parseLong(te.toString()));break;case rt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let fe=new ue;c=rt.numericCompaction(n,c+1,fe),u.setChecksum(D.parseInt(fe.toString()));break;case rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let je=new ue;c=rt.numericCompaction(n,c+1,je),u.setFileSize(Ro.parseLong(je.toString()));break;default:throw L.getFormatInstance()}break;case rt.MACRO_PDF417_TERMINATOR:c++,u.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(v!==-1){let N=c-v;u.isLastSegment()&&N--,u.setOptionalData(M.copyOfRange(n,v,v+N))}return c}static textCompaction(n,c,u){let m=new Int32Array((n[0]-c)*2),g=new Int32Array((n[0]-c)*2),v=0,N=!1;for(;c<n[0]&&!N;){let S=n[c++];if(S<rt.TEXT_COMPACTION_MODE_LATCH)m[v]=S/30,m[v+1]=S%30,v+=2;else switch(S){case rt.TEXT_COMPACTION_MODE_LATCH:m[v++]=rt.TEXT_COMPACTION_MODE_LATCH;break;case rt.BYTE_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH_6:case rt.NUMERIC_COMPACTION_MODE_LATCH:case rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case rt.MACRO_PDF417_TERMINATOR:c--,N=!0;break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[v]=rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,S=n[c++],g[v]=S,v++;break}}return rt.decodeTextCompaction(m,g,v,u),c}static decodeTextCompaction(n,c,u,m){let g=Sr.ALPHA,v=Sr.ALPHA,N=0;for(;N<u;){let S=n[N],F="";switch(g){case Sr.ALPHA:if(S<26)F=String.fromCharCode(65+S);else switch(S){case 26:F=" ";break;case rt.LL:g=Sr.LOWER;break;case rt.ML:g=Sr.MIXED;break;case rt.PS:v=g,g=Sr.PUNCT_SHIFT;break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case rt.TEXT_COMPACTION_MODE_LATCH:g=Sr.ALPHA;break}break;case Sr.LOWER:if(S<26)F=String.fromCharCode(97+S);else switch(S){case 26:F=" ";break;case rt.AS:v=g,g=Sr.ALPHA_SHIFT;break;case rt.ML:g=Sr.MIXED;break;case rt.PS:v=g,g=Sr.PUNCT_SHIFT;break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case rt.TEXT_COMPACTION_MODE_LATCH:g=Sr.ALPHA;break}break;case Sr.MIXED:if(S<rt.PL)F=rt.MIXED_CHARS[S];else switch(S){case rt.PL:g=Sr.PUNCT;break;case 26:F=" ";break;case rt.LL:g=Sr.LOWER;break;case rt.AL:g=Sr.ALPHA;break;case rt.PS:v=g,g=Sr.PUNCT_SHIFT;break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case rt.TEXT_COMPACTION_MODE_LATCH:g=Sr.ALPHA;break}break;case Sr.PUNCT:if(S<rt.PAL)F=rt.PUNCT_CHARS[S];else switch(S){case rt.PAL:g=Sr.ALPHA;break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case rt.TEXT_COMPACTION_MODE_LATCH:g=Sr.ALPHA;break}break;case Sr.ALPHA_SHIFT:if(g=v,S<26)F=String.fromCharCode(65+S);else switch(S){case 26:F=" ";break;case rt.TEXT_COMPACTION_MODE_LATCH:g=Sr.ALPHA;break}break;case Sr.PUNCT_SHIFT:if(g=v,S<rt.PAL)F=rt.PUNCT_CHARS[S];else switch(S){case rt.PAL:g=Sr.ALPHA;break;case rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case rt.TEXT_COMPACTION_MODE_LATCH:g=Sr.ALPHA;break}break}F!==""&&m.append(F),N++}}static byteCompaction(n,c,u,m,g){let v=new Af,N=0,S=0,F=!1;switch(n){case rt.BYTE_COMPACTION_MODE_LATCH:let V=new Int32Array(6),te=c[m++];for(;m<c[0]&&!F;)switch(V[N++]=te,S=900*S+te,te=c[m++],te){case rt.TEXT_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH:case rt.NUMERIC_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH_6:case rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case rt.MACRO_PDF417_TERMINATOR:m--,F=!0;break;default:if(N%5===0&&N>0){for(let fe=0;fe<6;++fe)v.write(Number(Xn(S)>>Xn(8*(5-fe))));S=0,N=0}break}m===c[0]&&te<rt.TEXT_COMPACTION_MODE_LATCH&&(V[N++]=te);for(let fe=0;fe<N;fe++)v.write(V[fe]);break;case rt.BYTE_COMPACTION_MODE_LATCH_6:for(;m<c[0]&&!F;){let fe=c[m++];if(fe<rt.TEXT_COMPACTION_MODE_LATCH)N++,S=900*S+fe;else switch(fe){case rt.TEXT_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH:case rt.NUMERIC_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH_6:case rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case rt.MACRO_PDF417_TERMINATOR:m--,F=!0;break}if(N%5===0&&N>0){for(let je=0;je<6;++je)v.write(Number(Xn(S)>>Xn(8*(5-je))));S=0,N=0}}break}return g.append(ae.decode(v.toByteArray(),u)),m}static numericCompaction(n,c,u){let m=0,g=!1,v=new Int32Array(rt.MAX_NUMERIC_CODEWORDS);for(;c<n[0]&&!g;){let N=n[c++];if(c===n[0]&&(g=!0),N<rt.TEXT_COMPACTION_MODE_LATCH)v[m]=N,m++;else switch(N){case rt.TEXT_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH:case rt.BYTE_COMPACTION_MODE_LATCH_6:case rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case rt.MACRO_PDF417_TERMINATOR:c--,g=!0;break}(m%rt.MAX_NUMERIC_CODEWORDS===0||N===rt.NUMERIC_COMPACTION_MODE_LATCH||g)&&m>0&&(u.append(rt.decodeBase900toBase10(v,m)),m=0)}return c}static decodeBase900toBase10(n,c){let u=Xn(0);for(let g=0;g<c;g++)u+=rt.EXP900[c-g-1]*Xn(n[g]);let m=u.toString();if(m.charAt(0)!=="1")throw new L;return m.substring(1)}}rt.TEXT_COMPACTION_MODE_LATCH=900,rt.BYTE_COMPACTION_MODE_LATCH=901,rt.NUMERIC_COMPACTION_MODE_LATCH=902,rt.BYTE_COMPACTION_MODE_LATCH_6=924,rt.ECI_USER_DEFINED=925,rt.ECI_GENERAL_PURPOSE=926,rt.ECI_CHARSET=927,rt.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,rt.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,rt.MACRO_PDF417_TERMINATOR=922,rt.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,rt.MAX_NUMERIC_CODEWORDS=15,rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,rt.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,rt.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,rt.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,rt.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,rt.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,rt.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,rt.PL=25,rt.LL=27,rt.AS=27,rt.ML=28,rt.AL=28,rt.PS=29,rt.PAL=29,rt.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,rt.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",rt.EXP900=yd()?Sf():[],rt.NUMBER_OF_SEQUENCE_CODEWORDS=2;class nr{constructor(){}static decode(n,c,u,m,g,v,N){let S=new Un(n,c,u,m,g),F=null,V=null,te;for(let De=!0;;De=!1){if(c!=null&&(F=nr.getRowIndicatorColumn(n,S,c,!0,v,N)),m!=null&&(V=nr.getRowIndicatorColumn(n,S,m,!1,v,N)),te=nr.merge(F,V),te==null)throw G.getNotFoundInstance();let Re=te.getBoundingBox();if(De&&Re!=null&&(Re.getMinY()<S.getMinY()||Re.getMaxY()>S.getMaxY()))S=Re;else break}te.setBoundingBox(S);let fe=te.getBarcodeColumnCount()+1;te.setDetectionResultColumn(0,F),te.setDetectionResultColumn(fe,V);let je=F!=null;for(let De=1;De<=fe;De++){let Re=je?De:fe-De;if(te.getDetectionResultColumn(Re)!==void 0)continue;let Xe;Re===0||Re===fe?Xe=new Vn(S,Re===0):Xe=new Vi(S),te.setDetectionResultColumn(Re,Xe);let et=-1,gt=et;for(let vt=S.getMinY();vt<=S.getMaxY();vt++){if(et=nr.getStartColumn(te,Re,vt,je),et<0||et>S.getMaxX()){if(gt===-1)continue;et=gt}let ht=nr.detectCodeword(n,S.getMinX(),S.getMaxX(),je,et,vt,v,N);ht!=null&&(Xe.setCodeword(vt,ht),gt=et,v=Math.min(v,ht.getWidth()),N=Math.max(N,ht.getWidth()))}}return nr.createDecoderResult(te)}static merge(n,c){if(n==null&&c==null)return null;let u=nr.getBarcodeMetadata(n,c);if(u==null)return null;let m=Un.merge(nr.adjustBoundingBox(n),nr.adjustBoundingBox(c));return new Gn(u,m)}static adjustBoundingBox(n){if(n==null)return null;let c=n.getRowHeights();if(c==null)return null;let u=nr.getMax(c),m=0;for(let N of c)if(m+=u-N,N>0)break;let g=n.getCodewords();for(let N=0;m>0&&g[N]==null;N++)m--;let v=0;for(let N=c.length-1;N>=0&&(v+=u-c[N],!(c[N]>0));N--);for(let N=g.length-1;v>0&&g[N]==null;N--)v--;return n.getBoundingBox().addMissingRows(m,v,n.isLeft())}static getMax(n){let c=-1;for(let u of n)c=Math.max(c,u);return c}static getBarcodeMetadata(n,c){let u;if(n==null||(u=n.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let m;return c==null||(m=c.getBarcodeMetadata())==null?u:u.getColumnCount()!==m.getColumnCount()&&u.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&u.getRowCount()!==m.getRowCount()?null:u}static getRowIndicatorColumn(n,c,u,m,g,v){let N=new Vn(c,m);for(let S=0;S<2;S++){let F=S===0?1:-1,V=Math.trunc(Math.trunc(u.getX()));for(let te=Math.trunc(Math.trunc(u.getY()));te<=c.getMaxY()&&te>=c.getMinY();te+=F){let fe=nr.detectCodeword(n,0,n.getWidth(),m,V,te,g,v);fe!=null&&(N.setCodeword(te,fe),m?V=fe.getStartX():V=fe.getEndX())}}return N}static adjustCodewordCount(n,c){let u=c[0][1],m=u.getValue(),g=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-nr.getNumberOfECCodeWords(n.getBarcodeECLevel());if(m.length===0){if(g<1||g>It.MAX_CODEWORDS_IN_BARCODE)throw G.getNotFoundInstance();u.setValue(g)}else m[0]!==g&&u.setValue(g)}static createDecoderResult(n){let c=nr.createBarcodeMatrix(n);nr.adjustCodewordCount(n,c);let u=new Array,m=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),g=[],v=new Array;for(let S=0;S<n.getBarcodeRowCount();S++)for(let F=0;F<n.getBarcodeColumnCount();F++){let V=c[S][F+1].getValue(),te=S*n.getBarcodeColumnCount()+F;V.length===0?u.push(te):V.length===1?m[te]=V[0]:(v.push(te),g.push(V))}let N=new Array(g.length);for(let S=0;S<N.length;S++)N[S]=g[S];return nr.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),m,It.toIntArray(u),It.toIntArray(v),N)}static createDecoderResultFromAmbiguousValues(n,c,u,m,g){let v=new Int32Array(m.length),N=100;for(;N-- >0;){for(let S=0;S<v.length;S++)c[m[S]]=g[S][v[S]];try{return nr.decodeCodewords(c,n,u)}catch(S){if(!(S instanceof _))throw S}if(v.length===0)throw _.getChecksumInstance();for(let S=0;S<v.length;S++)if(v[S]<g[S].length-1){v[S]++;break}else if(v[S]=0,S===v.length-1)throw _.getChecksumInstance()}throw _.getChecksumInstance()}static createBarcodeMatrix(n){let c=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let m=0;m<c.length;m++)for(let g=0;g<c[m].length;g++)c[m][g]=new ka;let u=0;for(let m of n.getDetectionResultColumns()){if(m!=null){for(let g of m.getCodewords())if(g!=null){let v=g.getRowNumber();if(v>=0){if(v>=c.length)continue;c[v][u].setValue(g.getValue())}}}u++}return c}static isValidBarcodeColumn(n,c){return c>=0&&c<=n.getBarcodeColumnCount()+1}static getStartColumn(n,c,u,m){let g=m?1:-1,v=null;if(nr.isValidBarcodeColumn(n,c-g)&&(v=n.getDetectionResultColumn(c-g).getCodeword(u)),v!=null)return m?v.getEndX():v.getStartX();if(v=n.getDetectionResultColumn(c).getCodewordNearby(u),v!=null)return m?v.getStartX():v.getEndX();if(nr.isValidBarcodeColumn(n,c-g)&&(v=n.getDetectionResultColumn(c-g).getCodewordNearby(u)),v!=null)return m?v.getEndX():v.getStartX();let N=0;for(;nr.isValidBarcodeColumn(n,c-g);){c-=g;for(let S of n.getDetectionResultColumn(c).getCodewords())if(S!=null)return(m?S.getEndX():S.getStartX())+g*N*(S.getEndX()-S.getStartX());N++}return m?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,c,u,m,g,v,N,S){g=nr.adjustCodewordStartColumn(n,c,u,m,g,v);let F=nr.getModuleBitCount(n,c,u,m,g,v);if(F==null)return null;let V,te=pe.sum(F);if(m)V=g+te;else{for(let De=0;De<F.length/2;De++){let Re=F[De];F[De]=F[F.length-1-De],F[F.length-1-De]=Re}V=g,g=V-te}if(!nr.checkCodewordSkew(te,N,S))return null;let fe=as.getDecodedValue(F),je=It.getCodeword(fe);return je===-1?null:new Nn(g,V,nr.getCodewordBucketNumber(fe),je)}static getModuleBitCount(n,c,u,m,g,v){let N=g,S=new Int32Array(8),F=0,V=m?1:-1,te=m;for(;(m?N<u:N>=c)&&F<S.length;)n.get(N,v)===te?(S[F]++,N+=V):(F++,te=!te);return F===S.length||N===(m?u:c)&&F===S.length-1?S:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,c,u,m,g,v){let N=g,S=m?-1:1;for(let F=0;F<2;F++){for(;(m?N>=c:N<u)&&m===n.get(N,v);){if(Math.abs(g-N)>nr.CODEWORD_SKEW_SIZE)return g;N+=S}S=-S,m=!m}return N}static checkCodewordSkew(n,c,u){return c-nr.CODEWORD_SKEW_SIZE<=n&&n<=u+nr.CODEWORD_SKEW_SIZE}static decodeCodewords(n,c,u){if(n.length===0)throw L.getFormatInstance();let m=1<<c+1,g=nr.correctErrors(n,u,m);nr.verifyCodewordCount(n,m);let v=rt.decode(n,""+c);return v.setErrorsCorrected(g),v.setErasures(u.length),v}static correctErrors(n,c,u){if(c!=null&&c.length>u/2+nr.MAX_ERRORS||u<0||u>nr.MAX_EC_CODEWORDS)throw _.getChecksumInstance();return nr.errorCorrection.decode(n,u,c)}static verifyCodewordCount(n,c){if(n.length<4)throw L.getFormatInstance();let u=n[0];if(u>n.length)throw L.getFormatInstance();if(u===0)if(c<n.length)n[0]=n.length-c;else throw L.getFormatInstance()}static getBitCountForCodeword(n){let c=new Int32Array(8),u=0,m=c.length-1;for(;!((n&1)!==u&&(u=n&1,m--,m<0));)c[m]++,n>>=1;return c}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return nr.getCodewordBucketNumber(nr.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let c=new Hn;for(let u=0;u<n.length;u++){c.format("Row %2d: ",u);for(let m=0;m<n[u].length;m++){let g=n[u][m];g.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}c.format("%n")}return c.toString()}}nr.CODEWORD_SKEW_SIZE=2,nr.MAX_ERRORS=3,nr.MAX_EC_CODEWORDS=512,nr.errorCorrection=new Fl;class Ia{decode(n,c=null){let u=Ia.decode(n,c,!1);if(u==null||u.length===0||u[0]==null)throw G.getNotFoundInstance();return u[0]}decodeMultiple(n,c=null){try{return Ia.decode(n,c,!0)}catch(u){throw u instanceof L||u instanceof _?G.getNotFoundInstance():u}}static decode(n,c,u){const m=new Array,g=Wt.detectMultiple(n,c,u);for(const v of g.getPoints()){const N=nr.decode(g.getBits(),v[4],v[5],v[6],v[7],Ia.getMinCodewordWidth(v),Ia.getMaxCodewordWidth(v)),S=new se(N.getText(),N.getRawBytes(),void 0,v,K.PDF_417);S.putMetadata(we.ERROR_CORRECTION_LEVEL,N.getECLevel());const F=N.getOther();F!=null&&S.putMetadata(we.PDF417_EXTRA_METADATA,F),m.push(S)}return m.map(v=>v)}static getMaxWidth(n,c){return n==null||c==null?0:Math.trunc(Math.abs(n.getX()-c.getX()))}static getMinWidth(n,c){return n==null||c==null?D.MAX_VALUE:Math.trunc(Math.abs(n.getX()-c.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Ia.getMaxWidth(n[0],n[4]),Ia.getMaxWidth(n[6],n[2])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN),Math.max(Ia.getMaxWidth(n[1],n[5]),Ia.getMaxWidth(n[7],n[3])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Ia.getMinWidth(n[0],n[4]),Ia.getMinWidth(n[6],n[2])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN),Math.min(Ia.getMinWidth(n[1],n[5]),Ia.getMinWidth(n[7],n[3])*It.MODULES_IN_CODEWORD/It.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ml extends p{}Ml.kind="ReaderException";class bd{constructor(n,c){this.verbose=n===!0,c&&this.setHints(c)}decode(n,c){return c&&this.setHints(c),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const c=!i(n)&&n.get(z.TRY_HARDER)===!0,u=i(n)?null:n.get(z.POSSIBLE_FORMATS),m=new Array;if(!i(u)){const g=u.some(v=>v===K.UPC_A||v===K.UPC_E||v===K.EAN_13||v===K.EAN_8||v===K.CODABAR||v===K.CODE_39||v===K.CODE_93||v===K.CODE_128||v===K.ITF||v===K.RSS_14||v===K.RSS_EXPANDED);g&&!c&&m.push(new ts(n,this.verbose)),u.includes(K.QR_CODE)&&m.push(new vn),u.includes(K.DATA_MATRIX)&&m.push(new Hs),u.includes(K.AZTEC)&&m.push(new lr),u.includes(K.PDF_417)&&m.push(new Ia),g&&c&&m.push(new ts(n,this.verbose))}m.length===0&&(c||m.push(new ts(n,this.verbose)),m.push(new vn),m.push(new Hs),m.push(new lr),m.push(new Ia),c&&m.push(new ts(n,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Ml("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(n,this.hints)}catch(u){if(u instanceof Ml)continue}throw new G("No MultiFormat Readers were able to detect the code.")}}class Tf extends X{constructor(n=null,c=500){const u=new bd;u.setHints(n),super(u,c)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Df extends X{constructor(n=500){super(new Ia,n)}}class Rf extends X{constructor(n=500){super(new vn,n)}}var Bl;(function(ee){ee[ee.ERROR_CORRECTION=0]="ERROR_CORRECTION",ee[ee.CHARACTER_SET=1]="CHARACTER_SET",ee[ee.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",ee[ee.MIN_SIZE=3]="MIN_SIZE",ee[ee.MAX_SIZE=4]="MAX_SIZE",ee[ee.MARGIN=5]="MARGIN",ee[ee.PDF417_COMPACT=6]="PDF417_COMPACT",ee[ee.PDF417_COMPACTION=7]="PDF417_COMPACTION",ee[ee.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",ee[ee.AZTEC_LAYERS=9]="AZTEC_LAYERS",ee[ee.QR_VERSION=10]="QR_VERSION"})(Bl||(Bl={}));var ya=Bl;class Sc{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new ot(n,Int32Array.from([1])))}buildGenerator(n){const c=this.cachedGenerators;if(n>=c.length){let u=c[c.length-1];const m=this.field;for(let g=c.length;g<=n;g++){const v=u.multiply(new ot(m,Int32Array.from([1,m.exp(g-1+m.getGeneratorBase())])));c.push(v),u=v}}return c[n]}encode(n,c){if(c===0)throw new j("No error correction bytes");const u=n.length-c;if(u<=0)throw new j("No data bytes provided");const m=this.buildGenerator(c),g=new Int32Array(u);A.arraycopy(n,0,g,0,u);let v=new ot(this.field,g);v=v.multiplyByMonomial(c,1);const S=v.divide(m)[1].getCoefficients(),F=c-S.length;for(let V=0;V<F;V++)n[u+V]=0;A.arraycopy(S,0,n,u+F,S.length)}}class Qr{constructor(){}static applyMaskPenaltyRule1(n){return Qr.applyMaskPenaltyRule1Internal(n,!0)+Qr.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let c=0;const u=n.getArray(),m=n.getWidth(),g=n.getHeight();for(let v=0;v<g-1;v++){const N=u[v];for(let S=0;S<m-1;S++){const F=N[S];F===N[S+1]&&F===u[v+1][S]&&F===u[v+1][S+1]&&c++}}return Qr.N2*c}static applyMaskPenaltyRule3(n){let c=0;const u=n.getArray(),m=n.getWidth(),g=n.getHeight();for(let v=0;v<g;v++)for(let N=0;N<m;N++){const S=u[v];N+6<m&&S[N]===1&&S[N+1]===0&&S[N+2]===1&&S[N+3]===1&&S[N+4]===1&&S[N+5]===0&&S[N+6]===1&&(Qr.isWhiteHorizontal(S,N-4,N)||Qr.isWhiteHorizontal(S,N+7,N+11))&&c++,v+6<g&&u[v][N]===1&&u[v+1][N]===0&&u[v+2][N]===1&&u[v+3][N]===1&&u[v+4][N]===1&&u[v+5][N]===0&&u[v+6][N]===1&&(Qr.isWhiteVertical(u,N,v-4,v)||Qr.isWhiteVertical(u,N,v+7,v+11))&&c++}return c*Qr.N3}static isWhiteHorizontal(n,c,u){c=Math.max(c,0),u=Math.min(u,n.length);for(let m=c;m<u;m++)if(n[m]===1)return!1;return!0}static isWhiteVertical(n,c,u,m){u=Math.max(u,0),m=Math.min(m,n.length);for(let g=u;g<m;g++)if(n[g][c]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let c=0;const u=n.getArray(),m=n.getWidth(),g=n.getHeight();for(let S=0;S<g;S++){const F=u[S];for(let V=0;V<m;V++)F[V]===1&&c++}const v=n.getHeight()*n.getWidth();return Math.floor(Math.abs(c*2-v)*10/v)*Qr.N4}static getDataMaskBit(n,c,u){let m,g;switch(n){case 0:m=u+c&1;break;case 1:m=u&1;break;case 2:m=c%3;break;case 3:m=(u+c)%3;break;case 4:m=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:g=u*c,m=(g&1)+g%3;break;case 6:g=u*c,m=(g&1)+g%3&1;break;case 7:g=u*c,m=g%3+(u+c&1)&1;break;default:throw new j("Invalid mask pattern: "+n)}return m===0}static applyMaskPenaltyRule1Internal(n,c){let u=0;const m=c?n.getHeight():n.getWidth(),g=c?n.getWidth():n.getHeight(),v=n.getArray();for(let N=0;N<m;N++){let S=0,F=-1;for(let V=0;V<g;V++){const te=c?v[N][V]:v[V][N];te===F?S++:(S>=5&&(u+=Qr.N1+(S-5)),S=1,F=te)}S>=5&&(u+=Qr.N1+(S-5))}return u}}Qr.N1=3,Qr.N2=3,Qr.N3=40,Qr.N4=10;class Ll{constructor(n,c){this.width=n,this.height=c;const u=new Array(c);for(let m=0;m!==c;m++)u[m]=new Uint8Array(n);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(n,c){return this.bytes[c][n]}getArray(){return this.bytes}setNumber(n,c,u){this.bytes[c][n]=u}setBoolean(n,c,u){this.bytes[c][n]=u?1:0}clear(n){for(const c of this.bytes)M.fill(c,n)}equals(n){if(!(n instanceof Ll))return!1;const c=n;if(this.width!==c.width||this.height!==c.height)return!1;for(let u=0,m=this.height;u<m;++u){const g=this.bytes[u],v=c.bytes[u];for(let N=0,S=this.width;N<S;++N)if(g[N]!==v[N])return!1}return!0}toString(){const n=new ue;for(let c=0,u=this.height;c<u;++c){const m=this.bytes[c];for(let g=0,v=this.width;g<v;++g)switch(m[g]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class ui{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ue;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<ui.NUM_MASK_PATTERNS}}ui.NUM_MASK_PATTERNS=8;class Dr extends p{}Dr.kind="WriterException";class Ft{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,c,u,m,g){Ft.clearMatrix(g),Ft.embedBasicPatterns(u,g),Ft.embedTypeInfo(c,m,g),Ft.maybeEmbedVersionInfo(u,g),Ft.embedDataBits(n,m,g)}static embedBasicPatterns(n,c){Ft.embedPositionDetectionPatternsAndSeparators(c),Ft.embedDarkDotAtLeftBottomCorner(c),Ft.maybeEmbedPositionAdjustmentPatterns(n,c),Ft.embedTimingPatterns(c)}static embedTypeInfo(n,c,u){const m=new B;Ft.makeTypeInfoBits(n,c,m);for(let g=0,v=m.getSize();g<v;++g){const N=m.get(m.getSize()-1-g),S=Ft.TYPE_INFO_COORDINATES[g],F=S[0],V=S[1];if(u.setBoolean(F,V,N),g<8){const te=u.getWidth()-g-1;u.setBoolean(te,8,N)}else{const fe=u.getHeight()-7+(g-8);u.setBoolean(8,fe,N)}}}static maybeEmbedVersionInfo(n,c){if(n.getVersionNumber()<7)return;const u=new B;Ft.makeVersionInfoBits(n,u);let m=17;for(let g=0;g<6;++g)for(let v=0;v<3;++v){const N=u.get(m);m--,c.setBoolean(g,c.getHeight()-11+v,N),c.setBoolean(c.getHeight()-11+v,g,N)}}static embedDataBits(n,c,u){let m=0,g=-1,v=u.getWidth()-1,N=u.getHeight()-1;for(;v>0;){for(v===6&&(v-=1);N>=0&&N<u.getHeight();){for(let S=0;S<2;++S){const F=v-S;if(!Ft.isEmpty(u.get(F,N)))continue;let V;m<n.getSize()?(V=n.get(m),++m):V=!1,c!==255&&Qr.getDataMaskBit(c,F,N)&&(V=!V),u.setBoolean(F,N,V)}N+=g}g=-g,N+=g,v-=2}if(m!==n.getSize())throw new Dr("Not all bits consumed: "+m+"/"+n.getSize())}static findMSBSet(n){return 32-D.numberOfLeadingZeros(n)}static calculateBCHCode(n,c){if(c===0)throw new j("0 polynomial");const u=Ft.findMSBSet(c);for(n<<=u-1;Ft.findMSBSet(n)>=u;)n^=c<<Ft.findMSBSet(n)-u;return n}static makeTypeInfoBits(n,c,u){if(!ui.isValidMaskPattern(c))throw new Dr("Invalid mask pattern");const m=n.getBits()<<3|c;u.appendBits(m,5);const g=Ft.calculateBCHCode(m,Ft.TYPE_INFO_POLY);u.appendBits(g,10);const v=new B;if(v.appendBits(Ft.TYPE_INFO_MASK_PATTERN,15),u.xor(v),u.getSize()!==15)throw new Dr("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(n,c){c.appendBits(n.getVersionNumber(),6);const u=Ft.calculateBCHCode(n.getVersionNumber(),Ft.VERSION_INFO_POLY);if(c.appendBits(u,12),c.getSize()!==18)throw new Dr("should not happen but we got: "+c.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let c=8;c<n.getWidth()-8;++c){const u=(c+1)%2;Ft.isEmpty(n.get(c,6))&&n.setNumber(c,6,u),Ft.isEmpty(n.get(6,c))&&n.setNumber(6,c,u)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Dr;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,c,u){for(let m=0;m<8;++m){if(!Ft.isEmpty(u.get(n+m,c)))throw new Dr;u.setNumber(n+m,c,0)}}static embedVerticalSeparationPattern(n,c,u){for(let m=0;m<7;++m){if(!Ft.isEmpty(u.get(n,c+m)))throw new Dr;u.setNumber(n,c+m,0)}}static embedPositionAdjustmentPattern(n,c,u){for(let m=0;m<5;++m){const g=Ft.POSITION_ADJUSTMENT_PATTERN[m];for(let v=0;v<5;++v)u.setNumber(n+v,c+m,g[v])}}static embedPositionDetectionPattern(n,c,u){for(let m=0;m<7;++m){const g=Ft.POSITION_DETECTION_PATTERN[m];for(let v=0;v<7;++v)u.setNumber(n+v,c+m,g[v])}}static embedPositionDetectionPatternsAndSeparators(n){const c=Ft.POSITION_DETECTION_PATTERN[0].length;Ft.embedPositionDetectionPattern(0,0,n),Ft.embedPositionDetectionPattern(n.getWidth()-c,0,n),Ft.embedPositionDetectionPattern(0,n.getWidth()-c,n);const u=8;Ft.embedHorizontalSeparationPattern(0,u-1,n),Ft.embedHorizontalSeparationPattern(n.getWidth()-u,u-1,n),Ft.embedHorizontalSeparationPattern(0,n.getWidth()-u,n);const m=7;Ft.embedVerticalSeparationPattern(m,0,n),Ft.embedVerticalSeparationPattern(n.getHeight()-m-1,0,n),Ft.embedVerticalSeparationPattern(m,n.getHeight()-m,n)}static maybeEmbedPositionAdjustmentPatterns(n,c){if(n.getVersionNumber()<2)return;const u=n.getVersionNumber()-1,m=Ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let g=0,v=m.length;g!==v;g++){const N=m[g];if(N>=0)for(let S=0;S!==v;S++){const F=m[S];F>=0&&Ft.isEmpty(c.get(F,N))&&Ft.embedPositionAdjustmentPattern(F-2,N-2,c)}}}}Ft.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ft.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ft.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ft.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ft.VERSION_INFO_POLY=7973,Ft.TYPE_INFO_POLY=1335,Ft.TYPE_INFO_MASK_PATTERN=21522;class Of{constructor(n,c){this.dataBytes=n,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ur{constructor(){}static calculateMaskPenalty(n){return Qr.applyMaskPenaltyRule1(n)+Qr.applyMaskPenaltyRule2(n)+Qr.applyMaskPenaltyRule3(n)+Qr.applyMaskPenaltyRule4(n)}static encode(n,c,u=null){let m=Ur.DEFAULT_BYTE_MODE_ENCODING;const g=u!==null&&u.get(ya.CHARACTER_SET)!==void 0;g&&(m=u.get(ya.CHARACTER_SET).toString());const v=this.chooseMode(n,m),N=new B;if(v===Rt.BYTE&&(g||Ur.DEFAULT_BYTE_MODE_ENCODING!==m)){const vt=U.getCharacterSetECIByName(m);vt!==void 0&&this.appendECI(vt,N)}this.appendModeInfo(v,N);const S=new B;this.appendBytes(n,v,S,m);let F;if(u!==null&&u.get(ya.QR_VERSION)!==void 0){const vt=Number.parseInt(u.get(ya.QR_VERSION).toString(),10);F=Tt.getVersionForNumber(vt);const ht=this.calculateBitsNeeded(v,N,S,F);if(!this.willFit(ht,F,c))throw new Dr("Data too big for requested version")}else F=this.recommendVersion(c,v,N,S);const V=new B;V.appendBitArray(N);const te=v===Rt.BYTE?S.getSizeInBytes():n.length;this.appendLengthInfo(te,F,v,V),V.appendBitArray(S);const fe=F.getECBlocksForLevel(c),je=F.getTotalCodewords()-fe.getTotalECCodewords();this.terminateBits(je,V);const De=this.interleaveWithECBytes(V,F.getTotalCodewords(),je,fe.getNumBlocks()),Re=new ui;Re.setECLevel(c),Re.setMode(v),Re.setVersion(F);const Xe=F.getDimensionForVersion(),et=new Ll(Xe,Xe),gt=this.chooseMaskPattern(De,c,F,et);return Re.setMaskPattern(gt),Ft.buildMatrix(De,c,F,gt,et),Re.setMatrix(et),Re}static recommendVersion(n,c,u,m){const g=this.calculateBitsNeeded(c,u,m,Tt.getVersionForNumber(1)),v=this.chooseVersion(g,n),N=this.calculateBitsNeeded(c,u,m,v);return this.chooseVersion(N,n)}static calculateBitsNeeded(n,c,u,m){return c.getSize()+n.getCharacterCountBits(m)+u.getSize()}static getAlphanumericCode(n){return n<Ur.ALPHANUMERIC_TABLE.length?Ur.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,c=null){if(U.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(n))return Rt.KANJI;let u=!1,m=!1;for(let g=0,v=n.length;g<v;++g){const N=n.charAt(g);if(Ur.isDigit(N))u=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)m=!0;else return Rt.BYTE}return m?Rt.ALPHANUMERIC:u?Rt.NUMERIC:Rt.BYTE}static isOnlyDoubleByteKanji(n){let c;try{c=ae.encode(n,U.SJIS)}catch{return!1}const u=c.length;if(u%2!==0)return!1;for(let m=0;m<u;m+=2){const g=c[m]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(n,c,u,m){let g=Number.MAX_SAFE_INTEGER,v=-1;for(let N=0;N<ui.NUM_MASK_PATTERNS;N++){Ft.buildMatrix(n,c,u,N,m);let S=this.calculateMaskPenalty(m);S<g&&(g=S,v=N)}return v}static chooseVersion(n,c){for(let u=1;u<=40;u++){const m=Tt.getVersionForNumber(u);if(Ur.willFit(n,m,c))return m}throw new Dr("Data too big")}static willFit(n,c,u){const m=c.getTotalCodewords(),v=c.getECBlocksForLevel(u).getTotalECCodewords(),N=m-v,S=(n+7)/8;return N>=S}static terminateBits(n,c){const u=n*8;if(c.getSize()>u)throw new Dr("data bits cannot fit in the QR Code"+c.getSize()+" > "+u);for(let v=0;v<4&&c.getSize()<u;++v)c.appendBit(!1);const m=c.getSize()&7;if(m>0)for(let v=m;v<8;v++)c.appendBit(!1);const g=n-c.getSizeInBytes();for(let v=0;v<g;++v)c.appendBits((v&1)===0?236:17,8);if(c.getSize()!==u)throw new Dr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,c,u,m,g,v){if(m>=u)throw new Dr("Block ID too large");const N=n%u,S=u-N,F=Math.floor(n/u),V=F+1,te=Math.floor(c/u),fe=te+1,je=F-te,De=V-fe;if(je!==De)throw new Dr("EC bytes mismatch");if(u!==S+N)throw new Dr("RS blocks mismatch");if(n!==(te+je)*S+(fe+De)*N)throw new Dr("Total bytes mismatch");m<S?(g[0]=te,v[0]=je):(g[0]=fe,v[0]=De)}static interleaveWithECBytes(n,c,u,m){if(n.getSizeInBytes()!==u)throw new Dr("Number of bits and data bytes does not match");let g=0,v=0,N=0;const S=new Array;for(let V=0;V<m;++V){const te=new Int32Array(1),fe=new Int32Array(1);Ur.getNumDataBytesAndNumECBytesForBlockID(c,u,m,V,te,fe);const je=te[0],De=new Uint8Array(je);n.toBytes(8*g,De,0,je);const Re=Ur.generateECBytes(De,fe[0]);S.push(new Of(De,Re)),v=Math.max(v,je),N=Math.max(N,Re.length),g+=te[0]}if(u!==g)throw new Dr("Data bytes does not match offset");const F=new B;for(let V=0;V<v;++V)for(const te of S){const fe=te.getDataBytes();V<fe.length&&F.appendBits(fe[V],8)}for(let V=0;V<N;++V)for(const te of S){const fe=te.getErrorCorrectionBytes();V<fe.length&&F.appendBits(fe[V],8)}if(c!==F.getSizeInBytes())throw new Dr("Interleaving error: "+c+" and "+F.getSizeInBytes()+" differ.");return F}static generateECBytes(n,c){const u=n.length,m=new Int32Array(u+c);for(let v=0;v<u;v++)m[v]=n[v]&255;new Sc(Ne.QR_CODE_FIELD_256).encode(m,c);const g=new Uint8Array(c);for(let v=0;v<c;v++)g[v]=m[u+v];return g}static appendModeInfo(n,c){c.appendBits(n.getBits(),4)}static appendLengthInfo(n,c,u,m){const g=u.getCharacterCountBits(c);if(n>=1<<g)throw new Dr(n+" is bigger than "+((1<<g)-1));m.appendBits(n,g)}static appendBytes(n,c,u,m){switch(c){case Rt.NUMERIC:Ur.appendNumericBytes(n,u);break;case Rt.ALPHANUMERIC:Ur.appendAlphanumericBytes(n,u);break;case Rt.BYTE:Ur.append8BitBytes(n,u,m);break;case Rt.KANJI:Ur.appendKanjiBytes(n,u);break;default:throw new Dr("Invalid mode: "+c)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const c=Ur.getDigit(n);return c>=0&&c<=9}static appendNumericBytes(n,c){const u=n.length;let m=0;for(;m<u;){const g=Ur.getDigit(n.charAt(m));if(m+2<u){const v=Ur.getDigit(n.charAt(m+1)),N=Ur.getDigit(n.charAt(m+2));c.appendBits(g*100+v*10+N,10),m+=3}else if(m+1<u){const v=Ur.getDigit(n.charAt(m+1));c.appendBits(g*10+v,7),m+=2}else c.appendBits(g,4),m++}}static appendAlphanumericBytes(n,c){const u=n.length;let m=0;for(;m<u;){const g=Ur.getAlphanumericCode(n.charCodeAt(m));if(g===-1)throw new Dr;if(m+1<u){const v=Ur.getAlphanumericCode(n.charCodeAt(m+1));if(v===-1)throw new Dr;c.appendBits(g*45+v,11),m+=2}else c.appendBits(g,6),m++}}static append8BitBytes(n,c,u){let m;try{m=ae.encode(n,u)}catch(g){throw new Dr(g)}for(let g=0,v=m.length;g!==v;g++){const N=m[g];c.appendBits(N,8)}}static appendKanjiBytes(n,c){let u;try{u=ae.encode(n,U.SJIS)}catch(g){throw new Dr(g)}const m=u.length;for(let g=0;g<m;g+=2){const v=u[g]&255,N=u[g+1]&255,S=v<<8&4294967295|N;let F=-1;if(S>=33088&&S<=40956?F=S-33088:S>=57408&&S<=60351&&(F=S-49472),F===-1)throw new Dr("Invalid byte sequence");const V=(F>>8)*192+(F&255);c.appendBits(V,13)}}static appendECI(n,c){c.appendBits(Rt.ECI.getBits(),4),c.appendBits(n.getValue(),8)}}Ur.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ur.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class fi{write(n,c,u,m=null){if(n.length===0)throw new j("Found empty contents");if(c<0||u<0)throw new j("Requested dimensions are too small: "+c+"x"+u);let g=Ar.L,v=fi.QUIET_ZONE_SIZE;m!==null&&(m.get(ya.ERROR_CORRECTION)!==void 0&&(g=Ar.fromString(m.get(ya.ERROR_CORRECTION).toString())),m.get(ya.MARGIN)!==void 0&&(v=Number.parseInt(m.get(ya.MARGIN).toString(),10)));const N=Ur.encode(n,g,m);return this.renderResult(N,c,u,v)}writeToDom(n,c,u,m,g=null){typeof n=="string"&&(n=document.querySelector(n));const v=this.write(c,u,m,g);n&&n.appendChild(v)}renderResult(n,c,u,m){const g=n.getMatrix();if(g===null)throw new ke;const v=g.getWidth(),N=g.getHeight(),S=v+m*2,F=N+m*2,V=Math.max(c,S),te=Math.max(u,F),fe=Math.min(Math.floor(V/S),Math.floor(te/F)),je=Math.floor((V-v*fe)/2),De=Math.floor((te-N*fe)/2),Re=this.createSVGElement(V,te);for(let Xe=0,et=De;Xe<N;Xe++,et+=fe)for(let gt=0,vt=je;gt<v;gt++,vt+=fe)if(g.get(gt,Xe)===1){const ht=this.createSvgRectElement(vt,et,fe,fe);Re.appendChild(ht)}return Re}createSVGElement(n,c){const u=document.createElementNS(fi.SVG_NS,"svg");return u.setAttributeNS(null,"height",n.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(n,c,u,m){const g=document.createElementNS(fi.SVG_NS,"rect");return g.setAttributeNS(null,"x",n.toString()),g.setAttributeNS(null,"y",c.toString()),g.setAttributeNS(null,"height",u.toString()),g.setAttributeNS(null,"width",m.toString()),g.setAttributeNS(null,"fill","#000000"),g}}fi.QUIET_ZONE_SIZE=4,fi.SVG_NS="http://www.w3.org/2000/svg";class qi{encode(n,c,u,m,g){if(n.length===0)throw new j("Found empty contents");if(c!==K.QR_CODE)throw new j("Can only encode QR_CODE, but got "+c);if(u<0||m<0)throw new j(`Requested dimensions are too small: ${u}x${m}`);let v=Ar.L,N=qi.QUIET_ZONE_SIZE;g!==null&&(g.get(ya.ERROR_CORRECTION)!==void 0&&(v=Ar.fromString(g.get(ya.ERROR_CORRECTION).toString())),g.get(ya.MARGIN)!==void 0&&(N=Number.parseInt(g.get(ya.MARGIN).toString(),10)));const S=Ur.encode(n,v,g);return qi.renderResult(S,u,m,N)}static renderResult(n,c,u,m){const g=n.getMatrix();if(g===null)throw new ke;const v=g.getWidth(),N=g.getHeight(),S=v+m*2,F=N+m*2,V=Math.max(c,S),te=Math.max(u,F),fe=Math.min(Math.floor(V/S),Math.floor(te/F)),je=Math.floor((V-v*fe)/2),De=Math.floor((te-N*fe)/2),Re=new de(V,te);for(let Xe=0,et=De;Xe<N;Xe++,et+=fe)for(let gt=0,vt=je;gt<v;gt++,vt+=fe)g.get(gt,Xe)===1&&Re.setRegion(vt,et,fe,fe);return Re}}qi.QUIET_ZONE_SIZE=4;class If{encode(n,c,u,m,g){let v;switch(c){case K.QR_CODE:v=new qi;break;default:throw new j("No encoder available for format "+c)}return v.encode(n,c,u,m,g)}}class an extends Ce{constructor(n,c,u,m,g,v,N,S){if(super(v,N),this.yuvData=n,this.dataWidth=c,this.dataHeight=u,this.left=m,this.top=g,m+v>c||g+N>u)throw new j("Crop rectangle does not fit within image data.");S&&this.reverseHorizontal(v,N)}getRow(n,c){if(n<0||n>=this.getHeight())throw new j("Requested row is outside the image: "+n);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(n+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,m,c,0,u),c}getMatrix(){const n=this.getWidth(),c=this.getHeight();if(n===this.dataWidth&&c===this.dataHeight)return this.yuvData;const u=n*c,m=new Uint8ClampedArray(u);let g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return A.arraycopy(this.yuvData,g,m,0,u),m;for(let v=0;v<c;v++){const N=v*n;A.arraycopy(this.yuvData,g,m,N,n),g+=this.dataWidth}return m}isCropSupported(){return!0}crop(n,c,u,m){return new an(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+c,u,m,!1)}renderThumbnail(){const n=this.getWidth()/an.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/an.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(n*c),m=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let v=0;v<c;v++){const N=v*n;for(let S=0;S<n;S++){const F=m[g+S*an.THUMBNAIL_SCALE_FACTOR]&255;u[N+S]=4278190080|F*65793}g+=this.dataWidth*an.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/an.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/an.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,c){const u=this.yuvData;for(let m=0,g=this.top*this.dataWidth+this.left;m<c;m++,g+=this.dataWidth){const v=g+n/2;for(let N=g,S=g+n-1;N<v;N++,S--){const F=u[N];u[N]=u[S],u[S]=F}}}invert(){return new le(this)}}an.THUMBNAIL_SCALE_FACTOR=2;class Pl extends Ce{constructor(n,c,u,m,g,v,N){if(super(c,u),this.dataWidth=m,this.dataHeight=g,this.left=v,this.top=N,n.BYTES_PER_ELEMENT===4){const S=c*u,F=new Uint8ClampedArray(S);for(let V=0;V<S;V++){const te=n[V],fe=te>>16&255,je=te>>7&510,De=te&255;F[V]=(fe+je+De)/4&255}this.luminances=F}else this.luminances=n;if(m===void 0&&(this.dataWidth=c),g===void 0&&(this.dataHeight=u),v===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+u>this.dataHeight)throw new j("Crop rectangle does not fit within image data.")}getRow(n,c){if(n<0||n>=this.getHeight())throw new j("Requested row is outside the image: "+n);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(n+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,m,c,0,u),c}getMatrix(){const n=this.getWidth(),c=this.getHeight();if(n===this.dataWidth&&c===this.dataHeight)return this.luminances;const u=n*c,m=new Uint8ClampedArray(u);let g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return A.arraycopy(this.luminances,g,m,0,u),m;for(let v=0;v<c;v++){const N=v*n;A.arraycopy(this.luminances,g,m,N,n),g+=this.dataWidth}return m}isCropSupported(){return!0}crop(n,c,u,m){return new Pl(this.luminances,u,m,this.dataWidth,this.dataHeight,this.left+n,this.top+c)}invert(){return new le(this)}}class $i extends U{static forName(n){return this.getCharacterSetECIByName(n)}}class Tc{}Tc.ISO_8859_1=U.ISO8859_1;class Dc{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Rc{static singletonList(n){return[n]}static min(n,c){return n.sort(c)[0]}}class vd{constructor(n){this.previous=n}getPrevious(){return this.previous}}class xi extends vd{constructor(n,c,u){super(n),this.value=c,this.bitCount=u}appendTo(n,c){n.appendBits(this.value,this.bitCount)}add(n,c){return new xi(this,n,c)}addBinaryShift(n,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new xi(this,n,c)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+D.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Io extends xi{constructor(n,c,u){super(n,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=u}appendTo(n,c){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):u===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(c[this.binaryShiftStart+u],8)}addBinaryShift(n,c){return new Io(this,n,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Yi(ee,n,c){return new Io(ee,n,c)}function zl(ee,n,c){return new xi(ee,n,c)}const Ff=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],qn=0,Ul=1,vs=2,Wi=3,ss=4,Mf=new xi(null,0,0),Ki=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function wd(ee){for(let n of ee)M.fill(n,-1);return ee[qn][ss]=0,ee[Ul][ss]=0,ee[Ul][qn]=28,ee[Wi][ss]=0,ee[vs][ss]=0,ee[vs][qn]=15,ee}const Oc=wd(M.createInt32Array(6,6));class Ds{constructor(n,c,u,m){this.token=n,this.mode=c,this.binaryShiftByteCount=u,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,c){let u=this.bitCount,m=this.token;if(n!==this.mode){let v=Ki[this.mode][n];m=zl(m,v&65535,v>>16),u+=v>>16}let g=n===vs?4:5;return m=zl(m,c,g),new Ds(m,n,0,u+g)}shiftAndAppend(n,c){let u=this.token,m=this.mode===vs?4:5;return u=zl(u,Oc[this.mode][n],m),u=zl(u,c,5),new Ds(u,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(n){let c=this.token,u=this.mode,m=this.bitCount;if(this.mode===ss||this.mode===vs){let N=Ki[u][qn];c=zl(c,N&65535,N>>16),m+=N>>16,u=qn}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,v=new Ds(c,u,this.binaryShiftByteCount+1,m+g);return v.binaryShiftByteCount===2078&&(v=v.endBinaryShift(n+1)),v}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=Yi(c,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new Ds(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let c=this.bitCount+(Ki[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?c+=Ds.calculateBinaryShiftCost(n)-Ds.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(c+=10),c<=n.bitCount}toBitArray(n){let c=[];for(let m=this.endBinaryShift(n.length).token;m!==null;m=m.getPrevious())c.unshift(m);let u=new B;for(const m of c)m.appendTo(u,n);return u}toString(){return Y.format("%s bits=%d bytes=%d",Ff[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}Ds.INITIAL_STATE=new Ds(Mf,qn,0,0);function Ic(ee){const n=Y.getCharCode(" "),c=Y.getCharCode("."),u=Y.getCharCode(",");ee[qn][n]=1;const m=Y.getCharCode("Z"),g=Y.getCharCode("A");for(let fe=g;fe<=m;fe++)ee[qn][fe]=fe-g+2;ee[Ul][n]=1;const v=Y.getCharCode("z"),N=Y.getCharCode("a");for(let fe=N;fe<=v;fe++)ee[Ul][fe]=fe-N+2;ee[vs][n]=1;const S=Y.getCharCode("9"),F=Y.getCharCode("0");for(let fe=F;fe<=S;fe++)ee[vs][fe]=fe-F+2;ee[vs][u]=12,ee[vs][c]=13;const V=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let fe=0;fe<V.length;fe++)ee[Wi][Y.getCharCode(V[fe])]=fe;const te=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let fe=0;fe<te.length;fe++)Y.getCharCode(te[fe])>0&&(ee[ss][Y.getCharCode(te[fe])]=fe);return ee}const Fo=Ic(M.createInt32Array(5,256));class Zi{constructor(n){this.text=n}encode(){const n=Y.getCharCode(" "),c=Y.getCharCode(`
`);let u=Rc.singletonList(Ds.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let v,N=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case Y.getCharCode("\r"):v=N===c?2:0;break;case Y.getCharCode("."):v=N===n?3:0;break;case Y.getCharCode(","):v=N===n?4:0;break;case Y.getCharCode(":"):v=N===n?5:0;break;default:v=0}v>0?(u=Zi.updateStateListForPair(u,g,v),g++):u=this.updateStateListForChar(u,g)}return Rc.min(u,(g,v)=>g.getBitCount()-v.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,c){const u=[];for(let m of n)this.updateStateForChar(m,c,u);return Zi.simplifyStates(u)}updateStateForChar(n,c,u){let m=this.text[c]&255,g=Fo[n.getMode()][m]>0,v=null;for(let N=0;N<=ss;N++){let S=Fo[N][m];if(S>0){if(v==null&&(v=n.endBinaryShift(c)),!g||N===n.getMode()||N===vs){const F=v.latchAndAppend(N,S);u.push(F)}if(!g&&Oc[n.getMode()][N]>=0){const F=v.shiftAndAppend(N,S);u.push(F)}}}if(n.getBinaryShiftByteCount()>0||Fo[n.getMode()][m]===0){let N=n.addBinaryShiftChar(c);u.push(N)}}static updateStateListForPair(n,c,u){const m=[];for(let g of n)this.updateStateForPair(g,c,u,m);return this.simplifyStates(m)}static updateStateForPair(n,c,u,m){let g=n.endBinaryShift(c);if(m.push(g.latchAndAppend(ss,u)),n.getMode()!==ss&&m.push(g.shiftAndAppend(ss,u)),u===3||u===4){let v=g.latchAndAppend(vs,16-u).latchAndAppend(vs,1);m.push(v)}if(n.getBinaryShiftByteCount()>0){let v=n.addBinaryShiftChar(c).addBinaryShiftChar(c+1);m.push(v)}}static simplifyStates(n){let c=[];for(const u of n){let m=!0;for(const g of c){if(g.isBetterThanOrEqualTo(u)){m=!1;break}u.isBetterThanOrEqualTo(g)&&(c=c.filter(v=>v!==g))}m&&c.push(u)}return c}}class xr{constructor(){}static encodeBytes(n){return xr.encode(n,xr.DEFAULT_EC_PERCENT,xr.DEFAULT_AZTEC_LAYERS)}static encode(n,c,u){let m=new Zi(n).encode(),g=D.truncDivision(m.getSize()*c,100)+11,v=m.getSize()+g,N,S,F,V,te;if(u!==xr.DEFAULT_AZTEC_LAYERS){if(N=u<0,S=Math.abs(u),S>(N?xr.MAX_NB_BITS_COMPACT:xr.MAX_NB_BITS))throw new j(Y.format("Illegal value %s for layers",u));F=xr.totalBitsInLayer(S,N),V=xr.WORD_SIZE[S];let ht=F-F%V;if(te=xr.stuffBits(m,V),te.getSize()+g>ht)throw new j("Data to large for user specified layer");if(N&&te.getSize()>V*64)throw new j("Data to large for user specified layer")}else{V=0,te=null;for(let ht=0;;ht++){if(ht>xr.MAX_NB_BITS)throw new j("Data too large for an Aztec code");if(N=ht<=3,S=N?ht+1:ht,F=xr.totalBitsInLayer(S,N),v>F)continue;(te==null||V!==xr.WORD_SIZE[S])&&(V=xr.WORD_SIZE[S],te=xr.stuffBits(m,V));let Kt=F-F%V;if(!(N&&te.getSize()>V*64)&&te.getSize()+g<=Kt)break}}let fe=xr.generateCheckWords(te,F,V),je=te.getSize()/V,De=xr.generateModeMessage(N,S,je),Re=(N?11:14)+S*4,Xe=new Int32Array(Re),et;if(N){et=Re;for(let ht=0;ht<Xe.length;ht++)Xe[ht]=ht}else{et=Re+1+2*D.truncDivision(D.truncDivision(Re,2)-1,15);let ht=D.truncDivision(Re,2),Kt=D.truncDivision(et,2);for(let $t=0;$t<ht;$t++){let $a=$t+D.truncDivision($t,15);Xe[ht-$t-1]=Kt-$a-1,Xe[ht+$t]=Kt+$a+1}}let gt=new de(et);for(let ht=0,Kt=0;ht<S;ht++){let $t=(S-ht)*4+(N?9:12);for(let $a=0;$a<$t;$a++){let Rs=$a*2;for(let ns=0;ns<2;ns++)fe.get(Kt+Rs+ns)&&gt.set(Xe[ht*2+ns],Xe[ht*2+$a]),fe.get(Kt+$t*2+Rs+ns)&&gt.set(Xe[ht*2+$a],Xe[Re-1-ht*2-ns]),fe.get(Kt+$t*4+Rs+ns)&&gt.set(Xe[Re-1-ht*2-ns],Xe[Re-1-ht*2-$a]),fe.get(Kt+$t*6+Rs+ns)&&gt.set(Xe[Re-1-ht*2-$a],Xe[ht*2+ns])}Kt+=$t*8}if(xr.drawModeMessage(gt,N,et,De),N)xr.drawBullsEye(gt,D.truncDivision(et,2),5);else{xr.drawBullsEye(gt,D.truncDivision(et,2),7);for(let ht=0,Kt=0;ht<D.truncDivision(Re,2)-1;ht+=15,Kt+=16)for(let $t=D.truncDivision(et,2)&1;$t<et;$t+=2)gt.set(D.truncDivision(et,2)-Kt,$t),gt.set(D.truncDivision(et,2)+Kt,$t),gt.set($t,D.truncDivision(et,2)-Kt),gt.set($t,D.truncDivision(et,2)+Kt)}let vt=new Dc;return vt.setCompact(N),vt.setSize(et),vt.setLayers(S),vt.setCodeWords(je),vt.setMatrix(gt),vt}static drawBullsEye(n,c,u){for(let m=0;m<u;m+=2)for(let g=c-m;g<=c+m;g++)n.set(g,c-m),n.set(g,c+m),n.set(c-m,g),n.set(c+m,g);n.set(c-u,c-u),n.set(c-u+1,c-u),n.set(c-u,c-u+1),n.set(c+u,c-u),n.set(c+u,c-u+1),n.set(c+u,c+u-1)}static generateModeMessage(n,c,u){let m=new B;return n?(m.appendBits(c-1,2),m.appendBits(u-1,6),m=xr.generateCheckWords(m,28,4)):(m.appendBits(c-1,5),m.appendBits(u-1,11),m=xr.generateCheckWords(m,40,4)),m}static drawModeMessage(n,c,u,m){let g=D.truncDivision(u,2);if(c)for(let v=0;v<7;v++){let N=g-3+v;m.get(v)&&n.set(N,g-5),m.get(v+7)&&n.set(g+5,N),m.get(20-v)&&n.set(N,g+5),m.get(27-v)&&n.set(g-5,N)}else for(let v=0;v<10;v++){let N=g-5+v+D.truncDivision(v,5);m.get(v)&&n.set(N,g-7),m.get(v+10)&&n.set(g+7,N),m.get(29-v)&&n.set(N,g+7),m.get(39-v)&&n.set(g-7,N)}}static generateCheckWords(n,c,u){let m=n.getSize()/u,g=new Sc(xr.getGF(u)),v=D.truncDivision(c,u),N=xr.bitsToWords(n,u,v);g.encode(N,v-m);let S=c%u,F=new B;F.appendBits(0,S);for(const V of Array.from(N))F.appendBits(V,u);return F}static bitsToWords(n,c,u){let m=new Int32Array(u),g,v;for(g=0,v=n.getSize()/c;g<v;g++){let N=0;for(let S=0;S<c;S++)N|=n.get(g*c+S)?1<<c-S-1:0;m[g]=N}return m}static getGF(n){switch(n){case 4:return Ne.AZTEC_PARAM;case 6:return Ne.AZTEC_DATA_6;case 8:return Ne.AZTEC_DATA_8;case 10:return Ne.AZTEC_DATA_10;case 12:return Ne.AZTEC_DATA_12;default:throw new j("Unsupported word size "+n)}}static stuffBits(n,c){let u=new B,m=n.getSize(),g=(1<<c)-2;for(let v=0;v<m;v+=c){let N=0;for(let S=0;S<c;S++)(v+S>=m||n.get(v+S))&&(N|=1<<c-1-S);(N&g)===g?(u.appendBits(N&g,c),v--):(N&g)===0?(u.appendBits(N|1,c),v--):u.appendBits(N,c)}return u}static totalBitsInLayer(n,c){return((c?88:112)+16*n)*n}}xr.DEFAULT_EC_PERCENT=33,xr.DEFAULT_AZTEC_LAYERS=0,xr.MAX_NB_BITS=32,xr.MAX_NB_BITS_COMPACT=4,xr.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Mo{encode(n,c,u,m){return this.encodeWithHints(n,c,u,m,null)}encodeWithHints(n,c,u,m,g){let v=Tc.ISO_8859_1,N=xr.DEFAULT_EC_PERCENT,S=xr.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(ya.CHARACTER_SET)&&(v=$i.forName(g.get(ya.CHARACTER_SET).toString())),g.has(ya.ERROR_CORRECTION)&&(N=D.parseInt(g.get(ya.ERROR_CORRECTION).toString())),g.has(ya.AZTEC_LAYERS)&&(S=D.parseInt(g.get(ya.AZTEC_LAYERS).toString()))),Mo.encodeLayers(n,c,u,m,v,N,S)}static encodeLayers(n,c,u,m,g,v,N){if(c!==K.AZTEC)throw new j("Can only encode AZTEC, but got "+c);let S=xr.encode(Y.getBytes(n,g),v,N);return Mo.renderResult(S,u,m)}static renderResult(n,c,u){let m=n.getMatrix();if(m==null)throw new ke;let g=m.getWidth(),v=m.getHeight(),N=Math.max(c,g),S=Math.max(u,v),F=Math.min(N/g,S/v),V=(N-g*F)/2,te=(S-v*F)/2,fe=new de(N,S);for(let je=0,De=te;je<v;je++,De+=F)for(let Re=0,Xe=V;Re<g;Re++,Xe+=F)m.get(Re,je)&&fe.setRegion(Xe,De,F,F);return fe}}r.AbstractExpandedDecoder=ye,r.ArgumentException=w,r.ArithmeticException=J,r.AztecCode=Dc,r.AztecCodeReader=lr,r.AztecCodeWriter=Mo,r.AztecDecoder=ut,r.AztecDetector=Gt,r.AztecDetectorResult=Oe,r.AztecEncoder=xr,r.AztecHighLevelEncoder=Zi,r.AztecPoint=qt,r.BarcodeFormat=K,r.Binarizer=T,r.BinaryBitmap=E,r.BitArray=B,r.BitMatrix=de,r.BitSource=rs,r.BrowserAztecCodeReader=at,r.BrowserBarcodeReader=Bn,r.BrowserCodeReader=X,r.BrowserDatamatrixCodeReader=Ef,r.BrowserMultiFormatReader=Tf,r.BrowserPDF417Reader=Df,r.BrowserQRCodeReader=Rf,r.BrowserQRCodeSvgWriter=fi,r.CharacterSetECI=U,r.ChecksumException=_,r.Code128Reader=Be,r.Code39Reader=Et,r.DataMatrixDecodedBitStreamParser=Ln,r.DataMatrixReader=Hs,r.DecodeHintType=z,r.DecoderResult=Ve,r.DefaultGridSampler=Nr,r.DetectorResult=Pe,r.EAN13Reader=sr,r.EncodeHintType=ya,r.Exception=p,r.FormatException=L,r.GenericGF=Ne,r.GenericGFPoly=ot,r.GlobalHistogramBinarizer=q,r.GridSampler=kt,r.GridSamplerInstance=tr,r.HTMLCanvasElementLuminanceSource=oe,r.HybridBinarizer=xe,r.ITFReader=Bt,r.IllegalArgumentException=j,r.IllegalStateException=ke,r.InvertedLuminanceSource=le,r.LuminanceSource=Ce,r.MathUtils=pe,r.MultiFormatOneDReader=ts,r.MultiFormatReader=bd,r.MultiFormatWriter=If,r.NotFoundException=G,r.OneDReader=yt,r.PDF417DecodedBitStreamParser=rt,r.PDF417DecoderErrorCorrection=Fl,r.PDF417Reader=Ia,r.PDF417ResultMetadata=Do,r.PerspectiveTransform=St,r.PlanarYUVLuminanceSource=an,r.QRCodeByteMatrix=Ll,r.QRCodeDataMask=Oa,r.QRCodeDecodedBitStreamParser=Wr,r.QRCodeDecoderErrorCorrectionLevel=Ar,r.QRCodeDecoderFormatInformation=Ra,r.QRCodeEncoder=Ur,r.QRCodeEncoderQRCode=ui,r.QRCodeMaskUtil=Qr,r.QRCodeMatrixUtil=Ft,r.QRCodeMode=Rt,r.QRCodeReader=vn,r.QRCodeVersion=Tt,r.QRCodeWriter=qi,r.RGBLuminanceSource=Pl,r.RSS14Reader=zt,r.RSSExpandedReader=it,r.ReaderException=Ml,r.ReedSolomonDecoder=Qe,r.ReedSolomonEncoder=Sc,r.ReedSolomonException=Ie,r.Result=se,r.ResultMetadataType=we,r.ResultPoint=ze,r.StringUtils=Y,r.UnsupportedOperationException=Z,r.VideoInputDevice=re,r.WhiteRectangleDetector=nt,r.WriterException=Dr,r.ZXingArrays=M,r.ZXingCharset=$i,r.ZXingInteger=D,r.ZXingStandardCharsets=Tc,r.ZXingStringBuilder=ue,r.ZXingStringEncoding=ae,r.ZXingSystem=A,r.createAbstractExpandedDecoder=wt,Object.defineProperty(r,"__esModule",{value:!0})})}(k0,k0.exports)),k0.exports}var Kr=M_();const B_=of(Kr),L_=lk({__proto__:null,default:B_},[Kr]);var Lb=function(){function t(a,r,i){if(this.formatMap=new Map([[Ct.QR_CODE,Kr.BarcodeFormat.QR_CODE],[Ct.AZTEC,Kr.BarcodeFormat.AZTEC],[Ct.CODABAR,Kr.BarcodeFormat.CODABAR],[Ct.CODE_39,Kr.BarcodeFormat.CODE_39],[Ct.CODE_93,Kr.BarcodeFormat.CODE_93],[Ct.CODE_128,Kr.BarcodeFormat.CODE_128],[Ct.DATA_MATRIX,Kr.BarcodeFormat.DATA_MATRIX],[Ct.MAXICODE,Kr.BarcodeFormat.MAXICODE],[Ct.ITF,Kr.BarcodeFormat.ITF],[Ct.EAN_13,Kr.BarcodeFormat.EAN_13],[Ct.EAN_8,Kr.BarcodeFormat.EAN_8],[Ct.PDF_417,Kr.BarcodeFormat.PDF_417],[Ct.RSS_14,Kr.BarcodeFormat.RSS_14],[Ct.RSS_EXPANDED,Kr.BarcodeFormat.RSS_EXPANDED],[Ct.UPC_A,Kr.BarcodeFormat.UPC_A],[Ct.UPC_E,Kr.BarcodeFormat.UPC_E],[Ct.UPC_EAN_EXTENSION,Kr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!L_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=i;var l=this.createZXingFormats(a),d=new Map;d.set(Kr.DecodeHintType.POSSIBLE_FORMATS,l),d.set(Kr.DecodeHintType.TRY_HARDER,!1),this.hints=d}return t.prototype.decodeAsync=function(a){var r=this;return new Promise(function(i,l){try{i(r.decode(a))}catch(d){l(d)}})},t.prototype.decode=function(a){var r=new Kr.MultiFormatReader(this.verbose,this.hints),i=new Kr.HTMLCanvasElementLuminanceSource(a),l=new Kr.BinaryBitmap(new Kr.HybridBinarizer(i)),d=r.decode(l);return{text:d.text,format:lw.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,i,l){a.set(r,i)}),a},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createZXingFormats=function(a){for(var r=[],i=0,l=a;i<l.length;i++){var d=l[i];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),P_=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},z_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Pb=function(){function t(a,r,i){if(this.formatMap=new Map([[Ct.QR_CODE,"qr_code"],[Ct.AZTEC,"aztec"],[Ct.CODABAR,"codabar"],[Ct.CODE_39,"code_39"],[Ct.CODE_93,"code_93"],[Ct.CODE_128,"code_128"],[Ct.DATA_MATRIX,"data_matrix"],[Ct.ITF,"itf"],[Ct.EAN_13,"ean_13"],[Ct.EAN_8,"ean_8"],[Ct.PDF_417,"pdf417"],[Ct.UPC_A,"upc_a"],[Ct.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=i;var l=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},t.prototype.decodeAsync=function(a){return P_(this,void 0,void 0,function(){var r,i;return z_(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(a)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(r),[2,{text:i.rawValue,format:lw.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(a){for(var r=null,i=0,l=0,d=a;l<d.length;l++){var f=d[l],h=f.boundingBox.width*f.boundingBox.height;h>i&&(i=h,r=f)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(a){for(var r=[],i=0,l=a;i<l.length;i++){var d=l[i];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,i,l){a.set(r,i)}),a},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),zb=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},Ub=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},U_=function(){function t(a,r,i,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,r&&Pb.isSupported()?(this.primaryDecoder=new Pb(a,i,l),this.secondaryDecoder=new Lb(a,i,l)):this.primaryDecoder=new Lb(a,i,l)}return t.prototype.decodeAsync=function(a){return zb(this,void 0,void 0,function(){var r;return Ub(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(a){return zb(this,void 0,void 0,function(){var r,i;return Ub(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,l.sent()];case 3:if(i=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw i;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(a){if(this.verbose){var r=performance.now()-a;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,r=0,i=this.executionResults;r<i.length;r++){var l=i[r];a+=l}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),rg=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Yu=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},Wu=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},cw=function(){function t(a,r){this.name=a,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(a){var r={};r[this.name]=a;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var r=a[this.name];return r}return null},t}(),H_=function(t){rg(a,t);function a(r,i){return t.call(this,r,i)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(r){var i={};i[this.name]=r;var l={advanced:[i]};return this.track.applyConstraints(l)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),i=r[this.name];return{min:i.min,max:i.max,step:i.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(cw),V_=function(t){rg(a,t);function a(r){return t.call(this,"zoom",r)||this}return a}(H_),G_=function(t){rg(a,t);function a(r){return t.call(this,"torch",r)||this}return a}(cw),X_=function(){function t(a){this.track=a}return t.prototype.zoomFeature=function(){return new V_(this.track)},t.prototype.torchFeature=function(){return new G_(this.track)},t}(),q_=function(){function t(a,r,i){this.isClosed=!1,this.parentElement=a,this.mediaStream=r,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return t.prototype.createVideoElement=function(a){var r=document.createElement("video");return r.style.width="".concat(a,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var i=a.surface.clientWidth,l=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(i,l),a.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(a,r,i,l){return Yu(this,void 0,void 0,function(){var d,f;return Wu(this,function(h){switch(h.label){case 0:return d=new t(a,r,l),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:h.sent(),h.label=2;case 2:return d.setupSurface(),[2,d]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(a){this.failIfClosed();var r=this,i=function(){setTimeout(a,200),r.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(a){return Yu(this,void 0,void 0,function(){return Wu(this,function(r){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(r,i){var l=a.mediaStream.getVideoTracks(),d=l.length,f=0;a.mediaStream.getVideoTracks().forEach(function(h){a.mediaStream.removeTrack(h),h.stop(),++f,f>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),r())})})},t.prototype.getCapabilities=function(){return new X_(this.getFirstTrackOrFail())},t}(),$_=function(){function t(a){this.mediaStream=a}return t.prototype.render=function(a,r,i){return Yu(this,void 0,void 0,function(){return Wu(this,function(l){return[2,q_.create(a,this.mediaStream,r,i)]})})},t.create=function(a){return Yu(this,void 0,void 0,function(){var r,i;return Wu(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return i=l.sent(),[2,new t(i)]}})})},t}(),Hb=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},Vb=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Y_=function(){function t(){}return t.failIfNotSupported=function(){return Hb(this,void 0,void 0,function(){return Vb(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(a){return Hb(this,void 0,void 0,function(){return Vb(this,function(r){return[2,$_.create(a)]})})},t}(),W_=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},K_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Z_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var a=fc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(a=fc.insecureContextCameraQueryError()),Promise.reject(a)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},t.getCamerasFromMediaDevices=function(){return W_(this,void 0,void 0,function(){var a,r,i,l,d,f,h;return K_(this,function(b){switch(b.label){case 0:return a=function(p){for(var w=p.getVideoTracks(),j=0,E=w;j<E.length;j++){var _=E[j];_.enabled=!1,_.stop(),p.removeTrack(_)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=b.sent(),l=[],d=0,f=i;d<f.length;d++)h=f[d],h.kind==="videoinput"&&l.push({id:h.deviceId,label:h.label});return a(r),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,r){var i=function(d){for(var f=[],h=0,b=d;h<b.length;h++){var p=b[h];p.kind==="video"&&f.push({id:p.id,label:p.label})}a(f)},l=MediaStreamTrack;l.getSources(i)})},t}(),ua;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(ua||(ua={}));var Q_=function(){function t(){this.state=ua.NOT_STARTED,this.onGoingTransactionNewState=ua.UNKNOWN}return t.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},t.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===ua.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=ua.UNKNOWN,this.directTransition(a)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===ua.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=ua.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==ua.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(a){switch(this.state){case ua.UNKNOWN:throw"Transition from unknown is not allowed";case ua.NOT_STARTED:this.failIfNewStateIs(a,[ua.PAUSED]);break;case ua.SCANNING:break;case ua.PAUSED:break}},t.prototype.failIfNewStateIs=function(a,r){for(var i=0,l=r;i<l.length;i++){var d=l[i];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},t}(),J_=function(){function t(a){this.stateManager=a}return t.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},t.prototype.directTransition=function(a){this.stateManager.directTransition(a)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===ua.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==ua.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===ua.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===ua.PAUSED},t}(),eA=function(){function t(){}return t.create=function(){return new J_(new Q_)},t}(),tA=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Ks=function(t){tA(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(R_),rA=function(){function t(a,r){this.logger=r,this.fps=Ks.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=Ks.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ow.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ai(this.qrbox)},t.create=function(a,r){return new t(a,r)},t}(),hc=function(){function t(a,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var i;typeof r=="boolean"?this.verbose=r===!0:r&&(i=r,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new I_(this.verbose),this.qrcode=new U_(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=eA.create()}return t.prototype.start=function(a,r,i,l){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var h=rA.create(r,this.logger);this.clearElement();var b=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=b,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Ks.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var j=this,E=this.stateManagerProxy.startTransition(ua.SCANNING);return new Promise(function(_,T){var A=p?h.videoConstraints:j.createVideoConstraints(a);if(!A){E.cancel(),T("videoConstraints should be defined");return}var I={};(!p||h.aspectRatio)&&(I.aspectRatio=h.aspectRatio);var O={onRenderSurfaceReady:function(M,D){j.setupUi(M,D,h),j.isScanning=!0,j.foreverScan(h,i,f)}};Y_.failIfNotSupported().then(function(M){M.create(A).then(function(D){return D.render(d.element,I,O).then(function(B){j.renderedCamera=B,E.execute(),_(null)}).catch(function(B){E.cancel(),T(B)})}).catch(function(D){E.cancel(),T(fc.errorGettingUserMedia(D))})}).catch(function(M){E.cancel(),T(fc.cameraStreamingNotSupported())})})},t.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(ua.PAUSED),this.showPausedState(),(Ai(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,r=function(){a.stateManagerProxy.directTransition(ua.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(ua.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(a.element){var d=document.getElementById(Ks.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),i(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(a,r){return this.scanFileV2(a,r).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(a,r){var i=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ai(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,d){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(a);var f=new Image;f.onload=function(){var h=f.width,b=f.height,p=document.getElementById(i.elementId),w=p.clientWidth?p.clientWidth:Ks.DEFAULT_WIDTH,j=Math.max(p.clientHeight?p.clientHeight:b,Ks.FILE_SCAN_MIN_HEIGHT),E=i.computeCanvasDrawConfig(h,b,w,j);if(r){var _=i.createCanvasElement(w,j,"qr-canvas-visible");_.style.display="inline-block",p.appendChild(_);var T=_.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=w,T.canvas.height=j,T.drawImage(f,0,0,h,b,E.x,E.y,E.width,E.height)}var A=Ks.FILE_SCAN_HIDDEN_CANVAS_PADDING,I=Math.max(f.width,E.width),O=Math.max(f.height,E.height),M=I+2*A,D=O+2*A,B=i.createCanvasElement(M,D);p.appendChild(B);var H=B.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=M,H.canvas.height=D,H.drawImage(f,0,0,h,b,A,A,I,O);try{i.qrcode.decodeRobustlyAsync(B).then(function(z){l(Mb.createFromQrcodeResult(z))}).catch(d)}catch(z){d("QR code parse error, error = ".concat(z))}},f.onerror=d,f.onabort=d,f.onstalled=d,f.onsuspend=d,f.src=URL.createObjectURL(a)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Z_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(a){if(a){if(!ow.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(a){var r=[Ct.QR_CODE,Ct.AZTEC,Ct.CODABAR,Ct.CODE_39,Ct.CODE_93,Ct.CODE_128,Ct.DATA_MATRIX,Ct.MAXICODE,Ct.ITF,Ct.EAN_13,Ct.EAN_8,Ct.PDF_417,Ct.RSS_14,Ct.RSS_EXPANDED,Ct.UPC_A,Ct.UPC_E,Ct.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return r;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],l=0,d=a.formatsToSupport;l<d.length;l++){var f=d[l];D_(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Ai(a))return!0;if(!Ai(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Ai(a.experimentalFeatures))return!0;var r=a.experimentalFeatures;return Ai(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(a,r,i){var l=this,d=i.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(a,r,d),h=function(p){if(p<Ks.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ks.MIN_QR_BOX_SIZE,"px.")},b=function(p){return p>a&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=a),p};h(f.width),h(f.height),f.width=b(f.width)},t.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(a,r,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(a,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return i},t.prototype.setupUi=function(a,r,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(a,r,i);var l=Ai(i.qrbox)?{width:a,height:r}:i.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(a,r,l);d.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&d.height<=r,h={x:0,y:0,width:a,height:r},b=f?this.getShadedRegionBounds(a,r,d):h,p=this.createCanvasElement(b.width,b.height),w={willReadFrequently:!0},j=p.getContext("2d",w);j.canvas.width=b.width,j.canvas.height=b.height,this.element.append(p),f&&this.possiblyInsertShadingElement(this.element,a,r,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=j,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(a){var r=document.createElement("div");r.innerText=fc.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",a.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(a,r){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return a(l.text,Mb.createFromQrcodeResult(l)),i.possiblyUpdateShaders(!0),!0}).catch(function(l){i.possiblyUpdateShaders(!1);var d=fc.codeParseError(l);return r(d,O_.createFrom(d)),!1})},t.prototype.foreverScan=function(a,r,i){var l=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),f=d.videoWidth/d.clientWidth,h=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*f,p=this.qrRegion.height*h,w=this.qrRegion.x*f,j=this.qrRegion.y*h;this.context.drawImage(d,w,j,b,p,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(a,r,i)},l.getTimeoutFps(a.fps))};this.scanContext(r,i).then(function(_){!_&&a.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,i).finally(function(){E()})):E()}).catch(function(_){l.logger.logError("Error happend while scanning context",_),E()})}},t.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var r="facingMode",i="deviceId",l={user:!0,environment:!0},d="exact",f=function(T){if(T in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(T,"'")},h=Object.keys(a);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var b=Object.keys(a)[0];if(b!==r&&b!==i)throw"Only '".concat(r,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(b===r){var p=a.facingMode;if(typeof p=="string"){if(f(p))return{facingMode:p}}else if(typeof p=="object")if(d in p){if(f(p["".concat(d)]))return{facingMode:{exact:p["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var w=typeof p;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var j=a.deviceId;if(typeof j=="string")return{deviceId:j};if(typeof j=="object"){if(d in j)return{deviceId:{exact:j["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var E=typeof j;throw"Invalid type of 'deviceId' = ".concat(E)}}}var _=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(_)},t.prototype.computeCanvasDrawConfig=function(a,r,i,l){if(a<=i&&r<=l){var d=(i-a)/2,f=(l-r)/2;return{x:d,y:f,width:a,height:r}}else{var h=a,b=r;return a>i&&(r=i/a*r,a=i),r>l&&(a=l/r*a,r=l),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(b)+" to ".concat(a,"X").concat(r,".")),this.computeCanvasDrawConfig(a,r,i,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},t.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=a?Ks.BORDER_SHADER_MATCH_COLOR:Ks.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(a,r,i){var l=a,d=r,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(d,"px"),f.style.display="none",f.id=Ai(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(a,r,i){if(i.width>a||i.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-i.width)/2,y:(r-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(a,r,i,l){if(!(r-l.width<1||i-l.height<1)){var d=document.createElement("div");d.style.position="absolute";var f=(r-l.width)/2,h=(i-l.height)/2;if(d.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Ks.SHADED_REGION_ELEMENT_ID),r-l.width<11||i-l.height<11)this.hasBorderShaders=!1;else{var b=5,p=40;this.insertShaderBorders(d,p,b,-b,null,0,!0),this.insertShaderBorders(d,p,b,-b,null,0,!1),this.insertShaderBorders(d,p,b,null,-b,0,!0),this.insertShaderBorders(d,p,b,null,-b,0,!1),this.insertShaderBorders(d,b,p+b,-b,null,-b,!0),this.insertShaderBorders(d,b,p+b,null,-b,-b,!0),this.insertShaderBorders(d,b,p+b,-b,null,-b,!1),this.insertShaderBorders(d,b,p+b,null,-b,-b,!1),this.hasBorderShaders=!0}a.append(d)}},t.prototype.insertShaderBorders=function(a,r,i,l,d,f,h){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Ks.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(r,"px"),b.style.height="".concat(i,"px"),l!==null&&(b.style.top="".concat(l,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),h?b.style.left="".concat(f,"px"):b.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),a.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(a){return 1e3/a},t}(),Gb;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Gb||(Gb={}));function dw(){const{bill_id:t}=pn(),[a,r]=C.useState(!1),[i,l]=C.useState(null),[d,f]=C.useState(!1),[h,b]=C.useState(null),[p,w]=C.useState([]),[j,E]=C.useState(!1),[_,T]=C.useState(""),[A,I]=C.useState(null),[O,M]=C.useState(""),D=C.useRef(null),B=C.useRef(null),H=C.useRef(null),z=gr(),{auth:L}=C.useContext(zr),[P,U]=C.useState("environment"),Z=async()=>{try{if(!t)return;const X=await Ae.get(`/user-bills/users/${L.user.id}/bills`);if(X.data.success&&Array.isArray(X.data.data)){const se=X.data.data.find(ne=>ne.id===t);se?b(se):(ie.error("You are not assigned to this bill"),z("/my-bills"))}}catch(X){console.error("Error fetching bill details:",X),ie.error("Error loading bill information")}},ae=async()=>{try{const X=await Ae.get(`/user-apartments/users/${L.user.id}/apartments`);return X.data.success&&Array.isArray(X.data.data)?(w(X.data.data),X.data.data):[]}catch(X){return console.error("Error fetching user apartments:",X),ie.error("Error loading your assigned apartments"),[]}},Y=async(X,se)=>{try{if(!X)return{access:!1,reason:"Invalid house ID"};const ne=await Ae.get(`/houses/${X}`);if(!ne.data.success||!ne.data.data)return{access:!1,reason:"House not found in the system"};const K=ne.data.data;let Se=null;if(K.apartment_id)try{const J=await Ae.get(`/apartments/${K.apartment_id}`);J.data.success&&(Se=J.data.data)}catch(J){console.error("Error fetching apartment:",J)}let we=null;if(K.floor_id)try{const J=await Ae.get(`/floors/${K.floor_id}`);J.data.success&&(we=J.data.data)}catch(J){console.error("Error fetching floor:",J)}const Ve={...K,apartment:Se,floor:we};if(I(Ve),!se.some(J=>J.id===K.apartment_id))return{access:!1,reason:`You are not assigned to "${Se?.name||"this apartment"}"`};let ot=!1;try{const J=await Ae.get(`/bill-assignments/house-details?house_id=${X}&apartment_id=${K.apartment_id}`);J.data.success&&(ot=(Array.isArray(J.data.data)?J.data.data:J.data.data?.bills||[]).some(Ie=>Ie.bill_id===t||Ie.id===t))}catch(J){console.error("Error checking bill assignments:",J);try{const Ne=await Ae.get(`/user-bills/users/${L.user.id}/bills`);Ne.data.success&&Array.isArray(Ne.data.data)&&Ne.data.data.find(ke=>ke.id===t)&&(ot=!0)}catch(Ne){console.error("Alternative check failed:",Ne)}}return ot?h?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${h?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:Ve,apartmentId:K.apartment_id,floorId:K.floor_id,houseId:K.id}:{access:!1,reason:`This house does not have "${h?.bill_name||"the selected bill"}" assigned`}}catch(ne){if(console.error("Error checking house access:",ne),ne.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const K=ne.response?.status;return K===401?{access:!1,reason:"Session expired. Please login again."}:K===403?{access:!1,reason:"Access denied to this resource."}:K===404?{access:!1,reason:"House not found."}:K===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},ue=async()=>{if(!O.trim()){ie.error("Please enter a house ID");return}try{f(!0),D.current&&D.current.clear().catch(K=>{console.log("Scanner clear error:",K)}),r(!1);const X=O.trim();l({houseId:X,source:"manual"});const se=await ae(),ne=await Y(X,se);ne.access?(E(!0),ie.success(`Access granted! House ${A?.house_id||X} has ${h?.bill_name} bill.`)):(E(!1),T(ne.reason||"Access denied"),ie.error(ne.reason||"Access denied"))}catch(X){console.error("Error processing manual input:",X),ie.error(X.message||"Invalid house ID. Please enter a valid house ID.")}finally{f(!1)}},de=X=>{M(X.target.value)},G=X=>{X.key==="Enter"&&ue()},q=(X,se)=>{if(!X||X.length===0)return null;const ne=K=>(K||"").toLowerCase();if(se==="environment"){const K=X.find(Se=>/back|rear|environment/.test(ne(Se.label)));return K?K.id:X[X.length-1].id}else{const K=X.find(Se=>/front|user|face/.test(ne(Se.label)));return K?K.id:X[0].id}},xe=async(X,se)=>{const ne=X||P;if(r(!0),l(null),E(!1),T(""),I(null),M(""),D.current){try{await D.current.stop()}catch{}try{D.current.clear()}catch{}D.current=null}const K=document.getElementById("qr-reader");K&&(K.innerHTML="");try{const Se=await hc.getCameras();let we=se||q(Se,ne)||Se[0]&&Se[0].id;const Ve=new hc("qr-reader");D.current=Ve;const Le={fps:10,qrbox:{width:250,height:250}};await Ve.start({deviceId:{exact:we}},Le,ot=>{le(ot)},ot=>{}),H.current=we,U(ne)}catch(Se){console.error("Scanner initialization error:",Se),ie.error("Failed to initialize scanner. Please refresh and try again."),r(!1)}},Ce=async()=>{const X=P==="environment"?"user":"environment";try{const se=await hc.getCameras();let ne=q(se,X)||se[0]&&se[0].id;if(ne&&H.current&&ne===H.current&&se.length>1){const K=se.find(Se=>Se.id!==H.current);K&&(ne=K.id)}if(D.current){try{await D.current.stop()}catch{}try{D.current.clear()}catch{}D.current=null}U(X),a&&setTimeout(()=>xe(X,ne),250)}catch(se){console.error("Error toggling camera direction:",se)}},le=async X=>{try{if(f(!0),D.current){try{await D.current.stop()}catch{}try{D.current.clear()}catch{}D.current=null,H.current=null}r(!1),M("");const se=X.trim();l({houseId:se,source:"qr"});const ne=await ae(),K=await Y(se,ne);K.access?(E(!0),ie.success("Access granted! House")):(E(!1),T(K.reason||"Access denied"),ie.error(K.reason||"Access denied"))}catch(se){console.error("Error processing QR code:",se),ie.error(se.message||"Invalid QR code. Please scan a valid house QR code."),r(!1)}finally{f(!1)}},oe=async()=>{if(D.current){try{try{await D.current.stop()}catch{}try{D.current.clear()}catch{}console.log("Scanner stopped and cleared on reset")}catch(X){console.log("Scanner clear error on reset:",X)}D.current=null,H.current=null}B.current&&(clearInterval(B.current),B.current=null),r(!1),l(null),E(!1),T(""),I(null),M("")},re=()=>{z("/my-bills")},Q=()=>{if(!A||!i){ie.error("House data not available");return}z(`/calculate-measurable-bill/${t}`,{state:{scannedData:i,billData:h,actualBillId:t,houseData:A,houseId:A.id,source:i.source}})};return C.useEffect(()=>()=>{if(D.current){try{D.current.stop().catch?.(()=>{})}catch{}try{D.current.clear()}catch{}H.current=null}},[]),C.useEffect(()=>{L?.user?.id&&t&&(Z(),ae())},[L?.user?.id,t]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(hr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:Ce,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${P==="environment"?"Front":"Back"} Camera`,children:e.jsx(zv,{size:16})}),e.jsx("button",{onClick:oe,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(yr,{size:16})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Position QR code within frame ",P==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",h?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Ut,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),i&&!d&&!a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(yc,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),j?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(mn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",h?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(wr,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:_}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",h?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',h?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!i&&!a&&!d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:O,onChange:de,onKeyPress:G,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:ue,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(wr,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(U0,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:h?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:xe,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Bv,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:re,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function aA(){const{bill_id:t}=pn(),a=gr(),r=Fn(),{auth:i}=C.useContext(zr),l=r.state?.scannedData||null,d=r.state?.billData||null,f=r.state?.houseData||null,h=r.state?.actualBillId||t,b=r.state?.source||"qr",[p,w]=C.useState(!1),[j,E]=C.useState(null),[_,T]=C.useState([]),[A,I]=C.useState([]),[O,M]=C.useState(null),[D,B]=C.useState(null),[H,z]=C.useState(""),L=C.useMemo(()=>{const Ne=new Date;return Ne.setDate(Ne.getDate()+10),Ne.toISOString().split("T")[0]},[]);C.useEffect(()=>{H||z(L)},[L]);const[P,U]=C.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[Z,ae]=C.useState(null),[Y,ue]=C.useState([]),[de,G]=C.useState(!1),[q,xe]=C.useState(!1),Ce=Fr.useRef(P.month),le=Fr.useRef(P.year),oe=Ne=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ne-1]||"";C.useEffect(()=>{if(!t||!h){ie.error("Bill ID is missing"),a("/my-bills");return}if(!l||!f||!d){ie.error("House data is incomplete. Please go back and try again."),a(`/measurable-bills/${t}`);return}},[t,h,l,f,d,a]);const re=async()=>{try{const Ne=await Ae.get(`/billranges/bills/${h}`);let Ie=[];if(Array.isArray(Ne.data))Ie=Ne.data;else if(Ne.data.data&&Array.isArray(Ne.data.data))Ie=Ne.data.data;else if(Ne.data.success&&Ne.data.data)Array.isArray(Ne.data.data)?Ie=Ne.data.data:typeof Ne.data.data=="object"&&(Ie=Object.values(Ne.data.data));else if(typeof Ne.data=="object"){for(const ke in Ne.data)if(Array.isArray(Ne.data[ke])){Ie=Ne.data[ke];break}}if(Ie.length>0){const ke=Ie.sort((Qe,_e)=>parseFloat(Qe.fromRange||Qe.from_range||Qe.from||0)-parseFloat(_e.fromRange||_e.from_range||_e.from||0));T(ke),ke.length>0&&M(ke[0])}else T([]),ie.warning("No bill ranges data available in response")}catch(Ne){console.error("Error loading bill ranges:",Ne),ie.error("Failed to load bill ranges."),T([])}},Q=async()=>{try{const Ne=oe(P.month),Ie=P.month;I([]),B(null);let ke=null,Qe=null;try{ke=await Ae.get("/billprice",{params:{bill_id:h,month:Ne,year:P.year}})}catch(pe){Qe=pe;try{ke=await Ae.get("/billprice",{params:{bill_id:h,month:Ie,year:P.year}})}catch(Ge){Qe=Ge;try{ke=await Ae.get(`/billprice/${h}/${Ne}/${P.year}`)}catch(ze){Qe=ze;try{ke=await Ae.get(`/billprice/${h}/${Ie}/${P.year}`)}catch(Pe){Qe=Pe;try{ke=await Ae.get("/api/billprice",{params:{bill_id:h,month:Ne,year:P.year}})}catch(Oe){throw Qe=Oe,new Error("All API attempts failed")}}}}}let _e=[];if(ke.data?.success)Array.isArray(ke.data.data)?_e=ke.data.data:ke.data.data&&typeof ke.data.data=="object"?_e=Object.values(ke.data.data):_e=[];else if(Array.isArray(ke.data))_e=ke.data;else if(ke.data?.data&&Array.isArray(ke.data.data))_e=ke.data.data;else if(ke.data&&typeof ke.data=="object"){for(const pe in ke.data)if(Array.isArray(ke.data[pe])){_e=ke.data[pe];break}}const ut=_e.filter(pe=>{const Ge=pe.month,ze=pe.year,Pe=Ge===Ne||Ge===Ie.toString(),Oe=ze===P.year||ze===P.year.toString();return Pe&&Oe});ut.length>0?(I(ut),O&&X(ut)):_e.length>0?(I(_e),O&&X(_e),ie.success(`Loaded ${_e.length} price(s) for ${Ne}`)):(I([]),ie.info(`No prices found for ${Ne} ${P.year}. Please set prices first.`))}catch(Ne){console.error("Error loading bill prices:",Ne),I([]),B(null),ie.error(`Failed to load prices for ${oe(P.month)}. Check console.`)}},X=(Ne=A)=>{if(!O||!Ne||Ne.length===0){B(null);return}const Ie=Ne.find(ke=>{const Qe=ke.billrange_id||ke.range_id||ke.id,_e=O.id||O._id;return Qe&&Qe.toString()===_e.toString()});B(Ie||null)},se=async()=>{let Ne=null;if(Ne=l?.houseId||l?.hse,!Ne||!h){U(Ie=>({...Ie,previous_reading:"0"}));return}try{G(!0);const Ie=await Ae.get("/generate-measurable-bills/previous-reading",{params:{house_id:Ne,bill_id:h}});if(Ie.data.success){const ke=Ie.data.data?.current_reading||0;U(Qe=>({...Qe,previous_reading:ke.toString()}))}}catch(Ie){console.error(" Error loading previous reading:",Ie),Ie.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),U(ke=>({...ke,previous_reading:"0"}))):(ie.error("Could not load previous reading"),U(ke=>({...ke,previous_reading:"0"})))}finally{G(!1)}},ne=async(Ne,Ie)=>{const ke={...P,[Ne]:parseInt(Ie)};U(ke);const Qe=Ne==="month"&&Ie!==Ce.current,_e=Ne==="year"&&Ie!==le.current;(Qe||_e)&&(Ne==="month"&&(Ce.current=Ie),Ne==="year"&&(le.current=Ie),I([]),B(null),ae(null),ue([]),U(ut=>({...ut,[Ne]:parseInt(Ie),total_amount:"",used_units:""})),Q(),se())},K=Ne=>{const{name:Ie,value:ke}=Ne.target;if(Ie==="month"||Ie==="year"){ne(Ie,ke);return}const Qe={...P,[Ie]:ke};if(U(Qe),Ie==="current_reading"){const _e=parseFloat(ke)||0,ut=parseFloat(P.previous_reading)||0,pe=_e-ut;if(pe>=0)if(Qe.used_units=pe.toString(),Qe.total_amount="",pe>0&&_.length>0&&A.length>0){const{totalAmount:Ge,details:ze}=Se(pe);Qe.total_amount=Ge.toFixed(2),we(pe,Ge,ze)}else ae(null),ue([]);else ie.error("Current reading cannot be less than previous reading")}U(Qe)},Se=Ne=>{if(!_.length||!A.length)return{totalAmount:0,details:[]};const Ie=[..._].sort((ut,pe)=>parseFloat(ut.fromRange||ut.from_range||ut.from||0)-parseFloat(pe.fromRange||pe.from_range||pe.from||0));let ke=parseFloat(Ne),Qe=0;const _e=[];for(let ut=0;ut<Ie.length&&ke>0;ut++){const pe=Ie[ut],Ge=A.find(St=>{const Nr=St.billrange_id||St.range_id||St.id,tr=pe.id||pe._id;return Nr&&Nr.toString()===tr.toString()});if(!Ge){console.warn(`No price found for range ${pe.id}`);continue}const ze=parseFloat(pe.fromRange||pe.from_range||pe.from||0),Pe=pe.toRange?parseFloat(pe.toRange||pe.to_range||pe.to):1/0,Oe=parseFloat(Ge.unitprice||Ge.uniprice||0),nt=parseFloat(Ge.fixedamount||0);let kt=0;if(Pe===1/0)kt=ke,ke=0;else{const St=Pe-ze+1;ut===0?Ne<=St?kt=Ne:kt=St:kt=Math.min(St,ke),ke-=kt}if(kt>0){const St=kt*Oe+nt;Qe+=St,_e.push({range:`${ze} - ${Pe===1/0?"":Pe}`,units:kt,unitPrice:Oe,fixedAmount:nt,rangeAmount:St,calculation:`${kt}  ${Oe} + ${nt} = ${St.toFixed(2)}`})}}return{totalAmount:Qe,details:_e}},we=(Ne,Ie,ke)=>{ae({used_units:Ne,total_amount:Ie,calculated_at:new Date().toISOString()}),ue(ke)},Ve=async()=>{if(!Z){ie.error("Please calculate the bill first");return}const Ne=l?.houseId||l?.hse,Ie=f?.apartment_id,ke=f?.floor_id;if(!Ne||!Ie||!ke){ie.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:Ne,apartmentId:Ie,floorId:ke,source:b,scannedData:l,houseDetails:f});return}try{xe(!0);const Qe={house_id:Ne,apartment_id:Ie,floor_id:ke,bill_id:h,year:parseInt(P.year),month:oe(parseInt(P.month)),previous_reading:parseFloat(P.previous_reading)||0,current_reading:parseFloat(P.current_reading)||0,used_units:parseFloat(P.used_units)||Z.used_units,totalAmount:parseFloat(P.total_amount)||Z.total_amount,due_date:H||null,source:b},_e=await Ae.post("/generate-measurable-bills/from-calculation",Qe);_e.data.success?(ie.success("Bill generated successfully!"),U({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:P.current_reading,current_reading:"",used_units:"",total_amount:""}),ae(null),ue([]),setTimeout(()=>{a(`/house-bill-meter/${t}`)},2e3)):ie.error(_e.data.message||"Failed to generate bill")}catch(Qe){console.error("Error generating bill:",Qe);let _e="Failed to generate bill";Qe.response?.data?.message?_e=Qe.response.data.message:Qe.message&&(_e=Qe.message),ie.error(_e)}finally{xe(!1)}},Le=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];new Date().getFullYear(),C.useEffect(()=>{if(P.used_units&&parseFloat(P.used_units)>0&&_.length>0&&A.length>0){const Ne=parseFloat(P.used_units),{totalAmount:Ie,details:ke}=Se(Ne);U(Qe=>({...Qe,total_amount:Ie.toFixed(2)})),we(Ne,Ie,ke)}},[_,A]),C.useEffect(()=>{O&&A.length>0&&X()},[O,A]),C.useEffect(()=>{re(),se(),Ce.current=P.month,le.current=P.year},[h,l]),C.useEffect(()=>{h&&P.month&&P.year&&_.length>0&&Q()},[h,P.month,P.year,_.length]);const ot=oe(P.month);return{houseId:f?.house_id||l?.houseId,apartment:f?.apartment?.name||"N/A",floor:f?.floor?.floor_id||"N/A",houseDatabaseId:f?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(hr,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Mr,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>a(`/house-bill-meter/${t}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",d?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:b==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${b==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:b==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{re(),Q(),se(),ie.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:P.month,onChange:K,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,children:Le.map(Ne=>e.jsx("option",{value:Ne.value,children:Ne.label},Ne.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:P.year,onChange:K,min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:H,onChange:Ne=>z(Ne.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:P.previous_reading,onChange:K,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,readOnly:!0}),de&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-purple-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:P.current_reading,onChange:K,placeholder:"Enter current reading",min:P.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",ot," ",P.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:P.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),P.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(P.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>a(`/measurable-bills/${t}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:Ve,disabled:!Z||q,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function sA(){const[t,a]=C.useState([]),[r,i]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState(!1),[b,p]=C.useState(!1),{auth:w}=C.useContext(zr),j=gr(),E=async()=>{try{i(!0);const M=await Ae.get(`/user-bills/users/${w.user.id}/bills`);M.data.success?a(M.data.data||[]):(ie.error("Failed to load bills"),a([]))}catch(M){console.error("Error fetching bills:",M),ie.error("Error loading your bills"),a([])}finally{i(!1)}};C.useEffect(()=>{w?.user?.id&&E()},[w?.user?.id]);const _=t.filter(M=>M.bill_name?.toLowerCase().includes(l.toLowerCase())||M.billtype?.toLowerCase().includes(l.toLowerCase())),T=M=>{try{return new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=M=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(Pu,{size:12,className:"inline mr-1"})}})[M?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(wr,{size:12,className:"inline mr-1"})},I={totalBills:t.length,measurableBills:t.filter(M=>M.billtype?.toLowerCase()==="measurable").length},O=M=>{j(`/house-bill-meter/${M}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(hr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>p(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(hr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:I.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:I.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(As,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:l,onChange:M=>d(M.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Ut,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Sa,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:_.map(M=>{const D=A(M.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Sa,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:M.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.class}`,children:[D.icon,M.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[M.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Pu,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>O(M.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(Jy,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",T(M.assigned_at)]})})]},M.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(M=>{const D=A(M.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Sa,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:M.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${D.class}`,children:[D.icon,M.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[M.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Pu,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>O(M.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(Jy,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",T(M.assigned_at)]})})]},M.id)})})]})}),_.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(As,{size:20})})})]})})]}),e.jsx(or,{position:"top-right",autoClose:3e3})]})}function nA(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),[l,d]=C.useState("manual"),f=gr(),{bill_id:h}=pn(),b=()=>{f("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(hr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>i(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${r?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(hr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(On,{size:16})}),e.jsx(Sa,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(On,{size:16})}),e.jsx(Sa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(dw,{})})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function iA(){const[t,a]=C.useState([]),[r,i]=C.useState([]),[l,d]=C.useState(0),[f,h]=C.useState(0),[b,p]=C.useState(!1),[w,j]=C.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[E,_]=C.useState([]),[T,A]=C.useState([]),[I,O]=C.useState([]),[M,D]=C.useState(""),[B,H]=C.useState(""),[z,L]=C.useState(null),[P,U]=C.useState(!1),[Z,ae]=C.useState(!1),[Y,ue]=C.useState(!1),[de,G]=C.useState(null),[q,xe]=C.useState(!1),[Ce,le]=C.useState(!1),[oe,re]=C.useState(!1),[Q,X]=C.useState(!1),[se,ne]=C.useState(0),[K,Se]=C.useState(""),we=["","January","February","March","April","May","June","July","August","September","October","November","December"],Ve=new Date().getFullYear();Array.from({length:10},(at,yt)=>(Ve-5+yt).toString());const Le=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];C.useEffect(()=>{ot()},[]);const ot=async()=>{try{U(!0);const at=await Ae.get("/apartments");at.data.success?_(at.data.data||[]):_([])}catch(at){console.error("Error loading apartments:",at),ie.error("Failed to load apartments"),_([])}finally{U(!1)}};C.useEffect(()=>{w.apartment_id?J(w.apartment_id):(A([]),O([]),j(at=>({...at,floor_id:"",house_id:""})))},[w.apartment_id]),C.useEffect(()=>{w.floor_id&&w.apartment_id?Ne(w.floor_id):(O([]),j(at=>({...at,house_id:""})))},[w.floor_id,w.apartment_id]);const J=async at=>{try{ae(!0);const yt=await Ae.get(`/floors?apartment_id=${at}`);yt.data.success?A(yt.data.data||[]):A([])}catch(yt){console.error("Error loading floors:",yt),ie.error("Failed to load floors"),A([])}finally{ae(!1)}},Ne=async at=>{try{ue(!0);const yt=await Ae.get(`/houses?floor_id=${at}&apartment_id=${w.apartment_id}`);yt.data.success?O(yt.data.data||[]):O([])}catch(yt){console.error("Error loading houses:",yt),ie.error("Failed to load houses"),O([])}finally{ue(!1)}},Ie=async()=>{const at=(B||"").trim();if(!at){ie.info("Please enter an internal House PK to lookup");return}try{p(!0);const yt=w.payment_status.split(",");let Be=[];for(const Me of yt){const pt=new URLSearchParams({house_id:at,year:w.year,payment_status:Me.trim()});w.month&&pt.append("month",w.month);const Vr=await Ae.get(`/bill-payments?${pt}`);Vr.data&&Vr.data.success&&(Be=[...Be,...Vr.data.data||[]])}a(Be),Qe(Be);const Et=Be.filter(Me=>Me.payment_status==="Pending").reduce((Me,pt)=>Me+(parseFloat(pt.pendingAmount)||0),0),Bt=Be.filter(Me=>Me.payment_status==="Partial").reduce((Me,pt)=>Me+(parseFloat(pt.pendingAmount)||0),0);d(Et),h(Bt),L({houseNumber:at,apartmentName:"",apartmentAddress:"",floorNumber:"",houseId:at}),j(Me=>({...Me,house_id:at})),Be.length>0?ie.success(`Found ${Be.length} bill(s)`):ie.info("No bills found for the given house PK")}catch(yt){console.error("House PK lookup failed",yt),ie.error("Failed to lookup bills by house PK")}finally{p(!1)}};C.useEffect(()=>{if(w.house_id){const at=setTimeout(()=>{ke(w.house_id)},100);return()=>clearTimeout(at)}},[w.house_id,w.year,w.month,w.payment_status]);const ke=async at=>{if(!(!at||!w.apartment_id||!w.floor_id||!w.year))try{p(!0);const yt=I.find(sr=>sr.id===at),Be=E.find(sr=>sr.id===w.apartment_id),Et=T.find(sr=>sr.id===w.floor_id);yt&&Be&&Et&&L({houseNumber:yt.house_id,apartmentName:Be.name,apartmentAddress:Be.address,floorNumber:Et.floor_id,houseId:yt.id});const Bt=w.payment_status.split(",");let Me=[];for(const sr of Bt){const Ta=new URLSearchParams({house_id:at,apartment_id:w.apartment_id,floor_id:w.floor_id,year:w.year,payment_status:sr.trim()});w.month&&Ta.append("month",w.month);const Ts=await Ae.get(`/bill-payments?${Ta}`);Ts.data.success&&(Me=[...Me,...Ts.data.data||[]])}a(Me),Qe(Me);const pt=Me.filter(sr=>sr.payment_status==="Pending").reduce((sr,Ta)=>sr+(parseFloat(Ta.pendingAmount)||0),0),Vr=Me.filter(sr=>sr.payment_status==="Partial").reduce((sr,Ta)=>sr+(parseFloat(Ta.pendingAmount)||0),0);d(pt),h(Vr),ne(0),Se("");const Dt=Me.filter(sr=>sr.payment_status==="Pending").length,Yt=Me.filter(sr=>sr.payment_status==="Partial").length;if(Me.length>0){let sr=`Found ${Dt} pending and ${Yt} partial bills for House ${yt?.house_id}`;w.month?sr+=` (${w.month} ${w.year})`:sr+=` (Year: ${w.year})`,ie.success(sr)}else ie.info("No bills found for the selected criteria")}catch(yt){console.error("Error loading bills:",yt),ie.error("Failed to load bills"),a([]),i([]),d(0),h(0)}finally{p(!1)}},Qe=(at=t)=>{const yt=w.payment_status.split(","),Be=at.filter(Et=>yt.includes(Et.payment_status));i(Be)},_e=at=>{j(Me=>({...Me,payment_status:at})),Qe();const yt=at.split(","),Be=t.filter(Me=>yt.includes(Me.payment_status)),Et=Be.filter(Me=>Me.payment_status==="Pending").reduce((Me,pt)=>Me+(parseFloat(pt.pendingAmount)||0),0),Bt=Be.filter(Me=>Me.payment_status==="Partial").reduce((Me,pt)=>Me+(parseFloat(pt.pendingAmount)||0),0);d(Et),h(Bt)},ut=(at,yt)=>{j(Be=>{const Et={...Be,[at]:yt};return at==="apartment_id"?(Et.floor_id="",Et.house_id=""):at==="floor_id"&&(Et.house_id=""),Et})},pe=()=>{j({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),_([]),A([]),O([]),a([]),i([]),d(0),h(0),L(null),ne(0),Se(""),ot()},Ge=at=>{G(at),xe(!0)},ze=()=>{le(!0)},Pe=()=>{const at=((l+f)*.5).toFixed(2);ne(at),Se(new Date().toISOString().split("T")[0]),re(!0)},Oe=()=>{xe(!1),le(!1),re(!1),G(null)},nt=at=>{const yt=t.find(Me=>Me.id===at.id)||null,Be=t.map(Me=>Me.id===at.id?at:Me);a(Be),Qe(Be);const Et=Be.filter(Me=>Me.payment_status==="Pending").reduce((Me,pt)=>Me+(parseFloat(pt.pendingAmount)||0),0),Bt=Be.filter(Me=>Me.payment_status==="Partial").reduce((Me,pt)=>Me+(parseFloat(pt.pendingAmount)||0),0);d(Et),h(Bt),Oe();try{const Me=parseFloat(yt?.paidAmount||0),pt=parseFloat(at.paidAmount||0),Vr=Math.max(0,pt-Me);if(Vr>0){const Dt={...yt,originalPendingAmount:parseFloat(yt?.pendingAmount||0),pendingAmount:Vr,paidAmount:Me,additionalPayment:Vr};Nr([Dt]).catch(Yt=>{console.error("Invoice generation for single bill failed",Yt),ie.error("Payment succeeded but invoice generation failed")})}}catch(Me){console.error("Error while preparing invoice for updated payment",Me)}at.payment_status==="Paid"&&ie.success("Payment completed successfully!")},kt=at=>{const yt=typeof at=="string"?parseFloat(at):at;return isNaN(yt)?"0.00":yt.toFixed(2)},St=async()=>{try{p(!0);const at=r.map(Et=>({...Et})),yt=r.map(Et=>Ae.patch(`/bill-payments/${Et.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(Et.paidAmount)+parseFloat(Et.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all(yt);const Be=l+f;ie.success(`Successfully paid ${r.length} bills totaling $${Be.toFixed(2)}`);try{await Nr(at)}catch(Et){console.error("Invoice generation after total payment failed",Et),ie.error("Payment succeeded but invoice generation failed")}await ke(w.house_id),le(!1)}catch(at){console.error("Error processing total payment:",at),ie.error("Failed to process total payment")}finally{p(!1)}},Nr=async at=>{try{const{jsPDF:yt}=await tw(async()=>{const{jsPDF:At}=await import("./jspdf.es.min-CnxLNsEh.js").then(ra=>ra.j);return{jsPDF:At}},[]),Be=new yt("p","mm","a4"),Et=Be.internal.pageSize.getWidth(),Bt=Be.internal.pageSize.getHeight(),Me=15,pt=Et-Me*2;at=await Promise.all(at.map(async At=>{if(At.due_date||At.dueDate||At.due)return At;try{const ra=await Ae.get(`/bill-payments/${At.id}`),Tr=ra.data&&(ra.data.data||ra.data);if(Tr)return{...At,due_date:Tr.due_date||Tr.dueDate||Tr.due||At.due_date}}catch{}return At}));try{const At=await fetch("/apartment.png");if(At.ok){const ra=await At.blob(),Tr=URL.createObjectURL(ra);Be.addImage(Tr,"PNG",Me,12,16,16)}}catch{}Be.setFontSize(20),Be.setTextColor(58,50,150),Be.setFont(void 0,"bold"),Be.text("AptSync",Me+22,26),Be.setFontSize(26),Be.setTextColor(40,40,40),Be.text("INVOICE",Et-Me,26,{align:"right"});let Dt=50;Be.setFontSize(10),Be.setTextColor(40,40,40);const Yt=`INV-${new Date().getFullYear()}-${String(new Date().getTime()%1e4).padStart(4,"0")}`,sr=new Date().toLocaleDateString();Be.text(`Invoice No: ${Yt}`,Me,Dt),Be.text(`Date: ${sr}`,Et-Me,Dt,{align:"right"}),Dt+=12,Be.setFont(void 0,"bold"),Be.setTextColor(58,50,150),Be.text("BILL TO",Me,Dt),Be.setFont(void 0,"normal"),Be.setTextColor(40,40,40),Dt+=8,Be.text(`Apartment: ${z?.apartmentName||"N/A"}`,Me,Dt),Dt+=6,Be.text(`Address: ${z?.apartmentAddress||"N/A"}`,Me,Dt),Dt+=6,Be.text(`Floor: ${z?.floorNumber||"N/A"}`,Me,Dt),Dt+=6,Be.text(`House: ${z?.houseNumber||""}`,Me,Dt),Dt+=10;const Ta=Me,Ts=Me+pt*.3,$r=Ts+pt*.2,zs=$r+pt*.15,Yr=zs+pt*.12,ps=Et-Me;Be.setFillColor(245,245,245),Be.rect(Me,Dt,pt,10,"F"),Be.setDrawColor(200),Be.rect(Me,Dt,pt,10),Be.setFont(void 0,"bold"),Be.setFontSize(11),Be.text("Description",Ta+2,Dt+7),Be.text("Period",Ts+2,Dt+7),Be.text("Due Date",$r+2,Dt+7),Be.text("Total",zs+2,Dt+7),Be.text("Paid",Yr+2,Dt+7),Be.text("Pending",ps-2,Dt+7,{align:"right"}),Dt+=14,Be.setFont(void 0,"normal"),Be.setFontSize(10);let bn=0,ta=0;for(const At of at){const ra=At.bill_name||At.bill_id||"Charge",Tr=`${At.month||""} ${At.year||""}`.trim()||"N/A",Us=At.due_date||At.dueDate||At.due?new Date(At.due_date||At.dueDate||At.due).toLocaleDateString():"N/A",ce=parseFloat(At.paidAmount)||0,me=typeof At.originalPendingAmount<"u"?parseFloat(At.originalPendingAmount)||0:parseFloat(At.pendingAmount)||0,ge=typeof At.additionalPayment<"u"?parseFloat(At.additionalPayment)||parseFloat(At.pendingAmount)||0:parseFloat(At.pendingAmount)||0,ye=ce+me,ve=ce+ge,Ee=Math.max(0,ye-ve);Be.setFillColor(255,255,255),Be.rect(Me,Dt-3,pt,9,"F"),Be.setDrawColor(220),Be.rect(Me,Dt-3,pt,9),Be.text(ra,Ta+2,Dt+4),Be.text(Tr,Ts+2,Dt+4),Be.text(Us,$r+2,Dt+4),Be.text(`$${ye.toFixed(2)}`,zs+2,Dt+4),Be.text(`$${ve.toFixed(2)}`,Yr+2,Dt+4),Be.text(`$${Ee.toFixed(2)}`,ps-2,Dt+4,{align:"right"}),Dt+=12,bn+=ye,ta+=ge,Dt>Bt-80&&(Be.addPage(),Dt=20)}Dt+=6,Be.setFillColor(245,245,245),Be.rect($r,Dt,pt-($r-Me),12,"F"),Be.setDrawColor(200),Be.rect($r,Dt,pt-($r-Me),12),Be.setFont(void 0,"bold"),Be.setFontSize(12),Be.setTextColor(58,50,150),Be.text("Grand Total:",$r+6,Dt+8),Be.text(`$${bn.toFixed(2)}`,ps-2,Dt+8,{align:"right"}),Be.setFont(void 0,"normal"),Dt+=18,Be.setFont(void 0,"normal"),Be.setFontSize(10),Be.setTextColor(100,116,139),Be.text("Thank you for your payment!",Et/2,Bt-30,{align:"center"}),Be.setDrawColor(200),Be.setLineWidth(.5),Be.rect(10,10,Et-20,Bt-20);const la=`Invoice_${Yt}_${(z?.apartmentName||"Apartment").replace(/\s+/g,"_")}_${z?.houseNumber||""}.pdf`;Be.save(la),ie.success("Invoice downloaded")}catch(yt){console.error("Invoice generation failed",yt),ie.error("Failed to generate invoice")}},tr=async()=>{try{p(!0);const at=l+f,yt=parseFloat(se);if(yt<=0){ie.error("Payment amount must be greater than 0");return}if(yt>at){ie.error(`Payment amount cannot exceed total amount of $${kt(at)}`);return}const Be=r.map(Me=>{const Vr=(parseFloat(Me.pendingAmount)||0)/at,Dt=yt*Vr;return{...Me,additionalPayment:Dt}}),Et=Be.map(Me=>({...Me,originalPendingAmount:parseFloat(Me.pendingAmount)||0,pendingAmount:Me.additionalPayment,paidAmount:Me.paidAmount})),Bt=Be.map(Me=>{const pt=parseFloat(Me.paidAmount)+Me.additionalPayment,Vr=parseFloat(Me.pendingAmount)-Me.additionalPayment;let Dt="Partial";return Vr<=.01?Dt="Paid":pt>0&&(Dt="Partial"),Ae.patch(`/bill-payments/${Me.id}/status`,{payment_status:Dt,paidAmount:pt,paid_at:K||new Date().toISOString().split("T")[0]})});await Promise.all(Bt),ie.success(`Successfully paid $${kt(yt)} across ${r.length} bills`),await ke(w.house_id);try{await Nr(Et)}catch(Me){console.error("Invoice generation after partial payment failed",Me),ie.error("Partial payment succeeded but invoice generation failed")}re(!1)}catch(at){console.error("Error processing partial payment:",at),ie.error("Failed to process partial payment")}finally{p(!1)}},qt=at=>{switch(at){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},Gt=at=>{switch(at){case"Paid":return e.jsx(_s,{size:16,className:"text-green-600"});case"Partial":return e.jsx(Tn,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(Tn,{size:16,className:"text-yellow-600"});default:return null}},lr=l+f;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:X}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${Q?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:pe,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:w.year,onChange:at=>ut("year",at.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:w.month,onChange:at=>ut("month",at.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),we.slice(1).map(at=>e.jsx("option",{value:at,children:at},at))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:w.apartment_id,onChange:at=>ut("apartment_id",at.target.value),disabled:P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),E.map(at=>e.jsx("option",{value:at.id,children:at.name},at.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:w.floor_id,onChange:at=>ut("floor_id",at.target.value),disabled:!w.apartment_id||Z,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),T.map(at=>e.jsxs("option",{value:at.id,children:["Floor ",at.floor_id]},at.id))]}),Z&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:w.house_id,onChange:at=>ut("house_id",at.target.value),disabled:!w.floor_id||Y,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),I.map(at=>e.jsxs("option",{value:at.id,children:["House ",at.house_id]},at.id))]}),Y&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or enter House ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:B,onChange:at=>H(at.target.value),placeholder:"e.g. house-abc123",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:Ie,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Lookup"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the internal House ID to fetch all bill payments directly."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Le.map(at=>e.jsxs("button",{type:"button",onClick:()=>_e(at.value),className:`px-3 py-1 text-sm rounded-lg border ${w.payment_status===at.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${at.color}`}),at.label]},at.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>w.house_id&&ke(w.house_id),disabled:!w.house_id||!w.year||!w.apartment_id||!w.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(jm,{size:16}),"Load Bills"]})})]}),z&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(qr,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",z.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[z.apartmentName,"  Floor ",z.floorNumber,w.month?`  ${w.month} ${w.year}`:`  Year: ${w.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",w.payment_status==="Pending,Partial"?"Pending & Partial Bills":w.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 md:col-span-2",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Total Pending Amount"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",kt(lr)]})]})}),b?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(_s,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>_e("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:Pe,disabled:r.length===0||lr<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Zs,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:ze,disabled:r.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Zs,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(at=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${qt(at.payment_status)}`,children:[Gt(at.payment_status),at.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:at.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:at.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[at.month," ",at.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",kt(at.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",kt(at.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Ge(at),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx(Zs,{size:18})})})})]},at.id))})]})})]})]})]})})]}),q&&e.jsx(iw,{payment:de,onClose:Oe,onUpdate:nt}),Ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx(Zs,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",r.length," selected bills for House ",z?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",kt(l)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",kt(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[z?.apartmentName," - House ",z?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:w.month?`${w.month} ${w.year}`:`Year: ${w.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",kt(lr)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>le(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:St,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${kt(lr)}`})]})]})})}),oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx(Zs,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",r.length," bills for House ",z?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",kt(lr)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[z?.apartmentName," - House ",z?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:at=>{at.preventDefault(),tr()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Zs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:lr,value:se,onChange:at=>ne(at.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",kt(lr)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",kt(lr-parseFloat(se||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:K,onChange:at=>Se(at.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",kt(se)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",kt(lr-parseFloat(se||0))]})]}),parseFloat(se||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",r.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>re(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!se||parseFloat(se)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${kt(se)}`})]})]})]})})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function lA(){const[t,a]=C.useState(""),[r,i]=C.useState(""),[l,d]=C.useState(!1),[f,h]=C.useState(""),b=gr(),p=async w=>{w.preventDefault(),d(!0),h("");try{const j=await Ae.post("/houseowner-auth/login",{email:t,password:r});j.data.success&&(localStorage.setItem("houseOwnerToken",j.data.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(j.data.owner)),b("/houseowner/dashboard"))}catch(j){h(j.response?.data?.message||"Login failed")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"House Owner Login"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Access your apartment management portal"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[f&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:t,onChange:w=>a(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:r,onChange:w=>i(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx(ro,{to:"/houseowner/forgot-password",className:"text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? Contact your apartment administrator."})})]})})}function Bi({onCollapse:t}){const[a,r]=C.useState(!0),[i,l]=C.useState(!1),[d,f]=C.useState(null),h=[{title:"Dashboard",icon:e.jsx(_C,{size:20}),path:"/houseowner/dashboard",exact:!0},{title:"My House",icon:e.jsx(qr,{size:20}),path:"/houseowner/houseowner-houseview",exact:!1},{title:"My Bills",icon:e.jsx(Sa,{size:20}),path:"/houseowner/houseowner-billview",exact:!1},{title:"Complaints",icon:e.jsx(Sa,{size:20}),path:"/houseowner/complaints",exact:!1},{title:"Profile",icon:e.jsx(Qa,{size:20}),path:"/houseowner/houseowner-profile",exact:!1}],b=E=>{f(d===E?null:E)},p=({item:E})=>{const _=E.exact?location.pathname===E.path:location.pathname.startsWith(E.path);return e.jsx("div",{className:"mb-1",children:E.subItems?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(E.title),className:`flex items-center justify-between w-full p-3 rounded-lg transition-colors ${_?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[E.icon,e.jsx("span",{className:"font-medium",children:E.title})]}),d===E.title?e.jsx(Cl,{size:16}):e.jsx(ai,{size:16})]}),d===E.title&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:E.subItems.map((T,A)=>e.jsx(hm,{to:T.path,className:({isActive:I})=>`block p-2 rounded-lg transition-colors ${I?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>l(!1),children:e.jsx("span",{className:"text-sm",children:T.title})},A))})]}):e.jsxs(hm,{to:E.path,className:({isActive:T})=>`flex items-center gap-3 p-3 rounded-lg transition-colors ${T?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>l(!1),children:[E.icon,e.jsx("span",{className:"font-medium",children:E.title})]})})},w=()=>e.jsx("button",{onClick:()=>l(!i),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white text-gray-800 dark:bg-gray-800  dark:text-gray-300 rounded-lg shadow-lg",children:i?e.jsx(yr,{size:24}):e.jsx(Dl,{size:24})}),j=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(qr,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"AptSync"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"House Owner Portal"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:h.map((E,_)=>e.jsx(p,{item:E},_))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),i&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>l(!1)}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 ${i?"translate-x-0":"-translate-x-full"}`,children:e.jsx(j,{})}),e.jsx("aside",{className:`hidden lg:flex flex-col w-64 bg-white dark:bg-gray-900 border-r dark:border-gray-800 transition-all duration-300 fixed left-0 top-0 h-full z-30 ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(j,{})})]})}function Li(){const[t,a]=C.useState(!1),{auth:r,logout:i,resetActivityTimer:l}=C.useContext(zr),d=gr(),[f,h]=C.useState(!1);C.useEffect(()=>{const E=localStorage.getItem("theme"),_=window.matchMedia("(prefers-color-scheme: dark)").matches;E==="dark"||!E&&_?(a(!0),document.documentElement.classList.add("dark")):(a(!1),document.documentElement.classList.remove("dark"))},[]),C.useEffect(()=>{if(!r.accessToken)return;const E=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],_=()=>l();E.forEach(A=>window.addEventListener(A,_,{passive:!0}));const T=()=>{document.hidden||l()};return document.addEventListener("visibilitychange",T),()=>{E.forEach(A=>window.removeEventListener(A,_)),document.removeEventListener("visibilitychange",T)}},[r.accessToken,l]);const b=async()=>{try{await Ae.post("/auth/logout"),i(),ie.success("Logged out successfully"),d("/")}catch(E){console.error("Logout error:",E),i(),ie.success("Logged out successfully"),d("/")}finally{h(!1)}},p=()=>{h(!0)},w=()=>{h(!1)},j=()=>{const E=!t;a(E),E?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:j,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:t?"Switch to light mode":"Switch to dark mode",children:t?e.jsx(Em,{size:20}):e.jsx(km,{size:20})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate max-w-[120px]",children:r?.user?.name||"House Owner"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[120px]",children:r?.user?.email||"user@example.com"})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:p,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Nm,{size:20})})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out from the House Owner Portal?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function oA(){const[t,a]=C.useState(!1),[r,i]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState({total:0,pending:0,resolved:0}),[b,p]=C.useState([]),[w,j]=C.useState([]),[E,_]=C.useState(!1),{auth:T}=C.useContext(zr);C.useEffect(()=>{const O=()=>{_(window.innerWidth<1024)};return O(),window.addEventListener("resize",O),()=>window.removeEventListener("resize",O)},[]),C.useEffect(()=>{A()},[T.accessToken]);const A=async()=>{try{i(!0),d(""),await I(),j([{id:1,message:"Maintenance scheduled for tomorrow",time:"2 hours ago",type:"info"},{id:2,message:"New community notice posted",time:"1 day ago",type:"info"}])}catch(O){console.error("Failed to fetch dashboard data:",O),d("Failed to load dashboard data")}finally{i(!1)}},I=async()=>{try{if(T.accessToken){const O=await Ae.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${T.accessToken}`}});if(O.data.success)if(O.data.statistics)h({total:O.data.statistics.total||0,pending:O.data.statistics.pending||0,resolved:O.data.statistics.resolved||0});else{const M=O.data.data||[],D=M.length,B=M.filter(z=>z.status==="Pending").length,H=M.filter(z=>z.status==="Resolved"||z.status==="Closed").length;h({total:D,pending:B,resolved:H})}}}catch(O){console.error("Failed to fetch complaint stats:",O)}};return r?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Bi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?E?"ml-0":"ml-20":E?"ml-0":"ml-64"}`,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Bi,{onCollapse:a}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${t?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(qr,{size:E?32:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:`${E?"text-xl":"text-2xl"} font-bold text-gray-800 dark:text-white`,children:"House Owner Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",T.user?.name||"House Owner","!"]})]})]})}),l&&e.jsx("div",{className:"mb-4 md:mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l}),e.jsx("button",{onClick:A,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Complaints"}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(wr,{size:E?18:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:f.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"All time complaints"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Pending"}),e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Tn,{size:E?18:24,className:"text-yellow-600 dark:text-yellow-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-yellow-600 dark:text-yellow-400`,children:f.pending}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Awaiting resolution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Resolved"}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(_s,{size:E?18:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${E?"text-2xl":"text-3xl"} font-bold text-green-600 dark:text-green-400`,children:f.resolved}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Issues fixed"})]})]})]}),E&&e.jsx("div",{className:"h-16"})]})})]})]})}function cA(){const[t]=rd(),a=gr(),[r,i]=C.useState(!0),[l,d]=C.useState(""),[f,h]=C.useState(""),[b,p]=C.useState(!1),[w,j]=C.useState(""),[E,_]=C.useState(""),[T,A]=C.useState(""),[I,O]=C.useState(""),[M,D]=C.useState(""),[B,H]=C.useState(!1),[z,L]=C.useState(!1);C.useEffect(()=>{const Y=t.get("token"),ue=t.get("id");Y&&ue?(O(Y),A(ue),P(Y,ue)):(h("Invalid verification link"),i(!1))},[]);const P=async(Y,ue)=>{try{const de=await Ae.post("/houseowner-auth/verify",{token:Y,id:ue});de.data.success&&(d(de.data.message),de.data.requires_password?p(!0):setTimeout(()=>{a("/login")},2e3))}catch(de){h(de.response?.data?.message||"Verification failed")}finally{i(!1)}},U=async()=>{if(D(""),w.length<6){D("Password must be at least 6 characters");return}if(w!==E){D("Passwords do not match");return}const Y=/[A-Z]/.test(w),ue=/[a-z]/.test(w),de=/\d/.test(w),G=/[!@#$%^&*(),.?":{}|<>]/.test(w);if(!Y||!ue||!de||!G){D("Password must contain uppercase, lowercase, numbers, and special characters");return}try{i(!0);const q=await Ae.post("/houseowner-auth/setup-password",{token:I,id:T,password:w});q.data.success&&(d(q.data.message),p(!1),setTimeout(()=>{a("/login")},3e3))}catch(q){D(q.response?.data?.message||"Failed to set password")}finally{i(!1)}},Z=Y=>{j(Y.target.value),M&&D("")},ae=Y=>{_(Y.target.value),M&&D("")};return r&&!b?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying your email..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-md w-full p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:f?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f}),e.jsx("button",{onClick:()=>a("/"),className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Homepage"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:b?"Set Your Password":"Email Verified Successfully!"}),l&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l}),b?e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:B?"text":"password",placeholder:"Enter password",value:w,onChange:Z,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>H(!B),className:"passwordToggle bottom-0","aria-label":B?"Hide password":"Show password",children:B?e.jsx(In,{size:20}):e.jsx(tn,{size:20})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"Must be at least 6 characters with uppercase, lowercase, numbers, and special characters"})]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:z?"text":"password",placeholder:"Confirm password",value:E,onChange:ae,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>L(!z),className:"passwordToggle","aria-label":z?"Hide password":"Show password",children:z?e.jsx(In,{size:20}):e.jsx(tn,{size:20})})]}),M&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:M})}),e.jsx("button",{onClick:U,disabled:r,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Setting Password..."]}):"Set Password"})]})}):e.jsx("button",{onClick:()=>a("/login"),className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Login"})]})})})}function dA(){const[t,a]=C.useState({}),[r,i]=C.useState({}),[l,d]=C.useState([]),[f,h]=C.useState(null),[b,p]=C.useState(null),[w,j]=C.useState([]),[E,_]=C.useState(!0),[T,A]=C.useState(null),[I,O]=C.useState(!1),{auth:M}=C.useContext(zr),D=async()=>{try{if(_(!0),A(null),M.accessToken){const P=await Ae.get("/houses/owner/me",{headers:{Authorization:`Bearer ${M.accessToken}`,"Content-Type":"application/json"}});if(P.data.success){const U=P.data.data||[];d(U);const Z={},ae={},Y={};U.forEach(ue=>{ue.apartment_id&&(Z[ue.apartment_id]={id:ue.apartment_id,name:ue.apartment_name,address:ue.apartment_address,city:ue.apartment_city}),ue.floor_id&&(ae[ue.floor_id]={id:ue.floor_id,floor_id:ue.floor_id,floor_number:ue.floor_number}),ue.housetype_id&&(Y[ue.housetype_id]={id:ue.housetype_id,name:ue.house_type_name,sqrfeet:ue.house_type_sqrfeet,rooms:ue.house_type_rooms,bathrooms:ue.house_type_bathrooms})}),a(Z),i(ae),j(Object.values(Y)),U.length>0?h(U[0]):h(null)}else A(P.data.message||"Failed to fetch houses")}else A("No authentication token found. Please log in.")}catch(P){console.error("Failed to fetch house data:",P),ie.error("Failed to fetch house data"),P.response?(console.error("Error response:",P.response.data),console.error("Error status:",P.response.status),P.response.status===401?A("Session expired. Please log in again."):P.response.status===403?A("Access denied. You are not authorized as a house owner."):P.response.status===404?A("No houses found for your account."):A(P.response.data?.message||"Failed to load house data")):P.request?A("Network error. Please check your internet connection."):A("An unexpected error occurred.")}finally{_(!1)}};C.useEffect(()=>{D()},[M.accessToken]);const B=P=>{if(!P)return"N/A";const U=w.find(ae=>ae.id===P);return U?U.name:l.find(ae=>ae.housetype_id===P)?.house_type_name||"N/A"},H=P=>{if(!P)return"N/A";const U=t[P];return U?U.name:l.find(ae=>ae.apartment_id===P)?.apartment_name||"N/A"},z=P=>{if(!P)return"N/A";const U=r[P];return U&&U.floor_number?U.floor_number:l.find(ae=>ae.floor_id===P)?.floor_number||"N/A"},L=P=>{h(P)};return E?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Bi,{onCollapse:O}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${I?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your house details..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Bi,{onCollapse:O}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${I?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6",children:[e.jsx(qr,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Houses"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your properties"})]})]}),T&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:T})]})}),l.length>1&&e.jsxs("div",{className:"mb-4 md:mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-3",children:"Select a House"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((P,U)=>e.jsxs("button",{onClick:()=>L(P),className:`px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base rounded-lg transition-colors ${f?.id===P.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",U+1,": ",P.house_id]},P.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"House Information"}),e.jsx("span",{className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${f.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":f.status==="available"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:f.status?.charAt(0).toUpperCase()+f.status?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Number"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(qr,{className:"text-purple-600 dark:text-purple-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_id||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{className:"text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_type_name||B(f.housetype_id)})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Floor"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pf,{className:"text-green-600 dark:text-green-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white",children:f.floor_number||z(f.floor_id)})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Apartment Complex"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment Name"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white break-words",children:f.apartment_name||H(f.apartment_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200 break-words",children:f.apartment_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"City"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.apartment_city||"N/A"})]})]}),f.house_type_name&&e.jsxs("div",{className:"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"House Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Square Feet"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:[f.house_type_sqrfeet||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_rooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Bathrooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_bathrooms||"N/A"})]})]})]})]})]}),l.length===0&&!T&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(qr,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function uA(){const[t,a]=C.useState({}),[r,i]=C.useState({}),[l,d]=C.useState([]),[f,h]=C.useState(null),[b,p]=C.useState([]),[w,j]=C.useState([]),[E,_]=C.useState([]),[T,A]=C.useState(!0),[I,O]=C.useState(!1),[M,D]=C.useState(null),[B,H]=C.useState(!1),[z,L]=C.useState({totalBills:0,totalPaid:0,totalPending:0,totalAmount:0}),[P,U]=C.useState({status:"all",month:"all",year:new Date().getFullYear(),house_id:"all"}),{auth:Z}=C.useContext(zr),ae=async()=>{try{if(A(!0),D(null),Z.accessToken){const re=await Ae.get("/houses/owner/me",{headers:{Authorization:`Bearer ${Z.accessToken}`,"Content-Type":"application/json"}});if(re.data.success){const Q=re.data.data||[];d(Q);const X={},se={},ne={};Q.forEach(K=>{K.apartment_id&&(X[K.apartment_id]={id:K.apartment_id,name:K.apartment_name,address:K.apartment_address,city:K.apartment_city}),K.floor_id&&(se[K.floor_id]={id:K.floor_id,floor_id:K.floor_id,floor_number:K.floor_number}),K.housetype_id&&(ne[K.housetype_id]={id:K.housetype_id,name:K.house_type_name,sqrfeet:K.house_type_sqrfeet,rooms:K.house_type_rooms,bathrooms:K.house_type_bathrooms})}),a(X),i(se),p(Object.values(ne)),Q.length>0?(h(Q[0]),Y()):h(null)}else D(re.data.message||"Failed to fetch houses")}else D("No authentication token found. Please log in.")}catch(re){console.error("Failed to fetch house data:",re),re.response?.status===401?D("Session expired. Please log in again."):re.response?.status===403?D("Access denied. Please contact administrator."):re.response?.status===404?D("No houses found for your account."):re.request?D("Network error. Please check your internet connection."):D("An unexpected error occurred.")}finally{A(!1)}},Y=async()=>{try{O(!0),D(null);const re={},Q=await Ae.get("/bill-payments/house-owner/me",{headers:{Authorization:`Bearer ${Z.accessToken}`,"Content-Type":"application/json"},params:re});if(Q.data.success){const X=Q.data.data||[],se=Q.data.houses||l;j(X),_(X),Q.data.houses&&d(se),Q.data.summary&&L(Q.data.summary),se.length>0&&!f&&h(se[0])}else console.error("[Frontend] API error:",Q.data.message),D(Q.data.message||"Failed to fetch bills"),j([]),_([])}catch(re){console.error("[Frontend] Failed to fetch bill payments:",re);try{const Q=await Ae.get("/bill-payments/debug/database-state",{headers:{Authorization:`Bearer ${Z.accessToken}`,"Content-Type":"application/json"}})}catch(Q){console.error(" [Frontend] Debug endpoint failed:",Q)}re.response?(console.error("[Frontend] Error response:",{status:re.response.status,data:re.response.data,headers:re.response.headers}),re.response.status===401?D("Session expired. Please log in again."):re.response.status===403?D("Access denied. Please contact administrator."):re.response.status===404?(D("No bill payments found for your account."),j([]),_([])):re.response.data?.message?D(re.response.data.message):D(`Server error: ${re.response.status}`)):re.request?(console.error("[Frontend] No response received:",re.request),D("Network error. Please check your internet connection.")):(console.error("[Frontend] Request setup error:",re.message),D("An unexpected error occurred: "+re.message))}finally{O(!1)}};C.useEffect(()=>{ae()},[Z.accessToken]),C.useEffect(()=>{f&&Y()},[f,P]),C.useEffect(()=>{if(!w.length){_([]);return}let re=[...w];P.status!=="all"&&(re=re.filter(Q=>Q.payment_status===P.status)),P.month!=="all"&&(re=re.filter(Q=>Q.month===P.month)),P.year!=="all"&&(re=re.filter(Q=>Q.year.toString()===P.year.toString())),P.house_id!=="all"&&(re=re.filter(Q=>Q.house_id===P.house_id)),_(re)},[w,P]);const ue=re=>{h(re),U({status:"all",month:"all",year:"all",house_id:re.id})},de=(re,Q)=>{U(X=>({...X,[re]:Q}))},G=()=>{U({status:"all",month:"all",year:"all",house_id:f?.id||"all"})},q=re=>{switch(re){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},xe=re=>{switch(re){case"Paid":return e.jsx(_s,{size:16,className:"text-green-600 dark:text-green-400"});case"Partial":return e.jsx(Zs,{size:16,className:"text-blue-600 dark:text-blue-400"});case"Pending":return e.jsx(Tn,{size:16,className:"text-yellow-600 dark:text-yellow-400"});default:return e.jsx(Tn,{size:16,className:"text-gray-600 dark:text-gray-400"})}},Ce=["January","February","March","April","May","June","July","August","September","October","November","December"];[...new Set(w.map(re=>re.year))].filter(Boolean).sort((re,Q)=>Q-re);const oe=(()=>{const re=E.length,Q=E.reduce((ne,K)=>ne+(parseFloat(K.totalAmount)||0),0),X=E.reduce((ne,K)=>ne+(parseFloat(K.paidAmount)||0),0),se=E.reduce((ne,K)=>ne+(parseFloat(K.pendingAmount)||0),0);return{totalBills:re,totalAmount:Q,paidAmount:X,pendingAmount:se}})();return T?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Bi,{onCollapse:H}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${B?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Bi,{onCollapse:H}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${B?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Sa,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Bills"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your bills"})]})]})}),M&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:M})]})}),l.length>1&&e.jsxs("div",{className:"lg:hidden mb-4 bg-white dark:bg-gray-800 rounded-lg shadow p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-white mb-2",children:"Select House to View Bills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((re,Q)=>e.jsxs("button",{onClick:()=>ue(re),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${f?.id===re.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",re.house_id||Q+1]},re.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Current House Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(xa,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.apartment_name}),e.jsx(qr,{size:18,className:"text-gray-500 dark:text-gray-400 ml-2"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["House ",f.house_id,", Floor ",f.floor_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:oe.totalBills})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Sa,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:["$",oe.totalAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Zs,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:["$",oe.paidAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(_s,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:["$",oe.pendingAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Tn,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Bills"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ld,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[E.length," of ",w.length," bills"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Payment Status"}),e.jsxs("select",{value:P.status,onChange:re=>de("status",re.target.value),className:"w-full px-3 text-gray-600 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Month"}),e.jsxs("select",{value:P.month,onChange:re=>de("month",re.target.value),className:"w-full px-3 py-2 text-gray-600 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Months"}),Ce.map(re=>e.jsx("option",{value:re,children:re},re))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Year"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:P.year,onChange:re=>de("year",re.target.value),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:G,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:I?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Sa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:w.length===0?"No bills have been generated for your houses yet.":"No bills match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:E.map((re,Q)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:re.bill_name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Type: ",re.billtype]}),re.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:re.description})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[re.month," ",re.year]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",re.due_date?new Date(re.due_date).toLocaleDateString():"Not set"]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Total: $",(parseFloat(re.totalAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",(parseFloat(re.paidAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",(parseFloat(re.pendingAmount)||0).toFixed(2)]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[xe(re.payment_status),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${q(re.payment_status)}`,children:re.payment_status})]})})]},re.id||Q))})]})})})]}),l.length===0&&!M&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(qr,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function fA(){const[t,a]=C.useState([]),[r,i]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(!1),[b,p]=C.useState(!1),[w,j]=C.useState(null),[E,_]=C.useState([]),[T,A]=C.useState({title:"",description:"",category_id:"",apartment_id:"",floor_id:"",house_id:""}),[I,O]=C.useState({}),[M,D]=C.useState({status:"all"}),[B,H]=C.useState({total:0,pending:0,resolved:0}),{auth:z}=C.useContext(zr),[L,P]=C.useState(!1),[U,Z]=C.useState(null),[ae,Y]=C.useState(!1),[ue,de]=C.useState({rating:0,feedback:""}),[G,q]=C.useState(""),[xe,Ce]=C.useState(!1),[le,oe]=C.useState(null),re=async()=>{try{const Ne=await Ae.get("/categories",{headers:{Authorization:`Bearer ${z.accessToken}`}});Ne.data.success&&_(Ne.data.data||[]);const Ie=await Ae.get("/houses/owner/me",{headers:{Authorization:`Bearer ${z.accessToken}`}});if(Ie.data.success&&Ie.data.data.length>0){const ke=Ie.data.data[0];Z(ke),A(Qe=>({...Qe,apartment_id:ke.apartment_id,floor_id:ke.floor_id,house_id:ke.id}))}else ie.warning("No house information found. Please contact your apartment administrator.")}catch(Ne){console.error("Failed to fetch house owner info:",Ne),ie.error("Failed to load your information. Please try again.")}},Q=async()=>{try{d(!0);const Ne=await Ae.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${z.accessToken}`},params:M});Ne.data.success&&(a(Ne.data.data||[]),i(Ne.data.data||[]),H(Ne.data.statistics||{total:0,pending:0,resolved:0}))}catch(Ne){console.error("Failed to fetch complaints:",Ne),ie.error("Failed to load complaints. Please try again.")}finally{d(!1)}};C.useEffect(()=>{z.accessToken&&(re(),Q())},[z.accessToken,M]),C.useEffect(()=>{if(!t.length){i([]);return}let Ne=[...t];M.status!=="all"&&(Ne=Ne.filter(Ie=>Ie.status===M.status)),i(Ne)},[t,M]);const X=async Ne=>{Ne.preventDefault();const Ie={};if(T.title.trim()||(Ie.title="Title is required"),T.description.trim()||(Ie.description="Description is required"),T.category_id||(Ie.category_id="Please select a category"),Object.keys(Ie).length>0){O(Ie);return}if(!T.house_id){ie.error("No house information found. Please contact your apartment administrator.");return}try{(await Ae.post("/complaints",{title:T.title,description:T.description,category_id:T.category_id,apartment_id:T.apartment_id,floor_id:T.floor_id,house_id:T.house_id},{headers:{Authorization:`Bearer ${z.accessToken}`,"Content-Type":"application/json"}})).data.success&&(ie.success("Complaint filed successfully!"),h(!1),se(),Q())}catch(ke){ie.error("Failed to create complaint");const Qe=ke.response?.data?.message||"Failed to create complaint";ie.error(Qe)}},se=()=>{A({title:"",description:"",category_id:"",apartment_id:U?.apartment_id||"",floor_id:U?.floor_id||"",house_id:U?.id||""}),O({})},ne=Ne=>{switch(Ne){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},K=Ne=>{switch(Ne){case"Pending":return e.jsx(Tn,{className:"text-yellow-600 dark:text-yellow-400 mr-2",size:16});case"In Progress":return e.jsx(qu,{className:"text-blue-600 dark:text-blue-400 mr-2",size:16});case"Resolved":return e.jsx(_s,{className:"text-green-600 dark:text-green-400 mr-2",size:16});case"Closed":return e.jsx(fo,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16});case"Rejected":return e.jsx(hE,{className:"text-red-600 dark:text-red-400 mr-2",size:16});default:return e.jsx(wr,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16})}},Se=async Ne=>{if(j(Ne),p(!0),Ne.status==="Closed")try{const Ie=await Ae.get(`/complaints/${Ne.id}/rating-status`,{headers:{Authorization:`Bearer ${z.accessToken}`}});Ie.data.success&&Ie.data.canRate&&(oe(Ne),Ce(!0))}catch(Ie){console.error("Error checking rating status:",Ie)}},we=async Ne=>{try{const Ie=await Ae.post(`/complaints/${Ne}/close`,{},{headers:{Authorization:`Bearer ${z.accessToken}`}});Ie.data.success&&(ie.success("Complaint closed successfully!"),Ie.data.requiresRating&&(oe(w),Y(!0)),Q(),p(!1))}catch(Ie){console.error("Failed to close complaint:",Ie),ie.error(Ie.response?.data?.message||"Failed to close complaint")}},Ve=async Ne=>{try{(await Ae.post(`/complaints/${Ne}/reopen`,{},{headers:{Authorization:`Bearer ${z.accessToken}`}})).data.success&&(ie.success("Complaint reopened successfully!"),Q(),p(!1))}catch(Ie){console.error("Failed to reopen complaint:",Ie),ie.error(Ie.response?.data?.message||"Failed to reopen complaint")}},Le=async Ne=>{if(Ne.preventDefault(),!ue.rating){q("Please select a rating");return}try{(await Ae.post(`/ratings/complaints/${le.id}/rate`,{rating:ue.rating,feedback:ue.feedback},{headers:{Authorization:`Bearer ${z.accessToken}`}})).data.success&&(ie.success("Thank you for your feedback!"),Y(!1),Ce(!1),de({rating:0,feedback:""}),q(""),Q())}catch(Ie){console.error("Failed to submit rating:",Ie),ie.error(Ie.response?.data?.message||"Failed to submit rating")}},ot=Ne=>{const Ie=E.find(ke=>ke.id===Ne);return Ie?Ie.color:"gray"},J=Ne=>new Date(Ne).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l&&!t.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Bi,{onCollapse:P}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${L?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Bi,{onCollapse:P}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${L?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Li,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(na,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Report and track maintenance issues"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!U,children:[e.jsx(qa,{size:20}),e.jsx("span",{children:"File New Complaint"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:B.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(wr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:B.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Tn,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:B.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(_s,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ld,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.length," of ",t.length," complaints"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:M.status,onChange:Ne=>D(Ie=>({...Ie,status:Ne.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(na,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t.length===0?"You haven't filed any complaints yet.":"No complaints match your filter criteria."}),t.length===0&&e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!U,children:"File Your First Complaint"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(Ne=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:Ne.complaint_number}),Ne.category_name&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${ot(Ne.category_id)}20`,color:ot(Ne.category_id)},children:Ne.category_name})]}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-2",children:Ne.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:Ne.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[e.jsx(xa,{size:12,className:"mr-1"}),Ne.apartment_name,"  Floor ",Ne.floor_number,"  House ",Ne.house_number]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[K(Ne.status),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ne(Ne.status)}`,children:Ne.status})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:J(Ne.created_at)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Se(Ne),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Details",children:e.jsx(wr,{size:16})})})})]},Ne.id))})]})})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"File New Complaint"}),e.jsx("button",{onClick:()=>{h(!1),se()},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),U?e.jsxs("form",{onSubmit:X,children:[e.jsx("div",{className:"mb-6"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Category *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:T.category_id,onChange:Ne=>{A(Ie=>({...Ie,category_id:Ne.target.value})),I.category_id&&O(Ie=>({...Ie,category_id:""}))},className:"w-full px-3 py-2 pl-10 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white appearance-none",children:[e.jsx("option",{value:"",children:"Select a category"}),E.map(Ne=>e.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]}),e.jsx(Uv,{className:"absolute left-3 top-2.5 text-gray-400",size:16})]}),I.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:I.category_id}),E.length===0&&e.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"No categories available. Please contact your administrator."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Title *"}),e.jsx("input",{type:"text",value:T.title,onChange:Ne=>{A(Ie=>({...Ie,title:Ne.target.value})),I.title&&O(Ie=>({...Ie,title:""}))},className:"w-full px-3 py-2 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief description of the issue"}),I.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:I.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Detailed Description *"}),e.jsx("textarea",{value:T.description,onChange:Ne=>{A(Ie=>({...Ie,description:Ne.target.value})),I.description&&O(Ie=>({...Ie,description:""}))},rows:4,className:"w-full px-3 py-2 border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed information about the issue..."}),I.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:I.description}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Be specific about the issue. Include details like location, severity, and any photos if possible."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),se()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Complaint"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(qr,{className:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:40}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No House Information Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please contact your apartment administrator to assign a house to your account."}),e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})]})})}),b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Complaint Details"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:w.complaint_number}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ne(w.status)}`,children:w.status}),w.category_name&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${ot(w.category_id)}20`,color:ot(w.category_id)},children:w.category_name})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-3",children:w.title})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Filed:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J(w.created_at)})]}),w.assigned_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Assigned:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J(w.assigned_at)})]}),w.resolved_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J(w.resolved_at)})]}),w.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:J(w.updated_at)})]})]})})]})}),w.assigned_to_name&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx(si,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:w.assigned_to_name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:w.assigned_to_role}),w.assignment_notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 italic border-l-2 border-blue-500 pl-2",children:["Note: ",w.assignment_notes]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Description"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:w.description})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Update Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.status==="Resolved"&&e.jsx("button",{onClick:()=>we(w.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Verified & Close"}),w.status==="Resolved"&&e.jsx("button",{onClick:()=>Ve(w.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"Reopen - Issue Not Resolved"}),w.status==="Closed"&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:"This complaint is closed and cannot be reopened."})]})]}),ae&&le&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Rate Your Experience"}),e.jsx("button",{onClick:()=>{Y(!1),de({rating:0,feedback:""}),q("")},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:le.complaint_number})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:le.title})]})}),e.jsxs("form",{onSubmit:Le,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"How would you rate the service? *"}),e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(Ne=>e.jsx("button",{type:"button",onClick:()=>{de(Ie=>({...Ie,rating:Ne})),G&&q("")},className:`text-3xl ${Ne<=ue.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`,children:""},Ne))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("span",{children:"Poor"}),e.jsx("span",{children:"Excellent"})]}),G&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:G})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:ue.feedback,onChange:Ne=>de(Ie=>({...Ie,feedback:Ne.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about your experience..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{Y(!1),de({rating:0,feedback:""}),q("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Skip"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Rating"})]})]})]})})}),xe&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-purple-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(iE,{size:24,className:"text-yellow-300"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold",children:"Rate Your Experience"}),e.jsxs("p",{className:"text-sm mt-1",children:["Please rate the service for complaint ",le?.complaint_number]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{Y(!0),Ce(!1)},className:"px-3 py-1 bg-white text-purple-600 rounded text-sm font-medium hover:bg-gray-100 transition-colors",children:"Rate Now"}),e.jsx("button",{onClick:()=>Ce(!1),className:"px-3 py-1 bg-transparent border border-white rounded text-sm hover:bg-purple-700 transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>Ce(!1),className:"ml-4 text-white hover:text-gray-200",children:""})]})}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})})]})})}),e.jsx(or,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function xA(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),[f,h]=C.useState([]),[b,p]=C.useState([]),[w,j]=C.useState(!0),[E,_]=C.useState(""),[T,A]=C.useState({status:"all",apartment_id:"all",category_id:"all"}),[I,O]=C.useState(!1),[M,D]=C.useState(null),[B,H]=C.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:z}=C.useContext(zr),[L,P]=C.useState([]),[U,Z]=C.useState([]),[ae,Y]=C.useState(null),[ue,de]=C.useState(!1);C.useEffect(()=>{const J=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",J),()=>window.removeEventListener("resize",J)},[]);const G=async()=>{try{const J=await Ae.get("/apartments");J.data.success&&Z(J.data.data||[])}catch(J){console.error("Error loading apartments:",J),ie.error("Failed to load apartments")}},q=async()=>{try{const J=await Ae.get("/categories");J.data.success&&Array.isArray(J.data.data)?P(J.data.data):(console.warn("Unexpected categories response format:",J.data),P([]))}catch(J){console.error("Failed to load service categories:",J),ie.error("Failed to load service categories. Please try again.")}},xe=async()=>{try{j(!0);const J=await Ae.get("/complaints",{headers:{Authorization:`Bearer ${z.accessToken}`},params:{status:T.status!=="all"?T.status:void 0,apartment_id:T.apartment_id!=="all"?T.apartment_id:void 0,category_id:T.category_id!=="all"?T.category_id:void 0}});if(J.data.success){const Ne=J.data.data||[];h(Ne),p(Ne),Ce(Ne)}}catch(J){console.error("Failed to fetch complaints:",J),ie.error("Failed to load complaints")}finally{j(!1)}};C.useEffect(()=>{z.accessToken&&(G(),q(),xe())},[z.accessToken]),C.useEffect(()=>{z.accessToken&&xe()},[T]),C.useEffect(()=>{if(!f.length){p([]);return}let J=[...f];if(E){const Ne=E.toLowerCase();J=J.filter(Ie=>Ie.complaint_number?.toLowerCase().includes(Ne)||Ie.title?.toLowerCase().includes(Ne)||Ie.houseowner_name&&Ie.houseowner_name.toLowerCase().includes(Ne)||Ie.apartment_name&&Ie.apartment_name.toLowerCase().includes(Ne))}p(J)},[f,E]);const Ce=J=>{const Ne=J.length,Ie=J.filter(_e=>_e.status==="Pending").length,ke=J.filter(_e=>_e.status==="In Progress").length,Qe=J.filter(_e=>_e.status==="Resolved"||_e.status==="Closed").length;H({total:Ne,pending:Ie,in_progress:ke,resolved:Qe})},le=J=>{switch(J){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},oe=J=>{if(!J)return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";const Ne=L.find(ke=>ke.id===J.category_id);switch(((Ne?Ne.name:J.name||"General")||"").toLowerCase()){case"water":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"electricity":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"gas":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"plumbing":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300";case"carpentry":return"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300";case"general":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},re=J=>{if(!J)return"General";if(J.category_id){const Ie=L.find(ke=>ke.id===J.category_id);return Ie?Ie.name:"General"}const Ne=L.find(Ie=>Ie.name===J);return Ne?Ne.name:J||"General"},Q=J=>{if(!J)return"N/A";try{return new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},X=J=>{if(!J)return"N/A";try{return new Date(J).toLocaleDateString("en-US",{month:"short",day:"numeric"})}catch{return"N/A"}},se=(J,Ne)=>{if(!J||!Ne)return"N/A";try{const Ie=new Date(J),Qe=(Ne==="now"?new Date:new Date(Ne))-Ie,_e=Math.floor(Qe/(1e3*60*60*24)),ut=Math.floor(Qe%(1e3*60*60*24)/(1e3*60*60)),pe=Math.floor(Qe%(1e3*60*60)/(1e3*60));return _e>0?`${_e}d ${ut}h`:ut>0?`${ut}h ${pe}m`:pe>0?`${pe}m`:"Just now"}catch{return"N/A"}},ne=J=>{if(!J||J===0)return"N/A";const Ne=Math.floor(J/3600),Ie=Math.floor(J%3600/60);return Ne>0?`${Ne}h ${Ie}m`:`${Ie}m`},K=()=>{_(""),A({status:"all",apartment_id:"all",category_id:"all"})},Se=J=>{D(M===J?null:J)},we=J=>{Y(J),de(!0)},Ve=async()=>{try{if(!ae)return;await Ae.delete(`/complaints/${ae.id}`),ie.success("Complaint deleted successfully"),de(!1),Y(null),xe()}catch(J){console.error("Delete complaint error:",J),ie.error("Failed to delete complaint. Please try again.")}},Le=()=>{de(!1),Y(null)},ot=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dl,{size:24})});return w&&!f.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900",children:[e.jsx(ot,{}),e.jsx(hr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>i(!0)}),e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(ot,{}),e.jsx(hr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(na,{size:l?28:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"All Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage all complaints"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 md:gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg md:text-2xl font-bold text-gray-800 dark:text-white mt-1",children:B.total})]}),e.jsx("div",{className:"p-1.5 md:p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(wr,{size:l?16:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-lg md:text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:B.pending})]}),e.jsx("div",{className:"p-1.5 md:p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Tn,{size:l?16:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-lg md:text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:B.in_progress})]}),e.jsx("div",{className:"p-1.5 md:p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(qu,{size:l?16:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-lg md:text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:B.resolved})]}),e.jsx("div",{className:"p-1.5 md:p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(_s,{size:l?16:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter & Search Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ld,{size:l?16:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[b.length," of ",f.length]})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(As,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:l?16:20}),e.jsx("input",{type:"text",value:E,onChange:J=>_(J.target.value),placeholder:"Search complaints...",className:"w-full pl-10 pr-4 py-2 text-sm md:text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),l&&e.jsxs("button",{onClick:()=>O(!I),className:"w-full flex items-center justify-between px-3 py-2 mb-3 bg-gray-100 dark:bg-gray-700 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Filters ",I?e.jsx(Cl,{size:16,className:"inline ml-1"}):e.jsx(ai,{size:16,className:"inline ml-1"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:T.status!=="all"||T.apartment_id!=="all"||T.category_id!=="all"?"Active":"None"})]}),e.jsxs("div",{className:`${l&&!I?"hidden":"block"}`,children:[e.jsxs("div",{className:"space-y-3 md:space-y-0 md:grid md:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Status"}),e.jsxs("select",{value:T.status,onChange:J=>A(Ne=>({...Ne,status:J.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsxs("select",{value:T.apartment_id,onChange:J=>A(Ne=>({...Ne,apartment_id:J.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Apartments"}),U.map(J=>e.jsx("option",{value:J.id,children:J.name},J.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:T.category_id,onChange:J=>A(Ne=>({...Ne,category_id:J.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),L.map(J=>e.jsx("option",{value:J.id,children:J.name},J.id))]})]})]}),e.jsx("div",{className:"mt-4 md:mt-3",children:e.jsx("button",{onClick:K,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm md:text-base",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:b.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(na,{size:l?32:48,className:"mx-auto text-gray-400 mb-3 md:mb-4"}),e.jsx("h3",{className:"text-base md:text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:f.length===0?"No complaints have been filed yet.":"No complaints match your filter criteria."})]}):l?e.jsx("div",{className:"space-y-3 p-3",children:b.map(J=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",onClick:()=>Se(J.id),children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:J.complaint_number}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${le(J.status)}`,children:J.status})]}),e.jsx("h4",{className:"text-sm font-semibold text-gray-800 dark:text-white mb-1 line-clamp-1",children:J.title}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mb-2",children:[e.jsx(xa,{size:12,className:"mr-1"}),e.jsx("span",{className:"truncate",children:J.apartment_name||"N/A"})]})]}),e.jsx("div",{className:"ml-2",children:M===J.id?e.jsx(Cl,{size:16,className:"text-gray-400"}):e.jsx(ai,{size:16,className:"text-gray-400"})})]}),e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600 dark:text-gray-400 mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{size:12,className:"mr-1"}),e.jsx("span",{className:"truncate",children:J.houseowner_name||"Unknown"})]}),e.jsx("div",{className:"text-right",children:e.jsx("span",{children:X(J.created_at)})})]}),e.jsx("div",{className:"mb-2",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${oe(J)}`,children:re(J)})}),M===J.id&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-gray-600 space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 line-clamp-3",children:J.description||"No description provided"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:J.floor_number||"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300",children:"House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:J.house_number||"N/A"})]})]}),e.jsxs("div",{className:"space-y-1 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Created:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Q(J.created_at)})]}),J.resolved_at&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Resolved:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:Q(J.resolved_at)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Duration:"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:J.resolved_at?se(J.created_at,J.resolved_at):se(J.created_at,"now")})]}),J.total_work_time>0&&e.jsxs("div",{className:"flex justify-between items-center text-green-600 dark:text-green-400",children:[e.jsx("span",{children:"Work Time:"}),e.jsxs("span",{className:"flex items-center",children:[e.jsx(_m,{size:12,className:"mr-1"}),ne(J.total_work_time)]})]})]})]})]},J.id))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto min-w-[800px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Timeline & Rating"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:b.map(J=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:J.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:J.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:J.description}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${oe(J)}`,children:re(J)})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["By: ",J.houseowner_name||"Unknown"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",Q(J.created_at)]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:J.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",J.floor_number,"  House ",J.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${le(J.status)}`,children:J.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[J.resolved_at?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[e.jsx(H6,{size:14,className:"mr-1"}),"Resolved: ",Q(J.resolved_at)]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Duration: ",se(J.created_at,J.resolved_at)]})]}):e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Open for: ",se(J.created_at,"now")]}),J.total_work_time>0&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center",children:[e.jsx(_m,{size:12,className:"mr-1"}),"Work Time: ",ne(J.total_work_time)]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),we(J)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(Er,{size:18})})})]},J.id))})]})})})]})})]}),ue&&ae&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',ae.title,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Le,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ve,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function hA(){const[t,a]=C.useState([]),[r,i]=C.useState([]),[l,d]=C.useState(!0),[f,h]=C.useState(""),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState({status:"all"}),[T,A]=C.useState({total:0,pending:0,in_progress:0,resolved:0}),[I,O]=C.useState({}),{auth:M}=C.useContext(zr),D=gr(),[B,H]=C.useState([]),[z,L]=C.useState([]),[P,U]=C.useState(!1),[Z,ae]=C.useState("pending"),Y=async()=>{try{const X=await Ae.get(`/user-apartments/users/${M.user.id}/apartments`);X.data.success?H(X.data.data||[]):(ie.error("Failed to load apartments"),H([]))}catch(X){console.error("Error fetching apartments:",X),ie.error("Error loading your apartments"),H([])}},ue=async()=>{try{U(!0);const X=await Ae.get(`/technician-categories/technicians/${M.user.id}/categories`,{headers:{Authorization:`Bearer ${M.accessToken}`}});X.data.success?L(X.data.data||[]):(console.error("Failed to load assigned categories:",X.data.message),L([]))}catch(X){console.error("Error fetching assigned categories:",X),L([])}finally{U(!1)}},de=async()=>{try{d(!0);const X=await Ae.get("/complaints/my-complaints/technician",{headers:{Authorization:`Bearer ${M.accessToken}`},params:E});if(X.data.success){const se=X.data.data||[];a(se),i(se),X.data.statistics&&A(X.data.statistics)}else console.error("Failed to load complaints:",X.data.message),a([]),i([])}catch(X){console.error("Error fetching complaints:",X),a([]),i([])}finally{d(!1)}};C.useEffect(()=>{M?.user?.id&&(async()=>(await Promise.all([Y(),ue()]),M?.accessToken&&de()))()},[M?.user?.id]);const G=async X=>{try{D(`/my-work/${X.id}`,{state:{complaint:X}})}catch(se){console.error("Error navigating to my work:",se),ie.error("Failed to start work")}};C.useEffect(()=>{M?.accessToken&&B.length>0&&de()},[M?.accessToken,B,E]),C.useEffect(()=>{if(!t.length){i([]);return}let X=t.filter(se=>se.complaint_number?.toLowerCase().includes(f.toLowerCase())||se.title?.toLowerCase().includes(f.toLowerCase())||se.description?.toLowerCase().includes(f.toLowerCase())||se.houseowner_name?.toLowerCase().includes(f.toLowerCase())||se.apartment_name?.toLowerCase().includes(f.toLowerCase()));i(X)},[t,f]);const q=X=>{try{return new Date(X).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},xe=X=>{switch(X){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},Ce=X=>{if(!X.category_name&&!X.category_id)return null;const se=z.find(ne=>ne.category_id===X.category_id);return se?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${se.category_color}20`,color:se.category_color},children:X.category_name||"Uncategorized"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:X.category_name||"Uncategorized"})},le=(X,se)=>{_(ne=>({...ne,[X]:se}))},oe=()=>{_({status:"all"}),h("")},re=X=>X.status==="Resolved"||X.status==="Closed"?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"})}):X.status==="Pending"||X.status==="In Progress"||X.is_on_hold?e.jsxs("button",{onClick:()=>G(X),className:"flex items-center justify-center gap-1 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors w-full",title:X.is_on_hold?"Resume from Hold":"Start Work",children:[e.jsx(Pv,{size:16}),e.jsx("span",{children:X.is_on_hold?"Resume Work":"Start Work"})]}):null,Q=()=>P?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Loading your assigned categories..."})]}):B.length===0&&z.length===0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(na,{className:"text-yellow-600 dark:text-yellow-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No assignments found"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:"You need to be assigned to apartments and categories to see complaints."})]})]})}):e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:["Assigned Categories: ",z.length]})}),z.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[z.slice(0,3).map(X=>e.jsx("span",{className:"px-4 py-2 text-xs rounded-full font-medium bg-gray-400 dark:bg-gray-300",style:{color:X.category_color},children:X.category_name},X.category_id)),z.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400",children:["+",z.length-3," more"]})]})]});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(hr,{onCollapse:p})}),w&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>j(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${w?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(hr,{onCollapse:p})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>j(!0)}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(na,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Complaints assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:T.total})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(na,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View complaints from your assigned apartments and categories"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6",children:Q()}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(As,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints by number, title, or house owner...",value:f,onChange:X=>h(X.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{children:e.jsxs("select",{value:E.status,onChange:X=>le("status",X.target.value),className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.length," of ",t.length," complaints"]}),(E.status!=="all"||f)&&e.jsx("button",{onClick:oe,className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:"Clear filters"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(na,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:f?"No matching complaints found":"No complaints available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:f?"Try adjusting your search terms":B.length===0?"You are not assigned to any apartments":z.length===0?"You are not assigned to any complaint categories":"No complaints match your assigned apartments and categories"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:r.map(X=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(na,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base",children:X.complaint_number}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 truncate",children:X.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${xe(X.status)}`,children:[X.status,X.is_on_hold&&" (On Hold)"]}),Ce(X)]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(xa,{size:14,className:"mr-2"}),e.jsx("span",{className:"truncate",children:X.apartment_name||"Unknown"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(El,{size:14,className:"mr-2"}),e.jsxs("span",{children:["Floor ",X.floor_number,"  House ",X.house_number]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(Qa,{size:14,className:"mr-2"}),e.jsxs("span",{className:"truncate",children:["House Owner: ",X.houseowner_name||"Unknown"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:X.description})}),e.jsx("div",{className:"mb-4",children:re(X)}),e.jsx("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",q(X.created_at)]}),X.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",q(X.assigned_at)]})]})})]},X.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Hold Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(X=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:X.complaint_number}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mt-1",children:X.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:X.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["House Owner: ",X.houseowner_name||"Unknown"]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:X.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",X.floor_number,"  House ",X.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:Ce(X)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${xe(X.status)}`,children:X.status}),X.is_on_hold&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"On Hold"})})]}),e.jsx("td",{className:"px-4 py-4",children:re(X)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q(X.created_at)}),X.assigned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",q(X.assigned_at)]})]})]},X.id))})]})})]})}),r.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(As,{size:20})})})]})})]})]})}function mA(){const[t,a]=C.useState(!1),[r,i]=C.useState(null),[l,d]=C.useState(!0),[f,h]=C.useState(!1),[b,p]=C.useState({name:"",country:"",mobile:"",nic:"",occupation:""}),{auth:w}=C.useContext(zr);C.useEffect(()=>{j()},[]);const j=async()=>{try{d(!0);const M=await Ae.get("/auth/me");if(M.data.success&&M.data.data&&M.data.data.length>0){const D=M.data.data[0];i(D),p({name:D.name||`${D.firstname||""} ${D.lastname||""}`.trim(),country:D.country||"",mobile:D.mobile||"",nic:D.nic||"",occupation:D.occupation||""})}else ie.error("No profile data found")}catch(M){console.error("Error fetching house owner profile:",M),ie.error("Failed to load profile")}finally{d(!1)}},E=()=>{h(!0)},_=()=>{h(!1),r&&p({name:r.name||`${r.firstname||""} ${r.lastname||""}`.trim(),country:r.country||"",mobile:r.mobile||"",nic:r.nic||"",occupation:r.occupation||""})},T=async()=>{try{console.log("Updating house owner profile:",b);const M=await Ae.put(`/auth/users/${r.id}`,b);M.data.success?(i(D=>({...D,...M.data.data,name:b.name})),h(!1),ie.success("Profile updated successfully"),j()):ie.error(M.data.message||"Failed to update profile")}catch(M){console.error("Error updating house owner profile:",M),ie.error(M.response?.data?.message||"Failed to update profile")}},A=M=>{const{name:D,value:B}=M.target;p(H=>({...H,[D]:B}))},I=M=>{if(!M)return"Not available";try{return new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!r)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Qa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"}),e.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]})});const O=()=>{if(r.name){const M=r.name.split(" ");return M.length>=2?(M[0].charAt(0)+M[1].charAt(0)).toUpperCase():r.name.charAt(0).toUpperCase()}return r.firstname?.charAt(0)?.toUpperCase()||"H"};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(Bi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Li,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Qa,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"My Profile"}),e.jsx("span",{className:"ml-3 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded-full",children:"House Owner"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:_,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(yr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:T,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(yf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save Changes"})]})]}):e.jsxs("button",{onClick:E,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(Na,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsx("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:O()})}),e.jsx("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:"House Owner"}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Fi,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",I(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]})]}),(r.apartment_name||r.house_number||r.floor_number)&&e.jsxs("div",{className:"mt-4 md:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 mb-2 md:mb-3 flex items-center",children:[e.jsx(qr,{size:16,className:"md:size-4 mr-2"}),"Property Information"]}),e.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[r.apartment_name&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ii,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Apartment: ",r.apartment_name]})]}),r.house_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(qr,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["House No: ",r.house_number]})]}),r.floor_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ii,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["Floor: ",r.floor_number]})]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Qa,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Full Name"]}),f?e.jsx("input",{type:"text",name:"name",value:b.name,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(wr,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"NIC Number"]}),f?e.jsx("input",{type:"text",name:"nic",value:b.nic,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter NIC number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.nic||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Vu,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Occupation"]}),f?e.jsx("input",{type:"text",name:"occupation",value:b.occupation,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your occupation"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.occupation||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(El,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your country"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Cc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter mobile number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(uo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email Address"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(fo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Account Type"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:"House Owner"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6 mt-4 md:mt-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Verification Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Account Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:I(r.created_at)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Profile Update"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:r.updated_at?I(r.updated_at):"Not updated yet"})]})]})]})]})]})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function gA({complaint:t,onClose:a,onHoldSuccess:r}){const[i,l]=C.useState(""),[d,f]=C.useState(""),[h,b]=C.useState(!1),[p,w]=C.useState(""),{auth:j}=C.useContext(zr),E=["Waiting for parts/equipment","Need specialist assistance","Material shortage","Weather conditions","Safety concerns","Access issues","Waiting for approval","Other"],_=async I=>{if(I.preventDefault(),!i.trim()){ie.error("Please provide a reason for placing the complaint on hold");return}try{b(!0);const O=await Ae.post(`/complaints/${t.id}/hold`,{reason:i,expected_resolution_date:d||null},{headers:{Authorization:`Bearer ${j.accessToken}`}});O.data.success?(ie.success("Complaint placed on hold successfully"),r(),a()):ie.error(O.data.message||"Failed to place complaint on hold")}catch(O){console.error("Error holding complaint:",O),ie.error(O.response?.data?.message||"Failed to place complaint on hold")}finally{b(!1)}},T=I=>{w(I),l(I==="Other"?"":I)},A=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg mr-3",children:e.jsx(na,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Hold Complaint"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(yr,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:t.complaint_number})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"mb-6 ",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Common Reasons"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:E.map(I=>e.jsx("button",{type:"button",onClick:()=>T(I),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${p===I?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900 dark:text-purple-300 dark:border-purple-700":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,children:I},I))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hold Reason Details"}),e.jsx("textarea",{value:i,onChange:I=>{l(I.target.value),I.target.value!==p&&w("")},rows:"4",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Describe why you need to hold this complaint...",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Resolution Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Fi,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",value:d,onChange:I=>f(I.target.value),min:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"When do you expect to resume work on this complaint?"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{size:18,className:"text-yellow-600 dark:text-yellow-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," The complaint timer will be paused while on hold. You will need to resume the complaint before completing the work."]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!i.trim(),className:"px-4 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(na,{size:18}),"Place on Hold"]})})]})]})]})]})})}function uw(){const{complaintId:t}=pn(),a=Fn(),[r,i]=C.useState(a.state?.complaint||null),[l,d]=C.useState(!1),[f,h]=C.useState(null),[b,p]=C.useState(!1),[w,j]=C.useState(!1),[E,_]=C.useState(""),[T,A]=C.useState(null),[I,O]=C.useState(""),[M,D]=C.useState(!1),[B,H]=C.useState(0),[z,L]=C.useState("environment"),P=C.useRef(null),U=C.useRef(null),Z=gr(),{auth:ae}=C.useContext(zr),Y=C.useRef(null),[ue,de]=C.useState(!1),[G,q]=C.useState(!1),[xe,Ce]=C.useState(!1),[le,oe]=C.useState(!1),[re,Q]=C.useState(null),[X,se]=C.useState(!1);C.useEffect(()=>{const Ge=async()=>{if(!r&&t)try{p(!0);const ze=await Ae.get(`/complaints/${t}`,{headers:{Authorization:`Bearer ${ae.accessToken}`}});ze.data.success?i(ze.data.data):(ie.error("Failed to load complaint details"),Z("/my-complaints"))}catch(ze){console.error("Error fetching complaint:",ze),ie.error("Error loading complaint information"),Z("/my-complaints")}finally{p(!1)}};ae?.accessToken&&t&&Ge()},[t,ae?.accessToken,r,Z]);const ne=async Ge=>{try{if(!Ge)return{access:!1,reason:"Invalid house ID"};const ze=await Ae.get(`/houses/${Ge}`);if(!ze.data.success||!ze.data.data)return{access:!1,reason:"House not found in the system"};const Pe=ze.data.data;if(r&&r.house_id!==Pe.id)return{access:!1,reason:`This house (${Pe.house_id}) does not match the complaint's house (House ${r.house_number})`};let Oe=null;if(Pe.apartment_id)try{const St=await Ae.get(`/apartments/${Pe.apartment_id}`);St.data.success&&(Oe=St.data.data)}catch(St){console.error("Error fetching apartment:",St)}let nt=null;if(Pe.floor_id)try{const St=await Ae.get(`/floors/${Pe.floor_id}`);St.data.success&&(nt=St.data.data)}catch(St){console.error("Error fetching floor:",St)}const kt={...Pe,apartment:Oe,floor:nt};return A(kt),{access:!0,houseData:kt,apartmentId:Pe.apartment_id,floorId:Pe.floor_id,houseId:Pe.id}}catch(ze){if(console.error("Error checking house access:",ze),ze.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const Pe=ze.response?.status;return Pe===401?{access:!1,reason:"Session expired. Please login again."}:Pe===403?{access:!1,reason:"Access denied to this resource."}:Pe===404?{access:!1,reason:"House not found."}:Pe===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},K=async()=>{try{const Ge=await Ae.post(`/complaints/${t}/timer/start`,{},{headers:{Authorization:`Bearer ${ae.accessToken}`}});if(Ge.data.success){const ze=Ge.data.data;return D(!0),de(!0),H(ze.currentElapsedTime||0),Y.current&&clearInterval(Y.current),Y.current=setInterval(()=>{H(Pe=>Pe+1)},1e3),ie.success("Work started! Timer is now running."),i(Pe=>({...Pe,status:"In Progress",is_timer_running:!0,work_started_at:new Date().toISOString()})),!0}else return ie.error(Ge.data.message||"Failed to start timer"),!1}catch(Ge){return console.error("Error starting timer:",Ge),ie.error(Ge.response?.data?.message||"Failed to start timer"),!1}},Se=async()=>{try{const Ge=await Ae.post(`/complaints/${t}/timer/stop`,{},{headers:{Authorization:`Bearer ${ae.accessToken}`}});return Ge.data.success?(D(!1),de(!1),Y.current&&(clearInterval(Y.current),Y.current=null),Ge.data.data&&Ge.data.data.currentElapsedTime&&H(Ge.data.data.currentElapsedTime),ie.success("Work completed! Timer stopped."),i(ze=>({...ze,status:"Resolved",is_timer_running:!1,work_paused_at:new Date().toISOString()})),setTimeout(()=>{Z("/my-complaints")},3e3),!0):(ie.error(Ge.data.message||"Failed to stop timer"),!1)}catch(Ge){return console.error("Error stopping timer:",Ge),ie.error(Ge.response?.data?.message||"Failed to stop timer"),!1}},we=async()=>{try{const Ge=await Ae.post(`/complaints/${t}/timer/pause`,{},{headers:{Authorization:`Bearer ${ae.accessToken}`}});return Ge.data.success?(D(!1),Y.current&&(clearInterval(Y.current),Y.current=null),Ge.data.data&&Ge.data.data.currentElapsedTime&&H(Ge.data.data.currentElapsedTime),ie.success("Timer paused"),!0):(ie.error(Ge.data.message||"Failed to pause timer"),!1)}catch(Ge){return console.error("Error pausing timer:",Ge),ie.error(Ge.response?.data?.message||"Failed to pause timer"),!1}},Ve=async()=>{try{const Ge=await Ae.post(`/complaints/${t}/timer/resume`,{},{headers:{Authorization:`Bearer ${ae.accessToken}`}});return Ge.data.success?(D(!0),Y.current||(Y.current=setInterval(()=>{H(ze=>ze+1)},1e3)),ie.success("Timer resumed"),!0):(ie.error(Ge.data.message||"Failed to resume timer"),!1)}catch(Ge){return console.error("Error resuming timer:",Ge),ie.error(Ge.response?.data?.message||"Failed to resume timer"),!1}},Le=(Ge,ze)=>{if(!Ge||Ge.length===0)return null;const Pe=Oe=>(Oe||"").toLowerCase();if(ze==="environment"){const Oe=Ge.find(nt=>/back|rear|environment/.test(Pe(nt.label)));return Oe?Oe.id:Ge[Ge.length-1].id}else{const Oe=Ge.find(nt=>/front|user|face/.test(Pe(nt.label)));return Oe?Oe.id:Ge[0].id}},ot=async(Ge,ze)=>{const Pe=Ge||z;if(d(!0),h(null),j(!1),_(""),A(null),O(""),P.current){try{await P.current.stop()}catch{}try{P.current.clear()}catch{}P.current=null}const Oe=document.getElementById("qr-reader");Oe&&(Oe.innerHTML="");try{const nt=await hc.getCameras();let kt=ze||Le(nt,Pe)||nt[0]&&nt[0].id;const St=new hc("qr-reader");P.current=St;const Nr={fps:10,qrbox:{width:250,height:250}};await St.start({deviceId:{exact:kt}},Nr,tr=>{J(tr)},tr=>{}),U.current=kt,L(Pe)}catch(nt){console.error("Scanner initialization error:",nt),ie.error("Failed to initialize scanner. Please refresh and try again."),d(!1)}},J=async Ge=>{try{if(p(!0),P.current){try{await P.current.stop()}catch{}try{await P.current.clear()}catch{}P.current=null,U.current=null}d(!1),O("");const ze=Ge.trim();if(h({houseId:ze,source:"qr"}),re?.is_on_hold){const Pe=await ne(ze);Pe.access?(ie.success("Location verified! Ready to resume from hold."),j(!0)):(j(!1),_(Pe.reason||"Access denied"),ie.error(Pe.reason||"Access denied"))}else{const Pe=await ne(ze);if(Pe.access){j(!0),ie.success("Access granted! This is the correct house.");try{await K()&&(D(!0),de(!0),i(nt=>({...nt,status:"In Progress",is_timer_running:!0})))}catch(Oe){ie.error("Failed to start timer: "+Oe.message)}}else j(!1),_(Pe.reason||"Access denied"),ie.error(Pe.reason||"Access denied")}}catch(ze){console.error("Error processing QR code:",ze),ie.error(ze.message||"Invalid QR code. Please scan a valid house QR code."),d(!1)}finally{p(!1)}},Ne=async()=>{const Ge=z==="environment"?"user":"environment";try{const ze=await hc.getCameras();let Pe=Le(ze,Ge)||ze[0]&&ze[0].id;if(Pe&&U.current&&Pe===U.current&&ze.length>1){const Oe=ze.find(nt=>nt.id!==U.current);Oe&&(Pe=Oe.id)}if(P.current){try{await P.current.stop()}catch{}try{await P.current.clear()}catch{}P.current=null}L(Ge),l&&setTimeout(()=>ot(Ge,Pe),250)}catch(ze){console.error("Error toggling camera direction:",ze)}},Ie=Ge=>{const ze=Math.floor(Ge/3600),Pe=Math.floor(Ge%3600/60),Oe=Ge%60;return`${ze.toString().padStart(2,"0")}:${Pe.toString().padStart(2,"0")}:${Oe.toString().padStart(2,"0")}`},ke=async()=>{if(P.current){try{await P.current.stop()}catch{}try{await P.current.clear()}catch(Ge){console.log("Scanner clear error on reset:",Ge)}P.current=null,U.current=null}Y.current&&(clearInterval(Y.current),Y.current=null),d(!1),h(null),j(!1),_(""),A(null),O(""),D(!1),H(0),de(!1)};C.useEffect(()=>()=>{P.current&&((async()=>{try{await P.current.stop()}catch{}try{await P.current.clear()}catch(Ge){console.log("Scanner clear error on unmount:",Ge)}})(),U.current=null),Y.current&&clearInterval(Y.current)},[]),C.useEffect(()=>((async()=>{if(t&&ae?.accessToken)try{const ze=await Ae.get(`/complaints/${t}/timer/status`,{headers:{Authorization:`Bearer ${ae.accessToken}`}});if(ze.data.success&&ze.data.data){const Pe=ze.data.data;Pe.is_timer_running&&(D(!0),de(!0),H(Pe.currentElapsedTime||0),Y.current=setInterval(()=>{H(Oe=>Oe+1)},1e3))}}catch{console.log("No active timer found")}})(),()=>{Y.current&&clearInterval(Y.current)}),[t,ae?.accessToken]);const Qe=Ge=>{try{return new Date(Ge).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},_e=async()=>{try{se(!0);const Ge=await Ae.get(`/complaints/${t}/hold-status`,{headers:{Authorization:`Bearer ${ae.accessToken}`}});Ge.data.success&&Q(Ge.data.data)}catch(Ge){console.error("Error fetching hold status:",Ge)}finally{se(!1)}};C.useEffect(()=>{t&&ae?.accessToken&&_e()},[t,ae?.accessToken]);const ut=async()=>{try{p(!0);const Ge=await Ae.post(`/complaints/${t}/resume`,{},{headers:{Authorization:`Bearer ${ae.accessToken}`}});Ge.data.success?(ie.success("Complaint resumed from hold"),Q(null),D(!0),de(!0),i(ze=>({...ze,status:"In Progress",is_timer_running:!0,is_on_hold:!1})),Y.current&&clearInterval(Y.current),Y.current=setInterval(()=>{H(ze=>ze+1)},1e3)):ie.error(Ge.data.message||"Failed to resume complaint")}catch(Ge){console.error("Error resuming from hold:",Ge),ie.error(Ge.response?.data?.message||"Failed to resume complaint")}finally{p(!1)}},pe=()=>{_e(),D(!1),Y.current&&(clearInterval(Y.current),Y.current=null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(hr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Complaint: ",r.complaint_number]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.title})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${r.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r.status==="In Progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:r.status})}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Created: ",Qe(r.created_at)]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.description})]})]}),ue&&!re?.is_on_hold&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-800 rounded-lg mr-4",children:e.jsx(_m,{size:24,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Work In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-200 mt-2",children:Ie(B)}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Elapsed Time"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[M?e.jsx("button",{onClick:we,className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors min-w-[70px]",children:e.jsx(PC,{size:16})}):e.jsx("button",{onClick:Ve,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors min-w-[70px]",children:e.jsx(Pv,{size:16})}),e.jsx("button",{onClick:()=>oe(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors min-w-[70px]",children:e.jsx(na,{size:16})}),e.jsx("button",{onClick:Se,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors min-w-[70px]",children:e.jsx(rC,{size:16})})]})]})}),re?.is_on_hold&&!ue&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx(na,{size:24,className:"text-orange-600 dark:text-orange-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300",children:"Complaint On Hold"}),e.jsxs("p",{className:"text-orange-700 dark:text-orange-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",re.reason]}),re.expected_resolution_date&&e.jsxs("p",{className:"text-orange-700 dark:text-orange-400",children:[e.jsx("span",{className:"font-medium",children:"Expected Resolution:"})," ",new Date(re.expected_resolution_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"To resume work:"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"Verify your location (scan QR or enter House ID)"}),e.jsx("li",{children:'Click "Resume from Hold" button'}),e.jsx("li",{children:"The timer will resume from where it was paused"})]})]}),w?e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{size:20,className:"text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Location verified! You can now resume work."})]}),e.jsxs("button",{onClick:ut,className:"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",disabled:b,children:[e.jsx(eC,{size:20}),"Resume from Hold"]})]}):e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"Please verify your location first to resume work"})]}),l&&!ue&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Ne,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${z==="environment"?"Front":"Back"} Camera`,children:[e.jsx(zv,{size:16}),e.jsx("span",{children:"Switch Camera"})]}),e.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/40",children:[e.jsx(yr,{size:16}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 text-black dark:text-white"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Scanning ",z==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Scan the house QR code to verify location and start work"}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Ut,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processing..."})]}),f&&!b&&!l&&!ue&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Verification"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[f.source==="manual"?"Manual Entry":"QR Scan"," Result"]})]}),e.jsxs("button",{onClick:ke,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(yc,{size:16}),e.jsx("span",{children:"Try Again"})]})]}),w?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(mn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Location Verified "}),e.jsx("p",{className:"text-green-700 dark:text-green-400",children:"Timer has been started automatically"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center justify-center bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx(Tn,{size:24,className:"text-green-600 dark:text-green-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:"Running..."})]})]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:E}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsx("p",{children:"Requirements to start work:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House ID must match the complaint's house"}),e.jsx("li",{children:"House must exist in the system"}),e.jsx("li",{children:"You must be at the correct location"})]})]})]})]})})]}),!f&&!l&&!b&&!ue&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(qu,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Start Work"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Verify the house location to start working on this complaint"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"You must verify that you are at the correct house before starting work"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),e.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]})}),e.jsxs("div",{children:[e.jsx(U0,{size:48,className:"mx-auto text-purple-400 mb-4"}),e.jsxs("button",{onClick:ot,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Bv,{size:20}),"Scan House QR Code"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"QR scanning will automatically verify and start timer"})]})]})}),ue&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(qu,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Work Started Successfully"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are now working on complaint: ",e.jsx("strong",{children:r?.complaint_number})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Remember to stop the timer when you finish your work"}),e.jsx("p",{className:"mt-1",children:"The complaint will be marked as completed automatically"})]})]})})]})})]}),le&&r&&e.jsx(gA,{complaint:r,onClose:()=>oe(!1),onHoldSuccess:pe}),e.jsx(or,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function pA(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),l=gr(),d=()=>{l("/my-complaints")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(hr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>i(!1)}),e.jsx("div",{className:`
            lg:hidden fixed left-0 top-0 h-full z-50
            transform transition-transform duration-300 ease-in-out
            ${r?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(hr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(On,{size:16})}),e.jsx(rb,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"My Service"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(On,{size:16})}),e.jsx(rb,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Service Management"})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(uw,{})})]})})]})]})}function yA({onClose:t,onCreated:a}){const{auth:r}=C.useContext(zr),[i,l]=C.useState(!1),[d,f]=C.useState({}),[h,b]=C.useState({name:"",description:"",color:"Purple"}),p=[{name:"Purple",value:"#667eea",displayName:"Purple"},{name:"Blue",value:"#3b82f6",displayName:"Blue"},{name:"Green",value:"#10b981",displayName:"Green"},{name:"Yellow",value:"#f59e0b",displayName:"Yellow"},{name:"Red",value:"#ef4444",displayName:"Red"},{name:"Pink",value:"#ec4899",displayName:"Pink"},{name:"Indigo",value:"#6366f1",displayName:"Indigo"},{name:"Teal",value:"#14b8a6",displayName:"Teal"},{name:"Orange",value:"#f97316",displayName:"Orange"},{name:"Gray",value:"#6b7280",displayName:"Gray"}],w=B=>{const H=p.find(z=>z.name===B);return H?H.value:"#667eea"},j=B=>{const H=p.find(z=>z.name===B);return H?`${H.displayName} (${H.value})`:`Custom (${w(B)})`},E=B=>!p.some(H=>H.name===B),_=()=>E(h.color)?h.color.startsWith("#")?h.color:"#667eea":w(h.color),T=()=>{const B={};return h.name.trim()?h.name.trim().length<2?B.name="Category name must be at least 2 characters":h.name.trim().length>50&&(B.name="Category name cannot exceed 50 characters"):B.name="Category name is required",h.description&&h.description.length>500&&(B.description="Description cannot exceed 500 characters"),h.color||(B.color="Please select a color"),B},A=B=>{const{name:H,value:z}=B.target;b(L=>({...L,[H]:z})),d[H]&&f(L=>({...L,[H]:""}))},I=B=>{b(H=>({...H,color:B})),d.color&&f(H=>({...H,color:""}))},O=B=>{b(H=>({...H,color:B})),d.color&&f(H=>({...H,color:""}))},M=async B=>{B.preventDefault();const H=T();if(Object.keys(H).length>0){f(H);return}try{l(!0);const z={name:h.name.trim(),description:h.description.trim(),color:h.color},L=await Ae.post("/categories",z,{headers:{Authorization:`Bearer ${r.accessToken}`}});if(L.data.success)a&&a(),t();else throw new Error(L.data.message||"Failed to create category")}catch(z){console.error("Create category error:",z),z.response?.status===409?(f(L=>({...L,name:"A category with this name already exists"})),ie.error("A category with this name already exists")):z.response?.status===401?(ie.error("Session expired. Please login again."),t()):ie.error(z.response?.data?.message||"Failed to create service category")}finally{l(!1)}},D=()=>{b({name:"",description:"",color:"Purple"}),f({})};return e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:A,className:`w-full px-3 py-2 border  text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Plumbing, Electrical, Carpentry",disabled:i}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required. Will be used for complaint categorization."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:h.description,onChange:A,rows:3,className:`w-full px-3 py-2 text-gray-700 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.description?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Brief description of what this category includes...",disabled:i}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Optional. Helps technicians understand the category scope."}),e.jsxs("p",{className:`text-xs ${h.description.length>500?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[h.description.length,"/500"]})]}),d.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Color *"}),e.jsxs("div",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg mr-3 border-2 border-gray-300 dark:border-gray-600 flex-shrink-0",style:{backgroundColor:_()}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:E(h.color)?"Custom Color":h.color}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:e.jsx("span",{className:"truncate",children:j(h.color)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select from predefined colors:"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:p.map(B=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{type:"button",onClick:()=>I(B.name),className:`relative w-full aspect-square rounded-lg border-2 transition-all hover:scale-105 mb-1 ${h.color===B.name?"border-purple-500 dark:border-purple-400 scale-105 shadow-md":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,title:`${B.displayName} (${B.value})`,disabled:i,children:[e.jsx("div",{className:"w-full h-full rounded",style:{backgroundColor:B.value}}),h.color===B.name&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded",children:e.jsx(mn,{className:"text-white",size:14})})]}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center",children:B.name})]},B.name))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Custom Color"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Or create your own"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(BC,{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:18}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Color Picker"}),e.jsx("input",{type:"color",value:_(),onChange:B=>O(B.target.value),className:"w-full h-10 cursor-pointer rounded border border-gray-300 dark:border-gray-600",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Hex Code"}),e.jsx("input",{type:"text",value:_(),onChange:B=>O(B.target.value),className:"w-full px-3 py-2  text-gray-700 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-800 dark:text-white",placeholder:"#RRGGBB",pattern:"^#[0-9A-Fa-f]{6}$",disabled:i})]})]})]}),E(h.color)&&e.jsx("div",{className:"mt-3 p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:_()}}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Custom Color Selected"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:_()})]})})]}),d.color&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:d.color}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Color helps visually identify this category in lists and charts."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:D,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:"Reset Form"}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"flex items-center justify-center px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{className:"animate-spin mr-2",size:16}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mn,{className:"mr-2",size:16}),"Create Category"]})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Tips for creating categories:"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:'Use clear, descriptive names (e.g., "Electrical Repair" instead of "Electricity")'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Keep descriptions concise but informative"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Choose distinct colors for easy visual differentiation"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Categories can be assigned to technicians for specialization"})]})]})]})]})}function bA({onClose:t,onEdited:a,serviceCategory:r}){const{auth:i}=C.useContext(zr),[l,d]=C.useState(!1),[f,h]=C.useState(!1),[b,p]=C.useState({name:"",description:"",color:"#6b46c1"}),[w,j]=C.useState({}),[E,_]=C.useState(window.innerWidth<768);C.useEffect(()=>{const D=()=>{_(window.innerWidth<768)};return window.addEventListener("resize",D),()=>window.removeEventListener("resize",D)},[]),C.useEffect(()=>{r&&p({name:r.name||"",description:r.description||"",color:r.color||"#6b46c1"})},[r]);const T=()=>{const D={};return b.name.trim()?b.name.length>100&&(D.name="Name must be less than 100 characters"):D.name="Category name is required",b.description&&b.description.length>500&&(D.description="Description must be less than 500 characters"),b.color||(D.color="Color is required"),j(D),Object.keys(D).length===0},A=D=>{const{name:B,value:H}=D.target;p(z=>({...z,[B]:H})),w[B]&&j(z=>({...z,[B]:""}))},I=D=>{p(B=>({...B,color:D.target.value})),w.color&&j(B=>({...B,color:""}))},O=async D=>{if(D.preventDefault(),!!T()){h(!0);try{const B={name:b.name.trim(),color:b.color};b.description.trim()&&(B.description=b.description.trim());const H=await Ae.put(`/categories/${r.id}`,B);H.data.success?a():ie.error(H.data.message||"Failed to update category")}catch(B){if(console.error("Update category error:",B),B.response)switch(B.response.status){case 400:ie.error("Invalid data provided");break;case 401:ie.error("Session expired. Please login again.");break;case 403:ie.error("You do not have permission to update this category");break;case 404:ie.error("Category not found"),t();break;case 409:ie.error(B.response.data?.message||"Category with this name already exists");break;default:ie.error("Failed to update service category")}else B.request?ie.error("No response from server. Please check your connection."):ie.error("An error occurred while updating the category")}finally{h(!1)}}},M=[{value:"#6b46c1",label:"Purple",color:"bg-purple-500"},{value:"#4299e1",label:"Blue",color:"bg-blue-500"},{value:"#38a169",label:"Green",color:"bg-green-500"},{value:"#e53e3e",label:"Red",color:"bg-red-500"},{value:"#ed8936",label:"Orange",color:"bg-orange-500"},{value:"#d69e2e",label:"Yellow",color:"bg-yellow-500"},{value:"#4fd1c7",label:"Teal",color:"bg-teal-500"},{value:"#9f7aea",label:"Indigo",color:"bg-indigo-500"},{value:"#f687b3",label:"Pink",color:"bg-pink-500"}];return e.jsxs("form",{onSubmit:O,className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:b.name,onChange:A,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.name?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter category name",disabled:f,maxLength:100}),w.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.name}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:A,rows:E?3:4,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.description?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none`,placeholder:"Enter category description",disabled:f,maxLength:500}),w.description&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.description}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color *"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Quick select:"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-9 gap-2",children:M.map(D=>e.jsx("button",{type:"button",onClick:()=>{p(B=>({...B,color:D.value})),w.color&&j(B=>({...B,color:""}))},className:`relative w-8 h-8 rounded-full flex items-center justify-center ${D.color} border-2 ${b.color===D.value?"border-gray-800 dark:border-white":"border-transparent"} hover:border-gray-400 dark:hover:border-gray-300 transition-colors`,title:D.label,disabled:f,children:b.color===D.value&&e.jsx(mn,{size:14,className:"text-white"})},D.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Custom color:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300 dark:border-gray-600",style:{backgroundColor:b.color}}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",id:"color",name:"color",value:b.color,onChange:I,className:"w-full h-10 cursor-pointer",disabled:f})}),e.jsx("div",{className:"w-24",children:e.jsx("input",{type:"text",value:b.color,onChange:I,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#000000",disabled:f,maxLength:7})})]}),w.color&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.color})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Current Category Information:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.updated_at).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:`flex ${E?"flex-col space-y-3":"space-x-3"} pt-4 border-t border-gray-200 dark:border-gray-700`,children:[e.jsx("button",{type:"button",onClick:t,disabled:f,className:`flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${E?"":"order-2"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:`flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center justify-center ${f?"opacity-70 cursor-not-allowed":""} ${E?"":"order-1"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{size:18,className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(mn,{size:18,className:"mr-2"}),"Update Category"]})})]}),Object.keys(w).length>0&&e.jsxs("div",{className:"sr-only",role:"alert",children:["Form has ",Object.keys(w).length," error(s). Please fix them before submitting."]})]})}function vA(){const[t,a]=C.useState(!1),[r,i]=C.useState(!1),[l,d]=C.useState(window.innerWidth<768),{auth:f}=C.useContext(zr),h=gr(),[b,p]=C.useState(!1),[w,j]=C.useState([]),[E,_]=C.useState(null),[T,A]=C.useState(!1),[I,O]=C.useState(!1),[M,D]=C.useState(!1),[B,H]=C.useState(null),[z,L]=C.useState(!1),[P,U]=C.useState(null);C.useEffect(()=>{const re=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]);const Z=async()=>{try{p(!0),_(null);const re=await Ae.get("/categories");re.data.success&&Array.isArray(re.data.data)?j(re.data.data):Array.isArray(re.data)?j(re.data):(console.warn("Unexpected response format:",re.data),j([]))}catch(re){console.error("Failed to load service categories:",re),ie.error("Failed to load service categories. Please try again."),re.response?.status===401?(_("Unauthorized. Please login again."),h("/login")):re.response?.status===400?_("Company information missing. Please contact support."):_("Failed to load service categories. Please try again.")}finally{p(!1)}};C.useEffect(()=>{Z()},[]);const ae=()=>{O(!0)},Y=()=>{O(!1)},ue=()=>{Z(),O(!1),ie.success("Service category created successfully!")},de=re=>{H(re),D(!0)},G=()=>{D(!1),H(null)},q=()=>{Z(),D(!1),H(null),ie.success("Service category updated successfully!")},xe=re=>{U(re),L(!0)},Ce=async()=>{try{if(!P)return;await Ae.delete(`/categories/${P.id}`),ie.success("Category deleted successfully"),L(!1),U(null),Z()}catch(re){console.error("Delete category error:",re),ie.error("Failed to delete category. Please try again.")}},le=()=>{L(!1),U(null)},oe=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(Dl,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(oe,{}),e.jsx(hr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Mr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gu,{size:l?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Service Categories"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your service categories"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(qa,{size:l?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Ut,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading service categories..."})]}):E?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:E}),e.jsx("button",{onClick:Z,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx(en,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No service categories found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first service category"}),e.jsx("button",{onClick:ae,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Category"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Categories: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map(re=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:re.name}),re.description&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:re.description})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),de(re)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(Na,{size:16})}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),xe(re)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Er,{size:16})})]})]}),re.color&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:re.color}}),e.jsxs("span",{children:["Color: ",re.color]})]})]},re.id))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Service Categories"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," categories"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(re=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:re.name}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 dark:text-white max-w-[300px] truncate",children:re.description||"No description"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:re.color?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:re.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:re.color})]}):e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"No color"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),de(re)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(Na,{size:18})}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),xe(re)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(Er,{size:18})})]})})]},re.id))})]})]})})})]})})]}),I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Service Category"}),e.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(yA,{onClose:Y,onCreated:ue})]})})}),M&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Service Category"}),e.jsx("button",{onClick:G,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(bA,{onClose:G,onEdited:q,serviceCategory:B})]})})}),z&&P&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',P.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:le,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:Ce,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var fw=1252,wA=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],ag={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},sg=function(t){wA.indexOf(t)!=-1&&(fw=ag[0]=t)};function NA(){sg(1252)}var An=function(t){sg(t)};function xw(){An(1200),NA()}function Xb(t){for(var a=[],r=0,i=t.length;r<i;++r)a[r]=t.charCodeAt(r);return a}function kA(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return a.join("")}function hw(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return a.join("")}var j0=function(t){var a=t.charCodeAt(0),r=t.charCodeAt(1);return a==255&&r==254?kA(t.slice(2)):a==254&&r==255?hw(t.slice(2)):a==65279?t.slice(1):t},Cu=function(a){return String.fromCharCode(a)},qb=function(a){return String.fromCharCode(a)},G0,Nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function $b(t){for(var a="",r=0,i=0,l=0,d=0,f=0,h=0,b=0,p=0;p<t.length;)r=t.charCodeAt(p++),d=r>>2,i=t.charCodeAt(p++),f=(r&3)<<4|i>>4,l=t.charCodeAt(p++),h=(i&15)<<2|l>>6,b=l&63,isNaN(i)?h=b=64:isNaN(l)&&(b=64),a+=Nl.charAt(d)+Nl.charAt(f)+Nl.charAt(h)+Nl.charAt(b);return a}function rn(t){var a="",r=0,i=0,l=0,d=0,f=0,h=0,b=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var p=0;p<t.length;)d=Nl.indexOf(t.charAt(p++)),f=Nl.indexOf(t.charAt(p++)),r=d<<2|f>>4,a+=String.fromCharCode(r),h=Nl.indexOf(t.charAt(p++)),i=(f&15)<<4|h>>2,h!==64&&(a+=String.fromCharCode(i)),b=Nl.indexOf(t.charAt(p++)),l=(h&3)<<6|b,b!==64&&(a+=String.fromCharCode(l));return a}var mr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),vo=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(a,r){return r?new Buffer(a,r):new Buffer(a)}:Buffer.from.bind(Buffer)}return function(){}}();function Sl(t){return mr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Yb(t){return mr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var _n=function(a){return mr?vo(a,"binary"):a.split("").map(function(r){return r.charCodeAt(0)&255})};function wo(t){if(Array.isArray(t))return t.map(function(i){return String.fromCharCode(i)}).join("");for(var a=[],r=0;r<t.length;++r)a[r]=String.fromCharCode(t[r]);return a.join("")}function ng(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return ng(new Uint8Array(t));for(var a=new Array(t.length),r=0;r<t.length;++r)a[r]=t[r];return a}var wl=mr?function(t){return Buffer.concat(t.map(function(a){return Buffer.isBuffer(a)?a:vo(a)}))}:function(t){if(typeof Uint8Array<"u"){var a=0,r=0;for(a=0;a<t.length;++a)r+=t[a].length;var i=new Uint8Array(r),l=0;for(a=0,r=0;a<t.length;r+=l,++a)if(l=t[a].length,t[a]instanceof Uint8Array)i.set(t[a],r);else{if(typeof t[a]=="string")throw"wtf";i.set(new Uint8Array(t[a]),r)}return i}return[].concat.apply([],t.map(function(d){return Array.isArray(d)?d:[].slice.call(d)}))};function jA(t){for(var a=[],r=0,i=t.length+250,l=Sl(t.length+255),d=0;d<t.length;++d){var f=t.charCodeAt(d);if(f<128)l[r++]=f;else if(f<2048)l[r++]=192|f>>6&31,l[r++]=128|f&63;else if(f>=55296&&f<57344){f=(f&1023)+64;var h=t.charCodeAt(++d)&1023;l[r++]=240|f>>8&7,l[r++]=128|f>>2&63,l[r++]=128|h>>6&15|(f&3)<<4,l[r++]=128|h&63}else l[r++]=224|f>>12&15,l[r++]=128|f>>6&63,l[r++]=128|f&63;r>i&&(a.push(l.slice(0,r)),r=0,l=Sl(65535),i=65530)}return a.push(l.slice(0,r)),wl(a)}var Es=/\u0000/g,C0=/[\u0001-\u0006]/g;function mc(t){for(var a="",r=t.length-1;r>=0;)a+=t.charAt(r--);return a}function Sn(t,a){var r=""+t;return r.length>=a?r:fa("0",a-r.length)+r}function ig(t,a){var r=""+t;return r.length>=a?r:fa(" ",a-r.length)+r}function Ku(t,a){var r=""+t;return r.length>=a?r:r+fa(" ",a-r.length)}function CA(t,a){var r=""+Math.round(t);return r.length>=a?r:fa("0",a-r.length)+r}function EA(t,a){var r=""+t;return r.length>=a?r:fa("0",a-r.length)+r}var Wb=Math.pow(2,32);function dc(t,a){if(t>Wb||t<-Wb)return CA(t,a);var r=Math.round(t);return EA(r,a)}function Zu(t,a){return a=a||0,t.length>=7+a&&(t.charCodeAt(a)|32)===103&&(t.charCodeAt(a+1)|32)===101&&(t.charCodeAt(a+2)|32)===110&&(t.charCodeAt(a+3)|32)===101&&(t.charCodeAt(a+4)|32)===114&&(t.charCodeAt(a+5)|32)===97&&(t.charCodeAt(a+6)|32)===108}var Kb=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],tm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function _A(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var rr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Zb={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},AA={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Qu(t,a,r){for(var i=t<0?-1:1,l=t*i,d=0,f=1,h=0,b=1,p=0,w=0,j=Math.floor(l);p<a&&(j=Math.floor(l),h=j*f+d,w=j*p+b,!(l-j<5e-8));)l=1/(l-j),d=f,f=h,b=p,p=w;if(w>a&&(p>a?(w=b,h=d):(w=p,h=f)),!r)return[0,i*h,w];var E=Math.floor(i*h/w);return[E,i*h-E*w,w]}function so(t,a,r){if(t>2958465||t<0)return null;var i=t|0,l=Math.floor(86400*(t-i)),d=0,f=[],h={D:i,T:l,u:86400*(t-i)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),a&&a.date1904&&(i+=1462),h.u>.9999&&(h.u=0,++l==86400&&(h.T=l=0,++i,++h.D)),i===60)f=r?[1317,10,29]:[1900,2,29],d=3;else if(i===0)f=r?[1317,8,29]:[1900,1,0],d=6;else{i>60&&--i;var b=new Date(1900,0,1);b.setDate(b.getDate()+i-1),f=[b.getFullYear(),b.getMonth()+1,b.getDate()],d=b.getDay(),i<60&&(d=(d+6)%7),r&&(d=IA(b,f))}return h.y=f[0],h.m=f[1],h.d=f[2],h.S=l%60,l=Math.floor(l/60),h.M=l%60,l=Math.floor(l/60),h.H=l,h.q=d,h}var mw=new Date(1899,11,31,0,0,0),SA=mw.getTime(),TA=new Date(1900,2,1,0,0,0);function gw(t,a){var r=t.getTime();return a?r-=1461*24*60*60*1e3:t>=TA&&(r+=1440*60*1e3),(r-(SA+(t.getTimezoneOffset()-mw.getTimezoneOffset())*6e4))/(1440*60*1e3)}function lg(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function DA(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function RA(t){var a=t<0?12:11,r=lg(t.toFixed(12));return r.length<=a||(r=t.toPrecision(10),r.length<=a)?r:t.toExponential(5)}function OA(t){var a=lg(t.toFixed(11));return a.length>(t<0?12:11)||a==="0"||a==="-0"?t.toPrecision(6):a}function X0(t){var a=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return a>=-4&&a<=-1?r=t.toPrecision(10+a):Math.abs(a)<=9?r=RA(t):a===10?r=t.toFixed(10).substr(0,12):r=OA(t),lg(DA(r.toUpperCase()))}function ho(t,a){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):X0(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return gn(14,gw(t,a&&a.date1904),a)}throw new Error("unsupported value in General format: "+t)}function IA(t,a){a[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function FA(t,a,r,i){var l="",d=0,f=0,h=r.y,b,p=0;switch(t){case 98:h=r.y+543;case 121:switch(a.length){case 1:case 2:b=h%100,p=2;break;default:b=h%1e4,p=4;break}break;case 109:switch(a.length){case 1:case 2:b=r.m,p=a.length;break;case 3:return tm[r.m-1][1];case 5:return tm[r.m-1][0];default:return tm[r.m-1][2]}break;case 100:switch(a.length){case 1:case 2:b=r.d,p=a.length;break;case 3:return Kb[r.q][0];default:return Kb[r.q][1]}break;case 104:switch(a.length){case 1:case 2:b=1+(r.H+11)%12,p=a.length;break;default:throw"bad hour format: "+a}break;case 72:switch(a.length){case 1:case 2:b=r.H,p=a.length;break;default:throw"bad hour format: "+a}break;case 77:switch(a.length){case 1:case 2:b=r.M,p=a.length;break;default:throw"bad minute format: "+a}break;case 115:if(a!="s"&&a!="ss"&&a!=".0"&&a!=".00"&&a!=".000")throw"bad second format: "+a;return r.u===0&&(a=="s"||a=="ss")?Sn(r.S,a.length):(i>=2?f=i===3?1e3:100:f=i===1?10:1,d=Math.round(f*(r.S+r.u)),d>=60*f&&(d=0),a==="s"?d===0?"0":""+d/f:(l=Sn(d,2+i),a==="ss"?l.substr(0,2):"."+l.substr(2,a.length-1)));case 90:switch(a){case"[h]":case"[hh]":b=r.D*24+r.H;break;case"[m]":case"[mm]":b=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":b=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+a}p=a.length===3?1:2;break;case 101:b=h,p=1;break}var w=p>0?Sn(b,p):"";return w}function kl(t){var a=3;if(t.length<=a)return t;for(var r=t.length%a,i=t.substr(0,r);r!=t.length;r+=a)i+=(i.length>0?",":"")+t.substr(r,a);return i}var pw=/%/g;function MA(t,a,r){var i=a.replace(pw,""),l=a.length-i.length;return Di(t,i,r*Math.pow(10,2*l))+fa("%",l)}function BA(t,a,r){for(var i=a.length-1;a.charCodeAt(i-1)===44;)--i;return Di(t,a.substr(0,i),r/Math.pow(10,3*(a.length-i)))}function yw(t,a){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+yw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(i+1+(l+d)%l),r.indexOf("e")===-1){var f=Math.floor(Math.log(a)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,l)+"."+r.substr(2+l),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,p,w){return b+p+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var bw=/# (\?+)( ?)\/( ?)(\d+)/;function LA(t,a,r){var i=parseInt(t[4],10),l=Math.round(a*i),d=Math.floor(l/i),f=l-d*i,h=i;return r+(d===0?"":""+d)+" "+(f===0?fa(" ",t[1].length+1+t[4].length):ig(f,t[1].length)+t[2]+"/"+t[3]+Sn(h,t[4].length))}function PA(t,a,r){return r+(a===0?"":""+a)+fa(" ",t[1].length+2+t[4].length)}var vw=/^#*0*\.([0#]+)/,ww=/\).*[0#]/,Nw=/\(###\) ###\\?-####/;function Ns(t){for(var a="",r,i=0;i!=t.length;++i)switch(r=t.charCodeAt(i)){case 35:break;case 63:a+=" ";break;case 48:a+="0";break;default:a+=String.fromCharCode(r)}return a}function Qb(t,a){var r=Math.pow(10,a);return""+Math.round(t*r)/r}function Jb(t,a){var r=t-Math.floor(t),i=Math.pow(10,a);return a<(""+Math.round(r*i)).length?0:Math.round(r*i)}function zA(t,a){return a<(""+Math.round((t-Math.floor(t))*Math.pow(10,a))).length?1:0}function UA(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function xn(t,a,r){if(t.charCodeAt(0)===40&&!a.match(ww)){var i=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?xn("n",i,r):"("+xn("n",i,-r)+")"}if(a.charCodeAt(a.length-1)===44)return BA(t,a,r);if(a.indexOf("%")!==-1)return MA(t,a,r);if(a.indexOf("E")!==-1)return yw(a,r);if(a.charCodeAt(0)===36)return"$"+xn(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),p=r<0?"-":"";if(a.match(/^00+$/))return p+dc(b,a.length);if(a.match(/^[#?]+$/))return l=dc(r,0),l==="0"&&(l=""),l.length>a.length?l:Ns(a.substr(0,a.length-l.length))+l;if(d=a.match(bw))return LA(d,b,p);if(a.match(/^#+0+$/))return p+dc(b,a.length-a.indexOf("0"));if(d=a.match(vw))return l=Qb(r,d[1].length).replace(/^([^\.]+)$/,"$1."+Ns(d[1])).replace(/\.$/,"."+Ns(d[1])).replace(/\.(\d*)$/,function(T,A){return"."+A+fa("0",Ns(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return p+Qb(b,d[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return p+kl(dc(b,0));if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+xn(t,a,-r):kl(""+(Math.floor(r)+zA(r,d[1].length)))+"."+Sn(Jb(r,d[1].length),d[1].length);if(d=a.match(/^#,#*,#0/))return xn(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=mc(xn(t,a.replace(/[\\-]/g,""),r)),f=0,mc(mc(a.replace(/\\/g,"")).replace(/[0#]/g,function(T){return f<l.length?l.charAt(f++):T==="0"?"0":""}));if(a.match(Nw))return l=xn(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=Qu(b,Math.pow(10,f)-1,!1),l=""+p,w=Di("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=Ku(h[2],f),w.length<d[4].length&&(w=Ns(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=Qu(b,Math.pow(10,f)-1,!0),p+(h[0]||(h[1]?"":"0"))+" "+(h[1]?ig(h[1],f)+d[2]+"/"+d[3]+Ku(h[2],f):fa(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=dc(r,0),a.length<=l.length?l:Ns(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0?]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var j=a.indexOf(".")-f,E=a.length-l.length-j;return Ns(a.substr(0,j)+l+a.substr(a.length-E))}if(d=a.match(/^00,000\.([#0]*0)$/))return f=Jb(r,d[1].length),r<0?"-"+xn(t,a,-r):kl(UA(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(T){return"00,"+(T.length<3?Sn(0,3-T.length):"")+T})+"."+Sn(f,d[1].length);switch(a){case"###,##0.00":return xn(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var _=kl(dc(b,0));return _!=="0"?p+_:"";case"###,###.00":return xn(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return xn(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+a+"|")}function HA(t,a,r){for(var i=a.length-1;a.charCodeAt(i-1)===44;)--i;return Di(t,a.substr(0,i),r/Math.pow(10,3*(a.length-i)))}function VA(t,a,r){var i=a.replace(pw,""),l=a.length-i.length;return Di(t,i,r*Math.pow(10,2*l))+fa("%",l)}function kw(t,a){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+kw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(i+1+(l+d)%l),!r.match(/[Ee]/)){var f=Math.floor(Math.log(a)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,p,w){return b+p+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ri(t,a,r){if(t.charCodeAt(0)===40&&!a.match(ww)){var i=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ri("n",i,r):"("+ri("n",i,-r)+")"}if(a.charCodeAt(a.length-1)===44)return HA(t,a,r);if(a.indexOf("%")!==-1)return VA(t,a,r);if(a.indexOf("E")!==-1)return kw(a,r);if(a.charCodeAt(0)===36)return"$"+ri(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),p=r<0?"-":"";if(a.match(/^00+$/))return p+Sn(b,a.length);if(a.match(/^[#?]+$/))return l=""+r,r===0&&(l=""),l.length>a.length?l:Ns(a.substr(0,a.length-l.length))+l;if(d=a.match(bw))return PA(d,b,p);if(a.match(/^#+0+$/))return p+Sn(b,a.length-a.indexOf("0"));if(d=a.match(vw))return l=(""+r).replace(/^([^\.]+)$/,"$1."+Ns(d[1])).replace(/\.$/,"."+Ns(d[1])),l=l.replace(/\.(\d*)$/,function(T,A){return"."+A+fa("0",Ns(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return p+(""+b).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return p+kl(""+b);if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ri(t,a,-r):kl(""+r)+"."+fa("0",d[1].length);if(d=a.match(/^#,#*,#0/))return ri(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=mc(ri(t,a.replace(/[\\-]/g,""),r)),f=0,mc(mc(a.replace(/\\/g,"")).replace(/[0#]/g,function(T){return f<l.length?l.charAt(f++):T==="0"?"0":""}));if(a.match(Nw))return l=ri(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=Qu(b,Math.pow(10,f)-1,!1),l=""+p,w=Di("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=Ku(h[2],f),w.length<d[4].length&&(w=Ns(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=Qu(b,Math.pow(10,f)-1,!0),p+(h[0]||(h[1]?"":"0"))+" "+(h[1]?ig(h[1],f)+d[2]+"/"+d[3]+Ku(h[2],f):fa(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=""+r,a.length<=l.length?l:Ns(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var j=a.indexOf(".")-f,E=a.length-l.length-j;return Ns(a.substr(0,j)+l+a.substr(a.length-E))}if(d=a.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ri(t,a,-r):kl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(T){return"00,"+(T.length<3?Sn(0,3-T.length):"")+T})+"."+Sn(0,d[1].length);switch(a){case"###,###":case"##,###":case"#,###":var _=kl(""+b);return _!=="0"?p+_:"";default:if(a.match(/\.[0#?]*$/))return ri(t,a.slice(0,a.lastIndexOf(".")),r)+Ns(a.slice(a.lastIndexOf(".")))}throw new Error("unsupported format |"+a+"|")}function Di(t,a,r){return(r|0)===r?ri(t,a,r):xn(t,a,r)}function GA(t){for(var a=[],r=!1,i=0,l=0;i<t.length;++i)switch(t.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:a[a.length]=t.substr(l,i-l),l=i+1}if(a[a.length]=t.substr(l),r===!0)throw new Error("Format |"+t+"| unterminated string ");return a}var jw=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Ec(t){for(var a=0,r="",i="";a<t.length;)switch(r=t.charAt(a)){case"G":Zu(t,a)&&(a+=6),a++;break;case'"':for(;t.charCodeAt(++a)!==34&&a<t.length;);++a;break;case"\\":a+=2;break;case"_":a+=2;break;case"@":++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(a,3).toUpperCase()==="A/P"||t.substr(a,5).toUpperCase()==="AM/PM"||t.substr(a,5).toUpperCase()==="/")return!0;++a;break;case"[":for(i=r;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.match(jw))return!0;break;case".":case"0":case"#":for(;a<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++a))>-1||r=="\\"&&t.charAt(a+1)=="-"&&"0#".indexOf(t.charAt(a+2))>-1););break;case"?":for(;t.charAt(++a)===r;);break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;);break;case" ":++a;break;default:++a;break}return!1}function XA(t,a,r,i){for(var l=[],d="",f=0,h="",b="t",p,w,j,E="H";f<t.length;)switch(h=t.charAt(f)){case"G":if(!Zu(t,f))throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"G",v:"General"},f+=7;break;case'"':for(d="";(j=t.charCodeAt(++f))!==34&&f<t.length;)d+=String.fromCharCode(j);l[l.length]={t:"t",v:d},++f;break;case"\\":var _=t.charAt(++f),T=_==="("||_===")"?_:"t";l[l.length]={t:T,v:_},++f;break;case"_":l[l.length]={t:"t",v:" "},f+=2;break;case"@":l[l.length]={t:"T",v:a},++f;break;case"B":case"b":if(t.charAt(f+1)==="1"||t.charAt(f+1)==="2"){if(p==null&&(p=so(a,r,t.charAt(f+1)==="2"),p==null))return"";l[l.length]={t:"X",v:t.substr(f,2)},b=h,f+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(a<0||p==null&&(p=so(a,r),p==null))return"";for(d=h;++f<t.length&&t.charAt(f).toLowerCase()===h;)d+=h;h==="m"&&b.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=E),l[l.length]={t:h,v:d},b=h;break;case"A":case"a":case"":var A={t:h,v:h};if(p==null&&(p=so(a,r)),t.substr(f,3).toUpperCase()==="A/P"?(p!=null&&(A.v=p.H>=12?"P":"A"),A.t="T",E="h",f+=3):t.substr(f,5).toUpperCase()==="AM/PM"?(p!=null&&(A.v=p.H>=12?"PM":"AM"),A.t="T",f+=5,E="h"):t.substr(f,5).toUpperCase()==="/"?(p!=null&&(A.v=p.H>=12?"":""),A.t="T",f+=5,E="h"):(A.t="t",++f),p==null&&A.t==="T")return"";l[l.length]=A,b=h;break;case"[":for(d=h;t.charAt(f++)!=="]"&&f<t.length;)d+=t.charAt(f);if(d.slice(-1)!=="]")throw'unterminated "[" block: |'+d+"|";if(d.match(jw)){if(p==null&&(p=so(a,r),p==null))return"";l[l.length]={t:"Z",v:d.toLowerCase()},b=d.charAt(1)}else d.indexOf("$")>-1&&(d=(d.match(/\$([^-\[\]]*)/)||[])[1]||"$",Ec(t)||(l[l.length]={t:"t",v:d}));break;case".":if(p!=null){for(d=h;++f<t.length&&(h=t.charAt(f))==="0";)d+=h;l[l.length]={t:"s",v:d};break}case"0":case"#":for(d=h;++f<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(f))>-1;)d+=h;l[l.length]={t:"n",v:d};break;case"?":for(d=h;t.charAt(++f)===h;)d+=h;l[l.length]={t:h,v:d},b=h;break;case"*":++f,(t.charAt(f)==" "||t.charAt(f)=="*")&&++f;break;case"(":case")":l[l.length]={t:i===1?"t":h,v:h},++f;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(d=h;f<t.length&&"0123456789".indexOf(t.charAt(++f))>-1;)d+=t.charAt(f);l[l.length]={t:"D",v:d};break;case" ":l[l.length]={t:h,v:h},++f;break;case"$":l[l.length]={t:"t",v:"$"},++f;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"t",v:h},++f;break}var I=0,O=0,M;for(f=l.length-1,b="t";f>=0;--f)switch(l[f].t){case"h":case"H":l[f].t=E,b="h",I<1&&(I=1);break;case"s":(M=l[f].v.match(/\.0+$/))&&(O=Math.max(O,M[0].length-1)),I<3&&(I=3);case"d":case"y":case"M":case"e":b=l[f].t;break;case"m":b==="s"&&(l[f].t="M",I<2&&(I=2));break;case"X":break;case"Z":I<1&&l[f].v.match(/[Hh]/)&&(I=1),I<2&&l[f].v.match(/[Mm]/)&&(I=2),I<3&&l[f].v.match(/[Ss]/)&&(I=3)}switch(I){case 0:break;case 1:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M),p.M>=60&&(p.M=0,++p.H);break;case 2:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M);break}var D="",B;for(f=0;f<l.length;++f)switch(l[f].t){case"t":case"T":case" ":case"D":break;case"X":l[f].v="",l[f].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[f].v=FA(l[f].t.charCodeAt(0),l[f].v,p,O),l[f].t="t";break;case"n":case"?":for(B=f+1;l[B]!=null&&((h=l[B].t)==="?"||h==="D"||(h===" "||h==="t")&&l[B+1]!=null&&(l[B+1].t==="?"||l[B+1].t==="t"&&l[B+1].v==="/")||l[f].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(l[B].v==="/"||l[B].v===" "&&l[B+1]!=null&&l[B+1].t=="?"));)l[f].v+=l[B].v,l[B]={v:"",t:";"},++B;D+=l[f].v,f=B-1;break;case"G":l[f].t="t",l[f].v=ho(a,r);break}var H="",z,L;if(D.length>0){D.charCodeAt(0)==40?(z=a<0&&D.charCodeAt(0)===45?-a:a,L=Di("n",D,z)):(z=a<0&&i>1?-a:a,L=Di("n",D,z),z<0&&l[0]&&l[0].t=="t"&&(L=L.substr(1),l[0].v="-"+l[0].v)),B=L.length-1;var P=l.length;for(f=0;f<l.length;++f)if(l[f]!=null&&l[f].t!="t"&&l[f].v.indexOf(".")>-1){P=f;break}var U=l.length;if(P===l.length&&L.indexOf("E")===-1){for(f=l.length-1;f>=0;--f)l[f]==null||"n?".indexOf(l[f].t)===-1||(B>=l[f].v.length-1?(B-=l[f].v.length,l[f].v=L.substr(B+1,l[f].v.length)):B<0?l[f].v="":(l[f].v=L.substr(0,B+1),B=-1),l[f].t="t",U=f);B>=0&&U<l.length&&(l[U].v=L.substr(0,B+1)+l[U].v)}else if(P!==l.length&&L.indexOf("E")===-1){for(B=L.indexOf(".")-1,f=P;f>=0;--f)if(!(l[f]==null||"n?".indexOf(l[f].t)===-1)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")-1:l[f].v.length-1,H=l[f].v.substr(w+1);w>=0;--w)B>=0&&(l[f].v.charAt(w)==="0"||l[f].v.charAt(w)==="#")&&(H=L.charAt(B--)+H);l[f].v=H,l[f].t="t",U=f}for(B>=0&&U<l.length&&(l[U].v=L.substr(0,B+1)+l[U].v),B=L.indexOf(".")+1,f=P;f<l.length;++f)if(!(l[f]==null||"n?(".indexOf(l[f].t)===-1&&f!==P)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")+1:0,H=l[f].v.substr(0,w);w<l[f].v.length;++w)B<L.length&&(H+=L.charAt(B++));l[f].v=H,l[f].t="t",U=f}}}for(f=0;f<l.length;++f)l[f]!=null&&"n?".indexOf(l[f].t)>-1&&(z=i>1&&a<0&&f>0&&l[f-1].v==="-"?-a:a,l[f].v=Di(l[f].t,l[f].v,z),l[f].t="t");var Z="";for(f=0;f!==l.length;++f)l[f]!=null&&(Z+=l[f].v);return Z}var e2=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function t2(t,a){if(a==null)return!1;var r=parseFloat(a[2]);switch(a[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function qA(t,a){var r=GA(t),i=r.length,l=r[i-1].indexOf("@");if(i<4&&l>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof a!="number")return[4,r.length===4||l>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=l>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=l>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=l>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var d=a>0?r[0]:a<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,d];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var f=r[0].match(e2),h=r[1].match(e2);return t2(a,f)?[i,r[0]]:t2(a,h)?[i,r[1]]:[i,r[f!=null&&h!=null?2:1]]}return[i,d]}function gn(t,a,r){r==null&&(r={});var i="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?i=r.dateNF:i=t;break;case"number":t==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:rr)[t],i==null&&(i=r.table&&r.table[Zb[t]]||rr[Zb[t]]),i==null&&(i=AA[t]||"General");break}if(Zu(i,0))return ho(a,r);a instanceof Date&&(a=gw(a,r.date1904));var l=qA(i,a);if(Zu(l[1]))return ho(a,r);if(a===!0)a="TRUE";else if(a===!1)a="FALSE";else if(a===""||a==null)return"";return XA(l[1],a,r,l[0])}function lo(t,a){if(typeof a!="number"){a=+a||-1;for(var r=0;r<392;++r){if(rr[r]==null){a<0&&(a=r);continue}if(rr[r]==t){a=r;break}}a<0&&(a=391)}return rr[a]=t,a}function Cw(){rr=_A()}var $A={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Ew=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function YA(t){var a=typeof t=="number"?rr[t]:t;return a=a.replace(Ew,"(\\d+)"),new RegExp("^"+a+"$")}function WA(t,a,r){var i=-1,l=-1,d=-1,f=-1,h=-1,b=-1;(a.match(Ew)||[]).forEach(function(j,E){var _=parseInt(r[E+1],10);switch(j.toLowerCase().charAt(0)){case"y":i=_;break;case"d":d=_;break;case"h":f=_;break;case"s":b=_;break;case"m":f>=0?h=_:l=_;break}}),b>=0&&h==-1&&l>=0&&(h=l,l=-1);var p=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(d>=1?d:1)).slice(-2);p.length==7&&(p="0"+p),p.length==8&&(p="20"+p);var w=("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(b>=0?b:0)).slice(-2);return f==-1&&h==-1&&b==-1?p:i==-1&&l==-1&&d==-1?w:p+"T"+w}var KA=function(){var t={};t.version="1.2.0";function a(){for(var L=0,P=new Array(256),U=0;U!=256;++U)L=U,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,P[U]=L;return typeof Int32Array<"u"?new Int32Array(P):P}var r=a();function i(L){var P=0,U=0,Z=0,ae=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(Z=0;Z!=256;++Z)ae[Z]=L[Z];for(Z=0;Z!=256;++Z)for(U=L[Z],P=256+Z;P<4096;P+=256)U=ae[P]=U>>>8^L[U&255];var Y=[];for(Z=1;Z!=16;++Z)Y[Z-1]=typeof Int32Array<"u"?ae.subarray(Z*256,Z*256+256):ae.slice(Z*256,Z*256+256);return Y}var l=i(r),d=l[0],f=l[1],h=l[2],b=l[3],p=l[4],w=l[5],j=l[6],E=l[7],_=l[8],T=l[9],A=l[10],I=l[11],O=l[12],M=l[13],D=l[14];function B(L,P){for(var U=P^-1,Z=0,ae=L.length;Z<ae;)U=U>>>8^r[(U^L.charCodeAt(Z++))&255];return~U}function H(L,P){for(var U=P^-1,Z=L.length-15,ae=0;ae<Z;)U=D[L[ae++]^U&255]^M[L[ae++]^U>>8&255]^O[L[ae++]^U>>16&255]^I[L[ae++]^U>>>24]^A[L[ae++]]^T[L[ae++]]^_[L[ae++]]^E[L[ae++]]^j[L[ae++]]^w[L[ae++]]^p[L[ae++]]^b[L[ae++]]^h[L[ae++]]^f[L[ae++]]^d[L[ae++]]^r[L[ae++]];for(Z+=15;ae<Z;)U=U>>>8^r[(U^L[ae++])&255];return~U}function z(L,P){for(var U=P^-1,Z=0,ae=L.length,Y=0,ue=0;Z<ae;)Y=L.charCodeAt(Z++),Y<128?U=U>>>8^r[(U^Y)&255]:Y<2048?(U=U>>>8^r[(U^(192|Y>>6&31))&255],U=U>>>8^r[(U^(128|Y&63))&255]):Y>=55296&&Y<57344?(Y=(Y&1023)+64,ue=L.charCodeAt(Z++)&1023,U=U>>>8^r[(U^(240|Y>>8&7))&255],U=U>>>8^r[(U^(128|Y>>2&63))&255],U=U>>>8^r[(U^(128|ue>>6&15|(Y&3)<<4))&255],U=U>>>8^r[(U^(128|ue&63))&255]):(U=U>>>8^r[(U^(224|Y>>12&15))&255],U=U>>>8^r[(U^(128|Y>>6&63))&255],U=U>>>8^r[(U^(128|Y&63))&255]);return~U}return t.table=r,t.bstr=B,t.buf=H,t.str=z,t}(),br=function(){var a={};a.version="1.2.1";function r(ce,me){for(var ge=ce.split("/"),ye=me.split("/"),ve=0,Ee=0,Ye=Math.min(ge.length,ye.length);ve<Ye;++ve){if(Ee=ge[ve].length-ye[ve].length)return Ee;if(ge[ve]!=ye[ve])return ge[ve]<ye[ve]?-1:1}return ge.length-ye.length}function i(ce){if(ce.charAt(ce.length-1)=="/")return ce.slice(0,-1).indexOf("/")===-1?ce:i(ce.slice(0,-1));var me=ce.lastIndexOf("/");return me===-1?ce:ce.slice(0,me+1)}function l(ce){if(ce.charAt(ce.length-1)=="/")return l(ce.slice(0,-1));var me=ce.lastIndexOf("/");return me===-1?ce:ce.slice(me+1)}function d(ce,me){typeof me=="string"&&(me=new Date(me));var ge=me.getHours();ge=ge<<6|me.getMinutes(),ge=ge<<5|me.getSeconds()>>>1,ce.write_shift(2,ge);var ye=me.getFullYear()-1980;ye=ye<<4|me.getMonth()+1,ye=ye<<5|me.getDate(),ce.write_shift(2,ye)}function f(ce){var me=ce.read_shift(2)&65535,ge=ce.read_shift(2)&65535,ye=new Date,ve=ge&31;ge>>>=5;var Ee=ge&15;ge>>>=4,ye.setMilliseconds(0),ye.setFullYear(ge+1980),ye.setMonth(Ee-1),ye.setDate(ve);var Ye=me&31;me>>>=5;var lt=me&63;return me>>>=6,ye.setHours(me),ye.setMinutes(lt),ye.setSeconds(Ye<<1),ye}function h(ce){Za(ce,0);for(var me={},ge=0;ce.l<=ce.length-4;){var ye=ce.read_shift(2),ve=ce.read_shift(2),Ee=ce.l+ve,Ye={};switch(ye){case 21589:ge=ce.read_shift(1),ge&1&&(Ye.mtime=ce.read_shift(4)),ve>5&&(ge&2&&(Ye.atime=ce.read_shift(4)),ge&4&&(Ye.ctime=ce.read_shift(4))),Ye.mtime&&(Ye.mt=new Date(Ye.mtime*1e3));break}ce.l=Ee,me[ye]=Ye}return me}var b;function p(){return b||(b={})}function w(ce,me){if(ce[0]==80&&ce[1]==75)return Dt(ce,me);if((ce[0]|32)==109&&(ce[1]|32)==105)return bn(ce,me);if(ce.length<512)throw new Error("CFB file size "+ce.length+" < 512");var ge=3,ye=512,ve=0,Ee=0,Ye=0,lt=0,Ue=0,Ke=[],Je=ce.slice(0,512);Za(Je,0);var ft=j(Je);switch(ge=ft[0],ge){case 3:ye=512;break;case 4:ye=4096;break;case 0:if(ft[1]==0)return Dt(ce,me);default:throw new Error("Major Version: Expected 3 or 4 saw "+ge)}ye!==512&&(Je=ce.slice(0,ye),Za(Je,28));var mt=ce.slice(0,ye);E(Je,ge);var bt=Je.read_shift(4,"i");if(ge===3&&bt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+bt);Je.l+=4,Ye=Je.read_shift(4,"i"),Je.l+=4,Je.chk("00100000","Mini Stream Cutoff Size: "),lt=Je.read_shift(4,"i"),ve=Je.read_shift(4,"i"),Ue=Je.read_shift(4,"i"),Ee=Je.read_shift(4,"i");for(var wt=-1,jt=0;jt<109&&(wt=Je.read_shift(4,"i"),!(wt<0));++jt)Ke[jt]=wt;var Pt=_(ce,ye);I(Ue,Ee,Pt,ye,Ke);var it=M(Pt,Ye,Ke,ye);it[Ye].name="!Directory",ve>0&&lt!==ue&&(it[lt].name="!MiniFAT"),it[Ke[0]].name="!FAT",it.fat_addrs=Ke,it.ssz=ye;var _r={},zt=[],ts=[],Bn=[];D(Ye,it,Pt,zt,ve,_r,ts,lt),T(ts,Bn,zt),zt.shift();var Qt={FileIndex:ts,FullPaths:Bn};return me&&me.raw&&(Qt.raw={header:mt,sectors:Pt}),Qt}function j(ce){if(ce[ce.l]==80&&ce[ce.l+1]==75)return[0,0];ce.chk(de,"Header Signature: "),ce.l+=16;var me=ce.read_shift(2,"u");return[ce.read_shift(2,"u"),me]}function E(ce,me){var ge=9;switch(ce.l+=2,ge=ce.read_shift(2)){case 9:if(me!=3)throw new Error("Sector Shift: Expected 9 saw "+ge);break;case 12:if(me!=4)throw new Error("Sector Shift: Expected 12 saw "+ge);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ge)}ce.chk("0600","Mini Sector Shift: "),ce.chk("000000000000","Reserved: ")}function _(ce,me){for(var ge=Math.ceil(ce.length/me)-1,ye=[],ve=1;ve<ge;++ve)ye[ve-1]=ce.slice(ve*me,(ve+1)*me);return ye[ge-1]=ce.slice(ge*me),ye}function T(ce,me,ge){for(var ye=0,ve=0,Ee=0,Ye=0,lt=0,Ue=ge.length,Ke=[],Je=[];ye<Ue;++ye)Ke[ye]=Je[ye]=ye,me[ye]=ge[ye];for(;lt<Je.length;++lt)ye=Je[lt],ve=ce[ye].L,Ee=ce[ye].R,Ye=ce[ye].C,Ke[ye]===ye&&(ve!==-1&&Ke[ve]!==ve&&(Ke[ye]=Ke[ve]),Ee!==-1&&Ke[Ee]!==Ee&&(Ke[ye]=Ke[Ee])),Ye!==-1&&(Ke[Ye]=ye),ve!==-1&&ye!=Ke[ye]&&(Ke[ve]=Ke[ye],Je.lastIndexOf(ve)<lt&&Je.push(ve)),Ee!==-1&&ye!=Ke[ye]&&(Ke[Ee]=Ke[ye],Je.lastIndexOf(Ee)<lt&&Je.push(Ee));for(ye=1;ye<Ue;++ye)Ke[ye]===ye&&(Ee!==-1&&Ke[Ee]!==Ee?Ke[ye]=Ke[Ee]:ve!==-1&&Ke[ve]!==ve&&(Ke[ye]=Ke[ve]));for(ye=1;ye<Ue;++ye)if(ce[ye].type!==0){if(lt=ye,lt!=Ke[lt])do lt=Ke[lt],me[ye]=me[lt]+"/"+me[ye];while(lt!==0&&Ke[lt]!==-1&&lt!=Ke[lt]);Ke[ye]=-1}for(me[0]+="/",ye=1;ye<Ue;++ye)ce[ye].type!==2&&(me[ye]+="/")}function A(ce,me,ge){for(var ye=ce.start,ve=ce.size,Ee=[],Ye=ye;ge&&ve>0&&Ye>=0;)Ee.push(me.slice(Ye*Y,Ye*Y+Y)),ve-=Y,Ye=to(ge,Ye*4);return Ee.length===0?La(0):wl(Ee).slice(0,ce.size)}function I(ce,me,ge,ye,ve){var Ee=ue;if(ce===ue){if(me!==0)throw new Error("DIFAT chain shorter than expected")}else if(ce!==-1){var Ye=ge[ce],lt=(ye>>>2)-1;if(!Ye)return;for(var Ue=0;Ue<lt&&(Ee=to(Ye,Ue*4))!==ue;++Ue)ve.push(Ee);I(to(Ye,ye-4),me-1,ge,ye,ve)}}function O(ce,me,ge,ye,ve){var Ee=[],Ye=[];ve||(ve=[]);var lt=ye-1,Ue=0,Ke=0;for(Ue=me;Ue>=0;){ve[Ue]=!0,Ee[Ee.length]=Ue,Ye.push(ce[Ue]);var Je=ge[Math.floor(Ue*4/ye)];if(Ke=Ue*4&lt,ye<4+Ke)throw new Error("FAT boundary crossed: "+Ue+" 4 "+ye);if(!ce[Je])break;Ue=to(ce[Je],Ke)}return{nodes:Ee,data:u2([Ye])}}function M(ce,me,ge,ye){var ve=ce.length,Ee=[],Ye=[],lt=[],Ue=[],Ke=ye-1,Je=0,ft=0,mt=0,bt=0;for(Je=0;Je<ve;++Je)if(lt=[],mt=Je+me,mt>=ve&&(mt-=ve),!Ye[mt]){Ue=[];var wt=[];for(ft=mt;ft>=0;){wt[ft]=!0,Ye[ft]=!0,lt[lt.length]=ft,Ue.push(ce[ft]);var jt=ge[Math.floor(ft*4/ye)];if(bt=ft*4&Ke,ye<4+bt)throw new Error("FAT boundary crossed: "+ft+" 4 "+ye);if(!ce[jt]||(ft=to(ce[jt],bt),wt[ft]))break}Ee[mt]={nodes:lt,data:u2([Ue])}}return Ee}function D(ce,me,ge,ye,ve,Ee,Ye,lt){for(var Ue=0,Ke=ye.length?2:0,Je=me[ce].data,ft=0,mt=0,bt;ft<Je.length;ft+=128){var wt=Je.slice(ft,ft+128);Za(wt,64),mt=wt.read_shift(2),bt=fg(wt,0,mt-Ke),ye.push(bt);var jt={name:bt,type:wt.read_shift(1),color:wt.read_shift(1),L:wt.read_shift(4,"i"),R:wt.read_shift(4,"i"),C:wt.read_shift(4,"i"),clsid:wt.read_shift(16),state:wt.read_shift(4,"i"),start:0,size:0},Pt=wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2);Pt!==0&&(jt.ct=B(wt,wt.l-8));var it=wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2)+wt.read_shift(2);it!==0&&(jt.mt=B(wt,wt.l-8)),jt.start=wt.read_shift(4,"i"),jt.size=wt.read_shift(4,"i"),jt.size<0&&jt.start<0&&(jt.size=jt.type=0,jt.start=ue,jt.name=""),jt.type===5?(Ue=jt.start,ve>0&&Ue!==ue&&(me[Ue].name="!StreamData")):jt.size>=4096?(jt.storage="fat",me[jt.start]===void 0&&(me[jt.start]=O(ge,jt.start,me.fat_addrs,me.ssz)),me[jt.start].name=jt.name,jt.content=me[jt.start].data.slice(0,jt.size)):(jt.storage="minifat",jt.size<0?jt.size=0:Ue!==ue&&jt.start!==ue&&me[Ue]&&(jt.content=A(jt,me[Ue].data,(me[lt]||{}).data))),jt.content&&Za(jt.content,0),Ee[bt]=jt,Ye.push(jt)}}function B(ce,me){return new Date((Qs(ce,me+4)/1e7*Math.pow(2,32)+Qs(ce,me)/1e7-11644473600)*1e3)}function H(ce,me){return p(),w(b.readFileSync(ce),me)}function z(ce,me){var ge=me&&me.type;switch(ge||mr&&Buffer.isBuffer(ce)&&(ge="buffer"),ge||"base64"){case"file":return H(ce,me);case"base64":return w(_n(rn(ce)),me);case"binary":return w(_n(ce),me)}return w(ce,me)}function L(ce,me){var ge=me||{},ye=ge.root||"Root Entry";if(ce.FullPaths||(ce.FullPaths=[]),ce.FileIndex||(ce.FileIndex=[]),ce.FullPaths.length!==ce.FileIndex.length)throw new Error("inconsistent CFB structure");ce.FullPaths.length===0&&(ce.FullPaths[0]=ye+"/",ce.FileIndex[0]={name:ye,type:5}),ge.CLSID&&(ce.FileIndex[0].clsid=ge.CLSID),P(ce)}function P(ce){var me="Sh33tJ5";if(!br.find(ce,"/"+me)){var ge=La(4);ge[0]=55,ge[1]=ge[3]=50,ge[2]=54,ce.FileIndex.push({name:me,type:2,content:ge,size:4,L:69,R:69,C:69}),ce.FullPaths.push(ce.FullPaths[0]+me),U(ce)}}function U(ce,me){L(ce);for(var ge=!1,ye=!1,ve=ce.FullPaths.length-1;ve>=0;--ve){var Ee=ce.FileIndex[ve];switch(Ee.type){case 0:ye?ge=!0:(ce.FileIndex.pop(),ce.FullPaths.pop());break;case 1:case 2:case 5:ye=!0,isNaN(Ee.R*Ee.L*Ee.C)&&(ge=!0),Ee.R>-1&&Ee.L>-1&&Ee.R==Ee.L&&(ge=!0);break;default:ge=!0;break}}if(!(!ge&&!me)){var Ye=new Date(1987,1,19),lt=0,Ue=Object.create?Object.create(null):{},Ke=[];for(ve=0;ve<ce.FullPaths.length;++ve)Ue[ce.FullPaths[ve]]=!0,ce.FileIndex[ve].type!==0&&Ke.push([ce.FullPaths[ve],ce.FileIndex[ve]]);for(ve=0;ve<Ke.length;++ve){var Je=i(Ke[ve][0]);ye=Ue[Je],ye||(Ke.push([Je,{name:l(Je).replace("/",""),type:1,clsid:q,ct:Ye,mt:Ye,content:null}]),Ue[Je]=!0)}for(Ke.sort(function(bt,wt){return r(bt[0],wt[0])}),ce.FullPaths=[],ce.FileIndex=[],ve=0;ve<Ke.length;++ve)ce.FullPaths[ve]=Ke[ve][0],ce.FileIndex[ve]=Ke[ve][1];for(ve=0;ve<Ke.length;++ve){var ft=ce.FileIndex[ve],mt=ce.FullPaths[ve];if(ft.name=l(mt).replace("/",""),ft.L=ft.R=ft.C=-(ft.color=1),ft.size=ft.content?ft.content.length:0,ft.start=0,ft.clsid=ft.clsid||q,ve===0)ft.C=Ke.length>1?1:-1,ft.size=0,ft.type=5;else if(mt.slice(-1)=="/"){for(lt=ve+1;lt<Ke.length&&i(ce.FullPaths[lt])!=mt;++lt);for(ft.C=lt>=Ke.length?-1:lt,lt=ve+1;lt<Ke.length&&i(ce.FullPaths[lt])!=i(mt);++lt);ft.R=lt>=Ke.length?-1:lt,ft.type=1}else i(ce.FullPaths[ve+1]||"")==i(mt)&&(ft.R=ve+1),ft.type=2}}}function Z(ce,me){var ge=me||{};if(ge.fileType=="mad")return ta(ce,ge);switch(U(ce),ge.fileType){case"zip":return sr(ce,ge)}var ye=function(bt){for(var wt=0,jt=0,Pt=0;Pt<bt.FileIndex.length;++Pt){var it=bt.FileIndex[Pt];if(it.content){var _r=it.content.length;_r>0&&(_r<4096?wt+=_r+63>>6:jt+=_r+511>>9)}}for(var zt=bt.FullPaths.length+3>>2,ts=wt+7>>3,Bn=wt+127>>7,Qt=ts+jt+zt+Bn,Jt=Qt+127>>7,er=Jt<=109?0:Math.ceil((Jt-109)/127);Qt+Jt+er+127>>7>Jt;)er=++Jt<=109?0:Math.ceil((Jt-109)/127);var ys=[1,er,Jt,Bn,zt,jt,wt,0];return bt.FileIndex[0].size=wt<<6,ys[7]=(bt.FileIndex[0].start=ys[0]+ys[1]+ys[2]+ys[3]+ys[4]+ys[5])+(ys[6]+7>>3),ys}(ce),ve=La(ye[7]<<9),Ee=0,Ye=0;{for(Ee=0;Ee<8;++Ee)ve.write_shift(1,G[Ee]);for(Ee=0;Ee<8;++Ee)ve.write_shift(2,0);for(ve.write_shift(2,62),ve.write_shift(2,3),ve.write_shift(2,65534),ve.write_shift(2,9),ve.write_shift(2,6),Ee=0;Ee<3;++Ee)ve.write_shift(2,0);for(ve.write_shift(4,0),ve.write_shift(4,ye[2]),ve.write_shift(4,ye[0]+ye[1]+ye[2]+ye[3]-1),ve.write_shift(4,0),ve.write_shift(4,4096),ve.write_shift(4,ye[3]?ye[0]+ye[1]+ye[2]-1:ue),ve.write_shift(4,ye[3]),ve.write_shift(-4,ye[1]?ye[0]-1:ue),ve.write_shift(4,ye[1]),Ee=0;Ee<109;++Ee)ve.write_shift(-4,Ee<ye[2]?ye[1]+Ee:-1)}if(ye[1])for(Ye=0;Ye<ye[1];++Ye){for(;Ee<236+Ye*127;++Ee)ve.write_shift(-4,Ee<ye[2]?ye[1]+Ee:-1);ve.write_shift(-4,Ye===ye[1]-1?ue:Ye+1)}var lt=function(bt){for(Ye+=bt;Ee<Ye-1;++Ee)ve.write_shift(-4,Ee+1);bt&&(++Ee,ve.write_shift(-4,ue))};for(Ye=Ee=0,Ye+=ye[1];Ee<Ye;++Ee)ve.write_shift(-4,xe.DIFSECT);for(Ye+=ye[2];Ee<Ye;++Ee)ve.write_shift(-4,xe.FATSECT);lt(ye[3]),lt(ye[4]);for(var Ue=0,Ke=0,Je=ce.FileIndex[0];Ue<ce.FileIndex.length;++Ue)Je=ce.FileIndex[Ue],Je.content&&(Ke=Je.content.length,!(Ke<4096)&&(Je.start=Ye,lt(Ke+511>>9)));for(lt(ye[6]+7>>3);ve.l&511;)ve.write_shift(-4,xe.ENDOFCHAIN);for(Ye=Ee=0,Ue=0;Ue<ce.FileIndex.length;++Ue)Je=ce.FileIndex[Ue],Je.content&&(Ke=Je.content.length,!(!Ke||Ke>=4096)&&(Je.start=Ye,lt(Ke+63>>6)));for(;ve.l&511;)ve.write_shift(-4,xe.ENDOFCHAIN);for(Ee=0;Ee<ye[4]<<2;++Ee){var ft=ce.FullPaths[Ee];if(!ft||ft.length===0){for(Ue=0;Ue<17;++Ue)ve.write_shift(4,0);for(Ue=0;Ue<3;++Ue)ve.write_shift(4,-1);for(Ue=0;Ue<12;++Ue)ve.write_shift(4,0);continue}Je=ce.FileIndex[Ee],Ee===0&&(Je.start=Je.size?Je.start-1:ue);var mt=Ee===0&&ge.root||Je.name;if(Ke=2*(mt.length+1),ve.write_shift(64,mt,"utf16le"),ve.write_shift(2,Ke),ve.write_shift(1,Je.type),ve.write_shift(1,Je.color),ve.write_shift(-4,Je.L),ve.write_shift(-4,Je.R),ve.write_shift(-4,Je.C),Je.clsid)ve.write_shift(16,Je.clsid,"hex");else for(Ue=0;Ue<4;++Ue)ve.write_shift(4,0);ve.write_shift(4,Je.state||0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,0),ve.write_shift(4,Je.start),ve.write_shift(4,Je.size),ve.write_shift(4,0)}for(Ee=1;Ee<ce.FileIndex.length;++Ee)if(Je=ce.FileIndex[Ee],Je.size>=4096)if(ve.l=Je.start+1<<9,mr&&Buffer.isBuffer(Je.content))Je.content.copy(ve,ve.l,0,Je.size),ve.l+=Je.size+511&-512;else{for(Ue=0;Ue<Je.size;++Ue)ve.write_shift(1,Je.content[Ue]);for(;Ue&511;++Ue)ve.write_shift(1,0)}for(Ee=1;Ee<ce.FileIndex.length;++Ee)if(Je=ce.FileIndex[Ee],Je.size>0&&Je.size<4096)if(mr&&Buffer.isBuffer(Je.content))Je.content.copy(ve,ve.l,0,Je.size),ve.l+=Je.size+63&-64;else{for(Ue=0;Ue<Je.size;++Ue)ve.write_shift(1,Je.content[Ue]);for(;Ue&63;++Ue)ve.write_shift(1,0)}if(mr)ve.l=ve.length;else for(;ve.l<ve.length;)ve.write_shift(1,0);return ve}function ae(ce,me){var ge=ce.FullPaths.map(function(Ue){return Ue.toUpperCase()}),ye=ge.map(function(Ue){var Ke=Ue.split("/");return Ke[Ke.length-(Ue.slice(-1)=="/"?2:1)]}),ve=!1;me.charCodeAt(0)===47?(ve=!0,me=ge[0].slice(0,-1)+me):ve=me.indexOf("/")!==-1;var Ee=me.toUpperCase(),Ye=ve===!0?ge.indexOf(Ee):ye.indexOf(Ee);if(Ye!==-1)return ce.FileIndex[Ye];var lt=!Ee.match(C0);for(Ee=Ee.replace(Es,""),lt&&(Ee=Ee.replace(C0,"!")),Ye=0;Ye<ge.length;++Ye)if((lt?ge[Ye].replace(C0,"!"):ge[Ye]).replace(Es,"")==Ee||(lt?ye[Ye].replace(C0,"!"):ye[Ye]).replace(Es,"")==Ee)return ce.FileIndex[Ye];return null}var Y=64,ue=-2,de="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],q="00000000000000000000000000000000",xe={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ue,FREESECT:-1,HEADER_SIGNATURE:de,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Ce(ce,me,ge){p();var ye=Z(ce,ge);b.writeFileSync(me,ye)}function le(ce){for(var me=new Array(ce.length),ge=0;ge<ce.length;++ge)me[ge]=String.fromCharCode(ce[ge]);return me.join("")}function oe(ce,me){var ge=Z(ce,me);switch(me&&me.type||"buffer"){case"file":return p(),b.writeFileSync(me.filename,ge),ge;case"binary":return typeof ge=="string"?ge:le(ge);case"base64":return $b(typeof ge=="string"?ge:le(ge));case"buffer":if(mr)return Buffer.isBuffer(ge)?ge:vo(ge);case"array":return typeof ge=="string"?_n(ge):ge}return ge}var re;function Q(ce){try{var me=ce.InflateRaw,ge=new me;if(ge._processChunk(new Uint8Array([3,0]),ge._finishFlushFlag),ge.bytesRead)re=ce;else throw new Error("zlib does not expose bytesRead")}catch(ye){console.error("cannot use native zlib: "+(ye.message||ye))}}function X(ce,me){if(!re)return pt(ce,me);var ge=re.InflateRaw,ye=new ge,ve=ye._processChunk(ce.slice(ce.l),ye._finishFlushFlag);return ce.l+=ye.bytesRead,ve}function se(ce){return re?re.deflateRawSync(ce):Gt(ce)}var ne=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function we(ce){var me=(ce<<1|ce<<11)&139536|(ce<<5|ce<<15)&558144;return(me>>16|me>>8|me)&255}for(var Ve=typeof Uint8Array<"u",Le=Ve?new Uint8Array(256):[],ot=0;ot<256;++ot)Le[ot]=we(ot);function J(ce,me){var ge=Le[ce&255];return me<=8?ge>>>8-me:(ge=ge<<8|Le[ce>>8&255],me<=16?ge>>>16-me:(ge=ge<<8|Le[ce>>16&255],ge>>>24-me))}function Ne(ce,me){var ge=me&7,ye=me>>>3;return(ce[ye]|(ge<=6?0:ce[ye+1]<<8))>>>ge&3}function Ie(ce,me){var ge=me&7,ye=me>>>3;return(ce[ye]|(ge<=5?0:ce[ye+1]<<8))>>>ge&7}function ke(ce,me){var ge=me&7,ye=me>>>3;return(ce[ye]|(ge<=4?0:ce[ye+1]<<8))>>>ge&15}function Qe(ce,me){var ge=me&7,ye=me>>>3;return(ce[ye]|(ge<=3?0:ce[ye+1]<<8))>>>ge&31}function _e(ce,me){var ge=me&7,ye=me>>>3;return(ce[ye]|(ge<=1?0:ce[ye+1]<<8))>>>ge&127}function ut(ce,me,ge){var ye=me&7,ve=me>>>3,Ee=(1<<ge)-1,Ye=ce[ve]>>>ye;return ge<8-ye||(Ye|=ce[ve+1]<<8-ye,ge<16-ye)||(Ye|=ce[ve+2]<<16-ye,ge<24-ye)||(Ye|=ce[ve+3]<<24-ye),Ye&Ee}function pe(ce,me,ge){var ye=me&7,ve=me>>>3;return ye<=5?ce[ve]|=(ge&7)<<ye:(ce[ve]|=ge<<ye&255,ce[ve+1]=(ge&7)>>8-ye),me+3}function Ge(ce,me,ge){var ye=me&7,ve=me>>>3;return ge=(ge&1)<<ye,ce[ve]|=ge,me+1}function ze(ce,me,ge){var ye=me&7,ve=me>>>3;return ge<<=ye,ce[ve]|=ge&255,ge>>>=8,ce[ve+1]=ge,me+8}function Pe(ce,me,ge){var ye=me&7,ve=me>>>3;return ge<<=ye,ce[ve]|=ge&255,ge>>>=8,ce[ve+1]=ge&255,ce[ve+2]=ge>>>8,me+16}function Oe(ce,me){var ge=ce.length,ye=2*ge>me?2*ge:me+5,ve=0;if(ge>=me)return ce;if(mr){var Ee=Yb(ye);if(ce.copy)ce.copy(Ee);else for(;ve<ce.length;++ve)Ee[ve]=ce[ve];return Ee}else if(Ve){var Ye=new Uint8Array(ye);if(Ye.set)Ye.set(ce);else for(;ve<ge;++ve)Ye[ve]=ce[ve];return Ye}return ce.length=ye,ce}function nt(ce){for(var me=new Array(ce),ge=0;ge<ce;++ge)me[ge]=0;return me}function kt(ce,me,ge){var ye=1,ve=0,Ee=0,Ye=0,lt=0,Ue=ce.length,Ke=Ve?new Uint16Array(32):nt(32);for(Ee=0;Ee<32;++Ee)Ke[Ee]=0;for(Ee=Ue;Ee<ge;++Ee)ce[Ee]=0;Ue=ce.length;var Je=Ve?new Uint16Array(Ue):nt(Ue);for(Ee=0;Ee<Ue;++Ee)Ke[ve=ce[Ee]]++,ye<ve&&(ye=ve),Je[Ee]=0;for(Ke[0]=0,Ee=1;Ee<=ye;++Ee)Ke[Ee+16]=lt=lt+Ke[Ee-1]<<1;for(Ee=0;Ee<Ue;++Ee)lt=ce[Ee],lt!=0&&(Je[Ee]=Ke[lt+16]++);var ft=0;for(Ee=0;Ee<Ue;++Ee)if(ft=ce[Ee],ft!=0)for(lt=J(Je[Ee],ye)>>ye-ft,Ye=(1<<ye+4-ft)-1;Ye>=0;--Ye)me[lt|Ye<<ft]=ft&15|Ee<<4;return ye}var St=Ve?new Uint16Array(512):nt(512),Nr=Ve?new Uint16Array(32):nt(32);if(!Ve){for(var tr=0;tr<512;++tr)St[tr]=0;for(tr=0;tr<32;++tr)Nr[tr]=0}(function(){for(var ce=[],me=0;me<32;me++)ce.push(5);kt(ce,Nr,32);var ge=[];for(me=0;me<=143;me++)ge.push(8);for(;me<=255;me++)ge.push(9);for(;me<=279;me++)ge.push(7);for(;me<=287;me++)ge.push(8);kt(ge,St,288)})();var qt=function(){for(var me=Ve?new Uint8Array(32768):[],ge=0,ye=0;ge<Se.length-1;++ge)for(;ye<Se[ge+1];++ye)me[ye]=ge;for(;ye<32768;++ye)me[ye]=29;var ve=Ve?new Uint8Array(259):[];for(ge=0,ye=0;ge<K.length-1;++ge)for(;ye<K[ge+1];++ye)ve[ye]=ge;function Ee(lt,Ue){for(var Ke=0;Ke<lt.length;){var Je=Math.min(65535,lt.length-Ke),ft=Ke+Je==lt.length;for(Ue.write_shift(1,+ft),Ue.write_shift(2,Je),Ue.write_shift(2,~Je&65535);Je-- >0;)Ue[Ue.l++]=lt[Ke++]}return Ue.l}function Ye(lt,Ue){for(var Ke=0,Je=0,ft=Ve?new Uint16Array(32768):[];Je<lt.length;){var mt=Math.min(65535,lt.length-Je);if(mt<10){for(Ke=pe(Ue,Ke,+(Je+mt==lt.length)),Ke&7&&(Ke+=8-(Ke&7)),Ue.l=Ke/8|0,Ue.write_shift(2,mt),Ue.write_shift(2,~mt&65535);mt-- >0;)Ue[Ue.l++]=lt[Je++];Ke=Ue.l*8;continue}Ke=pe(Ue,Ke,+(Je+mt==lt.length)+2);for(var bt=0;mt-- >0;){var wt=lt[Je];bt=(bt<<5^wt)&32767;var jt=-1,Pt=0;if((jt=ft[bt])&&(jt|=Je&-32768,jt>Je&&(jt-=32768),jt<Je))for(;lt[jt+Pt]==lt[Je+Pt]&&Pt<250;)++Pt;if(Pt>2){wt=ve[Pt],wt<=22?Ke=ze(Ue,Ke,Le[wt+1]>>1)-1:(ze(Ue,Ke,3),Ke+=5,ze(Ue,Ke,Le[wt-23]>>5),Ke+=3);var it=wt<8?0:wt-4>>2;it>0&&(Pe(Ue,Ke,Pt-K[wt]),Ke+=it),wt=me[Je-jt],Ke=ze(Ue,Ke,Le[wt]>>3),Ke-=3;var _r=wt<4?0:wt-2>>1;_r>0&&(Pe(Ue,Ke,Je-jt-Se[wt]),Ke+=_r);for(var zt=0;zt<Pt;++zt)ft[bt]=Je&32767,bt=(bt<<5^lt[Je])&32767,++Je;mt-=Pt-1}else wt<=143?wt=wt+48:Ke=Ge(Ue,Ke,1),Ke=ze(Ue,Ke,Le[wt]),ft[bt]=Je&32767,++Je}Ke=ze(Ue,Ke,0)-1}return Ue.l=(Ke+7)/8|0,Ue.l}return function(Ue,Ke){return Ue.length<8?Ee(Ue,Ke):Ye(Ue,Ke)}}();function Gt(ce){var me=La(50+Math.floor(ce.length*1.1)),ge=qt(ce,me);return me.slice(0,ge)}var lr=Ve?new Uint16Array(32768):nt(32768),at=Ve?new Uint16Array(32768):nt(32768),yt=Ve?new Uint16Array(128):nt(128),Be=1,Et=1;function Bt(ce,me){var ge=Qe(ce,me)+257;me+=5;var ye=Qe(ce,me)+1;me+=5;var ve=ke(ce,me)+4;me+=4;for(var Ee=0,Ye=Ve?new Uint8Array(19):nt(19),lt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ue=1,Ke=Ve?new Uint8Array(8):nt(8),Je=Ve?new Uint8Array(8):nt(8),ft=Ye.length,mt=0;mt<ve;++mt)Ye[ne[mt]]=Ee=Ie(ce,me),Ue<Ee&&(Ue=Ee),Ke[Ee]++,me+=3;var bt=0;for(Ke[0]=0,mt=1;mt<=Ue;++mt)Je[mt]=bt=bt+Ke[mt-1]<<1;for(mt=0;mt<ft;++mt)(bt=Ye[mt])!=0&&(lt[mt]=Je[bt]++);var wt=0;for(mt=0;mt<ft;++mt)if(wt=Ye[mt],wt!=0){bt=Le[lt[mt]]>>8-wt;for(var jt=(1<<7-wt)-1;jt>=0;--jt)yt[bt|jt<<wt]=wt&7|mt<<3}var Pt=[];for(Ue=1;Pt.length<ge+ye;)switch(bt=yt[_e(ce,me)],me+=bt&7,bt>>>=3){case 16:for(Ee=3+Ne(ce,me),me+=2,bt=Pt[Pt.length-1];Ee-- >0;)Pt.push(bt);break;case 17:for(Ee=3+Ie(ce,me),me+=3;Ee-- >0;)Pt.push(0);break;case 18:for(Ee=11+_e(ce,me),me+=7;Ee-- >0;)Pt.push(0);break;default:Pt.push(bt),Ue<bt&&(Ue=bt);break}var it=Pt.slice(0,ge),_r=Pt.slice(ge);for(mt=ge;mt<286;++mt)it[mt]=0;for(mt=ye;mt<30;++mt)_r[mt]=0;return Be=kt(it,lr,286),Et=kt(_r,at,30),me}function Me(ce,me){if(ce[0]==3&&!(ce[1]&3))return[Sl(me),2];for(var ge=0,ye=0,ve=Yb(me||1<<18),Ee=0,Ye=ve.length>>>0,lt=0,Ue=0;(ye&1)==0;){if(ye=Ie(ce,ge),ge+=3,ye>>>1)ye>>1==1?(lt=9,Ue=5):(ge=Bt(ce,ge),lt=Be,Ue=Et);else{ge&7&&(ge+=8-(ge&7));var Ke=ce[ge>>>3]|ce[(ge>>>3)+1]<<8;if(ge+=32,Ke>0)for(!me&&Ye<Ee+Ke&&(ve=Oe(ve,Ee+Ke),Ye=ve.length);Ke-- >0;)ve[Ee++]=ce[ge>>>3],ge+=8;continue}for(;;){!me&&Ye<Ee+32767&&(ve=Oe(ve,Ee+32767),Ye=ve.length);var Je=ut(ce,ge,lt),ft=ye>>>1==1?St[Je]:lr[Je];if(ge+=ft&15,ft>>>=4,(ft>>>8&255)===0)ve[Ee++]=ft;else{if(ft==256)break;ft-=257;var mt=ft<8?0:ft-4>>2;mt>5&&(mt=0);var bt=Ee+K[ft];mt>0&&(bt+=ut(ce,ge,mt),ge+=mt),Je=ut(ce,ge,Ue),ft=ye>>>1==1?Nr[Je]:at[Je],ge+=ft&15,ft>>>=4;var wt=ft<4?0:ft-2>>1,jt=Se[ft];for(wt>0&&(jt+=ut(ce,ge,wt),ge+=wt),!me&&Ye<bt&&(ve=Oe(ve,bt+100),Ye=ve.length);Ee<bt;)ve[Ee]=ve[Ee-jt],++Ee}}}return me?[ve,ge+7>>>3]:[ve.slice(0,Ee),ge+7>>>3]}function pt(ce,me){var ge=ce.slice(ce.l||0),ye=Me(ge,me);return ce.l+=ye[1],ye[0]}function Vr(ce,me){if(ce)typeof console<"u"&&console.error(me);else throw new Error(me)}function Dt(ce,me){var ge=ce;Za(ge,0);var ye=[],ve=[],Ee={FileIndex:ye,FullPaths:ve};L(Ee,{root:me.root});for(var Ye=ge.length-4;(ge[Ye]!=80||ge[Ye+1]!=75||ge[Ye+2]!=5||ge[Ye+3]!=6)&&Ye>=0;)--Ye;ge.l=Ye+4,ge.l+=4;var lt=ge.read_shift(2);ge.l+=6;var Ue=ge.read_shift(4);for(ge.l=Ue,Ye=0;Ye<lt;++Ye){ge.l+=20;var Ke=ge.read_shift(4),Je=ge.read_shift(4),ft=ge.read_shift(2),mt=ge.read_shift(2),bt=ge.read_shift(2);ge.l+=8;var wt=ge.read_shift(4),jt=h(ge.slice(ge.l+ft,ge.l+ft+mt));ge.l+=ft+mt+bt;var Pt=ge.l;ge.l=wt+4,Yt(ge,Ke,Je,Ee,jt),ge.l=Pt}return Ee}function Yt(ce,me,ge,ye,ve){ce.l+=2;var Ee=ce.read_shift(2),Ye=ce.read_shift(2),lt=f(ce);if(Ee&8257)throw new Error("Unsupported ZIP encryption");for(var Ue=ce.read_shift(4),Ke=ce.read_shift(4),Je=ce.read_shift(4),ft=ce.read_shift(2),mt=ce.read_shift(2),bt="",wt=0;wt<ft;++wt)bt+=String.fromCharCode(ce[ce.l++]);if(mt){var jt=h(ce.slice(ce.l,ce.l+mt));(jt[21589]||{}).mt&&(lt=jt[21589].mt),((ve||{})[21589]||{}).mt&&(lt=ve[21589].mt)}ce.l+=mt;var Pt=ce.slice(ce.l,ce.l+Ke);switch(Ye){case 8:Pt=X(ce,Je);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ye)}var it=!1;Ee&8&&(Ue=ce.read_shift(4),Ue==134695760&&(Ue=ce.read_shift(4),it=!0),Ke=ce.read_shift(4),Je=ce.read_shift(4)),Ke!=me&&Vr(it,"Bad compressed size: "+me+" != "+Ke),Je!=ge&&Vr(it,"Bad uncompressed size: "+ge+" != "+Je),At(ye,bt,Pt,{unsafe:!0,mt:lt})}function sr(ce,me){var ge=me||{},ye=[],ve=[],Ee=La(1),Ye=ge.compression?8:0,lt=0,Ue=0,Ke=0,Je=0,ft=0,mt=ce.FullPaths[0],bt=mt,wt=ce.FileIndex[0],jt=[],Pt=0;for(Ue=1;Ue<ce.FullPaths.length;++Ue)if(bt=ce.FullPaths[Ue].slice(mt.length),wt=ce.FileIndex[Ue],!(!wt.size||!wt.content||bt=="Sh33tJ5")){var it=Je,_r=La(bt.length);for(Ke=0;Ke<bt.length;++Ke)_r.write_shift(1,bt.charCodeAt(Ke)&127);_r=_r.slice(0,_r.l),jt[ft]=KA.buf(wt.content,0);var zt=wt.content;Ye==8&&(zt=se(zt)),Ee=La(30),Ee.write_shift(4,67324752),Ee.write_shift(2,20),Ee.write_shift(2,lt),Ee.write_shift(2,Ye),wt.mt?d(Ee,wt.mt):Ee.write_shift(4,0),Ee.write_shift(-4,jt[ft]),Ee.write_shift(4,zt.length),Ee.write_shift(4,wt.content.length),Ee.write_shift(2,_r.length),Ee.write_shift(2,0),Je+=Ee.length,ye.push(Ee),Je+=_r.length,ye.push(_r),Je+=zt.length,ye.push(zt),Ee=La(46),Ee.write_shift(4,33639248),Ee.write_shift(2,0),Ee.write_shift(2,20),Ee.write_shift(2,lt),Ee.write_shift(2,Ye),Ee.write_shift(4,0),Ee.write_shift(-4,jt[ft]),Ee.write_shift(4,zt.length),Ee.write_shift(4,wt.content.length),Ee.write_shift(2,_r.length),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(4,0),Ee.write_shift(4,it),Pt+=Ee.l,ve.push(Ee),Pt+=_r.length,ve.push(_r),++ft}return Ee=La(22),Ee.write_shift(4,101010256),Ee.write_shift(2,0),Ee.write_shift(2,0),Ee.write_shift(2,ft),Ee.write_shift(2,ft),Ee.write_shift(4,Pt),Ee.write_shift(4,Je),Ee.write_shift(2,0),wl([wl(ye),wl(ve),Ee])}var Ta={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ts(ce,me){if(ce.ctype)return ce.ctype;var ge=ce.name||"",ye=ge.match(/\.([^\.]+)$/);return ye&&Ta[ye[1]]||me&&(ye=(ge=me).match(/[\.\\]([^\.\\])+$/),ye&&Ta[ye[1]])?Ta[ye[1]]:"application/octet-stream"}function $r(ce){for(var me=$b(ce),ge=[],ye=0;ye<me.length;ye+=76)ge.push(me.slice(ye,ye+76));return ge.join(`\r
`)+`\r
`}function zs(ce){var me=ce.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ke){var Je=Ke.charCodeAt(0).toString(16).toUpperCase();return"="+(Je.length==1?"0"+Je:Je)});me=me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),me.charAt(0)==`
`&&(me="=0D"+me.slice(1)),me=me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ge=[],ye=me.split(`\r
`),ve=0;ve<ye.length;++ve){var Ee=ye[ve];if(Ee.length==0){ge.push("");continue}for(var Ye=0;Ye<Ee.length;){var lt=76,Ue=Ee.slice(Ye,Ye+lt);Ue.charAt(lt-1)=="="?lt--:Ue.charAt(lt-2)=="="?lt-=2:Ue.charAt(lt-3)=="="&&(lt-=3),Ue=Ee.slice(Ye,Ye+lt),Ye+=lt,Ye<Ee.length&&(Ue+="="),ge.push(Ue)}}return ge.join(`\r
`)}function Yr(ce){for(var me=[],ge=0;ge<ce.length;++ge){for(var ye=ce[ge];ge<=ce.length&&ye.charAt(ye.length-1)=="=";)ye=ye.slice(0,ye.length-1)+ce[++ge];me.push(ye)}for(var ve=0;ve<me.length;++ve)me[ve]=me[ve].replace(/[=][0-9A-Fa-f]{2}/g,function(Ee){return String.fromCharCode(parseInt(Ee.slice(1),16))});return _n(me.join(`\r
`))}function ps(ce,me,ge){for(var ye="",ve="",Ee="",Ye,lt=0;lt<10;++lt){var Ue=me[lt];if(!Ue||Ue.match(/^\s*$/))break;var Ke=Ue.match(/^(.*?):\s*([^\s].*)$/);if(Ke)switch(Ke[1].toLowerCase()){case"content-location":ye=Ke[2].trim();break;case"content-type":Ee=Ke[2].trim();break;case"content-transfer-encoding":ve=Ke[2].trim();break}}switch(++lt,ve.toLowerCase()){case"base64":Ye=_n(rn(me.slice(lt).join("")));break;case"quoted-printable":Ye=Yr(me.slice(lt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ve)}var Je=At(ce,ye.slice(ge.length),Ye,{unsafe:!0});Ee&&(Je.ctype=Ee)}function bn(ce,me){if(le(ce.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ge=me&&me.root||"",ye=(mr&&Buffer.isBuffer(ce)?ce.toString("binary"):le(ce)).split(`\r
`),ve=0,Ee="";for(ve=0;ve<ye.length;++ve)if(Ee=ye[ve],!!/^Content-Location:/i.test(Ee)&&(Ee=Ee.slice(Ee.indexOf("file")),ge||(ge=Ee.slice(0,Ee.lastIndexOf("/")+1)),Ee.slice(0,ge.length)!=ge))for(;ge.length>0&&(ge=ge.slice(0,ge.length-1),ge=ge.slice(0,ge.lastIndexOf("/")+1),Ee.slice(0,ge.length)!=ge););var Ye=(ye[1]||"").match(/boundary="(.*?)"/);if(!Ye)throw new Error("MAD cannot find boundary");var lt="--"+(Ye[1]||""),Ue=[],Ke=[],Je={FileIndex:Ue,FullPaths:Ke};L(Je);var ft,mt=0;for(ve=0;ve<ye.length;++ve){var bt=ye[ve];bt!==lt&&bt!==lt+"--"||(mt++&&ps(Je,ye.slice(ft,ve),ge),ft=ve)}return Je}function ta(ce,me){var ge=me||{},ye=ge.boundary||"SheetJS";ye="------="+ye;for(var ve=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+ye.slice(2)+'"',"","",""],Ee=ce.FullPaths[0],Ye=Ee,lt=ce.FileIndex[0],Ue=1;Ue<ce.FullPaths.length;++Ue)if(Ye=ce.FullPaths[Ue].slice(Ee.length),lt=ce.FileIndex[Ue],!(!lt.size||!lt.content||Ye=="Sh33tJ5")){Ye=Ye.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Pt){return"_x"+Pt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Pt){return"_u"+Pt.charCodeAt(0).toString(16)+"_"});for(var Ke=lt.content,Je=mr&&Buffer.isBuffer(Ke)?Ke.toString("binary"):le(Ke),ft=0,mt=Math.min(1024,Je.length),bt=0,wt=0;wt<=mt;++wt)(bt=Je.charCodeAt(wt))>=32&&bt<128&&++ft;var jt=ft>=mt*4/5;ve.push(ye),ve.push("Content-Location: "+(ge.root||"file:///C:/SheetJS/")+Ye),ve.push("Content-Transfer-Encoding: "+(jt?"quoted-printable":"base64")),ve.push("Content-Type: "+Ts(lt,Ye)),ve.push(""),ve.push(jt?zs(Je):$r(Je))}return ve.push(ye+`--\r
`),ve.join(`\r
`)}function la(ce){var me={};return L(me,ce),me}function At(ce,me,ge,ye){var ve=ye&&ye.unsafe;ve||L(ce);var Ee=!ve&&br.find(ce,me);if(!Ee){var Ye=ce.FullPaths[0];me.slice(0,Ye.length)==Ye?Ye=me:(Ye.slice(-1)!="/"&&(Ye+="/"),Ye=(Ye+me).replace("//","/")),Ee={name:l(me),type:2},ce.FileIndex.push(Ee),ce.FullPaths.push(Ye),ve||br.utils.cfb_gc(ce)}return Ee.content=ge,Ee.size=ge?ge.length:0,ye&&(ye.CLSID&&(Ee.clsid=ye.CLSID),ye.mt&&(Ee.mt=ye.mt),ye.ct&&(Ee.ct=ye.ct)),Ee}function ra(ce,me){L(ce);var ge=br.find(ce,me);if(ge){for(var ye=0;ye<ce.FileIndex.length;++ye)if(ce.FileIndex[ye]==ge)return ce.FileIndex.splice(ye,1),ce.FullPaths.splice(ye,1),!0}return!1}function Tr(ce,me,ge){L(ce);var ye=br.find(ce,me);if(ye){for(var ve=0;ve<ce.FileIndex.length;++ve)if(ce.FileIndex[ve]==ye)return ce.FileIndex[ve].name=l(ge),ce.FullPaths[ve]=ge,!0}return!1}function Us(ce){U(ce,!0)}return a.find=ae,a.read=z,a.parse=w,a.write=oe,a.writeFile=Ce,a.utils={cfb_new:la,cfb_add:At,cfb_del:ra,cfb_mov:Tr,cfb_gc:Us,ReadShift:A0,CheckField:Yw,prep_blob:Za,bconcat:wl,use_zlib:Q,_deflateRaw:Gt,_inflateRaw:pt,consts:xe},a}();function ZA(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);a.open("r"),a.encoding="binary";var r=a.read();return a.close(),r}catch(i){if(!i.message||!i.message.match(/onstruct/))throw i}throw new Error("Cannot access file "+t)}function ni(t){for(var a=Object.keys(t),r=[],i=0;i<a.length;++i)Object.prototype.hasOwnProperty.call(t,a[i])&&r.push(a[i]);return r}function og(t){for(var a=[],r=ni(t),i=0;i!==r.length;++i)a[t[r[i]]]=r[i];return a}var Ju=new Date(1899,11,30,0,0,0);function Ss(t,a){var r=t.getTime(),i=Ju.getTime()+(t.getTimezoneOffset()-Ju.getTimezoneOffset())*6e4;return(r-i)/(1440*60*1e3)}var _w=new Date,QA=Ju.getTime()+(_w.getTimezoneOffset()-Ju.getTimezoneOffset())*6e4,r2=_w.getTimezoneOffset();function Nf(t){var a=new Date;return a.setTime(t*24*60*60*1e3+QA),a.getTimezoneOffset()!==r2&&a.setTime(a.getTime()+(a.getTimezoneOffset()-r2)*6e4),a}function JA(t){var a=0,r=0,i=!1,l=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!l)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var d=1;d!=l.length;++d)if(l[d]){switch(r=1,d>3&&(i=!0),l[d].slice(l[d].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+l[d].slice(l[d].length-1));case"D":r*=24;case"H":r*=60;case"M":if(i)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}a+=r*parseInt(l[d],10)}return a}var a2=new Date("2017-02-19T19:06:09.000Z"),Aw=isNaN(a2.getFullYear())?new Date("2/19/17"):a2,eS=Aw.getFullYear()==2017;function Xa(t,a){var r=new Date(t);if(eS)return a>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):a<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Aw.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return t.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var l=t.match(/\d+/g)||["2017","2","19","0","0","0"],d=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return t.indexOf("Z")>-1&&(d=new Date(d.getTime()-d.getTimezoneOffset()*60*1e3)),d}function mo(t,a){if(mr&&Buffer.isBuffer(t)){if(a){if(t[0]==255&&t[1]==254)return _0(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return _0(hw(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(a){if(t[0]==255&&t[1]==254)return _0(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return _0(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(d){return r[d]||d})}catch{}for(var i=[],l=0;l!=t.length;++l)i.push(String.fromCharCode(t[l]));return i.join("")}function Ja(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=Ja(t[r]));return a}function fa(t,a){for(var r="";r.length<a;)r+=t;return r}function Dn(t){var a=Number(t);if(!isNaN(a))return isFinite(a)?a:NaN;if(!/\d/.test(t))return a;var r=1,i=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(a=Number(i))||(i=i.replace(/[(](.*)[)]/,function(l,d){return r=-r,d}),!isNaN(a=Number(i)))?a/r:a}var tS=["january","february","march","april","may","june","july","august","september","october","november","december"];function bc(t){var a=new Date(t),r=new Date(NaN),i=a.getYear(),l=a.getMonth(),d=a.getDate();if(isNaN(d))return r;var f=t.toLowerCase();if(f.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(f=f.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),f.length>3&&tS.indexOf(f)==-1)return r}else if(f.match(/[a-z]/))return r;return i<0||i>8099?r:(l>0||d>1)&&i!=101?a:t.match(/[^-0-9:,\/\\]/)?r:a}var rS=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,i,l){if(t||typeof i=="string")return r.split(i);for(var d=r.split(i),f=[d[0]],h=1;h<d.length;++h)f.push(l),f.push(d[h]);return f}}();function Sw(t){return t?t.content&&t.type?mo(t.content,!0):t.data?j0(t.data):t.asNodeBuffer&&mr?j0(t.asNodeBuffer().toString("binary")):t.asBinary?j0(t.asBinary()):t._data&&t._data.getContent?j0(mo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Tw(t){if(!t)return null;if(t.data)return Xb(t.data);if(t.asNodeBuffer&&mr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var a=t._data.getContent();return typeof a=="string"?Xb(a):Array.prototype.slice.call(a)}return t.content&&t.type?t.content:null}function aS(t){return t&&t.name.slice(-4)===".bin"?Tw(t):Sw(t)}function hn(t,a){for(var r=t.FullPaths||ni(t.files),i=a.toLowerCase().replace(/[\/]/g,"\\"),l=i.replace(/\\/g,"/"),d=0;d<r.length;++d){var f=r[d].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==f||l==f)return t.files?t.files[r[d]]:t.FileIndex[d]}return null}function cg(t,a){var r=hn(t,a);if(r==null)throw new Error("Cannot find file "+a+" in zip");return r}function _a(t,a,r){if(!r)return aS(cg(t,a));if(!a)return null;try{return _a(t,a)}catch{return null}}function Js(t,a,r){if(!r)return Sw(cg(t,a));if(!a)return null;try{return Js(t,a)}catch{return null}}function sS(t,a,r){return Tw(cg(t,a))}function s2(t){for(var a=t.FullPaths||ni(t.files),r=[],i=0;i<a.length;++i)a[i].slice(-1)!="/"&&r.push(a[i].replace(/^Root Entry[\/]/,""));return r.sort()}function nS(t,a,r){if(t.FullPaths){if(typeof r=="string"){var i;return mr?i=vo(r):i=jA(r),br.utils.cfb_add(t,a,i)}br.utils.cfb_add(t,a,r)}else t.file(a,r)}function Dw(t,a){switch(a.type){case"base64":return br.read(t,{type:"base64"});case"binary":return br.read(t,{type:"binary"});case"buffer":case"array":return br.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+a.type)}function E0(t,a){if(t.charAt(0)=="/")return t.slice(1);var r=a.split("/");a.slice(-1)!="/"&&r.pop();for(var i=t.split("/");i.length!==0;){var l=i.shift();l===".."?r.pop():l!=="."&&r.push(l)}return r.join("/")}var Rw=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,iS=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,n2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,lS=/<[^>]*>/g,gs=Rw.match(n2)?n2:lS,oS=/<\w*:/,cS=/<(\/?)\w+:/;function Vt(t,a,r){for(var i={},l=0,d=0;l!==t.length&&!((d=t.charCodeAt(l))===32||d===10||d===13);++l);if(a||(i[0]=t.slice(0,l)),l===t.length)return i;var f=t.match(iS),h=0,b="",p=0,w="",j="",E=1;if(f)for(p=0;p!=f.length;++p){for(j=f[p],d=0;d!=j.length&&j.charCodeAt(d)!==61;++d);for(w=j.slice(0,d).trim();j.charCodeAt(d+1)==32;)++d;for(E=(l=j.charCodeAt(d+1))==34||l==39?1:0,b=j.slice(d+1+E,j.length-E),h=0;h!=w.length&&w.charCodeAt(h)!==58;++h);if(h===w.length)w.indexOf("_")>0&&(w=w.slice(0,w.indexOf("_"))),i[w]=b,i[w.toLowerCase()]=b;else{var _=(h===5&&w.slice(0,5)==="xmlns"?"xmlns":"")+w.slice(h+1);if(i[_]&&w.slice(h-3,h)=="ext")continue;i[_]=b,i[_.toLowerCase()]=b}}return i}function oi(t){return t.replace(cS,"<$1")}var Ow={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},dS=og(Ow),kr=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,a=/_x([\da-fA-F]{4})_/ig;return function r(i){var l=i+"",d=l.indexOf("<![CDATA[");if(d==-1)return l.replace(t,function(h,b){return Ow[h]||String.fromCharCode(parseInt(b,h.indexOf("x")>-1?16:10))||h}).replace(a,function(h,b){return String.fromCharCode(parseInt(b,16))});var f=l.indexOf("]]>");return r(l.slice(0,d))+l.slice(d+9,f)+r(l.slice(f+3))}}(),uS=/[&<>'"]/g,fS=/[\u0000-\u001f]/g;function dg(t){var a=t+"";return a.replace(uS,function(r){return dS[r]}).replace(/\n/g,"<br/>").replace(fS,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var i2=function(){var t=/&#(\d+);/g;function a(r,i){return String.fromCharCode(parseInt(i,10))}return function(i){return i.replace(t,a)}}();function ea(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function rm(t){for(var a="",r=0,i=0,l=0,d=0,f=0,h=0;r<t.length;){if(i=t.charCodeAt(r++),i<128){a+=String.fromCharCode(i);continue}if(l=t.charCodeAt(r++),i>191&&i<224){f=(i&31)<<6,f|=l&63,a+=String.fromCharCode(f);continue}if(d=t.charCodeAt(r++),i<240){a+=String.fromCharCode((i&15)<<12|(l&63)<<6|d&63);continue}f=t.charCodeAt(r++),h=((i&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536,a+=String.fromCharCode(55296+(h>>>10&1023)),a+=String.fromCharCode(56320+(h&1023))}return a}function l2(t){var a=Sl(2*t.length),r,i,l=1,d=0,f=0,h;for(i=0;i<t.length;i+=l)l=1,(h=t.charCodeAt(i))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(i+1)&63),l=2):h<240?(r=(h&15)*4096+(t.charCodeAt(i+1)&63)*64+(t.charCodeAt(i+2)&63),l=3):(l=4,r=(h&7)*262144+(t.charCodeAt(i+1)&63)*4096+(t.charCodeAt(i+2)&63)*64+(t.charCodeAt(i+3)&63),r-=65536,f=55296+(r>>>10&1023),r=56320+(r&1023)),f!==0&&(a[d++]=f&255,a[d++]=f>>>8,f=0),a[d++]=r%256,a[d++]=r>>>8;return a.slice(0,d).toString("ucs2")}function o2(t){return vo(t,"binary").toString("utf8")}var Eu="foo bar baz",Xr=mr&&(o2(Eu)==rm(Eu)&&o2||l2(Eu)==rm(Eu)&&l2)||rm,_0=mr?function(t){return vo(t,"utf8").toString("binary")}:function(t){for(var a=[],r=0,i=0,l=0;r<t.length;)switch(i=t.charCodeAt(r++),!0){case i<128:a.push(String.fromCharCode(i));break;case i<2048:a.push(String.fromCharCode(192+(i>>6))),a.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,l=t.charCodeAt(r++)-56320+(i<<10),a.push(String.fromCharCode(240+(l>>18&7))),a.push(String.fromCharCode(144+(l>>12&63))),a.push(String.fromCharCode(128+(l>>6&63))),a.push(String.fromCharCode(128+(l&63)));break;default:a.push(String.fromCharCode(224+(i>>12))),a.push(String.fromCharCode(128+(i>>6&63))),a.push(String.fromCharCode(128+(i&63)))}return a.join("")},q0=function(){var t={};return function(r,i){var l=r+"|"+(i||"");return t[l]?t[l]:t[l]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",i||"")}}(),Iw=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(a){return[new RegExp("&"+a[0]+";","ig"),a[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<t.length;++l)i=i.replace(t[l][0],t[l][1]);return i}}(),xS=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),hS=/<\/?(?:vt:)?variant>/g,mS=/<(?:vt:)([^>]*)>([\s\S]*)</;function c2(t,a){var r=Vt(t),i=t.match(xS(r.baseType))||[],l=[];if(i.length!=r.size){if(a.WTF)throw new Error("unexpected vector length "+i.length+" != "+r.size);return l}return i.forEach(function(d){var f=d.replace(hS,"").match(mS);f&&l.push({v:Xr(f[2]),t:f[1]})}),l}var gS=/(^\s|\s$|\n)/;function pS(t){return ni(t).map(function(a){return" "+a+'="'+t[a]+'"'}).join("")}function yS(t,a,r){return"<"+t+(r!=null?pS(r):"")+(a!=null?(a.match(gS)?' xml:space="preserve"':"")+">"+a+"</"+t:"/")+">"}function ug(t){if(mr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Xr(wo(ng(t)));throw new Error("Bad input format: expected Buffer or string")}var $0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,bS={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},vS=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function wS(t,a){for(var r=1-2*(t[a+7]>>>7),i=((t[a+7]&127)<<4)+(t[a+6]>>>4&15),l=t[a+6]&15,d=5;d>=0;--d)l=l*256+t[a+d];return i==2047?l==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,l+=Math.pow(2,52)),r*Math.pow(2,i-52)*l)}function NS(t,a,r){var i=(a<0||1/a==-1/0?1:0)<<7,l=0,d=0,f=i?-a:a;isFinite(f)?f==0?l=d=0:(l=Math.floor(Math.log(f)/Math.LN2),d=f*Math.pow(2,52-l),l<=-1023&&(!isFinite(d)||d<Math.pow(2,52))?l=-1022:(d-=Math.pow(2,52),l+=1023)):(l=2047,d=isNaN(a)?26985:0);for(var h=0;h<=5;++h,d/=256)t[r+h]=d&255;t[r+6]=(l&15)<<4|d&15,t[r+7]=l>>4|i}var d2=function(t){for(var a=[],r=10240,i=0;i<t[0].length;++i)if(t[0][i])for(var l=0,d=t[0][i].length;l<d;l+=r)a.push.apply(a,t[0][i].slice(l,l+r));return a},u2=mr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(a){return Buffer.isBuffer(a)?a:vo(a)})):d2(t)}:d2,f2=function(t,a,r){for(var i=[],l=a;l<r;l+=2)i.push(String.fromCharCode(Si(t,l)));return i.join("").replace(Es,"")},fg=mr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("utf16le",a,r).replace(Es,""):f2(t,a,r)}:f2,x2=function(t,a,r){for(var i=[],l=a;l<a+r;++l)i.push(("0"+t[l].toString(16)).slice(-2));return i.join("")},Fw=mr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("hex",a,a+r):x2(t,a,r)}:x2,h2=function(t,a,r){for(var i=[],l=a;l<r;l++)i.push(String.fromCharCode(uc(t,l)));return i.join("")},dd=mr?function(a,r,i){return Buffer.isBuffer(a)?a.toString("utf8",r,i):h2(a,r,i)}:h2,Mw=function(t,a){var r=Qs(t,a);return r>0?dd(t,a+4,a+4+r-1):""},Bw=Mw,Lw=function(t,a){var r=Qs(t,a);return r>0?dd(t,a+4,a+4+r-1):""},Pw=Lw,zw=function(t,a){var r=2*Qs(t,a);return r>0?dd(t,a+4,a+4+r-1):""},Uw=zw,Hw=function(a,r){var i=Qs(a,r);return i>0?fg(a,r+4,r+4+i):""},Vw=Hw,Gw=function(t,a){var r=Qs(t,a);return r>0?dd(t,a+4,a+4+r):""},Xw=Gw,qw=function(t,a){return wS(t,a)},ef=qw,$w=function(a){return Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array};mr&&(Bw=function(a,r){if(!Buffer.isBuffer(a))return Mw(a,r);var i=a.readUInt32LE(r);return i>0?a.toString("utf8",r+4,r+4+i-1):""},Pw=function(a,r){if(!Buffer.isBuffer(a))return Lw(a,r);var i=a.readUInt32LE(r);return i>0?a.toString("utf8",r+4,r+4+i-1):""},Uw=function(a,r){if(!Buffer.isBuffer(a))return zw(a,r);var i=2*a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+i-1)},Vw=function(a,r){if(!Buffer.isBuffer(a))return Hw(a,r);var i=a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+i)},Xw=function(a,r){if(!Buffer.isBuffer(a))return Gw(a,r);var i=a.readUInt32LE(r);return a.toString("utf8",r+4,r+4+i)},ef=function(a,r){return Buffer.isBuffer(a)?a.readDoubleLE(r):qw(a,r)},$w=function(a){return Buffer.isBuffer(a)||Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array});var uc=function(t,a){return t[a]},Si=function(t,a){return t[a+1]*256+t[a]},kS=function(t,a){var r=t[a+1]*256+t[a];return r<32768?r:(65535-r+1)*-1},Qs=function(t,a){return t[a+3]*(1<<24)+(t[a+2]<<16)+(t[a+1]<<8)+t[a]},to=function(t,a){return t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a]},jS=function(t,a){return t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]};function A0(t,a){var r="",i,l,d=[],f,h,b,p;switch(a){case"dbcs":if(p=this.l,mr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(b=0;b<t;++b)r+=String.fromCharCode(Si(this,p)),p+=2;t*=2;break;case"utf8":r=dd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=fg(this,this.l,this.l+t);break;case"wstr":return A0.call(this,t,"dbcs");case"lpstr-ansi":r=Bw(this,this.l),t=4+Qs(this,this.l);break;case"lpstr-cp":r=Pw(this,this.l),t=4+Qs(this,this.l);break;case"lpwstr":r=Uw(this,this.l),t=4+2*Qs(this,this.l);break;case"lpp4":t=4+Qs(this,this.l),r=Vw(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Qs(this,this.l),r=Xw(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(f=uc(this,this.l+t++))!==0;)d.push(Cu(f));r=d.join("");break;case"_wstr":for(t=0,r="";(f=Si(this,this.l+t))!==0;)d.push(Cu(f)),t+=2;t+=2,r=d.join("");break;case"dbcs-cont":for(r="",p=this.l,b=0;b<t;++b){if(this.lens&&this.lens.indexOf(p)!==-1)return f=uc(this,p),this.l=p+1,h=A0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(Cu(Si(this,p))),p+=2}r=d.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",p=this.l,b=0;b!=t;++b){if(this.lens&&this.lens.indexOf(p)!==-1)return f=uc(this,p),this.l=p+1,h=A0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(Cu(uc(this,p))),p+=1}r=d.join("");break;default:switch(t){case 1:return i=uc(this,this.l),this.l++,i;case 2:return i=(a==="i"?kS:Si)(this,this.l),this.l+=2,i;case 4:case-4:return a==="i"||(this[this.l+3]&128)===0?(i=(t>0?to:jS)(this,this.l),this.l+=4,i):(l=Qs(this,this.l),this.l+=4,l);case 8:case-8:if(a==="f")return t==8?l=ef(this,this.l):l=ef([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;t=8;case 16:r=Fw(this,this.l,t);break}}return this.l+=t,r}var CS=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255,t[r+2]=a>>>16&255,t[r+3]=a>>>24&255},ES=function(t,a,r){t[r]=a&255,t[r+1]=a>>8&255,t[r+2]=a>>16&255,t[r+3]=a>>24&255},_S=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255};function AS(t,a,r){var i=0,l=0;if(r==="dbcs"){for(l=0;l!=a.length;++l)_S(this,a.charCodeAt(l),this.l+2*l);i=2*a.length}else if(r==="sbcs"){for(a=a.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=a.length;++l)this[this.l+l]=a.charCodeAt(l)&255;i=a.length}else if(r==="hex"){for(;l<t;++l)this[this.l++]=parseInt(a.slice(2*l,2*l+2),16)||0;return this}else if(r==="utf16le"){var d=Math.min(this.l+t,this.length);for(l=0;l<Math.min(a.length,t);++l){var f=a.charCodeAt(l);this[this.l++]=f&255,this[this.l++]=f>>8}for(;this.l<d;)this[this.l++]=0;return this}else switch(t){case 1:i=1,this[this.l]=a&255;break;case 2:i=2,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255;break;case 3:i=3,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255,a>>>=8,this[this.l+2]=a&255;break;case 4:i=4,CS(this,a,this.l);break;case 8:if(i=8,r==="f"){NS(this,a,this.l);break}case 16:break;case-4:i=4,ES(this,a,this.l);break}return this.l+=i,this}function Yw(t,a){var r=Fw(this,this.l,t.length>>1);if(r!==t)throw new Error(a+"Expected "+t+" saw "+r);this.l+=t.length>>1}function Za(t,a){t.l=a,t.read_shift=A0,t.chk=Yw,t.write_shift=AS}function ms(t,a){t.l+=a}function La(t){var a=Sl(t);return Za(a,0),a}function zi(t,a,r){if(t){var i,l,d;Za(t,t.l||0);for(var f=t.length,h=0,b=0;t.l<f;){h=t.read_shift(1),h&128&&(h=(h&127)+((t.read_shift(1)&127)<<7));var p=lf[h]||lf[65535];for(i=t.read_shift(1),d=i&127,l=1;l<4&&i&128;++l)d+=((i=t.read_shift(1))&127)<<7*l;b=t.l+d;var w=p.f&&p.f(t,d,r);if(t.l=b,a(w,p,h))return}}}function Om(){var t=[],a=mr?256:2048,r=function(p){var w=La(p);return Za(w,0),w},i=r(a),l=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&t.push(i),i=null)},d=function(p){return i&&p<i.length-i.l?i:(l(),i=r(Math.max(p+1,a)))},f=function(){return l(),wl(t)},h=function(p){l(),i=p,i.l==null&&(i.l=i.length),d(a)};return{next:d,push:h,end:f,_bufs:t}}function S0(t,a,r){var i=Ja(t);if(a.s?(i.cRel&&(i.c+=a.s.c),i.rRel&&(i.r+=a.s.r)):(i.cRel&&(i.c+=a.c),i.rRel&&(i.r+=a.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function m2(t,a,r){var i=Ja(t);return i.s=S0(i.s,a.s,r),i.e=S0(i.e,a.s,r),i}function T0(t,a){if(t.cRel&&t.c<0)for(t=Ja(t);t.c<0;)t.c+=a>8?16384:256;if(t.rRel&&t.r<0)for(t=Ja(t);t.r<0;)t.r+=a>8?1048576:a>5?65536:16384;var r=Zt(t);return!t.cRel&&t.cRel!=null&&(r=DS(r)),!t.rRel&&t.rRel!=null&&(r=SS(r)),r}function am(t,a){return t.s.r==0&&!t.s.rRel&&t.e.r==(a.biff>=12?1048575:a.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Pa(t.s.c)+":"+(t.e.cRel?"":"$")+Pa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(a.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+es(t.s.r)+":"+(t.e.rRel?"":"$")+es(t.e.r):T0(t.s,a.biff)+":"+T0(t.e,a.biff)}function xg(t){return parseInt(TS(t),10)-1}function es(t){return""+(t+1)}function SS(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function TS(t){return t.replace(/\$(\d+)$/,"$1")}function hg(t){for(var a=RS(t),r=0,i=0;i!==a.length;++i)r=26*r+a.charCodeAt(i)-64;return r-1}function Pa(t){if(t<0)throw new Error("invalid column "+t);var a="";for(++t;t;t=Math.floor((t-1)/26))a=String.fromCharCode((t-1)%26+65)+a;return a}function DS(t){return t.replace(/^([A-Z])/,"$$$1")}function RS(t){return t.replace(/^\$([A-Z])/,"$1")}function OS(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Cs(t){for(var a=0,r=0,i=0;i<t.length;++i){var l=t.charCodeAt(i);l>=48&&l<=57?a=10*a+(l-48):l>=65&&l<=90&&(r=26*r+(l-64))}return{c:r-1,r:a-1}}function Zt(t){for(var a=t.c+1,r="";a;a=(a-1)/26|0)r=String.fromCharCode((a-1)%26+65)+r;return r+(t.r+1)}function _c(t){var a=t.indexOf(":");return a==-1?{s:Cs(t),e:Cs(t)}:{s:Cs(t.slice(0,a)),e:Cs(t.slice(a+1))}}function vr(t,a){return typeof a>"u"||typeof a=="number"?vr(t.s,t.e):(typeof t!="string"&&(t=Zt(t)),typeof a!="string"&&(a=Zt(a)),t==a?t:t+":"+a)}function ma(t){var a={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,l=0,d=t.length;for(r=0;i<d&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(a.s.c=--r,r=0;i<d&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;if(a.s.r=--r,i===d||l!=10)return a.e.c=a.s.c,a.e.r=a.s.r,a;for(++i,r=0;i!=d&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(a.e.c=--r,r=0;i!=d&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;return a.e.r=--r,a}function g2(t,a){var r=t.t=="d"&&a instanceof Date;if(t.z!=null)try{return t.w=gn(t.z,r?Ss(a):a)}catch{}try{return t.w=gn((t.XF||{}).numFmtId||(r?14:0),r?Ss(a):a)}catch{return""+a}}function Pi(t,a,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?jo[t.v]||t.v:a==null?g2(t,t.v):g2(t,a))}function Rl(t,a){var r=a&&a.sheet?a.sheet:"Sheet1",i={};return i[r]=t,{SheetNames:[r],Sheets:i}}function Ww(t,a,r){var i=r||{},l=t?Array.isArray(t):i.dense,d=t||(l?[]:{}),f=0,h=0;if(d&&i.origin!=null){if(typeof i.origin=="number")f=i.origin;else{var b=typeof i.origin=="string"?Cs(i.origin):i.origin;f=b.r,h=b.c}d["!ref"]||(d["!ref"]="A1:A1")}var p={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(d["!ref"]){var w=ma(d["!ref"]);p.s.c=w.s.c,p.s.r=w.s.r,p.e.c=Math.max(p.e.c,w.e.c),p.e.r=Math.max(p.e.r,w.e.r),f==-1&&(p.e.r=f=w.e.r+1)}for(var j=0;j!=a.length;++j)if(a[j]){if(!Array.isArray(a[j]))throw new Error("aoa_to_sheet expects an array of arrays");for(var E=0;E!=a[j].length;++E)if(!(typeof a[j][E]>"u")){var _={v:a[j][E]},T=f+j,A=h+E;if(p.s.r>T&&(p.s.r=T),p.s.c>A&&(p.s.c=A),p.e.r<T&&(p.e.r=T),p.e.c<A&&(p.e.c=A),a[j][E]&&typeof a[j][E]=="object"&&!Array.isArray(a[j][E])&&!(a[j][E]instanceof Date))_=a[j][E];else if(Array.isArray(_.v)&&(_.f=a[j][E][1],_.v=_.v[0]),_.v===null)if(_.f)_.t="n";else if(i.nullError)_.t="e",_.v=0;else if(i.sheetStubs)_.t="z";else continue;else typeof _.v=="number"?_.t="n":typeof _.v=="boolean"?_.t="b":_.v instanceof Date?(_.z=i.dateNF||rr[14],i.cellDates?(_.t="d",_.w=gn(_.z,Ss(_.v))):(_.t="n",_.v=Ss(_.v),_.w=gn(_.z,_.v))):_.t="s";if(l)d[T]||(d[T]=[]),d[T][A]&&d[T][A].z&&(_.z=d[T][A].z),d[T][A]=_;else{var I=Zt({c:A,r:T});d[I]&&d[I].z&&(_.z=d[I].z),d[I]=_}}}return p.s.c<1e7&&(d["!ref"]=vr(p)),d}function Ac(t,a){return Ww(null,t,a)}function IS(t){return t.read_shift(4,"i")}function hs(t){var a=t.read_shift(4);return a===0?"":t.read_shift(a,"dbcs")}function FS(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function mg(t,a){var r=t.l,i=t.read_shift(1),l=hs(t),d=[],f={t:l,h:l};if((i&1)!==0){for(var h=t.read_shift(4),b=0;b!=h;++b)d.push(FS(t));f.r=d}else f.r=[{ich:0,ifnt:0}];return t.l=r+a,f}var MS=mg;function yn(t){var a=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:a,iStyleRef:r}}function No(t){var a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:a}}var BS=hs;function gg(t){var a=t.read_shift(4);return a===0||a===4294967295?"":t.read_shift(a,"dbcs")}var LS=hs,Im=gg;function pg(t){var a=t.slice(t.l,t.l+4),r=a[0]&1,i=a[0]&2;t.l+=4;var l=i===0?ef([0,0,0,0,a[0]&252,a[1],a[2],a[3]],0):to(a,0)>>2;return r?l/100:l}function Kw(t){var a={s:{},e:{}};return a.s.r=t.read_shift(4),a.e.r=t.read_shift(4),a.s.c=t.read_shift(4),a.e.c=t.read_shift(4),a}var ko=Kw;function fs(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function PS(t){var a={},r=t.read_shift(1),i=r>>>1,l=t.read_shift(1),d=t.read_shift(2,"i"),f=t.read_shift(1),h=t.read_shift(1),b=t.read_shift(1);switch(t.l++,i){case 0:a.auto=1;break;case 1:a.index=l;var p=oo[l];p&&(a.rgb=W0(p));break;case 2:a.rgb=W0([f,h,b]);break;case 3:a.theme=l;break}return d!=0&&(a.tint=d>0?d/32767:d/32768),a}function zS(t){var a=t.read_shift(1);t.l++;var r={fBold:a&1,fItalic:a&2,fUnderline:a&4,fStrikeout:a&8,fOutline:a&16,fShadow:a&32,fCondense:a&64,fExtend:a&128};return r}function Zw(t,a){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},i=t.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return t.l-=4,t.read_shift(0,a==1?"lpstr":"lpwstr")}function US(t){return Zw(t,1)}function HS(t){return Zw(t,2)}var yg=2,Ms=3,_u=11,p2=12,tf=19,Au=64,VS=65,GS=71,XS=4108,qS=4126,Ga=80,Qw=81,$S=[Ga,Qw],YS={1:{n:"CodePage",t:yg},2:{n:"Category",t:Ga},3:{n:"PresentationFormat",t:Ga},4:{n:"ByteCount",t:Ms},5:{n:"LineCount",t:Ms},6:{n:"ParagraphCount",t:Ms},7:{n:"SlideCount",t:Ms},8:{n:"NoteCount",t:Ms},9:{n:"HiddenCount",t:Ms},10:{n:"MultimediaClipCount",t:Ms},11:{n:"ScaleCrop",t:_u},12:{n:"HeadingPairs",t:XS},13:{n:"TitlesOfParts",t:qS},14:{n:"Manager",t:Ga},15:{n:"Company",t:Ga},16:{n:"LinksUpToDate",t:_u},17:{n:"CharacterCount",t:Ms},19:{n:"SharedDoc",t:_u},22:{n:"HyperlinksChanged",t:_u},23:{n:"AppVersion",t:Ms,p:"version"},24:{n:"DigSig",t:VS},26:{n:"ContentType",t:Ga},27:{n:"ContentStatus",t:Ga},28:{n:"Language",t:Ga},29:{n:"Version",t:Ga},255:{},2147483648:{n:"Locale",t:tf},2147483651:{n:"Behavior",t:tf},1919054434:{}},WS={1:{n:"CodePage",t:yg},2:{n:"Title",t:Ga},3:{n:"Subject",t:Ga},4:{n:"Author",t:Ga},5:{n:"Keywords",t:Ga},6:{n:"Comments",t:Ga},7:{n:"Template",t:Ga},8:{n:"LastAuthor",t:Ga},9:{n:"RevNumber",t:Ga},10:{n:"EditTime",t:Au},11:{n:"LastPrinted",t:Au},12:{n:"CreatedDate",t:Au},13:{n:"ModifiedDate",t:Au},14:{n:"PageCount",t:Ms},15:{n:"WordCount",t:Ms},16:{n:"CharCount",t:Ms},17:{n:"Thumbnail",t:GS},18:{n:"Application",t:Ga},19:{n:"DocSecurity",t:Ms},255:{},2147483648:{n:"Locale",t:tf},2147483651:{n:"Behavior",t:tf},1919054434:{}},y2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},KS=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ZS(t){return t.map(function(a){return[a>>16&255,a>>8&255,a&255]})}var QS=ZS([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),oo=Ja(QS),jo={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Jw={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},b2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function JS(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function e5(t){var a=JS();if(!t||!t.match)return a;var r={};if((t.match(gs)||[]).forEach(function(i){var l=Vt(i);switch(l[0].replace(oS,"<")){case"<?xml":break;case"<Types":a.xmlns=l["xmlns"+(l[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[l.Extension]=l.ContentType;break;case"<Override":a[b2[l.ContentType]]!==void 0&&a[b2[l.ContentType]].push(l.PartName);break}}),a.xmlns!==bS.CT)throw new Error("Unknown Namespace: "+a.xmlns);return a.calcchain=a.calcchains.length>0?a.calcchains[0]:"",a.sst=a.strs.length>0?a.strs[0]:"",a.style=a.styles.length>0?a.styles[0]:"",a.defaults=r,delete a.calcchains,a}var xc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Fm(t){var a=t.lastIndexOf("/");return t.slice(0,a+1)+"_rels/"+t.slice(a+1)+".rels"}function D0(t,a){var r={"!id":{}};if(!t)return r;a.charAt(0)!=="/"&&(a="/"+a);var i={};return(t.match(gs)||[]).forEach(function(l){var d=Vt(l);if(d[0]==="<Relationship"){var f={};f.Type=d.Type,f.Target=d.Target,f.Id=d.Id,d.TargetMode&&(f.TargetMode=d.TargetMode);var h=d.TargetMode==="External"?d.Target:E0(d.Target,a);r[h]=f,i[d.Id]=f}}),r["!id"]=i,r}var t5="application/vnd.oasis.opendocument.spreadsheet";function r5(t,a){for(var r=ug(t),i,l;i=$0.exec(r);)switch(i[3]){case"manifest":break;case"file-entry":if(l=Vt(i[0],!1),l.path=="/"&&l.type!==t5)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(a&&a.WTF)throw i}}var R0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],a5=function(){for(var t=new Array(R0.length),a=0;a<R0.length;++a){var r=R0[a],i="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[a]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return t}();function e4(t){var a={};t=Xr(t);for(var r=0;r<R0.length;++r){var i=R0[r],l=t.match(a5[r]);l!=null&&l.length>0&&(a[i[1]]=kr(l[1])),i[2]==="date"&&a[i[1]]&&(a[i[1]]=Xa(a[i[1]]))}return a}var s5=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function t4(t,a,r,i){var l=[];if(typeof t=="string")l=c2(t,i);else for(var d=0;d<t.length;++d)l=l.concat(t[d].map(function(w){return{v:w}}));var f=typeof a=="string"?c2(a,i).map(function(w){return w.v}):a,h=0,b=0;if(f.length>0)for(var p=0;p!==l.length;p+=2){switch(b=+l[p+1].v,l[p].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=b,r.SheetNames=f.slice(h,h+b);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=b,r.DefinedNames=f.slice(h,h+b);break;case"Charts":case"Diagramme":r.Chartsheets=b,r.ChartNames=f.slice(h,h+b);break}h+=b}}function n5(t,a,r){var i={};return a||(a={}),t=Xr(t),s5.forEach(function(l){var d=(t.match(q0(l[0]))||[])[1];switch(l[2]){case"string":d&&(a[l[1]]=kr(d));break;case"bool":a[l[1]]=d==="true";break;case"raw":var f=t.match(new RegExp("<"+l[0]+"[^>]*>([\\s\\S]*?)</"+l[0]+">"));f&&f.length>0&&(i[l[1]]=f[1]);break}}),i.HeadingPairs&&i.TitlesOfParts&&t4(i.HeadingPairs,i.TitlesOfParts,a,r),a}var i5=/<[^>]+>[^<]*/g;function l5(t,a){var r={},i="",l=t.match(i5);if(l)for(var d=0;d!=l.length;++d){var f=l[d],h=Vt(f);switch(h[0]){case"<?xml":break;case"<Properties":break;case"<property":i=kr(h.name);break;case"</property>":i=null;break;default:if(f.indexOf("<vt:")===0){var b=f.split(">"),p=b[0].slice(4),w=b[1];switch(p){case"lpstr":case"bstr":case"lpwstr":r[i]=kr(w);break;case"bool":r[i]=ea(w);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[i]=parseInt(w,10);break;case"r4":case"r8":case"decimal":r[i]=parseFloat(w);break;case"filetime":case"date":r[i]=Xa(w);break;case"cy":case"error":r[i]=kr(w);break;default:if(p.slice(-1)=="/")break;a.WTF&&typeof console<"u"&&console.warn("Unexpected",f,p,b)}}else if(f.slice(0,2)!=="</"){if(a.WTF)throw new Error(f)}}}return r}var o5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},sm;function c5(t,a,r){sm||(sm=og(o5)),a=sm[a]||a,t[a]=r}function bg(t){var a=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+a/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function r4(t,a,r){var i=t.l,l=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-i&3;)++t.l;return l}function a4(t,a,r){var i=t.read_shift(0,"lpwstr");return i}function s4(t,a,r){return a===31?a4(t):r4(t,a,r)}function Mm(t,a,r){return s4(t,a,r===!1?0:4)}function d5(t,a){if(!a)throw new Error("VtUnalignedString must have positive length");return s4(t,a,0)}function u5(t){for(var a=t.read_shift(4),r=[],i=0;i!=a;++i){var l=t.l;r[i]=t.read_shift(0,"lpwstr").replace(Es,""),t.l-l&2&&(t.l+=2)}return r}function f5(t){for(var a=t.read_shift(4),r=[],i=0;i!=a;++i)r[i]=t.read_shift(0,"lpstr-cp").replace(Es,"");return r}function x5(t){var a=t.l,r=rf(t,Qw);t[t.l]==0&&t[t.l+1]==0&&t.l-a&2&&(t.l+=2);var i=rf(t,Ms);return[r,i]}function h5(t){for(var a=t.read_shift(4),r=[],i=0;i<a/2;++i)r.push(x5(t));return r}function v2(t,a){for(var r=t.read_shift(4),i={},l=0;l!=r;++l){var d=t.read_shift(4),f=t.read_shift(4);i[d]=t.read_shift(f,a===1200?"utf16le":"utf8").replace(Es,"").replace(C0,"!"),a===1200&&f%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),i}function n4(t){var a=t.read_shift(4),r=t.slice(t.l,t.l+a);return t.l+=a,(a&3)>0&&(t.l+=4-(a&3)&3),r}function m5(t){var a={};return a.Size=t.read_shift(4),t.l+=a.Size+3-(a.Size-1)%4,a}function rf(t,a,r){var i=t.read_shift(2),l,d=r||{};if(t.l+=2,a!==p2&&i!==a&&$S.indexOf(a)===-1&&!((a&65534)==4126&&(i&65534)==4126))throw new Error("Expected type "+a+" saw "+i);switch(a===p2?i:a){case 2:return l=t.read_shift(2,"i"),d.raw||(t.l+=2),l;case 3:return l=t.read_shift(4,"i"),l;case 11:return t.read_shift(4)!==0;case 19:return l=t.read_shift(4),l;case 30:return r4(t,i,4).replace(Es,"");case 31:return a4(t);case 64:return bg(t);case 65:return n4(t);case 71:return m5(t);case 80:return Mm(t,i,!d.raw).replace(Es,"");case 81:return d5(t,i).replace(Es,"");case 4108:return h5(t);case 4126:case 4127:return i==4127?u5(t):f5(t);default:throw new Error("TypedPropertyValue unrecognized type "+a+" "+i)}}function w2(t,a){var r=t.l,i=t.read_shift(4),l=t.read_shift(4),d=[],f=0,h=0,b=-1,p={};for(f=0;f!=l;++f){var w=t.read_shift(4),j=t.read_shift(4);d[f]=[w,j+r]}d.sort(function(M,D){return M[1]-D[1]});var E={};for(f=0;f!=l;++f){if(t.l!==d[f][1]){var _=!0;if(f>0&&a)switch(a[d[f-1][0]].t){case 2:t.l+2===d[f][1]&&(t.l+=2,_=!1);break;case 80:t.l<=d[f][1]&&(t.l=d[f][1],_=!1);break;case 4108:t.l<=d[f][1]&&(t.l=d[f][1],_=!1);break}if((!a||f==0)&&t.l<=d[f][1]&&(_=!1,t.l=d[f][1]),_)throw new Error("Read Error: Expected address "+d[f][1]+" at "+t.l+" :"+f)}if(a){var T=a[d[f][0]];if(E[T.n]=rf(t,T.t,{raw:!0}),T.p==="version"&&(E[T.n]=String(E[T.n]>>16)+"."+("0000"+String(E[T.n]&65535)).slice(-4)),T.n=="CodePage")switch(E[T.n]){case 0:E[T.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:An(h=E[T.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+E[T.n])}}else if(d[f][0]===1){if(h=E.CodePage=rf(t,yg),An(h),b!==-1){var A=t.l;t.l=d[b][1],p=v2(t,h),t.l=A}}else if(d[f][0]===0){if(h===0){b=f,t.l=d[f+1][1];continue}p=v2(t,h)}else{var I=p[d[f][0]],O;switch(t[t.l]){case 65:t.l+=4,O=n4(t);break;case 30:t.l+=4,O=Mm(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,O=Mm(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,O=t.read_shift(4,"i");break;case 19:t.l+=4,O=t.read_shift(4);break;case 5:t.l+=4,O=t.read_shift(8,"f");break;case 11:t.l+=4,O=wa(t,4);break;case 64:t.l+=4,O=Xa(bg(t));break;default:throw new Error("unparsed value: "+t[t.l])}E[I]=O}}return t.l=r+i,E}function N2(t,a,r){var i=t.content;if(!i)return{};Za(i,0);var l,d,f,h,b=0;i.chk("feff","Byte Order: "),i.read_shift(2);var p=i.read_shift(4),w=i.read_shift(16);if(w!==br.utils.consts.HEADER_CLSID&&w!==r)throw new Error("Bad PropertySet CLSID "+w);if(l=i.read_shift(4),l!==1&&l!==2)throw new Error("Unrecognized #Sets: "+l);if(d=i.read_shift(16),h=i.read_shift(4),l===1&&h!==i.l)throw new Error("Length mismatch: "+h+" !== "+i.l);l===2&&(f=i.read_shift(16),b=i.read_shift(4));var j=w2(i,a),E={SystemIdentifier:p};for(var _ in j)E[_]=j[_];if(E.FMTID=d,l===1)return E;if(b-i.l==2&&(i.l+=2),i.l!==b)throw new Error("Length mismatch 2: "+i.l+" !== "+b);var T;try{T=w2(i,null)}catch{}for(_ in T)E[_]=T[_];return E.FMTID=[d,f],E}function vl(t,a){return t.read_shift(a),null}function g5(t,a,r){for(var i=[],l=t.l+a;t.l<l;)i.push(r(t,l-t.l));if(l!==t.l)throw new Error("Slurp error");return i}function wa(t,a){return t.read_shift(a)===1}function Aa(t){return t.read_shift(2,"u")}function i4(t,a){return g5(t,a,Aa)}function p5(t){var a=t.read_shift(1),r=t.read_shift(1);return r===1?a:a===1}function ud(t,a,r){var i=t.read_shift(r&&r.biff>=12?2:1),l="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var d=t.read_shift(1);d&&(l="dbcs-cont")}else r.biff==12&&(l="wstr");r.biff>=2&&r.biff<=5&&(l="cpstr");var f=i?t.read_shift(i,l):"";return f}function y5(t){var a=t.read_shift(2),r=t.read_shift(1),i=r&4,l=r&8,d=1+(r&1),f=0,h,b={};l&&(f=t.read_shift(2)),i&&(h=t.read_shift(4));var p=d==2?"dbcs-cont":"sbcs-cont",w=a===0?"":t.read_shift(a,p);return l&&(t.l+=4*f),i&&(t.l+=h),b.t=w,l||(b.raw="<t>"+b.t+"</t>",b.r=b.t),b}function go(t,a,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(a,"cpstr");if(r.biff>=12)return t.read_shift(a,"dbcs-cont")}var l=t.read_shift(1);return l===0?i=t.read_shift(a,"sbcs-cont"):i=t.read_shift(a,"dbcs-cont"),i}function fd(t,a,r){var i=t.read_shift(r&&r.biff==2?1:2);return i===0?(t.l++,""):go(t,i,r)}function Co(t,a,r){if(r.biff>5)return fd(t,a,r);var i=t.read_shift(1);return i===0?(t.l++,""):t.read_shift(i,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function b5(t){var a=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[a,r]}function v5(t){var a=t.read_shift(4),r=t.l,i=!1;a>24&&(t.l+=a-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(i=!0),t.l=r);var l=t.read_shift((i?a-24:a)>>1,"utf16le").replace(Es,"");return i&&(t.l+=24),l}function w5(t){for(var a=t.read_shift(2),r="";a-- >0;)r+="../";var i=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var l=t.read_shift(4);if(l===0)return r+i.replace(/\\/g,"/");var d=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var f=t.read_shift(d>>1,"utf16le").replace(Es,"");return r+f}function N5(t,a){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return v5(t);case"0303000000000000c000000000000046":return w5(t);default:throw new Error("Unsupported Moniker "+r)}}function Su(t){var a=t.read_shift(4),r=a>0?t.read_shift(a,"utf16le").replace(Es,""):"";return r}function k5(t,a){var r=t.l+a,i=t.read_shift(4);if(i!==2)throw new Error("Unrecognized streamVersion: "+i);var l=t.read_shift(2);t.l+=2;var d,f,h,b,p="",w,j;l&16&&(d=Su(t,r-t.l)),l&128&&(f=Su(t,r-t.l)),(l&257)===257&&(h=Su(t,r-t.l)),(l&257)===1&&(b=N5(t,r-t.l)),l&8&&(p=Su(t,r-t.l)),l&32&&(w=t.read_shift(16)),l&64&&(j=bg(t)),t.l=r;var E=f||h||b||"";E&&p&&(E+="#"+p),E||(E="#"+p),l&2&&E.charAt(0)=="/"&&E.charAt(1)!="/"&&(E="file://"+E);var _={Target:E};return w&&(_.guid=w),j&&(_.time=j),d&&(_.Tooltip=d),_}function l4(t){var a=t.read_shift(1),r=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(1);return[a,r,i,l]}function o4(t,a){var r=l4(t);return r[3]=0,r}function ci(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{r:a,c:r,ixfe:i}}function j5(t){var a=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:a,flags:r}}function C5(t,a,r){return a===0?"":Co(t,a,r)}function E5(t,a,r){var i=r.biff>8?4:2,l=t.read_shift(i),d=t.read_shift(i,"i"),f=t.read_shift(i,"i");return[l,d,f]}function c4(t){var a=t.read_shift(2),r=pg(t);return[a,r]}function _5(t,a,r){t.l+=4,a-=4;var i=t.l+a,l=ud(t,a,r),d=t.read_shift(2);if(i-=t.l,d!==i)throw new Error("Malformed AddinUdf: padding = "+i+" != "+d);return t.l+=d,l}function kf(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2);return{s:{c:i,r:a},e:{c:l,r}}}function d4(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1);return{s:{c:i,r:a},e:{c:l,r}}}var A5=d4;function u4(t){t.l+=4;var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return t.l+=12,[r,a,i]}function S5(t){var a={};return t.l+=4,t.l+=16,a.fSharedNote=t.read_shift(2),t.l+=4,a}function T5(t){var a={};return t.l+=4,t.cf=t.read_shift(2),a}function cs(t){t.l+=2,t.l+=t.read_shift(2)}var D5={0:cs,4:cs,5:cs,6:cs,7:T5,8:cs,9:cs,10:cs,11:cs,12:cs,13:S5,14:cs,15:cs,16:cs,17:cs,18:cs,19:cs,20:cs,21:u4};function R5(t,a){for(var r=t.l+a,i=[];t.l<r;){var l=t.read_shift(2);t.l-=2;try{i.push(D5[l](t,r-t.l))}catch{return t.l=r,i}}return t.l!=r&&(t.l=r),i}function Tu(t,a){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),a-=2,a>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(a>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(a),r}function O5(t,a){return a===0||t.read_shift(2),1200}function I5(t,a,r){if(r.enc)return t.l+=a,"";var i=t.l,l=Co(t,0,r);return t.read_shift(a+i-t.l),l}function F5(t,a,r){var i=r&&r.biff==8||a==2?t.read_shift(2):(t.l+=a,0);return{fDialog:i&16,fBelow:i&64,fRight:i&128}}function M5(t,a,r){var i=t.read_shift(4),l=t.read_shift(1)&3,d=t.read_shift(1);switch(d){case 0:d="Worksheet";break;case 1:d="Macrosheet";break;case 2:d="Chartsheet";break;case 6:d="VBAModule";break}var f=ud(t,0,r);return f.length===0&&(f="Sheet1"),{pos:i,hs:l,dt:d,name:f}}function B5(t,a){for(var r=t.l+a,i=t.read_shift(4),l=t.read_shift(4),d=[],f=0;f!=l&&t.l<r;++f)d.push(y5(t));return d.Count=i,d.Unique=l,d}function L5(t,a){var r={};return r.dsst=t.read_shift(2),t.l+=a-2,r}function P5(t){var a={};a.r=t.read_shift(2),a.c=t.read_shift(2),a.cnt=t.read_shift(2)-a.c;var r=t.read_shift(2);t.l+=4;var i=t.read_shift(1);return t.l+=3,i&7&&(a.level=i&7),i&32&&(a.hidden=!0),i&64&&(a.hpt=r/20),a}function z5(t){var a=j5(t);if(a.type!=2211)throw new Error("Invalid Future Record "+a.type);var r=t.read_shift(4);return r!==0}function U5(t){return t.read_shift(2),t.read_shift(4)}function k2(t,a,r){var i=0;r&&r.biff==2||(i=t.read_shift(2));var l=t.read_shift(2);r&&r.biff==2&&(i=1-(l>>15),l&=32767);var d={Unsynced:i&1,DyZero:(i&2)>>1,ExAsc:(i&4)>>2,ExDsc:(i&8)>>3};return[d,l]}function H5(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=t.read_shift(2),b=t.read_shift(2),p=t.read_shift(2);return{Pos:[a,r],Dim:[i,l],Flags:d,CurTab:f,FirstTab:h,Selected:b,TabRatio:p}}function V5(t,a,r){if(r&&r.biff>=2&&r.biff<5)return{};var i=t.read_shift(2);return{RTL:i&64}}function G5(){}function X5(t,a,r){var i={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return i.name=ud(t,0,r),i}function q5(t){var a=ci(t);return a.isst=t.read_shift(4),a}function $5(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=t.l+a,l=ci(t);r.biff==2&&t.l++;var d=fd(t,i-t.l,r);return l.val=d,l}function Y5(t,a,r){var i=t.read_shift(2),l=Co(t,0,r);return[i,l]}var W5=Co;function j2(t,a,r){var i=t.l+a,l=r.biff==8||!r.biff?4:2,d=t.read_shift(l),f=t.read_shift(l),h=t.read_shift(2),b=t.read_shift(2);return t.l=i,{s:{r:d,c:h},e:{r:f,c:b}}}function K5(t){var a=t.read_shift(2),r=t.read_shift(2),i=c4(t);return{r:a,c:r,ixfe:i[0],rknum:i[1]}}function Z5(t,a){for(var r=t.l+a-2,i=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(c4(t));if(t.l!==r)throw new Error("MulRK read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulRK length mismatch");return{r:i,c:l,C:f,rkrec:d}}function Q5(t,a){for(var r=t.l+a-2,i=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulBlank length mismatch");return{r:i,c:l,C:f,ixfe:d}}function J5(t,a,r,i){var l={},d=t.read_shift(4),f=t.read_shift(4),h=t.read_shift(4),b=t.read_shift(2);return l.patternType=KS[h>>26],i.cellStyles&&(l.alc=d&7,l.fWrap=d>>3&1,l.alcV=d>>4&7,l.fJustLast=d>>7&1,l.trot=d>>8&255,l.cIndent=d>>16&15,l.fShrinkToFit=d>>20&1,l.iReadOrder=d>>22&2,l.fAtrNum=d>>26&1,l.fAtrFnt=d>>27&1,l.fAtrAlc=d>>28&1,l.fAtrBdr=d>>29&1,l.fAtrPat=d>>30&1,l.fAtrProt=d>>31&1,l.dgLeft=f&15,l.dgRight=f>>4&15,l.dgTop=f>>8&15,l.dgBottom=f>>12&15,l.icvLeft=f>>16&127,l.icvRight=f>>23&127,l.grbitDiag=f>>30&3,l.icvTop=h&127,l.icvBottom=h>>7&127,l.icvDiag=h>>14&127,l.dgDiag=h>>21&15,l.icvFore=b&127,l.icvBack=b>>7&127,l.fsxButton=b>>14&1),l}function eT(t,a,r){var i={};return i.ifnt=t.read_shift(2),i.numFmtId=t.read_shift(2),i.flags=t.read_shift(2),i.fStyle=i.flags>>2&1,a-=6,i.data=J5(t,a,i.fStyle,r),i}function tT(t){t.l+=4;var a=[t.read_shift(2),t.read_shift(2)];if(a[0]!==0&&a[0]--,a[1]!==0&&a[1]--,a[0]>7||a[1]>7)throw new Error("Bad Gutters: "+a.join("|"));return a}function C2(t,a,r){var i=ci(t);(r.biff==2||a==9)&&++t.l;var l=p5(t);return i.val=l,i.t=l===!0||l===!1?"b":"e",i}function rT(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=ci(t),l=fs(t);return i.val=l,i}var E2=C5;function aT(t,a,r){var i=t.l+a,l=t.read_shift(2),d=t.read_shift(2);if(r.sbcch=d,d==1025||d==14849)return[d,l];if(d<1||d>255)throw new Error("Unexpected SupBook type: "+d);for(var f=go(t,d),h=[];i>t.l;)h.push(fd(t));return[d,l,f,h]}function _2(t,a,r){var i=t.read_shift(2),l,d={fBuiltIn:i&1,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return r.sbcch===14849&&(l=_5(t,a-2,r)),d.body=l||t.read_shift(a-2),typeof l=="string"&&(d.Name=l),d}var sT=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function A2(t,a,r){var i=t.l+a,l=t.read_shift(2),d=t.read_shift(1),f=t.read_shift(1),h=t.read_shift(r&&r.biff==2?1:2),b=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),b=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var p=go(t,f,r);l&32&&(p=sT[p.charCodeAt(0)]);var w=i-t.l;r&&r.biff==2&&--w;var j=i==t.l||h===0||!(w>0)?[]:PD(t,w,r,h);return{chKey:d,Name:p,itab:b,rgce:j}}function f4(t,a,r){if(r.biff<8)return nT(t,a,r);for(var i=[],l=t.l+a,d=t.read_shift(r.biff>8?4:2);d--!==0;)i.push(E5(t,r.biff>8?12:6,r));if(t.l!=l)throw new Error("Bad ExternSheet: "+t.l+" != "+l);return i}function nT(t,a,r){t[t.l+1]==3&&t[t.l]++;var i=ud(t,a,r);return i.charCodeAt(0)==3?i.slice(1):i}function iT(t,a,r){if(r.biff<8){t.l+=a;return}var i=t.read_shift(2),l=t.read_shift(2),d=go(t,i,r),f=go(t,l,r);return[d,f]}function lT(t,a,r){var i=d4(t);t.l++;var l=t.read_shift(1);return a-=8,[zD(t,a,r),l,i]}function S2(t,a,r){var i=A5(t);switch(r.biff){case 2:t.l++,a-=7;break;case 3:case 4:t.l+=2,a-=8;break;default:t.l+=6,a-=12}return[i,BD(t,a,r)]}function oT(t){var a=t.read_shift(4)!==0,r=t.read_shift(4)!==0,i=t.read_shift(4);return[a,r,i]}function cT(t,a,r){if(!(r.biff<8)){var i=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=Co(t,0,r);return r.biff<8&&t.read_shift(1),[{r:i,c:l},h,f,d]}}function dT(t,a,r){return cT(t,a,r)}function uT(t,a){for(var r=[],i=t.read_shift(2);i--;)r.push(kf(t));return r}function fT(t,a,r){if(r&&r.biff<8)return hT(t,a,r);var i=u4(t),l=R5(t,a-22,i[1]);return{cmo:i,ft:l}}var xT={8:function(t,a){var r=t.l+a;t.l+=10;var i=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var l=t.read_shift(1);return t.l+=l,t.l=r,{fmt:i}}};function hT(t,a,r){t.l+=4;var i=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,a-=36;var f=[];return f.push((xT[i]||ms)(t,a,r)),{cmo:[l,i,d],ft:f}}function mT(t,a,r){var i=t.l,l="";try{t.l+=4;var d=(r.lastobj||{cmo:[0,0]}).cmo[1],f;[0,5,7,11,12,14].indexOf(d)==-1?t.l+=6:f=b5(t,6,r);var h=t.read_shift(2);t.read_shift(2),Aa(t,2);var b=t.read_shift(2);t.l+=b;for(var p=1;p<t.lens.length-1;++p){if(t.l-i!=t.lens[p])throw new Error("TxO: bad continue record");var w=t[t.l],j=go(t,t.lens[p+1]-t.lens[p]-1);if(l+=j,l.length>=(w?h:2*h))break}if(l.length!==h&&l.length!==h*2)throw new Error("cchText: "+h+" != "+l.length);return t.l=i+a,{t:l}}catch{return t.l=i+a,{t:l}}}function gT(t,a){var r=kf(t);t.l+=16;var i=k5(t,a-24);return[r,i]}function pT(t,a){t.read_shift(2);var r=kf(t),i=t.read_shift((a-10)/2,"dbcs-cont");return i=i.replace(Es,""),[r,i]}function yT(t){var a=[0,0],r;return r=t.read_shift(2),a[0]=y2[r]||r,r=t.read_shift(2),a[1]=y2[r]||r,a}function bT(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(o4(t));return r}function vT(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(o4(t));return r}function wT(t){t.l+=2;var a={cxfs:0,crc:0};return a.cxfs=t.read_shift(2),a.crc=t.read_shift(4),a}function x4(t,a,r){if(!r.cellStyles)return ms(t,a);var i=r&&r.biff>=12?4:2,l=t.read_shift(i),d=t.read_shift(i),f=t.read_shift(i),h=t.read_shift(i),b=t.read_shift(2);i==2&&(t.l+=2);var p={s:l,e:d,w:f,ixfe:h,flags:b};return(r.biff>=5||!r.biff)&&(p.level=b>>8&7),p}function NT(t,a){var r={};return a<32||(t.l+=16,r.header=fs(t),r.footer=fs(t),t.l+=2),r}function kT(t,a,r){var i={area:!1};if(r.biff!=5)return t.l+=a,i;var l=t.read_shift(1);return t.l+=3,l&16&&(i.area=!0),i}var jT=ci,CT=i4,ET=fd;function _T(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l={fmt:a,env:r,len:i,data:t.slice(t.l,t.l+i)};return t.l+=i,l}function AT(t,a,r){r.biffguess&&r.biff==5&&(r.biff=2);var i=ci(t);++t.l;var l=Co(t,a-7,r);return i.t="str",i.val=l,i}function ST(t){var a=ci(t);++t.l;var r=fs(t);return a.t="n",a.val=r,a}function TT(t){var a=ci(t);++t.l;var r=t.read_shift(2);return a.t="n",a.val=r,a}function DT(t){var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,"sbcs-cont")}function RT(t,a){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=a-13}function OT(t,a,r){var i=t.l+a,l=ci(t),d=t.read_shift(2),f=go(t,d,r);return t.l=i,l.t="str",l.val=f,l}var IT=[2,3,48,49,131,139,140,245],T2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},a=og({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,b){var p=[],w=Sl(1);switch(b.type){case"base64":w=_n(rn(h));break;case"binary":w=_n(h);break;case"buffer":case"array":w=h;break}Za(w,0);var j=w.read_shift(1),E=!!(j&136),_=!1,T=!1;switch(j){case 2:break;case 3:break;case 48:_=!0,E=!0;break;case 49:_=!0,E=!0;break;case 131:break;case 139:break;case 140:T=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+j.toString(16))}var A=0,I=521;j==2&&(A=w.read_shift(2)),w.l+=3,j!=2&&(A=w.read_shift(4)),A>1048576&&(A=1e6),j!=2&&(I=w.read_shift(2));var O=w.read_shift(2),M=b.codepage||1252;j!=2&&(w.l+=16,w.read_shift(1),w[w.l]!==0&&(M=t[w[w.l]]),w.l+=1,w.l+=2),T&&(w.l+=36);for(var D=[],B={},H=Math.min(w.length,j==2?521:I-10-(_?264:0)),z=T?32:11;w.l<H&&w[w.l]!=13;)switch(B={},B.name=G0.utils.decode(M,w.slice(w.l,w.l+z)).replace(/[\u0000\r\n].*$/g,""),w.l+=z,B.type=String.fromCharCode(w.read_shift(1)),j!=2&&!T&&(B.offset=w.read_shift(4)),B.len=w.read_shift(1),j==2&&(B.offset=w.read_shift(2)),B.dec=w.read_shift(1),B.name.length&&D.push(B),j!=2&&(w.l+=T?13:14),B.type){case"B":(!_||B.len!=8)&&b.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":b.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(w[w.l]!==13&&(w.l=I-1),w.read_shift(1)!==13)throw new Error("DBF Terminator not found "+w.l+" "+w[w.l]);w.l=I;var L=0,P=0;for(p[0]=[],P=0;P!=D.length;++P)p[0][P]=D[P].name;for(;A-- >0;){if(w[w.l]===42){w.l+=O;continue}for(++w.l,p[++L]=[],P=0,P=0;P!=D.length;++P){var U=w.slice(w.l,w.l+D[P].len);w.l+=D[P].len,Za(U,0);var Z=G0.utils.decode(M,U);switch(D[P].type){case"C":Z.trim().length&&(p[L][P]=Z.replace(/\s+$/,""));break;case"D":Z.length===8?p[L][P]=new Date(+Z.slice(0,4),+Z.slice(4,6)-1,+Z.slice(6,8)):p[L][P]=Z;break;case"F":p[L][P]=parseFloat(Z.trim());break;case"+":case"I":p[L][P]=T?U.read_shift(-4,"i")^2147483648:U.read_shift(4,"i");break;case"L":switch(Z.trim().toUpperCase()){case"Y":case"T":p[L][P]=!0;break;case"N":case"F":p[L][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+Z+"|")}break;case"M":if(!E)throw new Error("DBF Unexpected MEMO for type "+j.toString(16));p[L][P]="##MEMO##"+(T?parseInt(Z.trim(),10):U.read_shift(4));break;case"N":Z=Z.replace(/\u0000/g,"").trim(),Z&&Z!="."&&(p[L][P]=+Z||0);break;case"@":p[L][P]=new Date(U.read_shift(-8,"f")-621356832e5);break;case"T":p[L][P]=new Date((U.read_shift(4)-2440588)*864e5+U.read_shift(4));break;case"Y":p[L][P]=U.read_shift(4,"i")/1e4+U.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":p[L][P]=-U.read_shift(-8,"f");break;case"B":if(_&&D[P].len==8){p[L][P]=U.read_shift(8,"f");break}case"G":case"P":U.l+=D[P].len;break;case"0":if(D[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+D[P].type)}}}if(j!=2&&w.l<w.length&&w[w.l++]!=26)throw new Error("DBF EOF Marker missing "+(w.l-1)+" of "+w.length+" "+w[w.l-1].toString(16));return b&&b.sheetRows&&(p=p.slice(0,b.sheetRows)),b.DBF=D,p}function i(h,b){var p=b||{};p.dateNF||(p.dateNF="yyyymmdd");var w=Ac(r(h,p),p);return w["!cols"]=p.DBF.map(function(j){return{wch:j.len,DBF:j}}),delete p.DBF,w}function l(h,b){try{return Rl(i(h,b),b)}catch(p){if(b&&b.WTF)throw p}return{SheetNames:[],Sheets:{}}}var d={B:8,C:250,L:1,D:8,"?":0,"":0};function f(h,b){var p=b||{};if(+p.codepage>=0&&An(+p.codepage),p.type=="string")throw new Error("Cannot write DBF to JS string");var w=Om(),j=Vm(h,{header:1,raw:!0,cellDates:!0}),E=j[0],_=j.slice(1),T=h["!cols"]||[],A=0,I=0,O=0,M=1;for(A=0;A<E.length;++A){if(((T[A]||{}).DBF||{}).name){E[A]=T[A].DBF.name,++O;continue}if(E[A]!=null){if(++O,typeof E[A]=="number"&&(E[A]=E[A].toString(10)),typeof E[A]!="string")throw new Error("DBF Invalid column name "+E[A]+" |"+typeof E[A]+"|");if(E.indexOf(E[A])!==A){for(I=0;I<1024;++I)if(E.indexOf(E[A]+"_"+I)==-1){E[A]+="_"+I;break}}}}var D=ma(h["!ref"]),B=[],H=[],z=[];for(A=0;A<=D.e.c-D.s.c;++A){var L="",P="",U=0,Z=[];for(I=0;I<_.length;++I)_[I][A]!=null&&Z.push(_[I][A]);if(Z.length==0||E[A]==null){B[A]="?";continue}for(I=0;I<Z.length;++I){switch(typeof Z[I]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=Z[I]instanceof Date?"D":"C";break;default:P="C"}U=Math.max(U,String(Z[I]).length),L=L&&L!=P?"C":P}U>250&&(U=250),P=((T[A]||{}).DBF||{}).type,P=="C"&&T[A].DBF.len>U&&(U=T[A].DBF.len),L=="B"&&P=="N"&&(L="N",z[A]=T[A].DBF.dec,U=T[A].DBF.len),H[A]=L=="C"||P=="N"?U:d[L]||0,M+=H[A],B[A]=L}var ae=w.next(32);for(ae.write_shift(4,318902576),ae.write_shift(4,_.length),ae.write_shift(2,296+32*O),ae.write_shift(2,M),A=0;A<4;++A)ae.write_shift(4,0);for(ae.write_shift(4,0|(+a[fw]||3)<<8),A=0,I=0;A<E.length;++A)if(E[A]!=null){var Y=w.next(32),ue=(E[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);Y.write_shift(1,ue,"sbcs"),Y.write_shift(1,B[A]=="?"?"C":B[A],"sbcs"),Y.write_shift(4,I),Y.write_shift(1,H[A]||d[B[A]]||0),Y.write_shift(1,z[A]||0),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(1,0),Y.write_shift(4,0),Y.write_shift(4,0),I+=H[A]||d[B[A]]||0}var de=w.next(264);for(de.write_shift(4,13),A=0;A<65;++A)de.write_shift(4,0);for(A=0;A<_.length;++A){var G=w.next(M);for(G.write_shift(1,0),I=0;I<E.length;++I)if(E[I]!=null)switch(B[I]){case"L":G.write_shift(1,_[A][I]==null?63:_[A][I]?84:70);break;case"B":G.write_shift(8,_[A][I]||0,"f");break;case"N":var q="0";for(typeof _[A][I]=="number"&&(q=_[A][I].toFixed(z[I]||0)),O=0;O<H[I]-q.length;++O)G.write_shift(1,32);G.write_shift(1,q,"sbcs");break;case"D":_[A][I]?(G.write_shift(4,("0000"+_[A][I].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(_[A][I].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+_[A][I].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var xe=String(_[A][I]!=null?_[A][I]:"").slice(0,H[I]);for(G.write_shift(1,xe,"sbcs"),O=0;O<H[I]-xe.length;++O)G.write_shift(1,32);break}}return w.next(1).write_shift(1,26),w.end()}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),FT=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},a=new RegExp("\x1BN("+ni(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(E,_){var T=t[_];return typeof T=="number"?qb(T):T},i=function(E,_,T){var A=_.charCodeAt(0)-32<<4|T.charCodeAt(0)-48;return A==59?E:qb(A)};t["|"]=254;function l(E,_){switch(_.type){case"base64":return d(rn(E),_);case"binary":return d(E,_);case"buffer":return d(mr&&Buffer.isBuffer(E)?E.toString("binary"):wo(E),_);case"array":return d(mo(E),_)}throw new Error("Unrecognized type "+_.type)}function d(E,_){var T=E.split(/[\n\r]+/),A=-1,I=-1,O=0,M=0,D=[],B=[],H=null,z={},L=[],P=[],U=[],Z=0,ae;for(+_.codepage>=0&&An(+_.codepage);O!==T.length;++O){Z=0;var Y=T[O].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(a,r),ue=Y.replace(/;;/g,"\0").split(";").map(function(ne){return ne.replace(/\u0000/g,";")}),de=ue[0],G;if(Y.length>0)switch(de){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ue[1].charAt(0)=="P"&&B.push(Y.slice(3).replace(/;;/g,";"));break;case"C":var q=!1,xe=!1,Ce=!1,le=!1,oe=-1,re=-1;for(M=1;M<ue.length;++M)switch(ue[M].charAt(0)){case"A":break;case"X":I=parseInt(ue[M].slice(1))-1,xe=!0;break;case"Y":for(A=parseInt(ue[M].slice(1))-1,xe||(I=0),ae=D.length;ae<=A;++ae)D[ae]=[];break;case"K":G=ue[M].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(Dn(G))?isNaN(bc(G).getDate())||(G=Xa(G)):(G=Dn(G),H!==null&&Ec(H)&&(G=Nf(G))),q=!0;break;case"E":le=!0;var Q=gc(ue[M].slice(1),{r:A,c:I});D[A][I]=[D[A][I],Q];break;case"S":Ce=!0,D[A][I]=[D[A][I],"S5S"];break;case"G":break;case"R":oe=parseInt(ue[M].slice(1))-1;break;case"C":re=parseInt(ue[M].slice(1))-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+Y)}if(q&&(D[A][I]&&D[A][I].length==2?D[A][I][0]=G:D[A][I]=G,H=null),Ce){if(le)throw new Error("SYLK shared formula cannot have own formula");var X=oe>-1&&D[oe][re];if(!X||!X[1])throw new Error("SYLK shared formula cannot find base");D[A][I][1]=k4(X[1],{r:A-oe,c:I-re})}break;case"F":var se=0;for(M=1;M<ue.length;++M)switch(ue[M].charAt(0)){case"X":I=parseInt(ue[M].slice(1))-1,++se;break;case"Y":for(A=parseInt(ue[M].slice(1))-1,ae=D.length;ae<=A;++ae)D[ae]=[];break;case"M":Z=parseInt(ue[M].slice(1))/20;break;case"F":break;case"G":break;case"P":H=B[parseInt(ue[M].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(U=ue[M].slice(1).split(" "),ae=parseInt(U[0],10);ae<=parseInt(U[1],10);++ae)Z=parseInt(U[2],10),P[ae-1]=Z===0?{hidden:!0}:{wch:Z},vc(P[ae-1]);break;case"C":I=parseInt(ue[M].slice(1))-1,P[I]||(P[I]={});break;case"R":A=parseInt(ue[M].slice(1))-1,L[A]||(L[A]={}),Z>0?(L[A].hpt=Z,L[A].hpx=K0(Z)):Z===0&&(L[A].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+Y)}se<1&&(H=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+Y)}}return L.length>0&&(z["!rows"]=L),P.length>0&&(z["!cols"]=P),_&&_.sheetRows&&(D=D.slice(0,_.sheetRows)),[D,z]}function f(E,_){var T=l(E,_),A=T[0],I=T[1],O=Ac(A,_);return ni(I).forEach(function(M){O[M]=I[M]}),O}function h(E,_){return Rl(f(E,_),_)}function b(E,_,T,A){var I="C;Y"+(T+1)+";X"+(A+1)+";K";switch(E.t){case"n":I+=E.v||0,E.f&&!E.F&&(I+=";E"+w9(E.f,{r:T,c:A}));break;case"b":I+=E.v?"TRUE":"FALSE";break;case"e":I+=E.w||E.v;break;case"d":I+='"'+(E.w||E.v)+'"';break;case"s":I+='"'+E.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return I}function p(E,_){_.forEach(function(T,A){var I="F;W"+(A+1)+" "+(A+1)+" ";T.hidden?I+="0":(typeof T.width=="number"&&!T.wpx&&(T.wpx=sf(T.width)),typeof T.wpx=="number"&&!T.wch&&(T.wch=nf(T.wpx)),typeof T.wch=="number"&&(I+=Math.round(T.wch))),I.charAt(I.length-1)!=" "&&E.push(I)})}function w(E,_){_.forEach(function(T,A){var I="F;";T.hidden?I+="M0;":T.hpt?I+="M"+20*T.hpt+";":T.hpx&&(I+="M"+20*v4(T.hpx)+";"),I.length>2&&E.push(I+"R"+(A+1))})}function j(E,_){var T=["ID;PWXL;N;E"],A=[],I=ma(E["!ref"]),O,M=Array.isArray(E),D=`\r
`;T.push("P;PGeneral"),T.push("F;P0;DG0G8;M255"),E["!cols"]&&p(T,E["!cols"]),E["!rows"]&&w(T,E["!rows"]),T.push("B;Y"+(I.e.r-I.s.r+1)+";X"+(I.e.c-I.s.c+1)+";D"+[I.s.c,I.s.r,I.e.c,I.e.r].join(" "));for(var B=I.s.r;B<=I.e.r;++B)for(var H=I.s.c;H<=I.e.c;++H){var z=Zt({r:B,c:H});O=M?(E[B]||[])[H]:E[z],!(!O||O.v==null&&(!O.f||O.F))&&A.push(b(O,E,B,H))}return T.join(D)+D+A.join(D)+D+"E"+D}return{to_workbook:h,to_sheet:f,from_sheet:j}}(),MT=function(){function t(d,f){switch(f.type){case"base64":return a(rn(d),f);case"binary":return a(d,f);case"buffer":return a(mr&&Buffer.isBuffer(d)?d.toString("binary"):wo(d),f);case"array":return a(mo(d),f)}throw new Error("Unrecognized type "+f.type)}function a(d,f){for(var h=d.split(`
`),b=-1,p=-1,w=0,j=[];w!==h.length;++w){if(h[w].trim()==="BOT"){j[++b]=[],p=0;continue}if(!(b<0)){var E=h[w].trim().split(","),_=E[0],T=E[1];++w;for(var A=h[w]||"";(A.match(/["]/g)||[]).length&1&&w<h.length-1;)A+=`
`+h[++w];switch(A=A.trim(),+_){case-1:if(A==="BOT"){j[++b]=[],p=0;continue}else if(A!=="EOD")throw new Error("Unrecognized DIF special command "+A);break;case 0:A==="TRUE"?j[b][p]=!0:A==="FALSE"?j[b][p]=!1:isNaN(Dn(T))?isNaN(bc(T).getDate())?j[b][p]=T:j[b][p]=Xa(T):j[b][p]=Dn(T),++p;break;case 1:A=A.slice(1,A.length-1),A=A.replace(/""/g,'"'),A&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),j[b][p++]=A!==""?A:null;break}if(A==="EOD")break}}return f&&f.sheetRows&&(j=j.slice(0,f.sheetRows)),j}function r(d,f){return Ac(t(d,f),f)}function i(d,f){return Rl(r(d,f),f)}var l=function(){var d=function(b,p,w,j,E){b.push(p),b.push(w+","+j),b.push('"'+E.replace(/"/g,'""')+'"')},f=function(b,p,w,j){b.push(p+","+w),b.push(p==1?'"'+j.replace(/"/g,'""')+'"':j)};return function(b){var p=[],w=ma(b["!ref"]),j,E=Array.isArray(b);d(p,"TABLE",0,1,"sheetjs"),d(p,"VECTORS",0,w.e.r-w.s.r+1,""),d(p,"TUPLES",0,w.e.c-w.s.c+1,""),d(p,"DATA",0,0,"");for(var _=w.s.r;_<=w.e.r;++_){f(p,-1,0,"BOT");for(var T=w.s.c;T<=w.e.c;++T){var A=Zt({r:_,c:T});if(j=E?(b[_]||[])[T]:b[A],!j){f(p,1,0,"");continue}switch(j.t){case"n":var I=j.w;!I&&j.v!=null&&(I=j.v),I==null?j.f&&!j.F?f(p,1,0,"="+j.f):f(p,1,0,""):f(p,0,I,"V");break;case"b":f(p,0,j.v?1:0,j.v?"TRUE":"FALSE");break;case"s":f(p,1,0,isNaN(j.v)?j.v:'="'+j.v+'"');break;case"d":j.w||(j.w=gn(j.z||rr[14],Ss(Xa(j.v)))),f(p,0,j.w,"V");break;default:f(p,1,0,"")}}}f(p,-1,0,"EOD");var O=`\r
`,M=p.join(O);return M}}();return{to_workbook:i,to_sheet:r,from_sheet:l}}(),BT=function(){function t(j){return j.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function a(j){return j.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(j,E){for(var _=j.split(`
`),T=-1,A=-1,I=0,O=[];I!==_.length;++I){var M=_[I].trim().split(":");if(M[0]==="cell"){var D=Cs(M[1]);if(O.length<=D.r)for(T=O.length;T<=D.r;++T)O[T]||(O[T]=[]);switch(T=D.r,A=D.c,M[2]){case"t":O[T][A]=t(M[3]);break;case"v":O[T][A]=+M[3];break;case"vtf":var B=M[M.length-1];case"vtc":switch(M[3]){case"nl":O[T][A]=!!+M[4];break;default:O[T][A]=+M[4];break}M[2]=="vtf"&&(O[T][A]=[O[T][A],B])}}}return E&&E.sheetRows&&(O=O.slice(0,E.sheetRows)),O}function i(j,E){return Ac(r(j,E),E)}function l(j,E){return Rl(i(j,E),E)}var d=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),f=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),b="--SocialCalcSpreadsheetControlSave--";function p(j){if(!j||!j["!ref"])return"";for(var E=[],_=[],T,A="",I=_c(j["!ref"]),O=Array.isArray(j),M=I.s.r;M<=I.e.r;++M)for(var D=I.s.c;D<=I.e.c;++D)if(A=Zt({r:M,c:D}),T=O?(j[M]||[])[D]:j[A],!(!T||T.v==null||T.t==="z")){switch(_=["cell",A,"t"],T.t){case"s":case"str":_.push(a(T.v));break;case"n":T.f?(_[2]="vtf",_[3]="n",_[4]=T.v,_[5]=a(T.f)):(_[2]="v",_[3]=T.v);break;case"b":_[2]="vt"+(T.f?"f":"c"),_[3]="nl",_[4]=T.v?"1":"0",_[5]=a(T.f||(T.v?"TRUE":"FALSE"));break;case"d":var B=Ss(Xa(T.v));_[2]="vtc",_[3]="nd",_[4]=""+B,_[5]=T.w||gn(T.z||rr[14],B);break;case"e":continue}E.push(_.join(":"))}return E.push("sheet:c:"+(I.e.c-I.s.c+1)+":r:"+(I.e.r-I.s.r+1)+":tvf:1"),E.push("valueformat:1:text-wiki"),E.join(`
`)}function w(j){return[d,f,h,f,p(j),b].join(`
`)}return{to_workbook:l,to_sheet:i,from_sheet:w}}(),Y0=function(){function t(w,j,E,_,T){T.raw?j[E][_]=w:w===""||(w==="TRUE"?j[E][_]=!0:w==="FALSE"?j[E][_]=!1:isNaN(Dn(w))?isNaN(bc(w).getDate())?j[E][_]=w:j[E][_]=Xa(w):j[E][_]=Dn(w))}function a(w,j){var E=j||{},_=[];if(!w||w.length===0)return _;for(var T=w.split(/[\r\n]/),A=T.length-1;A>=0&&T[A].length===0;)--A;for(var I=10,O=0,M=0;M<=A;++M)O=T[M].indexOf(" "),O==-1?O=T[M].length:O++,I=Math.max(I,O);for(M=0;M<=A;++M){_[M]=[];var D=0;for(t(T[M].slice(0,I).trim(),_,M,D,E),D=1;D<=(T[M].length-I)/10+1;++D)t(T[M].slice(I+(D-1)*10,I+D*10).trim(),_,M,D,E)}return E.sheetRows&&(_=_.slice(0,E.sheetRows)),_}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function l(w){for(var j={},E=!1,_=0,T=0;_<w.length;++_)(T=w.charCodeAt(_))==34?E=!E:!E&&T in r&&(j[T]=(j[T]||0)+1);T=[];for(_ in j)Object.prototype.hasOwnProperty.call(j,_)&&T.push([j[_],_]);if(!T.length){j=i;for(_ in j)Object.prototype.hasOwnProperty.call(j,_)&&T.push([j[_],_])}return T.sort(function(A,I){return A[0]-I[0]||i[A[1]]-i[I[1]]}),r[T.pop()[1]]||44}function d(w,j){var E=j||{},_="",T=E.dense?[]:{},A={s:{c:0,r:0},e:{c:0,r:0}};w.slice(0,4)=="sep="?w.charCodeAt(5)==13&&w.charCodeAt(6)==10?(_=w.charAt(4),w=w.slice(7)):w.charCodeAt(5)==13||w.charCodeAt(5)==10?(_=w.charAt(4),w=w.slice(6)):_=l(w.slice(0,1024)):E&&E.FS?_=E.FS:_=l(w.slice(0,1024));var I=0,O=0,M=0,D=0,B=0,H=_.charCodeAt(0),z=!1,L=0,P=w.charCodeAt(0);w=w.replace(/\r\n/mg,`
`);var U=E.dateNF!=null?YA(E.dateNF):null;function Z(){var ae=w.slice(D,B),Y={};if(ae.charAt(0)=='"'&&ae.charAt(ae.length-1)=='"'&&(ae=ae.slice(1,-1).replace(/""/g,'"')),ae.length===0)Y.t="z";else if(E.raw)Y.t="s",Y.v=ae;else if(ae.trim().length===0)Y.t="s",Y.v=ae;else if(ae.charCodeAt(0)==61)ae.charCodeAt(1)==34&&ae.charCodeAt(ae.length-1)==34?(Y.t="s",Y.v=ae.slice(2,-1).replace(/""/g,'"')):k9(ae)?(Y.t="n",Y.f=ae.slice(1)):(Y.t="s",Y.v=ae);else if(ae=="TRUE")Y.t="b",Y.v=!0;else if(ae=="FALSE")Y.t="b",Y.v=!1;else if(!isNaN(M=Dn(ae)))Y.t="n",E.cellText!==!1&&(Y.w=ae),Y.v=M;else if(!isNaN(bc(ae).getDate())||U&&ae.match(U)){Y.z=E.dateNF||rr[14];var ue=0;U&&ae.match(U)&&(ae=WA(ae,E.dateNF,ae.match(U)||[]),ue=1),E.cellDates?(Y.t="d",Y.v=Xa(ae,ue)):(Y.t="n",Y.v=Ss(Xa(ae,ue))),E.cellText!==!1&&(Y.w=gn(Y.z,Y.v instanceof Date?Ss(Y.v):Y.v)),E.cellNF||delete Y.z}else Y.t="s",Y.v=ae;if(Y.t=="z"||(E.dense?(T[I]||(T[I]=[]),T[I][O]=Y):T[Zt({c:O,r:I})]=Y),D=B+1,P=w.charCodeAt(D),A.e.c<O&&(A.e.c=O),A.e.r<I&&(A.e.r=I),L==H)++O;else if(O=0,++I,E.sheetRows&&E.sheetRows<=I)return!0}e:for(;B<w.length;++B)switch(L=w.charCodeAt(B)){case 34:P===34&&(z=!z);break;case H:case 10:case 13:if(!z&&Z())break e;break}return B-D>0&&Z(),T["!ref"]=vr(A),T}function f(w,j){return!(j&&j.PRN)||j.FS||w.slice(0,4)=="sep="||w.indexOf("	")>=0||w.indexOf(",")>=0||w.indexOf(";")>=0?d(w,j):Ac(a(w,j),j)}function h(w,j){var E="",_=j.type=="string"?[0,0,0,0]:_g(w,j);switch(j.type){case"base64":E=rn(w);break;case"binary":E=w;break;case"buffer":j.codepage==65001?E=w.toString("utf8"):j.codepage&&typeof G0<"u"||(E=mr&&Buffer.isBuffer(w)?w.toString("binary"):wo(w));break;case"array":E=mo(w);break;case"string":E=w;break;default:throw new Error("Unrecognized type "+j.type)}return _[0]==239&&_[1]==187&&_[2]==191?E=Xr(E.slice(3)):j.type!="string"&&j.type!="buffer"&&j.codepage==65001?E=Xr(E):j.type=="binary"&&typeof G0<"u",E.slice(0,19)=="socialcalc:version:"?BT.to_sheet(j.type=="string"?E:Xr(E),j):f(E,j)}function b(w,j){return Rl(h(w,j),j)}function p(w){for(var j=[],E=ma(w["!ref"]),_,T=Array.isArray(w),A=E.s.r;A<=E.e.r;++A){for(var I=[],O=E.s.c;O<=E.e.c;++O){var M=Zt({r:A,c:O});if(_=T?(w[A]||[])[O]:w[M],!_||_.v==null){I.push("          ");continue}for(var D=(_.w||(Pi(_),_.w)||"").slice(0,10);D.length<10;)D+=" ";I.push(D+(O===0?" ":""))}j.push(I.join(""))}return j.join(`
`)}return{to_workbook:b,to_sheet:h,from_sheet:p}}();function LT(t,a){var r=a||{},i=!!r.WTF;r.WTF=!0;try{var l=FT.to_workbook(t,r);return r.WTF=i,l}catch(d){if(r.WTF=i,!d.message.match(/SYLK bad record ID/)&&i)throw d;return Y0.to_workbook(t,a)}}var O0=function(){function t(Q,X,se){if(Q){Za(Q,Q.l||0);for(var ne=se.Enum||oe;Q.l<Q.length;){var K=Q.read_shift(2),Se=ne[K]||ne[65535],we=Q.read_shift(2),Ve=Q.l+we,Le=Se.f&&Se.f(Q,we,se);if(Q.l=Ve,X(Le,Se,K))return}}}function a(Q,X){switch(X.type){case"base64":return r(_n(rn(Q)),X);case"binary":return r(_n(Q),X);case"buffer":case"array":return r(Q,X)}throw"Unsupported type "+X.type}function r(Q,X){if(!Q)return Q;var se=X||{},ne=se.dense?[]:{},K="Sheet1",Se="",we=0,Ve={},Le=[],ot=[],J={s:{r:0,c:0},e:{r:0,c:0}},Ne=se.sheetRows||0;if(Q[2]==0&&(Q[3]==8||Q[3]==9)&&Q.length>=16&&Q[14]==5&&Q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Q[2]==2)se.Enum=oe,t(Q,function(_e,ut,pe){switch(pe){case 0:se.vers=_e,_e>=4096&&(se.qpro=!0);break;case 6:J=_e;break;case 204:_e&&(Se=_e);break;case 222:Se=_e;break;case 15:case 51:se.qpro||(_e[1].v=_e[1].v.slice(1));case 13:case 14:case 16:pe==14&&(_e[2]&112)==112&&(_e[2]&15)>1&&(_e[2]&15)<15&&(_e[1].z=se.dateNF||rr[14],se.cellDates&&(_e[1].t="d",_e[1].v=Nf(_e[1].v))),se.qpro&&_e[3]>we&&(ne["!ref"]=vr(J),Ve[K]=ne,Le.push(K),ne=se.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},we=_e[3],K=Se||"Sheet"+(we+1),Se="");var Ge=se.dense?(ne[_e[0].r]||[])[_e[0].c]:ne[Zt(_e[0])];if(Ge){Ge.t=_e[1].t,Ge.v=_e[1].v,_e[1].z!=null&&(Ge.z=_e[1].z),_e[1].f!=null&&(Ge.f=_e[1].f);break}se.dense?(ne[_e[0].r]||(ne[_e[0].r]=[]),ne[_e[0].r][_e[0].c]=_e[1]):ne[Zt(_e[0])]=_e[1];break}},se);else if(Q[2]==26||Q[2]==14)se.Enum=re,Q[2]==14&&(se.qpro=!0,Q.l=0),t(Q,function(_e,ut,pe){switch(pe){case 204:K=_e;break;case 22:_e[1].v=_e[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(_e[3]>we&&(ne["!ref"]=vr(J),Ve[K]=ne,Le.push(K),ne=se.dense?[]:{},J={s:{r:0,c:0},e:{r:0,c:0}},we=_e[3],K="Sheet"+(we+1)),Ne>0&&_e[0].r>=Ne)break;se.dense?(ne[_e[0].r]||(ne[_e[0].r]=[]),ne[_e[0].r][_e[0].c]=_e[1]):ne[Zt(_e[0])]=_e[1],J.e.c<_e[0].c&&(J.e.c=_e[0].c),J.e.r<_e[0].r&&(J.e.r=_e[0].r);break;case 27:_e[14e3]&&(ot[_e[14e3][0]]=_e[14e3][1]);break;case 1537:ot[_e[0]]=_e[1],_e[0]==we&&(K=_e[1]);break}},se);else throw new Error("Unrecognized LOTUS BOF "+Q[2]);if(ne["!ref"]=vr(J),Ve[Se||K]=ne,Le.push(Se||K),!ot.length)return{SheetNames:Le,Sheets:Ve};for(var Ie={},ke=[],Qe=0;Qe<ot.length;++Qe)Ve[Le[Qe]]?(ke.push(ot[Qe]||Le[Qe]),Ie[ot[Qe]]=Ve[ot[Qe]]||Ve[Le[Qe]]):(ke.push(ot[Qe]),Ie[ot[Qe]]={"!ref":"A1"});return{SheetNames:ke,Sheets:Ie}}function i(Q,X){var se=X||{};if(+se.codepage>=0&&An(+se.codepage),se.type=="string")throw new Error("Cannot write WK1 to JS string");var ne=Om(),K=ma(Q["!ref"]),Se=Array.isArray(Q),we=[];En(ne,0,d(1030)),En(ne,6,b(K));for(var Ve=Math.min(K.e.r,8191),Le=K.s.r;Le<=Ve;++Le)for(var ot=es(Le),J=K.s.c;J<=K.e.c;++J){Le===K.s.r&&(we[J]=Pa(J));var Ne=we[J]+ot,Ie=Se?(Q[Le]||[])[J]:Q[Ne];if(!(!Ie||Ie.t=="z"))if(Ie.t=="n")(Ie.v|0)==Ie.v&&Ie.v>=-32768&&Ie.v<=32767?En(ne,13,_(Le,J,Ie.v)):En(ne,14,A(Le,J,Ie.v));else{var ke=Pi(Ie);En(ne,15,j(Le,J,ke.slice(0,239)))}}return En(ne,1),ne.end()}function l(Q,X){var se=X||{};if(+se.codepage>=0&&An(+se.codepage),se.type=="string")throw new Error("Cannot write WK3 to JS string");var ne=Om();En(ne,0,f(Q));for(var K=0,Se=0;K<Q.SheetNames.length;++K)(Q.Sheets[Q.SheetNames[K]]||{})["!ref"]&&En(ne,27,le(Q.SheetNames[K],Se++));var we=0;for(K=0;K<Q.SheetNames.length;++K){var Ve=Q.Sheets[Q.SheetNames[K]];if(!(!Ve||!Ve["!ref"])){for(var Le=ma(Ve["!ref"]),ot=Array.isArray(Ve),J=[],Ne=Math.min(Le.e.r,8191),Ie=Le.s.r;Ie<=Ne;++Ie)for(var ke=es(Ie),Qe=Le.s.c;Qe<=Le.e.c;++Qe){Ie===Le.s.r&&(J[Qe]=Pa(Qe));var _e=J[Qe]+ke,ut=ot?(Ve[Ie]||[])[Qe]:Ve[_e];if(!(!ut||ut.t=="z"))if(ut.t=="n")En(ne,23,Z(Ie,Qe,we,ut.v));else{var pe=Pi(ut);En(ne,22,L(Ie,Qe,we,pe.slice(0,239)))}}++we}}return En(ne,1),ne.end()}function d(Q){var X=La(2);return X.write_shift(2,Q),X}function f(Q){var X=La(26);X.write_shift(2,4096),X.write_shift(2,4),X.write_shift(4,0);for(var se=0,ne=0,K=0,Se=0;Se<Q.SheetNames.length;++Se){var we=Q.SheetNames[Se],Ve=Q.Sheets[we];if(!(!Ve||!Ve["!ref"])){++K;var Le=_c(Ve["!ref"]);se<Le.e.r&&(se=Le.e.r),ne<Le.e.c&&(ne=Le.e.c)}}return se>8191&&(se=8191),X.write_shift(2,se),X.write_shift(1,K),X.write_shift(1,ne),X.write_shift(2,0),X.write_shift(2,0),X.write_shift(1,1),X.write_shift(1,2),X.write_shift(4,0),X.write_shift(4,0),X}function h(Q,X,se){var ne={s:{c:0,r:0},e:{c:0,r:0}};return X==8&&se.qpro?(ne.s.c=Q.read_shift(1),Q.l++,ne.s.r=Q.read_shift(2),ne.e.c=Q.read_shift(1),Q.l++,ne.e.r=Q.read_shift(2),ne):(ne.s.c=Q.read_shift(2),ne.s.r=Q.read_shift(2),X==12&&se.qpro&&(Q.l+=2),ne.e.c=Q.read_shift(2),ne.e.r=Q.read_shift(2),X==12&&se.qpro&&(Q.l+=2),ne.s.c==65535&&(ne.s.c=ne.e.c=ne.s.r=ne.e.r=0),ne)}function b(Q){var X=La(8);return X.write_shift(2,Q.s.c),X.write_shift(2,Q.s.r),X.write_shift(2,Q.e.c),X.write_shift(2,Q.e.r),X}function p(Q,X,se){var ne=[{c:0,r:0},{t:"n",v:0},0,0];return se.qpro&&se.vers!=20768?(ne[0].c=Q.read_shift(1),ne[3]=Q.read_shift(1),ne[0].r=Q.read_shift(2),Q.l+=2):(ne[2]=Q.read_shift(1),ne[0].c=Q.read_shift(2),ne[0].r=Q.read_shift(2)),ne}function w(Q,X,se){var ne=Q.l+X,K=p(Q,X,se);if(K[1].t="s",se.vers==20768){Q.l++;var Se=Q.read_shift(1);return K[1].v=Q.read_shift(Se,"utf8"),K}return se.qpro&&Q.l++,K[1].v=Q.read_shift(ne-Q.l,"cstr"),K}function j(Q,X,se){var ne=La(7+se.length);ne.write_shift(1,255),ne.write_shift(2,X),ne.write_shift(2,Q),ne.write_shift(1,39);for(var K=0;K<ne.length;++K){var Se=se.charCodeAt(K);ne.write_shift(1,Se>=128?95:Se)}return ne.write_shift(1,0),ne}function E(Q,X,se){var ne=p(Q,X,se);return ne[1].v=Q.read_shift(2,"i"),ne}function _(Q,X,se){var ne=La(7);return ne.write_shift(1,255),ne.write_shift(2,X),ne.write_shift(2,Q),ne.write_shift(2,se,"i"),ne}function T(Q,X,se){var ne=p(Q,X,se);return ne[1].v=Q.read_shift(8,"f"),ne}function A(Q,X,se){var ne=La(13);return ne.write_shift(1,255),ne.write_shift(2,X),ne.write_shift(2,Q),ne.write_shift(8,se,"f"),ne}function I(Q,X,se){var ne=Q.l+X,K=p(Q,X,se);if(K[1].v=Q.read_shift(8,"f"),se.qpro)Q.l=ne;else{var Se=Q.read_shift(2);B(Q.slice(Q.l,Q.l+Se),K),Q.l+=Se}return K}function O(Q,X,se){var ne=X&32768;return X&=-32769,X=(ne?Q:0)+(X>=8192?X-16384:X),(ne?"":"$")+(se?Pa(X):es(X))}var M={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},D=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(Q,X){Za(Q,0);for(var se=[],ne=0,K="",Se="",we="",Ve="";Q.l<Q.length;){var Le=Q[Q.l++];switch(Le){case 0:se.push(Q.read_shift(8,"f"));break;case 1:Se=O(X[0].c,Q.read_shift(2),!0),K=O(X[0].r,Q.read_shift(2),!1),se.push(Se+K);break;case 2:{var ot=O(X[0].c,Q.read_shift(2),!0),J=O(X[0].r,Q.read_shift(2),!1);Se=O(X[0].c,Q.read_shift(2),!0),K=O(X[0].r,Q.read_shift(2),!1),se.push(ot+J+":"+Se+K)}break;case 3:if(Q.l<Q.length){console.error("WK1 premature formula end");return}break;case 4:se.push("("+se.pop()+")");break;case 5:se.push(Q.read_shift(2));break;case 6:{for(var Ne="";Le=Q[Q.l++];)Ne+=String.fromCharCode(Le);se.push('"'+Ne.replace(/"/g,'""')+'"')}break;case 8:se.push("-"+se.pop());break;case 23:se.push("+"+se.pop());break;case 22:se.push("NOT("+se.pop()+")");break;case 20:case 21:Ve=se.pop(),we=se.pop(),se.push(["AND","OR"][Le-20]+"("+we+","+Ve+")");break;default:if(Le<32&&D[Le])Ve=se.pop(),we=se.pop(),se.push(we+D[Le]+Ve);else if(M[Le]){if(ne=M[Le][1],ne==69&&(ne=Q[Q.l++]),ne>se.length){console.error("WK1 bad formula parse 0x"+Le.toString(16)+":|"+se.join("|")+"|");return}var Ie=se.slice(-ne);se.length-=ne,se.push(M[Le][0]+"("+Ie.join(",")+")")}else return Le<=7?console.error("WK1 invalid opcode "+Le.toString(16)):Le<=24?console.error("WK1 unsupported op "+Le.toString(16)):Le<=30?console.error("WK1 invalid opcode "+Le.toString(16)):Le<=115?console.error("WK1 unsupported function opcode "+Le.toString(16)):console.error("WK1 unrecognized opcode "+Le.toString(16))}}se.length==1?X[1].f=""+se[0]:console.error("WK1 bad formula parse |"+se.join("|")+"|")}function H(Q){var X=[{c:0,r:0},{t:"n",v:0},0];return X[0].r=Q.read_shift(2),X[3]=Q[Q.l++],X[0].c=Q[Q.l++],X}function z(Q,X){var se=H(Q);return se[1].t="s",se[1].v=Q.read_shift(X-4,"cstr"),se}function L(Q,X,se,ne){var K=La(6+ne.length);K.write_shift(2,Q),K.write_shift(1,se),K.write_shift(1,X),K.write_shift(1,39);for(var Se=0;Se<ne.length;++Se){var we=ne.charCodeAt(Se);K.write_shift(1,we>=128?95:we)}return K.write_shift(1,0),K}function P(Q,X){var se=H(Q);se[1].v=Q.read_shift(2);var ne=se[1].v>>1;if(se[1].v&1)switch(ne&7){case 0:ne=(ne>>3)*5e3;break;case 1:ne=(ne>>3)*500;break;case 2:ne=(ne>>3)/20;break;case 3:ne=(ne>>3)/200;break;case 4:ne=(ne>>3)/2e3;break;case 5:ne=(ne>>3)/2e4;break;case 6:ne=(ne>>3)/16;break;case 7:ne=(ne>>3)/64;break}return se[1].v=ne,se}function U(Q,X){var se=H(Q),ne=Q.read_shift(4),K=Q.read_shift(4),Se=Q.read_shift(2);if(Se==65535)return ne===0&&K===3221225472?(se[1].t="e",se[1].v=15):ne===0&&K===3489660928?(se[1].t="e",se[1].v=42):se[1].v=0,se;var we=Se&32768;return Se=(Se&32767)-16446,se[1].v=(1-we*2)*(K*Math.pow(2,Se+32)+ne*Math.pow(2,Se)),se}function Z(Q,X,se,ne){var K=La(14);if(K.write_shift(2,Q),K.write_shift(1,se),K.write_shift(1,X),ne==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var Se=0,we=0,Ve=0,Le=0;return ne<0&&(Se=1,ne=-ne),we=Math.log2(ne)|0,ne/=Math.pow(2,we-31),Le=ne>>>0,(Le&2147483648)==0&&(ne/=2,++we,Le=ne>>>0),ne-=Le,Le|=2147483648,Le>>>=0,ne*=Math.pow(2,32),Ve=ne>>>0,K.write_shift(4,Ve),K.write_shift(4,Le),we+=16383+(Se?32768:0),K.write_shift(2,we),K}function ae(Q,X){var se=U(Q);return Q.l+=X-14,se}function Y(Q,X){var se=H(Q),ne=Q.read_shift(4);return se[1].v=ne>>6,se}function ue(Q,X){var se=H(Q),ne=Q.read_shift(8,"f");return se[1].v=ne,se}function de(Q,X){var se=ue(Q);return Q.l+=X-10,se}function G(Q,X){return Q[Q.l+X-1]==0?Q.read_shift(X,"cstr"):""}function q(Q,X){var se=Q[Q.l++];se>X-1&&(se=X-1);for(var ne="";ne.length<se;)ne+=String.fromCharCode(Q[Q.l++]);return ne}function xe(Q,X,se){if(!(!se.qpro||X<21)){var ne=Q.read_shift(1);Q.l+=17,Q.l+=1,Q.l+=2;var K=Q.read_shift(X-21,"cstr");return[ne,K]}}function Ce(Q,X){for(var se={},ne=Q.l+X;Q.l<ne;){var K=Q.read_shift(2);if(K==14e3){for(se[K]=[0,""],se[K][0]=Q.read_shift(2);Q[Q.l];)se[K][1]+=String.fromCharCode(Q[Q.l]),Q.l++;Q.l++}}return se}function le(Q,X){var se=La(5+Q.length);se.write_shift(2,14e3),se.write_shift(2,X);for(var ne=0;ne<Q.length;++ne){var K=Q.charCodeAt(ne);se[se.l++]=K>127?95:K}return se[se.l++]=0,se}var oe={0:{n:"BOF",f:Aa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:E},14:{n:"NUMBER",f:T},15:{n:"LABEL",f:w},16:{n:"FORMULA",f:I},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:w},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:q},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:z},23:{n:"NUMBER17",f:U},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:ae},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Ce},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:Y},38:{n:"??"},39:{n:"NUMBER27",f:ue},40:{n:"FORMULA28",f:de},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:xe},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:l,to_workbook:a}}();function PT(t){var a={},r=t.match(gs),i=0,l=!1;if(r)for(;i!=r.length;++i){var d=Vt(r[i]);switch(d[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!d.val)break;case"<shadow>":case"<shadow/>":a.shadow=1;break;case"</shadow>":break;case"<charset":if(d.val=="1")break;a.cp=ag[parseInt(d.val,10)];break;case"<outline":if(!d.val)break;case"<outline>":case"<outline/>":a.outline=1;break;case"</outline>":break;case"<rFont":a.name=d.val;break;case"<sz":a.sz=d.val;break;case"<strike":if(!d.val)break;case"<strike>":case"<strike/>":a.strike=1;break;case"</strike>":break;case"<u":if(!d.val)break;switch(d.val){case"double":a.uval="double";break;case"singleAccounting":a.uval="single-accounting";break;case"doubleAccounting":a.uval="double-accounting";break}case"<u>":case"<u/>":a.u=1;break;case"</u>":break;case"<b":if(d.val=="0")break;case"<b>":case"<b/>":a.b=1;break;case"</b>":break;case"<i":if(d.val=="0")break;case"<i>":case"<i/>":a.i=1;break;case"</i>":break;case"<color":d.rgb&&(a.color=d.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":a.family=d.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":a.valign=d.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(d[0].charCodeAt(1)!==47&&!l)throw new Error("Unrecognized rich format "+d[0])}}return a}var zT=function(){var t=q0("t"),a=q0("rPr");function r(d){var f=d.match(t);if(!f)return{t:"s",v:""};var h={t:"s",v:kr(f[1])},b=d.match(a);return b&&(h.s=PT(b[1])),h}var i=/<(?:\w+:)?r>/g,l=/<\/(?:\w+:)?r>/;return function(f){return f.replace(i,"").split(l).map(r).filter(function(h){return h.v})}}(),UT=function(){var a=/(\r\n|\n)/g;function r(l,d,f){var h=[];l.u&&h.push("text-decoration: underline;"),l.uval&&h.push("text-underline-style:"+l.uval+";"),l.sz&&h.push("font-size:"+l.sz+"pt;"),l.outline&&h.push("text-effect: outline;"),l.shadow&&h.push("text-shadow: auto;"),d.push('<span style="'+h.join("")+'">'),l.b&&(d.push("<b>"),f.push("</b>")),l.i&&(d.push("<i>"),f.push("</i>")),l.strike&&(d.push("<s>"),f.push("</s>"));var b=l.valign||"";return b=="superscript"||b=="super"?b="sup":b=="subscript"&&(b="sub"),b!=""&&(d.push("<"+b+">"),f.push("</"+b+">")),f.push("</span>"),l}function i(l){var d=[[],l.v,[]];return l.v?(l.s&&r(l.s,d[0],d[2]),d[0].join("")+d[1].replace(a,"<br/>")+d[2].join("")):""}return function(d){return d.map(i).join("")}}(),HT=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,VT=/<(?:\w+:)?r>/,GT=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function vg(t,a){var r=a?a.cellHTML:!0,i={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=kr(Xr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=Xr(t),r&&(i.h=dg(i.t))):t.match(VT)&&(i.r=Xr(t),i.t=kr(Xr((t.replace(GT,"").match(HT)||[]).join("").replace(gs,""))),r&&(i.h=UT(zT(i.r)))),i):{t:""}}var XT=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,qT=/<(?:\w+:)?(?:si|sstItem)>/g,$T=/<\/(?:\w+:)?(?:si|sstItem)>/;function YT(t,a){var r=[],i="";if(!t)return r;var l=t.match(XT);if(l){i=l[2].replace(qT,"").split($T);for(var d=0;d!=i.length;++d){var f=vg(i[d].trim(),a);f!=null&&(r[r.length]=f)}l=Vt(l[1]),r.Count=l.count,r.Unique=l.uniqueCount}return r}function WT(t){return[t.read_shift(4),t.read_shift(4)]}function KT(t,a){var r=[],i=!1;return zi(t,function(d,f,h){switch(h){case 159:r.Count=d[0],r.Unique=d[1];break;case 19:r.push(d);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(f.T,!i||a.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function h4(t){for(var a=[],r=t.split(""),i=0;i<r.length;++i)a[i]=r[i].charCodeAt(0);return a}function Ri(t,a){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),a>=4&&(t.l+=a-4),r}function ZT(t){var a={};return a.id=t.read_shift(0,"lpp4"),a.R=Ri(t,4),a.U=Ri(t,4),a.W=Ri(t,4),a}function QT(t){for(var a=t.read_shift(4),r=t.l+a-4,i={},l=t.read_shift(4),d=[];l-- >0;)d.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(i.name=t.read_shift(0,"lpp4"),i.comps=d,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return i}function JT(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(QT(t));return a}function e7(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(t.read_shift(0,"lpp4"));return a}function t7(t){var a={};return t.read_shift(4),t.l+=4,a.id=t.read_shift(0,"lpp4"),a.name=t.read_shift(0,"lpp4"),a.R=Ri(t,4),a.U=Ri(t,4),a.W=Ri(t,4),a}function r7(t){var a=t7(t);if(a.ename=t.read_shift(0,"8lpp4"),a.blksz=t.read_shift(4),a.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return a}function m4(t,a){var r=t.l+a,i={};i.Flags=t.read_shift(4)&63,t.l+=4,i.AlgID=t.read_shift(4);var l=!1;switch(i.AlgID){case 26126:case 26127:case 26128:l=i.Flags==36;break;case 26625:l=i.Flags==4;break;case 0:l=i.Flags==16||i.Flags==4||i.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!l)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=t.read_shift(4),i.KeySize=t.read_shift(4),i.ProviderType=t.read_shift(4),t.l+=8,i.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,i}function g4(t,a){var r={},i=t.l+a;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,i),t.l=i,r}function a7(t){var a=Ri(t);switch(a.Minor){case 2:return[a.Minor,s7(t)];case 3:return[a.Minor,n7()];case 4:return[a.Minor,i7(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+a.Minor)}function s7(t){var a=t.read_shift(4);if((a&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),i=m4(t,r),l=g4(t,t.length-t.l);return{t:"Std",h:i,v:l}}function n7(){throw new Error("File is password-protected: ECMA-376 Extensible")}function i7(t){var a=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),i={};return r.replace(gs,function(d){var f=Vt(d);switch(oi(f[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":a.forEach(function(h){i[h]=f[h]});break;case"<dataIntegrity":i.encryptedHmacKey=f.encryptedHmacKey,i.encryptedHmacValue=f.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":i.uri=f.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":i.encs.push(f);break;default:throw f[0]}}),i}function l7(t,a){var r={},i=r.EncryptionVersionInfo=Ri(t,4);if(a-=4,i.Minor!=2)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);r.Flags=t.read_shift(4),a-=4;var l=t.read_shift(4);return a-=4,r.EncryptionHeader=m4(t,l),a-=l,r.EncryptionVerifier=g4(t,a),r}function o7(t){var a={},r=a.EncryptionVersionInfo=Ri(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return a.Salt=t.read_shift(16),a.EncryptedVerifier=t.read_shift(16),a.EncryptedVerifierHash=t.read_shift(16),a}function c7(t){var a=0,r,i=h4(t),l=i.length+1,d,f,h,b,p;for(r=Sl(l),r[0]=i.length,d=1;d!=l;++d)r[d]=i[d-1];for(d=l-1;d>=0;--d)f=r[d],h=(a&16384)===0?0:1,b=a<<1&32767,p=h|b,a=p^f;return a^52811}var p4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],a=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(f){return(f/2|f*128)&255},l=function(f,h){return i(f^h)},d=function(f){for(var h=a[f.length-1],b=104,p=f.length-1;p>=0;--p)for(var w=f[p],j=0;j!=7;++j)w&64&&(h^=r[b]),w*=2,--b;return h};return function(f){for(var h=h4(f),b=d(h),p=h.length,w=Sl(16),j=0;j!=16;++j)w[j]=0;var E,_,T;for((p&1)===1&&(E=b>>8,w[p]=l(t[0],E),--p,E=b&255,_=h[h.length-1],w[p]=l(_,E));p>0;)--p,E=b>>8,w[p]=l(h[p],E),--p,E=b&255,w[p]=l(h[p],E);for(p=15,T=15-h.length;T>0;)E=b>>8,w[p]=l(t[T],E),--p,--T,E=b&255,w[p]=l(h[p],E),--p,--T;return w}}(),d7=function(t,a,r,i,l){l||(l=a),i||(i=p4(t));var d,f;for(d=0;d!=a.length;++d)f=a[d],f^=i[r],f=(f>>5|f<<3)&255,l[d]=f,++r;return[l,r,i]},u7=function(t){var a=0,r=p4(t);return function(i){var l=d7("",i,a,r);return a=l[1],l[0]}};function f7(t,a,r,i){var l={key:Aa(t),verificationBytes:Aa(t)};return r.password&&(l.verifier=c7(r.password)),i.valid=l.verificationBytes===l.verifier,i.valid&&(i.insitu=u7(r.password)),l}function x7(t,a,r){var i=r||{};return i.Info=t.read_shift(2),t.l-=2,i.Info===1?i.Data=o7(t):i.Data=l7(t,a),i}function h7(t,a,r){var i={Type:r.biff>=8?t.read_shift(2):0};return i.Type?x7(t,a-2,i):f7(t,r.biff>=8?a:a-2,r,i),i}var m7=function(){function t(l,d){switch(d.type){case"base64":return a(rn(l),d);case"binary":return a(l,d);case"buffer":return a(mr&&Buffer.isBuffer(l)?l.toString("binary"):wo(l),d);case"array":return a(mo(l),d)}throw new Error("Unrecognized type "+d.type)}function a(l,d){var f=d||{},h=f.dense?[]:{},b=l.match(/\\trowd.*?\\row\b/g);if(!b.length)throw new Error("RTF missing table");var p={s:{c:0,r:0},e:{c:0,r:b.length-1}};return b.forEach(function(w,j){Array.isArray(h)&&(h[j]=[]);for(var E=/\\\w+\b/g,_=0,T,A=-1;T=E.exec(w);){switch(T[0]){case"\\cell":var I=w.slice(_,E.lastIndex-T[0].length);if(I[0]==" "&&(I=I.slice(1)),++A,I.length){var O={v:I,t:"s"};Array.isArray(h)?h[j][A]=O:h[Zt({r:j,c:A})]=O}break}_=E.lastIndex}A>p.e.c&&(p.e.c=A)}),h["!ref"]=vr(p),h}function r(l,d){return Rl(t(l,d),d)}function i(l){for(var d=["{\\rtf1\\ansi"],f=ma(l["!ref"]),h,b=Array.isArray(l),p=f.s.r;p<=f.e.r;++p){d.push("\\trowd\\trautofit1");for(var w=f.s.c;w<=f.e.c;++w)d.push("\\cellx"+(w+1));for(d.push("\\pard\\intbl"),w=f.s.c;w<=f.e.c;++w){var j=Zt({r:p,c:w});h=b?(l[p]||[])[w]:l[j],!(!h||h.v==null&&(!h.f||h.F))&&(d.push(" "+(h.w||(Pi(h),h.w))),d.push("\\cell"))}d.push("\\pard\\intbl\\row")}return d.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:i}}();function g7(t){var a=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(a.slice(0,2),16),parseInt(a.slice(2,4),16),parseInt(a.slice(4,6),16)]}function W0(t){for(var a=0,r=1;a!=3;++a)r=r*256+(t[a]>255?255:t[a]<0?0:t[a]);return r.toString(16).toUpperCase().slice(1)}function p7(t){var a=t[0]/255,r=t[1]/255,i=t[2]/255,l=Math.max(a,r,i),d=Math.min(a,r,i),f=l-d;if(f===0)return[0,0,a];var h=0,b=0,p=l+d;switch(b=f/(p>1?2-p:p),l){case a:h=((r-i)/f+6)%6;break;case r:h=(i-a)/f+2;break;case i:h=(a-r)/f+4;break}return[h/6,b,p/2]}function y7(t){var a=t[0],r=t[1],i=t[2],l=r*2*(i<.5?i:1-i),d=i-l/2,f=[d,d,d],h=6*a,b;if(r!==0)switch(h|0){case 0:case 6:b=l*h,f[0]+=l,f[1]+=b;break;case 1:b=l*(2-h),f[0]+=b,f[1]+=l;break;case 2:b=l*(h-2),f[1]+=l,f[2]+=b;break;case 3:b=l*(4-h),f[1]+=b,f[2]+=l;break;case 4:b=l*(h-4),f[2]+=l,f[0]+=b;break;case 5:b=l*(6-h),f[2]+=b,f[0]+=l;break}for(var p=0;p!=3;++p)f[p]=Math.round(f[p]*255);return f}function af(t,a){if(a===0)return t;var r=p7(g7(t));return a<0?r[2]=r[2]*(1+a):r[2]=1-(1-r[2])*(1-a),W0(y7(r))}var y4=6,b7=15,v7=1,ks=y4;function sf(t){return Math.floor((t+Math.round(128/ks)/256)*ks)}function nf(t){return Math.floor((t-5)/ks*100+.5)/100}function Bm(t){return Math.round((t*ks+5)/ks*256)/256}function nm(t){return Bm(nf(sf(t)))}function wg(t){var a=Math.abs(t-nm(t)),r=ks;if(a>.005)for(ks=v7;ks<b7;++ks)Math.abs(t-nm(t))<=a&&(a=Math.abs(t-nm(t)),r=ks);ks=r}function vc(t){t.width?(t.wpx=sf(t.width),t.wch=nf(t.wpx),t.MDW=ks):t.wpx?(t.wch=nf(t.wpx),t.width=Bm(t.wch),t.MDW=ks):typeof t.wch=="number"&&(t.width=Bm(t.wch),t.wpx=sf(t.width),t.MDW=ks),t.customWidth&&delete t.customWidth}var w7=96,b4=w7;function v4(t){return t*96/b4}function K0(t){return t*b4/96}var N7={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function k7(t,a,r,i){a.Borders=[];var l={},d=!1;(t[0].match(gs)||[]).forEach(function(f){var h=Vt(f);switch(oi(h[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":l={},h.diagonalUp&&(l.diagonalUp=ea(h.diagonalUp)),h.diagonalDown&&(l.diagonalDown=ea(h.diagonalDown)),a.Borders.push(l);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(i&&i.WTF&&!d)throw new Error("unrecognized "+h[0]+" in borders")}})}function j7(t,a,r,i){a.Fills=[];var l={},d=!1;(t[0].match(gs)||[]).forEach(function(f){var h=Vt(f);switch(oi(h[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":l={},a.Fills.push(l);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":a.Fills.push(l),l={};break;case"<patternFill":case"<patternFill>":h.patternType&&(l.patternType=h.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":l.bgColor||(l.bgColor={}),h.indexed&&(l.bgColor.indexed=parseInt(h.indexed,10)),h.theme&&(l.bgColor.theme=parseInt(h.theme,10)),h.tint&&(l.bgColor.tint=parseFloat(h.tint)),h.rgb&&(l.bgColor.rgb=h.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":l.fgColor||(l.fgColor={}),h.theme&&(l.fgColor.theme=parseInt(h.theme,10)),h.tint&&(l.fgColor.tint=parseFloat(h.tint)),h.rgb!=null&&(l.fgColor.rgb=h.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(i&&i.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fills")}})}function C7(t,a,r,i){a.Fonts=[];var l={},d=!1;(t[0].match(gs)||[]).forEach(function(f){var h=Vt(f);switch(oi(h[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":a.Fonts.push(l),l={};break;case"<name":h.val&&(l.name=Xr(h.val));break;case"<name/>":case"</name>":break;case"<b":l.bold=h.val?ea(h.val):1;break;case"<b/>":l.bold=1;break;case"<i":l.italic=h.val?ea(h.val):1;break;case"<i/>":l.italic=1;break;case"<u":switch(h.val){case"none":l.underline=0;break;case"single":l.underline=1;break;case"double":l.underline=2;break;case"singleAccounting":l.underline=33;break;case"doubleAccounting":l.underline=34;break}break;case"<u/>":l.underline=1;break;case"<strike":l.strike=h.val?ea(h.val):1;break;case"<strike/>":l.strike=1;break;case"<outline":l.outline=h.val?ea(h.val):1;break;case"<outline/>":l.outline=1;break;case"<shadow":l.shadow=h.val?ea(h.val):1;break;case"<shadow/>":l.shadow=1;break;case"<condense":l.condense=h.val?ea(h.val):1;break;case"<condense/>":l.condense=1;break;case"<extend":l.extend=h.val?ea(h.val):1;break;case"<extend/>":l.extend=1;break;case"<sz":h.val&&(l.sz=+h.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":h.val&&(l.vertAlign=h.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":h.val&&(l.family=parseInt(h.val,10));break;case"<family/>":case"</family>":break;case"<scheme":h.val&&(l.scheme=h.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(h.val=="1")break;h.codepage=ag[parseInt(h.val,10)];break;case"<color":if(l.color||(l.color={}),h.auto&&(l.color.auto=ea(h.auto)),h.rgb)l.color.rgb=h.rgb.slice(-6);else if(h.indexed){l.color.index=parseInt(h.indexed,10);var b=oo[l.color.index];l.color.index==81&&(b=oo[1]),b||(b=oo[1]),l.color.rgb=b[0].toString(16)+b[1].toString(16)+b[2].toString(16)}else h.theme&&(l.color.theme=parseInt(h.theme,10),h.tint&&(l.color.tint=parseFloat(h.tint)),h.theme&&r.themeElements&&r.themeElements.clrScheme&&(l.color.rgb=af(r.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":d=!0;break;case"</AlternateContent>":d=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(i&&i.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fonts")}})}function E7(t,a,r){a.NumberFmt=[];for(var i=ni(rr),l=0;l<i.length;++l)a.NumberFmt[i[l]]=rr[i[l]];var d=t[0].match(gs);if(d)for(l=0;l<d.length;++l){var f=Vt(d[l]);switch(oi(f[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var h=kr(Xr(f.formatCode)),b=parseInt(f.numFmtId,10);if(a.NumberFmt[b]=h,b>0){if(b>392){for(b=392;b>60&&a.NumberFmt[b]!=null;--b);a.NumberFmt[b]=h}lo(h,b)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+f[0]+" in numFmts")}}}var Du=["numFmtId","fillId","fontId","borderId","xfId"],Ru=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function _7(t,a,r){a.CellXf=[];var i,l=!1;(t[0].match(gs)||[]).forEach(function(d){var f=Vt(d),h=0;switch(oi(f[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(i=f,delete i[0],h=0;h<Du.length;++h)i[Du[h]]&&(i[Du[h]]=parseInt(i[Du[h]],10));for(h=0;h<Ru.length;++h)i[Ru[h]]&&(i[Ru[h]]=ea(i[Ru[h]]));if(a.NumberFmt&&i.numFmtId>392){for(h=392;h>60;--h)if(a.NumberFmt[i.numFmtId]==a.NumberFmt[h]){i.numFmtId=h;break}}a.CellXf.push(i);break;case"</xf>":break;case"<alignment":case"<alignment/>":var b={};f.vertical&&(b.vertical=f.vertical),f.horizontal&&(b.horizontal=f.horizontal),f.textRotation!=null&&(b.textRotation=f.textRotation),f.indent&&(b.indent=f.indent),f.wrapText&&(b.wrapText=ea(f.wrapText)),i.alignment=b;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(r&&r.WTF&&!l)throw new Error("unrecognized "+f[0]+" in cellXfs")}})}var A7=function(){var a=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,l=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,d=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(h,b,p){var w={};if(!h)return w;h=h.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var j;return(j=h.match(a))&&E7(j,w,p),(j=h.match(l))&&C7(j,w,b,p),(j=h.match(i))&&j7(j,w,b,p),(j=h.match(d))&&k7(j,w,b,p),(j=h.match(r))&&_7(j,w,p),w}}();function S7(t,a){var r=t.read_shift(2),i=hs(t);return[r,i]}function T7(t,a,r){var i={};i.sz=t.read_shift(2)/20;var l=zS(t);l.fItalic&&(i.italic=1),l.fCondense&&(i.condense=1),l.fExtend&&(i.extend=1),l.fShadow&&(i.shadow=1),l.fOutline&&(i.outline=1),l.fStrikeout&&(i.strike=1);var d=t.read_shift(2);switch(d===700&&(i.bold=1),t.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var f=t.read_shift(1);f!=0&&(i.underline=f);var h=t.read_shift(1);h>0&&(i.family=h);var b=t.read_shift(1);switch(b>0&&(i.charset=b),t.l++,i.color=PS(t),t.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=hs(t),i}var D7=ms;function R7(t,a){var r=t.l+a,i=t.read_shift(2),l=t.read_shift(2);return t.l=r,{ixfe:i,numFmtId:l}}var O7=ms;function I7(t,a,r){var i={};i.NumberFmt=[];for(var l in rr)i.NumberFmt[l]=rr[l];i.CellXf=[],i.Fonts=[];var d=[],f=!1;return zi(t,function(b,p,w){switch(w){case 44:i.NumberFmt[b[0]]=b[1],lo(b[1],b[0]);break;case 43:i.Fonts.push(b),b.color.theme!=null&&a&&a.themeElements&&a.themeElements.clrScheme&&(b.color.rgb=af(a.themeElements.clrScheme[b.color.theme].rgb,b.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:d[d.length-1]==617&&i.CellXf.push(b);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:d.push(w),f=!0;break;case 38:d.pop(),f=!1;break;default:if(p.T>0)d.push(w);else if(p.T<0)d.pop();else if(!f||r.WTF&&d[d.length-1]!=37)throw new Error("Unexpected record 0x"+w.toString(16))}}),i}var F7=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function M7(t,a,r){a.themeElements.clrScheme=[];var i={};(t[0].match(gs)||[]).forEach(function(l){var d=Vt(l);switch(d[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=d.val;break;case"<a:sysClr":i.rgb=d.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":d[0].charAt(1)==="/"?(a.themeElements.clrScheme[F7.indexOf(d[0])]=i,i={}):i.name=d[0].slice(3,d[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+d[0]+" in clrScheme")}})}function B7(){}function L7(){}var P7=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,z7=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,U7=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function H7(t,a,r){a.themeElements={};var i;[["clrScheme",P7,M7],["fontScheme",z7,B7],["fmtScheme",U7,L7]].forEach(function(l){if(!(i=t.match(l[1])))throw new Error(l[0]+" not found in themeElements");l[2](i,a,r)})}var V7=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function w4(t,a){(!t||t.length===0)&&(t=G7());var r,i={};if(!(r=t.match(V7)))throw new Error("themeElements not found in theme");return H7(r[0],i,a),i.raw=t,i}function G7(t,a){var r=[Rw];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function X7(t,a,r){var i=t.l+a,l=t.read_shift(4);if(l!==124226){if(!r.cellStyles){t.l=i;return}var d=t.slice(t.l);t.l=i;var f;try{f=Dw(d,{type:"array"})}catch{return}var h=Js(f,"theme/theme/theme1.xml",!0);if(h)return w4(h,r)}}function q7(t){return t.read_shift(4)}function $7(t){var a={};switch(a.xclrType=t.read_shift(2),a.nTintShade=t.read_shift(2),a.xclrType){case 0:t.l+=4;break;case 1:a.xclrValue=Y7(t,4);break;case 2:a.xclrValue=l4(t);break;case 3:a.xclrValue=q7(t);break;case 4:t.l+=4;break}return t.l+=8,a}function Y7(t,a){return ms(t,a)}function W7(t,a){return ms(t,a)}function K7(t){var a=t.read_shift(2),r=t.read_shift(2)-4,i=[a];switch(a){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=$7(t);break;case 6:i[1]=W7(t,r);break;case 14:case 15:i[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+a+" "+r)}return i}function Z7(t,a){var r=t.l+a;t.l+=2;var i=t.read_shift(2);t.l+=2;for(var l=t.read_shift(2),d=[];l-- >0;)d.push(K7(t,r-t.l));return{ixfe:i,ext:d}}function Q7(t,a){a.forEach(function(r){r[0]})}function J7(t,a){return{flags:t.read_shift(4),version:t.read_shift(4),name:hs(t)}}function e9(t){for(var a=[],r=t.read_shift(4);r-- >0;)a.push([t.read_shift(4),t.read_shift(4)]);return a}function t9(t){return t.l+=4,t.read_shift(4)!=0}function r9(t,a,r){var i={Types:[],Cell:[],Value:[]},l=r||{},d=[],f=!1,h=2;return zi(t,function(b,p,w){switch(w){case 335:i.Types.push({name:b.name});break;case 51:b.forEach(function(j){h==1?i.Cell.push({type:i.Types[j[0]-1].name,index:j[1]}):h==0&&i.Value.push({type:i.Types[j[0]-1].name,index:j[1]})});break;case 337:h=b?1:0;break;case 338:h=2;break;case 35:d.push(w),f=!0;break;case 36:d.pop(),f=!1;break;default:if(!p.T){if(!f||l.WTF&&d[d.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}}),i}function a9(t,a,r){var i={Types:[],Cell:[],Value:[]};if(!t)return i;var l=!1,d=2,f;return t.replace(gs,function(h){var b=Vt(h);switch(oi(b[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":i.Types.push({name:b.name});break;case"</metadataType>":break;case"<futureMetadata":for(var p=0;p<i.Types.length;++p)i.Types[p].name==b.name&&(f=i.Types[p]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":d==1?i.Cell.push({type:i.Types[b.t-1].name,index:+b.v}):d==0&&i.Value.push({type:i.Types[b.t-1].name,index:+b.v});break;case"</rc>":break;case"<cellMetadata":d=1;break;case"</cellMetadata>":d=2;break;case"<valueMetadata":d=0;break;case"</valueMetadata>":d=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;case"<rvb":if(!f)break;f.offsets||(f.offsets=[]),f.offsets.push(+b.i);break;default:if(!l&&r.WTF)throw new Error("unrecognized "+b[0]+" in metadata")}return h}),i}function s9(t){var a=[];if(!t)return a;var r=1;return(t.match(gs)||[]).forEach(function(i){var l=Vt(i);switch(l[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete l[0],l.i?r=l.i:l.i=r,a.push(l);break}}),a}function n9(t){var a={};a.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),a.r=Zt(r);var i=t.read_shift(1);return i&2&&(a.l="1"),i&8&&(a.a="1"),a}function i9(t,a,r){var i=[];return zi(t,function(d,f,h){switch(h){case 63:i.push(d);break;default:if(!f.T)throw new Error("Unexpected record 0x"+h.toString(16))}}),i}function l9(t,a,r,i){if(!t)return t;var l=i||{},d=!1;zi(t,function(h,b,p){switch(p){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:d=!0;break;case 36:d=!1;break;default:if(!b.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+p.toString(16))}}},l)}function o9(t,a){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return a["!id"][r].Target}function D2(t,a,r,i){var l=Array.isArray(t),d;a.forEach(function(f){var h=Cs(f.ref);if(l?(t[h.r]||(t[h.r]=[]),d=t[h.r][h.c]):d=t[f.ref],!d){d={t:"z"},l?t[h.r][h.c]=d:t[f.ref]=d;var b=ma(t["!ref"]||"BDWGO1000001:A1");b.s.r>h.r&&(b.s.r=h.r),b.e.r<h.r&&(b.e.r=h.r),b.s.c>h.c&&(b.s.c=h.c),b.e.c<h.c&&(b.e.c=h.c);var p=vr(b);p!==t["!ref"]&&(t["!ref"]=p)}d.c||(d.c=[]);var w={a:f.author,t:f.t,r:f.r,T:r};f.h&&(w.h=f.h);for(var j=d.c.length-1;j>=0;--j){if(!r&&d.c[j].T)return;r&&!d.c[j].T&&d.c.splice(j,1)}if(r&&i){for(j=0;j<i.length;++j)if(w.a==i[j].id){w.a=i[j].name||w.a;break}}d.c.push(w)})}function c9(t,a){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],i=[],l=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);l&&l[1]&&l[1].split(/<\/\w*:?author>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?author[^>]*>(.*)/);h&&r.push(h[1])}});var d=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return d&&d[1]&&d[1].split(/<\/\w*:?comment>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?comment[^>]*>/);if(h){var b=Vt(h[0]),p={author:b.authorId&&r[b.authorId]||"sheetjsghost",ref:b.ref,guid:b.guid},w=Cs(b.ref);if(!(a.sheetRows&&a.sheetRows<=w.r)){var j=f.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),E=!!j&&!!j[1]&&vg(j[1])||{r:"",t:"",h:""};p.r=E.r,E.r=="<t></t>"&&(E.t=E.h=""),p.t=(E.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),a.cellHTML&&(p.h=E.h),i.push(p)}}}}),i}function d9(t,a){var r=[],i=!1,l={},d=0;return t.replace(gs,function(h,b){var p=Vt(h);switch(oi(p[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":l={author:p.personId,guid:p.id,ref:p.ref,T:1};break;case"</threadedComment>":l.t!=null&&r.push(l);break;case"<text>":case"<text":d=b+h.length;break;case"</text>":l.t=t.slice(d,b).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":i=!0;break;case"</mentions>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&a.WTF)throw new Error("unrecognized "+p[0]+" in threaded comments")}return h}),r}function u9(t,a){var r=[],i=!1;return t.replace(gs,function(d){var f=Vt(d);switch(oi(f[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:f.displayname,id:f.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&a.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return d}),r}function f9(t){var a={};a.iauthor=t.read_shift(4);var r=ko(t);return a.rfx=r.s,a.ref=Zt(r.s),t.l+=16,a}var x9=hs;function h9(t,a){var r=[],i=[],l={},d=!1;return zi(t,function(h,b,p){switch(p){case 632:i.push(h);break;case 635:l=h;break;case 637:l.t=h.t,l.h=h.h,l.r=h.r;break;case 636:if(l.author=i[l.iauthor],delete l.iauthor,a.sheetRows&&l.rfx&&a.sheetRows<=l.rfx.r)break;l.t||(l.t=""),delete l.rfx,r.push(l);break;case 3072:break;case 35:d=!0;break;case 36:d=!1;break;case 37:break;case 38:break;default:if(!b.T){if(!d||a.WTF)throw new Error("Unexpected record 0x"+p.toString(16))}}}),r}var m9="application/vnd.ms-office.vbaProject";function g9(t){var a=br.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,i){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var l=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");br.utils.cfb_add(a,l,t.FileIndex[i].content)}}),br.write(a)}function p9(){return{"!type":"dialog"}}function y9(){return{"!type":"dialog"}}function b9(){return{"!type":"macro"}}function v9(){return{"!type":"macro"}}var gc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,a={r:0,c:0};function r(i,l,d,f){var h=!1,b=!1;d.length==0?b=!0:d.charAt(0)=="["&&(b=!0,d=d.slice(1,-1)),f.length==0?h=!0:f.charAt(0)=="["&&(h=!0,f=f.slice(1,-1));var p=d.length>0?parseInt(d,10)|0:0,w=f.length>0?parseInt(f,10)|0:0;return h?w+=a.c:--w,b?p+=a.r:--p,l+(h?"":"$")+Pa(w)+(b?"":"$")+es(p)}return function(l,d){return a=d,l.replace(t,r)}}(),N4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,w9=function(){return function(a,r){return a.replace(N4,function(i,l,d,f,h,b){var p=hg(f)-(d?0:r.c),w=xg(b)-(h?0:r.r),j=w==0?"":h?w+1:"["+w+"]",E=p==0?"":d?p+1:"["+p+"]";return l+"R"+j+"C"+E})}}();function k4(t,a){return t.replace(N4,function(r,i,l,d,f,h){return i+(l=="$"?l+d:Pa(hg(d)+a.c))+(f=="$"?f+h:es(xg(h)+a.r))})}function N9(t,a,r){var i=_c(a),l=i.s,d=Cs(r),f={r:d.r-l.r,c:d.c-l.c};return k4(t,f)}function k9(t){return t.length!=1}function R2(t){return t.replace(/_xlfn\./g,"")}function Ea(t){t.l+=1}function Tl(t,a){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function j4(t,a,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return C4(t);r.biff==12&&(i=4)}var l=t.read_shift(i),d=t.read_shift(i),f=Tl(t),h=Tl(t);return{s:{r:l,c:f[0],cRel:f[1],rRel:f[2]},e:{r:d,c:h[0],cRel:h[1],rRel:h[2]}}}function C4(t){var a=Tl(t),r=Tl(t),i=t.read_shift(1),l=t.read_shift(1);return{s:{r:a[0],c:i,cRel:a[1],rRel:a[2]},e:{r:r[0],c:l,cRel:r[1],rRel:r[2]}}}function j9(t,a,r){if(r.biff<8)return C4(t);var i=t.read_shift(r.biff==12?4:2),l=t.read_shift(r.biff==12?4:2),d=Tl(t),f=Tl(t);return{s:{r:i,c:d[0],cRel:d[1],rRel:d[2]},e:{r:l,c:f[0],cRel:f[1],rRel:f[2]}}}function E4(t,a,r){if(r&&r.biff>=2&&r.biff<=5)return C9(t);var i=t.read_shift(r&&r.biff==12?4:2),l=Tl(t);return{r:i,c:l[0],cRel:l[1],rRel:l[2]}}function C9(t){var a=Tl(t),r=t.read_shift(1);return{r:a[0],c:r,cRel:a[1],rRel:a[2]}}function E9(t){var a=t.read_shift(2),r=t.read_shift(2);return{r:a,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function _9(t,a,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return A9(t);var l=t.read_shift(i>=12?4:2),d=t.read_shift(2),f=(d&16384)>>14,h=(d&32768)>>15;if(d&=16383,h==1)for(;l>524287;)l-=1048576;if(f==1)for(;d>8191;)d=d-16384;return{r:l,c:d,cRel:f,rRel:h}}function A9(t){var a=t.read_shift(2),r=t.read_shift(1),i=(a&32768)>>15,l=(a&16384)>>14;return a&=16383,i==1&&a>=8192&&(a=a-16384),l==1&&r>=128&&(r=r-256),{r:a,c:r,cRel:l,rRel:i}}function S9(t,a,r){var i=(t[t.l++]&96)>>5,l=j4(t,r.biff>=2&&r.biff<=5?6:8,r);return[i,l]}function T9(t,a,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2,"i"),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}var f=j4(t,d,r);return[i,l,f]}function D9(t,a,r){var i=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function R9(t,a,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}return t.l+=d,[i,l]}function O9(t,a,r){var i=(t[t.l++]&96)>>5,l=j9(t,a-1,r);return[i,l]}function I9(t,a,r){var i=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[i]}function O2(t){var a=t[t.l+1]&1,r=1;return t.l+=4,[a,r]}function F9(t,a,r){t.l+=2;for(var i=t.read_shift(r&&r.biff==2?1:2),l=[],d=0;d<=i;++d)l.push(t.read_shift(r&&r.biff==2?1:2));return l}function M9(t,a,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function B9(t,a,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function L9(t){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(2)]}function P9(t,a,r){var i=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[i]}function _4(t){var a=t.read_shift(1),r=t.read_shift(1);return[a,r]}function z9(t){return t.read_shift(2),_4(t)}function U9(t){return t.read_shift(2),_4(t)}function H9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=E4(t,0,r);return[i,l]}function V9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=_9(t,0,r);return[i,l]}function G9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var d=E4(t,0,r);return[i,l,d]}function X9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(r&&r.biff<=3?1:2);return[qD[l],T4[l],i]}function q9(t,a,r){var i=t[t.l++],l=t.read_shift(1),d=r&&r.biff<=3?[i==88?-1:0,t.read_shift(1)]:$9(t);return[l,(d[0]===0?T4:XD)[d[1]]]}function $9(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Y9(t,a,r){t.l+=r&&r.biff==2?3:4}function W9(t,a,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var i=t.read_shift(2),l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function K9(t){return t.l++,jo[t.read_shift(1)]}function Z9(t){return t.l++,t.read_shift(2)}function Q9(t){return t.l++,t.read_shift(1)!==0}function J9(t){return t.l++,fs(t)}function eD(t,a,r){return t.l++,ud(t,a-1,r)}function tD(t,a){var r=[t.read_shift(1)];if(a==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=wa(t,1)?"TRUE":"FALSE",a!=12&&(t.l+=7);break;case 37:case 16:r[1]=jo[t[t.l]],t.l+=a==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=fs(t);break;case 2:r[1]=Co(t,0,{biff:a>0&&a<8?2:a});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function rD(t,a,r){for(var i=t.read_shift(r.biff==12?4:2),l=[],d=0;d!=i;++d)l.push((r.biff==12?ko:kf)(t));return l}function aD(t,a,r){var i=0,l=0;r.biff==12?(i=t.read_shift(4),l=t.read_shift(4)):(l=1+t.read_shift(1),i=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--l==0&&(l=256));for(var d=0,f=[];d!=i&&(f[d]=[]);++d)for(var h=0;h!=l;++h)f[d][h]=tD(t,r.biff);return f}function sD(t,a,r){var i=t.read_shift(1)>>>5&3,l=!r||r.biff>=8?4:2,d=t.read_shift(l);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[i,0,d]}function nD(t,a,r){if(r.biff==5)return iD(t);var i=t.read_shift(1)>>>5&3,l=t.read_shift(2),d=t.read_shift(4);return[i,l,d]}function iD(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var i=t.read_shift(2);return t.l+=12,[a,r,i]}function lD(t,a,r){var i=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function oD(t,a,r){var i=t.read_shift(1)>>>5&3,l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function cD(t,a,r){var i=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[i]}function dD(t,a,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),d=4;if(r)switch(r.biff){case 5:d=15;break;case 12:d=6;break}return t.l+=d,[i,l]}var uD=ms,fD=ms,xD=ms;function xd(t,a,r){return t.l+=2,[E9(t)]}function Ng(t){return t.l+=6,[]}var hD=xd,mD=Ng,gD=Ng,pD=xd;function A4(t){return t.l+=2,[Aa(t),t.read_shift(2)&1]}var yD=xd,bD=A4,vD=Ng,wD=xd,ND=xd,kD=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function jD(t){t.l+=2;var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l=t.read_shift(2),d=t.read_shift(2),f=kD[r>>2&31];return{ixti:a,coltype:r&3,rt:f,idx:i,c:l,C:d}}function CD(t){return t.l+=2,[t.read_shift(4)]}function ED(t,a,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function _D(t,a,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function AD(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function SD(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function TD(t){return t.l+=4,[0,0]}var I2={1:{n:"PtgExp",f:W9},2:{n:"PtgTbl",f:xD},3:{n:"PtgAdd",f:Ea},4:{n:"PtgSub",f:Ea},5:{n:"PtgMul",f:Ea},6:{n:"PtgDiv",f:Ea},7:{n:"PtgPower",f:Ea},8:{n:"PtgConcat",f:Ea},9:{n:"PtgLt",f:Ea},10:{n:"PtgLe",f:Ea},11:{n:"PtgEq",f:Ea},12:{n:"PtgGe",f:Ea},13:{n:"PtgGt",f:Ea},14:{n:"PtgNe",f:Ea},15:{n:"PtgIsect",f:Ea},16:{n:"PtgUnion",f:Ea},17:{n:"PtgRange",f:Ea},18:{n:"PtgUplus",f:Ea},19:{n:"PtgUminus",f:Ea},20:{n:"PtgPercent",f:Ea},21:{n:"PtgParen",f:Ea},22:{n:"PtgMissArg",f:Ea},23:{n:"PtgStr",f:eD},26:{n:"PtgSheet",f:ED},27:{n:"PtgEndSheet",f:_D},28:{n:"PtgErr",f:K9},29:{n:"PtgBool",f:Q9},30:{n:"PtgInt",f:Z9},31:{n:"PtgNum",f:J9},32:{n:"PtgArray",f:I9},33:{n:"PtgFunc",f:X9},34:{n:"PtgFuncVar",f:q9},35:{n:"PtgName",f:sD},36:{n:"PtgRef",f:H9},37:{n:"PtgArea",f:S9},38:{n:"PtgMemArea",f:lD},39:{n:"PtgMemErr",f:uD},40:{n:"PtgMemNoMem",f:fD},41:{n:"PtgMemFunc",f:oD},42:{n:"PtgRefErr",f:cD},43:{n:"PtgAreaErr",f:D9},44:{n:"PtgRefN",f:V9},45:{n:"PtgAreaN",f:O9},46:{n:"PtgMemAreaN",f:AD},47:{n:"PtgMemNoMemN",f:SD},57:{n:"PtgNameX",f:nD},58:{n:"PtgRef3d",f:G9},59:{n:"PtgArea3d",f:T9},60:{n:"PtgRefErr3d",f:dD},61:{n:"PtgAreaErr3d",f:R9},255:{}},DD={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},RD={1:{n:"PtgElfLel",f:A4},2:{n:"PtgElfRw",f:wD},3:{n:"PtgElfCol",f:hD},6:{n:"PtgElfRwV",f:ND},7:{n:"PtgElfColV",f:pD},10:{n:"PtgElfRadical",f:yD},11:{n:"PtgElfRadicalS",f:vD},13:{n:"PtgElfColS",f:mD},15:{n:"PtgElfColSV",f:gD},16:{n:"PtgElfRadicalLel",f:bD},25:{n:"PtgList",f:jD},29:{n:"PtgSxName",f:CD},255:{}},OD={0:{n:"PtgAttrNoop",f:TD},1:{n:"PtgAttrSemi",f:P9},2:{n:"PtgAttrIf",f:B9},4:{n:"PtgAttrChoose",f:F9},8:{n:"PtgAttrGoto",f:M9},16:{n:"PtgAttrSum",f:Y9},32:{n:"PtgAttrBaxcel",f:O2},33:{n:"PtgAttrBaxcel",f:O2},64:{n:"PtgAttrSpace",f:z9},65:{n:"PtgAttrSpaceSemi",f:U9},128:{n:"PtgAttrIfError",f:L9},255:{}};function hd(t,a,r,i){if(i.biff<8)return ms(t,a);for(var l=t.l+a,d=[],f=0;f!==r.length;++f)switch(r[f][0]){case"PtgArray":r[f][1]=aD(t,0,i),d.push(r[f][1]);break;case"PtgMemArea":r[f][2]=rD(t,r[f][1],i),d.push(r[f][2]);break;case"PtgExp":i&&i.biff==12&&(r[f][1][1]=t.read_shift(4),d.push(r[f][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[f][0]}return a=l-t.l,a!==0&&d.push(ms(t,a)),d}function md(t,a,r){for(var i=t.l+a,l,d,f=[];i!=t.l;)a=i-t.l,d=t[t.l],l=I2[d]||I2[DD[d]],(d===24||d===25)&&(l=(d===24?RD:OD)[t[t.l+1]]),!l||!l.f?ms(t,a):f.push([l.n,l.f(t,a,r)]);return f}function ID(t){for(var a=[],r=0;r<t.length;++r){for(var i=t[r],l=[],d=0;d<i.length;++d){var f=i[d];if(f)switch(f[0]){case 2:l.push('"'+f[1].replace(/"/g,'""')+'"');break;default:l.push(f[1])}else l.push("")}a.push(l.join(","))}return a.join(";")}var FD={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function MD(t,a){if(!t&&!(a&&a.biff<=5&&a.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function S4(t,a,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[a]))return t.SheetNames[a];if(!t.XTI)return"SH33TJSERR6";var i=t.XTI[a];if(r.biff<8)return a>1e4&&(a-=65536),a<0&&(a=-a),a==0?"":t.XTI[a-1];if(!i)return"SH33TJSERR1";var l="";if(r.biff>8)switch(t[i[0]][0]){case 357:return l=i[1]==-1?"#REF":t.SheetNames[i[1]],i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[i[0]][0];case 355:default:return"SH33TJSSRC"+t[i[0]][0]}switch(t[i[0]][0][0]){case 1025:return l=i[1]==-1?"#REF":t.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 14849:return t[i[0]].slice(1).map(function(d){return d.Name}).join(";;");default:return t[i[0]][0][3]?(l=i[1]==-1?"#REF":t[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?l:l+":"+t[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function F2(t,a,r){var i=S4(t,a,r);return i=="#REF"?i:MD(i,r)}function ds(t,a,r,i,l){var d=l&&l.biff||8,f={s:{c:0,r:0}},h=[],b,p,w,j=0,E=0,_,T="";if(!t[0]||!t[0][0])return"";for(var A=-1,I="",O=0,M=t[0].length;O<M;++O){var D=t[0][O];switch(D[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(b=h.pop(),p=h.pop(),A>=0){switch(t[0][A][1][0]){case 0:I=fa(" ",t[0][A][1][1]);break;case 1:I=fa("\r",t[0][A][1][1]);break;default:if(I="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}p=p+I,A=-1}h.push(p+FD[D[0]]+b);break;case"PtgIsect":b=h.pop(),p=h.pop(),h.push(p+" "+b);break;case"PtgUnion":b=h.pop(),p=h.pop(),h.push(p+","+b);break;case"PtgRange":b=h.pop(),p=h.pop(),h.push(p+":"+b);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":w=S0(D[1][1],f,l),h.push(T0(w,d));break;case"PtgRefN":w=r?S0(D[1][1],r,l):D[1][1],h.push(T0(w,d));break;case"PtgRef3d":j=D[1][1],w=S0(D[1][2],f,l),T=F2(i,j,l),h.push(T+"!"+T0(w,d));break;case"PtgFunc":case"PtgFuncVar":var B=D[1][0],H=D[1][1];B||(B=0),B&=127;var z=B==0?[]:h.slice(-B);h.length-=B,H==="User"&&(H=z.shift()),h.push(H+"("+z.join(",")+")");break;case"PtgBool":h.push(D[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(D[1]);break;case"PtgNum":h.push(String(D[1]));break;case"PtgStr":h.push('"'+D[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(D[1]);break;case"PtgAreaN":_=m2(D[1][1],r?{s:r}:f,l),h.push(am(_,l));break;case"PtgArea":_=m2(D[1][1],f,l),h.push(am(_,l));break;case"PtgArea3d":j=D[1][1],_=D[1][2],T=F2(i,j,l),h.push(T+"!"+am(_,l));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":E=D[1][2];var L=(i.names||[])[E-1]||(i[0]||[])[E],P=L?L.Name:"SH33TJSNAME"+String(E);P&&P.slice(0,6)=="_xlfn."&&!l.xlfn&&(P=P.slice(6)),h.push(P);break;case"PtgNameX":var U=D[1][1];E=D[1][2];var Z;if(l.biff<=5)U<0&&(U=-U),i[U]&&(Z=i[U][E]);else{var ae="";if(((i[U]||[])[0]||[])[0]==14849||(((i[U]||[])[0]||[])[0]==1025?i[U][E]&&i[U][E].itab>0&&(ae=i.SheetNames[i[U][E].itab-1]+"!"):ae=i.SheetNames[E-1]+"!"),i[U]&&i[U][E])ae+=i[U][E].Name;else if(i[0]&&i[0][E])ae+=i[0][E].Name;else{var Y=(S4(i,U,l)||"").split(";;");Y[E-1]?ae=Y[E-1]:ae+="SH33TJSERRX"}h.push(ae);break}Z||(Z={Name:"SH33TJSERRY"}),h.push(Z.Name);break;case"PtgParen":var ue="(",de=")";if(A>=0){switch(I="",t[0][A][1][0]){case 2:ue=fa(" ",t[0][A][1][1])+ue;break;case 3:ue=fa("\r",t[0][A][1][1])+ue;break;case 4:de=fa(" ",t[0][A][1][1])+de;break;case 5:de=fa("\r",t[0][A][1][1])+de;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}A=-1}h.push(ue+h.pop()+de);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":w={c:D[1][1],r:D[1][0]};var G={c:r.c,r:r.r};if(i.sharedf[Zt(w)]){var q=i.sharedf[Zt(w)];h.push(ds(q,f,G,i,l))}else{var xe=!1;for(b=0;b!=i.arrayf.length;++b)if(p=i.arrayf[b],!(w.c<p[0].s.c||w.c>p[0].e.c)&&!(w.r<p[0].s.r||w.r>p[0].e.r)){h.push(ds(p[1],f,G,i,l)),xe=!0;break}xe||h.push(D[1])}break;case"PtgArray":h.push("{"+ID(D[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":A=O;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+D[1].idx+"[#"+D[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(D));default:throw new Error("Unrecognized Formula Token: "+String(D))}var Ce=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&A>=0&&Ce.indexOf(t[0][O][0])==-1){D=t[0][A];var le=!0;switch(D[1][0]){case 4:le=!1;case 0:I=fa(" ",D[1][1]);break;case 5:le=!1;case 1:I=fa("\r",D[1][1]);break;default:if(I="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+D[1][0])}h.push((le?I:"")+h.pop()+(le?"":I)),A=-1}}if(h.length>1&&l.WTF)throw new Error("bad formula stack");return h[0]}function BD(t,a,r){var i=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],ms(t,a-2)];var h=md(t,f,r);return a!==f+l&&(d=hd(t,a-f-l,h,r)),t.l=i,[h,d]}function LD(t,a,r){var i=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],ms(t,a-2)];var h=md(t,f,r);return a!==f+l&&(d=hd(t,a-f-l,h,r)),t.l=i,[h,d]}function PD(t,a,r,i){var l=t.l+a,d=md(t,i,r),f;return l!==t.l&&(f=hd(t,l-t.l,d,r)),[d,f]}function zD(t,a,r){var i=t.l+a,l,d=t.read_shift(2),f=md(t,d,r);return d==65535?[[],ms(t,a-2)]:(a!==d+2&&(l=hd(t,i-d-2,f,r)),[f,l])}function UD(t){var a;if(Si(t,t.l+6)!==65535)return[fs(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return a=t[t.l+2]===1,t.l+=8,[a,"b"];case 2:return a=t[t.l+2],t.l+=8,[a,"e"];case 3:return t.l+=8,["","s"]}return[]}function im(t,a,r){var i=t.l+a,l=ci(t);r.biff==2&&++t.l;var d=UD(t),f=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var h=LD(t,i-t.l,r);return{cell:l,val:d[0],formula:h,shared:f>>3&1,tt:d[1]}}function jf(t,a,r){var i=t.read_shift(4),l=md(t,i,r),d=t.read_shift(4),f=d>0?hd(t,d,l,r):null;return[l,f]}var HD=jf,Cf=jf,VD=jf,GD=jf,XD={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},T4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qD={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function M2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(a,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function lm(t){var a=t.split(":"),r=a[0].split(".")[0];return[r,a[0].split(".")[1]+(a.length>1?":"+(a[1].split(".")[1]||a[1].split(".")[0]):"")]}var I0={},pc={};function F0(t,a){if(t){var r=[.7,.7,.75,.75,.3,.3];a=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function D4(t,a,r,i,l,d){try{i.cellNF&&(t.z=rr[a])}catch(h){if(i.WTF)throw h}if(!(t.t==="z"&&!i.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Xa(t.v)),(!i||i.cellText!==!1)&&t.t!=="z")try{if(rr[a]==null&&lo($A[a]||"General",a),t.t==="e")t.w=t.w||jo[t.v];else if(a===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=X0(t.v);else if(t.t==="d"){var f=Ss(t.v);(f|0)===f?t.w=f.toString(10):t.w=X0(f)}else{if(t.v===void 0)return"";t.w=ho(t.v,pc)}else t.t==="d"?t.w=gn(a,Ss(t.v),pc):t.w=gn(a,t.v,pc)}catch(h){if(i.WTF)throw h}if(i.cellStyles&&r!=null)try{t.s=d.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=af(l.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),i.WTF&&(t.s.fgColor.raw_rgb=l.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=af(l.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),i.WTF&&(t.s.bgColor.raw_rgb=l.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(h){if(i.WTF&&d.Fills)throw h}}}function $D(t,a){var r=ma(a);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=vr(r))}var YD=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,WD=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,KD=/<(?:\w:)?hyperlink [^>]*>/mg,ZD=/"(\w*:\w*)"/,QD=/<(?:\w:)?col\b[^>]*[\/]?>/g,JD=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,eR=/<(?:\w:)?pageMargins[^>]*\/>/g,R4=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,tR=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,rR=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function aR(t,a,r,i,l,d,f){if(!t)return t;i||(i={"!id":{}});var h=a.dense?[]:{},b={s:{r:2e6,c:2e6},e:{r:0,c:0}},p="",w="",j=t.match(WD);j?(p=t.slice(0,j.index),w=t.slice(j.index+j[0].length)):p=w=t;var E=p.match(R4);E?kg(E[0],h,l,r):(E=p.match(tR))&&sR(E[0],E[1]||"",h,l,r);var _=(p.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(_>0){var T=p.slice(_,_+50).match(ZD);T&&$D(h,T[1])}var A=p.match(rR);A&&A[1]&&dR(A[1],l);var I=[];if(a.cellStyles){var O=p.match(QD);O&&lR(I,O)}j&&uR(j[1],h,a,b,d,f);var M=w.match(JD);M&&(h["!autofilter"]=oR(M[0]));var D=[],B=w.match(YD);if(B)for(_=0;_!=B.length;++_)D[_]=ma(B[_].slice(B[_].indexOf('"')+1));var H=w.match(KD);H&&nR(h,H,i);var z=w.match(eR);if(z&&(h["!margins"]=iR(Vt(z[0]))),!h["!ref"]&&b.e.c>=b.s.c&&b.e.r>=b.s.r&&(h["!ref"]=vr(b)),a.sheetRows>0&&h["!ref"]){var L=ma(h["!ref"]);a.sheetRows<=+L.e.r&&(L.e.r=a.sheetRows-1,L.e.r>b.e.r&&(L.e.r=b.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>b.e.c&&(L.e.c=b.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),h["!fullref"]=h["!ref"],h["!ref"]=vr(L))}return I.length>0&&(h["!cols"]=I),D.length>0&&(h["!merges"]=D),h}function kg(t,a,r,i){var l=Vt(t);r.Sheets[i]||(r.Sheets[i]={}),l.codeName&&(r.Sheets[i].CodeName=kr(Xr(l.codeName)))}function sR(t,a,r,i,l){kg(t.slice(0,t.indexOf(">")),r,i,l)}function nR(t,a,r){for(var i=Array.isArray(t),l=0;l!=a.length;++l){var d=Vt(Xr(a[l]),!0);if(!d.ref)return;var f=((r||{})["!id"]||[])[d.id];f?(d.Target=f.Target,d.location&&(d.Target+="#"+kr(d.location))):(d.Target="#"+kr(d.location),f={Target:d.Target,TargetMode:"Internal"}),d.Rel=f,d.tooltip&&(d.Tooltip=d.tooltip,delete d.tooltip);for(var h=ma(d.ref),b=h.s.r;b<=h.e.r;++b)for(var p=h.s.c;p<=h.e.c;++p){var w=Zt({c:p,r:b});i?(t[b]||(t[b]=[]),t[b][p]||(t[b][p]={t:"z",v:void 0}),t[b][p].l=d):(t[w]||(t[w]={t:"z",v:void 0}),t[w].l=d)}}}function iR(t){var a={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(a[r]=parseFloat(t[r]))}),a}function lR(t,a){for(var r=!1,i=0;i!=a.length;++i){var l=Vt(a[i],!0);l.hidden&&(l.hidden=ea(l.hidden));var d=parseInt(l.min,10)-1,f=parseInt(l.max,10)-1;for(l.outlineLevel&&(l.level=+l.outlineLevel||0),delete l.min,delete l.max,l.width=+l.width,!r&&l.width&&(r=!0,wg(l.width)),vc(l);d<=f;)t[d++]=Ja(l)}}function oR(t){var a={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return a}var cR=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function dR(t,a){a.Views||(a.Views=[{}]),(t.match(cR)||[]).forEach(function(r,i){var l=Vt(r);a.Views[i]||(a.Views[i]={}),+l.zoomScale&&(a.Views[i].zoom=+l.zoomScale),ea(l.rightToLeft)&&(a.Views[i].RTL=!0)})}var uR=function(){var t=/<(?:\w+:)?c[ \/>]/,a=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,l=/ref=["']([^"']*)["']/,d=q0("v"),f=q0("f");return function(b,p,w,j,E,_){for(var T=0,A="",I=[],O=[],M=0,D=0,B=0,H="",z,L,P=0,U=0,Z,ae,Y=0,ue=0,de=Array.isArray(_.CellXf),G,q=[],xe=[],Ce=Array.isArray(p),le=[],oe={},re=!1,Q=!!w.sheetStubs,X=b.split(a),se=0,ne=X.length;se!=ne;++se){A=X[se].trim();var K=A.length;if(K!==0){var Se=0;e:for(T=0;T<K;++T)switch(A[T]){case">":if(A[T-1]!="/"){++T;break e}if(w&&w.cellStyles){if(L=Vt(A.slice(Se,T),!0),P=L.r!=null?parseInt(L.r,10):P+1,U=-1,w.sheetRows&&w.sheetRows<P)continue;oe={},re=!1,L.ht&&(re=!0,oe.hpt=parseFloat(L.ht),oe.hpx=K0(oe.hpt)),L.hidden=="1"&&(re=!0,oe.hidden=!0),L.outlineLevel!=null&&(re=!0,oe.level=+L.outlineLevel),re&&(le[P-1]=oe)}break;case"<":Se=T;break}if(Se>=T)break;if(L=Vt(A.slice(Se,T),!0),P=L.r!=null?parseInt(L.r,10):P+1,U=-1,!(w.sheetRows&&w.sheetRows<P)){j.s.r>P-1&&(j.s.r=P-1),j.e.r<P-1&&(j.e.r=P-1),w&&w.cellStyles&&(oe={},re=!1,L.ht&&(re=!0,oe.hpt=parseFloat(L.ht),oe.hpx=K0(oe.hpt)),L.hidden=="1"&&(re=!0,oe.hidden=!0),L.outlineLevel!=null&&(re=!0,oe.level=+L.outlineLevel),re&&(le[P-1]=oe)),I=A.slice(T).split(t);for(var we=0;we!=I.length&&I[we].trim().charAt(0)=="<";++we);for(I=I.slice(we),T=0;T!=I.length;++T)if(A=I[T].trim(),A.length!==0){if(O=A.match(r),M=T,D=0,B=0,A="<c "+(A.slice(0,1)=="<"?">":"")+A,O!=null&&O.length===2){for(M=0,H=O[1],D=0;D!=H.length&&!((B=H.charCodeAt(D)-64)<1||B>26);++D)M=26*M+B;--M,U=M}else++U;for(D=0;D!=A.length&&A.charCodeAt(D)!==62;++D);if(++D,L=Vt(A.slice(0,D),!0),L.r||(L.r=Zt({r:P-1,c:U})),H=A.slice(D),z={t:""},(O=H.match(d))!=null&&O[1]!==""&&(z.v=kr(O[1])),w.cellFormula){if((O=H.match(f))!=null&&O[1]!==""){if(z.f=kr(Xr(O[1])).replace(/\r\n/g,`
`),w.xlfn||(z.f=R2(z.f)),O[0].indexOf('t="array"')>-1)z.F=(H.match(l)||[])[1],z.F.indexOf(":")>-1&&q.push([ma(z.F),z.F]);else if(O[0].indexOf('t="shared"')>-1){ae=Vt(O[0]);var Ve=kr(Xr(O[1]));w.xlfn||(Ve=R2(Ve)),xe[parseInt(ae.si,10)]=[ae,Ve,L.r]}}else(O=H.match(/<f[^>]*\/>/))&&(ae=Vt(O[0]),xe[ae.si]&&(z.f=N9(xe[ae.si][1],xe[ae.si][2],L.r)));var Le=Cs(L.r);for(D=0;D<q.length;++D)Le.r>=q[D][0].s.r&&Le.r<=q[D][0].e.r&&Le.c>=q[D][0].s.c&&Le.c<=q[D][0].e.c&&(z.F=q[D][1])}if(L.t==null&&z.v===void 0)if(z.f||z.F)z.v=0,z.t="n";else if(Q)z.t="z";else continue;else z.t=L.t||"n";switch(j.s.c>U&&(j.s.c=U),j.e.c<U&&(j.e.c=U),z.t){case"n":if(z.v==""||z.v==null){if(!Q)continue;z.t="z"}else z.v=parseFloat(z.v);break;case"s":if(typeof z.v>"u"){if(!Q)continue;z.t="z"}else Z=I0[parseInt(z.v,10)],z.v=Z.t,z.r=Z.r,w.cellHTML&&(z.h=Z.h);break;case"str":z.t="s",z.v=z.v!=null?Xr(z.v):"",w.cellHTML&&(z.h=dg(z.v));break;case"inlineStr":O=H.match(i),z.t="s",O!=null&&(Z=vg(O[1]))?(z.v=Z.t,w.cellHTML&&(z.h=Z.h)):z.v="";break;case"b":z.v=ea(z.v);break;case"d":w.cellDates?z.v=Xa(z.v,1):(z.v=Ss(Xa(z.v,1)),z.t="n");break;case"e":(!w||w.cellText!==!1)&&(z.w=z.v),z.v=Jw[z.v];break}if(Y=ue=0,G=null,de&&L.s!==void 0&&(G=_.CellXf[L.s],G!=null&&(G.numFmtId!=null&&(Y=G.numFmtId),w.cellStyles&&G.fillId!=null&&(ue=G.fillId))),D4(z,Y,ue,w,E,_),w.cellDates&&de&&z.t=="n"&&Ec(rr[Y])&&(z.t="d",z.v=Nf(z.v)),L.cm&&w.xlmeta){var ot=(w.xlmeta.Cell||[])[+L.cm-1];ot&&ot.type=="XLDAPR"&&(z.D=!0)}if(Ce){var J=Cs(L.r);p[J.r]||(p[J.r]=[]),p[J.r][J.c]=z}else p[L.r]=z}}}}le.length>0&&(p["!rows"]=le)}}();function fR(t,a){var r={},i=t.l+a;r.r=t.read_shift(4),t.l+=4;var l=t.read_shift(2);t.l+=1;var d=t.read_shift(1);return t.l=i,d&7&&(r.level=d&7),d&16&&(r.hidden=!0),d&32&&(r.hpt=l/20),r}var xR=ko;function hR(){}function mR(t,a){var r={},i=t[t.l];return++t.l,r.above=!(i&64),r.left=!(i&128),t.l+=18,r.name=BS(t),r}function gR(t){var a=yn(t);return[a]}function pR(t){var a=No(t);return[a]}function yR(t){var a=yn(t),r=t.read_shift(1);return[a,r,"b"]}function bR(t){var a=No(t),r=t.read_shift(1);return[a,r,"b"]}function vR(t){var a=yn(t),r=t.read_shift(1);return[a,r,"e"]}function wR(t){var a=No(t),r=t.read_shift(1);return[a,r,"e"]}function NR(t){var a=yn(t),r=t.read_shift(4);return[a,r,"s"]}function kR(t){var a=No(t),r=t.read_shift(4);return[a,r,"s"]}function jR(t){var a=yn(t),r=fs(t);return[a,r,"n"]}function O4(t){var a=No(t),r=fs(t);return[a,r,"n"]}function CR(t){var a=yn(t),r=pg(t);return[a,r,"n"]}function ER(t){var a=No(t),r=pg(t);return[a,r,"n"]}function _R(t){var a=yn(t),r=mg(t);return[a,r,"is"]}function AR(t){var a=yn(t),r=hs(t);return[a,r,"str"]}function SR(t){var a=No(t),r=hs(t);return[a,r,"str"]}function TR(t,a,r){var i=t.l+a,l=yn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"b"];if(r.cellFormula){t.l+=2;var h=Cf(t,i-t.l,r);f[3]=ds(h,null,l,r.supbooks,r)}else t.l=i;return f}function DR(t,a,r){var i=t.l+a,l=yn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"e"];if(r.cellFormula){t.l+=2;var h=Cf(t,i-t.l,r);f[3]=ds(h,null,l,r.supbooks,r)}else t.l=i;return f}function RR(t,a,r){var i=t.l+a,l=yn(t);l.r=r["!row"];var d=fs(t),f=[l,d,"n"];if(r.cellFormula){t.l+=2;var h=Cf(t,i-t.l,r);f[3]=ds(h,null,l,r.supbooks,r)}else t.l=i;return f}function OR(t,a,r){var i=t.l+a,l=yn(t);l.r=r["!row"];var d=hs(t),f=[l,d,"str"];if(r.cellFormula){t.l+=2;var h=Cf(t,i-t.l,r);f[3]=ds(h,null,l,r.supbooks,r)}else t.l=i;return f}var IR=ko;function FR(t,a){var r=t.l+a,i=ko(t),l=gg(t),d=hs(t),f=hs(t),h=hs(t);t.l=r;var b={rfx:i,relId:l,loc:d,display:h};return f&&(b.Tooltip=f),b}function MR(){}function BR(t,a,r){var i=t.l+a,l=Kw(t),d=t.read_shift(1),f=[l];if(f[2]=d,r.cellFormula){var h=HD(t,i-t.l,r);f[1]=h}else t.l=i;return f}function LR(t,a,r){var i=t.l+a,l=ko(t),d=[l];if(r.cellFormula){var f=GD(t,i-t.l,r);d[1]=f,t.l=i}else t.l=i;return d}var PR=["left","right","top","bottom","header","footer"];function zR(t){var a={};return PR.forEach(function(r){a[r]=fs(t)}),a}function UR(t){var a=t.read_shift(2);return t.l+=28,{RTL:a&32}}function HR(){}function VR(){}function GR(t,a,r,i,l,d,f){if(!t)return t;var h=a||{};i||(i={"!id":{}});var b=h.dense?[]:{},p,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=!1,E=!1,_,T,A,I,O,M,D,B,H,z=[];h.biff=12,h["!row"]=0;var L=0,P=!1,U=[],Z={},ae=h.supbooks||l.supbooks||[[]];if(ae.sharedf=Z,ae.arrayf=U,ae.SheetNames=l.SheetNames||l.Sheets.map(function(Ce){return Ce.name}),!h.supbooks&&(h.supbooks=ae,l.Names))for(var Y=0;Y<l.Names.length;++Y)ae[0][Y+1]=l.Names[Y];var ue=[],de=[],G=!1;lf[16]={n:"BrtShortReal",f:O4};var q;if(zi(t,function(le,oe,re){if(!E)switch(re){case 148:p=le;break;case 0:_=le,h.sheetRows&&h.sheetRows<=_.r&&(E=!0),B=es(I=_.r),h["!row"]=_.r,(le.hidden||le.hpt||le.level!=null)&&(le.hpt&&(le.hpx=K0(le.hpt)),de[le.r]=le);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(T={t:le[2]},le[2]){case"n":T.v=le[1];break;case"s":D=I0[le[1]],T.v=D.t,T.r=D.r;break;case"b":T.v=!!le[1];break;case"e":T.v=le[1],h.cellText!==!1&&(T.w=jo[T.v]);break;case"str":T.t="s",T.v=le[1];break;case"is":T.t="s",T.v=le[1].t;break}if((A=f.CellXf[le[0].iStyleRef])&&D4(T,A.numFmtId,null,h,d,f),O=le[0].c==-1?O+1:le[0].c,h.dense?(b[I]||(b[I]=[]),b[I][O]=T):b[Pa(O)+B]=T,h.cellFormula){for(P=!1,L=0;L<U.length;++L){var Q=U[L];_.r>=Q[0].s.r&&_.r<=Q[0].e.r&&O>=Q[0].s.c&&O<=Q[0].e.c&&(T.F=vr(Q[0]),P=!0)}!P&&le.length>3&&(T.f=le[3])}if(w.s.r>_.r&&(w.s.r=_.r),w.s.c>O&&(w.s.c=O),w.e.r<_.r&&(w.e.r=_.r),w.e.c<O&&(w.e.c=O),h.cellDates&&A&&T.t=="n"&&Ec(rr[A.numFmtId])){var X=so(T.v);X&&(T.t="d",T.v=new Date(X.y,X.m-1,X.d,X.H,X.M,X.S,X.u))}q&&(q.type=="XLDAPR"&&(T.D=!0),q=void 0);break;case 1:case 12:if(!h.sheetStubs||j)break;T={t:"z",v:void 0},O=le[0].c==-1?O+1:le[0].c,h.dense?(b[I]||(b[I]=[]),b[I][O]=T):b[Pa(O)+B]=T,w.s.r>_.r&&(w.s.r=_.r),w.s.c>O&&(w.s.c=O),w.e.r<_.r&&(w.e.r=_.r),w.e.c<O&&(w.e.c=O),q&&(q.type=="XLDAPR"&&(T.D=!0),q=void 0);break;case 176:z.push(le);break;case 49:q=((h.xlmeta||{}).Cell||[])[le-1];break;case 494:var se=i["!id"][le.relId];for(se?(le.Target=se.Target,le.loc&&(le.Target+="#"+le.loc),le.Rel=se):le.relId==""&&(le.Target="#"+le.loc),I=le.rfx.s.r;I<=le.rfx.e.r;++I)for(O=le.rfx.s.c;O<=le.rfx.e.c;++O)h.dense?(b[I]||(b[I]=[]),b[I][O]||(b[I][O]={t:"z",v:void 0}),b[I][O].l=le):(M=Zt({c:O,r:I}),b[M]||(b[M]={t:"z",v:void 0}),b[M].l=le);break;case 426:if(!h.cellFormula)break;U.push(le),H=h.dense?b[I][O]:b[Pa(O)+B],H.f=ds(le[1],w,{r:_.r,c:O},ae,h),H.F=vr(le[0]);break;case 427:if(!h.cellFormula)break;Z[Zt(le[0].s)]=le[1],H=h.dense?b[I][O]:b[Pa(O)+B],H.f=ds(le[1],w,{r:_.r,c:O},ae,h);break;case 60:if(!h.cellStyles)break;for(;le.e>=le.s;)ue[le.e--]={width:le.w/256,hidden:!!(le.flags&1),level:le.level},G||(G=!0,wg(le.w/256)),vc(ue[le.e+1]);break;case 161:b["!autofilter"]={ref:vr(le)};break;case 476:b["!margins"]=le;break;case 147:l.Sheets[r]||(l.Sheets[r]={}),le.name&&(l.Sheets[r].CodeName=le.name),(le.above||le.left)&&(b["!outline"]={above:le.above,left:le.left});break;case 137:l.Views||(l.Views=[{}]),l.Views[0]||(l.Views[0]={}),le.RTL&&(l.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:j=!0;break;case 36:j=!1;break;case 37:j=!0;break;case 38:j=!1;break;default:if(!oe.T){if(!j||h.WTF)throw new Error("Unexpected record 0x"+re.toString(16))}}},h),delete h.supbooks,delete h["!row"],!b["!ref"]&&(w.s.r<2e6||p&&(p.e.r>0||p.e.c>0||p.s.r>0||p.s.c>0))&&(b["!ref"]=vr(p||w)),h.sheetRows&&b["!ref"]){var xe=ma(b["!ref"]);h.sheetRows<=+xe.e.r&&(xe.e.r=h.sheetRows-1,xe.e.r>w.e.r&&(xe.e.r=w.e.r),xe.e.r<xe.s.r&&(xe.s.r=xe.e.r),xe.e.c>w.e.c&&(xe.e.c=w.e.c),xe.e.c<xe.s.c&&(xe.s.c=xe.e.c),b["!fullref"]=b["!ref"],b["!ref"]=vr(xe))}return z.length>0&&(b["!merges"]=z),ue.length>0&&(b["!cols"]=ue),de.length>0&&(b["!rows"]=de),b}function XR(t){var a=[],r=t.match(/^<c:numCache>/),i;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(d){var f=d.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);f&&(a[+f[1]]=r?+f[2]:f[2])});var l=kr((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(d){i=d.replace(/<.*?>/g,"")}),[a,l,i]}function qR(t,a,r,i,l,d){var f=d||{"!type":"chart"};if(!t)return d;var h=0,b=0,p="A",w={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(j){var E=XR(j);w.s.r=w.s.c=0,w.e.c=h,p=Pa(h),E[0].forEach(function(_,T){f[p+es(T)]={t:"n",v:_,z:E[1]},b=T}),w.e.r<b&&(w.e.r=b),++h}),h>0&&(f["!ref"]=vr(w)),f}function $R(t,a,r,i,l){if(!t)return t;i||(i={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f,h=t.match(R4);return h&&kg(h[0],d,l,r),(f=t.match(/drawing r:id="(.*?)"/))&&(d["!rel"]=f[1]),i["!id"][d["!rel"]]&&(d["!drawel"]=i["!id"][d["!rel"]]),d}function YR(t,a){t.l+=10;var r=hs(t);return{name:r}}function WR(t,a,r,i,l){if(!t)return t;i||(i={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f=!1;return zi(t,function(b,p,w){switch(w){case 550:d["!rel"]=b;break;case 651:l.Sheets[r]||(l.Sheets[r]={}),b.name&&(l.Sheets[r].CodeName=b.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:break;case 38:break;default:if(!(p.T>0)){if(!(p.T<0)){if(!f||a.WTF)throw new Error("Unexpected record 0x"+w.toString(16))}}}},a),i["!id"][d["!rel"]]&&(d["!drawel"]=i["!id"][d["!rel"]]),d}var I4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],KR=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ZR=[],QR=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function B2(t,a){for(var r=0;r!=t.length;++r)for(var i=t[r],l=0;l!=a.length;++l){var d=a[l];if(i[d[0]]==null)i[d[0]]=d[1];else switch(d[2]){case"bool":typeof i[d[0]]=="string"&&(i[d[0]]=ea(i[d[0]]));break;case"int":typeof i[d[0]]=="string"&&(i[d[0]]=parseInt(i[d[0]],10));break}}}function L2(t,a){for(var r=0;r!=a.length;++r){var i=a[r];if(t[i[0]]==null)t[i[0]]=i[1];else switch(i[2]){case"bool":typeof t[i[0]]=="string"&&(t[i[0]]=ea(t[i[0]]));break;case"int":typeof t[i[0]]=="string"&&(t[i[0]]=parseInt(t[i[0]],10));break}}}function F4(t){L2(t.WBProps,I4),L2(t.CalcPr,QR),B2(t.WBView,KR),B2(t.Sheets,ZR),pc.date1904=ea(t.WBProps.date1904)}var JR="][*?/\\".split("");function eO(t,a){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return JR.forEach(function(i){if(t.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var tO=/<\w+:workbook/;function rO(t,a){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,l="xmlns",d={},f=0;if(t.replace(gs,function(b,p){var w=Vt(b);switch(oi(w[0])){case"<?xml":break;case"<workbook":b.match(tO)&&(l="xmlns"+b.match(/<(\w+):/)[1]),r.xmlns=w[l];break;case"</workbook>":break;case"<fileVersion":delete w[0],r.AppVersion=w;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":I4.forEach(function(j){if(w[j[0]]!=null)switch(j[2]){case"bool":r.WBProps[j[0]]=ea(w[j[0]]);break;case"int":r.WBProps[j[0]]=parseInt(w[j[0]],10);break;default:r.WBProps[j[0]]=w[j[0]]}}),w.codeName&&(r.WBProps.CodeName=Xr(w.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete w[0],r.WBView.push(w);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(w.state){case"hidden":w.Hidden=1;break;case"veryHidden":w.Hidden=2;break;default:w.Hidden=0}delete w.state,w.name=kr(Xr(w.name)),delete w[0],r.Sheets.push(w);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":i=!0;break;case"</definedNames>":i=!1;break;case"<definedName":d={},d.Name=Xr(w.name),w.comment&&(d.Comment=w.comment),w.localSheetId&&(d.Sheet=+w.localSheetId),ea(w.hidden||"0")&&(d.Hidden=!0),f=p+b.length;break;case"</definedName>":d.Ref=kr(Xr(t.slice(f,p))),r.Names.push(d);break;case"<definedName/>":break;case"<calcPr":delete w[0],r.CalcPr=w;break;case"<calcPr/>":delete w[0],r.CalcPr=w;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<revisionPtr":break;default:if(!i&&a.WTF)throw new Error("unrecognized "+w[0]+" in workbook")}return b}),vS.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return F4(r),r}function aO(t,a){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Im(t),r.name=hs(t),r}function sO(t,a){var r={},i=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var l=a>8?hs(t):"";return l.length>0&&(r.CodeName=l),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function nO(t,a){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=a-8,r}function iO(t,a,r){var i=t.l+a;t.l+=4,t.l+=1;var l=t.read_shift(4),d=LS(t),f=VD(t,0,r),h=gg(t);t.l=i;var b={Name:d,Ptg:f};return l<268435455&&(b.Sheet=l),h&&(b.Comment=h),b}function lO(t,a){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],l=!1;a||(a={}),a.biff=12;var d=[],f=[[]];return f.SheetNames=[],f.XTI=[],lf[16]={n:"BrtFRTArchID$",f:nO},zi(t,function(b,p,w){switch(w){case 156:f.SheetNames.push(b.name),r.Sheets.push(b);break;case 153:r.WBProps=b;break;case 39:b.Sheet!=null&&(a.SID=b.Sheet),b.Ref=ds(b.Ptg,null,null,f,a),delete a.SID,delete b.Ptg,d.push(b);break;case 1036:break;case 357:case 358:case 355:case 667:f[0].length?f.push([w,b]):f[0]=[w,b],f[f.length-1].XTI=[];break;case 362:f.length===0&&(f[0]=[],f[0].XTI=[]),f[f.length-1].XTI=f[f.length-1].XTI.concat(b),f.XTI=f.XTI.concat(b);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:i.push(w),l=!0;break;case 36:i.pop(),l=!1;break;case 37:i.push(w),l=!0;break;case 38:i.pop(),l=!1;break;case 16:break;default:if(!p.T){if(!l||a.WTF&&i[i.length-1]!=37&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}},a),F4(r),r.Names=d,r.supbooks=f,r}function oO(t,a,r){return a.slice(-4)===".bin"?lO(t,r):rO(t,r)}function cO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?GR(t,i,r,l,d,f,h):aR(t,i,r,l,d,f,h)}function dO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?WR(t,i,r,l,d):$R(t,i,r,l,d)}function uO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?b9():v9()}function fO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?p9():y9()}function xO(t,a,r,i){return a.slice(-4)===".bin"?I7(t,r,i):A7(t,r,i)}function hO(t,a,r){return w4(t,r)}function mO(t,a,r){return a.slice(-4)===".bin"?KT(t,r):YT(t,r)}function gO(t,a,r){return a.slice(-4)===".bin"?h9(t,r):c9(t,r)}function pO(t,a,r){return a.slice(-4)===".bin"?i9(t):s9(t)}function yO(t,a,r,i){return r.slice(-4)===".bin"?l9(t,a,r,i):void 0}function bO(t,a,r){return a.slice(-4)===".bin"?r9(t,a,r):a9(t,a,r)}var M4=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,B4=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Cn(t,a){var r=t.split(/\s+/),i=[];if(i[0]=r[0],r.length===1)return i;var l=t.match(M4),d,f,h,b;if(l)for(b=0;b!=l.length;++b)d=l[b].match(B4),(f=d[1].indexOf(":"))===-1?i[d[1]]=d[2].slice(1,d[2].length-1):(d[1].slice(0,6)==="xmlns:"?h="xmlns"+d[1].slice(6):h=d[1].slice(f+1),i[h]=d[2].slice(1,d[2].length-1));return i}function vO(t){var a=t.split(/\s+/),r={};if(a.length===1)return r;var i=t.match(M4),l,d,f,h;if(i)for(h=0;h!=i.length;++h)l=i[h].match(B4),(d=l[1].indexOf(":"))===-1?r[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?f="xmlns"+l[1].slice(6):f=l[1].slice(d+1),r[f]=l[2].slice(1,l[2].length-1));return r}var M0;function wO(t,a){var r=M0[t]||kr(t);return r==="General"?ho(a):gn(r,a)}function NO(t,a,r,i){var l=i;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":l=ea(i);break;case"i2":case"int":l=parseInt(i,10);break;case"r4":case"float":l=parseFloat(i);break;case"date":case"dateTime.tz":l=Xa(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[kr(a)]=l}function kO(t,a,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||jo[t.v]:a==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=X0(t.v):t.w=ho(t.v):t.w=wO(a||"General",t.v)}catch(d){if(r.WTF)throw d}try{var i=M0[a]||a||"General";if(r.cellNF&&(t.z=i),r.cellDates&&t.t=="n"&&Ec(i)){var l=so(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}catch(d){if(r.WTF)throw d}}}function jO(t,a,r){if(r.cellStyles&&a.Interior){var i=a.Interior;i.Pattern&&(i.patternType=N7[i.Pattern]||i.Pattern)}t[a.ID]=a}function CO(t,a,r,i,l,d,f,h,b,p){var w="General",j=i.StyleID,E={};p=p||{};var _=[],T=0;for(j===void 0&&h&&(j=h.StyleID),j===void 0&&f&&(j=f.StyleID);d[j]!==void 0&&(d[j].nf&&(w=d[j].nf),d[j].Interior&&_.push(d[j].Interior),!!d[j].Parent);)j=d[j].Parent;switch(r.Type){case"Boolean":i.t="b",i.v=ea(t);break;case"String":i.t="s",i.r=i2(kr(t)),i.v=t.indexOf("<")>-1?kr(a||t).replace(/<.*?>/g,""):i.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),i.v=(Xa(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),i.v!==i.v?i.v=kr(t):i.v<60&&(i.v=i.v-1),(!w||w=="General")&&(w="yyyy-mm-dd");case"Number":i.v===void 0&&(i.v=+t),i.t||(i.t="n");break;case"Error":i.t="e",i.v=Jw[t],p.cellText!==!1&&(i.w=t);break;default:t==""&&a==""?i.t="z":(i.t="s",i.v=i2(a||t));break}if(kO(i,w,p),p.cellFormula!==!1)if(i.Formula){var A=kr(i.Formula);A.charCodeAt(0)==61&&(A=A.slice(1)),i.f=gc(A,l),delete i.Formula,i.ArrayRange=="RC"?i.F=gc("RC:RC",l):i.ArrayRange&&(i.F=gc(i.ArrayRange,l),b.push([ma(i.F),i.F]))}else for(T=0;T<b.length;++T)l.r>=b[T][0].s.r&&l.r<=b[T][0].e.r&&l.c>=b[T][0].s.c&&l.c<=b[T][0].e.c&&(i.F=b[T][1]);p.cellStyles&&(_.forEach(function(I){!E.patternType&&I.patternType&&(E.patternType=I.patternType)}),i.s=E),i.StyleID!==void 0&&(i.ixfe=i.StyleID)}function EO(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function om(t,a){var r=a||{};Cw();var i=j0(ug(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(i=Xr(i));var l=i.slice(0,1024).toLowerCase(),d=!1;if(l=l.replace(/".*?"/g,""),(l.indexOf(">")&1023)>Math.min(l.indexOf(",")&1023,l.indexOf(";")&1023)){var f=Ja(r);return f.type="string",Y0.to_workbook(i,f)}if(l.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ut){l.indexOf("<"+ut)>=0&&(d=!0)}),d)return FO(i,r);M0={"General Number":"General","General Date":rr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":rr[15],"Short Date":rr[14],"Long Time":rr[19],"Medium Time":rr[18],"Short Time":rr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:rr[2],Standard:rr[4],Percent:rr[10],Scientific:rr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var h,b=[],p,w={},j=[],E=r.dense?[]:{},_="",T={},A={},I=Cn('<Data ss:Type="String">'),O=0,M=0,D=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},z={},L="",P=0,U=[],Z={},ae={},Y=0,ue=[],de=[],G={},q=[],xe,Ce=!1,le=[],oe=[],re={},Q=0,X=0,se={Sheets:[],WBProps:{date1904:!1}},ne={};$0.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";h=$0.exec(i);)switch(h[3]=(K=h[3]).toLowerCase()){case"data":if(K=="data"){if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break}if(b[b.length-1][1])break;h[1]==="/"?CO(i.slice(O,h.index),L,I,b[b.length-1][0]=="comment"?G:T,{c:M,r:D},H,q[M],A,le,r):(L="",I=Cn(h[0]),O=h.index+h[0].length);break;case"cell":if(h[1]==="/")if(de.length>0&&(T.c=de),(!r.sheetRows||r.sheetRows>D)&&T.v!==void 0&&(r.dense?(E[D]||(E[D]=[]),E[D][M]=T):E[Pa(M)+es(D)]=T),T.HRef&&(T.l={Target:kr(T.HRef)},T.HRefScreenTip&&(T.l.Tooltip=T.HRefScreenTip),delete T.HRef,delete T.HRefScreenTip),(T.MergeAcross||T.MergeDown)&&(Q=M+(parseInt(T.MergeAcross,10)|0),X=D+(parseInt(T.MergeDown,10)|0),U.push({s:{c:M,r:D},e:{c:Q,r:X}})),!r.sheetStubs)T.MergeAcross?M=Q+1:++M;else if(T.MergeAcross||T.MergeDown){for(var Se=M;Se<=Q;++Se)for(var we=D;we<=X;++we)(Se>M||we>D)&&(r.dense?(E[we]||(E[we]=[]),E[we][Se]={t:"z"}):E[Pa(Se)+es(we)]={t:"z"});M=Q+1}else++M;else T=vO(h[0]),T.Index&&(M=+T.Index-1),M<B.s.c&&(B.s.c=M),M>B.e.c&&(B.e.c=M),h[0].slice(-2)==="/>"&&++M,de=[];break;case"row":h[1]==="/"||h[0].slice(-2)==="/>"?(D<B.s.r&&(B.s.r=D),D>B.e.r&&(B.e.r=D),h[0].slice(-2)==="/>"&&(A=Cn(h[0]),A.Index&&(D=+A.Index-1)),M=0,++D):(A=Cn(h[0]),A.Index&&(D=+A.Index-1),re={},(A.AutoFitHeight=="0"||A.Height)&&(re.hpx=parseInt(A.Height,10),re.hpt=v4(re.hpx),oe[D]=re),A.Hidden=="1"&&(re.hidden=!0,oe[D]=re));break;case"worksheet":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"));j.push(_),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(E["!ref"]=vr(B),r.sheetRows&&r.sheetRows<=B.e.r&&(E["!fullref"]=E["!ref"],B.e.r=r.sheetRows-1,E["!ref"]=vr(B))),U.length&&(E["!merges"]=U),q.length>0&&(E["!cols"]=q),oe.length>0&&(E["!rows"]=oe),w[_]=E}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},D=M=0,b.push([h[3],!1]),p=Cn(h[0]),_=kr(p.Name),E=r.dense?[]:{},U=[],le=[],oe=[],ne={name:_,Hidden:0},se.Sheets.push(ne);break;case"table":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else{if(h[0].slice(-2)=="/>")break;b.push([h[3],!1]),q=[],Ce=!1}break;case"style":h[1]==="/"?jO(H,z,r):z=Cn(h[0]);break;case"numberformat":z.nf=kr(Cn(h[0]).Format||"General"),M0[z.nf]&&(z.nf=M0[z.nf]);for(var Ve=0;Ve!=392&&rr[Ve]!=z.nf;++Ve);if(Ve==392){for(Ve=57;Ve!=392;++Ve)if(rr[Ve]==null){lo(z.nf,Ve);break}}break;case"column":if(b[b.length-1][0]!=="table")break;if(xe=Cn(h[0]),xe.Hidden&&(xe.hidden=!0,delete xe.Hidden),xe.Width&&(xe.wpx=parseInt(xe.Width,10)),!Ce&&xe.wpx>10){Ce=!0,ks=y4;for(var Le=0;Le<q.length;++Le)q[Le]&&vc(q[Le])}Ce&&vc(xe),q[xe.Index-1||q.length]=xe;for(var ot=0;ot<+xe.Span;++ot)q[q.length]=Ja(xe);break;case"namedrange":if(h[1]==="/")break;se.Names||(se.Names=[]);var J=Vt(h[0]),Ne={Name:J.Name,Ref:gc(J.RefersTo.slice(1),{r:0,c:0})};se.Sheets.length>0&&(Ne.Sheet=se.Sheets.length-1),se.Names.push(Ne);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(h[0].slice(-2)==="/>")break;h[1]==="/"?L+=i.slice(P,h.index):P=h.index+h[0].length;break;case"interior":if(!r.cellStyles)break;z.Interior=Cn(h[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(h[0].slice(-2)==="/>")break;h[1]==="/"?c5(Z,K,i.slice(Y,h.index)):Y=h.index+h[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else b.push([h[3],!1]);break;case"comment":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"));EO(G),de.push(G)}else b.push([h[3],!1]),p=Cn(h[0]),G={a:p.Author};break;case"autofilter":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else if(h[0].charAt(h[0].length-2)!=="/"){var Ie=Cn(h[0]);E["!autofilter"]={ref:gc(Ie.Range).replace(/\$/g,"")},b.push([h[3],!0])}break;case"name":break;case"datavalidation":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"null":break;default:if(b.length==0&&h[3]=="document"||b.length==0&&h[3]=="uof")return G2(i,r);var ke=!0;switch(b[b.length-1][0]){case"officedocumentsettings":switch(h[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ke=!1}break;case"componentoptions":switch(h[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ke=!1}break;case"excelworkbook":switch(h[3]){case"date1904":se.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ke=!1}break;case"workbookoptions":switch(h[3]){case"owcversion":break;case"height":break;case"width":break;default:ke=!1}break;case"worksheetoptions":switch(h[3]){case"visible":if(h[0].slice(-2)!=="/>")if(h[1]==="/")switch(i.slice(Y,h.index)){case"SheetHidden":ne.Hidden=1;break;case"SheetVeryHidden":ne.Hidden=2;break}else Y=h.index+h[0].length;break;case"header":E["!margins"]||F0(E["!margins"]={},"xlml"),isNaN(+Vt(h[0]).Margin)||(E["!margins"].header=+Vt(h[0]).Margin);break;case"footer":E["!margins"]||F0(E["!margins"]={},"xlml"),isNaN(+Vt(h[0]).Margin)||(E["!margins"].footer=+Vt(h[0]).Margin);break;case"pagemargins":var Qe=Vt(h[0]);E["!margins"]||F0(E["!margins"]={},"xlml"),isNaN(+Qe.Top)||(E["!margins"].top=+Qe.Top),isNaN(+Qe.Left)||(E["!margins"].left=+Qe.Left),isNaN(+Qe.Right)||(E["!margins"].right=+Qe.Right),isNaN(+Qe.Bottom)||(E["!margins"].bottom=+Qe.Bottom);break;case"displayrighttoleft":se.Views||(se.Views=[]),se.Views[0]||(se.Views[0]={}),se.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ke=!1}break;case"pivottable":case"pivotcache":switch(h[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ke=!1}break;case"pagebreaks":switch(h[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ke=!1}break;case"autofilter":switch(h[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ke=!1}break;case"querytable":switch(h[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ke=!1}break;case"datavalidation":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ke=!1}break;case"sorting":case"conditionalformatting":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ke=!1}break;case"mapinfo":case"schema":case"data":switch(h[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ke=!1}break;case"smarttags":break;default:ke=!1;break}if(ke||h[3].match(/!\[CDATA/))break;if(!b[b.length-1][1])throw"Unrecognized tag: "+h[3]+"|"+b.join("|");if(b[b.length-1][0]==="customdocumentproperties"){if(h[0].slice(-2)==="/>")break;h[1]==="/"?NO(ae,K,ue,i.slice(Y,h.index)):(ue=h,Y=h.index+h[0].length);break}if(r.WTF)throw"Unrecognized tag: "+h[3]+"|"+b.join("|")}var _e={};return!r.bookSheets&&!r.bookProps&&(_e.Sheets=w),_e.SheetNames=j,_e.Workbook=se,_e.SSF=Ja(rr),_e.Props=Z,_e.Custprops=ae,_e}function Lm(t,a){switch(Eg(a=a||{}),a.type||"base64"){case"base64":return om(rn(t),a);case"binary":case"buffer":case"file":return om(t,a);case"array":return om(wo(t),a)}}function _O(t){var a={},r=t.content;if(r.l=28,a.AnsiUserType=r.read_shift(0,"lpstr-ansi"),a.AnsiClipboardFormat=US(r),r.length-r.l<=4)return a;var i=r.read_shift(4);if(i==0||i>40||(r.l-=4,a.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(i=r.read_shift(4),i!==1907505652)||(a.UnicodeClipboardFormat=HS(r),i=r.read_shift(4),i==0||i>40))return a;r.l-=4,a.Reserved2=r.read_shift(0,"lpwstr")}var AO=[60,1084,2066,2165,2175];function SO(t,a,r,i,l){var d=i,f=[],h=r.slice(r.l,r.l+d);if(l&&l.enc&&l.enc.insitu&&h.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:l.enc.insitu(h)}f.push(h),r.l+=d;for(var b=Si(r,r.l),p=Pm[b],w=0;p!=null&&AO.indexOf(b)>-1;)d=Si(r,r.l+2),w=r.l+4,b==2066?w+=4:(b==2165||b==2175)&&(w+=12),h=r.slice(w,r.l+4+d),f.push(h),r.l+=4+d,p=Pm[b=Si(r,r.l)];var j=wl(f);Za(j,0);var E=0;j.lens=[];for(var _=0;_<f.length;++_)j.lens.push(E),E+=f[_].length;if(j.length<i)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+j.length+" < "+i;return a.f(j,j.length,l)}function ti(t,a,r){if(t.t!=="z"&&t.XF){var i=0;try{i=t.z||t.XF.numFmtId||0,a.cellNF&&(t.z=rr[i])}catch(d){if(a.WTF)throw d}if(!a||a.cellText!==!1)try{t.t==="e"?t.w=t.w||jo[t.v]:i===0||i=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=X0(t.v):t.w=ho(t.v):t.w=gn(i,t.v,{date1904:!!r,dateNF:a&&a.dateNF})}catch(d){if(a.WTF)throw d}if(a.cellDates&&i&&t.t=="n"&&Ec(rr[i]||String(i))){var l=so(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}}function Ou(t,a,r){return{v:t,ixfe:a,t:r}}function TO(t,a){var r={opts:{}},i={},l=a.dense?[]:{},d={},f={},h=null,b=[],p="",w={},j,E="",_,T,A,I,O={},M=[],D,B,H=[],z=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},U=function(Gt){return Gt<8?oo[Gt]:Gt<64&&z[Gt-8]||oo[Gt]},Z=function(Gt,lr,at){var yt=lr.XF.data;if(!(!yt||!yt.patternType||!at||!at.cellStyles)){lr.s={},lr.s.patternType=yt.patternType;var Be;(Be=W0(U(yt.icvFore)))&&(lr.s.fgColor={rgb:Be}),(Be=W0(U(yt.icvBack)))&&(lr.s.bgColor={rgb:Be})}},ae=function(Gt,lr,at){if(!(re>1)&&!(at.sheetRows&&Gt.r>=at.sheetRows)){if(at.cellStyles&&lr.XF&&lr.XF.data&&Z(Gt,lr,at),delete lr.ixfe,delete lr.XF,j=Gt,E=Zt(Gt),(!f||!f.s||!f.e)&&(f={s:{r:0,c:0},e:{r:0,c:0}}),Gt.r<f.s.r&&(f.s.r=Gt.r),Gt.c<f.s.c&&(f.s.c=Gt.c),Gt.r+1>f.e.r&&(f.e.r=Gt.r+1),Gt.c+1>f.e.c&&(f.e.c=Gt.c+1),at.cellFormula&&lr.f){for(var yt=0;yt<M.length;++yt)if(!(M[yt][0].s.c>Gt.c||M[yt][0].s.r>Gt.r)&&!(M[yt][0].e.c<Gt.c||M[yt][0].e.r<Gt.r)){lr.F=vr(M[yt][0]),(M[yt][0].s.c!=Gt.c||M[yt][0].s.r!=Gt.r)&&delete lr.f,lr.f&&(lr.f=""+ds(M[yt][1],f,Gt,le,Y));break}}at.dense?(l[Gt.r]||(l[Gt.r]=[]),l[Gt.r][Gt.c]=lr):l[E]=lr}},Y={enc:!1,sbcch:0,snames:[],sharedf:O,arrayf:M,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!a&&!!a.cellStyles,WTF:!!a&&!!a.wtf};a.password&&(Y.password=a.password);var ue,de=[],G=[],q=[],xe=[],Ce=!1,le=[];le.SheetNames=Y.snames,le.sharedf=Y.sharedf,le.arrayf=Y.arrayf,le.names=[],le.XTI=[];var oe=0,re=0,Q=0,X=[],se=[],ne;Y.codepage=1200,An(1200);for(var K=!1;t.l<t.length-1;){var Se=t.l,we=t.read_shift(2);if(we===0&&oe===10)break;var Ve=t.l===t.length?0:t.read_shift(2),Le=Pm[we];if(Le&&Le.f){if(a.bookSheets&&oe===133&&we!==133)break;if(oe=we,Le.r===2||Le.r==12){var ot=t.read_shift(2);if(Ve-=2,!Y.enc&&ot!==we&&((ot&255)<<8|ot>>8)!==we)throw new Error("rt mismatch: "+ot+"!="+we);Le.r==12&&(t.l+=10,Ve-=10)}var J={};if(we===10?J=Le.f(t,Ve,Y):J=SO(we,Le,t,Ve,Y),re==0&&[9,521,1033,2057].indexOf(oe)===-1)continue;switch(we){case 34:r.opts.Date1904=L.WBProps.date1904=J;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(Y.enc||(t.l=0),Y.enc=J,!a.password)throw new Error("File is password-protected");if(J.valid==null)throw new Error("Encryption scheme unsupported");if(!J.valid)throw new Error("Password is incorrect");break;case 92:Y.lastuser=J;break;case 66:var Ne=Number(J);switch(Ne){case 21010:Ne=1200;break;case 32768:Ne=1e4;break;case 32769:Ne=1252;break}An(Y.codepage=Ne),K=!0;break;case 317:Y.rrtabid=J;break;case 25:Y.winlocked=J;break;case 439:r.opts.RefreshAll=J;break;case 12:r.opts.CalcCount=J;break;case 16:r.opts.CalcDelta=J;break;case 17:r.opts.CalcIter=J;break;case 13:r.opts.CalcMode=J;break;case 14:r.opts.CalcPrecision=J;break;case 95:r.opts.CalcSaveRecalc=J;break;case 15:Y.CalcRefMode=J;break;case 2211:r.opts.FullCalc=J;break;case 129:J.fDialog&&(l["!type"]="dialog"),J.fBelow||((l["!outline"]||(l["!outline"]={})).above=!0),J.fRight||((l["!outline"]||(l["!outline"]={})).left=!0);break;case 224:H.push(J);break;case 430:le.push([J]),le[le.length-1].XTI=[];break;case 35:case 547:le[le.length-1].push(J);break;case 24:case 536:ne={Name:J.Name,Ref:ds(J.rgce,f,null,le,Y)},J.itab>0&&(ne.Sheet=J.itab-1),le.names.push(ne),le[0]||(le[0]=[],le[0].XTI=[]),le[le.length-1].push(J),J.Name=="_xlnm._FilterDatabase"&&J.itab>0&&J.rgce&&J.rgce[0]&&J.rgce[0][0]&&J.rgce[0][0][0]=="PtgArea3d"&&(se[J.itab-1]={ref:vr(J.rgce[0][0][1][2])});break;case 22:Y.ExternCount=J;break;case 23:le.length==0&&(le[0]=[],le[0].XTI=[]),le[le.length-1].XTI=le[le.length-1].XTI.concat(J),le.XTI=le.XTI.concat(J);break;case 2196:if(Y.biff<8)break;ne!=null&&(ne.Comment=J[1]);break;case 18:l["!protect"]=J;break;case 19:J!==0&&Y.WTF&&console.error("Password verifier: "+J);break;case 133:d[J.pos]=J,Y.snames.push(J.name);break;case 10:{if(--re)break;if(f.e){if(f.e.r>0&&f.e.c>0){if(f.e.r--,f.e.c--,l["!ref"]=vr(f),a.sheetRows&&a.sheetRows<=f.e.r){var Ie=f.e.r;f.e.r=a.sheetRows-1,l["!fullref"]=l["!ref"],l["!ref"]=vr(f),f.e.r=Ie}f.e.r++,f.e.c++}de.length>0&&(l["!merges"]=de),G.length>0&&(l["!objects"]=G),q.length>0&&(l["!cols"]=q),xe.length>0&&(l["!rows"]=xe),L.Sheets.push(P)}p===""?w=l:i[p]=l,l=a.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(Y.biff===8&&(Y.biff={9:2,521:3,1033:4}[we]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[J.BIFFVer]||8),Y.biffguess=J.BIFFVer==0,J.BIFFVer==0&&J.dt==4096&&(Y.biff=5,K=!0,An(Y.codepage=28591)),Y.biff==8&&J.BIFFVer==0&&J.dt==16&&(Y.biff=2),re++)break;if(l=a.dense?[]:{},Y.biff<8&&!K&&(K=!0,An(Y.codepage=a.codepage||1252)),Y.biff<5||J.BIFFVer==0&&J.dt==4096){p===""&&(p="Sheet1"),f={s:{r:0,c:0},e:{r:0,c:0}};var ke={pos:t.l-Ve,name:p};d[ke.pos]=ke,Y.snames.push(p)}else p=(d[Se]||{name:""}).name;J.dt==32&&(l["!type"]="chart"),J.dt==64&&(l["!type"]="macro"),de=[],G=[],Y.arrayf=M=[],q=[],xe=[],Ce=!1,P={Hidden:(d[Se]||{hs:0}).hs,name:p}}break;case 515:case 3:case 2:l["!type"]=="chart"&&(a.dense?(l[J.r]||[])[J.c]:l[Zt({c:J.c,r:J.r})])&&++J.c,D={ixfe:J.ixfe,XF:H[J.ixfe]||{},v:J.val,t:"n"},Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:J.c,r:J.r},D,a);break;case 5:case 517:D={ixfe:J.ixfe,XF:H[J.ixfe],v:J.val,t:J.t},Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:J.c,r:J.r},D,a);break;case 638:D={ixfe:J.ixfe,XF:H[J.ixfe],v:J.rknum,t:"n"},Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:J.c,r:J.r},D,a);break;case 189:for(var Qe=J.c;Qe<=J.C;++Qe){var _e=J.rkrec[Qe-J.c][0];D={ixfe:_e,XF:H[_e],v:J.rkrec[Qe-J.c][1],t:"n"},Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:Qe,r:J.r},D,a)}break;case 6:case 518:case 1030:{if(J.val=="String"){h=J;break}if(D=Ou(J.val,J.cell.ixfe,J.tt),D.XF=H[D.ixfe],a.cellFormula){var ut=J.formula;if(ut&&ut[0]&&ut[0][0]&&ut[0][0][0]=="PtgExp"){var pe=ut[0][0][1][0],Ge=ut[0][0][1][1],ze=Zt({r:pe,c:Ge});O[ze]?D.f=""+ds(J.formula,f,J.cell,le,Y):D.F=((a.dense?(l[pe]||[])[Ge]:l[ze])||{}).F}else D.f=""+ds(J.formula,f,J.cell,le,Y)}Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae(J.cell,D,a),h=J}break;case 7:case 519:if(h)h.val=J,D=Ou(J,h.cell.ixfe,"s"),D.XF=H[D.ixfe],a.cellFormula&&(D.f=""+ds(h.formula,f,h.cell,le,Y)),Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae(h.cell,D,a),h=null;else throw new Error("String record expects Formula");break;case 33:case 545:{M.push(J);var Pe=Zt(J[0].s);if(_=a.dense?(l[J[0].s.r]||[])[J[0].s.c]:l[Pe],a.cellFormula&&_){if(!h||!Pe||!_)break;_.f=""+ds(J[1],f,J[0],le,Y),_.F=vr(J[0])}}break;case 1212:{if(!a.cellFormula)break;if(E){if(!h)break;O[Zt(h.cell)]=J[0],_=a.dense?(l[h.cell.r]||[])[h.cell.c]:l[Zt(h.cell)],(_||{}).f=""+ds(J[0],f,j,le,Y)}}break;case 253:D=Ou(b[J.isst].t,J.ixfe,"s"),b[J.isst].h&&(D.h=b[J.isst].h),D.XF=H[D.ixfe],Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:J.c,r:J.r},D,a);break;case 513:a.sheetStubs&&(D={ixfe:J.ixfe,XF:H[J.ixfe],t:"z"},Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:J.c,r:J.r},D,a));break;case 190:if(a.sheetStubs)for(var Oe=J.c;Oe<=J.C;++Oe){var nt=J.ixfe[Oe-J.c];D={ixfe:nt,XF:H[nt],t:"z"},Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:Oe,r:J.r},D,a)}break;case 214:case 516:case 4:D=Ou(J.val,J.ixfe,"s"),D.XF=H[D.ixfe],Q>0&&(D.z=X[D.ixfe>>8&63]),ti(D,a,r.opts.Date1904),ae({c:J.c,r:J.r},D,a);break;case 0:case 512:re===1&&(f=J);break;case 252:b=J;break;case 1054:if(Y.biff==4){X[Q++]=J[1];for(var kt=0;kt<Q+163&&rr[kt]!=J[1];++kt);kt>=163&&lo(J[1],Q+163)}else lo(J[1],J[0]);break;case 30:{X[Q++]=J;for(var St=0;St<Q+163&&rr[St]!=J;++St);St>=163&&lo(J,Q+163)}break;case 229:de=de.concat(J);break;case 93:G[J.cmo[0]]=Y.lastobj=J;break;case 438:Y.lastobj.TxO=J;break;case 127:Y.lastobj.ImData=J;break;case 440:for(I=J[0].s.r;I<=J[0].e.r;++I)for(A=J[0].s.c;A<=J[0].e.c;++A)_=a.dense?(l[I]||[])[A]:l[Zt({c:A,r:I})],_&&(_.l=J[1]);break;case 2048:for(I=J[0].s.r;I<=J[0].e.r;++I)for(A=J[0].s.c;A<=J[0].e.c;++A)_=a.dense?(l[I]||[])[A]:l[Zt({c:A,r:I})],_&&_.l&&(_.l.Tooltip=J[1]);break;case 28:{if(Y.biff<=5&&Y.biff>=2)break;_=a.dense?(l[J[0].r]||[])[J[0].c]:l[Zt(J[0])];var Nr=G[J[2]];_||(a.dense?(l[J[0].r]||(l[J[0].r]=[]),_=l[J[0].r][J[0].c]={t:"z"}):_=l[Zt(J[0])]={t:"z"},f.e.r=Math.max(f.e.r,J[0].r),f.s.r=Math.min(f.s.r,J[0].r),f.e.c=Math.max(f.e.c,J[0].c),f.s.c=Math.min(f.s.c,J[0].c)),_.c||(_.c=[]),T={a:J[1],t:Nr.TxO.t},_.c.push(T)}break;case 2173:Q7(H[J.ixfe],J.ext);break;case 125:{if(!Y.cellStyles)break;for(;J.e>=J.s;)q[J.e--]={width:J.w/256,level:J.level||0,hidden:!!(J.flags&1)},Ce||(Ce=!0,wg(J.w/256)),vc(q[J.e+1])}break;case 520:{var tr={};J.level!=null&&(xe[J.r]=tr,tr.level=J.level),J.hidden&&(xe[J.r]=tr,tr.hidden=!0),J.hpt&&(xe[J.r]=tr,tr.hpt=J.hpt,tr.hpx=K0(J.hpt))}break;case 38:case 39:case 40:case 41:l["!margins"]||F0(l["!margins"]={}),l["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[we]]=J;break;case 161:l["!margins"]||F0(l["!margins"]={}),l["!margins"].header=J.header,l["!margins"].footer=J.footer;break;case 574:J.RTL&&(L.Views[0].RTL=!0);break;case 146:z=J;break;case 2198:ue=J;break;case 140:B=J;break;case 442:p?P.CodeName=J||P.name:L.WBProps.CodeName=J||"ThisWorkbook";break}}else Le||console.error("Missing Info for XLS Record 0x"+we.toString(16)),t.l+=Ve}return r.SheetNames=ni(d).sort(function(qt,Gt){return Number(qt)-Number(Gt)}).map(function(qt){return d[qt].name}),a.bookSheets||(r.Sheets=i),!r.SheetNames.length&&w["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=w)):r.Preamble=w,r.Sheets&&se.forEach(function(qt,Gt){r.Sheets[r.SheetNames[Gt]]["!autofilter"]=qt}),r.Strings=b,r.SSF=Ja(rr),Y.enc&&(r.Encryption=Y.enc),ue&&(r.Themes=ue),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),le.names.length>0&&(L.Names=le.names),r.Workbook=L,r}var P2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function DO(t,a,r){var i=br.find(t,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var l=N2(i,YS,P2.DSI);for(var d in l)a[d]=l[d]}catch(p){if(r.WTF)throw p}var f=br.find(t,"/!SummaryInformation");if(f&&f.size>0)try{var h=N2(f,WS,P2.SI);for(var b in h)a[b]==null&&(a[b]=h[b])}catch(p){if(r.WTF)throw p}a.HeadingPairs&&a.TitlesOfParts&&(t4(a.HeadingPairs,a.TitlesOfParts,a,r),delete a.HeadingPairs,delete a.TitlesOfParts)}function L4(t,a){a||(a={}),Eg(a),xw(),a.codepage&&sg(a.codepage);var r,i;if(t.FullPaths){if(br.find(t,"/encryption"))throw new Error("File is password-protected");r=br.find(t,"!CompObj"),i=br.find(t,"/Workbook")||br.find(t,"/Book")}else{switch(a.type){case"base64":t=_n(rn(t));break;case"binary":t=_n(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}Za(t,0),i={content:t}}var l,d;if(r&&_O(r),a.bookProps&&!a.bookSheets)l={};else{var f=mr?"buffer":"array";if(i&&i.content)l=TO(i.content,a);else if((d=br.find(t,"PerfectOffice_MAIN"))&&d.content)l=O0.to_workbook(d.content,(a.type=f,a));else if((d=br.find(t,"NativeContent_MAIN"))&&d.content)l=O0.to_workbook(d.content,(a.type=f,a));else throw(d=br.find(t,"MN0"))&&d.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a.bookVBA&&t.FullPaths&&br.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(l.vbaraw=g9(t))}var h={};return t.FullPaths&&DO(t,h,a),l.Props=l.Custprops=h,a.bookFiles&&(l.cfb=t),l}var lf={0:{f:fR},1:{f:gR},2:{f:CR},3:{f:vR},4:{f:yR},5:{f:jR},6:{f:AR},7:{f:NR},8:{f:OR},9:{f:RR},10:{f:TR},11:{f:DR},12:{f:pR},13:{f:ER},14:{f:wR},15:{f:bR},16:{f:O4},17:{f:SR},18:{f:kR},19:{f:mg},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:iO},40:{},42:{},43:{f:T7},44:{f:S7},45:{f:D7},46:{f:O7},47:{f:R7},48:{},49:{f:IS},50:{},51:{f:e9},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:x4},62:{f:_R},63:{f:n9},64:{f:HR},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ms,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:UR},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:mR},148:{f:xR,p:16},151:{f:MR},152:{},153:{f:sO},154:{},155:{},156:{f:aO},157:{},158:{},159:{T:1,f:WT},160:{T:-1},161:{T:1,f:ko},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:IR},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:J7},336:{T:-1},337:{f:t9,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Im},357:{},358:{},359:{},360:{T:1},361:{},362:{f:f4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:BR},427:{f:LR},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:zR},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:hR},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:FR},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Im},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:x9},633:{T:1},634:{T:-1},635:{T:1,f:f9},636:{T:-1},637:{f:MS},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YR},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:VR},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Pm={6:{f:im},10:{f:vl},12:{f:Aa},13:{f:Aa},14:{f:wa},15:{f:wa},16:{f:fs},17:{f:wa},18:{f:wa},19:{f:Aa},20:{f:E2},21:{f:E2},23:{f:f4},24:{f:A2},25:{f:wa},26:{},27:{},28:{f:dT},29:{},34:{f:wa},35:{f:_2},38:{f:fs},39:{f:fs},40:{f:fs},41:{f:fs},42:{f:wa},43:{f:wa},47:{f:h7},49:{f:X5},51:{f:Aa},60:{},61:{f:H5},64:{f:wa},65:{f:G5},66:{f:Aa},77:{},80:{},81:{},82:{},85:{f:Aa},89:{},90:{},91:{},92:{f:I5},93:{f:fT},94:{},95:{f:wa},96:{},97:{},99:{f:wa},125:{f:x4},128:{f:tT},129:{f:F5},130:{f:Aa},131:{f:wa},132:{f:wa},133:{f:M5},134:{},140:{f:yT},141:{f:Aa},144:{},146:{f:vT},151:{},152:{},153:{},154:{},155:{},156:{f:Aa},157:{},158:{},160:{f:CT},161:{f:NT},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Z5},190:{f:Q5},193:{f:vl},197:{},198:{},199:{},200:{},201:{},202:{f:wa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Aa},220:{},221:{f:wa},222:{},224:{f:eT},225:{f:O5},226:{f:vl},227:{},229:{f:uT},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:B5},253:{f:q5},255:{f:L5},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:i4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:wa},353:{f:vl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:aT},431:{f:wa},432:{},433:{},434:{},437:{},438:{f:mT},439:{f:wa},440:{f:gT},441:{},442:{f:fd},443:{},444:{f:Aa},445:{},446:{},448:{f:vl},449:{f:U5,r:2},450:{f:vl},512:{f:j2},513:{f:jT},515:{f:rT},516:{f:$5},517:{f:C2},519:{f:ET},520:{f:P5},523:{},545:{f:S2},549:{f:k2},566:{},574:{f:V5},638:{f:K5},659:{},1048:{},1054:{f:Y5},1084:{},1212:{f:lT},2048:{f:pT},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Tu},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:vl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:wT,r:12},2173:{f:Z7,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:wa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:iT,r:12},2197:{},2198:{f:X7,r:12},2199:{},2200:{},2201:{},2202:{f:oT,r:12},2203:{f:vl},2204:{},2205:{},2206:{},2207:{},2211:{f:z5},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Aa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:kT},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:bT},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:j2},1:{},2:{f:TT},3:{f:ST},4:{f:AT},5:{f:C2},7:{f:DT},8:{},9:{f:Tu},11:{},22:{f:Aa},30:{f:W5},31:{},32:{},33:{f:S2},36:{},37:{f:k2},50:{f:RT},62:{},52:{},67:{},68:{f:Aa},69:{},86:{},126:{},127:{f:_T},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:OT},223:{},234:{},354:{},421:{},518:{f:im},521:{f:Tu},536:{f:A2},547:{f:_2},561:{},579:{},1030:{f:im},1033:{f:Tu},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function En(t,a,r,i){var l=a;if(!isNaN(l)){var d=(r||[]).length||0,f=t.next(4);f.write_shift(2,l),f.write_shift(2,d),d>0&&$w(r)&&t.push(r)}}function z2(t,a){var r=a||{},i=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var d=t.match(/<\/table/i),f=l.index,h=d&&d.index||t.length,b=rS(t.slice(f,h),/(:?<tr[^>]*>)/i,"<tr>"),p=-1,w=0,j=0,E=0,_={s:{r:1e7,c:1e7},e:{r:0,c:0}},T=[];for(f=0;f<b.length;++f){var A=b[f].trim(),I=A.slice(0,3).toLowerCase();if(I=="<tr"){if(++p,r.sheetRows&&r.sheetRows<=p){--p;break}w=0;continue}if(!(I!="<td"&&I!="<th")){var O=A.split(/<\/t[dh]>/i);for(h=0;h<O.length;++h){var M=O[h].trim();if(M.match(/<t[dh]/i)){for(var D=M,B=0;D.charAt(0)=="<"&&(B=D.indexOf(">"))>-1;)D=D.slice(B+1);for(var H=0;H<T.length;++H){var z=T[H];z.s.c==w&&z.s.r<p&&p<=z.e.r&&(w=z.e.c+1,H=-1)}var L=Vt(M.slice(0,M.indexOf(">")));E=L.colspan?+L.colspan:1,((j=+L.rowspan)>1||E>1)&&T.push({s:{r:p,c:w},e:{r:p+(j||1)-1,c:w+E-1}});var P=L.t||L["data-t"]||"";if(!D.length){w+=E;continue}if(D=Iw(D),_.s.r>p&&(_.s.r=p),_.e.r<p&&(_.e.r=p),_.s.c>w&&(_.s.c=w),_.e.c<w&&(_.e.c=w),!D.length){w+=E;continue}var U={t:"s",v:D};r.raw||!D.trim().length||P=="s"||(D==="TRUE"?U={t:"b",v:!0}:D==="FALSE"?U={t:"b",v:!1}:isNaN(Dn(D))?isNaN(bc(D).getDate())||(U={t:"d",v:Xa(D)},r.cellDates||(U={t:"n",v:Ss(U.v)}),U.z=r.dateNF||rr[14]):U={t:"n",v:Dn(D)}),r.dense?(i[p]||(i[p]=[]),i[p][w]=U):i[Zt({r:p,c:w})]=U,w+=E}}}}return i["!ref"]=vr(_),T.length&&(i["!merges"]=T),i}function RO(t,a,r,i){for(var l=t["!merges"]||[],d=[],f=a.s.c;f<=a.e.c;++f){for(var h=0,b=0,p=0;p<l.length;++p)if(!(l[p].s.r>r||l[p].s.c>f)&&!(l[p].e.r<r||l[p].e.c<f)){if(l[p].s.r<r||l[p].s.c<f){h=-1;break}h=l[p].e.r-l[p].s.r+1,b=l[p].e.c-l[p].s.c+1;break}if(!(h<0)){var w=Zt({r,c:f}),j=i.dense?(t[r]||[])[f]:t[w],E=j&&j.v!=null&&(j.h||dg(j.w||(Pi(j),j.w)||""))||"",_={};h>1&&(_.rowspan=h),b>1&&(_.colspan=b),i.editable?E='<span contenteditable="true">'+E+"</span>":j&&(_["data-t"]=j&&j.t||"z",j.v!=null&&(_["data-v"]=j.v),j.z!=null&&(_["data-z"]=j.z),j.l&&(j.l.Target||"#").charAt(0)!="#"&&(E='<a href="'+j.l.Target+'">'+E+"</a>")),_.id=(i.id||"sjs")+"-"+w,d.push(yS("td",E,_))}}var T="<tr>";return T+d.join("")+"</tr>"}var OO='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',IO="</body></html>";function FO(t,a){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Rl(z2(r[0],a),a);var i=Ag();return r.forEach(function(l,d){Sg(i,z2(l,a),"Sheet"+(d+1))}),i}function MO(t,a,r){var i=[];return i.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function BO(t,a){var r=a||{},i=r.header!=null?r.header:OO,l=r.footer!=null?r.footer:IO,d=[i],f=_c(t["!ref"]);r.dense=Array.isArray(t),d.push(MO(t,f,r));for(var h=f.s.r;h<=f.e.r;++h)d.push(RO(t,f,h,r));return d.push("</table>"+l),d.join("")}function P4(t,a,r){var i=r||{},l=0,d=0;if(i.origin!=null)if(typeof i.origin=="number")l=i.origin;else{var f=typeof i.origin=="string"?Cs(i.origin):i.origin;l=f.r,d=f.c}var h=a.getElementsByTagName("tr"),b=Math.min(i.sheetRows||1e7,h.length),p={s:{r:0,c:0},e:{r:l,c:d}};if(t["!ref"]){var w=_c(t["!ref"]);p.s.r=Math.min(p.s.r,w.s.r),p.s.c=Math.min(p.s.c,w.s.c),p.e.r=Math.max(p.e.r,w.e.r),p.e.c=Math.max(p.e.c,w.e.c),l==-1&&(p.e.r=l=w.e.r+1)}var j=[],E=0,_=t["!rows"]||(t["!rows"]=[]),T=0,A=0,I=0,O=0,M=0,D=0;for(t["!cols"]||(t["!cols"]=[]);T<h.length&&A<b;++T){var B=h[T];if(U2(B)){if(i.display)continue;_[A]={hidden:!0}}var H=B.children;for(I=O=0;I<H.length;++I){var z=H[I];if(!(i.display&&U2(z))){var L=z.hasAttribute("data-v")?z.getAttribute("data-v"):z.hasAttribute("v")?z.getAttribute("v"):Iw(z.innerHTML),P=z.getAttribute("data-z")||z.getAttribute("z");for(E=0;E<j.length;++E){var U=j[E];U.s.c==O+d&&U.s.r<A+l&&A+l<=U.e.r&&(O=U.e.c+1-d,E=-1)}D=+z.getAttribute("colspan")||1,((M=+z.getAttribute("rowspan")||1)>1||D>1)&&j.push({s:{r:A+l,c:O+d},e:{r:A+l+(M||1)-1,c:O+d+(D||1)-1}});var Z={t:"s",v:L},ae=z.getAttribute("data-t")||z.getAttribute("t")||"";L!=null&&(L.length==0?Z.t=ae||"z":i.raw||L.trim().length==0||ae=="s"||(L==="TRUE"?Z={t:"b",v:!0}:L==="FALSE"?Z={t:"b",v:!1}:isNaN(Dn(L))?isNaN(bc(L).getDate())||(Z={t:"d",v:Xa(L)},i.cellDates||(Z={t:"n",v:Ss(Z.v)}),Z.z=i.dateNF||rr[14]):Z={t:"n",v:Dn(L)})),Z.z===void 0&&P!=null&&(Z.z=P);var Y="",ue=z.getElementsByTagName("A");if(ue&&ue.length)for(var de=0;de<ue.length&&!(ue[de].hasAttribute("href")&&(Y=ue[de].getAttribute("href"),Y.charAt(0)!="#"));++de);Y&&Y.charAt(0)!="#"&&(Z.l={Target:Y}),i.dense?(t[A+l]||(t[A+l]=[]),t[A+l][O+d]=Z):t[Zt({c:O+d,r:A+l})]=Z,p.e.c<O+d&&(p.e.c=O+d),O+=D}}++A}return j.length&&(t["!merges"]=(t["!merges"]||[]).concat(j)),p.e.r=Math.max(p.e.r,A-1+l),t["!ref"]=vr(p),A>=b&&(t["!fullref"]=vr((p.e.r=h.length-T+A-1+l,p))),t}function z4(t,a){var r=a||{},i=r.dense?[]:{};return P4(i,t,a)}function LO(t,a){return Rl(z4(t,a),a)}function U2(t){var a="",r=PO(t);return r&&(a=r(t).getPropertyValue("display")),a||(a=t.style&&t.style.display),a==="none"}function PO(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function zO(t){var a=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(i,l){return Array(parseInt(l,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=kr(a.replace(/<[^>]*>/g,""));return[r]}var H2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function U4(t,a){var r=a||{},i=ug(t),l=[],d,f,h={name:""},b="",p=0,w,j,E={},_=[],T=r.dense?[]:{},A,I,O={value:""},M="",D=0,B=[],H=-1,z=-1,L={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,U={},Z=[],ae={},Y=0,ue=0,de=[],G=1,q=1,xe=[],Ce={Names:[]},le={},oe=["",""],re=[],Q={},X="",se=0,ne=!1,K=!1,Se=0;for($0.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");A=$0.exec(i);)switch(A[3]=A[3].replace(/_.*$/,"")){case"table":case"":A[1]==="/"?(L.e.c>=L.s.c&&L.e.r>=L.s.r?T["!ref"]=vr(L):T["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=L.e.r&&(T["!fullref"]=T["!ref"],L.e.r=r.sheetRows-1,T["!ref"]=vr(L)),Z.length&&(T["!merges"]=Z),de.length&&(T["!rows"]=de),w.name=w.||w.name,typeof JSON<"u"&&JSON.stringify(w),_.push(w.name),E[w.name]=T,K=!1):A[0].charAt(A[0].length-2)!=="/"&&(w=Vt(A[0],!1),H=z=-1,L.s.r=L.s.c=1e7,L.e.r=L.e.c=0,T=r.dense?[]:{},Z=[],de=[],K=!0);break;case"table-row-group":A[1]==="/"?--P:++P;break;case"table-row":case"":if(A[1]==="/"){H+=G,G=1;break}if(j=Vt(A[0],!1),j.?H=j.-1:H==-1&&(H=0),G=+j["number-rows-repeated"]||1,G<10)for(Se=0;Se<G;++Se)P>0&&(de[H+Se]={level:P});z=-1;break;case"covered-table-cell":A[1]!=="/"&&++z,r.sheetStubs&&(r.dense?(T[H]||(T[H]=[]),T[H][z]={t:"z"}):T[Zt({r:H,c:z})]={t:"z"}),M="",B=[];break;case"table-cell":case"":if(A[0].charAt(A[0].length-2)==="/")++z,O=Vt(A[0],!1),q=parseInt(O["number-columns-repeated"]||"1",10),I={t:"z",v:null},O.formula&&r.cellFormula!=!1&&(I.f=M2(kr(O.formula))),(O.||O["value-type"])=="string"&&(I.t="s",I.v=kr(O["string-value"]||""),r.dense?(T[H]||(T[H]=[]),T[H][z]=I):T[Zt({r:H,c:z})]=I),z+=q-1;else if(A[1]!=="/"){++z,M="",D=0,B=[],q=1;var we=G?H+G-1:H;if(z>L.e.c&&(L.e.c=z),z<L.s.c&&(L.s.c=z),H<L.s.r&&(L.s.r=H),we>L.e.r&&(L.e.r=we),O=Vt(A[0],!1),re=[],Q={},I={t:O.||O["value-type"],v:null},r.cellFormula)if(O.formula&&(O.formula=kr(O.formula)),O["number-matrix-columns-spanned"]&&O["number-matrix-rows-spanned"]&&(Y=parseInt(O["number-matrix-rows-spanned"],10)||0,ue=parseInt(O["number-matrix-columns-spanned"],10)||0,ae={s:{r:H,c:z},e:{r:H+Y-1,c:z+ue-1}},I.F=vr(ae),xe.push([ae,I.F])),O.formula)I.f=M2(O.formula);else for(Se=0;Se<xe.length;++Se)H>=xe[Se][0].s.r&&H<=xe[Se][0].e.r&&z>=xe[Se][0].s.c&&z<=xe[Se][0].e.c&&(I.F=xe[Se][1]);switch((O["number-columns-spanned"]||O["number-rows-spanned"])&&(Y=parseInt(O["number-rows-spanned"],10)||0,ue=parseInt(O["number-columns-spanned"],10)||0,ae={s:{r:H,c:z},e:{r:H+Y-1,c:z+ue-1}},Z.push(ae)),O["number-columns-repeated"]&&(q=parseInt(O["number-columns-repeated"],10)),I.t){case"boolean":I.t="b",I.v=ea(O["boolean-value"]);break;case"float":I.t="n",I.v=parseFloat(O.value);break;case"percentage":I.t="n",I.v=parseFloat(O.value);break;case"currency":I.t="n",I.v=parseFloat(O.value);break;case"date":I.t="d",I.v=Xa(O["date-value"]),r.cellDates||(I.t="n",I.v=Ss(I.v)),I.z="m/d/yy";break;case"time":I.t="n",I.v=JA(O["time-value"])/86400,r.cellDates&&(I.t="d",I.v=Nf(I.v)),I.z="HH:MM:SS";break;case"number":I.t="n",I.v=parseFloat(O.);break;default:if(I.t==="string"||I.t==="text"||!I.t)I.t="s",O["string-value"]!=null&&(M=kr(O["string-value"]),B=[]);else throw new Error("Unsupported value type "+I.t)}}else{if(ne=!1,I.t==="s"&&(I.v=M||"",B.length&&(I.R=B),ne=D==0),le.Target&&(I.l=le),re.length>0&&(I.c=re,re=[]),M&&r.cellText!==!1&&(I.w=M),ne&&(I.t="z",delete I.v),(!ne||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var Ve=0;Ve<G;++Ve){if(q=parseInt(O["number-columns-repeated"]||"1",10),r.dense)for(T[H+Ve]||(T[H+Ve]=[]),T[H+Ve][z]=Ve==0?I:Ja(I);--q>0;)T[H+Ve][z+q]=Ja(I);else for(T[Zt({r:H+Ve,c:z})]=I;--q>0;)T[Zt({r:H+Ve,c:z+q})]=Ja(I);L.e.c<=z&&(L.e.c=z)}q=parseInt(O["number-columns-repeated"]||"1",10),z+=q-1,q=0,I={},M="",B=[]}le={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!0]);break;case"annotation":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d;Q.t=M,B.length&&(Q.R=B),Q.a=X,re.push(Q)}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);X="",se=0,M="",D=0,B=[];break;case"creator":A[1]==="/"?X=i.slice(se,A.index):se=A.index+A[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);M="",D=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(A[1]==="/"){if(U[h.name]=b,(d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&(b="",h=Vt(A[0],!1),l.push([A[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Vt(A[0],!1),b+=H2[A[3]][f.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Vt(A[0],!1),b+=H2[A[3]][f.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(A[0].slice(-2)==="/>")break;if(A[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":b+=i.slice(p,A.index);break}else p=A.index+A[0].length;break;case"named-range":f=Vt(A[0],!1),oe=lm(f["cell-range-address"]);var Le={Name:f.name,Ref:oe[0]+"!"+oe[1]};K&&(Le.Sheet=_.length),Ce.Names.push(Le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(A[1]==="/"&&(!O||!O["string-value"])){var ot=zO(i.slice(D,A.index));M=(M.length>0?M+`
`:"")+ot[0]}else Vt(A[0],!1),D=A.index+A[0].length;break;case"s":break;case"database-range":if(A[1]==="/")break;try{oe=lm(Vt(A[0])["target-range-address"]),E[oe[0]]["!autofilter"]={ref:oe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(A[1]!=="/"){if(le=Vt(A[0],!1),!le.href)break;le.Target=kr(le.href),delete le.href,le.Target.charAt(0)=="#"&&le.Target.indexOf(".")>-1?(oe=lm(le.Target.slice(1)),le.Target="#"+oe[0]+"!"+oe[1]):le.Target.match(/^\.\.[\\\/]/)&&(le.Target=le.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(A[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(A)}}var J={Sheets:E,SheetNames:_,Workbook:Ce};return r.bookSheets&&delete J.Sheets,J}function V2(t,a){a=a||{},hn(t,"META-INF/manifest.xml")&&r5(_a(t,"META-INF/manifest.xml"),a);var r=Js(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var i=U4(Xr(r),a);return hn(t,"meta.xml")&&(i.Props=e4(_a(t,"meta.xml"))),i}function G2(t,a){return U4(t,a)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function jg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function zm(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Xr(wo(t))}function Um(t){var a=t.reduce(function(l,d){return l+d.length},0),r=new Uint8Array(a),i=0;return t.forEach(function(l){r.set(l,i),i+=l.length}),r}function X2(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function UO(t,a){for(var r=(t[a+15]&127)<<7|t[a+14]>>1,i=t[a+14]&1,l=a+13;l>=a;--l)i=i*256+t[l];return(t[a+15]&128?-i:i)*Math.pow(10,r-6176)}function Z0(t,a){var r=a?a[0]:0,i=t[r]&127;e:if(t[r++]>=128&&(i|=(t[r]&127)<<7,t[r++]<128||(i|=(t[r]&127)<<14,t[r++]<128)||(i|=(t[r]&127)<<21,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return a&&(a[0]=r),i}function za(t){var a=0,r=t[a]&127;e:if(t[a++]>=128){if(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128))break e;r|=(t[a]&127)<<28}return r}function xs(t){for(var a=[],r=[0];r[0]<t.length;){var i=r[0],l=Z0(t,r),d=l&7;l=Math.floor(l/8);var f=0,h;if(l==0)break;switch(d){case 0:{for(var b=r[0];t[r[0]++]>=128;);h=t.slice(b,r[0])}break;case 5:f=4,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 1:f=8,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 2:f=Z0(t,r),h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 3:case 4:default:throw new Error("PB Type ".concat(d," for Field ").concat(l," at offset ").concat(i))}var p={data:h,type:d};a[l]==null?a[l]=[p]:a[l].push(p)}return a}function Cg(t,a){return t?.map(function(r){return a(r.data)})||[]}function HO(t){for(var a,r=[],i=[0];i[0]<t.length;){var l=Z0(t,i),d=xs(t.slice(i[0],i[0]+l));i[0]+=l;var f={id:za(d[1][0].data),messages:[]};d[2].forEach(function(h){var b=xs(h.data),p=za(b[3][0].data);f.messages.push({meta:b,data:t.slice(i[0],i[0]+p)}),i[0]+=p}),(a=d[3])!=null&&a[0]&&(f.merge=za(d[3][0].data)>>>0>0),r.push(f)}return r}function VO(t,a){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],i=Z0(a,r),l=[];r[0]<a.length;){var d=a[r[0]]&3;if(d==0){var f=a[r[0]++]>>2;if(f<60)++f;else{var h=f-59;f=a[r[0]],h>1&&(f|=a[r[0]+1]<<8),h>2&&(f|=a[r[0]+2]<<16),h>3&&(f|=a[r[0]+3]<<24),f>>>=0,f++,r[0]+=h}l.push(a.slice(r[0],r[0]+f)),r[0]+=f;continue}else{var b=0,p=0;if(d==1?(p=(a[r[0]]>>2&7)+4,b=(a[r[0]++]&224)<<3,b|=a[r[0]++]):(p=(a[r[0]++]>>2)+1,d==2?(b=a[r[0]]|a[r[0]+1]<<8,r[0]+=2):(b=(a[r[0]]|a[r[0]+1]<<8|a[r[0]+2]<<16|a[r[0]+3]<<24)>>>0,r[0]+=4)),l=[Um(l)],b==0)throw new Error("Invalid offset 0");if(b>l[0].length)throw new Error("Invalid offset beyond length");if(p>=b)for(l.push(l[0].slice(-b)),p-=b;p>=l[l.length-1].length;)l.push(l[l.length-1]),p-=l[l.length-1].length;l.push(l[0].slice(-b,-b+p))}}var w=Um(l);if(w.length!=i)throw new Error("Unexpected length: ".concat(w.length," != ").concat(i));return w}function GO(t){for(var a=[],r=0;r<t.length;){var i=t[r++],l=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,a.push(VO(i,t.slice(r,r+l))),r+=l}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Um(a)}function XO(t,a,r,i){var l=jg(t),d=l.getUint32(4,!0),f=(i>1?12:8)+X2(d&(i>1?3470:398))*4,h=-1,b=-1,p=NaN,w=new Date(2001,0,1);d&512&&(h=l.getUint32(f,!0),f+=4),f+=X2(d&(i>1?12288:4096))*4,d&16&&(b=l.getUint32(f,!0),f+=4),d&32&&(p=l.getFloat64(f,!0),f+=8),d&64&&(w.setTime(w.getTime()+l.getFloat64(f,!0)*1e3),f+=8);var j;switch(t[2]){case 0:break;case 2:j={t:"n",v:p};break;case 3:j={t:"s",v:a[b]};break;case 5:j={t:"d",v:w};break;case 6:j={t:"b",v:p>0};break;case 7:j={t:"n",v:p/86400};break;case 8:j={t:"e",v:0};break;case 9:if(h>-1)j={t:"s",v:r[h]};else if(b>-1)j={t:"s",v:a[b]};else if(!isNaN(p))j={t:"n",v:p};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return j}function qO(t,a,r){var i=jg(t),l=i.getUint32(8,!0),d=12,f=-1,h=-1,b=NaN,p=NaN,w=new Date(2001,0,1);l&1&&(b=UO(t,d),d+=16),l&2&&(p=i.getFloat64(d,!0),d+=8),l&4&&(w.setTime(w.getTime()+i.getFloat64(d,!0)*1e3),d+=8),l&8&&(h=i.getUint32(d,!0),d+=4),l&16&&(f=i.getUint32(d,!0),d+=4);var j;switch(t[1]){case 0:break;case 2:j={t:"n",v:b};break;case 3:j={t:"s",v:a[h]};break;case 5:j={t:"d",v:w};break;case 6:j={t:"b",v:p>0};break;case 7:j={t:"n",v:p/86400};break;case 8:j={t:"e",v:0};break;case 9:if(f>-1)j={t:"s",v:r[f]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)));break;case 10:j={t:"n",v:b};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)))}return j}function $O(t,a,r){switch(t[0]){case 0:case 1:case 2:case 3:return XO(t,a,r,t[0]);case 5:return qO(t,a,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function jl(t){var a=xs(t);return Z0(a[1][0].data)}function q2(t,a){var r=xs(a.data),i=za(r[1][0].data),l=r[3],d=[];return(l||[]).forEach(function(f){var h=xs(f.data),b=za(h[1][0].data)>>>0;switch(i){case 1:d[b]=zm(h[3][0].data);break;case 8:{var p=t[jl(h[9][0].data)][0],w=xs(p.data),j=t[jl(w[1][0].data)][0],E=za(j.meta[1][0].data);if(E!=2001)throw new Error("2000 unexpected reference to ".concat(E));var _=xs(j.data);d[b]=_[3].map(function(T){return zm(T.data)}).join("")}break}}),d}function YO(t,a){var r,i,l,d,f,h,b,p,w,j,E,_,T,A,I=xs(t),O=za(I[1][0].data)>>>0,M=za(I[2][0].data)>>>0,D=((i=(r=I[8])==null?void 0:r[0])==null?void 0:i.data)&&za(I[8][0].data)>0||!1,B,H;if((d=(l=I[7])==null?void 0:l[0])!=null&&d.data&&a!=0)B=(h=(f=I[7])==null?void 0:f[0])==null?void 0:h.data,H=(p=(b=I[6])==null?void 0:b[0])==null?void 0:p.data;else if((j=(w=I[4])==null?void 0:w[0])!=null&&j.data&&a!=1)B=(_=(E=I[4])==null?void 0:E[0])==null?void 0:_.data,H=(A=(T=I[3])==null?void 0:T[0])==null?void 0:A.data;else throw"NUMBERS Tile missing ".concat(a," cell storage");for(var z=D?4:1,L=jg(B),P=[],U=0;U<B.length/2;++U){var Z=L.getUint16(U*2,!0);Z<65535&&P.push([U,Z])}if(P.length!=M)throw"Expected ".concat(M," cells, found ").concat(P.length);var ae=[];for(U=0;U<P.length-1;++U)ae[P[U][0]]=H.subarray(P[U][1]*z,P[U+1][1]*z);return P.length>=1&&(ae[P[P.length-1][0]]=H.subarray(P[P.length-1][1]*z)),{R:O,cells:ae}}function WO(t,a){var r,i=xs(a.data),l=(r=i?.[7])!=null&&r[0]?za(i[7][0].data)>>>0>0?1:0:-1,d=Cg(i[5],function(f){return YO(f,l)});return{nrows:za(i[4][0].data)>>>0,data:d.reduce(function(f,h){return f[h.R]||(f[h.R]=[]),h.cells.forEach(function(b,p){if(f[h.R][p])throw new Error("Duplicate cell r=".concat(h.R," c=").concat(p));f[h.R][p]=b}),f},[])}}function KO(t,a,r){var i,l=xs(a.data),d={s:{r:0,c:0},e:{r:0,c:0}};if(d.e.r=(za(l[6][0].data)>>>0)-1,d.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(d.e.c=(za(l[7][0].data)>>>0)-1,d.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=vr(d);var f=xs(l[4][0].data),h=q2(t,t[jl(f[4][0].data)][0]),b=(i=f[17])!=null&&i[0]?q2(t,t[jl(f[17][0].data)][0]):[],p=xs(f[3][0].data),w=0;p[1].forEach(function(j){var E=xs(j.data),_=t[jl(E[2][0].data)][0],T=za(_.meta[1][0].data);if(T!=6002)throw new Error("6001 unexpected reference to ".concat(T));var A=WO(t,_);A.data.forEach(function(I,O){I.forEach(function(M,D){var B=Zt({r:w+O,c:D}),H=$O(M,h,b);H&&(r[B]=H)})}),w+=A.nrows})}function ZO(t,a){var r=xs(a.data),i={"!ref":"A1"},l=t[jl(r[2][0].data)],d=za(l[0].meta[1][0].data);if(d!=6001)throw new Error("6000 unexpected reference to ".concat(d));return KO(t,l[0],i),i}function QO(t,a){var r,i=xs(a.data),l={name:(r=i[1])!=null&&r[0]?zm(i[1][0].data):"",sheets:[]},d=Cg(i[2],jl);return d.forEach(function(f){t[f].forEach(function(h){var b=za(h.meta[1][0].data);b==6e3&&l.sheets.push(ZO(t,h))})}),l}function JO(t,a){var r=Ag(),i=xs(a.data),l=Cg(i[1],jl);if(l.forEach(function(d){t[d].forEach(function(f){var h=za(f.meta[1][0].data);if(h==2){var b=QO(t,f);b.sheets.forEach(function(p,w){Sg(r,p,w==0?b.name:b.name+"_"+w,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function cm(t){var a,r,i,l,d={},f=[];if(t.FullPaths.forEach(function(b){if(b.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(b){if(b.name.match(/\.iwa$/)){var p;try{p=GO(b.content)}catch(j){return console.log("?? "+b.content.length+" "+(j.message||j))}var w;try{w=HO(p)}catch(j){return console.log("## "+(j.message||j))}w.forEach(function(j){d[j.id]=j.messages,f.push(j.id)})}}),!f.length)throw new Error("File has no messages");var h=((l=(i=(r=(a=d?.[1])==null?void 0:a[0])==null?void 0:r.meta)==null?void 0:i[1])==null?void 0:l[0].data)&&za(d[1][0].meta[1][0].data)==1&&d[1][0];if(h||f.forEach(function(b){d[b].forEach(function(p){var w=za(p.meta[1][0].data)>>>0;if(w==1)if(!h)h=p;else throw new Error("Document has multiple roots")})}),!h)throw new Error("Cannot find Document root");return JO(d,h)}function eI(t){return function(r){for(var i=0;i!=t.length;++i){var l=t[i];r[l[0]]===void 0&&(r[l[0]]=l[1]),l[2]==="n"&&(r[l[0]]=Number(r[l[0]]))}}}function Eg(t){eI([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function tI(t){return xc.WS.indexOf(t)>-1?"sheet":t==xc.CS?"chart":t==xc.DS?"dialog":t==xc.MS?"macro":t&&t.length?t:"sheet"}function rI(t,a){if(!t)return 0;try{t=a.map(function(i){return i.id||(i.id=i.strRelID),[i.name,t["!id"][i.id].Target,tI(t["!id"][i.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function aI(t,a,r,i,l,d,f,h,b,p,w,j){try{d[i]=D0(Js(t,r,!0),a);var E=_a(t,a),_;switch(h){case"sheet":_=cO(E,a,l,b,d[i],p,w,j);break;case"chart":if(_=dO(E,a,l,b,d[i],p,w,j),!_||!_["!drawel"])break;var T=E0(_["!drawel"].Target,a),A=Fm(T),I=o9(Js(t,T,!0),D0(Js(t,A,!0),T)),O=E0(I,T),M=Fm(O);_=qR(Js(t,O,!0),O,b,D0(Js(t,M,!0),O),p,_);break;case"macro":_=uO(E,a,l,b,d[i],p,w,j);break;case"dialog":_=fO(E,a,l,b,d[i],p,w,j);break;default:throw new Error("Unrecognized sheet type "+h)}f[i]=_;var D=[];d&&d[i]&&ni(d[i]).forEach(function(B){var H="";if(d[i][B].Type==xc.CMNT){H=E0(d[i][B].Target,a);var z=gO(_a(t,H,!0),H,b);if(!z||!z.length)return;D2(_,z,!1)}d[i][B].Type==xc.TCMNT&&(H=E0(d[i][B].Target,a),D=D.concat(d9(_a(t,H,!0),b)))}),D&&D.length&&D2(_,D,!0,b.people||[])}catch(B){if(b.WTF)throw B}}function fn(t){return t.charAt(0)=="/"?t.slice(1):t}function sI(t,a){if(Cw(),a=a||{},Eg(a),hn(t,"META-INF/manifest.xml")||hn(t,"objectdata.xml"))return V2(t,a);if(hn(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof cm<"u"){if(t.FileIndex)return cm(t);var r=br.utils.cfb_new();return s2(t).forEach(function(de){nS(r,de,sS(t,de))}),cm(r)}throw new Error("Unsupported NUMBERS file")}if(!hn(t,"[Content_Types].xml"))throw hn(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):hn(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var i=s2(t),l=e5(Js(t,"[Content_Types].xml")),d=!1,f,h;if(l.workbooks.length===0&&(h="xl/workbook.xml",_a(t,h,!0)&&l.workbooks.push(h)),l.workbooks.length===0){if(h="xl/workbook.bin",!_a(t,h,!0))throw new Error("Could not find workbook");l.workbooks.push(h),d=!0}l.workbooks[0].slice(-3)=="bin"&&(d=!0);var b={},p={};if(!a.bookSheets&&!a.bookProps){if(I0=[],l.sst)try{I0=mO(_a(t,fn(l.sst)),l.sst,a)}catch(de){if(a.WTF)throw de}a.cellStyles&&l.themes.length&&(b=hO(Js(t,l.themes[0].replace(/^\//,""),!0)||"",l.themes[0],a)),l.style&&(p=xO(_a(t,fn(l.style)),l.style,b,a))}l.links.map(function(de){try{var G=D0(Js(t,Fm(fn(de))),de);return yO(_a(t,fn(de)),G,de,a)}catch{}});var w=oO(_a(t,fn(l.workbooks[0])),l.workbooks[0],a),j={},E="";l.coreprops.length&&(E=_a(t,fn(l.coreprops[0]),!0),E&&(j=e4(E)),l.extprops.length!==0&&(E=_a(t,fn(l.extprops[0]),!0),E&&n5(E,j,a)));var _={};(!a.bookSheets||a.bookProps)&&l.custprops.length!==0&&(E=Js(t,fn(l.custprops[0]),!0),E&&(_=l5(E,a)));var T={};if((a.bookSheets||a.bookProps)&&(w.Sheets?f=w.Sheets.map(function(G){return G.name}):j.Worksheets&&j.SheetNames.length>0&&(f=j.SheetNames),a.bookProps&&(T.Props=j,T.Custprops=_),a.bookSheets&&typeof f<"u"&&(T.SheetNames=f),a.bookSheets?T.SheetNames:a.bookProps))return T;f={};var A={};a.bookDeps&&l.calcchain&&(A=pO(_a(t,fn(l.calcchain)),l.calcchain));var I=0,O={},M,D;{var B=w.Sheets;j.Worksheets=B.length,j.SheetNames=[];for(var H=0;H!=B.length;++H)j.SheetNames[H]=B[H].name}var z=d?"bin":"xml",L=l.workbooks[0].lastIndexOf("/"),P=(l.workbooks[0].slice(0,L+1)+"_rels/"+l.workbooks[0].slice(L+1)+".rels").replace(/^\//,"");hn(t,P)||(P="xl/_rels/workbook."+z+".rels");var U=D0(Js(t,P,!0),P.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(a.xlmeta=bO(_a(t,fn(l.metadata[0])),l.metadata[0],a)),(l.people||[]).length>=1&&(a.people=u9(_a(t,fn(l.people[0])),a)),U&&(U=rI(U,w.Sheets));var Z=_a(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(I=0;I!=j.Worksheets;++I){var ae="sheet";if(U&&U[I]?(M="xl/"+U[I][1].replace(/[\/]?xl\//,""),hn(t,M)||(M=U[I][1]),hn(t,M)||(M=P.replace(/_rels\/.*$/,"")+U[I][1]),ae=U[I][2]):(M="xl/worksheets/sheet"+(I+1-Z)+"."+z,M=M.replace(/sheet0\./,"sheet.")),D=M.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),a&&a.sheets!=null)switch(typeof a.sheets){case"number":if(I!=a.sheets)continue e;break;case"string":if(j.SheetNames[I].toLowerCase()!=a.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(a.sheets)){for(var Y=!1,ue=0;ue!=a.sheets.length;++ue)typeof a.sheets[ue]=="number"&&a.sheets[ue]==I&&(Y=1),typeof a.sheets[ue]=="string"&&a.sheets[ue].toLowerCase()==j.SheetNames[I].toLowerCase()&&(Y=1);if(!Y)continue e}}aI(t,M,D,j.SheetNames[I],I,O,f,ae,a,w,b,p)}return T={Directory:l,Workbook:w,Props:j,Custprops:_,Deps:A,Sheets:f,SheetNames:j.SheetNames,Strings:I0,Styles:p,Themes:b,SSF:Ja(rr)},a&&a.bookFiles&&(t.files?(T.keys=i,T.files=t.files):(T.keys=[],T.files={},t.FullPaths.forEach(function(de,G){de=de.replace(/^Root Entry[\/]/,""),T.keys.push(de),T.files[de]=t.FileIndex[G]}))),a&&a.bookVBA&&(l.vba.length>0?T.vbaraw=_a(t,fn(l.vba[0]),!0):l.defaults&&l.defaults.bin===m9&&(T.vbaraw=_a(t,"xl/vbaProject.bin",!0))),T}function nI(t,a){var r=a||{},i="Workbook",l=br.find(t,i);try{if(i="/!DataSpaces/Version",l=br.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(ZT(l.content),i="/!DataSpaces/DataSpaceMap",l=br.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var d=JT(l.content);if(d.length!==1||d[0].comps.length!==1||d[0].comps[0].t!==0||d[0].name!=="StrongEncryptionDataSpace"||d[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",l=br.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var f=e7(l.content);if(f.length!=1||f[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",l=br.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);r7(l.content)}catch{}if(i="/EncryptionInfo",l=br.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var h=a7(l.content);if(i="/EncryptedPackage",l=br.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(h[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(h[1],l.content,r.password||"",r);if(h[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(h[1],l.content,r.password||"",r);throw new Error("File is password-protected")}function _g(t,a){var r="";switch((a||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=rn(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(a&&a.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function iI(t,a){return br.find(t,"EncryptedPackage")?nI(t,a):L4(t,a)}function lI(t,a){var r,i=t,l=a||{};return l.type||(l.type=mr&&Buffer.isBuffer(t)?"buffer":"base64"),r=Dw(i,l),sI(r,l)}function H4(t,a){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Lm(t.slice(r),a);default:break e}return Y0.to_workbook(t,a)}function oI(t,a){var r="",i=_g(t,a);switch(a.type){case"base64":r=rn(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=mo(t);break;default:throw new Error("Unrecognized type "+a.type)}return i[0]==239&&i[1]==187&&i[2]==191&&(r=Xr(r)),a.type="binary",H4(r,a)}function cI(t,a){var r=t;return a.type=="base64"&&(r=rn(r)),r=G0.utils.decode(1200,r.slice(2),"str"),a.type="binary",H4(r,a)}function dI(t){return t.match(/[^\x00-\x7F]/)?_0(t):t}function dm(t,a,r,i){return i?(r.type="string",Y0.to_workbook(t,r)):Y0.to_workbook(a,r)}function Hm(t,a){xw();var r=a||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return Hm(new Uint8Array(t),(r=Ja(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var i=t,l=[0,0,0,0],d=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),pc={},r.dateNF&&(pc.dateNF=r.dateNF),r.type||(r.type=mr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=mr?"buffer":"binary",i=ZA(t),typeof Uint8Array<"u"&&!mr&&(r.type="array")),r.type=="string"&&(d=!0,r.type="binary",r.codepage=65001,i=dI(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var f=new ArrayBuffer(3),h=new Uint8Array(f);if(h.foo="bar",!h.foo)return r=Ja(r),r.type="array",Hm(ng(i),r)}switch((l=_g(i,r))[0]){case 208:if(l[1]===207&&l[2]===17&&l[3]===224&&l[4]===161&&l[5]===177&&l[6]===26&&l[7]===225)return iI(br.read(i,r),r);break;case 9:if(l[1]<=8)return L4(i,r);break;case 60:return Lm(i,r);case 73:if(l[1]===73&&l[2]===42&&l[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(l[1]===68)return LT(i,r);break;case 84:if(l[1]===65&&l[2]===66&&l[3]===76)return MT.to_workbook(i,r);break;case 80:return l[1]===75&&l[2]<9&&l[3]<9?lI(i,r):dm(t,i,r,d);case 239:return l[3]===60?Lm(i,r):dm(t,i,r,d);case 255:if(l[1]===254)return cI(i,r);if(l[1]===0&&l[2]===2&&l[3]===0)return O0.to_workbook(i,r);break;case 0:if(l[1]===0&&(l[2]>=2&&l[3]===0||l[2]===0&&(l[3]===8||l[3]===9)))return O0.to_workbook(i,r);break;case 3:case 131:case 139:case 140:return T2.to_workbook(i,r);case 123:if(l[1]===92&&l[2]===114&&l[3]===116)return m7.to_workbook(i,r);break;case 10:case 13:case 32:return oI(i,r);case 137:if(l[1]===80&&l[2]===78&&l[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return IT.indexOf(l[0])>-1&&l[2]<=12&&l[3]<=31?T2.to_workbook(i,r):dm(t,i,r,d)}function uI(t,a,r,i,l,d,f,h){var b=es(r),p=h.defval,w=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),j=!0,E=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(E,"__rowNum__",{value:r,enumerable:!1})}catch{E.__rowNum__=r}else E.__rowNum__=r;if(!f||t[r])for(var _=a.s.c;_<=a.e.c;++_){var T=f?t[r][_]:t[i[_]+b];if(T===void 0||T.t===void 0){if(p===void 0)continue;d[_]!=null&&(E[d[_]]=p);continue}var A=T.v;switch(T.t){case"z":if(A==null)break;continue;case"e":A=A==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+T.t)}if(d[_]!=null){if(A==null)if(T.t=="e"&&A===null)E[d[_]]=null;else if(p!==void 0)E[d[_]]=p;else if(w&&A===null)E[d[_]]=null;else continue;else E[d[_]]=w&&(T.t!=="n"||T.t==="n"&&h.rawNumbers!==!1)?A:Pi(T,A,h);A!=null&&(j=!1)}}return{row:E,isempty:j}}function Vm(t,a){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},i=0,l=1,d=[],f=0,h="",b={s:{r:0,c:0},e:{r:0,c:0}},p=a||{},w=p.range!=null?p.range:t["!ref"];switch(p.header===1?i=1:p.header==="A"?i=2:Array.isArray(p.header)?i=3:p.header==null&&(i=0),typeof w){case"string":b=ma(w);break;case"number":b=ma(t["!ref"]),b.s.r=w;break;default:b=w}i>0&&(l=0);var j=es(b.s.r),E=[],_=[],T=0,A=0,I=Array.isArray(t),O=b.s.r,M=0,D={};I&&!t[O]&&(t[O]=[]);var B=p.skipHidden&&t["!cols"]||[],H=p.skipHidden&&t["!rows"]||[];for(M=b.s.c;M<=b.e.c;++M)if(!(B[M]||{}).hidden)switch(E[M]=Pa(M),r=I?t[O][M]:t[E[M]+j],i){case 1:d[M]=M-b.s.c;break;case 2:d[M]=E[M];break;case 3:d[M]=p.header[M-b.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=f=Pi(r,null,p),A=D[f]||0,!A)D[f]=1;else{do h=f+"_"+A++;while(D[h]);D[f]=A,D[h]=1}d[M]=h}for(O=b.s.r+l;O<=b.e.r;++O)if(!(H[O]||{}).hidden){var z=uI(t,b,O,E,i,d,I,p);(z.isempty===!1||(i===1?p.blankrows!==!1:p.blankrows))&&(_[T++]=z.row)}return _.length=T,_}var $2=/"/g;function fI(t,a,r,i,l,d,f,h){for(var b=!0,p=[],w="",j=es(r),E=a.s.c;E<=a.e.c;++E)if(i[E]){var _=h.dense?(t[r]||[])[E]:t[i[E]+j];if(_==null)w="";else if(_.v!=null){b=!1,w=""+(h.rawNumbers&&_.t=="n"?_.v:Pi(_,null,h));for(var T=0,A=0;T!==w.length;++T)if((A=w.charCodeAt(T))===l||A===d||A===34||h.forceQuotes){w='"'+w.replace($2,'""')+'"';break}w=="ID"&&(w='"ID"')}else _.f!=null&&!_.F?(b=!1,w="="+_.f,w.indexOf(",")>=0&&(w='"'+w.replace($2,'""')+'"')):w="";p.push(w)}return h.blankrows===!1&&b?null:p.join(f)}function V4(t,a){var r=[],i=a??{};if(t==null||t["!ref"]==null)return"";var l=ma(t["!ref"]),d=i.FS!==void 0?i.FS:",",f=d.charCodeAt(0),h=i.RS!==void 0?i.RS:`
`,b=h.charCodeAt(0),p=new RegExp((d=="|"?"\\|":d)+"+$"),w="",j=[];i.dense=Array.isArray(t);for(var E=i.skipHidden&&t["!cols"]||[],_=i.skipHidden&&t["!rows"]||[],T=l.s.c;T<=l.e.c;++T)(E[T]||{}).hidden||(j[T]=Pa(T));for(var A=0,I=l.s.r;I<=l.e.r;++I)(_[I]||{}).hidden||(w=fI(t,l,I,j,f,b,d,i),w!=null&&(i.strip&&(w=w.replace(p,"")),(w||i.blankrows!==!1)&&r.push((A++?h:"")+w)));return delete i.dense,r.join("")}function xI(t,a){a||(a={}),a.FS="	",a.RS=`
`;var r=V4(t,a);return r}function hI(t){var a="",r,i="";if(t==null||t["!ref"]==null)return[];var l=ma(t["!ref"]),d="",f=[],h,b=[],p=Array.isArray(t);for(h=l.s.c;h<=l.e.c;++h)f[h]=Pa(h);for(var w=l.s.r;w<=l.e.r;++w)for(d=es(w),h=l.s.c;h<=l.e.c;++h)if(a=f[h]+d,r=p?(t[w]||[])[h]:t[a],i="",r!==void 0){if(r.F!=null){if(a=r.F,!r.f)continue;i=r.f,a.indexOf(":")==-1&&(a=a+":"+a)}if(r.f!=null)i=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}b[b.length]=a+"="+i}return b}function G4(t,a,r){var i=r||{},l=+!i.skipHeader,d=t||{},f=0,h=0;if(d&&i.origin!=null)if(typeof i.origin=="number")f=i.origin;else{var b=typeof i.origin=="string"?Cs(i.origin):i.origin;f=b.r,h=b.c}var p,w={s:{c:0,r:0},e:{c:h,r:f+a.length-1+l}};if(d["!ref"]){var j=ma(d["!ref"]);w.e.c=Math.max(w.e.c,j.e.c),w.e.r=Math.max(w.e.r,j.e.r),f==-1&&(f=j.e.r+1,w.e.r=f+a.length-1+l)}else f==-1&&(f=0,w.e.r=a.length-1+l);var E=i.header||[],_=0;a.forEach(function(A,I){ni(A).forEach(function(O){(_=E.indexOf(O))==-1&&(E[_=E.length]=O);var M=A[O],D="z",B="",H=Zt({c:h+_,r:f+I+l});p=Q0(d,H),M&&typeof M=="object"&&!(M instanceof Date)?d[H]=M:(typeof M=="number"?D="n":typeof M=="boolean"?D="b":typeof M=="string"?D="s":M instanceof Date?(D="d",i.cellDates||(D="n",M=Ss(M)),B=i.dateNF||rr[14]):M===null&&i.nullError&&(D="e",M=0),p?(p.t=D,p.v=M,delete p.w,delete p.R,B&&(p.z=B)):d[H]=p={t:D,v:M},B&&(p.z=B))})}),w.e.c=Math.max(w.e.c,h+E.length-1);var T=es(f);if(l)for(_=0;_<E.length;++_)d[Pa(_+h)+T]={t:"s",v:E[_]};return d["!ref"]=vr(w),d}function mI(t,a){return G4(null,t,a)}function Q0(t,a,r){if(typeof a=="string"){if(Array.isArray(t)){var i=Cs(a);return t[i.r]||(t[i.r]=[]),t[i.r][i.c]||(t[i.r][i.c]={t:"z"})}return t[a]||(t[a]={t:"z"})}return typeof a!="number"?Q0(t,Zt(a)):Q0(t,Zt({r:a,c:r||0}))}function gI(t,a){if(typeof a=="number"){if(a>=0&&t.SheetNames.length>a)return a;throw new Error("Cannot find sheet # "+a)}else if(typeof a=="string"){var r=t.SheetNames.indexOf(a);if(r>-1)return r;throw new Error("Cannot find sheet name |"+a+"|")}else throw new Error("Cannot find sheet |"+a+"|")}function Ag(){return{SheetNames:[],Sheets:{}}}function Sg(t,a,r,i){var l=1;if(!r)for(;l<=65535&&t.SheetNames.indexOf(r="Sheet"+l)!=-1;++l,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&t.SheetNames.indexOf(r)>=0){var d=r.match(/(^.*?)(\d+)$/);l=d&&+d[2]||0;var f=d&&d[1]||r;for(++l;l<=65535&&t.SheetNames.indexOf(r=f+l)!=-1;++l);}if(eO(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=a,r}function pI(t,a,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var i=gI(t,a);switch(t.Workbook.Sheets[i]||(t.Workbook.Sheets[i]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[i].Hidden=r}function yI(t,a){return t.z=a,t}function X4(t,a,r){return a?(t.l={Target:a},r&&(t.l.Tooltip=r)):delete t.l,t}function bI(t,a,r){return X4(t,"#"+a,r)}function vI(t,a,r){t.c||(t.c=[]),t.c.push({t:a,a:r||"SheetJS"})}function wI(t,a,r,i){for(var l=typeof a!="string"?a:ma(a),d=typeof a=="string"?a:vr(a),f=l.s.r;f<=l.e.r;++f)for(var h=l.s.c;h<=l.e.c;++h){var b=Q0(t,f,h);b.t="n",b.F=d,delete b.v,f==l.s.r&&h==l.s.c&&(b.f=r,i&&(b.D=!0))}return t}var Y2={encode_col:Pa,encode_row:es,encode_cell:Zt,encode_range:vr,decode_col:hg,decode_row:xg,split_cell:OS,decode_cell:Cs,decode_range:_c,format_cell:Pi,sheet_add_aoa:Ww,sheet_add_json:G4,sheet_add_dom:P4,aoa_to_sheet:Ac,json_to_sheet:mI,table_to_sheet:z4,table_to_book:LO,sheet_to_csv:V4,sheet_to_txt:xI,sheet_to_json:Vm,sheet_to_html:BO,sheet_to_formulae:hI,sheet_to_row_object_array:Vm,sheet_get_cell:Q0,book_new:Ag,book_append_sheet:Sg,book_set_sheet_visibility:pI,cell_set_number_format:yI,cell_set_hyperlink:X4,cell_set_internal_link:bI,cell_add_comment:vI,sheet_set_array_formula:wI,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function NI(){const[t,a]=C.useState(!1),[r,i]=C.useState([]),[l,d]=C.useState({}),[f,h]=C.useState({}),[b,p]=C.useState({}),[w,j]=C.useState({}),[E,_]=C.useState({}),[T,A]=C.useState({}),[I,O]=C.useState({}),[M,D]=C.useState(!1),[B,H]=C.useState(!1),[z,L]=C.useState(null),[P,U]=C.useState(null);C.useEffect(()=>{Z()},[]);const Z=async()=>{try{D(!0);const ne=await Ae.get("/apartments");ne.data.success&&i(ne.data.data||[])}catch(ne){console.error("Error loading apartments:",ne),ie.error("Failed to load apartments")}finally{D(!1)}},ae=async ne=>{if(ne)try{const K=await Ae.get(`/floors?apartment_id=${ne}`);if(K.data.success){const Se=K.data.data||[];d(we=>({...we,[ne]:Se})),Se.forEach(we=>{Y(ne,we.id)})}}catch(K){console.error("Error loading floors:",K),ie.error("Failed to load floors")}},Y=async(ne,K)=>{if(!(!ne||!K))try{const Se=await Ae.get(`/houses?apartment_id=${ne}&floor_id=${K}&status=vacant`);if(Se.data.success){const we=Se.data.data||[];h(Ve=>({...Ve,[K]:we}))}}catch(Se){console.error("Error loading houses:",Se),ie.error("Failed to load houses")}},ue=ne=>{A(K=>({...K,[ne]:!K[ne]})),T[ne]||ae(ne)},de=(ne,K)=>{const Se=`${ne}_${K}`;O(we=>({...we,[Se]:!we[Se]}))},G=(ne,K)=>{p(we=>({...we,[ne]:K})),(l[ne]||[]).forEach(we=>{j(Le=>({...Le,[we.id]:K})),(f[we.id]||[]).forEach(Le=>{_(ot=>({...ot,[Le.id]:K}))})})},q=(ne,K,Se)=>{j(ot=>({...ot,[K]:Se})),(f[K]||[]).forEach(ot=>{_(J=>({...J,[ot.id]:Se}))});const Le=(l[ne]||[]).every(ot=>ot.id===K?Se:w[ot.id]);p(ot=>({...ot,[ne]:Le}))},xe=(ne,K,Se,we)=>{_(Ne=>({...Ne,[Se]:we}));const Le=(f[K]||[]).every(Ne=>Ne.id===Se?we:E[Ne.id]);j(Ne=>({...Ne,[K]:Le}));const J=(l[ne]||[]).every(Ne=>Ne.id===K?Le:w[Ne.id]);p(Ne=>({...Ne,[ne]:J}))},Ce=ne=>{const K={};if(r.forEach(Se=>{K[Se.id]=ne}),p(K),ne){const Se={},we={};r.forEach(Ve=>{(l[Ve.id]||[]).forEach(ot=>{Se[ot.id]=ne,(f[ot.id]||[]).forEach(Ne=>{we[Ne.id]=ne})})}),j(Se),_(we)}else j({}),_({})},le=async()=>{try{const ne=Object.keys(E).filter(Le=>E[Le]);if(ne.length===0){ie.error("Please select at least one house");return}D(!0);const K=await Ae.post("/house-owners/bulk/generate-template",{house_ids:ne},{responseType:"arraybuffer"}),Se=new Blob([K.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),we=window.URL.createObjectURL(Se),Ve=document.createElement("a");Ve.href=we,Ve.download=`House_Owners_Template_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(Ve),Ve.click(),Ve.remove(),window.URL.revokeObjectURL(we),ie.success("Excel template downloaded successfully")}catch(ne){console.error("Error downloading template:",ne),ie.error("Failed to download template")}finally{D(!1)}},oe=async ne=>{const K=ne.target.files[0];if(K){if(!K.name.match(/\.(xlsx|xls|csv)$/i)){ie.error("Please upload an Excel file");return}try{H(!0);const Se=await K.arrayBuffer(),we=Hm(Se,{type:"array"});let Ve=we.SheetNames.find(pe=>pe==="House Owners Template"||/house owners/i.test(pe));if(!Ve)for(const pe of we.SheetNames){const Ge=Y2.sheet_to_json(we.Sheets[pe],{header:1,range:0,defval:""}),ze=Ge&&Ge[0]?Ge[0].map(Pe=>(""+Pe).toString().trim().toLowerCase()):[];if(ze.includes("house id")||ze.includes("house_id")||ze.includes("house number")){Ve=pe;break}}Ve||(Ve=we.SheetNames[0]);const Le=we.Sheets[Ve],ot=Y2.sheet_to_json(Le,{header:1,defval:""});if(!ot||ot.length<2){ie.error("No data found in Excel file");return}const J=ot[0].map(pe=>(""+pe).trim()),Ne=pe=>(""+(pe||"")).toLowerCase().replace(/[^a-z0-9 ]/g," ").replace(/\s+/g," ").trim(),Ie=J.map(pe=>Ne(pe)),ke={},Qe=[];if(Ie.forEach((pe,Ge)=>{/house/.test(pe)&&/(id|number|no)/.test(pe)&&(ke.house_id=ke.house_id??Ge),/house\s*pk|house_pk|house\s*primary|house\s*id\s*pk/.test(pe)&&(ke.house_pk=ke.house_pk??Ge),/apartment/.test(pe)&&/(id|name)/.test(pe)&&(/id/.test(pe)?ke.apartment_id=ke.apartment_id??Ge:ke.apartment_name=ke.apartment_name??Ge),/floor/.test(pe)&&(ke.floor_id=ke.floor_id??Ge),/owner/.test(pe)&&/name/.test(pe)&&(ke.owner_name=ke.owner_name??Ge),pe==="name"&&Qe.push(Ge),/email/.test(pe)&&(ke.email=ke.email??Ge),(/nic/.test(pe)||/id ?no/.test(pe))&&(ke.nic=ke.nic??Ge),/mobile|phone|contact/.test(pe)&&(ke.mobile=ke.mobile??Ge),/occupation/.test(pe)&&(ke.occupation=ke.occupation??Ge),/country/.test(pe)&&(ke.country=ke.country??Ge),/occupied/.test(pe)&&(ke.occupied=ke.occupied??Ge)}),!ke.owner_name&&Qe.length>0)if(ke.apartment_name){const pe=Qe.find(Ge=>Ge!==ke.apartment_name);ke.owner_name=pe??Qe[Qe.length-1]}else ke.owner_name=Qe[Qe.length-1];if(!ke.house_id){const pe=Ie.find((Ge,ze)=>/(house|house number|house no|house_no)/.test(Ge));pe&&(ke.house_id=Ie.indexOf(pe))}const _e=ot.slice(1).map((pe,Ge)=>({_row:Ge+2,house_pk:ke.house_pk!==void 0?pe[ke.house_pk]:void 0,house_id:ke.house_id!==void 0?pe[ke.house_id]:void 0,apartment_id:ke.apartment_id!==void 0?pe[ke.apartment_id]:void 0,floor_id:ke.floor_id!==void 0?pe[ke.floor_id]:void 0,name:ke.owner_name!==void 0?pe[ke.owner_name]:void 0,nic:ke.nic!==void 0?pe[ke.nic]:void 0,occupation:ke.occupation!==void 0?pe[ke.occupation]:void 0,country:ke.country!==void 0?pe[ke.country]:void 0,mobile:ke.mobile!==void 0?pe[ke.mobile]:void 0,email:ke.email!==void 0?pe[ke.email]:void 0,occupied_raw:ke.occupied!==void 0?pe[ke.occupied]:void 0})).filter(pe=>Object.values(pe).some(Ge=>Ge!==void 0&&Ge!==""));if(_e.length===0){ie.error("No data rows found in template");return}const ut=_e.map(pe=>{const Ge=pe._row,ze=pe.house_pk||pe.house_id,Pe=pe.name,Oe=pe.email;if(!ze||!Pe||!Oe)throw new Error(`Row ${Ge}: House ID, Owner Name, and Email are required`);if(typeof Oe=="string"&&!Oe.includes("@"))throw new Error(`Row ${Ge}: Invalid email format`);const nt=(pe.occupied_raw||"own").toString().trim();if(!["own","for rent","For rent","Own"].map(kt=>kt.toLowerCase()).includes(nt.toLowerCase()))throw new Error(`Row ${Ge}: Occupied Type must be "own" or "For rent"`);return{house_id:ze,apartment_id:pe.apartment_id,floor_id:pe.floor_id,name:Pe,nic:pe.nic||"",occupation:pe.occupation||"",country:pe.country||"",mobile:pe.mobile||"",email:Oe,occupied_way:nt.toLowerCase()==="for rent"?"For rent":"own"}});L({fileName:K.name,totalRows:ut.length,data:ut}),U(K),ie.success(`Successfully parsed ${ut.length} records`)}catch(Se){console.error("Error parsing Excel file:",Se),ie.error(Se.message||"Failed to parse Excel file")}finally{H(!1),ne.target.value=""}}},re=async()=>{if(!z||z.data.length===0){ie.error("No data to import");return}try{if(H(!0),!P){ie.error("Original file not found. Please upload the Excel file again.");return}const ne=new FormData;ne.append("excelFile",P,P.name);const K=await Ae.post("/house-owners/bulk/bulk-import",ne,{headers:{"Content-Type":"multipart/form-data"}});K.data.success?(ie.success(`Import completed: ${K.data.data?.success||0} successful, ${K.data.data?.failed||0} failed`),K.data.data?.errors&&K.data.data.errors.length>0&&(console.error("Import errors:",K.data.data.errors),ie.error(`Some rows failed:
${K.data.data.errors.map(Se=>`Row ${Se.row}: ${Se.error}`).join(`
`)}`))):ie.error(K.data.message||"Import failed"),L(null),Z()}catch(ne){console.error("Import error:",ne),ie.error(ne.response?.data?.message||"Failed to import data")}finally{H(!1)}},Q=()=>{const ne=Object.values(b).filter(Boolean).length,K=Object.values(w).filter(Boolean).length,Se=Object.values(E).filter(Boolean).length;return{apartmentCount:ne,floorCount:K,houseCount:Se}},{apartmentCount:X,houseCount:se}=Q();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(pE,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bulk Import House Owners"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Select apartments, floors, and houses to create Excel template"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Select Houses"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:()=>Ce(X!==r.length),className:"px-4 py-2 text-sm bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-lg font-medium hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors",children:X===r.length?"Deselect All":"Select All"})})]}),M&&r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ii,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No apartments found"})]}):e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:r.map(ne=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-900 rounded-t-lg",children:[e.jsx("input",{type:"checkbox",checked:!!b[ne.id],onChange:K=>G(ne.id,K.target.checked),className:"h-5 w-5 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>ue(ne.id),className:"ml-3 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ii,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-3"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ne.name})]}),T[ne.id]?e.jsx(ai,{className:"h-5 w-5 text-gray-500"}):e.jsx(P0,{className:"h-5 w-5 text-gray-500"})]})]}),T[ne.id]&&e.jsx("div",{className:"p-4 pt-0",children:l[ne.id]?l[ne.id].length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm py-4 text-center",children:"No floors found"}):l[ne.id].map(K=>e.jsxs("div",{className:"ml-6 mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:!!w[K.id],onChange:Se=>q(ne.id,K.id,Se.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>de(ne.id,K.id),className:"ml-2 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pf,{className:"h-4 w-4 text-gray-500 dark:text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Floor ",K.floor_id]})]}),I[`${ne.id}_${K.id}`]?e.jsx(ai,{className:"h-4 w-4 text-gray-500"}):e.jsx(P0,{className:"h-4 w-4 text-gray-500"})]})]}),I[`${ne.id}_${K.id}`]&&e.jsx("div",{className:"ml-8 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:f[K.id]?f[K.id].length===0?e.jsx("p",{className:"col-span-full text-gray-500 dark:text-gray-400 text-sm py-2",children:"No houses found"}):f[K.id].map(Se=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!!E[Se.id],onChange:we=>xe(ne.id,K.id,Se.id,we.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("label",{className:"ml-2 flex items-center",children:[e.jsx(qr,{className:"h-3 w-3 text-gray-500 dark:text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:Se.house_id||Se.house_number})]})]},Se.id)):e.jsx("div",{className:"col-span-full text-center py-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 mx-auto"})})})]},K.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"})})})]},ne.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Download Excel Template"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Download a pre-filled Excel template with the selected houses."}),e.jsx("button",{onClick:le,disabled:M||se===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Preparing Template..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(po,{className:"h-5 w-5"}),e.jsxs("span",{children:["Download Template (",se," houses)"]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upload & Import"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Upload the filled Excel sheet to import house owners in bulk. Verification emails will be sent automatically."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Excel File"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:oe,disabled:B,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900 dark:file:text-purple-300"})]}),z&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(mn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-300",children:"Ready to Import"})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:[z.fileName," - ",z.totalRows," records loaded"]}),e.jsxs("div",{className:"mt-3 text-xs text-green-600 dark:text-green-400 space-y-1",children:[e.jsx("p",{children:" File parsed successfully"}),e.jsx("p",{children:" Data validated"}),e.jsx("p",{children:" Ready for bulk import"})]})]}),e.jsx("button",{onClick:re,disabled:B||!z,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Importing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Ps,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Bulk Import"})]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"Instructions"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"1."}),e.jsx("span",{children:"Select apartments, floors, and houses using checkboxes"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"2."}),e.jsx("span",{children:'Click "Download Template" to get Excel file'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"3."}),e.jsx("span",{children:"Fill owner details in Excel (don't add/delete rows)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"4."}),e.jsx("span",{children:"Upload the filled Excel file"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"5."}),e.jsx("span",{children:'Click "Start Bulk Import"'})]})]})]})]})]})]})})]}),e.jsx(or,{position:"top-center",autoClose:3e3})]})}function kI(){const[t,a]=C.useState(!1),[r,i]=C.useState(null),[l,d]=C.useState(!0),[f,h]=C.useState(""),[b,p]=C.useState(!1);C.useEffect(()=>{w()},[]);const w=async()=>{try{d(!0),h("");const T=await Ae.get("/auth/me");if(T.data.success&&T.data.data.length>0){const I=T.data.data[0].company_id;if(I)try{const O=await Ae.get(`/tenants/${I}`);O.data.success&&i(O.data.data)}catch{await j()}else await j()}else await j()}catch(T){console.error("Error fetching company details:",T),h("Failed to load company information"),ie.error("Failed to load company details")}finally{d(!1)}},j=async()=>{try{const T=await Ae.get("/tenants");if(T.data.success&&T.data.data.length>0){const A=T.data.data[0];i(A)}else i(null)}catch(T){throw console.error("Error fetching all companies:",T),T}},E=async()=>{try{if(!r)return;const T=await Ae.delete(`/tenants/${r.id}`);T.data.success?(ie.success("Company deleted successfully"),i(null),p(!1)):ie.error(T.data.message||"Failed to delete company")}catch(T){console.error("Error deleting company:",T),ie.error(T.response?.data?.message||"Failed to delete company")}},_=T=>{if(!T)return"Not available";try{return new Date(T).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};return l?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading company details..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(hr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Mr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(xa,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:r?"Company Details":"Setup Your Company"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:r?"View and manage company information":"Register your company to get started"})]})]}),r?null:e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No company registered."})})]}),f&&e.jsx("div",{className:"mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:f}),e.jsx("button",{onClick:w,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6",children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center mr-4",children:e.jsx(xa,{size:32,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:r.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Registration: ",r.regNo]}),e.jsx("span",{className:"mx-2 text-gray-400",children:""}),e.jsx("span",{className:`flex items-center text-sm ${r.is_active?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:r.is_active?e.jsxs(e.Fragment,{children:[e.jsx(_s,{size:14,className:"mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(z0,{size:14,className:"mr-1"}),"Inactive"]})})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[e.jsx(wr,{className:"mr-2 text-purple-600 dark:text-purple-400",size:20}),"Registration Details"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Registration Number"}),e.jsx("div",{className:"text-lg font-semibold text-gray-800 dark:text-white bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg",children:r.regNo})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white flex items-center",children:[e.jsx(El,{className:"mr-2 text-purple-600 dark:text-purple-400",size:20}),"Location Details"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Company Address"}),e.jsx("div",{className:"text-gray-800 dark:text-white bg-gray-50 dark:bg-gray-700/50 p-3 rounded-lg min-h-[100px]",children:r.address})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(Fi,{className:"mr-2 text-purple-600 dark:text-purple-400",size:20}),"Timeline"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Created On"}),e.jsx("div",{className:"text-gray-800 dark:text-white font-medium",children:_(r.createdAt||r.created_at)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Last Updated"}),e.jsx("div",{className:"text-gray-800 dark:text-white font-medium",children:_(r.updatedAt||r.updated_at)})]})]})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-red-200 dark:border-red-800",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-600 dark:text-red-400 mb-4 flex items-center",children:[e.jsx(na,{className:"mr-2",size:20}),"Danger Zone"]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mb-4",children:"Deleting your company will permanently remove all associated data including users, apartments, and settings. This action cannot be undone."}),e.jsxs("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Er,{size:18}),e.jsx("span",{children:"Delete Company"})]})]})]})]}):e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"No Company Found"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"No company is registered. Please contact your administrator to create a company."})]})})}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"System Status"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-lg mr-3",children:e.jsx(fo,{className:"text-green-600 dark:text-green-400",size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"Database"}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Connected"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/30 rounded-lg mr-3",children:e.jsx(eg,{className:"text-blue-600 dark:text-blue-400",size:18})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 dark:text-white",children:"API Service"}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Online"})]})]})})]})]})})]})]})})]}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(na,{size:24,className:"text-red-600 dark:text-red-400 mr-3"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Confirm Deletion"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-2",children:["Are you sure you want to delete ",e.jsx("span",{className:"font-semibold",children:r?.name}),"?"]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-lg border border-red-200 dark:border-red-800",children:[e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:" This action will permanently delete:"}),e.jsxs("ul",{className:"text-sm text-red-600 dark:text-red-400 mt-2 space-y-1",children:[e.jsx("li",{children:" All company data and settings"}),e.jsx("li",{children:" All user accounts"}),e.jsx("li",{children:" All apartments and houses"}),e.jsx("li",{children:" All complaints and records"})]}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300 mt-3 font-semibold",children:"This action cannot be undone!"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:E,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Delete Company"})]})]})})})]})}function jI(){return e.jsx(R3,{children:e.jsx(y6,{children:e.jsxs(o3,{children:[e.jsx(Xt,{path:"/",element:e.jsx(U3,{})}),e.jsx(Xt,{path:"/login",element:e.jsx(s8,{})}),e.jsx(Xt,{path:"/register",element:e.jsx(n8,{})}),e.jsx(Xt,{path:"/verify",element:e.jsx(i8,{})}),e.jsx(Xt,{path:"/sidebar",element:e.jsx(hr,{})}),e.jsx(Xt,{path:"/navbar",element:e.jsx(Mr,{})}),e.jsx(Xt,{path:"/admindashboard",element:e.jsx(l8,{})}),e.jsx(Xt,{path:"/apartmentview",element:e.jsx(u8,{})}),e.jsx(Xt,{path:"/userview",element:e.jsx(v8,{})}),e.jsx(Xt,{path:"/floors/:id",element:e.jsx(j8,{})}),e.jsx(Xt,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(c_,{})}),e.jsx(Xt,{path:"/housetype/:apartment_id",element:e.jsx(Zv,{})}),e.jsx(Xt,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(T8,{})}),e.jsx(Xt,{path:"/bills/:apartment_id",element:e.jsx(ew,{})}),e.jsx(Xt,{path:"/reset-password",element:e.jsx(u_,{})}),e.jsx(Xt,{path:"/forgot-password",element:e.jsx(d_,{})}),e.jsx(Xt,{path:"/complete-registration",element:e.jsx(f_,{})}),e.jsx(Xt,{path:"/manage-bills",element:e.jsx(x_,{})}),e.jsx(Xt,{path:"/bills-and-calculations",element:e.jsx(y_,{})}),e.jsx(Xt,{path:"/billranges/:bill_id",element:e.jsx(w_,{})}),e.jsx(Xt,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(j_,{})}),e.jsx(Xt,{path:"/employee-dashboard",element:e.jsx(C_,{})}),e.jsx(Xt,{path:"/role",element:e.jsx(Kv,{})}),e.jsx(Xt,{path:"/profile-page",element:e.jsx(E_,{})}),e.jsx(Xt,{path:"/my-apartments",element:e.jsx(__,{})}),e.jsx(Xt,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(S_,{})}),e.jsx(Xt,{path:"/bill-payments",element:e.jsx(T_,{})}),e.jsx(Xt,{path:"/measurable-bills",element:e.jsx(dw,{})}),e.jsx(Xt,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(aA,{})}),e.jsx(Xt,{path:"/my-bills",element:e.jsx(sA,{})}),e.jsx(Xt,{path:"/house-bill-meter/:bill_id",element:e.jsx(nA,{})}),e.jsx(Xt,{path:"/bill-payment-settle",element:e.jsx(iA,{})}),e.jsx(Xt,{path:"/houseowner/login",element:e.jsx(lA,{})}),e.jsx(Xt,{path:"/houseowner/verify",element:e.jsx(cA,{})}),e.jsx(Xt,{path:"/houseowner/dashboard",element:e.jsx(oA,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-houseview",element:e.jsx(dA,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-billview",element:e.jsx(uA,{})}),e.jsx(Xt,{path:"/houseowner/complaints",element:e.jsx(fA,{})}),e.jsx(Xt,{path:"/houseowner/houseowner-profile",element:e.jsx(mA,{})}),e.jsx(Xt,{path:"/view-complaints",element:e.jsx(xA,{})}),e.jsx(Xt,{path:"/my-complaints",element:e.jsx(hA,{})}),e.jsx(Xt,{path:"/my-work/:complaintId",element:e.jsx(pA,{})}),e.jsx(Xt,{path:"/start-work",element:e.jsx(uw,{})}),e.jsx(Xt,{path:"/complaint-categories",element:e.jsx(vA,{})}),e.jsx(Xt,{path:"/bulk-import-houseowner",element:e.jsx(NI,{})}),e.jsx(Xt,{path:"/company-setup",element:e.jsx(kI,{})})]})})})}function CI(){const[t,a]=C.useState(null);return e.jsx(zr.Provider,{value:{auth:t,setAuth:a},children:e.jsx(jI,{})})}yk.createRoot(document.getElementById("root")).render(e.jsx(CI,{}));export{tw as _,Nu as c,of as g};
