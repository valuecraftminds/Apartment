function lk(t,a){for(var r=0;r<a.length;r++){const i=a[r];if(typeof i!="string"&&!Array.isArray(i)){for(const l in i)if(l!=="default"&&!(l in t)){const d=Object.getOwnPropertyDescriptor(i,l);d&&Object.defineProperty(t,l,d.get?d:{enumerable:!0,get:()=>i[l]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function r(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(l){if(l.ep)return;l.ep=!0;const d=r(l);fetch(l.href,d)}})();var wu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function of(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vh={exports:{}},y0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vy;function ok(){if(vy)return y0;vy=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function r(i,l,d){var f=null;if(d!==void 0&&(f=""+d),l.key!==void 0&&(f=""+l.key),"key"in l){d={};for(var h in l)h!=="key"&&(d[h]=l[h])}else d=l;return l=d.ref,{$$typeof:t,type:i,key:f,ref:l!==void 0?l:null,props:d}}return y0.Fragment=a,y0.jsx=r,y0.jsxs=r,y0}var wy;function ck(){return wy||(wy=1,vh.exports=ok()),vh.exports}var e=ck(),wh={exports:{}},sr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ny;function dk(){if(Ny)return sr;Ny=1;var t=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),j=Symbol.iterator;function C(fe){return fe===null||typeof fe!="object"?null:(fe=j&&fe[j]||fe["@@iterator"],typeof fe=="function"?fe:null)}var _={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,A={};function O(fe,re,Q){this.props=fe,this.context=re,this.refs=A,this.updater=Q||_}O.prototype.isReactComponent={},O.prototype.setState=function(fe,re){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,re,"setState")},O.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function I(){}I.prototype=O.prototype;function M(fe,re,Q){this.props=fe,this.context=re,this.refs=A,this.updater=Q||_}var T=M.prototype=new I;T.constructor=M,R(T,O.prototype),T.isPureReactComponent=!0;var B=Array.isArray,H={H:null,A:null,T:null,S:null,V:null},U=Object.prototype.hasOwnProperty;function L(fe,re,Q,Y,ae,se){return Q=se.ref,{$$typeof:t,type:fe,key:re,ref:Q!==void 0?Q:null,props:se}}function P(fe,re){return L(fe.type,re,void 0,void 0,void 0,fe.props)}function z(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===t}function K(fe){var re={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(Q){return re[Q]})}var te=/\/+/g;function V(fe,re){return typeof fe=="object"&&fe!==null&&fe.key!=null?K(""+fe.key):re.toString(36)}function ne(){}function ie(fe){switch(fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason;default:switch(typeof fe.status=="string"?fe.then(ne,ne):(fe.status="pending",fe.then(function(re){fe.status==="pending"&&(fe.status="fulfilled",fe.value=re)},function(re){fe.status==="pending"&&(fe.status="rejected",fe.reason=re)})),fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason}}throw fe}function X(fe,re,Q,Y,ae){var se=typeof fe;(se==="undefined"||se==="boolean")&&(fe=null);var Z=!1;if(fe===null)Z=!0;else switch(se){case"bigint":case"string":case"number":Z=!0;break;case"object":switch(fe.$$typeof){case t:case a:Z=!0;break;case w:return Z=fe._init,X(Z(fe._payload),re,Q,Y,ae)}}if(Z)return ae=ae(fe),Z=Y===""?"."+V(fe,0):Y,B(ae)?(Q="",Z!=null&&(Q=Z.replace(te,"$&/")+"/"),X(ae,re,Q,"",function(Ue){return Ue})):ae!=null&&(z(ae)&&(ae=P(ae,Q+(ae.key==null||fe&&fe.key===ae.key?"":(""+ae.key).replace(te,"$&/")+"/")+Z)),re.push(ae)),1;Z=0;var Re=Y===""?".":Y+":";if(B(fe))for(var je=0;je<fe.length;je++)Y=fe[je],se=Re+V(Y,je),Z+=X(Y,re,Q,se,ae);else if(je=C(fe),typeof je=="function")for(fe=je.call(fe),je=0;!(Y=fe.next()).done;)Y=Y.value,se=Re+V(Y,je++),Z+=X(Y,re,Q,se,ae);else if(se==="object"){if(typeof fe.then=="function")return X(ie(fe),re,Q,Y,ae);throw re=String(fe),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return Z}function q(fe,re,Q){if(fe==null)return fe;var Y=[],ae=0;return X(fe,Y,"","",function(se){return re.call(Q,se,ae++)}),Y}function ce(fe){if(fe._status===-1){var re=fe._result;re=re(),re.then(function(Q){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=Q)},function(Q){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=Q)}),fe._status===-1&&(fe._status=0,fe._result=re)}if(fe._status===1)return fe._result.default;throw fe._result}var we=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)};function oe(){}return sr.Children={map:q,forEach:function(fe,re,Q){q(fe,function(){re.apply(this,arguments)},Q)},count:function(fe){var re=0;return q(fe,function(){re++}),re},toArray:function(fe){return q(fe,function(re){return re})||[]},only:function(fe){if(!z(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}},sr.Component=O,sr.Fragment=r,sr.Profiler=l,sr.PureComponent=M,sr.StrictMode=i,sr.Suspense=b,sr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=H,sr.__COMPILER_RUNTIME={__proto__:null,c:function(fe){return H.H.useMemoCache(fe)}},sr.cache=function(fe){return function(){return fe.apply(null,arguments)}},sr.cloneElement=function(fe,re,Q){if(fe==null)throw Error("The argument must be a React element, but you passed "+fe+".");var Y=R({},fe.props),ae=fe.key,se=void 0;if(re!=null)for(Z in re.ref!==void 0&&(se=void 0),re.key!==void 0&&(ae=""+re.key),re)!U.call(re,Z)||Z==="key"||Z==="__self"||Z==="__source"||Z==="ref"&&re.ref===void 0||(Y[Z]=re[Z]);var Z=arguments.length-2;if(Z===1)Y.children=Q;else if(1<Z){for(var Re=Array(Z),je=0;je<Z;je++)Re[je]=arguments[je+2];Y.children=Re}return L(fe.type,ae,void 0,void 0,se,Y)},sr.createContext=function(fe){return fe={$$typeof:f,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null},fe.Provider=fe,fe.Consumer={$$typeof:d,_context:fe},fe},sr.createElement=function(fe,re,Q){var Y,ae={},se=null;if(re!=null)for(Y in re.key!==void 0&&(se=""+re.key),re)U.call(re,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(ae[Y]=re[Y]);var Z=arguments.length-2;if(Z===1)ae.children=Q;else if(1<Z){for(var Re=Array(Z),je=0;je<Z;je++)Re[je]=arguments[je+2];ae.children=Re}if(fe&&fe.defaultProps)for(Y in Z=fe.defaultProps,Z)ae[Y]===void 0&&(ae[Y]=Z[Y]);return L(fe,se,void 0,void 0,null,ae)},sr.createRef=function(){return{current:null}},sr.forwardRef=function(fe){return{$$typeof:h,render:fe}},sr.isValidElement=z,sr.lazy=function(fe){return{$$typeof:w,_payload:{_status:-1,_result:fe},_init:ce}},sr.memo=function(fe,re){return{$$typeof:p,type:fe,compare:re===void 0?null:re}},sr.startTransition=function(fe){var re=H.T,Q={};H.T=Q;try{var Y=fe(),ae=H.S;ae!==null&&ae(Q,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(oe,we)}catch(se){we(se)}finally{H.T=re}},sr.unstable_useCacheRefresh=function(){return H.H.useCacheRefresh()},sr.use=function(fe){return H.H.use(fe)},sr.useActionState=function(fe,re,Q){return H.H.useActionState(fe,re,Q)},sr.useCallback=function(fe,re){return H.H.useCallback(fe,re)},sr.useContext=function(fe){return H.H.useContext(fe)},sr.useDebugValue=function(){},sr.useDeferredValue=function(fe,re){return H.H.useDeferredValue(fe,re)},sr.useEffect=function(fe,re,Q){var Y=H.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Y.useEffect(fe,re)},sr.useId=function(){return H.H.useId()},sr.useImperativeHandle=function(fe,re,Q){return H.H.useImperativeHandle(fe,re,Q)},sr.useInsertionEffect=function(fe,re){return H.H.useInsertionEffect(fe,re)},sr.useLayoutEffect=function(fe,re){return H.H.useLayoutEffect(fe,re)},sr.useMemo=function(fe,re){return H.H.useMemo(fe,re)},sr.useOptimistic=function(fe,re){return H.H.useOptimistic(fe,re)},sr.useReducer=function(fe,re,Q){return H.H.useReducer(fe,re,Q)},sr.useRef=function(fe){return H.H.useRef(fe)},sr.useState=function(fe){return H.H.useState(fe)},sr.useSyncExternalStore=function(fe,re,Q){return H.H.useSyncExternalStore(fe,re,Q)},sr.useTransition=function(){return H.H.useTransition()},sr.version="19.1.1",sr}var ky;function Hm(){return ky||(ky=1,wh.exports=dk()),wh.exports}var E=Hm();const Tr=of(E);var Nh={exports:{}},b0={},kh={exports:{}},jh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jy;function uk(){return jy||(jy=1,function(t){function a(q,ce){var we=q.length;q.push(ce);e:for(;0<we;){var oe=we-1>>>1,fe=q[oe];if(0<l(fe,ce))q[oe]=ce,q[we]=fe,we=oe;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var ce=q[0],we=q.pop();if(we!==ce){q[0]=we;e:for(var oe=0,fe=q.length,re=fe>>>1;oe<re;){var Q=2*(oe+1)-1,Y=q[Q],ae=Q+1,se=q[ae];if(0>l(Y,we))ae<fe&&0>l(se,Y)?(q[oe]=se,q[ae]=we,oe=ae):(q[oe]=Y,q[Q]=we,oe=Q);else if(ae<fe&&0>l(se,we))q[oe]=se,q[ae]=we,oe=ae;else break e}}return ce}function l(q,ce){var we=q.sortIndex-ce.sortIndex;return we!==0?we:q.id-ce.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var f=Date,h=f.now();t.unstable_now=function(){return f.now()-h}}var b=[],p=[],w=1,j=null,C=3,_=!1,R=!1,A=!1,O=!1,I=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function B(q){for(var ce=r(p);ce!==null;){if(ce.callback===null)i(p);else if(ce.startTime<=q)i(p),ce.sortIndex=ce.expirationTime,a(b,ce);else break;ce=r(p)}}function H(q){if(A=!1,B(q),!R)if(r(b)!==null)R=!0,U||(U=!0,V());else{var ce=r(p);ce!==null&&X(H,ce.startTime-q)}}var U=!1,L=-1,P=5,z=-1;function K(){return O?!0:!(t.unstable_now()-z<P)}function te(){if(O=!1,U){var q=t.unstable_now();z=q;var ce=!0;try{e:{R=!1,A&&(A=!1,M(L),L=-1),_=!0;var we=C;try{t:{for(B(q),j=r(b);j!==null&&!(j.expirationTime>q&&K());){var oe=j.callback;if(typeof oe=="function"){j.callback=null,C=j.priorityLevel;var fe=oe(j.expirationTime<=q);if(q=t.unstable_now(),typeof fe=="function"){j.callback=fe,B(q),ce=!0;break t}j===r(b)&&i(b),B(q)}else i(b);j=r(b)}if(j!==null)ce=!0;else{var re=r(p);re!==null&&X(H,re.startTime-q),ce=!1}}break e}finally{j=null,C=we,_=!1}ce=void 0}}finally{ce?V():U=!1}}}var V;if(typeof T=="function")V=function(){T(te)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ie=ne.port2;ne.port1.onmessage=te,V=function(){ie.postMessage(null)}}else V=function(){I(te,0)};function X(q,ce){L=I(function(){q(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return C},t.unstable_next=function(q){switch(C){case 1:case 2:case 3:var ce=3;break;default:ce=C}var we=C;C=ce;try{return q()}finally{C=we}},t.unstable_requestPaint=function(){O=!0},t.unstable_runWithPriority=function(q,ce){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var we=C;C=q;try{return ce()}finally{C=we}},t.unstable_scheduleCallback=function(q,ce,we){var oe=t.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?oe+we:oe):we=oe,q){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=we+fe,q={id:w++,callback:ce,priorityLevel:q,startTime:we,expirationTime:fe,sortIndex:-1},we>oe?(q.sortIndex=we,a(p,q),r(b)===null&&q===r(p)&&(A?(M(L),L=-1):A=!0,X(H,we-oe))):(q.sortIndex=fe,a(b,q),R||_||(R=!0,U||(U=!0,V()))),q},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(q){var ce=C;return function(){var we=C;C=ce;try{return q.apply(this,arguments)}finally{C=we}}}}(jh)),jh}var Ey;function fk(){return Ey||(Ey=1,kh.exports=uk()),kh.exports}var Eh={exports:{}},as={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cy;function xk(){if(Cy)return as;Cy=1;var t=Hm();function a(b){var p="https://react.dev/errors/"+b;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var w=2;w<arguments.length;w++)p+="&args[]="+encodeURIComponent(arguments[w])}return"Minified React error #"+b+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(a(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},l=Symbol.for("react.portal");function d(b,p,w){var j=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:j==null?null:""+j,children:b,containerInfo:p,implementation:w}}var f=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(b,p){if(b==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return as.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,as.createPortal=function(b,p){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return d(b,p,null,w)},as.flushSync=function(b){var p=f.T,w=i.p;try{if(f.T=null,i.p=2,b)return b()}finally{f.T=p,i.p=w,i.d.f()}},as.preconnect=function(b,p){typeof b=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(b,p))},as.prefetchDNS=function(b){typeof b=="string"&&i.d.D(b)},as.preinit=function(b,p){if(typeof b=="string"&&p&&typeof p.as=="string"){var w=p.as,j=h(w,p.crossOrigin),C=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;w==="style"?i.d.S(b,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:j,integrity:C,fetchPriority:_}):w==="script"&&i.d.X(b,{crossOrigin:j,integrity:C,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},as.preinitModule=function(b,p){if(typeof b=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var w=h(p.as,p.crossOrigin);i.d.M(b,{crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(b)},as.preload=function(b,p){if(typeof b=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var w=p.as,j=h(w,p.crossOrigin);i.d.L(b,w,{crossOrigin:j,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},as.preloadModule=function(b,p){if(typeof b=="string")if(p){var w=h(p.as,p.crossOrigin);i.d.m(b,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:w,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(b)},as.requestFormReset=function(b){i.d.r(b)},as.unstable_batchedUpdates=function(b,p){return b(p)},as.useFormState=function(b,p,w){return f.H.useFormState(b,p,w)},as.useFormStatus=function(){return f.H.useHostTransitionStatus()},as.version="19.1.1",as}var _y;function hk(){if(_y)return Eh.exports;_y=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Eh.exports=xk(),Eh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ay;function mk(){if(Ay)return b0;Ay=1;var t=fk(),a=Hm(),r=hk();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)o+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var o=s,x=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(x=o.return),s=o.return;while(s)}return o.tag===3?x:null}function f(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(d(s)!==s)throw Error(i(188))}function b(s){var o=s.alternate;if(!o){if(o=d(s),o===null)throw Error(i(188));return o!==s?null:s}for(var x=s,y=o;;){var k=x.return;if(k===null)break;var D=k.alternate;if(D===null){if(y=k.return,y!==null){x=y;continue}break}if(k.child===D.child){for(D=k.child;D;){if(D===x)return h(k),s;if(D===y)return h(k),o;D=D.sibling}throw Error(i(188))}if(x.return!==y.return)x=k,y=D;else{for(var W=!1,xe=k.child;xe;){if(xe===x){W=!0,x=k,y=D;break}if(xe===y){W=!0,y=k,x=D;break}xe=xe.sibling}if(!W){for(xe=D.child;xe;){if(xe===x){W=!0,x=D,y=k;break}if(xe===y){W=!0,y=D,x=k;break}xe=xe.sibling}if(!W)throw Error(i(189))}}if(x.alternate!==y)throw Error(i(190))}if(x.tag!==3)throw Error(i(188));return x.stateNode.current===x?s:o}function p(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=p(s),o!==null)return o;s=s.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),_=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),M=Symbol.for("react.consumer"),T=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),te=Symbol.iterator;function V(s){return s===null||typeof s!="object"?null:(s=te&&s[te]||s["@@iterator"],typeof s=="function"?s:null)}var ne=Symbol.for("react.client.reference");function ie(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ne?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case R:return"Fragment";case O:return"Profiler";case A:return"StrictMode";case H:return"Suspense";case U:return"SuspenseList";case z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case _:return"Portal";case T:return(s.displayName||"Context")+".Provider";case M:return(s._context.displayName||"Context")+".Consumer";case B:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case L:return o=s.displayName||null,o!==null?o:ie(s.type)||"Memo";case P:o=s._payload,s=s._init;try{return ie(s(o))}catch{}}return null}var X=Array.isArray,q=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},oe=[],fe=-1;function re(s){return{current:s}}function Q(s){0>fe||(s.current=oe[fe],oe[fe]=null,fe--)}function Y(s,o){fe++,oe[fe]=s.current,s.current=o}var ae=re(null),se=re(null),Z=re(null),Re=re(null);function je(s,o){switch(Y(Z,o),Y(se,s),Y(ae,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?Yp(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=Yp(o),s=Wp(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}Q(ae),Y(ae,s)}function Ue(){Q(ae),Q(se),Q(Z)}function Me(s){s.memoizedState!==null&&Y(Re,s);var o=ae.current,x=Wp(o,s.type);o!==x&&(Y(se,s),Y(ae,x))}function at(s){se.current===s&&(Q(ae),Q(se)),Re.current===s&&(Q(Re),x0._currentValue=we)}var ye=Object.prototype.hasOwnProperty,Ae=t.unstable_scheduleCallback,Fe=t.unstable_cancelCallback,Ce=t.unstable_shouldYield,Je=t.unstable_requestPaint,be=t.unstable_now,dt=t.unstable_getCurrentPriorityLevel,me=t.unstable_ImmediatePriority,Pe=t.unstable_UserBlockingPriority,pe=t.unstable_NormalPriority,lt=t.unstable_LowPriority,st=t.unstable_IdlePriority,jt=t.log,At=t.unstable_setDisableYieldValue,Dt=null,or=null;function Lt(s){if(typeof jt=="function"&&At(s),or&&typeof or.setStrictMode=="function")try{or.setStrictMode(Dt,s)}catch{}}var qt=Math.clz32?Math.clz32:Et,Ft=Math.log,Ye=Math.LN2;function Et(s){return s>>>=0,s===0?32:31-(Ft(s)/Ye|0)|0}var Nt=256,ot=4194304;function St(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function wt(s,o,x){var y=s.pendingLanes;if(y===0)return 0;var k=0,D=s.suspendedLanes,W=s.pingedLanes;s=s.warmLanes;var xe=y&134217727;return xe!==0?(y=xe&~D,y!==0?k=St(y):(W&=xe,W!==0?k=St(W):x||(x=xe&~s,x!==0&&(k=St(x))))):(xe=y&~D,xe!==0?k=St(xe):W!==0?k=St(W):x||(x=y&~s,x!==0&&(k=St(x)))),k===0?0:o!==0&&o!==k&&(o&D)===0&&(D=k&-k,x=o&-o,D>=x||D===32&&(x&4194048)!==0)?o:k}function nt(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function kt(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Is(){var s=Nt;return Nt<<=1,(Nt&4194048)===0&&(Nt=256),s}function On(){var s=ot;return ot<<=1,(ot&62914560)===0&&(ot=4194304),s}function Tt(s){for(var o=[],x=0;31>x;x++)o.push(s);return o}function Qr(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Ks(s,o,x,y,k,D){var W=s.pendingLanes;s.pendingLanes=x,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=x,s.entangledLanes&=x,s.errorRecoveryDisabledLanes&=x,s.shellSuspendCounter=0;var xe=s.entanglements,Te=s.expirationTimes,Xe=s.hiddenUpdates;for(x=W&~x;0<x;){var it=31-qt(x),ft=1<<it;xe[it]=0,Te[it]=-1;var $e=Xe[it];if($e!==null)for(Xe[it]=null,it=0;it<$e.length;it++){var Ze=$e[it];Ze!==null&&(Ze.lane&=-536870913)}x&=~ft}y!==0&&Al(s,y,0),D!==0&&k===0&&s.tag!==0&&(s.suspendedLanes|=D&~(W&~o))}function Al(s,o,x){s.pendingLanes|=o,s.suspendedLanes&=~o;var y=31-qt(o);s.entangledLanes|=o,s.entanglements[y]=s.entanglements[y]|1073741824|x&4194090}function Wa(s,o){var x=s.entangledLanes|=o;for(s=s.entanglements;x;){var y=31-qt(x),k=1<<y;k&o|s[y]&o&&(s[y]|=o),x&=~k}}function ii(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function Jr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function hn(){var s=ce.p;return s!==0?s:(s=window.event,s===void 0?32:hy(s.type))}function Bi(s,o){var x=ce.p;try{return ce.p=s,o()}finally{ce.p=x}}var la=Math.random().toString(36).slice(2),ha="__reactFiber$"+la,Lr="__reactProps$"+la,Zs="__reactContainer$"+la,ma="__reactEvents$"+la,mn="__reactListeners$"+la,de="__reactHandles$"+la,he="__reactResources$"+la,ge="__reactMarker$"+la;function Ne(s){delete s[ha],delete s[Lr],delete s[ma],delete s[mn],delete s[de]}function ke(s){var o=s[ha];if(o)return o;for(var x=s.parentNode;x;){if(o=x[Zs]||x[ha]){if(x=o.alternate,o.child!==null||x!==null&&x.child!==null)for(s=Jp(s);s!==null;){if(x=s[ha])return x;s=Jp(s)}return o}s=x,x=s.parentNode}return null}function _e(s){if(s=s[ha]||s[Zs]){var o=s.tag;if(o===5||o===6||o===13||o===26||o===27||o===3)return s}return null}function Ge(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function rt(s){var o=s[he];return o||(o=s[he]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Be(s){s[ge]=!0}var qe=new Set,We={};function ut(s,o){ht(s,o),ht(s+"Capture",o)}function ht(s,o){for(We[s]=o,s=0;s<o.length;s++)qe.add(o[s])}var gt=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yt={},vt={};function Ut(s){return ye.call(vt,s)?!0:ye.call(yt,s)?!1:gt.test(s)?vt[s]=!0:(yt[s]=!0,!1)}function tt(s,o,x){if(Ut(o))if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var y=o.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+x)}}function kr(s,o,x){if(x===null)s.removeAttribute(o);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+x)}}function Ht(s,o,x,y){if(y===null)s.removeAttribute(x);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(x);return}s.setAttributeNS(o,x,""+y)}}var Ka,In;function Qt(s){if(Ka===void 0)try{throw Error()}catch(x){var o=x.stack.trim().match(/\n( *(at )?)/);Ka=o&&o[1]||"",In=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ka+s+In}var Jt=!1;function er(s,o){if(!s||Jt)return"";Jt=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(o){var ft=function(){throw Error()};if(Object.defineProperty(ft.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ft,[])}catch(Ze){var $e=Ze}Reflect.construct(s,[],ft)}else{try{ft.call()}catch(Ze){$e=Ze}s.call(ft.prototype)}}else{try{throw Error()}catch(Ze){$e=Ze}(ft=s())&&typeof ft.catch=="function"&&ft.catch(function(){})}}catch(Ze){if(Ze&&$e&&typeof Ze.stack=="string")return[Ze.stack,$e.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var k=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");k&&k.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var D=y.DetermineComponentFrameRoot(),W=D[0],xe=D[1];if(W&&xe){var Te=W.split(`
`),Xe=xe.split(`
`);for(k=y=0;y<Te.length&&!Te[y].includes("DetermineComponentFrameRoot");)y++;for(;k<Xe.length&&!Xe[k].includes("DetermineComponentFrameRoot");)k++;if(y===Te.length||k===Xe.length)for(y=Te.length-1,k=Xe.length-1;1<=y&&0<=k&&Te[y]!==Xe[k];)k--;for(;1<=y&&0<=k;y--,k--)if(Te[y]!==Xe[k]){if(y!==1||k!==1)do if(y--,k--,0>k||Te[y]!==Xe[k]){var it=`
`+Te[y].replace(" at new "," at ");return s.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",s.displayName)),it}while(1<=y&&0<=k);break}}}finally{Jt=!1,Error.prepareStackTrace=x}return(x=s?s.displayName||s.name:"")?Qt(x):""}function xs(s){switch(s.tag){case 26:case 27:case 5:return Qt(s.type);case 16:return Qt("Lazy");case 13:return Qt("Suspense");case 19:return Qt("SuspenseList");case 0:case 15:return er(s.type,!1);case 11:return er(s.type.render,!1);case 1:return er(s.type,!0);case 31:return Qt("Activity");default:return""}}function ko(s){try{var o="";do o+=xs(s),s=s.return;while(s);return o}catch(x){return`
Error generating stack: `+x.message+`
`+x.stack}}function Za(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ea(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Fn(s){var o=ea(s)?"checked":"value",x=Object.getOwnPropertyDescriptor(s.constructor.prototype,o),y=""+s[o];if(!s.hasOwnProperty(o)&&typeof x<"u"&&typeof x.get=="function"&&typeof x.set=="function"){var k=x.get,D=x.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return k.call(this)},set:function(W){y=""+W,D.call(this,W)}}),Object.defineProperty(s,o,{enumerable:x.enumerable}),{getValue:function(){return y},setValue:function(W){y=""+W},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function jo(s){s._valueTracker||(s._valueTracker=Fn(s))}function Xr(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var x=o.getValue(),y="";return s&&(y=ea(s)?s.checked?"true":"false":s.value),s=y,s!==x?(o.setValue(s),!0):!1}function Fs(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Cf=/[\n"\\]/g;function Ea(s){return s.replace(Cf,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function jr(s,o,x,y,k,D,W,xe){s.name="",W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"?s.type=W:s.removeAttribute("type"),o!=null?W==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Za(o)):s.value!==""+Za(o)&&(s.value=""+Za(o)):W!=="submit"&&W!=="reset"||s.removeAttribute("value"),o!=null?He(s,W,Za(o)):x!=null?He(s,W,Za(x)):y!=null&&s.removeAttribute("value"),k==null&&D!=null&&(s.defaultChecked=!!D),k!=null&&(s.checked=k&&typeof k!="function"&&typeof k!="symbol"),xe!=null&&typeof xe!="function"&&typeof xe!="symbol"&&typeof xe!="boolean"?s.name=""+Za(xe):s.removeAttribute("name")}function Ca(s,o,x,y,k,D,W,xe){if(D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.type=D),o!=null||x!=null){if(!(D!=="submit"&&D!=="reset"||o!=null))return;x=x!=null?""+Za(x):"",o=o!=null?""+Za(o):x,xe||o===s.value||(s.value=o),s.defaultValue=o}y=y??k,y=typeof y!="function"&&typeof y!="symbol"&&!!y,s.checked=xe?s.checked:!!y,s.defaultChecked=!!y,W!=null&&typeof W!="function"&&typeof W!="symbol"&&typeof W!="boolean"&&(s.name=W)}function He(s,o,x){o==="number"&&Fs(s.ownerDocument)===s||s.defaultValue===""+x||(s.defaultValue=""+x)}function ve(s,o,x,y){if(s=s.options,o){o={};for(var k=0;k<x.length;k++)o["$"+x[k]]=!0;for(x=0;x<s.length;x++)k=o.hasOwnProperty("$"+s[x].value),s[x].selected!==k&&(s[x].selected=k),k&&y&&(s[x].defaultSelected=!0)}else{for(x=""+Za(x),o=null,k=0;k<s.length;k++){if(s[k].value===x){s[k].selected=!0,y&&(s[k].defaultSelected=!0);return}o!==null||s[k].disabled||(o=s[k])}o!==null&&(o.selected=!0)}}function Rt(s,o,x){if(o!=null&&(o=""+Za(o),o!==s.value&&(s.value=o),x==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=x!=null?""+Za(x):""}function oa(s,o,x,y){if(o==null){if(y!=null){if(x!=null)throw Error(i(92));if(X(y)){if(1<y.length)throw Error(i(93));y=y[0]}x=y}x==null&&(x=""),o=x}x=Za(o),s.defaultValue=x,y=s.textContent,y===x&&y!==""&&y!==null&&(s.value=y)}function _a(s,o){if(o){var x=s.firstChild;if(x&&x===s.lastChild&&x.nodeType===3){x.nodeValue=o;return}}s.textContent=o}var _f=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Eo(s,o,x){var y=o.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?y?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":y?s.setProperty(o,x):typeof x!="number"||x===0||_f.has(o)?o==="float"?s.cssFloat=x:s[o]=(""+x).trim():s[o]=x+"px"}function hs(s,o,x){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,x!=null){for(var y in x)!x.hasOwnProperty(y)||o!=null&&o.hasOwnProperty(y)||(y.indexOf("--")===0?s.setProperty(y,""):y==="float"?s.cssFloat="":s[y]="");for(var k in o)y=o[k],o.hasOwnProperty(k)&&x[k]!==y&&Eo(s,k,y)}else for(var D in o)o.hasOwnProperty(D)&&Eo(s,D,o[D])}function Ot(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vr=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),md=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Co(s){return md.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var Sl=null;function Li(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Mn=null,Pi=null;function ca(s){var o=_e(s);if(o&&(s=o.stateNode)){var x=s[Lr]||null;e:switch(s=o.stateNode,o.type){case"input":if(jr(s,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),o=x.name,x.type==="radio"&&o!=null){for(x=s;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Ea(""+o)+'"][type="radio"]'),o=0;o<x.length;o++){var y=x[o];if(y!==s&&y.form===s.form){var k=y[Lr]||null;if(!k)throw Error(i(90));jr(y,k.value,k.defaultValue,k.defaultValue,k.checked,k.defaultChecked,k.type,k.name)}}for(o=0;o<x.length;o++)y=x[o],y.form===s.form&&Xr(y)}break e;case"textarea":Rt(s,x.value,x.defaultValue);break e;case"select":o=x.value,o!=null&&ve(s,!!x.multiple,o,!1)}}}var li=!1;function gn(s,o,x){if(li)return s(o,x);li=!0;try{var y=s(o);return y}finally{if(li=!1,(Mn!==null||Pi!==null)&&(eu(),Mn&&(o=Mn,s=Pi,Pi=Mn=null,ca(o),s)))for(o=0;o<s.length;o++)ca(s[o])}}function Mt(s,o){var x=s.stateNode;if(x===null)return null;var y=x[Lr]||null;if(y===null)return null;x=y[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(s=s.type,y=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!y;break e;default:s=!1}if(s)return null;if(x&&typeof x!="function")throw Error(i(231,o,typeof x));return x}var pn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wt=!1;if(pn)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){Wt=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Wt=!1}var Bn=null,Tl=null,Rl=null;function Ln(){if(Rl)return Rl;var s,o=Tl,x=o.length,y,k="value"in Bn?Bn.value:Bn.textContent,D=k.length;for(s=0;s<x&&o[s]===k[s];s++);var W=x-s;for(y=1;y<=W&&o[x-y]===k[D-y];y++);return Rl=k.slice(s,1<y?1-y:void 0)}function _o(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function Pn(){return!0}function zi(){return!1}function ga(s){function o(x,y,k,D,W){this._reactName=x,this._targetInst=k,this.type=y,this.nativeEvent=D,this.target=W,this.currentTarget=null;for(var xe in s)s.hasOwnProperty(xe)&&(x=s[xe],this[xe]=x?x(D):D[xe]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Pn:zi,this.isPropagationStopped=zi,this}return w(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=Pn)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=Pn)},persist:function(){},isPersistent:Pn}),o}var zn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Un=ga(zn),yn=w({},zn,{view:0,detail:0}),Qa=ga(yn),Ao,So,Ui,To=w({},yn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ol,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Ui&&(Ui&&s.type==="mousemove"?(Ao=s.screenX-Ui.screenX,So=s.screenY-Ui.screenY):So=Ao=0,Ui=s),Ao)},movementY:function(s){return"movementY"in s?s.movementY:So}}),gd=ga(To),Af=w({},To,{dataTransfer:0}),Er=ga(Af),pd=w({},yn,{relatedTarget:0}),Hi=ga(pd),Hn=w({},zn,{animationName:0,elapsedTime:0,pseudoElement:0}),Sf=ga(Hn),Qe=w({},zn,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),ar=ga(Qe),Aa=w({},zn,{data:0}),Dl=ga(Aa),yd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rf={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Df(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Rf[s])?!!o[s]:!1}function Ol(){return Df}var da=w({},yn,{key:function(s){if(s.key){var o=yd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=_o(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Tf[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ol,charCode:function(s){return s.type==="keypress"?_o(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?_o(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Sc=ga(da),qr=w({},To,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Il=ga(qr),oi=w({},yn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ol}),Cr=ga(oi),Bt=w({},zn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Of=ga(Bt),Mr=w({},To,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),ci=ga(Mr),Vi=w({},zn,{newState:0,oldState:0}),If=ga(Vi),Qs=[9,13,27,32],Fl=pn&&"CompositionEvent"in window,Gi=null;pn&&"documentMode"in document&&(Gi=document.documentMode);var Tc=pn&&"TextEvent"in window&&!Gi,Rc=pn&&(!Fl||Gi&&8<Gi&&11>=Gi),Dc=" ",bd=!1;function di(s,o){switch(s){case"keyup":return Qs.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ro(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Xi=!1;function Ml(s,o){switch(s){case"compositionend":return Ro(o);case"keypress":return o.which!==32?null:(bd=!0,Dc);case"textInput":return s=o.data,s===Dc&&bd?null:s;default:return null}}function Ff(s,o){if(Xi)return s==="compositionend"||!Fl&&di(s,o)?(s=Ln(),Rl=Tl=Bn=null,Xi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Rc&&o.locale!=="ko"?null:o.data;default:return null}}var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bl(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!Vn[s.type]:o==="textarea"}function ms(s,o,x,y){Mn?Pi?Pi.push(y):Pi=[y]:Mn=y,o=iu(o,"onChange"),0<o.length&&(x=new Un("onChange","change",null,x,y),s.push({event:x,listeners:o}))}var qi=null,Ja=null;function Mf(s){Vp(s,0)}function $i(s){var o=Ge(s);if(Xr(o))return s}function vd(s,o){if(s==="change")return o}var Oc=!1;if(pn){var js;if(pn){var Ic="oninput"in document;if(!Ic){var Do=document.createElement("div");Do.setAttribute("oninput","return;"),Ic=typeof Do.oninput=="function"}js=Ic}else js=!1;Oc=js&&(!document.documentMode||9<document.documentMode)}function Yi(){qi&&(qi.detachEvent("onpropertychange",ur),Ja=qi=null)}function ur(s){if(s.propertyName==="value"&&$i(Ja)){var o=[];ms(o,Ja,s,Li(s)),gn(Mf,o)}}function Oo(s,o,x){s==="focusin"?(Yi(),qi=o,Ja=x,qi.attachEvent("onpropertychange",ur)):s==="focusout"&&Yi()}function J(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return $i(Ja)}function n(s,o){if(s==="click")return $i(o)}function c(s,o){if(s==="input"||s==="change")return $i(o)}function u(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var m=typeof Object.is=="function"?Object.is:u;function g(s,o){if(m(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var x=Object.keys(s),y=Object.keys(o);if(x.length!==y.length)return!1;for(y=0;y<x.length;y++){var k=x[y];if(!ye.call(o,k)||!m(s[k],o[k]))return!1}return!0}function v(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function N(s,o){var x=v(s);s=0;for(var y;x;){if(x.nodeType===3){if(y=s+x.textContent.length,s<=o&&y>=o)return{node:x,offset:o-s};s=y}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=v(x)}}function S(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?S(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function F(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Fs(s.document);o instanceof s.HTMLIFrameElement;){try{var x=typeof o.contentWindow.location.href=="string"}catch{x=!1}if(x)s=o.contentWindow;else break;o=Fs(s.document)}return o}function G(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var ee=pn&&"documentMode"in document&&11>=document.documentMode,ue=null,Ee=null,De=null,Oe=!1;function ze(s,o,x){var y=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;Oe||ue==null||ue!==Fs(y)||(y=ue,"selectionStart"in y&&G(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),De&&g(De,y)||(De=y,y=iu(Ee,"onSelect"),0<y.length&&(o=new Un("onSelect","select",null,o,x),s.push({event:o,listeners:y}),o.target=ue)))}function Ke(s,o){var x={};return x[s.toLowerCase()]=o.toLowerCase(),x["Webkit"+s]="webkit"+o,x["Moz"+s]="moz"+o,x}var mt={animationend:Ke("Animation","AnimationEnd"),animationiteration:Ke("Animation","AnimationIteration"),animationstart:Ke("Animation","AnimationStart"),transitionrun:Ke("Transition","TransitionRun"),transitionstart:Ke("Transition","TransitionStart"),transitioncancel:Ke("Transition","TransitionCancel"),transitionend:Ke("Transition","TransitionEnd")},pt={},xt={};pn&&(xt=document.createElement("div").style,"AnimationEvent"in window||(delete mt.animationend.animation,delete mt.animationiteration.animation,delete mt.animationstart.animation),"TransitionEvent"in window||delete mt.transitionend.transition);function Kt(s){if(pt[s])return pt[s];if(!mt[s])return s;var o=mt[s],x;for(x in o)if(o.hasOwnProperty(x)&&x in xt)return pt[s]=o[x];return s}var Yt=Kt("animationend"),Ha=Kt("animationiteration"),Es=Kt("animationstart"),es=Kt("transitionrun"),_r=Kt("transitionstart"),Sa=Kt("transitioncancel"),ts=Kt("transitionend"),ui=new Map,Gn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gn.push("scrollEnd");function Ms(s,o){ui.set(s,o),ut(o,[s])}var wd=new WeakMap;function Js(s,o){if(typeof s=="object"&&s!==null){var x=wd.get(s);return x!==void 0?x:(o={value:s,source:o,stack:ko(o)},wd.set(s,o),o)}return{value:s,source:o,stack:ko(o)}}var en=[],Io=0,Bf=0;function Nd(){for(var s=Io,o=Bf=Io=0;o<s;){var x=en[o];en[o++]=null;var y=en[o];en[o++]=null;var k=en[o];en[o++]=null;var D=en[o];if(en[o++]=null,y!==null&&k!==null){var W=y.pending;W===null?k.next=k:(k.next=W.next,W.next=k),y.pending=k}D!==0&&_g(x,k,D)}}function kd(s,o,x,y){en[Io++]=s,en[Io++]=o,en[Io++]=x,en[Io++]=y,Bf|=y,s.lanes|=y,s=s.alternate,s!==null&&(s.lanes|=y)}function Lf(s,o,x,y){return kd(s,o,x,y),jd(s)}function Fo(s,o){return kd(s,null,null,o),jd(s)}function _g(s,o,x){s.lanes|=x;var y=s.alternate;y!==null&&(y.lanes|=x);for(var k=!1,D=s.return;D!==null;)D.childLanes|=x,y=D.alternate,y!==null&&(y.childLanes|=x),D.tag===22&&(s=D.stateNode,s===null||s._visibility&1||(k=!0)),s=D,D=D.return;return s.tag===3?(D=s.stateNode,k&&o!==null&&(k=31-qt(x),s=D.hiddenUpdates,y=s[k],y===null?s[k]=[o]:y.push(o),o.lane=x|536870912),D):null}function jd(s){if(50<n0)throw n0=0,Gx=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Mo={};function q4(s,o,x,y){this.tag=s,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(s,o,x,y){return new q4(s,o,x,y)}function Pf(s){return s=s.prototype,!(!s||!s.isReactComponent)}function fi(s,o){var x=s.alternate;return x===null?(x=Bs(s.tag,o,s.key,s.mode),x.elementType=s.elementType,x.type=s.type,x.stateNode=s.stateNode,x.alternate=s,s.alternate=x):(x.pendingProps=o,x.type=s.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=s.flags&65011712,x.childLanes=s.childLanes,x.lanes=s.lanes,x.child=s.child,x.memoizedProps=s.memoizedProps,x.memoizedState=s.memoizedState,x.updateQueue=s.updateQueue,o=s.dependencies,x.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},x.sibling=s.sibling,x.index=s.index,x.ref=s.ref,x.refCleanup=s.refCleanup,x}function Ag(s,o){s.flags&=65011714;var x=s.alternate;return x===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=x.childLanes,s.lanes=x.lanes,s.child=x.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=x.memoizedProps,s.memoizedState=x.memoizedState,s.updateQueue=x.updateQueue,s.type=x.type,o=x.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Ed(s,o,x,y,k,D){var W=0;if(y=s,typeof s=="function")Pf(s)&&(W=1);else if(typeof s=="string")W=YN(s,x,ae.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case z:return s=Bs(31,x,o,k),s.elementType=z,s.lanes=D,s;case R:return Ll(x.children,k,D,o);case A:W=8,k|=24;break;case O:return s=Bs(12,x,o,k|2),s.elementType=O,s.lanes=D,s;case H:return s=Bs(13,x,o,k),s.elementType=H,s.lanes=D,s;case U:return s=Bs(19,x,o,k),s.elementType=U,s.lanes=D,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case I:case T:W=10;break e;case M:W=9;break e;case B:W=11;break e;case L:W=14;break e;case P:W=16,y=null;break e}W=29,x=Error(i(130,s===null?"null":typeof s,"")),y=null}return o=Bs(W,x,o,k),o.elementType=s,o.type=y,o.lanes=D,o}function Ll(s,o,x,y){return s=Bs(7,s,y,o),s.lanes=x,s}function zf(s,o,x){return s=Bs(6,s,null,o),s.lanes=x,s}function Uf(s,o,x){return o=Bs(4,s.children!==null?s.children:[],s.key,o),o.lanes=x,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var Bo=[],Lo=0,Cd=null,_d=0,tn=[],rn=0,Pl=null,xi=1,hi="";function zl(s,o){Bo[Lo++]=_d,Bo[Lo++]=Cd,Cd=s,_d=o}function Sg(s,o,x){tn[rn++]=xi,tn[rn++]=hi,tn[rn++]=Pl,Pl=s;var y=xi;s=hi;var k=32-qt(y)-1;y&=~(1<<k),x+=1;var D=32-qt(o)+k;if(30<D){var W=k-k%5;D=(y&(1<<W)-1).toString(32),y>>=W,k-=W,xi=1<<32-qt(o)+k|x<<k|y,hi=D+s}else xi=1<<D|x<<k|y,hi=s}function Hf(s){s.return!==null&&(zl(s,1),Sg(s,1,0))}function Vf(s){for(;s===Cd;)Cd=Bo[--Lo],Bo[Lo]=null,_d=Bo[--Lo],Bo[Lo]=null;for(;s===Pl;)Pl=tn[--rn],tn[rn]=null,hi=tn[--rn],tn[rn]=null,xi=tn[--rn],tn[rn]=null}var gs=null,ta=null,Nr=!1,Ul=null,Xn=!1,Gf=Error(i(519));function Hl(s){var o=Error(i(418,""));throw Bc(Js(o,s)),Gf}function Tg(s){var o=s.stateNode,x=s.type,y=s.memoizedProps;switch(o[ha]=s,o[Lr]=y,x){case"dialog":dr("cancel",o),dr("close",o);break;case"iframe":case"object":case"embed":dr("load",o);break;case"video":case"audio":for(x=0;x<l0.length;x++)dr(l0[x],o);break;case"source":dr("error",o);break;case"img":case"image":case"link":dr("error",o),dr("load",o);break;case"details":dr("toggle",o);break;case"input":dr("invalid",o),Ca(o,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),jo(o);break;case"select":dr("invalid",o);break;case"textarea":dr("invalid",o),oa(o,y.value,y.defaultValue,y.children),jo(o)}x=y.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||o.textContent===""+x||y.suppressHydrationWarning===!0||$p(o.textContent,x)?(y.popover!=null&&(dr("beforetoggle",o),dr("toggle",o)),y.onScroll!=null&&dr("scroll",o),y.onScrollEnd!=null&&dr("scrollend",o),y.onClick!=null&&(o.onclick=lu),o=!0):o=!1,o||Hl(s)}function Rg(s){for(gs=s.return;gs;)switch(gs.tag){case 5:case 13:Xn=!1;return;case 27:case 3:Xn=!0;return;default:gs=gs.return}}function Fc(s){if(s!==gs)return!1;if(!Nr)return Rg(s),Nr=!0,!1;var o=s.tag,x;if((x=o!==3&&o!==27)&&((x=o===5)&&(x=s.type,x=!(x!=="form"&&x!=="button")||ih(s.type,s.memoizedProps)),x=!x),x&&ta&&Hl(s),Rg(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,o=0;s;){if(s.nodeType===8)if(x=s.data,x==="/$"){if(o===0){ta=vn(s.nextSibling);break e}o--}else x!=="$"&&x!=="$!"&&x!=="$?"||o++;s=s.nextSibling}ta=null}}else o===27?(o=ta,dl(s.type)?(s=dh,dh=null,ta=s):ta=o):ta=gs?vn(s.stateNode.nextSibling):null;return!0}function Mc(){ta=gs=null,Nr=!1}function Dg(){var s=Ul;return s!==null&&(As===null?As=s:As.push.apply(As,s),Ul=null),s}function Bc(s){Ul===null?Ul=[s]:Ul.push(s)}var Xf=re(null),Vl=null,mi=null;function Wi(s,o,x){Y(Xf,o._currentValue),o._currentValue=x}function gi(s){s._currentValue=Xf.current,Q(Xf)}function qf(s,o,x){for(;s!==null;){var y=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,y!==null&&(y.childLanes|=o)):y!==null&&(y.childLanes&o)!==o&&(y.childLanes|=o),s===x)break;s=s.return}}function $f(s,o,x,y){var k=s.child;for(k!==null&&(k.return=s);k!==null;){var D=k.dependencies;if(D!==null){var W=k.child;D=D.firstContext;e:for(;D!==null;){var xe=D;D=k;for(var Te=0;Te<o.length;Te++)if(xe.context===o[Te]){D.lanes|=x,xe=D.alternate,xe!==null&&(xe.lanes|=x),qf(D.return,x,s),y||(W=null);break e}D=xe.next}}else if(k.tag===18){if(W=k.return,W===null)throw Error(i(341));W.lanes|=x,D=W.alternate,D!==null&&(D.lanes|=x),qf(W,x,s),W=null}else W=k.child;if(W!==null)W.return=k;else for(W=k;W!==null;){if(W===s){W=null;break}if(k=W.sibling,k!==null){k.return=W.return,W=k;break}W=W.return}k=W}}function Lc(s,o,x,y){s=null;for(var k=o,D=!1;k!==null;){if(!D){if((k.flags&524288)!==0)D=!0;else if((k.flags&262144)!==0)break}if(k.tag===10){var W=k.alternate;if(W===null)throw Error(i(387));if(W=W.memoizedProps,W!==null){var xe=k.type;m(k.pendingProps.value,W.value)||(s!==null?s.push(xe):s=[xe])}}else if(k===Re.current){if(W=k.alternate,W===null)throw Error(i(387));W.memoizedState.memoizedState!==k.memoizedState.memoizedState&&(s!==null?s.push(x0):s=[x0])}k=k.return}s!==null&&$f(o,s,x,y),o.flags|=262144}function Ad(s){for(s=s.firstContext;s!==null;){if(!m(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Gl(s){Vl=s,mi=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function rs(s){return Og(Vl,s)}function Sd(s,o){return Vl===null&&Gl(s),Og(s,o)}function Og(s,o){var x=o._currentValue;if(o={context:o,memoizedValue:x,next:null},mi===null){if(s===null)throw Error(i(308));mi=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else mi=mi.next=o;return x}var $4=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(x,y){s.push(y)}};this.abort=function(){o.aborted=!0,s.forEach(function(x){return x()})}},Y4=t.unstable_scheduleCallback,W4=t.unstable_NormalPriority,Ta={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yf(){return{controller:new $4,data:new Map,refCount:0}}function Pc(s){s.refCount--,s.refCount===0&&Y4(W4,function(){s.controller.abort()})}var zc=null,Wf=0,Po=0,zo=null;function K4(s,o){if(zc===null){var x=zc=[];Wf=0,Po=Zx(),zo={status:"pending",value:void 0,then:function(y){x.push(y)}}}return Wf++,o.then(Ig,Ig),o}function Ig(){if(--Wf===0&&zc!==null){zo!==null&&(zo.status="fulfilled");var s=zc;zc=null,Po=0,zo=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function Z4(s,o){var x=[],y={status:"pending",value:null,reason:null,then:function(k){x.push(k)}};return s.then(function(){y.status="fulfilled",y.value=o;for(var k=0;k<x.length;k++)(0,x[k])(o)},function(k){for(y.status="rejected",y.reason=k,k=0;k<x.length;k++)(0,x[k])(void 0)}),y}var Fg=q.S;q.S=function(s,o){typeof o=="object"&&o!==null&&typeof o.then=="function"&&K4(s,o),Fg!==null&&Fg(s,o)};var Xl=re(null);function Kf(){var s=Xl.current;return s!==null?s:Pr.pooledCache}function Td(s,o){o===null?Y(Xl,Xl.current):Y(Xl,o.pool)}function Mg(){var s=Kf();return s===null?null:{parent:Ta._currentValue,pool:s}}var Uc=Error(i(460)),Bg=Error(i(474)),Rd=Error(i(542)),Zf={then:function(){}};function Lg(s){return s=s.status,s==="fulfilled"||s==="rejected"}function Dd(){}function Pg(s,o,x){switch(x=s[x],x===void 0?s.push(o):x!==o&&(o.then(Dd,Dd),o=x),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Ug(s),s;default:if(typeof o.status=="string")o.then(Dd,Dd);else{if(s=Pr,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(y){if(o.status==="pending"){var k=o;k.status="fulfilled",k.value=y}},function(y){if(o.status==="pending"){var k=o;k.status="rejected",k.reason=y}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,Ug(s),s}throw Hc=o,Uc}}var Hc=null;function zg(){if(Hc===null)throw Error(i(459));var s=Hc;return Hc=null,s}function Ug(s){if(s===Uc||s===Rd)throw Error(i(483))}var Ki=!1;function Qf(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Jf(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Zi(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Qi(s,o,x){var y=s.updateQueue;if(y===null)return null;if(y=y.shared,(Ar&2)!==0){var k=y.pending;return k===null?o.next=o:(o.next=k.next,k.next=o),y.pending=o,o=jd(s),_g(s,null,x),o}return kd(s,y,o,x),jd(s)}function Vc(s,o,x){if(o=o.updateQueue,o!==null&&(o=o.shared,(x&4194048)!==0)){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,Wa(s,x)}}function ex(s,o){var x=s.updateQueue,y=s.alternate;if(y!==null&&(y=y.updateQueue,x===y)){var k=null,D=null;if(x=x.firstBaseUpdate,x!==null){do{var W={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};D===null?k=D=W:D=D.next=W,x=x.next}while(x!==null);D===null?k=D=o:D=D.next=o}else k=D=o;x={baseState:y.baseState,firstBaseUpdate:k,lastBaseUpdate:D,shared:y.shared,callbacks:y.callbacks},s.updateQueue=x;return}s=x.lastBaseUpdate,s===null?x.firstBaseUpdate=o:s.next=o,x.lastBaseUpdate=o}var tx=!1;function Gc(){if(tx){var s=zo;if(s!==null)throw s}}function Xc(s,o,x,y){tx=!1;var k=s.updateQueue;Ki=!1;var D=k.firstBaseUpdate,W=k.lastBaseUpdate,xe=k.shared.pending;if(xe!==null){k.shared.pending=null;var Te=xe,Xe=Te.next;Te.next=null,W===null?D=Xe:W.next=Xe,W=Te;var it=s.alternate;it!==null&&(it=it.updateQueue,xe=it.lastBaseUpdate,xe!==W&&(xe===null?it.firstBaseUpdate=Xe:xe.next=Xe,it.lastBaseUpdate=Te))}if(D!==null){var ft=k.baseState;W=0,it=Xe=Te=null,xe=D;do{var $e=xe.lane&-536870913,Ze=$e!==xe.lane;if(Ze?(hr&$e)===$e:(y&$e)===$e){$e!==0&&$e===Po&&(tx=!0),it!==null&&(it=it.next={lane:0,tag:xe.tag,payload:xe.payload,callback:null,next:null});e:{var Vt=s,Pt=xe;$e=o;var Or=x;switch(Pt.tag){case 1:if(Vt=Pt.payload,typeof Vt=="function"){ft=Vt.call(Or,ft,$e);break e}ft=Vt;break e;case 3:Vt.flags=Vt.flags&-65537|128;case 0:if(Vt=Pt.payload,$e=typeof Vt=="function"?Vt.call(Or,ft,$e):Vt,$e==null)break e;ft=w({},ft,$e);break e;case 2:Ki=!0}}$e=xe.callback,$e!==null&&(s.flags|=64,Ze&&(s.flags|=8192),Ze=k.callbacks,Ze===null?k.callbacks=[$e]:Ze.push($e))}else Ze={lane:$e,tag:xe.tag,payload:xe.payload,callback:xe.callback,next:null},it===null?(Xe=it=Ze,Te=ft):it=it.next=Ze,W|=$e;if(xe=xe.next,xe===null){if(xe=k.shared.pending,xe===null)break;Ze=xe,xe=Ze.next,Ze.next=null,k.lastBaseUpdate=Ze,k.shared.pending=null}}while(!0);it===null&&(Te=ft),k.baseState=Te,k.firstBaseUpdate=Xe,k.lastBaseUpdate=it,D===null&&(k.shared.lanes=0),il|=W,s.lanes=W,s.memoizedState=ft}}function Hg(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function Vg(s,o){var x=s.callbacks;if(x!==null)for(s.callbacks=null,s=0;s<x.length;s++)Hg(x[s],o)}var Uo=re(null),Od=re(0);function Gg(s,o){s=ki,Y(Od,s),Y(Uo,o),ki=s|o.baseLanes}function rx(){Y(Od,ki),Y(Uo,Uo.current)}function ax(){ki=Od.current,Q(Uo),Q(Od)}var Ji=0,ir=null,Rr=null,pa=null,Id=!1,Ho=!1,ql=!1,Fd=0,qc=0,Vo=null,Q4=0;function ua(){throw Error(i(321))}function sx(s,o){if(o===null)return!1;for(var x=0;x<o.length&&x<s.length;x++)if(!m(s[x],o[x]))return!1;return!0}function nx(s,o,x,y,k,D){return Ji=D,ir=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,q.H=s===null||s.memoizedState===null?_1:A1,ql=!1,D=x(y,k),ql=!1,Ho&&(D=qg(o,x,y,k)),Xg(s),D}function Xg(s){q.H=Ud;var o=Rr!==null&&Rr.next!==null;if(Ji=0,pa=Rr=ir=null,Id=!1,qc=0,Vo=null,o)throw Error(i(300));s===null||Ma||(s=s.dependencies,s!==null&&Ad(s)&&(Ma=!0))}function qg(s,o,x,y){ir=s;var k=0;do{if(Ho&&(Vo=null),qc=0,Ho=!1,25<=k)throw Error(i(301));if(k+=1,pa=Rr=null,s.updateQueue!=null){var D=s.updateQueue;D.lastEffect=null,D.events=null,D.stores=null,D.memoCache!=null&&(D.memoCache.index=0)}q.H=nN,D=o(x,y)}while(Ho);return D}function J4(){var s=q.H,o=s.useState()[0];return o=typeof o.then=="function"?$c(o):o,s=s.useState()[0],(Rr!==null?Rr.memoizedState:null)!==s&&(ir.flags|=1024),o}function ix(){var s=Fd!==0;return Fd=0,s}function lx(s,o,x){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~x}function ox(s){if(Id){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Id=!1}Ji=0,pa=Rr=ir=null,Ho=!1,qc=Fd=0,Vo=null}function Cs(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pa===null?ir.memoizedState=pa=s:pa=pa.next=s,pa}function ya(){if(Rr===null){var s=ir.alternate;s=s!==null?s.memoizedState:null}else s=Rr.next;var o=pa===null?ir.memoizedState:pa.next;if(o!==null)pa=o,Rr=s;else{if(s===null)throw ir.alternate===null?Error(i(467)):Error(i(310));Rr=s,s={memoizedState:Rr.memoizedState,baseState:Rr.baseState,baseQueue:Rr.baseQueue,queue:Rr.queue,next:null},pa===null?ir.memoizedState=pa=s:pa=pa.next=s}return pa}function cx(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function $c(s){var o=qc;return qc+=1,Vo===null&&(Vo=[]),s=Pg(Vo,s,o),o=ir,(pa===null?o.memoizedState:pa.next)===null&&(o=o.alternate,q.H=o===null||o.memoizedState===null?_1:A1),s}function Md(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return $c(s);if(s.$$typeof===T)return rs(s)}throw Error(i(438,String(s)))}function dx(s){var o=null,x=ir.updateQueue;if(x!==null&&(o=x.memoCache),o==null){var y=ir.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(o={data:y.data.map(function(k){return k.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),x===null&&(x=cx(),ir.updateQueue=x),x.memoCache=o,x=o.data[o.index],x===void 0)for(x=o.data[o.index]=Array(s),y=0;y<s;y++)x[y]=K;return o.index++,x}function pi(s,o){return typeof o=="function"?o(s):o}function Bd(s){var o=ya();return ux(o,Rr,s)}function ux(s,o,x){var y=s.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=x;var k=s.baseQueue,D=y.pending;if(D!==null){if(k!==null){var W=k.next;k.next=D.next,D.next=W}o.baseQueue=k=D,y.pending=null}if(D=s.baseState,k===null)s.memoizedState=D;else{o=k.next;var xe=W=null,Te=null,Xe=o,it=!1;do{var ft=Xe.lane&-536870913;if(ft!==Xe.lane?(hr&ft)===ft:(Ji&ft)===ft){var $e=Xe.revertLane;if($e===0)Te!==null&&(Te=Te.next={lane:0,revertLane:0,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null}),ft===Po&&(it=!0);else if((Ji&$e)===$e){Xe=Xe.next,$e===Po&&(it=!0);continue}else ft={lane:0,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Te===null?(xe=Te=ft,W=D):Te=Te.next=ft,ir.lanes|=$e,il|=$e;ft=Xe.action,ql&&x(D,ft),D=Xe.hasEagerState?Xe.eagerState:x(D,ft)}else $e={lane:ft,revertLane:Xe.revertLane,action:Xe.action,hasEagerState:Xe.hasEagerState,eagerState:Xe.eagerState,next:null},Te===null?(xe=Te=$e,W=D):Te=Te.next=$e,ir.lanes|=ft,il|=ft;Xe=Xe.next}while(Xe!==null&&Xe!==o);if(Te===null?W=D:Te.next=xe,!m(D,s.memoizedState)&&(Ma=!0,it&&(x=zo,x!==null)))throw x;s.memoizedState=D,s.baseState=W,s.baseQueue=Te,y.lastRenderedState=D}return k===null&&(y.lanes=0),[s.memoizedState,y.dispatch]}function fx(s){var o=ya(),x=o.queue;if(x===null)throw Error(i(311));x.lastRenderedReducer=s;var y=x.dispatch,k=x.pending,D=o.memoizedState;if(k!==null){x.pending=null;var W=k=k.next;do D=s(D,W.action),W=W.next;while(W!==k);m(D,o.memoizedState)||(Ma=!0),o.memoizedState=D,o.baseQueue===null&&(o.baseState=D),x.lastRenderedState=D}return[D,y]}function $g(s,o,x){var y=ir,k=ya(),D=Nr;if(D){if(x===void 0)throw Error(i(407));x=x()}else x=o();var W=!m((Rr||k).memoizedState,x);W&&(k.memoizedState=x,Ma=!0),k=k.queue;var xe=Kg.bind(null,y,k,s);if(Yc(2048,8,xe,[s]),k.getSnapshot!==o||W||pa!==null&&pa.memoizedState.tag&1){if(y.flags|=2048,Go(9,Ld(),Wg.bind(null,y,k,x,o),null),Pr===null)throw Error(i(349));D||(Ji&124)!==0||Yg(y,o,x)}return x}function Yg(s,o,x){s.flags|=16384,s={getSnapshot:o,value:x},o=ir.updateQueue,o===null?(o=cx(),ir.updateQueue=o,o.stores=[s]):(x=o.stores,x===null?o.stores=[s]:x.push(s))}function Wg(s,o,x,y){o.value=x,o.getSnapshot=y,Zg(o)&&Qg(s)}function Kg(s,o,x){return x(function(){Zg(o)&&Qg(s)})}function Zg(s){var o=s.getSnapshot;s=s.value;try{var x=o();return!m(s,x)}catch{return!0}}function Qg(s){var o=Fo(s,2);o!==null&&Hs(o,s,2)}function xx(s){var o=Cs();if(typeof s=="function"){var x=s;if(s=x(),ql){Lt(!0);try{x()}finally{Lt(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:s},o}function Jg(s,o,x,y){return s.baseState=x,ux(s,Rr,typeof y=="function"?y:pi)}function eN(s,o,x,y,k){if(zd(s))throw Error(i(485));if(s=o.action,s!==null){var D={payload:k,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(W){D.listeners.push(W)}};q.T!==null?x(!0):D.isTransition=!1,y(D),x=o.pending,x===null?(D.next=o.pending=D,e1(o,D)):(D.next=x.next,o.pending=x.next=D)}}function e1(s,o){var x=o.action,y=o.payload,k=s.state;if(o.isTransition){var D=q.T,W={};q.T=W;try{var xe=x(k,y),Te=q.S;Te!==null&&Te(W,xe),t1(s,o,xe)}catch(Xe){hx(s,o,Xe)}finally{q.T=D}}else try{D=x(k,y),t1(s,o,D)}catch(Xe){hx(s,o,Xe)}}function t1(s,o,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(y){r1(s,o,y)},function(y){return hx(s,o,y)}):r1(s,o,x)}function r1(s,o,x){o.status="fulfilled",o.value=x,a1(o),s.state=x,o=s.pending,o!==null&&(x=o.next,x===o?s.pending=null:(x=x.next,o.next=x,e1(s,x)))}function hx(s,o,x){var y=s.pending;if(s.pending=null,y!==null){y=y.next;do o.status="rejected",o.reason=x,a1(o),o=o.next;while(o!==y)}s.action=null}function a1(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function s1(s,o){return o}function n1(s,o){if(Nr){var x=Pr.formState;if(x!==null){e:{var y=ir;if(Nr){if(ta){t:{for(var k=ta,D=Xn;k.nodeType!==8;){if(!D){k=null;break t}if(k=vn(k.nextSibling),k===null){k=null;break t}}D=k.data,k=D==="F!"||D==="F"?k:null}if(k){ta=vn(k.nextSibling),y=k.data==="F!";break e}}Hl(y)}y=!1}y&&(o=x[0])}}return x=Cs(),x.memoizedState=x.baseState=o,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s1,lastRenderedState:o},x.queue=y,x=j1.bind(null,ir,y),y.dispatch=x,y=xx(!1),D=bx.bind(null,ir,!1,y.queue),y=Cs(),k={state:o,dispatch:null,action:s,pending:null},y.queue=k,x=eN.bind(null,ir,k,D,x),k.dispatch=x,y.memoizedState=s,[o,x,!1]}function i1(s){var o=ya();return l1(o,Rr,s)}function l1(s,o,x){if(o=ux(s,o,s1)[0],s=Bd(pi)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var y=$c(o)}catch(W){throw W===Uc?Rd:W}else y=o;o=ya();var k=o.queue,D=k.dispatch;return x!==o.memoizedState&&(ir.flags|=2048,Go(9,Ld(),tN.bind(null,k,x),null)),[y,D,s]}function tN(s,o){s.action=o}function o1(s){var o=ya(),x=Rr;if(x!==null)return l1(o,x,s);ya(),o=o.memoizedState,x=ya();var y=x.queue.dispatch;return x.memoizedState=s,[o,y,!1]}function Go(s,o,x,y){return s={tag:s,create:x,deps:y,inst:o,next:null},o=ir.updateQueue,o===null&&(o=cx(),ir.updateQueue=o),x=o.lastEffect,x===null?o.lastEffect=s.next=s:(y=x.next,x.next=s,s.next=y,o.lastEffect=s),s}function Ld(){return{destroy:void 0,resource:void 0}}function c1(){return ya().memoizedState}function Pd(s,o,x,y){var k=Cs();y=y===void 0?null:y,ir.flags|=s,k.memoizedState=Go(1|o,Ld(),x,y)}function Yc(s,o,x,y){var k=ya();y=y===void 0?null:y;var D=k.memoizedState.inst;Rr!==null&&y!==null&&sx(y,Rr.memoizedState.deps)?k.memoizedState=Go(o,D,x,y):(ir.flags|=s,k.memoizedState=Go(1|o,D,x,y))}function d1(s,o){Pd(8390656,8,s,o)}function u1(s,o){Yc(2048,8,s,o)}function f1(s,o){return Yc(4,2,s,o)}function x1(s,o){return Yc(4,4,s,o)}function h1(s,o){if(typeof o=="function"){s=s();var x=o(s);return function(){typeof x=="function"?x():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function m1(s,o,x){x=x!=null?x.concat([s]):null,Yc(4,4,h1.bind(null,o,s),x)}function mx(){}function g1(s,o){var x=ya();o=o===void 0?null:o;var y=x.memoizedState;return o!==null&&sx(o,y[1])?y[0]:(x.memoizedState=[s,o],s)}function p1(s,o){var x=ya();o=o===void 0?null:o;var y=x.memoizedState;if(o!==null&&sx(o,y[1]))return y[0];if(y=s(),ql){Lt(!0);try{s()}finally{Lt(!1)}}return x.memoizedState=[y,o],y}function gx(s,o,x){return x===void 0||(Ji&1073741824)!==0?s.memoizedState=o:(s.memoizedState=x,s=vp(),ir.lanes|=s,il|=s,x)}function y1(s,o,x,y){return m(x,o)?x:Uo.current!==null?(s=gx(s,x,y),m(s,o)||(Ma=!0),s):(Ji&42)===0?(Ma=!0,s.memoizedState=x):(s=vp(),ir.lanes|=s,il|=s,o)}function b1(s,o,x,y,k){var D=ce.p;ce.p=D!==0&&8>D?D:8;var W=q.T,xe={};q.T=xe,bx(s,!1,o,x);try{var Te=k(),Xe=q.S;if(Xe!==null&&Xe(xe,Te),Te!==null&&typeof Te=="object"&&typeof Te.then=="function"){var it=Z4(Te,y);Wc(s,o,it,Us(s))}else Wc(s,o,y,Us(s))}catch(ft){Wc(s,o,{then:function(){},status:"rejected",reason:ft},Us())}finally{ce.p=D,q.T=W}}function rN(){}function px(s,o,x,y){if(s.tag!==5)throw Error(i(476));var k=v1(s).queue;b1(s,k,o,we,x===null?rN:function(){return w1(s),x(y)})}function v1(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:we},next:null};var x={};return o.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:pi,lastRenderedState:x},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function w1(s){var o=v1(s).next.queue;Wc(s,o,{},Us())}function yx(){return rs(x0)}function N1(){return ya().memoizedState}function k1(){return ya().memoizedState}function aN(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var x=Us();s=Zi(x);var y=Qi(o,s,x);y!==null&&(Hs(y,o,x),Vc(y,o,x)),o={cache:Yf()},s.payload=o;return}o=o.return}}function sN(s,o,x){var y=Us();x={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null},zd(s)?E1(o,x):(x=Lf(s,o,x,y),x!==null&&(Hs(x,s,y),C1(x,o,y)))}function j1(s,o,x){var y=Us();Wc(s,o,x,y)}function Wc(s,o,x,y){var k={lane:y,revertLane:0,action:x,hasEagerState:!1,eagerState:null,next:null};if(zd(s))E1(o,k);else{var D=s.alternate;if(s.lanes===0&&(D===null||D.lanes===0)&&(D=o.lastRenderedReducer,D!==null))try{var W=o.lastRenderedState,xe=D(W,x);if(k.hasEagerState=!0,k.eagerState=xe,m(xe,W))return kd(s,o,k,0),Pr===null&&Nd(),!1}catch{}finally{}if(x=Lf(s,o,k,y),x!==null)return Hs(x,s,y),C1(x,o,y),!0}return!1}function bx(s,o,x,y){if(y={lane:2,revertLane:Zx(),action:y,hasEagerState:!1,eagerState:null,next:null},zd(s)){if(o)throw Error(i(479))}else o=Lf(s,x,y,2),o!==null&&Hs(o,s,2)}function zd(s){var o=s.alternate;return s===ir||o!==null&&o===ir}function E1(s,o){Ho=Id=!0;var x=s.pending;x===null?o.next=o:(o.next=x.next,x.next=o),s.pending=o}function C1(s,o,x){if((x&4194048)!==0){var y=o.lanes;y&=s.pendingLanes,x|=y,o.lanes=x,Wa(s,x)}}var Ud={readContext:rs,use:Md,useCallback:ua,useContext:ua,useEffect:ua,useImperativeHandle:ua,useLayoutEffect:ua,useInsertionEffect:ua,useMemo:ua,useReducer:ua,useRef:ua,useState:ua,useDebugValue:ua,useDeferredValue:ua,useTransition:ua,useSyncExternalStore:ua,useId:ua,useHostTransitionStatus:ua,useFormState:ua,useActionState:ua,useOptimistic:ua,useMemoCache:ua,useCacheRefresh:ua},_1={readContext:rs,use:Md,useCallback:function(s,o){return Cs().memoizedState=[s,o===void 0?null:o],s},useContext:rs,useEffect:d1,useImperativeHandle:function(s,o,x){x=x!=null?x.concat([s]):null,Pd(4194308,4,h1.bind(null,o,s),x)},useLayoutEffect:function(s,o){return Pd(4194308,4,s,o)},useInsertionEffect:function(s,o){Pd(4,2,s,o)},useMemo:function(s,o){var x=Cs();o=o===void 0?null:o;var y=s();if(ql){Lt(!0);try{s()}finally{Lt(!1)}}return x.memoizedState=[y,o],y},useReducer:function(s,o,x){var y=Cs();if(x!==void 0){var k=x(o);if(ql){Lt(!0);try{x(o)}finally{Lt(!1)}}}else k=o;return y.memoizedState=y.baseState=k,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:k},y.queue=s,s=s.dispatch=sN.bind(null,ir,s),[y.memoizedState,s]},useRef:function(s){var o=Cs();return s={current:s},o.memoizedState=s},useState:function(s){s=xx(s);var o=s.queue,x=j1.bind(null,ir,o);return o.dispatch=x,[s.memoizedState,x]},useDebugValue:mx,useDeferredValue:function(s,o){var x=Cs();return gx(x,s,o)},useTransition:function(){var s=xx(!1);return s=b1.bind(null,ir,s.queue,!0,!1),Cs().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,x){var y=ir,k=Cs();if(Nr){if(x===void 0)throw Error(i(407));x=x()}else{if(x=o(),Pr===null)throw Error(i(349));(hr&124)!==0||Yg(y,o,x)}k.memoizedState=x;var D={value:x,getSnapshot:o};return k.queue=D,d1(Kg.bind(null,y,D,s),[s]),y.flags|=2048,Go(9,Ld(),Wg.bind(null,y,D,x,o),null),x},useId:function(){var s=Cs(),o=Pr.identifierPrefix;if(Nr){var x=hi,y=xi;x=(y&~(1<<32-qt(y)-1)).toString(32)+x,o=""+o+"R"+x,x=Fd++,0<x&&(o+="H"+x.toString(32)),o+=""}else x=Q4++,o=""+o+"r"+x.toString(32)+"";return s.memoizedState=o},useHostTransitionStatus:yx,useFormState:n1,useActionState:n1,useOptimistic:function(s){var o=Cs();o.memoizedState=o.baseState=s;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=x,o=bx.bind(null,ir,!0,x),x.dispatch=o,[s,o]},useMemoCache:dx,useCacheRefresh:function(){return Cs().memoizedState=aN.bind(null,ir)}},A1={readContext:rs,use:Md,useCallback:g1,useContext:rs,useEffect:u1,useImperativeHandle:m1,useInsertionEffect:f1,useLayoutEffect:x1,useMemo:p1,useReducer:Bd,useRef:c1,useState:function(){return Bd(pi)},useDebugValue:mx,useDeferredValue:function(s,o){var x=ya();return y1(x,Rr.memoizedState,s,o)},useTransition:function(){var s=Bd(pi)[0],o=ya().memoizedState;return[typeof s=="boolean"?s:$c(s),o]},useSyncExternalStore:$g,useId:N1,useHostTransitionStatus:yx,useFormState:i1,useActionState:i1,useOptimistic:function(s,o){var x=ya();return Jg(x,Rr,s,o)},useMemoCache:dx,useCacheRefresh:k1},nN={readContext:rs,use:Md,useCallback:g1,useContext:rs,useEffect:u1,useImperativeHandle:m1,useInsertionEffect:f1,useLayoutEffect:x1,useMemo:p1,useReducer:fx,useRef:c1,useState:function(){return fx(pi)},useDebugValue:mx,useDeferredValue:function(s,o){var x=ya();return Rr===null?gx(x,s,o):y1(x,Rr.memoizedState,s,o)},useTransition:function(){var s=fx(pi)[0],o=ya().memoizedState;return[typeof s=="boolean"?s:$c(s),o]},useSyncExternalStore:$g,useId:N1,useHostTransitionStatus:yx,useFormState:o1,useActionState:o1,useOptimistic:function(s,o){var x=ya();return Rr!==null?Jg(x,Rr,s,o):(x.baseState=s,[s,x.queue.dispatch])},useMemoCache:dx,useCacheRefresh:k1},Xo=null,Kc=0;function Hd(s){var o=Kc;return Kc+=1,Xo===null&&(Xo=[]),Pg(Xo,s,o)}function Zc(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Vd(s,o){throw o.$$typeof===j?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function S1(s){var o=s._init;return o(s._payload)}function T1(s){function o(Le,Ie){if(s){var Ve=Le.deletions;Ve===null?(Le.deletions=[Ie],Le.flags|=16):Ve.push(Ie)}}function x(Le,Ie){if(!s)return null;for(;Ie!==null;)o(Le,Ie),Ie=Ie.sibling;return null}function y(Le){for(var Ie=new Map;Le!==null;)Le.key!==null?Ie.set(Le.key,Le):Ie.set(Le.index,Le),Le=Le.sibling;return Ie}function k(Le,Ie){return Le=fi(Le,Ie),Le.index=0,Le.sibling=null,Le}function D(Le,Ie,Ve){return Le.index=Ve,s?(Ve=Le.alternate,Ve!==null?(Ve=Ve.index,Ve<Ie?(Le.flags|=67108866,Ie):Ve):(Le.flags|=67108866,Ie)):(Le.flags|=1048576,Ie)}function W(Le){return s&&Le.alternate===null&&(Le.flags|=67108866),Le}function xe(Le,Ie,Ve,ct){return Ie===null||Ie.tag!==6?(Ie=zf(Ve,Le.mode,ct),Ie.return=Le,Ie):(Ie=k(Ie,Ve),Ie.return=Le,Ie)}function Te(Le,Ie,Ve,ct){var _t=Ve.type;return _t===R?it(Le,Ie,Ve.props.children,ct,Ve.key):Ie!==null&&(Ie.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===P&&S1(_t)===Ie.type)?(Ie=k(Ie,Ve.props),Zc(Ie,Ve),Ie.return=Le,Ie):(Ie=Ed(Ve.type,Ve.key,Ve.props,null,Le.mode,ct),Zc(Ie,Ve),Ie.return=Le,Ie)}function Xe(Le,Ie,Ve,ct){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==Ve.containerInfo||Ie.stateNode.implementation!==Ve.implementation?(Ie=Uf(Ve,Le.mode,ct),Ie.return=Le,Ie):(Ie=k(Ie,Ve.children||[]),Ie.return=Le,Ie)}function it(Le,Ie,Ve,ct,_t){return Ie===null||Ie.tag!==7?(Ie=Ll(Ve,Le.mode,ct,_t),Ie.return=Le,Ie):(Ie=k(Ie,Ve),Ie.return=Le,Ie)}function ft(Le,Ie,Ve){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number"||typeof Ie=="bigint")return Ie=zf(""+Ie,Le.mode,Ve),Ie.return=Le,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case C:return Ve=Ed(Ie.type,Ie.key,Ie.props,null,Le.mode,Ve),Zc(Ve,Ie),Ve.return=Le,Ve;case _:return Ie=Uf(Ie,Le.mode,Ve),Ie.return=Le,Ie;case P:var ct=Ie._init;return Ie=ct(Ie._payload),ft(Le,Ie,Ve)}if(X(Ie)||V(Ie))return Ie=Ll(Ie,Le.mode,Ve,null),Ie.return=Le,Ie;if(typeof Ie.then=="function")return ft(Le,Hd(Ie),Ve);if(Ie.$$typeof===T)return ft(Le,Sd(Le,Ie),Ve);Vd(Le,Ie)}return null}function $e(Le,Ie,Ve,ct){var _t=Ie!==null?Ie.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return _t!==null?null:xe(Le,Ie,""+Ve,ct);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case C:return Ve.key===_t?Te(Le,Ie,Ve,ct):null;case _:return Ve.key===_t?Xe(Le,Ie,Ve,ct):null;case P:return _t=Ve._init,Ve=_t(Ve._payload),$e(Le,Ie,Ve,ct)}if(X(Ve)||V(Ve))return _t!==null?null:it(Le,Ie,Ve,ct,null);if(typeof Ve.then=="function")return $e(Le,Ie,Hd(Ve),ct);if(Ve.$$typeof===T)return $e(Le,Ie,Sd(Le,Ve),ct);Vd(Le,Ve)}return null}function Ze(Le,Ie,Ve,ct,_t){if(typeof ct=="string"&&ct!==""||typeof ct=="number"||typeof ct=="bigint")return Le=Le.get(Ve)||null,xe(Ie,Le,""+ct,_t);if(typeof ct=="object"&&ct!==null){switch(ct.$$typeof){case C:return Le=Le.get(ct.key===null?Ve:ct.key)||null,Te(Ie,Le,ct,_t);case _:return Le=Le.get(ct.key===null?Ve:ct.key)||null,Xe(Ie,Le,ct,_t);case P:var lr=ct._init;return ct=lr(ct._payload),Ze(Le,Ie,Ve,ct,_t)}if(X(ct)||V(ct))return Le=Le.get(Ve)||null,it(Ie,Le,ct,_t,null);if(typeof ct.then=="function")return Ze(Le,Ie,Ve,Hd(ct),_t);if(ct.$$typeof===T)return Ze(Le,Ie,Ve,Sd(Ie,ct),_t);Vd(Ie,ct)}return null}function Vt(Le,Ie,Ve,ct){for(var _t=null,lr=null,It=Ie,zt=Ie=0,La=null;It!==null&&zt<Ve.length;zt++){It.index>zt?(La=It,It=null):La=It.sibling;var wr=$e(Le,It,Ve[zt],ct);if(wr===null){It===null&&(It=La);break}s&&It&&wr.alternate===null&&o(Le,It),Ie=D(wr,Ie,zt),lr===null?_t=wr:lr.sibling=wr,lr=wr,It=La}if(zt===Ve.length)return x(Le,It),Nr&&zl(Le,zt),_t;if(It===null){for(;zt<Ve.length;zt++)It=ft(Le,Ve[zt],ct),It!==null&&(Ie=D(It,Ie,zt),lr===null?_t=It:lr.sibling=It,lr=It);return Nr&&zl(Le,zt),_t}for(It=y(It);zt<Ve.length;zt++)La=Ze(It,Le,zt,Ve[zt],ct),La!==null&&(s&&La.alternate!==null&&It.delete(La.key===null?zt:La.key),Ie=D(La,Ie,zt),lr===null?_t=La:lr.sibling=La,lr=La);return s&&It.forEach(function(ml){return o(Le,ml)}),Nr&&zl(Le,zt),_t}function Pt(Le,Ie,Ve,ct){if(Ve==null)throw Error(i(151));for(var _t=null,lr=null,It=Ie,zt=Ie=0,La=null,wr=Ve.next();It!==null&&!wr.done;zt++,wr=Ve.next()){It.index>zt?(La=It,It=null):La=It.sibling;var ml=$e(Le,It,wr.value,ct);if(ml===null){It===null&&(It=La);break}s&&It&&ml.alternate===null&&o(Le,It),Ie=D(ml,Ie,zt),lr===null?_t=ml:lr.sibling=ml,lr=ml,It=La}if(wr.done)return x(Le,It),Nr&&zl(Le,zt),_t;if(It===null){for(;!wr.done;zt++,wr=Ve.next())wr=ft(Le,wr.value,ct),wr!==null&&(Ie=D(wr,Ie,zt),lr===null?_t=wr:lr.sibling=wr,lr=wr);return Nr&&zl(Le,zt),_t}for(It=y(It);!wr.done;zt++,wr=Ve.next())wr=Ze(It,Le,zt,wr.value,ct),wr!==null&&(s&&wr.alternate!==null&&It.delete(wr.key===null?zt:wr.key),Ie=D(wr,Ie,zt),lr===null?_t=wr:lr.sibling=wr,lr=wr);return s&&It.forEach(function(ik){return o(Le,ik)}),Nr&&zl(Le,zt),_t}function Or(Le,Ie,Ve,ct){if(typeof Ve=="object"&&Ve!==null&&Ve.type===R&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case C:e:{for(var _t=Ve.key;Ie!==null;){if(Ie.key===_t){if(_t=Ve.type,_t===R){if(Ie.tag===7){x(Le,Ie.sibling),ct=k(Ie,Ve.props.children),ct.return=Le,Le=ct;break e}}else if(Ie.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===P&&S1(_t)===Ie.type){x(Le,Ie.sibling),ct=k(Ie,Ve.props),Zc(ct,Ve),ct.return=Le,Le=ct;break e}x(Le,Ie);break}else o(Le,Ie);Ie=Ie.sibling}Ve.type===R?(ct=Ll(Ve.props.children,Le.mode,ct,Ve.key),ct.return=Le,Le=ct):(ct=Ed(Ve.type,Ve.key,Ve.props,null,Le.mode,ct),Zc(ct,Ve),ct.return=Le,Le=ct)}return W(Le);case _:e:{for(_t=Ve.key;Ie!==null;){if(Ie.key===_t)if(Ie.tag===4&&Ie.stateNode.containerInfo===Ve.containerInfo&&Ie.stateNode.implementation===Ve.implementation){x(Le,Ie.sibling),ct=k(Ie,Ve.children||[]),ct.return=Le,Le=ct;break e}else{x(Le,Ie);break}else o(Le,Ie);Ie=Ie.sibling}ct=Uf(Ve,Le.mode,ct),ct.return=Le,Le=ct}return W(Le);case P:return _t=Ve._init,Ve=_t(Ve._payload),Or(Le,Ie,Ve,ct)}if(X(Ve))return Vt(Le,Ie,Ve,ct);if(V(Ve)){if(_t=V(Ve),typeof _t!="function")throw Error(i(150));return Ve=_t.call(Ve),Pt(Le,Ie,Ve,ct)}if(typeof Ve.then=="function")return Or(Le,Ie,Hd(Ve),ct);if(Ve.$$typeof===T)return Or(Le,Ie,Sd(Le,Ve),ct);Vd(Le,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,Ie!==null&&Ie.tag===6?(x(Le,Ie.sibling),ct=k(Ie,Ve),ct.return=Le,Le=ct):(x(Le,Ie),ct=zf(Ve,Le.mode,ct),ct.return=Le,Le=ct),W(Le)):x(Le,Ie)}return function(Le,Ie,Ve,ct){try{Kc=0;var _t=Or(Le,Ie,Ve,ct);return Xo=null,_t}catch(It){if(It===Uc||It===Rd)throw It;var lr=Bs(29,It,null,Le.mode);return lr.lanes=ct,lr.return=Le,lr}finally{}}}var qo=T1(!0),R1=T1(!1),an=re(null),qn=null;function el(s){var o=s.alternate;Y(Ra,Ra.current&1),Y(an,s),qn===null&&(o===null||Uo.current!==null||o.memoizedState!==null)&&(qn=s)}function D1(s){if(s.tag===22){if(Y(Ra,Ra.current),Y(an,s),qn===null){var o=s.alternate;o!==null&&o.memoizedState!==null&&(qn=s)}}else tl()}function tl(){Y(Ra,Ra.current),Y(an,an.current)}function yi(s){Q(an),qn===s&&(qn=null),Q(Ra)}var Ra=re(0);function Gd(s){for(var o=s;o!==null;){if(o.tag===13){var x=o.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||x.data==="$?"||ch(x)))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}function vx(s,o,x,y){o=s.memoizedState,x=x(y,o),x=x==null?o:w({},o,x),s.memoizedState=x,s.lanes===0&&(s.updateQueue.baseState=x)}var wx={enqueueSetState:function(s,o,x){s=s._reactInternals;var y=Us(),k=Zi(y);k.payload=o,x!=null&&(k.callback=x),o=Qi(s,k,y),o!==null&&(Hs(o,s,y),Vc(o,s,y))},enqueueReplaceState:function(s,o,x){s=s._reactInternals;var y=Us(),k=Zi(y);k.tag=1,k.payload=o,x!=null&&(k.callback=x),o=Qi(s,k,y),o!==null&&(Hs(o,s,y),Vc(o,s,y))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var x=Us(),y=Zi(x);y.tag=2,o!=null&&(y.callback=o),o=Qi(s,y,x),o!==null&&(Hs(o,s,x),Vc(o,s,x))}};function O1(s,o,x,y,k,D,W){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(y,D,W):o.prototype&&o.prototype.isPureReactComponent?!g(x,y)||!g(k,D):!0}function I1(s,o,x,y){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(x,y),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(x,y),o.state!==s&&wx.enqueueReplaceState(o,o.state,null)}function $l(s,o){var x=o;if("ref"in o){x={};for(var y in o)y!=="ref"&&(x[y]=o[y])}if(s=s.defaultProps){x===o&&(x=w({},x));for(var k in s)x[k]===void 0&&(x[k]=s[k])}return x}var Xd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function F1(s){Xd(s)}function M1(s){console.error(s)}function B1(s){Xd(s)}function qd(s,o){try{var x=s.onUncaughtError;x(o.value,{componentStack:o.stack})}catch(y){setTimeout(function(){throw y})}}function L1(s,o,x){try{var y=s.onCaughtError;y(x.value,{componentStack:x.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(k){setTimeout(function(){throw k})}}function Nx(s,o,x){return x=Zi(x),x.tag=3,x.payload={element:null},x.callback=function(){qd(s,o)},x}function P1(s){return s=Zi(s),s.tag=3,s}function z1(s,o,x,y){var k=x.type.getDerivedStateFromError;if(typeof k=="function"){var D=y.value;s.payload=function(){return k(D)},s.callback=function(){L1(o,x,y)}}var W=x.stateNode;W!==null&&typeof W.componentDidCatch=="function"&&(s.callback=function(){L1(o,x,y),typeof k!="function"&&(ll===null?ll=new Set([this]):ll.add(this));var xe=y.stack;this.componentDidCatch(y.value,{componentStack:xe!==null?xe:""})})}function iN(s,o,x,y,k){if(x.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(o=x.alternate,o!==null&&Lc(o,x,k,!0),x=an.current,x!==null){switch(x.tag){case 13:return qn===null?qx():x.alternate===null&&ra===0&&(ra=3),x.flags&=-257,x.flags|=65536,x.lanes=k,y===Zf?x.flags|=16384:(o=x.updateQueue,o===null?x.updateQueue=new Set([y]):o.add(y),Yx(s,y,k)),!1;case 22:return x.flags|=65536,y===Zf?x.flags|=16384:(o=x.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([y])},x.updateQueue=o):(x=o.retryQueue,x===null?o.retryQueue=new Set([y]):x.add(y)),Yx(s,y,k)),!1}throw Error(i(435,x.tag))}return Yx(s,y,k),qx(),!1}if(Nr)return o=an.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=k,y!==Gf&&(s=Error(i(422),{cause:y}),Bc(Js(s,x)))):(y!==Gf&&(o=Error(i(423),{cause:y}),Bc(Js(o,x))),s=s.current.alternate,s.flags|=65536,k&=-k,s.lanes|=k,y=Js(y,x),k=Nx(s.stateNode,y,k),ex(s,k),ra!==4&&(ra=2)),!1;var D=Error(i(520),{cause:y});if(D=Js(D,x),s0===null?s0=[D]:s0.push(D),ra!==4&&(ra=2),o===null)return!0;y=Js(y,x),x=o;do{switch(x.tag){case 3:return x.flags|=65536,s=k&-k,x.lanes|=s,s=Nx(x.stateNode,y,s),ex(x,s),!1;case 1:if(o=x.type,D=x.stateNode,(x.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(ll===null||!ll.has(D))))return x.flags|=65536,k&=-k,x.lanes|=k,k=P1(k),z1(k,s,x,y),ex(x,k),!1}x=x.return}while(x!==null);return!1}var U1=Error(i(461)),Ma=!1;function Va(s,o,x,y){o.child=s===null?R1(o,null,x,y):qo(o,s.child,x,y)}function H1(s,o,x,y,k){x=x.render;var D=o.ref;if("ref"in y){var W={};for(var xe in y)xe!=="ref"&&(W[xe]=y[xe])}else W=y;return Gl(o),y=nx(s,o,x,W,D,k),xe=ix(),s!==null&&!Ma?(lx(s,o,k),bi(s,o,k)):(Nr&&xe&&Hf(o),o.flags|=1,Va(s,o,y,k),o.child)}function V1(s,o,x,y,k){if(s===null){var D=x.type;return typeof D=="function"&&!Pf(D)&&D.defaultProps===void 0&&x.compare===null?(o.tag=15,o.type=D,G1(s,o,D,y,k)):(s=Ed(x.type,null,y,o,o.mode,k),s.ref=o.ref,s.return=o,o.child=s)}if(D=s.child,!Tx(s,k)){var W=D.memoizedProps;if(x=x.compare,x=x!==null?x:g,x(W,y)&&s.ref===o.ref)return bi(s,o,k)}return o.flags|=1,s=fi(D,y),s.ref=o.ref,s.return=o,o.child=s}function G1(s,o,x,y,k){if(s!==null){var D=s.memoizedProps;if(g(D,y)&&s.ref===o.ref)if(Ma=!1,o.pendingProps=y=D,Tx(s,k))(s.flags&131072)!==0&&(Ma=!0);else return o.lanes=s.lanes,bi(s,o,k)}return kx(s,o,x,y,k)}function X1(s,o,x){var y=o.pendingProps,k=y.children,D=s!==null?s.memoizedState:null;if(y.mode==="hidden"){if((o.flags&128)!==0){if(y=D!==null?D.baseLanes|x:x,s!==null){for(k=o.child=s.child,D=0;k!==null;)D=D|k.lanes|k.childLanes,k=k.sibling;o.childLanes=D&~y}else o.childLanes=0,o.child=null;return q1(s,o,y,x)}if((x&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Td(o,D!==null?D.cachePool:null),D!==null?Gg(o,D):rx(),D1(o);else return o.lanes=o.childLanes=536870912,q1(s,o,D!==null?D.baseLanes|x:x,x)}else D!==null?(Td(o,D.cachePool),Gg(o,D),tl(),o.memoizedState=null):(s!==null&&Td(o,null),rx(),tl());return Va(s,o,k,x),o.child}function q1(s,o,x,y){var k=Kf();return k=k===null?null:{parent:Ta._currentValue,pool:k},o.memoizedState={baseLanes:x,cachePool:k},s!==null&&Td(o,null),rx(),D1(o),s!==null&&Lc(s,o,y,!0),null}function $d(s,o){var x=o.ref;if(x===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(i(284));(s===null||s.ref!==x)&&(o.flags|=4194816)}}function kx(s,o,x,y,k){return Gl(o),x=nx(s,o,x,y,void 0,k),y=ix(),s!==null&&!Ma?(lx(s,o,k),bi(s,o,k)):(Nr&&y&&Hf(o),o.flags|=1,Va(s,o,x,k),o.child)}function $1(s,o,x,y,k,D){return Gl(o),o.updateQueue=null,x=qg(o,y,x,k),Xg(s),y=ix(),s!==null&&!Ma?(lx(s,o,D),bi(s,o,D)):(Nr&&y&&Hf(o),o.flags|=1,Va(s,o,x,D),o.child)}function Y1(s,o,x,y,k){if(Gl(o),o.stateNode===null){var D=Mo,W=x.contextType;typeof W=="object"&&W!==null&&(D=rs(W)),D=new x(y,D),o.memoizedState=D.state!==null&&D.state!==void 0?D.state:null,D.updater=wx,o.stateNode=D,D._reactInternals=o,D=o.stateNode,D.props=y,D.state=o.memoizedState,D.refs={},Qf(o),W=x.contextType,D.context=typeof W=="object"&&W!==null?rs(W):Mo,D.state=o.memoizedState,W=x.getDerivedStateFromProps,typeof W=="function"&&(vx(o,x,W,y),D.state=o.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof D.getSnapshotBeforeUpdate=="function"||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(W=D.state,typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount(),W!==D.state&&wx.enqueueReplaceState(D,D.state,null),Xc(o,y,D,k),Gc(),D.state=o.memoizedState),typeof D.componentDidMount=="function"&&(o.flags|=4194308),y=!0}else if(s===null){D=o.stateNode;var xe=o.memoizedProps,Te=$l(x,xe);D.props=Te;var Xe=D.context,it=x.contextType;W=Mo,typeof it=="object"&&it!==null&&(W=rs(it));var ft=x.getDerivedStateFromProps;it=typeof ft=="function"||typeof D.getSnapshotBeforeUpdate=="function",xe=o.pendingProps!==xe,it||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(xe||Xe!==W)&&I1(o,D,y,W),Ki=!1;var $e=o.memoizedState;D.state=$e,Xc(o,y,D,k),Gc(),Xe=o.memoizedState,xe||$e!==Xe||Ki?(typeof ft=="function"&&(vx(o,x,ft,y),Xe=o.memoizedState),(Te=Ki||O1(o,x,Te,y,$e,Xe,W))?(it||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(o.flags|=4194308)):(typeof D.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=y,o.memoizedState=Xe),D.props=y,D.state=Xe,D.context=W,y=Te):(typeof D.componentDidMount=="function"&&(o.flags|=4194308),y=!1)}else{D=o.stateNode,Jf(s,o),W=o.memoizedProps,it=$l(x,W),D.props=it,ft=o.pendingProps,$e=D.context,Xe=x.contextType,Te=Mo,typeof Xe=="object"&&Xe!==null&&(Te=rs(Xe)),xe=x.getDerivedStateFromProps,(Xe=typeof xe=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(W!==ft||$e!==Te)&&I1(o,D,y,Te),Ki=!1,$e=o.memoizedState,D.state=$e,Xc(o,y,D,k),Gc();var Ze=o.memoizedState;W!==ft||$e!==Ze||Ki||s!==null&&s.dependencies!==null&&Ad(s.dependencies)?(typeof xe=="function"&&(vx(o,x,xe,y),Ze=o.memoizedState),(it=Ki||O1(o,x,it,y,$e,Ze,Te)||s!==null&&s.dependencies!==null&&Ad(s.dependencies))?(Xe||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(y,Ze,Te),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(y,Ze,Te)),typeof D.componentDidUpdate=="function"&&(o.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof D.componentDidUpdate!="function"||W===s.memoizedProps&&$e===s.memoizedState||(o.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&$e===s.memoizedState||(o.flags|=1024),o.memoizedProps=y,o.memoizedState=Ze),D.props=y,D.state=Ze,D.context=Te,y=it):(typeof D.componentDidUpdate!="function"||W===s.memoizedProps&&$e===s.memoizedState||(o.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||W===s.memoizedProps&&$e===s.memoizedState||(o.flags|=1024),y=!1)}return D=y,$d(s,o),y=(o.flags&128)!==0,D||y?(D=o.stateNode,x=y&&typeof x.getDerivedStateFromError!="function"?null:D.render(),o.flags|=1,s!==null&&y?(o.child=qo(o,s.child,null,k),o.child=qo(o,null,x,k)):Va(s,o,x,k),o.memoizedState=D.state,s=o.child):s=bi(s,o,k),s}function W1(s,o,x,y){return Mc(),o.flags|=256,Va(s,o,x,y),o.child}var jx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ex(s){return{baseLanes:s,cachePool:Mg()}}function Cx(s,o,x){return s=s!==null?s.childLanes&~x:0,o&&(s|=sn),s}function K1(s,o,x){var y=o.pendingProps,k=!1,D=(o.flags&128)!==0,W;if((W=D)||(W=s!==null&&s.memoizedState===null?!1:(Ra.current&2)!==0),W&&(k=!0,o.flags&=-129),W=(o.flags&32)!==0,o.flags&=-33,s===null){if(Nr){if(k?el(o):tl(),Nr){var xe=ta,Te;if(Te=xe){e:{for(Te=xe,xe=Xn;Te.nodeType!==8;){if(!xe){xe=null;break e}if(Te=vn(Te.nextSibling),Te===null){xe=null;break e}}xe=Te}xe!==null?(o.memoizedState={dehydrated:xe,treeContext:Pl!==null?{id:xi,overflow:hi}:null,retryLane:536870912,hydrationErrors:null},Te=Bs(18,null,null,0),Te.stateNode=xe,Te.return=o,o.child=Te,gs=o,ta=null,Te=!0):Te=!1}Te||Hl(o)}if(xe=o.memoizedState,xe!==null&&(xe=xe.dehydrated,xe!==null))return ch(xe)?o.lanes=32:o.lanes=536870912,null;yi(o)}return xe=y.children,y=y.fallback,k?(tl(),k=o.mode,xe=Yd({mode:"hidden",children:xe},k),y=Ll(y,k,x,null),xe.return=o,y.return=o,xe.sibling=y,o.child=xe,k=o.child,k.memoizedState=Ex(x),k.childLanes=Cx(s,W,x),o.memoizedState=jx,y):(el(o),_x(o,xe))}if(Te=s.memoizedState,Te!==null&&(xe=Te.dehydrated,xe!==null)){if(D)o.flags&256?(el(o),o.flags&=-257,o=Ax(s,o,x)):o.memoizedState!==null?(tl(),o.child=s.child,o.flags|=128,o=null):(tl(),k=y.fallback,xe=o.mode,y=Yd({mode:"visible",children:y.children},xe),k=Ll(k,xe,x,null),k.flags|=2,y.return=o,k.return=o,y.sibling=k,o.child=y,qo(o,s.child,null,x),y=o.child,y.memoizedState=Ex(x),y.childLanes=Cx(s,W,x),o.memoizedState=jx,o=k);else if(el(o),ch(xe)){if(W=xe.nextSibling&&xe.nextSibling.dataset,W)var Xe=W.dgst;W=Xe,y=Error(i(419)),y.stack="",y.digest=W,Bc({value:y,source:null,stack:null}),o=Ax(s,o,x)}else if(Ma||Lc(s,o,x,!1),W=(x&s.childLanes)!==0,Ma||W){if(W=Pr,W!==null&&(y=x&-x,y=(y&42)!==0?1:ii(y),y=(y&(W.suspendedLanes|x))!==0?0:y,y!==0&&y!==Te.retryLane))throw Te.retryLane=y,Fo(s,y),Hs(W,s,y),U1;xe.data==="$?"||qx(),o=Ax(s,o,x)}else xe.data==="$?"?(o.flags|=192,o.child=s.child,o=null):(s=Te.treeContext,ta=vn(xe.nextSibling),gs=o,Nr=!0,Ul=null,Xn=!1,s!==null&&(tn[rn++]=xi,tn[rn++]=hi,tn[rn++]=Pl,xi=s.id,hi=s.overflow,Pl=o),o=_x(o,y.children),o.flags|=4096);return o}return k?(tl(),k=y.fallback,xe=o.mode,Te=s.child,Xe=Te.sibling,y=fi(Te,{mode:"hidden",children:y.children}),y.subtreeFlags=Te.subtreeFlags&65011712,Xe!==null?k=fi(Xe,k):(k=Ll(k,xe,x,null),k.flags|=2),k.return=o,y.return=o,y.sibling=k,o.child=y,y=k,k=o.child,xe=s.child.memoizedState,xe===null?xe=Ex(x):(Te=xe.cachePool,Te!==null?(Xe=Ta._currentValue,Te=Te.parent!==Xe?{parent:Xe,pool:Xe}:Te):Te=Mg(),xe={baseLanes:xe.baseLanes|x,cachePool:Te}),k.memoizedState=xe,k.childLanes=Cx(s,W,x),o.memoizedState=jx,y):(el(o),x=s.child,s=x.sibling,x=fi(x,{mode:"visible",children:y.children}),x.return=o,x.sibling=null,s!==null&&(W=o.deletions,W===null?(o.deletions=[s],o.flags|=16):W.push(s)),o.child=x,o.memoizedState=null,x)}function _x(s,o){return o=Yd({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function Yd(s,o){return s=Bs(22,s,null,o),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ax(s,o,x){return qo(o,s.child,null,x),s=_x(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function Z1(s,o,x){s.lanes|=o;var y=s.alternate;y!==null&&(y.lanes|=o),qf(s.return,o,x)}function Sx(s,o,x,y,k){var D=s.memoizedState;D===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:y,tail:x,tailMode:k}:(D.isBackwards=o,D.rendering=null,D.renderingStartTime=0,D.last=y,D.tail=x,D.tailMode=k)}function Q1(s,o,x){var y=o.pendingProps,k=y.revealOrder,D=y.tail;if(Va(s,o,y.children,x),y=Ra.current,(y&2)!==0)y=y&1|2,o.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Z1(s,x,o);else if(s.tag===19)Z1(s,x,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}y&=1}switch(Y(Ra,y),k){case"forwards":for(x=o.child,k=null;x!==null;)s=x.alternate,s!==null&&Gd(s)===null&&(k=x),x=x.sibling;x=k,x===null?(k=o.child,o.child=null):(k=x.sibling,x.sibling=null),Sx(o,!1,k,x,D);break;case"backwards":for(x=null,k=o.child,o.child=null;k!==null;){if(s=k.alternate,s!==null&&Gd(s)===null){o.child=k;break}s=k.sibling,k.sibling=x,x=k,k=s}Sx(o,!0,x,null,D);break;case"together":Sx(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function bi(s,o,x){if(s!==null&&(o.dependencies=s.dependencies),il|=o.lanes,(x&o.childLanes)===0)if(s!==null){if(Lc(s,o,x,!1),(x&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,x=fi(s,s.pendingProps),o.child=x,x.return=o;s.sibling!==null;)s=s.sibling,x=x.sibling=fi(s,s.pendingProps),x.return=o;x.sibling=null}return o.child}function Tx(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&Ad(s)))}function lN(s,o,x){switch(o.tag){case 3:je(o,o.stateNode.containerInfo),Wi(o,Ta,s.memoizedState.cache),Mc();break;case 27:case 5:Me(o);break;case 4:je(o,o.stateNode.containerInfo);break;case 10:Wi(o,o.type,o.memoizedProps.value);break;case 13:var y=o.memoizedState;if(y!==null)return y.dehydrated!==null?(el(o),o.flags|=128,null):(x&o.child.childLanes)!==0?K1(s,o,x):(el(o),s=bi(s,o,x),s!==null?s.sibling:null);el(o);break;case 19:var k=(s.flags&128)!==0;if(y=(x&o.childLanes)!==0,y||(Lc(s,o,x,!1),y=(x&o.childLanes)!==0),k){if(y)return Q1(s,o,x);o.flags|=128}if(k=o.memoizedState,k!==null&&(k.rendering=null,k.tail=null,k.lastEffect=null),Y(Ra,Ra.current),y)break;return null;case 22:case 23:return o.lanes=0,X1(s,o,x);case 24:Wi(o,Ta,s.memoizedState.cache)}return bi(s,o,x)}function J1(s,o,x){if(s!==null)if(s.memoizedProps!==o.pendingProps)Ma=!0;else{if(!Tx(s,x)&&(o.flags&128)===0)return Ma=!1,lN(s,o,x);Ma=(s.flags&131072)!==0}else Ma=!1,Nr&&(o.flags&1048576)!==0&&Sg(o,_d,o.index);switch(o.lanes=0,o.tag){case 16:e:{s=o.pendingProps;var y=o.elementType,k=y._init;if(y=k(y._payload),o.type=y,typeof y=="function")Pf(y)?(s=$l(y,s),o.tag=1,o=Y1(null,o,y,s,x)):(o.tag=0,o=kx(null,o,y,s,x));else{if(y!=null){if(k=y.$$typeof,k===B){o.tag=11,o=H1(null,o,y,s,x);break e}else if(k===L){o.tag=14,o=V1(null,o,y,s,x);break e}}throw o=ie(y)||y,Error(i(306,o,""))}}return o;case 0:return kx(s,o,o.type,o.pendingProps,x);case 1:return y=o.type,k=$l(y,o.pendingProps),Y1(s,o,y,k,x);case 3:e:{if(je(o,o.stateNode.containerInfo),s===null)throw Error(i(387));y=o.pendingProps;var D=o.memoizedState;k=D.element,Jf(s,o),Xc(o,y,null,x);var W=o.memoizedState;if(y=W.cache,Wi(o,Ta,y),y!==D.cache&&$f(o,[Ta],x,!0),Gc(),y=W.element,D.isDehydrated)if(D={element:y,isDehydrated:!1,cache:W.cache},o.updateQueue.baseState=D,o.memoizedState=D,o.flags&256){o=W1(s,o,y,x);break e}else if(y!==k){k=Js(Error(i(424)),o),Bc(k),o=W1(s,o,y,x);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(ta=vn(s.firstChild),gs=o,Nr=!0,Ul=null,Xn=!0,x=R1(o,null,y,x),o.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling}else{if(Mc(),y===k){o=bi(s,o,x);break e}Va(s,o,y,x)}o=o.child}return o;case 26:return $d(s,o),s===null?(x=ay(o.type,null,o.pendingProps,null))?o.memoizedState=x:Nr||(x=o.type,s=o.pendingProps,y=ou(Z.current).createElement(x),y[ha]=o,y[Lr]=s,Xa(y,x,s),Be(y),o.stateNode=y):o.memoizedState=ay(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Me(o),s===null&&Nr&&(y=o.stateNode=ey(o.type,o.pendingProps,Z.current),gs=o,Xn=!0,k=ta,dl(o.type)?(dh=k,ta=vn(y.firstChild)):ta=k),Va(s,o,o.pendingProps.children,x),$d(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Nr&&((k=y=ta)&&(y=FN(y,o.type,o.pendingProps,Xn),y!==null?(o.stateNode=y,gs=o,ta=vn(y.firstChild),Xn=!1,k=!0):k=!1),k||Hl(o)),Me(o),k=o.type,D=o.pendingProps,W=s!==null?s.memoizedProps:null,y=D.children,ih(k,D)?y=null:W!==null&&ih(k,W)&&(o.flags|=32),o.memoizedState!==null&&(k=nx(s,o,J4,null,null,x),x0._currentValue=k),$d(s,o),Va(s,o,y,x),o.child;case 6:return s===null&&Nr&&((s=x=ta)&&(x=MN(x,o.pendingProps,Xn),x!==null?(o.stateNode=x,gs=o,ta=null,s=!0):s=!1),s||Hl(o)),null;case 13:return K1(s,o,x);case 4:return je(o,o.stateNode.containerInfo),y=o.pendingProps,s===null?o.child=qo(o,null,y,x):Va(s,o,y,x),o.child;case 11:return H1(s,o,o.type,o.pendingProps,x);case 7:return Va(s,o,o.pendingProps,x),o.child;case 8:return Va(s,o,o.pendingProps.children,x),o.child;case 12:return Va(s,o,o.pendingProps.children,x),o.child;case 10:return y=o.pendingProps,Wi(o,o.type,y.value),Va(s,o,y.children,x),o.child;case 9:return k=o.type._context,y=o.pendingProps.children,Gl(o),k=rs(k),y=y(k),o.flags|=1,Va(s,o,y,x),o.child;case 14:return V1(s,o,o.type,o.pendingProps,x);case 15:return G1(s,o,o.type,o.pendingProps,x);case 19:return Q1(s,o,x);case 31:return y=o.pendingProps,x=o.mode,y={mode:y.mode,children:y.children},s===null?(x=Yd(y,x),x.ref=o.ref,o.child=x,x.return=o,o=x):(x=fi(s.child,y),x.ref=o.ref,o.child=x,x.return=o,o=x),o;case 22:return X1(s,o,x);case 24:return Gl(o),y=rs(Ta),s===null?(k=Kf(),k===null&&(k=Pr,D=Yf(),k.pooledCache=D,D.refCount++,D!==null&&(k.pooledCacheLanes|=x),k=D),o.memoizedState={parent:y,cache:k},Qf(o),Wi(o,Ta,k)):((s.lanes&x)!==0&&(Jf(s,o),Xc(o,null,null,x),Gc()),k=s.memoizedState,D=o.memoizedState,k.parent!==y?(k={parent:y,cache:y},o.memoizedState=k,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=k),Wi(o,Ta,y)):(y=D.cache,Wi(o,Ta,y),y!==k.cache&&$f(o,[Ta],x,!0))),Va(s,o,o.pendingProps.children,x),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function vi(s){s.flags|=4}function ep(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!oy(o)){if(o=an.current,o!==null&&((hr&4194048)===hr?qn!==null:(hr&62914560)!==hr&&(hr&536870912)===0||o!==qn))throw Hc=Zf,Bg;s.flags|=8192}}function Wd(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?On():536870912,s.lanes|=o,Ko|=o)}function Qc(s,o){if(!Nr)switch(s.tailMode){case"hidden":o=s.tail;for(var x=null;o!==null;)o.alternate!==null&&(x=o),o=o.sibling;x===null?s.tail=null:x.sibling=null;break;case"collapsed":x=s.tail;for(var y=null;x!==null;)x.alternate!==null&&(y=x),x=x.sibling;y===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:y.sibling=null}}function Kr(s){var o=s.alternate!==null&&s.alternate.child===s.child,x=0,y=0;if(o)for(var k=s.child;k!==null;)x|=k.lanes|k.childLanes,y|=k.subtreeFlags&65011712,y|=k.flags&65011712,k.return=s,k=k.sibling;else for(k=s.child;k!==null;)x|=k.lanes|k.childLanes,y|=k.subtreeFlags,y|=k.flags,k.return=s,k=k.sibling;return s.subtreeFlags|=y,s.childLanes=x,o}function oN(s,o,x){var y=o.pendingProps;switch(Vf(o),o.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kr(o),null;case 1:return Kr(o),null;case 3:return x=o.stateNode,y=null,s!==null&&(y=s.memoizedState.cache),o.memoizedState.cache!==y&&(o.flags|=2048),gi(Ta),Ue(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(s===null||s.child===null)&&(Fc(o)?vi(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Dg())),Kr(o),null;case 26:return x=o.memoizedState,s===null?(vi(o),x!==null?(Kr(o),ep(o,x)):(Kr(o),o.flags&=-16777217)):x?x!==s.memoizedState?(vi(o),Kr(o),ep(o,x)):(Kr(o),o.flags&=-16777217):(s.memoizedProps!==y&&vi(o),Kr(o),o.flags&=-16777217),null;case 27:at(o),x=Z.current;var k=o.type;if(s!==null&&o.stateNode!=null)s.memoizedProps!==y&&vi(o);else{if(!y){if(o.stateNode===null)throw Error(i(166));return Kr(o),null}s=ae.current,Fc(o)?Tg(o):(s=ey(k,y,x),o.stateNode=s,vi(o))}return Kr(o),null;case 5:if(at(o),x=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==y&&vi(o);else{if(!y){if(o.stateNode===null)throw Error(i(166));return Kr(o),null}if(s=ae.current,Fc(o))Tg(o);else{switch(k=ou(Z.current),s){case 1:s=k.createElementNS("http://www.w3.org/2000/svg",x);break;case 2:s=k.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;default:switch(x){case"svg":s=k.createElementNS("http://www.w3.org/2000/svg",x);break;case"math":s=k.createElementNS("http://www.w3.org/1998/Math/MathML",x);break;case"script":s=k.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof y.is=="string"?k.createElement("select",{is:y.is}):k.createElement("select"),y.multiple?s.multiple=!0:y.size&&(s.size=y.size);break;default:s=typeof y.is=="string"?k.createElement(x,{is:y.is}):k.createElement(x)}}s[ha]=o,s[Lr]=y;e:for(k=o.child;k!==null;){if(k.tag===5||k.tag===6)s.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===o)break e;for(;k.sibling===null;){if(k.return===null||k.return===o)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}o.stateNode=s;e:switch(Xa(s,x,y),x){case"button":case"input":case"select":case"textarea":s=!!y.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&vi(o)}}return Kr(o),o.flags&=-16777217,null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==y&&vi(o);else{if(typeof y!="string"&&o.stateNode===null)throw Error(i(166));if(s=Z.current,Fc(o)){if(s=o.stateNode,x=o.memoizedProps,y=null,k=gs,k!==null)switch(k.tag){case 27:case 5:y=k.memoizedProps}s[ha]=o,s=!!(s.nodeValue===x||y!==null&&y.suppressHydrationWarning===!0||$p(s.nodeValue,x)),s||Hl(o)}else s=ou(s).createTextNode(y),s[ha]=o,o.stateNode=s}return Kr(o),null;case 13:if(y=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(k=Fc(o),y!==null&&y.dehydrated!==null){if(s===null){if(!k)throw Error(i(318));if(k=o.memoizedState,k=k!==null?k.dehydrated:null,!k)throw Error(i(317));k[ha]=o}else Mc(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Kr(o),k=!1}else k=Dg(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=k),k=!0;if(!k)return o.flags&256?(yi(o),o):(yi(o),null)}if(yi(o),(o.flags&128)!==0)return o.lanes=x,o;if(x=y!==null,s=s!==null&&s.memoizedState!==null,x){y=o.child,k=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(k=y.alternate.memoizedState.cachePool.pool);var D=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(D=y.memoizedState.cachePool.pool),D!==k&&(y.flags|=2048)}return x!==s&&x&&(o.child.flags|=8192),Wd(o,o.updateQueue),Kr(o),null;case 4:return Ue(),s===null&&th(o.stateNode.containerInfo),Kr(o),null;case 10:return gi(o.type),Kr(o),null;case 19:if(Q(Ra),k=o.memoizedState,k===null)return Kr(o),null;if(y=(o.flags&128)!==0,D=k.rendering,D===null)if(y)Qc(k,!1);else{if(ra!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(D=Gd(s),D!==null){for(o.flags|=128,Qc(k,!1),s=D.updateQueue,o.updateQueue=s,Wd(o,s),o.subtreeFlags=0,s=x,x=o.child;x!==null;)Ag(x,s),x=x.sibling;return Y(Ra,Ra.current&1|2),o.child}s=s.sibling}k.tail!==null&&be()>Qd&&(o.flags|=128,y=!0,Qc(k,!1),o.lanes=4194304)}else{if(!y)if(s=Gd(D),s!==null){if(o.flags|=128,y=!0,s=s.updateQueue,o.updateQueue=s,Wd(o,s),Qc(k,!0),k.tail===null&&k.tailMode==="hidden"&&!D.alternate&&!Nr)return Kr(o),null}else 2*be()-k.renderingStartTime>Qd&&x!==536870912&&(o.flags|=128,y=!0,Qc(k,!1),o.lanes=4194304);k.isBackwards?(D.sibling=o.child,o.child=D):(s=k.last,s!==null?s.sibling=D:o.child=D,k.last=D)}return k.tail!==null?(o=k.tail,k.rendering=o,k.tail=o.sibling,k.renderingStartTime=be(),o.sibling=null,s=Ra.current,Y(Ra,y?s&1|2:s&1),o):(Kr(o),null);case 22:case 23:return yi(o),ax(),y=o.memoizedState!==null,s!==null?s.memoizedState!==null!==y&&(o.flags|=8192):y&&(o.flags|=8192),y?(x&536870912)!==0&&(o.flags&128)===0&&(Kr(o),o.subtreeFlags&6&&(o.flags|=8192)):Kr(o),x=o.updateQueue,x!==null&&Wd(o,x.retryQueue),x=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),y=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(y=o.memoizedState.cachePool.pool),y!==x&&(o.flags|=2048),s!==null&&Q(Xl),null;case 24:return x=null,s!==null&&(x=s.memoizedState.cache),o.memoizedState.cache!==x&&(o.flags|=2048),gi(Ta),Kr(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function cN(s,o){switch(Vf(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return gi(Ta),Ue(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return at(o),null;case 13:if(yi(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Mc()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return Q(Ra),null;case 4:return Ue(),null;case 10:return gi(o.type),null;case 22:case 23:return yi(o),ax(),s!==null&&Q(Xl),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return gi(Ta),null;case 25:return null;default:return null}}function tp(s,o){switch(Vf(o),o.tag){case 3:gi(Ta),Ue();break;case 26:case 27:case 5:at(o);break;case 4:Ue();break;case 13:yi(o);break;case 19:Q(Ra);break;case 10:gi(o.type);break;case 22:case 23:yi(o),ax(),s!==null&&Q(Xl);break;case 24:gi(Ta)}}function Jc(s,o){try{var x=o.updateQueue,y=x!==null?x.lastEffect:null;if(y!==null){var k=y.next;x=k;do{if((x.tag&s)===s){y=void 0;var D=x.create,W=x.inst;y=D(),W.destroy=y}x=x.next}while(x!==k)}}catch(xe){Br(o,o.return,xe)}}function rl(s,o,x){try{var y=o.updateQueue,k=y!==null?y.lastEffect:null;if(k!==null){var D=k.next;y=D;do{if((y.tag&s)===s){var W=y.inst,xe=W.destroy;if(xe!==void 0){W.destroy=void 0,k=o;var Te=x,Xe=xe;try{Xe()}catch(it){Br(k,Te,it)}}}y=y.next}while(y!==D)}}catch(it){Br(o,o.return,it)}}function rp(s){var o=s.updateQueue;if(o!==null){var x=s.stateNode;try{Vg(o,x)}catch(y){Br(s,s.return,y)}}}function ap(s,o,x){x.props=$l(s.type,s.memoizedProps),x.state=s.memoizedState;try{x.componentWillUnmount()}catch(y){Br(s,o,y)}}function e0(s,o){try{var x=s.ref;if(x!==null){switch(s.tag){case 26:case 27:case 5:var y=s.stateNode;break;case 30:y=s.stateNode;break;default:y=s.stateNode}typeof x=="function"?s.refCleanup=x(y):x.current=y}}catch(k){Br(s,o,k)}}function $n(s,o){var x=s.ref,y=s.refCleanup;if(x!==null)if(typeof y=="function")try{y()}catch(k){Br(s,o,k)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(k){Br(s,o,k)}else x.current=null}function sp(s){var o=s.type,x=s.memoizedProps,y=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":x.autoFocus&&y.focus();break e;case"img":x.src?y.src=x.src:x.srcSet&&(y.srcset=x.srcSet)}}catch(k){Br(s,s.return,k)}}function Rx(s,o,x){try{var y=s.stateNode;TN(y,s.type,x,o),y[Lr]=o}catch(k){Br(s,s.return,k)}}function np(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&dl(s.type)||s.tag===4}function Dx(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||np(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&dl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Ox(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(s,o):(o=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,o.appendChild(s),x=x._reactRootContainer,x!=null||o.onclick!==null||(o.onclick=lu));else if(y!==4&&(y===27&&dl(s.type)&&(x=s.stateNode,o=null),s=s.child,s!==null))for(Ox(s,o,x),s=s.sibling;s!==null;)Ox(s,o,x),s=s.sibling}function Kd(s,o,x){var y=s.tag;if(y===5||y===6)s=s.stateNode,o?x.insertBefore(s,o):x.appendChild(s);else if(y!==4&&(y===27&&dl(s.type)&&(x=s.stateNode),s=s.child,s!==null))for(Kd(s,o,x),s=s.sibling;s!==null;)Kd(s,o,x),s=s.sibling}function ip(s){var o=s.stateNode,x=s.memoizedProps;try{for(var y=s.type,k=o.attributes;k.length;)o.removeAttributeNode(k[0]);Xa(o,y,x),o[ha]=s,o[Lr]=x}catch(D){Br(s,s.return,D)}}var wi=!1,fa=!1,Ix=!1,lp=typeof WeakSet=="function"?WeakSet:Set,Ba=null;function dN(s,o){if(s=s.containerInfo,sh=hu,s=F(s),G(s)){if("selectionStart"in s)var x={start:s.selectionStart,end:s.selectionEnd};else e:{x=(x=s.ownerDocument)&&x.defaultView||window;var y=x.getSelection&&x.getSelection();if(y&&y.rangeCount!==0){x=y.anchorNode;var k=y.anchorOffset,D=y.focusNode;y=y.focusOffset;try{x.nodeType,D.nodeType}catch{x=null;break e}var W=0,xe=-1,Te=-1,Xe=0,it=0,ft=s,$e=null;t:for(;;){for(var Ze;ft!==x||k!==0&&ft.nodeType!==3||(xe=W+k),ft!==D||y!==0&&ft.nodeType!==3||(Te=W+y),ft.nodeType===3&&(W+=ft.nodeValue.length),(Ze=ft.firstChild)!==null;)$e=ft,ft=Ze;for(;;){if(ft===s)break t;if($e===x&&++Xe===k&&(xe=W),$e===D&&++it===y&&(Te=W),(Ze=ft.nextSibling)!==null)break;ft=$e,$e=ft.parentNode}ft=Ze}x=xe===-1||Te===-1?null:{start:xe,end:Te}}else x=null}x=x||{start:0,end:0}}else x=null;for(nh={focusedElem:s,selectionRange:x},hu=!1,Ba=o;Ba!==null;)if(o=Ba,s=o.child,(o.subtreeFlags&1024)!==0&&s!==null)s.return=o,Ba=s;else for(;Ba!==null;){switch(o=Ba,D=o.alternate,s=o.flags,o.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&D!==null){s=void 0,x=o,k=D.memoizedProps,D=D.memoizedState,y=x.stateNode;try{var Vt=$l(x.type,k,x.elementType===x.type);s=y.getSnapshotBeforeUpdate(Vt,D),y.__reactInternalSnapshotBeforeUpdate=s}catch(Pt){Br(x,x.return,Pt)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,x=s.nodeType,x===9)oh(s);else if(x===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":oh(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Ba=s;break}Ba=o.return}}function op(s,o,x){var y=x.flags;switch(x.tag){case 0:case 11:case 15:al(s,x),y&4&&Jc(5,x);break;case 1:if(al(s,x),y&4)if(s=x.stateNode,o===null)try{s.componentDidMount()}catch(W){Br(x,x.return,W)}else{var k=$l(x.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(k,o,s.__reactInternalSnapshotBeforeUpdate)}catch(W){Br(x,x.return,W)}}y&64&&rp(x),y&512&&e0(x,x.return);break;case 3:if(al(s,x),y&64&&(s=x.updateQueue,s!==null)){if(o=null,x.child!==null)switch(x.child.tag){case 27:case 5:o=x.child.stateNode;break;case 1:o=x.child.stateNode}try{Vg(s,o)}catch(W){Br(x,x.return,W)}}break;case 27:o===null&&y&4&&ip(x);case 26:case 5:al(s,x),o===null&&y&4&&sp(x),y&512&&e0(x,x.return);break;case 12:al(s,x);break;case 13:al(s,x),y&4&&up(s,x),y&64&&(s=x.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(x=bN.bind(null,x),BN(s,x))));break;case 22:if(y=x.memoizedState!==null||wi,!y){o=o!==null&&o.memoizedState!==null||fa,k=wi;var D=fa;wi=y,(fa=o)&&!D?sl(s,x,(x.subtreeFlags&8772)!==0):al(s,x),wi=k,fa=D}break;case 30:break;default:al(s,x)}}function cp(s){var o=s.alternate;o!==null&&(s.alternate=null,cp(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ne(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var $r=null,_s=!1;function Ni(s,o,x){for(x=x.child;x!==null;)dp(s,o,x),x=x.sibling}function dp(s,o,x){if(or&&typeof or.onCommitFiberUnmount=="function")try{or.onCommitFiberUnmount(Dt,x)}catch{}switch(x.tag){case 26:fa||$n(x,o),Ni(s,o,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:fa||$n(x,o);var y=$r,k=_s;dl(x.type)&&($r=x.stateNode,_s=!1),Ni(s,o,x),c0(x.stateNode),$r=y,_s=k;break;case 5:fa||$n(x,o);case 6:if(y=$r,k=_s,$r=null,Ni(s,o,x),$r=y,_s=k,$r!==null)if(_s)try{($r.nodeType===9?$r.body:$r.nodeName==="HTML"?$r.ownerDocument.body:$r).removeChild(x.stateNode)}catch(D){Br(x,o,D)}else try{$r.removeChild(x.stateNode)}catch(D){Br(x,o,D)}break;case 18:$r!==null&&(_s?(s=$r,Qp(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,x.stateNode),p0(s)):Qp($r,x.stateNode));break;case 4:y=$r,k=_s,$r=x.stateNode.containerInfo,_s=!0,Ni(s,o,x),$r=y,_s=k;break;case 0:case 11:case 14:case 15:fa||rl(2,x,o),fa||rl(4,x,o),Ni(s,o,x);break;case 1:fa||($n(x,o),y=x.stateNode,typeof y.componentWillUnmount=="function"&&ap(x,o,y)),Ni(s,o,x);break;case 21:Ni(s,o,x);break;case 22:fa=(y=fa)||x.memoizedState!==null,Ni(s,o,x),fa=y;break;default:Ni(s,o,x)}}function up(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{p0(s)}catch(x){Br(o,o.return,x)}}function uN(s){switch(s.tag){case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new lp),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new lp),o;default:throw Error(i(435,s.tag))}}function Fx(s,o){var x=uN(s);o.forEach(function(y){var k=vN.bind(null,s,y);x.has(y)||(x.add(y),y.then(k,k))})}function Ls(s,o){var x=o.deletions;if(x!==null)for(var y=0;y<x.length;y++){var k=x[y],D=s,W=o,xe=W;e:for(;xe!==null;){switch(xe.tag){case 27:if(dl(xe.type)){$r=xe.stateNode,_s=!1;break e}break;case 5:$r=xe.stateNode,_s=!1;break e;case 3:case 4:$r=xe.stateNode.containerInfo,_s=!0;break e}xe=xe.return}if($r===null)throw Error(i(160));dp(D,W,k),$r=null,_s=!1,D=k.alternate,D!==null&&(D.return=null),k.return=null}if(o.subtreeFlags&13878)for(o=o.child;o!==null;)fp(o,s),o=o.sibling}var bn=null;function fp(s,o){var x=s.alternate,y=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Ls(o,s),Ps(s),y&4&&(rl(3,s,s.return),Jc(3,s),rl(5,s,s.return));break;case 1:Ls(o,s),Ps(s),y&512&&(fa||x===null||$n(x,x.return)),y&64&&wi&&(s=s.updateQueue,s!==null&&(y=s.callbacks,y!==null&&(x=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=x===null?y:x.concat(y))));break;case 26:var k=bn;if(Ls(o,s),Ps(s),y&512&&(fa||x===null||$n(x,x.return)),y&4){var D=x!==null?x.memoizedState:null;if(y=s.memoizedState,x===null)if(y===null)if(s.stateNode===null){e:{y=s.type,x=s.memoizedProps,k=k.ownerDocument||k;t:switch(y){case"title":D=k.getElementsByTagName("title")[0],(!D||D[ge]||D[ha]||D.namespaceURI==="http://www.w3.org/2000/svg"||D.hasAttribute("itemprop"))&&(D=k.createElement(y),k.head.insertBefore(D,k.querySelector("head > title"))),Xa(D,y,x),D[ha]=s,Be(D),y=D;break e;case"link":var W=iy("link","href",k).get(y+(x.href||""));if(W){for(var xe=0;xe<W.length;xe++)if(D=W[xe],D.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&D.getAttribute("rel")===(x.rel==null?null:x.rel)&&D.getAttribute("title")===(x.title==null?null:x.title)&&D.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){W.splice(xe,1);break t}}D=k.createElement(y),Xa(D,y,x),k.head.appendChild(D);break;case"meta":if(W=iy("meta","content",k).get(y+(x.content||""))){for(xe=0;xe<W.length;xe++)if(D=W[xe],D.getAttribute("content")===(x.content==null?null:""+x.content)&&D.getAttribute("name")===(x.name==null?null:x.name)&&D.getAttribute("property")===(x.property==null?null:x.property)&&D.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&D.getAttribute("charset")===(x.charSet==null?null:x.charSet)){W.splice(xe,1);break t}}D=k.createElement(y),Xa(D,y,x),k.head.appendChild(D);break;default:throw Error(i(468,y))}D[ha]=s,Be(D),y=D}s.stateNode=y}else ly(k,s.type,s.stateNode);else s.stateNode=ny(k,y,s.memoizedProps);else D!==y?(D===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):D.count--,y===null?ly(k,s.type,s.stateNode):ny(k,y,s.memoizedProps)):y===null&&s.stateNode!==null&&Rx(s,s.memoizedProps,x.memoizedProps)}break;case 27:Ls(o,s),Ps(s),y&512&&(fa||x===null||$n(x,x.return)),x!==null&&y&4&&Rx(s,s.memoizedProps,x.memoizedProps);break;case 5:if(Ls(o,s),Ps(s),y&512&&(fa||x===null||$n(x,x.return)),s.flags&32){k=s.stateNode;try{_a(k,"")}catch(Ze){Br(s,s.return,Ze)}}y&4&&s.stateNode!=null&&(k=s.memoizedProps,Rx(s,k,x!==null?x.memoizedProps:k)),y&1024&&(Ix=!0);break;case 6:if(Ls(o,s),Ps(s),y&4){if(s.stateNode===null)throw Error(i(162));y=s.memoizedProps,x=s.stateNode;try{x.nodeValue=y}catch(Ze){Br(s,s.return,Ze)}}break;case 3:if(uu=null,k=bn,bn=cu(o.containerInfo),Ls(o,s),bn=k,Ps(s),y&4&&x!==null&&x.memoizedState.isDehydrated)try{p0(o.containerInfo)}catch(Ze){Br(s,s.return,Ze)}Ix&&(Ix=!1,xp(s));break;case 4:y=bn,bn=cu(s.stateNode.containerInfo),Ls(o,s),Ps(s),bn=y;break;case 12:Ls(o,s),Ps(s);break;case 13:Ls(o,s),Ps(s),s.child.flags&8192&&s.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(Ux=be()),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Fx(s,y)));break;case 22:k=s.memoizedState!==null;var Te=x!==null&&x.memoizedState!==null,Xe=wi,it=fa;if(wi=Xe||k,fa=it||Te,Ls(o,s),fa=it,wi=Xe,Ps(s),y&8192)e:for(o=s.stateNode,o._visibility=k?o._visibility&-2:o._visibility|1,k&&(x===null||Te||wi||fa||Yl(s)),x=null,o=s;;){if(o.tag===5||o.tag===26){if(x===null){Te=x=o;try{if(D=Te.stateNode,k)W=D.style,typeof W.setProperty=="function"?W.setProperty("display","none","important"):W.display="none";else{xe=Te.stateNode;var ft=Te.memoizedProps.style,$e=ft!=null&&ft.hasOwnProperty("display")?ft.display:null;xe.style.display=$e==null||typeof $e=="boolean"?"":(""+$e).trim()}}catch(Ze){Br(Te,Te.return,Ze)}}}else if(o.tag===6){if(x===null){Te=o;try{Te.stateNode.nodeValue=k?"":Te.memoizedProps}catch(Ze){Br(Te,Te.return,Ze)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;x===o&&(x=null),o=o.return}x===o&&(x=null),o.sibling.return=o.return,o=o.sibling}y&4&&(y=s.updateQueue,y!==null&&(x=y.retryQueue,x!==null&&(y.retryQueue=null,Fx(s,x))));break;case 19:Ls(o,s),Ps(s),y&4&&(y=s.updateQueue,y!==null&&(s.updateQueue=null,Fx(s,y)));break;case 30:break;case 21:break;default:Ls(o,s),Ps(s)}}function Ps(s){var o=s.flags;if(o&2){try{for(var x,y=s.return;y!==null;){if(np(y)){x=y;break}y=y.return}if(x==null)throw Error(i(160));switch(x.tag){case 27:var k=x.stateNode,D=Dx(s);Kd(s,D,k);break;case 5:var W=x.stateNode;x.flags&32&&(_a(W,""),x.flags&=-33);var xe=Dx(s);Kd(s,xe,W);break;case 3:case 4:var Te=x.stateNode.containerInfo,Xe=Dx(s);Ox(s,Xe,Te);break;default:throw Error(i(161))}}catch(it){Br(s,s.return,it)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function xp(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;xp(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function al(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)op(s,o.alternate,o),o=o.sibling}function Yl(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:rl(4,o,o.return),Yl(o);break;case 1:$n(o,o.return);var x=o.stateNode;typeof x.componentWillUnmount=="function"&&ap(o,o.return,x),Yl(o);break;case 27:c0(o.stateNode);case 26:case 5:$n(o,o.return),Yl(o);break;case 22:o.memoizedState===null&&Yl(o);break;case 30:Yl(o);break;default:Yl(o)}s=s.sibling}}function sl(s,o,x){for(x=x&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var y=o.alternate,k=s,D=o,W=D.flags;switch(D.tag){case 0:case 11:case 15:sl(k,D,x),Jc(4,D);break;case 1:if(sl(k,D,x),y=D,k=y.stateNode,typeof k.componentDidMount=="function")try{k.componentDidMount()}catch(Xe){Br(y,y.return,Xe)}if(y=D,k=y.updateQueue,k!==null){var xe=y.stateNode;try{var Te=k.shared.hiddenCallbacks;if(Te!==null)for(k.shared.hiddenCallbacks=null,k=0;k<Te.length;k++)Hg(Te[k],xe)}catch(Xe){Br(y,y.return,Xe)}}x&&W&64&&rp(D),e0(D,D.return);break;case 27:ip(D);case 26:case 5:sl(k,D,x),x&&y===null&&W&4&&sp(D),e0(D,D.return);break;case 12:sl(k,D,x);break;case 13:sl(k,D,x),x&&W&4&&up(k,D);break;case 22:D.memoizedState===null&&sl(k,D,x),e0(D,D.return);break;case 30:break;default:sl(k,D,x)}o=o.sibling}}function Mx(s,o){var x=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(x=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==x&&(s!=null&&s.refCount++,x!=null&&Pc(x))}function Bx(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Pc(s))}function Yn(s,o,x,y){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)hp(s,o,x,y),o=o.sibling}function hp(s,o,x,y){var k=o.flags;switch(o.tag){case 0:case 11:case 15:Yn(s,o,x,y),k&2048&&Jc(9,o);break;case 1:Yn(s,o,x,y);break;case 3:Yn(s,o,x,y),k&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Pc(s)));break;case 12:if(k&2048){Yn(s,o,x,y),s=o.stateNode;try{var D=o.memoizedProps,W=D.id,xe=D.onPostCommit;typeof xe=="function"&&xe(W,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(Te){Br(o,o.return,Te)}}else Yn(s,o,x,y);break;case 13:Yn(s,o,x,y);break;case 23:break;case 22:D=o.stateNode,W=o.alternate,o.memoizedState!==null?D._visibility&2?Yn(s,o,x,y):t0(s,o):D._visibility&2?Yn(s,o,x,y):(D._visibility|=2,$o(s,o,x,y,(o.subtreeFlags&10256)!==0)),k&2048&&Mx(W,o);break;case 24:Yn(s,o,x,y),k&2048&&Bx(o.alternate,o);break;default:Yn(s,o,x,y)}}function $o(s,o,x,y,k){for(k=k&&(o.subtreeFlags&10256)!==0,o=o.child;o!==null;){var D=s,W=o,xe=x,Te=y,Xe=W.flags;switch(W.tag){case 0:case 11:case 15:$o(D,W,xe,Te,k),Jc(8,W);break;case 23:break;case 22:var it=W.stateNode;W.memoizedState!==null?it._visibility&2?$o(D,W,xe,Te,k):t0(D,W):(it._visibility|=2,$o(D,W,xe,Te,k)),k&&Xe&2048&&Mx(W.alternate,W);break;case 24:$o(D,W,xe,Te,k),k&&Xe&2048&&Bx(W.alternate,W);break;default:$o(D,W,xe,Te,k)}o=o.sibling}}function t0(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var x=s,y=o,k=y.flags;switch(y.tag){case 22:t0(x,y),k&2048&&Mx(y.alternate,y);break;case 24:t0(x,y),k&2048&&Bx(y.alternate,y);break;default:t0(x,y)}o=o.sibling}}var r0=8192;function Yo(s){if(s.subtreeFlags&r0)for(s=s.child;s!==null;)mp(s),s=s.sibling}function mp(s){switch(s.tag){case 26:Yo(s),s.flags&r0&&s.memoizedState!==null&&KN(bn,s.memoizedState,s.memoizedProps);break;case 5:Yo(s);break;case 3:case 4:var o=bn;bn=cu(s.stateNode.containerInfo),Yo(s),bn=o;break;case 22:s.memoizedState===null&&(o=s.alternate,o!==null&&o.memoizedState!==null?(o=r0,r0=16777216,Yo(s),r0=o):Yo(s));break;default:Yo(s)}}function gp(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function a0(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Ba=y,yp(y,s)}gp(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)pp(s),s=s.sibling}function pp(s){switch(s.tag){case 0:case 11:case 15:a0(s),s.flags&2048&&rl(9,s,s.return);break;case 3:a0(s);break;case 12:a0(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Zd(s)):a0(s);break;default:a0(s)}}function Zd(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var x=0;x<o.length;x++){var y=o[x];Ba=y,yp(y,s)}gp(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:rl(8,o,o.return),Zd(o);break;case 22:x=o.stateNode,x._visibility&2&&(x._visibility&=-3,Zd(o));break;default:Zd(o)}s=s.sibling}}function yp(s,o){for(;Ba!==null;){var x=Ba;switch(x.tag){case 0:case 11:case 15:rl(8,x,o);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var y=x.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Pc(x.memoizedState.cache)}if(y=x.child,y!==null)y.return=x,Ba=y;else e:for(x=s;Ba!==null;){y=Ba;var k=y.sibling,D=y.return;if(cp(y),y===x){Ba=null;break e}if(k!==null){k.return=D,Ba=k;break e}Ba=D}}}var fN={getCacheForType:function(s){var o=rs(Ta),x=o.data.get(s);return x===void 0&&(x=s(),o.data.set(s,x)),x}},xN=typeof WeakMap=="function"?WeakMap:Map,Ar=0,Pr=null,cr=null,hr=0,Sr=0,zs=null,nl=!1,Wo=!1,Lx=!1,ki=0,ra=0,il=0,Wl=0,Px=0,sn=0,Ko=0,s0=null,As=null,zx=!1,Ux=0,Qd=1/0,Jd=null,ll=null,Ga=0,ol=null,Zo=null,Qo=0,Hx=0,Vx=null,bp=null,n0=0,Gx=null;function Us(){if((Ar&2)!==0&&hr!==0)return hr&-hr;if(q.T!==null){var s=Po;return s!==0?s:Zx()}return hn()}function vp(){sn===0&&(sn=(hr&536870912)===0||Nr?Is():536870912);var s=an.current;return s!==null&&(s.flags|=32),sn}function Hs(s,o,x){(s===Pr&&(Sr===2||Sr===9)||s.cancelPendingCommit!==null)&&(Jo(s,0),cl(s,hr,sn,!1)),Qr(s,x),((Ar&2)===0||s!==Pr)&&(s===Pr&&((Ar&2)===0&&(Wl|=x),ra===4&&cl(s,hr,sn,!1)),Wn(s))}function wp(s,o,x){if((Ar&6)!==0)throw Error(i(327));var y=!x&&(o&124)===0&&(o&s.expiredLanes)===0||nt(s,o),k=y?gN(s,o):$x(s,o,!0),D=y;do{if(k===0){Wo&&!y&&cl(s,o,0,!1);break}else{if(x=s.current.alternate,D&&!hN(x)){k=$x(s,o,!1),D=!1;continue}if(k===2){if(D=o,s.errorRecoveryDisabledLanes&D)var W=0;else W=s.pendingLanes&-536870913,W=W!==0?W:W&536870912?536870912:0;if(W!==0){o=W;e:{var xe=s;k=s0;var Te=xe.current.memoizedState.isDehydrated;if(Te&&(Jo(xe,W).flags|=256),W=$x(xe,W,!1),W!==2){if(Lx&&!Te){xe.errorRecoveryDisabledLanes|=D,Wl|=D,k=4;break e}D=As,As=k,D!==null&&(As===null?As=D:As.push.apply(As,D))}k=W}if(D=!1,k!==2)continue}}if(k===1){Jo(s,0),cl(s,o,0,!0);break}e:{switch(y=s,D=k,D){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:cl(y,o,sn,!nl);break e;case 2:As=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(k=Ux+300-be(),10<k)){if(cl(y,o,sn,!nl),wt(y,0,!0)!==0)break e;y.timeoutHandle=Kp(Np.bind(null,y,x,As,Jd,zx,o,sn,Wl,Ko,nl,D,2,-0,0),k);break e}Np(y,x,As,Jd,zx,o,sn,Wl,Ko,nl,D,0,-0,0)}}break}while(!0);Wn(s)}function Np(s,o,x,y,k,D,W,xe,Te,Xe,it,ft,$e,Ze){if(s.timeoutHandle=-1,ft=o.subtreeFlags,(ft&8192||(ft&16785408)===16785408)&&(f0={stylesheets:null,count:0,unsuspend:WN},mp(o),ft=ZN(),ft!==null)){s.cancelPendingCommit=ft(Sp.bind(null,s,o,D,x,y,k,W,xe,Te,it,1,$e,Ze)),cl(s,D,W,!Xe);return}Sp(s,o,D,x,y,k,W,xe,Te)}function hN(s){for(var o=s;;){var x=o.tag;if((x===0||x===11||x===15)&&o.flags&16384&&(x=o.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var y=0;y<x.length;y++){var k=x[y],D=k.getSnapshot;k=k.value;try{if(!m(D(),k))return!1}catch{return!1}}if(x=o.child,o.subtreeFlags&16384&&x!==null)x.return=o,o=x;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function cl(s,o,x,y){o&=~Px,o&=~Wl,s.suspendedLanes|=o,s.pingedLanes&=~o,y&&(s.warmLanes|=o),y=s.expirationTimes;for(var k=o;0<k;){var D=31-qt(k),W=1<<D;y[D]=-1,k&=~W}x!==0&&Al(s,x,o)}function eu(){return(Ar&6)===0?(i0(0),!1):!0}function Xx(){if(cr!==null){if(Sr===0)var s=cr.return;else s=cr,mi=Vl=null,ox(s),Xo=null,Kc=0,s=cr;for(;s!==null;)tp(s.alternate,s),s=s.return;cr=null}}function Jo(s,o){var x=s.timeoutHandle;x!==-1&&(s.timeoutHandle=-1,DN(x)),x=s.cancelPendingCommit,x!==null&&(s.cancelPendingCommit=null,x()),Xx(),Pr=s,cr=x=fi(s.current,null),hr=o,Sr=0,zs=null,nl=!1,Wo=nt(s,o),Lx=!1,Ko=sn=Px=Wl=il=ra=0,As=s0=null,zx=!1,(o&8)!==0&&(o|=o&32);var y=s.entangledLanes;if(y!==0)for(s=s.entanglements,y&=o;0<y;){var k=31-qt(y),D=1<<k;o|=s[k],y&=~D}return ki=o,Nd(),x}function kp(s,o){ir=null,q.H=Ud,o===Uc||o===Rd?(o=zg(),Sr=3):o===Bg?(o=zg(),Sr=4):Sr=o===U1?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,zs=o,cr===null&&(ra=1,qd(s,Js(o,s.current)))}function jp(){var s=q.H;return q.H=Ud,s===null?Ud:s}function Ep(){var s=q.A;return q.A=fN,s}function qx(){ra=4,nl||(hr&4194048)!==hr&&an.current!==null||(Wo=!0),(il&134217727)===0&&(Wl&134217727)===0||Pr===null||cl(Pr,hr,sn,!1)}function $x(s,o,x){var y=Ar;Ar|=2;var k=jp(),D=Ep();(Pr!==s||hr!==o)&&(Jd=null,Jo(s,o)),o=!1;var W=ra;e:do try{if(Sr!==0&&cr!==null){var xe=cr,Te=zs;switch(Sr){case 8:Xx(),W=6;break e;case 3:case 2:case 9:case 6:an.current===null&&(o=!0);var Xe=Sr;if(Sr=0,zs=null,ec(s,xe,Te,Xe),x&&Wo){W=0;break e}break;default:Xe=Sr,Sr=0,zs=null,ec(s,xe,Te,Xe)}}mN(),W=ra;break}catch(it){kp(s,it)}while(!0);return o&&s.shellSuspendCounter++,mi=Vl=null,Ar=y,q.H=k,q.A=D,cr===null&&(Pr=null,hr=0,Nd()),W}function mN(){for(;cr!==null;)Cp(cr)}function gN(s,o){var x=Ar;Ar|=2;var y=jp(),k=Ep();Pr!==s||hr!==o?(Jd=null,Qd=be()+500,Jo(s,o)):Wo=nt(s,o);e:do try{if(Sr!==0&&cr!==null){o=cr;var D=zs;t:switch(Sr){case 1:Sr=0,zs=null,ec(s,o,D,1);break;case 2:case 9:if(Lg(D)){Sr=0,zs=null,_p(o);break}o=function(){Sr!==2&&Sr!==9||Pr!==s||(Sr=7),Wn(s)},D.then(o,o);break e;case 3:Sr=7;break e;case 4:Sr=5;break e;case 7:Lg(D)?(Sr=0,zs=null,_p(o)):(Sr=0,zs=null,ec(s,o,D,7));break;case 5:var W=null;switch(cr.tag){case 26:W=cr.memoizedState;case 5:case 27:var xe=cr;if(!W||oy(W)){Sr=0,zs=null;var Te=xe.sibling;if(Te!==null)cr=Te;else{var Xe=xe.return;Xe!==null?(cr=Xe,tu(Xe)):cr=null}break t}}Sr=0,zs=null,ec(s,o,D,5);break;case 6:Sr=0,zs=null,ec(s,o,D,6);break;case 8:Xx(),ra=6;break e;default:throw Error(i(462))}}pN();break}catch(it){kp(s,it)}while(!0);return mi=Vl=null,q.H=y,q.A=k,Ar=x,cr!==null?0:(Pr=null,hr=0,Nd(),ra)}function pN(){for(;cr!==null&&!Ce();)Cp(cr)}function Cp(s){var o=J1(s.alternate,s,ki);s.memoizedProps=s.pendingProps,o===null?tu(s):cr=o}function _p(s){var o=s,x=o.alternate;switch(o.tag){case 15:case 0:o=$1(x,o,o.pendingProps,o.type,void 0,hr);break;case 11:o=$1(x,o,o.pendingProps,o.type.render,o.ref,hr);break;case 5:ox(o);default:tp(x,o),o=cr=Ag(o,ki),o=J1(x,o,ki)}s.memoizedProps=s.pendingProps,o===null?tu(s):cr=o}function ec(s,o,x,y){mi=Vl=null,ox(o),Xo=null,Kc=0;var k=o.return;try{if(iN(s,k,o,x,hr)){ra=1,qd(s,Js(x,s.current)),cr=null;return}}catch(D){if(k!==null)throw cr=k,D;ra=1,qd(s,Js(x,s.current)),cr=null;return}o.flags&32768?(Nr||y===1?s=!0:Wo||(hr&536870912)!==0?s=!1:(nl=s=!0,(y===2||y===9||y===3||y===6)&&(y=an.current,y!==null&&y.tag===13&&(y.flags|=16384))),Ap(o,s)):tu(o)}function tu(s){var o=s;do{if((o.flags&32768)!==0){Ap(o,nl);return}s=o.return;var x=oN(o.alternate,o,ki);if(x!==null){cr=x;return}if(o=o.sibling,o!==null){cr=o;return}cr=o=s}while(o!==null);ra===0&&(ra=5)}function Ap(s,o){do{var x=cN(s.alternate,s);if(x!==null){x.flags&=32767,cr=x;return}if(x=s.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!o&&(s=s.sibling,s!==null)){cr=s;return}cr=s=x}while(s!==null);ra=6,cr=null}function Sp(s,o,x,y,k,D,W,xe,Te){s.cancelPendingCommit=null;do ru();while(Ga!==0);if((Ar&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(D=o.lanes|o.childLanes,D|=Bf,Ks(s,x,D,W,xe,Te),s===Pr&&(cr=Pr=null,hr=0),Zo=o,ol=s,Qo=x,Hx=D,Vx=k,bp=y,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,wN(pe,function(){return Ip(),null})):(s.callbackNode=null,s.callbackPriority=0),y=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||y){y=q.T,q.T=null,k=ce.p,ce.p=2,W=Ar,Ar|=4;try{dN(s,o,x)}finally{Ar=W,ce.p=k,q.T=y}}Ga=1,Tp(),Rp(),Dp()}}function Tp(){if(Ga===1){Ga=0;var s=ol,o=Zo,x=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||x){x=q.T,q.T=null;var y=ce.p;ce.p=2;var k=Ar;Ar|=4;try{fp(o,s);var D=nh,W=F(s.containerInfo),xe=D.focusedElem,Te=D.selectionRange;if(W!==xe&&xe&&xe.ownerDocument&&S(xe.ownerDocument.documentElement,xe)){if(Te!==null&&G(xe)){var Xe=Te.start,it=Te.end;if(it===void 0&&(it=Xe),"selectionStart"in xe)xe.selectionStart=Xe,xe.selectionEnd=Math.min(it,xe.value.length);else{var ft=xe.ownerDocument||document,$e=ft&&ft.defaultView||window;if($e.getSelection){var Ze=$e.getSelection(),Vt=xe.textContent.length,Pt=Math.min(Te.start,Vt),Or=Te.end===void 0?Pt:Math.min(Te.end,Vt);!Ze.extend&&Pt>Or&&(W=Or,Or=Pt,Pt=W);var Le=N(xe,Pt),Ie=N(xe,Or);if(Le&&Ie&&(Ze.rangeCount!==1||Ze.anchorNode!==Le.node||Ze.anchorOffset!==Le.offset||Ze.focusNode!==Ie.node||Ze.focusOffset!==Ie.offset)){var Ve=ft.createRange();Ve.setStart(Le.node,Le.offset),Ze.removeAllRanges(),Pt>Or?(Ze.addRange(Ve),Ze.extend(Ie.node,Ie.offset)):(Ve.setEnd(Ie.node,Ie.offset),Ze.addRange(Ve))}}}}for(ft=[],Ze=xe;Ze=Ze.parentNode;)Ze.nodeType===1&&ft.push({element:Ze,left:Ze.scrollLeft,top:Ze.scrollTop});for(typeof xe.focus=="function"&&xe.focus(),xe=0;xe<ft.length;xe++){var ct=ft[xe];ct.element.scrollLeft=ct.left,ct.element.scrollTop=ct.top}}hu=!!sh,nh=sh=null}finally{Ar=k,ce.p=y,q.T=x}}s.current=o,Ga=2}}function Rp(){if(Ga===2){Ga=0;var s=ol,o=Zo,x=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||x){x=q.T,q.T=null;var y=ce.p;ce.p=2;var k=Ar;Ar|=4;try{op(s,o.alternate,o)}finally{Ar=k,ce.p=y,q.T=x}}Ga=3}}function Dp(){if(Ga===4||Ga===3){Ga=0,Je();var s=ol,o=Zo,x=Qo,y=bp;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Ga=5:(Ga=0,Zo=ol=null,Op(s,s.pendingLanes));var k=s.pendingLanes;if(k===0&&(ll=null),Jr(x),o=o.stateNode,or&&typeof or.onCommitFiberRoot=="function")try{or.onCommitFiberRoot(Dt,o,void 0,(o.current.flags&128)===128)}catch{}if(y!==null){o=q.T,k=ce.p,ce.p=2,q.T=null;try{for(var D=s.onRecoverableError,W=0;W<y.length;W++){var xe=y[W];D(xe.value,{componentStack:xe.stack})}}finally{q.T=o,ce.p=k}}(Qo&3)!==0&&ru(),Wn(s),k=s.pendingLanes,(x&4194090)!==0&&(k&42)!==0?s===Gx?n0++:(n0=0,Gx=s):n0=0,i0(0)}}function Op(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Pc(o)))}function ru(s){return Tp(),Rp(),Dp(),Ip()}function Ip(){if(Ga!==5)return!1;var s=ol,o=Hx;Hx=0;var x=Jr(Qo),y=q.T,k=ce.p;try{ce.p=32>x?32:x,q.T=null,x=Vx,Vx=null;var D=ol,W=Qo;if(Ga=0,Zo=ol=null,Qo=0,(Ar&6)!==0)throw Error(i(331));var xe=Ar;if(Ar|=4,pp(D.current),hp(D,D.current,W,x),Ar=xe,i0(0,!1),or&&typeof or.onPostCommitFiberRoot=="function")try{or.onPostCommitFiberRoot(Dt,D)}catch{}return!0}finally{ce.p=k,q.T=y,Op(s,o)}}function Fp(s,o,x){o=Js(x,o),o=Nx(s.stateNode,o,2),s=Qi(s,o,2),s!==null&&(Qr(s,2),Wn(s))}function Br(s,o,x){if(s.tag===3)Fp(s,s,x);else for(;o!==null;){if(o.tag===3){Fp(o,s,x);break}else if(o.tag===1){var y=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(ll===null||!ll.has(y))){s=Js(x,s),x=P1(2),y=Qi(o,x,2),y!==null&&(z1(x,y,o,s),Qr(y,2),Wn(y));break}}o=o.return}}function Yx(s,o,x){var y=s.pingCache;if(y===null){y=s.pingCache=new xN;var k=new Set;y.set(o,k)}else k=y.get(o),k===void 0&&(k=new Set,y.set(o,k));k.has(x)||(Lx=!0,k.add(x),s=yN.bind(null,s,o,x),o.then(s,s))}function yN(s,o,x){var y=s.pingCache;y!==null&&y.delete(o),s.pingedLanes|=s.suspendedLanes&x,s.warmLanes&=~x,Pr===s&&(hr&x)===x&&(ra===4||ra===3&&(hr&62914560)===hr&&300>be()-Ux?(Ar&2)===0&&Jo(s,0):Px|=x,Ko===hr&&(Ko=0)),Wn(s)}function Mp(s,o){o===0&&(o=On()),s=Fo(s,o),s!==null&&(Qr(s,o),Wn(s))}function bN(s){var o=s.memoizedState,x=0;o!==null&&(x=o.retryLane),Mp(s,x)}function vN(s,o){var x=0;switch(s.tag){case 13:var y=s.stateNode,k=s.memoizedState;k!==null&&(x=k.retryLane);break;case 19:y=s.stateNode;break;case 22:y=s.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(o),Mp(s,x)}function wN(s,o){return Ae(s,o)}var au=null,tc=null,Wx=!1,su=!1,Kx=!1,Kl=0;function Wn(s){s!==tc&&s.next===null&&(tc===null?au=tc=s:tc=tc.next=s),su=!0,Wx||(Wx=!0,kN())}function i0(s,o){if(!Kx&&su){Kx=!0;do for(var x=!1,y=au;y!==null;){if(s!==0){var k=y.pendingLanes;if(k===0)var D=0;else{var W=y.suspendedLanes,xe=y.pingedLanes;D=(1<<31-qt(42|s)+1)-1,D&=k&~(W&~xe),D=D&201326741?D&201326741|1:D?D|2:0}D!==0&&(x=!0,zp(y,D))}else D=hr,D=wt(y,y===Pr?D:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(D&3)===0||nt(y,D)||(x=!0,zp(y,D));y=y.next}while(x);Kx=!1}}function NN(){Bp()}function Bp(){su=Wx=!1;var s=0;Kl!==0&&(RN()&&(s=Kl),Kl=0);for(var o=be(),x=null,y=au;y!==null;){var k=y.next,D=Lp(y,o);D===0?(y.next=null,x===null?au=k:x.next=k,k===null&&(tc=x)):(x=y,(s!==0||(D&3)!==0)&&(su=!0)),y=k}i0(s)}function Lp(s,o){for(var x=s.suspendedLanes,y=s.pingedLanes,k=s.expirationTimes,D=s.pendingLanes&-62914561;0<D;){var W=31-qt(D),xe=1<<W,Te=k[W];Te===-1?((xe&x)===0||(xe&y)!==0)&&(k[W]=kt(xe,o)):Te<=o&&(s.expiredLanes|=xe),D&=~xe}if(o=Pr,x=hr,x=wt(s,s===o?x:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y=s.callbackNode,x===0||s===o&&(Sr===2||Sr===9)||s.cancelPendingCommit!==null)return y!==null&&y!==null&&Fe(y),s.callbackNode=null,s.callbackPriority=0;if((x&3)===0||nt(s,x)){if(o=x&-x,o===s.callbackPriority)return o;switch(y!==null&&Fe(y),Jr(x)){case 2:case 8:x=Pe;break;case 32:x=pe;break;case 268435456:x=st;break;default:x=pe}return y=Pp.bind(null,s),x=Ae(x,y),s.callbackPriority=o,s.callbackNode=x,o}return y!==null&&y!==null&&Fe(y),s.callbackPriority=2,s.callbackNode=null,2}function Pp(s,o){if(Ga!==0&&Ga!==5)return s.callbackNode=null,s.callbackPriority=0,null;var x=s.callbackNode;if(ru()&&s.callbackNode!==x)return null;var y=hr;return y=wt(s,s===Pr?y:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),y===0?null:(wp(s,y,o),Lp(s,be()),s.callbackNode!=null&&s.callbackNode===x?Pp.bind(null,s):null)}function zp(s,o){if(ru())return null;wp(s,o,!0)}function kN(){ON(function(){(Ar&6)!==0?Ae(me,NN):Bp()})}function Zx(){return Kl===0&&(Kl=Is()),Kl}function Up(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Co(""+s)}function Hp(s,o){var x=o.ownerDocument.createElement("input");return x.name=o.name,x.value=o.value,s.id&&x.setAttribute("form",s.id),o.parentNode.insertBefore(x,o),s=new FormData(s),x.parentNode.removeChild(x),s}function jN(s,o,x,y,k){if(o==="submit"&&x&&x.stateNode===k){var D=Up((k[Lr]||null).action),W=y.submitter;W&&(o=(o=W[Lr]||null)?Up(o.formAction):W.getAttribute("formAction"),o!==null&&(D=o,W=null));var xe=new Un("action","action",null,y,k);s.push({event:xe,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Kl!==0){var Te=W?Hp(k,W):new FormData(k);px(x,{pending:!0,data:Te,method:k.method,action:D},null,Te)}}else typeof D=="function"&&(xe.preventDefault(),Te=W?Hp(k,W):new FormData(k),px(x,{pending:!0,data:Te,method:k.method,action:D},D,Te))},currentTarget:k}]})}}for(var Qx=0;Qx<Gn.length;Qx++){var Jx=Gn[Qx],EN=Jx.toLowerCase(),CN=Jx[0].toUpperCase()+Jx.slice(1);Ms(EN,"on"+CN)}Ms(Yt,"onAnimationEnd"),Ms(Ha,"onAnimationIteration"),Ms(Es,"onAnimationStart"),Ms("dblclick","onDoubleClick"),Ms("focusin","onFocus"),Ms("focusout","onBlur"),Ms(es,"onTransitionRun"),Ms(_r,"onTransitionStart"),Ms(Sa,"onTransitionCancel"),Ms(ts,"onTransitionEnd"),ht("onMouseEnter",["mouseout","mouseover"]),ht("onMouseLeave",["mouseout","mouseover"]),ht("onPointerEnter",["pointerout","pointerover"]),ht("onPointerLeave",["pointerout","pointerover"]),ut("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ut("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ut("onBeforeInput",["compositionend","keypress","textInput","paste"]),ut("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ut("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ut("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var l0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_N=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(l0));function Vp(s,o){o=(o&4)!==0;for(var x=0;x<s.length;x++){var y=s[x],k=y.event;y=y.listeners;e:{var D=void 0;if(o)for(var W=y.length-1;0<=W;W--){var xe=y[W],Te=xe.instance,Xe=xe.currentTarget;if(xe=xe.listener,Te!==D&&k.isPropagationStopped())break e;D=xe,k.currentTarget=Xe;try{D(k)}catch(it){Xd(it)}k.currentTarget=null,D=Te}else for(W=0;W<y.length;W++){if(xe=y[W],Te=xe.instance,Xe=xe.currentTarget,xe=xe.listener,Te!==D&&k.isPropagationStopped())break e;D=xe,k.currentTarget=Xe;try{D(k)}catch(it){Xd(it)}k.currentTarget=null,D=Te}}}}function dr(s,o){var x=o[ma];x===void 0&&(x=o[ma]=new Set);var y=s+"__bubble";x.has(y)||(Gp(o,s,2,!1),x.add(y))}function eh(s,o,x){var y=0;o&&(y|=4),Gp(x,s,y,o)}var nu="_reactListening"+Math.random().toString(36).slice(2);function th(s){if(!s[nu]){s[nu]=!0,qe.forEach(function(x){x!=="selectionchange"&&(_N.has(x)||eh(x,!1,s),eh(x,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[nu]||(o[nu]=!0,eh("selectionchange",!1,o))}}function Gp(s,o,x,y){switch(hy(o)){case 2:var k=ek;break;case 8:k=tk;break;default:k=mh}x=k.bind(null,o,x,s),k=void 0,!Wt||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(k=!0),y?k!==void 0?s.addEventListener(o,x,{capture:!0,passive:k}):s.addEventListener(o,x,!0):k!==void 0?s.addEventListener(o,x,{passive:k}):s.addEventListener(o,x,!1)}function rh(s,o,x,y,k){var D=y;if((o&1)===0&&(o&2)===0&&y!==null)e:for(;;){if(y===null)return;var W=y.tag;if(W===3||W===4){var xe=y.stateNode.containerInfo;if(xe===k)break;if(W===4)for(W=y.return;W!==null;){var Te=W.tag;if((Te===3||Te===4)&&W.stateNode.containerInfo===k)return;W=W.return}for(;xe!==null;){if(W=ke(xe),W===null)return;if(Te=W.tag,Te===5||Te===6||Te===26||Te===27){y=D=W;continue e}xe=xe.parentNode}}y=y.return}gn(function(){var Xe=D,it=Li(x),ft=[];e:{var $e=ui.get(s);if($e!==void 0){var Ze=Un,Vt=s;switch(s){case"keypress":if(_o(x)===0)break e;case"keydown":case"keyup":Ze=Sc;break;case"focusin":Vt="focus",Ze=Hi;break;case"focusout":Vt="blur",Ze=Hi;break;case"beforeblur":case"afterblur":Ze=Hi;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ze=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ze=Er;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ze=Cr;break;case Yt:case Ha:case Es:Ze=Sf;break;case ts:Ze=Of;break;case"scroll":case"scrollend":Ze=Qa;break;case"wheel":Ze=ci;break;case"copy":case"cut":case"paste":Ze=ar;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ze=Il;break;case"toggle":case"beforetoggle":Ze=If}var Pt=(o&4)!==0,Or=!Pt&&(s==="scroll"||s==="scrollend"),Le=Pt?$e!==null?$e+"Capture":null:$e;Pt=[];for(var Ie=Xe,Ve;Ie!==null;){var ct=Ie;if(Ve=ct.stateNode,ct=ct.tag,ct!==5&&ct!==26&&ct!==27||Ve===null||Le===null||(ct=Mt(Ie,Le),ct!=null&&Pt.push(o0(Ie,ct,Ve))),Or)break;Ie=Ie.return}0<Pt.length&&($e=new Ze($e,Vt,null,x,it),ft.push({event:$e,listeners:Pt}))}}if((o&7)===0){e:{if($e=s==="mouseover"||s==="pointerover",Ze=s==="mouseout"||s==="pointerout",$e&&x!==Sl&&(Vt=x.relatedTarget||x.fromElement)&&(ke(Vt)||Vt[Zs]))break e;if((Ze||$e)&&($e=it.window===it?it:($e=it.ownerDocument)?$e.defaultView||$e.parentWindow:window,Ze?(Vt=x.relatedTarget||x.toElement,Ze=Xe,Vt=Vt?ke(Vt):null,Vt!==null&&(Or=d(Vt),Pt=Vt.tag,Vt!==Or||Pt!==5&&Pt!==27&&Pt!==6)&&(Vt=null)):(Ze=null,Vt=Xe),Ze!==Vt)){if(Pt=gd,ct="onMouseLeave",Le="onMouseEnter",Ie="mouse",(s==="pointerout"||s==="pointerover")&&(Pt=Il,ct="onPointerLeave",Le="onPointerEnter",Ie="pointer"),Or=Ze==null?$e:Ge(Ze),Ve=Vt==null?$e:Ge(Vt),$e=new Pt(ct,Ie+"leave",Ze,x,it),$e.target=Or,$e.relatedTarget=Ve,ct=null,ke(it)===Xe&&(Pt=new Pt(Le,Ie+"enter",Vt,x,it),Pt.target=Ve,Pt.relatedTarget=Or,ct=Pt),Or=ct,Ze&&Vt)t:{for(Pt=Ze,Le=Vt,Ie=0,Ve=Pt;Ve;Ve=rc(Ve))Ie++;for(Ve=0,ct=Le;ct;ct=rc(ct))Ve++;for(;0<Ie-Ve;)Pt=rc(Pt),Ie--;for(;0<Ve-Ie;)Le=rc(Le),Ve--;for(;Ie--;){if(Pt===Le||Le!==null&&Pt===Le.alternate)break t;Pt=rc(Pt),Le=rc(Le)}Pt=null}else Pt=null;Ze!==null&&Xp(ft,$e,Ze,Pt,!1),Vt!==null&&Or!==null&&Xp(ft,Or,Vt,Pt,!0)}}e:{if($e=Xe?Ge(Xe):window,Ze=$e.nodeName&&$e.nodeName.toLowerCase(),Ze==="select"||Ze==="input"&&$e.type==="file")var _t=vd;else if(Bl($e))if(Oc)_t=c;else{_t=J;var lr=Oo}else Ze=$e.nodeName,!Ze||Ze.toLowerCase()!=="input"||$e.type!=="checkbox"&&$e.type!=="radio"?Xe&&Ot(Xe.elementType)&&(_t=vd):_t=n;if(_t&&(_t=_t(s,Xe))){ms(ft,_t,x,it);break e}lr&&lr(s,$e,Xe),s==="focusout"&&Xe&&$e.type==="number"&&Xe.memoizedProps.value!=null&&He($e,"number",$e.value)}switch(lr=Xe?Ge(Xe):window,s){case"focusin":(Bl(lr)||lr.contentEditable==="true")&&(ue=lr,Ee=Xe,De=null);break;case"focusout":De=Ee=ue=null;break;case"mousedown":Oe=!0;break;case"contextmenu":case"mouseup":case"dragend":Oe=!1,ze(ft,x,it);break;case"selectionchange":if(ee)break;case"keydown":case"keyup":ze(ft,x,it)}var It;if(Fl)e:{switch(s){case"compositionstart":var zt="onCompositionStart";break e;case"compositionend":zt="onCompositionEnd";break e;case"compositionupdate":zt="onCompositionUpdate";break e}zt=void 0}else Xi?di(s,x)&&(zt="onCompositionEnd"):s==="keydown"&&x.keyCode===229&&(zt="onCompositionStart");zt&&(Rc&&x.locale!=="ko"&&(Xi||zt!=="onCompositionStart"?zt==="onCompositionEnd"&&Xi&&(It=Ln()):(Bn=it,Tl="value"in Bn?Bn.value:Bn.textContent,Xi=!0)),lr=iu(Xe,zt),0<lr.length&&(zt=new Dl(zt,s,null,x,it),ft.push({event:zt,listeners:lr}),It?zt.data=It:(It=Ro(x),It!==null&&(zt.data=It)))),(It=Tc?Ml(s,x):Ff(s,x))&&(zt=iu(Xe,"onBeforeInput"),0<zt.length&&(lr=new Dl("onBeforeInput","beforeinput",null,x,it),ft.push({event:lr,listeners:zt}),lr.data=It)),jN(ft,s,Xe,x,it)}Vp(ft,o)})}function o0(s,o,x){return{instance:s,listener:o,currentTarget:x}}function iu(s,o){for(var x=o+"Capture",y=[];s!==null;){var k=s,D=k.stateNode;if(k=k.tag,k!==5&&k!==26&&k!==27||D===null||(k=Mt(s,x),k!=null&&y.unshift(o0(s,k,D)),k=Mt(s,o),k!=null&&y.push(o0(s,k,D))),s.tag===3)return y;s=s.return}return[]}function rc(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Xp(s,o,x,y,k){for(var D=o._reactName,W=[];x!==null&&x!==y;){var xe=x,Te=xe.alternate,Xe=xe.stateNode;if(xe=xe.tag,Te!==null&&Te===y)break;xe!==5&&xe!==26&&xe!==27||Xe===null||(Te=Xe,k?(Xe=Mt(x,D),Xe!=null&&W.unshift(o0(x,Xe,Te))):k||(Xe=Mt(x,D),Xe!=null&&W.push(o0(x,Xe,Te)))),x=x.return}W.length!==0&&s.push({event:o,listeners:W})}var AN=/\r\n?/g,SN=/\u0000|\uFFFD/g;function qp(s){return(typeof s=="string"?s:""+s).replace(AN,`
`).replace(SN,"")}function $p(s,o){return o=qp(o),qp(s)===o}function lu(){}function Dr(s,o,x,y,k,D){switch(x){case"children":typeof y=="string"?o==="body"||o==="textarea"&&y===""||_a(s,y):(typeof y=="number"||typeof y=="bigint")&&o!=="body"&&_a(s,""+y);break;case"className":kr(s,"class",y);break;case"tabIndex":kr(s,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":kr(s,x,y);break;case"style":hs(s,y,D);break;case"data":if(o!=="object"){kr(s,"data",y);break}case"src":case"href":if(y===""&&(o!=="a"||x!=="href")){s.removeAttribute(x);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=Co(""+y),s.setAttribute(x,y);break;case"action":case"formAction":if(typeof y=="function"){s.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof D=="function"&&(x==="formAction"?(o!=="input"&&Dr(s,o,"name",k.name,k,null),Dr(s,o,"formEncType",k.formEncType,k,null),Dr(s,o,"formMethod",k.formMethod,k,null),Dr(s,o,"formTarget",k.formTarget,k,null)):(Dr(s,o,"encType",k.encType,k,null),Dr(s,o,"method",k.method,k,null),Dr(s,o,"target",k.target,k,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){s.removeAttribute(x);break}y=Co(""+y),s.setAttribute(x,y);break;case"onClick":y!=null&&(s.onclick=lu);break;case"onScroll":y!=null&&dr("scroll",s);break;case"onScrollEnd":y!=null&&dr("scrollend",s);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(x=y.__html,x!=null){if(k.children!=null)throw Error(i(60));s.innerHTML=x}}break;case"multiple":s.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":s.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){s.removeAttribute("xlink:href");break}x=Co(""+y),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""+y):s.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,""):s.removeAttribute(x);break;case"capture":case"download":y===!0?s.setAttribute(x,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?s.setAttribute(x,y):s.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?s.setAttribute(x,y):s.removeAttribute(x);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?s.removeAttribute(x):s.setAttribute(x,y);break;case"popover":dr("beforetoggle",s),dr("toggle",s),tt(s,"popover",y);break;case"xlinkActuate":Ht(s,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":Ht(s,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":Ht(s,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":Ht(s,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":Ht(s,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":Ht(s,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":Ht(s,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":Ht(s,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":Ht(s,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":tt(s,"is",y);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=Vr.get(x)||x,tt(s,x,y))}}function ah(s,o,x,y,k,D){switch(x){case"style":hs(s,y,D);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(x=y.__html,x!=null){if(k.children!=null)throw Error(i(60));s.innerHTML=x}}break;case"children":typeof y=="string"?_a(s,y):(typeof y=="number"||typeof y=="bigint")&&_a(s,""+y);break;case"onScroll":y!=null&&dr("scroll",s);break;case"onScrollEnd":y!=null&&dr("scrollend",s);break;case"onClick":y!=null&&(s.onclick=lu);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!We.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(k=x.endsWith("Capture"),o=x.slice(2,k?x.length-7:void 0),D=s[Lr]||null,D=D!=null?D[x]:null,typeof D=="function"&&s.removeEventListener(o,D,k),typeof y=="function")){typeof D!="function"&&D!==null&&(x in s?s[x]=null:s.hasAttribute(x)&&s.removeAttribute(x)),s.addEventListener(o,y,k);break e}x in s?s[x]=y:y===!0?s.setAttribute(x,""):tt(s,x,y)}}}function Xa(s,o,x){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dr("error",s),dr("load",s);var y=!1,k=!1,D;for(D in x)if(x.hasOwnProperty(D)){var W=x[D];if(W!=null)switch(D){case"src":y=!0;break;case"srcSet":k=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Dr(s,o,D,W,x,null)}}k&&Dr(s,o,"srcSet",x.srcSet,x,null),y&&Dr(s,o,"src",x.src,x,null);return;case"input":dr("invalid",s);var xe=D=W=k=null,Te=null,Xe=null;for(y in x)if(x.hasOwnProperty(y)){var it=x[y];if(it!=null)switch(y){case"name":k=it;break;case"type":W=it;break;case"checked":Te=it;break;case"defaultChecked":Xe=it;break;case"value":D=it;break;case"defaultValue":xe=it;break;case"children":case"dangerouslySetInnerHTML":if(it!=null)throw Error(i(137,o));break;default:Dr(s,o,y,it,x,null)}}Ca(s,D,xe,Te,Xe,W,k,!1),jo(s);return;case"select":dr("invalid",s),y=W=D=null;for(k in x)if(x.hasOwnProperty(k)&&(xe=x[k],xe!=null))switch(k){case"value":D=xe;break;case"defaultValue":W=xe;break;case"multiple":y=xe;default:Dr(s,o,k,xe,x,null)}o=D,x=W,s.multiple=!!y,o!=null?ve(s,!!y,o,!1):x!=null&&ve(s,!!y,x,!0);return;case"textarea":dr("invalid",s),D=k=y=null;for(W in x)if(x.hasOwnProperty(W)&&(xe=x[W],xe!=null))switch(W){case"value":y=xe;break;case"defaultValue":k=xe;break;case"children":D=xe;break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(91));break;default:Dr(s,o,W,xe,x,null)}oa(s,y,k,D),jo(s);return;case"option":for(Te in x)if(x.hasOwnProperty(Te)&&(y=x[Te],y!=null))switch(Te){case"selected":s.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Dr(s,o,Te,y,x,null)}return;case"dialog":dr("beforetoggle",s),dr("toggle",s),dr("cancel",s),dr("close",s);break;case"iframe":case"object":dr("load",s);break;case"video":case"audio":for(y=0;y<l0.length;y++)dr(l0[y],s);break;case"image":dr("error",s),dr("load",s);break;case"details":dr("toggle",s);break;case"embed":case"source":case"link":dr("error",s),dr("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Xe in x)if(x.hasOwnProperty(Xe)&&(y=x[Xe],y!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Dr(s,o,Xe,y,x,null)}return;default:if(Ot(o)){for(it in x)x.hasOwnProperty(it)&&(y=x[it],y!==void 0&&ah(s,o,it,y,x,void 0));return}}for(xe in x)x.hasOwnProperty(xe)&&(y=x[xe],y!=null&&Dr(s,o,xe,y,x,null))}function TN(s,o,x,y){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var k=null,D=null,W=null,xe=null,Te=null,Xe=null,it=null;for(Ze in x){var ft=x[Ze];if(x.hasOwnProperty(Ze)&&ft!=null)switch(Ze){case"checked":break;case"value":break;case"defaultValue":Te=ft;default:y.hasOwnProperty(Ze)||Dr(s,o,Ze,null,y,ft)}}for(var $e in y){var Ze=y[$e];if(ft=x[$e],y.hasOwnProperty($e)&&(Ze!=null||ft!=null))switch($e){case"type":D=Ze;break;case"name":k=Ze;break;case"checked":Xe=Ze;break;case"defaultChecked":it=Ze;break;case"value":W=Ze;break;case"defaultValue":xe=Ze;break;case"children":case"dangerouslySetInnerHTML":if(Ze!=null)throw Error(i(137,o));break;default:Ze!==ft&&Dr(s,o,$e,Ze,y,ft)}}jr(s,W,xe,Te,Xe,it,D,k);return;case"select":Ze=W=xe=$e=null;for(D in x)if(Te=x[D],x.hasOwnProperty(D)&&Te!=null)switch(D){case"value":break;case"multiple":Ze=Te;default:y.hasOwnProperty(D)||Dr(s,o,D,null,y,Te)}for(k in y)if(D=y[k],Te=x[k],y.hasOwnProperty(k)&&(D!=null||Te!=null))switch(k){case"value":$e=D;break;case"defaultValue":xe=D;break;case"multiple":W=D;default:D!==Te&&Dr(s,o,k,D,y,Te)}o=xe,x=W,y=Ze,$e!=null?ve(s,!!x,$e,!1):!!y!=!!x&&(o!=null?ve(s,!!x,o,!0):ve(s,!!x,x?[]:"",!1));return;case"textarea":Ze=$e=null;for(xe in x)if(k=x[xe],x.hasOwnProperty(xe)&&k!=null&&!y.hasOwnProperty(xe))switch(xe){case"value":break;case"children":break;default:Dr(s,o,xe,null,y,k)}for(W in y)if(k=y[W],D=x[W],y.hasOwnProperty(W)&&(k!=null||D!=null))switch(W){case"value":$e=k;break;case"defaultValue":Ze=k;break;case"children":break;case"dangerouslySetInnerHTML":if(k!=null)throw Error(i(91));break;default:k!==D&&Dr(s,o,W,k,y,D)}Rt(s,$e,Ze);return;case"option":for(var Vt in x)if($e=x[Vt],x.hasOwnProperty(Vt)&&$e!=null&&!y.hasOwnProperty(Vt))switch(Vt){case"selected":s.selected=!1;break;default:Dr(s,o,Vt,null,y,$e)}for(Te in y)if($e=y[Te],Ze=x[Te],y.hasOwnProperty(Te)&&$e!==Ze&&($e!=null||Ze!=null))switch(Te){case"selected":s.selected=$e&&typeof $e!="function"&&typeof $e!="symbol";break;default:Dr(s,o,Te,$e,y,Ze)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pt in x)$e=x[Pt],x.hasOwnProperty(Pt)&&$e!=null&&!y.hasOwnProperty(Pt)&&Dr(s,o,Pt,null,y,$e);for(Xe in y)if($e=y[Xe],Ze=x[Xe],y.hasOwnProperty(Xe)&&$e!==Ze&&($e!=null||Ze!=null))switch(Xe){case"children":case"dangerouslySetInnerHTML":if($e!=null)throw Error(i(137,o));break;default:Dr(s,o,Xe,$e,y,Ze)}return;default:if(Ot(o)){for(var Or in x)$e=x[Or],x.hasOwnProperty(Or)&&$e!==void 0&&!y.hasOwnProperty(Or)&&ah(s,o,Or,void 0,y,$e);for(it in y)$e=y[it],Ze=x[it],!y.hasOwnProperty(it)||$e===Ze||$e===void 0&&Ze===void 0||ah(s,o,it,$e,y,Ze);return}}for(var Le in x)$e=x[Le],x.hasOwnProperty(Le)&&$e!=null&&!y.hasOwnProperty(Le)&&Dr(s,o,Le,null,y,$e);for(ft in y)$e=y[ft],Ze=x[ft],!y.hasOwnProperty(ft)||$e===Ze||$e==null&&Ze==null||Dr(s,o,ft,$e,y,Ze)}var sh=null,nh=null;function ou(s){return s.nodeType===9?s:s.ownerDocument}function Yp(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Wp(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function ih(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var lh=null;function RN(){var s=window.event;return s&&s.type==="popstate"?s===lh?!1:(lh=s,!0):(lh=null,!1)}var Kp=typeof setTimeout=="function"?setTimeout:void 0,DN=typeof clearTimeout=="function"?clearTimeout:void 0,Zp=typeof Promise=="function"?Promise:void 0,ON=typeof queueMicrotask=="function"?queueMicrotask:typeof Zp<"u"?function(s){return Zp.resolve(null).then(s).catch(IN)}:Kp;function IN(s){setTimeout(function(){throw s})}function dl(s){return s==="head"}function Qp(s,o){var x=o,y=0,k=0;do{var D=x.nextSibling;if(s.removeChild(x),D&&D.nodeType===8)if(x=D.data,x==="/$"){if(0<y&&8>y){x=y;var W=s.ownerDocument;if(x&1&&c0(W.documentElement),x&2&&c0(W.body),x&4)for(x=W.head,c0(x),W=x.firstChild;W;){var xe=W.nextSibling,Te=W.nodeName;W[ge]||Te==="SCRIPT"||Te==="STYLE"||Te==="LINK"&&W.rel.toLowerCase()==="stylesheet"||x.removeChild(W),W=xe}}if(k===0){s.removeChild(D),p0(o);return}k--}else x==="$"||x==="$?"||x==="$!"?k++:y=x.charCodeAt(0)-48;else y=0;x=D}while(x);p0(o)}function oh(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var x=o;switch(o=o.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":oh(x),Ne(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}s.removeChild(x)}}function FN(s,o,x,y){for(;s.nodeType===1;){var k=x;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!y&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(y){if(!s[ge])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(D=s.getAttribute("rel"),D==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(D!==k.rel||s.getAttribute("href")!==(k.href==null||k.href===""?null:k.href)||s.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin)||s.getAttribute("title")!==(k.title==null?null:k.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(D=s.getAttribute("src"),(D!==(k.src==null?null:k.src)||s.getAttribute("type")!==(k.type==null?null:k.type)||s.getAttribute("crossorigin")!==(k.crossOrigin==null?null:k.crossOrigin))&&D&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var D=k.name==null?null:""+k.name;if(k.type==="hidden"&&s.getAttribute("name")===D)return s}else return s;if(s=vn(s.nextSibling),s===null)break}return null}function MN(s,o,x){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!x||(s=vn(s.nextSibling),s===null))return null;return s}function ch(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function BN(s,o){var x=s.ownerDocument;if(s.data!=="$?"||x.readyState==="complete")o();else{var y=function(){o(),x.removeEventListener("DOMContentLoaded",y)};x.addEventListener("DOMContentLoaded",y),s._reactRetry=y}}function vn(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="F!"||o==="F")break;if(o==="/$")return null}}return s}var dh=null;function Jp(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var x=s.data;if(x==="$"||x==="$!"||x==="$?"){if(o===0)return s;o--}else x==="/$"&&o++}s=s.previousSibling}return null}function ey(s,o,x){switch(o=ou(x),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function c0(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Ne(s)}var nn=new Map,ty=new Set;function cu(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var ji=ce.d;ce.d={f:LN,r:PN,D:zN,C:UN,L:HN,m:VN,X:XN,S:GN,M:qN};function LN(){var s=ji.f(),o=eu();return s||o}function PN(s){var o=_e(s);o!==null&&o.tag===5&&o.type==="form"?w1(o):ji.r(s)}var ac=typeof document>"u"?null:document;function ry(s,o,x){var y=ac;if(y&&typeof o=="string"&&o){var k=Ea(o);k='link[rel="'+s+'"][href="'+k+'"]',typeof x=="string"&&(k+='[crossorigin="'+x+'"]'),ty.has(k)||(ty.add(k),s={rel:s,crossOrigin:x,href:o},y.querySelector(k)===null&&(o=y.createElement("link"),Xa(o,"link",s),Be(o),y.head.appendChild(o)))}}function zN(s){ji.D(s),ry("dns-prefetch",s,null)}function UN(s,o){ji.C(s,o),ry("preconnect",s,o)}function HN(s,o,x){ji.L(s,o,x);var y=ac;if(y&&s&&o){var k='link[rel="preload"][as="'+Ea(o)+'"]';o==="image"&&x&&x.imageSrcSet?(k+='[imagesrcset="'+Ea(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(k+='[imagesizes="'+Ea(x.imageSizes)+'"]')):k+='[href="'+Ea(s)+'"]';var D=k;switch(o){case"style":D=sc(s);break;case"script":D=nc(s)}nn.has(D)||(s=w({rel:"preload",href:o==="image"&&x&&x.imageSrcSet?void 0:s,as:o},x),nn.set(D,s),y.querySelector(k)!==null||o==="style"&&y.querySelector(d0(D))||o==="script"&&y.querySelector(u0(D))||(o=y.createElement("link"),Xa(o,"link",s),Be(o),y.head.appendChild(o)))}}function VN(s,o){ji.m(s,o);var x=ac;if(x&&s){var y=o&&typeof o.as=="string"?o.as:"script",k='link[rel="modulepreload"][as="'+Ea(y)+'"][href="'+Ea(s)+'"]',D=k;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":D=nc(s)}if(!nn.has(D)&&(s=w({rel:"modulepreload",href:s},o),nn.set(D,s),x.querySelector(k)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(u0(D)))return}y=x.createElement("link"),Xa(y,"link",s),Be(y),x.head.appendChild(y)}}}function GN(s,o,x){ji.S(s,o,x);var y=ac;if(y&&s){var k=rt(y).hoistableStyles,D=sc(s);o=o||"default";var W=k.get(D);if(!W){var xe={loading:0,preload:null};if(W=y.querySelector(d0(D)))xe.loading=5;else{s=w({rel:"stylesheet",href:s,"data-precedence":o},x),(x=nn.get(D))&&uh(s,x);var Te=W=y.createElement("link");Be(Te),Xa(Te,"link",s),Te._p=new Promise(function(Xe,it){Te.onload=Xe,Te.onerror=it}),Te.addEventListener("load",function(){xe.loading|=1}),Te.addEventListener("error",function(){xe.loading|=2}),xe.loading|=4,du(W,o,y)}W={type:"stylesheet",instance:W,count:1,state:xe},k.set(D,W)}}}function XN(s,o){ji.X(s,o);var x=ac;if(x&&s){var y=rt(x).hoistableScripts,k=nc(s),D=y.get(k);D||(D=x.querySelector(u0(k)),D||(s=w({src:s,async:!0},o),(o=nn.get(k))&&fh(s,o),D=x.createElement("script"),Be(D),Xa(D,"link",s),x.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},y.set(k,D))}}function qN(s,o){ji.M(s,o);var x=ac;if(x&&s){var y=rt(x).hoistableScripts,k=nc(s),D=y.get(k);D||(D=x.querySelector(u0(k)),D||(s=w({src:s,async:!0,type:"module"},o),(o=nn.get(k))&&fh(s,o),D=x.createElement("script"),Be(D),Xa(D,"link",s),x.head.appendChild(D)),D={type:"script",instance:D,count:1,state:null},y.set(k,D))}}function ay(s,o,x,y){var k=(k=Z.current)?cu(k):null;if(!k)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(o=sc(x.href),x=rt(k).hoistableStyles,y=x.get(o),y||(y={type:"style",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){s=sc(x.href);var D=rt(k).hoistableStyles,W=D.get(s);if(W||(k=k.ownerDocument||k,W={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},D.set(s,W),(D=k.querySelector(d0(s)))&&!D._p&&(W.instance=D,W.state.loading=5),nn.has(s)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},nn.set(s,x),D||$N(k,s,x,W.state))),o&&y===null)throw Error(i(528,""));return W}if(o&&y!==null)throw Error(i(529,""));return null;case"script":return o=x.async,x=x.src,typeof x=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=nc(x),x=rt(k).hoistableScripts,y=x.get(o),y||(y={type:"script",instance:null,count:0,state:null},x.set(o,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function sc(s){return'href="'+Ea(s)+'"'}function d0(s){return'link[rel="stylesheet"]['+s+"]"}function sy(s){return w({},s,{"data-precedence":s.precedence,precedence:null})}function $N(s,o,x,y){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?y.loading=1:(o=s.createElement("link"),y.preload=o,o.addEventListener("load",function(){return y.loading|=1}),o.addEventListener("error",function(){return y.loading|=2}),Xa(o,"link",x),Be(o),s.head.appendChild(o))}function nc(s){return'[src="'+Ea(s)+'"]'}function u0(s){return"script[async]"+s}function ny(s,o,x){if(o.count++,o.instance===null)switch(o.type){case"style":var y=s.querySelector('style[data-href~="'+Ea(x.href)+'"]');if(y)return o.instance=y,Be(y),y;var k=w({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return y=(s.ownerDocument||s).createElement("style"),Be(y),Xa(y,"style",k),du(y,x.precedence,s),o.instance=y;case"stylesheet":k=sc(x.href);var D=s.querySelector(d0(k));if(D)return o.state.loading|=4,o.instance=D,Be(D),D;y=sy(x),(k=nn.get(k))&&uh(y,k),D=(s.ownerDocument||s).createElement("link"),Be(D);var W=D;return W._p=new Promise(function(xe,Te){W.onload=xe,W.onerror=Te}),Xa(D,"link",y),o.state.loading|=4,du(D,x.precedence,s),o.instance=D;case"script":return D=nc(x.src),(k=s.querySelector(u0(D)))?(o.instance=k,Be(k),k):(y=x,(k=nn.get(D))&&(y=w({},x),fh(y,k)),s=s.ownerDocument||s,k=s.createElement("script"),Be(k),Xa(k,"link",y),s.head.appendChild(k),o.instance=k);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(y=o.instance,o.state.loading|=4,du(y,x.precedence,s));return o.instance}function du(s,o,x){for(var y=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),k=y.length?y[y.length-1]:null,D=k,W=0;W<y.length;W++){var xe=y[W];if(xe.dataset.precedence===o)D=xe;else if(D!==k)break}D?D.parentNode.insertBefore(s,D.nextSibling):(o=x.nodeType===9?x.head:x,o.insertBefore(s,o.firstChild))}function uh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function fh(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var uu=null;function iy(s,o,x){if(uu===null){var y=new Map,k=uu=new Map;k.set(x,y)}else k=uu,y=k.get(x),y||(y=new Map,k.set(x,y));if(y.has(s))return y;for(y.set(s,null),x=x.getElementsByTagName(s),k=0;k<x.length;k++){var D=x[k];if(!(D[ge]||D[ha]||s==="link"&&D.getAttribute("rel")==="stylesheet")&&D.namespaceURI!=="http://www.w3.org/2000/svg"){var W=D.getAttribute(o)||"";W=s+W;var xe=y.get(W);xe?xe.push(D):y.set(W,[D])}}return y}function ly(s,o,x){s=s.ownerDocument||s,s.head.insertBefore(x,o==="title"?s.querySelector("head > title"):null)}function YN(s,o,x){if(x===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function oy(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var f0=null;function WN(){}function KN(s,o,x){if(f0===null)throw Error(i(475));var y=f0;if(o.type==="stylesheet"&&(typeof x.media!="string"||matchMedia(x.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var k=sc(x.href),D=s.querySelector(d0(k));if(D){s=D._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(y.count++,y=fu.bind(y),s.then(y,y)),o.state.loading|=4,o.instance=D,Be(D);return}D=s.ownerDocument||s,x=sy(x),(k=nn.get(k))&&uh(x,k),D=D.createElement("link"),Be(D);var W=D;W._p=new Promise(function(xe,Te){W.onload=xe,W.onerror=Te}),Xa(D,"link",x),o.instance=D}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(y.count++,o=fu.bind(y),s.addEventListener("load",o),s.addEventListener("error",o))}}function ZN(){if(f0===null)throw Error(i(475));var s=f0;return s.stylesheets&&s.count===0&&xh(s,s.stylesheets),0<s.count?function(o){var x=setTimeout(function(){if(s.stylesheets&&xh(s,s.stylesheets),s.unsuspend){var y=s.unsuspend;s.unsuspend=null,y()}},6e4);return s.unsuspend=o,function(){s.unsuspend=null,clearTimeout(x)}}:null}function fu(){if(this.count--,this.count===0){if(this.stylesheets)xh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var xu=null;function xh(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,xu=new Map,o.forEach(QN,s),xu=null,fu.call(s))}function QN(s,o){if(!(o.state.loading&4)){var x=xu.get(s);if(x)var y=x.get(null);else{x=new Map,xu.set(s,x);for(var k=s.querySelectorAll("link[data-precedence],style[data-precedence]"),D=0;D<k.length;D++){var W=k[D];(W.nodeName==="LINK"||W.getAttribute("media")!=="not all")&&(x.set(W.dataset.precedence,W),y=W)}y&&x.set(null,y)}k=o.instance,W=k.getAttribute("data-precedence"),D=x.get(W)||y,D===y&&x.set(null,k),x.set(W,k),this.count++,y=fu.bind(this),k.addEventListener("load",y),k.addEventListener("error",y),D?D.parentNode.insertBefore(k,D.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(k,s.firstChild)),o.state.loading|=4}}var x0={$$typeof:T,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function JN(s,o,x,y,k,D,W,xe){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Tt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Tt(0),this.hiddenUpdates=Tt(null),this.identifierPrefix=y,this.onUncaughtError=k,this.onCaughtError=D,this.onRecoverableError=W,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=xe,this.incompleteTransitions=new Map}function cy(s,o,x,y,k,D,W,xe,Te,Xe,it,ft){return s=new JN(s,o,x,W,xe,Te,Xe,ft),o=1,D===!0&&(o|=24),D=Bs(3,null,null,o),s.current=D,D.stateNode=s,o=Yf(),o.refCount++,s.pooledCache=o,o.refCount++,D.memoizedState={element:y,isDehydrated:x,cache:o},Qf(D),s}function dy(s){return s?(s=Mo,s):Mo}function uy(s,o,x,y,k,D){k=dy(k),y.context===null?y.context=k:y.pendingContext=k,y=Zi(o),y.payload={element:x},D=D===void 0?null:D,D!==null&&(y.callback=D),x=Qi(s,y,o),x!==null&&(Hs(x,s,o),Vc(x,s,o))}function fy(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var x=s.retryLane;s.retryLane=x!==0&&x<o?x:o}}function hh(s,o){fy(s,o),(s=s.alternate)&&fy(s,o)}function xy(s){if(s.tag===13){var o=Fo(s,67108864);o!==null&&Hs(o,s,67108864),hh(s,67108864)}}var hu=!0;function ek(s,o,x,y){var k=q.T;q.T=null;var D=ce.p;try{ce.p=2,mh(s,o,x,y)}finally{ce.p=D,q.T=k}}function tk(s,o,x,y){var k=q.T;q.T=null;var D=ce.p;try{ce.p=8,mh(s,o,x,y)}finally{ce.p=D,q.T=k}}function mh(s,o,x,y){if(hu){var k=gh(y);if(k===null)rh(s,o,y,mu,x),my(s,y);else if(ak(k,s,o,x,y))y.stopPropagation();else if(my(s,y),o&4&&-1<rk.indexOf(s)){for(;k!==null;){var D=_e(k);if(D!==null)switch(D.tag){case 3:if(D=D.stateNode,D.current.memoizedState.isDehydrated){var W=St(D.pendingLanes);if(W!==0){var xe=D;for(xe.pendingLanes|=2,xe.entangledLanes|=2;W;){var Te=1<<31-qt(W);xe.entanglements[1]|=Te,W&=~Te}Wn(D),(Ar&6)===0&&(Qd=be()+500,i0(0))}}break;case 13:xe=Fo(D,2),xe!==null&&Hs(xe,D,2),eu(),hh(D,2)}if(D=gh(y),D===null&&rh(s,o,y,mu,x),D===k)break;k=D}k!==null&&y.stopPropagation()}else rh(s,o,y,null,x)}}function gh(s){return s=Li(s),ph(s)}var mu=null;function ph(s){if(mu=null,s=ke(s),s!==null){var o=d(s);if(o===null)s=null;else{var x=o.tag;if(x===13){if(s=f(o),s!==null)return s;s=null}else if(x===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return mu=s,null}function hy(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dt()){case me:return 2;case Pe:return 8;case pe:case lt:return 32;case st:return 268435456;default:return 32}default:return 32}}var yh=!1,ul=null,fl=null,xl=null,h0=new Map,m0=new Map,hl=[],rk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function my(s,o){switch(s){case"focusin":case"focusout":ul=null;break;case"dragenter":case"dragleave":fl=null;break;case"mouseover":case"mouseout":xl=null;break;case"pointerover":case"pointerout":h0.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":m0.delete(o.pointerId)}}function g0(s,o,x,y,k,D){return s===null||s.nativeEvent!==D?(s={blockedOn:o,domEventName:x,eventSystemFlags:y,nativeEvent:D,targetContainers:[k]},o!==null&&(o=_e(o),o!==null&&xy(o)),s):(s.eventSystemFlags|=y,o=s.targetContainers,k!==null&&o.indexOf(k)===-1&&o.push(k),s)}function ak(s,o,x,y,k){switch(o){case"focusin":return ul=g0(ul,s,o,x,y,k),!0;case"dragenter":return fl=g0(fl,s,o,x,y,k),!0;case"mouseover":return xl=g0(xl,s,o,x,y,k),!0;case"pointerover":var D=k.pointerId;return h0.set(D,g0(h0.get(D)||null,s,o,x,y,k)),!0;case"gotpointercapture":return D=k.pointerId,m0.set(D,g0(m0.get(D)||null,s,o,x,y,k)),!0}return!1}function gy(s){var o=ke(s.target);if(o!==null){var x=d(o);if(x!==null){if(o=x.tag,o===13){if(o=f(x),o!==null){s.blockedOn=o,Bi(s.priority,function(){if(x.tag===13){var y=Us();y=ii(y);var k=Fo(x,y);k!==null&&Hs(k,x,y),hh(x,y)}});return}}else if(o===3&&x.stateNode.current.memoizedState.isDehydrated){s.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}s.blockedOn=null}function gu(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var x=gh(s.nativeEvent);if(x===null){x=s.nativeEvent;var y=new x.constructor(x.type,x);Sl=y,x.target.dispatchEvent(y),Sl=null}else return o=_e(x),o!==null&&xy(o),s.blockedOn=x,!1;o.shift()}return!0}function py(s,o,x){gu(s)&&x.delete(o)}function sk(){yh=!1,ul!==null&&gu(ul)&&(ul=null),fl!==null&&gu(fl)&&(fl=null),xl!==null&&gu(xl)&&(xl=null),h0.forEach(py),m0.forEach(py)}function pu(s,o){s.blockedOn===o&&(s.blockedOn=null,yh||(yh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,sk)))}var yu=null;function yy(s){yu!==s&&(yu=s,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){yu===s&&(yu=null);for(var o=0;o<s.length;o+=3){var x=s[o],y=s[o+1],k=s[o+2];if(typeof y!="function"){if(ph(y||x)===null)continue;break}var D=_e(x);D!==null&&(s.splice(o,3),o-=3,px(D,{pending:!0,data:k,method:x.method,action:y},y,k))}}))}function p0(s){function o(Te){return pu(Te,s)}ul!==null&&pu(ul,s),fl!==null&&pu(fl,s),xl!==null&&pu(xl,s),h0.forEach(o),m0.forEach(o);for(var x=0;x<hl.length;x++){var y=hl[x];y.blockedOn===s&&(y.blockedOn=null)}for(;0<hl.length&&(x=hl[0],x.blockedOn===null);)gy(x),x.blockedOn===null&&hl.shift();if(x=(s.ownerDocument||s).$$reactFormReplay,x!=null)for(y=0;y<x.length;y+=3){var k=x[y],D=x[y+1],W=k[Lr]||null;if(typeof D=="function")W||yy(x);else if(W){var xe=null;if(D&&D.hasAttribute("formAction")){if(k=D,W=D[Lr]||null)xe=W.formAction;else if(ph(k)!==null)continue}else xe=W.action;typeof xe=="function"?x[y+1]=xe:(x.splice(y,3),y-=3),yy(x)}}}function bh(s){this._internalRoot=s}bu.prototype.render=bh.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var x=o.current,y=Us();uy(x,y,s,o,null,null)},bu.prototype.unmount=bh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;uy(s.current,2,null,s,null,null),eu(),o[Zs]=null}};function bu(s){this._internalRoot=s}bu.prototype.unstable_scheduleHydration=function(s){if(s){var o=hn();s={blockedOn:null,target:s,priority:o};for(var x=0;x<hl.length&&o!==0&&o<hl[x].priority;x++);hl.splice(x,0,s),x===0&&gy(s)}};var by=a.version;if(by!=="19.1.1")throw Error(i(527,by,"19.1.1"));ce.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=b(o),s=s!==null?p(s):null,s=s===null?null:s.stateNode,s};var nk={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vu.isDisabled&&vu.supportsFiber)try{Dt=vu.inject(nk),or=vu}catch{}}return b0.createRoot=function(s,o){if(!l(s))throw Error(i(299));var x=!1,y="",k=F1,D=M1,W=B1,xe=null;return o!=null&&(o.unstable_strictMode===!0&&(x=!0),o.identifierPrefix!==void 0&&(y=o.identifierPrefix),o.onUncaughtError!==void 0&&(k=o.onUncaughtError),o.onCaughtError!==void 0&&(D=o.onCaughtError),o.onRecoverableError!==void 0&&(W=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(xe=o.unstable_transitionCallbacks)),o=cy(s,1,!1,null,null,x,y,k,D,W,xe,null),s[Zs]=o.current,th(s),new bh(o)},b0.hydrateRoot=function(s,o,x){if(!l(s))throw Error(i(299));var y=!1,k="",D=F1,W=M1,xe=B1,Te=null,Xe=null;return x!=null&&(x.unstable_strictMode===!0&&(y=!0),x.identifierPrefix!==void 0&&(k=x.identifierPrefix),x.onUncaughtError!==void 0&&(D=x.onUncaughtError),x.onCaughtError!==void 0&&(W=x.onCaughtError),x.onRecoverableError!==void 0&&(xe=x.onRecoverableError),x.unstable_transitionCallbacks!==void 0&&(Te=x.unstable_transitionCallbacks),x.formState!==void 0&&(Xe=x.formState)),o=cy(s,1,!0,o,x??null,y,k,D,W,xe,Te,Xe),o.context=dy(null),x=o.current,y=Us(),y=ii(y),k=Zi(y),k.callback=null,Qi(x,k,y),x=y,o.current.lanes=x,Qr(o,x),Wn(o),s[Zs]=o.current,th(s),new bu(o)},b0.version="19.1.1",b0}var Sy;function gk(){if(Sy)return Nh.exports;Sy=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(a){console.error(a)}}return t(),Nh.exports=mk(),Nh.exports}var pk=gk();const yk=of(pk);/**
 * react-router v7.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ty="popstate";function bk(t={}){function a(i,l){let{pathname:d,search:f,hash:h}=i.location;return um("",{pathname:d,search:f,hash:h},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function r(i,l){return typeof l=="string"?l:B0(l)}return wk(a,r,null,t)}function Zr(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function An(t,a){if(!t){typeof console<"u"&&console.warn(a);try{throw new Error(a)}catch{}}}function vk(){return Math.random().toString(36).substring(2,10)}function Ry(t,a){return{usr:t.state,key:t.key,idx:a}}function um(t,a,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof a=="string"?vc(a):a,state:r,key:a&&a.key||i||vk()}}function B0({pathname:t="/",search:a="",hash:r=""}){return a&&a!=="?"&&(t+=a.charAt(0)==="?"?a:"?"+a),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function vc(t){let a={};if(t){let r=t.indexOf("#");r>=0&&(a.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(a.search=t.substring(i),t=t.substring(0,i)),t&&(a.pathname=t)}return a}function wk(t,a,r,i={}){let{window:l=document.defaultView,v5Compat:d=!1}=i,f=l.history,h="POP",b=null,p=w();p==null&&(p=0,f.replaceState({...f.state,idx:p},""));function w(){return(f.state||{idx:null}).idx}function j(){h="POP";let O=w(),I=O==null?null:O-p;p=O,b&&b({action:h,location:A.location,delta:I})}function C(O,I){h="PUSH";let M=um(A.location,O,I);p=w()+1;let T=Ry(M,p),B=A.createHref(M);try{f.pushState(T,"",B)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;l.location.assign(B)}d&&b&&b({action:h,location:A.location,delta:1})}function _(O,I){h="REPLACE";let M=um(A.location,O,I);p=w();let T=Ry(M,p),B=A.createHref(M);f.replaceState(T,"",B),d&&b&&b({action:h,location:A.location,delta:0})}function R(O){return Nk(O)}let A={get action(){return h},get location(){return t(l,f)},listen(O){if(b)throw new Error("A history only accepts one active listener");return l.addEventListener(Ty,j),b=O,()=>{l.removeEventListener(Ty,j),b=null}},createHref(O){return a(l,O)},createURL:R,encodeLocation(O){let I=R(O);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:C,replace:_,go(O){return f.go(O)}};return A}function Nk(t,a=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Zr(r,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:B0(t);return i=i.replace(/ $/,"%20"),!a&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function q2(t,a,r="/"){return kk(t,a,r,!1)}function kk(t,a,r,i){let l=typeof a=="string"?vc(a):a,d=Ti(l.pathname||"/",r);if(d==null)return null;let f=$2(t);jk(f);let h=null;for(let b=0;h==null&&b<f.length;++b){let p=Fk(d);h=Ok(f[b],p,i)}return h}function $2(t,a=[],r=[],i=""){let l=(d,f,h)=>{let b={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:f,route:d};b.relativePath.startsWith("/")&&(Zr(b.relativePath.startsWith(i),`Absolute route path "${b.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),b.relativePath=b.relativePath.slice(i.length));let p=_i([i,b.relativePath]),w=r.concat(b);d.children&&d.children.length>0&&(Zr(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),$2(d.children,a,w,p)),!(d.path==null&&!d.index)&&a.push({path:p,score:Rk(p,d.index),routesMeta:w})};return t.forEach((d,f)=>{if(d.path===""||!d.path?.includes("?"))l(d,f);else for(let h of Y2(d.path))l(d,f,h)}),a}function Y2(t){let a=t.split("/");if(a.length===0)return[];let[r,...i]=a,l=r.endsWith("?"),d=r.replace(/\?$/,"");if(i.length===0)return l?[d,""]:[d];let f=Y2(i.join("/")),h=[];return h.push(...f.map(b=>b===""?d:[d,b].join("/"))),l&&h.push(...f),h.map(b=>t.startsWith("/")&&b===""?"/":b)}function jk(t){t.sort((a,r)=>a.score!==r.score?r.score-a.score:Dk(a.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Ek=/^:[\w-]+$/,Ck=3,_k=2,Ak=1,Sk=10,Tk=-2,Dy=t=>t==="*";function Rk(t,a){let r=t.split("/"),i=r.length;return r.some(Dy)&&(i+=Tk),a&&(i+=_k),r.filter(l=>!Dy(l)).reduce((l,d)=>l+(Ek.test(d)?Ck:d===""?Ak:Sk),i)}function Dk(t,a){return t.length===a.length&&t.slice(0,-1).every((i,l)=>i===a[l])?t[t.length-1]-a[a.length-1]:0}function Ok(t,a,r=!1){let{routesMeta:i}=t,l={},d="/",f=[];for(let h=0;h<i.length;++h){let b=i[h],p=h===i.length-1,w=d==="/"?a:a.slice(d.length)||"/",j=Pu({path:b.relativePath,caseSensitive:b.caseSensitive,end:p},w),C=b.route;if(!j&&p&&r&&!i[i.length-1].route.index&&(j=Pu({path:b.relativePath,caseSensitive:b.caseSensitive,end:!1},w)),!j)return null;Object.assign(l,j.params),f.push({params:l,pathname:_i([d,j.pathname]),pathnameBase:Pk(_i([d,j.pathnameBase])),route:C}),j.pathnameBase!=="/"&&(d=_i([d,j.pathnameBase]))}return f}function Pu(t,a){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=Ik(t.path,t.caseSensitive,t.end),l=a.match(r);if(!l)return null;let d=l[0],f=d.replace(/(.)\/+$/,"$1"),h=l.slice(1);return{params:i.reduce((p,{paramName:w,isOptional:j},C)=>{if(w==="*"){let R=h[C]||"";f=d.slice(0,d.length-R.length).replace(/(.)\/+$/,"$1")}const _=h[C];return j&&!_?p[w]=void 0:p[w]=(_||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:f,pattern:t}}function Ik(t,a=!1,r=!0){An(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],l="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,h,b)=>(i.push({paramName:h,isOptional:b!=null}),b?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),l+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?l+="\\/*$":t!==""&&t!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,a?void 0:"i"),i]}function Fk(t){try{return t.split("/").map(a=>decodeURIComponent(a).replace(/\//g,"%2F")).join("/")}catch(a){return An(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${a}).`),t}}function Ti(t,a){if(a==="/")return t;if(!t.toLowerCase().startsWith(a.toLowerCase()))return null;let r=a.endsWith("/")?a.length-1:a.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function Mk(t,a="/"){let{pathname:r,search:i="",hash:l=""}=typeof t=="string"?vc(t):t;return{pathname:r?r.startsWith("/")?r:Bk(r,a):a,search:zk(i),hash:Uk(l)}}function Bk(t,a){let r=a.replace(/\/+$/,"").split("/");return t.split("/").forEach(l=>{l===".."?r.length>1&&r.pop():l!=="."&&r.push(l)}),r.length>1?r.join("/"):"/"}function Ch(t,a,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${a}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Lk(t){return t.filter((a,r)=>r===0||a.route.path&&a.route.path.length>0)}function W2(t){let a=Lk(t);return a.map((r,i)=>i===a.length-1?r.pathname:r.pathnameBase)}function K2(t,a,r,i=!1){let l;typeof t=="string"?l=vc(t):(l={...t},Zr(!l.pathname||!l.pathname.includes("?"),Ch("?","pathname","search",l)),Zr(!l.pathname||!l.pathname.includes("#"),Ch("#","pathname","hash",l)),Zr(!l.search||!l.search.includes("#"),Ch("#","search","hash",l)));let d=t===""||l.pathname==="",f=d?"/":l.pathname,h;if(f==null)h=r;else{let j=a.length-1;if(!i&&f.startsWith("..")){let C=f.split("/");for(;C[0]==="..";)C.shift(),j-=1;l.pathname=C.join("/")}h=j>=0?a[j]:"/"}let b=Mk(l,h),p=f&&f!=="/"&&f.endsWith("/"),w=(d||f===".")&&r.endsWith("/");return!b.pathname.endsWith("/")&&(p||w)&&(b.pathname+="/"),b}var _i=t=>t.join("/").replace(/\/\/+/g,"/"),Pk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),zk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Uk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Hk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Z2=["POST","PUT","PATCH","DELETE"];new Set(Z2);var Vk=["GET",...Z2];new Set(Vk);var wc=E.createContext(null);wc.displayName="DataRouter";var cf=E.createContext(null);cf.displayName="DataRouterState";E.createContext(!1);var Q2=E.createContext({isTransitioning:!1});Q2.displayName="ViewTransition";var Gk=E.createContext(new Map);Gk.displayName="Fetchers";var Xk=E.createContext(null);Xk.displayName="Await";var ri=E.createContext(null);ri.displayName="Navigation";var Q0=E.createContext(null);Q0.displayName="Location";var ai=E.createContext({outlet:null,matches:[],isDataRoute:!1});ai.displayName="Route";var Vm=E.createContext(null);Vm.displayName="RouteError";function qk(t,{relative:a}={}){Zr(J0(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=E.useContext(ri),{hash:l,pathname:d,search:f}=ed(t,{relative:a}),h=d;return r!=="/"&&(h=d==="/"?r:_i([r,d])),i.createHref({pathname:h,search:f,hash:l})}function J0(){return E.useContext(Q0)!=null}function Rn(){return Zr(J0(),"useLocation() may be used only in the context of a <Router> component."),E.useContext(Q0).location}var J2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ev(t){E.useContext(ri).static||E.useLayoutEffect(t)}function xr(){let{isDataRoute:t}=E.useContext(ai);return t?n3():$k()}function $k(){Zr(J0(),"useNavigate() may be used only in the context of a <Router> component.");let t=E.useContext(wc),{basename:a,navigator:r}=E.useContext(ri),{matches:i}=E.useContext(ai),{pathname:l}=Rn(),d=JSON.stringify(W2(i)),f=E.useRef(!1);return ev(()=>{f.current=!0}),E.useCallback((b,p={})=>{if(An(f.current,J2),!f.current)return;if(typeof b=="number"){r.go(b);return}let w=K2(b,JSON.parse(d),l,p.relative==="path");t==null&&a!=="/"&&(w.pathname=w.pathname==="/"?a:_i([a,w.pathname])),(p.replace?r.replace:r.push)(w,p.state,p)},[a,r,d,l,t])}E.createContext(null);function fn(){let{matches:t}=E.useContext(ai),a=t[t.length-1];return a?a.params:{}}function ed(t,{relative:a}={}){let{matches:r}=E.useContext(ai),{pathname:i}=Rn(),l=JSON.stringify(W2(r));return E.useMemo(()=>K2(t,JSON.parse(l),i,a==="path"),[t,l,i,a])}function Yk(t,a){return tv(t,a)}function tv(t,a,r,i){Zr(J0(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=E.useContext(ri),{matches:d}=E.useContext(ai),f=d[d.length-1],h=f?f.params:{},b=f?f.pathname:"/",p=f?f.pathnameBase:"/",w=f&&f.route;{let I=w&&w.path||"";rv(b,!w||I.endsWith("*")||I.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${b}" (under <Route path="${I}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${I}"> to <Route path="${I==="/"?"*":`${I}/*`}">.`)}let j=Rn(),C;if(a){let I=typeof a=="string"?vc(a):a;Zr(p==="/"||I.pathname?.startsWith(p),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${I.pathname}" was given in the \`location\` prop.`),C=I}else C=j;let _=C.pathname||"/",R=_;if(p!=="/"){let I=p.replace(/^\//,"").split("/");R="/"+_.replace(/^\//,"").split("/").slice(I.length).join("/")}let A=q2(t,{pathname:R});An(w||A!=null,`No routes matched location "${C.pathname}${C.search}${C.hash}" `),An(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${C.pathname}${C.search}${C.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let O=Jk(A&&A.map(I=>Object.assign({},I,{params:Object.assign({},h,I.params),pathname:_i([p,l.encodeLocation?l.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?p:_i([p,l.encodeLocation?l.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),d,r,i);return a&&O?E.createElement(Q0.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...C},navigationType:"POP"}},O):O}function Wk(){let t=s3(),a=Hk(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:i},d={padding:"2px 4px",backgroundColor:i},f=null;return console.error("Error handled by React Router default ErrorBoundary:",t),f=E.createElement(E.Fragment,null,E.createElement("p",null," Hey developer "),E.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",E.createElement("code",{style:d},"ErrorBoundary")," or"," ",E.createElement("code",{style:d},"errorElement")," prop on your route.")),E.createElement(E.Fragment,null,E.createElement("h2",null,"Unexpected Application Error!"),E.createElement("h3",{style:{fontStyle:"italic"}},a),r?E.createElement("pre",{style:l},r):null,f)}var Kk=E.createElement(Wk,null),Zk=class extends E.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,a){return a.location!==t.location||a.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:a.error,location:a.location,revalidation:t.revalidation||a.revalidation}}componentDidCatch(t,a){console.error("React Router caught the following error during render",t,a)}render(){return this.state.error!==void 0?E.createElement(ai.Provider,{value:this.props.routeContext},E.createElement(Vm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Qk({routeContext:t,match:a,children:r}){let i=E.useContext(wc);return i&&i.static&&i.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=a.route.id),E.createElement(ai.Provider,{value:t},r)}function Jk(t,a=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(a.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let l=t,d=r?.errors;if(d!=null){let b=l.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);Zr(b>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),l=l.slice(0,Math.min(l.length,b+1))}let f=!1,h=-1;if(r)for(let b=0;b<l.length;b++){let p=l[b];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=b),p.route.id){let{loaderData:w,errors:j}=r,C=p.route.loader&&!w.hasOwnProperty(p.route.id)&&(!j||j[p.route.id]===void 0);if(p.route.lazy||C){f=!0,h>=0?l=l.slice(0,h+1):l=[l[0]];break}}}return l.reduceRight((b,p,w)=>{let j,C=!1,_=null,R=null;r&&(j=d&&p.route.id?d[p.route.id]:void 0,_=p.route.errorElement||Kk,f&&(h<0&&w===0?(rv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),C=!0,R=null):h===w&&(C=!0,R=p.route.hydrateFallbackElement||null)));let A=a.concat(l.slice(0,w+1)),O=()=>{let I;return j?I=_:C?I=R:p.route.Component?I=E.createElement(p.route.Component,null):p.route.element?I=p.route.element:I=b,E.createElement(Qk,{match:p,routeContext:{outlet:b,matches:A,isDataRoute:r!=null},children:I})};return r&&(p.route.ErrorBoundary||p.route.errorElement||w===0)?E.createElement(Zk,{location:r.location,revalidation:r.revalidation,component:_,error:j,children:O(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):O()},null)}function Gm(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function e3(t){let a=E.useContext(wc);return Zr(a,Gm(t)),a}function t3(t){let a=E.useContext(cf);return Zr(a,Gm(t)),a}function r3(t){let a=E.useContext(ai);return Zr(a,Gm(t)),a}function Xm(t){let a=r3(t),r=a.matches[a.matches.length-1];return Zr(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function a3(){return Xm("useRouteId")}function s3(){let t=E.useContext(Vm),a=t3("useRouteError"),r=Xm("useRouteError");return t!==void 0?t:a.errors?.[r]}function n3(){let{router:t}=e3("useNavigate"),a=Xm("useNavigate"),r=E.useRef(!1);return ev(()=>{r.current=!0}),E.useCallback(async(l,d={})=>{An(r.current,J2),r.current&&(typeof l=="number"?t.navigate(l):await t.navigate(l,{fromRouteId:a,...d}))},[t,a])}var Oy={};function rv(t,a,r){!a&&!Oy[t]&&(Oy[t]=!0,An(!1,r))}E.memo(i3);function i3({routes:t,future:a,state:r}){return tv(t,void 0,r,a)}function $t(t){Zr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function l3({basename:t="/",children:a=null,location:r,navigationType:i="POP",navigator:l,static:d=!1}){Zr(!J0(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=t.replace(/^\/*/,"/"),h=E.useMemo(()=>({basename:f,navigator:l,static:d,future:{}}),[f,l,d]);typeof r=="string"&&(r=vc(r));let{pathname:b="/",search:p="",hash:w="",state:j=null,key:C="default"}=r,_=E.useMemo(()=>{let R=Ti(b,f);return R==null?null:{location:{pathname:R,search:p,hash:w,state:j,key:C},navigationType:i}},[f,b,p,w,j,C,i]);return An(_!=null,`<Router basename="${f}"> is not able to match the URL "${b}${p}${w}" because it does not start with the basename, so the <Router> won't render anything.`),_==null?null:E.createElement(ri.Provider,{value:h},E.createElement(Q0.Provider,{children:a,value:_}))}function o3({children:t,location:a}){return Yk(fm(t),a)}function fm(t,a=[]){let r=[];return E.Children.forEach(t,(i,l)=>{if(!E.isValidElement(i))return;let d=[...a,l];if(i.type===E.Fragment){r.push.apply(r,fm(i.props.children,d));return}Zr(i.type===$t,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let f={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=fm(i.props.children,d)),r.push(f)}),r}var Ou="get",Iu="application/x-www-form-urlencoded";function df(t){return t!=null&&typeof t.tagName=="string"}function c3(t){return df(t)&&t.tagName.toLowerCase()==="button"}function d3(t){return df(t)&&t.tagName.toLowerCase()==="form"}function u3(t){return df(t)&&t.tagName.toLowerCase()==="input"}function f3(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function x3(t,a){return t.button===0&&(!a||a==="_self")&&!f3(t)}function xm(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((a,r)=>{let i=t[r];return a.concat(Array.isArray(i)?i.map(l=>[r,l]):[[r,i]])},[]))}function h3(t,a){let r=xm(t);return a&&a.forEach((i,l)=>{r.has(l)||a.getAll(l).forEach(d=>{r.append(l,d)})}),r}var Nu=null;function m3(){if(Nu===null)try{new FormData(document.createElement("form"),0),Nu=!1}catch{Nu=!0}return Nu}var g3=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function _h(t){return t!=null&&!g3.has(t)?(An(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Iu}"`),null):t}function p3(t,a){let r,i,l,d,f;if(d3(t)){let h=t.getAttribute("action");i=h?Ti(h,a):null,r=t.getAttribute("method")||Ou,l=_h(t.getAttribute("enctype"))||Iu,d=new FormData(t)}else if(c3(t)||u3(t)&&(t.type==="submit"||t.type==="image")){let h=t.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let b=t.getAttribute("formaction")||h.getAttribute("action");if(i=b?Ti(b,a):null,r=t.getAttribute("formmethod")||h.getAttribute("method")||Ou,l=_h(t.getAttribute("formenctype"))||_h(h.getAttribute("enctype"))||Iu,d=new FormData(h,t),!m3()){let{name:p,type:w,value:j}=t;if(w==="image"){let C=p?`${p}.`:"";d.append(`${C}x`,"0"),d.append(`${C}y`,"0")}else p&&d.append(p,j)}}else{if(df(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ou,i=null,l=Iu,f=t}return d&&l==="text/plain"&&(f=d,d=void 0),{action:i,method:r.toLowerCase(),encType:l,formData:d,body:f}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function qm(t,a){if(t===!1||t===null||typeof t>"u")throw new Error(a)}function y3(t,a,r){let i=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return i.pathname==="/"?i.pathname=`_root.${r}`:a&&Ti(i.pathname,a)==="/"?i.pathname=`${a.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function b3(t,a){if(t.id in a)return a[t.id];try{let r=await import(t.module);return a[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function v3(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function w3(t,a,r){let i=await Promise.all(t.map(async l=>{let d=a.routes[l.route.id];if(d){let f=await b3(d,r);return f.links?f.links():[]}return[]}));return E3(i.flat(1).filter(v3).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function Iy(t,a,r,i,l,d){let f=(b,p)=>r[p]?b.route.id!==r[p].route.id:!0,h=(b,p)=>r[p].pathname!==b.pathname||r[p].route.path?.endsWith("*")&&r[p].params["*"]!==b.params["*"];return d==="assets"?a.filter((b,p)=>f(b,p)||h(b,p)):d==="data"?a.filter((b,p)=>{let w=i.routes[b.route.id];if(!w||!w.hasLoader)return!1;if(f(b,p)||h(b,p))return!0;if(b.route.shouldRevalidate){let j=b.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:r[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:b.params,defaultShouldRevalidate:!0});if(typeof j=="boolean")return j}return!0}):[]}function N3(t,a,{includeHydrateFallback:r}={}){return k3(t.map(i=>{let l=a.routes[i.route.id];if(!l)return[];let d=[l.module];return l.clientActionModule&&(d=d.concat(l.clientActionModule)),l.clientLoaderModule&&(d=d.concat(l.clientLoaderModule)),r&&l.hydrateFallbackModule&&(d=d.concat(l.hydrateFallbackModule)),l.imports&&(d=d.concat(l.imports)),d}).flat(1))}function k3(t){return[...new Set(t)]}function j3(t){let a={},r=Object.keys(t).sort();for(let i of r)a[i]=t[i];return a}function E3(t,a){let r=new Set;return new Set(a),t.reduce((i,l)=>{let d=JSON.stringify(j3(l));return r.has(d)||(r.add(d),i.push({key:d,link:l})),i},[])}function av(){let t=E.useContext(wc);return qm(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function C3(){let t=E.useContext(cf);return qm(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var $m=E.createContext(void 0);$m.displayName="FrameworkContext";function sv(){let t=E.useContext($m);return qm(t,"You must render this element inside a <HydratedRouter> element"),t}function _3(t,a){let r=E.useContext($m),[i,l]=E.useState(!1),[d,f]=E.useState(!1),{onFocus:h,onBlur:b,onMouseEnter:p,onMouseLeave:w,onTouchStart:j}=a,C=E.useRef(null);E.useEffect(()=>{if(t==="render"&&f(!0),t==="viewport"){let A=I=>{I.forEach(M=>{f(M.isIntersecting)})},O=new IntersectionObserver(A,{threshold:.5});return C.current&&O.observe(C.current),()=>{O.disconnect()}}},[t]),E.useEffect(()=>{if(i){let A=setTimeout(()=>{f(!0)},100);return()=>{clearTimeout(A)}}},[i]);let _=()=>{l(!0)},R=()=>{l(!1),f(!1)};return r?t!=="intent"?[d,C,{}]:[d,C,{onFocus:v0(h,_),onBlur:v0(b,R),onMouseEnter:v0(p,_),onMouseLeave:v0(w,R),onTouchStart:v0(j,_)}]:[!1,C,{}]}function v0(t,a){return r=>{t&&t(r),r.defaultPrevented||a(r)}}function A3({page:t,...a}){let{router:r}=av(),i=E.useMemo(()=>q2(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?E.createElement(T3,{page:t,matches:i,...a}):null}function S3(t){let{manifest:a,routeModules:r}=sv(),[i,l]=E.useState([]);return E.useEffect(()=>{let d=!1;return w3(t,a,r).then(f=>{d||l(f)}),()=>{d=!0}},[t,a,r]),i}function T3({page:t,matches:a,...r}){let i=Rn(),{manifest:l,routeModules:d}=sv(),{basename:f}=av(),{loaderData:h,matches:b}=C3(),p=E.useMemo(()=>Iy(t,a,b,l,i,"data"),[t,a,b,l,i]),w=E.useMemo(()=>Iy(t,a,b,l,i,"assets"),[t,a,b,l,i]),j=E.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let R=new Set,A=!1;if(a.forEach(I=>{let M=l.routes[I.route.id];!M||!M.hasLoader||(!p.some(T=>T.route.id===I.route.id)&&I.route.id in h&&d[I.route.id]?.shouldRevalidate||M.hasClientLoader?A=!0:R.add(I.route.id))}),R.size===0)return[];let O=y3(t,f,"data");return A&&R.size>0&&O.searchParams.set("_routes",a.filter(I=>R.has(I.route.id)).map(I=>I.route.id).join(",")),[O.pathname+O.search]},[f,h,i,l,p,a,t,d]),C=E.useMemo(()=>N3(w,l),[w,l]),_=S3(w);return E.createElement(E.Fragment,null,j.map(R=>E.createElement("link",{key:R,rel:"prefetch",as:"fetch",href:R,...r})),C.map(R=>E.createElement("link",{key:R,rel:"modulepreload",href:R,...r})),_.map(({key:R,link:A})=>E.createElement("link",{key:R,nonce:r.nonce,...A})))}function R3(...t){return a=>{t.forEach(r=>{typeof r=="function"?r(a):r!=null&&(r.current=a)})}}var nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{nv&&(window.__reactRouterVersion="7.8.0")}catch{}function D3({basename:t,children:a,window:r}){let i=E.useRef();i.current==null&&(i.current=bk({window:r,v5Compat:!0}));let l=i.current,[d,f]=E.useState({action:l.action,location:l.location}),h=E.useCallback(b=>{E.startTransition(()=>f(b))},[f]);return E.useLayoutEffect(()=>l.listen(h),[l,h]),E.createElement(l3,{basename:t,children:a,location:d.location,navigationType:d.action,navigator:l})}var iv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ql=E.forwardRef(function({onClick:a,discover:r="render",prefetch:i="none",relative:l,reloadDocument:d,replace:f,state:h,target:b,to:p,preventScrollReset:w,viewTransition:j,...C},_){let{basename:R}=E.useContext(ri),A=typeof p=="string"&&iv.test(p),O,I=!1;if(typeof p=="string"&&A&&(O=p,nv))try{let z=new URL(window.location.href),K=p.startsWith("//")?new URL(z.protocol+p):new URL(p),te=Ti(K.pathname,R);K.origin===z.origin&&te!=null?p=te+K.search+K.hash:I=!0}catch{An(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let M=qk(p,{relative:l}),[T,B,H]=_3(i,C),U=F3(p,{replace:f,state:h,target:b,preventScrollReset:w,relative:l,viewTransition:j});function L(z){a&&a(z),z.defaultPrevented||U(z)}let P=E.createElement("a",{...C,...H,href:O||M,onClick:I||d?a:L,ref:R3(_,B),target:b,"data-discover":!A&&r==="render"?"true":void 0});return T&&!A?E.createElement(E.Fragment,null,P,E.createElement(A3,{page:M})):P});Ql.displayName="Link";var hm=E.forwardRef(function({"aria-current":a="page",caseSensitive:r=!1,className:i="",end:l=!1,style:d,to:f,viewTransition:h,children:b,...p},w){let j=ed(f,{relative:p.relative}),C=Rn(),_=E.useContext(cf),{navigator:R,basename:A}=E.useContext(ri),O=_!=null&&z3(j)&&h===!0,I=R.encodeLocation?R.encodeLocation(j).pathname:j.pathname,M=C.pathname,T=_&&_.navigation&&_.navigation.location?_.navigation.location.pathname:null;r||(M=M.toLowerCase(),T=T?T.toLowerCase():null,I=I.toLowerCase()),T&&A&&(T=Ti(T,A)||T);const B=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let H=M===I||!l&&M.startsWith(I)&&M.charAt(B)==="/",U=T!=null&&(T===I||!l&&T.startsWith(I)&&T.charAt(I.length)==="/"),L={isActive:H,isPending:U,isTransitioning:O},P=H?a:void 0,z;typeof i=="function"?z=i(L):z=[i,H?"active":null,U?"pending":null,O?"transitioning":null].filter(Boolean).join(" ");let K=typeof d=="function"?d(L):d;return E.createElement(Ql,{...p,"aria-current":P,className:z,ref:w,style:K,to:f,viewTransition:h},typeof b=="function"?b(L):b)});hm.displayName="NavLink";var O3=E.forwardRef(({discover:t="render",fetcherKey:a,navigate:r,reloadDocument:i,replace:l,state:d,method:f=Ou,action:h,onSubmit:b,relative:p,preventScrollReset:w,viewTransition:j,...C},_)=>{let R=L3(),A=P3(h,{relative:p}),O=f.toLowerCase()==="get"?"get":"post",I=typeof h=="string"&&iv.test(h),M=T=>{if(b&&b(T),T.defaultPrevented)return;T.preventDefault();let B=T.nativeEvent.submitter,H=B?.getAttribute("formmethod")||f;R(B||T.currentTarget,{fetcherKey:a,method:H,navigate:r,replace:l,state:d,relative:p,preventScrollReset:w,viewTransition:j})};return E.createElement("form",{ref:_,method:O,action:A,onSubmit:i?b:M,...C,"data-discover":!I&&t==="render"?"true":void 0})});O3.displayName="Form";function I3(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lv(t){let a=E.useContext(wc);return Zr(a,I3(t)),a}function F3(t,{target:a,replace:r,state:i,preventScrollReset:l,relative:d,viewTransition:f}={}){let h=xr(),b=Rn(),p=ed(t,{relative:d});return E.useCallback(w=>{if(x3(w,a)){w.preventDefault();let j=r!==void 0?r:B0(b)===B0(p);h(t,{replace:j,state:i,preventScrollReset:l,relative:d,viewTransition:f})}},[b,h,p,r,i,a,t,l,d,f])}function td(t){An(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let a=E.useRef(xm(t)),r=E.useRef(!1),i=Rn(),l=E.useMemo(()=>h3(i.search,r.current?null:a.current),[i.search]),d=xr(),f=E.useCallback((h,b)=>{const p=xm(typeof h=="function"?h(new URLSearchParams(l)):h);r.current=!0,d("?"+p,b)},[d,l]);return[l,f]}var M3=0,B3=()=>`__${String(++M3)}__`;function L3(){let{router:t}=lv("useSubmit"),{basename:a}=E.useContext(ri),r=a3();return E.useCallback(async(i,l={})=>{let{action:d,method:f,encType:h,formData:b,body:p}=p3(i,a);if(l.navigate===!1){let w=l.fetcherKey||B3();await t.fetch(w,r,l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:p,formMethod:l.method||f,formEncType:l.encType||h,flushSync:l.flushSync})}else await t.navigate(l.action||d,{preventScrollReset:l.preventScrollReset,formData:b,body:p,formMethod:l.method||f,formEncType:l.encType||h,replace:l.replace,state:l.state,fromRouteId:r,flushSync:l.flushSync,viewTransition:l.viewTransition})},[t,a,r])}function P3(t,{relative:a}={}){let{basename:r}=E.useContext(ri),i=E.useContext(ai);Zr(i,"useFormAction must be used inside a RouteContext");let[l]=i.matches.slice(-1),d={...ed(t||".",{relative:a})},f=Rn();if(t==null){d.search=f.search;let h=new URLSearchParams(d.search),b=h.getAll("index");if(b.some(w=>w==="")){h.delete("index"),b.filter(j=>j).forEach(j=>h.append("index",j));let w=h.toString();d.search=w?`?${w}`:""}}return(!t||t===".")&&l.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(d.pathname=d.pathname==="/"?r:_i([r,d.pathname])),B0(d)}function z3(t,{relative:a}={}){let r=E.useContext(Q2);Zr(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=lv("useViewTransitionState"),l=ed(t,{relative:a});if(!r.isTransitioning)return!1;let d=Ti(r.currentLocation.pathname,i)||r.currentLocation.pathname,f=Ti(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Pu(l.pathname,f)!=null||Pu(l.pathname,d)!=null}function U3(){const t=xr(),a=()=>{t("/register")};return e.jsxs("div",{className:"welcomePage",children:[e.jsx("div",{className:"absolute top-3 right-3 sm:top-4 sm:right-4 md:top-6 md:right-6 flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 z-10",children:e.jsx("button",{onClick:()=>t("/login"),className:"signInSignUp text-xs sm:text-sm md:text-base px-3 py-2 sm:px-4 sm:py-2 md:px-6 md:py-3 whitespace-nowrap",children:"Login In"})}),e.jsxs("div",{className:"welcomeCard mx-3 sm:mx-4 md:mx-6 lg:mx-8",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"animate-pulse w-20 h-20 sm:w-28 sm:h-28 md:w-36 md:h-36 lg:w-44 lg:h-44 mx-auto mb-4 sm:mb-5 md:mb-6"}),e.jsxs("h1",{className:"welcomeTitle text-2xl sm:text-3xl md:text-4xl lg:text-5xl xl:text-6xl mb-3 sm:mb-4 md:mb-5",children:["Welcome to ",e.jsx("span",{className:"text-yellow-300 block sm:inline",children:"AptSync"})]}),e.jsx("p",{className:"welcomeSubtitle text-sm sm:text-base md:text-lg lg:text-xl mb-6 sm:mb-7 md:mb-8 px-2 sm:px-4 md:px-0",children:"The all-in-one platform to manage residents, maintenance, and keep your community thriving."}),e.jsxs("div",{className:"featureGrid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8 md:mb-10",children:[e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Resident Records"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Role Management"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Maintenance Requests"})]}),e.jsxs("div",{className:"featureItem text-sm sm:text-base md:text-lg flex items-center justify-center gap-2 py-3 px-4",children:[e.jsx("span",{className:"text-lg sm:text-xl",children:""}),e.jsx("span",{children:"Announcements"})]})]}),e.jsx("button",{className:"welcomeButton text-sm sm:text-base md:text-lg font-bold py-3 px-6 sm:py-3 sm:px-8 md:py-4 md:px-10 rounded-lg shadow-lg hover:scale-105 transition-transform duration-300",onClick:a,children:" Get Started"}),e.jsx("div",{className:"mt-4 sm:mt-6 text-xs sm:text-sm text-white/70 text-center block sm:hidden",children:" Tap buttons above to sign in or create account"})]}),e.jsx("div",{className:"fixed inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/20 pointer-events-none"})]})}function ov(t,a){return function(){return t.apply(a,arguments)}}const{toString:H3}=Object.prototype,{getPrototypeOf:Ym}=Object,{iterator:uf,toStringTag:cv}=Symbol,ff=(t=>a=>{const r=H3.call(a);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Dn=t=>(t=t.toLowerCase(),a=>ff(a)===t),xf=t=>a=>typeof a===t,{isArray:Nc}=Array,L0=xf("undefined");function rd(t){return t!==null&&!L0(t)&&t.constructor!==null&&!L0(t.constructor)&&Ts(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const dv=Dn("ArrayBuffer");function V3(t){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(t):a=t&&t.buffer&&dv(t.buffer),a}const G3=xf("string"),Ts=xf("function"),uv=xf("number"),ad=t=>t!==null&&typeof t=="object",X3=t=>t===!0||t===!1,Fu=t=>{if(ff(t)!=="object")return!1;const a=Ym(t);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(cv in t)&&!(uf in t)},q3=t=>{if(!ad(t)||rd(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},$3=Dn("Date"),Y3=Dn("File"),W3=Dn("Blob"),K3=Dn("FileList"),Z3=t=>ad(t)&&Ts(t.pipe),Q3=t=>{let a;return t&&(typeof FormData=="function"&&t instanceof FormData||Ts(t.append)&&((a=ff(t))==="formdata"||a==="object"&&Ts(t.toString)&&t.toString()==="[object FormData]"))},J3=Dn("URLSearchParams"),[ej,tj,rj,aj]=["ReadableStream","Request","Response","Headers"].map(Dn),sj=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function sd(t,a,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let i,l;if(typeof t!="object"&&(t=[t]),Nc(t))for(i=0,l=t.length;i<l;i++)a.call(null,t[i],i,t);else{if(rd(t))return;const d=r?Object.getOwnPropertyNames(t):Object.keys(t),f=d.length;let h;for(i=0;i<f;i++)h=d[i],a.call(null,t[h],h,t)}}function fv(t,a){if(rd(t))return null;a=a.toLowerCase();const r=Object.keys(t);let i=r.length,l;for(;i-- >0;)if(l=r[i],a===l.toLowerCase())return l;return null}const Jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,xv=t=>!L0(t)&&t!==Jl;function mm(){const{caseless:t}=xv(this)&&this||{},a={},r=(i,l)=>{const d=t&&fv(a,l)||l;Fu(a[d])&&Fu(i)?a[d]=mm(a[d],i):Fu(i)?a[d]=mm({},i):Nc(i)?a[d]=i.slice():a[d]=i};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&sd(arguments[i],r);return a}const nj=(t,a,r,{allOwnKeys:i}={})=>(sd(a,(l,d)=>{r&&Ts(l)?t[d]=ov(l,r):t[d]=l},{allOwnKeys:i}),t),ij=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),lj=(t,a,r,i)=>{t.prototype=Object.create(a.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:a.prototype}),r&&Object.assign(t.prototype,r)},oj=(t,a,r,i)=>{let l,d,f;const h={};if(a=a||{},t==null)return a;do{for(l=Object.getOwnPropertyNames(t),d=l.length;d-- >0;)f=l[d],(!i||i(f,t,a))&&!h[f]&&(a[f]=t[f],h[f]=!0);t=r!==!1&&Ym(t)}while(t&&(!r||r(t,a))&&t!==Object.prototype);return a},cj=(t,a,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=a.length;const i=t.indexOf(a,r);return i!==-1&&i===r},dj=t=>{if(!t)return null;if(Nc(t))return t;let a=t.length;if(!uv(a))return null;const r=new Array(a);for(;a-- >0;)r[a]=t[a];return r},uj=(t=>a=>t&&a instanceof t)(typeof Uint8Array<"u"&&Ym(Uint8Array)),fj=(t,a)=>{const i=(t&&t[uf]).call(t);let l;for(;(l=i.next())&&!l.done;){const d=l.value;a.call(t,d[0],d[1])}},xj=(t,a)=>{let r;const i=[];for(;(r=t.exec(a))!==null;)i.push(r);return i},hj=Dn("HTMLFormElement"),mj=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,l){return i.toUpperCase()+l}),Fy=(({hasOwnProperty:t})=>(a,r)=>t.call(a,r))(Object.prototype),gj=Dn("RegExp"),hv=(t,a)=>{const r=Object.getOwnPropertyDescriptors(t),i={};sd(r,(l,d)=>{let f;(f=a(l,d,t))!==!1&&(i[d]=f||l)}),Object.defineProperties(t,i)},pj=t=>{hv(t,(a,r)=>{if(Ts(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=t[r];if(Ts(i)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},yj=(t,a)=>{const r={},i=l=>{l.forEach(d=>{r[d]=!0})};return Nc(t)?i(t):i(String(t).split(a)),r},bj=()=>{},vj=(t,a)=>t!=null&&Number.isFinite(t=+t)?t:a;function wj(t){return!!(t&&Ts(t.append)&&t[cv]==="FormData"&&t[uf])}const Nj=t=>{const a=new Array(10),r=(i,l)=>{if(ad(i)){if(a.indexOf(i)>=0)return;if(rd(i))return i;if(!("toJSON"in i)){a[l]=i;const d=Nc(i)?[]:{};return sd(i,(f,h)=>{const b=r(f,l+1);!L0(b)&&(d[h]=b)}),a[l]=void 0,d}}return i};return r(t,0)},kj=Dn("AsyncFunction"),jj=t=>t&&(ad(t)||Ts(t))&&Ts(t.then)&&Ts(t.catch),mv=((t,a)=>t?setImmediate:a?((r,i)=>(Jl.addEventListener("message",({source:l,data:d})=>{l===Jl&&d===r&&i.length&&i.shift()()},!1),l=>{i.push(l),Jl.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",Ts(Jl.postMessage)),Ej=typeof queueMicrotask<"u"?queueMicrotask.bind(Jl):typeof process<"u"&&process.nextTick||mv,Cj=t=>t!=null&&Ts(t[uf]),et={isArray:Nc,isArrayBuffer:dv,isBuffer:rd,isFormData:Q3,isArrayBufferView:V3,isString:G3,isNumber:uv,isBoolean:X3,isObject:ad,isPlainObject:Fu,isEmptyObject:q3,isReadableStream:ej,isRequest:tj,isResponse:rj,isHeaders:aj,isUndefined:L0,isDate:$3,isFile:Y3,isBlob:W3,isRegExp:gj,isFunction:Ts,isStream:Z3,isURLSearchParams:J3,isTypedArray:uj,isFileList:K3,forEach:sd,merge:mm,extend:nj,trim:sj,stripBOM:ij,inherits:lj,toFlatObject:oj,kindOf:ff,kindOfTest:Dn,endsWith:cj,toArray:dj,forEachEntry:fj,matchAll:xj,isHTMLForm:hj,hasOwnProperty:Fy,hasOwnProp:Fy,reduceDescriptors:hv,freezeMethods:pj,toObjectSet:yj,toCamelCase:mj,noop:bj,toFiniteNumber:vj,findKey:fv,global:Jl,isContextDefined:xv,isSpecCompliantForm:wj,toJSONObject:Nj,isAsyncFn:kj,isThenable:jj,setImmediate:mv,asap:Ej,isIterable:Cj};function rr(t,a,r,i,l){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",a&&(this.code=a),r&&(this.config=r),i&&(this.request=i),l&&(this.response=l,this.status=l.status?l.status:null)}et.inherits(rr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:et.toJSONObject(this.config),code:this.code,status:this.status}}});const gv=rr.prototype,pv={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{pv[t]={value:t}});Object.defineProperties(rr,pv);Object.defineProperty(gv,"isAxiosError",{value:!0});rr.from=(t,a,r,i,l,d)=>{const f=Object.create(gv);return et.toFlatObject(t,f,function(b){return b!==Error.prototype},h=>h!=="isAxiosError"),rr.call(f,t.message,a,r,i,l),f.cause=t,f.name=t.name,d&&Object.assign(f,d),f};const _j=null;function gm(t){return et.isPlainObject(t)||et.isArray(t)}function yv(t){return et.endsWith(t,"[]")?t.slice(0,-2):t}function My(t,a,r){return t?t.concat(a).map(function(l,d){return l=yv(l),!r&&d?"["+l+"]":l}).join(r?".":""):a}function Aj(t){return et.isArray(t)&&!t.some(gm)}const Sj=et.toFlatObject(et,{},null,function(a){return/^is[A-Z]/.test(a)});function hf(t,a,r){if(!et.isObject(t))throw new TypeError("target must be an object");a=a||new FormData,r=et.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,O){return!et.isUndefined(O[A])});const i=r.metaTokens,l=r.visitor||w,d=r.dots,f=r.indexes,b=(r.Blob||typeof Blob<"u"&&Blob)&&et.isSpecCompliantForm(a);if(!et.isFunction(l))throw new TypeError("visitor must be a function");function p(R){if(R===null)return"";if(et.isDate(R))return R.toISOString();if(et.isBoolean(R))return R.toString();if(!b&&et.isBlob(R))throw new rr("Blob is not supported. Use a Buffer instead.");return et.isArrayBuffer(R)||et.isTypedArray(R)?b&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function w(R,A,O){let I=R;if(R&&!O&&typeof R=="object"){if(et.endsWith(A,"{}"))A=i?A:A.slice(0,-2),R=JSON.stringify(R);else if(et.isArray(R)&&Aj(R)||(et.isFileList(R)||et.endsWith(A,"[]"))&&(I=et.toArray(R)))return A=yv(A),I.forEach(function(T,B){!(et.isUndefined(T)||T===null)&&a.append(f===!0?My([A],B,d):f===null?A:A+"[]",p(T))}),!1}return gm(R)?!0:(a.append(My(O,A,d),p(R)),!1)}const j=[],C=Object.assign(Sj,{defaultVisitor:w,convertValue:p,isVisitable:gm});function _(R,A){if(!et.isUndefined(R)){if(j.indexOf(R)!==-1)throw Error("Circular reference detected in "+A.join("."));j.push(R),et.forEach(R,function(I,M){(!(et.isUndefined(I)||I===null)&&l.call(a,I,et.isString(M)?M.trim():M,A,C))===!0&&_(I,A?A.concat(M):[M])}),j.pop()}}if(!et.isObject(t))throw new TypeError("data must be an object");return _(t),a}function By(t){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return a[i]})}function Wm(t,a){this._pairs=[],t&&hf(t,this,a)}const bv=Wm.prototype;bv.append=function(a,r){this._pairs.push([a,r])};bv.toString=function(a){const r=a?function(i){return a.call(this,i,By)}:By;return this._pairs.map(function(l){return r(l[0])+"="+r(l[1])},"").join("&")};function Tj(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vv(t,a,r){if(!a)return t;const i=r&&r.encode||Tj;et.isFunction(r)&&(r={serialize:r});const l=r&&r.serialize;let d;if(l?d=l(a,r):d=et.isURLSearchParams(a)?a.toString():new Wm(a,r).toString(i),d){const f=t.indexOf("#");f!==-1&&(t=t.slice(0,f)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class Ly{constructor(){this.handlers=[]}use(a,r,i){return this.handlers.push({fulfilled:a,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){et.forEach(this.handlers,function(i){i!==null&&a(i)})}}const wv={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Rj=typeof URLSearchParams<"u"?URLSearchParams:Wm,Dj=typeof FormData<"u"?FormData:null,Oj=typeof Blob<"u"?Blob:null,Ij={isBrowser:!0,classes:{URLSearchParams:Rj,FormData:Dj,Blob:Oj},protocols:["http","https","file","blob","url","data"]},Km=typeof window<"u"&&typeof document<"u",pm=typeof navigator=="object"&&navigator||void 0,Fj=Km&&(!pm||["ReactNative","NativeScript","NS"].indexOf(pm.product)<0),Mj=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bj=Km&&window.location.href||"http://localhost",Lj=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Km,hasStandardBrowserEnv:Fj,hasStandardBrowserWebWorkerEnv:Mj,navigator:pm,origin:Bj},Symbol.toStringTag,{value:"Module"})),is={...Lj,...Ij};function Pj(t,a){return hf(t,new is.classes.URLSearchParams,{visitor:function(r,i,l,d){return is.isNode&&et.isBuffer(r)?(this.append(i,r.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...a})}function zj(t){return et.matchAll(/\w+|\[(\w*)]/g,t).map(a=>a[0]==="[]"?"":a[1]||a[0])}function Uj(t){const a={},r=Object.keys(t);let i;const l=r.length;let d;for(i=0;i<l;i++)d=r[i],a[d]=t[d];return a}function Nv(t){function a(r,i,l,d){let f=r[d++];if(f==="__proto__")return!0;const h=Number.isFinite(+f),b=d>=r.length;return f=!f&&et.isArray(l)?l.length:f,b?(et.hasOwnProp(l,f)?l[f]=[l[f],i]:l[f]=i,!h):((!l[f]||!et.isObject(l[f]))&&(l[f]=[]),a(r,i,l[f],d)&&et.isArray(l[f])&&(l[f]=Uj(l[f])),!h)}if(et.isFormData(t)&&et.isFunction(t.entries)){const r={};return et.forEachEntry(t,(i,l)=>{a(zj(i),l,r,0)}),r}return null}function Hj(t,a,r){if(et.isString(t))try{return(a||JSON.parse)(t),et.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(t)}const nd={transitional:wv,adapter:["xhr","http","fetch"],transformRequest:[function(a,r){const i=r.getContentType()||"",l=i.indexOf("application/json")>-1,d=et.isObject(a);if(d&&et.isHTMLForm(a)&&(a=new FormData(a)),et.isFormData(a))return l?JSON.stringify(Nv(a)):a;if(et.isArrayBuffer(a)||et.isBuffer(a)||et.isStream(a)||et.isFile(a)||et.isBlob(a)||et.isReadableStream(a))return a;if(et.isArrayBufferView(a))return a.buffer;if(et.isURLSearchParams(a))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let h;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Pj(a,this.formSerializer).toString();if((h=et.isFileList(a))||i.indexOf("multipart/form-data")>-1){const b=this.env&&this.env.FormData;return hf(h?{"files[]":a}:a,b&&new b,this.formSerializer)}}return d||l?(r.setContentType("application/json",!1),Hj(a)):a}],transformResponse:[function(a){const r=this.transitional||nd.transitional,i=r&&r.forcedJSONParsing,l=this.responseType==="json";if(et.isResponse(a)||et.isReadableStream(a))return a;if(a&&et.isString(a)&&(i&&!this.responseType||l)){const f=!(r&&r.silentJSONParsing)&&l;try{return JSON.parse(a)}catch(h){if(f)throw h.name==="SyntaxError"?rr.from(h,rr.ERR_BAD_RESPONSE,this,null,this.response):h}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:is.classes.FormData,Blob:is.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};et.forEach(["delete","get","head","post","put","patch"],t=>{nd.headers[t]={}});const Vj=et.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Gj=t=>{const a={};let r,i,l;return t&&t.split(`
`).forEach(function(f){l=f.indexOf(":"),r=f.substring(0,l).trim().toLowerCase(),i=f.substring(l+1).trim(),!(!r||a[r]&&Vj[r])&&(r==="set-cookie"?a[r]?a[r].push(i):a[r]=[i]:a[r]=a[r]?a[r]+", "+i:i)}),a},Py=Symbol("internals");function w0(t){return t&&String(t).trim().toLowerCase()}function Mu(t){return t===!1||t==null?t:et.isArray(t)?t.map(Mu):String(t)}function Xj(t){const a=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(t);)a[i[1]]=i[2];return a}const qj=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Ah(t,a,r,i,l){if(et.isFunction(i))return i.call(this,a,r);if(l&&(a=r),!!et.isString(a)){if(et.isString(i))return a.indexOf(i)!==-1;if(et.isRegExp(i))return i.test(a)}}function $j(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,r,i)=>r.toUpperCase()+i)}function Yj(t,a){const r=et.toCamelCase(" "+a);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+r,{value:function(l,d,f){return this[i].call(this,a,l,d,f)},configurable:!0})})}let Rs=class{constructor(a){a&&this.set(a)}set(a,r,i){const l=this;function d(h,b,p){const w=w0(b);if(!w)throw new Error("header name must be a non-empty string");const j=et.findKey(l,w);(!j||l[j]===void 0||p===!0||p===void 0&&l[j]!==!1)&&(l[j||b]=Mu(h))}const f=(h,b)=>et.forEach(h,(p,w)=>d(p,w,b));if(et.isPlainObject(a)||a instanceof this.constructor)f(a,r);else if(et.isString(a)&&(a=a.trim())&&!qj(a))f(Gj(a),r);else if(et.isObject(a)&&et.isIterable(a)){let h={},b,p;for(const w of a){if(!et.isArray(w))throw TypeError("Object iterator must return a key-value pair");h[p=w[0]]=(b=h[p])?et.isArray(b)?[...b,w[1]]:[b,w[1]]:w[1]}f(h,r)}else a!=null&&d(r,a,i);return this}get(a,r){if(a=w0(a),a){const i=et.findKey(this,a);if(i){const l=this[i];if(!r)return l;if(r===!0)return Xj(l);if(et.isFunction(r))return r.call(this,l,i);if(et.isRegExp(r))return r.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,r){if(a=w0(a),a){const i=et.findKey(this,a);return!!(i&&this[i]!==void 0&&(!r||Ah(this,this[i],i,r)))}return!1}delete(a,r){const i=this;let l=!1;function d(f){if(f=w0(f),f){const h=et.findKey(i,f);h&&(!r||Ah(i,i[h],h,r))&&(delete i[h],l=!0)}}return et.isArray(a)?a.forEach(d):d(a),l}clear(a){const r=Object.keys(this);let i=r.length,l=!1;for(;i--;){const d=r[i];(!a||Ah(this,this[d],d,a,!0))&&(delete this[d],l=!0)}return l}normalize(a){const r=this,i={};return et.forEach(this,(l,d)=>{const f=et.findKey(i,d);if(f){r[f]=Mu(l),delete r[d];return}const h=a?$j(d):String(d).trim();h!==d&&delete r[d],r[h]=Mu(l),i[h]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const r=Object.create(null);return et.forEach(this,(i,l)=>{i!=null&&i!==!1&&(r[l]=a&&et.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,r])=>a+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...r){const i=new this(a);return r.forEach(l=>i.set(l)),i}static accessor(a){const i=(this[Py]=this[Py]={accessors:{}}).accessors,l=this.prototype;function d(f){const h=w0(f);i[h]||(Yj(l,f),i[h]=!0)}return et.isArray(a)?a.forEach(d):d(a),this}};Rs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);et.reduceDescriptors(Rs.prototype,({value:t},a)=>{let r=a[0].toUpperCase()+a.slice(1);return{get:()=>t,set(i){this[r]=i}}});et.freezeMethods(Rs);function Sh(t,a){const r=this||nd,i=a||r,l=Rs.from(i.headers);let d=i.data;return et.forEach(t,function(h){d=h.call(r,d,l.normalize(),a?a.status:void 0)}),l.normalize(),d}function kv(t){return!!(t&&t.__CANCEL__)}function kc(t,a,r){rr.call(this,t??"canceled",rr.ERR_CANCELED,a,r),this.name="CanceledError"}et.inherits(kc,rr,{__CANCEL__:!0});function jv(t,a,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?t(r):a(new rr("Request failed with status code "+r.status,[rr.ERR_BAD_REQUEST,rr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Wj(t){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return a&&a[1]||""}function Kj(t,a){t=t||10;const r=new Array(t),i=new Array(t);let l=0,d=0,f;return a=a!==void 0?a:1e3,function(b){const p=Date.now(),w=i[d];f||(f=p),r[l]=b,i[l]=p;let j=d,C=0;for(;j!==l;)C+=r[j++],j=j%t;if(l=(l+1)%t,l===d&&(d=(d+1)%t),p-f<a)return;const _=w&&p-w;return _?Math.round(C*1e3/_):void 0}}function Zj(t,a){let r=0,i=1e3/a,l,d;const f=(p,w=Date.now())=>{r=w,l=null,d&&(clearTimeout(d),d=null),t(...p)};return[(...p)=>{const w=Date.now(),j=w-r;j>=i?f(p,w):(l=p,d||(d=setTimeout(()=>{d=null,f(l)},i-j)))},()=>l&&f(l)]}const zu=(t,a,r=3)=>{let i=0;const l=Kj(50,250);return Zj(d=>{const f=d.loaded,h=d.lengthComputable?d.total:void 0,b=f-i,p=l(b),w=f<=h;i=f;const j={loaded:f,total:h,progress:h?f/h:void 0,bytes:b,rate:p||void 0,estimated:p&&h&&w?(h-f)/p:void 0,event:d,lengthComputable:h!=null,[a?"download":"upload"]:!0};t(j)},r)},zy=(t,a)=>{const r=t!=null;return[i=>a[0]({lengthComputable:r,total:t,loaded:i}),a[1]]},Uy=t=>(...a)=>et.asap(()=>t(...a)),Qj=is.hasStandardBrowserEnv?((t,a)=>r=>(r=new URL(r,is.origin),t.protocol===r.protocol&&t.host===r.host&&(a||t.port===r.port)))(new URL(is.origin),is.navigator&&/(msie|trident)/i.test(is.navigator.userAgent)):()=>!0,Jj=is.hasStandardBrowserEnv?{write(t,a,r,i,l,d){const f=[t+"="+encodeURIComponent(a)];et.isNumber(r)&&f.push("expires="+new Date(r).toGMTString()),et.isString(i)&&f.push("path="+i),et.isString(l)&&f.push("domain="+l),d===!0&&f.push("secure"),document.cookie=f.join("; ")},read(t){const a=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function e6(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function t6(t,a){return a?t.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):t}function Ev(t,a,r){let i=!e6(a);return t&&(i||r==!1)?t6(t,a):a}const Hy=t=>t instanceof Rs?{...t}:t;function no(t,a){a=a||{};const r={};function i(p,w,j,C){return et.isPlainObject(p)&&et.isPlainObject(w)?et.merge.call({caseless:C},p,w):et.isPlainObject(w)?et.merge({},w):et.isArray(w)?w.slice():w}function l(p,w,j,C){if(et.isUndefined(w)){if(!et.isUndefined(p))return i(void 0,p,j,C)}else return i(p,w,j,C)}function d(p,w){if(!et.isUndefined(w))return i(void 0,w)}function f(p,w){if(et.isUndefined(w)){if(!et.isUndefined(p))return i(void 0,p)}else return i(void 0,w)}function h(p,w,j){if(j in a)return i(p,w);if(j in t)return i(void 0,p)}const b={url:d,method:d,data:d,baseURL:f,transformRequest:f,transformResponse:f,paramsSerializer:f,timeout:f,timeoutMessage:f,withCredentials:f,withXSRFToken:f,adapter:f,responseType:f,xsrfCookieName:f,xsrfHeaderName:f,onUploadProgress:f,onDownloadProgress:f,decompress:f,maxContentLength:f,maxBodyLength:f,beforeRedirect:f,transport:f,httpAgent:f,httpsAgent:f,cancelToken:f,socketPath:f,responseEncoding:f,validateStatus:h,headers:(p,w,j)=>l(Hy(p),Hy(w),j,!0)};return et.forEach(Object.keys({...t,...a}),function(w){const j=b[w]||l,C=j(t[w],a[w],w);et.isUndefined(C)&&j!==h||(r[w]=C)}),r}const Cv=t=>{const a=no({},t);let{data:r,withXSRFToken:i,xsrfHeaderName:l,xsrfCookieName:d,headers:f,auth:h}=a;a.headers=f=Rs.from(f),a.url=vv(Ev(a.baseURL,a.url,a.allowAbsoluteUrls),t.params,t.paramsSerializer),h&&f.set("Authorization","Basic "+btoa((h.username||"")+":"+(h.password?unescape(encodeURIComponent(h.password)):"")));let b;if(et.isFormData(r)){if(is.hasStandardBrowserEnv||is.hasStandardBrowserWebWorkerEnv)f.setContentType(void 0);else if((b=f.getContentType())!==!1){const[p,...w]=b?b.split(";").map(j=>j.trim()).filter(Boolean):[];f.setContentType([p||"multipart/form-data",...w].join("; "))}}if(is.hasStandardBrowserEnv&&(i&&et.isFunction(i)&&(i=i(a)),i||i!==!1&&Qj(a.url))){const p=l&&d&&Jj.read(d);p&&f.set(l,p)}return a},r6=typeof XMLHttpRequest<"u",a6=r6&&function(t){return new Promise(function(r,i){const l=Cv(t);let d=l.data;const f=Rs.from(l.headers).normalize();let{responseType:h,onUploadProgress:b,onDownloadProgress:p}=l,w,j,C,_,R;function A(){_&&_(),R&&R(),l.cancelToken&&l.cancelToken.unsubscribe(w),l.signal&&l.signal.removeEventListener("abort",w)}let O=new XMLHttpRequest;O.open(l.method.toUpperCase(),l.url,!0),O.timeout=l.timeout;function I(){if(!O)return;const T=Rs.from("getAllResponseHeaders"in O&&O.getAllResponseHeaders()),H={data:!h||h==="text"||h==="json"?O.responseText:O.response,status:O.status,statusText:O.statusText,headers:T,config:t,request:O};jv(function(L){r(L),A()},function(L){i(L),A()},H),O=null}"onloadend"in O?O.onloadend=I:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(I)},O.onabort=function(){O&&(i(new rr("Request aborted",rr.ECONNABORTED,t,O)),O=null)},O.onerror=function(){i(new rr("Network Error",rr.ERR_NETWORK,t,O)),O=null},O.ontimeout=function(){let B=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const H=l.transitional||wv;l.timeoutErrorMessage&&(B=l.timeoutErrorMessage),i(new rr(B,H.clarifyTimeoutError?rr.ETIMEDOUT:rr.ECONNABORTED,t,O)),O=null},d===void 0&&f.setContentType(null),"setRequestHeader"in O&&et.forEach(f.toJSON(),function(B,H){O.setRequestHeader(H,B)}),et.isUndefined(l.withCredentials)||(O.withCredentials=!!l.withCredentials),h&&h!=="json"&&(O.responseType=l.responseType),p&&([C,R]=zu(p,!0),O.addEventListener("progress",C)),b&&O.upload&&([j,_]=zu(b),O.upload.addEventListener("progress",j),O.upload.addEventListener("loadend",_)),(l.cancelToken||l.signal)&&(w=T=>{O&&(i(!T||T.type?new kc(null,t,O):T),O.abort(),O=null)},l.cancelToken&&l.cancelToken.subscribe(w),l.signal&&(l.signal.aborted?w():l.signal.addEventListener("abort",w)));const M=Wj(l.url);if(M&&is.protocols.indexOf(M)===-1){i(new rr("Unsupported protocol "+M+":",rr.ERR_BAD_REQUEST,t));return}O.send(d||null)})},s6=(t,a)=>{const{length:r}=t=t?t.filter(Boolean):[];if(a||r){let i=new AbortController,l;const d=function(p){if(!l){l=!0,h();const w=p instanceof Error?p:this.reason;i.abort(w instanceof rr?w:new kc(w instanceof Error?w.message:w))}};let f=a&&setTimeout(()=>{f=null,d(new rr(`timeout ${a} of ms exceeded`,rr.ETIMEDOUT))},a);const h=()=>{t&&(f&&clearTimeout(f),f=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(d):p.removeEventListener("abort",d)}),t=null)};t.forEach(p=>p.addEventListener("abort",d));const{signal:b}=i;return b.unsubscribe=()=>et.asap(h),b}},n6=function*(t,a){let r=t.byteLength;if(r<a){yield t;return}let i=0,l;for(;i<r;)l=i+a,yield t.slice(i,l),i=l},i6=async function*(t,a){for await(const r of l6(t))yield*n6(r,a)},l6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const a=t.getReader();try{for(;;){const{done:r,value:i}=await a.read();if(r)break;yield i}}finally{await a.cancel()}},Vy=(t,a,r,i)=>{const l=i6(t,a);let d=0,f,h=b=>{f||(f=!0,i&&i(b))};return new ReadableStream({async pull(b){try{const{done:p,value:w}=await l.next();if(p){h(),b.close();return}let j=w.byteLength;if(r){let C=d+=j;r(C)}b.enqueue(new Uint8Array(w))}catch(p){throw h(p),p}},cancel(b){return h(b),l.return()}},{highWaterMark:2})},mf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_v=mf&&typeof ReadableStream=="function",o6=mf&&(typeof TextEncoder=="function"?(t=>a=>t.encode(a))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Av=(t,...a)=>{try{return!!t(...a)}catch{return!1}},c6=_v&&Av(()=>{let t=!1;const a=new Request(is.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!a}),Gy=64*1024,ym=_v&&Av(()=>et.isReadableStream(new Response("").body)),Uu={stream:ym&&(t=>t.body)};mf&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!Uu[a]&&(Uu[a]=et.isFunction(t[a])?r=>r[a]():(r,i)=>{throw new rr(`Response type '${a}' is not supported`,rr.ERR_NOT_SUPPORT,i)})})})(new Response);const d6=async t=>{if(t==null)return 0;if(et.isBlob(t))return t.size;if(et.isSpecCompliantForm(t))return(await new Request(is.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(et.isArrayBufferView(t)||et.isArrayBuffer(t))return t.byteLength;if(et.isURLSearchParams(t)&&(t=t+""),et.isString(t))return(await o6(t)).byteLength},u6=async(t,a)=>{const r=et.toFiniteNumber(t.getContentLength());return r??d6(a)},f6=mf&&(async t=>{let{url:a,method:r,data:i,signal:l,cancelToken:d,timeout:f,onDownloadProgress:h,onUploadProgress:b,responseType:p,headers:w,withCredentials:j="same-origin",fetchOptions:C}=Cv(t);p=p?(p+"").toLowerCase():"text";let _=s6([l,d&&d.toAbortSignal()],f),R;const A=_&&_.unsubscribe&&(()=>{_.unsubscribe()});let O;try{if(b&&c6&&r!=="get"&&r!=="head"&&(O=await u6(w,i))!==0){let H=new Request(a,{method:"POST",body:i,duplex:"half"}),U;if(et.isFormData(i)&&(U=H.headers.get("content-type"))&&w.setContentType(U),H.body){const[L,P]=zy(O,zu(Uy(b)));i=Vy(H.body,Gy,L,P)}}et.isString(j)||(j=j?"include":"omit");const I="credentials"in Request.prototype;R=new Request(a,{...C,signal:_,method:r.toUpperCase(),headers:w.normalize().toJSON(),body:i,duplex:"half",credentials:I?j:void 0});let M=await fetch(R,C);const T=ym&&(p==="stream"||p==="response");if(ym&&(h||T&&A)){const H={};["status","statusText","headers"].forEach(z=>{H[z]=M[z]});const U=et.toFiniteNumber(M.headers.get("content-length")),[L,P]=h&&zy(U,zu(Uy(h),!0))||[];M=new Response(Vy(M.body,Gy,L,()=>{P&&P(),A&&A()}),H)}p=p||"text";let B=await Uu[et.findKey(Uu,p)||"text"](M,t);return!T&&A&&A(),await new Promise((H,U)=>{jv(H,U,{data:B,headers:Rs.from(M.headers),status:M.status,statusText:M.statusText,config:t,request:R})})}catch(I){throw A&&A(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new rr("Network Error",rr.ERR_NETWORK,t,R),{cause:I.cause||I}):rr.from(I,I&&I.code,t,R)}}),bm={http:_j,xhr:a6,fetch:f6};et.forEach(bm,(t,a)=>{if(t){try{Object.defineProperty(t,"name",{value:a})}catch{}Object.defineProperty(t,"adapterName",{value:a})}});const Xy=t=>`- ${t}`,x6=t=>et.isFunction(t)||t===null||t===!1,Sv={getAdapter:t=>{t=et.isArray(t)?t:[t];const{length:a}=t;let r,i;const l={};for(let d=0;d<a;d++){r=t[d];let f;if(i=r,!x6(r)&&(i=bm[(f=String(r)).toLowerCase()],i===void 0))throw new rr(`Unknown adapter '${f}'`);if(i)break;l[f||"#"+d]=i}if(!i){const d=Object.entries(l).map(([h,b])=>`adapter ${h} `+(b===!1?"is not supported by the environment":"is not available in the build"));let f=a?d.length>1?`since :
`+d.map(Xy).join(`
`):" "+Xy(d[0]):"as no adapter specified";throw new rr("There is no suitable adapter to dispatch the request "+f,"ERR_NOT_SUPPORT")}return i},adapters:bm};function Th(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new kc(null,t)}function qy(t){return Th(t),t.headers=Rs.from(t.headers),t.data=Sh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Sv.getAdapter(t.adapter||nd.adapter)(t).then(function(i){return Th(t),i.data=Sh.call(t,t.transformResponse,i),i.headers=Rs.from(i.headers),i},function(i){return kv(i)||(Th(t),i&&i.response&&(i.response.data=Sh.call(t,t.transformResponse,i.response),i.response.headers=Rs.from(i.response.headers))),Promise.reject(i)})}const Tv="1.11.0",gf={};["object","boolean","number","function","string","symbol"].forEach((t,a)=>{gf[t]=function(i){return typeof i===t||"a"+(a<1?"n ":" ")+t}});const $y={};gf.transitional=function(a,r,i){function l(d,f){return"[Axios v"+Tv+"] Transitional option '"+d+"'"+f+(i?". "+i:"")}return(d,f,h)=>{if(a===!1)throw new rr(l(f," has been removed"+(r?" in "+r:"")),rr.ERR_DEPRECATED);return r&&!$y[f]&&($y[f]=!0,console.warn(l(f," has been deprecated since v"+r+" and will be removed in the near future"))),a?a(d,f,h):!0}};gf.spelling=function(a){return(r,i)=>(console.warn(`${i} is likely a misspelling of ${a}`),!0)};function h6(t,a,r){if(typeof t!="object")throw new rr("options must be an object",rr.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let l=i.length;for(;l-- >0;){const d=i[l],f=a[d];if(f){const h=t[d],b=h===void 0||f(h,d,t);if(b!==!0)throw new rr("option "+d+" must be "+b,rr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new rr("Unknown option "+d,rr.ERR_BAD_OPTION)}}const Bu={assertOptions:h6,validators:gf},Kn=Bu.validators;let to=class{constructor(a){this.defaults=a||{},this.interceptors={request:new Ly,response:new Ly}}async request(a,r){try{return await this._request(a,r)}catch(i){if(i instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const d=l.stack?l.stack.replace(/^.+\n/,""):"";try{i.stack?d&&!String(i.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+d):i.stack=d}catch{}}throw i}}_request(a,r){typeof a=="string"?(r=r||{},r.url=a):r=a||{},r=no(this.defaults,r);const{transitional:i,paramsSerializer:l,headers:d}=r;i!==void 0&&Bu.assertOptions(i,{silentJSONParsing:Kn.transitional(Kn.boolean),forcedJSONParsing:Kn.transitional(Kn.boolean),clarifyTimeoutError:Kn.transitional(Kn.boolean)},!1),l!=null&&(et.isFunction(l)?r.paramsSerializer={serialize:l}:Bu.assertOptions(l,{encode:Kn.function,serialize:Kn.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Bu.assertOptions(r,{baseUrl:Kn.spelling("baseURL"),withXsrfToken:Kn.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let f=d&&et.merge(d.common,d[r.method]);d&&et.forEach(["delete","get","head","post","put","patch","common"],R=>{delete d[R]}),r.headers=Rs.concat(f,d);const h=[];let b=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(r)===!1||(b=b&&A.synchronous,h.unshift(A.fulfilled,A.rejected))});const p=[];this.interceptors.response.forEach(function(A){p.push(A.fulfilled,A.rejected)});let w,j=0,C;if(!b){const R=[qy.bind(this),void 0];for(R.unshift(...h),R.push(...p),C=R.length,w=Promise.resolve(r);j<C;)w=w.then(R[j++],R[j++]);return w}C=h.length;let _=r;for(j=0;j<C;){const R=h[j++],A=h[j++];try{_=R(_)}catch(O){A.call(this,O);break}}try{w=qy.call(this,_)}catch(R){return Promise.reject(R)}for(j=0,C=p.length;j<C;)w=w.then(p[j++],p[j++]);return w}getUri(a){a=no(this.defaults,a);const r=Ev(a.baseURL,a.url,a.allowAbsoluteUrls);return vv(r,a.params,a.paramsSerializer)}};et.forEach(["delete","get","head","options"],function(a){to.prototype[a]=function(r,i){return this.request(no(i||{},{method:a,url:r,data:(i||{}).data}))}});et.forEach(["post","put","patch"],function(a){function r(i){return function(d,f,h){return this.request(no(h||{},{method:a,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:f}))}}to.prototype[a]=r(),to.prototype[a+"Form"]=r(!0)});let m6=class Rv{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(d){r=d});const i=this;this.promise.then(l=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](l);i._listeners=null}),this.promise.then=l=>{let d;const f=new Promise(h=>{i.subscribe(h),d=h}).then(l);return f.cancel=function(){i.unsubscribe(d)},f},a(function(d,f,h){i.reason||(i.reason=new kc(d,f,h),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const r=this._listeners.indexOf(a);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const a=new AbortController,r=i=>{a.abort(i)};return this.subscribe(r),a.signal.unsubscribe=()=>this.unsubscribe(r),a.signal}static source(){let a;return{token:new Rv(function(l){a=l}),cancel:a}}};function g6(t){return function(r){return t.apply(null,r)}}function p6(t){return et.isObject(t)&&t.isAxiosError===!0}const vm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(vm).forEach(([t,a])=>{vm[a]=t});function Dv(t){const a=new to(t),r=ov(to.prototype.request,a);return et.extend(r,to.prototype,a,{allOwnKeys:!0}),et.extend(r,a,null,{allOwnKeys:!0}),r.create=function(l){return Dv(no(t,l))},r}const na=Dv(nd);na.Axios=to;na.CanceledError=kc;na.CancelToken=m6;na.isCancel=kv;na.VERSION=Tv;na.toFormData=hf;na.AxiosError=rr;na.Cancel=na.CanceledError;na.all=function(a){return Promise.all(a)};na.spread=g6;na.isAxiosError=p6;na.mergeConfig=no;na.AxiosHeaders=Rs;na.formToJSON=t=>Nv(et.isHTMLForm(t)?new FormData(t):t);na.getAdapter=Sv.getAdapter;na.HttpStatusCode=vm;na.default=na;const{Axios:_I,AxiosError:AI,CanceledError:SI,isCancel:TI,CancelToken:RI,VERSION:DI,all:OI,Cancel:II,isAxiosError:FI,spread:MI,toFormData:BI,AxiosHeaders:LI,HttpStatusCode:PI,formToJSON:zI,getAdapter:UI,mergeConfig:HI}=na,Se=na.create({baseURL:"https://apmt.apivcm.shop/api",withCredentials:!0});let Rh=!1,wm=[];const Yy=(t,a=null)=>{wm.forEach(r=>{t?r.reject(t):r.resolve(a)}),wm=[]};Se.interceptors.request.use(t=>{const a=["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries","/auth/verify","/auth/resend","/auth/forgot-password-unified","/auth/reset-password-unified","/auth/check-reset-token","/auth/verify-invite-link","/auth/complete-registration"],r=t.url||"";if(a.some(l=>r?r.includes(l)||t.baseURL&&(t.baseURL+r).includes(l):!1))return t.withCredentials=!1,t.headers&&t.headers.Authorization&&delete t.headers.Authorization,t;try{const l=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");l&&(t.headers=t.headers||{},t.headers.Authorization=`Bearer ${l}`),t.withCredentials=!0}catch{}return t},t=>Promise.reject(t));Se.interceptors.response.use(t=>t,async t=>{const a=t.config,r=a.url||"";if(["/auth/register","/auth/login-unified","/auth/refresh","/tenants","/countries"].some(h=>r.includes(h)))return Promise.reject(t);const d=t.response?.status;if((t.response?.data?.requiresLogin||d===401||d===403)&&!a._retry){if(a._retry=!0,Rh)return new Promise((h,b)=>{wm.push({resolve:h,reject:b})}).then(h=>(a.headers.Authorization=`Bearer ${h}`,Se(a))).catch(h=>Promise.reject(h));Rh=!0;try{const h=await na.post("https://apmt.apivcm.shop/api/auth/refresh",{},{withCredentials:!0,validateStatus:b=>b<500});if(h.status===200&&h.data?.accessToken){const b=h.data.accessToken;return localStorage.setItem("accessToken",b),sessionStorage.setItem("accessToken",b),Se.defaults.headers.common.Authorization=`Bearer ${b}`,a.headers.Authorization=`Bearer ${b}`,Yy(null,b),Se(a)}else throw new Error("Refresh failed")}catch(h){return console.log("Token refresh failed, clearing tokens"),localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken"),delete Se.defaults.headers.common.Authorization,Yy(h,null),typeof window<"u"&&(window.location.href="/login?session=expired"),Promise.reject(h)}finally{Rh=!1}}if(t.response&&t.response.data&&t.response.data.requiresLogin){try{localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken")}catch{}return delete Se.defaults.headers.common.Authorization,typeof window<"u"&&(window.location.href="/login?session=expired"),Promise.reject(t)}return t.response&&t.response.status===429&&console.error("Rate limited. Please wait before trying again."),Promise.reject(t)});const Ir=E.createContext(null);function y6({children:t}){const[a,r]=E.useState(()=>{const C=localStorage.getItem("houseOwnerToken"),_=localStorage.getItem("houseOwnerData"),R=localStorage.getItem("userType");if(C&&_&&R==="houseowner")return{accessToken:C,user:JSON.parse(_),userType:"houseowner"};const A=localStorage.getItem("auth");return A?{...JSON.parse(A),userType:localStorage.getItem("userType")||"admin"}:{accessToken:null,user:null,userType:null}}),i=xr(),l=E.useRef(null),d=600*1e3,f=E.useCallback(()=>{r({accessToken:null,user:null,userType:null}),localStorage.removeItem("auth"),localStorage.removeItem("accessToken"),localStorage.removeItem("user"),localStorage.removeItem("userType"),localStorage.removeItem("houseOwnerToken"),localStorage.removeItem("houseOwnerData"),localStorage.removeItem("lastActivity"),l.current&&(clearTimeout(l.current),l.current=null);try{localStorage.setItem("logout",Date.now().toString())}catch{}i("/login")},[i]),h=E.useCallback(()=>{l.current&&clearTimeout(l.current);try{localStorage.setItem("lastActivity",Date.now().toString())}catch{}l.current=setTimeout(()=>{f()},d)},[f,d]),b=E.useCallback(()=>{const C=["mousemove","mousedown","pointerdown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"];let _=0;const R=()=>{const O=Date.now();O-_>1e3&&(_=O,h())};C.forEach(O=>{document.addEventListener(O,R,{passive:!0,capture:!0})});const A=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",A),()=>{C.forEach(O=>{document.removeEventListener(O,R,{capture:!0})}),document.removeEventListener("visibilitychange",A),l.current&&(clearTimeout(l.current),l.current=null)}},[h]);E.useEffect(()=>{if(a&&a.accessToken){const C=localStorage.getItem("lastActivity");if(C){const A=parseInt(C,10),O=Date.now()-A;if(O>d){f();return}const I=d-O;l.current&&clearTimeout(l.current),l.current=setTimeout(f,I)}else h();const _=b(),R=A=>{try{if(A.key==="lastActivity"&&A.newValue){const O=parseInt(A.newValue,10),I=Date.now()-O;l.current&&clearTimeout(l.current);const M=d-I;M<=0?f():l.current=setTimeout(f,M)}A.key==="logout"&&f()}catch{}};return window.addEventListener("storage",R),()=>{window.removeEventListener("storage",R),_()}}else l.current&&clearTimeout(l.current)},[a,h,b,f,d]);const p=E.useCallback(C=>{const _=C.user?.isHouseOwner?"houseowner":"admin",R={...C,userType:_};r(R),C&&C.accessToken?(_==="houseowner"?(localStorage.setItem("houseOwnerToken",C.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(C.user))):(localStorage.setItem("auth",JSON.stringify(C)),localStorage.setItem("accessToken",C.accessToken),localStorage.setItem("user",JSON.stringify(C.user))),localStorage.setItem("userType",_),h()):f()},[h,f]),w=E.useCallback(async()=>{try{a.userType==="houseowner"?await Se.post("/houseowner-auth/logout",{},{credentials:"include"}):await Se.post("/auth/logout",{},{credentials:"include"})}catch(C){console.error("Logout error:",C)}finally{f()}},[f,a.userType]),j={auth:a,setAuth:p,logout:w,resetActivityTimer:h};return e.jsx(Ir.Provider,{value:j,children:t})}/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b6=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),v6=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(a,r,i)=>i?i.toUpperCase():r.toLowerCase()),Wy=t=>{const a=v6(t);return a.charAt(0).toUpperCase()+a.slice(1)},Ov=(...t)=>t.filter((a,r,i)=>!!a&&a.trim()!==""&&i.indexOf(a)===r).join(" ").trim(),w6=t=>{for(const a in t)if(a.startsWith("aria-")||a==="role"||a==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var N6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=E.forwardRef(({color:t="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:d,iconNode:f,...h},b)=>E.createElement("svg",{ref:b,...N6,width:a,height:a,stroke:t,strokeWidth:i?Number(r)*24/Number(a):r,className:Ov("lucide",l),...!d&&!w6(h)&&{"aria-hidden":"true"},...h},[...f.map(([p,w])=>E.createElement(p,w)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=(t,a)=>{const r=E.forwardRef(({className:i,...l},d)=>E.createElement(k6,{ref:d,iconNode:a,className:Ov(`lucide-${b6(Wy(t))}`,`lucide-${t}`,i),...l}));return r.displayName=Wy(t),r};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M11 9a1 1 0 0 0 1-1V5.061a1 1 0 0 1 1.811-.75l6.836 6.836a1.207 1.207 0 0 1 0 1.707l-6.836 6.835a1 1 0 0 1-1.811-.75V16a1 1 0 0 0-1-1H5a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z",key:"1232du"}]],Ky=bt("arrow-big-right",j6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E6=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],mc=bt("arrow-left",E6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],_6=bt("arrow-right",C6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],S6=bt("arrow-up-right",A6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T6=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],R6=bt("award",T6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"m16 19 3 3 3-3",key:"1ibux0"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],O6=bt("banknote-arrow-down",D6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I6=[["path",{d:"M10 4 8 6",key:"1rru8s"}],["path",{d:"M17 19v2",key:"ts1sot"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"M7 19v2",key:"12npes"}],["path",{d:"M9 5 7.621 3.621A2.121 2.121 0 0 0 4 5v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5",key:"14ym8i"}]],F6=bt("bath",I6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],B6=bt("bed",M6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L6=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Hu=bt("briefcase",L6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],za=bt("building-2",P6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z6=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],Ri=bt("building",z6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U6=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],H6=bt("calendar-clock",U6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Nl=bt("calendar",V6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Iv=bt("camera",G6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],Lu=bt("chart-no-axes-column-increasing",X6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],dn=bt("check",q6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],kl=bt("chevron-down",$6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Sn=bt("chevron-left",Y6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W6=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],P0=bt("chevron-right",W6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],gc=bt("chevron-up",K6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Na=bt("circle-alert",Z6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ds=bt("circle-check-big",Q6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],eE=bt("circle-play",J6);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]],rE=bt("circle-stop",tE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Vu=bt("circle-x",aE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],Zy=bt("clipboard-list",sE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cn=bt("clock",nE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Zm=bt("credit-card",iE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gs=bt("dollar-sign",lE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Cl=bt("download",oE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cE=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Tn=bt("eye-off",cE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dE=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ys=bt("eye",dE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uE=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],fE=bt("file-spreadsheet",uE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xE=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],yr=bt("file-text",xE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hE=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],id=bt("funnel",hE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mE=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Fv=bt("globe",mE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gE=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],pE=bt("hash",gE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yE=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],Ur=bt("house",yE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bE=[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]],Mv=bt("id-card",bE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vE=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],$s=bt("image",vE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wE=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],NE=bt("key",wE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kE=[["path",{d:"M13 13.74a2 2 0 0 1-2 0L2.5 8.87a1 1 0 0 1 0-1.74L11 2.26a2 2 0 0 1 2 0l8.5 4.87a1 1 0 0 1 0 1.74z",key:"15q6uc"}],["path",{d:"m20 14.285 1.5.845a1 1 0 0 1 0 1.74L13 21.74a2 2 0 0 1-2 0l-8.5-4.87a1 1 0 0 1 0-1.74l1.5-.845",key:"byia6g"}]],jE=bt("layers-2",kE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EE=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],pf=bt("layers",EE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CE=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],_E=bt("layout-dashboard",CE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AE=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],Xt=bt("loader",AE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SE=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Nm=bt("log-out",SE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TE=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],io=bt("mail",TE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RE=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],lo=bt("map-pin",RE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DE=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],OE=bt("maximize-2",DE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IE=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],jc=bt("menu",IE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FE=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],km=bt("moon",FE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ME=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],BE=bt("palette",ME);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LE=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],PE=bt("pause",LE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zE=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],UE=bt("phone-call",zE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HE=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ec=bt("phone",HE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VE=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Bv=bt("play",VE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GE=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fa=bt("plus",GE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XE=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],z0=bt("qr-code",XE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qE=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ka=bt("receipt",qE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $E=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],jm=bt("refresh-cw",$E);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YE=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Lv=bt("rotate-cw",YE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WE=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],yf=bt("save",WE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KE=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ns=bt("search",KE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZE=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Pv=bt("send",ZE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QE=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Gu=bt("settings",QE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JE=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Qy=bt("shield-check",JE);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],pc=bt("shield",eC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],rC=bt("square-check-big",tC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aC=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ja=bt("square-pen",aC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sC=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],U0=bt("square",sC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],iC=bt("star",nC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lC=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Em=bt("sun",lC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oC=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],zv=bt("tag",oC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cC=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],Uv=bt("timer",cC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dC=[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],oo=bt("toggle-left",dC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uC=[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]],co=bt("toggle-right",uC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fC=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Fr=bt("trash-2",fC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xC=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],hC=bt("triangle-alert",xC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mC=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Os=bt("upload",mC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gC=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pC=bt("user-check",gC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Xu=bt("user-plus",yC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bC=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],cs=bt("user",bC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vC=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],ei=bt("users",vC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wC=[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]],Jy=bt("workflow",wC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]],qu=bt("wrench",NC);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mr=bt("x",kC);function Hv(t){var a,r,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var l=t.length;for(a=0;a<l;a++)t[a]&&(r=Hv(t[a]))&&(i&&(i+=" "),i+=r)}else for(r in t)t[r]&&(i&&(i+=" "),i+=r);return i}function ro(){for(var t,a,r=0,i="",l=arguments.length;r<l;r++)(t=arguments[r])&&(a=Hv(t))&&(i&&(i+=" "),i+=a);return i}function jC(t){if(typeof document>"u")return;let a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}jC(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var ld=t=>typeof t=="number"&&!isNaN(t),uo=t=>typeof t=="string",Di=t=>typeof t=="function",EC=t=>uo(t)||ld(t),Cm=t=>uo(t)||Di(t)?t:null,CC=(t,a)=>t===!1||ld(t)&&t>0?t:a,_m=t=>E.isValidElement(t)||uo(t)||Di(t)||ld(t);function _C(t,a,r=300){let{scrollHeight:i,style:l}=t;requestAnimationFrame(()=>{l.minHeight="initial",l.height=i+"px",l.transition=`all ${r}ms`,requestAnimationFrame(()=>{l.height="0",l.padding="0",l.margin="0",setTimeout(a,r)})})}function AC({enter:t,exit:a,appendPosition:r=!1,collapse:i=!0,collapseDuration:l=300}){return function({children:d,position:f,preventExitTransition:h,done:b,nodeRef:p,isIn:w,playToast:j}){let C=r?`${t}--${f}`:t,_=r?`${a}--${f}`:a,R=E.useRef(0);return E.useLayoutEffect(()=>{let A=p.current,O=C.split(" "),I=M=>{M.target===p.current&&(j(),A.removeEventListener("animationend",I),A.removeEventListener("animationcancel",I),R.current===0&&M.type!=="animationcancel"&&A.classList.remove(...O))};A.classList.add(...O),A.addEventListener("animationend",I),A.addEventListener("animationcancel",I)},[]),E.useEffect(()=>{let A=p.current,O=()=>{A.removeEventListener("animationend",O),i?_C(A,b,l):b()};w||(h?O():(R.current=1,A.className+=` ${_}`,A.addEventListener("animationend",O)))},[w]),Tr.createElement(Tr.Fragment,null,d)}}function eb(t,a){return{content:Vv(t.content,t.props),containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,reason:t.removalReason,status:a}}function Vv(t,a,r=!1){return E.isValidElement(t)&&!uo(t.type)?E.cloneElement(t,{closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):Di(t)?t({closeToast:a.closeToast,toastProps:a,data:a.data,isPaused:r}):t}function SC({closeToast:t,theme:a,ariaLabel:r="close"}){return Tr.createElement("button",{className:`Toastify__close-button Toastify__close-button--${a}`,type:"button",onClick:i=>{i.stopPropagation(),t(!0)},"aria-label":r},Tr.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Tr.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function TC({delay:t,isRunning:a,closeToast:r,type:i="default",hide:l,className:d,controlledProgress:f,progress:h,rtl:b,isIn:p,theme:w}){let j=l||f&&h===0,C={animationDuration:`${t}ms`,animationPlayState:a?"running":"paused"};f&&(C.transform=`scaleX(${h})`);let _=ro("Toastify__progress-bar",f?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${w}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":b}),R=Di(d)?d({rtl:b,type:i,defaultClassName:_}):ro(_,d),A={[f&&h>=1?"onTransitionEnd":"onAnimationEnd"]:f&&h<1?null:()=>{p&&r()}};return Tr.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":j},Tr.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${w} Toastify__progress-bar--${i}`}),Tr.createElement("div",{role:"progressbar","aria-hidden":j?"true":"false","aria-label":"notification timer",className:R,style:C,...A}))}var RC=1,Gv=()=>`${RC++}`;function DC(t,a,r){let i=1,l=0,d=[],f=[],h=a,b=new Map,p=new Set,w=M=>(p.add(M),()=>p.delete(M)),j=()=>{f=Array.from(b.values()),p.forEach(M=>M())},C=({containerId:M,toastId:T,updateId:B})=>{let H=M?M!==t:t!==1,U=b.has(T)&&B==null;return H||U},_=(M,T)=>{b.forEach(B=>{var H;(T==null||T===B.props.toastId)&&((H=B.toggle)==null||H.call(B,M))})},R=M=>{var T,B;(B=(T=M.props)==null?void 0:T.onClose)==null||B.call(T,M.removalReason),M.isActive=!1},A=M=>{if(M==null)b.forEach(R);else{let T=b.get(M);T&&R(T)}j()},O=()=>{l-=d.length,d=[]},I=M=>{var T,B;let{toastId:H,updateId:U}=M.props,L=U==null;M.staleId&&b.delete(M.staleId),M.isActive=!0,b.set(H,M),j(),r(eb(M,L?"added":"updated")),L&&((B=(T=M.props).onOpen)==null||B.call(T))};return{id:t,props:h,observe:w,toggle:_,removeToast:A,toasts:b,clearQueue:O,buildToast:(M,T)=>{if(C(T))return;let{toastId:B,updateId:H,data:U,staleId:L,delay:P}=T,z=H==null;z&&l++;let K={...h,style:h.toastStyle,key:i++,...Object.fromEntries(Object.entries(T).filter(([V,ne])=>ne!=null)),toastId:B,updateId:H,data:U,isIn:!1,className:Cm(T.className||h.toastClassName),progressClassName:Cm(T.progressClassName||h.progressClassName),autoClose:T.isLoading?!1:CC(T.autoClose,h.autoClose),closeToast(V){b.get(B).removalReason=V,A(B)},deleteToast(){let V=b.get(B);if(V!=null){if(r(eb(V,"removed")),b.delete(B),l--,l<0&&(l=0),d.length>0){I(d.shift());return}j()}}};K.closeButton=h.closeButton,T.closeButton===!1||_m(T.closeButton)?K.closeButton=T.closeButton:T.closeButton===!0&&(K.closeButton=_m(h.closeButton)?h.closeButton:!0);let te={content:M,props:K,staleId:L};h.limit&&h.limit>0&&l>h.limit&&z?d.push(te):ld(P)?setTimeout(()=>{I(te)},P):I(te)},setProps(M){h=M},setToggle:(M,T)=>{let B=b.get(M);B&&(B.toggle=T)},isToastActive:M=>{var T;return(T=b.get(M))==null?void 0:T.isActive},getSnapshot:()=>f}}var bs=new Map,H0=[],Am=new Set,OC=t=>Am.forEach(a=>a(t)),Xv=()=>bs.size>0;function IC(){H0.forEach(t=>$v(t.content,t.options)),H0=[]}var FC=(t,{containerId:a})=>{var r;return(r=bs.get(a||1))==null?void 0:r.toasts.get(t)};function qv(t,a){var r;if(a)return!!((r=bs.get(a))!=null&&r.isToastActive(t));let i=!1;return bs.forEach(l=>{l.isToastActive(t)&&(i=!0)}),i}function MC(t){if(!Xv()){H0=H0.filter(a=>t!=null&&a.options.toastId!==t);return}if(t==null||EC(t))bs.forEach(a=>{a.removeToast(t)});else if(t&&("containerId"in t||"id"in t)){let a=bs.get(t.containerId);a?a.removeToast(t.id):bs.forEach(r=>{r.removeToast(t.id)})}}var BC=(t={})=>{bs.forEach(a=>{a.props.limit&&(!t.containerId||a.id===t.containerId)&&a.clearQueue()})};function $v(t,a){_m(t)&&(Xv()||H0.push({content:t,options:a}),bs.forEach(r=>{r.buildToast(t,a)}))}function LC(t){var a;(a=bs.get(t.containerId||1))==null||a.setToggle(t.id,t.fn)}function Yv(t,a){bs.forEach(r=>{(a==null||!(a!=null&&a.containerId)||a?.containerId===r.id)&&r.toggle(t,a?.id)})}function PC(t){let a=t.containerId||1;return{subscribe(r){let i=DC(a,t,OC);bs.set(a,i);let l=i.observe(r);return IC(),()=>{l(),bs.delete(a)}},setProps(r){var i;(i=bs.get(a))==null||i.setProps(r)},getSnapshot(){var r;return(r=bs.get(a))==null?void 0:r.getSnapshot()}}}function zC(t){return Am.add(t),()=>{Am.delete(t)}}function UC(t){return t&&(uo(t.toastId)||ld(t.toastId))?t.toastId:Gv()}function od(t,a){return $v(t,a),a.toastId}function bf(t,a){return{...a,type:a&&a.type||t,toastId:UC(a)}}function vf(t){return(a,r)=>od(a,bf(t,r))}function le(t,a){return od(t,bf("default",a))}le.loading=(t,a)=>od(t,bf("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...a}));function HC(t,{pending:a,error:r,success:i},l){let d;a&&(d=uo(a)?le.loading(a,l):le.loading(a.render,{...l,...a}));let f={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},h=(p,w,j)=>{if(w==null){le.dismiss(d);return}let C={type:p,...f,...l,data:j},_=uo(w)?{render:w}:w;return d?le.update(d,{...C,..._}):le(_.render,{...C,..._}),j},b=Di(t)?t():t;return b.then(p=>h("success",i,p)).catch(p=>h("error",r,p)),b}le.promise=HC;le.success=vf("success");le.info=vf("info");le.error=vf("error");le.warning=vf("warning");le.warn=le.warning;le.dark=(t,a)=>od(t,bf("default",{theme:"dark",...a}));function VC(t){MC(t)}le.dismiss=VC;le.clearWaitingQueue=BC;le.isActive=qv;le.update=(t,a={})=>{let r=FC(t,a);if(r){let{props:i,content:l}=r,d={delay:100,...i,...a,toastId:a.toastId||t,updateId:Gv()};d.toastId!==t&&(d.staleId=t);let f=d.render||l;delete d.render,od(f,d)}};le.done=t=>{le.update(t,{progress:1})};le.onChange=zC;le.play=t=>Yv(!0,t);le.pause=t=>Yv(!1,t);function GC(t){var a;let{subscribe:r,getSnapshot:i,setProps:l}=E.useRef(PC(t)).current;l(t);let d=(a=E.useSyncExternalStore(r,i,i))==null?void 0:a.slice();function f(h){if(!d)return[];let b=new Map;return t.newestOnTop&&d.reverse(),d.forEach(p=>{let{position:w}=p.props;b.has(w)||b.set(w,[]),b.get(w).push(p)}),Array.from(b,p=>h(p[0],p[1]))}return{getToastToRender:f,isToastActive:qv,count:d?.length}}function XC(t){let[a,r]=E.useState(!1),[i,l]=E.useState(!1),d=E.useRef(null),f=E.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:h,pauseOnHover:b,closeToast:p,onClick:w,closeOnClick:j}=t;LC({id:t.toastId,containerId:t.containerId,fn:r}),E.useEffect(()=>{if(t.pauseOnFocusLoss)return C(),()=>{_()}},[t.pauseOnFocusLoss]);function C(){document.hasFocus()||I(),window.addEventListener("focus",O),window.addEventListener("blur",I)}function _(){window.removeEventListener("focus",O),window.removeEventListener("blur",I)}function R(L){if(t.draggable===!0||t.draggable===L.pointerType){M();let P=d.current;f.canCloseOnClick=!0,f.canDrag=!0,P.style.transition="none",t.draggableDirection==="x"?(f.start=L.clientX,f.removalDistance=P.offsetWidth*(t.draggablePercent/100)):(f.start=L.clientY,f.removalDistance=P.offsetHeight*(t.draggablePercent===80?t.draggablePercent*1.5:t.draggablePercent)/100)}}function A(L){let{top:P,bottom:z,left:K,right:te}=d.current.getBoundingClientRect();L.nativeEvent.type!=="touchend"&&t.pauseOnHover&&L.clientX>=K&&L.clientX<=te&&L.clientY>=P&&L.clientY<=z?I():O()}function O(){r(!0)}function I(){r(!1)}function M(){f.didMove=!1,document.addEventListener("pointermove",B),document.addEventListener("pointerup",H)}function T(){document.removeEventListener("pointermove",B),document.removeEventListener("pointerup",H)}function B(L){let P=d.current;if(f.canDrag&&P){f.didMove=!0,a&&I(),t.draggableDirection==="x"?f.delta=L.clientX-f.start:f.delta=L.clientY-f.start,f.start!==L.clientX&&(f.canCloseOnClick=!1);let z=t.draggableDirection==="x"?`${f.delta}px, var(--y)`:`0, calc(${f.delta}px + var(--y))`;P.style.transform=`translate3d(${z},0)`,P.style.opacity=`${1-Math.abs(f.delta/f.removalDistance)}`}}function H(){T();let L=d.current;if(f.canDrag&&f.didMove&&L){if(f.canDrag=!1,Math.abs(f.delta)>f.removalDistance){l(!0),t.closeToast(!0),t.collapseAll();return}L.style.transition="transform 0.2s, opacity 0.2s",L.style.removeProperty("transform"),L.style.removeProperty("opacity")}}let U={onPointerDown:R,onPointerUp:A};return h&&b&&(U.onMouseEnter=I,t.stacked||(U.onMouseLeave=O)),j&&(U.onClick=L=>{w&&w(L),f.canCloseOnClick&&p(!0)}),{playToast:O,pauseToast:I,isRunning:a,preventExitTransition:i,toastRef:d,eventHandlers:U}}var qC=typeof window<"u"?E.useLayoutEffect:E.useEffect,wf=({theme:t,type:a,isLoading:r,...i})=>Tr.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:t==="colored"?"currentColor":`var(--toastify-icon-color-${a})`,...i});function $C(t){return Tr.createElement(wf,{...t},Tr.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function YC(t){return Tr.createElement(wf,{...t},Tr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function WC(t){return Tr.createElement(wf,{...t},Tr.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function KC(t){return Tr.createElement(wf,{...t},Tr.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function ZC(){return Tr.createElement("div",{className:"Toastify__spinner"})}var Sm={info:YC,warning:$C,success:WC,error:KC,spinner:ZC},QC=t=>t in Sm;function JC({theme:t,type:a,isLoading:r,icon:i}){let l=null,d={theme:t,type:a};return i===!1||(Di(i)?l=i({...d,isLoading:r}):E.isValidElement(i)?l=E.cloneElement(i,d):r?l=Sm.spinner():QC(a)&&(l=Sm[a](d))),l}var e8=t=>{let{isRunning:a,preventExitTransition:r,toastRef:i,eventHandlers:l,playToast:d}=XC(t),{closeButton:f,children:h,autoClose:b,onClick:p,type:w,hideProgressBar:j,closeToast:C,transition:_,position:R,className:A,style:O,progressClassName:I,updateId:M,role:T,progress:B,rtl:H,toastId:U,deleteToast:L,isIn:P,isLoading:z,closeOnClick:K,theme:te,ariaLabel:V}=t,ne=ro("Toastify__toast",`Toastify__toast-theme--${te}`,`Toastify__toast--${w}`,{"Toastify__toast--rtl":H},{"Toastify__toast--close-on-click":K}),ie=Di(A)?A({rtl:H,position:R,type:w,defaultClassName:ne}):ro(ne,A),X=JC(t),q=!!B||!b,ce={closeToast:C,type:w,theme:te},we=null;return f===!1||(Di(f)?we=f(ce):E.isValidElement(f)?we=E.cloneElement(f,ce):we=SC(ce)),Tr.createElement(_,{isIn:P,done:L,position:R,preventExitTransition:r,nodeRef:i,playToast:d},Tr.createElement("div",{id:U,tabIndex:0,onClick:p,"data-in":P,className:ie,...l,style:O,ref:i,...P&&{role:T,"aria-label":V}},X!=null&&Tr.createElement("div",{className:ro("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!z})},X),Vv(h,t,!a),we,!t.customProgressBar&&Tr.createElement(TC,{...M&&!q?{key:`p-${M}`}:{},rtl:H,theme:te,delay:b,isRunning:a,isIn:P,closeToast:C,hide:j,type:w,className:I,controlledProgress:q,progress:B||0})))},t8=(t,a=!1)=>({enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:a}),r8=AC(t8("bounce",!0)),a8={position:"top-right",transition:r8,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:t=>t.altKey&&t.code==="KeyT"};function nr(t){let a={...a8,...t},r=t.stacked,[i,l]=E.useState(!0),d=E.useRef(null),{getToastToRender:f,isToastActive:h,count:b}=GC(a),{className:p,style:w,rtl:j,containerId:C,hotKeys:_}=a;function R(O){let I=ro("Toastify__toast-container",`Toastify__toast-container--${O}`,{"Toastify__toast-container--rtl":j});return Di(p)?p({position:O,rtl:j,defaultClassName:I}):ro(I,Cm(p))}function A(){r&&(l(!0),le.play())}return qC(()=>{var O;if(r){let I=d.current.querySelectorAll('[data-in="true"]'),M=12,T=(O=a.position)==null?void 0:O.includes("top"),B=0,H=0;Array.from(I).reverse().forEach((U,L)=>{let P=U;P.classList.add("Toastify__toast--stacked"),L>0&&(P.dataset.collapsed=`${i}`),P.dataset.pos||(P.dataset.pos=T?"top":"bot");let z=B*(i?.2:1)+(i?0:M*L);P.style.setProperty("--y",`${T?z:z*-1}px`),P.style.setProperty("--g",`${M}`),P.style.setProperty("--s",`${1-(i?H:0)}`),B+=P.offsetHeight,H+=.025})}},[i,b,r]),E.useEffect(()=>{function O(I){var M;let T=d.current;_(I)&&((M=T.querySelector('[tabIndex="0"]'))==null||M.focus(),l(!1),le.pause()),I.key==="Escape"&&(document.activeElement===T||T!=null&&T.contains(document.activeElement))&&(l(!0),le.play())}return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}},[_]),Tr.createElement("section",{ref:d,className:"Toastify",id:C,onMouseEnter:()=>{r&&(l(!1),le.pause())},onMouseLeave:A,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":a["aria-label"]},f((O,I)=>{let M=I.length?{...w}:{...w,pointerEvents:"none"};return Tr.createElement("div",{tabIndex:-1,className:R(O),"data-stacked":r,style:M,key:`c-${O}`},I.map(({content:T,props:B})=>Tr.createElement(e8,{...B,stacked:r,collapseAll:A,isIn:h(B.toastId,B.containerId),key:`t-${B.key}`},T)))}))}function s8(){const{setAuth:t}=E.useContext(Ir),[a,r]=E.useState(""),[i,l]=E.useState(""),[d,f]=E.useState(!1),[h,b]=E.useState(null),[p,w]=E.useState(!1),[j,C]=E.useState(!1),[_,R]=E.useState(!1),[A,O]=E.useState(0),[I,M]=E.useState("admin"),T=xr();let[B,H]=td();E.useEffect(()=>{const q=B.get("token"),ce=B.get("id"),we=B.get("type");q&&ce&&(we==="houseowner"?L(q,ce):U(q,ce))},[B]);const U=async(q,ce)=>{w(!0),b(null);try{await Se.post("/auth/verify",{token:q,id:ce}),le.success("Email verified successfully! You can now log in."),H({})}catch(we){le.error(we.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}},L=async(q,ce)=>{w(!0),b(null);try{const we=await Se.post("/houseowner-auth/verify",{token:q,id:ce});we.data.success&&(we.data.requires_password?(le.success("Email verified! Please set your password."),T(`/houseowner/set-password?token=${q}&id=${ce}`)):(le.success("Email verified successfully! You can now log in."),H({})))}catch(we){le.error(we.response?.data?.message||"Verification failed. The link may be invalid or expired.")}finally{w(!1)}};async function P(q){if(q.preventDefault(),!(p||_)){b(null),w(!0);try{const ce=await Se.post("/auth/login-unified",{email:a,password:i});if(ce.data.accessToken){t({accessToken:ce.data.accessToken,user:ce.data.user}),le.success("Login Successful!");try{localStorage.setItem("accessToken",ce.data.accessToken),localStorage.setItem("user",JSON.stringify(ce.data.user)),localStorage.setItem("userType",ce.data.user.user_type)}catch(we){console.warn("Could not save to localStorage:",we)}z(ce.data.user);return}}catch(ce){K(ce)}finally{w(!1)}}}const z=q=>{q.user_type==="houseowner"?T("/houseowner/dashboard"):q.role==="Admin"?T("/admindashboard"):T("/employee-dashboard")},K=q=>{if(q.response?.status===429)te(q);else{const we=q.response?.data?.message||"Login failed";b(we),le.error(we),(we.includes("verify")||we.includes("verified"))&&V()}},te=q=>{const ce=q.response?.headers?.["retry-after"],we=ce?Math.max(1,Number(ce)):60;le.error(`Too many requests. Please wait ${we}s before trying again.`),R(!0),O(we);try{localStorage.setItem("rateLimitedUntil",Date.now()+we*1e3)}catch(re){console.warn("Could not save rate limit info:",re)}let oe=we;const fe=setInterval(()=>{if(oe-=1,O(oe),oe<=0){clearInterval(fe),R(!1),O(0);try{localStorage.removeItem("rateLimitedUntil")}catch(re){console.warn("Could not clear rate limit info:",re)}}},1e3)},V=()=>{le.info(e.jsxs("div",{children:[e.jsx("p",{children:"Need a new verification email?"}),e.jsx("button",{onClick:ne,className:"mt-2 px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",disabled:j,children:j?"Sending...":"Resend Verification"})]}),{autoClose:5e3})},ne=async q=>{if(q.preventDefault(),!a){le.error("Please enter your email first");return}C(!0);try{I==="houseowner"?await Se.post("/houseowner-auth/resend-verification",{email:a}):await Se.post("/auth/resend",{email:a}),le.success("Verification email sent! Please check your inbox.")}catch(ce){le.error(ce.response?.data?.message||"Failed to resend verification email")}finally{C(!1)}},ie=()=>{T("/forgot-password")},X=()=>{T("/")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-xl",children:"Log In"})]}),p&&e.jsx("div",{className:"mb-4 text-purple-600",children:"Verifying your email..."}),e.jsxs("form",{onSubmit:P,className:"loginForm",children:[e.jsx("div",{children:e.jsx("input",{value:a,onChange:q=>r(q.target.value),placeholder:"Email",className:"loginInput",type:"email",required:!0})}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:i,onChange:q=>l(q.target.value),placeholder:"Password",type:d?"text":"password",className:"loginInput",required:!0}),e.jsx("span",{type:"button",onClick:()=>f(!d),className:"passwordToggle","aria-label":d?"Hide password":"Show password",children:d?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})})]}),e.jsxs("div",{className:"loginButtonGroup",children:[e.jsx("button",{type:"submit",name:"submit",className:"loginButton loginButton--submit",disabled:p||_,children:_?`Try again in ${A}s`:p?"Please Wait...":"Login"}),e.jsx("button",{type:"button",name:"cancel",className:"loginButton loginButton--cancel",onClick:X,disabled:p,children:"Cancel"})]})]}),h&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 text-red-700 rounded-md text-center",children:h}),e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Forgot password?"," ",e.jsx("button",{type:"button",onClick:ie,className:"text-purple-700 hover:underline bg-white",children:"Reset"})]}),I==="admin"&&e.jsxs("p",{className:"mt-4 text-sm text-center text-gray-600",children:["Didn't get a verification email?"," ",e.jsx("button",{type:"button",onClick:ne,disabled:j,className:"text-purple-700 hover:underline disabled:text-gray-400 disabled:cursor-not-allowed bg-white",children:j?"Sending...":"Resend"})]}),I==="houseowner"&&e.jsx("p",{className:"mt-4 text-sm text-center text-gray-600",children:"Need help? Contact your apartment administrator."})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function n8(){const[t,a]=E.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:""}),[r,i]=E.useState({regNo:"",name:"",address:""}),[l,d]=E.useState({firstname:"",lastname:"",country:"",mobile:"",email:"",password:"",confirmPassword:"",regNo:"",name:"",address:""}),[f,h]=E.useState({firstname:!1,lastname:!1,country:!1,mobile:!1,email:!1,password:!1,confirmPassword:!1,regNo:!1,name:!1,address:!1}),[b,p]=E.useState(1),[w,j]=E.useState(!1),[C,_]=E.useState(!1),[R,A]=E.useState([]);E.useEffect(()=>{(async()=>{try{const q=await(await fetch("https://general.apivcm.shop/countries")).json();A(q.data)}catch(X){console.error("Error fetching countries:",X)}})()},[]);const O=ie=>{const X=ie.target.value,q=R.find(ce=>ce.country===X);if(a(ce=>({...ce,country:X,mobile:q?q.international_dialing+" ":ce.mobile})),f.country){const ce=T("country",X);d(we=>({...we,country:ce}))}},I=xr(),M=3,T=(ie,X)=>{let q="";switch(ie){case"firstname":X.trim()?X.length<3?q="First name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(X)?X.length>20&&(q="First name cannot exceed 20 characters"):q="First name can only contain letters, and numbers":q="First name is required";break;case"lastname":X.trim()?X.length<3?q="Last name must be at least 3 characters":/^[a-zA-Z0-9]+$/.test(X)?X.length>20&&(q="Last name cannot exceed 20 characters"):q="Last name can only contain letters, and numbers":q="Last name is required";break;case"country":X.trim()||(q="Country is required");break;case"mobile":X.trim()?/^\+\d{1,4} \d{9,10}$/.test(X)?X.length>20&&(q="Mobile cannot exceed 20 digits"):q="Mobile must be in format +XXX XXXXXXXXXX (country code followed by 9-10 digits)":q="Mobile Number is required";break;case"email":X.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(X)||(q="Please enter a valid email address"):q="Email is required";break;case"password":X?X.length<8?q="Password must be at least 8 characters":/(?=.*[a-z])/.test(X)?/(?=.*[A-Z])/.test(X)?/(?=.*\d)/.test(X)?/(?=.*[@$!%*?&])/.test(X)||(q="Password must contain at least one special character (@$!%*?&)"):q="Password must contain at least one number":q="Password must contain at least one uppercase letter":q="Password must contain at least one lowercase letter":q="Password is required";break;case"confirmPassword":X?X!==t.password&&(q="Passwords do not match"):q="Please confirm your password";break;case"regNo":X.trim()?X.length<2&&(q="Business REgistration No must be at least 2 characters"):q="Business Registration No is required";break;case"name":X.trim()?X.length<2&&(q="Company name must be at least 2 characters"):q="Company name is required";break;case"address":X.trim()?X.length<3&&(q="Company address must be at least 3 characters"):q="Company address is required";break}return q},B=(ie,X=!1)=>{const{name:q,value:ce}=ie.target;if(X?i(we=>({...we,[q]:ce})):a(we=>({...we,[q]:ce})),f[q]){const we=T(q,ce);d(oe=>({...oe,[q]:we}))}},H=(ie,X=!1)=>{const{name:q}=ie.target;h(oe=>({...oe,[q]:!0}));const ce=X?r[q]:t[q],we=T(q,ce);d(oe=>({...oe,[q]:we}))},U=ie=>{if(a(X=>({...X,confirmPassword:ie})),f.confirmPassword){const X=T("confirmPassword",ie);d(q=>({...q,confirmPassword:X}))}},L=ie=>{const X={},q={};let ce=!0;return{1:["regNo","name","address"],2:["firstname","lastname","country","mobile","email"],3:["password","confirmPassword"]}[ie].forEach(oe=>{q[oe]=!0;const fe=oe in r?r[oe]:t[oe],re=T(oe,fe);X[oe]=re,re&&(ce=!1)}),h(oe=>({...oe,...q})),d(oe=>({...oe,...X})),ce},P=()=>{L(b)?p(b+1):le.warn("Please fix the validation errors before proceeding")},z=()=>{p(b-1)};async function K(ie){ie.preventDefault();let X=!0;for(let q=1;q<=M;q++)if(!L(q)){X=!1,q!==b&&p(q);break}if(!X){le.warn("Please fix all validation errors before submitting");return}try{const q={regNo:r.regNo,name:r.name,address:r.address},we=(await Se.post("/tenants",q)).data.data.id,oe=await Se.post("/auth/register",{firstname:t.firstname,lastname:t.lastname,country:t.country,mobile:t.mobile,email:t.email,password:t.password,company_id:we});le.success("Registration successful! Company and user account created. Please check your email to verify your account."),setTimeout(()=>I("/login"),3e3)}catch(q){console.error("Registration error:",q),q.response?.status===403?le.error("Access denied. Please try registering again."):q.response?.data?.message?le.error(q.response.data.message):le.error("Registration failed. Please try again.")}}const V=(()=>{if(!t.password)return{strength:0,label:""};let ie=0;return t.password.length>=8&&ie++,/(?=.*[a-z])/.test(t.password)&&ie++,/(?=.*[A-Z])/.test(t.password)&&ie++,/(?=.*\d)/.test(t.password)&&ie++,/(?=.*[@$!%*?&])/.test(t.password)&&ie++,{strength:ie,label:["Very Weak","Weak","Fair","Good","Strong","Very Strong"][ie]}})(),ne=[{number:1,title:"Company Info"},{number:2,title:"User Info"},{number:3,title:"Security"}];return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex -6 mt-5",children:[e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-12 sm:w-10 md:w-11 mx-auto mb-6"}),e.jsx("h2",{className:"text-3xl sm:text-3xl md:text-3xl font-bold text-white mb-4",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"font-bold text-4xl items-center",children:"Get Start with AptSync"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"flex justify-between items-center mb-2",children:ne.map(ie=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${b>=ie.number?"bg-purple-600 text-white":"bg-gray-200 text-gray-500"}`,children:ie.number}),e.jsx("span",{className:"text-xs mt-1 hidden sm:block",children:ie.title})]},ie.number))}),e.jsx("div",{className:"w-full bg-gray-200 h-1 rounded",children:e.jsx("div",{className:"bg-purple-600 h-1 rounded transition-all duration-300",style:{width:`${(b-1)/(M-1)*100}%`}})})]}),e.jsxs("form",{onSubmit:K,className:"loginForm",children:[b===1&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Company Information"}),e.jsxs("div",{children:[e.jsx("input",{name:"regNo",value:r.regNo,onChange:ie=>B(ie,!0),onBlur:ie=>H(ie,!0),placeholder:"Company Registration No *",className:`loginInput ${l.regNo?"border-red-500":f.regNo&&"border-green-500"}`}),f.regNo&&l.regNo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.regNo]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"name",value:r.name,onChange:ie=>B(ie,!0),onBlur:ie=>H(ie,!0),placeholder:"Company Name *",className:`loginInput ${l.name?"border-red-500":f.name&&"border-green-500"}`}),f.name&&l.name&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.name]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"address",value:r.address,onChange:ie=>B(ie,!0),onBlur:ie=>H(ie,!0),placeholder:"Company Address *",className:`loginInput ${l.address?"border-red-500":f.address&&"border-green-500"}`}),f.businessInfo&&l.businessInfo&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.businessInfo]})]})]}),b===2&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"User Info"}),e.jsxs("div",{children:[e.jsx("input",{name:"firstname",value:t.firstname,onChange:ie=>B(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"First Name *",className:`loginInput ${l.firstname?"border-red-500":f.firstname&&"border-green-500"}`}),f.firstname&&l.firstname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.firstname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"lastname",value:t.lastname,onChange:ie=>B(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"Last Name *",className:`loginInput ${l.lastname?"border-red-500":f.lastname&&"border-green-500"}`}),f.lastname&&l.lastname&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.lastname]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"country",list:"country-list",value:t.country||"",onChange:O,onBlur:ie=>H(ie,!1),placeholder:"Select or type country *",className:`loginInput ${l.country?"border-red-500":f.country&&"border-green-500"}`}),e.jsx("datalist",{id:"country-list",children:R.map(ie=>e.jsx("option",{value:ie.country},ie.country))}),f.country&&l.country&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.country]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"mobile",value:t.mobile,onChange:ie=>{const X=t.mobile.split(" ")[0]||"",q=ie.target.value.replace(X+" ",""),we={target:{name:"mobile",value:X+(q?" "+q.replace(/\D/g,""):"")}};B(we,!1)},onBlur:ie=>H(ie,!1),placeholder:"Mobile * (e.g., +94 771234567)",className:`loginInput ${l.mobile?"border-red-500":f.mobile&&"border-green-500"}`}),f.mobile&&l.mobile&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.mobile]})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",type:"email",value:t.email,onChange:ie=>B(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"Email *",className:`loginInput ${l.email?"border-red-500":f.email&&"border-green-500"}`}),f.email&&l.email&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.email]})]})]}),b===3&&e.jsxs("div",{className:"space-y-4 animate-fadeIn",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Account Security"}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{name:"password",value:t.password,onChange:ie=>B(ie,!1),onBlur:ie=>H(ie,!1),placeholder:"Password *",type:w?"text":"password",className:`loginInput ${l.password?"border-red-500":f.password&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>j(!w),className:"passwordToggle","aria-label":w?"Hide password":"Show password",children:w?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})})]}),f.password&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 mb-1",children:["Password strength: ",V.label]}),e.jsx("div",{className:"w-full bg-gray-200 h-2 rounded",children:e.jsx("div",{className:`h-2 rounded transition-all duration-300 ${V.strength<2?"bg-red-500":V.strength<4?"bg-yellow-500":"bg-green-500"}`,style:{width:`${V.strength/5*100}%`}})}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Must include: uppercase, lowercase, number, special character (@$!%*?&), and be at least 8 characters long."})]}),f.password&&l.password&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.password]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{value:t.confirmPassword,onChange:ie=>U(ie.target.value),onBlur:()=>h(ie=>({...ie,confirmPassword:!0})),placeholder:"Confirm Password *",type:C?"text":"password",className:`loginInput ${l.confirmPassword?"border-red-500":f.confirmPassword&&t.confirmPassword&&"border-green-500"}`}),e.jsx("span",{type:"button",onClick:()=>_(!C),className:"passwordToggle","aria-label":C?"Hide password":"Show password",children:C?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})})]}),f.confirmPassword&&l.confirmPassword&&e.jsxs("div",{className:"text-red-500 text-sm mt-1 flex items-center",children:[e.jsx(mr,{size:14,className:"mr-1"})," ",l.confirmPassword]}),f.confirmPassword&&!l.confirmPassword&&t.confirmPassword&&e.jsxs("div",{className:"text-green-500 text-sm mt-1 flex items-center",children:[e.jsx(dn,{size:14,className:"mr-1"})," Passwords match!"]})]}),e.jsxs("div",{className:"loginButtonGroup mt-6",children:[b>1&&e.jsxs("button",{type:"button",onClick:z,className:"loginButton loginButton--cancel flex items-center justify-center",children:[e.jsx(Sn,{size:18,className:"mr-1"}),"Back"]}),b<M?e.jsxs("button",{type:"button",onClick:P,className:"loginButton loginButton--submit flex items-center justify-center",children:["Next",e.jsx(P0,{size:18,className:"ml-1"})]}):e.jsx("button",{type:"submit",className:"loginButton loginButton--submit",children:"Register"}),e.jsx("button",{type:"button",className:"loginButton loginButton--cancel",onClick:()=>I("/"),children:"Cancel"})]})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function i8(){const[t]=td(),a=xr(),[r,i]=E.useState(!1),[l,d]=E.useState("");E.useEffect(()=>{const h=t.get("token"),b=t.get("id");h&&b&&f(h,b)},[t]);const f=async(h,b)=>{try{i(!0);const p=await Se.post("/auth/verify",{token:h,id:b});d(p.data.message),le.success("Email verified successfully!"),setTimeout(()=>{a("/login")},3e3)}catch(p){console.error("Verification error:",p),d(p.response?.data?.message||"Verification failed"),le.error("Email verification failed")}finally{i(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-8 rounded-lg shadow-md max-w-md w-full",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800 dark:text-white",children:"Email Verification"}),r?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Verifying your email..."})]}):l?e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:l}),e.jsx("button",{onClick:()=>a("/login"),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Go to Login"})]}):e.jsx("div",{className:"text-center text-gray-600 dark:text-gray-300",children:e.jsx("p",{children:"No verification token found"})})]})})}function Hr(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),{auth:l,setAuth:d}=E.useContext(Ir),{logout:f,resetActivityTimer:h}=E.useContext(Ir),b=xr(),[p,w]=E.useState(!1);E.useEffect(()=>{const A=localStorage.getItem("theme"),O=window.matchMedia("(prefers-color-scheme: dark)").matches;A==="dark"||!A&&O?(i(!0),document.documentElement.classList.add("dark")):(i(!1),document.documentElement.classList.remove("dark"))},[]),E.useEffect(()=>{if(!l.accessToken)return;const A=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],O=()=>h();A.forEach(M=>window.addEventListener(M,O,{passive:!0}));const I=()=>{document.hidden||h()};return document.addEventListener("visibilitychange",I),()=>{A.forEach(M=>window.removeEventListener(M,O)),document.removeEventListener("visibilitychange",I)}},[l.accessToken,h]);const j=async()=>{try{await Se.post("/auth/logout"),f(),le.success("Logged out successfully"),b("/")}catch(A){console.error("Logout error:",A),f(),le.success("Logged out successfully"),b("/")}},C=()=>{w(!0)},_=()=>{w(!1)},R=()=>{const A=!r;i(A),A?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:R,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 relative",title:r?"Switch to light mode":"Switch to dark mode",children:r?e.jsx(Em,{size:20}):e.jsx(km,{size:20})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:l?.user?.firstname?.charAt(0)?.toUpperCase()})}),e.jsxs("div",{className:"hidden md:block text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:l?.user?.firstname}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 capitalize",children:l?.user?.role})]})]}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:C,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Nm,{size:20})})})]})]})}),t&&e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 transition-colors duration-200",children:e.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[e.jsx("div",{className:"px-3 py-2",children:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(Ns,{size:18,className:"text-gray-400 dark:text-gray-500"})}),e.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-sm transition-colors duration-200"})]})}),e.jsx("div",{className:"px-3 py-2",children:e.jsxs("button",{onClick:R,className:"flex items-center w-full px-3 py-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-md transition-colors duration-200",children:[r?e.jsx(Em,{size:18,className:"mr-2"}):e.jsx(km,{size:18,className:"mr-2"}),r?"Light Mode":"Dark Mode"]})}),e.jsx("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("button",{onClick:C,className:"flex items-center w-full px-3 py-2 text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors duration-200",children:[e.jsx(Nm,{size:18,className:"mr-2"}),"Logout"]})})]})}),p&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:_,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:j,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function vr(){const{auth:t}=E.useContext(Ir),a=Rn(),[r,i]=E.useState(!1),[l,d]=E.useState(null),[f,h]=E.useState([]),[b,p]=E.useState(!0),[w,j]=E.useState(Date.now()),[C,_]=E.useState(!1),[R,A]=E.useState(!1),O=t?.user?.role||"Admin",I=t?.user?.id;E.useEffect(()=>{const X=()=>{A(window.innerWidth<1024)};return X(),window.addEventListener("resize",X),()=>window.removeEventListener("resize",X)},[]),E.useEffect(()=>{_(!1)},[a.pathname]);const M=["employee_dashboard","profile"],T={employee_dashboard:{id:"employee_dashboard",name:"Dashboard",path:"/employee-dashboard",icon:Ur,isConstant:!0},profile:{id:"profile",name:"Profile",path:"/profile-page",icon:Gu,isConstant:!0},admin_dashboard:{id:"admin_dashboard",name:"Dashboard",path:"/admindashboard",icon:Ur,isConstant:!0},admin_profile:{id:"admin_profile",name:"Profile",path:"/profile-page",icon:Gu,isConstant:!0},users_management:{id:"users_management",name:"Users",path:"/userview",icon:ei,isConstant:!1},apartments_management:{id:"apartments_management",name:"Apartments",path:"/apartmentview",icon:za,isConstant:!1},expenses_management:{id:"expenses_management",name:"Expenses",icon:O6,isConstant:!1,children:[{name:"Bills",path:"/bills-and-calculations"},{name:"Bill Review",path:"/bill-payments"},{name:"Bill Payments",path:"/bill-payment-settle"}]},complaint_management:{id:"complaint_management",name:"Complaints",icon:Zy,isConstant:!1,children:[{name:"Complaint Categories",path:"/complaint-categories"},{name:"All Complaints",path:"/view-complaints"}]},company_management:{id:"company_management",name:"Company Set up",icon:Ri,isConstant:!1,children:[{name:"Import House owner",path:"/bulk-import-houseowner"}]},tenant_management:{id:"tenant_management",name:"Tenants",path:"/manager-tenants",icon:ei,isConstant:!1},my_apartments:{id:"my_apartments",name:"My Apartments",path:"/my-apartments",icon:za,isConstant:!1},my_bills:{id:"my_bills",name:"My Bills",path:"/my-bills",icon:Zm,isConstant:!1},my_complaints:{id:"my_complaints",name:"My Complaints",path:"/my-complaints",icon:Zy,isConstant:!1}},B=()=>["admin_dashboard","users_management","apartments_management","expenses_management","complaint_management","company_management","admin_profile"],H=async()=>{try{if(p(!0),O==="Admin"){h(B()),p(!1);return}try{const X=await Se.get("/role-components/user/components");if(X.data.success){const ce=(X.data.data||[]).filter(oe=>!M.includes(oe)),we=[...M,...ce];h(we)}else console.error("API returned error:",X.data.message),h([...M])}catch(X){console.error("Error fetching user components",X),h([...M])}}catch(X){console.error("Error in fetchUserComponents",X),h(O==="Admin"?B():[...M])}finally{p(!1)}};E.useEffect(()=>{H()},[O,I,w]);const U=()=>{j(Date.now())},P=f.map(q=>T[q]).filter(Boolean),z=X=>a.pathname===X,K=X=>d(l===X?null:X),te=()=>_(!C),V=()=>e.jsx("button",{onClick:te,className:"lg:hidden fixed top-4 left-4 z-50 p-2 rounded-md bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 text-purple-700 dark:text-purple-400",children:C?e.jsx(mr,{size:24}):e.jsx(jc,{size:24})}),ne=()=>e.jsxs("div",{className:`hidden lg:flex flex-col h-full bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 fixed left-0 top-0 z-40 transition-all duration-300 ${r?"w-20":"w-64"}`,children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[!r&&e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(jm,{size:16})})]}),r&&e.jsx("div",{className:"flex justify-center w-full",children:e.jsx("img",{className:"h-8 w-8",src:"/favicon.ico",alt:"Logo"})})]}),e.jsx("nav",{className:"p-4 space-y-1 flex-1 overflow-y-auto",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),!r&&e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(X=>{if(!X)return null;const q=X.icon;if(X.children){const ce=X.children.some(we=>we.path&&z(we.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>K(X.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===X.name||ce?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:X.name})]}),!r&&X.children&&X.children.length>0&&(l===X.name?e.jsx(gc,{size:16}):e.jsx(kl,{size:16}))]}),l===X.name&&!r&&X.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:X.children.map(we=>e.jsx(Ql,{to:we.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${z(we.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:we.name},we.name))})]},X.id)}return e.jsxs(Ql,{to:X.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${z(X.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(q,{size:20,className:r?"mx-auto":"mr-3"}),!r&&e.jsx("span",{children:X.name})]},X.id)})})]}),ie=()=>e.jsxs("div",{className:"lg:hidden fixed left-0 top-0 h-full w-64 z-50 bg-white dark:bg-gray-800 shadow-lg border-r border-gray-200 dark:border-gray-700 transform transition-transform duration-300 ease-in-out",style:{transform:C?"translateX(0)":"translateX(-100%)"},children:[e.jsx("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700 pt-16",children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{className:"text-xl font-bold text-gray-800 dark:text-gray-300",children:"AptSync"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:U,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-gray-600 dark:text-gray-400",title:"Refresh components",children:e.jsx(jm,{size:16})}),e.jsx("button",{onClick:te,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400",children:e.jsx(mr,{size:20})})]})]})}),e.jsx("nav",{className:"p-4 space-y-1",children:b?e.jsxs("div",{className:"flex justify-center items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Loading..."})]}):P.length===0?e.jsx("div",{className:"text-center py-4 text-gray-500 dark:text-gray-400 text-sm",children:"No components assigned"}):P.map(X=>{if(!X)return null;const q=X.icon;if(X.children){const ce=X.children.some(we=>we.path&&z(we.path));return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>K(X.name),className:`w-full flex items-center justify-between rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${l===X.name||ce?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:20,className:"mr-3"}),e.jsx("span",{children:X.name})]}),X.children&&X.children.length>0&&(l===X.name?e.jsx(gc,{size:16}):e.jsx(kl,{size:16}))]}),l===X.name&&X.children&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:X.children.map(we=>e.jsx(Ql,{to:we.path,className:`block rounded-lg px-3 py-2 text-sm transition-colors duration-200 ${z(we.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:we.name},we.name))})]},X.id)}return e.jsxs(Ql,{to:X.path,className:`flex items-center rounded-lg px-3 py-3 text-sm font-medium transition-colors duration-200 ${z(X.path)?"bg-purple-100 text-purple-700 border-r-2 border-purple-600 dark:bg-purple-900/20 dark:text-purple-300 dark:border-purple-500":"text-gray-600 hover:text-purple-600 hover:bg-gray-100 dark:text-gray-100 dark:hover:bg-gray-700 dark:hover:text-purple-300"}`,children:[e.jsx(q,{size:20,className:"mr-3"}),e.jsx("span",{children:X.name})]},X.id)})})]});return e.jsxs(e.Fragment,{children:[e.jsx(V,{}),C&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:te}),e.jsx(ie,{}),e.jsx(ne,{}),e.jsx("div",{className:"lg:hidden h-16"})]})}function Wv({onClose:t,onCreated:a}){const[r,i]=E.useState({apartment_id:"",name:"",address:"",city:"",image:null}),[l,d]=E.useState(!1),[f,h]=E.useState(""),b=j=>{const{name:C,value:_,files:R}=j.target;i(A=>({...A,[C]:R?R[0]:_}))},p=async()=>{try{const _=(await Se.get("/apartments")).data.data[0],R=_?parseInt(_.apartment_id.slice(3)):0,A=`A${String(R+1).padStart(3,"0")}`;i(O=>({...O,apartment_id:A}))}catch(j){console.error("Error fetching last apartment id:",j)}};E.useEffect(()=>{p()},[]);const w=async j=>{j.preventDefault(),h(""),d(!0);try{const C=new FormData;C.append("apartment_id",r.apartment_id),C.append("name",r.name),C.append("address",r.address),C.append("city",r.city),r.image&&C.append("picture",r.image);const _=await Se.post("/apartments",C,{headers:{"Content-Type":"multipart/form-data"}});d(!1),a&&a(),t&&t()}catch(C){le.error("Failed to create apartment"),console.error(C),d(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[f&&e.jsx("p",{className:"text-red-500",children:f}),e.jsx("input",{type:"text",name:"apartment_id",value:r.apartment_id,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:r.name,onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:r.address,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:r.city,onChange:b,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:b,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:l?"Saving...":"Save"})]})]})}function l8(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),l=xr(),[d,f]=E.useState([]),[h,b]=E.useState({}),[p,w]=E.useState({}),[j,C]=E.useState(!0),[_,R]=E.useState(null),[A,O]=E.useState(null),[I,M]=E.useState(!1),[T,B]=E.useState(null),[H,U]=E.useState(null),[L,P]=E.useState(!1),[z,K]=E.useState({name:"",address:"",description:"",contact_number:""}),te=()=>P(!1),V=oe=>{P(!1),oe&&(le.success("Apartment created"),ne())};E.useEffect(()=>{const oe=()=>{i(window.innerWidth<768)};return oe(),window.addEventListener("resize",oe),()=>window.removeEventListener("resize",oe)},[]);const ne=async()=>{try{const oe=await Se.get("/apartments");oe.data.success&&Array.isArray(oe.data.data)?(f(oe.data.data),await Promise.all(oe.data.data.map(fe=>ie(fe.id)))):Array.isArray(oe.data)?(f(oe.data),await Promise.all(oe.data.map(fe=>ie(fe.id)))):f([])}catch(oe){console.error("Error loading apartments:",oe),oe.response?.status===401?(R("Unauthorized. Please login."),l("/login")):oe.response?.status===400?R("Company info missing."):R("Failed to load apartments.")}finally{C(!1)}},ie=async oe=>{try{const fe=await Se.get(`/floors?apartment_id=${oe}`);fe.data.success&&Array.isArray(fe.data.data)&&(b(re=>({...re,[oe]:fe.data.data})),fe.data.data.forEach(re=>{X(oe,re.id)}))}catch(fe){console.error("Error loading floors:",fe),le.error("Failed to load floors")}},X=async(oe,fe)=>{try{const re=await Se.get(`/houses?apartment_id=${oe}&floor_id=${fe}`);re.data.success&&Array.isArray(re.data.data)&&w(Q=>({...Q,[fe]:re.data.data}))}catch(re){console.error("Error loading houses:",re)}},q=async oe=>{O(oe),M(!0),await ie(oe.id)},ce=oe=>{B(oe),U(H===oe?null:oe)},we=oe=>{switch(oe){case"occupied":return"bg-green-500 hover:bg-green-600";case"vacant":return"bg-gray-400 hover:bg-gray-400 dark:bg-gray-300 dark:hover:bg-gray-600";case"maintenance":return"bg-yellow-500 hover:bg-yellow-600";default:return"bg-gray-300 hover:bg-gray-400"}};return E.useEffect(()=>{ne()},[]),j?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col items-center justify-center h-64 space-y-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:"Loading Apartments..."})})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-16 lg:ml-20":"ml-0 lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 shadow-sm",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(za,{size:r?28:32,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Admin Dashboard"})})]})})}),_&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("div",{className:"flex items-start gap-3",children:e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300",children:_})})})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"All Apartments"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[d.map(oe=>{const fe=h[oe.id]||[],re=fe.flatMap(ae=>p[ae.id]||[]),Q=re.filter(ae=>ae.status==="occupied").length,Y=re.length?Math.round(Q/re.length*100):0;return e.jsxs("div",{onClick:()=>q(oe),className:"bg-white dark:bg-gray-800 rounded-xl shadow p-5 cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700 hover:border-purple-300 dark:hover:border-purple-700 group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(za,{size:20,className:"text-purple-600 dark:text-purple-400"}),e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors",children:oe.name})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2 mb-3",children:oe.address||"No address provided"})]}),e.jsx(P0,{size:20,className:"text-gray-400 group-hover:text-purple-500 transition-colors"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mt-4",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:fe.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Floors"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:re.length}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Houses"})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Occupied"}),e.jsxs("div",{className:"text-xs font-medium text-gray-700 dark:text-gray-200",children:[Y,"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 dark:bg-green-400",style:{width:`${Y}%`}})})]}),e.jsx("div",{className:"mt-4 flex items-center justify-between",children:e.jsx("div",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${oe.is_active?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400"}`,children:oe.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Ds,{size:12,className:"mr-1"}),"Active"]}):e.jsxs(e.Fragment,{children:[e.jsx(Vu,{size:12,className:"mr-1"}),"Inactive"]})})})]},oe.id)}),e.jsxs("div",{onClick:()=>P(!0),className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-800 dark:to-gray-700 border-2 border-dashed border-purple-300 dark:border-gray-600 rounded-xl p-6 flex flex-col items-center justify-center cursor-pointer hover:border-purple-400 dark:hover:border-gray-500 transition-all duration-200 min-h-[200px] group",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 dark:bg-purple-900/30 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-200 dark:group-hover:bg-purple-800/50 transition-colors",children:e.jsx(Fa,{size:32,className:"text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-purple-700 dark:text-purple-300 mb-2",children:"Add New Apartment"}),e.jsx("p",{className:"text-sm text-purple-600 dark:text-purple-400 text-center",children:"Click to create a new apartment complex"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-5",children:[e.jsx("div",{onClick:()=>l("/userview"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:e.jsx(ei,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Users"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage users"})]})]})}),e.jsx("div",{onClick:()=>l("/complaint-categories"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:e.jsx(id,{size:20,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Service Category"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage categories"})]})]})}),e.jsx("div",{onClick:()=>l("/bills-and-calculations"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsx(OE,{size:20,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Bills"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Create or view bills"})]})]})}),e.jsx("div",{onClick:()=>l("/view-complaints"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-yellow-50 dark:bg-yellow-900/10 rounded-lg",children:e.jsx(Fr,{size:20,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Complaints"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"View reports"})]})]})}),e.jsx("div",{onClick:()=>l("/bill-payments"),className:"bg-white dark:bg-gray-800 rounded-lg p-4 min-h-[96px] flex items-center justify-between cursor-pointer hover:shadow-lg transition-all duration-200 border border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg",children:e.jsx(Ds,{size:20,className:"text-indigo-600 dark:text-indigo-400"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-base font-medium text-gray-800 dark:text-white",children:"Bill Reviews"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Record payments"})]})]})})]})]})]})})]}),I&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl w-full max-w-6xl max-h-[90vh] overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 text-white",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[e.jsx(za,{size:28}),A.name]}),e.jsx("p",{className:"text-purple-100 mt-1",children:A.address})]}),e.jsx("button",{onClick:()=>M(!1),className:"text-white hover:text-gray-200 text-2xl",children:""})]})}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[70vh]",children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Occupied"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-400 dark:bg-gray-300 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Vacant"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Maintenance"})]})]}),e.jsx("div",{className:"space-y-8",children:h[A.id]?.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(za,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No floors added yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Add floors to start managing houses"})]}):h[A.id]?.map(oe=>{const fe=p[oe.id]||[],re=fe.filter(Q=>Q.status==="occupied").length;return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl p-5",children:[e.jsxs("div",{onClick:()=>ce(oe.id),className:"flex items-center justify-between mb-4 cursor-pointer p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Floor ",oe.floor_id]}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:[re," occupied  ",fe.length," total houses"]})]})}),e.jsx(P0,{size:24,className:`text-gray-500 transition-transform ${H===oe.id?"rotate-90":""}`})]}),H===oe.id&&e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-1",children:fe.length===0?e.jsxs("div",{className:"col-span-full text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(U0,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No houses added to this floor"})]}):fe.map(Q=>e.jsx("div",{className:"relative",title:`${Q.house_id||Q.house_number} - ${Q.status}`,children:e.jsx("div",{className:`${we(Q.status)} w-14 h-14 rounded-md flex items-center justify-center cursor-pointer transition-all duration-200 transform hover:scale-105 shadow hover:shadow-md`,children:e.jsx("span",{className:"font-bold text-white dark:text-gray-900 text-sm",children:Q.house_id||Q.house_number})})},Q.id))})})]},oe.id)})})]})]})}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:te,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(Wv,{onClose:te,onCreated:V})]})})})]})}function o8({onClose:t,onEdited:a,apartment:r}){const[i,l]=E.useState({name:"",address:"",city:"",image:null}),[d,f]=E.useState(!1),[h,b]=E.useState("");E.useEffect(()=>{r&&l({name:r.name||"",address:r.address||"",city:r.city||"",image:null})},[r]);const p=j=>{const{name:C,value:_,files:R}=j.target;l(A=>({...A,[C]:R?R[0]:_}))},w=async j=>{j.preventDefault(),b(""),f(!0);try{const C=new FormData;C.append("name",i.name),C.append("address",i.address),C.append("city",i.city),i.image&&C.append("picture",i.image);const _=await Se.put(`/apartments/${r.id}`,C,{headers:{"Content-Type":"multipart/form-data"}});f(!1),a&&a(),t&&t()}catch(C){console.error("Update error:",C),le.error(C.response?.data?.message||"Failed to update apartment"),f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",placeholder:"Apartment Name",value:i.name,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"address",placeholder:"Address",value:i.address,onChange:p,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"text",name:"city",placeholder:"City",value:i.city,onChange:p,className:"border rounded p-2  text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"file",name:"image",accept:"image/*",onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Updating...":"Update"})]})]})}function c8({isOpen:t,onClose:a,onImportSuccess:r}){const[i,l]=E.useState(null),[d,f]=E.useState(!1),[h,b]=E.useState(!1),[p,w]=E.useState(null),j=B=>{B.preventDefault(),f(!0)},C=B=>{B.preventDefault(),f(!1)},_=B=>{B.preventDefault(),f(!1);const H=B.dataTransfer.files[0];H&&A(H)},R=B=>{const H=B.target.files[0];H&&A(H)},A=B=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(B.type)){le.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(B.size>10*1024*1024){le.error("File size must be less than 10MB");return}l(B),w(null)},O=async()=>{if(!i){le.error("Please select a file first");return}b(!0);const B=new FormData;B.append("excelFile",i);try{const H=await Se.post("/bulk-import/import",B,{headers:{"Content-Type":"multipart/form-data"}});w(H.data.data),r&&r()}catch(H){console.error("Import error:",H),le.error(H.response?.data?.message||"Failed to import data")}finally{b(!1)}},I=async()=>{try{const B=await Se.get("/bulk-import/template",{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([B.data])),U=document.createElement("a");U.href=H,U.setAttribute("download","apartment-import-template.xlsx"),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(H),le.success("Template downloaded successfully!")}catch(B){console.error("Download error:",B),le.error("Failed to download template")}},M=()=>{l(null),w(null)},T=()=>{M(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Bulk Import Apartments"}),e.jsx("button",{onClick:T,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(mr,{size:24})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[!p&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our Excel template to ensure proper formatting"})]}),e.jsxs("button",{onClick:I,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Cl,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${d?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:j,onDragLeave:C,onDrop:_,children:[e.jsx(Os,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:i?i.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:R})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"New Format - Specify Number of Houses:"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment & Floor"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"apartment_name"})," - Name of apartment"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"address"})," - Address (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"city"})," - City (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"floor_number"})," - Floor number/name"]})]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House Configuration"}),e.jsxs("ul",{className:"text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_type"})," - Type of house"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"number_of_houses"})," - How many houses to create"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"house_prefix"})," - House number prefix (optional)"]}),e.jsxs("li",{children:[" ",e.jsx("strong",{children:"status"})," - vacant/occupied/maintenance"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded border border-green-200 dark:border-green-800",children:[e.jsx("h5",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Example:"}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400",children:["If you specify: ",e.jsx("strong",{children:'floor_number: "1"'}),", ",e.jsx("strong",{children:'house_type: "Standard"'}),", ",e.jsx("strong",{children:"number_of_houses: 5"}),", ",e.jsx("strong",{children:'house_prefix: "1"'})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:["It will create houses: ",e.jsx("strong",{children:"101, 102, 103, 104, 105"})," automatically!"]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{onClick:O,disabled:!i||h,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{size:16}),"Import Data"]})})]})]}),p&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"Import Completed Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Created ",p.created.houses," houses from ",p.total," configuration rows"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4 text-center",children:[e.jsx(Ri,{className:"h-8 w-8 text-blue-600 dark:text-blue-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:p.created.apartments}),e.jsx("div",{className:"text-sm text-blue-600 dark:text-blue-400",children:"Apartments"})]}),e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 rounded-lg p-4 text-center",children:[e.jsx(pf,{className:"h-8 w-8 text-orange-600 dark:text-orange-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-orange-600 dark:text-orange-400",children:p.created.floors}),e.jsx("div",{className:"text-sm text-orange-600 dark:text-orange-400",children:"Floors"})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-4 text-center",children:[e.jsx(Ur,{className:"h-8 w-8 text-purple-600 dark:text-purple-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:p.created.houseTypes}),e.jsx("div",{className:"text-sm text-purple-600 dark:text-purple-400",children:"House Types"})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4 text-center",children:[e.jsx(pE,{className:"h-8 w-8 text-green-600 dark:text-green-400 mx-auto mb-2"}),e.jsx("div",{className:"text-2xl font-bold text-green-600 dark:text-green-400",children:p.created.houses}),e.jsx("div",{className:"text-sm text-green-600 dark:text-green-400",children:"Houses Created"})]})]}),p.errors.length>0&&e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(Na,{className:"h-5 w-5 text-red-600 dark:text-red-400"}),e.jsxs("h3",{className:"font-medium text-red-800 dark:text-red-300",children:[p.errors.length," Error(s) Found"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:p.errors.map((B,H)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600 dark:text-red-400 py-1",children:[e.jsx(Vu,{size:14}),B]},H))})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:M,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another File"}),e.jsx("button",{onClick:T,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]})]})]})}):null}function d8({apartment:t,onClose:a,onUploadSuccess:r}){const[i,l]=E.useState(!1),[d,f]=E.useState([]),[h,b]=E.useState([]),[p,w]=E.useState(!0),j=E.useRef(null);E.useEffect(()=>{A()},[t.id]);const C=T=>{const B=Array.from(T.target.files);b(H=>[...H,...B])},_=T=>{b(B=>B.filter((H,U)=>U!==T))},R=async()=>{if(h.length===0){le.error("Please select at least one file");return}try{l(!0);const T=new FormData;h.forEach(H=>{T.append("documents",H)}),T.append("apartmentId",t.id),(await Se.post("/apartment-documents/upload",T,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(b([]),r?.(),A(),j.current&&(j.current.value=""))}catch(T){console.error("Upload error:",T);const B=T.response?.data?.message||"Failed to upload documents";le.error(B)}finally{l(!1)}},A=async()=>{try{w(!0);const T=await Se.get(`/apartment-documents/apartments/${t.id}/documents`);T.data.success&&f(T.data.data)}catch(T){console.error("Error loading documents:",T);const B=T.response?.data?.message||"Failed to load documents";le.error(B)}finally{w(!1)}},O=async T=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Se.delete(`/apartment-documents/documents/${T}`),le.success("Document deleted successfully"),A()}catch(B){console.error("Delete error:",B);const H=B.response?.data?.message||"Failed to delete document";le.error(H)}},I=async T=>{try{const B=await Se.get(`/apartment-documents/documents/${T.id}/download`,{responseType:"blob"}),H=window.URL.createObjectURL(new Blob([B.data])),U=document.createElement("a");U.href=H,U.setAttribute("download",T.original_name||T.file_name),document.body.appendChild(U),U.click(),U.remove(),window.URL.revokeObjectURL(H)}catch(B){console.error("Download error:",B);const H=B.response?.data?.message||"Failed to download document";le.error(H)}},M=T=>{if(T===0)return"0 Bytes";const B=1024,H=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(T)/Math.log(B));return parseFloat((T/Math.pow(B,U)).toFixed(2))+" "+H[U]};return e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Documents - ",t.name]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:j,onChange:C,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>j.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Os,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),h.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:h.map((T,B)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:M(T.size)})]})]}),e.jsx("button",{onClick:()=>_(B),className:"text-red-500 hover:text-red-700",children:e.jsx(mr,{size:16})})]},B))})]}),h.length>0&&e.jsx("button",{onClick:R,disabled:i,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{size:20}),"Upload ",h.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Documents"}),p?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading documents..."})]}):d.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(yr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:d.map(T=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(yr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T.original_name||T.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[M(T.file_size),"  Uploaded on ",new Date(T.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>I(T),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Cl,{size:18})}),e.jsx("button",{onClick:()=>O(T.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:18})})]})]},T.id))})]})]})}function u8(){const{auth:t}=E.useContext(Ir),a=xr(),[r,i]=E.useState(!1),[l,d]=E.useState(!1),[f,h]=E.useState(window.innerWidth<768),[b,p]=E.useState([]),[w,j]=E.useState(!0),[C,_]=E.useState(null),[R,A]=E.useState(!1),[O,I]=E.useState(!1),[M,T]=E.useState(null),[B,H]=E.useState(!1),[U,L]=E.useState(null),[P,z]=E.useState(!1),[K,te]=E.useState(!1),[V,ne]=E.useState(null),[ie,X]=E.useState(!1),[q,ce]=E.useState(null);E.useEffect(()=>{const me=()=>{h(window.innerWidth<768)};return window.addEventListener("resize",me),()=>window.removeEventListener("resize",me)},[]);const we=()=>{A(!0)},oe=()=>{z(!0)},fe=()=>{z(!1)},re=me=>{T(me),I(!0)},Q=me=>{a(`/floors/${me.id}`)},Y=()=>{A(!1)},ae=()=>{I(!1),T(null)},se=()=>{Me(),A(!1),le.success("Apartment created successfully!")},Z=()=>{Me(),I(!1),T(null),le.success("Apartment updated successfully!")},Re=()=>{Me(),le.success("Bulk import completed successfully!")},je=me=>{L(me),H(!0)},Ue=()=>{H(!1)},Me=async()=>{try{j(!0),_(null);const me=await Se.get("/apartments");me.data.success&&Array.isArray(me.data.data)?p(me.data.data):Array.isArray(me.data)?p(me.data):(console.warn("Unexpected response format:",me.data),p([]))}catch(me){console.error("Error loading apartments:",me),me.response?.status===401?(_("Unauthorized. Please login again."),a("/login")):me.response?.status===400?_("Company information missing. Please contact support."):_("Failed to load apartments. Please try again.")}finally{j(!1)}};E.useEffect(()=>{Me()},[]);const at=async me=>{try{const Pe=await Se.patch(`/apartments/${me.id}/toggle`);le.success(Pe.data.message),Me()}catch(Pe){console.error("Error toggling apartment:",Pe),le.error("Failed to toggle apartment status")}},ye=me=>{ne(me),te(!0)},Ae=async()=>{try{if(!V)return;await Se.delete(`/apartments/${V.id}`),le.success("Apartment deleted successfully"),te(!1),ne(null),Me()}catch(me){console.error("Delete apartment error:",me),le.error("Failed to delete apartment")}},Fe=()=>{te(!1),ne(null)},Ce=me=>{ce(me),X(!0)},Je=()=>{X(!1),ce(null)},be=()=>{le.success("Document uploaded successfully!")},dt=()=>e.jsx("button",{onClick:()=>d(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(jc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(dt,{}),e.jsx(vr,{onCollapse:i,isMobileOpen:l,onMobileClose:()=>d(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${r?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{onMobileMenuClick:()=>d(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(za,{size:f?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Apartments"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your apartment buildings"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:oe,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Os,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Upload Excel"})]}),e.jsxs("button",{onClick:we,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Fa,{size:f?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:w?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Xt,{size:f?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading apartments..."})]}):C?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:C}),e.jsx("button",{onClick:Me,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):b.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx($s,{size:f?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No apartments found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first apartment"}),e.jsx("button",{onClick:we,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Apartment"})]}):e.jsx(e.Fragment,{children:f?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Apartments: ",b.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[b.length," items"]})]})}),b.map((me,Pe)=>e.jsxs("div",{onClick:()=>me.is_active&&Q(me),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${me.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[me.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${me.picture}`,alt:me.name,className:"w-12 h-12 object-cover rounded-lg mr-3",onError:pe=>{console.error("Image failed to load:",me.picture),pe.target.style.display="none";const lt=pe.target.parentNode.querySelector(".image-fallback");lt&&(lt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center mr-3",children:e.jsx($s,{size:16,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:me.name}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 truncate",children:me.city||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ce(me)},className:"p-2 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(yr,{size:16})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),re(me)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ja,{size:16})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),je(me)},className:`p-2 rounded-lg ${me.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:me.is_active?"Deactivate":"Activate",children:me.is_active?e.jsx(co,{size:16}):e.jsx(oo,{size:16})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),ye(me)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:16})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-gray-600 dark:text-gray-400 mt-3",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Address:"}),e.jsx("span",{className:"truncate",children:me.address})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Floors:"}),e.jsx("span",{children:me.floors})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Units:"}),e.jsx("span",{children:me.houses})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-1",children:"Status:"}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs ${me.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:me.is_active?"Active":"Inactive"})]})]})]},me.id||Pe))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Apartments"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[b.length," apartments"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:b.map((me,Pe)=>e.jsxs("tr",{onClick:()=>me.is_active&&Q(me),className:`transition-colors cursor-pointer ${me.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:me.picture?e.jsx("img",{src:`https://apmt.apivcm.shop${me.picture}`,alt:me.name,className:"w-12 h-12 object-cover rounded-lg",onError:pe=>{console.error("Image failed to load:",me.picture),pe.target.style.display="none";const lt=pe.target.parentNode.querySelector(".image-fallback");lt&&(lt.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx($s,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:me.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:me.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:me.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:me.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:me.houses}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:pe=>{pe.stopPropagation(),Ce(me)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(yr,{size:20})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),re(me)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),je(me)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:me.is_active?"Deactivate":"Activate",children:me.is_active?e.jsx(co,{size:25}):e.jsx(oo,{size:25})}),e.jsx("button",{onClick:pe=>{pe.stopPropagation(),ye(me)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},me.id||Pe))})]})]})})})]})})]}),R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Apartment"}),e.jsx("button",{onClick:Y,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(Wv,{onClose:Y,onCreated:se})]})})}),O&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Apartment"}),e.jsx("button",{onClick:ae,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(o8,{onClose:ae,onEdited:Z,apartment:M})]})})}),e.jsx(c8,{isOpen:P,onClose:fe,onImportSuccess:Re}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:U?.is_active?"Confirm Deactivation of Apartment":"Confirm Activation of Apartment"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:U?.is_active?"Are you sure you want to deactivate the apartment?":"Are you sure you want to activate the apartment?"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Ue,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>{U&&(at(U),H(!1),L(null))},className:`flex-1 px-4 py-2 text-white rounded-lg font-medium transition-colors ${U?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:U?.is_active?"Deactivate":"Activate"})]})]})}),K&&V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',V.name,'"?']}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-3 space-y-3 sm:space-y-0",children:[e.jsx("button",{onClick:Fe,className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Ae,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors",children:"Delete"})]})]})}),ie&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsxs("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:["Documents - ",q.name]}),e.jsx("button",{onClick:Je,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(d8,{apartment:q,onClose:Je,onUploadSuccess:be})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function f8({onClose:t,onCreated:a,roles:r,rolesLoading:i}){const[l,d]=E.useState({email:"",role_id:""}),[f,h]=E.useState(!1),[b,p]=E.useState(""),w=C=>{const{name:_,value:R}=C.target;d(A=>({...A,[_]:R}))},j=async C=>{C.preventDefault(),p(""),h(!0);try{const _=await Se.post("/auth/invite",{email:l.email,role_id:l.role_id});le.success("Invitation sent successfully!"),a&&a(),t&&t()}catch(_){console.error("Invite error:",_);const R=_.response?.data?.message||"Failed to send invitation. Try again.";p(R),le.error(R)}finally{h(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4 text-black dark:text-white",children:[b&&e.jsx("p",{className:"text-red-500",children:b}),e.jsx("input",{type:"email",name:"email",placeholder:"Enter user email",value:l.email,onChange:w,className:"border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0}),e.jsxs("div",{children:[e.jsxs("select",{name:"role_id",value:l.role_id,onChange:w,className:"w-full border rounded p-2 border-purple-600 bg-white dark:bg-gray-800",required:!0,disabled:i,children:[e.jsx("option",{value:"",children:"Select Role"}),i?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):r.map(C=>e.jsx("option",{value:C.id,children:C.role_name},C.id))]}),i&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Xt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",disabled:f,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||i,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:opacity-50 flex items-center",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"animate-spin mr-2"}),"Sending..."]}):"Save & Invite"})]})]})}function x8({user:t,onClose:a,onUpdated:r,roles:i,rolesLoading:l}){const[d,f]=E.useState({firstname:"",lastname:"",email:"",country:"",mobile:"",role_id:"",password:"",confirmPassword:""}),[h,b]=E.useState(!1),[p,w]=E.useState(""),[j,C]=E.useState(!1),[_,R]=E.useState(!1),[A,O]=E.useState(!1),[I,M]=E.useState("");E.useEffect(()=>{t&&(f({firstname:t.firstname||"",lastname:t.lastname||"",email:t.email||"",country:t.country||"",mobile:t.mobile||"",role_id:t.role_id||"",password:"",confirmPassword:""}),M(t.email||""))},[t]);const T=U=>{const{name:L,value:P}=U.target;f(z=>({...z,[L]:P})),L==="email"&&O(P!==I)},B=async()=>{try{b(!0),await Se.post("/auth/resend",{email:d.email}),le.success("Verification email sent successfully!"),O(!1)}catch(U){console.error("Error sending verification email:",U),le.error(U.response?.data?.message||"Failed to send verification email")}finally{b(!1)}},H=async U=>{if(U.preventDefault(),b(!0),w(""),d.password&&d.password!==d.confirmPassword){w("Passwords do not match"),b(!1);return}if(d.password&&d.password.length<8){w("Password must be at least 8 characters long"),b(!1);return}try{const L={firstname:d.firstname,lastname:d.lastname,email:d.email,country:d.country,mobile:d.mobile,role_id:d.role_id};d.password&&(L.password=d.password);const P=await Se.put(`/auth/users/${t.id}`,L);P.data.success?(le.success("User updated successfully!"),P.data.data.requires_verification&&await B(),r?.(P.data.data)):w(P.data.message||"Failed to update user")}catch(L){console.error("Error updating user:",L),w(L.response?.data?.message||"Failed to update user")}finally{b(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Edit User"}),p&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:p}),e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstname",value:d.firstname,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastname",value:d.lastname,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:d.email,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",required:!0}),A&&e.jsx("button",{type:"button",onClick:B,disabled:h,className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Send verification email",children:e.jsx(Pv,{size:16})})]}),A&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Email changed. Verification email will be sent after saving."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Country"}),e.jsx("input",{type:"text",name:"country",value:d.country,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mobile"}),e.jsx("input",{type:"tel",name:"mobile",value:d.mobile,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Role *"}),e.jsxs("select",{name:"role_id",value:d.role_id,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,disabled:l,children:[e.jsx("option",{value:"",children:"Select Role"}),l?e.jsx("option",{value:"",disabled:!0,children:"Loading roles..."}):i.map(U=>e.jsx("option",{value:U.id,children:U.role_name},U.id))]}),l&&e.jsxs("div",{className:"flex items-center mt-1 text-sm text-gray-500",children:[e.jsx(Xt,{size:14,className:"animate-spin mr-1"}),"Loading roles..."]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Change Password (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"New Password"}),e.jsx("input",{type:j?"text":"password",name:"password",value:d.password,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Leave blank to keep current password"}),e.jsx("button",{type:"button",onClick:()=>C(!j),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:j?e.jsx(Tn,{size:16}):e.jsx(Ys,{size:16})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Confirm Password"}),e.jsx("input",{type:_?"text":"password",name:"confirmPassword",value:d.confirmPassword,onChange:T,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 pr-10",placeholder:"Confirm new password"}),e.jsx("button",{type:"button",onClick:()=>R(!_),className:"absolute right-3 top-8 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:_?e.jsx(Tn,{size:16}):e.jsx(Ys,{size:16})})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||l,className:"px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700 text-white transition-colors disabled:bg-purple-400 disabled:cursor-not-allowed flex items-center",children:h?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"animate-spin mr-2"}),"Updating..."]}):"Update User"})]})]})]})})}):null}function h8({user:t,onClose:a,onAssignSuccess:r}){const[i,l]=E.useState([]),[d,f]=E.useState([]),[h,b]=E.useState(!0),[p,w]=E.useState(!1),[j,C]=E.useState(""),[_,R]=E.useState(new Set);E.useEffect(()=>{t&&(async()=>{try{b(!0);const z=await Se.get("/bills");if(z.data.success){const te=(z.data.data||[]).filter(V=>V.billtype?.toLowerCase()==="measurable");l(te)}const K=await Se.get(`/user-bills/users/${t.id}/bills`);if(K.data.success){const V=(K.data.data||[]).filter(ie=>ie.billtype?.toLowerCase()==="measurable");f(V);const ne=new Set(V.map(ie=>ie.id));R(ne)}}catch(z){console.error("Error loading bill data:",z),le.error("Failed to load bill data")}finally{b(!1)}})()},[t]);const A=i.filter(P=>P.bill_name?.toLowerCase().includes(j.toLowerCase())),O=P=>d.some(z=>z.id===P),I=P=>_.has(P),M=P=>{R(z=>{const K=new Set(z);return K.has(P)?K.delete(P):K.add(P),K})},T=()=>{const P=new Set(i.map(z=>z.id));R(P)},B=()=>{R(new Set)},H=async()=>{try{w(!0);const P=Array.from(_);await Se.post(`/user-bills/users/${t.id}/bills`,{bill_ids:P}),le.success("Measurable bills assigned successfully!"),r?.(),a()}catch(P){console.error("Error assigning bills:",P),le.error(P.response?.data?.message||"Failed to assign bills")}finally{w(!1)}},U=P=>d.find(z=>z.id===P),L=P=>{try{return new Date(P).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ns,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search measurable bills by name or description...",value:j,onChange:P=>C(P.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:B,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading measurable bills..."})]}):A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(Lu,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No measurable bills found"}),e.jsx("p",{className:"text-sm",children:j?"Try adjusting your search terms":"No measurable bills available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:'Only bills with type "Measurable" are shown here'})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:A.map(P=>{const z=I(P.id),K=O(P.id),te=U(P.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${z?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>M(P.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(ka,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:P.bill_name}),K&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"}),e.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full",children:"Measurable"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(yr,{size:14}),e.jsx("span",{className:"capitalize",children:P.billtype}),P.is_metered&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:"Metered"})]}),e.jsx("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{children:["Created: ",L(P.created_at)]})}),te&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",L(te.assigned_at||te.created_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:z?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(dn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},P.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.size," measurable bill(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:p,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:H,disabled:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[p&&e.jsx(Xt,{size:16,className:"animate-spin"}),e.jsx("span",{children:p?"Saving...":"Save Assignments"})]})]})]})]})}function m8({user:t,onClose:a,onAssignSuccess:r}){const[i,l]=E.useState([]),[d,f]=E.useState([]),[h,b]=E.useState(!0),[p,w]=E.useState(!1),[j,C]=E.useState(""),[_,R]=E.useState(new Set),[A,O]=E.useState("categories");E.useEffect(()=>{t&&(async()=>{try{b(!0);const te=await Se.get("/categories");if(te.data.success){const ne=(te.data.data||[]).filter(ie=>ie.is_active!==!1);l(ne)}const V=await Se.get(`/technician-categories/technicians/${t.id}/categories`);if(V.data.success){const ne=V.data.data||[];f(ne);const ie=new Set(ne.map(X=>X.category_id));R(ie)}}catch(te){console.error("Error loading category data:",te),le.error("Failed to load category data")}finally{b(!1)}})()},[t]);const I=i.filter(K=>K.name?.toLowerCase().includes(j.toLowerCase())||K.description?.toLowerCase().includes(j.toLowerCase())),M=K=>d.some(te=>te.category_id===K),T=K=>_.has(K),B=K=>{R(te=>{const V=new Set(te);return V.has(K)?V.delete(K):V.add(K),V})},H=()=>{const K=new Set(i.map(te=>te.id));R(K)},U=()=>{R(new Set)},L=async()=>{try{w(!0);const K=Array.from(_);await Se.post(`/technician-categories/technicians/${t.id}/categories`,{category_ids:K}),le.success("Categories assigned successfully!"),r?.(),a()}catch(K){console.error("Error assigning categories:",K),le.error(K.response?.data?.message||"Failed to assign categories")}finally{w(!1)}},P=K=>d.find(te=>te.category_id===K),z=K=>{try{return new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ns,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search categories by name or description...",value:j,onChange:K=>C(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading categories..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(zv,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No categories found"}),e.jsx("p",{className:"text-sm",children:j?"Try adjusting your search terms":"No categories available to assign"}),e.jsx("p",{className:"text-xs mt-2 text-gray-400",children:"Only active categories are shown here"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(K=>{const te=T(K.id),V=M(K.id),ne=P(K.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${te?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(K.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(jE,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:K.name}),V&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Assigned"}),K.is_active===!1&&e.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded-full",children:"Inactive"})]}),K.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-3",children:K.description}),e.jsx("div",{className:"flex items-center space-x-3 text-xs text-gray-500 dark:text-gray-400",children:e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(R6,{size:12}),e.jsx("span",{children:"Service Category"})]})}),ne&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400 flex items-center space-x-1",children:[e.jsx(Cn,{size:12}),e.jsxs("span",{children:["Assigned: ",z(ne.assigned_at)]})]})]}),e.jsx("div",{className:"flex items-center ml-4",children:te?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(dn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},K.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.size," category(ies) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:p,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:L,disabled:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[p&&e.jsx(Xt,{size:16,className:"animate-spin"}),e.jsx("span",{children:p?"Saving...":"Save Assignments"})]})]})]})]})}function g8({user:t,onClose:a,onAssignSuccess:r}){const[i,l]=E.useState([]),[d,f]=E.useState([]),[h,b]=E.useState(!0),[p,w]=E.useState(!1),[j,C]=E.useState(""),[_,R]=E.useState(new Set),[A,O]=E.useState("apartments");E.useEffect(()=>{t&&(async()=>{try{b(!0);const te=await Se.get("/apartments");te.data.success&&l(te.data.data||[]);const V=await Se.get(`/user-apartments/users/${t.id}/apartments`);if(V.data.success){const ne=V.data.data||[];f(ne);const ie=new Set(ne.map(X=>X.id));R(ie)}}catch(te){console.error("Error loading apartment data:",te),le.error("Failed to load apartment data")}finally{b(!1)}})()},[t]);const I=i.filter(K=>K.name?.toLowerCase().includes(j.toLowerCase())||K.address?.toLowerCase().includes(j.toLowerCase())||K.city?.toLowerCase().includes(j.toLowerCase())),M=K=>d.some(te=>te.id===K),T=K=>_.has(K),B=K=>{R(te=>{const V=new Set(te);return V.has(K)?V.delete(K):V.add(K),V})},H=()=>{const K=new Set(i.map(te=>te.id));R(K)},U=()=>{R(new Set)},L=async()=>{try{w(!0);const K=Array.from(_);await Se.post(`/user-apartments/users/${t.id}/apartments`,{apartment_ids:K}),r?.(),a()}catch(K){console.error("Error assigning apartments:",K),le.error(K.response?.data?.message||"Failed to assign apartments")}finally{w(!1)}},P=K=>d.find(te=>te.id===K),z=K=>{try{return new Date(K).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(za,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Assign Apartments and Bills"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[t.firstname," ",t.lastname]})]})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(mr,{size:20,className:"text-gray-500 dark:text-gray-400"})})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6 px-6",children:[e.jsx("button",{onClick:()=>O("apartments"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                ${A==="apartments"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Apartments"}),e.jsx("button",{onClick:()=>O("bills"),className:`px-4 py-2 font-semibold 
                ${A==="bills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Bills"}),e.jsx("button",{onClick:()=>O("complaint_categories"),className:`px-4 py-2 font-semibold 
                ${A==="complaint_categories"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assign Service Categories"})]}),A==="apartments"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Ns,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:j,onChange:K=>C(K.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:H,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Select All"}),e.jsx("button",{onClick:U,className:"px-4 py-2 text-sm bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:h?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):I.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-500 dark:text-gray-400",children:[e.jsx(za,{size:48,className:"mb-4 opacity-50"}),e.jsx("p",{className:"text-lg",children:"No apartments found"}),e.jsx("p",{className:"text-sm",children:j?"Try adjusting your search terms":"No apartments available to assign"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4",children:I.map(K=>{const te=T(K.id),V=M(K.id),ne=P(K.id);return e.jsx("div",{className:`border rounded-lg p-4 transition-all duration-200 cursor-pointer ${te?"border-purple-500 bg-purple-50 dark:bg-purple-900/20 ring-2 ring-purple-500/20":"border-gray-200 dark:border-gray-600 bg-white dark:bg-gray-700 hover:border-purple-300 dark:hover:border-purple-400"}`,onClick:()=>B(K.id),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(Ur,{size:16,className:"text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:K.name}),V&&e.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded-full",children:"Currently Assigned"})]}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-gray-600 dark:text-gray-300 mb-2",children:[e.jsx(lo,{size:14}),e.jsxs("span",{children:[K.address,", ",K.city]})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[K.floors," floors"]}),e.jsx("span",{children:""}),e.jsxs("span",{children:[K.houses," houses"]}),e.jsx("span",{children:""}),e.jsx("span",{children:K.is_active?"Active":"Inactive"})]}),ne&&e.jsxs("div",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",z(ne.assigned_at)]})]}),e.jsx("div",{className:"flex items-center ml-4",children:te?e.jsx("div",{className:"w-6 h-6 bg-purple-600 rounded-full flex items-center justify-center",children:e.jsx(dn,{size:14,className:"text-white"})}):e.jsx("div",{className:"w-6 h-6 border-2 border-gray-300 dark:border-gray-500 rounded-full"})})]})},K.id)})})}),e.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-gray-700 dark:bg-gray-750 rounded-b-xl",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[_.size," apartment(s) selected",d.length>0&&e.jsxs("span",{children:["  ",d.length," currently assigned"]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("button",{onClick:a,disabled:p,className:"px-6 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{onClick:L,disabled:p,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[p&&e.jsx(Xt,{size:16,className:"animate-spin"}),e.jsx("span",{children:p?"Saving...":"Save Assignments"})]})]})]})]}):A==="bills"?e.jsx(h8,{user:t,onClose:a,onAssignSuccess:r}):e.jsx(m8,{user:t,onClose:a,onAssignSuccess:r})]})})}function p8({onClose:t,onCreated:a}){const[r,i]=E.useState({role_name:""}),[l,d]=E.useState(!1),[f,h]=E.useState(""),[b,p]=E.useState([]),w=C=>{const{name:_,value:R}=C.target;i(A=>({...A,[_]:R})),_==="role_name"&&f&&h("")},j=async C=>{if(C.preventDefault(),d(!0),h(""),!r.role_name.trim()){h("Please fill in all required fields"),d(!1);return}try{const _=await Se.post("/roles",{role_name:r.role_name.trim()},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});_.data.success?(a?.(_.data.data),le.success("Role created successfully"),t()):h(_.data.message||"Failed to save role")}catch(_){console.error("Error saving role:",_);const R=_.response?.data?.message||"Error saving role. Please try again.";h(R),_.response?.status===409&&le.error(R)}finally{d(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",name:"role_name",value:r.role_name,onChange:w,placeholder:"Enter unique role name (e.g., Admin, Apartment_manager, Apartment_technician)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.role_name.trim(),className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.role_name.trim()?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Role"})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}const y8=({role:t,onClose:a,onAssign:r})=>{const[i,l]=E.useState([]),[d,f]=E.useState(!1),[h,b]=E.useState(!1),w=[{id:"employee_dashboard",name:"Employee Dashboard",description:"Main dashboard for employees",category:"Core",icon:"Home"},{id:"profile",name:"Profile",description:"User profile management",category:"Core",icon:"User"},{id:"users_management",name:"User Management",description:"Manage system users",category:"Management",icon:"Users"},{id:"role_management",name:"Role Management",description:"Manage user roles and permissions",category:"Management",icon:"Shield"},{id:"apartments_management",name:"Apartments Management",description:"Manage apartment buildings",category:"Management",icon:"Building"},{id:"tenant_management",name:"Tenant Management",description:"Manage tenants and residents",category:"Management",icon:"Users"},{id:"expenses_management",name:"Expenses Management",description:"Manage bills and expenses",category:"Financial",icon:"DollarSign"},{id:"my_apartments",name:"My Apartments",description:"View personal apartments",category:"Personal",icon:"Home"},{id:"my_bills",name:"My Bills",description:"View and manage your bills",category:"Financial",icon:"CreditCard"},{id:"my_complaints",name:"My Complaints",description:"View and manage your complaints",category:"Personal",icon:"ClipboardList"}].reduce((I,M)=>{const T=M.category;return I[T]||(I[T]=[]),I[T].push(M),I},{});E.useEffect(()=>{t&&j()},[t]);const j=async()=>{try{f(!0);const I=await Se.get(`/role-components/role/${t.id}`);if(I.data.success){const M=I.data.data||[];l(M)}}catch(I){console.error("Error loading role components:",I),l([])}finally{f(!1)}},C=I=>{l(M=>M.includes(I)?M.filter(T=>T!==I):[...M,I])},_=I=>{const M=w[I].map(T=>T.id);l(T=>{const B=[...T];return M.forEach(H=>{B.includes(H)||B.push(H)}),B})},R=I=>{const M=w[I].map(T=>T.id);l(T=>T.filter(B=>!M.includes(B)))},A=async()=>{try{b(!0);const I=["employee_dashboard","profile"],M=i.filter(B=>!I.includes(B));(await Se.post(`/role-components/role/${t.id}`,{components:M})).data.success&&(le.success("Components assigned successfully! The sidebar will refresh for affected users."),r(t.id,i),a())}catch(I){console.error("Error saving role components:",I),alert("Failed to save component assignments. Please try again.")}finally{b(!1)}},O=I=>{const T={Core:cs,Management:pc,Financial:Zm,Personal:Ur}[I]||U0;return e.jsx(T,{size:16})};return t?t.role_name==="Admin"?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(pc,{size:48,className:"mx-auto text-purple-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Admin Role"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"The Admin role has predefined sidebar components and cannot be modified."}),e.jsx("button",{onClick:a,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})})}):e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Assign Sidebar Components to Role"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Role: ",e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:t.role_name}),e.jsx("span",{className:"ml-2 text-xs text-green-600 dark:text-green-400",children:"(Dashboard and Profile are always included)"})]})]}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white transition-colors",children:e.jsx(mr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:d?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading components..."})]}):e.jsx("div",{className:"space-y-6",children:Object.entries(w).map(([I,M])=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-gray-700 rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[O(I),e.jsxs("h3",{className:"font-semibold text-gray-800 dark:text-white",children:[I," Components"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["(",M.length,")"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>_(I),className:"px-3 py-1 text-xs bg-green-600 text-white rounded hover:bg-green-700 transition-colors",children:"Select All"}),e.jsx("button",{onClick:()=>R(I),className:"px-3 py-1 text-xs bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Deselect All"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 p-4",children:M.map(T=>e.jsxs("div",{onClick:()=>C(T.id),className:`flex items-start p-3 border rounded-lg cursor-pointer transition-all ${i.includes(T.id)?"bg-purple-50 border-purple-300 dark:bg-purple-900/20 dark:border-purple-700 shadow-sm":"bg-white border-gray-200 dark:bg-gray-700 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-600"}`,children:[e.jsx("div",{className:"flex items-center justify-center w-5 h-5 mr-3 mt-0.5",children:i.includes(T.id)?e.jsx(rC,{size:18,className:"text-purple-600 dark:text-purple-400"}):e.jsx(U0,{size:18,className:"text-gray-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white text-sm",children:T.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:T.description})]})]},T.id))})]},I))})}),e.jsxs("div",{className:"flex justify-between items-center p-6 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[i.length," custom components selected + 2 constant components (Dashboard, Profile)"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-white transition-colors",children:"Cancel"}),e.jsx("button",{onClick:A,disabled:h||d,className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yf,{size:20}),"Save Assignments"]})})]})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):null};function b8({role:t,onClose:a,onUpdated:r}){const[i,l]=E.useState({role_name:""}),[d,f]=E.useState(!1),[h,b]=E.useState({});E.useEffect(()=>{t&&l({role_name:t.role_name||""})},[t]);const p=C=>{const{name:_,value:R}=C.target;l(A=>({...A,[_]:R})),h[_]&&b(A=>({...A,[_]:""}))},w=()=>{const C={};return i.role_name.trim()?i.role_name.trim().length<2?C.role_name="Role name must be at least 2 characters long":i.role_name.trim().length>50&&(C.role_name="Role name must be less than 50 characters"):C.role_name="Role name is required",b(C),Object.keys(C).length===0},j=async C=>{if(C.preventDefault(),!!w())try{f(!0);const _=await Se.put(`/roles/${t.id}`,{role_name:i.role_name.trim()});_.data.success?(r?.(_.data.data),a()):le.error(_.data.message||"Failed to update role")}catch(_){console.error("Error updating role:",_),_.response?.status===409?(le.error("A role with this name already exists"),b({role_name:"A role with this name already exists"})):_.response?.data?.message?le.error(_.response.data.message):le.error("Failed to update role. Please try again.")}finally{f(!1)}};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl w-full max-w-md",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Role"}),e.jsx("button",{onClick:a,disabled:d,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors text-gray-500 dark:text-gray-400",children:e.jsx(mr,{size:20})})]}),e.jsxs("form",{onSubmit:j,className:"p-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"role_name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Role Name *"}),e.jsx("input",{type:"text",id:"role_name",name:"role_name",value:i.role_name,onChange:p,disabled:d,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-colors ${h.role_name?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 disabled:opacity-50`,placeholder:"Enter role name (e.g., Manager, Supervisor)"}),h.role_name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.role_name})]}),e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Current Information"}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Current Name:"})," ",t.role_name]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Status:"}),e.jsx("span",{className:`ml-1 px-2 py-1 text-xs rounded-full ${t.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:t.is_active?"Active":"Inactive"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,disabled:d,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:[d&&e.jsx(Xt,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Updating...":"Update Role"})]})]})]})]})}):null}function Kv(){const[t,a]=E.useState(!1),[r,i]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(null),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(null),[R,A]=E.useState(!1),[O,I]=E.useState(null),[M,T]=E.useState(!1),[B,H]=E.useState(null),U=async()=>{try{d(!0),h(null);const oe=await Se.get("/roles");oe.data.success&&Array.isArray(oe.data.data)?i(oe.data.data):i([])}catch(oe){console.error("Error loading roles:",oe),h("Failed to load Roles. Please try again.")}finally{d(!1)}};E.useEffect(()=>{U()},[]);const L=()=>{p(!0)},P=()=>{p(!1)},z=()=>{U(),p(!1)},K=oe=>{_(oe),j(!0)},te=()=>{j(!1),_(null)},V=()=>{le.success("Role updated successfully!"),U(),j(!1),_(null)},ne=oe=>{I(oe),A(!0)},ie=async()=>{try{if(!O)return;const oe=await Se.delete(`/roles/${O.id}`);oe.data.success?(le.success("Role deleted successfully"),A(!1),I(null),U()):le.error(oe.data.message||"Failed to delete role")}catch(oe){console.error("Delete role error:",oe),oe.response?.data?.message?.includes("users assigned")||oe.response?.data?.message?.includes("Cannot delete role")||oe.response?.data?.message?le.error(oe.response.data.message):le.error("Failed to delete role. Please try again."),A(!1),I(null)}},X=()=>{A(!1),I(null)},q=oe=>{H(oe),T(!0)},ce=(oe,fe)=>{le.success("Components assigned successfully!")},we=oe=>{try{return new Date(oe).toLocaleDateString()}catch{return"N/A"}};return e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:L,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"Add Role"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading roles..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:U,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx($s,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No roles found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding roles"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((oe,fe)=>e.jsxs("tr",{onClick:()=>q(oe),className:`transition-colors cursor-pointer ${oe.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:fe+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:oe.role_name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:we(oe.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:re=>{re.stopPropagation(),K(oe)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:re=>{re.stopPropagation(),ne(oe)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})}),e.jsx("button",{onClick:re=>{re.stopPropagation(),q(oe)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Assign Components",children:e.jsx(Gu,{size:20})})]})})]},oe.id||fe))})]})})}),b&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:P,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(p8,{onClose:P,onCreated:z})]})}),M&&e.jsx(y8,{role:B,onClose:()=>T(!1),onAssign:ce}),w&&C&&e.jsx(b8,{role:C,onClose:te,onUpdated:V}),R&&O&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',O.role_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:X,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ie,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function v8(){const[t,a]=E.useState(!1),[r,i]=E.useState([]),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(null),[R,A]=E.useState(null),[O,I]=E.useState(!0),[M,T]=E.useState(!0),[B,H]=E.useState(null),{auth:U}=E.useContext(Ir),[L,P]=E.useState(!1),[z,K]=E.useState(null),[te,V]=E.useState(!1),[ne,ie]=E.useState(null),[X,q]=E.useState("users"),ce=async()=>{try{I(!0),H(null);const be=await Se.get("/auth/users");be.data.success&&Array.isArray(be.data.data)?i(be.data.data):(console.warn("Unexpected response format:",be.data),i([]))}catch(be){console.error("Error in fetching users:",be),H("Failed to load users. Please try again."),le.error("Failed to fetch users")}finally{I(!1)}},we=async()=>{try{T(!0);const be=await Se.get("/roles");be.data.success&&Array.isArray(be.data.data)?d(be.data.data):d([])}catch(be){console.error("Error loading roles:",be),le.error("Failed to load roles")}finally{T(!1)}};E.useEffect(()=>{ce(),we()},[]);const oe=()=>h(!0),fe=()=>h(!1),re=be=>{_(be),p(!0)},Q=()=>{p(!1),_(null)},Y=be=>{A(be),j(!0)},ae=()=>{j(!1),A(null)},se=()=>{ce(),h(!1),le.success("User created successfully!")},Z=()=>{ce(),p(!1),_(null)},[Re,je]=E.useState(!1),Ue=async be=>{try{je(!0),await Se.post("/auth/resend",{email:be.email}),le.success("Verification email sent successfully!")}catch(dt){console.error("Error sending verification email:",dt),le.error(dt.response?.data?.message||"Failed to send verification email")}finally{je(!1)}},Me=async()=>{if(R)try{await Se.patch(`/auth/users/${R.id}/toggle`),le.success(`User ${R.is_active?"deactivated":"activated"} successfully!`),ce(),ae()}catch(be){console.error("Error toggling user:",be),le.error("Failed to update user status")}},at=be=>{K(be),P(!0)},ye=async()=>{try{if(!z)return;await Se.delete(`/auth/users/${z.id}`),le.success("User deleted successfully"),P(!1),K(null),ce()}catch(be){console.error("Delete user error:",be),be.response?.data?.message?le.error(be.response.data.message):le.error("Failed to delete user")}},Ae=()=>{P(!1),K(null)},Fe=be=>{ie(be),V(!0)},Ce=()=>{V(!1),ie(null)},Je=()=>{le.success("Apartments assigned successfully!")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ei,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Users Management"})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>q("users"),className:`px-4 py-2 font-semibold 
                      ${X==="users"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Info"}),e.jsx("button",{onClick:()=>q("roles"),className:`px-4 py-2 font-semibold 
                      ${X==="roles"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"User Roles"})]}),X==="users"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"Add User"})]})}),O?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Users..."})]}):B?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[B,e.jsx("button",{onClick:ce,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(cs,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No users found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding your first user"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-100 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"First Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Last Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Country"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Mobile"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((be,dt)=>{const me=be.email===U?.user?.email||be.id===U?.user?.id;return e.jsxs("tr",{className:`transition-colors ${be.is_active?me?"opacity-60 cursor-not-allowed bg-gray-50 dark:bg-gray-800":"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed bg-gray-50 dark:bg-gray-800"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.firstname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.lastname||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{children:be.email}),!be.is_verified&&e.jsx("button",{onClick:()=>Ue(be),disabled:me||!be.is_active||Re,className:`ml-2 p-1 rounded ${me||!be.is_active||Re?"text-gray-400 cursor-not-allowed":"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300"}`,title:"Send verification email",children:Re?e.jsx(Xt,{size:14,className:"animate-spin"}):e.jsx(Pv,{size:14})})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.country||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.mobile||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:be.role||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${be.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:be.is_verified?"Verified":"Pending"}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${be.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:be.is_active?"Active":"Inactive"})]})}),e.jsx("td",{className:"whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex",children:[e.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),Fe(be)},disabled:me||!be.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${me||!be.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300"}`,title:me?"You can't assign to your own account":be.is_active?"Assign Apartments":"Cannot assign to inactive user",children:e.jsx(za,{size:20})}),e.jsx("button",{onClick:()=>re(be),disabled:me||!be.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${me||!be.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:me?"You can't edit your own account":be.is_active?"Edit":"Cannot edit inactive user",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:()=>Y(be),disabled:me,className:`flex items-center justify-center w-8 h-8 rounded ${me?"text-gray-400 cursor-not-allowed bg-transparent":be.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300"}`,title:me?"You can't modify your own account":be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(co,{size:20}):e.jsx(oo,{size:20})}),e.jsx("button",{onClick:Pe=>{Pe.stopPropagation(),at(be)},disabled:me||!be.is_active,className:`flex items-center justify-center w-8 h-8 rounded ${me||!be.is_active?"text-gray-400 cursor-not-allowed bg-transparent":"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300"}`,title:me?"You can't delete your own account":be.is_active?"Delete":"Cannot delete inactive user",children:e.jsx(Fr,{size:20})})]})})]},be.id??dt)})})]})})]}),X==="roles"&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:e.jsx(Kv,{})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:fe,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Create New User"}),e.jsx(f8,{onClose:fe,onCreated:se,roles:l,rolesLoading:M})]})}),b&&C&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:Q,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Edit User"}),e.jsx(x8,{user:C,onClose:Q,onUpdated:Z,roles:l,rolesLoading:M})]})}),w&&R&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:R.is_active?"Confirm Deactivation":"Confirm Activation"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:R.is_active?`Are you sure you want to deactivate ${R.firstname||"this user"}? They will lose access to the system.`:`Are you sure you want to activate ${R.firstname||"this user"}? They will regain access to the system.`}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ae,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Me,className:`px-4 py-2 rounded-md text-white transition-colors ${R.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:R.is_active?"Deactivate":"Activate"})]})]})}),L&&z&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete user "',z.firstname||z.email,'"? This action cannot be undone.']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Ae,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ye,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),te&&ne&&e.jsx(g8,{user:ne,onClose:Ce,onAssignSuccess:Je}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function w8({onClose:t,apartment_id:a}){const[r,i]=E.useState(1),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,p]=E.useState(0),[w,j]=E.useState(!0);E.useEffect(()=>{(async()=>{try{const O=await Se.get(`/floors/apartment/${a}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(O.data&&O.data.length>0){const I=Math.max(...O.data.map(M=>{const T=M.floor_id.match(/\d+/);return T?parseInt(T[0]):0}));p(I)}}catch(O){console.error("Error fetching existing floors:",O)}finally{j(!1)}})()},[a]);const C=()=>{const A=Array.from({length:r},(O,I)=>({floor_id:`F${b+I+1}`}));d(A)},_=(A,O,I)=>{const M=[...l];M[A][O]=I,d(M)},R=async A=>{A.preventDefault(),h(!0);try{const O=await Se.post("/floors/batch",{apartment_id:a,floors:l},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});t()}catch(O){console.error("Error creating floors:",O)}finally{h(!1)}};return w?e.jsx("p",{children:"Loading existing floors..."}):e.jsxs("form",{onSubmit:R,className:"flex flex-col gap-4 max-h-[90vh] overflow-hidden",children:[e.jsxs("label",{className:" text-black dark:text-white",children:["How many floors do you want to add?",e.jsx("input",{type:"number",value:r,min:"1",onChange:A=>i(parseInt(A.target.value)),className:"border rounded p-2 text-black dark:text-white border-purple-600"})]}),e.jsx("button",{type:"button",onClick:C,className:"bg-purple-500 text-white px-3 py-1 rounded",children:"Generate Floors"}),e.jsx("div",{className:"flex-1 overflow-y-auto border rounded p-2 max-h-64",children:l.map((A,O)=>e.jsxs("div",{className:"border rounded p-2 text-black dark:text-white border-purple-600",children:[e.jsxs("p",{children:["Floor ",b+O+1]}),e.jsx("input",{type:"text",value:A.floor_id,onChange:I=>_(O,"floor_id",I.target.value),className:"border rounded p-1 mr-2"})]},O))}),e.jsxs("div",{className:"flex justify-end gap-2 sticky bottom-0 p-2 border-t",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:"px-4 py-2 rounded bg-purple-600 text-white",children:f?"Saving...":"Save All"})]})]})}function N8({floor:t,onClose:a,onUpdated:r}){const[i,l]=E.useState({floor_id:t.floor_id||"",status:t.status||"active"}),d=b=>{const{name:p,value:w}=b.target;l({...i,[p]:w})},f=localStorage.getItem("token"),h=async b=>{b.preventDefault();try{(await Se.put(`/floors/${t.id}`,i,{headers:{Authorization:`Bearer ${f}`}})).data.success?r():le.error("Failed to update floor")}catch(p){console.error("Error updating floor:",p),le.error("Error updating floor")}};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Floor Name/Number"}),e.jsx("input",{type:"text",name:"floor_id",value:i.floor_id,onChange:d,className:"border rounded p-2 text-black dark:text-white border-purple-600",disabled:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Status"}),e.jsxs("select",{name:"status",value:i.status,onChange:d,className:`mt-1 block w-full px-3 py-2 border rounded-lg shadow-sm \r
                     focus:ring-purple-500 border-purple-500 sm:text-sm  dark:bg-gray-700 dark:text-white text-black bg-white`,children:[e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"maintenance",children:"Maintenance"}),e.jsx("option",{value:"partial",children:"Partial"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 hover:bg-gray-300",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700",children:"Save Changes"})]})]})}function k8({floor:t,apartment:a,onClose:r,onUploadSuccess:i}){const[l,d]=E.useState(!1),[f,h]=E.useState([]),[b,p]=E.useState([]),[w,j]=E.useState(!0),C=E.useRef(null);E.useEffect(()=>{O()},[t.id]);const _=B=>{const H=Array.from(B.target.files);p(U=>[...U,...H])},R=B=>{p(H=>H.filter((U,L)=>L!==B))},A=async()=>{if(b.length===0){le.error("Please select at least one file");return}try{d(!0);const B=new FormData;b.forEach(U=>{B.append("documents",U)}),B.append("apartmentId",a.id),B.append("floorId",t.id),(await Se.post("/floor-documents/upload",B,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(p([]),i?.(),O(),C.current&&(C.current.value=""))}catch(B){console.error("Upload error:",B);const H=B.response?.data?.message||"Failed to upload floor documents";le.error(H)}finally{d(!1)}},O=async()=>{try{j(!0);const B=await Se.get(`/floor-documents/${t.id}/documents`);B.data.success&&h(B.data.data)}catch(B){console.error("Error loading floor documents:",B);const H=B.response?.data?.message||"Failed to load floor documents";le.error(H)}finally{j(!1)}},I=async B=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Se.delete(`/floor-documents/documents/${B}`),le.success("Floor document deleted successfully"),O()}catch(H){console.error("Delete error:",H);const U=H.response?.data?.message||"Failed to delete floor document";le.error(U)}},M=async B=>{try{const H=await Se.get(`/floor-documents/documents/${B.id}/download`,{responseType:"blob"}),U=window.URL.createObjectURL(new Blob([H.data])),L=document.createElement("a");L.href=U,L.setAttribute("download",B.original_name||B.file_name),document.body.appendChild(L),L.click(),L.remove(),window.URL.revokeObjectURL(U)}catch(H){console.error("Download error:",H);const U=H.response?.data?.message||"Failed to download floor document";le.error(U)}},T=B=>{if(B===0)return"0 Bytes";const H=1024,U=["Bytes","KB","MB","GB"],L=Math.floor(Math.log(B)/Math.log(H));return parseFloat((B/Math.pow(H,L)).toFixed(2))+" "+U[L]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Floor Documents - ",t.floor_id]}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",t.floor_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New Floor Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:C,onChange:_,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>C.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Os,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),b.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:b.map((B,H)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:B.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:T(B.size)})]})]}),e.jsx("button",{onClick:()=>R(H),className:"text-red-500 hover:text-red-700",children:e.jsx(mr,{size:16})})]},H))})]}),b.length>0&&e.jsx("button",{onClick:A,disabled:l,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{size:20}),"Upload ",b.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing Floor Documents"}),w?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading floor documents..."})]}):f.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(yr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No floor documents uploaded yet"})]}):e.jsx("div",{className:"space-y-3",children:f.map(B=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(yr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:B.original_name||B.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[T(B.file_size),"  Uploaded on ",new Date(B.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>M(B),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Cl,{size:18})}),e.jsx("button",{onClick:()=>I(B.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:18})})]})]},B.id))})]})]})}function j8(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),[l,d]=E.useState(window.innerWidth<768),{id:f}=fn(),[h,b]=E.useState(null),p=xr(),[w,j]=E.useState([]),[C,_]=E.useState(null),[R,A]=E.useState(!0),[O,I]=E.useState(!1),[M,T]=E.useState(!1),[B,H]=E.useState(null),[U,L]=E.useState(!1),[P,z]=E.useState(null),[K,te]=E.useState(!1),[V,ne]=E.useState(null),[ie,X]=E.useState(!1),[q,ce]=E.useState(null);E.useEffect(()=>{const be=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",be),()=>window.removeEventListener("resize",be)},[]),E.useEffect(()=>{f&&(async()=>{try{const dt=await Se.get(`/apartments/${f}`);dt.data.success&&b(dt.data.data)}catch(dt){console.error("Error fetching apartment:",dt)}})()},[f]);const we=()=>{p("/apartmentview")},oe=async()=>{try{A(!0),_(null);const be=await Se.get(`/floors?apartment_id=${f}`);be.data.success&&Array.isArray(be.data.data)?j(be.data.data):j([])}catch(be){console.error("Error loading floors:",be),_("Failed to load floors. Please try again.")}finally{A(!1)}};E.useEffect(()=>{oe()},[f]);const fe=be=>{p(`/houses/${f}/${be.id}`)},re=be=>{z(be),L(!0)},Q=()=>{L(!1),z(null)},Y=async be=>{try{const dt=await Se.patch(`/floors/${be.id}/toggle`);le.success(dt.data.message),oe()}catch(dt){console.error("Error toggling floor:",dt),le.error("Failed to toggle floor status")}},ae=()=>{I(!0)},se=()=>{I(!1)},Z=()=>{oe(),I(!1),le.success("Floor created successfully!")},Re=be=>{H(be),T(!0)},je=()=>{T(!1),H(null)},Ue=()=>{oe(),T(!1),le.success("Floor updated successfully!")},Me=be=>{ne(be),te(!0)},at=async()=>{try{if(!V)return;await Se.delete(`/floors/${V.id}`),le.success("Floor deleted successfully"),te(!1),ne(null),oe()}catch(be){console.error("Delete floor error:",be),le.error("Failed to delete floor")}},ye=()=>{te(!1),ne(null)},Ae=be=>{ce(be),X(!0)},Fe=()=>{X(!1),ce(null)},Ce=()=>{le.success("Floor documents uploaded successfully!")},Je=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(jc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(Je,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:we,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(Sn,{size:l?20:25})}),e.jsx(Ri,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Floors"}),h&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:["Apartment: ",h.name]})]})]}),e.jsxs("button",{onClick:ae,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Fa,{size:l?16:20}),e.jsx("span",{children:"Add New"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:R?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Xt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading floors..."})]}):C?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:C}),e.jsx("button",{onClick:oe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx($s,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No floors found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding floors"}),e.jsx("button",{onClick:ae,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First Floor"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Floors: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map((be,dt)=>e.jsxs("div",{onClick:()=>be.is_active&&fe(be),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${be.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["Floor ",be.floor_id]}),e.jsxs("div",{className:"flex items-center mt-1 space-x-3",children:[e.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"font-medium",children:"Houses:"})," ",be.house_count]}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-semibold rounded-full 
                                                                ${be.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":be.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":be.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:be.status.charAt(0).toUpperCase()+be.status.slice(1)})]})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:me=>{me.stopPropagation(),Ae(be)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(yr,{size:14})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),Re(be)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ja,{size:14})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),re(be)},className:`p-1.5 rounded-lg ${be.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(co,{size:14}):e.jsx(oo,{size:14})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),Me(be)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 flex justify-between",children:[e.jsx("span",{className:`px-1.5 py-0.5 rounded ${be.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:be.is_active?"Active":"Inactive"}),e.jsx("span",{children:"Click to view houses"})]})]},be.id||dt))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Floors Management"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," floors"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floor"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House Count"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map((be,dt)=>e.jsxs("tr",{onClick:()=>be.is_active&&fe(be),className:`transition-colors cursor-pointer ${be.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.floor_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:be.house_count}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full 
                                                                ${be.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":be.status==="maintenance"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":be.status==="partial"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:be.status.charAt(0).toUpperCase()+be.status.slice(1)})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:me=>{me.stopPropagation(),Ae(be)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(yr,{size:20})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),Re(be)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),re(be)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:be.is_active?"Deactivate":"Activate",children:be.is_active?e.jsx(co,{size:25}):e.jsx(oo,{size:25})}),e.jsx("button",{onClick:me=>{me.stopPropagation(),Me(be)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},be.id||dt))})]})]})})})]})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Floors"}),e.jsx("button",{onClick:se,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(w8,{onClose:se,onCreated:Z,apartment_id:f})]})})}),M&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Floor"}),e.jsx("button",{onClick:je,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(N8,{onClose:je,onUpdated:Ue,floor:B})]})})}),U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:P?.is_active?"Confirm Deactivation of Floor":"Confirm Activation of Floor"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:P?.is_active?"Are you sure you want to deactivate this floor?":"Are you sure you want to activate this floor?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Q,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{P&&(Y(P),L(!1),z(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${P?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:P?.is_active?"Deactivate":"Activate"})]})]})}),K&&V&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',V.floor_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:ye,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:at,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),ie&&q&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(k8,{floor:q,apartment:h,onClose:Fe,onUploadSuccess:Ce})})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function E8({onClose:t,apartment_id:a,onCreated:r}){const[i,l]=E.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),p=j=>{const{name:C,value:_}=j.target;l(R=>({...R,[C]:_}))},w=async j=>{j.preventDefault(),f(!0),b("");try{const C=await Se.post("/housetype",{...i,apartment_id:a},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});C.data.success?(r?.(C.data.data),t()):b("Failed to save house type")}catch(C){console.error("Error saving house type:",C),b("Error saving house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:w,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,placeholder:"House Type Name"}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:i.sqrfeet,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:i.rooms,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:i.bathrooms,onChange:p,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function C8({housetype:t,onClose:a,onUpdated:r}){const[i,l]=E.useState({name:"",sqrfeet:"",rooms:"",bathrooms:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),p=localStorage.getItem("token");E.useEffect(()=>{t&&l({name:t.name||"",sqrfeet:t.sqrfeet||"",rooms:t.rooms||"",bathrooms:t.bathrooms||""})},[t]);const w=C=>{const{name:_,value:R}=C.target;l(A=>({...A,[_]:R}))},j=async C=>{C.preventDefault(),f(!0),b("");try{const _=await Se.put(`/housetype/${t.id}`,i,{headers:{Authorization:`Bearer ${p}`}});_.data.success?(r&&r(_.data.data),a&&a()):b(_.data.message||"Failed to update house type")}catch(_){console.error("Update error:",_),b("Error updating house type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0,disabled:!0}),e.jsx("input",{type:"number",name:"sqrfeet",placeholder:"SQT FEET",value:i.sqrfeet,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"rooms",placeholder:"No of Bed Rooms",value:i.rooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"bathrooms",placeholder:"No of Bath Rooms",value:i.bathrooms,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600"}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function Zv(){const{apartment_id:t}=fn(),[a,r]=E.useState(!1),[i,l]=E.useState(null),[d,f]=E.useState([]),[h,b]=E.useState(!1),[p,w]=E.useState(!1),[j,C]=E.useState(null),[_,R]=E.useState(!1),[A,O]=E.useState(null),I=async()=>{try{r(!0),l(null);const te=await Se.get(`/housetype?apartment_id=${t}`);te.data.success&&Array.isArray(te.data.data)?f(te.data.data):f([])}catch(te){console.error("Error loading houses:",te),l("Failed to load houses. Please try again.")}finally{r(!1)}};E.useEffect(()=>{I()},[t]);const M=()=>{b(!0)},T=()=>{b(!1)},B=()=>{I(),b(!1),le.success("House Type Created Successfully")},H=te=>{C(te),w(!0)},U=()=>{w(!1),C(null)},L=()=>{I(),w(!1),le.success("House Type updated successfully!")},P=te=>{O(te),R(!0)},z=async()=>{try{if(!A)return;await Se.delete(`/houseType/${A.id}`),le.success("House type deleted successfully"),R(!1),O(null),I()}catch(te){console.error("Delete house type error:",te),le.error("Failed to delete house type")}},K=()=>{R(!1),O(null)};return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:M,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"New House Type"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading House types..."})]}):i?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[i,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx($s,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No house types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding house types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"SQR Feet"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Rooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No of Bathrooms"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map(te=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.sqrfeet}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.rooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:te.bathrooms}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:V=>{V.stopPropagation(),H(te)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:V=>{V.stopPropagation(),P(te)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},te.id))})]})}),h&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:T,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New House Types"}),e.jsx(E8,{onClose:T,onCreated:B,apartment_id:t})]})}),p&&j&&e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:U,className:"absolute top-2 right-2 text-gray-500 hover:text-gray-800 dark:hover:text-white",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the House Type"}),e.jsx(C8,{onClose:U,onUpdated:L,housetype:j})]})}),_&&A&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',A.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:K,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:z,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function _8({houseowner:t,onClose:a,onUpdated:r}){const[i,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState(null),[p,w]=E.useState(null),[j,C]=E.useState([]),[_,R]=E.useState({name:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:""});E.useEffect(()=>{t&&(R({name:t.name||"",occupation:t.occupation||"",country:t.country||"",mobile:t.mobile||"",email:t.email||"",occupied_way:t.occupied_way||"own",proof:t.proof||""}),t.proof&&w(t.proof))},[t]),E.useEffect(()=>{(async()=>{try{const L=await Se.get("/countries");C(L.data.data||[])}catch(L){console.error("Error fetching countries:",L)}})()},[]);const A=U=>{const{name:L,value:P}=U.target;R(z=>({...z,[L]:P}))},O=U=>{const L=U.target.files[0];if(L)if(b(L),L.type.startsWith("image/")){const P=new FileReader;P.onloadend=()=>{w(P.result)},P.readAsDataURL(L)}else w(null)},I=U=>{const L=U.target.value,P=j.find(z=>z.id.toString()===L);R(P?z=>({...z,country:P.country_name,mobile:P.phone_code+" "+z.mobile.replace(/^\+\d+\s?/,"")}):z=>({...z,country:"",mobile:z.mobile.replace(/^\+\d+\s?/,"")}))},M=U=>{const L=U.target.value;if(_.mobile&&_.mobile.includes("+")){const P=_.mobile.match(/^(\+\d+)(?:\s|$)/);if(P){const z=P[1];L.startsWith(z)?R(K=>({...K,mobile:L})):R(K=>({...K,mobile:z+" "+L.replace(/^\+\d+\s?/,"")}));return}}R(P=>({...P,mobile:L}))},T=async U=>{U.preventDefault(),f(!0);try{const L=new FormData;Object.keys(_).forEach(z=>{z!=="proof"&&L.append(z,_[z])}),h&&L.append("proof",h);const P=await Se.put(`/houseowner/${t.id}`,L,{headers:{"Content-Type":"multipart/form-data"}});P.data.success&&(r(P.data.data),a())}catch(L){console.error("Error updating house owner:",L),alert("Error updating house owner. Please try again.")}finally{f(!1)}},H=j.find(U=>U.country_name===_.country)?.phone_code||"";return i?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Xt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit House Owner"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:e.jsx(mr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:T,className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(cs,{size:16,className:"inline mr-2"}),"Name *"]}),e.jsx("input",{type:"text",name:"name",value:_.name,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Hu,{size:16,className:"inline mr-2"}),"Occupation *"]}),e.jsx("input",{type:"text",name:"occupation",value:_.occupation,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Fv,{size:16,className:"inline mr-2"}),"Country *"]}),e.jsxs("select",{name:"country",value:j.find(U=>U.country_name===_.country)?.id||"",onChange:I,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Country"}),j.map(U=>e.jsxs("option",{value:U.id,children:[U.country_name," (",U.phone_code,")"]},U.id))]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ec,{size:16,className:"inline mr-2"}),"Mobile Number *"]}),e.jsxs("div",{className:"flex",children:[H&&e.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-3 py-3 rounded-l-lg border border-gray-300  dark:text-white text-gray-700 dark:border-gray-600 border-r-0",children:H}),e.jsx("input",{type:"tel",name:"mobile",value:_.mobile.replace(/^\+\d+\s?/,""),onChange:M,placeholder:"Enter phone number",className:`w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${H?"rounded-l-none":""}`,required:!0})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(io,{size:16,className:"inline mr-2"}),"Email Address *"]}),e.jsx("input",{type:"email",name:"email",value:_.email,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:_.occupied_way,onChange:A,className:"w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Os,{size:16,className:"inline mr-2"}),"Proof Document"]}),p&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Current Document:"}),e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx(yr,{size:20,className:"text-gray-500 mr-3"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 truncate",children:_.proof.split("/").pop()})}),e.jsx("a",{href:`${Se.defaults.baseURL}/houseowner/view-proof/${t.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline text-sm",children:"View"})]})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors",children:[e.jsx("input",{type:"file",id:"proof",onChange:O,accept:"image/*",className:"hidden"}),e.jsxs("label",{htmlFor:"proof",className:"cursor-pointer block",children:[e.jsx(Os,{className:"mx-auto text-gray-400 mb-2",size:24}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Click to upload new document"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500",children:"PNG, JPG, JPEG up to 5MB"})]}),h&&e.jsx("div",{className:"mt-3 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:["New file selected: ",h.name]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):"Save Changes"})]})]})]})}):null}function A8({houseownerId:t,onClose:a,onSuccess:r}){const[i,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState({name:"",nic:"",email:"",phone:"",houseowner_id:t}),[p,w]=E.useState({});E.useEffect(()=>{b({name:"",nic:"",email:"",phone:"",houseowner_id:t}),w({})},[t]);const j=()=>{const A={};return h.name.trim()||(A.name="Name is required"),h.nic.trim()||(A.nic="NIC is required"),h.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h.email)&&(A.email="Invalid email address"),h.phone&&!/^[0-9+\-\s()]{10,}$/.test(h.phone.replace(/\s/g,""))&&(A.phone="Invalid phone number"),w(A),Object.keys(A).length===0},C=A=>{const{name:O,value:I}=A.target;b(M=>({...M,[O]:I})),p[O]&&w(M=>({...M,[O]:""}))},_=async A=>{if(A.preventDefault(),!!j()){f(!0);try{const O=await Se.post("/family",{...h,houseowner_id:t});O.data.success&&(r(O.data.data),a())}catch(O){console.error("Error adding family member:",O),O.response?.data?.error?w(I=>({...I,general:O.response.data.message||"Failed to add family member"})):w(I=>({...I,general:"Failed to add family member. Please try again."}))}finally{f(!1)}}},R=A=>{const I=A.target.value.replace(/[^\d+\-\s]/g,"");b(M=>({...M,phone:I})),p.phone&&w(M=>({...M,phone:""}))};return i?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-8",children:[e.jsx(Xt,{className:"animate-spin mx-auto text-purple-600",size:32}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-300",children:"Loading..."})]})}):e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Xu,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Add New Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(mr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6",children:[p.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:p.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(cs,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter full name",required:!0,disabled:d}),p.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Mv,{size:16,className:"inline mr-2"}),"NIC Number *"]}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.nic?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter NIC number",required:!0,disabled:d}),p.nic&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.nic})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(io,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:h.email,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter email address (optional)",disabled:d}),p.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ec,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:h.phone,onChange:R,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${p.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,placeholder:"Enter phone number (optional)",disabled:d}),p.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:p.phone}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: +94 77 123 4567 or 0771234567"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:18,className:"animate-spin mr-2"}),"Adding..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xu,{size:18,className:"mr-2"}),"Add Member"]})})]})]})]})})}function S8({member:t,onClose:a,onUpdated:r}){const[i,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState({}),[p,w]=E.useState({name:"",email:"",phone:""});E.useEffect(()=>{t&&w({name:t.name||"",email:t.email||"",phone:t.phone||""})},[t]);const j=()=>{const R={};return p.name.trim()||(R.name="Name is required"),p.email&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(p.email)&&(R.email="Invalid email address"),p.phone&&!/^[0-9+\-\s()]{10,}$/.test(p.phone.replace(/\s/g,""))&&(R.phone="Invalid phone number"),b(R),Object.keys(R).length===0},C=R=>{const{name:A,value:O}=R.target;w(I=>({...I,[A]:O})),h[A]&&b(I=>({...I,[A]:""}))},_=async R=>{if(R.preventDefault(),!!j()){f(!0);try{const A=await Se.put(`/family/${t.id}`,p);A.data.success&&(r(A.data.data),a())}catch(A){console.error("Error updating family member:",A),b(O=>({...O,general:A.response?.data?.message||"Failed to update family member"}))}finally{f(!1)}}};return t?e.jsx("div",{className:"fixed inset-0 bg-white/0 backdrop-blur-lg bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Edit Family Member"})]}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",disabled:d,children:e.jsx(mr,{size:20,className:"text-gray-500"})})]}),e.jsxs("form",{onSubmit:_,className:"p-6",children:[h.general&&e.jsx("div",{className:"mb-4 p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:h.general})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(cs,{size:16,className:"inline mr-2"}),"Full Name *"]}),e.jsx("input",{type:"text",name:"name",value:p.name,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.name?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,required:!0,disabled:d}),h.name&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.name})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(io,{size:16,className:"inline mr-2"}),"Email Address"]}),e.jsx("input",{type:"email",name:"email",value:p.email,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.email?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.email&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[e.jsx(Ec,{size:16,className:"inline mr-2"}),"Phone Number"]}),e.jsx("input",{type:"tel",name:"phone",value:p.phone,onChange:C,className:`w-full p-3 border rounded-lg dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.phone?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600"}`,disabled:d}),h.phone&&e.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:h.phone})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-6 mt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:d?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:18,className:"animate-spin mr-2"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(yf,{size:18,className:"mr-2"}),"Save Changes"]})})]})]})]})}):null}function T8(){const[t,a]=E.useState(!1),[r,i]=E.useState("type"),{apartment_id:l,floor_id:d,id:f}=fn(),[h,b]=E.useState(null),[p,w]=E.useState(null),[j,C]=E.useState(null),[_,R]=E.useState(null),[A,O]=E.useState(null),[I,M]=E.useState([]),[T,B]=E.useState(!1),[H,U]=E.useState([]),[L,P]=E.useState(!1),[z,K]=E.useState(!1),[te,V]=E.useState(!1),[ne,ie]=E.useState(!1),[X,q]=E.useState(!1),[ce,we]=E.useState(null),oe=xr();E.useEffect(()=>{l&&Se.get(`/apartments/${l}`).then(je=>je.data.success&&b(je.data.data)).catch(je=>console.error("Error fetching apartment:",je))},[l]),E.useEffect(()=>{d&&Se.get(`/floors/${d}`).then(je=>je.data.success&&w(je.data.data)).catch(je=>console.error("Error fetching floor:",je))},[d]),E.useEffect(()=>{f&&Se.get(`/houses/${f}`).then(je=>je.data.success&&C(je.data.data)).catch(je=>console.error("Error fetching house:",je))},[f]),E.useEffect(()=>{j?.housetype_id&&Se.get(`/housetype/${j.housetype_id}`).then(je=>je.data.success&&R(je.data.data)).catch(je=>console.error("Error fetching house type:",je))},[j]),E.useEffect(()=>{j?.houseowner_id&&Se.get(`/houseowner/${j.houseowner_id}`).then(je=>je.data.success&&O(je.data.data)).catch(je=>console.error("Error fetching house owner: ",je))},[j]),E.useEffect(()=>{j?.houseowner_id&&fe(j.houseowner_id)},[j]);const fe=async je=>{try{B(!0);const Ue=await Se.get(`/family/houseowner/${je}`);Ue.data.success&&M(Ue.data.data||[])}catch(Ue){console.error("Error fetching family members: ",Ue),M([])}finally{B(!1)}};E.useEffect(()=>{f&&re()},[f]);const re=async()=>{try{P(!0);const je=await Se.get(`/bill-assignments/house/${f}`);je.data.success&&U(je.data.data||[])}catch(je){console.error("Error fetching assigned bills:",je),U([])}finally{P(!1)}},Q=()=>{oe(`/houses/${l}/${d}`)},Y=je=>new Date(je).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),ae=async()=>{if(!A?.id){le.warning("House owner information not available");return}try{K(!0);try{const Fe=await Se.head(`/houseowner/download-proof/${A.id}`);le.info("Proof document found, starting download...")}catch(Fe){console.error("HEAD request failed:",Fe.response?.status||Fe.message)}const je=await Se.get(`/houseowner/download-proof/${A.id}`,{responseType:"blob"});if(le.info(`Download response status: ${je.status}`),je.status!==200){const Fe=await je.data.text();le.error(`Error response: ${Fe}`);let Ce=`Download failed with status ${je.status}`;try{const Je=JSON.parse(Fe);Je.message&&(Ce=Je.message)}catch{Fe&&(Ce=Fe)}throw new Error(Ce)}const Ue=new Blob([je.data]),Me=window.URL.createObjectURL(Ue),at=document.createElement("a");at.href=Me;const ye=je.headers["content-disposition"];let Ae="owner_proof.jpg";if(ye){const Fe=ye.match(/filename="?([^"]+)"?/);Fe&&(Ae=Fe[1],le.info(`Filename from header: ${Ae}`))}else if(A.proof){const Fe=A.proof.split("/");Ae=Fe[Fe.length-1]||Ae}at.download=Ae,document.body.appendChild(at),at.click(),document.body.removeChild(at),setTimeout(()=>{window.URL.revokeObjectURL(Me)},100),le.success("Download successful")}catch(je){le.error("Error downloading proof"),console.error("Error details:",{name:je.name,message:je.message,stack:je.stack,response:je.response?.data}),je.response?.status===404?alert("Proof document not found. Please check if the file exists on the server."):je.response?.status===500?alert("Server error occurred. Please check server logs."):je.message?alert(`Download failed: ${je.message}`):alert("Failed to download proof document. Please try again.")}finally{K(!1)}},se=()=>{j?.houseowner_id?ie(!0):le.warning("House owner information is required before adding family members.")},Z=je=>{we(je),q(!0)},Re=async je=>{if(window.confirm("Are you sure you want to delete this family member?"))try{await Se.delete(`/family/${je}`),j?.houseowner_id&&fe(j.houseowner_id)}catch{le.error("Failed to delete family member")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Q,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Sn,{size:25})}),e.jsx(Ur,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3 ml-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"House Details"})]}),h&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Apartment: ",h.name]}),p&&e.jsxs("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:["Floor: ",p.floor_id]}),j&&e.jsx("div",{className:"mt-1 text-gray-700 dark:text-gray-300 font-semibold ml-12",children:e.jsxs("p",{children:["House No: ",j.house_id]})})]})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4",children:[e.jsx("button",{onClick:()=>i("type"),className:`px-4 py-2 font-semibold 
                                    ${r==="type"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Type"}),e.jsx("button",{onClick:()=>i("owner"),className:`px-4 py-2 font-semibold 
                                    ${r==="owner"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Owner"}),e.jsxs("button",{onClick:()=>i("residents"),className:`px-4 py-2 font-semibold 
                                    ${r==="residents"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Residents (",I.length,")"]}),e.jsx("button",{onClick:()=>i("assignedBills"),className:`px-4 py-2 font-semibold 
                                    ${r==="assignedBills"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Assigned Bills"})]}),r==="type"&&_&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(Ur,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Type Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(U0,{className:"text-blue-600 dark:text-blue-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Type Name"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:_.name})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-6 rounded-xl border border-purple-200 dark:border-purple-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(U0,{className:"text-purple-600 dark:text-purple-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Square Feet"}),e.jsxs("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:[_.sqrfeet," sq ft"]})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-6 rounded-xl border border-green-200 dark:border-green-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(B6,{className:"text-green-600 dark:text-green-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Rooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:_.rooms})]})]})}),e.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-6 rounded-xl border border-orange-200 dark:border-orange-800",children:e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(F6,{className:"text-orange-600 dark:text-orange-400 mr-3",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Bathrooms"}),e.jsx("p",{className:"text-lg font-bold text-gray-800 dark:text-white",children:_.bathrooms})]})]})})]})]}),r==="owner"&&A&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center",children:[e.jsx(cs,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"House Owner Information"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900/30 dark:to-indigo-800/30 p-6 rounded-xl border border-indigo-200 dark:border-indigo-800",children:[e.jsxs("div",{className:"flex items-start mb-6",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center text-white text-2xl font-bold mr-4",children:A.name?.charAt(0)||"O"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:A.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Owner"})]}),A.houseowner_id&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-semibold",children:"Role:"})," House Owner"]})}),e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>V(!0),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(ja,{size:18})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Zm,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"NIC Number"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.NIC})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Hu,{className:"text-gray-500 dark:text-gray-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.occupation})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-purple-100 dark:bg-purple-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-purple-700 dark:text-purple-300 text-sm font-medium",children:A.occupied_way})}),e.jsx("div",{className:"bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-lg mr-2",children:e.jsx("span",{className:"text-green-700 dark:text-green-300 text-sm font-medium",children:Y(j.occupied_at)})})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-6 rounded-xl border border-blue-200 dark:border-blue-800",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Contact Information"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Fv,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.country})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ec,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:A.mobile})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(io,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white break-all",children:A.email||"N/A"})]})]}),A.proof&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(yr,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Proof Document"}),e.jsx("button",{onClick:ae,disabled:z,className:"flex items-center font-medium text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:z?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Cl,{size:16,className:"mr-2"}),"Download Proof"]})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:A.proof.split("/").pop()})]})]})]})]})]})]}),r==="residents"&&e.jsxs("div",{className:"animate-fadeIn",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(ei,{className:"mr-3 text-purple-600 dark:text-purple-400",size:24}),"Family Members / Residents"]}),e.jsxs("button",{onClick:se,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center",children:[e.jsx(Xu,{size:18,className:"mr-2"}),"Add Family Member"]})]}),T?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:28,className:"animate-spin text-purple-600 mr-3"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading family members..."})]}):I.length===0?e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(ei,{size:64,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"No Family Members Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-md mx-auto",children:"There are no family members or residents registered for this house owner."}),e.jsxs("button",{onClick:se,className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center mx-auto",children:[e.jsx(Xu,{size:18,className:"mr-2"}),"Add First Family Member"]})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:I.map(je=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-lg font-bold mr-3",children:je.name?.charAt(0)||"F"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-gray-800 dark:text-white text-lg",children:je.name}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(Mv,{size:14,className:"text-gray-500 mr-1"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:je.nic})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>Z(je),className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg transition-colors",title:"Edit",children:e.jsx(ja,{size:18})}),e.jsx("button",{onClick:()=>Re(je.id),className:"p-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Delete",children:e.jsx(Fr,{size:18})})]})]}),e.jsxs("div",{className:"space-y-3",children:[je.occupation&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Hu,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium",children:je.occupation})]})]}),je.email&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(io,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium truncate",children:je.email})]})]}),je.phone&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(UE,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:je.phone})]})]}),je.moved_at&&e.jsxs("div",{className:"flex items-center text-gray-700 dark:text-gray-300",children:[e.jsx(Nl,{size:16,className:"mr-3 text-gray-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Added On"}),e.jsx("p",{className:"font-medium",children:Y(je.moved_at)})]})]})]})]},je.id))})]}),r==="assignedBills"&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(yr,{className:"mr-2",size:20}),"Assigned Bills"]}),L?e.jsxs("div",{className:"flex justify-center items-center py-8",children:[e.jsx(Xt,{size:24,className:"animate-spin text-purple-600 mr-2"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Loading assigned bills..."})]}):H.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(yr,{size:48,className:"mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No bills assigned to this house"}),e.jsx("p",{className:"text-sm",children:"Bills will appear here once they are assigned to this house"})]}):e.jsx("div",{className:"space-y-4",children:H.map(je=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Gs,{size:18,className:"text-green-600 mr-2"}),e.jsx("h4",{className:"font-semibold text-gray-800 dark:text-white text-lg",children:je.bill?.bill_name||"Unknown Bill"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium mr-2",children:"Type:"}),e.jsx("span",{className:"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 px-2 py-1 rounded text-xs",children:je.bill?.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Nl,{size:14,className:"mr-2"}),e.jsx("span",{className:"font-medium mr-2",children:"Assigned:"}),e.jsx("span",{children:Y(je.assigned_date)})]})]})]}),e.jsx("div",{className:"flex flex-col items-end space-y-2",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${je.status==="active"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:je.status||"active"})})]})},je.id))})]})]})})]}),te&&A&&e.jsx(_8,{houseowner:A,onClose:()=>V(!1),onUpdated:je=>{O(je),V(!1)}}),ne&&j?.houseowner_id&&e.jsx(A8,{houseownerId:j.houseowner_id,onClose:()=>ie(!1),onSuccess:je=>{M(Ue=>[je,...Ue]),ie(!1)}}),X&&ce&&e.jsx(S8,{member:ce,onClose:()=>{q(!1),we(null)},onUpdated:je=>{fe(),M(Ue=>Ue.map(Me=>Me.id===je.id?je:Me)),q(!1),we(null)}}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function R8({onClose:t,onCreated:a,apartment_id:r,floor_id:i}){const[l,d]=E.useState([{numHouses:1,housetype_id:""}]),[f,h]=E.useState(""),[b,p]=E.useState([]),[w,j]=E.useState([]),[C,_]=E.useState([]),[R,A]=E.useState(!1),[O,I]=E.useState(!0),[M,T]=E.useState("");E.useEffect(()=>{(async()=>{try{const ie=await Se.get(`/houses?apartment_id=${r}&floor_id=${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ie.data?.data?.length>0&&_(ie.data.data)}catch(ie){console.error("Error fetching existing houses:",ie)}finally{I(!1)}})()},[r,i]),E.useEffect(()=>{(async()=>{try{const ie=await Se.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});j(ie.data.data||[])}catch(ie){console.error("Error fetching house types:",ie)}})()},[r]);const B=ne=>{if(!ne||C.length===0)return 0;const ie=C.filter(q=>q.house_id&&q.house_id.startsWith(ne)).map(q=>{const we=q.house_id.slice(ne.length).match(/^\d+$/);return we?parseInt(we[0]):0}).filter(q=>q>0);return ie.length===0?0:Math.max(...ie)},H=()=>{d(ne=>[...ne,{numHouses:1,housetype_id:""}])},U=ne=>{if(l.length===1){T("At least one house type row is required");return}d(ie=>ie.filter((X,q)=>q!==ne))},L=(ne,ie,X)=>{d(q=>q.map((ce,we)=>we===ne?{...ce,[ie]:X}:ce))},P=()=>{if(!f.trim()){T("Please enter a key letter/prefix");return}if(l.filter(we=>!we.housetype_id||we.numHouses<1).length>0){T("Please select house type and ensure number of houses is at least 1 for all rows");return}T("");const ie=f.trim().toUpperCase();let q=B(ie)+1;const ce=[];l.forEach(we=>{const oe=w.find(fe=>fe.id===we.housetype_id);for(let fe=0;fe<we.numHouses;fe++)ce.push({house_id:`${ie}${q}`,housetype_id:we.housetype_id,house_type_name:oe?.name||""}),q++}),p(ce)},z=(ne,ie)=>{const X=[...b];X[ne].housetype_id=ie;const q=w.find(ce=>ce.id===ie);X[ne].house_type_name=q?.name||"",p(X)},K=async ne=>{if(ne.preventDefault(),T(""),A(!0),b.filter(X=>!X.housetype_id).length>0){T("Please select house type for all houses"),A(!1);return}try{const X={apartment_id:r,floor_id:i,houses:b.map(ce=>({house_id:ce.house_id,housetype_id:ce.housetype_id}))},q=await Se.post("/houses/batch",X,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});a&&a(),t&&t()}catch(X){console.error("Error creating houses:",X),T(X.response?.data?.message||"Server error while creating houses.")}finally{A(!1)}},te=ne=>{h(ne.target.value),p([])},V=l.reduce((ne,ie)=>ne+(ie.numHouses||0),0);return e.jsxs("div",{className:"p-4 text-white",children:[M&&e.jsx("div",{className:"mb-3 p-2 bg-red-100 border border-red-400 text-red-700 rounded",children:M}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"1"}),"Configure Houses"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white mb-2",children:"Key Letter/Prefix:"}),e.jsx("input",{type:"text",value:f,onChange:te,placeholder:"Enter prefix (e.g., H, E, EH, A)",className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-700",maxLength:10}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter letters that will prefix your house numbers (e.g., H for H1, H2... or EH for EH1, EH2...)"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm text-black dark:text-white",children:"House Type Configuration:"}),e.jsxs("button",{type:"button",onClick:H,className:"flex items-center gap-1 px-3 py-1 bg-green-600 hover:bg-green-700 text-white rounded text-sm",children:[e.jsx(Fa,{size:16}),"Add Row"]})]}),e.jsx("div",{className:"space-y-3 max-h-48 overflow-y-auto border border-purple-300 rounded p-3 bg-gray-50 dark:bg-gray-700",children:l.map((ne,ie)=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Number:"}),e.jsx("input",{type:"number",value:ne.numHouses,onChange:X=>L(ie,"numHouses",parseInt(X.target.value)||1),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",min:"1",max:"50"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"Type:"}),e.jsxs("select",{value:ne.housetype_id,onChange:X=>L(ie,"housetype_id",X.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-500",children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(X=>e.jsx("option",{value:X.id,children:X.name},X.id))]})]}),e.jsx("div",{className:"flex items-end pt-2",children:e.jsx("button",{type:"button",onClick:()=>U(ie),disabled:l.length===1,className:"p-1 text-red-600 hover:text-red-800 disabled:text-gray-400 disabled:cursor-not-allowed",title:"Remove row",children:e.jsx(Fr,{size:16})})})]},ie))}),e.jsx("div",{className:"mt-3 p-2 bg-purple-50 dark:bg-purple-900/20 border border-purple-200 dark:border-purple-700 rounded",children:e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Total houses to generate:"}),e.jsx("span",{className:"font-bold text-purple-600 dark:text-purple-400 text-lg",children:V})]})})]}),f.trim()&&C.length>0&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-100 border border-blue-400 text-blue-700 rounded text-sm",children:[e.jsxs("strong",{children:['Prefix "',f.toUpperCase(),'":']})," Found ",B(f.trim().toUpperCase())," existing houses.",B(f.trim().toUpperCase())===0?" Will start from 1.":` Will continue from ${B(f.trim().toUpperCase())+1}.`]}),e.jsx("button",{type:"button",onClick:P,disabled:!f.trim()||O||V===0,className:"w-full px-4 py-3 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-gray-400 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-semibold",children:O?"Loading...":e.jsxs(e.Fragment,{children:["Generate ",V," House",V!==1?"s":"",e.jsx(_6,{size:18})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-purple-300 p-4 h-full",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 text-black dark:text-white flex items-center",children:[e.jsx("span",{className:"bg-purple-600 text-white p-2 rounded-full mr-2",children:"2"}),"Review & Save"]}),b.length>0?e.jsxs("form",{onSubmit:K,className:"h-full flex flex-col",children:[e.jsxs("div",{className:"flex-1 border border-purple-300 rounded p-3 overflow-y-auto max-h-96",children:[e.jsxs("div",{className:"mb-3 text-sm text-gray-600 dark:text-gray-400",children:["Generated ",b.length," house",b.length!==1?"s":"",' with prefix "',f.toUpperCase(),'"']}),b.map((ne,ie)=>e.jsxs("div",{className:"border border-purple-200 rounded p-3 mb-3 bg-gray-50 dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House ID:"}),e.jsx("input",{type:"text",value:ne.house_id,disabled:!0,className:"border rounded p-2 text-black dark:text-white border-purple-600 bg-gray-100 dark:bg-gray-600 w-full text-sm"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-black dark:text-white mb-1",children:"House Type:"}),e.jsxs("select",{value:ne.housetype_id,onChange:X=>z(ie,X.target.value),className:"w-full p-2 border border-purple-600 rounded text-black dark:text-white dark:bg-gray-600 text-sm",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),w.map(X=>e.jsx("option",{value:X.id,children:X.name},X.id))]})]})]}),ne.house_type_name&&e.jsxs("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-medium",children:["Type: ",ne.house_type_name]})]},ie))]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:t,disabled:R,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white disabled:bg-gray-300 text-sm",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:R,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white disabled:bg-purple-400 flex items-center gap-2 text-sm",children:R?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):`Save ${b.length} House${b.length>1?"s":""}`})]})]}):e.jsxs("div",{className:"h-48 flex flex-col items-center justify-center text-gray-500 dark:text-gray-400 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:""}),e.jsx("p",{className:"text-center",children:"Houses will appear here"}),e.jsx("p",{className:"text-center text-sm",children:"Configure and generate houses on the left"})]})]})})]})]})}function D8({isOpen:t,onClose:a,onImportSuccess:r,apartment_id:i,floor_id:l,house_id:d}){const[f,h]=E.useState(null),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(null),[R,A]=E.useState(i||""),O=z=>{z.preventDefault(),p(!0)},I=z=>{z.preventDefault(),p(!1)},M=z=>{z.preventDefault(),p(!1);const K=z.dataTransfer.files[0];K&&B(K)},T=z=>{const K=z.target.files[0];K&&B(K)},B=z=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel","text/csv"].includes(z.type)){le.error("Please select an Excel file (.xlsx, .xls, .csv)");return}if(z.size>10*1024*1024){le.error("File size must be less than 10MB");return}h(z),_(null)},H=()=>{const z=`name,nic,occupation,country,mobile,email,occupied_way
John Doe,123456789V,Software Engineer,Sri Lanka,+94 771234567,john.doe@example.com,own

Instructions:
1. Fill in the house owner details in the second row
2. Keep the column headers as shown in the first row
3. Save the file and upload it here
4. The system will extract the information automatically

Important:
- Fill only one row (single house owner)
- Email is required for verification
- Mobile should include country code
- occupied_way can be "own" or "For rent"`,K=new Blob([z],{type:"text/csv"}),te=window.URL.createObjectURL(K),V=document.createElement("a");V.href=te,V.download="house_owner_template.csv",document.body.appendChild(V),V.click(),document.body.removeChild(V),window.URL.revokeObjectURL(te),le.success("Template downloaded successfully!")},U=async()=>{if(!f){le.error("Please select a file first");return}if(!i){le.error("Apartment information is missing");return}j(!0);const z=new FormData;z.append("excelFile",f),z.append("apartment_id",i),d&&z.append("house_id",d);try{const K=await Se.post("/houseowner/import-from-excel",z,{headers:{"Content-Type":"multipart/form-data"}});K.data.success&&(_(K.data.data),r&&r(K.data.data.houseOwner),le.success("House owner imported successfully!"))}catch(K){console.error("Import error:",K),le.error(K.response?.data?.message||"Failed to import house owner")}finally{j(!1)}},L=()=>{h(null),_(null)},P=()=>{L(),a()};return t?e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Import House Owner from Excel"}),e.jsx("button",{onClick:P,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(mr,{size:24})})]}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:C?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ds,{className:"h-6 w-6 text-green-600 dark:text-green-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-green-800 dark:text-green-300",children:"House Owner Imported Successfully!"}),e.jsxs("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:["Verification email has been sent to ",C.houseOwner.email]})]})]})}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4",children:[e.jsx("h3",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"Imported House Owner Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Name"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"NIC/Passport"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.nic})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Email"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.email})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Mobile"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.mobile})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Occupation"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.occupation})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-gray-500 dark:text-gray-400",children:"House Owner ID"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:C.houseOwner.id})]})]}),C.house&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Linked to House:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"House ID:"}),e.jsx("p",{className:"font-medium",children:C.house.house_id})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),e.jsx("p",{className:"font-medium text-green-600",children:"Occupied"})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:L,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Import Another"}),e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors",children:"Done"})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Download Template"}),e.jsx("p",{className:"text-sm text-blue-600 dark:text-blue-400 mt-1",children:"Download our template to ensure proper formatting"})]}),e.jsxs("button",{onClick:H,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Cl,{size:16}),"Download Template"]})]})}),e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${b?"border-purple-500 bg-purple-50 dark:bg-purple-900/20":"border-gray-300 dark:border-gray-600 hover:border-purple-400"}`,onDragOver:O,onDragLeave:I,onDrop:M,children:[e.jsx(fE,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-lg font-medium text-gray-700 dark:text-gray-300",children:f?f.name:"Drop your Excel file here"}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["or"," ",e.jsxs("label",{className:"text-purple-600 hover:text-purple-700 cursor-pointer",children:["browse files",e.jsx("input",{type:"file",className:"hidden",accept:".xlsx,.xls,.csv",onChange:T})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:"Supports .xlsx, .xls, .csv files (max 10MB)"})]}),e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-left",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-200 mb-3",children:"File Format Requirements:"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Column Name"}),e.jsx("div",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 border-t pt-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"name"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Full name of house owner"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"nic"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"NIC or passport number"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"email"})," (Required)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Email address"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupation"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Occupation"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"country"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Country name"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"mobile"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"Mobile number with country code"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"occupied_way"})," (Optional)"]}),e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:'"own" or "For rent"'})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:[e.jsx("strong",{children:"Note:"})," Only the first row of the Excel file will be imported."]})})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{onClick:P,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:w,children:"Cancel"}),e.jsx("button",{onClick:U,disabled:!f||w,className:"flex items-center gap-2 px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors",children:w?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{size:16}),"Import House Owner"]})})]})]})})]})}):null}function O8({house:t,onClose:a,onUpdated:r,apartment_id:i,floor_id:l}){const[d,f]=E.useState({house_id:t.house_id,status:t.status,housetype_id:t.housetype_id,houseowner_id:t.houseowner_id}),[h,b]=E.useState({name:"",nic:"",occupation:"",country:"",mobile:"",email:"",occupied_way:"own",proof:null}),[p,w]=E.useState([]),[j,C]=E.useState(!1),[_,R]=E.useState(!1),[A,O]=E.useState(null),[I,M]=E.useState([]),[T,B]=E.useState(!0),[H,U]=E.useState(!1);E.useEffect(()=>{(async()=>{try{const we=await(await fetch("https://general.apivcm.shop/countries")).json();M(we.data)}catch(ce){console.error("Error fetching countries:",ce)}})()},[]),E.useEffect(()=>{const q=async()=>{try{const ce=await Se.get("/auth/me");if(ce.data?.success&&ce.data.data&&ce.data.data.length>0){const we=ce.data.data[0],oe=we.country||we.country_name||"";if(oe){const fe=(I||[]).find(re=>re.country===oe||re.country_name===oe);b(re=>({...re,country:re.country||oe,mobile:re.mobile||(fe?fe.international_dialing+" ":re.mobile)}))}}}catch(ce){console.error("Error fetching admin profile for prefill:",ce)}};I&&I.length>0&&q()},[I]);const L=q=>{const ce=q.target.value,we=I.find(oe=>oe.country===ce);b(oe=>({...oe,country:ce,mobile:we?we.international_dialing+" ":oe.mobile}))},P=q=>{const ce=q.target.value;if(ne){const we=ce.replace(/\D/g,""),oe=ne.international_dialing.replace(/\D/g,""),fe=we.startsWith(oe)?we.slice(oe.length):we;b(re=>({...re,mobile:ne.international_dialing+(fe?" "+fe:"")}))}else b(we=>({...we,mobile:ce}))};E.useEffect(()=>{(async()=>{try{const ce=await Se.get(`/housetype?apartment_id=${i}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});w(ce.data.data||[])}catch(ce){console.error("Error fetching house types:",ce)}})()},[i]),E.useEffect(()=>{d.status==="occupied"&&t.status!=="occupied"?(R(!0),B(!0)):d.status!=="occupied"&&R(!1)},[d.status,t.status]);const z=q=>{f({...d,[q.target.name]:q.target.value})},K=q=>{b({...h,[q.target.name]:q.target.value})},te=q=>{O(q.target.files[0])},V=async q=>{q.preventDefault(),C(!0);try{let ce=d.houseowner_id,we=!1;if(d.status==="occupied"&&!ce){const re=new FormData;re.append("name",h.name),re.append("nic",h.nic),re.append("occupation",h.occupation),re.append("country",h.country),re.append("mobile",h.mobile),re.append("email",h.email),re.append("occupied_way",h.occupied_way),re.append("apartment_id",i),A&&re.append("proof",A);const Q=await Se.post("/houseowner",re,{headers:{"Content-Type":"multipart/form-data"}});Q.data.success&&(ce=Q.data.data.id,we=!0,f(Y=>({...Y,houseowner_id:ce})))}const oe={...d,house_owner_id:ce||ce};if((await Se.put(`/houses/${t.id}`,oe)).data.success)return we?(r(),le.success("House owner saved successfully! You can now setup login.")):r(),ce}catch(ce){console.error("Error updating house:",ce),le.error("Error updating house. Please try again.")}finally{C(!1)}},ne=I.find(q=>q.country===h.country),ie=async()=>{try{C(!0);const q=d.houseowner_id;if(!q){le.error("House owner ID not found. Please save the house owner first.");return}const ce=h.email;if(!ce||!ce.includes("@")){le.error("Please enter a valid email address for the house owner");return}if(!window.confirm(`Send verification email to ${ce}?

The house owner will receive an email with verification link.`)){C(!1);return}const oe=await Se.post("/houseowner-auth/admin/setup",{houseowner_id:q,send_email:!0});oe.data.success?(le.success("Verification email sent. Check your inbox "),r()):le.error(oe.data.message||"Failed to set up house owner")}catch(q){console.error("Error setting up house owner:",q),le.error("Error setting up house owner. Please try again.")}finally{C(!1)}},X=q=>{b({name:q.name||"",nic:q.nic||"",occupation:q.occupation||"",country:q.country||"",mobile:q.mobile||"",email:q.email||"",occupied_way:q.occupied_way||"own",proof:null}),q.id&&f(ce=>({...ce,houseowner_id:q.id})),U(!1)};return e.jsxs("form",{onSubmit:V,className:"flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto space-y-4 pr-2 pl-1",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House ID"}),e.jsx("input",{type:"text",name:"house_id",value:d.house_id,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"House Type"}),e.jsxs("select",{name:"housetype_id",value:d.housetype_id,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Type"}),p&&p.length>0?p.map(q=>e.jsx("option",{value:q.id,children:q.name||q.type_name||"Unnamed Type"},q.id)):e.jsx("option",{value:"",disabled:!0,children:"No house types available"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Status"}),e.jsxs("select",{name:"status",value:d.status,onChange:z,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0,children:[e.jsx("option",{value:"vacant",children:"Vacant"}),e.jsx("option",{value:"occupied",children:"Occupied"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]})]})]}),_&&e.jsxs("div",{className:"border-t pt-4 mt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("button",{type:"button",onClick:()=>B(!T),className:"flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-800 p-2 rounded-md transition-colors",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Owner Information"}),T?e.jsx(gc,{size:20,className:"text-gray-500"}):e.jsx(kl,{size:20,className:"text-gray-500"})]}),e.jsxs("button",{type:"button",onClick:()=>U(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm",children:[e.jsx(Os,{size:16}),"Import from Excel"]})]}),T&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:K,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"NIC *"}),e.jsx("input",{type:"text",name:"nic",value:h.nic,onChange:K,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation *"}),e.jsx("input",{type:"text",name:"occupation",value:h.occupation,onChange:K,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Country *"}),e.jsx("input",{name:"country",list:"owner-country-list",value:h.country||"",onChange:L,placeholder:"Select or type country *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0}),e.jsx("datalist",{id:"owner-country-list",children:I.map(q=>e.jsx("option",{value:q.country},q.country))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Mobile *"}),e.jsx("div",{className:"flex items-center",children:e.jsx("input",{name:"mobile",value:h.mobile,onChange:P,placeholder:ne?"Enter phone number":"Select country first",className:`w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white ${ne?"rounded-l-none":""}`,required:!0,disabled:!ne})}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Format: ",ne?.international_dialing||"+XX"," XXXXXXXXX"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Email *"}),e.jsx("input",{name:"email",type:"email",value:h.email,onChange:K,placeholder:"Email *",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Occupation Type"}),e.jsxs("select",{name:"occupied_way",value:h.occupied_way,onChange:K,className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white",children:[e.jsx("option",{value:"own",children:"Own"}),e.jsx("option",{value:"For rent",children:"For Rent"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-200 mb-1",children:"Proof Document"}),e.jsx("input",{type:"file",onChange:te,accept:"image/*",className:"w-full p-2 border rounded-md dark:bg-gray-700 dark:text-white text-black bg-white"})]})]}),e.jsx("div",{className:"text-center pt-2 border-t",children:e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Or"," ",e.jsx("button",{type:"button",onClick:()=>U(!0),className:"text-purple-600 hover:text-purple-700 underline",children:"import from Excel file"})," ","instead of manual entry"]})})]})]})]}),e.jsx("div",{className:"border-t dark:border-gray-700 pt-4 mt-4 sticky bottom-0 bg-white dark:bg-gray-900",children:e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 bg-gray-300 dark:bg-gray-600 rounded-md hover:bg-gray-400 dark:hover:bg-gray-500 transition-colors",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:j,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 flex items-center gap-2 transition-colors disabled:opacity-50",children:[j&&e.jsx(Xt,{size:16,className:"animate-spin"}),_?"Save House & Owner":"Save Changes"]}),(d.houseowner_id||_&&h.email)&&e.jsx("button",{type:"button",onClick:ie,disabled:j||!h.email,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors disabled:opacity-50",title:h.email?"Setup login for house owner":"Enter email first",children:"Setup Auth"})]})}),e.jsx(D8,{isOpen:H,onClose:()=>U(!1),onImportSuccess:X,apartment_id:i,house_id:t.id,floor_id:l})]})}function I8({onClose:t,onCreated:a}){const[r,i]=E.useState({bill_name:"",billtype:""}),[l,d]=E.useState(!1),[f,h]=E.useState(""),[b,p]=E.useState([]),w=C=>{const{name:_,value:R}=C.target;i(A=>({...A,[_]:R})),_==="bill_name"&&f&&h("")},j=async C=>{if(C.preventDefault(),d(!0),h(""),!r.bill_name.trim()||!r.billtype){h("Please fill in all required fields"),d(!1);return}try{const _=await Se.post("/bills",{bill_name:r.bill_name.trim(),billtype:r.billtype},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});_.data.success?(a?.(_.data.data),le.success("Bill type created successfully"),t()):h(_.data.message||"Failed to save bill type")}catch(_){console.error("Error saving bill type:",_);const R=_.response?.data?.message||"Error saving bill type. Please try again.";h(R),_.response?.status===409&&le.error(R)}finally{d(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[f&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:r.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Name *"}),e.jsx("input",{type:"text",name:"bill_name",value:r.bill_name,onChange:w,placeholder:"Enter unique bill name (e.g., Electricity, Water, Maintenance)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Tip: Use clear, distinct names to avoid duplicates"})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition-colors font-medium",disabled:l,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:l||!r.bill_name.trim()||!r.billtype,className:`px-4 py-2 rounded-lg text-white transition-colors font-medium ${l||!r.bill_name.trim()||!r.billtype?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Saving..."]}):"Save Bill Type"})]})]})}function Qv({bills:t,onClose:a,onUpdated:r}){const[i,l]=E.useState({bill_name:"",billtype:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),p=localStorage.getItem("token");E.useEffect(()=>{t&&l({bill_name:t.bill_name||"",billtype:t.billtype||""})},[t]);const w=C=>{const{name:_,value:R}=C.target;l(A=>({...A,[_]:R}))},j=async C=>{C.preventDefault(),f(!0),b("");try{const _=await Se.put(`/bills/${t.id}`,i,{headers:{Authorization:`Bearer ${p}`}});_.data.success?(r&&r(_.data.data),a&&a()):b(_.data.message||"Failed to update bill type")}catch(_){console.error("Update error:",_),b("Error updating bill type")}finally{f(!1)}};return e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Type *"}),e.jsxs("select",{name:"billtype",value:i.billtype,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[e.jsx("option",{value:"",children:"Select Bill Type"}),e.jsx("option",{value:"Measurable",children:"Measurable"}),e.jsx("option",{value:"Shared",children:"Shared"})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Measurable: Bills based on usage (electricity, water, etc.)",e.jsx("br",{}),"Shared: Bills divided equally among houses (maintenance, security, etc.)"]})]}),e.jsx("input",{type:"text",name:"bill_name",value:i.bill_name,onChange:w,className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})}function Jv({isOpen:t,onClose:a,selectedBill:r,onAssignSuccess:i}){const[l,d]=E.useState([]),[f,h]=E.useState({}),[b,p]=E.useState({}),[w,j]=E.useState(""),[C,_]=E.useState(""),[R,A]=E.useState([]),[O,I]=E.useState({}),[M,T]=E.useState({}),[B,H]=E.useState(!1),[U,L]=E.useState({}),[P,z]=E.useState({}),[K,te]=E.useState(!1),V=async()=>{try{H(!0);const Y=await Se.get("/apartments");Y.data.success&&d(Y.data.data||[])}catch(Y){console.error("Error loading apartments:",Y),le.error("Failed to load apartments")}finally{H(!1)}},ne=async Y=>{if(Y)try{L(se=>({...se,[Y]:!0}));const ae=await Se.get(`/floors?apartment_id=${Y}`);if(ae.data.success){const se=ae.data.data||[];h(Z=>({...Z,[Y]:se}))}}catch(ae){console.error("Error loading floors:",ae),le.error("Failed to load floors")}finally{L(ae=>({...ae,[Y]:!1}))}},ie=async(Y,ae)=>{if(!(!Y||!ae))try{z(Z=>({...Z,[ae]:!0}));const se=await Se.get(`/houses?apartment_id=${Y}&floor_id=${ae}`);if(se.data.success){const Z=se.data.data||[];p(Re=>({...Re,[ae]:Z}))}}catch(se){console.error("Error loading houses:",se),le.error("Failed to load houses")}finally{z(se=>({...se,[ae]:!1}))}},X=async Y=>{const ae=O[Y.id];!ae&&!f[Y.id]&&await ne(Y.id),I(se=>({...se,[Y.id]:!ae})),ae||(j(Y.id),_(""),A([]))},q=async(Y,ae)=>{const se=`${Y}-${ae.id}`,Z=M[se];!Z&&!b[ae.id]&&await ie(Y,ae.id),T(Re=>({...Re,[se]:!Z})),Z||(_(ae.id),A([]))},ce=Y=>{A(ae=>ae.includes(Y)?ae.filter(se=>se!==Y):[...ae,Y])},we=()=>{if(!C)return;const ae=(b[C]||[]).map(Z=>Z.id),se=ae.every(Z=>R.includes(Z));A(se?Z=>Z.filter(Re=>!ae.includes(Re)):Z=>{const Re=[...Z];return ae.forEach(je=>{Re.includes(je)||Re.push(je)}),Re})},oe=()=>{if(!C)return!1;const Y=b[C]||[];return Y.length===0?!1:Y.every(ae=>R.includes(ae.id))},fe=()=>{if(!C)return!1;const Y=b[C]||[];return Y.length===0?!1:Y.some(ae=>R.includes(ae.id))&&!oe()},re=async()=>{if(!w||!C||R.length===0){le.error("Please select apartment, floor, and at least one house");return}te(!0);try{const Y={bill_id:r.id,apartment_id:w,floor_id:C,house_ids:R};await Se.post("/bill-assignments/assign",Y),le.success("Bill assign successfully"),i(),Q()}catch(Y){console.error("Error assigning bill:",Y),le.error(Y.response?.data?.message||"Failed to assign bill")}finally{te(!1)}},Q=()=>{j(""),_(""),h({}),p({}),A([]),I({}),T({}),a()};return E.useEffect(()=>{t&&V()},[t]),t?e.jsxs("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative max-h-[90vh] overflow-y-auto",children:[e.jsx("button",{onClick:Q,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Assign Bill: ",e.jsx("span",{className:"text-purple-600",children:r?.bill_name})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Select Apartment *"}),B?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(Xt,{size:24,className:"animate-spin mr-3 text-purple-600"}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):e.jsx("div",{className:"space-y-3",children:l.map(Y=>e.jsxs("div",{children:[e.jsxs("div",{className:`flex items-center justify-between p-4 cursor-pointer transition-colors ${w===Y.id?"bg-purple-50 dark:bg-purple-900/20 border-l-4 border-l-purple-600":"bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600"}`,onClick:()=>X(Y),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:Y.name}),e.jsx("button",{onClick:ae=>{ae.stopPropagation(),X(Y)},className:"p-2 dark:hover:bg-white hover:bg-gray-200 rounded-md",children:O[Y.id]?e.jsx(gc,{size:20,className:" transition-colors duration-200 text-purple-700"}):e.jsx(kl,{size:20,className:"transition-colors duration-200 text-purple-700"})})]}),O[Y.id]&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600",children:U[Y.id]?e.jsxs("div",{className:"flex items-center justify-center p-4",children:[e.jsx(Xt,{size:16,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Loading floors..."})]}):e.jsx("div",{className:"space-y-2 p-3",children:(f[Y.id]||[]).map(ae=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:`flex items-center justify-between p-3 cursor-pointer transition-colors ${C===ae.id?"bg-blue-50 dark:bg-blue-900/20 border-l-4 border-l-blue-500":"bg-white dark:bg-gray-600 hover:bg-gray-50 dark:hover:bg-gray-500"}`,onClick:()=>q(Y.id,ae),children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:ae.floor_id}),e.jsx("button",{onClick:se=>{se.stopPropagation(),q(Y.id,ae)},className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-400 rounded-lg transition-colors",children:M[`${Y.id}-${ae.id}`]?e.jsx(gc,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"}):e.jsx(kl,{size:18,className:"text-white dark:text-purple-600 bg-gray-500 dark:bg-white"})})]}),M[`${Y.id}-${ae.id}`]&&e.jsx("div",{className:"bg-white dark:bg-gray-500 border-t border-gray-200 dark:border-gray-400",children:P[ae.id]?e.jsxs("div",{className:"flex items-center justify-center p-3",children:[e.jsx(Xt,{size:14,className:"animate-spin mr-2 text-purple-600"}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400",children:"Loading houses..."})]}):e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center p-2 bg-gray-50 dark:bg-gray-400 rounded",children:[e.jsx("input",{type:"checkbox",checked:oe(),ref:se=>{se&&(se.indeterminate=fe())},onChange:we,className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700 dark:text-gray-800",children:"Select All Houses"})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-60 overflow-y-auto",children:(b[ae.id]||[]).map(se=>e.jsxs("div",{className:"flex items-center p-3 bg-gray-50 dark:bg-gray-400 rounded border hover:bg-gray-100 dark:hover:bg-gray-300 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:R.includes(se.id),onChange:()=>ce(se.id),className:"h-4 w-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsxs("div",{className:"ml-3 flex-1",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-800",children:se.house_id}),e.jsxs("span",{className:"ml-2 text-xs text-gray-500 dark:text-gray-700 capitalize",children:["(",se.status,")"]})]})]},se.id))})]})})]},ae.id))})})]},Y.id))})]}),R.length>0&&e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300",children:[e.jsx("strong",{children:R.length})," house",R.length!==1?"s":""," selected for assignment"]})}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{onClick:Q,className:"px-6 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors font-medium",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:!w||!C||R.length===0||K,className:"px-6 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors font-medium flex items-center gap-2",children:K?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"animate-spin"}),"Assigning..."]}):`Assign to ${R.length} House${R.length!==1?"s":""}`})]})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):null}function F8(){const[t,a]=E.useState(!1),[r,i]=E.useState(null),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(null),[R,A]=E.useState(null),[O,I]=E.useState(!1),[M,T]=E.useState(null);xr();const B=async()=>{try{a(!0),i(null);const X=await Se.get("/bills");X.data.success&&Array.isArray(X.data.data)?d(X.data.data):d([])}catch(X){console.error("Error loading bills:",X),i("Failed to load bills. Please try again.")}finally{a(!1)}};E.useEffect(()=>{B()},[]);const H=l.filter(X=>X.billtype==="Shared"),U=X=>{A(X),j(!0)},L=()=>{j(!1),A(null)},P=()=>{le.success("Bill assigned successfully!")},z=X=>{_(X),p(!0)},K=()=>{p(!1),_(null)},te=()=>{B(),p(!1),le.success("Bill Type updated successfully!")},V=X=>{T(X),I(!0)},ne=async()=>{try{if(!M)return;await Se.delete(`/bills/${M.id}`),le.success("Bill type deleted successfully"),I(!1),T(null),B()}catch(X){console.error("Delete bill type error:",X),le.error("Failed to delete bill type")}},ie=()=>{I(!1),T(null)};return e.jsxs("div",{children:[t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:B,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):H.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx($s,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No shared value bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding shared value bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:H.map((X,q)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:q+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:X.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:ce=>{ce.stopPropagation(),U(X)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(Fa,{size:20})}),e.jsx("span",{children:X.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:ce=>{ce.stopPropagation(),z(X)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:ce=>{ce.stopPropagation(),V(X)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},X.id))})]})}),b&&C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:K,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(Qv,{onClose:K,onUpdated:te,bills:C})]})}),e.jsx(Jv,{isOpen:w,onClose:L,selectedBill:R,onAssignSuccess:P}),O&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ie,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function ew(){const[t,a]=E.useState(!1),[r,i]=E.useState(null),[l,d]=E.useState([]),[f,h]=E.useState(!1),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(null),[R,A]=E.useState(null),[O,I]=E.useState(!1),[M,T]=E.useState(null),[B,H]=E.useState("bills"),U=xr(),L=async()=>{try{a(!0),i(null);const re=await Se.get("/bills");re.data.success&&Array.isArray(re.data.data)?d(re.data.data):d([])}catch(re){console.error("Error loading bills:",re),i("Failed to load bills. Please try again.")}finally{a(!1)}};E.useEffect(()=>{L()},[]);const P=l.filter(re=>re.billtype==="Measurable"),z=re=>{A(re),j(!0)},K=()=>{j(!1),A(null)},te=()=>{le.success("Bill assigned successfully!")},V=()=>{h(!0)},ne=()=>{h(!1)},ie=()=>{L(),h(!1)},X=re=>{_(re),p(!0)},q=()=>{p(!1),_(null)},ce=()=>{L(),p(!1),le.success("Bill Type updated successfully!")},we=re=>{T(re),I(!0)},oe=async()=>{try{if(!M)return;await Se.delete(`/bills/${M.id}`),le.success("Bill type deleted successfully"),I(!1),T(null),L()}catch(re){console.error("Delete bill type error:",re),le.error("Failed to delete bill type")}},fe=()=>{I(!1),T(null)};return e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("button",{onClick:V,className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"New Bill Type"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsxs("button",{onClick:()=>H("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                            ${B==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:["Measurable Bills (",P.length,")"]}),e.jsx("button",{onClick:()=>H("sharedValueBills"),className:`px-4 py-2 font-semibold transition-colors duration-200
                            ${B==="sharedValueBills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Shared Value Bills"})]}),B==="bills"&&e.jsx(e.Fragment,{children:t?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill types..."})]}):r?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[r,e.jsx("button",{onClick:L,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):P.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx($s,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No measurable bill types found"}),e.jsx("p",{className:"text-sm",children:"Get started by adding measurable bill types"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:P.map((re,Q)=>e.jsxs("tr",{className:"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",onClick:()=>U(`/billranges/${re.id}`),children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:Q+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:re.billtype}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Y=>{Y.stopPropagation(),z(re)},title:"Assign Bill",className:"text-purple-600 hover:text-purple-800 dark:text-purple-400 dark:hover:text-purple-300 transition-all mr-2",children:e.jsx(Fa,{size:20})}),e.jsx("span",{children:re.bill_name})]})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Y=>{Y.stopPropagation(),X(re)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:Y=>{Y.stopPropagation(),we(re)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},re.id))})]})})}),B==="sharedValueBills"&&e.jsx(F8,{}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:ne,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Add New Bill Type"}),e.jsx(I8,{onClose:ne,onCreated:ie})]})}),b&&C&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:q,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Update the Bill Type"}),e.jsx(Qv,{onClose:q,onUpdated:ce,bills:C})]})}),e.jsx(Jv,{isOpen:w,onClose:K,selectedBill:R,onAssignSuccess:te}),O&&M&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',M.bill_name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:fe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function M8({house:t,apartment:a,floor:r,onClose:i,onUploadSuccess:l}){const[d,f]=E.useState(!1),[h,b]=E.useState([]),[p,w]=E.useState([]),[j,C]=E.useState(!0),_=E.useRef(null);E.useEffect(()=>{I()},[t.id]);const R=H=>{const U=Array.from(H.target.files);w(L=>[...L,...U])},A=H=>{w(U=>U.filter((L,P)=>P!==H))},O=async()=>{if(p.length===0){le.error("Please select at least one file");return}try{f(!0);const H=new FormData;p.forEach(L=>{H.append("documents",L)}),H.append("apartmentId",a.id),H.append("floorId",r.id),H.append("houseId",t.id),(await Se.post("/house-documents/upload",H,{headers:{"Content-Type":"multipart/form-data"}})).data.success&&(le.success("House documents uploaded successfully!"),w([]),l?.(),I(),_.current&&(_.current.value=""))}catch(H){console.error("Upload error:",H);const U=H.response?.data?.message||"Failed to upload house documents";le.error(U)}finally{f(!1)}},I=async()=>{try{C(!0);const H=await Se.get(`/house-documents/${t.id}/documents`);H.data.success?b(H.data.data):console.error("API response not successful:",H.data)}catch(H){console.error("Error loading house documents:",H);const U=H.response?.data?.message||"Failed to load house documents";le.error(U),H.response&&(console.error("Error response:",H.response.data),console.error("Error status:",H.response.status))}finally{C(!1)}},M=async H=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Se.delete(`/house-documents/documents/${H}`),le.success("House document deleted successfully"),I()}catch(U){console.error("Delete error:",U);const L=U.response?.data?.message||"Failed to delete house document";le.error(L)}},T=async H=>{try{const U=await Se.get(`/house-documents/documents/${H.id}/download`,{responseType:"blob"}),L=window.URL.createObjectURL(new Blob([U.data])),P=document.createElement("a");P.href=L,P.setAttribute("download",H.original_name||H.file_name),document.body.appendChild(P),P.click(),P.remove(),window.URL.revokeObjectURL(L)}catch(U){console.error("Download error:",U);const L=U.response?.data?.message||"Failed to download house document";le.error(L)}},B=H=>{if(H===0)return"0 Bytes";const U=1024,L=["Bytes","KB","MB","GB"],P=Math.floor(Math.log(H)/Math.log(U));return parseFloat((H/Math.pow(U,P)).toFixed(2))+" "+L[P]};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["House Documents - ",t.house_id]}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 dark:hover:text-white",children:""})]}),a&&r&&e.jsx("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900 rounded-lg",children:e.jsxs("p",{className:"text-blue-800 dark:text-blue-200",children:[e.jsx("strong",{children:"Apartment:"})," ",a.name," |",e.jsx("strong",{children:" Floor:"})," ",r.floor_id," |",e.jsx("strong",{children:" House:"})," ",t.house_id]})}),e.jsxs("div",{className:"mb-8 p-6 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Upload New House Documents"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("input",{type:"file",ref:_,onChange:R,multiple:!0,accept:".pdf,.doc,.docx,.jpg,.jpeg,.png,.xlsx,.xls",className:"hidden"}),e.jsxs("button",{onClick:()=>_.current?.click(),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(Os,{size:20}),"Select Files"]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Supported formats: PDF, DOC, DOCX, JPG, PNG, XLSX (Max: 10MB per file)"})]}),p.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"font-medium mb-2 text-gray-800 dark:text-white",children:"Selected Files:"}),e.jsx("div",{className:"space-y-2",children:p.map((H,U)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white dark:bg-gray-600 rounded border",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(yr,{size:20,className:"text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-white",children:H.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-300",children:B(H.size)})]})]}),e.jsx("button",{onClick:()=>A(U),className:"text-red-500 hover:text-red-700",children:e.jsx(mr,{size:16})})]},U))})]}),p.length>0&&e.jsx("button",{onClick:O,disabled:d,className:"flex items-center gap-2 px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{size:20}),"Upload ",p.length," File(s)"]})})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Existing House Documents"}),j?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-300",children:"Loading house documents..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(yr,{size:48,className:"mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No house documents uploaded yet"}),e.jsx("button",{onClick:I,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry Loading"})]}):e.jsx("div",{className:"space-y-3",children:h.map(H=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white dark:bg-gray-600 rounded-lg border border-gray-200 dark:border-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx(yr,{size:24,className:"text-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:H.original_name||H.file_name}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:[B(H.file_size),"  Uploaded on ",new Date(H.created_at).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>T(H),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Download",children:e.jsx(Cl,{size:18})}),e.jsx("button",{onClick:()=>M(H.id),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:18})})]})]},H.id))})]})]})}const B8="modulepreload",L8=function(t){return"/"+t},tb={},tw=function(a,r,i){let l=Promise.resolve();if(r&&r.length>0){let b=function(p){return Promise.all(p.map(w=>Promise.resolve(w).then(j=>({status:"fulfilled",value:j}),j=>({status:"rejected",reason:j}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),h=f?.nonce||f?.getAttribute("nonce");l=b(r.map(p=>{if(p=L8(p),p in tb)return;tb[p]=!0;const w=p.endsWith(".css"),j=w?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${j}`))return;const C=document.createElement("link");if(C.rel=w?"stylesheet":B8,w||(C.as="script"),C.crossOrigin="",C.href=p,h&&C.setAttribute("nonce",h),document.head.appendChild(C),w)return new Promise((_,R)=>{C.addEventListener("load",_),C.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${p}`)))})}))}function d(f){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=f,window.dispatchEvent(h),!h.defaultPrevented)throw f}return l.then(f=>{for(const h of f||[])h.status==="rejected"&&d(h.reason);return a().catch(d)})};var ic={},Dh,rb;function P8(){return rb||(rb=1,Dh=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Dh}var Oh={},gl={},ab;function mo(){if(ab)return gl;ab=1;let t;const a=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return gl.getSymbolSize=function(i){if(!i)throw new Error('"version" cannot be null or undefined');if(i<1||i>40)throw new Error('"version" should be in range from 1 to 40');return i*4+17},gl.getSymbolTotalCodewords=function(i){return a[i]},gl.getBCHDigit=function(r){let i=0;for(;r!==0;)i++,r>>>=1;return i},gl.setToSJISFunction=function(i){if(typeof i!="function")throw new Error('"toSJISFunc" is not a valid function.');t=i},gl.isKanjiModeEnabled=function(){return typeof t<"u"},gl.toSJIS=function(i){return t(i)},gl}var Ih={},sb;function Qm(){return sb||(sb=1,function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function a(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+r)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,l){if(t.isValid(i))return i;try{return a(i)}catch{return l}}}(Ih)),Ih}var Fh,nb;function z8(){if(nb)return Fh;nb=1;function t(){this.buffer=[],this.length=0}return t.prototype={get:function(a){const r=Math.floor(a/8);return(this.buffer[r]>>>7-a%8&1)===1},put:function(a,r){for(let i=0;i<r;i++)this.putBit((a>>>r-i-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(a){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),a&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Fh=t,Fh}var Mh,ib;function U8(){if(ib)return Mh;ib=1;function t(a){if(!a||a<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=a,this.data=new Uint8Array(a*a),this.reservedBit=new Uint8Array(a*a)}return t.prototype.set=function(a,r,i,l){const d=a*this.size+r;this.data[d]=i,l&&(this.reservedBit[d]=!0)},t.prototype.get=function(a,r){return this.data[a*this.size+r]},t.prototype.xor=function(a,r,i){this.data[a*this.size+r]^=i},t.prototype.isReserved=function(a,r){return this.reservedBit[a*this.size+r]},Mh=t,Mh}var Bh={},lb;function H8(){return lb||(lb=1,function(t){const a=mo().getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const l=Math.floor(i/7)+2,d=a(i),f=d===145?26:Math.ceil((d-13)/(2*l-2))*2,h=[d-7];for(let b=1;b<l-1;b++)h[b]=h[b-1]-f;return h.push(6),h.reverse()},t.getPositions=function(i){const l=[],d=t.getRowColCoords(i),f=d.length;for(let h=0;h<f;h++)for(let b=0;b<f;b++)h===0&&b===0||h===0&&b===f-1||h===f-1&&b===0||l.push([d[h],d[b]]);return l}}(Bh)),Bh}var Lh={},ob;function V8(){if(ob)return Lh;ob=1;const t=mo().getSymbolSize,a=7;return Lh.getPositions=function(i){const l=t(i);return[[0,0],[l-a,0],[0,l-a]]},Lh}var Ph={},cb;function G8(){return cb||(cb=1,function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const a={N1:3,N2:3,N3:40,N4:10};t.isValid=function(l){return l!=null&&l!==""&&!isNaN(l)&&l>=0&&l<=7},t.from=function(l){return t.isValid(l)?parseInt(l,10):void 0},t.getPenaltyN1=function(l){const d=l.size;let f=0,h=0,b=0,p=null,w=null;for(let j=0;j<d;j++){h=b=0,p=w=null;for(let C=0;C<d;C++){let _=l.get(j,C);_===p?h++:(h>=5&&(f+=a.N1+(h-5)),p=_,h=1),_=l.get(C,j),_===w?b++:(b>=5&&(f+=a.N1+(b-5)),w=_,b=1)}h>=5&&(f+=a.N1+(h-5)),b>=5&&(f+=a.N1+(b-5))}return f},t.getPenaltyN2=function(l){const d=l.size;let f=0;for(let h=0;h<d-1;h++)for(let b=0;b<d-1;b++){const p=l.get(h,b)+l.get(h,b+1)+l.get(h+1,b)+l.get(h+1,b+1);(p===4||p===0)&&f++}return f*a.N2},t.getPenaltyN3=function(l){const d=l.size;let f=0,h=0,b=0;for(let p=0;p<d;p++){h=b=0;for(let w=0;w<d;w++)h=h<<1&2047|l.get(p,w),w>=10&&(h===1488||h===93)&&f++,b=b<<1&2047|l.get(w,p),w>=10&&(b===1488||b===93)&&f++}return f*a.N3},t.getPenaltyN4=function(l){let d=0;const f=l.data.length;for(let b=0;b<f;b++)d+=l.data[b];return Math.abs(Math.ceil(d*100/f/5)-10)*a.N4};function r(i,l,d){switch(i){case t.Patterns.PATTERN000:return(l+d)%2===0;case t.Patterns.PATTERN001:return l%2===0;case t.Patterns.PATTERN010:return d%3===0;case t.Patterns.PATTERN011:return(l+d)%3===0;case t.Patterns.PATTERN100:return(Math.floor(l/2)+Math.floor(d/3))%2===0;case t.Patterns.PATTERN101:return l*d%2+l*d%3===0;case t.Patterns.PATTERN110:return(l*d%2+l*d%3)%2===0;case t.Patterns.PATTERN111:return(l*d%3+(l+d)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(l,d){const f=d.size;for(let h=0;h<f;h++)for(let b=0;b<f;b++)d.isReserved(b,h)||d.xor(b,h,r(l,b,h))},t.getBestMask=function(l,d){const f=Object.keys(t.Patterns).length;let h=0,b=1/0;for(let p=0;p<f;p++){d(p),t.applyMask(p,l);const w=t.getPenaltyN1(l)+t.getPenaltyN2(l)+t.getPenaltyN3(l)+t.getPenaltyN4(l);t.applyMask(p,l),w<b&&(b=w,h=p)}return h}}(Ph)),Ph}var ku={},db;function rw(){if(db)return ku;db=1;const t=Qm(),a=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return ku.getBlocksCount=function(l,d){switch(d){case t.L:return a[(l-1)*4+0];case t.M:return a[(l-1)*4+1];case t.Q:return a[(l-1)*4+2];case t.H:return a[(l-1)*4+3];default:return}},ku.getTotalCodewordsCount=function(l,d){switch(d){case t.L:return r[(l-1)*4+0];case t.M:return r[(l-1)*4+1];case t.Q:return r[(l-1)*4+2];case t.H:return r[(l-1)*4+3];default:return}},ku}var zh={},N0={},ub;function X8(){if(ub)return N0;ub=1;const t=new Uint8Array(512),a=new Uint8Array(256);return function(){let i=1;for(let l=0;l<255;l++)t[l]=i,a[i]=l,i<<=1,i&256&&(i^=285);for(let l=255;l<512;l++)t[l]=t[l-255]}(),N0.log=function(i){if(i<1)throw new Error("log("+i+")");return a[i]},N0.exp=function(i){return t[i]},N0.mul=function(i,l){return i===0||l===0?0:t[a[i]+a[l]]},N0}var fb;function q8(){return fb||(fb=1,function(t){const a=X8();t.mul=function(i,l){const d=new Uint8Array(i.length+l.length-1);for(let f=0;f<i.length;f++)for(let h=0;h<l.length;h++)d[f+h]^=a.mul(i[f],l[h]);return d},t.mod=function(i,l){let d=new Uint8Array(i);for(;d.length-l.length>=0;){const f=d[0];for(let b=0;b<l.length;b++)d[b]^=a.mul(l[b],f);let h=0;for(;h<d.length&&d[h]===0;)h++;d=d.slice(h)}return d},t.generateECPolynomial=function(i){let l=new Uint8Array([1]);for(let d=0;d<i;d++)l=t.mul(l,new Uint8Array([1,a.exp(d)]));return l}}(zh)),zh}var Uh,xb;function $8(){if(xb)return Uh;xb=1;const t=q8();function a(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return a.prototype.initialize=function(i){this.degree=i,this.genPoly=t.generateECPolynomial(this.degree)},a.prototype.encode=function(i){if(!this.genPoly)throw new Error("Encoder not initialized");const l=new Uint8Array(i.length+this.degree);l.set(i);const d=t.mod(l,this.genPoly),f=this.degree-d.length;if(f>0){const h=new Uint8Array(this.degree);return h.set(d,f),h}return d},Uh=a,Uh}var Hh={},Vh={},Gh={},hb;function aw(){return hb||(hb=1,Gh.isValid=function(a){return!isNaN(a)&&a>=1&&a<=40}),Gh}var Zn={},mb;function sw(){if(mb)return Zn;mb=1;const t="[0-9]+",a="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const i="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;Zn.KANJI=new RegExp(r,"g"),Zn.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Zn.BYTE=new RegExp(i,"g"),Zn.NUMERIC=new RegExp(t,"g"),Zn.ALPHANUMERIC=new RegExp(a,"g");const l=new RegExp("^"+r+"$"),d=new RegExp("^"+t+"$"),f=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Zn.testKanji=function(b){return l.test(b)},Zn.testNumeric=function(b){return d.test(b)},Zn.testAlphanumeric=function(b){return f.test(b)},Zn}var gb;function go(){return gb||(gb=1,function(t){const a=aw(),r=sw();t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(d,f){if(!d.ccBits)throw new Error("Invalid mode: "+d);if(!a.isValid(f))throw new Error("Invalid version: "+f);return f>=1&&f<10?d.ccBits[0]:f<27?d.ccBits[1]:d.ccBits[2]},t.getBestModeForData=function(d){return r.testNumeric(d)?t.NUMERIC:r.testAlphanumeric(d)?t.ALPHANUMERIC:r.testKanji(d)?t.KANJI:t.BYTE},t.toString=function(d){if(d&&d.id)return d.id;throw new Error("Invalid mode")},t.isValid=function(d){return d&&d.bit&&d.ccBits};function i(l){if(typeof l!="string")throw new Error("Param is not a string");switch(l.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+l)}}t.from=function(d,f){if(t.isValid(d))return d;try{return i(d)}catch{return f}}}(Vh)),Vh}var pb;function Y8(){return pb||(pb=1,function(t){const a=mo(),r=rw(),i=Qm(),l=go(),d=aw(),f=7973,h=a.getBCHDigit(f);function b(C,_,R){for(let A=1;A<=40;A++)if(_<=t.getCapacity(A,R,C))return A}function p(C,_){return l.getCharCountIndicator(C,_)+4}function w(C,_){let R=0;return C.forEach(function(A){const O=p(A.mode,_);R+=O+A.getBitsLength()}),R}function j(C,_){for(let R=1;R<=40;R++)if(w(C,R)<=t.getCapacity(R,_,l.MIXED))return R}t.from=function(_,R){return d.isValid(_)?parseInt(_,10):R},t.getCapacity=function(_,R,A){if(!d.isValid(_))throw new Error("Invalid QR Code version");typeof A>"u"&&(A=l.BYTE);const O=a.getSymbolTotalCodewords(_),I=r.getTotalCodewordsCount(_,R),M=(O-I)*8;if(A===l.MIXED)return M;const T=M-p(A,_);switch(A){case l.NUMERIC:return Math.floor(T/10*3);case l.ALPHANUMERIC:return Math.floor(T/11*2);case l.KANJI:return Math.floor(T/13);case l.BYTE:default:return Math.floor(T/8)}},t.getBestVersionForData=function(_,R){let A;const O=i.from(R,i.M);if(Array.isArray(_)){if(_.length>1)return j(_,O);if(_.length===0)return 1;A=_[0]}else A=_;return b(A.mode,A.getLength(),O)},t.getEncodedBits=function(_){if(!d.isValid(_)||_<7)throw new Error("Invalid QR Code version");let R=_<<12;for(;a.getBCHDigit(R)-h>=0;)R^=f<<a.getBCHDigit(R)-h;return _<<12|R}}(Hh)),Hh}var Xh={},yb;function W8(){if(yb)return Xh;yb=1;const t=mo(),a=1335,r=21522,i=t.getBCHDigit(a);return Xh.getEncodedBits=function(d,f){const h=d.bit<<3|f;let b=h<<10;for(;t.getBCHDigit(b)-i>=0;)b^=a<<t.getBCHDigit(b)-i;return(h<<10|b)^r},Xh}var qh={},$h,bb;function K8(){if(bb)return $h;bb=1;const t=go();function a(r){this.mode=t.NUMERIC,this.data=r.toString()}return a.getBitsLength=function(i){return 10*Math.floor(i/3)+(i%3?i%3*3+1:0)},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(i){let l,d,f;for(l=0;l+3<=this.data.length;l+=3)d=this.data.substr(l,3),f=parseInt(d,10),i.put(f,10);const h=this.data.length-l;h>0&&(d=this.data.substr(l),f=parseInt(d,10),i.put(f,h*3+1))},$h=a,$h}var Yh,vb;function Z8(){if(vb)return Yh;vb=1;const t=go(),a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(i){this.mode=t.ALPHANUMERIC,this.data=i}return r.getBitsLength=function(l){return 11*Math.floor(l/2)+6*(l%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(l){let d;for(d=0;d+2<=this.data.length;d+=2){let f=a.indexOf(this.data[d])*45;f+=a.indexOf(this.data[d+1]),l.put(f,11)}this.data.length%2&&l.put(a.indexOf(this.data[d]),6)},Yh=r,Yh}var Wh,wb;function Q8(){if(wb)return Wh;wb=1;const t=go();function a(r){this.mode=t.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return a.getBitsLength=function(i){return i*8},a.prototype.getLength=function(){return this.data.length},a.prototype.getBitsLength=function(){return a.getBitsLength(this.data.length)},a.prototype.write=function(r){for(let i=0,l=this.data.length;i<l;i++)r.put(this.data[i],8)},Wh=a,Wh}var Kh,Nb;function J8(){if(Nb)return Kh;Nb=1;const t=go(),a=mo();function r(i){this.mode=t.KANJI,this.data=i}return r.getBitsLength=function(l){return l*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let l;for(l=0;l<this.data.length;l++){let d=a.toSJIS(this.data[l]);if(d>=33088&&d<=40956)d-=33088;else if(d>=57408&&d<=60351)d-=49472;else throw new Error("Invalid SJIS character: "+this.data[l]+`
Make sure your charset is UTF-8`);d=(d>>>8&255)*192+(d&255),i.put(d,13)}},Kh=r,Kh}var Zh={exports:{}},kb;function e_(){return kb||(kb=1,function(t){var a={single_source_shortest_paths:function(r,i,l){var d={},f={};f[i]=0;var h=a.PriorityQueue.make();h.push(i,0);for(var b,p,w,j,C,_,R,A,O;!h.empty();){b=h.pop(),p=b.value,j=b.cost,C=r[p]||{};for(w in C)C.hasOwnProperty(w)&&(_=C[w],R=j+_,A=f[w],O=typeof f[w]>"u",(O||A>R)&&(f[w]=R,h.push(w,R),d[w]=p))}if(typeof l<"u"&&typeof f[l]>"u"){var I=["Could not find a path from ",i," to ",l,"."].join("");throw new Error(I)}return d},extract_shortest_path_from_predecessor_list:function(r,i){for(var l=[],d=i;d;)l.push(d),r[d],d=r[d];return l.reverse(),l},find_path:function(r,i,l){var d=a.single_source_shortest_paths(r,i,l);return a.extract_shortest_path_from_predecessor_list(d,l)},PriorityQueue:{make:function(r){var i=a.PriorityQueue,l={},d;r=r||{};for(d in i)i.hasOwnProperty(d)&&(l[d]=i[d]);return l.queue=[],l.sorter=r.sorter||i.default_sorter,l},default_sorter:function(r,i){return r.cost-i.cost},push:function(r,i){var l={value:r,cost:i};this.queue.push(l),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=a}(Zh)),Zh.exports}var jb;function t_(){return jb||(jb=1,function(t){const a=go(),r=K8(),i=Z8(),l=Q8(),d=J8(),f=sw(),h=mo(),b=e_();function p(I){return unescape(encodeURIComponent(I)).length}function w(I,M,T){const B=[];let H;for(;(H=I.exec(T))!==null;)B.push({data:H[0],index:H.index,mode:M,length:H[0].length});return B}function j(I){const M=w(f.NUMERIC,a.NUMERIC,I),T=w(f.ALPHANUMERIC,a.ALPHANUMERIC,I);let B,H;return h.isKanjiModeEnabled()?(B=w(f.BYTE,a.BYTE,I),H=w(f.KANJI,a.KANJI,I)):(B=w(f.BYTE_KANJI,a.BYTE,I),H=[]),M.concat(T,B,H).sort(function(L,P){return L.index-P.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function C(I,M){switch(M){case a.NUMERIC:return r.getBitsLength(I);case a.ALPHANUMERIC:return i.getBitsLength(I);case a.KANJI:return d.getBitsLength(I);case a.BYTE:return l.getBitsLength(I)}}function _(I){return I.reduce(function(M,T){const B=M.length-1>=0?M[M.length-1]:null;return B&&B.mode===T.mode?(M[M.length-1].data+=T.data,M):(M.push(T),M)},[])}function R(I){const M=[];for(let T=0;T<I.length;T++){const B=I[T];switch(B.mode){case a.NUMERIC:M.push([B,{data:B.data,mode:a.ALPHANUMERIC,length:B.length},{data:B.data,mode:a.BYTE,length:B.length}]);break;case a.ALPHANUMERIC:M.push([B,{data:B.data,mode:a.BYTE,length:B.length}]);break;case a.KANJI:M.push([B,{data:B.data,mode:a.BYTE,length:p(B.data)}]);break;case a.BYTE:M.push([{data:B.data,mode:a.BYTE,length:p(B.data)}])}}return M}function A(I,M){const T={},B={start:{}};let H=["start"];for(let U=0;U<I.length;U++){const L=I[U],P=[];for(let z=0;z<L.length;z++){const K=L[z],te=""+U+z;P.push(te),T[te]={node:K,lastCount:0},B[te]={};for(let V=0;V<H.length;V++){const ne=H[V];T[ne]&&T[ne].node.mode===K.mode?(B[ne][te]=C(T[ne].lastCount+K.length,K.mode)-C(T[ne].lastCount,K.mode),T[ne].lastCount+=K.length):(T[ne]&&(T[ne].lastCount=K.length),B[ne][te]=C(K.length,K.mode)+4+a.getCharCountIndicator(K.mode,M))}}H=P}for(let U=0;U<H.length;U++)B[H[U]].end=0;return{map:B,table:T}}function O(I,M){let T;const B=a.getBestModeForData(I);if(T=a.from(M,B),T!==a.BYTE&&T.bit<B.bit)throw new Error('"'+I+'" cannot be encoded with mode '+a.toString(T)+`.
 Suggested mode is: `+a.toString(B));switch(T===a.KANJI&&!h.isKanjiModeEnabled()&&(T=a.BYTE),T){case a.NUMERIC:return new r(I);case a.ALPHANUMERIC:return new i(I);case a.KANJI:return new d(I);case a.BYTE:return new l(I)}}t.fromArray=function(M){return M.reduce(function(T,B){return typeof B=="string"?T.push(O(B,null)):B.data&&T.push(O(B.data,B.mode)),T},[])},t.fromString=function(M,T){const B=j(M,h.isKanjiModeEnabled()),H=R(B),U=A(H,T),L=b.find_path(U.map,"start","end"),P=[];for(let z=1;z<L.length-1;z++)P.push(U.table[L[z]].node);return t.fromArray(_(P))},t.rawSplit=function(M){return t.fromArray(j(M,h.isKanjiModeEnabled()))}}(qh)),qh}var Eb;function r_(){if(Eb)return Oh;Eb=1;const t=mo(),a=Qm(),r=z8(),i=U8(),l=H8(),d=V8(),f=G8(),h=rw(),b=$8(),p=Y8(),w=W8(),j=go(),C=t_();function _(U,L){const P=U.size,z=d.getPositions(L);for(let K=0;K<z.length;K++){const te=z[K][0],V=z[K][1];for(let ne=-1;ne<=7;ne++)if(!(te+ne<=-1||P<=te+ne))for(let ie=-1;ie<=7;ie++)V+ie<=-1||P<=V+ie||(ne>=0&&ne<=6&&(ie===0||ie===6)||ie>=0&&ie<=6&&(ne===0||ne===6)||ne>=2&&ne<=4&&ie>=2&&ie<=4?U.set(te+ne,V+ie,!0,!0):U.set(te+ne,V+ie,!1,!0))}}function R(U){const L=U.size;for(let P=8;P<L-8;P++){const z=P%2===0;U.set(P,6,z,!0),U.set(6,P,z,!0)}}function A(U,L){const P=l.getPositions(L);for(let z=0;z<P.length;z++){const K=P[z][0],te=P[z][1];for(let V=-2;V<=2;V++)for(let ne=-2;ne<=2;ne++)V===-2||V===2||ne===-2||ne===2||V===0&&ne===0?U.set(K+V,te+ne,!0,!0):U.set(K+V,te+ne,!1,!0)}}function O(U,L){const P=U.size,z=p.getEncodedBits(L);let K,te,V;for(let ne=0;ne<18;ne++)K=Math.floor(ne/3),te=ne%3+P-8-3,V=(z>>ne&1)===1,U.set(K,te,V,!0),U.set(te,K,V,!0)}function I(U,L,P){const z=U.size,K=w.getEncodedBits(L,P);let te,V;for(te=0;te<15;te++)V=(K>>te&1)===1,te<6?U.set(te,8,V,!0):te<8?U.set(te+1,8,V,!0):U.set(z-15+te,8,V,!0),te<8?U.set(8,z-te-1,V,!0):te<9?U.set(8,15-te-1+1,V,!0):U.set(8,15-te-1,V,!0);U.set(z-8,8,1,!0)}function M(U,L){const P=U.size;let z=-1,K=P-1,te=7,V=0;for(let ne=P-1;ne>0;ne-=2)for(ne===6&&ne--;;){for(let ie=0;ie<2;ie++)if(!U.isReserved(K,ne-ie)){let X=!1;V<L.length&&(X=(L[V]>>>te&1)===1),U.set(K,ne-ie,X),te--,te===-1&&(V++,te=7)}if(K+=z,K<0||P<=K){K-=z,z=-z;break}}}function T(U,L,P){const z=new r;P.forEach(function(ie){z.put(ie.mode.bit,4),z.put(ie.getLength(),j.getCharCountIndicator(ie.mode,U)),ie.write(z)});const K=t.getSymbolTotalCodewords(U),te=h.getTotalCodewordsCount(U,L),V=(K-te)*8;for(z.getLengthInBits()+4<=V&&z.put(0,4);z.getLengthInBits()%8!==0;)z.putBit(0);const ne=(V-z.getLengthInBits())/8;for(let ie=0;ie<ne;ie++)z.put(ie%2?17:236,8);return B(z,U,L)}function B(U,L,P){const z=t.getSymbolTotalCodewords(L),K=h.getTotalCodewordsCount(L,P),te=z-K,V=h.getBlocksCount(L,P),ne=z%V,ie=V-ne,X=Math.floor(z/V),q=Math.floor(te/V),ce=q+1,we=X-q,oe=new b(we);let fe=0;const re=new Array(V),Q=new Array(V);let Y=0;const ae=new Uint8Array(U.buffer);for(let Ue=0;Ue<V;Ue++){const Me=Ue<ie?q:ce;re[Ue]=ae.slice(fe,fe+Me),Q[Ue]=oe.encode(re[Ue]),fe+=Me,Y=Math.max(Y,Me)}const se=new Uint8Array(z);let Z=0,Re,je;for(Re=0;Re<Y;Re++)for(je=0;je<V;je++)Re<re[je].length&&(se[Z++]=re[je][Re]);for(Re=0;Re<we;Re++)for(je=0;je<V;je++)se[Z++]=Q[je][Re];return se}function H(U,L,P,z){let K;if(Array.isArray(U))K=C.fromArray(U);else if(typeof U=="string"){let X=L;if(!X){const q=C.rawSplit(U);X=p.getBestVersionForData(q,P)}K=C.fromString(U,X||40)}else throw new Error("Invalid data");const te=p.getBestVersionForData(K,P);if(!te)throw new Error("The amount of data is too big to be stored in a QR Code");if(!L)L=te;else if(L<te)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+te+`.
`);const V=T(L,P,K),ne=t.getSymbolSize(L),ie=new i(ne);return _(ie,L),R(ie),A(ie,L),I(ie,P,0),L>=7&&O(ie,L),M(ie,V),isNaN(z)&&(z=f.getBestMask(ie,I.bind(null,ie,P))),f.applyMask(z,ie),I(ie,P,z),{modules:ie,version:L,errorCorrectionLevel:P,maskPattern:z,segments:K}}return Oh.create=function(L,P){if(typeof L>"u"||L==="")throw new Error("No input text");let z=a.M,K,te;return typeof P<"u"&&(z=a.from(P.errorCorrectionLevel,a.M),K=p.from(P.version),te=f.from(P.maskPattern),P.toSJISFunc&&t.setToSJISFunction(P.toSJISFunc)),H(L,K,z,te)},Oh}var Qh={},Jh={},Cb;function nw(){return Cb||(Cb=1,function(t){function a(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let i=r.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+r);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(d){return[d,d]}))),i.length===6&&i.push("F","F");const l=parseInt(i.join(""),16);return{r:l>>24&255,g:l>>16&255,b:l>>8&255,a:l&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const l=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,d=i.width&&i.width>=21?i.width:void 0,f=i.scale||4;return{width:d,scale:d?4:f,margin:l,color:{dark:a(i.color.dark||"#000000ff"),light:a(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,l){return l.width&&l.width>=i+l.margin*2?l.width/(i+l.margin*2):l.scale},t.getImageWidth=function(i,l){const d=t.getScale(i,l);return Math.floor((i+l.margin*2)*d)},t.qrToImageData=function(i,l,d){const f=l.modules.size,h=l.modules.data,b=t.getScale(f,d),p=Math.floor((f+d.margin*2)*b),w=d.margin*b,j=[d.color.light,d.color.dark];for(let C=0;C<p;C++)for(let _=0;_<p;_++){let R=(C*p+_)*4,A=d.color.light;if(C>=w&&_>=w&&C<p-w&&_<p-w){const O=Math.floor((C-w)/b),I=Math.floor((_-w)/b);A=j[h[O*f+I]?1:0]}i[R++]=A.r,i[R++]=A.g,i[R++]=A.b,i[R]=A.a}}}(Jh)),Jh}var _b;function a_(){return _b||(_b=1,function(t){const a=nw();function r(l,d,f){l.clearRect(0,0,d.width,d.height),d.style||(d.style={}),d.height=f,d.width=f,d.style.height=f+"px",d.style.width=f+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(d,f,h){let b=h,p=f;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),f||(p=i()),b=a.getOptions(b);const w=a.getImageWidth(d.modules.size,b),j=p.getContext("2d"),C=j.createImageData(w,w);return a.qrToImageData(C.data,d,b),r(j,p,w),j.putImageData(C,0,0),p},t.renderToDataURL=function(d,f,h){let b=h;typeof b>"u"&&(!f||!f.getContext)&&(b=f,f=void 0),b||(b={});const p=t.render(d,f,b),w=b.type||"image/png",j=b.rendererOpts||{};return p.toDataURL(w,j.quality)}}(Qh)),Qh}var em={},Ab;function s_(){if(Ab)return em;Ab=1;const t=nw();function a(l,d){const f=l.a/255,h=d+'="'+l.hex+'"';return f<1?h+" "+d+'-opacity="'+f.toFixed(2).slice(1)+'"':h}function r(l,d,f){let h=l+d;return typeof f<"u"&&(h+=" "+f),h}function i(l,d,f){let h="",b=0,p=!1,w=0;for(let j=0;j<l.length;j++){const C=Math.floor(j%d),_=Math.floor(j/d);!C&&!p&&(p=!0),l[j]?(w++,j>0&&C>0&&l[j-1]||(h+=p?r("M",C+f,.5+_+f):r("m",b,0),b=0,p=!1),C+1<d&&l[j+1]||(h+=r("h",w),w=0)):b++}return h}return em.render=function(d,f,h){const b=t.getOptions(f),p=d.modules.size,w=d.modules.data,j=p+b.margin*2,C=b.color.light.a?"<path "+a(b.color.light,"fill")+' d="M0 0h'+j+"v"+j+'H0z"/>':"",_="<path "+a(b.color.dark,"stroke")+' d="'+i(w,p,b.margin)+'"/>',R='viewBox="0 0 '+j+" "+j+'"',O='<svg xmlns="http://www.w3.org/2000/svg" '+(b.width?'width="'+b.width+'" height="'+b.width+'" ':"")+R+' shape-rendering="crispEdges">'+C+_+`</svg>
`;return typeof h=="function"&&h(null,O),O},em}var Sb;function n_(){if(Sb)return ic;Sb=1;const t=P8(),a=r_(),r=a_(),i=s_();function l(d,f,h,b,p){const w=[].slice.call(arguments,1),j=w.length,C=typeof w[j-1]=="function";if(!C&&!t())throw new Error("Callback required as last argument");if(C){if(j<2)throw new Error("Too few arguments provided");j===2?(p=h,h=f,f=b=void 0):j===3&&(f.getContext&&typeof p>"u"?(p=b,b=void 0):(p=b,b=h,h=f,f=void 0))}else{if(j<1)throw new Error("Too few arguments provided");return j===1?(h=f,f=b=void 0):j===2&&!f.getContext&&(b=h,h=f,f=void 0),new Promise(function(_,R){try{const A=a.create(h,b);_(d(A,f,b))}catch(A){R(A)}})}try{const _=a.create(h,b);p(null,d(_,f,b))}catch(_){p(_)}}return ic.create=a.create,ic.toCanvas=l.bind(null,r.render),ic.toDataURL=l.bind(null,r.renderToDataURL),ic.toString=l.bind(null,function(d,f,h){return i.render(d,h)}),ic}var i_=n_();const l_=of(i_);function o_({houses:t,apartment:a,floor:r,onClose:i}){const[l,d]=E.useState(!1),[f,h]=E.useState(!1),[b,p]=E.useState({}),[w,j]=E.useState(!1),C=I=>`${I.id}`,_=I=>I.split("|")[0];E.useEffect(()=>{(async()=>{if(t.length){d(!0);try{const M={};for(const T of t){const B=C(T);try{M[T.id]=await l_.toDataURL(B,{width:400,margin:4,errorCorrectionLevel:"H",color:{dark:"#000000",light:"#FFFFFF"}})}catch(H){console.error("QR Generation Error:",H),M[T.id]="",le.error(`Failed to generate QR for house ${T.house_id}`)}}p(M)}catch(M){console.error("Error generating QR codes",M),le.error("Failed to generate QR codes")}d(!1)}})()},[t,a,r]);const R=async()=>{h(!0);try{const{jsPDF:I}=await tw(async()=>{const{jsPDF:ne}=await import("./jspdf.es.min-YhANEArI.js").then(ie=>ie.j);return{jsPDF:ne}},[]),M=new I("p","mm","a4"),T=12,B=M.internal.pageSize.getWidth(),H=M.internal.pageSize.getHeight();let U=2,L=85,P=70,z=40;t.length===1?(U=1,L=B-T*2,P=H-T*2-30,z=Math.min(L,P)*.5):t.length===2?(U=2,L=(B-T*3)/2,P=Math.max(90,(H-T*3)/2),z=Math.min(80,L*.6)):(U=2,L=85,P=70,z=40);let K=T,te=0;for(let ne=0;ne<t.length;ne++){const ie=t[ne],X=ne%U;let q=T+X*(L+T);t.length===1&&(q=(B-L)/2),K+P>H-T&&(M.addPage(),K=T,te=0),M.setDrawColor(200,200,200),M.rect(q,K,L,P),M.setFontSize(t.length===1?18:12),M.setFont(void 0,"bold"),M.text(a.name,q+L/2,K+(t.length===1?12:5),{align:"center"}),M.setFontSize(t.length===1?10:7),M.setTextColor(100,100,100),M.text(`Floor: ${r.floor_id}`,q+L/2,K+(t.length===1?18:9),{align:"center"}),M.setFontSize(t.length===1?24:12),M.setFont(void 0,"bold"),M.setTextColor(0,0,0),M.text(`${ie.house_id}`,q+L/2,K+(t.length===1?30:15),{align:"center"}),w&&(M.setFontSize(t.length===1?10:7),M.setFont(void 0,"bold"),M.setTextColor(0,0,0),M.text(`${ie.id}`,q+L/2,K+(t.length===1?36:18),{align:"center"})),b[ie.id]&&M.addImage(b[ie.id],"PNG",q+(L-z)/2,K+(t.length===1?(P-z)/2:20),z,z),te++,te===U&&(K+=P+T,te=0),ne===t.length-1&&te>0&&(K+=P+T)}const V=`QR_Codes_${a.name.replace(/\s+/g,"_")}_Floor_${r.floor_id}.pdf`;M.save(V),le.success("PDF Generated Successfully!")}catch(I){console.error("PDF Generation Error:",I),le.error("Failed to generate PDF")}h(!1)},A=({house:I})=>{const M=b[I.id];return C(I),e.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg border border-gray-200 dark:border-gray-600 shadow-sm",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"font-bold text-gray-800 dark:text-white text-lg mb-1",children:["House ",I.house_id]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:[a.name,"  Floor ",r.floor_id]}),M?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("img",{src:M,className:"mx-auto mb-2 rounded border-2 border-gray-300",style:{width:"150px",height:"150px"},alt:`QR Code for House ${I.house_id}`}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Scan to get account number: ",e.jsx("strong",{children:I.house_id})]})]}):e.jsx("div",{className:"w-32 h-32 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx(Xt,{size:24,className:"animate-spin text-gray-400"})})]})})},O=I=>{const M=b[I];if(M){const T=t.find(U=>U.id===I);if(!T)return;const B=C(T);_(B),window.open().document.write(`
                <html>
                    <head>
                        <title>QR Code Test</title>
                        <style>
                            body { 
                                font-family: Arial, sans-serif; 
                                padding: 20px; 
                                text-align: center; 
                                background: #f5f5f5;
                            }
                            .qr-container {
                                background: white;
                                padding: 20px;
                                border-radius: 10px;
                                box-shadow: 0 2px 10px rgba(0,0,0,0.1);
                                display: inline-block;
                                margin: 20px 0;
                            }
                            .info {
                                background: #e8f4ff;
                                padding: 15px;
                                border-radius: 8px;
                                margin: 20px auto;
                                max-width: 500px;
                                text-align: left;
                            }
                            .data-box {
                                background: #f0f0f0;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                                word-break: break-all;
                                font-family: monospace;
                                font-size: 12px;
                            }
                            .warning {
                                background: #fff3cd;
                                border: 1px solid #ffc107;
                                color: #856404;
                                padding: 10px;
                                border-radius: 5px;
                                margin: 10px 0;
                            }
                            .success {
                                background: #d4edda;
                                border: 1px solid #c3e6cb;
                                color: #155724;
                                padding: 15px;
                                border-radius: 5px;
                                margin: 15px 0;
                                font-size: 18px;
                                font-weight: bold;
                            }
                        </style>
                    </head>
                    <body>
                        <h2>QR Code Test - House ${T.house_id}</h2>
                        
                        <div class="qr-container">
                            <img src="${M}" style="width: 250px; height: 250px;" />
                        </div>                    
                        
                        <div style="margin: 20px;">
                            <button onclick="window.close()" style="padding: 10px 20px; background: #666; color: white; border: none; border-radius: 5px; cursor: pointer;">
                                Close
                            </button>
                        </div>
                    </body>
                </html>
            `)}};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b dark:border-gray-700",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(NE,{className:"text-purple-600 dark:text-purple-400",size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Generate QR Codes"})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.name,"  Floor ",r.floor_id]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600 dark:text-green-400",children:[e.jsx(pc,{size:12}),e.jsx("span",{children:"Scans show: House ID as Account No"})]})})]}),e.jsx("button",{onClick:i,className:"p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-full transition-colors",children:e.jsx("span",{className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Preview for ",t.length," house",t.length!==1?"s":""]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Generating QR codes..."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.map(I=>e.jsxs("div",{className:"relative",children:[e.jsx(A,{house:I}),e.jsx("button",{onClick:()=>O(I.id),className:"absolute top-2 right-2 bg-blue-500 hover:bg-blue-600 text-white p-1.5 rounded text-xs transition-colors",title:"Test QR code",children:"Test QR"})]},I.id))})]})}),e.jsx("div",{className:"px-6 pb-4",children:e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:I=>j(I.target.checked),className:"h-4 w-4 rounded border-gray-300 text-purple-600"}),e.jsx("span",{children:"Include House No in PDF"}),e.jsx("span",{className:"text-xs text-gray-400 ml-2",children:"(Only check to print internal DB id)"})]})}),e.jsx("div",{className:"border-t dark:border-gray-700 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[Object.keys(b).length," QR code",Object.keys(b).length!==1?"s":""," ready",e.jsx("div",{className:"text-xs mt-1",children:"Scans show house ID as account number"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:i,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{disabled:l||f||!Object.keys(b).length,onClick:R,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:16,className:"animate-spin"}),"Generating PDF..."]}):e.jsxs(e.Fragment,{children:[e.jsx(z0,{size:16}),"Download PDF"]})})]})]})})]})})}function c_(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),[l,d]=E.useState(window.innerWidth<768),{apartment_id:f,floor_id:h}=fn(),[b,p]=E.useState(null),[w,j]=E.useState(null),[C,_]=E.useState([]),[R,A]=E.useState([]),[O,I]=E.useState(null),M=xr(),[T,B]=E.useState(!1),[H,U]=E.useState(!1),[L,P]=E.useState(!1),[z,K]=E.useState(!1),[te,V]=E.useState(!1),[ne,ie]=E.useState(null),[X,q]=E.useState(!1),[ce,we]=E.useState(null),[oe,fe]=E.useState("houses"),[re,Q]=E.useState(null),[Y,ae]=E.useState(!1),[se,Z]=E.useState(null),[Re,je]=E.useState([]),[Ue,Me]=E.useState(!1),[at,ye]=E.useState(!1);E.useEffect(()=>{const nt=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",nt),()=>window.removeEventListener("resize",nt)},[]),E.useEffect(()=>{f&&(async()=>{try{const kt=await Se.get(`/apartments/${f}`);kt.data.success&&p(kt.data.data)}catch(kt){console.error("Error fetching apartment:",kt)}})()},[f]),E.useEffect(()=>{h&&(async()=>{try{const kt=await Se.get(`/floors/${h}`);kt.data.success&&j(kt.data.data)}catch(kt){console.error("Error fetching floors:",kt)}})()},[h]);const Ae=async()=>{try{U(!0),I(null);const nt=await Se.get(`/housetype?apartment_id=${f}`);nt.data.success&&Array.isArray(nt.data.data)?A(nt.data.data):A([])}catch(nt){console.error("Error loading houses:",nt),I("Failed to load houses. Please try again.")}finally{U(!1)}};E.useEffect(()=>{Ae()},[f]);const Fe=()=>{M(`/floors/${b.id}`)},Ce=async nt=>{try{B(!0),I(null);const kt=await Se.get(`/houses?apartment_id=${f}&floor_id=${nt}`);kt.data.success&&Array.isArray(kt.data.data)?(_(kt.data.data),je([]),Me(!1)):_([])}catch(kt){console.error("Error loading houses:",kt),I("Failed to load houses. Please try again.")}finally{B(!1)}};E.useEffect(()=>{h&&f&&Ce(h)},[h,f]);const Je=nt=>{M(`/viewhouse/${f}/${h}/${nt.id}`)},be=()=>{P(!0)},dt=()=>{P(!1)},me=()=>{Ce(h),P(!1),le.success("House created successfully!")},Pe=nt=>{Q(nt),K(!0)},pe=()=>{K(!1),Q(null)},lt=()=>{Ce(h),le.success("House updated successfully!")},st=nt=>{ie(nt),V(!0)},jt=()=>{V(!1),ie(null)},At=async nt=>{try{const kt=await Se.patch(`/houses/${nt.id}/toggle`);le.success(kt.data.message),Ce(h)}catch(kt){console.error("Error toggling house:",kt),le.error("Failed to toggle house status")}},Dt=nt=>{we(nt),q(!0)},or=async()=>{try{if(!ce)return;await Se.delete(`/houses/${ce.id}`),le.success("House deleted successfully"),q(!1),we(null),Ce(h)}catch(nt){console.error("Delete house error:",nt),le.error("Failed to delete house")}},Lt=()=>{q(!1),we(null)},qt=nt=>{Z(nt),ae(!0)},Ft=()=>{ae(!1),Z(null)},Ye=()=>{le.success("House documents uploaded successfully!")},Et=nt=>{je(kt=>kt.includes(nt)?kt.filter(Is=>Is!==nt):[...kt,nt])},Nt=()=>{if(Ue)je([]);else{const nt=C.map(kt=>kt.id);je(nt)}Me(!Ue)};E.useEffect(()=>{C.length>0&&Re.length===C.length?Me(!0):Me(!1)},[Re,C]),Re.length;const ot=()=>{if(Re.length===0){le.error("Please select at least one house to generate QR codes");return}C.filter(nt=>Re.includes(nt.id)),ye(!0)},St=nt=>{try{return new Date(nt).toLocaleDateString()}catch{return"N/A"}},wt=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(jc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(wt,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:Fe,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200 text-purple-700 dark:text-purple-400 mr-2 md:mr-3",children:e.jsx(Sn,{size:l?20:25})}),e.jsx(Ur,{size:l?28:40,className:"text-purple-600 dark:text-purple-400 mr-2 md:mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Houses"}),b&&w&&e.jsxs("div",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:[e.jsx("span",{className:"font-medium",children:b.name}),"  Floor ",w.floor_id]})]})]}),l&&Re.length>0&&e.jsxs("button",{onClick:ot,className:"flex items-center justify-center gap-1 px-3 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700",children:[e.jsx(z0,{size:16}),e.jsxs("span",{className:"text-xs",children:["QR (",Re.length,")"]})]})]}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 md:mb-6",children:[e.jsx("button",{onClick:()=>fe("houses"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${oe==="houses"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Houses"}),e.jsx("button",{onClick:()=>fe("houseTypes"),className:`px-3 md:px-4 py-2 font-semibold transition-colors duration-200 text-sm md:text-base
                                    ${oe==="houseTypes"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"House Types"})]}),oe==="houses"?e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:[e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"gap-3 mb-4"}`,children:[e.jsxs("button",{onClick:be,className:`flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base ${l?"w-full":""}`,children:[e.jsx(Fa,{size:l?16:20}),e.jsx("span",{children:"New House"})]}),!l&&e.jsxs("button",{onClick:ot,disabled:Re.length===0,className:"flex items-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 hover:scale-105 text-sm md:text-base disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100",children:[e.jsx(z0,{size:l?16:20}),e.jsxs("span",{children:["Generate QR Code (",Re.length,")"]})]})]}),Re.length>0&&e.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[Re.length," house",Re.length!==1?"s":""," selected"]}),l?e.jsx("button",{onClick:ot,className:"text-xs bg-green-600 text-white px-2 py-1 rounded hover:bg-green-700",children:"Generate QR"}):null]})}),T?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Xt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading Houses..."})]}):O?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:O}),e.jsx("button",{onClick:()=>Ce(h),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):C.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx($s,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No houses found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding houses"}),e.jsx("button",{onClick:be,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Add First House"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Houses: ",C.length]}),e.jsx("button",{onClick:Nt,className:"text-xs text-purple-600 dark:text-purple-400",children:Ue?"Deselect All":"Select All"})]})}),C.map(nt=>e.jsxs("div",{onClick:()=>nt.is_active&&Je(nt),className:`bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600 transition-colors ${nt.is_active?"active:bg-gray-100 dark:active:bg-gray-600 cursor-pointer":"opacity-50 cursor-not-allowed"}`,children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:Re.includes(nt.id),onChange:kt=>{kt.stopPropagation(),Et(nt.id)},onClick:kt=>kt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded mr-3"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsxs("h3",{className:"font-medium text-gray-900 dark:text-white text-sm",children:["House ",nt.house_id]}),e.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs ${nt.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}`,children:nt.status})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:R.find(kt=>kt.id===nt.housetype_id)?.name||"N/A"})]})]}),e.jsxs("div",{className:"flex gap-1 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),qt(nt)},className:"p-1.5 text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300 bg-blue-50 dark:bg-blue-900/20 rounded-lg",title:"Manage Documents",children:e.jsx(yr,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Pe(nt)},className:"p-1.5 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ja,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),st(nt)},className:`p-1.5 rounded-lg ${nt.is_active?"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20"}`,title:nt.is_active?"Deactivate":"Activate",children:nt.is_active?e.jsx(co,{size:14}):e.jsx(oo,{size:14})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Dt(nt)},className:"p-1.5 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:14})})]})]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex justify-between mt-2",children:[e.jsxs("span",{children:["Created: ",St(nt.created_at)]}),e.jsx("span",{className:`px-1.5 py-0.5 rounded text-xs ${nt.is_active?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:nt.is_active?"Active":"Inactive"})]})]},nt.id))]}):e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"overflow-auto max-h-[500px]",children:e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700 sticky top-0 z-10",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.jsx("input",{type:"checkbox",checked:Ue,onChange:Nt,className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"House No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created_at"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:C.map(nt=>e.jsxs("tr",{onClick:()=>nt.is_active&&Je(nt),className:`transition-colors cursor-pointer ${nt.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.jsx("input",{type:"checkbox",checked:Re.includes(nt.id),onChange:kt=>{kt.stopPropagation(),Et(nt.id)},onClick:kt=>kt.stopPropagation(),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:nt.house_id}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:R.find(kt=>kt.id===nt.housetype_id)?.name||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:nt.status}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:St(nt.created_at)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:kt=>{kt.stopPropagation(),qt(nt)},className:"text-blue-600 hover:text-blue-900 dark:text-blue-400 dark:hover:text-blue-300",title:"Manage Documents",children:e.jsx(yr,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Pe(nt)},className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),st(nt)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:nt.is_active?"Deactivate":"Activate",children:nt.is_active?e.jsx(co,{size:25}):e.jsx(oo,{size:25})}),e.jsx("button",{onClick:kt=>{kt.stopPropagation(),Dt(nt)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},nt.id))})]})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-2 border-t border-gray-200 dark:border-gray-600",children:e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Total: ",C.length," house",C.length!==1?"s":""]})})]})})]}):e.jsx(Zv,{})]})})]}),L&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-5xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create Houses"}),e.jsx("button",{onClick:dt,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(R8,{onClose:dt,onCreated:me,apartment_id:f,floor_id:h})]})})}),z&&re&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit House"}),e.jsx("button",{onClick:pe,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(O8,{onClose:pe,onUpdated:lt,house:re,apartment_id:f,floor_id:h})]})})}),te&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:ne?.is_active?"Confirm Deactivation of House":"Confirm Activation of House"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:ne?.is_active?"Are you sure you want to deactivate this house?":"Are you sure you want to activate this house?"}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:jt,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:()=>{ne&&(At(ne),V(!1),ie(null))},className:`px-4 py-2 text-white rounded-lg font-medium transition-colors ${l?"":"flex-1"} ${ne?.is_active?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:ne?.is_active?"Deactivate":"Activate"})]})]})}),X&&ce&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-4 md:p-6 w-full max-w-sm",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',ce.house_id,'"?']}),e.jsxs("div",{className:`flex ${l?"flex-col space-y-3":"space-x-3"}`,children:[e.jsx("button",{onClick:Lt,className:`px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${l?"":"flex-1"}`,children:"Cancel"}),e.jsx("button",{onClick:or,className:`px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors ${l?"":"flex-1"}`,children:"Delete"})]})]})}),Y&&se&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(M8,{house:se,apartment:b,floor:w,onClose:Ft,onUploadSuccess:Ye})})})}),at&&b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx("div",{className:"p-4 md:p-6",children:e.jsx(o_,{houses:C.filter(nt=>Re.includes(nt.id)),apartment:b,floor:w,onClose:()=>ye(!1)})})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function d_(){const[t,a]=E.useState(""),[r,i]=E.useState(!1),l=xr(),d=async h=>{if(h.preventDefault(),!t){le.error("Please enter your email address");return}i(!0);try{await Se.post("/auth/forgot-password-unified",{email:t}),le.success(" Password reset link sent! Check your inbox."),a("")}catch(b){const p=b.response?.data?.message||"Something went wrong";le.error(p)}finally{i(!1)}},f=()=>{l("/login")};return e.jsxs("div",{className:"container",children:[e.jsxs("div",{className:"absolute top-4 left-6 flex items-center gap-3 mt-5",children:[e.jsx("button",{onClick:f,className:"flex items-center gap-2 text-white hover:text-gray-300 transition-colors",title:"Back to Login",children:e.jsx(mc,{size:20})}),e.jsx("img",{src:"/apartment.png",alt:"Apartment Logo",className:"w-10 h-10"}),e.jsx("h2",{className:"text-2xl font-bold text-white",children:"AptSync"})]}),e.jsx("div",{className:"loginPage",children:e.jsxs("div",{className:"loginCard animate-fadeIn",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("img",{src:"/favicon.ico",alt:"AptSync Logo",className:"w-12 h-12"})}),e.jsx("h1",{className:"font-bold text-xl text-center mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-gray-600 mb-6 text-sm text-center",children:"Enter your email address and we'll send you a password reset link."}),e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Email Address"}),e.jsx("input",{type:"email",placeholder:"Enter your email address",className:"loginInput w-full",value:t,onChange:h=>a(h.target.value),required:!0,autoComplete:"email",disabled:r}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll check if you're an admin, employee, or house owner automatically."})]}),e.jsx("button",{type:"submit",className:"loginButton loginButton--submit w-full flex items-center justify-center py-3",disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):"Send Password Reset Link"})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:f,className:"text-purple-700 dark:text-purple-400 hover:underline text-center font-medium py-2",children:" Back to Login"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs text-center",children:"Don't have an account? Contact your apartment administrator."})]})})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function u_(){const[t,a]=E.useState(""),[r,i]=E.useState(""),[l,d]=E.useState(!1),[f,h]=E.useState(!1),[b,p]=E.useState(!1),[w]=td(),j=xr(),[C,_]=E.useState(null),[R,A]=E.useState(null),[O,I]=E.useState(null),[M,T]=E.useState(!0),[B,H]=E.useState(!0),[U,L]=E.useState(""),[P,z]=E.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1,match:!1});E.useEffect(()=>{const X=w.get("token"),q=w.get("id"),ce=w.get("user_type");if(!X||!q){T(!1),H(!1),le.error("Invalid or missing reset link parameters");return}_(X),A(q),I(ce||"user"),(async()=>{try{const oe=await Se.post("/auth/check-reset-token",{token:X,id:q});oe.data.success?(I(oe.data.user_type),L(oe.data.email||""),T(!0)):(T(!1),le.error(oe.data.message||"Invalid reset token"))}catch(oe){console.error("Error verifying token:",oe),T(!1),le.error("Unable to verify reset token")}finally{H(!1)}})()},[w]),E.useEffect(()=>{if(t){const X=/[A-Z]/.test(t),q=/[a-z]/.test(t),ce=/\d/.test(t),we=/[!@#$%^&*(),.?":{}|<>]/.test(t),oe=t.length>=6;z(fe=>({...fe,length:oe,uppercase:X,lowercase:q,number:ce,special:we}))}},[t]),E.useEffect(()=>{z(X=>({...X,match:t===r&&r.length>0}))},[t,r]);const K=()=>{j("/login")},V=(()=>{if(!t)return{strength:0,label:"Very Weak",color:"bg-red-500"};let X=0;t.length>=8&&X++,/(?=.*[a-z])/.test(t)&&X++,/(?=.*[A-Z])/.test(t)&&X++,/(?=.*\d)/.test(t)&&X++,/(?=.*[@$!%*?&])/.test(t)&&X++;const q=["Very Weak","Weak","Fair","Good","Strong","Very Strong"],ce=["bg-red-500","bg-red-400","bg-yellow-500","bg-green-400","bg-green-500","bg-green-600"];return{strength:X,label:q[X]||"Very Weak",color:ce[X]||"bg-red-500"}})(),ne=({isValid:X,text:q})=>e.jsxs("div",{className:"flex items-center gap-2 text-xs sm:text-sm",children:[X?e.jsx(Ds,{size:12,className:"text-green-500 flex-shrink-0"}):e.jsx(Vu,{size:12,className:"text-red-500 flex-shrink-0"}),e.jsx("span",{className:`truncate ${X?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:q})]}),ie=async X=>{if(X.preventDefault(),!Object.values(P).every(ce=>ce===!0)){le.error("Please meet all password requirements");return}if(!O){le.error("Unable to determine account type. Please request a new reset link.");return}p(!0);try{await Se.post("/auth/reset-password-unified",{token:C,id:R,password:t,user_type:O}),le.success(" Password reset successful! Redirecting to login..."),setTimeout(()=>j("/login"),2e3)}catch(ce){const we=ce.response?.data?.message||"Reset failed. The link may have expired.";ce.response?.status===400?we.includes("expired")?le.error("Reset link has expired. Please request a new one."):we.includes("Invalid")||we.includes("invalid")?le.error("Invalid reset link. Please request a new one."):we.includes("already used")?le.error("This reset link has already been used. Please request a new one."):le.error(we):ce.response?.status===404?le.error("Account not found. The link may be invalid."):le.error(we)}finally{p(!1)}};return B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Verifying Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm",children:"Please wait while we verify your reset link..."})]})})})}):M?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:[e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4 z-10",children:e.jsxs("button",{onClick:K,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(mc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"flex justify-center mb-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/apartment.png",alt:"AptSync Logo",className:"w-10 h-10"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"AptSync"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl overflow-hidden animate-fadeIn max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-5 sm:p-8",children:[O&&e.jsx("div",{className:"flex justify-center mb-4 sm:mb-6",children:e.jsxs("div",{className:`inline-flex items-center gap-2 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm ${O==="houseowner"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300":"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300"}`,children:[e.jsx(Qy,{size:14,className:"flex-shrink-0"}),e.jsx("span",{className:"font-medium truncate",children:O==="houseowner"?"House Owner Account":"Admin/Employee Account"}),U&&e.jsxs("span",{className:"hidden sm:inline text-xs opacity-75 ml-1 truncate",children:["(",U,")"]})]})}),e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Set New Password"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm",children:"Create a strong password for your account"})]}),e.jsxs("form",{onSubmit:ie,className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:l?"text":"password",placeholder:"Enter new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:t,onChange:X=>a(X.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>d(!l),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":l?"Hide password":"Show password",children:l?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})})]}),t&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-400",children:"Strength:"}),e.jsx("span",{className:`text-xs sm:text-sm font-semibold ${V.strength<2?"text-red-500":V.strength<4?"text-yellow-500":"text-green-500"}`,children:V.label})]}),e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 h-1.5 sm:h-2 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-300 ${V.color}`,style:{width:`${V.strength/5*100}%`}})})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-900 rounded-xl p-4 border border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-3 text-sm",children:"Password Requirements:"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-1.5 sm:gap-2",children:[e.jsx(ne,{isValid:P.length,text:"Min 6 characters"}),e.jsx(ne,{isValid:P.uppercase,text:"Uppercase letter"}),e.jsx(ne,{isValid:P.lowercase,text:"Lowercase letter"}),e.jsx(ne,{isValid:P.number,text:"Number"}),e.jsx(ne,{isValid:P.special,text:"Special character"}),e.jsx(ne,{isValid:P.match,text:"Passwords match"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2 text-sm font-medium",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:f?"text":"password",placeholder:"Confirm new password",className:"w-full px-4 py-3 bg-gray-50 text-gray-600 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",value:r,onChange:X=>i(X.target.value),required:!0,autoComplete:"new-password",disabled:b}),e.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-3 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300","aria-label":f?"Hide password":"Show password",children:f?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"w-full px-4 py-3.5 sm:py-4 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-sm sm:text-base transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",disabled:b||!Object.values(P).every(X=>X===!0),children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 sm:h-5 sm:w-5 border-b-2 border-white mr-2 sm:mr-3"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Resetting Password..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qy,{size:18,className:"mr-2 sm:mr-3 flex-shrink-0"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 sm:mt-8 pt-4 sm:pt-6 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex flex-col space-y-3",children:[e.jsx("button",{type:"button",onClick:K,className:"text-purple-600 dark:text-purple-400 hover:underline text-center text-sm py-2",children:" Back to Login"}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Having trouble?"," ",e.jsx("button",{type:"button",onClick:()=>j("/forgot-password"),className:"text-blue-600 dark:text-blue-400 hover:underline font-medium text-xs",children:"Request a new reset link"})]})})]})})]})}),e.jsx("div",{className:"text-center mt-4 sm:mt-6",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[" ",new Date().getFullYear()," AptSync. All rights reserved."]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,toastClassName:"!text-sm"})]}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs("button",{onClick:K,className:"flex items-center gap-2 text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 transition-colors p-2",title:"Back to Login",children:[e.jsx(mc,{size:20}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"Back"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 sm:p-8 animate-fadeIn",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[e.jsx(Vu,{size:64,className:"text-red-500"}),e.jsx("h2",{className:"text-xl font-bold text-red-600 dark:text-red-400",children:"Invalid Reset Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-center text-sm sm:text-base",children:"This password reset link is invalid or has expired."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 w-full mt-4",children:[e.jsx("button",{onClick:()=>j("/forgot-password"),className:"px-4 py-3 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium transition-colors flex-1",children:"Request New Reset Link"}),e.jsx("button",{onClick:K,className:"px-4 py-3 bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-800 dark:text-gray-200 rounded-lg font-medium transition-colors flex-1",children:"Back to Login"})]})]})})]})})}function f_(){const[t]=td(),a=xr(),[r,i]=E.useState(""),[l,d]=E.useState(""),[f,h]=E.useState(""),[b,p]=E.useState(!0),[w,j]=E.useState(!0),[C,_]=E.useState(!1),[R,A]=E.useState(!1),[O,I]=E.useState(!1),[M,T]=E.useState({firstname:"",lastname:"",country:"",mobile:"",password:"",confirmPassword:""});E.useEffect(()=>{const z=t.get("token"),K=t.get("id");if(!z||!K){p(!1),j(!1),le.error("Invalid registration link - missing parameters");return}i(z),d(K),(async()=>{try{const V=await Se.post("/auth/verify-invite-link",{token:z,id:K});V.data.success&&(h(V.data.email),p(!0))}catch(V){console.error("Link verification failed:",V),p(!1),le.error(V.response?.data?.message||"This invitation link is invalid or expired.")}finally{j(!1)}})()},[t]);const[B,H]=E.useState([]);E.useEffect(()=>{(async()=>{try{const te=await(await fetch("https://general.apivcm.shop/countries")).json();H(te.data)}catch(K){console.error("Error fetching countries:",K)}})()},[]);const U=z=>{const K=z.target.value,te=B.find(V=>V.country===K);T(V=>({...V,country:K,mobile:te?te.international_dialing+" ":V.mobile}))},L=z=>{const{name:K,value:te}=z.target;T(V=>({...V,[K]:te}))},P=async z=>{if(z.preventDefault(),M.password!==M.confirmPassword){le.error("Passwords do not match");return}if(M.password.length<8){le.error("Password must be at least 8 characters long");return}I(!0);try{const K=await Se.post("/auth/verify",{token:r,id:l});await Se.post("/auth/complete-registration",{email:f,firstname:M.firstname,lastname:M.lastname,country:M.country,mobile:M.mobile,password:M.password}),le.success("Registration completed successfully! Redirecting to login..."),setTimeout(()=>a("/login"),2e3)}catch(K){console.error("Registration error:",K),le.error(K.response?.data?.message||"Failed to complete registration")}finally{I(!1)}};return w?e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying invitation link..."})]})}):b?e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex items-center justify-center py-8 px-4",children:[e.jsxs("div",{className:"w-full max-w-md bg-white dark:bg-gray-800 rounded-2xl shadow-lg p-6 animate-fadeIn",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("button",{onClick:()=>a("/login"),className:"flex items-center text-purple-600 hover:text-purple-700 transition-colors",children:[e.jsx(mc,{size:20,className:"mr-1"}),e.jsx("span",{children:"Back"})]}),e.jsx("h2",{className:"text-xl font-bold text-center flex-1 text-gray-800 dark:text-white",children:"Complete Your Registration"})]}),e.jsxs("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e.jsx("strong",{children:"Email:"})," ",f]}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Please complete your profile information below."})]}),e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx("div",{children:e.jsx("input",{type:"text",name:"firstname",placeholder:"First Name",value:M.firstname,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})}),e.jsx("div",{children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Last Name",value:M.lastname,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})})]}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("input",{name:"country",list:"country-list",value:M.country||"",onChange:U,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Select or type country *",required:!0}),e.jsx("datalist",{id:"country-list",children:B.map(z=>e.jsx("option",{value:z.country},z.country))})]})}),e.jsx("div",{children:e.jsx("input",{name:"mobile",value:M.mobile,onChange:z=>{const K=M.mobile.split(" ")[0]||"",te=z.target.value.replace(K+" ",""),ne={target:{name:"mobile",value:K+(te?" "+te.replace(/\D/g,""):"")}};L(ne)},placeholder:"Mobile * (e.g., +94 771234567)",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:C?"text":"password",name:"password",placeholder:"Password (min. 8 characters)",value:M.password,onChange:L,required:!0,minLength:"8",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>_(!C),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:C?e.jsx(Tn,{size:18}):e.jsx(Ys,{size:18})})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:R?"text":"password",name:"confirmPassword",placeholder:"Confirm Password",value:M.confirmPassword,onChange:L,required:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg p-3 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-10"}),e.jsx("button",{type:"button",onClick:()=>A(!R),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:R?e.jsx(Tn,{size:18}):e.jsx(Ys,{size:18})})]}),e.jsx("button",{type:"submit",disabled:O,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-lg font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:O?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Completing Registration..."]}):"Complete Registration"})]})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]}):e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 dark:bg-gray-900 text-center p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-8 max-w-md w-full",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 dark:bg-red-900 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("h2",{className:"text-2xl font-bold text-red-600 dark:text-red-400 mb-2",children:"Invalid or Expired Link"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Please contact your administrator for a new invitation."}),e.jsx("button",{onClick:()=>a("/login"),className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Back to Login"})]})})}function x_(){const{auth:t}=E.useContext(Ir),a=xr(),[r,i]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(null),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(null),[R,A]=E.useState(!1),[O,I]=E.useState(null),M=B=>{a(`/bills-and-calculations/${B.id}`)},T=async()=>{try{d(!0),h(null);const B=await Se.get("/apartments");B.data.success&&Array.isArray(B.data.data)?i(B.data.data):Array.isArray(B.data)?i(B.data):i([])}catch(B){console.error("Error loading apartments:",B),B.response?.status===401?(h("Unauthorized. Please login again."),a("/login")):B.response?.status===400?h("Company information missing. Please contact support."):h("Failed to load apartments. Please try again.")}finally{d(!1)}};return E.useEffect(()=>{T()},[]),e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:setIsSidebarCollapsed}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${isSidebarCollapsed?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):f?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[f,e.jsx("button",{onClick:T,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx($s,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No apartments found"})]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("p",{className:"mb-4 text-2xl  text-gray-600 dark:text-gray-300",children:"Select Apartment Below"}),e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Picture"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"City"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Floors"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Units"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((B,H)=>e.jsxs("tr",{onClick:()=>B.is_active&&M(B),className:`transition-colors cursor-pointer ${B.is_active?"hover:bg-gray-50 dark:hover:bg-gray-700":"opacity-50 cursor-not-allowed"}`,children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.picture?e.jsx("img",{src:`http://localhost:2500${B.picture}`,alt:B.name,className:"w-12 h-12 object-cover rounded-lg",onError:U=>{console.error("Image failed to load:",B.picture),U.target.style.display="none";const L=U.target.parentNode.querySelector(".image-fallback");L&&(L.style.display="flex")}}):e.jsx("div",{className:"w-12 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center",children:e.jsx($s,{size:20,className:"text-gray-400"})})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:B.name}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.address}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.city||"N/A"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.floors}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:B.houses})]},B.id||H))})]})]})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}const Tb=(t,a=2,r="standard")=>{if(r==="ten")return Math.ceil(t/10)*10;if(r==="hundred")return Math.ceil(t/100)*100;{const i=Math.pow(10,a);return Math.ceil(t*i)/i}};function h_({onClose:t,onCreated:a,apartment_id:r}){const[i,l]=E.useState(!1),[d,f]=E.useState(!1),[h,b]=E.useState(null),[p,w]=E.useState([]),[j,C]=E.useState(""),[_,R]=E.useState(""),[A,O]=E.useState(new Date().getFullYear()),[I,M]=E.useState(new Date().toLocaleString("default",{month:"long"})),[T,B]=E.useState(0),[H,U]=E.useState(0),[L,P]=E.useState(!1),[z,K]=E.useState([]),[te,V]=E.useState(!1),[ne,ie]=E.useState(""),X=E.useMemo(()=>{const Ce=new Date;return Ce.setDate(Ce.getDate()+10),Ce.toISOString().split("T")[0]},[]);E.useEffect(()=>{ne||ie(X)},[X]);const[q,ce]=E.useState([]),[we,oe]=E.useState(""),[fe,re]=E.useState([]),[Q,Y]=E.useState([]),[ae,se]=E.useState("house_count"),Z=async()=>{try{l(!0),b(null);const Ce=await Se.get("/bills");if(Ce.data.success&&Array.isArray(Ce.data.data)){const Je=Ce.data.data.filter(be=>be.billtype==="Shared");w(Je)}else w([])}catch(Ce){console.error("Error loading bills:",Ce),b("Failed to load bills. Please try again.")}finally{l(!1)}},Re=async()=>{try{V(!0);const Ce=await Se.get("/apartments");Ce.data.success&&K(Ce.data.data||[])}catch(Ce){console.error("Error loading apartments:",Ce)}finally{V(!1)}},je=async(Ce,Je)=>{if(!Ce||!Je){re([]),Y([]),B(0);return}try{P(!0);const be=await Se.get(`/generate-bills/assigned-houses/details?bill_id=${Ce}&apartment_id=${Je}`);if(be.data.success)if(re(be.data.data.houses||[]),Y(be.data.data.floors||[]),B(be.data.data.houses.length),_&&be.data.data.houses.length>0){const dt=parseFloat(_)/be.data.data.houses.length;U(dt)}else U(0)}catch(be){console.error("Error fetching assigned houses details:",be),re([]),Y([]),B(0)}finally{P(!1)}};E.useEffect(()=>{Z(),Re()},[]);const Ue=Ce=>{oe(Ce),Ce&&j?je(j,Ce):(re([]),Y([]),B(0))},Me=Ce=>{C(Ce),Ce&&we?je(Ce,we):(re([]),Y([]),B(0))},at=Ce=>{R(Ce);const Je=fe;if(Ce&&Je.length>0)if(ae==="square_footage"){const be=parseFloat(Ce)/Je.length,dt=Tb(be,2,"ten");U(dt)}else{const be=parseFloat(Ce)/Je.length,dt=Tb(be,2,"ten");U(dt)}else U(0)},ye=async()=>{if(!j){b("Please select a bill.");return}if(!we){b("Please select an apartment.");return}if(!_||parseFloat(_)<=0){b("Please enter a valid total amount.");return}if(T===0){b("No houses are assigned to this bill for the selected apartment.");return}try{f(!0),b(null);const Ce={bill_id:j,year:A,month:I,totalAmount:parseFloat(_),apartment_id:we,selected_floors:[],selected_houses:[],calculation_method:ae,due_date:ne||new Date(Date.now()+14400*60*1e3).toISOString().split("T")[0]},Je=await Se.post("/generate-bills/multiple",Ce);Je.data.success?(le.success(`Successfully generated ${Je.data.data?.length||0} bills!`),a(Je.data.data)):b(Je.data.message||"Failed to generate bill")}catch(Ce){console.error("Error generating bill:",Ce),console.error("Error details:",Ce.response?.data);let Je="Failed to generate bill. Please try again.";Ce.response?.data.message?Je=Ce.response.data.message:Ce.message&&(Je=Ce.message),le.error(Je)}finally{f(!1)}},Ae=()=>{const Ce=p.find(Je=>Je.id===j);return Ce?Ce.bill_name:""},Fe=()=>{const Ce=z.find(Je=>Je.id===we);return Ce?Ce.name:""};return E.useEffect(()=>{(async()=>{try{const Je=await Se.get(`/housetype?apartment_id=${r}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});ce(Je.data.data||[])}catch(Je){console.error("Error fetching house types:",Je)}})()},[r]),e.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2 pl-1",children:[h&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded text-sm",children:h}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Year *"}),e.jsx("input",{type:"number",value:A,onChange:Ce=>O(parseInt(Ce.target.value)),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Month *"}),e.jsx("select",{value:I,onChange:Ce=>M(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",children:["January","February","March","April","May","June","July","August","September","October","November","December"].map(Ce=>e.jsx("option",{value:Ce,children:Ce},Ce))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:ne,onChange:Ce=>ie(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"}),!ne&&e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Default due date: ",X," (10 days from today)"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Shared Bill *"}),e.jsxs("select",{value:j,onChange:Ce=>Me(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:i,children:[e.jsx("option",{value:"",children:"Select a Shared Bill"}),p.map(Ce=>e.jsx("option",{value:Ce.id,children:Ce.bill_name},Ce.id))]}),i&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading bills..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Select Apartment *"}),e.jsxs("select",{value:we,onChange:Ce=>Ue(Ce.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white",disabled:te,children:[e.jsx("option",{value:"",children:"Select an Apartment"}),z.map(Ce=>e.jsx("option",{value:Ce.id,children:Ce.name},Ce.id))]}),te&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Calculation Method *"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"house_count",name:"calculation_method",value:"house_count",checked:ae==="house_count",onChange:Ce=>se(Ce.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"house_count",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by House Count (Equal division)"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("input",{type:"radio",id:"square_footage",name:"calculation_method",value:"square_footage",checked:ae==="square_footage",onChange:Ce=>se(Ce.target.value),className:"h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300"}),e.jsx("label",{htmlFor:"square_footage",className:"text-sm text-gray-700 dark:text-gray-300",children:"Divide by Square Footage (Proportional)"})]})]}),ae==="square_footage"&&e.jsx("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:"Total amount will be divided proportionally based on each house's square footage"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Total Amount ($) *"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:_,onChange:Ce=>at(Ce.target.value),placeholder:"Enter total amount",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]}),j&&we&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Assigned Houses Information"}),L&&e.jsx("span",{className:"text-xs text-gray-500",children:"Loading..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Assigned Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Floors:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Q.length})]})]}),Q.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Houses by Floor:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto pr-2",children:Q.map(Ce=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Floor ",Ce.floor_id,":"]}),e.jsxs("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:[Ce.assigned_houses_count," houses"]})]},Ce.id))})]})]}),j&&we&&T>0&&e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white text-sm",children:"Calculation Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Calculation Method:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:ae==="house_count"?"House Count (Equal)":"Square Footage (Proportional)"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Selected Bill:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Ae()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Apartment:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:Fe()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Houses:"}),e.jsx("p",{className:"font-medium text-gray-800 dark:text-white",children:T})]})]}),_&&T>0&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:[ae==="house_count"?e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("p",{className:"font-medium text-green-600 dark:text-green-400",children:["$",parseFloat(_).toFixed(2)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Unit Price:"}),e.jsxs("p",{className:"font-medium text-purple-600 dark:text-purple-400",children:["$",H.toFixed(2),e.jsx("span",{className:"text-xs text-gray-500 ml-2",children:"(Rounded up to nearest 10)"})]})]})]}):e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Amounts will be calculated proportionally based on each house's square footage and rounded up to the nearest 10"})}),ae==="house_count"&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:["Calculation: $",_,"  ",T," houses =",e.jsxs("span",{className:"font-medium",children:[" $",(parseFloat(_)/T).toFixed(6)]}),e.jsx("span",{className:"mx-2",children:""}),"Rounded up to: ",e.jsxs("span",{className:"font-medium",children:["$",H.toFixed(2)]})," per house"]})]})]}),j&&we&&!L&&T===0&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:" No houses are assigned to this bill for the selected apartment. Please assign houses to this bill first."})}),e.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-800 pt-4 pb-2 -mx-2 px-2 border-t border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:!j||!we||!_||T===0||d,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Generating..."})]}):e.jsxs("span",{children:["Generate ",T," Bills"]})})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function m_({bill:t,onClose:a,getApartmentName:r,getFloorName:i,getHouseName:l,getLocationScope:d,getLocationDisplay:f}){if(!t)return null;const h=p=>{if(!p)return"0.00";const w=typeof p=="string"?parseFloat(p):p;return isNaN(w)?"0.00":w.toFixed(2)},b=p=>{switch(p){case"House":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Floor":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Apartment":return"bg-orange-100 text-orange-800 dark:bg-orange-800 dark:text-orange-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-800 z-10",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ka,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Bill Details"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(mr,{size:20})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(ka,{size:16,className:"mr-2"}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Name"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:t.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(Nl,{size:14,className:"inline mr-1"}),"Period"]}),e.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Scope"}),e.jsxs("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${b(d(t))}`,children:[d(t)," Level"]})]})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(lo,{size:16,className:"mr-2"}),"Location Details"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ri,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:r(t.apartment_id)})]})]}),t.floor_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(pf,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Floor"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:i(t.floor_id)})]})]}),t.house_id&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ur,{size:14,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"House"}),e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:l(t.house_id)})]})]}),e.jsxs("div",{className:"pt-2 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Full Location Path"}),e.jsx("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:f(t)})]})]})]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-3 flex items-center",children:[e.jsx(Gs,{size:16,className:"mr-2"}),"Financial Details"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.totalAmount&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-lg font-bold text-green-600 dark:text-green-400",children:["$",h(t.totalAmount)]})]}),t.unitPrice&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Unit Price"}),e.jsxs("p",{className:"text-lg font-bold text-blue-600 dark:text-blue-400",children:["$",h(t.unitPrice)]})]}),t.assignedHouses&&e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:[e.jsx(ei,{size:12,className:"inline mr-1"}),"Assigned Houses"]}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.assignedHouses})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Additional Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Date"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Generated Time"}),e.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:new Date(t.created_at).toLocaleTimeString()})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-xs text-gray-600 dark:text-gray-400 mb-1",children:"Status"}),e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${t.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:t.totalAmount?"Calculated":"Generated"})]})]})]}),e.jsx("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:e.jsx("button",{onClick:a,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})]})})}function g_(){const[t,a]=E.useState(!1),[r,i]=E.useState([]),[l,d]=E.useState(!1),[f,h]=E.useState(""),[b,p]=E.useState(""),[w,j]=E.useState([]),[C,_]=E.useState({}),[R,A]=E.useState({}),[O,I]=E.useState(!1),[M,T]=E.useState({}),[B,H]=E.useState({}),[U,L]=E.useState({}),[P,z]=E.useState({}),[K,te]=E.useState({}),[V,ne]=E.useState(!1),[ie,X]=E.useState(null),[q,ce]=E.useState(!1),[we,oe]=E.useState(!1),[fe,re]=E.useState(null),Q=async()=>{try{d(!0);const me=await Se.get("/generate-bills");me.data.success&&(i(me.data.data),Y(me.data.data))}catch(me){console.error("Error loading generated bills:",me),le.error("Failed to load generated bills")}finally{d(!1)}},Y=async me=>{const Pe=[...new Set(me.map(st=>st.apartment_id).filter(Boolean))],pe=[...new Set(me.map(st=>st.floor_id).filter(Boolean))],lt=[...new Set(me.map(st=>st.house_id).filter(Boolean))];if(Pe.length>0)try{const st=await Se.get("/apartments");if(st.data.success){const jt={};st.data.data.forEach(At=>{jt[At.id]=At.name}),L(jt)}}catch(st){console.error("Error loading apartments:",st)}for(const st of pe)if(st&&!P[st])try{const jt=await Se.get(`/floors/${st}`);jt.data.success&&z(At=>({...At,[st]:jt.data.data.floor_id}))}catch(jt){console.error("Error loading floor:",jt)}for(const st of lt)if(st&&!K[st])try{const jt=await Se.get(`/houses/${st}`);jt.data.success&&te(At=>({...At,[st]:jt.data.data.house_id}))}catch(jt){console.error("Error loading house:",jt)}},ae=me=>U[me]||me||"All Apartments",se=me=>P[me]||me||"All Floors",Z=me=>K[me]||me||"All Houses",Re=me=>me.house_id?"House":me.floor_id?"Floor":me.apartment_id?"Apartment":"Global",je=me=>{switch(Re(me)){case"House":return`${ae(me.apartment_id)}  ${se(me.floor_id)}  ${Z(me.house_id)}`;case"Floor":return`${ae(me.apartment_id)}  ${se(me.floor_id)}`;case"Apartment":return ae(me.apartment_id);default:return"All Locations"}};E.useEffect(()=>{Q(),be()},[]);const Ue=()=>{a(!0)},Me=()=>{a(!1)},at=me=>{me&&me.length>0&&(i(Pe=>[...me,...Pe]),Y(me)),Q(),a(!1)},ye=me=>{re(me),oe(!0)},Ae=()=>{oe(!1),re(null)},Fe=me=>{X(me),ne(!0)},Ce=async()=>{if(ie)try{ce(!0),(await Se.delete(`/generate-bills/${ie.id}`)).data.success&&(le.success("Generated bill deleted successfully"),i(Pe=>Pe.filter(pe=>pe.id!==ie.id)))}catch(me){console.error("Error deleting generated bill:",me),le.error(me.response?.data?.message||"Failed to delete generated bill")}finally{ce(!1),ne(!1),X(null)}},Je=()=>{ne(!1),X(null)},be=async()=>{try{I(!0);const me=await Se.get("/apartments");if(me.data.success){j(me.data.data||[]);const Pe={};me.data.data.forEach(pe=>{Pe[pe.id]=pe.name}),L(Pe)}}catch(me){console.error("Error loading apartments:",me),le.error("Failed to load apartments")}finally{I(!1)}},dt=r.filter(me=>{const Pe=me.bill_name?.toLowerCase().includes(f.toLowerCase())||me.month?.toLowerCase().includes(f.toLowerCase())||me.year?.toString().includes(f)||ae(me.apartment_id)?.toLowerCase().includes(f.toLowerCase())||se(me.floor_id)?.toLowerCase().includes(f.toLowerCase())||Z(me.house_id)?.toLowerCase().includes(f.toLowerCase()),pe=!b||me.billtype===b;return Pe&&pe});return[...new Set(r.map(me=>me.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsxs("div",{className:"flex flex-1",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:f,onChange:me=>h(me.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]}),e.jsxs("button",{onClick:Ue,className:"flex items-center gap-2 px-4 py-2 ml-4 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"Generate Bills"})]})]})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:["Generated Bills (",dt.length,")"]}),l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading generated bills..."})]}):dt.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fa,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No generated bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r.length===0?"No bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:dt.map(me=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:me.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:me.billtype||"N/A"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[me.month," ",me.year]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${me.totalAmount?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}`,children:me.totalAmount?"Calculated":"Generated"})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(me.created_at).toLocaleDateString()]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ye(me),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(Ys,{size:16})}),e.jsx("button",{onClick:()=>Fe(me),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",children:e.jsx(Fr,{size:16})})]})]})]})})},me.id))})]})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-2xl relative",children:[e.jsx("button",{onClick:Me,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Generate New Bills"}),e.jsx(h_,{onClose:Me,onCreated:at})]})}),we&&fe&&e.jsx(m_,{bill:fe,onClose:Ae,getApartmentName:ae,getFloorName:se,getHouseName:Z,getLocationScope:Re,getLocationDisplay:je}),V&&ie&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Fr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Generated Bill"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete this generated bill? This action cannot be undone.",ie.assignedHouses>0&&e.jsxs("span",{className:"block mt-2 text-red-600 dark:text-red-400 text-sm",children:["Warning: This bill is assigned to ",ie.assignedHouses," house(s). Deleting it may affect related payments."]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium",children:ie.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:ie.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium",children:[ie.month," ",ie.year]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:Je,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:q,children:"Cancel"}),e.jsx("button",{onClick:Ce,disabled:q,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function p_(){const[t,a]=E.useState([]),[r,i]=E.useState(!1),[l,d]=E.useState(""),[f,h]=E.useState(""),[b,p]=E.useState([]),[w,j]=E.useState({}),[C,_]=E.useState({}),[R,A]=E.useState({}),[O,I]=E.useState({}),[M,T]=E.useState({}),[B,H]=E.useState(!1),[U,L]=E.useState(null),[P,z]=E.useState(!1),[K,te]=E.useState(null),[V,ne]=E.useState(!1),ie=async()=>{try{i(!0);const Z=await Se.get("/generate-measurable-bills");Z.data.success&&(a(Z.data.data),X(Z.data.data))}catch(Z){console.error("Error loading measurable bills:",Z),le.error("Failed to load measurable bills")}finally{i(!1)}},X=async Z=>{const Re=[...new Set(Z.map(Me=>Me.apartment_id).filter(Boolean))],je=[...new Set(Z.map(Me=>Me.floor_id).filter(Boolean))],Ue=[...new Set(Z.map(Me=>Me.house_id).filter(Boolean))];if(Re.length>0)try{const Me=await Se.get("/apartments");if(Me.data.success){const at={};Me.data.data.forEach(ye=>{at[ye.id]=ye.name}),A(at)}}catch(Me){console.error("Error loading apartments:",Me)}for(const Me of je)if(Me&&!O[Me])try{const at=await Se.get(`/floors/${Me}`);at.data.success&&I(ye=>({...ye,[Me]:at.data.data.floor_id}))}catch(at){console.error("Error loading floor:",at)}for(const Me of Ue)if(Me&&!M[Me])try{const at=await Se.get(`/houses/${Me}`);at.data.success&&T(ye=>({...ye,[Me]:at.data.data.house_id}))}catch(at){console.error("Error loading house:",at)}},q=Z=>R[Z]||Z||"N/A",ce=Z=>O[Z]||Z||"N/A",we=Z=>M[Z]||Z||"N/A",oe=Z=>Z.house_id?`${q(Z.apartment_id)}  ${ce(Z.floor_id)}  ${we(Z.house_id)}`:Z.floor_id?`${q(Z.apartment_id)}  ${ce(Z.floor_id)}`:Z.apartment_id?q(Z.apartment_id):"Global";E.useEffect(()=>{ie()},[]);const fe=Z=>{te(Z),ne(!0)},re=()=>{ne(!1),te(null)},Q=Z=>{L(Z),H(!0)},Y=async()=>{if(U)try{z(!0),(await Se.delete(`/generate-measurable-bills/${U.id}`)).data.success&&(le.success("Measurable bill deleted successfully"),a(Re=>Re.filter(je=>je.id!==U.id)))}catch(Z){console.error("Error deleting measurable bill:",Z),le.error(Z.response?.data?.message||"Failed to delete measurable bill")}finally{z(!1),H(!1),L(null)}},ae=()=>{H(!1),L(null)},se=t.filter(Z=>{const Re=Z.bill_name?.toLowerCase().includes(l.toLowerCase())||Z.month?.toLowerCase().includes(l.toLowerCase())||Z.year?.toString().includes(l)||q(Z.apartment_id)?.toLowerCase().includes(l.toLowerCase())||ce(Z.floor_id)?.toLowerCase().includes(l.toLowerCase())||we(Z.house_id)?.toLowerCase().includes(l.toLowerCase()),je=!f||Z.billtype===f;return Re&&je});return[...new Set(t.map(Z=>Z.billtype))].filter(Boolean),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:e.jsx("div",{className:"flex flex-1",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search by bill name, month, year, apartment, floor, or house...",value:l,onChange:Z=>d(Z.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700"})]})})})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:["Measurable Bills (",se.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Showing ",se.length," of ",t.length," bills"]})]}),r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading measurable bills..."})]}):se.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ns,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No measurable bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No measurable bills have been generated yet.":"No bills match your search criteria."})]}):e.jsx("div",{className:"space-y-4",children:se.map(Z=>e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800 dark:text-white mb-2",children:Z.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-3",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type: "}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:Z.billtype||"N/A"})]}),e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period: "}),e.jsxs("span",{className:"font-medium",children:[Z.month," ",Z.year]})]})]})]})}),e.jsxs("div",{className:"flex justify-between items-center mt-4 pt-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Generated: ",new Date(Z.created_at).toLocaleDateString()," at ",new Date(Z.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>fe(Z),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Bill Details",children:e.jsx(Ys,{size:16})}),e.jsx("button",{onClick:()=>Q(Z),className:"p-2 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300 transition-colors hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg",title:"Delete Bill",disabled:Z.payment_status==="Paid",children:e.jsx(Fr,{size:16})})]})]})]})})},Z.id))})]})]}),V&&K&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Bill Details"}),e.jsx("button",{onClick:re,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white mb-3",children:K.bill_name||"Unnamed Bill"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Bill Type"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:K.billtype||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Period"}),e.jsxs("p",{className:"text-gray-900 dark:text-white font-medium",children:[K.month," ",K.year]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Location"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium",children:oe(K)})]})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-4",children:[e.jsx("h5",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Reading Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Previous Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:K.previous_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Current Reading"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-mono text-lg",children:K.current_reading})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Used Units"}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400 font-bold text-xl",children:[K.used_units," units"]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-green-700 dark:text-green-300 mb-1",children:"Total Amount"}),e.jsxs("p",{className:"text-green-700 dark:text-green-300 font-bold text-2xl",children:["$",K.totalAmount?.toFixed(2)||"0.00"]})]})}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Bill Reference:"}),e.jsx("span",{className:"font-mono",children:K.id})]}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Generated Date:"}),e.jsx("span",{children:new Date(K.created_at).toLocaleString()})]}),K.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{children:new Date(K.updated_at).toLocaleString()})]})]})]}),e.jsx("div",{className:"mt-6 flex justify-end",children:e.jsx("button",{onClick:re,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Close"})})]})})}),B&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Fr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Measurable Bill"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this measurable bill? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Bill Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Name:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:U.bill_name||"Unnamed Bill"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:U.billtype||"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U.month," ",U.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-green-600 dark:text-green-400",children:["$",U.totalAmount?.toFixed(2)||"0.00"]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ae,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:Y,disabled:P,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Bill"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function y_(){const[t,a]=E.useState(!1),[r,i]=E.useState("bills");xr();const{apartment_id:l}=fn(),[d,f]=E.useState(null);return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsxs("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>i("bills"),className:`px-4 py-2 font-semibold transition-colors duration-200 
                                ${r==="bills"?"text-purple-600 border-b-2 border-purple-600 dark:text-purple-400":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Bill Type"}),e.jsx("button",{onClick:()=>i("generateBill"),className:`px-4 py-2 font-semibold 
                                ${r==="generateBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generate Shared Bills"}),e.jsx("button",{onClick:()=>i("measurableBill"),className:`px-4 py-2 font-semibold 
                                ${r==="measurableBill"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600 dark:text-gray-300 hover:text-purple-600"}`,children:"Generated Measurable Bills"})]}),r==="bills"&&e.jsx(ew,{}),r==="generateBill"&&e.jsx(g_,{}),r==="measurableBill"&&e.jsx(p_,{})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function b_({show:t,onClose:a,onSave:r}){const[i,l]=E.useState({fromRange:"",toRange:""});if(!t)return null;const d=h=>{const{name:b,value:p}=h.target;l(w=>({...w,[b]:p}))},f=()=>{if(!i.fromRange||!i.toRange){le.error("Please fill all fields.");return}r(i)};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Add Bill Range"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:e.jsx(mr,{size:22})})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",placeholder:"From Range",value:i.fromRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"}),e.jsx("input",{type:"number",name:"toRange",placeholder:"To Range",value:i.toRange,onChange:d,className:"p-2 border rounded-md text-black dark:text-white focus:ring-2 focus:ring-purple-500 outline-none"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:a,className:"px-4 py-2 rounded-md bg-gray-300 dark:bg-gray-600 hover:bg-gray-400 dark:hover:bg-gray-500",children:"Cancel"}),e.jsx("button",{onClick:f,className:"px-4 py-2 rounded-md bg-purple-600 text-white hover:bg-purple-700",children:"Save"})]})]})})}function v_({range:t,onClose:a,onUpdated:r}){const[i,l]=E.useState({fromRange:"",toRange:"",unitPrice:""}),[d,f]=E.useState(!1),[h,b]=E.useState(""),p=localStorage.getItem("token");E.useEffect(()=>{t&&l({fromRange:t.fromRange??"",toRange:t.toRange??"",unitPrice:t.unitPrice??""})},[t]);const w=C=>{const{name:_,value:R}=C.target;l(A=>({...A,[_]:R}))},j=async C=>{C.preventDefault(),f(!0),b("");try{const _=await Se.put(`/billranges/${t.id}`,i,{headers:{Authorization:`Bearer ${p}`}});_.data.success?(r&&r(_.data.data),a&&a()):b(_.data.message||"Failed to update bill range")}catch(_){console.error("Update error:",_),b("Error updating bill range")}finally{f(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-white/0 backdrop-blur-lg",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-6 w-[90%] max-w-md relative",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-100 mb-4",children:"Edit Bill Range"}),h&&e.jsx("p",{className:"text-red-500",children:h}),e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[e.jsx("input",{type:"number",name:"fromRange",value:i.fromRange,onChange:w,placeholder:"From Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsx("input",{type:"number",name:"toRange",value:i.toRange,onChange:w,placeholder:"To Range",className:"border rounded p-2 text-black dark:text-white border-purple-600",required:!0}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded bg-gray-400 hover:bg-gray-500 text-white",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d,className:"px-4 py-2 rounded bg-purple-600 hover:bg-purple-700 text-white",children:d?"Saving...":"Save"})]})]})]})})}function w_(){const{bill_id:t}=fn(),[a,r]=E.useState(!1),[i,l]=E.useState(null),[d,f]=E.useState([]),[h,b]=E.useState(!1),p=xr(),[w,j]=E.useState([]),[C,_]=E.useState(!1),[R,A]=E.useState(!1),[O,I]=E.useState(!1),[M,T]=E.useState(null),[B,H]=E.useState(null),[U,L]=E.useState(!1),P=async()=>{try{r(!0),l(null);const ie=await Se.get(`/billranges?bill_id=${t}`);if(ie.data.success&&Array.isArray(ie.data.data)){const X=ie.data.data.filter(q=>q.bill_id===t);f(X)}else f([])}catch(ie){console.error("Error loading bill ranges:",ie),l("Failed to load bill ranges. Please try again.")}finally{r(!1)}};E.useEffect(()=>{P()},[t]);const z=()=>{p("/bills-and-calculations")},K=async()=>{try{_(!0),l(null);const ie=await Se.get("/bills");ie.data.success&&Array.isArray(ie.data.data)?j(ie.data.data):j([])}catch(ie){console.error("Error loading bills:",ie),l("Failed to load bills. Please try again.")}finally{_(!1)}};E.useEffect(()=>{K()},[]);const te=ie=>{H(ie),L(!0)},V=async()=>{try{if(!B)return;await Se.delete(`/billranges/${B.id}`),le.success("Bill range deleted successfully"),L(!1),H(null),P()}catch(ie){console.error("Delete bill range error:",ie),le.error("Failed to delete bill range")}},ne=()=>{L(!1),H(null)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:b}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${h?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:z,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Sn,{size:25})}),e.jsx(ka,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:["Bill Ranges for "," ",(()=>{const ie=w.find(X=>X.id===t);return ie?ie.bill_name:"Loading..."})()]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 mb-3 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"Set Bill Range"})]}),a?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Ranges..."})]}):i?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[i,e.jsx("button",{onClick:P,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):d.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx($s,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No bill ranges found"}),e.jsx("p",{className:"text-sm",children:"Add new ranges for this bill type"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"From Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"To Range"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:d.map((ie,X)=>e.jsxs("tr",{onClick:()=>p(`/billprice/${t}/${ie.id}`),className:"cursor-pointer hover:bg-purple-100 dark:hover:bg-gray-700 transition",children:[e.jsx("td",{className:"px-4 py-4",children:X+1}),e.jsx("td",{className:"px-4 py-4",children:ie.fromRange}),e.jsx("td",{className:"px-4 py-4",children:ie.toRange}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:q=>{q.stopPropagation(),T(ie),I(!0)},className:"text-green-600 hover:text-green-900",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:q=>{q.stopPropagation(),te(ie)},className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},ie.id))})]})})]})]})})]}),e.jsx(b_,{show:R,onClose:()=>A(!1),onSave:async ie=>{try{(await Se.post("/billranges",{...ie,bill_id:t})).data.success?(le.success("Bill range added successfully!"),A(!1),P()):le.error("Failed to add bill range.")}catch(X){console.error("Error adding bill range:",X),le.error("Error adding bill range.")}}}),O&&e.jsx(v_,{range:M,onClose:()=>I(!1),onUpdated:()=>{le.success("Bill range updated!"),P()}}),U&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this bill range?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:ne,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:V,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function N_({bill_id:t,billrange_id:a,onClose:r,onCreated:i}){const[l,d]=E.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,unitprice:"",fixedamount:""}),[f,h]=E.useState(!1),[b,p]=E.useState("");Tr.useEffect(()=>{},[t,a]);const w=C=>{const{name:_,value:R}=C.target;d(A=>({...A,[_]:R}))},j=async C=>{C.preventDefault(),h(!0),p("");const _={...l,bill_id:t,billrange_id:a};try{const R=await Se.post("/billprice",_,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`}});R.data.success?(i?.(R.data.data),d({year:"",month:"",unitprice:"",fixedamount:""}),r()):p(R.data.message||"Failed to save bill price")}catch(R){console.error("Error saving bill price:",R),console.error("Error response:",R.response?.data),R.response?.status===400?p(R.response.data?.message||"Bad request. Please check all required fields."):R.response?.status===403?p("Access denied. Please check your login or permissions."):p("Error saving bill price. Please try again.")}finally{h(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Create Bill Price"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(mr,{size:20})})]}),b&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:b}),e.jsxs("form",{onSubmit:j,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:l.year,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2025",max:"2030"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:l.month,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(C=>e.jsx("option",{value:C,children:C},C))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:l.unitprice,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:l.fixedamount,onChange:w,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f||!t||!a,className:`px-4 py-2 rounded-lg text-white transition ${f||!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:f?"Saving...":"Save"})]})]})]})})}function k_({bill_id:t,billrange_id:a,billPrice:r,onClose:i,onUpdated:l}){const[d,f]=E.useState({year:"",month:"",unitprice:"",fixedamount:""}),[h,b]=E.useState(!1),[p,w]=E.useState("");E.useEffect(()=>{r&&f({year:r.year||"",month:r.month||"",unitprice:r.unitprice||"",fixedamount:r.fixedamount||""})},[r]),E.useEffect(()=>{},[t,a,r,d]);const j=_=>{const{name:R,value:A}=_.target;f(O=>({...O,[R]:A}))},C=async _=>{if(_.preventDefault(),b(!0),w(""),!r||!r.id){w("No bill price selected for editing"),b(!1);return}const R={...d,bill_id:t,billrange_id:a,id:r.id};try{const A=await Se.put(`/billprice/${r.id}`,R,{headers:{"Content-Type":"application/json"}});A.data.success?(l?.(A.data.data),i()):w(A.data.message||"Failed to update bill price")}catch(A){console.error("Error updating bill price:",A),console.error("Error response:",A.response?.data),A.response?.status===400?w(A.response.data?.message||"Bad request. Please check all required fields."):A.response?.status===403?w("Access denied. Please check your login or permissions."):A.response?.status===404?w("Bill price not found. It may have been deleted."):w("Error updating bill price. Please try again.")}finally{b(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex justify-center items-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 w-full max-w-md shadow-2xl relative",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Bill Price"}),e.jsx("button",{onClick:i,className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:e.jsx(mr,{size:20})})]}),p&&e.jsx("div",{className:"bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 px-4 py-3 rounded mb-4",children:p}),e.jsxs("form",{onSubmit:C,className:"flex flex-col gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:d.year,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter year",required:!0,min:"2000",max:"2100"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Month *"}),e.jsxs("select",{name:"month",value:d.month,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",required:!0,children:[e.jsx("option",{value:"",children:"Select month"}),["January","February","March","April","May","June","July","August","September","October","November","December"].map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Unit Price (Rs) *"}),e.jsx("input",{type:"number",name:"unitprice",value:d.unitprice,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter unit price",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Fixed Amount (Rs) *"}),e.jsx("input",{type:"number",name:"fixedamount",value:d.fixedamount,onChange:j,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 mt-1 bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter fixed amount",required:!0,min:"0",step:"0.01"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-4",children:[e.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 rounded-lg bg-gray-400 hover:bg-gray-500 text-white transition",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!t||!a||!r,className:`px-4 py-2 rounded-lg text-white transition ${h||!t||!a||!r?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700"}`,children:h?"Updating...":"Update"})]})]})]})})}function j_(){const{bill_id:t,billrange_id:a}=fn(),r=xr(),[i,l]=E.useState([]),[d,f]=E.useState(!1),[h,b]=E.useState(null),[p,w]=E.useState(!1),[j,C]=E.useState(!1),[_,R]=E.useState(!1),[A,O]=E.useState(null);Tr.useEffect(()=>{},[t,a]);const I=async()=>{try{f(!0),b(null);const P=await Se.get(`/billprice?bill_id=${t}&billrange_id=${a}`);P.data.success?l(P.data.data||[]):(l([]),b(P.data.message||"Failed to load bill prices"))}catch(P){console.error("Error loading bill prices:",P),b(P.response?.data?.message||"Failed to load bill prices. Please try again.")}finally{f(!1)}};E.useEffect(()=>{t&&a?I():b("Missing bill_id or billrange_id in URL parameters")},[t,a]);const M=()=>{r(-1)},T=()=>{I(),C(!1),le.success("Bill price created successfully!")},B=P=>{O(P),R(!0)},H=()=>{I(),R(!1),O(null),le.success("Updated!")},U=()=>{R(!1),O(null)},L=async P=>{if(window.confirm("Are you sure you want to delete this bill price?"))try{await Se.delete(`/billprice/${P}`),le.success("Bill price deleted successfully"),I()}catch(z){console.error("Error deleting bill price:",z),le.error("Failed to delete bill price")}};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:w}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${p?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:M,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition",children:e.jsx(Sn,{size:25})}),e.jsx(yr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Prices"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>C(!0),disabled:!t||!a,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${!t||!a?"bg-purple-400 cursor-not-allowed":"bg-purple-600 hover:bg-purple-700 hover:scale-105"}`,children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"Set Bill Price"})]}),d?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Bill Prices..."})]}):h?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[h,e.jsx("button",{onClick:I,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):i.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(yr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Bill Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new prices for this bill range."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Unit Price (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Fixed Amount (Rs)"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.map((P,z)=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-4 py-4",children:z+1}),e.jsx("td",{className:"px-4 py-4",children:P.year}),e.jsx("td",{className:"px-4 py-4",children:P.month}),e.jsx("td",{className:"px-4 py-4",children:P.unitprice}),e.jsx("td",{className:"px-4 py-4",children:P.fixedamount}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>B(P),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300",title:"Edit",children:e.jsx(ja,{size:20})}),e.jsx("button",{onClick:()=>L(P.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",title:"Delete",children:e.jsx(Fr,{size:20})})]})})]},P.id))})]})})]})]})})]}),j&&e.jsx(N_,{onClose:()=>C(!1),onCreated:T,billrange_id:a,bill_id:t}),_&&A&&e.jsx(k_,{onClose:U,onUpdated:H,billrange_id:a,bill_id:t,billPrice:A}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function E_(){const[t,a]=E.useState(!1),[r,i]=E.useState(0),[l,d]=E.useState(!0),[f,h]=E.useState({assignedApartments:0,pendingTasks:0,completedTasks:0,maintenanceRequests:0,assignedBills:0,totalComplaints:0,complaintCategories:0}),{auth:b}=E.useContext(Ir);E.useEffect(()=>{b?.user?.id&&(p(),w())},[b?.user?.id]);const p=async()=>{try{d(!0);const C=await Se.get(`/user-apartments/users/${b.user.id}/apartments`);if(C.data.success){const _=C.data.data||[];i(_.length),h(R=>({...R,assignedApartments:_.length}))}else le.error("Failed to load assigned apartments")}catch(C){console.error("Error fetching assigned apartments:",C),le.error("Error loading assigned apartments")}finally{d(!1)}},w=async()=>{try{let C=12,_=45,R=8,A=0,O=0,I=0;try{let M=null;try{M=await Se.get(`/complaints?assigned_to=${b.user.id}`)}catch{try{M=await Se.get(`/complaints?user_id=${b.user.id}`)}catch{try{M=await Se.get("/complaints")}catch{M=null}}}const T=M&&(Array.isArray(M.data.data)?M.data.data:Array.isArray(M.data)?M.data:[]);O=T.length;const B=new Set;T.forEach(H=>{H.category?B.add(H.category):H.category_id&&B.add(H.category_id)}),I=B.size}catch(M){console.error("Error fetching complaints:",M)}try{let M=null;try{M=await Se.get(`/user-bills/users/${b.user.id}/bills`)}catch{try{M=await Se.get(`/bills?assigned_to=${b.user.id}`)}catch{M=null}}A=(M&&(Array.isArray(M.data.data)?M.data.data:Array.isArray(M.data)?M.data:[])).length}catch(M){console.error("Error fetching assigned bills:",M)}h(M=>({...M,pendingTasks:C,completedTasks:_,maintenanceRequests:R,assignedBills:A,totalComplaints:O,complaintCategories:I}))}catch(C){console.error("Error fetching dashboard stats:",C)}},j=C=>C.toLocaleString();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ur,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Dashboard"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Welcome back! Here's your overview for today."})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Active Apartments"}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Ds,{size:20,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-3xl lg:text-4xl font-bold text-gray-900 dark:text-white",children:j(r)}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-2",children:"All apartments are active"})]}),e.jsxs("div",{className:"flex items-center mt-4",children:[e.jsx(S6,{size:14,className:"text-green-500 mr-1"}),e.jsx("span",{className:"text-xs lg:text-sm text-green-500",children:"All well maintained"})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Your Assigned Totals"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Assigned Bills"}),e.jsx("div",{className:"text-3xl font-bold text-indigo-600 dark:text-indigo-400 mb-1",children:j(f.assignedBills)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Bills currently assigned to you"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 text-center",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-2",children:"Total Complaints"}),e.jsx("div",{className:"text-3xl font-bold text-red-600 dark:text-red-400 mb-1",children:j(f.totalComplaints)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Complaints assigned to you"})]})]})]})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function C_(){const[t,a]=E.useState(!1),[r,i]=E.useState(null),[l,d]=E.useState(!0),[f,h]=E.useState(!1),[b,p]=E.useState({firstname:"",lastname:"",country:"",mobile:""}),{auth:w}=E.useContext(Ir);E.useEffect(()=>{j()},[]);const j=async()=>{try{d(!0);const I=await Se.get("/auth/me");if(I.data.success&&I.data.data&&I.data.data.length>0){const M=I.data.data[0];i(M),p({firstname:M.firstname||"",lastname:M.lastname||"",country:M.country||"",mobile:M.mobile||""})}else le.error("No profile data found")}catch(I){console.error("Error fetching profile:",I),le.error("Failed to load profile")}finally{d(!1)}},C=()=>{h(!0)},_=()=>{h(!1),r&&p({firstname:r.firstname||"",lastname:r.lastname||"",country:r.country||"",mobile:r.mobile||""})},R=async()=>{try{const I=await Se.put(`/auth/users/${r.id}`,b);I.data.success&&(i(M=>({...M,...I.data.data})),h(!1),le.success("Profile updated successfully"),j())}catch(I){console.error("Error updating profile:",I),le.error(I.response?.data?.message||"Failed to update profile")}},A=I=>{const{name:M,value:T}=I.target;p(B=>({...B,[M]:T}))},O=I=>new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return l?e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):r?e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"Profile"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:_,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(mr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:R,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(yf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save"})]})]}):e.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(ja,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsxs("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:[r.firstname?.charAt(0)?.toUpperCase(),r.lastname?.charAt(0)?.toUpperCase()]})}),e.jsxs("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:[r.firstname," ",r.lastname]}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:r.role}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Nl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",O(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"})]})]})})}),e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"First Name"}),f?e.jsx("input",{type:"text",name:"firstname",value:b.firstname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.firstname||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Name"}),f?e.jsx("input",{type:"text",name:"lastname",value:b.lastname,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.lastname||"Not set"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(lo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(Ec,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(io,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 items-center",children:[e.jsx(pc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Role"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:r.role})]})]})]})})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]}):e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"})]})})}function __(){const[t,a]=E.useState([]),[r,i]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState(!1),[b,p]=E.useState(!1),{auth:w}=E.useContext(Ir),j=xr(),C=async()=>{try{i(!0);const I=await Se.get(`/user-apartments/users/${w.user.id}/apartments`);I.data.success?a(I.data.data||[]):(le.error("Failed to load apartments"),a([]))}catch(I){console.error("Error fetching apartments:",I),le.error("Error loading your apartments"),a([])}finally{i(!1)}};E.useEffect(()=>{w?.user?.id&&C()},[w?.user?.id]);const _=t.filter(I=>I.name?.toLowerCase().includes(l.toLowerCase())||I.address?.toLowerCase().includes(l.toLowerCase())||I.city?.toLowerCase().includes(l.toLowerCase())),R=I=>{try{return new Date(I).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=I=>I?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",O=I=>{j(`/floors/${I}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>p(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all apartments assigned to you"})]})})}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(za,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Apartments"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all apartments assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Assigned"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:t.length})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search apartments by name, address, or city...",value:l,onChange:I=>d(I.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading apartments..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(za,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching apartments found":"No apartments assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any apartments yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:_.map(I=>e.jsxs("div",{onClick:()=>O(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700 active:bg-gray-50 dark:active:bg-gray-600 cursor-pointer",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ur,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-start space-x-2 text-gray-600 dark:text-gray-300 mb-3",children:[e.jsx(lo,{size:14,className:"mt-0.5 flex-shrink-0"}),e.jsxs("span",{className:"text-sm line-clamp-2",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(ei,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(za,{size:16,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white text-sm",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",R(I.assigned_at)]})})]},I.id))}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(I=>e.jsxs("div",{onClick:()=>O(I.id),className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700 cursor-pointer hover:border-purple-300 dark:hover:border-purple-600",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Ur,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:I.name}),e.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${A(I.is_active)}`,children:I.is_active?"Active":"Inactive"})]})]})}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600 dark:text-gray-300 mb-4",children:[e.jsx(lo,{size:16}),e.jsxs("span",{className:"text-sm",children:[I.address,", ",I.city]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(ei,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Houses"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.houses||0})]}),e.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-600 rounded-lg",children:[e.jsx(za,{size:20,className:"mx-auto mb-1 text-gray-500 dark:text-gray-400"}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Floors"}),e.jsx("div",{className:"font-semibold text-gray-900 dark:text-white",children:I.floors||0})]})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",R(I.assigned_at)]})})]},I.id))})]})}),_.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Ns,{size:20})})})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function A_({bill_id:t,onClose:a,onSuccess:r}){const[i,l]=E.useState({year:new Date().getFullYear(),month:new Date().getMonth()+1,amount:""}),[d,f]=E.useState(!1),[h,b]=E.useState({}),p=_=>{const{name:R,value:A}=_.target;l(O=>({...O,[R]:A})),h[R]&&b(O=>({...O,[R]:""}))},w=()=>{const _={};return(!i.year||i.year<2e3||i.year>2100)&&(_.year="Please enter a valid year (2000-2100)"),(!i.month||i.month<1||i.month>12)&&(_.month="Please select a valid month (1-12)"),(!i.amount||parseFloat(i.amount)<=0)&&(_.amount="Please enter a valid amount"),b(_),Object.keys(_).length===0},j=async _=>{if(_.preventDefault(),!!w())try{f(!0);const R=await Se.post("/shared-value-prices",{bill_id:t,year:parseInt(i.year),month:parseInt(i.month),amount:parseFloat(i.amount)});R.data.success?r():le.error(R.data.message||"Failed to create shared value price")}catch(R){console.error("Error creating shared value price:",R),R.response?.data?.message?le.error(R.response.data.message):le.error("Failed to create shared value price")}finally{f(!1)}},C=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-md relative",children:[e.jsx("button",{onClick:a,className:"absolute top-4 right-4 text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl",children:""}),e.jsx("h2",{className:"text-xl font-semibold mb-4 text-gray-800 dark:text-white",children:"Set Shared Value Price"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",name:"year",value:i.year,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.year?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,min:"2000",max:"2100"}),h.year&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.year})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month *"}),e.jsx("select",{name:"month",value:i.month,onChange:p,className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.month?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,children:C.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))}),h.month&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.month})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount (LKR) *"}),e.jsx("input",{type:"number",name:"amount",value:i.amount,onChange:p,step:"0.01",min:"0",className:`w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent ${h.amount?"border-red-500":"border-gray-300 dark:border-gray-600"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"0.00"}),h.amount&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:h.amount})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),e.jsxs("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 flex items-center space-x-2",children:[d&&e.jsx(Xt,{size:16,className:"animate-spin"}),e.jsx("span",{children:d?"Creating...":"Create"})]})]})]})]})})}function S_(){const{bill_id:t}=fn(),a=xr(),[r,i]=E.useState([]),[l,d]=E.useState(null),[f,h]=E.useState(!1),[b,p]=E.useState(!1),[w,j]=E.useState(null),[C,_]=E.useState(!1),[R,A]=E.useState(!1),[O,I]=E.useState(!1),[M,T]=E.useState(null),[B,H]=E.useState(!1),[U,L]=E.useState(null),P=async()=>{try{p(!0);const we=await Se.get(`/bills/${t}`);we.data.success&&d(we.data.data)}catch(we){console.error("Error loading bill info:",we)}finally{p(!1)}},z=async()=>{try{if(h(!0),j(null),!t){j("Bill ID is required");return}const we=await Se.get(`/shared-value-prices/bill/${t}`);we.data.success?i(we.data.data||[]):(j("Failed to load shared value prices"),i([]))}catch(we){console.error("Error loading shared value prices:",we),j("Failed to load shared value prices. Please try again."),i([])}finally{h(!1)}};E.useEffect(()=>{t&&(P(),z())},[t]);const K=()=>{a(-1)},te=()=>{A(!1),le.success("Shared value price created successfully"),z()};E.useEffect(()=>{t&&(P(),z())},[t]);const V=()=>{z(),I(!1),T(null),le.success("Shared value price updated successfully")},ne=we=>{T(we),I(!0)},ie=we=>{L(we),H(!0)},X=async()=>{try{if(!U)return;await Se.delete(`/shared-value-prices/${U.id}`),le.success("Shared value price deleted successfully"),H(!1),L(null),z()}catch(we){console.error("Delete shared value price error:",we),le.error("Failed to delete shared value price")}},q=()=>{H(!1),L(null)},ce=we=>["January","February","March","April","May","June","July","August","September","October","November","December"][we-1]||we;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(vr,{onCollapse:_}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${C?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:K,className:"p-1 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-purple-700 transition mr-3",children:e.jsx(Sn,{size:25})}),e.jsx(yr,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Shared Value Bill Amounts"}),l&&e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[l.bill_name," - ",l.billtype]})]})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6 text-gray-700 dark:text-gray-300",children:[e.jsxs("button",{onClick:()=>A(!0),disabled:!t,className:`flex items-center gap-2 mb-6 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white ${t?"bg-purple-600 hover:bg-purple-700 hover:scale-105":"bg-purple-400 cursor-not-allowed"}`,children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"Set Shared Value Price"})]}),f?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading Shared Value Prices..."})]}):w?e.jsxs("div",{className:"text-center py-12 text-red-600 dark:text-red-400",children:[w,e.jsx("button",{onClick:z,className:"ml-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]}):r.length===0?e.jsxs("div",{className:"text-center py-12 text-gray-600 dark:text-gray-300",children:[e.jsx(yr,{size:48,className:"mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No Shared Value Prices Found"}),e.jsx("p",{className:"text-sm",children:"Add new shared value prices for this bill."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full table-auto",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"No"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Month"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created At"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.map((we,oe)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:oe+1}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:we.year}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:ce(we.month)}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-semibold text-green-600 dark:text-green-400",children:we.amount}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-600 dark:text-gray-300",children:new Date(we.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>ne(we),className:"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 transition-colors",title:"Edit",children:e.jsx(ja,{size:18})}),e.jsx("button",{onClick:()=>ie(we),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 transition-colors",title:"Delete",children:e.jsx(Fr,{size:18})})]})})]},we.id))})]})})]})]})})]}),R&&e.jsx(A_,{bill_id:t,onClose:()=>A(!1),onSuccess:te}),O&&M&&e.jsx(EditSharedValuePriceModal,{price:M,onClose:()=>{I(!1),T(null)},onSuccess:V}),B&&U&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete the shared value price for ",ce(U.month)," ",U.year,"?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:q,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:X,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function iw({payment:t,onClose:a,onUpdate:r}){const[i,l]=E.useState({additionalAmount:0,payment_status:"Pending",paid_at:""}),[d,f]=E.useState(!1),h=!!t?.generateMeasurable_bills_id;if(E.useEffect(()=>{t&&l({additionalAmount:0,payment_status:t.payment_status||"Pending",paid_at:t.paid_at?new Date(t.paid_at).toISOString().split("T")[0]:""})},[t,h]),!t)return null;const p=h?parseFloat(t.generated_total_amount)||parseFloat(t.unitPrice)||0:parseFloat(t.unitPrice)||0,w=parseFloat(t.paidAmount)||0,j=parseFloat(t.pendingAmount)||0,C=w+parseFloat(i.additionalAmount||0),_=p-C,R=M=>{const T=typeof M=="string"?parseFloat(M):M;return isNaN(T)?"0.00":T.toFixed(2)},A=async M=>{M.preventDefault();const T=parseFloat(i.additionalAmount||0);if(T<0){le.error("Payment amount cannot be negative");return}if(T>j){le.error(`Payment amount cannot exceed pending amount of $${R(j)}`);return}let B=i.payment_status;C>=p?B="Paid":C>0?B="Partial":B="Pending";try{f(!0);const H={payment_status:B,paidAmount:C};B==="Paid"&&i.paid_at?H.paid_at=i.paid_at:B==="Paid"&&!i.paid_at&&(H.paid_at=new Date().toISOString().split("T")[0]);const U=await Se.patch(`/bill-payments/${t.id}/status`,H);U.data.success&&(le.success("Payment updated successfully"),r(U.data.data))}catch(H){console.error("Error updating payment:",H),console.error("Error details:",H.response?.data),le.error(`Failed to update payment: ${H.response?.data?.message||H.message}`)}finally{f(!1)}},O=M=>{const T=parseFloat(M)||0,H=Math.min(T,j),U=w+H;let L="Pending";U>=p?L="Paid":U>0&&(L="Partial"),l(P=>({...P,additionalAmount:H,payment_status:L}))},I=_<=.01;return e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ka,{className:"text-purple-600 dark:text-purple-400",size:24}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Update Payment"}),h&&e.jsx("span",{className:"text-xs bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100 px-2 py-1 rounded-full",children:"Measurable"})]}),e.jsx("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors",children:e.jsx(mr,{size:20})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-3",children:"Payment Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.bill_name," (",t.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.apartment_name," - Floor ",t.floor_id," - House ",t.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsxs("span",{className:"font-medium text-gray-900 dark:text-white",children:[t.month," ",t.year]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill Type:"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:h?"Measurable Bill":"Shared Bill"})]})]})]}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"Current Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",R(w)]})]}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-red-800 dark:text-red-300 text-sm font-medium",children:"Current Pending"}),e.jsxs("div",{className:"text-red-600 dark:text-red-400 text-lg font-bold",children:["$",R(j)]})]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${h?"bg-blue-50 dark:bg-blue-900/20":"bg-purple-50 dark:bg-purple-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${h?"text-blue-800 dark:text-blue-300":"text-purple-800 dark:text-purple-300"}`,children:h?"Total Amount":"Unit Price"}),e.jsxs("div",{className:`text-lg font-bold ${h?"text-blue-600 dark:text-blue-400":"text-purple-600 dark:text-purple-400"}`,children:["$",R(p)]}),h&&e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:"Measurable Bill - Based on consumption"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0",max:j,value:i.additionalAmount,onChange:M=>O(M.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white text-gray-700 bg-gray-100",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",R(j)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["$",R(i.additionalAmount)," being paid now"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 rounded-lg p-3",children:[e.jsx("div",{className:"text-green-800 dark:text-green-300 text-sm font-medium",children:"New Total Paid"}),e.jsxs("div",{className:"text-green-600 dark:text-green-400 text-lg font-bold",children:["$",R(C)]}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:["(+$",R(i.additionalAmount),")"]})]}),e.jsxs("div",{className:`rounded-lg p-3 ${_>0&&_<j?"bg-orange-50 dark:bg-orange-900/20":I?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"}`,children:[e.jsx("div",{className:`text-sm font-medium ${_>0&&_<j?"text-orange-800 dark:text-orange-300":I?"text-green-800 dark:text-green-300":"text-red-800 dark:text-red-300"}`,children:"New Pending Amount"}),e.jsxs("div",{className:`text-lg font-bold ${_>0&&_<j?"text-orange-600 dark:text-orange-400":I?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:["$",R(_)]}),I?e.jsx("p",{className:"text-xs text-green-600 dark:text-green-400 mt-1",children:"Bill will be fully paid! "}):_<j?e.jsxs("p",{className:"text-xs text-orange-600 dark:text-orange-400 mt-1",children:["$",R(j-_)," will be paid"]}):null]})]}),e.jsxs("div",{className:"rounded-lg p-3 bg-gray-50 dark:bg-gray-700",children:[e.jsx("div",{className:"text-gray-800 dark:text-gray-300 text-sm font-medium",children:"New Payment Status"}),e.jsx("div",{className:`text-lg font-bold ${i.payment_status==="Paid"?"text-green-600 dark:text-green-400":i.payment_status==="Partial"?"text-blue-600 dark:text-blue-400":"text-yellow-600 dark:text-yellow-400"}`,children:i.payment_status}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This will update automatically based on payment amount"})]}),(i.payment_status==="Paid"||I)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:i.paid_at,onChange:M=>l(T=>({...T,paid_at:M.target.value})),className:"w-full pl-10 pr-4 py-3 border  text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700",required:i.payment_status==="Paid"||I})]}),!i.paid_at&&e.jsx("p",{className:"text-xs text-yellow-600 dark:text-yellow-400 mt-1",children:"If no date is selected, current date will be used"})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-3 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:d,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:d||i.additionalAmount<=0,className:"px-6 py-3 text-sm font-medium text-white bg-purple-600 rounded-lg hover:bg-purple-700 disabled:bg-purple-400 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{children:"Updating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gs,{size:16}),e.jsxs("span",{children:["Pay $",R(i.additionalAmount)]})]})})]})]})]})]})})}function T_(){const[t,a]=E.useState([]),[r,i]=E.useState(!1),[l,d]=E.useState({}),[f,h]=E.useState({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),[b,p]=E.useState([]),[w,j]=E.useState([]),[C,_]=E.useState([]),[R,A]=E.useState([]),[O,I]=E.useState(""),[M,T]=E.useState(!1),[B,H]=E.useState(!1),[U,L]=E.useState(!1),[P,z]=E.useState(!1),[K,te]=E.useState(null),[V,ne]=E.useState(!1),[ie,X]=E.useState(null),[q,ce]=E.useState(!1),[we,oe]=E.useState(null),fe=async()=>{try{const pe=await Se.get("/bills");pe.data.success&&A(pe.data.data||[])}catch(pe){console.error("Error loading bills:",pe),le.error("Failed to load bills")}},re=async()=>{try{H(!0);const pe=await Se.get("/apartments");pe.data.success?p(pe.data.data||[]):p([])}catch(pe){console.error("Error loading apartments:",pe),le.error("Failed to load apartments"),p([])}finally{H(!1)}},Q=async pe=>{if(!pe){j([]),_([]);return}try{L(!0);const lt=await Se.get(`/floors?apartment_id=${pe}`);lt.data.success?j(lt.data.data||[]):j([])}catch(lt){console.error("Error loading floors:",lt),le.error("Failed to load floors"),j([])}finally{L(!1)}},Y=async pe=>{if(!pe||!f.apartment_id){_([]);return}try{z(!0);const lt=await Se.get(`/houses?floor_id=${pe}&apartment_id=${f.apartment_id}`);lt.data.success?_(lt.data.data||[]):_([])}catch(lt){console.error("Error loading houses:",lt),le.error("Failed to load houses"),_([])}finally{z(!1)}},ae=async()=>{try{i(!0);const pe=new URLSearchParams;Object.entries(f).forEach(([st,jt])=>{jt&&pe.append(st,jt)});const lt=await Se.get(`/bill-payments?${pe}`);lt.data.success&&a(lt.data.data)}catch(pe){console.error("Error loading payments:",pe),console.error("Payment loading error details:",pe.response?.data),le.error("Failed to load payments. Check console for details.")}finally{i(!1)}},se=async()=>{try{const pe=await Se.get("/bill-payments/summary");if(pe.data.success){const lt={};pe.data.data.forEach(st=>{lt[st.payment_status]=st}),d(lt)}}catch(pe){console.error("Error loading summary:",pe)}};E.useEffect(()=>{fe(),re(),se(),ae()},[]),E.useEffect(()=>{ae()},[f]);const Z=pe=>{h({billtype:pe,apartment_id:"",floor_id:"",house_id:"",payment_status:f.payment_status,month:f.month,year:f.year})},Re=pe=>{h(lt=>({...lt,apartment_id:pe,floor_id:"",house_id:""})),Q(pe)},je=pe=>{h(lt=>({...lt,floor_id:pe,house_id:""})),Y(pe)},Ue=pe=>{h(lt=>({...lt,house_id:pe}))},Me=(pe,lt)=>{h(st=>({...st,[pe]:lt}))},at=pe=>{oe(pe),ce(!0)},ye=async()=>{if(we)try{X(we.id),(await Se.delete(`/bill-payments/${we.id}`)).data.success&&(le.success("Payment deleted successfully"),a(lt=>lt.filter(st=>st.id!==we.id)),se())}catch(pe){console.error("Error deleting payment:",pe),le.error(pe.response?.data?.message||"Failed to delete payment")}finally{X(null),ce(!1),oe(null)}},Ae=async pe=>{try{const{jsPDF:lt}=await tw(async()=>{const{jsPDF:St}=await import("./jspdf.es.min-YhANEArI.js").then(wt=>wt.j);return{jsPDF:St}},[]),st=new lt("p","mm","a4"),jt=st.internal.pageSize.getWidth();st.setFontSize(18),st.setFont(void 0,"bold"),st.text("INVOICE",jt/2,20,{align:"center"});const At=String(new Date().getTime()%1e3).padStart(3,"0"),Dt=new Date().toISOString().split("T")[0];st.setFontSize(10),st.setFont(void 0,"normal"),st.text(`Invoice No: ${At}`,15,32),st.text(`Print Date: ${Dt}`,jt-15,32,{align:"right"}),st.setFontSize(11),st.text(`Apartment: ${pe.apartment_name||""}`,15,44),pe.floor_id&&st.text(`Floor: ${pe.floor_id}`,15,52),pe.house_number&&st.text(`House: ${pe.house_number}`,15,60);const or=74,Lt=[15,110,150];st.setDrawColor(0),st.setFillColor(240,240,240),st.rect(15,or-8,jt-30,8,"F"),st.setFontSize(11),st.setTextColor(40),st.text("Description",Lt[0],or-2),st.text("Due Amount",Lt[1],or-2),st.text("Paid Amount",Lt[2],or-2);const qt=pe.bill_name||pe.bill_id||"Charge",Ft=Number(pe.unitPrice??Number(pe.paidAmount||0)+Number(pe.pendingAmount||0)),Ye=Number(pe.paidAmount||0),Et=or+8;st.setFontSize(10),st.setTextColor(0),st.text(String(qt),Lt[0],Et),st.text(Ft.toFixed(2),Lt[1],Et),st.text(Ye.toFixed(2),Lt[2],Et);const Nt=Et+18;st.setFont(void 0,"bold"),st.text("Total Paid:",Lt[1],Nt),st.text(Ye.toFixed(2),Lt[2],Nt),st.setFont(void 0,"normal"),st.setFontSize(10),st.text("Thank you for your business!",15,Nt+18);const ot=`INVOICE_${At}_${(pe.apartment_name||"apartment").replace(/\s+/g,"_")}_${pe.month||""}_${pe.year||""}.pdf`;st.save(ot),le.success("Invoice downloaded")}catch(lt){console.error("Invoice generation failed",lt),le.error("Failed to generate invoice")}},Fe=()=>{h({billtype:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"",month:"",year:new Date().getFullYear()}),I(""),j([]),_([])},Ce=t.filter(pe=>{const lt=O.toLowerCase();return pe.bill_name?.toLowerCase().includes(lt)||pe.apartment_name?.toLowerCase().includes(lt)||pe.house_number?.toString().includes(O)||pe.month?.toLowerCase().includes(lt)}),Je=pe=>{switch(pe){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},be=["January","February","March","April","May","June","July","August","September","October","November","December"],dt=[...new Set(R.map(pe=>pe.billtype))].filter(pe=>pe),me=()=>{ne(!1),te(null)},Pe=pe=>{a(lt=>lt.map(st=>st.id===pe.id?pe:st)),me(),se()};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:T}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${M?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Review"})]})}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-7 gap-4 mb-4",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search payments...",value:O,onChange:pe=>I(pe.target.value),className:"w-full text-gray-700 pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.billtype,onChange:pe=>Z(pe.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Bill Types"}),dt.map(pe=>e.jsx("option",{value:pe,children:pe},pe))]})}),e.jsxs("div",{children:[e.jsxs("select",{value:f.apartment_id,onChange:pe=>Re(pe.target.value),disabled:B,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Apartments"}),b.map(pe=>e.jsx("option",{value:pe.id,children:pe.name},pe.id))]}),B&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.floor_id,onChange:pe=>je(pe.target.value),disabled:!f.apartment_id||U,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Floors"}),w.map(pe=>e.jsxs("option",{value:pe.id,children:["Floor ",pe.floor_id]},pe.id))]}),U&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading floors..."})]}),e.jsxs("div",{children:[e.jsxs("select",{value:f.house_id,onChange:pe=>Ue(pe.target.value),disabled:!f.floor_id||P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"All Houses"}),C.map(pe=>e.jsxs("option",{value:pe.id,children:["House ",pe.house_id]},pe.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Loading houses..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[e.jsx("div",{children:e.jsxs("select",{value:f.payment_status,onChange:pe=>Me("payment_status",pe.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"}),e.jsx("option",{value:"Failed",children:"Failed"}),e.jsx("option",{value:"Refunded",children:"Refunded"})]})}),e.jsx("div",{children:e.jsxs("select",{value:f.month,onChange:pe=>Me("month",pe.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months"}),be.map(pe=>e.jsx("option",{value:pe,children:pe},pe))]})}),e.jsx("div",{children:e.jsx("input",{type:"number",value:f.year,onChange:pe=>Me("year",pe.target.value),min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})}),e.jsx("div",{children:e.jsx("button",{onClick:Fe,className:"w-full px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear All Filters"})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",Ce.length," of ",t.length," payments"]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(id,{size:16}),e.jsxs("span",{children:[Ce.length," payments found"]})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading payments..."})]}):Ce.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Gs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No payments found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t.length===0?"No payments have been recorded yet.":"No payments match your search criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill & Location"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amounts"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:Ce.map(pe=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[pe.bill_name," (",pe.billtype,")"]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Ri,{size:12,className:"inline mr-1"}),pe.apartment_name,e.jsx(Ur,{size:12,className:"inline mx-1"}),"Floor ",pe.floor_id," - House ",pe.house_number]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[pe.month," ",pe.year]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",pe.paidAmount]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",pe.pendingAmount]}),e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 text-xs",children:["Unit Price: $",pe.unitPrice]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${Je(pe.payment_status)}`,children:pe.payment_status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:pe.paid_at?new Date(pe.paid_at).toLocaleDateString():new Date(pe.created_at).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>Ae(pe),className:"text-gray-600 hover:text-gray-900 dark:text-gray-300 dark:hover:text-white p-2 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-900/30 transition-all duration-200",title:"Download Invoice",children:e.jsx(Cl,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Download Invoice",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]}),e.jsxs("div",{className:"relative group",children:[e.jsx("button",{onClick:()=>at(pe),disabled:ie===pe.id,className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 p-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/30 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Payment",children:ie===pe.id?e.jsx("div",{className:"w-4 h-4 border-2 border-red-600 border-t-transparent rounded-full animate-spin"}):e.jsx(Fr,{size:18})}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-2 py-1 text-xs text-white bg-gray-800 dark:bg-gray-700 rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap pointer-events-none",children:["Delete Payment",e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-800 dark:border-t-gray-700"})]})]})]})})]},pe.id))})]})})})]})})]}),V&&e.jsx(iw,{payment:K,onClose:me,onUpdate:Pe}),q&&we&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-red-100 dark:bg-red-900/30 p-2 rounded-lg mr-3",children:e.jsx(Fr,{className:"text-red-600 dark:text-red-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Delete Payment"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to delete this payment record? This action cannot be undone."}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-red-800 dark:text-red-300 mb-2",children:"Payment Details"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Bill:"}),e.jsxs("span",{className:"font-medium",children:[we.bill_name," (",we.billtype,")"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Location:"}),e.jsxs("span",{className:"font-medium",children:[we.apartment_name," - House ",we.house_number]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount:"}),e.jsxs("span",{className:"font-medium text-red-600 dark:text-red-400",children:["$",we.paidAmount," paid"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`font-medium ${we.payment_status==="Paid"?"text-green-600":"text-yellow-600"}`,children:we.payment_status})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>{ce(!1),oe(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",disabled:ie===we.id,children:"Cancel"}),e.jsx("button",{onClick:ye,disabled:ie===we.id,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center",children:ie===we.id?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Deleting..."]}):"Delete Payment"})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}var Ct;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ct||(Ct={}));var Rb=new Map([[Ct.QR_CODE,"QR_CODE"],[Ct.AZTEC,"AZTEC"],[Ct.CODABAR,"CODABAR"],[Ct.CODE_39,"CODE_39"],[Ct.CODE_93,"CODE_93"],[Ct.CODE_128,"CODE_128"],[Ct.DATA_MATRIX,"DATA_MATRIX"],[Ct.MAXICODE,"MAXICODE"],[Ct.ITF,"ITF"],[Ct.EAN_13,"EAN_13"],[Ct.EAN_8,"EAN_8"],[Ct.PDF_417,"PDF_417"],[Ct.RSS_14,"RSS_14"],[Ct.RSS_EXPANDED,"RSS_EXPANDED"],[Ct.UPC_A,"UPC_A"],[Ct.UPC_E,"UPC_E"],[Ct.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Db;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Db||(Db={}));function R_(t){return Object.values(Ct).includes(t)}var $u;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})($u||($u={}));var D_=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[$u.SCAN_TYPE_CAMERA,$u.SCAN_TYPE_FILE],t}(),lw=function(){function t(a,r){this.format=a,this.formatName=r}return t.prototype.toString=function(){return this.formatName},t.create=function(a){if(!Rb.has(a))throw"".concat(a," not in html5QrcodeSupportedFormatsTextMap");return new t(a,Rb.get(a))},t}(),Ob=function(){function t(){}return t.createFromText=function(a){var r={text:a};return{decodedText:a,result:r}},t.createFromQrcodeResult=function(a){return{decodedText:a.text,result:a}},t}(),Tm;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Tm||(Tm={}));var O_=function(){function t(){}return t.createFrom=function(a){return{errorMessage:a,type:Tm.UNKWOWN_ERROR}},t}(),I_=function(){function t(a){this.verbose=a}return t.prototype.log=function(a){this.verbose&&console.log(a)},t.prototype.warn=function(a){this.verbose&&console.warn(a)},t.prototype.logError=function(a,r){(this.verbose||r===!0)&&console.error(a)},t.prototype.logErrors=function(a){if(a.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(a)},t}();function Ei(t){return typeof t>"u"||t===null}var cc=function(){function t(){}return t.codeParseError=function(a){return"QR code parse error, error = ".concat(a)},t.errorGettingUserMedia=function(a){return"Error getting userMedia, error = ".concat(a)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),ow=function(){function t(){}return t.isMediaStreamConstraintsValid=function(a,r){if(typeof a!="object"){var i=typeof a;return r.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var l=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],d=new Set(l),f=Object.keys(a),h=0,b=f;h<b.length;h++){var p=b[h];if(d.has(p))return r.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},t}(),k0={exports:{}},F_=k0.exports,Ib;function M_(){return Ib||(Ib=1,function(t,a){(function(r,i){i(a)})(F_,function(r){function i(J){return J==null}var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(J,n){J.__proto__=n}||function(J,n){for(var c in n)n.hasOwnProperty(c)&&(J[c]=n[c])};function d(J,n){l(J,n);function c(){this.constructor=J}J.prototype=n===null?Object.create(n):(c.prototype=n.prototype,new c)}function f(J,n){var c=Object.setPrototypeOf;c?c(J,n):J.__proto__=n}function h(J,n){n===void 0&&(n=J.constructor);var c=Error.captureStackTrace;c&&c(J,n)}var b=function(J){d(n,J);function n(c){var u=this.constructor,m=J.call(this,c)||this;return Object.defineProperty(m,"name",{value:u.name,enumerable:!1}),f(m,u.prototype),h(m),m}return n}(Error);class p extends b{constructor(n=void 0){super(n),this.message=n}getKind(){return this.constructor.kind}}p.kind="Exception";class w extends p{}w.kind="ArgumentException";class j extends p{}j.kind="IllegalArgumentException";class C{constructor(n){if(this.binarizer=n,n===null)throw new j("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(n,c){return this.binarizer.getBlackRow(n,c)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(n,c,u,m){const g=this.binarizer.getLuminanceSource().crop(n,c,u,m);return new C(this.binarizer.createBinarizer(g))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new C(this.binarizer.createBinarizer(n))}rotateCounterClockwise45(){const n=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new C(this.binarizer.createBinarizer(n))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class _ extends p{static getChecksumInstance(){return new _}}_.kind="ChecksumException";class R{constructor(n){this.source=n}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(n,c,u,m,g){for(;g--;)u[m++]=n[c++]}static currentTimeMillis(){return Date.now()}}class O extends p{}O.kind="IndexOutOfBoundsException";class I extends O{constructor(n=void 0,c=void 0){super(c),this.index=n,this.message=c}}I.kind="ArrayIndexOutOfBoundsException";class M{static fill(n,c){for(let u=0,m=n.length;u<m;u++)n[u]=c}static fillWithin(n,c,u,m){M.rangeCheck(n.length,c,u);for(let g=c;g<u;g++)n[g]=m}static rangeCheck(n,c,u){if(c>u)throw new j("fromIndex("+c+") > toIndex("+u+")");if(c<0)throw new I(c);if(u>n)throw new I(u)}static asList(...n){return n}static create(n,c,u){return Array.from({length:n}).map(g=>Array.from({length:c}).fill(u))}static createInt32Array(n,c,u){return Array.from({length:n}).map(g=>Int32Array.from({length:c}).fill(u))}static equals(n,c){if(!n||!c||!n.length||!c.length||n.length!==c.length)return!1;for(let u=0,m=n.length;u<m;u++)if(n[u]!==c[u])return!1;return!0}static hashCode(n){if(n===null)return 0;let c=1;for(const u of n)c=31*c+u;return c}static fillUint8Array(n,c){for(let u=0;u!==n.length;u++)n[u]=c}static copyOf(n,c){return n.slice(0,c)}static copyOfUint8Array(n,c){if(n.length<=c){const u=new Uint8Array(c);return u.set(n),u}return n.slice(0,c)}static copyOfRange(n,c,u){const m=u-c,g=new Int32Array(m);return A.arraycopy(n,c,g,0,m),g}static binarySearch(n,c,u){u===void 0&&(u=M.numberComparator);let m=0,g=n.length-1;for(;m<=g;){const v=g+m>>1,N=u(c,n[v]);if(N>0)m=v+1;else if(N<0)g=v-1;else return v}return-m-1}static numberComparator(n,c){return n-c}}class T{static numberOfTrailingZeros(n){let c;if(n===0)return 32;let u=31;return c=n<<16,c!==0&&(u-=16,n=c),c=n<<8,c!==0&&(u-=8,n=c),c=n<<4,c!==0&&(u-=4,n=c),c=n<<2,c!==0&&(u-=2,n=c),u-(n<<1>>>31)}static numberOfLeadingZeros(n){if(n===0)return 32;let c=1;return n>>>16||(c+=16,n<<=16),n>>>24||(c+=8,n<<=8),n>>>28||(c+=4,n<<=4),n>>>30||(c+=2,n<<=2),c-=n>>>31,c}static toHexString(n){return n.toString(16)}static toBinaryString(n){return String(parseInt(String(n),2))}static bitCount(n){return n=n-(n>>>1&1431655765),n=(n&858993459)+(n>>>2&858993459),n=n+(n>>>4)&252645135,n=n+(n>>>8),n=n+(n>>>16),n&63}static truncDivision(n,c){return Math.trunc(n/c)}static parseInt(n,c=void 0){return parseInt(n,c)}}T.MIN_VALUE_32_BITS=-2147483648,T.MAX_VALUE=Number.MAX_SAFE_INTEGER;class B{constructor(n,c){n===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=n,c==null?this.bits=B.makeArray(n):this.bits=c)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(n){if(n>this.bits.length*32){const c=B.makeArray(n);A.arraycopy(this.bits,0,c,0,this.bits.length),this.bits=c}}get(n){return(this.bits[Math.floor(n/32)]&1<<(n&31))!==0}set(n){this.bits[Math.floor(n/32)]|=1<<(n&31)}flip(n){this.bits[Math.floor(n/32)]^=1<<(n&31)}getNextSet(n){const c=this.size;if(n>=c)return c;const u=this.bits;let m=Math.floor(n/32),g=u[m];g&=~((1<<(n&31))-1);const v=u.length;for(;g===0;){if(++m===v)return c;g=u[m]}const N=m*32+T.numberOfTrailingZeros(g);return N>c?c:N}getNextUnset(n){const c=this.size;if(n>=c)return c;const u=this.bits;let m=Math.floor(n/32),g=~u[m];g&=~((1<<(n&31))-1);const v=u.length;for(;g===0;){if(++m===v)return c;g=~u[m]}const N=m*32+T.numberOfTrailingZeros(g);return N>c?c:N}setBulk(n,c){this.bits[Math.floor(n/32)]=c}setRange(n,c){if(c<n||n<0||c>this.size)throw new j;if(c===n)return;c--;const u=Math.floor(n/32),m=Math.floor(c/32),g=this.bits;for(let v=u;v<=m;v++){const N=v>u?0:n&31,F=(2<<(v<m?31:c&31))-(1<<N);g[v]|=F}}clear(){const n=this.bits.length,c=this.bits;for(let u=0;u<n;u++)c[u]=0}isRange(n,c,u){if(c<n||n<0||c>this.size)throw new j;if(c===n)return!0;c--;const m=Math.floor(n/32),g=Math.floor(c/32),v=this.bits;for(let N=m;N<=g;N++){const S=N>m?0:n&31,G=(2<<(N<g?31:c&31))-(1<<S)&4294967295;if((v[N]&G)!==(u?G:0))return!1}return!0}appendBit(n){this.ensureCapacity(this.size+1),n&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(n,c){if(c<0||c>32)throw new j("Num bits must be between 0 and 32");this.ensureCapacity(this.size+c);for(let u=c;u>0;u--)this.appendBit((n>>u-1&1)===1)}appendBitArray(n){const c=n.size;this.ensureCapacity(this.size+c);for(let u=0;u<c;u++)this.appendBit(n.get(u))}xor(n){if(this.size!==n.size)throw new j("Sizes don't match");const c=this.bits;for(let u=0,m=c.length;u<m;u++)c[u]^=n.bits[u]}toBytes(n,c,u,m){for(let g=0;g<m;g++){let v=0;for(let N=0;N<8;N++)this.get(n)&&(v|=1<<7-N),n++;c[u+g]=v}}getBitArray(){return this.bits}reverse(){const n=new Int32Array(this.bits.length),c=Math.floor((this.size-1)/32),u=c+1,m=this.bits;for(let g=0;g<u;g++){let v=m[g];v=v>>1&1431655765|(v&1431655765)<<1,v=v>>2&858993459|(v&858993459)<<2,v=v>>4&252645135|(v&252645135)<<4,v=v>>8&16711935|(v&16711935)<<8,v=v>>16&65535|(v&65535)<<16,n[c-g]=v}if(this.size!==u*32){const g=u*32-this.size;let v=n[0]>>>g;for(let N=1;N<u;N++){const S=n[N];v|=S<<32-g,n[N-1]=v,v=S>>>g}n[u-1]=v}this.bits=n}static makeArray(n){return new Int32Array(Math.floor((n+31)/32))}equals(n){if(!(n instanceof B))return!1;const c=n;return this.size===c.size&&M.equals(this.bits,c.bits)}hashCode(){return 31*this.size+M.hashCode(this.bits)}toString(){let n="";for(let c=0,u=this.size;c<u;c++)(c&7)===0&&(n+=" "),n+=this.get(c)?"X":".";return n}clone(){return new B(this.size,this.bits.slice())}}var H;(function(J){J[J.OTHER=0]="OTHER",J[J.PURE_BARCODE=1]="PURE_BARCODE",J[J.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",J[J.TRY_HARDER=3]="TRY_HARDER",J[J.CHARACTER_SET=4]="CHARACTER_SET",J[J.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",J[J.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",J[J.ASSUME_GS1=7]="ASSUME_GS1",J[J.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",J[J.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",J[J.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var U=H;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var P;(function(J){J[J.Cp437=0]="Cp437",J[J.ISO8859_1=1]="ISO8859_1",J[J.ISO8859_2=2]="ISO8859_2",J[J.ISO8859_3=3]="ISO8859_3",J[J.ISO8859_4=4]="ISO8859_4",J[J.ISO8859_5=5]="ISO8859_5",J[J.ISO8859_6=6]="ISO8859_6",J[J.ISO8859_7=7]="ISO8859_7",J[J.ISO8859_8=8]="ISO8859_8",J[J.ISO8859_9=9]="ISO8859_9",J[J.ISO8859_10=10]="ISO8859_10",J[J.ISO8859_11=11]="ISO8859_11",J[J.ISO8859_13=12]="ISO8859_13",J[J.ISO8859_14=13]="ISO8859_14",J[J.ISO8859_15=14]="ISO8859_15",J[J.ISO8859_16=15]="ISO8859_16",J[J.SJIS=16]="SJIS",J[J.Cp1250=17]="Cp1250",J[J.Cp1251=18]="Cp1251",J[J.Cp1252=19]="Cp1252",J[J.Cp1256=20]="Cp1256",J[J.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",J[J.UTF8=22]="UTF8",J[J.ASCII=23]="ASCII",J[J.Big5=24]="Big5",J[J.GB18030=25]="GB18030",J[J.EUC_KR=26]="EUC_KR"})(P||(P={}));class z{constructor(n,c,u,...m){this.valueIdentifier=n,this.name=u,typeof c=="number"?this.values=Int32Array.from([c]):this.values=c,this.otherEncodingNames=m,z.VALUE_IDENTIFIER_TO_ECI.set(n,this),z.NAME_TO_ECI.set(u,this);const g=this.values;for(let v=0,N=g.length;v!==N;v++){const S=g[v];z.VALUES_TO_ECI.set(S,this)}for(const v of m)z.NAME_TO_ECI.set(v,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(n){if(n<0||n>=900)throw new L("incorect value");const c=z.VALUES_TO_ECI.get(n);if(c===void 0)throw new L("incorect value");return c}static getCharacterSetECIByName(n){const c=z.NAME_TO_ECI.get(n);if(c===void 0)throw new L("incorect value");return c}equals(n){if(!(n instanceof z))return!1;const c=n;return this.getName()===c.getName()}}z.VALUE_IDENTIFIER_TO_ECI=new Map,z.VALUES_TO_ECI=new Map,z.NAME_TO_ECI=new Map,z.Cp437=new z(P.Cp437,Int32Array.from([0,2]),"Cp437"),z.ISO8859_1=new z(P.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),z.ISO8859_2=new z(P.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),z.ISO8859_3=new z(P.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),z.ISO8859_4=new z(P.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),z.ISO8859_5=new z(P.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),z.ISO8859_6=new z(P.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),z.ISO8859_7=new z(P.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),z.ISO8859_8=new z(P.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),z.ISO8859_9=new z(P.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),z.ISO8859_10=new z(P.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),z.ISO8859_11=new z(P.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),z.ISO8859_13=new z(P.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),z.ISO8859_14=new z(P.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),z.ISO8859_15=new z(P.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),z.ISO8859_16=new z(P.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),z.SJIS=new z(P.SJIS,20,"SJIS","Shift_JIS"),z.Cp1250=new z(P.Cp1250,21,"Cp1250","windows-1250"),z.Cp1251=new z(P.Cp1251,22,"Cp1251","windows-1251"),z.Cp1252=new z(P.Cp1252,23,"Cp1252","windows-1252"),z.Cp1256=new z(P.Cp1256,24,"Cp1256","windows-1256"),z.UnicodeBigUnmarked=new z(P.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),z.UTF8=new z(P.UTF8,26,"UTF8","UTF-8"),z.ASCII=new z(P.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),z.Big5=new z(P.Big5,28,"Big5"),z.GB18030=new z(P.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),z.EUC_KR=new z(P.EUC_KR,30,"EUC_KR","EUC-KR");class K extends p{}K.kind="UnsupportedOperationException";class te{static decode(n,c){const u=this.encodingName(c);return this.customDecoder?this.customDecoder(n,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(n,u):new TextDecoder(u).decode(n)}static shouldDecodeOnFallback(n){return!te.isBrowser()&&n==="ISO-8859-1"}static encode(n,c){const u=this.encodingName(c);return this.customEncoder?this.customEncoder(n,u):typeof TextEncoder>"u"?this.encodeFallback(n):new TextEncoder().encode(n)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(n){return typeof n=="string"?n:n.getName()}static encodingCharacterSet(n){return n instanceof z?n:z.getCharacterSetECIByName(n)}static decodeFallback(n,c){const u=this.encodingCharacterSet(c);if(te.isDecodeFallbackSupported(u)){let m="";for(let g=0,v=n.length;g<v;g++){let N=n[g].toString(16);N.length<2&&(N="0"+N),m+="%"+N}return decodeURIComponent(m)}if(u.equals(z.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(n.buffer));throw new K(`Encoding ${this.encodingName(c)} not supported by fallback.`)}static isDecodeFallbackSupported(n){return n.equals(z.UTF8)||n.equals(z.ISO8859_1)||n.equals(z.ASCII)}static encodeFallback(n){const u=btoa(unescape(encodeURIComponent(n))).split(""),m=[];for(let g=0;g<u.length;g++)m.push(u[g].charCodeAt(0));return new Uint8Array(m)}}class V{static castAsNonUtf8Char(n,c=null){const u=c?c.getName():this.ISO88591;return te.decode(new Uint8Array([n]),u)}static guessEncoding(n,c){if(c!=null&&c.get(U.CHARACTER_SET)!==void 0)return c.get(U.CHARACTER_SET).toString();const u=n.length;let m=!0,g=!0,v=!0,N=0,S=0,F=0,G=0,ee=0,ue=0,Ee=0,De=0,Oe=0,ze=0,Ke=0;const mt=n.length>3&&n[0]===239&&n[1]===187&&n[2]===191;for(let pt=0;pt<u&&(m||g||v);pt++){const xt=n[pt]&255;v&&(N>0?(xt&128)===0?v=!1:N--:(xt&128)!==0&&((xt&64)===0?v=!1:(N++,(xt&32)===0?S++:(N++,(xt&16)===0?F++:(N++,(xt&8)===0?G++:v=!1))))),m&&(xt>127&&xt<160?m=!1:xt>159&&(xt<192||xt===215||xt===247)&&Ke++),g&&(ee>0?xt<64||xt===127||xt>252?g=!1:ee--:xt===128||xt===160||xt>239?g=!1:xt>160&&xt<224?(ue++,De=0,Ee++,Ee>Oe&&(Oe=Ee)):xt>127?(ee++,Ee=0,De++,De>ze&&(ze=De)):(Ee=0,De=0))}return v&&N>0&&(v=!1),g&&ee>0&&(g=!1),v&&(mt||S+F+G>0)?V.UTF8:g&&(V.ASSUME_SHIFT_JIS||Oe>=3||ze>=3)?V.SHIFT_JIS:m&&g?Oe===2&&ue===2||Ke*10>=u?V.SHIFT_JIS:V.ISO88591:m?V.ISO88591:g?V.SHIFT_JIS:v?V.UTF8:V.PLATFORM_DEFAULT_ENCODING}static format(n,...c){let u=-1;function m(v,N,S,F,G,ee){if(v==="%%")return"%";if(c[++u]===void 0)return;v=F?parseInt(F.substr(1)):void 0;let ue=G?parseInt(G.substr(1)):void 0,Ee;switch(ee){case"s":Ee=c[u];break;case"c":Ee=c[u][0];break;case"f":Ee=parseFloat(c[u]).toFixed(v);break;case"p":Ee=parseFloat(c[u]).toPrecision(v);break;case"e":Ee=parseFloat(c[u]).toExponential(v);break;case"x":Ee=parseInt(c[u]).toString(ue||16);break;case"d":Ee=parseFloat(parseInt(c[u],ue||10).toPrecision(v)).toFixed(0);break}Ee=typeof Ee=="object"?JSON.stringify(Ee):(+Ee).toString(ue);let De=parseInt(S),Oe=S&&S[0]+""=="0"?"0":" ";for(;Ee.length<De;)Ee=N!==void 0?Ee+Oe:Oe+Ee;return Ee}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(g,m)}static getBytes(n,c){return te.encode(n,c)}static getCharCode(n,c=0){return n.charCodeAt(c)}static getCharAt(n){return String.fromCharCode(n)}}V.SHIFT_JIS=z.SJIS.getName(),V.GB2312="GB2312",V.ISO88591=z.ISO8859_1.getName(),V.EUC_JP="EUC_JP",V.UTF8=z.UTF8.getName(),V.PLATFORM_DEFAULT_ENCODING=V.UTF8,V.ASSUME_SHIFT_JIS=!1;class ne{constructor(n=""){this.value=n}enableDecoding(n){return this.encoding=n,this}append(n){return typeof n=="string"?this.value+=n.toString():this.encoding?this.value+=V.castAsNonUtf8Char(n,this.encoding):this.value+=String.fromCharCode(n),this}appendChars(n,c,u){for(let m=c;c<c+u;m++)this.append(n[m]);return this}length(){return this.value.length}charAt(n){return this.value.charAt(n)}deleteCharAt(n){this.value=this.value.substr(0,n)+this.value.substring(n+1)}setCharAt(n,c){this.value=this.value.substr(0,n)+c+this.value.substr(n+1)}substring(n,c){return this.value.substring(n,c)}setLengthToZero(){this.value=""}toString(){return this.value}insert(n,c){this.value=this.value.substr(0,n)+c+this.value.substr(n+c.length)}}class ie{constructor(n,c,u,m){if(this.width=n,this.height=c,this.rowSize=u,this.bits=m,c==null&&(c=n),this.height=c,n<1||c<1)throw new j("Both dimensions must be greater than 0");u==null&&(u=Math.floor((n+31)/32)),this.rowSize=u,m==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(n){const c=n.length,u=n[0].length,m=new ie(u,c);for(let g=0;g<c;g++){const v=n[g];for(let N=0;N<u;N++)v[N]&&m.set(N,g)}return m}static parseFromString(n,c,u){if(n===null)throw new j("stringRepresentation cannot be null");const m=new Array(n.length);let g=0,v=0,N=-1,S=0,F=0;for(;F<n.length;)if(n.charAt(F)===`
`||n.charAt(F)==="\r"){if(g>v){if(N===-1)N=g-v;else if(g-v!==N)throw new j("row lengths do not match");v=g,S++}F++}else if(n.substring(F,F+c.length)===c)F+=c.length,m[g]=!0,g++;else if(n.substring(F,F+u.length)===u)F+=u.length,m[g]=!1,g++;else throw new j("illegal character encountered: "+n.substring(F));if(g>v){if(N===-1)N=g-v;else if(g-v!==N)throw new j("row lengths do not match");S++}const G=new ie(N,S);for(let ee=0;ee<g;ee++)m[ee]&&G.set(Math.floor(ee%N),Math.floor(ee/N));return G}get(n,c){const u=c*this.rowSize+Math.floor(n/32);return(this.bits[u]>>>(n&31)&1)!==0}set(n,c){const u=c*this.rowSize+Math.floor(n/32);this.bits[u]|=1<<(n&31)&4294967295}unset(n,c){const u=c*this.rowSize+Math.floor(n/32);this.bits[u]&=~(1<<(n&31)&4294967295)}flip(n,c){const u=c*this.rowSize+Math.floor(n/32);this.bits[u]^=1<<(n&31)&4294967295}xor(n){if(this.width!==n.getWidth()||this.height!==n.getHeight()||this.rowSize!==n.getRowSize())throw new j("input matrix dimensions do not match");const c=new B(Math.floor(this.width/32)+1),u=this.rowSize,m=this.bits;for(let g=0,v=this.height;g<v;g++){const N=g*u,S=n.getRow(g,c).getBitArray();for(let F=0;F<u;F++)m[N+F]^=S[F]}}clear(){const n=this.bits,c=n.length;for(let u=0;u<c;u++)n[u]=0}setRegion(n,c,u,m){if(c<0||n<0)throw new j("Left and top must be nonnegative");if(m<1||u<1)throw new j("Height and width must be at least 1");const g=n+u,v=c+m;if(v>this.height||g>this.width)throw new j("The region must fit inside the matrix");const N=this.rowSize,S=this.bits;for(let F=c;F<v;F++){const G=F*N;for(let ee=n;ee<g;ee++)S[G+Math.floor(ee/32)]|=1<<(ee&31)&4294967295}}getRow(n,c){c==null||c.getSize()<this.width?c=new B(this.width):c.clear();const u=this.rowSize,m=this.bits,g=n*u;for(let v=0;v<u;v++)c.setBulk(v*32,m[g+v]);return c}setRow(n,c){A.arraycopy(c.getBitArray(),0,this.bits,n*this.rowSize,this.rowSize)}rotate180(){const n=this.getWidth(),c=this.getHeight();let u=new B(n),m=new B(n);for(let g=0,v=Math.floor((c+1)/2);g<v;g++)u=this.getRow(g,u),m=this.getRow(c-1-g,m),u.reverse(),m.reverse(),this.setRow(g,m),this.setRow(c-1-g,u)}getEnclosingRectangle(){const n=this.width,c=this.height,u=this.rowSize,m=this.bits;let g=n,v=c,N=-1,S=-1;for(let F=0;F<c;F++)for(let G=0;G<u;G++){const ee=m[F*u+G];if(ee!==0){if(F<v&&(v=F),F>S&&(S=F),G*32<g){let ue=0;for(;(ee<<31-ue&4294967295)===0;)ue++;G*32+ue<g&&(g=G*32+ue)}if(G*32+31>N){let ue=31;for(;!(ee>>>ue);)ue--;G*32+ue>N&&(N=G*32+ue)}}}return N<g||S<v?null:Int32Array.from([g,v,N-g+1,S-v+1])}getTopLeftOnBit(){const n=this.rowSize,c=this.bits;let u=0;for(;u<c.length&&c[u]===0;)u++;if(u===c.length)return null;const m=u/n;let g=u%n*32;const v=c[u];let N=0;for(;(v<<31-N&4294967295)===0;)N++;return g+=N,Int32Array.from([g,m])}getBottomRightOnBit(){const n=this.rowSize,c=this.bits;let u=c.length-1;for(;u>=0&&c[u]===0;)u--;if(u<0)return null;const m=Math.floor(u/n);let g=Math.floor(u%n)*32;const v=c[u];let N=31;for(;!(v>>>N);)N--;return g+=N,Int32Array.from([g,m])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(n){if(!(n instanceof ie))return!1;const c=n;return this.width===c.width&&this.height===c.height&&this.rowSize===c.rowSize&&M.equals(this.bits,c.bits)}hashCode(){let n=this.width;return n=31*n+this.width,n=31*n+this.height,n=31*n+this.rowSize,n=31*n+M.hashCode(this.bits),n}toString(n="X ",c="  ",u=`
`){return this.buildToString(n,c,u)}buildToString(n,c,u){let m=new ne;for(let g=0,v=this.height;g<v;g++){for(let N=0,S=this.width;N<S;N++)m.append(this.get(N,g)?n:c);m.append(u)}return m.toString()}clone(){return new ie(this.width,this.height,this.rowSize,this.bits.slice())}}class X extends p{static getNotFoundInstance(){return new X}}X.kind="NotFoundException";class q extends R{constructor(n){super(n),this.luminances=q.EMPTY,this.buckets=new Int32Array(q.LUMINANCE_BUCKETS)}getBlackRow(n,c){const u=this.getLuminanceSource(),m=u.getWidth();c==null||c.getSize()<m?c=new B(m):c.clear(),this.initArrays(m);const g=u.getRow(n,this.luminances),v=this.buckets;for(let S=0;S<m;S++)v[(g[S]&255)>>q.LUMINANCE_SHIFT]++;const N=q.estimateBlackPoint(v);if(m<3)for(let S=0;S<m;S++)(g[S]&255)<N&&c.set(S);else{let S=g[0]&255,F=g[1]&255;for(let G=1;G<m-1;G++){const ee=g[G+1]&255;(F*4-S-ee)/2<N&&c.set(G),S=F,F=ee}}return c}getBlackMatrix(){const n=this.getLuminanceSource(),c=n.getWidth(),u=n.getHeight(),m=new ie(c,u);this.initArrays(c);const g=this.buckets;for(let S=1;S<5;S++){const F=Math.floor(u*S/5),G=n.getRow(F,this.luminances),ee=Math.floor(c*4/5);for(let ue=Math.floor(c/5);ue<ee;ue++){const Ee=G[ue]&255;g[Ee>>q.LUMINANCE_SHIFT]++}}const v=q.estimateBlackPoint(g),N=n.getMatrix();for(let S=0;S<u;S++){const F=S*c;for(let G=0;G<c;G++)(N[F+G]&255)<v&&m.set(G,S)}return m}createBinarizer(n){return new q(n)}initArrays(n){this.luminances.length<n&&(this.luminances=new Uint8ClampedArray(n));const c=this.buckets;for(let u=0;u<q.LUMINANCE_BUCKETS;u++)c[u]=0}static estimateBlackPoint(n){const c=n.length;let u=0,m=0,g=0;for(let G=0;G<c;G++)n[G]>g&&(m=G,g=n[G]),n[G]>u&&(u=n[G]);let v=0,N=0;for(let G=0;G<c;G++){const ee=G-m,ue=n[G]*ee*ee;ue>N&&(v=G,N=ue)}if(m>v){const G=m;m=v,v=G}if(v-m<=c/16)throw new X;let S=v-1,F=-1;for(let G=v-1;G>m;G--){const ee=G-m,ue=ee*ee*(v-G)*(u-n[G]);ue>F&&(S=G,F=ue)}return S<<q.LUMINANCE_SHIFT}}q.LUMINANCE_BITS=5,q.LUMINANCE_SHIFT=8-q.LUMINANCE_BITS,q.LUMINANCE_BUCKETS=1<<q.LUMINANCE_BITS,q.EMPTY=Uint8ClampedArray.from([0]);class ce extends q{constructor(n){super(n),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const n=this.getLuminanceSource(),c=n.getWidth(),u=n.getHeight();if(c>=ce.MINIMUM_DIMENSION&&u>=ce.MINIMUM_DIMENSION){const m=n.getMatrix();let g=c>>ce.BLOCK_SIZE_POWER;(c&ce.BLOCK_SIZE_MASK)!==0&&g++;let v=u>>ce.BLOCK_SIZE_POWER;(u&ce.BLOCK_SIZE_MASK)!==0&&v++;const N=ce.calculateBlackPoints(m,g,v,c,u),S=new ie(c,u);ce.calculateThresholdForBlock(m,g,v,c,u,N,S),this.matrix=S}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(n){return new ce(n)}static calculateThresholdForBlock(n,c,u,m,g,v,N){const S=g-ce.BLOCK_SIZE,F=m-ce.BLOCK_SIZE;for(let G=0;G<u;G++){let ee=G<<ce.BLOCK_SIZE_POWER;ee>S&&(ee=S);const ue=ce.cap(G,2,u-3);for(let Ee=0;Ee<c;Ee++){let De=Ee<<ce.BLOCK_SIZE_POWER;De>F&&(De=F);const Oe=ce.cap(Ee,2,c-3);let ze=0;for(let mt=-2;mt<=2;mt++){const pt=v[ue+mt];ze+=pt[Oe-2]+pt[Oe-1]+pt[Oe]+pt[Oe+1]+pt[Oe+2]}const Ke=ze/25;ce.thresholdBlock(n,De,ee,Ke,m,N)}}}static cap(n,c,u){return n<c?c:n>u?u:n}static thresholdBlock(n,c,u,m,g,v){for(let N=0,S=u*g+c;N<ce.BLOCK_SIZE;N++,S+=g)for(let F=0;F<ce.BLOCK_SIZE;F++)(n[S+F]&255)<=m&&v.set(c+F,u+N)}static calculateBlackPoints(n,c,u,m,g){const v=g-ce.BLOCK_SIZE,N=m-ce.BLOCK_SIZE,S=new Array(u);for(let F=0;F<u;F++){S[F]=new Int32Array(c);let G=F<<ce.BLOCK_SIZE_POWER;G>v&&(G=v);for(let ee=0;ee<c;ee++){let ue=ee<<ce.BLOCK_SIZE_POWER;ue>N&&(ue=N);let Ee=0,De=255,Oe=0;for(let Ke=0,mt=G*m+ue;Ke<ce.BLOCK_SIZE;Ke++,mt+=m){for(let pt=0;pt<ce.BLOCK_SIZE;pt++){const xt=n[mt+pt]&255;Ee+=xt,xt<De&&(De=xt),xt>Oe&&(Oe=xt)}if(Oe-De>ce.MIN_DYNAMIC_RANGE)for(Ke++,mt+=m;Ke<ce.BLOCK_SIZE;Ke++,mt+=m)for(let pt=0;pt<ce.BLOCK_SIZE;pt++)Ee+=n[mt+pt]&255}let ze=Ee>>ce.BLOCK_SIZE_POWER*2;if(Oe-De<=ce.MIN_DYNAMIC_RANGE&&(ze=De/2,F>0&&ee>0)){const Ke=(S[F-1][ee]+2*S[F][ee-1]+S[F-1][ee-1])/4;De<Ke&&(ze=Ke)}S[F][ee]=ze}}return S}}ce.BLOCK_SIZE_POWER=3,ce.BLOCK_SIZE=1<<ce.BLOCK_SIZE_POWER,ce.BLOCK_SIZE_MASK=ce.BLOCK_SIZE-1,ce.MINIMUM_DIMENSION=ce.BLOCK_SIZE*5,ce.MIN_DYNAMIC_RANGE=24;class we{constructor(n,c){this.width=n,this.height=c}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(n,c,u,m){throw new K("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new K("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new K("This luminance source does not support rotation by 45 degrees.")}toString(){const n=new Uint8ClampedArray(this.width);let c=new ne;for(let u=0;u<this.height;u++){const m=this.getRow(u,n);for(let g=0;g<this.width;g++){const v=m[g]&255;let N;v<64?N="#":v<128?N="+":v<192?N=".":N=" ",c.append(N)}c.append(`
`)}return c.toString()}}class oe extends we{constructor(n){super(n.getWidth(),n.getHeight()),this.delegate=n}getRow(n,c){const u=this.delegate.getRow(n,c),m=this.getWidth();for(let g=0;g<m;g++)u[g]=255-(u[g]&255);return u}getMatrix(){const n=this.delegate.getMatrix(),c=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(c);for(let m=0;m<c;m++)u[m]=255-(n[m]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(n,c,u,m){return new oe(this.delegate.crop(n,c,u,m))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new oe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new oe(this.delegate.rotateCounterClockwise45())}}class fe extends we{constructor(n){super(n.width,n.height),this.canvas=n,this.tempCanvasElement=null,this.buffer=fe.makeBufferFromCanvasImageData(n)}static makeBufferFromCanvasImageData(n){const c=n.getContext("2d").getImageData(0,0,n.width,n.height);return fe.toGrayscaleBuffer(c.data,n.width,n.height)}static toGrayscaleBuffer(n,c,u){const m=new Uint8ClampedArray(c*u);for(let g=0,v=0,N=n.length;g<N;g+=4,v++){let S;if(n[g+3]===0)S=255;else{const G=n[g],ee=n[g+1],ue=n[g+2];S=306*G+601*ee+117*ue+512>>10}m[v]=S}return m}getRow(n,c){if(n<0||n>=this.getHeight())throw new j("Requested row is outside the image: "+n);const u=this.getWidth(),m=n*u;return c===null?c=this.buffer.slice(m,m+u):(c.length<u&&(c=new Uint8ClampedArray(u)),c.set(this.buffer.slice(m,m+u))),c}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(n,c,u,m){return super.crop(n,c,u,m),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const n=this.canvas.ownerDocument.createElement("canvas");n.width=this.canvas.width,n.height=this.canvas.height,this.tempCanvasElement=n}return this.tempCanvasElement}rotate(n){const c=this.getTempCanvasElement(),u=c.getContext("2d"),m=n*fe.DEGREE_TO_RADIANS,g=this.canvas.width,v=this.canvas.height,N=Math.ceil(Math.abs(Math.cos(m))*g+Math.abs(Math.sin(m))*v),S=Math.ceil(Math.abs(Math.sin(m))*g+Math.abs(Math.cos(m))*v);return c.width=N,c.height=S,u.translate(N/2,S/2),u.rotate(m),u.drawImage(this.canvas,g/-2,v/-2),this.buffer=fe.makeBufferFromCanvasImageData(c),this}invert(){return new oe(this)}}fe.DEGREE_TO_RADIANS=Math.PI/180;class re{constructor(n,c,u){this.deviceId=n,this.label=c,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Q=(globalThis||wu||self||window||void 0)&&(globalThis||wu||self||window||void 0).__awaiter||function(J,n,c,u){function m(g){return g instanceof c?g:new c(function(v){v(g)})}return new(c||(c=Promise))(function(g,v){function N(G){try{F(u.next(G))}catch(ee){v(ee)}}function S(G){try{F(u.throw(G))}catch(ee){v(ee)}}function F(G){G.done?g(G.value):m(G.value).then(N,S)}F((u=u.apply(J,n||[])).next())})};class Y{constructor(n,c=500,u){this.reader=n,this.timeBetweenScansMillis=c,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(n){this._timeBetweenDecodingAttempts=n<0?0:n}set hints(n){this._hints=n||null}get hints(){return this._hints}listVideoInputDevices(){return Q(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const n=yield navigator.mediaDevices.enumerateDevices(),c=[];for(const u of n){const m=u.kind==="video"?"videoinput":u.kind;if(m!=="videoinput")continue;const g=u.deviceId||u.id,v=u.label||`Video device ${c.length+1}`,N=u.groupId,S={deviceId:g,label:v,kind:m,groupId:N};c.push(S)}return c})}getVideoInputDevices(){return Q(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(c=>new re(c.deviceId,c.label))})}findDeviceById(n){return Q(this,void 0,void 0,function*(){const c=yield this.listVideoInputDevices();return c?c.find(u=>u.deviceId===n):null})}decodeFromInputVideoDevice(n,c){return Q(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(n,c)})}decodeOnceFromVideoDevice(n,c){return Q(this,void 0,void 0,function*(){this.reset();let u;n?u={deviceId:{exact:n}}:u={facingMode:"environment"};const m={video:u};return yield this.decodeOnceFromConstraints(m,c)})}decodeOnceFromConstraints(n,c){return Q(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeOnceFromStream(u,c)})}decodeOnceFromStream(n,c){return Q(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(n,c);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(n,c,u){return Q(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(n,c,u)})}decodeFromVideoDevice(n,c,u){return Q(this,void 0,void 0,function*(){let m;n?m={deviceId:{exact:n}}:m={facingMode:"environment"};const g={video:m};return yield this.decodeFromConstraints(g,c,u)})}decodeFromConstraints(n,c,u){return Q(this,void 0,void 0,function*(){const m=yield navigator.mediaDevices.getUserMedia(n);return yield this.decodeFromStream(m,c,u)})}decodeFromStream(n,c,u){return Q(this,void 0,void 0,function*(){this.reset();const m=yield this.attachStreamToVideo(n,c);return yield this.decodeContinuously(m,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(n,c){return Q(this,void 0,void 0,function*(){const u=this.prepareVideoElement(c);return this.addVideoSource(u,n),this.videoElement=u,this.stream=n,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(n){return new Promise((c,u)=>this.playVideoOnLoad(n,()=>c()))}playVideoOnLoad(n,c){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(n),n.addEventListener("ended",this.videoEndedListener),n.addEventListener("canplay",this.videoCanPlayListener),n.addEventListener("playing",c),this.tryPlayVideo(n)}isVideoPlaying(n){return n.currentTime>0&&!n.paused&&!n.ended&&n.readyState>2}tryPlayVideo(n){return Q(this,void 0,void 0,function*(){if(this.isVideoPlaying(n)){console.warn("Trying to play video that is already playing.");return}try{yield n.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(n,c){const u=document.getElementById(n);if(!u)throw new w(`element with id '${n}' not found`);if(u.nodeName.toLowerCase()!==c.toLowerCase())throw new w(`element with id '${n}' must be an ${c} element`);return u}decodeFromImage(n,c){if(!n&&!c)throw new w("either imageElement with a src set or an url must be provided");return c&&!n?this.decodeFromImageUrl(c):this.decodeFromImageElement(n)}decodeFromVideo(n,c){if(!n&&!c)throw new w("Either an element with a src set or an URL must be provided");return c&&!n?this.decodeFromVideoUrl(c):this.decodeFromVideoElement(n)}decodeFromVideoContinuously(n,c,u){if(n===void 0&&c===void 0)throw new w("Either an element with a src set or an URL must be provided");return c&&!n?this.decodeFromVideoUrlContinuously(c,u):this.decodeFromVideoElementContinuously(n,u)}decodeFromImageElement(n){if(!n)throw new w("An image element must be provided.");this.reset();const c=this.prepareImageElement(n);this.imageElement=c;let u;return this.isImageLoaded(c)?u=this.decodeOnce(c,!1,!0):u=this._decodeOnLoadImage(c),u}decodeFromVideoElement(n){const c=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideo(c)}decodeFromVideoElementContinuously(n,c){const u=this._decodeFromVideoElementSetup(n);return this._decodeOnLoadVideoContinuously(u,c)}_decodeFromVideoElementSetup(n){if(!n)throw new w("A video element must be provided.");this.reset();const c=this.prepareVideoElement(n);return this.videoElement=c,c}decodeFromImageUrl(n){if(!n)throw new w("An URL must be provided.");this.reset();const c=this.prepareImageElement();this.imageElement=c;const u=this._decodeOnLoadImage(c);return c.src=n,u}decodeFromVideoUrl(n){if(!n)throw new w("An URL must be provided.");this.reset();const c=this.prepareVideoElement(),u=this.decodeFromVideoElement(c);return c.src=n,u}decodeFromVideoUrlContinuously(n,c){if(!n)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),m=this.decodeFromVideoElementContinuously(u,c);return u.src=n,m}_decodeOnLoadImage(n){return new Promise((c,u)=>{this.imageLoadedListener=()=>this.decodeOnce(n,!1,!0).then(c,u),n.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(n){return Q(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(n),yield this.decodeOnce(n)})}_decodeOnLoadVideoContinuously(n,c){return Q(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(n),this.decodeContinuously(n,c)})}isImageLoaded(n){return!(!n.complete||n.naturalWidth===0)}prepareImageElement(n){let c;return typeof n>"u"&&(c=document.createElement("img"),c.width=200,c.height=200),typeof n=="string"&&(c=this.getMediaElement(n,"img")),n instanceof HTMLImageElement&&(c=n),c}prepareVideoElement(n){let c;return!n&&typeof document<"u"&&(c=document.createElement("video"),c.width=200,c.height=200),typeof n=="string"&&(c=this.getMediaElement(n,"video")),n instanceof HTMLVideoElement&&(c=n),c.setAttribute("autoplay","true"),c.setAttribute("muted","true"),c.setAttribute("playsinline","true"),c}decodeOnce(n,c=!0,u=!0){this._stopAsyncDecode=!1;const m=(g,v)=>{if(this._stopAsyncDecode){v(new X("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const N=this.decode(n);g(N)}catch(N){const S=c&&N instanceof X,G=(N instanceof _||N instanceof L)&&u;if(S||G)return setTimeout(m,this._timeBetweenDecodingAttempts,g,v);v(N)}};return new Promise((g,v)=>m(g,v))}decodeContinuously(n,c){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const m=this.decode(n);c(m,null),setTimeout(u,this.timeBetweenScansMillis)}catch(m){c(null,m);const g=m instanceof _||m instanceof L,v=m instanceof X;(g||v)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(n){const c=this.createBinaryBitmap(n);return this.decodeBitmap(c)}_isHTMLVideoElement(n){return n.videoWidth!==0}drawFrameOnCanvas(n,c,u){c||(c={sx:0,sy:0,sWidth:n.videoWidth,sHeight:n.videoHeight,dx:0,dy:0,dWidth:n.videoWidth,dHeight:n.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(n,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}drawImageOnCanvas(n,c,u=this.captureCanvasContext){c||(c={sx:0,sy:0,sWidth:n.naturalWidth,sHeight:n.naturalHeight,dx:0,dy:0,dWidth:n.naturalWidth,dHeight:n.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(n,c.sx,c.sy,c.sWidth,c.sHeight,c.dx,c.dy,c.dWidth,c.dHeight)}createBinaryBitmap(n){this.getCaptureCanvasContext(n),this._isHTMLVideoElement(n)?this.drawFrameOnCanvas(n):this.drawImageOnCanvas(n);const c=this.getCaptureCanvas(n),u=new fe(c),m=new ce(u);return new C(m)}getCaptureCanvasContext(n){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(n).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(n){if(!this.captureCanvas){const c=this.createCaptureCanvas(n);this.captureCanvas=c}return this.captureCanvas}decodeBitmap(n){return this.reader.decode(n,this._hints)}createCaptureCanvas(n){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const c=document.createElement("canvas");let u,m;return typeof n<"u"&&(n instanceof HTMLVideoElement?(u=n.videoWidth,m=n.videoHeight):n instanceof HTMLImageElement&&(u=n.naturalWidth||n.width,m=n.naturalHeight||n.height)),c.style.width=u+"px",c.style.height=m+"px",c.width=u,c.height=m,c}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(n=>n.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(n,c){try{n.srcObject=c}catch{n.src=URL.createObjectURL(c)}}cleanVideoSource(n){try{n.srcObject=null}catch{n.src=""}this.videoElement.removeAttribute("src")}}class ae{constructor(n,c,u=c==null?0:8*c.length,m,g,v=A.currentTimeMillis()){this.text=n,this.rawBytes=c,this.numBits=u,this.resultPoints=m,this.format=g,this.timestamp=v,this.text=n,this.rawBytes=c,u==null?this.numBits=c==null?0:8*c.length:this.numBits=u,this.resultPoints=m,this.format=g,this.resultMetadata=null,v==null?this.timestamp=A.currentTimeMillis():this.timestamp=v}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(n,c){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(n,c)}putAllMetadata(n){n!==null&&(this.resultMetadata===null?this.resultMetadata=n:this.resultMetadata=new Map(n))}addResultPoints(n){const c=this.resultPoints;if(c===null)this.resultPoints=n;else if(n!==null&&n.length>0){const u=new Array(c.length+n.length);A.arraycopy(c,0,u,0,c.length),A.arraycopy(n,0,u,c.length,n.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var se;(function(J){J[J.AZTEC=0]="AZTEC",J[J.CODABAR=1]="CODABAR",J[J.CODE_39=2]="CODE_39",J[J.CODE_93=3]="CODE_93",J[J.CODE_128=4]="CODE_128",J[J.DATA_MATRIX=5]="DATA_MATRIX",J[J.EAN_8=6]="EAN_8",J[J.EAN_13=7]="EAN_13",J[J.ITF=8]="ITF",J[J.MAXICODE=9]="MAXICODE",J[J.PDF_417=10]="PDF_417",J[J.QR_CODE=11]="QR_CODE",J[J.RSS_14=12]="RSS_14",J[J.RSS_EXPANDED=13]="RSS_EXPANDED",J[J.UPC_A=14]="UPC_A",J[J.UPC_E=15]="UPC_E",J[J.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(se||(se={}));var Z=se,Re;(function(J){J[J.OTHER=0]="OTHER",J[J.ORIENTATION=1]="ORIENTATION",J[J.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",J[J.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",J[J.ISSUE_NUMBER=4]="ISSUE_NUMBER",J[J.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",J[J.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",J[J.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",J[J.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",J[J.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",J[J.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Re||(Re={}));var je=Re;class Ue{constructor(n,c,u,m,g=-1,v=-1){this.rawBytes=n,this.text=c,this.byteSegments=u,this.ecLevel=m,this.structuredAppendSequenceNumber=g,this.structuredAppendParity=v,this.numBits=n==null?0:8*n.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(n){this.numBits=n}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(n){this.errorsCorrected=n}getErasures(){return this.erasures}setErasures(n){this.erasures=n}getOther(){return this.other}setOther(n){this.other=n}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Me{exp(n){return this.expTable[n]}log(n){if(n===0)throw new j;return this.logTable[n]}static addOrSubtract(n,c){return n^c}}class at{constructor(n,c){if(c.length===0)throw new j;this.field=n;const u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);const c=this.coefficients;let u;if(n===1){u=0;for(let v=0,N=c.length;v!==N;v++){const S=c[v];u=Me.addOrSubtract(u,S)}return u}u=c[0];const m=c.length,g=this.field;for(let v=1;v<m;v++)u=Me.addOrSubtract(g.multiply(n,u),c[v]);return u}addOrSubtract(n){if(!this.field.equals(n.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero())return n;if(n.isZero())return this;let c=this.coefficients,u=n.coefficients;if(c.length>u.length){const v=c;c=u,u=v}let m=new Int32Array(u.length);const g=u.length-c.length;A.arraycopy(u,0,m,0,g);for(let v=g;v<u.length;v++)m[v]=Me.addOrSubtract(c[v-g],u[v]);return new at(this.field,m)}multiply(n){if(!this.field.equals(n.field))throw new j("GenericGFPolys do not have same GenericGF field");if(this.isZero()||n.isZero())return this.field.getZero();const c=this.coefficients,u=c.length,m=n.coefficients,g=m.length,v=new Int32Array(u+g-1),N=this.field;for(let S=0;S<u;S++){const F=c[S];for(let G=0;G<g;G++)v[S+G]=Me.addOrSubtract(v[S+G],N.multiply(F,m[G]))}return new at(N,v)}multiplyScalar(n){if(n===0)return this.field.getZero();if(n===1)return this;const c=this.coefficients.length,u=this.field,m=new Int32Array(c),g=this.coefficients;for(let v=0;v<c;v++)m[v]=u.multiply(g[v],n);return new at(u,m)}multiplyByMonomial(n,c){if(n<0)throw new j;if(c===0)return this.field.getZero();const u=this.coefficients,m=u.length,g=new Int32Array(m+n),v=this.field;for(let N=0;N<m;N++)g[N]=v.multiply(u[N],c);return new at(v,g)}divide(n){if(!this.field.equals(n.field))throw new j("GenericGFPolys do not have same GenericGF field");if(n.isZero())throw new j("Divide by 0");const c=this.field;let u=c.getZero(),m=this;const g=n.getCoefficient(n.getDegree()),v=c.inverse(g);for(;m.getDegree()>=n.getDegree()&&!m.isZero();){const N=m.getDegree()-n.getDegree(),S=c.multiply(m.getCoefficient(m.getDegree()),v),F=n.multiplyByMonomial(N,S),G=c.buildMonomial(N,S);u=u.addOrSubtract(G),m=m.addOrSubtract(F)}return[u,m]}toString(){let n="";for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);if(u!==0){if(u<0?(n+=" - ",u=-u):n.length>0&&(n+=" + "),c===0||u!==1){const m=this.field.log(u);m===0?n+="1":m===1?n+="a":(n+="a^",n+=m)}c!==0&&(c===1?n+="x":(n+="x^",n+=c))}}return n}}class ye extends p{}ye.kind="ArithmeticException";class Ae extends Me{constructor(n,c,u){super(),this.primitive=n,this.size=c,this.generatorBase=u;const m=new Int32Array(c);let g=1;for(let N=0;N<c;N++)m[N]=g,g*=2,g>=c&&(g^=n,g&=c-1);this.expTable=m;const v=new Int32Array(c);for(let N=0;N<c-1;N++)v[m[N]]=N;this.logTable=v,this.zero=new at(this,Int32Array.from([0])),this.one=new at(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,c){if(n<0)throw new j;if(c===0)return this.zero;const u=new Int32Array(n+1);return u[0]=c,new at(this,u)}inverse(n){if(n===0)throw new ye;return this.expTable[this.size-this.logTable[n]-1]}multiply(n,c){return n===0||c===0?0:this.expTable[(this.logTable[n]+this.logTable[c])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+T.toHexString(this.primitive)+","+this.size+")"}equals(n){return n===this}}Ae.AZTEC_DATA_12=new Ae(4201,4096,1),Ae.AZTEC_DATA_10=new Ae(1033,1024,1),Ae.AZTEC_DATA_6=new Ae(67,64,1),Ae.AZTEC_PARAM=new Ae(19,16,1),Ae.QR_CODE_FIELD_256=new Ae(285,256,0),Ae.DATA_MATRIX_FIELD_256=new Ae(301,256,1),Ae.AZTEC_DATA_8=Ae.DATA_MATRIX_FIELD_256,Ae.MAXICODE_FIELD_64=Ae.AZTEC_DATA_6;class Fe extends p{}Fe.kind="ReedSolomonException";class Ce extends p{}Ce.kind="IllegalStateException";class Je{constructor(n){this.field=n}decode(n,c){const u=this.field,m=new at(u,n),g=new Int32Array(c);let v=!0;for(let Ee=0;Ee<c;Ee++){const De=m.evaluateAt(u.exp(Ee+u.getGeneratorBase()));g[g.length-1-Ee]=De,De!==0&&(v=!1)}if(v)return;const N=new at(u,g),S=this.runEuclideanAlgorithm(u.buildMonomial(c,1),N,c),F=S[0],G=S[1],ee=this.findErrorLocations(F),ue=this.findErrorMagnitudes(G,ee);for(let Ee=0;Ee<ee.length;Ee++){const De=n.length-1-u.log(ee[Ee]);if(De<0)throw new Fe("Bad error location");n[De]=Ae.addOrSubtract(n[De],ue[Ee])}}runEuclideanAlgorithm(n,c,u){if(n.getDegree()<c.getDegree()){const Ee=n;n=c,c=Ee}const m=this.field;let g=n,v=c,N=m.getZero(),S=m.getOne();for(;v.getDegree()>=(u/2|0);){let Ee=g,De=N;if(g=v,N=S,g.isZero())throw new Fe("r_{i-1} was zero");v=Ee;let Oe=m.getZero();const ze=g.getCoefficient(g.getDegree()),Ke=m.inverse(ze);for(;v.getDegree()>=g.getDegree()&&!v.isZero();){const mt=v.getDegree()-g.getDegree(),pt=m.multiply(v.getCoefficient(v.getDegree()),Ke);Oe=Oe.addOrSubtract(m.buildMonomial(mt,pt)),v=v.addOrSubtract(g.multiplyByMonomial(mt,pt))}if(S=Oe.multiply(N).addOrSubtract(De),v.getDegree()>=g.getDegree())throw new Ce("Division algorithm failed to reduce polynomial?")}const F=S.getCoefficient(0);if(F===0)throw new Fe("sigmaTilde(0) was zero");const G=m.inverse(F),ee=S.multiplyScalar(G),ue=v.multiplyScalar(G);return[ee,ue]}findErrorLocations(n){const c=n.getDegree();if(c===1)return Int32Array.from([n.getCoefficient(1)]);const u=new Int32Array(c);let m=0;const g=this.field;for(let v=1;v<g.getSize()&&m<c;v++)n.evaluateAt(v)===0&&(u[m]=g.inverse(v),m++);if(m!==c)throw new Fe("Error locator degree does not match number of roots");return u}findErrorMagnitudes(n,c){const u=c.length,m=new Int32Array(u),g=this.field;for(let v=0;v<u;v++){const N=g.inverse(c[v]);let S=1;for(let F=0;F<u;F++)if(v!==F){const G=g.multiply(c[F],N),ee=(G&1)===0?G|1:G&-2;S=g.multiply(S,ee)}m[v]=g.multiply(n.evaluateAt(N),g.inverse(S)),g.getGeneratorBase()!==0&&(m[v]=g.multiply(m[v],N))}return m}}var be;(function(J){J[J.UPPER=0]="UPPER",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.DIGIT=3]="DIGIT",J[J.PUNCT=4]="PUNCT",J[J.BINARY=5]="BINARY"})(be||(be={}));class dt{decode(n){this.ddata=n;let c=n.getBits(),u=this.extractBits(c),m=this.correctBits(u),g=dt.convertBoolArrayToByteArray(m),v=dt.getEncodedData(m),N=new Ue(g,v,null,null);return N.setNumBits(m.length),N}static highLevelDecode(n){return this.getEncodedData(n)}static getEncodedData(n){let c=n.length,u=be.UPPER,m=be.UPPER,g="",v=0;for(;v<c;)if(m===be.BINARY){if(c-v<5)break;let N=dt.readCode(n,v,5);if(v+=5,N===0){if(c-v<11)break;N=dt.readCode(n,v,11)+31,v+=11}for(let S=0;S<N;S++){if(c-v<8){v=c;break}const F=dt.readCode(n,v,8);g+=V.castAsNonUtf8Char(F),v+=8}m=u}else{let N=m===be.DIGIT?4:5;if(c-v<N)break;let S=dt.readCode(n,v,N);v+=N;let F=dt.getCharacter(m,S);F.startsWith("CTRL_")?(u=m,m=dt.getTable(F.charAt(5)),F.charAt(6)==="L"&&(u=m)):(g+=F,m=u)}return g}static getTable(n){switch(n){case"L":return be.LOWER;case"P":return be.PUNCT;case"M":return be.MIXED;case"D":return be.DIGIT;case"B":return be.BINARY;case"U":default:return be.UPPER}}static getCharacter(n,c){switch(n){case be.UPPER:return dt.UPPER_TABLE[c];case be.LOWER:return dt.LOWER_TABLE[c];case be.MIXED:return dt.MIXED_TABLE[c];case be.PUNCT:return dt.PUNCT_TABLE[c];case be.DIGIT:return dt.DIGIT_TABLE[c];default:throw new Ce("Bad table")}}correctBits(n){let c,u;this.ddata.getNbLayers()<=2?(u=6,c=Ae.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,c=Ae.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,c=Ae.AZTEC_DATA_10):(u=12,c=Ae.AZTEC_DATA_12);let m=this.ddata.getNbDatablocks(),g=n.length/u;if(g<m)throw new L;let v=n.length%u,N=new Int32Array(g);for(let ue=0;ue<g;ue++,v+=u)N[ue]=dt.readCode(n,v,u);try{new Je(c).decode(N,g-m)}catch(ue){throw new L(ue)}let S=(1<<u)-1,F=0;for(let ue=0;ue<m;ue++){let Ee=N[ue];if(Ee===0||Ee===S)throw new L;(Ee===1||Ee===S-1)&&F++}let G=new Array(m*u-F),ee=0;for(let ue=0;ue<m;ue++){let Ee=N[ue];if(Ee===1||Ee===S-1)G.fill(Ee>1,ee,ee+u-1),ee+=u-1;else for(let De=u-1;De>=0;--De)G[ee++]=(Ee&1<<De)!==0}return G}extractBits(n){let c=this.ddata.isCompact(),u=this.ddata.getNbLayers(),m=(c?11:14)+u*4,g=new Int32Array(m),v=new Array(this.totalBitsInLayer(u,c));if(c)for(let N=0;N<g.length;N++)g[N]=N;else{let N=m+1+2*T.truncDivision(T.truncDivision(m,2)-1,15),S=m/2,F=T.truncDivision(N,2);for(let G=0;G<S;G++){let ee=G+T.truncDivision(G,15);g[S-G-1]=F-ee-1,g[S+G]=F+ee+1}}for(let N=0,S=0;N<u;N++){let F=(u-N)*4+(c?9:12),G=N*2,ee=m-1-G;for(let ue=0;ue<F;ue++){let Ee=ue*2;for(let De=0;De<2;De++)v[S+Ee+De]=n.get(g[G+De],g[G+ue]),v[S+2*F+Ee+De]=n.get(g[G+ue],g[ee-De]),v[S+4*F+Ee+De]=n.get(g[ee-De],g[ee-ue]),v[S+6*F+Ee+De]=n.get(g[ee-ue],g[G+De])}S+=F*8}return v}static readCode(n,c,u){let m=0;for(let g=c;g<c+u;g++)m<<=1,n[g]&&(m|=1);return m}static readByte(n,c){let u=n.length-c;return u>=8?dt.readCode(n,c,8):dt.readCode(n,c,u)<<8-u}static convertBoolArrayToByteArray(n){let c=new Uint8Array((n.length+7)/8);for(let u=0;u<c.length;u++)c[u]=dt.readByte(n,8*u);return c}totalBitsInLayer(n,c){return((c?88:112)+16*n)*n}}dt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],dt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],dt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],dt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],dt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class me{constructor(){}static round(n){return n===NaN?0:n<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:n>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:n+(n<0?-.5:.5)|0}static distance(n,c,u,m){const g=n-u,v=c-m;return Math.sqrt(g*g+v*v)}static sum(n){let c=0;for(let u=0,m=n.length;u!==m;u++){const g=n[u];c+=g}return c}}class Pe{static floatToIntBits(n){return n}}Pe.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(n,c){this.x=n,this.y=c}getX(){return this.x}getY(){return this.y}equals(n){if(n instanceof pe){const c=n;return this.x===c.x&&this.y===c.y}return!1}hashCode(){return 31*Pe.floatToIntBits(this.x)+Pe.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(n){const c=this.distance(n[0],n[1]),u=this.distance(n[1],n[2]),m=this.distance(n[0],n[2]);let g,v,N;if(u>=c&&u>=m?(v=n[0],g=n[1],N=n[2]):m>=u&&m>=c?(v=n[1],g=n[0],N=n[2]):(v=n[2],g=n[0],N=n[1]),this.crossProductZ(g,v,N)<0){const S=g;g=N,N=S}n[0]=g,n[1]=v,n[2]=N}static distance(n,c){return me.distance(n.x,n.y,c.x,c.y)}static crossProductZ(n,c,u){const m=c.x,g=c.y;return(u.x-m)*(n.y-g)-(u.y-g)*(n.x-m)}}class lt{constructor(n,c){this.bits=n,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class st extends lt{constructor(n,c,u,m,g){super(n,c),this.compact=u,this.nbDatablocks=m,this.nbLayers=g}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class jt{constructor(n,c,u,m){this.image=n,this.height=n.getHeight(),this.width=n.getWidth(),c==null&&(c=jt.INIT_SIZE),u==null&&(u=n.getWidth()/2|0),m==null&&(m=n.getHeight()/2|0);const g=c/2|0;if(this.leftInit=u-g,this.rightInit=u+g,this.upInit=m-g,this.downInit=m+g,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new X}detect(){let n=this.leftInit,c=this.rightInit,u=this.upInit,m=this.downInit,g=!1,v=!0,N=!1,S=!1,F=!1,G=!1,ee=!1;const ue=this.width,Ee=this.height;for(;v;){v=!1;let De=!0;for(;(De||!S)&&c<ue;)De=this.containsBlackPoint(u,m,c,!1),De?(c++,v=!0,S=!0):S||c++;if(c>=ue){g=!0;break}let Oe=!0;for(;(Oe||!F)&&m<Ee;)Oe=this.containsBlackPoint(n,c,m,!0),Oe?(m++,v=!0,F=!0):F||m++;if(m>=Ee){g=!0;break}let ze=!0;for(;(ze||!G)&&n>=0;)ze=this.containsBlackPoint(u,m,n,!1),ze?(n--,v=!0,G=!0):G||n--;if(n<0){g=!0;break}let Ke=!0;for(;(Ke||!ee)&&u>=0;)Ke=this.containsBlackPoint(n,c,u,!0),Ke?(u--,v=!0,ee=!0):ee||u--;if(u<0){g=!0;break}v&&(N=!0)}if(!g&&N){const De=c-n;let Oe=null;for(let pt=1;Oe===null&&pt<De;pt++)Oe=this.getBlackPointOnSegment(n,m-pt,n+pt,m);if(Oe==null)throw new X;let ze=null;for(let pt=1;ze===null&&pt<De;pt++)ze=this.getBlackPointOnSegment(n,u+pt,n+pt,u);if(ze==null)throw new X;let Ke=null;for(let pt=1;Ke===null&&pt<De;pt++)Ke=this.getBlackPointOnSegment(c,u+pt,c-pt,u);if(Ke==null)throw new X;let mt=null;for(let pt=1;mt===null&&pt<De;pt++)mt=this.getBlackPointOnSegment(c,m-pt,c-pt,m);if(mt==null)throw new X;return this.centerEdges(mt,Oe,Ke,ze)}else throw new X}getBlackPointOnSegment(n,c,u,m){const g=me.round(me.distance(n,c,u,m)),v=(u-n)/g,N=(m-c)/g,S=this.image;for(let F=0;F<g;F++){const G=me.round(n+F*v),ee=me.round(c+F*N);if(S.get(G,ee))return new pe(G,ee)}return null}centerEdges(n,c,u,m){const g=n.getX(),v=n.getY(),N=c.getX(),S=c.getY(),F=u.getX(),G=u.getY(),ee=m.getX(),ue=m.getY(),Ee=jt.CORR;return g<this.width/2?[new pe(ee-Ee,ue+Ee),new pe(N+Ee,S+Ee),new pe(F-Ee,G-Ee),new pe(g+Ee,v-Ee)]:[new pe(ee+Ee,ue+Ee),new pe(N+Ee,S-Ee),new pe(F-Ee,G+Ee),new pe(g-Ee,v-Ee)]}containsBlackPoint(n,c,u,m){const g=this.image;if(m){for(let v=n;v<=c;v++)if(g.get(v,u))return!0}else for(let v=n;v<=c;v++)if(g.get(u,v))return!0;return!1}}jt.INIT_SIZE=10,jt.CORR=1;class At{static checkAndNudgePoints(n,c){const u=n.getWidth(),m=n.getHeight();let g=!0;for(let v=0;v<c.length&&g;v+=2){const N=Math.floor(c[v]),S=Math.floor(c[v+1]);if(N<-1||N>u||S<-1||S>m)throw new X;g=!1,N===-1?(c[v]=0,g=!0):N===u&&(c[v]=u-1,g=!0),S===-1?(c[v+1]=0,g=!0):S===m&&(c[v+1]=m-1,g=!0)}g=!0;for(let v=c.length-2;v>=0&&g;v-=2){const N=Math.floor(c[v]),S=Math.floor(c[v+1]);if(N<-1||N>u||S<-1||S>m)throw new X;g=!1,N===-1?(c[v]=0,g=!0):N===u&&(c[v]=u-1,g=!0),S===-1?(c[v+1]=0,g=!0):S===m&&(c[v+1]=m-1,g=!0)}}}class Dt{constructor(n,c,u,m,g,v,N,S,F){this.a11=n,this.a21=c,this.a31=u,this.a12=m,this.a22=g,this.a32=v,this.a13=N,this.a23=S,this.a33=F}static quadrilateralToQuadrilateral(n,c,u,m,g,v,N,S,F,G,ee,ue,Ee,De,Oe,ze){const Ke=Dt.quadrilateralToSquare(n,c,u,m,g,v,N,S);return Dt.squareToQuadrilateral(F,G,ee,ue,Ee,De,Oe,ze).times(Ke)}transformPoints(n){const c=n.length,u=this.a11,m=this.a12,g=this.a13,v=this.a21,N=this.a22,S=this.a23,F=this.a31,G=this.a32,ee=this.a33;for(let ue=0;ue<c;ue+=2){const Ee=n[ue],De=n[ue+1],Oe=g*Ee+S*De+ee;n[ue]=(u*Ee+v*De+F)/Oe,n[ue+1]=(m*Ee+N*De+G)/Oe}}transformPointsWithValues(n,c){const u=this.a11,m=this.a12,g=this.a13,v=this.a21,N=this.a22,S=this.a23,F=this.a31,G=this.a32,ee=this.a33,ue=n.length;for(let Ee=0;Ee<ue;Ee++){const De=n[Ee],Oe=c[Ee],ze=g*De+S*Oe+ee;n[Ee]=(u*De+v*Oe+F)/ze,c[Ee]=(m*De+N*Oe+G)/ze}}static squareToQuadrilateral(n,c,u,m,g,v,N,S){const F=n-u+g-N,G=c-m+v-S;if(F===0&&G===0)return new Dt(u-n,g-u,n,m-c,v-m,c,0,0,1);{const ee=u-g,ue=N-g,Ee=m-v,De=S-v,Oe=ee*De-ue*Ee,ze=(F*De-ue*G)/Oe,Ke=(ee*G-F*Ee)/Oe;return new Dt(u-n+ze*u,N-n+Ke*N,n,m-c+ze*m,S-c+Ke*S,c,ze,Ke,1)}}static quadrilateralToSquare(n,c,u,m,g,v,N,S){return Dt.squareToQuadrilateral(n,c,u,m,g,v,N,S).buildAdjoint()}buildAdjoint(){return new Dt(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(n){return new Dt(this.a11*n.a11+this.a21*n.a12+this.a31*n.a13,this.a11*n.a21+this.a21*n.a22+this.a31*n.a23,this.a11*n.a31+this.a21*n.a32+this.a31*n.a33,this.a12*n.a11+this.a22*n.a12+this.a32*n.a13,this.a12*n.a21+this.a22*n.a22+this.a32*n.a23,this.a12*n.a31+this.a22*n.a32+this.a32*n.a33,this.a13*n.a11+this.a23*n.a12+this.a33*n.a13,this.a13*n.a21+this.a23*n.a22+this.a33*n.a23,this.a13*n.a31+this.a23*n.a32+this.a33*n.a33)}}class or extends At{sampleGrid(n,c,u,m,g,v,N,S,F,G,ee,ue,Ee,De,Oe,ze,Ke,mt,pt){const xt=Dt.quadrilateralToQuadrilateral(m,g,v,N,S,F,G,ee,ue,Ee,De,Oe,ze,Ke,mt,pt);return this.sampleGridWithTransform(n,c,u,xt)}sampleGridWithTransform(n,c,u,m){if(c<=0||u<=0)throw new X;const g=new ie(c,u),v=new Float32Array(2*c);for(let N=0;N<u;N++){const S=v.length,F=N+.5;for(let G=0;G<S;G+=2)v[G]=G/2+.5,v[G+1]=F;m.transformPoints(v),At.checkAndNudgePoints(n,v);try{for(let G=0;G<S;G+=2)n.get(Math.floor(v[G]),Math.floor(v[G+1]))&&g.set(G/2,N)}catch{throw new X}}return g}}class Lt{static setGridSampler(n){Lt.gridSampler=n}static getInstance(){return Lt.gridSampler}}Lt.gridSampler=new or;class qt{constructor(n,c){this.x=n,this.y=c}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ft{constructor(n){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=n}detect(){return this.detectMirror(!1)}detectMirror(n){let c=this.getMatrixCenter(),u=this.getBullsEyeCorners(c);if(n){let v=u[0];u[0]=u[2],u[2]=v}this.extractParameters(u);let m=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),g=this.getMatrixCornerPoints(u);return new st(m,g,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(n){if(!this.isValidPoint(n[0])||!this.isValidPoint(n[1])||!this.isValidPoint(n[2])||!this.isValidPoint(n[3]))throw new X;let c=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(n[0],n[1],c),this.sampleLine(n[1],n[2],c),this.sampleLine(n[2],n[3],c),this.sampleLine(n[3],n[0],c)]);this.shift=this.getRotation(u,c);let m=0;for(let v=0;v<4;v++){let N=u[(this.shift+v)%4];this.compact?(m<<=7,m+=N>>1&127):(m<<=10,m+=(N>>2&992)+(N>>1&31))}let g=this.getCorrectedParameterData(m,this.compact);this.compact?(this.nbLayers=(g>>6)+1,this.nbDataBlocks=(g&63)+1):(this.nbLayers=(g>>11)+1,this.nbDataBlocks=(g&2047)+1)}getRotation(n,c){let u=0;n.forEach((m,g,v)=>{let N=(m>>c-2<<1)+(m&1);u=(u<<3)+N}),u=((u&1)<<11)+(u>>1);for(let m=0;m<4;m++)if(T.bitCount(u^this.EXPECTED_CORNER_BITS[m])<=2)return m;throw new X}getCorrectedParameterData(n,c){let u,m;c?(u=7,m=2):(u=10,m=4);let g=u-m,v=new Int32Array(u);for(let S=u-1;S>=0;--S)v[S]=n&15,n>>=4;try{new Je(Ae.AZTEC_PARAM).decode(v,g)}catch{throw new X}let N=0;for(let S=0;S<m;S++)N=(N<<4)+v[S];return N}getBullsEyeCorners(n){let c=n,u=n,m=n,g=n,v=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let ee=this.getFirstDifferent(c,v,1,-1),ue=this.getFirstDifferent(u,v,1,1),Ee=this.getFirstDifferent(m,v,-1,1),De=this.getFirstDifferent(g,v,-1,-1);if(this.nbCenterLayers>2){let Oe=this.distancePoint(De,ee)*this.nbCenterLayers/(this.distancePoint(g,c)*(this.nbCenterLayers+2));if(Oe<.75||Oe>1.25||!this.isWhiteOrBlackRectangle(ee,ue,Ee,De))break}c=ee,u=ue,m=Ee,g=De,v=!v}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new X;this.compact=this.nbCenterLayers===5;let N=new pe(c.getX()+.5,c.getY()-.5),S=new pe(u.getX()+.5,u.getY()+.5),F=new pe(m.getX()-.5,m.getY()+.5),G=new pe(g.getX()-.5,g.getY()-.5);return this.expandSquare([N,S,F,G],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let n,c,u,m;try{let N=new jt(this.image).detect();n=N[0],c=N[1],u=N[2],m=N[3]}catch{let S=this.image.getWidth()/2,F=this.image.getHeight()/2;n=this.getFirstDifferent(new qt(S+7,F-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new qt(S+7,F+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new qt(S-7,F+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new qt(S-7,F-7),!1,-1,-1).toResultPoint()}let g=me.round((n.getX()+m.getX()+c.getX()+u.getX())/4),v=me.round((n.getY()+m.getY()+c.getY()+u.getY())/4);try{let N=new jt(this.image,15,g,v).detect();n=N[0],c=N[1],u=N[2],m=N[3]}catch{n=this.getFirstDifferent(new qt(g+7,v-7),!1,1,-1).toResultPoint(),c=this.getFirstDifferent(new qt(g+7,v+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new qt(g-7,v+7),!1,-1,1).toResultPoint(),m=this.getFirstDifferent(new qt(g-7,v-7),!1,-1,-1).toResultPoint()}return g=me.round((n.getX()+m.getX()+c.getX()+u.getX())/4),v=me.round((n.getY()+m.getY()+c.getY()+u.getY())/4),new qt(g,v)}getMatrixCornerPoints(n){return this.expandSquare(n,2*this.nbCenterLayers,this.getDimension())}sampleGrid(n,c,u,m,g){let v=Lt.getInstance(),N=this.getDimension(),S=N/2-this.nbCenterLayers,F=N/2+this.nbCenterLayers;return v.sampleGrid(n,N,N,S,S,F,S,F,F,S,F,c.getX(),c.getY(),u.getX(),u.getY(),m.getX(),m.getY(),g.getX(),g.getY())}sampleLine(n,c,u){let m=0,g=this.distanceResultPoint(n,c),v=g/u,N=n.getX(),S=n.getY(),F=v*(c.getX()-n.getX())/g,G=v*(c.getY()-n.getY())/g;for(let ee=0;ee<u;ee++)this.image.get(me.round(N+ee*F),me.round(S+ee*G))&&(m|=1<<u-ee-1);return m}isWhiteOrBlackRectangle(n,c,u,m){let g=3;n=new qt(n.getX()-g,n.getY()+g),c=new qt(c.getX()-g,c.getY()-g),u=new qt(u.getX()+g,u.getY()-g),m=new qt(m.getX()+g,m.getY()+g);let v=this.getColor(m,n);if(v===0)return!1;let N=this.getColor(n,c);return N!==v||(N=this.getColor(c,u),N!==v)?!1:(N=this.getColor(u,m),N===v)}getColor(n,c){let u=this.distancePoint(n,c),m=(c.getX()-n.getX())/u,g=(c.getY()-n.getY())/u,v=0,N=n.getX(),S=n.getY(),F=this.image.get(n.getX(),n.getY()),G=Math.ceil(u);for(let ue=0;ue<G;ue++)N+=m,S+=g,this.image.get(me.round(N),me.round(S))!==F&&v++;let ee=v/u;return ee>.1&&ee<.9?0:ee<=.1===F?1:-1}getFirstDifferent(n,c,u,m){let g=n.getX()+u,v=n.getY()+m;for(;this.isValid(g,v)&&this.image.get(g,v)===c;)g+=u,v+=m;for(g-=u,v-=m;this.isValid(g,v)&&this.image.get(g,v)===c;)g+=u;for(g-=u;this.isValid(g,v)&&this.image.get(g,v)===c;)v+=m;return v-=m,new qt(g,v)}expandSquare(n,c,u){let m=u/(2*c),g=n[0].getX()-n[2].getX(),v=n[0].getY()-n[2].getY(),N=(n[0].getX()+n[2].getX())/2,S=(n[0].getY()+n[2].getY())/2,F=new pe(N+m*g,S+m*v),G=new pe(N-m*g,S-m*v);g=n[1].getX()-n[3].getX(),v=n[1].getY()-n[3].getY(),N=(n[1].getX()+n[3].getX())/2,S=(n[1].getY()+n[3].getY())/2;let ee=new pe(N+m*g,S+m*v),ue=new pe(N-m*g,S-m*v);return[F,ee,G,ue]}isValid(n,c){return n>=0&&n<this.image.getWidth()&&c>0&&c<this.image.getHeight()}isValidPoint(n){let c=me.round(n.getX()),u=me.round(n.getY());return this.isValid(c,u)}distancePoint(n,c){return me.distance(n.getX(),n.getY(),c.getX(),c.getY())}distanceResultPoint(n,c){return me.distance(n.getX(),n.getY(),c.getX(),c.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(T.truncDivision(this.nbLayers-4,8)+1)+15}}class Ye{decode(n,c=null){let u=null,m=new Ft(n.getBlackMatrix()),g=null,v=null;try{let G=m.detectMirror(!1);g=G.getPoints(),this.reportFoundResultPoints(c,g),v=new dt().decode(G)}catch(G){u=G}if(v==null)try{let G=m.detectMirror(!0);g=G.getPoints(),this.reportFoundResultPoints(c,g),v=new dt().decode(G)}catch(G){throw u??G}let N=new ae(v.getText(),v.getRawBytes(),v.getNumBits(),g,Z.AZTEC,A.currentTimeMillis()),S=v.getByteSegments();S!=null&&N.putMetadata(je.BYTE_SEGMENTS,S);let F=v.getECLevel();return F!=null&&N.putMetadata(je.ERROR_CORRECTION_LEVEL,F),N}reportFoundResultPoints(n,c){if(n!=null){let u=n.get(U.NEED_RESULT_POINT_CALLBACK);u!=null&&c.forEach((m,g,v)=>{u.foundPossibleResultPoint(m)})}}reset(){}}class Et extends Y{constructor(n=500){super(new Ye,n)}}class Nt{decode(n,c){try{return this.doDecode(n,c)}catch{if(c&&c.get(U.TRY_HARDER)===!0&&n.isRotateSupported()){const g=n.rotateCounterClockwise(),v=this.doDecode(g,c),N=v.getResultMetadata();let S=270;N!==null&&N.get(je.ORIENTATION)===!0&&(S=S+N.get(je.ORIENTATION)%360),v.putMetadata(je.ORIENTATION,S);const F=v.getResultPoints();if(F!==null){const G=g.getHeight();for(let ee=0;ee<F.length;ee++)F[ee]=new pe(G-F[ee].getY()-1,F[ee].getX())}return v}else throw new X}}reset(){}doDecode(n,c){const u=n.getWidth(),m=n.getHeight();let g=new B(u);const v=c&&c.get(U.TRY_HARDER)===!0,N=Math.max(1,m>>(v?8:5));let S;v?S=m:S=15;const F=Math.trunc(m/2);for(let G=0;G<S;G++){const ee=Math.trunc((G+1)/2),ue=(G&1)===0,Ee=F+N*(ue?ee:-ee);if(Ee<0||Ee>=m)break;try{g=n.getBlackRow(Ee,g)}catch{continue}for(let De=0;De<2;De++){if(De===1&&(g.reverse(),c&&c.get(U.NEED_RESULT_POINT_CALLBACK)===!0)){const Oe=new Map;c.forEach((ze,Ke)=>Oe.set(Ke,ze)),Oe.delete(U.NEED_RESULT_POINT_CALLBACK),c=Oe}try{const Oe=this.decodeRow(Ee,g,c);if(De===1){Oe.putMetadata(je.ORIENTATION,180);const ze=Oe.getResultPoints();ze!==null&&(ze[0]=new pe(u-ze[0].getX()-1,ze[0].getY()),ze[1]=new pe(u-ze[1].getX()-1,ze[1].getY()))}return Oe}catch{}}}throw new X}static recordPattern(n,c,u){const m=u.length;for(let F=0;F<m;F++)u[F]=0;const g=n.getSize();if(c>=g)throw new X;let v=!n.get(c),N=0,S=c;for(;S<g;){if(n.get(S)!==v)u[N]++;else{if(++N===m)break;u[N]=1,v=!v}S++}if(!(N===m||N===m-1&&S===g))throw new X}static recordPatternInReverse(n,c,u){let m=u.length,g=n.get(c);for(;c>0&&m>=0;)n.get(--c)!==g&&(m--,g=!g);if(m>=0)throw new X;Nt.recordPattern(n,c+1,u)}static patternMatchVariance(n,c,u){const m=n.length;let g=0,v=0;for(let F=0;F<m;F++)g+=n[F],v+=c[F];if(g<v)return Number.POSITIVE_INFINITY;const N=g/v;u*=N;let S=0;for(let F=0;F<m;F++){const G=n[F],ee=c[F]*N,ue=G>ee?G-ee:ee-G;if(ue>u)return Number.POSITIVE_INFINITY;S+=ue}return S/g}}class ot extends Nt{static findStartPattern(n){const c=n.getSize(),u=n.getNextSet(0);let m=0,g=Int32Array.from([0,0,0,0,0,0]),v=u,N=!1;const S=6;for(let F=u;F<c;F++)if(n.get(F)!==N)g[m]++;else{if(m===S-1){let G=ot.MAX_AVG_VARIANCE,ee=-1;for(let ue=ot.CODE_START_A;ue<=ot.CODE_START_C;ue++){const Ee=Nt.patternMatchVariance(g,ot.CODE_PATTERNS[ue],ot.MAX_INDIVIDUAL_VARIANCE);Ee<G&&(G=Ee,ee=ue)}if(ee>=0&&n.isRange(Math.max(0,v-(F-v)/2),v,!1))return Int32Array.from([v,F,ee]);v+=g[0]+g[1],g=g.slice(2,g.length-1),g[m-1]=0,g[m]=0,m--}else m++;g[m]=1,N=!N}throw new X}static decodeCode(n,c,u){Nt.recordPattern(n,u,c);let m=ot.MAX_AVG_VARIANCE,g=-1;for(let v=0;v<ot.CODE_PATTERNS.length;v++){const N=ot.CODE_PATTERNS[v],S=this.patternMatchVariance(c,N,ot.MAX_INDIVIDUAL_VARIANCE);S<m&&(m=S,g=v)}if(g>=0)return g;throw new X}decodeRow(n,c,u){const m=u&&u.get(U.ASSUME_GS1)===!0,g=ot.findStartPattern(c),v=g[2];let N=0;const S=new Uint8Array(20);S[N++]=v;let F;switch(v){case ot.CODE_START_A:F=ot.CODE_CODE_A;break;case ot.CODE_START_B:F=ot.CODE_CODE_B;break;case ot.CODE_START_C:F=ot.CODE_CODE_C;break;default:throw new L}let G=!1,ee=!1,ue="",Ee=g[0],De=g[1];const Oe=Int32Array.from([0,0,0,0,0,0]);let ze=0,Ke=0,mt=v,pt=0,xt=!0,Kt=!1,Yt=!1;for(;!G;){const Gn=ee;switch(ee=!1,ze=Ke,Ke=ot.decodeCode(c,Oe,De),S[N++]=Ke,Ke!==ot.CODE_STOP&&(xt=!0),Ke!==ot.CODE_STOP&&(pt++,mt+=pt*Ke),Ee=De,De+=Oe.reduce((Ms,wd)=>Ms+wd,0),Ke){case ot.CODE_START_A:case ot.CODE_START_B:case ot.CODE_START_C:throw new L}switch(F){case ot.CODE_CODE_A:if(Ke<64)Yt===Kt?ue+=String.fromCharCode(32+Ke):ue+=String.fromCharCode(32+Ke+128),Yt=!1;else if(Ke<96)Yt===Kt?ue+=String.fromCharCode(Ke-64):ue+=String.fromCharCode(Ke+64),Yt=!1;else switch(Ke!==ot.CODE_STOP&&(xt=!1),Ke){case ot.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case ot.CODE_FNC_2:case ot.CODE_FNC_3:break;case ot.CODE_FNC_4_A:!Kt&&Yt?(Kt=!0,Yt=!1):Kt&&Yt?(Kt=!1,Yt=!1):Yt=!0;break;case ot.CODE_SHIFT:ee=!0,F=ot.CODE_CODE_B;break;case ot.CODE_CODE_B:F=ot.CODE_CODE_B;break;case ot.CODE_CODE_C:F=ot.CODE_CODE_C;break;case ot.CODE_STOP:G=!0;break}break;case ot.CODE_CODE_B:if(Ke<96)Yt===Kt?ue+=String.fromCharCode(32+Ke):ue+=String.fromCharCode(32+Ke+128),Yt=!1;else switch(Ke!==ot.CODE_STOP&&(xt=!1),Ke){case ot.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case ot.CODE_FNC_2:case ot.CODE_FNC_3:break;case ot.CODE_FNC_4_B:!Kt&&Yt?(Kt=!0,Yt=!1):Kt&&Yt?(Kt=!1,Yt=!1):Yt=!0;break;case ot.CODE_SHIFT:ee=!0,F=ot.CODE_CODE_A;break;case ot.CODE_CODE_A:F=ot.CODE_CODE_A;break;case ot.CODE_CODE_C:F=ot.CODE_CODE_C;break;case ot.CODE_STOP:G=!0;break}break;case ot.CODE_CODE_C:if(Ke<100)Ke<10&&(ue+="0"),ue+=Ke;else switch(Ke!==ot.CODE_STOP&&(xt=!1),Ke){case ot.CODE_FNC_1:m&&(ue.length===0?ue+="]C1":ue+="");break;case ot.CODE_CODE_A:F=ot.CODE_CODE_A;break;case ot.CODE_CODE_B:F=ot.CODE_CODE_B;break;case ot.CODE_STOP:G=!0;break}break}Gn&&(F=F===ot.CODE_CODE_A?ot.CODE_CODE_B:ot.CODE_CODE_A)}const Ha=De-Ee;if(De=c.getNextUnset(De),!c.isRange(De,Math.min(c.getSize(),De+(De-Ee)/2),!1))throw new X;if(mt-=pt*ze,mt%103!==ze)throw new _;const Es=ue.length;if(Es===0)throw new X;Es>0&&xt&&(F===ot.CODE_CODE_C?ue=ue.substring(0,Es-2):ue=ue.substring(0,Es-1));const es=(g[1]+g[0])/2,_r=Ee+Ha/2,Sa=S.length,ts=new Uint8Array(Sa);for(let Gn=0;Gn<Sa;Gn++)ts[Gn]=S[Gn];const ui=[new pe(es,n),new pe(_r,n)];return new ae(ue,ts,0,ui,Z.CODE_128,new Date().getTime())}}ot.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ot.MAX_AVG_VARIANCE=.25,ot.MAX_INDIVIDUAL_VARIANCE=.7,ot.CODE_SHIFT=98,ot.CODE_CODE_C=99,ot.CODE_CODE_B=100,ot.CODE_CODE_A=101,ot.CODE_FNC_1=102,ot.CODE_FNC_2=97,ot.CODE_FNC_3=96,ot.CODE_FNC_4_A=101,ot.CODE_FNC_4_B=100,ot.CODE_START_A=103,ot.CODE_START_B=104,ot.CODE_START_C=105,ot.CODE_STOP=106;class St extends Nt{constructor(n=!1,c=!1){super(),this.usingCheckDigit=n,this.extendedMode=c,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(n,c,u){let m=this.counters;m.fill(0),this.decodeRowResult="";let g=St.findAsteriskPattern(c,m),v=c.getNextSet(g[1]),N=c.getSize(),S,F;do{St.recordPattern(c,v,m);let Oe=St.toNarrowWidePattern(m);if(Oe<0)throw new X;S=St.patternToChar(Oe),this.decodeRowResult+=S,F=v;for(let ze of m)v+=ze;v=c.getNextSet(v)}while(S!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let G=0;for(let Oe of m)G+=Oe;let ee=v-F-G;if(v!==N&&ee*2<G)throw new X;if(this.usingCheckDigit){let Oe=this.decodeRowResult.length-1,ze=0;for(let Ke=0;Ke<Oe;Ke++)ze+=St.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Ke));if(this.decodeRowResult.charAt(Oe)!==St.ALPHABET_STRING.charAt(ze%43))throw new _;this.decodeRowResult=this.decodeRowResult.substring(0,Oe)}if(this.decodeRowResult.length===0)throw new X;let ue;this.extendedMode?ue=St.decodeExtended(this.decodeRowResult):ue=this.decodeRowResult;let Ee=(g[1]+g[0])/2,De=F+G/2;return new ae(ue,null,0,[new pe(Ee,n),new pe(De,n)],Z.CODE_39,new Date().getTime())}static findAsteriskPattern(n,c){let u=n.getSize(),m=n.getNextSet(0),g=0,v=m,N=!1,S=c.length;for(let F=m;F<u;F++)if(n.get(F)!==N)c[g]++;else{if(g===S-1){if(this.toNarrowWidePattern(c)===St.ASTERISK_ENCODING&&n.isRange(Math.max(0,v-Math.floor((F-v)/2)),v,!1))return[v,F];v+=c[0]+c[1],c.copyWithin(0,2,2+g-1),c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,N=!N}throw new X}static toNarrowWidePattern(n){let c=n.length,u=0,m;do{let g=2147483647;for(let S of n)S<g&&S>u&&(g=S);u=g,m=0;let v=0,N=0;for(let S=0;S<c;S++){let F=n[S];F>u&&(N|=1<<c-1-S,m++,v+=F)}if(m===3){for(let S=0;S<c&&m>0;S++){let F=n[S];if(F>u&&(m--,F*2>=v))return-1}return N}}while(m>3);return-1}static patternToChar(n){for(let c=0;c<St.CHARACTER_ENCODINGS.length;c++)if(St.CHARACTER_ENCODINGS[c]===n)return St.ALPHABET_STRING.charAt(c);if(n===St.ASTERISK_ENCODING)return"*";throw new X}static decodeExtended(n){let c=n.length,u="";for(let m=0;m<c;m++){let g=n.charAt(m);if(g==="+"||g==="$"||g==="%"||g==="/"){let v=n.charAt(m+1),N="\0";switch(g){case"+":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)+32);else throw new L;break;case"$":if(v>="A"&&v<="Z")N=String.fromCharCode(v.charCodeAt(0)-64);else throw new L;break;case"%":if(v>="A"&&v<="E")N=String.fromCharCode(v.charCodeAt(0)-38);else if(v>="F"&&v<="J")N=String.fromCharCode(v.charCodeAt(0)-11);else if(v>="K"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)+16);else if(v>="P"&&v<="T")N=String.fromCharCode(v.charCodeAt(0)+43);else if(v==="U")N="\0";else if(v==="V")N="@";else if(v==="W")N="`";else if(v==="X"||v==="Y"||v==="Z")N="";else throw new L;break;case"/":if(v>="A"&&v<="O")N=String.fromCharCode(v.charCodeAt(0)-32);else if(v==="Z")N=":";else throw new L;break}u+=N,m++}else u+=g}return u}}St.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",St.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],St.ASTERISK_ENCODING=148;class wt extends Nt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(n,c,u){let m=this.decodeStart(c),g=this.decodeEnd(c),v=new ne;wt.decodeMiddle(c,m[1],g[0],v);let N=v.toString(),S=null;u!=null&&(S=u.get(U.ALLOWED_LENGTHS)),S==null&&(S=wt.DEFAULT_ALLOWED_LENGTHS);let F=N.length,G=!1,ee=0;for(let De of S){if(F===De){G=!0;break}De>ee&&(ee=De)}if(!G&&F>ee&&(G=!0),!G)throw new L;const ue=[new pe(m[1],n),new pe(g[0],n)];return new ae(N,null,0,ue,Z.ITF,new Date().getTime())}static decodeMiddle(n,c,u,m){let g=new Int32Array(10),v=new Int32Array(5),N=new Int32Array(5);for(g.fill(0),v.fill(0),N.fill(0);c<u;){Nt.recordPattern(n,c,g);for(let F=0;F<5;F++){let G=2*F;v[F]=g[G],N[F]=g[G+1]}let S=wt.decodeDigit(v);m.append(S.toString()),S=this.decodeDigit(N),m.append(S.toString()),g.forEach(function(F){c+=F})}}decodeStart(n){let c=wt.skipWhiteSpace(n),u=wt.findGuardPattern(n,c,wt.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(n,u[0]),u}validateQuietZone(n,c){let u=this.narrowLineWidth*10;u=u<c?u:c;for(let m=c-1;u>0&&m>=0&&!n.get(m);m--)u--;if(u!==0)throw new X}static skipWhiteSpace(n){const c=n.getSize(),u=n.getNextSet(0);if(u===c)throw new X;return u}decodeEnd(n){n.reverse();try{let c=wt.skipWhiteSpace(n),u;try{u=wt.findGuardPattern(n,c,wt.END_PATTERN_REVERSED[0])}catch(g){g instanceof X&&(u=wt.findGuardPattern(n,c,wt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(n,u[0]);let m=u[0];return u[0]=n.getSize()-u[1],u[1]=n.getSize()-m,u}finally{n.reverse()}}static findGuardPattern(n,c,u){let m=u.length,g=new Int32Array(m),v=n.getSize(),N=!1,S=0,F=c;g.fill(0);for(let G=c;G<v;G++)if(n.get(G)!==N)g[S]++;else{if(S===m-1){if(Nt.patternMatchVariance(g,u,wt.MAX_INDIVIDUAL_VARIANCE)<wt.MAX_AVG_VARIANCE)return[F,G];F+=g[0]+g[1],A.arraycopy(g,2,g,0,S-1),g[S-1]=0,g[S]=0,S--}else S++;g[S]=1,N=!N}throw new X}static decodeDigit(n){let c=wt.MAX_AVG_VARIANCE,u=-1,m=wt.PATTERNS.length;for(let g=0;g<m;g++){let v=wt.PATTERNS[g],N=Nt.patternMatchVariance(n,v,wt.MAX_INDIVIDUAL_VARIANCE);N<c?(c=N,u=g):N===c&&(u=-1)}if(u>=0)return u%10;throw new X}}wt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],wt.MAX_AVG_VARIANCE=.38,wt.MAX_INDIVIDUAL_VARIANCE=.5,wt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],wt.START_PATTERN=Int32Array.from([1,1,1,1]),wt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class nt extends Nt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(n){let c=!1,u,m=0,g=Int32Array.from([0,0,0]);for(;!c;){g=Int32Array.from([0,0,0]),u=nt.findGuardPattern(n,m,!1,this.START_END_PATTERN,g);let v=u[0];m=u[1];let N=v-(m-v);N>=0&&(c=n.isRange(N,v,!1))}return u}static checkChecksum(n){return nt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let c=n.length;if(c===0)return!1;let u=parseInt(n.charAt(c-1),10);return nt.getStandardUPCEANChecksum(n.substring(0,c-1))===u}static getStandardUPCEANChecksum(n){let c=n.length,u=0;for(let m=c-1;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}u*=3;for(let m=c-2;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}return(1e3-u)%10}static decodeEnd(n,c){return nt.findGuardPattern(n,c,!1,nt.START_END_PATTERN,new Int32Array(nt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(n,c,u,m){return this.findGuardPattern(n,c,u,m,new Int32Array(m.length))}static findGuardPattern(n,c,u,m,g){let v=n.getSize();c=u?n.getNextUnset(c):n.getNextSet(c);let N=0,S=c,F=m.length,G=u;for(let ee=c;ee<v;ee++)if(n.get(ee)!==G)g[N]++;else{if(N===F-1){if(Nt.patternMatchVariance(g,m,nt.MAX_INDIVIDUAL_VARIANCE)<nt.MAX_AVG_VARIANCE)return Int32Array.from([S,ee]);S+=g[0]+g[1];let ue=g.slice(2,g.length-1);for(let Ee=0;Ee<N-1;Ee++)g[Ee]=ue[Ee];g[N-1]=0,g[N]=0,N--}else N++;g[N]=1,G=!G}throw new X}static decodeDigit(n,c,u,m){this.recordPattern(n,u,c);let g=this.MAX_AVG_VARIANCE,v=-1,N=m.length;for(let S=0;S<N;S++){let F=m[S],G=Nt.patternMatchVariance(c,F,nt.MAX_INDIVIDUAL_VARIANCE);G<g&&(g=G,v=S)}if(v>=0)return v;throw new X}}nt.MAX_AVG_VARIANCE=.48,nt.MAX_INDIVIDUAL_VARIANCE=.7,nt.START_END_PATTERN=Int32Array.from([1,1,1]),nt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),nt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),nt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class kt{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,c,u){let m=this.decodeRowStringBuffer,g=this.decodeMiddle(c,u,m),v=m.toString(),N=kt.parseExtensionString(v),S=[new pe((u[0]+u[1])/2,n),new pe(g,n)],F=new ae(v,null,0,S,Z.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&F.putAllMetadata(N),F}decodeMiddle(n,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1],N=0;for(let F=0;F<5&&v<g;F++){let G=nt.decodeDigit(n,m,v,nt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+G%10);for(let ee of m)v+=ee;G>=10&&(N|=1<<4-F),F!==4&&(v=n.getNextSet(v),v=n.getNextUnset(v))}if(u.length!==5)throw new X;let S=this.determineCheckDigit(N);if(kt.extensionChecksum(u.toString())!==S)throw new X;return v}static extensionChecksum(n){let c=n.length,u=0;for(let m=c-2;m>=0;m-=2)u+=n.charAt(m).charCodeAt(0)-48;u*=3;for(let m=c-1;m>=0;m-=2)u+=n.charAt(m).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(n){for(let c=0;c<10;c++)if(n===this.CHECK_DIGIT_ENCODINGS[c])return c;throw new X}static parseExtensionString(n){if(n.length!==5)return null;let c=kt.parseExtension5String(n);return c==null?null:new Map([[je.SUGGESTED_PRICE,c]])}static parseExtension5String(n){let c;switch(n.charAt(0)){case"0":c="";break;case"5":c="$";break;case"9":switch(n){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}c="";break;default:c="";break}let u=parseInt(n.substring(1)),m=(u/100).toString(),g=u%100,v=g<10?"0"+g:g.toString();return c+m+"."+v}}class Is{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(n,c,u){let m=this.decodeRowStringBuffer,g=this.decodeMiddle(c,u,m),v=m.toString(),N=Is.parseExtensionString(v),S=[new pe((u[0]+u[1])/2,n),new pe(g,n)],F=new ae(v,null,0,S,Z.UPC_EAN_EXTENSION,new Date().getTime());return N!=null&&F.putAllMetadata(N),F}decodeMiddle(n,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1],N=0;for(let S=0;S<2&&v<g;S++){let F=nt.decodeDigit(n,m,v,nt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+F%10);for(let G of m)v+=G;F>=10&&(N|=1<<1-S),S!==1&&(v=n.getNextSet(v),v=n.getNextUnset(v))}if(u.length!==2)throw new X;if(parseInt(u.toString())%4!==N)throw new X;return v}static parseExtensionString(n){return n.length!==2?null:new Map([[je.ISSUE_NUMBER,parseInt(n)]])}}class On{static decodeRow(n,c,u){let m=nt.findGuardPattern(c,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new kt().decodeRow(n,c,m)}catch{return new Is().decodeRow(n,c,m)}}}On.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Tt extends nt{constructor(){super(),this.decodeRowStringBuffer="",Tt.L_AND_G_PATTERNS=Tt.L_PATTERNS.map(n=>Int32Array.from(n));for(let n=10;n<20;n++){let c=Tt.L_PATTERNS[n-10],u=new Int32Array(c.length);for(let m=0;m<c.length;m++)u[m]=c[c.length-m-1];Tt.L_AND_G_PATTERNS[n]=u}}decodeRow(n,c,u){let m=Tt.findStartGuardPattern(c),g=u==null?null:u.get(U.NEED_RESULT_POINT_CALLBACK);if(g!=null){const xt=new pe((m[0]+m[1])/2,n);g.foundPossibleResultPoint(xt)}let v=this.decodeMiddle(c,m,this.decodeRowStringBuffer),N=v.rowOffset,S=v.resultString;if(g!=null){const xt=new pe(N,n);g.foundPossibleResultPoint(xt)}let F=this.decodeEnd(c,N);if(g!=null){const xt=new pe((F[0]+F[1])/2,n);g.foundPossibleResultPoint(xt)}let G=F[1],ee=G+(G-F[0]);if(ee>=c.getSize()||!c.isRange(G,ee,!1))throw new X;let ue=S.toString();if(ue.length<8)throw new L;if(!Tt.checkChecksum(ue))throw new _;let Ee=(m[1]+m[0])/2,De=(F[1]+F[0])/2,Oe=this.getBarcodeFormat(),ze=[new pe(Ee,n),new pe(De,n)],Ke=new ae(ue,null,0,ze,Oe,new Date().getTime()),mt=0;try{let xt=On.decodeRow(n,c,F[1]);Ke.putMetadata(je.UPC_EAN_EXTENSION,xt.getText()),Ke.putAllMetadata(xt.getResultMetadata()),Ke.addResultPoints(xt.getResultPoints()),mt=xt.getText().length}catch{}let pt=u==null?null:u.get(U.ALLOWED_EAN_EXTENSIONS);if(pt!=null){let xt=!1;for(let Kt in pt)if(mt.toString()===Kt){xt=!0;break}if(!xt)throw new X}return Ke}decodeEnd(n,c){return Tt.findGuardPattern(n,c,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static checkChecksum(n){return Tt.checkStandardUPCEANChecksum(n)}static checkStandardUPCEANChecksum(n){let c=n.length;if(c===0)return!1;let u=parseInt(n.charAt(c-1),10);return Tt.getStandardUPCEANChecksum(n.substring(0,c-1))===u}static getStandardUPCEANChecksum(n){let c=n.length,u=0;for(let m=c-1;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}u*=3;for(let m=c-2;m>=0;m-=2){let g=n.charAt(m).charCodeAt(0)-48;if(g<0||g>9)throw new L;u+=g}return(1e3-u)%10}}class Qr extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,c,u){let m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1],N=0;for(let F=0;F<6&&v<g;F++){let G=Tt.decodeDigit(n,m,v,Tt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+G%10);for(let ee of m)v+=ee;G>=10&&(N|=1<<5-F)}u=Qr.determineFirstDigit(u,N),v=Tt.findGuardPattern(n,v,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let F=0;F<6&&v<g;F++){let G=Tt.decodeDigit(n,m,v,Tt.L_PATTERNS);u+=String.fromCharCode(48+G);for(let ee of m)v+=ee}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return Z.EAN_13}static determineFirstDigit(n,c){for(let u=0;u<10;u++)if(c===this.FIRST_DIGIT_ENCODINGS[u])return n=String.fromCharCode(48+u)+n,n;throw new X}}Qr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ks extends Tt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(n,c,u){const m=this.decodeMiddleCounters;m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v=c[1];for(let S=0;S<4&&v<g;S++){let F=Tt.decodeDigit(n,m,v,Tt.L_PATTERNS);u+=String.fromCharCode(48+F);for(let G of m)v+=G}v=Tt.findGuardPattern(n,v,!0,Tt.MIDDLE_PATTERN,new Int32Array(Tt.MIDDLE_PATTERN.length).fill(0))[1];for(let S=0;S<4&&v<g;S++){let F=Tt.decodeDigit(n,m,v,Tt.L_PATTERNS);u+=String.fromCharCode(48+F);for(let G of m)v+=G}return{rowOffset:v,resultString:u}}getBarcodeFormat(){return Z.EAN_8}}class Al extends Tt{constructor(){super(...arguments),this.ean13Reader=new Qr}getBarcodeFormat(){return Z.UPC_A}decode(n,c){return this.maybeReturnResult(this.ean13Reader.decode(n))}decodeRow(n,c,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(n,c,u))}decodeMiddle(n,c,u){return this.ean13Reader.decodeMiddle(n,c,u)}maybeReturnResult(n){let c=n.getText();if(c.charAt(0)==="0"){let u=new ae(c.substring(1),null,null,n.getResultPoints(),Z.UPC_A);return n.getResultMetadata()!=null&&u.putAllMetadata(n.getResultMetadata()),u}else throw new X}reset(){this.ean13Reader.reset()}}class Wa extends Tt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(n,c,u){const m=this.decodeMiddleCounters.map(F=>F);m[0]=0,m[1]=0,m[2]=0,m[3]=0;const g=n.getSize();let v=c[1],N=0;for(let F=0;F<6&&v<g;F++){const G=Wa.decodeDigit(n,m,v,Wa.L_AND_G_PATTERNS);u+=String.fromCharCode(48+G%10);for(let ee of m)v+=ee;G>=10&&(N|=1<<5-F)}let S=Wa.determineNumSysAndCheckDigit(u,N);return{rowOffset:v,resultString:S}}decodeEnd(n,c){return Wa.findGuardPatternWithoutCounters(n,c,!0,Wa.MIDDLE_END_PATTERN)}checkChecksum(n){return Tt.checkChecksum(Wa.convertUPCEtoUPCA(n))}static determineNumSysAndCheckDigit(n,c){for(let u=0;u<=1;u++)for(let m=0;m<10;m++)if(c===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][m]){let g=String.fromCharCode(48+u),v=String.fromCharCode(48+m);return g+n+v}throw X.getNotFoundInstance()}getBarcodeFormat(){return Z.UPC_E}static convertUPCEtoUPCA(n){const c=n.slice(1,7).split("").map(g=>g.charCodeAt(0)),u=new ne;u.append(n.charAt(0));let m=c[5];switch(m){case 0:case 1:case 2:u.appendChars(c,0,2),u.append(m),u.append("0000"),u.appendChars(c,2,3);break;case 3:u.appendChars(c,0,3),u.append("00000"),u.appendChars(c,3,2);break;case 4:u.appendChars(c,0,4),u.append("00000"),u.append(c[4]);break;default:u.appendChars(c,0,5),u.append("0000"),u.append(m);break}return n.length>=8&&u.append(n.charAt(7)),u.toString()}}Wa.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Wa.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class ii extends Nt{constructor(n){super();let c=n==null?null:n.get(U.POSSIBLE_FORMATS),u=[];i(c)?(u.push(new Qr),u.push(new Al),u.push(new Ks),u.push(new Wa)):(c.indexOf(Z.EAN_13)>-1&&u.push(new Qr),c.indexOf(Z.UPC_A)>-1&&u.push(new Al),c.indexOf(Z.EAN_8)>-1&&u.push(new Ks),c.indexOf(Z.UPC_E)>-1&&u.push(new Wa)),this.readers=u}decodeRow(n,c,u){for(let m of this.readers)try{const g=m.decodeRow(n,c,u),v=g.getBarcodeFormat()===Z.EAN_13&&g.getText().charAt(0)==="0",N=u==null?null:u.get(U.POSSIBLE_FORMATS),S=N==null||N.includes(Z.UPC_A);if(v&&S){const F=g.getRawBytes(),G=new ae(g.getText().substring(1),F,F?F.length:null,g.getResultPoints(),Z.UPC_A);return G.putAllMetadata(g.getResultMetadata()),G}return g}catch{}throw new X}reset(){for(let n of this.readers)n.reset()}}class Jr extends Nt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(n,c){for(let u=0;u<c.length;u++)if(Nt.patternMatchVariance(n,c[u],Jr.MAX_INDIVIDUAL_VARIANCE)<Jr.MAX_AVG_VARIANCE)return u;throw new X}static count(n){return me.sum(new Int32Array(n))}static increment(n,c){let u=0,m=c[0];for(let g=1;g<n.length;g++)c[g]>m&&(m=c[g],u=g);n[u]++}static decrement(n,c){let u=0,m=c[0];for(let g=1;g<n.length;g++)c[g]<m&&(m=c[g],u=g);n[u]--}static isFinderPattern(n){let c=n[0]+n[1],u=c+n[2]+n[3],m=c/u;if(m>=Jr.MIN_FINDER_PATTERN_RATIO&&m<=Jr.MAX_FINDER_PATTERN_RATIO){let g=Number.MAX_SAFE_INTEGER,v=Number.MIN_SAFE_INTEGER;for(let N of n)N>v&&(v=N),N<g&&(g=N);return v<10*g}return!1}}Jr.MAX_AVG_VARIANCE=.2,Jr.MAX_INDIVIDUAL_VARIANCE=.45,Jr.MIN_FINDER_PATTERN_RATIO=9.5/12,Jr.MAX_FINDER_PATTERN_RATIO=12.5/14;class hn{constructor(n,c){this.value=n,this.checksumPortion=c}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(n){if(!(n instanceof hn))return!1;const c=n;return this.value===c.value&&this.checksumPortion===c.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Bi{constructor(n,c,u,m,g){this.value=n,this.startEnd=c,this.value=n,this.startEnd=c,this.resultPoints=new Array,this.resultPoints.push(new pe(u,g)),this.resultPoints.push(new pe(m,g))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(n){if(!(n instanceof Bi))return!1;const c=n;return this.value===c.value}hashCode(){return this.value}}class la{constructor(){}static getRSSvalue(n,c,u){let m=0;for(let S of n)m+=S;let g=0,v=0,N=n.length;for(let S=0;S<N-1;S++){let F;for(F=1,v|=1<<S;F<n[S];F++,v&=~(1<<S)){let G=la.combins(m-F-1,N-S-2);if(u&&v===0&&m-F-(N-S-1)>=N-S-1&&(G-=la.combins(m-F-(N-S),N-S-2)),N-S-1>1){let ee=0;for(let ue=m-F-(N-S-2);ue>c;ue--)ee+=la.combins(m-F-ue-1,N-S-3);G-=ee*(N-1-S)}else m-F>c&&G--;g+=G}m-=F}return g}static combins(n,c){let u,m;n-c>c?(m=c,u=n-c):(m=n-c,u=c);let g=1,v=1;for(let N=n;N>u;N--)g*=N,v<=m&&(g/=v,v++);for(;v<=m;)g/=v,v++;return g}}class ha{static buildBitArray(n){let c=n.length*2-1;n[n.length-1].getRightChar()==null&&(c-=1);let u=12*c,m=new B(u),g=0,N=n[0].getRightChar().getValue();for(let S=11;S>=0;--S)(N&1<<S)!=0&&m.set(g),g++;for(let S=1;S<n.length;++S){let F=n[S],G=F.getLeftChar().getValue();for(let ee=11;ee>=0;--ee)(G&1<<ee)!=0&&m.set(g),g++;if(F.getRightChar()!=null){let ee=F.getRightChar().getValue();for(let ue=11;ue>=0;--ue)(ee&1<<ue)!=0&&m.set(g),g++}}return m}}class Lr{constructor(n,c){c?this.decodedInformation=null:(this.finished=n,this.decodedInformation=c)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Zs{constructor(n){this.newPosition=n}getNewPosition(){return this.newPosition}}class ma extends Zs{constructor(n,c){super(n),this.value=c}getValue(){return this.value}isFNC1(){return this.value===ma.FNC1}}ma.FNC1="$";class mn extends Zs{constructor(n,c,u){super(n),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=c}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class de extends Zs{constructor(n,c,u){if(super(n),c<0||c>10||u<0||u>10)throw new L;this.firstDigit=c,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===de.FNC1}isSecondDigitFNC1(){return this.secondDigit===de.FNC1}isAnyFNC1(){return this.firstDigit===de.FNC1||this.secondDigit===de.FNC1}}de.FNC1=10;class he{constructor(){}static parseFieldsInGeneralPurpose(n){if(!n)return null;if(n.length<2)throw new X;let c=n.substring(0,2);for(let g of he.TWO_DIGIT_DATA_LENGTH)if(g[0]===c)return g[1]===he.VARIABLE_LENGTH?he.processVariableAI(2,g[2],n):he.processFixedAI(2,g[1],n);if(n.length<3)throw new X;let u=n.substring(0,3);for(let g of he.THREE_DIGIT_DATA_LENGTH)if(g[0]===u)return g[1]===he.VARIABLE_LENGTH?he.processVariableAI(3,g[2],n):he.processFixedAI(3,g[1],n);for(let g of he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(g[0]===u)return g[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,g[2],n):he.processFixedAI(4,g[1],n);if(n.length<4)throw new X;let m=n.substring(0,4);for(let g of he.FOUR_DIGIT_DATA_LENGTH)if(g[0]===m)return g[1]===he.VARIABLE_LENGTH?he.processVariableAI(4,g[2],n):he.processFixedAI(4,g[1],n);throw new X}static processFixedAI(n,c,u){if(u.length<n)throw new X;let m=u.substring(0,n);if(u.length<n+c)throw new X;let g=u.substring(n,n+c),v=u.substring(n+c),N="("+m+")"+g,S=he.parseFieldsInGeneralPurpose(v);return S==null?N:N+S}static processVariableAI(n,c,u){let m=u.substring(0,n),g;u.length<n+c?g=u.length:g=n+c;let v=u.substring(n,g),N=u.substring(g),S="("+m+")"+v,F=he.parseFieldsInGeneralPurpose(N);return F==null?S:S+F}}he.VARIABLE_LENGTH=[],he.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",he.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",he.VARIABLE_LENGTH,20],["22",he.VARIABLE_LENGTH,29],["30",he.VARIABLE_LENGTH,8],["37",he.VARIABLE_LENGTH,8],["90",he.VARIABLE_LENGTH,30],["91",he.VARIABLE_LENGTH,30],["92",he.VARIABLE_LENGTH,30],["93",he.VARIABLE_LENGTH,30],["94",he.VARIABLE_LENGTH,30],["95",he.VARIABLE_LENGTH,30],["96",he.VARIABLE_LENGTH,30],["97",he.VARIABLE_LENGTH,3],["98",he.VARIABLE_LENGTH,30],["99",he.VARIABLE_LENGTH,30]],he.THREE_DIGIT_DATA_LENGTH=[["240",he.VARIABLE_LENGTH,30],["241",he.VARIABLE_LENGTH,30],["242",he.VARIABLE_LENGTH,6],["250",he.VARIABLE_LENGTH,30],["251",he.VARIABLE_LENGTH,30],["253",he.VARIABLE_LENGTH,17],["254",he.VARIABLE_LENGTH,20],["400",he.VARIABLE_LENGTH,30],["401",he.VARIABLE_LENGTH,30],["402",17],["403",he.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",he.VARIABLE_LENGTH,20],["421",he.VARIABLE_LENGTH,15],["422",3],["423",he.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],he.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",he.VARIABLE_LENGTH,15],["391",he.VARIABLE_LENGTH,18],["392",he.VARIABLE_LENGTH,15],["393",he.VARIABLE_LENGTH,18],["703",he.VARIABLE_LENGTH,30]],he.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",he.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",he.VARIABLE_LENGTH,20],["8003",he.VARIABLE_LENGTH,30],["8004",he.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",he.VARIABLE_LENGTH,30],["8008",he.VARIABLE_LENGTH,12],["8018",18],["8020",he.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",he.VARIABLE_LENGTH,70],["8200",he.VARIABLE_LENGTH,70]];class ge{constructor(n){this.buffer=new ne,this.information=n}decodeAllCodes(n,c){let u=c,m=null;do{let g=this.decodeGeneralPurposeField(u,m),v=he.parseFieldsInGeneralPurpose(g.getNewString());if(v!=null&&n.append(v),g.isRemaining()?m=""+g.getRemainingValue():m=null,u===g.getNewPosition())break;u=g.getNewPosition()}while(!0);return n.toString()}isStillNumeric(n){if(n+7>this.information.getSize())return n+4<=this.information.getSize();for(let c=n;c<n+3;++c)if(this.information.get(c))return!0;return this.information.get(n+3)}decodeNumeric(n){if(n+7>this.information.getSize()){let g=this.extractNumericValueFromBitArray(n,4);return g===0?new de(this.information.getSize(),de.FNC1,de.FNC1):new de(this.information.getSize(),g-1,de.FNC1)}let c=this.extractNumericValueFromBitArray(n,7),u=(c-8)/11,m=(c-8)%11;return new de(n+7,u,m)}extractNumericValueFromBitArray(n,c){return ge.extractNumericValueFromBitArray(this.information,n,c)}static extractNumericValueFromBitArray(n,c,u){let m=0;for(let g=0;g<u;++g)n.get(c+g)&&(m|=1<<u-g-1);return m}decodeGeneralPurposeField(n,c){this.buffer.setLengthToZero(),c!=null&&this.buffer.append(c),this.current.setPosition(n);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new mn(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new mn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let n,c;do{let u=this.current.getPosition();if(this.current.isAlpha()?(c=this.parseAlphaBlock(),n=c.isFinished()):this.current.isIsoIec646()?(c=this.parseIsoIec646Block(),n=c.isFinished()):(c=this.parseNumericBlock(),n=c.isFinished()),!(u!==this.current.getPosition())&&!n)break}while(!n);return c.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let n=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFirstDigitFNC1()){let c;return n.isSecondDigitFNC1()?c=new mn(this.current.getPosition(),this.buffer.toString()):c=new mn(this.current.getPosition(),this.buffer.toString(),n.getSecondDigit()),new Lr(!0,c)}if(this.buffer.append(n.getFirstDigit()),n.isSecondDigitFNC1()){let c=new mn(this.current.getPosition(),this.buffer.toString());return new Lr(!0,c)}this.buffer.append(n.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Lr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let n=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let c=new mn(this.current.getPosition(),this.buffer.toString());return new Lr(!0,c)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Lr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let n=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(n.getNewPosition()),n.isFNC1()){let c=new mn(this.current.getPosition(),this.buffer.toString());return new Lr(!0,c)}this.buffer.append(n.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Lr(!1)}isStillIsoIec646(n){if(n+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,5);if(c>=5&&c<16)return!0;if(n+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,7);if(u>=64&&u<116)return!0;if(n+8>this.information.getSize())return!1;let m=this.extractNumericValueFromBitArray(n,8);return m>=232&&m<253}decodeIsoIec646(n){let c=this.extractNumericValueFromBitArray(n,5);if(c===15)return new ma(n+5,ma.FNC1);if(c>=5&&c<15)return new ma(n+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(n,7);if(u>=64&&u<90)return new ma(n+7,""+(u+1));if(u>=90&&u<116)return new ma(n+7,""+(u+7));let m=this.extractNumericValueFromBitArray(n,8),g;switch(m){case 232:g="!";break;case 233:g='"';break;case 234:g="%";break;case 235:g="&";break;case 236:g="'";break;case 237:g="(";break;case 238:g=")";break;case 239:g="*";break;case 240:g="+";break;case 241:g=",";break;case 242:g="-";break;case 243:g=".";break;case 244:g="/";break;case 245:g=":";break;case 246:g=";";break;case 247:g="<";break;case 248:g="=";break;case 249:g=">";break;case 250:g="?";break;case 251:g="_";break;case 252:g=" ";break;default:throw new L}return new ma(n+8,g)}isStillAlpha(n){if(n+5>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(n,5);if(c>=5&&c<16)return!0;if(n+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(n,6);return u>=16&&u<63}decodeAlphanumeric(n){let c=this.extractNumericValueFromBitArray(n,5);if(c===15)return new ma(n+5,ma.FNC1);if(c>=5&&c<15)return new ma(n+5,"0"+(c-5));let u=this.extractNumericValueFromBitArray(n,6);if(u>=32&&u<58)return new ma(n+6,""+(u+33));let m;switch(u){case 58:m="*";break;case 59:m=",";break;case 60:m="-";break;case 61:m=".";break;case 62:m="/";break;default:throw new Ce("Decoding invalid alphanumeric value: "+u)}return new ma(n+6,m)}isAlphaTo646ToAlphaLatch(n){if(n+1>this.information.getSize())return!1;for(let c=0;c<5&&c+n<this.information.getSize();++c)if(c===2){if(!this.information.get(n+2))return!1}else if(this.information.get(n+c))return!1;return!0}isAlphaOr646ToNumericLatch(n){if(n+3>this.information.getSize())return!1;for(let c=n;c<n+3;++c)if(this.information.get(c))return!1;return!0}isNumericToAlphaNumericLatch(n){if(n+1>this.information.getSize())return!1;for(let c=0;c<4&&c+n<this.information.getSize();++c)if(this.information.get(n+c))return!1;return!0}}class Ne{constructor(n){this.information=n,this.generalDecoder=new ge(n)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class ke extends Ne{constructor(n){super(n)}encodeCompressedGtin(n,c){n.append("(01)");let u=n.length();n.append("9"),this.encodeCompressedGtinWithoutAI(n,c,u)}encodeCompressedGtinWithoutAI(n,c,u){for(let m=0;m<4;++m){let g=this.getGeneralDecoder().extractNumericValueFromBitArray(c+10*m,10);g/100===0&&n.append("0"),g/10===0&&n.append("0"),n.append(g)}ke.appendCheckDigit(n,u)}static appendCheckDigit(n,c){let u=0;for(let m=0;m<13;m++){let g=n.charAt(m+c).charCodeAt(0)-48;u+=(m&1)===0?3*g:g}u=10-u%10,u===10&&(u=0),n.append(u)}}ke.GTIN_SIZE=40;class _e extends ke{constructor(n){super(n)}parseInformation(){let n=new ne;n.append("(01)");let c=n.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(_e.HEADER_SIZE,4);return n.append(u),this.encodeCompressedGtinWithoutAI(n,_e.HEADER_SIZE+4,c),this.getGeneralDecoder().decodeAllCodes(n,_e.HEADER_SIZE+44)}}_e.HEADER_SIZE=4;class Ge extends Ne{constructor(n){super(n)}parseInformation(){let n=new ne;return this.getGeneralDecoder().decodeAllCodes(n,Ge.HEADER_SIZE)}}Ge.HEADER_SIZE=5;class rt extends ke{constructor(n){super(n)}encodeCompressedWeight(n,c,u){let m=this.getGeneralDecoder().extractNumericValueFromBitArray(c,u);this.addWeightCode(n,m);let g=this.checkWeight(m),v=1e5;for(let N=0;N<5;++N)g/v===0&&n.append("0"),v/=10;n.append(g)}}class Be extends rt{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()!=Be.HEADER_SIZE+rt.GTIN_SIZE+Be.WEIGHT_SIZE)throw new X;let n=new ne;return this.encodeCompressedGtin(n,Be.HEADER_SIZE),this.encodeCompressedWeight(n,Be.HEADER_SIZE+rt.GTIN_SIZE,Be.WEIGHT_SIZE),n.toString()}}Be.HEADER_SIZE=5,Be.WEIGHT_SIZE=15;class qe extends Be{constructor(n){super(n)}addWeightCode(n,c){n.append("(3103)")}checkWeight(n){return n}}class We extends Be{constructor(n){super(n)}addWeightCode(n,c){c<1e4?n.append("(3202)"):n.append("(3203)")}checkWeight(n){return n<1e4?n:n-1e4}}class ut extends ke{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ut.HEADER_SIZE+ke.GTIN_SIZE)throw new X;let n=new ne;this.encodeCompressedGtin(n,ut.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(ut.HEADER_SIZE+ke.GTIN_SIZE,ut.LAST_DIGIT_SIZE);n.append("(392"),n.append(c),n.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(ut.HEADER_SIZE+ke.GTIN_SIZE+ut.LAST_DIGIT_SIZE,null);return n.append(u.getNewString()),n.toString()}}ut.HEADER_SIZE=8,ut.LAST_DIGIT_SIZE=2;class ht extends ke{constructor(n){super(n)}parseInformation(){if(this.getInformation().getSize()<ht.HEADER_SIZE+ke.GTIN_SIZE)throw new X;let n=new ne;this.encodeCompressedGtin(n,ht.HEADER_SIZE);let c=this.getGeneralDecoder().extractNumericValueFromBitArray(ht.HEADER_SIZE+ke.GTIN_SIZE,ht.LAST_DIGIT_SIZE);n.append("(393"),n.append(c),n.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(ht.HEADER_SIZE+ke.GTIN_SIZE+ht.LAST_DIGIT_SIZE,ht.FIRST_THREE_DIGITS_SIZE);u/100==0&&n.append("0"),u/10==0&&n.append("0"),n.append(u);let m=this.getGeneralDecoder().decodeGeneralPurposeField(ht.HEADER_SIZE+ke.GTIN_SIZE+ht.LAST_DIGIT_SIZE+ht.FIRST_THREE_DIGITS_SIZE,null);return n.append(m.getNewString()),n.toString()}}ht.HEADER_SIZE=8,ht.LAST_DIGIT_SIZE=2,ht.FIRST_THREE_DIGITS_SIZE=10;class gt extends rt{constructor(n,c,u){super(n),this.dateCode=u,this.firstAIdigits=c}parseInformation(){if(this.getInformation().getSize()!=gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE+gt.DATE_SIZE)throw new X;let n=new ne;return this.encodeCompressedGtin(n,gt.HEADER_SIZE),this.encodeCompressedWeight(n,gt.HEADER_SIZE+gt.GTIN_SIZE,gt.WEIGHT_SIZE),this.encodeCompressedDate(n,gt.HEADER_SIZE+gt.GTIN_SIZE+gt.WEIGHT_SIZE),n.toString()}encodeCompressedDate(n,c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(c,gt.DATE_SIZE);if(u==38400)return;n.append("("),n.append(this.dateCode),n.append(")");let m=u%32;u/=32;let g=u%12+1;u/=12;let v=u;v/10==0&&n.append("0"),n.append(v),g/10==0&&n.append("0"),n.append(g),m/10==0&&n.append("0"),n.append(m)}addWeightCode(n,c){n.append("("),n.append(this.firstAIdigits),n.append(c/1e5),n.append(")")}checkWeight(n){return n%1e5}}gt.HEADER_SIZE=8,gt.WEIGHT_SIZE=20,gt.DATE_SIZE=16;function yt(J){try{if(J.get(1))return new _e(J);if(!J.get(2))return new Ge(J);switch(ge.extractNumericValueFromBitArray(J,1,4)){case 4:return new qe(J);case 5:return new We(J)}switch(ge.extractNumericValueFromBitArray(J,1,5)){case 12:return new ut(J);case 13:return new ht(J)}switch(ge.extractNumericValueFromBitArray(J,1,7)){case 56:return new gt(J,"310","11");case 57:return new gt(J,"320","11");case 58:return new gt(J,"310","13");case 59:return new gt(J,"320","13");case 60:return new gt(J,"310","15");case 61:return new gt(J,"320","15");case 62:return new gt(J,"310","17");case 63:return new gt(J,"320","17")}}catch(n){throw console.log(n),new Ce("unknown decoder: "+J)}}class vt{constructor(n,c,u,m){this.leftchar=n,this.rightchar=c,this.finderpattern=u,this.maybeLast=m}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(n,c){return n instanceof vt?vt.equalsOrNull(n.leftchar,c.leftchar)&&vt.equalsOrNull(n.rightchar,c.rightchar)&&vt.equalsOrNull(n.finderpattern,c.finderpattern):!1}static equalsOrNull(n,c){return n===null?c===null:vt.equals(n,c)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ut{constructor(n,c,u){this.pairs=n,this.rowNumber=c,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(n){return this.checkEqualitity(this,n)}toString(){return"{ "+this.pairs+" }"}equals(n,c){return n instanceof Ut?this.checkEqualitity(n,c)&&n.wasReversed===c.wasReversed:!1}checkEqualitity(n,c){if(!n||!c)return;let u;return n.forEach((m,g)=>{c.forEach(v=>{m.getLeftChar().getValue()===v.getLeftChar().getValue()&&m.getRightChar().getValue()===v.getRightChar().getValue()&&m.getFinderPatter().getValue()===v.getFinderPatter().getValue()&&(u=!0)})}),u}}class tt extends Jr{constructor(n){super(...arguments),this.pairs=new Array(tt.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=n===!0}decodeRow(n,c,u){this.pairs.length=0,this.startFromEven=!1;try{return tt.constructResult(this.decodeRow2pairs(n,c))}catch(m){this.verbose&&console.log(m)}return this.pairs.length=0,this.startFromEven=!0,tt.constructResult(this.decodeRow2pairs(n,c))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(n,c){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(c,this.pairs,n))}catch(g){if(g instanceof X){if(!this.pairs.length)throw new X;u=!0}}if(this.checkChecksum())return this.pairs;let m;if(this.rows.length?m=!0:m=!1,this.storeRow(n,!1),m){let g=this.checkRowsBoolean(!1);if(g!=null||(g=this.checkRowsBoolean(!0),g!=null))return g}throw new X}checkRowsBoolean(n){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,n&&(this.rows=this.rows.reverse());let c=null;try{c=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return n&&(this.rows=this.rows.reverse()),c}checkRows(n,c){for(let u=c;u<this.rows.length;u++){let m=this.rows[u];this.pairs.length=0;for(let v of n)this.pairs.push(v.getPairs());if(this.pairs.push(m.getPairs()),!tt.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let g=new Array(n);g.push(m);try{return this.checkRows(g,u+1)}catch(v){this.verbose&&console.log(v)}}throw new X}static isValidSequence(n){for(let c of tt.FINDER_PATTERN_SEQUENCES){if(n.length>c.length)continue;let u=!0;for(let m=0;m<n.length;m++)if(n[m].getFinderPattern().getValue()!=c[m]){u=!1;break}if(u)return!0}return!1}storeRow(n,c){let u=0,m=!1,g=!1;for(;u<this.rows.length;){let v=this.rows[u];if(v.getRowNumber()>n){g=v.isEquivalent(this.pairs);break}m=v.isEquivalent(this.pairs),u++}g||m||tt.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new Ut(this.pairs,n,c)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(n,c){for(let u of c)if(u.getPairs().length!==n.length){for(let m of u.getPairs())for(let g of n)if(vt.equals(m,g))break}}static isPartialRow(n,c){for(let u of c){let m=!0;for(let g of n){let v=!1;for(let N of u.getPairs())if(g.equals(N)){v=!0;break}if(!v){m=!1;break}}if(m)return!0}return!1}getRows(){return this.rows}static constructResult(n){let c=ha.buildBitArray(n),m=yt(c).parseInformation(),g=n[0].getFinderPattern().getResultPoints(),v=n[n.length-1].getFinderPattern().getResultPoints(),N=[g[0],g[1],v[0],v[1]];return new ae(m,null,null,N,Z.RSS_EXPANDED,null)}checkChecksum(){let n=this.pairs.get(0),c=n.getLeftChar(),u=n.getRightChar();if(u==null)return!1;let m=u.getChecksumPortion(),g=2;for(let N=1;N<this.pairs.size();++N){let S=this.pairs.get(N);m+=S.getLeftChar().getChecksumPortion(),g++;let F=S.getRightChar();F!=null&&(m+=F.getChecksumPortion(),g++)}return m%=211,211*(g-4)+m==c.getValue()}static getNextSecondBar(n,c){let u;return n.get(c)?(u=n.getNextUnset(c),u=n.getNextSet(u)):(u=n.getNextSet(c),u=n.getNextUnset(u)),u}retrieveNextPair(n,c,u){let m=c.length%2==0;this.startFromEven&&(m=!m);let g,v=!0,N=-1;do this.findNextPair(n,c,N),g=this.parseFoundFinderPattern(n,u,m),g==null?N=tt.getNextSecondBar(n,this.startEnd[0]):v=!1;while(v);let S=this.decodeDataCharacter(n,g,m,!0);if(!this.isEmptyPair(c)&&c[c.length-1].mustBeLast())throw new X;let F;try{F=this.decodeDataCharacter(n,g,m,!1)}catch(G){F=null,this.verbose&&console.log(G)}return new vt(S,F,g,!0)}isEmptyPair(n){return n.length===0}findNextPair(n,c,u){let m=this.getDecodeFinderCounters();m[0]=0,m[1]=0,m[2]=0,m[3]=0;let g=n.getSize(),v;u>=0?v=u:this.isEmptyPair(c)?v=0:v=c[c.length-1].getFinderPattern().getStartEnd()[1];let N=c.length%2!=0;this.startFromEven&&(N=!N);let S=!1;for(;v<g&&(S=!n.get(v),!!S);)v++;let F=0,G=v;for(let ee=v;ee<g;ee++)if(n.get(ee)!=S)m[F]++;else{if(F==3){if(N&&tt.reverseCounters(m),tt.isFinderPattern(m)){this.startEnd[0]=G,this.startEnd[1]=ee;return}N&&tt.reverseCounters(m),G+=m[0]+m[1],m[0]=m[2],m[1]=m[3],m[2]=0,m[3]=0,F--}else F++;m[F]=1,S=!S}throw new X}static reverseCounters(n){let c=n.length;for(let u=0;u<c/2;++u){let m=n[u];n[u]=n[c-u-1],n[c-u-1]=m}}parseFoundFinderPattern(n,c,u){let m,g,v;if(u){let F=this.startEnd[0]-1;for(;F>=0&&!n.get(F);)F--;F++,m=this.startEnd[0]-F,g=F,v=this.startEnd[1]}else g=this.startEnd[0],v=n.getNextUnset(this.startEnd[1]+1),m=v-this.startEnd[1];let N=this.getDecodeFinderCounters();A.arraycopy(N,0,N,1,N.length-1),N[0]=m;let S;try{S=this.parseFinderValue(N,tt.FINDER_PATTERNS)}catch{return null}return new Bi(S,[g,v],g,v,c)}decodeDataCharacter(n,c,u,m){let g=this.getDataCharacterCounters();for(let _r=0;_r<g.length;_r++)g[_r]=0;if(m)tt.recordPatternInReverse(n,c.getStartEnd()[0],g);else{tt.recordPattern(n,c.getStartEnd()[1],g);for(let _r=0,Sa=g.length-1;_r<Sa;_r++,Sa--){let ts=g[_r];g[_r]=g[Sa],g[Sa]=ts}}let v=17,N=me.sum(new Int32Array(g))/v,S=(c.getStartEnd()[1]-c.getStartEnd()[0])/15;if(Math.abs(N-S)/S>.3)throw new X;let F=this.getOddCounts(),G=this.getEvenCounts(),ee=this.getOddRoundingErrors(),ue=this.getEvenRoundingErrors();for(let _r=0;_r<g.length;_r++){let Sa=1*g[_r]/N,ts=Sa+.5;if(ts<1){if(Sa<.3)throw new X;ts=1}else if(ts>8){if(Sa>8.7)throw new X;ts=8}let ui=_r/2;(_r&1)==0?(F[ui]=ts,ee[ui]=Sa-ts):(G[ui]=ts,ue[ui]=Sa-ts)}this.adjustOddEvenCounts(v);let Ee=4*c.getValue()+(u?0:2)+(m?0:1)-1,De=0,Oe=0;for(let _r=F.length-1;_r>=0;_r--){if(tt.isNotA1left(c,u,m)){let Sa=tt.WEIGHTS[Ee][2*_r];Oe+=F[_r]*Sa}De+=F[_r]}let ze=0;for(let _r=G.length-1;_r>=0;_r--)if(tt.isNotA1left(c,u,m)){let Sa=tt.WEIGHTS[Ee][2*_r+1];ze+=G[_r]*Sa}let Ke=Oe+ze;if((De&1)!=0||De>13||De<4)throw new X;let mt=(13-De)/2,pt=tt.SYMBOL_WIDEST[mt],xt=9-pt,Kt=la.getRSSvalue(F,pt,!0),Yt=la.getRSSvalue(G,xt,!1),Ha=tt.EVEN_TOTAL_SUBSET[mt],Es=tt.GSUM[mt],es=Kt*Ha+Yt+Es;return new hn(es,Ke)}static isNotA1left(n,c,u){return!(n.getValue()==0&&c&&u)}adjustOddEvenCounts(n){let c=me.sum(new Int32Array(this.getOddCounts())),u=me.sum(new Int32Array(this.getEvenCounts())),m=!1,g=!1;c>13?g=!0:c<4&&(m=!0);let v=!1,N=!1;u>13?N=!0:u<4&&(v=!0);let S=c+u-n,F=(c&1)==1,G=(u&1)==0;if(S==1)if(F){if(G)throw new X;g=!0}else{if(!G)throw new X;N=!0}else if(S==-1)if(F){if(G)throw new X;m=!0}else{if(!G)throw new X;v=!0}else if(S==0){if(F){if(!G)throw new X;c<u?(m=!0,N=!0):(g=!0,v=!0)}else if(G)throw new X}else throw new X;if(m){if(g)throw new X;tt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(g&&tt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),v){if(N)throw new X;tt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}N&&tt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}tt.SYMBOL_WIDEST=[7,5,4,3,1],tt.EVEN_TOTAL_SUBSET=[4,20,52,104,204],tt.GSUM=[0,348,1388,2948,3988],tt.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],tt.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],tt.FINDER_PAT_A=0,tt.FINDER_PAT_B=1,tt.FINDER_PAT_C=2,tt.FINDER_PAT_D=3,tt.FINDER_PAT_E=4,tt.FINDER_PAT_F=5,tt.FINDER_PATTERN_SEQUENCES=[[tt.FINDER_PAT_A,tt.FINDER_PAT_A],[tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B],[tt.FINDER_PAT_A,tt.FINDER_PAT_C,tt.FINDER_PAT_B,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_C],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_E,tt.FINDER_PAT_B,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F],[tt.FINDER_PAT_A,tt.FINDER_PAT_A,tt.FINDER_PAT_B,tt.FINDER_PAT_B,tt.FINDER_PAT_C,tt.FINDER_PAT_D,tt.FINDER_PAT_D,tt.FINDER_PAT_E,tt.FINDER_PAT_E,tt.FINDER_PAT_F,tt.FINDER_PAT_F]],tt.MAX_PAIRS=11;class kr extends hn{constructor(n,c,u){super(n,c),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ht extends Jr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(n,c,u){const m=this.decodePair(c,!1,n,u);Ht.addOrTally(this.possibleLeftPairs,m),c.reverse();let g=this.decodePair(c,!0,n,u);Ht.addOrTally(this.possibleRightPairs,g),c.reverse();for(let v of this.possibleLeftPairs)if(v.getCount()>1){for(let N of this.possibleRightPairs)if(N.getCount()>1&&Ht.checkChecksum(v,N))return Ht.constructResult(v,N)}throw new X}static addOrTally(n,c){if(c==null)return;let u=!1;for(let m of n)if(m.getValue()===c.getValue()){m.incrementCount(),u=!0;break}u||n.push(c)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(n,c){let u=4537077*n.getValue()+c.getValue(),m=new String(u).toString(),g=new ne;for(let F=13-m.length;F>0;F--)g.append("0");g.append(m);let v=0;for(let F=0;F<13;F++){let G=g.charAt(F).charCodeAt(0)-48;v+=(F&1)===0?3*G:G}v=10-v%10,v===10&&(v=0),g.append(v.toString());let N=n.getFinderPattern().getResultPoints(),S=c.getFinderPattern().getResultPoints();return new ae(g.toString(),null,0,[N[0],N[1],S[0],S[1]],Z.RSS_14,new Date().getTime())}static checkChecksum(n,c){let u=(n.getChecksumPortion()+16*c.getChecksumPortion())%79,m=9*n.getFinderPattern().getValue()+c.getFinderPattern().getValue();return m>72&&m--,m>8&&m--,u===m}decodePair(n,c,u,m){try{let g=this.findFinderPattern(n,c),v=this.parseFoundFinderPattern(n,u,c,g),N=m==null?null:m.get(U.NEED_RESULT_POINT_CALLBACK);if(N!=null){let G=(g[0]+g[1])/2;c&&(G=n.getSize()-1-G),N.foundPossibleResultPoint(new pe(G,u))}let S=this.decodeDataCharacter(n,v,!0),F=this.decodeDataCharacter(n,v,!1);return new kr(1597*S.getValue()+F.getValue(),S.getChecksumPortion()+4*F.getChecksumPortion(),v)}catch{return null}}decodeDataCharacter(n,c,u){let m=this.getDataCharacterCounters();for(let ze=0;ze<m.length;ze++)m[ze]=0;if(u)Nt.recordPatternInReverse(n,c.getStartEnd()[0],m);else{Nt.recordPattern(n,c.getStartEnd()[1]+1,m);for(let ze=0,Ke=m.length-1;ze<Ke;ze++,Ke--){let mt=m[ze];m[ze]=m[Ke],m[Ke]=mt}}let g=u?16:15,v=me.sum(new Int32Array(m))/g,N=this.getOddCounts(),S=this.getEvenCounts(),F=this.getOddRoundingErrors(),G=this.getEvenRoundingErrors();for(let ze=0;ze<m.length;ze++){let Ke=m[ze]/v,mt=Math.floor(Ke+.5);mt<1?mt=1:mt>8&&(mt=8);let pt=Math.floor(ze/2);(ze&1)===0?(N[pt]=mt,F[pt]=Ke-mt):(S[pt]=mt,G[pt]=Ke-mt)}this.adjustOddEvenCounts(u,g);let ee=0,ue=0;for(let ze=N.length-1;ze>=0;ze--)ue*=9,ue+=N[ze],ee+=N[ze];let Ee=0,De=0;for(let ze=S.length-1;ze>=0;ze--)Ee*=9,Ee+=S[ze],De+=S[ze];let Oe=ue+3*Ee;if(u){if((ee&1)!==0||ee>12||ee<4)throw new X;let ze=(12-ee)/2,Ke=Ht.OUTSIDE_ODD_WIDEST[ze],mt=9-Ke,pt=la.getRSSvalue(N,Ke,!1),xt=la.getRSSvalue(S,mt,!0),Kt=Ht.OUTSIDE_EVEN_TOTAL_SUBSET[ze],Yt=Ht.OUTSIDE_GSUM[ze];return new hn(pt*Kt+xt+Yt,Oe)}else{if((De&1)!==0||De>10||De<4)throw new X;let ze=(10-De)/2,Ke=Ht.INSIDE_ODD_WIDEST[ze],mt=9-Ke,pt=la.getRSSvalue(N,Ke,!0),xt=la.getRSSvalue(S,mt,!1),Kt=Ht.INSIDE_ODD_TOTAL_SUBSET[ze],Yt=Ht.INSIDE_GSUM[ze];return new hn(xt*Kt+pt+Yt,Oe)}}findFinderPattern(n,c){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let m=n.getSize(),g=!1,v=0;for(;v<m&&(g=!n.get(v),c!==g);)v++;let N=0,S=v;for(let F=v;F<m;F++)if(n.get(F)!==g)u[N]++;else{if(N===3){if(Jr.isFinderPattern(u))return[S,F];S+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,N--}else N++;u[N]=1,g=!g}throw new X}parseFoundFinderPattern(n,c,u,m){let g=n.get(m[0]),v=m[0]-1;for(;v>=0&&g!==n.get(v);)v--;v++;const N=m[0]-v,S=this.getDecodeFinderCounters(),F=new Int32Array(S.length);A.arraycopy(S,0,F,1,S.length-1),F[0]=N;const G=this.parseFinderValue(F,Ht.FINDER_PATTERNS);let ee=v,ue=m[1];return u&&(ee=n.getSize()-1-ee,ue=n.getSize()-1-ue),new Bi(G,[v,m[1]],ee,ue,c)}adjustOddEvenCounts(n,c){let u=me.sum(new Int32Array(this.getOddCounts())),m=me.sum(new Int32Array(this.getEvenCounts())),g=!1,v=!1,N=!1,S=!1;n?(u>12?v=!0:u<4&&(g=!0),m>12?S=!0:m<4&&(N=!0)):(u>11?v=!0:u<5&&(g=!0),m>10?S=!0:m<4&&(N=!0));let F=u+m-c,G=(u&1)===(n?1:0),ee=(m&1)===1;if(F===1)if(G){if(ee)throw new X;v=!0}else{if(!ee)throw new X;S=!0}else if(F===-1)if(G){if(ee)throw new X;g=!0}else{if(!ee)throw new X;N=!0}else if(F===0){if(G){if(!ee)throw new X;u<m?(g=!0,S=!0):(v=!0,N=!0)}else if(ee)throw new X}else throw new X;if(g){if(v)throw new X;Jr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(v&&Jr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),N){if(S)throw new X;Jr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}S&&Jr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ht.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ht.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ht.OUTSIDE_GSUM=[0,161,961,2015,2715],Ht.INSIDE_GSUM=[0,336,1036,1516],Ht.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ht.INSIDE_ODD_WIDEST=[2,4,6,8],Ht.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Ka extends Nt{constructor(n,c){super(),this.readers=[],this.verbose=c===!0;const u=n?n.get(U.POSSIBLE_FORMATS):null,m=n&&n.get(U.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(Z.EAN_13)||u.includes(Z.UPC_A)||u.includes(Z.EAN_8)||u.includes(Z.UPC_E))&&this.readers.push(new ii(n)),u.includes(Z.CODE_39)&&this.readers.push(new St(m)),u.includes(Z.CODE_128)&&this.readers.push(new ot),u.includes(Z.ITF)&&this.readers.push(new wt),u.includes(Z.RSS_14)&&this.readers.push(new Ht),u.includes(Z.RSS_EXPANDED)&&this.readers.push(new tt(this.verbose))):(this.readers.push(new ii(n)),this.readers.push(new St),this.readers.push(new ii(n)),this.readers.push(new ot),this.readers.push(new wt),this.readers.push(new Ht),this.readers.push(new tt(this.verbose)))}decodeRow(n,c,u){for(let m=0;m<this.readers.length;m++)try{return this.readers[m].decodeRow(n,c,u)}catch{}throw new X}reset(){this.readers.forEach(n=>n.reset())}}class In extends Y{constructor(n=500,c){super(new Ka(c),n,c)}}class Qt{constructor(n,c,u){this.ecCodewords=n,this.ecBlocks=[c],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Jt{constructor(n,c){this.count=n,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class er{constructor(n,c,u,m,g,v){this.versionNumber=n,this.symbolSizeRows=c,this.symbolSizeColumns=u,this.dataRegionSizeRows=m,this.dataRegionSizeColumns=g,this.ecBlocks=v;let N=0;const S=v.getECCodewords(),F=v.getECBlocks();for(let G of F)N+=G.getCount()*(G.getDataCodewords()+S);this.totalCodewords=N}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(n,c){if((n&1)!==0||(c&1)!==0)throw new L;for(let u of er.VERSIONS)if(u.symbolSizeRows===n&&u.symbolSizeColumns===c)return u;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new er(1,10,10,8,8,new Qt(5,new Jt(1,3))),new er(2,12,12,10,10,new Qt(7,new Jt(1,5))),new er(3,14,14,12,12,new Qt(10,new Jt(1,8))),new er(4,16,16,14,14,new Qt(12,new Jt(1,12))),new er(5,18,18,16,16,new Qt(14,new Jt(1,18))),new er(6,20,20,18,18,new Qt(18,new Jt(1,22))),new er(7,22,22,20,20,new Qt(20,new Jt(1,30))),new er(8,24,24,22,22,new Qt(24,new Jt(1,36))),new er(9,26,26,24,24,new Qt(28,new Jt(1,44))),new er(10,32,32,14,14,new Qt(36,new Jt(1,62))),new er(11,36,36,16,16,new Qt(42,new Jt(1,86))),new er(12,40,40,18,18,new Qt(48,new Jt(1,114))),new er(13,44,44,20,20,new Qt(56,new Jt(1,144))),new er(14,48,48,22,22,new Qt(68,new Jt(1,174))),new er(15,52,52,24,24,new Qt(42,new Jt(2,102))),new er(16,64,64,14,14,new Qt(56,new Jt(2,140))),new er(17,72,72,16,16,new Qt(36,new Jt(4,92))),new er(18,80,80,18,18,new Qt(48,new Jt(4,114))),new er(19,88,88,20,20,new Qt(56,new Jt(4,144))),new er(20,96,96,22,22,new Qt(68,new Jt(4,174))),new er(21,104,104,24,24,new Qt(56,new Jt(6,136))),new er(22,120,120,18,18,new Qt(68,new Jt(6,175))),new er(23,132,132,20,20,new Qt(62,new Jt(8,163))),new er(24,144,144,22,22,new Qt(62,new Jt(8,156),new Jt(2,155))),new er(25,8,18,6,16,new Qt(7,new Jt(1,5))),new er(26,8,32,6,14,new Qt(11,new Jt(1,10))),new er(27,12,26,10,24,new Qt(14,new Jt(1,16))),new er(28,12,36,10,16,new Qt(18,new Jt(1,22))),new er(29,16,36,14,16,new Qt(24,new Jt(1,32))),new er(30,16,48,14,22,new Qt(28,new Jt(1,49)))]}}er.VERSIONS=er.buildVersions();class xs{constructor(n){const c=n.getHeight();if(c<8||c>144||(c&1)!==0)throw new L;this.version=xs.readVersion(n),this.mappingBitMatrix=this.extractDataRegion(n),this.readMappingMatrix=new ie(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(n){const c=n.getHeight(),u=n.getWidth();return er.getVersionForDimensions(c,u)}readCodewords(){const n=new Int8Array(this.version.getTotalCodewords());let c=0,u=4,m=0;const g=this.mappingBitMatrix.getHeight(),v=this.mappingBitMatrix.getWidth();let N=!1,S=!1,F=!1,G=!1;do if(u===g&&m===0&&!N)n[c++]=this.readCorner1(g,v)&255,u-=2,m+=2,N=!0;else if(u===g-2&&m===0&&(v&3)!==0&&!S)n[c++]=this.readCorner2(g,v)&255,u-=2,m+=2,S=!0;else if(u===g+4&&m===2&&(v&7)===0&&!F)n[c++]=this.readCorner3(g,v)&255,u-=2,m+=2,F=!0;else if(u===g-2&&m===0&&(v&7)===4&&!G)n[c++]=this.readCorner4(g,v)&255,u-=2,m+=2,G=!0;else{do u<g&&m>=0&&!this.readMappingMatrix.get(m,u)&&(n[c++]=this.readUtah(u,m,g,v)&255),u-=2,m+=2;while(u>=0&&m<v);u+=1,m+=3;do u>=0&&m<v&&!this.readMappingMatrix.get(m,u)&&(n[c++]=this.readUtah(u,m,g,v)&255),u+=2,m-=2;while(u<g&&m>=0);u+=3,m+=1}while(u<g||m<v);if(c!==this.version.getTotalCodewords())throw new L;return n}readModule(n,c,u,m){return n<0&&(n+=u,c+=4-(u+4&7)),c<0&&(c+=m,n+=4-(m+4&7)),this.readMappingMatrix.set(c,n),this.mappingBitMatrix.get(c,n)}readUtah(n,c,u,m){let g=0;return this.readModule(n-2,c-2,u,m)&&(g|=1),g<<=1,this.readModule(n-2,c-1,u,m)&&(g|=1),g<<=1,this.readModule(n-1,c-2,u,m)&&(g|=1),g<<=1,this.readModule(n-1,c-1,u,m)&&(g|=1),g<<=1,this.readModule(n-1,c,u,m)&&(g|=1),g<<=1,this.readModule(n,c-2,u,m)&&(g|=1),g<<=1,this.readModule(n,c-1,u,m)&&(g|=1),g<<=1,this.readModule(n,c,u,m)&&(g|=1),g}readCorner1(n,c){let u=0;return this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,1,n,c)&&(u|=1),u<<=1,this.readModule(n-1,2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u<<=1,this.readModule(2,c-1,n,c)&&(u|=1),u<<=1,this.readModule(3,c-1,n,c)&&(u|=1),u}readCorner2(n,c){let u=0;return this.readModule(n-3,0,n,c)&&(u|=1),u<<=1,this.readModule(n-2,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(0,c-4,n,c)&&(u|=1),u<<=1,this.readModule(0,c-3,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u}readCorner3(n,c){let u=0;return this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,c-1,n,c)&&(u|=1),u<<=1,this.readModule(0,c-3,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-3,n,c)&&(u|=1),u<<=1,this.readModule(1,c-2,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u}readCorner4(n,c){let u=0;return this.readModule(n-3,0,n,c)&&(u|=1),u<<=1,this.readModule(n-2,0,n,c)&&(u|=1),u<<=1,this.readModule(n-1,0,n,c)&&(u|=1),u<<=1,this.readModule(0,c-2,n,c)&&(u|=1),u<<=1,this.readModule(0,c-1,n,c)&&(u|=1),u<<=1,this.readModule(1,c-1,n,c)&&(u|=1),u<<=1,this.readModule(2,c-1,n,c)&&(u|=1),u<<=1,this.readModule(3,c-1,n,c)&&(u|=1),u}extractDataRegion(n){const c=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(n.getHeight()!==c)throw new j("Dimension of bitMatrix must match the version size");const m=this.version.getDataRegionSizeRows(),g=this.version.getDataRegionSizeColumns(),v=c/m|0,N=u/g|0,S=v*m,F=N*g,G=new ie(F,S);for(let ee=0;ee<v;++ee){const ue=ee*m;for(let Ee=0;Ee<N;++Ee){const De=Ee*g;for(let Oe=0;Oe<m;++Oe){const ze=ee*(m+2)+1+Oe,Ke=ue+Oe;for(let mt=0;mt<g;++mt){const pt=Ee*(g+2)+1+mt;if(n.get(pt,ze)){const xt=De+mt;G.set(xt,Ke)}}}}}return G}}class ko{constructor(n,c){this.numDataCodewords=n,this.codewords=c}static getDataBlocks(n,c){const u=c.getECBlocks();let m=0;const g=u.getECBlocks();for(let Oe of g)m+=Oe.getCount();const v=new Array(m);let N=0;for(let Oe of g)for(let ze=0;ze<Oe.getCount();ze++){const Ke=Oe.getDataCodewords(),mt=u.getECCodewords()+Ke;v[N++]=new ko(Ke,new Uint8Array(mt))}const F=v[0].codewords.length-u.getECCodewords(),G=F-1;let ee=0;for(let Oe=0;Oe<G;Oe++)for(let ze=0;ze<N;ze++)v[ze].codewords[Oe]=n[ee++];const ue=c.getVersionNumber()===24,Ee=ue?8:N;for(let Oe=0;Oe<Ee;Oe++)v[Oe].codewords[F-1]=n[ee++];const De=v[0].codewords.length;for(let Oe=F;Oe<De;Oe++)for(let ze=0;ze<N;ze++){const Ke=ue?(ze+8)%N:ze,mt=ue&&Ke>7?Oe-1:Oe;v[Ke].codewords[mt]=n[ee++]}if(ee!==n.length)throw new j;return v}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Za{constructor(n){this.bytes=n,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(n){if(n<1||n>32||n>this.available())throw new j(""+n);let c=0,u=this.bitOffset,m=this.byteOffset;const g=this.bytes;if(u>0){const v=8-u,N=n<v?n:v,S=v-N,F=255>>8-N<<S;c=(g[m]&F)>>S,n-=N,u+=N,u===8&&(u=0,m++)}if(n>0){for(;n>=8;)c=c<<8|g[m]&255,m++,n-=8;if(n>0){const v=8-n,N=255>>v<<v;c=c<<n|(g[m]&N)>>v,u+=n}}return this.bitOffset=u,this.byteOffset=m,c}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var ea;(function(J){J[J.PAD_ENCODE=0]="PAD_ENCODE",J[J.ASCII_ENCODE=1]="ASCII_ENCODE",J[J.C40_ENCODE=2]="C40_ENCODE",J[J.TEXT_ENCODE=3]="TEXT_ENCODE",J[J.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",J[J.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",J[J.BASE256_ENCODE=6]="BASE256_ENCODE"})(ea||(ea={}));class Fn{static decode(n){const c=new Za(n),u=new ne,m=new ne,g=new Array;let v=ea.ASCII_ENCODE;do if(v===ea.ASCII_ENCODE)v=this.decodeAsciiSegment(c,u,m);else{switch(v){case ea.C40_ENCODE:this.decodeC40Segment(c,u);break;case ea.TEXT_ENCODE:this.decodeTextSegment(c,u);break;case ea.ANSIX12_ENCODE:this.decodeAnsiX12Segment(c,u);break;case ea.EDIFACT_ENCODE:this.decodeEdifactSegment(c,u);break;case ea.BASE256_ENCODE:this.decodeBase256Segment(c,u,g);break;default:throw new L}v=ea.ASCII_ENCODE}while(v!==ea.PAD_ENCODE&&c.available()>0);return m.length()>0&&u.append(m.toString()),new Ue(n,u.toString(),g.length===0?null:g,null)}static decodeAsciiSegment(n,c,u){let m=!1;do{let g=n.readBits(8);if(g===0)throw new L;if(g<=128)return m&&(g+=128),c.append(String.fromCharCode(g-1)),ea.ASCII_ENCODE;if(g===129)return ea.PAD_ENCODE;if(g<=229){const v=g-130;v<10&&c.append("0"),c.append(""+v)}else switch(g){case 230:return ea.C40_ENCODE;case 231:return ea.BASE256_ENCODE;case 232:c.append("");break;case 233:case 234:break;case 235:m=!0;break;case 236:c.append("[)>05"),u.insert(0,"");break;case 237:c.append("[)>06"),u.insert(0,"");break;case 238:return ea.ANSIX12_ENCODE;case 239:return ea.TEXT_ENCODE;case 240:return ea.EDIFACT_ENCODE;case 241:break;default:if(g!==254||n.available()!==0)throw new L;break}}while(n.available()>0);return ea.ASCII_ENCODE}static decodeC40Segment(n,c){let u=!1;const m=[];let g=0;do{if(n.available()===8)return;const v=n.readBits(8);if(v===254)return;this.parseTwoBytes(v,n.readBits(8),m);for(let N=0;N<3;N++){const S=m[N];switch(g){case 0:if(S<3)g=S+1;else if(S<this.C40_BASIC_SET_CHARS.length){const F=this.C40_BASIC_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else throw new L;break;case 1:u?(c.append(String.fromCharCode(S+128)),u=!1):c.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.C40_SHIFT2_SET_CHARS.length){const F=this.C40_SHIFT2_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else switch(S){case 27:c.append("");break;case 30:u=!0;break;default:throw new L}g=0;break;case 3:u?(c.append(String.fromCharCode(S+224)),u=!1):c.append(String.fromCharCode(S+96)),g=0;break;default:throw new L}}}while(n.available()>0)}static decodeTextSegment(n,c){let u=!1,m=[],g=0;do{if(n.available()===8)return;const v=n.readBits(8);if(v===254)return;this.parseTwoBytes(v,n.readBits(8),m);for(let N=0;N<3;N++){const S=m[N];switch(g){case 0:if(S<3)g=S+1;else if(S<this.TEXT_BASIC_SET_CHARS.length){const F=this.TEXT_BASIC_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else throw new L;break;case 1:u?(c.append(String.fromCharCode(S+128)),u=!1):c.append(String.fromCharCode(S)),g=0;break;case 2:if(S<this.TEXT_SHIFT2_SET_CHARS.length){const F=this.TEXT_SHIFT2_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F)}else switch(S){case 27:c.append("");break;case 30:u=!0;break;default:throw new L}g=0;break;case 3:if(S<this.TEXT_SHIFT3_SET_CHARS.length){const F=this.TEXT_SHIFT3_SET_CHARS[S];u?(c.append(String.fromCharCode(F.charCodeAt(0)+128)),u=!1):c.append(F),g=0}else throw new L;break;default:throw new L}}}while(n.available()>0)}static decodeAnsiX12Segment(n,c){const u=[];do{if(n.available()===8)return;const m=n.readBits(8);if(m===254)return;this.parseTwoBytes(m,n.readBits(8),u);for(let g=0;g<3;g++){const v=u[g];switch(v){case 0:c.append("\r");break;case 1:c.append("*");break;case 2:c.append(">");break;case 3:c.append(" ");break;default:if(v<14)c.append(String.fromCharCode(v+44));else if(v<40)c.append(String.fromCharCode(v+51));else throw new L;break}}}while(n.available()>0)}static parseTwoBytes(n,c,u){let m=(n<<8)+c-1,g=Math.floor(m/1600);u[0]=g,m-=g*1600,g=Math.floor(m/40),u[1]=g,u[2]=m-g*40}static decodeEdifactSegment(n,c){do{if(n.available()<=16)return;for(let u=0;u<4;u++){let m=n.readBits(6);if(m===31){const g=8-n.getBitOffset();g!==8&&n.readBits(g);return}(m&32)===0&&(m|=64),c.append(String.fromCharCode(m))}}while(n.available()>0)}static decodeBase256Segment(n,c,u){let m=1+n.getByteOffset();const g=this.unrandomize255State(n.readBits(8),m++);let v;if(g===0?v=n.available()/8|0:g<250?v=g:v=250*(g-249)+this.unrandomize255State(n.readBits(8),m++),v<0)throw new L;const N=new Uint8Array(v);for(let S=0;S<v;S++){if(n.available()<8)throw new L;N[S]=this.unrandomize255State(n.readBits(8),m++)}u.push(N);try{c.append(te.decode(N,V.ISO88591))}catch(S){throw new Ce("Platform does not support required encoding: "+S.message)}}static unrandomize255State(n,c){const u=149*c%255+1,m=n-u;return m>=0?m:m+256}}Fn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Fn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Fn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Fn.TEXT_SHIFT2_SET_CHARS=Fn.C40_SHIFT2_SET_CHARS,Fn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class jo{constructor(){this.rsDecoder=new Je(Ae.DATA_MATRIX_FIELD_256)}decode(n){const c=new xs(n),u=c.getVersion(),m=c.readCodewords(),g=ko.getDataBlocks(m,u);let v=0;for(let F of g)v+=F.getNumDataCodewords();const N=new Uint8Array(v),S=g.length;for(let F=0;F<S;F++){const G=g[F],ee=G.getCodewords(),ue=G.getNumDataCodewords();this.correctErrors(ee,ue);for(let Ee=0;Ee<ue;Ee++)N[Ee*S+F]=ee[Ee]}return Fn.decode(N)}correctErrors(n,c){const u=new Int32Array(n);try{this.rsDecoder.decode(u,n.length-c)}catch{throw new _}for(let m=0;m<c;m++)n[m]=u[m]}}class Xr{constructor(n){this.image=n,this.rectangleDetector=new jt(this.image)}detect(){const n=this.rectangleDetector.detect();let c=this.detectSolid1(n);if(c=this.detectSolid2(c),c[3]=this.correctTopRight(c),!c[3])throw new X;c=this.shiftToModuleCenter(c);const u=c[0],m=c[1],g=c[2],v=c[3];let N=this.transitionsBetween(u,v)+1,S=this.transitionsBetween(g,v)+1;(N&1)===1&&(N+=1),(S&1)===1&&(S+=1),4*N<7*S&&4*S<7*N&&(N=S=Math.max(N,S));let F=Xr.sampleGrid(this.image,u,m,g,v,N,S);return new lt(F,[u,m,g,v])}static shiftPoint(n,c,u){let m=(c.getX()-n.getX())/(u+1),g=(c.getY()-n.getY())/(u+1);return new pe(n.getX()+m,n.getY()+g)}static moveAway(n,c,u){let m=n.getX(),g=n.getY();return m<c?m-=1:m+=1,g<u?g-=1:g+=1,new pe(m,g)}detectSolid1(n){let c=n[0],u=n[1],m=n[3],g=n[2],v=this.transitionsBetween(c,u),N=this.transitionsBetween(u,m),S=this.transitionsBetween(m,g),F=this.transitionsBetween(g,c),G=v,ee=[g,c,u,m];return G>N&&(G=N,ee[0]=c,ee[1]=u,ee[2]=m,ee[3]=g),G>S&&(G=S,ee[0]=u,ee[1]=m,ee[2]=g,ee[3]=c),G>F&&(ee[0]=m,ee[1]=g,ee[2]=c,ee[3]=u),ee}detectSolid2(n){let c=n[0],u=n[1],m=n[2],g=n[3],v=this.transitionsBetween(c,g),N=Xr.shiftPoint(u,m,(v+1)*4),S=Xr.shiftPoint(m,u,(v+1)*4),F=this.transitionsBetween(N,c),G=this.transitionsBetween(S,g);return F<G?(n[0]=c,n[1]=u,n[2]=m,n[3]=g):(n[0]=u,n[1]=m,n[2]=g,n[3]=c),n}correctTopRight(n){let c=n[0],u=n[1],m=n[2],g=n[3],v=this.transitionsBetween(c,g),N=this.transitionsBetween(u,g),S=Xr.shiftPoint(c,u,(N+1)*4),F=Xr.shiftPoint(m,u,(v+1)*4);v=this.transitionsBetween(S,g),N=this.transitionsBetween(F,g);let G=new pe(g.getX()+(m.getX()-u.getX())/(v+1),g.getY()+(m.getY()-u.getY())/(v+1)),ee=new pe(g.getX()+(c.getX()-u.getX())/(N+1),g.getY()+(c.getY()-u.getY())/(N+1));if(!this.isValid(G))return this.isValid(ee)?ee:null;if(!this.isValid(ee))return G;let ue=this.transitionsBetween(S,G)+this.transitionsBetween(F,G),Ee=this.transitionsBetween(S,ee)+this.transitionsBetween(F,ee);return ue>Ee?G:ee}shiftToModuleCenter(n){let c=n[0],u=n[1],m=n[2],g=n[3],v=this.transitionsBetween(c,g)+1,N=this.transitionsBetween(m,g)+1,S=Xr.shiftPoint(c,u,N*4),F=Xr.shiftPoint(m,u,v*4);v=this.transitionsBetween(S,g)+1,N=this.transitionsBetween(F,g)+1,(v&1)===1&&(v+=1),(N&1)===1&&(N+=1);let G=(c.getX()+u.getX()+m.getX()+g.getX())/4,ee=(c.getY()+u.getY()+m.getY()+g.getY())/4;c=Xr.moveAway(c,G,ee),u=Xr.moveAway(u,G,ee),m=Xr.moveAway(m,G,ee),g=Xr.moveAway(g,G,ee);let ue,Ee;return S=Xr.shiftPoint(c,u,N*4),S=Xr.shiftPoint(S,g,v*4),ue=Xr.shiftPoint(u,c,N*4),ue=Xr.shiftPoint(ue,m,v*4),F=Xr.shiftPoint(m,g,N*4),F=Xr.shiftPoint(F,u,v*4),Ee=Xr.shiftPoint(g,m,N*4),Ee=Xr.shiftPoint(Ee,c,v*4),[S,ue,F,Ee]}isValid(n){return n.getX()>=0&&n.getX()<this.image.getWidth()&&n.getY()>0&&n.getY()<this.image.getHeight()}static sampleGrid(n,c,u,m,g,v,N){return Lt.getInstance().sampleGrid(n,v,N,.5,.5,v-.5,.5,v-.5,N-.5,.5,N-.5,c.getX(),c.getY(),g.getX(),g.getY(),m.getX(),m.getY(),u.getX(),u.getY())}transitionsBetween(n,c){let u=Math.trunc(n.getX()),m=Math.trunc(n.getY()),g=Math.trunc(c.getX()),v=Math.trunc(c.getY()),N=Math.abs(v-m)>Math.abs(g-u);if(N){let Oe=u;u=m,m=Oe,Oe=g,g=v,v=Oe}let S=Math.abs(g-u),F=Math.abs(v-m),G=-S/2,ee=m<v?1:-1,ue=u<g?1:-1,Ee=0,De=this.image.get(N?m:u,N?u:m);for(let Oe=u,ze=m;Oe!==g;Oe+=ue){let Ke=this.image.get(N?ze:Oe,N?Oe:ze);if(Ke!==De&&(Ee++,De=Ke),G+=F,G>0){if(ze===v)break;ze+=ee,G-=S}}return Ee}}class Fs{constructor(){this.decoder=new jo}decode(n,c=null){let u,m;if(c!=null&&c.has(U.PURE_BARCODE)){const F=Fs.extractPureBits(n.getBlackMatrix());u=this.decoder.decode(F),m=Fs.NO_POINTS}else{const F=new Xr(n.getBlackMatrix()).detect();u=this.decoder.decode(F.getBits()),m=F.getPoints()}const g=u.getRawBytes(),v=new ae(u.getText(),g,8*g.length,m,Z.DATA_MATRIX,A.currentTimeMillis()),N=u.getByteSegments();N!=null&&v.putMetadata(je.BYTE_SEGMENTS,N);const S=u.getECLevel();return S!=null&&v.putMetadata(je.ERROR_CORRECTION_LEVEL,S),v}reset(){}static extractPureBits(n){const c=n.getTopLeftOnBit(),u=n.getBottomRightOnBit();if(c==null||u==null)throw new X;const m=this.moduleSize(c,n);let g=c[1];const v=u[1];let N=c[0];const F=(u[0]-N+1)/m,G=(v-g+1)/m;if(F<=0||G<=0)throw new X;const ee=m/2;g+=ee,N+=ee;const ue=new ie(F,G);for(let Ee=0;Ee<G;Ee++){const De=g+Ee*m;for(let Oe=0;Oe<F;Oe++)n.get(N+Oe*m,De)&&ue.set(Oe,Ee)}return ue}static moduleSize(n,c){const u=c.getWidth();let m=n[0];const g=n[1];for(;m<u&&c.get(m,g);)m++;if(m===u)throw new X;const v=m-n[0];if(v===0)throw new X;return v}}Fs.NO_POINTS=[];class Cf extends Y{constructor(n=500){super(new Fs,n)}}var Ea;(function(J){J[J.L=0]="L",J[J.M=1]="M",J[J.Q=2]="Q",J[J.H=3]="H"})(Ea||(Ea={}));class jr{constructor(n,c,u){this.value=n,this.stringValue=c,this.bits=u,jr.FOR_BITS.set(u,this),jr.FOR_VALUE.set(n,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(n){switch(n){case"L":return jr.L;case"M":return jr.M;case"Q":return jr.Q;case"H":return jr.H;default:throw new w(n+"not available")}}toString(){return this.stringValue}equals(n){if(!(n instanceof jr))return!1;const c=n;return this.value===c.value}static forBits(n){if(n<0||n>=jr.FOR_BITS.size)throw new j;return jr.FOR_BITS.get(n)}}jr.FOR_BITS=new Map,jr.FOR_VALUE=new Map,jr.L=new jr(Ea.L,"L",1),jr.M=new jr(Ea.M,"M",0),jr.Q=new jr(Ea.Q,"Q",3),jr.H=new jr(Ea.H,"H",2);class Ca{constructor(n){this.errorCorrectionLevel=jr.forBits(n>>3&3),this.dataMask=n&7}static numBitsDiffering(n,c){return T.bitCount(n^c)}static decodeFormatInformation(n,c){const u=Ca.doDecodeFormatInformation(n,c);return u!==null?u:Ca.doDecodeFormatInformation(n^Ca.FORMAT_INFO_MASK_QR,c^Ca.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(n,c){let u=Number.MAX_SAFE_INTEGER,m=0;for(const g of Ca.FORMAT_INFO_DECODE_LOOKUP){const v=g[0];if(v===n||v===c)return new Ca(g[1]);let N=Ca.numBitsDiffering(n,v);N<u&&(m=g[1],u=N),n!==c&&(N=Ca.numBitsDiffering(c,v),N<u&&(m=g[1],u=N))}return u<=3?new Ca(m):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(n){if(!(n instanceof Ca))return!1;const c=n;return this.errorCorrectionLevel===c.errorCorrectionLevel&&this.dataMask===c.dataMask}}Ca.FORMAT_INFO_MASK_QR=21522,Ca.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class He{constructor(n,...c){this.ecCodewordsPerBlock=n,this.ecBlocks=c}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let n=0;const c=this.ecBlocks;for(const u of c)n+=u.getCount();return n}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class ve{constructor(n,c){this.count=n,this.dataCodewords=c}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Rt{constructor(n,c,...u){this.versionNumber=n,this.alignmentPatternCenters=c,this.ecBlocks=u;let m=0;const g=u[0].getECCodewordsPerBlock(),v=u[0].getECBlocks();for(const N of v)m+=N.getCount()*(N.getDataCodewords()+g);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(n){return this.ecBlocks[n.getValue()]}static getProvisionalVersionForDimension(n){if(n%4!==1)throw new L;try{return this.getVersionForNumber((n-17)/4)}catch{throw new L}}static getVersionForNumber(n){if(n<1||n>40)throw new j;return Rt.VERSIONS[n-1]}static decodeVersionInformation(n){let c=Number.MAX_SAFE_INTEGER,u=0;for(let m=0;m<Rt.VERSION_DECODE_INFO.length;m++){const g=Rt.VERSION_DECODE_INFO[m];if(g===n)return Rt.getVersionForNumber(m+7);const v=Ca.numBitsDiffering(n,g);v<c&&(u=m+7,c=v)}return c<=3?Rt.getVersionForNumber(u):null}buildFunctionPattern(){const n=this.getDimensionForVersion(),c=new ie(n);c.setRegion(0,0,9,9),c.setRegion(n-8,0,8,9),c.setRegion(0,n-8,9,8);const u=this.alignmentPatternCenters.length;for(let m=0;m<u;m++){const g=this.alignmentPatternCenters[m]-2;for(let v=0;v<u;v++)m===0&&(v===0||v===u-1)||m===u-1&&v===0||c.setRegion(this.alignmentPatternCenters[v]-2,g,5,5)}return c.setRegion(6,9,1,n-17),c.setRegion(9,6,n-17,1),this.versionNumber>6&&(c.setRegion(n-11,0,3,6),c.setRegion(0,n-11,6,3)),c}toString(){return""+this.versionNumber}}Rt.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Rt.VERSIONS=[new Rt(1,new Int32Array(0),new He(7,new ve(1,19)),new He(10,new ve(1,16)),new He(13,new ve(1,13)),new He(17,new ve(1,9))),new Rt(2,Int32Array.from([6,18]),new He(10,new ve(1,34)),new He(16,new ve(1,28)),new He(22,new ve(1,22)),new He(28,new ve(1,16))),new Rt(3,Int32Array.from([6,22]),new He(15,new ve(1,55)),new He(26,new ve(1,44)),new He(18,new ve(2,17)),new He(22,new ve(2,13))),new Rt(4,Int32Array.from([6,26]),new He(20,new ve(1,80)),new He(18,new ve(2,32)),new He(26,new ve(2,24)),new He(16,new ve(4,9))),new Rt(5,Int32Array.from([6,30]),new He(26,new ve(1,108)),new He(24,new ve(2,43)),new He(18,new ve(2,15),new ve(2,16)),new He(22,new ve(2,11),new ve(2,12))),new Rt(6,Int32Array.from([6,34]),new He(18,new ve(2,68)),new He(16,new ve(4,27)),new He(24,new ve(4,19)),new He(28,new ve(4,15))),new Rt(7,Int32Array.from([6,22,38]),new He(20,new ve(2,78)),new He(18,new ve(4,31)),new He(18,new ve(2,14),new ve(4,15)),new He(26,new ve(4,13),new ve(1,14))),new Rt(8,Int32Array.from([6,24,42]),new He(24,new ve(2,97)),new He(22,new ve(2,38),new ve(2,39)),new He(22,new ve(4,18),new ve(2,19)),new He(26,new ve(4,14),new ve(2,15))),new Rt(9,Int32Array.from([6,26,46]),new He(30,new ve(2,116)),new He(22,new ve(3,36),new ve(2,37)),new He(20,new ve(4,16),new ve(4,17)),new He(24,new ve(4,12),new ve(4,13))),new Rt(10,Int32Array.from([6,28,50]),new He(18,new ve(2,68),new ve(2,69)),new He(26,new ve(4,43),new ve(1,44)),new He(24,new ve(6,19),new ve(2,20)),new He(28,new ve(6,15),new ve(2,16))),new Rt(11,Int32Array.from([6,30,54]),new He(20,new ve(4,81)),new He(30,new ve(1,50),new ve(4,51)),new He(28,new ve(4,22),new ve(4,23)),new He(24,new ve(3,12),new ve(8,13))),new Rt(12,Int32Array.from([6,32,58]),new He(24,new ve(2,92),new ve(2,93)),new He(22,new ve(6,36),new ve(2,37)),new He(26,new ve(4,20),new ve(6,21)),new He(28,new ve(7,14),new ve(4,15))),new Rt(13,Int32Array.from([6,34,62]),new He(26,new ve(4,107)),new He(22,new ve(8,37),new ve(1,38)),new He(24,new ve(8,20),new ve(4,21)),new He(22,new ve(12,11),new ve(4,12))),new Rt(14,Int32Array.from([6,26,46,66]),new He(30,new ve(3,115),new ve(1,116)),new He(24,new ve(4,40),new ve(5,41)),new He(20,new ve(11,16),new ve(5,17)),new He(24,new ve(11,12),new ve(5,13))),new Rt(15,Int32Array.from([6,26,48,70]),new He(22,new ve(5,87),new ve(1,88)),new He(24,new ve(5,41),new ve(5,42)),new He(30,new ve(5,24),new ve(7,25)),new He(24,new ve(11,12),new ve(7,13))),new Rt(16,Int32Array.from([6,26,50,74]),new He(24,new ve(5,98),new ve(1,99)),new He(28,new ve(7,45),new ve(3,46)),new He(24,new ve(15,19),new ve(2,20)),new He(30,new ve(3,15),new ve(13,16))),new Rt(17,Int32Array.from([6,30,54,78]),new He(28,new ve(1,107),new ve(5,108)),new He(28,new ve(10,46),new ve(1,47)),new He(28,new ve(1,22),new ve(15,23)),new He(28,new ve(2,14),new ve(17,15))),new Rt(18,Int32Array.from([6,30,56,82]),new He(30,new ve(5,120),new ve(1,121)),new He(26,new ve(9,43),new ve(4,44)),new He(28,new ve(17,22),new ve(1,23)),new He(28,new ve(2,14),new ve(19,15))),new Rt(19,Int32Array.from([6,30,58,86]),new He(28,new ve(3,113),new ve(4,114)),new He(26,new ve(3,44),new ve(11,45)),new He(26,new ve(17,21),new ve(4,22)),new He(26,new ve(9,13),new ve(16,14))),new Rt(20,Int32Array.from([6,34,62,90]),new He(28,new ve(3,107),new ve(5,108)),new He(26,new ve(3,41),new ve(13,42)),new He(30,new ve(15,24),new ve(5,25)),new He(28,new ve(15,15),new ve(10,16))),new Rt(21,Int32Array.from([6,28,50,72,94]),new He(28,new ve(4,116),new ve(4,117)),new He(26,new ve(17,42)),new He(28,new ve(17,22),new ve(6,23)),new He(30,new ve(19,16),new ve(6,17))),new Rt(22,Int32Array.from([6,26,50,74,98]),new He(28,new ve(2,111),new ve(7,112)),new He(28,new ve(17,46)),new He(30,new ve(7,24),new ve(16,25)),new He(24,new ve(34,13))),new Rt(23,Int32Array.from([6,30,54,78,102]),new He(30,new ve(4,121),new ve(5,122)),new He(28,new ve(4,47),new ve(14,48)),new He(30,new ve(11,24),new ve(14,25)),new He(30,new ve(16,15),new ve(14,16))),new Rt(24,Int32Array.from([6,28,54,80,106]),new He(30,new ve(6,117),new ve(4,118)),new He(28,new ve(6,45),new ve(14,46)),new He(30,new ve(11,24),new ve(16,25)),new He(30,new ve(30,16),new ve(2,17))),new Rt(25,Int32Array.from([6,32,58,84,110]),new He(26,new ve(8,106),new ve(4,107)),new He(28,new ve(8,47),new ve(13,48)),new He(30,new ve(7,24),new ve(22,25)),new He(30,new ve(22,15),new ve(13,16))),new Rt(26,Int32Array.from([6,30,58,86,114]),new He(28,new ve(10,114),new ve(2,115)),new He(28,new ve(19,46),new ve(4,47)),new He(28,new ve(28,22),new ve(6,23)),new He(30,new ve(33,16),new ve(4,17))),new Rt(27,Int32Array.from([6,34,62,90,118]),new He(30,new ve(8,122),new ve(4,123)),new He(28,new ve(22,45),new ve(3,46)),new He(30,new ve(8,23),new ve(26,24)),new He(30,new ve(12,15),new ve(28,16))),new Rt(28,Int32Array.from([6,26,50,74,98,122]),new He(30,new ve(3,117),new ve(10,118)),new He(28,new ve(3,45),new ve(23,46)),new He(30,new ve(4,24),new ve(31,25)),new He(30,new ve(11,15),new ve(31,16))),new Rt(29,Int32Array.from([6,30,54,78,102,126]),new He(30,new ve(7,116),new ve(7,117)),new He(28,new ve(21,45),new ve(7,46)),new He(30,new ve(1,23),new ve(37,24)),new He(30,new ve(19,15),new ve(26,16))),new Rt(30,Int32Array.from([6,26,52,78,104,130]),new He(30,new ve(5,115),new ve(10,116)),new He(28,new ve(19,47),new ve(10,48)),new He(30,new ve(15,24),new ve(25,25)),new He(30,new ve(23,15),new ve(25,16))),new Rt(31,Int32Array.from([6,30,56,82,108,134]),new He(30,new ve(13,115),new ve(3,116)),new He(28,new ve(2,46),new ve(29,47)),new He(30,new ve(42,24),new ve(1,25)),new He(30,new ve(23,15),new ve(28,16))),new Rt(32,Int32Array.from([6,34,60,86,112,138]),new He(30,new ve(17,115)),new He(28,new ve(10,46),new ve(23,47)),new He(30,new ve(10,24),new ve(35,25)),new He(30,new ve(19,15),new ve(35,16))),new Rt(33,Int32Array.from([6,30,58,86,114,142]),new He(30,new ve(17,115),new ve(1,116)),new He(28,new ve(14,46),new ve(21,47)),new He(30,new ve(29,24),new ve(19,25)),new He(30,new ve(11,15),new ve(46,16))),new Rt(34,Int32Array.from([6,34,62,90,118,146]),new He(30,new ve(13,115),new ve(6,116)),new He(28,new ve(14,46),new ve(23,47)),new He(30,new ve(44,24),new ve(7,25)),new He(30,new ve(59,16),new ve(1,17))),new Rt(35,Int32Array.from([6,30,54,78,102,126,150]),new He(30,new ve(12,121),new ve(7,122)),new He(28,new ve(12,47),new ve(26,48)),new He(30,new ve(39,24),new ve(14,25)),new He(30,new ve(22,15),new ve(41,16))),new Rt(36,Int32Array.from([6,24,50,76,102,128,154]),new He(30,new ve(6,121),new ve(14,122)),new He(28,new ve(6,47),new ve(34,48)),new He(30,new ve(46,24),new ve(10,25)),new He(30,new ve(2,15),new ve(64,16))),new Rt(37,Int32Array.from([6,28,54,80,106,132,158]),new He(30,new ve(17,122),new ve(4,123)),new He(28,new ve(29,46),new ve(14,47)),new He(30,new ve(49,24),new ve(10,25)),new He(30,new ve(24,15),new ve(46,16))),new Rt(38,Int32Array.from([6,32,58,84,110,136,162]),new He(30,new ve(4,122),new ve(18,123)),new He(28,new ve(13,46),new ve(32,47)),new He(30,new ve(48,24),new ve(14,25)),new He(30,new ve(42,15),new ve(32,16))),new Rt(39,Int32Array.from([6,26,54,82,110,138,166]),new He(30,new ve(20,117),new ve(4,118)),new He(28,new ve(40,47),new ve(7,48)),new He(30,new ve(43,24),new ve(22,25)),new He(30,new ve(10,15),new ve(67,16))),new Rt(40,Int32Array.from([6,30,58,86,114,142,170]),new He(30,new ve(19,118),new ve(6,119)),new He(28,new ve(18,47),new ve(31,48)),new He(30,new ve(34,24),new ve(34,25)),new He(30,new ve(20,15),new ve(61,16)))];var oa;(function(J){J[J.DATA_MASK_000=0]="DATA_MASK_000",J[J.DATA_MASK_001=1]="DATA_MASK_001",J[J.DATA_MASK_010=2]="DATA_MASK_010",J[J.DATA_MASK_011=3]="DATA_MASK_011",J[J.DATA_MASK_100=4]="DATA_MASK_100",J[J.DATA_MASK_101=5]="DATA_MASK_101",J[J.DATA_MASK_110=6]="DATA_MASK_110",J[J.DATA_MASK_111=7]="DATA_MASK_111"})(oa||(oa={}));class _a{constructor(n,c){this.value=n,this.isMasked=c}unmaskBitMatrix(n,c){for(let u=0;u<c;u++)for(let m=0;m<c;m++)this.isMasked(u,m)&&n.flip(m,u)}}_a.values=new Map([[oa.DATA_MASK_000,new _a(oa.DATA_MASK_000,(J,n)=>(J+n&1)===0)],[oa.DATA_MASK_001,new _a(oa.DATA_MASK_001,(J,n)=>(J&1)===0)],[oa.DATA_MASK_010,new _a(oa.DATA_MASK_010,(J,n)=>n%3===0)],[oa.DATA_MASK_011,new _a(oa.DATA_MASK_011,(J,n)=>(J+n)%3===0)],[oa.DATA_MASK_100,new _a(oa.DATA_MASK_100,(J,n)=>(Math.floor(J/2)+Math.floor(n/3)&1)===0)],[oa.DATA_MASK_101,new _a(oa.DATA_MASK_101,(J,n)=>J*n%6===0)],[oa.DATA_MASK_110,new _a(oa.DATA_MASK_110,(J,n)=>J*n%6<3)],[oa.DATA_MASK_111,new _a(oa.DATA_MASK_111,(J,n)=>(J+n+J*n%3&1)===0)]]);class _f{constructor(n){const c=n.getHeight();if(c<21||(c&3)!==1)throw new L;this.bitMatrix=n}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let n=0;for(let g=0;g<6;g++)n=this.copyBit(g,8,n);n=this.copyBit(7,8,n),n=this.copyBit(8,8,n),n=this.copyBit(8,7,n);for(let g=5;g>=0;g--)n=this.copyBit(8,g,n);const c=this.bitMatrix.getHeight();let u=0;const m=c-7;for(let g=c-1;g>=m;g--)u=this.copyBit(8,g,u);for(let g=c-8;g<c;g++)u=this.copyBit(g,8,u);if(this.parsedFormatInfo=Ca.decodeFormatInformation(n,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const n=this.bitMatrix.getHeight(),c=Math.floor((n-17)/4);if(c<=6)return Rt.getVersionForNumber(c);let u=0;const m=n-11;for(let v=5;v>=0;v--)for(let N=n-9;N>=m;N--)u=this.copyBit(N,v,u);let g=Rt.decodeVersionInformation(u);if(g!==null&&g.getDimensionForVersion()===n)return this.parsedVersion=g,g;u=0;for(let v=5;v>=0;v--)for(let N=n-9;N>=m;N--)u=this.copyBit(v,N,u);if(g=Rt.decodeVersionInformation(u),g!==null&&g.getDimensionForVersion()===n)return this.parsedVersion=g,g;throw new L}copyBit(n,c,u){return(this.isMirror?this.bitMatrix.get(c,n):this.bitMatrix.get(n,c))?u<<1|1:u<<1}readCodewords(){const n=this.readFormatInformation(),c=this.readVersion(),u=_a.values.get(n.getDataMask()),m=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,m);const g=c.buildFunctionPattern();let v=!0;const N=new Uint8Array(c.getTotalCodewords());let S=0,F=0,G=0;for(let ee=m-1;ee>0;ee-=2){ee===6&&ee--;for(let ue=0;ue<m;ue++){const Ee=v?m-1-ue:ue;for(let De=0;De<2;De++)g.get(ee-De,Ee)||(G++,F<<=1,this.bitMatrix.get(ee-De,Ee)&&(F|=1),G===8&&(N[S++]=F,G=0,F=0))}v=!v}if(S!==c.getTotalCodewords())throw new L;return N}remask(){if(this.parsedFormatInfo===null)return;const n=_a.values[this.parsedFormatInfo.getDataMask()],c=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,c)}setMirror(n){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=n}mirror(){const n=this.bitMatrix;for(let c=0,u=n.getWidth();c<u;c++)for(let m=c+1,g=n.getHeight();m<g;m++)n.get(c,m)!==n.get(m,c)&&(n.flip(m,c),n.flip(c,m))}}class Eo{constructor(n,c){this.numDataCodewords=n,this.codewords=c}static getDataBlocks(n,c,u){if(n.length!==c.getTotalCodewords())throw new j;const m=c.getECBlocksForLevel(u);let g=0;const v=m.getECBlocks();for(const De of v)g+=De.getCount();const N=new Array(g);let S=0;for(const De of v)for(let Oe=0;Oe<De.getCount();Oe++){const ze=De.getDataCodewords(),Ke=m.getECCodewordsPerBlock()+ze;N[S++]=new Eo(ze,new Uint8Array(Ke))}const F=N[0].codewords.length;let G=N.length-1;for(;G>=0&&N[G].codewords.length!==F;)G--;G++;const ee=F-m.getECCodewordsPerBlock();let ue=0;for(let De=0;De<ee;De++)for(let Oe=0;Oe<S;Oe++)N[Oe].codewords[De]=n[ue++];for(let De=G;De<S;De++)N[De].codewords[ee]=n[ue++];const Ee=N[0].codewords.length;for(let De=ee;De<Ee;De++)for(let Oe=0;Oe<S;Oe++){const ze=Oe<G?De:De+1;N[Oe].codewords[ze]=n[ue++]}return N}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var hs;(function(J){J[J.TERMINATOR=0]="TERMINATOR",J[J.NUMERIC=1]="NUMERIC",J[J.ALPHANUMERIC=2]="ALPHANUMERIC",J[J.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",J[J.BYTE=4]="BYTE",J[J.ECI=5]="ECI",J[J.KANJI=6]="KANJI",J[J.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",J[J.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",J[J.HANZI=9]="HANZI"})(hs||(hs={}));class Ot{constructor(n,c,u,m){this.value=n,this.stringValue=c,this.characterCountBitsForVersions=u,this.bits=m,Ot.FOR_BITS.set(m,this),Ot.FOR_VALUE.set(n,this)}static forBits(n){const c=Ot.FOR_BITS.get(n);if(c===void 0)throw new j;return c}getCharacterCountBits(n){const c=n.getVersionNumber();let u;return c<=9?u=0:c<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(n){if(!(n instanceof Ot))return!1;const c=n;return this.value===c.value}toString(){return this.stringValue}}Ot.FOR_BITS=new Map,Ot.FOR_VALUE=new Map,Ot.TERMINATOR=new Ot(hs.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ot.NUMERIC=new Ot(hs.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ot.ALPHANUMERIC=new Ot(hs.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ot.STRUCTURED_APPEND=new Ot(hs.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ot.BYTE=new Ot(hs.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ot.ECI=new Ot(hs.ECI,"ECI",Int32Array.from([0,0,0]),7),Ot.KANJI=new Ot(hs.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ot.FNC1_FIRST_POSITION=new Ot(hs.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ot.FNC1_SECOND_POSITION=new Ot(hs.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ot.HANZI=new Ot(hs.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Vr{static decode(n,c,u,m){const g=new Za(n);let v=new ne;const N=new Array;let S=-1,F=-1;try{let G=null,ee=!1,ue;do{if(g.available()<4)ue=Ot.TERMINATOR;else{const Ee=g.readBits(4);ue=Ot.forBits(Ee)}switch(ue){case Ot.TERMINATOR:break;case Ot.FNC1_FIRST_POSITION:case Ot.FNC1_SECOND_POSITION:ee=!0;break;case Ot.STRUCTURED_APPEND:if(g.available()<16)throw new L;S=g.readBits(8),F=g.readBits(8);break;case Ot.ECI:const Ee=Vr.parseECIValue(g);if(G=z.getCharacterSetECIByValue(Ee),G===null)throw new L;break;case Ot.HANZI:const De=g.readBits(4),Oe=g.readBits(ue.getCharacterCountBits(c));De===Vr.GB2312_SUBSET&&Vr.decodeHanziSegment(g,v,Oe);break;default:const ze=g.readBits(ue.getCharacterCountBits(c));switch(ue){case Ot.NUMERIC:Vr.decodeNumericSegment(g,v,ze);break;case Ot.ALPHANUMERIC:Vr.decodeAlphanumericSegment(g,v,ze,ee);break;case Ot.BYTE:Vr.decodeByteSegment(g,v,ze,G,N,m);break;case Ot.KANJI:Vr.decodeKanjiSegment(g,v,ze);break;default:throw new L}break}}while(ue!==Ot.TERMINATOR)}catch{throw new L}return new Ue(n,v.toString(),N.length===0?null:N,u===null?null:u.toString(),S,F)}static decodeHanziSegment(n,c,u){if(u*13>n.available())throw new L;const m=new Uint8Array(2*u);let g=0;for(;u>0;){const v=n.readBits(13);let N=v/96<<8&4294967295|v%96;N<959?N+=41377:N+=42657,m[g]=N>>8&255,m[g+1]=N&255,g+=2,u--}try{c.append(te.decode(m,V.GB2312))}catch(v){throw new L(v)}}static decodeKanjiSegment(n,c,u){if(u*13>n.available())throw new L;const m=new Uint8Array(2*u);let g=0;for(;u>0;){const v=n.readBits(13);let N=v/192<<8&4294967295|v%192;N<7936?N+=33088:N+=49472,m[g]=N>>8,m[g+1]=N,g+=2,u--}try{c.append(te.decode(m,V.SHIFT_JIS))}catch(v){throw new L(v)}}static decodeByteSegment(n,c,u,m,g,v){if(8*u>n.available())throw new L;const N=new Uint8Array(u);for(let F=0;F<u;F++)N[F]=n.readBits(8);let S;m===null?S=V.guessEncoding(N,v):S=m.getName();try{c.append(te.decode(N,S))}catch(F){throw new L(F)}g.push(N)}static toAlphaNumericChar(n){if(n>=Vr.ALPHANUMERIC_CHARS.length)throw new L;return Vr.ALPHANUMERIC_CHARS[n]}static decodeAlphanumericSegment(n,c,u,m){const g=c.length();for(;u>1;){if(n.available()<11)throw new L;const v=n.readBits(11);c.append(Vr.toAlphaNumericChar(Math.floor(v/45))),c.append(Vr.toAlphaNumericChar(v%45)),u-=2}if(u===1){if(n.available()<6)throw new L;c.append(Vr.toAlphaNumericChar(n.readBits(6)))}if(m)for(let v=g;v<c.length();v++)c.charAt(v)==="%"&&(v<c.length()-1&&c.charAt(v+1)==="%"?c.deleteCharAt(v+1):c.setCharAt(v,""))}static decodeNumericSegment(n,c,u){for(;u>=3;){if(n.available()<10)throw new L;const m=n.readBits(10);if(m>=1e3)throw new L;c.append(Vr.toAlphaNumericChar(Math.floor(m/100))),c.append(Vr.toAlphaNumericChar(Math.floor(m/10)%10)),c.append(Vr.toAlphaNumericChar(m%10)),u-=3}if(u===2){if(n.available()<7)throw new L;const m=n.readBits(7);if(m>=100)throw new L;c.append(Vr.toAlphaNumericChar(Math.floor(m/10))),c.append(Vr.toAlphaNumericChar(m%10))}else if(u===1){if(n.available()<4)throw new L;const m=n.readBits(4);if(m>=10)throw new L;c.append(Vr.toAlphaNumericChar(m))}}static parseECIValue(n){const c=n.readBits(8);if((c&128)===0)return c&127;if((c&192)===128){const u=n.readBits(8);return(c&63)<<8&4294967295|u}if((c&224)===192){const u=n.readBits(16);return(c&31)<<16&4294967295|u}throw new L}}Vr.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Vr.GB2312_SUBSET=1;class md{constructor(n){this.mirrored=n}isMirrored(){return this.mirrored}applyMirroredCorrection(n){if(!this.mirrored||n===null||n.length<3)return;const c=n[0];n[0]=n[2],n[2]=c}}class Co{constructor(){this.rsDecoder=new Je(Ae.QR_CODE_FIELD_256)}decodeBooleanArray(n,c){return this.decodeBitMatrix(ie.parseFromBooleanArray(n),c)}decodeBitMatrix(n,c){const u=new _f(n);let m=null;try{return this.decodeBitMatrixParser(u,c)}catch(g){m=g}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const g=this.decodeBitMatrixParser(u,c);return g.setOther(new md(!0)),g}catch(g){throw m!==null?m:g}}decodeBitMatrixParser(n,c){const u=n.readVersion(),m=n.readFormatInformation().getErrorCorrectionLevel(),g=n.readCodewords(),v=Eo.getDataBlocks(g,u,m);let N=0;for(const G of v)N+=G.getNumDataCodewords();const S=new Uint8Array(N);let F=0;for(const G of v){const ee=G.getCodewords(),ue=G.getNumDataCodewords();this.correctErrors(ee,ue);for(let Ee=0;Ee<ue;Ee++)S[F++]=ee[Ee]}return Vr.decode(S,u,m,c)}correctErrors(n,c){const u=new Int32Array(n);try{this.rsDecoder.decode(u,n.length-c)}catch{throw new _}for(let m=0;m<c;m++)n[m]=u[m]}}class Sl extends pe{constructor(n,c,u){super(n,c),this.estimatedModuleSize=u}aboutEquals(n,c,u){if(Math.abs(c-this.getY())<=n&&Math.abs(u-this.getX())<=n){const m=Math.abs(n-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(n,c,u){const m=(this.getX()+c)/2,g=(this.getY()+n)/2,v=(this.estimatedModuleSize+u)/2;return new Sl(m,g,v)}}class Li{constructor(n,c,u,m,g,v,N){this.image=n,this.startX=c,this.startY=u,this.width=m,this.height=g,this.moduleSize=v,this.resultPointCallback=N,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const n=this.startX,c=this.height,u=this.width,m=n+u,g=this.startY+c/2,v=new Int32Array(3),N=this.image;for(let S=0;S<c;S++){const F=g+((S&1)===0?Math.floor((S+1)/2):-Math.floor((S+1)/2));v[0]=0,v[1]=0,v[2]=0;let G=n;for(;G<m&&!N.get(G,F);)G++;let ee=0;for(;G<m;){if(N.get(G,F))if(ee===1)v[1]++;else if(ee===2){if(this.foundPatternCross(v)){const ue=this.handlePossibleCenter(v,F,G);if(ue!==null)return ue}v[0]=v[2],v[1]=1,v[2]=0,ee=1}else v[++ee]++;else ee===1&&ee++,v[ee]++;G++}if(this.foundPatternCross(v)){const ue=this.handlePossibleCenter(v,F,m);if(ue!==null)return ue}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new X}static centerFromEnd(n,c){return c-n[2]-n[1]/2}foundPatternCross(n){const c=this.moduleSize,u=c/2;for(let m=0;m<3;m++)if(Math.abs(c-n[m])>=u)return!1;return!0}crossCheckVertical(n,c,u,m){const g=this.image,v=g.getHeight(),N=this.crossCheckStateCount;N[0]=0,N[1]=0,N[2]=0;let S=n;for(;S>=0&&g.get(c,S)&&N[1]<=u;)N[1]++,S--;if(S<0||N[1]>u)return NaN;for(;S>=0&&!g.get(c,S)&&N[0]<=u;)N[0]++,S--;if(N[0]>u)return NaN;for(S=n+1;S<v&&g.get(c,S)&&N[1]<=u;)N[1]++,S++;if(S===v||N[1]>u)return NaN;for(;S<v&&!g.get(c,S)&&N[2]<=u;)N[2]++,S++;if(N[2]>u)return NaN;const F=N[0]+N[1]+N[2];return 5*Math.abs(F-m)>=2*m?NaN:this.foundPatternCross(N)?Li.centerFromEnd(N,S):NaN}handlePossibleCenter(n,c,u){const m=n[0]+n[1]+n[2],g=Li.centerFromEnd(n,u),v=this.crossCheckVertical(c,g,2*n[1],m);if(!isNaN(v)){const N=(n[0]+n[1]+n[2])/3;for(const F of this.possibleCenters)if(F.aboutEquals(N,v,g))return F.combineEstimate(v,g,N);const S=new Sl(g,v,N);this.possibleCenters.push(S),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(S)}return null}}class Mn extends pe{constructor(n,c,u,m){super(n,c),this.estimatedModuleSize=u,this.count=m,m===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(n,c,u){if(Math.abs(c-this.getY())<=n&&Math.abs(u-this.getX())<=n){const m=Math.abs(n-this.estimatedModuleSize);return m<=1||m<=this.estimatedModuleSize}return!1}combineEstimate(n,c,u){const m=this.count+1,g=(this.count*this.getX()+c)/m,v=(this.count*this.getY()+n)/m,N=(this.count*this.estimatedModuleSize+u)/m;return new Mn(g,v,N,m)}}class Pi{constructor(n){this.bottomLeft=n[0],this.topLeft=n[1],this.topRight=n[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class ca{constructor(n,c){this.image=n,this.resultPointCallback=c,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=c}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(n){const c=n!=null&&n.get(U.TRY_HARDER)!==void 0,u=n!=null&&n.get(U.PURE_BARCODE)!==void 0,m=this.image,g=m.getHeight(),v=m.getWidth();let N=Math.floor(3*g/(4*ca.MAX_MODULES));(N<ca.MIN_SKIP||c)&&(N=ca.MIN_SKIP);let S=!1;const F=new Int32Array(5);for(let ee=N-1;ee<g&&!S;ee+=N){F[0]=0,F[1]=0,F[2]=0,F[3]=0,F[4]=0;let ue=0;for(let Ee=0;Ee<v;Ee++)if(m.get(Ee,ee))(ue&1)===1&&ue++,F[ue]++;else if((ue&1)===0)if(ue===4)if(ca.foundPatternCross(F)){if(this.handlePossibleCenter(F,ee,Ee,u)===!0)if(N=2,this.hasSkipped===!0)S=this.haveMultiplyConfirmedCenters();else{const Oe=this.findRowSkip();Oe>F[2]&&(ee+=Oe-F[2]-N,Ee=v-1)}else{F[0]=F[2],F[1]=F[3],F[2]=F[4],F[3]=1,F[4]=0,ue=3;continue}ue=0,F[0]=0,F[1]=0,F[2]=0,F[3]=0,F[4]=0}else F[0]=F[2],F[1]=F[3],F[2]=F[4],F[3]=1,F[4]=0,ue=3;else F[++ue]++;else F[ue]++;ca.foundPatternCross(F)&&this.handlePossibleCenter(F,ee,v,u)===!0&&(N=F[0],this.hasSkipped&&(S=this.haveMultiplyConfirmedCenters()))}const G=this.selectBestPatterns();return pe.orderBestPatterns(G),new Pi(G)}static centerFromEnd(n,c){return c-n[4]-n[3]-n[2]/2}static foundPatternCross(n){let c=0;for(let g=0;g<5;g++){const v=n[g];if(v===0)return!1;c+=v}if(c<7)return!1;const u=c/7,m=u/2;return Math.abs(u-n[0])<m&&Math.abs(u-n[1])<m&&Math.abs(3*u-n[2])<3*m&&Math.abs(u-n[3])<m&&Math.abs(u-n[4])<m}getCrossCheckStateCount(){const n=this.crossCheckStateCount;return n[0]=0,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n}crossCheckDiagonal(n,c,u,m){const g=this.getCrossCheckStateCount();let v=0;const N=this.image;for(;n>=v&&c>=v&&N.get(c-v,n-v);)g[2]++,v++;if(n<v||c<v)return!1;for(;n>=v&&c>=v&&!N.get(c-v,n-v)&&g[1]<=u;)g[1]++,v++;if(n<v||c<v||g[1]>u)return!1;for(;n>=v&&c>=v&&N.get(c-v,n-v)&&g[0]<=u;)g[0]++,v++;if(g[0]>u)return!1;const S=N.getHeight(),F=N.getWidth();for(v=1;n+v<S&&c+v<F&&N.get(c+v,n+v);)g[2]++,v++;if(n+v>=S||c+v>=F)return!1;for(;n+v<S&&c+v<F&&!N.get(c+v,n+v)&&g[3]<u;)g[3]++,v++;if(n+v>=S||c+v>=F||g[3]>=u)return!1;for(;n+v<S&&c+v<F&&N.get(c+v,n+v)&&g[4]<u;)g[4]++,v++;if(g[4]>=u)return!1;const G=g[0]+g[1]+g[2]+g[3]+g[4];return Math.abs(G-m)<2*m&&ca.foundPatternCross(g)}crossCheckVertical(n,c,u,m){const g=this.image,v=g.getHeight(),N=this.getCrossCheckStateCount();let S=n;for(;S>=0&&g.get(c,S);)N[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(c,S)&&N[1]<=u;)N[1]++,S--;if(S<0||N[1]>u)return NaN;for(;S>=0&&g.get(c,S)&&N[0]<=u;)N[0]++,S--;if(N[0]>u)return NaN;for(S=n+1;S<v&&g.get(c,S);)N[2]++,S++;if(S===v)return NaN;for(;S<v&&!g.get(c,S)&&N[3]<u;)N[3]++,S++;if(S===v||N[3]>=u)return NaN;for(;S<v&&g.get(c,S)&&N[4]<u;)N[4]++,S++;if(N[4]>=u)return NaN;const F=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(F-m)>=2*m?NaN:ca.foundPatternCross(N)?ca.centerFromEnd(N,S):NaN}crossCheckHorizontal(n,c,u,m){const g=this.image,v=g.getWidth(),N=this.getCrossCheckStateCount();let S=n;for(;S>=0&&g.get(S,c);)N[2]++,S--;if(S<0)return NaN;for(;S>=0&&!g.get(S,c)&&N[1]<=u;)N[1]++,S--;if(S<0||N[1]>u)return NaN;for(;S>=0&&g.get(S,c)&&N[0]<=u;)N[0]++,S--;if(N[0]>u)return NaN;for(S=n+1;S<v&&g.get(S,c);)N[2]++,S++;if(S===v)return NaN;for(;S<v&&!g.get(S,c)&&N[3]<u;)N[3]++,S++;if(S===v||N[3]>=u)return NaN;for(;S<v&&g.get(S,c)&&N[4]<u;)N[4]++,S++;if(N[4]>=u)return NaN;const F=N[0]+N[1]+N[2]+N[3]+N[4];return 5*Math.abs(F-m)>=m?NaN:ca.foundPatternCross(N)?ca.centerFromEnd(N,S):NaN}handlePossibleCenter(n,c,u,m){const g=n[0]+n[1]+n[2]+n[3]+n[4];let v=ca.centerFromEnd(n,u),N=this.crossCheckVertical(c,Math.floor(v),n[2],g);if(!isNaN(N)&&(v=this.crossCheckHorizontal(Math.floor(v),Math.floor(N),n[2],g),!isNaN(v)&&(!m||this.crossCheckDiagonal(Math.floor(N),Math.floor(v),n[2],g)))){const S=g/7;let F=!1;const G=this.possibleCenters;for(let ee=0,ue=G.length;ee<ue;ee++){const Ee=G[ee];if(Ee.aboutEquals(S,N,v)){G[ee]=Ee.combineEstimate(N,v,S),F=!0;break}}if(!F){const ee=new Mn(v,N,S);G.push(ee),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(ee)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let c=null;for(const u of this.possibleCenters)if(u.getCount()>=ca.CENTER_QUORUM)if(c==null)c=u;else return this.hasSkipped=!0,Math.floor((Math.abs(c.getX()-u.getX())-Math.abs(c.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let n=0,c=0;const u=this.possibleCenters.length;for(const v of this.possibleCenters)v.getCount()>=ca.CENTER_QUORUM&&(n++,c+=v.getEstimatedModuleSize());if(n<3)return!1;const m=c/u;let g=0;for(const v of this.possibleCenters)g+=Math.abs(v.getEstimatedModuleSize()-m);return g<=.05*c}selectBestPatterns(){const n=this.possibleCenters.length;if(n<3)throw new X;const c=this.possibleCenters;let u;if(n>3){let m=0,g=0;for(const S of this.possibleCenters){const F=S.getEstimatedModuleSize();m+=F,g+=F*F}u=m/n;let v=Math.sqrt(g/n-u*u);c.sort((S,F)=>{const G=Math.abs(F.getEstimatedModuleSize()-u),ee=Math.abs(S.getEstimatedModuleSize()-u);return G<ee?-1:G>ee?1:0});const N=Math.max(.2*u,v);for(let S=0;S<c.length&&c.length>3;S++){const F=c[S];Math.abs(F.getEstimatedModuleSize()-u)>N&&(c.splice(S,1),S--)}}if(c.length>3){let m=0;for(const g of c)m+=g.getEstimatedModuleSize();u=m/c.length,c.sort((g,v)=>{if(v.getCount()===g.getCount()){const N=Math.abs(v.getEstimatedModuleSize()-u),S=Math.abs(g.getEstimatedModuleSize()-u);return N<S?1:N>S?-1:0}else return v.getCount()-g.getCount()}),c.splice(3)}return[c[0],c[1],c[2]]}}ca.CENTER_QUORUM=2,ca.MIN_SKIP=3,ca.MAX_MODULES=57;class li{constructor(n){this.image=n}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(n){this.resultPointCallback=n==null?null:n.get(U.NEED_RESULT_POINT_CALLBACK);const u=new ca(this.image,this.resultPointCallback).find(n);return this.processFinderPatternInfo(u)}processFinderPatternInfo(n){const c=n.getTopLeft(),u=n.getTopRight(),m=n.getBottomLeft(),g=this.calculateModuleSize(c,u,m);if(g<1)throw new X("No pattern found in proccess finder.");const v=li.computeDimension(c,u,m,g),N=Rt.getProvisionalVersionForDimension(v),S=N.getDimensionForVersion()-7;let F=null;if(N.getAlignmentPatternCenters().length>0){const Ee=u.getX()-c.getX()+m.getX(),De=u.getY()-c.getY()+m.getY(),Oe=1-3/S,ze=Math.floor(c.getX()+Oe*(Ee-c.getX())),Ke=Math.floor(c.getY()+Oe*(De-c.getY()));for(let mt=4;mt<=16;mt<<=1)try{F=this.findAlignmentInRegion(g,ze,Ke,mt);break}catch(pt){if(!(pt instanceof X))throw pt}}const G=li.createTransform(c,u,m,F,v),ee=li.sampleGrid(this.image,G,v);let ue;return F===null?ue=[m,c,u]:ue=[m,c,u,F],new lt(ee,ue)}static createTransform(n,c,u,m,g){const v=g-3.5;let N,S,F,G;return m!==null?(N=m.getX(),S=m.getY(),F=v-3,G=F):(N=c.getX()-n.getX()+u.getX(),S=c.getY()-n.getY()+u.getY(),F=v,G=v),Dt.quadrilateralToQuadrilateral(3.5,3.5,v,3.5,F,G,3.5,v,n.getX(),n.getY(),c.getX(),c.getY(),N,S,u.getX(),u.getY())}static sampleGrid(n,c,u){return Lt.getInstance().sampleGridWithTransform(n,u,u,c)}static computeDimension(n,c,u,m){const g=me.round(pe.distance(n,c)/m),v=me.round(pe.distance(n,u)/m);let N=Math.floor((g+v)/2)+7;switch(N&3){case 0:N++;break;case 2:N--;break;case 3:throw new X("Dimensions could be not found.")}return N}calculateModuleSize(n,c,u){return(this.calculateModuleSizeOneWay(n,c)+this.calculateModuleSizeOneWay(n,u))/2}calculateModuleSizeOneWay(n,c){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(c.getX()),Math.floor(c.getY())),m=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(c.getX()),Math.floor(c.getY()),Math.floor(n.getX()),Math.floor(n.getY()));return isNaN(u)?m/7:isNaN(m)?u/7:(u+m)/14}sizeOfBlackWhiteBlackRunBothWays(n,c,u,m){let g=this.sizeOfBlackWhiteBlackRun(n,c,u,m),v=1,N=n-(u-n);N<0?(v=n/(n-N),N=0):N>=this.image.getWidth()&&(v=(this.image.getWidth()-1-n)/(N-n),N=this.image.getWidth()-1);let S=Math.floor(c-(m-c)*v);return v=1,S<0?(v=c/(c-S),S=0):S>=this.image.getHeight()&&(v=(this.image.getHeight()-1-c)/(S-c),S=this.image.getHeight()-1),N=Math.floor(n+(N-n)*v),g+=this.sizeOfBlackWhiteBlackRun(n,c,N,S),g-1}sizeOfBlackWhiteBlackRun(n,c,u,m){const g=Math.abs(m-c)>Math.abs(u-n);if(g){let Ee=n;n=c,c=Ee,Ee=u,u=m,m=Ee}const v=Math.abs(u-n),N=Math.abs(m-c);let S=-v/2;const F=n<u?1:-1,G=c<m?1:-1;let ee=0;const ue=u+F;for(let Ee=n,De=c;Ee!==ue;Ee+=F){const Oe=g?De:Ee,ze=g?Ee:De;if(ee===1===this.image.get(Oe,ze)){if(ee===2)return me.distance(Ee,De,n,c);ee++}if(S+=N,S>0){if(De===m)break;De+=G,S-=v}}return ee===2?me.distance(u+F,m,n,c):NaN}findAlignmentInRegion(n,c,u,m){const g=Math.floor(m*n),v=Math.max(0,c-g),N=Math.min(this.image.getWidth()-1,c+g);if(N-v<n*3)throw new X("Alignment top exceeds estimated module size.");const S=Math.max(0,u-g),F=Math.min(this.image.getHeight()-1,u+g);if(F-S<n*3)throw new X("Alignment bottom exceeds estimated module size.");return new Li(this.image,v,S,N-v,F-S,n,this.resultPointCallback).find()}}class gn{constructor(){this.decoder=new Co}getDecoder(){return this.decoder}decode(n,c){let u,m;if(c!=null&&c.get(U.PURE_BARCODE)!==void 0){const S=gn.extractPureBits(n.getBlackMatrix());u=this.decoder.decodeBitMatrix(S,c),m=gn.NO_POINTS}else{const S=new li(n.getBlackMatrix()).detect(c);u=this.decoder.decodeBitMatrix(S.getBits(),c),m=S.getPoints()}u.getOther()instanceof md&&u.getOther().applyMirroredCorrection(m);const g=new ae(u.getText(),u.getRawBytes(),void 0,m,Z.QR_CODE,void 0),v=u.getByteSegments();v!==null&&g.putMetadata(je.BYTE_SEGMENTS,v);const N=u.getECLevel();return N!==null&&g.putMetadata(je.ERROR_CORRECTION_LEVEL,N),u.hasStructuredAppend()&&(g.putMetadata(je.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),g.putMetadata(je.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),g}reset(){}static extractPureBits(n){const c=n.getTopLeftOnBit(),u=n.getBottomRightOnBit();if(c===null||u===null)throw new X;const m=this.moduleSize(c,n);let g=c[1],v=u[1],N=c[0],S=u[0];if(N>=S||g>=v)throw new X;if(v-g!==S-N&&(S=N+(v-g),S>=n.getWidth()))throw new X;const F=Math.round((S-N+1)/m),G=Math.round((v-g+1)/m);if(F<=0||G<=0)throw new X;if(G!==F)throw new X;const ee=Math.floor(m/2);g+=ee,N+=ee;const ue=N+Math.floor((F-1)*m)-S;if(ue>0){if(ue>ee)throw new X;N-=ue}const Ee=g+Math.floor((G-1)*m)-v;if(Ee>0){if(Ee>ee)throw new X;g-=Ee}const De=new ie(F,G);for(let Oe=0;Oe<G;Oe++){const ze=g+Math.floor(Oe*m);for(let Ke=0;Ke<F;Ke++)n.get(N+Math.floor(Ke*m),ze)&&De.set(Ke,Oe)}return De}static moduleSize(n,c){const u=c.getHeight(),m=c.getWidth();let g=n[0],v=n[1],N=!0,S=0;for(;g<m&&v<u;){if(N!==c.get(g,v)){if(++S===5)break;N=!N}g++,v++}if(g===m||v===u)throw new X;return(g-n[0])/7}}gn.NO_POINTS=new Array;class Mt{PDF417Common(){}static getBitCountSum(n){return me.sum(n)}static toIntArray(n){if(n==null||!n.length)return Mt.EMPTY_INT_ARRAY;const c=new Int32Array(n.length);let u=0;for(const m of n)c[u++]=m;return c}static getCodeword(n){const c=M.binarySearch(Mt.SYMBOL_TABLE,n&262143);return c<0?-1:(Mt.CODEWORD_TABLE[c]-1)%Mt.NUMBER_OF_CODEWORDS}}Mt.NUMBER_OF_CODEWORDS=929,Mt.MAX_CODEWORDS_IN_BARCODE=Mt.NUMBER_OF_CODEWORDS-1,Mt.MIN_ROWS_IN_BARCODE=3,Mt.MAX_ROWS_IN_BARCODE=90,Mt.MODULES_IN_CODEWORD=17,Mt.MODULES_IN_STOP_PATTERN=18,Mt.BARS_IN_MODULE=8,Mt.EMPTY_INT_ARRAY=new Int32Array([]),Mt.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Mt.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class pn{constructor(n,c){this.bits=n,this.points=c}getBits(){return this.bits}getPoints(){return this.points}}class Wt{static detectMultiple(n,c,u){let m=n.getBlackMatrix(),g=Wt.detect(u,m);return g.length||(m=m.clone(),m.rotate180(),g=Wt.detect(u,m)),new pn(m,g)}static detect(n,c){const u=new Array;let m=0,g=0,v=!1;for(;m<c.getHeight();){const N=Wt.findVertices(c,m,g);if(N[0]==null&&N[3]==null){if(!v)break;v=!1,g=0;for(const S of u)S[1]!=null&&(m=Math.trunc(Math.max(m,S[1].getY()))),S[3]!=null&&(m=Math.max(m,Math.trunc(S[3].getY())));m+=Wt.ROW_STEP;continue}if(v=!0,u.push(N),!n)break;N[2]!=null?(g=Math.trunc(N[2].getX()),m=Math.trunc(N[2].getY())):(g=Math.trunc(N[4].getX()),m=Math.trunc(N[4].getY()))}return u}static findVertices(n,c,u){const m=n.getHeight(),g=n.getWidth(),v=new Array(8);return Wt.copyToResult(v,Wt.findRowsWithPattern(n,m,g,c,u,Wt.START_PATTERN),Wt.INDEXES_START_PATTERN),v[4]!=null&&(u=Math.trunc(v[4].getX()),c=Math.trunc(v[4].getY())),Wt.copyToResult(v,Wt.findRowsWithPattern(n,m,g,c,u,Wt.STOP_PATTERN),Wt.INDEXES_STOP_PATTERN),v}static copyToResult(n,c,u){for(let m=0;m<u.length;m++)n[u[m]]=c[m]}static findRowsWithPattern(n,c,u,m,g,v){const N=new Array(4);let S=!1;const F=new Int32Array(v.length);for(;m<c;m+=Wt.ROW_STEP){let ee=Wt.findGuardPattern(n,g,m,u,!1,v,F);if(ee!=null){for(;m>0;){const ue=Wt.findGuardPattern(n,g,--m,u,!1,v,F);if(ue!=null)ee=ue;else{m++;break}}N[0]=new pe(ee[0],m),N[1]=new pe(ee[1],m),S=!0;break}}let G=m+1;if(S){let ee=0,ue=Int32Array.from([Math.trunc(N[0].getX()),Math.trunc(N[1].getX())]);for(;G<c;G++){const Ee=Wt.findGuardPattern(n,ue[0],G,u,!1,v,F);if(Ee!=null&&Math.abs(ue[0]-Ee[0])<Wt.MAX_PATTERN_DRIFT&&Math.abs(ue[1]-Ee[1])<Wt.MAX_PATTERN_DRIFT)ue=Ee,ee=0;else{if(ee>Wt.SKIPPED_ROW_COUNT_MAX)break;ee++}}G-=ee+1,N[2]=new pe(ue[0],G),N[3]=new pe(ue[1],G)}return G-m<Wt.BARCODE_MIN_HEIGHT&&M.fill(N,null),N}static findGuardPattern(n,c,u,m,g,v,N){M.fillWithin(N,0,N.length,0);let S=c,F=0;for(;n.get(S,u)&&S>0&&F++<Wt.MAX_PIXEL_DRIFT;)S--;let G=S,ee=0,ue=v.length;for(let Ee=g;G<m;G++)if(n.get(G,u)!==Ee)N[ee]++;else{if(ee===ue-1){if(Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE)return new Int32Array([S,G]);S+=N[0]+N[1],A.arraycopy(N,2,N,0,ee-1),N[ee-1]=0,N[ee]=0,ee--}else ee++;N[ee]=1,Ee=!Ee}return ee===ue-1&&Wt.patternMatchVariance(N,v,Wt.MAX_INDIVIDUAL_VARIANCE)<Wt.MAX_AVG_VARIANCE?new Int32Array([S,G-1]):null}static patternMatchVariance(n,c,u){let m=n.length,g=0,v=0;for(let F=0;F<m;F++)g+=n[F],v+=c[F];if(g<v)return 1/0;let N=g/v;u*=N;let S=0;for(let F=0;F<m;F++){let G=n[F],ee=c[F]*N,ue=G>ee?G-ee:ee-G;if(ue>u)return 1/0;S+=ue}return S/g}}Wt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Wt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Wt.MAX_AVG_VARIANCE=.42,Wt.MAX_INDIVIDUAL_VARIANCE=.8,Wt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Wt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Wt.MAX_PIXEL_DRIFT=3,Wt.MAX_PATTERN_DRIFT=5,Wt.SKIPPED_ROW_COUNT_MAX=25,Wt.ROW_STEP=5,Wt.BARCODE_MIN_HEIGHT=10;class Wr{constructor(n,c){if(c.length===0)throw new j;this.field=n;let u=c.length;if(u>1&&c[0]===0){let m=1;for(;m<u&&c[m]===0;)m++;m===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-m),A.arraycopy(c,m,this.coefficients,0,this.coefficients.length))}else this.coefficients=c}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(n){return this.coefficients[this.coefficients.length-1-n]}evaluateAt(n){if(n===0)return this.getCoefficient(0);if(n===1){let m=0;for(let g of this.coefficients)m=this.field.add(m,g);return m}let c=this.coefficients[0],u=this.coefficients.length;for(let m=1;m<u;m++)c=this.field.add(this.field.multiply(n,c),this.coefficients[m]);return c}add(n){if(!this.field.equals(n.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero())return n;if(n.isZero())return this;let c=this.coefficients,u=n.coefficients;if(c.length>u.length){let v=c;c=u,u=v}let m=new Int32Array(u.length),g=u.length-c.length;A.arraycopy(u,0,m,0,g);for(let v=g;v<u.length;v++)m[v]=this.field.add(c[v-g],u[v]);return new Wr(this.field,m)}subtract(n){if(!this.field.equals(n.field))throw new j("ModulusPolys do not have same ModulusGF field");return n.isZero()?this:this.add(n.negative())}multiply(n){return n instanceof Wr?this.multiplyOther(n):this.multiplyScalar(n)}multiplyOther(n){if(!this.field.equals(n.field))throw new j("ModulusPolys do not have same ModulusGF field");if(this.isZero()||n.isZero())return new Wr(this.field,new Int32Array([0]));let c=this.coefficients,u=c.length,m=n.coefficients,g=m.length,v=new Int32Array(u+g-1);for(let N=0;N<u;N++){let S=c[N];for(let F=0;F<g;F++)v[N+F]=this.field.add(v[N+F],this.field.multiply(S,m[F]))}return new Wr(this.field,v)}negative(){let n=this.coefficients.length,c=new Int32Array(n);for(let u=0;u<n;u++)c[u]=this.field.subtract(0,this.coefficients[u]);return new Wr(this.field,c)}multiplyScalar(n){if(n===0)return new Wr(this.field,new Int32Array([0]));if(n===1)return this;let c=this.coefficients.length,u=new Int32Array(c);for(let m=0;m<c;m++)u[m]=this.field.multiply(this.coefficients[m],n);return new Wr(this.field,u)}multiplyByMonomial(n,c){if(n<0)throw new j;if(c===0)return new Wr(this.field,new Int32Array([0]));let u=this.coefficients.length,m=new Int32Array(u+n);for(let g=0;g<u;g++)m[g]=this.field.multiply(this.coefficients[g],c);return new Wr(this.field,m)}toString(){let n=new ne;for(let c=this.getDegree();c>=0;c--){let u=this.getCoefficient(c);u!==0&&(u<0?(n.append(" - "),u=-u):n.length()>0&&n.append(" + "),(c===0||u!==1)&&n.append(u),c!==0&&(c===1?n.append("x"):(n.append("x^"),n.append(c))))}return n.toString()}}class Bn{add(n,c){return(n+c)%this.modulus}subtract(n,c){return(this.modulus+n-c)%this.modulus}exp(n){return this.expTable[n]}log(n){if(n===0)throw new j;return this.logTable[n]}inverse(n){if(n===0)throw new ye;return this.expTable[this.modulus-this.logTable[n]-1]}multiply(n,c){return n===0||c===0?0:this.expTable[(this.logTable[n]+this.logTable[c])%(this.modulus-1)]}getSize(){return this.modulus}equals(n){return n===this}}class Tl extends Bn{constructor(n,c){super(),this.modulus=n,this.expTable=new Int32Array(n),this.logTable=new Int32Array(n);let u=1;for(let m=0;m<n;m++)this.expTable[m]=u,u=u*c%n;for(let m=0;m<n-1;m++)this.logTable[this.expTable[m]]=m;this.zero=new Wr(this,new Int32Array([0])),this.one=new Wr(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(n,c){if(n<0)throw new j;if(c===0)return this.zero;let u=new Int32Array(n+1);return u[0]=c,new Wr(this,u)}}Tl.PDF417_GF=new Tl(Mt.NUMBER_OF_CODEWORDS,3);class Rl{constructor(){this.field=Tl.PDF417_GF}decode(n,c,u){let m=new Wr(this.field,n),g=new Int32Array(c),v=!1;for(let De=c;De>0;De--){let Oe=m.evaluateAt(this.field.exp(De));g[c-De]=Oe,Oe!==0&&(v=!0)}if(!v)return 0;let N=this.field.getOne();if(u!=null)for(const De of u){let Oe=this.field.exp(n.length-1-De),ze=new Wr(this.field,new Int32Array([this.field.subtract(0,Oe),1]));N=N.multiply(ze)}let S=new Wr(this.field,g),F=this.runEuclideanAlgorithm(this.field.buildMonomial(c,1),S,c),G=F[0],ee=F[1],ue=this.findErrorLocations(G),Ee=this.findErrorMagnitudes(ee,G,ue);for(let De=0;De<ue.length;De++){let Oe=n.length-1-this.field.log(ue[De]);if(Oe<0)throw _.getChecksumInstance();n[Oe]=this.field.subtract(n[Oe],Ee[De])}return ue.length}runEuclideanAlgorithm(n,c,u){if(n.getDegree()<c.getDegree()){let ue=n;n=c,c=ue}let m=n,g=c,v=this.field.getZero(),N=this.field.getOne();for(;g.getDegree()>=Math.round(u/2);){let ue=m,Ee=v;if(m=g,v=N,m.isZero())throw _.getChecksumInstance();g=ue;let De=this.field.getZero(),Oe=m.getCoefficient(m.getDegree()),ze=this.field.inverse(Oe);for(;g.getDegree()>=m.getDegree()&&!g.isZero();){let Ke=g.getDegree()-m.getDegree(),mt=this.field.multiply(g.getCoefficient(g.getDegree()),ze);De=De.add(this.field.buildMonomial(Ke,mt)),g=g.subtract(m.multiplyByMonomial(Ke,mt))}N=De.multiply(v).subtract(Ee).negative()}let S=N.getCoefficient(0);if(S===0)throw _.getChecksumInstance();let F=this.field.inverse(S),G=N.multiply(F),ee=g.multiply(F);return[G,ee]}findErrorLocations(n){let c=n.getDegree(),u=new Int32Array(c),m=0;for(let g=1;g<this.field.getSize()&&m<c;g++)n.evaluateAt(g)===0&&(u[m]=this.field.inverse(g),m++);if(m!==c)throw _.getChecksumInstance();return u}findErrorMagnitudes(n,c,u){let m=c.getDegree(),g=new Int32Array(m);for(let F=1;F<=m;F++)g[m-F]=this.field.multiply(F,c.getCoefficient(F));let v=new Wr(this.field,g),N=u.length,S=new Int32Array(N);for(let F=0;F<N;F++){let G=this.field.inverse(u[F]),ee=this.field.subtract(0,n.evaluateAt(G)),ue=this.field.inverse(v.evaluateAt(G));S[F]=this.field.multiply(ee,ue)}return S}}class Ln{constructor(n,c,u,m,g){n instanceof Ln?this.constructor_2(n):this.constructor_1(n,c,u,m,g)}constructor_1(n,c,u,m,g){const v=c==null||u==null,N=m==null||g==null;if(v&&N)throw new X;v?(c=new pe(0,m.getY()),u=new pe(0,g.getY())):N&&(m=new pe(n.getWidth()-1,c.getY()),g=new pe(n.getWidth()-1,u.getY())),this.image=n,this.topLeft=c,this.bottomLeft=u,this.topRight=m,this.bottomRight=g,this.minX=Math.trunc(Math.min(c.getX(),u.getX())),this.maxX=Math.trunc(Math.max(m.getX(),g.getX())),this.minY=Math.trunc(Math.min(c.getY(),m.getY())),this.maxY=Math.trunc(Math.max(u.getY(),g.getY()))}constructor_2(n){this.image=n.image,this.topLeft=n.getTopLeft(),this.bottomLeft=n.getBottomLeft(),this.topRight=n.getTopRight(),this.bottomRight=n.getBottomRight(),this.minX=n.getMinX(),this.maxX=n.getMaxX(),this.minY=n.getMinY(),this.maxY=n.getMaxY()}static merge(n,c){return n==null?c:c==null?n:new Ln(n.image,n.topLeft,n.bottomLeft,c.topRight,c.bottomRight)}addMissingRows(n,c,u){let m=this.topLeft,g=this.bottomLeft,v=this.topRight,N=this.bottomRight;if(n>0){let S=u?this.topLeft:this.topRight,F=Math.trunc(S.getY()-n);F<0&&(F=0);let G=new pe(S.getX(),F);u?m=G:v=G}if(c>0){let S=u?this.bottomLeft:this.bottomRight,F=Math.trunc(S.getY()+c);F>=this.image.getHeight()&&(F=this.image.getHeight()-1);let G=new pe(S.getX(),F);u?g=G:N=G}return new Ln(this.image,m,g,v,N)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class _o{constructor(n,c,u,m){this.columnCount=n,this.errorCorrectionLevel=m,this.rowCountUpperPart=c,this.rowCountLowerPart=u,this.rowCount=c+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Pn{constructor(){this.buffer=""}static form(n,c){let u=-1;function m(v,N,S,F,G,ee){if(v==="%%")return"%";if(c[++u]===void 0)return;v=F?parseInt(F.substr(1)):void 0;let ue=G?parseInt(G.substr(1)):void 0,Ee;switch(ee){case"s":Ee=c[u];break;case"c":Ee=c[u][0];break;case"f":Ee=parseFloat(c[u]).toFixed(v);break;case"p":Ee=parseFloat(c[u]).toPrecision(v);break;case"e":Ee=parseFloat(c[u]).toExponential(v);break;case"x":Ee=parseInt(c[u]).toString(ue||16);break;case"d":Ee=parseFloat(parseInt(c[u],ue||10).toPrecision(v)).toFixed(0);break}Ee=typeof Ee=="object"?JSON.stringify(Ee):(+Ee).toString(ue);let De=parseInt(S),Oe=S&&S[0]+""=="0"?"0":" ";for(;Ee.length<De;)Ee=N!==void 0?Ee+Oe:Oe+Ee;return Ee}let g=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return n.replace(g,m)}format(n,...c){this.buffer+=Pn.form(n,c)}toString(){return this.buffer}}class zi{constructor(n){this.boundingBox=new Ln(n),this.codewords=new Array(n.getMaxY()-n.getMinY()+1)}getCodewordNearby(n){let c=this.getCodeword(n);if(c!=null)return c;for(let u=1;u<zi.MAX_NEARBY_DISTANCE;u++){let m=this.imageRowToCodewordIndex(n)-u;if(m>=0&&(c=this.codewords[m],c!=null)||(m=this.imageRowToCodewordIndex(n)+u,m<this.codewords.length&&(c=this.codewords[m],c!=null)))return c}return null}imageRowToCodewordIndex(n){return n-this.boundingBox.getMinY()}setCodeword(n,c){this.codewords[this.imageRowToCodewordIndex(n)]=c}getCodeword(n){return this.codewords[this.imageRowToCodewordIndex(n)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const n=new Pn;let c=0;for(const u of this.codewords){if(u==null){n.format("%3d:    |   %n",c++);continue}n.format("%3d: %3d|%3d%n",c++,u.getRowNumber(),u.getValue())}return n.toString()}}zi.MAX_NEARBY_DISTANCE=5;class ga{constructor(){this.values=new Map}setValue(n){n=Math.trunc(n);let c=this.values.get(n);c==null&&(c=0),c++,this.values.set(n,c)}getValue(){let n=-1,c=new Array;for(const[u,m]of this.values.entries()){const g={getKey:()=>u,getValue:()=>m};g.getValue()>n?(n=g.getValue(),c=[],c.push(g.getKey())):g.getValue()===n&&c.push(g.getKey())}return Mt.toIntArray(c)}getConfidence(n){return this.values.get(n)}}class zn extends zi{constructor(n,c){super(n),this._isLeft=c}setRowNumbers(){for(let n of this.getCodewords())n?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(n){let c=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(c,n);let u=this.getBoundingBox(),m=this._isLeft?u.getTopLeft():u.getTopRight(),g=this._isLeft?u.getBottomLeft():u.getBottomRight(),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.imageRowToCodewordIndex(Math.trunc(g.getY())),S=-1,F=1,G=0;for(let ee=v;ee<N;ee++){if(c[ee]==null)continue;let ue=c[ee],Ee=ue.getRowNumber()-S;if(Ee===0)G++;else if(Ee===1)F=Math.max(F,G),G=1,S=ue.getRowNumber();else if(Ee<0||ue.getRowNumber()>=n.getRowCount()||Ee>ee)c[ee]=null;else{let De;F>2?De=(F-2)*Ee:De=Ee;let Oe=De>=ee;for(let ze=1;ze<=De&&!Oe;ze++)Oe=c[ee-ze]!=null;Oe?c[ee]=null:(S=ue.getRowNumber(),G=1)}}}getRowHeights(){let n=this.getBarcodeMetadata();if(n==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(n);let c=new Int32Array(n.getRowCount());for(let u of this.getCodewords())if(u!=null){let m=u.getRowNumber();if(m>=c.length)continue;c[m]++}return c}adjustIncompleteIndicatorColumnRowNumbers(n){let c=this.getBoundingBox(),u=this._isLeft?c.getTopLeft():c.getTopRight(),m=this._isLeft?c.getBottomLeft():c.getBottomRight(),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),v=this.imageRowToCodewordIndex(Math.trunc(m.getY())),N=this.getCodewords(),S=-1;for(let F=g;F<v;F++){if(N[F]==null)continue;let G=N[F];G.setRowNumberAsRowIndicatorColumn();let ee=G.getRowNumber()-S;ee===0||(ee===1?S=G.getRowNumber():G.getRowNumber()>=n.getRowCount()?N[F]=null:S=G.getRowNumber())}}getBarcodeMetadata(){let n=this.getCodewords(),c=new ga,u=new ga,m=new ga,g=new ga;for(let N of n){if(N==null)continue;N.setRowNumberAsRowIndicatorColumn();let S=N.getValue()%30,F=N.getRowNumber();switch(this._isLeft||(F+=2),F%3){case 0:u.setValue(S*3+1);break;case 1:g.setValue(S/3),m.setValue(S%3);break;case 2:c.setValue(S+1);break}}if(c.getValue().length===0||u.getValue().length===0||m.getValue().length===0||g.getValue().length===0||c.getValue()[0]<1||u.getValue()[0]+m.getValue()[0]<Mt.MIN_ROWS_IN_BARCODE||u.getValue()[0]+m.getValue()[0]>Mt.MAX_ROWS_IN_BARCODE)return null;let v=new _o(c.getValue()[0],u.getValue()[0],m.getValue()[0],g.getValue()[0]);return this.removeIncorrectCodewords(n,v),v}removeIncorrectCodewords(n,c){for(let u=0;u<n.length;u++){let m=n[u];if(n[u]==null)continue;let g=m.getValue()%30,v=m.getRowNumber();if(v>c.getRowCount()){n[u]=null;continue}switch(this._isLeft||(v+=2),v%3){case 0:g*3+1!==c.getRowCountUpperPart()&&(n[u]=null);break;case 1:(Math.trunc(g/3)!==c.getErrorCorrectionLevel()||g%3!==c.getRowCountLowerPart())&&(n[u]=null);break;case 2:g+1!==c.getColumnCount()&&(n[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Un{constructor(n,c){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=n,this.barcodeColumnCount=n.getColumnCount(),this.boundingBox=c,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let n=Mt.MAX_CODEWORDS_IN_BARCODE,c;do c=n,n=this.adjustRowNumbersAndGetCount();while(n>0&&n<c);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(n){n?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let n=this.adjustRowNumbersByRow();if(n===0)return 0;for(let c=1;c<this.barcodeColumnCount+1;c++){let u=this.detectionResultColumns[c].getCodewords();for(let m=0;m<u.length;m++)u[m]!=null&&(u[m].hasValidRowNumber()||this.adjustRowNumbers(c,m,u))}return n}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let n=this.detectionResultColumns[0].getCodewords(),c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<n.length;u++)if(n[u]!=null&&c[u]!=null&&n[u].getRowNumber()===c[u].getRowNumber())for(let m=1;m<=this.barcodeColumnCount;m++){let g=this.detectionResultColumns[m].getCodewords()[u];g!=null&&(g.setRowNumber(n[u].getRowNumber()),g.hasValidRowNumber()||(this.detectionResultColumns[m].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let n=0,c=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),g=0;for(let v=this.barcodeColumnCount+1;v>0&&g<this.ADJUST_ROW_NUMBER_SKIP;v--){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(g=Un.adjustRowNumberIfValid(m,g,N),N.hasValidRowNumber()||n++)}}return n}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let n=0,c=this.detectionResultColumns[0].getCodewords();for(let u=0;u<c.length;u++){if(c[u]==null)continue;let m=c[u].getRowNumber(),g=0;for(let v=1;v<this.barcodeColumnCount+1&&g<this.ADJUST_ROW_NUMBER_SKIP;v++){let N=this.detectionResultColumns[v].getCodewords()[u];N!=null&&(g=Un.adjustRowNumberIfValid(m,g,N),N.hasValidRowNumber()||n++)}}return n}static adjustRowNumberIfValid(n,c,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(n)?(u.setRowNumber(n),c=0):++c),c}adjustRowNumbers(n,c,u){if(!this.detectionResultColumns[n-1])return;let m=u[c],g=this.detectionResultColumns[n-1].getCodewords(),v=g;this.detectionResultColumns[n+1]!=null&&(v=this.detectionResultColumns[n+1].getCodewords());let N=new Array(14);N[2]=g[c],N[3]=v[c],c>0&&(N[0]=u[c-1],N[4]=g[c-1],N[5]=v[c-1]),c>1&&(N[8]=u[c-2],N[10]=g[c-2],N[11]=v[c-2]),c<u.length-1&&(N[1]=u[c+1],N[6]=g[c+1],N[7]=v[c+1]),c<u.length-2&&(N[9]=u[c+2],N[12]=g[c+2],N[13]=v[c+2]);for(let S of N)if(Un.adjustRowNumber(m,S))return}static adjustRowNumber(n,c){return c==null?!1:c.hasValidRowNumber()&&c.getBucket()===n.getBucket()?(n.setRowNumber(c.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(n){this.boundingBox=n}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(n,c){this.detectionResultColumns[n]=c}getDetectionResultColumn(n){return this.detectionResultColumns[n]}toString(){let n=this.detectionResultColumns[0];n==null&&(n=this.detectionResultColumns[this.barcodeColumnCount+1]);let c=new Pn;for(let u=0;u<n.getCodewords().length;u++){c.format("CW %3d:",u);for(let m=0;m<this.barcodeColumnCount+2;m++){if(this.detectionResultColumns[m]==null){c.format("    |   ");continue}let g=this.detectionResultColumns[m].getCodewords()[u];if(g==null){c.format("    |   ");continue}c.format(" %3d|%3d",g.getRowNumber(),g.getValue())}c.format("%n")}return c.toString()}}class yn{constructor(n,c,u,m){this.rowNumber=yn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(n),this.endX=Math.trunc(c),this.bucket=Math.trunc(u),this.value=Math.trunc(m)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(n){return n!==yn.BARCODE_ROW_UNKNOWN&&this.bucket===n%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(n){this.rowNumber=n}toString(){return this.rowNumber+"|"+this.value}}yn.BARCODE_ROW_UNKNOWN=-1;class Qa{static initialize(){for(let n=0;n<Mt.SYMBOL_TABLE.length;n++){let c=Mt.SYMBOL_TABLE[n],u=c&1;for(let m=0;m<Mt.BARS_IN_MODULE;m++){let g=0;for(;(c&1)===u;)g+=1,c>>=1;u=c&1,Qa.RATIOS_TABLE[n]||(Qa.RATIOS_TABLE[n]=new Array(Mt.BARS_IN_MODULE)),Qa.RATIOS_TABLE[n][Mt.BARS_IN_MODULE-m-1]=Math.fround(g/Mt.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(n){let c=Qa.getDecodedCodewordValue(Qa.sampleBitCounts(n));return c!==-1?c:Qa.getClosestDecodedValue(n)}static sampleBitCounts(n){let c=me.sum(n),u=new Int32Array(Mt.BARS_IN_MODULE),m=0,g=0;for(let v=0;v<Mt.MODULES_IN_CODEWORD;v++){let N=c/(2*Mt.MODULES_IN_CODEWORD)+v*c/Mt.MODULES_IN_CODEWORD;g+n[m]<=N&&(g+=n[m],m++),u[m]++}return u}static getDecodedCodewordValue(n){let c=Qa.getBitValue(n);return Mt.getCodeword(c)===-1?-1:c}static getBitValue(n){let c=0;for(let u=0;u<n.length;u++)for(let m=0;m<n[u];m++)c=c<<1|(u%2===0?1:0);return Math.trunc(c)}static getClosestDecodedValue(n){let c=me.sum(n),u=new Array(Mt.BARS_IN_MODULE);if(c>1)for(let v=0;v<u.length;v++)u[v]=Math.fround(n[v]/c);let m=Pe.MAX_VALUE,g=-1;this.bSymbolTableReady||Qa.initialize();for(let v=0;v<Qa.RATIOS_TABLE.length;v++){let N=0,S=Qa.RATIOS_TABLE[v];for(let F=0;F<Mt.BARS_IN_MODULE;F++){let G=Math.fround(S[F]-u[F]);if(N+=Math.fround(G*G),N>=m)break}N<m&&(m=N,g=Mt.SYMBOL_TABLE[v])}return g}}Qa.bSymbolTableReady=!1,Qa.RATIOS_TABLE=new Array(Mt.SYMBOL_TABLE.length).map(J=>new Array(Mt.BARS_IN_MODULE));class Ao{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(n){this.segmentIndex=n}getFileId(){return this.fileId}setFileId(n){this.fileId=n}getOptionalData(){return this.optionalData}setOptionalData(n){this.optionalData=n}isLastSegment(){return this.lastSegment}setLastSegment(n){this.lastSegment=n}getSegmentCount(){return this.segmentCount}setSegmentCount(n){this.segmentCount=n}getSender(){return this.sender||null}setSender(n){this.sender=n}getAddressee(){return this.addressee||null}setAddressee(n){this.addressee=n}getFileName(){return this.fileName}setFileName(n){this.fileName=n}getFileSize(){return this.fileSize}setFileSize(n){this.fileSize=n}getChecksum(){return this.checksum}setChecksum(n){this.checksum=n}getTimestamp(){return this.timestamp}setTimestamp(n){this.timestamp=n}}class So{static parseLong(n,c=void 0){return parseInt(n,c)}}class Ui extends p{}Ui.kind="NullPointerException";class To{writeBytes(n){this.writeBytesOffset(n,0,n.length)}writeBytesOffset(n,c,u){if(n==null)throw new Ui;if(c<0||c>n.length||u<0||c+u>n.length||c+u<0)throw new O;if(u===0)return;for(let m=0;m<u;m++)this.write(n[c+m])}flush(){}close(){}}class gd extends p{}class Af extends To{constructor(n=32){if(super(),this.count=0,n<0)throw new j("Negative initial size: "+n);this.buf=new Uint8Array(n)}ensureCapacity(n){n-this.buf.length>0&&this.grow(n)}grow(n){let u=this.buf.length<<1;if(u-n<0&&(u=n),u<0){if(n<0)throw new gd;u=T.MAX_VALUE}this.buf=M.copyOfUint8Array(this.buf,u)}write(n){this.ensureCapacity(this.count+1),this.buf[this.count]=n,this.count+=1}writeBytesOffset(n,c,u){if(c<0||c>n.length||u<0||c+u-n.length>0)throw new O;this.ensureCapacity(this.count+u),A.arraycopy(n,c,this.buf,this.count,u),this.count+=u}writeTo(n){n.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return M.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(n){return n?typeof n=="string"?this.toString_string(n):this.toString_number(n):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(n){return new String(this.buf).toString()}toString_number(n){return new String(this.buf).toString()}close(){}}var Er;(function(J){J[J.ALPHA=0]="ALPHA",J[J.LOWER=1]="LOWER",J[J.MIXED=2]="MIXED",J[J.PUNCT=3]="PUNCT",J[J.ALPHA_SHIFT=4]="ALPHA_SHIFT",J[J.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Er||(Er={}));function pd(){if(typeof window<"u")return window.BigInt||null;if(typeof wu<"u")return wu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Hi;function Hn(J){if(typeof Hi>"u"&&(Hi=pd()),Hi===null)throw new Error("BigInt is not supported!");return Hi(J)}function Sf(){let J=[];J[0]=Hn(1);let n=Hn(900);J[1]=n;for(let c=2;c<16;c++)J[c]=J[c-1]*n;return J}class Qe{static decode(n,c){let u=new ne(""),m=z.ISO8859_1;u.enableDecoding(m);let g=1,v=n[g++],N=new Ao;for(;g<n[0];){switch(v){case Qe.TEXT_COMPACTION_MODE_LATCH:g=Qe.textCompaction(n,g,u);break;case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:g=Qe.byteCompaction(v,n,m,g,u);break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(n[g++]);break;case Qe.NUMERIC_COMPACTION_MODE_LATCH:g=Qe.numericCompaction(n,g,u);break;case Qe.ECI_CHARSET:z.getCharacterSetECIByValue(n[g++]);break;case Qe.ECI_GENERAL_PURPOSE:g+=2;break;case Qe.ECI_USER_DEFINED:g++;break;case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:g=Qe.decodeMacroBlock(n,g,N);break;case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:throw new L;default:g--,g=Qe.textCompaction(n,g,u);break}if(g<n.length)v=n[g++];else throw L.getFormatInstance()}if(u.length()===0)throw L.getFormatInstance();let S=new Ue(null,u.toString(),null,c);return S.setOther(N),S}static decodeMacroBlock(n,c,u){if(c+Qe.NUMBER_OF_SEQUENCE_CODEWORDS>n[0])throw L.getFormatInstance();let m=new Int32Array(Qe.NUMBER_OF_SEQUENCE_CODEWORDS);for(let N=0;N<Qe.NUMBER_OF_SEQUENCE_CODEWORDS;N++,c++)m[N]=n[c];u.setSegmentIndex(T.parseInt(Qe.decodeBase900toBase10(m,Qe.NUMBER_OF_SEQUENCE_CODEWORDS)));let g=new ne;c=Qe.textCompaction(n,c,g),u.setFileId(g.toString());let v=-1;for(n[c]===Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(v=c+1);c<n[0];)switch(n[c]){case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(c++,n[c]){case Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let N=new ne;c=Qe.textCompaction(n,c+1,N),u.setFileName(N.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let S=new ne;c=Qe.textCompaction(n,c+1,S),u.setSender(S.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let F=new ne;c=Qe.textCompaction(n,c+1,F),u.setAddressee(F.toString());break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let G=new ne;c=Qe.numericCompaction(n,c+1,G),u.setSegmentCount(T.parseInt(G.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let ee=new ne;c=Qe.numericCompaction(n,c+1,ee),u.setTimestamp(So.parseLong(ee.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let ue=new ne;c=Qe.numericCompaction(n,c+1,ue),u.setChecksum(T.parseInt(ue.toString()));break;case Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let Ee=new ne;c=Qe.numericCompaction(n,c+1,Ee),u.setFileSize(So.parseLong(Ee.toString()));break;default:throw L.getFormatInstance()}break;case Qe.MACRO_PDF417_TERMINATOR:c++,u.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(v!==-1){let N=c-v;u.isLastSegment()&&N--,u.setOptionalData(M.copyOfRange(n,v,v+N))}return c}static textCompaction(n,c,u){let m=new Int32Array((n[0]-c)*2),g=new Int32Array((n[0]-c)*2),v=0,N=!1;for(;c<n[0]&&!N;){let S=n[c++];if(S<Qe.TEXT_COMPACTION_MODE_LATCH)m[v]=S/30,m[v+1]=S%30,v+=2;else switch(S){case Qe.TEXT_COMPACTION_MODE_LATCH:m[v++]=Qe.TEXT_COMPACTION_MODE_LATCH;break;case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:c--,N=!0;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m[v]=Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,S=n[c++],g[v]=S,v++;break}}return Qe.decodeTextCompaction(m,g,v,u),c}static decodeTextCompaction(n,c,u,m){let g=Er.ALPHA,v=Er.ALPHA,N=0;for(;N<u;){let S=n[N],F="";switch(g){case Er.ALPHA:if(S<26)F=String.fromCharCode(65+S);else switch(S){case 26:F=" ";break;case Qe.LL:g=Er.LOWER;break;case Qe.ML:g=Er.MIXED;break;case Qe.PS:v=g,g=Er.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:g=Er.ALPHA;break}break;case Er.LOWER:if(S<26)F=String.fromCharCode(97+S);else switch(S){case 26:F=" ";break;case Qe.AS:v=g,g=Er.ALPHA_SHIFT;break;case Qe.ML:g=Er.MIXED;break;case Qe.PS:v=g,g=Er.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:g=Er.ALPHA;break}break;case Er.MIXED:if(S<Qe.PL)F=Qe.MIXED_CHARS[S];else switch(S){case Qe.PL:g=Er.PUNCT;break;case 26:F=" ";break;case Qe.LL:g=Er.LOWER;break;case Qe.AL:g=Er.ALPHA;break;case Qe.PS:v=g,g=Er.PUNCT_SHIFT;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:g=Er.ALPHA;break}break;case Er.PUNCT:if(S<Qe.PAL)F=Qe.PUNCT_CHARS[S];else switch(S){case Qe.PAL:g=Er.ALPHA;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:g=Er.ALPHA;break}break;case Er.ALPHA_SHIFT:if(g=v,S<26)F=String.fromCharCode(65+S);else switch(S){case 26:F=" ";break;case Qe.TEXT_COMPACTION_MODE_LATCH:g=Er.ALPHA;break}break;case Er.PUNCT_SHIFT:if(g=v,S<Qe.PAL)F=Qe.PUNCT_CHARS[S];else switch(S){case Qe.PAL:g=Er.ALPHA;break;case Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:m.append(c[N]);break;case Qe.TEXT_COMPACTION_MODE_LATCH:g=Er.ALPHA;break}break}F!==""&&m.append(F),N++}}static byteCompaction(n,c,u,m,g){let v=new Af,N=0,S=0,F=!1;switch(n){case Qe.BYTE_COMPACTION_MODE_LATCH:let G=new Int32Array(6),ee=c[m++];for(;m<c[0]&&!F;)switch(G[N++]=ee,S=900*S+ee,ee=c[m++],ee){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:m--,F=!0;break;default:if(N%5===0&&N>0){for(let ue=0;ue<6;++ue)v.write(Number(Hn(S)>>Hn(8*(5-ue))));S=0,N=0}break}m===c[0]&&ee<Qe.TEXT_COMPACTION_MODE_LATCH&&(G[N++]=ee);for(let ue=0;ue<N;ue++)v.write(G[ue]);break;case Qe.BYTE_COMPACTION_MODE_LATCH_6:for(;m<c[0]&&!F;){let ue=c[m++];if(ue<Qe.TEXT_COMPACTION_MODE_LATCH)N++,S=900*S+ue;else switch(ue){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.NUMERIC_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:m--,F=!0;break}if(N%5===0&&N>0){for(let Ee=0;Ee<6;++Ee)v.write(Number(Hn(S)>>Hn(8*(5-Ee))));S=0,N=0}}break}return g.append(te.decode(v.toByteArray(),u)),m}static numericCompaction(n,c,u){let m=0,g=!1,v=new Int32Array(Qe.MAX_NUMERIC_CODEWORDS);for(;c<n[0]&&!g;){let N=n[c++];if(c===n[0]&&(g=!0),N<Qe.TEXT_COMPACTION_MODE_LATCH)v[m]=N,m++;else switch(N){case Qe.TEXT_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH:case Qe.BYTE_COMPACTION_MODE_LATCH_6:case Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case Qe.MACRO_PDF417_TERMINATOR:c--,g=!0;break}(m%Qe.MAX_NUMERIC_CODEWORDS===0||N===Qe.NUMERIC_COMPACTION_MODE_LATCH||g)&&m>0&&(u.append(Qe.decodeBase900toBase10(v,m)),m=0)}return c}static decodeBase900toBase10(n,c){let u=Hn(0);for(let g=0;g<c;g++)u+=Qe.EXP900[c-g-1]*Hn(n[g]);let m=u.toString();if(m.charAt(0)!=="1")throw new L;return m.substring(1)}}Qe.TEXT_COMPACTION_MODE_LATCH=900,Qe.BYTE_COMPACTION_MODE_LATCH=901,Qe.NUMERIC_COMPACTION_MODE_LATCH=902,Qe.BYTE_COMPACTION_MODE_LATCH_6=924,Qe.ECI_USER_DEFINED=925,Qe.ECI_GENERAL_PURPOSE=926,Qe.ECI_CHARSET=927,Qe.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,Qe.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,Qe.MACRO_PDF417_TERMINATOR=922,Qe.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,Qe.MAX_NUMERIC_CODEWORDS=15,Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,Qe.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,Qe.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,Qe.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,Qe.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,Qe.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,Qe.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,Qe.PL=25,Qe.LL=27,Qe.AS=27,Qe.ML=28,Qe.AL=28,Qe.PS=29,Qe.PAL=29,Qe.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,Qe.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",Qe.EXP900=pd()?Sf():[],Qe.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ar{constructor(){}static decode(n,c,u,m,g,v,N){let S=new Ln(n,c,u,m,g),F=null,G=null,ee;for(let De=!0;;De=!1){if(c!=null&&(F=ar.getRowIndicatorColumn(n,S,c,!0,v,N)),m!=null&&(G=ar.getRowIndicatorColumn(n,S,m,!1,v,N)),ee=ar.merge(F,G),ee==null)throw X.getNotFoundInstance();let Oe=ee.getBoundingBox();if(De&&Oe!=null&&(Oe.getMinY()<S.getMinY()||Oe.getMaxY()>S.getMaxY()))S=Oe;else break}ee.setBoundingBox(S);let ue=ee.getBarcodeColumnCount()+1;ee.setDetectionResultColumn(0,F),ee.setDetectionResultColumn(ue,G);let Ee=F!=null;for(let De=1;De<=ue;De++){let Oe=Ee?De:ue-De;if(ee.getDetectionResultColumn(Oe)!==void 0)continue;let ze;Oe===0||Oe===ue?ze=new zn(S,Oe===0):ze=new zi(S),ee.setDetectionResultColumn(Oe,ze);let Ke=-1,mt=Ke;for(let pt=S.getMinY();pt<=S.getMaxY();pt++){if(Ke=ar.getStartColumn(ee,Oe,pt,Ee),Ke<0||Ke>S.getMaxX()){if(mt===-1)continue;Ke=mt}let xt=ar.detectCodeword(n,S.getMinX(),S.getMaxX(),Ee,Ke,pt,v,N);xt!=null&&(ze.setCodeword(pt,xt),mt=Ke,v=Math.min(v,xt.getWidth()),N=Math.max(N,xt.getWidth()))}}return ar.createDecoderResult(ee)}static merge(n,c){if(n==null&&c==null)return null;let u=ar.getBarcodeMetadata(n,c);if(u==null)return null;let m=Ln.merge(ar.adjustBoundingBox(n),ar.adjustBoundingBox(c));return new Un(u,m)}static adjustBoundingBox(n){if(n==null)return null;let c=n.getRowHeights();if(c==null)return null;let u=ar.getMax(c),m=0;for(let N of c)if(m+=u-N,N>0)break;let g=n.getCodewords();for(let N=0;m>0&&g[N]==null;N++)m--;let v=0;for(let N=c.length-1;N>=0&&(v+=u-c[N],!(c[N]>0));N--);for(let N=g.length-1;v>0&&g[N]==null;N--)v--;return n.getBoundingBox().addMissingRows(m,v,n.isLeft())}static getMax(n){let c=-1;for(let u of n)c=Math.max(c,u);return c}static getBarcodeMetadata(n,c){let u;if(n==null||(u=n.getBarcodeMetadata())==null)return c==null?null:c.getBarcodeMetadata();let m;return c==null||(m=c.getBarcodeMetadata())==null?u:u.getColumnCount()!==m.getColumnCount()&&u.getErrorCorrectionLevel()!==m.getErrorCorrectionLevel()&&u.getRowCount()!==m.getRowCount()?null:u}static getRowIndicatorColumn(n,c,u,m,g,v){let N=new zn(c,m);for(let S=0;S<2;S++){let F=S===0?1:-1,G=Math.trunc(Math.trunc(u.getX()));for(let ee=Math.trunc(Math.trunc(u.getY()));ee<=c.getMaxY()&&ee>=c.getMinY();ee+=F){let ue=ar.detectCodeword(n,0,n.getWidth(),m,G,ee,g,v);ue!=null&&(N.setCodeword(ee,ue),m?G=ue.getStartX():G=ue.getEndX())}}return N}static adjustCodewordCount(n,c){let u=c[0][1],m=u.getValue(),g=n.getBarcodeColumnCount()*n.getBarcodeRowCount()-ar.getNumberOfECCodeWords(n.getBarcodeECLevel());if(m.length===0){if(g<1||g>Mt.MAX_CODEWORDS_IN_BARCODE)throw X.getNotFoundInstance();u.setValue(g)}else m[0]!==g&&u.setValue(g)}static createDecoderResult(n){let c=ar.createBarcodeMatrix(n);ar.adjustCodewordCount(n,c);let u=new Array,m=new Int32Array(n.getBarcodeRowCount()*n.getBarcodeColumnCount()),g=[],v=new Array;for(let S=0;S<n.getBarcodeRowCount();S++)for(let F=0;F<n.getBarcodeColumnCount();F++){let G=c[S][F+1].getValue(),ee=S*n.getBarcodeColumnCount()+F;G.length===0?u.push(ee):G.length===1?m[ee]=G[0]:(v.push(ee),g.push(G))}let N=new Array(g.length);for(let S=0;S<N.length;S++)N[S]=g[S];return ar.createDecoderResultFromAmbiguousValues(n.getBarcodeECLevel(),m,Mt.toIntArray(u),Mt.toIntArray(v),N)}static createDecoderResultFromAmbiguousValues(n,c,u,m,g){let v=new Int32Array(m.length),N=100;for(;N-- >0;){for(let S=0;S<v.length;S++)c[m[S]]=g[S][v[S]];try{return ar.decodeCodewords(c,n,u)}catch(S){if(!(S instanceof _))throw S}if(v.length===0)throw _.getChecksumInstance();for(let S=0;S<v.length;S++)if(v[S]<g[S].length-1){v[S]++;break}else if(v[S]=0,S===v.length-1)throw _.getChecksumInstance()}throw _.getChecksumInstance()}static createBarcodeMatrix(n){let c=Array.from({length:n.getBarcodeRowCount()},()=>new Array(n.getBarcodeColumnCount()+2));for(let m=0;m<c.length;m++)for(let g=0;g<c[m].length;g++)c[m][g]=new ga;let u=0;for(let m of n.getDetectionResultColumns()){if(m!=null){for(let g of m.getCodewords())if(g!=null){let v=g.getRowNumber();if(v>=0){if(v>=c.length)continue;c[v][u].setValue(g.getValue())}}}u++}return c}static isValidBarcodeColumn(n,c){return c>=0&&c<=n.getBarcodeColumnCount()+1}static getStartColumn(n,c,u,m){let g=m?1:-1,v=null;if(ar.isValidBarcodeColumn(n,c-g)&&(v=n.getDetectionResultColumn(c-g).getCodeword(u)),v!=null)return m?v.getEndX():v.getStartX();if(v=n.getDetectionResultColumn(c).getCodewordNearby(u),v!=null)return m?v.getStartX():v.getEndX();if(ar.isValidBarcodeColumn(n,c-g)&&(v=n.getDetectionResultColumn(c-g).getCodewordNearby(u)),v!=null)return m?v.getEndX():v.getStartX();let N=0;for(;ar.isValidBarcodeColumn(n,c-g);){c-=g;for(let S of n.getDetectionResultColumn(c).getCodewords())if(S!=null)return(m?S.getEndX():S.getStartX())+g*N*(S.getEndX()-S.getStartX());N++}return m?n.getBoundingBox().getMinX():n.getBoundingBox().getMaxX()}static detectCodeword(n,c,u,m,g,v,N,S){g=ar.adjustCodewordStartColumn(n,c,u,m,g,v);let F=ar.getModuleBitCount(n,c,u,m,g,v);if(F==null)return null;let G,ee=me.sum(F);if(m)G=g+ee;else{for(let De=0;De<F.length/2;De++){let Oe=F[De];F[De]=F[F.length-1-De],F[F.length-1-De]=Oe}G=g,g=G-ee}if(!ar.checkCodewordSkew(ee,N,S))return null;let ue=Qa.getDecodedValue(F),Ee=Mt.getCodeword(ue);return Ee===-1?null:new yn(g,G,ar.getCodewordBucketNumber(ue),Ee)}static getModuleBitCount(n,c,u,m,g,v){let N=g,S=new Int32Array(8),F=0,G=m?1:-1,ee=m;for(;(m?N<u:N>=c)&&F<S.length;)n.get(N,v)===ee?(S[F]++,N+=G):(F++,ee=!ee);return F===S.length||N===(m?u:c)&&F===S.length-1?S:null}static getNumberOfECCodeWords(n){return 2<<n}static adjustCodewordStartColumn(n,c,u,m,g,v){let N=g,S=m?-1:1;for(let F=0;F<2;F++){for(;(m?N>=c:N<u)&&m===n.get(N,v);){if(Math.abs(g-N)>ar.CODEWORD_SKEW_SIZE)return g;N+=S}S=-S,m=!m}return N}static checkCodewordSkew(n,c,u){return c-ar.CODEWORD_SKEW_SIZE<=n&&n<=u+ar.CODEWORD_SKEW_SIZE}static decodeCodewords(n,c,u){if(n.length===0)throw L.getFormatInstance();let m=1<<c+1,g=ar.correctErrors(n,u,m);ar.verifyCodewordCount(n,m);let v=Qe.decode(n,""+c);return v.setErrorsCorrected(g),v.setErasures(u.length),v}static correctErrors(n,c,u){if(c!=null&&c.length>u/2+ar.MAX_ERRORS||u<0||u>ar.MAX_EC_CODEWORDS)throw _.getChecksumInstance();return ar.errorCorrection.decode(n,u,c)}static verifyCodewordCount(n,c){if(n.length<4)throw L.getFormatInstance();let u=n[0];if(u>n.length)throw L.getFormatInstance();if(u===0)if(c<n.length)n[0]=n.length-c;else throw L.getFormatInstance()}static getBitCountForCodeword(n){let c=new Int32Array(8),u=0,m=c.length-1;for(;!((n&1)!==u&&(u=n&1,m--,m<0));)c[m]++,n>>=1;return c}static getCodewordBucketNumber(n){return n instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(n):this.getCodewordBucketNumber_number(n)}static getCodewordBucketNumber_number(n){return ar.getCodewordBucketNumber(ar.getBitCountForCodeword(n))}static getCodewordBucketNumber_Int32Array(n){return(n[0]-n[2]+n[4]-n[6]+9)%9}static toString(n){let c=new Pn;for(let u=0;u<n.length;u++){c.format("Row %2d: ",u);for(let m=0;m<n[u].length;m++){let g=n[u][m];g.getValue().length===0?c.format("        ",null):c.format("%4d(%2d)",g.getValue()[0],g.getConfidence(g.getValue()[0]))}c.format("%n")}return c.toString()}}ar.CODEWORD_SKEW_SIZE=2,ar.MAX_ERRORS=3,ar.MAX_EC_CODEWORDS=512,ar.errorCorrection=new Rl;class Aa{decode(n,c=null){let u=Aa.decode(n,c,!1);if(u==null||u.length===0||u[0]==null)throw X.getNotFoundInstance();return u[0]}decodeMultiple(n,c=null){try{return Aa.decode(n,c,!0)}catch(u){throw u instanceof L||u instanceof _?X.getNotFoundInstance():u}}static decode(n,c,u){const m=new Array,g=Wt.detectMultiple(n,c,u);for(const v of g.getPoints()){const N=ar.decode(g.getBits(),v[4],v[5],v[6],v[7],Aa.getMinCodewordWidth(v),Aa.getMaxCodewordWidth(v)),S=new ae(N.getText(),N.getRawBytes(),void 0,v,Z.PDF_417);S.putMetadata(je.ERROR_CORRECTION_LEVEL,N.getECLevel());const F=N.getOther();F!=null&&S.putMetadata(je.PDF417_EXTRA_METADATA,F),m.push(S)}return m.map(v=>v)}static getMaxWidth(n,c){return n==null||c==null?0:Math.trunc(Math.abs(n.getX()-c.getX()))}static getMinWidth(n,c){return n==null||c==null?T.MAX_VALUE:Math.trunc(Math.abs(n.getX()-c.getX()))}static getMaxCodewordWidth(n){return Math.floor(Math.max(Math.max(Aa.getMaxWidth(n[0],n[4]),Aa.getMaxWidth(n[6],n[2])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN),Math.max(Aa.getMaxWidth(n[1],n[5]),Aa.getMaxWidth(n[7],n[3])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(n){return Math.floor(Math.min(Math.min(Aa.getMinWidth(n[0],n[4]),Aa.getMinWidth(n[6],n[2])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN),Math.min(Aa.getMinWidth(n[1],n[5]),Aa.getMinWidth(n[7],n[3])*Mt.MODULES_IN_CODEWORD/Mt.MODULES_IN_STOP_PATTERN)))}reset(){}}class Dl extends p{}Dl.kind="ReaderException";class yd{constructor(n,c){this.verbose=n===!0,c&&this.setHints(c)}decode(n,c){return c&&this.setHints(c),this.decodeInternal(n)}decodeWithState(n){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(n)}setHints(n){this.hints=n;const c=!i(n)&&n.get(U.TRY_HARDER)===!0,u=i(n)?null:n.get(U.POSSIBLE_FORMATS),m=new Array;if(!i(u)){const g=u.some(v=>v===Z.UPC_A||v===Z.UPC_E||v===Z.EAN_13||v===Z.EAN_8||v===Z.CODABAR||v===Z.CODE_39||v===Z.CODE_93||v===Z.CODE_128||v===Z.ITF||v===Z.RSS_14||v===Z.RSS_EXPANDED);g&&!c&&m.push(new Ka(n,this.verbose)),u.includes(Z.QR_CODE)&&m.push(new gn),u.includes(Z.DATA_MATRIX)&&m.push(new Fs),u.includes(Z.AZTEC)&&m.push(new Ye),u.includes(Z.PDF_417)&&m.push(new Aa),g&&c&&m.push(new Ka(n,this.verbose))}m.length===0&&(c||m.push(new Ka(n,this.verbose)),m.push(new gn),m.push(new Fs),m.push(new Ye),m.push(new Aa),c&&m.push(new Ka(n,this.verbose))),this.readers=m}reset(){if(this.readers!==null)for(const n of this.readers)n.reset()}decodeInternal(n){if(this.readers===null)throw new Dl("No readers where selected, nothing can be read.");for(const c of this.readers)try{return c.decode(n,this.hints)}catch(u){if(u instanceof Dl)continue}throw new X("No MultiFormat Readers were able to detect the code.")}}class Tf extends Y{constructor(n=null,c=500){const u=new yd;u.setHints(n),super(u,c)}decodeBitmap(n){return this.reader.decodeWithState(n)}}class Rf extends Y{constructor(n=500){super(new Aa,n)}}class Df extends Y{constructor(n=500){super(new gn,n)}}var Ol;(function(J){J[J.ERROR_CORRECTION=0]="ERROR_CORRECTION",J[J.CHARACTER_SET=1]="CHARACTER_SET",J[J.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",J[J.MIN_SIZE=3]="MIN_SIZE",J[J.MAX_SIZE=4]="MAX_SIZE",J[J.MARGIN=5]="MARGIN",J[J.PDF417_COMPACT=6]="PDF417_COMPACT",J[J.PDF417_COMPACTION=7]="PDF417_COMPACTION",J[J.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",J[J.AZTEC_LAYERS=9]="AZTEC_LAYERS",J[J.QR_VERSION=10]="QR_VERSION"})(Ol||(Ol={}));var da=Ol;class Sc{constructor(n){this.field=n,this.cachedGenerators=[],this.cachedGenerators.push(new at(n,Int32Array.from([1])))}buildGenerator(n){const c=this.cachedGenerators;if(n>=c.length){let u=c[c.length-1];const m=this.field;for(let g=c.length;g<=n;g++){const v=u.multiply(new at(m,Int32Array.from([1,m.exp(g-1+m.getGeneratorBase())])));c.push(v),u=v}}return c[n]}encode(n,c){if(c===0)throw new j("No error correction bytes");const u=n.length-c;if(u<=0)throw new j("No data bytes provided");const m=this.buildGenerator(c),g=new Int32Array(u);A.arraycopy(n,0,g,0,u);let v=new at(this.field,g);v=v.multiplyByMonomial(c,1);const S=v.divide(m)[1].getCoefficients(),F=c-S.length;for(let G=0;G<F;G++)n[u+G]=0;A.arraycopy(S,0,n,u+F,S.length)}}class qr{constructor(){}static applyMaskPenaltyRule1(n){return qr.applyMaskPenaltyRule1Internal(n,!0)+qr.applyMaskPenaltyRule1Internal(n,!1)}static applyMaskPenaltyRule2(n){let c=0;const u=n.getArray(),m=n.getWidth(),g=n.getHeight();for(let v=0;v<g-1;v++){const N=u[v];for(let S=0;S<m-1;S++){const F=N[S];F===N[S+1]&&F===u[v+1][S]&&F===u[v+1][S+1]&&c++}}return qr.N2*c}static applyMaskPenaltyRule3(n){let c=0;const u=n.getArray(),m=n.getWidth(),g=n.getHeight();for(let v=0;v<g;v++)for(let N=0;N<m;N++){const S=u[v];N+6<m&&S[N]===1&&S[N+1]===0&&S[N+2]===1&&S[N+3]===1&&S[N+4]===1&&S[N+5]===0&&S[N+6]===1&&(qr.isWhiteHorizontal(S,N-4,N)||qr.isWhiteHorizontal(S,N+7,N+11))&&c++,v+6<g&&u[v][N]===1&&u[v+1][N]===0&&u[v+2][N]===1&&u[v+3][N]===1&&u[v+4][N]===1&&u[v+5][N]===0&&u[v+6][N]===1&&(qr.isWhiteVertical(u,N,v-4,v)||qr.isWhiteVertical(u,N,v+7,v+11))&&c++}return c*qr.N3}static isWhiteHorizontal(n,c,u){c=Math.max(c,0),u=Math.min(u,n.length);for(let m=c;m<u;m++)if(n[m]===1)return!1;return!0}static isWhiteVertical(n,c,u,m){u=Math.max(u,0),m=Math.min(m,n.length);for(let g=u;g<m;g++)if(n[g][c]===1)return!1;return!0}static applyMaskPenaltyRule4(n){let c=0;const u=n.getArray(),m=n.getWidth(),g=n.getHeight();for(let S=0;S<g;S++){const F=u[S];for(let G=0;G<m;G++)F[G]===1&&c++}const v=n.getHeight()*n.getWidth();return Math.floor(Math.abs(c*2-v)*10/v)*qr.N4}static getDataMaskBit(n,c,u){let m,g;switch(n){case 0:m=u+c&1;break;case 1:m=u&1;break;case 2:m=c%3;break;case 3:m=(u+c)%3;break;case 4:m=Math.floor(u/2)+Math.floor(c/3)&1;break;case 5:g=u*c,m=(g&1)+g%3;break;case 6:g=u*c,m=(g&1)+g%3&1;break;case 7:g=u*c,m=g%3+(u+c&1)&1;break;default:throw new j("Invalid mask pattern: "+n)}return m===0}static applyMaskPenaltyRule1Internal(n,c){let u=0;const m=c?n.getHeight():n.getWidth(),g=c?n.getWidth():n.getHeight(),v=n.getArray();for(let N=0;N<m;N++){let S=0,F=-1;for(let G=0;G<g;G++){const ee=c?v[N][G]:v[G][N];ee===F?S++:(S>=5&&(u+=qr.N1+(S-5)),S=1,F=ee)}S>=5&&(u+=qr.N1+(S-5))}return u}}qr.N1=3,qr.N2=3,qr.N3=40,qr.N4=10;class Il{constructor(n,c){this.width=n,this.height=c;const u=new Array(c);for(let m=0;m!==c;m++)u[m]=new Uint8Array(n);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(n,c){return this.bytes[c][n]}getArray(){return this.bytes}setNumber(n,c,u){this.bytes[c][n]=u}setBoolean(n,c,u){this.bytes[c][n]=u?1:0}clear(n){for(const c of this.bytes)M.fill(c,n)}equals(n){if(!(n instanceof Il))return!1;const c=n;if(this.width!==c.width||this.height!==c.height)return!1;for(let u=0,m=this.height;u<m;++u){const g=this.bytes[u],v=c.bytes[u];for(let N=0,S=this.width;N<S;++N)if(g[N]!==v[N])return!1}return!0}toString(){const n=new ne;for(let c=0,u=this.height;c<u;++c){const m=this.bytes[c];for(let g=0,v=this.width;g<v;++g)switch(m[g]){case 0:n.append(" 0");break;case 1:n.append(" 1");break;default:n.append("  ");break}n.append(`
`)}return n.toString()}}class oi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const n=new ne;return n.append(`<<
`),n.append(" mode: "),n.append(this.mode?this.mode.toString():"null"),n.append(`
 ecLevel: `),n.append(this.ecLevel?this.ecLevel.toString():"null"),n.append(`
 version: `),n.append(this.version?this.version.toString():"null"),n.append(`
 maskPattern: `),n.append(this.maskPattern.toString()),this.matrix?(n.append(`
 matrix:
`),n.append(this.matrix.toString())):n.append(`
 matrix: null
`),n.append(`>>
`),n.toString()}setMode(n){this.mode=n}setECLevel(n){this.ecLevel=n}setVersion(n){this.version=n}setMaskPattern(n){this.maskPattern=n}setMatrix(n){this.matrix=n}static isValidMaskPattern(n){return n>=0&&n<oi.NUM_MASK_PATTERNS}}oi.NUM_MASK_PATTERNS=8;class Cr extends p{}Cr.kind="WriterException";class Bt{constructor(){}static clearMatrix(n){n.clear(255)}static buildMatrix(n,c,u,m,g){Bt.clearMatrix(g),Bt.embedBasicPatterns(u,g),Bt.embedTypeInfo(c,m,g),Bt.maybeEmbedVersionInfo(u,g),Bt.embedDataBits(n,m,g)}static embedBasicPatterns(n,c){Bt.embedPositionDetectionPatternsAndSeparators(c),Bt.embedDarkDotAtLeftBottomCorner(c),Bt.maybeEmbedPositionAdjustmentPatterns(n,c),Bt.embedTimingPatterns(c)}static embedTypeInfo(n,c,u){const m=new B;Bt.makeTypeInfoBits(n,c,m);for(let g=0,v=m.getSize();g<v;++g){const N=m.get(m.getSize()-1-g),S=Bt.TYPE_INFO_COORDINATES[g],F=S[0],G=S[1];if(u.setBoolean(F,G,N),g<8){const ee=u.getWidth()-g-1;u.setBoolean(ee,8,N)}else{const ue=u.getHeight()-7+(g-8);u.setBoolean(8,ue,N)}}}static maybeEmbedVersionInfo(n,c){if(n.getVersionNumber()<7)return;const u=new B;Bt.makeVersionInfoBits(n,u);let m=17;for(let g=0;g<6;++g)for(let v=0;v<3;++v){const N=u.get(m);m--,c.setBoolean(g,c.getHeight()-11+v,N),c.setBoolean(c.getHeight()-11+v,g,N)}}static embedDataBits(n,c,u){let m=0,g=-1,v=u.getWidth()-1,N=u.getHeight()-1;for(;v>0;){for(v===6&&(v-=1);N>=0&&N<u.getHeight();){for(let S=0;S<2;++S){const F=v-S;if(!Bt.isEmpty(u.get(F,N)))continue;let G;m<n.getSize()?(G=n.get(m),++m):G=!1,c!==255&&qr.getDataMaskBit(c,F,N)&&(G=!G),u.setBoolean(F,N,G)}N+=g}g=-g,N+=g,v-=2}if(m!==n.getSize())throw new Cr("Not all bits consumed: "+m+"/"+n.getSize())}static findMSBSet(n){return 32-T.numberOfLeadingZeros(n)}static calculateBCHCode(n,c){if(c===0)throw new j("0 polynomial");const u=Bt.findMSBSet(c);for(n<<=u-1;Bt.findMSBSet(n)>=u;)n^=c<<Bt.findMSBSet(n)-u;return n}static makeTypeInfoBits(n,c,u){if(!oi.isValidMaskPattern(c))throw new Cr("Invalid mask pattern");const m=n.getBits()<<3|c;u.appendBits(m,5);const g=Bt.calculateBCHCode(m,Bt.TYPE_INFO_POLY);u.appendBits(g,10);const v=new B;if(v.appendBits(Bt.TYPE_INFO_MASK_PATTERN,15),u.xor(v),u.getSize()!==15)throw new Cr("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(n,c){c.appendBits(n.getVersionNumber(),6);const u=Bt.calculateBCHCode(n.getVersionNumber(),Bt.VERSION_INFO_POLY);if(c.appendBits(u,12),c.getSize()!==18)throw new Cr("should not happen but we got: "+c.getSize())}static isEmpty(n){return n===255}static embedTimingPatterns(n){for(let c=8;c<n.getWidth()-8;++c){const u=(c+1)%2;Bt.isEmpty(n.get(c,6))&&n.setNumber(c,6,u),Bt.isEmpty(n.get(6,c))&&n.setNumber(6,c,u)}}static embedDarkDotAtLeftBottomCorner(n){if(n.get(8,n.getHeight()-8)===0)throw new Cr;n.setNumber(8,n.getHeight()-8,1)}static embedHorizontalSeparationPattern(n,c,u){for(let m=0;m<8;++m){if(!Bt.isEmpty(u.get(n+m,c)))throw new Cr;u.setNumber(n+m,c,0)}}static embedVerticalSeparationPattern(n,c,u){for(let m=0;m<7;++m){if(!Bt.isEmpty(u.get(n,c+m)))throw new Cr;u.setNumber(n,c+m,0)}}static embedPositionAdjustmentPattern(n,c,u){for(let m=0;m<5;++m){const g=Bt.POSITION_ADJUSTMENT_PATTERN[m];for(let v=0;v<5;++v)u.setNumber(n+v,c+m,g[v])}}static embedPositionDetectionPattern(n,c,u){for(let m=0;m<7;++m){const g=Bt.POSITION_DETECTION_PATTERN[m];for(let v=0;v<7;++v)u.setNumber(n+v,c+m,g[v])}}static embedPositionDetectionPatternsAndSeparators(n){const c=Bt.POSITION_DETECTION_PATTERN[0].length;Bt.embedPositionDetectionPattern(0,0,n),Bt.embedPositionDetectionPattern(n.getWidth()-c,0,n),Bt.embedPositionDetectionPattern(0,n.getWidth()-c,n);const u=8;Bt.embedHorizontalSeparationPattern(0,u-1,n),Bt.embedHorizontalSeparationPattern(n.getWidth()-u,u-1,n),Bt.embedHorizontalSeparationPattern(0,n.getWidth()-u,n);const m=7;Bt.embedVerticalSeparationPattern(m,0,n),Bt.embedVerticalSeparationPattern(n.getHeight()-m-1,0,n),Bt.embedVerticalSeparationPattern(m,n.getHeight()-m,n)}static maybeEmbedPositionAdjustmentPatterns(n,c){if(n.getVersionNumber()<2)return;const u=n.getVersionNumber()-1,m=Bt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let g=0,v=m.length;g!==v;g++){const N=m[g];if(N>=0)for(let S=0;S!==v;S++){const F=m[S];F>=0&&Bt.isEmpty(c.get(F,N))&&Bt.embedPositionAdjustmentPattern(F-2,N-2,c)}}}}Bt.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Bt.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Bt.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Bt.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Bt.VERSION_INFO_POLY=7973,Bt.TYPE_INFO_POLY=1335,Bt.TYPE_INFO_MASK_PATTERN=21522;class Of{constructor(n,c){this.dataBytes=n,this.errorCorrectionBytes=c}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Mr{constructor(){}static calculateMaskPenalty(n){return qr.applyMaskPenaltyRule1(n)+qr.applyMaskPenaltyRule2(n)+qr.applyMaskPenaltyRule3(n)+qr.applyMaskPenaltyRule4(n)}static encode(n,c,u=null){let m=Mr.DEFAULT_BYTE_MODE_ENCODING;const g=u!==null&&u.get(da.CHARACTER_SET)!==void 0;g&&(m=u.get(da.CHARACTER_SET).toString());const v=this.chooseMode(n,m),N=new B;if(v===Ot.BYTE&&(g||Mr.DEFAULT_BYTE_MODE_ENCODING!==m)){const pt=z.getCharacterSetECIByName(m);pt!==void 0&&this.appendECI(pt,N)}this.appendModeInfo(v,N);const S=new B;this.appendBytes(n,v,S,m);let F;if(u!==null&&u.get(da.QR_VERSION)!==void 0){const pt=Number.parseInt(u.get(da.QR_VERSION).toString(),10);F=Rt.getVersionForNumber(pt);const xt=this.calculateBitsNeeded(v,N,S,F);if(!this.willFit(xt,F,c))throw new Cr("Data too big for requested version")}else F=this.recommendVersion(c,v,N,S);const G=new B;G.appendBitArray(N);const ee=v===Ot.BYTE?S.getSizeInBytes():n.length;this.appendLengthInfo(ee,F,v,G),G.appendBitArray(S);const ue=F.getECBlocksForLevel(c),Ee=F.getTotalCodewords()-ue.getTotalECCodewords();this.terminateBits(Ee,G);const De=this.interleaveWithECBytes(G,F.getTotalCodewords(),Ee,ue.getNumBlocks()),Oe=new oi;Oe.setECLevel(c),Oe.setMode(v),Oe.setVersion(F);const ze=F.getDimensionForVersion(),Ke=new Il(ze,ze),mt=this.chooseMaskPattern(De,c,F,Ke);return Oe.setMaskPattern(mt),Bt.buildMatrix(De,c,F,mt,Ke),Oe.setMatrix(Ke),Oe}static recommendVersion(n,c,u,m){const g=this.calculateBitsNeeded(c,u,m,Rt.getVersionForNumber(1)),v=this.chooseVersion(g,n),N=this.calculateBitsNeeded(c,u,m,v);return this.chooseVersion(N,n)}static calculateBitsNeeded(n,c,u,m){return c.getSize()+n.getCharacterCountBits(m)+u.getSize()}static getAlphanumericCode(n){return n<Mr.ALPHANUMERIC_TABLE.length?Mr.ALPHANUMERIC_TABLE[n]:-1}static chooseMode(n,c=null){if(z.SJIS.getName()===c&&this.isOnlyDoubleByteKanji(n))return Ot.KANJI;let u=!1,m=!1;for(let g=0,v=n.length;g<v;++g){const N=n.charAt(g);if(Mr.isDigit(N))u=!0;else if(this.getAlphanumericCode(N.charCodeAt(0))!==-1)m=!0;else return Ot.BYTE}return m?Ot.ALPHANUMERIC:u?Ot.NUMERIC:Ot.BYTE}static isOnlyDoubleByteKanji(n){let c;try{c=te.encode(n,z.SJIS)}catch{return!1}const u=c.length;if(u%2!==0)return!1;for(let m=0;m<u;m+=2){const g=c[m]&255;if((g<129||g>159)&&(g<224||g>235))return!1}return!0}static chooseMaskPattern(n,c,u,m){let g=Number.MAX_SAFE_INTEGER,v=-1;for(let N=0;N<oi.NUM_MASK_PATTERNS;N++){Bt.buildMatrix(n,c,u,N,m);let S=this.calculateMaskPenalty(m);S<g&&(g=S,v=N)}return v}static chooseVersion(n,c){for(let u=1;u<=40;u++){const m=Rt.getVersionForNumber(u);if(Mr.willFit(n,m,c))return m}throw new Cr("Data too big")}static willFit(n,c,u){const m=c.getTotalCodewords(),v=c.getECBlocksForLevel(u).getTotalECCodewords(),N=m-v,S=(n+7)/8;return N>=S}static terminateBits(n,c){const u=n*8;if(c.getSize()>u)throw new Cr("data bits cannot fit in the QR Code"+c.getSize()+" > "+u);for(let v=0;v<4&&c.getSize()<u;++v)c.appendBit(!1);const m=c.getSize()&7;if(m>0)for(let v=m;v<8;v++)c.appendBit(!1);const g=n-c.getSizeInBytes();for(let v=0;v<g;++v)c.appendBits((v&1)===0?236:17,8);if(c.getSize()!==u)throw new Cr("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(n,c,u,m,g,v){if(m>=u)throw new Cr("Block ID too large");const N=n%u,S=u-N,F=Math.floor(n/u),G=F+1,ee=Math.floor(c/u),ue=ee+1,Ee=F-ee,De=G-ue;if(Ee!==De)throw new Cr("EC bytes mismatch");if(u!==S+N)throw new Cr("RS blocks mismatch");if(n!==(ee+Ee)*S+(ue+De)*N)throw new Cr("Total bytes mismatch");m<S?(g[0]=ee,v[0]=Ee):(g[0]=ue,v[0]=De)}static interleaveWithECBytes(n,c,u,m){if(n.getSizeInBytes()!==u)throw new Cr("Number of bits and data bytes does not match");let g=0,v=0,N=0;const S=new Array;for(let G=0;G<m;++G){const ee=new Int32Array(1),ue=new Int32Array(1);Mr.getNumDataBytesAndNumECBytesForBlockID(c,u,m,G,ee,ue);const Ee=ee[0],De=new Uint8Array(Ee);n.toBytes(8*g,De,0,Ee);const Oe=Mr.generateECBytes(De,ue[0]);S.push(new Of(De,Oe)),v=Math.max(v,Ee),N=Math.max(N,Oe.length),g+=ee[0]}if(u!==g)throw new Cr("Data bytes does not match offset");const F=new B;for(let G=0;G<v;++G)for(const ee of S){const ue=ee.getDataBytes();G<ue.length&&F.appendBits(ue[G],8)}for(let G=0;G<N;++G)for(const ee of S){const ue=ee.getErrorCorrectionBytes();G<ue.length&&F.appendBits(ue[G],8)}if(c!==F.getSizeInBytes())throw new Cr("Interleaving error: "+c+" and "+F.getSizeInBytes()+" differ.");return F}static generateECBytes(n,c){const u=n.length,m=new Int32Array(u+c);for(let v=0;v<u;v++)m[v]=n[v]&255;new Sc(Ae.QR_CODE_FIELD_256).encode(m,c);const g=new Uint8Array(c);for(let v=0;v<c;v++)g[v]=m[u+v];return g}static appendModeInfo(n,c){c.appendBits(n.getBits(),4)}static appendLengthInfo(n,c,u,m){const g=u.getCharacterCountBits(c);if(n>=1<<g)throw new Cr(n+" is bigger than "+((1<<g)-1));m.appendBits(n,g)}static appendBytes(n,c,u,m){switch(c){case Ot.NUMERIC:Mr.appendNumericBytes(n,u);break;case Ot.ALPHANUMERIC:Mr.appendAlphanumericBytes(n,u);break;case Ot.BYTE:Mr.append8BitBytes(n,u,m);break;case Ot.KANJI:Mr.appendKanjiBytes(n,u);break;default:throw new Cr("Invalid mode: "+c)}}static getDigit(n){return n.charCodeAt(0)-48}static isDigit(n){const c=Mr.getDigit(n);return c>=0&&c<=9}static appendNumericBytes(n,c){const u=n.length;let m=0;for(;m<u;){const g=Mr.getDigit(n.charAt(m));if(m+2<u){const v=Mr.getDigit(n.charAt(m+1)),N=Mr.getDigit(n.charAt(m+2));c.appendBits(g*100+v*10+N,10),m+=3}else if(m+1<u){const v=Mr.getDigit(n.charAt(m+1));c.appendBits(g*10+v,7),m+=2}else c.appendBits(g,4),m++}}static appendAlphanumericBytes(n,c){const u=n.length;let m=0;for(;m<u;){const g=Mr.getAlphanumericCode(n.charCodeAt(m));if(g===-1)throw new Cr;if(m+1<u){const v=Mr.getAlphanumericCode(n.charCodeAt(m+1));if(v===-1)throw new Cr;c.appendBits(g*45+v,11),m+=2}else c.appendBits(g,6),m++}}static append8BitBytes(n,c,u){let m;try{m=te.encode(n,u)}catch(g){throw new Cr(g)}for(let g=0,v=m.length;g!==v;g++){const N=m[g];c.appendBits(N,8)}}static appendKanjiBytes(n,c){let u;try{u=te.encode(n,z.SJIS)}catch(g){throw new Cr(g)}const m=u.length;for(let g=0;g<m;g+=2){const v=u[g]&255,N=u[g+1]&255,S=v<<8&4294967295|N;let F=-1;if(S>=33088&&S<=40956?F=S-33088:S>=57408&&S<=60351&&(F=S-49472),F===-1)throw new Cr("Invalid byte sequence");const G=(F>>8)*192+(F&255);c.appendBits(G,13)}}static appendECI(n,c){c.appendBits(Ot.ECI.getBits(),4),c.appendBits(n.getValue(),8)}}Mr.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Mr.DEFAULT_BYTE_MODE_ENCODING=z.UTF8.getName();class ci{write(n,c,u,m=null){if(n.length===0)throw new j("Found empty contents");if(c<0||u<0)throw new j("Requested dimensions are too small: "+c+"x"+u);let g=jr.L,v=ci.QUIET_ZONE_SIZE;m!==null&&(m.get(da.ERROR_CORRECTION)!==void 0&&(g=jr.fromString(m.get(da.ERROR_CORRECTION).toString())),m.get(da.MARGIN)!==void 0&&(v=Number.parseInt(m.get(da.MARGIN).toString(),10)));const N=Mr.encode(n,g,m);return this.renderResult(N,c,u,v)}writeToDom(n,c,u,m,g=null){typeof n=="string"&&(n=document.querySelector(n));const v=this.write(c,u,m,g);n&&n.appendChild(v)}renderResult(n,c,u,m){const g=n.getMatrix();if(g===null)throw new Ce;const v=g.getWidth(),N=g.getHeight(),S=v+m*2,F=N+m*2,G=Math.max(c,S),ee=Math.max(u,F),ue=Math.min(Math.floor(G/S),Math.floor(ee/F)),Ee=Math.floor((G-v*ue)/2),De=Math.floor((ee-N*ue)/2),Oe=this.createSVGElement(G,ee);for(let ze=0,Ke=De;ze<N;ze++,Ke+=ue)for(let mt=0,pt=Ee;mt<v;mt++,pt+=ue)if(g.get(mt,ze)===1){const xt=this.createSvgRectElement(pt,Ke,ue,ue);Oe.appendChild(xt)}return Oe}createSVGElement(n,c){const u=document.createElementNS(ci.SVG_NS,"svg");return u.setAttributeNS(null,"height",n.toString()),u.setAttributeNS(null,"width",c.toString()),u}createSvgRectElement(n,c,u,m){const g=document.createElementNS(ci.SVG_NS,"rect");return g.setAttributeNS(null,"x",n.toString()),g.setAttributeNS(null,"y",c.toString()),g.setAttributeNS(null,"height",u.toString()),g.setAttributeNS(null,"width",m.toString()),g.setAttributeNS(null,"fill","#000000"),g}}ci.QUIET_ZONE_SIZE=4,ci.SVG_NS="http://www.w3.org/2000/svg";class Vi{encode(n,c,u,m,g){if(n.length===0)throw new j("Found empty contents");if(c!==Z.QR_CODE)throw new j("Can only encode QR_CODE, but got "+c);if(u<0||m<0)throw new j(`Requested dimensions are too small: ${u}x${m}`);let v=jr.L,N=Vi.QUIET_ZONE_SIZE;g!==null&&(g.get(da.ERROR_CORRECTION)!==void 0&&(v=jr.fromString(g.get(da.ERROR_CORRECTION).toString())),g.get(da.MARGIN)!==void 0&&(N=Number.parseInt(g.get(da.MARGIN).toString(),10)));const S=Mr.encode(n,v,g);return Vi.renderResult(S,u,m,N)}static renderResult(n,c,u,m){const g=n.getMatrix();if(g===null)throw new Ce;const v=g.getWidth(),N=g.getHeight(),S=v+m*2,F=N+m*2,G=Math.max(c,S),ee=Math.max(u,F),ue=Math.min(Math.floor(G/S),Math.floor(ee/F)),Ee=Math.floor((G-v*ue)/2),De=Math.floor((ee-N*ue)/2),Oe=new ie(G,ee);for(let ze=0,Ke=De;ze<N;ze++,Ke+=ue)for(let mt=0,pt=Ee;mt<v;mt++,pt+=ue)g.get(mt,ze)===1&&Oe.setRegion(pt,Ke,ue,ue);return Oe}}Vi.QUIET_ZONE_SIZE=4;class If{encode(n,c,u,m,g){let v;switch(c){case Z.QR_CODE:v=new Vi;break;default:throw new j("No encoder available for format "+c)}return v.encode(n,c,u,m,g)}}class Qs extends we{constructor(n,c,u,m,g,v,N,S){if(super(v,N),this.yuvData=n,this.dataWidth=c,this.dataHeight=u,this.left=m,this.top=g,m+v>c||g+N>u)throw new j("Crop rectangle does not fit within image data.");S&&this.reverseHorizontal(v,N)}getRow(n,c){if(n<0||n>=this.getHeight())throw new j("Requested row is outside the image: "+n);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(n+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,m,c,0,u),c}getMatrix(){const n=this.getWidth(),c=this.getHeight();if(n===this.dataWidth&&c===this.dataHeight)return this.yuvData;const u=n*c,m=new Uint8ClampedArray(u);let g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return A.arraycopy(this.yuvData,g,m,0,u),m;for(let v=0;v<c;v++){const N=v*n;A.arraycopy(this.yuvData,g,m,N,n),g+=this.dataWidth}return m}isCropSupported(){return!0}crop(n,c,u,m){return new Qs(this.yuvData,this.dataWidth,this.dataHeight,this.left+n,this.top+c,u,m,!1)}renderThumbnail(){const n=this.getWidth()/Qs.THUMBNAIL_SCALE_FACTOR,c=this.getHeight()/Qs.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(n*c),m=this.yuvData;let g=this.top*this.dataWidth+this.left;for(let v=0;v<c;v++){const N=v*n;for(let S=0;S<n;S++){const F=m[g+S*Qs.THUMBNAIL_SCALE_FACTOR]&255;u[N+S]=4278190080|F*65793}g+=this.dataWidth*Qs.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Qs.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Qs.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(n,c){const u=this.yuvData;for(let m=0,g=this.top*this.dataWidth+this.left;m<c;m++,g+=this.dataWidth){const v=g+n/2;for(let N=g,S=g+n-1;N<v;N++,S--){const F=u[N];u[N]=u[S],u[S]=F}}}invert(){return new oe(this)}}Qs.THUMBNAIL_SCALE_FACTOR=2;class Fl extends we{constructor(n,c,u,m,g,v,N){if(super(c,u),this.dataWidth=m,this.dataHeight=g,this.left=v,this.top=N,n.BYTES_PER_ELEMENT===4){const S=c*u,F=new Uint8ClampedArray(S);for(let G=0;G<S;G++){const ee=n[G],ue=ee>>16&255,Ee=ee>>7&510,De=ee&255;F[G]=(ue+Ee+De)/4&255}this.luminances=F}else this.luminances=n;if(m===void 0&&(this.dataWidth=c),g===void 0&&(this.dataHeight=u),v===void 0&&(this.left=0),N===void 0&&(this.top=0),this.left+c>this.dataWidth||this.top+u>this.dataHeight)throw new j("Crop rectangle does not fit within image data.")}getRow(n,c){if(n<0||n>=this.getHeight())throw new j("Requested row is outside the image: "+n);const u=this.getWidth();(c==null||c.length<u)&&(c=new Uint8ClampedArray(u));const m=(n+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,m,c,0,u),c}getMatrix(){const n=this.getWidth(),c=this.getHeight();if(n===this.dataWidth&&c===this.dataHeight)return this.luminances;const u=n*c,m=new Uint8ClampedArray(u);let g=this.top*this.dataWidth+this.left;if(n===this.dataWidth)return A.arraycopy(this.luminances,g,m,0,u),m;for(let v=0;v<c;v++){const N=v*n;A.arraycopy(this.luminances,g,m,N,n),g+=this.dataWidth}return m}isCropSupported(){return!0}crop(n,c,u,m){return new Fl(this.luminances,u,m,this.dataWidth,this.dataHeight,this.left+n,this.top+c)}invert(){return new oe(this)}}class Gi extends z{static forName(n){return this.getCharacterSetECIByName(n)}}class Tc{}Tc.ISO_8859_1=z.ISO8859_1;class Rc{isCompact(){return this.compact}setCompact(n){this.compact=n}getSize(){return this.size}setSize(n){this.size=n}getLayers(){return this.layers}setLayers(n){this.layers=n}getCodeWords(){return this.codeWords}setCodeWords(n){this.codeWords=n}getMatrix(){return this.matrix}setMatrix(n){this.matrix=n}}class Dc{static singletonList(n){return[n]}static min(n,c){return n.sort(c)[0]}}class bd{constructor(n){this.previous=n}getPrevious(){return this.previous}}class di extends bd{constructor(n,c,u){super(n),this.value=c,this.bitCount=u}appendTo(n,c){n.appendBits(this.value,this.bitCount)}add(n,c){return new di(this,n,c)}addBinaryShift(n,c){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new di(this,n,c)}toString(){let n=this.value&(1<<this.bitCount)-1;return n|=1<<this.bitCount,"<"+T.toBinaryString(n|1<<this.bitCount).substring(1)+">"}}class Ro extends di{constructor(n,c,u){super(n,0,0),this.binaryShiftStart=c,this.binaryShiftByteCount=u}appendTo(n,c){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(n.appendBits(31,5),this.binaryShiftByteCount>62?n.appendBits(this.binaryShiftByteCount-31,16):u===0?n.appendBits(Math.min(this.binaryShiftByteCount,31),5):n.appendBits(this.binaryShiftByteCount-31,5)),n.appendBits(c[this.binaryShiftStart+u],8)}addBinaryShift(n,c){return new Ro(this,n,c)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Xi(J,n,c){return new Ro(J,n,c)}function Ml(J,n,c){return new di(J,n,c)}const Ff=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Vn=0,Bl=1,ms=2,qi=3,Ja=4,Mf=new di(null,0,0),$i=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function vd(J){for(let n of J)M.fill(n,-1);return J[Vn][Ja]=0,J[Bl][Ja]=0,J[Bl][Vn]=28,J[qi][Ja]=0,J[ms][Ja]=0,J[ms][Vn]=15,J}const Oc=vd(M.createInt32Array(6,6));class js{constructor(n,c,u,m){this.token=n,this.mode=c,this.binaryShiftByteCount=u,this.bitCount=m}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(n,c){let u=this.bitCount,m=this.token;if(n!==this.mode){let v=$i[this.mode][n];m=Ml(m,v&65535,v>>16),u+=v>>16}let g=n===ms?4:5;return m=Ml(m,c,g),new js(m,n,0,u+g)}shiftAndAppend(n,c){let u=this.token,m=this.mode===ms?4:5;return u=Ml(u,Oc[this.mode][n],m),u=Ml(u,c,5),new js(u,this.mode,0,this.bitCount+m+5)}addBinaryShiftChar(n){let c=this.token,u=this.mode,m=this.bitCount;if(this.mode===Ja||this.mode===ms){let N=$i[u][Vn];c=Ml(c,N&65535,N>>16),m+=N>>16,u=Vn}let g=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,v=new js(c,u,this.binaryShiftByteCount+1,m+g);return v.binaryShiftByteCount===2078&&(v=v.endBinaryShift(n+1)),v}endBinaryShift(n){if(this.binaryShiftByteCount===0)return this;let c=this.token;return c=Xi(c,n-this.binaryShiftByteCount,this.binaryShiftByteCount),new js(c,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(n){let c=this.bitCount+($i[this.mode][n.mode]>>16);return this.binaryShiftByteCount<n.binaryShiftByteCount?c+=js.calculateBinaryShiftCost(n)-js.calculateBinaryShiftCost(this):this.binaryShiftByteCount>n.binaryShiftByteCount&&n.binaryShiftByteCount>0&&(c+=10),c<=n.bitCount}toBitArray(n){let c=[];for(let m=this.endBinaryShift(n.length).token;m!==null;m=m.getPrevious())c.unshift(m);let u=new B;for(const m of c)m.appendTo(u,n);return u}toString(){return V.format("%s bits=%d bytes=%d",Ff[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(n){return n.binaryShiftByteCount>62?21:n.binaryShiftByteCount>31?20:n.binaryShiftByteCount>0?10:0}}js.INITIAL_STATE=new js(Mf,Vn,0,0);function Ic(J){const n=V.getCharCode(" "),c=V.getCharCode("."),u=V.getCharCode(",");J[Vn][n]=1;const m=V.getCharCode("Z"),g=V.getCharCode("A");for(let ue=g;ue<=m;ue++)J[Vn][ue]=ue-g+2;J[Bl][n]=1;const v=V.getCharCode("z"),N=V.getCharCode("a");for(let ue=N;ue<=v;ue++)J[Bl][ue]=ue-N+2;J[ms][n]=1;const S=V.getCharCode("9"),F=V.getCharCode("0");for(let ue=F;ue<=S;ue++)J[ms][ue]=ue-F+2;J[ms][u]=12,J[ms][c]=13;const G=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let ue=0;ue<G.length;ue++)J[qi][V.getCharCode(G[ue])]=ue;const ee=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let ue=0;ue<ee.length;ue++)V.getCharCode(ee[ue])>0&&(J[Ja][V.getCharCode(ee[ue])]=ue);return J}const Do=Ic(M.createInt32Array(5,256));class Yi{constructor(n){this.text=n}encode(){const n=V.getCharCode(" "),c=V.getCharCode(`
`);let u=Dc.singletonList(js.INITIAL_STATE);for(let g=0;g<this.text.length;g++){let v,N=g+1<this.text.length?this.text[g+1]:0;switch(this.text[g]){case V.getCharCode("\r"):v=N===c?2:0;break;case V.getCharCode("."):v=N===n?3:0;break;case V.getCharCode(","):v=N===n?4:0;break;case V.getCharCode(":"):v=N===n?5:0;break;default:v=0}v>0?(u=Yi.updateStateListForPair(u,g,v),g++):u=this.updateStateListForChar(u,g)}return Dc.min(u,(g,v)=>g.getBitCount()-v.getBitCount()).toBitArray(this.text)}updateStateListForChar(n,c){const u=[];for(let m of n)this.updateStateForChar(m,c,u);return Yi.simplifyStates(u)}updateStateForChar(n,c,u){let m=this.text[c]&255,g=Do[n.getMode()][m]>0,v=null;for(let N=0;N<=Ja;N++){let S=Do[N][m];if(S>0){if(v==null&&(v=n.endBinaryShift(c)),!g||N===n.getMode()||N===ms){const F=v.latchAndAppend(N,S);u.push(F)}if(!g&&Oc[n.getMode()][N]>=0){const F=v.shiftAndAppend(N,S);u.push(F)}}}if(n.getBinaryShiftByteCount()>0||Do[n.getMode()][m]===0){let N=n.addBinaryShiftChar(c);u.push(N)}}static updateStateListForPair(n,c,u){const m=[];for(let g of n)this.updateStateForPair(g,c,u,m);return this.simplifyStates(m)}static updateStateForPair(n,c,u,m){let g=n.endBinaryShift(c);if(m.push(g.latchAndAppend(Ja,u)),n.getMode()!==Ja&&m.push(g.shiftAndAppend(Ja,u)),u===3||u===4){let v=g.latchAndAppend(ms,16-u).latchAndAppend(ms,1);m.push(v)}if(n.getBinaryShiftByteCount()>0){let v=n.addBinaryShiftChar(c).addBinaryShiftChar(c+1);m.push(v)}}static simplifyStates(n){let c=[];for(const u of n){let m=!0;for(const g of c){if(g.isBetterThanOrEqualTo(u)){m=!1;break}u.isBetterThanOrEqualTo(g)&&(c=c.filter(v=>v!==g))}m&&c.push(u)}return c}}class ur{constructor(){}static encodeBytes(n){return ur.encode(n,ur.DEFAULT_EC_PERCENT,ur.DEFAULT_AZTEC_LAYERS)}static encode(n,c,u){let m=new Yi(n).encode(),g=T.truncDivision(m.getSize()*c,100)+11,v=m.getSize()+g,N,S,F,G,ee;if(u!==ur.DEFAULT_AZTEC_LAYERS){if(N=u<0,S=Math.abs(u),S>(N?ur.MAX_NB_BITS_COMPACT:ur.MAX_NB_BITS))throw new j(V.format("Illegal value %s for layers",u));F=ur.totalBitsInLayer(S,N),G=ur.WORD_SIZE[S];let xt=F-F%G;if(ee=ur.stuffBits(m,G),ee.getSize()+g>xt)throw new j("Data to large for user specified layer");if(N&&ee.getSize()>G*64)throw new j("Data to large for user specified layer")}else{G=0,ee=null;for(let xt=0;;xt++){if(xt>ur.MAX_NB_BITS)throw new j("Data too large for an Aztec code");if(N=xt<=3,S=N?xt+1:xt,F=ur.totalBitsInLayer(S,N),v>F)continue;(ee==null||G!==ur.WORD_SIZE[S])&&(G=ur.WORD_SIZE[S],ee=ur.stuffBits(m,G));let Kt=F-F%G;if(!(N&&ee.getSize()>G*64)&&ee.getSize()+g<=Kt)break}}let ue=ur.generateCheckWords(ee,F,G),Ee=ee.getSize()/G,De=ur.generateModeMessage(N,S,Ee),Oe=(N?11:14)+S*4,ze=new Int32Array(Oe),Ke;if(N){Ke=Oe;for(let xt=0;xt<ze.length;xt++)ze[xt]=xt}else{Ke=Oe+1+2*T.truncDivision(T.truncDivision(Oe,2)-1,15);let xt=T.truncDivision(Oe,2),Kt=T.truncDivision(Ke,2);for(let Yt=0;Yt<xt;Yt++){let Ha=Yt+T.truncDivision(Yt,15);ze[xt-Yt-1]=Kt-Ha-1,ze[xt+Yt]=Kt+Ha+1}}let mt=new ie(Ke);for(let xt=0,Kt=0;xt<S;xt++){let Yt=(S-xt)*4+(N?9:12);for(let Ha=0;Ha<Yt;Ha++){let Es=Ha*2;for(let es=0;es<2;es++)ue.get(Kt+Es+es)&&mt.set(ze[xt*2+es],ze[xt*2+Ha]),ue.get(Kt+Yt*2+Es+es)&&mt.set(ze[xt*2+Ha],ze[Oe-1-xt*2-es]),ue.get(Kt+Yt*4+Es+es)&&mt.set(ze[Oe-1-xt*2-es],ze[Oe-1-xt*2-Ha]),ue.get(Kt+Yt*6+Es+es)&&mt.set(ze[Oe-1-xt*2-Ha],ze[xt*2+es])}Kt+=Yt*8}if(ur.drawModeMessage(mt,N,Ke,De),N)ur.drawBullsEye(mt,T.truncDivision(Ke,2),5);else{ur.drawBullsEye(mt,T.truncDivision(Ke,2),7);for(let xt=0,Kt=0;xt<T.truncDivision(Oe,2)-1;xt+=15,Kt+=16)for(let Yt=T.truncDivision(Ke,2)&1;Yt<Ke;Yt+=2)mt.set(T.truncDivision(Ke,2)-Kt,Yt),mt.set(T.truncDivision(Ke,2)+Kt,Yt),mt.set(Yt,T.truncDivision(Ke,2)-Kt),mt.set(Yt,T.truncDivision(Ke,2)+Kt)}let pt=new Rc;return pt.setCompact(N),pt.setSize(Ke),pt.setLayers(S),pt.setCodeWords(Ee),pt.setMatrix(mt),pt}static drawBullsEye(n,c,u){for(let m=0;m<u;m+=2)for(let g=c-m;g<=c+m;g++)n.set(g,c-m),n.set(g,c+m),n.set(c-m,g),n.set(c+m,g);n.set(c-u,c-u),n.set(c-u+1,c-u),n.set(c-u,c-u+1),n.set(c+u,c-u),n.set(c+u,c-u+1),n.set(c+u,c+u-1)}static generateModeMessage(n,c,u){let m=new B;return n?(m.appendBits(c-1,2),m.appendBits(u-1,6),m=ur.generateCheckWords(m,28,4)):(m.appendBits(c-1,5),m.appendBits(u-1,11),m=ur.generateCheckWords(m,40,4)),m}static drawModeMessage(n,c,u,m){let g=T.truncDivision(u,2);if(c)for(let v=0;v<7;v++){let N=g-3+v;m.get(v)&&n.set(N,g-5),m.get(v+7)&&n.set(g+5,N),m.get(20-v)&&n.set(N,g+5),m.get(27-v)&&n.set(g-5,N)}else for(let v=0;v<10;v++){let N=g-5+v+T.truncDivision(v,5);m.get(v)&&n.set(N,g-7),m.get(v+10)&&n.set(g+7,N),m.get(29-v)&&n.set(N,g+7),m.get(39-v)&&n.set(g-7,N)}}static generateCheckWords(n,c,u){let m=n.getSize()/u,g=new Sc(ur.getGF(u)),v=T.truncDivision(c,u),N=ur.bitsToWords(n,u,v);g.encode(N,v-m);let S=c%u,F=new B;F.appendBits(0,S);for(const G of Array.from(N))F.appendBits(G,u);return F}static bitsToWords(n,c,u){let m=new Int32Array(u),g,v;for(g=0,v=n.getSize()/c;g<v;g++){let N=0;for(let S=0;S<c;S++)N|=n.get(g*c+S)?1<<c-S-1:0;m[g]=N}return m}static getGF(n){switch(n){case 4:return Ae.AZTEC_PARAM;case 6:return Ae.AZTEC_DATA_6;case 8:return Ae.AZTEC_DATA_8;case 10:return Ae.AZTEC_DATA_10;case 12:return Ae.AZTEC_DATA_12;default:throw new j("Unsupported word size "+n)}}static stuffBits(n,c){let u=new B,m=n.getSize(),g=(1<<c)-2;for(let v=0;v<m;v+=c){let N=0;for(let S=0;S<c;S++)(v+S>=m||n.get(v+S))&&(N|=1<<c-1-S);(N&g)===g?(u.appendBits(N&g,c),v--):(N&g)===0?(u.appendBits(N|1,c),v--):u.appendBits(N,c)}return u}static totalBitsInLayer(n,c){return((c?88:112)+16*n)*n}}ur.DEFAULT_EC_PERCENT=33,ur.DEFAULT_AZTEC_LAYERS=0,ur.MAX_NB_BITS=32,ur.MAX_NB_BITS_COMPACT=4,ur.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Oo{encode(n,c,u,m){return this.encodeWithHints(n,c,u,m,null)}encodeWithHints(n,c,u,m,g){let v=Tc.ISO_8859_1,N=ur.DEFAULT_EC_PERCENT,S=ur.DEFAULT_AZTEC_LAYERS;return g!=null&&(g.has(da.CHARACTER_SET)&&(v=Gi.forName(g.get(da.CHARACTER_SET).toString())),g.has(da.ERROR_CORRECTION)&&(N=T.parseInt(g.get(da.ERROR_CORRECTION).toString())),g.has(da.AZTEC_LAYERS)&&(S=T.parseInt(g.get(da.AZTEC_LAYERS).toString()))),Oo.encodeLayers(n,c,u,m,v,N,S)}static encodeLayers(n,c,u,m,g,v,N){if(c!==Z.AZTEC)throw new j("Can only encode AZTEC, but got "+c);let S=ur.encode(V.getBytes(n,g),v,N);return Oo.renderResult(S,u,m)}static renderResult(n,c,u){let m=n.getMatrix();if(m==null)throw new Ce;let g=m.getWidth(),v=m.getHeight(),N=Math.max(c,g),S=Math.max(u,v),F=Math.min(N/g,S/v),G=(N-g*F)/2,ee=(S-v*F)/2,ue=new ie(N,S);for(let Ee=0,De=ee;Ee<v;Ee++,De+=F)for(let Oe=0,ze=G;Oe<g;Oe++,ze+=F)m.get(Oe,Ee)&&ue.setRegion(ze,De,F,F);return ue}}r.AbstractExpandedDecoder=Ne,r.ArgumentException=w,r.ArithmeticException=ye,r.AztecCode=Rc,r.AztecCodeReader=Ye,r.AztecCodeWriter=Oo,r.AztecDecoder=dt,r.AztecDetector=Ft,r.AztecDetectorResult=st,r.AztecEncoder=ur,r.AztecHighLevelEncoder=Yi,r.AztecPoint=qt,r.BarcodeFormat=Z,r.Binarizer=R,r.BinaryBitmap=C,r.BitArray=B,r.BitMatrix=ie,r.BitSource=Za,r.BrowserAztecCodeReader=Et,r.BrowserBarcodeReader=In,r.BrowserCodeReader=Y,r.BrowserDatamatrixCodeReader=Cf,r.BrowserMultiFormatReader=Tf,r.BrowserPDF417Reader=Rf,r.BrowserQRCodeReader=Df,r.BrowserQRCodeSvgWriter=ci,r.CharacterSetECI=z,r.ChecksumException=_,r.Code128Reader=ot,r.Code39Reader=St,r.DataMatrixDecodedBitStreamParser=Fn,r.DataMatrixReader=Fs,r.DecodeHintType=U,r.DecoderResult=Ue,r.DefaultGridSampler=or,r.DetectorResult=lt,r.EAN13Reader=Qr,r.EncodeHintType=da,r.Exception=p,r.FormatException=L,r.GenericGF=Ae,r.GenericGFPoly=at,r.GlobalHistogramBinarizer=q,r.GridSampler=At,r.GridSamplerInstance=Lt,r.HTMLCanvasElementLuminanceSource=fe,r.HybridBinarizer=ce,r.ITFReader=wt,r.IllegalArgumentException=j,r.IllegalStateException=Ce,r.InvertedLuminanceSource=oe,r.LuminanceSource=we,r.MathUtils=me,r.MultiFormatOneDReader=Ka,r.MultiFormatReader=yd,r.MultiFormatWriter=If,r.NotFoundException=X,r.OneDReader=Nt,r.PDF417DecodedBitStreamParser=Qe,r.PDF417DecoderErrorCorrection=Rl,r.PDF417Reader=Aa,r.PDF417ResultMetadata=Ao,r.PerspectiveTransform=Dt,r.PlanarYUVLuminanceSource=Qs,r.QRCodeByteMatrix=Il,r.QRCodeDataMask=_a,r.QRCodeDecodedBitStreamParser=Vr,r.QRCodeDecoderErrorCorrectionLevel=jr,r.QRCodeDecoderFormatInformation=Ca,r.QRCodeEncoder=Mr,r.QRCodeEncoderQRCode=oi,r.QRCodeMaskUtil=qr,r.QRCodeMatrixUtil=Bt,r.QRCodeMode=Ot,r.QRCodeReader=gn,r.QRCodeVersion=Rt,r.QRCodeWriter=Vi,r.RGBLuminanceSource=Fl,r.RSS14Reader=Ht,r.RSSExpandedReader=tt,r.ReaderException=Dl,r.ReedSolomonDecoder=Je,r.ReedSolomonEncoder=Sc,r.ReedSolomonException=Fe,r.Result=ae,r.ResultMetadataType=je,r.ResultPoint=pe,r.StringUtils=V,r.UnsupportedOperationException=K,r.VideoInputDevice=re,r.WhiteRectangleDetector=jt,r.WriterException=Cr,r.ZXingArrays=M,r.ZXingCharset=Gi,r.ZXingInteger=T,r.ZXingStandardCharsets=Tc,r.ZXingStringBuilder=ne,r.ZXingStringEncoding=te,r.ZXingSystem=A,r.createAbstractExpandedDecoder=yt,Object.defineProperty(r,"__esModule",{value:!0})})}(k0,k0.exports)),k0.exports}var Gr=M_();const B_=of(Gr),L_=lk({__proto__:null,default:B_},[Gr]);var Fb=function(){function t(a,r,i){if(this.formatMap=new Map([[Ct.QR_CODE,Gr.BarcodeFormat.QR_CODE],[Ct.AZTEC,Gr.BarcodeFormat.AZTEC],[Ct.CODABAR,Gr.BarcodeFormat.CODABAR],[Ct.CODE_39,Gr.BarcodeFormat.CODE_39],[Ct.CODE_93,Gr.BarcodeFormat.CODE_93],[Ct.CODE_128,Gr.BarcodeFormat.CODE_128],[Ct.DATA_MATRIX,Gr.BarcodeFormat.DATA_MATRIX],[Ct.MAXICODE,Gr.BarcodeFormat.MAXICODE],[Ct.ITF,Gr.BarcodeFormat.ITF],[Ct.EAN_13,Gr.BarcodeFormat.EAN_13],[Ct.EAN_8,Gr.BarcodeFormat.EAN_8],[Ct.PDF_417,Gr.BarcodeFormat.PDF_417],[Ct.RSS_14,Gr.BarcodeFormat.RSS_14],[Ct.RSS_EXPANDED,Gr.BarcodeFormat.RSS_EXPANDED],[Ct.UPC_A,Gr.BarcodeFormat.UPC_A],[Ct.UPC_E,Gr.BarcodeFormat.UPC_E],[Ct.UPC_EAN_EXTENSION,Gr.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!L_)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=r,this.logger=i;var l=this.createZXingFormats(a),d=new Map;d.set(Gr.DecodeHintType.POSSIBLE_FORMATS,l),d.set(Gr.DecodeHintType.TRY_HARDER,!1),this.hints=d}return t.prototype.decodeAsync=function(a){var r=this;return new Promise(function(i,l){try{i(r.decode(a))}catch(d){l(d)}})},t.prototype.decode=function(a){var r=new Gr.MultiFormatReader(this.verbose,this.hints),i=new Gr.HTMLCanvasElementLuminanceSource(a),l=new Gr.BinaryBitmap(new Gr.HybridBinarizer(i)),d=r.decode(l);return{text:d.text,format:lw.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,i,l){a.set(r,i)}),a},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createZXingFormats=function(a){for(var r=[],i=0,l=a;i<l.length;i++){var d=l[i];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.logError("".concat(d," is not supported by")+"ZXingHtml5QrcodeShim")}return r},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),P_=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},z_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Mb=function(){function t(a,r,i){if(this.formatMap=new Map([[Ct.QR_CODE,"qr_code"],[Ct.AZTEC,"aztec"],[Ct.CODABAR,"codabar"],[Ct.CODE_39,"code_39"],[Ct.CODE_93,"code_93"],[Ct.CODE_128,"code_128"],[Ct.DATA_MATRIX,"data_matrix"],[Ct.ITF,"itf"],[Ct.EAN_13,"ean_13"],[Ct.EAN_8,"ean_8"],[Ct.PDF_417,"pdf417"],[Ct.UPC_A,"upc_a"],[Ct.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=r,this.logger=i;var l=this.createBarcodeDetectorFormats(a);if(this.detector=new BarcodeDetector(l),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var a=new BarcodeDetector({formats:["qr_code"]});return typeof a<"u"},t.prototype.decodeAsync=function(a){return P_(this,void 0,void 0,function(){var r,i;return z_(this,function(l){switch(l.label){case 0:return[4,this.detector.detect(a)];case 1:if(r=l.sent(),!r||r.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(r),[2,{text:i.rawValue,format:lw.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(a){for(var r=null,i=0,l=0,d=a;l<d.length;l++){var f=d[l],h=f.boundingBox.width*f.boundingBox.height;h>i&&(i=h,r=f)}if(!r)throw"No largest barcode found";return r},t.prototype.createBarcodeDetectorFormats=function(a){for(var r=[],i=0,l=a;i<l.length;i++){var d=l[i];this.formatMap.has(d)?r.push(this.formatMap.get(d)):this.logger.warn("".concat(d," is not supported by")+"BarcodeDetectorDelegate")}return{formats:r}},t.prototype.toHtml5QrcodeSupportedFormats=function(a){if(!this.reverseFormatMap.has(a))throw"reverseFormatMap doesn't have ".concat(a);return this.reverseFormatMap.get(a)},t.prototype.createReverseFormatMap=function(){var a=new Map;return this.formatMap.forEach(function(r,i,l){a.set(r,i)}),a},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),Bb=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},Lb=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},U_=function(){function t(a,r,i,l){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,r&&Mb.isSupported()?(this.primaryDecoder=new Mb(a,i,l),this.secondaryDecoder=new Fb(a,i,l)):this.primaryDecoder=new Fb(a,i,l)}return t.prototype.decodeAsync=function(a){return Bb(this,void 0,void 0,function(){var r;return Lb(this,function(i){switch(i.label){case 0:r=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(a)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(r),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(a){return Bb(this,void 0,void 0,function(){var r,i;return Lb(this,function(l){switch(l.label){case 0:r=performance.now(),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(a)];case 2:return[2,l.sent()];case 3:if(i=l.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(a)];throw i;case 4:return this.possiblyLogPerformance(r),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(a){if(this.verbose){var r=performance.now()-a;this.executionResults.push(r),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var a=0,r=0,i=this.executionResults;r<i.length;r++){var l=i[r];a+=l}var d=a/this.executionResults.length;console.log("".concat(d," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),Jm=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Yu=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},Wu=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},cw=function(){function t(a,r){this.name=a,this.track=r}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(a){var r={};r[this.name]=a;var i={advanced:[r]};return this.track.applyConstraints(i)},t.prototype.value=function(){var a=this.track.getSettings();if(this.name in a){var r=a[this.name];return r}return null},t}(),H_=function(t){Jm(a,t);function a(r,i){return t.call(this,r,i)||this}return a.prototype.min=function(){return this.getCapabilities().min},a.prototype.max=function(){return this.getCapabilities().max},a.prototype.step=function(){return this.getCapabilities().step},a.prototype.apply=function(r){var i={};i[this.name]=r;var l={advanced:[i]};return this.track.applyConstraints(l)},a.prototype.getCapabilities=function(){this.failIfNotSupported();var r=this.track.getCapabilities(),i=r[this.name];return{min:i.min,max:i.max,step:i.step}},a.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},a}(cw),V_=function(t){Jm(a,t);function a(r){return t.call(this,"zoom",r)||this}return a}(H_),G_=function(t){Jm(a,t);function a(r){return t.call(this,"torch",r)||this}return a}(cw),X_=function(){function t(a){this.track=a}return t.prototype.zoomFeature=function(){return new V_(this.track)},t.prototype.torchFeature=function(){return new G_(this.track)},t}(),q_=function(){function t(a,r,i){this.isClosed=!1,this.parentElement=a,this.mediaStream=r,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),a.append(this.surface)}return t.prototype.createVideoElement=function(a){var r=document.createElement("video");return r.style.width="".concat(a,"px"),r.style.display="block",r.muted=!0,r.setAttribute("muted","true"),r.playsInline=!0,r},t.prototype.setupSurface=function(){var a=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var r=function(){var i=a.surface.clientWidth,l=a.surface.clientHeight;a.callbacks.onRenderSurfaceReady(i,l),a.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(a,r,i,l){return Yu(this,void 0,void 0,function(){var d,f;return Wu(this,function(h){switch(h.label){case 0:return d=new t(a,r,l),i.aspectRatio?(f={aspectRatio:i.aspectRatio},[4,d.getFirstTrackOrFail().applyConstraints(f)]):[3,2];case 1:h.sent(),h.label=2;case 2:return d.setupSurface(),[2,d]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(a){this.failIfClosed();var r=this,i=function(){setTimeout(a,200),r.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(a){return Yu(this,void 0,void 0,function(){return Wu(this,function(r){if("aspectRatio"in a)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(a)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var a=this;return new Promise(function(r,i){var l=a.mediaStream.getVideoTracks(),d=l.length,f=0;a.mediaStream.getVideoTracks().forEach(function(h){a.mediaStream.removeTrack(h),h.stop(),++f,f>=d&&(a.isClosed=!0,a.parentElement.removeChild(a.surface),r())})})},t.prototype.getCapabilities=function(){return new X_(this.getFirstTrackOrFail())},t}(),$_=function(){function t(a){this.mediaStream=a}return t.prototype.render=function(a,r,i){return Yu(this,void 0,void 0,function(){return Wu(this,function(l){return[2,q_.create(a,this.mediaStream,r,i)]})})},t.create=function(a){return Yu(this,void 0,void 0,function(){var r,i;return Wu(this,function(l){switch(l.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return r={audio:!1,video:a},[4,navigator.mediaDevices.getUserMedia(r)];case 1:return i=l.sent(),[2,new t(i)]}})})},t}(),Pb=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},zb=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Y_=function(){function t(){}return t.failIfNotSupported=function(){return Pb(this,void 0,void 0,function(){return zb(this,function(a){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(a){return Pb(this,void 0,void 0,function(){return zb(this,function(r){return[2,$_.create(a)]})})},t}(),W_=function(t,a,r,i){function l(d){return d instanceof r?d:new r(function(f){f(d)})}return new(r||(r=Promise))(function(d,f){function h(w){try{p(i.next(w))}catch(j){f(j)}}function b(w){try{p(i.throw(w))}catch(j){f(j)}}function p(w){w.done?d(w.value):l(w.value).then(h,b)}p((i=i.apply(t,a||[])).next())})},K_=function(t,a){var r={label:0,sent:function(){if(d[0]&1)throw d[1];return d[1]},trys:[],ops:[]},i,l,d,f;return f={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function h(p){return function(w){return b([p,w])}}function b(p){if(i)throw new TypeError("Generator is already executing.");for(;f&&(f=0,p[0]&&(r=0)),r;)try{if(i=1,l&&(d=p[0]&2?l.return:p[0]?l.throw||((d=l.return)&&d.call(l),0):l.next)&&!(d=d.call(l,p[1])).done)return d;switch(l=0,d&&(p=[p[0]&2,d.value]),p[0]){case 0:case 1:d=p;break;case 4:return r.label++,{value:p[1],done:!1};case 5:r.label++,l=p[1],p=[0];continue;case 7:p=r.ops.pop(),r.trys.pop();continue;default:if(d=r.trys,!(d=d.length>0&&d[d.length-1])&&(p[0]===6||p[0]===2)){r=0;continue}if(p[0]===3&&(!d||p[1]>d[0]&&p[1]<d[3])){r.label=p[1];break}if(p[0]===6&&r.label<d[1]){r.label=d[1],d=p;break}if(d&&r.label<d[2]){r.label=d[2],r.ops.push(p);break}d[2]&&r.ops.pop(),r.trys.pop();continue}p=a.call(t,r)}catch(w){p=[6,w],l=0}finally{i=d=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Z_=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var a=MediaStreamTrack;return MediaStreamTrack&&a.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var a=cc.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(a=cc.insecureContextCameraQueryError()),Promise.reject(a)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var a=location.host.split(":")[0];return a==="127.0.0.1"||a==="localhost"},t.getCamerasFromMediaDevices=function(){return W_(this,void 0,void 0,function(){var a,r,i,l,d,f,h;return K_(this,function(b){switch(b.label){case 0:return a=function(p){for(var w=p.getVideoTracks(),j=0,C=w;j<C.length;j++){var _=C[j];_.enabled=!1,_.stop(),p.removeTrack(_)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return r=b.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=b.sent(),l=[],d=0,f=i;d<f.length;d++)h=f[d],h.kind==="videoinput"&&l.push({id:h.deviceId,label:h.label});return a(r),[2,l]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(a,r){var i=function(d){for(var f=[],h=0,b=d;h<b.length;h++){var p=b[h];p.kind==="video"&&f.push({id:p.id,label:p.label})}a(f)},l=MediaStreamTrack;l.getSources(i)})},t}(),aa;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(aa||(aa={}));var Q_=function(){function t(){this.state=aa.NOT_STARTED,this.onGoingTransactionNewState=aa.UNKNOWN}return t.prototype.directTransition=function(a){this.failIfTransitionOngoing(),this.validateTransition(a),this.state=a},t.prototype.startTransition=function(a){return this.failIfTransitionOngoing(),this.validateTransition(a),this.onGoingTransactionNewState=a,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===aa.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var a=this.onGoingTransactionNewState;this.onGoingTransactionNewState=aa.UNKNOWN,this.directTransition(a)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===aa.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=aa.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==aa.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(a){switch(this.state){case aa.UNKNOWN:throw"Transition from unknown is not allowed";case aa.NOT_STARTED:this.failIfNewStateIs(a,[aa.PAUSED]);break;case aa.SCANNING:break;case aa.PAUSED:break}},t.prototype.failIfNewStateIs=function(a,r){for(var i=0,l=r;i<l.length;i++){var d=l[i];if(a===d)throw"Cannot transition from ".concat(this.state," to ").concat(a)}},t}(),J_=function(){function t(a){this.stateManager=a}return t.prototype.startTransition=function(a){return this.stateManager.startTransition(a)},t.prototype.directTransition=function(a){this.stateManager.directTransition(a)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===aa.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==aa.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===aa.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===aa.PAUSED},t}(),eA=function(){function t(){}return t.create=function(){return new J_(new Q_)},t}(),tA=function(){var t=function(a,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,l){i.__proto__=l}||function(i,l){for(var d in l)Object.prototype.hasOwnProperty.call(l,d)&&(i[d]=l[d])},t(a,r)};return function(a,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(a,r);function i(){this.constructor=a}a.prototype=r===null?Object.create(r):(i.prototype=r.prototype,new i)}}(),Vs=function(t){tA(a,t);function a(){return t!==null&&t.apply(this,arguments)||this}return a.DEFAULT_WIDTH=300,a.DEFAULT_WIDTH_OFFSET=2,a.FILE_SCAN_MIN_HEIGHT=300,a.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,a.MIN_QR_BOX_SIZE=50,a.SHADED_LEFT=1,a.SHADED_RIGHT=2,a.SHADED_TOP=3,a.SHADED_BOTTOM=4,a.SHADED_REGION_ELEMENT_ID="qr-shaded-region",a.VERBOSE=!1,a.BORDER_SHADER_DEFAULT_COLOR="#ffffff",a.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",a}(D_),rA=function(){function t(a,r){this.logger=r,this.fps=Vs.SCAN_DEFAULT_FPS,a?(a.fps&&(this.fps=a.fps),this.disableFlip=a.disableFlip===!0,this.qrbox=a.qrbox,this.aspectRatio=a.aspectRatio,this.videoConstraints=a.videoConstraints):this.disableFlip=Vs.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?ow.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!Ei(this.qrbox)},t.create=function(a,r){return new t(a,r)},t}(),uc=function(){function t(a,r){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(a))throw"HTML Element with id=".concat(a," not found");this.elementId=a,this.verbose=!1;var i;typeof r=="boolean"?this.verbose=r===!0:r&&(i=r,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new I_(this.verbose),this.qrcode=new U_(this.getSupportedFormats(r),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=eA.create()}return t.prototype.start=function(a,r,i,l){var d=this;if(!a)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var f;l?f=l:f=this.verbose?this.logger.log:function(){};var h=rA.create(r,this.logger);this.clearElement();var b=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?b=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=b,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Vs.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var j=this,C=this.stateManagerProxy.startTransition(aa.SCANNING);return new Promise(function(_,R){var A=p?h.videoConstraints:j.createVideoConstraints(a);if(!A){C.cancel(),R("videoConstraints should be defined");return}var O={};(!p||h.aspectRatio)&&(O.aspectRatio=h.aspectRatio);var I={onRenderSurfaceReady:function(M,T){j.setupUi(M,T,h),j.isScanning=!0,j.foreverScan(h,i,f)}};Y_.failIfNotSupported().then(function(M){M.create(A).then(function(T){return T.render(d.element,O,I).then(function(B){j.renderedCamera=B,C.execute(),_(null)}).catch(function(B){C.cancel(),R(B)})}).catch(function(T){C.cancel(),R(cc.errorGettingUserMedia(T))})}).catch(function(M){C.cancel(),R(cc.cameraStreamingNotSupported())})})},t.prototype.pause=function(a){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(aa.PAUSED),this.showPausedState(),(Ei(a)||a!==!0)&&(a=!1),a&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var a=this,r=function(){a.stateManagerProxy.directTransition(aa.SCANNING),a.hidePausedState()};if(!this.renderedCamera.isPaused()){r();return}this.renderedCamera.resume(function(){r()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var a=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var r=this.stateManagerProxy.startTransition(aa.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(a.element){var d=document.getElementById(Vs.SHADED_REGION_ELEMENT_ID);d&&a.element.removeChild(d)}},l=this;return this.renderedCamera.close().then(function(){return l.renderedCamera=null,l.element&&(l.element.removeChild(l.canvasElement),l.canvasElement=null),i(),l.qrRegion&&(l.qrRegion=null),l.context&&(l.context=null),r.execute(),l.hidePausedState(),l.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(a,r){return this.scanFileV2(a,r).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(a,r){var i=this;if(!a||!(a instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ei(r)&&(r=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(l,d){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(a);var f=new Image;f.onload=function(){var h=f.width,b=f.height,p=document.getElementById(i.elementId),w=p.clientWidth?p.clientWidth:Vs.DEFAULT_WIDTH,j=Math.max(p.clientHeight?p.clientHeight:b,Vs.FILE_SCAN_MIN_HEIGHT),C=i.computeCanvasDrawConfig(h,b,w,j);if(r){var _=i.createCanvasElement(w,j,"qr-canvas-visible");_.style.display="inline-block",p.appendChild(_);var R=_.getContext("2d");if(!R)throw"Unable to get 2d context from canvas";R.canvas.width=w,R.canvas.height=j,R.drawImage(f,0,0,h,b,C.x,C.y,C.width,C.height)}var A=Vs.FILE_SCAN_HIDDEN_CANVAS_PADDING,O=Math.max(f.width,C.width),I=Math.max(f.height,C.height),M=O+2*A,T=I+2*A,B=i.createCanvasElement(M,T);p.appendChild(B);var H=B.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=M,H.canvas.height=T,H.drawImage(f,0,0,h,b,A,A,O,I);try{i.qrcode.decodeRobustlyAsync(B).then(function(U){l(Ob.createFromQrcodeResult(U))}).catch(d)}catch(U){d("QR code parse error, error = ".concat(U))}},f.onerror=d,f.onabort=d,f.onstalled=d,f.onsuspend=d,f.src=URL.createObjectURL(a)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return Z_.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(a){if(a){if(!ow.isMediaStreamConstraintsValid(a,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(a)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(a){var r=[Ct.QR_CODE,Ct.AZTEC,Ct.CODABAR,Ct.CODE_39,Ct.CODE_93,Ct.CODE_128,Ct.DATA_MATRIX,Ct.MAXICODE,Ct.ITF,Ct.EAN_13,Ct.EAN_8,Ct.PDF_417,Ct.RSS_14,Ct.RSS_EXPANDED,Ct.UPC_A,Ct.UPC_E,Ct.UPC_EAN_EXTENSION];if(!a||typeof a=="boolean"||!a.formatsToSupport)return r;if(!Array.isArray(a.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(a.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],l=0,d=a.formatsToSupport;l<d.length;l++){var f=d[l];R_(f)?i.push(f):this.logger.warn("Invalid format: ".concat(f," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(a){if(Ei(a))return!0;if(!Ei(a.useBarCodeDetectorIfSupported))return a.useBarCodeDetectorIfSupported!==!1;if(Ei(a.experimentalFeatures))return!0;var r=a.experimentalFeatures;return Ei(r.useBarCodeDetectorIfSupported)?!0:r.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(a,r,i){var l=this,d=i.qrbox;this.validateQrboxConfig(d);var f=this.toQrdimensions(a,r,d),h=function(p){if(p<Vs.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Vs.MIN_QR_BOX_SIZE,"px.")},b=function(p){return p>a&&(l.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=a),p};h(f.width),h(f.height),f.width=b(f.width)},t.prototype.validateQrboxConfig=function(a){if(typeof a!="number"&&typeof a!="function"&&(a.width===void 0||a.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(a,r,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(a,r)}catch(l){throw new Error("qrbox config was passed as a function but it failed with unknown error"+l)}return i},t.prototype.setupUi=function(a,r,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(a,r,i);var l=Ei(i.qrbox)?{width:a,height:r}:i.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(a,r,l);d.height>r&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var f=i.isShadedBoxEnabled()&&d.height<=r,h={x:0,y:0,width:a,height:r},b=f?this.getShadedRegionBounds(a,r,d):h,p=this.createCanvasElement(b.width,b.height),w={willReadFrequently:!0},j=p.getContext("2d",w);j.canvas.width=b.width,j.canvas.height=b.height,this.element.append(p),f&&this.possiblyInsertShadingElement(this.element,a,r,d),this.createScannerPausedUiElement(this.element),this.qrRegion=b,this.context=j,this.canvasElement=p},t.prototype.createScannerPausedUiElement=function(a){var r=document.createElement("div");r.innerText=cc.scannerPaused(),r.style.display="none",r.style.position="absolute",r.style.top="0px",r.style.zIndex="1",r.style.background="rgba(9, 9, 9, 0.46)",r.style.color="#FFECEC",r.style.textAlign="center",r.style.width="100%",a.appendChild(r),this.scannerPausedUiElement=r},t.prototype.scanContext=function(a,r){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(l){return a(l.text,Ob.createFromQrcodeResult(l)),i.possiblyUpdateShaders(!0),!0}).catch(function(l){i.possiblyUpdateShaders(!1);var d=cc.codeParseError(l);return r(d,O_.createFrom(d)),!1})},t.prototype.foreverScan=function(a,r,i){var l=this;if(this.shouldScan&&this.renderedCamera){var d=this.renderedCamera.getSurface(),f=d.videoWidth/d.clientWidth,h=d.videoHeight/d.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var b=this.qrRegion.width*f,p=this.qrRegion.height*h,w=this.qrRegion.x*f,j=this.qrRegion.y*h;this.context.drawImage(d,w,j,b,p,0,0,this.qrRegion.width,this.qrRegion.height);var C=function(){l.foreverScanTimeout=setTimeout(function(){l.foreverScan(a,r,i)},l.getTimeoutFps(a.fps))};this.scanContext(r,i).then(function(_){!_&&a.disableFlip!==!0?(l.context.translate(l.context.canvas.width,0),l.context.scale(-1,1),l.scanContext(r,i).finally(function(){C()})):C()}).catch(function(_){l.logger.logError("Error happend while scanning context",_),C()})}},t.prototype.createVideoConstraints=function(a){if(typeof a=="string")return{deviceId:{exact:a}};if(typeof a=="object"){var r="facingMode",i="deviceId",l={user:!0,environment:!0},d="exact",f=function(R){if(R in l)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(R,"'")},h=Object.keys(a);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var b=Object.keys(a)[0];if(b!==r&&b!==i)throw"Only '".concat(r,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(b===r){var p=a.facingMode;if(typeof p=="string"){if(f(p))return{facingMode:p}}else if(typeof p=="object")if(d in p){if(f(p["".concat(d)]))return{facingMode:{exact:p["".concat(d)]}}}else throw"'facingMode' should be string or object with"+" ".concat(d," as key.");else{var w=typeof p;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var j=a.deviceId;if(typeof j=="string")return{deviceId:j};if(typeof j=="object"){if(d in j)return{deviceId:{exact:j["".concat(d)]}};throw"'deviceId' should be string or object with"+" ".concat(d," as key.")}else{var C=typeof j;throw"Invalid type of 'deviceId' = ".concat(C)}}}var _=typeof a;throw"Invalid type of 'cameraIdOrConfig' = ".concat(_)},t.prototype.computeCanvasDrawConfig=function(a,r,i,l){if(a<=i&&r<=l){var d=(i-a)/2,f=(l-r)/2;return{x:d,y:f,width:a,height:r}}else{var h=a,b=r;return a>i&&(r=i/a*r,a=i),r>l&&(a=l/r*a,r=l),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(b)+" to ".concat(a,"X").concat(r,".")),this.computeCanvasDrawConfig(a,r,i,l)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var a=document.getElementById(this.elementId);a&&(a.innerHTML="")},t.prototype.possiblyUpdateShaders=function(a){this.qrMatch!==a&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(r){r.style.backgroundColor=a?Vs.BORDER_SHADER_MATCH_COLOR:Vs.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=a)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(a,r,i){var l=a,d=r,f=document.createElement("canvas");return f.style.width="".concat(l,"px"),f.style.height="".concat(d,"px"),f.style.display="none",f.id=Ei(i)?"qr-canvas":i,f},t.prototype.getShadedRegionBounds=function(a,r,i){if(i.width>a||i.height>r)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(a-i.width)/2,y:(r-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(a,r,i,l){if(!(r-l.width<1||i-l.height<1)){var d=document.createElement("div");d.style.position="absolute";var f=(r-l.width)/2,h=(i-l.height)/2;if(d.style.borderLeft="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderRight="".concat(f,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),d.style.boxSizing="border-box",d.style.top="0px",d.style.bottom="0px",d.style.left="0px",d.style.right="0px",d.id="".concat(Vs.SHADED_REGION_ELEMENT_ID),r-l.width<11||i-l.height<11)this.hasBorderShaders=!1;else{var b=5,p=40;this.insertShaderBorders(d,p,b,-b,null,0,!0),this.insertShaderBorders(d,p,b,-b,null,0,!1),this.insertShaderBorders(d,p,b,null,-b,0,!0),this.insertShaderBorders(d,p,b,null,-b,0,!1),this.insertShaderBorders(d,b,p+b,-b,null,-b,!0),this.insertShaderBorders(d,b,p+b,null,-b,-b,!0),this.insertShaderBorders(d,b,p+b,-b,null,-b,!1),this.insertShaderBorders(d,b,p+b,null,-b,-b,!1),this.hasBorderShaders=!0}a.append(d)}},t.prototype.insertShaderBorders=function(a,r,i,l,d,f,h){var b=document.createElement("div");b.style.position="absolute",b.style.backgroundColor=Vs.BORDER_SHADER_DEFAULT_COLOR,b.style.width="".concat(r,"px"),b.style.height="".concat(i,"px"),l!==null&&(b.style.top="".concat(l,"px")),d!==null&&(b.style.bottom="".concat(d,"px")),h?b.style.left="".concat(f,"px"):b.style.right="".concat(f,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(b),a.appendChild(b)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(a){return 1e3/a},t}(),Ub;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Ub||(Ub={}));function dw(){const{bill_id:t}=fn(),[a,r]=E.useState(!1),[i,l]=E.useState(null),[d,f]=E.useState(!1),[h,b]=E.useState(null),[p,w]=E.useState([]),[j,C]=E.useState(!1),[_,R]=E.useState(""),[A,O]=E.useState(null),[I,M]=E.useState(""),T=E.useRef(null),B=E.useRef(null),H=E.useRef(null),U=xr(),{auth:L}=E.useContext(Ir),[P,z]=E.useState("environment"),K=async()=>{try{if(!t)return;const Y=await Se.get(`/user-bills/users/${L.user.id}/bills`);if(Y.data.success&&Array.isArray(Y.data.data)){const ae=Y.data.data.find(se=>se.id===t);ae?b(ae):(le.error("You are not assigned to this bill"),U("/my-bills"))}}catch(Y){console.error("Error fetching bill details:",Y),le.error("Error loading bill information")}},te=async()=>{try{const Y=await Se.get(`/user-apartments/users/${L.user.id}/apartments`);return Y.data.success&&Array.isArray(Y.data.data)?(w(Y.data.data),Y.data.data):[]}catch(Y){return console.error("Error fetching user apartments:",Y),le.error("Error loading your assigned apartments"),[]}},V=async(Y,ae)=>{try{if(!Y)return{access:!1,reason:"Invalid house ID"};const se=await Se.get(`/houses/${Y}`);if(!se.data.success||!se.data.data)return{access:!1,reason:"House not found in the system"};const Z=se.data.data;let Re=null;if(Z.apartment_id)try{const ye=await Se.get(`/apartments/${Z.apartment_id}`);ye.data.success&&(Re=ye.data.data)}catch(ye){console.error("Error fetching apartment:",ye)}let je=null;if(Z.floor_id)try{const ye=await Se.get(`/floors/${Z.floor_id}`);ye.data.success&&(je=ye.data.data)}catch(ye){console.error("Error fetching floor:",ye)}const Ue={...Z,apartment:Re,floor:je};if(O(Ue),!ae.some(ye=>ye.id===Z.apartment_id))return{access:!1,reason:`You are not assigned to "${Re?.name||"this apartment"}"`};let at=!1;try{const ye=await Se.get(`/bill-assignments/house-details?house_id=${Y}&apartment_id=${Z.apartment_id}`);ye.data.success&&(at=(Array.isArray(ye.data.data)?ye.data.data:ye.data.data?.bills||[]).some(Fe=>Fe.bill_id===t||Fe.id===t))}catch(ye){console.error("Error checking bill assignments:",ye);try{const Ae=await Se.get(`/user-bills/users/${L.user.id}/bills`);Ae.data.success&&Array.isArray(Ae.data.data)&&Ae.data.data.find(Ce=>Ce.id===t)&&(at=!0)}catch(Ae){console.error("Alternative check failed:",Ae)}}return at?h?.billtype?.toLowerCase()!=="measurable"?{access:!1,reason:`"${h?.bill_name||"Selected bill"}" is not a measurable bill`}:{access:!0,houseData:Ue,apartmentId:Z.apartment_id,floorId:Z.floor_id,houseId:Z.id}:{access:!1,reason:`This house does not have "${h?.bill_name||"the selected bill"}" assigned`}}catch(se){if(console.error("Error checking house access:",se),se.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const Z=se.response?.status;return Z===401?{access:!1,reason:"Session expired. Please login again."}:Z===403?{access:!1,reason:"Access denied to this resource."}:Z===404?{access:!1,reason:"House not found."}:Z===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},ne=async()=>{if(!I.trim()){le.error("Please enter a house ID");return}try{f(!0),T.current&&T.current.clear().catch(Z=>{console.log("Scanner clear error:",Z)}),r(!1);const Y=I.trim();l({houseId:Y,source:"manual"});const ae=await te(),se=await V(Y,ae);se.access?(C(!0),le.success(`Access granted! House ${A?.house_id||Y} has ${h?.bill_name} bill.`)):(C(!1),R(se.reason||"Access denied"),le.error(se.reason||"Access denied"))}catch(Y){console.error("Error processing manual input:",Y),le.error(Y.message||"Invalid house ID. Please enter a valid house ID.")}finally{f(!1)}},ie=Y=>{M(Y.target.value)},X=Y=>{Y.key==="Enter"&&ne()},q=(Y,ae)=>{if(!Y||Y.length===0)return null;const se=Z=>(Z||"").toLowerCase();if(ae==="environment"){const Z=Y.find(Re=>/back|rear|environment/.test(se(Re.label)));return Z?Z.id:Y[Y.length-1].id}else{const Z=Y.find(Re=>/front|user|face/.test(se(Re.label)));return Z?Z.id:Y[0].id}},ce=async(Y,ae)=>{const se=Y||P;if(r(!0),l(null),C(!1),R(""),O(null),M(""),T.current){try{await T.current.stop()}catch{}try{T.current.clear()}catch{}T.current=null}const Z=document.getElementById("qr-reader");Z&&(Z.innerHTML="");try{const Re=await uc.getCameras();let je=ae||q(Re,se)||Re[0]&&Re[0].id;const Ue=new uc("qr-reader");T.current=Ue;const Me={fps:10,qrbox:{width:250,height:250}};await Ue.start({deviceId:{exact:je}},Me,at=>{oe(at)},at=>{}),H.current=je,z(se)}catch(Re){console.error("Scanner initialization error:",Re),le.error("Failed to initialize scanner. Please refresh and try again."),r(!1)}},we=async()=>{const Y=P==="environment"?"user":"environment";try{const ae=await uc.getCameras();let se=q(ae,Y)||ae[0]&&ae[0].id;if(se&&H.current&&se===H.current&&ae.length>1){const Z=ae.find(Re=>Re.id!==H.current);Z&&(se=Z.id)}if(T.current){try{await T.current.stop()}catch{}try{T.current.clear()}catch{}T.current=null}z(Y),a&&setTimeout(()=>ce(Y,se),250)}catch(ae){console.error("Error toggling camera direction:",ae)}},oe=async Y=>{try{if(f(!0),T.current){try{await T.current.stop()}catch{}try{T.current.clear()}catch{}T.current=null,H.current=null}r(!1),M("");const ae=Y.trim();l({houseId:ae,source:"qr"});const se=await te(),Z=await V(ae,se);Z.access?(C(!0),le.success("Access granted! House")):(C(!1),R(Z.reason||"Access denied"),le.error(Z.reason||"Access denied"))}catch(ae){console.error("Error processing QR code:",ae),le.error(ae.message||"Invalid QR code. Please scan a valid house QR code."),r(!1)}finally{f(!1)}},fe=async()=>{if(T.current){try{try{await T.current.stop()}catch{}try{T.current.clear()}catch{}console.log("Scanner stopped and cleared on reset")}catch(Y){console.log("Scanner clear error on reset:",Y)}T.current=null,H.current=null}B.current&&(clearInterval(B.current),B.current=null),r(!1),l(null),C(!1),R(""),O(null),M("")},re=()=>{U("/my-bills")},Q=()=>{if(!A||!i){le.error("House data not available");return}U(`/calculate-measurable-bill/${t}`,{state:{scannedData:i,billData:h,actualBillId:t,houseData:A,houseId:A.id,source:i.source}})};return E.useEffect(()=>()=>{if(T.current){try{T.current.stop().catch?.(()=>{})}catch{}try{T.current.clear()}catch{}H.current=null}},[]),E.useEffect(()=>{L?.user?.id&&t&&(K(),te())},[L?.user?.id,t]),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(vr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:we,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${P==="environment"?"Front":"Back"} Camera`,children:e.jsx(Lv,{size:16})}),e.jsx("button",{onClick:fe,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",children:e.jsx(mr,{size:16})})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 dark:text-gray-100 text-gray-700"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Position QR code within frame ",P==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Point your camera at a house QR code to scan"}),e.jsxs("p",{className:"text-xs mt-1",children:["Scanning for: ",h?.bill_name]}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Xt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Fetching house details and checking access..."})]}),i&&!d&&!a&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Details"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Information fetched from system"})]}),e.jsxs("button",{onClick:fe,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(mc,{size:16}),e.jsx("span",{children:"Scan Another"})]})]}),j?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(dn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Access Granted "}),e.jsxs("p",{className:"text-green-700 dark:text-green-400",children:["You can calculate ",h?.bill_name," for this house"]}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:Q,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",children:[e.jsx(yr,{size:16}),"Calculate Bill"]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Na,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Access Denied"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:_}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsxs("p",{children:["Requirements to calculate ",h?.bill_name,":"]}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House must be in your assigned apartment"}),e.jsxs("li",{children:['House must have "',h?.bill_name,'" assigned']}),e.jsx("li",{children:"House must exist in the system"})]})]})]})]})})]}),!i&&!a&&!d&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsxs("div",{className:"max-w-md mx-auto mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Enter House ID:"}),e.jsx("input",{type:"text",className:"w-full mt-2 p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:I,onChange:ie,onKeyPress:X,placeholder:"e.g., H001-458-982"}),e.jsx("div",{children:e.jsxs("button",{onClick:ne,className:"mt-4 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center gap-2 w-full",children:[e.jsx(yr,{size:16}),"Check Access"]})})]}),e.jsx("div",{className:"max-w-md mx-auto mb-2",children:e.jsx("label",{className:"font-bold text-2xl text-gray-700 dark:text-gray-100",children:"Or"})}),e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(z0,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Scan House QR Code"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:["Scan a house QR code to check if it has ",e.jsx("strong",{children:h?.bill_name})," assigned"]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"QR codes contain only House ID. System will fetch all details automatically."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("button",{onClick:ce,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Iv,{size:20}),"Start Scanning"]}),e.jsx("button",{onClick:re,className:"w-full px-6 py-3 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Back to My Bills"})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function aA(){const{bill_id:t}=fn(),a=xr(),r=Rn(),{auth:i}=E.useContext(Ir),l=r.state?.scannedData||null,d=r.state?.billData||null,f=r.state?.houseData||null,h=r.state?.actualBillId||t,b=r.state?.source||"qr",[p,w]=E.useState(!1),[j,C]=E.useState(null),[_,R]=E.useState([]),[A,O]=E.useState([]),[I,M]=E.useState(null),[T,B]=E.useState(null),[H,U]=E.useState(""),L=E.useMemo(()=>{const Ae=new Date;return Ae.setDate(Ae.getDate()+10),Ae.toISOString().split("T")[0]},[]);E.useEffect(()=>{H||U(L)},[L]);const[P,z]=E.useState({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:"",current_reading:"",used_units:"",total_amount:""}),[K,te]=E.useState(null),[V,ne]=E.useState([]),[ie,X]=E.useState(!1),[q,ce]=E.useState(!1),we=Tr.useRef(P.month),oe=Tr.useRef(P.year),fe=Ae=>["January","February","March","April","May","June","July","August","September","October","November","December"][Ae-1]||"";E.useEffect(()=>{if(!t||!h){le.error("Bill ID is missing"),a("/my-bills");return}if(!l||!f||!d){le.error("House data is incomplete. Please go back and try again."),a(`/measurable-bills/${t}`);return}},[t,h,l,f,d,a]);const re=async()=>{try{const Ae=await Se.get(`/billranges/bills/${h}`);let Fe=[];if(Array.isArray(Ae.data))Fe=Ae.data;else if(Ae.data.data&&Array.isArray(Ae.data.data))Fe=Ae.data.data;else if(Ae.data.success&&Ae.data.data)Array.isArray(Ae.data.data)?Fe=Ae.data.data:typeof Ae.data.data=="object"&&(Fe=Object.values(Ae.data.data));else if(typeof Ae.data=="object"){for(const Ce in Ae.data)if(Array.isArray(Ae.data[Ce])){Fe=Ae.data[Ce];break}}if(Fe.length>0){const Ce=Fe.sort((Je,be)=>parseFloat(Je.fromRange||Je.from_range||Je.from||0)-parseFloat(be.fromRange||be.from_range||be.from||0));R(Ce),Ce.length>0&&M(Ce[0])}else R([]),le.warning("No bill ranges data available in response")}catch(Ae){console.error("Error loading bill ranges:",Ae),le.error("Failed to load bill ranges."),R([])}},Q=async()=>{try{const Ae=fe(P.month),Fe=P.month;O([]),B(null);let Ce=null,Je=null;try{Ce=await Se.get("/billprice",{params:{bill_id:h,month:Ae,year:P.year}})}catch(me){Je=me;try{Ce=await Se.get("/billprice",{params:{bill_id:h,month:Fe,year:P.year}})}catch(Pe){Je=Pe;try{Ce=await Se.get(`/billprice/${h}/${Ae}/${P.year}`)}catch(pe){Je=pe;try{Ce=await Se.get(`/billprice/${h}/${Fe}/${P.year}`)}catch(lt){Je=lt;try{Ce=await Se.get("/api/billprice",{params:{bill_id:h,month:Ae,year:P.year}})}catch(st){throw Je=st,new Error("All API attempts failed")}}}}}let be=[];if(Ce.data?.success)Array.isArray(Ce.data.data)?be=Ce.data.data:Ce.data.data&&typeof Ce.data.data=="object"?be=Object.values(Ce.data.data):be=[];else if(Array.isArray(Ce.data))be=Ce.data;else if(Ce.data?.data&&Array.isArray(Ce.data.data))be=Ce.data.data;else if(Ce.data&&typeof Ce.data=="object"){for(const me in Ce.data)if(Array.isArray(Ce.data[me])){be=Ce.data[me];break}}const dt=be.filter(me=>{const Pe=me.month,pe=me.year,lt=Pe===Ae||Pe===Fe.toString(),st=pe===P.year||pe===P.year.toString();return lt&&st});dt.length>0?(O(dt),I&&Y(dt)):be.length>0?(O(be),I&&Y(be),le.success(`Loaded ${be.length} price(s) for ${Ae}`)):(O([]),le.info(`No prices found for ${Ae} ${P.year}. Please set prices first.`))}catch(Ae){console.error("Error loading bill prices:",Ae),O([]),B(null),le.error(`Failed to load prices for ${fe(P.month)}. Check console.`)}},Y=(Ae=A)=>{if(!I||!Ae||Ae.length===0){B(null);return}const Fe=Ae.find(Ce=>{const Je=Ce.billrange_id||Ce.range_id||Ce.id,be=I.id||I._id;return Je&&Je.toString()===be.toString()});B(Fe||null)},ae=async()=>{let Ae=null;if(Ae=l?.houseId||l?.hse,!Ae||!h){z(Fe=>({...Fe,previous_reading:"0"}));return}try{X(!0);const Fe=await Se.get("/generate-measurable-bills/previous-reading",{params:{house_id:Ae,bill_id:h}});if(Fe.data.success){const Ce=Fe.data.data?.current_reading||0;z(Je=>({...Je,previous_reading:Ce.toString()}))}}catch(Fe){console.error(" Error loading previous reading:",Fe),Fe.response?.status===404?(console.log("No previous reading found (404). Starting from 0."),z(Ce=>({...Ce,previous_reading:"0"}))):(le.error("Could not load previous reading"),z(Ce=>({...Ce,previous_reading:"0"})))}finally{X(!1)}},se=async(Ae,Fe)=>{const Ce={...P,[Ae]:parseInt(Fe)};z(Ce);const Je=Ae==="month"&&Fe!==we.current,be=Ae==="year"&&Fe!==oe.current;(Je||be)&&(Ae==="month"&&(we.current=Fe),Ae==="year"&&(oe.current=Fe),O([]),B(null),te(null),ne([]),z(dt=>({...dt,[Ae]:parseInt(Fe),total_amount:"",used_units:""})),Q(),ae())},Z=Ae=>{const{name:Fe,value:Ce}=Ae.target;if(Fe==="month"||Fe==="year"){se(Fe,Ce);return}const Je={...P,[Fe]:Ce};if(z(Je),Fe==="current_reading"){const be=parseFloat(Ce)||0,dt=parseFloat(P.previous_reading)||0,me=be-dt;if(me>=0)if(Je.used_units=me.toString(),Je.total_amount="",me>0&&_.length>0&&A.length>0){const{totalAmount:Pe,details:pe}=Re(me);Je.total_amount=Pe.toFixed(2),je(me,Pe,pe)}else te(null),ne([]);else le.error("Current reading cannot be less than previous reading")}z(Je)},Re=Ae=>{if(!_.length||!A.length)return{totalAmount:0,details:[]};const Fe=[..._].sort((dt,me)=>parseFloat(dt.fromRange||dt.from_range||dt.from||0)-parseFloat(me.fromRange||me.from_range||me.from||0));let Ce=parseFloat(Ae),Je=0;const be=[];for(let dt=0;dt<Fe.length&&Ce>0;dt++){const me=Fe[dt],Pe=A.find(Dt=>{const or=Dt.billrange_id||Dt.range_id||Dt.id,Lt=me.id||me._id;return or&&or.toString()===Lt.toString()});if(!Pe){console.warn(`No price found for range ${me.id}`);continue}const pe=parseFloat(me.fromRange||me.from_range||me.from||0),lt=me.toRange?parseFloat(me.toRange||me.to_range||me.to):1/0,st=parseFloat(Pe.unitprice||Pe.uniprice||0),jt=parseFloat(Pe.fixedamount||0);let At=0;if(lt===1/0)At=Ce,Ce=0;else{const Dt=lt-pe+1;dt===0?Ae<=Dt?At=Ae:At=Dt:At=Math.min(Dt,Ce),Ce-=At}if(At>0){const Dt=At*st+jt;Je+=Dt,be.push({range:`${pe} - ${lt===1/0?"":lt}`,units:At,unitPrice:st,fixedAmount:jt,rangeAmount:Dt,calculation:`${At}  ${st} + ${jt} = ${Dt.toFixed(2)}`})}}return{totalAmount:Je,details:be}},je=(Ae,Fe,Ce)=>{te({used_units:Ae,total_amount:Fe,calculated_at:new Date().toISOString()}),ne(Ce)},Ue=async()=>{if(!K){le.error("Please calculate the bill first");return}const Ae=l?.houseId||l?.hse,Fe=f?.apartment_id,Ce=f?.floor_id;if(!Ae||!Fe||!Ce){le.error("House information is missing. Please go back and try again."),console.error(" Missing data:",{houseId:Ae,apartmentId:Fe,floorId:Ce,source:b,scannedData:l,houseDetails:f});return}try{ce(!0);const Je={house_id:Ae,apartment_id:Fe,floor_id:Ce,bill_id:h,year:parseInt(P.year),month:fe(parseInt(P.month)),previous_reading:parseFloat(P.previous_reading)||0,current_reading:parseFloat(P.current_reading)||0,used_units:parseFloat(P.used_units)||K.used_units,totalAmount:parseFloat(P.total_amount)||K.total_amount,due_date:H||null,source:b},be=await Se.post("/generate-measurable-bills/from-calculation",Je);be.data.success?(le.success("Bill generated successfully!"),z({month:new Date().getMonth()+1,year:new Date().getFullYear(),previous_reading:P.current_reading,current_reading:"",used_units:"",total_amount:""}),te(null),ne([]),setTimeout(()=>{a(`/house-bill-meter/${t}`)},2e3)):le.error(be.data.message||"Failed to generate bill")}catch(Je){console.error("Error generating bill:",Je);let be="Failed to generate bill";Je.response?.data?.message?be=Je.response.data.message:Je.message&&(be=Je.message),le.error(be)}finally{ce(!1)}},Me=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}];new Date().getFullYear(),E.useEffect(()=>{if(P.used_units&&parseFloat(P.used_units)>0&&_.length>0&&A.length>0){const Ae=parseFloat(P.used_units),{totalAmount:Fe,details:Ce}=Re(Ae);z(Je=>({...Je,total_amount:Fe.toFixed(2)})),je(Ae,Fe,Ce)}},[_,A]),E.useEffect(()=>{I&&A.length>0&&Y()},[I,A]),E.useEffect(()=>{re(),ae(),we.current=P.month,oe.current=P.year},[h,l]),E.useEffect(()=>{h&&P.month&&P.year&&_.length>0&&Q()},[h,P.month,P.year,_.length]);const at=fe(P.month);return{houseId:f?.house_id||l?.houseId,apartment:f?.apartment?.name||"N/A",floor:f?.floor?.floor_id||"N/A",houseDatabaseId:f?.id},e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex",children:[e.jsx(vr,{}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsx(Hr,{}),e.jsx("main",{className:"flex-1 p-4 md:p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("button",{onClick:()=>a(`/house-bill-meter/${t}`),className:"mb-2 md:mb-3 flex items-center text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Scanner"]}),e.jsxs("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 dark:text-white",children:["Calculate Bill: ",d?.bill_name||"Measurable Bill"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1 text-sm md:text-base",children:b==="qr"?"QR Scanned House":"Manually Entered House"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-3 py-1 rounded-full text-xs ${b==="qr"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:b==="qr"?" QR Scan":" Manual Entry"}),e.jsxs("button",{onClick:()=>{re(),Q(),ae(),le.info("Refreshing data...")},className:"px-3 py-2 md:px-4 md:py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh Data"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 p-4 md:p-6",children:e.jsxs("form",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Month"}),e.jsx("select",{name:"month",value:P.month,onChange:Z,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,children:Me.map(Ae=>e.jsx("option",{value:Ae.value,children:Ae.label},Ae.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Year"}),e.jsx("input",{type:"number",name:"year",value:P.year,onChange:Z,min:"2025",max:"2030",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Due Date (Optional)"}),e.jsx("input",{type:"date",value:H,onChange:Ae=>U(Ae.target.value),className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-purple-500 dark:bg-gray-700 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Previous Reading (units)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",name:"previous_reading",value:P.previous_reading,onChange:Z,placeholder:"Previous reading",min:"0",step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0,readOnly:!0}),ie&&e.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 md:h-4 md:w-4 border-b-2 border-purple-600"})})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Auto-loaded from last bill"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Current Reading (units)"}),e.jsx("input",{type:"number",name:"current_reading",value:P.current_reading,onChange:Z,placeholder:"Enter current reading",min:P.previous_reading,step:"1",className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-sm md:text-base",required:!0}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Enter meter reading for ",at," ",P.year]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Used Units (auto-calculated)"}),e.jsx("input",{type:"number",name:"used_units",value:P.used_units,readOnly:!0,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white text-sm md:text-base"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Current reading - Previous reading"})]}),P.total_amount&&e.jsx("div",{className:"p-3 md:p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium text-sm md:text-base",children:"Total Amount:"}),e.jsxs("span",{className:"text-xl md:text-2xl font-bold text-green-600 dark:text-green-400",children:["Rs. ",parseFloat(P.total_amount).toFixed(2)]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsxs("button",{type:"button",onClick:()=>a(`/measurable-bills/${t}`),className:"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-300 py-3 px-4 rounded-lg font-medium hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors flex items-center justify-center text-sm md:text-base",children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),"Back to Scanner"]}),e.jsx("button",{type:"button",onClick:Ue,disabled:!K||q,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center text-sm md:text-base",children:q?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4 md:w-5 md:h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Generate Bill"]})})]})]})})})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function sA(){const[t,a]=E.useState([]),[r,i]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState(!1),[b,p]=E.useState(!1),{auth:w}=E.useContext(Ir),j=xr(),C=async()=>{try{i(!0);const M=await Se.get(`/user-bills/users/${w.user.id}/bills`);M.data.success?a(M.data.data||[]):(le.error("Failed to load bills"),a([]))}catch(M){console.error("Error fetching bills:",M),le.error("Error loading your bills"),a([])}finally{i(!1)}};E.useEffect(()=>{w?.user?.id&&C()},[w?.user?.id]);const _=t.filter(M=>M.bill_name?.toLowerCase().includes(l.toLowerCase())||M.billtype?.toLowerCase().includes(l.toLowerCase())),R=M=>{try{return new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch{return"N/A"}},A=M=>({measurable:{class:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:e.jsx(Lu,{size:12,className:"inline mr-1"})}})[M?.toLowerCase()]||{class:"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200",icon:e.jsx(yr,{size:12,className:"inline mr-1"})},O={totalBills:t.length,measurableBills:t.filter(M=>M.billtype?.toLowerCase()==="measurable").length},I=M=>{j(`/house-bill-meter/${M}`)};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:h})}),b&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>p(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${b?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:h})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${f?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"View all bills assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:O.totalBills})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Bills"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View all bills assigned to you"})]})]}),e.jsx("div",{className:"flex space-x-6 text-right",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:O.totalBills})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search bills by name, type, or description...",value:l,onChange:M=>d(M.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:r?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx(Xt,{size:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 text-gray-600 dark:text-gray-300",children:"Loading bills..."})]}):_.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ka,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:l?"No matching bills found":"No bills assigned"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:l?"Try adjusting your search terms":"You have not been assigned to any bills yet"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:_.map(M=>{const T=A(M.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ka,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base truncate",children:M.bill_name}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.class}`,children:[T.icon,M.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[M.is_metered&&e.jsx("div",{className:"mb-3",children:e.jsxs("span",{className:"px-2 py-1 text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Lu,{size:12,className:"inline mr-1"}),"Metered Bill"]})}),e.jsx("div",{className:"ml-auto flex gap-6",children:e.jsx("button",{onClick:()=>I(M.id),className:"items-center gap-6 px-4 py-2 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(Ky,{size:16})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-2",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",R(M.assigned_at)]})})]},M.id)})}),e.jsx("div",{className:"hidden lg:grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(M=>{const T=A(M.billtype);return e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-6 hover:shadow-lg transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ka,{size:20,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-lg",children:M.bill_name}),e.jsx("div",{className:"flex space-x-2 mt-2",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${T.class}`,children:[T.icon,M.billtype||"Unknown"]})})]})]})}),e.jsxs("div",{className:"flex",children:[M.is_metered&&e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"px-3 py-1 text-sm bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 rounded-full",children:[e.jsx(Lu,{size:14,className:"inline mr-2"}),"Metered Bill"]})}),e.jsx("div",{className:"flex ml-auto gap-3",children:e.jsx("button",{onClick:()=>I(M.id),className:"items-center gap-3 px-4 py-1 mb-1 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105",children:e.jsx(Ky,{size:18})})})]}),e.jsx("div",{className:"border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned on: ",R(M.assigned_at)]})})]},M.id)})})]})}),_.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Ns,{size:20})})})]})})]}),e.jsx(nr,{position:"top-right",autoClose:3e3})]})}function nA(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),[l,d]=E.useState("manual"),f=xr(),{bill_id:h}=fn(),b=()=>{f("/my-bills")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>i(!1)}),e.jsx("div",{className:`
                lg:hidden fixed left-0 top-0 h-full z-50
                transform transition-transform duration-300 ease-in-out
                ${r?"translate-x-0":"-translate-x-full"}
            `,children:e.jsx(vr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Sn,{size:16})}),e.jsx(ka,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"Bill Meter"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:b,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Sn,{size:16})}),e.jsx(ka,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Management for Apartments"})]})})}),e.jsx("div",{className:"flex space-x-4 border-b border-gray-300 dark:border-gray-700 mb-4 lg:mb-6 px-1 lg:px-0"}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(dw,{})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function iA(){const[t,a]=E.useState([]),[r,i]=E.useState([]),[l,d]=E.useState(0),[f,h]=E.useState(0),[b,p]=E.useState(!1),[w,j]=E.useState({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),[C,_]=E.useState([]),[R,A]=E.useState([]),[O,I]=E.useState([]),[M,T]=E.useState(""),[B,H]=E.useState(""),[U,L]=E.useState(null),[P,z]=E.useState(!1),[K,te]=E.useState(!1),[V,ne]=E.useState(!1),[ie,X]=E.useState(null),[q,ce]=E.useState(!1),[we,oe]=E.useState(!1),[fe,re]=E.useState(!1),[Q,Y]=E.useState(!1),[ae,se]=E.useState(0),[Z,Re]=E.useState(""),je=["","January","February","March","April","May","June","July","August","September","October","November","December"],Ue=new Date().getFullYear();Array.from({length:10},(Ye,Et)=>(Ue-5+Et).toString());const Me=[{value:"Pending",label:"Pending Only",color:"bg-yellow-500"},{value:"Partial",label:"Partial Only",color:"bg-blue-500"},{value:"Pending,Partial",label:"Both Pending & Partial",color:"bg-gradient-to-r from-yellow-500 to-blue-500"}];E.useEffect(()=>{at()},[]);const at=async()=>{try{z(!0);const Ye=await Se.get("/apartments");Ye.data.success?_(Ye.data.data||[]):_([])}catch(Ye){console.error("Error loading apartments:",Ye),le.error("Failed to load apartments"),_([])}finally{z(!1)}};E.useEffect(()=>{w.apartment_id?ye(w.apartment_id):(A([]),I([]),j(Ye=>({...Ye,floor_id:"",house_id:""})))},[w.apartment_id]),E.useEffect(()=>{w.floor_id&&w.apartment_id?Ae(w.floor_id):(I([]),j(Ye=>({...Ye,house_id:""})))},[w.floor_id,w.apartment_id]);const ye=async Ye=>{try{te(!0);const Et=await Se.get(`/floors?apartment_id=${Ye}`);Et.data.success?A(Et.data.data||[]):A([])}catch(Et){console.error("Error loading floors:",Et),le.error("Failed to load floors"),A([])}finally{te(!1)}},Ae=async Ye=>{try{ne(!0);const Et=await Se.get(`/houses?floor_id=${Ye}&apartment_id=${w.apartment_id}`);Et.data.success?I(Et.data.data||[]):I([])}catch(Et){console.error("Error loading houses:",Et),le.error("Failed to load houses"),I([])}finally{ne(!1)}},Fe=async()=>{const Ye=(B||"").trim();if(!Ye){le.info("Please enter an internal House PK to lookup");return}try{p(!0);const Et=w.payment_status.split(",");let Nt=[];for(const wt of Et){const nt=new URLSearchParams({house_id:Ye,year:w.year,payment_status:wt.trim()});w.month&&nt.append("month",w.month);const kt=await Se.get(`/bill-payments?${nt}`);kt.data&&kt.data.success&&(Nt=[...Nt,...kt.data.data||[]])}a(Nt),Je(Nt);const ot=Nt.filter(wt=>wt.payment_status==="Pending").reduce((wt,nt)=>wt+(parseFloat(nt.pendingAmount)||0),0),St=Nt.filter(wt=>wt.payment_status==="Partial").reduce((wt,nt)=>wt+(parseFloat(nt.pendingAmount)||0),0);d(ot),h(St),L({houseNumber:Ye,apartmentName:"",floorNumber:"",houseId:Ye}),j(wt=>({...wt,house_id:Ye})),Nt.length>0?le.success(`Found ${Nt.length} bill(s)`):le.info("No bills found for the given house PK")}catch(Et){console.error("House PK lookup failed",Et),le.error("Failed to lookup bills by house PK")}finally{p(!1)}};E.useEffect(()=>{if(w.house_id){const Ye=setTimeout(()=>{Ce(w.house_id)},100);return()=>clearTimeout(Ye)}},[w.house_id,w.year,w.month,w.payment_status]);const Ce=async Ye=>{if(!(!Ye||!w.apartment_id||!w.floor_id||!w.year))try{p(!0);const Et=O.find(Tt=>Tt.id===Ye),Nt=C.find(Tt=>Tt.id===w.apartment_id),ot=R.find(Tt=>Tt.id===w.floor_id);Et&&Nt&&ot&&L({houseNumber:Et.house_id,apartmentName:Nt.name,floorNumber:ot.floor_id,houseId:Et.id});const St=w.payment_status.split(",");let wt=[];for(const Tt of St){const Qr=new URLSearchParams({house_id:Ye,apartment_id:w.apartment_id,floor_id:w.floor_id,year:w.year,payment_status:Tt.trim()});w.month&&Qr.append("month",w.month);const Ks=await Se.get(`/bill-payments?${Qr}`);Ks.data.success&&(wt=[...wt,...Ks.data.data||[]])}a(wt),Je(wt);const nt=wt.filter(Tt=>Tt.payment_status==="Pending").reduce((Tt,Qr)=>Tt+(parseFloat(Qr.pendingAmount)||0),0),kt=wt.filter(Tt=>Tt.payment_status==="Partial").reduce((Tt,Qr)=>Tt+(parseFloat(Qr.pendingAmount)||0),0);d(nt),h(kt),se(0),Re("");const Is=wt.filter(Tt=>Tt.payment_status==="Pending").length,On=wt.filter(Tt=>Tt.payment_status==="Partial").length;if(wt.length>0){let Tt=`Found ${Is} pending and ${On} partial bills for House ${Et?.house_id}`;w.month?Tt+=` (${w.month} ${w.year})`:Tt+=` (Year: ${w.year})`,le.success(Tt)}else le.info("No bills found for the selected criteria")}catch(Et){console.error("Error loading bills:",Et),le.error("Failed to load bills"),a([]),i([]),d(0),h(0)}finally{p(!1)}},Je=(Ye=t)=>{const Et=w.payment_status.split(","),Nt=Ye.filter(ot=>Et.includes(ot.payment_status));i(Nt)},be=Ye=>{j(wt=>({...wt,payment_status:Ye})),Je();const Et=Ye.split(","),Nt=t.filter(wt=>Et.includes(wt.payment_status)),ot=Nt.filter(wt=>wt.payment_status==="Pending").reduce((wt,nt)=>wt+(parseFloat(nt.pendingAmount)||0),0),St=Nt.filter(wt=>wt.payment_status==="Partial").reduce((wt,nt)=>wt+(parseFloat(nt.pendingAmount)||0),0);d(ot),h(St)},dt=(Ye,Et)=>{j(Nt=>{const ot={...Nt,[Ye]:Et};return Ye==="apartment_id"?(ot.floor_id="",ot.house_id=""):Ye==="floor_id"&&(ot.house_id=""),ot})},me=()=>{j({year:new Date().getFullYear().toString(),month:"",apartment_id:"",floor_id:"",house_id:"",payment_status:"Pending,Partial"}),_([]),A([]),I([]),a([]),i([]),d(0),h(0),L(null),se(0),Re(""),at()},Pe=Ye=>{X(Ye),ce(!0)},pe=()=>{oe(!0)},lt=()=>{const Ye=((l+f)*.5).toFixed(2);se(Ye),Re(new Date().toISOString().split("T")[0]),re(!0)},st=()=>{ce(!1),oe(!1),re(!1),X(null)},jt=Ye=>{const Et=t.map(St=>St.id===Ye.id?Ye:St);a(Et),Je(Et);const Nt=Et.filter(St=>St.payment_status==="Pending").reduce((St,wt)=>St+(parseFloat(wt.pendingAmount)||0),0),ot=Et.filter(St=>St.payment_status==="Partial").reduce((St,wt)=>St+(parseFloat(wt.pendingAmount)||0),0);d(Nt),h(ot),st(),Ye.payment_status==="Paid"&&le.success("Payment completed successfully!")},At=Ye=>{const Et=typeof Ye=="string"?parseFloat(Ye):Ye;return isNaN(Et)?"0.00":Et.toFixed(2)},Dt=async()=>{try{p(!0);const Ye=r.map(Nt=>Se.patch(`/bill-payments/${Nt.id}/status`,{payment_status:"Paid",paidAmount:parseFloat(Nt.paidAmount)+parseFloat(Nt.pendingAmount),pendingAmount:0,paid_at:new Date().toISOString()}));await Promise.all(Ye);const Et=l+f;le.success(`Successfully paid ${r.length} bills totaling $${Et.toFixed(2)}`),await Ce(w.house_id),oe(!1)}catch(Ye){console.error("Error processing total payment:",Ye),le.error("Failed to process total payment")}finally{p(!1)}},or=async()=>{try{p(!0);const Ye=l+f,Et=parseFloat(ae);if(Et<=0){le.error("Payment amount must be greater than 0");return}if(Et>Ye){le.error(`Payment amount cannot exceed total amount of $${At(Ye)}`);return}const ot=r.map(St=>{const nt=(parseFloat(St.pendingAmount)||0)/Ye,kt=Et*nt;return{...St,additionalPayment:kt}}).map(St=>{const wt=parseFloat(St.paidAmount)+St.additionalPayment,nt=parseFloat(St.pendingAmount)-St.additionalPayment;let kt="Partial";return nt<=.01?kt="Paid":wt>0&&(kt="Partial"),Se.patch(`/bill-payments/${St.id}/status`,{payment_status:kt,paidAmount:wt,paid_at:Z||new Date().toISOString().split("T")[0]})});await Promise.all(ot),le.success(`Successfully paid $${At(Et)} across ${r.length} bills`),await Ce(w.house_id),re(!1)}catch(Ye){console.error("Error processing partial payment:",Ye),le.error("Failed to process partial payment")}finally{p(!1)}},Lt=Ye=>{switch(Ye){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100";case"Failed":return"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-100";case"Refunded":return"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-100"}},qt=Ye=>{switch(Ye){case"Paid":return e.jsx(Ds,{size:16,className:"text-green-600"});case"Partial":return e.jsx(Cn,{size:16,className:"text-blue-600"});case"Pending":return e.jsx(Cn,{size:16,className:"text-yellow-600"});default:return null}},Ft=l+f;return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:Y}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${Q?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bill Payments Settlement"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:"Filter and pay pending & partial bills"})]})]}),e.jsx("button",{onClick:me,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Filter Bills"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Year *"}),e.jsx("input",{type:"number",value:w.year,onChange:Ye=>dt("year",Ye.target.value),min:"2000",max:"2100",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Month (Optional)"}),e.jsxs("select",{value:w.month,onChange:Ye=>dt("month",Ye.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"",children:"All Months / Last Due"}),je.slice(1).map(Ye=>e.jsx("option",{value:Ye,children:Ye},Ye))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Leave empty to see all bills for the year"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Apartment *"}),e.jsxs("select",{value:w.apartment_id,onChange:Ye=>dt("apartment_id",Ye.target.value),disabled:P,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Apartment"}),C.map(Ye=>e.jsx("option",{value:Ye.id,children:Ye.name},Ye.id))]}),P&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading apartments..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Floor *"}),e.jsxs("select",{value:w.floor_id,onChange:Ye=>dt("floor_id",Ye.target.value),disabled:!w.apartment_id||K,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select Floor"}),R.map(Ye=>e.jsxs("option",{value:Ye.id,children:["Floor ",Ye.floor_id]},Ye.id))]}),K&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading floors..."})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"House *"}),e.jsxs("select",{value:w.house_id,onChange:Ye=>dt("house_id",Ye.target.value),disabled:!w.floor_id||V,className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white disabled:opacity-50",children:[e.jsx("option",{value:"",children:"Select House"}),O.map(Ye=>e.jsxs("option",{value:Ye.id,children:["House ",Ye.house_id]},Ye.id))]}),V&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Loading houses..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Or enter House ID"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:B,onChange:Ye=>H(Ye.target.value),placeholder:"e.g. house-abc123",className:"w-full px-3 py-2 text-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"}),e.jsx("button",{type:"button",onClick:Fe,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Lookup"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enter the internal House ID to fetch all bill payments directly."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Bill Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Me.map(Ye=>e.jsxs("button",{type:"button",onClick:()=>be(Ye.value),className:`px-3 py-1 text-sm rounded-lg border ${w.payment_status===Ye.value?"border-purple-600 bg-purple-50 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300"} hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors flex items-center gap-1`,children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${Ye.color}`}),Ye.label]},Ye.value))})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>w.house_id&&Ce(w.house_id),disabled:!w.house_id||!w.year||!w.apartment_id||!w.floor_id,className:"px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[e.jsx(jm,{size:16}),"Load Bills"]})})]}),U&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 border border-gray-200 dark:border-gray-700 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(Ur,{className:"mr-2 text-purple-600",size:24}),"Bills for House ",U.houseNumber]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:[U.apartmentName,"  Floor ",U.floorNumber,w.month?`  ${w.month} ${w.year}`:`  Year: ${w.year}`]})]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing: ",w.payment_status==="Pending,Partial"?"Pending & Partial Bills":w.payment_status==="Pending"?"Pending Bills Only":"Partial Bills Only"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/30 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-yellow-500 mr-2"}),e.jsx("h3",{className:"font-medium text-yellow-800 dark:text-yellow-300",children:"Pending Bills"})]}),e.jsxs("div",{className:"text-yellow-800 dark:text-yellow-300 font-bold text-2xl",children:["$",At(l)]}),e.jsxs("div",{className:"text-yellow-600 dark:text-yellow-400 text-sm",children:[t.filter(Ye=>Ye.payment_status==="Pending").length," bills"]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/30 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500 mr-2"}),e.jsx("h3",{className:"font-medium text-blue-800 dark:text-blue-300",children:"Partial Bills"})]}),e.jsxs("div",{className:"text-blue-800 dark:text-blue-300 font-bold text-2xl",children:["$",At(f)]}),e.jsxs("div",{className:"text-blue-600 dark:text-blue-400 text-sm",children:[t.filter(Ye=>Ye.payment_status==="Partial").length," bills"]})]})]}),b?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ds,{size:48,className:"mx-auto text-green-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No Bills Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No bills found for the selected criteria."}),e.jsx("button",{onClick:()=>be("Pending,Partial"),className:"mt-4 px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Show All Bills"})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 flex flex-wrap gap-3 justify-end",children:[e.jsxs("button",{onClick:lt,disabled:r.length===0||Ft<=0,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Gs,{size:18}),"Pay Partial Amount"]}),e.jsxs("button",{onClick:pe,disabled:r.length===0,className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(Gs,{size:18}),"Pay All in Full"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Bill Type"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Month/Year"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Paid Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Pending Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(Ye=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full flex items-center gap-1 w-fit ${Lt(Ye.payment_status)}`,children:[qt(Ye.payment_status),Ye.payment_status]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:Ye.bill_name})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200 rounded",children:Ye.billtype})}),e.jsxs("td",{className:"px-4 py-3 text-gray-700 dark:text-gray-300",children:[Ye.month," ",Ye.year]}),e.jsxs("td",{className:"px-4 py-3 text-green-600 dark:text-green-400",children:["$",At(Ye.paidAmount)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"font-bold text-red-600 dark:text-red-400",children:["$",At(Ye.pendingAmount)]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Pe(Ye),className:"text-purple-600 hover:text-purple-900 dark:text-purple-400 dark:hover:text-purple-300 p-2 rounded-lg hover:bg-purple-50 dark:hover:bg-purple-900/30",title:"Update Payment",children:e.jsx(Gs,{size:18})})})})]},Ye.id))})]})})]})]})]})})]}),q&&e.jsx(iw,{payment:ie,onClose:st,onUpdate:jt}),we&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-900/30 p-2 rounded-lg mr-3",children:e.jsx(Gs,{className:"text-green-600 dark:text-green-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay All Bills in Full"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are about to fully pay all ",r.length," selected bills for House ",U?.houseNumber,"."]}),e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-green-800 dark:text-green-300 mb-2",children:"Payment Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Pending Amount:"}),e.jsxs("span",{className:"font-medium text-yellow-600 dark:text-yellow-400",children:["$",At(l)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Partial Amount:"}),e.jsxs("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:["$",At(f)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U?.apartmentName," - House ",U?.houseNumber]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Period:"}),e.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:w.month?`${w.month} ${w.year}`:`Year: ${w.year}`})]}),e.jsxs("div",{className:"flex justify-between border-t pt-2",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount:"}),e.jsxs("span",{className:"font-bold text-green-600 dark:text-green-400 text-lg",children:["$",At(Ft)]})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:()=>oe(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:Dt,disabled:b,className:"px-4 py-2 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${At(Ft)}`})]})]})})}),fe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg mr-3",children:e.jsx(Gs,{className:"text-blue-600 dark:text-blue-400",size:24})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Pay Partial Amount"})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Enter the amount you want to pay across all ",r.length," bills for House ",U?.houseNumber,". The amount will be distributed proportionally among all bills."]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-6",children:[e.jsx("h4",{className:"font-medium text-blue-800 dark:text-blue-300 mb-2",children:"Bill Summary"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Bills:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[r.length," bills"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Amount Due:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",At(Ft)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"House:"}),e.jsxs("span",{className:"font-medium text-gray-600 dark:text-gray-400",children:[U?.apartmentName," - House ",U?.houseNumber]})]})]})]}),e.jsxs("form",{onSubmit:Ye=>{Ye.preventDefault(),or()},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount ($)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Gs,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",max:Ft,value:ae,onChange:Ye=>se(Ye.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 text-gray-600 dark:text-gray-400",required:!0})]}),e.jsxs("div",{className:"flex justify-between text-xs mt-1",children:[e.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Maximum: $",At(Ft)]}),e.jsxs("p",{className:"text-blue-600 dark:text-blue-400",children:["Remaining: $",At(Ft-parseFloat(ae||0))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Date"}),e.jsxs("div",{className:"relative",children:[e.jsx(Nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"date",value:Z,onChange:Ye=>Re(Ye.target.value),className:"w-full pl-10 pr-4 py-3 border text-gray-600 dark:text-gray-400 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700",required:!0})]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-gray-300 mb-2",children:"Payment Preview"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Amount to Pay:"}),e.jsxs("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:["$",At(ae)]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Remaining After Payment:"}),e.jsxs("span",{className:"font-bold text-orange-600 dark:text-orange-400",children:["$",At(Ft-parseFloat(ae||0))]})]}),parseFloat(ae||0)>0&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 pt-2 border-t",children:["Amount will be distributed proportionally across ",r.length," bills"]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>re(!1),disabled:b,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:b||!ae||parseFloat(ae)<=0,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Processing..."]}):`Pay $${At(ae)}`})]})]})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function lA(){const[t,a]=E.useState(""),[r,i]=E.useState(""),[l,d]=E.useState(!1),[f,h]=E.useState(""),b=xr(),p=async w=>{w.preventDefault(),d(!0),h("");try{const j=await Se.post("/houseowner-auth/login",{email:t,password:r});j.data.success&&(localStorage.setItem("houseOwnerToken",j.data.accessToken),localStorage.setItem("houseOwnerData",JSON.stringify(j.data.owner)),b("/houseowner/dashboard"))}catch(j){h(j.response?.data?.message||"Login failed")}finally{d(!1)}};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"max-w-md w-full p-8 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"House Owner Login"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Access your apartment management portal"})]}),e.jsxs("form",{onSubmit:p,className:"space-y-6",children:[f&&e.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:f}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",value:t,onChange:w=>a(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 dark:text-gray-300 mb-2",children:"Password"}),e.jsx("input",{type:"password",value:r,onChange:w=>i(w.target.value),className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white",required:!0})]}),e.jsx("div",{className:"text-right",children:e.jsx(Ql,{to:"/houseowner/forgot-password",className:"text-sm text-purple-600 hover:text-purple-800 dark:text-purple-400",children:"Forgot Password?"})}),e.jsx("button",{type:"submit",disabled:l,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Logging in..."]}):"Login"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Don't have an account? Contact your apartment administrator."})})]})})}function Oi({onCollapse:t}){const[a,r]=E.useState(!0),[i,l]=E.useState(!1),[d,f]=E.useState(null),h=[{title:"Dashboard",icon:e.jsx(_E,{size:20}),path:"/houseowner/dashboard",exact:!0},{title:"My House",icon:e.jsx(Ur,{size:20}),path:"/houseowner/houseowner-houseview",exact:!1},{title:"My Bills",icon:e.jsx(ka,{size:20}),path:"/houseowner/houseowner-billview",exact:!1},{title:"Complaints",icon:e.jsx(ka,{size:20}),path:"/houseowner/complaints",exact:!1},{title:"Profile",icon:e.jsx(cs,{size:20}),path:"/houseowner/houseowner-profile",exact:!1}],b=C=>{f(d===C?null:C)},p=({item:C})=>{const _=C.exact?location.pathname===C.path:location.pathname.startsWith(C.path);return e.jsx("div",{className:"mb-1",children:C.subItems?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>b(C.title),className:`flex items-center justify-between w-full p-3 rounded-lg transition-colors ${_?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[C.icon,e.jsx("span",{className:"font-medium",children:C.title})]}),d===C.title?e.jsx(gc,{size:16}):e.jsx(kl,{size:16})]}),d===C.title&&e.jsx("div",{className:"ml-8 mt-1 space-y-1",children:C.subItems.map((R,A)=>e.jsx(hm,{to:R.path,className:({isActive:O})=>`block p-2 rounded-lg transition-colors ${O?"bg-purple-50 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-600 dark:text-gray-400"}`,onClick:()=>l(!1),children:e.jsx("span",{className:"text-sm",children:R.title})},A))})]}):e.jsxs(hm,{to:C.path,className:({isActive:R})=>`flex items-center gap-3 p-3 rounded-lg transition-colors ${R?"bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300":"hover:bg-gray-100 dark:hover:bg-gray-800 text-gray-700 dark:text-gray-300"}`,onClick:()=>l(!1),children:[C.icon,e.jsx("span",{className:"font-medium",children:C.title})]})})},w=()=>e.jsx("button",{onClick:()=>l(!i),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-white text-gray-800 dark:bg-gray-800  dark:text-gray-300 rounded-lg shadow-lg",children:i?e.jsx(mr,{size:24}):e.jsx(jc,{size:24})}),j=()=>e.jsxs("div",{className:"h-full flex flex-col",children:[e.jsx("div",{className:"p-6 border-b dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 flex items-center justify-center",children:e.jsx(Ur,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"AptSync"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"House Owner Portal"})]})]})}),e.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:e.jsx("div",{className:"space-y-1",children:h.map((C,_)=>e.jsx(p,{item:C},_))})})]});return e.jsxs(e.Fragment,{children:[e.jsx(w,{}),i&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:()=>l(!1)}),e.jsx("aside",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white dark:bg-gray-900 shadow-xl z-40 transform transition-transform duration-300 ${i?"translate-x-0":"-translate-x-full"}`,children:e.jsx(j,{})}),e.jsx("aside",{className:`hidden lg:flex flex-col w-64 bg-white dark:bg-gray-900 border-r dark:border-gray-800 transition-all duration-300 fixed left-0 top-0 h-full z-30 ${a?"translate-x-0":"-translate-x-full"}`,children:e.jsx(j,{})})]})}function Ii(){const[t,a]=E.useState(!1),{auth:r,logout:i,resetActivityTimer:l}=E.useContext(Ir),d=xr(),[f,h]=E.useState(!1);E.useEffect(()=>{const C=localStorage.getItem("theme"),_=window.matchMedia("(prefers-color-scheme: dark)").matches;C==="dark"||!C&&_?(a(!0),document.documentElement.classList.add("dark")):(a(!1),document.documentElement.classList.remove("dark"))},[]),E.useEffect(()=>{if(!r.accessToken)return;const C=["mousemove","mousedown","keydown","scroll","click","touchstart","touchmove","wheel","resize","focus"],_=()=>l();C.forEach(A=>window.addEventListener(A,_,{passive:!0}));const R=()=>{document.hidden||l()};return document.addEventListener("visibilitychange",R),()=>{C.forEach(A=>window.removeEventListener(A,_)),document.removeEventListener("visibilitychange",R)}},[r.accessToken,l]);const b=async()=>{try{await Se.post("/auth/logout"),i(),le.success("Logged out successfully"),d("/")}catch(C){console.error("Logout error:",C),i(),le.success("Logged out successfully"),d("/")}finally{h(!1)}},p=()=>{h(!0)},w=()=>{h(!1)},j=()=>{const C=!t;a(C),C?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))};return e.jsxs("header",{className:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 transition-colors duration-200",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex justify-between items-center h-16",children:[e.jsx("div",{className:"flex items-center"}),e.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[e.jsx("button",{onClick:j,className:"p-2 rounded-full text-gray-600 dark:text-gray-300 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:t?"Switch to light mode":"Switch to dark mode",children:t?e.jsx(Em,{size:20}):e.jsx(km,{size:20})}),e.jsxs("div",{className:"hidden md:flex items-center space-x-2",children:[e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"text-sm font-medium text-gray-800 dark:text-gray-200 truncate max-w-[120px]",children:r?.user?.name||"House Owner"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate max-w-[120px]",children:r?.user?.email||"user@example.com"})]})]}),e.jsx("div",{className:"md:hidden flex items-center",children:e.jsx("div",{className:"h-8 w-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm font-medium",children:r?.user?.name?.charAt(0)?.toUpperCase()||"H"})})}),e.jsx("div",{children:e.jsx("button",{type:"button",onClick:p,className:"p-2 rounded-md text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors duration-200",title:"Logout",children:e.jsx(Nm,{size:20})})})]})]})}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm mx-4 relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Logout"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:"Are you sure you want to log out from the House Owner Portal?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:w,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:b,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Logout"})]})]})})]})}function oA(){const[t,a]=E.useState(!1),[r,i]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState({total:0,pending:0,resolved:0}),[b,p]=E.useState([]),[w,j]=E.useState([]),[C,_]=E.useState(!1),{auth:R}=E.useContext(Ir);E.useEffect(()=>{const T=()=>{_(window.innerWidth<1024)};return T(),window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),E.useEffect(()=>{A()},[R.accessToken]);const A=async()=>{try{i(!0),d(""),await O(),j([{id:1,message:"Maintenance scheduled for tomorrow",time:"2 hours ago",type:"info"},{id:2,message:"New community notice posted",time:"1 day ago",type:"info"}])}catch(T){console.error("Failed to fetch dashboard data:",T),d("Failed to load dashboard data")}finally{i(!1)}},O=async()=>{try{if(R.accessToken){const T=await Se.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${R.accessToken}`}});if(T.data.success)if(T.data.statistics)h({total:T.data.statistics.total||0,pending:T.data.statistics.pending||0,resolved:T.data.statistics.resolved||0});else{const B=T.data.data||[],H=B.length,U=B.filter(P=>P.status==="Pending").length,L=B.filter(P=>P.status==="Resolved"||P.status==="Closed").length;h({total:H,pending:U,resolved:L})}}}catch(T){console.error("Failed to fetch complaint stats:",T)}},I=()=>{window.location.href="/complaints"},M=()=>{window.location.href="/complaints"};return r?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Oi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?C?"ml-0":"ml-20":C?"ml-0":"ml-64"}`,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsx("div",{className:"mx-auto max-w-7xl",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading Dashboard..."})]})})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(Oi,{onCollapse:a}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${t?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ur,{size:C?32:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:`${C?"text-xl":"text-2xl"} font-bold text-gray-800 dark:text-white`,children:"House Owner Dashboard"}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Welcome back, ",R.user?.name||"House Owner","!"]})]})]})}),l&&e.jsx("div",{className:"mb-4 md:mb-6 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-700 dark:text-red-300",children:l}),e.jsx("button",{onClick:A,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Retry"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 mb-6 md:mb-8",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Total Complaints"}),e.jsx("div",{className:"p-2 md:p-3 bg-purple-100 dark:bg-purple-900/30 rounded-full",children:e.jsx(yr,{size:C?18:24,className:"text-purple-600 dark:text-purple-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-purple-600 dark:text-purple-400`,children:f.total}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"All time complaints"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Pending"}),e.jsx("div",{className:"p-2 md:p-3 bg-yellow-100 dark:bg-yellow-900/30 rounded-full",children:e.jsx(Cn,{size:C?18:24,className:"text-yellow-600 dark:text-yellow-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-yellow-600 dark:text-yellow-400`,children:f.pending}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Awaiting resolution"})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 transition-colors duration-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-700 dark:text-gray-300",children:"Resolved"}),e.jsx("div",{className:"p-2 md:p-3 bg-green-100 dark:bg-green-900/30 rounded-full",children:e.jsx(Ds,{size:C?18:24,className:"text-green-600 dark:text-green-400"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:`${C?"text-2xl":"text-3xl"} font-bold text-green-600 dark:text-green-400`,children:f.resolved}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Issues fixed"})]})]})]}),e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 md:gap-4",children:[e.jsxs("button",{onClick:M,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-purple-400 dark:hover:border-purple-500",children:[e.jsx(Fa,{className:"mx-auto text-purple-600 dark:text-purple-400 mb-2",size:C?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"New Complaint"})]}),e.jsxs("button",{onClick:I,className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-blue-400 dark:hover:border-blue-500",children:[e.jsx(yr,{className:"mx-auto text-blue-600 dark:text-blue-400 mb-2",size:C?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"View Complaints"})]}),e.jsxs("button",{onClick:()=>window.location.href="/profile",className:"bg-white dark:bg-gray-800 p-3 md:p-4 rounded-lg shadow hover:shadow-md transition-all duration-200 text-center border border-gray-200 dark:border-gray-700 hover:border-green-400 dark:hover:border-green-500",children:[e.jsx(cs,{className:"mx-auto text-green-600 dark:text-green-400 mb-2",size:C?20:24}),e.jsx("span",{className:"text-xs md:text-sm font-medium text-gray-800 dark:text-gray-200",children:"Profile"})]})]})]}),C&&e.jsx("div",{className:"h-16"})]})})]})]})}function cA(){const[t]=td(),a=xr(),[r,i]=E.useState(!0),[l,d]=E.useState(""),[f,h]=E.useState(""),[b,p]=E.useState(!1),[w,j]=E.useState(""),[C,_]=E.useState(""),[R,A]=E.useState(""),[O,I]=E.useState(""),[M,T]=E.useState(""),[B,H]=E.useState(!1),[U,L]=E.useState(!1);E.useEffect(()=>{const V=t.get("token"),ne=t.get("id");V&&ne?(I(V),A(ne),P(V,ne)):(h("Invalid verification link"),i(!1))},[]);const P=async(V,ne)=>{try{const ie=await Se.post("/houseowner-auth/verify",{token:V,id:ne});ie.data.success&&(d(ie.data.message),ie.data.requires_password?p(!0):setTimeout(()=>{a("/login")},2e3))}catch(ie){h(ie.response?.data?.message||"Verification failed")}finally{i(!1)}},z=async()=>{if(T(""),w.length<6){T("Password must be at least 6 characters");return}if(w!==C){T("Passwords do not match");return}const V=/[A-Z]/.test(w),ne=/[a-z]/.test(w),ie=/\d/.test(w),X=/[!@#$%^&*(),.?":{}|<>]/.test(w);if(!V||!ne||!ie||!X){T("Password must contain uppercase, lowercase, numbers, and special characters");return}try{i(!0);const q=await Se.post("/houseowner-auth/setup-password",{token:O,id:R,password:w});q.data.success&&(d(q.data.message),p(!1),setTimeout(()=>{a("/login")},3e3))}catch(q){T(q.response?.data?.message||"Failed to set password")}finally{i(!1)}},K=V=>{j(V.target.value),M&&T("")},te=V=>{_(V.target.value),M&&T("")};return r&&!b?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Verifying your email..."})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 p-4",children:e.jsx("div",{className:"max-w-md w-full p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg",children:f?e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:f}),e.jsx("button",{onClick:()=>a("/"),className:"w-full bg-purple-600 text-white py-2 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Homepage"})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-green-500 text-5xl mb-4",children:""}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-2",children:b?"Set Your Password":"Email Verified Successfully!"}),l&&e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:l}),b?e.jsx("div",{className:"mt-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:B?"text":"password",placeholder:"Enter password",value:w,onChange:K,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>H(!B),className:"passwordToggle bottom-0","aria-label":B?"Hide password":"Show password",children:B?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 text-left",children:"Must be at least 6 characters with uppercase, lowercase, numbers, and special characters"})]}),e.jsxs("div",{className:"passwordField",children:[e.jsx("input",{type:U?"text":"password",placeholder:"Confirm password",value:C,onChange:te,className:"w-full p-3 border rounded-md dark:bg-gray-700 dark:text-white text-gray-700 focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),e.jsx("span",{type:"button",onClick:()=>L(!U),className:"passwordToggle","aria-label":U?"Hide password":"Show password",children:U?e.jsx(Tn,{size:20}):e.jsx(Ys,{size:20})})]}),M&&e.jsx("div",{className:"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md",children:e.jsx("p",{className:"text-red-600 dark:text-red-400 text-sm",children:M})}),e.jsx("button",{onClick:z,disabled:r,className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Setting Password..."]}):"Set Password"})]})}):e.jsx("button",{onClick:()=>a("/login"),className:"w-full bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors",children:"Go to Login"})]})})})}function dA(){const[t,a]=E.useState({}),[r,i]=E.useState({}),[l,d]=E.useState([]),[f,h]=E.useState(null),[b,p]=E.useState(null),[w,j]=E.useState([]),[C,_]=E.useState(!0),[R,A]=E.useState(null),[O,I]=E.useState(!1),{auth:M}=E.useContext(Ir),T=async()=>{try{if(_(!0),A(null),M.accessToken){const P=await Se.get("/houses/owner/me",{headers:{Authorization:`Bearer ${M.accessToken}`,"Content-Type":"application/json"}});if(P.data.success){const z=P.data.data||[];d(z);const K={},te={},V={};z.forEach(ne=>{ne.apartment_id&&(K[ne.apartment_id]={id:ne.apartment_id,name:ne.apartment_name,address:ne.apartment_address,city:ne.apartment_city}),ne.floor_id&&(te[ne.floor_id]={id:ne.floor_id,floor_id:ne.floor_id,floor_number:ne.floor_number}),ne.housetype_id&&(V[ne.housetype_id]={id:ne.housetype_id,name:ne.house_type_name,sqrfeet:ne.house_type_sqrfeet,rooms:ne.house_type_rooms,bathrooms:ne.house_type_bathrooms})}),a(K),i(te),j(Object.values(V)),z.length>0?h(z[0]):h(null)}else A(P.data.message||"Failed to fetch houses")}else A("No authentication token found. Please log in.")}catch(P){console.error("Failed to fetch house data:",P),le.error("Failed to fetch house data"),P.response?(console.error("Error response:",P.response.data),console.error("Error status:",P.response.status),P.response.status===401?A("Session expired. Please log in again."):P.response.status===403?A("Access denied. You are not authorized as a house owner."):P.response.status===404?A("No houses found for your account."):A(P.response.data?.message||"Failed to load house data")):P.request?A("Network error. Please check your internet connection."):A("An unexpected error occurred.")}finally{_(!1)}};E.useEffect(()=>{T()},[M.accessToken]);const B=P=>{if(!P)return"N/A";const z=w.find(te=>te.id===P);return z?z.name:l.find(te=>te.housetype_id===P)?.house_type_name||"N/A"},H=P=>{if(!P)return"N/A";const z=t[P];return z?z.name:l.find(te=>te.apartment_id===P)?.apartment_name||"N/A"},U=P=>{if(!P)return"N/A";const z=r[P];return z&&z.floor_number?z.floor_number:l.find(te=>te.floor_id===P)?.floor_number||"N/A"},L=P=>{h(P)};return C?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Oi,{onCollapse:I}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${O?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your house details..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Oi,{onCollapse:I}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${O?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex items-center bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6",children:[e.jsx(Ur,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Houses"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your properties"})]})]}),R&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:R})]})}),l.length>1&&e.jsxs("div",{className:"mb-4 md:mb-6 bg-white dark:bg-gray-800 rounded-lg shadow p-3 md:p-4",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-3",children:"Select a House"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((P,z)=>e.jsxs("button",{onClick:()=>L(P),className:`px-3 py-1.5 md:px-4 md:py-2 text-sm md:text-base rounded-lg transition-colors ${f?.id===P.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",z+1,": ",P.house_id]},P.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 md:mb-6 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"House Information"}),e.jsx("span",{className:`px-2 py-1 md:px-3 md:py-1 rounded-full text-xs md:text-sm font-medium ${f.status==="occupied"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":f.status==="available"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200"}`,children:f.status?.charAt(0).toUpperCase()+f.status?.slice(1)||"N/A"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"space-y-3 md:space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Number"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ur,{className:"text-purple-600 dark:text-purple-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_id||"N/A"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"House Type"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(za,{className:"text-blue-600 dark:text-blue-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate",children:f.house_type_name||B(f.housetype_id)})]})]})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Floor"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(pf,{className:"text-green-600 dark:text-green-400 mr-2 flex-shrink-0",size:18}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white",children:f.floor_number||U(f.floor_id)})]})]})})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Apartment Complex"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment Name"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white break-words",children:f.apartment_name||H(f.apartment_id)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Address"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200 break-words",children:f.apartment_address||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"City"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.apartment_city||"N/A"})]})]}),f.house_type_name&&e.jsxs("div",{className:"mt-6 md:mt-8 pt-4 md:pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-800 dark:text-white mb-3 md:mb-4",children:"House Specifications"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Square Feet"}),e.jsxs("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:[f.house_type_sqrfeet||"N/A"," sq ft"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Rooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_rooms||"N/A"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs md:text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Bathrooms"}),e.jsx("p",{className:"text-sm md:text-base text-gray-800 dark:text-gray-200",children:f.house_type_bathrooms||"N/A"})]})]})]})]})]}),l.length===0&&!R&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(Ur,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function uA(){const[t,a]=E.useState({}),[r,i]=E.useState({}),[l,d]=E.useState([]),[f,h]=E.useState(null),[b,p]=E.useState([]),[w,j]=E.useState([]),[C,_]=E.useState([]),[R,A]=E.useState(!0),[O,I]=E.useState(!1),[M,T]=E.useState(null),[B,H]=E.useState(!1),[U,L]=E.useState({totalBills:0,totalPaid:0,totalPending:0,totalAmount:0}),[P,z]=E.useState({status:"all",month:"all",year:new Date().getFullYear(),house_id:"all"}),{auth:K}=E.useContext(Ir),te=async()=>{try{if(A(!0),T(null),K.accessToken){const re=await Se.get("/houses/owner/me",{headers:{Authorization:`Bearer ${K.accessToken}`,"Content-Type":"application/json"}});if(re.data.success){const Q=re.data.data||[];d(Q);const Y={},ae={},se={};Q.forEach(Z=>{Z.apartment_id&&(Y[Z.apartment_id]={id:Z.apartment_id,name:Z.apartment_name,address:Z.apartment_address,city:Z.apartment_city}),Z.floor_id&&(ae[Z.floor_id]={id:Z.floor_id,floor_id:Z.floor_id,floor_number:Z.floor_number}),Z.housetype_id&&(se[Z.housetype_id]={id:Z.housetype_id,name:Z.house_type_name,sqrfeet:Z.house_type_sqrfeet,rooms:Z.house_type_rooms,bathrooms:Z.house_type_bathrooms})}),a(Y),i(ae),p(Object.values(se)),Q.length>0?(h(Q[0]),V()):h(null)}else T(re.data.message||"Failed to fetch houses")}else T("No authentication token found. Please log in.")}catch(re){console.error("Failed to fetch house data:",re),re.response?.status===401?T("Session expired. Please log in again."):re.response?.status===403?T("Access denied. Please contact administrator."):re.response?.status===404?T("No houses found for your account."):re.request?T("Network error. Please check your internet connection."):T("An unexpected error occurred.")}finally{A(!1)}},V=async()=>{try{I(!0),T(null);const re={},Q=await Se.get("/bill-payments/house-owner/me",{headers:{Authorization:`Bearer ${K.accessToken}`,"Content-Type":"application/json"},params:re});if(Q.data.success){const Y=Q.data.data||[],ae=Q.data.houses||l;j(Y),_(Y),Q.data.houses&&d(ae),Q.data.summary&&L(Q.data.summary),ae.length>0&&!f&&h(ae[0])}else console.error("[Frontend] API error:",Q.data.message),T(Q.data.message||"Failed to fetch bills"),j([]),_([])}catch(re){console.error("[Frontend] Failed to fetch bill payments:",re);try{const Q=await Se.get("/bill-payments/debug/database-state",{headers:{Authorization:`Bearer ${K.accessToken}`,"Content-Type":"application/json"}})}catch(Q){console.error(" [Frontend] Debug endpoint failed:",Q)}re.response?(console.error("[Frontend] Error response:",{status:re.response.status,data:re.response.data,headers:re.response.headers}),re.response.status===401?T("Session expired. Please log in again."):re.response.status===403?T("Access denied. Please contact administrator."):re.response.status===404?(T("No bill payments found for your account."),j([]),_([])):re.response.data?.message?T(re.response.data.message):T(`Server error: ${re.response.status}`)):re.request?(console.error("[Frontend] No response received:",re.request),T("Network error. Please check your internet connection.")):(console.error("[Frontend] Request setup error:",re.message),T("An unexpected error occurred: "+re.message))}finally{I(!1)}};E.useEffect(()=>{te()},[K.accessToken]),E.useEffect(()=>{f&&V()},[f,P]),E.useEffect(()=>{if(!w.length){_([]);return}let re=[...w];P.status!=="all"&&(re=re.filter(Q=>Q.payment_status===P.status)),P.month!=="all"&&(re=re.filter(Q=>Q.month===P.month)),P.year!=="all"&&(re=re.filter(Q=>Q.year.toString()===P.year.toString())),P.house_id!=="all"&&(re=re.filter(Q=>Q.house_id===P.house_id)),_(re)},[w,P]);const ne=re=>{h(re),z({status:"all",month:"all",year:"all",house_id:re.id})},ie=(re,Q)=>{z(Y=>({...Y,[re]:Q}))},X=()=>{z({status:"all",month:"all",year:"all",house_id:f?.id||"all"})},q=re=>{switch(re){case"Paid":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100";case"Partial":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-100";case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-100"}},ce=re=>{switch(re){case"Paid":return e.jsx(Ds,{size:16,className:"text-green-600 dark:text-green-400"});case"Partial":return e.jsx(Gs,{size:16,className:"text-blue-600 dark:text-blue-400"});case"Pending":return e.jsx(Cn,{size:16,className:"text-yellow-600 dark:text-yellow-400"});default:return e.jsx(Cn,{size:16,className:"text-gray-600 dark:text-gray-400"})}},we=["January","February","March","April","May","June","July","August","September","October","November","December"];[...new Set(w.map(re=>re.year))].filter(Boolean).sort((re,Q)=>Q-re);const fe=(()=>{const re=C.length,Q=C.reduce((se,Z)=>se+(parseFloat(Z.totalAmount)||0),0),Y=C.reduce((se,Z)=>se+(parseFloat(Z.paidAmount)||0),0),ae=C.reduce((se,Z)=>se+(parseFloat(Z.pendingAmount)||0),0);return{totalBills:re,totalAmount:Q,paidAmount:Y,pendingAmount:ae}})();return R?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Oi,{onCollapse:H}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${B?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading your information..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Oi,{onCollapse:H}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${B?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(ka,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Bills"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"View and manage your bills"})]})]})}),M&&e.jsx("div",{className:"mb-4 md:mb-6 p-3 md:p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Na,{className:"text-red-600 dark:text-red-400 mt-0.5 mr-3 flex-shrink-0",size:20}),e.jsx("p",{className:"text-sm md:text-base text-red-700 dark:text-red-300 break-words",children:M})]})}),l.length>1&&e.jsxs("div",{className:"lg:hidden mb-4 bg-white dark:bg-gray-800 rounded-lg shadow p-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-white mb-2",children:"Select House to View Bills"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:l.map((re,Q)=>e.jsxs("button",{onClick:()=>ne(re),className:`px-3 py-1.5 text-sm rounded-lg transition-colors ${f?.id===re.id?"bg-purple-600 text-white":"bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200 hover:bg-gray-200 dark:hover:bg-gray-600"}`,children:["House ",re.house_id||Q+1]},re.id))})]}),f&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 md:p-6 mb-4 md:mb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mb-4 gap-2",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Current House Details"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(za,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:f.apartment_name}),e.jsx(Ur,{size:18,className:"text-gray-500 dark:text-gray-400 ml-2"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:["House ",f.house_id,", Floor ",f.floor_number]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Bills"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:fe.totalBills})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(ka,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:["$",fe.totalAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(Gs,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:["$",fe.paidAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Ds,{size:20,className:"text-green-600 dark:text-green-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:["$",fe.pendingAmount.toFixed(2)]})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Cn,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Bills"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(id,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[C.length," of ",w.length," bills"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Payment Status"}),e.jsxs("select",{value:P.status,onChange:re=>ie("status",re.target.value),className:"w-full px-3 text-gray-600 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"Partial",children:"Partial"}),e.jsx("option",{value:"Paid",children:"Paid"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Month"}),e.jsxs("select",{value:P.month,onChange:re=>ie("month",re.target.value),className:"w-full px-3 py-2 text-gray-600 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Months"}),we.map(re=>e.jsx("option",{value:re,children:re},re))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Year"}),e.jsx("div",{children:e.jsx("input",{type:"number",value:P.year,onChange:re=>ie("year",re.target.value),min:"2025",max:"2100",className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Enter year",required:!0})})]})]}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx("button",{onClick:X,className:"px-4 py-2 text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:O?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-400",children:"Loading bills..."})]}):C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ka,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:w.length===0?"No bills have been generated for your houses yet.":"No bills match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Bill Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Period"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:C.map((re,Q)=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:re.bill_name}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Type: ",re.billtype]}),re.description&&e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:re.description})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white",children:[re.month," ",re.year]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Due: ",re.due_date?new Date(re.due_date).toLocaleDateString():"Not set"]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"text-gray-900 dark:text-white",children:["Total: $",(parseFloat(re.totalAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-green-600 dark:text-green-400",children:["Paid: $",(parseFloat(re.paidAmount)||0).toFixed(2)]}),e.jsxs("div",{className:"text-red-600 dark:text-red-400",children:["Pending: $",(parseFloat(re.pendingAmount)||0).toFixed(2)]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[ce(re.payment_status),e.jsx("span",{className:`ml-2 px-2 py-1 text-xs font-semibold rounded-full ${q(re.payment_status)}`,children:re.payment_status})]})})]},re.id||Q))})]})})})]}),l.length===0&&!M&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 md:p-8 text-center",children:[e.jsx(Ur,{className:"mx-auto text-gray-400 mb-4",size:40}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white mb-2",children:"No Houses Assigned"}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 dark:text-gray-400 mb-4",children:"You don't have any houses assigned to your account yet."}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-500",children:"Please contact the apartment administrator to assign houses to your account."})]})]})})]})]})}function fA(){const[t,a]=E.useState([]),[r,i]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(!1),[b,p]=E.useState(!1),[w,j]=E.useState(null),[C,_]=E.useState([]),[R,A]=E.useState({title:"",description:"",category_id:"",apartment_id:"",floor_id:"",house_id:""}),[O,I]=E.useState({}),[M,T]=E.useState({status:"all"}),[B,H]=E.useState({total:0,pending:0,resolved:0}),{auth:U}=E.useContext(Ir),[L,P]=E.useState(!1),[z,K]=E.useState(null),[te,V]=E.useState(!1),[ne,ie]=E.useState({rating:0,feedback:""}),[X,q]=E.useState(""),[ce,we]=E.useState(!1),[oe,fe]=E.useState(null),re=async()=>{try{const Ae=await Se.get("/categories",{headers:{Authorization:`Bearer ${U.accessToken}`}});Ae.data.success&&_(Ae.data.data||[]);const Fe=await Se.get("/houses/owner/me",{headers:{Authorization:`Bearer ${U.accessToken}`}});if(Fe.data.success&&Fe.data.data.length>0){const Ce=Fe.data.data[0];K(Ce),A(Je=>({...Je,apartment_id:Ce.apartment_id,floor_id:Ce.floor_id,house_id:Ce.id}))}else le.warning("No house information found. Please contact your apartment administrator.")}catch(Ae){console.error("Failed to fetch house owner info:",Ae),le.error("Failed to load your information. Please try again.")}},Q=async()=>{try{d(!0);const Ae=await Se.get("/complaints/my-complaints",{headers:{Authorization:`Bearer ${U.accessToken}`},params:M});Ae.data.success&&(a(Ae.data.data||[]),i(Ae.data.data||[]),H(Ae.data.statistics||{total:0,pending:0,resolved:0}))}catch(Ae){console.error("Failed to fetch complaints:",Ae),le.error("Failed to load complaints. Please try again.")}finally{d(!1)}};E.useEffect(()=>{U.accessToken&&(re(),Q())},[U.accessToken,M]),E.useEffect(()=>{if(!t.length){i([]);return}let Ae=[...t];M.status!=="all"&&(Ae=Ae.filter(Fe=>Fe.status===M.status)),i(Ae)},[t,M]);const Y=async Ae=>{Ae.preventDefault();const Fe={};if(R.title.trim()||(Fe.title="Title is required"),R.description.trim()||(Fe.description="Description is required"),R.category_id||(Fe.category_id="Please select a category"),Object.keys(Fe).length>0){I(Fe);return}if(!R.house_id){le.error("No house information found. Please contact your apartment administrator.");return}try{(await Se.post("/complaints",{title:R.title,description:R.description,category_id:R.category_id,apartment_id:R.apartment_id,floor_id:R.floor_id,house_id:R.house_id},{headers:{Authorization:`Bearer ${U.accessToken}`,"Content-Type":"application/json"}})).data.success&&(le.success("Complaint filed successfully!"),h(!1),ae(),Q())}catch(Ce){le.error("Failed to create complaint");const Je=Ce.response?.data?.message||"Failed to create complaint";le.error(Je)}},ae=()=>{A({title:"",description:"",category_id:"",apartment_id:z?.apartment_id||"",floor_id:z?.floor_id||"",house_id:z?.id||""}),I({})},se=Ae=>{switch(Ae){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},Z=Ae=>{switch(Ae){case"Pending":return e.jsx(Cn,{className:"text-yellow-600 dark:text-yellow-400 mr-2",size:16});case"In Progress":return e.jsx(qu,{className:"text-blue-600 dark:text-blue-400 mr-2",size:16});case"Resolved":return e.jsx(Ds,{className:"text-green-600 dark:text-green-400 mr-2",size:16});case"Closed":return e.jsx(pc,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16});case"Rejected":return e.jsx(hC,{className:"text-red-600 dark:text-red-400 mr-2",size:16});default:return e.jsx(yr,{className:"text-gray-600 dark:text-gray-400 mr-2",size:16})}},Re=async Ae=>{if(j(Ae),p(!0),Ae.status==="Closed")try{const Fe=await Se.get(`/complaints/${Ae.id}/rating-status`,{headers:{Authorization:`Bearer ${U.accessToken}`}});Fe.data.success&&Fe.data.canRate&&(fe(Ae),we(!0))}catch(Fe){console.error("Error checking rating status:",Fe)}},je=async Ae=>{try{const Fe=await Se.post(`/complaints/${Ae}/close`,{},{headers:{Authorization:`Bearer ${U.accessToken}`}});Fe.data.success&&(le.success("Complaint closed successfully!"),Fe.data.requiresRating&&(fe(w),V(!0)),Q(),p(!1))}catch(Fe){console.error("Failed to close complaint:",Fe),le.error(Fe.response?.data?.message||"Failed to close complaint")}},Ue=async Ae=>{try{(await Se.post(`/complaints/${Ae}/reopen`,{},{headers:{Authorization:`Bearer ${U.accessToken}`}})).data.success&&(le.success("Complaint reopened successfully!"),Q(),p(!1))}catch(Fe){console.error("Failed to reopen complaint:",Fe),le.error(Fe.response?.data?.message||"Failed to reopen complaint")}},Me=async Ae=>{if(Ae.preventDefault(),!ne.rating){q("Please select a rating");return}try{(await Se.post(`/ratings/complaints/${oe.id}/rate`,{rating:ne.rating,feedback:ne.feedback},{headers:{Authorization:`Bearer ${U.accessToken}`}})).data.success&&(le.success("Thank you for your feedback!"),V(!1),we(!1),ie({rating:0,feedback:""}),q(""),Q())}catch(Fe){console.error("Failed to submit rating:",Fe),le.error(Fe.response?.data?.message||"Failed to submit rating")}},at=Ae=>{const Fe=C.find(Ce=>Ce.id===Ae);return Fe?Fe.color:"gray"},ye=Ae=>new Date(Ae).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l&&!t.length?e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Oi,{onCollapse:P}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden ${L?"ml-20":"ml-64"} md:ml-64`,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]})})]})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen",children:[e.jsx(Oi,{onCollapse:P}),e.jsxs("div",{className:`
        flex-1 flex flex-col overflow-hidden 
        ${L?"lg:ml-20":"lg:ml-64"} 
        w-full transition-all duration-300
      `,children:[e.jsx(Ii,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-3 md:p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto w-full max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Na,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"My Complaints"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Report and track maintenance issues"})]})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z,children:[e.jsx(Fa,{size:20}),e.jsx("span",{children:"File New Complaint"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4 md:mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:B.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(yr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:B.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Cn,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:B.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Ds,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-4 md:mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(id,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[r.length," of ",t.length," complaints"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Status"}),e.jsxs("select",{value:M.status,onChange:Ae=>T(Fe=>({...Fe,status:Ae.target.value})),className:"w-full px-3 py-2 text-sm border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Na,{size:48,className:"mx-auto text-gray-400 dark:text-gray-500 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:t.length===0?"You haven't filed any complaints yet.":"No complaints match your filter criteria."}),t.length===0&&e.jsx("button",{onClick:()=>h(!0),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:!z,children:"File Your First Complaint"})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(Ae=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded",children:Ae.complaint_number}),Ae.category_name&&e.jsx("span",{className:"ml-2 px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${at(Ae.category_id)}20`,color:at(Ae.category_id)},children:Ae.category_name})]}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-2",children:Ae.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:Ae.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 flex items-center",children:[e.jsx(za,{size:12,className:"mr-1"}),Ae.apartment_name,"  Floor ",Ae.floor_number,"  House ",Ae.house_number]})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center",children:[Z(Ae.status),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${se(Ae.status)}`,children:Ae.status})]})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:ye(Ae.created_at)})}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("div",{className:"flex space-x-2",children:e.jsx("button",{onClick:()=>Re(Ae),className:"p-2 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 transition-colors hover:bg-blue-50 dark:hover:bg-blue-900/30 rounded-lg",title:"View Details",children:e.jsx(yr,{size:16})})})})]},Ae.id))})]})})})]})})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"File New Complaint"}),e.jsx("button",{onClick:()=>{h(!1),ae()},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),z?e.jsxs("form",{onSubmit:Y,children:[e.jsx("div",{className:"mb-6"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Category *"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:R.category_id,onChange:Ae=>{A(Fe=>({...Fe,category_id:Ae.target.value})),O.category_id&&I(Fe=>({...Fe,category_id:""}))},className:"w-full px-3 py-2 pl-10 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white appearance-none",children:[e.jsx("option",{value:"",children:"Select a category"}),C.map(Ae=>e.jsx("option",{value:Ae.id,children:Ae.name},Ae.id))]}),e.jsx(zv,{className:"absolute left-3 top-2.5 text-gray-400",size:16})]}),O.category_id&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:O.category_id}),C.length===0&&e.jsx("p",{className:"text-yellow-600 text-sm mt-1",children:"No categories available. Please contact your administrator."})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Complaint Title *"}),e.jsx("input",{type:"text",value:R.title,onChange:Ae=>{A(Fe=>({...Fe,title:Ae.target.value})),O.title&&I(Fe=>({...Fe,title:""}))},className:"w-full px-3 py-2 border border-gray-300 text-gray-700 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Brief description of the issue"}),O.title&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:O.title})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Detailed Description *"}),e.jsx("textarea",{value:R.description,onChange:Ae=>{A(Fe=>({...Fe,description:Ae.target.value})),O.description&&I(Fe=>({...Fe,description:""}))},rows:4,className:"w-full px-3 py-2 border text-gray-700 border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Please provide detailed information about the issue..."}),O.description&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:O.description}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Be specific about the issue. Include details like location, severity, and any photos if possible."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),ae()},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Complaint"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ur,{className:"mx-auto text-gray-400 dark:text-gray-500 mb-4",size:40}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No House Information Found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:"Please contact your apartment administrator to assign a house to your account."}),e.jsx("button",{onClick:()=>h(!1),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Close"})]})]})})}),b&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Complaint Details"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 mb-6",children:e.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 dark:text-white",children:w.complaint_number}),e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${se(w.status)}`,children:w.status}),w.category_name&&e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full",style:{backgroundColor:`${at(w.category_id)}20`,color:at(w.category_id)},children:w.category_name})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mt-3",children:w.title})]})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Timeline"}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Filed:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ye(w.created_at)})]}),w.assigned_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Assigned:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ye(w.assigned_at)})]}),w.resolved_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Resolved:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ye(w.resolved_at)})]}),w.updated_at&&e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:ye(w.updated_at)})]})]})})]})}),w.assigned_to_name&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Assigned Technician"}),e.jsxs("div",{className:"flex items-center bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg",children:[e.jsx(ei,{className:"text-blue-600 dark:text-blue-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-900 dark:text-white font-medium",children:w.assigned_to_name}),e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:w.assigned_to_role}),w.assignment_notes&&e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 italic border-l-2 border-blue-500 pl-2",children:["Note: ",w.assignment_notes]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Description"}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4",children:e.jsx("p",{className:"text-gray-900 dark:text-white whitespace-pre-wrap leading-relaxed",children:w.description})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:"Update Status"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[w.status==="Resolved"&&e.jsx("button",{onClick:()=>je(w.id),className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors text-sm",children:"Verified & Close"}),w.status==="Resolved"&&e.jsx("button",{onClick:()=>Ue(w.id),className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors text-sm",children:"Reopen - Issue Not Resolved"}),w.status==="Closed"&&e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 italic",children:"This complaint is closed and cannot be reopened."})]})]}),te&&oe&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Rate Your Experience"}),e.jsx("button",{onClick:()=>{V(!1),ie({rating:0,feedback:""}),q("")},className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-1",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:oe.complaint_number})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:oe.title})]})}),e.jsxs("form",{onSubmit:Me,children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"How would you rate the service? *"}),e.jsx("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(Ae=>e.jsx("button",{type:"button",onClick:()=>{ie(Fe=>({...Fe,rating:Ae})),X&&q("")},className:`text-3xl ${Ae<=ne.rating?"text-yellow-500":"text-gray-300 dark:text-gray-600"} hover:text-yellow-400 transition-colors`,children:""},Ae))}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-2",children:[e.jsx("span",{children:"Poor"}),e.jsx("span",{children:"Excellent"})]}),X&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:X})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Additional Feedback (Optional)"}),e.jsx("textarea",{value:ne.feedback,onChange:Ae=>ie(Fe=>({...Fe,feedback:Ae.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",placeholder:"Tell us about your experience..."})]}),e.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:()=>{V(!1),ie({rating:0,feedback:""}),q("")},className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Skip"}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Submit Rating"})]})]})]})})}),ce&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-purple-600 text-white p-4 rounded-lg shadow-lg max-w-sm z-50",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(iC,{size:24,className:"text-yellow-300"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"font-semibold",children:"Rate Your Experience"}),e.jsxs("p",{className:"text-sm mt-1",children:["Please rate the service for complaint ",oe?.complaint_number]}),e.jsxs("div",{className:"flex space-x-2 mt-2",children:[e.jsx("button",{onClick:()=>{V(!0),we(!1)},className:"px-3 py-1 bg-white text-purple-600 rounded text-sm font-medium hover:bg-gray-100 transition-colors",children:"Rate Now"}),e.jsx("button",{onClick:()=>we(!1),className:"px-3 py-1 bg-transparent border border-white rounded text-sm hover:bg-purple-700 transition-colors",children:"Later"})]})]}),e.jsx("button",{onClick:()=>we(!1),className:"ml-4 text-white hover:text-gray-200",children:""})]})}),e.jsx("div",{className:"flex justify-end pt-6",children:e.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Close"})})]})})}),e.jsx(nr,{position:"top-center",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function xA(){const[t,a]=E.useState(!1),[r,i]=E.useState([]),[l,d]=E.useState([]),[f,h]=E.useState(!0),[b,p]=E.useState(""),[w,j]=E.useState({status:"all",apartment_id:"all",category:"all"}),[C,_]=E.useState({total:0,pending:0,in_progress:0,resolved:0}),{auth:R}=E.useContext(Ir),[A,O]=E.useState([]),[I,M]=E.useState([]),T=async()=>{try{const V=await Se.get("/apartments");V.data.success&&M(V.data.data||[])}catch(V){console.error("Error loading apartments:",V),le.error("Failed to load apartments")}},B=async()=>{try{h(!0);const V=await Se.get("/complaints",{headers:{Authorization:`Bearer ${R.accessToken}`},params:w});if(V.data.success){const ne=V.data.data||[];if(i(ne),d(ne),H(ne),ne.length>0){const ie=[...new Set(ne.map(X=>X.category).filter(X=>X&&X.trim()!=="").sort())];ie.includes("General")||ie.unshift("General"),O(ie)}}}catch(V){console.error("Failed to fetch complaints:",V),le.error("Failed to load complaints")}finally{h(!1)}};E.useEffect(()=>{R.accessToken&&(T(),B())},[R.accessToken,w]),E.useEffect(()=>{if(!r.length){d([]);return}let V=[...r];if(b){const ne=b.toLowerCase();V=V.filter(ie=>ie.complaint_number?.toLowerCase().includes(ne)||ie.title?.toLowerCase().includes(ne)||ie.houseowner_name&&ie.houseowner_name.toLowerCase().includes(ne)||ie.apartment_name&&ie.apartment_name.toLowerCase().includes(ne))}w.status!=="all"&&(V=V.filter(ne=>ne.status===w.status)),w.apartment_id!=="all"&&(V=V.filter(ne=>ne.apartment_id===w.apartment_id)),w.category!=="all"&&(V=V.filter(ne=>ne.category===w.category)),d(V)},[r,b,w]);const H=V=>{const ne=V.length,ie=V.filter(ce=>ce.status==="Pending").length,X=V.filter(ce=>ce.status==="In Progress").length,q=V.filter(ce=>ce.status==="Resolved"||ce.status==="Closed").length;_({total:ne,pending:ie,in_progress:X,resolved:q})},U=V=>{switch(V){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},L=V=>{switch((V||"").toLowerCase()){case"water":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"electricity":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"gas":return"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300";case"plumbing":return"bg-teal-100 text-teal-800 dark:bg-teal-900 dark:text-teal-300";case"carpentry":return"bg-amber-100 text-amber-800 dark:bg-amber-900 dark:text-amber-300";case"general":default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},P=V=>{if(!V)return"N/A";try{return new Date(V).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},z=(V,ne)=>{if(!V||!ne)return"N/A";try{const ie=new Date(V),q=(ne==="now"?new Date:new Date(ne))-ie,ce=Math.floor(q/(1e3*60*60*24)),we=Math.floor(q%(1e3*60*60*24)/(1e3*60*60)),oe=Math.floor(q%(1e3*60*60)/(1e3*60));return ce>0?`${ce}d ${we}h`:we>0?`${we}h ${oe}m`:oe>0?`${oe}m`:"Just now"}catch{return"N/A"}},K=V=>{if(!V||V===0)return"N/A";const ne=Math.floor(V/3600),ie=Math.floor(V%3600/60);return ne>0?`${ne}h ${ie}m`:`${ie}m`},te=()=>{p(""),j({status:"all",apartment_id:"all",category:"all"})};return f?e.jsxs("div",{className:"flex justify-center items-center h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 mb-6 gap-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Na,{size:32,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"All Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and manage all complaints"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Complaints"}),e.jsx("p",{className:"text-2xl font-bold text-gray-800 dark:text-white mt-1",children:C.total})]}),e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(yr,{size:20,className:"text-purple-600 dark:text-purple-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Pending"}),e.jsx("p",{className:"text-2xl font-bold text-yellow-600 dark:text-yellow-400 mt-1",children:C.pending})]}),e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg",children:e.jsx(Cn,{size:20,className:"text-yellow-600 dark:text-yellow-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400 mt-1",children:C.in_progress})]}),e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg",children:e.jsx(qu,{size:20,className:"text-blue-600 dark:text-blue-400"})})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Resolved/Closed"}),e.jsx("p",{className:"text-2xl font-bold text-green-600 dark:text-green-400 mt-1",children:C.resolved})]}),e.jsx("div",{className:"p-2 bg-green-100 dark:bg-green-900 rounded-lg",children:e.jsx(Ds,{size:20,className:"text-green-600 dark:text-green-400"})})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2 md:mb-0",children:"Filter & Search Complaints"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(id,{size:18,className:"text-gray-500 dark:text-gray-400"}),e.jsxs("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[l.length," of ",r.length," complaints"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",value:b,onChange:V=>p(V.target.value),placeholder:"Search by complaint number, title, or house owner...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white"})]}),e.jsx("div",{children:e.jsxs("select",{value:w.status,onChange:V=>j(ne=>({...ne,status:V.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"}),e.jsx("option",{value:"Rejected",children:"Rejected"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Apartment"}),e.jsxs("select",{value:w.apartment_id,onChange:V=>j(ne=>({...ne,apartment_id:V.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Apartments"}),I.map(V=>e.jsx("option",{value:V.id,children:V.name},V.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Category"}),e.jsxs("select",{value:w.category_id||"all",onChange:V=>j(ne=>({...ne,category_id:V.target.value})),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Categories"}),A.map(V=>e.jsx("option",{value:V.category_id,children:V.category_name},V.category_id))]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx("button",{onClick:te,className:"w-full px-4 py-2 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",children:"Clear Filters"})})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow overflow-hidden",children:l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Na,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No complaints found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:r.length===0?"No complaints have been filed yet.":"No complaints match your filter criteria."})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Timeline & Rating"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:l.map(V=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:V.complaint_number}),e.jsx("div",{className:"text-sm text-gray-900 dark:text-white font-semibold mt-1",children:V.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:V.description}),e.jsx("div",{className:"flex items-center mt-1",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${L(V.category)}`,children:V.category||"General"})}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["By: ",V.houseowner_name||"Unknown"]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Created: ",P(V.created_at)]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:V.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",V.floor_number,"  House ",V.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${U(V.status)}`,children:V.status})}),e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{className:"space-y-1",children:[V.resolved_at?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-gray-900 dark:text-white flex items-center",children:[e.jsx(H6,{size:14,className:"mr-1"}),"Resolved: ",P(V.resolved_at)]}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Duration: ",z(V.created_at,V.resolved_at)]})]}):e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Open for: ",z(V.created_at,"now")]}),V.total_work_time>0&&e.jsxs("div",{className:"text-xs text-green-600 dark:text-green-400 flex items-center",children:[e.jsx(Uv,{size:12,className:"mr-1"}),"Work Time: ",K(V.total_work_time)]})]})})]},V.id))})]})})})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function hA(){const[t,a]=E.useState([]),[r,i]=E.useState([]),[l,d]=E.useState(!0),[f,h]=E.useState(""),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState({status:"all"}),[R,A]=E.useState({total:0,pending:0,in_progress:0,resolved:0}),[O,I]=E.useState({}),{auth:M}=E.useContext(Ir),T=xr(),[B,H]=E.useState([]),[U,L]=E.useState([]),[P,z]=E.useState(!1),[K,te]=E.useState("pending"),V=async()=>{try{const Y=await Se.get(`/user-apartments/users/${M.user.id}/apartments`);Y.data.success?H(Y.data.data||[]):(le.error("Failed to load apartments"),H([]))}catch(Y){console.error("Error fetching apartments:",Y),le.error("Error loading your apartments"),H([])}},ne=async()=>{try{z(!0);const Y=await Se.get(`/technician-categories/technicians/${M.user.id}/categories`,{headers:{Authorization:`Bearer ${M.accessToken}`}});Y.data.success?L(Y.data.data||[]):(console.error("Failed to load assigned categories:",Y.data.message),L([]))}catch(Y){console.error("Error fetching assigned categories:",Y),L([])}finally{z(!1)}},ie=async()=>{try{d(!0);const Y=await Se.get("/complaints/my-complaints/technician",{headers:{Authorization:`Bearer ${M.accessToken}`},params:C});if(Y.data.success){const ae=Y.data.data||[];a(ae),i(ae),Y.data.statistics&&A(Y.data.statistics)}else console.error("Failed to load complaints:",Y.data.message),a([]),i([])}catch(Y){console.error("Error fetching complaints:",Y),a([]),i([])}finally{d(!1)}};E.useEffect(()=>{M?.user?.id&&(async()=>(await Promise.all([V(),ne()]),M?.accessToken&&ie()))()},[M?.user?.id]);const X=async Y=>{try{T(`/my-work/${Y.id}`,{state:{complaint:Y}})}catch(ae){console.error("Error navigating to my work:",ae),le.error("Failed to start work")}};E.useEffect(()=>{M?.accessToken&&B.length>0&&ie()},[M?.accessToken,B,C]),E.useEffect(()=>{if(!t.length){i([]);return}let Y=t.filter(ae=>ae.complaint_number?.toLowerCase().includes(f.toLowerCase())||ae.title?.toLowerCase().includes(f.toLowerCase())||ae.description?.toLowerCase().includes(f.toLowerCase())||ae.houseowner_name?.toLowerCase().includes(f.toLowerCase())||ae.apartment_name?.toLowerCase().includes(f.toLowerCase()));i(Y)},[t,f]);const q=Y=>{try{return new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},ce=Y=>{switch(Y){case"Pending":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300";case"In Progress":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300";case"Resolved":return"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300";case"Closed":return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300";case"Rejected":return"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300";default:return"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"}},we=Y=>{if(!Y.category_name&&!Y.category_id)return null;const ae=U.find(se=>se.category_id===Y.category_id);return ae?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full",style:{backgroundColor:`${ae.category_color}20`,color:ae.category_color},children:Y.category_name||"Uncategorized"}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:Y.category_name||"Uncategorized"})},oe=(Y,ae)=>{_(se=>({...se,[Y]:ae}))},fe=()=>{_({status:"all"}),h("")},re=Y=>Y.status==="Resolved"||Y.status==="Closed"?e.jsx("div",{className:"text-center py-2",children:e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Completed"})}):Y.status==="Pending"||Y.status==="In Progress"||Y.is_on_hold?e.jsxs("button",{onClick:()=>X(Y),className:"flex items-center justify-center gap-1 px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition-colors w-full",title:Y.is_on_hold?"Resume from Hold":"Start Work",children:[e.jsx(Bv,{size:16}),e.jsx("span",{children:Y.is_on_hold?"Resume Work":"Start Work"})]}):null,Q=()=>P?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:"Loading your assigned categories..."})]}):B.length===0&&U.length===0?e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Na,{className:"text-yellow-600 dark:text-yellow-400 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-300",children:"No assignments found"}),e.jsx("p",{className:"text-xs text-yellow-700 dark:text-yellow-400 mt-1",children:"You need to be assigned to apartments and categories to see complaints."})]})]})}):e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:e.jsxs("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:["Assigned Categories: ",U.length]})}),U.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mb-2",children:[U.slice(0,3).map(Y=>e.jsx("span",{className:"px-4 py-2 text-xs rounded-full font-medium bg-gray-400 dark:bg-gray-300",style:{color:Y.category_color},children:Y.category_name},Y.category_id)),U.length>3&&e.jsxs("span",{className:"px-2 py-1 text-xs text-gray-600 dark:text-gray-400",children:["+",U.length-3," more"]})]})]});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:p})}),w&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>j(!1)}),e.jsx("div",{className:`
        lg:hidden fixed left-0 top-0 h-full z-50
        transform transition-transform duration-300 ease-in-out
        ${w?"translate-x-0":"-translate-x-full"}
      `,children:e.jsx(vr,{onCollapse:p})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${b?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{onMobileMenuClick:()=>j(!0)}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Na,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Complaints assigned to you"})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Total"}),e.jsx("p",{className:"text-lg font-bold text-purple-600 dark:text-purple-400",children:R.total})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Na,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"My Complaints"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"View complaints from your assigned apartments and categories"})]})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 mb-6",children:Q()}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 mb-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"relative",children:[e.jsx(Ns,{size:20,className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search complaints by number, title, or house owner...",value:f,onChange:Y=>h(Y.target.value),className:"w-full pl-10 pr-4 py-3 lg:py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent text-base lg:text-sm"})]})}),e.jsx("div",{children:e.jsxs("select",{value:C.status,onChange:Y=>oe("status",Y.target.value),className:"w-full px-3 py-2 text-gray-600 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"Pending",children:"Pending"}),e.jsx("option",{value:"In Progress",children:"In Progress"}),e.jsx("option",{value:"Resolved",children:"Resolved"}),e.jsx("option",{value:"Closed",children:"Closed"})]})})]}),e.jsxs("div",{className:"flex justify-between items-center mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Showing ",r.length," of ",t.length," complaints"]}),(C.status!=="all"||f)&&e.jsx("button",{onClick:fe,className:"text-sm text-purple-600 dark:text-purple-400 hover:text-purple-800 dark:hover:text-purple-300",children:"Clear filters"})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:l?e.jsxs("div",{className:"flex justify-center items-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"}),e.jsx("span",{className:"ml-3 text-gray-600 dark:text-gray-300",children:"Loading complaints..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Na,{size:48,className:"mx-auto mb-4 text-gray-400 dark:text-gray-500"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 dark:text-gray-300 mb-2",children:f?"No matching complaints found":"No complaints available"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm lg:text-base",children:f?"Try adjusting your search terms":B.length===0?"You are not assigned to any apartments":U.length===0?"You are not assigned to any complaint categories":"No complaints match your assigned apartments and categories"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"lg:hidden space-y-4",children:r.map(Y=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-600 rounded-xl p-4 hover:shadow-md transition-all duration-200 bg-white dark:bg-gray-700",children:[e.jsx("div",{className:"flex items-start justify-between mb-3",children:e.jsxs("div",{className:"flex items-center space-x-3 flex-1",children:[e.jsx("div",{className:"p-2 bg-purple-100 dark:bg-purple-900 rounded-lg",children:e.jsx(Na,{size:18,className:"text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white text-base",children:Y.complaint_number}),e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mt-1 truncate",children:Y.title}),e.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${ce(Y.status)}`,children:[Y.status,Y.is_on_hold&&" (On Hold)"]}),we(Y)]})]})]})}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(za,{size:14,className:"mr-2"}),e.jsx("span",{className:"truncate",children:Y.apartment_name||"Unknown"})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(lo,{size:14,className:"mr-2"}),e.jsxs("span",{children:["Floor ",Y.floor_number,"  House ",Y.house_number]})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-400 mt-1",children:[e.jsx(cs,{size:14,className:"mr-2"}),e.jsxs("span",{className:"truncate",children:["House Owner: ",Y.houseowner_name||"Unknown"]})]})]}),e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2",children:Y.description})}),e.jsx("div",{className:"mb-4",children:re(Y)}),e.jsx("div",{className:"flex justify-between items-center border-t border-gray-200 dark:border-gray-600 pt-3",children:e.jsxs("div",{children:[e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Created: ",q(Y.created_at)]}),Y.assigned_at&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",q(Y.assigned_at)]})]})})]},Y.id))}),e.jsx("div",{className:"hidden lg:block overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Complaint Details"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Location"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Hold Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Created"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:r.map(Y=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:Y.complaint_number}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 dark:text-white mt-1",children:Y.title}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:Y.description}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["House Owner: ",Y.houseowner_name||"Unknown"]})]})}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:Y.apartment_name||"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Floor ",Y.floor_number,"  House ",Y.house_number]})]}),e.jsx("td",{className:"px-4 py-4",children:we(Y)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${ce(Y.status)}`,children:Y.status}),Y.is_on_hold&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300",children:"On Hold"})})]}),e.jsx("td",{className:"px-4 py-4",children:re(Y)}),e.jsxs("td",{className:"px-4 py-4",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-white",children:q(Y.created_at)}),Y.assigned_at&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Assigned: ",q(Y.assigned_at)]})]})]},Y.id))})]})})]})}),r.length>3&&e.jsx("div",{className:"lg:hidden fixed bottom-6 right-6 z-30",children:e.jsx("button",{onClick:()=>{document.querySelector('input[type="text"]')?.focus()},className:"bg-purple-600 text-white p-4 rounded-full shadow-lg hover:bg-purple-700 transition-colors",children:e.jsx(Ns,{size:20})})})]})})]})]})}function mA(){const[t,a]=E.useState(!1),[r,i]=E.useState(null),[l,d]=E.useState(!0),[f,h]=E.useState(!1),[b,p]=E.useState({name:"",country:"",mobile:"",nic:"",occupation:""}),{auth:w}=E.useContext(Ir);E.useEffect(()=>{j()},[]);const j=async()=>{try{d(!0);const M=await Se.get("/auth/me");if(M.data.success&&M.data.data&&M.data.data.length>0){const T=M.data.data[0];i(T),p({name:T.name||`${T.firstname||""} ${T.lastname||""}`.trim(),country:T.country||"",mobile:T.mobile||"",nic:T.nic||"",occupation:T.occupation||""})}else le.error("No profile data found")}catch(M){console.error("Error fetching house owner profile:",M),le.error("Failed to load profile")}finally{d(!1)}},C=()=>{h(!0)},_=()=>{h(!1),r&&p({name:r.name||`${r.firstname||""} ${r.lastname||""}`.trim(),country:r.country||"",mobile:r.mobile||"",nic:r.nic||"",occupation:r.occupation||""})},R=async()=>{try{console.log("Updating house owner profile:",b);const M=await Se.put(`/auth/users/${r.id}`,b);M.data.success?(i(T=>({...T,...M.data.data,name:b.name})),h(!1),le.success("Profile updated successfully"),j()):le.error(M.data.message||"Failed to update profile")}catch(M){console.error("Error updating house owner profile:",M),le.error(M.response?.data?.message||"Failed to update profile")}},A=M=>{const{name:T,value:B}=M.target;p(H=>({...H,[T]:B}))},O=M=>{if(!M)return"Not available";try{return new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}catch{return"Invalid date"}};if(l)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})});if(!r)return e.jsx("div",{className:"flex justify-center items-center min-h-screen bg-gray-100 dark:bg-gray-900",children:e.jsxs("div",{className:"text-center",children:[e.jsx(cs,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Failed to load profile"}),e.jsx("button",{onClick:j,className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Retry"})]})});const I=()=>{if(r.name){const M=r.name.split(" ");return M.length>=2?(M[0].charAt(0)+M[1].charAt(0)).toUpperCase():r.name.charAt(0).toUpperCase()}return r.firstname?.charAt(0)?.toUpperCase()||"H"};return e.jsxs("div",{className:"min-h-screen bg-gray-100 dark:bg-gray-900 flex",children:[e.jsx(Oi,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col transition-all duration-300 ${t?"md:ml-20":"md:ml-64"}`,children:[e.jsx(Ii,{}),e.jsx("main",{className:"flex-1 p-3 md:p-4 lg:p-6 overflow-y-auto",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-3 md:p-4 mb-4 md:mb-6 shadow-sm",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 md:gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(cs,{size:24,className:"md:size-6 text-purple-600 dark:text-purple-400 mr-2 md:mr-3"}),e.jsx("h1",{className:"text-lg md:text-xl lg:text-2xl font-bold text-gray-800 dark:text-white",children:"My Profile"}),e.jsx("span",{className:"ml-3 px-2 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs rounded-full",children:"House Owner"})]}),f?e.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[e.jsxs("button",{onClick:_,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm md:text-base",children:[e.jsx(mr,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Cancel"})]}),e.jsxs("button",{onClick:R,className:"flex-1 sm:flex-none flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors text-sm md:text-base",children:[e.jsx(yf,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Save Changes"})]})]}):e.jsxs("button",{onClick:C,className:"flex items-center justify-center gap-1 md:gap-2 px-3 md:px-4 py-1.5 md:py-2 rounded-lg font-medium md:font-semibold text-sm md:text-base text-white bg-purple-600 hover:bg-purple-700 transition-all duration-300 w-full sm:w-auto",children:[e.jsx(ja,{size:16,className:"md:size-4"}),e.jsx("span",{children:"Edit Profile"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 md:w-20 md:h-20 lg:w-24 lg:h-24 bg-purple-600 rounded-full flex items-center justify-center mx-auto mb-3 md:mb-4",children:e.jsx("span",{className:"text-white text-xl md:text-2xl lg:text-3xl font-bold",children:I()})}),e.jsx("h2",{className:"text-base md:text-lg lg:text-xl font-semibold text-gray-800 dark:text-white break-words",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()}),e.jsx("p",{className:"text-purple-600 dark:text-purple-400 capitalize mt-1 text-sm md:text-base",children:"House Owner"}),e.jsxs("div",{className:"mt-3 md:mt-4 space-y-1.5 md:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Nl,{size:14,className:"md:size-4 mr-1.5 md:mr-2"}),"Joined ",O(r.created_at)]}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified":"Pending Verification"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]})]}),(r.apartment_name||r.house_number||r.floor_number)&&e.jsxs("div",{className:"mt-4 md:mt-6 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-sm md:text-base font-medium text-gray-700 dark:text-gray-300 mb-2 md:mb-3 flex items-center",children:[e.jsx(Ur,{size:16,className:"md:size-4 mr-2"}),"Property Information"]}),e.jsxs("div",{className:"space-y-1.5 md:space-y-2",children:[r.apartment_name&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ri,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:["Apartment: ",r.apartment_name]})]}),r.house_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ur,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["House No: ",r.house_number]})]}),r.floor_number&&e.jsxs("div",{className:"flex items-center text-xs md:text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(Ri,{size:14,className:"md:size-4 mr-1.5 md:mr-2 flex-shrink-0"}),e.jsxs("span",{children:["Floor: ",r.floor_number]})]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Personal Information"}),e.jsxs("div",{className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(cs,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Full Name"]}),f?e.jsx("input",{type:"text",name:"name",value:b.name,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your full name"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.name||`${r.firstname||""} ${r.lastname||""}`.trim()||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(yr,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"NIC Number"]}),f?e.jsx("input",{type:"text",name:"nic",value:b.nic,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter NIC number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.nic||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Hu,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Occupation"]}),f?e.jsx("input",{type:"text",name:"occupation",value:b.occupation,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your occupation"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.occupation||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(lo,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Country"]}),f?e.jsx("input",{type:"text",name:"country",value:b.country,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter your country"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.country||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(Ec,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Mobile Number"]}),f?e.jsx("input",{type:"tel",name:"mobile",value:b.mobile,onChange:A,className:"w-full border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-sm md:text-base bg-white dark:bg-gray-700 text-gray-800 dark:text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Enter mobile number"}):e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.mobile||"Not set"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(io,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Email Address"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:r.email})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2 flex items-center",children:[e.jsx(pc,{size:16,className:"md:size-4 mr-1.5 md:mr-2"}),"Account Type"]}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg capitalize",children:"House Owner"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-sm p-4 md:p-6 mt-4 md:mt-6",children:[e.jsx("h3",{className:"text-base md:text-lg lg:text-lg font-semibold text-gray-800 dark:text-white mb-4 md:mb-6",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Verification Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_verified?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:r.is_verified?"Verified Account":"Pending Verification"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Account Status"}),e.jsx("div",{className:`inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs ${r.is_active?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:r.is_active?"Active":"Inactive"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Member Since"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:O(r.created_at)})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-3 md:p-4 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1 md:mb-2",children:"Last Profile Update"}),e.jsx("p",{className:"text-gray-800 dark:text-white text-sm md:text-base",children:r.updated_at?O(r.updated_at):"Not updated yet"})]})]})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-14 md:mt-0",toastClassName:"text-sm md:text-base"})]})}function gA({complaint:t,onClose:a,onHoldSuccess:r}){const[i,l]=E.useState(""),[d,f]=E.useState(""),[h,b]=E.useState(!1),[p,w]=E.useState(""),{auth:j}=E.useContext(Ir),C=["Waiting for parts/equipment","Need specialist assistance","Material shortage","Weather conditions","Safety concerns","Access issues","Waiting for approval","Other"],_=async O=>{if(O.preventDefault(),!i.trim()){le.error("Please provide a reason for placing the complaint on hold");return}try{b(!0);const I=await Se.post(`/complaints/${t.id}/hold`,{reason:i,expected_resolution_date:d||null},{headers:{Authorization:`Bearer ${j.accessToken}`}});I.data.success?(le.success("Complaint placed on hold successfully"),r(),a()):le.error(I.data.message||"Failed to place complaint on hold")}catch(I){console.error("Error holding complaint:",I),le.error(I.response?.data?.message||"Failed to place complaint on hold")}finally{b(!1)}},R=O=>{w(O),l(O==="Other"?"":O)},A=new Date().toISOString().split("T")[0];return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"p-2 bg-yellow-100 dark:bg-yellow-900 rounded-lg mr-3",children:e.jsx(Na,{size:24,className:"text-yellow-600 dark:text-yellow-400"})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Hold Complaint"}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 p-1 rounded-full hover:bg-gray-100 dark:hover:bg-gray-700",children:e.jsx(mr,{size:20})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-200px)]",children:[e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Complaint: ",e.jsx("span",{className:"font-semibold",children:t.complaint_number})]}),e.jsxs("form",{onSubmit:_,children:[e.jsxs("div",{className:"mb-6 ",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Common Reasons"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:C.map(O=>e.jsx("button",{type:"button",onClick:()=>R(O),className:`px-3 py-2 text-sm rounded-lg border transition-colors ${p===O?"bg-purple-100 text-purple-700 border-purple-300 dark:bg-purple-900 dark:text-purple-300 dark:border-purple-700":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-600"}`,children:O},O))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Hold Reason Details"}),e.jsx("textarea",{value:i,onChange:O=>{l(O.target.value),O.target.value!==p&&w("")},rows:"4",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none",placeholder:"Describe why you need to hold this complaint...",required:!0})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Expected Resolution Date (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Nl,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),e.jsx("input",{type:"date",value:d,onChange:O=>f(O.target.value),min:A,className:"w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"When do you expect to resume work on this complaint?"})]}),e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Na,{size:18,className:"text-yellow-600 dark:text-yellow-400 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300",children:[e.jsx("span",{className:"font-semibold",children:"Note:"})," The complaint timer will be paused while on hold. You will need to resume the complaint before completing the work."]})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:a,className:"px-4 py-2 rounded-lg bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors",disabled:h,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:h||!i.trim(),className:"px-4 py-2 rounded-lg bg-yellow-600 text-white hover:bg-yellow-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Na,{size:18}),"Place on Hold"]})})]})]})]})]})})}function uw(){const{complaintId:t}=fn(),a=Rn(),[r,i]=E.useState(a.state?.complaint||null),[l,d]=E.useState(!1),[f,h]=E.useState(null),[b,p]=E.useState(!1),[w,j]=E.useState(!1),[C,_]=E.useState(""),[R,A]=E.useState(null),[O,I]=E.useState(""),[M,T]=E.useState(!1),[B,H]=E.useState(0),[U,L]=E.useState("environment"),P=E.useRef(null),z=E.useRef(null),K=xr(),{auth:te}=E.useContext(Ir),V=E.useRef(null),[ne,ie]=E.useState(!1),[X,q]=E.useState(!1),[ce,we]=E.useState(!1),[oe,fe]=E.useState(!1),[re,Q]=E.useState(null),[Y,ae]=E.useState(!1);E.useEffect(()=>{const Pe=async()=>{if(!r&&t)try{p(!0);const pe=await Se.get(`/complaints/${t}`,{headers:{Authorization:`Bearer ${te.accessToken}`}});pe.data.success?i(pe.data.data):(le.error("Failed to load complaint details"),K("/my-complaints"))}catch(pe){console.error("Error fetching complaint:",pe),le.error("Error loading complaint information"),K("/my-complaints")}finally{p(!1)}};te?.accessToken&&t&&Pe()},[t,te?.accessToken,r,K]);const se=async Pe=>{try{if(!Pe)return{access:!1,reason:"Invalid house ID"};const pe=await Se.get(`/houses/${Pe}`);if(!pe.data.success||!pe.data.data)return{access:!1,reason:"House not found in the system"};const lt=pe.data.data;if(r&&r.house_id!==lt.id)return{access:!1,reason:`This house (${lt.house_id}) does not match the complaint's house (House ${r.house_number})`};let st=null;if(lt.apartment_id)try{const Dt=await Se.get(`/apartments/${lt.apartment_id}`);Dt.data.success&&(st=Dt.data.data)}catch(Dt){console.error("Error fetching apartment:",Dt)}let jt=null;if(lt.floor_id)try{const Dt=await Se.get(`/floors/${lt.floor_id}`);Dt.data.success&&(jt=Dt.data.data)}catch(Dt){console.error("Error fetching floor:",Dt)}const At={...lt,apartment:st,floor:jt};return A(At),{access:!0,houseData:At,apartmentId:lt.apartment_id,floorId:lt.floor_id,houseId:lt.id}}catch(pe){if(console.error("Error checking house access:",pe),pe.code==="ERR_NETWORK")return{access:!1,reason:"Network error. Please check your internet connection."};const lt=pe.response?.status;return lt===401?{access:!1,reason:"Session expired. Please login again."}:lt===403?{access:!1,reason:"Access denied to this resource."}:lt===404?{access:!1,reason:"House not found."}:lt===400?{access:!1,reason:"Invalid request."}:{access:!1,reason:"Unable to verify access at this time. Please try again."}}},Z=async()=>{try{const Pe=await Se.post(`/complaints/${t}/timer/start`,{},{headers:{Authorization:`Bearer ${te.accessToken}`}});if(Pe.data.success){const pe=Pe.data.data;return T(!0),ie(!0),H(pe.currentElapsedTime||0),V.current&&clearInterval(V.current),V.current=setInterval(()=>{H(lt=>lt+1)},1e3),le.success("Work started! Timer is now running."),i(lt=>({...lt,status:"In Progress",is_timer_running:!0,work_started_at:new Date().toISOString()})),!0}else return le.error(Pe.data.message||"Failed to start timer"),!1}catch(Pe){return console.error("Error starting timer:",Pe),le.error(Pe.response?.data?.message||"Failed to start timer"),!1}},Re=async()=>{try{const Pe=await Se.post(`/complaints/${t}/timer/stop`,{},{headers:{Authorization:`Bearer ${te.accessToken}`}});return Pe.data.success?(T(!1),ie(!1),V.current&&(clearInterval(V.current),V.current=null),Pe.data.data&&Pe.data.data.currentElapsedTime&&H(Pe.data.data.currentElapsedTime),le.success("Work completed! Timer stopped."),i(pe=>({...pe,status:"Resolved",is_timer_running:!1,work_paused_at:new Date().toISOString()})),setTimeout(()=>{K("/my-complaints")},3e3),!0):(le.error(Pe.data.message||"Failed to stop timer"),!1)}catch(Pe){return console.error("Error stopping timer:",Pe),le.error(Pe.response?.data?.message||"Failed to stop timer"),!1}},je=async()=>{try{const Pe=await Se.post(`/complaints/${t}/timer/pause`,{},{headers:{Authorization:`Bearer ${te.accessToken}`}});return Pe.data.success?(T(!1),V.current&&(clearInterval(V.current),V.current=null),Pe.data.data&&Pe.data.data.currentElapsedTime&&H(Pe.data.data.currentElapsedTime),le.success("Timer paused"),!0):(le.error(Pe.data.message||"Failed to pause timer"),!1)}catch(Pe){return console.error("Error pausing timer:",Pe),le.error(Pe.response?.data?.message||"Failed to pause timer"),!1}},Ue=async()=>{try{const Pe=await Se.post(`/complaints/${t}/timer/resume`,{},{headers:{Authorization:`Bearer ${te.accessToken}`}});return Pe.data.success?(T(!0),V.current||(V.current=setInterval(()=>{H(pe=>pe+1)},1e3)),le.success("Timer resumed"),!0):(le.error(Pe.data.message||"Failed to resume timer"),!1)}catch(Pe){return console.error("Error resuming timer:",Pe),le.error(Pe.response?.data?.message||"Failed to resume timer"),!1}},Me=(Pe,pe)=>{if(!Pe||Pe.length===0)return null;const lt=st=>(st||"").toLowerCase();if(pe==="environment"){const st=Pe.find(jt=>/back|rear|environment/.test(lt(jt.label)));return st?st.id:Pe[Pe.length-1].id}else{const st=Pe.find(jt=>/front|user|face/.test(lt(jt.label)));return st?st.id:Pe[0].id}},at=async(Pe,pe)=>{const lt=Pe||U;if(d(!0),h(null),j(!1),_(""),A(null),I(""),P.current){try{await P.current.stop()}catch{}try{P.current.clear()}catch{}P.current=null}const st=document.getElementById("qr-reader");st&&(st.innerHTML="");try{const jt=await uc.getCameras();let At=pe||Me(jt,lt)||jt[0]&&jt[0].id;const Dt=new uc("qr-reader");P.current=Dt;const or={fps:10,qrbox:{width:250,height:250}};await Dt.start({deviceId:{exact:At}},or,Lt=>{ye(Lt)},Lt=>{}),z.current=At,L(lt)}catch(jt){console.error("Scanner initialization error:",jt),le.error("Failed to initialize scanner. Please refresh and try again."),d(!1)}},ye=async Pe=>{try{if(p(!0),P.current){try{await P.current.stop()}catch{}try{await P.current.clear()}catch{}P.current=null,z.current=null}d(!1),I("");const pe=Pe.trim();if(h({houseId:pe,source:"qr"}),re?.is_on_hold){const lt=await se(pe);lt.access?(le.success("Location verified! Ready to resume from hold."),j(!0)):(j(!1),_(lt.reason||"Access denied"),le.error(lt.reason||"Access denied"))}else{const lt=await se(pe);if(lt.access){j(!0),le.success("Access granted! This is the correct house.");try{await Z()&&(T(!0),ie(!0),i(jt=>({...jt,status:"In Progress",is_timer_running:!0})))}catch(st){le.error("Failed to start timer: "+st.message)}}else j(!1),_(lt.reason||"Access denied"),le.error(lt.reason||"Access denied")}}catch(pe){console.error("Error processing QR code:",pe),le.error(pe.message||"Invalid QR code. Please scan a valid house QR code."),d(!1)}finally{p(!1)}},Ae=async()=>{const Pe=U==="environment"?"user":"environment";try{const pe=await uc.getCameras();let lt=Me(pe,Pe)||pe[0]&&pe[0].id;if(lt&&z.current&&lt===z.current&&pe.length>1){const st=pe.find(jt=>jt.id!==z.current);st&&(lt=st.id)}if(P.current){try{await P.current.stop()}catch{}try{await P.current.clear()}catch{}P.current=null}L(Pe),l&&setTimeout(()=>at(Pe,lt),250)}catch(pe){console.error("Error toggling camera direction:",pe)}},Fe=Pe=>{const pe=Math.floor(Pe/3600),lt=Math.floor(Pe%3600/60),st=Pe%60;return`${pe.toString().padStart(2,"0")}:${lt.toString().padStart(2,"0")}:${st.toString().padStart(2,"0")}`},Ce=async()=>{if(P.current){try{await P.current.stop()}catch{}try{await P.current.clear()}catch(Pe){console.log("Scanner clear error on reset:",Pe)}P.current=null,z.current=null}V.current&&(clearInterval(V.current),V.current=null),d(!1),h(null),j(!1),_(""),A(null),I(""),T(!1),H(0),ie(!1)};E.useEffect(()=>()=>{P.current&&((async()=>{try{await P.current.stop()}catch{}try{await P.current.clear()}catch(Pe){console.log("Scanner clear error on unmount:",Pe)}})(),z.current=null),V.current&&clearInterval(V.current)},[]),E.useEffect(()=>((async()=>{if(t&&te?.accessToken)try{const pe=await Se.get(`/complaints/${t}/timer/status`,{headers:{Authorization:`Bearer ${te.accessToken}`}});if(pe.data.success&&pe.data.data){const lt=pe.data.data;lt.is_timer_running&&(T(!0),ie(!0),H(lt.currentElapsedTime||0),V.current=setInterval(()=>{H(st=>st+1)},1e3))}}catch{console.log("No active timer found")}})(),()=>{V.current&&clearInterval(V.current)}),[t,te?.accessToken]);const Je=Pe=>{try{return new Date(Pe).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"N/A"}},be=async()=>{try{ae(!0);const Pe=await Se.get(`/complaints/${t}/hold-status`,{headers:{Authorization:`Bearer ${te.accessToken}`}});Pe.data.success&&Q(Pe.data.data)}catch(Pe){console.error("Error fetching hold status:",Pe)}finally{ae(!1)}};E.useEffect(()=>{t&&te?.accessToken&&be()},[t,te?.accessToken]);const dt=async()=>{try{p(!0);const Pe=await Se.post(`/complaints/${t}/resume`,{},{headers:{Authorization:`Bearer ${te.accessToken}`}});Pe.data.success?(le.success("Complaint resumed from hold"),Q(null),T(!0),ie(!0),i(pe=>({...pe,status:"In Progress",is_timer_running:!0,is_on_hold:!1})),V.current&&clearInterval(V.current),V.current=setInterval(()=>{H(pe=>pe+1)},1e3)):le.error(Pe.data.message||"Failed to resume complaint")}catch(Pe){console.error("Error resuming from hold:",Pe),le.error(Pe.response?.data?.message||"Failed to resume complaint")}finally{p(!1)}},me=()=>{be(),T(!1),V.current&&(clearInterval(V.current),V.current=null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"flex",children:[e.jsx(vr,{}),e.jsx("div",{className:"flex-1 p-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[r&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsx("div",{className:"flex justify-between items-start mb-4",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:["Complaint: ",r.complaint_number]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.title})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Status"}),e.jsx("div",{className:"flex items-center",children:e.jsx("span",{className:`px-3 py-1 text-sm font-semibold rounded-full ${r.status==="Pending"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300":r.status==="In Progress"?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300":"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300"}`,children:r.status})}),e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Created: ",Je(r.created_at)]})]})}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 dark:text-white mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:r.description})]})]}),ne&&!re?.is_on_hold&&e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4 md:mb-0",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-800 rounded-lg mr-4",children:e.jsx(Uv,{size:24,className:"text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-800 dark:text-blue-300",children:"Work In Progress"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900 dark:text-blue-200 mt-2",children:Fe(B)}),e.jsx("p",{className:"text-sm text-blue-700 dark:text-blue-400 mt-1",children:"Elapsed Time"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[M?e.jsx("button",{onClick:je,className:"flex items-center justify-center gap-2 px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors min-w-[70px]",children:e.jsx(PE,{size:16})}):e.jsx("button",{onClick:Ue,className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors min-w-[70px]",children:e.jsx(Bv,{size:16})}),e.jsx("button",{onClick:()=>fe(!0),className:"flex items-center justify-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors min-w-[70px]",children:e.jsx(Na,{size:16})}),e.jsx("button",{onClick:Re,className:"flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors min-w-[70px]",children:e.jsx(rE,{size:16})})]})]})}),re?.is_on_hold&&!ne&&e.jsxs("div",{className:"bg-orange-50 dark:bg-orange-900/20 border border-orange-200 dark:border-orange-800 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-start mb-4",children:[e.jsx(Na,{size:24,className:"text-orange-600 dark:text-orange-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-800 dark:text-orange-300",children:"Complaint On Hold"}),e.jsxs("p",{className:"text-orange-700 dark:text-orange-400 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Reason:"})," ",re.reason]}),re.expected_resolution_date&&e.jsxs("p",{className:"text-orange-700 dark:text-orange-400",children:[e.jsx("span",{className:"font-medium",children:"Expected Resolution:"})," ",new Date(re.expected_resolution_date).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-3",children:"To resume work:"}),e.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-gray-600 dark:text-gray-300",children:[e.jsx("li",{children:"Verify your location (scan QR or enter House ID)"}),e.jsx("li",{children:'Click "Resume from Hold" button'}),e.jsx("li",{children:"The timer will resume from where it was paused"})]})]}),w?e.jsxs("div",{className:"mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(dn,{size:20,className:"text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"text-green-700 dark:text-green-300",children:"Location verified! You can now resume work."})]}),e.jsxs("button",{onClick:dt,className:"mt-3 w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2",disabled:b,children:[e.jsx(eE,{size:20}),"Resume from Hold"]})]}):e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-4",children:"Please verify your location first to resume work"})]}),l&&!ne&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Scanner Active"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:Ae,className:"flex items-center gap-2 px-3 py-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-100 rounded-lg text-sm hover:bg-gray-200 dark:hover:bg-gray-600",title:`Switch to ${U==="environment"?"Front":"Back"} Camera`,children:[e.jsx(Lv,{size:16}),e.jsx("span",{children:"Switch Camera"})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-3 py-2 bg-red-100 dark:bg-red-900/20 text-red-700 dark:text-red-300 rounded-lg text-sm hover:bg-red-200 dark:hover:bg-red-900/40",children:[e.jsx(mr,{size:16}),e.jsx("span",{children:"Cancel"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:"qr-reader",className:"rounded-lg overflow-hidden border-2 border-purple-500 text-black dark:text-white"}),e.jsx("div",{className:"absolute top-4 left-4 right-4 text-center z-10",children:e.jsxs("div",{className:"inline-block bg-black/70 text-white px-3 py-1 rounded-full text-sm",children:["Scanning ",U==="environment"?"Back Camera":"Front Camera"]})})]}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Scan the house QR code to verify location and start work"}),e.jsx("p",{className:"text-xs mt-1 text-purple-600",children:"QR contains House ID only"})]})]}),b&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:[e.jsx(Xt,{size:32,className:"animate-spin mx-auto text-purple-600 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Processing..."})]}),f&&!b&&!l&&!ne&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"House Verification"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[f.source==="manual"?"Manual Entry":"QR Scan"," Result"]})]}),e.jsxs("button",{onClick:Ce,className:"flex items-center gap-2 px-4 py-2 text-gray-700 dark:text-white bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors",children:[e.jsx(mc,{size:16}),e.jsx("span",{children:"Try Again"})]})]}),w?e.jsx("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"bg-green-100 dark:bg-green-800 p-2 rounded-lg mr-3",children:e.jsx(dn,{size:24,className:"text-green-600 dark:text-green-400"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-green-800 dark:text-green-300 mb-2",children:"Location Verified "}),e.jsx("p",{className:"text-green-700 dark:text-green-400",children:"Timer has been started automatically"}),e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"flex items-center justify-center bg-white dark:bg-gray-800 p-4 rounded-lg",children:[e.jsx(Cn,{size:24,className:"text-green-600 dark:text-green-400 mr-3"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Timer Status"}),e.jsx("p",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:"Running..."})]})]})})]})]})}):e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg p-6 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(Na,{size:24,className:"text-red-600 dark:text-red-400 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-red-800 dark:text-red-300 mb-2",children:"Verification Failed"}),e.jsx("p",{className:"text-red-700 dark:text-red-400",children:C}),e.jsxs("div",{className:"mt-3 text-sm text-red-600 dark:text-red-300",children:[e.jsx("p",{children:"Requirements to start work:"}),e.jsxs("ul",{className:"list-disc pl-5 mt-1",children:[e.jsx("li",{children:"House ID must match the complaint's house"}),e.jsx("li",{children:"House must exist in the system"}),e.jsx("li",{children:"You must be at the correct location"})]})]})]})]})})]}),!f&&!l&&!b&&!ne&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(qu,{size:64,className:"mx-auto text-purple-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-2",children:"Start Work"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Verify the house location to start working on this complaint"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-6",children:"You must verify that you are at the correct house before starting work"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"}),e.jsx("span",{className:"px-4 text-gray-500 dark:text-gray-400",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gray-300 dark:bg-gray-600"})]})}),e.jsxs("div",{children:[e.jsx(z0,{size:48,className:"mx-auto text-purple-400 mb-4"}),e.jsxs("button",{onClick:at,className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Iv,{size:20}),"Scan House QR Code"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"QR scanning will automatically verify and start timer"})]})]})}),ne&&e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block p-4 bg-green-100 dark:bg-green-900 rounded-full mb-4",children:e.jsx(qu,{size:32,className:"text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-2",children:"Work Started Successfully"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["You are now working on complaint: ",e.jsx("strong",{children:r?.complaint_number})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.jsx("p",{children:"Remember to stop the timer when you finish your work"}),e.jsx("p",{className:"mt-1",children:"The complaint will be marked as completed automatically"})]})]})})]})})]}),oe&&r&&e.jsx(gA,{complaint:r,onClose:()=>fe(!1),onHoldSuccess:me}),e.jsx(nr,{position:"top-center",autoClose:3e3,className:"mt-12 md:mt-0"})]})}function pA(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),l=xr(),d=()=>{l("/my-complaints")};return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx(vr,{onCollapse:a})}),r&&e.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40 transition-opacity duration-300",onClick:()=>i(!1)}),e.jsx("div",{className:`
            lg:hidden fixed left-0 top-0 h-full z-50
            transform transition-transform duration-300 ease-in-out
            ${r?"translate-x-0":"-translate-x-full"}
        `,children:e.jsx(vr,{onCollapse:a})}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"lg:hidden bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 p-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Sn,{size:16})}),e.jsx(Jy,{size:28,className:"text-purple-600 dark:text-purple-400 mr-2"}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-bold text-gray-800 dark:text-white",children:"My Service"})})]})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 lg:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"hidden lg:flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsx("div",{className:"flex flex-col",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("button",{onClick:d,className:"p-1 rounded-md hover:bg-gray-100 transition-colors duration-200 text-purple-700",children:e.jsx(Sn,{size:16})}),e.jsx(Jy,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Service Management"})]})})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl lg:rounded-2xl p-4 lg:p-6",children:e.jsx(uw,{})})]})})]})]})}function yA({onClose:t,onCreated:a}){const{auth:r}=E.useContext(Ir),[i,l]=E.useState(!1),[d,f]=E.useState({}),[h,b]=E.useState({name:"",description:"",color:"Purple"}),p=[{name:"Purple",value:"#667eea",displayName:"Purple"},{name:"Blue",value:"#3b82f6",displayName:"Blue"},{name:"Green",value:"#10b981",displayName:"Green"},{name:"Yellow",value:"#f59e0b",displayName:"Yellow"},{name:"Red",value:"#ef4444",displayName:"Red"},{name:"Pink",value:"#ec4899",displayName:"Pink"},{name:"Indigo",value:"#6366f1",displayName:"Indigo"},{name:"Teal",value:"#14b8a6",displayName:"Teal"},{name:"Orange",value:"#f97316",displayName:"Orange"},{name:"Gray",value:"#6b7280",displayName:"Gray"}],w=B=>{const H=p.find(U=>U.name===B);return H?H.value:"#667eea"},j=B=>{const H=p.find(U=>U.name===B);return H?`${H.displayName} (${H.value})`:`Custom (${w(B)})`},C=B=>!p.some(H=>H.name===B),_=()=>C(h.color)?h.color.startsWith("#")?h.color:"#667eea":w(h.color),R=()=>{const B={};return h.name.trim()?h.name.trim().length<2?B.name="Category name must be at least 2 characters":h.name.trim().length>50&&(B.name="Category name cannot exceed 50 characters"):B.name="Category name is required",h.description&&h.description.length>500&&(B.description="Description cannot exceed 500 characters"),h.color||(B.color="Please select a color"),B},A=B=>{const{name:H,value:U}=B.target;b(L=>({...L,[H]:U})),d[H]&&f(L=>({...L,[H]:""}))},O=B=>{b(H=>({...H,color:B})),d.color&&f(H=>({...H,color:""}))},I=B=>{b(H=>({...H,color:B})),d.color&&f(H=>({...H,color:""}))},M=async B=>{B.preventDefault();const H=R();if(Object.keys(H).length>0){f(H);return}try{l(!0);const U={name:h.name.trim(),description:h.description.trim(),color:h.color},L=await Se.post("/categories",U,{headers:{Authorization:`Bearer ${r.accessToken}`}});if(L.data.success)a&&a(),t();else throw new Error(L.data.message||"Failed to create category")}catch(U){console.error("Create category error:",U),U.response?.status===409?(f(L=>({...L,name:"A category with this name already exists"})),le.error("A category with this name already exists")):U.response?.status===401?(le.error("Session expired. Please login again."),t()):le.error(U.response?.data?.message||"Failed to create service category")}finally{l(!1)}},T=()=>{b({name:"",description:"",color:"Purple"}),f({})};return e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",name:"name",value:h.name,onChange:A,className:`w-full px-3 py-2 border  text-gray-700 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.name?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"e.g., Plumbing, Electrical, Carpentry",disabled:i}),d.name&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Required. Will be used for complaint categorization."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsx("textarea",{name:"description",value:h.description,onChange:A,rows:3,className:`w-full px-3 py-2 text-gray-700 border rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-700 dark:text-white ${d.description?"border-red-300 dark:border-red-600":"border-gray-300 dark:border-gray-600"}`,placeholder:"Brief description of what this category includes...",disabled:i}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Optional. Helps technicians understand the category scope."}),e.jsxs("p",{className:`text-xs ${h.description.length>500?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:[h.description.length,"/500"]})]}),d.description&&e.jsx("p",{className:"text-red-500 text-xs mt-1",children:d.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category Color *"}),e.jsxs("div",{className:"flex items-center mb-3 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg mr-3 border-2 border-gray-300 dark:border-gray-600 flex-shrink-0",style:{backgroundColor:_()}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:C(h.color)?"Custom Color":h.color}),e.jsx("div",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center",children:e.jsx("span",{className:"truncate",children:j(h.color)})})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-medium text-gray-600 dark:text-gray-400 mb-2",children:"Select from predefined colors:"}),e.jsx("div",{className:"grid grid-cols-5 gap-2",children:p.map(B=>e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsxs("button",{type:"button",onClick:()=>O(B.name),className:`relative w-full aspect-square rounded-lg border-2 transition-all hover:scale-105 mb-1 ${h.color===B.name?"border-purple-500 dark:border-purple-400 scale-105 shadow-md":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500"}`,title:`${B.displayName} (${B.value})`,disabled:i,children:[e.jsx("div",{className:"w-full h-full rounded",style:{backgroundColor:B.value}}),h.color===B.name&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 rounded",children:e.jsx(dn,{className:"text-white",size:14})})]}),e.jsx("span",{className:"text-xs text-gray-600 dark:text-gray-400 truncate w-full text-center",children:B.name})]},B.name))})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Custom Color"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Or create your own"})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(BE,{className:"text-gray-500 dark:text-gray-400 flex-shrink-0",size:18}),e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Color Picker"}),e.jsx("input",{type:"color",value:_(),onChange:B=>I(B.target.value),className:"w-full h-10 cursor-pointer rounded border border-gray-300 dark:border-gray-600",disabled:i})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1",children:"Hex Code"}),e.jsx("input",{type:"text",value:_(),onChange:B=>I(B.target.value),className:"w-full px-3 py-2  text-gray-700 text-sm border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-purple-500 focus:border-purple-500 dark:bg-gray-800 dark:text-white",placeholder:"#RRGGBB",pattern:"^#[0-9A-Fa-f]{6}$",disabled:i})]})]})]}),C(h.color)&&e.jsx("div",{className:"mt-3 p-2 bg-white dark:bg-gray-800 rounded border border-gray-200 dark:border-gray-600",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:_()}}),e.jsx("span",{className:"text-xs font-medium text-gray-700 dark:text-gray-300",children:"Custom Color Selected"})]}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:_()})]})})]}),d.color&&e.jsx("p",{className:"text-red-500 text-xs mt-2",children:d.color}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Color helps visually identify this category in lists and charts."})]}),e.jsxs("div",{className:"flex flex-col-reverse sm:flex-row sm:justify-end gap-3 pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:"Reset Form"}),e.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:i,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"flex items-center justify-center px-4 py-2 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:i?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{className:"animate-spin mr-2",size:16}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dn,{className:"mr-2",size:16}),"Create Category"]})})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"text-xs font-semibold text-blue-800 dark:text-blue-300 mb-1",children:"Tips for creating categories:"}),e.jsxs("ul",{className:"text-xs text-blue-700 dark:text-blue-400 space-y-1",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:'Use clear, descriptive names (e.g., "Electrical Repair" instead of "Electricity")'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Keep descriptions concise but informative"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Choose distinct colors for easy visual differentiation"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"mr-2",children:""}),e.jsx("span",{children:"Categories can be assigned to technicians for specialization"})]})]})]})]})}function bA({onClose:t,onEdited:a,serviceCategory:r}){const{auth:i}=E.useContext(Ir),[l,d]=E.useState(!1),[f,h]=E.useState(!1),[b,p]=E.useState({name:"",description:"",color:"#6b46c1"}),[w,j]=E.useState({}),[C,_]=E.useState(window.innerWidth<768);E.useEffect(()=>{const T=()=>{_(window.innerWidth<768)};return window.addEventListener("resize",T),()=>window.removeEventListener("resize",T)},[]),E.useEffect(()=>{r&&p({name:r.name||"",description:r.description||"",color:r.color||"#6b46c1"})},[r]);const R=()=>{const T={};return b.name.trim()?b.name.length>100&&(T.name="Name must be less than 100 characters"):T.name="Category name is required",b.description&&b.description.length>500&&(T.description="Description must be less than 500 characters"),b.color||(T.color="Color is required"),j(T),Object.keys(T).length===0},A=T=>{const{name:B,value:H}=T.target;p(U=>({...U,[B]:H})),w[B]&&j(U=>({...U,[B]:""}))},O=T=>{p(B=>({...B,color:T.target.value})),w.color&&j(B=>({...B,color:""}))},I=async T=>{if(T.preventDefault(),!!R()){h(!0);try{const B={name:b.name.trim(),color:b.color};b.description.trim()&&(B.description=b.description.trim());const H=await Se.put(`/categories/${r.id}`,B);H.data.success?a():le.error(H.data.message||"Failed to update category")}catch(B){if(console.error("Update category error:",B),B.response)switch(B.response.status){case 400:le.error("Invalid data provided");break;case 401:le.error("Session expired. Please login again.");break;case 403:le.error("You do not have permission to update this category");break;case 404:le.error("Category not found"),t();break;case 409:le.error(B.response.data?.message||"Category with this name already exists");break;default:le.error("Failed to update service category")}else B.request?le.error("No response from server. Please check your connection."):le.error("An error occurred while updating the category")}finally{h(!1)}}},M=[{value:"#6b46c1",label:"Purple",color:"bg-purple-500"},{value:"#4299e1",label:"Blue",color:"bg-blue-500"},{value:"#38a169",label:"Green",color:"bg-green-500"},{value:"#e53e3e",label:"Red",color:"bg-red-500"},{value:"#ed8936",label:"Orange",color:"bg-orange-500"},{value:"#d69e2e",label:"Yellow",color:"bg-yellow-500"},{value:"#4fd1c7",label:"Teal",color:"bg-teal-500"},{value:"#9f7aea",label:"Indigo",color:"bg-indigo-500"},{value:"#f687b3",label:"Pink",color:"bg-pink-500"}];return e.jsxs("form",{onSubmit:I,className:"space-y-4 md:space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Category Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:b.name,onChange:A,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.name?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white`,placeholder:"Enter category name",disabled:f,maxLength:100}),w.name&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.name}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.name.length,"/100 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description (Optional)"}),e.jsx("textarea",{id:"description",name:"description",value:b.description,onChange:A,rows:C?3:4,className:`w-full px-3 py-2 border rounded-lg text-sm md:text-base transition-colors ${w.description?"border-red-500 focus:border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 focus:border-purple-500 focus:ring-purple-500"} bg-white dark:bg-gray-700 text-gray-900 dark:text-white resize-none`,placeholder:"Enter category description",disabled:f,maxLength:500}),w.description&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.description}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:[b.description.length,"/500 characters"]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Color *"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Quick select:"}),e.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-9 gap-2",children:M.map(T=>e.jsx("button",{type:"button",onClick:()=>{p(B=>({...B,color:T.value})),w.color&&j(B=>({...B,color:""}))},className:`relative w-8 h-8 rounded-full flex items-center justify-center ${T.color} border-2 ${b.color===T.value?"border-gray-800 dark:border-white":"border-transparent"} hover:border-gray-400 dark:hover:border-gray-300 transition-colors`,title:T.label,disabled:f,children:b.color===T.value&&e.jsx(dn,{size:14,className:"text-white"})},T.value))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Custom color:"}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg border border-gray-300 dark:border-gray-600",style:{backgroundColor:b.color}}),e.jsx("div",{className:"flex-1",children:e.jsx("input",{type:"color",id:"color",name:"color",value:b.color,onChange:O,className:"w-full h-10 cursor-pointer",disabled:f})}),e.jsx("div",{className:"w-24",children:e.jsx("input",{type:"text",value:b.color,onChange:O,className:"w-full px-2 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"#000000",disabled:f,maxLength:7})})]}),w.color&&e.jsx("p",{className:"mt-1 text-xs text-red-600 dark:text-red-400",children:w.color})]})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-gray-700",children:[e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Current Category Information:"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Created:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.created_at).toLocaleDateString()})]}),e.jsxs("div",{className:"flex",children:[e.jsx("span",{className:"w-32 text-gray-600 dark:text-gray-400",children:"Last Updated:"}),e.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:new Date(r.updated_at).toLocaleDateString()})]})]})]})]}),e.jsxs("div",{className:`flex ${C?"flex-col space-y-3":"space-x-3"} pt-4 border-t border-gray-200 dark:border-gray-700`,children:[e.jsx("button",{type:"button",onClick:t,disabled:f,className:`flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg font-medium text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors ${C?"":"order-2"}`,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:f,className:`flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors flex items-center justify-center ${f?"opacity-70 cursor-not-allowed":""} ${C?"":"order-1"}`,children:f?e.jsxs(e.Fragment,{children:[e.jsx(Xt,{size:18,className:"animate-spin mr-2"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(dn,{size:18,className:"mr-2"}),"Update Category"]})})]}),Object.keys(w).length>0&&e.jsxs("div",{className:"sr-only",role:"alert",children:["Form has ",Object.keys(w).length," error(s). Please fix them before submitting."]})]})}function vA(){const[t,a]=E.useState(!1),[r,i]=E.useState(!1),[l,d]=E.useState(window.innerWidth<768),{auth:f}=E.useContext(Ir),h=xr(),[b,p]=E.useState(!1),[w,j]=E.useState([]),[C,_]=E.useState(null),[R,A]=E.useState(!1),[O,I]=E.useState(!1),[M,T]=E.useState(!1),[B,H]=E.useState(null),[U,L]=E.useState(!1),[P,z]=E.useState(null);E.useEffect(()=>{const re=()=>{d(window.innerWidth<768)};return window.addEventListener("resize",re),()=>window.removeEventListener("resize",re)},[]);const K=async()=>{try{p(!0),_(null);const re=await Se.get("/categories");re.data.success&&Array.isArray(re.data.data)?j(re.data.data):Array.isArray(re.data)?j(re.data):(console.warn("Unexpected response format:",re.data),j([]))}catch(re){console.error("Failed to load service categories:",re),le.error("Failed to load service categories. Please try again."),re.response?.status===401?(_("Unauthorized. Please login again."),h("/login")):re.response?.status===400?_("Company information missing. Please contact support."):_("Failed to load service categories. Please try again.")}finally{p(!1)}};E.useEffect(()=>{K()},[]);const te=()=>{I(!0)},V=()=>{I(!1)},ne=()=>{K(),I(!1),le.success("Service category created successfully!")},ie=re=>{H(re),T(!0)},X=()=>{T(!1),H(null)},q=()=>{K(),T(!1),H(null),le.success("Service category updated successfully!")},ce=re=>{z(re),L(!0)},we=async()=>{try{if(!P)return;await Se.delete(`/categories/${P.id}`),le.success("Category deleted successfully"),L(!1),z(null),K()}catch(re){console.error("Delete category error:",re),le.error("Failed to delete category. Please try again.")}},oe=()=>{L(!1),z(null)},fe=()=>e.jsx("button",{onClick:()=>i(!0),className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-gray-800 text-white rounded-lg shadow-lg",children:e.jsx(jc,{size:24})});return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 transition-colors duration-200",children:[e.jsx(fe,{}),e.jsx(vr,{onCollapse:a,isMobileOpen:r,onMobileClose:()=>i(!1)}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"lg:ml-20":"lg:ml-64"}`,children:[e.jsx(Hr,{onMobileMenuClick:()=>i(!0)}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 mb-4 md:mb-6 gap-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Gu,{size:l?32:40,className:"text-purple-600 dark:text-purple-400 mr-3 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-800 dark:text-white truncate",children:"Service Categories"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 dark:text-gray-400 truncate",children:"Manage your service categories"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:te,className:"flex items-center justify-center gap-2 px-3 md:px-4 py-2 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 hover:scale-105 text-sm md:text-base w-full sm:w-auto",children:[e.jsx(Fa,{size:l?16:20}),e.jsx("span",{className:"whitespace-nowrap",children:"Add New"})]})})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl p-4 md:p-6",children:b?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 md:py-12",children:[e.jsx(Xt,{size:l?24:32,className:"animate-spin text-purple-600"}),e.jsx("span",{className:"ml-2 mt-2 text-gray-600 dark:text-gray-300 text-sm md:text-base",children:"Loading service categories..."})]}):C?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx("div",{className:"text-red-600 dark:text-red-400 text-sm md:text-base mb-4",children:C}),e.jsx("button",{onClick:K,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Retry"})]}):w.length===0?e.jsxs("div",{className:"text-center py-8 md:py-12",children:[e.jsx($s,{size:l?32:48,className:"mx-auto mb-3 md:mb-4 text-gray-400"}),e.jsx("p",{className:"text-base md:text-lg text-gray-600 dark:text-gray-300 mb-2",children:"No service categories found"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Get started by adding your first service category"}),e.jsx("button",{onClick:te,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 text-sm md:text-base",children:"Create First Category"})]}):e.jsx(e.Fragment,{children:l?e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-3",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Total Categories: ",w.length]}),e.jsxs("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:[w.length," items"]})]})}),w.map(re=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 border border-gray-200 dark:border-gray-600",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-white truncate text-sm",children:re.name}),re.description&&e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1 line-clamp-2",children:re.description})]}),e.jsxs("div",{className:"flex gap-2 ml-2 flex-shrink-0",children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),ie(re)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 bg-green-50 dark:bg-green-900/20 rounded-lg",title:"Edit",children:e.jsx(ja,{size:16})}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),ce(re)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 bg-red-50 dark:bg-red-900/20 rounded-lg",title:"Delete",children:e.jsx(Fr,{size:16})})]})]}),re.color&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:re.color}}),e.jsxs("span",{children:["Color: ",re.color]})]})]},re.id))]}):e.jsxs("div",{className:"overflow-x-auto",children:[e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-3 rounded-lg mb-4",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Service Categories"}),e.jsxs("span",{className:"text-sm text-purple-600 dark:text-purple-400",children:[w.length," categories"]})]})}),e.jsxs("table",{className:"w-full table-auto min-w-[640px]",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Description"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Color"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.map(re=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:re.name}),e.jsx("td",{className:"px-4 py-4 text-sm text-gray-900 dark:text-white max-w-[300px] truncate",children:re.description||"No description"}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap",children:re.color?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 rounded-full mr-2 border border-gray-300 dark:border-gray-600",style:{backgroundColor:re.color}}),e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:re.color})]}):e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"No color"})}),e.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:Q=>{Q.stopPropagation(),ie(re)},className:"p-2 text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-300 hover:bg-green-50 dark:hover:bg-green-900/20 rounded-lg transition-colors",title:"Edit",children:e.jsx(ja,{size:18})}),e.jsx("button",{onClick:Q=>{Q.stopPropagation(),ce(re)},className:"p-2 text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:"Delete",children:e.jsx(Fr,{size:18})})]})})]},re.id))})]})]})})})]})})]}),O&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Create New Service Category"}),e.jsx("button",{onClick:V,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(yA,{onClose:V,onCreated:ne})]})})}),M&&B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-4 md:p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4 md:mb-6",children:[e.jsx("h2",{className:"text-lg md:text-xl font-semibold text-gray-800 dark:text-white",children:"Edit Service Category"}),e.jsx("button",{onClick:X,className:"text-gray-500 hover:text-gray-800 dark:hover:text-white text-xl transition-colors",children:""})]}),e.jsx(bA,{onClose:X,onEdited:q,serviceCategory:B})]})})}),U&&P&&e.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl p-6 w-full max-w-sm relative",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Confirm Deletion"}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:['Are you sure you want to delete "',P.name,'"?']}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{onClick:oe,className:"px-4 py-2 rounded-md bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200",children:"Cancel"}),e.jsx("button",{onClick:we,className:"px-4 py-2 rounded-md bg-red-600 text-white hover:bg-red-700 transition-colors duration-200",children:"Delete"})]})]})}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var fw=1252,wA=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],eg={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},tg=function(t){wA.indexOf(t)!=-1&&(fw=eg[0]=t)};function NA(){tg(1252)}var jn=function(t){tg(t)};function xw(){jn(1200),NA()}function Hb(t){for(var a=[],r=0,i=t.length;r<i;++r)a[r]=t.charCodeAt(r);return a}function kA(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return a.join("")}function hw(t){for(var a=[],r=0;r<t.length>>1;++r)a[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return a.join("")}var j0=function(t){var a=t.charCodeAt(0),r=t.charCodeAt(1);return a==255&&r==254?kA(t.slice(2)):a==254&&r==255?hw(t.slice(2)):a==65279?t.slice(1):t},ju=function(a){return String.fromCharCode(a)},Vb=function(a){return String.fromCharCode(a)},V0,bl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function Gb(t){for(var a="",r=0,i=0,l=0,d=0,f=0,h=0,b=0,p=0;p<t.length;)r=t.charCodeAt(p++),d=r>>2,i=t.charCodeAt(p++),f=(r&3)<<4|i>>4,l=t.charCodeAt(p++),h=(i&15)<<2|l>>6,b=l&63,isNaN(i)?h=b=64:isNaN(l)&&(b=64),a+=bl.charAt(d)+bl.charAt(f)+bl.charAt(h)+bl.charAt(b);return a}function Ws(t){var a="",r=0,i=0,l=0,d=0,f=0,h=0,b=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var p=0;p<t.length;)d=bl.indexOf(t.charAt(p++)),f=bl.indexOf(t.charAt(p++)),r=d<<2|f>>4,a+=String.fromCharCode(r),h=bl.indexOf(t.charAt(p++)),i=(f&15)<<4|h>>2,h!==64&&(a+=String.fromCharCode(i)),b=bl.indexOf(t.charAt(p++)),l=(h&3)<<6|b,b!==64&&(a+=String.fromCharCode(l));return a}var fr=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),po=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(a,r){return r?new Buffer(a,r):new Buffer(a)}:Buffer.from.bind(Buffer)}return function(){}}();function jl(t){return fr?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Xb(t){return fr?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var kn=function(a){return fr?po(a,"binary"):a.split("").map(function(r){return r.charCodeAt(0)&255})};function yo(t){if(Array.isArray(t))return t.map(function(i){return String.fromCharCode(i)}).join("");for(var a=[],r=0;r<t.length;++r)a[r]=String.fromCharCode(t[r]);return a.join("")}function rg(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return rg(new Uint8Array(t));for(var a=new Array(t.length),r=0;r<t.length;++r)a[r]=t[r];return a}var yl=fr?function(t){return Buffer.concat(t.map(function(a){return Buffer.isBuffer(a)?a:po(a)}))}:function(t){if(typeof Uint8Array<"u"){var a=0,r=0;for(a=0;a<t.length;++a)r+=t[a].length;var i=new Uint8Array(r),l=0;for(a=0,r=0;a<t.length;r+=l,++a)if(l=t[a].length,t[a]instanceof Uint8Array)i.set(t[a],r);else{if(typeof t[a]=="string")throw"wtf";i.set(new Uint8Array(t[a]),r)}return i}return[].concat.apply([],t.map(function(d){return Array.isArray(d)?d:[].slice.call(d)}))};function jA(t){for(var a=[],r=0,i=t.length+250,l=jl(t.length+255),d=0;d<t.length;++d){var f=t.charCodeAt(d);if(f<128)l[r++]=f;else if(f<2048)l[r++]=192|f>>6&31,l[r++]=128|f&63;else if(f>=55296&&f<57344){f=(f&1023)+64;var h=t.charCodeAt(++d)&1023;l[r++]=240|f>>8&7,l[r++]=128|f>>2&63,l[r++]=128|h>>6&15|(f&3)<<4,l[r++]=128|h&63}else l[r++]=224|f>>12&15,l[r++]=128|f>>6&63,l[r++]=128|f&63;r>i&&(a.push(l.slice(0,r)),r=0,l=jl(65535),i=65530)}return a.push(l.slice(0,r)),yl(a)}var ws=/\u0000/g,E0=/[\u0001-\u0006]/g;function fc(t){for(var a="",r=t.length-1;r>=0;)a+=t.charAt(r--);return a}function En(t,a){var r=""+t;return r.length>=a?r:sa("0",a-r.length)+r}function ag(t,a){var r=""+t;return r.length>=a?r:sa(" ",a-r.length)+r}function Ku(t,a){var r=""+t;return r.length>=a?r:r+sa(" ",a-r.length)}function EA(t,a){var r=""+Math.round(t);return r.length>=a?r:sa("0",a-r.length)+r}function CA(t,a){var r=""+t;return r.length>=a?r:sa("0",a-r.length)+r}var qb=Math.pow(2,32);function lc(t,a){if(t>qb||t<-qb)return EA(t,a);var r=Math.round(t);return CA(r,a)}function Zu(t,a){return a=a||0,t.length>=7+a&&(t.charCodeAt(a)|32)===103&&(t.charCodeAt(a+1)|32)===101&&(t.charCodeAt(a+2)|32)===110&&(t.charCodeAt(a+3)|32)===101&&(t.charCodeAt(a+4)|32)===114&&(t.charCodeAt(a+5)|32)===97&&(t.charCodeAt(a+6)|32)===108}var $b=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],tm=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function _A(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var tr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},Yb={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},AA={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Qu(t,a,r){for(var i=t<0?-1:1,l=t*i,d=0,f=1,h=0,b=1,p=0,w=0,j=Math.floor(l);p<a&&(j=Math.floor(l),h=j*f+d,w=j*p+b,!(l-j<5e-8));)l=1/(l-j),d=f,f=h,b=p,p=w;if(w>a&&(p>a?(w=b,h=d):(w=p,h=f)),!r)return[0,i*h,w];var C=Math.floor(i*h/w);return[C,i*h-C*w,w]}function eo(t,a,r){if(t>2958465||t<0)return null;var i=t|0,l=Math.floor(86400*(t-i)),d=0,f=[],h={D:i,T:l,u:86400*(t-i)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),a&&a.date1904&&(i+=1462),h.u>.9999&&(h.u=0,++l==86400&&(h.T=l=0,++i,++h.D)),i===60)f=r?[1317,10,29]:[1900,2,29],d=3;else if(i===0)f=r?[1317,8,29]:[1900,1,0],d=6;else{i>60&&--i;var b=new Date(1900,0,1);b.setDate(b.getDate()+i-1),f=[b.getFullYear(),b.getMonth()+1,b.getDate()],d=b.getDay(),i<60&&(d=(d+6)%7),r&&(d=IA(b,f))}return h.y=f[0],h.m=f[1],h.d=f[2],h.S=l%60,l=Math.floor(l/60),h.M=l%60,l=Math.floor(l/60),h.H=l,h.q=d,h}var mw=new Date(1899,11,31,0,0,0),SA=mw.getTime(),TA=new Date(1900,2,1,0,0,0);function gw(t,a){var r=t.getTime();return a?r-=1461*24*60*60*1e3:t>=TA&&(r+=1440*60*1e3),(r-(SA+(t.getTimezoneOffset()-mw.getTimezoneOffset())*6e4))/(1440*60*1e3)}function sg(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function RA(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function DA(t){var a=t<0?12:11,r=sg(t.toFixed(12));return r.length<=a||(r=t.toPrecision(10),r.length<=a)?r:t.toExponential(5)}function OA(t){var a=sg(t.toFixed(11));return a.length>(t<0?12:11)||a==="0"||a==="-0"?t.toPrecision(6):a}function G0(t){var a=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return a>=-4&&a<=-1?r=t.toPrecision(10+a):Math.abs(a)<=9?r=DA(t):a===10?r=t.toFixed(10).substr(0,12):r=OA(t),sg(RA(r.toUpperCase()))}function fo(t,a){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):G0(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return un(14,gw(t,a&&a.date1904),a)}throw new Error("unsupported value in General format: "+t)}function IA(t,a){a[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function FA(t,a,r,i){var l="",d=0,f=0,h=r.y,b,p=0;switch(t){case 98:h=r.y+543;case 121:switch(a.length){case 1:case 2:b=h%100,p=2;break;default:b=h%1e4,p=4;break}break;case 109:switch(a.length){case 1:case 2:b=r.m,p=a.length;break;case 3:return tm[r.m-1][1];case 5:return tm[r.m-1][0];default:return tm[r.m-1][2]}break;case 100:switch(a.length){case 1:case 2:b=r.d,p=a.length;break;case 3:return $b[r.q][0];default:return $b[r.q][1]}break;case 104:switch(a.length){case 1:case 2:b=1+(r.H+11)%12,p=a.length;break;default:throw"bad hour format: "+a}break;case 72:switch(a.length){case 1:case 2:b=r.H,p=a.length;break;default:throw"bad hour format: "+a}break;case 77:switch(a.length){case 1:case 2:b=r.M,p=a.length;break;default:throw"bad minute format: "+a}break;case 115:if(a!="s"&&a!="ss"&&a!=".0"&&a!=".00"&&a!=".000")throw"bad second format: "+a;return r.u===0&&(a=="s"||a=="ss")?En(r.S,a.length):(i>=2?f=i===3?1e3:100:f=i===1?10:1,d=Math.round(f*(r.S+r.u)),d>=60*f&&(d=0),a==="s"?d===0?"0":""+d/f:(l=En(d,2+i),a==="ss"?l.substr(0,2):"."+l.substr(2,a.length-1)));case 90:switch(a){case"[h]":case"[hh]":b=r.D*24+r.H;break;case"[m]":case"[mm]":b=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":b=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+a}p=a.length===3?1:2;break;case 101:b=h,p=1;break}var w=p>0?En(b,p):"";return w}function vl(t){var a=3;if(t.length<=a)return t;for(var r=t.length%a,i=t.substr(0,r);r!=t.length;r+=a)i+=(i.length>0?",":"")+t.substr(r,a);return i}var pw=/%/g;function MA(t,a,r){var i=a.replace(pw,""),l=a.length-i.length;return Ai(t,i,r*Math.pow(10,2*l))+sa("%",l)}function BA(t,a,r){for(var i=a.length-1;a.charCodeAt(i-1)===44;)--i;return Ai(t,a.substr(0,i),r/Math.pow(10,3*(a.length-i)))}function yw(t,a){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+yw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(i+1+(l+d)%l),r.indexOf("e")===-1){var f=Math.floor(Math.log(a)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,l)+"."+r.substr(2+l),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,p,w){return b+p+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var bw=/# (\?+)( ?)\/( ?)(\d+)/;function LA(t,a,r){var i=parseInt(t[4],10),l=Math.round(a*i),d=Math.floor(l/i),f=l-d*i,h=i;return r+(d===0?"":""+d)+" "+(f===0?sa(" ",t[1].length+1+t[4].length):ag(f,t[1].length)+t[2]+"/"+t[3]+En(h,t[4].length))}function PA(t,a,r){return r+(a===0?"":""+a)+sa(" ",t[1].length+2+t[4].length)}var vw=/^#*0*\.([0#]+)/,ww=/\).*[0#]/,Nw=/\(###\) ###\\?-####/;function ps(t){for(var a="",r,i=0;i!=t.length;++i)switch(r=t.charCodeAt(i)){case 35:break;case 63:a+=" ";break;case 48:a+="0";break;default:a+=String.fromCharCode(r)}return a}function Wb(t,a){var r=Math.pow(10,a);return""+Math.round(t*r)/r}function Kb(t,a){var r=t-Math.floor(t),i=Math.pow(10,a);return a<(""+Math.round(r*i)).length?0:Math.round(r*i)}function zA(t,a){return a<(""+Math.round((t-Math.floor(t))*Math.pow(10,a))).length?1:0}function UA(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function on(t,a,r){if(t.charCodeAt(0)===40&&!a.match(ww)){var i=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?on("n",i,r):"("+on("n",i,-r)+")"}if(a.charCodeAt(a.length-1)===44)return BA(t,a,r);if(a.indexOf("%")!==-1)return MA(t,a,r);if(a.indexOf("E")!==-1)return yw(a,r);if(a.charCodeAt(0)===36)return"$"+on(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),p=r<0?"-":"";if(a.match(/^00+$/))return p+lc(b,a.length);if(a.match(/^[#?]+$/))return l=lc(r,0),l==="0"&&(l=""),l.length>a.length?l:ps(a.substr(0,a.length-l.length))+l;if(d=a.match(bw))return LA(d,b,p);if(a.match(/^#+0+$/))return p+lc(b,a.length-a.indexOf("0"));if(d=a.match(vw))return l=Wb(r,d[1].length).replace(/^([^\.]+)$/,"$1."+ps(d[1])).replace(/\.$/,"."+ps(d[1])).replace(/\.(\d*)$/,function(R,A){return"."+A+sa("0",ps(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return p+Wb(b,d[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return p+vl(lc(b,0));if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+on(t,a,-r):vl(""+(Math.floor(r)+zA(r,d[1].length)))+"."+En(Kb(r,d[1].length),d[1].length);if(d=a.match(/^#,#*,#0/))return on(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=fc(on(t,a.replace(/[\\-]/g,""),r)),f=0,fc(fc(a.replace(/\\/g,"")).replace(/[0#]/g,function(R){return f<l.length?l.charAt(f++):R==="0"?"0":""}));if(a.match(Nw))return l=on(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=Qu(b,Math.pow(10,f)-1,!1),l=""+p,w=Ai("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=Ku(h[2],f),w.length<d[4].length&&(w=ps(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=Qu(b,Math.pow(10,f)-1,!0),p+(h[0]||(h[1]?"":"0"))+" "+(h[1]?ag(h[1],f)+d[2]+"/"+d[3]+Ku(h[2],f):sa(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=lc(r,0),a.length<=l.length?l:ps(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0?]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var j=a.indexOf(".")-f,C=a.length-l.length-j;return ps(a.substr(0,j)+l+a.substr(a.length-C))}if(d=a.match(/^00,000\.([#0]*0)$/))return f=Kb(r,d[1].length),r<0?"-"+on(t,a,-r):vl(UA(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?En(0,3-R.length):"")+R})+"."+En(f,d[1].length);switch(a){case"###,##0.00":return on(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var _=vl(lc(b,0));return _!=="0"?p+_:"";case"###,###.00":return on(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return on(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+a+"|")}function HA(t,a,r){for(var i=a.length-1;a.charCodeAt(i-1)===44;)--i;return Ai(t,a.substr(0,i),r/Math.pow(10,3*(a.length-i)))}function VA(t,a,r){var i=a.replace(pw,""),l=a.length-i.length;return Ai(t,i,r*Math.pow(10,2*l))+sa("%",l)}function kw(t,a){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(a==0)return"0.0E+0";if(a<0)return"-"+kw(t,-a);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var d=Math.floor(Math.log(a)*Math.LOG10E)%l;if(d<0&&(d+=l),r=(a/Math.pow(10,d)).toPrecision(i+1+(l+d)%l),!r.match(/[Ee]/)){var f=Math.floor(Math.log(a)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(f-r.length+d):r+="E+"+(f-d),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,b,p,w){return b+p+w.substr(0,(l+d)%l)+"."+w.substr(d)+"E"})}else r=a.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Jn(t,a,r){if(t.charCodeAt(0)===40&&!a.match(ww)){var i=a.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Jn("n",i,r):"("+Jn("n",i,-r)+")"}if(a.charCodeAt(a.length-1)===44)return HA(t,a,r);if(a.indexOf("%")!==-1)return VA(t,a,r);if(a.indexOf("E")!==-1)return kw(a,r);if(a.charCodeAt(0)===36)return"$"+Jn(t,a.substr(a.charAt(1)==" "?2:1),r);var l,d,f,h,b=Math.abs(r),p=r<0?"-":"";if(a.match(/^00+$/))return p+En(b,a.length);if(a.match(/^[#?]+$/))return l=""+r,r===0&&(l=""),l.length>a.length?l:ps(a.substr(0,a.length-l.length))+l;if(d=a.match(bw))return PA(d,b,p);if(a.match(/^#+0+$/))return p+En(b,a.length-a.indexOf("0"));if(d=a.match(vw))return l=(""+r).replace(/^([^\.]+)$/,"$1."+ps(d[1])).replace(/\.$/,"."+ps(d[1])),l=l.replace(/\.(\d*)$/,function(R,A){return"."+A+sa("0",ps(d[1]).length-A.length)}),a.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(a=a.replace(/^#+([0.])/,"$1"),d=a.match(/^(0*)\.(#*)$/))return p+(""+b).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,d[1].length?"0.":".");if(d=a.match(/^#{1,3},##0(\.?)$/))return p+vl(""+b);if(d=a.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Jn(t,a,-r):vl(""+r)+"."+sa("0",d[1].length);if(d=a.match(/^#,#*,#0/))return Jn(t,a.replace(/^#,#*,/,""),r);if(d=a.match(/^([0#]+)(\\?-([0#]+))+$/))return l=fc(Jn(t,a.replace(/[\\-]/g,""),r)),f=0,fc(fc(a.replace(/\\/g,"")).replace(/[0#]/g,function(R){return f<l.length?l.charAt(f++):R==="0"?"0":""}));if(a.match(Nw))return l=Jn(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var w="";if(d=a.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(d[4].length,7),h=Qu(b,Math.pow(10,f)-1,!1),l=""+p,w=Ai("n",d[1],h[1]),w.charAt(w.length-1)==" "&&(w=w.substr(0,w.length-1)+"0"),l+=w+d[2]+"/"+d[3],w=Ku(h[2],f),w.length<d[4].length&&(w=ps(d[4].substr(d[4].length-w.length))+w),l+=w,l;if(d=a.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return f=Math.min(Math.max(d[1].length,d[4].length),7),h=Qu(b,Math.pow(10,f)-1,!0),p+(h[0]||(h[1]?"":"0"))+" "+(h[1]?ag(h[1],f)+d[2]+"/"+d[3]+Ku(h[2],f):sa(" ",2*f+1+d[2].length+d[3].length));if(d=a.match(/^[#0?]+$/))return l=""+r,a.length<=l.length?l:ps(a.substr(0,a.length-l.length))+l;if(d=a.match(/^([#0]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(d[2].length,10)).replace(/([^0])0+$/,"$1"),f=l.indexOf(".");var j=a.indexOf(".")-f,C=a.length-l.length-j;return ps(a.substr(0,j)+l+a.substr(a.length-C))}if(d=a.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Jn(t,a,-r):vl(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?En(0,3-R.length):"")+R})+"."+En(0,d[1].length);switch(a){case"###,###":case"##,###":case"#,###":var _=vl(""+b);return _!=="0"?p+_:"";default:if(a.match(/\.[0#?]*$/))return Jn(t,a.slice(0,a.lastIndexOf(".")),r)+ps(a.slice(a.lastIndexOf(".")))}throw new Error("unsupported format |"+a+"|")}function Ai(t,a,r){return(r|0)===r?Jn(t,a,r):on(t,a,r)}function GA(t){for(var a=[],r=!1,i=0,l=0;i<t.length;++i)switch(t.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:a[a.length]=t.substr(l,i-l),l=i+1}if(a[a.length]=t.substr(l),r===!0)throw new Error("Format |"+t+"| unterminated string ");return a}var jw=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Cc(t){for(var a=0,r="",i="";a<t.length;)switch(r=t.charAt(a)){case"G":Zu(t,a)&&(a+=6),a++;break;case'"':for(;t.charCodeAt(++a)!==34&&a<t.length;);++a;break;case"\\":a+=2;break;case"_":a+=2;break;case"@":++a;break;case"B":case"b":if(t.charAt(a+1)==="1"||t.charAt(a+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(a,3).toUpperCase()==="A/P"||t.substr(a,5).toUpperCase()==="AM/PM"||t.substr(a,5).toUpperCase()==="/")return!0;++a;break;case"[":for(i=r;t.charAt(a++)!=="]"&&a<t.length;)i+=t.charAt(a);if(i.match(jw))return!0;break;case".":case"0":case"#":for(;a<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++a))>-1||r=="\\"&&t.charAt(a+1)=="-"&&"0#".indexOf(t.charAt(a+2))>-1););break;case"?":for(;t.charAt(++a)===r;);break;case"*":++a,(t.charAt(a)==" "||t.charAt(a)=="*")&&++a;break;case"(":case")":++a;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;a<t.length&&"0123456789".indexOf(t.charAt(++a))>-1;);break;case" ":++a;break;default:++a;break}return!1}function XA(t,a,r,i){for(var l=[],d="",f=0,h="",b="t",p,w,j,C="H";f<t.length;)switch(h=t.charAt(f)){case"G":if(!Zu(t,f))throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"G",v:"General"},f+=7;break;case'"':for(d="";(j=t.charCodeAt(++f))!==34&&f<t.length;)d+=String.fromCharCode(j);l[l.length]={t:"t",v:d},++f;break;case"\\":var _=t.charAt(++f),R=_==="("||_===")"?_:"t";l[l.length]={t:R,v:_},++f;break;case"_":l[l.length]={t:"t",v:" "},f+=2;break;case"@":l[l.length]={t:"T",v:a},++f;break;case"B":case"b":if(t.charAt(f+1)==="1"||t.charAt(f+1)==="2"){if(p==null&&(p=eo(a,r,t.charAt(f+1)==="2"),p==null))return"";l[l.length]={t:"X",v:t.substr(f,2)},b=h,f+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(a<0||p==null&&(p=eo(a,r),p==null))return"";for(d=h;++f<t.length&&t.charAt(f).toLowerCase()===h;)d+=h;h==="m"&&b.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=C),l[l.length]={t:h,v:d},b=h;break;case"A":case"a":case"":var A={t:h,v:h};if(p==null&&(p=eo(a,r)),t.substr(f,3).toUpperCase()==="A/P"?(p!=null&&(A.v=p.H>=12?"P":"A"),A.t="T",C="h",f+=3):t.substr(f,5).toUpperCase()==="AM/PM"?(p!=null&&(A.v=p.H>=12?"PM":"AM"),A.t="T",f+=5,C="h"):t.substr(f,5).toUpperCase()==="/"?(p!=null&&(A.v=p.H>=12?"":""),A.t="T",f+=5,C="h"):(A.t="t",++f),p==null&&A.t==="T")return"";l[l.length]=A,b=h;break;case"[":for(d=h;t.charAt(f++)!=="]"&&f<t.length;)d+=t.charAt(f);if(d.slice(-1)!=="]")throw'unterminated "[" block: |'+d+"|";if(d.match(jw)){if(p==null&&(p=eo(a,r),p==null))return"";l[l.length]={t:"Z",v:d.toLowerCase()},b=d.charAt(1)}else d.indexOf("$")>-1&&(d=(d.match(/\$([^-\[\]]*)/)||[])[1]||"$",Cc(t)||(l[l.length]={t:"t",v:d}));break;case".":if(p!=null){for(d=h;++f<t.length&&(h=t.charAt(f))==="0";)d+=h;l[l.length]={t:"s",v:d};break}case"0":case"#":for(d=h;++f<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(f))>-1;)d+=h;l[l.length]={t:"n",v:d};break;case"?":for(d=h;t.charAt(++f)===h;)d+=h;l[l.length]={t:h,v:d},b=h;break;case"*":++f,(t.charAt(f)==" "||t.charAt(f)=="*")&&++f;break;case"(":case")":l[l.length]={t:i===1?"t":h,v:h},++f;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(d=h;f<t.length&&"0123456789".indexOf(t.charAt(++f))>-1;)d+=t.charAt(f);l[l.length]={t:"D",v:d};break;case" ":l[l.length]={t:h,v:h},++f;break;case"$":l[l.length]={t:"t",v:"$"},++f;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"t",v:h},++f;break}var O=0,I=0,M;for(f=l.length-1,b="t";f>=0;--f)switch(l[f].t){case"h":case"H":l[f].t=C,b="h",O<1&&(O=1);break;case"s":(M=l[f].v.match(/\.0+$/))&&(I=Math.max(I,M[0].length-1)),O<3&&(O=3);case"d":case"y":case"M":case"e":b=l[f].t;break;case"m":b==="s"&&(l[f].t="M",O<2&&(O=2));break;case"X":break;case"Z":O<1&&l[f].v.match(/[Hh]/)&&(O=1),O<2&&l[f].v.match(/[Mm]/)&&(O=2),O<3&&l[f].v.match(/[Ss]/)&&(O=3)}switch(O){case 0:break;case 1:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M),p.M>=60&&(p.M=0,++p.H);break;case 2:p.u>=.5&&(p.u=0,++p.S),p.S>=60&&(p.S=0,++p.M);break}var T="",B;for(f=0;f<l.length;++f)switch(l[f].t){case"t":case"T":case" ":case"D":break;case"X":l[f].v="",l[f].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[f].v=FA(l[f].t.charCodeAt(0),l[f].v,p,I),l[f].t="t";break;case"n":case"?":for(B=f+1;l[B]!=null&&((h=l[B].t)==="?"||h==="D"||(h===" "||h==="t")&&l[B+1]!=null&&(l[B+1].t==="?"||l[B+1].t==="t"&&l[B+1].v==="/")||l[f].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(l[B].v==="/"||l[B].v===" "&&l[B+1]!=null&&l[B+1].t=="?"));)l[f].v+=l[B].v,l[B]={v:"",t:";"},++B;T+=l[f].v,f=B-1;break;case"G":l[f].t="t",l[f].v=fo(a,r);break}var H="",U,L;if(T.length>0){T.charCodeAt(0)==40?(U=a<0&&T.charCodeAt(0)===45?-a:a,L=Ai("n",T,U)):(U=a<0&&i>1?-a:a,L=Ai("n",T,U),U<0&&l[0]&&l[0].t=="t"&&(L=L.substr(1),l[0].v="-"+l[0].v)),B=L.length-1;var P=l.length;for(f=0;f<l.length;++f)if(l[f]!=null&&l[f].t!="t"&&l[f].v.indexOf(".")>-1){P=f;break}var z=l.length;if(P===l.length&&L.indexOf("E")===-1){for(f=l.length-1;f>=0;--f)l[f]==null||"n?".indexOf(l[f].t)===-1||(B>=l[f].v.length-1?(B-=l[f].v.length,l[f].v=L.substr(B+1,l[f].v.length)):B<0?l[f].v="":(l[f].v=L.substr(0,B+1),B=-1),l[f].t="t",z=f);B>=0&&z<l.length&&(l[z].v=L.substr(0,B+1)+l[z].v)}else if(P!==l.length&&L.indexOf("E")===-1){for(B=L.indexOf(".")-1,f=P;f>=0;--f)if(!(l[f]==null||"n?".indexOf(l[f].t)===-1)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")-1:l[f].v.length-1,H=l[f].v.substr(w+1);w>=0;--w)B>=0&&(l[f].v.charAt(w)==="0"||l[f].v.charAt(w)==="#")&&(H=L.charAt(B--)+H);l[f].v=H,l[f].t="t",z=f}for(B>=0&&z<l.length&&(l[z].v=L.substr(0,B+1)+l[z].v),B=L.indexOf(".")+1,f=P;f<l.length;++f)if(!(l[f]==null||"n?(".indexOf(l[f].t)===-1&&f!==P)){for(w=l[f].v.indexOf(".")>-1&&f===P?l[f].v.indexOf(".")+1:0,H=l[f].v.substr(0,w);w<l[f].v.length;++w)B<L.length&&(H+=L.charAt(B++));l[f].v=H,l[f].t="t",z=f}}}for(f=0;f<l.length;++f)l[f]!=null&&"n?".indexOf(l[f].t)>-1&&(U=i>1&&a<0&&f>0&&l[f-1].v==="-"?-a:a,l[f].v=Ai(l[f].t,l[f].v,U),l[f].t="t");var K="";for(f=0;f!==l.length;++f)l[f]!=null&&(K+=l[f].v);return K}var Zb=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function Qb(t,a){if(a==null)return!1;var r=parseFloat(a[2]);switch(a[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function qA(t,a){var r=GA(t),i=r.length,l=r[i-1].indexOf("@");if(i<4&&l>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof a!="number")return[4,r.length===4||l>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=l>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=l>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=l>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var d=a>0?r[0]:a<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,d];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var f=r[0].match(Zb),h=r[1].match(Zb);return Qb(a,f)?[i,r[0]]:Qb(a,h)?[i,r[1]]:[i,r[f!=null&&h!=null?2:1]]}return[i,d]}function un(t,a,r){r==null&&(r={});var i="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?i=r.dateNF:i=t;break;case"number":t==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:tr)[t],i==null&&(i=r.table&&r.table[Yb[t]]||tr[Yb[t]]),i==null&&(i=AA[t]||"General");break}if(Zu(i,0))return fo(a,r);a instanceof Date&&(a=gw(a,r.date1904));var l=qA(i,a);if(Zu(l[1]))return fo(a,r);if(a===!0)a="TRUE";else if(a===!1)a="FALSE";else if(a===""||a==null)return"";return XA(l[1],a,r,l[0])}function ao(t,a){if(typeof a!="number"){a=+a||-1;for(var r=0;r<392;++r){if(tr[r]==null){a<0&&(a=r);continue}if(tr[r]==t){a=r;break}}a<0&&(a=391)}return tr[a]=t,a}function Ew(){tr=_A()}var $A={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Cw=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function YA(t){var a=typeof t=="number"?tr[t]:t;return a=a.replace(Cw,"(\\d+)"),new RegExp("^"+a+"$")}function WA(t,a,r){var i=-1,l=-1,d=-1,f=-1,h=-1,b=-1;(a.match(Cw)||[]).forEach(function(j,C){var _=parseInt(r[C+1],10);switch(j.toLowerCase().charAt(0)){case"y":i=_;break;case"d":d=_;break;case"h":f=_;break;case"s":b=_;break;case"m":f>=0?h=_:l=_;break}}),b>=0&&h==-1&&l>=0&&(h=l,l=-1);var p=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(d>=1?d:1)).slice(-2);p.length==7&&(p="0"+p),p.length==8&&(p="20"+p);var w=("00"+(f>=0?f:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(b>=0?b:0)).slice(-2);return f==-1&&h==-1&&b==-1?p:i==-1&&l==-1&&d==-1?w:p+"T"+w}var KA=function(){var t={};t.version="1.2.0";function a(){for(var L=0,P=new Array(256),z=0;z!=256;++z)L=z,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,L=L&1?-306674912^L>>>1:L>>>1,P[z]=L;return typeof Int32Array<"u"?new Int32Array(P):P}var r=a();function i(L){var P=0,z=0,K=0,te=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(K=0;K!=256;++K)te[K]=L[K];for(K=0;K!=256;++K)for(z=L[K],P=256+K;P<4096;P+=256)z=te[P]=z>>>8^L[z&255];var V=[];for(K=1;K!=16;++K)V[K-1]=typeof Int32Array<"u"?te.subarray(K*256,K*256+256):te.slice(K*256,K*256+256);return V}var l=i(r),d=l[0],f=l[1],h=l[2],b=l[3],p=l[4],w=l[5],j=l[6],C=l[7],_=l[8],R=l[9],A=l[10],O=l[11],I=l[12],M=l[13],T=l[14];function B(L,P){for(var z=P^-1,K=0,te=L.length;K<te;)z=z>>>8^r[(z^L.charCodeAt(K++))&255];return~z}function H(L,P){for(var z=P^-1,K=L.length-15,te=0;te<K;)z=T[L[te++]^z&255]^M[L[te++]^z>>8&255]^I[L[te++]^z>>16&255]^O[L[te++]^z>>>24]^A[L[te++]]^R[L[te++]]^_[L[te++]]^C[L[te++]]^j[L[te++]]^w[L[te++]]^p[L[te++]]^b[L[te++]]^h[L[te++]]^f[L[te++]]^d[L[te++]]^r[L[te++]];for(K+=15;te<K;)z=z>>>8^r[(z^L[te++])&255];return~z}function U(L,P){for(var z=P^-1,K=0,te=L.length,V=0,ne=0;K<te;)V=L.charCodeAt(K++),V<128?z=z>>>8^r[(z^V)&255]:V<2048?(z=z>>>8^r[(z^(192|V>>6&31))&255],z=z>>>8^r[(z^(128|V&63))&255]):V>=55296&&V<57344?(V=(V&1023)+64,ne=L.charCodeAt(K++)&1023,z=z>>>8^r[(z^(240|V>>8&7))&255],z=z>>>8^r[(z^(128|V>>2&63))&255],z=z>>>8^r[(z^(128|ne>>6&15|(V&3)<<4))&255],z=z>>>8^r[(z^(128|ne&63))&255]):(z=z>>>8^r[(z^(224|V>>12&15))&255],z=z>>>8^r[(z^(128|V>>6&63))&255],z=z>>>8^r[(z^(128|V&63))&255]);return~z}return t.table=r,t.bstr=B,t.buf=H,t.str=U,t}(),gr=function(){var a={};a.version="1.2.1";function r(de,he){for(var ge=de.split("/"),Ne=he.split("/"),ke=0,_e=0,Ge=Math.min(ge.length,Ne.length);ke<Ge;++ke){if(_e=ge[ke].length-Ne[ke].length)return _e;if(ge[ke]!=Ne[ke])return ge[ke]<Ne[ke]?-1:1}return ge.length-Ne.length}function i(de){if(de.charAt(de.length-1)=="/")return de.slice(0,-1).indexOf("/")===-1?de:i(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(0,he+1)}function l(de){if(de.charAt(de.length-1)=="/")return l(de.slice(0,-1));var he=de.lastIndexOf("/");return he===-1?de:de.slice(he+1)}function d(de,he){typeof he=="string"&&(he=new Date(he));var ge=he.getHours();ge=ge<<6|he.getMinutes(),ge=ge<<5|he.getSeconds()>>>1,de.write_shift(2,ge);var Ne=he.getFullYear()-1980;Ne=Ne<<4|he.getMonth()+1,Ne=Ne<<5|he.getDate(),de.write_shift(2,Ne)}function f(de){var he=de.read_shift(2)&65535,ge=de.read_shift(2)&65535,Ne=new Date,ke=ge&31;ge>>>=5;var _e=ge&15;ge>>>=4,Ne.setMilliseconds(0),Ne.setFullYear(ge+1980),Ne.setMonth(_e-1),Ne.setDate(ke);var Ge=he&31;he>>>=5;var rt=he&63;return he>>>=6,Ne.setHours(he),Ne.setMinutes(rt),Ne.setSeconds(Ge<<1),Ne}function h(de){qa(de,0);for(var he={},ge=0;de.l<=de.length-4;){var Ne=de.read_shift(2),ke=de.read_shift(2),_e=de.l+ke,Ge={};switch(Ne){case 21589:ge=de.read_shift(1),ge&1&&(Ge.mtime=de.read_shift(4)),ke>5&&(ge&2&&(Ge.atime=de.read_shift(4)),ge&4&&(Ge.ctime=de.read_shift(4))),Ge.mtime&&(Ge.mt=new Date(Ge.mtime*1e3));break}de.l=_e,he[Ne]=Ge}return he}var b;function p(){return b||(b={})}function w(de,he){if(de[0]==80&&de[1]==75)return On(de,he);if((de[0]|32)==109&&(de[1]|32)==105)return Bi(de,he);if(de.length<512)throw new Error("CFB file size "+de.length+" < 512");var ge=3,Ne=512,ke=0,_e=0,Ge=0,rt=0,Be=0,qe=[],We=de.slice(0,512);qa(We,0);var ut=j(We);switch(ge=ut[0],ge){case 3:Ne=512;break;case 4:Ne=4096;break;case 0:if(ut[1]==0)return On(de,he);default:throw new Error("Major Version: Expected 3 or 4 saw "+ge)}Ne!==512&&(We=de.slice(0,Ne),qa(We,28));var ht=de.slice(0,Ne);C(We,ge);var gt=We.read_shift(4,"i");if(ge===3&&gt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+gt);We.l+=4,Ge=We.read_shift(4,"i"),We.l+=4,We.chk("00100000","Mini Stream Cutoff Size: "),rt=We.read_shift(4,"i"),ke=We.read_shift(4,"i"),Be=We.read_shift(4,"i"),_e=We.read_shift(4,"i");for(var yt=-1,vt=0;vt<109&&(yt=We.read_shift(4,"i"),!(yt<0));++vt)qe[vt]=yt;var Ut=_(de,Ne);O(Be,_e,Ut,Ne,qe);var tt=M(Ut,Ge,qe,Ne);tt[Ge].name="!Directory",ke>0&&rt!==ne&&(tt[rt].name="!MiniFAT"),tt[qe[0]].name="!FAT",tt.fat_addrs=qe,tt.ssz=Ne;var kr={},Ht=[],Ka=[],In=[];T(Ge,tt,Ut,Ht,ke,kr,Ka,rt),R(Ka,In,Ht),Ht.shift();var Qt={FileIndex:Ka,FullPaths:In};return he&&he.raw&&(Qt.raw={header:ht,sectors:Ut}),Qt}function j(de){if(de[de.l]==80&&de[de.l+1]==75)return[0,0];de.chk(ie,"Header Signature: "),de.l+=16;var he=de.read_shift(2,"u");return[de.read_shift(2,"u"),he]}function C(de,he){var ge=9;switch(de.l+=2,ge=de.read_shift(2)){case 9:if(he!=3)throw new Error("Sector Shift: Expected 9 saw "+ge);break;case 12:if(he!=4)throw new Error("Sector Shift: Expected 12 saw "+ge);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ge)}de.chk("0600","Mini Sector Shift: "),de.chk("000000000000","Reserved: ")}function _(de,he){for(var ge=Math.ceil(de.length/he)-1,Ne=[],ke=1;ke<ge;++ke)Ne[ke-1]=de.slice(ke*he,(ke+1)*he);return Ne[ge-1]=de.slice(ge*he),Ne}function R(de,he,ge){for(var Ne=0,ke=0,_e=0,Ge=0,rt=0,Be=ge.length,qe=[],We=[];Ne<Be;++Ne)qe[Ne]=We[Ne]=Ne,he[Ne]=ge[Ne];for(;rt<We.length;++rt)Ne=We[rt],ke=de[Ne].L,_e=de[Ne].R,Ge=de[Ne].C,qe[Ne]===Ne&&(ke!==-1&&qe[ke]!==ke&&(qe[Ne]=qe[ke]),_e!==-1&&qe[_e]!==_e&&(qe[Ne]=qe[_e])),Ge!==-1&&(qe[Ge]=Ne),ke!==-1&&Ne!=qe[Ne]&&(qe[ke]=qe[Ne],We.lastIndexOf(ke)<rt&&We.push(ke)),_e!==-1&&Ne!=qe[Ne]&&(qe[_e]=qe[Ne],We.lastIndexOf(_e)<rt&&We.push(_e));for(Ne=1;Ne<Be;++Ne)qe[Ne]===Ne&&(_e!==-1&&qe[_e]!==_e?qe[Ne]=qe[_e]:ke!==-1&&qe[ke]!==ke&&(qe[Ne]=qe[ke]));for(Ne=1;Ne<Be;++Ne)if(de[Ne].type!==0){if(rt=Ne,rt!=qe[rt])do rt=qe[rt],he[Ne]=he[rt]+"/"+he[Ne];while(rt!==0&&qe[rt]!==-1&&rt!=qe[rt]);qe[Ne]=-1}for(he[0]+="/",Ne=1;Ne<Be;++Ne)de[Ne].type!==2&&(he[Ne]+="/")}function A(de,he,ge){for(var Ne=de.start,ke=de.size,_e=[],Ge=Ne;ge&&ke>0&&Ge>=0;)_e.push(he.slice(Ge*V,Ge*V+V)),ke-=V,Ge=Zl(ge,Ge*4);return _e.length===0?Da(0):yl(_e).slice(0,de.size)}function O(de,he,ge,Ne,ke){var _e=ne;if(de===ne){if(he!==0)throw new Error("DIFAT chain shorter than expected")}else if(de!==-1){var Ge=ge[de],rt=(Ne>>>2)-1;if(!Ge)return;for(var Be=0;Be<rt&&(_e=Zl(Ge,Be*4))!==ne;++Be)ke.push(_e);O(Zl(Ge,Ne-4),he-1,ge,Ne,ke)}}function I(de,he,ge,Ne,ke){var _e=[],Ge=[];ke||(ke=[]);var rt=Ne-1,Be=0,qe=0;for(Be=he;Be>=0;){ke[Be]=!0,_e[_e.length]=Be,Ge.push(de[Be]);var We=ge[Math.floor(Be*4/Ne)];if(qe=Be*4&rt,Ne<4+qe)throw new Error("FAT boundary crossed: "+Be+" 4 "+Ne);if(!de[We])break;Be=Zl(de[We],qe)}return{nodes:_e,data:o2([Ge])}}function M(de,he,ge,Ne){var ke=de.length,_e=[],Ge=[],rt=[],Be=[],qe=Ne-1,We=0,ut=0,ht=0,gt=0;for(We=0;We<ke;++We)if(rt=[],ht=We+he,ht>=ke&&(ht-=ke),!Ge[ht]){Be=[];var yt=[];for(ut=ht;ut>=0;){yt[ut]=!0,Ge[ut]=!0,rt[rt.length]=ut,Be.push(de[ut]);var vt=ge[Math.floor(ut*4/Ne)];if(gt=ut*4&qe,Ne<4+gt)throw new Error("FAT boundary crossed: "+ut+" 4 "+Ne);if(!de[vt]||(ut=Zl(de[vt],gt),yt[ut]))break}_e[ht]={nodes:rt,data:o2([Be])}}return _e}function T(de,he,ge,Ne,ke,_e,Ge,rt){for(var Be=0,qe=Ne.length?2:0,We=he[de].data,ut=0,ht=0,gt;ut<We.length;ut+=128){var yt=We.slice(ut,ut+128);qa(yt,64),ht=yt.read_shift(2),gt=cg(yt,0,ht-qe),Ne.push(gt);var vt={name:gt,type:yt.read_shift(1),color:yt.read_shift(1),L:yt.read_shift(4,"i"),R:yt.read_shift(4,"i"),C:yt.read_shift(4,"i"),clsid:yt.read_shift(16),state:yt.read_shift(4,"i"),start:0,size:0},Ut=yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2);Ut!==0&&(vt.ct=B(yt,yt.l-8));var tt=yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2)+yt.read_shift(2);tt!==0&&(vt.mt=B(yt,yt.l-8)),vt.start=yt.read_shift(4,"i"),vt.size=yt.read_shift(4,"i"),vt.size<0&&vt.start<0&&(vt.size=vt.type=0,vt.start=ne,vt.name=""),vt.type===5?(Be=vt.start,ke>0&&Be!==ne&&(he[Be].name="!StreamData")):vt.size>=4096?(vt.storage="fat",he[vt.start]===void 0&&(he[vt.start]=I(ge,vt.start,he.fat_addrs,he.ssz)),he[vt.start].name=vt.name,vt.content=he[vt.start].data.slice(0,vt.size)):(vt.storage="minifat",vt.size<0?vt.size=0:Be!==ne&&vt.start!==ne&&he[Be]&&(vt.content=A(vt,he[Be].data,(he[rt]||{}).data))),vt.content&&qa(vt.content,0),_e[gt]=vt,Ge.push(vt)}}function B(de,he){return new Date((Xs(de,he+4)/1e7*Math.pow(2,32)+Xs(de,he)/1e7-11644473600)*1e3)}function H(de,he){return p(),w(b.readFileSync(de),he)}function U(de,he){var ge=he&&he.type;switch(ge||fr&&Buffer.isBuffer(de)&&(ge="buffer"),ge||"base64"){case"file":return H(de,he);case"base64":return w(kn(Ws(de)),he);case"binary":return w(kn(de),he)}return w(de,he)}function L(de,he){var ge=he||{},Ne=ge.root||"Root Entry";if(de.FullPaths||(de.FullPaths=[]),de.FileIndex||(de.FileIndex=[]),de.FullPaths.length!==de.FileIndex.length)throw new Error("inconsistent CFB structure");de.FullPaths.length===0&&(de.FullPaths[0]=Ne+"/",de.FileIndex[0]={name:Ne,type:5}),ge.CLSID&&(de.FileIndex[0].clsid=ge.CLSID),P(de)}function P(de){var he="Sh33tJ5";if(!gr.find(de,"/"+he)){var ge=Da(4);ge[0]=55,ge[1]=ge[3]=50,ge[2]=54,de.FileIndex.push({name:he,type:2,content:ge,size:4,L:69,R:69,C:69}),de.FullPaths.push(de.FullPaths[0]+he),z(de)}}function z(de,he){L(de);for(var ge=!1,Ne=!1,ke=de.FullPaths.length-1;ke>=0;--ke){var _e=de.FileIndex[ke];switch(_e.type){case 0:Ne?ge=!0:(de.FileIndex.pop(),de.FullPaths.pop());break;case 1:case 2:case 5:Ne=!0,isNaN(_e.R*_e.L*_e.C)&&(ge=!0),_e.R>-1&&_e.L>-1&&_e.R==_e.L&&(ge=!0);break;default:ge=!0;break}}if(!(!ge&&!he)){var Ge=new Date(1987,1,19),rt=0,Be=Object.create?Object.create(null):{},qe=[];for(ke=0;ke<de.FullPaths.length;++ke)Be[de.FullPaths[ke]]=!0,de.FileIndex[ke].type!==0&&qe.push([de.FullPaths[ke],de.FileIndex[ke]]);for(ke=0;ke<qe.length;++ke){var We=i(qe[ke][0]);Ne=Be[We],Ne||(qe.push([We,{name:l(We).replace("/",""),type:1,clsid:q,ct:Ge,mt:Ge,content:null}]),Be[We]=!0)}for(qe.sort(function(gt,yt){return r(gt[0],yt[0])}),de.FullPaths=[],de.FileIndex=[],ke=0;ke<qe.length;++ke)de.FullPaths[ke]=qe[ke][0],de.FileIndex[ke]=qe[ke][1];for(ke=0;ke<qe.length;++ke){var ut=de.FileIndex[ke],ht=de.FullPaths[ke];if(ut.name=l(ht).replace("/",""),ut.L=ut.R=ut.C=-(ut.color=1),ut.size=ut.content?ut.content.length:0,ut.start=0,ut.clsid=ut.clsid||q,ke===0)ut.C=qe.length>1?1:-1,ut.size=0,ut.type=5;else if(ht.slice(-1)=="/"){for(rt=ke+1;rt<qe.length&&i(de.FullPaths[rt])!=ht;++rt);for(ut.C=rt>=qe.length?-1:rt,rt=ke+1;rt<qe.length&&i(de.FullPaths[rt])!=i(ht);++rt);ut.R=rt>=qe.length?-1:rt,ut.type=1}else i(de.FullPaths[ke+1]||"")==i(ht)&&(ut.R=ke+1),ut.type=2}}}function K(de,he){var ge=he||{};if(ge.fileType=="mad")return la(de,ge);switch(z(de),ge.fileType){case"zip":return Qr(de,ge)}var Ne=function(gt){for(var yt=0,vt=0,Ut=0;Ut<gt.FileIndex.length;++Ut){var tt=gt.FileIndex[Ut];if(tt.content){var kr=tt.content.length;kr>0&&(kr<4096?yt+=kr+63>>6:vt+=kr+511>>9)}}for(var Ht=gt.FullPaths.length+3>>2,Ka=yt+7>>3,In=yt+127>>7,Qt=Ka+vt+Ht+In,Jt=Qt+127>>7,er=Jt<=109?0:Math.ceil((Jt-109)/127);Qt+Jt+er+127>>7>Jt;)er=++Jt<=109?0:Math.ceil((Jt-109)/127);var xs=[1,er,Jt,In,Ht,vt,yt,0];return gt.FileIndex[0].size=yt<<6,xs[7]=(gt.FileIndex[0].start=xs[0]+xs[1]+xs[2]+xs[3]+xs[4]+xs[5])+(xs[6]+7>>3),xs}(de),ke=Da(Ne[7]<<9),_e=0,Ge=0;{for(_e=0;_e<8;++_e)ke.write_shift(1,X[_e]);for(_e=0;_e<8;++_e)ke.write_shift(2,0);for(ke.write_shift(2,62),ke.write_shift(2,3),ke.write_shift(2,65534),ke.write_shift(2,9),ke.write_shift(2,6),_e=0;_e<3;++_e)ke.write_shift(2,0);for(ke.write_shift(4,0),ke.write_shift(4,Ne[2]),ke.write_shift(4,Ne[0]+Ne[1]+Ne[2]+Ne[3]-1),ke.write_shift(4,0),ke.write_shift(4,4096),ke.write_shift(4,Ne[3]?Ne[0]+Ne[1]+Ne[2]-1:ne),ke.write_shift(4,Ne[3]),ke.write_shift(-4,Ne[1]?Ne[0]-1:ne),ke.write_shift(4,Ne[1]),_e=0;_e<109;++_e)ke.write_shift(-4,_e<Ne[2]?Ne[1]+_e:-1)}if(Ne[1])for(Ge=0;Ge<Ne[1];++Ge){for(;_e<236+Ge*127;++_e)ke.write_shift(-4,_e<Ne[2]?Ne[1]+_e:-1);ke.write_shift(-4,Ge===Ne[1]-1?ne:Ge+1)}var rt=function(gt){for(Ge+=gt;_e<Ge-1;++_e)ke.write_shift(-4,_e+1);gt&&(++_e,ke.write_shift(-4,ne))};for(Ge=_e=0,Ge+=Ne[1];_e<Ge;++_e)ke.write_shift(-4,ce.DIFSECT);for(Ge+=Ne[2];_e<Ge;++_e)ke.write_shift(-4,ce.FATSECT);rt(Ne[3]),rt(Ne[4]);for(var Be=0,qe=0,We=de.FileIndex[0];Be<de.FileIndex.length;++Be)We=de.FileIndex[Be],We.content&&(qe=We.content.length,!(qe<4096)&&(We.start=Ge,rt(qe+511>>9)));for(rt(Ne[6]+7>>3);ke.l&511;)ke.write_shift(-4,ce.ENDOFCHAIN);for(Ge=_e=0,Be=0;Be<de.FileIndex.length;++Be)We=de.FileIndex[Be],We.content&&(qe=We.content.length,!(!qe||qe>=4096)&&(We.start=Ge,rt(qe+63>>6)));for(;ke.l&511;)ke.write_shift(-4,ce.ENDOFCHAIN);for(_e=0;_e<Ne[4]<<2;++_e){var ut=de.FullPaths[_e];if(!ut||ut.length===0){for(Be=0;Be<17;++Be)ke.write_shift(4,0);for(Be=0;Be<3;++Be)ke.write_shift(4,-1);for(Be=0;Be<12;++Be)ke.write_shift(4,0);continue}We=de.FileIndex[_e],_e===0&&(We.start=We.size?We.start-1:ne);var ht=_e===0&&ge.root||We.name;if(qe=2*(ht.length+1),ke.write_shift(64,ht,"utf16le"),ke.write_shift(2,qe),ke.write_shift(1,We.type),ke.write_shift(1,We.color),ke.write_shift(-4,We.L),ke.write_shift(-4,We.R),ke.write_shift(-4,We.C),We.clsid)ke.write_shift(16,We.clsid,"hex");else for(Be=0;Be<4;++Be)ke.write_shift(4,0);ke.write_shift(4,We.state||0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,0),ke.write_shift(4,We.start),ke.write_shift(4,We.size),ke.write_shift(4,0)}for(_e=1;_e<de.FileIndex.length;++_e)if(We=de.FileIndex[_e],We.size>=4096)if(ke.l=We.start+1<<9,fr&&Buffer.isBuffer(We.content))We.content.copy(ke,ke.l,0,We.size),ke.l+=We.size+511&-512;else{for(Be=0;Be<We.size;++Be)ke.write_shift(1,We.content[Be]);for(;Be&511;++Be)ke.write_shift(1,0)}for(_e=1;_e<de.FileIndex.length;++_e)if(We=de.FileIndex[_e],We.size>0&&We.size<4096)if(fr&&Buffer.isBuffer(We.content))We.content.copy(ke,ke.l,0,We.size),ke.l+=We.size+63&-64;else{for(Be=0;Be<We.size;++Be)ke.write_shift(1,We.content[Be]);for(;Be&63;++Be)ke.write_shift(1,0)}if(fr)ke.l=ke.length;else for(;ke.l<ke.length;)ke.write_shift(1,0);return ke}function te(de,he){var ge=de.FullPaths.map(function(Be){return Be.toUpperCase()}),Ne=ge.map(function(Be){var qe=Be.split("/");return qe[qe.length-(Be.slice(-1)=="/"?2:1)]}),ke=!1;he.charCodeAt(0)===47?(ke=!0,he=ge[0].slice(0,-1)+he):ke=he.indexOf("/")!==-1;var _e=he.toUpperCase(),Ge=ke===!0?ge.indexOf(_e):Ne.indexOf(_e);if(Ge!==-1)return de.FileIndex[Ge];var rt=!_e.match(E0);for(_e=_e.replace(ws,""),rt&&(_e=_e.replace(E0,"!")),Ge=0;Ge<ge.length;++Ge)if((rt?ge[Ge].replace(E0,"!"):ge[Ge]).replace(ws,"")==_e||(rt?Ne[Ge].replace(E0,"!"):Ne[Ge]).replace(ws,"")==_e)return de.FileIndex[Ge];return null}var V=64,ne=-2,ie="d0cf11e0a1b11ae1",X=[208,207,17,224,161,177,26,225],q="00000000000000000000000000000000",ce={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:ne,FREESECT:-1,HEADER_SIGNATURE:ie,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:q,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function we(de,he,ge){p();var Ne=K(de,ge);b.writeFileSync(he,Ne)}function oe(de){for(var he=new Array(de.length),ge=0;ge<de.length;++ge)he[ge]=String.fromCharCode(de[ge]);return he.join("")}function fe(de,he){var ge=K(de,he);switch(he&&he.type||"buffer"){case"file":return p(),b.writeFileSync(he.filename,ge),ge;case"binary":return typeof ge=="string"?ge:oe(ge);case"base64":return Gb(typeof ge=="string"?ge:oe(ge));case"buffer":if(fr)return Buffer.isBuffer(ge)?ge:po(ge);case"array":return typeof ge=="string"?kn(ge):ge}return ge}var re;function Q(de){try{var he=de.InflateRaw,ge=new he;if(ge._processChunk(new Uint8Array([3,0]),ge._finishFlushFlag),ge.bytesRead)re=de;else throw new Error("zlib does not expose bytesRead")}catch(Ne){console.error("cannot use native zlib: "+(Ne.message||Ne))}}function Y(de,he){if(!re)return kt(de,he);var ge=re.InflateRaw,Ne=new ge,ke=Ne._processChunk(de.slice(de.l),Ne._finishFlushFlag);return de.l+=Ne.bytesRead,ke}function ae(de){return re?re.deflateRawSync(de):Ft(de)}var se=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Z=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Re=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function je(de){var he=(de<<1|de<<11)&139536|(de<<5|de<<15)&558144;return(he>>16|he>>8|he)&255}for(var Ue=typeof Uint8Array<"u",Me=Ue?new Uint8Array(256):[],at=0;at<256;++at)Me[at]=je(at);function ye(de,he){var ge=Me[de&255];return he<=8?ge>>>8-he:(ge=ge<<8|Me[de>>8&255],he<=16?ge>>>16-he:(ge=ge<<8|Me[de>>16&255],ge>>>24-he))}function Ae(de,he){var ge=he&7,Ne=he>>>3;return(de[Ne]|(ge<=6?0:de[Ne+1]<<8))>>>ge&3}function Fe(de,he){var ge=he&7,Ne=he>>>3;return(de[Ne]|(ge<=5?0:de[Ne+1]<<8))>>>ge&7}function Ce(de,he){var ge=he&7,Ne=he>>>3;return(de[Ne]|(ge<=4?0:de[Ne+1]<<8))>>>ge&15}function Je(de,he){var ge=he&7,Ne=he>>>3;return(de[Ne]|(ge<=3?0:de[Ne+1]<<8))>>>ge&31}function be(de,he){var ge=he&7,Ne=he>>>3;return(de[Ne]|(ge<=1?0:de[Ne+1]<<8))>>>ge&127}function dt(de,he,ge){var Ne=he&7,ke=he>>>3,_e=(1<<ge)-1,Ge=de[ke]>>>Ne;return ge<8-Ne||(Ge|=de[ke+1]<<8-Ne,ge<16-Ne)||(Ge|=de[ke+2]<<16-Ne,ge<24-Ne)||(Ge|=de[ke+3]<<24-Ne),Ge&_e}function me(de,he,ge){var Ne=he&7,ke=he>>>3;return Ne<=5?de[ke]|=(ge&7)<<Ne:(de[ke]|=ge<<Ne&255,de[ke+1]=(ge&7)>>8-Ne),he+3}function Pe(de,he,ge){var Ne=he&7,ke=he>>>3;return ge=(ge&1)<<Ne,de[ke]|=ge,he+1}function pe(de,he,ge){var Ne=he&7,ke=he>>>3;return ge<<=Ne,de[ke]|=ge&255,ge>>>=8,de[ke+1]=ge,he+8}function lt(de,he,ge){var Ne=he&7,ke=he>>>3;return ge<<=Ne,de[ke]|=ge&255,ge>>>=8,de[ke+1]=ge&255,de[ke+2]=ge>>>8,he+16}function st(de,he){var ge=de.length,Ne=2*ge>he?2*ge:he+5,ke=0;if(ge>=he)return de;if(fr){var _e=Xb(Ne);if(de.copy)de.copy(_e);else for(;ke<de.length;++ke)_e[ke]=de[ke];return _e}else if(Ue){var Ge=new Uint8Array(Ne);if(Ge.set)Ge.set(de);else for(;ke<ge;++ke)Ge[ke]=de[ke];return Ge}return de.length=Ne,de}function jt(de){for(var he=new Array(de),ge=0;ge<de;++ge)he[ge]=0;return he}function At(de,he,ge){var Ne=1,ke=0,_e=0,Ge=0,rt=0,Be=de.length,qe=Ue?new Uint16Array(32):jt(32);for(_e=0;_e<32;++_e)qe[_e]=0;for(_e=Be;_e<ge;++_e)de[_e]=0;Be=de.length;var We=Ue?new Uint16Array(Be):jt(Be);for(_e=0;_e<Be;++_e)qe[ke=de[_e]]++,Ne<ke&&(Ne=ke),We[_e]=0;for(qe[0]=0,_e=1;_e<=Ne;++_e)qe[_e+16]=rt=rt+qe[_e-1]<<1;for(_e=0;_e<Be;++_e)rt=de[_e],rt!=0&&(We[_e]=qe[rt+16]++);var ut=0;for(_e=0;_e<Be;++_e)if(ut=de[_e],ut!=0)for(rt=ye(We[_e],Ne)>>Ne-ut,Ge=(1<<Ne+4-ut)-1;Ge>=0;--Ge)he[rt|Ge<<ut]=ut&15|_e<<4;return Ne}var Dt=Ue?new Uint16Array(512):jt(512),or=Ue?new Uint16Array(32):jt(32);if(!Ue){for(var Lt=0;Lt<512;++Lt)Dt[Lt]=0;for(Lt=0;Lt<32;++Lt)or[Lt]=0}(function(){for(var de=[],he=0;he<32;he++)de.push(5);At(de,or,32);var ge=[];for(he=0;he<=143;he++)ge.push(8);for(;he<=255;he++)ge.push(9);for(;he<=279;he++)ge.push(7);for(;he<=287;he++)ge.push(8);At(ge,Dt,288)})();var qt=function(){for(var he=Ue?new Uint8Array(32768):[],ge=0,Ne=0;ge<Re.length-1;++ge)for(;Ne<Re[ge+1];++Ne)he[Ne]=ge;for(;Ne<32768;++Ne)he[Ne]=29;var ke=Ue?new Uint8Array(259):[];for(ge=0,Ne=0;ge<Z.length-1;++ge)for(;Ne<Z[ge+1];++Ne)ke[Ne]=ge;function _e(rt,Be){for(var qe=0;qe<rt.length;){var We=Math.min(65535,rt.length-qe),ut=qe+We==rt.length;for(Be.write_shift(1,+ut),Be.write_shift(2,We),Be.write_shift(2,~We&65535);We-- >0;)Be[Be.l++]=rt[qe++]}return Be.l}function Ge(rt,Be){for(var qe=0,We=0,ut=Ue?new Uint16Array(32768):[];We<rt.length;){var ht=Math.min(65535,rt.length-We);if(ht<10){for(qe=me(Be,qe,+(We+ht==rt.length)),qe&7&&(qe+=8-(qe&7)),Be.l=qe/8|0,Be.write_shift(2,ht),Be.write_shift(2,~ht&65535);ht-- >0;)Be[Be.l++]=rt[We++];qe=Be.l*8;continue}qe=me(Be,qe,+(We+ht==rt.length)+2);for(var gt=0;ht-- >0;){var yt=rt[We];gt=(gt<<5^yt)&32767;var vt=-1,Ut=0;if((vt=ut[gt])&&(vt|=We&-32768,vt>We&&(vt-=32768),vt<We))for(;rt[vt+Ut]==rt[We+Ut]&&Ut<250;)++Ut;if(Ut>2){yt=ke[Ut],yt<=22?qe=pe(Be,qe,Me[yt+1]>>1)-1:(pe(Be,qe,3),qe+=5,pe(Be,qe,Me[yt-23]>>5),qe+=3);var tt=yt<8?0:yt-4>>2;tt>0&&(lt(Be,qe,Ut-Z[yt]),qe+=tt),yt=he[We-vt],qe=pe(Be,qe,Me[yt]>>3),qe-=3;var kr=yt<4?0:yt-2>>1;kr>0&&(lt(Be,qe,We-vt-Re[yt]),qe+=kr);for(var Ht=0;Ht<Ut;++Ht)ut[gt]=We&32767,gt=(gt<<5^rt[We])&32767,++We;ht-=Ut-1}else yt<=143?yt=yt+48:qe=Pe(Be,qe,1),qe=pe(Be,qe,Me[yt]),ut[gt]=We&32767,++We}qe=pe(Be,qe,0)-1}return Be.l=(qe+7)/8|0,Be.l}return function(Be,qe){return Be.length<8?_e(Be,qe):Ge(Be,qe)}}();function Ft(de){var he=Da(50+Math.floor(de.length*1.1)),ge=qt(de,he);return he.slice(0,ge)}var Ye=Ue?new Uint16Array(32768):jt(32768),Et=Ue?new Uint16Array(32768):jt(32768),Nt=Ue?new Uint16Array(128):jt(128),ot=1,St=1;function wt(de,he){var ge=Je(de,he)+257;he+=5;var Ne=Je(de,he)+1;he+=5;var ke=Ce(de,he)+4;he+=4;for(var _e=0,Ge=Ue?new Uint8Array(19):jt(19),rt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Be=1,qe=Ue?new Uint8Array(8):jt(8),We=Ue?new Uint8Array(8):jt(8),ut=Ge.length,ht=0;ht<ke;++ht)Ge[se[ht]]=_e=Fe(de,he),Be<_e&&(Be=_e),qe[_e]++,he+=3;var gt=0;for(qe[0]=0,ht=1;ht<=Be;++ht)We[ht]=gt=gt+qe[ht-1]<<1;for(ht=0;ht<ut;++ht)(gt=Ge[ht])!=0&&(rt[ht]=We[gt]++);var yt=0;for(ht=0;ht<ut;++ht)if(yt=Ge[ht],yt!=0){gt=Me[rt[ht]]>>8-yt;for(var vt=(1<<7-yt)-1;vt>=0;--vt)Nt[gt|vt<<yt]=yt&7|ht<<3}var Ut=[];for(Be=1;Ut.length<ge+Ne;)switch(gt=Nt[be(de,he)],he+=gt&7,gt>>>=3){case 16:for(_e=3+Ae(de,he),he+=2,gt=Ut[Ut.length-1];_e-- >0;)Ut.push(gt);break;case 17:for(_e=3+Fe(de,he),he+=3;_e-- >0;)Ut.push(0);break;case 18:for(_e=11+be(de,he),he+=7;_e-- >0;)Ut.push(0);break;default:Ut.push(gt),Be<gt&&(Be=gt);break}var tt=Ut.slice(0,ge),kr=Ut.slice(ge);for(ht=ge;ht<286;++ht)tt[ht]=0;for(ht=Ne;ht<30;++ht)kr[ht]=0;return ot=At(tt,Ye,286),St=At(kr,Et,30),he}function nt(de,he){if(de[0]==3&&!(de[1]&3))return[jl(he),2];for(var ge=0,Ne=0,ke=Xb(he||1<<18),_e=0,Ge=ke.length>>>0,rt=0,Be=0;(Ne&1)==0;){if(Ne=Fe(de,ge),ge+=3,Ne>>>1)Ne>>1==1?(rt=9,Be=5):(ge=wt(de,ge),rt=ot,Be=St);else{ge&7&&(ge+=8-(ge&7));var qe=de[ge>>>3]|de[(ge>>>3)+1]<<8;if(ge+=32,qe>0)for(!he&&Ge<_e+qe&&(ke=st(ke,_e+qe),Ge=ke.length);qe-- >0;)ke[_e++]=de[ge>>>3],ge+=8;continue}for(;;){!he&&Ge<_e+32767&&(ke=st(ke,_e+32767),Ge=ke.length);var We=dt(de,ge,rt),ut=Ne>>>1==1?Dt[We]:Ye[We];if(ge+=ut&15,ut>>>=4,(ut>>>8&255)===0)ke[_e++]=ut;else{if(ut==256)break;ut-=257;var ht=ut<8?0:ut-4>>2;ht>5&&(ht=0);var gt=_e+Z[ut];ht>0&&(gt+=dt(de,ge,ht),ge+=ht),We=dt(de,ge,Be),ut=Ne>>>1==1?or[We]:Et[We],ge+=ut&15,ut>>>=4;var yt=ut<4?0:ut-2>>1,vt=Re[ut];for(yt>0&&(vt+=dt(de,ge,yt),ge+=yt),!he&&Ge<gt&&(ke=st(ke,gt+100),Ge=ke.length);_e<gt;)ke[_e]=ke[_e-vt],++_e}}}return he?[ke,ge+7>>>3]:[ke.slice(0,_e),ge+7>>>3]}function kt(de,he){var ge=de.slice(de.l||0),Ne=nt(ge,he);return de.l+=Ne[1],Ne[0]}function Is(de,he){if(de)typeof console<"u"&&console.error(he);else throw new Error(he)}function On(de,he){var ge=de;qa(ge,0);var Ne=[],ke=[],_e={FileIndex:Ne,FullPaths:ke};L(_e,{root:he.root});for(var Ge=ge.length-4;(ge[Ge]!=80||ge[Ge+1]!=75||ge[Ge+2]!=5||ge[Ge+3]!=6)&&Ge>=0;)--Ge;ge.l=Ge+4,ge.l+=4;var rt=ge.read_shift(2);ge.l+=6;var Be=ge.read_shift(4);for(ge.l=Be,Ge=0;Ge<rt;++Ge){ge.l+=20;var qe=ge.read_shift(4),We=ge.read_shift(4),ut=ge.read_shift(2),ht=ge.read_shift(2),gt=ge.read_shift(2);ge.l+=8;var yt=ge.read_shift(4),vt=h(ge.slice(ge.l+ut,ge.l+ut+ht));ge.l+=ut+ht+gt;var Ut=ge.l;ge.l=yt+4,Tt(ge,qe,We,_e,vt),ge.l=Ut}return _e}function Tt(de,he,ge,Ne,ke){de.l+=2;var _e=de.read_shift(2),Ge=de.read_shift(2),rt=f(de);if(_e&8257)throw new Error("Unsupported ZIP encryption");for(var Be=de.read_shift(4),qe=de.read_shift(4),We=de.read_shift(4),ut=de.read_shift(2),ht=de.read_shift(2),gt="",yt=0;yt<ut;++yt)gt+=String.fromCharCode(de[de.l++]);if(ht){var vt=h(de.slice(de.l,de.l+ht));(vt[21589]||{}).mt&&(rt=vt[21589].mt),((ke||{})[21589]||{}).mt&&(rt=ke[21589].mt)}de.l+=ht;var Ut=de.slice(de.l,de.l+qe);switch(Ge){case 8:Ut=Y(de,We);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ge)}var tt=!1;_e&8&&(Be=de.read_shift(4),Be==134695760&&(Be=de.read_shift(4),tt=!0),qe=de.read_shift(4),We=de.read_shift(4)),qe!=he&&Is(tt,"Bad compressed size: "+he+" != "+qe),We!=ge&&Is(tt,"Bad uncompressed size: "+ge+" != "+We),Lr(Ne,gt,Ut,{unsafe:!0,mt:rt})}function Qr(de,he){var ge=he||{},Ne=[],ke=[],_e=Da(1),Ge=ge.compression?8:0,rt=0,Be=0,qe=0,We=0,ut=0,ht=de.FullPaths[0],gt=ht,yt=de.FileIndex[0],vt=[],Ut=0;for(Be=1;Be<de.FullPaths.length;++Be)if(gt=de.FullPaths[Be].slice(ht.length),yt=de.FileIndex[Be],!(!yt.size||!yt.content||gt=="Sh33tJ5")){var tt=We,kr=Da(gt.length);for(qe=0;qe<gt.length;++qe)kr.write_shift(1,gt.charCodeAt(qe)&127);kr=kr.slice(0,kr.l),vt[ut]=KA.buf(yt.content,0);var Ht=yt.content;Ge==8&&(Ht=ae(Ht)),_e=Da(30),_e.write_shift(4,67324752),_e.write_shift(2,20),_e.write_shift(2,rt),_e.write_shift(2,Ge),yt.mt?d(_e,yt.mt):_e.write_shift(4,0),_e.write_shift(-4,vt[ut]),_e.write_shift(4,Ht.length),_e.write_shift(4,yt.content.length),_e.write_shift(2,kr.length),_e.write_shift(2,0),We+=_e.length,Ne.push(_e),We+=kr.length,Ne.push(kr),We+=Ht.length,Ne.push(Ht),_e=Da(46),_e.write_shift(4,33639248),_e.write_shift(2,0),_e.write_shift(2,20),_e.write_shift(2,rt),_e.write_shift(2,Ge),_e.write_shift(4,0),_e.write_shift(-4,vt[ut]),_e.write_shift(4,Ht.length),_e.write_shift(4,yt.content.length),_e.write_shift(2,kr.length),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(4,0),_e.write_shift(4,tt),Ut+=_e.l,ke.push(_e),Ut+=kr.length,ke.push(kr),++ut}return _e=Da(22),_e.write_shift(4,101010256),_e.write_shift(2,0),_e.write_shift(2,0),_e.write_shift(2,ut),_e.write_shift(2,ut),_e.write_shift(4,Ut),_e.write_shift(4,We),_e.write_shift(2,0),yl([yl(Ne),yl(ke),_e])}var Ks={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Al(de,he){if(de.ctype)return de.ctype;var ge=de.name||"",Ne=ge.match(/\.([^\.]+)$/);return Ne&&Ks[Ne[1]]||he&&(Ne=(ge=he).match(/[\.\\]([^\.\\])+$/),Ne&&Ks[Ne[1]])?Ks[Ne[1]]:"application/octet-stream"}function Wa(de){for(var he=Gb(de),ge=[],Ne=0;Ne<he.length;Ne+=76)ge.push(he.slice(Ne,Ne+76));return ge.join(`\r
`)+`\r
`}function ii(de){var he=de.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(qe){var We=qe.charCodeAt(0).toString(16).toUpperCase();return"="+(We.length==1?"0"+We:We)});he=he.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),he.charAt(0)==`
`&&(he="=0D"+he.slice(1)),he=he.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ge=[],Ne=he.split(`\r
`),ke=0;ke<Ne.length;++ke){var _e=Ne[ke];if(_e.length==0){ge.push("");continue}for(var Ge=0;Ge<_e.length;){var rt=76,Be=_e.slice(Ge,Ge+rt);Be.charAt(rt-1)=="="?rt--:Be.charAt(rt-2)=="="?rt-=2:Be.charAt(rt-3)=="="&&(rt-=3),Be=_e.slice(Ge,Ge+rt),Ge+=rt,Ge<_e.length&&(Be+="="),ge.push(Be)}}return ge.join(`\r
`)}function Jr(de){for(var he=[],ge=0;ge<de.length;++ge){for(var Ne=de[ge];ge<=de.length&&Ne.charAt(Ne.length-1)=="=";)Ne=Ne.slice(0,Ne.length-1)+de[++ge];he.push(Ne)}for(var ke=0;ke<he.length;++ke)he[ke]=he[ke].replace(/[=][0-9A-Fa-f]{2}/g,function(_e){return String.fromCharCode(parseInt(_e.slice(1),16))});return kn(he.join(`\r
`))}function hn(de,he,ge){for(var Ne="",ke="",_e="",Ge,rt=0;rt<10;++rt){var Be=he[rt];if(!Be||Be.match(/^\s*$/))break;var qe=Be.match(/^(.*?):\s*([^\s].*)$/);if(qe)switch(qe[1].toLowerCase()){case"content-location":Ne=qe[2].trim();break;case"content-type":_e=qe[2].trim();break;case"content-transfer-encoding":ke=qe[2].trim();break}}switch(++rt,ke.toLowerCase()){case"base64":Ge=kn(Ws(he.slice(rt).join("")));break;case"quoted-printable":Ge=Jr(he.slice(rt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+ke)}var We=Lr(de,Ne.slice(ge.length),Ge,{unsafe:!0});_e&&(We.ctype=_e)}function Bi(de,he){if(oe(de.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ge=he&&he.root||"",Ne=(fr&&Buffer.isBuffer(de)?de.toString("binary"):oe(de)).split(`\r
`),ke=0,_e="";for(ke=0;ke<Ne.length;++ke)if(_e=Ne[ke],!!/^Content-Location:/i.test(_e)&&(_e=_e.slice(_e.indexOf("file")),ge||(ge=_e.slice(0,_e.lastIndexOf("/")+1)),_e.slice(0,ge.length)!=ge))for(;ge.length>0&&(ge=ge.slice(0,ge.length-1),ge=ge.slice(0,ge.lastIndexOf("/")+1),_e.slice(0,ge.length)!=ge););var Ge=(Ne[1]||"").match(/boundary="(.*?)"/);if(!Ge)throw new Error("MAD cannot find boundary");var rt="--"+(Ge[1]||""),Be=[],qe=[],We={FileIndex:Be,FullPaths:qe};L(We);var ut,ht=0;for(ke=0;ke<Ne.length;++ke){var gt=Ne[ke];gt!==rt&&gt!==rt+"--"||(ht++&&hn(We,Ne.slice(ut,ke),ge),ut=ke)}return We}function la(de,he){var ge=he||{},Ne=ge.boundary||"SheetJS";Ne="------="+Ne;for(var ke=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ne.slice(2)+'"',"","",""],_e=de.FullPaths[0],Ge=_e,rt=de.FileIndex[0],Be=1;Be<de.FullPaths.length;++Be)if(Ge=de.FullPaths[Be].slice(_e.length),rt=de.FileIndex[Be],!(!rt.size||!rt.content||Ge=="Sh33tJ5")){Ge=Ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Ut){return"_x"+Ut.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Ut){return"_u"+Ut.charCodeAt(0).toString(16)+"_"});for(var qe=rt.content,We=fr&&Buffer.isBuffer(qe)?qe.toString("binary"):oe(qe),ut=0,ht=Math.min(1024,We.length),gt=0,yt=0;yt<=ht;++yt)(gt=We.charCodeAt(yt))>=32&&gt<128&&++ut;var vt=ut>=ht*4/5;ke.push(Ne),ke.push("Content-Location: "+(ge.root||"file:///C:/SheetJS/")+Ge),ke.push("Content-Transfer-Encoding: "+(vt?"quoted-printable":"base64")),ke.push("Content-Type: "+Al(rt,Ge)),ke.push(""),ke.push(vt?ii(We):Wa(We))}return ke.push(Ne+`--\r
`),ke.join(`\r
`)}function ha(de){var he={};return L(he,de),he}function Lr(de,he,ge,Ne){var ke=Ne&&Ne.unsafe;ke||L(de);var _e=!ke&&gr.find(de,he);if(!_e){var Ge=de.FullPaths[0];he.slice(0,Ge.length)==Ge?Ge=he:(Ge.slice(-1)!="/"&&(Ge+="/"),Ge=(Ge+he).replace("//","/")),_e={name:l(he),type:2},de.FileIndex.push(_e),de.FullPaths.push(Ge),ke||gr.utils.cfb_gc(de)}return _e.content=ge,_e.size=ge?ge.length:0,Ne&&(Ne.CLSID&&(_e.clsid=Ne.CLSID),Ne.mt&&(_e.mt=Ne.mt),Ne.ct&&(_e.ct=Ne.ct)),_e}function Zs(de,he){L(de);var ge=gr.find(de,he);if(ge){for(var Ne=0;Ne<de.FileIndex.length;++Ne)if(de.FileIndex[Ne]==ge)return de.FileIndex.splice(Ne,1),de.FullPaths.splice(Ne,1),!0}return!1}function ma(de,he,ge){L(de);var Ne=gr.find(de,he);if(Ne){for(var ke=0;ke<de.FileIndex.length;++ke)if(de.FileIndex[ke]==Ne)return de.FileIndex[ke].name=l(ge),de.FullPaths[ke]=ge,!0}return!1}function mn(de){z(de,!0)}return a.find=te,a.read=U,a.parse=w,a.write=fe,a.writeFile=we,a.utils={cfb_new:ha,cfb_add:Lr,cfb_del:Zs,cfb_mov:ma,cfb_gc:mn,ReadShift:A0,CheckField:Yw,prep_blob:qa,bconcat:yl,use_zlib:Q,_deflateRaw:Ft,_inflateRaw:kt,consts:ce},a}();function ZA(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var a=File(t);a.open("r"),a.encoding="binary";var r=a.read();return a.close(),r}catch(i){if(!i.message||!i.message.match(/onstruct/))throw i}throw new Error("Cannot access file "+t)}function ti(t){for(var a=Object.keys(t),r=[],i=0;i<a.length;++i)Object.prototype.hasOwnProperty.call(t,a[i])&&r.push(a[i]);return r}function ng(t){for(var a=[],r=ti(t),i=0;i!==r.length;++i)a[t[r[i]]]=r[i];return a}var Ju=new Date(1899,11,30,0,0,0);function ks(t,a){var r=t.getTime(),i=Ju.getTime()+(t.getTimezoneOffset()-Ju.getTimezoneOffset())*6e4;return(r-i)/(1440*60*1e3)}var _w=new Date,QA=Ju.getTime()+(_w.getTimezoneOffset()-Ju.getTimezoneOffset())*6e4,Jb=_w.getTimezoneOffset();function Nf(t){var a=new Date;return a.setTime(t*24*60*60*1e3+QA),a.getTimezoneOffset()!==Jb&&a.setTime(a.getTime()+(a.getTimezoneOffset()-Jb)*6e4),a}function JA(t){var a=0,r=0,i=!1,l=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!l)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var d=1;d!=l.length;++d)if(l[d]){switch(r=1,d>3&&(i=!0),l[d].slice(l[d].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+l[d].slice(l[d].length-1));case"D":r*=24;case"H":r*=60;case"M":if(i)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}a+=r*parseInt(l[d],10)}return a}var e2=new Date("2017-02-19T19:06:09.000Z"),Aw=isNaN(e2.getFullYear())?new Date("2/19/17"):e2,eS=Aw.getFullYear()==2017;function Ua(t,a){var r=new Date(t);if(eS)return a>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):a<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(Aw.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return t.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var l=t.match(/\d+/g)||["2017","2","19","0","0","0"],d=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return t.indexOf("Z")>-1&&(d=new Date(d.getTime()-d.getTimezoneOffset()*60*1e3)),d}function xo(t,a){if(fr&&Buffer.isBuffer(t)){if(a){if(t[0]==255&&t[1]==254)return _0(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return _0(hw(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(a){if(t[0]==255&&t[1]==254)return _0(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return _0(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(d){return r[d]||d})}catch{}for(var i=[],l=0;l!=t.length;++l)i.push(String.fromCharCode(t[l]));return i.join("")}function $a(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var a={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(a[r]=$a(t[r]));return a}function sa(t,a){for(var r="";r.length<a;)r+=t;return r}function _n(t){var a=Number(t);if(!isNaN(a))return isFinite(a)?a:NaN;if(!/\d/.test(t))return a;var r=1,i=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(a=Number(i))||(i=i.replace(/[(](.*)[)]/,function(l,d){return r=-r,d}),!isNaN(a=Number(i)))?a/r:a}var tS=["january","february","march","april","may","june","july","august","september","october","november","december"];function yc(t){var a=new Date(t),r=new Date(NaN),i=a.getYear(),l=a.getMonth(),d=a.getDate();if(isNaN(d))return r;var f=t.toLowerCase();if(f.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(f=f.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),f.length>3&&tS.indexOf(f)==-1)return r}else if(f.match(/[a-z]/))return r;return i<0||i>8099?r:(l>0||d>1)&&i!=101?a:t.match(/[^-0-9:,\/\\]/)?r:a}var rS=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,i,l){if(t||typeof i=="string")return r.split(i);for(var d=r.split(i),f=[d[0]],h=1;h<d.length;++h)f.push(l),f.push(d[h]);return f}}();function Sw(t){return t?t.content&&t.type?xo(t.content,!0):t.data?j0(t.data):t.asNodeBuffer&&fr?j0(t.asNodeBuffer().toString("binary")):t.asBinary?j0(t.asBinary()):t._data&&t._data.getContent?j0(xo(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Tw(t){if(!t)return null;if(t.data)return Hb(t.data);if(t.asNodeBuffer&&fr)return t.asNodeBuffer();if(t._data&&t._data.getContent){var a=t._data.getContent();return typeof a=="string"?Hb(a):Array.prototype.slice.call(a)}return t.content&&t.type?t.content:null}function aS(t){return t&&t.name.slice(-4)===".bin"?Tw(t):Sw(t)}function cn(t,a){for(var r=t.FullPaths||ti(t.files),i=a.toLowerCase().replace(/[\/]/g,"\\"),l=i.replace(/\\/g,"/"),d=0;d<r.length;++d){var f=r[d].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==f||l==f)return t.files?t.files[r[d]]:t.FileIndex[d]}return null}function ig(t,a){var r=cn(t,a);if(r==null)throw new Error("Cannot find file "+a+" in zip");return r}function va(t,a,r){if(!r)return aS(ig(t,a));if(!a)return null;try{return va(t,a)}catch{return null}}function qs(t,a,r){if(!r)return Sw(ig(t,a));if(!a)return null;try{return qs(t,a)}catch{return null}}function sS(t,a,r){return Tw(ig(t,a))}function t2(t){for(var a=t.FullPaths||ti(t.files),r=[],i=0;i<a.length;++i)a[i].slice(-1)!="/"&&r.push(a[i].replace(/^Root Entry[\/]/,""));return r.sort()}function nS(t,a,r){if(t.FullPaths){if(typeof r=="string"){var i;return fr?i=po(r):i=jA(r),gr.utils.cfb_add(t,a,i)}gr.utils.cfb_add(t,a,r)}else t.file(a,r)}function Rw(t,a){switch(a.type){case"base64":return gr.read(t,{type:"base64"});case"binary":return gr.read(t,{type:"binary"});case"buffer":case"array":return gr.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+a.type)}function C0(t,a){if(t.charAt(0)=="/")return t.slice(1);var r=a.split("/");a.slice(-1)!="/"&&r.pop();for(var i=t.split("/");i.length!==0;){var l=i.shift();l===".."?r.pop():l!=="."&&r.push(l)}return r.join("/")}var Dw=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,iS=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,r2=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,lS=/<[^>]*>/g,fs=Dw.match(r2)?r2:lS,oS=/<\w*:/,cS=/<(\/?)\w+:/;function Gt(t,a,r){for(var i={},l=0,d=0;l!==t.length&&!((d=t.charCodeAt(l))===32||d===10||d===13);++l);if(a||(i[0]=t.slice(0,l)),l===t.length)return i;var f=t.match(iS),h=0,b="",p=0,w="",j="",C=1;if(f)for(p=0;p!=f.length;++p){for(j=f[p],d=0;d!=j.length&&j.charCodeAt(d)!==61;++d);for(w=j.slice(0,d).trim();j.charCodeAt(d+1)==32;)++d;for(C=(l=j.charCodeAt(d+1))==34||l==39?1:0,b=j.slice(d+1+C,j.length-C),h=0;h!=w.length&&w.charCodeAt(h)!==58;++h);if(h===w.length)w.indexOf("_")>0&&(w=w.slice(0,w.indexOf("_"))),i[w]=b,i[w.toLowerCase()]=b;else{var _=(h===5&&w.slice(0,5)==="xmlns"?"xmlns":"")+w.slice(h+1);if(i[_]&&w.slice(h-3,h)=="ext")continue;i[_]=b,i[_.toLowerCase()]=b}}return i}function si(t){return t.replace(cS,"<$1")}var Ow={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},dS=ng(Ow),br=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,a=/_x([\da-fA-F]{4})_/ig;return function r(i){var l=i+"",d=l.indexOf("<![CDATA[");if(d==-1)return l.replace(t,function(h,b){return Ow[h]||String.fromCharCode(parseInt(b,h.indexOf("x")>-1?16:10))||h}).replace(a,function(h,b){return String.fromCharCode(parseInt(b,16))});var f=l.indexOf("]]>");return r(l.slice(0,d))+l.slice(d+9,f)+r(l.slice(f+3))}}(),uS=/[&<>'"]/g,fS=/[\u0000-\u001f]/g;function lg(t){var a=t+"";return a.replace(uS,function(r){return dS[r]}).replace(/\n/g,"<br/>").replace(fS,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var a2=function(){var t=/&#(\d+);/g;function a(r,i){return String.fromCharCode(parseInt(i,10))}return function(i){return i.replace(t,a)}}();function Yr(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function rm(t){for(var a="",r=0,i=0,l=0,d=0,f=0,h=0;r<t.length;){if(i=t.charCodeAt(r++),i<128){a+=String.fromCharCode(i);continue}if(l=t.charCodeAt(r++),i>191&&i<224){f=(i&31)<<6,f|=l&63,a+=String.fromCharCode(f);continue}if(d=t.charCodeAt(r++),i<240){a+=String.fromCharCode((i&15)<<12|(l&63)<<6|d&63);continue}f=t.charCodeAt(r++),h=((i&7)<<18|(l&63)<<12|(d&63)<<6|f&63)-65536,a+=String.fromCharCode(55296+(h>>>10&1023)),a+=String.fromCharCode(56320+(h&1023))}return a}function s2(t){var a=jl(2*t.length),r,i,l=1,d=0,f=0,h;for(i=0;i<t.length;i+=l)l=1,(h=t.charCodeAt(i))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(i+1)&63),l=2):h<240?(r=(h&15)*4096+(t.charCodeAt(i+1)&63)*64+(t.charCodeAt(i+2)&63),l=3):(l=4,r=(h&7)*262144+(t.charCodeAt(i+1)&63)*4096+(t.charCodeAt(i+2)&63)*64+(t.charCodeAt(i+3)&63),r-=65536,f=55296+(r>>>10&1023),r=56320+(r&1023)),f!==0&&(a[d++]=f&255,a[d++]=f>>>8,f=0),a[d++]=r%256,a[d++]=r>>>8;return a.slice(0,d).toString("ucs2")}function n2(t){return po(t,"binary").toString("utf8")}var Eu="foo bar baz",zr=fr&&(n2(Eu)==rm(Eu)&&n2||s2(Eu)==rm(Eu)&&s2)||rm,_0=fr?function(t){return po(t,"utf8").toString("binary")}:function(t){for(var a=[],r=0,i=0,l=0;r<t.length;)switch(i=t.charCodeAt(r++),!0){case i<128:a.push(String.fromCharCode(i));break;case i<2048:a.push(String.fromCharCode(192+(i>>6))),a.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,l=t.charCodeAt(r++)-56320+(i<<10),a.push(String.fromCharCode(240+(l>>18&7))),a.push(String.fromCharCode(144+(l>>12&63))),a.push(String.fromCharCode(128+(l>>6&63))),a.push(String.fromCharCode(128+(l&63)));break;default:a.push(String.fromCharCode(224+(i>>12))),a.push(String.fromCharCode(128+(i>>6&63))),a.push(String.fromCharCode(128+(i&63)))}return a.join("")},X0=function(){var t={};return function(r,i){var l=r+"|"+(i||"");return t[l]?t[l]:t[l]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",i||"")}}(),Iw=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(a){return[new RegExp("&"+a[0]+";","ig"),a[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<t.length;++l)i=i.replace(t[l][0],t[l][1]);return i}}(),xS=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),hS=/<\/?(?:vt:)?variant>/g,mS=/<(?:vt:)([^>]*)>([\s\S]*)</;function i2(t,a){var r=Gt(t),i=t.match(xS(r.baseType))||[],l=[];if(i.length!=r.size){if(a.WTF)throw new Error("unexpected vector length "+i.length+" != "+r.size);return l}return i.forEach(function(d){var f=d.replace(hS,"").match(mS);f&&l.push({v:zr(f[2]),t:f[1]})}),l}var gS=/(^\s|\s$|\n)/;function pS(t){return ti(t).map(function(a){return" "+a+'="'+t[a]+'"'}).join("")}function yS(t,a,r){return"<"+t+(r!=null?pS(r):"")+(a!=null?(a.match(gS)?' xml:space="preserve"':"")+">"+a+"</"+t:"/")+">"}function og(t){if(fr&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return zr(yo(rg(t)));throw new Error("Bad input format: expected Buffer or string")}var q0=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,bS={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},vS=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function wS(t,a){for(var r=1-2*(t[a+7]>>>7),i=((t[a+7]&127)<<4)+(t[a+6]>>>4&15),l=t[a+6]&15,d=5;d>=0;--d)l=l*256+t[a+d];return i==2047?l==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,l+=Math.pow(2,52)),r*Math.pow(2,i-52)*l)}function NS(t,a,r){var i=(a<0||1/a==-1/0?1:0)<<7,l=0,d=0,f=i?-a:a;isFinite(f)?f==0?l=d=0:(l=Math.floor(Math.log(f)/Math.LN2),d=f*Math.pow(2,52-l),l<=-1023&&(!isFinite(d)||d<Math.pow(2,52))?l=-1022:(d-=Math.pow(2,52),l+=1023)):(l=2047,d=isNaN(a)?26985:0);for(var h=0;h<=5;++h,d/=256)t[r+h]=d&255;t[r+6]=(l&15)<<4|d&15,t[r+7]=l>>4|i}var l2=function(t){for(var a=[],r=10240,i=0;i<t[0].length;++i)if(t[0][i])for(var l=0,d=t[0][i].length;l<d;l+=r)a.push.apply(a,t[0][i].slice(l,l+r));return a},o2=fr?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(a){return Buffer.isBuffer(a)?a:po(a)})):l2(t)}:l2,c2=function(t,a,r){for(var i=[],l=a;l<r;l+=2)i.push(String.fromCharCode(Ci(t,l)));return i.join("").replace(ws,"")},cg=fr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("utf16le",a,r).replace(ws,""):c2(t,a,r)}:c2,d2=function(t,a,r){for(var i=[],l=a;l<a+r;++l)i.push(("0"+t[l].toString(16)).slice(-2));return i.join("")},Fw=fr?function(t,a,r){return Buffer.isBuffer(t)?t.toString("hex",a,a+r):d2(t,a,r)}:d2,u2=function(t,a,r){for(var i=[],l=a;l<r;l++)i.push(String.fromCharCode(oc(t,l)));return i.join("")},cd=fr?function(a,r,i){return Buffer.isBuffer(a)?a.toString("utf8",r,i):u2(a,r,i)}:u2,Mw=function(t,a){var r=Xs(t,a);return r>0?cd(t,a+4,a+4+r-1):""},Bw=Mw,Lw=function(t,a){var r=Xs(t,a);return r>0?cd(t,a+4,a+4+r-1):""},Pw=Lw,zw=function(t,a){var r=2*Xs(t,a);return r>0?cd(t,a+4,a+4+r-1):""},Uw=zw,Hw=function(a,r){var i=Xs(a,r);return i>0?cg(a,r+4,r+4+i):""},Vw=Hw,Gw=function(t,a){var r=Xs(t,a);return r>0?cd(t,a+4,a+4+r):""},Xw=Gw,qw=function(t,a){return wS(t,a)},ef=qw,$w=function(a){return Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array};fr&&(Bw=function(a,r){if(!Buffer.isBuffer(a))return Mw(a,r);var i=a.readUInt32LE(r);return i>0?a.toString("utf8",r+4,r+4+i-1):""},Pw=function(a,r){if(!Buffer.isBuffer(a))return Lw(a,r);var i=a.readUInt32LE(r);return i>0?a.toString("utf8",r+4,r+4+i-1):""},Uw=function(a,r){if(!Buffer.isBuffer(a))return zw(a,r);var i=2*a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+i-1)},Vw=function(a,r){if(!Buffer.isBuffer(a))return Hw(a,r);var i=a.readUInt32LE(r);return a.toString("utf16le",r+4,r+4+i)},Xw=function(a,r){if(!Buffer.isBuffer(a))return Gw(a,r);var i=a.readUInt32LE(r);return a.toString("utf8",r+4,r+4+i)},ef=function(a,r){return Buffer.isBuffer(a)?a.readDoubleLE(r):qw(a,r)},$w=function(a){return Buffer.isBuffer(a)||Array.isArray(a)||typeof Uint8Array<"u"&&a instanceof Uint8Array});var oc=function(t,a){return t[a]},Ci=function(t,a){return t[a+1]*256+t[a]},kS=function(t,a){var r=t[a+1]*256+t[a];return r<32768?r:(65535-r+1)*-1},Xs=function(t,a){return t[a+3]*(1<<24)+(t[a+2]<<16)+(t[a+1]<<8)+t[a]},Zl=function(t,a){return t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a]},jS=function(t,a){return t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]};function A0(t,a){var r="",i,l,d=[],f,h,b,p;switch(a){case"dbcs":if(p=this.l,fr&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(b=0;b<t;++b)r+=String.fromCharCode(Ci(this,p)),p+=2;t*=2;break;case"utf8":r=cd(this,this.l,this.l+t);break;case"utf16le":t*=2,r=cg(this,this.l,this.l+t);break;case"wstr":return A0.call(this,t,"dbcs");case"lpstr-ansi":r=Bw(this,this.l),t=4+Xs(this,this.l);break;case"lpstr-cp":r=Pw(this,this.l),t=4+Xs(this,this.l);break;case"lpwstr":r=Uw(this,this.l),t=4+2*Xs(this,this.l);break;case"lpp4":t=4+Xs(this,this.l),r=Vw(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Xs(this,this.l),r=Xw(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(f=oc(this,this.l+t++))!==0;)d.push(ju(f));r=d.join("");break;case"_wstr":for(t=0,r="";(f=Ci(this,this.l+t))!==0;)d.push(ju(f)),t+=2;t+=2,r=d.join("");break;case"dbcs-cont":for(r="",p=this.l,b=0;b<t;++b){if(this.lens&&this.lens.indexOf(p)!==-1)return f=oc(this,p),this.l=p+1,h=A0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(ju(Ci(this,p))),p+=2}r=d.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",p=this.l,b=0;b!=t;++b){if(this.lens&&this.lens.indexOf(p)!==-1)return f=oc(this,p),this.l=p+1,h=A0.call(this,t-b,f?"dbcs-cont":"sbcs-cont"),d.join("")+h;d.push(ju(oc(this,p))),p+=1}r=d.join("");break;default:switch(t){case 1:return i=oc(this,this.l),this.l++,i;case 2:return i=(a==="i"?kS:Ci)(this,this.l),this.l+=2,i;case 4:case-4:return a==="i"||(this[this.l+3]&128)===0?(i=(t>0?Zl:jS)(this,this.l),this.l+=4,i):(l=Xs(this,this.l),this.l+=4,l);case 8:case-8:if(a==="f")return t==8?l=ef(this,this.l):l=ef([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;t=8;case 16:r=Fw(this,this.l,t);break}}return this.l+=t,r}var ES=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255,t[r+2]=a>>>16&255,t[r+3]=a>>>24&255},CS=function(t,a,r){t[r]=a&255,t[r+1]=a>>8&255,t[r+2]=a>>16&255,t[r+3]=a>>24&255},_S=function(t,a,r){t[r]=a&255,t[r+1]=a>>>8&255};function AS(t,a,r){var i=0,l=0;if(r==="dbcs"){for(l=0;l!=a.length;++l)_S(this,a.charCodeAt(l),this.l+2*l);i=2*a.length}else if(r==="sbcs"){for(a=a.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=a.length;++l)this[this.l+l]=a.charCodeAt(l)&255;i=a.length}else if(r==="hex"){for(;l<t;++l)this[this.l++]=parseInt(a.slice(2*l,2*l+2),16)||0;return this}else if(r==="utf16le"){var d=Math.min(this.l+t,this.length);for(l=0;l<Math.min(a.length,t);++l){var f=a.charCodeAt(l);this[this.l++]=f&255,this[this.l++]=f>>8}for(;this.l<d;)this[this.l++]=0;return this}else switch(t){case 1:i=1,this[this.l]=a&255;break;case 2:i=2,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255;break;case 3:i=3,this[this.l]=a&255,a>>>=8,this[this.l+1]=a&255,a>>>=8,this[this.l+2]=a&255;break;case 4:i=4,ES(this,a,this.l);break;case 8:if(i=8,r==="f"){NS(this,a,this.l);break}case 16:break;case-4:i=4,CS(this,a,this.l);break}return this.l+=i,this}function Yw(t,a){var r=Fw(this,this.l,t.length>>1);if(r!==t)throw new Error(a+"Expected "+t+" saw "+r);this.l+=t.length>>1}function qa(t,a){t.l=a,t.read_shift=A0,t.chk=Yw,t.write_shift=AS}function us(t,a){t.l+=a}function Da(t){var a=jl(t);return qa(a,0),a}function Mi(t,a,r){if(t){var i,l,d;qa(t,t.l||0);for(var f=t.length,h=0,b=0;t.l<f;){h=t.read_shift(1),h&128&&(h=(h&127)+((t.read_shift(1)&127)<<7));var p=lf[h]||lf[65535];for(i=t.read_shift(1),d=i&127,l=1;l<4&&i&128;++l)d+=((i=t.read_shift(1))&127)<<7*l;b=t.l+d;var w=p.f&&p.f(t,d,r);if(t.l=b,a(w,p,h))return}}}function Rm(){var t=[],a=fr?256:2048,r=function(p){var w=Da(p);return qa(w,0),w},i=r(a),l=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&t.push(i),i=null)},d=function(p){return i&&p<i.length-i.l?i:(l(),i=r(Math.max(p+1,a)))},f=function(){return l(),yl(t)},h=function(p){l(),i=p,i.l==null&&(i.l=i.length),d(a)};return{next:d,push:h,end:f,_bufs:t}}function S0(t,a,r){var i=$a(t);if(a.s?(i.cRel&&(i.c+=a.s.c),i.rRel&&(i.r+=a.s.r)):(i.cRel&&(i.c+=a.c),i.rRel&&(i.r+=a.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function f2(t,a,r){var i=$a(t);return i.s=S0(i.s,a.s,r),i.e=S0(i.e,a.s,r),i}function T0(t,a){if(t.cRel&&t.c<0)for(t=$a(t);t.c<0;)t.c+=a>8?16384:256;if(t.rRel&&t.r<0)for(t=$a(t);t.r<0;)t.r+=a>8?1048576:a>5?65536:16384;var r=Zt(t);return!t.cRel&&t.cRel!=null&&(r=RS(r)),!t.rRel&&t.rRel!=null&&(r=SS(r)),r}function am(t,a){return t.s.r==0&&!t.s.rRel&&t.e.r==(a.biff>=12?1048575:a.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Oa(t.s.c)+":"+(t.e.cRel?"":"$")+Oa(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(a.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Ya(t.s.r)+":"+(t.e.rRel?"":"$")+Ya(t.e.r):T0(t.s,a.biff)+":"+T0(t.e,a.biff)}function dg(t){return parseInt(TS(t),10)-1}function Ya(t){return""+(t+1)}function SS(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function TS(t){return t.replace(/\$(\d+)$/,"$1")}function ug(t){for(var a=DS(t),r=0,i=0;i!==a.length;++i)r=26*r+a.charCodeAt(i)-64;return r-1}function Oa(t){if(t<0)throw new Error("invalid column "+t);var a="";for(++t;t;t=Math.floor((t-1)/26))a=String.fromCharCode((t-1)%26+65)+a;return a}function RS(t){return t.replace(/^([A-Z])/,"$$$1")}function DS(t){return t.replace(/^\$([A-Z])/,"$1")}function OS(t){return t.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function vs(t){for(var a=0,r=0,i=0;i<t.length;++i){var l=t.charCodeAt(i);l>=48&&l<=57?a=10*a+(l-48):l>=65&&l<=90&&(r=26*r+(l-64))}return{c:r-1,r:a-1}}function Zt(t){for(var a=t.c+1,r="";a;a=(a-1)/26|0)r=String.fromCharCode((a-1)%26+65)+r;return r+(t.r+1)}function _c(t){var a=t.indexOf(":");return a==-1?{s:vs(t),e:vs(t)}:{s:vs(t.slice(0,a)),e:vs(t.slice(a+1))}}function pr(t,a){return typeof a>"u"||typeof a=="number"?pr(t.s,t.e):(typeof t!="string"&&(t=Zt(t)),typeof a!="string"&&(a=Zt(a)),t==a?t:t+":"+a)}function ia(t){var a={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,l=0,d=t.length;for(r=0;i<d&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(a.s.c=--r,r=0;i<d&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;if(a.s.r=--r,i===d||l!=10)return a.e.c=a.s.c,a.e.r=a.s.r,a;for(++i,r=0;i!=d&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(a.e.c=--r,r=0;i!=d&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;return a.e.r=--r,a}function x2(t,a){var r=t.t=="d"&&a instanceof Date;if(t.z!=null)try{return t.w=un(t.z,r?ks(a):a)}catch{}try{return t.w=un((t.XF||{}).numFmtId||(r?14:0),r?ks(a):a)}catch{return""+a}}function Fi(t,a,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?wo[t.v]||t.v:a==null?x2(t,t.v):x2(t,a))}function _l(t,a){var r=a&&a.sheet?a.sheet:"Sheet1",i={};return i[r]=t,{SheetNames:[r],Sheets:i}}function Ww(t,a,r){var i=r||{},l=t?Array.isArray(t):i.dense,d=t||(l?[]:{}),f=0,h=0;if(d&&i.origin!=null){if(typeof i.origin=="number")f=i.origin;else{var b=typeof i.origin=="string"?vs(i.origin):i.origin;f=b.r,h=b.c}d["!ref"]||(d["!ref"]="A1:A1")}var p={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(d["!ref"]){var w=ia(d["!ref"]);p.s.c=w.s.c,p.s.r=w.s.r,p.e.c=Math.max(p.e.c,w.e.c),p.e.r=Math.max(p.e.r,w.e.r),f==-1&&(p.e.r=f=w.e.r+1)}for(var j=0;j!=a.length;++j)if(a[j]){if(!Array.isArray(a[j]))throw new Error("aoa_to_sheet expects an array of arrays");for(var C=0;C!=a[j].length;++C)if(!(typeof a[j][C]>"u")){var _={v:a[j][C]},R=f+j,A=h+C;if(p.s.r>R&&(p.s.r=R),p.s.c>A&&(p.s.c=A),p.e.r<R&&(p.e.r=R),p.e.c<A&&(p.e.c=A),a[j][C]&&typeof a[j][C]=="object"&&!Array.isArray(a[j][C])&&!(a[j][C]instanceof Date))_=a[j][C];else if(Array.isArray(_.v)&&(_.f=a[j][C][1],_.v=_.v[0]),_.v===null)if(_.f)_.t="n";else if(i.nullError)_.t="e",_.v=0;else if(i.sheetStubs)_.t="z";else continue;else typeof _.v=="number"?_.t="n":typeof _.v=="boolean"?_.t="b":_.v instanceof Date?(_.z=i.dateNF||tr[14],i.cellDates?(_.t="d",_.w=un(_.z,ks(_.v))):(_.t="n",_.v=ks(_.v),_.w=un(_.z,_.v))):_.t="s";if(l)d[R]||(d[R]=[]),d[R][A]&&d[R][A].z&&(_.z=d[R][A].z),d[R][A]=_;else{var O=Zt({c:A,r:R});d[O]&&d[O].z&&(_.z=d[O].z),d[O]=_}}}return p.s.c<1e7&&(d["!ref"]=pr(p)),d}function Ac(t,a){return Ww(null,t,a)}function IS(t){return t.read_shift(4,"i")}function ds(t){var a=t.read_shift(4);return a===0?"":t.read_shift(a,"dbcs")}function FS(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function fg(t,a){var r=t.l,i=t.read_shift(1),l=ds(t),d=[],f={t:l,h:l};if((i&1)!==0){for(var h=t.read_shift(4),b=0;b!=h;++b)d.push(FS(t));f.r=d}else f.r=[{ich:0,ifnt:0}];return t.l=r+a,f}var MS=fg;function xn(t){var a=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:a,iStyleRef:r}}function bo(t){var a=t.read_shift(2);return a+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:a}}var BS=ds;function xg(t){var a=t.read_shift(4);return a===0||a===4294967295?"":t.read_shift(a,"dbcs")}var LS=ds,Dm=xg;function hg(t){var a=t.slice(t.l,t.l+4),r=a[0]&1,i=a[0]&2;t.l+=4;var l=i===0?ef([0,0,0,0,a[0]&252,a[1],a[2],a[3]],0):Zl(a,0)>>2;return r?l/100:l}function Kw(t){var a={s:{},e:{}};return a.s.r=t.read_shift(4),a.e.r=t.read_shift(4),a.s.c=t.read_shift(4),a.e.c=t.read_shift(4),a}var vo=Kw;function ls(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function PS(t){var a={},r=t.read_shift(1),i=r>>>1,l=t.read_shift(1),d=t.read_shift(2,"i"),f=t.read_shift(1),h=t.read_shift(1),b=t.read_shift(1);switch(t.l++,i){case 0:a.auto=1;break;case 1:a.index=l;var p=so[l];p&&(a.rgb=Y0(p));break;case 2:a.rgb=Y0([f,h,b]);break;case 3:a.theme=l;break}return d!=0&&(a.tint=d>0?d/32767:d/32768),a}function zS(t){var a=t.read_shift(1);t.l++;var r={fBold:a&1,fItalic:a&2,fUnderline:a&4,fStrikeout:a&8,fOutline:a&16,fShadow:a&32,fCondense:a&64,fExtend:a&128};return r}function Zw(t,a){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},i=t.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return t.l-=4,t.read_shift(0,a==1?"lpstr":"lpwstr")}function US(t){return Zw(t,1)}function HS(t){return Zw(t,2)}var mg=2,Ss=3,Cu=11,h2=12,tf=19,_u=64,VS=65,GS=71,XS=4108,qS=4126,Pa=80,Qw=81,$S=[Pa,Qw],YS={1:{n:"CodePage",t:mg},2:{n:"Category",t:Pa},3:{n:"PresentationFormat",t:Pa},4:{n:"ByteCount",t:Ss},5:{n:"LineCount",t:Ss},6:{n:"ParagraphCount",t:Ss},7:{n:"SlideCount",t:Ss},8:{n:"NoteCount",t:Ss},9:{n:"HiddenCount",t:Ss},10:{n:"MultimediaClipCount",t:Ss},11:{n:"ScaleCrop",t:Cu},12:{n:"HeadingPairs",t:XS},13:{n:"TitlesOfParts",t:qS},14:{n:"Manager",t:Pa},15:{n:"Company",t:Pa},16:{n:"LinksUpToDate",t:Cu},17:{n:"CharacterCount",t:Ss},19:{n:"SharedDoc",t:Cu},22:{n:"HyperlinksChanged",t:Cu},23:{n:"AppVersion",t:Ss,p:"version"},24:{n:"DigSig",t:VS},26:{n:"ContentType",t:Pa},27:{n:"ContentStatus",t:Pa},28:{n:"Language",t:Pa},29:{n:"Version",t:Pa},255:{},2147483648:{n:"Locale",t:tf},2147483651:{n:"Behavior",t:tf},1919054434:{}},WS={1:{n:"CodePage",t:mg},2:{n:"Title",t:Pa},3:{n:"Subject",t:Pa},4:{n:"Author",t:Pa},5:{n:"Keywords",t:Pa},6:{n:"Comments",t:Pa},7:{n:"Template",t:Pa},8:{n:"LastAuthor",t:Pa},9:{n:"RevNumber",t:Pa},10:{n:"EditTime",t:_u},11:{n:"LastPrinted",t:_u},12:{n:"CreatedDate",t:_u},13:{n:"ModifiedDate",t:_u},14:{n:"PageCount",t:Ss},15:{n:"WordCount",t:Ss},16:{n:"CharCount",t:Ss},17:{n:"Thumbnail",t:GS},18:{n:"Application",t:Pa},19:{n:"DocSecurity",t:Ss},255:{},2147483648:{n:"Locale",t:tf},2147483651:{n:"Behavior",t:tf},1919054434:{}},m2={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},KS=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ZS(t){return t.map(function(a){return[a>>16&255,a>>8&255,a&255]})}var QS=ZS([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),so=$a(QS),wo={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Jw={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},g2={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function JS(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function e5(t){var a=JS();if(!t||!t.match)return a;var r={};if((t.match(fs)||[]).forEach(function(i){var l=Gt(i);switch(l[0].replace(oS,"<")){case"<?xml":break;case"<Types":a.xmlns=l["xmlns"+(l[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[l.Extension]=l.ContentType;break;case"<Override":a[g2[l.ContentType]]!==void 0&&a[g2[l.ContentType]].push(l.PartName);break}}),a.xmlns!==bS.CT)throw new Error("Unknown Namespace: "+a.xmlns);return a.calcchain=a.calcchains.length>0?a.calcchains[0]:"",a.sst=a.strs.length>0?a.strs[0]:"",a.style=a.styles.length>0?a.styles[0]:"",a.defaults=r,delete a.calcchains,a}var dc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Om(t){var a=t.lastIndexOf("/");return t.slice(0,a+1)+"_rels/"+t.slice(a+1)+".rels"}function R0(t,a){var r={"!id":{}};if(!t)return r;a.charAt(0)!=="/"&&(a="/"+a);var i={};return(t.match(fs)||[]).forEach(function(l){var d=Gt(l);if(d[0]==="<Relationship"){var f={};f.Type=d.Type,f.Target=d.Target,f.Id=d.Id,d.TargetMode&&(f.TargetMode=d.TargetMode);var h=d.TargetMode==="External"?d.Target:C0(d.Target,a);r[h]=f,i[d.Id]=f}}),r["!id"]=i,r}var t5="application/vnd.oasis.opendocument.spreadsheet";function r5(t,a){for(var r=og(t),i,l;i=q0.exec(r);)switch(i[3]){case"manifest":break;case"file-entry":if(l=Gt(i[0],!1),l.path=="/"&&l.type!==t5)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(a&&a.WTF)throw i}}var D0=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],a5=function(){for(var t=new Array(D0.length),a=0;a<D0.length;++a){var r=D0[a],i="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[a]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return t}();function e4(t){var a={};t=zr(t);for(var r=0;r<D0.length;++r){var i=D0[r],l=t.match(a5[r]);l!=null&&l.length>0&&(a[i[1]]=br(l[1])),i[2]==="date"&&a[i[1]]&&(a[i[1]]=Ua(a[i[1]]))}return a}var s5=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function t4(t,a,r,i){var l=[];if(typeof t=="string")l=i2(t,i);else for(var d=0;d<t.length;++d)l=l.concat(t[d].map(function(w){return{v:w}}));var f=typeof a=="string"?i2(a,i).map(function(w){return w.v}):a,h=0,b=0;if(f.length>0)for(var p=0;p!==l.length;p+=2){switch(b=+l[p+1].v,l[p].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=b,r.SheetNames=f.slice(h,h+b);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=b,r.DefinedNames=f.slice(h,h+b);break;case"Charts":case"Diagramme":r.Chartsheets=b,r.ChartNames=f.slice(h,h+b);break}h+=b}}function n5(t,a,r){var i={};return a||(a={}),t=zr(t),s5.forEach(function(l){var d=(t.match(X0(l[0]))||[])[1];switch(l[2]){case"string":d&&(a[l[1]]=br(d));break;case"bool":a[l[1]]=d==="true";break;case"raw":var f=t.match(new RegExp("<"+l[0]+"[^>]*>([\\s\\S]*?)</"+l[0]+">"));f&&f.length>0&&(i[l[1]]=f[1]);break}}),i.HeadingPairs&&i.TitlesOfParts&&t4(i.HeadingPairs,i.TitlesOfParts,a,r),a}var i5=/<[^>]+>[^<]*/g;function l5(t,a){var r={},i="",l=t.match(i5);if(l)for(var d=0;d!=l.length;++d){var f=l[d],h=Gt(f);switch(h[0]){case"<?xml":break;case"<Properties":break;case"<property":i=br(h.name);break;case"</property>":i=null;break;default:if(f.indexOf("<vt:")===0){var b=f.split(">"),p=b[0].slice(4),w=b[1];switch(p){case"lpstr":case"bstr":case"lpwstr":r[i]=br(w);break;case"bool":r[i]=Yr(w);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[i]=parseInt(w,10);break;case"r4":case"r8":case"decimal":r[i]=parseFloat(w);break;case"filetime":case"date":r[i]=Ua(w);break;case"cy":case"error":r[i]=br(w);break;default:if(p.slice(-1)=="/")break;a.WTF&&typeof console<"u"&&console.warn("Unexpected",f,p,b)}}else if(f.slice(0,2)!=="</"){if(a.WTF)throw new Error(f)}}}return r}var o5={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},sm;function c5(t,a,r){sm||(sm=ng(o5)),a=sm[a]||a,t[a]=r}function gg(t){var a=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+a/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function r4(t,a,r){var i=t.l,l=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-i&3;)++t.l;return l}function a4(t,a,r){var i=t.read_shift(0,"lpwstr");return i}function s4(t,a,r){return a===31?a4(t):r4(t,a,r)}function Im(t,a,r){return s4(t,a,r===!1?0:4)}function d5(t,a){if(!a)throw new Error("VtUnalignedString must have positive length");return s4(t,a,0)}function u5(t){for(var a=t.read_shift(4),r=[],i=0;i!=a;++i){var l=t.l;r[i]=t.read_shift(0,"lpwstr").replace(ws,""),t.l-l&2&&(t.l+=2)}return r}function f5(t){for(var a=t.read_shift(4),r=[],i=0;i!=a;++i)r[i]=t.read_shift(0,"lpstr-cp").replace(ws,"");return r}function x5(t){var a=t.l,r=rf(t,Qw);t[t.l]==0&&t[t.l+1]==0&&t.l-a&2&&(t.l+=2);var i=rf(t,Ss);return[r,i]}function h5(t){for(var a=t.read_shift(4),r=[],i=0;i<a/2;++i)r.push(x5(t));return r}function p2(t,a){for(var r=t.read_shift(4),i={},l=0;l!=r;++l){var d=t.read_shift(4),f=t.read_shift(4);i[d]=t.read_shift(f,a===1200?"utf16le":"utf8").replace(ws,"").replace(E0,"!"),a===1200&&f%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),i}function n4(t){var a=t.read_shift(4),r=t.slice(t.l,t.l+a);return t.l+=a,(a&3)>0&&(t.l+=4-(a&3)&3),r}function m5(t){var a={};return a.Size=t.read_shift(4),t.l+=a.Size+3-(a.Size-1)%4,a}function rf(t,a,r){var i=t.read_shift(2),l,d=r||{};if(t.l+=2,a!==h2&&i!==a&&$S.indexOf(a)===-1&&!((a&65534)==4126&&(i&65534)==4126))throw new Error("Expected type "+a+" saw "+i);switch(a===h2?i:a){case 2:return l=t.read_shift(2,"i"),d.raw||(t.l+=2),l;case 3:return l=t.read_shift(4,"i"),l;case 11:return t.read_shift(4)!==0;case 19:return l=t.read_shift(4),l;case 30:return r4(t,i,4).replace(ws,"");case 31:return a4(t);case 64:return gg(t);case 65:return n4(t);case 71:return m5(t);case 80:return Im(t,i,!d.raw).replace(ws,"");case 81:return d5(t,i).replace(ws,"");case 4108:return h5(t);case 4126:case 4127:return i==4127?u5(t):f5(t);default:throw new Error("TypedPropertyValue unrecognized type "+a+" "+i)}}function y2(t,a){var r=t.l,i=t.read_shift(4),l=t.read_shift(4),d=[],f=0,h=0,b=-1,p={};for(f=0;f!=l;++f){var w=t.read_shift(4),j=t.read_shift(4);d[f]=[w,j+r]}d.sort(function(M,T){return M[1]-T[1]});var C={};for(f=0;f!=l;++f){if(t.l!==d[f][1]){var _=!0;if(f>0&&a)switch(a[d[f-1][0]].t){case 2:t.l+2===d[f][1]&&(t.l+=2,_=!1);break;case 80:t.l<=d[f][1]&&(t.l=d[f][1],_=!1);break;case 4108:t.l<=d[f][1]&&(t.l=d[f][1],_=!1);break}if((!a||f==0)&&t.l<=d[f][1]&&(_=!1,t.l=d[f][1]),_)throw new Error("Read Error: Expected address "+d[f][1]+" at "+t.l+" :"+f)}if(a){var R=a[d[f][0]];if(C[R.n]=rf(t,R.t,{raw:!0}),R.p==="version"&&(C[R.n]=String(C[R.n]>>16)+"."+("0000"+String(C[R.n]&65535)).slice(-4)),R.n=="CodePage")switch(C[R.n]){case 0:C[R.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:jn(h=C[R.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+C[R.n])}}else if(d[f][0]===1){if(h=C.CodePage=rf(t,mg),jn(h),b!==-1){var A=t.l;t.l=d[b][1],p=p2(t,h),t.l=A}}else if(d[f][0]===0){if(h===0){b=f,t.l=d[f+1][1];continue}p=p2(t,h)}else{var O=p[d[f][0]],I;switch(t[t.l]){case 65:t.l+=4,I=n4(t);break;case 30:t.l+=4,I=Im(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,I=Im(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,I=t.read_shift(4,"i");break;case 19:t.l+=4,I=t.read_shift(4);break;case 5:t.l+=4,I=t.read_shift(8,"f");break;case 11:t.l+=4,I=xa(t,4);break;case 64:t.l+=4,I=Ua(gg(t));break;default:throw new Error("unparsed value: "+t[t.l])}C[O]=I}}return t.l=r+i,C}function b2(t,a,r){var i=t.content;if(!i)return{};qa(i,0);var l,d,f,h,b=0;i.chk("feff","Byte Order: "),i.read_shift(2);var p=i.read_shift(4),w=i.read_shift(16);if(w!==gr.utils.consts.HEADER_CLSID&&w!==r)throw new Error("Bad PropertySet CLSID "+w);if(l=i.read_shift(4),l!==1&&l!==2)throw new Error("Unrecognized #Sets: "+l);if(d=i.read_shift(16),h=i.read_shift(4),l===1&&h!==i.l)throw new Error("Length mismatch: "+h+" !== "+i.l);l===2&&(f=i.read_shift(16),b=i.read_shift(4));var j=y2(i,a),C={SystemIdentifier:p};for(var _ in j)C[_]=j[_];if(C.FMTID=d,l===1)return C;if(b-i.l==2&&(i.l+=2),i.l!==b)throw new Error("Length mismatch 2: "+i.l+" !== "+b);var R;try{R=y2(i,null)}catch{}for(_ in R)C[_]=R[_];return C.FMTID=[d,f],C}function pl(t,a){return t.read_shift(a),null}function g5(t,a,r){for(var i=[],l=t.l+a;t.l<l;)i.push(r(t,l-t.l));if(l!==t.l)throw new Error("Slurp error");return i}function xa(t,a){return t.read_shift(a)===1}function wa(t){return t.read_shift(2,"u")}function i4(t,a){return g5(t,a,wa)}function p5(t){var a=t.read_shift(1),r=t.read_shift(1);return r===1?a:a===1}function dd(t,a,r){var i=t.read_shift(r&&r.biff>=12?2:1),l="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var d=t.read_shift(1);d&&(l="dbcs-cont")}else r.biff==12&&(l="wstr");r.biff>=2&&r.biff<=5&&(l="cpstr");var f=i?t.read_shift(i,l):"";return f}function y5(t){var a=t.read_shift(2),r=t.read_shift(1),i=r&4,l=r&8,d=1+(r&1),f=0,h,b={};l&&(f=t.read_shift(2)),i&&(h=t.read_shift(4));var p=d==2?"dbcs-cont":"sbcs-cont",w=a===0?"":t.read_shift(a,p);return l&&(t.l+=4*f),i&&(t.l+=h),b.t=w,l||(b.raw="<t>"+b.t+"</t>",b.r=b.t),b}function ho(t,a,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(a,"cpstr");if(r.biff>=12)return t.read_shift(a,"dbcs-cont")}var l=t.read_shift(1);return l===0?i=t.read_shift(a,"sbcs-cont"):i=t.read_shift(a,"dbcs-cont"),i}function ud(t,a,r){var i=t.read_shift(r&&r.biff==2?1:2);return i===0?(t.l++,""):ho(t,i,r)}function No(t,a,r){if(r.biff>5)return ud(t,a,r);var i=t.read_shift(1);return i===0?(t.l++,""):t.read_shift(i,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function b5(t){var a=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[a,r]}function v5(t){var a=t.read_shift(4),r=t.l,i=!1;a>24&&(t.l+=a-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(i=!0),t.l=r);var l=t.read_shift((i?a-24:a)>>1,"utf16le").replace(ws,"");return i&&(t.l+=24),l}function w5(t){for(var a=t.read_shift(2),r="";a-- >0;)r+="../";var i=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var l=t.read_shift(4);if(l===0)return r+i.replace(/\\/g,"/");var d=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var f=t.read_shift(d>>1,"utf16le").replace(ws,"");return r+f}function N5(t,a){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return v5(t);case"0303000000000000c000000000000046":return w5(t);default:throw new Error("Unsupported Moniker "+r)}}function Au(t){var a=t.read_shift(4),r=a>0?t.read_shift(a,"utf16le").replace(ws,""):"";return r}function k5(t,a){var r=t.l+a,i=t.read_shift(4);if(i!==2)throw new Error("Unrecognized streamVersion: "+i);var l=t.read_shift(2);t.l+=2;var d,f,h,b,p="",w,j;l&16&&(d=Au(t,r-t.l)),l&128&&(f=Au(t,r-t.l)),(l&257)===257&&(h=Au(t,r-t.l)),(l&257)===1&&(b=N5(t,r-t.l)),l&8&&(p=Au(t,r-t.l)),l&32&&(w=t.read_shift(16)),l&64&&(j=gg(t)),t.l=r;var C=f||h||b||"";C&&p&&(C+="#"+p),C||(C="#"+p),l&2&&C.charAt(0)=="/"&&C.charAt(1)!="/"&&(C="file://"+C);var _={Target:C};return w&&(_.guid=w),j&&(_.time=j),d&&(_.Tooltip=d),_}function l4(t){var a=t.read_shift(1),r=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(1);return[a,r,i,l]}function o4(t,a){var r=l4(t);return r[3]=0,r}function ni(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{r:a,c:r,ixfe:i}}function j5(t){var a=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:a,flags:r}}function E5(t,a,r){return a===0?"":No(t,a,r)}function C5(t,a,r){var i=r.biff>8?4:2,l=t.read_shift(i),d=t.read_shift(i,"i"),f=t.read_shift(i,"i");return[l,d,f]}function c4(t){var a=t.read_shift(2),r=hg(t);return[a,r]}function _5(t,a,r){t.l+=4,a-=4;var i=t.l+a,l=dd(t,a,r),d=t.read_shift(2);if(i-=t.l,d!==i)throw new Error("Malformed AddinUdf: padding = "+i+" != "+d);return t.l+=d,l}function kf(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2);return{s:{c:i,r:a},e:{c:l,r}}}function d4(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1);return{s:{c:i,r:a},e:{c:l,r}}}var A5=d4;function u4(t){t.l+=4;var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return t.l+=12,[r,a,i]}function S5(t){var a={};return t.l+=4,t.l+=16,a.fSharedNote=t.read_shift(2),t.l+=4,a}function T5(t){var a={};return t.l+=4,t.cf=t.read_shift(2),a}function ss(t){t.l+=2,t.l+=t.read_shift(2)}var R5={0:ss,4:ss,5:ss,6:ss,7:T5,8:ss,9:ss,10:ss,11:ss,12:ss,13:S5,14:ss,15:ss,16:ss,17:ss,18:ss,19:ss,20:ss,21:u4};function D5(t,a){for(var r=t.l+a,i=[];t.l<r;){var l=t.read_shift(2);t.l-=2;try{i.push(R5[l](t,r-t.l))}catch{return t.l=r,i}}return t.l!=r&&(t.l=r),i}function Su(t,a){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),a-=2,a>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(a>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(a),r}function O5(t,a){return a===0||t.read_shift(2),1200}function I5(t,a,r){if(r.enc)return t.l+=a,"";var i=t.l,l=No(t,0,r);return t.read_shift(a+i-t.l),l}function F5(t,a,r){var i=r&&r.biff==8||a==2?t.read_shift(2):(t.l+=a,0);return{fDialog:i&16,fBelow:i&64,fRight:i&128}}function M5(t,a,r){var i=t.read_shift(4),l=t.read_shift(1)&3,d=t.read_shift(1);switch(d){case 0:d="Worksheet";break;case 1:d="Macrosheet";break;case 2:d="Chartsheet";break;case 6:d="VBAModule";break}var f=dd(t,0,r);return f.length===0&&(f="Sheet1"),{pos:i,hs:l,dt:d,name:f}}function B5(t,a){for(var r=t.l+a,i=t.read_shift(4),l=t.read_shift(4),d=[],f=0;f!=l&&t.l<r;++f)d.push(y5(t));return d.Count=i,d.Unique=l,d}function L5(t,a){var r={};return r.dsst=t.read_shift(2),t.l+=a-2,r}function P5(t){var a={};a.r=t.read_shift(2),a.c=t.read_shift(2),a.cnt=t.read_shift(2)-a.c;var r=t.read_shift(2);t.l+=4;var i=t.read_shift(1);return t.l+=3,i&7&&(a.level=i&7),i&32&&(a.hidden=!0),i&64&&(a.hpt=r/20),a}function z5(t){var a=j5(t);if(a.type!=2211)throw new Error("Invalid Future Record "+a.type);var r=t.read_shift(4);return r!==0}function U5(t){return t.read_shift(2),t.read_shift(4)}function v2(t,a,r){var i=0;r&&r.biff==2||(i=t.read_shift(2));var l=t.read_shift(2);r&&r.biff==2&&(i=1-(l>>15),l&=32767);var d={Unsynced:i&1,DyZero:(i&2)>>1,ExAsc:(i&4)>>2,ExDsc:(i&8)>>3};return[d,l]}function H5(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=t.read_shift(2),b=t.read_shift(2),p=t.read_shift(2);return{Pos:[a,r],Dim:[i,l],Flags:d,CurTab:f,FirstTab:h,Selected:b,TabRatio:p}}function V5(t,a,r){if(r&&r.biff>=2&&r.biff<5)return{};var i=t.read_shift(2);return{RTL:i&64}}function G5(){}function X5(t,a,r){var i={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return i.name=dd(t,0,r),i}function q5(t){var a=ni(t);return a.isst=t.read_shift(4),a}function $5(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=t.l+a,l=ni(t);r.biff==2&&t.l++;var d=ud(t,i-t.l,r);return l.val=d,l}function Y5(t,a,r){var i=t.read_shift(2),l=No(t,0,r);return[i,l]}var W5=No;function w2(t,a,r){var i=t.l+a,l=r.biff==8||!r.biff?4:2,d=t.read_shift(l),f=t.read_shift(l),h=t.read_shift(2),b=t.read_shift(2);return t.l=i,{s:{r:d,c:h},e:{r:f,c:b}}}function K5(t){var a=t.read_shift(2),r=t.read_shift(2),i=c4(t);return{r:a,c:r,ixfe:i[0],rknum:i[1]}}function Z5(t,a){for(var r=t.l+a-2,i=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(c4(t));if(t.l!==r)throw new Error("MulRK read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulRK length mismatch");return{r:i,c:l,C:f,rkrec:d}}function Q5(t,a){for(var r=t.l+a-2,i=t.read_shift(2),l=t.read_shift(2),d=[];t.l<r;)d.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var f=t.read_shift(2);if(d.length!=f-l+1)throw new Error("MulBlank length mismatch");return{r:i,c:l,C:f,ixfe:d}}function J5(t,a,r,i){var l={},d=t.read_shift(4),f=t.read_shift(4),h=t.read_shift(4),b=t.read_shift(2);return l.patternType=KS[h>>26],i.cellStyles&&(l.alc=d&7,l.fWrap=d>>3&1,l.alcV=d>>4&7,l.fJustLast=d>>7&1,l.trot=d>>8&255,l.cIndent=d>>16&15,l.fShrinkToFit=d>>20&1,l.iReadOrder=d>>22&2,l.fAtrNum=d>>26&1,l.fAtrFnt=d>>27&1,l.fAtrAlc=d>>28&1,l.fAtrBdr=d>>29&1,l.fAtrPat=d>>30&1,l.fAtrProt=d>>31&1,l.dgLeft=f&15,l.dgRight=f>>4&15,l.dgTop=f>>8&15,l.dgBottom=f>>12&15,l.icvLeft=f>>16&127,l.icvRight=f>>23&127,l.grbitDiag=f>>30&3,l.icvTop=h&127,l.icvBottom=h>>7&127,l.icvDiag=h>>14&127,l.dgDiag=h>>21&15,l.icvFore=b&127,l.icvBack=b>>7&127,l.fsxButton=b>>14&1),l}function eT(t,a,r){var i={};return i.ifnt=t.read_shift(2),i.numFmtId=t.read_shift(2),i.flags=t.read_shift(2),i.fStyle=i.flags>>2&1,a-=6,i.data=J5(t,a,i.fStyle,r),i}function tT(t){t.l+=4;var a=[t.read_shift(2),t.read_shift(2)];if(a[0]!==0&&a[0]--,a[1]!==0&&a[1]--,a[0]>7||a[1]>7)throw new Error("Bad Gutters: "+a.join("|"));return a}function N2(t,a,r){var i=ni(t);(r.biff==2||a==9)&&++t.l;var l=p5(t);return i.val=l,i.t=l===!0||l===!1?"b":"e",i}function rT(t,a,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=ni(t),l=ls(t);return i.val=l,i}var k2=E5;function aT(t,a,r){var i=t.l+a,l=t.read_shift(2),d=t.read_shift(2);if(r.sbcch=d,d==1025||d==14849)return[d,l];if(d<1||d>255)throw new Error("Unexpected SupBook type: "+d);for(var f=ho(t,d),h=[];i>t.l;)h.push(ud(t));return[d,l,f,h]}function j2(t,a,r){var i=t.read_shift(2),l,d={fBuiltIn:i&1,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return r.sbcch===14849&&(l=_5(t,a-2,r)),d.body=l||t.read_shift(a-2),typeof l=="string"&&(d.Name=l),d}var sT=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function E2(t,a,r){var i=t.l+a,l=t.read_shift(2),d=t.read_shift(1),f=t.read_shift(1),h=t.read_shift(r&&r.biff==2?1:2),b=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),b=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var p=ho(t,f,r);l&32&&(p=sT[p.charCodeAt(0)]);var w=i-t.l;r&&r.biff==2&&--w;var j=i==t.l||h===0||!(w>0)?[]:PR(t,w,r,h);return{chKey:d,Name:p,itab:b,rgce:j}}function f4(t,a,r){if(r.biff<8)return nT(t,a,r);for(var i=[],l=t.l+a,d=t.read_shift(r.biff>8?4:2);d--!==0;)i.push(C5(t,r.biff>8?12:6,r));if(t.l!=l)throw new Error("Bad ExternSheet: "+t.l+" != "+l);return i}function nT(t,a,r){t[t.l+1]==3&&t[t.l]++;var i=dd(t,a,r);return i.charCodeAt(0)==3?i.slice(1):i}function iT(t,a,r){if(r.biff<8){t.l+=a;return}var i=t.read_shift(2),l=t.read_shift(2),d=ho(t,i,r),f=ho(t,l,r);return[d,f]}function lT(t,a,r){var i=d4(t);t.l++;var l=t.read_shift(1);return a-=8,[zR(t,a,r),l,i]}function C2(t,a,r){var i=A5(t);switch(r.biff){case 2:t.l++,a-=7;break;case 3:case 4:t.l+=2,a-=8;break;default:t.l+=6,a-=12}return[i,BR(t,a,r)]}function oT(t){var a=t.read_shift(4)!==0,r=t.read_shift(4)!==0,i=t.read_shift(4);return[a,r,i]}function cT(t,a,r){if(!(r.biff<8)){var i=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2),f=t.read_shift(2),h=No(t,0,r);return r.biff<8&&t.read_shift(1),[{r:i,c:l},h,f,d]}}function dT(t,a,r){return cT(t,a,r)}function uT(t,a){for(var r=[],i=t.read_shift(2);i--;)r.push(kf(t));return r}function fT(t,a,r){if(r&&r.biff<8)return hT(t,a,r);var i=u4(t),l=D5(t,a-22,i[1]);return{cmo:i,ft:l}}var xT={8:function(t,a){var r=t.l+a;t.l+=10;var i=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var l=t.read_shift(1);return t.l+=l,t.l=r,{fmt:i}}};function hT(t,a,r){t.l+=4;var i=t.read_shift(2),l=t.read_shift(2),d=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,a-=36;var f=[];return f.push((xT[i]||us)(t,a,r)),{cmo:[l,i,d],ft:f}}function mT(t,a,r){var i=t.l,l="";try{t.l+=4;var d=(r.lastobj||{cmo:[0,0]}).cmo[1],f;[0,5,7,11,12,14].indexOf(d)==-1?t.l+=6:f=b5(t,6,r);var h=t.read_shift(2);t.read_shift(2),wa(t,2);var b=t.read_shift(2);t.l+=b;for(var p=1;p<t.lens.length-1;++p){if(t.l-i!=t.lens[p])throw new Error("TxO: bad continue record");var w=t[t.l],j=ho(t,t.lens[p+1]-t.lens[p]-1);if(l+=j,l.length>=(w?h:2*h))break}if(l.length!==h&&l.length!==h*2)throw new Error("cchText: "+h+" != "+l.length);return t.l=i+a,{t:l}}catch{return t.l=i+a,{t:l}}}function gT(t,a){var r=kf(t);t.l+=16;var i=k5(t,a-24);return[r,i]}function pT(t,a){t.read_shift(2);var r=kf(t),i=t.read_shift((a-10)/2,"dbcs-cont");return i=i.replace(ws,""),[r,i]}function yT(t){var a=[0,0],r;return r=t.read_shift(2),a[0]=m2[r]||r,r=t.read_shift(2),a[1]=m2[r]||r,a}function bT(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(o4(t));return r}function vT(t){for(var a=t.read_shift(2),r=[];a-- >0;)r.push(o4(t));return r}function wT(t){t.l+=2;var a={cxfs:0,crc:0};return a.cxfs=t.read_shift(2),a.crc=t.read_shift(4),a}function x4(t,a,r){if(!r.cellStyles)return us(t,a);var i=r&&r.biff>=12?4:2,l=t.read_shift(i),d=t.read_shift(i),f=t.read_shift(i),h=t.read_shift(i),b=t.read_shift(2);i==2&&(t.l+=2);var p={s:l,e:d,w:f,ixfe:h,flags:b};return(r.biff>=5||!r.biff)&&(p.level=b>>8&7),p}function NT(t,a){var r={};return a<32||(t.l+=16,r.header=ls(t),r.footer=ls(t),t.l+=2),r}function kT(t,a,r){var i={area:!1};if(r.biff!=5)return t.l+=a,i;var l=t.read_shift(1);return t.l+=3,l&16&&(i.area=!0),i}var jT=ni,ET=i4,CT=ud;function _T(t){var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l={fmt:a,env:r,len:i,data:t.slice(t.l,t.l+i)};return t.l+=i,l}function AT(t,a,r){r.biffguess&&r.biff==5&&(r.biff=2);var i=ni(t);++t.l;var l=No(t,a-7,r);return i.t="str",i.val=l,i}function ST(t){var a=ni(t);++t.l;var r=ls(t);return a.t="n",a.val=r,a}function TT(t){var a=ni(t);++t.l;var r=t.read_shift(2);return a.t="n",a.val=r,a}function RT(t){var a=t.read_shift(1);return a===0?(t.l++,""):t.read_shift(a,"sbcs-cont")}function DT(t,a){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=a-13}function OT(t,a,r){var i=t.l+a,l=ni(t),d=t.read_shift(2),f=ho(t,d,r);return t.l=i,l.t="str",l.val=f,l}var IT=[2,3,48,49,131,139,140,245],_2=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},a=ng({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,b){var p=[],w=jl(1);switch(b.type){case"base64":w=kn(Ws(h));break;case"binary":w=kn(h);break;case"buffer":case"array":w=h;break}qa(w,0);var j=w.read_shift(1),C=!!(j&136),_=!1,R=!1;switch(j){case 2:break;case 3:break;case 48:_=!0,C=!0;break;case 49:_=!0,C=!0;break;case 131:break;case 139:break;case 140:R=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+j.toString(16))}var A=0,O=521;j==2&&(A=w.read_shift(2)),w.l+=3,j!=2&&(A=w.read_shift(4)),A>1048576&&(A=1e6),j!=2&&(O=w.read_shift(2));var I=w.read_shift(2),M=b.codepage||1252;j!=2&&(w.l+=16,w.read_shift(1),w[w.l]!==0&&(M=t[w[w.l]]),w.l+=1,w.l+=2),R&&(w.l+=36);for(var T=[],B={},H=Math.min(w.length,j==2?521:O-10-(_?264:0)),U=R?32:11;w.l<H&&w[w.l]!=13;)switch(B={},B.name=V0.utils.decode(M,w.slice(w.l,w.l+U)).replace(/[\u0000\r\n].*$/g,""),w.l+=U,B.type=String.fromCharCode(w.read_shift(1)),j!=2&&!R&&(B.offset=w.read_shift(4)),B.len=w.read_shift(1),j==2&&(B.offset=w.read_shift(2)),B.dec=w.read_shift(1),B.name.length&&T.push(B),j!=2&&(w.l+=R?13:14),B.type){case"B":(!_||B.len!=8)&&b.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"G":case"P":b.WTF&&console.log("Skipping "+B.name+":"+B.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+B.type)}if(w[w.l]!==13&&(w.l=O-1),w.read_shift(1)!==13)throw new Error("DBF Terminator not found "+w.l+" "+w[w.l]);w.l=O;var L=0,P=0;for(p[0]=[],P=0;P!=T.length;++P)p[0][P]=T[P].name;for(;A-- >0;){if(w[w.l]===42){w.l+=I;continue}for(++w.l,p[++L]=[],P=0,P=0;P!=T.length;++P){var z=w.slice(w.l,w.l+T[P].len);w.l+=T[P].len,qa(z,0);var K=V0.utils.decode(M,z);switch(T[P].type){case"C":K.trim().length&&(p[L][P]=K.replace(/\s+$/,""));break;case"D":K.length===8?p[L][P]=new Date(+K.slice(0,4),+K.slice(4,6)-1,+K.slice(6,8)):p[L][P]=K;break;case"F":p[L][P]=parseFloat(K.trim());break;case"+":case"I":p[L][P]=R?z.read_shift(-4,"i")^2147483648:z.read_shift(4,"i");break;case"L":switch(K.trim().toUpperCase()){case"Y":case"T":p[L][P]=!0;break;case"N":case"F":p[L][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+K+"|")}break;case"M":if(!C)throw new Error("DBF Unexpected MEMO for type "+j.toString(16));p[L][P]="##MEMO##"+(R?parseInt(K.trim(),10):z.read_shift(4));break;case"N":K=K.replace(/\u0000/g,"").trim(),K&&K!="."&&(p[L][P]=+K||0);break;case"@":p[L][P]=new Date(z.read_shift(-8,"f")-621356832e5);break;case"T":p[L][P]=new Date((z.read_shift(4)-2440588)*864e5+z.read_shift(4));break;case"Y":p[L][P]=z.read_shift(4,"i")/1e4+z.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":p[L][P]=-z.read_shift(-8,"f");break;case"B":if(_&&T[P].len==8){p[L][P]=z.read_shift(8,"f");break}case"G":case"P":z.l+=T[P].len;break;case"0":if(T[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+T[P].type)}}}if(j!=2&&w.l<w.length&&w[w.l++]!=26)throw new Error("DBF EOF Marker missing "+(w.l-1)+" of "+w.length+" "+w[w.l-1].toString(16));return b&&b.sheetRows&&(p=p.slice(0,b.sheetRows)),b.DBF=T,p}function i(h,b){var p=b||{};p.dateNF||(p.dateNF="yyyymmdd");var w=Ac(r(h,p),p);return w["!cols"]=p.DBF.map(function(j){return{wch:j.len,DBF:j}}),delete p.DBF,w}function l(h,b){try{return _l(i(h,b),b)}catch(p){if(b&&b.WTF)throw p}return{SheetNames:[],Sheets:{}}}var d={B:8,C:250,L:1,D:8,"?":0,"":0};function f(h,b){var p=b||{};if(+p.codepage>=0&&jn(+p.codepage),p.type=="string")throw new Error("Cannot write DBF to JS string");var w=Rm(),j=Um(h,{header:1,raw:!0,cellDates:!0}),C=j[0],_=j.slice(1),R=h["!cols"]||[],A=0,O=0,I=0,M=1;for(A=0;A<C.length;++A){if(((R[A]||{}).DBF||{}).name){C[A]=R[A].DBF.name,++I;continue}if(C[A]!=null){if(++I,typeof C[A]=="number"&&(C[A]=C[A].toString(10)),typeof C[A]!="string")throw new Error("DBF Invalid column name "+C[A]+" |"+typeof C[A]+"|");if(C.indexOf(C[A])!==A){for(O=0;O<1024;++O)if(C.indexOf(C[A]+"_"+O)==-1){C[A]+="_"+O;break}}}}var T=ia(h["!ref"]),B=[],H=[],U=[];for(A=0;A<=T.e.c-T.s.c;++A){var L="",P="",z=0,K=[];for(O=0;O<_.length;++O)_[O][A]!=null&&K.push(_[O][A]);if(K.length==0||C[A]==null){B[A]="?";continue}for(O=0;O<K.length;++O){switch(typeof K[O]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=K[O]instanceof Date?"D":"C";break;default:P="C"}z=Math.max(z,String(K[O]).length),L=L&&L!=P?"C":P}z>250&&(z=250),P=((R[A]||{}).DBF||{}).type,P=="C"&&R[A].DBF.len>z&&(z=R[A].DBF.len),L=="B"&&P=="N"&&(L="N",U[A]=R[A].DBF.dec,z=R[A].DBF.len),H[A]=L=="C"||P=="N"?z:d[L]||0,M+=H[A],B[A]=L}var te=w.next(32);for(te.write_shift(4,318902576),te.write_shift(4,_.length),te.write_shift(2,296+32*I),te.write_shift(2,M),A=0;A<4;++A)te.write_shift(4,0);for(te.write_shift(4,0|(+a[fw]||3)<<8),A=0,O=0;A<C.length;++A)if(C[A]!=null){var V=w.next(32),ne=(C[A].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);V.write_shift(1,ne,"sbcs"),V.write_shift(1,B[A]=="?"?"C":B[A],"sbcs"),V.write_shift(4,O),V.write_shift(1,H[A]||d[B[A]]||0),V.write_shift(1,U[A]||0),V.write_shift(1,2),V.write_shift(4,0),V.write_shift(1,0),V.write_shift(4,0),V.write_shift(4,0),O+=H[A]||d[B[A]]||0}var ie=w.next(264);for(ie.write_shift(4,13),A=0;A<65;++A)ie.write_shift(4,0);for(A=0;A<_.length;++A){var X=w.next(M);for(X.write_shift(1,0),O=0;O<C.length;++O)if(C[O]!=null)switch(B[O]){case"L":X.write_shift(1,_[A][O]==null?63:_[A][O]?84:70);break;case"B":X.write_shift(8,_[A][O]||0,"f");break;case"N":var q="0";for(typeof _[A][O]=="number"&&(q=_[A][O].toFixed(U[O]||0)),I=0;I<H[O]-q.length;++I)X.write_shift(1,32);X.write_shift(1,q,"sbcs");break;case"D":_[A][O]?(X.write_shift(4,("0000"+_[A][O].getFullYear()).slice(-4),"sbcs"),X.write_shift(2,("00"+(_[A][O].getMonth()+1)).slice(-2),"sbcs"),X.write_shift(2,("00"+_[A][O].getDate()).slice(-2),"sbcs")):X.write_shift(8,"00000000","sbcs");break;case"C":var ce=String(_[A][O]!=null?_[A][O]:"").slice(0,H[O]);for(X.write_shift(1,ce,"sbcs"),I=0;I<H[O]-ce.length;++I)X.write_shift(1,32);break}}return w.next(1).write_shift(1,26),w.end()}return{to_workbook:l,to_sheet:i,from_sheet:f}}(),FT=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},a=new RegExp("\x1BN("+ti(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(C,_){var R=t[_];return typeof R=="number"?Vb(R):R},i=function(C,_,R){var A=_.charCodeAt(0)-32<<4|R.charCodeAt(0)-48;return A==59?C:Vb(A)};t["|"]=254;function l(C,_){switch(_.type){case"base64":return d(Ws(C),_);case"binary":return d(C,_);case"buffer":return d(fr&&Buffer.isBuffer(C)?C.toString("binary"):yo(C),_);case"array":return d(xo(C),_)}throw new Error("Unrecognized type "+_.type)}function d(C,_){var R=C.split(/[\n\r]+/),A=-1,O=-1,I=0,M=0,T=[],B=[],H=null,U={},L=[],P=[],z=[],K=0,te;for(+_.codepage>=0&&jn(+_.codepage);I!==R.length;++I){K=0;var V=R[I].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(a,r),ne=V.replace(/;;/g,"\0").split(";").map(function(se){return se.replace(/\u0000/g,";")}),ie=ne[0],X;if(V.length>0)switch(ie){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":ne[1].charAt(0)=="P"&&B.push(V.slice(3).replace(/;;/g,";"));break;case"C":var q=!1,ce=!1,we=!1,oe=!1,fe=-1,re=-1;for(M=1;M<ne.length;++M)switch(ne[M].charAt(0)){case"A":break;case"X":O=parseInt(ne[M].slice(1))-1,ce=!0;break;case"Y":for(A=parseInt(ne[M].slice(1))-1,ce||(O=0),te=T.length;te<=A;++te)T[te]=[];break;case"K":X=ne[M].slice(1),X.charAt(0)==='"'?X=X.slice(1,X.length-1):X==="TRUE"?X=!0:X==="FALSE"?X=!1:isNaN(_n(X))?isNaN(yc(X).getDate())||(X=Ua(X)):(X=_n(X),H!==null&&Cc(H)&&(X=Nf(X))),q=!0;break;case"E":oe=!0;var Q=xc(ne[M].slice(1),{r:A,c:O});T[A][O]=[T[A][O],Q];break;case"S":we=!0,T[A][O]=[T[A][O],"S5S"];break;case"G":break;case"R":fe=parseInt(ne[M].slice(1))-1;break;case"C":re=parseInt(ne[M].slice(1))-1;break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+V)}if(q&&(T[A][O]&&T[A][O].length==2?T[A][O][0]=X:T[A][O]=X,H=null),we){if(oe)throw new Error("SYLK shared formula cannot have own formula");var Y=fe>-1&&T[fe][re];if(!Y||!Y[1])throw new Error("SYLK shared formula cannot find base");T[A][O][1]=k4(Y[1],{r:A-fe,c:O-re})}break;case"F":var ae=0;for(M=1;M<ne.length;++M)switch(ne[M].charAt(0)){case"X":O=parseInt(ne[M].slice(1))-1,++ae;break;case"Y":for(A=parseInt(ne[M].slice(1))-1,te=T.length;te<=A;++te)T[te]=[];break;case"M":K=parseInt(ne[M].slice(1))/20;break;case"F":break;case"G":break;case"P":H=B[parseInt(ne[M].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(z=ne[M].slice(1).split(" "),te=parseInt(z[0],10);te<=parseInt(z[1],10);++te)K=parseInt(z[2],10),P[te-1]=K===0?{hidden:!0}:{wch:K},bc(P[te-1]);break;case"C":O=parseInt(ne[M].slice(1))-1,P[O]||(P[O]={});break;case"R":A=parseInt(ne[M].slice(1))-1,L[A]||(L[A]={}),K>0?(L[A].hpt=K,L[A].hpx=W0(K)):K===0&&(L[A].hidden=!0);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+V)}ae<1&&(H=null);break;default:if(_&&_.WTF)throw new Error("SYLK bad record "+V)}}return L.length>0&&(U["!rows"]=L),P.length>0&&(U["!cols"]=P),_&&_.sheetRows&&(T=T.slice(0,_.sheetRows)),[T,U]}function f(C,_){var R=l(C,_),A=R[0],O=R[1],I=Ac(A,_);return ti(O).forEach(function(M){I[M]=O[M]}),I}function h(C,_){return _l(f(C,_),_)}function b(C,_,R,A){var O="C;Y"+(R+1)+";X"+(A+1)+";K";switch(C.t){case"n":O+=C.v||0,C.f&&!C.F&&(O+=";E"+w9(C.f,{r:R,c:A}));break;case"b":O+=C.v?"TRUE":"FALSE";break;case"e":O+=C.w||C.v;break;case"d":O+='"'+(C.w||C.v)+'"';break;case"s":O+='"'+C.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return O}function p(C,_){_.forEach(function(R,A){var O="F;W"+(A+1)+" "+(A+1)+" ";R.hidden?O+="0":(typeof R.width=="number"&&!R.wpx&&(R.wpx=sf(R.width)),typeof R.wpx=="number"&&!R.wch&&(R.wch=nf(R.wpx)),typeof R.wch=="number"&&(O+=Math.round(R.wch))),O.charAt(O.length-1)!=" "&&C.push(O)})}function w(C,_){_.forEach(function(R,A){var O="F;";R.hidden?O+="M0;":R.hpt?O+="M"+20*R.hpt+";":R.hpx&&(O+="M"+20*v4(R.hpx)+";"),O.length>2&&C.push(O+"R"+(A+1))})}function j(C,_){var R=["ID;PWXL;N;E"],A=[],O=ia(C["!ref"]),I,M=Array.isArray(C),T=`\r
`;R.push("P;PGeneral"),R.push("F;P0;DG0G8;M255"),C["!cols"]&&p(R,C["!cols"]),C["!rows"]&&w(R,C["!rows"]),R.push("B;Y"+(O.e.r-O.s.r+1)+";X"+(O.e.c-O.s.c+1)+";D"+[O.s.c,O.s.r,O.e.c,O.e.r].join(" "));for(var B=O.s.r;B<=O.e.r;++B)for(var H=O.s.c;H<=O.e.c;++H){var U=Zt({r:B,c:H});I=M?(C[B]||[])[H]:C[U],!(!I||I.v==null&&(!I.f||I.F))&&A.push(b(I,C,B,H))}return R.join(T)+T+A.join(T)+T+"E"+T}return{to_workbook:h,to_sheet:f,from_sheet:j}}(),MT=function(){function t(d,f){switch(f.type){case"base64":return a(Ws(d),f);case"binary":return a(d,f);case"buffer":return a(fr&&Buffer.isBuffer(d)?d.toString("binary"):yo(d),f);case"array":return a(xo(d),f)}throw new Error("Unrecognized type "+f.type)}function a(d,f){for(var h=d.split(`
`),b=-1,p=-1,w=0,j=[];w!==h.length;++w){if(h[w].trim()==="BOT"){j[++b]=[],p=0;continue}if(!(b<0)){var C=h[w].trim().split(","),_=C[0],R=C[1];++w;for(var A=h[w]||"";(A.match(/["]/g)||[]).length&1&&w<h.length-1;)A+=`
`+h[++w];switch(A=A.trim(),+_){case-1:if(A==="BOT"){j[++b]=[],p=0;continue}else if(A!=="EOD")throw new Error("Unrecognized DIF special command "+A);break;case 0:A==="TRUE"?j[b][p]=!0:A==="FALSE"?j[b][p]=!1:isNaN(_n(R))?isNaN(yc(R).getDate())?j[b][p]=R:j[b][p]=Ua(R):j[b][p]=_n(R),++p;break;case 1:A=A.slice(1,A.length-1),A=A.replace(/""/g,'"'),A&&A.match(/^=".*"$/)&&(A=A.slice(2,-1)),j[b][p++]=A!==""?A:null;break}if(A==="EOD")break}}return f&&f.sheetRows&&(j=j.slice(0,f.sheetRows)),j}function r(d,f){return Ac(t(d,f),f)}function i(d,f){return _l(r(d,f),f)}var l=function(){var d=function(b,p,w,j,C){b.push(p),b.push(w+","+j),b.push('"'+C.replace(/"/g,'""')+'"')},f=function(b,p,w,j){b.push(p+","+w),b.push(p==1?'"'+j.replace(/"/g,'""')+'"':j)};return function(b){var p=[],w=ia(b["!ref"]),j,C=Array.isArray(b);d(p,"TABLE",0,1,"sheetjs"),d(p,"VECTORS",0,w.e.r-w.s.r+1,""),d(p,"TUPLES",0,w.e.c-w.s.c+1,""),d(p,"DATA",0,0,"");for(var _=w.s.r;_<=w.e.r;++_){f(p,-1,0,"BOT");for(var R=w.s.c;R<=w.e.c;++R){var A=Zt({r:_,c:R});if(j=C?(b[_]||[])[R]:b[A],!j){f(p,1,0,"");continue}switch(j.t){case"n":var O=j.w;!O&&j.v!=null&&(O=j.v),O==null?j.f&&!j.F?f(p,1,0,"="+j.f):f(p,1,0,""):f(p,0,O,"V");break;case"b":f(p,0,j.v?1:0,j.v?"TRUE":"FALSE");break;case"s":f(p,1,0,isNaN(j.v)?j.v:'="'+j.v+'"');break;case"d":j.w||(j.w=un(j.z||tr[14],ks(Ua(j.v)))),f(p,0,j.w,"V");break;default:f(p,1,0,"")}}}f(p,-1,0,"EOD");var I=`\r
`,M=p.join(I);return M}}();return{to_workbook:i,to_sheet:r,from_sheet:l}}(),BT=function(){function t(j){return j.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function a(j){return j.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(j,C){for(var _=j.split(`
`),R=-1,A=-1,O=0,I=[];O!==_.length;++O){var M=_[O].trim().split(":");if(M[0]==="cell"){var T=vs(M[1]);if(I.length<=T.r)for(R=I.length;R<=T.r;++R)I[R]||(I[R]=[]);switch(R=T.r,A=T.c,M[2]){case"t":I[R][A]=t(M[3]);break;case"v":I[R][A]=+M[3];break;case"vtf":var B=M[M.length-1];case"vtc":switch(M[3]){case"nl":I[R][A]=!!+M[4];break;default:I[R][A]=+M[4];break}M[2]=="vtf"&&(I[R][A]=[I[R][A],B])}}}return C&&C.sheetRows&&(I=I.slice(0,C.sheetRows)),I}function i(j,C){return Ac(r(j,C),C)}function l(j,C){return _l(i(j,C),C)}var d=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),f=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),b="--SocialCalcSpreadsheetControlSave--";function p(j){if(!j||!j["!ref"])return"";for(var C=[],_=[],R,A="",O=_c(j["!ref"]),I=Array.isArray(j),M=O.s.r;M<=O.e.r;++M)for(var T=O.s.c;T<=O.e.c;++T)if(A=Zt({r:M,c:T}),R=I?(j[M]||[])[T]:j[A],!(!R||R.v==null||R.t==="z")){switch(_=["cell",A,"t"],R.t){case"s":case"str":_.push(a(R.v));break;case"n":R.f?(_[2]="vtf",_[3]="n",_[4]=R.v,_[5]=a(R.f)):(_[2]="v",_[3]=R.v);break;case"b":_[2]="vt"+(R.f?"f":"c"),_[3]="nl",_[4]=R.v?"1":"0",_[5]=a(R.f||(R.v?"TRUE":"FALSE"));break;case"d":var B=ks(Ua(R.v));_[2]="vtc",_[3]="nd",_[4]=""+B,_[5]=R.w||un(R.z||tr[14],B);break;case"e":continue}C.push(_.join(":"))}return C.push("sheet:c:"+(O.e.c-O.s.c+1)+":r:"+(O.e.r-O.s.r+1)+":tvf:1"),C.push("valueformat:1:text-wiki"),C.join(`
`)}function w(j){return[d,f,h,f,p(j),b].join(`
`)}return{to_workbook:l,to_sheet:i,from_sheet:w}}(),$0=function(){function t(w,j,C,_,R){R.raw?j[C][_]=w:w===""||(w==="TRUE"?j[C][_]=!0:w==="FALSE"?j[C][_]=!1:isNaN(_n(w))?isNaN(yc(w).getDate())?j[C][_]=w:j[C][_]=Ua(w):j[C][_]=_n(w))}function a(w,j){var C=j||{},_=[];if(!w||w.length===0)return _;for(var R=w.split(/[\r\n]/),A=R.length-1;A>=0&&R[A].length===0;)--A;for(var O=10,I=0,M=0;M<=A;++M)I=R[M].indexOf(" "),I==-1?I=R[M].length:I++,O=Math.max(O,I);for(M=0;M<=A;++M){_[M]=[];var T=0;for(t(R[M].slice(0,O).trim(),_,M,T,C),T=1;T<=(R[M].length-O)/10+1;++T)t(R[M].slice(O+(T-1)*10,O+T*10).trim(),_,M,T,C)}return C.sheetRows&&(_=_.slice(0,C.sheetRows)),_}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function l(w){for(var j={},C=!1,_=0,R=0;_<w.length;++_)(R=w.charCodeAt(_))==34?C=!C:!C&&R in r&&(j[R]=(j[R]||0)+1);R=[];for(_ in j)Object.prototype.hasOwnProperty.call(j,_)&&R.push([j[_],_]);if(!R.length){j=i;for(_ in j)Object.prototype.hasOwnProperty.call(j,_)&&R.push([j[_],_])}return R.sort(function(A,O){return A[0]-O[0]||i[A[1]]-i[O[1]]}),r[R.pop()[1]]||44}function d(w,j){var C=j||{},_="",R=C.dense?[]:{},A={s:{c:0,r:0},e:{c:0,r:0}};w.slice(0,4)=="sep="?w.charCodeAt(5)==13&&w.charCodeAt(6)==10?(_=w.charAt(4),w=w.slice(7)):w.charCodeAt(5)==13||w.charCodeAt(5)==10?(_=w.charAt(4),w=w.slice(6)):_=l(w.slice(0,1024)):C&&C.FS?_=C.FS:_=l(w.slice(0,1024));var O=0,I=0,M=0,T=0,B=0,H=_.charCodeAt(0),U=!1,L=0,P=w.charCodeAt(0);w=w.replace(/\r\n/mg,`
`);var z=C.dateNF!=null?YA(C.dateNF):null;function K(){var te=w.slice(T,B),V={};if(te.charAt(0)=='"'&&te.charAt(te.length-1)=='"'&&(te=te.slice(1,-1).replace(/""/g,'"')),te.length===0)V.t="z";else if(C.raw)V.t="s",V.v=te;else if(te.trim().length===0)V.t="s",V.v=te;else if(te.charCodeAt(0)==61)te.charCodeAt(1)==34&&te.charCodeAt(te.length-1)==34?(V.t="s",V.v=te.slice(2,-1).replace(/""/g,'"')):k9(te)?(V.t="n",V.f=te.slice(1)):(V.t="s",V.v=te);else if(te=="TRUE")V.t="b",V.v=!0;else if(te=="FALSE")V.t="b",V.v=!1;else if(!isNaN(M=_n(te)))V.t="n",C.cellText!==!1&&(V.w=te),V.v=M;else if(!isNaN(yc(te).getDate())||z&&te.match(z)){V.z=C.dateNF||tr[14];var ne=0;z&&te.match(z)&&(te=WA(te,C.dateNF,te.match(z)||[]),ne=1),C.cellDates?(V.t="d",V.v=Ua(te,ne)):(V.t="n",V.v=ks(Ua(te,ne))),C.cellText!==!1&&(V.w=un(V.z,V.v instanceof Date?ks(V.v):V.v)),C.cellNF||delete V.z}else V.t="s",V.v=te;if(V.t=="z"||(C.dense?(R[O]||(R[O]=[]),R[O][I]=V):R[Zt({c:I,r:O})]=V),T=B+1,P=w.charCodeAt(T),A.e.c<I&&(A.e.c=I),A.e.r<O&&(A.e.r=O),L==H)++I;else if(I=0,++O,C.sheetRows&&C.sheetRows<=O)return!0}e:for(;B<w.length;++B)switch(L=w.charCodeAt(B)){case 34:P===34&&(U=!U);break;case H:case 10:case 13:if(!U&&K())break e;break}return B-T>0&&K(),R["!ref"]=pr(A),R}function f(w,j){return!(j&&j.PRN)||j.FS||w.slice(0,4)=="sep="||w.indexOf("	")>=0||w.indexOf(",")>=0||w.indexOf(";")>=0?d(w,j):Ac(a(w,j),j)}function h(w,j){var C="",_=j.type=="string"?[0,0,0,0]:jg(w,j);switch(j.type){case"base64":C=Ws(w);break;case"binary":C=w;break;case"buffer":j.codepage==65001?C=w.toString("utf8"):j.codepage&&typeof V0<"u"||(C=fr&&Buffer.isBuffer(w)?w.toString("binary"):yo(w));break;case"array":C=xo(w);break;case"string":C=w;break;default:throw new Error("Unrecognized type "+j.type)}return _[0]==239&&_[1]==187&&_[2]==191?C=zr(C.slice(3)):j.type!="string"&&j.type!="buffer"&&j.codepage==65001?C=zr(C):j.type=="binary"&&typeof V0<"u",C.slice(0,19)=="socialcalc:version:"?BT.to_sheet(j.type=="string"?C:zr(C),j):f(C,j)}function b(w,j){return _l(h(w,j),j)}function p(w){for(var j=[],C=ia(w["!ref"]),_,R=Array.isArray(w),A=C.s.r;A<=C.e.r;++A){for(var O=[],I=C.s.c;I<=C.e.c;++I){var M=Zt({r:A,c:I});if(_=R?(w[A]||[])[I]:w[M],!_||_.v==null){O.push("          ");continue}for(var T=(_.w||(Fi(_),_.w)||"").slice(0,10);T.length<10;)T+=" ";O.push(T+(I===0?" ":""))}j.push(O.join(""))}return j.join(`
`)}return{to_workbook:b,to_sheet:h,from_sheet:p}}();function LT(t,a){var r=a||{},i=!!r.WTF;r.WTF=!0;try{var l=FT.to_workbook(t,r);return r.WTF=i,l}catch(d){if(r.WTF=i,!d.message.match(/SYLK bad record ID/)&&i)throw d;return $0.to_workbook(t,a)}}var O0=function(){function t(Q,Y,ae){if(Q){qa(Q,Q.l||0);for(var se=ae.Enum||fe;Q.l<Q.length;){var Z=Q.read_shift(2),Re=se[Z]||se[65535],je=Q.read_shift(2),Ue=Q.l+je,Me=Re.f&&Re.f(Q,je,ae);if(Q.l=Ue,Y(Me,Re,Z))return}}}function a(Q,Y){switch(Y.type){case"base64":return r(kn(Ws(Q)),Y);case"binary":return r(kn(Q),Y);case"buffer":case"array":return r(Q,Y)}throw"Unsupported type "+Y.type}function r(Q,Y){if(!Q)return Q;var ae=Y||{},se=ae.dense?[]:{},Z="Sheet1",Re="",je=0,Ue={},Me=[],at=[],ye={s:{r:0,c:0},e:{r:0,c:0}},Ae=ae.sheetRows||0;if(Q[2]==0&&(Q[3]==8||Q[3]==9)&&Q.length>=16&&Q[14]==5&&Q[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(Q[2]==2)ae.Enum=fe,t(Q,function(be,dt,me){switch(me){case 0:ae.vers=be,be>=4096&&(ae.qpro=!0);break;case 6:ye=be;break;case 204:be&&(Re=be);break;case 222:Re=be;break;case 15:case 51:ae.qpro||(be[1].v=be[1].v.slice(1));case 13:case 14:case 16:me==14&&(be[2]&112)==112&&(be[2]&15)>1&&(be[2]&15)<15&&(be[1].z=ae.dateNF||tr[14],ae.cellDates&&(be[1].t="d",be[1].v=Nf(be[1].v))),ae.qpro&&be[3]>je&&(se["!ref"]=pr(ye),Ue[Z]=se,Me.push(Z),se=ae.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},je=be[3],Z=Re||"Sheet"+(je+1),Re="");var Pe=ae.dense?(se[be[0].r]||[])[be[0].c]:se[Zt(be[0])];if(Pe){Pe.t=be[1].t,Pe.v=be[1].v,be[1].z!=null&&(Pe.z=be[1].z),be[1].f!=null&&(Pe.f=be[1].f);break}ae.dense?(se[be[0].r]||(se[be[0].r]=[]),se[be[0].r][be[0].c]=be[1]):se[Zt(be[0])]=be[1];break}},ae);else if(Q[2]==26||Q[2]==14)ae.Enum=re,Q[2]==14&&(ae.qpro=!0,Q.l=0),t(Q,function(be,dt,me){switch(me){case 204:Z=be;break;case 22:be[1].v=be[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(be[3]>je&&(se["!ref"]=pr(ye),Ue[Z]=se,Me.push(Z),se=ae.dense?[]:{},ye={s:{r:0,c:0},e:{r:0,c:0}},je=be[3],Z="Sheet"+(je+1)),Ae>0&&be[0].r>=Ae)break;ae.dense?(se[be[0].r]||(se[be[0].r]=[]),se[be[0].r][be[0].c]=be[1]):se[Zt(be[0])]=be[1],ye.e.c<be[0].c&&(ye.e.c=be[0].c),ye.e.r<be[0].r&&(ye.e.r=be[0].r);break;case 27:be[14e3]&&(at[be[14e3][0]]=be[14e3][1]);break;case 1537:at[be[0]]=be[1],be[0]==je&&(Z=be[1]);break}},ae);else throw new Error("Unrecognized LOTUS BOF "+Q[2]);if(se["!ref"]=pr(ye),Ue[Re||Z]=se,Me.push(Re||Z),!at.length)return{SheetNames:Me,Sheets:Ue};for(var Fe={},Ce=[],Je=0;Je<at.length;++Je)Ue[Me[Je]]?(Ce.push(at[Je]||Me[Je]),Fe[at[Je]]=Ue[at[Je]]||Ue[Me[Je]]):(Ce.push(at[Je]),Fe[at[Je]]={"!ref":"A1"});return{SheetNames:Ce,Sheets:Fe}}function i(Q,Y){var ae=Y||{};if(+ae.codepage>=0&&jn(+ae.codepage),ae.type=="string")throw new Error("Cannot write WK1 to JS string");var se=Rm(),Z=ia(Q["!ref"]),Re=Array.isArray(Q),je=[];Nn(se,0,d(1030)),Nn(se,6,b(Z));for(var Ue=Math.min(Z.e.r,8191),Me=Z.s.r;Me<=Ue;++Me)for(var at=Ya(Me),ye=Z.s.c;ye<=Z.e.c;++ye){Me===Z.s.r&&(je[ye]=Oa(ye));var Ae=je[ye]+at,Fe=Re?(Q[Me]||[])[ye]:Q[Ae];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")(Fe.v|0)==Fe.v&&Fe.v>=-32768&&Fe.v<=32767?Nn(se,13,_(Me,ye,Fe.v)):Nn(se,14,A(Me,ye,Fe.v));else{var Ce=Fi(Fe);Nn(se,15,j(Me,ye,Ce.slice(0,239)))}}return Nn(se,1),se.end()}function l(Q,Y){var ae=Y||{};if(+ae.codepage>=0&&jn(+ae.codepage),ae.type=="string")throw new Error("Cannot write WK3 to JS string");var se=Rm();Nn(se,0,f(Q));for(var Z=0,Re=0;Z<Q.SheetNames.length;++Z)(Q.Sheets[Q.SheetNames[Z]]||{})["!ref"]&&Nn(se,27,oe(Q.SheetNames[Z],Re++));var je=0;for(Z=0;Z<Q.SheetNames.length;++Z){var Ue=Q.Sheets[Q.SheetNames[Z]];if(!(!Ue||!Ue["!ref"])){for(var Me=ia(Ue["!ref"]),at=Array.isArray(Ue),ye=[],Ae=Math.min(Me.e.r,8191),Fe=Me.s.r;Fe<=Ae;++Fe)for(var Ce=Ya(Fe),Je=Me.s.c;Je<=Me.e.c;++Je){Fe===Me.s.r&&(ye[Je]=Oa(Je));var be=ye[Je]+Ce,dt=at?(Ue[Fe]||[])[Je]:Ue[be];if(!(!dt||dt.t=="z"))if(dt.t=="n")Nn(se,23,K(Fe,Je,je,dt.v));else{var me=Fi(dt);Nn(se,22,L(Fe,Je,je,me.slice(0,239)))}}++je}}return Nn(se,1),se.end()}function d(Q){var Y=Da(2);return Y.write_shift(2,Q),Y}function f(Q){var Y=Da(26);Y.write_shift(2,4096),Y.write_shift(2,4),Y.write_shift(4,0);for(var ae=0,se=0,Z=0,Re=0;Re<Q.SheetNames.length;++Re){var je=Q.SheetNames[Re],Ue=Q.Sheets[je];if(!(!Ue||!Ue["!ref"])){++Z;var Me=_c(Ue["!ref"]);ae<Me.e.r&&(ae=Me.e.r),se<Me.e.c&&(se=Me.e.c)}}return ae>8191&&(ae=8191),Y.write_shift(2,ae),Y.write_shift(1,Z),Y.write_shift(1,se),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(1,1),Y.write_shift(1,2),Y.write_shift(4,0),Y.write_shift(4,0),Y}function h(Q,Y,ae){var se={s:{c:0,r:0},e:{c:0,r:0}};return Y==8&&ae.qpro?(se.s.c=Q.read_shift(1),Q.l++,se.s.r=Q.read_shift(2),se.e.c=Q.read_shift(1),Q.l++,se.e.r=Q.read_shift(2),se):(se.s.c=Q.read_shift(2),se.s.r=Q.read_shift(2),Y==12&&ae.qpro&&(Q.l+=2),se.e.c=Q.read_shift(2),se.e.r=Q.read_shift(2),Y==12&&ae.qpro&&(Q.l+=2),se.s.c==65535&&(se.s.c=se.e.c=se.s.r=se.e.r=0),se)}function b(Q){var Y=Da(8);return Y.write_shift(2,Q.s.c),Y.write_shift(2,Q.s.r),Y.write_shift(2,Q.e.c),Y.write_shift(2,Q.e.r),Y}function p(Q,Y,ae){var se=[{c:0,r:0},{t:"n",v:0},0,0];return ae.qpro&&ae.vers!=20768?(se[0].c=Q.read_shift(1),se[3]=Q.read_shift(1),se[0].r=Q.read_shift(2),Q.l+=2):(se[2]=Q.read_shift(1),se[0].c=Q.read_shift(2),se[0].r=Q.read_shift(2)),se}function w(Q,Y,ae){var se=Q.l+Y,Z=p(Q,Y,ae);if(Z[1].t="s",ae.vers==20768){Q.l++;var Re=Q.read_shift(1);return Z[1].v=Q.read_shift(Re,"utf8"),Z}return ae.qpro&&Q.l++,Z[1].v=Q.read_shift(se-Q.l,"cstr"),Z}function j(Q,Y,ae){var se=Da(7+ae.length);se.write_shift(1,255),se.write_shift(2,Y),se.write_shift(2,Q),se.write_shift(1,39);for(var Z=0;Z<se.length;++Z){var Re=ae.charCodeAt(Z);se.write_shift(1,Re>=128?95:Re)}return se.write_shift(1,0),se}function C(Q,Y,ae){var se=p(Q,Y,ae);return se[1].v=Q.read_shift(2,"i"),se}function _(Q,Y,ae){var se=Da(7);return se.write_shift(1,255),se.write_shift(2,Y),se.write_shift(2,Q),se.write_shift(2,ae,"i"),se}function R(Q,Y,ae){var se=p(Q,Y,ae);return se[1].v=Q.read_shift(8,"f"),se}function A(Q,Y,ae){var se=Da(13);return se.write_shift(1,255),se.write_shift(2,Y),se.write_shift(2,Q),se.write_shift(8,ae,"f"),se}function O(Q,Y,ae){var se=Q.l+Y,Z=p(Q,Y,ae);if(Z[1].v=Q.read_shift(8,"f"),ae.qpro)Q.l=se;else{var Re=Q.read_shift(2);B(Q.slice(Q.l,Q.l+Re),Z),Q.l+=Re}return Z}function I(Q,Y,ae){var se=Y&32768;return Y&=-32769,Y=(se?Q:0)+(Y>=8192?Y-16384:Y),(se?"":"$")+(ae?Oa(Y):Ya(Y))}var M={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},T=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function B(Q,Y){qa(Q,0);for(var ae=[],se=0,Z="",Re="",je="",Ue="";Q.l<Q.length;){var Me=Q[Q.l++];switch(Me){case 0:ae.push(Q.read_shift(8,"f"));break;case 1:Re=I(Y[0].c,Q.read_shift(2),!0),Z=I(Y[0].r,Q.read_shift(2),!1),ae.push(Re+Z);break;case 2:{var at=I(Y[0].c,Q.read_shift(2),!0),ye=I(Y[0].r,Q.read_shift(2),!1);Re=I(Y[0].c,Q.read_shift(2),!0),Z=I(Y[0].r,Q.read_shift(2),!1),ae.push(at+ye+":"+Re+Z)}break;case 3:if(Q.l<Q.length){console.error("WK1 premature formula end");return}break;case 4:ae.push("("+ae.pop()+")");break;case 5:ae.push(Q.read_shift(2));break;case 6:{for(var Ae="";Me=Q[Q.l++];)Ae+=String.fromCharCode(Me);ae.push('"'+Ae.replace(/"/g,'""')+'"')}break;case 8:ae.push("-"+ae.pop());break;case 23:ae.push("+"+ae.pop());break;case 22:ae.push("NOT("+ae.pop()+")");break;case 20:case 21:Ue=ae.pop(),je=ae.pop(),ae.push(["AND","OR"][Me-20]+"("+je+","+Ue+")");break;default:if(Me<32&&T[Me])Ue=ae.pop(),je=ae.pop(),ae.push(je+T[Me]+Ue);else if(M[Me]){if(se=M[Me][1],se==69&&(se=Q[Q.l++]),se>ae.length){console.error("WK1 bad formula parse 0x"+Me.toString(16)+":|"+ae.join("|")+"|");return}var Fe=ae.slice(-se);ae.length-=se,ae.push(M[Me][0]+"("+Fe.join(",")+")")}else return Me<=7?console.error("WK1 invalid opcode "+Me.toString(16)):Me<=24?console.error("WK1 unsupported op "+Me.toString(16)):Me<=30?console.error("WK1 invalid opcode "+Me.toString(16)):Me<=115?console.error("WK1 unsupported function opcode "+Me.toString(16)):console.error("WK1 unrecognized opcode "+Me.toString(16))}}ae.length==1?Y[1].f=""+ae[0]:console.error("WK1 bad formula parse |"+ae.join("|")+"|")}function H(Q){var Y=[{c:0,r:0},{t:"n",v:0},0];return Y[0].r=Q.read_shift(2),Y[3]=Q[Q.l++],Y[0].c=Q[Q.l++],Y}function U(Q,Y){var ae=H(Q);return ae[1].t="s",ae[1].v=Q.read_shift(Y-4,"cstr"),ae}function L(Q,Y,ae,se){var Z=Da(6+se.length);Z.write_shift(2,Q),Z.write_shift(1,ae),Z.write_shift(1,Y),Z.write_shift(1,39);for(var Re=0;Re<se.length;++Re){var je=se.charCodeAt(Re);Z.write_shift(1,je>=128?95:je)}return Z.write_shift(1,0),Z}function P(Q,Y){var ae=H(Q);ae[1].v=Q.read_shift(2);var se=ae[1].v>>1;if(ae[1].v&1)switch(se&7){case 0:se=(se>>3)*5e3;break;case 1:se=(se>>3)*500;break;case 2:se=(se>>3)/20;break;case 3:se=(se>>3)/200;break;case 4:se=(se>>3)/2e3;break;case 5:se=(se>>3)/2e4;break;case 6:se=(se>>3)/16;break;case 7:se=(se>>3)/64;break}return ae[1].v=se,ae}function z(Q,Y){var ae=H(Q),se=Q.read_shift(4),Z=Q.read_shift(4),Re=Q.read_shift(2);if(Re==65535)return se===0&&Z===3221225472?(ae[1].t="e",ae[1].v=15):se===0&&Z===3489660928?(ae[1].t="e",ae[1].v=42):ae[1].v=0,ae;var je=Re&32768;return Re=(Re&32767)-16446,ae[1].v=(1-je*2)*(Z*Math.pow(2,Re+32)+se*Math.pow(2,Re)),ae}function K(Q,Y,ae,se){var Z=Da(14);if(Z.write_shift(2,Q),Z.write_shift(1,ae),Z.write_shift(1,Y),se==0)return Z.write_shift(4,0),Z.write_shift(4,0),Z.write_shift(2,65535),Z;var Re=0,je=0,Ue=0,Me=0;return se<0&&(Re=1,se=-se),je=Math.log2(se)|0,se/=Math.pow(2,je-31),Me=se>>>0,(Me&2147483648)==0&&(se/=2,++je,Me=se>>>0),se-=Me,Me|=2147483648,Me>>>=0,se*=Math.pow(2,32),Ue=se>>>0,Z.write_shift(4,Ue),Z.write_shift(4,Me),je+=16383+(Re?32768:0),Z.write_shift(2,je),Z}function te(Q,Y){var ae=z(Q);return Q.l+=Y-14,ae}function V(Q,Y){var ae=H(Q),se=Q.read_shift(4);return ae[1].v=se>>6,ae}function ne(Q,Y){var ae=H(Q),se=Q.read_shift(8,"f");return ae[1].v=se,ae}function ie(Q,Y){var ae=ne(Q);return Q.l+=Y-10,ae}function X(Q,Y){return Q[Q.l+Y-1]==0?Q.read_shift(Y,"cstr"):""}function q(Q,Y){var ae=Q[Q.l++];ae>Y-1&&(ae=Y-1);for(var se="";se.length<ae;)se+=String.fromCharCode(Q[Q.l++]);return se}function ce(Q,Y,ae){if(!(!ae.qpro||Y<21)){var se=Q.read_shift(1);Q.l+=17,Q.l+=1,Q.l+=2;var Z=Q.read_shift(Y-21,"cstr");return[se,Z]}}function we(Q,Y){for(var ae={},se=Q.l+Y;Q.l<se;){var Z=Q.read_shift(2);if(Z==14e3){for(ae[Z]=[0,""],ae[Z][0]=Q.read_shift(2);Q[Q.l];)ae[Z][1]+=String.fromCharCode(Q[Q.l]),Q.l++;Q.l++}}return ae}function oe(Q,Y){var ae=Da(5+Q.length);ae.write_shift(2,14e3),ae.write_shift(2,Y);for(var se=0;se<Q.length;++se){var Z=Q.charCodeAt(se);ae[ae.l++]=Z>127?95:Z}return ae[ae.l++]=0,ae}var fe={0:{n:"BOF",f:wa},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:C},14:{n:"NUMBER",f:R},15:{n:"LABEL",f:w},16:{n:"FORMULA",f:O},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:w},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:X},222:{n:"SHEETNAMELP",f:q},65535:{n:""}},re={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:U},23:{n:"NUMBER17",f:z},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:te},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:we},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:V},38:{n:"??"},39:{n:"NUMBER27",f:ne},40:{n:"FORMULA28",f:ie},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:X},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ce},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:l,to_workbook:a}}();function PT(t){var a={},r=t.match(fs),i=0,l=!1;if(r)for(;i!=r.length;++i){var d=Gt(r[i]);switch(d[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!d.val)break;case"<shadow>":case"<shadow/>":a.shadow=1;break;case"</shadow>":break;case"<charset":if(d.val=="1")break;a.cp=eg[parseInt(d.val,10)];break;case"<outline":if(!d.val)break;case"<outline>":case"<outline/>":a.outline=1;break;case"</outline>":break;case"<rFont":a.name=d.val;break;case"<sz":a.sz=d.val;break;case"<strike":if(!d.val)break;case"<strike>":case"<strike/>":a.strike=1;break;case"</strike>":break;case"<u":if(!d.val)break;switch(d.val){case"double":a.uval="double";break;case"singleAccounting":a.uval="single-accounting";break;case"doubleAccounting":a.uval="double-accounting";break}case"<u>":case"<u/>":a.u=1;break;case"</u>":break;case"<b":if(d.val=="0")break;case"<b>":case"<b/>":a.b=1;break;case"</b>":break;case"<i":if(d.val=="0")break;case"<i>":case"<i/>":a.i=1;break;case"</i>":break;case"<color":d.rgb&&(a.color=d.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":a.family=d.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":a.valign=d.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(d[0].charCodeAt(1)!==47&&!l)throw new Error("Unrecognized rich format "+d[0])}}return a}var zT=function(){var t=X0("t"),a=X0("rPr");function r(d){var f=d.match(t);if(!f)return{t:"s",v:""};var h={t:"s",v:br(f[1])},b=d.match(a);return b&&(h.s=PT(b[1])),h}var i=/<(?:\w+:)?r>/g,l=/<\/(?:\w+:)?r>/;return function(f){return f.replace(i,"").split(l).map(r).filter(function(h){return h.v})}}(),UT=function(){var a=/(\r\n|\n)/g;function r(l,d,f){var h=[];l.u&&h.push("text-decoration: underline;"),l.uval&&h.push("text-underline-style:"+l.uval+";"),l.sz&&h.push("font-size:"+l.sz+"pt;"),l.outline&&h.push("text-effect: outline;"),l.shadow&&h.push("text-shadow: auto;"),d.push('<span style="'+h.join("")+'">'),l.b&&(d.push("<b>"),f.push("</b>")),l.i&&(d.push("<i>"),f.push("</i>")),l.strike&&(d.push("<s>"),f.push("</s>"));var b=l.valign||"";return b=="superscript"||b=="super"?b="sup":b=="subscript"&&(b="sub"),b!=""&&(d.push("<"+b+">"),f.push("</"+b+">")),f.push("</span>"),l}function i(l){var d=[[],l.v,[]];return l.v?(l.s&&r(l.s,d[0],d[2]),d[0].join("")+d[1].replace(a,"<br/>")+d[2].join("")):""}return function(d){return d.map(i).join("")}}(),HT=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,VT=/<(?:\w+:)?r>/,GT=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function pg(t,a){var r=a?a.cellHTML:!0,i={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=br(zr(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=zr(t),r&&(i.h=lg(i.t))):t.match(VT)&&(i.r=zr(t),i.t=br(zr((t.replace(GT,"").match(HT)||[]).join("").replace(fs,""))),r&&(i.h=UT(zT(i.r)))),i):{t:""}}var XT=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,qT=/<(?:\w+:)?(?:si|sstItem)>/g,$T=/<\/(?:\w+:)?(?:si|sstItem)>/;function YT(t,a){var r=[],i="";if(!t)return r;var l=t.match(XT);if(l){i=l[2].replace(qT,"").split($T);for(var d=0;d!=i.length;++d){var f=pg(i[d].trim(),a);f!=null&&(r[r.length]=f)}l=Gt(l[1]),r.Count=l.count,r.Unique=l.uniqueCount}return r}function WT(t){return[t.read_shift(4),t.read_shift(4)]}function KT(t,a){var r=[],i=!1;return Mi(t,function(d,f,h){switch(h){case 159:r.Count=d[0],r.Unique=d[1];break;case 19:r.push(d);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(f.T,!i||a.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function h4(t){for(var a=[],r=t.split(""),i=0;i<r.length;++i)a[i]=r[i].charCodeAt(0);return a}function Si(t,a){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),a>=4&&(t.l+=a-4),r}function ZT(t){var a={};return a.id=t.read_shift(0,"lpp4"),a.R=Si(t,4),a.U=Si(t,4),a.W=Si(t,4),a}function QT(t){for(var a=t.read_shift(4),r=t.l+a-4,i={},l=t.read_shift(4),d=[];l-- >0;)d.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(i.name=t.read_shift(0,"lpp4"),i.comps=d,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return i}function JT(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(QT(t));return a}function e7(t){var a=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)a.push(t.read_shift(0,"lpp4"));return a}function t7(t){var a={};return t.read_shift(4),t.l+=4,a.id=t.read_shift(0,"lpp4"),a.name=t.read_shift(0,"lpp4"),a.R=Si(t,4),a.U=Si(t,4),a.W=Si(t,4),a}function r7(t){var a=t7(t);if(a.ename=t.read_shift(0,"8lpp4"),a.blksz=t.read_shift(4),a.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return a}function m4(t,a){var r=t.l+a,i={};i.Flags=t.read_shift(4)&63,t.l+=4,i.AlgID=t.read_shift(4);var l=!1;switch(i.AlgID){case 26126:case 26127:case 26128:l=i.Flags==36;break;case 26625:l=i.Flags==4;break;case 0:l=i.Flags==16||i.Flags==4||i.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!l)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=t.read_shift(4),i.KeySize=t.read_shift(4),i.ProviderType=t.read_shift(4),t.l+=8,i.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,i}function g4(t,a){var r={},i=t.l+a;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,i),t.l=i,r}function a7(t){var a=Si(t);switch(a.Minor){case 2:return[a.Minor,s7(t)];case 3:return[a.Minor,n7()];case 4:return[a.Minor,i7(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+a.Minor)}function s7(t){var a=t.read_shift(4);if((a&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),i=m4(t,r),l=g4(t,t.length-t.l);return{t:"Std",h:i,v:l}}function n7(){throw new Error("File is password-protected: ECMA-376 Extensible")}function i7(t){var a=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),i={};return r.replace(fs,function(d){var f=Gt(d);switch(si(f[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":a.forEach(function(h){i[h]=f[h]});break;case"<dataIntegrity":i.encryptedHmacKey=f.encryptedHmacKey,i.encryptedHmacValue=f.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":i.uri=f.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":i.encs.push(f);break;default:throw f[0]}}),i}function l7(t,a){var r={},i=r.EncryptionVersionInfo=Si(t,4);if(a-=4,i.Minor!=2)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);r.Flags=t.read_shift(4),a-=4;var l=t.read_shift(4);return a-=4,r.EncryptionHeader=m4(t,l),a-=l,r.EncryptionVerifier=g4(t,a),r}function o7(t){var a={},r=a.EncryptionVersionInfo=Si(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return a.Salt=t.read_shift(16),a.EncryptedVerifier=t.read_shift(16),a.EncryptedVerifierHash=t.read_shift(16),a}function c7(t){var a=0,r,i=h4(t),l=i.length+1,d,f,h,b,p;for(r=jl(l),r[0]=i.length,d=1;d!=l;++d)r[d]=i[d-1];for(d=l-1;d>=0;--d)f=r[d],h=(a&16384)===0?0:1,b=a<<1&32767,p=h|b,a=p^f;return a^52811}var p4=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],a=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(f){return(f/2|f*128)&255},l=function(f,h){return i(f^h)},d=function(f){for(var h=a[f.length-1],b=104,p=f.length-1;p>=0;--p)for(var w=f[p],j=0;j!=7;++j)w&64&&(h^=r[b]),w*=2,--b;return h};return function(f){for(var h=h4(f),b=d(h),p=h.length,w=jl(16),j=0;j!=16;++j)w[j]=0;var C,_,R;for((p&1)===1&&(C=b>>8,w[p]=l(t[0],C),--p,C=b&255,_=h[h.length-1],w[p]=l(_,C));p>0;)--p,C=b>>8,w[p]=l(h[p],C),--p,C=b&255,w[p]=l(h[p],C);for(p=15,R=15-h.length;R>0;)C=b>>8,w[p]=l(t[R],C),--p,--R,C=b&255,w[p]=l(h[p],C),--p,--R;return w}}(),d7=function(t,a,r,i,l){l||(l=a),i||(i=p4(t));var d,f;for(d=0;d!=a.length;++d)f=a[d],f^=i[r],f=(f>>5|f<<3)&255,l[d]=f,++r;return[l,r,i]},u7=function(t){var a=0,r=p4(t);return function(i){var l=d7("",i,a,r);return a=l[1],l[0]}};function f7(t,a,r,i){var l={key:wa(t),verificationBytes:wa(t)};return r.password&&(l.verifier=c7(r.password)),i.valid=l.verificationBytes===l.verifier,i.valid&&(i.insitu=u7(r.password)),l}function x7(t,a,r){var i=r||{};return i.Info=t.read_shift(2),t.l-=2,i.Info===1?i.Data=o7(t):i.Data=l7(t,a),i}function h7(t,a,r){var i={Type:r.biff>=8?t.read_shift(2):0};return i.Type?x7(t,a-2,i):f7(t,r.biff>=8?a:a-2,r,i),i}var m7=function(){function t(l,d){switch(d.type){case"base64":return a(Ws(l),d);case"binary":return a(l,d);case"buffer":return a(fr&&Buffer.isBuffer(l)?l.toString("binary"):yo(l),d);case"array":return a(xo(l),d)}throw new Error("Unrecognized type "+d.type)}function a(l,d){var f=d||{},h=f.dense?[]:{},b=l.match(/\\trowd.*?\\row\b/g);if(!b.length)throw new Error("RTF missing table");var p={s:{c:0,r:0},e:{c:0,r:b.length-1}};return b.forEach(function(w,j){Array.isArray(h)&&(h[j]=[]);for(var C=/\\\w+\b/g,_=0,R,A=-1;R=C.exec(w);){switch(R[0]){case"\\cell":var O=w.slice(_,C.lastIndex-R[0].length);if(O[0]==" "&&(O=O.slice(1)),++A,O.length){var I={v:O,t:"s"};Array.isArray(h)?h[j][A]=I:h[Zt({r:j,c:A})]=I}break}_=C.lastIndex}A>p.e.c&&(p.e.c=A)}),h["!ref"]=pr(p),h}function r(l,d){return _l(t(l,d),d)}function i(l){for(var d=["{\\rtf1\\ansi"],f=ia(l["!ref"]),h,b=Array.isArray(l),p=f.s.r;p<=f.e.r;++p){d.push("\\trowd\\trautofit1");for(var w=f.s.c;w<=f.e.c;++w)d.push("\\cellx"+(w+1));for(d.push("\\pard\\intbl"),w=f.s.c;w<=f.e.c;++w){var j=Zt({r:p,c:w});h=b?(l[p]||[])[w]:l[j],!(!h||h.v==null&&(!h.f||h.F))&&(d.push(" "+(h.w||(Fi(h),h.w))),d.push("\\cell"))}d.push("\\pard\\intbl\\row")}return d.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:i}}();function g7(t){var a=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(a.slice(0,2),16),parseInt(a.slice(2,4),16),parseInt(a.slice(4,6),16)]}function Y0(t){for(var a=0,r=1;a!=3;++a)r=r*256+(t[a]>255?255:t[a]<0?0:t[a]);return r.toString(16).toUpperCase().slice(1)}function p7(t){var a=t[0]/255,r=t[1]/255,i=t[2]/255,l=Math.max(a,r,i),d=Math.min(a,r,i),f=l-d;if(f===0)return[0,0,a];var h=0,b=0,p=l+d;switch(b=f/(p>1?2-p:p),l){case a:h=((r-i)/f+6)%6;break;case r:h=(i-a)/f+2;break;case i:h=(a-r)/f+4;break}return[h/6,b,p/2]}function y7(t){var a=t[0],r=t[1],i=t[2],l=r*2*(i<.5?i:1-i),d=i-l/2,f=[d,d,d],h=6*a,b;if(r!==0)switch(h|0){case 0:case 6:b=l*h,f[0]+=l,f[1]+=b;break;case 1:b=l*(2-h),f[0]+=b,f[1]+=l;break;case 2:b=l*(h-2),f[1]+=l,f[2]+=b;break;case 3:b=l*(4-h),f[1]+=b,f[2]+=l;break;case 4:b=l*(h-4),f[2]+=l,f[0]+=b;break;case 5:b=l*(6-h),f[2]+=b,f[0]+=l;break}for(var p=0;p!=3;++p)f[p]=Math.round(f[p]*255);return f}function af(t,a){if(a===0)return t;var r=p7(g7(t));return a<0?r[2]=r[2]*(1+a):r[2]=1-(1-r[2])*(1-a),Y0(y7(r))}var y4=6,b7=15,v7=1,ys=y4;function sf(t){return Math.floor((t+Math.round(128/ys)/256)*ys)}function nf(t){return Math.floor((t-5)/ys*100+.5)/100}function Fm(t){return Math.round((t*ys+5)/ys*256)/256}function nm(t){return Fm(nf(sf(t)))}function yg(t){var a=Math.abs(t-nm(t)),r=ys;if(a>.005)for(ys=v7;ys<b7;++ys)Math.abs(t-nm(t))<=a&&(a=Math.abs(t-nm(t)),r=ys);ys=r}function bc(t){t.width?(t.wpx=sf(t.width),t.wch=nf(t.wpx),t.MDW=ys):t.wpx?(t.wch=nf(t.wpx),t.width=Fm(t.wch),t.MDW=ys):typeof t.wch=="number"&&(t.width=Fm(t.wch),t.wpx=sf(t.width),t.MDW=ys),t.customWidth&&delete t.customWidth}var w7=96,b4=w7;function v4(t){return t*96/b4}function W0(t){return t*b4/96}var N7={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function k7(t,a,r,i){a.Borders=[];var l={},d=!1;(t[0].match(fs)||[]).forEach(function(f){var h=Gt(f);switch(si(h[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":l={},h.diagonalUp&&(l.diagonalUp=Yr(h.diagonalUp)),h.diagonalDown&&(l.diagonalDown=Yr(h.diagonalDown)),a.Borders.push(l);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(i&&i.WTF&&!d)throw new Error("unrecognized "+h[0]+" in borders")}})}function j7(t,a,r,i){a.Fills=[];var l={},d=!1;(t[0].match(fs)||[]).forEach(function(f){var h=Gt(f);switch(si(h[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":l={},a.Fills.push(l);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":a.Fills.push(l),l={};break;case"<patternFill":case"<patternFill>":h.patternType&&(l.patternType=h.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":l.bgColor||(l.bgColor={}),h.indexed&&(l.bgColor.indexed=parseInt(h.indexed,10)),h.theme&&(l.bgColor.theme=parseInt(h.theme,10)),h.tint&&(l.bgColor.tint=parseFloat(h.tint)),h.rgb&&(l.bgColor.rgb=h.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":l.fgColor||(l.fgColor={}),h.theme&&(l.fgColor.theme=parseInt(h.theme,10)),h.tint&&(l.fgColor.tint=parseFloat(h.tint)),h.rgb!=null&&(l.fgColor.rgb=h.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(i&&i.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fills")}})}function E7(t,a,r,i){a.Fonts=[];var l={},d=!1;(t[0].match(fs)||[]).forEach(function(f){var h=Gt(f);switch(si(h[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":a.Fonts.push(l),l={};break;case"<name":h.val&&(l.name=zr(h.val));break;case"<name/>":case"</name>":break;case"<b":l.bold=h.val?Yr(h.val):1;break;case"<b/>":l.bold=1;break;case"<i":l.italic=h.val?Yr(h.val):1;break;case"<i/>":l.italic=1;break;case"<u":switch(h.val){case"none":l.underline=0;break;case"single":l.underline=1;break;case"double":l.underline=2;break;case"singleAccounting":l.underline=33;break;case"doubleAccounting":l.underline=34;break}break;case"<u/>":l.underline=1;break;case"<strike":l.strike=h.val?Yr(h.val):1;break;case"<strike/>":l.strike=1;break;case"<outline":l.outline=h.val?Yr(h.val):1;break;case"<outline/>":l.outline=1;break;case"<shadow":l.shadow=h.val?Yr(h.val):1;break;case"<shadow/>":l.shadow=1;break;case"<condense":l.condense=h.val?Yr(h.val):1;break;case"<condense/>":l.condense=1;break;case"<extend":l.extend=h.val?Yr(h.val):1;break;case"<extend/>":l.extend=1;break;case"<sz":h.val&&(l.sz=+h.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":h.val&&(l.vertAlign=h.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":h.val&&(l.family=parseInt(h.val,10));break;case"<family/>":case"</family>":break;case"<scheme":h.val&&(l.scheme=h.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(h.val=="1")break;h.codepage=eg[parseInt(h.val,10)];break;case"<color":if(l.color||(l.color={}),h.auto&&(l.color.auto=Yr(h.auto)),h.rgb)l.color.rgb=h.rgb.slice(-6);else if(h.indexed){l.color.index=parseInt(h.indexed,10);var b=so[l.color.index];l.color.index==81&&(b=so[1]),b||(b=so[1]),l.color.rgb=b[0].toString(16)+b[1].toString(16)+b[2].toString(16)}else h.theme&&(l.color.theme=parseInt(h.theme,10),h.tint&&(l.color.tint=parseFloat(h.tint)),h.theme&&r.themeElements&&r.themeElements.clrScheme&&(l.color.rgb=af(r.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":d=!0;break;case"</AlternateContent>":d=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":d=!0;break;case"</ext>":d=!1;break;default:if(i&&i.WTF&&!d)throw new Error("unrecognized "+h[0]+" in fonts")}})}function C7(t,a,r){a.NumberFmt=[];for(var i=ti(tr),l=0;l<i.length;++l)a.NumberFmt[i[l]]=tr[i[l]];var d=t[0].match(fs);if(d)for(l=0;l<d.length;++l){var f=Gt(d[l]);switch(si(f[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var h=br(zr(f.formatCode)),b=parseInt(f.numFmtId,10);if(a.NumberFmt[b]=h,b>0){if(b>392){for(b=392;b>60&&a.NumberFmt[b]!=null;--b);a.NumberFmt[b]=h}ao(h,b)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+f[0]+" in numFmts")}}}var Tu=["numFmtId","fillId","fontId","borderId","xfId"],Ru=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function _7(t,a,r){a.CellXf=[];var i,l=!1;(t[0].match(fs)||[]).forEach(function(d){var f=Gt(d),h=0;switch(si(f[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(i=f,delete i[0],h=0;h<Tu.length;++h)i[Tu[h]]&&(i[Tu[h]]=parseInt(i[Tu[h]],10));for(h=0;h<Ru.length;++h)i[Ru[h]]&&(i[Ru[h]]=Yr(i[Ru[h]]));if(a.NumberFmt&&i.numFmtId>392){for(h=392;h>60;--h)if(a.NumberFmt[i.numFmtId]==a.NumberFmt[h]){i.numFmtId=h;break}}a.CellXf.push(i);break;case"</xf>":break;case"<alignment":case"<alignment/>":var b={};f.vertical&&(b.vertical=f.vertical),f.horizontal&&(b.horizontal=f.horizontal),f.textRotation!=null&&(b.textRotation=f.textRotation),f.indent&&(b.indent=f.indent),f.wrapText&&(b.wrapText=Yr(f.wrapText)),i.alignment=b;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(r&&r.WTF&&!l)throw new Error("unrecognized "+f[0]+" in cellXfs")}})}var A7=function(){var a=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,l=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,d=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(h,b,p){var w={};if(!h)return w;h=h.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var j;return(j=h.match(a))&&C7(j,w,p),(j=h.match(l))&&E7(j,w,b,p),(j=h.match(i))&&j7(j,w,b,p),(j=h.match(d))&&k7(j,w,b,p),(j=h.match(r))&&_7(j,w,p),w}}();function S7(t,a){var r=t.read_shift(2),i=ds(t);return[r,i]}function T7(t,a,r){var i={};i.sz=t.read_shift(2)/20;var l=zS(t);l.fItalic&&(i.italic=1),l.fCondense&&(i.condense=1),l.fExtend&&(i.extend=1),l.fShadow&&(i.shadow=1),l.fOutline&&(i.outline=1),l.fStrikeout&&(i.strike=1);var d=t.read_shift(2);switch(d===700&&(i.bold=1),t.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var f=t.read_shift(1);f!=0&&(i.underline=f);var h=t.read_shift(1);h>0&&(i.family=h);var b=t.read_shift(1);switch(b>0&&(i.charset=b),t.l++,i.color=PS(t),t.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=ds(t),i}var R7=us;function D7(t,a){var r=t.l+a,i=t.read_shift(2),l=t.read_shift(2);return t.l=r,{ixfe:i,numFmtId:l}}var O7=us;function I7(t,a,r){var i={};i.NumberFmt=[];for(var l in tr)i.NumberFmt[l]=tr[l];i.CellXf=[],i.Fonts=[];var d=[],f=!1;return Mi(t,function(b,p,w){switch(w){case 44:i.NumberFmt[b[0]]=b[1],ao(b[1],b[0]);break;case 43:i.Fonts.push(b),b.color.theme!=null&&a&&a.themeElements&&a.themeElements.clrScheme&&(b.color.rgb=af(a.themeElements.clrScheme[b.color.theme].rgb,b.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:d[d.length-1]==617&&i.CellXf.push(b);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:d.push(w),f=!0;break;case 38:d.pop(),f=!1;break;default:if(p.T>0)d.push(w);else if(p.T<0)d.pop();else if(!f||r.WTF&&d[d.length-1]!=37)throw new Error("Unexpected record 0x"+w.toString(16))}}),i}var F7=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function M7(t,a,r){a.themeElements.clrScheme=[];var i={};(t[0].match(fs)||[]).forEach(function(l){var d=Gt(l);switch(d[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=d.val;break;case"<a:sysClr":i.rgb=d.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":d[0].charAt(1)==="/"?(a.themeElements.clrScheme[F7.indexOf(d[0])]=i,i={}):i.name=d[0].slice(3,d[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+d[0]+" in clrScheme")}})}function B7(){}function L7(){}var P7=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,z7=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,U7=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function H7(t,a,r){a.themeElements={};var i;[["clrScheme",P7,M7],["fontScheme",z7,B7],["fmtScheme",U7,L7]].forEach(function(l){if(!(i=t.match(l[1])))throw new Error(l[0]+" not found in themeElements");l[2](i,a,r)})}var V7=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function w4(t,a){(!t||t.length===0)&&(t=G7());var r,i={};if(!(r=t.match(V7)))throw new Error("themeElements not found in theme");return H7(r[0],i,a),i.raw=t,i}function G7(t,a){var r=[Dw];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function X7(t,a,r){var i=t.l+a,l=t.read_shift(4);if(l!==124226){if(!r.cellStyles){t.l=i;return}var d=t.slice(t.l);t.l=i;var f;try{f=Rw(d,{type:"array"})}catch{return}var h=qs(f,"theme/theme/theme1.xml",!0);if(h)return w4(h,r)}}function q7(t){return t.read_shift(4)}function $7(t){var a={};switch(a.xclrType=t.read_shift(2),a.nTintShade=t.read_shift(2),a.xclrType){case 0:t.l+=4;break;case 1:a.xclrValue=Y7(t,4);break;case 2:a.xclrValue=l4(t);break;case 3:a.xclrValue=q7(t);break;case 4:t.l+=4;break}return t.l+=8,a}function Y7(t,a){return us(t,a)}function W7(t,a){return us(t,a)}function K7(t){var a=t.read_shift(2),r=t.read_shift(2)-4,i=[a];switch(a){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=$7(t);break;case 6:i[1]=W7(t,r);break;case 14:case 15:i[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+a+" "+r)}return i}function Z7(t,a){var r=t.l+a;t.l+=2;var i=t.read_shift(2);t.l+=2;for(var l=t.read_shift(2),d=[];l-- >0;)d.push(K7(t,r-t.l));return{ixfe:i,ext:d}}function Q7(t,a){a.forEach(function(r){r[0]})}function J7(t,a){return{flags:t.read_shift(4),version:t.read_shift(4),name:ds(t)}}function e9(t){for(var a=[],r=t.read_shift(4);r-- >0;)a.push([t.read_shift(4),t.read_shift(4)]);return a}function t9(t){return t.l+=4,t.read_shift(4)!=0}function r9(t,a,r){var i={Types:[],Cell:[],Value:[]},l=r||{},d=[],f=!1,h=2;return Mi(t,function(b,p,w){switch(w){case 335:i.Types.push({name:b.name});break;case 51:b.forEach(function(j){h==1?i.Cell.push({type:i.Types[j[0]-1].name,index:j[1]}):h==0&&i.Value.push({type:i.Types[j[0]-1].name,index:j[1]})});break;case 337:h=b?1:0;break;case 338:h=2;break;case 35:d.push(w),f=!0;break;case 36:d.pop(),f=!1;break;default:if(!p.T){if(!f||l.WTF&&d[d.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}}),i}function a9(t,a,r){var i={Types:[],Cell:[],Value:[]};if(!t)return i;var l=!1,d=2,f;return t.replace(fs,function(h){var b=Gt(h);switch(si(b[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":i.Types.push({name:b.name});break;case"</metadataType>":break;case"<futureMetadata":for(var p=0;p<i.Types.length;++p)i.Types[p].name==b.name&&(f=i.Types[p]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":d==1?i.Cell.push({type:i.Types[b.t-1].name,index:+b.v}):d==0&&i.Value.push({type:i.Types[b.t-1].name,index:+b.v});break;case"</rc>":break;case"<cellMetadata":d=1;break;case"</cellMetadata>":d=2;break;case"<valueMetadata":d=0;break;case"</valueMetadata>":d=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;case"<rvb":if(!f)break;f.offsets||(f.offsets=[]),f.offsets.push(+b.i);break;default:if(!l&&r.WTF)throw new Error("unrecognized "+b[0]+" in metadata")}return h}),i}function s9(t){var a=[];if(!t)return a;var r=1;return(t.match(fs)||[]).forEach(function(i){var l=Gt(i);switch(l[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete l[0],l.i?r=l.i:l.i=r,a.push(l);break}}),a}function n9(t){var a={};a.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),a.r=Zt(r);var i=t.read_shift(1);return i&2&&(a.l="1"),i&8&&(a.a="1"),a}function i9(t,a,r){var i=[];return Mi(t,function(d,f,h){switch(h){case 63:i.push(d);break;default:if(!f.T)throw new Error("Unexpected record 0x"+h.toString(16))}}),i}function l9(t,a,r,i){if(!t)return t;var l=i||{},d=!1;Mi(t,function(h,b,p){switch(p){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:d=!0;break;case 36:d=!1;break;default:if(!b.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+p.toString(16))}}},l)}function o9(t,a){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return a["!id"][r].Target}function A2(t,a,r,i){var l=Array.isArray(t),d;a.forEach(function(f){var h=vs(f.ref);if(l?(t[h.r]||(t[h.r]=[]),d=t[h.r][h.c]):d=t[f.ref],!d){d={t:"z"},l?t[h.r][h.c]=d:t[f.ref]=d;var b=ia(t["!ref"]||"BDWGO1000001:A1");b.s.r>h.r&&(b.s.r=h.r),b.e.r<h.r&&(b.e.r=h.r),b.s.c>h.c&&(b.s.c=h.c),b.e.c<h.c&&(b.e.c=h.c);var p=pr(b);p!==t["!ref"]&&(t["!ref"]=p)}d.c||(d.c=[]);var w={a:f.author,t:f.t,r:f.r,T:r};f.h&&(w.h=f.h);for(var j=d.c.length-1;j>=0;--j){if(!r&&d.c[j].T)return;r&&!d.c[j].T&&d.c.splice(j,1)}if(r&&i){for(j=0;j<i.length;++j)if(w.a==i[j].id){w.a=i[j].name||w.a;break}}d.c.push(w)})}function c9(t,a){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],i=[],l=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);l&&l[1]&&l[1].split(/<\/\w*:?author>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?author[^>]*>(.*)/);h&&r.push(h[1])}});var d=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return d&&d[1]&&d[1].split(/<\/\w*:?comment>/).forEach(function(f){if(!(f===""||f.trim()==="")){var h=f.match(/<(?:\w+:)?comment[^>]*>/);if(h){var b=Gt(h[0]),p={author:b.authorId&&r[b.authorId]||"sheetjsghost",ref:b.ref,guid:b.guid},w=vs(b.ref);if(!(a.sheetRows&&a.sheetRows<=w.r)){var j=f.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),C=!!j&&!!j[1]&&pg(j[1])||{r:"",t:"",h:""};p.r=C.r,C.r=="<t></t>"&&(C.t=C.h=""),p.t=(C.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),a.cellHTML&&(p.h=C.h),i.push(p)}}}}),i}function d9(t,a){var r=[],i=!1,l={},d=0;return t.replace(fs,function(h,b){var p=Gt(h);switch(si(p[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":l={author:p.personId,guid:p.id,ref:p.ref,T:1};break;case"</threadedComment>":l.t!=null&&r.push(l);break;case"<text>":case"<text":d=b+h.length;break;case"</text>":l.t=t.slice(d,b).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":i=!0;break;case"</mentions>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&a.WTF)throw new Error("unrecognized "+p[0]+" in threaded comments")}return h}),r}function u9(t,a){var r=[],i=!1;return t.replace(fs,function(d){var f=Gt(d);switch(si(f[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:f.displayname,id:f.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&a.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return d}),r}function f9(t){var a={};a.iauthor=t.read_shift(4);var r=vo(t);return a.rfx=r.s,a.ref=Zt(r.s),t.l+=16,a}var x9=ds;function h9(t,a){var r=[],i=[],l={},d=!1;return Mi(t,function(h,b,p){switch(p){case 632:i.push(h);break;case 635:l=h;break;case 637:l.t=h.t,l.h=h.h,l.r=h.r;break;case 636:if(l.author=i[l.iauthor],delete l.iauthor,a.sheetRows&&l.rfx&&a.sheetRows<=l.rfx.r)break;l.t||(l.t=""),delete l.rfx,r.push(l);break;case 3072:break;case 35:d=!0;break;case 36:d=!1;break;case 37:break;case 38:break;default:if(!b.T){if(!d||a.WTF)throw new Error("Unexpected record 0x"+p.toString(16))}}}),r}var m9="application/vnd.ms-office.vbaProject";function g9(t){var a=gr.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,i){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var l=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");gr.utils.cfb_add(a,l,t.FileIndex[i].content)}}),gr.write(a)}function p9(){return{"!type":"dialog"}}function y9(){return{"!type":"dialog"}}function b9(){return{"!type":"macro"}}function v9(){return{"!type":"macro"}}var xc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,a={r:0,c:0};function r(i,l,d,f){var h=!1,b=!1;d.length==0?b=!0:d.charAt(0)=="["&&(b=!0,d=d.slice(1,-1)),f.length==0?h=!0:f.charAt(0)=="["&&(h=!0,f=f.slice(1,-1));var p=d.length>0?parseInt(d,10)|0:0,w=f.length>0?parseInt(f,10)|0:0;return h?w+=a.c:--w,b?p+=a.r:--p,l+(h?"":"$")+Oa(w)+(b?"":"$")+Ya(p)}return function(l,d){return a=d,l.replace(t,r)}}(),N4=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,w9=function(){return function(a,r){return a.replace(N4,function(i,l,d,f,h,b){var p=ug(f)-(d?0:r.c),w=dg(b)-(h?0:r.r),j=w==0?"":h?w+1:"["+w+"]",C=p==0?"":d?p+1:"["+p+"]";return l+"R"+j+"C"+C})}}();function k4(t,a){return t.replace(N4,function(r,i,l,d,f,h){return i+(l=="$"?l+d:Oa(ug(d)+a.c))+(f=="$"?f+h:Ya(dg(h)+a.r))})}function N9(t,a,r){var i=_c(a),l=i.s,d=vs(r),f={r:d.r-l.r,c:d.c-l.c};return k4(t,f)}function k9(t){return t.length!=1}function S2(t){return t.replace(/_xlfn\./g,"")}function ba(t){t.l+=1}function El(t,a){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function j4(t,a,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return E4(t);r.biff==12&&(i=4)}var l=t.read_shift(i),d=t.read_shift(i),f=El(t),h=El(t);return{s:{r:l,c:f[0],cRel:f[1],rRel:f[2]},e:{r:d,c:h[0],cRel:h[1],rRel:h[2]}}}function E4(t){var a=El(t),r=El(t),i=t.read_shift(1),l=t.read_shift(1);return{s:{r:a[0],c:i,cRel:a[1],rRel:a[2]},e:{r:r[0],c:l,cRel:r[1],rRel:r[2]}}}function j9(t,a,r){if(r.biff<8)return E4(t);var i=t.read_shift(r.biff==12?4:2),l=t.read_shift(r.biff==12?4:2),d=El(t),f=El(t);return{s:{r:i,c:d[0],cRel:d[1],rRel:d[2]},e:{r:l,c:f[0],cRel:f[1],rRel:f[2]}}}function C4(t,a,r){if(r&&r.biff>=2&&r.biff<=5)return E9(t);var i=t.read_shift(r&&r.biff==12?4:2),l=El(t);return{r:i,c:l[0],cRel:l[1],rRel:l[2]}}function E9(t){var a=El(t),r=t.read_shift(1);return{r:a[0],c:r,cRel:a[1],rRel:a[2]}}function C9(t){var a=t.read_shift(2),r=t.read_shift(2);return{r:a,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function _9(t,a,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return A9(t);var l=t.read_shift(i>=12?4:2),d=t.read_shift(2),f=(d&16384)>>14,h=(d&32768)>>15;if(d&=16383,h==1)for(;l>524287;)l-=1048576;if(f==1)for(;d>8191;)d=d-16384;return{r:l,c:d,cRel:f,rRel:h}}function A9(t){var a=t.read_shift(2),r=t.read_shift(1),i=(a&32768)>>15,l=(a&16384)>>14;return a&=16383,i==1&&a>=8192&&(a=a-16384),l==1&&r>=128&&(r=r-256),{r:a,c:r,cRel:l,rRel:i}}function S9(t,a,r){var i=(t[t.l++]&96)>>5,l=j4(t,r.biff>=2&&r.biff<=5?6:8,r);return[i,l]}function T9(t,a,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2,"i"),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}var f=j4(t,d,r);return[i,l,f]}function R9(t,a,r){var i=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function D9(t,a,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),d=8;if(r)switch(r.biff){case 5:t.l+=12,d=6;break;case 12:d=12;break}return t.l+=d,[i,l]}function O9(t,a,r){var i=(t[t.l++]&96)>>5,l=j9(t,a-1,r);return[i,l]}function I9(t,a,r){var i=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[i]}function T2(t){var a=t[t.l+1]&1,r=1;return t.l+=4,[a,r]}function F9(t,a,r){t.l+=2;for(var i=t.read_shift(r&&r.biff==2?1:2),l=[],d=0;d<=i;++d)l.push(t.read_shift(r&&r.biff==2?1:2));return l}function M9(t,a,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function B9(t,a,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function L9(t){var a=t[t.l+1]&255?1:0;return t.l+=2,[a,t.read_shift(2)]}function P9(t,a,r){var i=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[i]}function _4(t){var a=t.read_shift(1),r=t.read_shift(1);return[a,r]}function z9(t){return t.read_shift(2),_4(t)}function U9(t){return t.read_shift(2),_4(t)}function H9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=C4(t,0,r);return[i,l]}function V9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=_9(t,0,r);return[i,l]}function G9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var d=C4(t,0,r);return[i,l,d]}function X9(t,a,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(r&&r.biff<=3?1:2);return[qR[l],T4[l],i]}function q9(t,a,r){var i=t[t.l++],l=t.read_shift(1),d=r&&r.biff<=3?[i==88?-1:0,t.read_shift(1)]:$9(t);return[l,(d[0]===0?T4:XR)[d[1]]]}function $9(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function Y9(t,a,r){t.l+=r&&r.biff==2?3:4}function W9(t,a,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var i=t.read_shift(2),l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function K9(t){return t.l++,wo[t.read_shift(1)]}function Z9(t){return t.l++,t.read_shift(2)}function Q9(t){return t.l++,t.read_shift(1)!==0}function J9(t){return t.l++,ls(t)}function eR(t,a,r){return t.l++,dd(t,a-1,r)}function tR(t,a){var r=[t.read_shift(1)];if(a==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=xa(t,1)?"TRUE":"FALSE",a!=12&&(t.l+=7);break;case 37:case 16:r[1]=wo[t[t.l]],t.l+=a==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=ls(t);break;case 2:r[1]=No(t,0,{biff:a>0&&a<8?2:a});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function rR(t,a,r){for(var i=t.read_shift(r.biff==12?4:2),l=[],d=0;d!=i;++d)l.push((r.biff==12?vo:kf)(t));return l}function aR(t,a,r){var i=0,l=0;r.biff==12?(i=t.read_shift(4),l=t.read_shift(4)):(l=1+t.read_shift(1),i=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--l==0&&(l=256));for(var d=0,f=[];d!=i&&(f[d]=[]);++d)for(var h=0;h!=l;++h)f[d][h]=tR(t,r.biff);return f}function sR(t,a,r){var i=t.read_shift(1)>>>5&3,l=!r||r.biff>=8?4:2,d=t.read_shift(l);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[i,0,d]}function nR(t,a,r){if(r.biff==5)return iR(t);var i=t.read_shift(1)>>>5&3,l=t.read_shift(2),d=t.read_shift(4);return[i,l,d]}function iR(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var i=t.read_shift(2);return t.l+=12,[a,r,i]}function lR(t,a,r){var i=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function oR(t,a,r){var i=t.read_shift(1)>>>5&3,l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function cR(t,a,r){var i=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[i]}function dR(t,a,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),d=4;if(r)switch(r.biff){case 5:d=15;break;case 12:d=6;break}return t.l+=d,[i,l]}var uR=us,fR=us,xR=us;function fd(t,a,r){return t.l+=2,[C9(t)]}function bg(t){return t.l+=6,[]}var hR=fd,mR=bg,gR=bg,pR=fd;function A4(t){return t.l+=2,[wa(t),t.read_shift(2)&1]}var yR=fd,bR=A4,vR=bg,wR=fd,NR=fd,kR=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function jR(t){t.l+=2;var a=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l=t.read_shift(2),d=t.read_shift(2),f=kR[r>>2&31];return{ixti:a,coltype:r&3,rt:f,idx:i,c:l,C:d}}function ER(t){return t.l+=2,[t.read_shift(4)]}function CR(t,a,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function _R(t,a,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function AR(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function SR(t){var a=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[a,r]}function TR(t){return t.l+=4,[0,0]}var R2={1:{n:"PtgExp",f:W9},2:{n:"PtgTbl",f:xR},3:{n:"PtgAdd",f:ba},4:{n:"PtgSub",f:ba},5:{n:"PtgMul",f:ba},6:{n:"PtgDiv",f:ba},7:{n:"PtgPower",f:ba},8:{n:"PtgConcat",f:ba},9:{n:"PtgLt",f:ba},10:{n:"PtgLe",f:ba},11:{n:"PtgEq",f:ba},12:{n:"PtgGe",f:ba},13:{n:"PtgGt",f:ba},14:{n:"PtgNe",f:ba},15:{n:"PtgIsect",f:ba},16:{n:"PtgUnion",f:ba},17:{n:"PtgRange",f:ba},18:{n:"PtgUplus",f:ba},19:{n:"PtgUminus",f:ba},20:{n:"PtgPercent",f:ba},21:{n:"PtgParen",f:ba},22:{n:"PtgMissArg",f:ba},23:{n:"PtgStr",f:eR},26:{n:"PtgSheet",f:CR},27:{n:"PtgEndSheet",f:_R},28:{n:"PtgErr",f:K9},29:{n:"PtgBool",f:Q9},30:{n:"PtgInt",f:Z9},31:{n:"PtgNum",f:J9},32:{n:"PtgArray",f:I9},33:{n:"PtgFunc",f:X9},34:{n:"PtgFuncVar",f:q9},35:{n:"PtgName",f:sR},36:{n:"PtgRef",f:H9},37:{n:"PtgArea",f:S9},38:{n:"PtgMemArea",f:lR},39:{n:"PtgMemErr",f:uR},40:{n:"PtgMemNoMem",f:fR},41:{n:"PtgMemFunc",f:oR},42:{n:"PtgRefErr",f:cR},43:{n:"PtgAreaErr",f:R9},44:{n:"PtgRefN",f:V9},45:{n:"PtgAreaN",f:O9},46:{n:"PtgMemAreaN",f:AR},47:{n:"PtgMemNoMemN",f:SR},57:{n:"PtgNameX",f:nR},58:{n:"PtgRef3d",f:G9},59:{n:"PtgArea3d",f:T9},60:{n:"PtgRefErr3d",f:dR},61:{n:"PtgAreaErr3d",f:D9},255:{}},RR={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},DR={1:{n:"PtgElfLel",f:A4},2:{n:"PtgElfRw",f:wR},3:{n:"PtgElfCol",f:hR},6:{n:"PtgElfRwV",f:NR},7:{n:"PtgElfColV",f:pR},10:{n:"PtgElfRadical",f:yR},11:{n:"PtgElfRadicalS",f:vR},13:{n:"PtgElfColS",f:mR},15:{n:"PtgElfColSV",f:gR},16:{n:"PtgElfRadicalLel",f:bR},25:{n:"PtgList",f:jR},29:{n:"PtgSxName",f:ER},255:{}},OR={0:{n:"PtgAttrNoop",f:TR},1:{n:"PtgAttrSemi",f:P9},2:{n:"PtgAttrIf",f:B9},4:{n:"PtgAttrChoose",f:F9},8:{n:"PtgAttrGoto",f:M9},16:{n:"PtgAttrSum",f:Y9},32:{n:"PtgAttrBaxcel",f:T2},33:{n:"PtgAttrBaxcel",f:T2},64:{n:"PtgAttrSpace",f:z9},65:{n:"PtgAttrSpaceSemi",f:U9},128:{n:"PtgAttrIfError",f:L9},255:{}};function xd(t,a,r,i){if(i.biff<8)return us(t,a);for(var l=t.l+a,d=[],f=0;f!==r.length;++f)switch(r[f][0]){case"PtgArray":r[f][1]=aR(t,0,i),d.push(r[f][1]);break;case"PtgMemArea":r[f][2]=rR(t,r[f][1],i),d.push(r[f][2]);break;case"PtgExp":i&&i.biff==12&&(r[f][1][1]=t.read_shift(4),d.push(r[f][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[f][0]}return a=l-t.l,a!==0&&d.push(us(t,a)),d}function hd(t,a,r){for(var i=t.l+a,l,d,f=[];i!=t.l;)a=i-t.l,d=t[t.l],l=R2[d]||R2[RR[d]],(d===24||d===25)&&(l=(d===24?DR:OR)[t[t.l+1]]),!l||!l.f?us(t,a):f.push([l.n,l.f(t,a,r)]);return f}function IR(t){for(var a=[],r=0;r<t.length;++r){for(var i=t[r],l=[],d=0;d<i.length;++d){var f=i[d];if(f)switch(f[0]){case 2:l.push('"'+f[1].replace(/"/g,'""')+'"');break;default:l.push(f[1])}else l.push("")}a.push(l.join(","))}return a.join(";")}var FR={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function MR(t,a){if(!t&&!(a&&a.biff<=5&&a.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function S4(t,a,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[a]))return t.SheetNames[a];if(!t.XTI)return"SH33TJSERR6";var i=t.XTI[a];if(r.biff<8)return a>1e4&&(a-=65536),a<0&&(a=-a),a==0?"":t.XTI[a-1];if(!i)return"SH33TJSERR1";var l="";if(r.biff>8)switch(t[i[0]][0]){case 357:return l=i[1]==-1?"#REF":t.SheetNames[i[1]],i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[i[0]][0];case 355:default:return"SH33TJSSRC"+t[i[0]][0]}switch(t[i[0]][0][0]){case 1025:return l=i[1]==-1?"#REF":t.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 14849:return t[i[0]].slice(1).map(function(d){return d.Name}).join(";;");default:return t[i[0]][0][3]?(l=i[1]==-1?"#REF":t[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?l:l+":"+t[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function D2(t,a,r){var i=S4(t,a,r);return i=="#REF"?i:MR(i,r)}function ns(t,a,r,i,l){var d=l&&l.biff||8,f={s:{c:0,r:0}},h=[],b,p,w,j=0,C=0,_,R="";if(!t[0]||!t[0][0])return"";for(var A=-1,O="",I=0,M=t[0].length;I<M;++I){var T=t[0][I];switch(T[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(b=h.pop(),p=h.pop(),A>=0){switch(t[0][A][1][0]){case 0:O=sa(" ",t[0][A][1][1]);break;case 1:O=sa("\r",t[0][A][1][1]);break;default:if(O="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}p=p+O,A=-1}h.push(p+FR[T[0]]+b);break;case"PtgIsect":b=h.pop(),p=h.pop(),h.push(p+" "+b);break;case"PtgUnion":b=h.pop(),p=h.pop(),h.push(p+","+b);break;case"PtgRange":b=h.pop(),p=h.pop(),h.push(p+":"+b);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":w=S0(T[1][1],f,l),h.push(T0(w,d));break;case"PtgRefN":w=r?S0(T[1][1],r,l):T[1][1],h.push(T0(w,d));break;case"PtgRef3d":j=T[1][1],w=S0(T[1][2],f,l),R=D2(i,j,l),h.push(R+"!"+T0(w,d));break;case"PtgFunc":case"PtgFuncVar":var B=T[1][0],H=T[1][1];B||(B=0),B&=127;var U=B==0?[]:h.slice(-B);h.length-=B,H==="User"&&(H=U.shift()),h.push(H+"("+U.join(",")+")");break;case"PtgBool":h.push(T[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(T[1]);break;case"PtgNum":h.push(String(T[1]));break;case"PtgStr":h.push('"'+T[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(T[1]);break;case"PtgAreaN":_=f2(T[1][1],r?{s:r}:f,l),h.push(am(_,l));break;case"PtgArea":_=f2(T[1][1],f,l),h.push(am(_,l));break;case"PtgArea3d":j=T[1][1],_=T[1][2],R=D2(i,j,l),h.push(R+"!"+am(_,l));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":C=T[1][2];var L=(i.names||[])[C-1]||(i[0]||[])[C],P=L?L.Name:"SH33TJSNAME"+String(C);P&&P.slice(0,6)=="_xlfn."&&!l.xlfn&&(P=P.slice(6)),h.push(P);break;case"PtgNameX":var z=T[1][1];C=T[1][2];var K;if(l.biff<=5)z<0&&(z=-z),i[z]&&(K=i[z][C]);else{var te="";if(((i[z]||[])[0]||[])[0]==14849||(((i[z]||[])[0]||[])[0]==1025?i[z][C]&&i[z][C].itab>0&&(te=i.SheetNames[i[z][C].itab-1]+"!"):te=i.SheetNames[C-1]+"!"),i[z]&&i[z][C])te+=i[z][C].Name;else if(i[0]&&i[0][C])te+=i[0][C].Name;else{var V=(S4(i,z,l)||"").split(";;");V[C-1]?te=V[C-1]:te+="SH33TJSERRX"}h.push(te);break}K||(K={Name:"SH33TJSERRY"}),h.push(K.Name);break;case"PtgParen":var ne="(",ie=")";if(A>=0){switch(O="",t[0][A][1][0]){case 2:ne=sa(" ",t[0][A][1][1])+ne;break;case 3:ne=sa("\r",t[0][A][1][1])+ne;break;case 4:ie=sa(" ",t[0][A][1][1])+ie;break;case 5:ie=sa("\r",t[0][A][1][1])+ie;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][A][1][0])}A=-1}h.push(ne+h.pop()+ie);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":w={c:T[1][1],r:T[1][0]};var X={c:r.c,r:r.r};if(i.sharedf[Zt(w)]){var q=i.sharedf[Zt(w)];h.push(ns(q,f,X,i,l))}else{var ce=!1;for(b=0;b!=i.arrayf.length;++b)if(p=i.arrayf[b],!(w.c<p[0].s.c||w.c>p[0].e.c)&&!(w.r<p[0].s.r||w.r>p[0].e.r)){h.push(ns(p[1],f,X,i,l)),ce=!0;break}ce||h.push(T[1])}break;case"PtgArray":h.push("{"+IR(T[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":A=I;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+T[1].idx+"[#"+T[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(T));default:throw new Error("Unrecognized Formula Token: "+String(T))}var we=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&A>=0&&we.indexOf(t[0][I][0])==-1){T=t[0][A];var oe=!0;switch(T[1][0]){case 4:oe=!1;case 0:O=sa(" ",T[1][1]);break;case 5:oe=!1;case 1:O=sa("\r",T[1][1]);break;default:if(O="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+T[1][0])}h.push((oe?O:"")+h.pop()+(oe?"":O)),A=-1}}if(h.length>1&&l.WTF)throw new Error("bad formula stack");return h[0]}function BR(t,a,r){var i=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],us(t,a-2)];var h=hd(t,f,r);return a!==f+l&&(d=xd(t,a-f-l,h,r)),t.l=i,[h,d]}function LR(t,a,r){var i=t.l+a,l=r.biff==2?1:2,d,f=t.read_shift(l);if(f==65535)return[[],us(t,a-2)];var h=hd(t,f,r);return a!==f+l&&(d=xd(t,a-f-l,h,r)),t.l=i,[h,d]}function PR(t,a,r,i){var l=t.l+a,d=hd(t,i,r),f;return l!==t.l&&(f=xd(t,l-t.l,d,r)),[d,f]}function zR(t,a,r){var i=t.l+a,l,d=t.read_shift(2),f=hd(t,d,r);return d==65535?[[],us(t,a-2)]:(a!==d+2&&(l=xd(t,i-d-2,f,r)),[f,l])}function UR(t){var a;if(Ci(t,t.l+6)!==65535)return[ls(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return a=t[t.l+2]===1,t.l+=8,[a,"b"];case 2:return a=t[t.l+2],t.l+=8,[a,"e"];case 3:return t.l+=8,["","s"]}return[]}function im(t,a,r){var i=t.l+a,l=ni(t);r.biff==2&&++t.l;var d=UR(t),f=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var h=LR(t,i-t.l,r);return{cell:l,val:d[0],formula:h,shared:f>>3&1,tt:d[1]}}function jf(t,a,r){var i=t.read_shift(4),l=hd(t,i,r),d=t.read_shift(4),f=d>0?xd(t,d,l,r):null;return[l,f]}var HR=jf,Ef=jf,VR=jf,GR=jf,XR={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},T4={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},qR={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function O2(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(a,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function lm(t){var a=t.split(":"),r=a[0].split(".")[0];return[r,a[0].split(".")[1]+(a.length>1?":"+(a[1].split(".")[1]||a[1].split(".")[0]):"")]}var I0={},hc={};function F0(t,a){if(t){var r=[.7,.7,.75,.75,.3,.3];a=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function R4(t,a,r,i,l,d){try{i.cellNF&&(t.z=tr[a])}catch(h){if(i.WTF)throw h}if(!(t.t==="z"&&!i.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Ua(t.v)),(!i||i.cellText!==!1)&&t.t!=="z")try{if(tr[a]==null&&ao($A[a]||"General",a),t.t==="e")t.w=t.w||wo[t.v];else if(a===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=G0(t.v);else if(t.t==="d"){var f=ks(t.v);(f|0)===f?t.w=f.toString(10):t.w=G0(f)}else{if(t.v===void 0)return"";t.w=fo(t.v,hc)}else t.t==="d"?t.w=un(a,ks(t.v),hc):t.w=un(a,t.v,hc)}catch(h){if(i.WTF)throw h}if(i.cellStyles&&r!=null)try{t.s=d.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=af(l.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),i.WTF&&(t.s.fgColor.raw_rgb=l.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=af(l.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),i.WTF&&(t.s.bgColor.raw_rgb=l.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(h){if(i.WTF&&d.Fills)throw h}}}function $R(t,a){var r=ia(a);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=pr(r))}var YR=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,WR=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,KR=/<(?:\w:)?hyperlink [^>]*>/mg,ZR=/"(\w*:\w*)"/,QR=/<(?:\w:)?col\b[^>]*[\/]?>/g,JR=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,eD=/<(?:\w:)?pageMargins[^>]*\/>/g,D4=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,tD=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,rD=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function aD(t,a,r,i,l,d,f){if(!t)return t;i||(i={"!id":{}});var h=a.dense?[]:{},b={s:{r:2e6,c:2e6},e:{r:0,c:0}},p="",w="",j=t.match(WR);j?(p=t.slice(0,j.index),w=t.slice(j.index+j[0].length)):p=w=t;var C=p.match(D4);C?vg(C[0],h,l,r):(C=p.match(tD))&&sD(C[0],C[1]||"",h,l,r);var _=(p.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(_>0){var R=p.slice(_,_+50).match(ZR);R&&$R(h,R[1])}var A=p.match(rD);A&&A[1]&&dD(A[1],l);var O=[];if(a.cellStyles){var I=p.match(QR);I&&lD(O,I)}j&&uD(j[1],h,a,b,d,f);var M=w.match(JR);M&&(h["!autofilter"]=oD(M[0]));var T=[],B=w.match(YR);if(B)for(_=0;_!=B.length;++_)T[_]=ia(B[_].slice(B[_].indexOf('"')+1));var H=w.match(KR);H&&nD(h,H,i);var U=w.match(eD);if(U&&(h["!margins"]=iD(Gt(U[0]))),!h["!ref"]&&b.e.c>=b.s.c&&b.e.r>=b.s.r&&(h["!ref"]=pr(b)),a.sheetRows>0&&h["!ref"]){var L=ia(h["!ref"]);a.sheetRows<=+L.e.r&&(L.e.r=a.sheetRows-1,L.e.r>b.e.r&&(L.e.r=b.e.r),L.e.r<L.s.r&&(L.s.r=L.e.r),L.e.c>b.e.c&&(L.e.c=b.e.c),L.e.c<L.s.c&&(L.s.c=L.e.c),h["!fullref"]=h["!ref"],h["!ref"]=pr(L))}return O.length>0&&(h["!cols"]=O),T.length>0&&(h["!merges"]=T),h}function vg(t,a,r,i){var l=Gt(t);r.Sheets[i]||(r.Sheets[i]={}),l.codeName&&(r.Sheets[i].CodeName=br(zr(l.codeName)))}function sD(t,a,r,i,l){vg(t.slice(0,t.indexOf(">")),r,i,l)}function nD(t,a,r){for(var i=Array.isArray(t),l=0;l!=a.length;++l){var d=Gt(zr(a[l]),!0);if(!d.ref)return;var f=((r||{})["!id"]||[])[d.id];f?(d.Target=f.Target,d.location&&(d.Target+="#"+br(d.location))):(d.Target="#"+br(d.location),f={Target:d.Target,TargetMode:"Internal"}),d.Rel=f,d.tooltip&&(d.Tooltip=d.tooltip,delete d.tooltip);for(var h=ia(d.ref),b=h.s.r;b<=h.e.r;++b)for(var p=h.s.c;p<=h.e.c;++p){var w=Zt({c:p,r:b});i?(t[b]||(t[b]=[]),t[b][p]||(t[b][p]={t:"z",v:void 0}),t[b][p].l=d):(t[w]||(t[w]={t:"z",v:void 0}),t[w].l=d)}}}function iD(t){var a={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(a[r]=parseFloat(t[r]))}),a}function lD(t,a){for(var r=!1,i=0;i!=a.length;++i){var l=Gt(a[i],!0);l.hidden&&(l.hidden=Yr(l.hidden));var d=parseInt(l.min,10)-1,f=parseInt(l.max,10)-1;for(l.outlineLevel&&(l.level=+l.outlineLevel||0),delete l.min,delete l.max,l.width=+l.width,!r&&l.width&&(r=!0,yg(l.width)),bc(l);d<=f;)t[d++]=$a(l)}}function oD(t){var a={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return a}var cD=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function dD(t,a){a.Views||(a.Views=[{}]),(t.match(cD)||[]).forEach(function(r,i){var l=Gt(r);a.Views[i]||(a.Views[i]={}),+l.zoomScale&&(a.Views[i].zoom=+l.zoomScale),Yr(l.rightToLeft)&&(a.Views[i].RTL=!0)})}var uD=function(){var t=/<(?:\w+:)?c[ \/>]/,a=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,l=/ref=["']([^"']*)["']/,d=X0("v"),f=X0("f");return function(b,p,w,j,C,_){for(var R=0,A="",O=[],I=[],M=0,T=0,B=0,H="",U,L,P=0,z=0,K,te,V=0,ne=0,ie=Array.isArray(_.CellXf),X,q=[],ce=[],we=Array.isArray(p),oe=[],fe={},re=!1,Q=!!w.sheetStubs,Y=b.split(a),ae=0,se=Y.length;ae!=se;++ae){A=Y[ae].trim();var Z=A.length;if(Z!==0){var Re=0;e:for(R=0;R<Z;++R)switch(A[R]){case">":if(A[R-1]!="/"){++R;break e}if(w&&w.cellStyles){if(L=Gt(A.slice(Re,R),!0),P=L.r!=null?parseInt(L.r,10):P+1,z=-1,w.sheetRows&&w.sheetRows<P)continue;fe={},re=!1,L.ht&&(re=!0,fe.hpt=parseFloat(L.ht),fe.hpx=W0(fe.hpt)),L.hidden=="1"&&(re=!0,fe.hidden=!0),L.outlineLevel!=null&&(re=!0,fe.level=+L.outlineLevel),re&&(oe[P-1]=fe)}break;case"<":Re=R;break}if(Re>=R)break;if(L=Gt(A.slice(Re,R),!0),P=L.r!=null?parseInt(L.r,10):P+1,z=-1,!(w.sheetRows&&w.sheetRows<P)){j.s.r>P-1&&(j.s.r=P-1),j.e.r<P-1&&(j.e.r=P-1),w&&w.cellStyles&&(fe={},re=!1,L.ht&&(re=!0,fe.hpt=parseFloat(L.ht),fe.hpx=W0(fe.hpt)),L.hidden=="1"&&(re=!0,fe.hidden=!0),L.outlineLevel!=null&&(re=!0,fe.level=+L.outlineLevel),re&&(oe[P-1]=fe)),O=A.slice(R).split(t);for(var je=0;je!=O.length&&O[je].trim().charAt(0)=="<";++je);for(O=O.slice(je),R=0;R!=O.length;++R)if(A=O[R].trim(),A.length!==0){if(I=A.match(r),M=R,T=0,B=0,A="<c "+(A.slice(0,1)=="<"?">":"")+A,I!=null&&I.length===2){for(M=0,H=I[1],T=0;T!=H.length&&!((B=H.charCodeAt(T)-64)<1||B>26);++T)M=26*M+B;--M,z=M}else++z;for(T=0;T!=A.length&&A.charCodeAt(T)!==62;++T);if(++T,L=Gt(A.slice(0,T),!0),L.r||(L.r=Zt({r:P-1,c:z})),H=A.slice(T),U={t:""},(I=H.match(d))!=null&&I[1]!==""&&(U.v=br(I[1])),w.cellFormula){if((I=H.match(f))!=null&&I[1]!==""){if(U.f=br(zr(I[1])).replace(/\r\n/g,`
`),w.xlfn||(U.f=S2(U.f)),I[0].indexOf('t="array"')>-1)U.F=(H.match(l)||[])[1],U.F.indexOf(":")>-1&&q.push([ia(U.F),U.F]);else if(I[0].indexOf('t="shared"')>-1){te=Gt(I[0]);var Ue=br(zr(I[1]));w.xlfn||(Ue=S2(Ue)),ce[parseInt(te.si,10)]=[te,Ue,L.r]}}else(I=H.match(/<f[^>]*\/>/))&&(te=Gt(I[0]),ce[te.si]&&(U.f=N9(ce[te.si][1],ce[te.si][2],L.r)));var Me=vs(L.r);for(T=0;T<q.length;++T)Me.r>=q[T][0].s.r&&Me.r<=q[T][0].e.r&&Me.c>=q[T][0].s.c&&Me.c<=q[T][0].e.c&&(U.F=q[T][1])}if(L.t==null&&U.v===void 0)if(U.f||U.F)U.v=0,U.t="n";else if(Q)U.t="z";else continue;else U.t=L.t||"n";switch(j.s.c>z&&(j.s.c=z),j.e.c<z&&(j.e.c=z),U.t){case"n":if(U.v==""||U.v==null){if(!Q)continue;U.t="z"}else U.v=parseFloat(U.v);break;case"s":if(typeof U.v>"u"){if(!Q)continue;U.t="z"}else K=I0[parseInt(U.v,10)],U.v=K.t,U.r=K.r,w.cellHTML&&(U.h=K.h);break;case"str":U.t="s",U.v=U.v!=null?zr(U.v):"",w.cellHTML&&(U.h=lg(U.v));break;case"inlineStr":I=H.match(i),U.t="s",I!=null&&(K=pg(I[1]))?(U.v=K.t,w.cellHTML&&(U.h=K.h)):U.v="";break;case"b":U.v=Yr(U.v);break;case"d":w.cellDates?U.v=Ua(U.v,1):(U.v=ks(Ua(U.v,1)),U.t="n");break;case"e":(!w||w.cellText!==!1)&&(U.w=U.v),U.v=Jw[U.v];break}if(V=ne=0,X=null,ie&&L.s!==void 0&&(X=_.CellXf[L.s],X!=null&&(X.numFmtId!=null&&(V=X.numFmtId),w.cellStyles&&X.fillId!=null&&(ne=X.fillId))),R4(U,V,ne,w,C,_),w.cellDates&&ie&&U.t=="n"&&Cc(tr[V])&&(U.t="d",U.v=Nf(U.v)),L.cm&&w.xlmeta){var at=(w.xlmeta.Cell||[])[+L.cm-1];at&&at.type=="XLDAPR"&&(U.D=!0)}if(we){var ye=vs(L.r);p[ye.r]||(p[ye.r]=[]),p[ye.r][ye.c]=U}else p[L.r]=U}}}}oe.length>0&&(p["!rows"]=oe)}}();function fD(t,a){var r={},i=t.l+a;r.r=t.read_shift(4),t.l+=4;var l=t.read_shift(2);t.l+=1;var d=t.read_shift(1);return t.l=i,d&7&&(r.level=d&7),d&16&&(r.hidden=!0),d&32&&(r.hpt=l/20),r}var xD=vo;function hD(){}function mD(t,a){var r={},i=t[t.l];return++t.l,r.above=!(i&64),r.left=!(i&128),t.l+=18,r.name=BS(t),r}function gD(t){var a=xn(t);return[a]}function pD(t){var a=bo(t);return[a]}function yD(t){var a=xn(t),r=t.read_shift(1);return[a,r,"b"]}function bD(t){var a=bo(t),r=t.read_shift(1);return[a,r,"b"]}function vD(t){var a=xn(t),r=t.read_shift(1);return[a,r,"e"]}function wD(t){var a=bo(t),r=t.read_shift(1);return[a,r,"e"]}function ND(t){var a=xn(t),r=t.read_shift(4);return[a,r,"s"]}function kD(t){var a=bo(t),r=t.read_shift(4);return[a,r,"s"]}function jD(t){var a=xn(t),r=ls(t);return[a,r,"n"]}function O4(t){var a=bo(t),r=ls(t);return[a,r,"n"]}function ED(t){var a=xn(t),r=hg(t);return[a,r,"n"]}function CD(t){var a=bo(t),r=hg(t);return[a,r,"n"]}function _D(t){var a=xn(t),r=fg(t);return[a,r,"is"]}function AD(t){var a=xn(t),r=ds(t);return[a,r,"str"]}function SD(t){var a=bo(t),r=ds(t);return[a,r,"str"]}function TD(t,a,r){var i=t.l+a,l=xn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"b"];if(r.cellFormula){t.l+=2;var h=Ef(t,i-t.l,r);f[3]=ns(h,null,l,r.supbooks,r)}else t.l=i;return f}function RD(t,a,r){var i=t.l+a,l=xn(t);l.r=r["!row"];var d=t.read_shift(1),f=[l,d,"e"];if(r.cellFormula){t.l+=2;var h=Ef(t,i-t.l,r);f[3]=ns(h,null,l,r.supbooks,r)}else t.l=i;return f}function DD(t,a,r){var i=t.l+a,l=xn(t);l.r=r["!row"];var d=ls(t),f=[l,d,"n"];if(r.cellFormula){t.l+=2;var h=Ef(t,i-t.l,r);f[3]=ns(h,null,l,r.supbooks,r)}else t.l=i;return f}function OD(t,a,r){var i=t.l+a,l=xn(t);l.r=r["!row"];var d=ds(t),f=[l,d,"str"];if(r.cellFormula){t.l+=2;var h=Ef(t,i-t.l,r);f[3]=ns(h,null,l,r.supbooks,r)}else t.l=i;return f}var ID=vo;function FD(t,a){var r=t.l+a,i=vo(t),l=xg(t),d=ds(t),f=ds(t),h=ds(t);t.l=r;var b={rfx:i,relId:l,loc:d,display:h};return f&&(b.Tooltip=f),b}function MD(){}function BD(t,a,r){var i=t.l+a,l=Kw(t),d=t.read_shift(1),f=[l];if(f[2]=d,r.cellFormula){var h=HR(t,i-t.l,r);f[1]=h}else t.l=i;return f}function LD(t,a,r){var i=t.l+a,l=vo(t),d=[l];if(r.cellFormula){var f=GR(t,i-t.l,r);d[1]=f,t.l=i}else t.l=i;return d}var PD=["left","right","top","bottom","header","footer"];function zD(t){var a={};return PD.forEach(function(r){a[r]=ls(t)}),a}function UD(t){var a=t.read_shift(2);return t.l+=28,{RTL:a&32}}function HD(){}function VD(){}function GD(t,a,r,i,l,d,f){if(!t)return t;var h=a||{};i||(i={"!id":{}});var b=h.dense?[]:{},p,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=!1,C=!1,_,R,A,O,I,M,T,B,H,U=[];h.biff=12,h["!row"]=0;var L=0,P=!1,z=[],K={},te=h.supbooks||l.supbooks||[[]];if(te.sharedf=K,te.arrayf=z,te.SheetNames=l.SheetNames||l.Sheets.map(function(we){return we.name}),!h.supbooks&&(h.supbooks=te,l.Names))for(var V=0;V<l.Names.length;++V)te[0][V+1]=l.Names[V];var ne=[],ie=[],X=!1;lf[16]={n:"BrtShortReal",f:O4};var q;if(Mi(t,function(oe,fe,re){if(!C)switch(re){case 148:p=oe;break;case 0:_=oe,h.sheetRows&&h.sheetRows<=_.r&&(C=!0),B=Ya(O=_.r),h["!row"]=_.r,(oe.hidden||oe.hpt||oe.level!=null)&&(oe.hpt&&(oe.hpx=W0(oe.hpt)),ie[oe.r]=oe);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(R={t:oe[2]},oe[2]){case"n":R.v=oe[1];break;case"s":T=I0[oe[1]],R.v=T.t,R.r=T.r;break;case"b":R.v=!!oe[1];break;case"e":R.v=oe[1],h.cellText!==!1&&(R.w=wo[R.v]);break;case"str":R.t="s",R.v=oe[1];break;case"is":R.t="s",R.v=oe[1].t;break}if((A=f.CellXf[oe[0].iStyleRef])&&R4(R,A.numFmtId,null,h,d,f),I=oe[0].c==-1?I+1:oe[0].c,h.dense?(b[O]||(b[O]=[]),b[O][I]=R):b[Oa(I)+B]=R,h.cellFormula){for(P=!1,L=0;L<z.length;++L){var Q=z[L];_.r>=Q[0].s.r&&_.r<=Q[0].e.r&&I>=Q[0].s.c&&I<=Q[0].e.c&&(R.F=pr(Q[0]),P=!0)}!P&&oe.length>3&&(R.f=oe[3])}if(w.s.r>_.r&&(w.s.r=_.r),w.s.c>I&&(w.s.c=I),w.e.r<_.r&&(w.e.r=_.r),w.e.c<I&&(w.e.c=I),h.cellDates&&A&&R.t=="n"&&Cc(tr[A.numFmtId])){var Y=eo(R.v);Y&&(R.t="d",R.v=new Date(Y.y,Y.m-1,Y.d,Y.H,Y.M,Y.S,Y.u))}q&&(q.type=="XLDAPR"&&(R.D=!0),q=void 0);break;case 1:case 12:if(!h.sheetStubs||j)break;R={t:"z",v:void 0},I=oe[0].c==-1?I+1:oe[0].c,h.dense?(b[O]||(b[O]=[]),b[O][I]=R):b[Oa(I)+B]=R,w.s.r>_.r&&(w.s.r=_.r),w.s.c>I&&(w.s.c=I),w.e.r<_.r&&(w.e.r=_.r),w.e.c<I&&(w.e.c=I),q&&(q.type=="XLDAPR"&&(R.D=!0),q=void 0);break;case 176:U.push(oe);break;case 49:q=((h.xlmeta||{}).Cell||[])[oe-1];break;case 494:var ae=i["!id"][oe.relId];for(ae?(oe.Target=ae.Target,oe.loc&&(oe.Target+="#"+oe.loc),oe.Rel=ae):oe.relId==""&&(oe.Target="#"+oe.loc),O=oe.rfx.s.r;O<=oe.rfx.e.r;++O)for(I=oe.rfx.s.c;I<=oe.rfx.e.c;++I)h.dense?(b[O]||(b[O]=[]),b[O][I]||(b[O][I]={t:"z",v:void 0}),b[O][I].l=oe):(M=Zt({c:I,r:O}),b[M]||(b[M]={t:"z",v:void 0}),b[M].l=oe);break;case 426:if(!h.cellFormula)break;z.push(oe),H=h.dense?b[O][I]:b[Oa(I)+B],H.f=ns(oe[1],w,{r:_.r,c:I},te,h),H.F=pr(oe[0]);break;case 427:if(!h.cellFormula)break;K[Zt(oe[0].s)]=oe[1],H=h.dense?b[O][I]:b[Oa(I)+B],H.f=ns(oe[1],w,{r:_.r,c:I},te,h);break;case 60:if(!h.cellStyles)break;for(;oe.e>=oe.s;)ne[oe.e--]={width:oe.w/256,hidden:!!(oe.flags&1),level:oe.level},X||(X=!0,yg(oe.w/256)),bc(ne[oe.e+1]);break;case 161:b["!autofilter"]={ref:pr(oe)};break;case 476:b["!margins"]=oe;break;case 147:l.Sheets[r]||(l.Sheets[r]={}),oe.name&&(l.Sheets[r].CodeName=oe.name),(oe.above||oe.left)&&(b["!outline"]={above:oe.above,left:oe.left});break;case 137:l.Views||(l.Views=[{}]),l.Views[0]||(l.Views[0]={}),oe.RTL&&(l.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:j=!0;break;case 36:j=!1;break;case 37:j=!0;break;case 38:j=!1;break;default:if(!fe.T){if(!j||h.WTF)throw new Error("Unexpected record 0x"+re.toString(16))}}},h),delete h.supbooks,delete h["!row"],!b["!ref"]&&(w.s.r<2e6||p&&(p.e.r>0||p.e.c>0||p.s.r>0||p.s.c>0))&&(b["!ref"]=pr(p||w)),h.sheetRows&&b["!ref"]){var ce=ia(b["!ref"]);h.sheetRows<=+ce.e.r&&(ce.e.r=h.sheetRows-1,ce.e.r>w.e.r&&(ce.e.r=w.e.r),ce.e.r<ce.s.r&&(ce.s.r=ce.e.r),ce.e.c>w.e.c&&(ce.e.c=w.e.c),ce.e.c<ce.s.c&&(ce.s.c=ce.e.c),b["!fullref"]=b["!ref"],b["!ref"]=pr(ce))}return U.length>0&&(b["!merges"]=U),ne.length>0&&(b["!cols"]=ne),ie.length>0&&(b["!rows"]=ie),b}function XD(t){var a=[],r=t.match(/^<c:numCache>/),i;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(d){var f=d.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);f&&(a[+f[1]]=r?+f[2]:f[2])});var l=br((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(d){i=d.replace(/<.*?>/g,"")}),[a,l,i]}function qD(t,a,r,i,l,d){var f=d||{"!type":"chart"};if(!t)return d;var h=0,b=0,p="A",w={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(j){var C=XD(j);w.s.r=w.s.c=0,w.e.c=h,p=Oa(h),C[0].forEach(function(_,R){f[p+Ya(R)]={t:"n",v:_,z:C[1]},b=R}),w.e.r<b&&(w.e.r=b),++h}),h>0&&(f["!ref"]=pr(w)),f}function $D(t,a,r,i,l){if(!t)return t;i||(i={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f,h=t.match(D4);return h&&vg(h[0],d,l,r),(f=t.match(/drawing r:id="(.*?)"/))&&(d["!rel"]=f[1]),i["!id"][d["!rel"]]&&(d["!drawel"]=i["!id"][d["!rel"]]),d}function YD(t,a){t.l+=10;var r=ds(t);return{name:r}}function WD(t,a,r,i,l){if(!t)return t;i||(i={"!id":{}});var d={"!type":"chart","!drawel":null,"!rel":""},f=!1;return Mi(t,function(b,p,w){switch(w){case 550:d["!rel"]=b;break;case 651:l.Sheets[r]||(l.Sheets[r]={}),b.name&&(l.Sheets[r].CodeName=b.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:f=!0;break;case 36:f=!1;break;case 37:break;case 38:break;default:if(!(p.T>0)){if(!(p.T<0)){if(!f||a.WTF)throw new Error("Unexpected record 0x"+w.toString(16))}}}},a),i["!id"][d["!rel"]]&&(d["!drawel"]=i["!id"][d["!rel"]]),d}var I4=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],KD=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ZD=[],QD=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function I2(t,a){for(var r=0;r!=t.length;++r)for(var i=t[r],l=0;l!=a.length;++l){var d=a[l];if(i[d[0]]==null)i[d[0]]=d[1];else switch(d[2]){case"bool":typeof i[d[0]]=="string"&&(i[d[0]]=Yr(i[d[0]]));break;case"int":typeof i[d[0]]=="string"&&(i[d[0]]=parseInt(i[d[0]],10));break}}}function F2(t,a){for(var r=0;r!=a.length;++r){var i=a[r];if(t[i[0]]==null)t[i[0]]=i[1];else switch(i[2]){case"bool":typeof t[i[0]]=="string"&&(t[i[0]]=Yr(t[i[0]]));break;case"int":typeof t[i[0]]=="string"&&(t[i[0]]=parseInt(t[i[0]],10));break}}}function F4(t){F2(t.WBProps,I4),F2(t.CalcPr,QD),I2(t.WBView,KD),I2(t.Sheets,ZD),hc.date1904=Yr(t.WBProps.date1904)}var JD="][*?/\\".split("");function eO(t,a){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return JD.forEach(function(i){if(t.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var tO=/<\w+:workbook/;function rO(t,a){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,l="xmlns",d={},f=0;if(t.replace(fs,function(b,p){var w=Gt(b);switch(si(w[0])){case"<?xml":break;case"<workbook":b.match(tO)&&(l="xmlns"+b.match(/<(\w+):/)[1]),r.xmlns=w[l];break;case"</workbook>":break;case"<fileVersion":delete w[0],r.AppVersion=w;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":I4.forEach(function(j){if(w[j[0]]!=null)switch(j[2]){case"bool":r.WBProps[j[0]]=Yr(w[j[0]]);break;case"int":r.WBProps[j[0]]=parseInt(w[j[0]],10);break;default:r.WBProps[j[0]]=w[j[0]]}}),w.codeName&&(r.WBProps.CodeName=zr(w.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete w[0],r.WBView.push(w);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(w.state){case"hidden":w.Hidden=1;break;case"veryHidden":w.Hidden=2;break;default:w.Hidden=0}delete w.state,w.name=br(zr(w.name)),delete w[0],r.Sheets.push(w);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":i=!0;break;case"</definedNames>":i=!1;break;case"<definedName":d={},d.Name=zr(w.name),w.comment&&(d.Comment=w.comment),w.localSheetId&&(d.Sheet=+w.localSheetId),Yr(w.hidden||"0")&&(d.Hidden=!0),f=p+b.length;break;case"</definedName>":d.Ref=br(zr(t.slice(f,p))),r.Names.push(d);break;case"<definedName/>":break;case"<calcPr":delete w[0],r.CalcPr=w;break;case"<calcPr/>":delete w[0],r.CalcPr=w;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<revisionPtr":break;default:if(!i&&a.WTF)throw new Error("unrecognized "+w[0]+" in workbook")}return b}),vS.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return F4(r),r}function aO(t,a){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=Dm(t),r.name=ds(t),r}function sO(t,a){var r={},i=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var l=a>8?ds(t):"";return l.length>0&&(r.CodeName=l),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function nO(t,a){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=a-8,r}function iO(t,a,r){var i=t.l+a;t.l+=4,t.l+=1;var l=t.read_shift(4),d=LS(t),f=VR(t,0,r),h=xg(t);t.l=i;var b={Name:d,Ptg:f};return l<268435455&&(b.Sheet=l),h&&(b.Comment=h),b}function lO(t,a){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],l=!1;a||(a={}),a.biff=12;var d=[],f=[[]];return f.SheetNames=[],f.XTI=[],lf[16]={n:"BrtFRTArchID$",f:nO},Mi(t,function(b,p,w){switch(w){case 156:f.SheetNames.push(b.name),r.Sheets.push(b);break;case 153:r.WBProps=b;break;case 39:b.Sheet!=null&&(a.SID=b.Sheet),b.Ref=ns(b.Ptg,null,null,f,a),delete a.SID,delete b.Ptg,d.push(b);break;case 1036:break;case 357:case 358:case 355:case 667:f[0].length?f.push([w,b]):f[0]=[w,b],f[f.length-1].XTI=[];break;case 362:f.length===0&&(f[0]=[],f[0].XTI=[]),f[f.length-1].XTI=f[f.length-1].XTI.concat(b),f.XTI=f.XTI.concat(b);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:i.push(w),l=!0;break;case 36:i.pop(),l=!1;break;case 37:i.push(w),l=!0;break;case 38:i.pop(),l=!1;break;case 16:break;default:if(!p.T){if(!l||a.WTF&&i[i.length-1]!=37&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+w.toString(16))}}},a),F4(r),r.Names=d,r.supbooks=f,r}function oO(t,a,r){return a.slice(-4)===".bin"?lO(t,r):rO(t,r)}function cO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?GD(t,i,r,l,d,f,h):aD(t,i,r,l,d,f,h)}function dO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?WD(t,i,r,l,d):$D(t,i,r,l,d)}function uO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?b9():v9()}function fO(t,a,r,i,l,d,f,h){return a.slice(-4)===".bin"?p9():y9()}function xO(t,a,r,i){return a.slice(-4)===".bin"?I7(t,r,i):A7(t,r,i)}function hO(t,a,r){return w4(t,r)}function mO(t,a,r){return a.slice(-4)===".bin"?KT(t,r):YT(t,r)}function gO(t,a,r){return a.slice(-4)===".bin"?h9(t,r):c9(t,r)}function pO(t,a,r){return a.slice(-4)===".bin"?i9(t):s9(t)}function yO(t,a,r,i){return r.slice(-4)===".bin"?l9(t,a,r,i):void 0}function bO(t,a,r){return a.slice(-4)===".bin"?r9(t,a,r):a9(t,a,r)}var M4=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,B4=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function wn(t,a){var r=t.split(/\s+/),i=[];if(i[0]=r[0],r.length===1)return i;var l=t.match(M4),d,f,h,b;if(l)for(b=0;b!=l.length;++b)d=l[b].match(B4),(f=d[1].indexOf(":"))===-1?i[d[1]]=d[2].slice(1,d[2].length-1):(d[1].slice(0,6)==="xmlns:"?h="xmlns"+d[1].slice(6):h=d[1].slice(f+1),i[h]=d[2].slice(1,d[2].length-1));return i}function vO(t){var a=t.split(/\s+/),r={};if(a.length===1)return r;var i=t.match(M4),l,d,f,h;if(i)for(h=0;h!=i.length;++h)l=i[h].match(B4),(d=l[1].indexOf(":"))===-1?r[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?f="xmlns"+l[1].slice(6):f=l[1].slice(d+1),r[f]=l[2].slice(1,l[2].length-1));return r}var M0;function wO(t,a){var r=M0[t]||br(t);return r==="General"?fo(a):un(r,a)}function NO(t,a,r,i){var l=i;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":l=Yr(i);break;case"i2":case"int":l=parseInt(i,10);break;case"r4":case"float":l=parseFloat(i);break;case"date":case"dateTime.tz":l=Ua(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[br(a)]=l}function kO(t,a,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||wo[t.v]:a==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=G0(t.v):t.w=fo(t.v):t.w=wO(a||"General",t.v)}catch(d){if(r.WTF)throw d}try{var i=M0[a]||a||"General";if(r.cellNF&&(t.z=i),r.cellDates&&t.t=="n"&&Cc(i)){var l=eo(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}catch(d){if(r.WTF)throw d}}}function jO(t,a,r){if(r.cellStyles&&a.Interior){var i=a.Interior;i.Pattern&&(i.patternType=N7[i.Pattern]||i.Pattern)}t[a.ID]=a}function EO(t,a,r,i,l,d,f,h,b,p){var w="General",j=i.StyleID,C={};p=p||{};var _=[],R=0;for(j===void 0&&h&&(j=h.StyleID),j===void 0&&f&&(j=f.StyleID);d[j]!==void 0&&(d[j].nf&&(w=d[j].nf),d[j].Interior&&_.push(d[j].Interior),!!d[j].Parent);)j=d[j].Parent;switch(r.Type){case"Boolean":i.t="b",i.v=Yr(t);break;case"String":i.t="s",i.r=a2(br(t)),i.v=t.indexOf("<")>-1?br(a||t).replace(/<.*?>/g,""):i.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),i.v=(Ua(t)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),i.v!==i.v?i.v=br(t):i.v<60&&(i.v=i.v-1),(!w||w=="General")&&(w="yyyy-mm-dd");case"Number":i.v===void 0&&(i.v=+t),i.t||(i.t="n");break;case"Error":i.t="e",i.v=Jw[t],p.cellText!==!1&&(i.w=t);break;default:t==""&&a==""?i.t="z":(i.t="s",i.v=a2(a||t));break}if(kO(i,w,p),p.cellFormula!==!1)if(i.Formula){var A=br(i.Formula);A.charCodeAt(0)==61&&(A=A.slice(1)),i.f=xc(A,l),delete i.Formula,i.ArrayRange=="RC"?i.F=xc("RC:RC",l):i.ArrayRange&&(i.F=xc(i.ArrayRange,l),b.push([ia(i.F),i.F]))}else for(R=0;R<b.length;++R)l.r>=b[R][0].s.r&&l.r<=b[R][0].e.r&&l.c>=b[R][0].s.c&&l.c<=b[R][0].e.c&&(i.F=b[R][1]);p.cellStyles&&(_.forEach(function(O){!C.patternType&&O.patternType&&(C.patternType=O.patternType)}),i.s=C),i.StyleID!==void 0&&(i.ixfe=i.StyleID)}function CO(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function om(t,a){var r=a||{};Ew();var i=j0(og(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(i=zr(i));var l=i.slice(0,1024).toLowerCase(),d=!1;if(l=l.replace(/".*?"/g,""),(l.indexOf(">")&1023)>Math.min(l.indexOf(",")&1023,l.indexOf(";")&1023)){var f=$a(r);return f.type="string",$0.to_workbook(i,f)}if(l.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(dt){l.indexOf("<"+dt)>=0&&(d=!0)}),d)return FO(i,r);M0={"General Number":"General","General Date":tr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":tr[15],"Short Date":tr[14],"Long Time":tr[19],"Medium Time":tr[18],"Short Time":tr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:tr[2],Standard:tr[4],Percent:tr[10],Scientific:tr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var h,b=[],p,w={},j=[],C=r.dense?[]:{},_="",R={},A={},O=wn('<Data ss:Type="String">'),I=0,M=0,T=0,B={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},U={},L="",P=0,z=[],K={},te={},V=0,ne=[],ie=[],X={},q=[],ce,we=!1,oe=[],fe=[],re={},Q=0,Y=0,ae={Sheets:[],WBProps:{date1904:!1}},se={};q0.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"");for(var Z="";h=q0.exec(i);)switch(h[3]=(Z=h[3]).toLowerCase()){case"data":if(Z=="data"){if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break}if(b[b.length-1][1])break;h[1]==="/"?EO(i.slice(I,h.index),L,O,b[b.length-1][0]=="comment"?X:R,{c:M,r:T},H,q[M],A,oe,r):(L="",O=wn(h[0]),I=h.index+h[0].length);break;case"cell":if(h[1]==="/")if(ie.length>0&&(R.c=ie),(!r.sheetRows||r.sheetRows>T)&&R.v!==void 0&&(r.dense?(C[T]||(C[T]=[]),C[T][M]=R):C[Oa(M)+Ya(T)]=R),R.HRef&&(R.l={Target:br(R.HRef)},R.HRefScreenTip&&(R.l.Tooltip=R.HRefScreenTip),delete R.HRef,delete R.HRefScreenTip),(R.MergeAcross||R.MergeDown)&&(Q=M+(parseInt(R.MergeAcross,10)|0),Y=T+(parseInt(R.MergeDown,10)|0),z.push({s:{c:M,r:T},e:{c:Q,r:Y}})),!r.sheetStubs)R.MergeAcross?M=Q+1:++M;else if(R.MergeAcross||R.MergeDown){for(var Re=M;Re<=Q;++Re)for(var je=T;je<=Y;++je)(Re>M||je>T)&&(r.dense?(C[je]||(C[je]=[]),C[je][Re]={t:"z"}):C[Oa(Re)+Ya(je)]={t:"z"});M=Q+1}else++M;else R=vO(h[0]),R.Index&&(M=+R.Index-1),M<B.s.c&&(B.s.c=M),M>B.e.c&&(B.e.c=M),h[0].slice(-2)==="/>"&&++M,ie=[];break;case"row":h[1]==="/"||h[0].slice(-2)==="/>"?(T<B.s.r&&(B.s.r=T),T>B.e.r&&(B.e.r=T),h[0].slice(-2)==="/>"&&(A=wn(h[0]),A.Index&&(T=+A.Index-1)),M=0,++T):(A=wn(h[0]),A.Index&&(T=+A.Index-1),re={},(A.AutoFitHeight=="0"||A.Height)&&(re.hpx=parseInt(A.Height,10),re.hpt=v4(re.hpx),fe[T]=re),A.Hidden=="1"&&(re.hidden=!0,fe[T]=re));break;case"worksheet":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"));j.push(_),B.s.r<=B.e.r&&B.s.c<=B.e.c&&(C["!ref"]=pr(B),r.sheetRows&&r.sheetRows<=B.e.r&&(C["!fullref"]=C["!ref"],B.e.r=r.sheetRows-1,C["!ref"]=pr(B))),z.length&&(C["!merges"]=z),q.length>0&&(C["!cols"]=q),fe.length>0&&(C["!rows"]=fe),w[_]=C}else B={s:{r:2e6,c:2e6},e:{r:0,c:0}},T=M=0,b.push([h[3],!1]),p=wn(h[0]),_=br(p.Name),C=r.dense?[]:{},z=[],oe=[],fe=[],se={name:_,Hidden:0},ae.Sheets.push(se);break;case"table":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else{if(h[0].slice(-2)=="/>")break;b.push([h[3],!1]),q=[],we=!1}break;case"style":h[1]==="/"?jO(H,U,r):U=wn(h[0]);break;case"numberformat":U.nf=br(wn(h[0]).Format||"General"),M0[U.nf]&&(U.nf=M0[U.nf]);for(var Ue=0;Ue!=392&&tr[Ue]!=U.nf;++Ue);if(Ue==392){for(Ue=57;Ue!=392;++Ue)if(tr[Ue]==null){ao(U.nf,Ue);break}}break;case"column":if(b[b.length-1][0]!=="table")break;if(ce=wn(h[0]),ce.Hidden&&(ce.hidden=!0,delete ce.Hidden),ce.Width&&(ce.wpx=parseInt(ce.Width,10)),!we&&ce.wpx>10){we=!0,ys=y4;for(var Me=0;Me<q.length;++Me)q[Me]&&bc(q[Me])}we&&bc(ce),q[ce.Index-1||q.length]=ce;for(var at=0;at<+ce.Span;++at)q[q.length]=$a(ce);break;case"namedrange":if(h[1]==="/")break;ae.Names||(ae.Names=[]);var ye=Gt(h[0]),Ae={Name:ye.Name,Ref:xc(ye.RefersTo.slice(1),{r:0,c:0})};ae.Sheets.length>0&&(Ae.Sheet=ae.Sheets.length-1),ae.Names.push(Ae);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(h[0].slice(-2)==="/>")break;h[1]==="/"?L+=i.slice(P,h.index):P=h.index+h[0].length;break;case"interior":if(!r.cellStyles)break;U.Interior=wn(h[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(h[0].slice(-2)==="/>")break;h[1]==="/"?c5(K,Z,i.slice(V,h.index)):V=h.index+h[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else b.push([h[3],!1]);break;case"comment":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"));CO(X),ie.push(X)}else b.push([h[3],!1]),p=wn(h[0]),X={a:p.Author};break;case"autofilter":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else if(h[0].charAt(h[0].length-2)!=="/"){var Fe=wn(h[0]);C["!autofilter"]={ref:xc(Fe.Range).replace(/\$/g,"")},b.push([h[3],!0])}break;case"name":break;case"datavalidation":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(h[1]==="/"){if((p=b.pop())[0]!==h[3])throw new Error("Bad state: "+p.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&b.push([h[3],!0]);break;case"null":break;default:if(b.length==0&&h[3]=="document"||b.length==0&&h[3]=="uof")return U2(i,r);var Ce=!0;switch(b[b.length-1][0]){case"officedocumentsettings":switch(h[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Ce=!1}break;case"componentoptions":switch(h[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Ce=!1}break;case"excelworkbook":switch(h[3]){case"date1904":ae.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Ce=!1}break;case"workbookoptions":switch(h[3]){case"owcversion":break;case"height":break;case"width":break;default:Ce=!1}break;case"worksheetoptions":switch(h[3]){case"visible":if(h[0].slice(-2)!=="/>")if(h[1]==="/")switch(i.slice(V,h.index)){case"SheetHidden":se.Hidden=1;break;case"SheetVeryHidden":se.Hidden=2;break}else V=h.index+h[0].length;break;case"header":C["!margins"]||F0(C["!margins"]={},"xlml"),isNaN(+Gt(h[0]).Margin)||(C["!margins"].header=+Gt(h[0]).Margin);break;case"footer":C["!margins"]||F0(C["!margins"]={},"xlml"),isNaN(+Gt(h[0]).Margin)||(C["!margins"].footer=+Gt(h[0]).Margin);break;case"pagemargins":var Je=Gt(h[0]);C["!margins"]||F0(C["!margins"]={},"xlml"),isNaN(+Je.Top)||(C["!margins"].top=+Je.Top),isNaN(+Je.Left)||(C["!margins"].left=+Je.Left),isNaN(+Je.Right)||(C["!margins"].right=+Je.Right),isNaN(+Je.Bottom)||(C["!margins"].bottom=+Je.Bottom);break;case"displayrighttoleft":ae.Views||(ae.Views=[]),ae.Views[0]||(ae.Views[0]={}),ae.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":C["!outline"]||(C["!outline"]={}),C["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":C["!outline"]||(C["!outline"]={}),C["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Ce=!1}break;case"pivottable":case"pivotcache":switch(h[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Ce=!1}break;case"pagebreaks":switch(h[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Ce=!1}break;case"autofilter":switch(h[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Ce=!1}break;case"querytable":switch(h[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Ce=!1}break;case"datavalidation":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Ce=!1}break;case"sorting":case"conditionalformatting":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Ce=!1}break;case"mapinfo":case"schema":case"data":switch(h[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Ce=!1}break;case"smarttags":break;default:Ce=!1;break}if(Ce||h[3].match(/!\[CDATA/))break;if(!b[b.length-1][1])throw"Unrecognized tag: "+h[3]+"|"+b.join("|");if(b[b.length-1][0]==="customdocumentproperties"){if(h[0].slice(-2)==="/>")break;h[1]==="/"?NO(te,Z,ne,i.slice(V,h.index)):(ne=h,V=h.index+h[0].length);break}if(r.WTF)throw"Unrecognized tag: "+h[3]+"|"+b.join("|")}var be={};return!r.bookSheets&&!r.bookProps&&(be.Sheets=w),be.SheetNames=j,be.Workbook=ae,be.SSF=$a(tr),be.Props=K,be.Custprops=te,be}function Mm(t,a){switch(kg(a=a||{}),a.type||"base64"){case"base64":return om(Ws(t),a);case"binary":case"buffer":case"file":return om(t,a);case"array":return om(yo(t),a)}}function _O(t){var a={},r=t.content;if(r.l=28,a.AnsiUserType=r.read_shift(0,"lpstr-ansi"),a.AnsiClipboardFormat=US(r),r.length-r.l<=4)return a;var i=r.read_shift(4);if(i==0||i>40||(r.l-=4,a.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(i=r.read_shift(4),i!==1907505652)||(a.UnicodeClipboardFormat=HS(r),i=r.read_shift(4),i==0||i>40))return a;r.l-=4,a.Reserved2=r.read_shift(0,"lpwstr")}var AO=[60,1084,2066,2165,2175];function SO(t,a,r,i,l){var d=i,f=[],h=r.slice(r.l,r.l+d);if(l&&l.enc&&l.enc.insitu&&h.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:l.enc.insitu(h)}f.push(h),r.l+=d;for(var b=Ci(r,r.l),p=Bm[b],w=0;p!=null&&AO.indexOf(b)>-1;)d=Ci(r,r.l+2),w=r.l+4,b==2066?w+=4:(b==2165||b==2175)&&(w+=12),h=r.slice(w,r.l+4+d),f.push(h),r.l+=4+d,p=Bm[b=Ci(r,r.l)];var j=yl(f);qa(j,0);var C=0;j.lens=[];for(var _=0;_<f.length;++_)j.lens.push(C),C+=f[_].length;if(j.length<i)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+j.length+" < "+i;return a.f(j,j.length,l)}function Qn(t,a,r){if(t.t!=="z"&&t.XF){var i=0;try{i=t.z||t.XF.numFmtId||0,a.cellNF&&(t.z=tr[i])}catch(d){if(a.WTF)throw d}if(!a||a.cellText!==!1)try{t.t==="e"?t.w=t.w||wo[t.v]:i===0||i=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=G0(t.v):t.w=fo(t.v):t.w=un(i,t.v,{date1904:!!r,dateNF:a&&a.dateNF})}catch(d){if(a.WTF)throw d}if(a.cellDates&&i&&t.t=="n"&&Cc(tr[i]||String(i))){var l=eo(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}}function Du(t,a,r){return{v:t,ixfe:a,t:r}}function TO(t,a){var r={opts:{}},i={},l=a.dense?[]:{},d={},f={},h=null,b=[],p="",w={},j,C="",_,R,A,O,I={},M=[],T,B,H=[],U=[],L={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},z=function(Ft){return Ft<8?so[Ft]:Ft<64&&U[Ft-8]||so[Ft]},K=function(Ft,Ye,Et){var Nt=Ye.XF.data;if(!(!Nt||!Nt.patternType||!Et||!Et.cellStyles)){Ye.s={},Ye.s.patternType=Nt.patternType;var ot;(ot=Y0(z(Nt.icvFore)))&&(Ye.s.fgColor={rgb:ot}),(ot=Y0(z(Nt.icvBack)))&&(Ye.s.bgColor={rgb:ot})}},te=function(Ft,Ye,Et){if(!(re>1)&&!(Et.sheetRows&&Ft.r>=Et.sheetRows)){if(Et.cellStyles&&Ye.XF&&Ye.XF.data&&K(Ft,Ye,Et),delete Ye.ixfe,delete Ye.XF,j=Ft,C=Zt(Ft),(!f||!f.s||!f.e)&&(f={s:{r:0,c:0},e:{r:0,c:0}}),Ft.r<f.s.r&&(f.s.r=Ft.r),Ft.c<f.s.c&&(f.s.c=Ft.c),Ft.r+1>f.e.r&&(f.e.r=Ft.r+1),Ft.c+1>f.e.c&&(f.e.c=Ft.c+1),Et.cellFormula&&Ye.f){for(var Nt=0;Nt<M.length;++Nt)if(!(M[Nt][0].s.c>Ft.c||M[Nt][0].s.r>Ft.r)&&!(M[Nt][0].e.c<Ft.c||M[Nt][0].e.r<Ft.r)){Ye.F=pr(M[Nt][0]),(M[Nt][0].s.c!=Ft.c||M[Nt][0].s.r!=Ft.r)&&delete Ye.f,Ye.f&&(Ye.f=""+ns(M[Nt][1],f,Ft,oe,V));break}}Et.dense?(l[Ft.r]||(l[Ft.r]=[]),l[Ft.r][Ft.c]=Ye):l[C]=Ye}},V={enc:!1,sbcch:0,snames:[],sharedf:I,arrayf:M,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!a&&!!a.cellStyles,WTF:!!a&&!!a.wtf};a.password&&(V.password=a.password);var ne,ie=[],X=[],q=[],ce=[],we=!1,oe=[];oe.SheetNames=V.snames,oe.sharedf=V.sharedf,oe.arrayf=V.arrayf,oe.names=[],oe.XTI=[];var fe=0,re=0,Q=0,Y=[],ae=[],se;V.codepage=1200,jn(1200);for(var Z=!1;t.l<t.length-1;){var Re=t.l,je=t.read_shift(2);if(je===0&&fe===10)break;var Ue=t.l===t.length?0:t.read_shift(2),Me=Bm[je];if(Me&&Me.f){if(a.bookSheets&&fe===133&&je!==133)break;if(fe=je,Me.r===2||Me.r==12){var at=t.read_shift(2);if(Ue-=2,!V.enc&&at!==je&&((at&255)<<8|at>>8)!==je)throw new Error("rt mismatch: "+at+"!="+je);Me.r==12&&(t.l+=10,Ue-=10)}var ye={};if(je===10?ye=Me.f(t,Ue,V):ye=SO(je,Me,t,Ue,V),re==0&&[9,521,1033,2057].indexOf(fe)===-1)continue;switch(je){case 34:r.opts.Date1904=L.WBProps.date1904=ye;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(V.enc||(t.l=0),V.enc=ye,!a.password)throw new Error("File is password-protected");if(ye.valid==null)throw new Error("Encryption scheme unsupported");if(!ye.valid)throw new Error("Password is incorrect");break;case 92:V.lastuser=ye;break;case 66:var Ae=Number(ye);switch(Ae){case 21010:Ae=1200;break;case 32768:Ae=1e4;break;case 32769:Ae=1252;break}jn(V.codepage=Ae),Z=!0;break;case 317:V.rrtabid=ye;break;case 25:V.winlocked=ye;break;case 439:r.opts.RefreshAll=ye;break;case 12:r.opts.CalcCount=ye;break;case 16:r.opts.CalcDelta=ye;break;case 17:r.opts.CalcIter=ye;break;case 13:r.opts.CalcMode=ye;break;case 14:r.opts.CalcPrecision=ye;break;case 95:r.opts.CalcSaveRecalc=ye;break;case 15:V.CalcRefMode=ye;break;case 2211:r.opts.FullCalc=ye;break;case 129:ye.fDialog&&(l["!type"]="dialog"),ye.fBelow||((l["!outline"]||(l["!outline"]={})).above=!0),ye.fRight||((l["!outline"]||(l["!outline"]={})).left=!0);break;case 224:H.push(ye);break;case 430:oe.push([ye]),oe[oe.length-1].XTI=[];break;case 35:case 547:oe[oe.length-1].push(ye);break;case 24:case 536:se={Name:ye.Name,Ref:ns(ye.rgce,f,null,oe,V)},ye.itab>0&&(se.Sheet=ye.itab-1),oe.names.push(se),oe[0]||(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].push(ye),ye.Name=="_xlnm._FilterDatabase"&&ye.itab>0&&ye.rgce&&ye.rgce[0]&&ye.rgce[0][0]&&ye.rgce[0][0][0]=="PtgArea3d"&&(ae[ye.itab-1]={ref:pr(ye.rgce[0][0][1][2])});break;case 22:V.ExternCount=ye;break;case 23:oe.length==0&&(oe[0]=[],oe[0].XTI=[]),oe[oe.length-1].XTI=oe[oe.length-1].XTI.concat(ye),oe.XTI=oe.XTI.concat(ye);break;case 2196:if(V.biff<8)break;se!=null&&(se.Comment=ye[1]);break;case 18:l["!protect"]=ye;break;case 19:ye!==0&&V.WTF&&console.error("Password verifier: "+ye);break;case 133:d[ye.pos]=ye,V.snames.push(ye.name);break;case 10:{if(--re)break;if(f.e){if(f.e.r>0&&f.e.c>0){if(f.e.r--,f.e.c--,l["!ref"]=pr(f),a.sheetRows&&a.sheetRows<=f.e.r){var Fe=f.e.r;f.e.r=a.sheetRows-1,l["!fullref"]=l["!ref"],l["!ref"]=pr(f),f.e.r=Fe}f.e.r++,f.e.c++}ie.length>0&&(l["!merges"]=ie),X.length>0&&(l["!objects"]=X),q.length>0&&(l["!cols"]=q),ce.length>0&&(l["!rows"]=ce),L.Sheets.push(P)}p===""?w=l:i[p]=l,l=a.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(V.biff===8&&(V.biff={9:2,521:3,1033:4}[je]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ye.BIFFVer]||8),V.biffguess=ye.BIFFVer==0,ye.BIFFVer==0&&ye.dt==4096&&(V.biff=5,Z=!0,jn(V.codepage=28591)),V.biff==8&&ye.BIFFVer==0&&ye.dt==16&&(V.biff=2),re++)break;if(l=a.dense?[]:{},V.biff<8&&!Z&&(Z=!0,jn(V.codepage=a.codepage||1252)),V.biff<5||ye.BIFFVer==0&&ye.dt==4096){p===""&&(p="Sheet1"),f={s:{r:0,c:0},e:{r:0,c:0}};var Ce={pos:t.l-Ue,name:p};d[Ce.pos]=Ce,V.snames.push(p)}else p=(d[Re]||{name:""}).name;ye.dt==32&&(l["!type"]="chart"),ye.dt==64&&(l["!type"]="macro"),ie=[],X=[],V.arrayf=M=[],q=[],ce=[],we=!1,P={Hidden:(d[Re]||{hs:0}).hs,name:p}}break;case 515:case 3:case 2:l["!type"]=="chart"&&(a.dense?(l[ye.r]||[])[ye.c]:l[Zt({c:ye.c,r:ye.r})])&&++ye.c,T={ixfe:ye.ixfe,XF:H[ye.ixfe]||{},v:ye.val,t:"n"},Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:ye.c,r:ye.r},T,a);break;case 5:case 517:T={ixfe:ye.ixfe,XF:H[ye.ixfe],v:ye.val,t:ye.t},Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:ye.c,r:ye.r},T,a);break;case 638:T={ixfe:ye.ixfe,XF:H[ye.ixfe],v:ye.rknum,t:"n"},Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:ye.c,r:ye.r},T,a);break;case 189:for(var Je=ye.c;Je<=ye.C;++Je){var be=ye.rkrec[Je-ye.c][0];T={ixfe:be,XF:H[be],v:ye.rkrec[Je-ye.c][1],t:"n"},Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:Je,r:ye.r},T,a)}break;case 6:case 518:case 1030:{if(ye.val=="String"){h=ye;break}if(T=Du(ye.val,ye.cell.ixfe,ye.tt),T.XF=H[T.ixfe],a.cellFormula){var dt=ye.formula;if(dt&&dt[0]&&dt[0][0]&&dt[0][0][0]=="PtgExp"){var me=dt[0][0][1][0],Pe=dt[0][0][1][1],pe=Zt({r:me,c:Pe});I[pe]?T.f=""+ns(ye.formula,f,ye.cell,oe,V):T.F=((a.dense?(l[me]||[])[Pe]:l[pe])||{}).F}else T.f=""+ns(ye.formula,f,ye.cell,oe,V)}Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te(ye.cell,T,a),h=ye}break;case 7:case 519:if(h)h.val=ye,T=Du(ye,h.cell.ixfe,"s"),T.XF=H[T.ixfe],a.cellFormula&&(T.f=""+ns(h.formula,f,h.cell,oe,V)),Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te(h.cell,T,a),h=null;else throw new Error("String record expects Formula");break;case 33:case 545:{M.push(ye);var lt=Zt(ye[0].s);if(_=a.dense?(l[ye[0].s.r]||[])[ye[0].s.c]:l[lt],a.cellFormula&&_){if(!h||!lt||!_)break;_.f=""+ns(ye[1],f,ye[0],oe,V),_.F=pr(ye[0])}}break;case 1212:{if(!a.cellFormula)break;if(C){if(!h)break;I[Zt(h.cell)]=ye[0],_=a.dense?(l[h.cell.r]||[])[h.cell.c]:l[Zt(h.cell)],(_||{}).f=""+ns(ye[0],f,j,oe,V)}}break;case 253:T=Du(b[ye.isst].t,ye.ixfe,"s"),b[ye.isst].h&&(T.h=b[ye.isst].h),T.XF=H[T.ixfe],Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:ye.c,r:ye.r},T,a);break;case 513:a.sheetStubs&&(T={ixfe:ye.ixfe,XF:H[ye.ixfe],t:"z"},Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:ye.c,r:ye.r},T,a));break;case 190:if(a.sheetStubs)for(var st=ye.c;st<=ye.C;++st){var jt=ye.ixfe[st-ye.c];T={ixfe:jt,XF:H[jt],t:"z"},Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:st,r:ye.r},T,a)}break;case 214:case 516:case 4:T=Du(ye.val,ye.ixfe,"s"),T.XF=H[T.ixfe],Q>0&&(T.z=Y[T.ixfe>>8&63]),Qn(T,a,r.opts.Date1904),te({c:ye.c,r:ye.r},T,a);break;case 0:case 512:re===1&&(f=ye);break;case 252:b=ye;break;case 1054:if(V.biff==4){Y[Q++]=ye[1];for(var At=0;At<Q+163&&tr[At]!=ye[1];++At);At>=163&&ao(ye[1],Q+163)}else ao(ye[1],ye[0]);break;case 30:{Y[Q++]=ye;for(var Dt=0;Dt<Q+163&&tr[Dt]!=ye;++Dt);Dt>=163&&ao(ye,Q+163)}break;case 229:ie=ie.concat(ye);break;case 93:X[ye.cmo[0]]=V.lastobj=ye;break;case 438:V.lastobj.TxO=ye;break;case 127:V.lastobj.ImData=ye;break;case 440:for(O=ye[0].s.r;O<=ye[0].e.r;++O)for(A=ye[0].s.c;A<=ye[0].e.c;++A)_=a.dense?(l[O]||[])[A]:l[Zt({c:A,r:O})],_&&(_.l=ye[1]);break;case 2048:for(O=ye[0].s.r;O<=ye[0].e.r;++O)for(A=ye[0].s.c;A<=ye[0].e.c;++A)_=a.dense?(l[O]||[])[A]:l[Zt({c:A,r:O})],_&&_.l&&(_.l.Tooltip=ye[1]);break;case 28:{if(V.biff<=5&&V.biff>=2)break;_=a.dense?(l[ye[0].r]||[])[ye[0].c]:l[Zt(ye[0])];var or=X[ye[2]];_||(a.dense?(l[ye[0].r]||(l[ye[0].r]=[]),_=l[ye[0].r][ye[0].c]={t:"z"}):_=l[Zt(ye[0])]={t:"z"},f.e.r=Math.max(f.e.r,ye[0].r),f.s.r=Math.min(f.s.r,ye[0].r),f.e.c=Math.max(f.e.c,ye[0].c),f.s.c=Math.min(f.s.c,ye[0].c)),_.c||(_.c=[]),R={a:ye[1],t:or.TxO.t},_.c.push(R)}break;case 2173:Q7(H[ye.ixfe],ye.ext);break;case 125:{if(!V.cellStyles)break;for(;ye.e>=ye.s;)q[ye.e--]={width:ye.w/256,level:ye.level||0,hidden:!!(ye.flags&1)},we||(we=!0,yg(ye.w/256)),bc(q[ye.e+1])}break;case 520:{var Lt={};ye.level!=null&&(ce[ye.r]=Lt,Lt.level=ye.level),ye.hidden&&(ce[ye.r]=Lt,Lt.hidden=!0),ye.hpt&&(ce[ye.r]=Lt,Lt.hpt=ye.hpt,Lt.hpx=W0(ye.hpt))}break;case 38:case 39:case 40:case 41:l["!margins"]||F0(l["!margins"]={}),l["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[je]]=ye;break;case 161:l["!margins"]||F0(l["!margins"]={}),l["!margins"].header=ye.header,l["!margins"].footer=ye.footer;break;case 574:ye.RTL&&(L.Views[0].RTL=!0);break;case 146:U=ye;break;case 2198:ne=ye;break;case 140:B=ye;break;case 442:p?P.CodeName=ye||P.name:L.WBProps.CodeName=ye||"ThisWorkbook";break}}else Me||console.error("Missing Info for XLS Record 0x"+je.toString(16)),t.l+=Ue}return r.SheetNames=ti(d).sort(function(qt,Ft){return Number(qt)-Number(Ft)}).map(function(qt){return d[qt].name}),a.bookSheets||(r.Sheets=i),!r.SheetNames.length&&w["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=w)):r.Preamble=w,r.Sheets&&ae.forEach(function(qt,Ft){r.Sheets[r.SheetNames[Ft]]["!autofilter"]=qt}),r.Strings=b,r.SSF=$a(tr),V.enc&&(r.Encryption=V.enc),ne&&(r.Themes=ne),r.Metadata={},B!==void 0&&(r.Metadata.Country=B),oe.names.length>0&&(L.Names=oe.names),r.Workbook=L,r}var M2={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function RO(t,a,r){var i=gr.find(t,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var l=b2(i,YS,M2.DSI);for(var d in l)a[d]=l[d]}catch(p){if(r.WTF)throw p}var f=gr.find(t,"/!SummaryInformation");if(f&&f.size>0)try{var h=b2(f,WS,M2.SI);for(var b in h)a[b]==null&&(a[b]=h[b])}catch(p){if(r.WTF)throw p}a.HeadingPairs&&a.TitlesOfParts&&(t4(a.HeadingPairs,a.TitlesOfParts,a,r),delete a.HeadingPairs,delete a.TitlesOfParts)}function L4(t,a){a||(a={}),kg(a),xw(),a.codepage&&tg(a.codepage);var r,i;if(t.FullPaths){if(gr.find(t,"/encryption"))throw new Error("File is password-protected");r=gr.find(t,"!CompObj"),i=gr.find(t,"/Workbook")||gr.find(t,"/Book")}else{switch(a.type){case"base64":t=kn(Ws(t));break;case"binary":t=kn(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}qa(t,0),i={content:t}}var l,d;if(r&&_O(r),a.bookProps&&!a.bookSheets)l={};else{var f=fr?"buffer":"array";if(i&&i.content)l=TO(i.content,a);else if((d=gr.find(t,"PerfectOffice_MAIN"))&&d.content)l=O0.to_workbook(d.content,(a.type=f,a));else if((d=gr.find(t,"NativeContent_MAIN"))&&d.content)l=O0.to_workbook(d.content,(a.type=f,a));else throw(d=gr.find(t,"MN0"))&&d.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");a.bookVBA&&t.FullPaths&&gr.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(l.vbaraw=g9(t))}var h={};return t.FullPaths&&RO(t,h,a),l.Props=l.Custprops=h,a.bookFiles&&(l.cfb=t),l}var lf={0:{f:fD},1:{f:gD},2:{f:ED},3:{f:vD},4:{f:yD},5:{f:jD},6:{f:AD},7:{f:ND},8:{f:OD},9:{f:DD},10:{f:TD},11:{f:RD},12:{f:pD},13:{f:CD},14:{f:wD},15:{f:bD},16:{f:O4},17:{f:SD},18:{f:kD},19:{f:fg},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:iO},40:{},42:{},43:{f:T7},44:{f:S7},45:{f:R7},46:{f:O7},47:{f:D7},48:{},49:{f:IS},50:{},51:{f:e9},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:x4},62:{f:_D},63:{f:n9},64:{f:HD},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:us,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:UD},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:mD},148:{f:xD,p:16},151:{f:MD},152:{},153:{f:sO},154:{},155:{},156:{f:aO},157:{},158:{},159:{T:1,f:WT},160:{T:-1},161:{T:1,f:vo},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:ID},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:J7},336:{T:-1},337:{f:t9,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Dm},357:{},358:{},359:{},360:{T:1},361:{},362:{f:f4},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:BD},427:{f:LD},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:zD},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:hD},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:FD},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Dm},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:x9},633:{T:1},634:{T:-1},635:{T:1,f:f9},636:{T:-1},637:{f:MS},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:YD},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:VD},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Bm={6:{f:im},10:{f:pl},12:{f:wa},13:{f:wa},14:{f:xa},15:{f:xa},16:{f:ls},17:{f:xa},18:{f:xa},19:{f:wa},20:{f:k2},21:{f:k2},23:{f:f4},24:{f:E2},25:{f:xa},26:{},27:{},28:{f:dT},29:{},34:{f:xa},35:{f:j2},38:{f:ls},39:{f:ls},40:{f:ls},41:{f:ls},42:{f:xa},43:{f:xa},47:{f:h7},49:{f:X5},51:{f:wa},60:{},61:{f:H5},64:{f:xa},65:{f:G5},66:{f:wa},77:{},80:{},81:{},82:{},85:{f:wa},89:{},90:{},91:{},92:{f:I5},93:{f:fT},94:{},95:{f:xa},96:{},97:{},99:{f:xa},125:{f:x4},128:{f:tT},129:{f:F5},130:{f:wa},131:{f:xa},132:{f:xa},133:{f:M5},134:{},140:{f:yT},141:{f:wa},144:{},146:{f:vT},151:{},152:{},153:{},154:{},155:{},156:{f:wa},157:{},158:{},160:{f:ET},161:{f:NT},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Z5},190:{f:Q5},193:{f:pl},197:{},198:{},199:{},200:{},201:{},202:{f:xa},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:wa},220:{},221:{f:xa},222:{},224:{f:eT},225:{f:O5},226:{f:pl},227:{},229:{f:uT},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:B5},253:{f:q5},255:{f:L5},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:i4},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:xa},353:{f:pl},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:aT},431:{f:xa},432:{},433:{},434:{},437:{},438:{f:mT},439:{f:xa},440:{f:gT},441:{},442:{f:ud},443:{},444:{f:wa},445:{},446:{},448:{f:pl},449:{f:U5,r:2},450:{f:pl},512:{f:w2},513:{f:jT},515:{f:rT},516:{f:$5},517:{f:N2},519:{f:CT},520:{f:P5},523:{},545:{f:C2},549:{f:v2},566:{},574:{f:V5},638:{f:K5},659:{},1048:{},1054:{f:Y5},1084:{},1212:{f:lT},2048:{f:pT},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Su},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:pl},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:wT,r:12},2173:{f:Z7,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:xa,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:iT,r:12},2197:{},2198:{f:X7,r:12},2199:{},2200:{},2201:{},2202:{f:oT,r:12},2203:{f:pl},2204:{},2205:{},2206:{},2207:{},2211:{f:z5},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:wa},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:kT},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:bT},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:w2},1:{},2:{f:TT},3:{f:ST},4:{f:AT},5:{f:N2},7:{f:RT},8:{},9:{f:Su},11:{},22:{f:wa},30:{f:W5},31:{},32:{},33:{f:C2},36:{},37:{f:v2},50:{f:DT},62:{},52:{},67:{},68:{f:wa},69:{},86:{},126:{},127:{f:_T},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:OT},223:{},234:{},354:{},421:{},518:{f:im},521:{f:Su},536:{f:E2},547:{f:j2},561:{},579:{},1030:{f:im},1033:{f:Su},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Nn(t,a,r,i){var l=a;if(!isNaN(l)){var d=(r||[]).length||0,f=t.next(4);f.write_shift(2,l),f.write_shift(2,d),d>0&&$w(r)&&t.push(r)}}function B2(t,a){var r=a||{},i=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var d=t.match(/<\/table/i),f=l.index,h=d&&d.index||t.length,b=rS(t.slice(f,h),/(:?<tr[^>]*>)/i,"<tr>"),p=-1,w=0,j=0,C=0,_={s:{r:1e7,c:1e7},e:{r:0,c:0}},R=[];for(f=0;f<b.length;++f){var A=b[f].trim(),O=A.slice(0,3).toLowerCase();if(O=="<tr"){if(++p,r.sheetRows&&r.sheetRows<=p){--p;break}w=0;continue}if(!(O!="<td"&&O!="<th")){var I=A.split(/<\/t[dh]>/i);for(h=0;h<I.length;++h){var M=I[h].trim();if(M.match(/<t[dh]/i)){for(var T=M,B=0;T.charAt(0)=="<"&&(B=T.indexOf(">"))>-1;)T=T.slice(B+1);for(var H=0;H<R.length;++H){var U=R[H];U.s.c==w&&U.s.r<p&&p<=U.e.r&&(w=U.e.c+1,H=-1)}var L=Gt(M.slice(0,M.indexOf(">")));C=L.colspan?+L.colspan:1,((j=+L.rowspan)>1||C>1)&&R.push({s:{r:p,c:w},e:{r:p+(j||1)-1,c:w+C-1}});var P=L.t||L["data-t"]||"";if(!T.length){w+=C;continue}if(T=Iw(T),_.s.r>p&&(_.s.r=p),_.e.r<p&&(_.e.r=p),_.s.c>w&&(_.s.c=w),_.e.c<w&&(_.e.c=w),!T.length){w+=C;continue}var z={t:"s",v:T};r.raw||!T.trim().length||P=="s"||(T==="TRUE"?z={t:"b",v:!0}:T==="FALSE"?z={t:"b",v:!1}:isNaN(_n(T))?isNaN(yc(T).getDate())||(z={t:"d",v:Ua(T)},r.cellDates||(z={t:"n",v:ks(z.v)}),z.z=r.dateNF||tr[14]):z={t:"n",v:_n(T)}),r.dense?(i[p]||(i[p]=[]),i[p][w]=z):i[Zt({r:p,c:w})]=z,w+=C}}}}return i["!ref"]=pr(_),R.length&&(i["!merges"]=R),i}function DO(t,a,r,i){for(var l=t["!merges"]||[],d=[],f=a.s.c;f<=a.e.c;++f){for(var h=0,b=0,p=0;p<l.length;++p)if(!(l[p].s.r>r||l[p].s.c>f)&&!(l[p].e.r<r||l[p].e.c<f)){if(l[p].s.r<r||l[p].s.c<f){h=-1;break}h=l[p].e.r-l[p].s.r+1,b=l[p].e.c-l[p].s.c+1;break}if(!(h<0)){var w=Zt({r,c:f}),j=i.dense?(t[r]||[])[f]:t[w],C=j&&j.v!=null&&(j.h||lg(j.w||(Fi(j),j.w)||""))||"",_={};h>1&&(_.rowspan=h),b>1&&(_.colspan=b),i.editable?C='<span contenteditable="true">'+C+"</span>":j&&(_["data-t"]=j&&j.t||"z",j.v!=null&&(_["data-v"]=j.v),j.z!=null&&(_["data-z"]=j.z),j.l&&(j.l.Target||"#").charAt(0)!="#"&&(C='<a href="'+j.l.Target+'">'+C+"</a>")),_.id=(i.id||"sjs")+"-"+w,d.push(yS("td",C,_))}}var R="<tr>";return R+d.join("")+"</tr>"}var OO='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',IO="</body></html>";function FO(t,a){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return _l(B2(r[0],a),a);var i=Eg();return r.forEach(function(l,d){Cg(i,B2(l,a),"Sheet"+(d+1))}),i}function MO(t,a,r){var i=[];return i.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function BO(t,a){var r=a||{},i=r.header!=null?r.header:OO,l=r.footer!=null?r.footer:IO,d=[i],f=_c(t["!ref"]);r.dense=Array.isArray(t),d.push(MO(t,f,r));for(var h=f.s.r;h<=f.e.r;++h)d.push(DO(t,f,h,r));return d.push("</table>"+l),d.join("")}function P4(t,a,r){var i=r||{},l=0,d=0;if(i.origin!=null)if(typeof i.origin=="number")l=i.origin;else{var f=typeof i.origin=="string"?vs(i.origin):i.origin;l=f.r,d=f.c}var h=a.getElementsByTagName("tr"),b=Math.min(i.sheetRows||1e7,h.length),p={s:{r:0,c:0},e:{r:l,c:d}};if(t["!ref"]){var w=_c(t["!ref"]);p.s.r=Math.min(p.s.r,w.s.r),p.s.c=Math.min(p.s.c,w.s.c),p.e.r=Math.max(p.e.r,w.e.r),p.e.c=Math.max(p.e.c,w.e.c),l==-1&&(p.e.r=l=w.e.r+1)}var j=[],C=0,_=t["!rows"]||(t["!rows"]=[]),R=0,A=0,O=0,I=0,M=0,T=0;for(t["!cols"]||(t["!cols"]=[]);R<h.length&&A<b;++R){var B=h[R];if(L2(B)){if(i.display)continue;_[A]={hidden:!0}}var H=B.children;for(O=I=0;O<H.length;++O){var U=H[O];if(!(i.display&&L2(U))){var L=U.hasAttribute("data-v")?U.getAttribute("data-v"):U.hasAttribute("v")?U.getAttribute("v"):Iw(U.innerHTML),P=U.getAttribute("data-z")||U.getAttribute("z");for(C=0;C<j.length;++C){var z=j[C];z.s.c==I+d&&z.s.r<A+l&&A+l<=z.e.r&&(I=z.e.c+1-d,C=-1)}T=+U.getAttribute("colspan")||1,((M=+U.getAttribute("rowspan")||1)>1||T>1)&&j.push({s:{r:A+l,c:I+d},e:{r:A+l+(M||1)-1,c:I+d+(T||1)-1}});var K={t:"s",v:L},te=U.getAttribute("data-t")||U.getAttribute("t")||"";L!=null&&(L.length==0?K.t=te||"z":i.raw||L.trim().length==0||te=="s"||(L==="TRUE"?K={t:"b",v:!0}:L==="FALSE"?K={t:"b",v:!1}:isNaN(_n(L))?isNaN(yc(L).getDate())||(K={t:"d",v:Ua(L)},i.cellDates||(K={t:"n",v:ks(K.v)}),K.z=i.dateNF||tr[14]):K={t:"n",v:_n(L)})),K.z===void 0&&P!=null&&(K.z=P);var V="",ne=U.getElementsByTagName("A");if(ne&&ne.length)for(var ie=0;ie<ne.length&&!(ne[ie].hasAttribute("href")&&(V=ne[ie].getAttribute("href"),V.charAt(0)!="#"));++ie);V&&V.charAt(0)!="#"&&(K.l={Target:V}),i.dense?(t[A+l]||(t[A+l]=[]),t[A+l][I+d]=K):t[Zt({c:I+d,r:A+l})]=K,p.e.c<I+d&&(p.e.c=I+d),I+=T}}++A}return j.length&&(t["!merges"]=(t["!merges"]||[]).concat(j)),p.e.r=Math.max(p.e.r,A-1+l),t["!ref"]=pr(p),A>=b&&(t["!fullref"]=pr((p.e.r=h.length-R+A-1+l,p))),t}function z4(t,a){var r=a||{},i=r.dense?[]:{};return P4(i,t,a)}function LO(t,a){return _l(z4(t,a),a)}function L2(t){var a="",r=PO(t);return r&&(a=r(t).getPropertyValue("display")),a||(a=t.style&&t.style.display),a==="none"}function PO(t){return t.ownerDocument.defaultView&&typeof t.ownerDocument.defaultView.getComputedStyle=="function"?t.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function zO(t){var a=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(i,l){return Array(parseInt(l,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=br(a.replace(/<[^>]*>/g,""));return[r]}var P2={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function U4(t,a){var r=a||{},i=og(t),l=[],d,f,h={name:""},b="",p=0,w,j,C={},_=[],R=r.dense?[]:{},A,O,I={value:""},M="",T=0,B=[],H=-1,U=-1,L={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,z={},K=[],te={},V=0,ne=0,ie=[],X=1,q=1,ce=[],we={Names:[]},oe={},fe=["",""],re=[],Q={},Y="",ae=0,se=!1,Z=!1,Re=0;for(q0.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");A=q0.exec(i);)switch(A[3]=A[3].replace(/_.*$/,"")){case"table":case"":A[1]==="/"?(L.e.c>=L.s.c&&L.e.r>=L.s.r?R["!ref"]=pr(L):R["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=L.e.r&&(R["!fullref"]=R["!ref"],L.e.r=r.sheetRows-1,R["!ref"]=pr(L)),K.length&&(R["!merges"]=K),ie.length&&(R["!rows"]=ie),w.name=w.||w.name,typeof JSON<"u"&&JSON.stringify(w),_.push(w.name),C[w.name]=R,Z=!1):A[0].charAt(A[0].length-2)!=="/"&&(w=Gt(A[0],!1),H=U=-1,L.s.r=L.s.c=1e7,L.e.r=L.e.c=0,R=r.dense?[]:{},K=[],ie=[],Z=!0);break;case"table-row-group":A[1]==="/"?--P:++P;break;case"table-row":case"":if(A[1]==="/"){H+=X,X=1;break}if(j=Gt(A[0],!1),j.?H=j.-1:H==-1&&(H=0),X=+j["number-rows-repeated"]||1,X<10)for(Re=0;Re<X;++Re)P>0&&(ie[H+Re]={level:P});U=-1;break;case"covered-table-cell":A[1]!=="/"&&++U,r.sheetStubs&&(r.dense?(R[H]||(R[H]=[]),R[H][U]={t:"z"}):R[Zt({r:H,c:U})]={t:"z"}),M="",B=[];break;case"table-cell":case"":if(A[0].charAt(A[0].length-2)==="/")++U,I=Gt(A[0],!1),q=parseInt(I["number-columns-repeated"]||"1",10),O={t:"z",v:null},I.formula&&r.cellFormula!=!1&&(O.f=O2(br(I.formula))),(I.||I["value-type"])=="string"&&(O.t="s",O.v=br(I["string-value"]||""),r.dense?(R[H]||(R[H]=[]),R[H][U]=O):R[Zt({r:H,c:U})]=O),U+=q-1;else if(A[1]!=="/"){++U,M="",T=0,B=[],q=1;var je=X?H+X-1:H;if(U>L.e.c&&(L.e.c=U),U<L.s.c&&(L.s.c=U),H<L.s.r&&(L.s.r=H),je>L.e.r&&(L.e.r=je),I=Gt(A[0],!1),re=[],Q={},O={t:I.||I["value-type"],v:null},r.cellFormula)if(I.formula&&(I.formula=br(I.formula)),I["number-matrix-columns-spanned"]&&I["number-matrix-rows-spanned"]&&(V=parseInt(I["number-matrix-rows-spanned"],10)||0,ne=parseInt(I["number-matrix-columns-spanned"],10)||0,te={s:{r:H,c:U},e:{r:H+V-1,c:U+ne-1}},O.F=pr(te),ce.push([te,O.F])),I.formula)O.f=O2(I.formula);else for(Re=0;Re<ce.length;++Re)H>=ce[Re][0].s.r&&H<=ce[Re][0].e.r&&U>=ce[Re][0].s.c&&U<=ce[Re][0].e.c&&(O.F=ce[Re][1]);switch((I["number-columns-spanned"]||I["number-rows-spanned"])&&(V=parseInt(I["number-rows-spanned"],10)||0,ne=parseInt(I["number-columns-spanned"],10)||0,te={s:{r:H,c:U},e:{r:H+V-1,c:U+ne-1}},K.push(te)),I["number-columns-repeated"]&&(q=parseInt(I["number-columns-repeated"],10)),O.t){case"boolean":O.t="b",O.v=Yr(I["boolean-value"]);break;case"float":O.t="n",O.v=parseFloat(I.value);break;case"percentage":O.t="n",O.v=parseFloat(I.value);break;case"currency":O.t="n",O.v=parseFloat(I.value);break;case"date":O.t="d",O.v=Ua(I["date-value"]),r.cellDates||(O.t="n",O.v=ks(O.v)),O.z="m/d/yy";break;case"time":O.t="n",O.v=JA(I["time-value"])/86400,r.cellDates&&(O.t="d",O.v=Nf(O.v)),O.z="HH:MM:SS";break;case"number":O.t="n",O.v=parseFloat(I.);break;default:if(O.t==="string"||O.t==="text"||!O.t)O.t="s",I["string-value"]!=null&&(M=br(I["string-value"]),B=[]);else throw new Error("Unsupported value type "+O.t)}}else{if(se=!1,O.t==="s"&&(O.v=M||"",B.length&&(O.R=B),se=T==0),oe.Target&&(O.l=oe),re.length>0&&(O.c=re,re=[]),M&&r.cellText!==!1&&(O.w=M),se&&(O.t="z",delete O.v),(!se||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var Ue=0;Ue<X;++Ue){if(q=parseInt(I["number-columns-repeated"]||"1",10),r.dense)for(R[H+Ue]||(R[H+Ue]=[]),R[H+Ue][U]=Ue==0?O:$a(O);--q>0;)R[H+Ue][U+q]=$a(O);else for(R[Zt({r:H+Ue,c:U})]=O;--q>0;)R[Zt({r:H+Ue,c:U+q})]=$a(O);L.e.c<=U&&(L.e.c=U)}q=parseInt(I["number-columns-repeated"]||"1",10),U+=q-1,q=0,O={},M="",B=[]}oe={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!0]);break;case"annotation":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d;Q.t=M,B.length&&(Q.R=B),Q.a=Y,re.push(Q)}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);Y="",ae=0,M="",T=0,B=[];break;case"creator":A[1]==="/"?Y=i.slice(ae,A.index):ae=A.index+A[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(A[1]==="/"){if((d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&l.push([A[3],!1]);M="",T=0,B=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(A[1]==="/"){if(z[h.name]=b,(d=l.pop())[0]!==A[3])throw"Bad state: "+d}else A[0].charAt(A[0].length-2)!=="/"&&(b="",h=Gt(A[0],!1),l.push([A[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Gt(A[0],!1),b+=P2[A[3]][f.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(l[l.length-1][0]){case"time-style":case"date-style":f=Gt(A[0],!1),b+=P2[A[3]][f.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(A[0].slice(-2)==="/>")break;if(A[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":b+=i.slice(p,A.index);break}else p=A.index+A[0].length;break;case"named-range":f=Gt(A[0],!1),fe=lm(f["cell-range-address"]);var Me={Name:f.name,Ref:fe[0]+"!"+fe[1]};Z&&(Me.Sheet=_.length),we.Names.push(Me);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(A[1]==="/"&&(!I||!I["string-value"])){var at=zO(i.slice(T,A.index));M=(M.length>0?M+`
`:"")+at[0]}else Gt(A[0],!1),T=A.index+A[0].length;break;case"s":break;case"database-range":if(A[1]==="/")break;try{fe=lm(Gt(A[0])["target-range-address"]),C[fe[0]]["!autofilter"]={ref:fe[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(A[1]!=="/"){if(oe=Gt(A[0],!1),!oe.href)break;oe.Target=br(oe.href),delete oe.href,oe.Target.charAt(0)=="#"&&oe.Target.indexOf(".")>-1?(fe=lm(oe.Target.slice(1)),oe.Target="#"+fe[0]+"!"+fe[1]):oe.Target.match(/^\.\.[\\\/]/)&&(oe.Target=oe.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(A[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(A)}}var ye={Sheets:C,SheetNames:_,Workbook:we};return r.bookSheets&&delete ye.Sheets,ye}function z2(t,a){a=a||{},cn(t,"META-INF/manifest.xml")&&r5(va(t,"META-INF/manifest.xml"),a);var r=qs(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var i=U4(zr(r),a);return cn(t,"meta.xml")&&(i.Props=e4(va(t,"meta.xml"))),i}function U2(t,a){return U4(t,a)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function wg(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function Lm(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):zr(yo(t))}function Pm(t){var a=t.reduce(function(l,d){return l+d.length},0),r=new Uint8Array(a),i=0;return t.forEach(function(l){r.set(l,i),i+=l.length}),r}function H2(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function UO(t,a){for(var r=(t[a+15]&127)<<7|t[a+14]>>1,i=t[a+14]&1,l=a+13;l>=a;--l)i=i*256+t[l];return(t[a+15]&128?-i:i)*Math.pow(10,r-6176)}function K0(t,a){var r=a?a[0]:0,i=t[r]&127;e:if(t[r++]>=128&&(i|=(t[r]&127)<<7,t[r++]<128||(i|=(t[r]&127)<<14,t[r++]<128)||(i|=(t[r]&127)<<21,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return a&&(a[0]=r),i}function Ia(t){var a=0,r=t[a]&127;e:if(t[a++]>=128){if(r|=(t[a]&127)<<7,t[a++]<128||(r|=(t[a]&127)<<14,t[a++]<128)||(r|=(t[a]&127)<<21,t[a++]<128))break e;r|=(t[a]&127)<<28}return r}function os(t){for(var a=[],r=[0];r[0]<t.length;){var i=r[0],l=K0(t,r),d=l&7;l=Math.floor(l/8);var f=0,h;if(l==0)break;switch(d){case 0:{for(var b=r[0];t[r[0]++]>=128;);h=t.slice(b,r[0])}break;case 5:f=4,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 1:f=8,h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 2:f=K0(t,r),h=t.slice(r[0],r[0]+f),r[0]+=f;break;case 3:case 4:default:throw new Error("PB Type ".concat(d," for Field ").concat(l," at offset ").concat(i))}var p={data:h,type:d};a[l]==null?a[l]=[p]:a[l].push(p)}return a}function Ng(t,a){return t?.map(function(r){return a(r.data)})||[]}function HO(t){for(var a,r=[],i=[0];i[0]<t.length;){var l=K0(t,i),d=os(t.slice(i[0],i[0]+l));i[0]+=l;var f={id:Ia(d[1][0].data),messages:[]};d[2].forEach(function(h){var b=os(h.data),p=Ia(b[3][0].data);f.messages.push({meta:b,data:t.slice(i[0],i[0]+p)}),i[0]+=p}),(a=d[3])!=null&&a[0]&&(f.merge=Ia(d[3][0].data)>>>0>0),r.push(f)}return r}function VO(t,a){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],i=K0(a,r),l=[];r[0]<a.length;){var d=a[r[0]]&3;if(d==0){var f=a[r[0]++]>>2;if(f<60)++f;else{var h=f-59;f=a[r[0]],h>1&&(f|=a[r[0]+1]<<8),h>2&&(f|=a[r[0]+2]<<16),h>3&&(f|=a[r[0]+3]<<24),f>>>=0,f++,r[0]+=h}l.push(a.slice(r[0],r[0]+f)),r[0]+=f;continue}else{var b=0,p=0;if(d==1?(p=(a[r[0]]>>2&7)+4,b=(a[r[0]++]&224)<<3,b|=a[r[0]++]):(p=(a[r[0]++]>>2)+1,d==2?(b=a[r[0]]|a[r[0]+1]<<8,r[0]+=2):(b=(a[r[0]]|a[r[0]+1]<<8|a[r[0]+2]<<16|a[r[0]+3]<<24)>>>0,r[0]+=4)),l=[Pm(l)],b==0)throw new Error("Invalid offset 0");if(b>l[0].length)throw new Error("Invalid offset beyond length");if(p>=b)for(l.push(l[0].slice(-b)),p-=b;p>=l[l.length-1].length;)l.push(l[l.length-1]),p-=l[l.length-1].length;l.push(l[0].slice(-b,-b+p))}}var w=Pm(l);if(w.length!=i)throw new Error("Unexpected length: ".concat(w.length," != ").concat(i));return w}function GO(t){for(var a=[],r=0;r<t.length;){var i=t[r++],l=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,a.push(VO(i,t.slice(r,r+l))),r+=l}if(r!==t.length)throw new Error("data is not a valid framed stream!");return Pm(a)}function XO(t,a,r,i){var l=wg(t),d=l.getUint32(4,!0),f=(i>1?12:8)+H2(d&(i>1?3470:398))*4,h=-1,b=-1,p=NaN,w=new Date(2001,0,1);d&512&&(h=l.getUint32(f,!0),f+=4),f+=H2(d&(i>1?12288:4096))*4,d&16&&(b=l.getUint32(f,!0),f+=4),d&32&&(p=l.getFloat64(f,!0),f+=8),d&64&&(w.setTime(w.getTime()+l.getFloat64(f,!0)*1e3),f+=8);var j;switch(t[2]){case 0:break;case 2:j={t:"n",v:p};break;case 3:j={t:"s",v:a[b]};break;case 5:j={t:"d",v:w};break;case 6:j={t:"b",v:p>0};break;case 7:j={t:"n",v:p/86400};break;case 8:j={t:"e",v:0};break;case 9:if(h>-1)j={t:"s",v:r[h]};else if(b>-1)j={t:"s",v:a[b]};else if(!isNaN(p))j={t:"n",v:p};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return j}function qO(t,a,r){var i=wg(t),l=i.getUint32(8,!0),d=12,f=-1,h=-1,b=NaN,p=NaN,w=new Date(2001,0,1);l&1&&(b=UO(t,d),d+=16),l&2&&(p=i.getFloat64(d,!0),d+=8),l&4&&(w.setTime(w.getTime()+i.getFloat64(d,!0)*1e3),d+=8),l&8&&(h=i.getUint32(d,!0),d+=4),l&16&&(f=i.getUint32(d,!0),d+=4);var j;switch(t[1]){case 0:break;case 2:j={t:"n",v:b};break;case 3:j={t:"s",v:a[h]};break;case 5:j={t:"d",v:w};break;case 6:j={t:"b",v:p>0};break;case 7:j={t:"n",v:p/86400};break;case 8:j={t:"e",v:0};break;case 9:if(f>-1)j={t:"s",v:r[f]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)));break;case 10:j={t:"n",v:b};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)))}return j}function $O(t,a,r){switch(t[0]){case 0:case 1:case 2:case 3:return XO(t,a,r,t[0]);case 5:return qO(t,a,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function wl(t){var a=os(t);return K0(a[1][0].data)}function V2(t,a){var r=os(a.data),i=Ia(r[1][0].data),l=r[3],d=[];return(l||[]).forEach(function(f){var h=os(f.data),b=Ia(h[1][0].data)>>>0;switch(i){case 1:d[b]=Lm(h[3][0].data);break;case 8:{var p=t[wl(h[9][0].data)][0],w=os(p.data),j=t[wl(w[1][0].data)][0],C=Ia(j.meta[1][0].data);if(C!=2001)throw new Error("2000 unexpected reference to ".concat(C));var _=os(j.data);d[b]=_[3].map(function(R){return Lm(R.data)}).join("")}break}}),d}function YO(t,a){var r,i,l,d,f,h,b,p,w,j,C,_,R,A,O=os(t),I=Ia(O[1][0].data)>>>0,M=Ia(O[2][0].data)>>>0,T=((i=(r=O[8])==null?void 0:r[0])==null?void 0:i.data)&&Ia(O[8][0].data)>0||!1,B,H;if((d=(l=O[7])==null?void 0:l[0])!=null&&d.data&&a!=0)B=(h=(f=O[7])==null?void 0:f[0])==null?void 0:h.data,H=(p=(b=O[6])==null?void 0:b[0])==null?void 0:p.data;else if((j=(w=O[4])==null?void 0:w[0])!=null&&j.data&&a!=1)B=(_=(C=O[4])==null?void 0:C[0])==null?void 0:_.data,H=(A=(R=O[3])==null?void 0:R[0])==null?void 0:A.data;else throw"NUMBERS Tile missing ".concat(a," cell storage");for(var U=T?4:1,L=wg(B),P=[],z=0;z<B.length/2;++z){var K=L.getUint16(z*2,!0);K<65535&&P.push([z,K])}if(P.length!=M)throw"Expected ".concat(M," cells, found ").concat(P.length);var te=[];for(z=0;z<P.length-1;++z)te[P[z][0]]=H.subarray(P[z][1]*U,P[z+1][1]*U);return P.length>=1&&(te[P[P.length-1][0]]=H.subarray(P[P.length-1][1]*U)),{R:I,cells:te}}function WO(t,a){var r,i=os(a.data),l=(r=i?.[7])!=null&&r[0]?Ia(i[7][0].data)>>>0>0?1:0:-1,d=Ng(i[5],function(f){return YO(f,l)});return{nrows:Ia(i[4][0].data)>>>0,data:d.reduce(function(f,h){return f[h.R]||(f[h.R]=[]),h.cells.forEach(function(b,p){if(f[h.R][p])throw new Error("Duplicate cell r=".concat(h.R," c=").concat(p));f[h.R][p]=b}),f},[])}}function KO(t,a,r){var i,l=os(a.data),d={s:{r:0,c:0},e:{r:0,c:0}};if(d.e.r=(Ia(l[6][0].data)>>>0)-1,d.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(d.e.c=(Ia(l[7][0].data)>>>0)-1,d.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=pr(d);var f=os(l[4][0].data),h=V2(t,t[wl(f[4][0].data)][0]),b=(i=f[17])!=null&&i[0]?V2(t,t[wl(f[17][0].data)][0]):[],p=os(f[3][0].data),w=0;p[1].forEach(function(j){var C=os(j.data),_=t[wl(C[2][0].data)][0],R=Ia(_.meta[1][0].data);if(R!=6002)throw new Error("6001 unexpected reference to ".concat(R));var A=WO(t,_);A.data.forEach(function(O,I){O.forEach(function(M,T){var B=Zt({r:w+I,c:T}),H=$O(M,h,b);H&&(r[B]=H)})}),w+=A.nrows})}function ZO(t,a){var r=os(a.data),i={"!ref":"A1"},l=t[wl(r[2][0].data)],d=Ia(l[0].meta[1][0].data);if(d!=6001)throw new Error("6000 unexpected reference to ".concat(d));return KO(t,l[0],i),i}function QO(t,a){var r,i=os(a.data),l={name:(r=i[1])!=null&&r[0]?Lm(i[1][0].data):"",sheets:[]},d=Ng(i[2],wl);return d.forEach(function(f){t[f].forEach(function(h){var b=Ia(h.meta[1][0].data);b==6e3&&l.sheets.push(ZO(t,h))})}),l}function JO(t,a){var r=Eg(),i=os(a.data),l=Ng(i[1],wl);if(l.forEach(function(d){t[d].forEach(function(f){var h=Ia(f.meta[1][0].data);if(h==2){var b=QO(t,f);b.sheets.forEach(function(p,w){Cg(r,p,w==0?b.name:b.name+"_"+w,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function cm(t){var a,r,i,l,d={},f=[];if(t.FullPaths.forEach(function(b){if(b.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(b){if(b.name.match(/\.iwa$/)){var p;try{p=GO(b.content)}catch(j){return console.log("?? "+b.content.length+" "+(j.message||j))}var w;try{w=HO(p)}catch(j){return console.log("## "+(j.message||j))}w.forEach(function(j){d[j.id]=j.messages,f.push(j.id)})}}),!f.length)throw new Error("File has no messages");var h=((l=(i=(r=(a=d?.[1])==null?void 0:a[0])==null?void 0:r.meta)==null?void 0:i[1])==null?void 0:l[0].data)&&Ia(d[1][0].meta[1][0].data)==1&&d[1][0];if(h||f.forEach(function(b){d[b].forEach(function(p){var w=Ia(p.meta[1][0].data)>>>0;if(w==1)if(!h)h=p;else throw new Error("Document has multiple roots")})}),!h)throw new Error("Cannot find Document root");return JO(d,h)}function eI(t){return function(r){for(var i=0;i!=t.length;++i){var l=t[i];r[l[0]]===void 0&&(r[l[0]]=l[1]),l[2]==="n"&&(r[l[0]]=Number(r[l[0]]))}}}function kg(t){eI([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function tI(t){return dc.WS.indexOf(t)>-1?"sheet":t==dc.CS?"chart":t==dc.DS?"dialog":t==dc.MS?"macro":t&&t.length?t:"sheet"}function rI(t,a){if(!t)return 0;try{t=a.map(function(i){return i.id||(i.id=i.strRelID),[i.name,t["!id"][i.id].Target,tI(t["!id"][i.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function aI(t,a,r,i,l,d,f,h,b,p,w,j){try{d[i]=R0(qs(t,r,!0),a);var C=va(t,a),_;switch(h){case"sheet":_=cO(C,a,l,b,d[i],p,w,j);break;case"chart":if(_=dO(C,a,l,b,d[i],p,w,j),!_||!_["!drawel"])break;var R=C0(_["!drawel"].Target,a),A=Om(R),O=o9(qs(t,R,!0),R0(qs(t,A,!0),R)),I=C0(O,R),M=Om(I);_=qD(qs(t,I,!0),I,b,R0(qs(t,M,!0),I),p,_);break;case"macro":_=uO(C,a,l,b,d[i],p,w,j);break;case"dialog":_=fO(C,a,l,b,d[i],p,w,j);break;default:throw new Error("Unrecognized sheet type "+h)}f[i]=_;var T=[];d&&d[i]&&ti(d[i]).forEach(function(B){var H="";if(d[i][B].Type==dc.CMNT){H=C0(d[i][B].Target,a);var U=gO(va(t,H,!0),H,b);if(!U||!U.length)return;A2(_,U,!1)}d[i][B].Type==dc.TCMNT&&(H=C0(d[i][B].Target,a),T=T.concat(d9(va(t,H,!0),b)))}),T&&T.length&&A2(_,T,!0,b.people||[])}catch(B){if(b.WTF)throw B}}function ln(t){return t.charAt(0)=="/"?t.slice(1):t}function sI(t,a){if(Ew(),a=a||{},kg(a),cn(t,"META-INF/manifest.xml")||cn(t,"objectdata.xml"))return z2(t,a);if(cn(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof cm<"u"){if(t.FileIndex)return cm(t);var r=gr.utils.cfb_new();return t2(t).forEach(function(ie){nS(r,ie,sS(t,ie))}),cm(r)}throw new Error("Unsupported NUMBERS file")}if(!cn(t,"[Content_Types].xml"))throw cn(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):cn(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var i=t2(t),l=e5(qs(t,"[Content_Types].xml")),d=!1,f,h;if(l.workbooks.length===0&&(h="xl/workbook.xml",va(t,h,!0)&&l.workbooks.push(h)),l.workbooks.length===0){if(h="xl/workbook.bin",!va(t,h,!0))throw new Error("Could not find workbook");l.workbooks.push(h),d=!0}l.workbooks[0].slice(-3)=="bin"&&(d=!0);var b={},p={};if(!a.bookSheets&&!a.bookProps){if(I0=[],l.sst)try{I0=mO(va(t,ln(l.sst)),l.sst,a)}catch(ie){if(a.WTF)throw ie}a.cellStyles&&l.themes.length&&(b=hO(qs(t,l.themes[0].replace(/^\//,""),!0)||"",l.themes[0],a)),l.style&&(p=xO(va(t,ln(l.style)),l.style,b,a))}l.links.map(function(ie){try{var X=R0(qs(t,Om(ln(ie))),ie);return yO(va(t,ln(ie)),X,ie,a)}catch{}});var w=oO(va(t,ln(l.workbooks[0])),l.workbooks[0],a),j={},C="";l.coreprops.length&&(C=va(t,ln(l.coreprops[0]),!0),C&&(j=e4(C)),l.extprops.length!==0&&(C=va(t,ln(l.extprops[0]),!0),C&&n5(C,j,a)));var _={};(!a.bookSheets||a.bookProps)&&l.custprops.length!==0&&(C=qs(t,ln(l.custprops[0]),!0),C&&(_=l5(C,a)));var R={};if((a.bookSheets||a.bookProps)&&(w.Sheets?f=w.Sheets.map(function(X){return X.name}):j.Worksheets&&j.SheetNames.length>0&&(f=j.SheetNames),a.bookProps&&(R.Props=j,R.Custprops=_),a.bookSheets&&typeof f<"u"&&(R.SheetNames=f),a.bookSheets?R.SheetNames:a.bookProps))return R;f={};var A={};a.bookDeps&&l.calcchain&&(A=pO(va(t,ln(l.calcchain)),l.calcchain));var O=0,I={},M,T;{var B=w.Sheets;j.Worksheets=B.length,j.SheetNames=[];for(var H=0;H!=B.length;++H)j.SheetNames[H]=B[H].name}var U=d?"bin":"xml",L=l.workbooks[0].lastIndexOf("/"),P=(l.workbooks[0].slice(0,L+1)+"_rels/"+l.workbooks[0].slice(L+1)+".rels").replace(/^\//,"");cn(t,P)||(P="xl/_rels/workbook."+U+".rels");var z=R0(qs(t,P,!0),P.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(a.xlmeta=bO(va(t,ln(l.metadata[0])),l.metadata[0],a)),(l.people||[]).length>=1&&(a.people=u9(va(t,ln(l.people[0])),a)),z&&(z=rI(z,w.Sheets));var K=va(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(O=0;O!=j.Worksheets;++O){var te="sheet";if(z&&z[O]?(M="xl/"+z[O][1].replace(/[\/]?xl\//,""),cn(t,M)||(M=z[O][1]),cn(t,M)||(M=P.replace(/_rels\/.*$/,"")+z[O][1]),te=z[O][2]):(M="xl/worksheets/sheet"+(O+1-K)+"."+U,M=M.replace(/sheet0\./,"sheet.")),T=M.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),a&&a.sheets!=null)switch(typeof a.sheets){case"number":if(O!=a.sheets)continue e;break;case"string":if(j.SheetNames[O].toLowerCase()!=a.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(a.sheets)){for(var V=!1,ne=0;ne!=a.sheets.length;++ne)typeof a.sheets[ne]=="number"&&a.sheets[ne]==O&&(V=1),typeof a.sheets[ne]=="string"&&a.sheets[ne].toLowerCase()==j.SheetNames[O].toLowerCase()&&(V=1);if(!V)continue e}}aI(t,M,T,j.SheetNames[O],O,I,f,te,a,w,b,p)}return R={Directory:l,Workbook:w,Props:j,Custprops:_,Deps:A,Sheets:f,SheetNames:j.SheetNames,Strings:I0,Styles:p,Themes:b,SSF:$a(tr)},a&&a.bookFiles&&(t.files?(R.keys=i,R.files=t.files):(R.keys=[],R.files={},t.FullPaths.forEach(function(ie,X){ie=ie.replace(/^Root Entry[\/]/,""),R.keys.push(ie),R.files[ie]=t.FileIndex[X]}))),a&&a.bookVBA&&(l.vba.length>0?R.vbaraw=va(t,ln(l.vba[0]),!0):l.defaults&&l.defaults.bin===m9&&(R.vbaraw=va(t,"xl/vbaProject.bin",!0))),R}function nI(t,a){var r=a||{},i="Workbook",l=gr.find(t,i);try{if(i="/!DataSpaces/Version",l=gr.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(ZT(l.content),i="/!DataSpaces/DataSpaceMap",l=gr.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var d=JT(l.content);if(d.length!==1||d[0].comps.length!==1||d[0].comps[0].t!==0||d[0].name!=="StrongEncryptionDataSpace"||d[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",l=gr.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var f=e7(l.content);if(f.length!=1||f[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",l=gr.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);r7(l.content)}catch{}if(i="/EncryptionInfo",l=gr.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var h=a7(l.content);if(i="/EncryptedPackage",l=gr.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(h[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(h[1],l.content,r.password||"",r);if(h[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(h[1],l.content,r.password||"",r);throw new Error("File is password-protected")}function jg(t,a){var r="";switch((a||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Ws(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(a&&a.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function iI(t,a){return gr.find(t,"EncryptedPackage")?nI(t,a):L4(t,a)}function lI(t,a){var r,i=t,l=a||{};return l.type||(l.type=fr&&Buffer.isBuffer(t)?"buffer":"base64"),r=Rw(i,l),sI(r,l)}function H4(t,a){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Mm(t.slice(r),a);default:break e}return $0.to_workbook(t,a)}function oI(t,a){var r="",i=jg(t,a);switch(a.type){case"base64":r=Ws(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=xo(t);break;default:throw new Error("Unrecognized type "+a.type)}return i[0]==239&&i[1]==187&&i[2]==191&&(r=zr(r)),a.type="binary",H4(r,a)}function cI(t,a){var r=t;return a.type=="base64"&&(r=Ws(r)),r=V0.utils.decode(1200,r.slice(2),"str"),a.type="binary",H4(r,a)}function dI(t){return t.match(/[^\x00-\x7F]/)?_0(t):t}function dm(t,a,r,i){return i?(r.type="string",$0.to_workbook(t,r)):$0.to_workbook(a,r)}function zm(t,a){xw();var r=a||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return zm(new Uint8Array(t),(r=$a(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var i=t,l=[0,0,0,0],d=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),hc={},r.dateNF&&(hc.dateNF=r.dateNF),r.type||(r.type=fr&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=fr?"buffer":"binary",i=ZA(t),typeof Uint8Array<"u"&&!fr&&(r.type="array")),r.type=="string"&&(d=!0,r.type="binary",r.codepage=65001,i=dI(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var f=new ArrayBuffer(3),h=new Uint8Array(f);if(h.foo="bar",!h.foo)return r=$a(r),r.type="array",zm(rg(i),r)}switch((l=jg(i,r))[0]){case 208:if(l[1]===207&&l[2]===17&&l[3]===224&&l[4]===161&&l[5]===177&&l[6]===26&&l[7]===225)return iI(gr.read(i,r),r);break;case 9:if(l[1]<=8)return L4(i,r);break;case 60:return Mm(i,r);case 73:if(l[1]===73&&l[2]===42&&l[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(l[1]===68)return LT(i,r);break;case 84:if(l[1]===65&&l[2]===66&&l[3]===76)return MT.to_workbook(i,r);break;case 80:return l[1]===75&&l[2]<9&&l[3]<9?lI(i,r):dm(t,i,r,d);case 239:return l[3]===60?Mm(i,r):dm(t,i,r,d);case 255:if(l[1]===254)return cI(i,r);if(l[1]===0&&l[2]===2&&l[3]===0)return O0.to_workbook(i,r);break;case 0:if(l[1]===0&&(l[2]>=2&&l[3]===0||l[2]===0&&(l[3]===8||l[3]===9)))return O0.to_workbook(i,r);break;case 3:case 131:case 139:case 140:return _2.to_workbook(i,r);case 123:if(l[1]===92&&l[2]===114&&l[3]===116)return m7.to_workbook(i,r);break;case 10:case 13:case 32:return oI(i,r);case 137:if(l[1]===80&&l[2]===78&&l[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return IT.indexOf(l[0])>-1&&l[2]<=12&&l[3]<=31?_2.to_workbook(i,r):dm(t,i,r,d)}function uI(t,a,r,i,l,d,f,h){var b=Ya(r),p=h.defval,w=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),j=!0,C=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(C,"__rowNum__",{value:r,enumerable:!1})}catch{C.__rowNum__=r}else C.__rowNum__=r;if(!f||t[r])for(var _=a.s.c;_<=a.e.c;++_){var R=f?t[r][_]:t[i[_]+b];if(R===void 0||R.t===void 0){if(p===void 0)continue;d[_]!=null&&(C[d[_]]=p);continue}var A=R.v;switch(R.t){case"z":if(A==null)break;continue;case"e":A=A==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+R.t)}if(d[_]!=null){if(A==null)if(R.t=="e"&&A===null)C[d[_]]=null;else if(p!==void 0)C[d[_]]=p;else if(w&&A===null)C[d[_]]=null;else continue;else C[d[_]]=w&&(R.t!=="n"||R.t==="n"&&h.rawNumbers!==!1)?A:Fi(R,A,h);A!=null&&(j=!1)}}return{row:C,isempty:j}}function Um(t,a){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},i=0,l=1,d=[],f=0,h="",b={s:{r:0,c:0},e:{r:0,c:0}},p=a||{},w=p.range!=null?p.range:t["!ref"];switch(p.header===1?i=1:p.header==="A"?i=2:Array.isArray(p.header)?i=3:p.header==null&&(i=0),typeof w){case"string":b=ia(w);break;case"number":b=ia(t["!ref"]),b.s.r=w;break;default:b=w}i>0&&(l=0);var j=Ya(b.s.r),C=[],_=[],R=0,A=0,O=Array.isArray(t),I=b.s.r,M=0,T={};O&&!t[I]&&(t[I]=[]);var B=p.skipHidden&&t["!cols"]||[],H=p.skipHidden&&t["!rows"]||[];for(M=b.s.c;M<=b.e.c;++M)if(!(B[M]||{}).hidden)switch(C[M]=Oa(M),r=O?t[I][M]:t[C[M]+j],i){case 1:d[M]=M-b.s.c;break;case 2:d[M]=C[M];break;case 3:d[M]=p.header[M-b.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=f=Fi(r,null,p),A=T[f]||0,!A)T[f]=1;else{do h=f+"_"+A++;while(T[h]);T[f]=A,T[h]=1}d[M]=h}for(I=b.s.r+l;I<=b.e.r;++I)if(!(H[I]||{}).hidden){var U=uI(t,b,I,C,i,d,O,p);(U.isempty===!1||(i===1?p.blankrows!==!1:p.blankrows))&&(_[R++]=U.row)}return _.length=R,_}var G2=/"/g;function fI(t,a,r,i,l,d,f,h){for(var b=!0,p=[],w="",j=Ya(r),C=a.s.c;C<=a.e.c;++C)if(i[C]){var _=h.dense?(t[r]||[])[C]:t[i[C]+j];if(_==null)w="";else if(_.v!=null){b=!1,w=""+(h.rawNumbers&&_.t=="n"?_.v:Fi(_,null,h));for(var R=0,A=0;R!==w.length;++R)if((A=w.charCodeAt(R))===l||A===d||A===34||h.forceQuotes){w='"'+w.replace(G2,'""')+'"';break}w=="ID"&&(w='"ID"')}else _.f!=null&&!_.F?(b=!1,w="="+_.f,w.indexOf(",")>=0&&(w='"'+w.replace(G2,'""')+'"')):w="";p.push(w)}return h.blankrows===!1&&b?null:p.join(f)}function V4(t,a){var r=[],i=a??{};if(t==null||t["!ref"]==null)return"";var l=ia(t["!ref"]),d=i.FS!==void 0?i.FS:",",f=d.charCodeAt(0),h=i.RS!==void 0?i.RS:`
`,b=h.charCodeAt(0),p=new RegExp((d=="|"?"\\|":d)+"+$"),w="",j=[];i.dense=Array.isArray(t);for(var C=i.skipHidden&&t["!cols"]||[],_=i.skipHidden&&t["!rows"]||[],R=l.s.c;R<=l.e.c;++R)(C[R]||{}).hidden||(j[R]=Oa(R));for(var A=0,O=l.s.r;O<=l.e.r;++O)(_[O]||{}).hidden||(w=fI(t,l,O,j,f,b,d,i),w!=null&&(i.strip&&(w=w.replace(p,"")),(w||i.blankrows!==!1)&&r.push((A++?h:"")+w)));return delete i.dense,r.join("")}function xI(t,a){a||(a={}),a.FS="	",a.RS=`
`;var r=V4(t,a);return r}function hI(t){var a="",r,i="";if(t==null||t["!ref"]==null)return[];var l=ia(t["!ref"]),d="",f=[],h,b=[],p=Array.isArray(t);for(h=l.s.c;h<=l.e.c;++h)f[h]=Oa(h);for(var w=l.s.r;w<=l.e.r;++w)for(d=Ya(w),h=l.s.c;h<=l.e.c;++h)if(a=f[h]+d,r=p?(t[w]||[])[h]:t[a],i="",r!==void 0){if(r.F!=null){if(a=r.F,!r.f)continue;i=r.f,a.indexOf(":")==-1&&(a=a+":"+a)}if(r.f!=null)i=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)i=""+r.v;else if(r.t=="b")i=r.v?"TRUE":"FALSE";else if(r.w!==void 0)i="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?i="'"+r.v:i=""+r.v}}b[b.length]=a+"="+i}return b}function G4(t,a,r){var i=r||{},l=+!i.skipHeader,d=t||{},f=0,h=0;if(d&&i.origin!=null)if(typeof i.origin=="number")f=i.origin;else{var b=typeof i.origin=="string"?vs(i.origin):i.origin;f=b.r,h=b.c}var p,w={s:{c:0,r:0},e:{c:h,r:f+a.length-1+l}};if(d["!ref"]){var j=ia(d["!ref"]);w.e.c=Math.max(w.e.c,j.e.c),w.e.r=Math.max(w.e.r,j.e.r),f==-1&&(f=j.e.r+1,w.e.r=f+a.length-1+l)}else f==-1&&(f=0,w.e.r=a.length-1+l);var C=i.header||[],_=0;a.forEach(function(A,O){ti(A).forEach(function(I){(_=C.indexOf(I))==-1&&(C[_=C.length]=I);var M=A[I],T="z",B="",H=Zt({c:h+_,r:f+O+l});p=Z0(d,H),M&&typeof M=="object"&&!(M instanceof Date)?d[H]=M:(typeof M=="number"?T="n":typeof M=="boolean"?T="b":typeof M=="string"?T="s":M instanceof Date?(T="d",i.cellDates||(T="n",M=ks(M)),B=i.dateNF||tr[14]):M===null&&i.nullError&&(T="e",M=0),p?(p.t=T,p.v=M,delete p.w,delete p.R,B&&(p.z=B)):d[H]=p={t:T,v:M},B&&(p.z=B))})}),w.e.c=Math.max(w.e.c,h+C.length-1);var R=Ya(f);if(l)for(_=0;_<C.length;++_)d[Oa(_+h)+R]={t:"s",v:C[_]};return d["!ref"]=pr(w),d}function mI(t,a){return G4(null,t,a)}function Z0(t,a,r){if(typeof a=="string"){if(Array.isArray(t)){var i=vs(a);return t[i.r]||(t[i.r]=[]),t[i.r][i.c]||(t[i.r][i.c]={t:"z"})}return t[a]||(t[a]={t:"z"})}return typeof a!="number"?Z0(t,Zt(a)):Z0(t,Zt({r:a,c:r||0}))}function gI(t,a){if(typeof a=="number"){if(a>=0&&t.SheetNames.length>a)return a;throw new Error("Cannot find sheet # "+a)}else if(typeof a=="string"){var r=t.SheetNames.indexOf(a);if(r>-1)return r;throw new Error("Cannot find sheet name |"+a+"|")}else throw new Error("Cannot find sheet |"+a+"|")}function Eg(){return{SheetNames:[],Sheets:{}}}function Cg(t,a,r,i){var l=1;if(!r)for(;l<=65535&&t.SheetNames.indexOf(r="Sheet"+l)!=-1;++l,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&t.SheetNames.indexOf(r)>=0){var d=r.match(/(^.*?)(\d+)$/);l=d&&+d[2]||0;var f=d&&d[1]||r;for(++l;l<=65535&&t.SheetNames.indexOf(r=f+l)!=-1;++l);}if(eO(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=a,r}function pI(t,a,r){t.Workbook||(t.Workbook={}),t.Workbook.Sheets||(t.Workbook.Sheets=[]);var i=gI(t,a);switch(t.Workbook.Sheets[i]||(t.Workbook.Sheets[i]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}t.Workbook.Sheets[i].Hidden=r}function yI(t,a){return t.z=a,t}function X4(t,a,r){return a?(t.l={Target:a},r&&(t.l.Tooltip=r)):delete t.l,t}function bI(t,a,r){return X4(t,"#"+a,r)}function vI(t,a,r){t.c||(t.c=[]),t.c.push({t:a,a:r||"SheetJS"})}function wI(t,a,r,i){for(var l=typeof a!="string"?a:ia(a),d=typeof a=="string"?a:pr(a),f=l.s.r;f<=l.e.r;++f)for(var h=l.s.c;h<=l.e.c;++h){var b=Z0(t,f,h);b.t="n",b.F=d,delete b.v,f==l.s.r&&h==l.s.c&&(b.f=r,i&&(b.D=!0))}return t}var X2={encode_col:Oa,encode_row:Ya,encode_cell:Zt,encode_range:pr,decode_col:ug,decode_row:dg,split_cell:OS,decode_cell:vs,decode_range:_c,format_cell:Fi,sheet_add_aoa:Ww,sheet_add_json:G4,sheet_add_dom:P4,aoa_to_sheet:Ac,json_to_sheet:mI,table_to_sheet:z4,table_to_book:LO,sheet_to_csv:V4,sheet_to_txt:xI,sheet_to_json:Um,sheet_to_html:BO,sheet_to_formulae:hI,sheet_to_row_object_array:Um,sheet_get_cell:Z0,book_new:Eg,book_append_sheet:Cg,book_set_sheet_visibility:pI,cell_set_number_format:yI,cell_set_hyperlink:X4,cell_set_internal_link:bI,cell_add_comment:vI,sheet_set_array_formula:wI,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};function NI(){const[t,a]=E.useState(!1),[r,i]=E.useState([]),[l,d]=E.useState({}),[f,h]=E.useState({}),[b,p]=E.useState({}),[w,j]=E.useState({}),[C,_]=E.useState({}),[R,A]=E.useState({}),[O,I]=E.useState({}),[M,T]=E.useState(!1),[B,H]=E.useState(!1),[U,L]=E.useState(null),[P,z]=E.useState(null);E.useEffect(()=>{K()},[]);const K=async()=>{try{T(!0);const se=await Se.get("/apartments");se.data.success&&i(se.data.data||[])}catch(se){console.error("Error loading apartments:",se),le.error("Failed to load apartments")}finally{T(!1)}},te=async se=>{if(se)try{const Z=await Se.get(`/floors?apartment_id=${se}`);if(Z.data.success){const Re=Z.data.data||[];d(je=>({...je,[se]:Re})),Re.forEach(je=>{V(se,je.id)})}}catch(Z){console.error("Error loading floors:",Z),le.error("Failed to load floors")}},V=async(se,Z)=>{if(!(!se||!Z))try{const Re=await Se.get(`/houses?apartment_id=${se}&floor_id=${Z}&status=vacant`);if(Re.data.success){const je=Re.data.data||[];h(Ue=>({...Ue,[Z]:je}))}}catch(Re){console.error("Error loading houses:",Re),le.error("Failed to load houses")}},ne=se=>{A(Z=>({...Z,[se]:!Z[se]})),R[se]||te(se)},ie=(se,Z)=>{const Re=`${se}_${Z}`;I(je=>({...je,[Re]:!je[Re]}))},X=(se,Z)=>{p(je=>({...je,[se]:Z})),(l[se]||[]).forEach(je=>{j(Me=>({...Me,[je.id]:Z})),(f[je.id]||[]).forEach(Me=>{_(at=>({...at,[Me.id]:Z}))})})},q=(se,Z,Re)=>{j(at=>({...at,[Z]:Re})),(f[Z]||[]).forEach(at=>{_(ye=>({...ye,[at.id]:Re}))});const Me=(l[se]||[]).every(at=>at.id===Z?Re:w[at.id]);p(at=>({...at,[se]:Me}))},ce=(se,Z,Re,je)=>{_(Ae=>({...Ae,[Re]:je}));const Me=(f[Z]||[]).every(Ae=>Ae.id===Re?je:C[Ae.id]);j(Ae=>({...Ae,[Z]:Me}));const ye=(l[se]||[]).every(Ae=>Ae.id===Z?Me:w[Ae.id]);p(Ae=>({...Ae,[se]:ye}))},we=se=>{const Z={};if(r.forEach(Re=>{Z[Re.id]=se}),p(Z),se){const Re={},je={};r.forEach(Ue=>{(l[Ue.id]||[]).forEach(at=>{Re[at.id]=se,(f[at.id]||[]).forEach(Ae=>{je[Ae.id]=se})})}),j(Re),_(je)}else j({}),_({})},oe=async()=>{try{const se=Object.keys(C).filter(Me=>C[Me]);if(se.length===0){le.error("Please select at least one house");return}T(!0);const Z=await Se.post("/house-owners/bulk/generate-template",{house_ids:se},{responseType:"arraybuffer"}),Re=new Blob([Z.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),je=window.URL.createObjectURL(Re),Ue=document.createElement("a");Ue.href=je,Ue.download=`House_Owners_Template_${new Date().toISOString().split("T")[0]}.xlsx`,document.body.appendChild(Ue),Ue.click(),Ue.remove(),window.URL.revokeObjectURL(je),le.success("Excel template downloaded successfully")}catch(se){console.error("Error downloading template:",se),le.error("Failed to download template")}finally{T(!1)}},fe=async se=>{const Z=se.target.files[0];if(Z){if(!Z.name.match(/\.(xlsx|xls|csv)$/i)){le.error("Please upload an Excel file");return}try{H(!0);const Re=await Z.arrayBuffer(),je=zm(Re,{type:"array"});let Ue=je.SheetNames.find(me=>me==="House Owners Template"||/house owners/i.test(me));if(!Ue)for(const me of je.SheetNames){const Pe=X2.sheet_to_json(je.Sheets[me],{header:1,range:0,defval:""}),pe=Pe&&Pe[0]?Pe[0].map(lt=>(""+lt).toString().trim().toLowerCase()):[];if(pe.includes("house id")||pe.includes("house_id")||pe.includes("house number")){Ue=me;break}}Ue||(Ue=je.SheetNames[0]);const Me=je.Sheets[Ue],at=X2.sheet_to_json(Me,{header:1,defval:""});if(!at||at.length<2){le.error("No data found in Excel file");return}const ye=at[0].map(me=>(""+me).trim()),Ae=me=>(""+(me||"")).toLowerCase().replace(/[^a-z0-9 ]/g," ").replace(/\s+/g," ").trim(),Fe=ye.map(me=>Ae(me)),Ce={},Je=[];if(Fe.forEach((me,Pe)=>{/house/.test(me)&&/(id|number|no)/.test(me)&&(Ce.house_id=Ce.house_id??Pe),/house\s*pk|house_pk|house\s*primary|house\s*id\s*pk/.test(me)&&(Ce.house_pk=Ce.house_pk??Pe),/apartment/.test(me)&&/(id|name)/.test(me)&&(/id/.test(me)?Ce.apartment_id=Ce.apartment_id??Pe:Ce.apartment_name=Ce.apartment_name??Pe),/floor/.test(me)&&(Ce.floor_id=Ce.floor_id??Pe),/owner/.test(me)&&/name/.test(me)&&(Ce.owner_name=Ce.owner_name??Pe),me==="name"&&Je.push(Pe),/email/.test(me)&&(Ce.email=Ce.email??Pe),(/nic/.test(me)||/id ?no/.test(me))&&(Ce.nic=Ce.nic??Pe),/mobile|phone|contact/.test(me)&&(Ce.mobile=Ce.mobile??Pe),/occupation/.test(me)&&(Ce.occupation=Ce.occupation??Pe),/country/.test(me)&&(Ce.country=Ce.country??Pe),/occupied/.test(me)&&(Ce.occupied=Ce.occupied??Pe)}),!Ce.owner_name&&Je.length>0)if(Ce.apartment_name){const me=Je.find(Pe=>Pe!==Ce.apartment_name);Ce.owner_name=me??Je[Je.length-1]}else Ce.owner_name=Je[Je.length-1];if(!Ce.house_id){const me=Fe.find((Pe,pe)=>/(house|house number|house no|house_no)/.test(Pe));me&&(Ce.house_id=Fe.indexOf(me))}const be=at.slice(1).map((me,Pe)=>({_row:Pe+2,house_pk:Ce.house_pk!==void 0?me[Ce.house_pk]:void 0,house_id:Ce.house_id!==void 0?me[Ce.house_id]:void 0,apartment_id:Ce.apartment_id!==void 0?me[Ce.apartment_id]:void 0,floor_id:Ce.floor_id!==void 0?me[Ce.floor_id]:void 0,name:Ce.owner_name!==void 0?me[Ce.owner_name]:void 0,nic:Ce.nic!==void 0?me[Ce.nic]:void 0,occupation:Ce.occupation!==void 0?me[Ce.occupation]:void 0,country:Ce.country!==void 0?me[Ce.country]:void 0,mobile:Ce.mobile!==void 0?me[Ce.mobile]:void 0,email:Ce.email!==void 0?me[Ce.email]:void 0,occupied_raw:Ce.occupied!==void 0?me[Ce.occupied]:void 0})).filter(me=>Object.values(me).some(Pe=>Pe!==void 0&&Pe!==""));if(be.length===0){le.error("No data rows found in template");return}const dt=be.map(me=>{const Pe=me._row,pe=me.house_pk||me.house_id,lt=me.name,st=me.email;if(!pe||!lt||!st)throw new Error(`Row ${Pe}: House ID, Owner Name, and Email are required`);if(typeof st=="string"&&!st.includes("@"))throw new Error(`Row ${Pe}: Invalid email format`);const jt=(me.occupied_raw||"own").toString().trim();if(!["own","for rent","For rent","Own"].map(At=>At.toLowerCase()).includes(jt.toLowerCase()))throw new Error(`Row ${Pe}: Occupied Type must be "own" or "For rent"`);return{house_id:pe,apartment_id:me.apartment_id,floor_id:me.floor_id,name:lt,nic:me.nic||"",occupation:me.occupation||"",country:me.country||"",mobile:me.mobile||"",email:st,occupied_way:jt.toLowerCase()==="for rent"?"For rent":"own"}});L({fileName:Z.name,totalRows:dt.length,data:dt}),z(Z),le.success(`Successfully parsed ${dt.length} records`)}catch(Re){console.error("Error parsing Excel file:",Re),le.error(Re.message||"Failed to parse Excel file")}finally{H(!1),se.target.value=""}}},re=async()=>{if(!U||U.data.length===0){le.error("No data to import");return}try{if(H(!0),!P){le.error("Original file not found. Please upload the Excel file again.");return}const se=new FormData;se.append("excelFile",P,P.name);const Z=await Se.post("/house-owners/bulk/bulk-import",se,{headers:{"Content-Type":"multipart/form-data"}});Z.data.success?(le.success(`Import completed: ${Z.data.data?.success||0} successful, ${Z.data.data?.failed||0} failed`),Z.data.data?.errors&&Z.data.data.errors.length>0&&(console.error("Import errors:",Z.data.data.errors),le.error(`Some rows failed:
${Z.data.data.errors.map(Re=>`Row ${Re.row}: ${Re.error}`).join(`
`)}`))):le.error(Z.data.message||"Import failed"),L(null),K()}catch(se){console.error("Import error:",se),le.error(se.response?.data?.message||"Failed to import data")}finally{H(!1)}},Q=()=>{const se=Object.values(b).filter(Boolean).length,Z=Object.values(w).filter(Boolean).length,Re=Object.values(C).filter(Boolean).length;return{apartmentCount:se,floorCount:Z,houseCount:Re}},{apartmentCount:Y,houseCount:ae}=Q();return e.jsxs("div",{className:"flex h-screen bg-gray-100 dark:bg-gray-900 w-screen transition-colors duration-200",children:[e.jsx(vr,{onCollapse:a}),e.jsxs("div",{className:`flex-1 flex flex-col overflow-hidden transition-all duration-300 ${t?"ml-20":"ml-64"}`,children:[e.jsx(Hr,{}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"mx-auto max-w-7xl",children:[e.jsx("div",{className:"flex items-center justify-between bg-white dark:bg-gray-800 rounded-2xl p-6 mb-6",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(pC,{size:40,className:"text-purple-600 dark:text-purple-400 mr-3"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Bulk Import House Owners"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Select apartments, floors, and houses to create Excel template"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800 dark:text-white",children:"Select Houses"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:()=>we(Y!==r.length),className:"px-4 py-2 text-sm bg-purple-100 dark:bg-purple-900 text-purple-700 dark:text-purple-300 rounded-lg font-medium hover:bg-purple-200 dark:hover:bg-purple-800 transition-colors",children:Y===r.length?"Deselect All":"Select All"})})]}),M&&r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600 dark:text-gray-400",children:"Loading apartments..."})]}):r.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ri,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"No apartments found"})]}):e.jsx("div",{className:"space-y-4 max-h-[500px] overflow-y-auto pr-2",children:r.map(se=>e.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center p-4 bg-gray-50 dark:bg-gray-900 rounded-t-lg",children:[e.jsx("input",{type:"checkbox",checked:!!b[se.id],onChange:Z=>X(se.id,Z.target.checked),className:"h-5 w-5 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>ne(se.id),className:"ml-3 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ri,{className:"h-5 w-5 text-gray-500 dark:text-gray-400 mr-3"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:se.name})]}),R[se.id]?e.jsx(kl,{className:"h-5 w-5 text-gray-500"}):e.jsx(P0,{className:"h-5 w-5 text-gray-500"})]})]}),R[se.id]&&e.jsx("div",{className:"p-4 pt-0",children:l[se.id]?l[se.id].length===0?e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm py-4 text-center",children:"No floors found"}):l[se.id].map(Z=>e.jsxs("div",{className:"ml-6 mb-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"checkbox",checked:!!w[Z.id],onChange:Re=>q(se.id,Z.id,Re.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("button",{onClick:()=>ie(se.id,Z.id),className:"ml-2 flex-1 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(pf,{className:"h-4 w-4 text-gray-500 dark:text-gray-400 mr-2"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Floor ",Z.floor_id]})]}),O[`${se.id}_${Z.id}`]?e.jsx(kl,{className:"h-4 w-4 text-gray-500"}):e.jsx(P0,{className:"h-4 w-4 text-gray-500"})]})]}),O[`${se.id}_${Z.id}`]&&e.jsx("div",{className:"ml-8 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:f[Z.id]?f[Z.id].length===0?e.jsx("p",{className:"col-span-full text-gray-500 dark:text-gray-400 text-sm py-2",children:"No houses found"}):f[Z.id].map(Re=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",checked:!!C[Re.id],onChange:je=>ce(se.id,Z.id,Re.id,je.target.checked),className:"h-4 w-4 text-purple-600 rounded border-gray-300 focus:ring-purple-500"}),e.jsxs("label",{className:"ml-2 flex items-center",children:[e.jsx(Ur,{className:"h-3 w-3 text-gray-500 dark:text-gray-400 mr-1"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:Re.house_id||Re.house_number})]})]},Re.id)):e.jsx("div",{className:"col-span-full text-center py-2",children:e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-purple-600 mx-auto"})})})]},Z.id)):e.jsx("div",{className:"text-center py-4",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600 mx-auto"})})})]},se.id))})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Download Excel Template"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Download a pre-filled Excel template with the selected houses."}),e.jsx("button",{onClick:oe,disabled:M||ae===0,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-purple-600 hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:M?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Preparing Template..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Cl,{className:"h-5 w-5"}),e.jsxs("span",{children:["Download Template (",ae," houses)"]})]})})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Upload & Import"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 text-sm mb-6",children:"Upload the filled Excel sheet to import house owners in bulk. Verification emails will be sent automatically."}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Upload Excel File"}),e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:fe,disabled:B,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-purple-50 file:text-purple-700 hover:file:bg-purple-100 dark:file:bg-purple-900 dark:file:text-purple-300"})]}),U&&e.jsxs("div",{className:"mb-6 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(dn,{className:"h-5 w-5 text-green-600 dark:text-green-400 mr-2"}),e.jsx("span",{className:"font-medium text-green-800 dark:text-green-300",children:"Ready to Import"})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-400 mt-1",children:[U.fileName," - ",U.totalRows," records loaded"]}),e.jsxs("div",{className:"mt-3 text-xs text-green-600 dark:text-green-400 space-y-1",children:[e.jsx("p",{children:" File parsed successfully"}),e.jsx("p",{children:" Data validated"}),e.jsx("p",{children:" Ready for bulk import"})]})]}),e.jsx("button",{onClick:re,disabled:B||!U,className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg font-semibold shadow-md transition-all duration-300 text-white bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:B?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),e.jsx("span",{children:"Importing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Os,{className:"h-5 w-5"}),e.jsx("span",{children:"Start Bulk Import"})]})})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-2xl p-6",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-300 mb-3",children:"Instructions"}),e.jsxs("ul",{className:"space-y-2 text-sm text-blue-700 dark:text-blue-400",children:[e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"1."}),e.jsx("span",{children:"Select apartments, floors, and houses using checkboxes"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"2."}),e.jsx("span",{children:'Click "Download Template" to get Excel file'})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"3."}),e.jsx("span",{children:"Fill owner details in Excel (don't add/delete rows)"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"4."}),e.jsx("span",{children:"Upload the filled Excel file"})]}),e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"inline-block w-5",children:"5."}),e.jsx("span",{children:'Click "Start Bulk Import"'})]})]})]})]})]})]})})]}),e.jsx(nr,{position:"top-center",autoClose:3e3})]})}function kI(){return e.jsx(D3,{children:e.jsx(y6,{children:e.jsxs(o3,{children:[e.jsx($t,{path:"/",element:e.jsx(U3,{})}),e.jsx($t,{path:"/login",element:e.jsx(s8,{})}),e.jsx($t,{path:"/register",element:e.jsx(n8,{})}),e.jsx($t,{path:"/verify",element:e.jsx(i8,{})}),e.jsx($t,{path:"/sidebar",element:e.jsx(vr,{})}),e.jsx($t,{path:"/navbar",element:e.jsx(Hr,{})}),e.jsx($t,{path:"/admindashboard",element:e.jsx(l8,{})}),e.jsx($t,{path:"/apartmentview",element:e.jsx(u8,{})}),e.jsx($t,{path:"/userview",element:e.jsx(v8,{})}),e.jsx($t,{path:"/floors/:id",element:e.jsx(j8,{})}),e.jsx($t,{path:"/houses/:apartment_id/:floor_id",element:e.jsx(c_,{})}),e.jsx($t,{path:"/housetype/:apartment_id",element:e.jsx(Zv,{})}),e.jsx($t,{path:"/viewhouse/:apartment_id/:floor_id/:id",element:e.jsx(T8,{})}),e.jsx($t,{path:"/bills/:apartment_id",element:e.jsx(ew,{})}),e.jsx($t,{path:"/reset-password",element:e.jsx(u_,{})}),e.jsx($t,{path:"/forgot-password",element:e.jsx(d_,{})}),e.jsx($t,{path:"/complete-registration",element:e.jsx(f_,{})}),e.jsx($t,{path:"/manage-bills",element:e.jsx(x_,{})}),e.jsx($t,{path:"/bills-and-calculations",element:e.jsx(y_,{})}),e.jsx($t,{path:"/billranges/:bill_id",element:e.jsx(w_,{})}),e.jsx($t,{path:"/billprice/:bill_id/:billrange_id",element:e.jsx(j_,{})}),e.jsx($t,{path:"/employee-dashboard",element:e.jsx(E_,{})}),e.jsx($t,{path:"/role",element:e.jsx(Kv,{})}),e.jsx($t,{path:"/profile-page",element:e.jsx(C_,{})}),e.jsx($t,{path:"/my-apartments",element:e.jsx(__,{})}),e.jsx($t,{path:"/shared-value-bill-prices/:bill_id",element:e.jsx(S_,{})}),e.jsx($t,{path:"/bill-payments",element:e.jsx(T_,{})}),e.jsx($t,{path:"/measurable-bills",element:e.jsx(dw,{})}),e.jsx($t,{path:"/calculate-measurable-bill/:bill_id",element:e.jsx(aA,{})}),e.jsx($t,{path:"/my-bills",element:e.jsx(sA,{})}),e.jsx($t,{path:"/house-bill-meter/:bill_id",element:e.jsx(nA,{})}),e.jsx($t,{path:"/bill-payment-settle",element:e.jsx(iA,{})}),e.jsx($t,{path:"/houseowner/login",element:e.jsx(lA,{})}),e.jsx($t,{path:"/houseowner/verify",element:e.jsx(cA,{})}),e.jsx($t,{path:"/houseowner/dashboard",element:e.jsx(oA,{})}),e.jsx($t,{path:"/houseowner/houseowner-houseview",element:e.jsx(dA,{})}),e.jsx($t,{path:"/houseowner/houseowner-billview",element:e.jsx(uA,{})}),e.jsx($t,{path:"/houseowner/complaints",element:e.jsx(fA,{})}),e.jsx($t,{path:"/houseowner/houseowner-profile",element:e.jsx(mA,{})}),e.jsx($t,{path:"/view-complaints",element:e.jsx(xA,{})}),e.jsx($t,{path:"/my-complaints",element:e.jsx(hA,{})}),e.jsx($t,{path:"/my-work/:complaintId",element:e.jsx(pA,{})}),e.jsx($t,{path:"/start-work",element:e.jsx(uw,{})}),e.jsx($t,{path:"/complaint-categories",element:e.jsx(vA,{})}),e.jsx($t,{path:"/bulk-import-houseowner",element:e.jsx(NI,{})})]})})})}function jI(){const[t,a]=E.useState(null);return e.jsx(Ir.Provider,{value:{auth:t,setAuth:a},children:e.jsx(kI,{})})}yk.createRoot(document.getElementById("root")).render(e.jsx(jI,{}));export{tw as _,wu as c,of as g};
